<!DOCTYPE html><html><head><title>Help for package spduration</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {spduration}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#accessors'><p>Accessor methods for spdur Objects</p></a></li>
<li><a href='#add_duration'><p>Add duration variables to panel data</p></a></li>
<li><a href='#AIC.spdur'><p>AIC method for spdur</p></a></li>
<li><a href='#as.data.frame.spdur'><p>Convert spdur results to summary data frame</p></a></li>
<li><a href='#attempt_date'><p>Attempt to convert to R date format</p></a></li>
<li><a href='#BIC.spdur'><p>BIC method for spdur</p></a></li>
<li><a href='#bscoup'><p>B&amp;S 2003 coup data</p></a></li>
<li><a href='#coups'><p>Global coups, 1979 to 2010</p></a></li>
<li><a href='#expand.call'><p>Expand call to full names.</p></a></li>
<li><a href='#forecast.spdur'><p>Forecast from a spdur model</p></a></li>
<li><a href='#hazard'><p>Calculate hazard function values</p></a></li>
<li><a href='#loglog'><p>Regular Log-logistic regression</p></a></li>
<li><a href='#loglog_lnl'><p>Regular Log-logistic likelihood</p></a></li>
<li><a href='#model.coups'><p>Model of global coups from 1979 to 2010</p></a></li>
<li><a href='#panel_lag'><p>Lag panel data</p></a></li>
<li><a href='#plot_hazard'><p>Plot hazard function</p></a></li>
<li><a href='#plot_hazard1'><p>Plot conditional hazard rate</p></a></li>
<li><a href='#plot_hazard2'><p>Simulate and plot hazard function</p></a></li>
<li><a href='#plot.spdur'><p>Plot split-duration model results.</p></a></li>
<li><a href='#predict.spdur'><p>Predict methods for spdur Objects</p></a></li>
<li><a href='#print.summary.spdur'><p>Print a split-population duration model results summary</p></a></li>
<li><a href='#sepplot'><p>Generate a Separation Plot</p></a></li>
<li><a href='#spdur'><p>Split-population duration (cure) regression</p></a></li>
<li><a href='#spduration'><p>Split-Population Duration (Cure) Regression Models</p></a></li>
<li><a href='#sploglog'><p>Split-population Log-logistic regression</p></a></li>
<li><a href='#sploglog_lnl'><p>Split-population Log-logistic log likelihood</p></a></li>
<li><a href='#spweib_lnl'><p>Split-population Weibull log likelihood</p></a></li>
<li><a href='#spweibull'><p>Split-population Weibull regression</p></a></li>
<li><a href='#summary.spdur'><p>Summarize split-population duration results</p></a></li>
<li><a href='#weib_lnl'><p>Regular weibull log likelihood</p></a></li>
<li><a href='#weibull'><p>Regular Weibull regression</p></a></li>
<li><a href='#xtable.spdur'><p>Create export table for a split-duration model</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Split-Population Duration (Cure) Regression</td>
</tr>
<tr>
<td>Version:</td>
<td>0.17.2</td>
</tr>
<tr>
<td>Description:</td>
<td>An implementation of split-population duration regression models. 
    Unlike regular duration models, split-population duration models are
    mixture models that accommodate the presence of a sub-population that is 
    not at risk for failure, e.g. cancer patients who have been cured by 
    treatment. This package implements Weibull and Loglogistic forms for the 
    duration component, and focuses on data with time-varying covariates. 
    These models were originally formulated in Boag (1949) and Berkson and Gage 
    (1952), and extended in Schmidt and Witte (1989).</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.2)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>corpcor, graphics, forecast, MASS, stats, Rcpp (&ge; 0.11.0),
separationplot, xtable</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, devtools, testthat, knitr, rmarkdown, tibble</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppArmadillo</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/andybega/spduration">https://github.com/andybega/spduration</a>,
<a href="https://www.andybeger.com/spduration/">https://www.andybeger.com/spduration/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/andybega/spduration/issues">https://github.com/andybega/spduration/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-08 09:42:36 UTC; andybega</td>
</tr>
<tr>
<td>Author:</td>
<td>Andreas Beger <a href="https://orcid.org/0000-0003-1883-3169"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Daina Chiba <a href="https://orcid.org/0000-0002-9208-4373"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Daniel W. Hill, Jr. [aut],
  Nils W. Metternich
    <a href="https://orcid.org/0000-0001-8757-0409"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Shahryar Minhas [aut],
  Michael D. Ward <a href="https://orcid.org/0000-0002-6561-6186"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Andreas Beger &lt;adbeger@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-08 10:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='accessors'>Accessor methods for spdur Objects</h2><span id='topic+accessors'></span><span id='topic+logLik.spdur'></span><span id='topic+nobs.spdur'></span><span id='topic+coef.spdur'></span><span id='topic+vcov.spdur'></span><span id='topic+model.matrix.spdur'></span><span id='topic+terms.spdur'></span>

<h3>Description</h3>

<p>Several standard accessor methods for a <code>spdur</code> class object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'spdur'
logLik(object, ...)

## S3 method for class 'spdur'
nobs(object, ...)

## S3 method for class 'spdur'
coef(object, model = c("full", "duration", "risk", "distr"), ...)

## S3 method for class 'spdur'
vcov(object, model = c("full", "duration", "risk", "distr"), ...)

## S3 method for class 'spdur'
model.matrix(object, model = c("duration", "risk"), ...)

## S3 method for class 'spdur'
terms(x, model = c("duration", "risk"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="accessors_+3A_object">object</code></td>
<td>
<p>an object inheriting from class <code>spdur</code>.</p>
</td></tr>
<tr><td><code id="accessors_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
<tr><td><code id="accessors_+3A_model">model</code></td>
<td>
<p>return full model, or only duration or risk equations, or 
distribution parameters.</p>
</td></tr>
<tr><td><code id="accessors_+3A_x">x</code></td>
<td>
<p><code>spdur</code> class object for terms</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+AIC.spdur">AIC.spdur</a></code>, <code><a href="#topic+BIC.spdur">BIC.spdur</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(model.coups)

logLik(model.coups)

nobs(model.coups)

coef(model.coups)

vcov(model.coups)

head(model.matrix(model.coups))

terms(model.coups)

</code></pre>

<hr>
<h2 id='add_duration'>Add duration variables to panel data</h2><span id='topic+add_duration'></span>

<h3>Description</h3>

<p>Builds a duration version of a data frame representing panel data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_duration(
  data,
  y,
  unitID,
  tID,
  freq = "month",
  sort = FALSE,
  ongoing = TRUE,
  slice.last = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_duration_+3A_data">data</code></td>
<td>
<p>Data frame representing panel data.</p>
</td></tr>
<tr><td><code id="add_duration_+3A_y">y</code></td>
<td>
<p>A binary indicator of the incidence of some event, e.g. a coup.</p>
</td></tr>
<tr><td><code id="add_duration_+3A_unitid">unitID</code></td>
<td>
<p>Name of the variable in the data frame identifying the 
cross-sectional units, e.g. <code>"country"</code>.</p>
</td></tr>
<tr><td><code id="add_duration_+3A_tid">tID</code></td>
<td>
<p>Name of the variable in the data frame identifying the time unit, 
preferably as class <code><a href="base.html#topic+Date">Date</a></code>. E.g. <code>"year"</code>.</p>
</td></tr>
<tr><td><code id="add_duration_+3A_freq">freq</code></td>
<td>
<p>Frequency at which units are measured in <code>tID</code>. Currently 
yearly, monthly, and daily data are supported, i.e. <code>"year"</code>, 
<code>"month"</code>, or <code>"day"</code>.</p>
</td></tr>
<tr><td><code id="add_duration_+3A_sort">sort</code></td>
<td>
<p>Sort data by unit and time? Default is <code>FALSE</code>, i.e. return
data in original order.</p>
</td></tr>
<tr><td><code id="add_duration_+3A_ongoing">ongoing</code></td>
<td>
<p>If <code>TRUE</code>, successive 1's are considered ongoing events
and treated as <code>NA</code> after the first 1. If <code>FALSE</code>, successive 1's 
are all treated as failures.</p>
</td></tr>
<tr><td><code id="add_duration_+3A_slice.last">slice.last</code></td>
<td>
<p>Set to <code>TRUE</code> to create a slice of the last time 
period; used with <code><a href="#topic+forecast.spdur">forecast.spdur</a></code>. For compatibility with CRISP 
and ICEWS projects.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function processes a panel data frame by creating a failure 
variable from <code>y</code> and corresponding duration counter, as well as 
risk/immunity indicators. Supported time resolutions are year, month, and
day, and input data should be (dis-)aggregated to one of these levels.
</p>
<p>The returned data frame should have the same number of rows at the original. 
If <code>y</code> is an indicator of the incidence of some event, rather than an 
onset indicator, then ongoing spells of failure beyond the initial event are 
coded as NA (e.g. 000111 becomes a spell of 0001 NA NA). This is to preserve
compatibility with the base dataset. Note that the order of rows may be 
different though.
</p>
<p>There cannot be missing values (&quot;<code>NA</code>&quot;) in any of the key variables 
<code>y</code>, <code>unitID</code>, or <code>tID</code>; they will stop the function.
</p>
<p>Furthermore, series that start with an event, e.g. (100), are treated as 
experiencing failure in the first time period. If those events are in fact 
ongoing, e.g. the last year of a war that started before the start time of 
the dataset, they should be dropped manually before using 
<code>buildDuration()</code>.
</p>
<p><code>t.0</code> is the starting time of the period of observation at <code>tID</code>. 
It is by default set as <code>duration - 1</code> and currently only serves as a 
placeholder to allow future expansion for varying observation times.
</p>


<h3>Value</h3>

<p>Returns the original data frame with 8 duration-specific additional 
variables:
</p>
<table>
<tr><td><code>failure</code></td>
<td>
<p>Binary indicator of an event.</p>
</td></tr>
<tr><td><code>ongoing</code></td>
<td>
<p>Binary indicator for ongoing events, not counting the initial 
failure time.</p>
</td></tr>
<tr><td><code>end.spell</code></td>
<td>
<p>Binary indicator for the last observation in a spell, either
due to censoring or failure.</p>
</td></tr>
<tr><td><code>cured</code></td>
<td>
<p>Binary indicator for spells that are coded as cured, or immune
from failure. Equal to 1 - <code>atrisk</code>.</p>
</td></tr>
<tr><td><code>atrisk</code></td>
<td>
<p>Binary indicator for spells that are coded as at risk for 
failure. Equal to 1 - <code>cured</code>.</p>
</td></tr>
<tr><td><code>censor</code></td>
<td>
<p>Binary indicator for right-censored spells.</p>
</td></tr>
<tr><td><code>duration</code></td>
<td>
<p><code>t</code>, counter for how long a spell has survived without
failure.</p>
</td></tr>
<tr><td><code>t.0</code></td>
<td>
<p>Starting time for period observed during <code>t</code>, by default
equals <code>duration</code> - 1.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+panel_lag">panel_lag</a></code> for lagging variables in a panel data frame 
before building duration data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Yearly data
data &lt;- data.frame(y=c(0,0,0,1,0), 
                   unitID=c(1,1,1,1,1), 
                   tID=c(2000, 2001, 2002, 2003, 2004))
dur.data &lt;- add_duration(data, "y", "unitID", "tID", freq="year")
dur.data

</code></pre>

<hr>
<h2 id='AIC.spdur'>AIC method for spdur</h2><span id='topic+AIC.spdur'></span>

<h3>Description</h3>

<p>Computes the Akaike Information Criterion for an <code>spdur</code> class object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'spdur'
AIC(object, ..., k = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AIC.spdur_+3A_object">object</code></td>
<td>
<p>An object of class <code>spdur</code>.</p>
</td></tr>
<tr><td><code id="AIC.spdur_+3A_...">...</code></td>
<td>
<p>Optional arguments.</p>
</td></tr>
<tr><td><code id="AIC.spdur_+3A_k">k</code></td>
<td>
<p>The penalty parameter, by default 2. For <code><a href="#topic+BIC.spdur">BIC.spdur</a></code>,
the penalty parameter equals <code>log(N)</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code>link{AIC}</code>, <code>link{BIC.spdur}</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(model.coups)
AIC(model.coups)

</code></pre>

<hr>
<h2 id='as.data.frame.spdur'>Convert spdur results to summary data frame</h2><span id='topic+as.data.frame.spdur'></span>

<h3>Description</h3>

<p><code>table</code>-like function for class &ldquo;<code>spdur</code>&rdquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'spdur'
as.data.frame(x, row.names = TRUE, optional = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.data.frame.spdur_+3A_x">x</code></td>
<td>
<p>An object with class <code>spdur</code>.</p>
</td></tr>
<tr><td><code id="as.data.frame.spdur_+3A_row.names">row.names</code></td>
<td>
<p>Indicates whether parameter names should be added as row
names to the data frame returned, or as a separate column with blank row 
row names.</p>
</td></tr>
<tr><td><code id="as.data.frame.spdur_+3A_optional">optional</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="as.data.frame.spdur_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This will create a data frame containing the estimated coefficients and 
standard errors for the risk and duration equations of a split-population 
duration model. It's intended purpose is to help create larger tables
combining several model results.
</p>


<h3>Value</h3>

<p>An data frame with model coefficients and p-values.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+xtable.spdur">xtable.spdur</a></code> for formatting a single model to 
Latex output.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(model.coups)
data.frame(model.coups)

</code></pre>

<hr>
<h2 id='attempt_date'>Attempt to convert to R date format</h2><span id='topic+attempt_date'></span>

<h3>Description</h3>

<p>For internal use only
</p>


<h3>Usage</h3>

<pre><code class='language-R'>attempt_date(date, by)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="attempt_date_+3A_date">date</code></td>
<td>
<p>character or numeric</p>
</td></tr>
<tr><td><code id="attempt_date_+3A_by">by</code></td>
<td>
<p>character, &quot;year&quot;, &quot;month&quot;, or &quot;day&quot;</p>
</td></tr>
</table>

<hr>
<h2 id='BIC.spdur'>BIC method for spdur</h2><span id='topic+BIC.spdur'></span>

<h3>Description</h3>

<p>Computes the Bayesian Information Criterion for an <code>spdur</code> class object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'spdur'
BIC(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="BIC.spdur_+3A_object">object</code></td>
<td>
<p>An object of class <code>spdur</code>.</p>
</td></tr>
<tr><td><code id="BIC.spdur_+3A_...">...</code></td>
<td>
<p>Optional arguments.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Computed as <code>AIC(object, k = log(nobs(object)))</code>.
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+BIC">BIC</a></code>, <code><a href="#topic+AIC.spdur">AIC.spdur</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(model.coups)
BIC(model.coups)

</code></pre>

<hr>
<h2 id='bscoup'>B&amp;S 2003 coup data</h2><span id='topic+bscoup'></span>

<h3>Description</h3>

<p>Replication data from Belkin and Schofer's 2003 paper on coups.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bscoup
</code></pre>


<h3>Format</h3>

<p>A data frame with 5463 observations of 14 variables:
</p>

<dl>
<dt><code>countryid</code></dt><dd><p>Gleditsch and Ward country codes.</p>
</dd>
<dt><code>year</code></dt><dd><p>Year</p>
</dd>
<dt><code>couprisk</code></dt><dd><p>Structural coup risk index, see paper for details.</p>
</dd>
<dt><code>recentcoups</code></dt><dd><p>Alternative coup risk measure, running count of coups in past 10 years.</p>
</dd>
<dt><code>rwar</code></dt><dd><p>Country participated in war in past 10 years.</p>
</dd>
<dt><code>milreg</code></dt><dd><p>1=Military regime, 0=other</p>
</dd>
<dt><code>wealth</code></dt><dd><p>log of GDP per capita</p>
</dd>
<dt><code>instab</code></dt><dd><p>Domestic instability and violence.</p>
</dd>
<dt><code>coup</code></dt><dd><p>Indicator for successful coup.</p>
</dd>
<dt><code>africa</code></dt><dd><p>Indicator for countries in Africa.</p>
</dd>
<dt><code>eurnam</code></dt><dd><p>Indicator for countries in Europe and N. America.</p>
</dd>
<dt><code>samerica</code></dt><dd><p>Indicator for countries in South America.</p>
</dd>
<dt><code>camerica</code></dt><dd><p>Indicator for countries in Central America.</p>
</dd>
<dt><code>regconf</code></dt><dd><p>Regional conflict.</p>
</dd>
</dl>



<h3>Source</h3>

<p>Belkin, Aaron and Evan Schofer. 2003. &ldquo;Toward a structural understanding of 
coup risk.&rdquo; Journal of Conflict Resolution Vol. 47 No. 5.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(bscoup)
table(bscoup$coup)
range(bscoup$year)
</code></pre>

<hr>
<h2 id='coups'>Global coups, 1979 to 2010</h2><span id='topic+coups'></span>

<h3>Description</h3>

<p>Data on global coups from 1979 to 2010 from Powell &amp; Thyne
</p>


<h3>Usage</h3>

<pre><code class='language-R'>coups
</code></pre>


<h3>Format</h3>

<p>A data frame with 5828 observations of 9 variables:
</p>

<dl>
<dt><code>gwcode</code></dt><dd><p>Gleditsch and Ward country codes.</p>
</dd>
<dt><code>year</code></dt><dd><p>Year, in date format.</p>
</dd>
<dt><code>coup1</code></dt><dd></dd>
<dt><code>succ.coup</code></dt><dd><p>Successful coup, 0/1.</p>
</dd>
<dt><code>democ</code></dt><dd><p>Polity democracy score (0-10).</p>
</dd>
<dt><code>autoc</code></dt><dd><p>Polity autocracy score (0-10).</p>
</dd>
<dt><code>polity</code></dt><dd><p>Polity score (democ-autoc).</p>
</dd>
<dt><code>polity2</code></dt><dd><p>Polity score with correction for regime transitions.</p>
</dd>
<dt><code>regtrans</code></dt><dd><p>Regime transitions.</p>
</dd>
</dl>



<h3>Source</h3>

<p>Powell, Jonathan M. and Clayton L. Thyne. &ldquo;Global instances of coups from 
1950 to 2010: A new dataset.&rdquo; Journal of Peace Research Vol. 48 No. 2.
</p>
<p>Gleditsch, Kristian S. and Michael D. Ward. 1999. &ldquo;Interstate System 
Membership: A Revised List of the Independent States since 1816.&quot; 
International Interactions 25.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(coups)
table(coups$succ.coup)
</code></pre>

<hr>
<h2 id='expand.call'>Expand call to full names.</h2><span id='topic+expand.call'></span>

<h3>Description</h3>

<p>Return a call in which all of the arguments which were supplied
or have presets are specified by their full names and supplied
or default values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expand.call(
  definition = NULL,
  call = sys.call(sys.parent(1)),
  expand.dots = TRUE,
  eval = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expand.call_+3A_definition">definition</code></td>
<td>
<p>a function. See <code><a href="base.html#topic+match.call">match.call</a></code>.</p>
</td></tr>
<tr><td><code id="expand.call_+3A_call">call</code></td>
<td>
<p>an unevaluated call to the function specified by definition.
See <code><a href="base.html#topic+match.call">match.call</a></code>.</p>
</td></tr>
<tr><td><code id="expand.call_+3A_expand.dots">expand.dots</code></td>
<td>
<p>logical. Should arguments matching ... in the call be 
included or left as a ... argument? See <code><a href="base.html#topic+match.call">match.call</a></code>.</p>
</td></tr>
<tr><td><code id="expand.call_+3A_eval">eval</code></td>
<td>
<p>logical, defaults to TRUE. Should function arguments be 
evaluated in the returned call or not?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class call.
</p>


<h3>Author(s)</h3>

<p>fabians
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+match.call">match.call</a></code>
</p>

<hr>
<h2 id='forecast.spdur'>Forecast from a spdur model</h2><span id='topic+forecast.spdur'></span>

<h3>Description</h3>

<p><code><a href="fabletools.html#topic+forecast">forecast</a></code> method for <code><a href="#topic+spdur">spdur</a></code> class objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'spdur'
forecast(
  object,
  ...,
  pred.data = NULL,
  stat = "conditional hazard",
  n.ahead = 6
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="forecast.spdur_+3A_object">object</code></td>
<td>
<p>A <code><a href="#topic+spdur">spdur</a></code> class model object.</p>
</td></tr>
<tr><td><code id="forecast.spdur_+3A_...">...</code></td>
<td>
<p>Optional arguments, not used.</p>
</td></tr>
<tr><td><code id="forecast.spdur_+3A_pred.data">pred.data</code></td>
<td>
<p>Data on which to base forecasts, i.e. slice of last time
unit's observations for all cross-sectional units.</p>
</td></tr>
<tr><td><code id="forecast.spdur_+3A_stat">stat</code></td>
<td>
<p>Which statistic to forecast, see <code><a href="#topic+predict.spdur">predict.spdur</a></code>
for possible options</p>
</td></tr>
<tr><td><code id="forecast.spdur_+3A_n.ahead">n.ahead</code></td>
<td>
<p>How many time periods to predict ahead. Default is 6.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function will create out-of-sample predictions of &ldquo;stat&rdquo; 
using model estimates and the prediction data provided. It is assumed that
prediction data consist of a slice of the last time period observed for
the data used to estimate the model in <code>object</code>. For each row, 
<code>forecast.spdur</code> will estimate the model predictions for that time point
and then extrapolate the resulting probability to <code>n.ahead</code> time
periods using appropriate probability theory. 
</p>
<p>For situations in which the covariate values are known for future time
periods, e.g. in a test sample use <code><a href="#topic+predict.spdur">predict.spdur</a></code> instead.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(forecast)
data(coups)
data(model.coups)

coups.dur &lt;- add_duration(coups, "succ.coup", "gwcode", "year", freq="year")
pred.data &lt;- coups.dur[coups.dur$year==max(coups.dur$year), ]
pred.data &lt;- pred.data[complete.cases(pred.data), ]
fcast &lt;- forecast(model.coups, pred.data=pred.data)

</code></pre>

<hr>
<h2 id='hazard'>Calculate hazard function values</h2><span id='topic+hazard'></span>

<h3>Description</h3>

<p>Calculate hazard function values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hazard(ti, lambda, cure, alpha, out, dist)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hazard_+3A_ti">ti</code></td>
<td>
<p>Vector of duration values over which to evaluate the hazard function.</p>
</td></tr>
<tr><td><code id="hazard_+3A_lambda">lambda</code></td>
<td>
<p>density function parameter</p>
</td></tr>
<tr><td><code id="hazard_+3A_cure">cure</code></td>
<td>
<p>density function parameter</p>
</td></tr>
<tr><td><code id="hazard_+3A_alpha">alpha</code></td>
<td>
<p>density function parameter</p>
</td></tr>
<tr><td><code id="hazard_+3A_out">out</code></td>
<td>
<p>not used</p>
</td></tr>
<tr><td><code id="hazard_+3A_dist">dist</code></td>
<td>
<p>&quot;weibull&quot; or &quot;loglog&quot;</p>
</td></tr>
</table>

<hr>
<h2 id='loglog'>Regular Log-logistic regression</h2><span id='topic+loglog'></span>

<h3>Description</h3>

<p>Regular Log-logistic regression
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loglog(Y, X, inits = NULL, max.iter, silent = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loglog_+3A_y">Y</code></td>
<td>
<p>Dependent variables.</p>
</td></tr>
<tr><td><code id="loglog_+3A_x">X</code></td>
<td>
<p>Duration equation covariates.</p>
</td></tr>
<tr><td><code id="loglog_+3A_inits">inits</code></td>
<td>
<p>Vector of starting values.</p>
</td></tr>
<tr><td><code id="loglog_+3A_max.iter">max.iter</code></td>
<td>
<p>Maximum iterations to try.</p>
</td></tr>
<tr><td><code id="loglog_+3A_silent">silent</code></td>
<td>
<p>Suppress <code><a href="stats.html#topic+optim">optim</a></code> trace output?</p>
</td></tr>
</table>

<hr>
<h2 id='loglog_lnl'>Regular Log-logistic likelihood</h2><span id='topic+loglog_lnl'></span>

<h3>Description</h3>

<p>Regular Log-logistic likelihood
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loglog_lnl(theta, y, X)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loglog_lnl_+3A_theta">theta</code></td>
<td>
<p>Current parameter values.</p>
</td></tr>
<tr><td><code id="loglog_lnl_+3A_y">y</code></td>
<td>
<p>Dependent variables.</p>
</td></tr>
<tr><td><code id="loglog_lnl_+3A_x">X</code></td>
<td>
<p>Duration equation covariates.</p>
</td></tr>
</table>

<hr>
<h2 id='model.coups'>Model of global coups from 1979 to 2010</h2><span id='topic+model.coups'></span>

<h3>Description</h3>

<p>This is a model object for a split-duration model of the 
Powell &amp; Thyne coups. It is used in several example code sections to speed
up package testing by eliminating the need to re-estimate a model each time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model.coups
</code></pre>


<h3>Format</h3>

<p>An object of class <code>spdur</code>.
</p>


<h3>Source</h3>

<p>For information on the data used in this model, see the data documentation,
<code><a href="#topic+coups">coups</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(model.coups)
str(model.coups)
</code></pre>

<hr>
<h2 id='panel_lag'>Lag panel data</h2><span id='topic+panel_lag'></span>

<h3>Description</h3>

<p>A function that correctly lags panel data where units are identified by 
<code>id</code> and time periods are identified with <code>t</code>. Results are in same 
order as <code>data</code> and are padded with <code>NA</code> as needed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>panel_lag(x, id, t, lag = 1, data = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="panel_lag_+3A_x">x</code></td>
<td>
<p>String identifying the vectors to be lagged in <code>data</code>.</p>
</td></tr>
<tr><td><code id="panel_lag_+3A_id">id</code></td>
<td>
<p>String identifying the unit (e.g. country) identifier in 
<code>data</code>.</p>
</td></tr>
<tr><td><code id="panel_lag_+3A_t">t</code></td>
<td>
<p>String identifying the time identifier in <code>data</code>.</p>
</td></tr>
<tr><td><code id="panel_lag_+3A_lag">lag</code></td>
<td>
<p>Lag order, i.e. by how many time periods should <code>x</code> be 
lagged? Unlike the default <code><a href="stats.html#topic+lag">lag</a></code>, positive values indicate
that past data is used for the current time period.</p>
</td></tr>
<tr><td><code id="panel_lag_+3A_data">data</code></td>
<td>
<p>A data frame. If not provided, a new one will be constructed
with the vectors supplied for the other parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of same length as <code>x</code> representing lagged values with 
leading <code>NA</code>'s.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(coups)
# No need to order before using panelLag, just do it here so we can compare results below.
coups &lt;- coups[order(coups$gwcode, coups$year), ]
test &lt;- panel_lag("polity2", "gwcode", "year", data=coups)

# Compare output
head(coups$polity2)
head(test)

</code></pre>

<hr>
<h2 id='plot_hazard'>Plot hazard function</h2><span id='topic+plot_hazard'></span>

<h3>Description</h3>

<p><code>plot_hazard</code> plots the shape of estimated hazard function in respect 
to duration, given a set of values for the duration and risk equations 
covariates. Confidence intervals are provided through simulation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_hazard(x, t = NULL, ci = TRUE, n = 1000, xvals = NULL, zvals = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_hazard_+3A_x">x</code></td>
<td>
<p>An object of class <code>spdur</code></p>
</td></tr>
<tr><td><code id="plot_hazard_+3A_t">t</code></td>
<td>
<p>Time values at which to evaluate hazard function, e.g. <code>c(1:50)</code>.
Defaults to 1 through 1.2 * maximum duration value in data.</p>
</td></tr>
<tr><td><code id="plot_hazard_+3A_ci">ci</code></td>
<td>
<p>Compute simulation-based confidence interval?</p>
</td></tr>
<tr><td><code id="plot_hazard_+3A_n">n</code></td>
<td>
<p>Number of simulations to use for CI, defaults to 1,000.</p>
</td></tr>
<tr><td><code id="plot_hazard_+3A_xvals">xvals</code></td>
<td>
<p>A vector of values for the duration equation variables, in the 
same order as the duration equation in <code>x</code>. Defaults to means.</p>
</td></tr>
<tr><td><code id="plot_hazard_+3A_zvals">zvals</code></td>
<td>
<p>A vector of values for the risk equation variables, in the same
order as the risk equation in <code>x</code>. Defaults to means.</p>
</td></tr>
<tr><td><code id="plot_hazard_+3A_...">...</code></td>
<td>
<p>Additional parameters passed to <code><a href="graphics.html#topic+plot">plot</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+sepplot">sepplot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get model estimates
data(model.coups)

# Plot
plot_hazard(model.coups, ci = FALSE)
plot_hazard(model.coups, ci = TRUE)

</code></pre>

<hr>
<h2 id='plot_hazard1'>Plot conditional hazard rate</h2><span id='topic+plot_hazard1'></span>

<h3>Description</h3>

<p>Plot hazard function without simulated confidence intervals. See
<code><a href="#topic+plot_hazard">plot_hazard</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_hazard1(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_hazard1_+3A_x">x</code></td>
<td>
<p>class &quot;spdur&quot; object</p>
</td></tr>
<tr><td><code id="plot_hazard1_+3A_...">...</code></td>
<td>
<p>passed to <code>plot_hazard</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>NULL, plots.
</p>

<hr>
<h2 id='plot_hazard2'>Simulate and plot hazard function</h2><span id='topic+plot_hazard2'></span>

<h3>Description</h3>

<p>Plot hazard function with simulated confidence intervals. See
<code><a href="#topic+plot_hazard">plot_hazard</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_hazard2(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_hazard2_+3A_x">x</code></td>
<td>
<p>class &quot;spdur&quot; object</p>
</td></tr>
<tr><td><code id="plot_hazard2_+3A_...">...</code></td>
<td>
<p>passed to <code>plot_hazard</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>NULL, plots.
</p>

<hr>
<h2 id='plot.spdur'>Plot split-duration model results.</h2><span id='topic+plot.spdur'></span>

<h3>Description</h3>

<p>Plot results from a spduration model. Two types are currently implemented:
a separation plot for evaluating model predictions (&quot;sepplot&quot;), and a plot of 
the conditional hazard rate (&quot;hazard&quot;), with or without simulation-based
confidence intervals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'spdur'
plot(x, type = "sepplot", ci = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.spdur_+3A_x">x</code></td>
<td>
<p>An object of class &quot;<code>spdur</code>&quot;.</p>
</td></tr>
<tr><td><code id="plot.spdur_+3A_type">type</code></td>
<td>
<p>What kind of plot? &quot;sepplot&quot; or &quot;hazard&quot;.</p>
</td></tr>
<tr><td><code id="plot.spdur_+3A_ci">ci</code></td>
<td>
<p>For plots of the hazard rate, should a confidence interval be included?</p>
</td></tr>
<tr><td><code id="plot.spdur_+3A_...">...</code></td>
<td>
<p>Optional parameters passed to <code><a href="#topic+sepplot">sepplot</a></code>
or <code><a href="#topic+plot_hazard">plot_hazard</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+sepplot">sepplot</a></code>, <code><a href="#topic+plot_hazard">plot_hazard</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># get model estimates
data(model.coups)

# plot
plot(model.coups, type = "hazard")

plot(model.coups)

</code></pre>

<hr>
<h2 id='predict.spdur'>Predict methods for spdur Objects</h2><span id='topic+predict.spdur'></span><span id='topic+fitted.spdur'></span><span id='topic+residuals.spdur'></span>

<h3>Description</h3>

<p><code>predict</code> and related methods for class &ldquo;<code>spdur</code>&rdquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'spdur'
predict(
  object,
  newdata = NULL,
  type = "response",
  truncate = TRUE,
  na.action = na.exclude,
  ...
)

## S3 method for class 'spdur'
fitted(object, ...)

## S3 method for class 'spdur'
residuals(object, type = c("response"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.spdur_+3A_object">object</code></td>
<td>
<p>Object of class &ldquo;<code>spdur</code>&rdquo;.</p>
</td></tr>
<tr><td><code id="predict.spdur_+3A_newdata">newdata</code></td>
<td>
<p>Optional data for which to calculate fitted values, defaults to 
training data.</p>
</td></tr>
<tr><td><code id="predict.spdur_+3A_type">type</code></td>
<td>
<p>Quantity of interest to calculate. Default conditional hazard, 
i.e. conditioned on observed survival up to time <code>t</code>. 
See below for list of values. For <code>residuals</code>, the type of residual to 
calculate</p>
</td></tr>
<tr><td><code id="predict.spdur_+3A_truncate">truncate</code></td>
<td>
<p>For conditional hazard, truncate values greater than 1.</p>
</td></tr>
<tr><td><code id="predict.spdur_+3A_na.action">na.action</code></td>
<td>
<p>Function determining what should be done with missing values 
in newdata. The default is to predict NA (<code>na.exclude</code>).</p>
</td></tr>
<tr><td><code id="predict.spdur_+3A_...">...</code></td>
<td>
<p>not used, for compatibility with generic function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculates various types of probabilities, where &ldquo;conditional&rdquo; is used in 
reference to conditioning on the observed survival time of a spell up to 
time <code class="reqn">t</code>, in addition to conditioning on any variables included in the 
model (which is always done). Valid values for the <code>type</code> option 
include:
</p>

<ul>
<li><p> &ldquo;conditional risk&rdquo;: <code class="reqn">Pr(Cure=0|Z\gamma, T&gt;t)</code>
</p>
</li>
<li><p> &ldquo;conditional cure&rdquo;: <code class="reqn">Pr(Cure=1|Z\gamma, T&gt;t)</code>
</p>
</li>
<li><p> &ldquo;hazard&rdquo;: <code class="reqn">Pr(T=t|T&gt;t, C=0, X\beta) * Pr(Cure=0|Z\gamma)</code>
</p>
</li>
<li><p> &ldquo;failure&rdquo;: <code class="reqn">Pr(T=t|T&gt;t-1, C=0, X\beta) * Pr(Cure=0|Z\gamma)</code>
</p>
</li>
<li><p> &ldquo;unconditional risk&rdquo;: <code class="reqn">Pr(Cure=0|Z\gamma)</code>
</p>
</li>
<li><p> &ldquo;unconditional cure&rdquo;: <code class="reqn">Pr(Cure=1|Z\gamma)</code>
</p>
</li>
<li><p> &ldquo;conditional hazard&rdquo; or &ldquo;response&rdquo;: <code class="reqn">Pr(T=t|T&gt;t, C=0, X\beta) * Pr(Cure=0|Z\gamma, T&gt;t)</code>
</p>
</li>
<li><p> &ldquo;conditional failure&rdquo;: <code class="reqn">Pr(T=t|T&gt;t-1, C=0, X\beta) * Pr(Cure=0|Z\gamma, T&gt;t)</code>
</p>
</li></ul>

<p>The vector <code class="reqn">Z\gamma</code> indicates the cure/at risk equation 
covariate vector, while <code class="reqn">X\beta</code> indicates the duration equation 
covariate vector.
</p>


<h3>Value</h3>

<p>Returns a data frame with 1 column corresponding to <code>type</code>, in the same 
order as the data frame used to estimate <code>object</code>.
</p>


<h3>Note</h3>

<p>See <code><a href="#topic+forecast.spdur">forecast.spdur</a></code> for producing forecasts when future 
covariate values are unknown.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># get model estimates
data(model.coups)
ch &lt;- predict(model.coups)

head(fitted(model.coups))

head(residuals(model.coups))

</code></pre>

<hr>
<h2 id='print.summary.spdur'>Print a split-population duration model results summary</h2><span id='topic+print.summary.spdur'></span>

<h3>Description</h3>

<p><code>print</code> method for class &ldquo;<code>summary.spdur</code>&rdquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'summary.spdur'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.summary.spdur_+3A_x">x</code></td>
<td>
<p>An object with class <code>spdur</code>.</p>
</td></tr>
<tr><td><code id="print.summary.spdur_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Formats <code>spdur</code> summaries for printing.
</p>


<h3>See Also</h3>

<p>The model fitting function is <code><a href="#topic+spdur">spdur</a></code>, and see 
<code><a href="#topic+summary.spdur">summary.spdur</a></code> for associated summary method.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(model.coups)
s &lt;- summary(model.coups)
class(s)
print(s)

</code></pre>

<hr>
<h2 id='sepplot'>Generate a Separation Plot</h2><span id='topic+sepplot'></span>

<h3>Description</h3>

<p>A <code><a href="separationplot.html#topic+separationplot">separationplot</a></code> wrapper for class 
&ldquo;<code>spdur</code>&rdquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sepplot(
  x,
  pred_type = "conditional hazard",
  obs = NULL,
  endSpellOnly = FALSE,
  lwd1 = 5,
  lwd2 = 2,
  shuffle = TRUE,
  heading = "",
  show.expected = TRUE,
  newplot = FALSE,
  type = "line",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sepplot_+3A_x">x</code></td>
<td>
<p>An object of class &quot;<code>spdur</code>&quot;.</p>
</td></tr>
<tr><td><code id="sepplot_+3A_pred_type">pred_type</code></td>
<td>
<p>Which statistic to plot, i.e. &quot;conditional hazard&quot; or 
&quot;conditional risk&quot;.</p>
</td></tr>
<tr><td><code id="sepplot_+3A_obs">obs</code></td>
<td>
<p>Variable that captures observed outcomes. If <code>NULL</code> (default), 
it is chosen based on <code>pred_type</code>: &quot;fail&quot; for (conditional) hazard, and 
&quot;atrisk&quot; for (conditional) risk.</p>
</td></tr>
<tr><td><code id="sepplot_+3A_endspellonly">endSpellOnly</code></td>
<td>
<p>Should only the last observation in each spell be kept? 
<code>FALSE</code> by default.</p>
</td></tr>
<tr><td><code id="sepplot_+3A_lwd1">lwd1</code></td>
<td>
<p>See <code><a href="separationplot.html#topic+separationplot">separationplot</a></code>.</p>
</td></tr>
<tr><td><code id="sepplot_+3A_lwd2">lwd2</code></td>
<td>
<p>See <code><a href="separationplot.html#topic+separationplot">separationplot</a></code>.</p>
</td></tr>
<tr><td><code id="sepplot_+3A_shuffle">shuffle</code></td>
<td>
<p>See <code><a href="separationplot.html#topic+separationplot">separationplot</a></code>.</p>
</td></tr>
<tr><td><code id="sepplot_+3A_heading">heading</code></td>
<td>
<p>See <code><a href="separationplot.html#topic+separationplot">separationplot</a></code>.</p>
</td></tr>
<tr><td><code id="sepplot_+3A_show.expected">show.expected</code></td>
<td>
<p>See <code><a href="separationplot.html#topic+separationplot">separationplot</a></code>.</p>
</td></tr>
<tr><td><code id="sepplot_+3A_newplot">newplot</code></td>
<td>
<p>See <code><a href="separationplot.html#topic+separationplot">separationplot</a></code></p>
</td></tr>
<tr><td><code id="sepplot_+3A_type">type</code></td>
<td>
<p>See <code><a href="separationplot.html#topic+separationplot">separationplot</a></code>.</p>
</td></tr>
<tr><td><code id="sepplot_+3A_...">...</code></td>
<td>
<p>Optional parameters passed to <code><a href="separationplot.html#topic+separationplot">separationplot</a></code>, 
e.g. type of statistic to calculate.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Creates a separation plot of fitted values from 
split-duration model results using <code><a href="#topic+predict.spdur">predict.spdur</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="separationplot.html#topic+separationplot">separationplot</a></code>, <code><a href="#topic+predict.spdur">predict.spdur</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># get model estimates
library(separationplot)
data(model.coups)

# plot
p &lt;- plot(model.coups)
p

</code></pre>

<hr>
<h2 id='spdur'>Split-population duration (cure) regression</h2><span id='topic+spdur'></span>

<h3>Description</h3>

<p>This function estimates a split-population duration model and returns a 
object of class <code>spdur</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spdur(
  duration,
  atrisk,
  data = NULL,
  last = "end.spell",
  t.0 = "t.0",
  fail = "failure",
  distr = c("weibull", "loglog"),
  max.iter = 300,
  na.action,
  silent = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spdur_+3A_duration">duration</code></td>
<td>
<p>A formula of the form Y ~ X1 + X2 ..., where Y is duration 
until failure or censoring.</p>
</td></tr>
<tr><td><code id="spdur_+3A_atrisk">atrisk</code></td>
<td>
<p>A formula of the form C ~ Z1 + Z2 ..., where C is a binary 
indicator of risk (1 - cure).</p>
</td></tr>
<tr><td><code id="spdur_+3A_data">data</code></td>
<td>
<p>A data frame containing the variables in formula and formula2.</p>
</td></tr>
<tr><td><code id="spdur_+3A_last">last</code></td>
<td>
<p>A string identifying the vector in <code>data</code> that indicates 
when a spell ends due to failure or right-censoring.</p>
</td></tr>
<tr><td><code id="spdur_+3A_t.0">t.0</code></td>
<td>
<p>The starting point for time-varying covariate intervals, by 
default <code>duration-1</code> when using <code><a href="#topic+add_duration">add_duration</a></code>.</p>
</td></tr>
<tr><td><code id="spdur_+3A_fail">fail</code></td>
<td>
<p>Name of the variable indicating that a spell ended in failure.</p>
</td></tr>
<tr><td><code id="spdur_+3A_distr">distr</code></td>
<td>
<p>The type of distribution to use in the hazard rate. Valid 
options are &ldquo;weibull&rdquo; or &ldquo;loglog&rdquo;; defaults to &ldquo;weibull&rdquo;.</p>
</td></tr>
<tr><td><code id="spdur_+3A_max.iter">max.iter</code></td>
<td>
<p>Maximum number of iterations to use in the likelihood 
maximization.</p>
</td></tr>
<tr><td><code id="spdur_+3A_na.action">na.action</code></td>
<td>
<p>a function which indicates what should happen when the data 
contain NAs. The default is set by the <code>na.action</code> setting of options, 
and is <code><a href="stats.html#topic+na.fail">na.fail</a></code> if that is unset.</p>
</td></tr>
<tr><td><code id="spdur_+3A_silent">silent</code></td>
<td>
<p>Suppress optimization output, <code>FALSE</code> by default.</p>
</td></tr>
<tr><td><code id="spdur_+3A_...">...</code></td>
<td>
<p>Optional arguments, see details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code><a href="#topic+summary.spdur">summary.spdur</a></code>, <code><a href="#topic+predict.spdur">predict.spdur</a></code> ,
and <code><a href="#topic+plot.spdur">plot.spdur</a></code> for post-estimation options.
</p>
<p>Optional arguments:
</p>

<dl>
<dt>base.inits</dt><dd><p>Initial values for the base duration model that is 
estimated to get initial values for the full split-population model. This
needs to be a vector with starting values for the constant, coefficients
in the duration equation, and an additional value for the shape parameter
of the density used, e.g. Weibull. By default they are 0 for all 
coefficients and 0 or 1 for the Weibull and LogLog shape parameters 
respectively.</p>
</dd>
</dl>



<h3>Value</h3>

<p>Returns an object of class <code>spdur</code>, with attributes:
</p>
<table>
<tr><td><code>coefficients</code></td>
<td>
<p>A named vector of coefficient point estimates.</p>
</td></tr>
<tr><td><code>vcv</code></td>
<td>
<p>Estimated covariance matrix.</p>
</td></tr>
<tr><td><code>se</code></td>
<td>
<p>Standard error estimates.</p>
</td></tr>
<tr><td><code>zstat</code></td>
<td>
<p>Z-statistic values.</p>
</td></tr>
<tr><td><code>pval</code></td>
<td>
<p>P-values.</p>
</td></tr>
<tr><td><code>mf.dur</code></td>
<td>
<p>Model frame for the duration equation.</p>
</td></tr>
<tr><td><code>mf.risk</code></td>
<td>
<p>Model frame for the risk equation.</p>
</td></tr>
<tr><td><code>Y</code></td>
<td>
<p>Matrix of duration variables: risk, duration, end of spell, and
t.0.</p>
</td></tr>
<tr><td><code>na.action</code></td>
<td>
<p>What action was taken for missing values in <code>data</code>.</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>The original, unevaluated <code>spdur</code> call.</p>
</td></tr>
<tr><td><code>distr</code></td>
<td>
<p>Distribution used for the hazard rate.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Prepare data
data(coups)
dur.coups &lt;- add_duration(coups, "succ.coup", unitID="gwcode", tID="year",
                           freq="year")

# Estimate model
model.coups &lt;- spdur(duration ~ polity2, atrisk ~ polity2, data=dur.coups)
model.coups &lt;- spdur(duration ~ polity2, atrisk ~ polity2, data=dur.coups,
                     distr="loglog")

</code></pre>

<hr>
<h2 id='spduration'>Split-Population Duration (Cure) Regression Models</h2><span id='topic+spduration-package'></span><span id='topic+spduration'></span>

<h3>Description</h3>

<p>The spduration package provides functions to estimate 
split-population duration regression models in which only a subset of the 
population is at risk for failure, while the remainder is immune, or 
cured, from the possibility of experiencing a failure event. In practice, 
this class of models also may produce better performance in sparse data 
with few actual failure events.
</p>


<h3>Details</h3>

<p>The main function <code><a href="#topic+spdur">spdur</a></code> is used to estimate the model 
objects with class <code>spdur</code>.
</p>
<p>Postestimation tools include <code><a href="#topic+predict.spdur">predict.spdur</a></code>, for calculating 
fitted values with arbitrary data and for several probabilities that 
might be of interest, as well as <code><a href="#topic+plot.spdur">plot.spdur</a></code> for visual 
display of model fit.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Andreas Beger <a href="mailto:adbeger@gmail.com">adbeger@gmail.com</a> (<a href="https://orcid.org/0000-0003-1883-3169">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Daina Chiba <a href="mailto:dchiba@essex.ac.uk">dchiba@essex.ac.uk</a> (<a href="https://orcid.org/0000-0002-9208-4373">ORCID</a>)
</p>
</li>
<li><p> Daniel W. Hill, Jr. <a href="mailto:dwhill@uga.edu">dwhill@uga.edu</a>
</p>
</li>
<li><p> Nils W. Metternich <a href="mailto:n.metternich@ucl.ac.uk">n.metternich@ucl.ac.uk</a> (<a href="https://orcid.org/0000-0001-8757-0409">ORCID</a>)
</p>
</li>
<li><p> Shahryar Minhas <a href="mailto:hermes829@gmail.com">hermes829@gmail.com</a>
</p>
</li>
<li><p> Michael D. Ward <a href="mailto:michael.don.ward@gmail.com">michael.don.ward@gmail.com</a> (<a href="https://orcid.org/0000-0002-6561-6186">ORCID</a>) [copyright holder]
</p>
</li></ul>



<h3>References</h3>

<p>Boag, J.W. 1949. &ldquo;Maximum Likelihood Estimates of the Proportion of 
Patients Cured by Cancer Therapy.&rdquo; &lt;https://www.jstor.org/stable/2983694&gt;
</p>
<p>Berkson, J. and Gage, R.P. &ldquo;Survival Curve for Cancer Patients Following 
Treatment.&rdquo; &lt;https://www.jstor.org/stable/2281318&gt;
</p>
<p>Leisch, Friedrich. 2009. &ldquo;Creating R Packages: A Tutorial.&rdquo;
</p>
<p>Schmidt, Peter and Witte, Ann Dryden. 1989. &ldquo;Predicting Criminal 
Recidivism Using &quot;Split Population&quot; Survival Time Models.&rdquo; 
&lt;doi:10.1016/0304-4076(89)90034-1&gt;    
</p>
<p>Svolik, Milan. 2008. &ldquo;Authoritarian Reversals and Democratic 
Consolidation.&rdquo; American Political Science Review.
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/andybega/spduration">https://github.com/andybega/spduration</a>
</p>
</li>
<li> <p><a href="https://www.andybeger.com/spduration/">https://www.andybeger.com/spduration/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/andybega/spduration/issues">https://github.com/andybega/spduration/issues</a>
</p>
</li></ul>


<hr>
<h2 id='sploglog'>Split-population Log-logistic regression</h2><span id='topic+sploglog'></span>

<h3>Description</h3>

<p>Split-population Log-logistic regression
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sploglog(Y, X, Z, max.iter, silent = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sploglog_+3A_y">Y</code></td>
<td>
<p>Dependent variables.</p>
</td></tr>
<tr><td><code id="sploglog_+3A_x">X</code></td>
<td>
<p>Duration equation covariates.</p>
</td></tr>
<tr><td><code id="sploglog_+3A_z">Z</code></td>
<td>
<p>Risk equation covariates.</p>
</td></tr>
<tr><td><code id="sploglog_+3A_max.iter">max.iter</code></td>
<td>
<p>Maximum iterations to try.</p>
</td></tr>
<tr><td><code id="sploglog_+3A_silent">silent</code></td>
<td>
<p>Suppress <code><a href="stats.html#topic+optim">optim</a></code> trace output?</p>
</td></tr>
</table>

<hr>
<h2 id='sploglog_lnl'>Split-population Log-logistic log likelihood</h2><span id='topic+sploglog_lnl'></span>

<h3>Description</h3>

<p>Split-population Log-logistic log likelihood
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sploglog_lnl(theta, y, X, Z)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sploglog_lnl_+3A_theta">theta</code></td>
<td>
<p>Current parameter values.</p>
</td></tr>
<tr><td><code id="sploglog_lnl_+3A_y">y</code></td>
<td>
<p>Dependent variables.</p>
</td></tr>
<tr><td><code id="sploglog_lnl_+3A_x">X</code></td>
<td>
<p>Duration equation covariates.</p>
</td></tr>
<tr><td><code id="sploglog_lnl_+3A_z">Z</code></td>
<td>
<p>Risk equation covariates.</p>
</td></tr>
</table>

<hr>
<h2 id='spweib_lnl'>Split-population Weibull log likelihood</h2><span id='topic+spweib_lnl'></span>

<h3>Description</h3>

<p>Split-population Weibull log likelihood
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spweib_lnl(theta, y, X, Z)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spweib_lnl_+3A_theta">theta</code></td>
<td>
<p>Current parameter values.</p>
</td></tr>
<tr><td><code id="spweib_lnl_+3A_y">y</code></td>
<td>
<p>Dependent variables.</p>
</td></tr>
<tr><td><code id="spweib_lnl_+3A_x">X</code></td>
<td>
<p>Duration equation covariates.</p>
</td></tr>
<tr><td><code id="spweib_lnl_+3A_z">Z</code></td>
<td>
<p>Risk equation covariates.</p>
</td></tr>
</table>

<hr>
<h2 id='spweibull'>Split-population Weibull regression</h2><span id='topic+spweibull'></span>

<h3>Description</h3>

<p>Split-population Weibull regression
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spweibull(Y, X, Z, max.iter, silent = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spweibull_+3A_y">Y</code></td>
<td>
<p>Dependent variables.</p>
</td></tr>
<tr><td><code id="spweibull_+3A_x">X</code></td>
<td>
<p>Duration equation covariates.</p>
</td></tr>
<tr><td><code id="spweibull_+3A_z">Z</code></td>
<td>
<p>Risk equation covariates.</p>
</td></tr>
<tr><td><code id="spweibull_+3A_max.iter">max.iter</code></td>
<td>
<p>Maximum iterations to try.</p>
</td></tr>
<tr><td><code id="spweibull_+3A_silent">silent</code></td>
<td>
<p>Suppress <code><a href="stats.html#topic+optim">optim</a></code> trace output?</p>
</td></tr>
</table>

<hr>
<h2 id='summary.spdur'>Summarize split-population duration results</h2><span id='topic+summary.spdur'></span>

<h3>Description</h3>

<p><code>summary</code> method for class &ldquo;<code>spdur</code>&rdquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'spdur'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.spdur_+3A_object">object</code></td>
<td>
<p>An object with class <code>spdur</code>.</p>
</td></tr>
<tr><td><code id="summary.spdur_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This will list the estimated coefficients and standard errors for the
risk and duration equations of a split-population duration model.
</p>


<h3>Value</h3>

<p>An object with class <code>summary.spdur</code>.
</p>


<h3>See Also</h3>

<p>The model fitting function is <code><a href="#topic+spdur">spdur</a></code>, and see 
<code><a href="base.html#topic+summary">summary</a></code> for the generic function.
</p>
<p>For print formatting, see <code><a href="#topic+print.summary.spdur">print.summary.spdur</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(model.coups)
s &lt;- summary(model.coups)
class(s)
print(s)

</code></pre>

<hr>
<h2 id='weib_lnl'>Regular weibull log likelihood</h2><span id='topic+weib_lnl'></span>

<h3>Description</h3>

<p>Regular weibull log likelihood
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weib_lnl(theta, y, X)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="weib_lnl_+3A_theta">theta</code></td>
<td>
<p>Current parameter values.</p>
</td></tr>
<tr><td><code id="weib_lnl_+3A_y">y</code></td>
<td>
<p>Dependent variables.</p>
</td></tr>
<tr><td><code id="weib_lnl_+3A_x">X</code></td>
<td>
<p>Duration equation covariates.</p>
</td></tr>
</table>

<hr>
<h2 id='weibull'>Regular Weibull regression</h2><span id='topic+weibull'></span>

<h3>Description</h3>

<p>Regular Weibull regression
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weibull(Y, X, inits = NULL, max.iter, silent = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="weibull_+3A_y">Y</code></td>
<td>
<p>Dependent variables.</p>
</td></tr>
<tr><td><code id="weibull_+3A_x">X</code></td>
<td>
<p>Duration equation covariates.</p>
</td></tr>
<tr><td><code id="weibull_+3A_inits">inits</code></td>
<td>
<p>Vector of starting values.</p>
</td></tr>
<tr><td><code id="weibull_+3A_max.iter">max.iter</code></td>
<td>
<p>Maximum iterations to try.</p>
</td></tr>
<tr><td><code id="weibull_+3A_silent">silent</code></td>
<td>
<p>Suppress <code><a href="stats.html#topic+optim">optim</a></code> trace output?</p>
</td></tr>
</table>

<hr>
<h2 id='xtable.spdur'>Create export table for a split-duration model</h2><span id='topic+xtable.spdur'></span>

<h3>Description</h3>

<p><code>xtable</code>-like function for class &ldquo;<code>spdur</code>&rdquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'spdur'
xtable(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xtable.spdur_+3A_x">x</code></td>
<td>
<p>An object with class <code>spdur</code>.</p>
</td></tr>
<tr><td><code id="xtable.spdur_+3A_...">...</code></td>
<td>
<p>Further arguments passed to <code><a href="xtable.html#topic+xtable">xtable</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Format a split-duration model for export to Latex or html.
</p>


<h3>Value</h3>

<p>An object with class <code>xtable</code>.
</p>


<h3>See Also</h3>

<p><code><a href="xtable.html#topic+xtable">xtable</a></code>, or <code><a href="#topic+as.data.frame.spdur">as.data.frame.spdur</a></code> for a
simpler alternative that will convert a <code>spdur</code> object to a data frame
containing model parameter estimates.
</p>
<p>For print formatting, see <code><a href="xtable.html#topic+print.xtable">print.xtable</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(xtable)
data(model.coups)
xtable(model.coups)
print(xtable(model.coups), include.rownames=FALSE)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
