<!DOCTYPE html><html><head><title>Help for package svgtools</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {svgtools}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#changeText'><p>Change text of text elements</p></a></li>
<li><a href='#diffBar'><p>Adjust bar chart where bars lie to the left/right or bottom/top of a given nullvalue</p></a></li>
<li><a href='#display_svg'><p>Display SVG on standard graphic display port</p></a></li>
<li><a href='#linesSymbols'><p>Adjust line and/or symbol charts</p></a></li>
<li><a href='#percentileBar'><p>Adjust (stacked) bar chart representing percentiles</p></a></li>
<li><a href='#read_svg'><p>Read SVG file and return XML document</p></a></li>
<li><a href='#referenceBar'><p>Adjust (stacked) bar chart that is aligned around a reference category</p></a></li>
<li><a href='#scatterSymbols'><p>Adjust symbols of a scatter plot</p></a></li>
<li><a href='#stackedBar'><p>Adjust (stacked) bar chart to values on a given scale</p></a></li>
<li><a href='#summary_svg'><p>Print summary of SVG file structure in console</p></a></li>
<li><a href='#write_svg'><p>Writes SVG to file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Manipulate SVG (Template) Files of Charts</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-12-14</td>
</tr>
<tr>
<td>Description:</td>
<td>The purpose of this package is to manipulate SVG files that are templates of charts the user wants to produce. 
    In vector graphics one copes with x-/y-coordinates of elements (e.g. lines, rectangles, text). Their scale is often dependent on the program that is used to produce the graphics. 
    In applied statistics one usually has numeric values on a fixed scale (e.g. percentage values between 0 and 100) to show in a chart. 
    Basically, 'svgtools' transforms the statistical values into coordinates and widths/heights of the vector graphics.
    This is done by stackedBar() for bar charts, by linesSymbols() for charts with lines and/or symbols (dot markers) and scatterSymbols() for scatterplots.</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>xml2 (&ge; 1.3.0), stringr (&ge; 1.4.0), rsvg (&ge; 2.1), magick (&ge;
2.4.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, bezier</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-12-14 06:33:42 UTC; k.oberwimmer</td>
</tr>
<tr>
<td>Author:</td>
<td>Konrad Oberwimmer [aut, cre],
  Christian Wimmer [aut],
  Michael Bruneforth [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Konrad Oberwimmer &lt;konrad.oberwimmer@iqs.gv.at&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-12-14 14:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='changeText'>Change text of text elements</h2><span id='topic+changeText'></span>

<h3>Description</h3>

<p>Changes the text entry of XML element of type 'text'. The XML element may be found by its name (XML attribute 'id') or based on its current text entry.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>changeText(
  svg,
  element_name,
  text,
  alignment = NULL,
  in_group = NULL,
  hide_blank = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="changeText_+3A_svg">svg</code></td>
<td>
<p>XML document with SVG content</p>
</td></tr>
<tr><td><code id="changeText_+3A_element_name">element_name</code></td>
<td>
<p>Name (attribute 'id') of text (XML element 'text') or current text entry of text (XML element 'text').</p>
</td></tr>
<tr><td><code id="changeText_+3A_text">text</code></td>
<td>
<p>New text entry.</p>
</td></tr>
<tr><td><code id="changeText_+3A_alignment">alignment</code></td>
<td>
<p>Character value for text alignment. Accepts 'start', 'middle', and 'end' (default NULL = no change).</p>
</td></tr>
<tr><td><code id="changeText_+3A_in_group">in_group</code></td>
<td>
<p>Name (attribute 'id') of group (XML element 'g') that contains the text element (default NULL = no group, search the entire SVG).</p>
</td></tr>
<tr><td><code id="changeText_+3A_hide_blank">hide_blank</code></td>
<td>
<p>Should text elements with empty strings be hidden (set attribute 'display' to 'none')? (default FALSE)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>XML document with SVG content
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#read SVG file
fpath &lt;- system.file("extdata", "fig1.svg", package="svgtools")
svg &lt;- read_svg(file = fpath)

#change a text
svg &lt;- changeText(svg = svg, element_name = "Category A", text = "low")
svg &lt;- changeText(svg = svg, element_name = "Category B", text = "medium")
svg &lt;- changeText(svg = svg, element_name = "Category C", text = "high")
</code></pre>

<hr>
<h2 id='diffBar'>Adjust bar chart where bars lie to the left/right or bottom/top of a given nullvalue</h2><span id='topic+diffBar'></span>

<h3>Description</h3>

<p>Adjusts the horizontal (XML attribute 'x') or vertical (XML attribute 'y') position as well as width/height of bar segments (XML elements of type 'rect') and optionally value labels (XML elements of type 'text'). Positions are calculated relative to a given frame (XML element of type 'rect'), a nullvalue and the position of a data value within the minimum and maximum of a given scale. Bar segments and, optionally, value labels with values lower than the nullvalue are positioned to the left (in horizontal alignment) or to the bottom (in vertical alignment) of the scaled nullvalue, higher values on the opposite side.<br />
For further description see <code><a href="#topic+stackedBar">stackedBar</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diffBar(
  svg,
  frame_name,
  group_name,
  scale_real,
  values,
  nullvalue = 0,
  alignment = "horizontal",
  has_labels = TRUE,
  label_position = "center",
  decimals = 0,
  display_limits = c(0, 0)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="diffBar_+3A_svg">svg</code></td>
<td>
<p>XML document with SVG content</p>
</td></tr>
<tr><td><code id="diffBar_+3A_frame_name">frame_name</code></td>
<td>
<p>Name (attribute 'id') of frame (XML element 'rect') for positioning bar segments (and value labels).</p>
</td></tr>
<tr><td><code id="diffBar_+3A_group_name">group_name</code></td>
<td>
<p>Name (attribute 'id') of group (XML element 'g') containing either bar segments (and value labels) or further groups, containing bar segments (and value labels) themselves.</p>
</td></tr>
<tr><td><code id="diffBar_+3A_scale_real">scale_real</code></td>
<td>
<p>Numeric vector (e.g. <code>c(0,100)</code>) of arbitrary length. Only minimum and maximum are used for scaling of values.</p>
</td></tr>
<tr><td><code id="diffBar_+3A_values">values</code></td>
<td>
<p>Either a numeric vector, a numeric matrix or a dataframe with only numeric columns.<br />
If a vector is given, it corresponds to one bar (group of bar segments and, optionally, value labels).<br />
If a matrix or dataframe is given, rows define the value set for several (stacked) bars grouped together.</p>
</td></tr>
<tr><td><code id="diffBar_+3A_nullvalue">nullvalue</code></td>
<td>
<p>Value that defines the &quot;center&quot; of the bar segments (for left/right or bottom/top positioning)</p>
</td></tr>
<tr><td><code id="diffBar_+3A_alignment">alignment</code></td>
<td>
<p>Character value. Accepts 'horizontal' (default) or 'vertical'. See details.</p>
</td></tr>
<tr><td><code id="diffBar_+3A_has_labels">has_labels</code></td>
<td>
<p>Are there value labels (of XML type 'text') to adjust? (default TRUE)</p>
</td></tr>
<tr><td><code id="diffBar_+3A_label_position">label_position</code></td>
<td>
<p>Character value. Accepts 'start', 'center' (default) and 'end'. This refers to the underlying bar segments.</p>
</td></tr>
<tr><td><code id="diffBar_+3A_decimals">decimals</code></td>
<td>
<p>Integer value defining the number of decimal digits of value labels (default 0).</p>
</td></tr>
<tr><td><code id="diffBar_+3A_display_limits">display_limits</code></td>
<td>
<p>Interval for (small) values, that lead to suppression of the corresponding value labels. If only one value x is given, it is turned into the interval c(-x,x). (default 0 = no suppression)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code><a href="#topic+stackedBar">stackedBar</a></code>.
</p>


<h3>Value</h3>

<p>XML document with SVG content
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#read SVG file
fpath &lt;- system.file("extdata", "fig7.svg", package="svgtools")
svg &lt;- read_svg(file = fpath)

#adjust bars
df &lt;- data.frame(diff_negative = c(NA,NA,-0.7,NA,-0.33), 
                 diff_positive = c(0.4,0.55,NA,0.02,NA))
svg &lt;- diffBar(svg = svg, frame_name = "frame", group_name = "group", 
               scale_real = c(-1,1), values = df, nullvalue = 0, 
               label_position = "end", decimals = 1, display_limits = 0.1)
</code></pre>

<hr>
<h2 id='display_svg'>Display SVG on standard graphic display port</h2><span id='topic+display_svg'></span>

<h3>Description</h3>

<p>Display SVG on standard graphic display port
</p>


<h3>Usage</h3>

<pre><code class='language-R'>display_svg(svg, width = NULL, height = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="display_svg_+3A_svg">svg</code></td>
<td>
<p>XML document with SVG content.</p>
</td></tr>
<tr><td><code id="display_svg_+3A_width">width</code></td>
<td>
<p>Desired width (in px) of image (default NULL).</p>
</td></tr>
<tr><td><code id="display_svg_+3A_height">height</code></td>
<td>
<p>Desired height (in px) of image (default NULL).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Viewport depends on system and IDE. In RStudio the image is displayed under 'Viewer'.<br />
If neither width nor height are specified the image will have its size depending on DPI settings. If only one of these is specified, the other one is scaled accordingly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#read SVG file
fpath &lt;- system.file("extdata", "fig1.svg", package="svgtools")
svg &lt;- read_svg(file = fpath)

#display SVG file in standard viewport
display_svg(svg = svg, width = 500)
</code></pre>

<hr>
<h2 id='linesSymbols'>Adjust line and/or symbol charts</h2><span id='topic+linesSymbols'></span>

<h3>Description</h3>

<p>Adjusts the horizontal (XML attributes 'x', 'x1', 'x2', 'cx' etc.) or vertical (XML attributes 'y', 'y1', 'y2', 'cy' etc.) position of lines (XML elements of type 'line') and/or symbols (see details). Positions are calculated relative to a given frame (XML element of type 'rect') and the position of a data value within the minimum and maximum of a given scale. This process is called scaling.<br />
In preparation, it is necessary to name a group (set attribute 'id' of XML element of type 'g') of lines and/or symbols.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>linesSymbols(
  svg,
  frame_name,
  group_name,
  scale_real,
  values,
  alignment = "vertical",
  has_lines = TRUE,
  symbol_type = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="linesSymbols_+3A_svg">svg</code></td>
<td>
<p>XML document with SVG content</p>
</td></tr>
<tr><td><code id="linesSymbols_+3A_frame_name">frame_name</code></td>
<td>
<p>Name (attribute 'id') of frame (XML element 'rect') for positioning of elements.</p>
</td></tr>
<tr><td><code id="linesSymbols_+3A_group_name">group_name</code></td>
<td>
<p>Name (attribute 'id') of group (XML element 'g') with lines and/or symbols.</p>
</td></tr>
<tr><td><code id="linesSymbols_+3A_scale_real">scale_real</code></td>
<td>
<p>Numeric vector (e.g. <code>c(0,100)</code>) of arbitrary length. Only minimum and maximum are used for scaling of values.</p>
</td></tr>
<tr><td><code id="linesSymbols_+3A_values">values</code></td>
<td>
<p>Numeric vector. If a dataframe or matrix is provided, only the first row will be used.</p>
</td></tr>
<tr><td><code id="linesSymbols_+3A_alignment">alignment</code></td>
<td>
<p>Character value. Accepts 'horizontal' or 'vertical' (default). See details.</p>
</td></tr>
<tr><td><code id="linesSymbols_+3A_has_lines">has_lines</code></td>
<td>
<p>Are there lines? (default TRUE)</p>
</td></tr>
<tr><td><code id="linesSymbols_+3A_symbol_type">symbol_type</code></td>
<td>
<p>Character value. Accepts 'circle', 'rect', 'polygon', 'linegroup', 'path', or 'guess' for guessing of type; see details. (default NULL = no symbols)</p>
</td></tr>
<tr><td><code id="linesSymbols_+3A_...">...</code></td>
<td>
<p>Further arguments used internally by <code><a href="#topic+scatterSymbols">scatterSymbols</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note: 'Horizontal' alignment refers to adjustment of the x-coordinates of elements, 'vertical' alignment to adjustment of the y-coordinates. This is not to be confused with the orientation of the resulting polyline (and/or the sequence of symbols) that goes from left to right (with <code>alignment='vertical'</code>) or from top to bottom (with <code>alignment='horizontal'</code>).<br />
Line elements and/or symbols may be grouped together in any order in the SVG file. The function will automatically use XML elements from left to right (with <code>alignment='vertical'</code>) or top to bottom (with <code>alignment='horizontal'</code>) according to their x/y-coordinates.<br />
Line elements and/or symbols must be prepared in the SVG file in one of the following amounts: a) same amount as data values (or one element less in case of lines), b) one line and/or or two symbols or c) one line <em>and</em> one symbol. In case of b) and c) the function will automatically duplicate line elements and/or symbols with the assumption of fixed shapes (that is, all lines and/or all symbols will look the same as the 'template' that is provided) and constant distance between the elements on the coordinate that will not be adjusted by <code>values</code> ('x' with <code>alignment='vertical'</code> or 'y' with <code>alignment='horizontal'</code>).<br />
The function currently supports the following <code>symbol_type</code>s:
</p>

<ul>
<li><p> circle: XML elements of type 'circle'. Attributes 'cx' or 'cy' are adjusted.
</p>
</li>
<li><p> rect: XML elements of type 'rect'. Attributes 'x' or 'y' are adjusted.
</p>
</li>
<li><p> polygon: XML elements of type 'polygon'. Attribute 'points' is adjusted so that the centroid of the shape matches the scaled value position on the chart.
</p>
</li>
<li><p> linegroup: XML elements of type 'g' that contain elements of type 'line'. Attributes 'x1' and 'x2' or 'y1' and 'y2' of those lines are adjusted so that the mean x- or y-coordinate of all lines in the group matches the scaled value position on the chart.
</p>
</li>
<li><p> path: XML elements of type 'path'. The first command of attribute 'd' is adjusted. The center of path is defined as the midpoint between minimum and maximum x- and y-coordinates of the shape.
</p>
</li></ul>



<h3>Value</h3>

<p>XML document with SVG content
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#read SVG file
fpath &lt;- system.file("extdata", "fig11.svg", package="svgtools")
svg &lt;- read_svg(file = fpath)

#adjust lines and/or symbols
set.seed(12345)
values &lt;- matrix(c(rnorm(10,0.95,0.03), rnorm(10,0.75,0.05), 
                   rnorm(10,0.55,0.07), rnorm(10,0.35,0.05), 
                   rnorm(10,0.15,0.03)), nrow = 5, byrow = TRUE)
values[2,8] &lt;- as.numeric(NA)
svg &lt;- linesSymbols(svg = svg, frame_name = "frame", group_name = "gA", 
                    scale_real = c(0,1), values = values[1,], 
                    symbol_type = "rect")
svg &lt;- linesSymbols(svg = svg, frame_name = "frame", group_name = "gB", 
                    scale_real = c(0,1), values = values[2,], 
                    symbol_type = "circle")
svg &lt;- linesSymbols(svg = svg, frame_name = "frame", group_name = "gC", 
                    scale_real = c(0,1), values = values[3,], 
                    has_lines = FALSE, symbol_type = "polygon")
svg &lt;- linesSymbols(svg = svg, frame_name = "frame", group_name = "gD", 
                    scale_real = c(0,1), values = values[4,], 
                    symbol_type = "linegroup")
svg &lt;- linesSymbols(svg = svg, frame_name = "frame", group_name = "gE", 
                    scale_real = c(0,1), values = values[5,], 
                    symbol_type = NULL)
</code></pre>

<hr>
<h2 id='percentileBar'>Adjust (stacked) bar chart representing percentiles</h2><span id='topic+percentileBar'></span>

<h3>Description</h3>

<p>Adjusts the horizontal (XML attribute 'x') or vertical (XML attribute 'y') position as well as width/height of bar segments (XML elements of type 'rect') and optionally value labels (XML elements of type 'text'). First, values are ordered and transformed to differences between percentiles, providing a starting point and widths/heights for bar segments. Then, positions are calculated relative to a given frame (XML element of type 'rect') and the position of a value within the minimum and maximum of a given scale.<br />
No value labels are possible for this type of bar chart.<br />
For further description see <code><a href="#topic+stackedBar">stackedBar</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>percentileBar(
  svg,
  frame_name,
  group_name,
  scale_real,
  values,
  alignment = "horizontal"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="percentileBar_+3A_svg">svg</code></td>
<td>
<p>XML document with SVG content</p>
</td></tr>
<tr><td><code id="percentileBar_+3A_frame_name">frame_name</code></td>
<td>
<p>Name (attribute 'id') of frame (XML element 'rect') for positioning bar segments.</p>
</td></tr>
<tr><td><code id="percentileBar_+3A_group_name">group_name</code></td>
<td>
<p>Name (attribute 'id') of group (XML element 'g') containing either bar segments or further groups, containing bar segments themselves.</p>
</td></tr>
<tr><td><code id="percentileBar_+3A_scale_real">scale_real</code></td>
<td>
<p>Numeric vector (e.g. <code>c(0,100)</code>) of arbitrary length. Only minimum and maximum are used for scaling of values.</p>
</td></tr>
<tr><td><code id="percentileBar_+3A_values">values</code></td>
<td>
<p>Either a numeric vector, a numeric matrix or a dataframe with only numeric columns.<br />
If a vector is given, it corresponds to one bar (group of bar segments).<br />
If a matrix or dataframe is given, rows define the value set for several (stacked) bars grouped together.</p>
</td></tr>
<tr><td><code id="percentileBar_+3A_alignment">alignment</code></td>
<td>
<p>Character value. Accepts 'horizontal' (default) or 'vertical'. See details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In contrast to <code><a href="#topic+stackedBar">stackedBar</a></code> the value set(s) need(s) to have one more element than bar segments in each group.<br />
For everything else, see <code><a href="#topic+stackedBar">stackedBar</a></code>.
</p>


<h3>Value</h3>

<p>XML document with SVG content
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#read SVG file
fpath &lt;- system.file("extdata", "fig9.svg", package="svgtools")
svg &lt;- read_svg(file = fpath)

#adjust bars
set.seed(12345)
yy &lt;- -2:2*15
percentiles &lt;- data.frame(p5=rnorm(5,350,10)+yy, p25=rnorm(5,450,10)+yy, 
                          p50low=rnorm(5,510,10)+yy-1.5, p75=rnorm(5,560,10)+yy, 
                          p95=rnorm(5,640,10)+yy)
percentiles$p50upp &lt;- percentiles$p50low+3
svg &lt;- percentileBar(svg = svg, frame_name = "frame", group_name = "group",
                     scale_real = c(250,750), values = percentiles)
</code></pre>

<hr>
<h2 id='read_svg'>Read SVG file and return XML document</h2><span id='topic+read_svg'></span>

<h3>Description</h3>

<p>Read SVG file and return XML document
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_svg(file, enc = "UTF-8", summary = FALSE, display = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_svg_+3A_file">file</code></td>
<td>
<p>A string, a connection, or a raw vector. See <code><a href="xml2.html#topic+read_xml">read_xml</a></code>.</p>
</td></tr>
<tr><td><code id="read_svg_+3A_enc">enc</code></td>
<td>
<p>Encoding (default 'UTF-8').</p>
</td></tr>
<tr><td><code id="read_svg_+3A_summary">summary</code></td>
<td>
<p>Show summary of SVG file (<code><a href="#topic+summary_svg">summary_svg</a></code>)? (default FALSE)</p>
</td></tr>
<tr><td><code id="read_svg_+3A_display">display</code></td>
<td>
<p>Display SVG on standard display port (<code><a href="#topic+display_svg">display_svg</a></code>)? (default FALSE)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>XML document with SVG content
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fpath &lt;- system.file("extdata", "fig1.svg", package="svgtools")
svg &lt;- read_svg(file = fpath, summary = TRUE)
</code></pre>

<hr>
<h2 id='referenceBar'>Adjust (stacked) bar chart that is aligned around a reference category</h2><span id='topic+referenceBar'></span>

<h3>Description</h3>

<p>Adjusts the horizontal (XML attribute 'x') or vertical (XML attribute 'y') position as well as width/height of bar segments (XML elements of type 'rect') and optionally value labels (XML elements of type 'text'). Positions are calculated relative to a given frame (XML element of type 'rect'), a nullvalue and the position of a data value within the minimum and maximum of a given scale. The first n bar segments and, optionally, value labels of each bar (n is called the <code>reference</code> category) are position to the left (in horizontal alignment) or bottom (in vertical alignment) of the nullvalue, while the others are positioned to the right or top.<br />
For further description see <code><a href="#topic+stackedBar">stackedBar</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>referenceBar(
  svg,
  frame_name,
  group_name,
  scale_real,
  values,
  reference,
  nullvalue = 0,
  alignment = "horizontal",
  has_labels = TRUE,
  label_position = "center",
  decimals = 0,
  display_limits = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="referenceBar_+3A_svg">svg</code></td>
<td>
<p>XML document with SVG content</p>
</td></tr>
<tr><td><code id="referenceBar_+3A_frame_name">frame_name</code></td>
<td>
<p>Name (attribute 'id') of frame (XML element 'rect') for positioning bar segments (and value labels).</p>
</td></tr>
<tr><td><code id="referenceBar_+3A_group_name">group_name</code></td>
<td>
<p>Name (attribute 'id') of group (XML element 'g') containing either bar segments (and value labels) or further groups, containing bar segments (and value labels) themselves.</p>
</td></tr>
<tr><td><code id="referenceBar_+3A_scale_real">scale_real</code></td>
<td>
<p>Numeric vector (e.g. <code>c(0,100)</code>) of arbitrary length. Only minimum and maximum are used for scaling of values.</p>
</td></tr>
<tr><td><code id="referenceBar_+3A_values">values</code></td>
<td>
<p>Either a numeric vector, a numeric matrix or a dataframe with only numeric columns.<br />
If a vector is given, it corresponds to one bar (group of bar segments and, optionally, value labels).<br />
If a matrix or dataframe is given, rows define the value set for several (stacked) bars grouped together.</p>
</td></tr>
<tr><td><code id="referenceBar_+3A_reference">reference</code></td>
<td>
<p>Reference category (=column number of values). Bar segments up to this category lie to the left (horizontal) or to the bottom (vertical), bar segments above this category lie to the right (horizontal) or the top (vertical) of the bar chart.</p>
</td></tr>
<tr><td><code id="referenceBar_+3A_nullvalue">nullvalue</code></td>
<td>
<p>Value that defines the &quot;center&quot; of the bar segments (for left/right or bottom/top positioning)</p>
</td></tr>
<tr><td><code id="referenceBar_+3A_alignment">alignment</code></td>
<td>
<p>Character value. Accepts 'horizontal' (default) or 'vertical'. See details.</p>
</td></tr>
<tr><td><code id="referenceBar_+3A_has_labels">has_labels</code></td>
<td>
<p>Are there value labels (of XML type 'text') to adjust? (default TRUE)</p>
</td></tr>
<tr><td><code id="referenceBar_+3A_label_position">label_position</code></td>
<td>
<p>Character value. Accepts 'start', 'center' (default) and 'end'. This refers to the underlying bar segments.</p>
</td></tr>
<tr><td><code id="referenceBar_+3A_decimals">decimals</code></td>
<td>
<p>Integer value defining the number of decimal digits of value labels (default 0).</p>
</td></tr>
<tr><td><code id="referenceBar_+3A_display_limits">display_limits</code></td>
<td>
<p>Interval for (small) values, that lead to suppression of the corresponding value labels. If only one value x is given, it is turned into the interval c(-x,x). (default 0 = no suppression)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code><a href="#topic+stackedBar">stackedBar</a></code>.
</p>


<h3>Value</h3>

<p>XML document with SVG content
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#read SVG file
fpath &lt;- system.file("extdata", "fig5.svg", package="svgtools")
svg &lt;- read_svg(file = fpath)

#adjust bars
values &lt;- matrix(c(1,2,3,4,2,3,4,1,3,4,1,2,4,1,2,3,1,2,3,4)*10, 
                 nrow = 5, byrow = TRUE)
svg &lt;- referenceBar(svg = svg, frame_name = "frame", group_name = "group",
                    scale_real = c(-100,100), values = values, 
                    reference = 2, nullvalue = 0)
</code></pre>

<hr>
<h2 id='scatterSymbols'>Adjust symbols of a scatter plot</h2><span id='topic+scatterSymbols'></span>

<h3>Description</h3>

<p>Adjusts the horizontal (XML attributes 'x', 'x1', 'x2', 'cx' etc.) and vertical (XML attributes 'y', 'y1', 'y2', 'cy' etc.) positions of symbols (see details). Positions are calculated relative to a given frame (XML element of type 'rect') and the position of a data value within the minimum and maximum of two given scales for x- and y-axis. This process is called scaling.<br />
In preparation, it is necessary to name a group (set attribute 'id' of XML element of type 'g') of symbols. Symbols are automatically duplicated or removed to match the amount of data values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scatterSymbols(
  svg,
  frame_name,
  group_name,
  scale_real_x,
  scale_real_y,
  values,
  symbol_type
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scatterSymbols_+3A_svg">svg</code></td>
<td>
<p>XML document with SVG content</p>
</td></tr>
<tr><td><code id="scatterSymbols_+3A_frame_name">frame_name</code></td>
<td>
<p>Name (attribute 'id') of frame (XML element 'rect') for positioning of elements.</p>
</td></tr>
<tr><td><code id="scatterSymbols_+3A_group_name">group_name</code></td>
<td>
<p>Name (attribute 'id') of group (XML element 'g') with symbols.</p>
</td></tr>
<tr><td><code id="scatterSymbols_+3A_scale_real_x">scale_real_x</code></td>
<td>
<p>Numeric vector (e.g. <code>c(0,100)</code>) of arbitrary length for x-axis. Only minimum and maximum are used for scaling of values.</p>
</td></tr>
<tr><td><code id="scatterSymbols_+3A_scale_real_y">scale_real_y</code></td>
<td>
<p>Numeric vector (e.g. <code>c(0,100)</code>) of arbitrary length for y-axis. Only minimum and maximum are used for scaling of values.</p>
</td></tr>
<tr><td><code id="scatterSymbols_+3A_values">values</code></td>
<td>
<p>Dataframe or matrix with numeric vectors. First column corresponds to x-axis. Second column corresponds to y-axis.</p>
</td></tr>
<tr><td><code id="scatterSymbols_+3A_symbol_type">symbol_type</code></td>
<td>
<p>Character value. Accepts 'circle', 'rect', 'polygon', 'linegroup', 'path', or 'guess' for guessing of type; see details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Symbols may be prepared in the SVG file in any amount. But be aware that the function will simply duplicate the first one (in the group) or remove the last ones to match the amount of data values. When, for example, you need to have different colors for different subgroups of cases, prepare several groups of symbols and call this function for each of them.<br />
The function currently supports the following <code>symbol_type</code>s:
</p>

<ul>
<li><p> circle: XML elements of type 'circle'. Attributes 'cx' and 'cy' are adjusted.
</p>
</li>
<li><p> rect: XML elements of type 'rect'. Attributes 'x' and 'y' are adjusted.
</p>
</li>
<li><p> polygon: XML elements of type 'polygon'. Attribute 'points' is adjusted so that the centroid of the shape matches the scaled value positions on the chart.
</p>
</li>
<li><p> linegroup: XML elements of type 'g' that contain elements of type 'line'. Attributes 'x1', 'x2', 'y1' and 'y2' of those lines are adjusted so that the mean x- and y-coordinate of all lines in the group matches the scaled value positions on the chart.
</p>
</li>
<li><p> path: XML elements of type 'path'. The first command of attribute 'd' is adjusted. The center of path is defined as the midpoint between minimum and maximum x- and y-coordinates of the shape.
</p>
</li></ul>



<h3>Value</h3>

<p>XML document with SVG content
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#read SVG file
fpath &lt;- system.file("extdata", "fig13.svg", package="svgtools")
svg &lt;- read_svg(file = fpath)

#scatter symbols
set.seed(12345)
df &lt;- data.frame(g=rep(1:4,10), x=rnorm(40,500,75), y=rnorm(40,500,75))
df[df$g==1,]$x &lt;- df[df$g==1,]$x-35
df[df$g==2,]$y &lt;- df[df$g==2,]$y-35
df[df$g==3,]$x &lt;- df[df$g==3,]$x+35
df[df$g==4,]$y &lt;- df[df$g==4,]$y+35
svg &lt;- scatterSymbols(svg = svg, frame_name = "frame", group_name = "gA", 
                      scale_real_x = c(250,750), scale_real_y = c(250,750), 
                      values = df[df$g==1,2:3], symbol_type = "rect")
svg &lt;- scatterSymbols(svg = svg, frame_name = "frame", group_name = "gB", 
                      scale_real_x = c(250,750), scale_real_y = c(250,750), 
                      values = df[df$g==2,2:3], symbol_type = "circle")
svg &lt;- scatterSymbols(svg = svg, frame_name = "frame", group_name = "gC", 
                      scale_real_x = c(250,750), scale_real_y = c(250,750), 
                      values = df[df$g==3,2:3], symbol_type = "polygon")
svg &lt;- scatterSymbols(svg = svg, frame_name = "frame", group_name = "gD", 
                      scale_real_x = c(250,750), scale_real_y = c(250,750), 
                      values = df[df$g==4,2:3], symbol_type = "linegroup")
</code></pre>

<hr>
<h2 id='stackedBar'>Adjust (stacked) bar chart to values on a given scale</h2><span id='topic+stackedBar'></span>

<h3>Description</h3>

<p>Adjusts the horizontal (XML attribute 'x') or vertical (XML attribute 'y') position as well as width/height of bar segments (XML elements of type 'rect') and optionally value labels (XML elements of type 'text'). Positions are calculated relative to a given frame (XML element of type 'rect') and the position of a data value within the minimum and maximum of a given scale. This process is called scaling.<br />
In preparation, it is necessary to name a group (set attribute 'id' of XML element of type 'g') of bar segments (and value labels). Bar segments (and value labels) need to be of the same amount as there are data values for adjustment.<br />
It is possible to group several such groups together. Only the outer group needs to be named in that case, for convenience.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stackedBar(
  svg,
  frame_name,
  group_name,
  scale_real,
  values,
  alignment = "horizontal",
  has_labels = TRUE,
  label_position = "center",
  decimals = 0,
  display_limits = 0,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stackedBar_+3A_svg">svg</code></td>
<td>
<p>XML document with SVG content</p>
</td></tr>
<tr><td><code id="stackedBar_+3A_frame_name">frame_name</code></td>
<td>
<p>Name (attribute 'id') of frame (XML element 'rect') for positioning bar segments (and value labels).</p>
</td></tr>
<tr><td><code id="stackedBar_+3A_group_name">group_name</code></td>
<td>
<p>Name (attribute 'id') of group (XML element 'g') containing either bar segments (and value labels) or further groups, containing bar segments (and value labels) themselves.</p>
</td></tr>
<tr><td><code id="stackedBar_+3A_scale_real">scale_real</code></td>
<td>
<p>Numeric vector (e.g. <code>c(0,100)</code>) of arbitrary length. Only minimum and maximum are used for scaling of values.</p>
</td></tr>
<tr><td><code id="stackedBar_+3A_values">values</code></td>
<td>
<p>Either a numeric vector, a numeric matrix or a dataframe with only numeric columns.<br />
If a vector is given, it corresponds to one bar (group of bar segments and, optionally, value labels).<br />
If a matrix or dataframe is given, rows define the value set for several (stacked) bars grouped together.</p>
</td></tr>
<tr><td><code id="stackedBar_+3A_alignment">alignment</code></td>
<td>
<p>Character value. Accepts 'horizontal' (default) or 'vertical'. See details.</p>
</td></tr>
<tr><td><code id="stackedBar_+3A_has_labels">has_labels</code></td>
<td>
<p>Are there value labels (of XML type 'text') to adjust? (default TRUE)</p>
</td></tr>
<tr><td><code id="stackedBar_+3A_label_position">label_position</code></td>
<td>
<p>Character value. Accepts 'start', 'center' (default) and 'end'. This refers to the underlying bar segments.</p>
</td></tr>
<tr><td><code id="stackedBar_+3A_decimals">decimals</code></td>
<td>
<p>Integer value defining the number of decimal digits of value labels (default 0).</p>
</td></tr>
<tr><td><code id="stackedBar_+3A_display_limits">display_limits</code></td>
<td>
<p>Interval for (small) values, that lead to suppression of the corresponding value labels. If only one value x is given, it is turned into the interval c(-x,x). (default 0 = no suppression)</p>
</td></tr>
<tr><td><code id="stackedBar_+3A_...">...</code></td>
<td>
<p>Further arguments used internally by <code><a href="#topic+referenceBar">referenceBar</a></code>, <code><a href="#topic+diffBar">diffBar</a></code> and <code><a href="#topic+percentileBar">percentileBar</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>'Horizontal' alignment refers to adjustment of the x-coordinates of elements, 'vertical' alignment to adjustment of the y-coordinates.<br />
Bar segments and, optionally, value labels may be grouped together in any order in the SVG file. The function will automatically use XML elements from left to right (with <code>alignment='horizontal'</code>) or bottom to top (with <code>alignment='vertical'</code>) according to their x/y-coordinates.<br />
Furthermore, the SVG file order of several bars grouped together in an outer group is irrelevant. The function will automatically use bars (that is, groups of bar segments and, optionally, value labels) from top to bottom (with <code>alignment='horizontal'</code>) or left to right (with <code>alignment='vertical'</code>) according to the lowest x/y-coordinate of any element.<br />
Bar segments and value labels (if any) are automatically hidden (XML attribute 'diplay' is set to 'none'), when a value of 0 or NA is provided. Subsequent calls to the function with non-zero or non-NA values make such elements reappear in the output.
</p>


<h3>Value</h3>

<p>XML document with SVG content
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#read SVG file
fpath &lt;- system.file("extdata", "fig3.svg", package="svgtools")
svg &lt;- read_svg(file = fpath)

#adjust bars
svg &lt;- stackedBar(svg = svg, frame_name = "frame", group_name = "overall",
                  scale_real = c(0,160), values = c(9.97,42.42,105.71), 
                  alignment = "vertical", has_labels = TRUE, 
                  label_position = "end", decimals = 0, display_limits = 10)
df.subgroups &lt;- matrix(1:9*8, nrow=3)
svg &lt;- stackedBar(svg = svg, frame_name = "frame", group_name = "subgroups", 
                  scale_real = c(0,160), values = df.subgroups, 
                  alignment = "vertical", display_limits = 10)
</code></pre>

<hr>
<h2 id='summary_svg'>Print summary of SVG file structure in console</h2><span id='topic+summary_svg'></span>

<h3>Description</h3>

<p>Print summary of SVG file structure in console
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summary_svg(svg)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary_svg_+3A_svg">svg</code></td>
<td>
<p>XML document with SVG content.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Prints helpful information to verify the content of the SVG file:
</p>

<ul>
<li><p> Named groups (XML elements 'g' with attribute 'id') and number of their child elements
</p>
</li>
<li><p> Available frames (XML elements 'rect' with attribute 'id')
</p>
</li>
<li><p> Used fonts, font sizes and font colors (in any XML elements with attributes 'font-family', 'font-size', 'fill' and 'stroke')
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>#read SVG file
fpath &lt;- system.file("extdata", "fig1.svg", package="svgtools")
svg &lt;- read_svg(file = fpath)

#show a summary of SVG file
summary_svg(svg = svg)
</code></pre>

<hr>
<h2 id='write_svg'>Writes SVG to file</h2><span id='topic+write_svg'></span>

<h3>Description</h3>

<p>Writes SVG to file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_svg(svg, file, remove_hidden = TRUE, flatten = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_svg_+3A_svg">svg</code></td>
<td>
<p>XML document with SVG content.</p>
</td></tr>
<tr><td><code id="write_svg_+3A_file">file</code></td>
<td>
<p>Path to file or connection to write to (see <code><a href="xml2.html#topic+write_xml">write_xml</a></code>).</p>
</td></tr>
<tr><td><code id="write_svg_+3A_remove_hidden">remove_hidden</code></td>
<td>
<p>Should hidden elements (with XML attribute display=&quot;none&quot;) be removed? (default TRUE)</p>
</td></tr>
<tr><td><code id="write_svg_+3A_flatten">flatten</code></td>
<td>
<p>Should grouping of SVG elements be removed? (default FALSE)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Both <code>remove_hidden=TRUE</code> and <code>flatten=TRUE</code> do not alter the XML document object itself. Therefore, subsequent calls to <code><a href="#topic+stackedBar">stackedBar</a></code> and other functions remain possible.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#read SVG file
fpath &lt;- system.file("extdata", "fig3.svg", package="svgtools")
svg &lt;- read_svg(file = fpath)

#adjust some elements of SVG
svg &lt;- stackedBar(svg = svg, frame_name = "frame", group_name = "overall", 
                  scale_real = c(0,160), values = c(10,42,106), 
                  alignment = "vertical")

## Not run: 
#write SVG file to disk and remove all groupings
write_svg(svg = svg, file = "myChart.svg", flatten = TRUE)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
