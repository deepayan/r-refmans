<!DOCTYPE html><html lang="en"><head><title>Help for package shinydbauth</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {shinydbauth}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#custom-labels'><p>Modify shinydbauth labels to use custom text</p></a></li>
<li><a href='#fab_button'><p>Create a FAB button</p></a></li>
<li><a href='#module-authentication'><p>Authentication module</p></a></li>
<li><a href='#module-chpass'><p>Change password module</p></a></li>
<li><a href='#secure-app'><p>Secure a Shiny application and manage authentication</p></a></li>
<li><a href='#use_language'><p>Use shinydbauth labels</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Simple Authentification for 'shiny' Applications</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a simple authentification mechanism for single 'shiny' applications.
    Authentification and password change functionality are performed calling user provided functions that typically access some database backend.
    Source code of main applications is protected until authentication is successful.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/diegoefe/shinydbauth">https://github.com/diegoefe/shinydbauth</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>R6, shiny, htmltools, DT (&ge; 0.5), openssl, R.utils,
billboarder, scrypt, yaml, glue</td>
</tr>
<tr>
<td>Suggests:</td>
<td>keyring, testthat (&ge; 2.1.0), knitr, rmarkdown</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-08 14:40:08 UTC; diego</td>
</tr>
<tr>
<td>Author:</td>
<td>Diego Florio <a href="https://orcid.org/0009-0002-1799-0189"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Diego Florio &lt;diegoefe@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-10 11:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='custom-labels'>Modify shinydbauth labels to use custom text</h2><span id='topic+custom-labels'></span><span id='topic+set_labels'></span><span id='topic+get_labels'></span>

<h3>Description</h3>

<p>See all labels registered with <code>get_labels()</code>,
then set custom text with <code>set_labels()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_labels(language, ...)

get_labels(language = "en")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="custom-labels_+3A_language">language</code></td>
<td>
<p>Language to use for labels, supported values are :  &quot;en&quot;, &quot;es&quot;.</p>
</td></tr>
<tr><td><code id="custom-labels_+3A_...">...</code></td>
<td>
<p>A named list with labels to replace.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>get_labels()</code> return a named list with all labels registered.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# In global.R for example:
set_labels(
  language = "en",
  "Please authenticate" = "You have to login",
  "Username:" = "What's your name:",
  "Password:" = "Enter your password:"
)
</code></pre>

<hr>
<h2 id='fab_button'>Create a FAB button</h2><span id='topic+fab_button'></span>

<h3>Description</h3>

<p>Create a fixed button in page corner with additional button(s) in it
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fab_button(
  ...,
  position = c("bottom-right", "top-right", "bottom-left", "top-left", "none"),
  animation = c("slidein", "slidein-spring", "fountain", "zoomin"),
  toggle = c("hover", "click"),
  inputId = NULL,
  label = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fab_button_+3A_...">...</code></td>
<td>
<p><code>actionButton</code>s to be used as floating buttons.</p>
</td></tr>
<tr><td><code id="fab_button_+3A_position">position</code></td>
<td>
<p>Position for the button.</p>
</td></tr>
<tr><td><code id="fab_button_+3A_animation">animation</code></td>
<td>
<p>Animation when displaying floating buttons.</p>
</td></tr>
<tr><td><code id="fab_button_+3A_toggle">toggle</code></td>
<td>
<p>Display floating buttons when main button is clicked or hovered.</p>
</td></tr>
<tr><td><code id="fab_button_+3A_inputid">inputId</code></td>
<td>
<p>Id for the FAB button (act like an <code>actionButton</code>).</p>
</td></tr>
<tr><td><code id="fab_button_+3A_label">label</code></td>
<td>
<p>Label for main button.</p>
</td></tr>
</table>

<hr>
<h2 id='module-authentication'>Authentication module</h2><span id='topic+module-authentication'></span><span id='topic+auth_ui'></span><span id='topic+auth_server'></span>

<h3>Description</h3>

<p>Authentication module
</p>


<h3>Usage</h3>

<pre><code class='language-R'>auth_ui(
  id,
  status = "primary",
  tags_top = NULL,
  tags_bottom = NULL,
  background = NULL,
  choose_language = NULL,
  lan = NULL,
  ...
)

auth_server(
  input,
  output,
  session,
  check_credentials,
  use_token = FALSE,
  lan = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="module-authentication_+3A_id">id</code></td>
<td>
<p>Module's id.</p>
</td></tr>
<tr><td><code id="module-authentication_+3A_status">status</code></td>
<td>
<p>Bootstrap status to use for the panel and the button.
Valid status are: <code>"default"</code>, <code>"primary"</code>, <code>"success"</code>,
<code>"warning"</code>, <code>"danger"</code>.</p>
</td></tr>
<tr><td><code id="module-authentication_+3A_tags_top">tags_top</code></td>
<td>
<p>A <code>tags (div, img, ...)</code> to be displayed on top of the authentication module.</p>
</td></tr>
<tr><td><code id="module-authentication_+3A_tags_bottom">tags_bottom</code></td>
<td>
<p>A <code>tags (div, img, ...)</code> to be displayed on bottom of the authentication module.</p>
</td></tr>
<tr><td><code id="module-authentication_+3A_background">background</code></td>
<td>
<p>A optionnal <code>css</code> for authentication background. See example.</p>
</td></tr>
<tr><td><code id="module-authentication_+3A_choose_language">choose_language</code></td>
<td>
<p><code>logical/character</code>. Add language selection on top ? TRUE for all supported languages
or a vector of possibilities like <code>c("en", "es")</code>. If enabled, <code>input$shinydbauth_language</code> is created</p>
</td></tr>
<tr><td><code id="module-authentication_+3A_lan">lan</code></td>
<td>
<p>A language object. See  <code><a href="#topic+use_language">use_language</a></code></p>
</td></tr>
<tr><td><code id="module-authentication_+3A_...">...</code></td>
<td>
<p>: Used for old version compatibility.</p>
</td></tr>
<tr><td><code id="module-authentication_+3A_input">input</code>, <code id="module-authentication_+3A_output">output</code>, <code id="module-authentication_+3A_session">session</code></td>
<td>
<p>Standard Shiny server arguments.</p>
</td></tr>
<tr><td><code id="module-authentication_+3A_check_credentials">check_credentials</code></td>
<td>
<p>Function with two arguments (<code>user</code>,
the username provided by the user and <code>password</code>, his/her password).
Must return a <code>list</code> with at least 2 (or 4 in case of sqlite) slots :
</p>

<ul>
<li> <p><strong>result</strong> : logical, result of authentication.
</p>
</li>
<li> <p><strong>user_info</strong> : <code>list</code>. What you want about user ! (sqlite : the line in <code>db</code> corresponding to the user).
</p>
</li>
<li> <p><strong>expired</strong> : logical, is user has expired ? Always <code>FALSE</code> if <code>db</code> doesn't have a <code>expire</code> column. Optional.
</p>
</li>
<li> <p><strong>authorized</strong> : logical, is user can access to his app ? Always <code>TRUE</code> if <code>db</code> doesn't have a <code>applications</code> column. Optional.
</p>
</li></ul>
</td></tr>
<tr><td><code id="module-authentication_+3A_use_token">use_token</code></td>
<td>
<p>Add a token in the URL to check authentication. Should not be used directly.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>reactiveValues</code> with 3 slots :
</p>

<ul>
<li> <p><strong>result</strong> : logical, result of authentication.
</p>
</li>
<li> <p><strong>user</strong> : character, name of connected user.
</p>
</li>
<li> <p><strong>user_info</strong> : information about the user.
</p>
</li></ul>


<hr>
<h2 id='module-chpass'>Change password module</h2><span id='topic+module-chpass'></span><span id='topic+chpass_ui'></span><span id='topic+chpass_server'></span>

<h3>Description</h3>

<p>Change password module
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chpass_ui(id, tag_img = NULL, status = "primary", lan = NULL)

chpass_server(
  input,
  output,
  session,
  update_credentials,
  validate_pwd = NULL,
  use_token = FALSE,
  lan = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="module-chpass_+3A_id">id</code></td>
<td>
<p>Module's id.</p>
</td></tr>
<tr><td><code id="module-chpass_+3A_tag_img">tag_img</code></td>
<td>
<p>A <code>tags$img</code> to be displayed on the authentication module.</p>
</td></tr>
<tr><td><code id="module-chpass_+3A_status">status</code></td>
<td>
<p>Bootstrap status to use for the panel and the button.
Valid status are: <code>"default"</code>, <code>"primary"</code>, <code>"success"</code>,
<code>"warning"</code>, <code>"danger"</code>.</p>
</td></tr>
<tr><td><code id="module-chpass_+3A_lan">lan</code></td>
<td>
<p>An language object. Should not be used directly.</p>
</td></tr>
<tr><td><code id="module-chpass_+3A_input">input</code>, <code id="module-chpass_+3A_output">output</code>, <code id="module-chpass_+3A_session">session</code></td>
<td>
<p>Standard Shiny server arguments.</p>
</td></tr>
<tr><td><code id="module-chpass_+3A_update_credentials">update_credentials</code></td>
<td>
<p>A <code>function</code> to perform an action when changing password is successful.
Two arguments will be passed to the function: <code>user</code> (username) and <code>password</code>
(the new password). Must return a list with at least a slot <code>result</code> with <code>TRUE</code>
or <code>FALSE</code>, according if the update has been successful.</p>
</td></tr>
<tr><td><code id="module-chpass_+3A_validate_pwd">validate_pwd</code></td>
<td>
<p>A <code>function</code> to validate the password enter by the user.
Default is to check for the password to have at least one number, one lowercase,
one uppercase and be of length 6 at least.</p>
</td></tr>
<tr><td><code id="module-chpass_+3A_use_token">use_token</code></td>
<td>
<p>Add a token in the URL to check authentication. Should not be used directly.</p>
</td></tr>
</table>

<hr>
<h2 id='secure-app'>Secure a Shiny application and manage authentication</h2><span id='topic+secure-app'></span><span id='topic+secure_app'></span><span id='topic+secure_server'></span><span id='topic+create_server'></span>

<h3>Description</h3>

<p>Secure a Shiny application and manage authentication
</p>


<h3>Usage</h3>

<pre><code class='language-R'>secure_app(
  ui,
  ...,
  head_auth = NULL,
  theme = NULL,
  language = "en",
  fab_position = "bottom-right"
)

secure_server(
  check_credentials,
  timeout = 15,
  inputs_list = NULL,
  keep_token = FALSE,
  validate_pwd = NULL,
  update_credentials = NULL,
  session = shiny::getDefaultReactiveDomain()
)

create_server(check_credentials, update_credentials, server_fn)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="secure-app_+3A_ui">ui</code></td>
<td>
<p>UI of the application.</p>
</td></tr>
<tr><td><code id="secure-app_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code><a href="#topic+auth_ui">auth_ui</a></code>.</p>
</td></tr>
<tr><td><code id="secure-app_+3A_head_auth">head_auth</code></td>
<td>
<p>Tag or list of tags to use in the <code>&lt;head&gt;</code>
of the authentication page (for custom CSS for example).</p>
</td></tr>
<tr><td><code id="secure-app_+3A_theme">theme</code></td>
<td>
<p>Alternative Bootstrap stylesheet, default is to use <code>readable</code>,
you can use themes provided by <code>shinythemes</code>.
It will affect the authentication panel and the admin page.</p>
</td></tr>
<tr><td><code id="secure-app_+3A_language">language</code></td>
<td>
<p>Language to use for labels, supported values are : &quot;en&quot;, &quot;es&quot;.</p>
</td></tr>
<tr><td><code id="secure-app_+3A_fab_position">fab_position</code></td>
<td>
<p>Position for the FAB button, see <code><a href="#topic+fab_button">fab_button</a></code> for options.</p>
</td></tr>
<tr><td><code id="secure-app_+3A_check_credentials">check_credentials</code></td>
<td>
<p>Function passed to <code><a href="#topic+auth_server">auth_server</a></code>.</p>
</td></tr>
<tr><td><code id="secure-app_+3A_timeout">timeout</code></td>
<td>
<p>Timeout session (minutes) before logout if sleeping. Defaut to 15. 0 to disable.</p>
</td></tr>
<tr><td><code id="secure-app_+3A_inputs_list">inputs_list</code></td>
<td>
<p><code>list</code>. If database credentials, you can configure inputs for editing users information. See Details.</p>
</td></tr>
<tr><td><code id="secure-app_+3A_keep_token">keep_token</code></td>
<td>
<p>Logical, keep the token used to authenticate in the URL, it allow to refresh the
application in the browser, but careful the token can be shared between users ! Default to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="secure-app_+3A_validate_pwd">validate_pwd</code></td>
<td>
<p>A <code>function</code> to validate the password enter by the user.
Default is to check for the password to have at least one number, one lowercase,
one uppercase and be of length 6 at least.</p>
</td></tr>
<tr><td><code id="secure-app_+3A_update_credentials">update_credentials</code></td>
<td>
<p>Function passed to <code><a href="#topic+chpass_server">chpass_server</a></code>.</p>
</td></tr>
<tr><td><code id="secure-app_+3A_session">session</code></td>
<td>
<p>Shiny session.</p>
</td></tr>
<tr><td><code id="secure-app_+3A_server_fn">server_fn</code></td>
<td>
<p>Function that returns the authenticated server.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If database credentials, you can configure inputs with <code>inputs_list</code> for editing users information
from the admin console. <code>start</code>, <code>expire</code>, <code>admin</code> and <code>password</code> are not configurable.
The others columns are rendering by defaut using a <code>textInput</code>. You can modify this using <code>inputs_list</code>.
<code>inputs_list</code> must be a named list. Each name must be a column name, and then we must have the function
shiny to call <code>fun</code> and the arguments <code>args</code> like this :
<code>
 list(group = list(
     fun = "selectInput",
     args = list(
         choices = c("all", "restricted"),
         multiple = TRUE,
         selected = c("all", "restricted")
      )
     )
)
</code>
</p>
<p>You can specify if you want to allow downloading users file,  sqlite database and logs from within
the admin panel by invoking <code>options("shinydbauth.download")</code>. It defaults
to <code>c("db", "logs", "users")</code>, that allows downloading all. You can specify
<code>options("shinydbauth.download" = "db"</code> if you want allow admin to download only
sqlite database, <code>options("shinydbauth.download" = "logs")</code> to allow logs download
or <code>options("shinydbauth.download" = "")</code> to disable all.
</p>
<p>Using <code>options("shinydbauth.pwd_validity")</code>, you can set password validity period. It defaults
to <code>Inf</code>. You can specify for example
<code>options("shinydbauth.pwd_validity" = 90)</code> if you want to force user changing password each 90 days.
</p>
<p>Using <code>options("shinydbauth.pwd_failure_limit")</code>, you can set password failure limit. It defaults
to <code>Inf</code>. You can specify for example
<code>options("shinydbauth.pwd_failure_limit" = 5)</code> if you want to lock user account after 5 wrong password.
</p>
<p><code><a href="#topic+create_server">create_server</a></code> calls <code><a href="#topic+secure_server">secure_server</a></code> and, if authentication is ok, passes user_info to server_fn
</p>


<h3>Value</h3>

<p>A <code>reactiveValues</code> containing informations about the user connected.
</p>


<h3>Note</h3>

<p>A special input value will be accessible server-side with <code>input$shinydbauth_where</code>
to know in which step user is : authentication, application, admin or password.
</p>

<hr>
<h2 id='use_language'>Use shinydbauth labels</h2><span id='topic+use_language'></span>

<h3>Description</h3>

<p>See all labels registered with <code>get_labels()</code>,
then set custom text with <code>set_labels()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_language(lan = "en")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="use_language_+3A_lan">lan</code></td>
<td>
<p>Language to use for labels, supported values are : &quot;en&quot;, &quot;es&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A language object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
use_language(lan = "en")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
