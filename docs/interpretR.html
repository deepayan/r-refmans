<!DOCTYPE html><html><head><title>Help for package interpretR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {interpretR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#interpretR-package'>
<p>Partial Dependence Plots and Permutation-Based Performance Measures</p></a></li>
<li><a href='#interpretRNews'><p>Display the NEWS file</p></a></li>
<li><a href='#parDepPlot'><p>Model interpretation functions: Partial Dependence Plots</p></a></li>
<li><a href='#variableImportance'><p>Permutation- based Variable Importance Measures</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Binary Classifier and Regression Model Interpretation Functions</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.5</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-08-19</td>
</tr>
<tr>
<td>Depends:</td>
<td>randomForest</td>
</tr>
<tr>
<td>Imports:</td>
<td>AUC, stats, graphics</td>
</tr>
<tr>
<td>Author:</td>
<td>Michel Ballings and Dirk Van den Poel</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Michel Ballings &lt;michel.ballings@GMail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Compute permutation- based performance measures and create partial
    dependence plots for (cross-validated) 'randomForest' and 'ada' models.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-19 21:56:41 UTC; mb</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-19 22:22:31 UTC</td>
</tr>
</table>
<hr>
<h2 id='interpretR-package'>
Partial Dependence Plots and Permutation-Based Performance Measures
</h2><span id='topic+interpretR-package'></span><span id='topic+interpretR'></span>

<h3>Description</h3>

<p>Compute permutation-based performance meaures (for binary classification) and create partial dependence plots (cross-validated classification and regression models). Currently only binary classification and regression models estimated with the package <code>randomForest</code> are supported. Binary classification models estimated with <code>ada</code> are also supported.
</p>


<h3>Author(s)</h3>

<p>Authors: Michel Ballings, and Dirk Van den Poel, Maintainer: <a href="mailto:Michel.Ballings@GMail.com">Michel.Ballings@GMail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+parDepPlot">parDepPlot</a></code>, <code><a href="#topic+variableImportance">variableImportance</a></code>
</p>

<hr>
<h2 id='interpretRNews'>Display the NEWS file</h2><span id='topic+interpretRNews'></span>

<h3>Description</h3>

<p><code>interpretRNews</code> shows the NEWS file of the interpretR package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>interpretRNews()
</code></pre>


<h3>Author(s)</h3>

<p>Authors: Michel Ballings and Dirk Van den Poel, Maintainer: <a href="mailto:Michel.Ballings@GMail.com">Michel.Ballings@GMail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+parDepPlot">parDepPlot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>interpretRNews()
</code></pre>

<hr>
<h2 id='parDepPlot'>Model interpretation functions: Partial Dependence Plots</h2><span id='topic+parDepPlot'></span>

<h3>Description</h3>

<p><code>parDepPlot</code> creates partial dependence plots for binary (cross-validated) classification models and regression models. Currently only binary classification models estimated with the packages <code>randomForest</code> and <code>ada</code> are supported.  In addition <code>randomForest</code> regression models are supported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parDepPlot(
  x.name,
  object,
  data,
  rm.outliers = TRUE,
  fact = 1.5,
  n.pt = 50,
  robust = FALSE,
  ci = FALSE,
  u.quant = 0.75,
  l.quant = 0.25,
  xlab = substr(x.name, 1, 50),
  ylab = NULL,
  main = if (any(class(object) %in% c("randomForest", "ada")))
    paste("Partial Dependence on", substr(x.name, 1, 20)) else
    paste("Cross-Validated Partial Dependence on", substr(x.name, 1, 10)),
  logit = TRUE,
  ylim = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parDepPlot_+3A_x.name">x.name</code></td>
<td>
<p>the name of the predictor as a character string for which a partial dependence plot has to be created.</p>
</td></tr>
<tr><td><code id="parDepPlot_+3A_object">object</code></td>
<td>
<p>can be a model or a list of cross- validated models. Currently only binary classification models built using the packages <code>randomForest</code> and <code>ada</code> are supported.</p>
</td></tr>
<tr><td><code id="parDepPlot_+3A_data">data</code></td>
<td>
<p>a data frame containing the predictors for the model or a list of data frames for cross-validation with length equal to the number of models.</p>
</td></tr>
<tr><td><code id="parDepPlot_+3A_rm.outliers">rm.outliers</code></td>
<td>
<p>boolean, remove the outliers in x.name. Outliers are values that are smaller than max(Q1-fact*IQR,min) or greater than min(Q3+fact*IQR,max). Overridden if xlim is used.</p>
</td></tr>
<tr><td><code id="parDepPlot_+3A_fact">fact</code></td>
<td>
<p>factor to use in rm.outliers. The default is 1.5.</p>
</td></tr>
<tr><td><code id="parDepPlot_+3A_n.pt">n.pt</code></td>
<td>
<p>if x.name is a continuous predictor, the number of points that will be used to plot the curve.</p>
</td></tr>
<tr><td><code id="parDepPlot_+3A_robust">robust</code></td>
<td>
<p>if TRUE then the median is used to plot the central tendency (recommended when logit=FALSE). If FALSE the mean is used.</p>
</td></tr>
<tr><td><code id="parDepPlot_+3A_ci">ci</code></td>
<td>
<p>boolean. Should a confidence interval based on quantiles be plotted? This only works if robust=TRUE.</p>
</td></tr>
<tr><td><code id="parDepPlot_+3A_u.quant">u.quant</code></td>
<td>
<p>Upper quantile for ci. This only works if ci=TRUE and robust=TRUE.</p>
</td></tr>
<tr><td><code id="parDepPlot_+3A_l.quant">l.quant</code></td>
<td>
<p>Lower quantile for ci. This only works if ci=TRUE and robust=TRUE.</p>
</td></tr>
<tr><td><code id="parDepPlot_+3A_xlab">xlab</code></td>
<td>
<p>label for the x-axis. Is determined automatically if NULL.</p>
</td></tr>
<tr><td><code id="parDepPlot_+3A_ylab">ylab</code></td>
<td>
<p>label for the y-axis.</p>
</td></tr>
<tr><td><code id="parDepPlot_+3A_main">main</code></td>
<td>
<p>main title for the plot.</p>
</td></tr>
<tr><td><code id="parDepPlot_+3A_logit">logit</code></td>
<td>
<p>boolean. Should the y-axis be on a logit scale or not? If FALSE, it is recommended to set robust=TRUE. Only applicable for classifcation.</p>
</td></tr>
<tr><td><code id="parDepPlot_+3A_ylim">ylim</code></td>
<td>
<p>The y limits of the plot</p>
</td></tr>
<tr><td><code id="parDepPlot_+3A_...">...</code></td>
<td>
<p>other graphical parameters for <code>plot</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For classification, the response variable in the model is always assumed to take on the values {0,1}. Resulting partial dependence plots always refer to class 1. Whenever strange results are obtained the user has three options. First set rm.outliers=TRUE. Second, if that doesn't help, set robust=TRUE. Finally, if that doesn't help, the user can also try setting ci=TRUE. Areas with larger confidence intervals typically indicate problem areas. These options help the user tease out the root of strange results and converge to better parameter values.
</p>


<h3>Author(s)</h3>

<p>Authors: Michel Ballings, and Dirk Van den Poel, Maintainer: <a href="mailto:Michel.Ballings@GMail.com">Michel.Ballings@GMail.com</a>
</p>


<h3>References</h3>

<p>The code in this function uses part of the code from the <code>partialPlot</code> function in <code>randomForest</code>. It is expanded and generalized to support cross-validation and other packages.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+variableImportance">variableImportance</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(randomForest)
#Prepare data
data(iris)
iris &lt;- iris[1:100,]
iris$Species &lt;- as.factor(ifelse(factor(iris$Species)=="setosa",0,1))

#Cross-validated models
#Estimate 10 models and create 10 test sets
data &lt;- list()
rf &lt;- list()
for (i in 1:10) {
  ind &lt;- sample(nrow(iris),50)
  rf[[i]] &lt;- randomForest(Species~., iris[ind,])
  data[[i]] &lt;- iris[-ind,]
}


parDepPlot(x.name="Petal.Width", object=rf, data=data)

#Single model
#Estimate a single model
ind &lt;- sample(nrow(iris),50)
rf &lt;- randomForest(Species~., iris[ind,])
parDepPlot(x.name="Petal.Width", object=rf, data=iris[-ind,])

</code></pre>

<hr>
<h2 id='variableImportance'>Permutation- based Variable Importance Measures</h2><span id='topic+variableImportance'></span>

<h3>Description</h3>

<p><code>variableImportance</code> produces permutation- based variable importance measures (currently only for binary classification models from the package <code>randomForest</code> and only for the performance measure AUROC)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>variableImportance(
  object = NULL,
  xdata = NULL,
  ydata = NULL,
  CV = 3,
  measure = "AUROC",
  sort = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="variableImportance_+3A_object">object</code></td>
<td>
<p>A model. Currently only binary classification models from the package <code>randomForest</code>.</p>
</td></tr>
<tr><td><code id="variableImportance_+3A_xdata">xdata</code></td>
<td>
<p>A data frame containing the predictors for the model.</p>
</td></tr>
<tr><td><code id="variableImportance_+3A_ydata">ydata</code></td>
<td>
<p>A factor containing the response variable.</p>
</td></tr>
<tr><td><code id="variableImportance_+3A_cv">CV</code></td>
<td>
<p>Cross-validation. How many times should the data be permuted and the decrease in performance be calculated? Afterwards the mean is taken. CV should be higher for very small samples to ensure stability.</p>
</td></tr>
<tr><td><code id="variableImportance_+3A_measure">measure</code></td>
<td>
<p>Currently only Area Under the Receiver Operating Characteristic Curve (AUROC) is supported.</p>
</td></tr>
<tr><td><code id="variableImportance_+3A_sort">sort</code></td>
<td>
<p>Logical. Should the results be sorted from high to low?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently only binary classification models from <code>randomForest</code> are supported. Also, currently only AUROC is supported. Definition of MeanDecreaseAUROC: for the entire ensemble the AUROC is recorded on the provided xdata. The same is subsequently done after permuting each variable (iteratively, for each variable separately). Then the latter is subtracted from the former. This is called the Decrease in AUROC. If we do this for multiple CV, it becomes the Mean Decrease in AUROC.
</p>


<h3>Value</h3>

<p>A data frame containing the variable names and the mean decrease in AUROC
</p>


<h3>Author(s)</h3>

<p>Authors: Michel Ballings, and Dirk Van den Poel, Maintainer: <a href="mailto:Michel.Ballings@GMail.com">Michel.Ballings@GMail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+parDepPlot">parDepPlot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Prepare data
data(iris)
iris &lt;- iris[1:100,]
iris$Species &lt;- as.factor(ifelse(factor(iris$Species)=="setosa",0,1))
#Estimate model
library(randomForest)
ind &lt;- sample(nrow(iris),50)
rf &lt;- randomForest(Species~., iris[ind,])
#Obtain variable importances
variableImportance(object=rf, xdata=iris[-ind,names(iris) != "Species"],
ydata=iris[-ind,]$Species) 
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
