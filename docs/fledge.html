<!DOCTYPE html><html><head><title>Help for package fledge</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {fledge}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bump_version'><p>Bump package version</p></a></li>
<li><a href='#commit_version'><p>Commits NEWS.md and DESCRIPTION to Git</p></a></li>
<li><a href='#create_demo_project'><p>Create example repo for fledge demos</p></a></li>
<li><a href='#finalize_version'><p>Finalize package version</p></a></li>
<li><a href='#get_last_tag'><p>The most recent tag</p></a></li>
<li><a href='#get_top_level_commits'><p>All top-level commits</p></a></li>
<li><a href='#tag_version'><p>Create a new version tag</p></a></li>
<li><a href='#unbump_version'><p>Undoes bumping the package version</p></a></li>
<li><a href='#update_news'><p>Update NEWS.md with messages from top-level commits</p></a></li>
<li><a href='#update_version'><p>Update NEWS.md and DESCRIPTION with a new version</p></a></li>
<li><a href='#with_demo_project'><p>Run code in temporary project</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Smoother Change Tracking and Versioning for R Packages</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-02-18</td>
</tr>
<tr>
<td>Description:</td>
<td>Streamlines the process of updating changelogs (NEWS.md)
    and versioning R packages developed in git repositories.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://fledge.cynkra.com/">https://fledge.cynkra.com/</a>, <a href="https://github.com/cynkra/fledge">https://github.com/cynkra/fledge</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/cynkra/fledge/issues">https://github.com/cynkra/fledge/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>brio, cli, desc (&ge; 1.2.0), gert (&ge; 1.4.0), purrr (&ge; 0.3.2),
rematch2, rlang (&ge; 0.4.12), tibble, usethis (&ge; 1.5.0),
whoami, withr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>mockery, covr, fansi, fs, knitr, parsedate, rmarkdown,
rstudioapi, testthat (&ge; 3.0.0), callr, pkgload</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-18 16:12:17 UTC; kirill</td>
</tr>
<tr>
<td>Author:</td>
<td>Kirill Müller <a href="https://orcid.org/0000-0002-1416-3412"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Patrick Schratz <a href="https://orcid.org/0000-0003-0748-6624"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Maëlle Salmon <a href="https://orcid.org/0000-0002-2815-0399"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kirill Müller &lt;kirill@cynkra.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-18 16:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='bump_version'>Bump package version</h2><span id='topic+bump_version'></span><span id='topic+bump_version_impl'></span>

<h3>Description</h3>

<p>Calls the following functions:
</p>

<ol>
<li><p> Verify that the current branch is the main branch.
</p>
</li>
<li> <p><code><a href="#topic+update_news">update_news()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+update_version">update_version()</a></code>, using the <code>which</code> argument
</p>
</li>
<li><p> Depending on the <code>which</code> argument:
</p>

<ul>
<li><p> If <code>"dev"</code>, <code><a href="#topic+finalize_version">finalize_version()</a></code> with <code>push = FALSE</code>
</p>
</li>
<li><p> Otherwise, <code><a href="#topic+commit_version">commit_version()</a></code>.
</p>
</li></ul>

</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>bump_version(which = "dev")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bump_version_+3A_which">which</code></td>
<td>
<p>Component of the version number to update. Supported
values are <code>"dev"</code> (default), <code>"patch"</code>, <code>"minor"</code> and <code>"major"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Bumped too soon?</h3>

<p>Have you just run <code>bump_version()</code>, then realized
&quot;oh shoot, I forgot to merge that PR&quot;?
Fear not, run <code><a href="#topic+unbump_version">unbump_version()</a></code>, merge that PR, run <code>bump_version()</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+unbump_version">unbump_version()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create mock package in a temporary directory.
# Set open to TRUE if you want to play in the mock package.
with_demo_project({
  # Use functions as if inside the newly created package project.
  # (Or go and actually run code inside the newly created package project!)
  # Add a new R file.
  usethis::use_r("cool-function", open = FALSE)
  # Pretend we added useful code inside it.
  # Track the new R file with Git.
  gert::git_add("R/cool-function.R")
  gert::git_commit("- Add cool function.")
  # Bump version with fledge.
  fledge::bump_version()
})
</code></pre>

<hr>
<h2 id='commit_version'>Commits NEWS.md and DESCRIPTION to Git</h2><span id='topic+commit_version'></span>

<h3>Description</h3>

<p>Commits changes to <code>NEWS.md</code> and <code>DESCRIPTION</code>, amending a previous commit
created by <span class="pkg">fledge</span> if necessary.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>commit_version()
</code></pre>


<h3>Value</h3>

<p>Invisibly: <code>TRUE</code> if a previous commit for that version has been
amended, <code>FALSE</code> if not.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create mock package in a temporary directory.
# Set open to TRUE if you want to play in the mock package.
with_demo_project({
  # Use functions as if inside the newly created package project.
  # (Or go and actually run code inside the newly created package project!)
  # Add a new R file.
  usethis::use_r("cool-function", open = FALSE)
  # Pretend we added useful code inside it.
  # Track the new R file with Git.
  gert::git_add("R/cool-function.R")
  gert::git_commit("- Add cool function.")
  # Bump version with fledge.
  fledge::bump_version()
  desc::desc_add_author(given = "Jane", family = "Doe", role = "ctb")
  fledge::commit_version()
})
</code></pre>

<hr>
<h2 id='create_demo_project'>Create example repo for fledge demos</h2><span id='topic+create_demo_project'></span>

<h3>Description</h3>

<p>Create example repo for fledge demos
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_demo_project(
  open = rlang::is_interactive(),
  name = "tea",
  maintainer = NULL,
  email = NULL,
  date = "2021-09-27",
  dir = file.path(tempdir(), "fledge"),
  news = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_demo_project_+3A_open">open</code></td>
<td>
<p>Whether to open the new project.</p>
</td></tr>
<tr><td><code id="create_demo_project_+3A_name">name</code></td>
<td>
<p>Package name.</p>
</td></tr>
<tr><td><code id="create_demo_project_+3A_maintainer">maintainer</code></td>
<td>
<p>Name for DESCRIPTION and git.</p>
</td></tr>
<tr><td><code id="create_demo_project_+3A_email">email</code></td>
<td>
<p>Email for DESCRIPTION and git.</p>
</td></tr>
<tr><td><code id="create_demo_project_+3A_date">date</code></td>
<td>
<p>String of time for DESCRIPTION and git.</p>
</td></tr>
<tr><td><code id="create_demo_project_+3A_dir">dir</code></td>
<td>
<p>Directory within which to create the mock package folder.</p>
</td></tr>
<tr><td><code id="create_demo_project_+3A_news">news</code></td>
<td>
<p>If TRUE, create a NEWS.md file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The path to the newly created mock package.
</p>

<hr>
<h2 id='finalize_version'>Finalize package version</h2><span id='topic+finalize_version'></span><span id='topic+finalize_version_impl'></span>

<h3>Description</h3>

<p>Calls the following functions:
</p>

<ol>
<li> <p><code><a href="#topic+commit_version">commit_version()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+tag_version">tag_version()</a></code>, setting <code>force = TRUE</code> if and only if <code>commit_version()</code>
amended a commit.
</p>
</li>
<li><p> Force-pushes the created tag to the <code>"origin"</code> remote, if <code>push = TRUE</code>.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>finalize_version(push = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="finalize_version_+3A_push">push</code></td>
<td>
<p>If <code>TRUE</code>, push the created tag.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create mock package in a temporary directory.
# Set open to TRUE if you want to play in the mock package.
with_demo_project({
  # Use functions as if inside the newly created package project.
  # (Or go and actually run code inside the newly created package project!)
  # Add a new R file.
  usethis::use_r("cool-function", open = FALSE)
  # Pretend we added useful code inside it.
  # Track the new R file with Git.
  gert::git_add("R/cool-function.R")
  gert::git_commit("- Add cool function.")
  # Bump version with fledge.
  fledge::bump_version()
  # Edit news by hand
  # ...
  # Once done
  fledge::finalize_version()
})
</code></pre>

<hr>
<h2 id='get_last_tag'>The most recent tag</h2><span id='topic+get_last_tag'></span>

<h3>Description</h3>

<p>Returns the most recent Git tag.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_last_tag()
</code></pre>


<h3>Value</h3>

<p>A one-row tibble with columns <code>name</code>, <code>ref</code> and <code>commit</code>.
For annotated tags (as created by fledge), <code>commit</code> may be different
from the SHA of the commit that this tag points to.
Use <code><a href="gert.html#topic+git_commit">gert::git_log()</a></code> to find the actual commit.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create mock package in a temporary directory.
# Set open to TRUE if you want to play in the mock package.
with_demo_project({
  # Use functions as if inside the newly created package project.
  # (Or go and actually run code inside the newly created package project!)
  # Add a new R file.
  usethis::use_r("cool-function", open = FALSE)
  # Pretend we added useful code inside it.
  # Track the new R file with Git.
  gert::git_add("R/cool-function.R")
  gert::git_commit("- Add cool function.")
  # Bump version with fledge.
  fledge::bump_version()
  fledge::finalize_version()
  print(get_top_level_commits(since = NULL))
  print(fledge::get_last_tag())
})
</code></pre>

<hr>
<h2 id='get_top_level_commits'>All top-level commits</h2><span id='topic+get_top_level_commits'></span>

<h3>Description</h3>

<p>Return all top-level commits since a particular version
as commit objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_top_level_commits(since = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_top_level_commits_+3A_since">since</code></td>
<td>
<p>A commit SHA, e.g. as returned from <code><a href="#topic+get_last_tag">get_last_tag()</a></code>.
If <code>NULL</code>, the entire log is retrieved.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="dplyr.html#topic+tibble">tibble</a> with at least two columns:
</p>

<ul>
<li> <p><code>commit</code>: the commit SHA
</p>
</li>
<li> <p><code>message</code>: the commit message
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># Create mock package in a temporary directory.
# Set open to TRUE if you want to play in the mock package.
with_demo_project({
  # Use functions as if inside the newly created package project.
  # (Or go and actually run code inside the newly created package project!)
  # Add a new R file.
  usethis::use_r("cool-function", open = FALSE)
  # Pretend we added useful code inside it.
  # Track the new R file with Git.
  gert::git_add("R/cool-function.R")
  gert::git_commit("- Add cool function.")
  # Bump version with fledge.
  fledge::bump_version()
  fledge::finalize_version()
  print(get_top_level_commits(since = NULL))
  print(fledge::get_last_tag())
})
</code></pre>

<hr>
<h2 id='tag_version'>Create a new version tag</h2><span id='topic+tag_version'></span>

<h3>Description</h3>

<p>Parses <code>NEWS.md</code> and creates/updates the tag for the most recent version.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tag_version(force = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tag_version_+3A_force">force</code></td>
<td>
<p>Re-tag even if the last commit wasn't created by
<code><a href="#topic+bump_version">bump_version()</a></code>.  Useful when defining a CRAN release.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The created tag, invisibly.
</p>
<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create mock package in a temporary directory.
# Set open to TRUE if you want to play in the mock package.
with_demo_project({
  # Use functions as if inside the newly created package project.
  # (Or go and actually run code inside the newly created package project!)
  # Add a new R file.
  usethis::use_r("cool-function", open = FALSE)
  # Pretend we added useful code inside it.
  # Track the new R file with Git.
  gert::git_add("R/cool-function.R")
  gert::git_commit("- Add cool function.")
  # Bump version with fledge.
  fledge::bump_version()
  fledge::update_news(c("- something I forgot", "- blabla"))
  fledge::update_version()
  gert::git_add("NEWS.md")
  gert::git_commit(message = "release notes tweaking")
  fledge::tag_version()
  print(fledge::get_last_tag())
})
</code></pre>

<hr>
<h2 id='unbump_version'>Undoes bumping the package version</h2><span id='topic+unbump_version'></span><span id='topic+unbump_version_impl'></span>

<h3>Description</h3>

<p>This undoes the effect of a <code><a href="#topic+bump_version">bump_version()</a></code> call, with a safety check.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unbump_version()
</code></pre>


<h3>Value</h3>

<p><code>NULL</code>, invisibly. This function is called for its side effects.
</p>
<p>None
</p>


<h3>See Also</h3>

<p>bump_version
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create mock package in a temporary directory.
# Set open to TRUE if you want to play in the mock package.
with_demo_project({
  # Use functions as if inside the newly created package project.
  # (Or go and actually run code inside the newly created package project!)
  # Add a new R file.
  usethis::use_r("cool-function", open = FALSE)
  # Pretend we added useful code inside it.
  # Track the new R file with Git.
  gert::git_add("R/cool-function.R")
  gert::git_commit("- Add cool function.")
  # Bump version with fledge.
  fledge::bump_version()
  # Oh no, we forgot to also add the awesome function for that version!
  # UNBUMP
  fledge::unbump_version()
  # Add a new R file.
  usethis::use_r("awesome-function", open = FALSE)
  # Pretend we added awesome code inside it.
  # Track the new R file with Git.
  gert::git_add("R/awesome-function.R")
  gert::git_commit("- Add awesome function.")
  # Bump version with fledge.
  fledge::bump_version()
  #'
})
</code></pre>

<hr>
<h2 id='update_news'>Update NEWS.md with messages from top-level commits</h2><span id='topic+update_news'></span>

<h3>Description</h3>

<p>Lists all commits from a range (default: top-level commits since the most
recent tag) and adds bullets from their body to <code>NEWS.md</code>.
Creates <code>NEWS.md</code> if necessary.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_news(messages = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_news_+3A_messages">messages</code></td>
<td>
<p>A character vector of commit messages,
e.g. as in the <code>message</code> column in the return value of <code><a href="#topic+get_top_level_commits">get_top_level_commits()</a></code>.
The default uses the top level commits since the last tag as retrieved by <code><a href="#topic+get_last_tag">get_last_tag()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create mock package in a temporary directory.
# Set open to TRUE if you want to play in the mock package.
with_demo_project({
  # Use functions as if inside the newly created package project.
  # (Or go and actually run code inside the newly created package project!)
  # Add a new R file.
  usethis::use_r("cool-function", open = FALSE)
  # Pretend we added useful code inside it.
  # Track the new R file with Git.
  gert::git_add("R/cool-function.R")
  gert::git_commit("- Add cool function.")
  # Bump version with fledge.
  fledge::bump_version()
  fledge::update_news(c("- something I forgot", "- blabla"))
  fledge::update_version()
  gert::git_add("NEWS.md")
  gert::git_commit(message = "release notes tweaking")
  fledge::tag_version()
  print(fledge::get_last_tag())
})
</code></pre>

<hr>
<h2 id='update_version'>Update NEWS.md and DESCRIPTION with a new version</h2><span id='topic+update_version'></span>

<h3>Description</h3>

<p>Bumps a version component and adds to <code>NEWS.md</code> and <code>DESCRIPTION</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_version(which = "dev")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_version_+3A_which">which</code></td>
<td>
<p>Component of the version number to update. Supported
values are <code>"dev"</code> (default), <code>"patch"</code>, <code>"minor"</code> and <code>"major"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create mock package in a temporary directory.
# Set open to TRUE if you want to play in the mock package.
with_demo_project({
  # Use functions as if inside the newly created package project.
  # (Or go and actually run code inside the newly created package project!)
  # Add a new R file.
  usethis::use_r("cool-function", open = FALSE)
  # Pretend we added useful code inside it.
  # Track the new R file with Git.
  gert::git_add("R/cool-function.R")
  gert::git_commit("- Add cool function.")
  # Bump version with fledge.
  fledge::bump_version()
  fledge::update_news(c("- something I forgot", "- blabla"))
  fledge::update_version()
  gert::git_add("NEWS.md")
  gert::git_commit(message = "release notes tweaking")
  fledge::tag_version()
  print(fledge::get_last_tag())
})
</code></pre>

<hr>
<h2 id='with_demo_project'>Run code in temporary project</h2><span id='topic+with_demo_project'></span>

<h3>Description</h3>

<p>Run code in temporary project
</p>


<h3>Usage</h3>

<pre><code class='language-R'>with_demo_project(code, dir = NULL, news = TRUE, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="with_demo_project_+3A_code">code</code></td>
<td>
<p>Code to run with temporary active project</p>
</td></tr>
<tr><td><code id="with_demo_project_+3A_dir">dir</code></td>
<td>
<p>Directory within which to create the mock package folder.</p>
</td></tr>
<tr><td><code id="with_demo_project_+3A_news">news</code></td>
<td>
<p>If TRUE, create a NEWS.md file.</p>
</td></tr>
<tr><td><code id="with_demo_project_+3A_quiet">quiet</code></td>
<td>
<p>Whether to show messages from usethis</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>with_demo_project({
  # Add a new R file.
  usethis::use_r("cool-function", open = FALSE)
  # Pretend we added useful code inside it.
  # Track the new R file with Git.
  gert::git_add("R/cool-function.R")
  gert::git_commit("- Add cool function.")
  # Bump version with fledge.
  fledge::bump_version()
})
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
