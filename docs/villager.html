<!DOCTYPE html><html lang="en"><head><title>Help for package villager</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {villager}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#agent'><p>agent</p></a></li>
<li><a href='#agent_manager'><p>agent Manager</p></a></li>
<li><a href='#data_writer'><p>Data Writer</p></a></li>
<li><a href='#model_data'><p>Model Data</p></a></li>
<li><a href='#resource'><p>Resource</p></a></li>
<li><a href='#resource_manager'><p>Resource Manager</p></a></li>
<li><a href='#simulation'><p>simulation</p></a></li>
<li><a href='#village'><p>Village</p></a></li>
<li><a href='#village_state'><p>village_state</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>A Framework for Designing and Running Agent Based Models</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>This is a package for creating and running Agent Based Models (ABM). It provides a set of base classes with core functionality to allow bootstrapped models. For more intensive modeling, the supplied classes can be extended to fit researcher needs.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>readr, R6, uuid</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, dplyr, knitr, leaflet, plotly, remotes, rmarkdown,
testthat, roxygen2, pandoc,</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/zizroc/villager/">https://github.com/zizroc/villager/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/zizroc/villager/issues/">https://github.com/zizroc/villager/issues/</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-05-25 02:29:48 UTC; thomas</td>
</tr>
<tr>
<td>Author:</td>
<td>Thomas Thelen [aut, cre],
  Gerardo Aldana [aut],
  Marcus Thomson [aut],
  Toni Gonzalez [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Thomas Thelen &lt;tommythelen@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-05-25 15:20:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='agent'>agent</h2><span id='topic+agent'></span>

<h3>Description</h3>

<p>This is an object that represents a villager (agent).
</p>


<h3>Details</h3>

<p>This class acts as an abstraction for handling villager-level logic. It can take a
number of functions that run at each timestep. It also has an associated
</p>


<h3>Methods</h3>


<dl>
<dt><code>as_table()</code></dt><dd><p>Represents the current state of the agent as a tibble</p>
</dd>
<dt><code>get_age()</code></dt><dd><p>Returns age in terms of years</p>
</dd>
<dt><code>get_gender()</code></dt><dd></dd>
<dt><code>get_days_sincelast_birth()</code></dt><dd><p>Get the number of days since the agent last gave birth</p>
</dd>
<dt><code>initialize()</code></dt><dd><p>Create a new agent</p>
</dd>
<dt><code>propagate()</code></dt><dd><p>Runs every day</p>
</dd>
</dl>

<p>Create a new agent
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>identifier</code></dt><dd><p>A unique identifier that can be used to identify and find the agent</p>
</dd>
<dt><code>first_name</code></dt><dd><p>The agent's first name</p>
</dd>
<dt><code>last_name</code></dt><dd><p>The agent's last name</p>
</dd>
<dt><code>age</code></dt><dd><p>The agent's age</p>
</dd>
<dt><code>mother_id</code></dt><dd><p>The identifier of the agent's mother</p>
</dd>
<dt><code>father_id</code></dt><dd><p>The identifier of the agent's father</p>
</dd>
<dt><code>profession</code></dt><dd><p>The agent's profession</p>
</dd>
<dt><code>partner</code></dt><dd><p>The identifier of the agent's partner</p>
</dd>
<dt><code>gender</code></dt><dd><p>The agent's gender</p>
</dd>
<dt><code>alive</code></dt><dd><p>A boolean flag that represents whether the villager is alive or dead</p>
</dd>
<dt><code>children</code></dt><dd><p>A list of children identifiers</p>
</dd>
<dt><code>health</code></dt><dd><p>A percentage value of the agent's current health</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-agent-new"><code>agent$new()</code></a>
</p>
</li>
<li> <p><a href="#method-agent-is_alive"><code>agent$is_alive()</code></a>
</p>
</li>
<li> <p><a href="#method-agent-get_days_since_last_birth"><code>agent$get_days_since_last_birth()</code></a>
</p>
</li>
<li> <p><a href="#method-agent-add_child"><code>agent$add_child()</code></a>
</p>
</li>
<li> <p><a href="#method-agent-as_table"><code>agent$as_table()</code></a>
</p>
</li>
<li> <p><a href="#method-agent-clone"><code>agent$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-agent-new"></a>



<h4>Method <code>new()</code></h4>

<p>Used to created new agent objects.
</p>


<h5>Usage</h5>

<div class="r"><pre>agent$new(
  identifier = NA,
  first_name = NA,
  last_name = NA,
  age = 0,
  mother_id = NA,
  father_id = NA,
  partner = NA,
  children = vector(mode = "character"),
  gender = NA,
  profession = NA,
  alive = TRUE,
  health = 100
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>identifier</code></dt><dd><p>The agent's identifier</p>
</dd>
<dt><code>first_name</code></dt><dd><p>The agent's first name</p>
</dd>
<dt><code>last_name</code></dt><dd><p>The agent's last name</p>
</dd>
<dt><code>age</code></dt><dd><p>The age of the agent</p>
</dd>
<dt><code>mother_id</code></dt><dd><p>The identifier of the agent's mother</p>
</dd>
<dt><code>father_id</code></dt><dd><p>The identifier of the agent' father</p>
</dd>
<dt><code>partner</code></dt><dd><p>The identifier of the agent's partner</p>
</dd>
<dt><code>children</code></dt><dd><p>An ordered list of of the children from this agent</p>
</dd>
<dt><code>gender</code></dt><dd><p>The gender of the agent</p>
</dd>
<dt><code>profession</code></dt><dd><p>The agent's profession</p>
</dd>
<dt><code>alive</code></dt><dd><p>Boolean whether the agent is alive or not</p>
</dd>
<dt><code>health</code></dt><dd><p>A percentage value of the agent's current health</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A new agent object
A function that returns true or false whether the villager dies
This is run each day
</p>


<hr>
<a id="method-agent-is_alive"></a>



<h4>Method <code>is_alive()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>agent$is_alive()</pre></div>



<h5>Returns</h5>

<p>A boolean whether the agent is alive (true for yes)
Gets the number of days from the last birth. This is also
the age of the most recently born agent
</p>


<hr>
<a id="method-agent-get_days_since_last_birth"></a>



<h4>Method <code>get_days_since_last_birth()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>agent$get_days_since_last_birth()</pre></div>



<h5>Returns</h5>

<p>The number of days since last birth
Connects a child to the agent. This method ensures that the
'children' vector is ordered.
</p>


<hr>
<a id="method-agent-add_child"></a>



<h4>Method <code>add_child()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>agent$add_child(child)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>child</code></dt><dd><p>The agent object representing the child</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>None
Returns a data.frame representation of the agent
</p>


<hr>
<a id="method-agent-as_table"></a>



<h4>Method <code>as_table()</code></h4>

<p>I hope there's a more scalable way to do this in R; Adding every new attribute to this
function isn't practical
</p>


<h5>Usage</h5>

<div class="r"><pre>agent$as_table()</pre></div>



<h5>Details</h5>

<p>The village_state holds a copy of all of the villagers at each timestep; this method is used to turn
the agent properties into the object inserted in the village_state.
</p>



<h5>Returns</h5>

<p>A data.frame representation of the agent
</p>


<hr>
<a id="method-agent-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>agent$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='agent_manager'>agent Manager</h2><span id='topic+agent_manager'></span>

<h3>Description</h3>

<p>A class that abstracts the management of aggregations of agent classes. Each village should have
an instance of a agent_manager to interface the agents inside.
</p>


<h3>Methods</h3>


<dl>
<dt><code>add_agent()</code></dt><dd><p>Adds a single agent to the manager.</p>
</dd>
<dt><code>get_average_age()</code></dt><dd><p>Returns the average age, in years, of all the agents.</p>
</dd>
<dt><code>get_living_agents()</code></dt><dd><p>Gets a list of all the agents that are currently alive.</p>
</dd>
<dt><code>get_states()</code></dt><dd><p>Returns a data.frame consisting of all of the managed agents.</p>
</dd>
<dt><code>get_agent()</code></dt><dd><p>Retrieves a particular agent from the manager.</p>
</dd>
<dt><code>get_agent_index()</code></dt><dd><p>Retrieves the index of a agent.</p>
</dd>
<dt><code>initialize()</code></dt><dd><p>Creates a new manager instance.</p>
</dd>
<dt><code>load()</code></dt><dd><p>Loads a csv file defining a population of agents and places them in the manager.</p>
</dd>
<dt><code>remove_agent()</code></dt><dd><p>Removes a agent from the manager</p>
</dd>
</dl>

<p>Creates a new agent manager instance.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>agents</code></dt><dd><p>A list of agents objects that the agent manager manages.</p>
</dd>
<dt><code>agent_class</code></dt><dd><p>A class describing agents. This is usually the default villager supplied 'agent' class</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-agent_manager-new"><code>agent_manager$new()</code></a>
</p>
</li>
<li> <p><a href="#method-agent_manager-get_agent"><code>agent_manager$get_agent()</code></a>
</p>
</li>
<li> <p><a href="#method-agent_manager-get_living_agents"><code>agent_manager$get_living_agents()</code></a>
</p>
</li>
<li> <p><a href="#method-agent_manager-add_agent"><code>agent_manager$add_agent()</code></a>
</p>
</li>
<li> <p><a href="#method-agent_manager-remove_agent"><code>agent_manager$remove_agent()</code></a>
</p>
</li>
<li> <p><a href="#method-agent_manager-get_states"><code>agent_manager$get_states()</code></a>
</p>
</li>
<li> <p><a href="#method-agent_manager-get_agent_index"><code>agent_manager$get_agent_index()</code></a>
</p>
</li>
<li> <p><a href="#method-agent_manager-connect_agents"><code>agent_manager$connect_agents()</code></a>
</p>
</li>
<li> <p><a href="#method-agent_manager-get_living_population"><code>agent_manager$get_living_population()</code></a>
</p>
</li>
<li> <p><a href="#method-agent_manager-get_average_age"><code>agent_manager$get_average_age()</code></a>
</p>
</li>
<li> <p><a href="#method-agent_manager-add_children"><code>agent_manager$add_children()</code></a>
</p>
</li>
<li> <p><a href="#method-agent_manager-load"><code>agent_manager$load()</code></a>
</p>
</li>
<li> <p><a href="#method-agent_manager-clone"><code>agent_manager$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-agent_manager-new"></a>



<h4>Method <code>new()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>agent_manager$new(agent_class = villager::agent)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>agent_class</code></dt><dd><p>The class that's being used to represent agents being managed
Given the identifier of a agent, sort through all of the managed agents and return it
if it exists.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-agent_manager-get_agent"></a>



<h4>Method <code>get_agent()</code></h4>

<p>Return the R6 instance of a agent with identifier 'agent_identifier'.
</p>


<h5>Usage</h5>

<div class="r"><pre>agent_manager$get_agent(agent_identifier)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>agent_identifier</code></dt><dd><p>The identifier of the requested agent.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>An R6 agent object
Returns a list of all the agents that are currently alive.
</p>


<hr>
<a id="method-agent_manager-get_living_agents"></a>



<h4>Method <code>get_living_agents()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>agent_manager$get_living_agents()</pre></div>



<h5>Returns</h5>

<p>A list of living agents
Adds a agent to the manager.
</p>


<hr>
<a id="method-agent_manager-add_agent"></a>



<h4>Method <code>add_agent()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>agent_manager$add_agent(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>One or more agents</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>None
Removes a agent from the manager
</p>


<hr>
<a id="method-agent_manager-remove_agent"></a>



<h4>Method <code>remove_agent()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>agent_manager$remove_agent(agent_identifier)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>agent_identifier</code></dt><dd><p>The identifier of the agent being removed</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>None
Returns a data.frame of agents
</p>


<hr>
<a id="method-agent_manager-get_states"></a>



<h4>Method <code>get_states()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>agent_manager$get_states()</pre></div>



<h5>Details</h5>

<p>Each row of the data.frame represents a agent object
</p>



<h5>Returns</h5>

<p>A single data.frame of all agents
Returns the index of a agent in the internal agent list
</p>


<hr>
<a id="method-agent_manager-get_agent_index"></a>



<h4>Method <code>get_agent_index()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>agent_manager$get_agent_index(agent_identifier)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>agent_identifier</code></dt><dd><p>The identifier of the agent being located</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The index in the list, or R's default return value
Connects two agents together as mates
</p>


<hr>
<a id="method-agent_manager-connect_agents"></a>



<h4>Method <code>connect_agents()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>agent_manager$connect_agents(agent_a, agent_b)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>agent_a</code></dt><dd><p>A agent that will be connected to agent_b</p>
</dd>
<dt><code>agent_b</code></dt><dd><p>A agent that will be connected to agent_a
Returns the total number of agents that are alive</p>
</dd>
</dl>

</div>


<hr>
<a id="method-agent_manager-get_living_population"></a>



<h4>Method <code>get_living_population()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>agent_manager$get_living_population()</pre></div>



<h5>Returns</h5>

<p>The number of living agents
Returns the average age, in years, of all of the agents
</p>


<hr>
<a id="method-agent_manager-get_average_age"></a>



<h4>Method <code>get_average_age()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>agent_manager$get_average_age()</pre></div>



<h5>Details</h5>

<p>This is an <em>example</em> of the kind of logic that the manager might handle. In this case,
the manager is performing calculations about its aggregation (agents). Note that the 364 days needs to
work better
</p>



<h5>Returns</h5>

<p>The average age in years
Takes all of the agents in the manager and reconstructs the children
</p>


<hr>
<a id="method-agent_manager-add_children"></a>



<h4>Method <code>add_children()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>agent_manager$add_children()</pre></div>



<h5>Details</h5>

<p>This is typically called when loading agents from disk for the first time.
When children are created during the simulation, the family connections are made
through the agent class and added to the manager via add_agent.
</p>



<h5>Returns</h5>

<p>None
Loads agents from disk.
</p>


<hr>
<a id="method-agent_manager-load"></a>



<h4>Method <code>load()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>agent_manager$load(file_name)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>file_name</code></dt><dd><p>The location of the file holding the agents.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Populates the agent manager with a set of agents defined in a csv file.
</p>



<h5>Returns</h5>

<p>None
</p>


<hr>
<a id="method-agent_manager-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>agent_manager$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='data_writer'>Data Writer</h2><span id='topic+data_writer'></span>

<h3>Description</h3>

<p>A class responsible for the simulation data to disk.
</p>


<h3>Details</h3>

<p>This class can be subclasses to provide advanced data writing to other data sources. This should also
be subclassed if the agent and resource classes are subclasses, to write any additional fields to the data source.
</p>


<h3>Methods</h3>


<dl>
<dt><code>write()</code></dt><dd><p>Writes the agent and resources to disk.</p>
</dd>
</dl>

<p>Create a new data writer.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>results_directory</code></dt><dd><p>The folder where the simulation results are written to</p>
</dd>
<dt><code>agent_filename</code></dt><dd><p>The location where the agents are written to</p>
</dd>
<dt><code>resource_filename</code></dt><dd><p>The location where the resources are written to</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-data_writer-new"><code>data_writer$new()</code></a>
</p>
</li>
<li> <p><a href="#method-data_writer-write"><code>data_writer$write()</code></a>
</p>
</li>
<li> <p><a href="#method-data_writer-clone"><code>data_writer$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-data_writer-new"></a>



<h4>Method <code>new()</code></h4>

<p>Creates a new data writer object that has optional paths for data files.
</p>


<h5>Usage</h5>

<div class="r"><pre>data_writer$new(
  results_directory = "results",
  agent_filename = "agents.csv",
  resource_filename = "resources.csv"
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>results_directory</code></dt><dd><p>The directory where the results file is written to</p>
</dd>
<dt><code>agent_filename</code></dt><dd><p>The name of the file for the agent data</p>
</dd>
<dt><code>resource_filename</code></dt><dd><p>The name of the file for the resource data</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A new agent object
Writes a village's state to disk.
</p>


<hr>
<a id="method-data_writer-write"></a>



<h4>Method <code>write()</code></h4>

<p>Takes a state an the name of a village and writes the agents and resources to disk
</p>


<h5>Usage</h5>

<div class="r"><pre>data_writer$write(state, village_name)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>state</code></dt><dd><p>The village's village_state that's being written</p>
</dd>
<dt><code>village_name</code></dt><dd><p>The name of the village. This is used to create the data directory</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>None
</p>


<hr>
<a id="method-data_writer-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>data_writer$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='model_data'>Model Data</h2><span id='topic+model_data'></span>

<h3>Description</h3>

<p>R6 Class representing data that's external from resources and agents
</p>
<p>It contains a single variable, 'events' for when the data holds a list of events
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>events</code></dt><dd><p>Any events that need to be tracked</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-model_data-new"><code>model_data$new()</code></a>
</p>
</li>
<li> <p><a href="#method-model_data-clone"><code>model_data$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-model_data-new"></a>



<h4>Method <code>new()</code></h4>

<p>Creates a new model_data object
</p>


<h5>Usage</h5>

<div class="r"><pre>model_data$new()</pre></div>



<h5>Returns</h5>

<p>A new model data object
</p>


<hr>
<a id="method-model_data-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>model_data$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='resource'>Resource</h2><span id='topic+resource'></span>

<h3>Description</h3>

<p>This is an object that represents a single resource.
</p>


<h3>Methods</h3>


<dl>
<dt><code>initialize()</code></dt><dd><p>Create a new resource</p>
</dd>
<dt><code>as_table()</code></dt><dd><p>Represents the current state of the resource as a tibble</p>
</dd>
</dl>

<p>Creates a new resource.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>name</code></dt><dd><p>The name of the resource</p>
</dd>
<dt><code>quantity</code></dt><dd><p>The quantity of the resource that exists</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-resource-new"><code>resource$new()</code></a>
</p>
</li>
<li> <p><a href="#method-resource-as_table"><code>resource$as_table()</code></a>
</p>
</li>
<li> <p><a href="#method-resource-clone"><code>resource$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-resource-new"></a>



<h4>Method <code>new()</code></h4>

<p>Creates a new resource object
</p>


<h5>Usage</h5>

<div class="r"><pre>resource$new(name = NA, quantity = 0)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>The name of the resource</p>
</dd>
<dt><code>quantity</code></dt><dd><p>The quantity present
Returns a data.frame representation of the resource</p>
</dd>
</dl>

</div>


<hr>
<a id="method-resource-as_table"></a>



<h4>Method <code>as_table()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>resource$as_table()</pre></div>



<h5>Returns</h5>

<p>A data.frame of resources
</p>


<hr>
<a id="method-resource-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>resource$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='resource_manager'>Resource Manager</h2><span id='topic+resource_manager'></span>

<h3>Description</h3>

<p>This object manages all of the resources in a village.
</p>


<h3>Methods</h3>


<dl>
<dt><code>initialize()</code></dt><dd><p>Creates a new manager</p>
</dd>
<dt><code>get_resources()</code></dt><dd><p>Gets all of the resources that the manager has</p>
</dd>
<dt><code>get_resource()</code></dt><dd><p>Retrieves a resource from the manager</p>
</dd>
<dt><code>add_resource()</code></dt><dd><p>Adds a resource to the manager</p>
</dd>
<dt><code>remove_resource()</code></dt><dd><p>Removes a resource from the manager</p>
</dd>
<dt><code>get_resource_index()</code></dt><dd><p>Retrieves the index of the resource</p>
</dd>
<dt><code>get_states()</code></dt><dd><p>Returns a list of states</p>
</dd>
<dt><code>load()</code></dt><dd><p>Loads a csv file of resources and adds them to the manager.</p>
</dd>
</dl>



<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>resources</code></dt><dd><p>A list of resource objects</p>
</dd>
<dt><code>resource_class</code></dt><dd><p>The class used to represent resources
Creates a new , empty, resource manager for a village.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-resource_manager-new"><code>resource_manager$new()</code></a>
</p>
</li>
<li> <p><a href="#method-resource_manager-get_resources"><code>resource_manager$get_resources()</code></a>
</p>
</li>
<li> <p><a href="#method-resource_manager-get_resource"><code>resource_manager$get_resource()</code></a>
</p>
</li>
<li> <p><a href="#method-resource_manager-add_resource"><code>resource_manager$add_resource()</code></a>
</p>
</li>
<li> <p><a href="#method-resource_manager-remove_resource"><code>resource_manager$remove_resource()</code></a>
</p>
</li>
<li> <p><a href="#method-resource_manager-get_resource_index"><code>resource_manager$get_resource_index()</code></a>
</p>
</li>
<li> <p><a href="#method-resource_manager-get_states"><code>resource_manager$get_states()</code></a>
</p>
</li>
<li> <p><a href="#method-resource_manager-load"><code>resource_manager$load()</code></a>
</p>
</li>
<li> <p><a href="#method-resource_manager-clone"><code>resource_manager$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-resource_manager-new"></a>



<h4>Method <code>new()</code></h4>

<p>Get a new instance of a resource_manager
</p>


<h5>Usage</h5>

<div class="r"><pre>resource_manager$new(resource_class = villager::resource)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>resource_class</code></dt><dd><p>The class being used to describe the resources being managed
Gets all of the managed resources</p>
</dd>
</dl>

</div>


<hr>
<a id="method-resource_manager-get_resources"></a>



<h4>Method <code>get_resources()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>resource_manager$get_resources()</pre></div>



<h5>Returns</h5>

<p>A list of resources
Gets a resource given a resource name
</p>


<hr>
<a id="method-resource_manager-get_resource"></a>



<h4>Method <code>get_resource()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>resource_manager$get_resource(name)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>The name of the requested resource</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A resource object
Adds a resource to the manager.
</p>


<hr>
<a id="method-resource_manager-add_resource"></a>



<h4>Method <code>add_resource()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>resource_manager$add_resource(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>The resources to add</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>None
Removes a resource from the manager
</p>


<hr>
<a id="method-resource_manager-remove_resource"></a>



<h4>Method <code>remove_resource()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>resource_manager$remove_resource(name)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>The name of the resource being removed</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>None
Returns the index of a resource in the internal resource list
</p>


<hr>
<a id="method-resource_manager-get_resource_index"></a>



<h4>Method <code>get_resource_index()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>resource_manager$get_resource_index(name)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>The name of the resource being located</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The index in the list, or R's default return value
Returns a data.frame where each row is a resource.
</p>


<hr>
<a id="method-resource_manager-get_states"></a>



<h4>Method <code>get_states()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>resource_manager$get_states()</pre></div>



<h5>Details</h5>

<p>Subclasses should not have to override this method because it takes all member variables into account
</p>



<h5>Returns</h5>

<p>A single data.frame
Loads a csv file of resources into the manager
</p>


<hr>
<a id="method-resource_manager-load"></a>



<h4>Method <code>load()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>resource_manager$load(file_name)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>file_name</code></dt><dd><p>The path to the csv file</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>None
</p>


<hr>
<a id="method-resource_manager-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>resource_manager$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='simulation'>simulation</h2><span id='topic+simulation'></span>

<h3>Description</h3>

<p>Advances one or more villages through time
</p>


<h3>Methods</h3>


<dl>
<dt><code>run_model()</code></dt><dd><p>Runs the simulation</p>
</dd>
</dl>

<p>Creates a new Simulation instance
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>length</code></dt><dd><p>The total number of time steps that the simulation runs for</p>
</dd>
<dt><code>villages</code></dt><dd><p>A list of villages that the simulator will run</p>
</dd>
<dt><code>writer</code></dt><dd><p>An instance of a data_writer class for writing village data to disk</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-simulation-new"><code>simulation$new()</code></a>
</p>
</li>
<li> <p><a href="#method-simulation-run_model"><code>simulation$run_model()</code></a>
</p>
</li>
<li> <p><a href="#method-simulation-clone"><code>simulation$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-simulation-new"></a>



<h4>Method <code>new()</code></h4>

<p>Creates a new simulation object to control the experiment
</p>


<h5>Usage</h5>

<div class="r"><pre>simulation$new(length, villages, writer = villager::data_writer$new())</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>length</code></dt><dd><p>The number of steps the simulation takes</p>
</dd>
<dt><code>villages</code></dt><dd><p>A list of villages that will be simulated</p>
</dd>
<dt><code>writer</code></dt><dd><p>The data writer to be used with the villages
Runs the simulation</p>
</dd>
</dl>

</div>


<hr>
<a id="method-simulation-run_model"></a>



<h4>Method <code>run_model()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>simulation$run_model()</pre></div>



<h5>Returns</h5>

<p>None
</p>


<hr>
<a id="method-simulation-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>simulation$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='village'>Village</h2><span id='topic+village'></span>

<h3>Description</h3>

<p>This is an object that represents the state of a village at a particular time.
</p>


<h3>Details</h3>

<p>This class acts as a type of record that holds the values of the
different village variables. This class can be subclassed to include more variables that aren't present.
</p>


<h3>Methods</h3>


<dl>
<dt><code>initialize()</code></dt><dd><p>Creates a new village</p>
</dd>
<dt><code>propagate()</code></dt><dd><p>Advances the village a single time step</p>
</dd>
<dt><code>set_initial_state()</code></dt><dd><p>Initializes the initial state of the village</p>
</dd>
</dl>



<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>name</code></dt><dd><p>An optional name for the village</p>
</dd>
<dt><code>initial_condition</code></dt><dd><p>A function that sets the initial state of the village</p>
</dd>
<dt><code>current_state</code></dt><dd><p>The village's current state</p>
</dd>
<dt><code>previous_state</code></dt><dd><p>The village's previous state</p>
</dd>
<dt><code>models</code></dt><dd><p>A list of functions or a single function that should be run at each timestep</p>
</dd>
<dt><code>model_data</code></dt><dd><p>Optional data that models may need</p>
</dd>
<dt><code>agent_mgr</code></dt><dd><p>The manager that handles all of the agents</p>
</dd>
<dt><code>resource_mgr</code></dt><dd><p>The manager that handles all of the resources
Initializes a village</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-village-new"><code>village$new()</code></a>
</p>
</li>
<li> <p><a href="#method-village-propagate"><code>village$propagate()</code></a>
</p>
</li>
<li> <p><a href="#method-village-set_initial_state"><code>village$set_initial_state()</code></a>
</p>
</li>
<li> <p><a href="#method-village-clone"><code>village$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-village-new"></a>



<h4>Method <code>new()</code></h4>

<p>This method is meant to set the variables that are needed for a village to propagate through
time.
</p>


<h5>Usage</h5>

<div class="r"><pre>village$new(
  name,
  initial_condition,
  models = list(),
  agent_class = villager::agent,
  resource_class = villager::resource
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt><dd><p>An optional name for the village</p>
</dd>
<dt><code>initial_condition</code></dt><dd><p>A function that gets called on the first time step</p>
</dd>
<dt><code>models</code></dt><dd><p>A list of functions or a single function that should be run at each time step</p>
</dd>
<dt><code>agent_class</code></dt><dd><p>The class that's being used to represent agents</p>
</dd>
<dt><code>resource_class</code></dt><dd><p>The class being used to describe the resources
Propagates the village a single time step</p>
</dd>
</dl>

</div>


<hr>
<a id="method-village-propagate"></a>



<h4>Method <code>propagate()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>village$propagate(current_step)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>current_step</code></dt><dd><p>The current time step</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>This method is used to advance the village a single time step. It should NOT be used
to set initial conditions. See the set_initial_state method.
</p>



<h5>Returns</h5>

<p>None
Runs the user defined function that sets the initial state of the village
</p>


<hr>
<a id="method-village-set_initial_state"></a>



<h4>Method <code>set_initial_state()</code></h4>

<p>Runs the initial condition model
</p>


<h5>Usage</h5>

<div class="r"><pre>village$set_initial_state()</pre></div>


<hr>
<a id="method-village-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>village$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='village_state'>village_state</h2><span id='topic+village_state'></span>

<h3>Description</h3>

<p>This is an object that represents the state of a village at a particular time.
</p>


<h3>Details</h3>

<p>This class acts as a type of record that holds the values of the different village variables. This class
can be subclassed to include more variables that aren't present.
</p>


<h3>Methods</h3>



<p>Creates a new State
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>step</code></dt><dd><p>The time step that the state is relevant to</p>
</dd>
<dt><code>agent_states</code></dt><dd><p>A list of agent states</p>
</dd>
<dt><code>resource_states</code></dt><dd><p>A list of resource states</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-village_state-new"><code>village_state$new()</code></a>
</p>
</li>
<li> <p><a href="#method-village_state-clone"><code>village_state$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-village_state-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initializes all of the properties in the state to the ones passed in. This should
be called by subclasses during initialization.
</p>


<h5>Usage</h5>

<div class="r"><pre>village_state$new(
  step = 0,
  agent_states = vector(),
  resource_states = vector()
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>step</code></dt><dd><p>The time step that the state is relevant to</p>
</dd>
<dt><code>agent_states</code></dt><dd><p>A vector of tibbles representing the states of the agents</p>
</dd>
<dt><code>resource_states</code></dt><dd><p>A vector of tibbles representing the states of the resources</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>When adding a new property, make sure to add it to the tibble
representation.
</p>


<hr>
<a id="method-village_state-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>village_state$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
