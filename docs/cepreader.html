<!DOCTYPE html><html><head><title>Help for package cepreader</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {cepreader}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#readCEP'><p>Reads a CEP (Canoco) data file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Read 'CEP' and Legacy 'CANOCO' Files</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2-2</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Matrix</td>
</tr>
<tr>
<td>Description:</td>
<td>Read Condensed Cornell Ecology Program ('CEP') and legacy
    'CANOCO' files into R data frames.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENCE</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/vegandevs/cepreader/issues">https://github.com/vegandevs/cepreader/issues</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://cran.r-project.org/">https://cran.r-project.org/</a>,
<a href="https://github.com/vegandevs/cepreader/">https://github.com/vegandevs/cepreader/</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-06-25 11:09:41 UTC; jarioksa</td>
</tr>
<tr>
<td>Author:</td>
<td>Jari Oksanen <a href="https://orcid.org/0000-0001-7102-9626"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Gavin L. Simpson <a href="https://orcid.org/0000-0002-9084-8413"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jari Oksanen &lt;jhoksane@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-06-25 12:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='readCEP'>Reads a CEP (Canoco) data file </h2><span id='topic+readCEP'></span>

<h3>Description</h3>

<p><code>readCEP</code> reads a file formatted by relaxed strict CEP format
used by <code>Canoco</code> software, among others.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readCEP(file, maxdata = 10000, positive = TRUE, sparseMatrix = FALSE,
    ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readCEP_+3A_file">file</code></td>
<td>
<p>File name (character variable). </p>
</td></tr>
<tr><td><code id="readCEP_+3A_maxdata">maxdata</code></td>
<td>
<p>Maximum number of non-zero entries. </p>
</td></tr>
<tr><td><code id="readCEP_+3A_positive">positive</code></td>
<td>
<p>Read only positive data entries (normal in community data).</p>
</td></tr>
<tr><td><code id="readCEP_+3A_sparsematrix">sparseMatrix</code></td>
<td>
<p>Return data as a sparse matrix of <a href="https://CRAN.R-project.org/package=Matrix"><span class="pkg">Matrix</span></a>
package (see <code><a href="Matrix.html#topic+sparseMatrix">sparseMatrix</a></code>).</p>
</td></tr>
<tr><td><code id="readCEP_+3A_...">...</code></td>
<td>
<p>Other arguments passed to <code><a href="Matrix.html#topic+sparseMatrix">sparseMatrix</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Cornell Ecology Programs (CEP) introduced several data formats
designed for punched cards.  One of these was the &lsquo;condensed
strict&rsquo; format which was adopted by popular software <code>DECORANA</code>
and <code>TWINSPAN</code>. Later, Cajo ter Braak (1984) wrote
<code>Canoco</code> based on <code>DECORANA</code>, where he adopted the format,
but relaxed it somewhat (that's why I call it &ldquo;relaxed
strict&rdquo; format). Further, he introduced a more ordinary
&ldquo;free&rdquo; format, and allowed the use of classical Fortran style
&ldquo;open&rdquo; format with fixed field widths.  This function should
be able to deal with all these <code>Canoco</code> formats, whereas it
cannot read many of the traditional CEP alternatives.
</p>
<p>All variants of CEP formats have:
</p>

<ul>
<li><p> Two or three title cards, most importantly specifying the
format (or word <code>FREE</code>) and the number of items per record
(number of species and sites for &ldquo;open&rdquo; and &ldquo;free&rdquo;
formats).
</p>
</li>
<li><p> Data in one of three accepted formats:
</p>

<ol>
<li><p> Condensed format: First number on the line is the site
identifier (an integer), and it is followed by pairs
(&ldquo;couplets&rdquo;) of numbers identifying the species and
its abundance (an integer and a floating point number).
</p>
</li>
<li><p> Open Fortran format, where the first number on the line
must be the site number, followed by abundance values in
fields of fixed widths. Empty fields are interpreted as
zeros.
</p>
</li>
<li> <p>&ldquo;Free&rdquo; format, where the numbers are interpreted
as abundance values.  These numbers must be separated by
blank space, and zeros must be written as zeros.  </p>
</li></ol>

</li>
<li><p> Species and site names, given in Fortran format
<code>(10A8)</code>: Ten names per line, eight columns for each.  </p>
</li></ul>

<p>With option <code>positive = TRUE</code> the function removes all lines
and columns with zero or negative marginal sums.  In community data
with only positive entries, this removes empty sites and species.
If data entries can be negative, this ruins data, and such data sets
should be read in with option <code>positive = FALSE</code>.
</p>


<h3>Value</h3>

<p>Returns a data frame (default), where columns are species and rows are
sites. Column and row names are taken from the CEP file, and changed
into unique <span class="rlang"><b>R</b></span> names by <code><a href="base.html#topic+make.names">make.names</a></code> after stripping the
blanks.
</p>
<p>Alternatively the function can return a sparse matrix of
<a href="https://CRAN.R-project.org/package=Matrix"><span class="pkg">Matrix</span></a> package. This can give considerably saving in disk
storage. However, typically the sparse matrix will be expanded to full
dense matrix in community analysis. For instance, centred or
standardized data matrices are dense. Moreover, some functions may be
unable to analyse sparse matrices, but you must cast these to ordinary
dense data matrices or data frames before the analysis.
</p>


<h3>Note</h3>

<p>The function calls an external Fortran program to manipulate data so
that they can be read into <span class="rlang"><b>R</b></span>. The function launches a separate
program to read the data. This can trigger a warning with some
security settings, and users may need to give permission for the
operation.
</p>
<p>If you transfer files between operating systems or platforms, you
should always check that your file is formatted to your current
platform. For instance, if you transfer files from Windows to Linux,
you should change the files to <code>unix</code> format, or your session may
crash when Fortran program tries to read the invisible characters that
Windows uses at the end of each line.
</p>
<p>This function was included in <span class="pkg">vegan</span> up to version 2.4-5. It
was moved to a package of its own because compiled functions using
Fortran I/O can interfere with compiled code written in other
languages. This can disturb <span class="pkg">vegan</span>, other loaded packages and
packages that depend on <span class="pkg">vegan</span>. Current versions of <span class="pkg">vegan</span>
have function <code><a href="vegan.html#topic+read.cep">read.cep</a></code> that uses <span class="rlang"><b>R</b></span> code to
read in &ldquo;condensed&rdquo; data. However, the <span class="rlang"><b>R</b></span> code is not as
robust as the Fortran code in this package, and it can fail to read
or read correctly several legacy files, and does not read
&ldquo;open&rdquo; and &ldquo;free&rdquo; format data.
</p>


<h3>Author(s)</h3>

<p> Jari Oksanen </p>


<h3>References</h3>

<p>Ter Braak, C.J.F. (1984&ndash;): CANOCO &ndash; a FORTRAN program for
<em>cano</em>nical <em>c</em>ommunity <em>o</em>rdination by [partial]
[detrended] [canonical] correspondence analysis, principal components
analysis and redundancy analysis. <em>TNO Inst. of Applied Computer
Sci., Stat. Dept. Wageningen, The Netherlands</em>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## classic example
cepfile &lt;- file.path(path.package("cepreader"), "testdata", "dune.spe")
## peek at the file structure
head(readLines(cepfile), n=10)
tail(readLines(cepfile), n=10)
## as a data frame
readCEP(cepfile)
## as a sparse matrix (Matrix package)
readCEP(cepfile, sparseMatrix = TRUE)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
