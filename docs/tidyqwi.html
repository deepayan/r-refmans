<!DOCTYPE html><html><head><title>Help for package tidyqwi</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tidyqwi}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#add_qwi_labels'><p>add_qwi_labels</p></a></li>
<li><a href='#check_census_api_call'><p>A helper function to help parse API calls from the census</p></a></li>
<li><a href='#converted_fips'><p>A function to check if a valid state number or fips is passed</p></a></li>
<li><a href='#get_qwi'><p>Retrieve the Quarterly Workforce Indcator Data</p></a></li>
<li><a href='#industry_labels'><p>Industry Labels</p></a></li>
<li><a href='#nc_qwi'><p>Example Data Set</p></a></li>
<li><a href='#owner_codes'><p>Owner  Codes</p></a></li>
<li><a href='#parse_qwi_message'><p>parse_qwi</p></a></li>
<li><a href='#qwi_var_names'><p>QWI Variable Names</p></a></li>
<li><a href='#show_condition'><p>show_condition</p></a></li>
<li><a href='#state_info'><p>State Data (FIPS, Abbreviations, etc)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>A Convenient API for Accessing United States Census Bureau's
Quarterly Workforce Indicator</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Michael DeWitt &lt;me.dewitt.jr@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>The purpose of this package is to access the 
    United States Census Bureau's Quarterly Workforce Indicator data. Additionally, 
    the data will be retrieved in a tidy format for further manipulation with full variable
    descriptions added if desired. Information about the United States Census Bureau's 
    Quarterly Workforce Indicator is available at 
    <a href="https://www.census.gov/data/developers/data-sets/qwi.html">https://www.census.gov/data/developers/data-sets/qwi.html</a>.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2), future (&ge; 1.6.2)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, httr, jsonlite, magrittr, xml2, stringr, purrr, stats,
tidyr, labelled, furrr</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/medewitt/tidyqwi/issues">https://github.com/medewitt/tidyqwi/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, covr, knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-05-04 09:58:27 UTC; michael</td>
</tr>
<tr>
<td>Author:</td>
<td>Michael DeWitt <a href="https://orcid.org/0000-0001-8940-1967"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Mona Ahmadiani <a href="https://orcid.org/0000-0002-1269-5685"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Adam S. Hyde <a href="https://orcid.org/0000-0003-1205-0032"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-05-04 10:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic++25+3E+25">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='add_qwi_labels'>add_qwi_labels</h2><span id='topic+add_qwi_labels'></span>

<h3>Description</h3>

<p>This function add labels to a 'qwi' object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_qwi_labels(df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_qwi_labels_+3A_df">df</code></td>
<td>
<p>an object with a class of 'qwi'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame with formatted column names and types
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(tidyqwi)

# Add labels
labelled_nc &lt;- add_qwi_labels(nc_qwi)

# Check the label for the data
attr(labelled_nc[["Emp"]], "label")




</code></pre>

<hr>
<h2 id='check_census_api_call'>A helper function to help parse API calls from the census</h2><span id='topic+check_census_api_call'></span>

<h3>Description</h3>

<p>The function verifies that API call was sucessful.
If the call was not sucessful, this function passes the
message received from the US Census API for further troublshooting,
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_census_api_call(call)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_census_api_call_+3A_call">call</code></td>
<td>
<p>a returned call from the US Census API</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a string vector with the message from the US Census API
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(tidyqwi)
library(httr)
# A single call to the API without an API Key
url &lt;- "api.census.gov/data/timeseries/qwi/sa?get=Emp&amp;for=county:198&amp;key=NOKEY"
single_call &lt;- httr::GET(url)

# Because a non valid API key was specified an message will be returned

check_census_api_call(single_call)


</code></pre>

<hr>
<h2 id='converted_fips'>A function to check if a valid state number or fips is passed</h2><span id='topic+converted_fips'></span>

<h3>Description</h3>

<p>The function verifies if a valid FIPS code was passed and
converts it to a unified standard for internal use.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>converted_fips(fips)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="converted_fips_+3A_fips">fips</code></td>
<td>
<p>the state abbreviation or fips code vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>States Abbreviations or FIPs as FIP character strings
</p>
<p>a vector with the State FIPS code
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(tidyqwi)

converted_fips(37)
converted_fips("37")
converted_fips("NC")
converted_fips("nc")



</code></pre>

<hr>
<h2 id='get_qwi'>Retrieve the Quarterly Workforce Indcator Data</h2><span id='topic+get_qwi'></span>

<h3>Description</h3>

<p>The purpose of this function is to retrive firm information from the
US Census' Quarterly Workforce Indicator API. These data can be retrieved with by
specifying the states, the quarters, the years, and additional detail. This function can
accept multiple states, years and quarters. This makes the data retrieval easier and stay
inside of the US Census' limits on the API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_qwi(
  years,
  variables = NULL,
  quarters = c(1, 2, 3, 4),
  industry_level = 2,
  states,
  endpoint = "sa",
  all_groups = TRUE,
  owner_code = TRUE,
  geography = "cbsa",
  seasonadj = "U",
  apikey = NULL,
  processing = "sequential"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_qwi_+3A_years">years</code></td>
<td>
<p>years to fetch (e.g. 2010, or c(2010, 2011))</p>
</td></tr>
<tr><td><code id="get_qwi_+3A_variables">variables</code></td>
<td>
<p>the variables you wish to fetch. Default is all.</p>
</td></tr>
<tr><td><code id="get_qwi_+3A_quarters">quarters</code></td>
<td>
<p>The quarters to fetch (e.g. c(1,2,3,4)) Default is all</p>
</td></tr>
<tr><td><code id="get_qwi_+3A_industry_level">industry_level</code></td>
<td>
<p>Industries to fetch. Default is all level 2</p>
</td></tr>
<tr><td><code id="get_qwi_+3A_states">states</code></td>
<td>
<p>state fips code to fetch</p>
</td></tr>
<tr><td><code id="get_qwi_+3A_endpoint">endpoint</code></td>
<td>
<p>US Census endpoint designation. One of &quot;sa&quot; for Sex * Age, &quot;se&quot; for Sex by Education and &quot;rh&quot; for Race/Ethnicity</p>
</td></tr>
<tr><td><code id="get_qwi_+3A_all_groups">all_groups</code></td>
<td>
<p>default to true</p>
</td></tr>
<tr><td><code id="get_qwi_+3A_owner_code">owner_code</code></td>
<td>
<p>firm owner code</p>
</td></tr>
<tr><td><code id="get_qwi_+3A_geography">geography</code></td>
<td>
<p>the US Census geography granuality (one of cbsa or county)</p>
</td></tr>
<tr><td><code id="get_qwi_+3A_seasonadj">seasonadj</code></td>
<td>
<p>seasonal adjustment factor (one of &quot;U&quot; or &quot;S&quot;)</p>
</td></tr>
<tr><td><code id="get_qwi_+3A_apikey">apikey</code></td>
<td>
<p>your US Census API Key</p>
</td></tr>
<tr><td><code id="get_qwi_+3A_processing">processing</code></td>
<td>
<p>the processing strategy (default = &quot;sequential&quot;)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the desired data from the US Census's Quaterly Workforce API as a tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(tidyqwi)

# One state, one year
nc_qwi &lt;- get_qwi(years = "2010",
               states = "11",
               geography = "county",
               apikey =  census_key,
               endpoint = "rh",
               variables = c("sEmp", "Emp"), all_groups = FALSE,
               industry_level = "2", processing = "sequential")

# Multiple states. multiple years
qwi_multi_year &lt;- get_qwi(years = c("2010", "2011", "2012"),
               states = c("NC", "SC"),
               geography = "county",
               apikey =  census_key,
               endpoint = "rh",
               variables = c("sEmp", "Emp"), all_groups = FALSE,
               industry_level = "2", processing = "sequential")

## End(Not run)

</code></pre>

<hr>
<h2 id='industry_labels'>Industry Labels</h2><span id='topic+industry_labels'></span>

<h3>Description</h3>

<p>These data are the industry labels specified by the
United States Census Bureau
</p>


<h3>Usage</h3>

<pre><code class='language-R'>industry_labels
</code></pre>


<h3>Format</h3>

<p>a dataframe with 433 rows and 3 columns:
</p>

<dl>
<dt>industry</dt><dd><p>Industry Numeric Code</p>
</dd>
<dt>label</dt><dd><p>Description of Industry Level</p>
</dd>
<dt>ind_level</dt><dd><p>Industry Level</p>
</dd>
</dl>
<p>...

</p>


<h3>Source</h3>

<p><a href="https://lehd.ces.census.gov/data/schema/latest/label_industry.csv">https://lehd.ces.census.gov/data/schema/latest/label_industry.csv</a>
</p>

<hr>
<h2 id='nc_qwi'>Example Data Set</h2><span id='topic+nc_qwi'></span>

<h3>Description</h3>

<p>These data represent an example returned query for NC for 2010
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc_qwi
</code></pre>


<h3>Format</h3>

<p>a dataframe with 3244 rows and 44 columns:
</p>

<hr>
<h2 id='owner_codes'>Owner  Codes</h2><span id='topic+owner_codes'></span>

<h3>Description</h3>

<p>Owner  Codes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>owner_codes
</code></pre>


<h3>Format</h3>

<p>a dataframe with 3 rows and 2 columns:
</p>

<dl>
<dt>ownercode</dt><dd><p>ownercode</p>
</dd>
<dt>label</dt><dd><p>label</p>
</dd>
</dl>
<p>...

</p>


<h3>Source</h3>

<p><a href="https://lehd.ces.census.gov/data/schema/latest/label_ownercode.csv">https://lehd.ces.census.gov/data/schema/latest/label_ownercode.csv</a>
</p>

<hr>
<h2 id='parse_qwi_message'>parse_qwi</h2><span id='topic+parse_qwi_message'></span>

<h3>Description</h3>

<p>An internally used function to parse the returned API call.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_qwi_message(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parse_qwi_message_+3A_x">x</code></td>
<td>
<p>a returned call response from the US Census QWI API</p>
</td></tr>
</table>

<hr>
<h2 id='qwi_var_names'>QWI Variable Names</h2><span id='topic+qwi_var_names'></span>

<h3>Description</h3>

<p>These data represent the different variable types available
from the QWI API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qwi_var_names
</code></pre>


<h3>Format</h3>

<p>a dataframe with 83 rows and 9 columns:
</p>

<dl>
<dt>name</dt><dd><p>state name</p>
</dd>
<dt>label</dt><dd><p>state fips code</p>
</dd>
<dt>concept</dt><dd><p>state abbreviation</p>
</dd>
<dt>required</dt><dd><p>requirements</p>
</dd>
<dt>attributes</dt><dd><p>details of attributes</p>
</dd>
<dt>limit</dt><dd><p>limit</p>
</dd>
<dt>predicate type</dt><dd><p>predicate type</p>
</dd>
<dt>group</dt><dd><p>group level</p>
</dd>
<dt>values</dt><dd><p>values</p>
</dd>
</dl>
<p>...

</p>


<h3>Source</h3>

<p><a href="https://api.census.gov/data/timeseries/qwi/se/variables.html">https://api.census.gov/data/timeseries/qwi/se/variables.html</a>
</p>

<hr>
<h2 id='show_condition'>show_condition</h2><span id='topic+show_condition'></span>

<h3>Description</h3>

<p>show_condition
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_condition(code)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show_condition_+3A_code">code</code></td>
<td>
<p>the code whose message you wish to interpret</p>
</td></tr>
</table>

<hr>
<h2 id='state_info'>State Data (FIPS, Abbreviations, etc)</h2><span id='topic+state_info'></span>

<h3>Description</h3>

<p>State Data (FIPS, Abbreviations, etc)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>state_info
</code></pre>


<h3>Format</h3>

<p>a dataframe with 51 rows and 3 columns:
</p>

<dl>
<dt>name</dt><dd><p>state name</p>
</dd>
<dt>state_fips</dt><dd><p>state fips code</p>
</dd>
<dt>state_abbreviation</dt><dd><p>state abbreviation</p>
</dd>
</dl>
<p>...

</p>


<h3>Source</h3>

<p><a href="https://www.census.gov/library/reference/code-lists/ansi.html">https://www.census.gov/library/reference/code-lists/ansi.html</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
