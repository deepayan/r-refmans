<!DOCTYPE html><html lang="en-US"><head><title>Help for package nettskjemar</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {nettskjemar}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#nettskjemar-package'><p>nettskjemar: Connect to the 'nettskjema.no' API of the University of Oslo</p></a></li>
<li><a href='#codebook'><p>Constructor for nettskjema codebook</p></a></li>
<li><a href='#get_raw_codebook'><p>Get the raw codebook</p></a></li>
<li><a href='#has_codebook'><p>Check if form has codebook</p></a></li>
<li><a href='#ns_add_labels'><p>Add Labels to Dataset</p></a></li>
<li><a href='#ns_alter_checkbox'><p>Alter checkbox matrix variables in a dataset</p></a></li>
<li><a href='#ns_api_docs'><p>Access Nettskjema API Documentation</p></a></li>
<li><a href='#ns_auth_token'><p>Retrieve access token</p></a></li>
<li><a href='#ns_create_client'><p>Create a Nettskjema Client</p></a></li>
<li><a href='#ns_get_attachment'><p>Save Nettskjema attachments to file</p></a></li>
<li><a href='#ns_get_codebook'><p>Get codebook for a form</p></a></li>
<li><a href='#ns_get_data'><p>Get data from a form</p></a></li>
<li><a href='#ns_get_form_attachments'><p>Retrieve all attachments associated with a Nettskjema</p></a></li>
<li><a href='#ns_get_form_reports'><p>Download files associated with a form</p></a></li>
<li><a href='#ns_get_forms'><p>Get all forms you have access to</p></a></li>
<li><a href='#ns_get_me'><p>Information about the current user</p></a></li>
<li><a href='#ns_get_meta'><p>Get metadata for a form</p></a></li>
<li><a href='#ns_get_submission'><p>Get an individual submission answer</p></a></li>
<li><a href='#ns_get_submission_attachments'><p>Get Nettskjema attachments for a submission</p></a></li>
<li><a href='#ns_list_form_attachments'><p>Retrieve all attachments associated with a Nettskjema</p></a></li>
<li><a href='#ns_list_submission_attachments'><p>List Nettskjema attachments for a submission</p></a></li>
<li><a href='#ns_req'><p>Basic Nettskjema httr2 request</p></a></li>
<li><a href='#ns_write_codebook'><p>Write codebook to file</p></a></li>
<li><a href='#ns_write_meta'><p>Write meta-data to file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Connect to the 'nettskjema.no' API of the University of Oslo</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Enables users to retrieve data, meta-data, and codebooks from
    <a href="https://nettskjema.no/">https://nettskjema.no/</a>. The data from the API is richer than from
    the online data portal. Mowinckel (2021) &lt;<a href="https://doi.org/10.5281%2Fzenodo.4745481">doi:10.5281/zenodo.4745481</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/CAPRO-UiO/nettskjemar">https://github.com/CAPRO-UiO/nettskjemar</a>,
<a href="https://zenodo.org/badge/latestdoi/206264675">https://zenodo.org/badge/latestdoi/206264675</a>,
<a href="https://github.com/capro-uio/nettskjemar">https://github.com/capro-uio/nettskjemar</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/capro-uio/nettskjemar/issues">https://github.com/capro-uio/nettskjemar/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, httr2, jsonlite, tools</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, fs, haven, labelled, knitr, rmarkdown, spelling,
testthat (&ge; 2.1.0), vcr (&ge; 0.6.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-03-18 14:00:22 UTC; athanasm</td>
</tr>
<tr>
<td>Author:</td>
<td>Athanasia Mo Mowinckel
    <a href="https://orcid.org/0000-0002-5756-0223"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Trym Nohr Fjørtoft
    <a href="https://orcid.org/0000-0002-7654-4587"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Athanasia Mo Mowinckel &lt;a.m.mowinckel@psykologi.uio.no&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-18 15:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='nettskjemar-package'>nettskjemar: Connect to the 'nettskjema.no' API of the University of Oslo</h2><span id='topic+nettskjemar'></span><span id='topic+nettskjemar-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Enables users to retrieve data, meta-data, and codebooks from <a href="https://nettskjema.no/">https://nettskjema.no/</a>. The data from the API is richer than from the online data portal. Mowinckel (2021) <a href="https://doi.org/10.5281/zenodo.4745481">doi:10.5281/zenodo.4745481</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Athanasia Mo Mowinckel <a href="mailto:a.m.mowinckel@psykologi.uio.no">a.m.mowinckel@psykologi.uio.no</a> (<a href="https://orcid.org/0000-0002-5756-0223">ORCID</a>)
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Trym Nohr Fjørtoft <a href="mailto:t.n.fjortoft@arena.uio.no">t.n.fjortoft@arena.uio.no</a> (<a href="https://orcid.org/0000-0002-7654-4587">ORCID</a>) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/CAPRO-UiO/nettskjemar">https://github.com/CAPRO-UiO/nettskjemar</a>
</p>
</li>
<li> <p><a href="https://zenodo.org/badge/latestdoi/206264675">https://zenodo.org/badge/latestdoi/206264675</a>
</p>
</li>
<li> <p><a href="https://github.com/capro-uio/nettskjemar">https://github.com/capro-uio/nettskjemar</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/capro-uio/nettskjemar/issues">https://github.com/capro-uio/nettskjemar/issues</a>
</p>
</li></ul>


<hr>
<h2 id='codebook'>Constructor for nettskjema codebook</h2><span id='topic+codebook'></span>

<h3>Description</h3>

<p>Function works on meta-data downloaded from a form.
It will return a data.frame in long format with
meta-data information from a specific nettskjema form.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>codebook(meta)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="codebook_+3A_meta">meta</code></td>
<td>
<p>form meta-data from <code><a href="#topic+ns_get_meta">ns_get_meta</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>long format tibble with meta-data for a specific nettskjema
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
meta_110000 &lt;- ns_get_meta(110000)
codebook(meta_110000)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_raw_codebook'>Get the raw codebook</h2><span id='topic+get_raw_codebook'></span>

<h3>Description</h3>

<p>The raw codebook is a list
of answers and questions with
unique ids for both, and the text associated
with them. This information can be retrieved
from the raw nettskjema data. This can be useful
if the nettskjema submission data has been returned
with <code>asis = TRUE</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_raw_codebook(form_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_raw_codebook_+3A_form_id">form_id</code></td>
<td>
<p>integer. Number of the form to retrieve</p>
</td></tr>
</table>


<h3>Value</h3>

<p>long format tibble with meta-data for a specific nettskjema
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
form_id &lt;- 100000
get_raw_codebook(form_id)

Or if the token is saved in a non-standard name
get_raw_codebook(form_id)

## End(Not run)
</code></pre>

<hr>
<h2 id='has_codebook'>Check if form has codebook</h2><span id='topic+has_codebook'></span>

<h3>Description</h3>

<p>Codebook is by default turned off
in Nettskjema, but best practices in handling
data is to have it on. This function
checks if the codebook of a form has been activated
or not
</p>


<h3>Usage</h3>

<pre><code class='language-R'>has_codebook(form_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="has_codebook_+3A_form_id">form_id</code></td>
<td>
<p>integer. Number of the form to retrieve</p>
</td></tr>
</table>


<h3>Value</h3>

<p>logical is codebook is turned on
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
has_codebook(110000)

## End(Not run)
</code></pre>

<hr>
<h2 id='ns_add_labels'>Add Labels to Dataset</h2><span id='topic+ns_add_labels'></span>

<h3>Description</h3>

<p>The 'ns_add_labels' function applies
labels to variables in a dataset
based on a provided codebook. It
assigns variable labels, value
labels,
and metadata required for the
&quot;ns-data&quot; class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_add_labels(data, codebook)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ns_add_labels_+3A_data">data</code></td>
<td>
<p>data from <code>ns_get_data</code></p>
</td></tr>
<tr><td><code id="ns_add_labels_+3A_codebook">codebook</code></td>
<td>
<p>object from
<code>ns_get_codebook</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the same
structure as 'data', but with
variable and value labels applied.
The resulting object is assigned
the class '&quot;ns-data&quot;'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data &lt;- ns_get_data(11000)
cb &lt;- ns_get_codebook(11000)
labeled_data &lt;- ns_add_labels(data, cb)

## End(Not run)

</code></pre>

<hr>
<h2 id='ns_alter_checkbox'>Alter checkbox matrix variables in a dataset</h2><span id='topic+ns_alter_checkbox'></span>

<h3>Description</h3>

<p>This function processes checkbox matrix
variables in a dataset, transforming their
representations into one of the specified formats.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_alter_checkbox(data, to = c("character", "list"), sep = ",", cb = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ns_alter_checkbox_+3A_data">data</code></td>
<td>
<p>A 'data.frame' containing the
dataset to modify.</p>
</td></tr>
<tr><td><code id="ns_alter_checkbox_+3A_to">to</code></td>
<td>
<p>A character string specifying
the output format for checkbox matrix
variables. Must be one of &quot;character&quot; or &quot;list&quot;.</p>
</td></tr>
<tr><td><code id="ns_alter_checkbox_+3A_sep">sep</code></td>
<td>
<p>A character string used as a separator
when 'to = &quot;character&quot;'. Defaults to '&quot;,&quot;'.</p>
</td></tr>
<tr><td><code id="ns_alter_checkbox_+3A_cb">cb</code></td>
<td>
<p>An optional codebook ('data.frame') to
identify checkbox matrix variables. If 'NULL',
the codebook is generated using 'ns_get_codebook()'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A modified 'data.frame' with processed
checkbox matrix variables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dt &lt;- ns_get_data(11000)
ns_alter_checkbox(data = dt, to = "list")
ns_alter_checkbox(data = dt, to = "character", sep = ";")

## End(Not run)
</code></pre>

<hr>
<h2 id='ns_api_docs'>Access Nettskjema API Documentation</h2><span id='topic+ns_api_docs'></span>

<h3>Description</h3>

<p>Opens the browser to display the API documentation
for the Nettskjema PI.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_api_docs()
</code></pre>


<h3>Value</h3>

<p>None. Opens a browser window.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ns_api_docs()

## End(Not run)
</code></pre>

<hr>
<h2 id='ns_auth_token'>Retrieve access token</h2><span id='topic+ns_auth_token'></span>

<h3>Description</h3>

<p>After creating a client in Nettskjema,
this function will retrieve the access
token needed for the remaining processes
in the package. Automatically caches the
token for more efficient API usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_auth_token(
  client_id = Sys.getenv("NETTSKJEMA_CLIENT_ID"),
  client_secret = Sys.getenv("NETTSKJEMA_CLIENT_SECRET"),
  cache = TRUE,
  cache_path = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ns_auth_token_+3A_client_id">client_id</code></td>
<td>
<p>Character. Default assumes
this is stored in .Renviron as &quot;ns_CLIENT_ID&quot;</p>
</td></tr>
<tr><td><code id="ns_auth_token_+3A_client_secret">client_secret</code></td>
<td>
<p>Character. Default assumes
this is stored in .Renviron as &quot;ns_CLIENT_SECRET&quot;</p>
</td></tr>
<tr><td><code id="ns_auth_token_+3A_cache">cache</code></td>
<td>
<p>Logical. Should the token be cached?</p>
</td></tr>
<tr><td><code id="ns_auth_token_+3A_cache_path">cache_path</code></td>
<td>
<p>Character. File path to where
the token should be stored. Defaults to system
cache directory.</p>
</td></tr>
</table>

<hr>
<h2 id='ns_create_client'>Create a Nettskjema Client</h2><span id='topic+ns_create_client'></span>

<h3>Description</h3>

<p>Opens the Nettskjema client creation URL in the default web browser.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_create_client()
</code></pre>


<h3>Details</h3>

<p>Use this function to create a new client for accessing Nettskjema APIs.
</p>


<h3>Value</h3>

<p>NULL. Opens the client creation page in a browser.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ns_create_client()

## End(Not run)
</code></pre>

<hr>
<h2 id='ns_get_attachment'>Save Nettskjema attachments to file</h2><span id='topic+ns_get_attachment'></span>

<h3>Description</h3>

<p>The Nettskjema forms has an option
to upload attachments with forms.
These can be retrieved by this function.
Recommended workflow is to first call
<code><a href="#topic+ns_list_submission_attachments">ns_list_submission_attachments</a></code>,
and use the output of this to pass along
to the function. This function is called
by <code><a href="#topic+ns_get_form_attachments">ns_get_form_attachments</a></code>,
but you can use it to define your own output
file names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_get_attachment(attachment_id, path = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ns_get_attachment_+3A_attachment_id">attachment_id</code></td>
<td>
<p>integer. Unique ID of attachment, as found in the submission data.</p>
</td></tr>
<tr><td><code id="ns_get_attachment_+3A_path">path</code></td>
<td>
<p>Character. Location to save the file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>httr2-response. saves attachment to file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#submission_id &lt;- c(22222, 1232, 21555)
#attach_dt &lt;- ns_list_submission_attachments(submission_id)
#ns_save_attachment(path = attach_dt$path, output = attach_dt$standardized)

## End(Not run)
</code></pre>

<hr>
<h2 id='ns_get_codebook'>Get codebook for a form</h2><span id='topic+ns_get_codebook'></span>

<h3>Description</h3>

<p>With the given API token, will retrieve
a list of all the forms you have access to
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_get_codebook(form_id, asis = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ns_get_codebook_+3A_form_id">form_id</code></td>
<td>
<p>integer. Number of the form to retrieve</p>
</td></tr>
<tr><td><code id="ns_get_codebook_+3A_asis">asis</code></td>
<td>
<p>logical. Whether to return the raw content from nettskjema. Default is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of class ns_meta_data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
codebook_110000 &lt;- ns_get_codebook(110000)

## End(Not run)
</code></pre>

<hr>
<h2 id='ns_get_data'>Get data from a form</h2><span id='topic+ns_get_data'></span><span id='topic+ns_get_submissions'></span>

<h3>Description</h3>

<p>This function connects to a specific form and fetches all answers.
The responses are placed in a data.frame for easy use.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_get_data(form_id, type = NULL)

ns_get_submissions(form_id, type = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ns_get_data_+3A_form_id">form_id</code></td>
<td>
<p>integer. Number of the form to retrieve</p>
</td></tr>
<tr><td><code id="ns_get_data_+3A_type">type</code></td>
<td>
<p>Character or NULL. One of either &quot;original&quot; or &quot;long&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>


<dl>
<dt>&quot;original&quot;</dt><dd><p> - Returns data in the same tabular format
as delivered by Nettskjema.</p>
</dd>
<dt>&quot;long&quot;</dt><dd><p> - Returns the data in tall format, where
there are multiple rows per participant (one per question)
and each choice is timestamped.</p>
</dd>
</dl>



<h3>Value</h3>

<p>data.frame
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>ns_get_submissions()</code>: Alternative function name, does the same.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Retrieve all data
data_110000 &lt;- ns_get_data(110000)


## End(Not run)
</code></pre>

<hr>
<h2 id='ns_get_form_attachments'>Retrieve all attachments associated with a Nettskjema</h2><span id='topic+ns_get_form_attachments'></span>

<h3>Description</h3>

<p>Some Nettskjema have fields for attachments. These
can be downloaded through this function. There
are two naming convention that may be used for the
saved files' names. See output of
<code><a href="#topic+ns_list_submission_attachments">ns_list_submission_attachments</a></code> for idea
of the names used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_get_form_attachments(
  form_id,
  filenames = c("standardized", "original"),
  output_dir = "."
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ns_get_form_attachments_+3A_form_id">form_id</code></td>
<td>
<p>integer. Number of the form to retrieve</p>
</td></tr>
<tr><td><code id="ns_get_form_attachments_+3A_filenames">filenames</code></td>
<td>
<p>Character of either 'standardized'
(default) or 'original' indicating which file names to use.</p>
</td></tr>
<tr><td><code id="ns_get_form_attachments_+3A_output_dir">output_dir</code></td>
<td>
<p>directory to output the files to</p>
</td></tr>
</table>


<h3>Details</h3>

<p>filenames types
</p>

<dl>
<dt>&quot;original&quot;</dt><dd><p> - uses file names are they were
uploaded to Nettskjema</p>
</dd>
<dt>&quot;standardized&quot;</dt><dd><p> - creates file names based on
the submission id and a counter number to uniquely
create file names for each submission (in case there
are more than one attachment)</p>
</dd>
</dl>



<h3>Value</h3>

<p>invisible named logical if the file was saved successfully
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
form_id &lt;- 1100000
ns_get_form_attachments(form_id)

# save files to specific folder
ns_get_form_attachments(form_id, output_dir = "~/Desktop")

# save using original file names
ns_get_form_attachments(form_id, filenames = "original")


## End(Not run)
</code></pre>

<hr>
<h2 id='ns_get_form_reports'>Download files associated with a form</h2><span id='topic+ns_get_form_reports'></span>

<h3>Description</h3>

<p>Each Nettskjema form has several
auxiliary forms that can be retrieved.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_get_form_reports(
  form_id,
  type = c("csv", "excel", "spss"),
  path = report_path(form_id, type)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ns_get_form_reports_+3A_form_id">form_id</code></td>
<td>
<p>integer. Number of the form to retrieve</p>
</td></tr>
<tr><td><code id="ns_get_form_reports_+3A_type">type</code></td>
<td>
<p>Character. Either &quot;csv&quot;, &quot;excel&quot; or
&quot;spss&quot;.</p>
</td></tr>
<tr><td><code id="ns_get_form_reports_+3A_path">path</code></td>
<td>
<p>Character. Full path to where the
downloaded file should be saved. Defaults to
current directory with correct extension.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>httr2-response
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ns_get_form_reports(10009, type="csv")
ns_get_form_reports(10009, type="excel")
ns_get_form_reports(10009, type="spss")
ns_get_form_reports(
  10009,
  type="spss",
  path = "~/Desktop/10009/form.sav"
)

## End(Not run)
</code></pre>

<hr>
<h2 id='ns_get_forms'>Get all forms you have access to</h2><span id='topic+ns_get_forms'></span>

<h3>Description</h3>

<p>All users have access to specific
forms, and this function uses the
token provided to check what the
current user has access to.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_get_forms(asis = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ns_get_forms_+3A_asis">asis</code></td>
<td>
<p>logical. Whether to return the raw content from nettskjema. Default is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame, if <code>asis = TRUE</code> returns a list
</p>

<hr>
<h2 id='ns_get_me'>Information about the current user</h2><span id='topic+ns_get_me'></span>

<h3>Description</h3>

<p>Based on login credential, returns
information on the user accessing the
Nettskjema PI
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_get_me()
</code></pre>


<h3>Value</h3>

<p>list of information
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ns_get_me()

## End(Not run)
</code></pre>

<hr>
<h2 id='ns_get_meta'>Get metadata for a form</h2><span id='topic+ns_get_meta'></span>

<h3>Description</h3>

<p>With the given API token, will retrieve
the meta-data connected to a form.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_get_meta(form_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ns_get_meta_+3A_form_id">form_id</code></td>
<td>
<p>integer. Number of the form to retrieve</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of class ns_meta_data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
meta_110000 &lt;- ns_get_meta(110000)


## End(Not run)
</code></pre>

<hr>
<h2 id='ns_get_submission'>Get an individual submission answer</h2><span id='topic+ns_get_submission'></span>

<h3>Description</h3>

<p>Get an individual submission answer
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_get_submission(submission_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ns_get_submission_+3A_submission_id">submission_id</code></td>
<td>
<p>integer. Unique identifier of a specific Nettskjema submission.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of all answers
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ns_get_submission(1100)

## End(Not run)
</code></pre>

<hr>
<h2 id='ns_get_submission_attachments'>Get Nettskjema attachments for a submission</h2><span id='topic+ns_get_submission_attachments'></span>

<h3>Description</h3>

<p>Each unique submission ID in Nettskjema
may have some attachments. This function
saves all attachments associated with a
submission ID.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_get_submission_attachments(
  submission_id,
  filenames = "standardized",
  output_dir = paste0("./", submission_id)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ns_get_submission_attachments_+3A_submission_id">submission_id</code></td>
<td>
<p>integer. Unique identifier of a specific Nettskjema submission.</p>
</td></tr>
<tr><td><code id="ns_get_submission_attachments_+3A_filenames">filenames</code></td>
<td>
<p>Character of either 'standardized'
(default) or 'original' indicating which file names to use.</p>
</td></tr>
<tr><td><code id="ns_get_submission_attachments_+3A_output_dir">output_dir</code></td>
<td>
<p>directory to output the files to</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame with information on attachments
available, files written to path
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
submission_id &lt;- 22222
ns_get_submission_attachments(submission_id)
ns_get_submission_attachments(submission_id, "original")


## End(Not run)
</code></pre>

<hr>
<h2 id='ns_list_form_attachments'>Retrieve all attachments associated with a Nettskjema</h2><span id='topic+ns_list_form_attachments'></span>

<h3>Description</h3>

<p>Some Nettskjema have fields for attachments. These
can be downloaded through this function. There
are two naming convention that may be used for the
saved files' names. See output of
<code><a href="#topic+ns_list_submission_attachments">ns_list_submission_attachments</a></code> for idea
of the names used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_list_form_attachments(form_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ns_list_form_attachments_+3A_form_id">form_id</code></td>
<td>
<p>integer. Number of the form to retrieve</p>
</td></tr>
</table>


<h3>Details</h3>

<p>filenames types
</p>

<dl>
<dt>&quot;original&quot;</dt><dd><p> - uses file names are they were
uploaded to Nettskjema</p>
</dd>
<dt>&quot;standardized&quot;</dt><dd><p> - creates file names based on
the submission id and a counter number to uniquely
create file names for each submission (in case there
are more than one attachment)</p>
</dd>
</dl>



<h3>Value</h3>

<p>invisible named logical if the file was saved successfully
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
form_id &lt;- 1100000
ns_list_form_attachments(form_id)


## End(Not run)
</code></pre>

<hr>
<h2 id='ns_list_submission_attachments'>List Nettskjema attachments for a submission</h2><span id='topic+ns_list_submission_attachments'></span>

<h3>Description</h3>

<p>Each unique submission ID in Nettskjema
may have some attachments. These can be listed
using this function, which will provide the
information on where in the Nettskjema API the
files are located, their original file names,
and a suggested standardized file names for
tidier data output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_list_submission_attachments(submission_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ns_list_submission_attachments_+3A_submission_id">submission_id</code></td>
<td>
<p>integer. Unique identifier of a specific Nettskjema submission.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame with information on attachments available.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
submission_id &lt;- 22222
ns_list_submission_attachments(submission_id)


## End(Not run)
</code></pre>

<hr>
<h2 id='ns_req'>Basic Nettskjema httr2 request</h2><span id='topic+ns_req'></span>

<h3>Description</h3>

<p>Sets the API url and access token.
This is used for almost all the
functionality in this package. If
you want to use endpoints not yet
covered by functions in the package,
this is the basis function you can
build from.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_req(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ns_req_+3A_...">...</code></td>
<td>
<p>arguments passed to <code>ns_auth_token</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>httr2</code> request
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ns_req() |&gt;
 httr2::req_url_path_append("form", "me") |&gt;
 httr2::req_perform() |&gt;
 httr2::resp_body_json()

## End(Not run)
</code></pre>

<hr>
<h2 id='ns_write_codebook'>Write codebook to file</h2><span id='topic+ns_write_codebook'></span><span id='topic+ns_write_codebook.default'></span><span id='topic+ns_write_codebook.ns_codebook_raw'></span><span id='topic+ns_write_codebook.ns_codebook'></span>

<h3>Description</h3>

<p>Save codebook information to a
file for safe keeping. Depending
on the type of codebook (raw or tidy)
the file will either be stored as a
json-file through <code><a href="jsonlite.html#topic+write_json">write_json</a></code>
or a text table through <code><a href="utils.html#topic+write.table">write.table</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_write_codebook(codebook, path, ...)

## Default S3 method:
ns_write_codebook(codebook, path, ...)

## S3 method for class 'ns_codebook_raw'
ns_write_codebook(codebook, path, ...)

## S3 method for class 'ns_codebook'
ns_write_codebook(codebook, path, sep = "\t", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ns_write_codebook_+3A_codebook">codebook</code></td>
<td>
<p>object of class ns_codebook</p>
</td></tr>
<tr><td><code id="ns_write_codebook_+3A_path">path</code></td>
<td>
<p>filename or path</p>
</td></tr>
<tr><td><code id="ns_write_codebook_+3A_...">...</code></td>
<td>
<p>arguments to
<code><a href="jsonlite.html#topic+write_json">write_json</a></code> or
<code><a href="utils.html#topic+write.table">write.table</a></code></p>
</td></tr>
<tr><td><code id="ns_write_codebook_+3A_sep">sep</code></td>
<td>
<p>character. If writing text table, column delimiter.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Given the two types of codebooks, writes different
types of files.
</p>

<dl>
<dt>codebook</dt><dd><p> - writes a tab-separated table</p>
</dd>
<dt>codebook_raw</dt><dd><p> - writes a json-file</p>
</dd>
</dl>



<h3>Value</h3>

<p>no return value. Writes a file to path.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
form_id &lt;- 1100000
my_cb &lt;- ns_get_codebook(form_id)
ns_write_codebook(my_cb, "my/path/codebook_110000.txt")

## End(Not run)
</code></pre>

<hr>
<h2 id='ns_write_meta'>Write meta-data to file</h2><span id='topic+ns_write_meta'></span><span id='topic+ns_write_meta.default'></span><span id='topic+ns_write_meta.ns_meta'></span>

<h3>Description</h3>

<p>Save meta-data information to a
file for safe keeping. The function
saves the data in json-format, which
best preserves the information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ns_write_meta(meta, path, ...)

## Default S3 method:
ns_write_meta(meta, path, ...)

## S3 method for class 'ns_meta'
ns_write_meta(meta, path, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ns_write_meta_+3A_meta">meta</code></td>
<td>
<p>object of class ns_meta class</p>
</td></tr>
<tr><td><code id="ns_write_meta_+3A_path">path</code></td>
<td>
<p>file name or path</p>
</td></tr>
<tr><td><code id="ns_write_meta_+3A_...">...</code></td>
<td>
<p>other arguments to <code><a href="jsonlite.html#topic+write_json">write_json</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>no return value. Writes a file to path.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
form_id &lt;- 1100000
my_meta &lt;- ns_get_meta(form_id)
ns_write_meta(my_meta, "my/path/meta_110000.json")

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
