<!DOCTYPE html><html><head><title>Help for package argoFloats</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {argoFloats}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#argoFloats'><p>A Package for Processing Argo Float Profiles</p></a></li>
<li><a href='#[[,argoFloats-method'><p>Look up a Value Within an argoFloats Object</p></a></li>
<li><a href='#applyQC'><p>Apply Quality Control Flags</p></a></li>
<li><a href='#argoDefaultDestdir'><p>Get Default Values</p></a></li>
<li><a href='#argoFloats-class'><p>Base Class for argoFloats Objects</p></a></li>
<li><a href='#argoFloatsClearCache'><p>Clear the Cache</p></a></li>
<li><a href='#argoFloatsDebug'><p>Print Debugging Information</p></a></li>
<li><a href='#argoFloatsGetFromCache'><p>Get an Item From The Cache</p></a></li>
<li><a href='#argoFloatsIsCached'><p>Check Whether an Item is Cached</p></a></li>
<li><a href='#argoFloatsListCache'><p>List Items in the Cache</p></a></li>
<li><a href='#argoFloatsStoreInCache'><p>Store an Item in the Cache</p></a></li>
<li><a href='#argoFloatsWhenCached'><p>Check When an Item was Cached</p></a></li>
<li><a href='#D4900785_048.nc'><p>Sample Argo File (Delayed Core Data)</p></a></li>
<li><a href='#downloadWithRetries'><p>Download and Cache a Dataset</p></a></li>
<li><a href='#getIndex'><p>Get an Index of Available Argo Float Profiles</p></a></li>
<li><a href='#getProfileFromUrl'><p>Get Data for an Argo Float Profile</p></a></li>
<li><a href='#getProfiles'><p>Get &quot;cycles&quot;/&quot;trajectory&quot; Files Named in an argoFloats Index</p></a></li>
<li><a href='#hexToBits'><p>Convert Hexadecimal Digit to Integer Vector</p></a></li>
<li><a href='#index'><p>A Sample Index of Profiles</p></a></li>
<li><a href='#indexBgc'><p>A Sample Index of Biogeochemical-Argo Profiles</p></a></li>
<li><a href='#indexDeep'><p>A Sample Index of Deep Argo</p></a></li>
<li><a href='#indexSynthetic'><p>A Sample Index of Synthetic Profiles</p></a></li>
<li><a href='#mapApp'><p>Interactive App For Viewing Argo Float Positions</p></a></li>
<li><a href='#merge,argoFloats-method'><p>Merge argoFloats Indices</p></a></li>
<li><a href='#plot,argoFloats-method'><p>Plot an argoFloats Object</p></a></li>
<li><a href='#plotArgoTS'><p>Plot a TS diagram for an argoFloats object</p></a></li>
<li><a href='#R3901602_163.nc'><p>Sample Argo File (Real-Time Core Data)</p></a></li>
<li><a href='#readProfiles'><p>Read Argo Profiles From Local Files</p></a></li>
<li><a href='#SD5903586_001.nc'><p>Sample Argo File (Delayed Synthetic Data)</p></a></li>
<li><a href='#show,argoFloats-method'><p>Show Information About argoFloats Object</p></a></li>
<li><a href='#showQCTests'><p>Show Real-Time QC Test Results For an Argo Object</p></a></li>
<li><a href='#SR2902204_131.nc'><p>Sample Argo File (Real-Time Synthetic Data)</p></a></li>
<li><a href='#subset,argoFloats-method'><p>Subset an argoFloats Object</p></a></li>
<li><a href='#summary,argoFloats-method'><p>Summarize an argoFloats Object</p></a></li>
<li><a href='#useAdjusted'><p>Switch [[ and Plot to Focus on Adjusted Data, if Available</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Analysis of Oceanographic Argo Floats</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.7</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Dan Kelley &lt;dan.kelley@dal.ca&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>colourpicker, curl, knitr, lubridate, markdown, ncdf4,
ocedata, rmarkdown, shiny, s2, sf, testthat, shinyBS</td>
</tr>
<tr>
<td>Imports:</td>
<td>oce (&ge; 1.3.0), methods</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ArgoCanada/argoFloats/issues">https://github.com/ArgoCanada/argoFloats/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Supports the analysis of oceanographic data recorded by Argo autonomous drifting profiling floats. Functions are provided to (a) download and cache data files, (b) subset data in various ways, (c) handle quality-control flags and (d) plot the results according to oceanographic conventions. A shiny app is provided for easy exploration of datasets. The package is designed to work well with the 'oce' package, providing a wide range of processing capabilities that are particular to oceanographic analysis. See Kelley, Harbin, and Richards (2021) &lt;<a href="https://doi.org/10.3389%2Ffmars.2021.635922">doi:10.3389/fmars.2021.635922</a>&gt; for more on the scientific context and applications.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ArgoCanada/argoFloats">https://github.com/ArgoCanada/argoFloats</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>false</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>BuildVignettes:</td>
<td>true</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-17 17:33:22 UTC; kelley</td>
</tr>
<tr>
<td>Author:</td>
<td>Dan Kelley <a href="https://orcid.org/0000-0001-7808-5911"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre, cph],
  Jaimie Harbin <a href="https://orcid.org/0000-0003-3774-3732"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Dewey Dunnington <a href="https://orcid.org/0000-0002-9415-4582"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Clark Richards <a href="https://orcid.org/0000-0002-7833-206X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-17 17:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='argoFloats'>A Package for Processing Argo Float Profiles</h2><span id='topic+argoFloats'></span><span id='topic+argoFloats-package'></span>

<h3>Description</h3>

<p>The <code>argoFloats</code> package provides tools for downloading and processing Argo profile data.
It allows users to focus on core, biogeochemical (&quot;BGC&quot;), or deep Argo profiles, and
also to sift these profiles based on ID, time, geography, variable, institution, and ocean, etc.
Once downloaded, such datasets can be analyzed within <code>argoFloats</code> or using other R tools
and packages.
</p>


<h3>Details</h3>

<p>The development website is <a href="https://github.com/ArgoCanada/argoFloats">https://github.com/ArgoCanada/argoFloats</a>, and
<a href="https://argocanada.github.io/argoFloats/index.html">https://argocanada.github.io/argoFloats/index.html</a> provides a simpler view
that may be more helpful to most users. For more on the argoFloats package, see
Kelley et al. (2021).
</p>
<p>The sketch given below illustrates the typical workflow with the package, with
descriptions of the steps on the left, and names of the relevant functions
on the right.
</p>
<p><img src="../help/figures/workflow.png" width="455" alt="Figure: workflow.png" />
</p>
<p>As illustrated, the central functions are named
<code><a href="#topic+getIndex">getIndex()</a></code>, <a href="#topic+subset+2CargoFloats-method">subset()</a>,
<code><a href="#topic+getProfiles">getProfiles()</a></code>, and <code><a href="#topic+readProfiles">readProfiles()</a></code>, and so a good way to
get familiar with the package is to read their documentation entries
and try the examples provided therein.  Some built-in datasets are provided
for concreteness of illustration and for testing, but actual work always
starts with a call to <code><a href="#topic+getIndex">getIndex()</a></code> to download a full index of float data.
</p>
<p>In addition to these functions, <code>argoFloats</code> also provides
specialized versions of R &quot;generic&quot; functions, as follows.
</p>

<ol>
<li> <p><code>[[</code> provides a way to extract items from <code>argoFloats</code> objects,
without getting lost in the details of storage.
See <code><a href="#topic++5B+5B+2CargoFloats-method">[[,argoFloats-method</a></code> for details.
(Note that <code style="white-space: pre;">&#8288;[[&lt;-&#8288;</code> is <em>not</em> specialized, since the
user is highly discouraged from altering values within <code>argoFloats</code>
objects.)
</p>
</li>
<li> <p><code>plot()</code> provides simple ways to plot aspects of <code><a href="#topic+argoFloats-class">argoFloats</a></code> objects.
See <code><a href="#topic+plot+2CargoFloats-method">plot,argoFloats-method()</a></code> for details.
</p>
</li>
<li> <p><code>summary()</code> displays key features of <code><a href="#topic+argoFloats-class">argoFloats</a></code> objects.
See <code><a href="#topic+summary+2CargoFloats-method">summary,argoFloats-method()</a></code> for details.
</p>
</li>
<li> <p><code>show()</code> provides a one-line sketch of <code><a href="#topic+argoFloats-class">argoFloats</a></code> objects.
See <code><a href="#topic+show+2CargoFloats-method">show,argoFloats-method()</a></code> for details.
</p>
</li>
<li> <p><code>merge()</code> combines multiple index objects into a new index object.
</p>
</li></ol>

<p>It should be noted that the profile elements within <code>argoFloats</code> objects are stored as
in the form of <code>argo</code> objects as defined by the <code>oce</code> package.
This means that <code>argoFloats</code> users can rely on
a wide variety of <code>oce</code> functions to analyze their data.
The full suite of R tools is also available, and the vastness of
that suite explains why <code>argoFloats</code> is written in R.
</p>
<p>Kelley, D. E., Harbin, J., &amp; Richards, C. (2021). argoFloats: An R package for analyzing
Argo data. Frontiers in Marine Science, (8), 636922.
<a href="https://doi.org/10.3389/fmars.2021.635922">doi:10.3389/fmars.2021.635922</a>
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Dan Kelley <a href="mailto:dan.kelley@dal.ca">dan.kelley@dal.ca</a> (<a href="https://orcid.org/0000-0001-7808-5911">ORCID</a>) [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Jaimie Harbin <a href="mailto:jm810136@dal.ca">jm810136@dal.ca</a> (<a href="https://orcid.org/0000-0003-3774-3732">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Dewey Dunnington <a href="mailto:dewey.dunnington@dfo-mpo.gc.ca">dewey.dunnington@dfo-mpo.gc.ca</a> (<a href="https://orcid.org/0000-0002-9415-4582">ORCID</a>) [contributor]
</p>
</li>
<li><p> Clark Richards <a href="mailto:clark.richards@dfo-mpo.gc.ca">clark.richards@dfo-mpo.gc.ca</a> (<a href="https://orcid.org/0000-0002-7833-206X">ORCID</a>) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/ArgoCanada/argoFloats">https://github.com/ArgoCanada/argoFloats</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ArgoCanada/argoFloats/issues">https://github.com/ArgoCanada/argoFloats/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+5B+5B+2CargoFloats-method'>Look up a Value Within an argoFloats Object</h2><span id='topic++5B+5B+2CargoFloats-method'></span>

<h3>Description</h3>

<p>This function provides an easy way to look up values within an <code><a href="#topic+argoFloats-class">argoFloats</a></code>
object, without the need to know the exact structure of the data. The action
taken by <code>[[</code> depends on the <code>type</code> element in the <code>metadata</code> slot of
the object (which is set by the function that created the object), on the
value of <code>i</code> and, in some cases, on the value of <code>j</code>; see &ldquo;Details&rdquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'argoFloats'
x[[i, j, ...]]
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B5B+2B5B+2B2CargoFloats-method_+3A_x">x</code></td>
<td>
<p>an <code><a href="#topic+argoFloats-class">argoFloats</a></code> object.</p>
</td></tr>
<tr><td><code id="+2B5B+2B5B+2B2CargoFloats-method_+3A_i">i</code></td>
<td>
<p>a character value that specifies the item to be looked up;
see &ldquo;Details&rdquo;.</p>
</td></tr>
<tr><td><code id="+2B5B+2B5B+2B2CargoFloats-method_+3A_j">j</code></td>
<td>
<p>supplemental index value, used for some <code>x</code> types
and <code>i</code> values; see &ldquo;Details&rdquo;.</p>
</td></tr>
<tr><td><code id="+2B5B+2B5B+2B2CargoFloats-method_+3A_...">...</code></td>
<td>
<p>ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>There are several possibilities, depending on the object <code>type</code>, as
listed below. Note that these possibilities are checked in the
order listed here.
</p>

<ol>
<li><p> For all object types:
</p>

<ol>
<li><p> If <code>i</code> is <code>"metadata"</code> then the <code>metadata</code> slot of <code>x</code> is returned.
</p>
</li>
<li><p> Otherwise, if <code>i</code> is <code>"data"</code> then the <code>data</code> slot of <code>x</code> is returned.
</p>
</li>
<li><p> Otherwise, if <code>i</code> is <code>"cycle"</code> then a character vector of the cycle
numbers is returned.
</p>
</li>
<li><p> Otherwise, if <code>i</code> is <code>"processingLog"</code> then the <code>processingLog</code> slot of
<code>x</code> is returned.
</p>
</li>
<li><p> Otherwise, if <code>i</code> is <code>"ID"</code> then a character vector of the ID numbers
is returned.
</p>
</li>
<li><p> Otherwise, the following steps are taken, depending on <code>type</code>.
</p>
</li></ol>

</li>
<li><p> If <code>type</code> is <code>"index"</code>, i.e. if <code>x</code> was created with <code><a href="#topic+getIndex">getIndex()</a></code>
or with <code><a href="#topic+subset+2CargoFloats-method">subset,argoFloats-method()</a></code> acting on the result of <code><a href="#topic+getIndex">getIndex()</a></code>,
then:
</p>

<ol>
<li><p> If <code>i</code> is numeric and <code>j</code> is unspecified, then <code>i</code> is taken to
be an index that identifies the row(s) of the data frame that
was constructed by <code><a href="#topic+getIndex">getIndex()</a></code> based on the remote index file
downloaded from the Argo server.  This has elements <code>file</code> for
the remote file name, <code>date</code> for the date of the entry, <code>latitude</code>
and <code>longitude</code> for the float position, etc.
</p>
</li>
<li><p> If <code>i</code> is the name of an item in the <code>metadata</code> slot, then that item
is returned. The choices are:
<code>"destdir"</code>, <code>"destfileRda"</code>, <code>"filename"</code>, <code>"ftpRoot"</code>, <code>"header"</code>,
<code>"server"</code>, <code>"type"</code>, and <code>"url"</code>.
</p>
</li>
<li><p> Otherwise, if <code>i</code> is the name of an item in the <code>data</code> slot, then that item
is returned.  The choices are:
<code>"date"</code>, <code>"date_update"</code>, <code>"file"</code>, <code>"institution"</code>, <code>"latitude"</code>,
<code>"longitude"</code>, <code>"ocean"</code>, and <code>"profiler_type"</code>. Note that <code>"time"</code> and
<code>"time_update"</code> may be used as synonyms for <code>"date"</code> and <code>"date_update"</code>.
</p>
</li>
<li><p> Otherwise, if <code>i=="index"</code> then that item from the <code>data</code> slot of <code>x</code> is returned.
(For the possible names, see the previous item in this sub-list.)
</p>
</li>
<li><p> Otherwise, if <code>i</code> is an integer, then the <code>i</code>-th row of the <code>index</code> item in
the <code>data</code> slot is returned.  This is a good way to learn the
longitude and latitude of the profile, the file name on the server,
etc.
</p>
</li>
<li><p> Otherwise, if <code>i</code> is <code>"ID"</code> then the return value is developed from the
<code>index$file</code> item within the <code>data</code> slot of <code>x</code>, in one of three cases:
</p>

<ol>
<li><p> If <code>j</code> is not supplied, the return value is a vector holding the
identifiers (character codes for numbers) for all the data files
referred to in the index.
</p>
</li>
<li><p> Otherwise, if <code>j</code> is numeric, then the return value is a subset of
the ID codes, as indexed by <code>j</code>.
</p>
</li>
<li><p> Otherwise, an error is reported.
</p>
</li></ol>

</li>
<li><p> If <code>i</code> is <code>"length"</code>, the number of remote files pointed to by the index
is returned.
</p>
</li></ol>

</li>
<li><p> Otherwise, if <code>type</code> is <code>"profiles"</code>, i.e. if <code>x</code> was created with <code><a href="#topic+getProfiles">getProfiles()</a></code>, then:
</p>

<ol>
<li><p> If <code>i</code> is numeric and <code>j</code> is unspecified, then return the local file name(s)
that are identified by using <code>i</code> as an index.
</p>
</li>
<li><p> If <code>i</code> is the name of an item in the <code>metadata</code> slot, then that item
is returned. The choices are:
<code>"type"</code> and <code>"destdir"</code>.
</p>
</li>
<li><p> Otherwise, if <code>i</code> is the name of an item in the <code>data</code> slot, then that item
is returned.  There is only one choice: <code>"file"</code>.
</p>
</li>
<li><p> If <code>i</code> is <code>"length"</code>, the number of local file names that were downloaded
by <code><a href="#topic+getProfiles">getProfiles()</a></code> is returned.
</p>
</li></ol>

</li>
<li><p> Otherwise, if <code>type</code> is <code>"argos"</code>, i.e. if <code>x</code> was created with <code><a href="#topic+readProfiles">readProfiles()</a></code>, then:
</p>

<ol>
<li><p> If <code>i</code> is equal to <code>"argos"</code>, and <code>j</code> is unspecified, then a list
holding the <a href="oce.html#topic+argo-class">oce::argo</a> objects stored within <code>x</code> is returned.
</p>
</li>
<li><p> If <code>i</code> is equal to <code>"argos"</code>, and <code>j</code> is provided, then the associated
<a href="oce.html#topic+argo-class">oce::argo</a> object is returned.
</p>
</li>
<li><p> If <code>i</code> is numeric and <code>j</code> is unspecified, then return the argo objects identified
by using <code>i</code> as an index.
</p>
</li>
<li><p> If <code>i</code> is the name of an item in the <code>metadata</code> slot, then that item
is returned. There is only choice, <code>"type"</code>.
</p>
</li>
<li><p> Otherwise, if <code>i</code> is the name of an item in the <code>data</code> slot, then that item
is returned as a named list.  (At present, there is only one choice: <code>"argos"</code>.)
</p>
</li>
<li><p> Otherwise, if <code>i</code> is <code>"length"</code> then the number of oce-type argo objects in <code>x</code> is returned.
</p>
</li>
<li><p> Otherwise, if <code>i</code> is a character value then it is taken to be
an item within the <code>metadata</code> or <code>data</code> slots of the argo objects
stored in <code>x</code>, and the returned value is a list containing that
information with one (unnamed) item per profile.
If <code>j</code> is provided
and equal to <code>"byLevel"</code>, then the items from the <code>metadata</code> are
repeated (if necessary) and formed into matrix or vector of the same
shape as the <code>"pressure"</code> field; this can be convenient for computations
involving items that only occur once per profile, such as <code>"longitude"</code>,
but it should not be used for items that are not level-specific, such
as the various <code>"HISTORY_*"</code> elements, which apply to a dataset, not to
a level
</p>
</li>
<li><p> Otherwise, NULL is reported.
</p>
</li></ol>

</li>
<li><p> Otherwise, an error is reported.
</p>
</li></ol>



<h3>Value</h3>

<p>the indicated item, or NULL if it is neither stored within the first argument
nor computable from its contents.
</p>


<h3>Author(s)</h3>

<p>Dan Kelley
</p>


<h3>References</h3>

<p>Kelley, D. E., Harbin, J., &amp; Richards, C. (2021). argoFloats: An R package for analyzing
Argo data. Frontiers in Marine Science, (8), 636922.
<a href="https://doi.org/10.3389/fmars.2021.635922">doi:10.3389/fmars.2021.635922</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(index)
# Full remote filename for first two item in index
paste0(index[["server"]], "/dac/", index[["cycle", 1:2]])
# File names and geographical locations of first 5 items in index
index5 &lt;- subset(index, 1:5)
data.frame(file=gsub(".*/", "", index5[["file"]][1]),
           lon=index5[["longitude"]],
           lat=index5[["latitude"]])

</code></pre>

<hr>
<h2 id='applyQC'>Apply Quality Control Flags</h2><span id='topic+applyQC'></span>

<h3>Description</h3>

<p>This function examines the quality-control (&quot;QC&quot;) flags within an <code><a href="#topic+argoFloats-class">argoFloats</a></code>
object that was created by <code><a href="#topic+readProfiles">readProfiles()</a></code>.  By default, it replaces all suspicious
data with <code>NA</code> values, so they will not appear in plots or be considered in calculations.
This is an important early step in processing, because suspicious Argo floats commonly
report data that are suspicious based on statistical and physical measures, as
is illustrated in the &ldquo;Examples&rdquo; section.
See section 3.3 of Kelley et al. (2021) for more information
about this function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>applyQC(x, flags = NULL, actions = NULL, debug = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="applyQC_+3A_x">x</code></td>
<td>
<p>an <code><a href="#topic+argoFloats-class">argoFloats</a></code> object of type <code>"argos"</code>, as created by
<code><a href="#topic+readProfiles">readProfiles()</a></code>.</p>
</td></tr>
<tr><td><code id="applyQC_+3A_flags">flags</code></td>
<td>
<p>A list specifying flag values upon which actions will be taken. This can take two forms.
</p>
<p>In the first form, the list has named elements each containing a vector of
integers. For example, salinities flagged with values of 1 or 3:9 would be
specified by flags=list(salinity=c(1,3:9)). Several data items can be
specified, e.g. flags=list(salinity=c(1,3:9), temperature=c(1,3:9)) indicates
that the actions are to take place for both salinity and temperature.
</p>
<p>In the second form, flags is a list holding a single unnamed vector, and this
means to apply the actions to all the data entries. For example,
flags=list(c(1,3:9)) means to apply not just to salinity and temperature, but
to everything within the data slot.
</p>
<p>If flags is NULL then it is set to <code>list(c(0,3,4,6,7,9))</code>, which means to
eliminate data that are considered bad (in some degree) or for which QC was
not performed. Following Section 3.2.1 of reference 1, the flag
meanings are as follows.
</p>

<ul>
<li><p> 0: No QC was performed
</p>
</li>
<li><p> 1: Good data
</p>
</li>
<li><p> 2: Probably good data
</p>
</li>
<li><p> 3: Bad data that are potentially correctable
</p>
</li>
<li><p> 4: Bad data
</p>
</li>
<li><p> 5: Value changed
</p>
</li>
<li><p> 6: Not used
</p>
</li>
<li><p> 7: Not used
</p>
</li>
<li><p> 8: Estimated value
</p>
</li>
<li><p> 9: Missing data
</p>
</li></ul>
</td></tr>
<tr><td><code id="applyQC_+3A_actions">actions</code></td>
<td>
<p>the actions to perform. The default, <code>NULL</code>, means to use the
actions set up by <code><a href="#topic+readProfiles">readProfiles()</a></code>, which, by default. causes any data
flagged as suspicious to be set to <code>NA</code>.</p>
</td></tr>
<tr><td><code id="applyQC_+3A_debug">debug</code></td>
<td>
<p>an integer passed to <code><a href="oce.html#topic+handleFlags-argo-method">oce::handleFlags,argo-method()</a></code>.  If this
is set to a positive value, then some debugging information will be printed
as the processing is done.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The work is done by using <code><a href="oce.html#topic+handleFlags-argo-method">oce::handleFlags,argo-method()</a></code>
on each of the profiles stored within the object. In most cases, only
the object needs to be specified, for the default actions coincide with
common conventions for flags in Argo data.
</p>


<h3>Value</h3>

<p>A copy of <code>x</code> but with each of the objects within its <code>data</code> slot
having been passed through <code><a href="oce.html#topic+handleFlags-argo-method">oce::handleFlags,argo-method()</a></code>.
</p>


<h3>Author(s)</h3>

<p>Dan Kelley
</p>


<h3>References</h3>


<ol>
<li><p> Argo Data Management. “Argo User’s Manual.” Ifremer, July 5, 2022.
https://doi.org/10.13155/29825.
</p>
</li>
<li><p> Kelley, D. E., Harbin, J., &amp; Richards, C. (2021). argoFloats: An R package
for analyzing Argo data. Frontiers in Marine Science, (8), 636922.
<a href="https://doi.org/10.3389/fmars.2021.635922">doi:10.3389/fmars.2021.635922</a>
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'># Demonstrate applyQC to a built-in file
library(argoFloats)
f &lt;- system.file("extdata", "SR2902204_131.nc", package="argoFloats")
raw &lt;- readProfiles(f)
clean &lt;- applyQC(raw)
oldpar &lt;- par(no.readonly=TRUE)
par(mar=c(3.3, 3.3, 1, 1), mgp=c(2, 0.7, 0))
plot(raw, col="red", which="TS")
points(clean[[1]][["SA"]], clean[[1]][["CT"]], pch=20)
legend("topleft", pch=20, cex=1,
    col=c("black", "red"), legend=c("OK", "Flagged"), bg="white")
par(oldpar)

</code></pre>

<hr>
<h2 id='argoDefaultDestdir'>Get Default Values</h2><span id='topic+argoDefaultDestdir'></span><span id='topic+argoDefaultServer'></span><span id='topic+argoDefaultIndexAge'></span><span id='topic+argoDefaultProfileAge'></span><span id='topic+argoDefaultBathymetry'></span><span id='topic+hasArgoTestCache'></span>

<h3>Description</h3>

<p>These are helper functions that permit customization of various aspects of
functions within the argoFloats package. The idea is that values can be set
using <code><a href="base.html#topic+options">options()</a></code> or by using system 'environment variables', freeing the
user from the necessity of altering the parameters provided to various
argoFloats functions.  See &ldquo;Details&rdquo; for more on the individual
functions, noting that the entry for <code>argoDefaultServer()</code> is written with
the most detail, with other entries relying on the background
established there.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>argoDefaultDestdir()

argoDefaultServer()

argoDefaultIndexAge()

argoDefaultProfileAge()

argoDefaultBathymetry()

hasArgoTestCache()
</code></pre>


<h3>Details</h3>


<ul>
<li> <p><code>argoDefaultServer()</code>
The <code><a href="#topic+getIndex">getIndex()</a></code> and <code><a href="#topic+getProfiles">getProfiles()</a></code> functions download data from a
remote machine with URL specified by an argument named <code>server</code>. A user may
prefer one server over another, perhaps due to speed of downloads to
a particular research laboratory.  However, that choice might not be best
for another user, or even the same user at another time.  Code reusability
would be enhanced if the user had a way to alter the value of the <code>server</code>
argument across all code, thereby eliminating the need to work in a text
editor to find all instances of the function call.  This is where
<code>argoDefaultServer()</code> is useful.  It lets the user specify a value for
<code>server</code> either in R, using a call like
<code>options(argoFloats.server="ifremer-https")</code>
within R code (perhaps in the user's <code>.Rprofile</code> file),
or by defining an environment variable named
<code>R_ARGOFLOATS_SERVER</code> at the operating-system level.  If
the <code>argoFloats.server</code> option has not been set in R,
and <code>R_ARGOFLOATS_SERVER</code> has not been set in the OS, then
<code>argoDefaultServer()</code> defaults to <code>c("ifremer-https","usgodae")</code>.
</p>
</li>
<li> <p><code>argoDefaultDestdir()</code> returns the name of the local directory
into which to store indices and other argo data.
The option is named
<code>argoFloats.destdir</code>,
the environment variable is named
<code>R_ARGOFLOATS_DESTDIR</code>,
and the default is
'&quot;~/data/argo&quot;.
</p>
</li>
<li> <p><code>argoDefaultIndexAge()</code> returns the number of days beyond
which an index is regarded as stale (and thus in need of a new
download).
The option is named
<code>argoFloats.indexAge</code>,
the environment variable is named
<code>R_ARGOFLOATS_INDEX_AGE</code>,
and the default is
1.0, for 1 day.
</p>
</li>
<li> <p><code>argoDefaultProfileAge()</code> returns the number of days beyond
which an individual profile netCDF file is regarded as stale (and thus in need of a new
download).
The option is named
<code>argoFloats.profileAge</code>,
the environment variable is named
<code>R_ARGOFLOATS_PROFILE_AGE</code>,
and the default is
365.0 days.  (Note that this is much higher than the value for
<code>argoDefaultIndexAge()</code>, on the assumption that users will prefer
recent indices, to get new data, but will prefer to update
profile-specific datasets infrequently.)
</p>
</li>
<li> <p><code>argoDefaultBathymetry()</code> returns a value for the <code>bathymetry</code>
argument used by <code><a href="#topic+plot+2CargoFloats-method">plot,argoFloats-method()</a></code>.
The option is named
<code>argoFloats.bathymetry</code>,
the environment variable is named
<code>R_ARGOFLOATS_BATHYMETRY</code>,
and the default is
<code>FALSE</code>.
</p>
</li>
<li> <p><code>hasArgoTestCache()</code> is not a user-facing function. Rather, its purpose
is to speed the running of test suites during development, by preventing
multiple downloads of data already downloaded.
</p>
</li></ul>



<h3>Value</h3>

<p>A value as described above, depending on the particular
function in question.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>argoDefaultServer()
argoDefaultDestdir()
argoDefaultIndexAge()
argoDefaultProfileAge()
argoDefaultBathymetry()

</code></pre>

<hr>
<h2 id='argoFloats-class'>Base Class for argoFloats Objects</h2><span id='topic+argoFloats-class'></span>

<h3>Description</h3>

<p>In the normal situation, users will not create these objects directly. Instead,
they are created by functions such as <code><a href="#topic+getIndex">getIndex()</a></code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>data</code></dt><dd><p>The <code>data</code> slot is a list with contents that vary with the object type.  For example,
<code><a href="#topic+getIndex">getIndex()</a></code> creates objects of type <code>"index"</code> that have a single unnamed
element in <code>data</code> that is a data frame. This data frame has a column named <code>file</code>
that is used in combination with <code>metadata@ftpRoot</code> to form a URL for downloading,
along with columns named <code>date</code>, <code>latitude</code>, <code>longitude</code>,
<code>ocean</code>, <code>profiler_type</code>, <code>institution</code> and <code>date_update</code>. Other &quot;get&quot; functions
create objects with different contents.</p>
</dd>
<dt><code>metadata</code></dt><dd><p>The <code>metadata</code> slot is a list containing information about the data. The contents vary
between objects and object types.  That type is indicated by elements named
<code>type</code> and <code>subtype</code>, which are checked by many functions within the package.</p>
</dd>
<dt><code>processingLog</code></dt><dd><p>The <code>processingLog</code> slot is a list containing time-stamped processing steps that may be
stored in the object by argoFloats functions. These are noted in <code>summary()</code> calls.</p>
</dd>
</dl>


<h3>Examples</h3>

<pre><code class='language-R'>str(new("argoFloats"))
</code></pre>

<hr>
<h2 id='argoFloatsClearCache'>Clear the Cache</h2><span id='topic+argoFloatsClearCache'></span>

<h3>Description</h3>

<p>Clear the cache.  This is meant mainly for developers working in interactive
sessions to test coding changes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>argoFloatsClearCache(debug = 0L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="argoFloatsClearCache_+3A_debug">debug</code></td>
<td>
<p>an integer, passed to <code><a href="#topic+argoFloatsDebug">argoFloatsDebug()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>integer, returned invisibly, indicating the number of items removed.
</p>


<h3>Author(s)</h3>

<p>Dan Kelley, making a thin copy of code written by Dewey Dunnington
</p>


<h3>See Also</h3>

<p>Other functions relating to cached values: 
<code><a href="#topic+argoFloatsGetFromCache">argoFloatsGetFromCache</a>()</code>,
<code><a href="#topic+argoFloatsIsCached">argoFloatsIsCached</a>()</code>,
<code><a href="#topic+argoFloatsListCache">argoFloatsListCache</a>()</code>,
<code><a href="#topic+argoFloatsStoreInCache">argoFloatsStoreInCache</a>()</code>,
<code><a href="#topic+argoFloatsWhenCached">argoFloatsWhenCached</a>()</code>
</p>

<hr>
<h2 id='argoFloatsDebug'>Print Debugging Information</h2><span id='topic+argoFloatsDebug'></span>

<h3>Description</h3>

<p>This function is intended mainly for use within the package, but users may
also call it directly in their own code.  Within the package, the value
of <code>debug</code> is generally reduced by 1 on each nested function call, leading
to indented messages. Most functions start and end with a call to
<code><a href="#topic+argoFloatsDebug">argoFloatsDebug()</a></code> that has <code>style="bold"</code> and <code>unindent=1</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>argoFloatsDebug(
  debug = 0,
  ...,
  style = "plain",
  showTime = FALSE,
  unindent = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="argoFloatsDebug_+3A_debug">debug</code></td>
<td>
<p>an integer specifying the level of debugging. Values greater
than zero indicate that some printing should be done. Values greater
than 3 are trimmed to 3. Many functions pass <code>debug=debug-1</code> down to
deeper functions, which yields a nesting-indent format in the output.</p>
</td></tr>
<tr><td><code id="argoFloatsDebug_+3A_...">...</code></td>
<td>
<p>values to be printed, analogous to the <code>...</code> argument
list of <code><a href="base.html#topic+cat">cat()</a></code>.</p>
</td></tr>
<tr><td><code id="argoFloatsDebug_+3A_style">style</code></td>
<td>
<p>character value indicating special formatting, with <code>"plain"</code>
for normal text, <code>"bold"</code> for bold-faced text, <code>"italic"</code> for italicized
text, <code>"red"</code> for red text, <code>"green"</code> for green text, or <code>"blue"</code> for blue
text. These codes may not be combined.</p>
</td></tr>
<tr><td><code id="argoFloatsDebug_+3A_showtime">showTime</code></td>
<td>
<p>logical value indicating whether to preface message with
the present time. This can be useful for learning about which operations
are using the most time, but the default is not to show this, in the
interests of brevity.</p>
</td></tr>
<tr><td><code id="argoFloatsDebug_+3A_unindent">unindent</code></td>
<td>
<p>integer specifying the degree of reverse indentation
to be done, as explained in the &ldquo;Details&rdquo; section.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None (invisible NULL).
</p>


<h3>Author(s)</h3>

<p>Dan Kelley
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
argoFloatsDebug(1, "plain text\n")
argoFloatsDebug(1, "red text\n", style="red")
argoFloatsDebug(1, "blue text\n", style="blue")
argoFloatsDebug(1, "bold text\n", style="bold")
argoFloatsDebug(1, "italic text with time stamp\n", style="italic", showTime=TRUE)

</code></pre>

<hr>
<h2 id='argoFloatsGetFromCache'>Get an Item From The Cache</h2><span id='topic+argoFloatsGetFromCache'></span>

<h3>Description</h3>

<p>Get an Item From The Cache
</p>


<h3>Usage</h3>

<pre><code class='language-R'>argoFloatsGetFromCache(name, debug = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="argoFloatsGetFromCache_+3A_name">name</code></td>
<td>
<p>character value, naming the item.</p>
</td></tr>
<tr><td><code id="argoFloatsGetFromCache_+3A_debug">debug</code></td>
<td>
<p>an integer, passed to <code><a href="#topic+argoFloatsDebug">argoFloatsDebug()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The cached value, as stored with <code><a href="#topic+argoFloatsStoreInCache">argoFloatsStoreInCache()</a></code>.
</p>


<h3>See Also</h3>

<p>Other functions relating to cached values: 
<code><a href="#topic+argoFloatsClearCache">argoFloatsClearCache</a>()</code>,
<code><a href="#topic+argoFloatsIsCached">argoFloatsIsCached</a>()</code>,
<code><a href="#topic+argoFloatsListCache">argoFloatsListCache</a>()</code>,
<code><a href="#topic+argoFloatsStoreInCache">argoFloatsStoreInCache</a>()</code>,
<code><a href="#topic+argoFloatsWhenCached">argoFloatsWhenCached</a>()</code>
</p>

<hr>
<h2 id='argoFloatsIsCached'>Check Whether an Item is Cached</h2><span id='topic+argoFloatsIsCached'></span>

<h3>Description</h3>

<p>Check Whether an Item is Cached
</p>


<h3>Usage</h3>

<pre><code class='language-R'>argoFloatsIsCached(name, debug = 0L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="argoFloatsIsCached_+3A_name">name</code></td>
<td>
<p>character value, naming the item.</p>
</td></tr>
<tr><td><code id="argoFloatsIsCached_+3A_debug">debug</code></td>
<td>
<p>an integer, passed to <code><a href="#topic+argoFloatsDebug">argoFloatsDebug()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value indicating whether a cached value is available.
</p>


<h3>Author(s)</h3>

<p>Dan Kelley, making a thin copy of code written by Dewey Dunnington
</p>


<h3>See Also</h3>

<p>Other functions relating to cached values: 
<code><a href="#topic+argoFloatsClearCache">argoFloatsClearCache</a>()</code>,
<code><a href="#topic+argoFloatsGetFromCache">argoFloatsGetFromCache</a>()</code>,
<code><a href="#topic+argoFloatsListCache">argoFloatsListCache</a>()</code>,
<code><a href="#topic+argoFloatsStoreInCache">argoFloatsStoreInCache</a>()</code>,
<code><a href="#topic+argoFloatsWhenCached">argoFloatsWhenCached</a>()</code>
</p>

<hr>
<h2 id='argoFloatsListCache'>List Items in the Cache</h2><span id='topic+argoFloatsListCache'></span>

<h3>Description</h3>

<p>List items in the cache.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>argoFloatsListCache(debug = 0L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="argoFloatsListCache_+3A_debug">debug</code></td>
<td>
<p>an integer, passed to <code><a href="#topic+argoFloatsDebug">argoFloatsDebug()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector of names of items.
</p>


<h3>Author(s)</h3>

<p>Dan Kelley, making a thin copy of code written by Dewey Dunnington
</p>


<h3>See Also</h3>

<p>Other functions relating to cached values: 
<code><a href="#topic+argoFloatsClearCache">argoFloatsClearCache</a>()</code>,
<code><a href="#topic+argoFloatsGetFromCache">argoFloatsGetFromCache</a>()</code>,
<code><a href="#topic+argoFloatsIsCached">argoFloatsIsCached</a>()</code>,
<code><a href="#topic+argoFloatsStoreInCache">argoFloatsStoreInCache</a>()</code>,
<code><a href="#topic+argoFloatsWhenCached">argoFloatsWhenCached</a>()</code>
</p>

<hr>
<h2 id='argoFloatsStoreInCache'>Store an Item in the Cache</h2><span id='topic+argoFloatsStoreInCache'></span>

<h3>Description</h3>

<p>Store an Item in the Cache
</p>


<h3>Usage</h3>

<pre><code class='language-R'>argoFloatsStoreInCache(name, value, debug = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="argoFloatsStoreInCache_+3A_name">name</code></td>
<td>
<p>character value, naming the item.</p>
</td></tr>
<tr><td><code id="argoFloatsStoreInCache_+3A_value">value</code></td>
<td>
<p>the new contents of the item.</p>
</td></tr>
<tr><td><code id="argoFloatsStoreInCache_+3A_debug">debug</code></td>
<td>
<p>an integer, passed to <code><a href="#topic+argoFloatsDebug">argoFloatsDebug()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None (invisible NULL).
</p>


<h3>See Also</h3>

<p>Other functions relating to cached values: 
<code><a href="#topic+argoFloatsClearCache">argoFloatsClearCache</a>()</code>,
<code><a href="#topic+argoFloatsGetFromCache">argoFloatsGetFromCache</a>()</code>,
<code><a href="#topic+argoFloatsIsCached">argoFloatsIsCached</a>()</code>,
<code><a href="#topic+argoFloatsListCache">argoFloatsListCache</a>()</code>,
<code><a href="#topic+argoFloatsWhenCached">argoFloatsWhenCached</a>()</code>
</p>

<hr>
<h2 id='argoFloatsWhenCached'>Check When an Item was Cached</h2><span id='topic+argoFloatsWhenCached'></span>

<h3>Description</h3>

<p>Check When an Item was Cached
</p>


<h3>Usage</h3>

<pre><code class='language-R'>argoFloatsWhenCached(name, debug = 0L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="argoFloatsWhenCached_+3A_name">name</code></td>
<td>
<p>character value, naming the item.</p>
</td></tr>
<tr><td><code id="argoFloatsWhenCached_+3A_debug">debug</code></td>
<td>
<p>an integer, passed to <code><a href="#topic+argoFloatsDebug">argoFloatsDebug()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value indicating whether a cached value is available.
</p>


<h3>Author(s)</h3>

<p>Dan Kelley, making a thin copy of code written by Dewey Dunnington
</p>


<h3>See Also</h3>

<p>Other functions relating to cached values: 
<code><a href="#topic+argoFloatsClearCache">argoFloatsClearCache</a>()</code>,
<code><a href="#topic+argoFloatsGetFromCache">argoFloatsGetFromCache</a>()</code>,
<code><a href="#topic+argoFloatsIsCached">argoFloatsIsCached</a>()</code>,
<code><a href="#topic+argoFloatsListCache">argoFloatsListCache</a>()</code>,
<code><a href="#topic+argoFloatsStoreInCache">argoFloatsStoreInCache</a>()</code>
</p>

<hr>
<h2 id='D4900785_048.nc'>Sample Argo File (Delayed Core Data)</h2><span id='topic+D4900785_048.nc'></span>

<h3>Description</h3>

<p>This is NetCDF file for delayed-mode data for cycle 48 of Argo float 4900785, downloaded from
<code>https://data-argo.ifremer.fr/dac/aoml/4900785/profiles/D4900785_048.nc</code>
on 2020 June 24.
</p>


<h3>See Also</h3>

<p>Other raw datasets: 
<code><a href="#topic+R3901602_163.nc">R3901602_163.nc</a></code>,
<code><a href="#topic+SD5903586_001.nc">SD5903586_001.nc</a></code>,
<code><a href="#topic+SR2902204_131.nc">SR2902204_131.nc</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(argoFloats)
a &lt;- readProfiles(system.file("extdata", "D4900785_048.nc", package="argoFloats"))
summary(a)
summary(a[[1]])

</code></pre>

<hr>
<h2 id='downloadWithRetries'>Download and Cache a Dataset</h2><span id='topic+downloadWithRetries'></span>

<h3>Description</h3>

<p>General function for downloading and caching a dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>downloadWithRetries(
  url,
  destdir,
  destfile,
  quiet = FALSE,
  age = argoDefaultProfileAge(),
  retries = 3,
  async = FALSE,
  debug = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="downloadWithRetries_+3A_url">url</code></td>
<td>
<p>character value giving the full URL of a file to be downloaded.</p>
</td></tr>
<tr><td><code id="downloadWithRetries_+3A_destdir">destdir</code></td>
<td>
<p>character value indicating the directory in which to store
downloaded files. The default value is to compute this using
<code><a href="#topic+argoDefaultDestdir">argoDefaultDestdir()</a></code>, which returns <code style="white-space: pre;">&#8288;~/data/argo&#8288;</code> by default,
although it also provides ways to set other values using
<code><a href="base.html#topic+options">options()</a></code>.
Set <code>destdir=NULL</code>
if <code>destfile</code> is a filename with full path information.
File clutter is reduced by creating a top-level directory called
<code>data</code>, with subdirectories for various file types; see
&ldquo;Examples&rdquo;.</p>
</td></tr>
<tr><td><code id="downloadWithRetries_+3A_destfile">destfile</code></td>
<td>
<p>either character value indicating the name of the file
or <code>NULL</code> (the default), in which case the file name is constructed from
the other parameters of the function call, so that subsequent calls with
the same parameters will yield the same result; this is useful
for caching.</p>
</td></tr>
<tr><td><code id="downloadWithRetries_+3A_quiet">quiet</code></td>
<td>
<p>logical value; use <code>FALSE</code> to show more
verbose information when downloading files.
(Even if <code>quiet</code> is TRUE, problems will still be reported.)</p>
</td></tr>
<tr><td><code id="downloadWithRetries_+3A_age">age</code></td>
<td>
<p>a numerical value indicating a time interval, in days.  If the file
to be downloaded from the server already exists locally, and was created
is less than <code>age</code> days in the past, it will not be downloaded.  The default,
<code><a href="#topic+argoDefaultProfileAge">argoDefaultProfileAge()</a></code>, is one year.  Setting <code>age=0</code> will force a download.</p>
</td></tr>
<tr><td><code id="downloadWithRetries_+3A_retries">retries</code></td>
<td>
<p>integer telling how many times to retry a download,
if the first attempt fails.</p>
</td></tr>
<tr><td><code id="downloadWithRetries_+3A_async">async</code></td>
<td>
<p>Use <code>TRUE</code> to perform requests asynchronously. This is much
faster for many small files (e.g., Argo profile NetCDF files).</p>
</td></tr>
<tr><td><code id="downloadWithRetries_+3A_debug">debug</code></td>
<td>
<p>integer value indicating level of debugging. If this
is less than 1, no debugging is done. Otherwise, some functions
will print debugging information.  If a function call fails, the
first step should be to rerun the function with <code>debug=1</code>,
to see if the output suggests a problem in the call.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character value indicating the full pathname to the downloaded file,
or <code>NA</code>, if there was a problem with the download.
</p>


<h3>Author(s)</h3>

<p>Dan Kelley
</p>

<hr>
<h2 id='getIndex'>Get an Index of Available Argo Float Profiles</h2><span id='topic+getIndex'></span>

<h3>Description</h3>

<p>This function gets an index of available Argo float profiles, typically
for later use as the first argument to <code><a href="#topic+getProfiles">getProfiles()</a></code>. The source for the
index may be (a) a remote data repository, (b) a local repository (see the
<code>keep</code> argument), or (c) a cached RDA file that contains the result
of a previous call to <code><a href="#topic+getIndex">getIndex()</a></code> (see the <code>age</code> parameter).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getIndex(
  filename = "core",
  server = argoDefaultServer(),
  destdir = argoDefaultDestdir(),
  age = argoDefaultIndexAge(),
  quiet = FALSE,
  keep = FALSE,
  debug = 0L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getIndex_+3A_filename">filename</code></td>
<td>
<p>character value that indicates the file name to be downloaded
from a remote server, or (if <code>server</code> is set to NULL) the name of a local
file.  For the remote case, the value of <code>server</code> must be taken from
the first column of the table given in &ldquo;Details&rdquo;, or (for some file types)
as in the nickname given in the middle column. Note that the downloaded
file name will be based on the full file name given as this argument, and
that nicknames are expanded to the full filenames before saving.  Note that
the downloaded file is in gzipped format (indicated by a file name ending
in <code>.gz</code>) and it is examined and processed by <code><a href="#topic+getIndex">getIndex()</a></code> to produce an
R archive file (ending in <code>.rda</code>) that is stored locally. The <code>.gz</code> file
is discarded by default, unless <code>keep</code> is set to TRUE.  (See also
the documentation on the <code>server</code> parameter, next, and the subsection
entitled &ldquo;Using a previously-downloaded index&rdquo;.)</p>
</td></tr>
<tr><td><code id="getIndex_+3A_server">server</code></td>
<td>
<p>an indication of the source for <code>filename</code>.  There are 2
possibilities for this.  (1) If <code>server</code> is <code>NULL</code>, then <code>filename</code> is taken
to be the name of a local index file (ending in suffix <code>.gz</code>) that
was previously downloaded from a server.  The easiest way to get
such a file is with a previous call to <code><a href="#topic+getIndex">getIndex()</a></code> with <code>keep</code> set
to TRUE.  (2) If <code>server</code> is a character vector (as is it is by default),
it is taken to represent remote servers to be tried as sources
for an index file.  The use of multiple servers is a way to avoid
errors that can result if a server refuses a download request.
As of March 2023, the three servers known to work are
<code>"https://data-argo.ifremer.fr"</code>, <code>"ftp://ftp.ifremer.fr/ifremer/argo"</code> and
<code>"ftp://usgodae.org/pub/outgoing/argo"</code>.
These may be referred
to with nicknames <code>"ifremer-https"</code>, <code>"ifremer"</code>and  <code>"usgodae"</code>.
Any URL that can be used in <code><a href="curl.html#topic+curl_download">curl::curl_download()</a></code> is a valid value provided
that the file structure is identical to the mirrors listed above. See
<code><a href="#topic+argoDefaultServer">argoDefaultServer()</a></code> for how to provide a default value for <code>server</code>.</p>
</td></tr>
<tr><td><code id="getIndex_+3A_destdir">destdir</code></td>
<td>
<p>character value indicating the directory in which to store
downloaded files. The default value is to compute this using
<code><a href="#topic+argoDefaultDestdir">argoDefaultDestdir()</a></code>, which returns <code style="white-space: pre;">&#8288;~/data/argo&#8288;</code> by default,
although it also provides ways to set other values using
<code><a href="base.html#topic+options">options()</a></code>.
Set <code>destdir=NULL</code>
if <code>destfile</code> is a filename with full path information.
File clutter is reduced by creating a top-level directory called
<code>data</code>, with subdirectories for various file types; see
&ldquo;Examples&rdquo;.</p>
</td></tr>
<tr><td><code id="getIndex_+3A_age">age</code></td>
<td>
<p>numeric value indicating how old a downloaded file
must be (in days), for it to be considered out-of-date.  The
default, <code><a href="#topic+argoDefaultIndexAge">argoDefaultIndexAge()</a></code>, limits downloads to once per day, as a way
to avoid slowing down a workflow with a download that might take
a minute or so.  Setting <code>age=0</code> will force a new
download, regardless of the age of the local file, and that
age is changed to 0 if <code>keep</code> is <code>TRUE</code>.  The value of <code>age</code>
is ignored if <code>server</code> is NULL (see &ldquo;Using a previously
downloaded Index&rdquo; in &ldquo;Details&rdquo;).</p>
</td></tr>
<tr><td><code id="getIndex_+3A_quiet">quiet</code></td>
<td>
<p>logical value indicating whether to silence some
progress indicators.  The default is to show such indicators.</p>
</td></tr>
<tr><td><code id="getIndex_+3A_keep">keep</code></td>
<td>
<p>logical value indicating whether to retain the
raw index file as downloaded from the server.  This is <code>FALSE</code>
by default, indicating that the raw index file is to be
discarded once it has been analyzed and used to create a cached
file (which is an RDA file).  Note that if <code>keep</code>
is <code>TRUE</code>, then the supplied value of <code>age</code> is converted
to 0, to force a new download.</p>
</td></tr>
<tr><td><code id="getIndex_+3A_debug">debug</code></td>
<td>
<p>integer value indicating level of debugging. If this
is less than 1, no debugging is done. Otherwise, some functions
will print debugging information.  If a function call fails, the
first step should be to rerun the function with <code>debug=1</code>,
to see if the output suggests a problem in the call.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><strong>Using an index from a remote server</strong>
</p>
<p>The first step is to construct a URL for downloading, based on the
<code>url</code> and <code>file</code> arguments. That URL will be a string ending in <code>.gz</code>,
or <code>.txt</code> and from this the name of a local file is constructed
by changing the suffix to <code>.rda</code> and prepending the file directory
specified by <code>destdir</code>.  If an <code>.rda</code> file of that name already exists,
and is less than <code>age</code> days old, then no downloading takes place. This
caching procedure is a way to save time, because the download can take
from a minute to an hour, depending on the bandwidth of the connection
to the
server.
</p>
<p>The resultant <code>.rda</code> file, which is named in the return value of this
function, holds a list named <code>index</code> that holds following elements:
</p>

<ul>
<li> <p><code>ftpRoot</code>, the FTP root stored in the header of the source <code>file</code>
(see next paragraph).
</p>
</li>
<li> <p><code>server</code>, the URL at which the index was found, and from
which <code><a href="#topic+getProfiles">getProfiles()</a></code> can construct URLs from which to
download the NetCDF files for individual float profiles.
</p>
</li>
<li> <p><code>filename</code>, the argument provided here.
</p>
</li>
<li> <p><code>header</code>, the preliminary lines in the source file that start
with the <code style="white-space: pre;">&#8288;#&#8288;</code> character.
</p>
</li>
<li> <p><code>data</code>, a data frame containing the items in the source file.
The names of these items are determined automatically from
<code>"core"</code>,<code>"bgcargo"</code>, <code>"synthetic"</code> files.
</p>
</li></ul>

<p>Some expertise is required in deciding on the value for the
<code>file</code> argument to <code><a href="#topic+getIndex">getIndex()</a></code>.  As of March 2023, the
FTP sites
<code style="white-space: pre;">&#8288;ftp://usgodae.org/pub/outgoing/argo&#8288;</code>
and
<code style="white-space: pre;">&#8288;ftp://ftp.ifremer.fr/ifremer/argo&#8288;</code>
contain multiple index files, as listed in the left-hand column of the
following table. The middle column lists nicknames
for some of the files.  These can be provided as the <code>file</code> argument,
as alternatives to the full names.
The right-hand column describes the file contents.
Note that the servers also provide files with names similar to those
given in the table, but ending in <code>.txt</code>.  These are uncompressed
equivalents of the <code>.gz</code> files that offer no advantage and take
longer to download, so <code><a href="#topic+getIndex">getIndex()</a></code> is not designed to work with them.
</p>

<table>
<tr>
 <td style="text-align: left;">
<em>File Name</em>                           </td><td style="text-align: left;"> <em>Nickname</em>              </td><td style="text-align: left;"> <em>Contents</em></td>
</tr>
<tr>
 <td style="text-align: left;">
<code>ar_greylist.txt</code>                     </td><td style="text-align: left;"> -                       </td><td style="text-align: left;"> Suspicious/malfunctioning floats</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>ar_index_global_meta.txt.gz</code>         </td><td style="text-align: left;"> -                       </td><td style="text-align: left;"> Metadata files</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>ar_index_global_prof.txt.gz</code>         </td><td style="text-align: left;"> <code>"argo"</code> or <code>"core"</code>    </td><td style="text-align: left;"> Argo data</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>ar_index_global_tech.txt.gz</code>         </td><td style="text-align: left;"> -                       </td><td style="text-align: left;"> Technical files</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>ar_index_global_traj.txt.gz</code>         </td><td style="text-align: left;"> <code>"traj"</code>                </td><td style="text-align: left;"> Trajectory files</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>argo_bio-profile_index.txt.gz</code>       </td><td style="text-align: left;"> <code>"bgc"</code> or <code>"bgcargo"</code>  </td><td style="text-align: left;"> Biogeochemical Argo data (without S or T)</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>argo_bio-traj_index.txt.gz</code>          </td><td style="text-align: left;"> <code>"bio-traj"</code>            </td><td style="text-align: left;"> Bio-trajectory files</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>argo_synthetic-profile_index.txt.gz</code> </td><td style="text-align: left;"> <code>"synthetic"</code>           </td><td style="text-align: left;"> Synthetic data, successor to <code>"merge"</code></td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p><strong>Using a previously downloaded index</strong>
</p>
<p>In some situations, it can be desirable to work with local
index file that has been copied directly from a remote server.
This can be useful if there is a desire to work with the files
in R separately from the <code>argoFloats</code> package, or with python, etc.
It can also be useful for group work, in which it is important for
all participants to use the same source file.
</p>
<p>This need can be handled with <code><a href="#topic+getIndex">getIndex()</a></code>, by specifying <code>filename</code>
as the full path name to the previously downloaded file, and
at the same time specifying <code>server</code> as NULL. This works for
both the raw files as downloaded from the server (which end
in <code>.gz</code>, and for the R-data-archive files produced by <code><a href="#topic+getIndex">getIndex()</a></code>,
which end in <code>.rda</code>. Since the <code>.rda</code> files load an order
of magnitude faster than the <code>.gz</code> files, this is usually
the preferred approach.  However, if the <code>.gz</code> files are preferred,
perhaps because part of a software chain uses python code that
works with such files, then it should be noted that calling
<code>getIndex()</code> with <code>keep=TRUE</code> will save the <code>.gz</code> file in
the <code>destdir</code> directory.
</p>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+argoFloats-class">argoFloats</a></code> with type=<code>"index"</code>, which
is suitable as the first argument of <code><a href="#topic+getProfiles">getProfiles()</a></code>.
</p>


<h3>Author(s)</h3>

<p>Dan Kelley and Jaimie Harbin
</p>


<h3>References</h3>

<p>Kelley, D. E., Harbin, J., &amp; Richards, C. (2021). argoFloats: An R package for analyzing
Argo data. Frontiers in Marine Science, (8), 636922.
<a href="https://doi.org/10.3389/fmars.2021.635922">doi:10.3389/fmars.2021.635922</a>
</p>

<hr>
<h2 id='getProfileFromUrl'>Get Data for an Argo Float Profile</h2><span id='topic+getProfileFromUrl'></span>

<h3>Description</h3>

<p>Get Data for an Argo Float Profile
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getProfileFromUrl(
  url = NULL,
  destdir = argoDefaultDestdir(),
  destfile = NULL,
  age = argoDefaultProfileAge(),
  retries = 3,
  quiet = FALSE,
  debug = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getProfileFromUrl_+3A_url">url</code></td>
<td>
<p>character value giving the URL for a NetCDF file containing an
particular profile of a particular Argo float.</p>
</td></tr>
<tr><td><code id="getProfileFromUrl_+3A_destdir">destdir</code></td>
<td>
<p>character value indicating the directory in which to store
downloaded files. The default value is to compute this using
<code><a href="#topic+argoDefaultDestdir">argoDefaultDestdir()</a></code>, which returns <code style="white-space: pre;">&#8288;~/data/argo&#8288;</code> by default,
although it also provides ways to set other values using
<code><a href="base.html#topic+options">options()</a></code>.
Set <code>destdir=NULL</code>
if <code>destfile</code> is a filename with full path information.
File clutter is reduced by creating a top-level directory called
<code>data</code>, with subdirectories for various file types; see
&ldquo;Examples&rdquo;.</p>
</td></tr>
<tr><td><code id="getProfileFromUrl_+3A_destfile">destfile</code></td>
<td>
<p>optional character value that specifies the name to be used
for the downloaded file. If this is not specified, then a name is determined
from the value of <code>url</code>.</p>
</td></tr>
<tr><td><code id="getProfileFromUrl_+3A_age">age</code></td>
<td>
<p>a numerical value indicating a time interval, in days.  If the file
to be downloaded from the server already exists locally, and was created
is less than <code>age</code> days in the past, it will not be downloaded.  The default,
<code><a href="#topic+argoDefaultProfileAge">argoDefaultProfileAge()</a></code>, is one year.  Setting <code>age=0</code> will force a download.</p>
</td></tr>
<tr><td><code id="getProfileFromUrl_+3A_retries">retries</code></td>
<td>
<p>integer telling how many times to retry a download,
if the first attempt fails.</p>
</td></tr>
<tr><td><code id="getProfileFromUrl_+3A_quiet">quiet</code></td>
<td>
<p>logical value; use <code>FALSE</code> to show more
verbose information when downloading files.
(Even if <code>quiet</code> is TRUE, problems will still be reported.)</p>
</td></tr>
<tr><td><code id="getProfileFromUrl_+3A_debug">debug</code></td>
<td>
<p>integer value indicating level of debugging. If this
is less than 1, no debugging is done. Otherwise, some functions
will print debugging information.  If a function call fails, the
first step should be to rerun the function with <code>debug=1</code>,
to see if the output suggests a problem in the call.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character value naming the local location of the downloaded file,
or <code>NA</code> if the file could not be downloaded.
</p>


<h3>Author(s)</h3>

<p>Dan Kelley
</p>

<hr>
<h2 id='getProfiles'>Get &quot;cycles&quot;/&quot;trajectory&quot; Files Named in an argoFloats Index</h2><span id='topic+getProfiles'></span>

<h3>Description</h3>

<p>This takes an index constructed with <code><a href="#topic+getIndex">getIndex()</a></code>, possibly
after focusing with <code><a href="#topic+subset+2CargoFloats-method">subset,argoFloats-method()</a></code>, and creates
a list of files to download from the server named in the index.
Then these files are downloaded to the <code>destdir</code> directory,
using filenames inferred from the source filenames. The
value returned by <code><a href="#topic+getProfiles">getProfiles()</a></code> is suitable for use
by <code><a href="#topic+readProfiles">readProfiles()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getProfiles(
  index,
  destdir = argoDefaultDestdir(),
  age = argoDefaultProfileAge(),
  retries = 3,
  skip = TRUE,
  quiet = TRUE,
  debug = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getProfiles_+3A_index">index</code></td>
<td>
<p>an <code><a href="#topic+argoFloats-class">argoFloats</a></code> object of type <code>"index"</code>, as created
by <code><a href="#topic+getIndex">getIndex()</a></code>.</p>
</td></tr>
<tr><td><code id="getProfiles_+3A_destdir">destdir</code></td>
<td>
<p>character value indicating the directory in which to store
downloaded files. The default value is to compute this using
<code><a href="#topic+argoDefaultDestdir">argoDefaultDestdir()</a></code>, which returns <code style="white-space: pre;">&#8288;~/data/argo&#8288;</code> by default,
although it also provides ways to set other values using
<code><a href="base.html#topic+options">options()</a></code>.
Set <code>destdir=NULL</code>
if <code>destfile</code> is a filename with full path information.
File clutter is reduced by creating a top-level directory called
<code>data</code>, with subdirectories for various file types; see
&ldquo;Examples&rdquo;.</p>
</td></tr>
<tr><td><code id="getProfiles_+3A_age">age</code></td>
<td>
<p>Option 1) a numerical value indicating a time interval, in days.
If the file to be downloaded from the server already exists locally,
and was created is less than age days in the past, it will not be downloaded.
The default is one year. Setting age=0 will force a download.
Option 2) &quot;latest&quot; meaning the file will only be downloaded if
A) the file doesn't exist or B) the file does exist and the time
it was created is older than the date_update in the index file</p>
</td></tr>
<tr><td><code id="getProfiles_+3A_retries">retries</code></td>
<td>
<p>integer telling how many times to retry a download,
if the first attempt fails.</p>
</td></tr>
<tr><td><code id="getProfiles_+3A_skip">skip</code></td>
<td>
<p>A logical value indicating whether to skip over netcdf
files that cannot be downloaded from the server.  This is <code>FALSE</code> by
default, so that <code><a href="#topic+getProfiles">getProfiles()</a></code> will raise an error if it is
impossible to re-download an outdated file.  This is not
unexpected with built-in index files, e.g. <code>data(index)</code>,
because this package cannot be updated every time the Argo
servers change the names of netcdf files.  However, users
are commonly working with index files they created with
<code><a href="#topic+getIndex">getIndex()</a></code>, so they ought to be up-to-date.</p>
</td></tr>
<tr><td><code id="getProfiles_+3A_quiet">quiet</code></td>
<td>
<p>logical value; use <code>FALSE</code> to show more
verbose information when downloading files.
(Even if <code>quiet</code> is TRUE, problems will still be reported.)</p>
</td></tr>
<tr><td><code id="getProfiles_+3A_debug">debug</code></td>
<td>
<p>integer value indicating level of debugging. If this
is less than 1, no debugging is done. Otherwise, some functions
will print debugging information.  If a function call fails, the
first step should be to rerun the function with <code>debug=1</code>,
to see if the output suggests a problem in the call.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It should be noted that the constructed server URL follows
a different pattern on the USGODAE an Ifremer servers, and
so if some other server is used, the URL may be wrong, leading
to an error.  Similarly, if the patterns on these two
servers change, then <code><a href="#topic+getProfiles">getProfiles()</a></code> will fail. Users who
encounter such problems are requested to report them
to the authors.
</p>
<p>If a particular data file cannot be downloaded after multiple trials, then
the behaviour depends on the value of the <code>skip</code> argument.  If that is
<code>TRUE</code> then a <code>NA</code> value is inserted in the corresponding
spot in the return value, but if it is <code>FALSE</code> (the default), then an error is reported.
Note that <code><a href="#topic+readProfiles">readProfiles()</a></code> skips over any such <code>NA</code> entries,
while reporting their positions within <code>index</code>.
For more on this function, see Kelley et al. (2021).
</p>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+argoFloats-class">argoFloats</a></code> with type=<code>"profiles"</code>, the
<code>data</code> slot of which contains two items: <code>url</code>,
which holds the URLs from which the NetCDF
files were downloaded, and <code>file</code>, which
holds the path names of the downloaded files; the latter
is used by <code><a href="#topic+readProfiles">readProfiles()</a></code>.
</p>


<h3>Author(s)</h3>

<p>Dan Kelley
</p>


<h3>References</h3>

<p>Kelley, D. E., Harbin, J., &amp; Richards, C. (2021). argoFloats: An R package for analyzing
Argo data. Frontiers in Marine Science, (8), 636922.
<a href="https://doi.org/10.3389/fmars.2021.635922">doi:10.3389/fmars.2021.635922</a>
</p>

<hr>
<h2 id='hexToBits'>Convert Hexadecimal Digit to Integer Vector</h2><span id='topic+hexToBits'></span>

<h3>Description</h3>

<p><code>hexToBits</code> converts a string holding hexadecimal digits to a sequence of integers
0 or 1, for the bits.  This is mainly for for use within <code><a href="#topic+showQCTests">showQCTests()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hexToBits(hex)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hexToBits_+3A_hex">hex</code></td>
<td>
<p>a vector of character values corresponding to a sequence of one or more
hexadecimal digits (i.e. <code>"0"</code> through <code>"9"</code>,<code>"a"</code> through <code>"f"</code>, or <code>"A"</code> through <code>"F"</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer vector holding the bits as values 0 or 1.  The
inverse of 'mathematical' order is used, as is the case for the base
R function <code><a href="base.html#topic+rawToBits">rawToBits()</a></code>; see the &ldquo;Examples&rdquo;.
</p>


<h3>Author(s)</h3>

<p>Jaimie Harbin and Dan Kelley
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(argoFloats)
hexToBits('3')    # 1 1 0 0
hexToBits('4000') # 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0

</code></pre>

<hr>
<h2 id='index'>A Sample Index of Profiles</h2><span id='topic+index'></span>

<h3>Description</h3>

<p>This was created by subsetting a global index to the Argo profiles
that were within a 200km radius of Marsh Harbour, Abaco Island,
Bahamas, using the following code.
</p>
<div class="sourceCode"><pre>indexAll &lt;- getIndex()
index &lt;- subset(indexAll,
    circle=list(longitude=-77.06, latitude=26.54, radius=200))
</pre></div>


<h3>Caveat about out-of-date index files</h3>

<p>Note that the NetCDF files on Argo repositories are changeable,
not just in content, but also in file name.  For example, the data acquired
in a given profile of a given float may initially be provided in real-time
mode (with a file name containing an &quot;R&quot; as the first or second character),
but later be replaced later with a delayed-mode file (with a &quot;D&quot; in the first
or second character). Since index files name data files directly, this means
that index files can become out-of-date, containing references to netcdf
files that no longer exist on the server. This applies to the sample
index files provided with this package, and to user files, and it
explains why <code><a href="#topic+getProfiles">getProfiles()</a></code> skips over files that cannot be downloaded.
</p>


<h3>See Also</h3>

<p>Other datasets provided with argoFloats: 
<code><a href="#topic+indexBgc">indexBgc</a></code>,
<code><a href="#topic+indexDeep">indexDeep</a></code>,
<code><a href="#topic+indexSynthetic">indexSynthetic</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(argoFloats)
data(index)
plot(index, bathymetry=FALSE)
</code></pre>

<hr>
<h2 id='indexBgc'>A Sample Index of Biogeochemical-Argo Profiles</h2><span id='topic+indexBgc'></span>

<h3>Description</h3>

<p>This was created by subsetting a global index to the BGC Argo profiles
that were within a 300km radius of Marsh Harbour, Abaco Island,
Bahamas, using the following code.
</p>
<div class="sourceCode"><pre>library(argoFloats)
indexAll &lt;- getIndex("bgc")
indexBgc &lt;- subset(indexAll,
    circle=list(longitude=-77.06, latitude=26.54, radius=300))
</pre></div>


<h3>Caveat about out-of-date index files</h3>

<p>Note that the NetCDF files on Argo repositories are changeable,
not just in content, but also in file name.  For example, the data acquired
in a given profile of a given float may initially be provided in real-time
mode (with a file name containing an &quot;R&quot; as the first or second character),
but later be replaced later with a delayed-mode file (with a &quot;D&quot; in the first
or second character). Since index files name data files directly, this means
that index files can become out-of-date, containing references to netcdf
files that no longer exist on the server. This applies to the sample
index files provided with this package, and to user files, and it
explains why <code><a href="#topic+getProfiles">getProfiles()</a></code> skips over files that cannot be downloaded.
</p>


<h3>See Also</h3>

<p>Other datasets provided with argoFloats: 
<code><a href="#topic+indexDeep">indexDeep</a></code>,
<code><a href="#topic+indexSynthetic">indexSynthetic</a></code>,
<code><a href="#topic+index">index</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(argoFloats)
data(indexBgc)
plot(indexBgc, bathymetry=FALSE)
summary(indexBgc)
unique(indexBgc[["parameters"]])
</code></pre>

<hr>
<h2 id='indexDeep'>A Sample Index of Deep Argo</h2><span id='topic+indexDeep'></span>

<h3>Description</h3>

<p>This was created by subsetting a global index to the deep Argo profiles
that were within a 800km radius of Antarctica (67S,105E),
using the following code.
</p>
<div class="sourceCode"><pre>library(argoFloats)
subset &lt;- subset(getIndex(), deep=TRUE)
sub2 &lt;- subset(subset, circle=list(longitude=105, latitude=-67, radius=800))
</pre></div>


<h3>Caveat about out-of-date index files</h3>

<p>Note that the NetCDF files on Argo repositories are changeable,
not just in content, but also in file name.  For example, the data acquired
in a given profile of a given float may initially be provided in real-time
mode (with a file name containing an &quot;R&quot; as the first or second character),
but later be replaced later with a delayed-mode file (with a &quot;D&quot; in the first
or second character). Since index files name data files directly, this means
that index files can become out-of-date, containing references to netcdf
files that no longer exist on the server. This applies to the sample
index files provided with this package, and to user files, and it
explains why <code><a href="#topic+getProfiles">getProfiles()</a></code> skips over files that cannot be downloaded.
</p>


<h3>See Also</h3>

<p>Other datasets provided with argoFloats: 
<code><a href="#topic+indexBgc">indexBgc</a></code>,
<code><a href="#topic+indexSynthetic">indexSynthetic</a></code>,
<code><a href="#topic+index">index</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(argoFloats)
data(indexDeep)
plot(indexDeep, bathymetry=FALSE)
summary(indexDeep)
</code></pre>

<hr>
<h2 id='indexSynthetic'>A Sample Index of Synthetic Profiles</h2><span id='topic+indexSynthetic'></span>

<h3>Description</h3>

<p>This was created by subsetting a global index to the BGC Argo profiles
that were within a 300km radius of Marsh Harbour, Abaco Island,
Bahamas, using the following code.
</p>
<div class="sourceCode"><pre>library(argoFloats)
indexAll &lt;- getIndex("synthetic")
indexSynthetic &lt;- subset(indexAll,
    circle=list(longitude=-77.06, latitude=26.54, radius=300))
</pre></div>
<p>This &quot;synthetic&quot; type of index is a replacement for the older &quot;merged&quot; index.  See
<code style="white-space: pre;">&#8288;http://www.argodatamgt.org/Data-Mgt-Team/News/BGC-Argo-synthetic-profiles-distributed-on-GDAC&#8288;</code>
for more on the data file format, the reasons for the change, and the
timetable for the transition from &quot;merged&quot;.
</p>


<h3>Caveat about out-of-date index files</h3>

<p>Note that the NetCDF files on Argo repositories are changeable,
not just in content, but also in file name.  For example, the data acquired
in a given profile of a given float may initially be provided in real-time
mode (with a file name containing an &quot;R&quot; as the first or second character),
but later be replaced later with a delayed-mode file (with a &quot;D&quot; in the first
or second character). Since index files name data files directly, this means
that index files can become out-of-date, containing references to netcdf
files that no longer exist on the server. This applies to the sample
index files provided with this package, and to user files, and it
explains why <code><a href="#topic+getProfiles">getProfiles()</a></code> skips over files that cannot be downloaded.
</p>


<h3>See Also</h3>

<p>Other datasets provided with argoFloats: 
<code><a href="#topic+indexBgc">indexBgc</a></code>,
<code><a href="#topic+indexDeep">indexDeep</a></code>,
<code><a href="#topic+index">index</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(argoFloats)
data(indexSynthetic)
plot(indexSynthetic, bathymetry=FALSE)
summary(indexSynthetic)
unique(indexSynthetic[["parameters"]])
</code></pre>

<hr>
<h2 id='mapApp'>Interactive App For Viewing Argo Float Positions</h2><span id='topic+mapApp'></span>

<h3>Description</h3>

<p><code><a href="#topic+mapApp">mapApp()</a></code> sets up an interactive &quot;shiny app&quot; session for exploring
the spatial-temporal distribution of Argo profiles.  The graphical
user interface (GUI) is meant to be reasonably self-explanatory,
and a button labelled Help yields a pop-up window with
more information that might not be evident at first glance.
A number of keystrokes exist to assist the user including: <br />
<strong>u</strong>: undo previous actions <br />
<strong>i</strong>: zoom in <br />
<strong>o</strong>: zoom out <br />
<strong>n</strong>: go north <br />
<strong>e</strong>: go east <br />
<strong>s</strong>: go south <br />
<strong>w</strong>: go west <br />
<strong>f</strong>: go forward in time <br />
<strong>b</strong>: go backward in time <br />
<strong>r</strong>: reset to initial state <br />
<strong>h</strong>: hold active hover message (press h again to undo) <br />
<strong>0</strong>: unzoom an area <br />
<strong>d</strong>: toggle debugging flag <br />
More details are provided in the rest of this documentation
page, and in Section 4 of Kelley et al. (2021).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mapApp(
  age = argoDefaultIndexAge(),
  server = argoDefaultServer(),
  destdir = argoDefaultDestdir(),
  colLand = "lightgray",
  debug = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mapApp_+3A_age">age</code></td>
<td>
<p>numeric value indicating how old a downloaded file
must be (in days), for it to be considered out-of-date.  The
default, <code><a href="#topic+argoDefaultIndexAge">argoDefaultIndexAge()</a></code>, limits downloads to once per day, as a way
to avoid slowing down a workflow with a download that might take
a minute or so. Note that setting <code>age=0</code> will force a new
download, regardless of the age of the local file.</p>
</td></tr>
<tr><td><code id="mapApp_+3A_server">server</code></td>
<td>
<p>character value, or vector of character values, indicating the name of
servers that supply argo data to be acquired with <code><a href="#topic+getIndex">getIndex()</a></code>.  If not supplied,
the default will be determined with <code><a href="#topic+argoDefaultServer">argoDefaultServer()</a></code>, which uses
a value set by <code>options("argoFloats.server"=URL)</code>
where <code>URL</code> is an appropriate URL, or <code>"ifremer-https"</code> if no such option was
set.</p>
</td></tr>
<tr><td><code id="mapApp_+3A_destdir">destdir</code></td>
<td>
<p>character value indicating the directory in which to store
downloaded files. The default value is to compute this using
<code><a href="#topic+argoDefaultDestdir">argoDefaultDestdir()</a></code>, which returns <code style="white-space: pre;">&#8288;~/data/argo&#8288;</code> by default,
although it also provides ways to set other values using
<code><a href="base.html#topic+options">options()</a></code>.
Set <code>destdir=NULL</code>
if <code>destfile</code> is a filename with full path information.
File clutter is reduced by creating a top-level directory called
<code>data</code>, with subdirectories for various file types; see
&ldquo;Examples&rdquo;.</p>
</td></tr>
<tr><td><code id="mapApp_+3A_colland">colLand</code></td>
<td>
<p>a colour specification for the land.</p>
</td></tr>
<tr><td><code id="mapApp_+3A_debug">debug</code></td>
<td>
<p>integer value that controls how much information <code>mapApp()</code> prints
to the console as it works.  The default value of 0 leads to a fairly limited
amount of printing, while higher values lead to more information. This information
can be helpful in diagnosing problems or bottlenecks.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code><a href="#topic+mapApp">mapApp()</a></code> uses <code><a href="#topic+getIndex">getIndex()</a></code> to download index files from an Argo server
the first time it runs.  This can be slow, taking a minute or more, depending
on the internet connection and load on the server.  Once the index
files are downloaded, <code><a href="#topic+mapApp">mapApp()</a></code> categorizes profiles as Core,
BGC, or Deep (which may be displayed in any combination, using
GUI elements).
</p>
<p>The <code>hi-res</code> button will only affect the coastline, not the topography,
unless there is a local file named <code>topoWorldFine.rda</code> that contains
an alternative topographic information. Here is how to create such a file:
</p>
<div class="sourceCode R"><pre>library(oce)
topoFile &lt;- download.topo(west=-180, east=180,
                          south=-90, north=90,
                          resolution=10,
                          format="netcdf", destdir=".")
topoWorldFine &lt;- read.topo(topoFile)
save(topoWorldFine, file="topoWorldFine.rda")
unlink(topoFile) # clean up
</pre></div>


<h3>Value</h3>

<p><code>mapApp</code> has no return value, since it creates a shiny app by passing
control to <code><a href="shiny.html#topic+runApp">shiny::runApp()</a></code>, which never returns.
</p>


<h3>Author(s)</h3>

<p>Dan Kelley and Jaimie Harbin
</p>


<h3>References</h3>

<p>Kelley, D. E., Harbin, J., &amp; Richards, C. (2021).
argoFloats: An R package for analyzing Argo data.
Frontiers in Marine Science, (8), 636922.
<a href="https://doi.org/10.3389/fmars.2021.635922">doi:10.3389/fmars.2021.635922</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
    library(argoFloats)
    mapApp()
}

</code></pre>

<hr>
<h2 id='merge+2CargoFloats-method'>Merge argoFloats Indices</h2><span id='topic+merge+2CargoFloats-method'></span>

<h3>Description</h3>

<p>Merge argoFloats Indices
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'argoFloats'
merge(x, y, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="merge+2B2CargoFloats-method_+3A_x">x</code>, <code id="merge+2B2CargoFloats-method_+3A_y">y</code></td>
<td>
<p>two <code><a href="#topic+argoFloats-class">argoFloats</a></code> objects of type <code>index</code>, e.g. as created by <code><a href="#topic+getIndex">getIndex()</a></code>.</p>
</td></tr>
<tr><td><code id="merge+2B2CargoFloats-method_+3A_...">...</code></td>
<td>
<p>optional additional objects like <code>x</code> and <code>y</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code><a href="#topic+argoFloats-class">argoFloats</a></code> object of type <code>index</code>.
</p>


<h3>Author(s)</h3>

<p>Dan Kelley
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(argoFloats)
data(index)

# Index of floats within 50km of Abaca Island
C &lt;- subset(index, circle=list(longitude=-77.5, latitude=27.5, radius=50))

# Index of floats within a rectangle near Abaca Island
lonRect &lt;- c(-76.5, -76)
latRect &lt;- c(26.5, 27.5)
R &lt;- subset(index, rectangle=list(longitude=lonRect, latitude=latRect))

RC &lt;- merge(C, R)

plot(RC, bathymetry=FALSE)


</code></pre>

<hr>
<h2 id='plot+2CargoFloats-method'>Plot an argoFloats Object</h2><span id='topic+plot+2CargoFloats-method'></span>

<h3>Description</h3>

<p>The action depends on the <code>type</code> of the object, and
this is set up by the function that created the object;
see &ldquo;Details&rdquo;. These are basic plot styles, with
somewhat limited scope for customization. Since the data with
<a href="#topic+argoFloats-class">argoFloats</a> objects are easy to extract, users should
not find it difficult to create their own plots to meet a
particular aesthetic. See &ldquo;Examples&rdquo; and Kelley et al. (2021)
for more plotting examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'argoFloats'
plot(
  x,
  which = "map",
  bathymetry = argoDefaultBathymetry(),
  geographical = 0,
  xlim = NULL,
  ylim = NULL,
  xlab = NULL,
  ylab = NULL,
  type = "p",
  cex = par("cex"),
  col = par("fg"),
  pch = par("pch"),
  bg = par("bg"),
  eos = "gsw",
  mapControl = NULL,
  profileControl = NULL,
  QCControl = NULL,
  summaryControl = NULL,
  TSControl = NULL,
  debug = 0,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_x">x</code></td>
<td>
<p>an <code><a href="#topic+argoFloats-class">argoFloats</a></code> object.</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_which">which</code></td>
<td>
<p>a character value indicating the type of plot. The possible
choices are <code>"map"</code>, <code>"profile"</code>, <code>"QC"</code>, <code>"summary"</code> and <code>"TS"</code>;
see &ldquo;Details&rdquo;.</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_bathymetry">bathymetry</code></td>
<td>
<p>an argument used only if <code>which="map"</code>, to control
whether (and how) to indicate water depth. Note that the default
was <code>TRUE</code> until 2021-12-02, but was changed to <code>FALSE</code> on that
date, to avoid a bathymetry download, which can be a slow operations.
See &ldquo;Details&rdquo; for details,
and Example 4 for a hint on compensating for the margin
adjustment done if an image is used to show bathymetry.</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_geographical">geographical</code></td>
<td>
<p>flag indicating the style of axes
for the <code>which="map"</code> case, but only if no projection is called
for in the <code>mapControl</code> argument.  With <code>geographical=0</code> (which
is the default), the axis ticks are labeled with signed
longitudes and latitudes, measured in degrees. The signs are dropped
with <code>geographical=1</code>.
In the <code>geographical=4</code> case, signs are also dropped, but hemispheres
are indicated by writing <code>S</code>, <code>N</code>, <code>W</code> or <code>E</code> after axis tick labels,
except at the equator and prime meridian.
Note that this scheme mimics that used by <code><a href="oce.html#topic+plot-coastline-method">oce::plot,coastline-method()</a></code>.</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_xlim">xlim</code>, <code id="plot+2B2CargoFloats-method_+3A_ylim">ylim</code></td>
<td>
<p>numerical values, each a two-element vector, that
set the <code>x</code> and <code>y</code> limits of plot axes, as for <code><a href="graphics.html#topic+plot.default">plot.default()</a></code> and
other conventional plotting functions.</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_xlab">xlab</code></td>
<td>
<p>a character value indicating the name for the horizontal axis, or
<code>NULL</code>, which indicates that this function should choose an appropriate name
depending on the value of <code>which</code>. Note that <code>xlab</code> is not obeyed if
<code>which="TS"</code>, because altering that label can be confusing to the user.</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_ylab">ylab</code></td>
<td>
<p>as <code>xlab</code>, but for the vertical axis.</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_type">type</code></td>
<td>
<p>a character value that controls the line type, with <code>"p"</code> for
unconnected points, <code>"l"</code> for line segments between undrawn points, etc.;
see the docs for <code><a href="graphics.html#topic+par">par()</a></code>, If <code>type</code> not specified, it defaults to <code>"p"</code>.</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_cex">cex</code></td>
<td>
<p>a character expansion factor for plot symbols, or <code>NULL</code>, to get an
value that depends on the value of <code>which</code>.</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_col">col</code></td>
<td>
<p>the colour to be used for plot symbols, or <code>NULL</code>, to get an value
that depends on the value of <code>which</code> (see &ldquo;Details&rdquo;).  If <code>which="TS"</code>,
then the <code>TSControl</code> argument takes precedence over <code>col</code>.</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_pch">pch</code></td>
<td>
<p>an integer or character value indicating the type of plot symbol,
or <code>NULL</code>, to get a value that depends on the value of <code>which</code>.
(See <code><a href="graphics.html#topic+par">par()</a></code> for more on specifying <code>pch</code>.)</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_bg">bg</code></td>
<td>
<p>the colour to be used for plot symbol interior, for <code>pch</code>
values that distinguish between the interior of the symbol and the
border, e.g. for <code>pch=21</code>.</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_eos">eos</code></td>
<td>
<p>a character value indicating the equation of state to use
if <code>which="TS"</code>.  This must be <code>"gsw"</code> (the default) or <code>"unesco"</code>;
see <code><a href="oce.html#topic+plotTS">oce::plotTS()</a></code>.</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_mapcontrol">mapControl</code></td>
<td>
<p>a list that permits particular control of the <code>which="map"</code>
case.  If provided, it may contain elements named <code>bathymetry</code> (which
has the same effect as the parameter <code>bathymetry</code>), <code>colLand</code>
(which indicates the colour of the land), and <code>projection</code> (which
may be <code>FALSE</code>, meaning to plot longitude and latitude on rectilinear axes,
<code>TRUE</code>, meaning to plot with <code><a href="oce.html#topic+mapPlot">oce::mapPlot()</a></code>, using Mollweide projection that
is suitable mainly for world-scale views, or a character value that will be
supplied to <code><a href="oce.html#topic+mapPlot">oce::mapPlot()</a></code>.  If a projection is used, then the positions
of the Argo floats are plotted with <code><a href="oce.html#topic+mapPoints">oce::mapPoints()</a></code>, rather than with
<code><a href="graphics.html#topic+points">points()</a></code>, and if the user wishes to locate points with mouse clicks,
then <code><a href="oce.html#topic+mapLocator">oce::mapLocator()</a></code> must be used instead of <code><a href="graphics.html#topic+locator">locator()</a></code>.  If <code>bathymetry</code>
is not contained in <code>mapControl</code>, it defaults to <code>FALSE</code>, and if <code>projection</code>
is not supplied, it defaults to <code>FALSE</code>.  Note that <code>mapControl</code> takes
precedence over the <code>bathymetry</code> argument, if both are provided.
Also note that, at present, bathymetry cannot be shown with map projections.</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_profilecontrol">profileControl</code></td>
<td>
<p>a list that permits control of the <code>which="profile"</code>
case.  If provided, it may contain elements named <code>parameter</code> (a character value
naming the quantity to plot on the x axis), <code>ytype</code> (a character value equal to
either <code>"pressure"</code> or <code>"sigma0"</code>) and <code>connect</code> (a logical value indicating
whether to skip across <code>NA</code> values if the <code>type</code> argument is <code>"l"</code>, <code>"o"</code>,
or <code>"b"</code>).
If <code>profileControl</code> is not provided, it defaults to
<code>list(parameter="temperature", ytype="pressure", connect=FALSE)</code>. Alternatively,
if <code>profileControl</code> is missing any of the three elements, then they are
given defaults as in the previous sentence.</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_qccontrol">QCControl</code></td>
<td>
<p>a list that permits control of the <code>which="QC"</code>
case.  If provided, it may contain an element named <code>parameter</code>, a character
value naming the quantity for which the quality-control information is
to be plotted, and an element named <code>dataStateIndicator</code>, a logical
value controlling whether to add a panel showing this quantity
(see Reference Table 6 of reference 1 to learn more
about what is encoded in <code>dataStateIndicator</code>).
If not provided, <code>QCControl</code> defaults to
<code>list(parameter="temperature",dataStateIndicator=FALSE)</code>.</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_summarycontrol">summaryControl</code></td>
<td>
<p>a list that permits control of the <code>which="summary"</code>.
If provided, it should contain an element named <code>items</code>, a character vector
naming the items to be shown.  The possible entries in this vector are
<code>"dataStateIndicator"</code> (see Reference Table 6 of reference 1,
for more information on this quantity), <code>"length"</code> (the number of levels
in the profile), <code>"deepest"</code> (the highest pressure recorded),
<code>"longitude"</code> and <code>"latitude"</code>. If <code>summaryControl</code> is not provided,
all of these will be shown.  If all the elements of <code>x</code> have the same
<code>ID</code>, then the top panel will have ticks on its top axis, indicating
the <code>cycle</code>.</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_tscontrol">TSControl</code></td>
<td>
<p>a list that permits control of the <code>which="TS"</code>
case, and is ignored for the other cases. If <code>TSControl</code> is
supplied, then other arguments that normally control plots
are ignored.  <code>TSControl</code> may have elements named
<code>drawByCycle</code>, <code>cex</code>, <code>col</code>, <code>pch</code>, <code style="white-space: pre;">&#8288;lty, &#8288;</code>lwd<code>and</code>type<code style="white-space: pre;">&#8288;.  The first of these is a logical value indicating whether to plot individual cycles with different aesthetic characteristics, and the other elements describe those characteristics in the usual way.  By default, &#8288;</code>type<code>is</code>&quot;p&quot;<code style="white-space: pre;">&#8288;, and the point characteristics are given by the other parameters, which are passed to [rep()] to have one value per cycle.  For example, &#8288;</code>TSControl=list(drawByCycle=TRUE,col=1:2,type=&quot;l&quot;)' indicates
to draw lines for the individual cycles, with the first being
black, the second red, the third black, etc.
<strong>FIXME: THIS IS NOT CODED YET.</strong></p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_debug">debug</code></td>
<td>
<p>an integer specifying the level of debugging.</p>
</td></tr>
<tr><td><code id="plot+2B2CargoFloats-method_+3A_...">...</code></td>
<td>
<p>extra arguments passed to the plot calls that are made
within this function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The various plot types are as follows.
</p>

<ul>
<li><p> For <code>which="map"</code>, a map of profile locations is created if subtype
is equal to cycles, or a rectangle highlighting the trajectory of a
float ID is created when subtype is equal to trajectories. This
only works if the <code>type</code> is <code>"index"</code> (meaning that <code>x</code> was created
by <code><a href="#topic+getIndex">getIndex()</a></code> or a subset of such an object, created with
<code><a href="#topic+subset+2CargoFloats-method">subset,argoFloats-method()</a></code>), or <code>argos</code> (meaning that
<code>x</code> was created with <code><a href="#topic+readProfiles">readProfiles()</a></code>.  The plot range is
auto-selected.  If the <code>ocedata</code> package
is available, then its <code>coastlineWorldFine</code> dataset is used to draw
a coastline (which will be visible only if the plot region
is large enough); otherwise, if the <code>oce</code> package is available, then its
<code>coastlineWorld</code> dataset is used.
The <code>bathymetry</code> argument controls whether (and how) to draw a map underlay
that shows water depth. There are three possible values for <code>bathymetry</code>:
</p>

<ol>
<li> <p><code>FALSE</code> (the default, via <code><a href="#topic+argoDefaultBathymetry">argoDefaultBathymetry()</a></code>), meaning not to draw bathymetry;
</p>
</li>
<li> <p><code>TRUE</code>, meaning to draw bathymetry as an
image, using data downloaded with <code><a href="oce.html#topic+download.topo">oce::download.topo()</a></code>.
Example 4 illustrates this, and also shows how to adjust
the margins after the plot, in case there is a need to add
extra graphical elements using <code><a href="graphics.html#topic+points">points()</a></code>, <code><a href="graphics.html#topic+lines">lines()</a></code>, etc.
</p>
</li>
<li><p> A list with items controlling both the bathymetry data and its
representation in the plot (see Example 4).  Those items are:
</p>

<ol>
<li> <p><code>source</code>, a mandatory value that is either
(a) the string <code>"auto"</code> (the default) to use
<code><a href="oce.html#topic+download.topo">oce::download.topo()</a></code> to download the data
or (b) a value returned by <code><a href="oce.html#topic+read.topo">oce::read.topo()</a></code>.
</p>
</li>
<li> <p><code>contour</code>, an optional logical value (with <code>FALSE</code> as the default)
indicating whether to represent
bathymetry with contours (with depths of 100m, 200m, 500m shown,
along with 1km, 2km up to 10km), as opposed to an image;
</p>
</li>
<li> <p><code>colormap</code>, ignored if <code>contour</code> is <code>TRUE</code>,
an optional value that is either the string <code>"auto"</code> (the default)
for a form of GEBCO colors computed with
<code><a href="oce.html#topic+oceColorsGebco">oce::oceColorsGebco()</a></code>, or a value computed with <code><a href="oce.html#topic+colormap">oce::colormap()</a></code>
applied to the bathymetry data; and
</p>
</li>
<li> <p><code>palette</code>, ignored if <code>contour</code> is <code>TRUE</code>,
an optional logical value (with <code>TRUE</code> as the default)
indicating whether to draw a depth-color
palette to the right of the plot.
Note that the default value for <code>bathymetry</code> is set by a call
to <code><a href="#topic+argoDefaultBathymetry">argoDefaultBathymetry()</a></code>, and that this second function can only handle possibilities
1 and 2 above.
</p>
</li></ol>

</li></ol>

</li>
<li><p> For <code>which="profile"</code>, a profile plot is created, showing the variation of
some quantity with pressure or potential density anomaly, as specified by the
<code>profileControl</code> argument.
</p>
</li>
<li><p> For <code>which="QC"</code>, two time-series panels are shown, with
time being that recorded in the individual profile in the dataset.
An additional argument named <code>parameter</code> must be given, to name the
quantity of interest.  The function only works if <code>x</code> is an
<code><a href="#topic+argoFloats-class">argoFloats</a></code> object created with <code><a href="#topic+readProfiles">readProfiles()</a></code>.
The top panel shows the percent of data flagged with codes
1 (meaning good data), 2 (probably good), 5 (changed)
or 8 (estimated), as a function of time (lower axis) and
(if all cycles are from a single Argo float)
cycle number (upper axis, with smaller font).
Thus, low values on the top panel reveal
profiles that are questionable. Note that if all of data at a given time
have flag 0, meaning not assessed, then a quality of 0 is plotted at that
time. The bottom panel shows the mean value of the parameter in question
regardless of the flag value.
</p>
</li>
<li><p> For <code>which="summary"</code>, one or more time-series panels are shown
in a vertical stack.  If there is only one ID in <code>x</code>, then the cycle
values are indicated along the top axis of the top panel. The choice
of panels is set by the <code>summaryControl</code> argument.
</p>
</li>
<li><p> For <code>which="TS"</code>, a TS plot is created, by calling <code><a href="#topic+plotArgoTS">plotArgoTS()</a></code>
with the specified <code>x</code>, <code>xlim</code>, <code>ylim</code>, <code>xlab</code>, <code>ylab</code>,
<code>type</code>, <code>cex</code>, <code>col</code>, <code>pch</code>, <code>bg</code>, <code>eos</code>, and <code>TSControl</code>,
along with <code>debug-1</code>.  See the help for <code><a href="#topic+plotArgoTS">plotArgoTS()</a></code>
for how these parameters are interpreted.
</p>
</li></ul>



<h3>Value</h3>

<p>None (invisible NULL).
</p>


<h3>Author(s)</h3>

<p>Dan Kelley and Jaimie Harbin
</p>


<h3>References</h3>


<ol>
<li><p> Carval, Thierry, Bob Keeley, Yasushi Takatsuki, Takashi Yoshida, Stephen Loch,
Claudia Schmid, and Roger Goldsmith. Argo User's Manual V3.3. Ifremer, 2019.
<code>doi:10.13155/29825</code>
</p>
</li>
<li><p> Kelley, D. E., Harbin, J., &amp; Richards, C. (2021). argoFloats: An R package for analyzing
Argo data. Frontiers in Marine Science, (8), 636922.
<a href="https://doi.org/10.3389/fmars.2021.635922">doi:10.3389/fmars.2021.635922</a>
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'># Example 1: map profiles in index
library(argoFloats)
data(index)
plot(index)

# Example 2: as Example 1, but narrow the margins and highlight floats
# within a circular region of diameter 100 km.
oldpar &lt;- par(no.readonly=TRUE)
par(mar=c(2, 2, 1, 1), mgp=c(2, 0.7, 0))
plot(index)
lon &lt;- index[["longitude"]]
lat &lt;- index[["latitude"]]
near &lt;- oce::geodDist(lon, lat, -77.06, 26.54) &lt; 100
R &lt;- subset(index, near)
points(R[["longitude"]], R[["latitude"]],
    cex=0.6, pch=20, col="red")
par(oldpar)

# Example 3: TS of a built-in data file.
f &lt;- system.file("extdata", "SR2902204_131.nc", package="argoFloats")
a &lt;- readProfiles(f)
oldpar &lt;- par(no.readonly=TRUE)
par(mar=c(3.3, 3.3, 1, 1), mgp=c(2, 0.7, 0)) # wide margins for axis names
plot(a, which="TS")
par(oldpar)

# Example 4: map with bathymetry. Note that par(mar) is adjusted
# for the bathymetry palette, so it must be adjusted again after
# the plot(), in order to add new plot elements.
# This example specifies a coarse bathymetry dataset that is provided
# by the 'oce' package.  In typical applications, the user will use
# a finer-scale dataset, either by using bathymetry=TRUE (which
# downloads a file appropriate for the plot view), or by using
# an already-downloaded file.
data(topoWorld, package="oce")
oldpar &lt;- par(no.readonly=TRUE)
par(mar=c(2, 2, 1, 2), mgp=c(2, 0.7, 0)) # narrow margins for a map
plot(index, bathymetry=list(source=topoWorld))
# For bathymetry plots that use images, plot() temporarily
# adds 2.75 to par("mar")[4] so the same must be done, in order
# to correctly position additional points (shown as black rings).
par(mar=par("mar") + c(0, 0, 0, 2.75))
points(index[["longitude"]], index[["latitude"]],
    cex=0.6, pch=20, col="red")
par(oldpar)

# Example 5. Simple contour version, using coarse dataset (ok on basin-scale).
# Hint: use oce::download.topo() to download high-resolution datasets to
# use instead of topoWorld.
oldpar &lt;- par(no.readonly=TRUE)
par(mar=c(2, 2, 1, 1))
data(topoWorld, package="oce")
plot(index, bathymetry=list(source=topoWorld, contour=TRUE))
par(oldpar)

# Example 6. Customized map, sidestepping plot,argoFloats-method().
lon &lt;- topoWorld[["longitude"]]
lat &lt;- topoWorld[["latitude"]]
asp &lt;- 1/cos(pi/180*mean(lat))
# Limit plot region to float region.
xlim &lt;- range(index[["longitude"]])
ylim &lt;- range(index[["latitude"]])
# Colourize 1km, 2km, etc, isobaths.
contour(x=lon, y=lat, z=topoWorld[["z"]], xlab="", ylab="",
    xlim=xlim, ylim=ylim, asp=asp,
    col=1:6, lwd=2, levels=-1000*1:6, drawlabels=FALSE)
# Show land
data(coastlineWorldFine, package="ocedata")
polygon(coastlineWorldFine[["longitude"]],
        coastlineWorldFine[["latitude"]], col="lightgray")
# Indicate float positions.
points(index[["longitude"]], index[["latitude"]], pch=20)


# Example 7: Temperature profile of the 131st cycle of float with ID 2902204
a &lt;- readProfiles(system.file("extdata", "SR2902204_131.nc", package="argoFloats"))
oldpar &lt;- par(no.readonly=TRUE)
par(mfrow=c(1, 1))
par(mgp=c(2, 0.7, 0))                  # mimic the oce::plotProfile() default
par(mar=c(1,3.5,3.5,2))                # mimic the oce::plotProfile() default
plot(a, which="profile")
par(oldpar)

# Example 8: As Example 7, but showing temperature dependence on potential density anomaly.
a &lt;- readProfiles(system.file("extdata", "SR2902204_131.nc", package="argoFloats"))
oldpar &lt;- par(no.readonly=TRUE)
par(mgp=c(2, 0.7, 0))                  # mimic the oce::plotProfile() default
par(mar=c(1,3.5,3.5,2))                # mimic the oce::plotProfile() default
plot(a, which="profile", profileControl=list(parameter="temperature", ytype="sigma0"))
par(oldpar)



</code></pre>

<hr>
<h2 id='plotArgoTS'>Plot a TS diagram for an argoFloats object</h2><span id='topic+plotArgoTS'></span>

<h3>Description</h3>

<p>Plot a TS diagram for an <a href="#topic+argoFloats-class">argoFloats</a> object that was created with
<code><a href="#topic+readProfiles">readProfiles()</a></code>.  This function is called by <code><a href="#topic+plot+2CargoFloats-method">plot,argoFloats-method()</a></code>,
but may also be called directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotArgoTS(
  x,
  xlim = NULL,
  ylim = NULL,
  type = "p",
  cex = 1,
  col = NULL,
  pch = 1,
  bg = "white",
  eos = "gsw",
  TSControl = NULL,
  debug = 0,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotArgoTS_+3A_x">x</code></td>
<td>
<p>an argoFloats object that was created with <code><a href="#topic+readProfiles">readProfiles()</a></code>.</p>
</td></tr>
<tr><td><code id="plotArgoTS_+3A_xlim">xlim</code>, <code id="plotArgoTS_+3A_ylim">ylim</code></td>
<td>
<p>optional limits of salinity and temperature axes; if not provided,
the plot region will be large enough to show all the data.</p>
</td></tr>
<tr><td><code id="plotArgoTS_+3A_type">type</code></td>
<td>
<p>character value indicating the of plot.  This has the same meaning
as for general R plots: <code>"p"</code> for points, <code>"l"</code> for lines, etc.  Note that
lines are joined up between cycles, unless the <code>TSControl</code> parameter indicates
otherwise.</p>
</td></tr>
<tr><td><code id="plotArgoTS_+3A_cex">cex</code>, <code id="plotArgoTS_+3A_col">col</code>, <code id="plotArgoTS_+3A_pch">pch</code>, <code id="plotArgoTS_+3A_bg">bg</code></td>
<td>
<p>values that have the same meaning as for general R plots
if <code>TSControl$groupByCycle</code> is FALSE, except that if <code>col</code> is not
provided by the user and if <code>type</code> is <code>"l"</code>, then the points
are colour-coded to indicate the value of data-quality flags.
Black symbols indicate good data, i.e. data for which the
flags for pressure, salinity and temperature are all in the set
(1, 2, 5, 8).  Red is used for bad data, with any of these three
variables being flagged in the set (3, 4, 6, 7). And, finally
gray is used if data that have not been assessed for quality,
with the flags for all three of these variables being 0.
(For more on flags, see Reference Table 2 in Section 3.2 of
reference 1.)</p>
</td></tr>
<tr><td><code id="plotArgoTS_+3A_eos">eos</code></td>
<td>
<p>character value, either <code>"gsw"</code> (the default) for the Gibbs-Seawater
(TEOS-10) equation of state or <code>"unesco"</code> for the 1980s-era UNESCO equation of
state.</p>
</td></tr>
<tr><td><code id="plotArgoTS_+3A_tscontrol">TSControl</code></td>
<td>
<p>an optional list that may have a logical element named <code>groupByCycle</code>,
meaning to group the data by cycle. If <code>TSControl</code> is not provided, it is set
to <code>list(groupByDefault=FALSE)</code>.  In grouped cases, the values of <code>cex</code>, <code>col</code>,
and <code>pch</code> are passed to <code><a href="base.html#topic+rep">rep()</a></code> to achieve the same length as the number of
cycles in <code>x</code>.  This can be useful in distinguishing between cycles.</p>
</td></tr>
<tr><td><code id="plotArgoTS_+3A_debug">debug</code></td>
<td>
<p>an integer controlling how much information is to be printed
during operation. Use 0 for silent work, 1 for some information and 2 for
more information.  Note that <code><a href="#topic+plot+2CargoFloats-method">plot,argoFloats-method()</a></code> reduces its <code>debug</code>
value by 1 before passing to <code><a href="#topic+plotArgoTS">plotArgoTS()</a></code>.</p>
</td></tr>
<tr><td><code id="plotArgoTS_+3A_...">...</code></td>
<td>
<p>extra arguments provided to <code><a href="oce.html#topic+plotTS">oce::plotTS()</a></code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Dan Kelley and Jaimie Harbin
</p>


<h3>References</h3>


<ol>
<li><p> Argo Data Management. “Argo User’s Manual.” Ifremer, July 5, 2022.
https://doi.org/10.13155/29825.
</p>
</li></ol>


<hr>
<h2 id='R3901602_163.nc'>Sample Argo File (Real-Time Core Data)</h2><span id='topic+R3901602_163.nc'></span>

<h3>Description</h3>

<p>This is NetCDF file for real-time data for cycle 163 of Argo float 3901602, downloaded from
<code>https://data-argo.ifremer.fr/dac/coriolis/3901602/profiles/R3901602_163.nc</code>
on 2021 March 7.
</p>


<h3>See Also</h3>

<p>Other raw datasets: 
<code><a href="#topic+D4900785_048.nc">D4900785_048.nc</a></code>,
<code><a href="#topic+SD5903586_001.nc">SD5903586_001.nc</a></code>,
<code><a href="#topic+SR2902204_131.nc">SR2902204_131.nc</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(argoFloats)
a &lt;- readProfiles(system.file("extdata", "R3901602_163.nc", package="argoFloats"))
summary(a)
summary(a[[1]])

</code></pre>

<hr>
<h2 id='readProfiles'>Read Argo Profiles From Local Files</h2><span id='topic+readProfiles'></span>

<h3>Description</h3>

<p>This works with either a vector of NetCDF files,
or a <code><a href="#topic+argoFloats-class">argoFloats</a></code> object of type <code>"profiles"</code>, as
created by <code><a href="#topic+getProfiles">getProfiles()</a></code>.
During the reading, argo profile objects are created with <code><a href="oce.html#topic+read.argo">oce::read.argo()</a></code>
or a replacement function provided as the <code>FUN</code> argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readProfiles(
  profiles,
  FUN,
  destdir = argoDefaultDestdir(),
  quiet = FALSE,
  debug = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readProfiles_+3A_profiles">profiles</code></td>
<td>
<p>either (1) a character vector that holds
the names of NetCDF files or (2) an <code><a href="#topic+argoFloats-class">argoFloats</a></code>
object created by <code><a href="#topic+getProfiles">getProfiles()</a></code>. In the first case, any
items that start with <code>"ftp:"</code> are taken to represent
the full paths to remote files, and these first downloaded
to the <code>destdir</code> directory using <code><a href="#topic+getProfileFromUrl">getProfileFromUrl()</a></code>.</p>
</td></tr>
<tr><td><code id="readProfiles_+3A_fun">FUN</code></td>
<td>
<p>a function that reads the NetCDF files in which the argo
profiles are stored.  If <code>FUN</code> not provided, then it defaults
to <code><a href="oce.html#topic+read.argo">oce::read.argo()</a></code>.  Only experts should consider anything
other than this default, or a wrapper to it.</p>
</td></tr>
<tr><td><code id="readProfiles_+3A_destdir">destdir</code></td>
<td>
<p>character value indicating the directory in which to store
downloaded files. The default value is to compute this using
<code><a href="#topic+argoDefaultDestdir">argoDefaultDestdir()</a></code>, which returns <code style="white-space: pre;">&#8288;~/data/argo&#8288;</code> by default,
although it also provides ways to set other values using
<code><a href="base.html#topic+options">options()</a></code>.
Set <code>destdir=NULL</code>
if <code>destfile</code> is a filename with full path information.
File clutter is reduced by creating a top-level directory called
<code>data</code>, with subdirectories for various file types; see
&ldquo;Examples&rdquo;.</p>
</td></tr>
<tr><td><code id="readProfiles_+3A_quiet">quiet</code></td>
<td>
<p>logical value; use <code>FALSE</code> to show more
verbose information when downloading files.
(Even if <code>quiet</code> is TRUE, problems will still be reported.)</p>
</td></tr>
<tr><td><code id="readProfiles_+3A_debug">debug</code></td>
<td>
<p>an integer specifying the level of debugging. If
this is zero, the work proceeds silently. If it is 1,
a small amount of debugging information is printed.  Note that
<code>debug-1</code> is passed to <code><a href="oce.html#topic+read.argo">oce::read.argo()</a></code>, which actually reads
the file, and so it will print messages if <code>debug</code> exceeds 1.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, warnings are issued about any
profiles in which 10 percent or more of the measurements are flagged
with a quality-control code of 0, 3, 4, 6, 7, or 9 (see the
<code><a href="#topic+applyQC">applyQC()</a></code> documentation for the meanings of these codes). For more
on this function, see section 2 of Kelley et al. (2021).
</p>


<h3>Value</h3>

<p>An <code><a href="#topic+argoFloats-class">argoFloats</a></code> object
with <code>type="argos"</code>, in which the <code>data</code> slot
contains a list named <code>argos</code> that holds objects
that are created by <code><a href="oce.html#topic+read.argo">oce::read.argo()</a></code>.
</p>


<h3>Author(s)</h3>

<p>Dan Kelley
</p>


<h3>References</h3>

<p>Kelley, D. E., Harbin, J., &amp; Richards, C. (2021). argoFloats: An R package for analyzing
Argo data. Frontiers in Marine Science, (8), 636922.
<a href="https://doi.org/10.3389/fmars.2021.635922">doi:10.3389/fmars.2021.635922</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Read from a local file
f &lt;- system.file("extdata", "SR2902204_131.nc", package="argoFloats")
p &lt;- readProfiles(f)

</code></pre>

<hr>
<h2 id='SD5903586_001.nc'>Sample Argo File (Delayed Synthetic Data)</h2><span id='topic+SD5903586_001.nc'></span>

<h3>Description</h3>

<p>This is the NetCDF file for cycle 1 of Argo float 5903586, downloaded from
<code>ftp://usgodae.org/pub/outgoing/argo/dac/aoml/5903586/profiles/SD5903586_001.nc</code>
on 2020 June 24 (this URL appears to be unreliable).
As its filename indicates, it holds &quot;synthetic&quot; data
in &quot;delayed&quot; mode. The oxygen values are adjusted by 16%, as
is shown here, and in the documentation for <code><a href="#topic+useAdjusted">useAdjusted()</a></code>.
</p>


<h3>See Also</h3>

<p>Other raw datasets: 
<code><a href="#topic+D4900785_048.nc">D4900785_048.nc</a></code>,
<code><a href="#topic+R3901602_163.nc">R3901602_163.nc</a></code>,
<code><a href="#topic+SR2902204_131.nc">SR2902204_131.nc</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(argoFloats)
a &lt;- readProfiles(system.file("extdata", "SD5903586_001.nc", package="argoFloats"))
a1 &lt;- a[[1]]
# Illustrate oxygen adjustment
p &lt;- a1[["pressure"]]
O &lt;- a1[["oxygen"]]
Oa  &lt;- a1[["oxygenAdjusted"]]
Percent &lt;- 100 * (Oa - O) / O
hist(Percent, main="Oxygen adjustment")

</code></pre>

<hr>
<h2 id='show+2CargoFloats-method'>Show Information About argoFloats Object</h2><span id='topic+show+2CargoFloats-method'></span>

<h3>Description</h3>

<p>This produces a one-line explanation of the contents of the object,
that typically indicates the type and the number of items referenced
by the object. Those items depend on the type of object:
URLs if <code>metadata$type</code> is <code>"index"</code>, local filenames if
<code>"profiles"</code>, or oce-created argo objects if <code>"argos"</code>.
As with other R <code>show()</code> methods, it may be invoked in an interactive
session just by typing the object, or by using <code>print()</code>; see the Examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'argoFloats'
show(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show+2B2CargoFloats-method_+3A_object">object</code></td>
<td>
<p>an <code><a href="#topic+argoFloats-class">argoFloats</a></code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None (invisible NULL).
</p>


<h3>Author(s)</h3>

<p>Jaimie Harbin
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(argoFloats)
data(index)
show(index)
print(index)
index

</code></pre>

<hr>
<h2 id='showQCTests'>Show Real-Time QC Test Results For an Argo Object</h2><span id='topic+showQCTests'></span>

<h3>Description</h3>

<p><code>showQCTests</code> prints a summary of the quality-control (QC) tests
(if any) that were performed on an Argo profile in real-time
(<strong>Caution</strong>: any tests completed and/or failed on delayed
mode data are not recorded. This function also assumes tests performed
or failed are recorded once, otherwise it produces
a warning).  It uses
<code><a href="#topic+hexToBits">hexToBits()</a></code> to decode the hexadecimal  values that may
be stored in <code>historyQCTest</code>. From there it pairs the determined
test values with the appropriate actions, QC Tests performed or QC
Tests failed, found in <code>historyAction</code> within the <code>metadata</code> slot
of an individual Argo profile, as read directly with <code><a href="oce.html#topic+read.argo">oce::read.argo()</a></code>
or indirectly with <code><a href="#topic+readProfiles">readProfiles()</a></code>, the latter being illustrated in the
&ldquo;Examples&rdquo; section below.  The &ldquo;Details&rdquo;
section provides an explanation of how <code>showQCTests</code> works
at a low level, as an adjunct to the Argo documentation.
See section 3.3 of Kelley et al. (2021) for more on this function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showQCTests(x, style = "brief")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="showQCTests_+3A_x">x</code></td>
<td>
<p>an <a href="oce.html#topic+argo-class">oce::argo</a> object, as read directly with <code><a href="oce.html#topic+read.argo">oce::read.argo()</a></code>
or as extracted from the return value of a call to <code><a href="#topic+readProfiles">readProfiles()</a></code>, as
in the &ldquo;Examples&rdquo;.</p>
</td></tr>
<tr><td><code id="showQCTests_+3A_style">style</code></td>
<td>
<p>a character value governing the output printed by <code>showQCFlags</code>,
either <code>"brief"</code> (the default) for a single line stating all the tests by
numbers, followed by lines giving the number and description of all failed tests,
or <code>"full"</code> for a listing of each test that was performed, with an indication
of whether <code>x</code> passes or fails it.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The format used in the <code>historyQCTest</code> and <code>historyAction</code>
elements of the <code>metadata</code> slot of an <a href="oce.html#topic+argo-class">oce::argo</a> object
is mentioned in Sections 2.2.7, 2.3.7, 5.1, 5.3 and 5.4
of reference 1, in which they are called
<code>HISTORY_QCTEST</code> and <code>HISTORY_ACTION</code>, respectively.
Both of these things are vectors of character values,
with the entries within <code>historyAction</code> providing names for
the entries within <code>historyQCTest</code>.
</p>
<p>In the context of <code>showQCTests</code>, the focus is on the element
of <code>historyAction</code> that equals <code>"QCP$"</code> (which maps to the element
of <code>historyQCTest</code> that specifies the QC tests that were
performed) and <code>"QCF$"</code> (which maps to the results of those
tests).  These mapped elements are character values providing
hexadecimal digits that are decoded with <code><a href="#topic+hexToBits">hexToBits()</a></code>, possibly after
lengthening the <code>historyQCTest</code> value matching<code>"QCF$"</code> by adding <code>"0"</code> digits
on the left to make the length be the same as that of the
<code>historyQCTest</code> value matching '&quot;QCP$&quot;.
</p>
<p>The bits decoded from the relevant elements of <code>historyQCTest</code>
correspond to QC tests as indicated in the following table.
This is based on Table 11 of reference 1,
after correcting the &quot;Number&quot; for test 18 from
261144 to 262144, because the former is not an
integral power of 2, suggesting a typo
in the manual (since the whole point of the numerical scheme
is that the individual bits map to individual tests).</p>

<table>
<tr>
 <td style="text-align: left;">
   Test </td><td style="text-align: left;"> Number </td><td style="text-align: left;"> Meaning </td>
</tr>
<tr>
 <td style="text-align: left;">
   1 </td><td style="text-align: left;"> 2 </td><td style="text-align: left;"> Platform Identification test </td>
</tr>
<tr>
 <td style="text-align: left;">
   2 </td><td style="text-align: left;"> 4 </td><td style="text-align: left;"> Impossible Date test </td>
</tr>
<tr>
 <td style="text-align: left;">
   3 </td><td style="text-align: left;"> 8 </td><td style="text-align: left;"> Impossible Location test </td>
</tr>
<tr>
 <td style="text-align: left;">
   4 </td><td style="text-align: left;"> 16 </td><td style="text-align: left;"> Position on Land test </td>
</tr>
<tr>
 <td style="text-align: left;">
   5 </td><td style="text-align: left;"> 32 </td><td style="text-align: left;"> Impossible Speed test </td>
</tr>
<tr>
 <td style="text-align: left;">
   6 </td><td style="text-align: left;"> 64 </td><td style="text-align: left;"> Global Range test </td>
</tr>
<tr>
 <td style="text-align: left;">
   7 </td><td style="text-align: left;"> 128 </td><td style="text-align: left;"> Regional Global Parameter test </td>
</tr>
<tr>
 <td style="text-align: left;">
   8 </td><td style="text-align: left;"> 256 </td><td style="text-align: left;"> Pressure Increasing test </td>
</tr>
<tr>
 <td style="text-align: left;">
   9 </td><td style="text-align: left;"> 512 </td><td style="text-align: left;"> Spike test </td>
</tr>
<tr>
 <td style="text-align: left;">
   10 </td><td style="text-align: left;"> 1024 </td><td style="text-align: left;"> Top and Bottom Spike test (obsolete) </td>
</tr>
<tr>
 <td style="text-align: left;">
   11 </td><td style="text-align: left;"> 2048 </td><td style="text-align: left;"> Gradient test </td>
</tr>
<tr>
 <td style="text-align: left;">
   12 </td><td style="text-align: left;"> 4096 </td><td style="text-align: left;"> Digit Rollover test </td>
</tr>
<tr>
 <td style="text-align: left;">
   13 </td><td style="text-align: left;"> 8192 </td><td style="text-align: left;"> Stuck Value test </td>
</tr>
<tr>
 <td style="text-align: left;">
   14 </td><td style="text-align: left;"> 16384 </td><td style="text-align: left;"> Density Inversion test </td>
</tr>
<tr>
 <td style="text-align: left;">
   15 </td><td style="text-align: left;"> 32768 </td><td style="text-align: left;"> Grey List test </td>
</tr>
<tr>
 <td style="text-align: left;">
   16 </td><td style="text-align: left;"> 65536 </td><td style="text-align: left;"> Gross Salinity or Temperature Sensor Drift test </td>
</tr>
<tr>
 <td style="text-align: left;">
   17 </td><td style="text-align: left;"> 131072 </td><td style="text-align: left;"> Visual QC test </td>
</tr>
<tr>
 <td style="text-align: left;">
   18 </td><td style="text-align: left;"> 262144 </td><td style="text-align: left;"> Frozen profile test </td>
</tr>
<tr>
 <td style="text-align: left;">
   19 </td><td style="text-align: left;"> 524288 </td><td style="text-align: left;"> Deepest pressure test </td>
</tr>
<tr>
 <td style="text-align: left;">
   20 </td><td style="text-align: left;"> 1048576 </td><td style="text-align: left;"> Questionable Argos position test </td>
</tr>
<tr>
 <td style="text-align: left;">
   21 </td><td style="text-align: left;"> 2097152 </td><td style="text-align: left;"> Near-surface unpumped CTD salinity test </td>
</tr>
<tr>
 <td style="text-align: left;">
   22 </td><td style="text-align: left;"> 4194304 </td><td style="text-align: left;"> Near-surface mixed air/water test </td>
</tr>
<tr>
 <td style="text-align: left;">
   23 </td><td style="text-align: left;"> 8388608 </td><td style="text-align: left;"> Interim rtqc flag scheme for data deeper than 2000 dbar </td>
</tr>
<tr>
 <td style="text-align: left;">
   24 </td><td style="text-align: left;"> 16777216 </td><td style="text-align: left;"> Interim rtqc flag scheme for data from experimental sensors </td>
</tr>
<tr>
 <td style="text-align: left;">
   25 </td><td style="text-align: left;"> 33554432 </td><td style="text-align: left;"> MEDD test </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Value</h3>

<p>This function returns nothing; its action is in the printing
of results.
</p>


<h3>Author(s)</h3>

<p>Jaimie Harbin and Dan Kelley
</p>


<h3>References</h3>


<ol>
<li><p> Carval, Thierry, Bob Keeley, Yasushi Takatsuki, Takashi Yoshida, Stephen Loch,
Claudia Schmid, and Roger Goldsmith. Argo User's Manual V3.3. Ifremer, 2019.
<code>doi:10.13155/29825</code>
</p>
</li>
<li><p> Kelley, D. E., Harbin, J., &amp; Richards, C. (2021). argoFloats: An R package for analyzing
Argo data. Frontiers in Marine Science, (8), 636922.
<a href="https://doi.org/10.3389/fmars.2021.635922">doi:10.3389/fmars.2021.635922</a>
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>library(argoFloats)
a &lt;- readProfiles(system.file("extdata", "D4900785_048.nc", package="argoFloats"))
showQCTests(a[[1]])

</code></pre>

<hr>
<h2 id='SR2902204_131.nc'>Sample Argo File (Real-Time Synthetic Data)</h2><span id='topic+SR2902204_131.nc'></span>

<h3>Description</h3>

<p>This is the NetCDF file for cycle 131 of Argo float 2902204, downloaded from
<code>ftp://ftp.ifremer.fr/ifremer/argo/dac/incois/2902204/profiles/SR2902204_131.nc</code>
on 2020 June 24.
As its filename indicates, it holds the &quot;synthetic&quot; version of &quot;real-time&quot; data.
</p>


<h3>See Also</h3>

<p>Other raw datasets: 
<code><a href="#topic+D4900785_048.nc">D4900785_048.nc</a></code>,
<code><a href="#topic+R3901602_163.nc">R3901602_163.nc</a></code>,
<code><a href="#topic+SD5903586_001.nc">SD5903586_001.nc</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(argoFloats)
a &lt;- readProfiles(system.file("extdata", "SR2902204_131.nc", package="argoFloats"))
summary(a)
summary(a[[1]])

</code></pre>

<hr>
<h2 id='subset+2CargoFloats-method'>Subset an argoFloats Object</h2><span id='topic+subset+2CargoFloats-method'></span>

<h3>Description</h3>

<p>Return a subset of an <code><a href="#topic+argoFloats-class">argoFloats</a></code> object.  This applies
only to objects of type <code>"index"</code>, as created with <code><a href="#topic+getIndex">getIndex()</a></code> or <code>subset()</code>
acting on such a value, or of type <code>"argos"</code>, as created with <code><a href="#topic+readProfiles">readProfiles()</a></code>.
(It cannot be used on objects of type <code>"profiles"</code>, as created with <code><a href="#topic+getProfiles">getProfiles()</a></code>.)
There are two ways to use <code>subset()</code>.  <strong>Method 1.</strong> supply
the <code>subset</code> argument.  This may be a logical vector indicating
which entries to keep (by analogy to the base-R <code>subset()</code>
function) or it may be an integer vector holding the indices of entries to
be retained. <strong>Method 2.</strong> do not supply <code>subset</code>.  In this
case, the action is determined by the third (<code>...</code>)
argument; see &lsquo;Details&rsquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'argoFloats'
subset(x, subset = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="subset+2B2CargoFloats-method_+3A_x">x</code></td>
<td>
<p>an <code><a href="#topic+argoFloats-class">argoFloats</a></code> object as created by <code><a href="#topic+getIndex">getIndex()</a></code>.</p>
</td></tr>
<tr><td><code id="subset+2B2CargoFloats-method_+3A_subset">subset</code></td>
<td>
<p>optional numerical or logical vector that indicates which
indices of <code>x@data$index</code> to keep (example 1).</p>
</td></tr>
<tr><td><code id="subset+2B2CargoFloats-method_+3A_...">...</code></td>
<td>
<p>the first entry here must be either (a) a list named <code>circle</code>,
<code>rectangle</code>, <code>polygon</code>, <code>parameter</code>, <code>time</code>, <code>institution</code>,
<code>ID</code>,<code>ocean</code>,<code>dataMode</code>,<code>cycle</code>, <code>direction</code>, <code>profile</code>, or <code>section</code>.
(examples 2 through 8, and 10 through 17),
or (b) a logical value named <code>deep</code> (example 9).  Optionally, this entry
may be followed by second entry named <code>silent</code>, which is a logical
value indicating whether to prevent the printing of messages that
indicate the number (and percentage) of data that are kept
during the subsetting operation.
See &ldquo;Details&rdquo; and &ldquo;Examples&rdquo;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The possibilities for the <code>...</code> argument are as follows.
</p>

<ol>
<li><p> An integer vector giving indices to keep.
</p>
</li>
<li><p> A list named <code>circle</code> with numeric elements named <code>longitude</code>,
<code>latitude</code> and <code>radius</code>.  The first two give the center of
the subset region, and the third gives the radius of
that region, in kilometers.
</p>
</li>
<li><p> A list named <code>rectangle</code> that has elements named
<code>longitude</code> and <code>latitude</code>, two-element numeric vectors
giving the western and eastern, and southern and northern
limits of the selection region.
</p>
</li>
<li><p> A list named <code>polygon</code> that has elements named <code>longitude</code> and <code>latitude</code>
that are numeric vectors specifying a polygon within which profiles
will be retained. The polygon must not be self-intersecting,
and an error message will be issued if it is.  If the polygon is not closed
(i.e. if the first and last points do not coincide) the first point is pasted
onto the end, to close it.
</p>
</li>
<li><p> A vector or list named <code>parameter</code> that holds character values that
specify the names of measured parameters to keep. See section 3.3 of
Reference 1 for a list of parameters.
</p>
</li>
<li><p> A list named <code>time</code> that has elements <code>from</code> and <code>to</code> that are either
POSIXt times, or character strings that <code>subset()</code> will convert to
POSIXt times using <code><a href="base.html#topic+as.POSIXct">as.POSIXct()</a></code> with <code>tz="UTC"</code>.
</p>
</li>
<li><p> A list named <code>institution</code> that holds a single character element that
names the institution.  The permitted values are:
<code>"AO"</code> for Atlantic Oceanographic and Meteorological Laboratory;
<code>"BO"</code> for British Oceanographic Data Centre;
<code>"CS"</code> for Commonwealth Scientific and Industrial Research Organization;
<code>"HZ"</code> for China Second Institute of Oceanography;
<code>"IF"</code> for Ifremer, France;
<code>"IN"</code> for India National Centre for Ocean Information Services;
<code>"JA"</code> for Japan Meteorological Agency;
<code>"KM"</code> for Korea Meteorological Agency;
<code>"KO"</code> for Korea Ocean Research and Development Institute;
<code>"ME"</code> for Marine Environment Data Section; and
<code>"NM"</code> for National Marine Data &amp; Information Service.
</p>
</li>
<li><p> A list named <code>deep</code> that holds a logical value indicating whether argo floats
are deep argo (i.e. <code>profiler_type</code> 849, 862, and 864).
</p>
</li>
<li><p> A list named <code>ID</code> that holds a character value specifying a float identifier.
</p>
</li>
<li><p> A list named <code>ocean</code> that  holds a single character element that names the
ocean. The permitted values are:
<code>"A"</code> for Atlantic Ocean Area, from 70 W to 20 E,
<code>"P"</code> for Pacific Ocean Area, from 145 E to 70 W, and
<code>"I"</code> for Indian Ocean Area, from 20 E to 145 E.
</p>
</li>
<li><p> A character value named <code>dataMode</code>, equal to either <code>realtime</code> or <code>delayed</code>,
that selects whether to retain real-time data or delayed data.  There are two
possibilities, depending on the <code>type</code> of the <code>x</code> argument.
<strong>Case 1.</strong> If <code>x</code> is of <code>type="index"</code>, then the subset is done by looking for the letters
<code>R</code> or <code>D</code> in the source filename. Note that a file in the
latter category may contain some profiles that are of delayed mode <em>and also</em>
some profiles that are of <code>realtime</code> or <code>adjusted</code> mode.
<strong>Case 2.</strong> If <code>x</code> is
of type <code>argos</code>, then the subset operation is done for each profile within
the dataset. Sometimes this will yield data arrays with zero columns.
</p>
</li>
<li><p> An integer or character value named <code>cycle</code> that specifies which cycles are to be retained.
This is done by regular-expression matching of the filename, looking between the
underline character (<code>"_"</code>) and the suffix (<code>.nc</code>), but note that the expression
is made up of a compulsory component comprising 3 or 4 digits, and an optional
component that is either blank or the character <code>"D"</code> (which designates a
descending profile).  Thus, <code>001</code> will match both <code style="white-space: pre;">&#8288;*_001.nc&#8288;</code> and <code style="white-space: pre;">&#8288;*_001D.nc&#8288;</code>.
Note this can be used for both <code>"index"</code> and <code>"argos"</code> types.
</p>
</li>
<li><p> A character value named <code>direction</code>, equal to either &quot;descent&quot; or &quot;ascent&quot;,
that selects whether to retain data from the ascent or decent phase.
</p>
</li>
<li><p> An integer value named <code>profile</code> that selects which profiles
to retain.  Note that this type of subset is possible only
for objects of type <code>"argos"</code>.
</p>
</li>
<li><p> An integer value named <code>cycle</code> that selects which cycles
to retain.
</p>
</li>
<li><p> A character value named <code>dataStateIndicator</code>, equal to either &quot;0A&quot;, &quot;1A&quot;,
&quot;2B&quot;, &quot;2B+&quot;, &quot;2C&quot;, &quot;2C+&quot;, &quot;3B&quot;, or &quot;3C&quot; that selects which <code>dataStateIndicator</code>
to keep (see table 6 of Reference 1 for details of these codes).
This operation only works for objects of type <code>"argos"</code>.
</p>
</li>
<li><p> A list named <code>section</code> that  has four elements:
<code>longitude</code>,<code>latitude</code>, <code>width</code>, and <code>segments</code>. The first two of these
are numeric vectors that define the spine of the section, in degrees East
and North, respectively.  These are both mandatory, while both <code>width</code> and <code>segments</code>
are optional. If given, <code>width</code> is taken as maximal distance between an Argo
and the spine, for that float to be retained. If <code>width</code> is not given, it
defaults to 100km.  If given, <code>segments</code> is either <code>NULL</code> or a positive
integer.  Setting <code>segments</code> to <code>NULL</code> will cause the float-spine distance
to be computed along a great-circle route.  By contrast, if <code>segments</code> is an
integer, then the spine is traced using <code>stats::approx()</code>, creating
<code>segments</code> new points.  If <code>segments</code> is not provided, it defaults to 100.
</p>
</li></ol>

<p>In all cases, the notation is that longitude is positive
for degrees East and negative for degrees West, and that latitude
is positive for degrees North and negative for degrees South.
For more on this function, see Kelley et al. (2021).
</p>


<h3>Value</h3>

<p>An <code><a href="#topic+argoFloats-class">argoFloats</a></code> object, restricted as indicated.
</p>


<h3>Author(s)</h3>

<p>Dan Kelley and Jaimie Harbin
</p>


<h3>References</h3>


<ol>
<li><p> Carval, Thierry, Bob Keeley, Yasushi Takatsuki, Takashi Yoshida, Stephen Loch,
Claudia Schmid, and Roger Goldsmith. Argo User's Manual V3.3. Ifremer, 2019.
<code>doi:10.13155/29825</code>.
</p>
</li>
<li><p> Kelley, D. E., Harbin, J., &amp; Richards, C. (2021). argoFloats: An R package for analyzing
Argo data. Frontiers in Marine Science, (8), 636922.
<a href="https://doi.org/10.3389/fmars.2021.635922">doi:10.3389/fmars.2021.635922</a>
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>library(argoFloats)
data(index)
data(indexSynthetic)

# Subset to the first 3 profiles in the (built-in) index
indexFirst3 &lt;- subset(index, 1:3)

# Subset to a circle near Abaco Island
indexCircle &lt;- subset(index, circle=list(longitude=-77.5, latitude=27.5, radius=50))

# Subset to a rectangle near Abaco Island
lonlim &lt;- c(-76.5, -76)
latlim &lt;- c(26.5, 27.5)
indexRectangle &lt;- subset(index, rectangle=list(longitude=lonlim, latitude=latlim))

# Subset to a polygon near Abaco Island
lonp &lt;- c(-77.492, -78.219, -77.904, -77.213, -76.728, -77.492)
latp &lt;- c( 26.244,  25.247,  24.749,  24.987,  25.421,  26.244)
indexPolygon &lt;- subset(index, polygon=list(longitude=lonp, latitude=latp))

# Subset to year 2019
index2019 &lt;- subset(index, time=list(from="2019-01-01", to="2019-12-31"))

# Subset to Canadian MEDS data
indexMEDS &lt;- subset(index, institution="ME")

# Subset to profiles with oxygen data
indexOxygen &lt;- subset(indexSynthetic, parameter="DOXY")

# Subset to profiles with both salinity and 380-nm downward irradiance data
indexSalinityIrradiance &lt;- subset(indexSynthetic, parameter=c("PSAL", "DOWN_IRRADIANCE380"))

</code></pre>

<hr>
<h2 id='summary+2CargoFloats-method'>Summarize an argoFloats Object</h2><span id='topic+summary+2CargoFloats-method'></span>

<h3>Description</h3>

<p>Show some key facts about an <code><a href="#topic+argoFloats-class">argoFloats</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'argoFloats'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary+2B2CargoFloats-method_+3A_object">object</code></td>
<td>
<p>an <code><a href="#topic+argoFloats-class">argoFloats</a></code> object.</p>
</td></tr>
<tr><td><code id="summary+2B2CargoFloats-method_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None (invisible NULL).
</p>


<h3>Author(s)</h3>

<p>Dan Kelley
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(argoFloats)
data(index)
summary(index)

</code></pre>

<hr>
<h2 id='useAdjusted'>Switch [[ and Plot to Focus on Adjusted Data, if Available</h2><span id='topic+useAdjusted'></span>

<h3>Description</h3>

<p><code>useAdjusted</code> returns a copy of an <code><a href="#topic+argoFloats-class">argoFloats</a></code> object
within which the individual
<a href="oce.html#topic+argo-class">oce::argo</a> objects may have been modified so that future calls to
<code><a href="#topic++5B+5B+2CargoFloats-method">[[,argoFloats-method</a></code>
or <code><a href="#topic+plot+2CargoFloats-method">plot,argoFloats-method</a></code>
will focus with
<em>adjusted</em> versions of the data. (Note that this modification cannot
be done for fields that lack adjusted values, so in such cases future
calls to
<code><a href="#topic++5B+5B+2CargoFloats-method">[[,argoFloats-method</a></code>
or
<code><a href="#topic+plot+2CargoFloats-method">plot,argoFloats-method</a></code>
work with the unadjusted fields.)
The procedure is done profile by profile and parameter by parameter.
The <code>fallback</code> argument offers a way to &rdquo;fall back&rdquo; to unadjusted
values, depending on the data-mode (real-time, adjusted or delayed)
for individual items; see &ldquo;Details&rdquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>useAdjusted(argos, fallback = FALSE, debug = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="useAdjusted_+3A_argos">argos</code></td>
<td>
<p>an <code><a href="#topic+argoFloats-class">argoFloats</a></code> object, as read by <code><a href="#topic+readProfiles">readProfiles()</a></code>.</p>
</td></tr>
<tr><td><code id="useAdjusted_+3A_fallback">fallback</code></td>
<td>
<p>a logical value indicating whether to 'fall back' from
adjusted data to raw data for profiles that are in real-time mode.  By
default, <code>fallback</code> is <code>FALSE</code>, to focus entirely on
adjusted data.  See &ldquo;Details&rdquo;.</p>
</td></tr>
<tr><td><code id="useAdjusted_+3A_debug">debug</code></td>
<td>
<p>an integer that controls whether debugging information is printed
during processing.  If <code>debug</code> is 0 or less, then no information is printed.
If it is 1 then minimal overall information is printed.  If it exceeds 1,
then information is printed for each Argo cycle contained in <code>argos</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>There are two cases.  First, if <code>fallback</code> is <code>FALSE</code> (which the default)
then the focus switches entirely
to the adjusted data.  This improves the overall reliability of the results,
but at the cost of eliminating real-time data.  This is because the
adjusted fields for real-time data are set to <code>NA</code> as a matter of policy (see
section 2.2.5 of reference 1).
</p>
<p>Wider data coverage is obtained  if <code>fallback</code> is <code>TRUE</code>.  In this
case, the focus is shifted to adjusted data <em>only if</em> the data-mode for
the individual profiles is <code>A</code> or <code>D</code>, indicating either Adjusted or
Delayed mode. Any profiles that are of the <code>R</code> (Realtime) data-mode are
left unaltered. This blending of adjusted and unadjusted data offers
improved spatial and temporal coverage, while reducing the overall
data quality, and so this approach should be used with caution. For more
on this function see section 3.4 of Kelley et. al (2021).
</p>


<h3>Value</h3>

<p><code>useAdjusted</code> returns an <code><a href="#topic+argoFloats-class">argoFloats</a></code> object that is similar to
its first argument, but which is set up so that future calls to
<code><a href="#topic++5B+5B+2CargoFloats-method">[[,argoFloats-method</a></code> or <code><a href="#topic+plot+2CargoFloats-method">plot,argoFloats-method</a></code>
will focus on the &quot;adjusted&quot; data stream.
</p>


<h3>Author(s)</h3>

<p>Dan Kelley, Jaimie Harbin and Clark Richards
</p>


<h3>References</h3>


<ol>
<li><p> Argo Data Management Team. &quot;Argo User's Manual V3.4,&quot;
January 20, 2021. <code style="white-space: pre;">&#8288;https://archimer.ifremer.fr/doc/00187/29825/&#8288;</code>
</p>
</li>
<li><p> Kelley, D. E., Harbin, J., &amp; Richards, C. (2021). argoFloats: An R package for analyzing
Argo data. Frontiers in Marine Science, (8), 636922.
<a href="https://doi.org/10.3389/fmars.2021.635922">doi:10.3389/fmars.2021.635922</a>
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>library(argoFloats)
file &lt;- "SD5903586_001.nc"
raw &lt;- readProfiles(system.file("extdata", file, package="argoFloats"))
adj &lt;- useAdjusted(raw)
# Autoscale with adjusted values so frame shows both raw and adjusted.
plot(adj, which="profile", profileControl=list(parameter="oxygen"), pch=2)
points(raw[[1]][["oxygen"]], raw[[1]][["pressure"]], pch=1)
legend("bottomright", pch=c(2,1), legend=c("Raw", "Adjusted"))

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
