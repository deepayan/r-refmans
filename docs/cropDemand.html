<!DOCTYPE html><html lang="en-US"><head><title>Help for package cropDemand</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {cropDemand}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#download_terraclimate'><p>Download of reference evapotranspiration (eto) and rainfall (ppt) from 'TerraClimate'</p></a></li>
<li><a href='#eto_calibration'><p>Calibration of reference evapotranspiration (eto) of 'TerraClimate'</p></a></li>
<li><a href='#loadROI'><p>Load image data to do crop water demand</p></a></li>
<li><a href='#monthly_stack'><p>Function to calculate the mean monthly rainfall/reference evapotranspiration to generate the crop water demand</p></a></li>
<li><a href='#plot_AWC'><p>Function to plot the percentage of Available Water Capacity (AWC)</p></a></li>
<li><a href='#ppt_calibration'><p>Calibration of rainfall (ppt) of 'TerraClimate'</p></a></li>
<li><a href='#see_brazil_biomes'><p>Function to see the Brazilian biomes available tp use in download.terraclimate and loadROI function</p></a></li>
<li><a href='#see_brazil_states'><p>Function to see the Brazilian states available to use in download.terraclimate and loadROI function</p></a></li>
<li><a href='#waterDemand'><p>Function to generate the  water demand based in available water capacity of the soil</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Spatial Crop Water Demand for Brazil</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Estimation of crop water demand can be processed via this package. As example, the data  from 'TerraClimate' dataset (<a href="https://www.climatologylab.org/terraclimate.html">https://www.climatologylab.org/terraclimate.html</a>) calibrated with automatic weather stations of National Meteorological Institute of Brazil is available in a coarse spatial resolution to do the crop water demand. However, the user have also the option to download the variables directly from 'TerraClimate' repository with the download.terraclimate function  and access the original 'TerraClimate' products. If the user believes that is necessary calibrate the variables, there is another function to do it. Lastly, the estimation of the crop water demand present in this package can be run for all the Brazilian territory with 'TerraClimate' dataset. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://creativecommons.org/licenses/by/4.0">CC BY 4.0</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0),</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr(&ge; 0.3.0.1), ggplot2(&ge; 3.3.2), terra, sf, tidyr, ncdf4</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/FilgueirasR/cropDemand/issues">https://github.com/FilgueirasR/cropDemand/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-13 18:11:17 UTC; betof</td>
</tr>
<tr>
<td>Author:</td>
<td>Roberto Filgueiras
    <a href="https://orcid.org/0000-0002-0186-8907"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Luan P. Venancio <a href="https://orcid.org/0000-0002-5544-8588"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Catariny C. Aleman
    <a href="https://orcid.org/0000-0002-3894-3077"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Fernando F. da Cunha
    <a href="https://orcid.org/0000-0002-1671-1021"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Roberto Filgueiras &lt;betofilgueiras@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-13 18:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='download_terraclimate'>Download of reference evapotranspiration (eto) and rainfall (ppt) from 'TerraClimate'</h2><span id='topic+download_terraclimate'></span>

<h3>Description</h3>

<p>This function will download the eto and ppt and will load a SpatRaster according to the the region of interest (Region and sub_region).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_terraclimate(dir_out, variable, years, region, sub_region)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_terraclimate_+3A_dir_out">dir_out</code></td>
<td>
<p>Directory where you want to save the raster images that you are goind to download.</p>
</td></tr>
<tr><td><code id="download_terraclimate_+3A_variable">variable</code></td>
<td>
<p>Variable to download. This function will download the eto or ppt (SpatRaster).</p>
</td></tr>
<tr><td><code id="download_terraclimate_+3A_years">years</code></td>
<td>
<p>The period in years that the function should download images.</p>
</td></tr>
<tr><td><code id="download_terraclimate_+3A_region">region</code></td>
<td>
<p>Use the &quot;brazil&quot; shapefile to extract the SpatRaster (variable) for one state (Brazilian state), or use the &quot;biomes_brazil&quot; to extract the SpatRaster (variable) for one biome of Brazil.</p>
</td></tr>
<tr><td><code id="download_terraclimate_+3A_sub_region">sub_region</code></td>
<td>
<p>You have two options in this section, if you choice the brazil (in region parameter) you need to choice the Brazilian states, but if you choice the biomes_brazil (in region parameter) you must choice one of Brazilian biomes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Download for the region of interest the ppt (Rainfall) or eto (reference evapotranspiration) SpatRaster
</p>


<h3>References</h3>

<p>The images used in this package can be found in the paper: Abatzoglou, J.T., S.Z. Dobrowski, S.A. Parks, K.C. Hegewisch, 2018, Terraclimate, a high-resolution global dataset of monthly climate and climatic water balance from 1958-2015, Scientific Data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

### Downloading eto based on Brazil states.
see_brazil_states()

img&lt;-download_terraclimate(variable = "eto",
                          years = c(2018:2019),
                          region = "brazil",
                          sub_region = 13)

### Downloading the ppt based on Brazil biomes.
see_brazil_biomes()

img&lt;-download_terraclimate(variable = "ppt",
                          years = c(2018:2019),
                          region = "biomes_brazil",
                          sub_region = 6)

## End(Not run)
</code></pre>

<hr>
<h2 id='eto_calibration'>Calibration of reference evapotranspiration (eto) of 'TerraClimate'</h2><span id='topic+eto_calibration'></span>

<h3>Description</h3>

<p>This function will calibrate the reference evapotranspiration (eto) from TerraClimate dataset based in the relationship with observed weather stations data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eto_calibration(slope, intercept, eto_stack)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eto_calibration_+3A_slope">slope</code></td>
<td>
<p>the slope of the linear regression (numeric).</p>
</td></tr>
<tr><td><code id="eto_calibration_+3A_intercept">intercept</code></td>
<td>
<p>the intercept of the linear regression (numeric).</p>
</td></tr>
<tr><td><code id="eto_calibration_+3A_eto_stack">eto_stack</code></td>
<td>
<p>stack of eto.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a SpatRaster of eto calibrated.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
eto_cal&lt;- eto_calibration(slope = 0.930073,
                           intercept = 22.399986, eto_stack = etp);

## End(Not run)
</code></pre>

<hr>
<h2 id='loadROI'>Load image data to do crop water demand</h2><span id='topic+loadROI'></span>

<h3>Description</h3>

<p>This fuction will load the evapotranspiration and rainfall data for the region of interest (ROI).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadROI(variable, region, sub_region)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loadROI_+3A_variable">variable</code></td>
<td>
<p>Stack of evapotranspiration or rainfall (SpatRaster).</p>
</td></tr>
<tr><td><code id="loadROI_+3A_region">region</code></td>
<td>
<p>Use the &quot;brazil&quot; shp file to extract the SpatRaster (variable) for one state (Brazilian state), or use the &quot;biomes_brazil&quot; to extract the SpatRaster (variable) for one biome of Brazil.</p>
</td></tr>
<tr><td><code id="loadROI_+3A_sub_region">sub_region</code></td>
<td>
<p>You have two options in this section, if you choice the brazil (in region parameter) you need to choice the Brazilian states, but if you choice the biomes-brazil (in region parameter) you must choice one of Brazilian biomes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Load the reference evapotranspiration (eto) or rainfall (ppt) SpatRaster
</p>


<h3>References</h3>

<p>The images used in this package can be found in the paper: Abatzoglou, J.T., S.Z. Dobrowski, S.A. Parks, K.C. Hegewisch, 2018, Terraclimate, a high-resolution global dataset of monthly climate and climatic water balance from 1958-2015, Scientific Data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#For Brazilian states

see_brazil_states()

image_etp&lt;-loadROI(variable = "eto", region = "brazil",
                    sub_region = 13) # sub_regions 1:27

image_rainfall&lt;-loadROI(variable = "ppt",
                        region = "brazil", sub_region = 13)

#For Brazilian Biomes:

see_brazil_biomes()

image_tmin&lt;- loadROI(variable = "eto", region = "biomes_brazil",
                      sub_region = 2)# sub regions: 1:6 (biomes)


## End(Not run)
</code></pre>

<hr>
<h2 id='monthly_stack'>Function to calculate the mean monthly rainfall/reference evapotranspiration to generate the crop water demand</h2><span id='topic+monthly_stack'></span>

<h3>Description</h3>

<p>This function will calculate the mean monthly air temperature based on the period of time selected (start_date and end_date).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>monthly_stack(stack, start_date, end_date)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="monthly_stack_+3A_stack">stack</code></td>
<td>
<p>Stack of mean rainfall/reference evapotranspiration SpatRaster</p>
</td></tr>
<tr><td><code id="monthly_stack_+3A_start_date">start_date</code></td>
<td>
<p>Date that start the investigation, should be in the following format (2000-01-01 /Year-Month-Day)</p>
</td></tr>
<tr><td><code id="monthly_stack_+3A_end_date">end_date</code></td>
<td>
<p>Date that end the investigation, should be in the following format (2017-12-31 /Year-Month-Day)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a SpatRaster with a monthly mean air temperature from a period of time
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
start_date &lt;- c('2000-01-01')
end_date &lt;- c('2017-12-01')
monthly_rainfall &lt;- monthly_stack(stack = rainfall_stack,
                                  start_date = start_date, end_date = end_date)

## End(Not run)
</code></pre>

<hr>
<h2 id='plot_AWC'>Function to plot the percentage of Available Water Capacity (AWC)</h2><span id='topic+plot_AWC'></span>

<h3>Description</h3>

<p>This function will plot the monthly AWC
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_AWC(AWC_stack)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_AWC_+3A_awc_stack">AWC_stack</code></td>
<td>
<p>A SpatRaster generated in WaterDemand function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a  plot (gg file) of monthly percentage of AWC
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
plot_AWC(AWC_stack)

## End(Not run)
</code></pre>

<hr>
<h2 id='ppt_calibration'>Calibration of rainfall (ppt) of 'TerraClimate'</h2><span id='topic+ppt_calibration'></span>

<h3>Description</h3>

<p>This fuction will calibrate the rainfall (ppt) from TerraClimate dataset based in the relationship with observed weather stations data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ppt_calibration(slope, intercept, ppt_stack)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ppt_calibration_+3A_slope">slope</code></td>
<td>
<p>the slope of the linear regression (numeric).</p>
</td></tr>
<tr><td><code id="ppt_calibration_+3A_intercept">intercept</code></td>
<td>
<p>the intercept of the linear regression (numeric).</p>
</td></tr>
<tr><td><code id="ppt_calibration_+3A_ppt_stack">ppt_stack</code></td>
<td>
<p>stack of ppt.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a SpatRaster of ppt calibrated.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

ppt_cal&lt;- ppt_calibration(slope = 0.7000972,
                          intercept = 23.753785, ppt_stack = ppt);

## End(Not run)
</code></pre>

<hr>
<h2 id='see_brazil_biomes'>Function to see the Brazilian biomes available tp use in download.terraclimate and loadROI function</h2><span id='topic+see_brazil_biomes'></span>

<h3>Description</h3>

<p>This function will show the biomes available in the package and how we can call each biome polygon.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>see_brazil_biomes()
</code></pre>


<h3>Value</h3>

<p>The biomes information available to run the cropDemand package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
see_brazil_biomes()

## End(Not run)
</code></pre>

<hr>
<h2 id='see_brazil_states'>Function to see the Brazilian states available to use in download.terraclimate and loadROI function</h2><span id='topic+see_brazil_states'></span>

<h3>Description</h3>

<p>This function will show the Brazilian state available in the package and how we can call each state polygon.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>see_brazil_states()
</code></pre>


<h3>Value</h3>

<p>The Brazilian state information available in the package to run the cropDemand package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
see_brazil_states()

## End(Not run)
</code></pre>

<hr>
<h2 id='waterDemand'>Function to generate the  water demand based in available water capacity of the soil</h2><span id='topic+waterDemand'></span>

<h3>Description</h3>

<p>This function will calculate the water balance parameters based in the available water capacity informed (AWC).
The output water balance parameters for this function are:
</p>

<ol>
<li><p> ARM - storage;
</p>
</li>
<li><p> ALT - alteration;
</p>
</li>
<li><p> ETR - actual evapotranspiration;
</p>
</li>
<li><p> DEF - deficit;
</p>
</li>
<li><p> EXC - excess;
</p>
</li>
<li><p> REP - replacement;
</p>
</li>
<li><p> RET - withdrawal;
</p>
</li>
<li><p> AWC_arm - percentage of storage compared to AWC;
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>waterDemand(out_dir, ppt_stack, eto_stack, AWC)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="waterDemand_+3A_out_dir">out_dir</code></td>
<td>
<p>output directory where you want to save the variables</p>
</td></tr>
<tr><td><code id="waterDemand_+3A_ppt_stack">ppt_stack</code></td>
<td>
<p>Stack of mean rainfall Rasterstack calculated in monthly_stack function</p>
</td></tr>
<tr><td><code id="waterDemand_+3A_eto_stack">eto_stack</code></td>
<td>
<p>Stack of mean evapotranspiration Rasterstack calculated in monthly_stack function</p>
</td></tr>
<tr><td><code id="waterDemand_+3A_awc">AWC</code></td>
<td>
<p>The available water capacity (AWC) that the function will use in the calculations. The AWC value must be chosen according to the crop (root system depth) you want to obtain the water balance.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns multiple Rasterstack object as output (explained in description).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cwd&lt;- waterDemand(out_dir = "G:/My computer/test/CropWaterDemand",
                  ppt_stack = rainfall_image, eto_stack = eto_image, AWC = 100)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
