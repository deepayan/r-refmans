<!DOCTYPE html><html lang="en-US"><head><title>Help for package sdtmchecks</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {sdtmchecks}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#sdtmchecks-package'><p>sdtmchecks: Data Quality Checks for Study Data Tabulation Model (SDTM) Datasets</p></a></li>
<li><a href='#+25has_all+25'><p>Check if data frame has all specified variables</p></a></li>
<li><a href='#+25has_any+25'><p>Check if data frame has at least one of the specified variables</p></a></li>
<li><a href='#+25lacks_all+25'><p>Check if data frame is missing any of the specified variables</p></a></li>
<li><a href='#+25lacks_any+25'><p>Check if data frame has at least one variable from a set of specified variables</p></a></li>
<li><a href='#check_ae_aeacn_ds_disctx_covid'><p>Check for COVID-19 AE with DRUG WITHDRAWN action without &quot;ADVERSE EVENT&quot; for DS Trt Discon</p></a></li>
<li><a href='#check_ae_aeacnoth'><p>Check for null AEACNOT1/2 when AEACNOTH = 'MULTIPLE'</p></a></li>
<li><a href='#check_ae_aeacnoth_ds_disctx'><p>Check if, whenever a patient experiences an AE leading to study discontinuation,</p>
they also have a DS record indicating this.</a></li>
<li><a href='#check_ae_aeacnoth_ds_stddisc_covid'><p>Check for COVID-19 AE leading to Study Discon without DS Study Discon</p></a></li>
<li><a href='#check_ae_aedecod'><p>Check for missing AEDECOD values</p></a></li>
<li><a href='#check_ae_aedthdtc_aesdth'><p>Check AEs with AEDTHDTC value but AESDTH not &quot;Y&quot;</p></a></li>
<li><a href='#check_ae_aedthdtc_ds_death'><p>Check for missing AEDTHDTC where DS indicates death due to AE</p></a></li>
<li><a href='#check_ae_aelat'><p>Check if AESOC has Eye, and Affected Eye is missing</p></a></li>
<li><a href='#check_ae_aeout'><p>Check for inconsistency between AE outcome (AEOUT) and death date (AEDTHDTC)</p></a></li>
<li><a href='#check_ae_aeout_aeendtc_aedthdtc'><p>Check for AE outcome (AEOUT) of 'FATAL' with non-missing resolution</p>
date that is not equal to the death date</a></li>
<li><a href='#check_ae_aeout_aeendtc_nonfatal'><p>Check for non-fatal AEs with inconsistent AEOUT and AEENDTC</p></a></li>
<li><a href='#check_ae_aerel'><p>Check for AEREL1 - AERELN when AEREL is missing and when AEREL is unexpected</p></a></li>
<li><a href='#check_ae_aesdth_aedthdtc'><p>Check AEs with AESDTH of &quot;Y&quot; but No AEDTHDTC Value</p></a></li>
<li><a href='#check_ae_aestdtc_after_aeendtc'><p>Check that all AE start dates are on or before AE end dates</p></a></li>
<li><a href='#check_ae_aestdtc_after_dd'><p>Check for AE dates occurring after death date</p></a></li>
<li><a href='#check_ae_aetoxgr'><p>Check for missing AETOXGR and/or AESEV values</p></a></li>
<li><a href='#check_ae_death'><p>Check for Grade 5 AE death variable consistency</p></a></li>
<li><a href='#check_ae_death_ds_discon'><p>Check if death in AE then there should be a study discon form</p></a></li>
<li><a href='#check_ae_ds_partial_death_dates'><p>Check for partial death dates in AE and DS</p></a></li>
<li><a href='#check_ae_dup'><p>Check for duplicate AE entries</p></a></li>
<li><a href='#check_ae_fatal'><p>Check for death variable consistency when AEOUT==&quot;FATAL&quot;</p></a></li>
<li><a href='#check_ae_withdr_ds_discon'><p>Check if an AE leading to drug being withdrawn is reflected in DS</p></a></li>
<li><a href='#check_ce_missing_month'><p>Check for clinical events dates with year and day known but month unknown</p></a></li>
<li><a href='#check_cm_cmdecod'><p>Check for missing CMDECOD values</p></a></li>
<li><a href='#check_cm_cmindc'><p>Check for concomitant medication indication with text string &quot;PROPHYL&quot;</p>
when not given for prophylaxis</a></li>
<li><a href='#check_cm_cmlat'><p>Check if ocular concomitant medication has laterality missing or laterality field is</p>
populated but route is not eye-related.</a></li>
<li><a href='#check_cm_cmlat_prior_ocular'><p>Check if ocular concomitant medication has laterality missing for specific</p>
&quot;PRIOR OCULAR THERAPIES AND TREATMENTS&quot; (or similar names) CRF page.</a></li>
<li><a href='#check_cm_missing_month'><p>Check for conmed dates with year and day known but month unknown</p></a></li>
<li><a href='#check_dd_ae_aedthdtc_ds_dsstdtc'><p>Check if death date is the same in AE and DS domains</p></a></li>
<li><a href='#check_dd_ae_aeout_aedthdtc'><p>Check if there is a death date and AEOUT='FATAL' agreement</p></a></li>
<li><a href='#check_dd_death_date'><p>Check if patient with Death due to AE also has Death record in DS</p></a></li>
<li><a href='#check_dm_actarm_arm'><p>Check DM where ARM is not equal to ACTARM</p></a></li>
<li><a href='#check_dm_ae_ds_death'><p>Check if death reported in DM then death indicator also present in DS or AE</p></a></li>
<li><a href='#check_dm_age_missing'><p>Check for patients with suspicious age values</p></a></li>
<li><a href='#check_dm_armcd'><p>Check for missing ARM or ARMCD values in DM</p></a></li>
<li><a href='#check_dm_dthfl_dthdtc'><p>Check that when DM.DTHFL is Y, DM.DTHDTC does not have a missing value, and vice versa</p></a></li>
<li><a href='#check_dm_usubjid_ae_usubjid'><p>Check patients in the DM dataset who do not have records in the AE dataset</p></a></li>
<li><a href='#check_dm_usubjid_dup'><p>Check duplicate patient records in DM based on USUBJID</p></a></li>
<li><a href='#check_ds_ae_discon'><p>Check for treatment discontinuation consistency between DS and AE</p></a></li>
<li><a href='#check_ds_dsdecod_death'><p>Check for study discontinuation record if death indicated</p></a></li>
<li><a href='#check_ds_dsdecod_dsstdtc'><p>Check DS with death record but no death date</p></a></li>
<li><a href='#check_ds_dsscat'><p>Check for patients with more than one study discontinuation records</p></a></li>
<li><a href='#check_ds_dsterm_death_due_to'><p>Check missing cause of death information in DS</p></a></li>
<li><a href='#check_ds_duplicate_randomization'><p>Check for duplicate randomization records for a patient</p></a></li>
<li><a href='#check_ds_ex_after_discon'><p>Check for patients who had Start/End date of treatment after study discontinuation date</p></a></li>
<li><a href='#check_ds_multdeath_dsstdtc'><p>Check DS with multiple death records with death dates, where death dates do not match</p></a></li>
<li><a href='#check_ds_sc_strat'><p>Check if randomized patients are missing stratification factor data</p></a></li>
<li><a href='#check_dv_ae_aedecod_covid'><p>Check for consistency between DV and AE for COVID-19 events</p></a></li>
<li><a href='#check_dv_covid'><p>Check for consistency in COVID-19 DV variables, DVREAS and DVEPRELI</p></a></li>
<li><a href='#check_ec_sc_lat'><p>Check if Study Drug is not administered in the Study Eye</p></a></li>
<li><a href='#check_eg_egdtc_visit_ordinal_error'><p>Check that all ECG datetimes are earlier than last</p>
visit's (possible datetime data entry error)</a></li>
<li><a href='#check_ex_dup'><p>Check for duplicate EX records</p></a></li>
<li><a href='#check_ex_exdose_exoccur'><p>Check for Missing EXDOSE.</p></a></li>
<li><a href='#check_ex_exdose_pos_exoccur_no'><p>Check for EXDOSE&gt;0 When EXOCCUR is not &quot;Y&quot;</p></a></li>
<li><a href='#check_ex_exdosu'><p>Check for missing EXDOSU records</p></a></li>
<li><a href='#check_ex_exoccur_exdose_exstdtc'><p>Check for Invalid EXDOSE (Dose per Administration) and</p>
Missing/Incomplete EXSTDTC (Start Date) Values for valid exposures</a></li>
<li><a href='#check_ex_exoccur_mis_exdose_nonmis'><p>Check for missing EXOCCUR but EXDOSE not missing</p></a></li>
<li><a href='#check_ex_exstdtc_after_dd'><p>Check for EX dates occurring after death date</p></a></li>
<li><a href='#check_ex_exstdtc_after_exendtc'><p>Check that all exposure start dates are on or before exposure end dates</p></a></li>
<li><a href='#check_ex_exstdtc_visit_ordinal_error'><p>Check that all EX start dates are earlier than last</p>
visit's (possible datetime data entry error)</a></li>
<li><a href='#check_ex_extrt_exoccur'><p>Check for EX records where EXTRT is missing</p></a></li>
<li><a href='#check_ex_infusion_exstdtc_exendtc'><p>Check that an infusion drug has same start/end exposure dates, also including missing start/end dates</p></a></li>
<li><a href='#check_ex_visit'><p>Check for missing EX.VISIT</p></a></li>
<li><a href='#check_lb_lbdtc_after_dd'><p>Check for LB dates occurring after death date</p></a></li>
<li><a href='#check_lb_lbdtc_visit_ordinal_error'><p>Check that all LB dates are duplicated or earlier than last</p>
visit's (possible datetime data entry error)</a></li>
<li><a href='#check_lb_lbstnrlo_lbstnrhi'><p>Check for missing lab reference ranges (LBSTNRLO, LBSTNRHI)</p></a></li>
<li><a href='#check_lb_lbstresc_char'><p>Check LBORRES/LBSTRESC populated with number beginning with</p>
character '&gt;' or '&lt;', which will yield missing AVAL in ADaM and records will be omitted in analyses such as Hy's Law</a></li>
<li><a href='#check_lb_lbstresn_missing'><p>Check missing standard lab values (LBSTRESN/LBSTRESC)</p></a></li>
<li><a href='#check_lb_lbstresu'><p>Check for missing lab units (LBSTRESU)</p></a></li>
<li><a href='#check_lb_missing_month'><p>Check for lab dates with year and day known but month unknown</p></a></li>
<li><a href='#check_mh_missing_month'><p>Check for MH dates with year and day known but month unknown</p></a></li>
<li><a href='#check_mi_mispec'><p>Check for missing values in the MISPEC variable</p></a></li>
<li><a href='#check_oe_bcva_1m_late_early_tot'><p>Check if 1m BCVA test stops too late, too early and has correct total</p></a></li>
<li><a href='#check_oe_bcva_4m_late_early_tot'><p>Check if 4m BCVA test stops too late, too early and has correct total</p></a></li>
<li><a href='#check_oe_bcva_4m_vs_1m_req'><p>Check if 1m BCVA test is completed per BCVA 4m result</p></a></li>
<li><a href='#check_oe_bcva_tot_mismatch'><p>Check mismatch between Derived BCVA Total Score &amp; Total BCVA Score from Data</p></a></li>
<li><a href='#check_oe_sc_lat_count_fingers'><p>Check if Post Treatment Count Fingers in Study Eye laterality does not match with Subject Characteristics Study Eye laterality</p></a></li>
<li><a href='#check_pr_missing_month'><p>Check for procedure dates with year and day known but month unknown</p></a></li>
<li><a href='#check_pr_prlat'><p>Check if ocular procedures/surgeries has laterality missing for CRF pages which contain the word &quot;OCULAR&quot; (and not &quot;NON-OCULAR&quot;).</p></a></li>
<li><a href='#check_qs_dup'><p>Check for multiple dates at the same visit in QS</p></a></li>
<li><a href='#check_qs_qsdtc_after_dd'><p>Check for QS dates occurring after death date</p></a></li>
<li><a href='#check_qs_qsdtc_visit_ordinal_error'><p>Check that all QS dates are duplicated or earlier than last</p>
visit's (possible datetime data entry error)</a></li>
<li><a href='#check_qs_qsstat_qsreasnd'><p>Check to confirm that there is a reason for a questionnaire being marked as not done</p></a></li>
<li><a href='#check_qs_qsstat_qsstresc'><p>Check for non-missing QSSTRESC if QSSTAT is NOT DONE</p></a></li>
<li><a href='#check_rs_rscat_rsscat'><p>Check for patients with populated RSSCAT but missing RSCAT.</p></a></li>
<li><a href='#check_rs_rsdtc_across_visit'><p>Check RS records where the same date occurs across multiple visits</p></a></li>
<li><a href='#check_rs_rsdtc_visit'><p>Check missing RSDTC and VISIT</p></a></li>
<li><a href='#check_rs_rsdtc_visit_ordinal_error'><p>Check that all RS dates for INV Overall Response are duplicated or</p>
earlier than last visit's (possible date entry error)</a></li>
<li><a href='#check_sc_dm_eligcrit'><p>Check SC Eye Meeting Eligibility Criteria assignments among DM patients</p></a></li>
<li><a href='#check_sc_dm_seyeselc'><p>Check SC Study Eye Selection assignments among DM patients</p></a></li>
<li><a href='#check_ss_ssdtc_alive_dm'><p>Check non-missing last ALIVE status date in SS is before than death date in DM</p></a></li>
<li><a href='#check_ss_ssdtc_dead_ds'><p>Check non-missing DEAD status date in SS and non-missing according DS record with death date</p>
where status date is greater or equal to death date</a></li>
<li><a href='#check_ss_ssdtc_dead_dthdtc'><p>Check non-missing DEAD status date in SS and an according DM record with death date</p>
where status date is greater or equal to death date</a></li>
<li><a href='#check_ss_ssstat_ssorres'><p>Check for non-missing SSORRES if SSSTAT is NOT DONE</p></a></li>
<li><a href='#check_tr_dup'><p>Check for duplicate TR records</p></a></li>
<li><a href='#check_tr_trdtc_across_visit'><p>Check TR Longest Diameter Records where the same date occurs across multiple visits</p></a></li>
<li><a href='#check_tr_trdtc_visit_ordinal_error'><p>Check that all TR dates by INV are duplicated or earlier than</p>
last visit's (possible date entry error)</a></li>
<li><a href='#check_tr_trstresn_ldiam'><p>Check for TR records with missing TRSTRESN for Longest Diameter (LDIAM)</p></a></li>
<li><a href='#check_ts_aedict'><p>Check for missing MedDRA version in TS</p></a></li>
<li><a href='#check_ts_cmdict'><p>Check for missing WHODrug version in TS</p></a></li>
<li><a href='#check_ts_sstdtc_ds_consent'><p>Check for missing SSTDTC (Study Start Date) in TS</p></a></li>
<li><a href='#check_tu_rs_new_lesions'><p>Check for consistency between new lesions and overall PD response</p></a></li>
<li><a href='#check_tu_tudtc'><p>Check for missing TUDTC values</p></a></li>
<li><a href='#check_tu_tudtc_across_visit'><p>Check TU Records where the same date occurs across multiple visits</p></a></li>
<li><a href='#check_tu_tudtc_visit_ordinal_error'><p>Check that all TU  dates are duplicated or earlier than last</p>
visit's (possible datetime data entry error)</a></li>
<li><a href='#check_tu_tuloc_missing'><p>Check for missing TULOC values</p></a></li>
<li><a href='#check_vs_height'><p>Check for missing height values</p></a></li>
<li><a href='#check_vs_sbp_lt_dbp'><p>Check that DBP is not higher than SBP in VS</p></a></li>
<li><a href='#check_vs_vsdtc_after_dd'><p>Check for VS dates occurring after death date</p></a></li>
<li><a href='#convert_var_to_ascii'><p>Remove non-ASCII characters from reported term in order</p>
for Pandoc to create PDF file</a></li>
<li><a href='#create_R_script'><p>Create .R file with sdtmchecks function calls</p></a></li>
<li><a href='#diff_reports'><p>Create a sdtmchecks list object with column indicating whether the issue was previously seen</p></a></li>
<li><a href='#dtc_dupl_early'><p>Check if start dates are duplicated or earlier than prior visit date</p></a></li>
<li><a href='#fail'><p>Fail object</p></a></li>
<li><a href='#impute_day01'><p>Add day of &quot;01&quot; to dates that are in the format of &quot;yyyy-mm&quot;</p></a></li>
<li><a href='#is_sas_na'><p>Check if the elements could be of any SAS missing data variant</p></a></li>
<li><a href='#lacks_msg'><p>Check data frame for mandatory variables and specify which are missing in</p>
message</a></li>
<li><a href='#missing_month'><p>Function to check if month is missing while year and day are non-missing</p>
(i.e. would be in the format of &quot;yyyy&mdash;dd&quot;)</a></li>
<li><a href='#nickname'><p>Nickname for package version</p></a></li>
<li><a href='#pass'><p>Pass object</p></a></li>
<li><a href='#report_to_xlsx'><p>Save report as an xlsx file</p></a></li>
<li><a href='#roche_derive_rave_row'><p>Utility function to obtain Rave form name and row number</p></a></li>
<li><a href='#run_all_checks'><p>Run all data checks in sdtmchecks package using parallel processing</p></a></li>
<li><a href='#run_check'><p>Run a single check in sdtmchecks package</p></a></li>
<li><a href='#sdtmchecksmeta'><p>Metadata for sdtmchecks</p></a></li>
<li><a href='#truncate_var_strings'><p>Utility function to truncate data in var_name</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Data Quality Checks for Study Data Tabulation Model (SDTM)
Datasets</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>A series of checks to identify common issues in Study Data Tabulation Model (SDTM) datasets. These checks are intended to be generalizable, actionable, and meaningful for analysis. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr (&ge; 1.1.1), tidyselect, openxlsx</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown (&ge; 2.7), testthat, DT</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://pharmaverse.github.io/sdtmchecks/">https://pharmaverse.github.io/sdtmchecks/</a>,
<a href="https://github.com/pharmaverse/sdtmchecks">https://github.com/pharmaverse/sdtmchecks</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/pharmaverse/sdtmchecks/issues">https://github.com/pharmaverse/sdtmchecks/issues</a></td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-07-11 01:33:03 UTC; harric17</td>
</tr>
<tr>
<td>Author:</td>
<td>Will Harris [aut, cre],
  Sara Bodach [aut],
  Edgar Manukyan [aut],
  Adrian Waddell [aut],
  Ross Farrugia [aut],
  F. Hoffmann-La Roche AG [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Will Harris &lt;harric17@gene.com&gt;</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-07-12 13:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='sdtmchecks-package'>sdtmchecks: Data Quality Checks for Study Data Tabulation Model (SDTM) Datasets</h2><span id='topic+sdtmchecks'></span><span id='topic+sdtmchecks-package'></span>

<h3>Description</h3>

<p>A series of checks to identify common issues in Study Data Tabulation Model (SDTM) datasets. These checks are intended to be generalizable, actionable, and meaningful for analysis.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Will Harris <a href="mailto:harric17@gene.com">harric17@gene.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Sara Bodach
</p>
</li>
<li><p> Edgar Manukyan
</p>
</li>
<li><p> Adrian Waddell
</p>
</li>
<li><p> Ross Farrugia
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> F. Hoffmann-La Roche AG [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://pharmaverse.github.io/sdtmchecks/">https://pharmaverse.github.io/sdtmchecks/</a>
</p>
</li>
<li> <p><a href="https://github.com/pharmaverse/sdtmchecks">https://github.com/pharmaverse/sdtmchecks</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/pharmaverse/sdtmchecks/issues">https://github.com/pharmaverse/sdtmchecks/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+25has_all+25'>Check if data frame has all specified variables</h2><span id='topic++25has_all+25'></span>

<h3>Description</h3>

<p>Check if data frame has all specified variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>df %has_all% varnames
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25has_all+2B25_+3A_df">df</code></td>
<td>
<p>a data frame</p>
</td></tr>
<tr><td><code id="+2B25has_all+2B25_+3A_varnames">varnames</code></td>
<td>
<p>a vector with variable names</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean
</p>

<hr>
<h2 id='+25has_any+25'>Check if data frame has at least one of the specified variables</h2><span id='topic++25has_any+25'></span>

<h3>Description</h3>

<p>Check if data frame has at least one of the specified variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>df %has_any% varnames
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25has_any+2B25_+3A_df">df</code></td>
<td>
<p>a data frame</p>
</td></tr>
<tr><td><code id="+2B25has_any+2B25_+3A_varnames">varnames</code></td>
<td>
<p>a vector with variable names</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean
</p>

<hr>
<h2 id='+25lacks_all+25'>Check if data frame is missing any of the specified variables</h2><span id='topic++25lacks_all+25'></span>

<h3>Description</h3>

<p>Check if data frame is missing any of the specified variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>df %lacks_all% varnames
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25lacks_all+2B25_+3A_df">df</code></td>
<td>
<p>a data frame</p>
</td></tr>
<tr><td><code id="+2B25lacks_all+2B25_+3A_varnames">varnames</code></td>
<td>
<p>a vector with variable names</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean
</p>

<hr>
<h2 id='+25lacks_any+25'>Check if data frame has at least one variable from a set of specified variables</h2><span id='topic++25lacks_any+25'></span>

<h3>Description</h3>

<p>Check if data frame has at least one variable from a set of specified variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>df %lacks_any% varnames
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25lacks_any+2B25_+3A_df">df</code></td>
<td>
<p>a data frame</p>
</td></tr>
<tr><td><code id="+2B25lacks_any+2B25_+3A_varnames">varnames</code></td>
<td>
<p>a vector with variable names</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean
</p>

<hr>
<h2 id='check_ae_aeacn_ds_disctx_covid'>Check for COVID-19 AE with DRUG WITHDRAWN action without &quot;ADVERSE EVENT&quot; for DS Trt Discon</h2><span id='topic+check_ae_aeacn_ds_disctx_covid'></span>

<h3>Description</h3>

<p>This checks for a COVID-19 AE reported with Action Taken
(AEACN*==DRUG WITHDRAWN) but without a corresponding DS record indicating
DS.DSDECOD with &quot;ADVERSE EVENT&quot; on any Treatment Discontinuation
form. This relies on DSSPID with the string &quot;DISCTX&quot; when DSCAT ==
&quot;DISPOSITION EVENT&quot; to select Treatment Discontinuation records in DS,
as DSSCAT typically includes a text string referring to specific study
drug(s).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_aeacn_ds_disctx_covid(
  AE,
  DS,
  covid_terms = c("COVID-19", "CORONAVIRUS POSITIVE")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_aeacn_ds_disctx_covid_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AETERM, AEDECOD,
AESTDTC, AEACNx</p>
</td></tr>
<tr><td><code id="check_ae_aeacn_ds_disctx_covid_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID, DSSPID, DSCAT, DSDECOD</p>
</td></tr>
<tr><td><code id="check_ae_aeacn_ds_disctx_covid_+3A_covid_terms">covid_terms</code></td>
<td>
<p>A length &gt;=1 vector of AE terms identifying COVID-19 (case does not matter)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check returns 0 obs, otherwise return subset dataframe.
</p>


<h3>Author(s)</h3>

<p>Sarwan Singh
</p>


<h3>See Also</h3>

<p>Other COVID: 
<code><a href="#topic+check_ae_aeacnoth_ds_stddisc_covid">check_ae_aeacnoth_ds_stddisc_covid</a>()</code>,
<code><a href="#topic+check_dv_ae_aedecod_covid">check_dv_ae_aedecod_covid</a>()</code>,
<code><a href="#topic+check_dv_covid">check_dv_covid</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
    STUDYID = 1,
    USUBJID = c(1,2,3,1,2,3),
    AESTDTC = '2020-05-05',
    AETERM  = c("abc Covid-19", "covid TEST POSITIVE",rep("other AE",4)),
    AEDECOD = c("COVID-19", "CORONAVIRUS POSITIVE", rep("OTHER AE",4)),
    AEACN = c("DRUG WITHDRAWN", rep("DOSE NOT CHANGED",5)),
    AESPID = "FORMNAME-R:13/L:13XXXX",
    stringsAsFactors = FALSE
)

DS &lt;- data.frame(
 USUBJID = c(1,1,2,3,4),
 DSSPID  = 'XXX-DISCTX-XXX',
 DSCAT   = "DISPOSITION EVENT",
 DSDECOD = "OTHER REASON",
 DSSEQ = c(1,2,1,1,1),
 stringsAsFactors = FALSE
)

# expect fail
check_ae_aeacn_ds_disctx_covid(AE, DS)


AE2 &lt;- data.frame( 
    AEACN1 =  rep(NA, nrow(AE)),
    AEACN2 = c("DRUG WITHDRAWN", rep("DOSE NOT CHANGED", nrow(AE)-1)),
    AEACN3 = c("DRUG WITHDRAWN", rep("DOSE NOT CHANGED", nrow(AE)-1)),
    AEACN4 = "",
    stringsAsFactors = FALSE
)
AE2 &lt;- cbind(AE, AE2) 
AE2$AEACN &lt;- "MULTIPLE" 

# expect fail
check_ae_aeacn_ds_disctx_covid(AE2, DS)

DS[1, "DSDECOD"] &lt;- 'ADVERSE EVENT'
# this passes, one form with DSDECOD = "ADVERSE EVENT"
## NOTE: This may be a false negative if study-specific data collection 
##       requires &gt;1 record with DSDECOD = "ADVERSE EVENT" and not just one record
check_ae_aeacn_ds_disctx_covid(AE2, DS)

# expect pass
check_ae_aeacn_ds_disctx_covid(AE, DS)


# non-required variable is missing
DS$DSSEQ &lt;- NULL
check_ae_aeacn_ds_disctx_covid(AE, DS)

# required variable is missing 
DS$DSSPID &lt;- NULL
check_ae_aeacn_ds_disctx_covid(AE, DS)


</code></pre>

<hr>
<h2 id='check_ae_aeacnoth'>Check for null AEACNOT1/2 when AEACNOTH = 'MULTIPLE'</h2><span id='topic+check_ae_aeacnoth'></span>

<h3>Description</h3>

<p>Flag if patient has a record with null values of AEACNOT1 and AEACNOT2
but AEACNOTH = 'MULTIPLE', so a likely mapping issue
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_aeacnoth(AE, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_aeacnoth_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AETERM, AESTDTC,
AEACNOTH, AEACNOT1/2, AESPID (optional)</p>
</td></tr>
<tr><td><code id="check_ae_aeacnoth_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_aeacnoth_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Ross Farrugia
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
 USUBJID = 1:7,
 AETERM = 1:7,
 AESTDTC = 1:7,
 AEACNOTH = 1:7,
 AEACNOT1 = 1:7,
 AEACNOT2 = 1:7,
 AESPID = "FORMNAME-R:13/L:13XXXX"
)

# pass
check_ae_aeacnoth(AE)

AE$AEACNOTH[1] = ""
AE$AEACNOT1[1] = ""
AE$AEACNOT2[1] = ""
AE$AEACNOTH[2] = "MULTIPLE"
AE$AEACNOT1[2] = "DOSE REDUCED"
AE$AEACNOT2[2] = "DRUG WITHDRAWN"
AE$AEACNOTH[3] = "MULTIPLE"
AE$AEACNOT1[3] = "DOSE REDUCED"
AE$AEACNOT2[3] = ""
AE$AEACNOTH[4] = "MULTIPLE"
AE$AEACNOT1[4] = ""
AE$AEACNOT2[4] = "DRUG WITHDRAWN"
AE$AEACNOTH[5] = "MULTIPLE"
AE$AEACNOT1[5] = ""
AE$AEACNOT2[5] = ""

# fail
check_ae_aeacnoth(AE)
check_ae_aeacnoth(AE,preproc=roche_derive_rave_row)

AE$AEACNOTH[1] = NA
AE$AEACNOT1[1] = NA
AE$AEACNOT2[1] = NA
AE$AEACNOT2[3] = NA 
AE$AEACNOT1[4] = NA 
AE$AEACNOT1[5] = NA
AE$AEACNOT2[5] = NA

# fail
check_ae_aeacnoth(AE)
check_ae_aeacnoth(AE,preproc=roche_derive_rave_row)


AE$AEACNOTH &lt;- NULL
AE$AEACNOT1 &lt;- NULL
AE$AEACNOT2 &lt;- NULL
AE$AESPID &lt;- NULL
check_ae_aeacnoth(AE)

</code></pre>

<hr>
<h2 id='check_ae_aeacnoth_ds_disctx'>Check if, whenever a patient experiences an AE leading to study discontinuation,
they also have a DS record indicating this.</h2><span id='topic+check_ae_aeacnoth_ds_disctx'></span>

<h3>Description</h3>

<p>This code checks that when a patient has an AE with AEACNOTx = &quot;SUBJECT
DISCONTINUED FROM STUDY&quot; (x = &quot;H&quot;, &quot;1&quot;, &quot;2&quot;, ...) then there should also be a record in DS
where DS.DSSCAT = &quot;STUDY COMPLETION/EARLY DISCONTINUATION&quot; and DS.DSDECOD != &quot;COMPLETED&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_aeacnoth_ds_disctx(AE, DS, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_aeacnoth_ds_disctx_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AEDECOD, AEACNOTx</p>
</td></tr>
<tr><td><code id="check_ae_aeacnoth_ds_disctx_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID, DSCAT, DSSCAT, DSDECOD</p>
</td></tr>
<tr><td><code id="check_ae_aeacnoth_ds_disctx_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_aeacnoth_ds_disctx_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check returns 0 obs, otherwise return subset dataframe.
</p>


<h3>Author(s)</h3>

<p>Edoardo Mancini
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
    STUDYID  = "1001",
    USUBJID  = c("1","2","3","4","5","1"),
    AESTDTC  = rep('2020-05-05', 6),
    AEDECOD  = c("HEADACHE", "HEART ATTACK","CHILLS", "PNEUMONIA", "ARTHRITIS", "FATIGUE"),
    AEACNOTH = c("NONE", "SUBJECT DISCONTINUED FROM STUDY", "MULTIPLE", "NONE",
                 "SUBJECT DISCONTINUED FROM STUDY", "SUBJECT DISCONTINUED FROM STUDY"),
    AEACNOT1 = c("", "", "PROCEDURE/SURGERY", "", "", ""),
    AEACNOT2 = c("", "", "SUBJECT DISCONTINUED FROM STUDY", "", "", ""),
    AESPID = "FORMNAME-R:13/L:13XXXX",
    stringsAsFactors = FALSE
)

DS &lt;- data.frame(
    USUBJID = c("1","5"),
    DSCAT   = c("DISPOSITION EVENT", "DISPOSITION EVENT"),
    DSSCAT  = c("STUDY COMPLETION/EARLY DISCONTINUATION", "STUDY COMPLETION/EARLY DISCONTINUATION"),
    DSDECOD = c("ADVERSE EVENT", "ADVERSE EVENT" ),
    stringsAsFactors = FALSE
)

check_ae_aeacnoth_ds_disctx(AE, DS)
check_ae_aeacnoth_ds_disctx(AE, DS, preproc=roche_derive_rave_row)

</code></pre>

<hr>
<h2 id='check_ae_aeacnoth_ds_stddisc_covid'>Check for COVID-19 AE leading to Study Discon without DS Study Discon</h2><span id='topic+check_ae_aeacnoth_ds_stddisc_covid'></span>

<h3>Description</h3>

<p>Flag if patient has a COVID-19 AE where AE.AEDECOD
matches a COVID-19 preferred term event action of Study Discontinuation
(AE.AEACNOT* includes &quot;DISCONTINUED FROM STUDY&quot;) but missing Study Discontinuation
record in DS (DS.DSSCAT includes &quot;STUDY&quot; and &quot;DISCON&quot; and excludes &quot;DRUG&quot; and
&quot;TREATMENT&quot;)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_aeacnoth_ds_stddisc_covid(
  AE,
  DS,
  covid_terms = c("COVID-19", "CORONAVIRUS POSITIVE")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_aeacnoth_ds_stddisc_covid_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AEDECOD,
AEACNOT* (can be multiple variables)</p>
</td></tr>
<tr><td><code id="check_ae_aeacnoth_ds_stddisc_covid_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID, DSSCAT, DSDECOD</p>
</td></tr>
<tr><td><code id="check_ae_aeacnoth_ds_stddisc_covid_+3A_covid_terms">covid_terms</code></td>
<td>
<p>A length &gt;=1 vector of AE terms identifying COVID-19 (case does not matter)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Natalie Springfield
</p>


<h3>See Also</h3>

<p>Other COVID: 
<code><a href="#topic+check_ae_aeacn_ds_disctx_covid">check_ae_aeacn_ds_disctx_covid</a>()</code>,
<code><a href="#topic+check_dv_ae_aedecod_covid">check_dv_ae_aedecod_covid</a>()</code>,
<code><a href="#topic+check_dv_covid">check_dv_covid</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
 USUBJID = 1:5,
 AEDECOD = c("This is a covid AE", "covid-19", "covid-19","Some AE", "CORONAVIRUS POSITIVE" ),
 AEACNOTH=c("SUBJECT DISCONTINUED FROM STUDY",
            "NONE",
            "NONE", 
            "SUBJECT DISCONTINUED FROM STUDY",
            "NONE"),
 AEACNOTH1=c("SUBJECT DISCONTINUED FROM STUDY", 
             "NONE",
             "SUBJECT DISCONTINUED FROM STUDY",
             "NONE", 
             "SUBJECT DISCONTINUED FROM STUDY"),
 AEACNOTH2=c("SUBJECT DISCONTINUED FROM STUDY", 
             "NONE",
             "NONE",
             "SUBJECT DISCONTINUED FROM STUDY",
             "NONE")
)

DS &lt;- data.frame(
 USUBJID = 1:3,
 DSSCAT=c("TREATMENT DISCONTINUATION", 
 "STUDY DISCONTINUATION",
 "STUDY DISCONTINUATION"),
 DSDECOD="DISCON REASON"
)

#expect fail
check_ae_aeacnoth_ds_stddisc_covid(AE,DS)

#use custom terms for identifying covid AEs
check_ae_aeacnoth_ds_stddisc_covid(
  AE,
  DS,
  covid_terms=c("COVID-19", "CORONAVIRUS POSITIVE","THIS IS A COVID AE")
  )

</code></pre>

<hr>
<h2 id='check_ae_aedecod'>Check for missing AEDECOD values</h2><span id='topic+check_ae_aedecod'></span>

<h3>Description</h3>

<p>This check looks for missing AEDECOD values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_aedecod(AE, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_aedecod_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AETERM, AEDECOD</p>
</td></tr>
<tr><td><code id="check_ae_aedecod_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_aedecod_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Yinghui Miao, Stella Banjo(HackR 2021)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
 USUBJID = 1:5,
 DOMAIN = c(rep("AE", 5)),
 AESEQ = 1:5,
 AESTDTC = 1:5,
 AETERM = 1:5,
 AEDECOD = 1:5,
  AESPID = c("FORMNAME-R:13/L:13XXXX",
             "FORMNAME-R:16/L:16XXXX",
             "FORMNAME-R:2/L:2XXXX",
             "FORMNAME-R:19/L:19XXXX",
             "FORMNAME-R:5/L:5XXXX"),
 stringsAsFactors = FALSE
)

check_ae_aedecod(AE)

AE$AEDECOD[1] = NA
AE$AEDECOD[2] = "NA"
AE$AEDECOD[3:5] = ""
check_ae_aedecod(AE)
check_ae_aedecod(AE,preproc=roche_derive_rave_row)

AE$AEDECOD &lt;- NULL
check_ae_aedecod(AE)

</code></pre>

<hr>
<h2 id='check_ae_aedthdtc_aesdth'>Check AEs with AEDTHDTC value but AESDTH not &quot;Y&quot;</h2><span id='topic+check_ae_aedthdtc_aesdth'></span>

<h3>Description</h3>

<p>This check looks for AE entries with an AEDTHDTC (death date)
value and AESDTH not equal to &quot;Y&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_aedthdtc_aesdth(AE, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_aedthdtc_aesdth_+3A_ae">AE</code></td>
<td>
<p>Adverse Event SDTM dataset with variables USUBJID, AEDTHDTC,
AESDTH, AEDECOD, AETERM, and AESTDTC</p>
</td></tr>
<tr><td><code id="check_ae_aedthdtc_aesdth_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_aedthdtc_aesdth_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean value for whether the check passed or failed, with 'msg'
attribute if the check failed
</p>


<h3>Author(s)</h3>

<p>Shumei Chi
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

AE &lt;- data.frame(
USUBJID = c(1:7), 
AEDECOD = c(letters[1:5], "", NA), 
AETERM = letters[1:7],
AESDTH = "Y",
AEDTHDTC = "2020-01-02",
AESTDTC = c(1:7),
AESPID = "FORMNAME-R:5/L:5XXXX",
stringsAsFactors=FALSE)

# expect pass
check_ae_aedthdtc_aesdth(AE)
check_ae_aedthdtc_aesdth(AE,preproc=roche_derive_rave_row)

# expect fail 
AE1 &lt;- AE
AE1$AESDTH[3] &lt;- "N"
check_ae_aedthdtc_aesdth(AE1)
check_ae_aedthdtc_aesdth(AE1,preproc=roche_derive_rave_row)

# expect fail with AESDTH = NA
AE2 &lt;- AE
AE2$AESDTH[4] &lt;- NA
check_ae_aedthdtc_aesdth(AE2)
check_ae_aedthdtc_aesdth(AE2,preproc=roche_derive_rave_row)

# non-required variable missing
AE2$AESPID &lt;- NULL
check_ae_aedthdtc_aesdth(AE2)
check_ae_aedthdtc_aesdth(AE2,preproc=roche_derive_rave_row)

# required variable missing 
AE2$AESDTH &lt;- NULL
check_ae_aedthdtc_aesdth(AE2)
check_ae_aedthdtc_aesdth(AE2,preproc=roche_derive_rave_row)



</code></pre>

<hr>
<h2 id='check_ae_aedthdtc_ds_death'>Check for missing AEDTHDTC where DS indicates death due to AE</h2><span id='topic+check_ae_aedthdtc_ds_death'></span>

<h3>Description</h3>

<p>This check looks for missing AEDTHDTC values if a patient has a
DS record where DSDECOD=DEATH and DSTERM contains ADVERSE EVENT
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_aedthdtc_ds_death(AE, DS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_aedthdtc_ds_death_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AEDTHDTC</p>
</td></tr>
<tr><td><code id="check_ae_aedthdtc_ds_death_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID, DSDECOD, DSTERM, DSSTDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Aldrich Salva
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
 USUBJID = 1:3,
 AEDTHDTC = c(NA,NA,1)
)


# older mapping 
DS &lt;- data.frame(
 USUBJID = 1:4,
 DSTERM = c("DEATH DUE TO ADVERSE EVENT","DEATH DUE TO PROGRESSIVE DISEASE",
            "DEATH DUE TO ADVERSE EVENT","DEATH DUE TO ADVERSE EVENT")
            ,
 DSDECOD = rep("DEATH",4),
 DSSTDTC = "2020-01-01"
)

check_ae_aedthdtc_ds_death(AE,DS)

DS$DSSTDTC = NULL

check_ae_aedthdtc_ds_death(AE,DS)

# newer mapping that  
DS &lt;- data.frame(
 USUBJID = 1:4,
 DSTERM = c("DEATH DUE TO MYOCARDIAL INFARCTION","DEATH DUE TO PROGRESSIVE DISEASE",
            "DEATH DUE TO COVID-19","DEATH")
            ,
 DSDECOD = rep("DEATH",4),
 DSSTDTC = "2020-01-01"
 )
 
# pass for study with newer mapping, as another function (check_dd_death_date.R) covers this
check_ae_aedthdtc_ds_death(AE,DS)


</code></pre>

<hr>
<h2 id='check_ae_aelat'>Check if AESOC has Eye, and Affected Eye is missing</h2><span id='topic+check_ae_aelat'></span>

<h3>Description</h3>

<p>This check looks if AESOC has Eye, and AELAT is missing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_aelat(AE, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_aelat_+3A_ae">AE</code></td>
<td>
<p>Adverse Event Dataset for Ophtho Study with variables USUBJID, AELAT, AESOC,
AEDECOD, AETERM, AESTDTC (if present), AESPID (if present)</p>
</td></tr>
<tr><td><code id="check_ae_aelat_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_aelat_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Monarch Shah (HackR 2021 Team Eye)
</p>


<h3>See Also</h3>

<p>Other OPHTH: 
<code><a href="#topic+check_cm_cmlat_prior_ocular">check_cm_cmlat_prior_ocular</a>()</code>,
<code><a href="#topic+check_cm_cmlat">check_cm_cmlat</a>()</code>,
<code><a href="#topic+check_oe_bcva_1m_late_early_tot">check_oe_bcva_1m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_late_early_tot">check_oe_bcva_4m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_vs_1m_req">check_oe_bcva_4m_vs_1m_req</a>()</code>,
<code><a href="#topic+check_oe_bcva_tot_mismatch">check_oe_bcva_tot_mismatch</a>()</code>,
<code><a href="#topic+check_oe_sc_lat_count_fingers">check_oe_sc_lat_count_fingers</a>()</code>,
<code><a href="#topic+check_pr_prlat">check_pr_prlat</a>()</code>,
<code><a href="#topic+check_sc_dm_eligcrit">check_sc_dm_eligcrit</a>()</code>,
<code><a href="#topic+check_sc_dm_seyeselc">check_sc_dm_seyeselc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
   USUBJID = 1:5,
   AESTDTC = 1:5,
   AELOC   = c("", "EYE", "eye", "", "EYE"),
   AELAT   = c("Left", "","left", "RIGHT", ""),
   AETERM  = c("A", "B", "A", "B", "A"),
   AEDECOD = c("A", "B", "A", "B", "A"),
   AESOC   = c("Eye", "Eye","Eye Disorder","Eye Disorder", "Eye"),
   AESPID  = "FORMNAME-R:19/L:19XXXX",
   stringsAsFactors = FALSE)

check_ae_aelat(AE)
check_ae_aelat(AE,preproc=roche_derive_rave_row)

AE &lt;- data.frame(
   USUBJID = 1:5,
   AESTDTC = 1:5,
   AELAT   = c("Left", "","Bilateral", "", ""),
   AETERM  = c("A", "B", "A", "B", "A"),
   AEDECOD = c("A", "B", "A", "B", "A"),
   AESOC   = c("Eye", "Eye","Eye Disorder","Eye Disorder", "Eye"),
   stringsAsFactors = FALSE)

check_ae_aelat(AE)
check_ae_aelat(AE,preproc=roche_derive_rave_row)


</code></pre>

<hr>
<h2 id='check_ae_aeout'>Check for inconsistency between AE outcome (AEOUT) and death date (AEDTHDTC)</h2><span id='topic+check_ae_aeout'></span>

<h3>Description</h3>

<p>This check looks for AEs with Death date(AEDTHDTC) but outcome
(AEOUT) is not FATAL and conversely AEs with no death date (AEDTHDTC) but
outcome (AEOUT) is fatal
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_aeout(AE, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_aeout_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AEDTHDTC, AEOUT</p>
</td></tr>
<tr><td><code id="check_ae_aeout_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_aeout_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Shumei Chi
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
    USUBJID = 1:8,
    AEDTHDTC = c(NA, "NA", "2015-03-12", "2017-01-22", "1999-11-07","",NA, "2020-01-01"),
    AEOUT = c("", "", "","FATAL","RECOVERED/RESOLVED","FATAL","FATAL", NA),
    AESPID = "FORMNAME-R:13/L:13XXXX",
    stringsAsFactors = FALSE
)

check_ae_aeout(AE)
check_ae_aeout(AE,preproc=roche_derive_rave_row)

AE$AEDTHDTC &lt;- NULL
check_ae_aeout(AE)

AE$AEOUT &lt;- NULL
check_ae_aeout(AE)

</code></pre>

<hr>
<h2 id='check_ae_aeout_aeendtc_aedthdtc'>Check for AE outcome (AEOUT) of 'FATAL' with non-missing resolution
date that is not equal to the death date</h2><span id='topic+check_ae_aeout_aeendtc_aedthdtc'></span>

<h3>Description</h3>

<p>This check looks for AEs with outcome of 'FATAL' but AE
resolution date is not equal to AE death date.
Note that these datapoints are not collected the same way for all trials -
some trials leave AEENDTC missing if it was unresolved at death date. Confirm
within your team before querying this issue.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_aeout_aeendtc_aedthdtc(AE, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_aeout_aeendtc_aedthdtc_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AETERM,
AEDTHDTC, AEENDTC, AEOUT</p>
</td></tr>
<tr><td><code id="check_ae_aeout_aeendtc_aedthdtc_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_aeout_aeendtc_aedthdtc_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Sara Bodach, Stella Banjo(HackR 2021)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
    USUBJID = 1:10,
    DOMAIN = "AE",
    AEDTHDTC = c(NA, "NA", rep("2015-03-12",4), NA, NA, "2020-01-01", ""),
    AEENDTC = c(NA, "NA", rep("2015-03-12",4), NA, "2020-01-01", NA, ""),
    AEOUT = c("", "", "","FATAL","RECOVERED/RESOLVED", rep("FATAL",5)),
    AETERM = 1:10,
    AESPID = "FORMNAME-R:13/L:13XXXX",
    stringsAsFactors = FALSE
)

check_ae_aeout_aeendtc_aedthdtc(AE)
check_ae_aeout_aeendtc_aedthdtc(AE,preproc=roche_derive_rave_row)

AE$AESPID &lt;- NULL
check_ae_aeout_aeendtc_aedthdtc(AE)

AE$AEDTHDTC &lt;- NULL
AE$AEOUT &lt;- NULL
check_ae_aeout_aeendtc_aedthdtc(AE)

</code></pre>

<hr>
<h2 id='check_ae_aeout_aeendtc_nonfatal'>Check for non-fatal AEs with inconsistent AEOUT and AEENDTC</h2><span id='topic+check_ae_aeout_aeendtc_nonfatal'></span>

<h3>Description</h3>

<p>Check for inconsistency between AE outcome (AEOUT) and
AE end date (AEENDTC) for non-fatal AEs (based on AEOUT). AE flagged if AEENDTC
not populated when AEOUT is &quot;RECOVERED/RESOLVED&quot;, &quot;RECOVERED/RESOLVED WITH
SEQUELAE&quot;. AE also flagged if AEENDTC is populated when AEOUT is
&quot;UNKNOWN&quot;, &quot;NOT RECOVERED/NOT RESOLVED&quot;, &quot;RECOVERING/RESOLVING&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_aeout_aeendtc_nonfatal(AE, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_aeout_aeendtc_nonfatal_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AETERM, AESTDTC, AEENDTC, AEOUT</p>
</td></tr>
<tr><td><code id="check_ae_aeout_aeendtc_nonfatal_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_aeout_aeendtc_nonfatal_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Jennifer Lomax
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
USUBJID = 1:10,
AETERM  = "AE",
AESTDTC = c(NA, "NA", "2015-03-09", "2010-10", "2017-01-20",   "1999-11-02",
        "",     NA,                   "2017-08-20",          "2014-12-01"),
AEENDTC = c(NA, "NA", "2015-03-12", "2010-10", "2017-01-22",   "1999-11-07",
        "",     NA,                   "2017-09-01",          "2015-01-01"),
AEOUT   = c("", "",   "",           "",        "NOT RECOVERED",
"RECOVERED/RESOLVED","FATAL","RECOVERED/RESOLVED", "RECOVERING/RESOLVING","UNKNOWN"),
AESPID  = "FORMNAME-R:13/L:13XXXX",
stringsAsFactors = FALSE
)

check_ae_aeout_aeendtc_nonfatal(AE)
check_ae_aeout_aeendtc_nonfatal(AE,preproc=roche_derive_rave_row)

AE$AEENDTC &lt;- NULL
check_ae_aeout_aeendtc_nonfatal(AE)

AE$AEOUT &lt;- NULL
check_ae_aeout_aeendtc_nonfatal(AE)

</code></pre>

<hr>
<h2 id='check_ae_aerel'>Check for AEREL1 - AERELN when AEREL is missing and when AEREL is unexpected</h2><span id='topic+check_ae_aerel'></span>

<h3>Description</h3>

<p>Flag if patient has a record with null value of AEREL
but AEREL1 - AERELN contain 'Y'/'N'/'NA', so a likely mapping issue
or if AEREL is missing and there is no any AERELn variable
or if AEREL has unexpected value
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_aerel(AE, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_aerel_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AESEQ, AETERM,
AESTDTC, AEREL, AERELn, AESPID (if present)</p>
</td></tr>
<tr><td><code id="check_ae_aerel_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_aerel_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Vira Vrakina
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
    STUDYID = 1001,
    USUBJID = c(1,2,3,1,2,3),
    AESTDTC = rep('2020-05-05',6),
    AETERM  = c("abc Covid-19", "covid TEST POSITIVE","CHILLS"),
    AESEQ   = c(1,1,1,2,2,2),
    AEREL   = c("Y", "N", "NA", "N", "N", "Y"),
    AEREL1  = c("Y", "N", "NA", "N", "NA", "Y"),
    AEREL2  = c("Y", "N", "NA", "N", "N", "N"),
    AESPID = "FORMNAME-R:13/L:13XXXX",
    stringsAsFactors = FALSE
)

check_ae_aerel(AE)

AE1 &lt;- data.frame(
    STUDYID = 1001,
    USUBJID = c(1,2,3,1,2,3),
    AESTDTC = rep('2020-05-05',6),
    AETERM  = c("abc Covid-19", "covid TEST POSITIVE","CHILLS"),
    AESEQ   = c(1,1,1,2,2,2),
    AEREL   = c("Y", "N", "N", "N", "N", "N"),
    AEREL1  = c("Y", "N", "NA", "N", "N", ""),
    AEREL2  = c("Y", "N", " ", "N", "N", " "),
    AESPID = "FORMNAME-R:13/L:13XXXX",
    stringsAsFactors = FALSE
)

check_ae_aerel(AE1)
check_ae_aerel(AE1,preproc=roche_derive_rave_row)

AE2 &lt;- data.frame(
    STUDYID = 1001,
    USUBJID = c(1,2,3,1,2,3),
    AESTDTC = rep('2020-05-05',6),
    AETERM  = c("abc Covid-19", "covid TEST POSITIVE","CHILLS"),
    AESEQ   = c(1,1,1,2,2,2),
    AEREL   = c("Y", "N", " ", "N", "N", " "),
    AEREL1  = c("NA", "N", "NA", "Y", "N", " "),
    AEREL2  = c("Y", "N", " ", "N", "N", " "),
    AESPID = "FORMNAME-R:13/L:13XXXX",
    stringsAsFactors = FALSE
)

check_ae_aerel(AE2)
check_ae_aerel(AE2,preproc=roche_derive_rave_row)

AE3 &lt;- data.frame(
    STUDYID = 1001,
    USUBJID = c(1,2,3,1,2,3),
    AESTDTC = rep('2020-05-05',6),
    AETERM  = c("abc Covid-19", "covid TEST POSITIVE","CHILLS"),
    AESEQ   = c(1,1,1,2,2,2),
    AEREL   = c("Y", " ", " ", "N", " ", "NA"),
    AESPID = "FORMNAME-R:13/L:13XXXX",
    stringsAsFactors = FALSE
)

check_ae_aerel(AE3)
check_ae_aerel(AE3,preproc=roche_derive_rave_row)


AE4 &lt;- data.frame(
    STUDYID = 1001,
    USUBJID = c(1,2,3,4,5,6),
    AESTDTC = rep('2020-05-05',6),
    AETERM  = c("abc Covid-19", "covid TEST POSITIVE","CHILLS"),
    AESEQ   = c(1,2,3,4,5,6),
    AEREL   = c("Y", "Y", "N", "", "Y", "NA"),
    AEREL1  = "",
    AEREL2  = "",
    AESPID = "FORMNAME-R:13/L:13XXXX",
    stringsAsFactors = FALSE
)

check_ae_aerel(AE4)
check_ae_aerel(AE4,preproc=roche_derive_rave_row)

</code></pre>

<hr>
<h2 id='check_ae_aesdth_aedthdtc'>Check AEs with AESDTH of &quot;Y&quot; but No AEDTHDTC Value</h2><span id='topic+check_ae_aesdth_aedthdtc'></span>

<h3>Description</h3>

<p>This check looks for AE entries with AESDTH of &quot;Y&quot;
but no AEDTHDTC (death date) value
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_aesdth_aedthdtc(AE, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_aesdth_aedthdtc_+3A_ae">AE</code></td>
<td>
<p>Adverse Event SDTM dataset with variables USUBJID, AEDTHDTC,
AESDTH, AETERM, AEDECOD and AESTDTC</p>
</td></tr>
<tr><td><code id="check_ae_aesdth_aedthdtc_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_aesdth_aedthdtc_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean value for whether the check passed or failed, with 'msg'
attribute if the check failed
</p>


<h3>Author(s)</h3>

<p>Shumei Chi
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

AE &lt;- data.frame(
USUBJID = c(1:7), 
AEDECOD = c(letters[1:5], "", NA), 
AETERM = letters[1:7],
AESDTH = c(NA, rep("", 4), "Y", "Y"),
AEDTHDTC = c(1:5, "2020", "2020-01-02"),
AESTDTC = c(1:7),
AESPID = "FORMNAME-R:5/L:5XXXX",
stringsAsFactors=FALSE)

# expect pass
check_ae_aesdth_aedthdtc(AE)
check_ae_aesdth_aedthdtc(AE,preproc=roche_derive_rave_row)

# expect fail 
AE1 &lt;- AE
AE1$AEDTHDTC[3] &lt;- NA
AE1$AESDTH[3] &lt;- "Y"

check_ae_aesdth_aedthdtc(AE1)
check_ae_aesdth_aedthdtc(AE1,preproc=roche_derive_rave_row)

# expect fail 
AE2 &lt;- AE1
AE2$AEDTHDTC[4] &lt;- ""
AE2$AESDTH[4] &lt;- "Y"

check_ae_aesdth_aedthdtc(AE2)
check_ae_aesdth_aedthdtc(AE2,preproc=roche_derive_rave_row)

# non-required variable missing
AE2$AESPID &lt;- NULL
check_ae_aesdth_aedthdtc(AE2)
check_ae_aesdth_aedthdtc(AE2,preproc=roche_derive_rave_row)

# required variable missing 
AE2$AESDTH &lt;- NULL
check_ae_aesdth_aedthdtc(AE2)
check_ae_aesdth_aedthdtc(AE2,preproc=roche_derive_rave_row)

</code></pre>

<hr>
<h2 id='check_ae_aestdtc_after_aeendtc'>Check that all AE start dates are on or before AE end dates</h2><span id='topic+check_ae_aestdtc_after_aeendtc'></span>

<h3>Description</h3>

<p>This check identifies AESTDTC values that are after AEENDTC values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_aestdtc_after_aeendtc(AE, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_aestdtc_after_aeendtc_+3A_ae">AE</code></td>
<td>
<p>Adverse Event SDTM dataset with variables USUBJID,AETERM,AEDECOD,AESTDTC,AEENDTC</p>
</td></tr>
<tr><td><code id="check_ae_aestdtc_after_aeendtc_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_aestdtc_after_aeendtc_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Sara Bodach
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
 USUBJID = 1:12,
 AETERM = "SOME AE TERM",
 AEDECOD = "SOME AE PT",
 AESTDTC = c("2017-01-01","2017-01-03","2017-01-01T14:26","2017","2017-02","2017"      ,""    ,
             "2017"   ,"2017-01-01T14:26","2017-01-01T14:26","2017-01-01T14","2017-01-01T14:26:02")
             ,
 AEENDTC = c("2017-01-01","2017-01-02","2017-01-01T14:25","2015","2017-01","2016-01-01",
             "2000","2017-02","2017-01-01"      ,"2017-01","2017-01-01T13","2017-01-01T14:26:01")
             ,
 AESPID = "FORMNAME-R:19/L:19XXXX",
 stringsAsFactors=FALSE
)

check_ae_aestdtc_after_aeendtc(AE)
check_ae_aestdtc_after_aeendtc(AE,preproc=roche_derive_rave_row)

AE$AETERM &lt;- NULL
check_ae_aestdtc_after_aeendtc(AE)

</code></pre>

<hr>
<h2 id='check_ae_aestdtc_after_dd'>Check for AE dates occurring after death date</h2><span id='topic+check_ae_aestdtc_after_dd'></span>

<h3>Description</h3>

<p>This check looks for AE dates that occur after death date
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_aestdtc_after_dd(AE, DS, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_aestdtc_after_dd_+3A_ae">AE</code></td>
<td>
<p>Adverse Event SDTM dataset with variables USUBJID,
AEDTHDTC, AESTDTC, AEDECOD, AETERM, AESPID (optional)</p>
</td></tr>
<tr><td><code id="check_ae_aestdtc_after_dd_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID,
DSSTDTC, DSDECOD, DSTERM, DSSPID (optional)</p>
</td></tr>
<tr><td><code id="check_ae_aestdtc_after_dd_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_aestdtc_after_dd_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean value for whether the check passed or failed, with 'msg'
attribute if the check failed
</p>


<h3>Author(s)</h3>

<p>Nina Ting Qi
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(STUDYID = 1:5, USUBJID = LETTERS[1:5],
                 AEDTHDTC = c(rep("", 4), "2016-01-01"),
                 AESTDTC = rep("2016-01-01", 5),
                 AEDECOD = c("","", rep("Myocarditis",3)),
                 AETERM = c("INJURY", rep("MYOCARDITIS", 4)),
                 AESPID = "FORMNAME-R:19/L:19XXXX",
                 stringsAsFactors = FALSE)

DS &lt;- data.frame(STUDYID = 1:5, USUBJID = LETTERS[1:5],
                 DSSTDTC = rep("2016-01-02", 5),
                 DSDECOD = c(LETTERS[1:4], "death"),
                 DSSPID = "XXX-R:0",
                 DSTERM = letters[1:5],
                 stringsAsFactors = FALSE)

check_ae_aestdtc_after_dd(AE,DS)

AE$AESTDTC[1] &lt;- "2016-01-03"
AE$USUBJID[1] &lt;- AE$USUBJID[5]

check_ae_aestdtc_after_dd(AE, DS,preproc=roche_derive_rave_row)

AE$AESPID &lt;- NULL
check_ae_aestdtc_after_dd(AE, DS)

DS$DSSPID &lt;- NULL
check_ae_aestdtc_after_dd(AE, DS)

AE$AESTDTC &lt;- NULL
check_ae_aestdtc_after_dd(AE, DS)

</code></pre>

<hr>
<h2 id='check_ae_aetoxgr'>Check for missing AETOXGR and/or AESEV values</h2><span id='topic+check_ae_aetoxgr'></span>

<h3>Description</h3>

<p>This check looks for missing AETOXGR and/or AESEV values and
returns a data frame. If both variables exist it returns records where both
are missing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_aetoxgr(AE, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_aetoxgr_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AESTDTC,
AEDECOD, AETERM, and AETOXGR (or AESEV)</p>
</td></tr>
<tr><td><code id="check_ae_aetoxgr_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_aetoxgr_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Will Harris, Stella Banjo (HackR 2021)
</p>


<h3>Examples</h3>

<pre><code class='language-R'># test with sample data


AE &lt;- data.frame(
 USUBJID = 1:3,
 DOMAIN = c(rep("AE", 3)),
 AESEQ = 1:3,
 AESTDTC = 1:3,
 AETERM = c("FLU COUGH", "HEADACHE", "FEVER"),
 AEDECOD = c("", "Headache", "Fever"),
 AETOXGR = 1:3,
 AESEV = 1:3,
 AESPID = "FORMNAME-R:16/L:16XXXX",
 stringsAsFactors = FALSE
)

check_ae_aetoxgr(AE)

AE$AETOXGR[1] &lt;- NA
check_ae_aetoxgr(AE)

AE$AESEV[1] &lt;- NA
check_ae_aetoxgr(AE,preproc=roche_derive_rave_row)

AE$AETOXGR &lt;- NULL
check_ae_aetoxgr(AE,preproc=roche_derive_rave_row)

AE$AESPID &lt;- NULL
check_ae_aetoxgr(AE,preproc=roche_derive_rave_row)

AE$AESEV &lt;- NULL
check_ae_aetoxgr(AE)

AE$AEDECOD &lt;- NULL
check_ae_aetoxgr(AE)


</code></pre>

<hr>
<h2 id='check_ae_death'>Check for Grade 5 AE death variable consistency</h2><span id='topic+check_ae_death'></span>

<h3>Description</h3>

<p>Checks for grade 5 AEs not marked fatal (AEOUT), death not indicated (AESDTH), or no death date (AESDTHDTC)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_death(AE, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_death_+3A_ae">AE</code></td>
<td>
<p>Adverse Event dataframe with variables USUBJID,AETOXGR,AEOUT,AEDTHDTC,AESDTH</p>
</td></tr>
<tr><td><code id="check_ae_death_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_death_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Iris Zhao
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 AE &lt;- data.frame(
 USUBJID = 1:10,
 AETOXGR = c(1:5,5,5,5,5,5),
 AEDTHDTC = c(rep(NA,4),rep("2020-01-01",6)),
 AESDTH = c(rep(NA,4),rep("Y",6)),
 AEOUT = c(rep(NA,4),rep("FATAL",6)),
  AESPID = "FORMNAME-R:13/L:13XXXX"
)

check_ae_death(AE)
check_ae_death(AE,preproc=roche_derive_rave_row)

AE$AEDTHDTC[5]="NA"
AE$AEDTHDTC[6]=NA
AE$AEDTHDTC[7]=""
AE$AESDTH[8]=NA
AE$AEOUT[9]=NA

check_ae_death(AE)
check_ae_death(AE,preproc=roche_derive_rave_row)

</code></pre>

<hr>
<h2 id='check_ae_death_ds_discon'>Check if death in AE then there should be a study discon form</h2><span id='topic+check_ae_death_ds_discon'></span>

<h3>Description</h3>

<p>This checks that if death is indicated in AE via
AEDTHDTC/AESDTH/AEOUT (as well as grade 5 AE if AETOXGR exists) then
there should be a study discontinuation record indicated by DS.DSSCAT
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_death_ds_discon(AE, DS, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_death_ds_discon_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AEDTHDTC, AESDTH, AEOUT</p>
</td></tr>
<tr><td><code id="check_ae_death_ds_discon_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID, DSCAT, DSSCAT</p>
</td></tr>
<tr><td><code id="check_ae_death_ds_discon_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_death_ds_discon_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Sara Bodach
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
 STUDYID = rep(1,6),
 USUBJID = 1:6,
 AEDTHDTC = c(NA,"2020-01-01",NA,NA,NA,NA),
 AESDTH = c(NA,NA,"Y",NA,NA,NA),
 AEOUT = c(NA,NA,NA,"FATAL",NA,NA),
 AETOXGR = c(NA,NA,NA,NA,"5",NA),
 AESPID="FORMNAME-R:2/L:2XXXX"
)

DS &lt;- data.frame(
 STUDYID = 1,
 USUBJID = 1:3,
 DSCAT="DISPOSITION EVENT",
 DSSCAT=c("STUDY DISCON",
 "STUDY DISCON",
 "STUDY COMPLETION/EARLY DISCONTINUATION")
)

check_ae_death_ds_discon(AE,DS)
check_ae_death_ds_discon(AE,DS,preproc=roche_derive_rave_row)

DS$DSSCAT = NULL

check_ae_death_ds_discon(AE,DS)

</code></pre>

<hr>
<h2 id='check_ae_ds_partial_death_dates'>Check for partial death dates in AE and DS</h2><span id='topic+check_ae_ds_partial_death_dates'></span>

<h3>Description</h3>

<p>This checks looks for partial death dates in AE and DS
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_ds_partial_death_dates(AE, DS, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_ds_partial_death_dates_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID,AEDTHDTC,AEDECOD</p>
</td></tr>
<tr><td><code id="check_ae_ds_partial_death_dates_+3A_ds">DS</code></td>
<td>
<p>Dispostion SDTM dataset with variables USUBJID,DSSCAT,DSSTDTC,DSDECOD</p>
</td></tr>
<tr><td><code id="check_ae_ds_partial_death_dates_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_ds_partial_death_dates_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Will Harris
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# test with sample data

AE &lt;- data.frame(
 USUBJID = 1:3,
 AEDECOD = c("AE1","AE2","AE3"),
 AEDTHDTC = c("2017-01-01","2017",NA),
 AESPID = "FORMNAME-R:2/L:2XXXX",
 stringsAsFactors=FALSE
)

DS &lt;- data.frame(
 USUBJID = 1:4,
 DSSCAT = "STUDY DISCON",
 DSDECOD = "DEATH",
 DSSTDTC = c("2017-01-01","2017","2017-01-02","2016-10"),
 stringsAsFactors=FALSE
)

check_ae_ds_partial_death_dates(AE,DS)
check_ae_ds_partial_death_dates(AE,DS,preproc=roche_derive_rave_row)

DS$DSSTDTC = NULL

check_ae_ds_partial_death_dates(AE,DS)

</code></pre>

<hr>
<h2 id='check_ae_dup'>Check for duplicate AE entries</h2><span id='topic+check_ae_dup'></span>

<h3>Description</h3>

<p>Identifies duplicated AE entries based on USUBJID, AETERM,
AEDECOD, AESTDTC, AEENDTC, AEMODIFY (if present), AELAT (if present) and AETOXGR or AESEV
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_dup(AE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_dup_+3A_ae">AE</code></td>
<td>
<p>AE SDTM dataset with variables USUBJID, AETERM, AEDECOD,
AESTDTC, AEENDTC, and AETOXGR or AESEV</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Edgar Manukyan
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(USUBJID = c(1), AESTDTC = c("2020-01-01","2020-01-01","2020-02-01","2020-03-01"),
                 AEENDTC = rep("2020-02-01",4), AEDECOD = letters[c(1,1:3)],
                 AETERM = letters[c(1,1:3)], AETOXGR = c(1,1:3),
                 AESPID="FORMNAME-R:5/L:5XXXX",
                 stringsAsFactors=FALSE)

check_ae_dup(AE)



</code></pre>

<hr>
<h2 id='check_ae_fatal'>Check for death variable consistency when AEOUT==&quot;FATAL&quot;</h2><span id='topic+check_ae_fatal'></span>

<h3>Description</h3>

<p>This check looks for consistency in AESDTH, AEDTHDTC, and
AETOXGR (if applicable) when AEOUT is 'FATAL'.  Note, this check expects
AE grade/severity variables to be populated for either all records or none.
In a case where both AETOXGR and AESEV exist and some records are supposed
to have AETOXGR populated while others have AESEV (ie the two variables are
mutually exclusive) then this check will likely return false positives.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_fatal(AE, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_fatal_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AEDECOD,
AESTDTC, AEDTHDTC, AEOUT, AESDTH</p>
</td></tr>
<tr><td><code id="check_ae_fatal_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_fatal_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Aldrich Salva
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# AETOXGR, no AESEV

AE &lt;- data.frame(
 USUBJID = 1:5,
 AESTDTC = "01JAN2017",
 AEDECOD = c("AE1","AE2","AE3","AE4","AE5"),
 AEOUT = "FATAL",
 AEDTHDTC = c("01FEB2017",NA,"02FEB2017","03FEB2017",NA),
 AESDTH = c("Y","Y","N","Y",NA),
 AETOXGR = c("5","5","5",NA,NA),
 AESPID = "FORMNAME-R:12/L:2XXXX",
 stringsAsFactors = FALSE
)

check_ae_fatal(AE)
check_ae_fatal(AE,preproc=roche_derive_rave_row)

AE$AETOXGR &lt;- NULL
check_ae_fatal(AE)

AE$AEDECOD &lt;- NULL
check_ae_fatal(AE)


# AESEV, no AETOXGR

 AE &lt;- data.frame(
 USUBJID = 1:5,
 AESTDTC = "01JAN2017",
 AEDECOD = c("AE1","AE2","AE3","AE4","AE5"),
 AEOUT = "FATAL",
 AEDTHDTC = c("01FEB2017","02FEB2017","03FEB2017","04FEB2017",NA),
 AESDTH = c("Y","Y","N","Y",NA),
 AESEV = c("SEVERE","MILD","SEVERE",NA,NA),
 AESPID = "FORMNAME-R:12/L:2XXXX",
 stringsAsFactors = FALSE
)

check_ae_fatal(AE)
check_ae_fatal(AE,preproc=roche_derive_rave_row)

AE$AESEV &lt;- NULL
check_ae_fatal(AE)

# Both AESEV and AETOXGR have non-missing values

AE &lt;- data.frame(
 USUBJID = 1:7,
 AESTDTC = "01JAN2017",
 AEDECOD = c("AE1","AE2","AE3","AE4","AE5","AE6","AE7"),
 AEOUT = "FATAL",
 AEDTHDTC = c("01FEB2017",NA,"02FEB2017","03FEB2017",NA,"04FEB2017","05FEB2017"),
 AESDTH = c("Y","Y","N","Y",NA,"Y","Y"),
 AESEV = c("SEVERE","MILD","SEVERE",NA,NA,"MILD","SEVERE"),
 AETOXGR = c("5","5","5",NA,NA,"1","5"),
 AESPID = "FORMNAME-R:12/L:2XXXX",
 stringsAsFactors = FALSE
)

check_ae_fatal(AE)
check_ae_fatal(AE,preproc=roche_derive_rave_row)


# Neither AESEV or AETOXGR

AE &lt;- data.frame(
 USUBJID = 1:5,
 AESTDTC = "01JAN2017",
 AEDECOD = c("AE1","AE2","AE3","AE4","AE5"),
 AEOUT = "FATAL",
 AEDTHDTC = c("01FEB2017",NA,"02FEB2017","03FEB2017",NA),
 AESDTH = c("Y","Y","N","Y",NA),
 AESPID = "FORMNAME-R:12/L:2XXXX",
 stringsAsFactors = FALSE
)

check_ae_fatal(AE)

# AETOXGR exists but unmapped AESEV

 AE &lt;- data.frame(
 USUBJID = 1:5,
 AESTDTC = "01JAN2017",
 AEDECOD = c("AE1","AE2","AE3","AE4","AE5"),
 AEOUT = "FATAL",
 AEDTHDTC = c("01FEB2017",NA,"02FEB2017","03FEB2017",NA),
 AESDTH = c("Y","Y","N","Y",NA),
 AESEV = rep(NA,5),
 AETOXGR = c("5","5","5",NA,NA),
 AESPID = "FORMNAME-R:12/L:2XXXX",
 stringsAsFactors = FALSE
)

check_ae_fatal(AE)
check_ae_fatal(AE,preproc=roche_derive_rave_row)

# AETOXGR and AESEV exist, by both are unmapped

 AE &lt;- data.frame(
 USUBJID = 1:5,
 AESTDTC = "01JAN2017",
 AEDECOD = c("AE1","AE2","AE3","AE4","AE5"),
 AEOUT = "FATAL",
 AEDTHDTC = c("01FEB2017",NA,"02FEB2017","03FEB2017",NA),
 AESDTH = c("Y","Y","N","Y",NA),
 AESEV = NA,
 AETOXGR = NA,
 AESPID = "FORMNAME-R:12/L:2XXXX",
 stringsAsFactors = FALSE
)

check_ae_fatal(AE)
check_ae_fatal(AE,preproc=roche_derive_rave_row)

</code></pre>

<hr>
<h2 id='check_ae_withdr_ds_discon'>Check if an AE leading to drug being withdrawn is reflected in DS</h2><span id='topic+check_ae_withdr_ds_discon'></span>

<h3>Description</h3>

<p>This checks that if there is an AE with AEACN=&quot;DRUG WITHDRAWN&quot; then there should be a treatment discontinuation
record indicated by DS.DSSCAT
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ae_withdr_ds_discon(AE, DS, TS, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ae_withdr_ds_discon_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AEACN</p>
</td></tr>
<tr><td><code id="check_ae_withdr_ds_discon_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID, DSCAT, DSSCAT</p>
</td></tr>
<tr><td><code id="check_ae_withdr_ds_discon_+3A_ts">TS</code></td>
<td>
<p>Trial Summary SDTM dataset with variables TSPARMCD, TSVAL</p>
</td></tr>
<tr><td><code id="check_ae_withdr_ds_discon_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ae_withdr_ds_discon_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Yuliia Bahatska
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
 USUBJID = 1:6,
 AEACN = c("DRUG WITHDRAWN",NA,NA,NA,NA,NA),
 AETOXGR = c(NA,NA,NA,NA,"5",NA),
 AEDECOD=c("NAUSEA","HEADACHE"),
 AESPID = "FORMNAME-R:5/L:5XXXX"
)
DS &lt;- data.frame(
 USUBJID = 1:3,
 DSCAT="DISPOSITION EVENT",
 DSSCAT="STUDY TREATMENT",
 DSDECOD=c("COMPLETED","ADVERSE EVENT","DEATH")
)

 TS &lt;- data.frame(
 TSPARMCD="TRT",
 TSVAL="CHECK"
)

check_ae_withdr_ds_discon(AE,DS,TS)
check_ae_withdr_ds_discon(AE,DS,TS,preproc=roche_derive_rave_row)

DS$DSSCAT = NULL

check_ae_withdr_ds_discon(AE,DS,TS)

</code></pre>

<hr>
<h2 id='check_ce_missing_month'>Check for clinical events dates with year and day known but month unknown</h2><span id='topic+check_ce_missing_month'></span>

<h3>Description</h3>

<p>Check for missing month when clinical events dates
(CESTDTC, CEENDTC, CEDTC) have a known year and day
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ce_missing_month(CE, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ce_missing_month_+3A_ce">CE</code></td>
<td>
<p>Clinical Events SDTM dataset with variables USUBJID, CETERM, and at
least one of the following date variables: CESTDTC, CEENDTC, CEDTC</p>
</td></tr>
<tr><td><code id="check_ce_missing_month_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ce_missing_month_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Ryan Marinelli
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
CE &lt;- data.frame(
 USUBJID = c(1, 2, 3, 4),
 CETERM = c("Headache", "Nausea", "Dizziness", "Fever"),
 CESTDTC = c("2023---01", "2023-01-15", "2023-02-01", "2023-02-10"),
 CEENDTC = c("2023-01-02", "2023---01", "2023-02-02", "2023-02-12"),
 CEDTC = c("2023--01", "", "", ""),
 CESEV = c("Mild", "Moderate", "Mild", "Severe"),
 CESPID = "FORMNAME-R:13/L:13XXXX",
 stringsAsFactors=FALSE
 )

check_ce_missing_month(CE)
check_ce_missing_month(CE,preproc=roche_derive_rave_row)

CE &lt;- data.frame(
 USUBJID = c(1, 2, 3, 4),
 CETERM = c("Headache", "Nausea", "Dizziness", "Fever"),
 CESTDTC = c("2023-01-01", "2023-01-15", "2023-02-01", "2023-02-10"),
 CEENDTC = c("2023-01-02", "2023-01-16", "2023-02-02", "2023-02-12"),
 CEENDTC = "",
 CESEV = c("Mild", "Moderate", "Mild", "Severe"),
 CESPID = "FORMNAME-R:13/L:13XXXX",
 stringsAsFactors=FALSE
 )

check_ce_missing_month(CE)

CE$CETERM = NULL

check_ce_missing_month(CE)

</code></pre>

<hr>
<h2 id='check_cm_cmdecod'>Check for missing CMDECOD values</h2><span id='topic+check_cm_cmdecod'></span>

<h3>Description</h3>

<p>This check looks for missing CMDECOD values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_cm_cmdecod(CM, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_cm_cmdecod_+3A_cm">CM</code></td>
<td>
<p>Concomitant Medications SDTM dataset with variables USUBJID, CMTRT, CMDECOD</p>
</td></tr>
<tr><td><code id="check_cm_cmdecod_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_cm_cmdecod_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Lei Zhao, Stella Banjo (HackR 2021)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
CM &lt;- data.frame(
 USUBJID = 1:5,
 DOMAIN = rep("CM", 5),
 CMTRT = rep("DRUG TERM", 5),
 CMDECOD = rep("CODED DRUG TERM", 5),
 CMSTDTC = 1:5,
 CMENDTC = 1:5,
 CMCAT = "CONCOMITANT MEDICATIONS",
 CMSPID = c("FORMNAME-R:13/L:13XXXX",
             "FORMNAME-R:16/L:16XXXX",
             "FORMNAME-R:2/L:2XXXX",
             "FORMNAME-R:19/L:19XXXX",
             "FORMNAME-R:5/L:5XXXX"),
 stringsAsFactors=FALSE
)

check_cm_cmdecod(CM)

CM$CMDECOD[1] = NA
CM$CMDECOD[2] = "NA"
CM$CMDECOD[3:5] = ""
check_cm_cmdecod(CM)
check_cm_cmdecod(CM,preproc=roche_derive_rave_row)

CM$CMDECOD &lt;- NULL
check_cm_cmdecod(CM)

</code></pre>

<hr>
<h2 id='check_cm_cmindc'>Check for concomitant medication indication with text string &quot;PROPHYL&quot;
when not given for prophylaxis</h2><span id='topic+check_cm_cmindc'></span>

<h3>Description</h3>

<p>This check looks for patients with text string &quot;PROPHYL&quot; in CMINDC
when CMPROPH is not checked as &quot;Y&quot; in studies with given for prophylaxis
variable (CMPROPH)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_cm_cmindc(CM, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_cm_cmindc_+3A_cm">CM</code></td>
<td>
<p>Concomitant Medication SDTM dataset with variables USUBJID, CMTRT,
CMSTDTC, CMINDC, CMPROPH, CMSPID (optional)</p>
</td></tr>
<tr><td><code id="check_cm_cmindc_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_cm_cmindc_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Sara Bodach, Stella Banjo (HackR 2021)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
CM &lt;- data.frame(
 USUBJID = c(rep(1,3),rep(2,3),rep(3,3)),
 CMTRT = letters[1:9],
 CMSTDTC = rep("2017-01-01",9),
 CMINDC = c(rep("INDICATION 1",2), rep("indication 2",2),
            rep("Prophylaxis",2),rep("PROPHYLACTIC",2),"PROPHYLAXIS FOR XYZ"),
 CMPROPH = c(rep("Y",3),rep(NA,2),rep("",2),"NA","."),
 CMSPID = "/F:XXX-D:12345-R:123",
 stringsAsFactors=FALSE
)

check_cm_cmindc(CM)
check_cm_cmindc(CM,preproc=roche_derive_rave_row)

CM$CMPROPH[7] = "Y"
check_cm_cmindc(CM)

CM$CMSPID = NULL
check_cm_cmindc(CM,preproc=roche_derive_rave_row)

CM$CMPROPH = NULL
check_cm_cmindc(CM)


</code></pre>

<hr>
<h2 id='check_cm_cmlat'>Check if ocular concomitant medication has laterality missing or laterality field is
populated but route is not eye-related.</h2><span id='topic+check_cm_cmlat'></span>

<h3>Description</h3>

<p>This check assesses CMCAT = &quot;CONCOMITANT MEDICATIONS&quot; and flags potential
ocular records with missing/inconsistent route and laterality: for eye-related
CMROUTE ('INTRAVITREAL', 'OPHTHALMIC', etc.), CMLAT is not populated -or- CMROUTE is not eye-related
(i.e., not INTRAVITREAL, OPHTHALMIC, TOPICAL, etc.) but CMLAT is LEFT/RIGHT/BILATERAL.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_cm_cmlat(CM, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_cm_cmlat_+3A_cm">CM</code></td>
<td>
<p>Concomitant Medications Dataset for Ophtho Study with variables
USUBJID, CMCAT, CMLAT, CMDECOD, CMTRT, CMROUTE, CMSPID (if Present), CMSTDTC (if Present)</p>
</td></tr>
<tr><td><code id="check_cm_cmlat_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_cm_cmlat_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Monarch Shah (HackR 2021 Team Eye)
</p>


<h3>See Also</h3>

<p>Other OPHTH: 
<code><a href="#topic+check_ae_aelat">check_ae_aelat</a>()</code>,
<code><a href="#topic+check_cm_cmlat_prior_ocular">check_cm_cmlat_prior_ocular</a>()</code>,
<code><a href="#topic+check_oe_bcva_1m_late_early_tot">check_oe_bcva_1m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_late_early_tot">check_oe_bcva_4m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_vs_1m_req">check_oe_bcva_4m_vs_1m_req</a>()</code>,
<code><a href="#topic+check_oe_bcva_tot_mismatch">check_oe_bcva_tot_mismatch</a>()</code>,
<code><a href="#topic+check_oe_sc_lat_count_fingers">check_oe_sc_lat_count_fingers</a>()</code>,
<code><a href="#topic+check_pr_prlat">check_pr_prlat</a>()</code>,
<code><a href="#topic+check_sc_dm_eligcrit">check_sc_dm_eligcrit</a>()</code>,
<code><a href="#topic+check_sc_dm_seyeselc">check_sc_dm_seyeselc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
CM &lt;- data.frame(
   USUBJID = 1:7,
   CMCAT = "CONCOMITANT MEDICATIONS",
   CMSTDTC = 1:7,
   CMLAT   = c("Left", "","Bilateral", "", "", "LEFT", ""),
   CMTRT  = c("A", "B", "A", "B", "A", "A", "B"),
   CMDECOD = c("A", "B", "A", "B", "A", "A", "B"),
   CMROUTE = c("","OPHTHALMIC","INTRAVITREAL","INTRAVITREAL",
               "opHTHALMIC", "INTRaOCULAr", "INTRaOCULAr"),
   CMSPID  = "FORMNAME-R:13/L:13XXXX",
   stringsAsFactors = FALSE)
check_cm_cmlat(CM,preproc=roche_derive_rave_row)

CM &lt;- data.frame(
   USUBJID = 1:5,
   CMCAT = rep("CONCOMITANT MEDICATIONS",5),
   CMSTDTC = 1:5,
   CMLAT   = c("Left", "LEFT","Bilateral",
               "RIGHT", "RIgHT"),
   CMTRT  = c("A", "B", "A", "B", "A"),
   CMDECOD = c("A", "B", "A", "B", "A"),
   CMROUTE = c("","OPHTHALMIC","INTRAVITREAL",
               "INTRaOCULAr", "opHTHALMIC"),
   stringsAsFactors = FALSE)
check_cm_cmlat(CM)

CM &lt;- data.frame(
   USUBJID = 1:5,
   CMCAT = "CONCOMITANT MEDICATIONS",
   CMSTDTC = 1:5,
   CMLAT   = c("Left", "LEFT","Bilateral", "RIGHT", "RIgHT"),
   CMTRT  = c("A", "B", "A", "B", "A"),
   CMDECOD = c("A", "B", "A", "B", "A"),
   #CMROUTE = c("","OPHTHALMIC","INTRAVITREAL","INTRaOCULAr", "opHTHALMIC"),
   stringsAsFactors = FALSE)
check_cm_cmlat(CM)

</code></pre>

<hr>
<h2 id='check_cm_cmlat_prior_ocular'>Check if ocular concomitant medication has laterality missing for specific
&quot;PRIOR OCULAR THERAPIES AND TREATMENTS&quot; (or similar names) CRF page.</h2><span id='topic+check_cm_cmlat_prior_ocular'></span>

<h3>Description</h3>

<p>This check assesses ocular CMCAT records and flags records with
missing/inconsistent laterality
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_cm_cmlat_prior_ocular(CM, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_cm_cmlat_prior_ocular_+3A_cm">CM</code></td>
<td>
<p>Concomitant Medications Dataset for Ophtha Study with variables USUBJID, CMCAT, CMLAT, CMTRT, CMSPID
(if Present), CMSTDTC (if Present), CMLOC (if Present), CMINDC (if Present), CMDOSFRM (if Present)</p>
</td></tr>
<tr><td><code id="check_cm_cmlat_prior_ocular_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_cm_cmlat_prior_ocular_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Tim Barnett (HackR 2021 Team Eye) (copied from check_cm_cmlat)
</p>


<h3>See Also</h3>

<p>Other OPHTH: 
<code><a href="#topic+check_ae_aelat">check_ae_aelat</a>()</code>,
<code><a href="#topic+check_cm_cmlat">check_cm_cmlat</a>()</code>,
<code><a href="#topic+check_oe_bcva_1m_late_early_tot">check_oe_bcva_1m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_late_early_tot">check_oe_bcva_4m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_vs_1m_req">check_oe_bcva_4m_vs_1m_req</a>()</code>,
<code><a href="#topic+check_oe_bcva_tot_mismatch">check_oe_bcva_tot_mismatch</a>()</code>,
<code><a href="#topic+check_oe_sc_lat_count_fingers">check_oe_sc_lat_count_fingers</a>()</code>,
<code><a href="#topic+check_pr_prlat">check_pr_prlat</a>()</code>,
<code><a href="#topic+check_sc_dm_eligcrit">check_sc_dm_eligcrit</a>()</code>,
<code><a href="#topic+check_sc_dm_seyeselc">check_sc_dm_seyeselc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
CM &lt;- data.frame(
   USUBJID = 1:5,
   CMCAT = "PRIOR OCULAR THERAPIES AND TREATMENTS",
   CMSTDTC = 1:5,
   CMLAT   = c("Left", "","Bilateral", "", ""),
   CMTRT   = c("A", "B", "A", "B", "A"),
   CMDECOD = c("A", "B", "A", "B", "A"),
   CMROUTE = c("","OPHTHALMIC","INTRAVITREAL","INTRAVITREAL", "opHTHALMIC"),
   CMSPID  = "FORMNAME-R:13/L:13XXXX",
   stringsAsFactors = FALSE)
check_cm_cmlat_prior_ocular(CM,preproc=roche_derive_rave_row)

CM &lt;- data.frame(
   USUBJID = 1:5,
   CMCAT = "Prior Ocular Therapies/Treatments",
   CMSTDTC = 1:5,
   CMLAT   = c("", "LEFT","Bilateral", "", "RIgHT"),
   CMTRT  = c("A", "B", "A", "B", "A"),
   CMDECOD = c("A", "B", "A", "B", "A"),
   #CMROUTE = c("","OPHTHALMIC","INTRAVITREAL","INTRAVITREAL", "opHTHALMIC"),
   stringsAsFactors = FALSE)
check_cm_cmlat_prior_ocular(CM)

CM &lt;- data.frame(
   USUBJID = 1:5,
   CMCAT = "CONCOMITANT MEDICATIONS",
   CMSTDTC = 1:5,
   CMLAT   = c("Left", "LEFT","Bilateral", "RIGHT", "RIgHT"),
   CMTRT  = c("A", "B", "A", "B", "A"),
   CMDECOD = c("A", "B", "A", "B", "A"),
   CMROUTE = c("","OPHTHALMIC","INTRAVITREAL","INTRAVITREAL", "opHTHALMIC"),
   stringsAsFactors = FALSE)
check_cm_cmlat_prior_ocular(CM)

CM &lt;- data.frame(
   USUBJID = 1:5,
   CMCAT = "CONCOMITANT MEDICATIONS",
   CMSTDTC = 1:5,
   CMLAT   = c("Left", "LEFT","Bilateral", "RIGHT", "RIgHT"),
   CMTRT  = c("A", "B", "A", "B", "A"),
   CMDECOD = c("A", "B", "A", "B", "A"),
   #CMROUTE = c("","OPHTHALMIC","INTRAVITREAL","INTRAVITREAL", "opHTHALMIC"),
   stringsAsFactors = FALSE)
check_cm_cmlat_prior_ocular(CM)

CM &lt;- data.frame(
   USUBJID = 1:5,
   CMCAT = c(rep("Prior Ocular Therapies/Treatments",3), rep("Non-Ocular Therapies/Treatments",2)),
   CMSTDTC = 1:5,
   CMLAT   = c("", "LEFT","Bilateral", "", ""),
   CMTRT  = c("A", "B", "A", "B", "A"),
   CMDECOD = c("A", "B", "A", "B", "A"),
   #CMROUTE = c("","OPHTHALMIC","INTRAVITREAL","ORAL", "ORAL"),
   stringsAsFactors = FALSE)
check_cm_cmlat_prior_ocular(CM)



</code></pre>

<hr>
<h2 id='check_cm_missing_month'>Check for conmed dates with year and day known but month unknown</h2><span id='topic+check_cm_missing_month'></span>

<h3>Description</h3>

<p>Check for missing month when conmed start (CMSTDTC) or end dates
(CMENDTC) have known year and day
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_cm_missing_month(CM, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_cm_missing_month_+3A_cm">CM</code></td>
<td>
<p>Concomitant Medications SDTM dataset with variables USUBJID, CMTRT,
CMSTDTC, CMENDTC</p>
</td></tr>
<tr><td><code id="check_cm_missing_month_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_cm_missing_month_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Chandra Mannem
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
CM &lt;- data.frame(
 USUBJID = 1:3,
 CMTRT = c("CM1","CM2","CM3"),
 CMSTDTC = c("2017-01-01","2017---01","2017-01-02"),
 CMENDTC = c("2017-02-01","2017-03-01","2017---01"),
 CMSPID = "/F:XXX-D:12345-R:123",
 stringsAsFactors=FALSE
)

check_cm_missing_month(CM)
check_cm_missing_month(CM,preproc=roche_derive_rave_row)

CM$CMSTDTC = NULL

check_cm_missing_month(CM)

</code></pre>

<hr>
<h2 id='check_dd_ae_aedthdtc_ds_dsstdtc'>Check if death date is the same in AE and DS domains</h2><span id='topic+check_dd_ae_aedthdtc_ds_dsstdtc'></span>

<h3>Description</h3>

<p>This check compares death date in AE AEDTHDT with death date in
DS DSSTDTC. It is expected that they are the same.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_dd_ae_aedthdtc_ds_dsstdtc(AE, DS, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_dd_ae_aedthdtc_ds_dsstdtc_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID and AEDTHDTC</p>
</td></tr>
<tr><td><code id="check_dd_ae_aedthdtc_ds_dsstdtc_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID, DSDECOD, DSSTDTC</p>
</td></tr>
<tr><td><code id="check_dd_ae_aedthdtc_ds_dsstdtc_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_dd_ae_aedthdtc_ds_dsstdtc_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Hiral Raval
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
 STUDYID = rep(1, 3),
 USUBJID = 1:3,
 AEDTHDTC = c("2020-01-01","2020-01-02","2020-01-03"),
 AESPID = "FORMNAME-R:19/L:19XXXX"
)

DS &lt;- data.frame(
 STUDYID = rep(1, 3),
 USUBJID = 1:3,
 DSDECOD = rep("DEATH", 3),
 DSSTDTC = c("2020-01-01","2020-01-02","2020-01-03"),
 DSSPID = "XXX-R:0",
 stringsAsFactors = FALSE
)

# no case
check_dd_ae_aedthdtc_ds_dsstdtc(AE, DS)

# 1 case
DS[3, "DSSTDTC"] &lt;- "2000-01-01"
check_dd_ae_aedthdtc_ds_dsstdtc(AE, DS, preproc=roche_derive_rave_row)

# check for non existence of vars
DS$DSDECOD &lt;- NULL
DS$DSSTDTC &lt;- NULL
check_dd_ae_aedthdtc_ds_dsstdtc(AE, DS)

</code></pre>

<hr>
<h2 id='check_dd_ae_aeout_aedthdtc'>Check if there is a death date and AEOUT='FATAL' agreement</h2><span id='topic+check_dd_ae_aeout_aedthdtc'></span>

<h3>Description</h3>

<p>This check looks for AE death dates if AEOUT='FATAL' and for the
reverse, i.e if there is an AE death date, then AEOUT should have the value
&quot;FATAL&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_dd_ae_aeout_aedthdtc(AE, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_dd_ae_aeout_aedthdtc_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AEDTHDTC,
AEDECOD, AESTDTC and AEOUT</p>
</td></tr>
<tr><td><code id="check_dd_ae_aeout_aedthdtc_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_dd_ae_aeout_aedthdtc_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Joel Laxamana
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
 USUBJID = 1:3,
 AEDTHDTC = c("2020-01-01","2020-01-02","2020-01-03"),
 AEDECOD = 1:3,
 AESTDTC = 1:3,
 AEOUT = rep("FATAL", 3),
 AESPID = "FORMNAME-R:19/L:19XXXX",
 stringsAsFactors = FALSE
)

# pass
check_dd_ae_aeout_aedthdtc(AE)

# fail - 1 case (AEDTHDTC not populated but AEOUT == FATAL)
AE1 &lt;- AE
AE1[3, "AEDTHDTC"] &lt;- NA
check_dd_ae_aeout_aedthdtc(AE1)
check_dd_ae_aeout_aedthdtc(AE1,preproc=roche_derive_rave_row)

# pass -- even though AEDTHDTC populated 
AE2 &lt;- AE
AE2[1, "AEOUT"] &lt;- NA
check_dd_ae_aeout_aedthdtc(AE2)
check_dd_ae_aeout_aedthdtc(AE2,preproc=roche_derive_rave_row)

# 2 cases 
AE[3, "AEDTHDTC"] &lt;- NA
AE[1, "AEOUT"] &lt;- NA
check_dd_ae_aeout_aedthdtc(AE)
check_dd_ae_aeout_aedthdtc(AE,preproc=roche_derive_rave_row)

# 2 cases 
AE[1, "AEOUT"] &lt;- 'NOT RECOVERED/NOT RESOLVED'
check_dd_ae_aeout_aedthdtc(AE)
check_dd_ae_aeout_aedthdtc(AE,preproc=roche_derive_rave_row)

# non-critical variable missing
AE$AESPID &lt;- NULL
check_dd_ae_aeout_aedthdtc(AE)
check_dd_ae_aeout_aedthdtc(AE,preproc=roche_derive_rave_row)

# critical variables are missing
AE$AEDTHDTC &lt;- NULL
AE$USUBJID &lt;- NULL
check_dd_ae_aeout_aedthdtc(AE)
check_dd_ae_aeout_aedthdtc(AE,preproc=roche_derive_rave_row)

</code></pre>

<hr>
<h2 id='check_dd_death_date'>Check if patient with Death due to AE also has Death record in DS</h2><span id='topic+check_dd_death_date'></span>

<h3>Description</h3>

<p>Flag if patient has a Death in AE (i.e. AE record with non-missing AE.AEDTHDTC)
but no Death in DS (i.e. record where DS.DSDECOD=DEATH and
DS.DSTERM contains 'DEATH' and does not contain 'PROGRESSIVE DISEASE' or 'DISEASE RELAPSE'
(so we can pick up records where DSTERM in 'DEATH','DEATH DUE TO ...' and exclude
'DEATH DUE TO PROGRESSIVE DISEASE', 'DEATH DUE TO DISEASE RELAPSE')
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_dd_death_date(AE, DS, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_dd_death_date_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with USUBJID, AEDTHDTC, AESPID (optional)</p>
</td></tr>
<tr><td><code id="check_dd_death_date_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with USUBJID, DSDECOD, DSTERM</p>
</td></tr>
<tr><td><code id="check_dd_death_date_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_dd_death_date_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Edgar Manukyan, N Springfield updated on 14SEP2020
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
 USUBJID = 1:5,
 AEDTHDTC = c("2018-01-01", "2018-01-02", "2018-01-03","2018-01-04", ""),
 AESPID="FORMNAME-R:13/L:13XXXX",
 stringsAsFactors = FALSE
)

DS &lt;- data.frame(
 USUBJID = c(1,1,2,3,3,4),
 DSTERM=c("DEATH","RANDOM THING","ADVERSE EVENT",
          "DEATH DUE TO PROGRESSIVE DISEASE","ADVERSE EVENT",
          "DEATH DUE TO ABC"),
 DSDECOD=c("DEATH","ADVERSE EVENT","DEATH", "DEATH","OTHER", "DEATH"),
 stringsAsFactors=FALSE
)

check_dd_death_date(AE,DS)
check_dd_death_date(AE,DS,preproc=roche_derive_rave_row)

</code></pre>

<hr>
<h2 id='check_dm_actarm_arm'>Check DM where ARM is not equal to ACTARM</h2><span id='topic+check_dm_actarm_arm'></span>

<h3>Description</h3>

<p>This check looks for DM entries where ARM is not equal to ACTARM
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_dm_actarm_arm(DM)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_dm_actarm_arm_+3A_dm">DM</code></td>
<td>
<p>Demographics SDTM dataset with variables USUBJID, ARM, and ACTARM</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean value for whether the check passed or failed, with 'msg'
attribute if the check failed
</p>


<h3>Author(s)</h3>

<p>Ying Yuen
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
DM &lt;- data.frame(USUBJID = 1:5,
                 ARM = c(letters[1:3], letters[5:6]),
                 ACTARM = letters[1:5],
                 stringsAsFactors = FALSE)

check_dm_actarm_arm(DM)

</code></pre>

<hr>
<h2 id='check_dm_ae_ds_death'>Check if death reported in DM then death indicator also present in DS or AE</h2><span id='topic+check_dm_ae_ds_death'></span>

<h3>Description</h3>

<p>This checks that when death is indicated in DM with either of DTHFL or
DTHDTC then there should be death indicated in either AE or DS.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_dm_ae_ds_death(DM, DS, AE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_dm_ae_ds_death_+3A_dm">DM</code></td>
<td>
<p>Demographics SDTM dataset with variables USUBJID, DTHFL, DTHDTC</p>
</td></tr>
<tr><td><code id="check_dm_ae_ds_death_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID, DSDECOD, DSSTDTC</p>
</td></tr>
<tr><td><code id="check_dm_ae_ds_death_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AEDTHDTC, AESDTH, AEOUT</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Sara Bodach
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
 STUDYID = 1,
 USUBJID = 1:3,
 AEDTHDTC = c(NA,1,NA),
 AESDTH = c(NA,"Y",NA),
 AEOUT = c(NA,"FATAL",NA),
 AETOXGR = c(NA,"5",NA)
)

DS &lt;- data.frame(
 STUDYID = 1,
 USUBJID = 1:3,
 DSDECOD = c(NA,"DEATH",NA),
 DSSTDTC = c(NA,"DSDATE",NA)
)

DM &lt;- data.frame(
 STUDYID = 1,
 USUBJID = 1:3,
 DTHFL=c(NA,"Y","Y"),
 DTHDTC = c(NA,"DMDATE","DMDATE")
 )

check_dm_ae_ds_death(DM,DS,AE)

DS$DSDECOD = NULL

check_dm_ae_ds_death(DM,DS,AE)

</code></pre>

<hr>
<h2 id='check_dm_age_missing'>Check for patients with suspicious age values</h2><span id='topic+check_dm_age_missing'></span>

<h3>Description</h3>

<p>Check for patients with missing AGE, AGE&lt;18 or AGE&gt;90 in DM
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_dm_age_missing(DM)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_dm_age_missing_+3A_dm">DM</code></td>
<td>
<p>Demographics SDTM dataset with variables USUBJID,AGE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Nina Qi
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
DM &lt;- data.frame(
 USUBJID = 1:10,
 AGE = c(50,60,17,99,NA,33,500,40,22,NA)
)

check_dm_age_missing(DM)

DM$AGE = NULL

check_dm_age_missing(DM)

</code></pre>

<hr>
<h2 id='check_dm_armcd'>Check for missing ARM or ARMCD values in DM</h2><span id='topic+check_dm_armcd'></span>

<h3>Description</h3>

<p>This check looks for missing ARM or ARMCD values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_dm_armcd(DM)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_dm_armcd_+3A_dm">DM</code></td>
<td>
<p>Demographics SDTM dataset with variables USUBJID, ARM, ARMCD</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Rena Wang
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
DM &lt;- data.frame(
 USUBJID = 1:3,
 ARM = 1:3,
 ARMCD = 1:3
)

check_dm_armcd(DM)

DM$ARMCD[1] &lt;- NA
check_dm_armcd(DM)

DM$ARM[2] &lt;- NA
check_dm_armcd(DM)

DM$ARMCD &lt;- NULL
check_dm_armcd(DM)


</code></pre>

<hr>
<h2 id='check_dm_dthfl_dthdtc'>Check that when DM.DTHFL is Y, DM.DTHDTC does not have a missing value, and vice versa</h2><span id='topic+check_dm_dthfl_dthdtc'></span>

<h3>Description</h3>

<p>This check is bi-directional for consistency of DM.DTHFL and DM.DTHDTC and returns a data
frame. Note there is a possible valid scenario for this issue if death date is truly unknown
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_dm_dthfl_dthdtc(DM)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_dm_dthfl_dthdtc_+3A_dm">DM</code></td>
<td>
<p>Demographics SDTM dataset with variables USUBJID,DTHFL,DTHDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Ross Farrugia
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
DM &lt;- data.frame(
 USUBJID = 1:7,
 DTHFL = 1:7,
 DTHDTC = 1:7
)

DM$DTHFL[1] = ""
DM$DTHDTC[1] = "2020-01-01"
DM$DTHFL[2] = "N"
DM$DTHDTC[2] = "2020-01-01"
DM$DTHFL[3] = "Y"
DM$DTHDTC[3] = "2020-01-01"
DM$DTHFL[4] = "Y"
DM$DTHDTC[4] = ""
DM$DTHFL[5] = "N"
DM$DTHDTC[5] = ""
DM$DTHFL[6] = "Y"
DM$DTHDTC[6] = "2020"
DM$DTHFL[7] = ""
DM$DTHDTC[7] = ""
check_dm_dthfl_dthdtc(DM)

DM$DTHFL &lt;- NULL
DM$DTHDTC &lt;- NULL
check_dm_dthfl_dthdtc(DM)

</code></pre>

<hr>
<h2 id='check_dm_usubjid_ae_usubjid'>Check patients in the DM dataset who do not have records in the AE dataset</h2><span id='topic+check_dm_usubjid_ae_usubjid'></span>

<h3>Description</h3>

<p>This check looks for patients in the DM dataset who do not have
records in the AE dataset, and obtains first treatment start date and earliest
death date for these patients
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_dm_usubjid_ae_usubjid(DM, AE, DS, EX)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_dm_usubjid_ae_usubjid_+3A_dm">DM</code></td>
<td>
<p>Demographics SDTM dataset with variable USUBJID</p>
</td></tr>
<tr><td><code id="check_dm_usubjid_ae_usubjid_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variable USUBJID</p>
</td></tr>
<tr><td><code id="check_dm_usubjid_ae_usubjid_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID, DSSTDTC, DSDECOD</p>
</td></tr>
<tr><td><code id="check_dm_usubjid_ae_usubjid_+3A_ex">EX</code></td>
<td>
<p>Exposure SDTM dataset with variables USUBJID, EXDOSE, EXSTDTC,
EXTRT</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Vani Nimbal
</p>


<h3>Examples</h3>

<pre><code class='language-R'>USUBJID&lt;- c(1:10)
DM=data.frame(USUBJID)
AE=data.frame(USUBJID)
AE$USUBJID[3]=NA
AE$USUBJID[8]=NA
AE$USUBJID[10]=NA

EX &lt;- data.frame(
USUBJID = c(1:8, 6, 8, 10, 10, 10, 10),
EXOCCUR = rep("Y", times=14),
EXDOSE = rep(c(1,2), times=7),
EXSTDTC = c(rep("2012-01-01", 10),"2012-02-04","2012-02-04", "", "2012-02-07"),
EXTRT = "GDC",
stringsAsFactors=FALSE
)

DS &lt;- data.frame(
USUBJID = c(2,8,8),
DSDECOD = rep("DEATH", times=3),
DSSTDTC = c("2012-12-01", NA, "2013-07-01"),
stringsAsFactors=FALSE
)
check_dm_usubjid_ae_usubjid(DM, AE, DS, EX)

EX$EXOCCUR[3]="N"

check_dm_usubjid_ae_usubjid(DM, AE, DS, EX)

EX$EXOCCUR=NULL

check_dm_usubjid_ae_usubjid(DM, AE, DS, EX)

</code></pre>

<hr>
<h2 id='check_dm_usubjid_dup'>Check duplicate patient records in DM based on USUBJID</h2><span id='topic+check_dm_usubjid_dup'></span>

<h3>Description</h3>

<p>This check looks for duplicate patient demographics records in DM
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_dm_usubjid_dup(DM)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_dm_usubjid_dup_+3A_dm">DM</code></td>
<td>
<p>Demographics SDTM dataset with variable USUBJID</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean value for whether the check passed or failed, with 'msg'
attribute if the check failed
</p>


<h3>Author(s)</h3>

<p>Madeleine Ma, Stella Banjo (HackR 2021)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## duplicates and same patient number across sites for 3-part USUBJID
DM &lt;- data.frame(USUBJID = c("GO12345-00000-1000",
                             "GO12345-11111-1000",
                             "GO12345-00000-1000",
                             "GO12345-00000-1001"),
      stringsAsFactors = FALSE)

check_dm_usubjid_dup(DM)


## no duplicate IDs in the dataframe for 3-part USUBJID
DM2 &lt;- data.frame(USUBJID = c("GO12345-00000-1000",
                              "GO12345-11111-1001",
                              "GO12345-11111-1002"),
             stringAsFactors = FALSE)

check_dm_usubjid_dup(DM2)


## duplicates for 2-part USUBJID
DM3 &lt;- data.frame(USUBJID = c("GO12345-1000",
                              "GO12345-1000"),
            stringAsFactors = FALSE)

check_dm_usubjid_dup(DM3)


##  no duplicate IDs in the dataframe for 2-part USUBJID
DM4 &lt;- data.frame(USUBJID = c("GO12345-1000",
                              "GO12345-1001",
                              "GO12345-1002"),
             stringAsFactors = FALSE)

check_dm_usubjid_dup(DM4)

##  dataframe with one or two additional variables, if there is variation across other variables
DM5 &lt;- data.frame(USUBJID = c("GO12345-1000",
                              "GO12345-1000"),
                  SEX = c("M", "F"),
                  AGE = c(18, 60),
         stringAsFactors = FALSE)

check_dm_usubjid_dup(DM5)

## dataframe in which USUBJID is not present
DM6 &lt;- data.frame(
         STUDYID = c("GO12345"),
         SEX = c("M"),
         AGE = c(72),
     stringAsFactors = FALSE)

check_dm_usubjid_dup(DM6)

</code></pre>

<hr>
<h2 id='check_ds_ae_discon'>Check for treatment discontinuation consistency between DS and AE</h2><span id='topic+check_ds_ae_discon'></span>

<h3>Description</h3>

<p>This check looks for consistency when DS.DSSPID=DISCTX*
then there should be AE.AEACN*=DRUG WITHDRAWN
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ds_ae_discon(DS, AE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ds_ae_discon_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID, DSSPID, DSCAT,
DSDECOD, DSSTDTC</p>
</td></tr>
<tr><td><code id="check_ds_ae_discon_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AEDECOD,
AESTDTC, AEACN*</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Sarwan Singh
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
 USUBJID = 1:5,
 AESTDTC = "01JAN2017",
 AETERM  = c("AE1","AE2","AE3","AE4","AE5"),
 AEDECOD = c("AE1","AE2","AE3","AE4","AE5"),
 AEACN = c("DOSE REDUCED", "DOSE REDUCED", "DOSE NOT CHANGED",
 "DOSE NOT CHANGED", "NOT APPLICABLE"),
 stringsAsFactors = FALSE
)


DS &lt;- data.frame(
 USUBJID = 1:5,
 DSSPID  = c('XXXDISCTXXXXX'),
 DSSTDTC = '01JAN2017',
 DSCAT   = rep("DISPOSITION EVENT", 5),
 DSSCAT   = rep("TX FORM", 5),
 DSDECOD = c("PHYSICIAN DECISION", "OTHER", "PHYSICIAN DECISION", "OTHER", "DEATH"),
 stringsAsFactors = FALSE
)

# no case
check_ds_ae_discon(DS, AE)

# 1 case
DS[3, "DSDECOD"] &lt;- 'ADVERSE EVENT'
check_ds_ae_discon(DS, AE)

# mutliple AEACNx
AE &lt;- data.frame(
 USUBJID = 1:5,
 AESTDTC = c("01JAN2017"),
 AETERM  = c("AE1","AE2","AE3","AE4","AE5"),
 AEDECOD = c("AE1","AE2","AE3","AE4","AE5"),
 AEACN   = rep("MULTIPLE", 5),
 AEACN1  = c("DOSE REDUCED", "DOSE NOT CHANGED", "DOSE NOT CHANGED",
 "DOSE NOT CHANGED", "NOT APPLICABLE"),
 stringsAsFactors = FALSE
)

check_ds_ae_discon(DS, AE)

</code></pre>

<hr>
<h2 id='check_ds_dsdecod_death'>Check for study discontinuation record if death indicated</h2><span id='topic+check_ds_dsdecod_death'></span>

<h3>Description</h3>

<p>If a patient has a record where DS.DSDECOD == DEATH they should
also have a Study Discon Record
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ds_dsdecod_death(DS, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ds_dsdecod_death_+3A_ds">DS</code></td>
<td>
<p>Disposition domain with variables USUBJID, DSDECOD, DSSCAT, and
optional variables DSCAT, DSSTDTC, DSSPID</p>
</td></tr>
<tr><td><code id="check_ds_dsdecod_death_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ds_dsdecod_death_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Sara Bodach and Will Harris
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
DS &lt;- data.frame(
 STUDYID = 1,
 USUBJID = 1:3,
 DSDECOD = c(NA,"DEATH",NA),
 DSSTDTC = c(NA,"DSDATE",NA),
 DSCAT = c('DISPOSITION EVENT', 'DISPOSITION EVENT', 'OTHER'),
 DSSCAT = c('STUDY COMPLETION/EARLY DISCONTINUATION',
            'TREATMENT DISCONTINUATION',
            'STUDY TREATMENT'),
 DSOTH = 1:3,
 DSSPID = "XXX-R:0",
 stringsAsFactors=FALSE
 )

check_ds_dsdecod_death(DS)
check_ds_dsdecod_death(DS,preproc=roche_derive_rave_row)

DS$DSSCAT[2] &lt;- "STUDY COMPLETION/EARLY DISCONTINUATION"
check_ds_dsdecod_death(DS)

DS$DSDECOD = NULL
check_ds_dsdecod_death(DS)


</code></pre>

<hr>
<h2 id='check_ds_dsdecod_dsstdtc'>Check DS with death record but no death date</h2><span id='topic+check_ds_dsdecod_dsstdtc'></span>

<h3>Description</h3>

<p>This check looks for patients in DS who have a record indicating
death but no corresponding record with death date in DS.
For example, &quot;Survival Follow Up&quot; records often have no death dates, so for
a data cut to be applied properly, you have to impute that missing
death date from another record where its not missing (e.g. Study Discon form)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ds_dsdecod_dsstdtc(DS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ds_dsdecod_dsstdtc_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTMv dataset with variables USUBJID, DSDECOD,
DSSCAT and DSSTDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean value for whether the check passed or failed, with 'msg'
attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Will Harris
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
DS &lt;- data.frame(STUDYID = rep(1, 5),
                 USUBJID = c(1, 1, 1, 2, 3),
                 DSDECOD = c("DEATH", "DEATH", rep("", 3)),
                 DSSCAT = LETTERS[1:5],
                 DSSTDTC = c("", "2016-01-01", "", "", "2016-01-02"),
                 stringsAsFactors = FALSE)

check_ds_dsdecod_dsstdtc(DS)

DS$DSSTDTC[2] &lt;- ""

check_ds_dsdecod_dsstdtc(DS)


</code></pre>

<hr>
<h2 id='check_ds_dsscat'>Check for patients with more than one study discontinuation records</h2><span id='topic+check_ds_dsscat'></span>

<h3>Description</h3>

<p>This check looks for patient who has more than one study
discontinuation records
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ds_dsscat(DS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ds_dsscat_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID,DSSCAT</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Madeleine Ma
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
DS &lt;- data.frame(
 USUBJID = c(rep(1,3),rep(2,3),rep(3,3)),
 DSSCAT= rep(c("STUDY DISCONTINUATION", "ADVERSE EVENT", "PROTOCOL"),3),
 stringsAsFactors=FALSE
)
check_ds_dsscat(DS)

DS$DSSCAT[8] = "STUDY DISCONTINUATION"
check_ds_dsscat(DS)

DS$DSSCAT = NULL
check_ds_dsscat(DS)


</code></pre>

<hr>
<h2 id='check_ds_dsterm_death_due_to'>Check missing cause of death information in DS</h2><span id='topic+check_ds_dsterm_death_due_to'></span>

<h3>Description</h3>

<p>This check looks for DS.DSTERM values with missing death reason
and returns a data frame (e.g. records where DSTERM = 'DEATH DUE TO')
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ds_dsterm_death_due_to(DS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ds_dsterm_death_due_to_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTMv dataset with variables USUBJID, DSTERM, DSDECOD,
DSDTC, DSSTDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Sara Bodach
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
DS &lt;- data.frame(
 STUDYID = 1,
 USUBJID = 1:4,
 DSTERM = c("DEATH DUE TO",
   "DEATH DUE TO ",
   "DEATH DUE TO ADVERSE EVENT",
   "DEATH DUE TO UNKNOWN"),
 DSDECOD = "DEATH",
 DSDTC = "2017-01-01",
 DSSTDTC = "2017-01-01",
 stringsAsFactors=FALSE
)

check_ds_dsterm_death_due_to(DS)

DS$DSDECOD &lt;- NULL
check_ds_dsterm_death_due_to(DS)

</code></pre>

<hr>
<h2 id='check_ds_duplicate_randomization'>Check for duplicate randomization records for a patient</h2><span id='topic+check_ds_duplicate_randomization'></span>

<h3>Description</h3>

<p>Checks for duplicate subject IDs (USUBJID) in the DS domain when
randomization is indicated
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ds_duplicate_randomization(DS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ds_duplicate_randomization_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID, DSDECOD</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Madeleine Ma
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
DS &lt;- data.frame(
 USUBJID = c("ID1","ID1","ID2","ID2","ID3","ID3"),
 DSDECOD = c("RANDOMIZATION","OTHER THING","RANDOMIZATION",
             "OTHER THING","RANDOMIZATION","RANDOMIZATION")
             , stringsAsFactors = FALSE
)

check_ds_duplicate_randomization(DS)

DS$DSDECOD &lt;- NULL
check_ds_duplicate_randomization(DS)

</code></pre>

<hr>
<h2 id='check_ds_ex_after_discon'>Check for patients who had Start/End date of treatment after study discontinuation date</h2><span id='topic+check_ds_ex_after_discon'></span>

<h3>Description</h3>

<p>Check for patients who had Start/End date of treatment after study discontinuation date
in the DS and EX domains.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ds_ex_after_discon(DS, EX)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ds_ex_after_discon_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID, DSSCAT, DSCAT and DSSTDTC</p>
</td></tr>
<tr><td><code id="check_ds_ex_after_discon_+3A_ex">EX</code></td>
<td>
<p>Exposure SDTM dataset with variables USUBJID, EXSTDTC, EXENDTC, EXTRT, EXDOSE and EXOCCUR (if available)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Saibah Chohan, Ashley Mao, Tina Cho (HackR 2021 Team STA-R)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
DS &lt;- data.frame(
 USUBJID = c(rep(1,2), rep(2,2)),
 DSSCAT= rep(c("STUDY COMPLETION/EARLY DISCONTINUATION", "ADVERSE EVENT"),2),
 DSCAT = rep(c("DISPOSITION EVENT", "OTHER"),2),
 DSSTDTC = c("2019-12-29", "2019-12-20", "2019-12-10", "2019-12-01"),
 stringsAsFactors = FALSE
 )

EX &lt;- data.frame(
 USUBJID = c(rep(1,2), rep(2,2)),
 EXSTDTC = c("2019-12-20", "2019-12-28", "2019-12-26", "2019-12-27"),
 EXENDTC = c("2019-12-10", "2019-12-23", "2019-12-30", "2019-12-27"),
 EXTRT = c(rep("SOME DRUG", 2), rep("PLACEBO",2)),
 EXDOSE = c(10,10,0,0),
 stringsAsFactors = FALSE
 )

check_ds_ex_after_discon(DS, EX)

DS &lt;- data.frame(
 USUBJID = c(rep(1,2), rep(2,2)),
 DSSCAT= rep(c("STUDY COMPLETION/EARLY DISCONTINUATION", "ADVERSE EVENT"),2),
 DSCAT = rep(c("DISPOSITION EVENT", "OTHER"),2),
 DSSTDTC = c("2019-12-29", "2019-12-20", "2019-12-10", "2019-12-01"),
 stringsAsFactors = FALSE
 )

EX &lt;- data.frame(
 USUBJID = c(rep(1,2), rep(2,2)),
 EXSTDTC = c("2019-12-20", "2019-12-28", "2019-12-01", "2019-12-02"),
 EXENDTC = c("2019-12-10", "2019-12-23", "2020", "2020"),
 EXTRT = c(rep("SOME DRUG", 2), rep("PLACEBO",2)),
 EXDOSE = c(10,10,0,0),
 stringsAsFactors = FALSE
 )

check_ds_ex_after_discon(DS, EX)



</code></pre>

<hr>
<h2 id='check_ds_multdeath_dsstdtc'>Check DS with multiple death records with death dates, where death dates do not match</h2><span id='topic+check_ds_multdeath_dsstdtc'></span>

<h3>Description</h3>

<p>This check looks for patients in DS who have multiple records indicating
death, with non-missing mismatching death dates in DSSTDTC.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ds_multdeath_dsstdtc(DS, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ds_multdeath_dsstdtc_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTMv dataset with variables USUBJID, DSDECOD, and DSSTDTC</p>
</td></tr>
<tr><td><code id="check_ds_multdeath_dsstdtc_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ds_multdeath_dsstdtc_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean value for whether the check passed or failed, with 'msg'
attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Kimberly Fernandes
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
DS_error1 &lt;- data.frame(STUDYID = rep(1, 6),
  USUBJID = c(1, 1, 1, 2, 1,1),
  DSDECOD = c("DEATH", "DEATH", rep("", 2),"DEATH","DEATH"),
  DSSCAT = LETTERS[1:6],
  DSSTDTC = c("", "2016-01-01", "", "", "2016-01-02","2016-01-01"),
  stringsAsFactors = FALSE)

DS_error2 &lt;- data.frame(STUDYID = rep(1, 6),
  USUBJID = c(1, 1, 1, 2, 1,1),
  DSDECOD = c("DEATH", "DEATH", rep("", 2),"DEATH","DEATH"),
  DSSCAT = LETTERS[1:6],
  DSSTDTC = c("", "2016-01", "", "", "2016-01-01","2016-01-01"),
  stringsAsFactors = FALSE)
  
 DS_noerror &lt;- data.frame(STUDYID = rep(1, 6),
                        USUBJID = c(1, 1, 1, 2, 1,1),
                        DSDECOD = c("DEATH", "DEATH", rep("", 2),"DEATH","DEATH"),
                        DSSCAT = LETTERS[1:6],
                        DSSTDTC = c("", "2016-01-01", "", "", "2016-01-01","2016-01-01"),
                        stringsAsFactors = FALSE)

check_ds_multdeath_dsstdtc(DS_error1)
check_ds_multdeath_dsstdtc(DS_error2)
check_ds_multdeath_dsstdtc(DS_noerror)
</code></pre>

<hr>
<h2 id='check_ds_sc_strat'>Check if randomized patients are missing stratification factor data</h2><span id='topic+check_ds_sc_strat'></span>

<h3>Description</h3>

<p>Check if Study is randomized (DS.DSDECOD == &quot;RANDOMIZED&quot; or &quot;RANDOMIZATION&quot;), and subject Characteristics Domain (SC) has no stratification factors reported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ds_sc_strat(DS, SC)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ds_sc_strat_+3A_ds">DS</code></td>
<td>
<p>Subject Dispostion Dataset with variable USUBJID, DSDECOD, DSSTDTC</p>
</td></tr>
<tr><td><code id="check_ds_sc_strat_+3A_sc">SC</code></td>
<td>
<p>Subject Characteristics Dataset with variables USUBJID, SCTEST, SCTESTCD, SCCAT, SCORRES</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Monarch Shah
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
ds &lt;- data.frame(USUBJID = c(1,2,2),
                 DSDECOD = c("RANDOMIZATION", "RANDOMIZED", "Randomized"),
                 DSSTDTC = c("2021-01-01", "2021-01-02", "2021-02-01"))
sc &lt;- data.frame(USUBJID  = c(1,1,1,2,2,2),
                 SCCAT = rep("STRATIFICATION", 6),
                 SCTESTCD = c("STRAT 1", "STRAT 2", "STRAT 3", "STRAT 1", "STRAT 2", "STRAT 3"),
                 SCTEST   = c("Factor 1", "Factor 2", "Factor 3",
                              "Factor 1", "Factor 2", "Factor 3"),
                 SCORRES  = c("US", "Left", "Score &gt; x", "RoW", "Right", "Score &lt; x"),
                 stringsAsFactors = FALSE)

check_ds_sc_strat(ds, sc)

ds &lt;- data.frame(USUBJID = c(1,2,2),
                 DSDECOD = c("RANDOMIZATION", "RANDOMIZED", "Randomized"),
                 DSSTDTC = c("2021-01-01", "2021-01-02", "2021-02-01"))
sc &lt;- data.frame(USUBJID  = c(1,1,1),
                 SCCAT = rep("STRATIFICATION", 3),
                 SCTESTCD = c("STRAT 1", "STRAT 2", "STRAT 3"),
                 SCTEST   = c("Factor 1", "Factor 2", "Factor 3"),
                 SCORRES  = c("US", "Left", NA),
                 stringsAsFactors = FALSE)

check_ds_sc_strat(ds, sc)

ds &lt;- data.frame(USUBJID = c(1,2),
                 DSDECOD = c("Open Label", "Open Label"),
                 DSSTDTC = c("2021-01-01", "2021-01-02"))
sc &lt;- data.frame(USUBJID  = c(1,1,1,2,2,2),
                 SCCAT = rep("No STRATIFICATION", 6),
                 SCTESTCD = c("STRAT 1", "STRAT 2", "STRAT 3", "STRAT 1", "STRAT 2", "STRAT 3"),
                 SCTEST   = c("Factor 1", "Factor 2", "Factor 3",
                              "Factor 1", "Factor 2", "Factor 3"),
                 SCORRES  = c("US", "Left", NA, "RoW", "Right", "Score &lt; x"),
                 stringsAsFactors = FALSE)

check_ds_sc_strat(ds, sc)


</code></pre>

<hr>
<h2 id='check_dv_ae_aedecod_covid'>Check for consistency between DV and AE for COVID-19 events</h2><span id='topic+check_dv_ae_aedecod_covid'></span>

<h3>Description</h3>

<p>If a patient has a DV record indicating COVID-19 then they
should also have COVID-related AE where AE.AEDECOD matches covid.REFTERM.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_dv_ae_aedecod_covid(
  AE,
  DV,
  covid_terms = c("COVID-19", "CORONAVIRUS POSITIVE")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_dv_ae_aedecod_covid_+3A_ae">AE</code></td>
<td>
<p>Adverse Events SDTM dataset with variables USUBJID, AEDECOD</p>
</td></tr>
<tr><td><code id="check_dv_ae_aedecod_covid_+3A_dv">DV</code></td>
<td>
<p>Protocol Deviation SDTM dataset with variables USUBJID, DVREAS</p>
</td></tr>
<tr><td><code id="check_dv_ae_aedecod_covid_+3A_covid_terms">covid_terms</code></td>
<td>
<p>A length &gt;=1 vector of AE terms identifying COVID-19 (case does not matter)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check returns 0 obs, otherwise return subset dataframe.
</p>


<h3>Author(s)</h3>

<p>Natalie Springfield
</p>


<h3>See Also</h3>

<p>Other COVID: 
<code><a href="#topic+check_ae_aeacn_ds_disctx_covid">check_ae_aeacn_ds_disctx_covid</a>()</code>,
<code><a href="#topic+check_ae_aeacnoth_ds_stddisc_covid">check_ae_aeacnoth_ds_stddisc_covid</a>()</code>,
<code><a href="#topic+check_dv_covid">check_dv_covid</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
 USUBJID = 1:6,
 AEDECOD = c("pandemic", "covid-19","some AE","some AE","CORONAVIRUS POSITIVE","UNMAPPED")
)

DV &lt;- data.frame(
 USUBJID = 1:6,
 DVREAS=c("SUSPECTED EPIDEMIC/PANDEMIC INFECTION",
          "UNKNOWN",
          "SUSPECTED EPIDEMIC/PANDEMIC INFECTION",
          "OTHER",
          "SUSPECTED EPIDEMIC/PANDEMIC INFECTION",
          "SUSPECTED EPIDEMIC/PANDEMIC INFECTION")
)

check_dv_ae_aedecod_covid(AE,DV)


# Pass specific covid terms

check_dv_ae_aedecod_covid(AE,DV,covid_terms=c("COVID-19", "CORONAVIRUS POSITIVE","PANDEMIC"))

</code></pre>

<hr>
<h2 id='check_dv_covid'>Check for consistency in COVID-19 DV variables, DVREAS and DVEPRELI</h2><span id='topic+check_dv_covid'></span>

<h3>Description</h3>

<p>This check looks for inconsistency between DVREAS and DVEPRELI.
If DVREAS indicates a COVID-19 related deviation, then DVEPRELI should not be
missing and vice versa. This check applies to studies using the Protocol
Deviation Management System (PDMS).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_dv_covid(DV)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_dv_covid_+3A_dv">DV</code></td>
<td>
<p>Protocol Deviations SDTM dataset with variables USUBJID, DVREAS,
DVEPRELI</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Mij Rahman
</p>


<h3>See Also</h3>

<p>Other COVID: 
<code><a href="#topic+check_ae_aeacn_ds_disctx_covid">check_ae_aeacn_ds_disctx_covid</a>()</code>,
<code><a href="#topic+check_ae_aeacnoth_ds_stddisc_covid">check_ae_aeacnoth_ds_stddisc_covid</a>()</code>,
<code><a href="#topic+check_dv_ae_aedecod_covid">check_dv_ae_aedecod_covid</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
DV &lt;- data.frame(
    USUBJID = 1:3,
    DVEPRELI = c("Y","N","Y"),
    DVREAS=c("EPIDEMIC/PANDEMIC INFECTION","EPIDEMIC/PANDEMIC INFECTION",""),
    stringsAsFactors=FALSE
)

check_dv_covid(DV)

</code></pre>

<hr>
<h2 id='check_ec_sc_lat'>Check if Study Drug is not administered in the Study Eye</h2><span id='topic+check_ec_sc_lat'></span>

<h3>Description</h3>

<p>Check if Study Drug is not administered in the Study Eye.
1.&gt; Subset Exposure dataset (EC) for only ocular Study Drug Administration records,
and pass the check if there are none. If EC.ECCAT variable is available then remove records
containing EC.ECCAT = “FELLOW”. If EC.ECCAT variable is not available then include all records,
assuming drug administration is collected for study eye only.
2.&gt; Subset Subject Characteristics dataset (SC) for only Study Eye Selection
3.&gt; Compare Exposure dataset laterality (EC.ECLAT) with Subject Characteristics dataset laterality
(SC.SCORRES - OS = LEFT, OD = RIGHT) and report if there is any mismatch.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ec_sc_lat(EC, SC)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ec_sc_lat_+3A_ec">EC</code></td>
<td>
<p>Subject Exposure Dataset with variables
USUBJID, ECCAT (if available), ECLOC, ECMOOD, ECLAT, ECSTDY, VISIT, ECSTDTC, ECOCCUR, ECROUTE</p>
</td></tr>
<tr><td><code id="check_ec_sc_lat_+3A_sc">SC</code></td>
<td>
<p>Subject Characteristics Dataset for Ophtha Study with variables
USUBJID, SCTEST, SCTESTCD, SCCAT, SCORRES, SCDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Monarch Shah (HackR 2021 Team Eye)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
sc &lt;- data.frame(USUBJID  = c(1,1,1,2,2,2),
                 SCTEST   = c("Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest",
                              " ",
                              "Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest",
                              " "),
                 SCTESTCD = c("ELIGEYE", "FOCID", "", "ELIGEYE", "FOCID", ""),
                 SCCAT    = c("STUDY EYE SELECTION", "STUDY EYE SELECTION", "",
                              "STUDY EYE SELECTION", "STUDY EYE SELECTION", ""),
                 SCORRES  = c("LEFT", "OS", "", "RIGHT", "OD", ""),
                 SCDTC    = "2021-01-01",
                 stringsAsFactors = FALSE)

ec &lt;- data.frame(USUBJID = c(1,1,1,1,1,2,2,2,2,2,2),
                 ECCAT   = c("Fellow", "Study", "Study", "Study", "StudY",
                             "Fellow", "Fellow", "STUDY", "STUDY", "STUDY", ""),
                 ECMOOD  = rep("Performed", 11),
                 ECLOC   = rep("Eye", 11),
                 ECLAT   = c("LEFT", "Left", "left", "LEFT", "LEFT", "RIGHT",
                             "right", "right", "RIGHT", "RIGHT", "right"),
                 ECSTDY  = c(1, 28, 56, 84, 112, 1, 28, 56, 84, 112, 140),
                 VISIT   = c("Week 1", "Week 4", "Week 8", "Week 12", "Week 16",
                             "Week 1", "Week 4", "Week 8", "Week 12", "Week 16", "Week 20"),
                 ECSTDTC = c("2021-01-01", "2021-02-01", "2021-03-01", "2021-04-01", "2021-05-01",
                             "2021-01-01", "2021-02-01", "2021-03-01", "2021-04-01", "2021-05-01",
                             "2021-06-01"),
                 ECOCCUR = "Y",
                 ECROUTE = "INTRAVITREAL",
                 stringsAsFactors=FALSE)

check_ec_sc_lat(SC=sc, EC=ec)

sc &lt;- data.frame(USUBJID  = c(1,1,1,2,2,2),
                 SCTEST   = c("Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest",
                              " ",
                              "Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest",
                              " "),
                 SCTESTCD = c("ELIGEYE", "FOCID", "", "ELIGEYE", "FOCID", ""),
                 SCCAT    = c("STUDY EYE SELECTION", "STUDY EYE SELECTION", "",
                              "STUDY EYE SELECTION", "STUDY EYE SELECTION", ""),
                 SCORRES  = c("LEFT", "OS", "", "RIGHT", "OD", ""),
                 SCDTC    = "2021-01-01",
                 stringsAsFactors = FALSE)

ec &lt;- data.frame(USUBJID = c(1,1,1,1,1,2,2,2,2,2,2),
                 ECCAT   = c("Fellow", "Study", "Study", "Study", "StudY",
                             "Fellow", "Fellow", "STUDY", "STUDY", "STUDY", ""),
                 ECMOOD  = rep("Performed", 11),
                 ECLOC   = rep("Eye", 11),
                 ECLAT   = c("LEFT", "Left", "left", "LEFT", "RIGHT", "RIGHT",
                             "right", "right", "RIGHT", "RIGHT", "left"),
                 ECSTDY  = c(1, 28, 56, 84, 112, 1, 28, 56, 84, 112, 140),
                 VISIT   = c("Week 1", "Week 4", "Week 8", "Week 12", "Week 16",
                             "Week 1", "Week 4", "Week 8", "Week 12", "Week 16", "Week 20"),
                 ECSTDTC = c("2021-01-01", "2021-02-01", "2021-03-01", "2021-04-01", "2021-05-01",
                             "2021-01-01", "2021-02-01", "2021-03-01", "2021-04-01", "2021-05-01",
                             "2021-06-01"),
                 ECOCCUR = "Y",
                 ECROUTE = "OPHTHALMIC",
                 stringsAsFactors=FALSE)

check_ec_sc_lat(SC=sc, EC=ec)

sc &lt;- data.frame(USUBJID  = c(1,1,1,2,2,2,3),
                 SCTEST   = c("Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest",
                              " ",
                              "Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest",
                              " ",
                              "Focus of Study-Specific Interest"),
                 SCTESTCD = c("ELIGEYE", "FOCID", "", "ELIGEYE", "FOCID", "", "FOCID"),
                 SCCAT    = c("STUDY EYE SELECTION", "STUDY EYE SELECTION", "",
                              "STUDY EYE SELECTION",
                              "STUDY EYE SELECTION", "", "STUDY EYE SELECTION"),
                 SCORRES  = c("LEFT", "OS", "", "RIGHT", "OD", "", "RIGHT"),
                 SCDTC    = "2021-01-01",
                 stringsAsFactors = FALSE)

ec &lt;- data.frame(USUBJID = c(1,1,1,1,1,2,2,2,2,2,2),
                 ECMOOD  = "Performed",
                 ECLOC   = "Eye",
                 ECLAT   = c("LEFT", "Left", "left", "LEFT", "RIGHT", "RIGHT",
                             "right", "right", "RIGHT", "RIGHT", "left"),
                 ECSTDY  = c(1, 28, 56, 84, 112, 1, 28, 56, 84, 112, 140),
                 VISIT   = c("Week 1", "Week 4", "Week 8", "Week 12", "Week 16",
                             "Week 1", "Week 4", "Week 8", "Week 12", "Week 16", "Week 20"),
                 ECSTDTC = c("2021-01-01", "2021-02-01", "2021-03-01", "2021-04-01", "2021-05-01",
                             "2021-01-01", "2021-02-01", "2021-03-01", "2021-04-01", "2021-05-01",
                             "2021-06-01"),
                 ECOCCUR = c("Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "N"),
                 stringsAsFactors=FALSE)

check_ec_sc_lat(SC=sc, EC=ec)



</code></pre>

<hr>
<h2 id='check_eg_egdtc_visit_ordinal_error'>Check that all ECG datetimes are earlier than last
visit's (possible datetime data entry error)</h2><span id='topic+check_eg_egdtc_visit_ordinal_error'></span>

<h3>Description</h3>

<p>This check identifies EGDTC values that are
earlier than last visit's. Unscheduled visits are excluded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_eg_egdtc_visit_ordinal_error(EG)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_eg_egdtc_visit_ordinal_error_+3A_eg">EG</code></td>
<td>
<p>ECG Test Results SDTM dataset with variables USUBJID, VISITNUM, VISIT, EGDTC, EGSTAT</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if
the test failed
</p>


<h3>Author(s)</h3>

<p>James Zhang
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# No case
EG&lt;- data.frame(USUBJID = 101:102,
                EGDTC=rep(c("2017-01-01T08:25", "2017-01-05T09:25",
                "2017-01-15T10:25", "2017-01-20T08:25", "2017-01-25T08:25"), 2),
                VISITNUM=rep(1:5,2),
                VISIT=rep(c("Screening", "Cycle 1", "Cycle 2",
                "Cycle 3","UNschedUled"),2),
                EGSTAT="",
                stringsAsFactors=FALSE)
check_eg_egdtc_visit_ordinal_error(EG)

# Cases with earlier datetime
EG$EGDTC[EG$USUBJID == 101 &amp; EG$VISIT == "Cycle 3"] &lt;- "2017-01-10T08:25"
EG$EGDTC[EG$USUBJID == 102 &amp; EG$VISIT == "Cycle 1"] &lt;- "2017-01-01T06:25"
check_eg_egdtc_visit_ordinal_error(EG)

# Cases with duplicated datetime
EG$EGDTC[EG$USUBJID == 101 &amp; EG$VISIT == "Cycle 3"] &lt;- "2017-01-15T10:25"
EG$EGDTC[EG$USUBJID == 102 &amp; EG$VISIT == "Cycle 2"] &lt;- "2017-01-01T06:25"
check_eg_egdtc_visit_ordinal_error(EG)

# Not checking duplicates
EG&lt;- data.frame(USUBJID = rep("101",6),
                EGDTC=rep("2017-01-01T08:25", 6),
                VISITNUM=rep(1:2,3),
                VISIT=rep("Screening",6),
                EGSTAT="",
                stringsAsFactors=FALSE)

check_eg_egdtc_visit_ordinal_error(EG)

</code></pre>

<hr>
<h2 id='check_ex_dup'>Check for duplicate EX records</h2><span id='topic+check_ex_dup'></span>

<h3>Description</h3>

<p>This check looks for duplicate treatment records in EX
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ex_dup(EX)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ex_dup_+3A_ex">EX</code></td>
<td>
<p>Exposure SDTM dataset with variables USUBJID, EXTRT, EXDOSE, EXSTDTC, EXSTDTC.
VISIT is optional.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Fang Yuan
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
EX &lt;- data.frame(
 USUBJID = rep(1,2),
 EXTRT = rep(1,2),
 EXDOSE = rep(1,2),
 EXSTDTC = rep(1,2),
 EXOCCUR = "Y"
)
check_ex_dup(EX)

EX$EXOCCUR &lt;- NULL

check_ex_dup(EX)

EX$EXDOSE &lt;- NULL

check_ex_dup(EX)

# test with sample data without duplicates

EX &lt;- data.frame(
USUBJID = 1:2,
EXTRT = 1:2,
EXDOSE = 1:2,
EXSTDTC = 1:2,
EXOCCUR = "Y"
)

check_ex_dup(EX)

EX = rbind(EX,EX)

check_ex_dup(EX)

# check non existing vars

EX$EXTRT &lt;- NULL
EX$EXOCCUR &lt;- NULL

check_ex_dup(EX)


</code></pre>

<hr>
<h2 id='check_ex_exdose_exoccur'>Check for Missing EXDOSE.</h2><span id='topic+check_ex_exdose_exoccur'></span>

<h3>Description</h3>

<p>This checks looks for missing EXDOSE values when EXOCCUR=&quot;Y&quot;
or when EXOCCUR does not exist.
It could be for a specified drug/treatment, or for all drugs/treatments
in the dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ex_exdose_exoccur(EX, drug = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ex_exdose_exoccur_+3A_ex">EX</code></td>
<td>
<p>Exposure SDTM dataset with variables USUBJID, EXTRT, EXSTDTC,
EXDOSE, and optional variable EXOCCUR and optional variable VISIT</p>
</td></tr>
<tr><td><code id="check_ex_exdose_exoccur_+3A_drug">drug</code></td>
<td>
<p>Drug name for EXTRT; used to subset the dataset.
Default value is NULL (i.e. no filtering by drug)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean value for whether the check passed or failed, with 'msg'
attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Will Harris, Pasha Foroudi
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
EX &lt;- data.frame(
 USUBJID = 1:3,
 EXSEQ   = 1:3,
 EXSTDTC = 1:3,
 EXTRT   = c(1,2,NA),
 EXOCCUR = "Y",
 EXDOSE  = 1:3,
 VISIT = c("CYCLE 1 DAY 1", "CYCLE 2 DAY 1", "CYCLE 3 DAY 1")
)

check_ex_exdose_exoccur(EX)

EX$EXDOSE[3]=NA
check_ex_exdose_exoccur(EX)

EX$EXVISIT = NULL
check_ex_exdose_exoccur(EX)

EX$EXDOSE = NULL
check_ex_exdose_exoccur(EX)


</code></pre>

<hr>
<h2 id='check_ex_exdose_pos_exoccur_no'>Check for EXDOSE&gt;0 When EXOCCUR is not &quot;Y&quot;</h2><span id='topic+check_ex_exdose_pos_exoccur_no'></span>

<h3>Description</h3>

<p>This checks looks for EXDOSE values greater than 0 when
EXOCCUR is not &quot;Y&quot;. It could be for a specified drug/treatment, or for
all drugs/treatments in the dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ex_exdose_pos_exoccur_no(EX, drug = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ex_exdose_pos_exoccur_no_+3A_ex">EX</code></td>
<td>
<p>Exposure SDTM dataset with variables USUBJID, EXTRT, EXSTDTC,
EXOCCUR and EXDOSE</p>
</td></tr>
<tr><td><code id="check_ex_exdose_pos_exoccur_no_+3A_drug">drug</code></td>
<td>
<p>Drug name for EXTRT; used to subset the dataset.
Default value is NULL (i.e. no filtering by drug)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean value for whether the check passed or failed, with 'msg'
attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Sara Bodach
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
EX &lt;- data.frame(
 USUBJID = 1:5,
 EXSTDTC = rep("2017-01-01",5),
 EXTRT   = c(rep("TRT A",2),rep("TRT B",3)),
 EXOCCUR = c(".","", "N", "N", "Y"),
 EXDOSE  = 0:4,
 VISIT = "VISIT 1",
 stringsAsFactors = FALSE
)

check_ex_exdose_pos_exoccur_no(EX)

check_ex_exdose_pos_exoccur_no(EX, drug = "TRT A")
check_ex_exdose_pos_exoccur_no(EX, drug = "TRT B")

EX$EXDOSE = NULL

check_ex_exdose_pos_exoccur_no(EX)

</code></pre>

<hr>
<h2 id='check_ex_exdosu'>Check for missing EXDOSU records</h2><span id='topic+check_ex_exdosu'></span>

<h3>Description</h3>

<p>This check looks for missing EXODOSU values for valid doses
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ex_exdosu(EX)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ex_exdosu_+3A_ex">EX</code></td>
<td>
<p>Exposure SDTM dataset with variables USUBJID,EXTRT,EXSTDTC,EXDOSU</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Jen Chen
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
EX &lt;- data.frame(
 USUBJID = 1:10,
 EXTRT = 1:10,
 EXSTDTC = 1:10,
 EXDOSE = 1:10,
 EXOCCUR = as.character(c(rep("Y",5),rep("N",5))),
 EXDOSU = as.character(rep("mg",10))
)

EX$EXDOSU[1] = ""
EX$EXDOSU[2] = "NA"
EX$EXDOSU[3] = NA

check_ex_exdosu(EX)

EX$EXSTDTC = NULL

check_ex_exdosu(EX)

</code></pre>

<hr>
<h2 id='check_ex_exoccur_exdose_exstdtc'>Check for Invalid EXDOSE (Dose per Administration) and
Missing/Incomplete EXSTDTC (Start Date) Values for valid exposures</h2><span id='topic+check_ex_exoccur_exdose_exstdtc'></span>

<h3>Description</h3>

<p>This check looks for valid exposures (EXOCCUR=Y or doesn't exist) but
EXDOSE (dose per administration) is not &gt; 0 (&gt;= 0 in case of placebo) and/or
EXSTDTC (start date/treatment date) is missing or incomplete in the EX
(exposure) SDTM domain
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ex_exoccur_exdose_exstdtc(EX)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ex_exoccur_exdose_exstdtc_+3A_ex">EX</code></td>
<td>
<p>Exposure SDTM dataset with variables USUBJID, VISIT, VISITNUM,
EXOCCUR, EXTRT, EXDOSE, EXSTDTC and EXENDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean value for whether the check passed or failed, with 'msg'
attribute if the check failed
</p>


<h3>Author(s)</h3>

<p>Sara Bodach
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
EX &lt;- data.frame(USUBJID = LETTERS[1:5],
                 VISIT = paste0("Visit ", 1:5),
                 VISITNUM = 1:5,
                 EXOCCUR = c('Y', rep('', 4)),
                 EXTRT = LETTERS[1:5],
                 EXDOSE = 1:5,
                 EXSTDTC = c('2010-01-01', rep('', 4)),
                 EXENDTC = c('2010-01-01', rep('', 4)),
                 stringsAsFactors = FALSE)

EX$EXOCCUR[2] &lt;- 'Y'
EX$EXSTDTC[2] &lt;- '2011'
EX$EXDOSE[1] &lt;- 0

check_ex_exoccur_exdose_exstdtc(EX)

EX$VISIT &lt;- NULL

check_ex_exoccur_exdose_exstdtc(EX)


</code></pre>

<hr>
<h2 id='check_ex_exoccur_mis_exdose_nonmis'>Check for missing EXOCCUR but EXDOSE not missing</h2><span id='topic+check_ex_exoccur_mis_exdose_nonmis'></span>

<h3>Description</h3>

<p>Checks for exposure records with missing EXOCCUR but EXDOSE not missing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ex_exoccur_mis_exdose_nonmis(EX)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ex_exoccur_mis_exdose_nonmis_+3A_ex">EX</code></td>
<td>
<p>Exposure dataframe with variables USUBJID, EXTRT, EXDOSE, EXOCCUR, EXSTDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Iris Zhao
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 EX &lt;- data.frame(
 USUBJID = 1:10,
 EXTRT = rep(1,10),
 EXOCCUR = c(rep(1,2),rep(NA,4),rep(2,4)),
 EXDOSE = c(rep(NA,4),rep(1,6)),
 EXSTDTC = 1:10
)

EX$EXOCCUR[6]="NA"
EX$EXOCCUR[7]=""
EX$EXOCCUR[8]=NA

check_ex_exoccur_mis_exdose_nonmis(EX)

</code></pre>

<hr>
<h2 id='check_ex_exstdtc_after_dd'>Check for EX dates occurring after death date</h2><span id='topic+check_ex_exstdtc_after_dd'></span>

<h3>Description</h3>

<p>This check looks for EX dates that occur after death date
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ex_exstdtc_after_dd(AE, DS, EX)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ex_exstdtc_after_dd_+3A_ae">AE</code></td>
<td>
<p>Adverse Event SDTM dataset with variables USUBJID,
AEDTHDTC, AESTDTC, AEDECOD, and AETERM</p>
</td></tr>
<tr><td><code id="check_ex_exstdtc_after_dd_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID,
DSSTDTC, DSDECOD, and DSTERM</p>
</td></tr>
<tr><td><code id="check_ex_exstdtc_after_dd_+3A_ex">EX</code></td>
<td>
<p>Exposure SDTM dataset with variables USUBJID,
EXSTDTC, EXTRT, and EXDOSE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean value for whether the check passed or failed, with 'msg'
attribute if the check failed
</p>


<h3>Author(s)</h3>

<p>Nina Ting Qi
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(STUDYID = 1:5, USUBJID = LETTERS[1:5],
                 AEDTHDTC = c(rep("", 4), "2016-01-01"),
                 AESTDTC = rep("2016-01-01", 5),
                 AEDECOD = LETTERS[1:5], AETERM = LETTERS[1:5],
                 stringsAsFactors = FALSE)

DS &lt;- data.frame(STUDYID = 1:5, USUBJID = LETTERS[1:5],
                 DSSTDTC = rep("2016-01-02", 5),
                 DSDECOD = c(LETTERS[1:4], "death"),
                 DSTERM = letters[1:5],
                 stringsAsFactors = FALSE)

EX &lt;- data.frame(STUDYID = 1:5, USUBJID = LETTERS[1:5],
                 EXSTDTC = rep("2015-12-31", 5),
                 EXTRT = LETTERS[1:5],
                 EXDOSE = 1:5,
                 stringsAsFactors = FALSE)

check_ex_exstdtc_after_dd(AE, DS, EX)

EX$EXSTDTC[1] &lt;- "2016-01-03"
EX$USUBJID[1] &lt;- EX$USUBJID[5]

check_ex_exstdtc_after_dd(AE, DS, EX)


</code></pre>

<hr>
<h2 id='check_ex_exstdtc_after_exendtc'>Check that all exposure start dates are on or before exposure end dates</h2><span id='topic+check_ex_exstdtc_after_exendtc'></span>

<h3>Description</h3>

<p>This check identifies EXSTDTC values that are after EXENDTC values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ex_exstdtc_after_exendtc(EX)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ex_exstdtc_after_exendtc_+3A_ex">EX</code></td>
<td>
<p>Exposure SDTM dataset with variables USUBJID,EXTRT,EXSTDTC,EXENDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Sara Bodach
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
EX &lt;- data.frame(
 STUDYID = 1,
 USUBJID = 1:12,
 EXTRT = "SOME DRUG",
 EXSTDTC = c("2017-01-01","2017-01-03","2017-01-01T14:26","2017","2017-02","2017"      ,""    ,
             "2017"   ,"2017-01-01T14:26","2017-01-01T14:26","2017-01-01T14","2017-01-01T14:26:02")
             ,
 EXENDTC = c("2017-01-01","2017-01-02","2017-01-01T14:25","2015","2017-01","2016-01-01","2000",
             "2017-02","2017-01-01"      ,"2017-01","2017-01-01T13","2017-01-01T14:26:01")
             ,
 EXOCCUR = "Y",
 VISIT = "CYCLE 1 DAY 1",
 stringsAsFactors=FALSE
)

check_ex_exstdtc_after_exendtc(EX)

EX$EXOCCUR &lt;- NULL
EX$VISIT &lt;- NULL
check_ex_exstdtc_after_exendtc(EX)

EX$EXTRT &lt;- NULL
check_ex_exstdtc_after_exendtc(EX)

</code></pre>

<hr>
<h2 id='check_ex_exstdtc_visit_ordinal_error'>Check that all EX start dates are earlier than last
visit's (possible datetime data entry error)</h2><span id='topic+check_ex_exstdtc_visit_ordinal_error'></span>

<h3>Description</h3>

<p>This check identifies EXSTDTC values that are
earlier than last visit's. Unscheduled visits are excluded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ex_exstdtc_visit_ordinal_error(EX)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ex_exstdtc_visit_ordinal_error_+3A_ex">EX</code></td>
<td>
<p>Exposure dataset with variables USUBJID, EXTRT, VISITNUM, VISIT, EXDTC, optional variable EXOCCUR</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>James Zhang
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# no case
EX &lt;- data.frame(USUBJID = 101:102,
                EXTRT = rep(c("A", "B"), 5),
                EXSTDTC = rep(c("2017-01-01T08:25", "2017-01-05T09:25",
                 "2017-01-15T10:25","2017-01-20T08:25","2017-01-25T08:25"), 2),
                VISITNUM = rep(1:5,2),
                VISIT = rep(c("Cycle 1", "Cycle 2", "Cycle 3", "Cycle 4", "uNscheDuledd"), 2),
                stringsAsFactors = FALSE)
check_ex_exstdtc_visit_ordinal_error(EX)

# adding cases with earlier date
EX$EXSTDTC[EX$USUBJID == 101 &amp; EX$VISIT == "Cycle 4"] &lt;- "2017-01-10T08:25"
EX$EXSTDTC[EX$USUBJID == 102 &amp; EX$VISIT == "Cycle 2"] &lt;- "2017-01-01T06:25"
check_ex_exstdtc_visit_ordinal_error(EX)

# adding cases with duplicated date
EX$EXSTDTC[EX$USUBJID == 101 &amp; EX$VISIT == "Cycle 5"] &lt;- "2017-01-10T08:25"
EX$EXSTDTC[EX$USUBJID == 102 &amp; EX$VISIT == "Cycle 3"] &lt;- "2017-01-01T06:25"
check_ex_exstdtc_visit_ordinal_error(EX)

</code></pre>

<hr>
<h2 id='check_ex_extrt_exoccur'>Check for EX records where EXTRT is missing</h2><span id='topic+check_ex_extrt_exoccur'></span>

<h3>Description</h3>

<p>This check looks for EX records where EXTRT is missing but EXOCCUR=Y (or EXOCCUR doesn't exist) and returns a data frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ex_extrt_exoccur(EX)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ex_extrt_exoccur_+3A_ex">EX</code></td>
<td>
<p>Exposure domain with variables USUBJID, EXSTDTC, EXTRT, EXDOSE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Betty Wang
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
EX &lt;- data.frame(
USUBJID = 1:10,
EXTRT = 1:10,
EXOCCUR = c(rep("Y",5), rep("",5)),
EXSTDTC = "2016-01-01",
EXDOSE = 1:10,
stringsAsFactors=FALSE
)

EX$EXTRT[1]=""
EX$EXTRT[2]="NA"
EX$EXTRT[3]=NA
EX$EXTRT[6]=""
EX$EXTRT[7]="NA"
EX$EXTRT[8]=NA

check_ex_extrt_exoccur(EX)

EX$EXOCCUR=NULL

check_ex_extrt_exoccur(EX)


</code></pre>

<hr>
<h2 id='check_ex_infusion_exstdtc_exendtc'>Check that an infusion drug has same start/end exposure dates, also including missing start/end dates</h2><span id='topic+check_ex_infusion_exstdtc_exendtc'></span>

<h3>Description</h3>

<p>This check identifies that an infusion drug has same EXSTDTC and EXENDTC dateparts.
If time is available for both dates, also check that end time is after start time.
Missing start/end dates are also included.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ex_infusion_exstdtc_exendtc(EX)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ex_infusion_exstdtc_exendtc_+3A_ex">EX</code></td>
<td>
<p>Exposure SDTM dataset with variables USUBJID,EXTRT,EXSTDTC,EXENDTC,EXROUTE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Anastasiia Khmelnytska, Stella Banjo(HackR 2021)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
EX &lt;- data.frame(
 STUDYID = 1,
 USUBJID = 1:12,
 EXTRT = "SOME DRUG",
 EXROUTE = "INTRAVENOUS",
 EXSTDTC = c("2017-01-01","2017-01-02","2017-01-01T14:36","2015","2017-02","2017"      ,""    ,
             "2017"   ,"2017-01-01T14:26","2017-01-01T14:26","2017-01-01T14","2017-01-01T14:26:01")
             ,
 EXENDTC = c("2017-01-01","2017-01-03","2017-01-01T14:35","2017","2017-01","2016-01-01","2000",
             "2017-02","2017-01-01"      ,"2017-01","2017-01-01T13","2017-01-02T14:26:02")
             ,
 EXOCCUR = "Y",
 VISIT = "CYCLE 1 DAY 1",
 stringsAsFactors=FALSE
)

 check_ex_infusion_exstdtc_exendtc(EX)

 EX2 &lt;- data.frame(
 STUDYID = 1,
 USUBJID = 1:4,
 EXTRT = "SOME DRUG",
 EXROUTE = "INTRAVENOUS",
 EXSTDTC = c("2017-01-03", "", "2017-02-01T14:26", ""),
 EXENDTC = c("", "2017-02-03", "", "2017-02-02T14:26:02"),
 EXOCCUR = "Y",
 VISIT = "CYCLE 1 DAY 1",
 stringsAsFactors = FALSE
 )

 check_ex_infusion_exstdtc_exendtc(EX2)

 EX3 &lt;- data.frame(
     STUDYID = 1,
     USUBJID = 1:3,
     EXTRT = "SOME DRUG",
     EXROUTE = "INTRAVENOUS",
     EXSTDTC = c("2017-01-01", "2017-01-01T14:26", "2017-01-01T14:26"),
     EXENDTC = c("2017-01-01", "2017-01-01", "2017-01"),
     EXOCCUR = "Y",
     VISIT = "CYCLE 1 DAY 1",
     stringsAsFactors=FALSE
 )

 check_ex_infusion_exstdtc_exendtc(EX3)

</code></pre>

<hr>
<h2 id='check_ex_visit'>Check for missing EX.VISIT</h2><span id='topic+check_ex_visit'></span>

<h3>Description</h3>

<p>This check looks missing EX.VISIT values when EX.EXOCCUR=Y (or EX.EXOCCUR doesn't exist)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ex_visit(EX)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ex_visit_+3A_ex">EX</code></td>
<td>
<p>Exposure SDTM dataset with variables USUBJID,EXTRT,EXSTDTC,VISIT, and optional variable EXOCCUR</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Jen Chen
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 EX &lt;- data.frame(
 USUBJID = 1:3,
 EXTRT = 1:3,
 EXSTDTC = 1:3,
 EXOCCUR = "Y",
 VISIT = NA
)

check_ex_visit(EX)

EX$EXOCCUR=NULL

check_ex_visit(EX)

EX$VISIT=NULL

check_ex_visit(EX)#

</code></pre>

<hr>
<h2 id='check_lb_lbdtc_after_dd'>Check for LB dates occurring after death date</h2><span id='topic+check_lb_lbdtc_after_dd'></span>

<h3>Description</h3>

<p>This check looks for LB dates that occur after death date
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_lb_lbdtc_after_dd(AE, DS, LB)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_lb_lbdtc_after_dd_+3A_ae">AE</code></td>
<td>
<p>Adverse Event SDTM dataset with variables USUBJID,
AEDTHDTC, AESTDTC, AEDECOD, and AETERM</p>
</td></tr>
<tr><td><code id="check_lb_lbdtc_after_dd_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID,
DSSTDTC, DSDECOD, and DSTERM</p>
</td></tr>
<tr><td><code id="check_lb_lbdtc_after_dd_+3A_lb">LB</code></td>
<td>
<p>Laboratory Test Findings SDTM dataset with variables USUBJID,
LBDTC, LBTESTCD, and LBORRES</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean value for whether the check passed or failed, with 'msg'
attribute if the check failed
</p>


<h3>Author(s)</h3>

<p>Nina Ting Qi
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(STUDYID = 1:5, USUBJID = LETTERS[1:5],
                 AEDTHDTC = c(rep("", 4), "2016-01-01"),
                 AESTDTC = rep("2016-01-01", 5),
                 AEDECOD = LETTERS[1:5], AETERM = LETTERS[1:5],
                 stringsAsFactors = FALSE)

DS &lt;- data.frame(STUDYID = 1:5, USUBJID = LETTERS[1:5],
                 DSSTDTC = rep("2016-01-02", 5),
                 DSDECOD = c(LETTERS[1:4], "death"),
                 DSTERM = letters[1:5],
                 stringsAsFactors = FALSE)

LB &lt;- data.frame(STUDYID = 1:5, USUBJID = LETTERS[1:5],
                 LBDTC = rep("2015-12-31", 5),
                 LBTESTCD = letters[1:5],
                 LBORRES = 1:5,
                 stringsAsFactors = FALSE)

check_lb_lbdtc_after_dd(AE, DS, LB)

LB$LBDTC[1] &lt;- "2016-01-03"
LB$USUBJID[1] &lt;- LB$USUBJID[5]

check_lb_lbdtc_after_dd(AE, DS, LB)


</code></pre>

<hr>
<h2 id='check_lb_lbdtc_visit_ordinal_error'>Check that all LB dates are duplicated or earlier than last
visit's (possible datetime data entry error)</h2><span id='topic+check_lb_lbdtc_visit_ordinal_error'></span>

<h3>Description</h3>

<p>This check identifies LBDTC values that are duplicated or
earlier than last visit's. Records with LBSTAT == 'NOT DONE' and unscheduled
visits (VISIT with the string &quot;UNSCHEDU&quot;) and treatment discon visits
(VISIT with the string &quot;TREATMENT OR OBSERVATION FU COMP EARLY DISC&quot;) are excluded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_lb_lbdtc_visit_ordinal_error(LB)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_lb_lbdtc_visit_ordinal_error_+3A_lb">LB</code></td>
<td>
<p>SDTM dataset with variables USUBJID, VISITNUM, VISIT, LBDTC, LBTESTCD, LBSTAT</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Simon Luo
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# no case
LB1 &lt;- data.frame(USUBJID = c(rep("101", 5), rep("102", 5)),
                LBCAT = "Hematology",
                LBDTC = rep(c(
                "2017-01-01T08:25",
                "2017-01-05T09:25",
                "2017-01-15T10:25",
                "2017-01-20T08:25",
                "2017-01-25T08:25"), 2),
                VISITNUM = rep(1:5,2),
                VISIT = rep(c(
                "Visit 1",
                "Visit 2",
                "Visit 3",
                "UNSCheduled!!!",
                "VIsit 5"), 2),
                LBSTAT = c(rep("", 9), "NOT DONE"),
                stringsAsFactors = FALSE)

check_lb_lbdtc_visit_ordinal_error(LB1)

LB2 = LB1
LB2$LBCAT = "Virology"
LB3 &lt;- rbind(LB1, LB2)
check_lb_lbdtc_visit_ordinal_error(LB3)

# adding cases with earlier date
LB3$LBDTC[LB3$USUBJID == 101 &amp; LB3$VISIT == "Visit 3"] &lt;- "2016-01-10T08:25"
LB3$LBDTC[LB3$USUBJID == 102 &amp; LB3$VISIT == "Visit 2"] &lt;- "2016-01-01T06:25"
check_lb_lbdtc_visit_ordinal_error(LB = LB3)

# adding cases with duplicated date
LB3$LBDTC[LB3$USUBJID == 102 &amp; LB3$VISIT == "Visit 3"] &lt;- "2017-01-15T10:25"
LB3 &lt;- LB3[order(LB3$USUBJID, LB3$VISITNUM, LB3$LBDTC),]
check_lb_lbdtc_visit_ordinal_error(LB = LB3)

# check if all NOT DONE
LB4 = LB3
LB4$LBSTAT = "NOT DONE"
check_lb_lbdtc_visit_ordinal_error(LB = LB4)

# check dropping a required variable
LB4$LBSTAT = NULL
check_lb_lbdtc_visit_ordinal_error(LB = LB4)

</code></pre>

<hr>
<h2 id='check_lb_lbstnrlo_lbstnrhi'>Check for missing lab reference ranges (LBSTNRLO, LBSTNRHI)</h2><span id='topic+check_lb_lbstnrlo_lbstnrhi'></span>

<h3>Description</h3>

<p>This check looks for missing lab reference ranges (LBSTNRLO,
LBSTNRHI) in standard units when numeric result in standard unit (LBSTRESN)
is not missing and returns a data frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_lb_lbstnrlo_lbstnrhi(DM, LB)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_lb_lbstnrlo_lbstnrhi_+3A_dm">DM</code></td>
<td>
<p>DM SDTM dataset with variable USUBJID, SITEID</p>
</td></tr>
<tr><td><code id="check_lb_lbstnrlo_lbstnrhi_+3A_lb">LB</code></td>
<td>
<p>Lab SDTM dataset with variables USUBJID, LBTEST, LBSTRESN, LBSTNRLO, LBSTNRHI</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Lei Zhao
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
LB &lt;- data.frame(
USUBJID = "1",
LBTEST = "Albumin",
LBSTRESN = 1:10,
LBSTNRLO = 1:10,
LBSTNRHI = 1:10,
stringsAsFactors=FALSE
)

LB$LBSTNRLO[1]=""
LB$LBSTNRLO[2]="NA"
LB$LBSTNRLO[3]=NA
LB$LBSTNRHI[3]=""
LB$LBSTNRHI[4]="NA"
LB$LBSTNRHI[5]=NA

DM &lt;- data.frame(
USUBJID = "1",
SITEID = "123456",
stringsAsFactors=FALSE
)

check_lb_lbstnrlo_lbstnrhi(DM, LB)

</code></pre>

<hr>
<h2 id='check_lb_lbstresc_char'>Check LBORRES/LBSTRESC populated with number beginning with
character '&gt;' or '&lt;', which will yield missing AVAL in ADaM and records will be omitted in analyses such as Hy's Law</h2><span id='topic+check_lb_lbstresc_char'></span>

<h3>Description</h3>

<p>This check looks for missing numeric standardized finding (LBSTRESN)
when original finding (LBORRES) and character standardized finding (LBSTRESC) are not missing
and LBORRES/LBSTRESC populated with number beginning with character '&gt;' or '&lt;'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_lb_lbstresc_char(LB)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_lb_lbstresc_char_+3A_lb">LB</code></td>
<td>
<p>Lab SDTM dataset with variables USUBJID, LBTEST, LBDTC, LBORRES, LBORRESU, LBSTRESN, LBSTRESC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Vira Vrakina
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 LB &lt;- data.frame(
 USUBJID = c("Patient 1","Patient 2","Patient 3"),
 LBTEST   = "Test A",
 LBDTC   = "2017-01-01",
 LBORRES = c("5","3","7"),
 LBORRESU = rep("mg",3),
 LBSTRESC  = c("5","3","7"),
 LBSTRESN  = c(5,3,7),
 stringsAsFactors = FALSE
)

check_lb_lbstresc_char(LB)

 LB &lt;- data.frame(
 USUBJID = c("Patient 1","Patient 2","Patient 3"),
 LBTEST   = rep("Test A", 3),
 LBDTC   = "2017-01-01",
 LBORRES = c("5","3","&lt;7"),
 LBORRESU = rep("mg",3),
 LBSTRESC  = c("5","3","&lt;7"),
 LBSTRESN  = c(5,3,NA),
 stringsAsFactors = FALSE
)

check_lb_lbstresc_char(LB)

LB &lt;- data.frame(
 USUBJID = c("Patient 1","Patient 2","Patient 3"),
 LBTEST   = rep("Test A", 3),
 LBDTC   = rep("2017-01-01", 3),
 LBORRES = c("5","BLQ","&lt;7"),
 LBORRESU = rep("mg",3),
 LBSTRESC  = c("5","BLQ","&lt;7"),
 LBSTRESN  = c(5,NA,NA),
 stringsAsFactors = FALSE
)

check_lb_lbstresc_char(LB)


</code></pre>

<hr>
<h2 id='check_lb_lbstresn_missing'>Check missing standard lab values (LBSTRESN/LBSTRESC)</h2><span id='topic+check_lb_lbstresn_missing'></span>

<h3>Description</h3>

<p>This check looks for missing standardized finding (LBSTRESN/LBSTRESC)
when original finding (LBORRES) is not missing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_lb_lbstresn_missing(LB, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_lb_lbstresn_missing_+3A_lb">LB</code></td>
<td>
<p>Lab SDTM dataset with variables USUBJID, LBTESTCD, LBDTC, LBORRES,
LBORRESU, LBSTRESN, LBSTRESC, VISIT (optional), LBSPID (optional)</p>
</td></tr>
<tr><td><code id="check_lb_lbstresn_missing_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_lb_lbstresn_missing_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Madeleine Ma
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
LB &lt;- data.frame(
 USUBJID = c("Patient 1","Patient 2","Patient 3"),
 LBTEST   = "Test A",
 LBTESTCD   = "TA",
 LBDTC   = "2017-01-01",
 LBORRES = c("5","6","7"),
 LBSTRESC = c("5","6","7"),
 LBORRESU = rep("mg",3),
 LBSTRESN  = c(5,6,NA),
 stringsAsFactors=FALSE
 )

check_lb_lbstresn_missing(LB)

LB$LBSTRESC[3] = ""
check_lb_lbstresn_missing(LB)

LB$LBSTRESC[1] = ""
check_lb_lbstresn_missing(LB)

LB$VISIT = "SCREENING"
check_lb_lbstresn_missing(LB)

LB$LBSPID= "FORMNAME-R:2/L:2XXXX"
check_lb_lbstresn_missing(LB,preproc=roche_derive_rave_row)

LB$LBSTRESN = NULL
check_lb_lbstresn_missing(LB)

LB$LBSTRESC = NULL
check_lb_lbstresn_missing(LB)

</code></pre>

<hr>
<h2 id='check_lb_lbstresu'>Check for missing lab units (LBSTRESU)</h2><span id='topic+check_lb_lbstresu'></span>

<h3>Description</h3>

<p>This check identifies records where original lab values (LBORRES)
exist but standard lab units (LBSTRESU) are not populated, excluding
qualitative results (LBMETHOD) and excluding records when LBTESTCD in
(&quot;PH&quot; &quot;SPGRAV&quot;)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_lb_lbstresu(LB, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_lb_lbstresu_+3A_lb">LB</code></td>
<td>
<p>Lab SDTM dataset with variables USUBJID, LBSTRESC, LBSTRESN,
LBORRES, LBSTRESU, LBTESTCD, LBDTC, LBMETHOD (optional),
LBSPID (optional), and VISIT (optional)</p>
</td></tr>
<tr><td><code id="check_lb_lbstresu_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_lb_lbstresu_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Iris Zhao
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
LB &lt;- data.frame(
USUBJID = 1:10,
LBSTRESC = "5",
LBSTRESN = 1:10,
LBORRES = "5",
LBSTRESU = "g/L",
LBTESTCD = "ALB",
LBDTC = 1:10,
stringsAsFactors=FALSE
)

check_lb_lbstresu(LB)

LB$LBSTRESU[1]=""
check_lb_lbstresu(LB)

LB$LBSTRESU[2]="NA"
check_lb_lbstresu(LB)

LB$LBSTRESU[3]=NA
check_lb_lbstresu(LB)

LB$LBSPID= "FORMNAME-R:2/L:2XXXX"
check_lb_lbstresu(LB,preproc=roche_derive_rave_row)

LB$VISIT= "SCREENING"
check_lb_lbstresu(LB)

LB$LBSTRESU=NULL
check_lb_lbstresu(LB)

</code></pre>

<hr>
<h2 id='check_lb_missing_month'>Check for lab dates with year and day known but month unknown</h2><span id='topic+check_lb_missing_month'></span>

<h3>Description</h3>

<p>Check for missing month when lab specimen collection date (LBDTC)
has known year and day
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_lb_missing_month(LB, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_lb_missing_month_+3A_lb">LB</code></td>
<td>
<p>Laboratory data SDTM dataset with variables USUBJID,LBTEST,LBDTC,VISIT</p>
</td></tr>
<tr><td><code id="check_lb_missing_month_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_lb_missing_month_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Sara Bodach
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
LB &lt;- data.frame(
 USUBJID = 1:4,
 LBTEST = c("TEST1","TEST2","TEST3","TEST3"),
 LBDTC = c("2017-01-01","2017-02-01","2017---01", "2017----01"),
 VISIT = c("VISIT1","VISIT2","VISIT3","VISIT3"),
 stringsAsFactors=FALSE
)

check_lb_missing_month(LB)

LB$LBSPID= "FORMNAME-R:2/L:2XXXX"

check_lb_missing_month(LB,preproc=roche_derive_rave_row)

LB$LBDTC = NULL

check_lb_missing_month(LB)
</code></pre>

<hr>
<h2 id='check_mh_missing_month'>Check for MH dates with year and day known but month unknown</h2><span id='topic+check_mh_missing_month'></span>

<h3>Description</h3>

<p>This check looks for partial missing dates in medical history
start and end dates. That is, with only the month missing while the year
and day are known
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_mh_missing_month(MH, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_mh_missing_month_+3A_mh">MH</code></td>
<td>
<p>Medical History SDTM dataset with variables USUBJID, MHTERM and MHSTDTC</p>
</td></tr>
<tr><td><code id="check_mh_missing_month_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_mh_missing_month_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean value for whether the check passed or failed, with 'msg'
attribute if the check failed
</p>


<h3>Author(s)</h3>

<p>Chandra Mannem
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
MH &lt;- data.frame(USUBJID = LETTERS[1:5],
                 MHTERM = LETTERS[5:1],
                 MHSTDTC = c("2014", NA, "2014-01", "", "2014---02"),
                 stringsAsFactors = FALSE)

check_mh_missing_month(MH)

MH$MHSPID= "FORMNAME-R:2/L:2XXXX"

check_mh_missing_month(MH,preproc=roche_derive_rave_row)

</code></pre>

<hr>
<h2 id='check_mi_mispec'>Check for missing values in the MISPEC variable</h2><span id='topic+check_mi_mispec'></span>

<h3>Description</h3>

<p>This check looks for missing values in the MISPEC variable,
which is required. This will be flagged in P21. This may reflect a mapping issue.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_mi_mispec(MI)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_mi_mispec_+3A_mi">MI</code></td>
<td>
<p>Microscopic Findings with variables USUBJID, MISPEC, MITESTCD, MIDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Stella Banjo (HackR 2021)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
MI &lt;- data.frame(
  USUBJID = c("1","2", "3"),
  DOMAIN = "MI",
  MISEQ = c(1, 2, 1),
  MISPEC = c("","BLOCK SLIDE",NA),
  MITESTCD = "TESTCD1",
  MIDTC = "2020-01-01",
stringAsFactors = FALSE
)

 check_mi_mispec(MI)

## No errors, MISPEC values present
MI2 &lt;- data.frame(
 USUBJID = c("1","2", "3"),
 DOMAIN = "MI",
 MISEQ = 1,
 MISPEC = c("SLIDE", "TUMOR TISSUE", "BLOCK SLIDE"),
 MITESTCD = "TESTCD1",
 MIDTC = "",
 stringsAsFactors = FALSE
)

 check_mi_mispec(MI2)

</code></pre>

<hr>
<h2 id='check_oe_bcva_1m_late_early_tot'>Check if 1m BCVA test stops too late, too early and has correct total</h2><span id='topic+check_oe_bcva_1m_late_early_tot'></span>

<h3>Description</h3>

<p>This ophthalmology check is for BCVA 1m test. It checks three conditions: &lt;1&gt; BCVA test stops too late,
meaning that lines were read after number of correct letters is &lt;= 3. &lt;2&gt; BCVA test stops too early, meaning that
further lines were not read when all numbers of correct letters is &gt; 3. &lt;3&gt; BCVA total score is not correct, meaning
that the sum of the number of correct at 1 meter doesn't match with what has been recorded in eCRF
(BCVA Scores eCRF Page - C. Total number correct at 1m).
Please note that this check only works with USUBJID, VISIT, VISITNUM, OELOC, OELAT combination has unique
dates (OEDTC). If your datasets are having situations like 1) unscheduled visits happening on different dates or
2) BCVA TOTAL happens on a different date from BCVA row tests, such combinations
will be removed from check.
Please note that this check excludes forms BCVA Low Vision Test (BCV5), BCVA Scores (BCV7),
BCVA Low Luminance Scores (BCVLL5), BCVA Combined Assessments (BCVAC), BCVA Low Luminance Combined Assessments (BCVACLL)
before running check as these forms do not include Row numbers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_oe_bcva_1m_late_early_tot(OE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_oe_bcva_1m_late_early_tot_+3A_oe">OE</code></td>
<td>
<p>Ophtho Dataset with variables USUBJID, OESPID, OECAT, OESCAT, OETSTDTL, OESTRESN, OESTAT, OELOC, OELAT,
OERESCAT, VISIT, VISITNUM, OEDTC, OEDY</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Rosemary Li (HackR 2021 Team Eye)
</p>


<h3>See Also</h3>

<p>Other OPHTH: 
<code><a href="#topic+check_ae_aelat">check_ae_aelat</a>()</code>,
<code><a href="#topic+check_cm_cmlat_prior_ocular">check_cm_cmlat_prior_ocular</a>()</code>,
<code><a href="#topic+check_cm_cmlat">check_cm_cmlat</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_late_early_tot">check_oe_bcva_4m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_vs_1m_req">check_oe_bcva_4m_vs_1m_req</a>()</code>,
<code><a href="#topic+check_oe_bcva_tot_mismatch">check_oe_bcva_tot_mismatch</a>()</code>,
<code><a href="#topic+check_oe_sc_lat_count_fingers">check_oe_sc_lat_count_fingers</a>()</code>,
<code><a href="#topic+check_pr_prlat">check_pr_prlat</a>()</code>,
<code><a href="#topic+check_sc_dm_eligcrit">check_sc_dm_eligcrit</a>()</code>,
<code><a href="#topic+check_sc_dm_seyeselc">check_sc_dm_seyeselc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>OE_too_late &lt;- data.frame(
  USUBJID = "1",
  OESPID = "FORMNAME-R:2/L:2XXXX",
  OECAT = "BEST CORRECTED VISUAL ACUITY",
  OETSTDTL = "TESTING DISTANCE: 1M",
  OESCAT = c(rep("", 6), "TOTAL"),
  OESTAT = "",
  OERESCAT = c("ROW 1 - SNELLEN 20/200", 
               "ROW 2 - SNELLEN 20/160", 
               "ROW 4 - SNELLEN 20/100",
               "ROW 3 - SNELLEN 20/125", 
               "ROW 5 - SNELLEN 20/80", 
               "ROW 6 - SNELLEN 20/63", 
               ""),
  VISIT = "WEEK 1",
  VISITNUM = 5,
  OEDTC = "2020-06-01",
  OEDY = 8,
  OELOC = "EYE",
  OELAT = "LEFT",
  OESTRESN = c(5, 5, 5, 4, 3, 2, 24)
)
check_oe_bcva_1m_late_early_tot(OE_too_late)

OE_too_early &lt;- data.frame(
  USUBJID = "1",
  OESPID = "FORMNAME-R:2/L:2XXXX",
  OECAT = "BEST CORRECTED VISUAL ACUITY",
  OETSTDTL = "TESTING DISTANCE: 1M",
  OESCAT = c(rep("", 5), "TOTAL"),
  OESTAT = "",
  OERESCAT = c("ROW 1 - SNELLEN 20/200", 
               "ROW 2 - SNELLEN 20/160", 
               "ROW 4 - SNELLEN 20/100",
               "ROW 3 - SNELLEN 20/125", 
               "ROW 5 - SNELLEN 20/80", 
               ""),
  VISIT = "WEEK 1",
  VISITNUM = 5,
  OEDTC = "2020-06-01",
  OEDY = 8,
  OELOC = "EYE",
  OELAT = "LEFT",
  OESTRESN = c(5, 5, 5, 4, 4, 23)
)
check_oe_bcva_1m_late_early_tot(OE_too_early)

OE_total_incorrect &lt;- data.frame(
  USUBJID = "1",
  OESPID = "FORMNAME-R:2/L:2XXXX",
  OECAT = "BEST CORRECTED VISUAL ACUITY",
  OETSTDTL = "TESTING DISTANCE: 1M",
  OESCAT = c(rep("", 6), "TOTAL"),
  OESTAT = "",
  OERESCAT = c("ROW 1 - SNELLEN 20/200", 
               "ROW 2 - SNELLEN 20/160", 
               "ROW 4 - SNELLEN 20/100",
               "ROW 3 - SNELLEN 20/125", 
               "ROW 5 - SNELLEN 20/80", 
               "ROW 6 - SNELLEN 20/63", 
               ""),
  VISIT = "WEEK 1",
  VISITNUM = 5,
  OEDTC = "2020-06-01",
  OEDY = 8,
  OELOC = "EYE",
  OELAT = "LEFT",
  OESTRESN = c(5, 5, 5, 4, 4, 2, 28)
)
check_oe_bcva_1m_late_early_tot(OE_total_incorrect)

</code></pre>

<hr>
<h2 id='check_oe_bcva_4m_late_early_tot'>Check if 4m BCVA test stops too late, too early and has correct total</h2><span id='topic+check_oe_bcva_4m_late_early_tot'></span>

<h3>Description</h3>

<p>This ophthalmology check is for BCVA 4m test. It checks three conditions: &lt;1&gt; BCVA test stops too late,
meaning that lines were read after number of correct letters is &lt;= 3. &lt;2&gt; BCVA test stops too early, meaning that
further lines were not read when all numbers of correct letters is &gt; 3. &lt;3&gt; BCVA total score is not correct, meaning
that the sum of the number of correct at 4 meters doesn't match with what has been recorded in eCRF
(BCVA Scores eCRF Page - A. Total number correct at 4m). Please note that this check only works with USUBJID, VISIT,
VISITNUM, OELOC, OELAT combination has unique dates (OEDTC). If your datasets are having situations like 1) unscheduled
visits happening on different dates or 2) BCVA TOTAL happens on a different date from BCVA row tests, such combinations
will be removed from check.
Please note that this check excludes forms BCVA Low Vision Test (BCV5), BCVA Scores (BCV7),
BCVA Low Luminance Scores (BCVLL5), BCVA Combined Assessments (BCVAC), BCVA Low Luminance Combined Assessments (BCVACLL)
before running check as these forms do not include Row numbers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_oe_bcva_4m_late_early_tot(OE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_oe_bcva_4m_late_early_tot_+3A_oe">OE</code></td>
<td>
<p>Ophtho Dataset with variables USUBJID, OESPID, OECAT, OESCAT, OETSTDTL, OESTRESN, OESTAT, OELOC, OELAT,
OERESCAT, VISIT, VISITNUM, OEDTC, OEDY</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Rosemary Li (HackR 2021 Team Eye)
</p>


<h3>See Also</h3>

<p>Other OPHTH: 
<code><a href="#topic+check_ae_aelat">check_ae_aelat</a>()</code>,
<code><a href="#topic+check_cm_cmlat_prior_ocular">check_cm_cmlat_prior_ocular</a>()</code>,
<code><a href="#topic+check_cm_cmlat">check_cm_cmlat</a>()</code>,
<code><a href="#topic+check_oe_bcva_1m_late_early_tot">check_oe_bcva_1m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_vs_1m_req">check_oe_bcva_4m_vs_1m_req</a>()</code>,
<code><a href="#topic+check_oe_bcva_tot_mismatch">check_oe_bcva_tot_mismatch</a>()</code>,
<code><a href="#topic+check_oe_sc_lat_count_fingers">check_oe_sc_lat_count_fingers</a>()</code>,
<code><a href="#topic+check_pr_prlat">check_pr_prlat</a>()</code>,
<code><a href="#topic+check_sc_dm_eligcrit">check_sc_dm_eligcrit</a>()</code>,
<code><a href="#topic+check_sc_dm_seyeselc">check_sc_dm_seyeselc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>OE_too_late &lt;- data.frame(
  USUBJID = "1",
  OESPID = "FORMNAME-R:2/L:2XXXX",
  OECAT = "BEST CORRECTED VISUAL ACUITY",
  OETSTDTL = "TESTING DISTANCE: 4M",
  OESCAT = c(rep("", 6), "TOTAL"),
  OESTAT = "",
  OERESCAT = c("ROW 1 - SNELLEN 20/200", 
               "ROW 2 - SNELLEN 20/160", 
               "ROW 4 - SNELLEN 20/100",
               "ROW 3 - SNELLEN 20/125", 
               "ROW 5 - SNELLEN 20/80", 
               "ROW 6 - SNELLEN 20/63", 
               ""),
  VISIT = "WEEK 1",
  VISITNUM = 5,
  OEDTC = "2020-06-01",
  OEDY = 8,
  OELOC = "EYE",
  OELAT = "LEFT",
  OESTRESN = c(5, 5, 5, 4, 3, 2, 24)
)
check_oe_bcva_4m_late_early_tot(OE_too_late)

OE_too_early &lt;- data.frame(
  USUBJID = "1",
  OESPID = "FORMNAME-R:2/L:2XXXX",
  OECAT = "BEST CORRECTED VISUAL ACUITY",
  OETSTDTL = "TESTING DISTANCE: 4M",
  OESCAT = c(rep("", 6), "TOTAL"),
  OESTAT = "",
  OERESCAT = c("ROW 1 - SNELLEN 20/200", 
               "ROW 2 - SNELLEN 20/160", 
               "ROW 4 - SNELLEN 20/100",
               "ROW 3 - SNELLEN 20/125", 
               "ROW 5 - SNELLEN 20/80", 
               "ROW 6 - SNELLEN 20/63", 
               ""),
  VISIT = "WEEK 1",
  VISITNUM = 5,
  OEDTC = "2020-06-01",
  OEDY = 8,
  OELOC = "EYE",
  OELAT = "LEFT",
  OESTRESN = c(5, 5, 5, 4, 4, 5, 28)
)
check_oe_bcva_4m_late_early_tot(OE_too_early)

OE_total_incorrect &lt;- data.frame(
  USUBJID = "1",
  OESPID = "FORMNAME-R:2/L:2XXXX",
  OECAT = "BEST CORRECTED VISUAL ACUITY",
  OETSTDTL = "TESTING DISTANCE: 4M",
  OESCAT = c(rep("", 6), "TOTAL"),
  OESTAT = "",
  OERESCAT = c("ROW 1 - SNELLEN 20/200", 
               "ROW 2 - SNELLEN 20/160", 
               "ROW 4 - SNELLEN 20/100",
               "ROW 3 - SNELLEN 20/125", 
               "ROW 5 - SNELLEN 20/80", 
               "ROW 6 - SNELLEN 20/63", 
               ""),
  VISIT = "WEEK 1",
  VISITNUM = 5,
  OEDTC = "2020-06-01",
  OEDY = 8,
  OELOC = "EYE",
  OELAT = "LEFT",
  OESTRESN = c(5, 5, 5, 4, 4, 2, 28)
)
check_oe_bcva_4m_late_early_tot(OE_total_incorrect)




</code></pre>

<hr>
<h2 id='check_oe_bcva_4m_vs_1m_req'>Check if 1m BCVA test is completed per BCVA 4m result</h2><span id='topic+check_oe_bcva_4m_vs_1m_req'></span>

<h3>Description</h3>

<p>This ophthalmology function is to check if BCVA 1m test is done per BCVA 4m result.
Patient, Visits, Laterality where Low Vision Tests were done are excluded from this check.
1&gt; If 4m test total &lt;= 19 and 1m test is not done.
2&gt; If 4m test total &gt;= 20 and 1m test is performed
Above two conditions will be outputted in the final result data frame, which includes USUBJID, VISIT,
OEDTC, OELAT, BCVA_4M_TOTAL, BCVA_1M_TOTAL, ISSUE.
Please note that this check will assume that the BCVA 1m and 4m total are accurate and they happen on the same day.
If they are happening on different dates, such records will be removed and not checked.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_oe_bcva_4m_vs_1m_req(OE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_oe_bcva_4m_vs_1m_req_+3A_oe">OE</code></td>
<td>
<p>Ophtho Dataset with variables USUBJID, OECAT, OESCAT, OETSTDTL, OESTRESN, OESTAT, OELAT,
OERESCAT, VISIT, OEDTC, OEDY</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Rosemary Li (HackR 2021 Team Eye)
</p>


<h3>See Also</h3>

<p>Other OPHTH: 
<code><a href="#topic+check_ae_aelat">check_ae_aelat</a>()</code>,
<code><a href="#topic+check_cm_cmlat_prior_ocular">check_cm_cmlat_prior_ocular</a>()</code>,
<code><a href="#topic+check_cm_cmlat">check_cm_cmlat</a>()</code>,
<code><a href="#topic+check_oe_bcva_1m_late_early_tot">check_oe_bcva_1m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_late_early_tot">check_oe_bcva_4m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_tot_mismatch">check_oe_bcva_tot_mismatch</a>()</code>,
<code><a href="#topic+check_oe_sc_lat_count_fingers">check_oe_sc_lat_count_fingers</a>()</code>,
<code><a href="#topic+check_pr_prlat">check_pr_prlat</a>()</code>,
<code><a href="#topic+check_sc_dm_eligcrit">check_sc_dm_eligcrit</a>()</code>,
<code><a href="#topic+check_sc_dm_seyeselc">check_sc_dm_seyeselc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>OE_1m_done &lt;- data.frame(
  USUBJID = "1",
  OECAT = "BEST CORRECTED VISUAL ACUITY",
  OETSTDTL = c(rep("TESTING DISTANCE: 4M", 4), rep("TESTING DISTANCE: 1M", 3)),
  OESCAT = c(rep("", 3), "TOTAL", rep("", 2), "TOTAL"),
  OESTAT = rep("", 7),
  OERESCAT = c("ROW 1 - SNELLEN 20/200",
               "ROW 2 - SNELLEN 20/160",
               "ROW 3 - SNELLEN 20/125",
               "",
               "ROW 1 - SNELLEN 20/200",
               "ROW 2 - SNELLEN 20/160",
               ""),
  VISIT = "WEEK 1",
  VISITNUM = 5,
  OEDTC = "2020-06-01",
  OEDY = 8,
  OELOC = "EYE",
  OELAT = "LEFT",
  OESTRESN = c(9, 9, 3, 21, 3, 2, 5)
)
check_oe_bcva_4m_vs_1m_req(OE_1m_done)

OE_1m_not_done &lt;- data.frame(
  USUBJID = "1",
  OECAT = "BEST CORRECTED VISUAL ACUITY",
  OETSTDTL = "TESTING DISTANCE: 4M",
  OESCAT = c(rep("", 3), "TOTAL"),
  OESTAT = "",
  OERESCAT = c("ROW 1 - SNELLEN 20/200",
               "ROW 2 - SNELLEN 20/160",
               "ROW 3 - SNELLEN 20/125",
               ""),
  VISIT = "WEEK 1",
  VISITNUM = 5,
  OEDTC = "2020-06-01",
  OEDY = 8,
  OELOC = "EYE",
  OELAT = "LEFT",
  OESTRESN = c(5, 5, 2, 12)
)
check_oe_bcva_4m_vs_1m_req(OE_1m_not_done)

</code></pre>

<hr>
<h2 id='check_oe_bcva_tot_mismatch'>Check mismatch between Derived BCVA Total Score &amp; Total BCVA Score from Data</h2><span id='topic+check_oe_bcva_tot_mismatch'></span>

<h3>Description</h3>

<p>This ophthalmology check looks for any mismatch between the
Derived Best Corrected Visual Acuity (BCVA) Total Score &amp;
reported Total BCVA Score from Data based on OETESTCD = &quot;LOGSCORE&quot; for
older studies or OETESTCD = &quot;VACSCORE&quot; for newer studies
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_oe_bcva_tot_mismatch(OE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_oe_bcva_tot_mismatch_+3A_oe">OE</code></td>
<td>
<p>Ophtho Dataset with variables USUBJID, OETESTCD, OECAT, OESCAT, OETSTDTL,
OESTRESN, OESTAT (if present), OELAT, VISIT, OEDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Monarch Shah (HackR 2021 Team Eye)
</p>


<h3>See Also</h3>

<p>Other OPHTH: 
<code><a href="#topic+check_ae_aelat">check_ae_aelat</a>()</code>,
<code><a href="#topic+check_cm_cmlat_prior_ocular">check_cm_cmlat_prior_ocular</a>()</code>,
<code><a href="#topic+check_cm_cmlat">check_cm_cmlat</a>()</code>,
<code><a href="#topic+check_oe_bcva_1m_late_early_tot">check_oe_bcva_1m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_late_early_tot">check_oe_bcva_4m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_vs_1m_req">check_oe_bcva_4m_vs_1m_req</a>()</code>,
<code><a href="#topic+check_oe_sc_lat_count_fingers">check_oe_sc_lat_count_fingers</a>()</code>,
<code><a href="#topic+check_pr_prlat">check_pr_prlat</a>()</code>,
<code><a href="#topic+check_sc_dm_eligcrit">check_sc_dm_eligcrit</a>()</code>,
<code><a href="#topic+check_sc_dm_seyeselc">check_sc_dm_seyeselc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Using Old Standard, FAIL Case (4m &lt;=19, so 4m + 1m to match with Rave Total)
OE &lt;- data.frame(
   USUBJID = 1,
   OETESTCD = c("NUMLCOR", "NUMLCOR", "LCORCON", "LOGSCORE"),
   OECAT   = rep("BEST CORRECTED VISUAL ACUITY", 4),
   OESCAT   = c("TOTAL", "TOTAL","", ""),
   OETSTDTL  = c("TESTING DISTANCE: 4M", "TESTING DISTANCE: 1M", "", ""),
   OESTRESN = c(18, 0, 30, 48),
   OESTAT= rep("", 4),
   OELOC   = rep("EYE", 4),
   OELAT   = rep("LEFT", 4),
   VISIT   = rep("SCREENING", 4),
   VISITNUM   = rep(99, 4),
   OEDTC = rep("2021-05-19", 4),
   OEDY  = rep(1, 4),
   stringsAsFactors = FALSE)

check_oe_bcva_tot_mismatch(OE)


#Using New Standard, PASS Case

OE &lt;- data.frame(
   USUBJID = 1,
   OETESTCD = c("NUMLCOR", "NUMLCOR", "LCORCON", "VACSCORE"),
   OECAT   = rep("BEST CORRECTED VISUAL ACUITY", 4),
   OESCAT   = c("NORMAL LIGHTING SCORE", "NORMAL LIGHTING SCORE","", ""),
   OETSTDTL  = c("TESTING DISTANCE: 4M", "TESTING DISTANCE: 1M", "", ""),
   OESTRESN = c(22, 0, 30, 52),
   OESTAT= rep("", 4),
   OELOC   = rep("EYE", 4),
   OELAT   = rep("LEFT", 4),
   VISIT   = rep("SCREENING", 4),
   VISITNUM   = rep(99, 4),
   OEDTC = rep("2021-05-19", 4),
   OEDY  = rep(1, 4),
   stringsAsFactors = FALSE)
check_oe_bcva_tot_mismatch(OE)


#Using New Standard, FAIL Case (Total 4m + 1m (As 4m &lt;=19) not equal to CRF Total Score)

OE &lt;- data.frame(
   USUBJID = 1,
   OETESTCD = c("NUMLCOR", "NUMLCOR", "LCORCON", "VACSCORE"),
   OECAT   = "BEST CORRECTED VISUAL ACUITY",
   OESCAT   = c("NORMAL LIGHTING SCORE", "NORMAL LIGHTING SCORE","", ""),
   OETSTDTL  = c("TESTING DISTANCE: 4M", "TESTING DISTANCE: 1M", "", ""),
   OESTRESN = c(17, 12, 0, 27),
   OESTAT= "",
   OELOC   = "EYE",
   OELAT   = "LEFT",
   VISIT   = "SCREENING",
   VISITNUM   = 99,
   OEDTC = "2021-05-19",
   OEDY  = 1,
   stringsAtors = FALSE)
check_oe_bcva_tot_mismatch(OE)


#FAIL Case without optional variable, OESTAT

OE$OESTAT &lt;- NULL
check_oe_bcva_tot_mismatch(OE)


#missing required variable, OETESTCD

OE$OETESTCD &lt;- NULL
check_oe_bcva_tot_mismatch(OE)

</code></pre>

<hr>
<h2 id='check_oe_sc_lat_count_fingers'>Check if Post Treatment Count Fingers in Study Eye laterality does not match with Subject Characteristics Study Eye laterality</h2><span id='topic+check_oe_sc_lat_count_fingers'></span>

<h3>Description</h3>

<p>Check If Post Treatment Count Fingers in Study Eye is done on the actual Study eye by comparing laterality from OE domain with SC domain.
Check is ignored if Post Treatment Count Fingers is not collected in study as it is quite common for EP studies
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_oe_sc_lat_count_fingers(OE, SC)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_oe_sc_lat_count_fingers_+3A_oe">OE</code></td>
<td>
<p>Ophthalmic Examination Dataset for Ophtho Study with variables USUBJID, OECAT, OELAT, VISIT, OEDTC, OETEST, OELOC, OESTAT (if present)</p>
</td></tr>
<tr><td><code id="check_oe_sc_lat_count_fingers_+3A_sc">SC</code></td>
<td>
<p>Subject Characteristics Dataset for Ophtho Study with variables USUBJID, SCTEST, SCTESTCD, SCCAT, SCORRES, SCDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Monarch Shah (HackR 2021 Team Eye)
</p>


<h3>See Also</h3>

<p>Other OPHTH: 
<code><a href="#topic+check_ae_aelat">check_ae_aelat</a>()</code>,
<code><a href="#topic+check_cm_cmlat_prior_ocular">check_cm_cmlat_prior_ocular</a>()</code>,
<code><a href="#topic+check_cm_cmlat">check_cm_cmlat</a>()</code>,
<code><a href="#topic+check_oe_bcva_1m_late_early_tot">check_oe_bcva_1m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_late_early_tot">check_oe_bcva_4m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_vs_1m_req">check_oe_bcva_4m_vs_1m_req</a>()</code>,
<code><a href="#topic+check_oe_bcva_tot_mismatch">check_oe_bcva_tot_mismatch</a>()</code>,
<code><a href="#topic+check_pr_prlat">check_pr_prlat</a>()</code>,
<code><a href="#topic+check_sc_dm_eligcrit">check_sc_dm_eligcrit</a>()</code>,
<code><a href="#topic+check_sc_dm_seyeselc">check_sc_dm_seyeselc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
sc &lt;- data.frame(USUBJID  = c(1,1,1,2,2,2),
                 SCTEST   = c("Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest",
                              " ",
                              "Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest",
                              " "),
                 SCTESTCD = c("ELIGEYE", "FOCID", "", "ELIGEYE", "FOCID", ""),
                 SCCAT    = c("STUDY EYE SELECTION", "STUDY EYE SELECTION", "",
                              "STUDY EYE SELECTION", "STUDY EYE SELECTION", ""),
                 SCORRES  = c("LEFT", "OS", "", "RIGHT", "OD", ""),
                 SCDTC    = rep("2021-01-01", 6),
                 stringsAsFactors = FALSE)

oe &lt;- data.frame(USUBJID = c(1,1,1,1,1,2,2,2,2,2,2),
                 OECAT  = rep("SAFETY ASSESSMENT OF LOW VISION", 11),
                 OELOC   = rep("Eye", 11),
                 OELAT   = c("LEFT", "Left", "left", "LEFT", "LEFT",
                             "RIGHT", "right", "right", "RIGHT", "RIGHT", "right"),
                 OEDY  = c(1, 28, 56, 84, 112, 1, 28, 56, 84, 112, 140),
                 VISIT   = c("Week 1", "Week 4", "Week 8", "Week 12", "Week 16",
                             "Week 1", "Week 4", "Week 8", "Week 12", "Week 16", "Week 20"),
                 OEDTC = c("2021-01-01", "2021-02-01", "2021-03-01", "2021-04-01", "2021-05-01",
                           "2021-01-01", "2021-02-01", "2021-03-01", "2021-04-01", "2021-05-01",
                           "2021-06-01"),
                 OETEST = c("A", "B", "C", "D", "E", "A", "B", "C", "D", "E", "F"),
                 stringsAsFactors=FALSE)

check_oe_sc_lat_count_fingers(SC=sc, OE=oe)

sc &lt;- data.frame(USUBJID  = c(1,1,1,2,2,2),
                 SCTEST   = c("Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest",
                              " ",
                              "Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest",
                              " "),
                 SCTESTCD = c("ELIGEYE", "FOCID", "", "ELIGEYE", "FOCID", ""),
                 SCCAT    = c("STUDY EYE SELECTION", "STUDY EYE SELECTION", "",
                              "STUDY EYE SELECTION", "STUDY EYE SELECTION", ""),
                 SCORRES  = c("LEFT", "OS", "", "RIGHT", "OD", ""),
                 SCDTC    = rep("2021-01-01", 6),
                 stringsAsFactors = FALSE)

oe &lt;- data.frame(USUBJID = c(1,1,1,1,1,2,2,2,2,2,2),
                 OECAT  = rep("SAFETY ASSESSMENT OF LOW VISION", 11),
                 OELOC   = rep("Eye", 11),
                 OELAT   = c("LEFT", "Left", "left", "LEFT", "right", "RIGHT",
                             "right", "right", "RIGHT", "RIGHT", "left"),
                 OEDY  = c(1, 28, 56, 84, 112, 1, 28, 56, 84, 112, 140),
                 VISIT   = c("Week 1", "Week 4", "Week 8", "Week 12", "Week 16",
                             "Week 1", "Week 4", "Week 8", "Week 12", "Week 16",
                             "Week 20"),
                 OEDTC = c("2021-01-01", "2021-02-01", "2021-03-01", "2021-04-01", "2021-05-01",
                           "2021-01-01", "2021-02-01", "2021-03-01", "2021-04-01", "2021-05-01",
                           "2021-06-01"),
                 OETEST = c("A", "B", "C", "D", "E", "A", "B", "C", "D", "E", "F"),
                 stringsAsFactors=FALSE)

check_oe_sc_lat_count_fingers(SC=sc, OE=oe)

sc &lt;- data.frame(USUBJID  = c(1,1,1,2,2,2,3),
                 SCTEST   = c("Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest",
                              " ",
                              "Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest",
                              " ",
                              "Focus of Study-Specific Interest"),
                 SCTESTCD = c("ELIGEYE", "FOCID", "", "ELIGEYE", "FOCID", "", "FOCID"),
                 SCCAT    = c("STUDY EYE SELECTION", "STUDY EYE SELECTION", "",
                              "STUDY EYE SELECTION", "STUDY EYE SELECTION",
                              "", "STUDY EYE SELECTION"),
                 SCORRES  = c("LEFT", "OS", "", "RIGHT", "OD", "", "OS"),
                 SCDTC    = "2021-01-01",
                 stringsAsFactors = FALSE)

oe &lt;- data.frame(USUBJID = c(1,1,1,1,1,2,2,2,2,2,2),
                 OESTAT  = c("","","","","","","","","","", "not DONE"),
                 OECAT  = "SAFETY ASSESSMENT OF LOW VISION",
                 OELOC   = "Eye",
                 OELAT   = c("LEFT", "Left", "left", "LEFT", "right", "RIGHT",
                             "right", "right", "RIGHT", "RIGHT", "left"),
                 OEDY  = c(1, 28, 56, 84, 112, 1, 28, 56, 84, 112, 140),
                 VISIT   = c("Week 1", "Week 4", "Week 8", "Week 12", "Week 16",
                             "Week 1", "Week 4", "Week 8", "Week 12", "Week 16",
                             "Week 20"),
                 OEDTC = c("2021-01-01", "2021-02-01", "2021-03-01", "2021-04-01", "2021-05-01",
                           "2021-01-01", "2021-02-01", "2021-03-01", "2021-04-01", "2021-05-01",
                           "2021-06-01"),
                 OETEST = c("A", "B", "C", "D", "E", "A", "B", "C", "D", "E", "F"),
                 stringsAsFactors=FALSE)

check_oe_sc_lat_count_fingers(SC=sc, OE=oe)

</code></pre>

<hr>
<h2 id='check_pr_missing_month'>Check for procedure dates with year and day known but month unknown</h2><span id='topic+check_pr_missing_month'></span>

<h3>Description</h3>

<p>This check looks for partial missing dates in PR Procedures
start date and end date, if end date exists. If the day of the month is
known, the month should be known.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_pr_missing_month(PR, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_pr_missing_month_+3A_pr">PR</code></td>
<td>
<p>Procedures SDTM dataset with variables USUBJID, PRTRT, PRSTDTC,
PRENDTC (optional), PRSPID (optional)</p>
</td></tr>
<tr><td><code id="check_pr_missing_month_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_pr_missing_month_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
PR &lt;- data.frame(
 USUBJID = 1:3,
 PRTRT = c("Surgery Name","Procedure Name","Procedure"),
 PRSTDTC = c("2017-01-01","2017---01","2017-01-02"),
 PRENDTC = c("2017-02-01","2017-03-01","2017---01"),
 PRSPID = "/F:SURG-D:12345-R:1",
 PRCAT = "Form 1",
 stringsAsFactors=FALSE
)

check_pr_missing_month(PR)

check_pr_missing_month(PR,preproc=roche_derive_rave_row)

PR$PRENDTC = NULL
check_pr_missing_month(PR)

</code></pre>

<hr>
<h2 id='check_pr_prlat'>Check if ocular procedures/surgeries has laterality missing for CRF pages which contain the word &quot;OCULAR&quot; (and not &quot;NON-OCULAR&quot;).</h2><span id='topic+check_pr_prlat'></span>

<h3>Description</h3>

<p>This check assesses observations where PRCAT contains the word OCULAR and flags records with missing/inconsistent laterality
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_pr_prlat(PR, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_pr_prlat_+3A_pr">PR</code></td>
<td>
<p>Procedure/Surgery Dataset for Ophtho Study with variables USUBJID,
PRCAT, PRLAT, PRTRT, PROCCUR, PRPRESP, PRSPID (if Present),
PRSTDTC (if Present), PRINDC (if Present)</p>
</td></tr>
<tr><td><code id="check_pr_prlat_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_pr_prlat_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Tim Barnett (HackR 2021 Team Eye) Monarch Shah (Added Concurrent Ocular Procedure in this check) (copied from check_cm_cmlat)
</p>


<h3>See Also</h3>

<p>Other OPHTH: 
<code><a href="#topic+check_ae_aelat">check_ae_aelat</a>()</code>,
<code><a href="#topic+check_cm_cmlat_prior_ocular">check_cm_cmlat_prior_ocular</a>()</code>,
<code><a href="#topic+check_cm_cmlat">check_cm_cmlat</a>()</code>,
<code><a href="#topic+check_oe_bcva_1m_late_early_tot">check_oe_bcva_1m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_late_early_tot">check_oe_bcva_4m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_vs_1m_req">check_oe_bcva_4m_vs_1m_req</a>()</code>,
<code><a href="#topic+check_oe_bcva_tot_mismatch">check_oe_bcva_tot_mismatch</a>()</code>,
<code><a href="#topic+check_oe_sc_lat_count_fingers">check_oe_sc_lat_count_fingers</a>()</code>,
<code><a href="#topic+check_sc_dm_eligcrit">check_sc_dm_eligcrit</a>()</code>,
<code><a href="#topic+check_sc_dm_seyeselc">check_sc_dm_seyeselc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
PR &lt;- data.frame(
   USUBJID = 1:5,
   PRCAT = "PRIOR OCULAR SURGERIES AND PROCEDURES",
   PRSTDTC = 1:5,
   PRLAT   = c("Left", "","Bilateral", "", ""),
   PRTRT   = c("A", "B", "A", "B", "A"),
   PROCCUR = c("Y", "N", "N", "Y", "Y"),
   PRPRESP = "Y",
   PRSPID  = "FORMNAME-R:2/L:2XXXX",
   stringsAsFactors = FALSE)
check_pr_prlat(PR,preproc=roche_derive_rave_row)

PR &lt;- data.frame(
   USUBJID = 1:5,
   PRCAT = "CONCURRENT OCULAR PROCEDURE",
   PRSTDTC = 1:5,
   PRLAT   = c("Left", "LEFT","Bilateral", "RIGHT", "RIgHT"),
   PRTRT  = c("A", "B", "A", "B", "A"),
   PROCCUR = NA,
   PRPRESP = NA,
   stringsAsFactors = FALSE)
check_pr_prlat(PR)

PR &lt;- data.frame(
   USUBJID = 1:5,
   PRCAT = "CONCURRENT OCULAR PROCEDURE",
   PRSTDTC = 1:5,
   PRLAT   = c("Left", "LEFT","Bilateral", "RIGHT", ""),
   PRTRT  = c("A", "B", "A", "B", "A"),
   PROCCUR = NA,
   PRPRESP = NA,
   stringsAsFactors = FALSE)
check_pr_prlat(PR)

PR &lt;- data.frame(
   USUBJID = 1:5,
   PRCAT = "CONCURRENT OCULAR PROCEDURE",
   PRSTDTC = 1:5,
   PRLAT   = c("Left", "","Bilateral", "RIGHT", ""),
   PRTRT  = c("A", "B", "A", "B", "A"),
   PROCCUR = c("Y", "N", "N", "Y", "Y"),
   PRPRESP = "Y",
   stringsAsFactors = FALSE)
check_pr_prlat(PR)

PR &lt;- data.frame(
   USUBJID = 1:5,
   PRCAT = c(rep("CONCURRENT NON-OCULAR PROCEDURE",3),rep("CONCURRENT OCULAR PROCEDURE",2)),
   PRSTDTC = 1:5,
   PRLAT   = c("", "","", "RIGHT", ""),
   PRTRT  = c("A", "B", "A", "B", "A"),
   PROCCUR = c("Y", "N", "N", "Y", "Y"),
   PRPRESP = "Y",
   stringsAsFactors = FALSE)
check_pr_prlat(PR)



</code></pre>

<hr>
<h2 id='check_qs_dup'>Check for multiple dates at the same visit in QS</h2><span id='topic+check_qs_dup'></span>

<h3>Description</h3>

<p>Identifies multiple dates at the same visit in QS
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_qs_dup(QS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_qs_dup_+3A_qs">QS</code></td>
<td>
<p>QS SDTM dataset with variables USUBJID, QSCAT, VISIT, QSDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean value for whether the check passed or failed, with 'msg'
attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Yuliia Bahatska
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
QS1 &lt;- data.frame(USUBJID = c(rep(101, 5), rep(102, 5)),
                QSCAT = "DLQI",
                QSDTC = rep(c("2017-01-01T08:25", "2017-01-05T09:25",
                 "2017-01-15T10:25","2017-01-20T08:25","2017-01-25T08:25"), 2),
                VISITNUM = rep(1:5,2),
                VISIT = rep(c( "Visit 1", "Visit 2", "Visit 3", "UNSCheduled!!!","VIsit 5"), 2),
                stringsAsFactors = FALSE)
check_qs_dup(QS = QS1)

# multiple dates for the same visit in QS
QS2 &lt;- QS1
QS2$VISIT[QS2$USUBJID == 101] &lt;- "Visit 1"
check_qs_dup(QS = QS2)

# multiple visit labels for the same date
QS3 &lt;- QS1
QS3$QSDTC[QS3$USUBJID == 101] &lt;- "2017-01-01"
QS3
check_qs_dup(QS = QS3)


</code></pre>

<hr>
<h2 id='check_qs_qsdtc_after_dd'>Check for QS dates occurring after death date</h2><span id='topic+check_qs_qsdtc_after_dd'></span>

<h3>Description</h3>

<p>This check looks for QS dates that occur after death date
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_qs_qsdtc_after_dd(AE, DS, QS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_qs_qsdtc_after_dd_+3A_ae">AE</code></td>
<td>
<p>Adverse Event SDTM dataset with variables USUBJID,
AEDTHDTC, AESTDTC, AEDECOD, and AETERM</p>
</td></tr>
<tr><td><code id="check_qs_qsdtc_after_dd_+3A_ds">DS</code></td>
<td>
<p>DS Disposition SDTM dataset with variables USUBJID,
DSSTDTC, DSDECOD, and DSTERM</p>
</td></tr>
<tr><td><code id="check_qs_qsdtc_after_dd_+3A_qs">QS</code></td>
<td>
<p>Questionnaire Test Findings SDTM dataset with variables
USUBJID, QSDTC, QSCAT, and QSORRES</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Monarch Shah
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(USUBJID = c(1,1,1,2,2,2),
                 AEDTHDTC = c("", "", "2016-01-01", "", "2016-01", "2016-01-01"),
                 AESTDTC = "2016-01-01",
                 AEDECOD = LETTERS[1:6],
                 AETERM = LETTERS[1:6],
                 stringsAsFactors = FALSE)

DS &lt;- data.frame(USUBJID = c(1,1,1,2,2,2),
                 DSSTDTC = "2016-01-01",
                 DSDECOD = c("A", "B", "death", "AC", "BC", "death"),
                 DSTERM = letters[1:6],
                 stringsAsFactors = FALSE)

QS &lt;- data.frame(USUBJID = c(1,1,1,2,2,2),
                 QSDTC   = c("2015-06-30", "2015-09-30", "2015-12-30",
                             "2015-06-30", "2015-09-30", "2015-12-30"),
                 QSCAT   = "A",
                 QSORRES =  LETTERS[1:6],
                 QSSTAT  = "",
                 VISIT  =  c("Week 1", "Week 12", "Week 24", "Week 1", "Week 12", "Week 24"),
                 QSSTRESC = LETTERS[1:6],
                 stringsAsFactors = FALSE)

check_qs_qsdtc_after_dd(AE, DS, QS)

QS$QSDTC[3:5] &lt;- "2016-01-03"
check_qs_qsdtc_after_dd(AE, DS, QS)

QS$QSSTAT[3] &lt;- "Not Done"
check_qs_qsdtc_after_dd(AE, DS, QS)

DS$DSSTDTC &lt;- NULL
check_qs_qsdtc_after_dd(AE, DS, QS)

AE1 &lt;- data.frame(USUBJID = 1,
                  AEDTHDTC = "",
                  AESTDTC = c("2015-11-01", "2016-02-01"),
                  AEDECOD = "Rash",
                  AETERM = "RASH",
                  stringsAsFactors = FALSE)

DS1 &lt;- data.frame(USUBJID = 1,
                  DSSTDTC = "2016-01",
                  DSCAT = c("DISPOSITION EVENT", "OTHER"),
                  DSSCAT = c('STUDY COMPLETION/EARLY DISCONTINUATION', ''),
                  DSDECOD = "DEATH",
                  DSTERM = c("DEATH", "DEATH DUE TO PROGRESSIVE DISEASE"),
                  stringsAsFactors = FALSE)

QS1 &lt;- data.frame(USUBJID = 1,
                  QSDTC   = c("2015-06-30", "2016-01-15", "2016-01-15"),
                  QSCAT   = rep("EQ-5D-5L"),
                  QSORRES = "1",
                  QSSTAT  = "",
                  VISIT  =  c("Week 1", "Week 12", "Week 12"),
                  QSSTRESC = "1",
                  stringsAsFactors = FALSE)

check_qs_qsdtc_after_dd(AE=AE1, DS=DS1, QS=QS1)

AE1$AEDTHDTC[1:2] &lt;- "2015-07-01"
check_qs_qsdtc_after_dd(AE=AE1, DS=DS1, QS=QS1)
</code></pre>

<hr>
<h2 id='check_qs_qsdtc_visit_ordinal_error'>Check that all QS dates are duplicated or earlier than last
visit's (possible datetime data entry error)</h2><span id='topic+check_qs_qsdtc_visit_ordinal_error'></span>

<h3>Description</h3>

<p>This check identifies QSDTC values that are duplicated or
earlier than last visit's. Unscheduled visits are excluded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_qs_qsdtc_visit_ordinal_error(QS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_qs_qsdtc_visit_ordinal_error_+3A_qs">QS</code></td>
<td>
<p>SDTM dataset with variables USUBJID, QSCAT, QSORRES, VISITNUM, VISIT, QSDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Simon Luo
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# no case
QS1 &lt;- data.frame(USUBJID = c(rep(101, 5), rep(102, 5)),
                QSCAT = "DLQI",
                QSDTC = rep(c("2017-01-01T08:25", "2017-01-05T09:25",
                 "2017-01-15T10:25","2017-01-20T08:25","2017-01-25T08:25"), 2),
                VISITNUM = rep(1:5,2),
                VISIT = rep(c( "Visit 1", "Visit 2", "Visit 3", "UNSCheduled!!!","VIsit 5"), 2),
                stringsAsFactors = FALSE)

QS2 = QS1
QS2$QSCAT = "SKINDEX-29"

QS &lt;- rbind(QS1, QS2)
check_qs_qsdtc_visit_ordinal_error(QS)

# adding cases with earlier date
QS$QSDTC[QS$USUBJID == 101 &amp; QS$VISIT == "Visit 3"] &lt;- "2017-01-10T08:25"
QS$QSDTC[QS$USUBJID == 102 &amp; QS$VISIT == "Visit 2"] &lt;- "2017-01-01T06:25"
check_qs_qsdtc_visit_ordinal_error(QS)

# adding cases with duplicated date
QS$QSDTC[QS$USUBJID == 102 &amp; QS$VISIT == "Visit 3"] &lt;- "2017-01-01T06:25"
 check_qs_qsdtc_visit_ordinal_error(QS)

</code></pre>

<hr>
<h2 id='check_qs_qsstat_qsreasnd'>Check to confirm that there is a reason for a questionnaire being marked as not done</h2><span id='topic+check_qs_qsstat_qsreasnd'></span>

<h3>Description</h3>

<p>This code flags when QSSTAT Completion Status is marked as NOT DONE but QSREASND Reason Not Performed is not populated.
Some but not all questionnaires in a study may collect Reason Not Performed information, so there may be instances of
false positives in which no data correction is required. While QSREASND is a permissible variable, this scenario will be
flagged in P21.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_qs_qsstat_qsreasnd(QS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_qs_qsstat_qsreasnd_+3A_qs">QS</code></td>
<td>
<p>Questionnaire SDTMv dataset with USUBJID, QSCAT, QSDTC, QSSTAT, QSREASND, VISIT (optional) variables</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check returns 0 obs, otherwise return subset dataframe.
</p>


<h3>Author(s)</h3>

<p>Katie Patel, Bonita Viegas Monteiro, Tom Stone (HackR 2021 Team WeRawesome)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
QS &lt;- data.frame(USUBJID = c(1,1,1,2,2,2),
                 QSDTC   = c("2015-06-30", "2015-09-30", "2015-12-30", 
                             "2015-06-30", "2015-09-30", "2015-12-30"),
                 QSCAT   = "A",
                 VISIT  =  c("Week 1", "Week 12", "Week 24", "Week 1", "Week 12", "Week 24"),
                 QSSTAT  = c("Not Done","NOT DONE","not done", rep("",3)),
                 QSREASND = c("Reasons",rep("",5)),
                 stringsAsFactors = FALSE)

 check_qs_qsstat_qsreasnd(QS)

 QS$QSSTAT=NULL

 check_qs_qsstat_qsreasnd(QS)


</code></pre>

<hr>
<h2 id='check_qs_qsstat_qsstresc'>Check for non-missing QSSTRESC if QSSTAT is NOT DONE</h2><span id='topic+check_qs_qsstat_qsstresc'></span>

<h3>Description</h3>

<p>This check is for studies with PRO outcomes data (i.e., QS domain),
check that within a given instrument (e.g., QS.QSCAT='BFI' or QS.QSCAT ='MDASI&quot;),
if QS.QSSTAT=NOT DONE and QSTESTCD=QSALL, then there should be no populated
responses(QS.QSSTRESC) for a particular visit (QS.VISIT), return a dataframe if otherwise
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_qs_qsstat_qsstresc(QS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_qs_qsstat_qsstresc_+3A_qs">QS</code></td>
<td>
<p>Questionnaires SDTM dataset with variables USUBJID, QSSTRESC,
VISIT, QSSTAT, QSCAT, QSDTC, QSTESTCD</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Sara Bodach
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
QS &lt;- data.frame(
STUDYID = 1,
USUBJID = c(rep(1,6),rep(2,6)),
QSSTRESC = 1:12,
VISIT = c(rep(1,3),rep(2,3),rep(1,3),rep(2,3)),
QSSTAT = rep(c("DONE","NOT DONE"),6),
QSCAT = rep(c("INDIVIDUAL","OVERALL","BFI"),4),
QSDTC = "2016-01-01",
QSTESTCD = "QSALL",
stringsAsFactors = FALSE
)

check_qs_qsstat_qsstresc(QS)

QS$QSSTRESC[4]=" "
QS$QSSTRESC[6]=NA
QS$QSSTRESC[8]="."
check_qs_qsstat_qsstresc(QS)

QS$QSSTRESC=NULL
check_qs_qsstat_qsstresc(QS)

</code></pre>

<hr>
<h2 id='check_rs_rscat_rsscat'>Check for patients with populated RSSCAT but missing RSCAT.</h2><span id='topic+check_rs_rscat_rsscat'></span>

<h3>Description</h3>

<p>Check for patients with populated RSSCAT but missing RSCAT in RS domain to
help flag a potential mapping issue for SPA; this does not warrant a query in Rave.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_rs_rscat_rsscat(RS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_rs_rscat_rsscat_+3A_rs">RS</code></td>
<td>
<p>Response SDTM dataset with variables USUBJID, RSCAT and RSSCAT.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Saibah Chohan, Ashley Mao, Tina Cho (HackR 2021 Team STA-R)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
RS &lt;- data.frame(
 USUBJID = c("id1", "id1", "id2", "id2", "id3"),
 RSCAT = c("A", "A", "B", NA, NA),
 RSSCAT = c("AA", "AA", "BB", "BB","AA"))
check_rs_rscat_rsscat(RS)

# Test with missing RSCAT
RS$RSCAT = NULL
check_rs_rscat_rsscat(RS)

</code></pre>

<hr>
<h2 id='check_rs_rsdtc_across_visit'>Check RS records where the same date occurs across multiple visits</h2><span id='topic+check_rs_rsdtc_across_visit'></span>

<h3>Description</h3>

<p>This check identifies records where the same date RSDTC occurs
across multiple visits. Only applies to assessments by investigator,
selected based on uppercased RSEVAL = &quot;INVESTIGATOR&quot; or missing or
RSEVAL variable does not exist.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_rs_rsdtc_across_visit(RS, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_rs_rsdtc_across_visit_+3A_rs">RS</code></td>
<td>
<p>Disease Response SDTM dataset with variables USUBJID, RSDTC, VISIT,
RSEVAL (optional)</p>
</td></tr>
<tr><td><code id="check_rs_rsdtc_across_visit_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_rs_rsdtc_across_visit_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Will Harris
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# example that will be flagged
RS &lt;- data.frame(
USUBJID = 1,
RSDTC = c(rep("2016-01-01",3), rep("2016-06-01",5), rep("2016-06-24",2)),
VISIT = c(rep("C1D1",3), rep("C1D2",3), rep("C2D1",4)),
RSSPID = "FORMNAME-R:13/L:13XXXX",
stringsAsFactors=FALSE)

check_rs_rsdtc_across_visit(RS)
check_rs_rsdtc_across_visit(RS, preproc=roche_derive_rave_row)

# example that will not be flagged because not Investigator
RS0 &lt;- RS
RS0$RSEVAL &lt;- "INDEPENDENT ASSESSOR"
check_rs_rsdtc_across_visit(RS0)
check_rs_rsdtc_across_visit(RS0, preproc=roche_derive_rave_row)

# example with log line differences in Rave form with records flagged
RS1 &lt;- RS
RS1$RSSPID = c(rep("FORMNAME-R:13/L:13XXXX",4), 
rep("FORMNAME-R:13/L:14XXXX",2), 
rep("FORMNAME-R:03/L:13XXXX",2),
 rep("FORMNAME-R:9/L:13XXXX", 2))
 
check_rs_rsdtc_across_visit(RS1)
check_rs_rsdtc_across_visit(RS1, preproc=roche_derive_rave_row)

# example with RSTESTCD with records flagged
RS2 &lt;- RS1
RS2$RSTESTCD = c(rep("OVRLRESP", 2), rep("OTHER", 2), 
   rep("OVRLRESP", 2), rep("OTHER", 2), rep("OVRLRESP", 2))
check_rs_rsdtc_across_visit(RS2)
check_rs_rsdtc_across_visit(RS2, preproc=roche_derive_rave_row)

# example with records flagged without xxSPID
RS3 &lt;- RS
RS3$RSSPID &lt;- NULL
check_rs_rsdtc_across_visit(RS3)
check_rs_rsdtc_across_visit(RS3, preproc=roche_derive_rave_row)

# example without required variable
RS4 &lt;- RS
RS4$VISIT &lt;- NULL
check_rs_rsdtc_across_visit(RS4)
check_rs_rsdtc_across_visit(RS4, preproc=roche_derive_rave_row)


</code></pre>

<hr>
<h2 id='check_rs_rsdtc_visit'>Check missing RSDTC and VISIT</h2><span id='topic+check_rs_rsdtc_visit'></span>

<h3>Description</h3>

<p>This check looks for missing RSDTC or VISIT values when
RSORRES is not missing and RSSTAT not equal to &quot;NOT DONE&quot; in RS dataset
and returns a data frame. Only applies to assessments by investigator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_rs_rsdtc_visit(RS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_rs_rsdtc_visit_+3A_rs">RS</code></td>
<td>
<p>Disease Response SDTM dataset with variables USUBJID, RSDTC,
RSORRES, VISIT, RSSTAT</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Peggy Wen, Stella Banjo (HackR 2021)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
RS &lt;- data.frame(
USUBJID = 1:10,
RSDTC = 1:10,
RSORRES = "THING",
VISIT = "C1D1",
RSSTAT = 1:10,
RSEVAL = c("NA","","IRF","investigator",rep("INVESTIGATOR",6)),
stringsAsFactors=FALSE
)

RS$RSDTC[1]=""
RS$RSDTC[2]="NA"
RS$RSDTC[3]=NA
RS$VISIT[3]=""
RS$VISIT[4]="NA"
RS$VISIT[5]=NA
check_rs_rsdtc_visit(RS)

RS$RSORRES[1]=""
check_rs_rsdtc_visit(RS)

RS$RSORRES[4] = "THING 1"
RS$RSORRES[5] = "THING 2"

check_rs_rsdtc_visit(RS)


</code></pre>

<hr>
<h2 id='check_rs_rsdtc_visit_ordinal_error'>Check that all RS dates for INV Overall Response are duplicated or
earlier than last visit's (possible date entry error)</h2><span id='topic+check_rs_rsdtc_visit_ordinal_error'></span>

<h3>Description</h3>

<p>This check identifies RSDTC values when RSEVAL == 'INVESTIGATOR'
and RSTESTCD == 'OVRLRESP' that are duplicated or earlier than last visit's.
Unscheduled and 'NOT DONE' visits are excluded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_rs_rsdtc_visit_ordinal_error(RS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_rs_rsdtc_visit_ordinal_error_+3A_rs">RS</code></td>
<td>
<p>Response SDTM dataset with variables USUBJID, VISITNUM, VISIT,
RSDTC, RSTESTCD, RSEVAL, RSSTAT</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>James Zhang
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# no cases
RS&lt;- data.frame(USUBJID = 101:102,
                RSDTC=rep(c("2017-01-01T08:25", "2017-01-05T09:25",
                       "2017-01-15T10:25","2017-01-20T08:25","2017-01-25T08:25"), 2),
                VISITNUM=rep(1:5,2),
                VISIT=rep(c("Screening", "Cycle 1", "Cycle 2","Cycle 3","Follow-up"),2),
                RSTESTCD="OVRLRESP",
                RSEVAL="INVESTIGATOR",
                RSSTAT="",
                stringsAsFactors=FALSE)
check_rs_rsdtc_visit_ordinal_error(RS)

# adding cases with earler date
RS$RSDTC[RS$USUBJID == 101 &amp; RS$VISIT == "Cycle 3"] &lt;- "2017-01-02T08:25"
RS$RSDTC[RS$USUBJID == 102 &amp; RS$VISIT == "Cycle 1"] &lt;- "2017-01-01T06:25"
check_rs_rsdtc_visit_ordinal_error(RS)

</code></pre>

<hr>
<h2 id='check_sc_dm_eligcrit'>Check SC Eye Meeting Eligibility Criteria assignments among DM patients</h2><span id='topic+check_sc_dm_eligcrit'></span>

<h3>Description</h3>

<p>Check if SC.SCCAT = &quot;STUDY EYE SELECTION&quot; and SC.SCTESTCD = &quot;ELIGEYE&quot;,
then SC.SCORRES should have &quot;OS&quot;, &quot;OD&quot;, or &quot;OU&quot; values. Flag if subject is in
DM and without an associated SC.SCORRES value or the ELIGEYE Eye Meeting
Eligibility Criteria value is not &quot;OS&quot;, &quot;OD&quot;, or &quot;OU&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_sc_dm_eligcrit(DM, SC)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_sc_dm_eligcrit_+3A_dm">DM</code></td>
<td>
<p>Subject Demographics SDTM dataset with variable USUBJID</p>
</td></tr>
<tr><td><code id="check_sc_dm_eligcrit_+3A_sc">SC</code></td>
<td>
<p>Subject Characteristics SDTM dataset for Ophtho Study with variables
USUBJID, SCTESTCD, SCTEST, SCCAT, SCORRES, SCDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Monarch Shah (HackR 2021 Team Eye)
</p>


<h3>See Also</h3>

<p>Other OPHTH: 
<code><a href="#topic+check_ae_aelat">check_ae_aelat</a>()</code>,
<code><a href="#topic+check_cm_cmlat_prior_ocular">check_cm_cmlat_prior_ocular</a>()</code>,
<code><a href="#topic+check_cm_cmlat">check_cm_cmlat</a>()</code>,
<code><a href="#topic+check_oe_bcva_1m_late_early_tot">check_oe_bcva_1m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_late_early_tot">check_oe_bcva_4m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_vs_1m_req">check_oe_bcva_4m_vs_1m_req</a>()</code>,
<code><a href="#topic+check_oe_bcva_tot_mismatch">check_oe_bcva_tot_mismatch</a>()</code>,
<code><a href="#topic+check_oe_sc_lat_count_fingers">check_oe_sc_lat_count_fingers</a>()</code>,
<code><a href="#topic+check_pr_prlat">check_pr_prlat</a>()</code>,
<code><a href="#topic+check_sc_dm_seyeselc">check_sc_dm_seyeselc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
dm &lt;- data.frame(USUBJID = c(1,2))
sc &lt;- data.frame(USUBJID  = c(1,1,1,2,2,2),
                 SCTEST   = c("Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest",
                              " ",
                              "Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest", " "),
                 SCTESTCD = c("ELIGEYE", "FOCID", "", "ELIGEYE", "FOCID", ""),
                 SCCAT    = c("STUDY EYE SELECTION",
                              "STUDY EYE SELECTION",
                              "",
                              "STUDY EYE SELECTION",
                              "STUDY EYE SELECTION",
                              ""),
                 SCORRES  = c("OS", "OS", "", "", "OU", ""),
                 SCDTC    = rep("2021-01-01", 6),
                 stringsAsFactors = FALSE)

check_sc_dm_eligcrit(SC=sc, DM=dm)

dm &lt;- data.frame(USUBJID = c(1,2,3,4))
sc$SCORRES[4] = "OS"
check_sc_dm_eligcrit(SC=sc, DM=dm)

sc$SCORRES &lt;- NULL
check_sc_dm_eligcrit(SC=sc, DM=dm)


</code></pre>

<hr>
<h2 id='check_sc_dm_seyeselc'>Check SC Study Eye Selection assignments among DM patients</h2><span id='topic+check_sc_dm_seyeselc'></span>

<h3>Description</h3>

<p>Check if SC.SCCAT = &quot;STUDY EYE SELECTION&quot; and SC.SCTESTCD = &quot;FOCID&quot;,
then SC.SCORRES should have &quot;OS&quot;, &quot;OD&quot;, or &quot;OU&quot; values. Flag if subject is in
DM and without an associated SC.SCORRES value or the STUDY EYE SELECTION value
is not &quot;OS&quot;, &quot;OD&quot;, or &quot;OU&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_sc_dm_seyeselc(DM, SC)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_sc_dm_seyeselc_+3A_dm">DM</code></td>
<td>
<p>Subject Demographics SDTM dataset with variable USUBJID</p>
</td></tr>
<tr><td><code id="check_sc_dm_seyeselc_+3A_sc">SC</code></td>
<td>
<p>Subject Characteristics SDTM dataset for Ophtho Study with variables
USUBJID, SCTESTCD, SCTEST, SCCAT, SCORRES, SCDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Monarch Shah (HackR 2021 Team Eye)
</p>


<h3>See Also</h3>

<p>Other OPHTH: 
<code><a href="#topic+check_ae_aelat">check_ae_aelat</a>()</code>,
<code><a href="#topic+check_cm_cmlat_prior_ocular">check_cm_cmlat_prior_ocular</a>()</code>,
<code><a href="#topic+check_cm_cmlat">check_cm_cmlat</a>()</code>,
<code><a href="#topic+check_oe_bcva_1m_late_early_tot">check_oe_bcva_1m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_late_early_tot">check_oe_bcva_4m_late_early_tot</a>()</code>,
<code><a href="#topic+check_oe_bcva_4m_vs_1m_req">check_oe_bcva_4m_vs_1m_req</a>()</code>,
<code><a href="#topic+check_oe_bcva_tot_mismatch">check_oe_bcva_tot_mismatch</a>()</code>,
<code><a href="#topic+check_oe_sc_lat_count_fingers">check_oe_sc_lat_count_fingers</a>()</code>,
<code><a href="#topic+check_pr_prlat">check_pr_prlat</a>()</code>,
<code><a href="#topic+check_sc_dm_eligcrit">check_sc_dm_eligcrit</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
dm &lt;- data.frame(USUBJID = c(1,2))
sc &lt;- data.frame(USUBJID  = c(1,1,1,2,2,2),
                 SCTEST   = c("Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest",
                              " ",
                              "Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest", " "),
                 SCTESTCD = c("ELIGEYE", "FOCID", "", "ELIGEYE", "FOCID", ""),
                 SCCAT    = c("STUDY EYE SELECTION",
                              "STUDY EYE SELECTION",
                              "",
                              "STUDY EYE SELECTION",
                              "STUDY EYE SELECTION", ""),
                 SCORRES  = c("LEFT", "OS", "", "RIGHT", "OD", ""),
                 SCDTC    = rep("2021-01-01", 6),
                 stringsAsFactors = FALSE)

check_sc_dm_seyeselc(SC=sc, DM=dm)

dm &lt;- data.frame(USUBJID = c(1,2,3,4))
sc &lt;- data.frame(USUBJID  = c(1,1,1,2,2,2),
                 SCTEST   = c("Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest",
                              " ",
                              "Eye Meeting Eligibility Criteria",
                              "Focus of Study-Specific Interest",
                              " "),
                 SCTESTCD = c("ELIGEYE", "FOCID", "", "ELIGEYE", "FOCID", ""),
                 SCCAT    = c("STUDY EYE SELECTION",
                              "STUDY EYE SELECTION",
                              "",
                              "STUDY EYE SELECTION",
                              "STUDY EYE SELECTION", ""),
                 SCORRES  = c("LEFT", "OS", "", "RIGHT", "", ""),
                 SCDTC    = rep("2021-01-01", 6),
                 stringsAsFactors = FALSE)

check_sc_dm_seyeselc(SC=sc, DM=dm)


</code></pre>

<hr>
<h2 id='check_ss_ssdtc_alive_dm'>Check non-missing last ALIVE status date in SS is before than death date in DM</h2><span id='topic+check_ss_ssdtc_alive_dm'></span>

<h3>Description</h3>

<p>This check looks for non-missing SS.SSDTC when SS.SSORRES contains 'ALIVE' and
Subject Status Date/Time of Assessments is greater then
Start Date/Time of Disposition Event(SS.SSDTC &gt; DS.DSSTDTC)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ss_ssdtc_alive_dm(SS, DM)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ss_ssdtc_alive_dm_+3A_ss">SS</code></td>
<td>
<p>Subject Status SDTM dataset with variables USUBJID, SSDTC, SSORRES, SSTESTCD, VISIT</p>
</td></tr>
<tr><td><code id="check_ss_ssdtc_alive_dm_+3A_dm">DM</code></td>
<td>
<p>Demographics SDTM dataset with variables USUBJID, DTHDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Vira Vrakina
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
SS &lt;- data.frame(
 USUBJID = 1:5,
 SSDTC = "2020-01-02",
 SSTESTCD = "SURVSTAT",
 SSORRES  = c("DEAD","DEAD","ALIVE","DEAD","ALIVE"),
 VISIT = "WEEK 4"
)


DM &lt;- data.frame(
 USUBJID = 1:5,
 DTHDTC = "2020-01-03"
)

check_ss_ssdtc_alive_dm(SS, DM)

SS &lt;- data.frame(
 USUBJID = 1:5,
 SSDTC = "2020-01-04",
 SSTESTCD = "SURVSTAT",
 SSORRES  = c("DEAD","DEAD","ALIVE","DEAD","ALIVE"),
 VISIT = "WEEK 4"
)

DM &lt;- data.frame(
 USUBJID = 1:5,
 DTHDTC = c("2020-01-04", "2020-01-05", "2020-01-03", "2020-01-04", "2020-01-05")
)

check_ss_ssdtc_alive_dm(SS, DM)

</code></pre>

<hr>
<h2 id='check_ss_ssdtc_dead_ds'>Check non-missing DEAD status date in SS and non-missing according DS record with death date
where status date is greater or equal to death date</h2><span id='topic+check_ss_ssdtc_dead_ds'></span>

<h3>Description</h3>

<p>This check looks for missing death date in DS dataset
if there is DEAD status date in SS dataset or
if Subject Status Date/Time of Assessments is less than
Start Date/Time of Disposition Event(SS.SSDTC &lt; DS.DSSTDTC)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ss_ssdtc_dead_ds(SS, DS, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ss_ssdtc_dead_ds_+3A_ss">SS</code></td>
<td>
<p>Subject Status SDTM dataset with variables USUBJID, SSDTC, SSSTRESC, VISIT</p>
</td></tr>
<tr><td><code id="check_ss_ssdtc_dead_ds_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID, DSSTDTC, DSDECOD, DSCAT</p>
</td></tr>
<tr><td><code id="check_ss_ssdtc_dead_ds_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ss_ssdtc_dead_ds_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Vira Vrakina
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
SS &lt;- data.frame(
 USUBJID = 1:5,
 SSDTC = "2020-01-02",
 SSSTRESC  = c("DEAD","DEAD","ALIVE","DEAD","ALIVE"),
 VISIT = "FOLLOW-UP",
 SSSPID = "FORMNAME-R:13/L:13XXXX"
)

DS &lt;- data.frame(
 USUBJID = 1:5,
 DSSTDTC  = c("2020-01-02","2020-01-02", "2020-01-01", "2020-01-03", "2020-01-01"),
 DSDECOD = c(rep('DEATH', 5)),
 DSSPID = "FORMNAME-R:13/L:13XXXX",
 DSCAT   = c("OTHER EVENT", rep("DISPOSITION EVENT", 4))
)

check_ss_ssdtc_dead_ds(SS, DS)
check_ss_ssdtc_dead_ds(SS, DS, preproc=roche_derive_rave_row)


SS &lt;- data.frame(
 USUBJID = 1:5,
 SSDTC = "2020-01-02",
 SSSTRESC  = c( rep("DEAD", 5)),
 VISIT = "FOLLOW-UP",
 SSSPID = "FORMNAME-R:13/L:13XXXX"
)

DS &lt;- data.frame(
 USUBJID = 1:5,
 DSSTDTC  = c("2020-01-02","2020-01-02", "2020-01-01", "2020-01-03", "2020-01-01"),
 DSDECOD = c(rep('DEATH', 5)),
 DSSPID = "FORMNAME-R:13/L:13XXXX",
 DSCAT   = c(rep("DISPOSITION EVENT", 5))
)

check_ss_ssdtc_dead_ds(SS, DS)
check_ss_ssdtc_dead_ds(SS, DS, preproc=roche_derive_rave_row)


SS &lt;- data.frame(
 USUBJID = 1:5,
 SSDTC = "2020-01-02",
 SSSTRESC  = c(rep("DEAD", 5)),
 VISIT = "FOLLOW-UP",
 SSSPID = "FORMNAME-R:13/L:13XXXX"
)

DS &lt;- data.frame(
 USUBJID = 1:5,
 DSSTDTC  = 2,
 DSDECOD = c(rep('DEATH', 5)),
 DSSPID = "FORMNAME-R:13/L:13XXXX",
 DSCAT   = c(rep("DISPOSITION EVENT", 5))
)

check_ss_ssdtc_dead_ds(SS, DS)

</code></pre>

<hr>
<h2 id='check_ss_ssdtc_dead_dthdtc'>Check non-missing DEAD status date in SS and an according DM record with death date
where status date is greater or equal to death date</h2><span id='topic+check_ss_ssdtc_dead_dthdtc'></span>

<h3>Description</h3>

<p>This check looks for non-missing SS.SSDTC when SS.SSSTRESC='DEAD' and
Subject Status Date/Time of Assessments is less than
Start Date/Time of Disposition Event(SS.SSDTC &lt; DS.DSSTDTC)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ss_ssdtc_dead_dthdtc(SS, DM)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ss_ssdtc_dead_dthdtc_+3A_ss">SS</code></td>
<td>
<p>Subject Status SDTM dataset with variables USUBJID, SSDTC, SSSTRESC, VISIT</p>
</td></tr>
<tr><td><code id="check_ss_ssdtc_dead_dthdtc_+3A_dm">DM</code></td>
<td>
<p>Demographics SDTM dataset with variables USUBJID, DTHDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Vira Vrakina
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
SS &lt;- data.frame(
 USUBJID = 1:5,
 SSDTC = "2020-01-02",
 SSSTRESC  = c("DEAD","DEAD","ALIVE","DEAD","ALIVE"),
 VISIT = "DAY 10"
)

DM &lt;- data.frame(
 USUBJID = 1:5,
 DTHDTC = "2020-01-02"
)

check_ss_ssdtc_dead_dthdtc(SS, DM)

SS &lt;- data.frame(
 USUBJID = 1:5,
 SSDTC = "2020-01-02",
 SSSTRESC  = c("DEAD","DEAD","ALIVE","DEAD","ALIVE"),
 VISIT = "FOLLOW-UP"
)

DM &lt;- data.frame(
 USUBJID = 1:5,
 DTHDTC = c("2020-01-01","2020-01-02","2020-01-03","2020-01-04","2020-01-02")
)

check_ss_ssdtc_dead_dthdtc(SS, DM)
</code></pre>

<hr>
<h2 id='check_ss_ssstat_ssorres'>Check for non-missing SSORRES if SSSTAT is NOT DONE</h2><span id='topic+check_ss_ssstat_ssorres'></span>

<h3>Description</h3>

<p>This check is for studies with LTFU mapped to the SS domain,
check that if 'NOT DONE' (Unable to Contact), then there should not be
a response (SSORRES)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ss_ssstat_ssorres(SS, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ss_ssstat_ssorres_+3A_ss">SS</code></td>
<td>
<p>Long-Term Survival Follow-Up SDTM dataset with variables USUBJID,
VISIT, SSSTAT, SSDTC, SSORRES, SSSPID (optional)</p>
</td></tr>
<tr><td><code id="check_ss_ssstat_ssorres_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_ss_ssstat_ssorres_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Sara Bodach
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
SS &lt;- data.frame(
STUDYID = 1,
USUBJID = c(rep(1,6),rep(2,6)),
SSSTRESC = c("ALIVE", "DEAD", "ALIVE", "", "", "U"),
SSORRES = c("ALIVE", "DEAD", "ALIVE", "", "", "U"),
VISIT = rep(c("SURVIVAL FOLLOW UP 3 MONTHS"),6),
SSSTAT = rep(c("","NOT DONE"),6),
SSDTC = "2016-01-01",
SSSPID = "",
stringsAsFactors = FALSE
)

check_ss_ssstat_ssorres(SS)

SS$SSORRES[2]=NA
check_ss_ssstat_ssorres(SS)

SS$SSSPID="FORMNAME-R:5/L:5XXXX"
check_ss_ssstat_ssorres(SS,preproc=roche_derive_rave_row)

SS$SSORRES[6]=NA
SS$SSORRES[8]=""
SS$SSORRES[12]=NA
check_ss_ssstat_ssorres(SS)

SS$SSORRES=NULL
check_ss_ssstat_ssorres(SS)


</code></pre>

<hr>
<h2 id='check_tr_dup'>Check for duplicate TR records</h2><span id='topic+check_tr_dup'></span>

<h3>Description</h3>

<p>This check looks for duplicate TR records and returns a data frame.
Only applies to assessments by Investigator, selected based on uppercased
TREVAL = &quot;INVESTIGATOR&quot; or missing or TREVAL variable does not exist.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_tr_dup(TR)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_tr_dup_+3A_tr">TR</code></td>
<td>
<p>dataframe with variables USUBJID, TRCAT, TRLINKID/TRLNKID, TRTESTCD, TRSTRESC,
TRDTC, TRSPID (if it exists)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the test failed
</p>


<h3>Author(s)</h3>

<p>Joel Laxamana
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# example with an error
TR &lt;- data.frame(
 USUBJID  = c(1,1,2,2),
 TRCAT    = c(1,1,2,2),
 TRTESTCD = c(1,1,2,2),
 TRLINKID = c(1,1,2,2),
 TRDTC = c(rep("2016-01-01",2), rep("2016-06-01",2)),
 TRSTRESC = c(1,1,2,2),
 TRSPID = "FORMNAME-R:19/L:19XXXX",
 TREVAL = "INVESTIGATOR",
 stringsAsFactors = FALSE
)

check_tr_dup(TR)

TR1 &lt;- TR
TR1$TRSPID &lt;- NULL

check_tr_dup(TR1)

TR2 &lt;- TR
TR2$TREVAL &lt;- NULL

check_tr_dup(TR2)

# example with no records flagged because issues only among IRF records
TR3 &lt;- TR
TR3$TREVAL &lt;- "INDEPENDENT ASSESSOR"
check_tr_dup(TR3)

# example with required variable missing
TR4 &lt;- TR
TR4$TRLINKID &lt;- NULL
check_tr_dup(TR4)


</code></pre>

<hr>
<h2 id='check_tr_trdtc_across_visit'>Check TR Longest Diameter Records where the same date occurs across multiple visits</h2><span id='topic+check_tr_trdtc_across_visit'></span>

<h3>Description</h3>

<p>This check identifies records where the same date TRDTC occurs
across multiple visits for Longest Diameter measurements (TRTESTCD is &quot;LDIAM&quot;).
Only applies to assessments by investigator, selected based on uppercased
TREVAL = &quot;INVESTIGATOR&quot; or missing or TREVAL variable does not exist.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_tr_trdtc_across_visit(TR, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_tr_trdtc_across_visit_+3A_tr">TR</code></td>
<td>
<p>Tumor Result SDTM dataset with variables USUBJID, TRDTC, TRTESTCD, VISIT,
TREVAL (optional)</p>
</td></tr>
<tr><td><code id="check_tr_trdtc_across_visit_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_tr_trdtc_across_visit_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Will Harris
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
TR &lt;- data.frame(
USUBJID = 1,
TRDTC = c(rep("2016-01-01",3), rep("2016-06-01",5), rep("2016-06-24",2)),
VISIT = c(rep("C1D1",3), rep("C1D2",3), rep("C2D1",4)),
TRTESTCD = c(rep("LDIAM",7),rep("SAXIS",3)),
TRSPID = "FORMNAME-R:13/L:13XXXX",
stringsAsFactors=FALSE)

check_tr_trdtc_across_visit(TR)
check_tr_trdtc_across_visit(TR, preproc=roche_derive_rave_row)

TR2 &lt;- TR
TR2$TRSPID[4:5] &lt;- c("FORMNAME2-R:5/L:13XXXX", "FORMNAME3-R:0/L:13XXXX")

check_tr_trdtc_across_visit(TR2)
check_tr_trdtc_across_visit(TR2, preproc=roche_derive_rave_row)

# missing optional variable
TR3 &lt;- TR
TR3$TRSPID &lt;- NULL

check_tr_trdtc_across_visit(TR3)
check_tr_trdtc_across_visit(TR3, preproc=roche_derive_rave_row)

# missing required variable
TR4 &lt;- TR
TR4$TRTESTCD &lt;- NULL

check_tr_trdtc_across_visit(TR4)
check_tr_trdtc_across_visit(TR4, preproc=roche_derive_rave_row)

</code></pre>

<hr>
<h2 id='check_tr_trdtc_visit_ordinal_error'>Check that all TR dates by INV are duplicated or earlier than
last visit's (possible date entry error)</h2><span id='topic+check_tr_trdtc_visit_ordinal_error'></span>

<h3>Description</h3>

<p>This check identifies TRDTC values when TREVAL == 'INVESTIGATOR'
are duplicated or earlier than last visit's. Unscheduled and 'NOT DONE' visits
are excluded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_tr_trdtc_visit_ordinal_error(TR)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_tr_trdtc_visit_ordinal_error_+3A_tr">TR</code></td>
<td>
<p>Tumor Response Measurement SDTM dataset with variables USUBJID,
VISITNUM, VISIT, TRDTC, TREVAL, TRSTAT</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if
the test failed
</p>


<h3>Author(s)</h3>

<p>James Zhang
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# no case
TR&lt;- data.frame(USUBJID = 101:102,
                TRSEQ=rep(1:5,2),
                TRDTC=rep(c("2017-01-01T08:25", "2017-01-05T09:25",
                   "2017-01-15T10:25","2017-01-20T08:25","2017-01-25T08:25"), 2),
                VISITNUM=rep(1:5,2),
                VISIT=rep(c("Screening", "Cycle 1", "Cycle 2","Cycle 3","Follow-up"),2),
                TREVAL="INVESTIGATOR",
                TRSTAT="",
                stringsAsFactors=FALSE)
check_tr_trdtc_visit_ordinal_error(TR)

# Cases with earler datetime
TR$TRDTC[TR$USUBJID == 101 &amp; TR$VISIT == "Cycle 3"] &lt;- "2017-01-02T08:25"
TR$TRDTC[TR$USUBJID == 102 &amp; TR$VISIT == "Cycle 1"] &lt;- "2017-01-01T06:25"
check_tr_trdtc_visit_ordinal_error(TR)

</code></pre>

<hr>
<h2 id='check_tr_trstresn_ldiam'>Check for TR records with missing TRSTRESN for Longest Diameter (LDIAM)</h2><span id='topic+check_tr_trstresn_ldiam'></span>

<h3>Description</h3>

<p>This checks looks for TR records with missing values in numeric
result/finding for the Longest Diameter (TRTESTCD is LDIAM) tumor measurement.
Only applies to assessments by investigator, selected based on uppercased
TREVAL = &quot;INVESTIGATOR&quot; or missing or TREVAL variable does not exist.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_tr_trstresn_ldiam(TR, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_tr_trstresn_ldiam_+3A_tr">TR</code></td>
<td>
<p>Tumor Results SDTM dataset with variables USUBJID, TRTESTCD,
TRLINKID/TRLNKID, TRDTC, VISIT, TRORRES, TRSTRESN, TREVAL (optional),
TRSTAT (optional), TRSPID (optional)</p>
</td></tr>
<tr><td><code id="check_tr_trstresn_ldiam_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_tr_trstresn_ldiam_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean value for whether the check passed or failed, with 'msg'
attribute if the check failed
</p>


<h3>Author(s)</h3>

<p>Will Harris
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
TR &lt;- data.frame(USUBJID = 1:5,
                 TRTESTCD = c("OTHER", rep("LDIAM", 4)),
                 TRLINKID = 1:5,
                 TRDTC = 1:5,
                 VISIT = LETTERS[1:5],
                 TRORRES = LETTERS[1:5],
                 TRSTRESN = 1:5,
                 TRSTAT = "",
                 TREVAL = "INVESTIGATOR",
                 TRSPID = "FORMNAME-R:19/L:19XXXX",
                 stringsAsFactors = FALSE)

check_tr_trstresn_ldiam(TR)

TR1 &lt;- TR
TR1$TRSTAT &lt;- NULL
TR1$TREVAL &lt;- NULL
TR1$TRSPID &lt;- NULL

check_tr_trstresn_ldiam(TR1)

TR2 &lt;- TR
TR2$TRSTRESN &lt;- c("", "NA", NA, 1, 1)

check_tr_trstresn_ldiam(TR2)
check_tr_trstresn_ldiam(TR2,preproc=roche_derive_rave_row)


</code></pre>

<hr>
<h2 id='check_ts_aedict'>Check for missing MedDRA version in TS</h2><span id='topic+check_ts_aedict'></span>

<h3>Description</h3>

<p>This check looks for missing MedDRA version;
if it's present, also checking it's the current version
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ts_aedict(TS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ts_aedict_+3A_ts">TS</code></td>
<td>
<p>Trial Summary SDTM dataset with variables TSPARMCD and TSVAL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Vira Vrakina, Antony Howard (HackR 2021 Team Pentraxin1)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
TS1 &lt;- data.frame(
 STUDYID = 1,
 TSPARMCD = "AEDICT",
 TSVAL = "MedDRA 22.0",
 TSVAL2 = ""
)

TS2 &lt;- data.frame(
 STUDYID = 2,
 TSPARMCD = "AEDICT",
 TSVAL = "",
 TSVAL1 = "meddra v22.0"
)

TS3 &lt;- data.frame(
 STUDYID = 3,
 TSPARMCD = "AEDICT",
 TSVAL = ""
)

TS4 &lt;-data.frame(
 STUDYID = 4,
 TSPARMCD = "CMDICT",
 TSVAL = ""
)

TS5 &lt;- data.frame(
    STUDYID = 1,
    TSPARMCD = "AEDICT",
    TSVAL = "meddra 24.0",
    TSVAL2 = ""
)

TS6 &lt;- data.frame(
    STUDYID = 1,
    TSPARMCD = "AEDICT",
    TSVAL = "    meddra    23.0   ",
    TSVAL2 = ""
)

check_ts_aedict(TS1)
check_ts_aedict(TS2)
check_ts_aedict(TS3)
check_ts_aedict(TS4)
check_ts_aedict(TS5)
check_ts_aedict(TS6)
check_ts_aedict(rbind(TS1,TS1))

</code></pre>

<hr>
<h2 id='check_ts_cmdict'>Check for missing WHODrug version in TS</h2><span id='topic+check_ts_cmdict'></span>

<h3>Description</h3>

<p>This check looks for missing WHODrug version;
if it's present, also checking it's the current version
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ts_cmdict(TS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ts_cmdict_+3A_ts">TS</code></td>
<td>
<p>Trial Summary SDTM dataset with variables TSPARMCD and TSVAL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Antony Howard (HackR 2021 Team Pentraxin1)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
TS1 &lt;- data.frame(
 STUDYID = 1,
 TSPARMCD = "CMDICT",
 TSVAL = "WHODRUG GLOBAL B3 MARCH 1, 2021",
 TSVAL2 = ""
)

TS2 &lt;- data.frame(
 STUDYID = 2,
 TSPARMCD = "CMDICT",
 TSVAL = "",
 TSVAL1 = "WHODRUG GLOBAL B3 MARCH 1, 2021"
)

TS3 &lt;- data.frame(
 STUDYID = 3,
 TSPARMCD = "CMDICT",
 TSVAL = ""
)

TS4 &lt;-data.frame(
 STUDYID = 4,
 TSPARMCD = "AEDICT",
 TSVAL = ""
)

TS5 &lt;- data.frame(
    STUDYID = 5,
    TSPARMCD = "CMDICT",
    TSVAL = "meddra 24.0",
    TSVAL2 = ""
)

TS6 &lt;- data.frame(
 STUDYID = 6,
 TSPARMCD = "CMDICT",
 TSVAL = "WHODRUG vGLOBAL B3 MARCH 1, 2021",
 TSVAL2 = ""
)

check_ts_cmdict(TS1)
check_ts_cmdict(TS2)
check_ts_cmdict(TS3)
check_ts_cmdict(TS4)
check_ts_cmdict(TS5)
check_ts_cmdict(TS6)
check_ts_cmdict(rbind(TS1,TS1))
</code></pre>

<hr>
<h2 id='check_ts_sstdtc_ds_consent'>Check for missing SSTDTC (Study Start Date) in TS</h2><span id='topic+check_ts_sstdtc_ds_consent'></span>

<h3>Description</h3>

<p>This check looks for missing SSTDTC (Study Start Date) in TS;
if it's present, check that the date matches the earliest informed consent among
any subject enrolled in the study. The FDA Technical Rejection Criteria for
Study Data - effective September 15, 2021 requires Study Start Date
(https://www.fda.gov/media/100743/download). If missing, no data queries are
needed - this would be updating the assignment in the TS domain.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ts_sstdtc_ds_consent(DS, TS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_ts_sstdtc_ds_consent_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables DSCAT, DSSCAT, DSDECOD, DSSTDTC</p>
</td></tr>
<tr><td><code id="check_ts_sstdtc_ds_consent_+3A_ts">TS</code></td>
<td>
<p>Trial Summary SDTM dataset with variables TSPARMCD, TSPARM, TSVAL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Sara Bodach
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
TS1 &lt;- data.frame(
 STUDYID = 1,
 TSPARMCD = "SSTDTC",
 TSPARM = "Study Start Date",
 TSVAL = "2017-01-01",
 TSVAL1 = "",
 TSVAL2 = ""
)

TS2 &lt;- data.frame(
 STUDYID = 2,
 TSPARMCD = "AEDICT",
 TSPARM = "Study Start Date",
 TSVAL = "MedDRA v23.0",
 TSVAL1 = ""
)

TS3 &lt;- data.frame(
 STUDYID = 3,
 TSPARMCD = "SSTDTC",
 TSPARM = "Study Start Date",
 TSVAL = ""
)

TS4 &lt;- data.frame(
 STUDYID = 1,
 TSPARMCD = "SSTDTC",
 TSPARM = "Study Start Date",
 TSVAL = "2020-01-02",
 TSVAL1 = "",
 TSVAL2 = ""
)

TS5 = rbind(TS1, TS4)

TS6 &lt;- data.frame(
 STUDYID = 1,
 TSPARMCD = "SSTDTC",
 TSPARM = "Study Start Date",
 TSVAL = "2020-01",
 TSVAL1 = "",
 TSVAL2 = ""
)

DS1 &lt;- data.frame(
 USUBJID = c(1,1,2,3,4),
 DSCAT   = rep("PROTOCOL MILESTONE", 5),
 DSSCAT   = rep("PROTOCOL MILESTONE", 5),
 DSDECOD = c("INFORMED CONSENT OBTAINED", "OTHER", "PHYSICIAN DECISION",
             "OTHER", "INFORMED CONSENT OBTAINED"),
 DSSTDTC = c("2021-01-01", "2021-01-02", "2021-01-02", "2021-01-02", "2020-01-02"),
 stringsAsFactors = FALSE
)

check_ts_sstdtc_ds_consent(DS=DS1, TS=TS1)
check_ts_sstdtc_ds_consent(DS=DS1, TS=TS2)
check_ts_sstdtc_ds_consent(DS=DS1, TS=TS3)
check_ts_sstdtc_ds_consent(DS=DS1, TS=TS4)
check_ts_sstdtc_ds_consent(DS=DS1, TS=TS5)
check_ts_sstdtc_ds_consent(DS=DS1, TS=TS6)

</code></pre>

<hr>
<h2 id='check_tu_rs_new_lesions'>Check for consistency between new lesions and overall PD response</h2><span id='topic+check_tu_rs_new_lesions'></span>

<h3>Description</h3>

<p>This checks for patients with new lesions in TU (TUSTRESC=='NEW')
but no Overall Response assessment of PD (Disease Progression) or
PMD (Progressive Metabolic Disease) in RS (i.e., (RSTESTCD=='OVRLRESP' and
RSSTRESC %in% c('PD','PMD'))). Only applies to assessments by investigator,
if TUEVAL and RSEVAL variables available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_tu_rs_new_lesions(RS, TU)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_tu_rs_new_lesions_+3A_rs">RS</code></td>
<td>
<p>Response SDTM dataset with variables USUBJID, RSSTRESC, RSTESTCD</p>
</td></tr>
<tr><td><code id="check_tu_rs_new_lesions_+3A_tu">TU</code></td>
<td>
<p>Tumor Identification SDTM dataset with variables USUBJID, TUSTRESC,
TUDTC</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE if check passed and FALSE if check failed + 'msg' and 'data'
attributes
</p>


<h3>Author(s)</h3>

<p>Will Harris
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
TU &lt;- data.frame(
 USUBJID = 1:3,
 TUSTRESC = c("INV001","NEW","NEW"),
 TUDTC = "2017-01-01"
)

RS &lt;- data.frame(
 USUBJID = 1:2,
 RSSTRESC = c("SD","NE")
)

# required variable is missing 
check_tu_rs_new_lesions(RS,TU)

RS$RSTESTCD = 'OVRLRESP'

# flag USUBJIDs with NEW 
check_tu_rs_new_lesions(RS,TU)


RS$RSSTRESC[2] = "PD"

# flag USUBJID with NEW and without PD
check_tu_rs_new_lesions(RS,TU)
   
# Metabolic response in heme trials
RS$RSSTRESC[2] = "PMD"
check_tu_rs_new_lesions(RS,TU)


# pass when USUBJIDs with new have PD
RS &lt;- data.frame(
 USUBJID = 1:3,
 RSSTRESC = c("SD","PD", "PD"), 
 RSTESTCD = "OVRLRESP"
)

check_tu_rs_new_lesions(RS,TU)

TU$TUEVAL = "INDEPENDENT ASSESSOR"

RS$RSEVAL = "INDEPENDENT ASSESSOR"

## pass if by IRF, even if NEW in TU
check_tu_rs_new_lesions(RS,TU)

RS &lt;- NULL

# required dataset missing 
check_tu_rs_new_lesions(RS,TU)

</code></pre>

<hr>
<h2 id='check_tu_tudtc'>Check for missing TUDTC values</h2><span id='topic+check_tu_tudtc'></span>

<h3>Description</h3>

<p>This check looks for missing TUDTC values and returns a data frame.
Only applies to assessments by investigator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_tu_tudtc(TU, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_tu_tudtc_+3A_tu">TU</code></td>
<td>
<p>Tumor Identification SDTM dataset with variables USUBJID, TUDTC,
VISIT, TUORRES, TUSPID (optional), TUTESTCD (optional)</p>
</td></tr>
<tr><td><code id="check_tu_tudtc_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_tu_tudtc_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Beeya Na
</p>


<h3>Examples</h3>

<pre><code class='language-R'>TU &lt;- data.frame(
USUBJID = "1001",
TUDTC = "2020-05-05",
VISIT = "C1D1",
TUORRES = 1:10,
TUSPID = "FORMNAME-R:19/L:19XXXX",
TUEVAL = "INVESTIGATOR",
TUTESTCD = "TUMIDENT",
stringsAsFactors = FALSE
)

TU$TUDTC[1]=""
TU$TUDTC[2]="NA"
TU$TUDTC[3]=NA

check_tu_tudtc(TU,preproc=roche_derive_rave_row)

TU$TUEVAL[1]=""
TU$TUTESTCD=NULL
check_tu_tudtc(TU,preproc=roche_derive_rave_row)

TU$TUEVAL[2]="INDEPENDENT ASSESSOR"
TU$TUEVAL[3]="INDEPENDENT ASSESSOR"
TU$TUDTC[4]=""
check_tu_tudtc(TU)

TU$TUSPID=NULL
check_tu_tudtc(TU)

TU$VISIT=NULL
check_tu_tudtc(TU)


</code></pre>

<hr>
<h2 id='check_tu_tudtc_across_visit'>Check TU Records where the same date occurs across multiple visits</h2><span id='topic+check_tu_tudtc_across_visit'></span>

<h3>Description</h3>

<p>This check identifies records where the same date TUDTC occurs
across multiple visits. Only applies to assessments by investigator,
selected based on uppercased TUEVAL = &quot;INVESTIGATOR&quot; or missing or
TUEVAL variable does not exist.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_tu_tudtc_across_visit(TU, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_tu_tudtc_across_visit_+3A_tu">TU</code></td>
<td>
<p>Tumor Identification SDTM dataset with variables USUBJID, TUDTC, VISIT,
TUEVAL (optional), TUTESTCD (optional)</p>
</td></tr>
<tr><td><code id="check_tu_tudtc_across_visit_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_tu_tudtc_across_visit_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed.
</p>


<h3>Author(s)</h3>

<p>Will Harris
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# records flagged 
TU &lt;- data.frame(USUBJID = 1,
                 TUDTC = c(rep("2016-01-01",3), rep("2016-06-01",5), rep("2016-06-24",2)),
                 VISIT = c(rep("C1D1",3), rep("C1D2",3), rep("C2D1",4)),
                 TUSPID = "FORMNAME-R:13/L:13XXXX",
                 stringsAsFactors=FALSE)

check_tu_tudtc_across_visit(TU)
check_tu_tudtc_across_visit(TU, preproc=roche_derive_rave_row)

# no records flagged because non-Investigator results
TU2 &lt;- TU
TU2$TUEVAL &lt;- "INDEPENDENT ASSESSOR"

check_tu_tudtc_across_visit(TU2)
check_tu_tudtc_across_visit(TU2, preproc=roche_derive_rave_row)

# example with TUTESTCD and with records flagged
TU3 &lt;- TU
TU3$TUTESTCD = c(rep("TUMIDENT", 2), rep("OTHER", 2), 
   rep("TUMIDENT", 2), rep("OTHER", 2), rep("TUMIDENT", 2))
check_tu_tudtc_across_visit(TU3)
check_tu_tudtc_across_visit(TU3, preproc=roche_derive_rave_row)


# example without TUSPID and with records flagged
TU4 &lt;- TU
TU4$TUSPID &lt;- NULL

check_tu_tudtc_across_visit(TU4)
check_tu_tudtc_across_visit(TU4, preproc=roche_derive_rave_row)

# example with required variable missing
TU5 &lt;- TU
TU5$VISIT &lt;- NULL

check_tu_tudtc_across_visit(TU5)
check_tu_tudtc_across_visit(TU5, preproc=roche_derive_rave_row)

</code></pre>

<hr>
<h2 id='check_tu_tudtc_visit_ordinal_error'>Check that all TU  dates are duplicated or earlier than last
visit's (possible datetime data entry error)</h2><span id='topic+check_tu_tudtc_visit_ordinal_error'></span>

<h3>Description</h3>

<p>This check identifies TUDTC values that are duplicated or
earlier than last visit's. Unscheduled visits are excluded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_tu_tudtc_visit_ordinal_error(TU)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_tu_tudtc_visit_ordinal_error_+3A_tu">TU</code></td>
<td>
<p>Tumor Identification SDTM dataset with variables USUBJID,TUORRES ,TULOC, VISITNUM, VISIT, TUDTC, TUEVAL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Jingyuan Chen
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# no case
TU &lt;- data.frame(USUBJID = 101:102,
                TUORRES = rep(c("NEW", "TARGET"), 5),
                TULOC=rep(c("BONE","LIVER"),5),
                TUDTC = rep(c("2017-01-01T08:25", "2017-01-05T09:25",
                 "2017-01-15T10:25","2017-01-20T08:25","2017-01-25T08:25"), 2),
                VISITNUM = rep(1:5,2),
                VISIT = rep(c( "Visit 1", "Visit 2", "Visit 3", "Visit 4","VIsit 5"), 2),
                TUEVAL="INVESTIGATOR",
                stringsAsFactors = FALSE)
check_tu_tudtc_visit_ordinal_error(TU)

# adding cases with earler date
TU$TUDTC[TU$USUBJID == 101 &amp; TU$VISIT == "Visit 4"] &lt;- "2017-01-10T08:25"
TU$TUDTC[TU$USUBJID == 102 &amp; TU$VISIT == "Visit 2"] &lt;- "2017-01-01T06:25"
check_tu_tudtc_visit_ordinal_error(TU)

# adding cases with duplicated date
TU$TUDTC[TU$USUBJID == 101 &amp; TU$VISIT == "Visit 5"] &lt;- "2017-01-10T08:25"
TU$TUDTC[TU$USUBJID == 102 &amp; TU$VISIT == "Visit 3"] &lt;- "2017-01-01T06:25"
 check_tu_tudtc_visit_ordinal_error(TU)
</code></pre>

<hr>
<h2 id='check_tu_tuloc_missing'>Check for missing TULOC values</h2><span id='topic+check_tu_tuloc_missing'></span>

<h3>Description</h3>

<p>This check looks for target lesions with missing TULOC values and
returns a data frame. Only applies to assessments by investigator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_tu_tuloc_missing(TU, preproc = identity, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_tu_tuloc_missing_+3A_tu">TU</code></td>
<td>
<p>Tumor Identification SDTM dataset with variables USUBJID, TUDTC,
VISIT, TUORRES, TULOC, TUSPID (optional)</p>
</td></tr>
<tr><td><code id="check_tu_tuloc_missing_+3A_preproc">preproc</code></td>
<td>
<p>An optional company specific preprocessing script</p>
</td></tr>
<tr><td><code id="check_tu_tuloc_missing_+3A_...">...</code></td>
<td>
<p>Other arguments passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Will Harris
</p>


<h3>Examples</h3>

<pre><code class='language-R'>TU &lt;- data.frame(
USUBJID = 1:10,
TUDTC = 1:10,
VISIT = "C1D1",
TUORRES = "TARGET",
TULOC = "LIVER",
TUSPID = "FORMNAME-R:19/L:19XXXX",
stringsAsFactors=FALSE
)

check_tu_tuloc_missing(TU)

TU$TULOC[1] = "NA"
TU$TULOC[2] = ""
TU$TULOC[3] = NA

check_tu_tuloc_missing(TU,preproc=roche_derive_rave_row)

TU$TUSPID &lt;- NULL
check_tu_tuloc_missing(TU)


</code></pre>

<hr>
<h2 id='check_vs_height'>Check for missing height values</h2><span id='topic+check_vs_height'></span>

<h3>Description</h3>

<p>This check looks for both records where height is missing
as well as DM patients with no height records at all
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_vs_height(VS, DM)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_vs_height_+3A_vs">VS</code></td>
<td>
<p>Vital Signs SDTM dataset with variables USUBJID,VSTEST,VSTESTCD,VSSTRESN,VISIT</p>
</td></tr>
<tr><td><code id="check_vs_height_+3A_dm">DM</code></td>
<td>
<p>Demographics SDTM dataset with variable USUBJID</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Author(s)</h3>

<p>Sara Bodach
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
DM &lt;- data.frame(
 STUDYID = 1,
 USUBJID = 1:10
)

VS &lt;- data.frame(
 STUDYID = 1,
 USUBJID = 1:10,
 VSTEST = "HEIGHT",
 VSTESTCD = "HEIGHT",
 VSSTRESN = 1:10,
 VISIT = 1:10
)

check_vs_height(VS,DM)

DM &lt;- data.frame(
 STUDYID = 1,
 USUBJID = 1:11
)

VS$VSSTRESN[1] = NA
VS$VSSTRESN[2] = "NA"
VS$VSSTRESN[3] = ""
VS$VSSTRESN[4] = "."

check_vs_height(VS,DM)


</code></pre>

<hr>
<h2 id='check_vs_sbp_lt_dbp'>Check that DBP is not higher than SBP in VS</h2><span id='topic+check_vs_sbp_lt_dbp'></span>

<h3>Description</h3>

<p>This check looks for non-missing diastolic BP is not higher than non-missing systolic BP
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_vs_sbp_lt_dbp(VS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_vs_sbp_lt_dbp_+3A_vs">VS</code></td>
<td>
<p>Vital Signs SDTM dataset with variables USUBJID,VISIT,VSDTC,VSTESTCD,VSSTRESN,VSSPID</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value if check failed or passed with 'msg' attribute if the
test failed
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
vs &lt;- data.frame(
 STUDYID = 1,
 USUBJID = 1,
 VSSPID = c("1","2","1","2"),
 VISIT = 1,
 VSDTC = c("2010-01-01","2010-01-01","2010-01-01","2010-01-01"),
 VSTESTCD = c("SYSBP","SYSBP",
            "DIABP","DIABP")
            ,
 VSSTRESN = c(80,120,100,80)
 )

 vs0 &lt;- subset(vs, select = c(USUBJID, VSSPID, VSSTRESN))

 check_vs_sbp_lt_dbp(VS=vs)
 check_vs_sbp_lt_dbp(VS=vs0)


</code></pre>

<hr>
<h2 id='check_vs_vsdtc_after_dd'>Check for VS dates occurring after death date</h2><span id='topic+check_vs_vsdtc_after_dd'></span>

<h3>Description</h3>

<p>This check looks for VS dates that occur after death date
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_vs_vsdtc_after_dd(AE, DS, VS)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_vs_vsdtc_after_dd_+3A_ae">AE</code></td>
<td>
<p>Adverse Event SDTM dataset with variables USUBJID,
AEDTHDTC, AESTDTC, AEDECOD, and AETERM</p>
</td></tr>
<tr><td><code id="check_vs_vsdtc_after_dd_+3A_ds">DS</code></td>
<td>
<p>Disposition SDTM dataset with variables USUBJID,
DSSTDTC, DSDECOD, and DSTERM</p>
</td></tr>
<tr><td><code id="check_vs_vsdtc_after_dd_+3A_vs">VS</code></td>
<td>
<p>Vital Signs SDTM dataset with variables USUBJID,
VSDTC, VSTESTCD, and VSORRES</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean value for whether the check passed or failed, with 'msg'
attribute if the check failed
</p>


<h3>Author(s)</h3>

<p>Nina Ting Qi
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(STUDYID = 1:5, USUBJID = LETTERS[1:5],
                 AEDTHDTC = c(rep("", 4), "2016-01-01"),
                 AESTDTC = rep("2016-01-01", 5),
                 AEDECOD = LETTERS[1:5], AETERM = LETTERS[1:5],
                 stringsAsFactors = FALSE)

DS &lt;- data.frame(STUDYID = 1:5, USUBJID = LETTERS[1:5],
                 DSSTDTC = rep("2016-01-02", 5),
                 DSDECOD = c(LETTERS[1:4], "death"),
                 DSTERM = letters[1:5],
                 stringsAsFactors = FALSE)

VS &lt;- data.frame(STUDYID = 1:5, USUBJID = LETTERS[1:5],
                 VSDTC = rep("2015-12-31", 5),
                 VSTESTCD = letters[1:5],
                 VSORRES = 1:5,
                 stringsAsFactors = FALSE)

check_vs_vsdtc_after_dd(AE, DS, VS)

VS$VSDTC[1] &lt;- "2016-01-03"
VS$USUBJID[1] &lt;- VS$USUBJID[5]

check_vs_vsdtc_after_dd(AE, DS, VS)

</code></pre>

<hr>
<h2 id='convert_var_to_ascii'>Remove non-ASCII characters from reported term in order
for Pandoc to create PDF file</h2><span id='topic+convert_var_to_ascii'></span>

<h3>Description</h3>

<p>Remove non-ASCII characters from reported term in order
for Pandoc to create PDF file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_var_to_ascii(df, var)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="convert_var_to_ascii_+3A_df">df</code></td>
<td>
<p>dataframe</p>
</td></tr>
<tr><td><code id="convert_var_to_ascii_+3A_var">var</code></td>
<td>
<p>variable with non-ASCII characters</p>
</td></tr>
</table>


<h3>Value</h3>

<p>dataframe
</p>


<h3>See Also</h3>

<p>Reporting-related utility functions
<code><a href="#topic+create_R_script">create_R_script</a>()</code>,
<code><a href="#topic+truncate_var_strings">truncate_var_strings</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
df &lt;- data.frame(
var = c("test", "teäst"),
stringsAsFactors = FALSE
)

convert_var_to_ascii(df, 'var')

df &lt;- data.frame(
usubjid = 1:2,
var = c("test", "teästõ"),
stringsAsFactors = FALSE
)

convert_var_to_ascii(df, 'var')
</code></pre>

<hr>
<h2 id='create_R_script'>Create .R file with sdtmchecks function calls</h2><span id='topic+create_R_script'></span>

<h3>Description</h3>

<p>Function that uses sdtmchecksmeta as input and creates .R file with function calls
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_R_script(
  metads = sdtmchecksmeta,
  file = "sdtmchecks_run_all.R",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_R_script_+3A_metads">metads</code></td>
<td>
<p>sdtmchecksmeta file</p>
</td></tr>
<tr><td><code id="create_R_script_+3A_file">file</code></td>
<td>
<p>filename and/or path to save to</p>
</td></tr>
<tr><td><code id="create_R_script_+3A_verbose">verbose</code></td>
<td>
<p>Print information to console</p>
</td></tr>
</table>


<h3>Value</h3>

<p>R script with user specified sdtmchecks based on sdtmchecksmeta file
</p>


<h3>Author(s)</h3>

<p>Monarch Shah
</p>


<h3>See Also</h3>

<p>Reporting-related utility functions
<code><a href="#topic+convert_var_to_ascii">convert_var_to_ascii</a>()</code>,
<code><a href="#topic+truncate_var_strings">truncate_var_strings</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# All checks are output to a file
fileName &lt;- file.path(tempdir(), "run_all_checks.R")
create_R_script(file = fileName)

# Only include selected checks
fileName &lt;- file.path(tempdir(), "run_some_checks.R")
mymetads = sdtmchecksmeta[sdtmchecksmeta$category == "ALL" &amp; sdtmchecksmeta$priority == "High",]
create_R_script(metads = mymetads, file = fileName)

# Roche specific function calls
fileName &lt;- file.path(tempdir(), "run_all_checks_roche.R")
mymetads = sdtmchecksmeta
mymetads$fxn_in=mymetads$fxn_in_roche
create_R_script(metads = mymetads, file = fileName)

</code></pre>

<hr>
<h2 id='diff_reports'>Create a sdtmchecks list object with column indicating whether the issue was previously seen</h2><span id='topic+diff_reports'></span>

<h3>Description</h3>

<p>This report will identify flagged records from an sdtmchecks report
that are &quot;new&quot; and those that are &quot;old&quot; for a study. This will help quickly target
newly emergent issues that may require a new query or investigation while indicating
issues that were encountered from a prior report and may have already been queried.
</p>
<p>This <code>diff_reports()</code> function requires a newer and older set of results from
<code>sdtmchecks::run_all_checks()</code>, which will generate a list of check results.
An added column &quot;Status&quot; is created with values of &quot;NEW&quot; and &quot;OLD&quot;
in the list of check results, flagging whether a given record that is present
in the new result (ie <code>new_report</code>) is also present in the old result (ie <code>old_report</code>).
It makes a difference which report is defined as &quot;new&quot; and &quot;old&quot;.
This code only keeps results flagged in the new report and drops
old results not in the new report because they were presumably resolved.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diff_reports(old_report, new_report)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="diff_reports_+3A_old_report">old_report</code></td>
<td>
<p>an older sdtmchecks list object as created by <code>run_all_checks</code></p>
</td></tr>
<tr><td><code id="diff_reports_+3A_new_report">new_report</code></td>
<td>
<p>a newer sdtmchecks list object as created by <code>run_all_checks</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of sdtmchecks results based on new_report with Status indicator
</p>


<h3>See Also</h3>

<p>Example programs for running data checks
<code><a href="#topic+report_to_xlsx">report_to_xlsx</a>()</code>,
<code><a href="#topic+run_all_checks">run_all_checks</a>()</code>,
<code><a href="#topic+run_check">run_check</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Step 1: Simulate an older AE dataset with one missing preferred term

 ae &lt;- data.frame(
 USUBJID = 1:5,
 DOMAIN = c(rep("AE", 5)),
 AESEQ = 1:5,
 AESTDTC = 1:5,
 AETERM = 1:5,
 AEDECOD = 1:5,
  AESPID = c("FORMNAME-R:13/L:13XXXX",
             "FORMNAME-R:16/L:16XXXX",
             "FORMNAME-R:2/L:2XXXX",
             "FORMNAME-R:19/L:19XXXX",
             "FORMNAME-R:5/L:5XXXX"),
 stringsAsFactors = FALSE
)

ae$AEDECOD[1] = NA

# Step 2: Use the run_all_checks() function to generate list of check results on this "old" data
 
# Filter sdtmchecksmeta so that only one check is present
metads &lt;- sdtmchecksmeta[sdtmchecksmeta$check=="check_ae_aedecod",] 
old &lt;- run_all_checks(metads=metads)



#Step 3: Simulate a newer, updated AE dataset with another record with a new missing preferred term

 ae &lt;- data.frame(
 USUBJID = 1:6,
 DOMAIN = c(rep("AE", 6)),
 AESEQ = 1:6,
 AESTDTC = 1:6,
 AETERM = 1:6,
 AEDECOD = 1:6,
  AESPID = c("FORMNAME-R:13/L:13XXXX",
             "FORMNAME-R:16/L:16XXXX",
             "FORMNAME-R:2/L:2XXXX",
             "FORMNAME-R:19/L:19XXXX",
             "FORMNAME-R:5/L:5XXXX",
             "FORMNAME-R:1/L:5XXXX"
             ),
 stringsAsFactors = FALSE
)

ae$AEDECOD[1] = NA
ae$AEDECOD[6] = NA

# Step 4: use the run_all_checks() function to generate list of check results  on this "new" data

new &lt;- run_all_checks(metads=metads)

# Step 5: Diff to create a column indicating if the finding is new
res &lt;- diff_reports(old_report=old, new_report=new)

## optionally output results as spreadsheet with sdtmchecks::report_to_xlsx()
# report_to_xlsx(res, outfile=paste0("saved_reports/sdtmchecks_diff_",Sys.Date(),".xlsx"))


</code></pre>

<hr>
<h2 id='dtc_dupl_early'>Check if start dates are duplicated or earlier than prior visit date</h2><span id='topic+dtc_dupl_early'></span>

<h3>Description</h3>

<p>This is a core function for checking if start dates are
duplicated or earlier than last visit's (possible datetime data entry error),
can be used in separate checks for each domain
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dtc_dupl_early(dts, vars, groupby, dtc, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dtc_dupl_early_+3A_dts">dts</code></td>
<td>
<p>dataset, e.g. EX</p>
</td></tr>
<tr><td><code id="dtc_dupl_early_+3A_vars">vars</code></td>
<td>
<p>variables in a form c(&quot;USUBJID&quot;, &quot;EXTRT&quot;, &quot;VISITNUM&quot;, &quot;VISIT&quot;, &quot;EXSTDTC&quot;)</p>
</td></tr>
<tr><td><code id="dtc_dupl_early_+3A_groupby">groupby</code></td>
<td>
<p>variables used for grouping and visit.order derivation</p>
</td></tr>
<tr><td><code id="dtc_dupl_early_+3A_dtc">dtc</code></td>
<td>
<p>the date variable</p>
</td></tr>
<tr><td><code id="dtc_dupl_early_+3A_...">...</code></td>
<td>
<p>variables used for ordering before visit.order derivation</p>
</td></tr>
</table>


<h3>Value</h3>

<p>dataframe with records of duplicated or earlier than last visit date
</p>


<h3>Author(s)</h3>

<p>James Zhang
</p>

<hr>
<h2 id='fail'>Fail object</h2><span id='topic+fail'></span>

<h3>Description</h3>

<p>With fail message and dataframe portion responsible for the check failure result
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fail(msg, data = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fail_+3A_msg">msg</code></td>
<td>
<p>character string with fail message</p>
</td></tr>
<tr><td><code id="fail_+3A_data">data</code></td>
<td>
<p>a data frame to be printed with the fail message</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean with msg and data attributes
</p>

<hr>
<h2 id='impute_day01'>Add day of &quot;01&quot; to dates that are in the format of &quot;yyyy-mm&quot;</h2><span id='topic+impute_day01'></span>

<h3>Description</h3>

<p>Add day of &quot;01&quot; to dates that are in the format of &quot;yyyy-mm&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>impute_day01(dates)
</code></pre>


<h3>Value</h3>

<p>string
</p>

<hr>
<h2 id='is_sas_na'>Check if the elements could be of any SAS missing data variant</h2><span id='topic+is_sas_na'></span>

<h3>Description</h3>

<p>Missing Data from sas7bdat imported datesets could be imported in different
ways we currently check for 'NA', NA, '.', and &rdquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_sas_na(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_sas_na_+3A_x">x</code></td>
<td>
<p>vector with data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>logical vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_sas_na(c(1,2,NA))

is_sas_na(c("a", NA, "NA", ""))
</code></pre>

<hr>
<h2 id='lacks_msg'>Check data frame for mandatory variables and specify which are missing in
message</h2><span id='topic+lacks_msg'></span>

<h3>Description</h3>

<p>Check data frame for mandatory variables and specify which are missing in
message
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lacks_msg(df, varnames)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="lacks_msg_+3A_df">df</code></td>
<td>
<p>a data frame</p>
</td></tr>
<tr><td><code id="lacks_msg_+3A_varnames">varnames</code></td>
<td>
<p>a vector with variable names</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character string saying which variables are missing
</p>

<hr>
<h2 id='missing_month'>Function to check if month is missing while year and day are non-missing
(i.e. would be in the format of &quot;yyyy&mdash;dd&quot;)</h2><span id='topic+missing_month'></span>

<h3>Description</h3>

<p>Function to check if month is missing while year and day are non-missing
(i.e. would be in the format of &quot;yyyy&mdash;dd&quot;)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>missing_month(date)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="missing_month_+3A_date">date</code></td>
<td>
<p>date vector (character) in the format 2020-01-20</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector
</p>

<hr>
<h2 id='nickname'>Nickname for package version</h2><span id='topic+nickname'></span>

<h3>Description</h3>

<p>A nickname associated with the package version.  Previously lived in the description file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nickname
</code></pre>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 1.
</p>

<hr>
<h2 id='pass'>Pass object</h2><span id='topic+pass'></span>

<h3>Description</h3>

<p>Pass object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pass()
</code></pre>


<h3>Value</h3>

<p>a boolean TRUE
</p>

<hr>
<h2 id='report_to_xlsx'>Save report as an xlsx file</h2><span id='topic+report_to_xlsx'></span>

<h3>Description</h3>

<p>Save report as an xlsx file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>report_to_xlsx(res, outfile, extrastring = "")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="report_to_xlsx_+3A_res">res</code></td>
<td>
<p>results list created by run_all_checks</p>
</td></tr>
<tr><td><code id="report_to_xlsx_+3A_outfile">outfile</code></td>
<td>
<p>file path/name to write to</p>
</td></tr>
<tr><td><code id="report_to_xlsx_+3A_extrastring">extrastring</code></td>
<td>
<p>optionally display extra info alongside version info, e.g. diff info</p>
</td></tr>
</table>


<h3>Value</h3>

<p>xlsx file
</p>


<h3>See Also</h3>

<p>Example programs for running data checks
<code><a href="#topic+diff_reports">diff_reports</a>()</code>,
<code><a href="#topic+run_all_checks">run_all_checks</a>()</code>,
<code><a href="#topic+run_check">run_check</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Create Dummy data

ae = data.frame(
 USUBJID = 1:5,
 DOMAIN = c(rep("AE", 5)),
 AESEQ = 1:5,
 AESTDTC = 1:5,
 AETERM = 1:5,
 AEDECOD = 1:5,
  AESPID = c("FORMNAME-R:13/L:13XXXX",
             "FORMNAME-R:16/L:16XXXX",
             "FORMNAME-R:2/L:2XXXX",
             "FORMNAME-R:19/L:19XXXX",
             "FORMNAME-R:5/L:5XXXX"),
 stringsAsFactors = FALSE
)

cm = data.frame(
 USUBJID = 1:5,
 DOMAIN = rep("CM", 5),
 CMTRT = rep("DRUG TERM", 5),
 CMDECOD = rep("CODED DRUG TERM", 5),
 CMSTDTC = 1:5,
 CMENDTC = 1:5,
 CMCAT = "CONCOMITANT MEDICATIONS",
 CMSPID = c("FORMNAME-R:13/L:13XXXX",
             "FORMNAME-R:16/L:16XXXX",
             "FORMNAME-R:2/L:2XXXX",
             "FORMNAME-R:19/L:19XXXX",
             "FORMNAME-R:5/L:5XXXX"),
 stringsAsFactors=FALSE
)

res=run_all_checks(verbose = FALSE)
fileName &lt;- file.path(tempdir(), "check_results.xlsx")
report_to_xlsx(res=res,outfile=fileName)

</code></pre>

<hr>
<h2 id='roche_derive_rave_row'>Utility function to obtain Rave form name and row number</h2><span id='topic+roche_derive_rave_row'></span>

<h3>Description</h3>

<p>This function derives the Rave form name and row number from xxSPID.
The xxSPID string may yield unexpected results for outsourced studies. Log forms
will show the row number as #n. Non-log forms may show #0 after the form name.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>roche_derive_rave_row(
  dts,
  domains = c("ae", "ce", "cm", "ds", "lb", "mh", "pr", "rs", "ss", "tr", "tu")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="roche_derive_rave_row_+3A_dts">dts</code></td>
<td>
<p>SDTM dataframe - e.g., AE</p>
</td></tr>
<tr><td><code id="roche_derive_rave_row_+3A_domains">domains</code></td>
<td>
<p>domains you wish to identify a xxSPID variable from</p>
</td></tr>
</table>


<h3>Value</h3>

<p>dataframe with Rave row number
</p>


<h3>Author(s)</h3>

<p>Stella Banjo (HackR 2021)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AE &lt;- data.frame(
  STUDY = c(rep("1", 6)),
  DOMAIN = c(rep("AE", 6)),
  USUBJID = c(rep("PT1", 6)),
  AESEQ = c(1, 2, 3, 4, 5, 6),
  AETERM = rep("AE Raw Term",6),
  AEDECOD = rep("AE Preferred Term",6),
  AESPID = c("FORMNAME-R:13/L:13XXXX",
             "FORMNAME-R:16/L:16XXXX",
             "FORMNAME-R:2/L:2XXXX",
             "FORMNAME-R:19/L:19XXXX",
             "FORMNAME-R:5/L:5XXXX",
             "FORMNAME-R:20/L:20XXXX"),
  AESTDTC = c(rep("2020-01-01", 6)),
  stringsAsFactors = FALSE
)

roche_derive_rave_row(AE)

</code></pre>

<hr>
<h2 id='run_all_checks'>Run all data checks in sdtmchecks package using parallel processing</h2><span id='topic+run_all_checks'></span>

<h3>Description</h3>

<p>This function runs all checks in the sdtmchecks package.
It expects SDTM domains saved as dataframe objects in your global environment.
These dataframes should have lowercase names, e.g., dm.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_all_checks(
  metads = sdtmchecksmeta,
  priority = c("High", "Medium", "Low"),
  type = c("ALL", "ONC", "COVID", "PRO", "OPHTH"),
  verbose = TRUE,
  ncores = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_all_checks_+3A_metads">metads</code></td>
<td>
<p>Metadata to use to execute the checks. The default is the
sdtmchecksmeta dataframe available in the package. This object could
easily be customized, subset, etc.</p>
</td></tr>
<tr><td><code id="run_all_checks_+3A_priority">priority</code></td>
<td>
<p>Priority level of data checks, i.e., c(&quot;High&quot;, &quot;Medium&quot;, &quot;Low&quot;).
NULL runs all priority levels.</p>
</td></tr>
<tr><td><code id="run_all_checks_+3A_type">type</code></td>
<td>
<p>Type of data checks, i.e., c(&quot;ALL&quot;, &quot;ONC&quot;, &quot;COV&quot;, &quot;PRO&quot;, &quot;OPHTH&quot;).
NULL runs all type.</p>
</td></tr>
<tr><td><code id="run_all_checks_+3A_verbose">verbose</code></td>
<td>
<p>Whether to display messages while running</p>
</td></tr>
<tr><td><code id="run_all_checks_+3A_ncores">ncores</code></td>
<td>
<p>Number of cores for parallel processing, with default set
to 1 (sequential)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To look up documentation for the data checks in package, please use
command ??sdtmchecks
</p>


<h3>Value</h3>

<p>list with results from individual data check functions
</p>


<h3>See Also</h3>

<p>Example programs for running data checks
<code><a href="#topic+diff_reports">diff_reports</a>()</code>,
<code><a href="#topic+report_to_xlsx">report_to_xlsx</a>()</code>,
<code><a href="#topic+run_check">run_check</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Assuming sdtm datasets are in your global environment
# Note we are only specifying AE and DS here so all unrelated checks wont be run

ae &lt;- data.frame(
    STUDYID = 1,
    USUBJID = c(1,2,3,1,2,3),
    AESTDTC = '2020-05-05',
    AETERM  = c("abc Covid-19", "covid TEST POSITIVE",rep("other AE",4)),
    AEDECOD = c("COVID-19", "CORONAVIRUS POSITIVE", rep("OTHER AE",4)),
    AEACN = c("DRUG WITHDRAWN", rep("DOSE NOT CHANGED",5)),
    AESPID = "FORMNAME-R:13/L:13XXXX",
    stringsAsFactors = FALSE
)

ds &lt;- data.frame(
 USUBJID = c(1,1,2,3,4),
 DSSPID  = 'XXX-DISCTX-XXX',
 DSCAT   = "DISPOSITION EVENT",
 DSDECOD = "OTHER REASON",
 DSSEQ = c(1,2,1,1,1),
 stringsAsFactors = FALSE
)

all_rec&lt;-run_all_checks(metads=sdtmchecksmeta, 
                        verbose=FALSE)
                        
</code></pre>

<hr>
<h2 id='run_check'>Run a single check in sdtmchecks package</h2><span id='topic+run_check'></span>

<h3>Description</h3>

<p>This function runs a single check in the sdtmchecks package. It expects a check name,
the function that performs the check and some info for the pdf and Excel files. It also expects a T/F
value that determines whether to display messages while running. Excluding verbose, the parameters for
this function are usually passed to it by filtering the metads to only contain the row corresponding
to the check of interest, and then assigning each parameter as the contents of the eponymous column
of metads (see example below). This is because this function is mostly run inside of an mcmapply in
the run_all_checks_parallel function, which loops over the checks in the rows of metads.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_check(
  check,
  fxn_in,
  xls_title,
  pdf_title,
  pdf_subtitle,
  pdf_return,
  verbose
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_check_+3A_check">check</code></td>
<td>
<p>Check name.</p>
</td></tr>
<tr><td><code id="run_check_+3A_fxn_in">fxn_in</code></td>
<td>
<p>Function performing the check.</p>
</td></tr>
<tr><td><code id="run_check_+3A_xls_title">xls_title</code></td>
<td>
<p>Excel title.</p>
</td></tr>
<tr><td><code id="run_check_+3A_pdf_title">pdf_title</code></td>
<td>
<p>PDF title.</p>
</td></tr>
<tr><td><code id="run_check_+3A_pdf_subtitle">pdf_subtitle</code></td>
<td>
<p>PDF subtitle.</p>
</td></tr>
<tr><td><code id="run_check_+3A_pdf_return">pdf_return</code></td>
<td>
<p>Text to display in PDF if check does not run.</p>
</td></tr>
<tr><td><code id="run_check_+3A_verbose">verbose</code></td>
<td>
<p>Whether to display messages while running</p>
</td></tr>
</table>


<h3>Details</h3>

<p>to look up documentation for the data checks package, please use command ??sdtmchecks
</p>


<h3>Value</h3>

<p>list with results from the check.
</p>


<h3>See Also</h3>

<p>Example programs for running data checks
<code><a href="#topic+diff_reports">diff_reports</a>()</code>,
<code><a href="#topic+report_to_xlsx">report_to_xlsx</a>()</code>,
<code><a href="#topic+run_all_checks">run_all_checks</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Assuming sdtm datasets are in your global environment

 ae &lt;- data.frame(
 USUBJID = 1:5,
 DOMAIN = c(rep("AE", 5)),
 AESEQ = 1:5,
 AESTDTC = 1:5,
 AETERM = 1:5,
 AEDECOD = 1:5,
  AESPID = c("FORMNAME-R:13/L:13XXXX",
             "FORMNAME-R:16/L:16XXXX",
             "FORMNAME-R:2/L:2XXXX",
             "FORMNAME-R:19/L:19XXXX",
             "FORMNAME-R:5/L:5XXXX"),
 stringsAsFactors = FALSE
)

ae$AEDECOD[1] = NA

# Filter sdtmchecksmeta so that only one check is present
metads &lt;- sdtmchecksmeta[sdtmchecksmeta$check=="check_ae_aedecod",] 

run_check(
  check = metads$check,
  fxn_in = metads$fxn_in,
  xls_title = metads$xls_title,
  pdf_title = metads$pdf_title,
  pdf_subtitle = metads$pdf_subtitle,
  pdf_return = metads$pdf_return,
  verbose = FALSE
)
</code></pre>

<hr>
<h2 id='sdtmchecksmeta'>Metadata for sdtmchecks</h2><span id='topic+sdtmchecksmeta'></span>

<h3>Description</h3>

<p>A dataset containing the SDTM checks in the package. The data can be used as input into functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(sdtmchecksmeta)
</code></pre>


<h3>Format</h3>

<p>A data frame with a row for each R check in the package:
</p>

<dl>
<dt>check</dt><dd><p>R check name, without .R file extension</p>
</dd>
<dt>category</dt><dd><p>Therapeutic area grouping</p>
</dd>
<dt>priority</dt><dd><p>High, Medium, Low</p>
</dd>
<dt>domains</dt><dd><p>SDTM domains used in function</p>
</dd>
<dt>xls_title</dt><dd><p>Excel title for tab</p>
</dd>
<dt>pdf_title</dt><dd><p>PDF title for check</p>
</dd>
<dt>pdf_subtitle</dt><dd><p>PDF subtitle for check, with * at the start of each subtitle line</p>
</dd>
<dt>pdf_return</dt><dd><p>PDF return message when SDTM domain not available</p>
</dd>
<dt>fxn_in</dt><dd><p>explicit string input of domain name(s) into R check function</p>
</dd>
<dt>fxn_in_roche</dt><dd><p>explicit string input of domain name(s) into R check function, Roche specific</p>
</dd>
<dt>mapping</dt><dd><p>Is this related to mapping?  i.e. Not a site issue.</p>
</dd>
<dt>exist_string</dt><dd><p>explicit string input to check existence of SDTM domain(s) before running check</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(sdtmchecksmeta)
head(sdtmchecksmeta[,1:5])

</code></pre>

<hr>
<h2 id='truncate_var_strings'>Utility function to truncate data in var_name</h2><span id='topic+truncate_var_strings'></span>

<h3>Description</h3>

<p>This function will truncate the strings in variables according to the length specified
</p>


<h3>Usage</h3>

<pre><code class='language-R'>truncate_var_strings(dt, var_name, trunc_length)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="truncate_var_strings_+3A_dt">dt</code></td>
<td>
<p>dataset e.g. AE</p>
</td></tr>
<tr><td><code id="truncate_var_strings_+3A_var_name">var_name</code></td>
<td>
<p>variable name e.g. AETERM</p>
</td></tr>
<tr><td><code id="truncate_var_strings_+3A_trunc_length">trunc_length</code></td>
<td>
<p>e.g. length the string will be truncated to e.g. 50</p>
</td></tr>
</table>


<h3>Value</h3>

<p>dataset with truncated variable
</p>


<h3>Author(s)</h3>

<p>Stella Banjo(HackR 2021)
</p>


<h3>See Also</h3>

<p>Reporting-related utility functions
<code><a href="#topic+convert_var_to_ascii">convert_var_to_ascii</a>()</code>,
<code><a href="#topic+create_R_script">create_R_script</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Testing: no truncation

AE &lt;- data.frame(
 USUBJID = 1:5,
 DOMAIN = "AE",
 AESEQ = 1:5,
 AESTDTC = 1:5,
 AETERM = 1:5,
 AEDECOD = 1:5,
 stringsAsFactors = FALSE
)

truncate_var_strings(AE, var_name = "AETERM", trunc_length = 50)

# Testing: Truncation

AE$AETERM[4] &lt;- "THIS IS A SUPER LONG AE TERM, SO LONG IN FACT THAT ITS OVER 50 CHARACTERS."
AE$AETERM[5] &lt;- "THIS AE TERM IS WAY TOO LONG FOR A NICELY FORMATTED REPORT"

truncate_var_strings(AE, var_name = "AETERM", trunc_length = 50)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
