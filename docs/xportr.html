<!DOCTYPE html><html lang="en"><head><title>Help for package xportr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {xportr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#xportr-package'><p>The <code>xportr</code> package</p></a></li>
<li><a href='#adsl_xportr'><p>Analysis Dataset Subject Level</p></a></li>
<li><a href='#dataset_spec'><p>Example Dataset Specification</p></a></li>
<li><a href='#expect_attr_width'><p>Custom expect function to test result of xportr_length</p></a></li>
<li><a href='#minimal_metadata'><p>Minimal metadata data frame mock for a ADaM dataset</p></a></li>
<li><a href='#minimal_table'><p>Minimal data frame mock of a valid ADaM dataset</p></a></li>
<li><a href='#multiple_vars_in_spec_helper'><p>Test if multiple vars in spec will result in warning message</p></a></li>
<li><a href='#multiple_vars_in_spec_helper2'><p>Test if multiple vars in spec with appropriate</p></a></li>
<li><a href='#var_spec'><p>Example Dataset Variable Specification</p></a></li>
<li><a href='#xportr'><p>Wrapper to apply all core xportr functions and write xpt</p></a></li>
<li><a href='#xportr_df_label'><p>Assign Dataset Label</p></a></li>
<li><a href='#xportr_format'><p>Assign SAS Format</p></a></li>
<li><a href='#xportr_label'><p>Assign Variable Label</p></a></li>
<li><a href='#xportr_length'><p>Assign SAS Length</p></a></li>
<li><a href='#xportr_metadata'><p>Set variable specifications and domain</p></a></li>
<li><a href='#xportr_options'><p>Get or set xportr options</p></a></li>
<li><a href='#xportr_options_list'><p>A list with all the supported options of xportr</p></a></li>
<li><a href='#xportr_order'><p>Order variables of a dataset according to Spec</p></a></li>
<li><a href='#xportr_split'><p>Deprecated - Split xpt file output</p></a></li>
<li><a href='#xportr_type'><p>Coerce variable type</p></a></li>
<li><a href='#xportr_write'><p>Write xpt v5 transport file</p></a></li>
<li><a href='#xpt_validate'><p>Validate Dataset Can be Written to xpt</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Utilities to Output CDISC SDTM/ADaM XPT Files</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Tools to build CDISC compliant data sets and check for CDISC
    compliance.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://atorus-research.github.io/xportr/">https://atorus-research.github.io/xportr/</a>,
<a href="https://github.com/atorus-research/xportr">https://github.com/atorus-research/xportr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/atorus-research/xportr/issues">https://github.com/atorus-research/xportr/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, cli, dplyr (&ge; 1.0.2), glue (&ge; 1.4.2), haven (&ge;
2.5.0), lifecycle, magrittr, purrr (&ge; 0.3.4), readr, rlang (&ge;
0.4.10), stringr (&ge; 1.4.0), tidyselect</td>
</tr>
<tr>
<td>Suggests:</td>
<td>DT, knitr, labelled, metacore, pharmaverseadam, readxl,
rmarkdown, testthat (&ge; 3.0.0), withr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-12-24 18:49:04 UTC; eli.miller</td>
</tr>
<tr>
<td>Author:</td>
<td>Eli Miller <a href="https://orcid.org/0000-0002-2127-9456"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Ben Straub [aut],
  Zelos Zhu [aut],
  Ethan Brockmann [aut],
  Vedha Viyash [aut],
  Andre Verissimo [aut],
  Sophie Shapcott [aut],
  Celine Piraux [aut],
  Kangjie Zhang [aut],
  Adrian Chan [aut],
  Sadchla Mascary [aut],
  Atorus/GSK JPT [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Eli Miller &lt;Eli.Miller@AtorusResearch.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-07 15:30:01 UTC</td>
</tr>
</table>
<hr>
<h2 id='xportr-package'>The <code>xportr</code> package</h2><span id='topic+xportr-package'></span>

<h3>Description</h3>

<p><code>xportr</code> is designed to be a clinical workflow friendly method for outputting
CDISC complaint data sets in R, to XPT version 5 files. It was designed with
options in mind to allow for flexible setting of options while allowing
projects and system administrators to set sensible defaults for their
organizations workflows. Below are a list of options that can be set to
customize how <code>xportr</code> works in your environment.
</p>


<h3>xportr options</h3>


<ul>
<li>
<p>xportr.df_domain_name - The name of the domain &quot;name&quot; column in dataset
metadata. Default: <code>"dataset"</code>

</p>
</li>
<li> 
<p>xportr.df_label - The column noting the dataset label in dataset metadata.
Default: <code>"label"</code>

</p>
</li>
<li>
<p>xportr.domain_name - The name of the domain &quot;name&quot; column in variable
metadata. Default: <code>"dataset"</code>

</p>
</li>
<li>
<p>xportr.variable_name - The name of the variable &quot;name&quot; in variable
metadata. Default: <code>"variable"</code>

</p>
</li>
<li>
<p>xportr.type_name - The name of the variable type column in variable
metadata. Default: <code>"type"</code>

</p>
</li>
<li>
<p>xportr.label - The name of the variable label column in variable metadata.
Default: <code>"label"</code>

</p>
</li>
<li>
<p>xportr.length - The name of the variable length column in variable
metadata. Default: <code>"length"</code>

</p>
</li>
<li>
<p>xportr.order_name - The name of the variable order column in variable
metadata. Default: <code>"order"</code>

</p>
</li>
<li>
<p>xportr.format_name - The name of the variable format column in variable
metadata. Default: <code>"format"</code>

</p>
</li>
<li>
<p>xportr.format_verbose - The default argument for the 'verbose' argument for
<code>xportr_format</code>. Default: <code>"none"</code>

</p>
</li>
<li>
<p>xportr.label_verbose - The default argument for the 'verbose' argument for
<code>xportr_label</code>. Default: <code>"none"</code>

</p>
</li>
<li>
<p>xportr.length_verbose - The default argument for the 'verbose' argument for
<code>xportr_length</code>. Default: <code>"none"</code>

</p>
</li>
<li>
<p>xportr.type_verbose - The default argument for the 'verbose' argument for
<code>xportr_type</code>. Default: <code>"none"</code>

</p>
</li>
<li>
<p>xportr.character_types - The default character vector used to explicitly
coerce R classes to character XPT types. Default: <code>"character"</code>

</p>
</li>
<li>
<p>xportr.character_metadata_types - The default character vector used to explicitly
coerce R classes to character XPT types. Default: <code>c("character", "char", "text", "date", "posixct", "posixt", "datetime", "time", "partialdate", "partialtime", "partialdatetime", "incompletedatetime", "durationdatetime", "intervaldatetime")</code>

</p>
</li>
<li>
<p>xportr.numeric_metadata_types - The default character vector used to explicitly
coerce R classes to numeric XPT types. Default: <code>c("integer", "numeric", "num", "float")</code>

</p>
</li>
<li>
<p>xportr.numeric_types - The default character vector used to explicitly
coerce R classes to numeric XPT types. Default:
<code>c("integer", "float", "numeric", "posixct", "posixt", "time", "date", "hms")</code>

</p>
</li></ul>



<h3>Updating Options</h3>


<ul>
<li><p>For a single session, an option can be changed by
<code style="white-space: pre;">&#8288;options(&lt;optionToChange&gt; = &lt;NewValue&gt;)&#8288;</code>.
</p>
</li>
<li><p>To change an option for a single projects across sessions in that
projects, place the options update in the <code>.Rprofile</code> in that project
directory.
</p>
</li>
<li><p>To change an option for a user across all sessions, place the options
update in the <code>.Rprofile</code> file in the users home directory.
</p>
</li>
<li><p>To change an option for all users in an R environment, place the
options update in the <code>.Rprofile.site</code> file in the R home directory.
</p>
</li></ul>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Eli Miller <a href="mailto:Eli.Miller@AtorusResearch.com">Eli.Miller@AtorusResearch.com</a> (<a href="https://orcid.org/0000-0002-2127-9456">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Ben Straub
</p>
</li>
<li><p> Zelos Zhu
</p>
</li>
<li><p> Ethan Brockmann
</p>
</li>
<li><p> Vedha Viyash
</p>
</li>
<li><p> Andre Verissimo
</p>
</li>
<li><p> Sophie Shapcott
</p>
</li>
<li><p> Celine Piraux
</p>
</li>
<li><p> Kangjie Zhang
</p>
</li>
<li><p> Adrian Chan
</p>
</li>
<li><p> Sadchla Mascary
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Atorus/GSK JPT [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://atorus-research.github.io/xportr/">https://atorus-research.github.io/xportr/</a>
</p>
</li>
<li> <p><a href="https://github.com/atorus-research/xportr">https://github.com/atorus-research/xportr</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/atorus-research/xportr/issues">https://github.com/atorus-research/xportr/issues</a>
</p>
</li></ul>


<hr>
<h2 id='adsl_xportr'>Analysis Dataset Subject Level</h2><span id='topic+adsl_xportr'></span>

<h3>Description</h3>

<p>An example dataset containing subject level data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("adsl_xportr")
</code></pre>


<h3>Format</h3>



<h4><code>adsl_xportr</code></h4>

<p>A data frame with 306 rows and 51 columns:
</p>

<dl>
<dt>STUDYID</dt><dd><p>Study Identifier</p>
</dd>
<dt>USUBJID</dt><dd><p>Unique Subject Identifier</p>
</dd>
<dt>SUBJID</dt><dd><p>Subject Identifier for the Study</p>
</dd>
<dt>RFSTDTC</dt><dd><p>Subject Reference Start Date/Time</p>
</dd>
<dt>RFENDTC</dt><dd><p>Subject Reference End Date/Time</p>
</dd>
<dt>RFXSTDTC</dt><dd><p>Date/Time of First Study Treatment</p>
</dd>
<dt>RFXENDTC</dt><dd><p>Date/Time of Last Study Treatment</p>
</dd>
<dt>RFICDTC</dt><dd><p>Date/Time of Informed Consent</p>
</dd>
<dt>RFPENDTC</dt><dd><p>Date/Time of End of Participation</p>
</dd>
<dt>DTHDTC</dt><dd><p>Date/Time of Death</p>
</dd>
<dt>DTHFL</dt><dd><p>Subject Death Flag</p>
</dd>
<dt>SITEID</dt><dd><p>Study Site Identifier</p>
</dd>
<dt>AGE</dt><dd><p>Age</p>
</dd>
<dt>AGEU</dt><dd><p>Age Units</p>
</dd>
<dt>SEX</dt><dd><p>Sex</p>
</dd>
<dt>RACE</dt><dd><p>Race</p>
</dd>
<dt>ETHNIC</dt><dd><p>Ethnicity</p>
</dd>
<dt>ARMCD</dt><dd><p>Planned Arm Code</p>
</dd>
<dt>ARM</dt><dd><p>Description of Planned Arm</p>
</dd>
<dt>ACTARMCD</dt><dd><p>Actual Arm Code</p>
</dd>
<dt>ACTARM</dt><dd><p>Description of Actual Arm</p>
</dd>
<dt>COUNTRY</dt><dd><p>Country</p>
</dd>
<dt>DMDTC</dt><dd><p>Date/Time of Collection</p>
</dd>
<dt>DMDY</dt><dd><p>Study Day of Collection</p>
</dd>
<dt>TRT01P</dt><dd><p>Planned Treatment for Period 01</p>
</dd>
<dt>TRT01A</dt><dd><p>Actual Treatment for Period 01</p>
</dd>
<dt>TRTSDTM</dt><dd><p>Datetime of First Exposure to Treatment</p>
</dd>
<dt>TRTSTMF</dt><dd><p>Time of First Exposure Imputation Flag</p>
</dd>
<dt>TRTEDTM</dt><dd><p>Datetime of Last Exposure to Treatment</p>
</dd>
<dt>TRTETMF</dt><dd><p>Time of Last Exposure Imputation Flag</p>
</dd>
<dt>TRTSDT</dt><dd><p>Date of First Exposure to Treatment</p>
</dd>
<dt>TRTEDT</dt><dd><p>Date of Last Exposure to Treatment</p>
</dd>
<dt>TRTDURD</dt><dd><p>Total Treatment Duration (Days)</p>
</dd>
<dt>SCRFDT</dt><dd><p>Screen Failure Date</p>
</dd>
<dt>EOSDT</dt><dd><p>End of Study Date</p>
</dd>
<dt>EOSSTT</dt><dd><p>End of Study Status</p>
</dd>
<dt>FRVDT</dt><dd><p>Final Retrieval Visit Date</p>
</dd>
<dt>RANDDT</dt><dd><p>Date of Randomization</p>
</dd>
<dt>DTHDT</dt><dd><p>Date of Death</p>
</dd>
<dt>DTHDTF</dt><dd><p>Date of Death Imputation Flag</p>
</dd>
<dt>DTHADY</dt><dd><p>Relative Day of Death</p>
</dd>
<dt>LDDTHELD</dt><dd><p>Elapsed Days from Last Dose to Death</p>
</dd>
<dt>LSTALVDT</dt><dd><p>Date Last Known Alive</p>
</dd>
<dt>SAFFL</dt><dd><p>Safety Population Flag</p>
</dd>
<dt>RACEGR1</dt><dd><p>Pooled Race Group 1</p>
</dd>
<dt>AGEGR1</dt><dd><p>Pooled Age Group 1</p>
</dd>
<dt>REGION1</dt><dd><p>Geographic Region 1</p>
</dd>
<dt>LDDTHGR1</dt><dd><p>Last Dose to Death - Days Elapsed Group 1</p>
</dd>
<dt>DTH30FL</dt><dd><p>Death Within 30 Days of Last Trt Flag</p>
</dd>
<dt>DTHA30FL</dt><dd><p>Death After 30 Days from Last Trt Flag</p>
</dd>
<dt>DTHB30FL</dt><dd><p>Death Within 30 Days of First Trt Flag</p>
</dd>
</dl>




<h3>Source</h3>

<p>Dataset created by <code>admiral::use_ad_template("adsl")</code>
</p>

<hr>
<h2 id='dataset_spec'>Example Dataset Specification</h2><span id='topic+dataset_spec'></span>

<h3>Description</h3>

<p>Example Dataset Specification
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("dataset_spec")
</code></pre>


<h3>Format</h3>



<h4><code>dataset_spec</code></h4>

<p>A data frame with 1 row and 9 columns:
</p>

<dl>
<dt>Dataset</dt><dd><p>chr: Dataset</p>
</dd>
<dt>Description</dt><dd><p>chr: Dataset description</p>
</dd>
<dt>Class</dt><dd><p>chr: Dataset class</p>
</dd>
<dt>Structure</dt><dd><p>lgl: Logical, indicating if there's a specific structure</p>
</dd>
<dt>Purpose</dt><dd><p>chr: Purpose of the dataset</p>
</dd>
<dt>Key, Variables</dt><dd><p>chr: Join Key variables in the dataset</p>
</dd>
<dt>Repeating</dt><dd><p>chr: Indicates if the dataset is repeating</p>
</dd>
<dt>Reference Data</dt><dd><p>lgl: Reference Data</p>
</dd>
<dt>Comment</dt><dd><p>chr: Additional comment</p>
</dd>
</dl>



<hr>
<h2 id='expect_attr_width'>Custom expect function to test result of xportr_length</h2><span id='topic+expect_attr_width'></span>

<h3>Description</h3>

<p>Custom expect function to test result of xportr_length
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expect_attr_width(result, metadata_length)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="expect_attr_width_+3A_result">result</code></td>
<td>
<p>data.frame with <code>width</code> attribute on its columns.</p>
</td></tr>
<tr><td><code id="expect_attr_width_+3A_metadata_length">metadata_length</code></td>
<td>
<p>vector of numeric with expected lengths for each
column width.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The first argument, invisibly.
</p>

<hr>
<h2 id='minimal_metadata'>Minimal metadata data frame mock for a ADaM dataset</h2><span id='topic+minimal_metadata'></span>

<h3>Description</h3>

<p>Minimal metadata data frame mock for a ADaM dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>minimal_metadata(
  dataset = FALSE,
  length = FALSE,
  label = FALSE,
  type = FALSE,
  format = FALSE,
  order = FALSE,
  dataset_name = "adsl",
  var_names = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="minimal_metadata_+3A_dataset">dataset</code></td>
<td>
<p>Flag that indicates that the <code>dataset</code> column should
be included.</p>
</td></tr>
<tr><td><code id="minimal_metadata_+3A_length">length</code></td>
<td>
<p>Flag that indicates that the <code>length</code> column should
be included.</p>
</td></tr>
<tr><td><code id="minimal_metadata_+3A_label">label</code></td>
<td>
<p>Flag that indicates that the <code>label</code> column should
be included.</p>
</td></tr>
<tr><td><code id="minimal_metadata_+3A_type">type</code></td>
<td>
<p>Flag that indicates that the <code>type</code> column should
be included.</p>
</td></tr>
<tr><td><code id="minimal_metadata_+3A_format">format</code></td>
<td>
<p>Flag that indicates that the <code>format</code> column should
be included.</p>
</td></tr>
<tr><td><code id="minimal_metadata_+3A_order">order</code></td>
<td>
<p>Flag that indicates that the <code>order</code> column should
be included.</p>
</td></tr>
<tr><td><code id="minimal_metadata_+3A_dataset_name">dataset_name</code></td>
<td>
<p>String with name of domain.</p>
</td></tr>
<tr><td><code id="minimal_metadata_+3A_var_names">var_names</code></td>
<td>
<p>Character vector that defines which variables (rows)
to keep</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A metadata data.frame
</p>

<hr>
<h2 id='minimal_table'>Minimal data frame mock of a valid ADaM dataset</h2><span id='topic+minimal_table'></span>

<h3>Description</h3>

<p>This function is only used in tests.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>minimal_table(n_rows = 3, cols = c("x", "y"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="minimal_table_+3A_n_rows">n_rows</code></td>
<td>
<p>Numeric value that indicates the number of rows of the data
frame</p>
</td></tr>
<tr><td><code id="minimal_table_+3A_cols">cols</code></td>
<td>
<p>Vector of characters that indicates which columns to return.
By default only <code>x</code> and <code>y</code> are returned with numeric contents.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame mimicking a valid ADaM dataset.
</p>

<hr>
<h2 id='multiple_vars_in_spec_helper'>Test if multiple vars in spec will result in warning message</h2><span id='topic+multiple_vars_in_spec_helper'></span>

<h3>Description</h3>

<p>Test if multiple vars in spec will result in warning message
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multiple_vars_in_spec_helper(fun)
</code></pre>

<hr>
<h2 id='multiple_vars_in_spec_helper2'>Test if multiple vars in spec with appropriate</h2><span id='topic+multiple_vars_in_spec_helper2'></span>

<h3>Description</h3>

<p>Test if multiple vars in spec with appropriate
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multiple_vars_in_spec_helper2(fun)
</code></pre>

<hr>
<h2 id='var_spec'>Example Dataset Variable Specification</h2><span id='topic+var_spec'></span>

<h3>Description</h3>

<p>Example Dataset Variable Specification
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("var_spec")
</code></pre>


<h3>Format</h3>



<h4><code>var_spec</code></h4>

<p>A data frame with 216 rows and 19 columns:
</p>

<dl>
<dt>Order</dt><dd><p>Order of variable</p>
</dd>
<dt>Dataset</dt><dd><p>Dataset</p>
</dd>
<dt>Variable</dt><dd><p>Variable</p>
</dd>
<dt>Label</dt><dd><p>Variable Label</p>
</dd>
<dt>Data Type</dt><dd><p>Data Type</p>
</dd>
<dt>Length</dt><dd><p>Variable Length</p>
</dd>
<dt>Significant Digits</dt><dd><p>Significant Digits</p>
</dd>
<dt>Format</dt><dd><p>Variable Format</p>
</dd>
<dt>Mandatory</dt><dd><p>Mandatory Variable Flag</p>
</dd>
<dt>Assigned Value</dt><dd><p>Variable Assigned Value</p>
</dd>
<dt>Codelist</dt><dd><p>Variable Codelist</p>
</dd>
<dt>Common</dt><dd><p>Common Variable Flag</p>
</dd>
<dt>Origin</dt><dd><p>Variable Origin</p>
</dd>
<dt>Pages</dt><dd><p>Pages</p>
</dd>
<dt>Method</dt><dd><p>Variable Method</p>
</dd>
<dt>Predecessor</dt><dd><p>Variable Predecessor</p>
</dd>
<dt>Role</dt><dd><p>Variable Role</p>
</dd>
<dt>Comment</dt><dd><p>Comment</p>
</dd>
<dt>Developer Notes</dt><dd><p>Developer Notes</p>
</dd>
</dl>



<hr>
<h2 id='xportr'>Wrapper to apply all core xportr functions and write xpt</h2><span id='topic+xportr'></span>

<h3>Description</h3>

<p>Wrapper to apply all core xportr functions and write xpt
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xportr(
  .df,
  var_metadata = NULL,
  df_metadata = NULL,
  domain = NULL,
  verbose = NULL,
  path,
  strict_checks = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xportr_+3A_.df">.df</code></td>
<td>
<p>A data frame of CDISC standard.</p>
</td></tr>
<tr><td><code id="xportr_+3A_var_metadata">var_metadata</code></td>
<td>
<p>A data frame containing variable level metadata</p>
</td></tr>
<tr><td><code id="xportr_+3A_df_metadata">df_metadata</code></td>
<td>
<p>A data frame containing dataset level metadata.</p>
</td></tr>
<tr><td><code id="xportr_+3A_domain">domain</code></td>
<td>
<p>Appropriate CDISC dataset name, e.g. ADAE, DM. Used to subset
the metadata object.</p>
</td></tr>
<tr><td><code id="xportr_+3A_verbose">verbose</code></td>
<td>
<p>The action this function takes when an action is taken on the
dataset or function validation finds an issue. See 'Messaging' section for
details. Options are 'stop', 'warn', 'message', and 'none'</p>
</td></tr>
<tr><td><code id="xportr_+3A_path">path</code></td>
<td>
<p>Path where transport file will be written. File name sans will be
used as <code>xpt</code> name.</p>
</td></tr>
<tr><td><code id="xportr_+3A_strict_checks">strict_checks</code></td>
<td>
<p>If TRUE, xpt validation will report errors and not write
out the dataset. If FALSE, xpt validation will report warnings and continue
with writing out the dataset. Defaults to FALSE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the input dataframe invisibly
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("adsl_xportr", "dataset_spec", "var_spec")
adsl &lt;- adsl_xportr

library(magrittr)
test_dir &lt;- tempdir()

pipeline_path &lt;- file.path(test_dir, "adslpipe.xpt")
xportr_path &lt;- file.path(test_dir, "adslxptr.xpt")

dataset_spec_low &lt;- setNames(dataset_spec, tolower(names(dataset_spec)))
names(dataset_spec_low)[[2]] &lt;- "label"

var_spec_low &lt;- setNames(var_spec, tolower(names(var_spec)))
names(var_spec_low)[[5]] &lt;- "type"

adsl %&gt;%
  xportr_metadata(var_spec_low, "ADSL", verbose = "none") %&gt;%
  xportr_type() %&gt;%
  xportr_length() %&gt;%
  xportr_label() %&gt;%
  xportr_order() %&gt;%
  xportr_format() %&gt;%
  xportr_df_label(dataset_spec_low) %&gt;%
  xportr_write(pipeline_path)

# `xportr()` can be used to apply a whole pipeline at once
xportr(
  adsl,
  var_metadata = var_spec_low,
  df_metadata = dataset_spec_low,
  domain = "ADSL",
  verbose = "none",
  path = xportr_path
)

</code></pre>

<hr>
<h2 id='xportr_df_label'>Assign Dataset Label</h2><span id='topic+xportr_df_label'></span>

<h3>Description</h3>

<p>Assigns dataset label from a dataset level metadata to a given data frame.
This is stored in the 'label' attribute of the dataframe.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xportr_df_label(.df, metadata = NULL, domain = NULL, metacore = deprecated())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xportr_df_label_+3A_.df">.df</code></td>
<td>
<p>A data frame of CDISC standard.</p>
</td></tr>
<tr><td><code id="xportr_df_label_+3A_metadata">metadata</code></td>
<td>
<p>A data frame containing dataset. See 'Metadata' section for
details.</p>
</td></tr>
<tr><td><code id="xportr_df_label_+3A_domain">domain</code></td>
<td>
<p>Appropriate CDISC dataset name, e.g. ADAE, DM. Used to subset
the metadata object.</p>
</td></tr>
<tr><td><code id="xportr_df_label_+3A_metacore">metacore</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Previously used to pass
metadata now renamed with <code>metadata</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame with label attributes.
</p>


<h3>Metadata</h3>

<p>The argument passed in the 'metadata' argument can either
be a metacore object, or a data.frame containing the data listed below. If
metacore is used, no changes to options are required.
</p>
<p>For data.frame 'metadata' arguments two columns must be present:
</p>

<ol>
<li><p> Domain Name - passed as the 'xportr.df_domain_name' option. Default:
&quot;dataset&quot;. This is the column subset by the 'domain' argument in the
function.
</p>
</li>
<li><p> Label Name - passed as the 'xportr.df_label' option. Default:
&quot;label&quot;. Character values to update the 'label' attribute of the
dataframe This is passed to <code>haven::write_xpt</code> to note the label.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>adsl &lt;- data.frame(
  USUBJID = c(1001, 1002, 1003),
  SITEID = c(001, 002, 003),
  AGE = c(63, 35, 27),
  SEX = c("M", "F", "M")
)

metadata &lt;- data.frame(
  dataset = c("adsl", "adae"),
  label = c("Subject-Level Analysis", "Adverse Events Analysis")
)

adsl &lt;- xportr_df_label(adsl, metadata, domain = "adsl")
</code></pre>

<hr>
<h2 id='xportr_format'>Assign SAS Format</h2><span id='topic+xportr_format'></span>

<h3>Description</h3>

<p>Assigns a SAS format from a variable level metadata to a given data frame. If
no format is found for a given variable, it is set as an empty character
vector. This is stored in the '<code>format.sas</code>' attribute.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xportr_format(
  .df,
  metadata = NULL,
  domain = NULL,
  verbose = NULL,
  metacore = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xportr_format_+3A_.df">.df</code></td>
<td>
<p>A data frame of CDISC standard.</p>
</td></tr>
<tr><td><code id="xportr_format_+3A_metadata">metadata</code></td>
<td>
<p>A data frame containing variable level metadata. See
'Metadata' section for details.</p>
</td></tr>
<tr><td><code id="xportr_format_+3A_domain">domain</code></td>
<td>
<p>Appropriate CDISC dataset name, e.g. ADAE, DM. Used to subset
the metadata object.</p>
</td></tr>
<tr><td><code id="xportr_format_+3A_verbose">verbose</code></td>
<td>
<p>The action this function takes when an action is taken on the
dataset or function validation finds an issue. See 'Messaging' section for
details. Options are 'stop', 'warn', 'message', and 'none'</p>
</td></tr>
<tr><td><code id="xportr_format_+3A_metacore">metacore</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Previously used to pass
metadata now renamed with <code>metadata</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame with <code>SASformat</code> attributes for each variable.
</p>


<h3>Format Checks</h3>

<p>This function carries out a series of basic
checks to ensure the formats being applied make sense.
</p>
<p>Note, the 'type' of message that is generated will depend on the value
passed to the <code>verbose</code> argument: with 'stop' producing an error, 'warn'
producing a warning, or 'message' producing a message. A value of 'none'
will not output any messages.
</p>

<ol>
<li><p> If the variable has a suffix of <code>DT</code>, <code>DTM</code>, <code>TM</code> (indicating a
numeric date/time variable) then a message will be shown if there is
no format associated with it.
</p>
</li>
<li><p> If a variable is character then a message will be shown if there is
no <code>$</code> prefix in the associated format.
</p>
</li>
<li><p> If a variable is character then a message will be shown if the
associated format has greater than 31 characters (excluding the <code>$</code>).
</p>
</li>
<li><p> If a variable is numeric then a message will be shown if there is a
<code>$</code> prefix in the associated format.
</p>
</li>
<li><p> If a variable is numeric then a message will be shown if the
associated format has greater than 32 characters.
</p>
</li>
<li><p> All formats will be checked against a list of formats considered
'standard' as part of an ADaM dataset. Note, however, this list is not
exhaustive (it would not be feasible to check all the functions
within the scope of this package). If the format is not found in the
'standard' list, then a message is created advising the user to
check.
</p>
</li></ol>

<table>
<tr>
 <td style="text-align: left;">
   <strong>Format Name</strong> </td><td style="text-align: left;"> <strong>w Values</strong> </td><td style="text-align: left;"> <strong>d Values</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
   w.d </td><td style="text-align: left;"> 1 - 32 </td><td style="text-align: left;"> ., 0 - 31 </td>
</tr>
<tr>
 <td style="text-align: left;">
   $w. </td><td style="text-align: left;"> 1 - 200 </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   DATEw. </td><td style="text-align: left;"> ., 5 - 11 </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   DATETIMEw. </td><td style="text-align: left;"> 7 - 40 </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   DDMMYYw. </td><td style="text-align: left;"> ., 2 - 10 </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   HHMM. </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   MMDDYYw. </td><td style="text-align: left;"> ., 2 - 10 </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   TIMEw. </td><td style="text-align: left;"> ., 2 - 20 </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   WEEKDATEw. </td><td style="text-align: left;"> ., 3 - 37 </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   YYMMDDw. </td><td style="text-align: left;"> ., 2 - 10 </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   B8601DAw. </td><td style="text-align: left;"> ., 8 - 10 </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   B8601DTw.d </td><td style="text-align: left;"> ., 15 - 26 </td><td style="text-align: left;"> ., 0 - 6 </td>
</tr>
<tr>
 <td style="text-align: left;">
   B8601TM. </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   IS8601DA. </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   IS8601TM. </td><td style="text-align: left;">  </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   E8601DAw. </td><td style="text-align: left;"> ., 10 </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   E8601DNw. </td><td style="text-align: left;"> ., 10 </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   E8601DTw.d </td><td style="text-align: left;"> ., 16 - 26 </td><td style="text-align: left;"> ., 0 - 6 </td>
</tr>
<tr>
 <td style="text-align: left;">
   E8601DXw. </td><td style="text-align: left;"> ., 20 - 35 </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   E8601LXw. </td><td style="text-align: left;"> ., 20 - 35 </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   E8601LZw. </td><td style="text-align: left;"> ., 9 - 20 </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   E8601TMw.d </td><td style="text-align: left;"> ., 8 - 15 </td><td style="text-align: left;"> ., 0 - 6 </td>
</tr>
<tr>
 <td style="text-align: left;">
   E8601TXw. </td><td style="text-align: left;"> ., 9 - 20 </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
   E8601TZw.d </td><td style="text-align: left;"> ., 9 - 20 </td><td style="text-align: left;"> ., 0 - 6 </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Metadata</h3>

<p>The argument passed in the 'metadata' argument can either
be a metacore object, or a data.frame containing the data listed below. If
metacore is used, no changes to options are required.
</p>
<p>For data.frame 'metadata' arguments three columns must be present:
</p>

<ol>
<li><p> Domain Name - passed as the 'xportr.domain_name' option. Default:
&quot;dataset&quot;. This is the column subset by the 'domain' argument in the
function.
</p>
</li>
<li><p> Format Name - passed as the 'xportr.format_name' option. Default:
&quot;format&quot;. Character values to update the '<code>format.sas</code>' attribute of the
column. This is passed to <code>haven::write</code> to note the format.
</p>
</li>
<li><p> Variable Name - passed as the 'xportr.variable_name' option. Default:
&quot;variable&quot;. This is used to match columns in '.df' argument and the
metadata.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>adsl &lt;- data.frame(
  USUBJID = c(1001, 1002, 1003),
  BRTHDT = c(1, 1, 2)
)

metadata &lt;- data.frame(
  dataset = c("adsl", "adsl"),
  variable = c("USUBJID", "BRTHDT"),
  format = c(NA, "DATE9.")
)

adsl &lt;- xportr_format(adsl, metadata, domain = "adsl")
</code></pre>

<hr>
<h2 id='xportr_label'>Assign Variable Label</h2><span id='topic+xportr_label'></span>

<h3>Description</h3>

<p>Assigns variable label from a variable level metadata to a given data frame.
This function will give detect if a label is greater than
40 characters which isn't allowed in XPT v5. If labels aren't present for the
variable it will be assigned an empty character value. Labels are stored in
the 'label' attribute of the column.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xportr_label(
  .df,
  metadata = NULL,
  domain = NULL,
  verbose = NULL,
  metacore = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xportr_label_+3A_.df">.df</code></td>
<td>
<p>A data frame of CDISC standard.</p>
</td></tr>
<tr><td><code id="xportr_label_+3A_metadata">metadata</code></td>
<td>
<p>A data frame containing variable level metadata. See
'Metadata' section for details.</p>
</td></tr>
<tr><td><code id="xportr_label_+3A_domain">domain</code></td>
<td>
<p>Appropriate CDISC dataset name, e.g. ADAE, DM. Used to subset
the metadata object.</p>
</td></tr>
<tr><td><code id="xportr_label_+3A_verbose">verbose</code></td>
<td>
<p>The action this function takes when an action is taken on the
dataset or function validation finds an issue. See 'Messaging' section for
details. Options are 'stop', 'warn', 'message', and 'none'</p>
</td></tr>
<tr><td><code id="xportr_label_+3A_metacore">metacore</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Previously used to pass
metadata now renamed with <code>metadata</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame with label attributes for each variable.
</p>


<h3>Messaging</h3>

<p><code>label_log()</code> is the primary messaging tool for
<code>xportr_label()</code>. If there are any columns present in the '.df' that are not
noted in the metadata, they cannot be assigned a label and a message will
be generated noting the number or variables that have not been assigned a
label.
</p>
<p>If variables were not found in the metadata and the value passed to the
'verbose' argument is 'stop', 'warn', or 'message', a message will be
generated detailing the variables that were missing in metadata.
</p>


<h3>Metadata</h3>

<p>The argument passed in the 'metadata' argument can either
be a metacore object, or a data.frame containing the data listed below. If
metacore is used, no changes to options are required.
</p>
<p>For data.frame 'metadata' arguments three columns must be present:
</p>

<ol>
<li><p> Domain Name - passed as the 'xportr.domain_name' option. Default:
&quot;dataset&quot;. This is the column subset by the 'domain' argument in the
function.
</p>
</li>
<li><p> Variable Name - passed as the 'xportr.variable_name' option.
Default: &quot;variable&quot;. This is used to match columns in '.df' argument and
the metadata.
</p>
</li>
<li><p> Variable Label - passed as the 'xportr.label' option.
Default: &quot;label&quot;. These character values to update the 'label' attribute of
the column. This is passed to <code>haven::write</code> to note the label.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>adsl &lt;- data.frame(
  USUBJID = c(1001, 1002, 1003),
  SITEID = c(001, 002, 003),
  AGE = c(63, 35, 27),
  SEX = c("M", "F", "M")
)

metadata &lt;- data.frame(
  dataset = "adsl",
  variable = c("USUBJID", "SITEID", "AGE", "SEX"),
  label = c("Unique Subject Identifier", "Study Site Identifier", "Age", "Sex")
)

adsl &lt;- xportr_label(adsl, metadata, domain = "adsl")
</code></pre>

<hr>
<h2 id='xportr_length'>Assign SAS Length</h2><span id='topic+xportr_length'></span>

<h3>Description</h3>

<p>Assigns the SAS length to a specified data frame, either from a metadata object
or based on the calculated maximum data length. If a length isn't present for
a variable the length value is set to maximum data length for character columns, and 8
for non-character columns. This value is stored in the 'width' attribute of the column.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xportr_length(
  .df,
  metadata = NULL,
  domain = NULL,
  verbose = NULL,
  length_source = c("metadata", "data"),
  metacore = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xportr_length_+3A_.df">.df</code></td>
<td>
<p>A data frame of CDISC standard.</p>
</td></tr>
<tr><td><code id="xportr_length_+3A_metadata">metadata</code></td>
<td>
<p>A data frame containing variable level metadata. See
'Metadata' section for details.</p>
</td></tr>
<tr><td><code id="xportr_length_+3A_domain">domain</code></td>
<td>
<p>Appropriate CDISC dataset name, e.g. ADAE, DM. Used to subset
the metadata object.</p>
</td></tr>
<tr><td><code id="xportr_length_+3A_verbose">verbose</code></td>
<td>
<p>The action this function takes when an action is taken on the
dataset or function validation finds an issue. See 'Messaging' section for
details. Options are 'stop', 'warn', 'message', and 'none'</p>
</td></tr>
<tr><td><code id="xportr_length_+3A_length_source">length_source</code></td>
<td>
<p>Choose the assigned length from either metadata or data.
</p>
<p>If <code>"metadata"</code> is specified, the assigned length is from the metadata length.
If <code>"data"</code> is specified, the assigned length is determined by the calculated maximum data length.
</p>
<p><em>Permitted Values</em>: <code>"metadata"</code>, <code>"data"</code></p>
</td></tr>
<tr><td><code id="xportr_length_+3A_metacore">metacore</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Previously used to pass
metadata now renamed with <code>metadata</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame with SAS default length attributes for each variable.
</p>


<h3>Messaging</h3>

<p><code>length_log</code> is the primary messaging tool for
<code>xportr_length</code>. If there are any columns present in the '.df' that are not
noted in the metadata, they cannot be assigned a length and a message will
be generated noting the number or variables that have not been assigned a
length.
</p>
<p>If variables were not found in the metadata and the value passed to the
'verbose' argument is 'stop', 'warn', or 'message', a message will be
generated detailing the variables that were missing in the metadata.
</p>


<h3>Metadata</h3>

<p>The argument passed in the 'metadata' argument can either
be a <code>{metacore}</code> object, or a data.frame containing the data listed below. If
metacore is used, no changes to options are required.
</p>
<p>For data.frame 'metadata' arguments three columns must be present:
</p>

<ol>
<li><p> Domain Name - passed as the 'xportr.domain_name' option. Default:
&quot;dataset&quot;. This is the column subset by the 'domain' argument in the
function.
</p>
</li>
<li><p> Variable Name - passed as the 'xportr.variable_name' option.
Default: &quot;variable&quot;. This is used to match columns in '.df' argument and
the metadata.
</p>
</li>
<li><p> Variable Label - passed as the 'xportr.length' option.
Default: &quot;length&quot;. These numeric values to update the 'width' attribute of
the column. This is passed to <code>haven::write</code> to note the variable length.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>adsl &lt;- data.frame(
  USUBJID = c(1001, 1002, 1003),
  BRTHDT = c(1, 1, 2)
)

metadata &lt;- data.frame(
  dataset = c("adsl", "adsl"),
  variable = c("USUBJID", "BRTHDT"),
  length = c(10, 8)
)

adsl &lt;- xportr_length(adsl, metadata, domain = "adsl", length_source = "metadata")
</code></pre>

<hr>
<h2 id='xportr_metadata'>Set variable specifications and domain</h2><span id='topic+xportr_metadata'></span>

<h3>Description</h3>

<p>Sets metadata and/or domain for a dataset in a way that can be accessed by
other xportr functions. If used at the start of an xportr pipeline, it
removes the need to set metadata and domain at each step individually. For
details on the format of the metadata, see the 'Metadata' section for each
function in question.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xportr_metadata(.df, metadata = NULL, domain = NULL, verbose = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xportr_metadata_+3A_.df">.df</code></td>
<td>
<p>A data frame of CDISC standard.</p>
</td></tr>
<tr><td><code id="xportr_metadata_+3A_metadata">metadata</code></td>
<td>
<p>A data frame containing variable level metadata. See
'Metadata' section for details.</p>
</td></tr>
<tr><td><code id="xportr_metadata_+3A_domain">domain</code></td>
<td>
<p>Appropriate CDISC dataset name, e.g. ADAE, DM. Used to subset
the metadata object.</p>
</td></tr>
<tr><td><code id="xportr_metadata_+3A_verbose">verbose</code></td>
<td>
<p>The action this function takes when an action is taken on the
dataset or function validation finds an issue. See 'Messaging' section for
details. Options are 'stop', 'warn', 'message', and 'none'</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>.df</code> dataset with metadata and domain attributes set
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
metadata &lt;- data.frame(
  dataset = "test",
  variable = c("Subj", "Param", "Val", "NotUsed"),
  type = c("numeric", "character", "numeric", "character"),
  format = NA,
  order = c(1, 3, 4, 2)
)

adlb &lt;- data.frame(
  Subj = as.character(123, 456, 789),
  Different = c("a", "b", "c"),
  Val = c("1", "2", "3"),
  Param = c("param1", "param2", "param3")
)

xportr_metadata(adlb, metadata, "test")

library(magrittr)

adlb %&gt;%
  xportr_metadata(metadata, "test") %&gt;%
  xportr_type() %&gt;%
  xportr_order()
</code></pre>

<hr>
<h2 id='xportr_options'>Get or set xportr options</h2><span id='topic+xportr_options'></span>

<h3>Description</h3>

<p>There are two mechanisms for working with options for xportr. One is the
<code><a href="base.html#topic+options">options()</a></code> function, which is part of base R, and the other is the
<code>xportr_options()</code> function, which is in the xportr package. The reason for
these two mechanisms is has to do with legacy code and scoping.
</p>
<p>The <code><a href="base.html#topic+options">options()</a></code> function sets options globally, for the duration of the R
process. The <code><a href="base.html#topic+getOption">getOption()</a></code> function retrieves the value of an option. All
xportr related options of this type are prefixed with <code>"xportr."</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xportr_options(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xportr_options_+3A_...">...</code></td>
<td>
<p>Options to set, with the form <code>name = value</code> or a character vector of option names.</p>
</td></tr>
</table>


<h3>Options with <code>options()</code></h3>


<dl>
<dt>xportr.df_domain_name</dt><dd><p>defaults to <code>"dataset"</code><br />
The name of the domain &quot;name&quot; column in dataset metadata.</p>
</dd>
<dt>xportr.df_label</dt><dd><p>defaults to <code>"label"</code><br />
The column noting the dataset label in dataset metadata.</p>
</dd>
<dt>xportr.domain_name</dt><dd><p>defaults to <code>"dataset"</code><br />
The name of the domain &quot;name&quot; column in variable metadata.</p>
</dd>
<dt>xportr.variable_name</dt><dd><p>defaults to <code>"variable"</code><br />
The name of the variable &quot;name&quot; in variable metadata.</p>
</dd>
<dt>xportr.type_name</dt><dd><p>defaults to <code>"type"</code><br />
The name of the variable type column in variable metadata.</p>
</dd>
<dt>xportr.label</dt><dd><p>defaults to <code>"label"</code><br />
The name of the variable label column in variable metadata.</p>
</dd>
<dt>xportr.length</dt><dd><p>defaults to <code>"length"</code><br />
The name of the variable length column in variable metadata.</p>
</dd>
<dt>xportr.order_name</dt><dd><p>defaults to <code>"order"</code><br />
The name of the variable order column in variable metadata.</p>
</dd>
<dt>xportr.format_name</dt><dd><p>defaults to <code>"format"</code><br />
The name of the variable format column in variable metadata.</p>
</dd>
<dt>xportr.format_verbose</dt><dd><p>defaults to <code>"none"</code><br />
The default argument for the 'verbose' argument for <code>xportr_format</code>.</p>
</dd>
<dt>xportr.label_verbose</dt><dd><p>defaults to <code>"none"</code><br />
The default argument for the 'verbose' argument for <code>xportr_label</code>.</p>
</dd>
<dt>xportr.length_verbose</dt><dd><p>defaults to <code>"none"</code><br />
The default argument for the 'verbose' argument for <code>xportr_length</code>.</p>
</dd>
<dt>xportr.type_verbose</dt><dd><p>defaults to <code>"label"</code><br />
The default argument for the 'verbose' argument for <code>xportr_type</code>.</p>
</dd>
<dt>xportr.character_types</dt><dd><p>defaults to <code>"character"</code><br />
The default character vector used to explicitly coerce R classes to character XPT types.</p>
</dd>
<dt>xportr.character_metadata_types</dt><dd><p>defaults to <code>c("character", "char", "text", "date", "posixct", "posixt", "datetime", "time", "partialdate", "partialtime", "partialdatetime", "incompletedatetime", "durationdatetime", "intervaldatetime")</code><br />
The default character vector used to explicitly coerce R classes to character XPT types.</p>
</dd>
<dt>xportr.numeric_metadata_types</dt><dd><p>defaults to <code>c("integer", "numeric", "num", "float")</code><br />
The default character vector used to explicitly coerce R classes to numeric XPT types.</p>
</dd>
<dt>xportr.numeric_types</dt><dd><p>defaults to <code>c("integer", "float", "numeric", "posixct", "posixt", "time", "date", "hms")</code><br />
The default character vector used to explicitly coerce R classes to numeric XPT types.</p>
</dd>
</dl>



<h3>Options with <code>xportr_options()</code></h3>

<p>Alternative to the <code>options()</code>, the <code>xportr_options()</code> function can be used to set the options.
The <code>xportr_options()</code> function also returns the current options when a character vector of
the options keys are passed into it. If nothing is passed into it, it returns the state of all xportr options.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>xportr_options("xportr.df_label")
xportr_options(xportr.df_label = "data_label", xportr.label = "custom_label")
xportr_options(c("xportr.label", "xportr.df_label"))
xportr_options()
</code></pre>

<hr>
<h2 id='xportr_options_list'>A list with all the supported options of xportr</h2><span id='topic+xportr_options_list'></span>

<h3>Description</h3>

<p>An internal list with all the supported options of xportr with defaults
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xportr_options_list
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 17.
</p>

<hr>
<h2 id='xportr_order'>Order variables of a dataset according to Spec</h2><span id='topic+xportr_order'></span>

<h3>Description</h3>

<p>The <code>dplyr::arrange()</code> function is used to order the columns of the dataframe.
Any variables that are missing an order value are appended to the end of the dataframe
after all of the variables that have an order.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xportr_order(
  .df,
  metadata = NULL,
  domain = NULL,
  verbose = NULL,
  metacore = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xportr_order_+3A_.df">.df</code></td>
<td>
<p>A data frame of CDISC standard.</p>
</td></tr>
<tr><td><code id="xportr_order_+3A_metadata">metadata</code></td>
<td>
<p>A data frame containing variable level metadata. See
'Metadata' section for details.</p>
</td></tr>
<tr><td><code id="xportr_order_+3A_domain">domain</code></td>
<td>
<p>Appropriate CDISC dataset name, e.g. ADAE, DM. Used to subset
the metadata object.</p>
</td></tr>
<tr><td><code id="xportr_order_+3A_verbose">verbose</code></td>
<td>
<p>The action this function takes when an action is taken on the
dataset or function validation finds an issue. See 'Messaging' section for
details. Options are 'stop', 'warn', 'message', and 'none'</p>
</td></tr>
<tr><td><code id="xportr_order_+3A_metacore">metacore</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Previously used to pass
metadata now renamed with <code>metadata</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Dataframe that has been re-ordered according to spec
</p>


<h3>Messaging</h3>

<p><code>var_ord_msg()</code> is the primary messaging tool for
<code>xportr_order()</code>. There are two primary messages that are output from
<code>var_ord_msg()</code>. The first is the &quot;moved&quot; variables. These are the variables
that were not found in the metadata file and moved to the end of the
dataset. A message will be generated noting the number, if any, of
variables that were moved to the end of the dataset. If any variables were
moved, and the 'verbose' argument is 'stop', 'warn', or 'message', a
message will be generated detailing the variables that were moved.
</p>
<p>The second primary message is the number of variables that were in the
dataset, but not in the correct order. A message will be generated noting
the number, if any, of variables that have been reordered. If any variables
were reordered, and the 'verbose' argument is 'stop', 'warn', or 'message',
a message will be generated detailing the variables that were reordered.
</p>


<h3>Metadata</h3>

<p>The argument passed in the 'metadata' argument can either
be a metacore object, or a data.frame containing the data listed below. If
metacore is used, no changes to options are required.
</p>
<p>For data.frame 'metadata' arguments three columns must be present:
</p>

<ol>
<li><p> Domain Name - passed as the 'xportr.domain_name' option. Default:
&quot;dataset&quot;. This is the column subset by the 'domain' argument in the
function.
</p>
</li>
<li><p> Variable Name - passed as the 'xportr.variable_name' option.
Default: &quot;variable&quot;. This is used to match columns in '.df' argument and
the metadata.
</p>
</li>
<li><p> Variable Order - passed as the 'xportr.order_name' option.
Default: &quot;order&quot;. These values used to arrange the order of the variables.
If the values of order metadata are not numeric, they will be coerced to
prevent alphabetical sorting of numeric values.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>adsl &lt;- data.frame(
  BRTHDT = c(1, 1, 2),
  STUDYID = c("mid987650", "mid987650", "mid987650"),
  TRT01A = c("Active", "Active", "Placebo"),
  USUBJID = c(1001, 1002, 1003)
)

metadata &lt;- data.frame(
  dataset = c("adsl", "adsl", "adsl", "adsl"),
  variable = c("STUDYID", "USUBJID", "TRT01A", "BRTHDT"),
  order = 1:4
)

adsl &lt;- xportr_order(adsl, metadata, domain = "adsl")
</code></pre>

<hr>
<h2 id='xportr_split'>Deprecated - Split xpt file output</h2><span id='topic+xportr_split'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>
<p>This function is <em>deprecated</em>. Please use the argument
<code>max_gb_size</code> in the function xportr_write()' instead.
</p>
<p>Per the FDA Study Data Technical Conformance
Guide(https://www.fda.gov/media/88173/download) section 3.3.2, dataset files
sizes shouldn't exceed 5 GB. If datasets are large enough, they should be
split based on a variable. For example, laboratory readings in <code>ADLB</code> can be
split by <code>LBCAT</code> to split up hematology and chemistry data.
</p>
<p>This function will tell <code>xportr_write()</code> to split the data frame based on the
variable passed in <code>split_by</code>. When written, the file name will be prepended
with a number for uniqueness. These files should be noted in the Reviewer Guides per
CDISC guidance to note how you split your files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xportr_split(.df, split_by = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xportr_split_+3A_.df">.df</code></td>
<td>
<p>A data frame of CDISC standard.</p>
</td></tr>
<tr><td><code id="xportr_split_+3A_split_by">split_by</code></td>
<td>
<p>A quoted variable that will be passed to <code>base::split()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with an additional attribute added so <code>xportr_write()</code>
knows how to split the data frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
adlb &lt;- data.frame(
  USUBJID = c(1001, 1002, 1003),
  LBCAT = c("HEMATOLOGY", "HEMATOLOGY", "CHEMISTRY")
)

adlb &lt;- xportr_split(adlb, "LBCAT")
</code></pre>

<hr>
<h2 id='xportr_type'>Coerce variable type</h2><span id='topic+xportr_type'></span>

<h3>Description</h3>

<p>XPT v5 datasets only have data types of character and numeric. <code>xportr_type()</code>
attempts to collapse R classes to those two XPT types. The
'xportr.character_types' option is used to explicitly collapse the class of a
column to character using <code>as.character()</code>. Similarly, 'xportr.numeric_types'
will collapse a column to a numeric type. (See <code>xportr_options()</code> for default
values of these options.) If no type is passed for a variable, it is assumed
to be numeric and coerced with <code>as.numeric()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xportr_type(
  .df,
  metadata = NULL,
  domain = NULL,
  verbose = NULL,
  metacore = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xportr_type_+3A_.df">.df</code></td>
<td>
<p>A data frame of CDISC standard.</p>
</td></tr>
<tr><td><code id="xportr_type_+3A_metadata">metadata</code></td>
<td>
<p>A data frame containing variable level metadata. See
'Metadata' section for details.</p>
</td></tr>
<tr><td><code id="xportr_type_+3A_domain">domain</code></td>
<td>
<p>Appropriate CDISC dataset name, e.g. ADAE, DM. Used to subset
the metadata object.</p>
</td></tr>
<tr><td><code id="xportr_type_+3A_verbose">verbose</code></td>
<td>
<p>The action this function takes when an action is taken on the
dataset or function validation finds an issue. See 'Messaging' section for
details. Options are 'stop', 'warn', 'message', and 'none'</p>
</td></tr>
<tr><td><code id="xportr_type_+3A_metacore">metacore</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Previously used to pass
metadata now renamed with <code>metadata</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Certain care should be taken when using timing variables. R serializes dates
based on a reference date of 01/01/1970 where XPT uses 01/01/1960. This can
result in dates being 10 years off when outputting from R to XPT if you're
using a date class. For this reason, <code>xportr</code> will try to determine what
should happen with variables that appear to be used to denote time.
</p>


<h3>Value</h3>

<p>Returns the modified table.
</p>


<h3>Messaging</h3>

<p><code>type_log()</code> is the primary messaging tool for
<code>xportr_type()</code>. The number of column types that mismatch the reported type
in the metadata, if any, is reported by <code>xportr_type()</code>. If there are any
type mismatches, and the 'verbose' argument is 'stop', 'warn', or
'message', each mismatch will be detailed with the actual type in the data
and the type noted in the metadata.
</p>


<h3>Metadata</h3>

<p>The argument passed in the 'metadata' argument can either
be a metacore object, or a data.frame containing the data listed below. If
metacore is used, no changes to options are required.
</p>
<p>For data.frame 'metadata' arguments four columns must be present:
</p>

<ol>
<li><p> Domain Name - passed as the 'xportr.domain_name' option. Default:
&quot;dataset&quot;. This is the column subset by the 'domain' argument in the
function.
</p>
</li>
<li><p> Variable Name - passed as the 'xportr.variable_name' option. Default:
&quot;variable&quot;. This is used to match columns in '.df' argument and the
metadata.
</p>
</li>
<li><p> Variable Type - passed as the 'xportr.type_name'. Default: &quot;type&quot;. This
is used to note the XPT variable &quot;type&quot; options are numeric or character.
</p>
</li>
<li><p> (Option only) Character Types - The list of classes that should be
explicitly coerced to a XPT Character type. Default: c( &quot;character&quot;,
&quot;char&quot;, &quot;text&quot;, &quot;date&quot;, &quot;posixct&quot;, &quot;posixt&quot;, &quot;datetime&quot;, &quot;time&quot;,
&quot;partialdate&quot;, &quot;partialtime&quot;, &quot;partialdatetime&quot;, &quot;incompletedatetime&quot;,
&quot;durationdatetime&quot;, &quot;intervaldatetime&quot;)'
</p>
</li>
<li><p> (Option only) Numeric Types - The list of classes that should be
explicitly coerced to a XPT numeric type. Default: c(&quot;integer&quot;, &quot;numeric&quot;,
&quot;num&quot;, &quot;float&quot;)
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>metadata &lt;- data.frame(
  dataset = "test",
  variable = c("Subj", "Param", "Val", "NotUsed"),
  type = c("numeric", "character", "numeric", "character")
)

.df &lt;- data.frame(
  Subj = as.character(123, 456, 789),
  Different = c("a", "b", "c"),
  Val = c("1", "2", "3"),
  Param = c("param1", "param2", "param3")
)

df2 &lt;- xportr_type(.df, metadata, "test")
</code></pre>

<hr>
<h2 id='xportr_write'>Write xpt v5 transport file</h2><span id='topic+xportr_write'></span>

<h3>Description</h3>

<p>Writes a local data frame into SAS transport file of version 5. The SAS
transport format is an open format, as is required for submission of the data
to the FDA.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xportr_write(
  .df,
  path,
  max_size_gb = NULL,
  metadata = NULL,
  domain = NULL,
  strict_checks = FALSE,
  label = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xportr_write_+3A_.df">.df</code></td>
<td>
<p>A data frame to write.</p>
</td></tr>
<tr><td><code id="xportr_write_+3A_path">path</code></td>
<td>
<p>Path where transport file will be written. File name sans will be
used as <code>xpt</code> name.</p>
</td></tr>
<tr><td><code id="xportr_write_+3A_max_size_gb">max_size_gb</code></td>
<td>
<p>Maximum size in GB of the exported file(s). If size of xpt file exceeds the specified maximum,
it will split the data frame into multiple exported chunk(s).</p>
</td></tr>
<tr><td><code id="xportr_write_+3A_metadata">metadata</code></td>
<td>
<p>A data frame containing dataset. See 'Metadata' section for
details.</p>
</td></tr>
<tr><td><code id="xportr_write_+3A_domain">domain</code></td>
<td>
<p>Appropriate CDISC dataset name, e.g. ADAE, DM. Used to subset
the metadata object.</p>
</td></tr>
<tr><td><code id="xportr_write_+3A_strict_checks">strict_checks</code></td>
<td>
<p>If TRUE, xpt validation will report errors and not write
out the dataset. If FALSE, xpt validation will report warnings and continue
with writing out the dataset. Defaults to FALSE</p>
</td></tr>
<tr><td><code id="xportr_write_+3A_label">label</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Previously used to to set the Dataset label.
Use the <code>metadata</code> argument to set the dataset label.</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li><p> Variable and dataset labels are stored in the &quot;label&quot; attribute.
</p>
</li>
<li><p> SAS format are stored in the &quot;SASformat&quot; attribute.
</p>
</li>
<li><p> SAS type are based on the <code>metadata</code> attribute.
</p>
</li></ul>



<h3>Value</h3>

<p>A data frame. <code>xportr_write()</code> returns the input data invisibly.
</p>


<h3>Metadata</h3>

<p>The argument passed in the 'metadata' argument can either
be a metacore object, or a data.frame containing the data listed below. If
metacore is used, no changes to options are required.
</p>
<p>For data.frame 'metadata' arguments two columns must be present:
</p>

<ol>
<li><p> Domain Name - passed as the 'xportr.df_domain_name' option. Default:
&quot;dataset&quot;. This is the column subset by the 'domain' argument in the
function.
</p>
</li>
<li><p> Label Name - passed as the 'xportr.df_label' option. Default:
&quot;label&quot;. Character values to update the 'label' attribute of the
dataframe This is passed to <code>haven::write_xpt</code> to note the label.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>adsl &lt;- data.frame(
  SUBL = as.character(123, 456, 789),
  DIFF = c("a", "b", "c"),
  VAL = c("1", "2", "3"),
  PARAM = c("param1", "param2", "param3")
)

var_spec &lt;- data.frame(
  dataset = "adsl",
  label = "Subject-Level Analysis Dataset",
  data_label = "ADSL"
)
xportr_write(adsl,
  path = paste0(tempdir(), "/adsl.xpt"),
  domain = "adsl",
  metadata = var_spec,
  strict_checks = FALSE
)

</code></pre>

<hr>
<h2 id='xpt_validate'>Validate Dataset Can be Written to xpt</h2><span id='topic+xpt_validate'></span>

<h3>Description</h3>

<p>Function used to validate dataframes before they are sent to
<code>haven::write_xpt</code> for writing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xpt_validate(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xpt_validate_+3A_data">data</code></td>
<td>
<p>Dataset to be exported as xpt file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a character vector of failed conditions
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
