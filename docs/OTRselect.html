<!DOCTYPE html><html><head><title>Help for package OTRselect</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {OTRselect}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#censored'>
<p>Variable Selection for Optimal Treatment Decision with Censored Survival Times</p></a></li>
<li><a href='#OTRselect-package'>
<p>Variable Selection for Optimal Treatment Decision</p></a></li>
<li><a href='#Qhat'>
<p>Mean Response or Restricted Mean Response Given a Treatment Regime</p></a></li>
<li><a href='#uncensored'>
<p>Variable Selection for Optimal Treatment Decision with Uncensored Continuous Response</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Variable Selection for Optimal Treatment Decision</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-11-24</td>
</tr>
<tr>
<td>Author:</td>
<td>Wenbin Lu, Hao Helen Zhang, Donglin Zeng, Yuan Geng, and 
    Shannon T. Holloway</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Shannon T. Holloway &lt;shannon.t.holloway@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A penalized regression framework that can simultaneously estimate 
    the optimal treatment strategy and identify important variables. 
    Appropriate for either censored or uncensored continuous response.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>stats, lars, survival, methods</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-24 17:24:43 UTC; 19194</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-24 17:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='censored'>
Variable Selection for Optimal Treatment Decision with Censored Survival Times
</h2><span id='topic+censored'></span>

<h3>Description</h3>

<p>A penalized regression framework that can simultaneously estimate the optimal treatment strategy and identify important variables when the response is continuous and censored. This method uses an inverse probability weighted least squares estimation with adaptive LASSO penalty for variable selection.</p>


<h3>Usage</h3>

<pre><code class='language-R'>censored(x, y, a, delta, propen, phi, logY = TRUE, 
         intercept = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="censored_+3A_x">x</code></td>
<td>
<p>Matrix or data.frame of model covariates.</p>
</td></tr>
<tr><td><code id="censored_+3A_y">y</code></td>
<td>
<p>Vector of response. Note that this data is used to estimate the Kaplan-Meier Curve and should not be log(T).</p>
</td></tr>
<tr><td><code id="censored_+3A_a">a</code></td>
<td>
<p>Vector of treatment received. Treatments must be coded as integers or numerics that can be recast as integers without loss of information.</p>
</td></tr>
<tr><td><code id="censored_+3A_delta">delta</code></td>
<td>
<p>Event indicator vector. The indicator must be coded as 0/1 where 0=no event and 1=event.</p>
</td></tr>
<tr><td><code id="censored_+3A_propen">propen</code></td>
<td>
<p>Vector or matrix of propensity scores for each treatment. If a vector, the propensity is assumed to be the same for all samples. Column or element order must correspond to the sort order of the treatment variable, i.e., 0,1,2,3,... If the number of columns/elements in propen is one fewer than the total number of treatment options, it is assumed that the base or lowest valued treatment has not been provided. </p>
</td></tr>
<tr><td><code id="censored_+3A_phi">phi</code></td>
<td>
<p>A character {'c' or 'l'} indicating if the constant ('c') or linear ('l') baseline mean function is to be used.</p>
</td></tr>
<tr><td><code id="censored_+3A_logy">logY</code></td>
<td>
<p>TRUE/FALSE indicating if log(y) is to be used for regression.</p>
</td></tr>
<tr><td><code id="censored_+3A_intercept">intercept</code></td>
<td>
<p>TRUE/FALSE indicating if an intercept is to be included in phi model. </p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list object containing
</p>
<table>
<tr><td><code>beta</code></td>
<td>
<p>A vector of the estimated regression coefficients after variable selection.</p>
</td></tr>
<tr><td><code>optTx</code></td>
<td>
<p>The estimated optimal treatment for each sample.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Wenbin Lu, Hao Helen Zhang, Yuan Geng, and Shannon T. Holloway</p>


<h3>References</h3>

<p>Geng, Y., Lu, W., and Zhang, H. H.
(2015).
On optimal treatment regimes selection for mean survival time.
Statistics in Medicine, 34, 1169&ndash;1184.
PMCID: PMC4355217.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  sigma &lt;- diag(10)
  ct &lt;- 0.5^{1L:9L}
  rst &lt;- unlist(sapply(1L:9L,function(x){ct[1L:{10L-x}]}))
  sigma[lower.tri(sigma)] &lt;- rst
  sigma[upper.tri(sigma)] &lt;- t(sigma)[upper.tri(sigma)]

  M &lt;- t(chol(sigma))
  Z &lt;- matrix(rnorm(1000),10,100)
  X &lt;- t(M%*%Z)

  A &lt;- rbinom(100,1,0.5)

  Y &lt;- rweibull(100,shape=0.5,scale=1)
  C &lt;- rweibull(100,shape=0.5,scale=1.5)

  delta &lt;- as.integer(C &lt;= Y)

  Y[delta &gt; 0.5] &lt;- C[delta&gt;0.5]

  dat &lt;- data.frame(X,A,exp(Y),delta)
  colnames(dat) &lt;- c(paste("X",1:10,sep=""),"a","y","del")
  
  censored(x = X, 
           y = Y, 
           a = A, 
           delta = delta,
           propen = 0.5, 
           phi = "c", 
           logY = TRUE, 
           intercept = TRUE)
</code></pre>

<hr>
<h2 id='OTRselect-package'>
Variable Selection for Optimal Treatment Decision
</h2><span id='topic+OTRselect-package'></span><span id='topic+OTRselect'></span>

<h3>Description</h3>

<p>A penalized regression framework that can simultaneously estimate 
    the optimal treatment strategy and identify important variables. 
    Appropriate for either censored or uncensored continuous response.
</p>


<h3>Details</h3>

<p>The DESCRIPTION file:
</p>

<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> OTRselect</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Title: </td><td style="text-align: left;"> Variable Selection for Optimal Treatment Decision</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.2</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2023-11-24</td>
</tr>
<tr>
 <td style="text-align: left;">
Author: </td><td style="text-align: left;"> Wenbin Lu, Hao Helen Zhang, Donglin Zeng, Yuan Geng, and 
    Shannon T. Holloway</td>
</tr>
<tr>
 <td style="text-align: left;">
Maintainer: </td><td style="text-align: left;"> Shannon T. Holloway &lt;shannon.t.holloway@gmail.com&gt;</td>
</tr>
<tr>
 <td style="text-align: left;">
Description: </td><td style="text-align: left;"> A penalized regression framework that can simultaneously estimate 
    the optimal treatment strategy and identify important variables. 
    Appropriate for either censored or uncensored continuous response.</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL-2</td>
</tr>
<tr>
 <td style="text-align: left;">
Depends: </td><td style="text-align: left;"> stats, lars, survival, methods</td>
</tr>
<tr>
 <td style="text-align: left;">
NeedsCompilation: </td><td style="text-align: left;"> no</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>


<p>Index of help topics:
</p>
<pre>
OTRselect-package       Variable Selection for Optimal Treatment
                        Decision
Qhat                    Mean Response or Restricted Mean Response Given
                        a Treatment Regime
censored                Variable Selection for Optimal Treatment
                        Decision with Censored Survival Times
uncensored              Variable Selection for Optimal Treatment
                        Decision with Uncensored Continuous Response
</pre>
<p>Function <code>censored</code> performs variable selection for censored continuous response. Function <code>uncensored</code> performs variable selection for uncensored continuous response. Function <code>Qhat</code> estimates the restricted mean response given a treatment regime for censored data or the mean response given a treatment regime for uncensored data.
</p>


<h3>Author(s)</h3>

<p>Wenbin Lu, Hao Helen Zhang, Donglin Zeng, Yuan Geng, and 
    Shannon T. Holloway
</p>
<p>Maintainer: Shannon T. Holloway &lt;shannon.t.holloway@gmail.com&gt;
</p>


<h3>References</h3>

<p>Lu, W., Zhang, H. H., and Zeng. D. 
(2013). 
Variable selection for optimal treatment decision. 
Statistical Methods in Medical Research, 22, 493&ndash;504. 
PMCID: PMC3303960.
</p>
<p>Geng, Y., Lu, W., and Zhang, H. H.
(2015).
On optimal treatment regimes selection for mean survival time.
Statistics in Medicine, 34, 1169&ndash;1184.
PMCID: PMC4355217.
</p>

<hr>
<h2 id='Qhat'>
Mean Response or Restricted Mean Response Given a Treatment Regime
</h2><span id='topic+Qhat'></span>

<h3>Description</h3>

<p>Estimates the mean response given a treatment regime if data is uncensored. If data is censored, estimates the restricted mean response given a treatment regime.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Qhat(y, a, g, wgt = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Qhat_+3A_y">y</code></td>
<td>
<p>vector of responses. Note if logY = TRUE in censored, this value should also be the logarithm.</p>
</td></tr>
<tr><td><code id="Qhat_+3A_a">a</code></td>
<td>
<p>vector of treatments received.</p>
</td></tr>
<tr><td><code id="Qhat_+3A_g">g</code></td>
<td>
<p>vector of the given treatment regime.</p>
</td></tr>
<tr><td><code id="Qhat_+3A_wgt">wgt</code></td>
<td>
<p>weights to be used if response is censored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the estimated mean response or restricted mean response.
</p>


<h3>Author(s)</h3>

<p>Wenbin Lu, Hao Helen Zhang, Donglin Zeng, Yuan Geng, and Shannon T. Holloway</p>


<h3>References</h3>

<p>Lu, W., Zhang, H. H., and Zeng. D. 
(2013). 
Variable selection for optimal treatment decision. 
Statistical Methods in Medical Research, 22, 493&ndash;504. 
PMCID: PMC3303960.
</p>
<p>Geng, Y., Lu, W., and Zhang, H. H.
(2015).
On optimal treatment regimes selection for mean survival time.
Statistics in Medicine, 34, 1169&ndash;1184.
PMCID: PMC4355217.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  y &lt;- rnorm(100)
  a &lt;- rbinom(100,1,0.5)
  g &lt;- integer(100)

  Qhat(y = y, a = a, g = g)

</code></pre>

<hr>
<h2 id='uncensored'>
Variable Selection for Optimal Treatment Decision with Uncensored Continuous Response
</h2><span id='topic+uncensored'></span>

<h3>Description</h3>

<p>A penalized regression framework that can simultaneously estimate the optimal treatment strategy and identify important variables when the response is continuous and not censored. This method uses an inverse probability weighted least squares estimation with adaptive LASSO penalty for variable selection.</p>


<h3>Usage</h3>

<pre><code class='language-R'>uncensored(x, y, a, propen, phi, intercept = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="uncensored_+3A_x">x</code></td>
<td>
<p>Matrix or data.frame of model covariates.</p>
</td></tr>
<tr><td><code id="uncensored_+3A_y">y</code></td>
<td>
<p>Vector of response. Note that this data is used to estimate the Kaplan-Meier Curve and should not be log(T).</p>
</td></tr>
<tr><td><code id="uncensored_+3A_a">a</code></td>
<td>
<p>Vector of treatment received. Treatments must be coded as integers or numerics that can be recast as integers without loss of information.</p>
</td></tr>
<tr><td><code id="uncensored_+3A_propen">propen</code></td>
<td>
<p>Vector or matrix of propensity scores for each treatment. If a vector, the propensity is assumed to be the same for all samples. Column or element order must correspond to the sort order of the treatment variable, i.e., 0,1,2,3,... If the number of columns/elements in propen is one fewer than the total number of treatment options, it is assumed that the base or lowest valued treatment has not been provided. </p>
</td></tr>
<tr><td><code id="uncensored_+3A_phi">phi</code></td>
<td>
<p>A character {'c' or 'l'} indicating if the constant ('c') or linear ('l') baseline mean function is to be used.</p>
</td></tr>
<tr><td><code id="uncensored_+3A_intercept">intercept</code></td>
<td>
<p>TRUE/FALSE indicating if an intercept is to be included in phi model. </p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list object containing
</p>
<table>
<tr><td><code>beta</code></td>
<td>
<p>A vector of the estimated regression coefficients after variable selection.</p>
</td></tr>
<tr><td><code>optTx</code></td>
<td>
<p>The estimated optimal treatment for each sample.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Wenbin Lu, Hao Helen Zhang, Donglin Zeng, and Shannon T. Holloway</p>


<h3>References</h3>

<p>Lu, W., Zhang, H. H., and Zeng. D. 
(2013). 
Variable selection for optimal treatment decision. 
Statistical Methods in Medical Research, 22, 493&ndash;504. 
PMCID: PMC3303960.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  sigma &lt;- diag(10)
  ct &lt;- 0.5^{1L:9L}
  rst &lt;- unlist(sapply(1L:9L,function(x){ct[1L:{10L-x}]}))
  sigma[lower.tri(sigma)] &lt;- rst
  sigma[upper.tri(sigma)] &lt;- t(sigma)[upper.tri(sigma)]

  M &lt;- t(chol(sigma))
  Z &lt;- matrix(rnorm(1000),10,100)
  X &lt;- t(M %*% Z)

  gamma1 &lt;- c(1, -1, rep(0,8))
  beta &lt;- c(1,1,rep(0,7), -0.9, 0.8)

  A &lt;- rbinom(100,1,0.5)

  Y &lt;- 1.0 + X %*% gamma1 + 
       A*{cbind(1.0,X)%*%beta} + rnorm(100,0,.25)

  dat &lt;- data.frame(X,A,Y)
  
  uncensored(x=X,  
             y = Y,  
             a = A,  
             propen = 0.5,  
             phi = "c",  
             intercept = TRUE)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
