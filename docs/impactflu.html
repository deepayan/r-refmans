<!DOCTYPE html><html><head><title>Help for package impactflu</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {impactflu}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#generate_counts'><p>Generate normal counts</p></a></li>
<li><a href='#generate_dates'><p>Generate dates</p></a></li>
<li><a href='#method1'><p>Analysis methods from Tokars (2018)</p></a></li>
<li><a href='#sim_reference'><p>Simulate an ideal population</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Quantification of Population-Level Impact of Vaccination</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>
  Implements the compartment model from Tokars (2018) 
  &lt;<a href="https://doi.org/10.1016%2Fj.vaccine.2018.10.026">doi:10.1016/j.vaccine.2018.10.026</a>&gt;. This enables quantification of 
  population-wide impact of vaccination against vaccine-preventable 
  diseases such as influenza.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.0.2</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp, tibble, dplyr, rlang, glue, lubridate, magrittr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 2.1.0)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-01-10 20:14:47 UTC; khvorov45</td>
</tr>
<tr>
<td>Author:</td>
<td>Arseniy Khvorov [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Arseniy Khvorov &lt;khvorov45@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-01-14 11:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='generate_counts'>Generate normal counts</h2><span id='topic+generate_counts'></span>

<h3>Description</h3>

<p>Generates counts from a normal distribution density function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_counts(init_pop_size, n_timepoints, overall_prop, mean, sd)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generate_counts_+3A_init_pop_size">init_pop_size</code></td>
<td>
<p>Initial population size</p>
</td></tr>
<tr><td><code id="generate_counts_+3A_n_timepoints">n_timepoints</code></td>
<td>
<p>Number of timepoints</p>
</td></tr>
<tr><td><code id="generate_counts_+3A_overall_prop">overall_prop</code></td>
<td>
<p>Overall proportion of the population to be included in
the counts over all the timepoints</p>
</td></tr>
<tr><td><code id="generate_counts_+3A_mean">mean</code></td>
<td>
<p>Mean of the normal distribution</p>
</td></tr>
<tr><td><code id="generate_counts_+3A_sd">sd</code></td>
<td>
<p>Standard deviation of the normal distribution</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer vector of counts of length <code>n_timepoints</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Tokars (2018) vaccinations
vacs_tok &lt;- generate_counts(1e6, 304, 0.55, 100, 50)
# Tokars (2018) cases
casen_tok &lt;- generate_counts(1e6, 304, 0.12, 190, 35)
</code></pre>

<hr>
<h2 id='generate_dates'>Generate dates</h2><span id='topic+generate_dates'></span>

<h3>Description</h3>

<p>Generate dates given timepoint indices, start date and step unit
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_dates(timepoints, start, unit)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generate_dates_+3A_timepoints">timepoints</code></td>
<td>
<p>Integer vector timepoint indices</p>
</td></tr>
<tr><td><code id="generate_dates_+3A_start">start</code></td>
<td>
<p>Date of index 1</p>
</td></tr>
<tr><td><code id="generate_dates_+3A_unit">unit</code></td>
<td>
<p>&quot;year&quot; &quot;month&quot; or &quot;day&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of dates the same length as <code>timepoints</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Dates from Tokars (2018)
timepoints &lt;- 1L:304L
dates &lt;- generate_dates(timepoints, lubridate::ymd("2017-08-01"), "day")
</code></pre>

<hr>
<h2 id='method1'>Analysis methods from Tokars (2018)</h2><span id='topic+method1'></span><span id='topic+method3'></span>

<h3>Description</h3>

<p>Method 1 was said to be as current. Method 3 was determined to be the least
biased.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>method1(init_pop_size, vaccinations, cases, ve)

method3(init_pop_size, vaccinations, cases, ve)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="method1_+3A_init_pop_size">init_pop_size</code></td>
<td>
<p>Integer initial population size</p>
</td></tr>
<tr><td><code id="method1_+3A_vaccinations">vaccinations</code></td>
<td>
<p>Integer vector counts of vaccinations</p>
</td></tr>
<tr><td><code id="method1_+3A_cases">cases</code></td>
<td>
<p>Integer vector counts of cases</p>
</td></tr>
<tr><td><code id="method1_+3A_ve">ve</code></td>
<td>
<p>Vector vaccine effectiveness. If length 1, assumed to not vary with
time.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="tibble.html#topic+tibble">tibble</a> with the following columns (method-dependent):
</p>
<table>
<tr><td><code>cases</code></td>
<td>
<p>Observed cases</p>
</td></tr>
<tr><td><code>vaccinations</code></td>
<td>
<p>Observed vaccinations</p>
</td></tr>
<tr><td><code>ve</code></td>
<td>
<p>Assumed vaccine effectiveness</p>
</td></tr>
<tr><td><code>pvac</code></td>
<td>
<p>Proportion of the starting population vaccinated</p>
</td></tr>
<tr><td><code>vc_lag</code></td>
<td>
<p>Vaccine coverage lagged</p>
</td></tr>
<tr><td><code>pops</code></td>
<td>
<p>Susceptible population</p>
</td></tr>
<tr><td><code>pflu</code></td>
<td>
<p>Infection risk</p>
</td></tr>
<tr><td><code>popn</code></td>
<td>
<p>Non-cases is absence of vaccination</p>
</td></tr>
<tr><td><code>cases_novac</code></td>
<td>
<p>Cases in absence of vaccination</p>
</td></tr>
<tr><td><code>avert</code></td>
<td>
<p>Expected number of vaccinations</p>
</td></tr>
</table>


<h3>References</h3>

<p>Tokars JI, Rolfes MA, Foppa IM, Reed C. An evaluation and update
of methods for estimating the number of influenza cases averted by
vaccination in the United States. Vaccine. 2018;36(48):7331–7337.
doi:10.1016/j.vaccine.2018.10.026
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

# Simulate a population
nsam &lt;- 1e6L
ndays &lt;- 304L
pop_tok &lt;- sim_reference(
  init_pop_size = nsam,
  vaccinations = generate_counts(nsam, ndays, 0.55, mean = 100, sd = 50),
  cases_novac = generate_counts(nsam, ndays, 0.12, mean = 190, sd = 35),
  ve = 0.48,
  lag = 14,
  deterministic = TRUE
)

# Summarise by month
pop_tok_month &lt;- pop_tok %&gt;%
  mutate(
    datestamp = generate_dates(
      timepoint, lubridate::ymd("2017-08-01"), "day"
    ),
    year = lubridate::year(datestamp),
    month = lubridate::month(datestamp)
 ) %&gt;%
 group_by(year, month) %&gt;%
 summarise(
   vaccinations = sum(vaccinations), cases = sum(cases), ve = mean(ve)
 ) %&gt;%
 ungroup()

# Estimate averted cases using the two different methods
m1 &lt;- method1(
  nsam, pop_tok_month$vaccinations, pop_tok_month$cases, pop_tok_month$ve
)
m3 &lt;- method3(
  nsam, pop_tok_month$vaccinations, pop_tok_month$cases, pop_tok_month$ve
)
sum(m1$avert)
sum(m3$avert)
</code></pre>

<hr>
<h2 id='sim_reference'>Simulate an ideal population</h2><span id='topic+sim_reference'></span>

<h3>Description</h3>

<p>Simulates an ideal population using the reference model from Tokars (2018).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim_reference(
  init_pop_size,
  vaccinations,
  cases_novac,
  ve,
  lag,
  deterministic,
  seed = sample.int(.Machine$integer.max, 1)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sim_reference_+3A_init_pop_size">init_pop_size</code></td>
<td>
<p>Integer initial population size</p>
</td></tr>
<tr><td><code id="sim_reference_+3A_vaccinations">vaccinations</code></td>
<td>
<p>Integer vector number of vaccinations at every timepoint</p>
</td></tr>
<tr><td><code id="sim_reference_+3A_cases_novac">cases_novac</code></td>
<td>
<p>Integer vector number of cases at every timepoint</p>
</td></tr>
<tr><td><code id="sim_reference_+3A_ve">ve</code></td>
<td>
<p>Vaccine effectiveness (proportion)</p>
</td></tr>
<tr><td><code id="sim_reference_+3A_lag">lag</code></td>
<td>
<p>Integer lag period measured in timepoints</p>
</td></tr>
<tr><td><code id="sim_reference_+3A_deterministic">deterministic</code></td>
<td>
<p>Boolean whether to make the simulation deterministic</p>
</td></tr>
<tr><td><code id="sim_reference_+3A_seed">seed</code></td>
<td>
<p>Integer seed to use</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="tibble.html#topic+tibble">tibble</a> with the following columns:
</p>
<table>
<tr><td><code>timepoint</code></td>
<td>
<p>Index of timepoint</p>
</td></tr>
<tr><td><code>vaccinations</code></td>
<td>
<p>Expected number of vaccinations</p>
</td></tr>
<tr><td><code>cases_novac</code></td>
<td>
<p>Expected number of cases in absence of vaccination</p>
</td></tr>
<tr><td><code>ve</code></td>
<td>
<p>Expected vaccine effectiveness</p>
</td></tr>
<tr><td><code>pflu</code></td>
<td>
<p>Flu incidence</p>
</td></tr>
<tr><td><code>cases</code></td>
<td>
<p>Actual number of cases</p>
</td></tr>
<tr><td><code>popn</code></td>
<td>
<p>Non-cases in absence of vaccination</p>
</td></tr>
<tr><td><code>pvac</code></td>
<td>
<p>Proportion of starting population vaccinated</p>
</td></tr>
<tr><td><code>b</code></td>
<td>
<p>Number vaccinated at that time</p>
</td></tr>
<tr><td><code>A</code></td>
<td>
<p>Non-vaccinated non-cases</p>
</td></tr>
<tr><td><code>B</code></td>
<td>
<p>Vaccinated non-cases lagging</p>
</td></tr>
<tr><td><code>E</code></td>
<td>
<p>Non-vaccinated cases</p>
</td></tr>
</table>


<h3>References</h3>

<p>Tokars JI, Rolfes MA, Foppa IM, Reed C. An evaluation and update
of methods for estimating the number of influenza cases averted by
vaccination in the United States. Vaccine. 2018;36(48):7331–7337.
doi:10.1016/j.vaccine.2018.10.026
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Population from Tokars (2018)
nsam &lt;- 1e6L
ndays &lt;- 304L
pop_tok &lt;- sim_reference(
  init_pop_size = nsam,
  vaccinations = generate_counts(nsam, ndays, 0.55, mean = 100, sd = 50),
  cases_novac = generate_counts(nsam, ndays, 0.12, mean = 190, sd = 35),
  ve = 0.48,
  lag = 14,
  deterministic = TRUE
)
head(pop_tok)
sum(pop_tok$avert)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
