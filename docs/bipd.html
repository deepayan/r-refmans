<!DOCTYPE html><html><head><title>Help for package bipd</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {bipd}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add.mcmc'><p>Convenient function to add results (i.e. combine mcmc.list)</p></a></li>
<li><a href='#bipd-package'><p>bipd: A package for individual patient data meta-analysis using 'JAGS'</p></a></li>
<li><a href='#findMissingPattern'><p>Find missing data pattern in a given data</p></a></li>
<li><a href='#generate_ipdma_example'><p>Generate a simulated IPD-MA data for demonstration</p></a></li>
<li><a href='#generate_ipdnma_example'><p>Generate a simualted IPD-NMA data for demonstration</p></a></li>
<li><a href='#generate_sysmiss_ipdma_example'><p>Generate a simulated IPD-MA data with systematically missing covariates</p></a></li>
<li><a href='#ipd.run'><p>Run the model using the ipd object</p></a></li>
<li><a href='#ipd.run.parallel'><p>Run the model using the ipd object with parallel computation</p></a></li>
<li><a href='#ipdma.impute'><p>Impute missing data in individual participant data with two treatments (i.e. placebo and a treatment).</p></a></li>
<li><a href='#ipdma.model.deft.onestage'><p>Make a (deft-approach) one-stage individual patient data meta-analysis object containing data, priors, and a JAGS model code</p></a></li>
<li><a href='#ipdma.model.onestage'><p>Make an one-stage individual patient data meta-analysis object containing data, priors, and a JAGS model code</p></a></li>
<li><a href='#ipdnma.model.onestage'><p>Make an one-stage individual patient data network meta-analysis object containing data, priors, and a JAGS model code</p></a></li>
<li><a href='#treatment.effect'><p>Calculate patient-specific treatment effect</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Bayesian Individual Patient Data Meta-Analysis using 'JAGS'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-05-30</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>rjags (&ge; 4-6), coda (&ge; 0.13), mvtnorm, dplyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>dclone, R2WinBUGS, mice, micemd, miceadds, mitools, knitr,
rmarkdown</td>
</tr>
<tr>
<td>Description:</td>
<td>We use a Bayesian approach to run individual patient data meta-analysis and network meta-analysis using 'JAGS'. The methods incorporate shrinkage methods and calculate patient-specific treatment effects as described in Seo et al. (2021) &lt;<a href="https://doi.org/10.1002%2Fsim.8859">doi:10.1002/sim.8859</a>&gt;. This package also includes user-friendly functions that impute missing data in an individual patient data using mice-related packages.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-06-03 18:11:34 UTC; ms19g661</td>
</tr>
<tr>
<td>Author:</td>
<td>Michael Seo [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Michael Seo &lt;swj8874@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-06-05 16:10:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='add.mcmc'>Convenient function to add results (i.e. combine mcmc.list)</h2><span id='topic+add.mcmc'></span>

<h3>Description</h3>

<p>This is a convenient function to add results (i.e. combine mcmc.list). 
This can be useful when combining results obtained from multiple imputation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add.mcmc(x, y)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add.mcmc_+3A_x">x</code></td>
<td>
<p>first result in a format of mcmc.list</p>
</td></tr>
<tr><td><code id="add.mcmc_+3A_y">y</code></td>
<td>
<p>second result in a format of mcmc.list</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>ds &lt;- generate_ipdma_example(type = "continuous")
ds2 &lt;- generate_ipdma_example(type = "continuous")
ipd &lt;- with(ds, ipdma.model.onestage(y = y, study = studyid, treat = treat, X = cbind(z1, z2), 
response = "normal", shrinkage = "none"))
ipd2 &lt;- with(ds2, ipdma.model.onestage(y = y, study = studyid, treat = treat, X = cbind(z1, z2), 
response = "normal", shrinkage = "none"))

samples &lt;- ipd.run(ipd, pars.save = c("beta", "gamma", "delta"), n.chains = 3, n.burnin = 500, 
n.iter = 5000)
samples2 &lt;- ipd.run(ipd2, pars.save = c("beta", "gamma", "delta"), n.chains = 3, n.burnin = 500, 
n.iter = 5000)
combined &lt;- add.mcmc(samples, samples2)


</code></pre>

<hr>
<h2 id='bipd-package'>bipd: A package for individual patient data meta-analysis using 'JAGS'</h2><span id='topic+bipd-package'></span>

<h3>Description</h3>

<p>A package for individual patient data meta-analysis using 'JAGS'
</p>


<h3>Details</h3>

<p>We use a Bayesian approach to run individual patient data meta-analysis and network meta-analysis using 'JAGS'. 
The methods incorporate shrinkage methods and calculate patient-specific treatment effects as described in Seo et al. (2021) &lt;DOI:10.1002/sim.8859&gt;.
This package also includes user-friendly functions that impute missing data in an individual patient data using mice-related packages.
</p>


<h3>References</h3>

<p>Audigier V, White I, Jolani S, et al. Multiple Imputation for Multilevel Data with Continuous and Binary Variables. <em>Statistical Science</em>. 2018;33(2):160-183. doi: <a href="https://doi.org/10.1214/18-STS646">10.1214/18-STS646</a>
</p>
<p>Debray TPA, Moons KGM, Valkenhoef G, et al. Get real in individual participant data (IPD) meta-analysis: a review of the methodology. <em>Res Synth Methods</em>. 2015;6(4):293-309. doi: <a href="https://doi.org/10.1002/jrsm.1160">10.1002/jrsm.1160</a>
</p>
<p>Dias S, Sutton AJ, Ades AE, et al. A Generalized Linear Modeling Framework for Pairwise and Network Meta-analysis of Randomized Controlled Trials. <em>Medical Decision Making</em>. 2013;33(5):607-617. doi: <a href="https://doi.org/10.1177/0272989X12458724">10.1177/0272989X12458724</a>
</p>
<p>Fisher DJ, Carpenter JR, Morris TP, et al. Meta-analytical methods to identify who benefits most from treatments: daft, deluded, or deft approach?. <em>BMJ</em>. 2017;356:j573. doi: <a href="https://doi.org/10.1136/bmj.j573">10.1136/bmj.j573</a>
</p>
<p>O'Hara RB, Sillanpaa MJ. A review of Bayesian variable selection methods: what, how and which. <em>Bayesian Anal</em>. 2009;4(1):85-117. doi: <a href="https://doi.org/10.1214/09-BA403">10.1214/09-BA403</a>
</p>
<p>Riley RD, Debray TP, Fisher D, et al. Individual participant data meta-analysis to examine interactions between treatment effect and participant-level covariates: Statistical recommendations for conduct and planning. <em>Stat Med</em>. 2020:39(15):2115-2137. doi: <a href="https://doi.org/10.1002/sim.8516">10.1002/sim.8516</a>
</p>
<p>Seo M, White IR, Furukawa TA, et al. Comparing methods for estimating patient-specific treatment effects in individual patient data meta-analysis. <em>Stat Med</em>. 2021;40(6):1553-1573. doi: <a href="https://doi.org/10.1002/sim.8859">10.1002/sim.8859</a>
</p>

<hr>
<h2 id='findMissingPattern'>Find missing data pattern in a given data</h2><span id='topic+findMissingPattern'></span>

<h3>Description</h3>

<p>Find missing data pattern in a given data i.e. whether variables are systematically missing or sporadically missing. Also calculates missing count and percentage for exploratory purposes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findMissingPattern(
  dataset = NULL,
  covariates = NULL,
  typeofvar = NULL,
  studyname = NULL,
  treatmentname = NULL,
  outcomename = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="findMissingPattern_+3A_dataset">dataset</code></td>
<td>
<p>data which contains variables of interests</p>
</td></tr>
<tr><td><code id="findMissingPattern_+3A_covariates">covariates</code></td>
<td>
<p>vector of variable names that the user is interested in finding a missing data pattern</p>
</td></tr>
<tr><td><code id="findMissingPattern_+3A_typeofvar">typeofvar</code></td>
<td>
<p>type of covariate variables; should be a vector of these values: &quot;continuous&quot;, &quot;binary&quot;, or &quot;count&quot;. Order should follow that of covariates parameter.</p>
</td></tr>
<tr><td><code id="findMissingPattern_+3A_studyname">studyname</code></td>
<td>
<p>study name in the data specified</p>
</td></tr>
<tr><td><code id="findMissingPattern_+3A_treatmentname">treatmentname</code></td>
<td>
<p>treatment name in the data specified</p>
</td></tr>
<tr><td><code id="findMissingPattern_+3A_outcomename">outcomename</code></td>
<td>
<p>outcome name in the data specified</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>missingcount</code></td>
<td>
<p>missing number of patients for each study and covariate</p>
</td></tr>
<tr><td><code>missingpercent</code></td>
<td>
<p>missing percentage of patients for each study and covariate</p>
</td></tr>
<tr><td><code>sys_missing</code></td>
<td>
<p>a vector indicating whether each covariate is systematically missing</p>
</td></tr>
<tr><td><code>spor_missing</code></td>
<td>
<p>a vector indicating whether each covariate is sporadically missing</p>
</td></tr>
<tr><td><code>sys_covariates</code></td>
<td>
<p>a vector of systematically missing covariates</p>
</td></tr>
<tr><td><code>spor_covariates</code></td>
<td>
<p>a vector of sporadically missing covariates</p>
</td></tr>
<tr><td><code>without_sys_covariates</code></td>
<td>
<p>a vector of covariates that are not systematically missing</p>
</td></tr>
<tr><td><code>covariates</code></td>
<td>
<p>vector of variable names that the user is interested in finding a missing data pattern</p>
</td></tr>
<tr><td><code>studyname</code></td>
<td>
<p>study name in the data specified</p>
</td></tr>
<tr><td><code>treatmentname</code></td>
<td>
<p>treatment name in the data specified</p>
</td></tr>
<tr><td><code>outcomename</code></td>
<td>
<p>outcome name in the data specified</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>simulated_dataset &lt;- generate_sysmiss_ipdma_example(Nstudies = 10, Ncov = 5, sys_missing_prob = 0.3, 
magnitude = 0.2, heterogeneity = 0.1)

missP &lt;- findMissingPattern(simulated_dataset, covariates = c("x1", "x2", "x3", "x4", "x5"), 
typeofvar = c("continuous", "binary", "binary", "continuous", "continuous"), studyname = "study",  
treatmentname = "treat", outcomename = "y")
missP

</code></pre>

<hr>
<h2 id='generate_ipdma_example'>Generate a simulated IPD-MA data for demonstration</h2><span id='topic+generate_ipdma_example'></span>

<h3>Description</h3>

<p>Generate a simulated IPD-MA data for demonstration
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_ipdma_example(type = "continuous")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generate_ipdma_example_+3A_type">type</code></td>
<td>
<p>&quot;continuous&quot; for continuous outcome and &quot;binary&quot; for binary outcome</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns simulated IPD-MA data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ds &lt;- generate_ipdma_example(type = "continuous")
head(ds)
</code></pre>

<hr>
<h2 id='generate_ipdnma_example'>Generate a simualted IPD-NMA data for demonstration</h2><span id='topic+generate_ipdnma_example'></span>

<h3>Description</h3>

<p>Generate a simulated IPD-NMA data for demonstration
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_ipdnma_example(type = "continuous")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generate_ipdnma_example_+3A_type">type</code></td>
<td>
<p>&quot;continuous&quot; for continuous outcome and &quot;binary&quot; for binary outcome</p>
</td></tr>
</table>


<h3>Value</h3>

<p>return simulated IPD-NMA data
ds &lt;- generate_ipdnma_example(type = &quot;continuous&quot;)
head(ds)
</p>

<hr>
<h2 id='generate_sysmiss_ipdma_example'>Generate a simulated IPD-MA data with systematically missing covariates</h2><span id='topic+generate_sysmiss_ipdma_example'></span>

<h3>Description</h3>

<p>Generate a simulated IPD-MA data with systematically missing covariates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_sysmiss_ipdma_example(
  Nstudies = 10,
  Ncov = 5,
  sys_missing_prob = 0.1,
  magnitude = 0.3,
  heterogeneity = 0.1,
  interaction = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generate_sysmiss_ipdma_example_+3A_nstudies">Nstudies</code></td>
<td>
<p>number of studies. Default is 10.</p>
</td></tr>
<tr><td><code id="generate_sysmiss_ipdma_example_+3A_ncov">Ncov</code></td>
<td>
<p>number of covariates in total. Options are 5 or 10 studies. Default is set to 5.</p>
</td></tr>
<tr><td><code id="generate_sysmiss_ipdma_example_+3A_sys_missing_prob">sys_missing_prob</code></td>
<td>
<p>probability of systematically missing studies for each covariates. Default is set to 0.3.</p>
</td></tr>
<tr><td><code id="generate_sysmiss_ipdma_example_+3A_magnitude">magnitude</code></td>
<td>
<p>magnitude of the regression estimates (the mean). Default is set to 0.2.</p>
</td></tr>
<tr><td><code id="generate_sysmiss_ipdma_example_+3A_heterogeneity">heterogeneity</code></td>
<td>
<p>heterogeneity of regression estimates across studies. Default is set to 0.1.</p>
</td></tr>
<tr><td><code id="generate_sysmiss_ipdma_example_+3A_interaction">interaction</code></td>
<td>
<p>whether to include treatment indicator and treatment</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns simulated IPD-MA data with systematically missing covariates
</p>


<h3>Examples</h3>

<pre><code class='language-R'>simulated_dataset &lt;- generate_sysmiss_ipdma_example(Nstudies = 10, Ncov = 5, sys_missing_prob = 0.3, 
magnitude = 0.2, heterogeneity = 0.1)
head(simulated_dataset)
</code></pre>

<hr>
<h2 id='ipd.run'>Run the model using the ipd object</h2><span id='topic+ipd.run'></span>

<h3>Description</h3>

<p>This is the core function that runs the model in our program. Before running this function, we need to specify data, prior, JAGS code, etc. using ipd.model type function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ipd.run(
  ipd,
  pars.save = NULL,
  inits = NULL,
  n.chains = 3,
  n.adapt = 1000,
  n.burnin = 1000,
  n.iter = 10000
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ipd.run_+3A_ipd">ipd</code></td>
<td>
<p>ipd object created from ipd.model type function</p>
</td></tr>
<tr><td><code id="ipd.run_+3A_pars.save">pars.save</code></td>
<td>
<p>parameters to save. For instance, &quot;beta&quot; - coefficients for main effects; &quot;gamma&quot; - coefficients for effect modifiers; &quot;delta&quot; - average treatment effect</p>
</td></tr>
<tr><td><code id="ipd.run_+3A_inits">inits</code></td>
<td>
<p>initial values specified for the parameters to save</p>
</td></tr>
<tr><td><code id="ipd.run_+3A_n.chains">n.chains</code></td>
<td>
<p>number of MCMC chains to sample</p>
</td></tr>
<tr><td><code id="ipd.run_+3A_n.adapt">n.adapt</code></td>
<td>
<p>number of iterations for adaptation (Note that the samples from adaptation phase is non-Markovian and do not constitute a Markov chain)</p>
</td></tr>
<tr><td><code id="ipd.run_+3A_n.burnin">n.burnin</code></td>
<td>
<p>number of iterations for burn-in</p>
</td></tr>
<tr><td><code id="ipd.run_+3A_n.iter">n.iter</code></td>
<td>
<p>number of iterations to run after the adaptation</p>
</td></tr>
</table>


<h3>Value</h3>

<p>MCMC samples stored using JAGS. The returned samples have the form of mcmc.list and coda functions can be directly applied.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ds &lt;- generate_ipdma_example(type = "continuous")
ipd &lt;- with(ds, ipdma.model.onestage(y = y, study = studyid, treat = treat, X = cbind(z1, z2), 
response = "normal", shrinkage = "none"))

samples &lt;- ipd.run(ipd, n.chains = 3, n.burnin = 500, n.iter = 5000)

</code></pre>

<hr>
<h2 id='ipd.run.parallel'>Run the model using the ipd object with parallel computation</h2><span id='topic+ipd.run.parallel'></span>

<h3>Description</h3>

<p>This function runs the model through parallel computation using dclone R package. Before running this function, we need to specify data, prior, JAGS code, etc. using ipd.model type function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ipd.run.parallel(
  ipd,
  pars.save = NULL,
  inits = NULL,
  n.chains = 2,
  n.adapt = 1000,
  n.burnin = 1000,
  n.iter = 10000
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ipd.run.parallel_+3A_ipd">ipd</code></td>
<td>
<p>ipd object created from ipd.model type function</p>
</td></tr>
<tr><td><code id="ipd.run.parallel_+3A_pars.save">pars.save</code></td>
<td>
<p>parameters to save. For instance, &quot;beta&quot; - coefficients for main effects; &quot;gamma&quot; - coefficients for effect modifiers; &quot;delta&quot; - average treatment effect</p>
</td></tr>
<tr><td><code id="ipd.run.parallel_+3A_inits">inits</code></td>
<td>
<p>initial values specified for the parameters to save</p>
</td></tr>
<tr><td><code id="ipd.run.parallel_+3A_n.chains">n.chains</code></td>
<td>
<p>number of MCMC chains to sample</p>
</td></tr>
<tr><td><code id="ipd.run.parallel_+3A_n.adapt">n.adapt</code></td>
<td>
<p>number of iterations for adaptation (Note that the samples from adaptation phase is non-Markovian and do not constitute a Markov chain)</p>
</td></tr>
<tr><td><code id="ipd.run.parallel_+3A_n.burnin">n.burnin</code></td>
<td>
<p>number of iterations for burn-in</p>
</td></tr>
<tr><td><code id="ipd.run.parallel_+3A_n.iter">n.iter</code></td>
<td>
<p>number of iterations to run after the adaptation</p>
</td></tr>
</table>


<h3>Value</h3>

<p>MCMC samples stored using JAGS. The returned samples have the form of mcmc.list and coda functions can be directly applied.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ds &lt;- generate_ipdma_example(type = "continuous")
ipd &lt;- with(ds, ipdma.model.onestage(y = y, study = studyid, treat = treat, X = cbind(z1, z2), 
response = "normal", shrinkage = "none"))

samples &lt;- ipd.run.parallel(ipd, n.chains = 2, n.burnin = 500, n.iter = 5000)

</code></pre>

<hr>
<h2 id='ipdma.impute'>Impute missing data in individual participant data with two treatments (i.e. placebo and a treatment).</h2><span id='topic+ipdma.impute'></span>

<h3>Description</h3>

<p>Impute missing data in individual participant data with two treatments. Data is clustered by different studies.
In the presence of systematically missing variables, the function defaults to 2l.2stage.norm, 2l.2stage.bin, 
and 2l.2stage.pois methods in micemd package. 
If there are no systematically missing variables, the function defaults to use 2l.pmm in miceadds package 
which generalizes predictive mean matching using linear mixed model.
If there is only one study available, the function defaults to use pmm in mice package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ipdma.impute(
  dataset = NULL,
  covariates = NULL,
  typeofvar = NULL,
  sys_impute_method = "2l.2stage",
  interaction = NULL,
  meth = NULL,
  pred = NULL,
  studyname = NULL,
  treatmentname = NULL,
  outcomename = NULL,
  m = 5
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ipdma.impute_+3A_dataset">dataset</code></td>
<td>
<p>data which contains variables of interests</p>
</td></tr>
<tr><td><code id="ipdma.impute_+3A_covariates">covariates</code></td>
<td>
<p>vector of variable names to find missing data pattern</p>
</td></tr>
<tr><td><code id="ipdma.impute_+3A_typeofvar">typeofvar</code></td>
<td>
<p>type of covariate variables; should be a vector of these values: &quot;continuous&quot;, &quot;binary&quot;, or &quot;count&quot;.
Order should follow that of covariates parameter specified. Covariates that are specified &quot;binary&quot; are automatically factored.</p>
</td></tr>
<tr><td><code id="ipdma.impute_+3A_sys_impute_method">sys_impute_method</code></td>
<td>
<p>method used for systematically missing studies. Options are &quot;2l.glm&quot;, &quot;2l.2stage&quot;, or &quot;2l.jomo&quot;. Default is set to &quot;2l.2stage&quot;.
There is also an option to ignore all the clustering level and impute using predictive mean matching by setting this parameter to &quot;pmm&quot;.</p>
</td></tr>
<tr><td><code id="ipdma.impute_+3A_interaction">interaction</code></td>
<td>
<p>indicator denoting whether treatment-covariate interactions should be included. Default is set to true.</p>
</td></tr>
<tr><td><code id="ipdma.impute_+3A_meth">meth</code></td>
<td>
<p>imputation method to be used in the mice package. If left unspecified, function picks a reasonable one.</p>
</td></tr>
<tr><td><code id="ipdma.impute_+3A_pred">pred</code></td>
<td>
<p>correct prediction matrix to be used in the mice package. If left unspecified, function picks a reasonable one.</p>
</td></tr>
<tr><td><code id="ipdma.impute_+3A_studyname">studyname</code></td>
<td>
<p>study name in the data specified.</p>
</td></tr>
<tr><td><code id="ipdma.impute_+3A_treatmentname">treatmentname</code></td>
<td>
<p>treatment name in the data specified.</p>
</td></tr>
<tr><td><code id="ipdma.impute_+3A_outcomename">outcomename</code></td>
<td>
<p>outcome name in the data specified.</p>
</td></tr>
<tr><td><code id="ipdma.impute_+3A_m">m</code></td>
<td>
<p>number of imputed datasets. Default is set to 5.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>missingPattern</code></td>
<td>
<p>missing pattern object returned by running findMissingPattern function</p>
</td></tr>
<tr><td><code>meth</code></td>
<td>
<p>imputation method used with the mice function</p>
</td></tr>
<tr><td><code>pred</code></td>
<td>
<p>prediction matrix used with the mice function</p>
</td></tr>
<tr><td><code>imp</code></td>
<td>
<p>imputed datasets that is returned from the mice function</p>
</td></tr>
<tr><td><code>imp.list</code></td>
<td>
<p>imputed datasets in a list format</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>simulated_dataset &lt;- generate_sysmiss_ipdma_example(Nstudies = 10, Ncov = 5, sys_missing_prob = 0.3, 
magnitude = 0.2, heterogeneity = 0.1)

# load in mice packages
library(mice) #for datasets with only one study level
library(miceadds) #for multilevel datasets without systematically missing predictors
library(micemd) #for multilevel datasets with systematically missing predictors.
imputation &lt;- ipdma.impute(simulated_dataset, covariates = c("x1", "x2", "x3", "x4", "x5"), 
typeofvar = c("continuous", "binary", "binary", "continuous", "continuous"), interaction = TRUE, 
studyname = "study", treatmentname = "treat", outcomename = "y", m = 5)

</code></pre>

<hr>
<h2 id='ipdma.model.deft.onestage'>Make a (deft-approach) one-stage individual patient data meta-analysis object containing data, priors, and a JAGS model code</h2><span id='topic+ipdma.model.deft.onestage'></span>

<h3>Description</h3>

<p>This function sets up data and JAGS code that is needed to run (deft-approach) one-stage IPD-MA models in JAGS.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ipdma.model.deft.onestage(
  y = NULL,
  study = NULL,
  treat = NULL,
  X = NULL,
  response = "normal",
  type = "random",
  mean.alpha = 0,
  prec.alpha = 0.001,
  mean.beta = 0,
  prec.beta = 0.001,
  mean.gamma.within = 0,
  prec.gamma.within = 0.001,
  mean.gamma.across = 0,
  prec.gamma.across = 0.001,
  mean.delta = 0,
  prec.delta = 0.001,
  hy.prior = list("dhnorm", 0, 1)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ipdma.model.deft.onestage_+3A_y">y</code></td>
<td>
<p>outcome of the study. Can be continuous or binary.</p>
</td></tr>
<tr><td><code id="ipdma.model.deft.onestage_+3A_study">study</code></td>
<td>
<p>vector indicating which study the patient belongs to. Please change the study names into numbers (i.e. 1, 2, 3, etc)</p>
</td></tr>
<tr><td><code id="ipdma.model.deft.onestage_+3A_treat">treat</code></td>
<td>
<p>vector indicating which treatment the patient was assigned to (i.e. 1 for treatment, 0 for placebo)</p>
</td></tr>
<tr><td><code id="ipdma.model.deft.onestage_+3A_x">X</code></td>
<td>
<p>matrix of covariate values for each patient. Dimension would be number of patients x number of covariates.</p>
</td></tr>
<tr><td><code id="ipdma.model.deft.onestage_+3A_response">response</code></td>
<td>
<p>specification of the outcome type. Must specify either &quot;normal&quot; or &quot;binomial&quot;.</p>
</td></tr>
<tr><td><code id="ipdma.model.deft.onestage_+3A_type">type</code></td>
<td>
<p>assumption on the treatment effect: either &quot;random&quot; for random effects model or &quot;fixed&quot; for fixed effects model. Default is &quot;random&quot;.</p>
</td></tr>
<tr><td><code id="ipdma.model.deft.onestage_+3A_mean.alpha">mean.alpha</code></td>
<td>
<p>prior mean for the study intercept</p>
</td></tr>
<tr><td><code id="ipdma.model.deft.onestage_+3A_prec.alpha">prec.alpha</code></td>
<td>
<p>prior precision for the study intercept</p>
</td></tr>
<tr><td><code id="ipdma.model.deft.onestage_+3A_mean.beta">mean.beta</code></td>
<td>
<p>prior mean for the regression coefficients of the main effects of the covariates; main effects are assumed to have common effect.</p>
</td></tr>
<tr><td><code id="ipdma.model.deft.onestage_+3A_prec.beta">prec.beta</code></td>
<td>
<p>prior precision for the regression coefficients of the main effects of the covariates</p>
</td></tr>
<tr><td><code id="ipdma.model.deft.onestage_+3A_mean.gamma.within">mean.gamma.within</code></td>
<td>
<p>prior mean for effect modifiers of within study information.</p>
</td></tr>
<tr><td><code id="ipdma.model.deft.onestage_+3A_prec.gamma.within">prec.gamma.within</code></td>
<td>
<p>prior precision for the effect modifiers of within study information.</p>
</td></tr>
<tr><td><code id="ipdma.model.deft.onestage_+3A_mean.gamma.across">mean.gamma.across</code></td>
<td>
<p>prior mean for the effect modifiers of across study information; effect modification is assumed to have common effect.</p>
</td></tr>
<tr><td><code id="ipdma.model.deft.onestage_+3A_prec.gamma.across">prec.gamma.across</code></td>
<td>
<p>prior precision for the effect modifiers of across study information</p>
</td></tr>
<tr><td><code id="ipdma.model.deft.onestage_+3A_mean.delta">mean.delta</code></td>
<td>
<p>prior mean for the average treatment effect</p>
</td></tr>
<tr><td><code id="ipdma.model.deft.onestage_+3A_prec.delta">prec.delta</code></td>
<td>
<p>prior precision for the average treatment effect</p>
</td></tr>
<tr><td><code id="ipdma.model.deft.onestage_+3A_hy.prior">hy.prior</code></td>
<td>
<p>prior for the heterogeneity parameter. Supports uniform, gamma, and half normal for normal and binomial response
It should be a list of length 3, where first element should be the distribution (one of dunif, dgamma, dhnorm) and the next two are the parameters associated with the distribution. For example, list(&quot;dunif&quot;, 0, 5) gives uniform prior with lower bound 0 and upper bound 5 for the heterogeneity parameter.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>data.JAGS</code></td>
<td>
<p>data organized in a list so that it can be used when running code in JAGS</p>
</td></tr>
<tr><td><code>code</code></td>
<td>
<p>JAGS code that is used to run the model. Use cat(code) to see the code in a readable format</p>
</td></tr>
<tr><td><code>model.JAGS</code></td>
<td>
<p>JAGS code in a function. This is used when running model in parallel</p>
</td></tr>
<tr><td><code>Xbar</code></td>
<td>
<p>study specific averages of covariates</p>
</td></tr>
</table>


<h3>References</h3>

<p>Fisher DJ, Carpenter JR, Morris TP, et al. Meta-analytical methods to identify who benefits most from treatments: daft, deluded, or deft approach?. <em>BMJ</em>. 2017;356:j573 doi: <a href="https://doi.org/10.1136/bmj.j573">10.1136/bmj.j573</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ds &lt;- generate_ipdma_example(type = "continuous")
ipd &lt;- with(ds, ipdma.model.deft.onestage(y = y, study = studyid, treat = treat, X = cbind(z1, z2), 
response = "normal"))

samples &lt;- ipd.run(ipd)
treatment.effect(ipd, samples, newpatient= c(1,0.5), reference = c(0, 0))

</code></pre>

<hr>
<h2 id='ipdma.model.onestage'>Make an one-stage individual patient data meta-analysis object containing data, priors, and a JAGS model code</h2><span id='topic+ipdma.model.onestage'></span>

<h3>Description</h3>

<p>This function sets up data and JAGS code that is needed to run one-stage IPD-MA models in JAGS.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ipdma.model.onestage(
  y = NULL,
  study = NULL,
  treat = NULL,
  X = NULL,
  response = "normal",
  type = "random",
  shrinkage = "none",
  scale = TRUE,
  mean.alpha = 0,
  prec.alpha = 0.001,
  mean.beta = 0,
  prec.beta = 0.001,
  mean.gamma = 0,
  prec.gamma = 0.001,
  mean.delta = 0,
  prec.delta = 0.001,
  hy.prior = list("dhnorm", 0, 1),
  lambda.prior = NULL,
  p.ind = NULL,
  g = NULL,
  hy.prior.eta = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ipdma.model.onestage_+3A_y">y</code></td>
<td>
<p>outcome of the study. Can be continuous or binary.</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_study">study</code></td>
<td>
<p>vector indicating which study the patient belongs to. Please change the study names into numbers (i.e. 1, 2, 3, etc)</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_treat">treat</code></td>
<td>
<p>vector indicating which treatment the patient was assigned to (i.e. 1 for treatment, 0 for placebo)</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_x">X</code></td>
<td>
<p>matrix of covariate values for each patient. Dimension would be number of patients x number of covariates.</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_response">response</code></td>
<td>
<p>specification of the outcome type. Must specify either &quot;normal&quot; or &quot;binomial&quot;.</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_type">type</code></td>
<td>
<p>assumption on the treatment effect: either &quot;random&quot; for random effects model or &quot;fixed&quot; for fixed effects model. Default is &quot;random&quot;.</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_shrinkage">shrinkage</code></td>
<td>
<p>shrinkage method applied to the effect modifiers. &quot;none&quot; correspond to no shrinkage.
&quot;laplace&quot; corresponds to a adaptive shrinkage with a Laplacian prior (ie often known as Bayesian LASSO).
&quot;SSVS&quot; corresponds to the Stochastic Search Variable Selection method. SSVS is not strictly a shrinkage method, but pulls the estimated coefficient toward zero through variable selection in each iteration of the MCMC. 
See O'hara et al (2009) for more details.</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_scale">scale</code></td>
<td>
<p>indicator for scaling the covariates by the overall average; default is TRUE.</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_mean.alpha">mean.alpha</code></td>
<td>
<p>prior mean for the study intercept</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_prec.alpha">prec.alpha</code></td>
<td>
<p>prior precision for the study intercept</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_mean.beta">mean.beta</code></td>
<td>
<p>prior mean for the regression coefficients of the main effects of the covariates; main effects are assumed to have common effect.</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_prec.beta">prec.beta</code></td>
<td>
<p>prior precision for the regression coefficients of the main effects of the covariates</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_mean.gamma">mean.gamma</code></td>
<td>
<p>prior mean for the effect modifiers. This parameter is not used if penalization is placed on effect modifiers.</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_prec.gamma">prec.gamma</code></td>
<td>
<p>prior precision for the effect modifiers. This parameter is not used if penalization is placed on effect modifiers.</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_mean.delta">mean.delta</code></td>
<td>
<p>prior mean for the average treatment effect</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_prec.delta">prec.delta</code></td>
<td>
<p>prior precision for the average treatment effect</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_hy.prior">hy.prior</code></td>
<td>
<p>prior for the heterogeneity parameter. Supports uniform, gamma, and half normal for normal and binomial response
It should be a list of length 3, where first element should be the distribution (one of dunif, dgamma, dhnorm) and the next two are the parameters associated with the distribution. For example, list(&quot;dunif&quot;, 0, 5) gives uniform prior with lower bound 0 and upper bound 5 for the heterogeneity parameter.</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_lambda.prior">lambda.prior</code></td>
<td>
<p>(only for shrinkage = &quot;laplace&quot;) two options for laplace shrinkage. We can put a gamma prior on the lambda (i.e. list(&quot;dgamma&quot;,2,0.1)) or put a uniform prior on the inverse of lambda (i.e. list(&quot;dunif&quot;,0,5))</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_p.ind">p.ind</code></td>
<td>
<p>(only for shrinkage = &quot;SSVS&quot;) prior probability of including each of the effect modifiers. Length should be same as the total length of the covariates.</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_g">g</code></td>
<td>
<p>(only for shrinkage = &quot;SSVS&quot;) multiplier for the precision of spike. Default is g = 1000.</p>
</td></tr>
<tr><td><code id="ipdma.model.onestage_+3A_hy.prior.eta">hy.prior.eta</code></td>
<td>
<p>(only for shrinkage = &quot;SSVS&quot;) standard deviation of the slab prior. Currently only support uniform distribution. Default is list(&quot;dunif&quot;, 0, 5)</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>data.JAGS</code></td>
<td>
<p>data organized in a list so that it can be used when running code in JAGS</p>
</td></tr>
<tr><td><code>code</code></td>
<td>
<p>JAGS code that is used to run the model. Use cat(code) to see the code in a readable format</p>
</td></tr>
<tr><td><code>model.JAGS</code></td>
<td>
<p>JAGS code in a function. This is used when running model in parallel</p>
</td></tr>
<tr><td><code>scale.mean</code></td>
<td>
<p>mean used in scaling covariates</p>
</td></tr>
<tr><td><code>scale.sd</code></td>
<td>
<p>standard deviation used in scaling covariates</p>
</td></tr>
</table>


<h3>References</h3>

<p>O'Hara RB, Sillanpaa MJ. A review of Bayesian variable selection methods: what, how and which. <em>Bayesian Anal</em>. 2009;4(1):85-117. doi: <a href="https://doi.org/10.1214/09-BA403">10.1214/09-BA403</a>
</p>
<p>Seo M, White IR, Furukawa TA, et al. Comparing methods for estimating patient-specific treatment effects in individual patient data meta-analysis. <em>Stat Med</em>. 2021;40(6):1553-1573. doi: <a href="https://doi.org/10.1002/sim.8859">10.1002/sim.8859</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ds &lt;- generate_ipdma_example(type = "continuous")
ipd &lt;- with(ds, ipdma.model.onestage(y = y, study = studyid, treat = treat, X = cbind(z1, z2), 
response = "normal", shrinkage = "none"))

samples &lt;- ipd.run(ipd)
treatment.effect(ipd, samples, newpatient= c(1,0.5))
 
</code></pre>

<hr>
<h2 id='ipdnma.model.onestage'>Make an one-stage individual patient data network meta-analysis object containing data, priors, and a JAGS model code</h2><span id='topic+ipdnma.model.onestage'></span>

<h3>Description</h3>

<p>This function sets up data and JAGS code that is needed to run one-stage IPD-NMA models in JAGS.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ipdnma.model.onestage(
  y = NULL,
  study = NULL,
  treat = NULL,
  X = NULL,
  response = "normal",
  type = "random",
  shrinkage = "none",
  scale = TRUE,
  mean.alpha = 0,
  prec.alpha = 0.001,
  mean.beta = 0,
  prec.beta = 0.001,
  mean.gamma = 0,
  prec.gamma = 0.001,
  mean.delta = 0,
  prec.delta = 0.001,
  hy.prior = list("dhnorm", 0, 1),
  lambda.prior = NULL,
  p.ind = NULL,
  g = NULL,
  hy.prior.eta = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ipdnma.model.onestage_+3A_y">y</code></td>
<td>
<p>outcome of the study. Can be continuous or binary.</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_study">study</code></td>
<td>
<p>vector indicating which study the patient belongs to. Please change the study names into numbers (i.e. 1, 2, 3, etc)</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_treat">treat</code></td>
<td>
<p>vector indicating which treatment the patient was assigned to. Since this is a network meta-analysis and there would be more than 2 treatments,
careful naming of treatment is needed. This vector needs to be a sequence from 1:NT where NT is the total number of treatments. Treatment that is assigned 1 would be the baseline treatment.</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_x">X</code></td>
<td>
<p>matrix of covariate values for each patient. Dimension would be number of patients x number of covariates.</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_response">response</code></td>
<td>
<p>specification of the outcome type. Must specify either &quot;normal&quot; or &quot;binomial&quot;.</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_type">type</code></td>
<td>
<p>assumption on the treatment effect: either &quot;random&quot; for random effects model or &quot;fixed&quot; for fixed effects model. Default is &quot;random&quot;.</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_shrinkage">shrinkage</code></td>
<td>
<p>shrinkage method applied to the effect modifiers. &quot;none&quot; correspond to no shrinkage.
&quot;laplace&quot; corresponds to a adaptive shrinkage with a Laplacian prior (ie often known as Bayesian LASSO).
&quot;SSVS&quot; corresponds to the Stochastic Search Variable Selection method. SSVS is not strictly a shrinkage method, but pulls the estimated coefficient toward zero through variable selection in each iteration of the MCMC. 
See O'hara et al (2009) for more details.</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_scale">scale</code></td>
<td>
<p>indicator for scaling the covariates by the overall average; default is TRUE.</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_mean.alpha">mean.alpha</code></td>
<td>
<p>prior mean for the study intercept</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_prec.alpha">prec.alpha</code></td>
<td>
<p>prior precision for the study intercept</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_mean.beta">mean.beta</code></td>
<td>
<p>prior mean for the regression coefficients of the main effects of the covariates; main effects are assumed to have common effect.</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_prec.beta">prec.beta</code></td>
<td>
<p>prior precision for the regression coefficients of the main effects of the covariates</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_mean.gamma">mean.gamma</code></td>
<td>
<p>prior mean for the effect modifiers. This parameter is not used if penalization is placed on effect modifiers.</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_prec.gamma">prec.gamma</code></td>
<td>
<p>prior precision for the effect modifiers. This parameter is not used if penalization is placed on effect modifiers.</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_mean.delta">mean.delta</code></td>
<td>
<p>prior mean for the average treatment effect</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_prec.delta">prec.delta</code></td>
<td>
<p>prior precision for the average treatment effect</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_hy.prior">hy.prior</code></td>
<td>
<p>prior for the heterogeneity parameter. Supports uniform, gamma, and half normal for normal and binomial response
It should be a list of length 3, where first element should be the distribution (one of dunif, dgamma, dhnorm) and the next two are the parameters associated with the distribution. For example, list(&quot;dunif&quot;, 0, 5) gives uniform prior with lower bound 0 and upper bound 5 for the heterogeneity parameter.</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_lambda.prior">lambda.prior</code></td>
<td>
<p>(only for shrinkage = &quot;laplace&quot;) two options for laplace shrinkage. We can put a gamma prior on the lambda (i.e. list(&quot;dgamma&quot;,2,0.1)) or put a uniform prior on the inverse of lambda (i.e. list(&quot;dunif&quot;,0,5))</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_p.ind">p.ind</code></td>
<td>
<p>(only for shrinkage = &quot;SSVS&quot;) prior probability of including each of the effect modifiers. Length should be same as the total length of the covariates.</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_g">g</code></td>
<td>
<p>(only for shrinkage = &quot;SSVS&quot;) multiplier for the precision of spike. Default is g = 1000.</p>
</td></tr>
<tr><td><code id="ipdnma.model.onestage_+3A_hy.prior.eta">hy.prior.eta</code></td>
<td>
<p>(only for shrinkage = &quot;SSVS&quot;) standard deviation of the slab prior. Currently only support uniform distribution. Default is list(&quot;dunif&quot;, 0, 5)</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>data.JAGS</code></td>
<td>
<p>data organized in a list so that it can be used when running code in JAGS</p>
</td></tr>
<tr><td><code>code</code></td>
<td>
<p>JAGS code that is used to run the model. Use cat(code) to see the code in a readable format</p>
</td></tr>
<tr><td><code>model.JAGS</code></td>
<td>
<p>JAGS code in a function. This is used when running model in parallel</p>
</td></tr>
<tr><td><code>scale.mean</code></td>
<td>
<p>mean used in scaling covariates</p>
</td></tr>
<tr><td><code>scale.sd</code></td>
<td>
<p>standard deviation used in scaling covariates</p>
</td></tr>
</table>


<h3>References</h3>

<p>Dias S, Sutton AJ, Ades AE, et al. A Generalized Linear Modeling Framework for Pairwise and Network Meta-analysis of Randomized Controlled Trials. <em>Medical Decision Making</em>. 2013;33(5):607-617. doi: <a href="https://doi.org/10.1177/0272989X12458724">10.1177/0272989X12458724</a>
</p>
<p>O'Hara RB, Sillanpaa MJ. A review of Bayesian variable selection methods: what, how and which. <em>Bayesian Anal</em>. 2009;4(1):85-117. doi: <a href="https://doi.org/10.1214/09-BA403">10.1214/09-BA403</a>
</p>
<p>Seo M, White IR, Furukawa TA, et al. Comparing methods for estimating patient-specific treatment effects in individual patient data meta-analysis. <em>Stat Med</em>. 2021;40(6):1553-1573. doi: <a href="https://doi.org/10.1002/sim.8859">10.1002/sim.8859</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ds &lt;- generate_ipdnma_example(type = "continuous")
ipd &lt;- with(ds, ipdnma.model.onestage(y = y, study = studyid, treat = treat, X = cbind(z1, z2), 
response = "normal", shrinkage = "none"))

samples &lt;- ipd.run(ipd)
treatment.effect(ipd, samples, newpatient= c(1,0.5))

</code></pre>

<hr>
<h2 id='treatment.effect'>Calculate patient-specific treatment effect</h2><span id='topic+treatment.effect'></span>

<h3>Description</h3>

<p>Function for calculating the patient-specific treatment effect.
Patient-specific treatment effect includes the main effect of treatment and 
treatment-covariate interaction effect (i.e. effect modification). 
Reports odds ratio for the binary outcome.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>treatment.effect(
  ipd = NULL,
  samples = NULL,
  newpatient = NULL,
  scale_mean = NULL,
  scale_sd = NULL,
  reference = NULL,
  quantiles = c(0.025, 0.5, 0.975)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="treatment.effect_+3A_ipd">ipd</code></td>
<td>
<p>IPD object created from running ipdma.model type function</p>
</td></tr>
<tr><td><code id="treatment.effect_+3A_samples">samples</code></td>
<td>
<p>MCMC samples found from running ipd.run function</p>
</td></tr>
<tr><td><code id="treatment.effect_+3A_newpatient">newpatient</code></td>
<td>
<p>covariate values of patients that you want to predict treatment effect on. Must have length equal to total number of covariates.</p>
</td></tr>
<tr><td><code id="treatment.effect_+3A_scale_mean">scale_mean</code></td>
<td>
<p>option to specify different overall mean compared to what was calculated in IPD object. can be useful when using multiple imputation.</p>
</td></tr>
<tr><td><code id="treatment.effect_+3A_scale_sd">scale_sd</code></td>
<td>
<p>option to specify different overall standard deviation compared to what was calculated in IPD object.</p>
</td></tr>
<tr><td><code id="treatment.effect_+3A_reference">reference</code></td>
<td>
<p>reference group used for finding patient-specific treatment effect. This is only used for deft approach</p>
</td></tr>
<tr><td><code id="treatment.effect_+3A_quantiles">quantiles</code></td>
<td>
<p>quantiles for credible interval of the patient-specific treatment effect</p>
</td></tr>
</table>


<h3>Value</h3>

<p>patient-specific treatment effect with credible interval at specified quantiles
</p>


<h3>References</h3>

<p>Seo M, White IR, Furukawa TA, et al. Comparing methods for estimating patient-specific treatment effects in individual patient data meta-analysis. <em>Stat Med</em>. 2021;40(6):1553-1573. doi: <a href="https://doi.org/10.1002/sim.8859">10.1002/sim.8859</a>
</p>
<p>Riley RD, Debray TP, Fisher D, et al. Individual participant data meta-analysis to examine interactions between treatment effect and participant-level covariates: Statistical recommendations for conduct and planning. <em>Stat Med</em>. 2020:39(15):2115-2137. doi: <a href="https://doi.org/10.1002/sim.8516">10.1002/sim.8516</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ds &lt;- generate_ipdma_example(type = "continuous")
ipd &lt;- with(ds, ipdma.model.onestage(y = y, study = studyid, treat = treat, X = cbind(z1, z2), 
response = "normal", shrinkage = "none"))

samples &lt;- ipd.run(ipd, pars.save = c("beta", "gamma", "delta"), n.chains = 3, n.burnin = 500, 
n.iter = 5000)
treatment.effect(ipd, samples, newpatient = c(1,0.5))

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
