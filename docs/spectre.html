<!DOCTYPE html><html><head><title>Help for package spectre</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {spectre}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#spectre'><p>spectre</p></a></li>
<li><a href='#alpha_list'><p>Matrix of predicted alpha diversity in each cell.</p></a></li>
<li><a href='#calc_commonness_error'><p>calc_commonness_error</p></a></li>
<li><a href='#estimated_gamma'><p>Total (estimated) species in the system.</p></a></li>
<li><a href='#generate_commonness_matrix_from_gdm'><p>generate_commonness_matrix_from_gdm</p></a></li>
<li><a href='#minimal_example_data'><p>List with example data created using the <code>gdm</code> package</p></a></li>
<li><a href='#plot_commonness'><p>plot_commonness</p></a></li>
<li><a href='#plot_error'><p>plot_error</p></a></li>
<li><a href='#run_optimization_min_conf'><p>run_optimization_min_conf</p></a></li>
<li><a href='#target_matrix'><p>Pairwise matrix of species in common.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Predict Regional Community Composition</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.2</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Craig Simpkins &lt;simpkinscraig063@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Predict regional community composition at a fine spatial 
    resolution using only sparse biological and environmental data. The package 
    is based on the DynamicFOAM algorithm described 
    in Mokany et al. (2011) &lt;<a href="https://doi.org/10.1111%2Fj.1461-0248.2011.01675.x">doi:10.1111/j.1461-0248.2011.01675.x</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2, Rcpp (&ge; 1.0.1)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>dplyr, testthat (&ge; 3.0.2), knitr, rmarkdown, covr,
RcppProgress</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppProgress, testthat</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>true</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>C++11</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-07-16 00:37:13 UTC; simpk</td>
</tr>
<tr>
<td>Author:</td>
<td>Craig Simpkins [aut, cre],
  Sebastian Hanss [aut],
  Maximilian Hesselbarth [aut],
  Matthias Spangenberg [aut],
  Jan Salecker [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-07-17 06:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='spectre'>spectre</h2><span id='topic+spectre'></span><span id='topic+spectre-package'></span>

<h3>Description</h3>

<p>The goal of <code>spectre</code> is to provide an open source tool capable of predicting regional community composition at fine spatial resolutions using only sparse biological and environmental data.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Craig Simpkins <a href="mailto:simpkinscraig063@gmail.com">simpkinscraig063@gmail.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Sebastian Hanss
</p>
</li>
<li><p> Maximilian Hesselbarth
</p>
</li>
<li><p> Matthias Spangenberg
</p>
</li>
<li><p> Jan Salecker
</p>
</li></ul>


<hr>
<h2 id='alpha_list'>Matrix of predicted alpha diversity in each cell.</h2><span id='topic+alpha_list'></span>

<h3>Description</h3>

<p>Matrix of predicted alpha diversity in each cell.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>alpha_list
</code></pre>


<h3>Format</h3>

<p>vector.
</p>

<hr>
<h2 id='calc_commonness_error'>calc_commonness_error</h2><span id='topic+calc_commonness_error'></span>

<h3>Description</h3>

<p>Calculate commonness error
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_commonness_error(x, objective_matrix)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calc_commonness_error_+3A_x">x</code></td>
<td>
<p>Results object from run_optimization_min_conf.</p>
</td></tr>
<tr><td><code id="calc_commonness_error_+3A_objective_matrix">objective_matrix</code></td>
<td>
<p>Matrix from (modeled) alpha-diversity and Bray-Curtis dissimilarity</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculate mean absolute commonness error (MAE_c) and relative commonness error in percentage (RCE).
</p>


<h3>Value</h3>

<p>vector
</p>

<hr>
<h2 id='estimated_gamma'>Total (estimated) species in the system.</h2><span id='topic+estimated_gamma'></span>

<h3>Description</h3>

<p>Total (estimated) species in the system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimated_gamma
</code></pre>


<h3>Format</h3>

<p>numeric
</p>

<hr>
<h2 id='generate_commonness_matrix_from_gdm'>generate_commonness_matrix_from_gdm</h2><span id='topic+generate_commonness_matrix_from_gdm'></span>

<h3>Description</h3>

<p>Creates a pairwise site by site commonness matrix from
estimates of species richness and Bray-Curtis dissimilarity.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_commonness_matrix_from_gdm(gdm_predictions, alpha_list)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generate_commonness_matrix_from_gdm_+3A_gdm_predictions">gdm_predictions</code></td>
<td>
<p>a square pairwise <code>matrix</code> of Bray-Curtis
dissimilarity estimates between site pairs. We recommend using the
gdm-package (Fitzpatrick et al. 2020) to generate this matrix</p>
</td></tr>
<tr><td><code id="generate_commonness_matrix_from_gdm_+3A_alpha_list">alpha_list</code></td>
<td>
<p>a <code>vector</code> of species richness for every site in the
study area. The length of this vector must be equivalent to one of the
dimensions of the <code>gdm_predictions</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>generate_commonness_matrix_from_gdm</code> uses a vector of
estimated species richness per site and a pairwise matrix of site by site
Bray-Curtis dissimilarity (we recommend using the gdm-package
(Fitzpatrick et al. 2020) to generate this matrix) to produce a matrix of
the estimated species in common between site pairs (referred to as a
commonness matrix). The commonness between sites is  calculated using
</p>
<p style="text-align: center;"><code class="reqn">C_{ij}=(1-\beta_{ij})(S_{i} + S_{j})/2</code>
</p>

<p>Where <code class="reqn">\beta_{ij}</code> is the dissimilarity between sites, <code class="reqn">C_{ij}</code> is
the species in common between sites, and S is the number of species in
each site. For more details see Mokany et al 2011.
</p>


<h3>Value</h3>

<p>A pairwise site by site <code>matrix</code> of the number of species in
common between each site pair, with dimensions equal to that of the
provided dissimilarity matrix.
</p>


<h3>References</h3>

<p>Mokany, K., Harwood, T.D., Overton, J.M., Barker, G.M., &amp;
Ferrier, S. (2011). Combining <code class="reqn">\alpha</code> and <code class="reqn">\beta</code> diversity models to fill
gaps in our knowledge of biodiversity. Ecology Letters, 14(10), 1043-1051.
</p>

<hr>
<h2 id='minimal_example_data'>List with example data created using the <code>gdm</code> package</h2><span id='topic+minimal_example_data'></span>

<h3>Description</h3>

<p>List with example data created using the <code>gdm</code> package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>minimal_example_data
</code></pre>


<h3>Format</h3>

<p>list
</p>

<hr>
<h2 id='plot_commonness'>plot_commonness</h2><span id='topic+plot_commonness'></span>

<h3>Description</h3>

<p>Plot commonness between observed and optimized data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_commonness(x, target)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_commonness_+3A_x">x</code></td>
<td>
<p>Results object of run_optimization_min_conf()</p>
</td></tr>
<tr><td><code id="plot_commonness_+3A_target">target</code></td>
<td>
<p>Pairwise matrix of species in common.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plot a heatmap of commonness between observed data and optimized data. This visual style allows for easier spatial understanding of commonness differences to be ascertained.
</p>


<h3>Value</h3>

<p>ggplot
</p>

<hr>
<h2 id='plot_error'>plot_error</h2><span id='topic+plot_error'></span>

<h3>Description</h3>

<p>Plot the absolute error
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_error(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_error_+3A_x">x</code></td>
<td>
<p>Results object from run_optimization_min_conf</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plot error over time
</p>


<h3>Value</h3>

<p>ggplot
</p>


<h3>References</h3>

<p>xxx
</p>

<hr>
<h2 id='run_optimization_min_conf'>run_optimization_min_conf</h2><span id='topic+run_optimization_min_conf'></span>

<h3>Description</h3>

<p>Generate an optimized estimate of community composition
(species presences and absences) for every site in the study area.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_optimization_min_conf(
  alpha_list,
  total_gamma,
  target,
  max_iterations,
  partial_solution = NULL,
  fixed_species = NULL,
  seed = NA,
  verbose = TRUE,
  interruptible = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="run_optimization_min_conf_+3A_alpha_list">alpha_list</code></td>
<td>
<p><code>Matrix</code> of predicted alpha diversity (species richness) in
each cell.</p>
</td></tr>
<tr><td><code id="run_optimization_min_conf_+3A_total_gamma">total_gamma</code></td>
<td>
<p>Total number of species present throughout the entire
landscape.</p>
</td></tr>
<tr><td><code id="run_optimization_min_conf_+3A_target">target</code></td>
<td>
<p>Pairwise matrix of species in common between each site by site
pair. Only the upper triangle of the matrix is actually needed.</p>
</td></tr>
<tr><td><code id="run_optimization_min_conf_+3A_max_iterations">max_iterations</code></td>
<td>
<p>The maximum number of iterations that the optimization
algorithm may run through before stopping.</p>
</td></tr>
<tr><td><code id="run_optimization_min_conf_+3A_partial_solution">partial_solution</code></td>
<td>
<p>An initial <code>matrix</code> of species presences and
absences for each site in the landscape. The total number of presences must
match the estimated species richness of each site.</p>
</td></tr>
<tr><td><code id="run_optimization_min_conf_+3A_fixed_species">fixed_species</code></td>
<td>
<p>Fixed partial solution with species that are considered
as given. Those species are not going to be changed during optimization.</p>
</td></tr>
<tr><td><code id="run_optimization_min_conf_+3A_seed">seed</code></td>
<td>
<p>Seed for random number generator. Seed must be a positive integer value.
<code>seed = NA</code> means that a random integer is used as seed.</p>
</td></tr>
<tr><td><code id="run_optimization_min_conf_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code> (default), a progress report is printed during
the optimization run.</p>
</td></tr>
<tr><td><code id="run_optimization_min_conf_+3A_interruptible">interruptible</code></td>
<td>
<p>Allow a run to be interrupted before completion.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>run_optimization_min_conf</code> is the core function of the
<code>spectre</code> package. The underlying algorithm of this function is
adapted from Mokany et al. (2011). A pairwise commonness matrix (having the
same structure as the <code>target</code> matrix) is calculated from the
<code>partial_solution</code> matrix and the value difference with the
<code>target</code> determined. If a difference is present and depending on the
set stopping criteria the algorithm continues. A random site in the
presence/absence matrix is selected, and a random presence record at this
site replaced with an absence. Every absence in the selected site is then
individually flipped to a presence and the value difference with the
objective recorded. The presence record which resulted in the lowest value
difference (minimum conflict) is retained. This cycle continues, with a
random site selected every iteration, until the pairwise commonness and
objective matrices match or the algorithm runs beyond the
<code>max_iterations</code>.
</p>


<h3>Value</h3>

<p>A species presence/absence <code>matrix</code> of the study landscape.
</p>


<h3>References</h3>

<p>Mokany, K., Harwood, T.D., Overton, J.M., Barker, G.M., &amp;
Ferrier, S. (2011). Combining <code class="reqn">\alpha</code> and <code class="reqn">\beta</code> diversity models to fill
gaps in our knowledge of biodiversity. Ecology Letters, 14(10), 1043-1051.
</p>

<hr>
<h2 id='target_matrix'>Pairwise matrix of species in common.</h2><span id='topic+target_matrix'></span>

<h3>Description</h3>

<p>Pairwise matrix of species in common.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>target_matrix
</code></pre>


<h3>Format</h3>

<p>matrix
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
