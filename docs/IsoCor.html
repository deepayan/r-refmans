<!DOCTYPE html><html lang="en"><head><title>Help for package IsoCor</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {IsoCor}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#find_peak_boundaries'><p>find_peak_boundaries</p></a></li>
<li><a href='#ic_app'><p>ic_app.</p></a></li>
<li><a href='#iso_ratio'><p>iso_ratio</p></a></li>
<li><a href='#isotopes'><p>isotopes.</p></a></li>
<li><a href='#mass_bias'><p>mass_bias.</p></a></li>
<li><a href='#read_raw_data'><p>read_raw_data</p></a></li>
<li><a href='#testdata'><p>testdata.</p></a></li>
<li><a href='#testdata_IDMS'><p>testdata_IDMS.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Analyze Isotope Ratios in a 'Shiny'-App</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.8</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-09-09</td>
</tr>
<tr>
<td>Description:</td>
<td>Analyzing Inductively Coupled Plasma - Mass Spectrometry (ICP-MS) 
    measurement data to evaluate isotope ratios (IRs) is a complex process. 
    The 'IsoCor' package facilitates this process and renders it reproducible 
    by providing a function to run a 'Shiny'-App locally in any web browser. 
    In this App the user can upload data files of various formats, select ion 
    traces, apply peak detection and perform calculation of IRs and delta 
    values. Results are provided as figures and tables and can be exported. 
    The App, therefore, facilitates data processing of ICP-MS experiments to 
    quickly obtain optimal processing parameters compared to traditional 'Excel'
    worksheet based approaches. A more detailed description can be found in the 
    corresponding article &lt;<a href="https://doi.org/10.1039%2FD2JA00208F">doi:10.1039/D2JA00208F</a>&gt;. The most recent version 
    of 'IsoCor' can be tested online at <a href="https://apps.bam.de/shn00/IsoCor/">https://apps.bam.de/shn00/IsoCor/</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/janlisec/IsoCor">https://github.com/janlisec/IsoCor</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>bslib, config, DT, golem, MALDIquant, markdown (&ge; 1.5.0),
plyr, shiny, shinyalert (&ge; 3.1), shinyjs</td>
</tr>
<tr>
<td>Suggests:</td>
<td>shinytest2, testthat (&ge; 3.0.0), vdiffr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>LazyDataCompression:</td>
<td>bzip2</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-09-10 11:59:19 UTC; jlisec</td>
</tr>
<tr>
<td>Author:</td>
<td>Jan Lisec <a href="https://orcid.org/0000-0003-1220-2286"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jan Lisec &lt;jan.lisec@bam.de&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-09-10 12:10:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='find_peak_boundaries'>find_peak_boundaries</h2><span id='topic+find_peak_boundaries'></span>

<h3>Description</h3>

<p><code>find_peak_boundaries</code> will find the start and end point
of a peak based on curve derivative.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_peak_boundaries(
  int = NULL,
  p = which.max(int),
  k = 3,
  min_scans = 3,
  noise = 0
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="find_peak_boundaries_+3A_int">int</code></td>
<td>
<p>Numeric vector (of intensity values).</p>
</td></tr>
<tr><td><code id="find_peak_boundaries_+3A_p">p</code></td>
<td>
<p>Index of peak position (usually 'which.max(int)).</p>
</td></tr>
<tr><td><code id="find_peak_boundaries_+3A_k">k</code></td>
<td>
<p>Number of scans at peak boarder to confirm peak valley.</p>
</td></tr>
<tr><td><code id="find_peak_boundaries_+3A_min_scans">min_scans</code></td>
<td>
<p>Minimum number of scans in front or tail.</p>
</td></tr>
<tr><td><code id="find_peak_boundaries_+3A_noise">noise</code></td>
<td>
<p>A threshold value. All Values below or equal to noise will be set to zero.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function provides a simple detection algorithm for peak boundaries.
It will accept a numeric vector as input and determine relative to the global maximum
(or a user provided local maximum) the left and right border where intensity decrease
ends and intensity is increasing again.
</p>


<h3>Value</h3>

<p>A numeric vector of length 2 giving the indexes of peak start and peak end.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
x &lt;- sin(seq(-pi,2*pi,0.01))+1
plot(x)
abline(v=find_peak_boundaries(x))

## End(Not run)
</code></pre>

<hr>
<h2 id='ic_app'>ic_app.</h2><span id='topic+ic_app'></span>

<h3>Description</h3>

<p><code>ic_app</code> will start a shiny app that allows to upload raw
data, process selectively and analyze different methods of ratio calculation
between two intensity traces.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ic_app(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ic_app_+3A_...">...</code></td>
<td>
<p>Options passed to golem::with_golem_options.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The app is described in detail in <a href="https://doi.org/10.1039/D2JA00208F">doi:10.1039/D2JA00208F</a>.
</p>


<h3>Value</h3>

<p>A shiny app object. This will effectively launch a browser and start
the app on local port 7462.
</p>


<h3>See Also</h3>

<p><a href="#topic+iso_ratio">iso_ratio</a>
</p>

<hr>
<h2 id='iso_ratio'>iso_ratio</h2><span id='topic+iso_ratio'></span>

<h3>Description</h3>

<p><code>iso_ratio</code> will calculate a robust estimate of an
isotopic ratio between intensity values of 2 mass traces.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>iso_ratio(data, method = c("PBP", "PAI", "LRS"), thr = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iso_ratio_+3A_data">data</code></td>
<td>
<p>data.frame with two columns specifying data for isotope 1 and 2 respectively.</p>
</td></tr>
<tr><td><code id="iso_ratio_+3A_method">method</code></td>
<td>
<p>Method to calculate the isotope ratio.</p>
</td></tr>
<tr><td><code id="iso_ratio_+3A_thr">thr</code></td>
<td>
<p>Threshold between 0..1 to limit the peaks scans used in the calculation (1=all scans, 0=apex only).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Within <code><a href="#topic+ic_app">ic_app</a></code> we compute estimates for isotope ratios
using raw data and several processing steps. <code>iso_ratio</code> is internally
used to perform this calculation and could be used in an external data
processing pipeline without the app context.
However, users would need to extract intensity vectors of isotope peaks
from raw data independently.
<em><strong>Note!</strong></em> All non-finite values and x==0 will be removed before calculation.
</p>


<h3>Value</h3>

<p>A single numeric value. The robust ratio estimate calculated from <code>data</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>peak1 &lt;- 1 + cos(x = seq(-pi, pi, length.out = 100))
peak2 &lt;- 0.05 * peak1 * runif(n = 100, min = 1, max = 1.01)
iso_ratio(data = cbind(peak1, peak2))
</code></pre>

<hr>
<h2 id='isotopes'>isotopes.</h2><span id='topic+isotopes'></span>

<h3>Description</h3>

<p>isotopes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(isotopes)
</code></pre>


<h3>Format</h3>

<p>A data.frame of chemical isotopes providing mass and natural abundance.
</p>


<h3>Source</h3>

<p>R-package enviPat
</p>

<hr>
<h2 id='mass_bias'>mass_bias.</h2><span id='topic+mass_bias'></span>

<h3>Description</h3>

<p><code>mass_bias</code> will calculate a correction factor K to
scale isotopic ratios and thereby account for machine variance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mass_bias(
  mi_amu = 0,
  si_amu = 0,
  method = c("Linear", "Russel", "Exponential"),
  f_value = 0
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mass_bias_+3A_mi_amu">mi_amu</code></td>
<td>
<p>atomic mass of MI isotope.</p>
</td></tr>
<tr><td><code id="mass_bias_+3A_si_amu">si_amu</code></td>
<td>
<p>atomic mass of SI isotope</p>
</td></tr>
<tr><td><code id="mass_bias_+3A_method">method</code></td>
<td>
<p>Method to calculate the mass bias.</p>
</td></tr>
<tr><td><code id="mass_bias_+3A_f_value">f_value</code></td>
<td>
<p>f_value to be used within the method calculation.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently, 3 methods are available to calculate the mass bias,
Linear, Russel and Exponential. They all depend on the atomic mass
of the two ion traces and a f-value which can be provided as
parameters to the function.
</p>


<h3>Value</h3>

<p>A single numeric value K to be used for scaling.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>IsoCor::mass_bias(32, 34, "Linear", 0.1)
</code></pre>

<hr>
<h2 id='read_raw_data'>read_raw_data</h2><span id='topic+read_raw_data'></span>

<h3>Description</h3>

<p><code>read_raw_data</code> will import ICP MS data in various file formats.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_raw_data(path, format = c("exp", "icp", "data", "generic"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_raw_data_+3A_path">path</code></td>
<td>
<p>Valid file path.</p>
</td></tr>
<tr><td><code id="read_raw_data_+3A_format">format</code></td>
<td>
<p>Character specifying the import file format.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Try to specify 'format' parameter to find a method suitable for your
files or select 'generic' which will import a tab delimited file with 3 columns
defining RT, MI and SI respectively.
You may check why data import of your files fails in the app on this function
and potentially extend it to handle your files.
</p>


<h3>Value</h3>

<p>A data.frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>str(IsoCor::read_raw_data(path = ""))
</code></pre>

<hr>
<h2 id='testdata'>testdata.</h2><span id='topic+testdata'></span>

<h3>Description</h3>

<p>testdata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(testdata)
</code></pre>


<h3>Format</h3>

<p>A list of 3 exp spectra files converted by read_raw_data.
</p>


<h3>Source</h3>

<p>dariya.tukhmetova@bam.de
</p>

<hr>
<h2 id='testdata_IDMS'>testdata_IDMS.</h2><span id='topic+testdata_IDMS'></span>

<h3>Description</h3>

<p>testdata_IDMS.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(testdata_IDMS)
</code></pre>


<h3>Format</h3>

<p>A list of 3 txt spectra files converted by read_raw_data.
</p>


<h3>Source</h3>

<p>dariya.tukhmetova@bam.de
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
