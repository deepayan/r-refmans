<!DOCTYPE html><html><head><title>Help for package hwsdr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {hwsdr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#hwsd_meta_data'><p>HWSD v1.2 (ORNL DAAC) meta-data</p></a></li>
<li><a href='#hwsd2'><p>HWSD v2.0 database</p></a></li>
<li><a href='#ws_download'><p>Download HWSD v2.0 data</p></a></li>
<li><a href='#ws_get'><p>Basic HWSD download function</p></a></li>
<li><a href='#ws_subset'><p>Subset ORNL DAAC HWSD data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Interface to the 'HWSD' Web Services</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Programmatic interface to the Harmonized World Soil Database 
    'HWSD' web services (<a href="https://daac.ornl.gov/cgi-bin/dsviewer.pl?ds_id=1247">https://daac.ornl.gov/cgi-bin/dsviewer.pl?ds_id=1247</a>).
    Allows for easy downloads of 'HWSD' soil data directly to your R workspace 
    or your computer. Routines for both single pixel data downloads and
    gridded data are provided.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.2)</td>
</tr>
<tr>
<td>Imports:</td>
<td>sf, terra, httr, dplyr, utils</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL-3</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ncdf4, knitr, markdown, covr, testthat</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/bluegreen-labs/hwsdr">https://github.com/bluegreen-labs/hwsdr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bluegreen-labs/hwsdr/issues">https://github.com/bluegreen-labs/hwsdr/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-16 10:55:56 UTC; khufkens</td>
</tr>
<tr>
<td>Author:</td>
<td>Koen Hufkens <a href="https://orcid.org/0000-0002-5070-8109"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  BlueGreen Labs [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Koen Hufkens &lt;koen.hufkens@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-16 11:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='hwsd_meta_data'>HWSD v1.2 (ORNL DAAC) meta-data</h2><span id='topic+hwsd_meta_data'></span>

<h3>Description</h3>

<p>Data frame with meta-data on the ORNL DAAC parameters one can query
using the THREDDS server. In addition a brief description of the
various data products and their units is provided.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hwsd_meta_data
</code></pre>


<h3>Format</h3>

<p>data.frame
</p>

<dl>
<dt>parameter</dt><dd><p>parameter names used in THREDDS server call</p>
</dd>
<dt>subset</dt><dd><p>bands within a data product (only for CLM data)</p>
</dd>
<dt>description</dt><dd><p>general description of the variable</p>
</dd>
<dt>units</dt><dd><p>units of the variable</p>
</dd>
</dl>


<hr>
<h2 id='hwsd2'>HWSD v2.0 database</h2><span id='topic+hwsd2'></span>

<h3>Description</h3>

<p>Database holding the full HWSD v2.0 database layer information
for the main soil type specified. For the fields included (i.e.
the column names I refer to the FAO documentation).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hwsd2
</code></pre>


<h3>Format</h3>

<p>data.frame
</p>

<hr>
<h2 id='ws_download'>Download HWSD v2.0 data</h2><span id='topic+ws_download'></span>

<h3>Description</h3>

<p>Downloads both the database and gridded HWSD v2.0 data products
to a desired output path for subsetting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ws_download(ws_path = file.path(tempdir(), "ws_db"), verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ws_download_+3A_ws_path">ws_path</code></td>
<td>
<p>the path / directory where to store the HWSD v2.0 database</p>
</td></tr>
<tr><td><code id="ws_download_+3A_verbose">verbose</code></td>
<td>
<p>verbose messaging of downloading and managing the gridded
data file</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When an existing path is used which is not the temporary directory
an environmental variable WS_PATH can be set by creating an ~/.Renviron file
using usethis::edit_r_environ() and entering the path as:
</p>
<p>WS_PATH = &quot;/your/full/path&quot;
</p>
<p>This variable will override the default temporary directory if it exists.
This allows the gridded data to be stored elsewhere and be forgotten 
(while using the hwsdr package for HWSD v2.0).
</p>
<p>Should you delete the gridded file, the environmental variable should be
altered and set again by editting the ~/.Renviron file to a new location.
</p>


<h3>Value</h3>

<p>current data path
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
 
 # Download the gridded soil map of
 # HWSD v2.0 to the temporary directory
 ws_download()
 
 # download the same data to a specific
 # directory (which should exist)
 ws_download(
  ws_path = "~/my_path"
 )
 
 # download the same data to a specific
 # directory (which should exist) and
 # update the environmental variable
 ws_download(
 ws_path = "~/my_path",
 verbose = TRUE
 )

## End(Not run)
</code></pre>

<hr>
<h2 id='ws_get'>Basic HWSD download function</h2><span id='topic+ws_get'></span>

<h3>Description</h3>

<p>Downloads HWSD data, wrapped by <code>ws_subset()</code> for convenient use. This is a
function mainly for internal use but exposed so people can benefit from
it in other (more flexible) setups if so desired.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ws_get(location, param, path, internal = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ws_get_+3A_location">location</code></td>
<td>
<p>file with several site locations and coordinates
in a comma delimited format: site, latitude, longitude</p>
</td></tr>
<tr><td><code id="ws_get_+3A_param">param</code></td>
<td>
<p>which soil parameter to use</p>
</td></tr>
<tr><td><code id="ws_get_+3A_path">path</code></td>
<td>
<p>default is tempdir()</p>
</td></tr>
<tr><td><code id="ws_get_+3A_internal">internal</code></td>
<td>
<p>return an internal raster or just retain values in the path</p>
</td></tr>
</table>


<h3>Value</h3>

<p>HWSD data as a raster file
</p>

<hr>
<h2 id='ws_subset'>Subset ORNL DAAC HWSD data</h2><span id='topic+ws_subset'></span>

<h3>Description</h3>

<p>Subset function to query pixel or spatial data from the
ORNL DAAC HWSD THREDDS server. Returns a tidy data frame
for point locations or raster data to the workspace or
disk.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ws_subset(
  location = c(32, -81, 34, -80),
  site = "HWSD",
  param = "ALL",
  layer = "D1",
  path = tempdir(),
  ws_path = file.path(tempdir(), "ws_db"),
  internal = TRUE,
  rate = 0.1,
  version = 1.2,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ws_subset_+3A_location">location</code></td>
<td>
<p>location of a bounding box c(lon, lat, lon, lat) defined
by a bottom-left and top-right coordinates, a single location (lon, lat)</p>
</td></tr>
<tr><td><code id="ws_subset_+3A_site">site</code></td>
<td>
<p>sitename for the extracted location</p>
</td></tr>
<tr><td><code id="ws_subset_+3A_param">param</code></td>
<td>
<p>soil parameters to provide, the default setting is ALL, this 
will download all available soil parameters.Check
https://daac.ornl.gov/SOILS/guides/HWSD.html for parameter descriptions.</p>
</td></tr>
<tr><td><code id="ws_subset_+3A_layer">layer</code></td>
<td>
<p>which soil depth layer of HWSD v2.0 to consider, layers are
named D1 to D7 from top to bottom</p>
</td></tr>
<tr><td><code id="ws_subset_+3A_path">path</code></td>
<td>
<p>path where to download the data to (only applicable to
spatial data)</p>
</td></tr>
<tr><td><code id="ws_subset_+3A_ws_path">ws_path</code></td>
<td>
<p>path to the gridded HWSD v2.0 data, only required/used if
querying v2.0 data</p>
</td></tr>
<tr><td><code id="ws_subset_+3A_internal">internal</code></td>
<td>
<p>do not store the data on disk</p>
</td></tr>
<tr><td><code id="ws_subset_+3A_rate">rate</code></td>
<td>
<p>request rate in seconds, determines how long to wait between 
queries to avoid bouncing because of rate limitations</p>
</td></tr>
<tr><td><code id="ws_subset_+3A_version">version</code></td>
<td>
<p>version of HWSD to query (numeric value). By default the
package will query the ORNL DAAC v1.2 via their API. If specifying the
later version (2.0) it will download or require the gridded spatial data
in addition to the included HWSD v2.0 database with soil parameters.</p>
</td></tr>
<tr><td><code id="ws_subset_+3A_verbose">verbose</code></td>
<td>
<p>verbose output during processing, only covers the internal
use of the ws_download() function for HWSD v2.0 data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Local geotiff data, or a data frame with HWSD soil information
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
 # extract sand fraction values
 # for a point location
 values &lt;- ws_subset(
    site = "HWSD",
    location = c(34, -81),
    param = "T_SAND"
   )
   
 print(values)
 
 # Download a soil fraction map
 # of sand for a given bounding box
 t_sand &lt;- ws_subset(
    site = "HWSD",
    location = c(32, -81, 34, -80),
    param = "T_SAND",
    path = tempdir(),
    internal = TRUE
   )
   
 terra::plot(t_sand)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
