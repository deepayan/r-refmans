<!DOCTYPE html><html lang="en"><head><title>Help for package pargasite</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {pargasite}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#pargasite-package'><p>pargasite: Pollution-Associated Risk Geospatial Analysis Site</p></a></li>
<li><a href='#create_pargasite_data'><p>Create a data cube for air pollutant levels covering the conterminous United</p>
States</a></li>
<li><a href='#create_raster'><p>Raster creation function</p></a></li>
<li><a href='#list_pollutant_standards'><p>Look up National Ambient Air Quality Standards (NAAQS)</p></a></li>
<li><a href='#ozone20km'><p>Ozone concentration data</p></a></li>
<li><a href='#run_pargasite'><p>Run pargasite application</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Pollution-Associated Risk Geospatial Analysis Site</td>
</tr>
<tr>
<td>Version:</td>
<td>2.1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Offers tools to estimate and visualize levels of major pollutants
             (CO, NO2, SO2, Ozone, PM2.5 and PM10) across the conterminous
             United States for user-defined time ranges. Provides functions to
             retrieve pollutant data from the U.S. Environmental Protection
             Agency’s 'Air Quality System' (AQS) API service
             <a href="https://aqs.epa.gov/aqsweb/documents/data_api.html">https://aqs.epa.gov/aqsweb/documents/data_api.html</a> for
             interactive visualization through a 'shiny' application, allowing
             users to explore pollutant levels for a given location over time
             relative to the National Ambient Air Quality Standards (NAAQS).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/BSD-3-Clause">BSD_3_clause</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, gstat, leaflet, leafsync, methods, raqs, rlang, sf (&ge;
1.0-15), shiny, shinycssloaders, stars (&ge; 0.6-5), stats, utils</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-11-16 15:37:54 UTC; jaehyun</td>
</tr>
<tr>
<td>Author:</td>
<td>Jaehyun Joo [aut, cre],
  Rebecca Greenblatt [aut],
  Avantika Diwadkar [aut],
  Nisha Narayanan [aut],
  Blanca Himes [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jaehyun Joo &lt;jaehyunjoo@outlook.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-11-16 15:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='pargasite-package'>pargasite: Pollution-Associated Risk Geospatial Analysis Site</h2><span id='topic+pargasite'></span><span id='topic+pargasite-package'></span>

<h3>Description</h3>

<p>Offers tools to estimate and visualize levels of major pollutants (CO, NO2, SO2, Ozone, PM2.5 and PM10) across the conterminous United States for user-defined time ranges. Provides functions to retrieve pollutant data from the U.S. Environmental Protection Agency’s 'Air Quality System' (AQS) API service <a href="https://aqs.epa.gov/aqsweb/documents/data_api.html">https://aqs.epa.gov/aqsweb/documents/data_api.html</a> for interactive visualization through a 'shiny' application, allowing users to explore pollutant levels for a given location over time relative to the National Ambient Air Quality Standards (NAAQS).
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Jaehyun Joo <a href="mailto:jaehyunjoo@outlook.com">jaehyunjoo@outlook.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Rebecca Greenblatt
</p>
</li>
<li><p> Avantika Diwadkar
</p>
</li>
<li><p> Nisha Narayanan
</p>
</li>
<li><p> Blanca Himes
</p>
</li></ul>


<hr>
<h2 id='create_pargasite_data'>Create a data cube for air pollutant levels covering the conterminous United
States</h2><span id='topic+create_pargasite_data'></span>

<h3>Description</h3>

<p>A function to create a raster-based pollutant concentration input for
pargasite's shiny application. It downloads pollutant data via the
Environmental Protection Agency's (EPA) Air Quality System (AQS) API
service, filters the data by exceptional event (e.g., wildfire) status, and
performs the inverse distance weighted (IDW) interpolation to estimate
pollutant concentrations covering the conterminous United States (CONUS) at
user-defined time ranges.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_pargasite_data(
  pollutant = c("CO", "SO2", "NO2", "Ozone", "PM2.5", "PM10"),
  data_field = c("NAAQS_statistic", "arithmetic_mean"),
  event_filter = c("Events Included", "Events Excluded", "Concurred Events Excluded"),
  year,
  by_month = FALSE,
  cell_size = 10000,
  nmax = Inf,
  aqs_email = get_aqs_email(),
  aqs_key = get_aqs_key(),
  download_chunk_size = c("2-week", "month")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_pargasite_data_+3A_pollutant">pollutant</code></td>
<td>
<p>A string specifying an air pollutant to create a raster
data cube. Must be one of CO2, SO2, NO2, Ozone, PM2.5 and PM10.</p>
</td></tr>
<tr><td><code id="create_pargasite_data_+3A_data_field">data_field</code></td>
<td>
<p>A vector of strings specifying whether which data fields
are used to summarize the data. Must be either 'NAAQS statistic',
'arithmetic_mean', or both. 'NAAQS_statistic' try to chooses an
appropriate field based on National Ambient Air Quality Standards (NAAQS)
in the AQS yearly data (e.g, for CO 1-hour average, 'second_max_value'
would be chosen). 'arithmetic_mean' represents the measure of central
tendency in the yearly data. Ignored when <code>by_month = TRUE</code>.</p>
</td></tr>
<tr><td><code id="create_pargasite_data_+3A_event_filter">event_filter</code></td>
<td>
<p>A vector of strings indicating whether data measured
during exceptional events are included in the summary. 'Events Included'
means that events occurred and the data from theme is included in the
summary. 'Events Excluded' means that events occurred but data from them
is excluded from the summary. 'Concurred Events Excluded' means that
events occurred but only EPA concurred exclusions are removed from the
summary. If multiple values are specified, pollutant levels for each
filter are stored in <code>event</code> dimension in the resulting output.</p>
</td></tr>
<tr><td><code id="create_pargasite_data_+3A_year">year</code></td>
<td>
<p>A vector of 4-digit numeric values specifying years to retrieve
pollutant levels.</p>
</td></tr>
<tr><td><code id="create_pargasite_data_+3A_by_month">by_month</code></td>
<td>
<p>A logical value indicating whether data summarized at
monthly level instead of yearly level.</p>
</td></tr>
<tr><td><code id="create_pargasite_data_+3A_cell_size">cell_size</code></td>
<td>
<p>A numeric value specifying a cell size of grid cells in
meters.</p>
</td></tr>
<tr><td><code id="create_pargasite_data_+3A_nmax">nmax</code></td>
<td>
<p>An integer value specifying the number of nearest observations
that should be used for spatial interpolation.</p>
</td></tr>
<tr><td><code id="create_pargasite_data_+3A_aqs_email">aqs_email</code></td>
<td>
<p>A string specifying the registered email for AQS API
service.</p>
</td></tr>
<tr><td><code id="create_pargasite_data_+3A_aqs_key">aqs_key</code></td>
<td>
<p>A string specifying the registered key for AQS API service.</p>
</td></tr>
<tr><td><code id="create_pargasite_data_+3A_download_chunk_size">download_chunk_size</code></td>
<td>
<p>A string specifying a chunk size for AQS API
daily data download to prevent an unexpected server timeout error. Ignored
when <code>by_month = FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, it returns yearly-summarized concentrations using AQS's annual
data but can also provide monthly-summarized concentrations by aggregating
AQS's daily data. Note that the function chooses an appropriate data field
for each pollutant to check the air quality status based on the National
Ambient Air Quality Standard (NAAQS) for yearly-summarized outputs as
follows
</p>

<ul>
<li><p> CO 1-hour: <code>second_max_value</code> field
</p>
</li>
<li><p> CO 8-hour: <code>second_max_nonoverlap</code> field
</p>
</li>
<li><p> SO2 1-hour: <code>ninety_ninth_percentile</code> field
</p>
</li>
<li><p> NO2 1-hour: <code>nineth_eighth_percentile</code> field
</p>
</li>
<li><p> NO2 Annual: <code style="white-space: pre;">&#8288;arithmetic mean&#8288;</code> field
</p>
</li>
<li><p> Ozone 8-hour: <code>fourth_max_value</code> field
</p>
</li>
<li><p> PM10 24-hour: <code>primary_exceedance_count</code> field
</p>
</li>
<li><p> PM25 24-hour: <code>ninety_eighth_percentile</code> field
</p>
</li>
<li><p> PM25 Annual: <code>arithmetic_mean</code> field
</p>
</li></ul>

<p>For monthly-summarized outputs, it uses the <code>arithmetic_mean</code> field of daily
data. Please check AQS API <code>metaData/fieldsByService</code> (see
<a href="raqs.html#topic+aqs_metadata">raqs::metadata_fieldsbyservice</a>) and
<a href="https://aqs.epa.gov/aqsweb/documents/AQS_Data_Dictionary.html">AQS
data dictionary</a> for the details of field descriptions.
</p>
<p>For spatial interpolation, the AQS data is projected to EPSG:6350 (NAD83
CONUS Albers), and thus, <code>cell_size</code> value is represented in meters (5,000
creates 5km x 5km grid). The smaller <code>cell_size</code>, the more processing time
is required.
</p>


<h3>Value</h3>

<p>A stars object containing the interpolated pollutant levels over
CONUS.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

## Set your AQS API key first using [raqs::set_aqs_user] to run the example.

## SO2 and CO concentrations through 2020 to 2022
so2 &lt;- create_pargasite_data("SO2", "Events Included", year = 2020:2022)
co &lt;- create_pargasite_data("CO", "Events Included", year = 2020:2022)

## Combine them; can combine other pollutant grids in the same way
pargasite_input &lt;- c(so2, co)

## End(Not run)

</code></pre>

<hr>
<h2 id='create_raster'>Raster creation function</h2><span id='topic+create_raster'></span>

<h3>Description</h3>

<p>This function is used internally by <a href="#topic+create_pargasite_data">create_pargasite_data</a>, allowing users
to specify a longitude/latitude bounding box. It is exported for package
development, not for direct user calls.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_raster(
  parameter_code,
  pollutant_standard = NULL,
  data_field = c("NAAQS_statistic", "arithmetic_mean"),
  event_filter = c("Events Included", "Events Excluded", "Concurred Events Excluded"),
  year,
  by_month = FALSE,
  minlat = 24,
  maxlat = 50,
  minlon = -124,
  maxlon = -66,
  crs = 6350,
  cell_size = 10000,
  aqs_email = get_aqs_email(),
  aqs_key = get_aqs_key(),
  nmax = Inf,
  download_chunk_size = c("2-week", "month")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_raster_+3A_parameter_code">parameter_code</code></td>
<td>
<p>A numeric value specifying a AQS parameter code.</p>
</td></tr>
<tr><td><code id="create_raster_+3A_pollutant_standard">pollutant_standard</code></td>
<td>
<p>A vector of strings specifying unique pollutant
standards in AQS (e.g., PM25 Annual 2012).</p>
</td></tr>
<tr><td><code id="create_raster_+3A_data_field">data_field</code></td>
<td>
<p>A vector of strings specifying whether which data fields
are used to summarize the data. Must be either 'NAAQS statistic',
'arithmetic_mean', or both. 'NAAQS_statistic' try to chooses an
appropriate field based on National Ambient Air Quality Standards (NAAQS)
in the AQS yearly data (e.g, for CO 1-hour average, 'second_max_value'
would be chosen). 'arithmetic_mean' represents the measure of central
tendency in the yearly data. Ignored when <code>by_month = TRUE</code>.</p>
</td></tr>
<tr><td><code id="create_raster_+3A_event_filter">event_filter</code></td>
<td>
<p>A vector of strings indicating whether data measured
during exceptional events are included in the summary. 'Events Included'
means that events occurred and the data from theme is included in the
summary. 'Events Excluded' means that events occurred but data from them
is excluded from the summary. 'Concurred Events Excluded' means that
events occurred but only EPA concurred exclusions are removed from the
summary. If multiple values are specified, pollutant levels for each
filter are stored in <code>event</code> dimension in the resulting output.</p>
</td></tr>
<tr><td><code id="create_raster_+3A_year">year</code></td>
<td>
<p>A vector of 4-digit numeric values specifying years to retrieve
pollutant levels.</p>
</td></tr>
<tr><td><code id="create_raster_+3A_by_month">by_month</code></td>
<td>
<p>A logical value indicating whether data summarized at
monthly level instead of yearly level.</p>
</td></tr>
<tr><td><code id="create_raster_+3A_minlat">minlat</code>, <code id="create_raster_+3A_maxlat">maxlat</code>, <code id="create_raster_+3A_minlon">minlon</code>, <code id="create_raster_+3A_maxlon">maxlon</code></td>
<td>
<p>A numeric value specifying a bounding box
defined by two latitudes and two longitudes.</p>
</td></tr>
<tr><td><code id="create_raster_+3A_crs">crs</code></td>
<td>
<p>A target coordinate reference system.</p>
</td></tr>
<tr><td><code id="create_raster_+3A_cell_size">cell_size</code></td>
<td>
<p>A numeric value specifying a cell size of grid cells in
meters.</p>
</td></tr>
<tr><td><code id="create_raster_+3A_aqs_email">aqs_email</code></td>
<td>
<p>A string specifying the registered email for AQS API
service.</p>
</td></tr>
<tr><td><code id="create_raster_+3A_aqs_key">aqs_key</code></td>
<td>
<p>A string specifying the registered key for AQS API service.</p>
</td></tr>
<tr><td><code id="create_raster_+3A_nmax">nmax</code></td>
<td>
<p>An integer value specifying the number of nearest observations
that should be used for spatial interpolation.</p>
</td></tr>
<tr><td><code id="create_raster_+3A_download_chunk_size">download_chunk_size</code></td>
<td>
<p>A string specifying a chunk size for AQS API
daily data download to prevent an unexpected server timeout error. Ignored
when <code>by_month = FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A stars object containing the interpolated pollutant levels covering
the user-specified bounding box.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

## Set your AQS API key first using [raqs::set_aqs_user] to run the example.

## SO2 through 2021 to 2022
so2 &lt;- create_raster(42401, event_filter = "Events Included",
                     year = 2021:2022)

## End(Not run)

</code></pre>

<hr>
<h2 id='list_pollutant_standards'>Look up National Ambient Air Quality Standards (NAAQS)</h2><span id='topic+list_pollutant_standards'></span>

<h3>Description</h3>

<p>A function to show pollutant standard information on criteria air
pollutants.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_pollutant_standards(parameter_code = NULL, detail = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_pollutant_standards_+3A_parameter_code">parameter_code</code></td>
<td>
<p>An AQS parameter code to retrieve specific standard
information. If <code>NULL</code> (default), display all pollutant standards.</p>
</td></tr>
<tr><td><code id="list_pollutant_standards_+3A_detail">detail</code></td>
<td>
<p>A logical value indicating whether detailed information is
retrieved.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame containing the pollutant standard information
</p>


<h3>References</h3>

<p>Data source:
<a href="https://aqs.epa.gov/aqsweb/documents/codetables/pollutant_standards.html">https://aqs.epa.gov/aqsweb/documents/codetables/pollutant_standards.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>list_pollutant_standards()

</code></pre>

<hr>
<h2 id='ozone20km'>Ozone concentration data</h2><span id='topic+ozone20km'></span>

<h3>Description</h3>

<p>A stars object containing ozone concentrations covering the conterminous
United States for years 2021-2022 on a 20km x 20km grid.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ozone20km
</code></pre>


<h3>Format</h3>

<p>A stars object with 4 dimensions and 1 attribute
</p>

<dl>
<dt>x, y</dt><dd><p>dimension; raster coordinates</p>
</dd>
<dt>event</dt><dd><p>dimension; exceptional event filter</p>
</dd>
<dt>year</dt><dd><p>dimension; years of data available</p>
</dd>
<dt>ozone_8_hour_2015</dt><dd><p>attribute; ozone levels based on Ozone 8-hour 2015
standard</p>
</dd>
</dl>


<hr>
<h2 id='run_pargasite'>Run pargasite application</h2><span id='topic+run_pargasite'></span>

<h3>Description</h3>

<p>Launch a Shiny application to visualize pollutant levels of the conterminous
US. The system's default web browser will be launched automatically after
the app is started.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_pargasite(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_pargasite_+3A_x">x</code></td>
<td>
<p>A stars object returned by <a href="#topic+create_pargasite_data">create_pargasite_data</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function normally does not return; interrupt R to stop the
application (usually by pressing Ctrl + C or ESC).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (interactive()) {
  run_pargasite(ozone20km)
}

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
