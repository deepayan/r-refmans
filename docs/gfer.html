<!DOCTYPE html><html lang="en"><head><title>Help for package gfer</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gfer}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#checkHttpStatus'><p>private function for check the http status</p></a></li>
<li><a href='#cm'><p>Matrix showing complicated management of China's Water Resource</p></a></li>
<li><a href='#dataJson2df'><p>private function to convert the returned jason data to a dataframe</p></a></li>
<li><a href='#GDPmix'><p>Table about GDP mix of China provinces in 2015</p></a></li>
<li><a href='#genDfwds'><p>private function for constructing the query parameter for dfwds</p></a></li>
<li><a href='#getCSRRating'><p>get CSR rating from a website</p></a></li>
<li><a href='#getCSRRating_unit'><p>get CSR rating from a website for a unit page</p></a></li>
<li><a href='#getENNames'><p>get a company's EN names</p></a></li>
<li><a href='#getENNames_unit'><p>get a company's English name</p></a></li>
<li><a href='#getExchange'><p>get a company's listed location</p></a></li>
<li><a href='#getHisMktCap'><p>get a company's historical market cap, data comes from NetEase</p></a></li>
<li><a href='#getHisMktCap_unit'><p>get a company's historical market cap, data comes from NetEase</p></a></li>
<li><a href='#getIndex'><p>get a company's market cap, data comes from NetEase</p></a></li>
<li><a href='#getIndexConstnt'><p>get a company's market cap, data comes from NetEase</p></a></li>
<li><a href='#getIndexData'><p>get index information</p>
Currently include CSI 100, SSE 50, CSI 300, SSE Central SOEs 50, HSI, HSCEI</a></li>
<li><a href='#getNBS'><p>getNBS</p></a></li>
<li><a href='#getPPPList'><p>get PPP list from an official website</p></a></li>
<li><a href='#getPPPList_unit'><p>get PPP list from a single page</p></a></li>
<li><a href='#getProxy'><p>Get proxy pool from free proxy provider</p></a></li>
<li><a href='#getStockList'><p>Get information from Shanghai Exchange and Shenzhen Exchange.</p>
This will only get stock information in Shanghai Exchange and Shenzhen Exchange
Including stocker ticker, stock name and company full name. Data comes from China Merchants Bank</a></li>
<li><a href='#getTickers'><p>get ticker by input a company's full name or a list of companies' full name</p></a></li>
<li><a href='#getTickers_unit'><p>get ticker by input a company's full name</p></a></li>
<li><a href='#getWaternomicsData_goog'><p>getWaternomicsData_goog</p></a></li>
<li><a href='#getWaternomicsData_NBS'><p>getWaternomicsData_NBS</p></a></li>
<li><a href='#getWaterQ_MEP_all'><p>get PPP list from a single page</p></a></li>
<li><a href='#getWaterQ_MEP_all_unit'><p>get PPP list from a single page</p></a></li>
<li><a href='#is.listed'><p>Check if a company is listed in Chinese stock market</p></a></li>
<li><a href='#milSec'><p>private function for sec</p></a></li>
<li><a href='#plotChord'><p>plotScatterPie</p></a></li>
<li><a href='#plotScatterPie'><p>plotScatterPie</p></a></li>
<li><a href='#statscnDbs'><p>the available dbs</p></a></li>
<li><a href='#statscnQueryData'><p>query data in the statscn db</p></a></li>
<li><a href='#statscnQueryLastN'><p>fetch the lastN data</p></a></li>
<li><a href='#statscnQueryZb'><p>the data categories</p></a></li>
<li><a href='#statscnRegions'><p>the regions in db</p></a></li>
<li><a href='#statscnRowNamePrefix'><p>statscnRowNamePrefix</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Green Finance and Environmental Risk</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.12</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-2-4</td>
</tr>
<tr>
<td>Description:</td>
<td>Focuses on data collecting, analyzing and visualization in green finance and environmental 
  risk research and analysis. Main function includes environmental data collecting from 
  official websites such as MEP (Ministry of Environmental Protection of China, <a href="https://www.mee.gov.cn">https://www.mee.gov.cn</a>), water 
  related projects identification and environmental data visualization.</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>rvest, xml2, jsonlite, httr, stringi, V8, data.table, tidyr,
scatterpie, ggplot2, ggrepel, circlize, googlesheets4, gsheet</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://yuanchao-xu.github.io/gfer/">https://yuanchao-xu.github.io/gfer/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/Yuanchao-Xu/gfer/issues">https://github.com/Yuanchao-Xu/gfer/issues</a></td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-02-06 15:09:54 UTC; yuanchaoxu</td>
</tr>
<tr>
<td>Author:</td>
<td>Yuanchao Xu [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Yuanchao Xu &lt;xuyuanchao37@gmail.com&gt;</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-02-06 15:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='checkHttpStatus'>private function for check the http status</h2><span id='topic+checkHttpStatus'></span>

<h3>Description</h3>

<p>private function for check the http status
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkHttpStatus(ret)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="checkHttpStatus_+3A_ret">ret</code></td>
<td>
<p>the response obj returned by httr package</p>
</td></tr>
</table>


<h3>Value</h3>

<p>return nothing , but if it finds some error , it stop the script
</p>


<h3>References</h3>

<p>Xuehui YANG (2016). rstatscn: R Interface for China National Data. R
package version 1.1.1. https://CRAN.R-project.org/package=rstatscn
</p>

<hr>
<h2 id='cm'>Matrix showing complicated management of China's Water Resource</h2><span id='topic+cm'></span>

<h3>Description</h3>

<p>Matrix showing complicated management of China's Water Resource
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cm
</code></pre>


<h3>Format</h3>

<p>A data frame with 13 rows and 11 variables:
</p>

<p>...

</p>

<hr>
<h2 id='dataJson2df'>private function to convert the returned jason data to a dataframe</h2><span id='topic+dataJson2df'></span>

<h3>Description</h3>

<p>private function to convert the returned jason data to a dataframe
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dataJson2df(rawObj, rowcode, colcode)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dataJson2df_+3A_rawobj">rawObj</code></td>
<td>
<p>the fromJSON output</p>
</td></tr>
<tr><td><code id="dataJson2df_+3A_rowcode">rowcode</code></td>
<td>
<p>rowcode in the data frame</p>
</td></tr>
<tr><td><code id="dataJson2df_+3A_colcode">colcode</code></td>
<td>
<p>colcode in the data frame</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the contructed data frame
</p>


<h3>References</h3>

<p>Xuehui YANG (2016). rstatscn: R Interface for China National Data. R
package version 1.1.1. https://CRAN.R-project.org/package=rstatscn
</p>

<hr>
<h2 id='GDPmix'>Table about GDP mix of China provinces in 2015</h2><span id='topic+GDPmix'></span>

<h3>Description</h3>

<p>Table about GDP mix of China provinces in 2015
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GDPmix
</code></pre>


<h3>Format</h3>

<p>A data frame with 11 rows and 7 variables:
</p>

<p>...

</p>

<hr>
<h2 id='genDfwds'>private function for constructing the query parameter for dfwds</h2><span id='topic+genDfwds'></span>

<h3>Description</h3>

<p>private function for constructing the query parameter for dfwds
</p>


<h3>Usage</h3>

<pre><code class='language-R'>genDfwds(wdcode, valuecode)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="genDfwds_+3A_wdcode">wdcode</code></td>
<td>
<p>string value , one of c(&quot;zb&quot;,&quot;sj&quot;,&quot;reg&quot;)</p>
</td></tr>
<tr><td><code id="genDfwds_+3A_valuecode">valuecode</code></td>
<td>
<p>string value ,  following is the table for available valuecode
zb:   the valudecode can be gotten by statscnQueryZb() function
sj:   the valudecode can be &quot;2014&quot; for nd db,  &quot;2014C&quot; for jd db.
reg:  the valudecode is the region code fetched by statscnRegions(dbcode) function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>return the queyr string for the http request
</p>


<h3>References</h3>

<p>Xuehui YANG (2016). rstatscn: R Interface for China National Data. R
package version 1.1.1. https://CRAN.R-project.org/package=rstatscn
</p>

<hr>
<h2 id='getCSRRating'>get CSR rating from a website</h2><span id='topic+getCSRRating'></span>

<h3>Description</h3>

<p>get CSR rating from a website
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getCSRRating(startPage, endPage, year = 2015, proxy = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getCSRRating_+3A_startpage">startPage</code></td>
<td>
<p>on Which page you want to start, default is 1</p>
</td></tr>
<tr><td><code id="getCSRRating_+3A_endpage">endPage</code></td>
<td>
<p>On which page you want to stop scrapping</p>
</td></tr>
<tr><td><code id="getCSRRating_+3A_year">year</code></td>
<td>
<p>In which year you want the rank</p>
</td></tr>
<tr><td><code id="getCSRRating_+3A_proxy">proxy</code></td>
<td>
<p>whether use the proxy, default is FALSE</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Get CSR ratings and reports of different companies from http://stockdata.stock.hexun.com/zrbg/
</p>


<h3>Value</h3>

<p>A table of CSR ratings collected from your input page
</p>


<h3>References</h3>

<p>www.hexun.com
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# get first two pages of CSR ratings in 2015
getCSRRating(1,3)

## End(Not run)
</code></pre>

<hr>
<h2 id='getCSRRating_unit'>get CSR rating from a website for a unit page</h2><span id='topic+getCSRRating_unit'></span>

<h3>Description</h3>

<p>get CSR rating from a website for a unit page
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getCSRRating_unit(page, date, proxy = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getCSRRating_unit_+3A_page">page</code></td>
<td>
<p>on Which page you want to scrap</p>
</td></tr>
<tr><td><code id="getCSRRating_unit_+3A_date">date</code></td>
<td>
<p>represents the date is until which date, usually it's the last day of a year
e.g., &quot;2015-12-31&quot; for the date of year 2015, &quot;2014-12-31&quot; for the date of year 2014</p>
</td></tr>
<tr><td><code id="getCSRRating_unit_+3A_proxy">proxy</code></td>
<td>
<p>whether use the proxy, default is FALSE</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Get CSR ratings and reports of different companies from http://stockdata.stock.hexun.com/zrbg/
</p>


<h3>Value</h3>

<p>A table of CSR ratings collected from your input page
</p>


<h3>References</h3>

<p>www.hexun.com
</p>

<hr>
<h2 id='getENNames'>get a company's EN names</h2><span id='topic+getENNames'></span>

<h3>Description</h3>

<p>get a company's EN names
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getENNames(tickers)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getENNames_+3A_tickers">tickers</code></td>
<td>
<p>ticker/sympol of a company, TICKERS MUST BE CHARACTERs, '006027' INSTEAD OF '6027'</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Data comes from hexun.com
</p>


<h3>Value</h3>

<p>A data table with companies' EN names
</p>


<h3>References</h3>

<p>http://hexun.com
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
getENNames(601857)

## End(Not run)


</code></pre>

<hr>
<h2 id='getENNames_unit'>get a company's English name</h2><span id='topic+getENNames_unit'></span>

<h3>Description</h3>

<p>get a company's English name
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getENNames_unit(ticker)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getENNames_unit_+3A_ticker">ticker</code></td>
<td>
<p>ticker/sympol of a company, MUST BE A CHARACTER, '006027' INSTEAD OF '6027'</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Data comes from hexun.com
</p>


<h3>Value</h3>

<p>A data table with companies' EN names
</p>


<h3>References</h3>

<p>http://hexun.com
</p>

<hr>
<h2 id='getExchange'>get a company's listed location</h2><span id='topic+getExchange'></span>

<h3>Description</h3>

<p>get a company's listed location
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getExchange(tickers)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getExchange_+3A_tickers">tickers</code></td>
<td>
<p>ticker/sympol of a company, TICKERS MUST BE CHARACTERs, '006027' INSTEAD OF '6027'</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Data comes from www.finance.sina.com.cn
</p>


<h3>Value</h3>

<p>A data table with a listed companies' ticker, security name and listed exchange location
</p>


<h3>References</h3>

<p>www.finance.sina.com.cn
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
getExchange('600601')
getExchange(c('00005', '00001'))

## End(Not run)
</code></pre>

<hr>
<h2 id='getHisMktCap'>get a company's historical market cap, data comes from NetEase</h2><span id='topic+getHisMktCap'></span>

<h3>Description</h3>

<p>get a company's historical market cap, data comes from NetEase
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getHisMktCap(tickers, date1, date2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getHisMktCap_+3A_tickers">tickers</code></td>
<td>
<p>ticker/sympol of a company, TICKERS MUST BE CHARACTERs, '006027' INSTEAD OF '6027'</p>
</td></tr>
<tr><td><code id="getHisMktCap_+3A_date1">date1</code></td>
<td>
<p>starting date, in the following format &quot;20160101&quot;, means Jan 1st of 2016</p>
</td></tr>
<tr><td><code id="getHisMktCap_+3A_date2">date2</code></td>
<td>
<p>ending date, in the following format &quot;20160101&quot;, if you only want one day's data, just set starting date and ending date the same day</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The input date interval should have at least one work day
Data comes from www.money.163.com
</p>


<h3>Value</h3>

<p>A data table with companies total capitalization and market capitalization
</p>


<h3>References</h3>

<p>www.money.163.com
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
getHisMktCap(601857, '20161202', '20161203')

## End(Not run)


</code></pre>

<hr>
<h2 id='getHisMktCap_unit'>get a company's historical market cap, data comes from NetEase</h2><span id='topic+getHisMktCap_unit'></span>

<h3>Description</h3>

<p>get a company's historical market cap, data comes from NetEase
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getHisMktCap_unit(ticker, date1, date2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getHisMktCap_unit_+3A_ticker">ticker</code></td>
<td>
<p>ticker/sympol of a company, MUST BE A CHARACTER, '006027' INSTEAD OF '6027'</p>
</td></tr>
<tr><td><code id="getHisMktCap_unit_+3A_date1">date1</code></td>
<td>
<p>starting date, in the following format &quot;20160101&quot;, means Jan 1st of 2016</p>
</td></tr>
<tr><td><code id="getHisMktCap_unit_+3A_date2">date2</code></td>
<td>
<p>ending date, in the following format &quot;20160101&quot;, if you only want one day's data, just set starting date and ending date the same day</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Data comes from www.money.163.com
</p>


<h3>Value</h3>

<p>A data table with companies total capitalization and market capitalization
</p>


<h3>References</h3>

<p>www.money.163.com
</p>

<hr>
<h2 id='getIndex'>get a company's market cap, data comes from NetEase</h2><span id='topic+getIndex'></span>

<h3>Description</h3>

<p>get a company's market cap, data comes from NetEase
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getIndex(tickers, indexData)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getIndex_+3A_tickers">tickers</code></td>
<td>
<p>ticker/sympol of a company, MUST BE A CHARACTER, e.g., input &quot;006600&quot; instead of 006600
The tickers have to be FULL AND EXACT, e.g., for Shanghai exchange and Shenzhen exchange, the input must have 6 digits, and for HK exchange, it must
have 5 digits. the '0' in the beginning cannot be left out.</p>
</td></tr>
<tr><td><code id="getIndex_+3A_indexdata">indexData</code></td>
<td>
<p>the index information, before running getIndex, indexData needs to be loaded using <code><a href="#topic+getIndexData">getIndexData</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Data comes from www.finance.sina.com.cn and www.etnet.com.hk
</p>


<h3>Value</h3>

<p>A data table with companies and which index they are included
</p>


<h3>References</h3>

<p>www.finance.sina.com.cn
www.etnet.com.hk
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
indexData &lt;- getIndexData()
getIndex(600601, indexData)

## End(Not run)
</code></pre>

<hr>
<h2 id='getIndexConstnt'>get a company's market cap, data comes from NetEase</h2><span id='topic+getIndexConstnt'></span>

<h3>Description</h3>

<p>get a company's market cap, data comes from NetEase
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getIndexConstnt(indexPool)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getIndexConstnt_+3A_indexpool">indexPool</code></td>
<td>
<p>a pool of different index, special format for gfer</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data table with companies total capitalization and market capitalization
</p>

<hr>
<h2 id='getIndexData'>get index information
Currently include CSI 100, SSE 50, CSI 300, SSE Central SOEs 50, HSI, HSCEI</h2><span id='topic+getIndexData'></span>

<h3>Description</h3>

<p>get index information
Currently include CSI 100, SSE 50, CSI 300, SSE Central SOEs 50, HSI, HSCEI
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getIndexData()
</code></pre>


<h3>Value</h3>

<p>a data table containing index information
</p>

<hr>
<h2 id='getNBS'>getNBS</h2><span id='topic+getNBS'></span>

<h3>Description</h3>

<p>get National Bureau of Statistics data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getNBS(indicator, start, end)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getNBS_+3A_indicator">indicator</code></td>
<td>
<p>of which data is fetched, indicator includes 'GDP', 'water resources', 'water use' and 'wastewater', etc.</p>
</td></tr>
<tr><td><code id="getNBS_+3A_start">start</code></td>
<td>
<p>starting year of data wanted</p>
</td></tr>
<tr><td><code id="getNBS_+3A_end">end</code></td>
<td>
<p>end year of data wanted, make sure your input end year exists in the NBS website</p>
</td></tr>
</table>


<h3>Value</h3>

<p>no return
</p>


<h3>References</h3>

<p>Xuehui YANG (2016). rstatscn: R Interface for China National Data. R
package version 1.1.1. https://CRAN.R-project.org/package=rstatscn
</p>

<hr>
<h2 id='getPPPList'>get PPP list from an official website</h2><span id='topic+getPPPList'></span>

<h3>Description</h3>

<p>get PPP list from an official website
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getPPPList(startPage = 1, endPage, proxy = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getPPPList_+3A_startpage">startPage</code></td>
<td>
<p>on Which page you want to start, default is 1</p>
</td></tr>
<tr><td><code id="getPPPList_+3A_endpage">endPage</code></td>
<td>
<p>On which page you want to stop scrapping</p>
</td></tr>
<tr><td><code id="getPPPList_+3A_proxy">proxy</code></td>
<td>
<p>whether proxy will be used, default is FALSE</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Get PPP list from the Ministry of Finance of China (http://www.cpppc.org:8082/efmisweb/ppp/projectLibrary/toPPPList.do?projName=), to view the listed projects in the PPP library.
</p>


<h3>Value</h3>

<p>A table of PPP projects collected from your input page
</p>


<h3>References</h3>

<p>www.cpppc.org
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#scrape the first two pages
getPPPList(1,3)

## End(Not run)
</code></pre>

<hr>
<h2 id='getPPPList_unit'>get PPP list from a single page</h2><span id='topic+getPPPList_unit'></span>

<h3>Description</h3>

<p>get PPP list from a single page
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getPPPList_unit(page, proxy = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getPPPList_unit_+3A_page">page</code></td>
<td>
<p>The page number</p>
</td></tr>
<tr><td><code id="getPPPList_unit_+3A_proxy">proxy</code></td>
<td>
<p>if you wnat to use a proxy to avoid blocking, you can input a proxy, otherwise leave
it blank.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table of PPP projects collected from your input page
</p>

<hr>
<h2 id='getProxy'>Get proxy pool from free proxy provider</h2><span id='topic+getProxy'></span>

<h3>Description</h3>

<p>Get proxy pool from free proxy provider
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getProxy()
</code></pre>


<h3>Details</h3>

<p>Extract proxies from http://www.free-proxy-list.net/, in case of the risk of being blocked by the scrapped website
</p>


<h3>Value</h3>

<p>The sum of <code>x</code> and <code>y</code>.
</p>


<h3>References</h3>

<p>www.free-proxy-list.net
</p>

<hr>
<h2 id='getStockList'>Get information from Shanghai Exchange and Shenzhen Exchange.
This will only get stock information in Shanghai Exchange and Shenzhen Exchange
Including stocker ticker, stock name and company full name. Data comes from China Merchants Bank</h2><span id='topic+getStockList'></span>

<h3>Description</h3>

<p>Get information from Shanghai Exchange and Shenzhen Exchange.
This will only get stock information in Shanghai Exchange and Shenzhen Exchange
Including stocker ticker, stock name and company full name. Data comes from China Merchants Bank
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getStockList()
</code></pre>


<h3>References</h3>

<p>http://info.cmbchina.com/Stock/Single/
</p>

<hr>
<h2 id='getTickers'>get ticker by input a company's full name or a list of companies' full name</h2><span id='topic+getTickers'></span>

<h3>Description</h3>

<p>It can also be a way to test if a company is listed
NOTE: If a company is listed in multiple exchange, then it needs double check,
the programe only chooses ticker from random exchange
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getTickers(corpNames)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getTickers_+3A_corpnames">corpNames</code></td>
<td>
<p>Full name of a company, should be full name</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Data comes from www.cninfo.com.cn/
</p>


<h3>Value</h3>

<p>A data table with companies stock name and stock ticker
</p>


<h3>References</h3>

<p>www.cninfo.com.cn
</p>

<hr>
<h2 id='getTickers_unit'>get ticker by input a company's full name</h2><span id='topic+getTickers_unit'></span>

<h3>Description</h3>

<p>It can also be a way to test if a company is listed
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getTickers_unit(corpName)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getTickers_unit_+3A_corpname">corpName</code></td>
<td>
<p>Full name of a company</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Data comes from www.cninfo.com.cn/
</p>


<h3>Value</h3>

<p>A data table with companies stock name and stock ticker
</p>

<hr>
<h2 id='getWaternomicsData_goog'>getWaternomicsData_goog</h2><span id='topic+getWaternomicsData_goog'></span>

<h3>Description</h3>

<p>Get NBS data from google sheet by shared link. Default link is provided by gfer, you can also create your
own google sheet of GDP.
NOTE: The 'link sharing on' of the sheet must be ticked in order to read
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getWaternomicsData_goog()
</code></pre>

<hr>
<h2 id='getWaternomicsData_NBS'>getWaternomicsData_NBS</h2><span id='topic+getWaternomicsData_NBS'></span>

<h3>Description</h3>

<p>Get NBS data from NBS website.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getWaternomicsData_NBS(start, end)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getWaternomicsData_NBS_+3A_start">start</code></td>
<td>
<p>starting year of data wanted</p>
</td></tr>
<tr><td><code id="getWaternomicsData_NBS_+3A_end">end</code></td>
<td>
<p>end year of data wanted, make sure your input end year exists in the NBS website</p>
</td></tr>
</table>

<hr>
<h2 id='getWaterQ_MEP_all'>get PPP list from a single page</h2><span id='topic+getWaterQ_MEP_all'></span>

<h3>Description</h3>

<p>get PPP list from a single page
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getWaterQ_MEP_all(year, week, station1, station2, proxy = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getWaterQ_MEP_all_+3A_year">year</code></td>
<td>
<p>In which year you would like to scrape</p>
</td></tr>
<tr><td><code id="getWaterQ_MEP_all_+3A_week">week</code></td>
<td>
<p>In which week you would like to scrape, can be an array, like 3:5</p>
</td></tr>
<tr><td><code id="getWaterQ_MEP_all_+3A_station1">station1</code></td>
<td>
<p>the start station index on the page</p>
</td></tr>
<tr><td><code id="getWaterQ_MEP_all_+3A_station2">station2</code></td>
<td>
<p>the end station index on the page</p>
</td></tr>
<tr><td><code id="getWaterQ_MEP_all_+3A_proxy">proxy</code></td>
<td>
<p>Whether to use proxy, default is FALSE</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Get monitoring data of different stations from Minitsry of Environmental Protection of China (http://datacenter.mep.gov.cn/report/getCountGraph.do?type=runQianWater). Using this function
you will get data of all the stations. Since the number of stations vary with time, using this function, you have
to make sure that within the period you are scrapping, the number of stations keep consistant.
</p>


<h3>References</h3>

<p>http://datacenter.mee.gov.cn/report/getCountGraph.do?type=runQianWater
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# get data from 1st station to 5th station of the 3rd week of 2016
a &lt;- getWaterQ_MEP_all(2016, 3, 1, 5)


## End(Not run)

</code></pre>

<hr>
<h2 id='getWaterQ_MEP_all_unit'>get PPP list from a single page</h2><span id='topic+getWaterQ_MEP_all_unit'></span>

<h3>Description</h3>

<p>get PPP list from a single page
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getWaterQ_MEP_all_unit(year, week, station1, station2, proxy = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getWaterQ_MEP_all_unit_+3A_year">year</code></td>
<td>
<p>In which year you would like to scrape</p>
</td></tr>
<tr><td><code id="getWaterQ_MEP_all_unit_+3A_week">week</code></td>
<td>
<p>In which week you would like to scrape</p>
</td></tr>
<tr><td><code id="getWaterQ_MEP_all_unit_+3A_station1">station1</code></td>
<td>
<p>the start station index on the page</p>
</td></tr>
<tr><td><code id="getWaterQ_MEP_all_unit_+3A_station2">station2</code></td>
<td>
<p>the end station index on the page</p>
</td></tr>
<tr><td><code id="getWaterQ_MEP_all_unit_+3A_proxy">proxy</code></td>
<td>
<p>if you wnat to use a proxy to avoid blocking, you can input a proxy, otherwise leave
it blank.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table of PPP projects collected from your input page
</p>


<h3>References</h3>

<p>http://datacenter.mee.gov.cn/report/getCountGraph.do?type=runQianWater
</p>

<hr>
<h2 id='is.listed'>Check if a company is listed in Chinese stock market</h2><span id='topic+is.listed'></span>

<h3>Description</h3>

<p>Check if a company is listed in Chinese stock market
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.listed(corpList, stockList)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is.listed_+3A_corplist">corpList</code></td>
<td>
<p>company list you want to check if listed, should be a dataframe</p>
</td></tr>
<tr><td><code id="is.listed_+3A_stocklist">stockList</code></td>
<td>
<p>Result from <code><a href="#topic+getStockList">getStockList</a></code></p>
</td></tr>
</table>


<h3>References</h3>

<p>http://info.cmbchina.com/Stock/Single/
</p>

<hr>
<h2 id='milSec'>private function for sec</h2><span id='topic+milSec'></span>

<h3>Description</h3>

<p>private function for sec
</p>


<h3>Usage</h3>

<pre><code class='language-R'>milSec()
</code></pre>


<h3>Value</h3>

<p>milsec
</p>

<hr>
<h2 id='plotChord'>plotScatterPie</h2><span id='topic+plotChord'></span>

<h3>Description</h3>

<p>if 'Summation of cell padding on y-direction are larger than the height of the cells' appears, just enlarge the xlim or ylim accordingly
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotChord(
  data,
  t = FALSE,
  ifsep = TRUE,
  trans = 0.3,
  highlight = NULL,
  xlim = c(-1, 1),
  ylim = c(-1, 1)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotChord_+3A_data">data</code></td>
<td>
<p>a dataframe showing different management intersections. See the data frame in the example</p>
</td></tr>
<tr><td><code id="plotChord_+3A_t">t</code></td>
<td>
<p>is transpose the dataframe, by default, lines flow from row to column, if t == TRUE, lines will
flow from columns to rows. Once transposed,</p>
</td></tr>
<tr><td><code id="plotChord_+3A_ifsep">ifsep</code></td>
<td>
<p>if separate row and col categories in the chart, default is TRUE</p>
</td></tr>
<tr><td><code id="plotChord_+3A_trans">trans</code></td>
<td>
<p>transparency of the chart's lines, default is 0.3</p>
</td></tr>
<tr><td><code id="plotChord_+3A_highlight">highlight</code></td>
<td>
<p>a string or string array of highlighted items, MUST be selected from first column (which represents names) or colnames.
if highlight has more than 2 items, they should belong to same category, either colnames, or names. One name and one column name is not allowed.</p>
</td></tr>
<tr><td><code id="plotChord_+3A_xlim">xlim</code></td>
<td>
<p>x limit of the chart, default is c(-1, 1)</p>
</td></tr>
<tr><td><code id="plotChord_+3A_ylim">ylim</code></td>
<td>
<p>y limte of the chart, default is c(-1, 1)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>plot scatter pie chart for multidimension analysis, such as waternomics. This plot can
provide information about water use/wastewater of each provinces and GDP mix of each provinces,
see examples.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>


## Not run: 
plotChord(cm)
plotChord(cm, t = T)
plotChord(cm, highlight = 'MEP')
plotChord(cm, highlight = 'Investment')

## End(Not run)

</code></pre>

<hr>
<h2 id='plotScatterPie'>plotScatterPie</h2><span id='topic+plotScatterPie'></span>

<h3>Description</h3>

<p>plot scatter pie chart for multidimension analysis, such as waternomics. This plot can
provide information about water use/wastewater of each provinces and GDP mix of each provinces,
see examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotScatterPie(
  data,
  pieRange,
  pieColor = NULL,
  xmeanLine = TRUE,
  ymeanLine = TRUE,
  label_on = TRUE,
  output = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotScatterPie_+3A_data">data</code></td>
<td>
<p>a dataframe with colnames x, y, r, label, these four names must be in colnames.</p>
</td></tr>
<tr><td><code id="plotScatterPie_+3A_pierange">pieRange</code></td>
<td>
<p>define which column to which column to be presented by pie chart, see examples</p>
</td></tr>
<tr><td><code id="plotScatterPie_+3A_piecolor">pieColor</code></td>
<td>
<p>color for different colors in pie chart</p>
</td></tr>
<tr><td><code id="plotScatterPie_+3A_xmeanline">xmeanLine</code></td>
<td>
<p>if plot x mean line</p>
</td></tr>
<tr><td><code id="plotScatterPie_+3A_ymeanline">ymeanLine</code></td>
<td>
<p>if plot y mean line</p>
</td></tr>
<tr><td><code id="plotScatterPie_+3A_label_on">label_on</code></td>
<td>
<p>Whether to show label</p>
</td></tr>
<tr><td><code id="plotScatterPie_+3A_output">output</code></td>
<td>
<p>if you want an ggplot object as output, default is FALSE</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>

GDPColor_CWR &lt;- c("#6B8033", "#020303", "#0D77B9")


data(GDPmix)

# in colnames(GDPmix), there must be x, y, r, label.
# but right now, GDPmix has x, y, r, but lacks a label column, let's assign label to province column
colnames(GDPmix)[1] &lt;- 'label'

## Not run: 
plotScatterPie(GDPmix, pieRange = 4:6, pieColor = GDPColor_CWR)

## End(Not run)



</code></pre>

<hr>
<h2 id='statscnDbs'>the available dbs</h2><span id='topic+statscnDbs'></span>

<h3>Description</h3>

<p>the available dbs in the national db
</p>


<h3>Usage</h3>

<pre><code class='language-R'>statscnDbs()
</code></pre>


<h3>Value</h3>

<p>a data frame with 2 columns , one is the dbcode, another is the db description
</p>


<h3>References</h3>

<p>Xuehui YANG (2016). rstatscn: R Interface for China National Data. R
package version 1.1.1. https://CRAN.R-project.org/package=rstatscn
</p>


<h3>Examples</h3>

<pre><code class='language-R'> ## Not run: 
 statscnDbs()
 
## End(Not run)

</code></pre>

<hr>
<h2 id='statscnQueryData'>query data in the statscn db</h2><span id='topic+statscnQueryData'></span>

<h3>Description</h3>

<p>the main function for querying the statscn database, it will retrieve the data from specified db and orginize the data in a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>statscnQueryData(
  zb = "A0201",
  dbcode = "hgnd",
  rowcode = "zb",
  colcode = "sj",
  moreWd = list(name = NA, value = NA)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="statscnQueryData_+3A_zb">zb</code></td>
<td>
<p>the zb/category code to be queried</p>
</td></tr>
<tr><td><code id="statscnQueryData_+3A_dbcode">dbcode</code></td>
<td>
<p>the db code for querying</p>
</td></tr>
<tr><td><code id="statscnQueryData_+3A_rowcode">rowcode</code></td>
<td>
<p>rowcode in the returned data frame</p>
</td></tr>
<tr><td><code id="statscnQueryData_+3A_colcode">colcode</code></td>
<td>
<p>colcode in the returned data frame</p>
</td></tr>
<tr><td><code id="statscnQueryData_+3A_morewd">moreWd</code></td>
<td>
<p>more constraint on the data
where the name should be one of c(&quot;reg&quot;,&quot;sj&quot;) , which stand for region and sj/time.
the valuecode for reg should be the region code queried by statscnRegions()
the valuecode for sj should be like '2014' for *nd , '2014C' for *jd , '201405' for *yd.
Be noted that , the moreWd name should be different with either rowcode or colcode</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the data frame you are quering
</p>


<h3>References</h3>

<p>Xuehui YANG (2016). rstatscn: R Interface for China National Data. R
package version 1.1.1. https://CRAN.R-project.org/package=rstatscn
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
df &lt;- statscnQueryData('A0201', dbcode = 'hgnd')
df &lt;- statscnQueryData('A0201',dbcode = 'fsnd', rowcode = 'zb', colcode = 'sj',
                    moreWd = list(name = 'reg', value = '110000'))

## End(Not run)


</code></pre>

<hr>
<h2 id='statscnQueryLastN'>fetch the lastN data</h2><span id='topic+statscnQueryLastN'></span>

<h3>Description</h3>

<p>fetch the lastN data for the latest query, only affect the number of rows in the returned data.
This function can not be used alone , statscnQueryData() has to be called before this function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>statscnQueryLastN(n)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="statscnQueryLastN_+3A_n">n</code></td>
<td>
<p>the number of rows to be fetched</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the last n rows data in the latest query
</p>


<h3>References</h3>

<p>Xuehui YANG (2016). rstatscn: R Interface for China National Data. R
package version 1.1.1. https://CRAN.R-project.org/package=rstatscn
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
df=statscnQueryData('A0201',dbcode='hgnd')
df2=statscnQueryLastN(20)

## End(Not run)


</code></pre>

<hr>
<h2 id='statscnQueryZb'>the data categories</h2><span id='topic+statscnQueryZb'></span>

<h3>Description</h3>

<p>the sub data categories for the zbid category, dbcode need to be specified, where the dbcode can be fetched by function
statscnDbs(). In the returned data frame, the column 'isParent' shows if each sub category is leap category or not
</p>


<h3>Usage</h3>

<pre><code class='language-R'>statscnQueryZb(zbid = "zb", dbcode = "hgnd")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="statscnQueryZb_+3A_zbid">zbid</code></td>
<td>
<p>the father zb/category id , the root id is 'zb'</p>
</td></tr>
<tr><td><code id="statscnQueryZb_+3A_dbcode">dbcode</code></td>
<td>
<p>which db will be queried</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the data frame with the sub zbs/categories , if the given zbid is not a Parent zb/category, null list is returned
</p>


<h3>References</h3>

<p>Xuehui YANG (2016). rstatscn: R Interface for China National Data. R
package version 1.1.1. https://CRAN.R-project.org/package=rstatscn
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
statscnQueryZb()
statscnQueryZb('A01',dbcode="hgnd")

## End(Not run)


</code></pre>

<hr>
<h2 id='statscnRegions'>the regions in db</h2><span id='topic+statscnRegions'></span>

<h3>Description</h3>

<p>the available regions in the specified db, it is used for query the province, city and country code generally
</p>


<h3>Usage</h3>

<pre><code class='language-R'>statscnRegions(dbcode = "fsnd")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="statscnRegions_+3A_dbcode">dbcode</code></td>
<td>
<p>the dbcode should be some province db(fs*) , city db(cs*) or internaltional db(gj*)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the data frame with all the available region codes and names in the db
</p>


<h3>References</h3>

<p>Xuehui YANG (2016). rstatscn: R Interface for China National Data. R
package version 1.1.1. https://CRAN.R-project.org/package=rstatscn
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
statscnRegions('fsnd')
statscnRegions('csnd')
statscnRegions('gjnd')

## End(Not run)



</code></pre>

<hr>
<h2 id='statscnRowNamePrefix'>statscnRowNamePrefix</h2><span id='topic+statscnRowNamePrefix'></span>

<h3>Description</h3>

<p>set the rowName prefix in the dataframe
</p>


<h3>Usage</h3>

<pre><code class='language-R'>statscnRowNamePrefix(p = "nrow")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="statscnRowNamePrefix_+3A_p">p</code></td>
<td>
<p>, how to set the rowname prefix.
it is 'nrow' by default , and it is the only supported value currently
to unset the row name prefix, call this function with p=NULL</p>
</td></tr>
</table>


<h3>Details</h3>

<p>in case you encounter the following error:
Error in 'row.names&lt;-.data.frame'('*tmp*', value = value) :
duplicate 'row.names' are not allowed
you need to call this function
</p>


<h3>Value</h3>

<p>no return
</p>


<h3>References</h3>

<p>Xuehui YANG (2016). rstatscn: R Interface for China National Data. R
package version 1.1.1. https://CRAN.R-project.org/package=rstatscn
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
