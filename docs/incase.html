<!DOCTYPE html><html><head><title>Help for package incase</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {incase}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#incase-package'><p>incase: Pipe-Friendly Vector Replacement with Case Statements</p></a></li>
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#fn_case'><p>Case statements applying a function to all inputs</p></a></li>
<li><a href='#grep_case'><p>Switch-style recoding of values with string pattern matching</p></a></li>
<li><a href='#if_case'><p>Pipe-friendly vectorized if</p></a></li>
<li><a href='#in_case'><p>A pipe-friendly general vectorized if</p></a></li>
<li><a href='#in_case_fct'><p>Case statements returning a factor</p></a></li>
<li><a href='#in_case_list'><p>Case statements returning a list</p></a></li>
<li><a href='#switch_case'><p>Switch-style recoding of values</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Pipe-Friendly Vector Replacement with Case Statements</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Offers a pipe-friendly alternative to the 'dplyr' functions
    case_when() and if_else(), as well as a number of user-friendly
    simplifications for common use cases.  These functions accept a vector
    as an optional first argument, allowing conditional statements to be
    built using the 'magrittr' dot operator.  The functions also coerce
    all outputs to the same type, meaning you no longer have to worry
    about using specific typed variants of NA or explicitly declaring
    integer outputs, and evaluate outputs somewhat lazily, so you don't
    waste time on long operations that won't be used.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://pkg.rossellhayes.com/incase/">https://pkg.rossellhayes.com/incase/</a>,
<a href="https://github.com/rossellhayes/incase">https://github.com/rossellhayes/incase</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rossellhayes/incase/issues">https://github.com/rossellhayes/incase/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>backports, cli, magrittr, plu, rlang</td>
</tr>
<tr>
<td>Suggests:</td>
<td>dplyr, testthat (&ge; 3.0.0), tibble</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-21 04:54:38 UTC; alex</td>
</tr>
<tr>
<td>Author:</td>
<td>Alexander Rossell Hayes
    <a href="https://orcid.org/0000-0001-9412-0457"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre,
    cph],
  Patrice Kiener <a href="https://orcid.org/0000-0002-0505-9920"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb] (Contributed example for fn_case())</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alexander Rossell Hayes &lt;alexander@rossellhayes.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-21 05:32:33 UTC</td>
</tr>
</table>
<hr>
<h2 id='incase-package'>incase: Pipe-Friendly Vector Replacement with Case Statements</h2><span id='topic+incase'></span><span id='topic+incase-package'></span>

<h3>Description</h3>

<p>Offers a pipe-friendly alternative to <code><a href="dplyr.html#topic+case_when">dplyr::case_when()</a></code> and
<code><a href="dplyr.html#topic+if_else">dplyr::if_else()</a></code>.
These functions accept a vector as an optional first argument, allowing
conditional statements to be built using the <a href="magrittr.html#topic+magrittr-package">magrittr</a>
dot operator.
The functions also coerce all possible outputs to the same type, meaning you
no longer have to worry about using specific typed variants of <code>NA</code> or
explicitly declaring integer outputs.
</p>


<h3>Copyright</h3>

<p><strong>incase</strong> includes code from <a href="dplyr.html#topic+dplyr-package">dplyr</a>, which is
licensed under the MIT License:
</p>
<p>Copyright (c) 2013-2019 RStudio and others.
</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &quot;Software&quot;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:
</p>
<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.
</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Alexander Rossell Hayes <a href="mailto:alexander@rossellhayes.com">alexander@rossellhayes.com</a> (<a href="https://orcid.org/0000-0001-9412-0457">ORCID</a>) [copyright holder]
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Patrice Kiener <a href="mailto:fattailsr@inmodelia.com">fattailsr@inmodelia.com</a> (<a href="https://orcid.org/0000-0002-0505-9920">ORCID</a>) (Contributed example for fn_case()) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://pkg.rossellhayes.com/incase/">https://pkg.rossellhayes.com/incase/</a>
</p>
</li>
<li> <p><a href="https://github.com/rossellhayes/incase">https://github.com/rossellhayes/incase</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/rossellhayes/incase/issues">https://github.com/rossellhayes/incase/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='fn_case'>Case statements applying a function to all inputs</h2><span id='topic+fn_case'></span>

<h3>Description</h3>

<p>Case statements applying a function to all inputs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fn_case(x, fn, ..., preserve = FALSE, default = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fn_case_+3A_x">x</code></td>
<td>
<p>A vector</p>
</td></tr>
<tr><td><code id="fn_case_+3A_fn">fn</code></td>
<td>
<p>A function to apply to the left-hand side of each formula in <code>...</code>
</p>
<p>Either a quoted or unquoted function name, an anonymous <code><a href="base.html#topic+function">function</a></code>, or
a <a href="rlang.html#topic+as_function">purrr-style formula</a>.
</p>
<p>The function should take two inputs, the first being <code>x</code> and the second
being the left-hand side of the formula.
The function should return a logical vector, either of length 1 or the same
length as <code>x</code>.</p>
</td></tr>
<tr><td><code id="fn_case_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; A sequence of two-sided
formulas or named arguments.
</p>

<ul>
<li> <p><strong>Formulas</strong>: Elements of <code>x</code> that return <code>TRUE</code> when passed to <code>fn</code> with
the left hand side (LHS) of each formula will be replaced with the value in
the right hand side (RHS).
The LHS must evaluate to a logical vector when passed to <code>fn</code> with <code>x</code>.
The RHS must be of length 1 or the same length as all other RHS.
</p>
</li>
<li> <p><strong>Named arguments</strong>: named arguments are passed as additional arguments
to the function <code>fn</code>.
</p>
</li></ul>
</td></tr>
<tr><td><code id="fn_case_+3A_preserve">preserve</code></td>
<td>
<p>If <code>TRUE</code>, unmatched elements of <code>x</code> will be returned
unmodified.
(The elements may have their type coerced to be compatible with
replacement values.)
If <code>FALSE</code>, unmatched elements of <code>x</code> will be replaced with <code>default</code>.
Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="fn_case_+3A_default">default</code></td>
<td>
<p>If <code>preserve</code> is <code>FALSE</code>, a value to replace unmatched
elements of <code>x</code>.
Defaults to <code>NA</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of length 1 or n, matching the length of the logical input
or output vectors.
Inconsistent lengths will generate an error.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fn_case_fct">fn_case_fct()</a></code> to return a factor and
<code><a href="#topic+fn_case_list">fn_case_list()</a></code> to return a list
</p>
<p><code><a href="#topic+fn_switch_case">fn_switch_case()</a></code>, which applies a function to each formula's LHS,
but not <code>x</code>
</p>
<p><code><a href="#topic+switch_case">switch_case()</a></code>, a simpler alternative for exact matching
</p>
<p><code><a href="#topic+grep_case">grep_case()</a></code>, a simpler alternative for <a href="base.html#topic+regex">regex</a> pattern matching
</p>
<p><code><a href="#topic+in_case">in_case()</a></code>, a pipeable alternative to <code><a href="dplyr.html#topic+case_when">dplyr::case_when()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Replicate switch_case()
parties &lt;- sample(c("d", "r", "i", "g", "l"), 20, replace = TRUE)

fn_case(
  parties,
  fn = `%in%`,
  "d" ~ "Democrat",
  "r" ~ "Republican",
  "i" ~ "Independent",
  "g" ~ "Green",
  "l" ~ "Libertarian"
)

# Replicate grep_case()
countries &lt;- c(
  "France", "Ostdeutschland", "Westdeutschland", "Nederland",
  "Belgie (Vlaanderen)", "Belgique (Wallonie)", "Luxembourg", "Italia"
)

fn_case(
  countries,
  fn = function(x, pattern, ...) {grepl(pattern, x, ...)},
  "Deutschland" ~ "Germany",
  "Belgi(qu)?e" ~ "Belgium",
  "Nederland"   ~ "Netherlands",
  "Italia"      ~ "Italy",
  preserve      = TRUE,
  ignore.case   = TRUE
)

fn_case(
  countries,
  fn = ~ grepl(.y, .x),
  "Deutschland" ~ "Germany",
  "Belgi(qu)?e" ~ "Belgium",
  "Nederland"   ~ "Netherlands",
  "Italia"      ~ "Italy",
  preserve      = TRUE,
  ignore.case   = TRUE
)

# Recode values in a range
time    &lt;- runif(10, 1, 12)
hours   &lt;- time %/% 1
minutes &lt;- time %% 1 * 60

hours &lt;- hours %&gt;%
  if_case(minutes &gt; 32.5, (. + 1) %% 12, .) %&gt;%
  switch_case(0 ~ 12, preserve = TRUE)

minutes %&gt;%
  fn_case(
    fn = ~ abs(.x - .y) &lt;= 2.5,
    0  ~ "o'clock",
    60 ~ "o'clock",
    30 ~ "half past",
    15 ~ "quarter past",
    45 ~ "quarter to",
    5  ~ "five past",
    10 ~ "ten past",
    20 ~ "twenty past",
    25 ~ "twenty-five past",
    55 ~ "five to",
    50 ~ "ten to",
    40 ~ "twenty to",
    35 ~ "twenty-five to"
  ) %&gt;%
  switch_case(
    "o'clock" ~ paste(hours, .),
    default   = paste(., hours)
  )

# Replicate vctrs::vec_ptype_abbr() (used for tibble column labels)
# Based on a contribution by Patrice Kiener
in_herits &lt;- function(x) {
  fn_case(
    x,
    fn = inherits,
    "factor"     ~ "fct",
    "character"  ~ "chr",
    "numeric"    ~ "dbl",
    "integer"    ~ "int",
    "logical"    ~ "lgl",
    "complex"    ~ "cpl",
    "raw"        ~ "raw",
    "matrix"     ~ "mat",
    "array"      ~ "arr",
    "data.frame" ~ "df",
    "list"       ~ "lst",
    "function"   ~ "fn",
    default      = class(x)[[1]]
  )
}

in_herits(1:3)
in_herits(letters[1:3])
in_herits(fn_case)
</code></pre>

<hr>
<h2 id='grep_case'>Switch-style recoding of values with string pattern matching</h2><span id='topic+grep_case'></span>

<h3>Description</h3>

<p>Switch-style recoding of values with string pattern matching
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grep_case(x, ..., preserve = FALSE, default = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="grep_case_+3A_x">x</code></td>
<td>
<p>A vector</p>
</td></tr>
<tr><td><code id="grep_case_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; A sequence of two-sided
formulas or named arguments.
</p>

<ul>
<li> <p><strong>Formulas</strong>: Elements of <code>x</code> that match the <a href="base.html#topic+regex">regex</a> pattern on the
left hand side (LHS) of formulas will be replaced with the value in the
right hand side (RHS).
The LHS must evaluate to a character string.
The RHS must be of length one.
<code>NULL</code> inputs are ignored.
</p>
</li>
<li> <p><strong>Named arguments</strong>: named arguments are passed to <code><a href="base.html#topic+grepl">grepl()</a></code>.
</p>
</li></ul>
</td></tr>
<tr><td><code id="grep_case_+3A_preserve">preserve</code></td>
<td>
<p>If <code>TRUE</code>, unmatched elements of <code>x</code> will be returned
unmodified.
(The elements may have their type coerced to be compatible with
replacement values.)
If <code>FALSE</code>, unmatched elements of <code>x</code> will be replaced with <code>default</code>.
Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="grep_case_+3A_default">default</code></td>
<td>
<p>If <code>preserve</code> is <code>FALSE</code>, a value to replace unmatched
elements of <code>x</code>.
Defaults to <code>NA</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of the same length as <code>x</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+grep_case_fct">grep_case_fct()</a></code> to return a factor and
<code><a href="#topic+grep_case_list">grep_case_list()</a></code> to return a list
</p>
<p><code><a href="#topic+fn_case">fn_case()</a></code>, to apply a function other than <code>grepl()</code> to each case
</p>
<p><code><a href="#topic+switch_case">switch_case()</a></code> to recode values with exact matching
</p>
<p><code><a href="#topic+in_case">in_case()</a></code>, a pipeable alternative to <code><a href="dplyr.html#topic+case_when">dplyr::case_when()</a></code>
</p>
<p><code><a href="base.html#topic+switch">switch()</a></code> and <code><a href="base.html#topic+grepl">grepl()</a></code>, which inspired this function
</p>


<h3>Examples</h3>

<pre><code class='language-R'>words &lt;- c("caterpillar", "dogwood", "catastrophe", "dogma")

grep_case(
  words,
  "cat" ~ "feline",
  "dog" ~ "canine"
)

caps_words &lt;- c("caterpillar", "dogwood", "Catastrophe", "DOGMA")

grep_case(
  caps_words,
  "cat" ~ "feline",
  "dog" ~ "canine",
  ignore.case = TRUE
)

countries &lt;- c(
  "France", "Ostdeutschland", "Westdeutschland", "Nederland",
  "Belgie (Vlaanderen)", "Belgique (Wallonie)", "Luxembourg", "Italia"
)

grep_case(
  countries,
  "Deutschland" ~ "Germany",
  "Belgi(qu)?e" ~ "Belgium",
  "Nederland"   ~ "Netherlands",
  "Italia"      ~ "Italy",
  preserve      = TRUE,
  ignore.case   = TRUE
)
</code></pre>

<hr>
<h2 id='if_case'>Pipe-friendly vectorized if</h2><span id='topic+if_case'></span>

<h3>Description</h3>

<p>Compared to <code><a href="dplyr.html#topic+if_else">dplyr::if_else()</a></code>, this function is easier to use with a pipe.
A vector piped into this function will be quietly ignored.
This allows <a href="magrittr.html#topic+magrittr">magrittr</a> dots to be used in arguments without requiring
workarounds like wrapping the function in braces.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>if_case(condition, true, false, missing = NA, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="if_case_+3A_condition">condition</code></td>
<td>
<p>Logical vector</p>
</td></tr>
<tr><td><code id="if_case_+3A_true">true</code>, <code id="if_case_+3A_false">false</code>, <code id="if_case_+3A_missing">missing</code></td>
<td>
<p>Values to use for <code>TRUE</code>, <code>FALSE</code>, and <code>NA</code> values
of <code>condition</code>.
They must be either the same length as <code>condition</code>, or length 1.</p>
</td></tr>
<tr><td><code id="if_case_+3A_...">...</code></td>
<td>
<p>Values passed to <code>...</code> produce an error.
This facilitates the quiet ignoring of a piped vector.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is also less strict than <code><a href="dplyr.html#topic+if_else">dplyr::if_else()</a></code>.
If <code>true</code>, <code>false</code>, and <code>missing</code> are different types, they are silently
coerced to a common type.
</p>


<h3>Value</h3>

<p>Where <code>condition</code> is <code>TRUE</code>, the matching value from <code>true</code>;
where it's <code>FALSE</code>, the matching value from <code>false</code>;
and where it's <code>NA</code>, the matching value from <code>missing</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+in_case">in_case()</a></code>, a pipeable alternative to <code><a href="dplyr.html#topic+case_when">dplyr::case_when()</a></code>
</p>
<p><code><a href="#topic+switch_case">switch_case()</a></code>, a reimplementation of <code><a href="base.html#topic+switch">switch()</a></code>
</p>
<p><code><a href="dplyr.html#topic+if_else">dplyr::if_else()</a></code>, from which this function is derived
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c(1, 2, 5, NA)

# if_case() produces the same output as dplyr::if_else()
if_case(x &gt; 3, "high", "low", "missing")
dplyr::if_else(x &gt; 3, "high", "low", "missing")

# if_case() does not throw an error if arguments are not of the same type
if_case(x &gt; 3, "high", "low", NA)
try(dplyr::if_else(x &gt; 3, "high", "low", NA))

# if_case() can accept a piped input without an error or requiring braces
x %&gt;% if_case(. &gt; 3, "high", "low", "missing")
try(x %&gt;% dplyr::if_else(. &gt; 3, "high", "low", "missing"))
x %&gt;% {dplyr::if_else(. &gt; 3, "high", "low", "missing")}

# You can also pipe a conditional test like dplyr::if_else()
{x &gt; 3} %&gt;% if_case("high", "low", "missing")
{x &gt; 3} %&gt;% dplyr::if_else("high", "low", "missing")
</code></pre>

<hr>
<h2 id='in_case'>A pipe-friendly general vectorized if</h2><span id='topic+in_case'></span>

<h3>Description</h3>

<p>This function allows you to vectorize multiple if_else() statements.
If no cases match, NA is returned.
This function derived from <code><a href="dplyr.html#topic+case_when">dplyr::case_when()</a></code>.
Unlike <code><a href="dplyr.html#topic+case_when">dplyr::case_when()</a></code>, <code>in_case()</code> supports piping elegantly and
attempts to handle inconsistent types (see examples).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>in_case(..., preserve = FALSE, default = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="in_case_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; A sequence of two-sided
formulas.
The left hand side (LHS) determines which values match this case.
The right hand side (RHS) provides the replacement value.
</p>
<p>The LHS must evaluate to a logical vector.
</p>
<p>Both LHS and RHS may have the same length of either 1 or <code>n</code>.
The value of <code>n</code> must be consistent across all cases.
The case of <code>n == 0</code> is treated as a variant of <code>n != 1</code>.
</p>
<p><code>NULL</code> inputs are ignored.</p>
</td></tr>
<tr><td><code id="in_case_+3A_preserve">preserve</code></td>
<td>
<p>If <code>TRUE</code>, unmatched elements of the input will be
returned unmodified.
(The elements may have their type coerced to be compatible with
replacement values.)
If <code>FALSE</code>, unmatched elements of the input will be replaced
with <code>default</code>.
Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="in_case_+3A_default">default</code></td>
<td>
<p>If <code>preserve</code> is <code>FALSE</code>, a value to replace unmatched
elements of the input.
Defaults to <code>NA</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of length 1 or n, matching the length of the logical input
or output vectors.
Inconsistent lengths will generate an error.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+in_case_fct">in_case_fct()</a></code> to return a factor and
<code><a href="#topic+in_case_list">in_case_list()</a></code> to return a list
</p>
<p><code><a href="#topic+switch_case">switch_case()</a></code> a simpler alternative for when each case involves
<code><a href="base.html#topic++3D+3D">==</a></code> or <code><a href="base.html#topic++25in+25">%in%</a></code>
</p>
<p><code><a href="#topic+fn_case">fn_case()</a></code>, a simpler alternative for when each case uses the
same function
</p>
<p><code><a href="#topic+if_case">if_case()</a></code>, a pipeable alternative to <code><a href="dplyr.html#topic+if_else">dplyr::if_else()</a></code>
</p>
<p><code><a href="dplyr.html#topic+case_when">dplyr::case_when()</a></code>, from which this function is derived
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Non-piped statements are handled the same as dplyr::case_when()
x &lt;- 1:30
in_case(
  x %% 15 == 0 ~ "fizz buzz",
  x %%  3 == 0 ~ "fizz",
  x %%  5 == 0 ~ "buzz",
  TRUE         ~ x
)

# A vector can be directly piped into in_case() without error
1:30 %&gt;%
  in_case(
    . %% 15 == 0 ~ "fizz buzz",
    . %%  3 == 0 ~ "fizz",
    . %%  5 == 0 ~ "buzz",
    TRUE         ~ .
  )

# in_case() silently converts types
1:30 %&gt;%
  in_case(
    . %% 15 == 0 ~ 35,
    . %%  3 == 0 ~ 5,
    . %%  5 == 0 ~ 7,
    TRUE         ~ NA
  )

x &lt;- 1:30
try(
  dplyr::case_when(
    x %% 15 == 0 ~ 35,
    x %%  3 == 0 ~ 5,
    x %%  5 == 0 ~ 7,
    TRUE         ~ NA
  )
)

# default and preserve make it easier to handle unmatched values
1:30 %&gt;%
  in_case(
    . %% 15 == 0 ~ "fizz buzz",
    . %%  3 == 0 ~ "fizz",
    . %%  5 == 0 ~ "buzz",
    default      = "pass"
  )

1:30 %&gt;%
  in_case(
    . %% 15 == 0 ~ "fizz buzz",
    . %%  3 == 0 ~ "fizz",
    . %%  5 == 0 ~ "buzz",
    preserve     = TRUE
  )
</code></pre>

<hr>
<h2 id='in_case_fct'>Case statements returning a factor</h2><span id='topic+in_case_fct'></span><span id='topic+switch_case_fct'></span><span id='topic+grep_case_fct'></span><span id='topic+fn_case_fct'></span><span id='topic+fn_switch_case_fct'></span>

<h3>Description</h3>

<p>These functions are equivalent to <code><a href="#topic+in_case">in_case()</a></code>, <code><a href="#topic+switch_case">switch_case()</a></code>,
<code><a href="#topic+grep_case">grep_case()</a></code>, <code><a href="#topic+fn_case">fn_case()</a></code>, and <code><a href="#topic+fn_switch_case">fn_switch_case()</a></code> but return
<a href="base.html#topic+factor">factors</a> with their levels determined by the order of their
case statements.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>in_case_fct(..., preserve = FALSE, default = NA, ordered = FALSE)

switch_case_fct(x, ..., preserve = FALSE, default = NA, ordered = FALSE)

grep_case_fct(x, ..., preserve = FALSE, default = NA, ordered = FALSE)

fn_case_fct(x, fn, ..., preserve = FALSE, default = NA, ordered = FALSE)

fn_switch_case_fct(x, fn, ..., preserve = FALSE, default = NA, ordered = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="in_case_fct_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; A sequence of two-sided
formulas or named arguments.
</p>

<ul>
<li> <p><strong>Formulas</strong>: Elements of <code>x</code> that return <code>TRUE</code> when passed to <code>fn</code> with
the left hand side (LHS) of each formula will be replaced with the value in
the right hand side (RHS).
The LHS must evaluate to a logical vector when passed to <code>fn</code> with <code>x</code>.
The RHS must be of length 1 or the same length as all other RHS.
</p>
</li>
<li> <p><strong>Named arguments</strong>: named arguments are passed as additional arguments
to the function <code>fn</code>.
</p>
</li></ul>
</td></tr>
<tr><td><code id="in_case_fct_+3A_preserve">preserve</code></td>
<td>
<p>If <code>TRUE</code>, unmatched elements of <code>x</code> will be returned
unmodified.
(The elements may have their type coerced to be compatible with
replacement values.)
If <code>FALSE</code>, unmatched elements of <code>x</code> will be replaced with <code>default</code>.
Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="in_case_fct_+3A_default">default</code></td>
<td>
<p>If <code>preserve</code> is <code>FALSE</code>, a value to replace unmatched
elements of <code>x</code>.
Defaults to <code>NA</code>.</p>
</td></tr>
<tr><td><code id="in_case_fct_+3A_ordered">ordered</code></td>
<td>
<p>A logical.
If <code><a href="base.html#topic+TRUE">TRUE</a></code>, returns an <a href="base.html#topic+ordered">ordered</a> factor.
If <code><a href="base.html#topic+FALSE">FALSE</a></code>, returns an unordered factor.</p>
</td></tr>
<tr><td><code id="in_case_fct_+3A_x">x</code></td>
<td>
<p>A vector</p>
</td></tr>
<tr><td><code id="in_case_fct_+3A_fn">fn</code></td>
<td>
<p>A function to apply to the left-hand side of each formula in <code>...</code>
</p>
<p>Either a quoted or unquoted function name, an anonymous <code><a href="base.html#topic+function">function</a></code>, or
a <a href="rlang.html#topic+as_function">purrr-style formula</a>.
</p>
<p>The function should take two inputs, the first being <code>x</code> and the second
being the left-hand side of the formula.
The function should return a logical vector, either of length 1 or the same
length as <code>x</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A factor vector of length 1 or n, matching the length of the logical
input or output vectors.
Levels are determined by the order of inputs to <code>...</code>.
Inconsistent lengths will generate an error.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+in_case">in_case()</a></code>, <code><a href="#topic+switch_case">switch_case()</a></code>, <code><a href="#topic+grep_case">grep_case()</a></code>, <code><a href="#topic+fn_case">fn_case()</a></code>, and
<code><a href="#topic+fn_case_fct">fn_case_fct()</a></code> on which these functions are based.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>1:10 %&gt;%
  in_case_fct(
    . %% 2 == 0 ~ "even",
    . %% 2 == 1 ~ "odd"
  )

switch_case_fct(
  c("a", "b", "c"),
  "c" ~ "cantaloupe",
  "b" ~ "banana",
  "a" ~ "apple"
)

switch_case_fct(
  c("a", "b", "c", "d"),
  "c" ~ "cantaloupe",
  "b" ~ "banana",
  "a" ~ "apple"
)

switch_case_fct(
  c("a", "b", "c", "d"),
  "c" ~ "cantaloupe",
  "b" ~ "banana",
  "a" ~ "apple",
  preserve = TRUE
)

grep_case_fct(
  c("caterpillar", "dogwood", "catastrophe", "dogma"),
  "cat" ~ "feline",
  "dog" ~ "canine"
)

fn_case_fct(
  c("a", "b", "c"),
  `%in%`,
  "c" ~ "cantaloupe",
  "b" ~ "banana",
  "a" ~ "apple"
)
</code></pre>

<hr>
<h2 id='in_case_list'>Case statements returning a list</h2><span id='topic+in_case_list'></span><span id='topic+switch_case_list'></span><span id='topic+grep_case_list'></span><span id='topic+fn_case_list'></span><span id='topic+fn_switch_case_list'></span>

<h3>Description</h3>

<p>These functions are equivalent to <code><a href="#topic+in_case">in_case()</a></code>, <code><a href="#topic+switch_case">switch_case()</a></code>,
<code><a href="#topic+grep_case">grep_case()</a></code>, <code><a href="#topic+fn_case">fn_case()</a></code>, and <code><a href="#topic+fn_switch_case">fn_switch_case()</a></code> but return
<a href="base.html#topic+list">lists</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>in_case_list(..., preserve = FALSE, default = NA)

switch_case_list(x, ..., preserve = FALSE, default = NA)

grep_case_list(x, ..., preserve = FALSE, default = NA)

fn_case_list(x, fn, ..., preserve = FALSE, default = NA)

fn_switch_case_list(x, fn, ..., preserve = FALSE, default = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="in_case_list_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; A sequence of two-sided
formulas or named arguments.
</p>

<ul>
<li> <p><strong>Formulas</strong>: Elements of <code>x</code> that return <code>TRUE</code> when passed to <code>fn</code> with
the left hand side (LHS) of each formula will be replaced with the value in
the right hand side (RHS).
The LHS must evaluate to a logical vector when passed to <code>fn</code> with <code>x</code>.
The RHS must be of length 1 or the same length as all other RHS.
</p>
</li>
<li> <p><strong>Named arguments</strong>: named arguments are passed as additional arguments
to the function <code>fn</code>.
</p>
</li></ul>
</td></tr>
<tr><td><code id="in_case_list_+3A_preserve">preserve</code></td>
<td>
<p>If <code>TRUE</code>, unmatched elements of <code>x</code> will be returned
unmodified.
(The elements may have their type coerced to be compatible with
replacement values.)
If <code>FALSE</code>, unmatched elements of <code>x</code> will be replaced with <code>default</code>.
Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="in_case_list_+3A_default">default</code></td>
<td>
<p>If <code>preserve</code> is <code>FALSE</code>, a value to replace unmatched
elements of <code>x</code>.
Defaults to <code>NA</code>.</p>
</td></tr>
<tr><td><code id="in_case_list_+3A_x">x</code></td>
<td>
<p>A vector</p>
</td></tr>
<tr><td><code id="in_case_list_+3A_fn">fn</code></td>
<td>
<p>A function to apply to the left-hand side of each formula in <code>...</code>
</p>
<p>Either a quoted or unquoted function name, an anonymous <code><a href="base.html#topic+function">function</a></code>, or
a <a href="rlang.html#topic+as_function">purrr-style formula</a>.
</p>
<p>The function should take two inputs, the first being <code>x</code> and the second
being the left-hand side of the formula.
The function should return a logical vector, either of length 1 or the same
length as <code>x</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This can be useful when returning a non-<a href="base.html#topic+is.atomic">atomic</a> value and/or
when you want to create a list column inside a <a href="tibble.html#topic+tibble">tibble</a>.
</p>


<h3>Value</h3>

<p>A list of length 1 or n, matching the length of the logical
input vector.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+in_case">in_case()</a></code>, <code><a href="#topic+switch_case">switch_case()</a></code>, <code><a href="#topic+grep_case">grep_case()</a></code>, <code><a href="#topic+fn_case">fn_case()</a></code>, and
<code><a href="#topic+fn_case_fct">fn_case_fct()</a></code> on which these functions are based.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>1:3 %&gt;%
  in_case_list(
    . &lt; 2   ~ mtcars,
    default = letters
  )
</code></pre>

<hr>
<h2 id='switch_case'>Switch-style recoding of values</h2><span id='topic+switch_case'></span><span id='topic+fn_switch_case'></span>

<h3>Description</h3>

<p>Switch-style recoding of values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>switch_case(x, ..., preserve = FALSE, default = NA)

fn_switch_case(x, fn, ..., preserve = FALSE, default = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="switch_case_+3A_x">x</code></td>
<td>
<p>A vector</p>
</td></tr>
<tr><td><code id="switch_case_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; A sequence of two-sided
formulas or named arguments.
</p>

<ul>
<li> <p><strong>Formulas</strong>: Elements of <code>x</code> that match the left hand side (LHS) of
formulas will be replaced with the value in the right hand side (RHS).
The LHS must evaluate to an atomic vector.
The RHS must be of length one.
<code>NULL</code> inputs are ignored.
</p>
</li>
<li> <p><strong>Named arguments</strong>: for <code>fn_switch_case()</code>, named arguments are passed
to the function <code>fn</code>.
For <code>switch_case()</code>, named arguments will raise an error.
</p>
</li></ul>
</td></tr>
<tr><td><code id="switch_case_+3A_preserve">preserve</code></td>
<td>
<p>If <code>TRUE</code>, unmatched elements of <code>x</code> will be returned
unmodified.
(The elements may have their type coerced to be compatible with
replacement values.)
If <code>FALSE</code>, unmatched elements of <code>x</code> will be replaced with <code>default</code>.
Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="switch_case_+3A_default">default</code></td>
<td>
<p>If <code>preserve</code> is <code>FALSE</code>, a value to replace unmatched
elements of <code>x</code>.
Defaults to <code>NA</code>.</p>
</td></tr>
<tr><td><code id="switch_case_+3A_fn">fn</code></td>
<td>
<p>A function to apply to the left-hand side of each formula in <code>...</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of the same length as <code>x</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+switch_case_fct">switch_case_fct()</a></code> and <code><a href="#topic+fn_switch_case_fct">fn_switch_case_fct()</a></code> to return a factor
and <code><a href="#topic+switch_case_list">switch_case_list()</a></code> and <code><a href="#topic+fn_switch_case_list">fn_switch_case_list()</a></code> to return a list
</p>
<p><code><a href="#topic+grep_case">grep_case()</a></code> to recode values with string pattern matching
</p>
<p><code><a href="#topic+fn_case">fn_case()</a></code>, which applies a function to both <code>x</code> and each formula's LHS
</p>
<p><code><a href="#topic+in_case">in_case()</a></code>, a pipeable alternative to <code><a href="dplyr.html#topic+case_when">dplyr::case_when()</a></code>
</p>
<p><code><a href="base.html#topic+switch">switch()</a></code> and <code><a href="base.html#topic++25in+25">%in%</a></code>, which inspired this function
</p>


<h3>Examples</h3>

<pre><code class='language-R'>parties &lt;- sample(c("d", "r", "i", "g", "l"), 20, replace = TRUE)

switch_case(
  parties,
  "d" ~ "Democrat",
  "r" ~ "Republican",
  "i" ~ "Independent",
  "g" ~ "Green",
  "l" ~ "Libertarian"
)

parties %&gt;%
  switch_case(
    "d" ~ "Democrat",
    "r" ~ "Republican",
    "i" ~ "Independent",
    "g" ~ "Green",
    "l" ~ "Libertarian"
  )

parties %&gt;%
  switch_case(
    "d" ~ "Democrat",
    "r" ~ "Republican",
    c("i", "g", "l") ~ "Other"
  )

parties %&gt;%
  switch_case(
    "d" ~ "Democrat",
    "r" ~ "Republican",
    default = "Other"
  )

parties %&gt;%
  switch_case(
    "d" ~ "Democrat",
    "r" ~ "Republican",
    preserve = FALSE
  )

parties %&gt;%
  switch_case(
    "d" ~ "Democrat",
    "r" ~ "Republican",
    preserve = TRUE
  )

data &lt;- c(1, 4, 8, 12, 999, 6, 2, 888, 4, 6, 777)

fn_switch_case(
  data,
  function(x) paste(rep(x, 3), collapse = ""),
  7 ~ "Not asked",
  8 ~ "Refused",
  9 ~ "Missing",
  preserve = TRUE
)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
