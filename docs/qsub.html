<!DOCTYPE html><html><head><title>Help for package qsub</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {qsub}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cat_remote'><p>Read from a file remotely</p></a></li>
<li><a href='#cp_remote'><p>A wrapper around the scp shell command that handles local/remote files and allows</p>
copying between remote hosts via the local machine.</a></li>
<li><a href='#create_qsub_config'><p>Create a qsub configuration object.</p></a></li>
<li><a href='#create_ssh_connection'><p>Create an SSH connection with remote</p></a></li>
<li><a href='#file_exists_remote'><p>Checks if a local or remote file exists.</p></a></li>
<li><a href='#get_default_qsub_config'><p>Retrieve a default qsub_config.</p></a></li>
<li><a href='#instantiate_qsub_config'><p>Create an instance of the qsub_config.</p></a></li>
<li><a href='#is_job_running'><p>Check whether a job is running.</p></a></li>
<li><a href='#is_qsub_config'><p>Returns whether the passed object is a qsub_config object.</p></a></li>
<li><a href='#is_remote_local'><p>Tests whether the remote is a local host or not.</p></a></li>
<li><a href='#ls_remote'><p>View the contents of a directory remotely</p></a></li>
<li><a href='#mkdir_remote'><p>Creates a remote directory with the specified group ownership and permissions.</p></a></li>
<li><a href='#qacct'><p>Run qacct on remote</p></a></li>
<li><a href='#qacct_remote'><p>Run qacct on remote</p></a></li>
<li><a href='#qstat_j'><p>Run qstat on remote</p></a></li>
<li><a href='#qstat_j_remote'><p>Run qstat on remote</p></a></li>
<li><a href='#qstat_remote'><p>Show the status of Grid Engine jobs and queues</p></a></li>
<li><a href='#qsub'><p>Running Commands Remotely on Gridengine Clusters</p></a></li>
<li><a href='#qsub_lapply'><p>Apply a Function over a List or Vector on a gridengine system!</p></a></li>
<li><a href='#qsub_retrieve'><p>Retrieve the results of a qsub execution.</p></a></li>
<li><a href='#qsub_run'><p>Run a Function on a gridengine system!</p></a></li>
<li><a href='#rm_remote'><p>Remove a file or folder</p></a></li>
<li><a href='#rsync_remote'><p>Rsync files between machines</p></a></li>
<li><a href='#run_remote'><p><code>run_remote</code> - Runs the command locally or remotely using ssh.</p></a></li>
<li><a href='#set_default_qsub_config'><p>Set a default qsub_config.</p></a></li>
<li><a href='#test_qsub_config'><p>Tests whether the passed object is a qsub_config object.</p></a></li>
<li><a href='#write_remote'><p>Write to a file remotely</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Running Commands Remotely on 'Gridengine' Clusters</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Run lapply() calls in parallel by submitting them to 
    'gridengine' clusters using the 'qsub' command.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, glue, methods, pbapply, processx, purrr, random, readr,
ssh, stringr, tidyr, tools, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/rcannood/qsub">https://github.com/rcannood/qsub</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rcannood/qsub/issues">https://github.com/rcannood/qsub/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-09-23 09:28:15 UTC; rcannood</td>
</tr>
<tr>
<td>Author:</td>
<td>Robrecht Cannoodt <a href="https://orcid.org/0000-0003-3641-729X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre] (rcannood),
  Wouter Saelens <a href="https://orcid.org/0000-0002-7114-6248"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut] (zouter)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Robrecht Cannoodt &lt;rcannood@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-09-23 10:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='cat_remote'>Read from a file remotely</h2><span id='topic+cat_remote'></span>

<h3>Description</h3>

<p>Read from a file remotely
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cat_remote(path, remote = FALSE, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cat_remote_+3A_path">path</code></td>
<td>
<p>Path of the file.</p>
</td></tr>
<tr><td><code id="cat_remote_+3A_remote">remote</code></td>
<td>
<p>Remote machine specification for ssh, in format such as <code>user@server</code> that does not
require interactive password entry. For local execution, pass <code>FALSE</code> (default). For
execution on the default qsub config remote, use <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="cat_remote_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code> prints the command.</p>
</td></tr>
</table>

<hr>
<h2 id='cp_remote'>A wrapper around the scp shell command that handles local/remote files and allows
copying between remote hosts via the local machine.</h2><span id='topic+cp_remote'></span>

<h3>Description</h3>

<p>A wrapper around the scp shell command that handles local/remote files and allows
copying between remote hosts via the local machine.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cp_remote(
  remote_src,
  path_src,
  remote_dest,
  path_dest,
  verbose = FALSE,
  recursively = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cp_remote_+3A_remote_src">remote_src</code></td>
<td>
<p>Remote machine for the source file in the format <code>user@machine</code> or an empty string for local.</p>
</td></tr>
<tr><td><code id="cp_remote_+3A_path_src">path_src</code></td>
<td>
<p>Path of the source file.</p>
</td></tr>
<tr><td><code id="cp_remote_+3A_remote_dest">remote_dest</code></td>
<td>
<p>Remote machine for the destination file in the format <code>user@machine</code> or an empty string for local.</p>
</td></tr>
<tr><td><code id="cp_remote_+3A_path_dest">path_dest</code></td>
<td>
<p>Path for the source file; can be a directory.</p>
</td></tr>
<tr><td><code id="cp_remote_+3A_verbose">verbose</code></td>
<td>
<p>Prints elapsed time if TRUE</p>
</td></tr>
<tr><td><code id="cp_remote_+3A_recursively">recursively</code></td>
<td>
<p>Copy a directory recursively?</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## Copy file myfile.csv from the home directory on the remote server to
## the local working directory.

## on remote server in bash shell:
# cat myfile.csv
# [me@myserver ~]$ cat myfile.csv
# "val","ts"
# 1,
# 2,
# 3,
# 4,
# 5,
# 6,
# 7,
# 8,
# 9,
# 10,

## on local server in R:
cp_remote(remote_src = "me@myserver", path_src = "~/myfile.csv",
          remote_dest = FALSE, path_dest = getwd(), verbose = TRUE)
# [1] "Elapsed: 1.672 sec"
df &lt;- read.csv("myfile.csv")
df
#    val ts
# 1    1 NA
# 2    2 NA
# 3    3 NA
# 4    4 NA
# 5    5 NA
# 6    6 NA
# 7    7 NA
# 8    8 NA
# 9    9 NA
# 10  10 NA

## End(Not run)
</code></pre>

<hr>
<h2 id='create_qsub_config'>Create a qsub configuration object.</h2><span id='topic+create_qsub_config'></span><span id='topic+override_qsub_config'></span>

<h3>Description</h3>

<p>Create a qsub configuration object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_qsub_config(
  remote,
  local_tmp_path,
  remote_tmp_path,
  name = "r2qsub",
  num_cores = 1,
  memory = "4G",
  max_running_tasks = NULL,
  max_wall_time = "01:00:00",
  batch_tasks = 1,
  compress = c("gz", "bz2", "xz", "none"),
  modules = "R",
  execute_before = NULL,
  verbose = FALSE,
  wait = TRUE,
  remove_tmp_folder = TRUE,
  stop_on_error = TRUE
)

override_qsub_config(
  qsub_config = get_default_qsub_config(),
  remote = qsub_config$remote,
  local_tmp_path = qsub_config$local_tmp_path,
  remote_tmp_path = qsub_config$remote_tmp_path,
  name = qsub_config$name,
  num_cores = qsub_config$num_cores,
  memory = qsub_config$memory,
  max_running_tasks = qsub_config$max_running_tasks,
  max_wall_time = qsub_config$max_wall_time,
  batch_tasks = qsub_config$batch_tasks,
  compress = qsub_config$compress,
  modules = qsub_config$modules,
  execute_before = qsub_config$execute_before,
  verbose = qsub_config$verbose,
  wait = qsub_config$wait,
  remove_tmp_folder = qsub_config$remove_tmp_folder,
  stop_on_error = qsub_config$stop_on_error
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_qsub_config_+3A_remote">remote</code></td>
<td>
<p>Remote machine specification for ssh, in format such as <code>user@server:port</code>
that does not require interactive password entry.</p>
</td></tr>
<tr><td><code id="create_qsub_config_+3A_local_tmp_path">local_tmp_path</code></td>
<td>
<p>A directory on the local machine in which to store temporary files. Should not contain a tilde ('~').</p>
</td></tr>
<tr><td><code id="create_qsub_config_+3A_remote_tmp_path">remote_tmp_path</code></td>
<td>
<p>A directory on the remote machine in which to store temporary files. Should not contain a tilde ('~').</p>
</td></tr>
<tr><td><code id="create_qsub_config_+3A_name">name</code></td>
<td>
<p>The name of the execution. This will show up, for instance, in <code>qstat</code>.</p>
</td></tr>
<tr><td><code id="create_qsub_config_+3A_num_cores">num_cores</code></td>
<td>
<p>The number of cores to allocate per element in <code>X</code> in a <code><a href="#topic+qsub_lapply">qsub_lapply</a></code> (default: <code>1</code>).</p>
</td></tr>
<tr><td><code id="create_qsub_config_+3A_memory">memory</code></td>
<td>
<p>The memory to allocate per core (default: <code>"4G"</code>).
If this is set too high without it being required, you might not be able to make optimal use of the remote cluster.</p>
</td></tr>
<tr><td><code id="create_qsub_config_+3A_max_running_tasks">max_running_tasks</code></td>
<td>
<p>limit concurrent array job task execution (default: <code>NULL</code>, infinite).
If you have long jobs and there are many other users on the cluster,
it is recommended you set this value to a reasonable number, such as 1/4th the total number of nodes * number of cores per node.</p>
</td></tr>
<tr><td><code id="create_qsub_config_+3A_max_wall_time">max_wall_time</code></td>
<td>
<p>The maximum time each task is allowed to run (default: <code>"01:00:00"</code>, 1 hour).
If set to <code>NULL</code>, the job will be allowed to run indefinitely.
Mind you, this might annoy other users of the cluster.</p>
</td></tr>
<tr><td><code id="create_qsub_config_+3A_batch_tasks">batch_tasks</code></td>
<td>
<p>How many values in <code>X</code> should be processed per task. Useful for when the 'length(X)' is very large (&gt; 10000).</p>
</td></tr>
<tr><td><code id="create_qsub_config_+3A_compress">compress</code></td>
<td>
<p>Compression method to use: <code>"none"</code>, <code>"gz"</code> (default), <code>"bz2"</code>, or <code>"xz"</code>.</p>
</td></tr>
<tr><td><code id="create_qsub_config_+3A_modules">modules</code></td>
<td>
<p>Which modules to load (default: <code>"R"</code>). If set to <code>NULL</code>, it will be assumed Rscript will be available in the path through other means.</p>
</td></tr>
<tr><td><code id="create_qsub_config_+3A_execute_before">execute_before</code></td>
<td>
<p>Commands to execute in the bash shell before running R.</p>
</td></tr>
<tr><td><code id="create_qsub_config_+3A_verbose">verbose</code></td>
<td>
<p>Whether or not to print out any ssh commands.</p>
</td></tr>
<tr><td><code id="create_qsub_config_+3A_wait">wait</code></td>
<td>
<p>If <code>TRUE</code>, will wait until the execution has finished by periodically checking the job status.</p>
</td></tr>
<tr><td><code id="create_qsub_config_+3A_remove_tmp_folder">remove_tmp_folder</code></td>
<td>
<p>If <code>TRUE</code>, will remove everything that was created related to this execution at the end.</p>
</td></tr>
<tr><td><code id="create_qsub_config_+3A_stop_on_error">stop_on_error</code></td>
<td>
<p>If <code>TRUE</code>, will stop when an error occurs, else returns a NA for errored instances.</p>
</td></tr>
<tr><td><code id="create_qsub_config_+3A_qsub_config">qsub_config</code></td>
<td>
<p>A qsub_config to be overridden</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A qsub configuration object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+qsub_lapply">qsub_lapply</a></code>, <code><a href="#topic+set_default_qsub_config">set_default_qsub_config</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
qsub_config &lt;- create_qsub_config(
  remote = "myuser@myserver.mylocation.com:22",
  local_tmp_path = "/home/myuser/workspace/.r2gridengine",
  remote_tmp_path = "/scratch/myuser/.r2gridengine"
)
qsub_lapply(1:10, function(x) x + 1, qsub_config = qsub_config)

set_default_qsub_config(qsub_config, permanent = TRUE)
qsub_lapply(1:10, function(x) x + 1)

qsub_lapply(
  X = 1:10,
  FUN = function(x) x + 1,
  qsub_config = override_qsub_config(verbose = TRUE)
)

## End(Not run)
</code></pre>

<hr>
<h2 id='create_ssh_connection'>Create an SSH connection with remote</h2><span id='topic+create_ssh_connection'></span>

<h3>Description</h3>

<p>Create an SSH connection with remote
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_ssh_connection(remote)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_ssh_connection_+3A_remote">remote</code></td>
<td>
<p>Remote machine specification for ssh, in format such as <code>user@server</code> that does not
require interactive password entry. For the default qsub config remote, use <code>TRUE</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='file_exists_remote'>Checks if a local or remote file exists.</h2><span id='topic+file_exists_remote'></span>

<h3>Description</h3>

<p>Checks if a local or remote file exists.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>file_exists_remote(file, remote = FALSE, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="file_exists_remote_+3A_file">file</code></td>
<td>
<p>File path.</p>
</td></tr>
<tr><td><code id="file_exists_remote_+3A_remote">remote</code></td>
<td>
<p>Remote machine specification for ssh, in format such as <code>user@server</code> that does not
require interactive password entry. For local execution, pass <code>FALSE</code> (default). For
execution on the default qsub config remote, use <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="file_exists_remote_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code> prints the command.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> or <code>FALSE</code> indicating whether the file exists.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
file_exists_remote("~/myfile.csv", remote = "me@myserver")
# [1] TRUE

## End(Not run)
</code></pre>

<hr>
<h2 id='get_default_qsub_config'>Retrieve a default qsub_config.</h2><span id='topic+get_default_qsub_config'></span>

<h3>Description</h3>

<p>Will prefer the temporary default over the permanent default.
You should typically not require this function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_default_qsub_config(config_file = config_file_location())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_default_qsub_config_+3A_config_file">config_file</code></td>
<td>
<p>The file in which a permanent default config is stored.</p>
</td></tr>
</table>

<hr>
<h2 id='instantiate_qsub_config'>Create an instance of the qsub_config.</h2><span id='topic+instantiate_qsub_config'></span>

<h3>Description</h3>

<p>This function generates the paths for the temporary files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>instantiate_qsub_config(qsub_config)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="instantiate_qsub_config_+3A_qsub_config">qsub_config</code></td>
<td>
<p>A valid qsub_config object.
</p>
<p>## @export # you should typically not require to call this function manually.</p>
</td></tr>
</table>

<hr>
<h2 id='is_job_running'>Check whether a job is running.</h2><span id='topic+is_job_running'></span>

<h3>Description</h3>

<p>Check whether a job is running.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_job_running(qsub_config)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_job_running_+3A_qsub_config">qsub_config</code></td>
<td>
<p>The qsub configuration of class <code>qsub_configuration</code>, as returned by any qsub execution</p>
</td></tr>
</table>

<hr>
<h2 id='is_qsub_config'>Returns whether the passed object is a qsub_config object.</h2><span id='topic+is_qsub_config'></span>

<h3>Description</h3>

<p>Returns whether the passed object is a qsub_config object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_qsub_config(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_qsub_config_+3A_object">object</code></td>
<td>
<p>The object to be tested</p>
</td></tr>
</table>

<hr>
<h2 id='is_remote_local'>Tests whether the remote is a local host or not.</h2><span id='topic+is_remote_local'></span>

<h3>Description</h3>

<p>Tests whether the remote is a local host or not.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_remote_local(remote)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_remote_local_+3A_remote">remote</code></td>
<td>
<p>A putative remote machine. This function will return true if <code>remote == FALSE</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='ls_remote'>View the contents of a directory remotely</h2><span id='topic+ls_remote'></span>

<h3>Description</h3>

<p>View the contents of a directory remotely
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ls_remote(path, remote = FALSE, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ls_remote_+3A_path">path</code></td>
<td>
<p>Path of the directory.</p>
</td></tr>
<tr><td><code id="ls_remote_+3A_remote">remote</code></td>
<td>
<p>Remote machine specification for ssh, in format such as <code>user@server</code> that does not
require interactive password entry. For local execution, pass <code>FALSE</code> (default). For
execution on the default qsub config remote, use <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="ls_remote_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code> prints the command.</p>
</td></tr>
</table>

<hr>
<h2 id='mkdir_remote'>Creates a remote directory with the specified group ownership and permissions.</h2><span id='topic+mkdir_remote'></span>

<h3>Description</h3>

<p>Creates a remote directory with the specified group ownership and permissions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mkdir_remote(path, remote = FALSE, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mkdir_remote_+3A_path">path</code></td>
<td>
<p>Directory path. If using <code>remote</code>, this should be a full path or
a path relative to the user's home directory.</p>
</td></tr>
<tr><td><code id="mkdir_remote_+3A_remote">remote</code></td>
<td>
<p>Remote machine specification for ssh, in format such as <code>user@server</code> that does not
require interactive password entry. For local execution, pass <code>FALSE</code> (default). For
execution on the default qsub config remote, use <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="mkdir_remote_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code> prints the command.</p>
</td></tr>
</table>

<hr>
<h2 id='qacct'>Run qacct on remote</h2><span id='topic+qacct'></span>

<h3>Description</h3>

<p>Run qacct on remote
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qacct(qsub_config)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qacct_+3A_qsub_config">qsub_config</code></td>
<td>
<p>The config</p>
</td></tr>
</table>

<hr>
<h2 id='qacct_remote'>Run qacct on remote</h2><span id='topic+qacct_remote'></span>

<h3>Description</h3>

<p>Run qacct on remote
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qacct_remote(job_id, remote = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qacct_remote_+3A_job_id">job_id</code></td>
<td>
<p>The job_id of the job</p>
</td></tr>
<tr><td><code id="qacct_remote_+3A_remote">remote</code></td>
<td>
<p>Remote machine specification for ssh, in format such as <code>user@server</code> that does not
require interactive password entry. For local execution, pass <code>FALSE</code> (default). For
execution on the default qsub config remote, use <code>TRUE</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='qstat_j'>Run qstat on remote</h2><span id='topic+qstat_j'></span>

<h3>Description</h3>

<p>Run qstat on remote
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qstat_j(qsub_config)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qstat_j_+3A_qsub_config">qsub_config</code></td>
<td>
<p>The config</p>
</td></tr>
</table>

<hr>
<h2 id='qstat_j_remote'>Run qstat on remote</h2><span id='topic+qstat_j_remote'></span>

<h3>Description</h3>

<p>Run qstat on remote
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qstat_j_remote(job_id, remote = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qstat_j_remote_+3A_job_id">job_id</code></td>
<td>
<p>The job_id of the job</p>
</td></tr>
<tr><td><code id="qstat_j_remote_+3A_remote">remote</code></td>
<td>
<p>Remote machine specification for ssh, in format such as <code>user@server</code> that does not
require interactive password entry. For local execution, pass <code>FALSE</code> (default). For
execution on the default qsub config remote, use <code>TRUE</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='qstat_remote'>Show the status of Grid Engine jobs and queues</h2><span id='topic+qstat_remote'></span>

<h3>Description</h3>

<p>Show the status of Grid Engine jobs and queues
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qstat_remote(remote = NULL, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qstat_remote_+3A_remote">remote</code></td>
<td>
<p>Remote machine specification for ssh, in format such as <code>user@server</code> that does not
require interactive password entry. For local execution, pass <code>FALSE</code> (default). For
execution on the default qsub config remote, use <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="qstat_remote_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code> prints the command.</p>
</td></tr>
</table>

<hr>
<h2 id='qsub'>Running Commands Remotely on Gridengine Clusters</h2><span id='topic+qsub'></span>

<h3>Description</h3>

<p>Run 'lapply()' calls in parallel by submitting them to
'gridengine' clusters using the 'qsub' command.
</p>

<hr>
<h2 id='qsub_lapply'>Apply a Function over a List or Vector on a gridengine system!</h2><span id='topic+qsub_lapply'></span>

<h3>Description</h3>

<p>Apply a Function over a List or Vector on a gridengine system!
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qsub_lapply(
  X,
  FUN,
  object_envir = environment(FUN),
  qsub_config = NULL,
  qsub_environment = NULL,
  qsub_packages = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qsub_lapply_+3A_x">X</code></td>
<td>
<p>A vector (atomic or list) or an expression object. Other objects (including classed objects) will be coerced by base::as.list.</p>
</td></tr>
<tr><td><code id="qsub_lapply_+3A_fun">FUN</code></td>
<td>
<p>The function to be applied to each element of X.</p>
</td></tr>
<tr><td><code id="qsub_lapply_+3A_object_envir">object_envir</code></td>
<td>
<p>The environment in which to go looking for the qsub_environment variables, if these are characters.</p>
</td></tr>
<tr><td><code id="qsub_lapply_+3A_qsub_config">qsub_config</code></td>
<td>
<p>The configuration to use for this execution.</p>
</td></tr>
<tr><td><code id="qsub_lapply_+3A_qsub_environment">qsub_environment</code></td>
<td>
<p><code>NULL</code>, a character vector or an environment. Specifies what data and functions will be uploaded to the server.</p>
</td></tr>
<tr><td><code id="qsub_lapply_+3A_qsub_packages">qsub_packages</code></td>
<td>
<p>The packages to be loaded on the cluster.</p>
</td></tr>
<tr><td><code id="qsub_lapply_+3A_...">...</code></td>
<td>
<p>optional arguments to FUN.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+create_qsub_config">create_qsub_config</a></code>, <code><a href="#topic+set_default_qsub_config">set_default_qsub_config</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Initial configuration and execution
qsub_config &lt;- create_qsub_config(
  remote = "myserver",
  local_tmp_path = "/home/myuser/workspace/.r2gridengine",
  remote_tmp_path = "/scratch/myuser/.r2gridengine"
)
qsub_lapply(
  X = seq_len(3),
  FUN = function(i) { Sys.sleep(1); i+1 },
  qsub_config = qsub_config
)

# Setting a default configuration and short hand notation for execution
set_default_qsub_config(qsub_config, permanent = T)
qsub_lapply(seq_len(3), function(i) { Sys.sleep(1); i+1 })

# Overriding a default qsub_config
qsub_lapply(seq_len(3), function(i) i + 1,
  qsub_config = override_qsub_config(name = "MyJob"))

# Don't wait for results, get a handle instead and retrieve later.
handle &lt;- qsub_lapply(seq_len(3), function(i) i + 1,
  qsub_config = override_qsub_config(wait = F))

# Wait until results have been generated on the remote

# Retrieve results
qsub_retrieve(handle)

## End(Not run)
</code></pre>

<hr>
<h2 id='qsub_retrieve'>Retrieve the results of a qsub execution.</h2><span id='topic+qsub_retrieve'></span>

<h3>Description</h3>

<p>Retrieve the results of a qsub execution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qsub_retrieve(qsub_config, wait = TRUE, post_fun = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qsub_retrieve_+3A_qsub_config">qsub_config</code></td>
<td>
<p>The qsub configuration of class <code>qsub_configuration</code>, as returned by any qsub execution</p>
</td></tr>
<tr><td><code id="qsub_retrieve_+3A_wait">wait</code></td>
<td>
<p>If <code>TRUE</code>, wait until the execution has finished in order to return the results, else returns <code>NULL</code> if execution is not finished.</p>
</td></tr>
<tr><td><code id="qsub_retrieve_+3A_post_fun">post_fun</code></td>
<td>
<p>Apply a function to the output after execution. Interface: <code>function(index, output)</code></p>
</td></tr>
</table>

<hr>
<h2 id='qsub_run'>Run a Function on a gridengine system!</h2><span id='topic+qsub_run'></span>

<h3>Description</h3>

<p>Run a Function on a gridengine system!
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qsub_run(FUN, qsub_config = NULL, qsub_environment = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qsub_run_+3A_fun">FUN</code></td>
<td>
<p>the function to be executed.</p>
</td></tr>
<tr><td><code id="qsub_run_+3A_qsub_config">qsub_config</code></td>
<td>
<p>The configuration to use for this execution.</p>
</td></tr>
<tr><td><code id="qsub_run_+3A_qsub_environment">qsub_environment</code></td>
<td>
<p><code>NULL</code>, a character vector or an environment.
Specifies what data and functions will be uploaded to the server.</p>
</td></tr>
<tr><td><code id="qsub_run_+3A_...">...</code></td>
<td>
<p>optional arguments to FUN.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+create_qsub_config">create_qsub_config</a></code>, <code><a href="#topic+set_default_qsub_config">set_default_qsub_config</a></code>
</p>

<hr>
<h2 id='rm_remote'>Remove a file or folder</h2><span id='topic+rm_remote'></span>

<h3>Description</h3>

<p>Remove a file or folder
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rm_remote(path, remote, recursive = FALSE, force = FALSE, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rm_remote_+3A_path">path</code></td>
<td>
<p>Path of the file/folder</p>
</td></tr>
<tr><td><code id="rm_remote_+3A_remote">remote</code></td>
<td>
<p>Remote machine specification for ssh, in format such as <code>user@server</code> that does not
require interactive password entry. For local execution, pass <code>FALSE</code> (default). For
execution on the default qsub config remote, use <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="rm_remote_+3A_recursive">recursive</code></td>
<td>
<p>Whether to work recursively</p>
</td></tr>
<tr><td><code id="rm_remote_+3A_force">force</code></td>
<td>
<p>Whether to force removal</p>
</td></tr>
<tr><td><code id="rm_remote_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code> prints the command.</p>
</td></tr>
</table>

<hr>
<h2 id='rsync_remote'>Rsync files between machines</h2><span id='topic+rsync_remote'></span>

<h3>Description</h3>

<p>A wrapper around the rsync shell command that allows copying between remote hosts via the local machine.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rsync_remote(
  remote_src,
  path_src,
  remote_dest,
  path_dest,
  compress = TRUE,
  delete = "no",
  exclude = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rsync_remote_+3A_remote_src">remote_src</code></td>
<td>
<p>Remote machine for the source, see the section below 'Specifying a remote'.</p>
</td></tr>
<tr><td><code id="rsync_remote_+3A_path_src">path_src</code></td>
<td>
<p>Path of the source file.</p>
</td></tr>
<tr><td><code id="rsync_remote_+3A_remote_dest">remote_dest</code></td>
<td>
<p>Remote machine for the destination, see the section below 'Specifying a remote'.</p>
</td></tr>
<tr><td><code id="rsync_remote_+3A_path_dest">path_dest</code></td>
<td>
<p>Path for the source file; can be a directory.</p>
</td></tr>
<tr><td><code id="rsync_remote_+3A_compress">compress</code></td>
<td>
<p>Whether or not to compress the data being transferred.</p>
</td></tr>
<tr><td><code id="rsync_remote_+3A_delete">delete</code></td>
<td>
<p>Whether or not to delete files at the target remote. Use <code>"yes"</code> to delete files at the remote.</p>
</td></tr>
<tr><td><code id="rsync_remote_+3A_exclude">exclude</code></td>
<td>
<p>A vector of files / regexs to be excluded.</p>
</td></tr>
<tr><td><code id="rsync_remote_+3A_verbose">verbose</code></td>
<td>
<p>Prints elapsed time if TRUE.</p>
</td></tr>
</table>


<h3>Specifying a remote</h3>

<p>A remote can be specified in one of the following ways:
</p>

<ul>
<li><p>A character vector in format <code>user@ipaddress:port</code>,
</p>
</li>
<li><p>The name of a Host in the <code>~/.ssh/config</code> file,
</p>
</li>
<li><p><code>FALSE</code> for the local machine,
</p>
</li>
<li><p><code>TRUE</code> for the default remote specified as <code>get_default_qsub_config()$remote</code>.
</p>
</li></ul>


<hr>
<h2 id='run_remote'><code>run_remote</code> - Runs the command locally or remotely using ssh.</h2><span id='topic+run_remote'></span>

<h3>Description</h3>

<p>In <code>run_remote</code> the remote commands are enclosed in wrappers that allow to capture output.
By default stderr is redirected to stdout.
If there's a genuine error, e.g., the remote command does not exist, the output is not captured. In this case, one can
see the output by setting <code>intern</code> to <code>FALSE</code>. However, when the command is run but exits with non-zero code,
<code>run_remote</code> intercepts the generated warning and saves the output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_remote(
  command,
  remote = FALSE,
  args = character(),
  verbose = FALSE,
  shell = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="run_remote_+3A_command">command</code></td>
<td>
<p>Command to run. If run locally, quotes should be escaped once.
If run remotely, quotes should be escaped twice.</p>
</td></tr>
<tr><td><code id="run_remote_+3A_remote">remote</code></td>
<td>
<p>Remote machine specification for ssh, in format such as <code>user@server</code> that does not
require interactive password entry. For local execution, pass <code>FALSE</code> (default). For
execution on the default qsub config remote, use <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="run_remote_+3A_args">args</code></td>
<td>
<p>Character vector, arguments to the command.</p>
</td></tr>
<tr><td><code id="run_remote_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code> prints the command.</p>
</td></tr>
<tr><td><code id="run_remote_+3A_shell">shell</code></td>
<td>
<p>Whether to execute the command in a shell</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The remote command will be put inside double quotes twice, so all quotes in cmd must be escaped twice: <code>\\"</code>.
However, if the command is not remote, i.e., <code>remote</code> is <code>NULL</code> or empty string, quotes should be escaped
only once.
</p>
<p>If the command itself redirects output, the <code>stderr_redirect</code> flag should be set to <code>FALSE</code>.
</p>


<h3>Value</h3>

<p>A list with components:
</p>

<ul>
<li> <p><code>status</code> The exit status of the process. If this is NA, then the process was killed and had no exit status.
</p>
</li>
<li> <p><code>stdout</code> The standard output of the command, in a character scalar.
</p>
</li>
<li> <p><code>stderr</code> The standard error of the command, in a character scalar.
</p>
</li>
<li> <p><code>elapsed_time</code> The number of seconds required before this function returned an output.
</p>
</li></ul>

<p>Warnings are really errors here so the error flag is set if there are warnings.
</p>

<hr>
<h2 id='set_default_qsub_config'>Set a default qsub_config.</h2><span id='topic+set_default_qsub_config'></span>

<h3>Description</h3>

<p>If permanent, the qsub_config will be written to the specified path.
Otherwise, it will be saved in the current environment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_default_qsub_config(
  qsub_config,
  permanent = TRUE,
  config_file = config_file_location()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_default_qsub_config_+3A_qsub_config">qsub_config</code></td>
<td>
<p>The qsub_config to use as default.</p>
</td></tr>
<tr><td><code id="set_default_qsub_config_+3A_permanent">permanent</code></td>
<td>
<p>Whether or not to make this the default qsub_config.</p>
</td></tr>
<tr><td><code id="set_default_qsub_config_+3A_config_file">config_file</code></td>
<td>
<p>The location to which to save the permanent qsub_config.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+qsub_lapply">qsub_lapply</a></code>, <code><a href="#topic+create_qsub_config">create_qsub_config</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
qsub_config &lt;- create_qsub_config(
  remote = "myserver",
  local_tmp_path = "/home/myuser/workspace/.r2gridengine",
  remote_tmp_path = "/scratch/myuser/.r2gridengine"
)
set_default_qsub_config(qsub_config, permanent = T)
qsub_lapply(1:10, function(x) x + 1)

## End(Not run)

</code></pre>

<hr>
<h2 id='test_qsub_config'>Tests whether the passed object is a qsub_config object.</h2><span id='topic+test_qsub_config'></span>

<h3>Description</h3>

<p>Tests whether the passed object is a qsub_config object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_qsub_config(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test_qsub_config_+3A_object">object</code></td>
<td>
<p>The object to be tested</p>
</td></tr>
</table>

<hr>
<h2 id='write_remote'>Write to a file remotely</h2><span id='topic+write_remote'></span>

<h3>Description</h3>

<p>Write to a file remotely
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_remote(x, path, remote = FALSE, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_remote_+3A_x">x</code></td>
<td>
<p>The text to write to the file.</p>
</td></tr>
<tr><td><code id="write_remote_+3A_path">path</code></td>
<td>
<p>Path of the file.</p>
</td></tr>
<tr><td><code id="write_remote_+3A_remote">remote</code></td>
<td>
<p>Remote machine specification for ssh, in format such as <code>user@server</code> that does not
require interactive password entry. For local execution, pass <code>FALSE</code> (default). For
execution on the default qsub config remote, use <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="write_remote_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code> prints the command.</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
