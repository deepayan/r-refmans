<!DOCTYPE html><html lang="en"><head><title>Help for package dbhydroR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {dbhydroR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#dbhydroR-package'><p>dbhydroR</p></a></li>
<li><a href='#clean_hydro'><p>Clean raw hydrologic DBHYDRO data retrievals</p></a></li>
<li><a href='#clean_wq'><p>Clean raw water quality DBHYDRO data retrievals</p></a></li>
<li><a href='#get_dbkey'><p>Query dbkey information</p></a></li>
<li><a href='#get_hydro'><p>Retrieve hydrologic data from the DBHYDRO Environmental Database</p></a></li>
<li><a href='#get_wq'><p>Retrieve water quality data from the DBHYDRO Environmental Database</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>'DBHYDRO' Hydrologic and Water Quality Data</td>
</tr>
<tr>
<td>Description:</td>
<td>Client for programmatic access to the South Florida Water
  Management District's 'DBHYDRO' database at 
  <a href="https://www.sfwmd.gov/science-data/dbhydro">https://www.sfwmd.gov/science-data/dbhydro</a>, with functions
  for accessing hydrologic and water quality data. </td>
</tr>
<tr>
<td>Version:</td>
<td>0.2-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ropensci/dbhydroR">https://github.com/ropensci/dbhydroR</a>,
<a href="https://docs.ropensci.org/dbhydroR/">https://docs.ropensci.org/dbhydroR/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/dbhydroR/issues">https://github.com/ropensci/dbhydroR/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.2)</td>
</tr>
<tr>
<td>Imports:</td>
<td>httr, reshape2, XML</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL]</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown, vcr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-02-21 02:04:30 UTC; julie</td>
</tr>
<tr>
<td>Author:</td>
<td>Joseph Stachelek <a href="https://orcid.org/0000-0002-5924-2464"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Joseph Stachelek &lt;stachel2@msu.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-02-21 16:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='dbhydroR-package'>dbhydroR</h2><span id='topic+dbhydroR-package'></span><span id='topic+dbhydroR'></span>

<h3>Description</h3>

<p>dbhydroR is an R interface to the South Florida Water Management District's DBHYDRO database which holds over 35 million hydrologic and water quality records from the Florida Everglades and surrounding areas.
</p>


<h3>Hydrologic Data</h3>

<p>The <code><a href="#topic+get_hydro">get_hydro</a></code> function provides the capability to return:
</p>

<ul>
<li><p> weather data
</p>
</li>
<li><p> surfacewater data
</p>
</li>
<li><p> groundwater data
</p>
</li>
<li><p> water-quality sonde data
</p>
</li></ul>



<h3>Water Quality Data</h3>

<p>The <code><a href="#topic+get_wq">get_wq</a></code> function provides the capability to return:
</p>

<ul>
<li><p> water quality data
</p>
</li></ul>


<hr>
<h2 id='clean_hydro'>Clean raw hydrologic DBHYDRO data retrievals</h2><span id='topic+clean_hydro'></span><span id='topic+cleanhydro'></span>

<h3>Description</h3>

<p>Converts output of <code><a href="#topic+get_hydro">get_hydro</a></code> from long (each piece
of data on its own row) to wide format (each site x variable combination in
its own column). Metadata (station-name, variable, measurement units) is
parsed so that it is wholly contained in column names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_hydro(dt)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean_hydro_+3A_dt">dt</code></td>
<td>
<p>data.frame output of <code><a href="#topic+gethydro">gethydro</a></code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
clean_hydro(gethydro(dbkey = "15081", date_min = "2013-01-01", date_max = "2013-02-02", raw = TRUE))

## End(Not run)
</code></pre>

<hr>
<h2 id='clean_wq'>Clean raw water quality DBHYDRO data retrievals</h2><span id='topic+clean_wq'></span><span id='topic+cleanwq'></span>

<h3>Description</h3>

<p>Removes extra columns associated with QA flags and QA blanks
which are used to check on potential sources of contamination. If raw is set
to TRUE, <code><a href="#topic+get_wq">get_wq</a></code> results are converted from long (each piece of
data on its own row) to <code>wide</code> format (each site x variable combination
in its own column).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_wq(dt, raw = FALSE, mdl_handling = "raw")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean_wq_+3A_dt">dt</code></td>
<td>
<p>data.frame output of <code><a href="#topic+getwq">getwq</a></code></p>
</td></tr>
<tr><td><code id="clean_wq_+3A_raw">raw</code></td>
<td>
<p>logical default is FALSE, set to TRUE to return data in &quot;long&quot;
format with all comments, qa information, and database codes included</p>
</td></tr>
<tr><td><code id="clean_wq_+3A_mdl_handling">mdl_handling</code></td>
<td>
<p>character string specifying the handling of measurement
values below the minimum detection limit (MDL). Example choices for this
argument include:
</p>

<ul>
<li> <p><code>raw</code>: Returns values exactly as they are stored in the database.
Current practice is to return values below the MDL as 0 minus the uncertainty
estimate.
</p>
</li>
<li> <p><code>half</code>: Returns values below the MDL as half the MDL
</p>
</li>
<li> <p><code>full</code>: Returns values below the MDL as the MDL
</p>
</li></ul>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#check handling of values below MDL
dt &lt;- getwq("FLAB01", "2014-09-14", "2014-09-18", "NITRATE+NITRITE-N",
 raw = TRUE)
clean_wq(dt, mdl_handling = "raw")
clean_wq(dt, mdl_handling = "half")

## End(Not run)

dt &lt;- read.csv(system.file("extdata", "testwq.csv", package = "dbhydroR"))
clean_wq(dt)
</code></pre>

<hr>
<h2 id='get_dbkey'>Query dbkey information</h2><span id='topic+get_dbkey'></span><span id='topic+getdbkey'></span>

<h3>Description</h3>

<p>Retrieve a data.frame summary including dbkeys or a vector of
dbkeys corresponding to specified parameters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_dbkey(
  category,
  stationid = NA,
  param = NA,
  freq = NA,
  longest = FALSE,
  stat = NA,
  recorder = NA,
  agency = NA,
  strata = NA,
  detail.level = "summary",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_dbkey_+3A_category">category</code></td>
<td>
<p>character string, choice of &quot;WEATHER&quot;, &quot;SW&quot;, &quot;GW&quot;, or &quot;WQ&quot;</p>
</td></tr>
<tr><td><code id="get_dbkey_+3A_stationid">stationid</code></td>
<td>
<p>character string specifying station name</p>
</td></tr>
<tr><td><code id="get_dbkey_+3A_param">param</code></td>
<td>
<p>character string specifying desired parameter name</p>
</td></tr>
<tr><td><code id="get_dbkey_+3A_freq">freq</code></td>
<td>
<p>character string specifying collection frequency (daily = &quot;DA&quot;)</p>
</td></tr>
<tr><td><code id="get_dbkey_+3A_longest">longest</code></td>
<td>
<p>logical limit results to the longest period-of-record?</p>
</td></tr>
<tr><td><code id="get_dbkey_+3A_stat">stat</code></td>
<td>
<p>character string specifying statistic type</p>
</td></tr>
<tr><td><code id="get_dbkey_+3A_recorder">recorder</code></td>
<td>
<p>character string specifying recorder information</p>
</td></tr>
<tr><td><code id="get_dbkey_+3A_agency">agency</code></td>
<td>
<p>character string specifying collector agency</p>
</td></tr>
<tr><td><code id="get_dbkey_+3A_strata">strata</code></td>
<td>
<p>numeric vector of length 2 specifying a range of z-coordinates
relative to local ground elevation. Only applicable for queries in the
&quot;WEATHER&quot; and &quot;GW&quot; categories.</p>
</td></tr>
<tr><td><code id="get_dbkey_+3A_detail.level">detail.level</code></td>
<td>
<p>character string specifying the level of detail to return.
Choices are &quot;full&quot;, &quot;summary&quot;, and &quot;dbkey&quot;.</p>
</td></tr>
<tr><td><code id="get_dbkey_+3A_...">...</code></td>
<td>
<p>Options passed as named parameters</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A <code>dbkey</code> represents a unique station x variable time-series. A
value in the &quot;Recorder&quot; field of &quot;PREF&quot; should be used whenever possible.
This indicates that the dataset has been checked by the SFWMD modelling
group.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Weather
get_dbkey(stationid = "JBTS", category = "WEATHER", param = "WNDS",
detail.level = "summary")
get_dbkey(stationid = "JBTS", category = "WEATHER", param = "WNDS",
detail.level = "dbkey")

# query on multiple values
get_dbkey(stationid = c("MBTS", "JBTS"), category = "WEATHER",
param = "WNDS", freq = "DA", detail.level = "dbkey")


# Surfacewater
get_dbkey(stationid = "C111%", category = "SW")
get_dbkey(category = "SW", stationid = "LAKE%", detail.level = "full")

# Groundwater
get_dbkey(stationid = "C111%", category = "GW")
get_dbkey(stationid = "C111AE", category = "GW", param = "WELL",
freq = "DA", stat = "MEAN", strata = c(9, 22), recorder = "TROL",
 agency = "WMD", detail.level = "full")

# Water Quality
get_dbkey(stationid = "C111%", category = "WQ")

## End(Not run)
</code></pre>

<hr>
<h2 id='get_hydro'>Retrieve hydrologic data from the DBHYDRO Environmental Database</h2><span id='topic+get_hydro'></span><span id='topic+gethydro'></span>

<h3>Description</h3>

<p>Retrieve hydrologic data from the DBHYDRO Environmental Database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_hydro(dbkey = NA, date_min = NA, date_max = NA, raw = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_hydro_+3A_dbkey">dbkey</code></td>
<td>
<p>character string specifying a unique data series.
See <code><a href="#topic+get_dbkey">get_dbkey</a></code></p>
</td></tr>
<tr><td><code id="get_hydro_+3A_date_min">date_min</code></td>
<td>
<p>character date must be in YYYY-MM-DD format</p>
</td></tr>
<tr><td><code id="get_hydro_+3A_date_max">date_max</code></td>
<td>
<p>character date must be in YYYY-MM-DD format</p>
</td></tr>
<tr><td><code id="get_hydro_+3A_raw">raw</code></td>
<td>
<p>logical default is FALSE, set to TRUE to return data in &quot;long&quot;
format with all comments, qa information, and database codes included.</p>
</td></tr>
<tr><td><code id="get_hydro_+3A_...">...</code></td>
<td>
<p>Options passed on to <code><a href="#topic+get_dbkey">get_dbkey</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>get_hydro</code> can be run in one of two ways.
</p>

<ul>
<li><p> The first, is to identify one or more <code>dbkeys</code> before-hand that
correspond to unique data series and are passed to the <code>dbkey</code>
argument. <code>dbkeys</code> can be found by:
</p>
 <ul>
<li><p> iterative calls to <code><a href="#topic+get_dbkey">get_dbkey</a></code> (see example)
</p>
</li>
<li><p> using the Environmental Monitoring Location Maps
(<a href="https://www.sfwmd.gov/documents-by-tag/emmaps">https://www.sfwmd.gov/documents-by-tag/emmaps</a>)
</p>
</li>
<li><p> using the DBHYDRO Browser.
</p>
</li></ul>

</li>
<li><p> The second way to run <code>get_hydro</code> is to specify additional
arguments to <code>...</code> which are passed to <code><a href="#topic+get_dbkey">get_dbkey</a></code>
on-the-fly.
</p>
</li></ul>

<p>By default, <code>get_hydro</code> returns a cleaned output where metadata
(station-name, variable, measurement units) is wholly contained in the column
name. This is accomplished internally by the <code><a href="#topic+clean_hydro">clean_hydro</a></code>
function. If additional metadata such as latitude and longitude are desired
set the <code>raw</code> argument to <code>TRUE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#One variable/station time series
get_hydro(dbkey = "15081", date_min = "2013-01-01", date_max = "2013-02-02")

#Multiple variable/station time series
get_hydro(dbkey = c("15081", "15069"),
date_min = "2013-01-01", date_max = "2013-02-02")

#Instantaneous hydro retrieval
get_hydro(dbkey = "IY639", date_min = "2015-11-01", date_max = "2015-11-04")

#Looking up unknown dbkeys on the fly
get_hydro(stationid = "JBTS", category = "WEATHER",
param = "WNDS", freq = "DA", date_min = "2013-01-01",
date_max = "2013-02-02")

## End(Not run)
</code></pre>

<hr>
<h2 id='get_wq'>Retrieve water quality data from the DBHYDRO Environmental Database</h2><span id='topic+get_wq'></span><span id='topic+getwq'></span>

<h3>Description</h3>

<p>Retrieve water quality data from the
DBHYDRO Environmental Database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_wq(
  station_id = NA,
  date_min = NA,
  date_max = NA,
  test_name = NA,
  mdl_handling = "raw",
  raw = FALSE,
  qc_strip = "N",
  qc_field = "N",
  test_number = NA,
  v_target_code = "file_csv",
  sample_id = NA,
  project_code = NA
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_wq_+3A_station_id">station_id</code></td>
<td>
<p>character string of station id(s). See the SFWMD station
search utility for specific options</p>
</td></tr>
<tr><td><code id="get_wq_+3A_date_min">date_min</code></td>
<td>
<p>character date must be in POSIXct YYYY-MM-DD format</p>
</td></tr>
<tr><td><code id="get_wq_+3A_date_max">date_max</code></td>
<td>
<p>character date must be in POSIXct YYYY-MM-DD format</p>
</td></tr>
<tr><td><code id="get_wq_+3A_test_name">test_name</code></td>
<td>
<p>character string of test name(s). See the SFWMD
Station Maps at <a href="https://www.sfwmd.gov/documents-by-tag/emmaps">https://www.sfwmd.gov/documents-by-tag/emmaps</a>
for specific options</p>
</td></tr>
<tr><td><code id="get_wq_+3A_mdl_handling">mdl_handling</code></td>
<td>
<p>character string specifying the handling of measurement
values below the minimum detection limit (MDL). Example choices for this
argument include:
</p>

<ul>
<li> <p><code>raw</code>: Returns values exactly as they are stored in the database.
Current practice is to return values below the MDL as 0 minus the
uncertainty estimate.
</p>
</li>
<li> <p><code>half</code>: Returns values below the MDL as half the MDL
</p>
</li>
<li> <p><code>full</code>: Returns values below the MDL as the MDL
</p>
</li></ul>
</td></tr>
<tr><td><code id="get_wq_+3A_raw">raw</code></td>
<td>
<p>logical default is FALSE, set to TRUE to return data in &quot;long&quot;
format with all comments, qa information, and database codes included</p>
</td></tr>
<tr><td><code id="get_wq_+3A_qc_strip">qc_strip</code></td>
<td>
<p>logical set TRUE to avoid returning QAQC flagged data entries</p>
</td></tr>
<tr><td><code id="get_wq_+3A_qc_field">qc_field</code></td>
<td>
<p>logical set TRUE to avoid returning field QC results</p>
</td></tr>
<tr><td><code id="get_wq_+3A_test_number">test_number</code></td>
<td>
<p>numeric test name alternative (not implemented)</p>
</td></tr>
<tr><td><code id="get_wq_+3A_v_target_code">v_target_code</code></td>
<td>
<p>string print to file? (not implemented)</p>
</td></tr>
<tr><td><code id="get_wq_+3A_sample_id">sample_id</code></td>
<td>
<p>numeric (not implemented)</p>
</td></tr>
<tr><td><code id="get_wq_+3A_project_code">project_code</code></td>
<td>
<p>numeric (not implemented)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, <code>get_wq</code> returns a cleaned output. First, the
cleaning function <code><a href="#topic+clean_wq">clean_wq</a></code> converts the raw output from native
DBHYDRO long format (each piece of data on its own row) to wide format (each
site x variable combination in its own column). Next, the extra columns
associated with QA flags, LIMS, and District receiving are removed. Finally,
row entries associated with QA field blanks, which are used to check on
potential sources of contamination, are removed. Setting the raw flag to TRUE
will force getwq to retain information on QA field blanks as well as the
other QA fields.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
#one variable and one station
get_wq(station_id = "FLAB08",
date_min = "2011-03-01", date_max = "2012-05-01",
test_name = "CHLOROPHYLLA-SALINE")

#one variable at multiple stations
get_wq(station_id = c("FLAB08", "FLAB09"),
date_min = "2011-03-01", date_max = "2012-05-01",
test_name = "CHLOROPHYLLA-SALINE")

#One variable at a wildcard station
get_wq(station_id = c("FLAB0%"),
date_min = "2011-03-01",
date_max = "2012-05-01",
test_name = "CHLOROPHYLLA-SALINE")

#multiple variables at multiple stations
get_wq(station_id = c("FLAB08", "FLAB09"),
date_min = "2011-03-01", date_max = "2012-05-01",
test_name = c("CHLOROPHYLLA-SALINE", "SALINITY"))

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
