<!DOCTYPE html><html><head><title>Help for package dexterMST</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {dexterMST}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#dexterMST-package'><p>DexterMST: CML calibration and data management for multi stage tests</p></a></li>
<li><a href='#add_item_properties_mst'><p>Add item properties to an dextermst project</p></a></li>
<li><a href='#add_person_properties_mst'><p>Add person properties to a mst project</p></a></li>
<li><a href='#add_response_data_mst'><p>Add multistage response data</p></a></li>
<li><a href='#add_scoring_rules_mst'><p>add scoring rules to an mst project</p></a></li>
<li><a href='#alter_scoring_rules_mst'><p>alter scoring rules in an mst project</p></a></li>
<li><a href='#close_mst_project'><p>Close an mst project</p></a></li>
<li><a href='#create_mst_project'><p>create a new (empty) mst project</p></a></li>
<li><a href='#create_mst_test'><p>Define a new multi stage test</p></a></li>
<li><a href='#design_plot'><p>Plot the routing design of mst tests</p></a></li>
<li><a href='#DIF_mst'><p>Exploratory test for Differential Item Functioning</p></a></li>
<li><a href='#fit_enorm_mst'><p>Fit the extended nominal response model on MST data</p></a></li>
<li><a href='#fit_inter_mst'><p>Fit the interaction model on a single multi-stage booklet</p></a></li>
<li><a href='#get_booklets_mst'><p>retrieve information from a mst database</p></a></li>
<li><a href='#get_responses_mst'><p>Extract response data from a dexterMST database</p></a></li>
<li><a href='#import_from_dexter'><p>import data from a dexter project</p></a></li>
<li><a href='#mst_rules'><p>Define routing rules</p></a></li>
<li><a href='#open_mst_project'><p>open an existing mst project</p></a></li>
<li><a href='#plot.DIF_stats_mst'><p>plot method for DIF_mst</p></a></li>
<li><a href='#plot.im_mst'><p>plots for the interaction model</p></a></li>
<li><a href='#profile_tables_mst'><p>Profile analysis</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#sim_mst'><p>Simulate multistage testing data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>CML and Bayesian Calibration of Multistage Tests</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.6</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-11-21</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Timo Bechger &lt;tmbechger@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Conditional Maximum Likelihood Calibration and data management of multistage tests. 
  Supports polytomous items and incomplete designs with linear as well as multistage tests.
  Extended Nominal Response and Interaction models, DIF and profile analysis.
  See Robert J. Zwitser and Gunter Maris (2015)&lt;<a href="https://doi.org/10.1007%2Fs11336-013-9369-6">doi:10.1007/s11336-013-9369-6</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/LGPL-3">LGPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://dexter-psychometrics.github.io/dexter/">https://dexter-psychometrics.github.io/dexter/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/dexter-psychometrics/dexter/issues">https://github.com/dexter-psychometrics/dexter/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp, RcppArmadillo, dexter (&ge; 1.2.2), dplyr, RSQLite, rlang,
igraph (&ge; 1.2.1), tidyr, DBI, crayon, graphics, methods,
stats, utils</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppArmadillo (&ge; 0.12.6.6.0)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat, mirt, ggplot2, Cairo</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-04 08:31:53 UTC; jessek</td>
</tr>
<tr>
<td>Author:</td>
<td>Timo Bechger [aut, cre],
  Jesse Koops [aut],
  Ivailo Partchev [aut],
  Gunter Maris [aut],
  Robert Zwitser [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-05 15:20:17 UTC</td>
</tr>
</table>
<hr>
<h2 id='dexterMST-package'>DexterMST: CML calibration and data management for multi stage tests</h2><span id='topic+dexterMST'></span><span id='topic+dexterMST-package'></span>

<h3>Description</h3>

<p>DexterMST is a generalization of the most important functionality in dexter to multi stage tests.
Function names are typically the same as in dexter with '_mst' added. CML calibration of real life
mst tests is tricky, especially if one considers the need to condition on the design in combination with
data selections and corrections of key errors. DexterMST aims to handle these things automatically
and protect the user from making mistakes by working from a local database which enforces some restrictions.
</p>


<h3>Details</h3>

<p>The main features are:
</p>

<ul>
<li><p> project databases providing a structure for storing data about persons, items, responses and booklets.
</p>
</li>
<li><p> CML calibration of the extended nominal response model and interaction model.
</p>
</li></ul>

<p>To learn more about dexterMST, start with the vignette: &lsquo;vignette(&rsquo;dexterMST',package='dexterMST')'
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Timo Bechger <a href="mailto:tmbechger@gmail.com">tmbechger@gmail.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Jesse Koops
</p>
</li>
<li><p> Ivailo Partchev
</p>
</li>
<li><p> Gunter Maris
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Robert Zwitser [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://dexter-psychometrics.github.io/dexter/">https://dexter-psychometrics.github.io/dexter/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/dexter-psychometrics/dexter/issues">https://github.com/dexter-psychometrics/dexter/issues</a>
</p>
</li></ul>


<hr>
<h2 id='add_item_properties_mst'>Add item properties to an dextermst project</h2><span id='topic+add_item_properties_mst'></span>

<h3>Description</h3>

<p>Add item properties to an dextermst project
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_item_properties_mst(db, item_properties)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_item_properties_mst_+3A_db">db</code></td>
<td>
<p>dexterMST project database</p>
</td></tr>
<tr><td><code id="add_item_properties_mst_+3A_item_properties">item_properties</code></td>
<td>
<p>data.frame with a column item_id and other columns containing the item properties</p>
</td></tr>
</table>

<hr>
<h2 id='add_person_properties_mst'>Add person properties to a mst project</h2><span id='topic+add_person_properties_mst'></span>

<h3>Description</h3>

<p>Add person properties to a mst project
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_person_properties_mst(db, person_properties)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_person_properties_mst_+3A_db">db</code></td>
<td>
<p>dextermst project database</p>
</td></tr>
<tr><td><code id="add_person_properties_mst_+3A_person_properties">person_properties</code></td>
<td>
<p>data.frame with a column person_id and 
other columns containing the person properties</p>
</td></tr>
</table>

<hr>
<h2 id='add_response_data_mst'>Add multistage response data</h2><span id='topic+add_response_data_mst'></span><span id='topic+add_booklet_mst'></span>

<h3>Description</h3>

<p>Multistage response data can be entered in long format for one or multiple booklets simultaneously
or in wide format one booklet at a time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_response_data_mst(db, rsp_data, auto_add_unknown_rules = FALSE)

add_booklet_mst(
  db,
  booklet_data,
  test_id,
  booklet_id,
  auto_add_unknown_rules = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_response_data_mst_+3A_db">db</code></td>
<td>
<p>a dextermst db handle</p>
</td></tr>
<tr><td><code id="add_response_data_mst_+3A_rsp_data">rsp_data</code></td>
<td>
<p>data.frame with columns (person_id, test_id, booklet_id, item_id, response)</p>
</td></tr>
<tr><td><code id="add_response_data_mst_+3A_auto_add_unknown_rules">auto_add_unknown_rules</code></td>
<td>
<p>if FALSE, unknown responses (i.e. not defined in the scoring rules) will 
generate an error and the function will abort. If TRUE unknown responses will be automatically added to 
the scoring rules with a score of 0</p>
</td></tr>
<tr><td><code id="add_response_data_mst_+3A_booklet_data">booklet_data</code></td>
<td>
<p>data.frame with a column person_id and other columns which names correspond to item_id's</p>
</td></tr>
<tr><td><code id="add_response_data_mst_+3A_test_id">test_id</code></td>
<td>
<p>id of a test known in the database</p>
</td></tr>
<tr><td><code id="add_response_data_mst_+3A_booklet_id">booklet_id</code></td>
<td>
<p>id of a booklet known in the database</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Users familiar with dexter might expect to be able to enter new booklets here. Because mst tests 
have a more complicated design that cannot be (easily) derived from the data, 
in dexterMST the test designs have to be entered beforehand.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+create_mst_test">create_mst_test</a></code>
</p>

<hr>
<h2 id='add_scoring_rules_mst'>add scoring rules to an mst project</h2><span id='topic+add_scoring_rules_mst'></span>

<h3>Description</h3>

<p>add scoring rules to an mst project
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_scoring_rules_mst(db, rules)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_scoring_rules_mst_+3A_db">db</code></td>
<td>
<p>a dextermst db connection</p>
</td></tr>
<tr><td><code id="add_scoring_rules_mst_+3A_rules">rules</code></td>
<td>
<p>dataframe (item_id, response, item_score), 
listing all permissible responses to an item and their scores</p>
</td></tr>
</table>

<hr>
<h2 id='alter_scoring_rules_mst'>alter scoring rules in an mst project</h2><span id='topic+alter_scoring_rules_mst'></span>

<h3>Description</h3>

<p>It is only possible to change item_scores for existing items and responses 
through this function. Scoring rules can only be changed for items that are 
in the last module of a (mst) test.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>alter_scoring_rules_mst(db, rules)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="alter_scoring_rules_mst_+3A_db">db</code></td>
<td>
<p>a dextermst db connection</p>
</td></tr>
<tr><td><code id="alter_scoring_rules_mst_+3A_rules">rules</code></td>
<td>
<p>data.frame (item_id, response, item_score), see dexter</p>
</td></tr>
</table>

<hr>
<h2 id='close_mst_project'>Close an mst project</h2><span id='topic+close_mst_project'></span>

<h3>Description</h3>

<p>Close an mst project
</p>


<h3>Usage</h3>

<pre><code class='language-R'>close_mst_project(db)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="close_mst_project_+3A_db">db</code></td>
<td>
<p>dextermst project db connection</p>
</td></tr>
</table>

<hr>
<h2 id='create_mst_project'>create a new (empty) mst project</h2><span id='topic+create_mst_project'></span>

<h3>Description</h3>

<p>create a new (empty) mst project
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_mst_project(pth)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_mst_project_+3A_pth">pth</code></td>
<td>
<p>path and filename to save project file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>handle to project database
</p>

<hr>
<h2 id='create_mst_test'>Define a new multi stage test</h2><span id='topic+create_mst_test'></span>

<h3>Description</h3>

<p>Before you can enter data, dexterMST needs to know the design of your test.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_mst_test(
  db,
  test_design,
  routing_rules,
  test_id,
  routing = c("all", "last")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_mst_test_+3A_db">db</code></td>
<td>
<p>output of <code><a href="#topic+open_mst_project">open_mst_project</a></code> or <code><a href="#topic+create_mst_project">create_mst_project</a></code></p>
</td></tr>
<tr><td><code id="create_mst_test_+3A_test_design">test_design</code></td>
<td>
<p>data.frame with columns item_id, module_id, item_position</p>
</td></tr>
<tr><td><code id="create_mst_test_+3A_routing_rules">routing_rules</code></td>
<td>
<p>output of <code><a href="#topic+mst_rules">mst_rules</a></code></p>
</td></tr>
<tr><td><code id="create_mst_test_+3A_test_id">test_id</code></td>
<td>
<p>id of the mst test</p>
</td></tr>
<tr><td><code id="create_mst_test_+3A_routing">routing</code></td>
<td>
<p>all or last routing (see details)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In dexterMST we use the following terminology:
</p>

<dl>
<dt>test</dt><dd><p>collection of modules and rules to go from one module to the other.
A test must have one starting module</p>
</dd>
<dt>booklet</dt><dd><p>a specific path through a mst test.</p>
</dd>
<dt>module</dt><dd><p> a block of items that is always administered together. Each item has a specific position in a module.</p>
</dd>
<dt>routing rules</dt><dd><p>rules to go from one module to another based on score on the current and possibly previous modules</p>
</dd>
</dl>

<p>Additionally, there are two possible types of routing:
</p>

<dl>
<dt>all</dt><dd><p>the routing rules are based on the sum of the current and previous modules</p>
</dd>
<dt>last</dt><dd><p>the routing rules are based only on the current module</p>
</dd>
</dl>

<p>The type of routing must be defined for a test as a whole so it is not possible to mix routing types. 
In CML (as opposed to MML) the routing rules are actually used in the calibration so it
is important they are correctly specified. DexterMST includes multiple checks, 
both when defining the test and when entering data, 
to make sure your routing rules are valid and your data conform to them.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>


# extended example
# we: 
# 1) define an mst design
# 2) simulate mst data
# 3) create a project, enter scoring rules and define the MST test
# 4) do an analysis

library(dplyr)

items = data.frame(item_id=sprintf("item%02i",1:70), item_score=1, delta=sort(runif(70,-1,1)))

design = data.frame(item_id=sprintf("item%02i",1:70),
                    module_id=rep(c('M4','M2','M5','M1','M6','M3', 'M7'),each=10))

routing_rules = routing_rules = mst_rules(
 `124` = M1[0:5] --+ M2[0:10] --+ M4, 
 `125` = M1[0:5] --+ M2[11:15] --+ M5,
 `136` = M1[6:10] --+ M3[6:15] --+ M6,
 `137` = M1[6:10] --+ M3[16:20] --+ M7)

theta = rnorm(3000)

dat = sim_mst(items, theta, design, routing_rules,'all')
dat$test_id='sim_test'
dat$response=dat$item_score


scoring_rules = data.frame(
  item_id = rep(items$item_id,2), 
  item_score= rep(0:1,each=nrow(items)),
  response= rep(0:1,each=nrow(items))) # dummy respons
  

db = create_mst_project(":memory:")
add_scoring_rules_mst(db, scoring_rules)

create_mst_test(db,
                test_design = design,
                routing_rules = routing_rules,
                test_id = 'sim_test',
                routing = "all")

add_response_data_mst(db, dat)


design_plot(db)

f = fit_enorm_mst(db)

head(coef(f))

abl = ability(get_responses_mst(db), f) %&gt;%
   inner_join(tibble(person_id=as.character(1:3000), theta.sim=theta), by='person_id')

plot(abl$theta, abl$theta.sim)   

abl = filter(abl, is.finite(theta))

cor(abl$theta, abl$theta.sim)



</code></pre>

<hr>
<h2 id='design_plot'>Plot the routing design of mst tests</h2><span id='topic+design_plot'></span>

<h3>Description</h3>

<p>Plot the routing design of mst tests
</p>


<h3>Usage</h3>

<pre><code class='language-R'>design_plot(db, predicate = NULL, by_booklet = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="design_plot_+3A_db">db</code></td>
<td>
<p>dexterMST project database connection</p>
</td></tr>
<tr><td><code id="design_plot_+3A_predicate">predicate</code></td>
<td>
<p>logical predicate to select data (tests, booklets,responses) to include in the design plot</p>
</td></tr>
<tr><td><code id="design_plot_+3A_by_booklet">by_booklet</code></td>
<td>
<p>plot and color the paths in a test per booklet</p>
</td></tr>
<tr><td><code id="design_plot_+3A_...">...</code></td>
<td>
<p>further arguments to <code><a href="igraph.html#topic+plot.igraph">plot.igraph</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>You can use this function to plot routing designs for tests before or after
they are administered. There are some slight differences.
</p>
<p>If you have entered response data already, the thickness of the line will indicate the numbers
of respondents that took the respective paths through the test. Paths not taken will not be drawn. You can use the
predicate (see examples) to include or exclude items, tests and respondents.
</p>
<p>If you have not entered response data, all lines will have equal thickness. Variables you can use in the predicate
are limited to test_id and booklet_id in this case.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# plot test designs for all tests in the project
design_plot(db)

# plot design for a test with id 'math'
design_plot(db, test_id == 'math')

# plot design for test math with item 'circumference' turned off
# (this plot will only work if you have response data)
design_plot(db, test_id == 'math' &amp; item_id != 'circumference')


## End(Not run)

</code></pre>

<hr>
<h2 id='DIF_mst'>Exploratory test for Differential Item Functioning</h2><span id='topic+DIF_mst'></span>

<h3>Description</h3>

<p>Compares two parameter objects and produces a test for DIF
based on equality of relative item difficulties category locations
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DIF_mst(db, person_property, predicate = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="DIF_mst_+3A_db">db</code></td>
<td>
<p>an dexterMST db handle</p>
</td></tr>
<tr><td><code id="DIF_mst_+3A_person_property">person_property</code></td>
<td>
<p>name of a person property defined in your dexterMST project</p>
</td></tr>
<tr><td><code id="DIF_mst_+3A_predicate">predicate</code></td>
<td>
<p>logical predicate to select data to include in the analysis</p>
</td></tr>
</table>


<h3>References</h3>

<p>Bechger, T. M. and Maris, G (2015); A Statistical Test for Differential Item Pair Functioning. 
Psychometrika. Vol. 80, no. 2, 317-340.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

dif = DIF_mst(db, person_property = 'test_mode')
print(dif)
plot(dif)


## End(Not run)
</code></pre>

<hr>
<h2 id='fit_enorm_mst'>Fit the extended nominal response model on MST data</h2><span id='topic+fit_enorm_mst'></span>

<h3>Description</h3>

<p>Fits an Extended NOminal Response Model (ENORM) using conditional maximum likelihood (CML)
or a Gibbs sampler for Bayesian estimation; both adapted for MST data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit_enorm_mst(
  db,
  predicate = NULL,
  fixed_parameters = NULL,
  method = c("CML", "Bayes"),
  nDraws = 1000
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fit_enorm_mst_+3A_db">db</code></td>
<td>
<p>an dextermst db handle</p>
</td></tr>
<tr><td><code id="fit_enorm_mst_+3A_predicate">predicate</code></td>
<td>
<p>logical predicate to select data to include in the analysis, see details</p>
</td></tr>
<tr><td><code id="fit_enorm_mst_+3A_fixed_parameters">fixed_parameters</code></td>
<td>
<p>data.frame with columns 'item_id', 'item_score' and 'beta'</p>
</td></tr>
<tr><td><code id="fit_enorm_mst_+3A_method">method</code></td>
<td>
<p>If CML, the estimation method will be Conditional Maximum Likelihood. 
If Bayes, a Gibbs sampler will be used to produce a sample from the posterior.</p>
</td></tr>
<tr><td><code id="fit_enorm_mst_+3A_ndraws">nDraws</code></td>
<td>
<p>Number of Gibbs samples when estimation method is Bayes.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>You can use the predicate to include or omit responses from the analysis, e.g.
&lsquo;p = fit_enorm_mst(db, item_id != &rsquo;some_item' &amp; student_birthdate &gt; '2005-01-01')'
</p>
<p>DexterMST will automatically correct the routing rules for the purpose of the current analysis. 
There are some caveats though. Predicates that lead to many different designs, e.g. a predicate like
<code>response != 'NA'</code> (which is perfectly valid but can potentially create 
almost as many tests as there are students) might take very long to compute. 
</p>
<p>Predicates that remove complete modules from a test, e.g. <code>module_nbr !=2</code> or <code>module_id != 'RU4'</code> 
will cause an error and should be avoided.
</p>


<h3>Value</h3>

<p>object of type 'mst_enorm'. Can be cast to a data.frame of item parameters 
using function &lsquo;coef' or used in dexter&rsquo;s <code><a href="dexter.html#topic+ability">ability</a></code> functions
</p>


<h3>References</h3>

<p>Zwitser, R. J. and Maris, G (2015). Conditional statistical inference with multistage testing designs. 
Psychometrika. Vol. 80, no. 1, 65-84.
</p>
<p>Koops, J. and Bechger, T. and Maris, G. (in press); Bayesian inference for multistage and other 
incomplete designs. In Research for Practical Issues and Solutions in Computerized Multistage Testing.
Routledge, London.
</p>

<hr>
<h2 id='fit_inter_mst'>Fit the interaction model on a single multi-stage booklet</h2><span id='topic+fit_inter_mst'></span>

<h3>Description</h3>

<p>Fit the interaction model on a single multi-stage booklet
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit_inter_mst(db, test_id, booklet_id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fit_inter_mst_+3A_db">db</code></td>
<td>
<p>a db handle</p>
</td></tr>
<tr><td><code id="fit_inter_mst_+3A_test_id">test_id</code></td>
<td>
<p>id of the test as defined in <code><a href="#topic+create_mst_test">create_mst_test</a></code></p>
</td></tr>
<tr><td><code id="fit_inter_mst_+3A_booklet_id">booklet_id</code></td>
<td>
<p>id of the booklet as defined in <code><a href="#topic+create_mst_test">create_mst_test</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='get_booklets_mst'>retrieve information from a mst database</h2><span id='topic+get_booklets_mst'></span><span id='topic+get_design_mst'></span><span id='topic+get_routing_rules_mst'></span><span id='topic+get_scoring_rules_mst'></span><span id='topic+get_items_mst'></span><span id='topic+get_persons_mst'></span>

<h3>Description</h3>

<p>retrieve information from a mst database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_booklets_mst(db)

get_design_mst(db)

get_routing_rules_mst(db)

get_scoring_rules_mst(db)

get_items_mst(db)

get_persons_mst(db)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_booklets_mst_+3A_db">db</code></td>
<td>
<p>dexterMST project database connection</p>
</td></tr>
</table>

<hr>
<h2 id='get_responses_mst'>Extract response data from a dexterMST database</h2><span id='topic+get_responses_mst'></span>

<h3>Description</h3>

<p>Extract response data from a dexterMST database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_responses_mst(
  db,
  predicate = NULL,
  columns = c("person_id", "test_id", "booklet_id", "item_id", "item_score")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_responses_mst_+3A_db">db</code></td>
<td>
<p>a dexterMST project database connection</p>
</td></tr>
<tr><td><code id="get_responses_mst_+3A_predicate">predicate</code></td>
<td>
<p>an expression to select data on</p>
</td></tr>
<tr><td><code id="get_responses_mst_+3A_columns">columns</code></td>
<td>
<p>the columns you wish to select, can include any column in the project</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame of responses
</p>

<hr>
<h2 id='import_from_dexter'>import data from a dexter project</h2><span id='topic+import_from_dexter'></span>

<h3>Description</h3>

<p>This function will import items, scoring rules, persons, test designs and responses from
a dexter database into the dexterMST database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_from_dexter(db, dexter_db, dx_response_prefix = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="import_from_dexter_+3A_db">db</code></td>
<td>
<p>dextermst project db connection</p>
</td></tr>
<tr><td><code id="import_from_dexter_+3A_dexter_db">dexter_db</code></td>
<td>
<p>path to a dexter database file or open dexter db connection</p>
</td></tr>
<tr><td><code id="import_from_dexter_+3A_dx_response_prefix">dx_response_prefix</code></td>
<td>
<p>string to prefix responses from dexter with (usually not necessary, see details)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>DexterMST has no problem calibrating data from linear tests. However, dexter and dexterMST have 
differently structured project databases. If you already have response data from linear tests in
a dexter database, you can easily import it into your dexterMST database from there.
</p>
<p>The dexterMST variables test_id, module_id and booklet_id will all be set to the dexter variable
booklet_id (i.e. a linear test becomes a multistage test with one booklet and one module only).
</p>
<p>It is assumed that items with equal id's in your dexter and dexterMST project refer to the same items. 
If an item in dexter has different score categories compared to an existing item with the same item_id in dexterMST
an error will be generated. If the same response to the same item has a different score, this will also generate an error.
However, it is possible for an item in dexter to have scoring rules for responses not defined in dexterMST and vice versa.
</p>
<p>In the unusual and unfortunate situation that the same response to the same item should have a different score
in dexter than in dexterMST, you can use the parameter dx_response_prefix to prefix the responses in dexter with
some unique combination of characters, e.g. &quot;dexter&quot;. In practice this sometimes happens when old archived data
is only available in scored form (i.e. response 0 has score 0, response 1 has score 1) and new data is available in
raw form but the actual response can also be 0 or 1, etc. causing a conflict.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(dexter)
dbDex = start_new_project(verbAggrRules, "verbAggression.db", 
  person_properties=list(gender="unknown"))
add_booklet(dbDex, verbAggrData, "agg")
add_item_properties(dbDex, verbAggrProperties)
db = create_mst_project(':memory:')
import_from_dexter(db, dbDex)
f_mst = fit_enorm_mst(db)
f_dexter = fit_enorm(dbDex)
close_mst_project(db)
close_project(dbDex)

## End(Not run)


</code></pre>

<hr>
<h2 id='mst_rules'>Define routing rules</h2><span id='topic+mst_rules'></span>

<h3>Description</h3>

<p>Define routing rules for use in <code><a href="#topic+create_mst_test">create_mst_test</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mst_rules(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mst_rules_+3A_...">...</code></td>
<td>
<p>routing rules defined using a a dot-like syntax, read &ndash;+ as an arrow and [:] as a range of score to move to the next stage</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Each scoring rule in '...' defines one or more routing rules together making up a booklet.
For example, 'route1 = a[0:5] &ndash;+ d[9:15] &ndash;+ f' means a start at module 'a', continue to module 'd' when the score on 
'a' is between 0 and 5 (inclusive) and continue to 'g' when the score on modules 'a + b' is between 0 and 8 (for 'All' routing)
or the score on just module 'b' is between 0 and 8 (for 'Last' routing).
'route1' becomes the id of the specific path or booklet, which must be supplied with the data later.
</p>
<p>A routing design for a linear (non-multistage) booklet can simply be entered as <code>mst_rules(my_booklet = my_single_module)</code>.
</p>


<h3>Value</h3>

<p>data.frame with columns...
</p>


<h3>See Also</h3>

<p><code><a href="#topic+create_mst_test">create_mst_test</a></code> for a description of all and last routing and <code><a href="#topic+add_response_data_mst">add_response_data_mst</a></code> to see how to enter data
</p>


<h3>Examples</h3>

<pre><code class='language-R'># a (complicated) three stage (1-3-3) routing design with 9 booklets and 7 modules

routing_rules = mst_rules(bk1 = M1[0:61] --+ M2[0:136]   --+ M5,
                          bk2 = M1[0:61] --+ M2[137:183] --+ M6,
                          bk3 = M1[0:61] --+ M2[184:Inf] --+ M7,

                          bk4 = M1[62:86] --+ M3[0:98]    --+ M5,
                          bk5 = M1[62:86] --+ M3[99:149]  --+ M6,
                          bk6 = M1[62:86] --+ M3[150:Inf] --+ M7,

                          bk7 = M1[87:Inf] --+ M4[0:98]    --+ M5,
                          bk8 = M1[87:Inf] --+ M4[99:130]  --+ M6,
                          bk9 = M1[87:Inf] --+ M4[131:Inf] --+ M7)
      
</code></pre>

<hr>
<h2 id='open_mst_project'>open an existing mst project</h2><span id='topic+open_mst_project'></span>

<h3>Description</h3>

<p>open an existing mst project
</p>


<h3>Usage</h3>

<pre><code class='language-R'>open_mst_project(pth)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="open_mst_project_+3A_pth">pth</code></td>
<td>
<p>path to project file</p>
</td></tr>
</table>

<hr>
<h2 id='plot.DIF_stats_mst'>plot method for DIF_mst</h2><span id='topic+plot.DIF_stats_mst'></span>

<h3>Description</h3>

<p>plot method for DIF_mst
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DIF_stats_mst'
plot(x, items = NULL, itemsX = items, itemsY = items, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.DIF_stats_mst_+3A_x">x</code></td>
<td>
<p>object produced by DIF_mst</p>
</td></tr>
<tr><td><code id="plot.DIF_stats_mst_+3A_items">items</code></td>
<td>
<p>character vector of item id's for a subset of the plot. Useful if you have many items. 
If NULL all items are plotted.</p>
</td></tr>
<tr><td><code id="plot.DIF_stats_mst_+3A_itemsx">itemsX</code></td>
<td>
<p>character vector of item id's for the X axis</p>
</td></tr>
<tr><td><code id="plot.DIF_stats_mst_+3A_itemsy">itemsY</code></td>
<td>
<p>character vector of item id's for the Y axis</p>
</td></tr>
<tr><td><code id="plot.DIF_stats_mst_+3A_...">...</code></td>
<td>
<p>further arguments to plot</p>
</td></tr>
</table>

<hr>
<h2 id='plot.im_mst'>plots for the interaction model</h2><span id='topic+plot.im_mst'></span>

<h3>Description</h3>

<p>plots for the interaction model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'im_mst'
plot(x, item_id = NULL, show.observed = TRUE, curtains = 10, zoom = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.im_mst_+3A_x">x</code></td>
<td>
<p>output of <code><a href="#topic+fit_inter_mst">fit_inter_mst</a></code></p>
</td></tr>
<tr><td><code id="plot.im_mst_+3A_item_id">item_id</code></td>
<td>
<p>id of the item to plot</p>
</td></tr>
<tr><td><code id="plot.im_mst_+3A_show.observed">show.observed</code></td>
<td>
<p>plot the observed mean item scores for each test score</p>
</td></tr>
<tr><td><code id="plot.im_mst_+3A_curtains">curtains</code></td>
<td>
<p>percentage of most extreme values to cover with curtains, 0 to omit curtains</p>
</td></tr>
<tr><td><code id="plot.im_mst_+3A_zoom">zoom</code></td>
<td>
<p>if TRUE, limits the plot area to the test score range allowed by the routing rules</p>
</td></tr>
<tr><td><code id="plot.im_mst_+3A_...">...</code></td>
<td>
<p>further arguments to plot</p>
</td></tr>
</table>

<hr>
<h2 id='profile_tables_mst'>Profile analysis</h2><span id='topic+profile_tables_mst'></span>

<h3>Description</h3>

<p>Expected and observed domain scores per booklet and test score
</p>


<h3>Usage</h3>

<pre><code class='language-R'>profile_tables_mst(parms, domains, item_property)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="profile_tables_mst_+3A_parms">parms</code></td>
<td>
<p>An object returned by <code><a href="#topic+fit_enorm_mst">fit_enorm_mst</a></code></p>
</td></tr>
<tr><td><code id="profile_tables_mst_+3A_domains">domains</code></td>
<td>
<p>data.frame with column item_id and a column whose name matches 'item_property'</p>
</td></tr>
<tr><td><code id="profile_tables_mst_+3A_item_property">item_property</code></td>
<td>
<p>the name of the item property used to define the domains.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame with expected score per domain, booklet and booklet_score
</p>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+ability'></span><span id='topic+ability_tables'></span><span id='topic+plausible_values'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>dexter</dt><dd><p><code><a href="dexter.html#topic+ability">ability</a></code>, <code><a href="dexter.html#topic+plausible_values">plausible_values</a></code></p>
</dd>
</dl>

<hr>
<h2 id='sim_mst'>Simulate multistage testing data</h2><span id='topic+sim_mst'></span>

<h3>Description</h3>

<p>Simulates data from an extended nominal response model according to an mst design
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim_mst(pars, theta, test_design, routing_rules, routing = c("last", "all"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sim_mst_+3A_pars">pars</code></td>
<td>
<p>item parameters, can be either: 
a data.frame with columns item_id, item_score, beta or a dexter or dexterMST parameters object</p>
</td></tr>
<tr><td><code id="sim_mst_+3A_theta">theta</code></td>
<td>
<p>vector of person abilities</p>
</td></tr>
<tr><td><code id="sim_mst_+3A_test_design">test_design</code></td>
<td>
<p>data.frame with columns item_id, module_id</p>
</td></tr>
<tr><td><code id="sim_mst_+3A_routing_rules">routing_rules</code></td>
<td>
<p>output of <code><a href="#topic+mst_rules">mst_rules</a></code></p>
</td></tr>
<tr><td><code id="sim_mst_+3A_routing">routing</code></td>
<td>
<p>'all' or 'last' routing</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
