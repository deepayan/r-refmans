<!DOCTYPE html><html><head><title>Help for package spinifex</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {spinifex}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#.bind_elements2df'><p>Binds replicated elements of a list as columns of a data frame.</p></a></li>
<li><a href='#.init4proto'><p>Initialize common obj from .global <code>ggtour()</code> objects &amp; test their existence</p></a></li>
<li><a href='#.lapply_rep_len'><p>Replicate all vector elements of a list</p></a></li>
<li><a href='#animate_gganimate'><p>Animate a ggtour as a .gif via <code>{gganimate}</code></p></a></li>
<li><a href='#animate_plotly'><p>Animate a ggtour as and HTML widget via <code>{plotly}</code></p></a></li>
<li><a href='#append_fixed_y'><p>Append a fixed vertical height</p></a></li>
<li><a href='#array2df'><p>Turns a tour path array into a long data frame.</p></a></li>
<li><a href='#basis_guided'><p>Solve for the last basis of a guided tour.</p></a></li>
<li><a href='#basis_half_circle'><p>Create a basis that gives uniform contribution in a circle</p></a></li>
<li><a href='#basis_odp'><p>The basis of Orthogonal Discriminant Projection (ODP)</p></a></li>
<li><a href='#basis_olda'><p>The basis of Orthogonal Linear Discriminant Analysis (OLDA)</p></a></li>
<li><a href='#basis_onpp'><p>The basis of Orthogonal Neighborhood Preserving Projection (OLPP)</p></a></li>
<li><a href='#basis_pca'><p>The basis of Principal Component Analysis (PCA)</p></a></li>
<li><a href='#BreastCancer_na.rm'><p>Wisconsin Breast Cancer Database</p></a></li>
<li><a href='#create_manip_space'><p>Create a manipulation space to rotate the manipulation variable in.</p></a></li>
<li><a href='#devMessage'><p>Development message</p></a></li>
<li><a href='#draw_basis'><p>Draw a basis on a static ggplot</p></a></li>
<li><a href='#facet_wrap_tour'><p>Wrap a 1d ribbon of panels into 2d for animation</p></a></li>
<li><a href='#filmstrip'><p>Create a &quot;filmstrip&quot; of the frames of a ggtour.</p></a></li>
<li><a href='#ggtour'><p>Prepare a new grammar of graphics tour</p></a></li>
<li><a href='#interpolate_manual_tour'><p>Interpolates a manual tour</p></a></li>
<li><a href='#is_any_layer_class'><p>Check ggplot layers for use of a specific geom</p></a></li>
<li><a href='#is_orthonormal'><p>Orthonormality of a matrix</p></a></li>
<li><a href='#last_ggtour_env'><p>Retrieve/set last <code>ggtour()</code> information</p></a></li>
<li><a href='#manip_var_of'><p>Suggest a manipulation variable.</p></a></li>
<li><a href='#manual_tour'><p>Produce the series of projection bases to rotate a variable into and out</p>
of a projection.</a></li>
<li><a href='#map_absolute'><p>Manually offset and scale the first 2 columns of a matrix or data.frame.</p></a></li>
<li><a href='#map_relative'><p>Returns the axis scale and position.</p></a></li>
<li><a href='#penguins_na.rm'><p>Size measurements for adult foraging penguins near Palmer Station, Antarctica</p></a></li>
<li><a href='#PimaIndiansDiabetes_long'><p>Pima Indians Diabetes Dataset, long</p></a></li>
<li><a href='#PimaIndiansDiabetes_wide'><p>Pima Indians Diabetes Dataset, wide</p></a></li>
<li><a href='#play_manual_tour'><p>Animate a manual tour. superseded</p></a></li>
<li><a href='#play_tour_path'><p>Animates the provided tour path.</p></a></li>
<li><a href='#proto_basis'><p>Tour proto for a 2D and 1D basis axes respectively</p></a></li>
<li><a href='#proto_default'><p>Wrapper function for default 2D/1D tours respectively.</p></a></li>
<li><a href='#proto_density'><p>Tour proto for data, 1D density, with rug marks</p></a></li>
<li><a href='#proto_density2d'><p>Tour proto for data, 1D density, with rug marks</p></a></li>
<li><a href='#proto_frame_cor2'><p>Tour proto for frames square correlation</p></a></li>
<li><a href='#proto_hex'><p>Tour proto for data, hexagonal heatmap</p></a></li>
<li><a href='#proto_highlight'><p>Tour proto highlighing specified points</p></a></li>
<li><a href='#proto_hline0'><p>Tour proto adding a vertical/horizontal line</p></a></li>
<li><a href='#proto_origin'><p>Tour proto for data origin zero mark</p></a></li>
<li><a href='#proto_point'><p>Tour proto for data point</p></a></li>
<li><a href='#proto_text'><p>Tour proto for data, text labels</p></a></li>
<li><a href='#render_'><p>Prepare the ggplot object before passing to either animation package.</p></a></li>
<li><a href='#render_gganimate'><p>Render the frames as a <em>gganimate</em> animation.</p></a></li>
<li><a href='#render_plotly'><p>Animation the frames as a HTML widget.</p></a></li>
<li><a href='#rotate_manip_space'><p>Performs a rotation on the manipulation space of the given manip var.</p></a></li>
<li><a href='#run_app'><p>Runs a shiny app demonstrating manual tours</p></a></li>
<li><a href='#save_history'><p>Save a tour basis array.</p></a></li>
<li><a href='#scale_axes'><p>Deprecated functions in package <span class="pkg">spinifex</span>.</p></a></li>
<li><a href='#scale_colour_discrete'><p>Set default color &amp; fill for discrete variables</p></a></li>
<li><a href='#scale_sd'><p>Preprocess numeric variables</p></a></li>
<li><a href='#spinifex'><p>spinifex</p></a></li>
<li><a href='#theme_spinifex'><p>Theme spinifex</p></a></li>
<li><a href='#view_frame'><p>Plot a single frame of a manual tour.</p></a></li>
<li><a href='#view_manip_space'><p>Plot 2D projection frame and return the axes table.</p></a></li>
<li><a href='#weather'><p>Sample dataset of daily weather observations from Canberra airport in Australia.</p></a></li>
<li><a href='#wine'><p>The wine dataset from the UCI Machine Learning Repository.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Manual Tours, Manual Control of Dynamic Projections of Numeric
Multivariate Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.7.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Data visualization tours animates linear projection 
  of multivariate data as its basis (ie. orientation) changes. The 'spinifex' 
  packages generates paths for manual tours by manipulating the contribution of 
  a single variable at a time Cook &amp; Buja (1997) 
  &lt;<a href="https://doi.org/10.1080%2F10618600.1997.10474754">doi:10.1080/10618600.1997.10474754</a>&gt;. Other types of tours, such as grand 
  (random walk) and guided (optimizing some objective function) are available 
  in the 'tourr' package Wickham et al. &lt;<a href="https://doi.org/10.18637%2Fjss.v040.i02">doi:10.18637/jss.v040.i02</a>&gt;. 
  'spinifex' builds on 'tourr' and can render tours with 'gganimate' and 
  'plotly' graphics, and allows for exporting as an .html widget and as an .gif, 
  respectively. This work is fully discussed in Spyrison &amp; Cook (2020) 
  &lt;<a href="https://doi.org/10.32614%2FRJ-2020-027">doi:10.32614/RJ-2020-027</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0), tourr</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/nspyrison/spinifex/">https://github.com/nspyrison/spinifex/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/nspyrison/spinifex/issues">https://github.com/nspyrison/spinifex/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2, gganimate, plotly, shiny, Rdimtools, magrittr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>MASS, hexbin, htmlwidgets, gifski, png, dplyr, GGally,
rmarkdown, knitr, testthat, lifecycle, covr, spelling</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-29 13:43:50 UTC; spyri</td>
</tr>
<tr>
<td>Author:</td>
<td>Nicholas Spyrison <a href="https://orcid.org/0000-0002-8417-0212"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Dianne Cook <a href="https://orcid.org/0000-0002-3813-7155"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    ths]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Nicholas Spyrison &lt;spyrison@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-29 14:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='.bind_elements2df'>Binds replicated elements of a list as columns of a data frame.</h2><span id='topic+.bind_elements2df'></span>

<h3>Description</h3>

<p>Internal function. To be applied to <code>aes_args</code>
replicates elements to the length of the data and bind as a column.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.bind_elements2df(list, df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".bind_elements2df_+3A_list">list</code></td>
<td>
<p>A list of arguments such as those passed in <code>aes_args</code> and
<code>identity_args</code>.</p>
</td></tr>
<tr><td><code id=".bind_elements2df_+3A_df">df</code></td>
<td>
<p>A data.frame to column bind the elements of <code>list</code> to.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other Internal utility: 
<code><a href="#topic+.init4proto">.init4proto</a></code>,
<code><a href="#topic+.lapply_rep_len">.lapply_rep_len</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## This function is not meant for external use
</code></pre>

<hr>
<h2 id='.init4proto'>Initialize common obj from .global <code>ggtour()</code> objects &amp; test their existence</h2><span id='topic+.init4proto'></span>

<h3>Description</h3>

<p>Internal expression. Creates local .objects to be commonly consumed by
spinifex proto_* functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.init4proto
</code></pre>


<h3>Format</h3>

<p>An object of class <code>expression</code> of length 1.
</p>


<h3>See Also</h3>

<p>Other Internal utility: 
<code><a href="#topic+.bind_elements2df">.bind_elements2df</a>()</code>,
<code><a href="#topic+.lapply_rep_len">.lapply_rep_len</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## This expression. is not meant for external use.
</code></pre>

<hr>
<h2 id='.lapply_rep_len'>Replicate all vector elements of a list</h2><span id='topic+.lapply_rep_len'></span>

<h3>Description</h3>

<p>Internal function. To be applied to <code>aes_args</code> and <code>identity_args</code>,
replicates vectors of length data to length of data*frames for animation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.lapply_rep_len(list, to_length, expected_length)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".lapply_rep_len_+3A_list">list</code></td>
<td>
<p>A list of arguments such as those passed in <code>aes_args</code> and
<code>identity_args</code>.</p>
</td></tr>
<tr><td><code id=".lapply_rep_len_+3A_to_length">to_length</code></td>
<td>
<p>Scalar number, length of the output vector;
the number of rows in the data frames to replicate to.</p>
</td></tr>
<tr><td><code id=".lapply_rep_len_+3A_expected_length">expected_length</code></td>
<td>
<p>Scalar number, the expected length of the each element
of <code>list</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other Internal utility: 
<code><a href="#topic+.bind_elements2df">.bind_elements2df</a>()</code>,
<code><a href="#topic+.init4proto">.init4proto</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## This function is not meant for external use
</code></pre>

<hr>
<h2 id='animate_gganimate'>Animate a ggtour as a .gif via <code>{gganimate}</code></h2><span id='topic+animate_gganimate'></span>

<h3>Description</h3>

<p>Animates the ggplot return of <code>ggtour()</code> and added <code style="white-space: pre;">&#8288;proto_*()&#8288;</code> functions as a
.gif without interaction, through use of <code>{gganimate}</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>animate_gganimate(
  ggtour,
  fps = 8,
  rewind = FALSE,
  start_pause = 1,
  end_pause = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="animate_gganimate_+3A_ggtour">ggtour</code></td>
<td>
<p>A grammar of graphics tour with appended protos added.
A return from <code style="white-space: pre;">&#8288;ggtour() + proto_*()&#8288;</code>.</p>
</td></tr>
<tr><td><code id="animate_gganimate_+3A_fps">fps</code></td>
<td>
<p>Number of Frames Per Second, the speed resulting animation.</p>
</td></tr>
<tr><td><code id="animate_gganimate_+3A_rewind">rewind</code></td>
<td>
<p>Whether or not the animation should play backwards,
in reverse order once reaching the end. Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="animate_gganimate_+3A_start_pause">start_pause</code></td>
<td>
<p>The duration in seconds to wait before starting the
animation. Defaults to 1 second.</p>
</td></tr>
<tr><td><code id="animate_gganimate_+3A_end_pause">end_pause</code></td>
<td>
<p>The duration in seconds to wait after ending the animation,
before it restarts from the first frame. Defaults to 1 second.</p>
</td></tr>
<tr><td><code id="animate_gganimate_+3A_...">...</code></td>
<td>
<p>Other arguments passed to
<code><a href="gganimate.html#topic+animate">gganimate::animate</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="gganimate.html#topic+animate">gganimate::animate</a></code>
</p>
<p>Other ggtour animator: 
<code><a href="#topic+animate_plotly">animate_plotly</a>()</code>,
<code><a href="#topic+filmstrip">filmstrip</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat     &lt;- scale_sd(penguins_na.rm[, 1:4])
clas    &lt;- penguins_na.rm$species
bas     &lt;- basis_pca(dat)
mv      &lt;- manip_var_of(bas)
mt_path &lt;- manual_tour(bas, manip_var = mv)

ggt &lt;- ggtour(mt_path, dat, angle = .3) +
  proto_default(aes_args = list(color = clas, shape = clas),
                identity_args = list(size = 1.5, alpha = .7))
## Not run: 
## Default .gif rendering
animate_gganimate(ggt)

if(FALSE){ ## Don't accidentally save file
  ## Option arguments, rendering to default .gif
  anim &lt;- animate_gganimate(
    ggt, fps = 10, rewind = TRUE,
    start_pause = 1, end_pause = 2,
    height = 10, width = 15, units = "cm", ## "px", "in", "cm", or "mm."
    res = 200 ## resolution, pixels per dimension unit I think
  )
  ## Save rendered animation
  gganimate::anim_save("my_tour.gif",
                       animation = anim,
                       path = "./figures")
  
  ## Alternative renderer saving directly to .mp4
  animate_gganimate(ggt, fps = 5,
    height = 4, width = 6, units = "in", ## "px", "in", "cm", or "mm."
    res = 200, ## resolution, pixels per dimension unit I think
    renderer = gganimate::av_renderer("./my_tour.mp4"))
}

## End(Not run)
</code></pre>

<hr>
<h2 id='animate_plotly'>Animate a ggtour as and HTML widget via <code>{plotly}</code></h2><span id='topic+animate_plotly'></span>

<h3>Description</h3>

<p>Animates the static <code>ggtour()</code> and added <code style="white-space: pre;">&#8288;proto_*()&#8288;</code> functions as a
<code>{plotly}</code> animation, an .html widget with slider and hover tooltip showing
the row number.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>animate_plotly(ggtour, fps = 8, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="animate_plotly_+3A_ggtour">ggtour</code></td>
<td>
<p>A grammar of graphics tour with appended protos added.
A return from <code style="white-space: pre;">&#8288;ggtour() + proto_*()&#8288;</code>.</p>
</td></tr>
<tr><td><code id="animate_plotly_+3A_fps">fps</code></td>
<td>
<p>Number of Frames Per Second, the speed resulting animation.</p>
</td></tr>
<tr><td><code id="animate_plotly_+3A_...">...</code></td>
<td>
<p>Other arguments passed to
<code><a href="plotly.html#topic+ggplotly">plotly::ggplotly</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other ggtour animator: 
<code><a href="#topic+animate_gganimate">animate_gganimate</a>()</code>,
<code><a href="#topic+filmstrip">filmstrip</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat     &lt;- scale_sd(penguins_na.rm[, 1:4])
clas    &lt;- penguins_na.rm$species
bas     &lt;- basis_pca(dat)
mv      &lt;- manip_var_of(bas)
mt_path &lt;- manual_tour(bas, manip_var = mv)

ggt &lt;- ggtour(mt_path, dat, angle = .3) +
  proto_origin() +
  proto_basis() +
  proto_point(aes_args = list(color = clas, shape = clas),
              identity_args = list(size = 1.5, alpha = .7))

animate_plotly(ggt, width = 700, height = 450) ## pixels only, no resolution argument

## Example saving to a .html widget, may require additional setup.
if(FALSE){
  anim &lt;- animate_plotly(ggt, fps = 10,
                         width = 700, height = 450) ## in pixels
  
  htmlwidgets::saveWidget(widget = anim,
                          file = "./figures/my_tour.html",
                          selfcontained = TRUE)}

</code></pre>

<hr>
<h2 id='append_fixed_y'>Append a fixed vertical height</h2><span id='topic+append_fixed_y'></span>

<h3>Description</h3>

<p>Adds/overwrites the y of the projected data. Usefully for 1D projections and
appending information related to, but independent from the projection;
model predictions or residuals for instance.
Wants to be called early so that the following proto calls adopt the changes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>append_fixed_y(fixed_y)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="append_fixed_y_+3A_fixed_y">fixed_y</code></td>
<td>
<p>Vector of length of the data, values to fix vertical height.
Typically related to but not an explanatory variable, for instance,
predicted Y, or residuals.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other ggtour proto functions: 
<code><a href="#topic+facet_wrap_tour">facet_wrap_tour</a>()</code>,
<code><a href="#topic+ggtour">ggtour</a>()</code>,
<code><a href="#topic+proto_basis">proto_basis</a>()</code>,
<code><a href="#topic+proto_default">proto_default</a>()</code>,
<code><a href="#topic+proto_density">proto_density</a>()</code>,
<code><a href="#topic+proto_density2d">proto_density2d</a>()</code>,
<code><a href="#topic+proto_hex">proto_hex</a>()</code>,
<code><a href="#topic+proto_highlight">proto_highlight</a>()</code>,
<code><a href="#topic+proto_hline0">proto_hline0</a>()</code>,
<code><a href="#topic+proto_origin">proto_origin</a>()</code>,
<code><a href="#topic+proto_point">proto_point</a>()</code>,
<code><a href="#topic+proto_text">proto_text</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat     &lt;- scale_sd(penguins_na.rm[, 1:4])
clas    &lt;- penguins_na.rm$species
bas     &lt;- basis_pca(dat)
mv      &lt;- manip_var_of(bas)
mt_path &lt;- manual_tour(bas, manip_var = mv)

# Fixed y height with related information, independent of a 1D tour 
# _eg_ predictions or residuals.
message("don't forget to scale your fixed_y.")
dummy_y &lt;- scale_sd(as.integer(clas) + rnorm(nrow(dat), 0, .5))
gt_path &lt;- save_history(dat, grand_tour(d = 1), max_bases = 5)

message("append_fixed_y wants to be called early so other proto's adopt the fixed_y.")
ggt &lt;- ggtour(gt_path, dat, angle = .3) +
  append_fixed_y(fixed_y = dummy_y) + ## insert/overwrites vertical values.
  proto_point(list(fill = clas, color = clas)) +
  proto_basis1d() +
  proto_origin()

animate_plotly(ggt)

</code></pre>

<hr>
<h2 id='array2df'>Turns a tour path array into a long data frame.</h2><span id='topic+array2df'></span>

<h3>Description</h3>

<p>Internal function, many end users will not need this. Takes the result of
<code>manual_tour()</code> or <code>tourr::save_history()</code>. Restructures the array of
interpolated bases into a long data frame for use in ggplots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>array2df(
  basis_array,
  data = NULL,
  basis_label = NULL,
  data_label = rownames(data),
  do_center_frame = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="array2df_+3A_basis_array">basis_array</code></td>
<td>
<p>A full (p, d, n_frames) interpolated basis array of a
tour, the output of <code>manual_tour</code> or <code style="white-space: pre;">&#8288;save_history(*_tour())&#8288;</code>.</p>
</td></tr>
<tr><td><code id="array2df_+3A_data">data</code></td>
<td>
<p>Optional, (n, p) dataset to project, consisting of numeric
variables.</p>
</td></tr>
<tr><td><code id="array2df_+3A_basis_label">basis_label</code></td>
<td>
<p>Labels for basis display, a character
vector with length equal to the number of variables.
Defaults to NULL; 3 character abbreviation from colnames of data or
rownames of basis.</p>
</td></tr>
<tr><td><code id="array2df_+3A_data_label">data_label</code></td>
<td>
<p>Labels for <code>plotly</code> tooltip display.
Defaults to the rownames of data. If null, initializes to 1:nrow(data).</p>
</td></tr>
<tr><td><code id="array2df_+3A_do_center_frame">do_center_frame</code></td>
<td>
<p>Whether or not to center the mean within each
animation frame. Defaults to TRUE.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## !!This function is not meant for external use!!
dat  &lt;- scale_sd(wine[, 2:6])
clas &lt;- wine$Type
bas  &lt;- basis_pca(dat)
mv   &lt;- manip_var_of(bas)

## Radial tour array to long df, as used in play_manual_tour()
mt_array &lt;- manual_tour(basis = bas, manip_var = mv)
ls_df_frames &lt;- array2df(basis_array = mt_array, data = dat,
                         basis_label = paste0("MyLabs", 1:nrow(bas)))
str(ls_df_frames)

## tourr::save_history tour array to long df, as used in play_tour_path()
gt_array &lt;- tourr::save_history(data = dat, max_bases = 10)
ls_df_frames2 &lt;- array2df(basis_array = gt_array, data = dat)
str(ls_df_frames2)
</code></pre>

<hr>
<h2 id='basis_guided'>Solve for the last basis of a guided tour.</h2><span id='topic+basis_guided'></span>

<h3>Description</h3>

<p>Performs simulated annealing on the index function, solving for it's local
extrema. Returns only the last identified basis of the optimization. A
truncated, muted extension of tourr::save_history(guided_tour())).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>basis_guided(data, index_f = tourr::holes(), d = 2, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="basis_guided_+3A_data">data</code></td>
<td>
<p>Numeric matrix or data.frame of the observations.</p>
</td></tr>
<tr><td><code id="basis_guided_+3A_index_f">index_f</code></td>
<td>
<p>The index function to optimize.
<code>{tourr}</code> exports <code>holes()</code>, <code>cmass()</code>, and <code>lda_pp(class)</code>.</p>
</td></tr>
<tr><td><code id="basis_guided_+3A_d">d</code></td>
<td>
<p>Number of dimensions in the projection space.</p>
</td></tr>
<tr><td><code id="basis_guided_+3A_...">...</code></td>
<td>
<p>Optional, other arguments to pass to
<code><a href="tourr.html#topic+guided_tour">tourr::guided_tour</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric matrix of the last basis of a guided tour.
</p>


<h3>See Also</h3>

<p><code><a href="tourr.html#topic+guided_tour">tourr::guided_tour</a></code> for annealing
arguments.
</p>
<p>Other basis producing functions: 
<code><a href="#topic+basis_half_circle">basis_half_circle</a>()</code>,
<code><a href="#topic+basis_odp">basis_odp</a>()</code>,
<code><a href="#topic+basis_olda">basis_olda</a>()</code>,
<code><a href="#topic+basis_onpp">basis_onpp</a>()</code>,
<code><a href="#topic+basis_pca">basis_pca</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- scale_sd(wine[, 2:6])
basis_guided(data = dat, index_f = tourr::holes())

basis_guided(data = dat, index_f = tourr::cmass(),
             alpha = .4, cooling = .9, max.tries = 10, n_sample = 4)
</code></pre>

<hr>
<h2 id='basis_half_circle'>Create a basis that gives uniform contribution in a circle</h2><span id='topic+basis_half_circle'></span>

<h3>Description</h3>

<p>Orthonormalizes uniform variable contributions on a unit circle. This
serves as a NULL basis, one that is variable agnostic while spacing the
variables to have minimize variable dependence.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>basis_half_circle(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="basis_half_circle_+3A_data">data</code></td>
<td>
<p>The data to create a basis for.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other basis producing functions: 
<code><a href="#topic+basis_guided">basis_guided</a>()</code>,
<code><a href="#topic+basis_odp">basis_odp</a>()</code>,
<code><a href="#topic+basis_olda">basis_olda</a>()</code>,
<code><a href="#topic+basis_onpp">basis_onpp</a>()</code>,
<code><a href="#topic+basis_pca">basis_pca</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- scale_sd(wine[, 2:6])
bas &lt;- basis_half_circle(dat)
</code></pre>

<hr>
<h2 id='basis_odp'>The basis of Orthogonal Discriminant Projection (ODP)</h2><span id='topic+basis_odp'></span>

<h3>Description</h3>

<p>Orthogonal Discriminant Projection (ODP) is a linear dimension reduction
method with class supervision. It maximizes weighted difference between local
and non-local scatter while local information is also preserved by
constructing a neighborhood graph.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>basis_odp(data, class, d = 2, type = c("proportion", 0.1), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="basis_odp_+3A_data">data</code></td>
<td>
<p>Numeric matrix or data.frame of the observations, coerced to matrix.</p>
</td></tr>
<tr><td><code id="basis_odp_+3A_class">class</code></td>
<td>
<p>The class for each observation, coerced to a factor.</p>
</td></tr>
<tr><td><code id="basis_odp_+3A_d">d</code></td>
<td>
<p>Number of dimensions in the projection space.
of <code>class</code>.</p>
</td></tr>
<tr><td><code id="basis_odp_+3A_type">type</code></td>
<td>
<p>A vector specifying the neighborhood graph construction.
Expects; <code>c("knn", k)</code>, <code>c("enn", radius)</code>, or <code>c("proportion",ratio)</code>.
Defaults to <code>c("knn", sqrt(nrow(data)))</code>, nearest neighbors equal to the
square root of observations.</p>
</td></tr>
<tr><td><code id="basis_odp_+3A_...">...</code></td>
<td>
<p>Optional, other arguments to pass to <code><a href="Rdimtools.html#topic+do.odp">Rdimtools::do.odp</a></code>.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Li B, Wang C, Huang D (2009). &quot;Supervised feature extraction based on
orthogonal discriminant projection.&quot; Neurocomputing, 73(1-3), 191-196.
</p>


<h3>See Also</h3>

<p><code><a href="Rdimtools.html#topic+do.odp">Rdimtools::do.odp</a></code> for locality
preservation arguments.
</p>
<p><code><a href="Rdimtools.html#topic+aux.graphnbd">Rdimtools::aux.graphnbd</a></code> for
details on <code>type</code>.
</p>
<p>Other basis producing functions: 
<code><a href="#topic+basis_guided">basis_guided</a>()</code>,
<code><a href="#topic+basis_half_circle">basis_half_circle</a>()</code>,
<code><a href="#topic+basis_olda">basis_olda</a>()</code>,
<code><a href="#topic+basis_onpp">basis_onpp</a>()</code>,
<code><a href="#topic+basis_pca">basis_pca</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat  &lt;- scale_sd(wine[, 2:6])
clas &lt;- wine$Type
basis_odp(data = dat, class = clas)
</code></pre>

<hr>
<h2 id='basis_olda'>The basis of Orthogonal Linear Discriminant Analysis (OLDA)</h2><span id='topic+basis_olda'></span>

<h3>Description</h3>

<p>Orthogonal LDA (OLDA) is an extension of classical LDA where the discriminant
vectors are orthogonal to each other.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>basis_olda(data, class, d = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="basis_olda_+3A_data">data</code></td>
<td>
<p>Numeric matrix or data.frame of the observations, coerced to matrix.</p>
</td></tr>
<tr><td><code id="basis_olda_+3A_class">class</code></td>
<td>
<p>The class for each observation, coerced to a factor.</p>
</td></tr>
<tr><td><code id="basis_olda_+3A_d">d</code></td>
<td>
<p>Number of dimensions in the projection space.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric matrix, an orthogonal basis that best distinguishes the
group means of <code>class</code>.
</p>


<h3>References</h3>

<p>Ye J (2005). &quot;Characterization of a Family of Algorithms for Generalized
Discriminant Analysis on Undersampled Problems.&quot; J. Mach. Learn. Res.,
6, 483-502. ISSN 1532-4435.
</p>


<h3>See Also</h3>

<p><code><a href="Rdimtools.html#topic+do.olda">Rdimtools::do.olda</a></code>
</p>
<p>Other basis producing functions: 
<code><a href="#topic+basis_guided">basis_guided</a>()</code>,
<code><a href="#topic+basis_half_circle">basis_half_circle</a>()</code>,
<code><a href="#topic+basis_odp">basis_odp</a>()</code>,
<code><a href="#topic+basis_onpp">basis_onpp</a>()</code>,
<code><a href="#topic+basis_pca">basis_pca</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat  &lt;- scale_sd(wine[, 2:6])
clas &lt;- wine$Type
basis_olda(data = dat, class = clas)
</code></pre>

<hr>
<h2 id='basis_onpp'>The basis of Orthogonal Neighborhood Preserving Projection (OLPP)</h2><span id='topic+basis_onpp'></span>

<h3>Description</h3>

<p>Orthogonal Neighborhood Preserving Projection (ONPP) is an unsupervised
linear dimension reduction method. It constructs a weighted data graph from
LLE method. Also, it develops LPP method by preserving the structure of local
neighborhoods. For the more details on <code>type</code> see
<code><a href="Rdimtools.html#topic+aux.graphnbd">Rdimtools::aux.graphnbd()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>basis_onpp(data, d = 2, type = c("knn", sqrt(nrow(data))))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="basis_onpp_+3A_data">data</code></td>
<td>
<p>Numeric matrix or data.frame of the observations, coerced to matrix.</p>
</td></tr>
<tr><td><code id="basis_onpp_+3A_d">d</code></td>
<td>
<p>Number of dimensions in the projection space.</p>
</td></tr>
<tr><td><code id="basis_onpp_+3A_type">type</code></td>
<td>
<p>A vector specifying the neighborhood graph construction.
Expects; <code>c("knn", k)</code>, <code>c("enn", radius)</code>, or <code>c("proportion",ratio)</code>.
Defaults to <code>c("knn", sqrt(nrow(data)))</code>, nearest neighbors equal to the
square root of observations.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Orthogonal matrix basis that distinguishes the levels of <code>class</code>
based on local and non-local variation as weighted against the neighborhood
graph.
</p>


<h3>References</h3>

<p>He X (2005). Locality Preserving Projections. PhD Thesis,
University of Chicago, Chicago, IL, USA.
</p>


<h3>See Also</h3>

<p><code><a href="Rdimtools.html#topic+do.onpp">Rdimtools::do.onpp</a></code>
</p>
<p><code><a href="Rdimtools.html#topic+aux.graphnbd">Rdimtools::aux.graphnbd</a></code> for
details on <code>type</code>.
</p>
<p>Other basis producing functions: 
<code><a href="#topic+basis_guided">basis_guided</a>()</code>,
<code><a href="#topic+basis_half_circle">basis_half_circle</a>()</code>,
<code><a href="#topic+basis_odp">basis_odp</a>()</code>,
<code><a href="#topic+basis_olda">basis_olda</a>()</code>,
<code><a href="#topic+basis_pca">basis_pca</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat  &lt;- scale_sd(wine[, 2:6])
basis_onpp(data = dat)
</code></pre>

<hr>
<h2 id='basis_pca'>The basis of Principal Component Analysis (PCA)</h2><span id='topic+basis_pca'></span>

<h3>Description</h3>

<p>The orthogonal linear components of the variables in the next largest
direction of variance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>basis_pca(data, d = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="basis_pca_+3A_data">data</code></td>
<td>
<p>Numeric matrix or data.frame of the observations.</p>
</td></tr>
<tr><td><code id="basis_pca_+3A_d">d</code></td>
<td>
<p>Number of dimensions in the projection space.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="Rdimtools.html#topic+do.pca">Rdimtools::do.pca</a></code>
</p>
<p>Other basis producing functions: 
<code><a href="#topic+basis_guided">basis_guided</a>()</code>,
<code><a href="#topic+basis_half_circle">basis_half_circle</a>()</code>,
<code><a href="#topic+basis_odp">basis_odp</a>()</code>,
<code><a href="#topic+basis_olda">basis_olda</a>()</code>,
<code><a href="#topic+basis_onpp">basis_onpp</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- scale_sd(wine[, 2:6])
basis_pca(data = dat)
</code></pre>

<hr>
<h2 id='BreastCancer_na.rm'>Wisconsin Breast Cancer Database</h2><span id='topic+BreastCancer_na.rm'></span>

<h3>Description</h3>

<p>The objective is to identify each of a number of benign or malignant classes.
Samples arrive periodically as Dr. Wolberg reports his clinical cases. The
database therefore reflects this chronological grouping of the data. This
grouping information appears immediately below, having been removed from
the data itself. Each variable except for the first was converted into 11
primitive numerical attributes with values ranging from 0 through 10. Rows
with missing attribute values and duplicate rows removed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>BreastCancer_na.rm
</code></pre>


<h3>Format</h3>

<p>A data frame with 675 observations of 8 numeric variables and
target factor <code>Class</code>.
</p>

<ul>
<li><p> Id, Sample code number
</p>
</li>
<li><p> Cl.thickness, Clump thickness
</p>
</li>
<li><p> Cell.size, Uniformity of cell size
</p>
</li>
<li><p> Cell.shape, Uniformity of cell shape
</p>
</li>
<li><p> Marg.adhesion, Marginal adhesion
</p>
</li>
<li><p> Epith.c.size, Single Epthelial cell size
</p>
</li>
<li><p> Bare.nuclei, Bare nuclei
</p>
</li>
<li><p> Bl.cromatin, Bland chromatin
</p>
</li>
<li><p> Normal.nucleoli, Normal Nucleoli
</p>
</li>
<li><p> Mitoses, Mitoses
</p>
</li>
<li><p> Class, Class of cancer, either &quot;benign&quot; or &quot;malignant&quot;
</p>
</li></ul>



<h3>Details</h3>

<p>This is a cleaned subset of <code>mlbench</code>'s <code>BreastCancer</code>.
See <code>help(BreastCancer, package = "mlbench")</code> for the original.
</p>
<p>Replicating this dataset:
</p>
<div class="sourceCode"><pre>require("mlbench")
data(BreastCancer)

raw &lt;- BreastCancer
## rownumber index of 8 duplicate 16 incomplete rows
idx &lt;- !duplicated(raw) &amp; complete.cases(raw) 
d &lt;- raw[idx, 3:10]
d &lt;- apply(d, 2L, as.integer)
d &lt;- data.frame(d, Class = as.factor(raw$Class[idx]))
BreastCancer_na.rm &lt;- d
## save(BreastCancer_na.rm, file = "./data/BreastCancer_na.rm.rda")
</pre></div>


<h3>Source</h3>

<p>J.W. Smith., el al. 1988. Using the ADAP learning algorithm to forecast the onset of diabetes mellitus. In Proceedings of the Symposium on Computer Applications and Medical Care (pp. 261&ndash;265). IEEE Computer Society Press.
</p>
<p>mlbench, R package. F. Leisch &amp; E. Dimitriadou, 2021. mlbench: Machine Learning Benchmark Problems <a href="https://CRAN.R-project.org/package=mlbench">https://CRAN.R-project.org/package=mlbench</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
str(BreastCancer_na.rm)
dat  &lt;- scale_sd(BreastCancer_na.rm[, 1:8])
clas &lt;- BreastCancer_na.rm$Class

bas &lt;- basis_pca(dat)
mv  &lt;- manip_var_of(bas)
mt  &lt;- manual_tour(bas, mv)

ggt &lt;- ggtour(mt, dat, angle = .2) +
  proto_default(aes_args = list(color = clas, shape = clas))

animate_plotly(ggt)

</code></pre>

<hr>
<h2 id='create_manip_space'>Create a manipulation space to rotate the manipulation variable in.</h2><span id='topic+create_manip_space'></span>

<h3>Description</h3>

<p>Typically called by <code>manual_tour()</code>. Creates a (p, d) orthonormal matrix,
the manipulation space from the given basis right concatenated with a zero
vector, with <code>manip_var</code> set to 1.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_manip_space(basis, manip_var = manip_var_of(basis))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_manip_space_+3A_basis">basis</code></td>
<td>
<p>A (p, d) orthonormal numeric matrix,
the linear combination the original variables contribute to projection frame.
Required, no default.</p>
</td></tr>
<tr><td><code id="create_manip_space_+3A_manip_var">manip_var</code></td>
<td>
<p>The number of the variable/column to rotate. Defaults to
<code>manip_var_of(basis)</code>, the variable with the largest contribution in the basis.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A (p, d + 1) orthonormal matrix, the manipulation space to
manipulate the projection in.
</p>


<h3>See Also</h3>

<p>Other manual tour adjacent functions: 
<code><a href="#topic+interpolate_manual_tour">interpolate_manual_tour</a>()</code>,
<code><a href="#topic+manip_var_of">manip_var_of</a>()</code>,
<code><a href="#topic+manual_tour">manual_tour</a>()</code>,
<code><a href="#topic+rotate_manip_space">rotate_manip_space</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat &lt;- scale_sd(wine[, 2:6])
bas &lt;- basis_pca(dat)
mv  &lt;- manip_var_of(bas)
create_manip_space(basis = bas, manip_var = mv)

## d = 1 case 
bas1d &lt;- basis_pca(dat, d = 1)
mv    &lt;- manip_var_of(bas1d)
create_manip_space(bas1d, mv)
</code></pre>

<hr>
<h2 id='devMessage'>Development message</h2><span id='topic+devMessage'></span>

<h3>Description</h3>

<p>Send a message if the 4th chunk of the package version is 9000.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>devMessage(text)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="devMessage_+3A_text">text</code></td>
<td>
<p>A character string to message() if package version is _9000.</p>
</td></tr>
</table>

<hr>
<h2 id='draw_basis'>Draw a basis on a static ggplot</h2><span id='topic+draw_basis'></span>

<h3>Description</h3>

<p>Additively draws a basis on a static ggplot.
Not a <code>geom</code> or <code>proto</code>. Expects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>draw_basis(
  basis,
  map_to = data.frame(x = c(0, 1), y = c(0, 1)),
  position = c("left", "center", "right", "bottomleft", "topright", "off"),
  manip_col = "blue",
  line_size = 0.6,
  text_size = 4,
  basis_label = abbreviate(gsub("[^[:alnum:]=]", "", rownames(basis), 3L))
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="draw_basis_+3A_basis">basis</code></td>
<td>
<p>A (p*d) basis to draw. Draws the first two components.
If facet is used cbind the facet variable to a specific facet level
(2nd example), otherwise the basis prints on all facet levels.</p>
</td></tr>
<tr><td><code id="draw_basis_+3A_map_to">map_to</code></td>
<td>
<p>A data.frame to scale the basis to.
Defaults to a unitbox; data.frame(x = c(0,1), y = c(0,1)).</p>
</td></tr>
<tr><td><code id="draw_basis_+3A_position">position</code></td>
<td>
<p>The position, to place the basis axes relative to the centered
data. <code style="white-space: pre;">&#8288;_basis&#8288;</code> Expects one of c(&quot;left&quot;, &quot;center&quot;, &quot;right&quot;, &quot;bottomleft&quot;,
&quot;topright&quot;, &quot;off&quot;), defaults to &quot;left&quot;.</p>
</td></tr>
<tr><td><code id="draw_basis_+3A_manip_col">manip_col</code></td>
<td>
<p>The color to highlight the manipulation variable with. Not
applied if the tour isn't a manual tour. Defaults to &quot;blue&quot;.</p>
</td></tr>
<tr><td><code id="draw_basis_+3A_line_size">line_size</code></td>
<td>
<p>(2D bases only) the thickness of the lines used to make the
axes and unit circle. Defaults to 0.6.</p>
</td></tr>
<tr><td><code id="draw_basis_+3A_text_size">text_size</code></td>
<td>
<p>Size of the text label of the variables. Defaults to 4.</p>
</td></tr>
<tr><td><code id="draw_basis_+3A_basis_label">basis_label</code></td>
<td>
<p>The text labels of the data variables.
Defaults to the 3 character abbreviation of the rownames of the basis.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
library(ggplot2)
dat  &lt;- scale_sd(penguins_na.rm[, 1:4])
clas &lt;- penguins_na.rm$species
bas  &lt;- basis_pca(dat)
proj &lt;- as.data.frame(dat %*% bas)

ggplot() +
  geom_point(aes(PC1, PC2), proj) +
  draw_basis(bas, proj, "left") +
  coord_fixed()
  
## Aesthetics and basis on specific facet levels
proj &lt;- cbind(proj, clas = penguins_na.rm$species)
bas &lt;- cbind(as.data.frame(bas), clas = levels(clas)[2])
ggplot() +
  facet_wrap(vars(clas)) +
  geom_point(aes(PC1, PC2, color = clas, shape = clas), proj) +
  draw_basis(bas, proj, "left") +
  theme_spinifex()
## To repeat basis in all facet levels don't cbind a facet variable.
</code></pre>

<hr>
<h2 id='facet_wrap_tour'>Wrap a 1d ribbon of panels into 2d for animation</h2><span id='topic+facet_wrap_tour'></span>

<h3>Description</h3>

<p>Create and wrap a 1d ribbon of panels in 2d.
Because of the side effects of <code>ggtour</code> and <code>facet_wrap_tour</code> this wants to be
applied after <code>ggtour</code> and before any <code style="white-space: pre;">&#8288;proto_*&#8288;</code> functions.
<code>plotly</code> may not display well with with faceting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>facet_wrap_tour(facet_var, nrow = NULL, ncol = NULL, dir = "h")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="facet_wrap_tour_+3A_facet_var">facet_var</code></td>
<td>
<p>Expects a single variable to facet the levels of.
Should be a vector, not a formula (<code>~cyl</code>) or <code>ggplot2::vars()</code> call.</p>
</td></tr>
<tr><td><code id="facet_wrap_tour_+3A_nrow">nrow</code></td>
<td>
<p>Number of rows. Defaults to NULL; set by display dim.</p>
</td></tr>
<tr><td><code id="facet_wrap_tour_+3A_ncol">ncol</code></td>
<td>
<p>Number of columns. Defaults to NULL; set by display dim.</p>
</td></tr>
<tr><td><code id="facet_wrap_tour_+3A_dir">dir</code></td>
<td>
<p>Direction of wrapping: either &quot;h&quot; horizontal by rows,
or &quot;v&quot;, for vertical by columns. Defaults to &quot;h&quot;.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other ggtour proto functions: 
<code><a href="#topic+append_fixed_y">append_fixed_y</a>()</code>,
<code><a href="#topic+ggtour">ggtour</a>()</code>,
<code><a href="#topic+proto_basis">proto_basis</a>()</code>,
<code><a href="#topic+proto_default">proto_default</a>()</code>,
<code><a href="#topic+proto_density">proto_density</a>()</code>,
<code><a href="#topic+proto_density2d">proto_density2d</a>()</code>,
<code><a href="#topic+proto_hex">proto_hex</a>()</code>,
<code><a href="#topic+proto_highlight">proto_highlight</a>()</code>,
<code><a href="#topic+proto_hline0">proto_hline0</a>()</code>,
<code><a href="#topic+proto_origin">proto_origin</a>()</code>,
<code><a href="#topic+proto_point">proto_point</a>()</code>,
<code><a href="#topic+proto_text">proto_text</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat     &lt;- scale_sd(penguins_na.rm[, 1:4])
clas    &lt;- penguins_na.rm$species
bas     &lt;- basis_pca(dat)
mv      &lt;- manip_var_of(bas)
mt_path &lt;- manual_tour(bas, manip_var = mv)

## d = 2 case
message("facet_wrap_tour wants be called early, so that other proto's adopt the facet_var.")
ggt &lt;- ggtour(mt_path, dat, angle = .3) +
  facet_wrap_tour(facet_var = clas, ncol = 2, nrow = 2) +
  proto_default(aes_args = list(color = clas, shape = clas),
                identity_args = list(size = 1.5))
## Not run: 
animate_gganimate(ggt) ## May not always play well with plotly

## End(Not run)
</code></pre>

<hr>
<h2 id='filmstrip'>Create a &quot;filmstrip&quot; of the frames of a ggtour.</h2><span id='topic+filmstrip'></span>

<h3>Description</h3>

<p>Appends <code>facet_wrap(vars(frame_number))</code> &amp; minor themes to the ggtour. If the
number of frames is more than desired, try increasing the <code>angle</code> argument on
the tour. Is very demanding on the plots pane, works better with ggsave().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filmstrip(ggtour, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filmstrip_+3A_ggtour">ggtour</code></td>
<td>
<p>A grammar of graphics tour with appended protos added.
A return from <code style="white-space: pre;">&#8288;ggtour() + proto_*()&#8288;</code></p>
</td></tr>
<tr><td><code id="filmstrip_+3A_...">...</code></td>
<td>
<p>optionally pass arguments to ggplot2::facet_wrap, such as
nrow = 3, ncol = 2, scales = &quot;free&quot;.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other ggtour animator: 
<code><a href="#topic+animate_gganimate">animate_gganimate</a>()</code>,
<code><a href="#topic+animate_plotly">animate_plotly</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat  &lt;- scale_sd(penguins_na.rm[, 1:4])
clas &lt;- penguins_na.rm$species
bas  &lt;- basis_pca(dat)
mv   &lt;- manip_var_of(bas)

## d = 2 case
mt_path &lt;- manual_tour(bas, manip_var = mv)
ggt &lt;- ggtour(mt_path, dat, angle = .3) +
  proto_point(list(color = clas, shape = clas),
              list(size = 1.5)) +
  proto_basis()
filmstrip(ggt)

## d = 1 case &amp; specify facet dim
bas1d     &lt;- basis_pca(dat, d = 1)
mt_path1d &lt;- manual_tour(basis = bas1d, manip_var = mv)
ggt1d &lt;- ggtour(mt_path1d, dat, angle = 99) +
  proto_default1d(aes_args = list(fill = clas, color = clas))
filmstrip(ggt1d, nrow = 12, ncol = 3)
</code></pre>

<hr>
<h2 id='ggtour'>Prepare a new grammar of graphics tour</h2><span id='topic+ggtour'></span>

<h3>Description</h3>

<p><code>ggtour()</code> initializes a ggplot object for a tour. <code style="white-space: pre;">&#8288;proto_*&#8288;</code> functions are
added to the tour, analogous to <code style="white-space: pre;">&#8288;ggplot() + geom_*&#8288;</code>. The final tour object is
then animated with <code>animate_plotly()</code> or <code>animate_ggtour()</code>, or passed to
<code>filmstrip()</code> for static plot faceting on frames.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggtour(
  basis_array,
  data = NULL,
  angle = 0.05,
  basis_label = NULL,
  data_label = NULL,
  do_center_frame = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ggtour_+3A_basis_array">basis_array</code></td>
<td>
<p>An array of projection bases for the tour, as produced
with <code>manual_tour()</code> or <code>tour::save_history()</code>, or a single basis.</p>
</td></tr>
<tr><td><code id="ggtour_+3A_data">data</code></td>
<td>
<p>Numeric data to project. If left NULL, will check if it data is
stored as an attribute of the the <code>basis_array</code>.</p>
</td></tr>
<tr><td><code id="ggtour_+3A_angle">angle</code></td>
<td>
<p>Target angle (radians) for interpolation frames between
frames of the <code>basis_array</code>. Defaults to .05.
To opt out of interpolation set to NA or 0.</p>
</td></tr>
<tr><td><code id="ggtour_+3A_basis_label">basis_label</code></td>
<td>
<p>Labels for basis display, a character
vector with length equal to the number of variables.
Defaults to NULL; 3 character abbreviation from colnames of data or
rownames of basis.</p>
</td></tr>
<tr><td><code id="ggtour_+3A_data_label">data_label</code></td>
<td>
<p>Labels for <code>plotly</code> tooltip display.
Defaults to the NULL, rownames and/or numbers of data.</p>
</td></tr>
<tr><td><code id="ggtour_+3A_do_center_frame">do_center_frame</code></td>
<td>
<p>Whether or not to center the mean within each
animation frame. Defaults to TRUE.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other ggtour proto functions: 
<code><a href="#topic+append_fixed_y">append_fixed_y</a>()</code>,
<code><a href="#topic+facet_wrap_tour">facet_wrap_tour</a>()</code>,
<code><a href="#topic+proto_basis">proto_basis</a>()</code>,
<code><a href="#topic+proto_default">proto_default</a>()</code>,
<code><a href="#topic+proto_density">proto_density</a>()</code>,
<code><a href="#topic+proto_density2d">proto_density2d</a>()</code>,
<code><a href="#topic+proto_hex">proto_hex</a>()</code>,
<code><a href="#topic+proto_highlight">proto_highlight</a>()</code>,
<code><a href="#topic+proto_hline0">proto_hline0</a>()</code>,
<code><a href="#topic+proto_origin">proto_origin</a>()</code>,
<code><a href="#topic+proto_point">proto_point</a>()</code>,
<code><a href="#topic+proto_text">proto_text</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat     &lt;- scale_sd(penguins_na.rm[, 1:4])
clas    &lt;- penguins_na.rm$species
bas     &lt;- basis_pca(dat)
mv      &lt;- manip_var_of(bas)
mt_path &lt;- manual_tour(bas, manip_var = mv)

## d = 2 case
ggt &lt;- ggtour(basis_array = mt_path, data = dat, angle = .3) +
  proto_default(aes_args = list(color = clas, shape = clas),
                identity_args = list(size = 1.5, alpha = .8))

animate_plotly(ggt)


## Finer control calling individual proto_* functions
ggt &lt;- ggtour(basis_array = mt_path, data = dat, angle = .3) +
  proto_point(aes_args = list(color = clas, shape = clas),
              identity_args = list(size = 1.5, alpha = .8),
              row_index = which(clas == levels(clas)[1])) +
  proto_basis(position = "right",
              manip_col = "red",
              text_size = 7L) +
  proto_origin()

animate_plotly(ggt)


## d = 1 case
bas1d &lt;- basis_pca(dat, d = 1)
mt_path1d &lt;- manual_tour(basis = bas1d, manip_var = mv)

ggt1d &lt;- ggtour(basis_array = mt_path1d, data = dat, angle = .3) +
  proto_default1d(aes_args = list(fill= clas, color = clas))

animate_plotly(ggt1d)


## Single basis
ggt &lt;- ggtour(basis_array = bas, data = dat) +
  proto_default(aes_args = list(fill= clas, color = clas))
## ggtour() returns a static ggplot2 plot

ggt
### or as html widget with tooltips
animate_plotly(ggt)

</code></pre>

<hr>
<h2 id='interpolate_manual_tour'>Interpolates a manual tour</h2><span id='topic+interpolate_manual_tour'></span>

<h3>Description</h3>

<p>Internal function. Interpolates a manual tour over the stored theta, and phi
specifications. Returns an interpolated basis_array to be consumed by
<code>array2df</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>interpolate_manual_tour(basis_array, angle = 0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="interpolate_manual_tour_+3A_basis_array">basis_array</code></td>
<td>
<p>array, of the target bases, the extrema of the walk/segments.</p>
</td></tr>
<tr><td><code id="interpolate_manual_tour_+3A_angle">angle</code></td>
<td>
<p>The step size between interpolated frames, in radians.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other manual tour adjacent functions: 
<code><a href="#topic+create_manip_space">create_manip_space</a>()</code>,
<code><a href="#topic+manip_var_of">manip_var_of</a>()</code>,
<code><a href="#topic+manual_tour">manual_tour</a>()</code>,
<code><a href="#topic+rotate_manip_space">rotate_manip_space</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## This function is not meant for external use
dat  &lt;- scale_sd(wine[, 2:6])
clas &lt;- wine$Type
bas  &lt;- basis_pca(dat)
mv   &lt;- manip_var_of(bas)
mt   &lt;- manual_tour(bas, mv)

interp &lt;- spinifex:::interpolate_manual_tour(basis_array = mt, angle = .1)
dim(interp)
str(interp)
</code></pre>

<hr>
<h2 id='is_any_layer_class'>Check ggplot layers for use of a specific geom</h2><span id='topic+is_any_layer_class'></span>

<h3>Description</h3>

<p>Checks if any of the layers of a ggplot contain a specific class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_any_layer_class(ggplot, class_nm = "GeomDensity")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_any_layer_class_+3A_ggplot">ggplot</code></td>
<td>
<p>Check the layers of this ggplot object</p>
</td></tr>
<tr><td><code id="is_any_layer_class_+3A_class_nm">class_nm</code></td>
<td>
<p>The class name to check, note this differs slightly from
the name of the geom function. Defaults to &quot;GeomDensity&quot;, checking to see if
geom_density was used in any of the layers.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="ggplot2.html#topic+theme">ggplot2::theme</a></code> for all theme options.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
library(spinifex)

g &lt;- ggplot(mtcars, aes(disp, color = factor(cyl))) + 
  geom_density() + geom_histogram()
is_any_layer_class(g, "GeomDensity")
is_any_layer_class(g, "GeomPoint")
</code></pre>

<hr>
<h2 id='is_orthonormal'>Orthonormality of a matrix</h2><span id='topic+is_orthonormal'></span>

<h3>Description</h3>

<p>Test if a numeric matrix is orthonormal, that is, each column is orthogonal,
at a right angle with the others, and each column has a norm
length of 1. This must be true for a projection to be linear.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_orthonormal(x, tol = 0.001)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_orthonormal_+3A_x">x</code></td>
<td>
<p>Numeric matrix to test the orthonormality of.</p>
</td></tr>
<tr><td><code id="is_orthonormal_+3A_tol">tol</code></td>
<td>
<p>Max tolerance of floating point differences of the
element-wise distance of t(x) %*% x from the identity matrix.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Single logical, whether or not the matrix is orthonormal.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>spinifex::is_orthonormal(tourr::basis_random(n = 6))
spinifex::is_orthonormal(matrix(1:12, ncol = 2), tol = 0.01)
</code></pre>

<hr>
<h2 id='last_ggtour_env'>Retrieve/set last <code>ggtour()</code> information</h2><span id='topic+last_ggtour_env'></span><span id='topic+.set_last_ggtour_env'></span>

<h3>Description</h3>

<p>Internal information, not related to the ggplot2 object, but used in ggtour
composition by the <code style="white-space: pre;">&#8288;proto_*&#8288;</code> functions to share/set changes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>last_ggtour_env()

.set_last_ggtour_env(ggtour_list)
</code></pre>


<h3>See Also</h3>

<p><code><a href="#topic+ggtour">ggtour()</a></code>
</p>

<hr>
<h2 id='manip_var_of'>Suggest a manipulation variable.</h2><span id='topic+manip_var_of'></span>

<h3>Description</h3>

<p>Find the column number of the variable with the <code>rank</code>-ith largest
contribution of the <code>basis</code>.
Useful for identifying a variable to change the contribution of in a manual
tour, it's <code>manip_var</code> argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>manip_var_of(basis, rank = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="manip_var_of_+3A_basis">basis</code></td>
<td>
<p>Numeric matrix (p x d), orthogonal liner combinations of the
variables.</p>
</td></tr>
<tr><td><code id="manip_var_of_+3A_rank">rank</code></td>
<td>
<p>The number, specifying the variable with the <code>rank</code>-th largest
contribution. Defaults to 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric scalar, the column number of a variable.
</p>


<h3>See Also</h3>

<p>Other manual tour adjacent functions: 
<code><a href="#topic+create_manip_space">create_manip_space</a>()</code>,
<code><a href="#topic+interpolate_manual_tour">interpolate_manual_tour</a>()</code>,
<code><a href="#topic+manual_tour">manual_tour</a>()</code>,
<code><a href="#topic+rotate_manip_space">rotate_manip_space</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- scale_sd(wine[, 2:6])
bas &lt;- basis_pca(dat)

manip_var_of(basis = bas) ## Variable with the largest contribution
manip_var_of(basis = bas, rank = 5) ## Variable with 5th-largest contribution
</code></pre>

<hr>
<h2 id='manual_tour'>Produce the series of projection bases to rotate a variable into and out
of a projection.</h2><span id='topic+manual_tour'></span>

<h3>Description</h3>

<p>Typically called by <code>array2af()</code>. An array of projections,
the radial tour of the <code>manip_var</code>, which is rotated from phi's starting
position to <code>phi_max</code>, to <code>phi_min</code>, and back to the start position.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>manual_tour(
  basis,
  manip_var,
  theta = NULL,
  phi_min = 0,
  phi_max = pi/2,
  data = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="manual_tour_+3A_basis">basis</code></td>
<td>
<p>A (p, d) orthonormal numeric matrix.
The linear combination the original variables contribute to projection space.
Defaults to NULL, generating a random basis.</p>
</td></tr>
<tr><td><code id="manual_tour_+3A_manip_var">manip_var</code></td>
<td>
<p>Integer column number or string exact column name of the.
variable to manipulate. Required, no default.</p>
</td></tr>
<tr><td><code id="manual_tour_+3A_theta">theta</code></td>
<td>
<p>Angle in radians of &quot;in-plane&quot; rotation, on the xy plane of the
reference frame. Defaults to theta of the basis for a radial tour.</p>
</td></tr>
<tr><td><code id="manual_tour_+3A_phi_min">phi_min</code></td>
<td>
<p>Minimum value phi should move to. Phi is angle in radians of
the &quot;out-of-plane&quot; rotation, the z-axis of the reference frame.
Required, defaults to 0.</p>
</td></tr>
<tr><td><code id="manual_tour_+3A_phi_max">phi_max</code></td>
<td>
<p>Maximum value phi should move to. Phi is angle in radians of
the &quot;out-of-plane&quot; rotation, the z-axis of the reference frame.
Required, defaults to pi/2.</p>
</td></tr>
<tr><td><code id="manual_tour_+3A_data">data</code></td>
<td>
<p>Optionally attach data to the basis path.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A (p, d, 4) history_array of the radial tour. The bases set for
phi_start, <code>phi_min</code>, <code>phi_max</code>, and back to phi_start.
</p>


<h3>See Also</h3>

<p>Other manual tour adjacent functions: 
<code><a href="#topic+create_manip_space">create_manip_space</a>()</code>,
<code><a href="#topic+interpolate_manual_tour">interpolate_manual_tour</a>()</code>,
<code><a href="#topic+manip_var_of">manip_var_of</a>()</code>,
<code><a href="#topic+rotate_manip_space">rotate_manip_space</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat  &lt;- scale_sd(wine[, 2:6])
clas &lt;- wine$Type
bas  &lt;- basis_pca(dat)
mv   &lt;- manip_var_of(bas)
manual_tour(basis = bas, manip_var = mv)

## All arguments
manual_tour(basis = bas, manip_var = mv,
            theta = pi / 2, phi_min = pi / 16, phi_max = pi)

## Animating with ggtour() &amp; proto_* (d = 2 case)
mt &lt;- manual_tour(basis = bas, manip_var = mv)
ggt &lt;- ggtour(mt, dat, angle = .2) +
  proto_origin() +
  proto_point(list(color = clas, shape = clas)) +
  proto_basis()

animate_plotly(ggt)


## d = 1 case
## basis could be 1- or 2D; protos_* only use 1st column
mv  &lt;- manip_var_of(bas)
mt  &lt;- manual_tour(basis = bas, manip_var = mv)
ggt &lt;- ggtour(mt, dat, angle = .3) +
  proto_density(aes_args = list(color = clas, fill = clas)) +
  proto_basis1d() +
  proto_origin1d()

animate_plotly(ggt)


## Bring your own basis
bas &lt;- matrix(rnorm(2 * ncol(dat)), ncol = 2)
bas &lt;- orthonormalise(bas) ## manual_tour warns if basis isn't orthonormal
mt  &lt;- manual_tour(basis = bas, manip_var = 1)
ggt &lt;- ggtour(mt, dat, angle = .2) +
  proto_default(aes_args = list(color = clas, shape = clas))

animate_plotly(ggt)

</code></pre>

<hr>
<h2 id='map_absolute'>Manually offset and scale the first 2 columns of a matrix or data.frame.</h2><span id='topic+map_absolute'></span>

<h3>Description</h3>

<p>A manual variant of <code>map_relative()</code>. Can be used as the <code>axes</code> argument
to manually set the size and locations of the axes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>map_absolute(x, offset = c(0, 0), scale = c(1, 1))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="map_absolute_+3A_x">x</code></td>
<td>
<p>Numeric data object with 2 columns to scale and offset.
Defaults to NULL, passing arguments to scale_axes for use internally.</p>
</td></tr>
<tr><td><code id="map_absolute_+3A_offset">offset</code></td>
<td>
<p>2 Numeric values to offset/pan the first 2 dimensions of <code>x</code>.</p>
</td></tr>
<tr><td><code id="map_absolute_+3A_scale">scale</code></td>
<td>
<p>2 Numeric values to scale/zoom to the first 2 dimensions of <code>x</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Scaled and offset <code>x</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+scale_axes">scale_axes</a></code> for preset choices.
</p>
<p>Other linear mapping functions: 
<code><a href="#topic+map_relative">map_relative</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>bas &lt;- tourr::basis_random(4, 2)

map_absolute(bas, offset = c(-2, 0), scale = c(2/3, 2/3))
</code></pre>

<hr>
<h2 id='map_relative'>Returns the axis scale and position.</h2><span id='topic+map_relative'></span>

<h3>Description</h3>

<p>Internal function. Typically called by other functions to scale the position
of the axes data.frame or another data.frame to plot relative to the data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>map_relative(
  x,
  position = c("center", "left", "right", "bottomleft", "topright", "off", "top1d",
    "floor1d", "bottom1d", "full", "facetleft", "facetright", "facettop", "facetbottom"),
  to = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="map_relative_+3A_x">x</code></td>
<td>
<p>Numeric matrix or data.frame, first 2 columns and scaled and offset
the <code>to</code> object.</p>
</td></tr>
<tr><td><code id="map_relative_+3A_position">position</code></td>
<td>
<p>Text specifying the position the axes should go to.
Defaults to &quot;center&quot; expects one of: c(&quot;center&quot;, &quot;left&quot;, &quot;right&quot;,
&quot;bottomleft&quot;, &quot;topright&quot;, &quot;off&quot;, &quot;full&quot;, &quot;top1d&quot;, &quot;floor1d&quot;, &quot;bottom1d&quot;,
&quot;full&quot;, &quot;facetleft&quot;, &quot;facetright&quot;, &quot;facettop&quot;, &quot;facetbottom&quot;).</p>
</td></tr>
<tr><td><code id="map_relative_+3A_to">to</code></td>
<td>
<p>Data.frame to scale to.
Based on the min/max of the first 2 columns. If left NULL defaults to
data.frame(x = c(0, 1), y = c(0, 1).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Transformed values of <code>x</code>, dimension and class unchanged.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+map_absolute">map_absolute</a></code> for more manual control.
</p>
<p>Other linear mapping functions: 
<code><a href="#topic+map_absolute">map_absolute</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## !!This function is not meant for external use!!
rb &lt;- tourr::basis_random(4, 2)

map_relative(x = rb, position = "bottomleft")
map_relative(x = rb, position = "right", to = wine[, 2:3])
</code></pre>

<hr>
<h2 id='penguins_na.rm'>Size measurements for adult foraging penguins near Palmer Station, Antarctica</h2><span id='topic+penguins_na.rm'></span>

<h3>Description</h3>

<p>Includes measurements for penguin species, island in Palmer Archipelago,
size (flipper length, body mass, bill dimensions), and sex.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>penguins_na.rm
</code></pre>


<h3>Format</h3>

<p>A data frame with 333 rows and 4 numeric variables and 3 factor variables
</p>

<dl>
<dt>bill_length_mm</dt><dd><p>a number denoting bill length (millimeters)</p>
</dd>
<dt>bill_depth_mm</dt><dd><p>a number denoting bill depth (millimeters)</p>
</dd>
<dt>flipper_length_mm</dt><dd><p>an integer denoting flipper length (millimeters)</p>
</dd>
<dt>body_mass_g</dt><dd><p>an integer denoting body mass (grams)</p>
</dd>
<dt>species</dt><dd><p>a factor denoting penguin species (Adelie, Chinstrap and Gentoo)</p>
</dd>
<dt>sex</dt><dd><p>a factor denoting penguin sex (female, male)</p>
</dd>
<dt>island</dt><dd><p>a factor denoting island in Palmer Archipelago, Antarctica (Biscoe, Dream or Torgersen)</p>
</dd>
</dl>



<h3>Details</h3>

<p>This is a cleaned subset of <code>palmerpenguins::penguins</code>.
</p>
<p>Replicating this dataset:
</p>
<div class="sourceCode"><pre>require(palmerpenguins)
d &lt;- palmerpenguins::penguins
d &lt;- d[complete.cases(d), ] ## Remove missing, 2 obs of numeric and several in sex
d &lt;- d[, c(3:6, 1, 7, 2)]   ## Numeric to front, group factors, remove year
penguins_na.rm &lt;- as.data.frame(d) ## Remove {tibble} dependency
## save(penguins_na.rm, file = "./data/penguins_na.rm.rda")
</pre></div>


<h3>Source</h3>

<p>palmerpenguins R package. A. Horst, 2020. Palmer Archipelago (Antarctica) Penguin Data. <a href="https://CRAN.R-project.org/package=palmerpenguins">https://CRAN.R-project.org/package=palmerpenguins</a>
</p>
<p>Adelie penguins: Palmer Station Antarctica LTER and K. Gorman. 2020. Structural size measurements and isotopic signatures of foraging among adult male and female Adelie penguins (Pygoscelis adeliae) nesting along the Palmer Archipelago near Palmer Station, 2007-2009 ver 5. Environmental Data Initiative <a href="https://doi.org/10.6073/pasta/98b16d7d563f265cb52372c8ca99e60f">doi:10.6073/pasta/98b16d7d563f265cb52372c8ca99e60f</a>
</p>
<p>Gentoo penguins: Palmer Station Antarctica LTER and K. Gorman. 2020. Structural size measurements and isotopic signatures of foraging among adult male and female Gentoo penguin (Pygoscelis papua) nesting along the Palmer Archipelago near Palmer Station, 2007-2009 ver 5. Environmental Data Initiative <a href="https://doi.org/10.6073/pasta/7fca67fb28d56ee2ffa3d9370ebda689">doi:10.6073/pasta/7fca67fb28d56ee2ffa3d9370ebda689</a>
</p>
<p>Chinstrap penguins: Palmer Station Antarctica LTER and K. Gorman. 2020. Structural size measurements and isotopic signatures of foraging among adult male and female Chinstrap penguin (Pygoscelis antarcticus) nesting along the Palmer Archipelago near Palmer Station, 2007-2009 ver 6. Environmental Data Initiative <a href="https://doi.org/10.6073/pasta/c14dfcfada8ea13a17536e73eb6fbe9e">doi:10.6073/pasta/c14dfcfada8ea13a17536e73eb6fbe9e</a>
</p>
<p>Originally published in: Gorman KB, Williams TD, Fraser WR (2014) Ecological Sexual Dimorphism and Environmental Variability within a Community of Antarctic Penguins (Genus Pygoscelis). PLoS ONE 9(3): e90081. doi:10.1371/journal.pone.0090081
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
str(penguins_na.rm)
dat   &lt;- scale_sd(penguins_na.rm[, 1:4])
clas1 &lt;- penguins_na.rm$species
clas2 &lt;- penguins_na.rm$sex

bas &lt;- basis_pca(dat)
mv  &lt;- manip_var_of(bas)
mt  &lt;- manual_tour(bas, mv)

ggt &lt;- ggtour(mt, dat, angle = .2) +
  proto_default(aes_args = list(color = clas1, shape = clas2))

animate_plotly(ggt)

</code></pre>

<hr>
<h2 id='PimaIndiansDiabetes_long'>Pima Indians Diabetes Dataset, long</h2><span id='topic+PimaIndiansDiabetes_long'></span>

<h3>Description</h3>

<p>The data set PimaIndiansDiabetes2 contains a corrected version of the
original data set. While the UCI repository index claims that there are no
missing values, closer inspection of the data shows several physical
impossibilities, e.g., blood pressure or body mass index of 0. In
PimaIndiansDiabetes2, all zero values of glucose, pressure, triceps, insulin
and mass have been set to NA, see also Wahba et al (1995) and Ripley (1996).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PimaIndiansDiabetes_long
</code></pre>


<h3>Format</h3>

<p>A data frame with 724 observations of
6 numeric variables, and target factor <code>diabetes</code>.
</p>

<ul>
<li><p> pregnant, Number of times pregnant
</p>
</li>
<li><p> glucose, Plasma glucose concentration (glucose tolerance test)
</p>
</li>
<li><p> pressure, Diastolic blood pressure (mm Hg)
</p>
</li>
<li><p> mass, Body mass index (weight in kg/(height in m, squared))
</p>
</li>
<li><p> pedigree, Diabetes pedigree function
</p>
</li>
<li><p> age, Age (years)
</p>
</li>
<li><p> diabetes, Class variable (test for diabetes), either &quot;pos&quot; or &quot;neg&quot;
</p>
</li></ul>



<h3>Details</h3>

<p>This is a cleaned subset of <code style="white-space: pre;">&#8288;mlbench's&#8288;</code> <code>PimaIndiansDiabetes2</code>.
See <code>help(PimaIndiansDiabetes2, package = "mlbench")</code>.
</p>
<p>Replicating this dataset:
</p>
<div class="sourceCode"><pre>require("mlbench")
data(PimaIndiansDiabetes2)

d &lt;- PimaIndiansDiabetes2
d &lt;- d[, c(1:3, 6:9)] ## Remove 2 colulmns with the most NAs
d &lt;- d[complete.cases(d), ] ## Remove ~44 row-wise incomplete rows
PimaIndiansDiabetes_long &lt;- d
## save(PimaIndiansDiabetes_long, file = "./data/PimaIndiansDiabetes_long.rda")
</pre></div>


<h3>Source</h3>

<p>J.W. Smith., el al. 1988. Using the ADAP learning algorithm to forecast the onset of diabetes mellitus. In Proceedings of the Symposium on Computer Applications and Medical Care (pp. 261&ndash;265). IEEE Computer Society Press.
</p>
<p>mlbench, R package. F. Leisch &amp; E. Dimitriadou, 2021. mlbench: Machine Learning Benchmark Problems <a href="https://CRAN.R-project.org/package=mlbench">https://CRAN.R-project.org/package=mlbench</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
str(PimaIndiansDiabetes_long)
dat  &lt;- scale_sd(PimaIndiansDiabetes_long[, 1:6])
clas &lt;- PimaIndiansDiabetes_long$diabetes

bas &lt;- basis_pca(dat)
mv  &lt;- manip_var_of(bas)
mt  &lt;- manual_tour(bas, mv)

ggt &lt;- ggtour(mt, dat, angle = .2) +
  proto_default(aes_args = list(color = clas, shape = clas))

animate_plotly(ggt)

</code></pre>

<hr>
<h2 id='PimaIndiansDiabetes_wide'>Pima Indians Diabetes Dataset, wide</h2><span id='topic+PimaIndiansDiabetes_wide'></span>

<h3>Description</h3>

<p>The data set PimaIndiansDiabetes2 contains a corrected version of the
original data set. While the UCI repository index claims that there are no
missing values, closer inspection of the data shows several physical
impossibilities, e.g., blood pressure or body mass index of 0. In
PimaIndiansDiabetes2, all zero values of glucose, pressure, triceps, insulin
and mass have been set to NA, see also Wahba et al (1995) and Ripley (1996).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PimaIndiansDiabetes_wide
</code></pre>


<h3>Format</h3>

<p>A data frame with 392 observations of
8 numeric variables, and target factor <code>diabetes</code>.
</p>

<ul>
<li><p> pregnant, Number of times pregnant
</p>
</li>
<li><p> glucose, Plasma glucose concentration (glucose tolerance test)
</p>
</li>
<li><p> pressure, Diastolic blood pressure (mm Hg)
</p>
</li>
<li><p> triceps, Triceps skin fold thickness (mm)
</p>
</li>
<li><p> insulin, 2-Hour serum insulin (mu U/ml)
</p>
</li>
<li><p> mass, Body mass index (weight in kg/(height in m, squared))
</p>
</li>
<li><p> pedigree, Diabetes pedigree function
</p>
</li>
<li><p> age, Age (years)
</p>
</li>
<li><p> diabetes, Class variable (test for diabetes), either &quot;pos&quot; or &quot;neg&quot;
</p>
</li></ul>



<h3>Details</h3>

<p>This is a cleaned subset of <code>mlbench</code>'s <code>PimaIndiansDiabetes2</code>.
See <code>help(PimaIndiansDiabetes2, package = "mlbench")</code>.
</p>
<p>Replicating this dataset:
</p>
<div class="sourceCode"><pre>require("mlbench")
data(PimaIndiansDiabetes2)

d &lt;- PimaIndiansDiabetes2
d &lt;- d[complete.cases(d), ] ## Remove ~350 row-wise incomplete rows
PimaIndiansDiabetes_wide &lt;- d
## save(PimaIndiansDiabetes_wide, file = "./data/PimaIndiansDiabetes_wide.rda")
</pre></div>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
str(PimaIndiansDiabetes_wide)
dat  &lt;- scale_sd(PimaIndiansDiabetes_wide[, 1:8])
clas &lt;- PimaIndiansDiabetes_wide$diabetes

bas &lt;- basis_pca(dat)
mv  &lt;- manip_var_of(bas)
mt  &lt;- manual_tour(bas, mv)

ggt &lt;- ggtour(mt, dat, angle = .2) +
  proto_default(aes_args = list(color = clas, shape = clas))

animate_plotly(ggt)

</code></pre>

<hr>
<h2 id='play_manual_tour'>Animate a manual tour. superseded</h2><span id='topic+play_manual_tour'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>, see <code><a href="#topic+ggtour">ggtour</a></code>.
Performs the a manual tour and returns an animation of <code>render_type</code>.
For use with <code>tourr::save_history()</code> tour paths see <code>play_tour_path()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>play_manual_tour(
  basis = NULL,
  data,
  manip_var,
  theta = NULL,
  phi_min = 0,
  phi_max = 0.5 * pi,
  angle = 0.05,
  render_type = render_plotly,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="play_manual_tour_+3A_basis">basis</code></td>
<td>
<p>A (p, d) orthonormal numeric matrix.
The linear combination the original variables contribute to projection space.
Defaults to NULL, generating a random basis.</p>
</td></tr>
<tr><td><code id="play_manual_tour_+3A_data">data</code></td>
<td>
<p>(n, p) dataset to project, consisting of numeric variables.</p>
</td></tr>
<tr><td><code id="play_manual_tour_+3A_manip_var">manip_var</code></td>
<td>
<p>Integer column number or string exact column name of the.
variable to manipulate. Required, no default.</p>
</td></tr>
<tr><td><code id="play_manual_tour_+3A_theta">theta</code></td>
<td>
<p>Angle in radians of &quot;in-plane&quot; rotation, on the xy plane of the
reference frame. Defaults to theta of the basis for a radial tour.</p>
</td></tr>
<tr><td><code id="play_manual_tour_+3A_phi_min">phi_min</code></td>
<td>
<p>Minimum value phi should move to. Phi is angle in radians of
the &quot;out-of-plane&quot; rotation, the z-axis of the reference frame.
Required, defaults to 0.</p>
</td></tr>
<tr><td><code id="play_manual_tour_+3A_phi_max">phi_max</code></td>
<td>
<p>Maximum value phi should move to. Phi is angle in radians of
the &quot;out-of-plane&quot; rotation, the z-axis of the reference frame.
Required, defaults to pi/2.</p>
</td></tr>
<tr><td><code id="play_manual_tour_+3A_angle">angle</code></td>
<td>
<p>Target distance (in radians) between steps. Defaults to .05.</p>
</td></tr>
<tr><td><code id="play_manual_tour_+3A_render_type">render_type</code></td>
<td>
<p>Which graphics to render to. Defaults to render_plotly,</p>
</td></tr>
<tr><td><code id="play_manual_tour_+3A_...">...</code></td>
<td>
<p>Optionally pass additional arguments to <code>render_</code> and the
function used in <code>render_type</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An animation of a radial tour.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+render_">render_</a></code> For arguments to pass into <code>...</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
message("It's suggested to switch to the proto api, see `?ggtour` to get started.")

## Setup
dat_std &lt;- scale_sd(wine[, 2:6])
clas    &lt;- wine$Type
bas     &lt;- basis_pca(dat_std)
mv      &lt;- manip_var_of(bas)

## Not run: 
suppressWarnings(
  play_manual_tour(basis = bas, data = dat_std, manip_var = mv)
)

suppressWarnings(
  play_manual_tour(
    basis = bas, data = dat_std, manip_var = mv,
    theta = .5 * pi, axes = "right", fps = 5,
    angle = .08, phi_min = 0, phi_max = 2 * pi,
    aes_args = list(color = clas, shape = clas),
    identity_args = list(size = 1.5, alpha = .7),
    ggproto = list(ggplot2::theme_void(), ggplot2::ggtitle("My title")),
    render_type = render_gganimate)
)
## Saving output may require additional setup
if(FALSE){ ## Don't accidentally save file
  ## Export plotly .html widget
  play_manual_tour(basis = bas, data = dat_std, manip_var = 6,
                   render_type = render_plotly,
                   html_filename = "myRadialTour.html")
  
  ## Export gganimate .gif
  play_manual_tour(basis = bas, data = dat_std, manip_var = 1,
                   render_type = render_gganimate,
                   gif_filename = "myRadialTour.gif", gif_path = "./output")
}

## End(Not run)
</code></pre>

<hr>
<h2 id='play_tour_path'>Animates the provided tour path.</h2><span id='topic+play_tour_path'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>, see <code><a href="#topic+ggtour">ggtour</a></code>.
Takes the result of <code>tourr::save_history()</code> or <code>manual_tour()</code>, interpolates
over the path and renders into a specified <code>render_type</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>play_tour_path(
  tour_path,
  data = NULL,
  angle = 0.05,
  render_type = render_plotly,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="play_tour_path_+3A_tour_path">tour_path</code></td>
<td>
<p>The result of <code>tourr::save_history()</code> or <code>manual_tour()</code>.</p>
</td></tr>
<tr><td><code id="play_tour_path_+3A_data">data</code></td>
<td>
<p>Optional, number of columns must match that of <code>tour_path</code>.</p>
</td></tr>
<tr><td><code id="play_tour_path_+3A_angle">angle</code></td>
<td>
<p>Target distance (in radians) between steps. Defaults to .05.</p>
</td></tr>
<tr><td><code id="play_tour_path_+3A_render_type">render_type</code></td>
<td>
<p>Graphics to render to. Defaults to <code>render_plotly</code>,
alternative use <code>render_gganimate</code>.</p>
</td></tr>
<tr><td><code id="play_tour_path_+3A_...">...</code></td>
<td>
<p>Optionally pass additional arguments to <code>render_</code> and the
function used in <code>render_type</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+render_">render_</a></code> For arguments to pass into <code>...</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
message("It's suggested to switch to the proto api, see `?ggtour` to get started.")

dat_std &lt;- scale_sd(wine[, 2:6])
clas    &lt;- wine$Type
bas     &lt;- basis_pca(dat_std)
gt_path &lt;- save_history(dat_std, tour_path = tourr::grand_tour(), max = 5)

## Not run: 
suppressWarnings(
  play_tour_path(tour_path = gt_path, data = dat_std)
)

suppressWarnings(
  play_tour_path(tour_path = gt_path, data = dat_std,
                 axes = "bottomleft", angle = .08, fps = 8,
                 aes_args = list(color = clas, shape = clas),
                 identity_args = list(size = 1.5, alpha = .7),
                 ggproto = 
                   list(ggplot2::theme_void(), ggplot2::ggtitle("My title")),
                 render_type = render_gganimate)
)

## Saving a .gif(may require additional setup)
if(FALSE){ ## Don't accidentally save file
  ## Export plotly .html widget
  play_tour_path(tour_path = gt_path, data = dat_std,
                 render_type = render_plotly,
                 html_filename = "myRadialTour.html")
               
  ## Export gganimate .gif
  play_tour_path(tour_path = gt_path, data = dat_std,
                 render_type = render_gganimate,
                 gif_path = "myOutput", gif_filename = "myRadialTour.gif")
}

## End(Not run)
</code></pre>

<hr>
<h2 id='proto_basis'>Tour proto for a 2D and 1D basis axes respectively</h2><span id='topic+proto_basis'></span><span id='topic+proto_basis1d'></span>

<h3>Description</h3>

<p>Adds basis axes to the animation, the direction and magnitude of
contributions of the variables to the projection space inscribed in a unit
circle for 2D or rectangle of unit width for 1D.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proto_basis(
  position = c("left", "center", "right", "bottomleft", "topright", "full", "off"),
  manip_col = "blue",
  line_size = 0.6,
  text_size = 4
)

proto_basis1d(
  position = c("bottom1d", "floor1d", "top1d", "full", "off"),
  manip_col = "blue",
  segment_size = 2,
  text_size = 4,
  text_offset = -1.15
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="proto_basis_+3A_position">position</code></td>
<td>
<p>The position, to place the basis axes relative to the
data. <code>proto_basis</code> expects one of c(&quot;left&quot;, &quot;center&quot;, &quot;right&quot;, &quot;bottomleft&quot;, &quot;topright&quot;,
&quot;off&quot;), defaults to &quot;left&quot;. <code>proto_basis1d</code> expects one of
c(&quot;bottom1d&quot;, &quot;floor1d&quot;, &quot;top1d&quot;, &quot;off&quot;). Defaults to &quot;bottom1d&quot;.</p>
</td></tr>
<tr><td><code id="proto_basis_+3A_manip_col">manip_col</code></td>
<td>
<p>The color to highlight the manipulation variable with. Not
applied if the tour isn't a manual tour. Defaults to &quot;blue&quot;.</p>
</td></tr>
<tr><td><code id="proto_basis_+3A_line_size">line_size</code></td>
<td>
<p>(2D bases only) the thickness of the lines used to make the
axes and unit circle. Defaults to .6.</p>
</td></tr>
<tr><td><code id="proto_basis_+3A_text_size">text_size</code></td>
<td>
<p>Size of the text label of the variables. Defaults to 4.</p>
</td></tr>
<tr><td><code id="proto_basis_+3A_segment_size">segment_size</code></td>
<td>
<p>(1D bases only) the width thickness of the rectangle bar
showing variable magnitude on the axes. Defaults to 2.</p>
</td></tr>
<tr><td><code id="proto_basis_+3A_text_offset">text_offset</code></td>
<td>
<p>The horizontal offset of the text labels relative to the
variable contributions in the basis between (-1, 1). Defaults to -1.15.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other ggtour proto functions: 
<code><a href="#topic+append_fixed_y">append_fixed_y</a>()</code>,
<code><a href="#topic+facet_wrap_tour">facet_wrap_tour</a>()</code>,
<code><a href="#topic+ggtour">ggtour</a>()</code>,
<code><a href="#topic+proto_default">proto_default</a>()</code>,
<code><a href="#topic+proto_density">proto_density</a>()</code>,
<code><a href="#topic+proto_density2d">proto_density2d</a>()</code>,
<code><a href="#topic+proto_hex">proto_hex</a>()</code>,
<code><a href="#topic+proto_highlight">proto_highlight</a>()</code>,
<code><a href="#topic+proto_hline0">proto_hline0</a>()</code>,
<code><a href="#topic+proto_origin">proto_origin</a>()</code>,
<code><a href="#topic+proto_point">proto_point</a>()</code>,
<code><a href="#topic+proto_text">proto_text</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat  &lt;- scale_sd(penguins_na.rm[, 1:4])
clas &lt;- penguins_na.rm$species
bas  &lt;- basis_pca(dat)
mv   &lt;- manip_var_of(bas)

## 2D case:
mt_path &lt;- manual_tour(bas, manip_var = mv)
ggt &lt;- ggtour(mt_path, dat, angle = .3) +
  proto_point() +
  proto_basis()

animate_plotly(ggt)


## Customize basis
ggt2 &lt;- ggtour(mt_path, dat) +
  proto_basis(position = "right", manip_col = "green",
              line_size = .8, text_size = 8)

animate_plotly(ggt2)


## 1D case:
bas1d     &lt;- basis_pca(dat, d = 1)
mv        &lt;- manip_var_of(bas1d, 3)
mt_path1d &lt;- manual_tour(bas1d, manip_var = mv)

ggt1d &lt;- ggtour(mt_path1d, dat, angle = .3) +
  proto_density() +
  proto_basis1d()

animate_plotly(ggt1d)


## Customized basis1d
ggt1d &lt;- ggtour(mt_path1d, dat, angle = .3) +
  proto_density() +
  proto_basis1d(position     = "bottom",
                manip_col    = "pink",
                segment_size = 3,
                text_size    = 6,
                text_offset  = 1.2)

animate_plotly(ggt1d)

</code></pre>

<hr>
<h2 id='proto_default'>Wrapper function for default 2D/1D tours respectively.</h2><span id='topic+proto_default'></span><span id='topic+proto_default2d'></span><span id='topic+proto_def'></span><span id='topic+proto_def2d'></span><span id='topic+proto_default1d'></span><span id='topic+proto_def1d'></span>

<h3>Description</h3>

<p>An easier way to get to default 2D tour settings.
Returns a list of proto_origin(), proto_point(...), proto_basis() for 2D.
Returns a list of proto_origin1d(), proto_density(...), proto_basis1d() for 1D.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proto_default(
  position = c("left", "center", "right", "bottomleft", "topright", "off"),
  ...
)

proto_default1d(position = c("bottom1d", "floor1d", "top1d", "off"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="proto_default_+3A_position">position</code></td>
<td>
<p>The position, to place the basis axes relative to the
data. <code>proto_basis</code> expects one of c(&quot;left&quot;, &quot;center&quot;, &quot;right&quot;, &quot;bottomleft&quot;, &quot;topright&quot;,
&quot;off&quot;), defaults to &quot;left&quot;. <code>proto_basis1d</code> expects one of
c(&quot;bottom1d&quot;, &quot;floor1d&quot;, &quot;top1d&quot;, &quot;off&quot;). Defaults to &quot;bottom1d&quot;.</p>
</td></tr>
<tr><td><code id="proto_default_+3A_...">...</code></td>
<td>
<p>Optionally pass additional arguments to <code>proto_point</code> or
<code>proto_density</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other ggtour proto functions: 
<code><a href="#topic+append_fixed_y">append_fixed_y</a>()</code>,
<code><a href="#topic+facet_wrap_tour">facet_wrap_tour</a>()</code>,
<code><a href="#topic+ggtour">ggtour</a>()</code>,
<code><a href="#topic+proto_basis">proto_basis</a>()</code>,
<code><a href="#topic+proto_density">proto_density</a>()</code>,
<code><a href="#topic+proto_density2d">proto_density2d</a>()</code>,
<code><a href="#topic+proto_hex">proto_hex</a>()</code>,
<code><a href="#topic+proto_highlight">proto_highlight</a>()</code>,
<code><a href="#topic+proto_hline0">proto_hline0</a>()</code>,
<code><a href="#topic+proto_origin">proto_origin</a>()</code>,
<code><a href="#topic+proto_point">proto_point</a>()</code>,
<code><a href="#topic+proto_text">proto_text</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat  &lt;- scale_sd(penguins_na.rm[, 1:4])
clas &lt;- penguins_na.rm$species

## 2D case:
bas     &lt;- basis_pca(dat)
mv      &lt;- manip_var_of(bas)
mt_path &lt;- manual_tour(bas, mv)

ggt &lt;- ggtour(mt_path, dat) +
  proto_default(aes_args = list(color = clas, shape = clas))

animate_plotly(ggt)

library(spinifex)

## 1D case:
gt_path &lt;- save_history(dat, grand_tour(d = 1), max_bases = 3)

ggt &lt;- ggtour(gt_path, dat) +
  proto_default1d(aes_args = list(fill = clas, color = clas))

animate_plotly(ggt)

</code></pre>

<hr>
<h2 id='proto_density'>Tour proto for data, 1D density, with rug marks</h2><span id='topic+proto_density'></span><span id='topic+proto_density1d'></span>

<h3>Description</h3>

<p>Adds <code>geom_density()</code> and <code>geom_rug()</code> of the projected data. Density
<code>postion = "stack"</code> does not work with <code>animate_plotly()</code>, GH issue is open.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proto_density(
  aes_args = list(),
  identity_args = list(alpha = 0.7),
  row_index = NULL,
  density_position = c("identity", "stack", "fill"),
  rug_shape = c(3, 142, 124, NULL)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="proto_density_+3A_aes_args">aes_args</code></td>
<td>
<p>A list of arguments to call inside of aes().
aesthetic mapping of the primary geom. For example,
<code>geom_point(aes(color = my_fct, shape = my_fct))</code> becomes
<code>aes_args = list(color = my_fct, shape = my_fct)</code>.</p>
</td></tr>
<tr><td><code id="proto_density_+3A_identity_args">identity_args</code></td>
<td>
<p>A list of static, identity arguments passed into
the primary geom. For instance,
<code>geom_point(size = 2, alpha = .7)</code> becomes
<code>identity_args = list(size = 2, alpha = .7)</code>.
Also passes more foundational arguments such as stat and position, though
these have been tested less.</p>
</td></tr>
<tr><td><code id="proto_density_+3A_row_index">row_index</code></td>
<td>
<p>A numeric or logical index of rows to subset to.
Defaults to NULL, all observations.</p>
</td></tr>
<tr><td><code id="proto_density_+3A_density_position">density_position</code></td>
<td>
<p>The <code>ggplot2</code> position of <code>geom_density()</code>. Either
c(&quot;identity&quot;, &quot;stack&quot;), defaults to &quot;identity&quot;. Warning: &quot;stack&quot; does not
work with <code>animate_plotly()</code> at the moment.</p>
</td></tr>
<tr><td><code id="proto_density_+3A_rug_shape">rug_shape</code></td>
<td>
<p>Numeric, the number of the shape to make rug marks.
Expects either 3 142, 124 or NULL, '+', '|' (plotly), '|' (ggplot2)
respectively. Defaults to 3.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other ggtour proto functions: 
<code><a href="#topic+append_fixed_y">append_fixed_y</a>()</code>,
<code><a href="#topic+facet_wrap_tour">facet_wrap_tour</a>()</code>,
<code><a href="#topic+ggtour">ggtour</a>()</code>,
<code><a href="#topic+proto_basis">proto_basis</a>()</code>,
<code><a href="#topic+proto_default">proto_default</a>()</code>,
<code><a href="#topic+proto_density2d">proto_density2d</a>()</code>,
<code><a href="#topic+proto_hex">proto_hex</a>()</code>,
<code><a href="#topic+proto_highlight">proto_highlight</a>()</code>,
<code><a href="#topic+proto_hline0">proto_hline0</a>()</code>,
<code><a href="#topic+proto_origin">proto_origin</a>()</code>,
<code><a href="#topic+proto_point">proto_point</a>()</code>,
<code><a href="#topic+proto_text">proto_text</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat  &lt;- scale_sd(penguins_na.rm[, 1:4])
clas &lt;- penguins_na.rm$species

## Manual tour
bas &lt;- basis_olda(dat, clas)
mt  &lt;- manual_tour(bas, manip_var = 2)
ggt &lt;- ggtour(mt, dat, angle = .3) +
  proto_density(aes_args = list(color = clas, fill = clas)) +
  proto_basis1d() +
  proto_origin1d()

animate_plotly(ggt)


## Grand tour
gt_path &lt;- save_history(dat, grand_tour(), max = 3)
ggt &lt;- ggtour(gt_path, dat, angle = .3) +
  proto_density(aes_args = list(color = clas, fill = clas)) +
  proto_basis1d() +
  proto_origin1d()

animate_plotly(ggt)

</code></pre>

<hr>
<h2 id='proto_density2d'>Tour proto for data, 1D density, with rug marks</h2><span id='topic+proto_density2d'></span>

<h3>Description</h3>

<p>Adds <code>geom_density_2d()</code> of the projected data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proto_density2d(
  aes_args = list(),
  identity_args = list(bins = 4),
  row_index = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="proto_density2d_+3A_aes_args">aes_args</code></td>
<td>
<p>A list of arguments to call inside of aes().
aesthetic mapping of the primary geom. For example,
<code>geom_point(aes(color = my_fct, shape = my_fct))</code> becomes
<code>aes_args = list(color = my_fct, shape = my_fct)</code>.</p>
</td></tr>
<tr><td><code id="proto_density2d_+3A_identity_args">identity_args</code></td>
<td>
<p>A list of static, identity arguments passed into
the primary geom. For instance,
<code>geom_point(size = 2, alpha = .7)</code> becomes
<code>identity_args = list(size = 2, alpha = .7)</code>.
Also passes more foundational arguments such as stat and position, though
these have been tested less.</p>
</td></tr>
<tr><td><code id="proto_density2d_+3A_row_index">row_index</code></td>
<td>
<p>A numeric or logical index of rows to subset to.
Defaults to NULL, all observations.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other ggtour proto functions: 
<code><a href="#topic+append_fixed_y">append_fixed_y</a>()</code>,
<code><a href="#topic+facet_wrap_tour">facet_wrap_tour</a>()</code>,
<code><a href="#topic+ggtour">ggtour</a>()</code>,
<code><a href="#topic+proto_basis">proto_basis</a>()</code>,
<code><a href="#topic+proto_default">proto_default</a>()</code>,
<code><a href="#topic+proto_density">proto_density</a>()</code>,
<code><a href="#topic+proto_hex">proto_hex</a>()</code>,
<code><a href="#topic+proto_highlight">proto_highlight</a>()</code>,
<code><a href="#topic+proto_hline0">proto_hline0</a>()</code>,
<code><a href="#topic+proto_origin">proto_origin</a>()</code>,
<code><a href="#topic+proto_point">proto_point</a>()</code>,
<code><a href="#topic+proto_text">proto_text</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat     &lt;- scale_sd(penguins_na.rm[, 1:4])
clas    &lt;- penguins_na.rm$species
gt_path &lt;- save_history(dat, grand_tour(), max = 3)

## geom_density_2d args can be passed in identity_args (bins, binwidth, breaks) 
ggt &lt;- ggtour(gt_path, dat, angle = .3) +
  proto_density2d(aes_args = list(color = clas, fill = clas),
                  identity_args = list(binwidth = .3)) +
  proto_point(aes_args = list(color = clas, shape = clas),
              identity_args = list(alpha = .2)) +
  proto_basis()

animate_plotly(ggt)

</code></pre>

<hr>
<h2 id='proto_frame_cor2'>Tour proto for frames square correlation</h2><span id='topic+proto_frame_cor2'></span>

<h3>Description</h3>

<p>Adds text to the animation, the frame and its specified correlation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proto_frame_cor2(
  text_size = 4,
  row_index = TRUE,
  xy_position = c(0.7, -0.1),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="proto_frame_cor2_+3A_text_size">text_size</code></td>
<td>
<p>Size of the text. defaults to 4.</p>
</td></tr>
<tr><td><code id="proto_frame_cor2_+3A_row_index">row_index</code></td>
<td>
<p>A numeric or logical index of rows to subset to.
Defaults to NULL, all observations.</p>
</td></tr>
<tr><td><code id="proto_frame_cor2_+3A_xy_position">xy_position</code></td>
<td>
<p>Vector of the x and y position, the fraction of the
range of the data in each direction. The projection data is contained in
(0, 1) in each direction. Defaults to c(.7, -.1), in the bottom right.</p>
</td></tr>
<tr><td><code id="proto_frame_cor2_+3A_...">...</code></td>
<td>
<p>Optionally, pass additional arguments to
<code><a href="stats.html#topic+cor">stats::cor</a></code>, specifying the type of
within frame correlation.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+cor">stats::cor</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat     &lt;- scale_sd(penguins_na.rm[, 1:4])
clas    &lt;- penguins_na.rm$species
gt_path &lt;- save_history(dat, grand_tour(), max_bases = 5)

ggt &lt;- ggtour(gt_path, dat, angle = .3) +
  proto_default(aes_args = list(color = clas, shape = clas)) +
  proto_frame_cor2(xy_position = c(.5, 1.1))

animate_plotly(ggt)

</code></pre>

<hr>
<h2 id='proto_hex'>Tour proto for data, hexagonal heatmap</h2><span id='topic+proto_hex'></span>

<h3>Description</h3>

<p>Adds <code>geom_hex()</code> of the projected data. Does not display hexagons in plotly
animations; will not work with <code>animate_plotly()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proto_hex(
  aes_args = list(),
  identity_args = list(),
  row_index = NULL,
  bins = 30
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="proto_hex_+3A_aes_args">aes_args</code></td>
<td>
<p>A list of arguments to call inside of aes().
aesthetic mapping of the primary geom. For example,
<code>geom_point(aes(color = my_fct, shape = my_fct))</code> becomes
<code>aes_args = list(color = my_fct, shape = my_fct)</code>.</p>
</td></tr>
<tr><td><code id="proto_hex_+3A_identity_args">identity_args</code></td>
<td>
<p>A list of static, identity arguments passed into
the primary geom. For instance,
<code>geom_point(size = 2, alpha = .7)</code> becomes
<code>identity_args = list(size = 2, alpha = .7)</code>.
Also passes more foundational arguments such as stat and position, though
these have been tested less.</p>
</td></tr>
<tr><td><code id="proto_hex_+3A_row_index">row_index</code></td>
<td>
<p>A numeric or logical index of rows to subset to.
Defaults to NULL, all observations.</p>
</td></tr>
<tr><td><code id="proto_hex_+3A_bins">bins</code></td>
<td>
<p>Numeric vector giving number of bins in both vertical and
horizontal directions. Defaults to 30.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other ggtour proto functions: 
<code><a href="#topic+append_fixed_y">append_fixed_y</a>()</code>,
<code><a href="#topic+facet_wrap_tour">facet_wrap_tour</a>()</code>,
<code><a href="#topic+ggtour">ggtour</a>()</code>,
<code><a href="#topic+proto_basis">proto_basis</a>()</code>,
<code><a href="#topic+proto_default">proto_default</a>()</code>,
<code><a href="#topic+proto_density">proto_density</a>()</code>,
<code><a href="#topic+proto_density2d">proto_density2d</a>()</code>,
<code><a href="#topic+proto_highlight">proto_highlight</a>()</code>,
<code><a href="#topic+proto_hline0">proto_hline0</a>()</code>,
<code><a href="#topic+proto_origin">proto_origin</a>()</code>,
<code><a href="#topic+proto_point">proto_point</a>()</code>,
<code><a href="#topic+proto_text">proto_text</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
raw     &lt;- ggplot2::diamonds
dat     &lt;- scale_sd(raw[1:10000, c(1, 5:6, 8:10)])
gt_path &lt;- save_history(dat, grand_tour(), max = 3)

## 10000 rows is quite heavy to animate.
## Increase performance by aggregating many points into few hexagons
ggp &lt;- ggtour(gt_path, dat) +
  proto_basis() +
  proto_hex(bins = 20)

## Hexagons don't show up in plotly animation.
## Not run: 
animate_gganimate(ggp)

## End(Not run)
</code></pre>

<hr>
<h2 id='proto_highlight'>Tour proto highlighing specified points</h2><span id='topic+proto_highlight'></span><span id='topic+proto_highlight_2d'></span><span id='topic+proto_highlight1d'></span>

<h3>Description</h3>

<p>A <code>geom_point</code> or <code>geom_segment</code>(1d case) call to draw attention to a subset
of points. This is mostly redundant <code>proto_point</code> with the implementation
of the <code>row_index</code> argument on data protos, still helpful in the 1d case and
for <code>mark_initial</code>, does not use bkg_row_color
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proto_highlight(
  aes_args = list(),
  identity_args = list(color = "red", size = 5, shape = 8),
  row_index = 1,
  mark_initial = FALSE
)

proto_highlight1d(
  aes_args = list(),
  identity_args = list(color = "red", linetype = 2, alpha = 0.9),
  row_index = 1,
  mark_initial = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="proto_highlight_+3A_aes_args">aes_args</code></td>
<td>
<p>A list of arguments to call inside of aes().
aesthetic mapping of the primary geom. For example,
<code>geom_point(aes(color = my_fct, shape = my_fct))</code> becomes
<code>aes_args = list(color = my_fct, shape = my_fct)</code>.</p>
</td></tr>
<tr><td><code id="proto_highlight_+3A_identity_args">identity_args</code></td>
<td>
<p>A list of static, identity arguments passed into
<code>geom_point()</code>, but outside of <code>aes()</code>, for instance
<code>geom_point(aes(...), size = 2, alpha = .7)</code> becomes
<code>identity_args = list(size = 2, alpha = .7)</code>.
#' Typically a single numeric for point size, alpha, or similar.</p>
</td></tr>
<tr><td><code id="proto_highlight_+3A_row_index">row_index</code></td>
<td>
<p>A numeric or logical index of rows to subset to.
Defaults to 1, highlighting the first row.</p>
</td></tr>
<tr><td><code id="proto_highlight_+3A_mark_initial">mark_initial</code></td>
<td>
<p>Logical, whether or not to leave a fainter mark at the
subset's initial position. Defaults to FALSE.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other ggtour proto functions: 
<code><a href="#topic+append_fixed_y">append_fixed_y</a>()</code>,
<code><a href="#topic+facet_wrap_tour">facet_wrap_tour</a>()</code>,
<code><a href="#topic+ggtour">ggtour</a>()</code>,
<code><a href="#topic+proto_basis">proto_basis</a>()</code>,
<code><a href="#topic+proto_default">proto_default</a>()</code>,
<code><a href="#topic+proto_density">proto_density</a>()</code>,
<code><a href="#topic+proto_density2d">proto_density2d</a>()</code>,
<code><a href="#topic+proto_hex">proto_hex</a>()</code>,
<code><a href="#topic+proto_hline0">proto_hline0</a>()</code>,
<code><a href="#topic+proto_origin">proto_origin</a>()</code>,
<code><a href="#topic+proto_point">proto_point</a>()</code>,
<code><a href="#topic+proto_text">proto_text</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat     &lt;- scale_sd(penguins_na.rm[, 1:4])
clas    &lt;- penguins_na.rm$species
gt_path &lt;- save_history(dat, grand_tour(), max_bases = 5)

## d = 2 case
ggt &lt;- ggtour(gt_path, dat, angle = .3) +
  proto_default(aes_args = list(color = clas, shape = clas)) +
  proto_highlight(row_index = 5)

animate_plotly(ggt)


## Highlight multiple observations
ggt2 &lt;- ggtour(gt_path, dat, angle = .3) +
  proto_default(aes_args = list(color = clas, shape = clas)) +
  proto_highlight(row_index = c( 2, 6, 19),
                  identity_args = list(color = "blue", size = 4, shape = 4))

animate_plotly(ggt2)

## 1D case:
gt_path1d &lt;- save_history(dat, grand_tour(d = 1), max_bases = 3)

ggt &lt;- ggtour(gt_path1d, dat, angle = .3) +
  proto_default1d(aes_args = list(fill = clas, color = clas)) +
  proto_highlight1d(row_index = 7)

animate_plotly(ggt)


## Highlight multiple observations, mark_initial defaults to off
ggt2 &lt;- ggtour(gt_path1d, dat, angle = .3) +
  proto_default1d(aes_args = list(fill = clas, color = clas)) +
  proto_highlight1d(row_index = c(2, 6, 7),
                    identity_args = list(color = "green", linetype = 1))

animate_plotly(ggt2)

</code></pre>

<hr>
<h2 id='proto_hline0'>Tour proto adding a vertical/horizontal line</h2><span id='topic+proto_hline0'></span><span id='topic+proto_hline'></span><span id='topic+proto_vline0'></span><span id='topic+proto_vline'></span>

<h3>Description</h3>

<p>Adds a vertical/horizontal line with an intercept of 0, scaled to the data
frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proto_hline0(identity_args = list(color = "grey80", size = 0.5, alpha = 0.9))

proto_vline0(identity_args = list(color = "grey80", size = 0.5, alpha = 0.9))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="proto_hline0_+3A_identity_args">identity_args</code></td>
<td>
<p>A list of static, identity arguments passed into
the primary geom. For instance,
<code>geom_point(size = 2, alpha = .7)</code> becomes
<code>identity_args = list(size = 2, alpha = .7)</code>.
Also passes more foundational arguments such as stat and position, though
these have been tested less.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other ggtour proto functions: 
<code><a href="#topic+append_fixed_y">append_fixed_y</a>()</code>,
<code><a href="#topic+facet_wrap_tour">facet_wrap_tour</a>()</code>,
<code><a href="#topic+ggtour">ggtour</a>()</code>,
<code><a href="#topic+proto_basis">proto_basis</a>()</code>,
<code><a href="#topic+proto_default">proto_default</a>()</code>,
<code><a href="#topic+proto_density">proto_density</a>()</code>,
<code><a href="#topic+proto_density2d">proto_density2d</a>()</code>,
<code><a href="#topic+proto_hex">proto_hex</a>()</code>,
<code><a href="#topic+proto_highlight">proto_highlight</a>()</code>,
<code><a href="#topic+proto_origin">proto_origin</a>()</code>,
<code><a href="#topic+proto_point">proto_point</a>()</code>,
<code><a href="#topic+proto_text">proto_text</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat  &lt;- scale_sd(penguins_na.rm[, 1:4])
clas &lt;- penguins_na.rm$species

## 2D case:
gt_path &lt;- save_history(dat, grand_tour(), max_bases = 5)
ggt &lt;- ggtour(gt_path, dat, angle = .1) +
  proto_point(list(color = clas, shape = clas)) +
  proto_hline0() + ## horizonatal line at 0
  proto_vline0()   ## vertical line at 0

animate_plotly(ggt)

</code></pre>

<hr>
<h2 id='proto_origin'>Tour proto for data origin zero mark</h2><span id='topic+proto_origin'></span><span id='topic+proto_origin2d'></span><span id='topic+proto_origin1d'></span>

<h3>Description</h3>

<p>Adds a zero mark showing the location of the origin for the central data area.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proto_origin(
  identity_args = list(color = "grey60", size = 0.5, alpha = 0.9),
  tail_size = 0.05
)

proto_origin1d(identity_args = list(color = "grey60", size = 0.5, alpha = 0.9))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="proto_origin_+3A_identity_args">identity_args</code></td>
<td>
<p>A list of static, identity arguments passed into
the primary geom. For instance,
<code>geom_point(size = 2, alpha = .7)</code> becomes
<code>identity_args = list(size = 2, alpha = .7)</code>.
Also passes more foundational arguments such as stat and position, though
these have been tested less.</p>
</td></tr>
<tr><td><code id="proto_origin_+3A_tail_size">tail_size</code></td>
<td>
<p>How long the origin mark should extended
relative to the observations. Defaults to .05, 5% of the projection space.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other ggtour proto functions: 
<code><a href="#topic+append_fixed_y">append_fixed_y</a>()</code>,
<code><a href="#topic+facet_wrap_tour">facet_wrap_tour</a>()</code>,
<code><a href="#topic+ggtour">ggtour</a>()</code>,
<code><a href="#topic+proto_basis">proto_basis</a>()</code>,
<code><a href="#topic+proto_default">proto_default</a>()</code>,
<code><a href="#topic+proto_density">proto_density</a>()</code>,
<code><a href="#topic+proto_density2d">proto_density2d</a>()</code>,
<code><a href="#topic+proto_hex">proto_hex</a>()</code>,
<code><a href="#topic+proto_highlight">proto_highlight</a>()</code>,
<code><a href="#topic+proto_hline0">proto_hline0</a>()</code>,
<code><a href="#topic+proto_point">proto_point</a>()</code>,
<code><a href="#topic+proto_text">proto_text</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat  &lt;- scale_sd(penguins_na.rm[, 1:4])
clas &lt;- penguins_na.rm$species

## 2D case:
gt_path &lt;- save_history(dat, grand_tour(), max_bases = 5)
ggt &lt;- ggtour(gt_path, dat, angle = .1) +
  proto_point(list(color = clas, shape = clas)) +
  proto_origin() ## `+` in center

animate_plotly(ggt)


## 1D case:
gt_path1d &lt;- save_history(dat, grand_tour(d = 1), max_bases = 5)

ggt &lt;- ggtour(gt_path1d, dat) +
  proto_density(list(fill = clas, color = clas)) +
  proto_origin1d() ## Adds line at 0.

animate_plotly(ggt)

</code></pre>

<hr>
<h2 id='proto_point'>Tour proto for data point</h2><span id='topic+proto_point'></span><span id='topic+proto_points'></span>

<h3>Description</h3>

<p>Adds <code>geom_point()</code> of the projected data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proto_point(
  aes_args = list(),
  identity_args = list(alpha = 0.9),
  row_index = NULL,
  bkg_color = "grey80"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="proto_point_+3A_aes_args">aes_args</code></td>
<td>
<p>A list of arguments to call inside of aes().
aesthetic mapping of the primary geom. For example,
<code>geom_point(aes(color = my_fct, shape = my_fct))</code> becomes
<code>aes_args = list(color = my_fct, shape = my_fct)</code>.</p>
</td></tr>
<tr><td><code id="proto_point_+3A_identity_args">identity_args</code></td>
<td>
<p>A list of static, identity arguments passed into
the primary geom. For instance,
<code>geom_point(size = 2, alpha = .7)</code> becomes
<code>identity_args = list(size = 2, alpha = .7)</code>.
Also passes more foundational arguments such as stat and position, though
these have been tested less.</p>
</td></tr>
<tr><td><code id="proto_point_+3A_row_index">row_index</code></td>
<td>
<p>A numeric or logical index of rows to subset to.
Defaults to NULL, all observations.</p>
</td></tr>
<tr><td><code id="proto_point_+3A_bkg_color">bkg_color</code></td>
<td>
<p>The character color by name or hexadecimal to display
background observations, those not in the <code>row_index</code>.
Defaults to &quot;grey80&quot;. Use FALSE or NULL to skip rendering background points.
Other aesthetic values such as shape and alpha are set adopted from
<code>aes_args</code> and <code>identity_args</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other ggtour proto functions: 
<code><a href="#topic+append_fixed_y">append_fixed_y</a>()</code>,
<code><a href="#topic+facet_wrap_tour">facet_wrap_tour</a>()</code>,
<code><a href="#topic+ggtour">ggtour</a>()</code>,
<code><a href="#topic+proto_basis">proto_basis</a>()</code>,
<code><a href="#topic+proto_default">proto_default</a>()</code>,
<code><a href="#topic+proto_density">proto_density</a>()</code>,
<code><a href="#topic+proto_density2d">proto_density2d</a>()</code>,
<code><a href="#topic+proto_hex">proto_hex</a>()</code>,
<code><a href="#topic+proto_highlight">proto_highlight</a>()</code>,
<code><a href="#topic+proto_hline0">proto_hline0</a>()</code>,
<code><a href="#topic+proto_origin">proto_origin</a>()</code>,
<code><a href="#topic+proto_text">proto_text</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat     &lt;- scale_sd(penguins_na.rm[, 1:4])
clas    &lt;- penguins_na.rm$species
gt_path &lt;- save_history(dat, grand_tour(), max_bases = 5)

ggt &lt;- ggtour(gt_path, dat, angle = .3) +
  proto_point(aes_args = list(color = clas, shape = clas),
              identity_args = list(size = 2, alpha = .7))

animate_plotly(ggt)


## Select/highlight observations with `row_index`
ggt &lt;- ggtour(gt_path, dat, angle = .3) +
  proto_point(aes_args = list(color = clas, shape = clas),
              identity_args = list(size = 2, alpha = .7),
              row_index = which(clas == levels(clas)[1]),
              bkg_color = "grey80") ## FALSE or NULL to skip plotting background

animate_plotly(ggt)

</code></pre>

<hr>
<h2 id='proto_text'>Tour proto for data, text labels</h2><span id='topic+proto_text'></span>

<h3>Description</h3>

<p>Adds <code>geom_text()</code> of the projected data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proto_text(
  aes_args = list(vjust = "outward", hjust = "outward"),
  identity_args = list(nudge_x = 0.05),
  row_index = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="proto_text_+3A_aes_args">aes_args</code></td>
<td>
<p>A list of arguments to call inside of aes().
aesthetic mapping of the primary geom. For example,
<code>geom_point(aes(color = my_fct, shape = my_fct))</code> becomes
<code>aes_args = list(color = my_fct, shape = my_fct)</code>.</p>
</td></tr>
<tr><td><code id="proto_text_+3A_identity_args">identity_args</code></td>
<td>
<p>A list of static, identity arguments passed into
the primary geom. For instance,
<code>geom_point(size = 2, alpha = .7)</code> becomes
<code>identity_args = list(size = 2, alpha = .7)</code>.
Also passes more foundational arguments such as stat and position, though
these have been tested less.</p>
</td></tr>
<tr><td><code id="proto_text_+3A_row_index">row_index</code></td>
<td>
<p>A numeric or logical index of rows to subset to.
Defaults to NULL, all observations.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other ggtour proto functions: 
<code><a href="#topic+append_fixed_y">append_fixed_y</a>()</code>,
<code><a href="#topic+facet_wrap_tour">facet_wrap_tour</a>()</code>,
<code><a href="#topic+ggtour">ggtour</a>()</code>,
<code><a href="#topic+proto_basis">proto_basis</a>()</code>,
<code><a href="#topic+proto_default">proto_default</a>()</code>,
<code><a href="#topic+proto_density">proto_density</a>()</code>,
<code><a href="#topic+proto_density2d">proto_density2d</a>()</code>,
<code><a href="#topic+proto_hex">proto_hex</a>()</code>,
<code><a href="#topic+proto_highlight">proto_highlight</a>()</code>,
<code><a href="#topic+proto_hline0">proto_hline0</a>()</code>,
<code><a href="#topic+proto_origin">proto_origin</a>()</code>,
<code><a href="#topic+proto_point">proto_point</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat     &lt;- scale_sd(penguins_na.rm[, 1:4])
clas    &lt;- penguins_na.rm$species
bas     &lt;- basis_pca(dat)
mv      &lt;- manip_var_of(bas)
gt_path &lt;- save_history(dat, grand_tour(), max_bases = 5)

ggt &lt;- ggtour(gt_path, dat, angle = .2) +
  proto_text(list(color = clas))

animate_plotly(ggt)


## Custom labels, subset of points
ggt2 &lt;- ggtour(gt_path, dat) +
  proto_text(list(color = clas, size = as.integer(clas)),
             list(alpha = .7),
             row_index = 1:15)

animate_plotly(ggt2)

</code></pre>

<hr>
<h2 id='render_'>Prepare the ggplot object before passing to either animation package.</h2><span id='topic+render_'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>, see <code><a href="#topic+ggtour">ggtour</a></code>.
Typically called by <code>render_plotly()</code> or <code>render_gganimate()</code>. Takes the
result of <code>array2df()</code>, and renders them into a ggplot2 object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>render_(
  frames,
  axes = "center",
  manip_col = "blue",
  line_size = 0.6,
  text_size = 4,
  aes_args = list(),
  identity_args = list(),
  ggproto = list(theme_spinifex())
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="render__+3A_frames">frames</code></td>
<td>
<p>The result of <code>array2df()</code>, a long df of the projected frames.</p>
</td></tr>
<tr><td><code id="render__+3A_axes">axes</code></td>
<td>
<p>Position of the axes, expects one of:
&quot;center&quot;, &quot;left&quot;, &quot;right&quot;, &quot;bottomleft&quot;, &quot;topright&quot;, &quot;off&quot;, or a
map_absolute() call. Defaults to &quot;center&quot;.</p>
</td></tr>
<tr><td><code id="render__+3A_manip_col">manip_col</code></td>
<td>
<p>String of the color to highlight the <code>manip_var</code>, if used.
Defaults to &quot;blue&quot;.</p>
</td></tr>
<tr><td><code id="render__+3A_line_size">line_size</code></td>
<td>
<p>The size of the lines of the unit circle and variable
contributions of the basis. Defaults to .6.</p>
</td></tr>
<tr><td><code id="render__+3A_text_size">text_size</code></td>
<td>
<p>The size of the text labels of the variable
contributions of the basis. Defaults to 4.</p>
</td></tr>
<tr><td><code id="render__+3A_aes_args">aes_args</code></td>
<td>
<p>A list of aesthetic arguments to passed to
<code style="white-space: pre;">&#8288;geom_point(aes(X)&#8288;</code>. Any mapping of the data to an aesthetic,
for example, <code>geom_point(aes(color = myCol, shape = myCol))</code> becomes
<code>aes_args = list(color = myCol, shape = myCol)</code>.</p>
</td></tr>
<tr><td><code id="render__+3A_identity_args">identity_args</code></td>
<td>
<p>A list of static, identity arguments passed into
<code>geom_point()</code>, but outside of <code>aes()</code>; <code>geom_point(aes(), X)</code>.
Typically a single numeric for point size, alpha, or similar.
For example, <code>geom_point(aes(), size = 2, alpha = .7)</code> becomes
<code>identity_args = list(size = 2, alpha = .7)</code>.</p>
</td></tr>
<tr><td><code id="render__+3A_ggproto">ggproto</code></td>
<td>
<p>A list of ggplot2 function calls.
Anything that would be &quot;added&quot; to ggplot(); in the case of applying a theme,
<code>ggplot() + theme_bw()</code> becomes <code>ggproto = list(theme_bw())</code>.
Intended for aesthetic ggplot2 functions (not geom_* family).</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
message("It's suggested to switch to the proto api, see `?ggtour` to get started.")

## Setup
dat_std &lt;- scale_sd(wine[, 2:6])
clas    &lt;- wine$Type
bas     &lt;- basis_pca(dat_std)
mv      &lt;- manip_var_of(bas)

mt_array &lt;- manual_tour(basis = bas, manip_var = mv)
mt_df_ls &lt;- array2df(basis_array = mt_array, data = dat_std)

## Required arguments
render_(frames = mt_df_ls)

## Full arguments
require("ggplot2")
render_(frames = mt_df_ls, axes = "left", manip_col = "purple",
        aes_args = list(color = clas, shape = clas),
        identity_args = list(size = 1.5, alpha = .7),
        ggproto = list(theme_minimal(),
                       ggtitle("My title"),
                       scale_color_brewer(palette = "Set2")))
</code></pre>

<hr>
<h2 id='render_gganimate'>Render the frames as a <em>gganimate</em> animation.</h2><span id='topic+render_gganimate'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>, see <code><a href="#topic+ggtour">ggtour</a></code>.
Takes the result of <code>array2df()</code> and renders them into a
<em>gganimate</em> animation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>render_gganimate(
  fps = 8,
  rewind = FALSE,
  start_pause = 0.5,
  end_pause = 1,
  gif_filename = NULL,
  gif_path = NULL,
  gganimate_args = list(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="render_gganimate_+3A_fps">fps</code></td>
<td>
<p>Frames animated per second. Defaults to 8.</p>
</td></tr>
<tr><td><code id="render_gganimate_+3A_rewind">rewind</code></td>
<td>
<p>Logical, should the animation play backwards after reaching
the end? Default to FALSE.</p>
</td></tr>
<tr><td><code id="render_gganimate_+3A_start_pause">start_pause</code></td>
<td>
<p>Number of seconds to pause on the first frame for.
Defaults to .5.</p>
</td></tr>
<tr><td><code id="render_gganimate_+3A_end_pause">end_pause</code></td>
<td>
<p>Number of seconds to pause on the last frame for.
Defaults to 1.</p>
</td></tr>
<tr><td><code id="render_gganimate_+3A_gif_filename">gif_filename</code></td>
<td>
<p>Optional, saves the animation as a GIF to this string
(without the directory path). Defaults to NULL (no GIF saved).
For more output control, call <code>gganimate::anim_save()</code> on a return object of
<code>render_gganimate()</code>.</p>
</td></tr>
<tr><td><code id="render_gganimate_+3A_gif_path">gif_path</code></td>
<td>
<p>Optional, A string of the directory path (without the
filename) to save a GIF to. Defaults to NULL (current work directory).</p>
</td></tr>
<tr><td><code id="render_gganimate_+3A_gganimate_args">gganimate_args</code></td>
<td>
<p>A list of arguments assigned to a vector passe outside
of an aes() call. Anything that would be put in <code>geom_point(aes(), X)</code>.
Typically a single numeric for point size, alpha, or similar
For example, <code>geom_point(aes(), size = 2, alpha = .7)</code> becomes
<code>identity_args = list(size = 2, alpha = .7)</code>.</p>
</td></tr>
<tr><td><code id="render_gganimate_+3A_...">...</code></td>
<td>
<p>Passes arguments to <code>render_(...)</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+render_">render_</a></code> for <code>...</code> arguments.
</p>
<p><code><a href="gganimate.html#topic+anim_save">gganimate::anim_save</a></code> for more control of .gif output.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
message("It's suggested to switch to the proto api, see `?ggtour` to get started.")

## Setup
dat_std  &lt;- scale_sd(wine[, 2:6])
clas     &lt;- wine$Type
bas      &lt;- basis_pca(dat_std)
mv       &lt;- manip_var_of(bas)
mt       &lt;- manual_tour(basis = bas, manip_var = mv)
mt_df_ls &lt;- array2df(basis_array = mt, data = dat_std)

## Not run: 
render_gganimate(frames = mt_df_ls)

require("ggplot2")
render_gganimate(
  frames = mt_df_ls, axes = "bottomleft",
  fps = 10, rewind = TRUE, start_pause = 1, end_pause = 1.5,
  aes_args = list(color = clas, shape = clas),
  identity_args = list(size = 2, alpha = .7),
  ggproto = list(theme_void(),
                 ggtitle("My title"),
                 scale_color_brewer(palette = "Set2")))

## Saving a .gif(may require additional setup)
if(FALSE) ## Don't run by mistake
  render_gganimate(frames = mt_df_ls, axes = "bottomleft",
                   gif_filename = "myRadialTour.gif", gif_path = "./output")
## End(Not run)
</code></pre>

<hr>
<h2 id='render_plotly'>Animation the frames as a HTML widget.</h2><span id='topic+render_plotly'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>, see <code><a href="#topic+ggtour">ggtour</a></code>.
Takes the result of <code>array2df()</code> and animations them via <code>{plotly}</code>
into a  self-contained HTML widget.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>render_plotly(fps = 8, html_filename = NULL, save_widget_args = list(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="render_plotly_+3A_fps">fps</code></td>
<td>
<p>Frames animated per second. Defaults to 8.</p>
</td></tr>
<tr><td><code id="render_plotly_+3A_html_filename">html_filename</code></td>
<td>
<p>Optional, saves the plotly object as an HTML widget to
this string (without the directory path).
Defaults to NULL (not saved). For more output control use <code>save_widget_args</code>
or call <code>htmlwidgets::saveWidget()</code> on a return object of <code>render_plotly()</code>.</p>
</td></tr>
<tr><td><code id="render_plotly_+3A_save_widget_args">save_widget_args</code></td>
<td>
<p>A list of arguments to be called in
<code>htmlwidgets::saveWidget()</code> when used with a <code>html_filename</code>.</p>
</td></tr>
<tr><td><code id="render_plotly_+3A_...">...</code></td>
<td>
<p>Passes arguments to <code>render_(...)</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+render_">render_</a></code> for <code>...</code> arguments.
</p>
<p><code><a href="plotly.html#topic+ggplotly">ggplotly</a></code> for source documentation of <code>tooltip</code>.
</p>
<p><code><a href="htmlwidgets.html#topic+saveWidget">saveWidget</a></code> for more control of .html output.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
message("It's suggested to switch to the proto api, see `?ggtour` to get started.")

## Setup
dat_std  &lt;- scale_sd(wine[, 2:6])
clas     &lt;- wine$Type
bas      &lt;- basis_pca(dat_std)
mv       &lt;- manip_var_of(bas)
mt_array &lt;- manual_tour(basis = bas, manip_var = mv)
mt_df_ls &lt;- array2df(basis_array = mt_array, data = dat_std)


render_plotly(frames = mt_df_ls)

require("ggplot2")
render_plotly(
  frames = mt_df_ls, axes = "bottomleft", fps = 10,
  aes_args = list(color = clas, shape = clas),
  identity_args = list(size = 1.5, alpha = .7),
  ggproto = list(theme_bw(), scale_color_brewer(palette = "Set2")))

## Saving a .gif, may require additional setup
if(FALSE) ## Don't accidentally save file
  render_plotly(frames = mt_df_ls, axes = "bottomleft", fps = 10,
                html_filename = "myRadialTour.html")
</code></pre>

<hr>
<h2 id='rotate_manip_space'>Performs a rotation on the manipulation space of the given manip var.</h2><span id='topic+rotate_manip_space'></span>

<h3>Description</h3>

<p>A specific R3 rotation of the manipulation space for a 2D tour.
Typically called by <code>manual_tour()</code>. The first 2 columns are x and y in
the projection plane. The 3rd column extends &quot;in the z-direction&quot; orthogonal
to the projection plane.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rotate_manip_space(manip_space, theta, phi)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rotate_manip_space_+3A_manip_space">manip_space</code></td>
<td>
<p>A (p, d+1) dim matrix (manipulation space) to be rotated.</p>
</td></tr>
<tr><td><code id="rotate_manip_space_+3A_theta">theta</code></td>
<td>
<p>Angle (radians) of &quot;in-projection-plane&quot; rotation (ie. on xy-
of the projection). Typically set by the manip_type argument in <code>proj_data()</code>.</p>
</td></tr>
<tr><td><code id="rotate_manip_space_+3A_phi">phi</code></td>
<td>
<p>Angle (radians) of &quot;out-of-projection-plane&quot; rotation (ie. into
the z-direction of the manipulation space. Effectively changes the norm
of the manip_var in the projection plane.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A (p, d+1) orthonormal matrix of the rotated (manipulation) space.
The first 2 columns are x and y in the projection plane. The 3rd column
extends &quot;in the z-direction&quot; orthogonal to the projection plane.
</p>


<h3>See Also</h3>

<p>Other manual tour adjacent functions: 
<code><a href="#topic+create_manip_space">create_manip_space</a>()</code>,
<code><a href="#topic+interpolate_manual_tour">interpolate_manual_tour</a>()</code>,
<code><a href="#topic+manip_var_of">manip_var_of</a>()</code>,
<code><a href="#topic+manual_tour">manual_tour</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat &lt;- scale_sd(wine[, 2:6])
bas &lt;- basis_pca(dat)
mv  &lt;- manip_var_of(bas)
msp &lt;- create_manip_space(basis = bas, manip_var = mv)
rotate_manip_space(msp, theta = runif(1, max = 2 * pi),
                   phi = runif(1, max = 2 * pi))

## d = 1 case
bas1d &lt;- basis_pca(dat, d = 1)
mv    &lt;- manip_var_of(bas1d)
msp   &lt;- create_manip_space(bas1d, mv)
rotate_manip_space(msp, theta = 0, phi = runif(1, max = 2 * pi))
</code></pre>

<hr>
<h2 id='run_app'>Runs a shiny app demonstrating manual tours</h2><span id='topic+run_app'></span>

<h3>Description</h3>

<p>Runs a local shiny app that demonstrates manual tour and comparable
traditional techniques for static projections of multivariate data sets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_app(app_nm = "radial_tour", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="run_app_+3A_app_nm">app_nm</code></td>
<td>
<p>name of the shiny app to run. Expects &quot;manual_tour&quot;.</p>
</td></tr>
<tr><td><code id="run_app_+3A_...">...</code></td>
<td>
<p>Other arguments passed into <code>shiny::runApp()</code>.
Such as display.mode = &quot;showcase&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Runs a locally hosted shiny app.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
run_app("radial_tour")
run_app(app_nm = "radial_tour", display.mode = "showcase")
## End(Not run)
</code></pre>

<hr>
<h2 id='save_history'>Save a tour basis array.</h2><span id='topic+save_history'></span>

<h3>Description</h3>

<p>Save a tour path so it can later be displayed in many different ways.
A wrapper function can mute the noisy text side effects of
<code><a href="tourr.html#topic+save_history">tourr::save_history</a></code>. Changes a few argument
defaults differ: doesn't scale data columns to (0, 1), max_bases = 10,
appends the start basis if tour_path is grand, it isn't already there,
and has correct dim.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>save_history(
  data,
  tour_path = tourr::grand_tour(),
  max_bases = 10,
  start = NULL,
  rescale = FALSE,
  sphere = FALSE,
  step_size = Inf,
  verbose = getOption("verbose"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="save_history_+3A_data">data</code></td>
<td>
<p>Matrix, or data frame containing complete numeric columns</p>
</td></tr>
<tr><td><code id="save_history_+3A_tour_path">tour_path</code></td>
<td>
<p>Tour path generator.
Defaults to <code><a href="tourr.html#topic+grand_tour">tourr::grand_tour</a></code>.</p>
</td></tr>
<tr><td><code id="save_history_+3A_max_bases">max_bases</code></td>
<td>
<p>The maximum number of new bases to generate.
Some tour paths (like the guided tour) may generate less than the maximum.
Defaults to 10.</p>
</td></tr>
<tr><td><code id="save_history_+3A_start">start</code></td>
<td>
<p>First basis, is appended as first frame grand tour if possible.</p>
</td></tr>
<tr><td><code id="save_history_+3A_rescale">rescale</code></td>
<td>
<p>Whether or not to rescale all variables to range (0,1).
Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="save_history_+3A_sphere">sphere</code></td>
<td>
<p>Whether or not to sphere (whiten) covariance matrix to the
identity matrix. Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="save_history_+3A_step_size">step_size</code></td>
<td>
<p>Distance (in radians) between target frames (not
interpolated frames). Defaults to Inf, forcing new basis generation at each
step.</p>
</td></tr>
<tr><td><code id="save_history_+3A_verbose">verbose</code></td>
<td>
<p>Whether or not to suppress the text output side effects from
<code><a href="tourr.html#topic+save_history">tourr::save_history</a></code>. Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="save_history_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to
<code><a href="tourr.html#topic+new_tour">tourr::new_tour</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="tourr.html#topic+save_history">tourr::save_history</a></code>
<code><a href="tourr.html#topic+new_tour">tourr::new_tour</a></code>
<code><a href="tourr.html#topic+grand_tour">tourr::grand_tour</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
dat &lt;- scale_sd(penguins_na.rm[, 1:4])
## A grand tour path
gt_path &lt;- save_history(data = dat, tour_path = grand_tour(), max_bases = 10)
dim(gt_path)

## A 1d grand tour path
gt1d_path &lt;- save_history(dat, grand_tour(d = 1), 10)
dim(gt1d_path)

## A holes guided tour path
holes_path &lt;- save_history(dat, guided_tour(holes(), max.tries = 10))
dim(holes_path)

## These are basis_arrays to be used in ?spinifex::ggtour()
</code></pre>

<hr>
<h2 id='scale_axes'>Deprecated functions in package <span class="pkg">spinifex</span>.</h2><span id='topic+scale_axes'></span><span id='topic+pan_zoom'></span><span id='topic+spinifex-deprecated'></span><span id='topic+view_basis'></span><span id='topic+oblique_basis'></span>

<h3>Description</h3>

<p>The functions listed below are deprecated and will be defunct in
the near future. When possible, alternative functions with similar
functionality are also mentioned. Help pages for deprecated functions are
available at <code>help("&lt;function&gt;-deprecated")</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_axes(...)

pan_zoom(x, pan = c(0, 0), zoom = c(1, 1))

view_basis(...)

oblique_basis(...)
</code></pre>


<h3><code>scale_axes</code></h3>

<p>For <code>scale_axes</code>, use <code><a href="#topic+map_relative">map_relative</a></code>.
</p>


<h3><code>pan_zoom</code></h3>

<p>For <code>pan_zoom</code>, use <code><a href="#topic+map_absolute">map_absolute</a></code>.
</p>


<h3><code>ggtour</code></h3>

<p>For <code>view_basis</code>, use <code><a href="#topic+view_frame">view_frame</a></code>.
</p>


<h3><code>oblique_basis</code></h3>

<p>For <code>oblique_basis</code>, please use the new api with <code><a href="#topic+ggtour">ggtour</a></code>.
</p>

<hr>
<h2 id='scale_colour_discrete'>Set default color &amp; fill for discrete variables</h2><span id='topic+scale_colour_discrete'></span><span id='topic+scale_fill_discrete'></span>

<h3>Description</h3>

<p>Masks ggplot2's default color/fill color palette for discrete variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_colour_discrete(...)

scale_fill_discrete(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scale_colour_discrete_+3A_...">...</code></td>
<td>
<p>Passes arguments to ggplot2::scale_colour/fill_brewer.</p>
</td></tr>
</table>

<hr>
<h2 id='scale_sd'>Preprocess numeric variables</h2><span id='topic+scale_sd'></span><span id='topic+scale_01'></span>

<h3>Description</h3>

<p>Centers and scales each column by standard deviation (sd) or to the
interval (0, 1).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_sd(data)

scale_01(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scale_sd_+3A_data">data</code></td>
<td>
<p>Numeric matrix or data.frame of the observations.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>scale_sd(data = wine[, 2:6])
scale_01(data = wine[, 2:6])
</code></pre>

<hr>
<h2 id='spinifex'>spinifex</h2><span id='topic+spinifex-package'></span><span id='topic+spinifex'></span>

<h3>Description</h3>

<p><code>spinifex</code> is a package that extends the package <code>tourr</code>.
It builds the functionality for manual tours and allows other
tours to be rendered by <code>plotly</code> or <code>gganimate</code>. Tours are a class of
dynamic linear (orthogonal) projections of numeric multivariate data from
<code>p</code> down to <code>d</code> dimensions that are viewed as an animation as <code>p</code>-space is
rotated. Manual tours manipulate a selected variable, exploring how they
contribute to the sensitivity of the structure in the projection. This is
particularly useful after finding an interesting basis, perhaps via a
guided tour optimizing the projection for some objective function.
</p>


<h3>Details</h3>

<p>GitHub: <a href="https://github.com/nspyrison/spinifex">https://github.com/nspyrison/spinifex</a>
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Nicholas Spyrison <a href="mailto:spyrison@gmail.com">spyrison@gmail.com</a> (<a href="https://orcid.org/0000-0002-8417-0212">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Dianne Cook (<a href="https://orcid.org/0000-0002-3813-7155">ORCID</a>) [thesis advisor]
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+manual_tour">manual_tour()</a></code> <code><a href="#topic+ggtour">ggtour()</a></code> <code><a href="#topic+proto_default">proto_default()</a></code>
</p>

<hr>
<h2 id='theme_spinifex'>Theme spinifex</h2><span id='topic+theme_spinifex'></span>

<h3>Description</h3>

<p>A ggplot2 theme suggested for linear projections with spinifex.
The default theme in spinifex functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>theme_spinifex(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="theme_spinifex_+3A_...">...</code></td>
<td>
<p>Optionally pass arguments to <code>ggplot2::theme()</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="ggplot2.html#topic+theme">ggplot2::theme</a></code> for all theme options.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>theme_spinifex()

require("ggplot2")
ggplot(mtcars, aes(wt, mpg, color = as.factor(cyl))) +
  geom_point() + theme_spinifex()
</code></pre>

<hr>
<h2 id='view_frame'>Plot a single frame of a manual tour.</h2><span id='topic+view_frame'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>, see <code><a href="#topic+ggtour">ggtour</a></code>.
Projects the specified rotation as a 2D ggplot object. One static frame of
manual tour. Useful for providing user-guided interaction.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>view_frame(
  basis = NULL,
  data = NULL,
  manip_var = NULL,
  theta = 0,
  phi = 0,
  basis_label = abbreviate(row.names(basis), 3),
  rescale_data = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="view_frame_+3A_basis">basis</code></td>
<td>
<p>A (p, d) dim orthonormal numeric matrix.
Defaults to NULL, giving a random basis.</p>
</td></tr>
<tr><td><code id="view_frame_+3A_data">data</code></td>
<td>
<p>A (n, p) dataset to project, consisting of numeric variables.</p>
</td></tr>
<tr><td><code id="view_frame_+3A_manip_var">manip_var</code></td>
<td>
<p>Optional, number of the variable to rotate.
If NULL, theta and phi must be 0 as is no manip space to rotate.</p>
</td></tr>
<tr><td><code id="view_frame_+3A_theta">theta</code></td>
<td>
<p>Angle in radians of &quot;in-projection plane&quot; rotation,
on the xy plane of the reference frame. Defaults to 0, no rotation.</p>
</td></tr>
<tr><td><code id="view_frame_+3A_phi">phi</code></td>
<td>
<p>Angle in radians of the &quot;out-of-projection plane&quot; rotation, into
the z-direction of the axes. Defaults to 0, no rotation.</p>
</td></tr>
<tr><td><code id="view_frame_+3A_basis_label">basis_label</code></td>
<td>
<p>Optional, character vector of <code>p</code> length, add name to the axes
in the frame, defaults to 3 letter abbreviation of the original variable names.</p>
</td></tr>
<tr><td><code id="view_frame_+3A_rescale_data">rescale_data</code></td>
<td>
<p>When TRUE scales the data to between 0 and 1.
Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="view_frame_+3A_...">...</code></td>
<td>
<p>Optionally pass additional arguments to the <code>proto_default</code> for
projection point aesthetics;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object of the rotated projection.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+proto_default">proto_default</a></code> For arguments to pass into <code>...</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
message("It's suggested to switch to the proto api, see `?ggtour` to get started.")

## Setup
dat_std &lt;- scale_sd(wine[, 2:6])
clas    &lt;- wine$Type
bas     &lt;- basis_pca(dat_std)
mv      &lt;- manip_var_of(bas)

## Minimal example

suppressWarnings(
  view_frame(basis = bas)
)

## Typical example
suppressWarnings(
  view_frame(basis = bas, data = dat_std, manip_var = mv, axes = "left")
)

## Full example
rtheta &lt;- runif(1, 0, 2 * pi)
rphi   &lt;- runif(1, 0, 2 * pi)
suppressWarnings(
  view_frame(
    basis = bas, data = dat_std, manip_var = mv,
    theta = rtheta, phi = rphi, basis_label = paste0("MyNm", 1:ncol(dat_std)), 
    aes_args = list(color = clas, shape = clas),
    identity_args = list(size = 1.5, alpha = .7))
)

</code></pre>

<hr>
<h2 id='view_manip_space'>Plot 2D projection frame and return the axes table.</h2><span id='topic+view_manip_space'></span>

<h3>Description</h3>

<p>Uses base graphics to plot the circle with axes representing
the projection frame. Returns the corresponding table. Only works for 2d
manual tours.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>view_manip_space(
  basis,
  manip_var,
  tilt = 0.1 * pi,
  basis_label = abbreviate(row.names(basis), 3),
  manip_col = "blue",
  manip_sp_col = "red",
  line_size = 0.6,
  text_size = 4
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="view_manip_space_+3A_basis">basis</code></td>
<td>
<p>A (p, d) orthonormal numeric matrix.
The linear combination the original variables contribute to projection space.
Required, no default.</p>
</td></tr>
<tr><td><code id="view_manip_space_+3A_manip_var">manip_var</code></td>
<td>
<p>Number of the column/dimension to rotate.</p>
</td></tr>
<tr><td><code id="view_manip_space_+3A_tilt">tilt</code></td>
<td>
<p>angle in radians to rotate the projection plane.
Defaults to .1 * pi.</p>
</td></tr>
<tr><td><code id="view_manip_space_+3A_basis_label">basis_label</code></td>
<td>
<p>Optional, character vector of <code>p</code> length, add name to the axes
in the frame, defaults to 3 letter abbriviation of the orginal variable names.</p>
</td></tr>
<tr><td><code id="view_manip_space_+3A_manip_col">manip_col</code></td>
<td>
<p>String of the color to highlight the <code>manip_var</code>.</p>
</td></tr>
<tr><td><code id="view_manip_space_+3A_manip_sp_col">manip_sp_col</code></td>
<td>
<p>Color to illustrate the z direction, orthogonal to the
projection plane.</p>
</td></tr>
<tr><td><code id="view_manip_space_+3A_line_size">line_size</code></td>
<td>
<p>The size of the lines of the unit circle and variable
contributions of the basis. Defaults to 1.</p>
</td></tr>
<tr><td><code id="view_manip_space_+3A_text_size">text_size</code></td>
<td>
<p>The size of the text labels of the variable
contributions of the basis. Defaults to 5.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot object of the basis.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)

dat_std &lt;- scale_sd(wine[, 2:6])
bas     &lt;- basis_pca(dat_std)
mv      &lt;- manip_var_of(bas)

view_manip_space(basis = bas, manip_var = mv)

view_manip_space(basis = bas, manip_var = mv,
                 tilt = 2/12 * pi, basis_label = paste0("MyNm", 1:ncol(dat_std)),
                 manip_col = "purple", manip_sp_col = "orange")
</code></pre>

<hr>
<h2 id='weather'>Sample dataset of daily weather observations from Canberra airport in Australia.</h2><span id='topic+weather'></span><span id='topic+weather_na.rm'></span>

<h3>Description</h3>

<p>One year of daily weather observations collected from the Canberra airport
in Australia was obtained from the Australian Commonwealth Bureau of
Meteorology and processed to create this sample dataset for illustrating
data mining using R and Rattle.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weather_na.rm
</code></pre>


<h3>Format</h3>

<p>A data frame of 354 observations of 20 variables. One year of
daily observations of weather variables at Canberra airport in Australia
between November 1, 2007 and October 31, 2008.
</p>

<ul>
<li><p> Date, The date of observation (Date class).
</p>
</li>
<li><p> MinTemp, The minimum temperature in degrees Celsius.
</p>
</li>
<li><p> MaxTemp, The maximum temperature in degrees Celsius.
</p>
</li>
<li><p> Rainfall, The amount of rainfall recorded for the day in mm.
</p>
</li>
<li><p> Evaporation, The &quot;Class A pan evaporation&quot; (mm) in the 24 hours to 9am.
</p>
</li>
<li><p> WindSpeed3pm, Wind speed (km/hr) averaged over 10 minutes prior to 3pm.
</p>
</li>
<li><p> Humid9am, Relative humidity (percent) at 9am.
</p>
</li>
<li><p> Humid3pm, Relative humidity (percent) at 3pm.
</p>
</li>
<li><p> Pressure9am, Atmospheric pressure (hpa) reduced to mean sea level at 9am.
</p>
</li>
<li><p> Pressure3pm, Atmospheric pressure (hpa) reduced to mean sea level at 3pm.
</p>
</li>
<li><p> Cloud9am, Fraction of sky obscured by cloud at 9am. This is measured in &quot;oktas&quot;, which are a unit of eighths. It records how many eighths of the sky are obscured by cloud. A 0 measure indicates completely clear sky whilst an 8 indicates that it is completely overcast.
</p>
</li>
<li><p> Cloud3pm, Fraction of sky obscured by cloud (in &quot;oktas&quot;: eighths) at 3pm. See Cloud9am for a description of the values.
</p>
</li>
<li><p> Temp9am, Temperature (degrees C) at 9am.
</p>
</li>
<li><p> Temp3pm, Temperature (degrees C) at 3pm.
</p>
</li>
<li><p> RISK_MM, The amount of rain. A kind of measure of the &quot;risk&quot;.
</p>
</li>
<li><p> RainToday, Factor: &quot;yes&quot; if precipitation (mm) in the 24 hours to 9am exceeds 1mm, otherwise 0.
</p>
</li>
<li><p> RainTomorrow, Factor: &quot;yes&quot; if it rained the following day, the target variable.
</p>
</li></ul>

<p>Copyright Commonwealth of Australia 2010,
Bureau of Meteorology.
Definitions adapted from http://www.bom.gov.au/climate/dwo/IDCJDW0000.shtml
</p>


<h3>Details</h3>

<p>The data has been processed to provide a target variable RainTomorrow
(whether there is rain on the following day - No/Yes) and a risk variable
<code>RISK_MM</code> (how much rain recorded in millimeters). Various transformations
were performed on the source data. The dataset is quite small and is useful
only for repeatable demonstration of various data science operations.
</p>
<p>This is a cleaned subset of <code>rattle::weather</code>.
</p>
<p>Replicating this dataset:
</p>
<div class="sourceCode"><pre>require("rattle")
d &lt;- rattle::weather[, c(1, 3:7, 9, 12:21, 23, 22, 24)]
d &lt;- d[complete.cases(d), ] ## Remove ~12 row-wise incomplete rows
d &lt;- as.data.frame(d)  ## Remove tibble dependency
weather_na.rm &lt;- d
## save(weather_na.rm, file = "./data/weather_na.rm.rda")
</pre></div>


<h3>Source</h3>

<p>Bureau of Meteorology, Commonwealth of Australia <a href="http://www.bom.gov.au/climate/data/">http://www.bom.gov.au/climate/data/</a>
</p>
<p>rattle, R package. G. Williams, 2020. rattle: Graphical User Interface for Data Science in R <a href="https://CRAN.R-project.org/package=rattle">https://CRAN.R-project.org/package=rattle</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
str(weather_na.rm)
dat  &lt;- scale_sd(weather_na.rm[, 2:18])
clas &lt;- weather_na.rm$RainTomorrow

bas &lt;- basis_pca(dat)
mv  &lt;- manip_var_of(bas)
mt  &lt;- manual_tour(bas, mv)

ggt &lt;- ggtour(mt, dat, angle = .2) +
  proto_default(aes_args = list(color = clas, shape = clas))

animate_plotly(ggt)

</code></pre>

<hr>
<h2 id='wine'>The wine dataset from the UCI Machine Learning Repository.</h2><span id='topic+wine'></span>

<h3>Description</h3>

<p>The wine dataset contains the results of a chemical analysis of wines grown
in a specific area of Italy. Three types of wine are represented in the 178
samples, with the results of 13 chemical analyses recorded for each sample.
The Type variable has been transformed into a categorical variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wine
</code></pre>


<h3>Format</h3>

<p>A data frame of 178 observations of target
class <code>Type</code> and 12 numeric variables:
</p>

<ul>
<li><p> Type, The type of wine, the target factor, 1 (59 obs),
2(71 obs), and 3 (48 obs).
</p>
</li>
<li><p> Alcohol, Alcohol
</p>
</li>
<li><p> Malic, Malic acid
</p>
</li>
<li><p> Ash, Ash
</p>
</li>
<li><p> Alcalinity, Alcalinity of ash
</p>
</li>
<li><p> Magnesium, Magnesium
</p>
</li>
<li><p> Phenols, Total phenols
</p>
</li>
<li><p> Flavanoids, Flavanoids
</p>
</li>
<li><p> Nonflavanoids, Nonflavanoid phenols
</p>
</li>
<li><p> Proanthocyanins, Proanthocyanins
</p>
</li>
<li><p> Color, Color intensity
</p>
</li>
<li><p> Hue, Hue
</p>
</li>
<li><p> Dilution, D280/OD315 of diluted wines
</p>
</li>
<li><p> Proline, Proline
</p>
</li></ul>



<h3>Details</h3>

<p>The data contains no missing values and consist of only numeric data, with a
three class target variable (Type) for classification.
</p>
<p>Replicating this dataset:
</p>
<div class="sourceCode"><pre>require("rattle")
str(rattle::wine)
## save(wine, file = "./data/wine.rda")
</pre></div>


<h3>Source</h3>

<p>rattle, R package. G. Williams, 2020. rattle: Graphical User Interface for Data Science in R <a href="https://CRAN.R-project.org/package=rattle">https://CRAN.R-project.org/package=rattle</a>
</p>
<p>PARVUS. M. Forina. et al. 1988. Elsevier, Amsterdam, PARVUS: An extendable package of programs for data exploration, classification and correlation. ISBN 0-44-430121z
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(spinifex)
str(wine)
dat  &lt;- scale_sd(wine[, 2:6])
clas &lt;- wine$Type

bas &lt;- basis_pca(dat)
mv  &lt;- manip_var_of(bas)
mt  &lt;- manual_tour(bas, mv)

ggt &lt;- ggtour(mt, dat, angle = .2) +
  proto_default(aes_args = list(color = clas, shape = clas))

animate_plotly(ggt)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
