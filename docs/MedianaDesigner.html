<!DOCTYPE html><html><head><title>Help for package MedianaDesigner</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {MedianaDesigner}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#MedianaDesigner-package'>
<p>Efficient Simulation-Based Power and Sample Size Calculations for a Broad Class of Late-Stage Clinical Trials</p></a></li>
<li><a href='#ADPopSel'>
<p>Simulation-based design of adaptive trials with data-driven population selection</p></a></li>
<li><a href='#ADPopSelApp'>
<p>Graphical user interface to design an adaptive trial with data-driven population selection</p></a></li>
<li><a href='#ADPopSelExample1'>
<p>Simulation-based design of an adaptive trial with population selection (normally distributed endpoint)</p></a></li>
<li><a href='#ADPopSelExample2'>
<p>Simulation-based design of an adaptive trial with population selection (binary endpoint)</p></a></li>
<li><a href='#ADPopSelExample3'>
<p>Simulation-based design of an adaptive trial with population selection (time-to-event endpoint)</p></a></li>
<li><a href='#ADRand'>
<p>Simulation-based design of adaptive trials with response-adaptive randomization</p></a></li>
<li><a href='#ADRandApp'>
<p>Graphical user interface to design an adaptive trial with data-driven population selection</p></a></li>
<li><a href='#ADRandExample'>
<p>Simulation-based design of dose-finding Phase II trials with response-adaptive randomization (normally distributed endpoint)</p></a></li>
<li><a href='#ADSSMod'>
<p>Simulation-based design of adaptive trials with data-driven sample size or event count re-estimation</p></a></li>
<li><a href='#ADSSModApp'>
<p>Graphical user interface to design an adaptive trial with data-driven sample size or event count re-estimation</p></a></li>
<li><a href='#ADSSModExample1'>
<p>Simulation-based design of an adaptive trial with sample size re-estimation (normally distributed endpoint)</p></a></li>
<li><a href='#ADSSModExample2'>
<p>Simulation-based design of an adaptive trial with sample size re-estimation (binary endpoint)</p></a></li>
<li><a href='#ADSSModExample3'>
<p>Simulation-based design of an adaptive trial with event count re-estimation (time-to-event endpoint)</p></a></li>
<li><a href='#ADTreatSel'>
<p>Simulation-based design of adaptive trials with data-driven treatment selection</p></a></li>
<li><a href='#ADTreatSelApp'>
<p>Graphical user interface to design an adaptive trial with data-driven treatment selection</p></a></li>
<li><a href='#ADTreatSelExample1'>
<p>Simulation-based design of an adaptive trial with treatment selection (normally distributed endpoint)</p></a></li>
<li><a href='#ADTreatSelExample2'>
<p>Simulation-based design of an adaptive trial with treatment selection (binary endpoint)</p></a></li>
<li><a href='#ADTreatSelExample3'>
<p>Simulation-based design of an adaptive trial with treatment selection (time-to-event endpoint)</p></a></li>
<li><a href='#ClustRand'>
<p>Simulation-based design of cluster-randomized trials</p></a></li>
<li><a href='#ClustRandApp'>
<p>Graphical user interface to design a cluster-randomized trial</p></a></li>
<li><a href='#ClustRandExample1'>
<p>Simulation-based design of a cluster-randomized trial (normally distributed endpoint)</p></a></li>
<li><a href='#ClustRandExample2'>
<p>Simulation-based design of a cluster-randomized trial (binary endpoint)</p></a></li>
<li><a href='#EventPred'>
<p>Simulation-based event prediction in trials with an event-driven design</p></a></li>
<li><a href='#EventPredApp'>
<p>Graphical user interface for event prediction in trials with an event-driven design</p></a></li>
<li><a href='#EventPredData'><p>Example data set for EventPred</p></a></li>
<li><a href='#EventPredExample'>
<p>Simulation-based event prediction in trials with an event-driven design (time-to- event endpoint)</p></a></li>
<li><a href='#EventPredPriorDistribution'>
<p>Calculation of the parameters of prior gamma distributions</p></a></li>
<li><a href='#FutRule'>
<p>Simulation-based selection of an optimal futility stopping rule at an interim analysis</p></a></li>
<li><a href='#FutRuleApp'>
<p>Graphical user interface for an optimal selection of a futility stopping rule at an interim analysis</p></a></li>
<li><a href='#FutRuleExample1'>
<p>Simulation-based selection of an optimal futility stopping rule (normally distributed endpoint)</p></a></li>
<li><a href='#FutRuleExample2'>
<p>Simulation-based selection of an optimal futility stopping rule (binary endpoint)</p></a></li>
<li><a href='#FutRuleExample3'>
<p>Simulation-based selection of an optimal futility stopping rule (time-to-event endpoint)</p></a></li>
<li><a href='#GenerateReport'>
<p>Simulation report</p></a></li>
<li><a href='#MultAdj'>
<p>Simulation-based design of traditional trials with multiple objectives</p></a></li>
<li><a href='#MultAdjApp'>
<p>Graphical user interface for power calculations in traditional trials with multiple objectives</p></a></li>
<li><a href='#MultAdjExample1'>
<p>Simulation-based power calculations in Phase III trials with multiple dose-placebo comparisons</p></a></li>
<li><a href='#MultAdjExample2'>
<p>Simulation-based power calculations in Phase III trials with multiple endpoints</p></a></li>
<li><a href='#MultAdjExample3'>
<p>Simulation-based power calculations in Phase III trials with multiple endpoints and multiple dose-placebo comparisons</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Power and Sample Size Calculations for Clinical Trials</td>
</tr>
<tr>
<td>Version:</td>
<td>0.13</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-08-27</td>
</tr>
<tr>
<td>Author:</td>
<td>Alex Dmitrienko [aut, cre]</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.2)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.12.10), RcppNumerical, methods, officer, flextable,
devEMF, mvtnorm, shiny, shinydashboard, shinyMatrix, foreach,
parallel, doParallel, MASS, rootSolve, lme4, lmerTest, pbkrtest</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, doRNG</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppEigen, RcppNumerical</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alex Dmitrienko &lt;admitrienko@mediana.us&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>
  Efficient simulation-based power and sample size calculations are supported for a
  broad class of late-stage clinical trials. The following modules are included in
  the package:
  Adaptive designs with data-driven sample size or event count re-estimation,
  Adaptive designs with data-driven treatment selection,
  Adaptive designs with data-driven population selection,
  Optimal selection of a futility stopping rule,
  Event prediction in event-driven trials,
  Adaptive trials with response-adaptive randomization (experimental module),
  Traditional trials with multiple objectives (experimental module).
  Traditional trials with cluster-randomized designs (experimental module).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-28 01:14:59 UTC; victordmitrienko</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-28 04:00:05 UTC</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/medianasoft/MedianaDesigner">https://github.com/medianasoft/MedianaDesigner</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/medianasoft/MedianaDesigner/issues">https://github.com/medianasoft/MedianaDesigner/issues</a></td>
</tr>
</table>
<hr>
<h2 id='MedianaDesigner-package'>
Efficient Simulation-Based Power and Sample Size Calculations for a Broad Class of Late-Stage Clinical Trials
</h2><span id='topic+MedianaDesigner-package'></span><span id='topic+MedianaDesigner'></span>

<h3>Description</h3>

<p>The MedianaDesigner package provides efficient simulation-based power and sample size calculations for a broad class of late-stage clinical trials, including Phase II trials, seamless Phase II/III trials and Phase III trials:
</p>

<ul>
<li><p> Adaptive trials with data-driven sample size or event count re-estimation.
</p>
</li>
<li><p> Adaptive trials with data-driven treatment selection.
</p>
</li>
<li><p> Adaptive trials with data-driven population selection.
</p>
</li>
<li><p> Optimal selection of a futility stopping rule.
</p>
</li>
<li><p> Blinded event prediction in event-driven trials.
</p>
</li>
<li><p> Adaptive trials with response-adaptive randomization (experimental module).
</p>
</li>
<li><p> Traditional trials with multiple objectives (experimental module).
</p>
</li>
<li><p> Traditional trials with cluster-randomized designs (experimental module).
</p>
</li></ul>

<p>For more information on this package, visit <a href="https://mediana.us/free-software/">https://mediana.us/free-software/</a>. The technical manuals with a detailed description of the statistical methodology implemented in each module are available at <a href="https://medianasoft.github.io/MedianaDesigner">https://medianasoft.github.io/MedianaDesigner</a>. Additional information and multiple case studies can be found in the online manual at <a href="https://medianasoft.github.io/MedianaDesigner">https://medianasoft.github.io/MedianaDesigner</a>.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> MedianaDesigner</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 0.13</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2023-08-27</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL-3
</td>
</tr>

</table>

<p>Key functions included in the package:
</p>

<ul>
<li> <p><code><a href="#topic+ADSSMod">ADSSMod</a></code>: Simulation-based design of adaptive trials with data-driven sample size or event count re-estimation.
</p>
</li>
<li> <p><code><a href="#topic+ADSSModApp">ADSSModApp</a></code>: Graphical user interface for designing adaptive trials with data-driven sample size or event count re-estimation.
</p>
</li>
<li> <p><code><a href="#topic+ADTreatSel">ADTreatSel</a></code>: Simulation-based design of adaptive trials with data-driven treatment selection.
</p>
</li>
<li> <p><code><a href="#topic+ADTreatSelApp">ADTreatSelApp</a></code>: Graphical user interface for designing adaptive trials with data-driven treatment selection.
</p>
</li>
<li> <p><code><a href="#topic+ADPopSel">ADPopSel</a></code>: Simulation-based design of adaptive trials with data-driven population selection.
</p>
</li>
<li> <p><code><a href="#topic+ADPopSelApp">ADPopSelApp</a></code>: Graphical user interface for designing adaptive trials with data-driven population selection.
</p>
</li>
<li> <p><code><a href="#topic+FutRule">FutRule</a></code>: Simulation-based selection of an optimal futility stopping rule at an interim analysis.
</p>
</li>
<li> <p><code><a href="#topic+FutRuleApp">FutRuleApp</a></code>: Graphical user interface for an optimal selection of a futility stopping rule.
</p>
</li>
<li> <p><code><a href="#topic+EventPred">EventPred</a></code>: Blinded simulation-based event prediction in trials with an event-driven design.
</p>
</li>
<li> <p><code><a href="#topic+EventPredPriorDistribution">EventPredPriorDistribution</a></code>: Calculation of the parameters of prior gamma distributions.
</p>
</li>
<li> <p><code><a href="#topic+EventPredApp">EventPredApp</a></code>: Graphical user interface for event prediction.
</p>
</li>
<li> <p><code><a href="#topic+ADRand">ADRand</a></code>: Simulation-based design of adaptive trials with response-adaptive randomization.
</p>
</li>
<li> <p><code><a href="#topic+ADRandApp">ADRandApp</a></code>: Graphical user interface for designing adaptive trials with response-adaptive randomization.
</p>
</li>
<li> <p><code><a href="#topic+MultAdj">MultAdj</a></code>: Simulation-based design of traditional trials with multiple objectives.
</p>
</li>
<li> <p><code><a href="#topic+MultAdjApp">MultAdjApp</a></code>: Graphical user interface for power calculations in traditional trials with multiple objectives.
</p>
</li>
<li> <p><a href="#topic+ClustRand">ClustRand</a>: Simulation-based design of cluster-randomized trials.
</p>
</li>
<li> <p><a href="#topic+ClustRandApp">ClustRandApp</a>: Graphical user interface for power calculations in cluster-randomized trials.
</p>
</li>
<li> <p><code><a href="#topic+GenerateReport">GenerateReport</a></code>: Simulation report for any module.
</p>
</li></ul>

<p>The package comes with one example data set:
</p>

<ul>
<li> <p><code><a href="#topic+EventPredData">EventPredData</a></code>: Example data set to illustrate event prediction in event-driven trials.
</p>
</li></ul>

<p>Multiple case studies are included in this vignette to illustrate the use of this package for designing clinical trials with data-driven design elements:
</p>

<ul>
<li> <p><a href="#topic+ADSSModExample1">ADSSModExample1</a>: Simulation-based design of an adaptive trial with sample size re-estimation (normally distributed endpoint).
</p>
</li>
<li> <p><a href="#topic+ADSSModExample2">ADSSModExample2</a>: Simulation-based design of an adaptive trial with sample size re-estimation (binary endpoint).
</p>
</li>
<li> <p><a href="#topic+ADSSModExample3">ADSSModExample3</a>: Simulation-based design of an adaptive trial with event count re-estimation (time-to-event endpoint).
</p>
</li>
<li> <p><a href="#topic+ADTreatSelExample1">ADTreatSelExample1</a>: Simulation-based design of an adaptive trial with treatment selection (normally distributed endpoint).
</p>
</li>
<li> <p><a href="#topic+ADTreatSelExample2">ADTreatSelExample2</a>: Simulation-based design of an adaptive trials with treatment selection (binary endpoint).
</p>
</li>
<li> <p><a href="#topic+ADTreatSelExample3">ADTreatSelExample3</a>: Simulation-based design of an adaptive trials with treatment selection (time-to-event endpoint).
</p>
</li>
<li> <p><a href="#topic+ADPopSelExample1">ADPopSelExample1</a>: Simulation-based design of an adaptive trial with population selection (normally distributed endpoint).
</p>
</li>
<li> <p><a href="#topic+ADPopSelExample2">ADPopSelExample2</a>: Simulation-based design of an adaptive trials with population selection (binary endpoint).
</p>
</li>
<li> <p><a href="#topic+ADPopSelExample3">ADPopSelExample3</a>: Simulation-based design of an adaptive trials with population selection (time-to-event endpoint).
</p>
</li>
<li> <p><a href="#topic+FutRuleExample1">FutRuleExample1</a>: Simulation-based selection of an optimal futility stopping rule (normally distributed endpoint).
</p>
</li>
<li> <p><a href="#topic+FutRuleExample2">FutRuleExample2</a>: Simulation-based selection of an optimal futility stopping rule (binary endpoint).
</p>
</li>
<li> <p><a href="#topic+FutRuleExample3">FutRuleExample3</a>: Simulation-based selection of an optimal futility stopping rule (time-to-event endpoint).
</p>
</li>
<li> <p><a href="#topic+EventPredExample">EventPredExample</a>: Simulation-based event prediction in trials with an event-driven design (time-to-event endpoint).
</p>
</li>
<li> <p><a href="#topic+ADRandExample">ADRandExample</a>: Simulation-based design of an adaptive dose-finding trial with response-adaptive randomization (normally distributed endpoint).
</p>
</li>
<li> <p><a href="#topic+MultAdjExample1">MultAdjExample1</a>: Simulation-based power calculations in Phase III trials with multiple dose-placebo comparisons.
</p>
</li>
<li> <p><a href="#topic+MultAdjExample2">MultAdjExample2</a>: Simulation-based power calculations in Phase III trials with multiple endpoints.
</p>
</li>
<li> <p><a href="#topic+MultAdjExample3">MultAdjExample3</a>: Simulation-based power calculations in Phase III trials with multiple endpoints and multiple dose-placebo comparisons.
</p>
</li>
<li> <p><a href="#topic+ClustRandExample1">ClustRandExample1</a>: Simulation-based design of a cluster-randomized trial (normally distributed endpoint).
</p>
</li>
<li> <p><a href="#topic+ClustRandExample2">ClustRandExample2</a>: Simulation-based design of a cluster-randomized trial (binary endpoint).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Mediana (www.mediana.us). We would like to thank multiple individuals, including Thomas Brechenmacher (IQVIA), Douglas McNair (Gates Foundation) and Thomas Peppard (Certara), for their feedback that helped us improve the package and add new features.
</p>


<h3>References</h3>

<p>Ahn, C., Heo, M., Zhang, S. (2015). <em>Sample Size Calculations for Clustered and Longitudinal Outcomes in Clinical Research</em>. Chapman and Hall/CRC.
</p>
<p>Alosh, M., Bretz, F., Huque, M. (2014). Advanced multiplicity adjustment methods in clinical trials. <em>Statistics in Medicine</em>. 33, 693-713.
</p>
<p>Bagiella, E., Heitjan, D.F. (2001). Predicting analysis times in randomized clinical trials. <em>Statistics in Medicine</em>. 20, 2055-2063.
</p>
<p>Chuang-Stein, C., Kirby, S., French, J., Kowalski, K., Marshall, S., Smith, M. K. (2011). A quantitative approach for making go/no-go decisions in drug development. <em>Drug Information Journal</em>. 45, 187-202.
</p>
<p>Dmitrienko, A., Bretz, F., Westfall, P.H., et al. (2009). Multiple testing methodology.  <em>Multiple testing problems in pharmaceutical statistics</em>. Dmitrienko, A., Tamhane, A.C., Bretz, F. (editors). New York: Chapman and Hall/CRC Press.
</p>
<p>Dmitrienko, A., Tamhane, A.C. (2011). Mixtures of multiple testing procedures for gatekeeping applications in clinical trials. <em>Statistics in Medicine</em>. 30, 1473-1488.
</p>
<p>Dmitrienko, A., D'Agostino, R. Sr. (2013). Traditional multiplicity adjustment methods in clinical trials. <em>Statistics in Medicine</em>. 32, 5172-5218.
</p>
<p>Dmitrienko, A., Kordzakhia, G., Brechenmacher, T. (2016). Mixture-based gatekeeping procedures for multiplicity problems with multiple sequences of hypotheses. <em>Journal of Biopharmaceutical Statistics</em>. 26, 758-780.
</p>
<p>Dmitrienko, A., Paux, G. (2017). Subgroup analysis in clinical trials. <em>Clinical Trial Optimization Using R</em>. Dmitrienko, A., Pulkstenis, E. (editors). Chapman and Hall/CRC Press, New York.
</p>
<p>Dmitrienko, A., D'Agostino, R.B. (2018). Multiplicity considerations in clinical trials. <em>New England Journal of Medicine</em>. 378, 2115-2122.
</p>
<p>Hayes, R.J., Moulton, L.H. (2009). emphCluster Randomised Trials: A Practical Approach. Chapman and Hall/CRC.
</p>
<p>Herson, J. (1979). Predictive probability early termination plans for Phase II clinical trials. <em>Biometrics</em>. 35, 775-783.
</p>
<p>Kordzakhia, G., Brechenmacher, T., Ishida, E., Dmitrienko, A., Zheng, W.W., Lie, D.F. (2018). An enhanced mixture method for constructing gatekeeping procedures in clinical trials. <em>Journal of Biopharmaceutical Statistics</em>. 28, 113-128.
</p>
<p>Millen, B., Dmitrienko, A., Ruberg, S., Shen, L. (2012). A statistical framework for decision making in confirmatory multi-population tailoring clinical trials. <em>Drug Information Journal</em>. 46, 647-656.
</p>
<p>Wang, D., Cui, L., Zhang, L., Yang, B. (2014). An ROC approach to evaluate interim go/no-go decision-making quality with application to futility stopping in the clinical trial designs. <em>New Developments in Statistical Modeling, Inference and Application</em>. Jin, Z., Liu, M., Luo, X. (editors). Springer, New York. 121-147.
</p>
<p>Wassmer, G., Brannath, W. (2016). <em>Group Sequential and Confirmatory Adaptive Designs in Clinical Trials</em>. New York: Springer.
</p>

<hr>
<h2 id='ADPopSel'>
Simulation-based design of adaptive trials with data-driven population selection
</h2><span id='topic+ADPopSel'></span><span id='topic+ADPopSelC'></span><span id='topic+ADPopSelSingleCore'></span>

<h3>Description</h3>

<p>This function performs a simulation-based evaluation of operating characteristics for adaptive trials with data-driven population selection. A two-arm Phase III clinical trial with two pre-defined patient populations (overall population and subpopulation of biomarker-positive patients) and two interim analyses is assumed. The first interim analysis supports early stopping for futility in the overall population and the second interim analysis identifies the most promising patient population or populations. For examples of the function call, see <a href="#topic+ADPopSelExample1">ADPopSelExample1</a>, <a href="#topic+ADPopSelExample2">ADPopSelExample2</a> or <a href="#topic+ADPopSelExample3">ADPopSelExample3</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ADPopSel(parameters)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ADPopSel_+3A_parameters">parameters</code></td>
<td>
<p>List of the trial design and other parameters. The required elements are defined below:
</p>

<ul>
<li> <p><code>endpoint_type</code>: Character value defining the primary endpoint's type. Possible values:  
</p>

<ul>
<li> <p><code>"Normal"</code>: Normally distributed endpoint.
</p>
</li>
<li> <p><code>"Binary"</code>: Binary endpoint.
</p>
</li>
<li> <p><code>"Time-to-event"</code>: Time-to-event endpoint.
</p>
</li></ul>


</li>
<li> <p><code>direction</code>: Character value defining the direction of favorable outcome. Possible values: <code>"Higher"</code> (a higher value of the endpoint indicates a more favorable outcome) and <code>"Lower"</code> (a lower value of the endpoint indicates a more favorable outcome).    
</p>
</li>
<li> <p><code>sample_size</code>: Integer vector with two elements defining the number of enrolled patients in the two trial arms (control and experimental treatment). Each element must be positive.
</p>
</li>
<li> <p><code>control_mean</code>: Numeric value defining the mean of the primary endpoint in the control arm. This parameter is required only with normally distributed endpoints (<code>endpoint_type="Normal"</code>).
</p>
</li>
<li> <p><code>control_sd</code>: Numeric value defining the standard deviation of the primary endpoint in the control arm. This value must be positive. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>treatment_mean</code>: Numeric value defining the mean of the primary endpoint in the experimental treatment arm. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>treatment_sd</code>: Numeric value defining the standard deviation of the primary endpoint in the experimental treatment arm. This value must be positive. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>control_rate</code>: Numeric value defining the proportion or response rate for the primary endpoint in the control arm. This value must be between 0 and 1. This parameter is required only with binary endpoints <br /> (<code>endpoint_type="Binary"</code>).
</p>
</li>
<li> <p><code>treatment_rate</code>: Numeric value defining the proportion or response rate for the primary endpoint in the experimental treatment arm. This value must be between 0 and 1. This parameter is required only with binary endpoints.
</p>
</li>
<li> <p><code>control_time</code>: Numeric value defining the median time, e.g., the median survival time, for the exponentially distributed primary endpoint in the control arm. This value must be positive. This parameter is required only with time-to-event endpoints (<code>endpoint_type="Time-to-event"</code>).
</p>
</li>
<li> <p><code>treatment_time</code>: Numeric value defining the median time, e.g., the median survival time, for the exponentially distributed primary endpoint in the experimental treatment arm. This value must be positive. This parameter is required only with time-to-event endpoints.
</p>
</li>
<li> <p><code>info_frac</code>: Numeric vector with three elements defining the information fractions at the first interim analysis, at the second interim analysis and at the final analysis. The first and second elements must be between 0 and 1, and the third element must be 1.
</p>
</li>
<li> <p><code>event_count</code>: Numeric value defining the total number of events at the final analysis. This value must be positive. This parameter is required only with time-to-event endpoints.
</p>
</li>
<li> <p><code>futility_threshold</code>: Numeric value defining the futility threshold for conditional power at the first interim analysis. This value must be positive.
</p>
</li>
<li> <p><code>influence</code>: Numeric value defining the influence threshold for selecting the most promising population or populations at the second interim analysis. This value must be positive.
</p>
</li>
<li> <p><code>interaction</code>: Numeric value defining the interaction threshold for selecting the most promising population or populations at the second interim analysis. This value must be greater than 1.
</p>
</li>
<li> <p><code>dropout_rate</code>: Numeric value defining the patient dropout rate. With normally distributed endpoints and binary endpoints, a uniform patient dropout process is assumed and thus this parameter defines the fraction of patients that will be excluded from the interim and final analyses. With time-to-event endpoints, the time to patient dropout is assumed to follow an exponential distribution and this parameter defines the annual dropout rate. This value must be between 0 and 1.
</p>
</li>
<li> <p><code>enrollment_period</code>: Numeric value defining the length of the patient enrollment period. This value must be positive. This parameter is required only with time-to-event endpoints.
</p>
</li>
<li> <p><code>enrollment_parameter</code>: Numeric value defining the median enrollment time. The patient enrollment process is assumed to be governed by a truncated exponential distribution and this parameter defines the time point by which 50% of the patients are enrolled into the trial. This value must be between 0 and the length of the patient enrollment period. This parameter is required only with time-to-event endpoints..
</p>
</li>
<li> <p><code>alpha</code>: Numeric value defining the overall one-sided Type I error rate. The default value is 0.025.
</p>
</li>
<li> <p><code>random_seed</code>: Integer value defining the random number generator seed. The default value is 49283.
</p>
</li>
<li> <p><code>nsims</code>: Integer value defining the number of simulation runs.
</p>
</li>
<li> <p><code>ncores</code>: Integer value defining the number of cores for parallel calculations. The number of cores cannot exceed the maximum available number of cores. The default value is 1. 
</p>
</li></ul>

</td></tr>
</table>


<h3>Value</h3>

<p>The function returns an object of class &lsquo;<span class="samp">&#8288;ADPopSelResults&#8288;</span>&rsquo;. This object is a list with the following components:
</p>
<table>
<tr><td><code>parameters</code></td>
<td>
<p>List containing the user-specified parameters.</p>
</td></tr>
<tr><td><code>sim_results</code></td>
<td>
<p>Data frame containing key descriptive statistics for each simulation run.</p>
</td></tr>
<tr><td><code>sim_summary</code></td>
<td>
<p>List containing the key operating characteristics of the adaptive design.</p>
</td></tr>
</table>
<p>A detailed summary of the simulation results can be created using the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADPopSelApp">ADPopSelApp</a></code>
</p>

<hr>
<h2 id='ADPopSelApp'>
Graphical user interface to design an adaptive trial with data-driven population selection
</h2><span id='topic+ADPopSelApp'></span>

<h3>Description</h3>

<p>This function creates a web application with a Shiny-based graphical user interface to facilitate the process of designing Phase III adaptive trials with two interim analysis to enable a futility assessment and data-driven selection of the most promising patient population or populations. The application supports the same functionality as the <code><a href="#topic+ADPopSel">ADPopSel</a></code> function. For an example of the function call, see <a href="#topic+ADPopSelExample1">ADPopSelExample1</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ADPopSelApp()
</code></pre>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value, called for side effects</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADPopSel">ADPopSel</a></code>
</p>

<hr>
<h2 id='ADPopSelExample1'>
Simulation-based design of an adaptive trial with population selection (normally distributed endpoint)
</h2><span id='topic+ADPopSelExample1'></span>

<h3>Description</h3>

<p>Consider a seamless Phase II/Phase III or Phase III trial with a normally distributed primary efficacy endpoint (a larger value of this endpoint indicates a more favorable outcome). The efficacy and safety profiles of a single dose or regimen of an experimental treatment will be evaluated versus a control in two patient populations, namely, the overall population of patients and a pre-defined subset of patients with a biomarker-positive status. An adaptive design with two interim analyses will be used in the trial (the first interim analysis may correspond to the end of the Phase II portion of the trial) to support the following decision rules:
</p>

<ul>
<li><p> Futility stopping rule will be applied at the first interim analysis (IA1). The trial will be terminated for futility if the predicted probability of success (conditional power) in the overall population is too low
</p>
</li>
<li><p> Population selection rule will be applied at the second interim analysis (IA2). The most promising population or populations will be selected for the final analysis (FA).
</p>
</li></ul>
 
<p>The following design parameters will be assumed:
</p>

<ul>
<li><p> A balanced design with 220 enrolled patients per arm will be utilized in this trial.
</p>
</li>
<li><p> The prevalence of biomarker-positive patients in the overall population is expected to be 50%.
</p>
</li>
<li><p> The patient dropout rate at the end of the treatment period is equal to 10%.
</p>
</li>
<li><p> The information fractions at IA1 and IA2 are set to 40% and 60%, i.e., the first and second interim looks will be taken after 40% and 60% of the patients complete the treatment period or drop out of the trial before completing the treatment period. 
</p>
</li></ul>

<p>In addition, the following decision rules will be considered at the two interim analyses:
</p>

<ul>
<li><p> The futility threshold at IA1 is set to 20%.
</p>
</li>
<li><p> The influence and interaction thresholds used in the population selection rule are set to 0.1 and 1.3. The conditions based on these thresholds are applied sequentially to determine if the final analysis should be performed in the overall population only, in the biomarker-positive population only or simultaneously in both populations. 
</p>
</li></ul>

<p>The treatment effect assumptions need to be specified within the biomarker-positive population as well as the complementary population (biomarker-negative population). A common effect will be assumed in the control arm, i.e., the mean and standard deviation of the primary efficacy endpoint will be 0 and 1, respectively, in the biomarker-positive and biomarker-negative populations. A stronger treatment effect will be assumed in the biomarker-positive subset compared to the complementary subset, i.e., the mean of 0.4 in biomarker-positive patients and the mean 0.25 in biomarker-negative patients with a common standard deviation of 1.
</p>
<p>Key operating characteristics of the proposed adaptive design with population selection will be evaluated using the <code><a href="#topic+ADPopSel">ADPopSel</a></code> function based on 10,000 simulation runs. To invoke this function, a list of all design and decision rule parameters (<code>parameters</code>) needs to be created as shown below. A comprehensive simulation report for this adaptive design can be generated by calling the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function and a graphical user interface can be launched using the <code><a href="#topic+ADPopSelApp">ADPopSelApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADPopSel">ADPopSel</a></code>, <code><a href="#topic+ADPopSelExample2">ADPopSelExample2</a></code>, <code><a href="#topic+ADPopSelExample3">ADPopSelExample3</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Endpoint type
parameters$endpoint_type = "Normal"

# Direction of favorable outcome
parameters$direction = "Higher"

# Number of enrolled patients (control, treatment) 
parameters$sample_size = c(220, 220)

# Prevalence of biomarker-positive patients in the overall population
parameters$prevalence = 0.5

# Patient dropout rate
parameters$dropout_rate = 0.1

# Mean and SD in the control arm (biomarker-negative, biomarker-positive)
parameters$control_mean = c(0, 0)
parameters$control_sd = c(1, 1)

# Mean and SD in the treatment arm (biomarker-negative, biomarker-positive)
parameters$treatment_mean = c(0.25, 0.4)
parameters$treatment_sd = c(1, 1)

# Information fractions at IA1, IA2, FA
parameters$info_frac = c(0.4, 0.6, 1)

# Futility threshold for conditional power at IA1
parameters$futility_threshold = 0.2

# Influence threshold at IA2
parameters$influence = 0.1

# Interaction threshold at IA2
parameters$interaction = 1.3

# One-sided alpha level
parameters$alpha = 0.025

# Number of simulations, you should prefer more
parameters$nsims = 100

# Number of cores for parallel calculations
parameters$ncores = 1

# Run simulations to compute operating characteristics
results = ADPopSel(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("ADPopSel Normally distributed endpoint.docx", fileext=".docx"))
</code></pre>

<hr>
<h2 id='ADPopSelExample2'>
Simulation-based design of an adaptive trial with population selection (binary endpoint)
</h2><span id='topic+ADPopSelExample2'></span>

<h3>Description</h3>

<p>Consider a seamless Phase II/Phase III or Phase III trial with a binary primary efficacy endpoint with a higher proportion indicating a more favorable outcome. The efficacy and safety profiles of a single dose or regimen of an experimental treatment will be evaluated versus a control in two patient populations (overall population and biomarker-positive population). An adaptive design with two interim analyses will be used in the trial (the first interim analysis may correspond to the end of the Phase II portion of the trial) to support the following decision rules:
</p>

<ul>
<li><p> Futility stopping rule will be applied at the first interim analysis (IA1). The trial will be terminated for futility if the predicted probability of success (conditional power) in the overall population is too low
</p>
</li>
<li><p> Population selection rule will be applied at the second interim analysis (IA2). The most promising population or populations will be selected for the final analysis (FA).
</p>
</li></ul>
 
<p>The following design parameters will be assumed:
</p>

<ul>
<li><p> A balanced design with 120 enrolled patients per arm will be utilized in this trial.
</p>
</li>
<li><p> The prevalence of biomarker-positive patients in the overall population is expected to be 40%.    
</p>
</li>
<li><p> The patient dropout rate at the end of the treatment period is equal to 15%.
</p>
</li>
<li><p> The information fractions at IA1 and IA2 are set to 40% and 60%, i.e., the first and second interim looks will be taken after 40% and 60% of the patients complete the treatment period or drop out of the trial before completing the treatment period. 
</p>
</li></ul>

<p>In addition, the following decision rules will be considered at the two interim analyses:
</p>

<ul>
<li><p> The futility threshold at IA1 is set to 20%.
</p>
</li>
<li><p> The influence and interaction thresholds used in the population selection rule are set to 0.1 and 1.3. The conditions based on these thresholds are applied sequentially to determine if the final analysis should be performed in the overall population only, in the biomarker-positive population only or simultaneously in both populations. 
</p>
</li></ul>

<p>The treatment effect assumptions are specified within the biomarker-positive and biomarker-negative populations. A common effect will be assumed in the control arm, i.e., the response rate of 10% regardless of the biomarker status, and a strong differential treatment effect will be considered. Specifically, a fairly weak response rate of 25% will be assumed in patients with a biomarker-negative status and a much stronger effect with a response rate of 40% in patients with a biomarker-positive status. 
</p>
<p>Key operating characteristics of the proposed adaptive design with population selection will be evaluated using the <code><a href="#topic+ADPopSel">ADPopSel</a></code> function based on 10,000 simulation runs. To invoke this function, a list of all design and decision rule parameters (<code>parameters</code>) needs to be created as shown below. A comprehensive simulation report for this adaptive design can be generated by calling the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function and a graphical user interface can be launched using the <code><a href="#topic+ADPopSelApp">ADPopSelApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADPopSel">ADPopSel</a></code>, <code><a href="#topic+ADPopSelExample1">ADPopSelExample1</a></code>, <code><a href="#topic+ADPopSelExample3">ADPopSelExample3</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Endpoint type
parameters$endpoint_type = "Binary"

# Direction of favorable outcome
parameters$direction = "Higher"

# Number of enrolled patients (control, treatment) 
parameters$sample_size = c(120, 120)

# Prevalence of biomarker-positive patients in the overall population
parameters$prevalence = 0.4

# Patient dropout rate
parameters$dropout_rate = 0.15

# Response rate in the control arm (biomarker-negative, biomarker-positive)
parameters$control_rate = c(0.1, 0.1)

# Response rate in the treatment arm (biomarker-negative, biomarker-positive)
parameters$treatment_rate = c(0.25, 0.4)

# Information fractions at IA1, IA2, FA
parameters$info_frac = c(0.4, 0.6, 1)

# Futility threshold for conditional power at IA1
parameters$futility_threshold = 0.2

# Influence threshold at IA2
parameters$influence = 0.1

# Interaction threshold at IA2
parameters$interaction = 1.3

# One-sided alpha level
parameters$alpha = 0.025

# Number of simulations, you should prefer more
parameters$nsims = 100

# Number of cores for parallel calculations
parameters$ncores = 1

# Run simulations to compute key characteristics
results = ADPopSel(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("ADPopSel Binary endpoint.docx", fileext=".docx"))
</code></pre>

<hr>
<h2 id='ADPopSelExample3'>
Simulation-based design of an adaptive trial with population selection (time-to-event endpoint)
</h2><span id='topic+ADPopSelExample3'></span>

<h3>Description</h3>

<p>Consider a seamless Phase II/Phase III or Phase III trial with a binary primary efficacy endpoint. The efficacy and safety profiles of a single dose or regimen of an experimental treatment will be evaluated versus a control in two patient populations (overall population and biomarker-positive population). An adaptive design with two interim analyses will be used in the trial (the first interim analysis may correspond to the end of the Phase II portion of the trial) to support the following decision rules:
</p>

<ul>
<li><p> Futility stopping rule will be applied at the first interim analysis (IA1). The trial will be terminated for futility if the predicted probability of success (conditional power) in the overall population is too low
</p>
</li>
<li><p> Population selection rule will be applied at the second interim analysis (IA2). The most promising population or populations will be selected for the final analysis (FA).
</p>
</li></ul>
 
<p>The following design parameters will be assumed:
</p>

<ul>
<li><p> A balanced design with 230 enrolled patients per arm will be utilized in this trial.
</p>
</li>
<li><p> The prevalence of biomarker-positive patients in the overall population is expected to be 40%.    
</p>
</li>
<li><p> The target number of events in the overall population at FA is set to 300. In addition, the target number of events needs to be defined in the biomarker-positive population in case this population is chosen for the final assessment, this value is equal to 150.
</p>
</li>
<li><p> The annual patient dropout rate is equal to 5% (the time to patient dropout is assumed to follow an exponential distribution).
</p>
</li>
<li><p> The length of the patient enrollment period is 12 months and the median enrollment time is expected to be 8 months.
</p>
</li>
<li><p> The information fractions at IA1 and IA2 are set to 40% and 60%, i.e., the first and second interim looks will be taken after 40% and 60% of the patients complete the treatment period or drop out of the trial before completing the treatment period. 
</p>
</li></ul>

<p>In addition, the following decision rules will be considered at the two interim analyses:
</p>

<ul>
<li><p> The futility threshold at IA1 is set to 10%.
</p>
</li>
<li><p> The influence and interaction thresholds used in the population selection rule are set to 0.1 and 1.3. The conditions based on these thresholds are applied sequentially to determine if the final analysis should be performed in the overall population only, in the biomarker-positive population only or simultaneously in both populations. 
</p>
</li></ul>

<p>The treatment effect assumptions are specified within the biomarker-positive and biomarker-negative populations. A common effect will be assumed in the control arm, i.e., the median time of 7.5 months regardless of the biomarker status. The median time of 9.5 months in the treated patients with a biomarker-negative status indicates a weaker treatment effect (hazard ratio of 0.79) whereas the median time of 11 months in the treated patients with a biomarker-positive status corresponds to a much stronger treatment effect (hazard ratio of 0.68). 
</p>
<p>Key operating characteristics of the proposed adaptive design with population selection will be evaluated using the <code><a href="#topic+ADPopSel">ADPopSel</a></code> function based on 10,000 simulation runs. To invoke this function, a list of all design and decision rule parameters (<code>parameters</code>) needs to be created as shown below. A comprehensive simulation report for this adaptive design can be generated by calling the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function and a graphical user interface can be launched using the <code><a href="#topic+ADPopSelApp">ADPopSelApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADPopSel">ADPopSel</a></code>, <code><a href="#topic+ADPopSelExample1">ADPopSelExample1</a></code>, <code><a href="#topic+ADPopSelExample2">ADPopSelExample2</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Endpoint type
parameters$endpoint_type = "Time-to-event"

# Direction of favorable outcome
parameters$direction = "Higher"

# Number of enrolled patients (control, treatment) 
parameters$sample_size = c(230, 230)

# Prevalence of biomarker-positive patients in the overall population
parameters$prevalence = 0.4

# Annual patient dropout rate
parameters$dropout_rate = 0.05

# Median times in the control arm (biomarker-negative, biomarker-positive)
parameters$control_time = c(7.5, 7.5)

# Median times in the treatment arm (biomarker-negative, biomarker-positive)
parameters$treatment_time = c(9.5, 11)

# Information fractions at IA1, IA2, FA
parameters$info_frac = c(0.4, 0.6, 1)

# Target event count at FA (overall, biomarker-positive)
parameters$event_count = c(300, 150)

# Futility threshold for conditional power at IA1
parameters$futility_threshold = 0.1

# Influence threshold at IA2
parameters$influence = 0.1

# Interaction threshold at IA2
parameters$interaction = 1.3

# Enrollment period
parameters$enrollment_period = 12

# Median enrollment time
parameters$enrollment_parameter = 8

# One-sided alpha level
parameters$alpha = 0.025

# Number of simulations, you should prefer more
parameters$nsims = 100

# Number of cores for parallel calculations
parameters$ncores = 1

# Run simulations to compute operating characteristics
results = ADPopSel(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("ADPopSel Time-to-event endpoint.docx", fileext=".docx"))
</code></pre>

<hr>
<h2 id='ADRand'>
Simulation-based design of adaptive trials with response-adaptive randomization
</h2><span id='topic+ADRand'></span><span id='topic+ADRandC'></span><span id='topic+ADRandSingleCore'></span><span id='topic+ComputeDRFunctionParameters'></span><span id='topic+DRFunction'></span>

<h3>Description</h3>

<p>This function performs a simulation-based evaluation of operating characteristics for multi-stage adaptive Phase II trials that employ response-adaptive randomization. Patients are assigned to receive placebo or one of several doses of the experimental treatment. The efficacy data at the end of each stage are used to update the randomization scheme for the next stage with the ultimate goal of assigning most patients to the most effective doses. For an example of the function call, see <a href="#topic+ADRandExample">ADRandExample</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ADRand(parameters)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ADRand_+3A_parameters">parameters</code></td>
<td>
<p>List of the trial design and other parameters. The required elements are defined below: 
</p>

<ul>
<li> <p><code>endpoint_type</code>: Character value defining the primary endpoint's type. Possible values:  
</p>

<ul>
<li> <p><code>"Normal"</code>: Normally distributed endpoint.
</p>
</li></ul>


</li>
<li> <p><code>direction</code>: Character value defining the direction of favorable outcome. Possible values: <code>"Higher"</code> (a higher value of the endpoint indicates a more favorable outcome) and <code>"Lower"</code> (a lower value of the endpoint indicates a more favorable outcome).  
</p>
</li>
<li> <p><code>dose_levels</code>: Integer vector defining the dose levels in the trial (0 corresponds to the placebo group). Each element must be non-negative.
</p>
</li>
<li> <p><code>stage_sample_size</code>: Integer vector defining the total number of patients enrolled in each stage. Each element must be positive.
</p>
</li>
<li> <p><code>control_mean</code>: Numeric value defining the mean of the primary endpoint in the placebo arm. 
</p>
</li>
<li> <p><code>control_sd</code>: Numeric value defining the standard deviation of the primary endpoint in the placebo arm. This value must be positive. 
</p>
</li>
<li> <p><code>treatment_mean</code>: Numeric vector defining the mean of the primary endpoint in each dosing arm.
</p>
</li>
<li> <p><code>treatment_sd</code>: Numeric vector defining the standard deviation of the primary endpoint in each dosing arm.
</p>
</li>
<li> <p><code>treatment_period</code>: Numeric value defining the length of the treatment period in the trial.
</p>
</li>
<li> <p><code>ratio_placebo</code>: Numeric value defining the fixed randomization ratio in the placebo arm. This value must be between 0 and 1.
</p>
</li>
<li> <p><code>balance</code>: Numeric value defining the degree of balance for adaptive randomization. This value must be between 0 and 3.    
</p>
</li>
<li> <p><code>delta</code>: Numeric value defining the threshold for a clinically meaningful improvement over placebo.
</p>
</li>
<li> <p><code>exponential_model_parameter</code>: Numeric value defining the non-linear parameter (delta) for the exponential dose-response model used in the MCPMod method. This value must be positive.
</p>
</li>
<li> <p><code>emax_model_parameter</code>: Numeric value defining the non-linear parameter (ED50) for the Emax dose-response model used in the MCPMod method. This value must be positive.
</p>
</li>
<li> <p><code>logistic_model_parameters</code>: Numeric vector with two elements defining the non-linear parameters (ED50 and delta) for the logistic dose-response model used in the MCPMod method. The values must be positive.
</p>
</li>
<li> <p><code>enrollment_period</code>: Numeric value defining the length of the patient enrollment period. This value must be positive. 
</p>
</li>
<li> <p><code>enrollment_parameter</code>: Numeric value defining the median enrollment time. The patient enrollment process is assumed to be governed by a truncated exponential distribution and this parameter defines the time point by which 50% of the patients are enrolled into the trial. This value must be between 0 and the length of the patient enrollment period.
</p>
</li>
<li> <p><code>dropout_rate</code>: Numeric value defining the patient dropout rate. A uniform patient dropout process is assumed and thus this parameter defines the fraction of patients that will be excluded from the interim and final analyses. This value must be between 0 and 1.
</p>
</li>
<li><p>alpha: Numeric value defining the overall one-sided Type I error rate. The default value is 0.025.
</p>
</li>
<li> <p><code>random_seed</code>: Integer value defining the random number generator seed. The default value is 49283.
</p>
</li>
<li> <p><code>nsims</code>: Integer value defining the number of simulation runs.
</p>
</li>
<li> <p><code>ncores</code>: Integer value defining the number of cores for parallel calculations. The number of cores cannot exceed the maximum available number of cores. The default value is 1. 
</p>
</li></ul>

</td></tr>
</table>


<h3>Value</h3>

<p>The function returns an object of class &lsquo;<span class="samp">&#8288;ADRandResults&#8288;</span>&rsquo;. This object is a list with the following components:
</p>
<table>
<tr><td><code>parameters</code></td>
<td>
<p>List containing the user-specified parameters.</p>
</td></tr>
<tr><td><code>sim_results</code></td>
<td>
<p>List with multiple data frames containing key descriptive statistics for each simulation run.</p>
</td></tr>
</table>
<p>A detailed summary of the simulation results can be created using the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADRandApp">ADRandApp</a></code>
</p>

<hr>
<h2 id='ADRandApp'>
Graphical user interface to design an adaptive trial with data-driven population selection
</h2><span id='topic+ADRandApp'></span>

<h3>Description</h3>

<p>This function creates a web application with a Shiny-based graphical user interface to facilitate the process of designing dose-finding Phase II trials with response-adaptive randomization. The application supports the same functionality as the <code><a href="#topic+ADRand">ADRand</a></code> function. For an example of the function call, see <a href="#topic+ADRandExample">ADRandExample</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ADRandApp()
</code></pre>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value, called for side effects</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADRand">ADRand</a></code>
</p>

<hr>
<h2 id='ADRandExample'>
Simulation-based design of dose-finding Phase II trials with response-adaptive randomization (normally distributed endpoint)
</h2><span id='topic+ADRandExample'></span>

<h3>Description</h3>

<p>Consider a Phase II trial to be conducted to evaluate the efficacy and safety profiles of several doses of an experimental treatment compared to placebo. The trial will be conducted for the treatment of cognitive impairment in patients with schizophrenia. The primary endpoint is a continuous, normally distributed endpoint (MCCB overall composite score) with a larger value indicating favorable effect. The treatment effect will be evaluated at 3 months after randomization, i.e., the treatment period will 3-month long. A multi-stage adaptive design will be employed in the trial to evaluate the dose-response relationship for the treatment while assigning most patients to the best performing doses. This will be accomplished using a response-adaptive randomization approach. 
</p>
<p>The following design parameters will be used in this example:
</p>

<ul>
<li><p> A total of 320 patients will be enrolled in the trial. 
</p>
</li>
<li><p> Patients will be randomly assigned to placebo and four doses of the experimental treatment (20 mg, 50 mg, 100 mg or 250 mg). 
</p>
</li>
<li><p> A four-stage design will be utilized with 80 patients enrolled in each stage. A balanced randomization approach will be used in the first stage of the trial and the randomization ratios in the dosing groups will be updated at the end of each stage. The randomization ratio for the placebo group will be fixed at 20% throughout the trial. 
</p>
</li>
<li><p> Patients will be enrolled over the period of 24 months with the median enrollment time (time point by which 50% of the patients will be enrolled into the trial) of 18 months.
</p>
</li>
<li><p> The patient dropout rate will be set to 10% at the end of the treatment period.
</p>
</li></ul>

<p>Dose-response modeling at the end of each stage will be performed using the MCPMod approach based on four dose-response models (linear, exponential, Emax and logistic models). Non-linear parameters of these models will be specified as shown below (note that no parameter needs to be specified for the linear model). The rule for updating the randomization scheme will be based on the posterior probability of achieving a clinically meaningful improvement over placebo in each dosing group. The threshold for clinically meaningful improvement will be set at 1.5. 
</p>
<p>Operating characteristics of the response-adaptive design will be evaluated using the <code><a href="#topic+ADRand">ADRand</a></code> function. As shown below, a list of all design and decision rule parameters (<code>parameters</code>) will be created and then passed to this function. It's important to note that, due to the use of Bayesian calculations, the simulation process will be rather slow. It is recommended to take advantage of parallel calculations by setting the number of cores (<code>ncores</code>) to a larger value as shown below. 
</p>
<p>A simulation report for this adaptive design can be created by calling the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function. The same functionality is also available via a Shiny-based application that can be launched by calling the <code><a href="#topic+ADRandApp">ADRandApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADRand">ADRand</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters

parameters = list()

# Endpoint type
parameters$endpoint_type = "Normal"

# Direction of favorable outcome
parameters$direction = "Higher"

# Dose levels in the trial 
parameters$dose_levels = c(0, 20, 50, 100, 250)

# Total number of enrolled patients in each trial stage
parameters$stage_sample_size = c(80, 80, 80, 80)

# Length of the treatment period (months)
parameters$treatment_period = 3

# Length of the patient enrollment period (months)
parameters$enrollment_period = 24

# Median enrollment time (months)
parameters$enrollment_parameter = 18

# Patient dropout rate
parameters$dropout_rate = 0.1

# Mean and SD for the primary endpoint in the placebo group
parameters$control_mean = 1.5
parameters$control_sd = 4

# Mean and SD for the primary endpoint in the dosing groups
parameters$treatment_mean = c(2, 2.5, 3, 3.5)
parameters$treatment_sd = c(4, 4, 4, 4)

# Fixed randomization ratio in the placebo group
parameters$ratio_placebo = 0.2

# Threshold for clinically meaningful improvement over placebo
parameters$delta = 1.5

# Balance parameter for adaptive randomization
parameters$balance = 2

# Non-linear parameters of the candidate dose-response models used in the MCPMod method 
# for modeling the dose-response relationship

# Non-linear parameter of the exponential model (delta)
parameters$exponential_model_parameter = 100

# Non-linear parameter of the Emax model (ED50)
parameters$emax_model_parameter = 200

# Non-linear parameters of the logistic model (ED50 and delta)
parameters$logistic_model_parameters = c(125, 25)

# One-sided Type I error rate
parameters$alpha = 0.025

# Number of cores for parallel calculations
parameters$ncores = 1

# Number of simulations, you should prefer more (use large values!)
parameters$nsims = 10

# Remove this parameter in your code:
parameters$withoutCharts = TRUE

# Run simulations to compute operating characteristics
results = ADRand(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("ADRand Normally distributed endpoint.docx", fileext=".docx"))
</code></pre>

<hr>
<h2 id='ADSSMod'>
Simulation-based design of adaptive trials with data-driven sample size or event count re-estimation
</h2><span id='topic+ADSSMod'></span><span id='topic+ADSSModC'></span><span id='topic+ADSSModSingleCore'></span>

<h3>Description</h3>

<p>This function performs a simulation-based evaluation of operating characteristics for adaptive trials with data-driven sample size re-estimation (normally distributed or binary endpoints) or event count re-estimation (time-to-event endpoint). A two-arm Phase III clinical trial with two interim analyses is assumed. The first interim analysis supports early stopping for futility and the second interim analysis supports an option to increase the number of patients or number of events in the trial. For examples of the function call, see <a href="#topic+ADSSModExample1">ADSSModExample1</a>, <a href="#topic+ADSSModExample2">ADSSModExample2</a> or <a href="#topic+ADSSModExample3">ADSSModExample3</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ADSSMod(parameters)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ADSSMod_+3A_parameters">parameters</code></td>
<td>
<p>List of the trial design and other parameters. The required elements are defined below: 
</p>

<ul>
<li> <p><code>endpoint_type</code>: Character value defining the primary endpoint's type. Possible values:  
</p>

<ul>
<li> <p><code>"Normal"</code>: Normally distributed endpoint.
</p>
</li>
<li> <p><code>"Binary"</code>: Binary endpoint.
</p>
</li>
<li> <p><code>"Time-to-event"</code>: Time-to-event endpoint.
</p>
</li></ul>


</li>
<li> <p><code>direction</code>: Character value defining the direction of favorable outcome. Possible values: <code>"Higher"</code> (a higher value of the endpoint indicates a more favorable outcome) and <code>"Lower"</code> (a lower value of the endpoint indicates a more favorable outcome).    
</p>
</li>
<li> <p><code>sample_size</code>: Integer vector with two elements defining the number of enrolled patients in the two trial arms (control and experimental treatment). Each element must be positive.
</p>
</li>
<li> <p><code>control_mean</code>: Numeric value defining the mean of the primary endpoint in the control arm. This parameter is required only with normally distributed endpoints (<code>endpoint_type="Normal"</code>).
</p>
</li>
<li> <p><code>control_sd</code>: Numeric value defining the standard deviation of the primary endpoint in the control arm. This value must be positive. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>treatment_mean</code>: Numeric value defining the mean of the primary endpoint in the experimental treatment arm. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>treatment_sd</code>: Numeric value defining the standard deviation of the primary endpoint in the experimental treatment arm. This value must be positive. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>control_rate</code>: Numeric value defining the proportion or response rate for the primary endpoint in the control arm. This value must be between 0 and 1. This parameter is required only with binary endpoints <br /> (<code>endpoint_type="Binary"</code>).
</p>
</li>
<li> <p><code>treatment_rate</code>: Numeric value defining the proportion or response rate for the primary endpoint in the experimental treatment arm. This value must be between 0 and 1. This parameter is required only with binary endpoints.
</p>
</li>
<li> <p><code>control_time</code>: Numeric value defining the median time, e.g., the median survival time, for the exponentially distributed primary endpoint in the control arm. This value must be positive. This parameter is required only with time-to-event endpoints (<code>endpoint_type="Time-to-event"</code>).
</p>
</li>
<li> <p><code>treatment_time</code>: Numeric value defining the median time, e.g., the median survival time, for the exponentially distributed primary endpoint in the experimental treatment arm. This value must be positive. This parameter is required only with time-to-event endpoints.
</p>
</li>
<li> <p><code>info_frac</code>: Numeric vector with four elements defining the information fractions at the first interim analysis, at the second interim analysis, at the final analysis before sample size/event count adjustment and at the final analysis after sample size/event count adjustment adjustment. The first and second elements must be between 0 and 1, the third element must be 1 and the fourth element must be greater than 1.
</p>
</li>
<li> <p><code>event_count</code>: Numeric value defining the total number of events at the final analysis before event count adjustment. This value must be positive. This parameter is required only with time-to-event endpoints.
</p>
</li>
<li> <p><code>futility_threshold</code>: Numeric value defining the futility threshold for conditional power at the first interim analysis. This value must be positive.
</p>
</li>
<li> <p><code>promising_interval</code>: Numeric vector with two elements defining the promising interval for conditional power at the second interim analysis. Each element must be between 0 and 1.
</p>
</li>
<li> <p><code>target_power</code>: Numeric value defining the target conditional power for increasing the number of patients or events at the second interim analysis. This value must be between 0 and 1.
</p>
</li>
<li> <p><code>dropout_rate</code>: Numeric value defining the patient dropout rate. With normally distributed endpoints and binary endpoints, a uniform patient dropout process is assumed and thus this parameter defines the fraction of patients that will be excluded from the interim and final analyses. With time-to-event endpoints, the time to patient dropout is assumed to follow an exponential distribution and this parameter defines the annual dropout rate. This value must be between 0 and 1.
</p>
</li>
<li> <p><code>enrollment_period</code>: Numeric value defining the length of the patient enrollment period. This value must be positive. This parameter is required only with time-to-event endpoints.
</p>
</li>
<li> <p><code>enrollment_parameter</code>: Numeric value defining the median enrollment time. The patient enrollment process is assumed to be governed by a truncated exponential distribution and this parameter defines the time point by which 50% of the patients are enrolled into the trial. This value must be between 0 and the length of the patient enrollment period. This parameter is required only with time-to-event endpoints..
</p>
</li>
<li><p>alpha: Numeric value defining the overall one-sided Type I error rate. The default value is 0.025.
</p>
</li>
<li> <p><code>random_seed</code>: Integer value defining the random number generator seed. The default value is 49283.
</p>
</li>
<li> <p><code>nsims</code>: Integer value defining the number of simulation runs.
</p>
</li>
<li> <p><code>ncores</code>: Integer value defining the number of cores for parallel calculations. The number of cores cannot exceed the maximum available number of cores. The default value is 1. 
</p>
</li></ul>

</td></tr>
</table>


<h3>Value</h3>

<p>The function returns an object of class &lsquo;<span class="samp">&#8288;ADSSModResults&#8288;</span>&rsquo;. This object is a list with the following components:
</p>
<table>
<tr><td><code>parameters</code></td>
<td>
<p>List containing the user-specified parameters.</p>
</td></tr>
<tr><td><code>sim_results</code></td>
<td>
<p>Data frame containing key descriptive statistics for each simulation run.</p>
</td></tr>
<tr><td><code>sim_summary</code></td>
<td>
<p>List containing the key operating characteristics of the adaptive design.</p>
</td></tr>
</table>
<p>A detailed summary of the simulation results can be created using the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADSSModApp">ADSSModApp</a></code>
</p>

<hr>
<h2 id='ADSSModApp'>
Graphical user interface to design an adaptive trial with data-driven sample size or event count re-estimation
</h2><span id='topic+ADSSModApp'></span>

<h3>Description</h3>

<p>This function creates a Shiny-based graphical user interface to facilitate the process of designing Phase III adaptive trials with two interim analysis to enable a futility assessment and sample size/event count re-estimation. The application supports the same functionality as the <code><a href="#topic+ADSSMod">ADSSMod</a></code> function. For an example of the function call, see <a href="#topic+ADSSModExample1">ADSSModExample1</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ADSSModApp()
</code></pre>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value, called for side effects</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADSSMod">ADSSMod</a></code>
</p>

<hr>
<h2 id='ADSSModExample1'>
Simulation-based design of an adaptive trial with sample size re-estimation (normally distributed endpoint)
</h2><span id='topic+ADSSModExample1'></span>

<h3>Description</h3>

<p>Consider a seamless Phase II/Phase III or Phase III trial with a normally distributed primary efficacy endpoint. A larger value of the endpoint corresponds to a more favorable outcome. A single dose or regimen of an experimental treatment will be compared to a control. An adaptive design with two interim analyses will be employed in the trial (the first interim analysis may correspond to the end of the Phase II portion of the trial). The following decision rules will be applied at the interim looks:
</p>

<ul>
<li><p> Futility stopping rule will be applied at the first interim analysis (IA1). The trial may be stopped due to futility if a significant treatment effect is unlikely to be established at the final analysis (FA), i.e., the predicted probability of success (conditional power) is very low at this interim analysis.
</p>
</li>
<li><p> Sample size re-estimation rule will be applied at the second interim analysis (IA2). The total number of patients in the trial will be increased to boost the probability of success if the predicted probability of success (conditional power) is lower than expected at this interim analysis.
</p>
</li></ul>
 
<p>The following design parameters will be assumed:
</p>

<ul>
<li><p> A balanced design with 120 enrolled patients per arm will be utilized.
</p>
</li>
<li><p> The patient dropout rate is equal to 5%, i.e., 5% of the patients are expected to be lost to follow up by the end of the treatment period.
</p>
</li>
<li><p> The information fractions at IA1 and IA2 are set to 40% and 60%, i.e., the first and second interim looks will be taken after 40% and 60% of the patients complete the treatment period or drop out of the trial before completing the treatment period. 
</p>
</li></ul>

<p>In addition, the following decision rules will be considered at the two interim analyses:
</p>

<ul>
<li><p> The futility threshold at IA1 is set to 10%, i.e., the trial will be terminated for futility if conditional power does not exceed 10%.
</p>
</li>
<li><p> The promising interval at IA2 ranges from 50% to 90%, i.e., the sample size in the trial will be increased if conditional power is greater than 50% and less than 90%.
</p>
</li>
<li><p> The target conditional power at IA2 is set to 90%, i.e., the sample size will be increased to ensure conditional power of 90% up a pre-defined cap. The maximum increase is equal to 30% of the original sample size.
</p>
</li></ul>

<p>Finally, the mean effects in the control and treatment arms are assumed to be equal to 0 and 0.3, respectively, with a common standard deviation of 1.
</p>
<p>Key operating characteristics of this adaptive design will be evaluated using the <code><a href="#topic+ADSSMod">ADSSMod</a></code> function with 10,000 simulation runs. To invoke this function, a list of all design and decision rule parameters (<code>parameters</code>) needs to be created as shown below. A comprehensive simulation report can be generated by calling the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function and a graphical user interface can be launched using the <code><a href="#topic+ADSSModApp">ADSSModApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADSSMod">ADSSMod</a></code>, <code><a href="#topic+ADSSModExample2">ADSSModExample2</a></code>, <code><a href="#topic+ADSSModExample3">ADSSModExample3</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Endpoint type
parameters$endpoint_type = "Normal"

# Direction of favorable outcome
parameters$direction = "Higher"

# Number of enrolled patients (control, treatment) 
parameters$sample_size = c(120, 120)

# Patient dropout rate
parameters$dropout_rate = 0.05

# Mean and SD in the control arm 
parameters$control_mean = 0
parameters$control_sd = 1

# Mean and SD in the treatment arm 
parameters$treatment_mean = 0.3
parameters$treatment_sd = 1

# Information fractions at IA1, IA2, FA (before sample size adjustment) 
# and FA (after sample size adjustment)
parameters$info_frac = c(0.4, 0.6, 1, 1.3)

# Futility threshold for conditional power at IA1
parameters$futility_threshold = 0.1

# Promising interval for conditional power at IA2
parameters$promising_interval = c(0.5, 0.9)

# Target conditional power for increasing the sample size at IA2
parameters$target_power = 0.9

# One-sided alpha level
parameters$alpha = 0.025

# Number of simulations, you should prefer more
parameters$nsims = 100

# Number of cores for parallel calculations
parameters$ncores = 1

# Run simulations to compute operating characteristics
results = ADSSMod(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("ADSSMod Normally distributed endpoint.docx", fileext=".docx"))
</code></pre>

<hr>
<h2 id='ADSSModExample2'>
Simulation-based design of an adaptive trial with sample size re-estimation (binary endpoint)
</h2><span id='topic+ADSSModExample2'></span>

<h3>Description</h3>

<p>Consider a seamless Phase II/Phase III or Phase III trial where the primary efficacy endpoint is binary with a higher proportion indicating a more favorable outcome. A single dose or regimen of an experimental treatment will be compared to a control. An adaptive design with two interim analyses will be employed in the trial (the first interim analysis may correspond to the end of the Phase II portion of the trial). The following decision rules will be applied at the interim looks:
</p>

<ul>
<li><p> Futility stopping rule will be applied at the first interim analysis (IA1). The trial may be stopped due to futility if a significant treatment effect is unlikely to be established at the final analysis (FA).
</p>
</li>
<li><p> Sample size re-estimation rule will be applied at the second interim analysis (IA2). The total number of patients in the trial will be increased to boost the probability of success if conditional power is lower than expected at this interim analysis.
</p>
</li></ul>
 
<p>The following design parameters will be assumed:
</p>

<ul>
<li><p> A trial design with a 1:2 randomization ratio will be used. A hundred patients will be enrolled in the control arm and twice as many patients will be enrolled in the experimental treatment arm.
</p>
</li>
<li><p> The patient dropout rate at the end of the treatment period is equal to 10%.
</p>
</li>
<li><p> The information fractions at IA1 and IA2 are set to 40% and 60%. 
</p>
</li></ul>

<p>In addition, the following decision rules will be considered at the two interim analyses:
</p>

<ul>
<li><p> The futility threshold at IA1 is set to 20%.
</p>
</li>
<li><p> The promising interval at IA2 ranges from 50% to 90%.
</p>
</li>
<li><p> The target conditional power at IA2 is set to 90% and the total sample size in the trial could be increased up to 40%.
</p>
</li></ul>

<p>The response rates for the primary efficacy endpoint are assumed to be 10% (control arm)and 25% (experimental treatment arm).
</p>
<p>Key operating characteristics of this adaptive design will be evaluated using the <code><a href="#topic+ADSSMod">ADSSMod</a></code> function with 10,000 simulation runs. To invoke this function, a list of all design and decision rule parameters (<code>parameters</code>) needs to be created as shown below. A comprehensive simulation report can be generated by calling the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function and a graphical user interface can be launched using the <code><a href="#topic+ADSSModApp">ADSSModApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADSSMod">ADSSMod</a></code>, <code><a href="#topic+ADSSModExample1">ADSSModExample1</a></code>, <code><a href="#topic+ADSSModExample3">ADSSModExample3</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Endpoint type
parameters$endpoint_type = "Binary"

# Direction of favorable outcome
parameters$direction = "Higher"

# Number of enrolled patients (control, treatment) 
parameters$sample_size = c(100, 200)

# Patient dropout rate
parameters$dropout_rate = 0.1

# Response rate in the control arm 
parameters$control_rate = 0.1

# Response rate in the treatment arm 
parameters$treatment_rate = 0.25

# Information fractions at IA1, IA2, FA (before sample size adjustment) 
# and FA (after sample size adjustment)
parameters$info_frac = c(0.4, 0.6, 1, 1.4)

# Futility threshold for conditional power at IA1
parameters$futility_threshold = 0.2

# Promising interval for conditional power at IA2
parameters$promising_interval = c(0.5, 0.9)

# Target conditional power for increasing the sample size at IA2
parameters$target_power = 0.9

# One-sided alpha level
parameters$alpha = 0.025

# Number of simulations, you should prefer more
parameters$nsims = 100

# Number of cores for parallel calculations
parameters$ncores = 1

# Run simulations to compute operating characteristics
results = ADSSMod(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("ADSSMod Binary endpoint.docx", fileext=".docx"))
</code></pre>

<hr>
<h2 id='ADSSModExample3'>
Simulation-based design of an adaptive trial with event count re-estimation (time-to-event endpoint)
</h2><span id='topic+ADSSModExample3'></span>

<h3>Description</h3>

<p>Consider a seamless Phase II/Phase III or Phase III trial where the primary efficacy endpoint is a time-to-event endpoint, e.g., the time to disease progression or death.
A single regimen of an experimental treatment will be compared to a control. An adaptive design with two interim analyses will be employed in the trial (the first interim analysis may correspond to the end of the Phase II portion of the trial). The following decision rules will be applied at the interim looks:
</p>

<ul>
<li><p> Futility stopping rule will be applied at the first interim analysis (IA1). The trial may be stopped due to futility if a significant treatment effect is unlikely to be established at the final analysis (FA).
</p>
</li>
<li><p> Event count re-estimation rule will be applied at the second interim analysis (IA2). The target number of events of interest will be increased to improve the probability of success if conditional power is lower than expected at this interim analysis.
</p>
</li></ul>
 
<p>The following design parameters will be assumed:
</p>

<ul>
<li><p> A balanced design with 220 enrolled patients per arm will be used in the trial. 
</p>
</li>
<li><p> The original number of events at FA is set to 300.
</p>
</li>
<li><p> The annual patient dropout rate is equal to 5% (the time to patient dropout is assumed to follow an exponential distribution).
</p>
</li>
<li><p> The length of the patient enrollment period is 12 months and the median enrollment time is anticipated to be 8 months, i.e., 50% of the patients are expected to be enrolled into the trial by the 8-month milestone.
</p>
</li>
<li><p> The information fractions at IA1 and IA2 are set to 40% and 60%, i.e., the first and second interim analyses will be performed after 40% and 60% of the original number of events have been accrued. 
</p>
</li></ul>

<p>In addition, the following decision rules will be considered at the two interim analyses:
</p>

<ul>
<li><p> The futility threshold at IA1 is set to 10%.
</p>
</li>
<li><p> The promising interval at IA2 ranges from 50% to 90%.
</p>
</li>
<li><p> The target conditional power at IA2 is set to 90% and the target number of events could be increased up to 30%.
</p>
</li></ul>

<p>The median event times, e.g., median survival times, are assumed to be 7.5 months and 10.5 months in the control and experimental treatment arms, respectively. If the time to the event of interest is exponentially distributed, these assumptions correspond to a hazard ratio of 0.71.
</p>
<p>Key operating characteristics of this adaptive design will be evaluated using the <code><a href="#topic+ADSSMod">ADSSMod</a></code> function with 10,000 simulation runs. To invoke this function, a list of all design and decision rule parameters (<code>parameters</code>) needs to be created as shown below. A comprehensive simulation report can be generated by calling the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function and a graphical user interface can be launched using the <code><a href="#topic+ADSSModApp">ADSSModApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADSSMod">ADSSMod</a></code>, <code><a href="#topic+ADSSModExample1">ADSSModExample1</a></code>, <code><a href="#topic+ADSSModExample2">ADSSModExample2</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Endpoint type
parameters$endpoint_type = "Time-to-event"

# Direction of favorable outcome
parameters$direction = "Higher"

# Number of enrolled patients (control, treatment) 
parameters$sample_size = c(220, 220)

# Annual patient dropout rate
parameters$dropout_rate = 0.05

# Median time in the control arm 
parameters$control_time = 7.5

# Median time in the treatment arm 
parameters$treatment_time = 10.5

# Target event count at FA (before event count adjustment)
parameters$event_count = 300

# Information fractions at IA1, IA2, FA (before event count adjustment) 
# and FA (after event count adjustment)
parameters$info_frac = c(0.4, 0.6, 1, 1.3)

# Futility threshold for conditional power at IA1
parameters$futility_threshold = 0.1

# Promising interval for conditional power at IA2
parameters$promising_interval = c(0.5, 0.9)

# Target conditional power for increasing the number of events at IA2
parameters$target_power = 0.9

# Enrollment period
parameters$enrollment_period = 12

# Median enrollment time
parameters$enrollment_parameter = 8

# One-sided alpha level
parameters$alpha = 0.025

# Number of simulations, you should prefer more
parameters$nsims = 100

# Number of cores for parallel calculations
parameters$ncores = 1

# Run simulations to compute operating characteristics
results = ADSSMod(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("ADSSMod Time-to-event endpoint.docx", fileext=".docx"))
</code></pre>

<hr>
<h2 id='ADTreatSel'>
Simulation-based design of adaptive trials with data-driven treatment selection
</h2><span id='topic+ADTreatSel'></span><span id='topic+ADTreatSelC'></span><span id='topic+ADTreatSelSingleCore'></span>

<h3>Description</h3>

<p>This function performs a simulation-based evaluation of operating characteristics for adaptive trials with data-driven treatment selection. A multi-arm Phase III clinical trial with several doses or regimens of an experimental treatment versus control and two interim analyses is assumed. The first interim analysis supports early stopping for futility and the second interim analysis enables adaptive treatment selection to identify the best performing treatment. For examples of the function call, see <a href="#topic+ADTreatSelExample1">ADTreatSelExample1</a>, <a href="#topic+ADTreatSelExample2">ADTreatSelExample2</a> or <a href="#topic+ADTreatSelExample3">ADTreatSelExample3</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ADTreatSel(parameters)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ADTreatSel_+3A_parameters">parameters</code></td>
<td>
<p>List of the trial design and other parameters. The required elements are defined below:
</p>

<ul>
<li> <p><code>endpoint_type</code>: Character value defining the primary endpoint's type. Possible values:  
</p>

<ul>
<li> <p><code>"Normal"</code>: Normally distributed endpoint.
</p>
</li>
<li> <p><code>"Binary"</code>: Binary endpoint.
</p>
</li>
<li> <p><code>"Time-to-event"</code>: Time-to-event endpoint.
</p>
</li></ul>


</li>
<li> <p><code>direction</code>: Character value defining the direction of favorable outcome. Possible values: <code>"Higher"</code> (a higher value of the endpoint indicates a more favorable outcome) and <code>"Lower"</code> (a lower value of the endpoint indicates a more favorable outcome).    
</p>
</li>
<li> <p><code>sample_size</code>: Integer vector defining the number of enrolled patients in the trial arms (control and multiple experimental treatments). Each element must be positive.
</p>
</li>
<li> <p><code>control_mean</code>: Numeric value defining the mean of the primary endpoint in the control arm. This parameter is required only with normally distributed endpoints (<code>endpoint_type="Normal"</code>).
</p>
</li>
<li> <p><code>control_sd</code>: Numeric value defining the standard deviation of the primary endpoint in the control arm. This value must be positive. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>treatment_mean</code>: Numeric vector defining the means of the primary endpoint in the experimental treatment arms. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>treatment_sd</code>: Numeric vector defining the standard deviations of the primary endpoint in the experimental treatment arms. Each element must be positive. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>control_rate</code>: Numeric value defining the proportion or response rate for the primary endpoint in the control arm. This value must be between 0 and 1. This parameter is required only with binary endpoints <br /> (<code>endpoint_type="Binary"</code>).
</p>
</li>
<li> <p><code>treatment_rate</code>: Numeric vector defining the proportions or response rates for the primary endpoint in the experimental treatment arms. Each element must be between 0 and 1. This parameter is required only with binary endpoints.
</p>
</li>
<li> <p><code>control_time</code>: Numeric value defining the median time, e.g., the median survival time, for the exponentially distributed primary endpoint in the control arm. This value must be positive. This parameter is required only with time-to-event endpoints (<code>endpoint_type="Time-to-event"</code>).
</p>
</li>
<li> <p><code>treatment_time</code>: Numeric vector defining the median times, e.g., the median survival times, for the exponentially distributed primary endpoint in the experimental treatment arms. Each element must be positive. This parameter is required only with time-to-event endpoints.
</p>
</li>
<li> <p><code>info_frac</code>: Numeric vector with three elements defining the information fractions at the first interim analysis, at the second interim analysis and at the final analysis. The first and second elements must be between 0 and 1, and the third element must be 1.
</p>
</li>
<li> <p><code>event_count</code>: Numeric value defining the total number of events at the final analysis. This value must be positive. This parameter is required only with time-to-event endpoints.
</p>
</li>
<li> <p><code>futility_threshold</code>: Numeric value defining the futility threshold for conditional power at the first interim analysis. This value must be positive.
</p>
</li>
<li> <p><code>dropout_rate</code>: Numeric value defining the patient dropout rate. With normally distributed endpoints and binary endpoints, a uniform patient dropout process is assumed and thus this parameter defines the fraction of patients that will be excluded from the interim and final analyses. With time-to-event endpoints, the time to patient dropout is assumed to follow an exponential distribution and this parameter defines the annual dropout rate. This value must be between 0 and 1.
</p>
</li>
<li> <p><code>enrollment_period</code>: Numeric value defining the length of the patient enrollment period. This value must be positive. This parameter is required only with time-to-event endpoints.
</p>
</li>
<li> <p><code>enrollment_parameter</code>: Numeric value defining the median enrollment time. The patient enrollment process is assumed to be governed by a truncated exponential distribution and this parameter defines the time point by which 50% of the patients are enrolled into the trial. This value must be between 0 and the length of the patient enrollment period. This parameter is required only with time-to-event endpoints..
</p>
</li>
<li> <p><code>treatment_count</code>: Integer value defining the number of treatments to be selected at the second interim analysis. This value must range between 1 and the total number of treatments in the trial.
</p>
</li>
<li> <p><code>mult_test</code>: Character value defining the multiple testing procedure to be used in the trial. Possible values:  
</p>

<ul>
<li> <p><code>"Bonferroni"</code>: Bonferroni multiple testing procedure.
</p>
</li>
<li> <p><code>"Holm"</code>: Holm multiple testing procedure.
</p>
</li>
<li> <p><code>"Hochberg"</code>: Hochberg multiple testing procedure.
</p>
</li></ul>

 <p><code>alpha</code>: Numeric value defining the overall one-sided Type I error rate. The default value is 0.025.
</p>
 <p><code>random_seed</code>: Integer value defining the random number generator seed. The default value is 49283.
</p>
 <p><code>nsims</code>: Integer value defining the number of simulation runs.
</p>
 <p><code>ncores</code>: Integer value defining the number of cores for parallel calculations. The number of cores cannot exceed the maximum available number of cores. The default value is 1. 

</p>
</li></ul>

</td></tr>
</table>


<h3>Value</h3>

<p>The function returns an object of class &lsquo;<span class="samp">&#8288;ADTreatSelResults&#8288;</span>&rsquo;. This object is a list with the following components:
</p>
<table>
<tr><td><code>parameters</code></td>
<td>
<p>List containing the user-specified parameters.</p>
</td></tr>
<tr><td><code>sim_results</code></td>
<td>
<p>Data frame containing key descriptive statistics for each simulation run.</p>
</td></tr>
<tr><td><code>sim_summary</code></td>
<td>
<p>List containing the key operating characteristics of the adaptive design.</p>
</td></tr>
</table>
<p>A detailed summary of the simulation results can be created using the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADTreatSelApp">ADTreatSelApp</a></code>
</p>

<hr>
<h2 id='ADTreatSelApp'>
Graphical user interface to design an adaptive trial with data-driven treatment selection
</h2><span id='topic+ADTreatSelApp'></span>

<h3>Description</h3>

<p>This function creates a web application with a Shiny-based graphical user interface to facilitate the process of designing Phase III adaptive trials with two interim analysis to enable a futility assessment and data-driven selection of the best treatment arm. The application supports the same functionality as the <code><a href="#topic+ADTreatSel">ADTreatSel</a></code> function. For an example of the function call, see <a href="#topic+ADTreatSelExample1">ADTreatSelExample1</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ADTreatSelApp()
</code></pre>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value, called for side effects</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADTreatSel">ADTreatSel</a></code>
</p>

<hr>
<h2 id='ADTreatSelExample1'>
Simulation-based design of an adaptive trial with treatment selection (normally distributed endpoint)
</h2><span id='topic+ADTreatSelExample1'></span>

<h3>Description</h3>

<p>Consider a seamless Phase II/Phase III or Phase III trial with a normally distributed primary efficacy endpoint with a larger value indicating a more favorable outcome. The efficacy and safety profiles of two treatments, e.g., two doses of an experimental treatment, will be evaluated in this trial compared to a control. An adaptive design with two interim analyses will be employed in the trial (the first interim analysis may correspond to the end of the Phase II portion of the trial). The following decision rules will be applied at the interim looks:
</p>

<ul>
<li><p> Futility stopping rule will be applied at the first interim analysis (IA1). A treatment arm may be dropped due to futility if the treatment-specific conditional power is too low. The trial will be terminated for futility if all treatment arms are dropped.
</p>
</li>
<li><p> Treatment selection rule will be applied at the second interim analysis (IA2). The best performing treatment will be selected for the final analysis (FA) and the remaining treatment will be dropped at this interim analysis.
</p>
</li></ul>
 
<p>The following design parameters will be assumed:
</p>

<ul>
<li><p> A balanced design with 200 enrolled patients per trial arm will be utilized in the trial.
</p>
</li>
<li><p> The patient dropout rate at the end of the treatment period is equal to 5%.
</p>
</li>
<li><p> The information fractions at IA1 and IA2 are set to 40% and 60%, i.e., the first and second interim looks will be taken after 40% and 60% of the patients complete the treatment period or drop out of the trial before completing the treatment period. 
</p>
</li></ul>

<p>The futility threshold at IA1 is set to 25%, which means that a treatment arm will be dropped at this interim analysis if conditional power does not exceed 25%. The mean effect and standard deviation are assumed to be 0 and 1 in the control arm. The mean effects in the two treatment arms are assumed to be equal to 0.25 and 0.3, respectively, with a common standard deviation of 1.
</p>
<p>To address multiplicity induced by the data-driven treatment selection, the Hochberg procedure will be applied at the final analysis.
</p>
<p>Key operating characteristics of this adaptive design with a treatment selection option at the second interim look will be evaluated using the <code><a href="#topic+ADTreatSel">ADTreatSel</a></code> function based on 10,000 simulation runs. To invoke this function, a list of all design and decision rule parameters (<code>parameters</code>) needs to be created as shown below. A comprehensive simulation report for this adaptive design can be generated by calling the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function and a graphical user interface can be launched using the <code><a href="#topic+ADTreatSelApp">ADTreatSelApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADTreatSel">ADTreatSel</a></code>, <code><a href="#topic+ADTreatSelExample2">ADTreatSelExample2</a></code>, <code><a href="#topic+ADTreatSelExample3">ADTreatSelExample3</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Endpoint type
parameters$endpoint_type = "Normal"

# Direction of favorable outcome
parameters$direction = "Higher"

# Number of enrolled patients (control, two treatments)
parameters$sample_size = c(200, 200, 200)

# Patient dropout rate
parameters$dropout_rate = 0.05

# Mean and SD in the control arm 
parameters$control_mean = 0
parameters$control_sd = 1

# Means and SDs in the multiple treatment arms
parameters$treatment_mean = c(0.25, 0.30)
parameters$treatment_sd = c(1, 1)

# Information fractions at IA1, IA2, FA
parameters$info_frac = c(0.4, 0.6, 1)

# Futility threshold for conditional power at IA1
parameters$futility_threshold = 0.25

# Number of treatments to be selected at the second interim analysis
parameters$treatment_count = 1

# Multiple testing procedure to be used in the trial
parameters$mult_test = "Hochberg"

# One-sided alpha level
parameters$alpha = 0.025

# Number of simulations, you should prefer more
parameters$nsims = 100

# Number of cores for parallel calculations
parameters$ncores = 1

# Run simulations to compute operating characteristics
results = ADTreatSel(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("ADTreatSel Normally distributed endpoint.docx", fileext=".docx"))
</code></pre>

<hr>
<h2 id='ADTreatSelExample2'>
Simulation-based design of an adaptive trial with treatment selection (binary endpoint)
</h2><span id='topic+ADTreatSelExample2'></span>

<h3>Description</h3>

<p>Consider a seamless Phase II/Phase III or Phase III trial with a binary primary efficacy endpoint. This endpoint represents a success rate and thus a higher proportion corresponds to a more favorable outcome. The efficacy and safety profiles of three treatments, e.g., three doses of an experimental treatment, will be evaluated in this trial compared to a control. An adaptive design with two interim analyses will be employed in the trial (the first interim analysis may correspond to the end of the Phase II portion of the trial). The following decision rules will be applied at the interim looks:
</p>

<ul>
<li><p> Futility stopping rule will be applied at the first interim analysis (IA1). A treatment arm may be dropped due to futility if the treatment-specific conditional power is too low. The trial will be terminated for futility if all treatment arms are dropped.
</p>
</li>
<li><p> Treatment selection rule will be applied at the second interim analysis (IA2). Two best performing treatments will be selected for the final analysis (FA) and patient enrollment will be discontinued in the third treatment arm after the second interim analysis.
</p>
</li></ul>
 
<p>The following design parameters will be assumed:
</p>

<ul>
<li><p> A balanced design with 150 enrolled patients per trial arm will be utilized in the trial.
</p>
</li>
<li><p> The patient dropout rate at the end of the treatment period is equal to 10%.
</p>
</li>
<li><p> The information fractions at IA1 and IA2 are set to 40% and 60%. 
</p>
</li></ul>

<p>The futility threshold for each treatment arm at IA1 is set to 15%. The response rates for the primary endpoint are assumed to be 10% in the control arm and 25% in each treatment arm.
</p>
<p>To protect the overall Type I error rate in the trial, the Hochberg procedure will be used at the final analysis.
</p>
<p>Key operating characteristics of this adaptive design with a treatment selection option at the second interim look will be evaluated using the <code><a href="#topic+ADTreatSel">ADTreatSel</a></code> function based on 10,000 simulation runs. To invoke this function, a list of all design and decision rule parameters (<code>parameters</code>) needs to be created as shown below. A comprehensive simulation report for this adaptive design can be generated by calling the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function and a graphical user interface can be launched using the <code><a href="#topic+ADTreatSelApp">ADTreatSelApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADTreatSel">ADTreatSel</a></code>, <code><a href="#topic+ADTreatSelExample1">ADTreatSelExample1</a></code>, <code><a href="#topic+ADTreatSelExample3">ADTreatSelExample3</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Endpoint type
parameters$endpoint_type = "Binary"

# Direction of favorable outcome
parameters$direction = "Higher"

# Number of enrolled patients (control, three treatments)
parameters$sample_size = c(150, 150, 150, 150)

# Patient dropout rate
parameters$dropout_rate = 0.1

# Response rate in the control arm 
parameters$control_rate = 0.1

# Response rates in the treatment arms 
parameters$treatment_rate = c(0.25, 0.25, 0.25)

# Information fractions at IA1, IA2, FA
parameters$info_frac = c(0.4, 0.6, 1)

# Futility threshold for conditional power at IA1
parameters$futility_threshold = 0.15

# Number of treatments to be selected at the second interim analysis
parameters$treatment_count = 2

# Multiple testing procedure to be used in the trial
parameters$mult_test = "Hochberg"

# One-sided alpha level
parameters$alpha = 0.025

# Number of simulations, you should prefer more
parameters$nsims = 100

# Number of cores for parallel calculations
parameters$ncores = 1

# Run simulations to compute operating characteristics
results = ADTreatSel(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("ADTreatSel Binary endpoint.docx", fileext=".docx"))
</code></pre>

<hr>
<h2 id='ADTreatSelExample3'>
Simulation-based design of an adaptive trial with treatment selection (time-to-event endpoint)
</h2><span id='topic+ADTreatSelExample3'></span>

<h3>Description</h3>

<p>Consider a seamless Phase II/Phase III or Phase III trial with a time-to-event primary efficacy endpoint. Two regimens of an experimental treatment will be evaluated in this trial compared to a control. An adaptive design with two interim analyses will be employed in the trial (the first interim analysis may correspond to the end of the Phase II portion of the trial). The following decision rules will be applied at the interim looks:
</p>

<ul>
<li><p> Futility stopping rule will be applied at the first interim analysis (IA1). A treatment arm may be dropped due to futility if the treatment-specific conditional power is too low. The trial will be terminated for futility if all treatment arms are dropped.
</p>
</li>
<li><p> Treatment selection rule will be applied at the second interim analysis (IA2). The best performing treatment will be selected for the final analysis (FA) and the other treatment will be dropped at this interim analysis.
</p>
</li></ul>
 
<p>The following design parameters will be assumed:
</p>

<ul>
<li><p> A balanced design with 180 enrolled patients per arm will be used in the trial. 
</p>
</li>
<li><p> The target number of events at FA is set to 450.
</p>
</li>
<li><p> The annual patient dropout rate is equal to 5% (the time to patient dropout is assumed to follow an exponential distribution).
</p>
</li>
<li><p> The length of the patient enrollment period is 24 months and the median enrollment time is expected to be 18 months.
</p>
</li>
<li><p> The information fractions at IA1 and IA2 are set to 40% and 60%, i.e., the first and second interim analyses will be performed after 40% and 60% of the original number of events have been accrued. 
</p>
</li></ul>

<p>The futility threshold for each treatment arm at IA1 is set to 10%. The median event times are assumed to be 7.5 months in the control arms and 10.5 months in both treatment arms, respectively. Under the assumption of exponentially distributed event times, these assumptions correspond to a hazard ratio of 0.71 in each treatment arm.
</p>
<p>To control the overall Type I error rate in the trial, the Hochberg procedure will be applied at the final analysis.
</p>
<p>Key operating characteristics of this adaptive design with a treatment selection option at the second interim look will be evaluated using the <code><a href="#topic+ADTreatSel">ADTreatSel</a></code> function based on 10,000 simulation runs. To invoke this function, a list of all design and decision rule parameters (<code>parameters</code>) needs to be created as shown below. A comprehensive simulation report for this adaptive design can be generated by calling the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function and a graphical user interface can be launched using the <code><a href="#topic+ADTreatSelApp">ADTreatSelApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+ADTreatSel">ADTreatSel</a></code>, <code><a href="#topic+ADTreatSelExample1">ADTreatSelExample1</a></code>, <code><a href="#topic+ADTreatSelExample2">ADTreatSelExample2</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Endpoint type
parameters$endpoint_type = "Time-to-event"

# Direction of favorable outcome
parameters$direction = "Higher"

# Number of enrolled patients (control, two treatments)
parameters$sample_size = c(180, 180, 180)

# Annual patient dropout rate
parameters$dropout_rate = 0.05

# Median time in the control arm 
parameters$control_time = 7.5

# Median times in the treatment arms
parameters$treatment_time = c(10.5, 10.5)

# Target event count at FA
parameters$event_count = 450

# Information fractions at IA1, IA2, FA
parameters$info_frac = c(0.4, 0.6, 1)

# Futility threshold for conditional power at IA1
parameters$futility_threshold = 0.1

# Enrollment period
parameters$enrollment_period = 24

# Median enrollment time
parameters$enrollment_parameter = 18

# Number of treatments to be selected at the second interim analysis
parameters$treatment_count = 1

# Multiple testing procedure to be used in the trial
parameters$mult_test = "Hochberg"

# One-sided alpha level
parameters$alpha = 0.025

# Number of simulations, you should prefer more
parameters$nsims = 100

# Number of cores for parallel calculations
parameters$ncores = 1

# Run simulations to compute operating characteristics
results = ADTreatSel(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("ADTreatSel Time-to-event endpoint.docx", fileext=".docx"))
</code></pre>

<hr>
<h2 id='ClustRand'>
Simulation-based design of cluster-randomized trials
</h2><span id='topic+ClustRand'></span><span id='topic+ClustRandC'></span><span id='topic+ClustRandSingleCore'></span><span id='topic+ClustRandGLMEMR'></span><span id='topic+ClustRandGEEC'></span><span id='topic+ExportRandomClusterSize'></span>

<h3>Description</h3>

<p>This function performs a simulation-based evaluation of operating characteristics for cluster-randomized trials with normally distributed or binary endpoints. A multi-arm clinical trial is assumed (control arm and several treatment arms). For examples of the function call, see <a href="#topic+ClustRandExample1">ClustRandExample1</a> or <a href="#topic+ClustRandExample2">ClustRandExample2</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ClustRand(parameters)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ClustRand_+3A_parameters">parameters</code></td>
<td>
<p>List of the trial design and other parameters. The required elements are defined below: 
</p>

<ul>
<li> <p><code>endpoint_type</code>: Character value defining the primary endpoint's type. Possible values:  
</p>

<ul>
<li> <p><code>"Normal"</code>: Normally distributed endpoint.
</p>
</li>
<li> <p><code>"Binary"</code>: Binary endpoint.
</p>
</li></ul>


</li>
<li> <p><code>direction</code>: Character value defining the direction of favorable outcome. Possible values: <code>"Higher"</code> (a higher value of the endpoint indicates a more favorable outcome) and <code>"Lower"</code> (a lower value of the endpoint indicates a more favorable outcome).    
</p>
</li>
<li> <p><code>sample_size</code>: Integer vector defining the number of completers in the trial arms (control arm and several treatment arms). Completers are defined as patients who complete the trial and are included in the final analysis. Each element must be positive.
</p>
</li>
<li> <p><code>method_type</code>: Character value defining the data analysis method. Possible values:  
</p>

<ul>
<li> <p><code>"GEE"</code>: Generalized estimating equations.
</p>
</li>
<li> <p><code>"GLMEM"</code>: Generalized linear mixed effects model. The current implementation of the GLMEM method is much less efficient than that for the GEE method and results in longer simulation run times.
</p>
</li></ul>


</li>
<li> <p><code>cluster_scheme</code>: Character value defining the cluster scheme. Possible values:  
</p>

<ul>
<li> <p><code>"Fixed"</code>: Cluster sizes are pre-defined.
</p>
</li>
<li> <p><code>"Random"</code>: Cluster sizes are randomly generated from a generalized Bernoulli distribution. 
</p>
</li></ul>


</li>
<li> <p><code>control_cluster_size</code>: Numeric vector defining the number of cluster sizes in the control arm. This parameter is required only if the cluster sizes are pre-defined (<code>cluster_scheme="Fixed"</code>).
</p>
</li>
<li> <p><code>treatment_cluster_size</code>: Numeric matrix defining the number of cluster sizes in the treatment arms (each row corresponds to a treatment arm). This parameter is required only if the cluster sizes are pre-defined.
</p>
</li>
<li> <p><code>control_cluster_proportion</code>: Numeric vector of relative cluster sizes in the control arm. The cluster membership is determined using a generalized Bernoulli distribution based on the relative cluster sizes. Each element must be between 0 and 1. This parameter is required only if the cluster sizes are random (<code>cluster_scheme="Random"</code>).
</p>
</li>
<li> <p><code>treatment_cluster_proportion</code>: Numeric matrix of relative cluster sizes in the treatment arms (each row corresponds to a treatment arm). The cluster membership in each treatment arm is determined using a generalized Bernoulli distribution based on the relative cluster sizes. Each element must be between 0 and 1. This parameter is required only if the cluster sizes are random.
</p>
</li>
<li> <p><code>control_mean</code>: Numeric value defining the mean of the primary endpoint in the control arm. This parameter is required only with normally distributed endpoints (<code>endpoint_type="Normal"</code>).
</p>
</li>
<li> <p><code>treatment_mean</code>: Numeric vector defining the means of the primary endpoint in the treatment arms. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>control_rate</code>: Numeric value defining the proportion or response rate for the primary endpoint in the control arm. This value must be between 0 and 1. This parameter is required only with binary endpoints <br /> (<code>endpoint_type="Binary"</code>).
</p>
</li>
<li> <p><code>treatment_rate</code>: Numeric vector defining the proportion or response rate for the primary endpoint in the treatment arms. Each element must be between 0 and 1. This parameter is required only with binary endpoints.
</p>
</li>
<li> <p><code>control_icc</code>: Numeric value defining the intra-cluster correlation coefficient in the control arm. This value must be between 0 and 1.
</p>
</li>
<li> <p><code>control_between_cluster_sd</code>: Numeric value defining the between-cluster standard deviation in the control arm. This value must be positive. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>treatment_icc</code>: Numeric vector defining the intra-cluster correlation coefficients in the treatment arms. Each element must be between 0 and 1.
</p>
</li>
<li> <p><code>treatment_between_cluster_sd</code>: Numeric vector defining the between-cluster standard deviation in the treatment arms. Each element must be positive. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>descriptive_statistics</code>: Logical value requesting the computation of descriptive statistics (arm-specific effects and cluster sizes if the cluster sizes are random) from each simulation run. The default value is FALSE.
</p>
</li>
<li><p>alpha: Numeric value defining the overall one-sided Type I error rate. The default value is 0.025.
</p>
</li>
<li> <p><code>random_seed</code>: Integer value defining the random number generator seed. The default value is 49283.
</p>
</li>
<li> <p><code>nsims</code>: Integer value defining the number of simulation runs.
</p>
</li>
<li> <p><code>ncores</code>: Integer value defining the number of cores for parallel calculations. The number of cores cannot exceed the maximum available number of cores. The default value is 1. 
</p>
</li></ul>

</td></tr>
</table>


<h3>Value</h3>

<p>The function returns an object of class &lsquo;<span class="samp">&#8288;ClustRandResults&#8288;</span>&rsquo;. This object is a list with the following components:
</p>
<table>
<tr><td><code>parameters</code></td>
<td>
<p>List containing the user-specified parameters.</p>
</td></tr>
<tr><td><code>pval_results</code></td>
<td>
<p>Data frame containing the convergence flags and p-values for each simulation run.</p>
</td></tr>
<tr><td><code>coef_results</code></td>
<td>
<p>Data frame containing the convergence flags and model parameter estimares for each simulation run. The data frame is created if the descriptive statistics are requested (<code>descriptive_statistics=TRUE</code>).</p>
</td></tr>  
<tr><td><code>cluster_size_results</code></td>
<td>
<p>Data frame containing the cluster sizes for each simulation run if the cluster sizes are random (<code>cluster_scheme="Random"</code>). The data frame is created if the descriptive statistics are requested (<code>descriptive_statistics=TRUE</code>).</p>
</td></tr>  
<tr><td><code>sim_summary</code></td>
<td>
<p>List containing the key operating characteristics of the cluster-randomized design.</p>
</td></tr>
</table>
<p>A detailed summary of the simulation results can be created using the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ClustRandApp">ClustRandApp</a></code>
</p>

<hr>
<h2 id='ClustRandApp'>
Graphical user interface to design a cluster-randomized trial
</h2><span id='topic+ClustRandApp'></span>

<h3>Description</h3>

<p>This function creates a web application with a Shiny-based graphical user interface to facilitate the process of designing a two-arm cluster-randomized trial (treatment and control arms). The application supports the same functionality as the <code><a href="#topic+ClustRand">ClustRand</a></code> function. For an example of the function call, see <a href="#topic+ClustRandExample1">ClustRandExample1</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ClustRandApp()
</code></pre>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value, called for side effects</p>


<h3>See Also</h3>

<p><code><a href="#topic+ClustRand">ClustRand</a></code>
</p>

<hr>
<h2 id='ClustRandExample1'>
Simulation-based design of a cluster-randomized trial (normally distributed endpoint)
</h2><span id='topic+ClustRandExample1'></span>

<h3>Description</h3>

<p>Consider a seamless Phase II/Phase III or Phase III trial with a normally distributed primary efficacy endpoint. A larger value of the endpoint corresponds to a more favorable outcome. A single dose or regimen of an experimental treatment will be compared to a control. An adaptive design with two interim analyses will be employed in the trial (the first interim analysis may correspond to the end of the Phase II portion of the trial). The following decision rules will be applied at the interim looks:
</p>

<ul>
<li><p> Futility stopping rule will be applied at the first interim analysis (IA1). The trial may be stopped due to futility if a significant treatment effect is unlikely to be established at the final analysis (FA), i.e., the predicted probability of success (conditional power) is very low at this interim analysis.
</p>
</li>
<li><p> Sample size re-estimation rule will be applied at the second interim analysis (IA2). The total number of patients in the trial will be increased to boost the probability of success if the predicted probability of success (conditional power) is lower than expected at this interim analysis.
</p>
</li></ul>
 
<p>The following design parameters will be assumed:
</p>

<ul>
<li><p> A balanced design with 120 enrolled patients per arm will be utilized.
</p>
</li>
<li><p> The patient dropout rate is equal to 5%, i.e., 5% of the patients are expected to be lost to follow up by the end of the treatment period.
</p>
</li>
<li><p> The information fractions at IA1 and IA2 are set to 40% and 60%, i.e., the first and second interim looks will be taken after 40% and 60% of the patients complete the treatment period or drop out of the trial before completing the treatment period. 
</p>
</li></ul>

<p>In addition, the following decision rules will be considered at the two interim analyses:
</p>

<ul>
<li><p> The futility threshold at IA1 is set to 10%, i.e., the trial will be terminated for futility if conditional power does not exceed 10%.
</p>
</li>
<li><p> The promising interval at IA2 ranges from 50% to 90%, i.e., the sample size in the trial will be increased if conditional power is greater than 50% and less than 90%.
</p>
</li>
<li><p> The target conditional power at IA2 is set to 90%, i.e., the sample size will be increased to ensure conditional power of 90% up a pre-defined cap. The maximum increase is equal to 30% of the original sample size.
</p>
</li></ul>

<p>Finally, the mean effects in the control and treatment arms are assumed to be equal to 0 and 0.3, respectively, with a common standard deviation of 1.
</p>
<p>Key operating characteristics of this adaptive design will be evaluated using the <code><a href="#topic+ClustRand">ClustRand</a></code> function with 10,000 simulation runs. To invoke this function, a list of all design and decision rule parameters (<code>parameters</code>) needs to be created as shown below. A comprehensive simulation report can be generated by calling the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function and a graphical user interface can be launched using the <code><a href="#topic+ClustRandApp">ClustRandApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+ClustRand">ClustRand</a></code>, <code><a href="#topic+ClustRandExample2">ClustRandExample2</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Endpoint type
parameters$endpoint_type = "Normal"

# Direction of favorable outcome
parameters$direction = "Lower"

# Number of completers in the trial arms (control, multiple treatments)
parameters$sample_size = c(100, 100)

# Cluster scheme
parameters$cluster_scheme = "Fixed"

# Vector of cluster sizes in the control arm
parameters$control_cluster_size = rep(10, 10)

# Vector of cluster sizes in the treatment arm
parameters$treatment_cluster_size = rep(10, 10)

# Mean in the control arm 
parameters$control_mean = 1

# Intra-cluster correlation coefficient in the control arm 
parameters$control_icc = 0.6

# Between-cluster standard deviation in the control arm 
parameters$control_between_cluster_sd = 1.2

# Mean in the treatment arm
parameters$treatment_mean = 0.3

# Intra-cluster correlation coefficient in the treatment arm
parameters$treatment_icc = 0.6

# Between-cluster standard deviation in the treatment arm 
parameters$treatment_between_cluster_sd = 1.2

# Data analysis method (generalized estimating equations (GEE) 
# or generalized linear mixed effects model (GLMEM))
parameters$method_type = "GEE"

# One-sided alpha level
parameters$alpha = 0.025

# Number of simulations
parameters$nsims = 10

# Number of cores for parallel calculations
parameters$ncores = 1

# Compute descriptive statistics (arm-specific effects, ICC, cluster sizes) for each simulation run
parameters$descriptive_statistics = TRUE

# Run simulations to compute operating characteristics
results = ClustRand(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("ClustRand Normally distributed endpoint.docx", fileext=".docx"))
</code></pre>

<hr>
<h2 id='ClustRandExample2'>
Simulation-based design of a cluster-randomized trial (binary endpoint)
</h2><span id='topic+ClustRandExample2'></span>

<h3>Description</h3>

<p>Consider a seamless Phase II/Phase III or Phase III trial where the primary efficacy endpoint is binary with a higher proportion indicating a more favorable outcome. A single dose or regimen of an experimental treatment will be compared to a control. An adaptive design with two interim analyses will be employed in the trial (the first interim analysis may correspond to the end of the Phase II portion of the trial). The following decision rules will be applied at the interim looks:
</p>

<ul>
<li><p> Futility stopping rule will be applied at the first interim analysis (IA1). The trial may be stopped due to futility if a significant treatment effect is unlikely to be established at the final analysis (FA).
</p>
</li>
<li><p> Sample size re-estimation rule will be applied at the second interim analysis (IA2). The total number of patients in the trial will be increased to boost the probability of success if conditional power is lower than expected at this interim analysis.
</p>
</li></ul>
 
<p>The following design parameters will be assumed:
</p>

<ul>
<li><p> A trial design with a 1:2 randomization ratio will be used. A hundred patients will be enrolled in the control arm and twice as many patients will be enrolled in the experimental treatment arm.
</p>
</li>
<li><p> The patient dropout rate at the end of the treatment period is equal to 10%.
</p>
</li>
<li><p> The information fractions at IA1 and IA2 are set to 40% and 60%. 
</p>
</li></ul>

<p>In addition, the following decision rules will be considered at the two interim analyses:
</p>

<ul>
<li><p> The futility threshold at IA1 is set to 20%.
</p>
</li>
<li><p> The promising interval at IA2 ranges from 50% to 90%.
</p>
</li>
<li><p> The target conditional power at IA2 is set to 90% and the total sample size in the trial could be increased up to 40%.
</p>
</li></ul>

<p>The response rates for the primary efficacy endpoint are assumed to be 10% (control arm)and 25% (experimental treatment arm).
</p>
<p>Key operating characteristics of this adaptive design will be evaluated using the <code><a href="#topic+ClustRand">ClustRand</a></code> function with 10,000 simulation runs. To invoke this function, a list of all design and decision rule parameters (<code>parameters</code>) needs to be created as shown below. A comprehensive simulation report can be generated by calling the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function and a graphical user interface can be launched using the <code><a href="#topic+ClustRandApp">ClustRandApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+ClustRand">ClustRand</a></code>, <code><a href="#topic+ClustRandExample1">ClustRandExample1</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Endpoint type
parameters$endpoint_type = "Binary"

# Direction of favorable outcome
parameters$direction = "Lower"

# Number of completers in the trial arms (control, multiple treatments)
parameters$sample_size = c(100, 100)

# Cluster scheme (fixed or random cluster sizes)
parameters$cluster_scheme = "Fixed"

# Vector of cluster sizes in the control arm 
parameters$control_cluster_size = rep(10, 10)

# Vector of cluster sizes in the treatment arm 
parameters$treatment_cluster_size = rep(10, 10)

# Response rate in the control arm 
parameters$control_rate = 0.6

# Intracluster correlation coefficient in the control arm 
parameters$control_icc = 0.3

# Response rate in the treatment arms 
parameters$treatment_rate = 0.3

# Intracluster correlation coefficient in the treatment arms
parameters$treatment_icc = 0.3

# Data analysis method (generalized estimating equations (GEE) 
# or generalized linear mixed effects model (GLMEM))
parameters$method_type = "GLMEM"

# One-sided alpha level
parameters$alpha = 0.025

# Number of simulations
parameters$nsims = 10

# Number of cores for parallel calculations
parameters$ncores = 1

# Run simulations to compute operating characteristics
results = ClustRand(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("ClustRand Binary endpoint.docx", fileext=".docx"))
</code></pre>

<hr>
<h2 id='EventPred'>
Simulation-based event prediction in trials with an event-driven design
</h2><span id='topic+EventPred'></span><span id='topic+EventPredR'></span><span id='topic+EventPredRSingleCore'></span><span id='topic+EventPredEventCount'></span>

<h3>Description</h3>

<p>This function performs event forecasting in trials with an event-driven design. Blinded event data at an interim analysis are used to forecast the number of events at pre-defined time points in the future. For an example of the function call, see <a href="#topic+EventPredExample">EventPredExample</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>EventPred(parameters)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="EventPred_+3A_parameters">parameters</code></td>
<td>
<p>List of the trial design and other parameters. The required elements are defined below: 
</p>

<ul>
<li> <p><code>data_set</code>: Data frame that contains blinded patient enrollment, event and dropout data at the interim analysis with a single record per patient. The following :  
</p>

<ul>
<li> <p><code>enrollment</code>: Time of the patient's enrollment.
</p>
</li>
<li> <p><code>time</code>: Time of the patient's death or last contact if the event is censored relative to the patient's enrollment.
</p>
</li>
<li> <p><code>event</code>: Event indicator (1 if the patient died and 0 otherwise).
</p>
</li>
<li> <p><code>dropout</code>: Patient dropout indicator (1 if the patient dropped out of the trial/was lost to follow up and 0 otherwise).
</p>
</li></ul>

<p>An example is provided in the <code><a href="#topic+EventPredData">EventPredData</a></code> data set.

</p>
</li>
<li> <p><code>time_points</code>: Numeric vector defining the future time points for computing event predictions. Each elements must be greater than the latest time point in the <code>data_set</code>.
</p>
</li>
<li> <p><code>event_prior_distribution</code>: Numeric vector with two elements defining the shape and rate parameters of the prior gamma distribution for the event hazard rate. Each element must be positive. The parameters could be computed using the <code><a href="#topic+EventPredPriorDistribution">EventPredPriorDistribution</a></code> function.
</p>
</li>
<li> <p><code>dropout_prior_distribution</code>: Numeric vector with two elements defining the shape and rate parameters of the prior gamma distribution for the patient dropout hazard rate. Each element must be positive. The parameters could be computed using the <code><a href="#topic+EventPredPriorDistribution">EventPredPriorDistribution</a></code> function.
</p>
</li>
<li> <p><code>enrollment_prior_distribution</code>: Numeric vector with two elements defining the shape and rate parameters of the prior gamma distribution for the patient enrollment rate. Each element must be positive. The parameters could be computed using the <code><a href="#topic+EventPredPriorDistribution">EventPredPriorDistribution</a></code> function.
</p>
</li>
<li> <p><code>random_seed</code>: Integer value defining the random number generator seed. The default value is 49283.
</p>
</li>
<li> <p><code>nsims</code>: Integer value defining the number of simulation runs.
</p>
</li>
<li> <p><code>ncores</code>: Integer value defining the number of cores for parallel calculations. The number of cores cannot exceed the maximum available number of cores. The default value is 1. 
</p>
</li></ul>

</td></tr>
</table>


<h3>Value</h3>

<p>The function returns an object of class &lsquo;<span class="samp">&#8288;EventPredResults&#8288;</span>&rsquo;. This object is a list with the following components:
</p>
<table>
<tr><td><code>parameters</code></td>
<td>
<p>List containing the user-specified parameters.</p>
</td></tr>
<tr><td><code>interim_analysis</code></td>
<td>
<p>Data frame containing the event information from the interim analysis data set.</p>
</td></tr>
<tr><td><code>predictions</code></td>
<td>
<p>Data frame containing the event prediction information at the future time points.</p>
</td></tr>
</table>
<p>A detailed summary of the simulation results can be created using the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+EventPredApp">EventPredApp</a></code>
</p>

<hr>
<h2 id='EventPredApp'>
Graphical user interface for event prediction in trials with an event-driven design
</h2><span id='topic+EventPredApp'></span>

<h3>Description</h3>

<p>This function creates a web application with a Shiny-based graphical user interface to facilitate the process of event forecasting in a Phase II or Phase III clinical trial with an event-driven design. The application supports the same functionality as the <code><a href="#topic+EventPred">EventPred</a></code> function. For an example of the function call, see <a href="#topic+EventPredExample">EventPredExample</a>. <br />
This application prompts the user to upload a data set in a CSV (comma-separated values) format with blinded patient enrollment, event and patient dropout data. The data set is required to include four variables (<code>enrollment</code>, <code>time</code>, <code>event</code> and <code>dropout</code>) with a single record per patient, see for example the <code><a href="#topic+EventPredData">EventPredData</a></code> data set. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>EventPredApp()
</code></pre>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value, called for side effects</p>


<h3>See Also</h3>

<p><code><a href="#topic+EventPred">EventPred</a></code>
</p>

<hr>
<h2 id='EventPredData'>Example data set for EventPred</h2><span id='topic+EventPredData'></span>

<h3>Description</h3>

<p>Example data set based on a Phase III oncology trial with an overall survival endpoint to illustrate event prediction in event-driven trials.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(EventPredData)</code></pre>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Format</h3>

<p>A data set with 150 records (one record per patient) and 4 variables:
</p>

<dl>
<dt><code>enrollment</code></dt><dd><p>Time of the patient's enrollment (months).</p>
</dd>
<dt><code>time</code></dt><dd><p>Time of the patient's death or last contact if the event is censored relative to the patient's enrollment (months).</p>
</dd>
<dt><code>event</code></dt><dd><p>Event indicator (1 if the patient died and 0 otherwise).</p>
</dd>
<dt><code>dropout</code></dt><dd><p>Patient dropout indicator (1 if the patient dropped out of the trial/was lost to follow up and 0 otherwise).</p>
</dd>
</dl>



<h3>Value</h3>

<p>No return value</p>

<hr>
<h2 id='EventPredExample'>
Simulation-based event prediction in trials with an event-driven design (time-to- event endpoint)
</h2><span id='topic+EventPredExample'></span>

<h3>Description</h3>

<p>Consider a Phase III trial in an oncology population that is being conducted to investigate the efficacy of an experimental treatment versus a control (best supportive care). The primary efficacy analysis evaluates the survival benefit of this treatment. Blinded data, including patient enrollment, event and patient dropout information, will be reviewed periodically throughout the trial to predict the number of events at pre-defined time points in the future.  
</p>
<p>Assume that the current snapshot of data required for event prediction is included in the <br /> <code><a href="#topic+EventPredData">EventPredData</a></code> data set. This data set contains blinded patient enrollment, event and patient dropout information on 150 patients at 12 months after the study start. The blinded data, along with relevant prior information, will support the calculation of the predicted number of events  and 95% predictive intervals up to the 24-month milestone.
</p>
<p>Prior information needs to be provided for the event hazard rate, patient dropout hazard rate and patient enrollment rate. These parameters are assumed to follow gamma distributions. The shape and rate parameters of the gamma distributions could be specified directly or by invoking the <code><a href="#topic+EventPredPriorDistribution">EventPredPriorDistribution</a></code> function. This function facilitates the process of prior specifications by allowing the user to provide the expected value of a parameter of interest, e.g., the event hazard rate, as well as the uncertainty parameter. The latter quantifies the amount of variability around the expected value, e.g., the uncertainty parameter of 0.1 corresponds to a low standard deviation and thus defines a high-confidence prior distribution. The expected values of the event and patient enrollment hazard rates will be computed using the assumptions that the expected median event and dropout times are equal to 15 and 80 months, respectively (the expected median dropout time corresponds to an annual dropout rate of 10%). The expected patient enrollment rate will be set to 35 patients per month. A common uncertainty parameter of 0.3 will be used for the the event hazard rate, patient dropout hazard rate and patient enrollment rate. This uncertainty parameter will define medium-confidence prior distributions for the three parameters of interest.
</p>
<p>A summary of event predictions can be generated by calling the <code><a href="#topic+EventPred">EventPred</a></code> function. The calculations will be performed using 1,000 simulation runs. A list of all required parameters (<code>parameters</code>) needs to be created as shown below and then passed to this function. A simulation report can be generated using the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function and a graphical user interface can be launched using the <code><a href="#topic+EventPredApp">EventPredApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+EventPred">EventPred</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Load the built-in data set with the patient enrollment, event and dropout 
# information (EventPredData)

parameters$data_set = EventPredData

# Future time points for computing event predictions
parameters$time_points = seq(from = 12, to = 24, by = 1)

# Prior distribution for the event hazard rate based on the 
# expected median time of 15 months and the uncertainty parameter of 0.3 
parameters$event_prior_distribution = 
    EventPredPriorDistribution(expected = log(2) / 15, uncertainty = 0.3)

# Prior distribution for the patient dropout hazard rate based on the 
# expected median time of 80 months and the uncertainty parameter of 0.3
parameters$dropout_prior_distribution = 
    EventPredPriorDistribution(expected = log(2) / 80, uncertainty = 0.3)

# Prior distribution for the patient enrollment rate based on the
# expected enrollment rate of 35 patients per month and the uncertainty 
# parameter of 0.3 
parameters$enrollment_prior_distribution = 
    EventPredPriorDistribution(expected = 35, uncertainty = 0.3)

# Number of simulations, you should prefer more
parameters$nsims = 100

# Number of cores for parallel calculations
parameters$ncores = 1

# Remove this parameter in your code:
parameters$withoutCharts = TRUE

# Forecast the number of events at the pre-defined time points
results = EventPred(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("EventPred.docx", fileext=".docx"))

</code></pre>

<hr>
<h2 id='EventPredPriorDistribution'>
Calculation of the parameters of prior gamma distributions
</h2><span id='topic+EventPredPriorDistribution'></span>

<h3>Description</h3>

<p>This function can be used for calculating the parameters of prior gamma distributions for the event hazard rate, patient dropout hazard rate and patient enrollment rate in the <code><a href="#topic+EventPred">EventPred</a></code> function. For an example of the function call, see <a href="#topic+EventPredExample">EventPredExample</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>EventPredPriorDistribution(expected, uncertainty)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="EventPredPriorDistribution_+3A_expected">expected</code></td>
<td>
<p>Numeric value defining the expected value of the event hazard rate, patient dropout hazard rate or patient enrollment rate. This value must be positive.</p>
</td></tr>
<tr><td><code id="EventPredPriorDistribution_+3A_uncertainty">uncertainty</code></td>
<td>
<p>Numeric value defining the amount of uncertainly around the expected value defined above. As a general guideline, the uncertainty parameters of 0.1, 0.3 and 0.5 define high-confidence, medium-confidence and low-confidence prior distributions. This value must be between 0 and 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a numeric vector with the shape and rate parameters of the prior gamma distribution.</p>


<h3>See Also</h3>

<p><code><a href="#topic+EventPred">EventPred</a></code>
</p>

<hr>
<h2 id='FutRule'>
Simulation-based selection of an optimal futility stopping rule at an interim analysis
</h2><span id='topic+FutRule'></span><span id='topic+FutRuleC'></span><span id='topic+FutRuleSingleCore'></span>

<h3>Description</h3>

<p>This function evaluates operating characteristics of a multi-arm trial design with a single interim analysis. A futility stopping rule will be applied at this interim look and the trial will be stopped early for futility if the predicted probability of success (conditional power) is less than a pre-defined futility threshold in all treatment arms. An optimal value of the futility threshold is derived by maximizing the sensitivity and specificity rates. For examples of the function call, see <a href="#topic+FutRuleExample1">FutRuleExample1</a>, <a href="#topic+FutRuleExample2">FutRuleExample2</a> or <a href="#topic+FutRuleExample3">FutRuleExample3</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>FutRule(parameters)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="FutRule_+3A_parameters">parameters</code></td>
<td>
<p>List of the trial design and other parameters. The required elements are defined below:
</p>

<ul>
<li> <p><code>endpoint_type</code>: Character value defining the primary endpoint's type. Possible values:  
</p>

<ul>
<li> <p><code>"Normal"</code>: Normally distributed endpoint.
</p>
</li>
<li> <p><code>"Binary"</code>: Binary endpoint.
</p>
</li>
<li> <p><code>"Time-to-event"</code>: Time-to-event endpoint.
</p>
</li></ul>


</li>
<li> <p><code>direction</code>: Character value defining the direction of favorable outcome. Possible values: <code>"Higher"</code> (a higher value of the endpoint indicates a more favorable outcome) and <code>"Lower"</code> (a lower value of the endpoint indicates a more favorable outcome).
</p>
</li>
<li> <p><code>sample_size</code>: Integer vector defining the number of enrolled patients in the trial arms (control and multiple experimental treatments). Each element must be positive.
</p>
</li>
<li> <p><code>control_mean</code>: Numeric value defining the mean of the primary endpoint in the control arm. This parameter is required only with normally distributed endpoints (<code>endpoint_type="Normal"</code>).
</p>
</li>
<li> <p><code>control_sd</code>: Numeric value defining the standard deviation of the primary endpoint in the control arm. This value must be positive. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>treatment_mean</code>: Numeric vector defining the means of the primary endpoint in the experimental treatment arms. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>treatment_sd</code>: Numeric vector defining the standard deviations of the primary endpoint in the experimental treatment arms. Each element must be positive. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>control_rate</code>: Numeric value defining the proportion or response rate for the primary endpoint in the control arm. This value must be between 0 and 1. This parameter is required only with binary endpoints <br /> (<code>endpoint_type="Binary"</code>).
</p>
</li>
<li> <p><code>treatment_rate</code>: Numeric vector defining the proportions or response rates for the primary endpoint in the experimental treatment arms. Each element must be between 0 and 1. This parameter is required only with binary endpoints.
</p>
</li>
<li> <p><code>control_time</code>: Numeric value defining the median time, e.g., the median survival time, for the exponentially distributed primary endpoint in the control arm. This value must be positive. This parameter is required only with time-to-event endpoints (<code>endpoint_type="Time-to-event"</code>).
</p>
</li>
<li> <p><code>treatment_time</code>: Numeric vector defining the median times, e.g., the median survival times, for the exponentially distributed primary endpoint in the experimental treatment arms. Each element must be positive. This parameter is required only with time-to-event endpoints.
</p>
</li>
<li> <p><code>info_frac</code>: Numeric value defining the information fraction at the interim analysis. This value must be between 0 and 1.
</p>
</li>
<li> <p><code>event_count</code>: Numeric value defining the total number of events at the final analysis. This value must be positive. This parameter is required only with time-to-event endpoints.
</p>
</li>
<li> <p><code>dropout_rate</code>: Numeric value defining the patient dropout rate. With normally distributed endpoints and binary endpoints, a uniform patient dropout process is assumed and thus this parameter defines the fraction of patients that will be excluded from the interim and final analyses. With time-to-event endpoints, the time to patient dropout is assumed to follow an exponential distribution and this parameter defines the annual dropout rate. This value must be between 0 and 1.
</p>
</li>
<li> <p><code>enrollment_period</code>: Numeric value defining the length of the patient enrollment period. This value must be positive. This parameter is required only with time-to-event endpoints.
</p>
</li>
<li> <p><code>enrollment_parameter</code>: Numeric value defining the median enrollment time. The patient enrollment process is assumed to be governed by a truncated exponential distribution and this parameter defines the time point by which 50% of the patients are enrolled into the trial. This value must be between 0 and the length of the patient enrollment period. This parameter is required only with time-to-event endpoints..
</p>
</li>
<li> <p><code>alpha</code>: Numeric value defining the overall one-sided Type I error rate. The default value is 0.025.
</p>
</li>
<li> <p><code>random_seed</code>: Integer value defining the random number generator seed. The default value is 49283.
</p>
</li>
<li> <p><code>nsims</code>: Integer value defining the number of simulation runs.
</p>
</li>
<li> <p><code>ncores</code>: Integer value defining the number of cores for parallel calculations. The number of cores cannot exceed the maximum available number of cores. The default value is 1. 
</p>
</li></ul>

</td></tr>
</table>


<h3>Value</h3>

<p>The function returns an object of class &lsquo;<span class="samp">&#8288;FutRuleResults&#8288;</span>&rsquo;. This object is a list with the following components:
</p>
<table>
<tr><td><code>parameters</code></td>
<td>
<p>List containing the user-specified parameters.</p>
</td></tr>
<tr><td><code>sim_summary</code></td>
<td>
<p>List containing the operating characteristics of the futility stopping rule.</p>
</td></tr>
</table>
<p>A detailed summary of the simulation results can be created using the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+FutRuleApp">FutRuleApp</a></code>
</p>

<hr>
<h2 id='FutRuleApp'>
Graphical user interface for an optimal selection of a futility stopping rule at an interim analysis
</h2><span id='topic+FutRuleApp'></span>

<h3>Description</h3>

<p>This function creates a web application with a Shiny-based graphical user interface to facilitate the process of defining an optimal futility stopping rule at an interim analysis in a Phase II or Phase III clinical trial. The application supports the same functionality as the <code><a href="#topic+FutRule">FutRule</a></code> function. For an example of the function call, see <a href="#topic+FutRuleExample1">FutRuleExample1</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>FutRuleApp()
</code></pre>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value, called for side effects</p>


<h3>See Also</h3>

<p><code><a href="#topic+FutRule">FutRule</a></code>FutRule
</p>

<hr>
<h2 id='FutRuleExample1'>
Simulation-based selection of an optimal futility stopping rule (normally distributed endpoint)
</h2><span id='topic+FutRuleExample1'></span>

<h3>Description</h3>

<p>Consider a multi-arm Phase II or Phase III trial with a single interim analysis and assume that the primary efficacy endpoint is normally distributed and a larger value indicates to a more favorable outcome. A futility assessment will be performed for each treatment arm at this interim look using the predicted probability of success (conditional power). A treatment arm will be dropped at this decision point if conditional power is below a pre-defined threshold. An optimal value of this futility threshold can be found by computing the sensitivity and specificity rates associated with the futility stopping rule and then identifying the threshold that simultaneously maximizes both rates.
</p>
<p>The following design parameters will be assumed in the trial:
</p>

<ul>
<li><p> Two treatments (two doses of an experimental treatment) will be compared to a control in this trial and a balanced design with 100 enrolled patients per trial arm will be utilized.
</p>
</li>
<li><p> The patient dropout rate at the end of the treatment period is assumed to be 5%.
</p>
</li>
<li><p> The information fraction at the interim analysis is 50%. 
</p>
</li></ul>

<p>The calculations will be performed under the following set of treatment effect assumptions: 
</p>

<ul>
<li><p> The mean and standard deviation of the primary efficacy endpoint in the control arm are set to 0 and 1, respectively. 
</p>
</li>
<li><p> The mean values in the two treatment arms are assumed to be equal to 0.25 and 0.3 with a common standard deviation of 1.
</p>
</li></ul>

<p>Operating characteristics of the futility stopping rule such as the sensitivity and specificity rates as well as an optimal futility threshold will be computed using the <code><a href="#topic+FutRule">FutRule</a></code> function based on 1,000 simulation runs. A list of all trial design parameters (<code>parameters</code>) needs to be set up as shown below and passed to this function. A detailed simulation report can be generated using the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function and a graphical user interface can be launched by calling the <code><a href="#topic+FutRuleApp">FutRuleApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+FutRule">FutRule</a></code>, <code><a href="#topic+FutRuleExample2">FutRuleExample2</a></code>, <code><a href="#topic+FutRuleExample3">FutRuleExample3</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Endpoint type
parameters$endpoint_type = "Normal"

# Number of enrolled patients (control, two treatments)
parameters$sample_size = c(100, 100, 100)

# Direction of favorable outcome
parameters$direction = "Higher"

# Patient dropout rate
parameters$dropout_rate = 0.05

# Mean and SD in the control arm 
parameters$control_mean = 0
parameters$control_sd = 1

# Means and SDs in the treatment arms 
parameters$treatment_mean = c(0.25, 0.30)
parameters$treatment_sd = c(1, 1)

# Information fraction
parameters$info_frac = 0.5

# One-sided alpha level
parameters$alpha = 0.025

# Number of simulations, you should prefer more
parameters$nsims = 100

# Number of cores for parallel calculations
parameters$ncores = 1

# Remove this parameter in your code:
parameters$withoutCharts = TRUE

# Run simulations to compute characteristics of the futility stopping rule
results = FutRule(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("FutRule Normally distributed endpoint.docx", fileext=".docx"))
</code></pre>

<hr>
<h2 id='FutRuleExample2'>
Simulation-based selection of an optimal futility stopping rule (binary endpoint)
</h2><span id='topic+FutRuleExample2'></span>

<h3>Description</h3>

<p>Consider a Phase II or Phase III trial with three treatment arms that correspond to two doses of an experimental treatment versus a control and assume that the primary efficacy endpoint is a binary endpoint (response rate, i.e., a higher value indicates a more favorable outcome). A futility assessment will be performed for each treatment arm at an interim look using conditional power and a treatment arm will be dropped if conditional power is below a pre-defined futility threshold. An optimal value of the futility threshold can be found by computing the sensitivity and specificity rates associated with the futility stopping rule and then identifying the threshold that simultaneously maximizes both rates.
</p>
<p>The following design parameters will be assumed in the trial:
</p>

<ul>
<li><p> A balanced design with 75 enrolled patients per trial arm will be utilized.
</p>
</li>
<li><p> The patient dropout rate at the end of the treatment period is assumed to be 5%.
</p>
</li>
<li><p> An early interim analysis with the information fraction of 30% will be conducted. 
</p>
</li></ul>

<p>The calculations will be performed under the following set of treatment effect assumptions: 
</p>

<ul>
<li><p> The control response rate is set to 35%. 
</p>
</li>
<li><p> The response rates in the three treatment arms are set to 45%, 50% and 55%.
</p>
</li></ul>

<p>Operating characteristics of the futility stopping rule (sensitivity and specificity rates) and an optimal futility threshold will be computed using the <code><a href="#topic+FutRule">FutRule</a></code> function based on 1,000 simulation runs. A list of all trial design parameters (<code>parameters</code>) needs to be set up as shown below and passed to this function. A detailed simulation report can be generated using the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function and a graphical user interface can be launched by calling the <code><a href="#topic+FutRuleApp">FutRuleApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+FutRule">FutRule</a></code>, <code><a href="#topic+FutRuleExample1">FutRuleExample1</a></code>, <code><a href="#topic+FutRuleExample3">FutRuleExample3</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Endpoint type
parameters$endpoint_type = "Binary"

# Direction of favorable outcome
parameters$direction = "Higher"

# Number of enrolled patients (control, three treatments)
parameters$sample_size = c(75, 75, 75, 75)

# Dropout rate
parameters$dropout_rate = 0.05

# Response rate in the control arm 
parameters$control_rate = 0.35

# Response rates in the treatment arms 
parameters$treatment_rate = c(0.45, 0.5, 0.55)

# Information fraction
parameters$info_frac = 0.3

# One-sided alpha level
parameters$alpha = 0.025

# Number of simulations, you should prefer more
parameters$nsims = 100

# Number of cores for parallel calculations
parameters$ncores = 1

# Remove this parameter in your code:
parameters$withoutCharts = TRUE

# Run simulations to compute characteristics of the futility stopping rule
results = FutRule(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("FutRule Binary endpoint.docx", fileext=".docx"))
</code></pre>

<hr>
<h2 id='FutRuleExample3'>
Simulation-based selection of an optimal futility stopping rule (time-to-event endpoint)
</h2><span id='topic+FutRuleExample3'></span>

<h3>Description</h3>

<p>Consider a Phase III trial with a time-to-event primary efficacy endpoint. A single regimen of an experimental treatment will be evaluated versus a control. A futility assessment will be conducted at an interim look using conditional power and the trial will be stopped for futility if conditional power in the single treatment arm is below a pre-defined futility threshold. An optimal value of the futility threshold can be found by computing the sensitivity and specificity rates associated with the futility stopping rule and then identifying the threshold that simultaneously maximizes both rates.
</p>
<p>The following design parameters will be assumed in the trial:
</p>

<ul>
<li><p> A balanced design with 125 enrolled patients per trial arm will be used.
</p>
</li>
<li><p> The target number of events at the final analysis is 175.
</p>
</li>
<li><p> The annual patient dropout rate is equal to 5% (the time to patient dropout is assumed to follow an exponential distribution).
</p>
</li>
<li><p> The length of the patient enrollment period is 12 months and the median enrollment time is expected to be 9 months.
</p>
</li>
<li><p> A late interim analysis with the information fraction of 60% will be conducted. 
</p>
</li></ul>

<p>The calculations will be performed assuming the median event times of 7.5 months and 10.5 months in the control and treatment arms, respectively. 
</p>
<p>Operating characteristics of the futility stopping rule (sensitivity and specificity rates) and an optimal futility threshold will be computed using the <code><a href="#topic+FutRule">FutRule</a></code> function based on 1,000 simulation runs. A list of all trial design parameters (<code>parameters</code>) needs to be set up as shown below and passed to this function. A detailed simulation report can be generated using the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function and a graphical user interface can be launched by calling the <code><a href="#topic+FutRuleApp">FutRuleApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+FutRule">FutRule</a></code>, <code><a href="#topic+FutRuleExample1">FutRuleExample1</a></code>, <code><a href="#topic+FutRuleExample2">FutRuleExample2</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Endpoint type
parameters$endpoint_type = "Time-to-event"

# Direction of favorable outcome
parameters$direction = "Higher"

# Number of enrolled patients (control, treatment)
parameters$sample_size = c(125, 125)

# Target event count at the final analysis
parameters$event_count = 175

# Annual patient dropout rate
parameters$dropout_rate = 0.05

# Median time in the control arm 
parameters$control_time = 7.5

# Median time in the treatment arm
parameters$treatment_time = 10.5

# Information fraction
parameters$info_frac = 0.6

# Enrollment period
parameters$enrollment_period = 12

# Median enrollment time
parameters$enrollment_parameter = 9

# One-sided alpha level
parameters$alpha = 0.025

# Number of simulations, you should prefer more
parameters$nsims = 100

# Number of cores for parallel calculations
parameters$ncores = 1

# Remove this parameter in your code:
parameters$withoutCharts = TRUE

# Run simulations to compute characteristics of the futility stopping rule
results = FutRule(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("FutRule Time-to-event endpoint.docx", fileext=".docx"))
</code></pre>

<hr>
<h2 id='GenerateReport'>
Simulation report  
</h2><span id='topic+GenerateReport'></span><span id='topic+ReportDoc'></span><span id='topic+ADSSModReportDoc'></span><span id='topic+ADTreatSelReportDoc'></span><span id='topic+ADPopSelReportDoc'></span><span id='topic+EventPredReportDoc'></span><span id='topic+FutRuleReportDoc'></span><span id='topic+ADRandReportDoc'></span><span id='topic+MultAdjReportDoc'></span><span id='topic+ClustRandReportDoc'></span><span id='topic+print.ADSSModResults'></span><span id='topic+print.ADTreatSelResults'></span><span id='topic+print.ADPopSelResults'></span><span id='topic+print.FutRuleResults'></span><span id='topic+print.EventPredResults'></span><span id='topic+print.ADRandResults'></span><span id='topic+print.MultAdjResults'></span><span id='topic+print.ClustRandResults'></span>

<h3>Description</h3>

<p>This function creates a detailed simulation report in a Microsoft Word format. For examples of the function call, see <a href="#topic+ADSSModExample1">ADSSModExample1</a>, <a href="#topic+ADTreatSelExample1">ADTreatSelExample1</a>, <a href="#topic+ADPopSelExample1">ADPopSelExample1</a>, <a href="#topic+FutRuleExample1">FutRuleExample1</a>, <a href="#topic+EventPredExample">EventPredExample</a> and <a href="#topic+ADRandExample">ADRandExample</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GenerateReport(results, report_filename)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="GenerateReport_+3A_results">results</code></td>
<td>
<p>Object created by a simulation function, e.g., <code><a href="#topic+ADSSMod">ADSSMod</a></code>.  
</p>
</td></tr>
<tr><td><code id="GenerateReport_+3A_report_filename">report_filename</code></td>
<td>
<p>Character value defining the report's filename. The report is saved in the current working directory.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects</p>

<hr>
<h2 id='MultAdj'>
Simulation-based design of traditional trials with multiple objectives
</h2><span id='topic+MultAdj'></span><span id='topic+MultAdjC'></span><span id='topic+MultAdj1SingleCore'></span><span id='topic+ExportTradMultAdj'></span>

<h3>Description</h3>

<p>This function supports power calculations for a broad class of Phase III clinical trials with multiple objectives, including
</p>

<ul>
<li><p> Trials with a single source of multiplicity, i.e., trials with a single endpoint and several dose-control comparisons, or two-arm trials with several endpoints.
</p>
</li>
<li><p> Trials with several sources of multiplicity, i.e., trials with several endpoints and several dose-placebo comparisons.
</p>
</li></ul>

<p>A fixed-sample design is assumed in this setting. Most commonly used multiplicity adjustments are supported for trials with a single source of multiplicity. In addition, global testing procedures can be applied in two-arm trials with several endpoints. Popular gatekeeping procedures are supported in the advanced multiplicity problems with several sources. For examples of the function call, see <a href="#topic+MultAdjExample1">MultAdjExample1</a>, <a href="#topic+MultAdjExample2">MultAdjExample2</a> or <a href="#topic+MultAdjExample3">MultAdjExample3</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MultAdj(parameters)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="MultAdj_+3A_parameters">parameters</code></td>
<td>
<p>List of the trial design and other parameters. The required elements are defined below: 
</p>

<ul>
<li> <p><code>endpoint_type</code>: Character value defining the common type of trial endpoints. Possible values:  
</p>

<ul>
<li> <p><code>"Normal"</code>: Normally distributed endpoint.
</p>
</li>
<li> <p><code>"Binary"</code>: Binary endpoint.
</p>
</li></ul>


</li>
<li> <p><code>direction</code>: Character value defining the common direction of favorable outcome for all endpoints. Possible values: <code>"Higher"</code> (a higher value of each endpoint indicates a more favorable outcome) and <code>"Lower"</code> (a lower value of each endpoint indicates a more favorable outcome).  
</p>
</li>
<li> <p><code>n_comparisons</code>: Integer value defining the number of dose-control comparisons in the trial. This value must be positive.
</p>
</li>
<li> <p><code>n_endpoints</code>: Integer value defining the number of endpoints in the trial. This value must be positive. Either <code>n_comparisons</code> or <code>n_endpoints</code> must be greater than 1.
</p>
</li>
<li> <p><code>sample_size</code>: Integer vector defining the number of enrolled patients in each trial arm (control and experimental treatments). Each element must be positive.
</p>
</li>
<li> <p><code>control_mean</code>: Numeric vector defining the mean of each endpoint in the control arm. This parameter is required only with normally distributed endpoints (<code>endpoint_type="Normal"</code>).
</p>
</li>
<li> <p><code>control_sd</code>: Numeric vector defining the standard deviation of each endpoint in the control arm. Each element must be positive. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>treatment_mean</code>: Numeric vector or matrix defining the mean of each endpoint in each experimental treatment arm. In clinical trials with several endpoints and several dose-placebo comparisons, the rows corresponds to the endpoints and the columns corresponds to the treatment-control comparisons. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>treatment_sd</code>: Numeric vector or matrix defining the standard deviation of each endpoint in each experimental treatment arm. In clinical trials with several endpoints and several dose-placebo comparisons, the rows corresponds to the endpoints and the columns corresponds to the treatment-control comparisons. Each element must be positive. This parameter is required only with normally distributed endpoints.
</p>
</li>
<li> <p><code>control_rate</code>: Numeric vector defining the proportion or response rate for each endpoint in the control arm. Each element must be between 0 and 1. This parameter is required only with binary endpoints (<code>endpoint_type=</code> <code>"Binary"</code>).
</p>
</li>
<li> <p><code>treatment_rate</code>: Numeric vector or matrix defining the proportion or response rate for each endpoint in each experimental treatment arm. In clinical trials with several endpoints and several dose-placebo comparisons, the rows corresponds to the endpoints and the columns corresponds to the treatment-control comparisons. Each element must be between 0 and 1. This parameter is required only with binary endpoints.
</p>
</li>
<li> <p><code>endpoint_correlation</code>: Numeric matrix defining the pairwise correlations among the endpoint-specific test statistics. Each element must be between 0 and 1 and the matrix must be positive definite. This parameter is required only in trials with multiple endpoints.
</p>
</li>
<li> <p><code>mult_test</code>: Character value defining the multiple testing procedure, global testing procedure or gatekeeping procedure. Possible values:  
</p>

<ul>
<li> <p><code>"Bonferroni"</code>: Bonferroni multiple testing procedure.
</p>
</li>
<li> <p><code>"Holm"</code>: Holm multiple testing procedure in trials with a single source of multiplicity or Holm-based gatekeeping procedure in trials with several sources of multiplicity.
</p>
</li>
<li> <p><code>"Fixed-sequence"</code>: Fixed-sequence multiple testing procedure.
</p>
</li>
<li> <p><code>"Chain"</code>: Chain multiple testing procedure.
</p>
</li>
<li> <p><code>"Hochberg"</code>: Hochberg multiple testing procedure in trials with a single source of multiplicity or Hochberg-based gatekeeping procedure in trials with several sources of multiplicity.
</p>
</li>
<li> <p><code>"Hommel"</code>: Hommel multiple testing procedure in trials with a single source of multiplicity or Hommel-based gatekeeping procedure in trials with several sources of multiplicity.
</p>
</li>
<li> <p><code>"O'Brien"</code>: O'Brien global testing procedure.
</p>
</li></ul>

<p>Note that the O'Brien procedure can be used only in two-arm trials with several endpoints, similarly gatekeeping procedures can be used only in trials with several endpoints and several dose-placebo comparisons.

</p>
</li>
<li> <p><code>weights</code>: Numeric vector defining the initial hypothesis weights. Each element must be between 0 and 1. This parameter is required only with multiple testing procedures.
</p>
</li>
<li> <p><code>transition</code>: Numeric matrix defining the hypothesis transition parameters. Each element must be between 0 and 1 and the sum of elements in each row must be less than or equal to 1. This parameter is required only with the chain multiple testing procedure.
</p>
</li>
<li> <p><code>sequence</code>: Integer vector defining the hypothesis testing sequence. This parameter is required only with the fixed-sequence multiple testing procedures.
</p>
</li>
<li> <p><code>mult_method</code>: Character value defining the mixture method for the gatekeeping procedure. Possible values:  
</p>

<ul>
<li> <p><code>"Standard"</code>: Standard mixture method.
</p>
</li>
<li> <p><code>"Modified"</code>: Modified mixture method.
</p>
</li>
<li> <p><code>"Enhanced"</code>: Enhanced mixture method.
</p>
</li></ul>

<p>This parameter is required only with gatekeeping procedures.

</p>
</li>
<li> <p><code>mult_test_gamma</code>: Numeric vector defining the truncation parameter for each endpoint-specific family of hypotheses. The vector's length must be equal to the number of endpoints. Each element must be between 0 and 1, the last element may be equal to 1 whereas the other elements must be strictly less than 1. This parameter is required only with gatekeeping procedures.
</p>
</li>
<li> <p><code>dropout_rate</code>: Numeric value defining the patient dropout rate. A uniform patient dropout process is assumed and thus this parameter defines the fraction of patients that will be excluded from the analysis. This value must be between 0 and 1.
</p>
</li>
<li><p>alpha: Numeric value defining the overall one-sided Type I error rate. The default value is 0.025.
</p>
</li>
<li> <p><code>random_seed</code>: Integer value defining the random number generator seed. The default value is 49283.
</p>
</li>
<li> <p><code>nsims</code>: Integer value defining the number of simulation runs.
</p>
</li>
<li> <p><code>ncores</code>: Integer value defining the number of cores for parallel calculations. The number of cores cannot exceed the maximum available number of cores. The default value is 1. 
</p>
</li></ul>

</td></tr>
</table>


<h3>Value</h3>

<p>The function returns an object of class &lsquo;<span class="samp">&#8288;MultAdjResults&#8288;</span>&rsquo;. This object is a list with the following components:
</p>
<table>
<tr><td><code>parameters</code></td>
<td>
<p>List containing the user-specified parameters.</p>
</td></tr>
<tr><td><code>sim_results</code></td>
<td>
<p>Data frame containing the raw and adjusted p-values generated by the hypothesis tests for each simulation run. The first set of n columns correspond to the raw p-values for the n null hypotheses and the next set of n columns correspond to the adjusted p-values for the n null hypotheses.</p>
</td></tr>
<tr><td><code>sim_summary</code></td>
<td>
<p>List containing the power calculation results for the specified multiple testing procedure, global testing procedure or gatekeeping procedure.</p>
</td></tr>
</table>
<p>A detailed summary of the simulation results can be created using the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+MultAdjApp">MultAdjApp</a></code>, <code><a href="#topic+MultAdjExample1">MultAdjExample1</a></code>, <code><a href="#topic+MultAdjExample2">MultAdjExample2</a></code>, <code><a href="#topic+MultAdjExample3">MultAdjExample3</a></code>
</p>

<hr>
<h2 id='MultAdjApp'>
Graphical user interface for power calculations in traditional trials with multiple objectives
</h2><span id='topic+MultAdjApp'></span>

<h3>Description</h3>

<p>This function creates a web application with a Shiny-based graphical user interface to perform power calculations in traditional trials with multiple objectives. The application supports the same functionality as the <code><a href="#topic+MultAdj">MultAdj</a></code> function. For an example of the function call, see <a href="#topic+MultAdjExample1">MultAdjExample1</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MultAdjApp()
</code></pre>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value, called for side effects</p>


<h3>See Also</h3>

<p><code><a href="#topic+MultAdj">MultAdj</a></code>, <code><a href="#topic+MultAdj">MultAdj</a></code>, <code><a href="#topic+MultAdjExample2">MultAdjExample2</a></code>, <code><a href="#topic+MultAdjExample3">MultAdjExample3</a></code>
</p>

<hr>
<h2 id='MultAdjExample1'>
Simulation-based power calculations in Phase III trials with multiple dose-placebo comparisons
</h2><span id='topic+MultAdjExample1'></span>

<h3>Description</h3>

<p>Consider a Phase III trial in patients with rheumatoid arthritis that will be conducted to investigate the efficacy and safety of three doses of an experimental treatment versus placebo. The three doses will be labeled as the low, medium and high doses. The primary efficacy endpoint is a binary endpoint based on the American College of Rheumatology response criteria (ACR50). The endpoint represents the proportion of patients who experience a symptomatic improvement after 26 weeks of treatment and thus a higher value of the endpoint indicates a beneficial effect. 
</p>
<p>A multiplicity adjustment will be applied to address Type I error rate inflation cased by the evaluation of three dose-placebo comparisons. The adjustment will rely on the fixed-sequence procedure with the following sequence of dose-placebo comparisons: 
</p>

<ul>
<li><p> High dose versus placebo.
</p>
</li>
<li><p> Medium dose versus placebo. 
</p>
</li>
<li><p> Low dose versus placebo.
</p>
</li></ul>

<p>Each comparison in this sequence will be evaluated at a one-sided alpha of 0.025 (provided the preceding comparison was significant) to control the overall Type I error rate at a one-sided 2.5% level.
</p>
<p>The following design parameters will be used in this example:
</p>

<ul>
<li><p> A total of 440 patients will be enrolled in the trial and randomly assigned to placebo and three doses of the experimental treatment using an equal randomization approach. 
</p>
</li>
<li><p> The patient dropout rate at the end of the 26-week treatment period is expected be 20%.
</p>
</li></ul>

<p>Power calculations will be performed in this trial using the <code><a href="#topic+MultAdj">MultAdj</a></code> function. A list of all design and multiplicity adjustment parameters (<code>parameters</code>) needs to be created and then passed to this function. A simulation report can be created by calling the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function. Power calculations can also be performed in this trial using a Shiny-based application with a graphical user interface that can be launched by calling the <code><a href="#topic+MultAdjApp">MultAdjApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+MultAdjApp">MultAdjApp</a></code>, <code><a href="#topic+MultAdj">MultAdj</a></code>, <code><a href="#topic+MultAdjExample2">MultAdjExample2</a></code>, <code><a href="#topic+MultAdjExample3">MultAdjExample3</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Endpoint type
parameters$endpoint_type = "Binary"

# Direction of beneficial effect
parameters$direction = "Higher"

# Number of dose-placebo comparisons
parameters$n_comparisons = 3

# Number of endpoints
parameters$n_endpoints = 1

# Number of enrolled patients (placebo, low dose, medium dose and high dose) 
parameters$sample_size = c(110, 110, 110, 110)

# Patient dropout rate
parameters$dropout_rate = 0.2

# Endpoint information 
parameters$control_rate = 0.3
parameters$treatment_rate = c(0.5, 0.55, 0.6)

# Multiple testing procedure
parameters$mult_test = "Fixed-sequence"

# Hypothesis testing sequence (the null hypotheses of no effect will be 
# tested in the following sequence: H3 [high dose versus placebo], H2 [medium dose 
# versus placebo] and H1 [low dose versus placebo])
parameters$sequence = c(3, 2, 1)

# Overall one-sided Type I error rate
parameters$alpha = 0.025

# Number of simulations
parameters$nsims = 100

# Number of cores for parallel calculations
parameters$ncores = 1

# Run simulations to perform power calculations
results = MultAdj(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("MultAdj Multiple dose-placebo comparisons.docx", 
              fileext=".docx"))
</code></pre>

<hr>
<h2 id='MultAdjExample2'>
Simulation-based power calculations in Phase III trials with multiple endpoints
</h2><span id='topic+MultAdjExample2'></span>

<h3>Description</h3>

<p>Consider a Phase III trial for the treatment of agitation in patients with dementia. A single dose of an experimental treatment will be compared to placebo in this trial. The efficacy profile of the experimental treatment will be assessed using three primary endpoints, namely, three components of the Cohen-Mansfield Agitation Inventory, Community version (CMAI-C) rating scale: 
</p>

<ul>
<li><p> Aggressive behavior.
</p>
</li>
<li><p> Non-aggressive agitated behavior. 
</p>
</li>
<li><p> Verbally agitated behavior.
</p>
</li></ul>

<p>Changes in the individual endpoints will be assessed at Day 28. Each endpoint is normally distributed and, since higher scores on this rating scale indicate more severe symptoms, a lower value of each endpoint corresponds to a beneficial effect. The endpoints are assumed to be equally correlated with a common correlation coefficient of 0.4.
</p>
<p>An important feature of this trial is that the trial will meet its primary objective if at least one endpoint test is significant. As a result, the overall Type I error rate will be inflated if the primary analysis is performed without a multiplicity adjustment. To preserve the overall Type I error rate at a one-sided 2.5% level, the Holm procedure will be applied. The three endpoints are considered to be equally important and, by default, equal weights will be assigned to the endpoint-specific null hypotheses of no treatment effect.
</p>
<p>The following design parameters will be used in this example:
</p>

<ul>
<li><p> A total of 380 patients will be enrolled in the trial to be assigned to either placebo or experimental treatment using a 1:1 ratio. 
</p>
</li>
<li><p> The patient dropout rate at the end of the treatment period is expected be 5%.
</p>
</li></ul>

<p>The <code><a href="#topic+MultAdj">MultAdj</a></code> function will be invoked to run power calculations in this trial. A list of all design and multiplicity adjustment parameters (<code>parameters</code>) will be created and passed to this function. A simulation report will be created by calling the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function. Power calculations can also be performed in this trial using a Shiny-based application that can be launched by calling the <code><a href="#topic+MultAdjApp">MultAdjApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+MultAdjApp">MultAdjApp</a></code>, <code><a href="#topic+MultAdj">MultAdj</a></code>, <code><a href="#topic+MultAdjExample1">MultAdjExample1</a></code>, <code><a href="#topic+MultAdjExample3">MultAdjExample3</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Endpoint type
parameters$endpoint_type = "Normal"

# Direction of beneficial effect
parameters$direction = "Lower"

# Number of dose-placebo comparisons
parameters$n_comparisons = 1

# Number of endpoints
parameters$n_endpoints = 3

# Number of enrolled patients (placebo, experimental treatment) 
parameters$sample_size = c(190, 190)

# Patient dropout rate
parameters$dropout_rate = 0.05

parameters$control_mean = c(0, 0, 0)
parameters$treatment_mean = c(-0.3, -0.3, -0.3)
parameters$control_sd = c(1, 1, 1)
parameters$treatment_sd = c(1, 1, 1)

# Endpoint correlation matrix
parameters$endpoint_correlation = matrix(c(1, 0.4, 0.4, 
                                           0.4, 1, 0.4,
                                           0.4, 0.4, 1), 3, 3)

# Multiple testing procedure
parameters$mult_test = "Holm"

# Overall one-sided Type I error rate
parameters$alpha = 0.025

# Number of simulations
parameters$nsims = 100

# Number of cores for parallel calculations
parameters$ncores = 1

# Run simulations to perform power calculations
results = MultAdj(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("MultAdj Multiple endpoints.docx", 
              fileext=".docx"))
</code></pre>

<hr>
<h2 id='MultAdjExample3'>
Simulation-based power calculations in Phase III trials with multiple endpoints and multiple dose-placebo comparisons
</h2><span id='topic+MultAdjExample3'></span>

<h3>Description</h3>

<p>The advanced setting with several sources of multiplicity, i.e., multiplicity induced by the analysis of multiple endpoints as well as multiple dose-placebo comparisons, will be illustrated using a Phase III trial for the treatment of acute schizophrenia. The efficacy profiles of two doses of an experimental treatment (Dose L and Dose H) will be compared to that of placebo using the following two endpoints:  
</p>

<ul>
<li><p> Primary endpoint: Change in the Positive and Negative Syndrome Scale (PANSS) total score.
</p>
</li>
<li><p> Key secondary endpoint: Change in the Clinical Global Impressions severity (CGI-S) score.
</p>
</li></ul>

<p>The efficacy evaluations will be performed at the end of the 4-week treatment period. Both endpoints are normally distributed and a lower value of each endpoint indicates a more favorable outcome. The correlation between the endpoint-specific test statistics is assumed to be 0.5.
</p>
<p>The resulting four null hypotheses of no effect will be grouped into two endpoint-specific families:
</p>

<ul>
<li><p> Family 1: H1 (No difference between Dose L and placebo on the primary endpoint) and H2 (No difference between Dose H and placebo on the primary endpoint).
</p>
</li>
<li><p> Family 2: H3 (No difference between Dose L and placebo on the key secondary endpoint) and H4 (No difference between Dose H and placebo on the key secondary endpoint).
</p>
</li></ul>

<p>Clinically relevant logical restrictions will be imposed on the testing strategy to ensure that H3 can be tested only if H1 is rejected and H4 can be tested only if H2 is rejected.
</p>
<p>The Hochberg-based gatekeeping procedure will be utilized in this trial to control the overall Type I error rate at a one-sided 2.5% level across the four hypotheses of interest. This gatekeeping procedure will be set up using Hochberg-based component procedures, i.e., a truncated version of the Hochberg procedure with the truncation parameter of 0.8 will be applied in Family 1 and the regular Hochberg procedure in Family 2. The modified mixture method will be used in this gatekeeping procedure.
</p>
<p>The following design parameters will be used in this example:
</p>

<ul>
<li><p> A total of 360 patients will be enrolled in the trial. The patients will be allocated to the three trial arms using a 1:1:1 randomization scheme. 
</p>
</li>
<li><p> The patient dropout rate at the end of the 4-week treatment period is expected be 10%.
</p>
</li></ul>

<p>To compute power for the individual hypotheses as well as each of the two families, the design parameters as well as the parameters of the selected gatekeeping procedure (<code>parameters</code>) will passed to the <code><a href="#topic+MultAdj">MultAdj</a></code> function. A simulation report will be created by calling the <code><a href="#topic+GenerateReport">GenerateReport</a></code> function. Power calculations can also be performed in this trial using a Shiny-based application, which can be launched by calling the <code><a href="#topic+MultAdjApp">MultAdjApp</a></code> function.
</p>


<h3>Arguments</h3>

<p>No arguments</p>


<h3>Value</h3>

<p>No return value</p>


<h3>See Also</h3>

<p><code><a href="#topic+MultAdjApp">MultAdjApp</a></code>, <code><a href="#topic+MultAdj">MultAdj</a></code>, <code><a href="#topic+MultAdjExample2">MultAdjExample2</a></code>, <code><a href="#topic+MultAdjExample3">MultAdjExample3</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List of all parameters
parameters = list()

# Endpoint type
parameters$endpoint_type = "Normal"

# Direction of beneficial effect
parameters$direction = "Lower"

# Number of dose-placebo comparisons
parameters$n_comparisons = 2

# Number of endpoints
parameters$n_endpoints = 2

# Number of enrolled patients (placebo, Dose L and Dose H) 
parameters$sample_size = c(120, 120, 120)

# Patient dropout rate
parameters$dropout_rate = 0.10

# Endpoint information (rows corresponds to endpoints and 
# columns corresponds to dose-placebo comparisons)
parameters$control_mean = c(0, 0)
parameters$treatment_mean = matrix(c(-0.30, -0.35, 
                                     -0.35, -0.40), 2, 2, byrow = TRUE)

parameters$control_sd = c(1, 1)
parameters$treatment_sd = matrix(c(1, 1, 
                                   1, 1), 2, 2, byrow = TRUE)

# Endpoint correlation matrix
parameters$endpoint_correlation = matrix(c(1, 0.5, 
                                           0.5, 1), 2, 2)

# Component procedure to be used in the gatekeeping procedure
parameters$mult_test = "Hochberg"

# Mixture method used in the gatekeeping procedure
parameters$mult_method = "Modified"

# Truncation parameters in the gatekeeping procedure
parameters$mult_test_gamma = c(0.8, 1)

# Overall one-sided Type I error rate
parameters$alpha = 0.025

# Number of simulations
parameters$nsims = 100

# Number of cores for parallel calculations
parameters$ncores = 1

# Run simulations to perform power calculations
results = MultAdj(parameters)

# Generate a simulation report (remove tempfile)
GenerateReport(results, 
              tempfile("MultAdj Multiple endpoints and dose-placebo comparisons.docx", 
              fileext=".docx"))
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
