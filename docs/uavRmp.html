<!DOCTYPE html><html><head><title>Help for package uavRmp</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {uavRmp}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#copyDir'><p>copyDir</p></a></li>
<li><a href='#extractExifr'><p>Select UAV Images Information</p></a></li>
<li><a href='#fixGPSAlt'><p>fixGPSAlt</p></a></li>
<li><a href='#getGPSAltDiff'><p>getGPSAltDiff</p></a></li>
<li><a href='#initProj'><p>Defines and creates folders and variables</p></a></li>
<li><a href='#makeAP'><p>UAV Mission Planning tool for autonomous monitoring flight tasks with respect to DSM/DEM, orthophoto data retrieval.</p></a></li>
<li><a href='#makeGlobalVar'><p>Generates a variable with a certain value in the R environment</p></a></li>
<li><a href='#makeTP'><p>Flight Track Planning tool</p></a></li>
<li><a href='#maxpos_on_line'><p>applies a line to a raster and returns the position of the maximum value</p></a></li>
<li><a href='#minBB'><p>Rectangle flight area around points</p></a></li>
<li><a href='#solo_upload'><p>Upload MAV compliant mission File to a 3DR Solo</p></a></li>
<li><a href='#soloLog'><p>Download, reorganize and export the binary log files from 3DR Solo Pixhawk controller or the telemetry log files from the Solo radio control unit</p></a></li>
<li><a href='#sp_line'><p>create an spatiallineobject from 2 points</p></a></li>
<li><a href='#sp_point'><p>create an spatialpointobject from 1 points</p></a></li>
<li><a href='#tutdata_dem'><p>DEM data set of Marburg-Biedenkopf</p></a></li>
<li><a href='#tutdata_dji'><p>DJI image of a survey flight</p></a></li>
<li><a href='#tutdata_flightarea'><p>Flight area planning example data</p></a></li>
<li><a href='#tutdata_flighttrack'><p>GPX example data</p></a></li>
<li><a href='#tutdata_position'><p>position example data</p></a></li>
<li><a href='#tutdata_qgc_survey'><p>Flight area planning Qgroundcontrol survey data</p></a></li>
<li><a href='#tutdata_waypoints'><p>MAVLINK waypoint example data</p></a></li>
<li><a href='#uavRmp'><p>UAV Mission Planner</p></a></li>
<li><a href='#vecDraw'><p>digitizing vector features using a simple leaflet base map</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>UAV Mission Planner</td>
</tr>
<tr>
<td>Version:</td>
<td>0.6.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-01-29</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Chris Reudenbach &lt;reudenbach@uni-marburg.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>The Unmanned Aerial Vehicle Mission Planner provides an easy to use work flow for planning autonomous obstacle avoiding surveys of (almost) ready to fly unmanned aerial vehicles to retrieve aerial or spot related data. It creates either intermediate flight control files for the DJI-Litchi supported series or ready to upload control files for the pixhawk-based flight controller as used in the 3DR-Solo. Additionally it contains some useful tools for digitizing and data manipulation.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/gisma/uavRmp">https://github.com/gisma/uavRmp</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/gisma/uavRmp/issues">https://github.com/gisma/uavRmp/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a> | file LICENSE</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>sp, sf, geosphere, tools, log4r, zoo, methods, brew, exifr,
link2GI, data.table, jsonlite, rlist</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>GNU make</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, markdown, mapview, grDevices, stringr,
htmltools, htmlwidgets, raster</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-01-29 17:14:58 UTC; creu</td>
</tr>
<tr>
<td>Author:</td>
<td>Chris Reudenbach [cre, aut],
  Marvin Ludwig [ctb],
  Sebastian Richter [ctb],
  Florian Detsch [ctb],
  Hanna Meyer [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-01-29 17:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='copyDir'>copyDir</h2><span id='topic+copyDir'></span>

<h3>Description</h3>

<p>copyDir copy all image data to the corresponding folder
</p>


<h3>Usage</h3>

<pre><code class='language-R'>copyDir(fromDir, toProjDir, pattern = "*")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="copyDir_+3A_fromdir">fromDir</code></td>
<td>
<p><code>character</code> a path to the image data</p>
</td></tr>
<tr><td><code id="copyDir_+3A_toprojdir">toProjDir</code></td>
<td>
<p><code>character</code> a path to the projRootDir</p>
</td></tr>
<tr><td><code id="copyDir_+3A_pattern">pattern</code></td>
<td>
<p><code>character</code> a string pattern for filtering  file list</p>
</td></tr>
</table>

<hr>
<h2 id='extractExifr'>Select UAV Images Information</h2><span id='topic+extractExifr'></span>

<h3>Description</h3>

<p>extract all and returns specific exif information from a list of images
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extractExifr(path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extractExifr_+3A_path">path</code></td>
<td>
<p>path to the images files</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame of image positions and travel distance
</p>

<hr>
<h2 id='fixGPSAlt'>fixGPSAlt</h2><span id='topic+fixGPSAlt'></span>

<h3>Description</h3>

<p>fixes broken GPS altitudes in the exif data of DJI images  with the given differen value
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fixGPSAlt(path, diff, camType = "YUN")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fixGPSAlt_+3A_path">path</code></td>
<td>
<p><code>character</code>  path to the images</p>
</td></tr>
<tr><td><code id="fixGPSAlt_+3A_diff">diff</code></td>
<td>
<p><code>number</code> fixing value in meter</p>
</td></tr>
<tr><td><code id="fixGPSAlt_+3A_camtype">camType</code></td>
<td>
<p><code>character</code> default is &quot;YUN&quot; for Yuneec H520RTK alternative is &quot;DJI&quot;</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

picFN &lt;- system.file("extdata", "dji.jpg", package = "uavRmp")


## End(Not run)
</code></pre>

<hr>
<h2 id='getGPSAltDiff'>getGPSAltDiff</h2><span id='topic+getGPSAltDiff'></span>

<h3>Description</h3>

<p>extract the difference of the exif GPS aLtitude tag and a given DEM altitude at this point
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getGPSAltDiff(picPath, demPath)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getGPSAltDiff_+3A_picpath">picPath</code></td>
<td>
<p><code>character</code> a path to the image</p>
</td></tr>
<tr><td><code id="getGPSAltDiff_+3A_dempath">demPath</code></td>
<td>
<p><code>character</code> a path to the DEM</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
demFN &lt;- system.file("extdata", "mrbiko.tif", package = "uavRmp")
picFN &lt;- system.file("extdata", "dji.jpg", package = "uavRmp")


## End(Not run)
</code></pre>

<hr>
<h2 id='initProj'>Defines and creates folders and variables</h2><span id='topic+initProj'></span>

<h3>Description</h3>

<p>Defines and creates (if necessary) all folders variables
set the SAGA path variables and other system variables
exports all variables to the global environment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>initProj(
  projRootDir = getwd(),
  projFolders = c("log/", "control/", "run/", "data/")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="initProj_+3A_projrootdir">projRootDir</code></td>
<td>
<p>project github root directory (your github name)</p>
</td></tr>
<tr><td><code id="initProj_+3A_projfolders">projFolders</code></td>
<td>
<p>list of subfolders in project</p>
</td></tr>
</table>

<hr>
<h2 id='makeAP'>UAV Mission Planning tool for autonomous monitoring flight tasks with respect to DSM/DEM, orthophoto data retrieval.</h2><span id='topic+makeAP'></span>

<h3>Description</h3>

<p>The basic idea is to provide an easy to use workflow for controlling rtf-UAVs for planning autonomous surveys to retrieve aerial data sets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeAP(
  projectDir = tempdir(),
  locationName = "flightArea",
  surveyArea = NULL,
  flightAltitude = 100,
  launchAltitude = NULL,
  followSurface = FALSE,
  followSurfaceRes = 25,
  demFn = NULL,
  noFiles = 1,
  altFilter = 1,
  horizonFilter = 30,
  flightPlanMode = "track",
  useMP = FALSE,
  presetFlightTask = "remote",
  overlap = 0.8,
  maxSpeed = 20,
  maxFlightTime = 10,
  picRate = 2,
  windCondition = 0,
  uavType = "pixhawk",
  cameraType = "MAPIR2",
  cmd = 16,
  uavViewDir = 0,
  maxwaypoints = 9999,
  above_ground = TRUE,
  djiBasic = c(0, 0, 0, -90, 0),
  dA = FALSE,
  heatMap = FALSE,
  picFootprint = FALSE,
  rcRange = NULL,
  copy = FALSE,
  runDir = tempdir(),
  gdalLink = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeAP_+3A_projectdir">projectDir</code></td>
<td>
<p><code>character</code> path to the main folder where several locations can be hosted, default is <code>tempdir()</code></p>
</td></tr>
<tr><td><code id="makeAP_+3A_locationname">locationName</code></td>
<td>
<p><code>character</code> path to the location folder where all tasks of this plot are hosted, default is <code>"flightArea"</code></p>
</td></tr>
<tr><td><code id="makeAP_+3A_surveyarea">surveyArea</code></td>
<td>
<p>you may provide either the coordinates by
c(lon1,lat1,lon2,lat2,lon3,lat3,launchLat,launchLon) or
an OGR compatible file (prefunable to find an inherited method for function ‘makeAP’ for signature ‘&quot;missing&quot;’erably geoJSON or KML) with
at least 4 coordinates that describe the flight area.
The fourth coordinate is the launch position.
You will find further explanation under seealso.</p>
</td></tr>
<tr><td><code id="makeAP_+3A_flightaltitude">flightAltitude</code></td>
<td>
<p>set the default flight altitude of the mission. It is
assumed that the UAV is started at the highest point of the surveyArea
otherwise you have to defined the position of launching.</p>
</td></tr>
<tr><td><code id="makeAP_+3A_launchaltitude">launchAltitude</code></td>
<td>
<p>absolute altitude of launching position.
It will overwrite the DEM based estimation if any other value than -9999</p>
</td></tr>
<tr><td><code id="makeAP_+3A_followsurface">followSurface</code></td>
<td>
<p><code>boolean</code>  TRUE performs an altitude correction
of the mission's flight altitude using additional DEM data.
If no DEM data is provided and <code>followSurface</code> is TRUE,
SRTM data will be downloaded and used.
Further explanation at seealso</p>
</td></tr>
<tr><td><code id="makeAP_+3A_followsurfaceres">followSurfaceRes</code></td>
<td>
<p>horizontal step distance for analyzing the DEM altitudes</p>
</td></tr>
<tr><td><code id="makeAP_+3A_demfn">demFn</code></td>
<td>
<p>filename of the corresponding DEM data file.</p>
</td></tr>
<tr><td><code id="makeAP_+3A_nofiles">noFiles</code></td>
<td>
<p>manual split number of files</p>
</td></tr>
<tr><td><code id="makeAP_+3A_altfilter">altFilter</code></td>
<td>
<p>if <code>followingTerrain</code> is equal <code>TRUE</code> then
<code>altFilter</code> is the threshold value of accepted altitude difference (m) between two way points.
If this value is not exceeded, the way point is omitted due to the fact that only 99 way points per mission are allowed.</p>
</td></tr>
<tr><td><code id="makeAP_+3A_horizonfilter">horizonFilter</code></td>
<td>
<p>integer filter size of the rolling filter kernel for the flight track. Must be multiplied by the <code>followSurfaceRes</code> to get the spatial extent</p>
</td></tr>
<tr><td><code id="makeAP_+3A_flightplanmode">flightPlanMode</code></td>
<td>
<p>type of flight plan. Available are: <code>"waypoints"</code>,
<code>"track"</code>, <code>"manual"</code>.</p>
</td></tr>
<tr><td><code id="makeAP_+3A_usemp">useMP</code></td>
<td>
<p>default is FALSE switches to use a missionplanner/Qgroundcontrolplanner survey as planning base</p>
</td></tr>
<tr><td><code id="makeAP_+3A_presetflighttask">presetFlightTask</code></td>
<td>
<p>(DJI only) strongly recommended to use &quot;remote&quot;
<br />
Options are:
<code>"simple_ortho"</code> takes one picture/way point,
<code>"multi_ortho"</code> takes 4 picture at a waunable to find an inherited method for function ‘makeAP’ for signature ‘&quot;missing&quot;’unable to find an inherited method for function ‘makeAP’ for signature ‘&quot;missing&quot;’ypoint, two vertically down and two in forward and backward viewing direction and an Angele of -60deg,
<code>"simple_pano"</code> takes a 360 deg panorama picture and
<code>"remote"</code> which assumes that the camera is controlled by the remote control (RC)</p>
</td></tr>
<tr><td><code id="makeAP_+3A_overlap">overlap</code></td>
<td>
<p>overlapping of the pictures in percent (1.0 = 100)</p>
</td></tr>
<tr><td><code id="makeAP_+3A_maxspeed">maxSpeed</code></td>
<td>
<p>cruising speed</p>
</td></tr>
<tr><td><code id="makeAP_+3A_maxflighttime">maxFlightTime</code></td>
<td>
<p>user defined estimation of the lipo lifetime (20 min default)</p>
</td></tr>
<tr><td><code id="makeAP_+3A_picrate">picRate</code></td>
<td>
<p>fastest stable interval (s) for shooting pictures</p>
</td></tr>
<tr><td><code id="makeAP_+3A_windcondition">windCondition</code></td>
<td>
<p>1= calm 2= light air 1-5km/h, 3= light breeze 6-11km/h, 4=gentle breeze 12-19km/h 5= moderate breeze 20-28km/h</p>
</td></tr>
<tr><td><code id="makeAP_+3A_uavtype">uavType</code></td>
<td>
<p>type of uav. currently &quot;dji_csv&quot; and &quot;solo&quot; are supported</p>
</td></tr>
<tr><td><code id="makeAP_+3A_cameratype">cameraType</code></td>
<td>
<p>depending on uav system for dji the dji4k is default for solo you can choose GP3_7MP GP3_11MP and MAPIR2</p>
</td></tr>
<tr><td><code id="makeAP_+3A_cmd">cmd</code></td>
<td>
<p>mavlink command</p>
</td></tr>
<tr><td><code id="makeAP_+3A_uavviewdir">uavViewDir</code></td>
<td>
<p>dview direction of uav</p>
</td></tr>
<tr><td><code id="makeAP_+3A_maxwaypoints">maxwaypoints</code></td>
<td>
<p>maximal number of waypoints for Litchi default is 90</p>
</td></tr>
<tr><td><code id="makeAP_+3A_above_ground">above_ground</code></td>
<td>
<p>Litchi setting if the waypoint altitudes are interpreted as AGL default = TRUE</p>
</td></tr>
<tr><td><code id="makeAP_+3A_djibasic">djiBasic</code></td>
<td>
<p>c(0,0,0,-90)
<br /> curvesize (DJI only) controls the curve angle of the uav passing way points.
By default it is set to (<code style="white-space: pre;">&#8288;= 0.0&#8288;</code>).
<br /> rotationdir (DJI only) camera control parameter set the UAV basic turn direction to right (0) or left (1)
<br /> gimbalmode (DJI only) camera control parameter
<code>0</code> deactivates the gimbal control
<code>1</code> activates the gimbal for focusing POIs
<code>2</code> activates the gimbal for focus and interpolate a field of view in an angel of <code>gimbalpitchangle</code>
<br /> gimbalpitchangle (DJI only) vertical angle of camera  <code style="white-space: pre;">&#8288;+30 deg..-90 deg&#8288;</code>
<br /> actiontype (DJI only) individual actionype settings of the camera c(1,1,...)
<br /> actionparam (DJI only) corresponding parameter for the above individual actiontype c(0,0,...)
<code>uavViewDir</code> viewing direction of camera default is <code>0</code></p>
</td></tr>
<tr><td><code id="makeAP_+3A_da">dA</code></td>
<td>
<p>if TRUE the real extent of the used DEM is returned helpful for low altitudes flight planning</p>
</td></tr>
<tr><td><code id="makeAP_+3A_heatmap">heatMap</code></td>
<td>
<p>switch for calculating the overlapping factor on a raster map</p>
</td></tr>
<tr><td><code id="makeAP_+3A_picfootprint">picFootprint</code></td>
<td>
<p>switch for calculating the footprint at all way points</p>
</td></tr>
<tr><td><code id="makeAP_+3A_rcrange">rcRange</code></td>
<td>
<p>range of estimated range of remote control</p>
</td></tr>
<tr><td><code id="makeAP_+3A_copy">copy</code></td>
<td>
<p>copy switch</p>
</td></tr>
<tr><td><code id="makeAP_+3A_rundir">runDir</code></td>
<td>
<p><code>character</code> runtime folder</p>
</td></tr>
<tr><td><code id="makeAP_+3A_gdallink">gdalLink</code></td>
<td>
<p>link to GDAL binaries</p>
</td></tr>
</table>


<h3>Details</h3>

<p>makeAP (make aerial plan) creates either intermediate flight control files for the
DJI phantom x UAVs or ready to upload control files for the 3DR Solo/PixHawk flight controller. The
DJI control files are designed for using with the proprietary litchi flight
control app exchange format, while the 3DR Solo/PixHawk flight controller files are using the MAVLINK
common message set, that is used by the PixHawk flight controller family.
Both are implemented very rudimentary.<br /><br /> DJI:<br /> The reason using DJI
is their absolute straightforward usage. Everybody can fly with a DJI but
the price is a more or less closed system at least in the low budget segment. There are workarounds like the litchi app that provides
additionally to a cloud based mission planner an offline/standalone
interface to upload a CSV formatted way point file for autonomous flights to
the Phantom.<br /><br /> PixHawk flight controller/3DR Solo:<br /> The open UAV community is focused
on the PixHawk autopilot unit and the Mission Planner software. It is well
documented and several APIs are provided. Nevertheless a high resolution
terrain following flight planning tool for  autonomous obstacle avoiding flight missions
is not available. <code>makeAP</code> creates a straightforward version of MAV format flight control
rules that are ready to be uploaded directly on the Pixhawk controller using the <code>solo_upload</code> function.<br /><br />
</p>


<h3>Warning</h3>

<p>Take care! There are still a lot of construction zones
around. This script is far beyond to be in a mature state. Please control
and backup all controls again while planning and performing autonomous
flight plans and missions. You will have a lot of chances to make a small
mistake what may yield in a damage of your UAV or even worse in involving
people, animals or non-cash assets. Check your risk, use parachute systems
and even if it is running like a charm, keep alert!
</p>


<h3>See Also</h3>

<p>The underlying concept, a tutorial and a field guide can be found in the package vignettes. See <code>browseVignettes("uavRmp")</code> or <code>vignette(package = "uavRmp")</code> or
at <a href="https://gisma.github.io/uavRmp/articles/uavRmp_1.html">Github uavRmp manual</a>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Depending on the arguments, the following spatial data sets can be returned:

# lp      the planned launching position of the UAV.
# wp      waypoints inclusive all information
# oDEM    the original (input) digital surface model (DSM)
# rDEM    the resampled (used) DSM
# fp      optimized footprints of the camera
# fA      flight area with at least 2 overlaps
# rcA     area covered by the RC according to the range and line of sight
# hm      a heatmap abundance of pictures/pixel (VERY SLOW, only if heatMap = TRUE)

## for visualisation and vecDraw load mapview
require(mapview)

## (1) get example DEM data
demFn &lt;- system.file("extdata", "mrbiko.tif", package = "uavRmp")
tutorial_flightArea &lt;- system.file("extdata", "flightarea.kml", package = "uavRmp")

## (2) simple flight, 100 meters above ground
##     assuming a flat topography,

fp &lt;- makeAP(surveyArea = tutorial_flightArea,
              demFn = demFn)
              
## (3) typical real case scenario (1)
##     A flight altitudes BELOW 50 m is ambitious and risky
##     You have to use a high quality high resulution DSM
##     (here simulated with a standard DEM)



## (4) typical real case scenario (2)
##     A flight altitudes BELOW 50 m is ambitious and risky
##     You have to use a high quality high resulution DSM
##     (here simulated with a standard DEM)
##     This examples uses a flight planning from the QGroundcotrol Survey planning tool
##     It also used the all calculations for camera flight speed etc.
##     NOTE EXPERIMENTAL 

demFn &lt;- system.file("extdata", "mrbiko.tif", package = "uavRmp")
tutorial_flightArea &lt;- system.file("extdata", "qgc_survey.plan", package = "uavRmp")
fp &lt;- makeAP(surveyArea=tutorial_flightArea,
            useMP = TRUE,
            followSurface = TRUE,
            demFn = demFn,
            windCondition = 1,
            uavType = "pixhawk",
            followSurfaceRes = 5,
             altFilter = .75)

## (5) typical real case scenario (3)
##     This examples uses a flight planning from the QGroundcotrol Survey planning tool
##     It also used the all calculations for camera flight speed etc.
##     The flight plan is modyfied by splitting up the task according to 99 Waypoints
##     and flight time and saved as litchi csv format 
##     NOTE EXPERIMENTAL tested with DJI mavic mini 2

demFn &lt;- system.file("extdata", "mrbiko.tif", package = "uavRmp")
tutorial_flightArea &lt;- system.file("extdata", "qgc_survey.plan", package = "uavRmp")
fp &lt;- makeAP(surveyArea=tutorial_flightArea,
            useMP = TRUE,
            demFn = demFn,
            maxFlightTime = 25,
            uavType = "dji_csv")
            
## call a simple shiny interface
shiny::runApp(system.file("shiny/plan2litchi/", "app.R", package = "uavRmp"))
        
        
## (6) view results

mapview::mapview(fp$wp,cex=4, lwd=0.5)+
mapview::mapview(fp$lp,color = "red", lwd=1,cex=4)+
mapview::mapview(fp$fA,color="blue", alpha.regions = 0.1,lwd=0.5)+
mapview::mapview(fp$oDEM,col=terrain.colors(256))



## (6) digitize flight area using the small "onboard" tool vecDraw()
##     save vectors as "kml" or "json" files
##     provide full filename  +  extension!


vecDraw(preset="uav")

## End(Not run)
</code></pre>

<hr>
<h2 id='makeGlobalVar'>Generates a variable with a certain value in the R environment</h2><span id='topic+makeGlobalVar'></span>

<h3>Description</h3>

<p>Generates a variable with a certain value in the R environment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeGlobalVar(name, value)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeGlobalVar_+3A_name">name</code></td>
<td>
<p>character string name of the variable</p>
</td></tr>
<tr><td><code id="makeGlobalVar_+3A_value">value</code></td>
<td>
<p>character string value of the variable</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# creates the global var `pathToData` with the value `~/home/data`
makeGlobalVar("pathToData","~/home/data") 


## End(Not run)

</code></pre>

<hr>
<h2 id='makeTP'>Flight Track Planning tool</h2><span id='topic+makeTP'></span>

<h3>Description</h3>

<p>makeTP generates a flight track chaining up point objects with respect to a heterogenous surface and known obstacles as documented by an DSM for taking top down pictures. It creates a single control file for autonomous picture retrieval flights.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeTP(
  projectDir = tempdir(),
  locationName = "treePos",
  missionTrackList = NULL,
  launchPos = c(8.772055, 50.814689),
  demFn = NULL,
  flightAltitude = 100,
  climbDist = 7.5,
  aboveTreeAlt = 15,
  circleRadius = 1,
  takeOffAlt = 50,
  presetFlightTask = "remote",
  maxSpeed = 25,
  followSurfaceRes = 5,
  altFilter = 0.5,
  windCondition = 1,
  launchAltitude = -9999,
  uavType = "pixhawk",
  cameraType = "MAPIR2",
  copy = FALSE,
  runDir = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeTP_+3A_projectdir">projectDir</code></td>
<td>
<p><code>character</code> path to the main folder where several projects can be hosted, default is <code>tempdir()</code></p>
</td></tr>
<tr><td><code id="makeTP_+3A_locationname">locationName</code></td>
<td>
<p><code>character</code> base name string of the mission, default is <code>"treePos"</code></p>
</td></tr>
<tr><td><code id="makeTP_+3A_missiontracklist">missionTrackList</code></td>
<td>
<p><code>character</code> filename of the mission tracklist (target positions), default is <code>NULL</code></p>
</td></tr>
<tr><td><code id="makeTP_+3A_launchpos">launchPos</code></td>
<td>
<p><code>list</code> launch position c(longitude,latitude), default is <code>c(8.772055,50.814689)</code></p>
</td></tr>
<tr><td><code id="makeTP_+3A_demfn">demFn</code></td>
<td>
<p><code>character</code> filename of the used DSM data file, default is <code>NULL</code></p>
</td></tr>
<tr><td><code id="makeTP_+3A_flightaltitude">flightAltitude</code></td>
<td>
<p><code>numeric</code> set the AGL flight altitude (AGL while the provided raster model represents this surface) of the mission, default is <code>100</code>
default is (<code style="white-space: pre;">&#8288;= 0.0&#8288;</code>). If set to <code>-99</code> it will be
calculated from the swath width of the pictures. NOTE: This makes only sense for
<code>followingTerrain = TRUE</code> to smooth curves.
For <code>flightPlanMode = "waypoint"</code> camera actions (DJI only EXPERIMENTAL) are DISABLED during curve flights.</p>
</td></tr>
<tr><td><code id="makeTP_+3A_climbdist">climbDist</code></td>
<td>
<p><code>numeric</code> distance within the uav will climb on the caluclated save flight altitude in meter, default is <code>7.5</code></p>
</td></tr>
<tr><td><code id="makeTP_+3A_abovetreealt">aboveTreeAlt</code></td>
<td>
<p><code>numeric</code> minimum flight height above target trees in meter, default is <code>15.0</code></p>
</td></tr>
<tr><td><code id="makeTP_+3A_circleradius">circleRadius</code></td>
<td>
<p><code>numeric</code> radius to circle around above target trees in meter, default is <code>1.0</code></p>
</td></tr>
<tr><td><code id="makeTP_+3A_takeoffalt">takeOffAlt</code></td>
<td>
<p>altitude <code>numeric</code> climb altitude of the uav at take off position in meter, default is <code>50.0</code></p>
</td></tr>
<tr><td><code id="makeTP_+3A_presetflighttask">presetFlightTask</code></td>
<td>
<p><code>character</code> (DJI only EXPERIMENTAL). NOTE: it is strongly recommended to use the default <code>"remote"</code> <br />
Further options are: <br />
<code>"simple_ortho"</code> takes one picture/waypoint,
<code>"multi_ortho"</code> takes 4 picture at a waypoint, two vertically down and two in forward and backward viewing direction and an angele of -60deg,
<code>"simple_pano"</code> takes a 360 deg panorama picture and
<code>"remote"</code> which assumes that the camera is controlled by the remote control (RC)</p>
</td></tr>
<tr><td><code id="makeTP_+3A_maxspeed">maxSpeed</code></td>
<td>
<p><code>numeric</code>  cruising speed, default is <code>25.0</code></p>
</td></tr>
<tr><td><code id="makeTP_+3A_followsurfaceres">followSurfaceRes</code></td>
<td>
<p><code>numeric</code>, default is <code>5</code> meter.</p>
</td></tr>
<tr><td><code id="makeTP_+3A_altfilter">altFilter</code></td>
<td>
<p><code>numeric</code> allowed altitude differences bewteen two waypoints in meter, default is <code>0.5</code></p>
</td></tr>
<tr><td><code id="makeTP_+3A_windcondition">windCondition</code></td>
<td>
<p><code>numeric</code>options are 1= calm 2= light air 1-5km/h, 3= light breeze 6-11km/h, 4=gentle breeze 12-19km/h 5= moderate breeze 20-28km/h, default is <code>1</code></p>
</td></tr>
<tr><td><code id="makeTP_+3A_launchaltitude">launchAltitude</code></td>
<td>
<p><code>numeric</code> altitude of launch position. If set to <code>-9999</code> a DEM is required for extracting the MSL, default is <code>-9999</code></p>
</td></tr>
<tr><td><code id="makeTP_+3A_uavtype">uavType</code></td>
<td>
<p><code>character</code>  type of UAV. Currently &quot;dji_csv&quot; and &quot;pixhawk&quot; are supported, default is <code>"pixhawk"</code></p>
</td></tr>
<tr><td><code id="makeTP_+3A_cameratype">cameraType</code></td>
<td>
<p><code>character</code>, default is <code>"MAPIR2"</code>.</p>
</td></tr>
<tr><td><code id="makeTP_+3A_copy">copy</code></td>
<td>
<p><code>boolean</code> copy used file to data folder default is <code>FALSE</code></p>
</td></tr>
<tr><td><code id="makeTP_+3A_rundir">runDir</code></td>
<td>
<p><code>character</code> runtime folder</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## (1) get example DEM data
dsmFn &lt;- system.file("extdata", "mrbiko.tif", package = "uavRmp")
## (2) make position flight plan
makeTP  &lt;-  makeTP(missionTrackList= tutorial_flightArea,
                  demFn = dsmFn,
                  uavType = "pixhawk",
                  launchPos = c(8.679,50.856))

## End(Not run)
</code></pre>

<hr>
<h2 id='maxpos_on_line'>applies a line to a raster and returns the position of the maximum value</h2><span id='topic+maxpos_on_line'></span>

<h3>Description</h3>

<p>applies a line to a raster and returns the position of the maximum value
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maxpos_on_line(dem, line)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="maxpos_on_line_+3A_dem">dem</code></td>
<td>
<p>raster object</p>
</td></tr>
<tr><td><code id="maxpos_on_line_+3A_line">line</code></td>
<td>
<p>sp object</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## load DEM/DSM 
dem &lt;- raster::raster(system.file("extdata", "mrbiko.tif", package = "uavRmp"))

## generate extraction line object
line &lt;- sp_line(c(8.66821,8.68212),c(50.83939,50.83267),ID="Highest Position",runDir=runDir)
## extract highest position
maxpos_on_line(dem,line)  

## End(Not run)
</code></pre>

<hr>
<h2 id='minBB'>Rectangle flight area around points</h2><span id='topic+minBB'></span>

<h3>Description</h3>

<p>Creates optimal rectangle area around points
</p>


<h3>Usage</h3>

<pre><code class='language-R'>minBB(points, buffer = 0, epsg = 25832)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="minBB_+3A_points">points</code></td>
<td>
<p>a sf object, points you want to fly over</p>
</td></tr>
<tr><td><code id="minBB_+3A_buffer">buffer</code></td>
<td>
<p>buffer distance between the points and the rectangle; defaults 0</p>
</td></tr>
<tr><td><code id="minBB_+3A_epsg">epsg</code></td>
<td>
<p>reference system</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The code is based on a Rotating Caliper Algorithm and mostly copy and pasted (see reference)
</p>


<h3>Value</h3>

<p>SpatialPoints: Corners of the flight area
</p>


<h3>Author(s)</h3>

<p>Marvin Ludwig
</p>


<h3>References</h3>

<p>http://dwoll.de/rexrepos/posts/diagBounding.html
</p>

<hr>
<h2 id='solo_upload'>Upload MAV compliant mission File to a 3DR Solo</h2><span id='topic+solo_upload'></span>

<h3>Description</h3>

<p>solo_upload provides a crude interface to upload the Solo mission file to the 3dr SOLO
</p>


<h3>Usage</h3>

<pre><code class='language-R'>solo_upload(
  missionFile = NULL,
  connection = "udp:10.1.1.166:14550",
  prearm = "-1"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="solo_upload_+3A_missionfile">missionFile</code></td>
<td>
<p>mission file to upload</p>
</td></tr>
<tr><td><code id="solo_upload_+3A_connection">connection</code></td>
<td>
<p>a valid connection string to the Solo default is &quot;udp:10.1.1.166:14550&quot;</p>
</td></tr>
<tr><td><code id="solo_upload_+3A_prearm">prearm</code></td>
<td>
<p><code>character</code> controls the prearm status of the Solo prearm check<br /> 0=Disabled<br /> 1=Enabled<br /> -3=Skip Baro<br /> -5=Skip Compass<br /> -9=Skip GPS<br /> -17=Skip INS<br /> -33=Skip Params/Rangefinder<br /> -65=Skip RC<br /> 127=Skip Voltage<br />
default is <code>-1</code><br /><br /> Find more information at <a href="https://ardupilot.org">prearm safety</a>,<br /> <a href="https://github.com/dronekit/dronekit-python">Mission import export script</a>.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>Becareful with fooling around with the prearm stuff. It is kind of VERY sensitive for the later autonomous flights!<br /> For using the Solo stuff you need to install: <br /> sudo pip install pymavlink;<br /> sudo pip install dronekit-sitl;<br /> sudo pip install dronekit; <br /> sudo apt-get install sshpass<br /> Additionally you need to be connected to a running 3DR Solo uav
</p>


<h3>Examples</h3>

<pre><code class='language-R'>wp &lt;- system.file("extdata", "MAVLINK_waypoints.txt", package = "uavRmp")
## Not run: 
solo_upload( missionFile = wp)

## End(Not run)
</code></pre>

<hr>
<h2 id='soloLog'>Download, reorganize and export the binary log files from 3DR Solo Pixhawk controller or the telemetry log files from the Solo radio control unit</h2><span id='topic+soloLog'></span>

<h3>Description</h3>

<p>Wraps the mavtogpx.py converter as provided by the <a href="https://github.com/dronekit/dronekit-python">dronkit library</a>). It downloads and optionally converts the most important 3DR Solo logfiles. Optionally you may import the geometries and data as <code>sp</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>soloLog(
  logFileSample = "recent",
  logSource = "rc",
  logDest = tempdir(),
  downloadOnly = FALSE,
  netWarn = FALSE,
  renameFiles = TRUE,
  makeSP = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="soloLog_+3A_logfilesample">logFileSample</code></td>
<td>
<p><code>character</code> , options are:  <code>recent</code> download the most recent logfile,  <code>all</code> downloads all logfiles, or a plain number e.g. <code>2</code> for a specific logfile. Note the telemetry logfiles are numbering from 1 to 9 only, the most recent one is not numbered. The binary logfiles from the pixhawk are numbering continously but only the last 50 files or so will exist.</p>
</td></tr>
<tr><td><code id="soloLog_+3A_logsource">logSource</code></td>
<td>
<p><code>character</code>, options are: <code>rc</code> = logfiles from the radio control, <code>pixhawk</code> = logfiles from the flightcontroller, default is set to  <code>rc</code>. The radio control is providing the last ten telemetry data files, while the flight controller provides the latest 50 binary logfiles.</p>
</td></tr>
<tr><td><code id="soloLog_+3A_logdest">logDest</code></td>
<td>
<p><code>character</code> (existing) destination path to which the logs should be downloaded to</p>
</td></tr>
<tr><td><code id="soloLog_+3A_downloadonly">downloadOnly</code></td>
<td>
<p><code>logical</code> wether to only download the files or also convert and rename them, default is set FALSE</p>
</td></tr>
<tr><td><code id="soloLog_+3A_netwarn">netWarn</code></td>
<td>
<p><code>logical</code> wether to warn and waits before starting a connection to the controller. helps while testing due to occassional wifi shutdowns of the Solo, default is set to FALSE</p>
</td></tr>
<tr><td><code id="soloLog_+3A_renamefiles">renameFiles</code></td>
<td>
<p><code>logical</code> renames the log and gpx files according to the time period, default is set TRUE</p>
</td></tr>
<tr><td><code id="soloLog_+3A_makesp">makeSP</code></td>
<td>
<p><code>logical</code> wether returning an <code>sp</code> object from the gpx files or not, default is FALSE</p>
</td></tr>
</table>


<h3>Note</h3>

<p>for using the Solo stuff is tested only for Linux and the bash shell under Windows 10. You need to install the following python libs: <br />
<code style="white-space: pre;">&#8288;sudo pip install pymavlink&#8288;</code>  <br />
<code style="white-space: pre;">&#8288;sudo pip install dronekit-sitl&#8288;</code> <br />
<code style="white-space: pre;">&#8288;sudo pip install dronekit&#8288;</code> <br /> <br />
Additionally you need <code>sshpass</code>:<br />
<code style="white-space: pre;">&#8288;sudo apt-get install sshpass&#8288;</code> <br />
<br /> And please rememeber - you need to be connected at least to a running 3DR Solo radio control and if you want to donload data from the Pixhawk to a Solo UAV
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## download recent telemetry log file from controller and convert it to gpx
soloLog(logFiles = "solo.tlog")

## download the last available logfile from the radio control
soloLog()

## download ALL logfiles from the radio control
soloLog(logFiles = "all")

## download ALL telemetry logfiles from the flight controller
soloLog(logSource = "pixhawk",logFiles = "all")

## download telementry logfile number 5  from the remote control
soloLog(logSource = "rc",logFiles = "5")

## End(Not run)
</code></pre>

<hr>
<h2 id='sp_line'>create an spatiallineobject from 2 points</h2><span id='topic+sp_line'></span>

<h3>Description</h3>

<p>create an spatiallineobject from 2 points, optional export as shapefile
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sp_line(
  Y_coords,
  X_coords,
  ID = "ID",
  proj4 = "+proj=longlat +datum=WGS84 +no_defs",
  export = FALSE,
  runDir
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sp_line_+3A_y_coords">Y_coords</code></td>
<td>
<p>Y/lat coordinates</p>
</td></tr>
<tr><td><code id="sp_line_+3A_x_coords">X_coords</code></td>
<td>
<p>X/lon coordinates</p>
</td></tr>
<tr><td><code id="sp_line_+3A_id">ID</code></td>
<td>
<p>id of line</p>
</td></tr>
<tr><td><code id="sp_line_+3A_proj4">proj4</code></td>
<td>
<p>projection</p>
</td></tr>
<tr><td><code id="sp_line_+3A_export">export</code></td>
<td>
<p>write shafefile default = F</p>
</td></tr>
<tr><td><code id="sp_line_+3A_rundir">runDir</code></td>
<td>
<p><code>character</code> runtime folder</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## creating sp spatial point object
line &lt;- sp_line(c(8.770367,8.771161,8.771536),
                c(50.815172,50.814743,50.814875),
                runDir=tempdir())

## plot it
raster::plot(line)

## End(Not run)
</code></pre>

<hr>
<h2 id='sp_point'>create an spatialpointobject from 1 points</h2><span id='topic+sp_point'></span>

<h3>Description</h3>

<p>create an spatial point object from 1 point and optionally export it as a shapefile
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sp_point(
  lon,
  lat,
  ID = "point",
  proj4 = "+proj=longlat +datum=WGS84 +no_defs",
  export = FALSE,
  runDir = runDir
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sp_point_+3A_lon">lon</code></td>
<td>
<p>lon</p>
</td></tr>
<tr><td><code id="sp_point_+3A_lat">lat</code></td>
<td>
<p>lat</p>
</td></tr>
<tr><td><code id="sp_point_+3A_id">ID</code></td>
<td>
<p>name of point</p>
</td></tr>
<tr><td><code id="sp_point_+3A_proj4">proj4</code></td>
<td>
<p>projection</p>
</td></tr>
<tr><td><code id="sp_point_+3A_export">export</code></td>
<td>
<p>write shafefile default = F</p>
</td></tr>
<tr><td><code id="sp_point_+3A_rundir">runDir</code></td>
<td>
<p><code>character</code> runtime folder</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## creating sp spatial point object
point &lt;- sp_point(8.770362,50.815240,ID="Faculty of Geographie Marburg")

## plot it
raster::plot(point)

## End(Not run)
</code></pre>

<hr>
<h2 id='tutdata_dem'>DEM data set of Marburg-Biedenkopf</h2><span id='topic+tutdata_dem'></span>

<h3>Description</h3>

<p>DEM data set resampled to 20 m resolution
</p>


<h3>Format</h3>

<p><code>"raster::raster"</code>
</p>


<h3>Details</h3>

<p>DEM data set of Marburg-Biedenkopf
</p>


<h3>Source</h3>

<p><code style="white-space: pre;">&#8288;Faculty of Geography UAV derived data from Marburg University Forest first campaign&#8288;</code>
</p>

<hr>
<h2 id='tutdata_dji'>DJI image of a survey flight</h2><span id='topic+tutdata_dji'></span>

<h3>Description</h3>

<p>DJI image of a survey flight
</p>


<h3>Format</h3>

<p><code>"raster::raster"</code>
</p>


<h3>Details</h3>

<p>DJI image of a survey flight
</p>


<h3>Source</h3>

<p><code style="white-space: pre;">&#8288;Faculty of Geography UAV derived data from Marburg University Forest first campaign&#8288;</code>
</p>

<hr>
<h2 id='tutdata_flightarea'>Flight area planning example data</h2><span id='topic+tutdata_flightarea'></span>

<h3>Description</h3>

<p>Flight area planning example data as typically needed for planning an autonomous survey flight task
</p>


<h3>Details</h3>

<p>Flight area planning example data
</p>


<h3>Source</h3>

<p><code style="white-space: pre;">&#8288;Faculty of Geography Marburg&#8288;</code>
</p>

<hr>
<h2 id='tutdata_flighttrack'>GPX example data</h2><span id='topic+tutdata_flighttrack'></span>

<h3>Description</h3>

<p>GPX example data as derived by a 3DR Solo flight
</p>


<h3>Details</h3>

<p>GPX example data
</p>


<h3>Source</h3>

<p><code style="white-space: pre;">&#8288;Faculty of Geography UAV derived data from Marburg University Forest first campaign&#8288;</code>
</p>

<hr>
<h2 id='tutdata_position'>position example data</h2><span id='topic+tutdata_position'></span>

<h3>Description</h3>

<p>position data for planning a single flight task with focus on known objects
</p>


<h3>Details</h3>

<p>Virtual object position  coordinates example data
</p>


<h3>Source</h3>

<p><code style="white-space: pre;">&#8288;Faculty of Geography UAV derived data from Marburg University Forest first campaign&#8288;</code>
</p>

<hr>
<h2 id='tutdata_qgc_survey'>Flight area planning Qgroundcontrol survey data</h2><span id='topic+tutdata_qgc_survey'></span>

<h3>Description</h3>

<p>Flight area planning example data as typically needed for planning an autonomous survey flight task. The task is planned with the QGroundcontrol survey tool.
</p>


<h3>Details</h3>

<p>Flight area planning Qgroundcontrol survey data
</p>


<h3>Source</h3>

<p><code style="white-space: pre;">&#8288;Faculty of Geography Marburg&#8288;</code>
</p>

<hr>
<h2 id='tutdata_waypoints'>MAVLINK waypoint example data</h2><span id='topic+tutdata_waypoints'></span>

<h3>Description</h3>

<p>Waypoint file
</p>


<h3>Details</h3>

<p>MAVLINK waypoint example data
</p>


<h3>Source</h3>

<p><code style="white-space: pre;">&#8288;Faculty of Geography UAV derived data from Marburg University Forest first campaign&#8288;</code>
</p>

<hr>
<h2 id='uavRmp'>UAV Mission Planner</h2><span id='topic+uavRmp'></span>

<h3>Description</h3>

<p>The package provides some mission planning functionality for dealing with Unmanned Aerial Vehicles. The focus is set on an easy to use workflow for planning autonomous obstacle avoiding surveys of rtf-UAVs to retrieve aerial or spot related data. It provides either intermediate flight control files for the DJI phantom x UAVs or ready to upload control files for the pixhawk based flightcontroller as used in the 3DR Solo. Additionally it contains some useful tools for digitizing and data manipulation.
</p>


<h3>Details</h3>

<p>The package provides some mission planning functionality for dealing with Unmanned Aerial Vehicles
</p>


<h3>Note</h3>

<p>It is important to keep in mind that all auxilliary external binaries  like GDAL or SAGA need to be installed properly.
correctly on your system.
</p>


<h3>Author(s)</h3>

<p>Chris Reudenbach Lars Opgenoorth Sebastian Richter Florian Detsch Hanna Meyer Marvin Ludwig
<br />
<em>Maintainer:</em> Chris Reudenbach <a href="mailto:reudenbach@uni-marburg.de">reudenbach@uni-marburg.de</a>
</p>

<hr>
<h2 id='vecDraw'>digitizing vector features using a simple leaflet base map</h2><span id='topic+vecDraw'></span>

<h3>Description</h3>

<p>vecDraw is designed for straightforward digitizing of simple geometries without adding attributes. It provides a bunch of leaflet base maps and optionally a sf* object can be loaded for orientation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vecDraw(
  mapCenter = NULL,
  zoom = 15,
  line = TRUE,
  rectangle = TRUE,
  poly = TRUE,
  circle = TRUE,
  point = TRUE,
  remove = TRUE,
  position = "topright",
  maplayer = c("CartoDB.Positron", "OpenStreetMap", "Esri.WorldImagery",
    "Thunderforest.Landscape", "OpenTopoMap"),
  overlay = NULL,
  preset = "all",
  locPreset = "muf",
  cex = 10,
  lwd = 2,
  opacity = 0.7
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vecDraw_+3A_mapcenter">mapCenter</code></td>
<td>
<p>center of the leaflet map</p>
</td></tr>
<tr><td><code id="vecDraw_+3A_zoom">zoom</code></td>
<td>
<p>set initial zoom level of leaflet map</p>
</td></tr>
<tr><td><code id="vecDraw_+3A_line">line</code></td>
<td>
<p>enable/disable line tool</p>
</td></tr>
<tr><td><code id="vecDraw_+3A_rectangle">rectangle</code></td>
<td>
<p>enable/disable polygon tool</p>
</td></tr>
<tr><td><code id="vecDraw_+3A_poly">poly</code></td>
<td>
<p>enable/disable polygon tool</p>
</td></tr>
<tr><td><code id="vecDraw_+3A_circle">circle</code></td>
<td>
<p>enable/disable circle tool</p>
</td></tr>
<tr><td><code id="vecDraw_+3A_point">point</code></td>
<td>
<p>enable/disable point tool</p>
</td></tr>
<tr><td><code id="vecDraw_+3A_remove">remove</code></td>
<td>
<p>enable/disable the remove feature of the draw tool</p>
</td></tr>
<tr><td><code id="vecDraw_+3A_position">position</code></td>
<td>
<p>toolbar layout (topright, topleft, bottomright, bottomleft)</p>
</td></tr>
<tr><td><code id="vecDraw_+3A_maplayer">maplayer</code></td>
<td>
<p>string as provided by leaflet-provider</p>
</td></tr>
<tr><td><code id="vecDraw_+3A_overlay">overlay</code></td>
<td>
<p>optional sp* object may used for orientation</p>
</td></tr>
<tr><td><code id="vecDraw_+3A_preset">preset</code></td>
<td>
<p>character default is &quot;uav&quot; for line based mission digitizing, &quot;ext&quot; for rectangles, NULL for all drawing items</p>
</td></tr>
<tr><td><code id="vecDraw_+3A_locpreset">locPreset</code></td>
<td>
<p>character location preset, default is &quot;muf&quot; for Marburg University Forest,  &quot;tra&quot; Traddelstein, &quot;hag&quot; Hagenstein, &quot;baw&quot; Bayerwald.</p>
</td></tr>
<tr><td><code id="vecDraw_+3A_cex">cex</code></td>
<td>
<p>size of item</p>
</td></tr>
<tr><td><code id="vecDraw_+3A_lwd">lwd</code></td>
<td>
<p>line width of item</p>
</td></tr>
<tr><td><code id="vecDraw_+3A_opacity">opacity</code></td>
<td>
<p>opacity of item</p>
</td></tr>
</table>


<h3>Note</h3>

<p>Yu can either save the digitized object to a json (JS) or kml (KML) file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# fully featured without overlay
require(mapview)

# preset for digitizing uav flight areas using Meuse data set as overlay
require(sp)
data(meuse) 
sp::coordinates(meuse) &lt;- ~x+y 
sp::proj4string(meuse) &lt;-CRS("+init=epsg:28992") 
m &lt;- sp::spTransform(meuse,CRSobj = sp::CRS("+init=epsg:4326"))
vecDraw(overlay = m, preset = "uav")
  
# preset for digitizing simple rectangles extents
vecDraw(preset="ext",overlay = m)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
