<!DOCTYPE html><html lang="en"><head><title>Help for package mapgl</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mapgl}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#mapgl-package'><p>mapgl: Interactive Maps with 'Mapbox GL JS' and 'MapLibre GL JS'</p></a></li>
<li><a href='#add_categorical_legend'><p>Add a categorical legend to a Mapbox GL map</p></a></li>
<li><a href='#add_circle_layer'><p>Add a circle layer to a Mapbox GL map</p></a></li>
<li><a href='#add_continuous_legend'><p>Add a continuous legend</p></a></li>
<li><a href='#add_draw_control'><p>Add a draw control to a map</p></a></li>
<li><a href='#add_fill_extrusion_layer'><p>Add a fill-extrusion layer to a Mapbox GL map</p></a></li>
<li><a href='#add_fill_layer'><p>Add a fill layer to a map</p></a></li>
<li><a href='#add_fullscreen_control'><p>Add a fullscreen control to a map</p></a></li>
<li><a href='#add_geocoder_control'><p>Add a geocoder control to a map</p></a></li>
<li><a href='#add_geolocate_control'><p>Add a geolocate control to a map</p></a></li>
<li><a href='#add_globe_minimap'><p>Add a Globe Minimap to a map</p></a></li>
<li><a href='#add_h3j_source'><p>Add a hexagon source from the H3 geospatial indexing system.</p></a></li>
<li><a href='#add_heatmap_layer'><p>Add a heatmap layer to a Mapbox GL map</p></a></li>
<li><a href='#add_image'><p>Add an image to the map</p></a></li>
<li><a href='#add_image_source'><p>Add an image source to a Mapbox GL or Maplibre GL map</p></a></li>
<li><a href='#add_layer'><p>Add a layer to a map from a source</p></a></li>
<li><a href='#add_layers_control'><p>Add a layers control to the map</p></a></li>
<li><a href='#add_legend'><p>Add a legend to a Mapbox GL map</p></a></li>
<li><a href='#add_line_layer'><p>Add a line layer to a map</p></a></li>
<li><a href='#add_markers'><p>Add markers to a Mapbox GL or Maplibre GL map</p></a></li>
<li><a href='#add_navigation_control'><p>Add a navigation control to a map</p></a></li>
<li><a href='#add_raster_dem_source'><p>Add a raster DEM source to a Mapbox GL or Maplibre GL map</p></a></li>
<li><a href='#add_raster_layer'><p>Add a raster layer to a Mapbox GL map</p></a></li>
<li><a href='#add_raster_source'><p>Add a raster tile source to a Mapbox GL or Maplibre GL map</p></a></li>
<li><a href='#add_reset_control'><p>Add a reset control to a map</p></a></li>
<li><a href='#add_scale_control'><p>Add a scale control to a map</p></a></li>
<li><a href='#add_source'><p>Add a GeoJSON or sf source to a Mapbox GL or Maplibre GL map</p></a></li>
<li><a href='#add_symbol_layer'><p>Add a symbol layer to a map</p></a></li>
<li><a href='#add_vector_source'><p>Add a vector tile source to a Mapbox GL or Maplibre GL map</p></a></li>
<li><a href='#add_video_source'><p>Add a video source to a Mapbox GL or Maplibre GL map</p></a></li>
<li><a href='#carto_style'><p>Get CARTO Style URL</p></a></li>
<li><a href='#clear_controls'><p>Clear all controls from a Mapbox GL or Maplibre GL map in a Shiny app</p></a></li>
<li><a href='#clear_layer'><p>Clear a layer from a map using a proxy</p></a></li>
<li><a href='#clear_legend'><p>Clear legend from a map in a proxy session</p></a></li>
<li><a href='#clear_markers'><p>Clear markers from a map in a Shiny session</p></a></li>
<li><a href='#cluster_options'><p>Prepare cluster options for circle layers</p></a></li>
<li><a href='#compare'><p>Create a Compare widget</p></a></li>
<li><a href='#ease_to'><p>Ease to a given view</p></a></li>
<li><a href='#fit_bounds'><p>Fit the map to a bounding box</p></a></li>
<li><a href='#fly_to'><p>Fly to a given view</p></a></li>
<li><a href='#get_column'><p>Get column or property for use in mapping</p></a></li>
<li><a href='#get_drawn_features'><p>Get drawn features from the map</p></a></li>
<li><a href='#interpolate'><p>Create an interpolation expression</p></a></li>
<li><a href='#jump_to'><p>Jump to a given view</p></a></li>
<li><a href='#mapbox_style'><p>Get Mapbox Style URL</p></a></li>
<li><a href='#mapboxgl'><p>Initialize a Mapbox GL Map</p></a></li>
<li><a href='#mapboxgl_compare_proxy'><p>Create a proxy object for a Mapbox GL Compare widget in Shiny</p></a></li>
<li><a href='#mapboxgl_proxy'><p>Create a proxy object for a Mapbox GL map in Shiny</p></a></li>
<li><a href='#mapboxglCompareOutput'><p>Create a Mapbox GL Compare output element for Shiny</p></a></li>
<li><a href='#mapboxglOutput'><p>Create a Mapbox GL output element for Shiny</p></a></li>
<li><a href='#maplibre'><p>Initialize a Maplibre GL Map</p></a></li>
<li><a href='#maplibre_compare_proxy'><p>Create a proxy object for a Maplibre GL Compare widget in Shiny</p></a></li>
<li><a href='#maplibre_proxy'><p>Create a proxy object for a Maplibre GL map in Shiny</p></a></li>
<li><a href='#maplibreCompareOutput'><p>Create a Maplibre GL Compare output element for Shiny</p></a></li>
<li><a href='#maplibreOutput'><p>Create a Maplibre GL output element for Shiny</p></a></li>
<li><a href='#maptiler_style'><p>Get MapTiler Style URL</p></a></li>
<li><a href='#match_expr'><p>Create a match expression</p></a></li>
<li><a href='#move_layer'><p>Move a layer to a different z-position</p></a></li>
<li><a href='#on_section'><p>Observe events on story map section transitions</p></a></li>
<li><a href='#renderMapboxgl'><p>Render a Mapbox GL output element in Shiny</p></a></li>
<li><a href='#renderMapboxglCompare'><p>Render a Mapbox GL Compare output element in Shiny</p></a></li>
<li><a href='#renderMaplibre'><p>Render a Maplibre GL output element in Shiny</p></a></li>
<li><a href='#renderMaplibreCompare'><p>Render a Maplibre GL Compare output element in Shiny</p></a></li>
<li><a href='#set_config_property'><p>Set a configuration property for a Mapbox GL map</p></a></li>
<li><a href='#set_filter'><p>Set a filter on a map layer</p></a></li>
<li><a href='#set_fog'><p>Set fog on a Mapbox GL map</p></a></li>
<li><a href='#set_layout_property'><p>Set a layout property on a map layer</p></a></li>
<li><a href='#set_paint_property'><p>Set a paint property on a map layer</p></a></li>
<li><a href='#set_projection'><p>Set Projection for a Mapbox/Maplibre Map</p></a></li>
<li><a href='#set_source'><p>Set source of a map layer</p></a></li>
<li><a href='#set_style'><p>Update the style of a map</p></a></li>
<li><a href='#set_terrain'><p>Set terrain properties on a map</p></a></li>
<li><a href='#set_tooltip'><p>Set tooltip on a map layer</p></a></li>
<li><a href='#set_view'><p>Set the map center and zoom level</p></a></li>
<li><a href='#step_expr'><p>Create a step expression</p></a></li>
<li><a href='#story_leaflet'><p>Create a scrollytelling story map with Leaflet</p></a></li>
<li><a href='#story_map'><p>Create a scrollytelling story map</p></a></li>
<li><a href='#story_maplibre'><p>Create a scrollytelling story map with MapLibre</p></a></li>
<li><a href='#story_section'><p>Create a story section for story maps</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Interactive Maps with 'Mapbox GL JS' and 'MapLibre GL JS'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2025-03-18</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides an interface to the 'Mapbox GL JS' (<a href="https://docs.mapbox.com/mapbox-gl-js/guides">https://docs.mapbox.com/mapbox-gl-js/guides</a>)
    and the 'MapLibre GL JS' (<a href="https://maplibre.org/maplibre-gl-js/docs/">https://maplibre.org/maplibre-gl-js/docs/</a>) interactive mapping libraries to help users
    create custom interactive maps in R.  Users can create interactive globe visualizations; layer 'sf' objects to create
    filled maps, circle maps, 'heatmaps', and three-dimensional graphics; and customize map styles and views.  The package
    also includes utilities to use 'Mapbox' and 'MapLibre' maps in 'Shiny' web applications.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://walker-data.com/mapgl/">https://walker-data.com/mapgl/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/walkerke/mapgl/issues">https://github.com/walkerke/mapgl/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>htmlwidgets, geojsonsf, sf, rlang, htmltools, grDevices,
base64enc, terra, classInt, shiny</td>
</tr>
<tr>
<td>Suggests:</td>
<td>mapboxapi, usethis, leaflet</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-03-18 14:44:26 UTC; kylewalker</td>
</tr>
<tr>
<td>Author:</td>
<td>Kyle Walker [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kyle Walker &lt;kyle@walker-data.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-18 15:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='mapgl-package'>mapgl: Interactive Maps with 'Mapbox GL JS' and 'MapLibre GL JS'</h2><span id='topic+mapgl'></span><span id='topic+mapgl-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Provides an interface to the 'Mapbox GL JS' (<a href="https://docs.mapbox.com/mapbox-gl-js/guides">https://docs.mapbox.com/mapbox-gl-js/guides</a>) and the 'MapLibre GL JS' (<a href="https://maplibre.org/maplibre-gl-js/docs/">https://maplibre.org/maplibre-gl-js/docs/</a>) interactive mapping libraries to help users create custom interactive maps in R. Users can create interactive globe visualizations; layer 'sf' objects to create filled maps, circle maps, 'heatmaps', and three-dimensional graphics; and customize map styles and views. The package also includes utilities to use 'Mapbox' and 'MapLibre' maps in 'Shiny' web applications.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Kyle Walker <a href="mailto:kyle@walker-data.com">kyle@walker-data.com</a>
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://walker-data.com/mapgl/">https://walker-data.com/mapgl/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/walkerke/mapgl/issues">https://github.com/walkerke/mapgl/issues</a>
</p>
</li></ul>


<hr>
<h2 id='add_categorical_legend'>Add a categorical legend to a Mapbox GL map</h2><span id='topic+add_categorical_legend'></span>

<h3>Description</h3>

<p>This function adds a categorical legend to a Mapbox GL map. It supports
customizable colors, sizes, and shapes for legend items.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_categorical_legend(
  map,
  legend_title,
  values,
  colors,
  circular_patches = FALSE,
  position = "top-left",
  unique_id = NULL,
  sizes = NULL,
  add = FALSE,
  width = NULL,
  layer_id = NULL,
  margin_top = NULL,
  margin_right = NULL,
  margin_bottom = NULL,
  margin_left = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_categorical_legend_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> function.</p>
</td></tr>
<tr><td><code id="add_categorical_legend_+3A_legend_title">legend_title</code></td>
<td>
<p>The title of the legend.</p>
</td></tr>
<tr><td><code id="add_categorical_legend_+3A_values">values</code></td>
<td>
<p>A vector of categories or values to be displayed in the legend.</p>
</td></tr>
<tr><td><code id="add_categorical_legend_+3A_colors">colors</code></td>
<td>
<p>The corresponding colors for the values. Can be a vector of colors or a single color.</p>
</td></tr>
<tr><td><code id="add_categorical_legend_+3A_circular_patches">circular_patches</code></td>
<td>
<p>Logical, whether to use circular patches in the legend. Default is FALSE.</p>
</td></tr>
<tr><td><code id="add_categorical_legend_+3A_position">position</code></td>
<td>
<p>The position of the legend on the map. One of &quot;top-left&quot;, &quot;bottom-left&quot;, &quot;top-right&quot;, &quot;bottom-right&quot;. Default is &quot;top-left&quot;.</p>
</td></tr>
<tr><td><code id="add_categorical_legend_+3A_unique_id">unique_id</code></td>
<td>
<p>A unique ID for the legend container. If NULL, a random ID will be generated.</p>
</td></tr>
<tr><td><code id="add_categorical_legend_+3A_sizes">sizes</code></td>
<td>
<p>An optional numeric vector of sizes for the legend patches, or a single numeric value. If provided as a vector, it should have the same length as <code>values</code>. If <code>circular_patches</code> is <code>FALSE</code> (for square patches), sizes represent the width and height of the patch in pixels.  If <code>circular_patches</code> is <code>TRUE</code>, sizes represent the radius of the circle.</p>
</td></tr>
<tr><td><code id="add_categorical_legend_+3A_add">add</code></td>
<td>
<p>Logical, whether to add this legend to existing legends (TRUE) or replace existing legends (FALSE). Default is FALSE.</p>
</td></tr>
<tr><td><code id="add_categorical_legend_+3A_width">width</code></td>
<td>
<p>The width of the legend. Can be specified in pixels (e.g., &quot;250px&quot;) or as &quot;auto&quot;. Default is NULL, which uses the built-in default.</p>
</td></tr>
<tr><td><code id="add_categorical_legend_+3A_layer_id">layer_id</code></td>
<td>
<p>The ID of the layer that this legend is associated with. If provided, the legend will be shown/hidden when the layer visibility is toggled.</p>
</td></tr>
<tr><td><code id="add_categorical_legend_+3A_margin_top">margin_top</code></td>
<td>
<p>Custom top margin in pixels, allowing for fine control over legend positioning. Default is NULL (uses standard positioning).</p>
</td></tr>
<tr><td><code id="add_categorical_legend_+3A_margin_right">margin_right</code></td>
<td>
<p>Custom right margin in pixels. Default is NULL.</p>
</td></tr>
<tr><td><code id="add_categorical_legend_+3A_margin_bottom">margin_bottom</code></td>
<td>
<p>Custom bottom margin in pixels. Default is NULL.</p>
</td></tr>
<tr><td><code id="add_categorical_legend_+3A_margin_left">margin_left</code></td>
<td>
<p>Custom left margin in pixels. Default is NULL.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated map object with the legend added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapboxgl)
map &lt;- mapboxgl(
    center = c(-96, 37.8),
    zoom = 3
)
map %&gt;% add_categorical_legend(
    legend_title = "Population",
    values = c("Low", "Medium", "High"),
    colors = c("#FED976", "#FEB24C", "#FD8D3C"),
    circular_patches = TRUE,
    sizes = c(10, 15, 20),
    width = "300px"
)

## End(Not run)
</code></pre>

<hr>
<h2 id='add_circle_layer'>Add a circle layer to a Mapbox GL map</h2><span id='topic+add_circle_layer'></span>

<h3>Description</h3>

<p>Add a circle layer to a Mapbox GL map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_circle_layer(
  map,
  id,
  source,
  source_layer = NULL,
  circle_blur = NULL,
  circle_color = NULL,
  circle_opacity = NULL,
  circle_radius = NULL,
  circle_sort_key = NULL,
  circle_stroke_color = NULL,
  circle_stroke_opacity = NULL,
  circle_stroke_width = NULL,
  circle_translate = NULL,
  circle_translate_anchor = "map",
  visibility = "visible",
  slot = NULL,
  min_zoom = NULL,
  max_zoom = NULL,
  popup = NULL,
  tooltip = NULL,
  hover_options = NULL,
  before_id = NULL,
  filter = NULL,
  cluster_options = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_circle_layer_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> function.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_id">id</code></td>
<td>
<p>A unique ID for the layer.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_source">source</code></td>
<td>
<p>The ID of the source, alternatively an sf object (which will be converted to a GeoJSON source) or a named list that specifies <code>type</code> and <code>url</code> for a remote source.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_source_layer">source_layer</code></td>
<td>
<p>The source layer (for vector sources).</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_circle_blur">circle_blur</code></td>
<td>
<p>Amount to blur the circle.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_circle_color">circle_color</code></td>
<td>
<p>The color of the circle.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_circle_opacity">circle_opacity</code></td>
<td>
<p>The opacity at which the circle will be drawn.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_circle_radius">circle_radius</code></td>
<td>
<p>Circle radius.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_circle_sort_key">circle_sort_key</code></td>
<td>
<p>Sorts features in ascending order based on this value.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_circle_stroke_color">circle_stroke_color</code></td>
<td>
<p>The color of the circle's stroke.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_circle_stroke_opacity">circle_stroke_opacity</code></td>
<td>
<p>The opacity of the circle's stroke.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_circle_stroke_width">circle_stroke_width</code></td>
<td>
<p>The width of the circle's stroke.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_circle_translate">circle_translate</code></td>
<td>
<p>The geometry's offset. Values are <code>c(x, y)</code> where negatives indicate left and up.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_circle_translate_anchor">circle_translate_anchor</code></td>
<td>
<p>Controls the frame of reference for <code>circle-translate</code>.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_visibility">visibility</code></td>
<td>
<p>Whether this layer is displayed.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_slot">slot</code></td>
<td>
<p>An optional slot for layer order.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_min_zoom">min_zoom</code></td>
<td>
<p>The minimum zoom level for the layer.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_max_zoom">max_zoom</code></td>
<td>
<p>The maximum zoom level for the layer.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_popup">popup</code></td>
<td>
<p>A column name containing information to display in a popup on click.  Columns containing HTML will be parsed.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_tooltip">tooltip</code></td>
<td>
<p>A column name containing information to display in a tooltip on hover. Columns containing HTML will be parsed.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_hover_options">hover_options</code></td>
<td>
<p>A named list of options for highlighting features in the layer on hover.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_before_id">before_id</code></td>
<td>
<p>The name of the layer that this layer appears &quot;before&quot;, allowing you to insert layers below other layers in your basemap (e.g. labels).</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_filter">filter</code></td>
<td>
<p>An optional filter expression to subset features in the layer.</p>
</td></tr>
<tr><td><code id="add_circle_layer_+3A_cluster_options">cluster_options</code></td>
<td>
<p>A list of options for clustering circles, created by the <code>cluster_options()</code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the new circle layer added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapgl)
library(sf)
library(dplyr)

# Set seed for reproducibility
set.seed(1234)

# Define the bounding box for Washington DC (approximately)
bbox &lt;- st_bbox(
    c(
        xmin = -77.119759,
        ymin = 38.791645,
        xmax = -76.909393,
        ymax = 38.995548
    ),
    crs = st_crs(4326)
)

# Generate 30 random points within the bounding box
random_points &lt;- st_as_sf(
    data.frame(
        id = 1:30,
        lon = runif(30, bbox["xmin"], bbox["xmax"]),
        lat = runif(30, bbox["ymin"], bbox["ymax"])
    ),
    coords = c("lon", "lat"),
    crs = 4326
)

# Assign random categories
categories &lt;- c("music", "bar", "theatre", "bicycle")
random_points &lt;- random_points %&gt;%
    mutate(category = sample(categories, n(), replace = TRUE))

# Map with circle layer
mapboxgl(style = mapbox_style("light")) %&gt;%
    fit_bounds(random_points, animate = FALSE) %&gt;%
    add_circle_layer(
        id = "poi-layer",
        source = random_points,
        circle_color = match_expr(
            "category",
            values = c(
                "music", "bar", "theatre",
                "bicycle"
            ),
            stops = c(
                "#1f78b4", "#33a02c",
                "#e31a1c", "#ff7f00"
            )
        ),
        circle_radius = 8,
        circle_stroke_color = "#ffffff",
        circle_stroke_width = 2,
        circle_opacity = 0.8,
        tooltip = "category",
        hover_options = list(
            circle_radius = 12,
            circle_color = "#ffff99"
        )
    ) %&gt;%
    add_categorical_legend(
        legend_title = "Points of Interest",
        values = c("Music", "Bar", "Theatre", "Bicycle"),
        colors = c("#1f78b4", "#33a02c", "#e31a1c", "#ff7f00"),
        circular_patches = TRUE
    )

## End(Not run)
</code></pre>

<hr>
<h2 id='add_continuous_legend'>Add a continuous legend</h2><span id='topic+add_continuous_legend'></span>

<h3>Description</h3>

<p>Add a continuous legend
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_continuous_legend(
  map,
  legend_title,
  values,
  colors,
  position = "top-left",
  unique_id = NULL,
  add = FALSE,
  width = NULL,
  layer_id = NULL,
  margin_top = NULL,
  margin_right = NULL,
  margin_bottom = NULL,
  margin_left = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_continuous_legend_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> function.</p>
</td></tr>
<tr><td><code id="add_continuous_legend_+3A_legend_title">legend_title</code></td>
<td>
<p>The title of the legend.</p>
</td></tr>
<tr><td><code id="add_continuous_legend_+3A_values">values</code></td>
<td>
<p>The values being represented on the map (vector of stops).</p>
</td></tr>
<tr><td><code id="add_continuous_legend_+3A_colors">colors</code></td>
<td>
<p>The colors used to generate the color ramp.</p>
</td></tr>
<tr><td><code id="add_continuous_legend_+3A_position">position</code></td>
<td>
<p>The position of the legend on the map (one of &quot;top-left&quot;, &quot;bottom-left&quot;, &quot;top-right&quot;, &quot;bottom-right&quot;).</p>
</td></tr>
<tr><td><code id="add_continuous_legend_+3A_unique_id">unique_id</code></td>
<td>
<p>A unique ID for the legend container. Defaults to NULL.</p>
</td></tr>
<tr><td><code id="add_continuous_legend_+3A_add">add</code></td>
<td>
<p>Logical, whether to add this legend to existing legends (TRUE) or replace existing legends (FALSE). Default is FALSE.</p>
</td></tr>
<tr><td><code id="add_continuous_legend_+3A_width">width</code></td>
<td>
<p>The width of the legend. Can be specified in pixels (e.g., &quot;250px&quot;) or as &quot;auto&quot;. Default is NULL, which uses the built-in default.</p>
</td></tr>
<tr><td><code id="add_continuous_legend_+3A_layer_id">layer_id</code></td>
<td>
<p>The ID of the layer that this legend is associated with. If provided, the legend will be shown/hidden when the layer visibility is toggled.</p>
</td></tr>
<tr><td><code id="add_continuous_legend_+3A_margin_top">margin_top</code></td>
<td>
<p>Custom top margin in pixels, allowing for fine control over legend positioning. Default is NULL (uses standard positioning).</p>
</td></tr>
<tr><td><code id="add_continuous_legend_+3A_margin_right">margin_right</code></td>
<td>
<p>Custom right margin in pixels. Default is NULL.</p>
</td></tr>
<tr><td><code id="add_continuous_legend_+3A_margin_bottom">margin_bottom</code></td>
<td>
<p>Custom bottom margin in pixels. Default is NULL.</p>
</td></tr>
<tr><td><code id="add_continuous_legend_+3A_margin_left">margin_left</code></td>
<td>
<p>Custom left margin in pixels. Default is NULL.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated map object with the legend added.
</p>

<hr>
<h2 id='add_draw_control'>Add a draw control to a map</h2><span id='topic+add_draw_control'></span>

<h3>Description</h3>

<p>Add a draw control to a map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_draw_control(
  map,
  position = "top-left",
  freehand = FALSE,
  simplify_freehand = FALSE,
  orientation = "vertical",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_draw_control_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> functions.</p>
</td></tr>
<tr><td><code id="add_draw_control_+3A_position">position</code></td>
<td>
<p>A string specifying the position of the draw control.
One of &quot;top-right&quot;, &quot;top-left&quot;, &quot;bottom-right&quot;, or &quot;bottom-left&quot;.</p>
</td></tr>
<tr><td><code id="add_draw_control_+3A_freehand">freehand</code></td>
<td>
<p>Logical, whether to enable freehand drawing mode. Default is FALSE.</p>
</td></tr>
<tr><td><code id="add_draw_control_+3A_simplify_freehand">simplify_freehand</code></td>
<td>
<p>Logical, whether to apply simplification to freehand drawings. Default is FALSE.</p>
</td></tr>
<tr><td><code id="add_draw_control_+3A_orientation">orientation</code></td>
<td>
<p>A string specifying the orientation of the draw control.
Either &quot;vertical&quot; (default) or &quot;horizontal&quot;.</p>
</td></tr>
<tr><td><code id="add_draw_control_+3A_...">...</code></td>
<td>
<p>Additional named arguments. See <a href="https://github.com/mapbox/mapbox-gl-draw/blob/main/docs/API.md#options">https://github.com/mapbox/mapbox-gl-draw/blob/main/docs/API.md#options</a> for a list of options.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the draw control added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapgl)

mapboxgl(
    style = mapbox_style("streets"),
    center = c(-74.50, 40),
    zoom = 9
) |&gt;
    add_draw_control()

## End(Not run)
</code></pre>

<hr>
<h2 id='add_fill_extrusion_layer'>Add a fill-extrusion layer to a Mapbox GL map</h2><span id='topic+add_fill_extrusion_layer'></span>

<h3>Description</h3>

<p>Add a fill-extrusion layer to a Mapbox GL map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_fill_extrusion_layer(
  map,
  id,
  source,
  source_layer = NULL,
  fill_extrusion_base = NULL,
  fill_extrusion_color = NULL,
  fill_extrusion_height = NULL,
  fill_extrusion_opacity = NULL,
  fill_extrusion_pattern = NULL,
  fill_extrusion_translate = NULL,
  fill_extrusion_translate_anchor = "map",
  visibility = "visible",
  slot = NULL,
  min_zoom = NULL,
  max_zoom = NULL,
  popup = NULL,
  tooltip = NULL,
  hover_options = NULL,
  before_id = NULL,
  filter = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_fill_extrusion_layer_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> function.</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_id">id</code></td>
<td>
<p>A unique ID for the layer.</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_source">source</code></td>
<td>
<p>The ID of the source, alternatively an sf object (which will be converted to a GeoJSON source) or a named list that specifies <code>type</code> and <code>url</code> for a remote source.</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_source_layer">source_layer</code></td>
<td>
<p>The source layer (for vector sources).</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_fill_extrusion_base">fill_extrusion_base</code></td>
<td>
<p>The base height of the fill extrusion.</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_fill_extrusion_color">fill_extrusion_color</code></td>
<td>
<p>The color of the fill extrusion.</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_fill_extrusion_height">fill_extrusion_height</code></td>
<td>
<p>The height of the fill extrusion.</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_fill_extrusion_opacity">fill_extrusion_opacity</code></td>
<td>
<p>The opacity of the fill extrusion.</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_fill_extrusion_pattern">fill_extrusion_pattern</code></td>
<td>
<p>Name of image in sprite to use for drawing image fills.</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_fill_extrusion_translate">fill_extrusion_translate</code></td>
<td>
<p>The geometry's offset. Values are <code>c(x, y)</code> where negatives indicate left and up.</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_fill_extrusion_translate_anchor">fill_extrusion_translate_anchor</code></td>
<td>
<p>Controls the frame of reference for <code>fill-extrusion-translate</code>.</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_visibility">visibility</code></td>
<td>
<p>Whether this layer is displayed.</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_slot">slot</code></td>
<td>
<p>An optional slot for layer order.</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_min_zoom">min_zoom</code></td>
<td>
<p>The minimum zoom level for the layer.</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_max_zoom">max_zoom</code></td>
<td>
<p>The maximum zoom level for the layer.</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_popup">popup</code></td>
<td>
<p>A column name containing information to display in a popup on click.  Columns containing HTML will be parsed.</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_tooltip">tooltip</code></td>
<td>
<p>A column name containing information to display in a tooltip on hover. Columns containing HTML will be parsed.</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_hover_options">hover_options</code></td>
<td>
<p>A named list of options for highlighting features in the layer on hover.</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_before_id">before_id</code></td>
<td>
<p>The name of the layer that this layer appears &quot;before&quot;, allowing you to insert layers below other layers in your basemap (e.g. labels).</p>
</td></tr>
<tr><td><code id="add_fill_extrusion_layer_+3A_filter">filter</code></td>
<td>
<p>An optional filter expression to subset features in the layer.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the new fill-extrusion layer added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapgl)

maplibre(
    style = maptiler_style("basic"),
    center = c(-74.0066, 40.7135),
    zoom = 15.5,
    pitch = 45,
    bearing = -17.6
) |&gt;
    add_vector_source(
        id = "openmaptiles",
        url = paste0(
            "https://api.maptiler.com/tiles/v3/tiles.json?key=",
            Sys.getenv("MAPTILER_API_KEY")
        )
    ) |&gt;
    add_fill_extrusion_layer(
        id = "3d-buildings",
        source = "openmaptiles",
        source_layer = "building",
        fill_extrusion_color = interpolate(
            column = "render_height",
            values = c(0, 200, 400),
            stops = c("lightgray", "royalblue", "lightblue")
        ),
        fill_extrusion_height = list(
            "interpolate",
            list("linear"),
            list("zoom"),
            15,
            0,
            16,
            list("get", "render_height")
        )
    )

## End(Not run)
</code></pre>

<hr>
<h2 id='add_fill_layer'>Add a fill layer to a map</h2><span id='topic+add_fill_layer'></span>

<h3>Description</h3>

<p>Add a fill layer to a map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_fill_layer(
  map,
  id,
  source,
  source_layer = NULL,
  fill_antialias = TRUE,
  fill_color = NULL,
  fill_emissive_strength = NULL,
  fill_opacity = NULL,
  fill_outline_color = NULL,
  fill_pattern = NULL,
  fill_sort_key = NULL,
  fill_translate = NULL,
  fill_translate_anchor = "map",
  fill_z_offset = NULL,
  visibility = "visible",
  slot = NULL,
  min_zoom = NULL,
  max_zoom = NULL,
  popup = NULL,
  tooltip = NULL,
  hover_options = NULL,
  before_id = NULL,
  filter = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_fill_layer_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> functions.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_id">id</code></td>
<td>
<p>A unique ID for the layer.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_source">source</code></td>
<td>
<p>The ID of the source, alternatively an sf object (which will be converted to a GeoJSON source) or a named list that specifies <code>type</code> and <code>url</code> for a remote source.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_source_layer">source_layer</code></td>
<td>
<p>The source layer (for vector sources).</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_fill_antialias">fill_antialias</code></td>
<td>
<p>Whether or not the fill should be antialiased.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_fill_color">fill_color</code></td>
<td>
<p>The color of the filled part of this layer.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_fill_emissive_strength">fill_emissive_strength</code></td>
<td>
<p>Controls the intensity of light emitted on the source features.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_fill_opacity">fill_opacity</code></td>
<td>
<p>The opacity of the entire fill layer.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_fill_outline_color">fill_outline_color</code></td>
<td>
<p>The outline color of the fill.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_fill_pattern">fill_pattern</code></td>
<td>
<p>Name of image in sprite to use for drawing image fills.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_fill_sort_key">fill_sort_key</code></td>
<td>
<p>Sorts features in ascending order based on this value.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_fill_translate">fill_translate</code></td>
<td>
<p>The geometry's offset. Values are <code>c(x, y)</code> where negatives indicate left and up.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_fill_translate_anchor">fill_translate_anchor</code></td>
<td>
<p>Controls the frame of reference for <code>fill-translate</code>.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_fill_z_offset">fill_z_offset</code></td>
<td>
<p>Specifies an uniform elevation in meters.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_visibility">visibility</code></td>
<td>
<p>Whether this layer is displayed.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_slot">slot</code></td>
<td>
<p>An optional slot for layer order.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_min_zoom">min_zoom</code></td>
<td>
<p>The minimum zoom level for the layer.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_max_zoom">max_zoom</code></td>
<td>
<p>The maximum zoom level for the layer.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_popup">popup</code></td>
<td>
<p>A column name containing information to display in a popup on click.  Columns containing HTML will be parsed.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_tooltip">tooltip</code></td>
<td>
<p>A column name containing information to display in a tooltip on hover. Columns containing HTML will be parsed.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_hover_options">hover_options</code></td>
<td>
<p>A named list of options for highlighting features in the layer on hover.</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_before_id">before_id</code></td>
<td>
<p>The name of the layer that this layer appears &quot;before&quot;, allowing you to insert layers below other layers in your basemap (e.g. labels).</p>
</td></tr>
<tr><td><code id="add_fill_layer_+3A_filter">filter</code></td>
<td>
<p>An optional filter expression to subset features in the layer.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the new fill layer added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(tidycensus)

fl_age &lt;- get_acs(
    geography = "tract",
    variables = "B01002_001",
    state = "FL",
    year = 2022,
    geometry = TRUE
)

mapboxgl() |&gt;
    fit_bounds(fl_age, animate = FALSE) |&gt;
    add_fill_layer(
        id = "fl_tracts",
        source = fl_age,
        fill_color = interpolate(
            column = "estimate",
            values = c(20, 80),
            stops = c("lightblue", "darkblue"),
            na_color = "lightgrey"
        ),
        fill_opacity = 0.5
    )

## End(Not run)
</code></pre>

<hr>
<h2 id='add_fullscreen_control'>Add a fullscreen control to a map</h2><span id='topic+add_fullscreen_control'></span>

<h3>Description</h3>

<p>Add a fullscreen control to a map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_fullscreen_control(map, position = "top-right")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_fullscreen_control_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> functions.</p>
</td></tr>
<tr><td><code id="add_fullscreen_control_+3A_position">position</code></td>
<td>
<p>A string specifying the position of the fullscreen control.
One of &quot;top-right&quot;, &quot;top-left&quot;, &quot;bottom-right&quot;, or &quot;bottom-left&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the fullscreen control added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapgl)

maplibre(
    style = maptiler_style("streets"),
    center = c(11.255, 43.77),
    zoom = 13
) |&gt;
    add_fullscreen_control(position = "top-right")

## End(Not run)
</code></pre>

<hr>
<h2 id='add_geocoder_control'>Add a geocoder control to a map</h2><span id='topic+add_geocoder_control'></span>

<h3>Description</h3>

<p>This function adds a Geocoder search bar to a Mapbox GL or MapLibre GL map.
By default, a marker will be added at the selected location and the map will
fly to that location.  The results of the geocode are accessible in a Shiny
session at <code>input$MAPID_geocoder$result</code>, where <code>MAPID</code> is the name of your map.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_geocoder_control(
  map,
  position = "top-right",
  placeholder = "Search",
  collapsed = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_geocoder_control_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function.</p>
</td></tr>
<tr><td><code id="add_geocoder_control_+3A_position">position</code></td>
<td>
<p>The position of the control. Can be one of &quot;top-left&quot;, &quot;top-right&quot;, &quot;bottom-left&quot;, or &quot;bottom-right&quot;. Default is &quot;top-right&quot;.</p>
</td></tr>
<tr><td><code id="add_geocoder_control_+3A_placeholder">placeholder</code></td>
<td>
<p>A string to use as placeholder text for the search bar. Default is &quot;Search&quot;.</p>
</td></tr>
<tr><td><code id="add_geocoder_control_+3A_collapsed">collapsed</code></td>
<td>
<p>Whether the control should be collapsed until hovered or clicked. Default is FALSE.</p>
</td></tr>
<tr><td><code id="add_geocoder_control_+3A_...">...</code></td>
<td>
<p>Additional parameters to pass to the Geocoder.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the geocoder control added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapgl)

mapboxgl() |&gt;
    add_geocoder_control(position = "top-left", placeholder = "Enter an address")

maplibre() |&gt;
    add_geocoder_control(position = "top-right", placeholder = "Search location")

## End(Not run)
</code></pre>

<hr>
<h2 id='add_geolocate_control'>Add a geolocate control to a map</h2><span id='topic+add_geolocate_control'></span>

<h3>Description</h3>

<p>This function adds a Geolocate control to a Mapbox GL or MapLibre GL map.
The geolocate control allows users to track their current location on the map.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_geolocate_control(
  map,
  position = "top-right",
  track_user = FALSE,
  show_accuracy_circle = TRUE,
  show_user_location = TRUE,
  show_user_heading = FALSE,
  fit_bounds_options = list(maxZoom = 15),
  position_options = list(enableHighAccuracy = FALSE, timeout = 6000)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_geolocate_control_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> functions.</p>
</td></tr>
<tr><td><code id="add_geolocate_control_+3A_position">position</code></td>
<td>
<p>The position of the control. Can be one of &quot;top-left&quot;, &quot;top-right&quot;,
&quot;bottom-left&quot;, or &quot;bottom-right&quot;. Default is &quot;top-right&quot;.</p>
</td></tr>
<tr><td><code id="add_geolocate_control_+3A_track_user">track_user</code></td>
<td>
<p>Whether to actively track the user's location. If TRUE, the map will
continuously update as the user moves. Default is FALSE.</p>
</td></tr>
<tr><td><code id="add_geolocate_control_+3A_show_accuracy_circle">show_accuracy_circle</code></td>
<td>
<p>Whether to show a circle indicating the accuracy of the
location. Default is TRUE.</p>
</td></tr>
<tr><td><code id="add_geolocate_control_+3A_show_user_location">show_user_location</code></td>
<td>
<p>Whether to show a dot at the user's location. Default is TRUE.</p>
</td></tr>
<tr><td><code id="add_geolocate_control_+3A_show_user_heading">show_user_heading</code></td>
<td>
<p>Whether to show an arrow indicating the device's heading when
tracking location. Only works when track_user is TRUE. Default is FALSE.</p>
</td></tr>
<tr><td><code id="add_geolocate_control_+3A_fit_bounds_options">fit_bounds_options</code></td>
<td>
<p>A list of options for fitting bounds when panning to the
user's location. Default maxZoom is 15.</p>
</td></tr>
<tr><td><code id="add_geolocate_control_+3A_position_options">position_options</code></td>
<td>
<p>A list of Geolocation API position options. Default has
enableHighAccuracy=FALSE and timeout=6000.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the geolocate control added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapgl)

mapboxgl() |&gt;
    add_geolocate_control(
        position = "top-right",
        track_user = TRUE,
        show_user_heading = TRUE
    )

## End(Not run)
</code></pre>

<hr>
<h2 id='add_globe_minimap'>Add a Globe Minimap to a map</h2><span id='topic+add_globe_minimap'></span>

<h3>Description</h3>

<p>This function adds a globe minimap control to a Mapbox GL or Maplibre map.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_globe_minimap(
  map,
  position = "bottom-right",
  globe_size = 82,
  land_color = "white",
  water_color = "rgba(30 40 70/60%)",
  marker_color = "#ff2233",
  marker_size = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_globe_minimap_+3A_map">map</code></td>
<td>
<p>A <code>mapboxgl</code> or <code>maplibre</code> object.</p>
</td></tr>
<tr><td><code id="add_globe_minimap_+3A_position">position</code></td>
<td>
<p>A string specifying the position of the minimap.</p>
</td></tr>
<tr><td><code id="add_globe_minimap_+3A_globe_size">globe_size</code></td>
<td>
<p>Number of pixels for the diameter of the globe. Default is 82.</p>
</td></tr>
<tr><td><code id="add_globe_minimap_+3A_land_color">land_color</code></td>
<td>
<p>HTML color to use for land areas on the globe. Default is 'white'.</p>
</td></tr>
<tr><td><code id="add_globe_minimap_+3A_water_color">water_color</code></td>
<td>
<p>HTML color to use for water areas on the globe. Default is 'rgba(30 40 70/60%)'.</p>
</td></tr>
<tr><td><code id="add_globe_minimap_+3A_marker_color">marker_color</code></td>
<td>
<p>HTML color to use for the center point marker. Default is '#ff2233'.</p>
</td></tr>
<tr><td><code id="add_globe_minimap_+3A_marker_size">marker_size</code></td>
<td>
<p>Scale ratio for the center point marker. Default is 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the globe minimap added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapgl)

m &lt;- mapboxgl() %&gt;%
    add_globe_minimap()

m &lt;- maplibre() %&gt;%
    add_globe_minimap()

## End(Not run)
</code></pre>

<hr>
<h2 id='add_h3j_source'>Add a hexagon source from the H3 geospatial indexing system.</h2><span id='topic+add_h3j_source'></span>

<h3>Description</h3>

<p>Add a hexagon source from the H3 geospatial indexing system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_h3j_source(map, id, url)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_h3j_source_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function.</p>
</td></tr>
<tr><td><code id="add_h3j_source_+3A_id">id</code></td>
<td>
<p>A unique ID for the source.</p>
</td></tr>
<tr><td><code id="add_h3j_source_+3A_url">url</code></td>
<td>
<p>A URL pointing to the vector tile source.</p>
</td></tr>
</table>


<h3>References</h3>

<p>https://h3geo.org, https://github.com/INSPIDE/h3j-h3t
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
url = "https://inspide.github.io/h3j-h3t/examples/h3j/sample.h3j"
maplibre(center=c(-3.704, 40.417), zoom=15, pitch=30) |&gt;
  add_h3j_source("h3j_testsource",
                  url = url
  )  |&gt;
  add_fill_extrusion_layer(
    id = "h3j_testlayer",
    source = "h3j_testsource",
    fill_extrusion_color = interpolate(
      column = "value",
      values = c(0, 21.864),
      stops = c("#430254", "#f83c70")
    ),
    fill_extrusion_height = list(
      "interpolate",
      list("linear"),
      list("zoom"),
      14,
      0,
      15.05,
      list("*", 10, list("get", "value"))
    ),
    fill_extrusion_opacity = 0.7
  )

## End(Not run)
</code></pre>

<hr>
<h2 id='add_heatmap_layer'>Add a heatmap layer to a Mapbox GL map</h2><span id='topic+add_heatmap_layer'></span>

<h3>Description</h3>

<p>Add a heatmap layer to a Mapbox GL map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_heatmap_layer(
  map,
  id,
  source,
  source_layer = NULL,
  heatmap_color = NULL,
  heatmap_intensity = NULL,
  heatmap_opacity = NULL,
  heatmap_radius = NULL,
  heatmap_weight = NULL,
  visibility = "visible",
  slot = NULL,
  min_zoom = NULL,
  max_zoom = NULL,
  before_id = NULL,
  filter = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_heatmap_layer_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> function.</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_id">id</code></td>
<td>
<p>A unique ID for the layer.</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_source">source</code></td>
<td>
<p>The ID of the source, alternatively an sf object (which will be converted to a GeoJSON source) or a named list that specifies <code>type</code> and <code>url</code> for a remote source.</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_source_layer">source_layer</code></td>
<td>
<p>The source layer (for vector sources).</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_heatmap_color">heatmap_color</code></td>
<td>
<p>The color of the heatmap points.</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_heatmap_intensity">heatmap_intensity</code></td>
<td>
<p>The intensity of the heatmap points.</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_heatmap_opacity">heatmap_opacity</code></td>
<td>
<p>The opacity of the heatmap layer.</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_heatmap_radius">heatmap_radius</code></td>
<td>
<p>The radius of influence of each individual heatmap point.</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_heatmap_weight">heatmap_weight</code></td>
<td>
<p>The weight of each individual heatmap point.</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_visibility">visibility</code></td>
<td>
<p>Whether this layer is displayed.</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_slot">slot</code></td>
<td>
<p>An optional slot for layer order.</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_min_zoom">min_zoom</code></td>
<td>
<p>The minimum zoom level for the layer.</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_max_zoom">max_zoom</code></td>
<td>
<p>The maximum zoom level for the layer.</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_before_id">before_id</code></td>
<td>
<p>The name of the layer that this layer appears &quot;before&quot;, allowing you to insert layers below other layers in your basemap (e.g. labels).</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_filter">filter</code></td>
<td>
<p>An optional filter expression to subset features in the layer.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the new heatmap layer added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapgl)

mapboxgl(
    style = mapbox_style("dark"),
    center = c(-120, 50),
    zoom = 2
) |&gt;
    add_heatmap_layer(
        id = "earthquakes-heat",
        source = list(
            type = "geojson",
            data = "https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson"
        ),
        heatmap_weight = interpolate(
            column = "mag",
            values = c(0, 6),
            stops = c(0, 1)
        ),
        heatmap_intensity = interpolate(
            property = "zoom",
            values = c(0, 9),
            stops = c(1, 3)
        ),
        heatmap_color = interpolate(
            property = "heatmap-density",
            values = seq(0, 1, 0.2),
            stops = c(
                "rgba(33,102,172,0)", "rgb(103,169,207)",
                "rgb(209,229,240)", "rgb(253,219,199)",
                "rgb(239,138,98)", "rgb(178,24,43)"
            )
        ),
        heatmap_opacity = 0.7
    )

## End(Not run)
</code></pre>

<hr>
<h2 id='add_image'>Add an image to the map</h2><span id='topic+add_image'></span>

<h3>Description</h3>

<p>This function adds an image to the map's style. The image can be used with
icon-image, background-pattern, fill-pattern, or line-pattern.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_image(
  map,
  id,
  url,
  content = NULL,
  pixel_ratio = 1,
  sdf = FALSE,
  stretch_x = NULL,
  stretch_y = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_image_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> functions.</p>
</td></tr>
<tr><td><code id="add_image_+3A_id">id</code></td>
<td>
<p>A string specifying the ID of the image.</p>
</td></tr>
<tr><td><code id="add_image_+3A_url">url</code></td>
<td>
<p>A string specifying the URL of the image to be loaded or a path
to a local image file. Must be PNG or JPEG format.</p>
</td></tr>
<tr><td><code id="add_image_+3A_content">content</code></td>
<td>
<p>A vector of four numbers <code>c(x1, y1, x2, y2)</code> defining the part of the image
that can be covered by the content in text-field if icon-text-fit is used.</p>
</td></tr>
<tr><td><code id="add_image_+3A_pixel_ratio">pixel_ratio</code></td>
<td>
<p>A number specifying the ratio of pixels in the image to physical pixels on the screen.</p>
</td></tr>
<tr><td><code id="add_image_+3A_sdf">sdf</code></td>
<td>
<p>A logical value indicating whether the image should be interpreted as an SDF image.</p>
</td></tr>
<tr><td><code id="add_image_+3A_stretch_x">stretch_x</code></td>
<td>
<p>A list of number pairs defining the part(s) of the image that can be stretched horizontally.</p>
</td></tr>
<tr><td><code id="add_image_+3A_stretch_y">stretch_y</code></td>
<td>
<p>A list of number pairs defining the part(s) of the image that can be stretched vertically.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the image added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapgl)

# Path to your local image file OR a URL to a remote image file
# that is not blocked by CORS restrictions
image_path &lt;- "/path/to/your/image.png"

pts &lt;- tigris::landmarks("DE")[1:100, ]

maplibre(bounds = pts) |&gt;
    add_image("local_icon", image_path) |&gt;
    add_symbol_layer(
        id = "local_icons",
        source = pts,
        icon_image = "local_icon",
        icon_size = 0.5,
        icon_allow_overlap = TRUE
    )

## End(Not run)
</code></pre>

<hr>
<h2 id='add_image_source'>Add an image source to a Mapbox GL or Maplibre GL map</h2><span id='topic+add_image_source'></span>

<h3>Description</h3>

<p>Add an image source to a Mapbox GL or Maplibre GL map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_image_source(
  map,
  id,
  url = NULL,
  data = NULL,
  coordinates = NULL,
  colors = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_image_source_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function.</p>
</td></tr>
<tr><td><code id="add_image_source_+3A_id">id</code></td>
<td>
<p>A unique ID for the source.</p>
</td></tr>
<tr><td><code id="add_image_source_+3A_url">url</code></td>
<td>
<p>A URL pointing to the image source.</p>
</td></tr>
<tr><td><code id="add_image_source_+3A_data">data</code></td>
<td>
<p>A <code>SpatRaster</code> object from the <code>terra</code> package or a <code>RasterLayer</code> object.</p>
</td></tr>
<tr><td><code id="add_image_source_+3A_coordinates">coordinates</code></td>
<td>
<p>A list of coordinates specifying the image corners in clockwise order: top left, top right, bottom right, bottom left.  For <code>SpatRaster</code> or <code>RasterLayer</code> objects, this will be extracted for you.</p>
</td></tr>
<tr><td><code id="add_image_source_+3A_colors">colors</code></td>
<td>
<p>A vector of colors to use for the raster image.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the new source added.
</p>

<hr>
<h2 id='add_layer'>Add a layer to a map from a source</h2><span id='topic+add_layer'></span>

<h3>Description</h3>

<p>In many cases, you will use <code>add_layer()</code> internal to other layer-specific functions in mapgl. Advanced users will want to use <code>add_layer()</code> for more fine-grained control over the appearance of their layers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_layer(
  map,
  id,
  type = "fill",
  source,
  source_layer = NULL,
  paint = list(),
  layout = list(),
  slot = NULL,
  min_zoom = NULL,
  max_zoom = NULL,
  popup = NULL,
  tooltip = NULL,
  hover_options = NULL,
  before_id = NULL,
  filter = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_layer_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl()</code> or <code>maplibre()</code> functions.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_id">id</code></td>
<td>
<p>A unique ID for the layer.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_type">type</code></td>
<td>
<p>The type of the layer (e.g., &quot;fill&quot;, &quot;line&quot;, &quot;circle&quot;).</p>
</td></tr>
<tr><td><code id="add_layer_+3A_source">source</code></td>
<td>
<p>The ID of the source, alternatively an sf object (which will be converted to a GeoJSON source) or a named list that specifies <code>type</code> and <code>url</code> for a remote source.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_source_layer">source_layer</code></td>
<td>
<p>The source layer (for vector sources).</p>
</td></tr>
<tr><td><code id="add_layer_+3A_paint">paint</code></td>
<td>
<p>A list of paint properties for the layer.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_layout">layout</code></td>
<td>
<p>A list of layout properties for the layer.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_slot">slot</code></td>
<td>
<p>An optional slot for layer order.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_min_zoom">min_zoom</code></td>
<td>
<p>The minimum zoom level for the layer.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_max_zoom">max_zoom</code></td>
<td>
<p>The maximum zoom level for the layer.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_popup">popup</code></td>
<td>
<p>A column name containing information to display in a popup on click.  Columns containing HTML will be parsed.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_tooltip">tooltip</code></td>
<td>
<p>A column name containing information to display in a tooltip on hover. Columns containing HTML will be parsed.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_hover_options">hover_options</code></td>
<td>
<p>A named list of options for highlighting features in the layer on hover.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_before_id">before_id</code></td>
<td>
<p>The name of the layer that this layer appears &quot;before&quot;, allowing you to insert layers below other layers in your basemap (e.g. labels).</p>
</td></tr>
<tr><td><code id="add_layer_+3A_filter">filter</code></td>
<td>
<p>An optional filter expression to subset features in the layer.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the new layer added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Load necessary libraries
library(mapgl)
library(tigris)

# Load geojson data for North Carolina tracts
nc_tracts &lt;- tracts(state = "NC", cb = TRUE)

# Create a Mapbox GL map
map &lt;- mapboxgl(
    style = mapbox_style("light"),
    center = c(-79.0193, 35.7596),
    zoom = 7
)

# Add a source and fill layer for North Carolina tracts
map %&gt;%
    add_source(
        id = "nc-tracts",
        data = nc_tracts
    ) %&gt;%
    add_layer(
        id = "nc-layer",
        type = "fill",
        source = "nc-tracts",
        paint = list(
            "fill-color" = "#888888",
            "fill-opacity" = 0.4
        )
    )

## End(Not run)
</code></pre>

<hr>
<h2 id='add_layers_control'>Add a layers control to the map</h2><span id='topic+add_layers_control'></span>

<h3>Description</h3>

<p>Add a layers control to the map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_layers_control(
  map,
  position = "top-left",
  layers = NULL,
  collapsible = TRUE,
  use_icon = TRUE,
  background_color = NULL,
  active_color = NULL,
  hover_color = NULL,
  active_text_color = NULL,
  inactive_text_color = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_layers_control_+3A_map">map</code></td>
<td>
<p>A map object.</p>
</td></tr>
<tr><td><code id="add_layers_control_+3A_position">position</code></td>
<td>
<p>The position of the control on the map (one of &quot;top-left&quot;, &quot;top-right&quot;, &quot;bottom-left&quot;, &quot;bottom-right&quot;).</p>
</td></tr>
<tr><td><code id="add_layers_control_+3A_layers">layers</code></td>
<td>
<p>A vector of layer IDs to be included in the control. If NULL, all layers will be included.</p>
</td></tr>
<tr><td><code id="add_layers_control_+3A_collapsible">collapsible</code></td>
<td>
<p>Whether the control should be collapsible.</p>
</td></tr>
<tr><td><code id="add_layers_control_+3A_use_icon">use_icon</code></td>
<td>
<p>Whether to use a stacked layers icon instead of the &quot;Layers&quot; text when collapsed. Only applies when collapsible = TRUE.</p>
</td></tr>
<tr><td><code id="add_layers_control_+3A_background_color">background_color</code></td>
<td>
<p>The background color for the layers control; this will be the
color used for inactive layer items.</p>
</td></tr>
<tr><td><code id="add_layers_control_+3A_active_color">active_color</code></td>
<td>
<p>The background color for active layer items.</p>
</td></tr>
<tr><td><code id="add_layers_control_+3A_hover_color">hover_color</code></td>
<td>
<p>The background color for layer items when hovered.</p>
</td></tr>
<tr><td><code id="add_layers_control_+3A_active_text_color">active_text_color</code></td>
<td>
<p>The text color for active layer items.</p>
</td></tr>
<tr><td><code id="add_layers_control_+3A_inactive_text_color">inactive_text_color</code></td>
<td>
<p>The text color for inactive layer items.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the layers control added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(tigris)
options(tigris_use_cache = TRUE)

rds &lt;- roads("TX", "Tarrant")
tr &lt;- tracts("TX", "Tarrant", cb = TRUE)

maplibre() |&gt;
    fit_bounds(rds) |&gt;
    add_fill_layer(
        id = "Census tracts",
        source = tr,
        fill_color = "purple",
        fill_opacity = 0.6
    ) |&gt;
    add_line_layer(
        "Local roads",
        source = rds,
        line_color = "pink"
    ) |&gt;
    add_layers_control(
        position = "top-left",
        background_color = "#ffffff",
        active_color = "#4a90e2"
    )

## End(Not run)
</code></pre>

<hr>
<h2 id='add_legend'>Add a legend to a Mapbox GL map</h2><span id='topic+add_legend'></span>

<h3>Description</h3>

<p>Add a legend to a Mapbox GL map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_legend(
  map,
  legend_title,
  values,
  colors,
  type = c("continuous", "categorical"),
  circular_patches = FALSE,
  position = "top-left",
  sizes = NULL,
  add = FALSE,
  width = NULL,
  layer_id = NULL,
  margin_top = NULL,
  margin_right = NULL,
  margin_bottom = NULL,
  margin_left = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_legend_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> function.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_legend_title">legend_title</code></td>
<td>
<p>The title of the legend.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_values">values</code></td>
<td>
<p>The values being represented on the map (either a vector of categories or a vector of stops).</p>
</td></tr>
<tr><td><code id="add_legend_+3A_colors">colors</code></td>
<td>
<p>The corresponding colors for the values (either a vector of colors, a single color, or an interpolate function).</p>
</td></tr>
<tr><td><code id="add_legend_+3A_type">type</code></td>
<td>
<p>One of &quot;continuous&quot; or &quot;categorical&quot;.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_circular_patches">circular_patches</code></td>
<td>
<p>Logical, whether to use circular patches in the legend (only for categorical legends).</p>
</td></tr>
<tr><td><code id="add_legend_+3A_position">position</code></td>
<td>
<p>The position of the legend on the map (one of &quot;top-left&quot;, &quot;bottom-left&quot;, &quot;top-right&quot;, &quot;bottom-right&quot;).</p>
</td></tr>
<tr><td><code id="add_legend_+3A_sizes">sizes</code></td>
<td>
<p>An optional numeric vector of sizes for the legend patches, or a single numeric value (only for categorical legends).</p>
</td></tr>
<tr><td><code id="add_legend_+3A_add">add</code></td>
<td>
<p>Logical, whether to add this legend to existing legends (TRUE) or replace existing legends (FALSE). Default is FALSE.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_width">width</code></td>
<td>
<p>The width of the legend. Can be specified in pixels (e.g., &quot;250px&quot;) or as &quot;auto&quot;. Default is NULL, which uses the built-in default.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_layer_id">layer_id</code></td>
<td>
<p>The ID of the layer that this legend is associated with. If provided, the legend will be shown/hidden when the layer visibility is toggled.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_margin_top">margin_top</code></td>
<td>
<p>Custom top margin in pixels, allowing for fine control over legend positioning. Default is NULL (uses standard positioning).</p>
</td></tr>
<tr><td><code id="add_legend_+3A_margin_right">margin_right</code></td>
<td>
<p>Custom right margin in pixels. Default is NULL.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_margin_bottom">margin_bottom</code></td>
<td>
<p>Custom bottom margin in pixels. Default is NULL.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_margin_left">margin_left</code></td>
<td>
<p>Custom left margin in pixels. Default is NULL.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated map object with the legend added.
</p>

<hr>
<h2 id='add_line_layer'>Add a line layer to a map</h2><span id='topic+add_line_layer'></span>

<h3>Description</h3>

<p>Add a line layer to a map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_line_layer(
  map,
  id,
  source,
  source_layer = NULL,
  line_blur = NULL,
  line_cap = NULL,
  line_color = NULL,
  line_dasharray = NULL,
  line_emissive_strength = NULL,
  line_gap_width = NULL,
  line_gradient = NULL,
  line_join = NULL,
  line_miter_limit = NULL,
  line_occlusion_opacity = NULL,
  line_offset = NULL,
  line_opacity = NULL,
  line_pattern = NULL,
  line_round_limit = NULL,
  line_sort_key = NULL,
  line_translate = NULL,
  line_translate_anchor = "map",
  line_trim_color = NULL,
  line_trim_fade_range = NULL,
  line_trim_offset = NULL,
  line_width = NULL,
  line_z_offset = NULL,
  visibility = "visible",
  slot = NULL,
  min_zoom = NULL,
  max_zoom = NULL,
  popup = NULL,
  tooltip = NULL,
  hover_options = NULL,
  before_id = NULL,
  filter = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_line_layer_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> functions.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_id">id</code></td>
<td>
<p>A unique ID for the layer.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_source">source</code></td>
<td>
<p>The ID of the source, alternatively an sf object (which will be
converted to a GeoJSON source) or a named list that specifies <code>type</code> and
<code>url</code> for a remote source.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_source_layer">source_layer</code></td>
<td>
<p>The source layer (for vector sources).</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_blur">line_blur</code></td>
<td>
<p>Amount to blur the line, in pixels.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_cap">line_cap</code></td>
<td>
<p>The display of line endings. One of &quot;butt&quot;, &quot;round&quot;, &quot;square&quot;.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_color">line_color</code></td>
<td>
<p>The color with which the line will be drawn.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_dasharray">line_dasharray</code></td>
<td>
<p>Specifies the lengths of the alternating dashes and
gaps that form the dash pattern.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_emissive_strength">line_emissive_strength</code></td>
<td>
<p>Controls the intensity of light emitted on the
source features.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_gap_width">line_gap_width</code></td>
<td>
<p>Draws a line casing outside of a line's actual path.
Value indicates the width of the inner gap.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_gradient">line_gradient</code></td>
<td>
<p>A gradient used to color a line feature at various
distances along its length.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_join">line_join</code></td>
<td>
<p>The display of lines when joining.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_miter_limit">line_miter_limit</code></td>
<td>
<p>Used to automatically convert miter joins to bevel
joins for sharp angles.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_occlusion_opacity">line_occlusion_opacity</code></td>
<td>
<p>Opacity multiplier of the line part that is
occluded by 3D objects.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_offset">line_offset</code></td>
<td>
<p>The line's offset.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_opacity">line_opacity</code></td>
<td>
<p>The opacity at which the line will be drawn.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_pattern">line_pattern</code></td>
<td>
<p>Name of image in sprite to use for drawing image lines.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_round_limit">line_round_limit</code></td>
<td>
<p>Used to automatically convert round joins to miter
joins for shallow angles.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_sort_key">line_sort_key</code></td>
<td>
<p>Sorts features in ascending order based on this value.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_translate">line_translate</code></td>
<td>
<p>The geometry's offset. Values are <code>c(x, y)</code> where
negatives indicate left and up, respectively.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_translate_anchor">line_translate_anchor</code></td>
<td>
<p>Controls the frame of reference for <code>line-translate</code>.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_trim_color">line_trim_color</code></td>
<td>
<p>The color to be used for rendering the trimmed line section.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_trim_fade_range">line_trim_fade_range</code></td>
<td>
<p>The fade range for the trim-start and trim-end points.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_trim_offset">line_trim_offset</code></td>
<td>
<p>The line part between <code>c(trim_start, trim_end)</code> will be
painted using <code>line_trim_color</code>.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_width">line_width</code></td>
<td>
<p>Stroke thickness.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_line_z_offset">line_z_offset</code></td>
<td>
<p>Vertical offset from ground, in meters.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_visibility">visibility</code></td>
<td>
<p>Whether this layer is displayed.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_slot">slot</code></td>
<td>
<p>An optional slot for layer order.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_min_zoom">min_zoom</code></td>
<td>
<p>The minimum zoom level for the layer.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_max_zoom">max_zoom</code></td>
<td>
<p>The maximum zoom level for the layer.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_popup">popup</code></td>
<td>
<p>A column name containing information to display in a popup on click.
Columns containing HTML will be parsed.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_tooltip">tooltip</code></td>
<td>
<p>A column name containing information to display in a tooltip on hover.
Columns containing HTML will be parsed.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_hover_options">hover_options</code></td>
<td>
<p>A named list of options for highlighting features in the
layer on hover.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_before_id">before_id</code></td>
<td>
<p>The name of the layer that this layer appears &quot;before&quot;,
allowing you to insert layers below other layers in your basemap (e.g. labels)</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_filter">filter</code></td>
<td>
<p>An optional filter expression to subset features in the layer.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the new line layer added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapgl)
library(tigris)

loving_roads &lt;- roads("TX", "Loving")

maplibre(style = maptiler_style("backdrop")) |&gt;
    fit_bounds(loving_roads) |&gt;
    add_line_layer(
        id = "tracks",
        source = loving_roads,
        line_color = "navy",
        line_opacity = 0.7
    )

## End(Not run)
</code></pre>

<hr>
<h2 id='add_markers'>Add markers to a Mapbox GL or Maplibre GL map</h2><span id='topic+add_markers'></span>

<h3>Description</h3>

<p>Add markers to a Mapbox GL or Maplibre GL map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_markers(
  map,
  data,
  color = "red",
  rotation = 0,
  popup = NULL,
  marker_id = NULL,
  draggable = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_markers_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> functions.</p>
</td></tr>
<tr><td><code id="add_markers_+3A_data">data</code></td>
<td>
<p>A length-2 numeric vector of coordinates, a list of length-2 numeric vectors, or an <code>sf</code> POINT object.</p>
</td></tr>
<tr><td><code id="add_markers_+3A_color">color</code></td>
<td>
<p>The color of the marker (default is &quot;red&quot;).</p>
</td></tr>
<tr><td><code id="add_markers_+3A_rotation">rotation</code></td>
<td>
<p>The rotation of the marker (default is 0).</p>
</td></tr>
<tr><td><code id="add_markers_+3A_popup">popup</code></td>
<td>
<p>A column name for popups (if data is an <code>sf</code> object) or a string for a single popup (if data is a numeric vector or list of vectors).</p>
</td></tr>
<tr><td><code id="add_markers_+3A_marker_id">marker_id</code></td>
<td>
<p>A unique ID for the marker. For lists, names will be inherited from the list names.  For <code>sf</code> objects, this should be a column name.</p>
</td></tr>
<tr><td><code id="add_markers_+3A_draggable">draggable</code></td>
<td>
<p>A boolean indicating if the marker should be draggable (default is FALSE).</p>
</td></tr>
<tr><td><code id="add_markers_+3A_...">...</code></td>
<td>
<p>Additional options passed to the marker.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the markers added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapgl)
library(sf)

# Create a map object
map &lt;- mapboxgl(
  style = mapbox_style("streets"),
  center = c(-74.006, 40.7128),
  zoom = 10
)

# Add a single draggable marker with an ID
map &lt;- add_markers(
  map,
  c(-74.006, 40.7128),
  color = "blue",
  rotation = 45,
  popup = "A marker",
  draggable = TRUE,
  marker_id = "marker1"
)

# Add multiple markers from a named list of coordinates
coords_list &lt;- list(marker2 = c(-74.006, 40.7128),
                    marker3 = c(-73.935242, 40.730610))
map &lt;- add_markers(
  map,
  coords_list,
  color = "green",
  popup = "Multiple markers",
  draggable = TRUE
)

# Create an sf POINT object
points_sf &lt;- st_as_sf(data.frame(
  id = c("marker4", "marker5"),
  lon = c(-74.006, -73.935242),
  lat = c(40.7128, 40.730610)
), coords = c("lon", "lat"), crs = 4326)
points_sf$popup &lt;- c("Point 1", "Point 2")

# Add multiple markers from an sf object with IDs from a column
map &lt;- add_markers(
  map,
  points_sf,
  color = "red",
  popup = "popup",
  draggable = TRUE,
  marker_id = "id"
)

## End(Not run)
</code></pre>

<hr>
<h2 id='add_navigation_control'>Add a navigation control to a map</h2><span id='topic+add_navigation_control'></span>

<h3>Description</h3>

<p>Add a navigation control to a map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_navigation_control(
  map,
  show_compass = TRUE,
  show_zoom = TRUE,
  visualize_pitch = FALSE,
  position = "top-right",
  orientation = "vertical"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_navigation_control_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> functions.</p>
</td></tr>
<tr><td><code id="add_navigation_control_+3A_show_compass">show_compass</code></td>
<td>
<p>Whether to show the compass button.</p>
</td></tr>
<tr><td><code id="add_navigation_control_+3A_show_zoom">show_zoom</code></td>
<td>
<p>Whether to show the zoom-in and zoom-out buttons.</p>
</td></tr>
<tr><td><code id="add_navigation_control_+3A_visualize_pitch">visualize_pitch</code></td>
<td>
<p>Whether to visualize the pitch by rotating the X-axis of the compass.</p>
</td></tr>
<tr><td><code id="add_navigation_control_+3A_position">position</code></td>
<td>
<p>The position on the map where the control will be added. Possible values are &quot;top-left&quot;, &quot;top-right&quot;, &quot;bottom-left&quot;, and &quot;bottom-right&quot;.</p>
</td></tr>
<tr><td><code id="add_navigation_control_+3A_orientation">orientation</code></td>
<td>
<p>The orientation of the navigation control. Can be &quot;vertical&quot; (default) or &quot;horizontal&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated map object with the navigation control added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapgl)

mapboxgl() |&gt;
    add_navigation_control(visualize_pitch = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='add_raster_dem_source'>Add a raster DEM source to a Mapbox GL or Maplibre GL map</h2><span id='topic+add_raster_dem_source'></span>

<h3>Description</h3>

<p>Add a raster DEM source to a Mapbox GL or Maplibre GL map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_raster_dem_source(map, id, url, tileSize = 512, maxzoom = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_raster_dem_source_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function.</p>
</td></tr>
<tr><td><code id="add_raster_dem_source_+3A_id">id</code></td>
<td>
<p>A unique ID for the source.</p>
</td></tr>
<tr><td><code id="add_raster_dem_source_+3A_url">url</code></td>
<td>
<p>A URL pointing to the raster DEM source.</p>
</td></tr>
<tr><td><code id="add_raster_dem_source_+3A_tilesize">tileSize</code></td>
<td>
<p>The size of the raster tiles.</p>
</td></tr>
<tr><td><code id="add_raster_dem_source_+3A_maxzoom">maxzoom</code></td>
<td>
<p>The maximum zoom level for the raster tiles.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the new source added.
</p>

<hr>
<h2 id='add_raster_layer'>Add a raster layer to a Mapbox GL map</h2><span id='topic+add_raster_layer'></span>

<h3>Description</h3>

<p>Add a raster layer to a Mapbox GL map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_raster_layer(
  map,
  id,
  source,
  source_layer = NULL,
  raster_brightness_max = NULL,
  raster_brightness_min = NULL,
  raster_contrast = NULL,
  raster_fade_duration = NULL,
  raster_hue_rotate = NULL,
  raster_opacity = NULL,
  raster_resampling = NULL,
  raster_saturation = NULL,
  visibility = "visible",
  slot = NULL,
  min_zoom = NULL,
  max_zoom = NULL,
  before_id = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_raster_layer_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> function.</p>
</td></tr>
<tr><td><code id="add_raster_layer_+3A_id">id</code></td>
<td>
<p>A unique ID for the layer.</p>
</td></tr>
<tr><td><code id="add_raster_layer_+3A_source">source</code></td>
<td>
<p>The ID of the source.</p>
</td></tr>
<tr><td><code id="add_raster_layer_+3A_source_layer">source_layer</code></td>
<td>
<p>The source layer (for vector sources).</p>
</td></tr>
<tr><td><code id="add_raster_layer_+3A_raster_brightness_max">raster_brightness_max</code></td>
<td>
<p>The maximum brightness of the image.</p>
</td></tr>
<tr><td><code id="add_raster_layer_+3A_raster_brightness_min">raster_brightness_min</code></td>
<td>
<p>The minimum brightness of the image.</p>
</td></tr>
<tr><td><code id="add_raster_layer_+3A_raster_contrast">raster_contrast</code></td>
<td>
<p>Increase or reduce the brightness of the image.</p>
</td></tr>
<tr><td><code id="add_raster_layer_+3A_raster_fade_duration">raster_fade_duration</code></td>
<td>
<p>The duration of the fade-in/fade-out effect.</p>
</td></tr>
<tr><td><code id="add_raster_layer_+3A_raster_hue_rotate">raster_hue_rotate</code></td>
<td>
<p>Rotates hues around the color wheel.</p>
</td></tr>
<tr><td><code id="add_raster_layer_+3A_raster_opacity">raster_opacity</code></td>
<td>
<p>The opacity at which the raster will be drawn.</p>
</td></tr>
<tr><td><code id="add_raster_layer_+3A_raster_resampling">raster_resampling</code></td>
<td>
<p>The resampling/interpolation method to use for overscaling.</p>
</td></tr>
<tr><td><code id="add_raster_layer_+3A_raster_saturation">raster_saturation</code></td>
<td>
<p>Increase or reduce the saturation of the image.</p>
</td></tr>
<tr><td><code id="add_raster_layer_+3A_visibility">visibility</code></td>
<td>
<p>Whether this layer is displayed.</p>
</td></tr>
<tr><td><code id="add_raster_layer_+3A_slot">slot</code></td>
<td>
<p>An optional slot for layer order.</p>
</td></tr>
<tr><td><code id="add_raster_layer_+3A_min_zoom">min_zoom</code></td>
<td>
<p>The minimum zoom level for the layer.</p>
</td></tr>
<tr><td><code id="add_raster_layer_+3A_max_zoom">max_zoom</code></td>
<td>
<p>The maximum zoom level for the layer.</p>
</td></tr>
<tr><td><code id="add_raster_layer_+3A_before_id">before_id</code></td>
<td>
<p>The name of the layer that this layer appears &quot;before&quot;, allowing you to insert layers below other layers in your basemap (e.g. labels).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the new raster layer added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
mapboxgl(
    style = mapbox_style("dark"),
    zoom = 5,
    center = c(-75.789, 41.874)
) |&gt;
    add_image_source(
        id = "radar",
        url = "https://docs.mapbox.com/mapbox-gl-js/assets/radar.gif",
        coordinates = list(
            c(-80.425, 46.437),
            c(-71.516, 46.437),
            c(-71.516, 37.936),
            c(-80.425, 37.936)
        )
    ) |&gt;
    add_raster_layer(
        id = "radar-layer",
        source = "radar",
        raster_fade_duration = 0
    )

## End(Not run)
</code></pre>

<hr>
<h2 id='add_raster_source'>Add a raster tile source to a Mapbox GL or Maplibre GL map</h2><span id='topic+add_raster_source'></span>

<h3>Description</h3>

<p>Add a raster tile source to a Mapbox GL or Maplibre GL map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_raster_source(
  map,
  id,
  url = NULL,
  tiles = NULL,
  tileSize = 256,
  maxzoom = 22
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_raster_source_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function.</p>
</td></tr>
<tr><td><code id="add_raster_source_+3A_id">id</code></td>
<td>
<p>A unique ID for the source.</p>
</td></tr>
<tr><td><code id="add_raster_source_+3A_url">url</code></td>
<td>
<p>A URL pointing to the raster tile source. (optional)</p>
</td></tr>
<tr><td><code id="add_raster_source_+3A_tiles">tiles</code></td>
<td>
<p>A vector of tile URLs for the raster source. (optional)</p>
</td></tr>
<tr><td><code id="add_raster_source_+3A_tilesize">tileSize</code></td>
<td>
<p>The size of the raster tiles.</p>
</td></tr>
<tr><td><code id="add_raster_source_+3A_maxzoom">maxzoom</code></td>
<td>
<p>The maximum zoom level for the raster tiles.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the new source added.
</p>

<hr>
<h2 id='add_reset_control'>Add a reset control to a map</h2><span id='topic+add_reset_control'></span>

<h3>Description</h3>

<p>This function adds a reset control to a Mapbox GL or MapLibre GL map.
The reset control allows users to return to the original zoom level and center.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_reset_control(map, position = "top-right", animate = TRUE, duration = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_reset_control_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> functions.</p>
</td></tr>
<tr><td><code id="add_reset_control_+3A_position">position</code></td>
<td>
<p>The position of the control. Can be one of &quot;top-left&quot;, &quot;top-right&quot;, &quot;bottom-left&quot;, or &quot;bottom-right&quot;. Default is &quot;top-right&quot;.</p>
</td></tr>
<tr><td><code id="add_reset_control_+3A_animate">animate</code></td>
<td>
<p>Whether or not to animate the transition to the original map view; defaults to <code>TRUE</code>.  If <code>FALSE</code>, the view will &quot;jump&quot; to the original view with no transition.</p>
</td></tr>
<tr><td><code id="add_reset_control_+3A_duration">duration</code></td>
<td>
<p>The length of the transition from the current view to the original view, specified in milliseconds.  This argument only works with <code>animate</code> is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the reset control added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapgl)

mapboxgl() |&gt;
    add_reset_control(position = "top-left")

## End(Not run)
</code></pre>

<hr>
<h2 id='add_scale_control'>Add a scale control to a map</h2><span id='topic+add_scale_control'></span>

<h3>Description</h3>

<p>This function adds a scale control to a Mapbox GL or Maplibre GL map.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_scale_control(
  map,
  position = "bottom-left",
  unit = "metric",
  max_width = 100
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_scale_control_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> functions.</p>
</td></tr>
<tr><td><code id="add_scale_control_+3A_position">position</code></td>
<td>
<p>The position of the control. Can be one of &quot;top-left&quot;, &quot;top-right&quot;, &quot;bottom-left&quot;, or &quot;bottom-right&quot;. Default is &quot;bottom-left&quot;.</p>
</td></tr>
<tr><td><code id="add_scale_control_+3A_unit">unit</code></td>
<td>
<p>The unit of the scale. Can be either &quot;imperial&quot;, &quot;metric&quot;, or &quot;nautical&quot;. Default is &quot;metric&quot;.</p>
</td></tr>
<tr><td><code id="add_scale_control_+3A_max_width">max_width</code></td>
<td>
<p>The maximum length of the scale control in pixels. Default is 100.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the scale control added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapgl)

mapboxgl() |&gt;
    add_scale_control(position = "bottom-right", unit = "imperial")

## End(Not run)
</code></pre>

<hr>
<h2 id='add_source'>Add a GeoJSON or sf source to a Mapbox GL or Maplibre GL map</h2><span id='topic+add_source'></span>

<h3>Description</h3>

<p>Add a GeoJSON or sf source to a Mapbox GL or Maplibre GL map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_source(map, id, data, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_source_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function.</p>
</td></tr>
<tr><td><code id="add_source_+3A_id">id</code></td>
<td>
<p>A unique ID for the source.</p>
</td></tr>
<tr><td><code id="add_source_+3A_data">data</code></td>
<td>
<p>An sf object or a URL pointing to a remote GeoJSON file.</p>
</td></tr>
<tr><td><code id="add_source_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to the JavaScript addSource method.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the new source added.
</p>

<hr>
<h2 id='add_symbol_layer'>Add a symbol layer to a map</h2><span id='topic+add_symbol_layer'></span>

<h3>Description</h3>

<p>Add a symbol layer to a map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_symbol_layer(
  map,
  id,
  source,
  source_layer = NULL,
  icon_allow_overlap = NULL,
  icon_anchor = NULL,
  icon_color = NULL,
  icon_color_brightness_max = NULL,
  icon_color_brightness_min = NULL,
  icon_color_contrast = NULL,
  icon_color_saturation = NULL,
  icon_emissive_strength = NULL,
  icon_halo_blur = NULL,
  icon_halo_color = NULL,
  icon_halo_width = NULL,
  icon_ignore_placement = NULL,
  icon_image = NULL,
  icon_image_cross_fade = NULL,
  icon_keep_upright = NULL,
  icon_offset = NULL,
  icon_opacity = NULL,
  icon_optional = NULL,
  icon_padding = NULL,
  icon_pitch_alignment = NULL,
  icon_rotate = NULL,
  icon_rotation_alignment = NULL,
  icon_size = NULL,
  icon_text_fit = NULL,
  icon_text_fit_padding = NULL,
  icon_translate = NULL,
  icon_translate_anchor = NULL,
  symbol_avoid_edges = NULL,
  symbol_placement = NULL,
  symbol_sort_key = NULL,
  symbol_spacing = NULL,
  symbol_z_elevate = NULL,
  symbol_z_offset = NULL,
  symbol_z_order = NULL,
  text_allow_overlap = NULL,
  text_anchor = NULL,
  text_color = "black",
  text_emissive_strength = NULL,
  text_field = NULL,
  text_font = NULL,
  text_halo_blur = NULL,
  text_halo_color = NULL,
  text_halo_width = NULL,
  text_ignore_placement = NULL,
  text_justify = NULL,
  text_keep_upright = NULL,
  text_letter_spacing = NULL,
  text_line_height = NULL,
  text_max_angle = NULL,
  text_max_width = NULL,
  text_offset = NULL,
  text_opacity = NULL,
  text_optional = NULL,
  text_padding = NULL,
  text_pitch_alignment = NULL,
  text_radial_offset = NULL,
  text_rotate = NULL,
  text_rotation_alignment = NULL,
  text_size = NULL,
  text_transform = NULL,
  text_translate = NULL,
  text_translate_anchor = NULL,
  text_variable_anchor = NULL,
  text_writing_mode = NULL,
  visibility = "visible",
  slot = NULL,
  min_zoom = NULL,
  max_zoom = NULL,
  popup = NULL,
  tooltip = NULL,
  hover_options = NULL,
  before_id = NULL,
  filter = NULL,
  cluster_options = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_symbol_layer_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> functions.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_id">id</code></td>
<td>
<p>A unique ID for the layer.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_source">source</code></td>
<td>
<p>The ID of the source, alternatively an sf object (which will be converted to a GeoJSON source) or a named list that specifies <code>type</code> and <code>url</code> for a remote source.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_source_layer">source_layer</code></td>
<td>
<p>The source layer (for vector sources).</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_allow_overlap">icon_allow_overlap</code></td>
<td>
<p>If TRUE, the icon will be visible even if it collides with other previously drawn symbols.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_anchor">icon_anchor</code></td>
<td>
<p>Part of the icon placed closest to the anchor.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_color">icon_color</code></td>
<td>
<p>The color of the icon.  This is not supported for many Mapbox icons; read more at <a href="https://docs.mapbox.com/help/troubleshooting/using-recolorable-images-in-mapbox-maps/">https://docs.mapbox.com/help/troubleshooting/using-recolorable-images-in-mapbox-maps/</a>.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_color_brightness_max">icon_color_brightness_max</code></td>
<td>
<p>The maximum brightness of the icon color.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_color_brightness_min">icon_color_brightness_min</code></td>
<td>
<p>The minimum brightness of the icon color.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_color_contrast">icon_color_contrast</code></td>
<td>
<p>The contrast of the icon color.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_color_saturation">icon_color_saturation</code></td>
<td>
<p>The saturation of the icon color.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_emissive_strength">icon_emissive_strength</code></td>
<td>
<p>The strength of the icon's emissive color.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_halo_blur">icon_halo_blur</code></td>
<td>
<p>The blur applied to the icon's halo.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_halo_color">icon_halo_color</code></td>
<td>
<p>The color of the icon's halo.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_halo_width">icon_halo_width</code></td>
<td>
<p>The width of the icon's halo.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_ignore_placement">icon_ignore_placement</code></td>
<td>
<p>If TRUE, the icon will be visible even if it collides with other symbols.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_image">icon_image</code></td>
<td>
<p>Name of image in sprite to use for drawing an image background.
To use values in a column of your input dataset, use <code>get_column('YOUR_ICON_COLUMN_NAME')</code>.
Images can also be loaded with the <code>add_image()</code> function which should precede the <code>add_symbol_layer()</code> function.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_image_cross_fade">icon_image_cross_fade</code></td>
<td>
<p>The cross-fade parameter for the icon image.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_keep_upright">icon_keep_upright</code></td>
<td>
<p>If TRUE, the icon will be kept upright.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_offset">icon_offset</code></td>
<td>
<p>Offset distance of icon.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_opacity">icon_opacity</code></td>
<td>
<p>The opacity at which the icon will be drawn.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_optional">icon_optional</code></td>
<td>
<p>If TRUE, the icon will be optional.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_padding">icon_padding</code></td>
<td>
<p>Padding around the icon.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_pitch_alignment">icon_pitch_alignment</code></td>
<td>
<p>Alignment of the icon with respect to the pitch of the map.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_rotate">icon_rotate</code></td>
<td>
<p>Rotates the icon clockwise.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_rotation_alignment">icon_rotation_alignment</code></td>
<td>
<p>Alignment of the icon with respect to the map.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_size">icon_size</code></td>
<td>
<p>The size of the icon, specified relative to the original size
of the image. For example, a value of 5 would make the icon
5 times larger than the original size, whereas a value of 0.5 would
make the icon half the size of the original.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_text_fit">icon_text_fit</code></td>
<td>
<p>Scales the text to fit the icon.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_text_fit_padding">icon_text_fit_padding</code></td>
<td>
<p>Padding for text fitting the icon.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_translate">icon_translate</code></td>
<td>
<p>The offset distance of the icon.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_icon_translate_anchor">icon_translate_anchor</code></td>
<td>
<p>Controls the frame of reference for <code>icon-translate</code>.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_symbol_avoid_edges">symbol_avoid_edges</code></td>
<td>
<p>If TRUE, the symbol will be avoided when near the edges.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_symbol_placement">symbol_placement</code></td>
<td>
<p>Placement of the symbol on the map.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_symbol_sort_key">symbol_sort_key</code></td>
<td>
<p>Sorts features in ascending order based on this value.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_symbol_spacing">symbol_spacing</code></td>
<td>
<p>Spacing between symbols.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_symbol_z_elevate">symbol_z_elevate</code></td>
<td>
<p>If <code>TRUE</code>, positions the symbol on top of a <code>fill-extrusion</code> layer.
Requires <code>symbol_placement</code> to be set to <code>"point"</code> and <code>symbol-z-order</code> to be set to <code>"auto"</code>.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_symbol_z_offset">symbol_z_offset</code></td>
<td>
<p>The elevation of the symbol, in meters.  Use <code>get_column()</code> to get elevations from a column in the dataset.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_symbol_z_order">symbol_z_order</code></td>
<td>
<p>Orders the symbol z-axis.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_allow_overlap">text_allow_overlap</code></td>
<td>
<p>If TRUE, the text will be visible even if it collides with other previously drawn symbols.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_anchor">text_anchor</code></td>
<td>
<p>Part of the text placed closest to the anchor.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_color">text_color</code></td>
<td>
<p>The color of the text.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_emissive_strength">text_emissive_strength</code></td>
<td>
<p>The strength of the text's emissive color.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_field">text_field</code></td>
<td>
<p>Value to use for a text label.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_font">text_font</code></td>
<td>
<p>Font stack to use for displaying text.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_halo_blur">text_halo_blur</code></td>
<td>
<p>The blur applied to the text's halo.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_halo_color">text_halo_color</code></td>
<td>
<p>The color of the text's halo.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_halo_width">text_halo_width</code></td>
<td>
<p>The width of the text's halo.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_ignore_placement">text_ignore_placement</code></td>
<td>
<p>If TRUE, the text will be visible even if it collides with other symbols.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_justify">text_justify</code></td>
<td>
<p>The justification of the text.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_keep_upright">text_keep_upright</code></td>
<td>
<p>If TRUE, the text will be kept upright.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_letter_spacing">text_letter_spacing</code></td>
<td>
<p>Spacing between text letters.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_line_height">text_line_height</code></td>
<td>
<p>Height of the text lines.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_max_angle">text_max_angle</code></td>
<td>
<p>Maximum angle of the text.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_max_width">text_max_width</code></td>
<td>
<p>Maximum width of the text.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_offset">text_offset</code></td>
<td>
<p>Offset distance of text.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_opacity">text_opacity</code></td>
<td>
<p>The opacity at which the text will be drawn.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_optional">text_optional</code></td>
<td>
<p>If TRUE, the text will be optional.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_padding">text_padding</code></td>
<td>
<p>Padding around the text.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_pitch_alignment">text_pitch_alignment</code></td>
<td>
<p>Alignment of the text with respect to the pitch of the map.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_radial_offset">text_radial_offset</code></td>
<td>
<p>Radial offset of the text.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_rotate">text_rotate</code></td>
<td>
<p>Rotates the text clockwise.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_rotation_alignment">text_rotation_alignment</code></td>
<td>
<p>Alignment of the text with respect to the map.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_size">text_size</code></td>
<td>
<p>The size of the text.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_transform">text_transform</code></td>
<td>
<p>Transform applied to the text.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_translate">text_translate</code></td>
<td>
<p>The offset distance of the text.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_translate_anchor">text_translate_anchor</code></td>
<td>
<p>Controls the frame of reference for <code>text-translate</code>.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_variable_anchor">text_variable_anchor</code></td>
<td>
<p>Variable anchor for the text.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_text_writing_mode">text_writing_mode</code></td>
<td>
<p>Writing mode for the text.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_visibility">visibility</code></td>
<td>
<p>Whether this layer is displayed.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_slot">slot</code></td>
<td>
<p>An optional slot for layer order.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_min_zoom">min_zoom</code></td>
<td>
<p>The minimum zoom level for the layer.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_max_zoom">max_zoom</code></td>
<td>
<p>The maximum zoom level for the layer.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_popup">popup</code></td>
<td>
<p>A column name containing information to display in a popup on click. Columns containing HTML will be parsed.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_tooltip">tooltip</code></td>
<td>
<p>A column name containing information to display in a tooltip on hover. Columns containing HTML will be parsed.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_hover_options">hover_options</code></td>
<td>
<p>A named list of options for highlighting features in the layer on hover. Not all elements of SVG icons can be styled.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_before_id">before_id</code></td>
<td>
<p>The name of the layer that this layer appears &quot;before&quot;, allowing you to insert layers below other layers in your basemap (e.g. labels).</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_filter">filter</code></td>
<td>
<p>An optional filter expression to subset features in the layer.</p>
</td></tr>
<tr><td><code id="add_symbol_layer_+3A_cluster_options">cluster_options</code></td>
<td>
<p>A list of options for clustering symbols, created by the <code>cluster_options()</code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the new symbol layer added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapgl)
library(sf)
library(dplyr)

# Set seed for reproducibility
set.seed(1234)

# Define the bounding box for Washington DC (approximately)
bbox &lt;- st_bbox(
    c(
        xmin = -77.119759,
        ymin = 38.791645,
        xmax = -76.909393,
        ymax = 38.995548
    ),
    crs = st_crs(4326)
)

# Generate 30 random points within the bounding box
random_points &lt;- st_as_sf(
    data.frame(
        id = 1:30,
        lon = runif(30, bbox["xmin"], bbox["xmax"]),
        lat = runif(30, bbox["ymin"], bbox["ymax"])
    ),
    coords = c("lon", "lat"),
    crs = 4326
)

# Assign random icons
icons &lt;- c("music", "bar", "theatre", "bicycle")
random_points &lt;- random_points |&gt;
    mutate(icon = sample(icons, n(), replace = TRUE))

# Map with icons
mapboxgl(style = mapbox_style("light")) |&gt;
    fit_bounds(random_points, animate = FALSE) |&gt;
    add_symbol_layer(
        id = "points-of-interest",
        source = random_points,
        icon_image = c("get", "icon"),
        icon_allow_overlap = TRUE,
        tooltip = "icon"
    )

## End(Not run)
</code></pre>

<hr>
<h2 id='add_vector_source'>Add a vector tile source to a Mapbox GL or Maplibre GL map</h2><span id='topic+add_vector_source'></span>

<h3>Description</h3>

<p>Add a vector tile source to a Mapbox GL or Maplibre GL map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_vector_source(map, id, url)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_vector_source_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function.</p>
</td></tr>
<tr><td><code id="add_vector_source_+3A_id">id</code></td>
<td>
<p>A unique ID for the source.</p>
</td></tr>
<tr><td><code id="add_vector_source_+3A_url">url</code></td>
<td>
<p>A URL pointing to the vector tile source.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the new source added.
</p>

<hr>
<h2 id='add_video_source'>Add a video source to a Mapbox GL or Maplibre GL map</h2><span id='topic+add_video_source'></span>

<h3>Description</h3>

<p>Add a video source to a Mapbox GL or Maplibre GL map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_video_source(map, id, urls, coordinates)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_video_source_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function.</p>
</td></tr>
<tr><td><code id="add_video_source_+3A_id">id</code></td>
<td>
<p>A unique ID for the source.</p>
</td></tr>
<tr><td><code id="add_video_source_+3A_urls">urls</code></td>
<td>
<p>A vector of URLs pointing to the video sources.</p>
</td></tr>
<tr><td><code id="add_video_source_+3A_coordinates">coordinates</code></td>
<td>
<p>A list of coordinates specifying the video corners in clockwise order: top left, top right, bottom right, bottom left.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the new source added.
</p>

<hr>
<h2 id='carto_style'>Get CARTO Style URL</h2><span id='topic+carto_style'></span>

<h3>Description</h3>

<p>Get CARTO Style URL
</p>


<h3>Usage</h3>

<pre><code class='language-R'>carto_style(style_name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="carto_style_+3A_style_name">style_name</code></td>
<td>
<p>The name of the style (e.g., &quot;voyager&quot;, &quot;positron&quot;, &quot;dark-matter&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The style URL corresponding to the given style name.
</p>

<hr>
<h2 id='clear_controls'>Clear all controls from a Mapbox GL or Maplibre GL map in a Shiny app</h2><span id='topic+clear_controls'></span>

<h3>Description</h3>

<p>Clear all controls from a Mapbox GL or Maplibre GL map in a Shiny app
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clear_controls(map)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clear_controls_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with all controls removed.
</p>

<hr>
<h2 id='clear_layer'>Clear a layer from a map using a proxy</h2><span id='topic+clear_layer'></span>

<h3>Description</h3>

<p>This function allows a layer to be removed from an existing Mapbox GL map using a proxy object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clear_layer(proxy, layer_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clear_layer_+3A_proxy">proxy</code></td>
<td>
<p>A proxy object created by <code>mapboxgl_proxy</code> or <code>maplibre_proxy</code>.</p>
</td></tr>
<tr><td><code id="clear_layer_+3A_layer_id">layer_id</code></td>
<td>
<p>The ID of the layer to be removed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated proxy object.
</p>

<hr>
<h2 id='clear_legend'>Clear legend from a map in a proxy session</h2><span id='topic+clear_legend'></span>

<h3>Description</h3>

<p>Clear legend from a map in a proxy session
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clear_legend(map)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clear_legend_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl_proxy</code> or <code>maplibre_proxy</code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated map object with the legend cleared.
</p>

<hr>
<h2 id='clear_markers'>Clear markers from a map in a Shiny session</h2><span id='topic+clear_markers'></span>

<h3>Description</h3>

<p>Clear markers from a map in a Shiny session
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clear_markers(map)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clear_markers_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl_proxy</code> or <code>maplibre_proxy</code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the markers cleared.
</p>

<hr>
<h2 id='cluster_options'>Prepare cluster options for circle layers</h2><span id='topic+cluster_options'></span>

<h3>Description</h3>

<p>This function creates a list of options for clustering circle layers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cluster_options(
  max_zoom = 14,
  cluster_radius = 50,
  color_stops = c("#51bbd6", "#f1f075", "#f28cb1"),
  radius_stops = c(20, 30, 40),
  count_stops = c(0, 100, 750),
  circle_blur = NULL,
  circle_opacity = NULL,
  circle_stroke_color = NULL,
  circle_stroke_opacity = NULL,
  circle_stroke_width = NULL,
  text_color = "black"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cluster_options_+3A_max_zoom">max_zoom</code></td>
<td>
<p>The maximum zoom level at which to cluster points.</p>
</td></tr>
<tr><td><code id="cluster_options_+3A_cluster_radius">cluster_radius</code></td>
<td>
<p>The radius of each cluster when clustering points.</p>
</td></tr>
<tr><td><code id="cluster_options_+3A_color_stops">color_stops</code></td>
<td>
<p>A vector of colors for the circle color step expression.</p>
</td></tr>
<tr><td><code id="cluster_options_+3A_radius_stops">radius_stops</code></td>
<td>
<p>A vector of radii for the circle radius step expression.</p>
</td></tr>
<tr><td><code id="cluster_options_+3A_count_stops">count_stops</code></td>
<td>
<p>A vector of point counts for both color and radius step expressions.</p>
</td></tr>
<tr><td><code id="cluster_options_+3A_circle_blur">circle_blur</code></td>
<td>
<p>Amount to blur the circle.</p>
</td></tr>
<tr><td><code id="cluster_options_+3A_circle_opacity">circle_opacity</code></td>
<td>
<p>The opacity of the circle.</p>
</td></tr>
<tr><td><code id="cluster_options_+3A_circle_stroke_color">circle_stroke_color</code></td>
<td>
<p>The color of the circle's stroke.</p>
</td></tr>
<tr><td><code id="cluster_options_+3A_circle_stroke_opacity">circle_stroke_opacity</code></td>
<td>
<p>The opacity of the circle's stroke.</p>
</td></tr>
<tr><td><code id="cluster_options_+3A_circle_stroke_width">circle_stroke_width</code></td>
<td>
<p>The width of the circle's stroke.</p>
</td></tr>
<tr><td><code id="cluster_options_+3A_text_color">text_color</code></td>
<td>
<p>The color to use for labels on the cluster circles.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of cluster options.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cluster_options(
    max_zoom = 14,
    cluster_radius = 50,
    color_stops = c("#51bbd6", "#f1f075", "#f28cb1"),
    radius_stops = c(20, 30, 40),
    count_stops = c(0, 100, 750),
    circle_blur = 1,
    circle_opacity = 0.8,
    circle_stroke_color = "#ffffff",
    circle_stroke_width = 2
)
</code></pre>

<hr>
<h2 id='compare'>Create a Compare widget</h2><span id='topic+compare'></span>

<h3>Description</h3>

<p>This function creates a comparison view between two Mapbox GL or Maplibre GL maps, allowing users to either swipe between the two maps or view them side-by-side with synchronized navigation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compare(
  map1,
  map2,
  width = "100%",
  height = NULL,
  elementId = NULL,
  mousemove = FALSE,
  orientation = "vertical",
  mode = "swipe"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compare_+3A_map1">map1</code></td>
<td>
<p>A <code>mapboxgl</code> or <code>maplibre</code> object representing the first map.</p>
</td></tr>
<tr><td><code id="compare_+3A_map2">map2</code></td>
<td>
<p>A <code>mapboxgl</code> or <code>maplibre</code> object representing the second map.</p>
</td></tr>
<tr><td><code id="compare_+3A_width">width</code></td>
<td>
<p>Width of the map container.</p>
</td></tr>
<tr><td><code id="compare_+3A_height">height</code></td>
<td>
<p>Height of the map container.</p>
</td></tr>
<tr><td><code id="compare_+3A_elementid">elementId</code></td>
<td>
<p>An optional string specifying the ID of the container for the comparison. If NULL, a unique ID will be generated.</p>
</td></tr>
<tr><td><code id="compare_+3A_mousemove">mousemove</code></td>
<td>
<p>A logical value indicating whether to enable swiping during cursor movement (rather than only when clicked). Only applicable when <code>mode="swipe"</code>.</p>
</td></tr>
<tr><td><code id="compare_+3A_orientation">orientation</code></td>
<td>
<p>A string specifying the orientation of the swiper or the side-by-side layout, either &quot;horizontal&quot; or &quot;vertical&quot;.</p>
</td></tr>
<tr><td><code id="compare_+3A_mode">mode</code></td>
<td>
<p>A string specifying the comparison mode: &quot;swipe&quot; (default) for a swipeable comparison with a slider, or &quot;sync&quot; for synchronized maps displayed next to each other.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Comparison modes</h4>

<p>The <code>compare()</code> function supports two modes:
</p>

<ul>
<li> <p><code>mode="swipe"</code> (default) - Creates a swipeable interface with a slider to reveal portions of each map
</p>
</li>
<li> <p><code>mode="sync"</code> - Places the maps next to each other with synchronized navigation
</p>
</li></ul>

<p>In both modes, navigation (panning, zooming, rotating, tilting) is synchronized between the maps.
</p>



<h4>Using the compare widget in Shiny</h4>

<p>The compare widget can be used in Shiny applications with the following functions:
</p>

<ul>
<li> <p><code>mapboxglCompareOutput()</code> / <code>renderMapboxglCompare()</code> - For Mapbox GL comparisons
</p>
</li>
<li> <p><code>maplibreCompareOutput()</code> / <code>renderMaplibreCompare()</code> - For Maplibre GL comparisons
</p>
</li>
<li> <p><code>mapboxgl_compare_proxy()</code> / <code>maplibre_compare_proxy()</code> - For updating maps in a compare widget
</p>
</li></ul>

<p>After creating a compare widget in a Shiny app, you can use the proxy functions to update either the &quot;before&quot;
(left/top) or &quot;after&quot; (right/bottom) map. The proxy objects work with all the regular map update functions like <code>set_style()</code>,
<code>set_paint_property()</code>, etc.
</p>
<p>To get a proxy that targets a specific map in the comparison:
</p>
<div class="sourceCode r"><pre># Access the left/top map
left_proxy &lt;- maplibre_compare_proxy("compare_id", map_side = "before")

# Access the right/bottom map
right_proxy &lt;- maplibre_compare_proxy("compare_id", map_side = "after")
</pre></div>
<p>The compare widget also provides Shiny input values for view state and clicks. For a compare widget with ID &quot;mycompare&quot;, you'll have:
</p>

<ul>
<li> <p><code>input$mycompare_before_view</code> - View state (center, zoom, bearing, pitch) of the left/top map
</p>
</li>
<li> <p><code>input$mycompare_after_view</code> - View state of the right/bottom map
</p>
</li>
<li> <p><code>input$mycompare_before_click</code> - Click events on the left/top map
</p>
</li>
<li> <p><code>input$mycompare_after_click</code> - Click events on the right/bottom map
</p>
</li></ul>




<h3>Value</h3>

<p>A comparison widget.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapgl)

m1 &lt;- mapboxgl(style = mapbox_style("light"))
m2 &lt;- mapboxgl(style = mapbox_style("dark"))

# Default swipe mode
compare(m1, m2)

# Synchronized side-by-side mode
compare(m1, m2, mode = "sync")

# Shiny example
library(shiny)

ui &lt;- fluidPage(
  maplibreCompareOutput("comparison")
)

server &lt;- function(input, output, session) {
  output$comparison &lt;- renderMaplibreCompare({
    compare(
      maplibre(style = carto_style("positron")),
      maplibre(style = carto_style("dark-matter")),
      mode = "sync"
    )
  })

  # Update the right map
  observe({
    right_proxy &lt;- maplibre_compare_proxy("comparison", map_side = "after")
    set_style(right_proxy, carto_style("voyager"))
  })
}

## End(Not run)
</code></pre>

<hr>
<h2 id='ease_to'>Ease to a given view</h2><span id='topic+ease_to'></span>

<h3>Description</h3>

<p>Ease to a given view
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ease_to(map, center, zoom = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ease_to_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function or a proxy object.</p>
</td></tr>
<tr><td><code id="ease_to_+3A_center">center</code></td>
<td>
<p>A numeric vector of length 2 specifying the target center of the map (longitude, latitude).</p>
</td></tr>
<tr><td><code id="ease_to_+3A_zoom">zoom</code></td>
<td>
<p>The target zoom level.</p>
</td></tr>
<tr><td><code id="ease_to_+3A_...">...</code></td>
<td>
<p>Additional named arguments for easing to the view.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated map object.
</p>

<hr>
<h2 id='fit_bounds'>Fit the map to a bounding box</h2><span id='topic+fit_bounds'></span>

<h3>Description</h3>

<p>Fit the map to a bounding box
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit_bounds(map, bbox, animate = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fit_bounds_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function or a proxy object.</p>
</td></tr>
<tr><td><code id="fit_bounds_+3A_bbox">bbox</code></td>
<td>
<p>A bounding box specified as a numeric vector of length 4 (minLng, minLat, maxLng, maxLat), or an sf object from which a bounding box will be calculated.</p>
</td></tr>
<tr><td><code id="fit_bounds_+3A_animate">animate</code></td>
<td>
<p>A logical value indicating whether to animate the transition to the new bounds. Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="fit_bounds_+3A_...">...</code></td>
<td>
<p>Additional named arguments for fitting the bounds.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated map object.
</p>

<hr>
<h2 id='fly_to'>Fly to a given view</h2><span id='topic+fly_to'></span>

<h3>Description</h3>

<p>Fly to a given view
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fly_to(map, center, zoom = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fly_to_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function or a proxy object.</p>
</td></tr>
<tr><td><code id="fly_to_+3A_center">center</code></td>
<td>
<p>A numeric vector of length 2 specifying the target center of the map (longitude, latitude).</p>
</td></tr>
<tr><td><code id="fly_to_+3A_zoom">zoom</code></td>
<td>
<p>The target zoom level.</p>
</td></tr>
<tr><td><code id="fly_to_+3A_...">...</code></td>
<td>
<p>Additional named arguments for flying to the view.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated map object.
</p>

<hr>
<h2 id='get_column'>Get column or property for use in mapping</h2><span id='topic+get_column'></span>

<h3>Description</h3>

<p>This function returns a an expression to get a specified column from a dataset (or a property from a layer).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_column(column)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_column_+3A_column">column</code></td>
<td>
<p>The name of the column or property to get.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list representing the expression to get the column.
</p>

<hr>
<h2 id='get_drawn_features'>Get drawn features from the map</h2><span id='topic+get_drawn_features'></span>

<h3>Description</h3>

<p>Get drawn features from the map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_drawn_features(map)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_drawn_features_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> function, or a mapboxgl proxy.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An sf object containing the drawn features.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# In a Shiny application
library(shiny)
library(mapgl)

ui &lt;- fluidPage(
    mapboxglOutput("map"),
    actionButton("get_features", "Get Drawn Features"),
    verbatimTextOutput("feature_output")
)

server &lt;- function(input, output, session) {
    output$map &lt;- renderMapboxgl({
        mapboxgl(
            style = mapbox_style("streets"),
            center = c(-74.50, 40),
            zoom = 9
        ) |&gt;
            add_draw_control()
    })

    observeEvent(input$get_features, {
        drawn_features &lt;- get_drawn_features(mapboxgl_proxy("map"))
        output$feature_output &lt;- renderPrint({
            print(drawn_features)
        })
    })
}

shinyApp(ui, server)

## End(Not run)
</code></pre>

<hr>
<h2 id='interpolate'>Create an interpolation expression</h2><span id='topic+interpolate'></span>

<h3>Description</h3>

<p>This function generates an interpolation expression that can be used to style your data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>interpolate(
  column = NULL,
  property = NULL,
  type = "linear",
  values,
  stops,
  na_color = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="interpolate_+3A_column">column</code></td>
<td>
<p>The name of the column to use for the interpolation. If specified, <code>property</code> should be NULL.</p>
</td></tr>
<tr><td><code id="interpolate_+3A_property">property</code></td>
<td>
<p>The name of the property to use for the interpolation. If specified, <code>column</code> should be NULL.</p>
</td></tr>
<tr><td><code id="interpolate_+3A_type">type</code></td>
<td>
<p>The interpolation type. Can be one of <code>"linear"</code>, <code>list("exponential", base)</code> where <code>base</code> specifies the rate at which the output increases, or <code>list("cubic-bezier", x1, y1, x2, y2)</code> where you define a cubic bezier curve with control points.</p>
</td></tr>
<tr><td><code id="interpolate_+3A_values">values</code></td>
<td>
<p>A numeric vector of values at which stops occur.</p>
</td></tr>
<tr><td><code id="interpolate_+3A_stops">stops</code></td>
<td>
<p>A vector of corresponding stops (colors, sizes, etc.) for the interpolation.</p>
</td></tr>
<tr><td><code id="interpolate_+3A_na_color">na_color</code></td>
<td>
<p>The color to use for missing values.  Mapbox GL JS defaults to black if this is not supplied.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list representing the interpolation expression.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>interpolate(
    column = "estimate",
    type = "linear",
    values = c(1000, 200000),
    stops = c("#eff3ff", "#08519c")
)
</code></pre>

<hr>
<h2 id='jump_to'>Jump to a given view</h2><span id='topic+jump_to'></span>

<h3>Description</h3>

<p>Jump to a given view
</p>


<h3>Usage</h3>

<pre><code class='language-R'>jump_to(map, center, zoom = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="jump_to_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function or a proxy object.</p>
</td></tr>
<tr><td><code id="jump_to_+3A_center">center</code></td>
<td>
<p>A numeric vector of length 2 specifying the target center of the map (longitude, latitude).</p>
</td></tr>
<tr><td><code id="jump_to_+3A_zoom">zoom</code></td>
<td>
<p>The target zoom level.</p>
</td></tr>
<tr><td><code id="jump_to_+3A_...">...</code></td>
<td>
<p>Additional named arguments for jumping to the view.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated map object.
</p>

<hr>
<h2 id='mapbox_style'>Get Mapbox Style URL</h2><span id='topic+mapbox_style'></span>

<h3>Description</h3>

<p>Get Mapbox Style URL
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mapbox_style(style_name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mapbox_style_+3A_style_name">style_name</code></td>
<td>
<p>The name of the style (e.g., &quot;standard&quot;, &quot;streets&quot;, &quot;outdoors&quot;, etc.).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The style URL corresponding to the given style name.
</p>

<hr>
<h2 id='mapboxgl'>Initialize a Mapbox GL Map</h2><span id='topic+mapboxgl'></span>

<h3>Description</h3>

<p>Initialize a Mapbox GL Map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mapboxgl(
  style = NULL,
  center = c(0, 0),
  zoom = 0,
  bearing = 0,
  pitch = 0,
  projection = "globe",
  parallels = NULL,
  access_token = NULL,
  bounds = NULL,
  width = "100%",
  height = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mapboxgl_+3A_style">style</code></td>
<td>
<p>The Mapbox style to use.</p>
</td></tr>
<tr><td><code id="mapboxgl_+3A_center">center</code></td>
<td>
<p>A numeric vector of length 2 specifying the initial center of the map.</p>
</td></tr>
<tr><td><code id="mapboxgl_+3A_zoom">zoom</code></td>
<td>
<p>The initial zoom level of the map.</p>
</td></tr>
<tr><td><code id="mapboxgl_+3A_bearing">bearing</code></td>
<td>
<p>The initial bearing (rotation) of the map, in degrees.</p>
</td></tr>
<tr><td><code id="mapboxgl_+3A_pitch">pitch</code></td>
<td>
<p>The initial pitch (tilt) of the map, in degrees.</p>
</td></tr>
<tr><td><code id="mapboxgl_+3A_projection">projection</code></td>
<td>
<p>The map projection to use (e.g., &quot;mercator&quot;, &quot;globe&quot;).</p>
</td></tr>
<tr><td><code id="mapboxgl_+3A_parallels">parallels</code></td>
<td>
<p>A vector of two numbers representing the standard parellels of the projection.  Only available when the projection is &quot;albers&quot; or &quot;lambertConformalConic&quot;.</p>
</td></tr>
<tr><td><code id="mapboxgl_+3A_access_token">access_token</code></td>
<td>
<p>Your Mapbox access token.</p>
</td></tr>
<tr><td><code id="mapboxgl_+3A_bounds">bounds</code></td>
<td>
<p>An sf object or bounding box to fit the map to.</p>
</td></tr>
<tr><td><code id="mapboxgl_+3A_width">width</code></td>
<td>
<p>The width of the output htmlwidget.</p>
</td></tr>
<tr><td><code id="mapboxgl_+3A_height">height</code></td>
<td>
<p>The height of the output htmlwidget.</p>
</td></tr>
<tr><td><code id="mapboxgl_+3A_...">...</code></td>
<td>
<p>Additional named parameters to be passed to the Mapbox GL map.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An HTML widget for a Mapbox map.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
mapboxgl(projection = "globe")

## End(Not run)
</code></pre>

<hr>
<h2 id='mapboxgl_compare_proxy'>Create a proxy object for a Mapbox GL Compare widget in Shiny</h2><span id='topic+mapboxgl_compare_proxy'></span>

<h3>Description</h3>

<p>This function allows updates to be sent to an existing Mapbox GL Compare widget in a Shiny application.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mapboxgl_compare_proxy(
  compareId,
  session = shiny::getDefaultReactiveDomain(),
  map_side = "before"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mapboxgl_compare_proxy_+3A_compareid">compareId</code></td>
<td>
<p>The ID of the compare output element.</p>
</td></tr>
<tr><td><code id="mapboxgl_compare_proxy_+3A_session">session</code></td>
<td>
<p>The Shiny session object.</p>
</td></tr>
<tr><td><code id="mapboxgl_compare_proxy_+3A_map_side">map_side</code></td>
<td>
<p>Which map side to target in the compare widget, either &quot;before&quot; or &quot;after&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A proxy object for the Mapbox GL Compare widget.
</p>

<hr>
<h2 id='mapboxgl_proxy'>Create a proxy object for a Mapbox GL map in Shiny</h2><span id='topic+mapboxgl_proxy'></span>

<h3>Description</h3>

<p>This function allows updates to be sent to an existing Mapbox GL map in a Shiny application without redrawing the entire map.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mapboxgl_proxy(mapId, session = shiny::getDefaultReactiveDomain())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mapboxgl_proxy_+3A_mapid">mapId</code></td>
<td>
<p>The ID of the map output element.</p>
</td></tr>
<tr><td><code id="mapboxgl_proxy_+3A_session">session</code></td>
<td>
<p>The Shiny session object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A proxy object for the Mapbox GL map.
</p>

<hr>
<h2 id='mapboxglCompareOutput'>Create a Mapbox GL Compare output element for Shiny</h2><span id='topic+mapboxglCompareOutput'></span>

<h3>Description</h3>

<p>Create a Mapbox GL Compare output element for Shiny
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mapboxglCompareOutput(outputId, width = "100%", height = "400px")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mapboxglCompareOutput_+3A_outputid">outputId</code></td>
<td>
<p>The output variable to read from</p>
</td></tr>
<tr><td><code id="mapboxglCompareOutput_+3A_width">width</code></td>
<td>
<p>The width of the element</p>
</td></tr>
<tr><td><code id="mapboxglCompareOutput_+3A_height">height</code></td>
<td>
<p>The height of the element</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Mapbox GL Compare output element for use in a Shiny UI
</p>

<hr>
<h2 id='mapboxglOutput'>Create a Mapbox GL output element for Shiny</h2><span id='topic+mapboxglOutput'></span>

<h3>Description</h3>

<p>Create a Mapbox GL output element for Shiny
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mapboxglOutput(outputId, width = "100%", height = "400px")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mapboxglOutput_+3A_outputid">outputId</code></td>
<td>
<p>The output variable to read from</p>
</td></tr>
<tr><td><code id="mapboxglOutput_+3A_width">width</code></td>
<td>
<p>The width of the element</p>
</td></tr>
<tr><td><code id="mapboxglOutput_+3A_height">height</code></td>
<td>
<p>The height of the element</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Mapbox GL output element for use in a Shiny UI
</p>

<hr>
<h2 id='maplibre'>Initialize a Maplibre GL Map</h2><span id='topic+maplibre'></span>

<h3>Description</h3>

<p>Initialize a Maplibre GL Map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maplibre(
  style = carto_style("voyager"),
  center = c(0, 0),
  zoom = 0,
  bearing = 0,
  pitch = 0,
  bounds = NULL,
  width = "100%",
  height = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="maplibre_+3A_style">style</code></td>
<td>
<p>The style JSON to use.</p>
</td></tr>
<tr><td><code id="maplibre_+3A_center">center</code></td>
<td>
<p>A numeric vector of length 2 specifying the initial center of the map.</p>
</td></tr>
<tr><td><code id="maplibre_+3A_zoom">zoom</code></td>
<td>
<p>The initial zoom level of the map.</p>
</td></tr>
<tr><td><code id="maplibre_+3A_bearing">bearing</code></td>
<td>
<p>The initial bearing (rotation) of the map, in degrees.</p>
</td></tr>
<tr><td><code id="maplibre_+3A_pitch">pitch</code></td>
<td>
<p>The initial pitch (tilt) of the map, in degrees.</p>
</td></tr>
<tr><td><code id="maplibre_+3A_bounds">bounds</code></td>
<td>
<p>An sf object or bounding box to fit the map to.</p>
</td></tr>
<tr><td><code id="maplibre_+3A_width">width</code></td>
<td>
<p>The width of the output htmlwidget.</p>
</td></tr>
<tr><td><code id="maplibre_+3A_height">height</code></td>
<td>
<p>The height of the output htmlwidget.</p>
</td></tr>
<tr><td><code id="maplibre_+3A_...">...</code></td>
<td>
<p>Additional named parameters to be passed to the Mapbox GL map.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An HTML widget for a Mapbox map.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
maplibre()

## End(Not run)
</code></pre>

<hr>
<h2 id='maplibre_compare_proxy'>Create a proxy object for a Maplibre GL Compare widget in Shiny</h2><span id='topic+maplibre_compare_proxy'></span>

<h3>Description</h3>

<p>This function allows updates to be sent to an existing Maplibre GL Compare widget in a Shiny application.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maplibre_compare_proxy(
  compareId,
  session = shiny::getDefaultReactiveDomain(),
  map_side = "before"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="maplibre_compare_proxy_+3A_compareid">compareId</code></td>
<td>
<p>The ID of the compare output element.</p>
</td></tr>
<tr><td><code id="maplibre_compare_proxy_+3A_session">session</code></td>
<td>
<p>The Shiny session object.</p>
</td></tr>
<tr><td><code id="maplibre_compare_proxy_+3A_map_side">map_side</code></td>
<td>
<p>Which map side to target in the compare widget, either &quot;before&quot; or &quot;after&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A proxy object for the Maplibre GL Compare widget.
</p>

<hr>
<h2 id='maplibre_proxy'>Create a proxy object for a Maplibre GL map in Shiny</h2><span id='topic+maplibre_proxy'></span>

<h3>Description</h3>

<p>This function allows updates to be sent to an existing Maplibre GL map in a Shiny application without redrawing the entire map.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maplibre_proxy(mapId, session = shiny::getDefaultReactiveDomain())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="maplibre_proxy_+3A_mapid">mapId</code></td>
<td>
<p>The ID of the map output element.</p>
</td></tr>
<tr><td><code id="maplibre_proxy_+3A_session">session</code></td>
<td>
<p>The Shiny session object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A proxy object for the Maplibre GL map.
</p>

<hr>
<h2 id='maplibreCompareOutput'>Create a Maplibre GL Compare output element for Shiny</h2><span id='topic+maplibreCompareOutput'></span>

<h3>Description</h3>

<p>Create a Maplibre GL Compare output element for Shiny
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maplibreCompareOutput(outputId, width = "100%", height = "400px")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="maplibreCompareOutput_+3A_outputid">outputId</code></td>
<td>
<p>The output variable to read from</p>
</td></tr>
<tr><td><code id="maplibreCompareOutput_+3A_width">width</code></td>
<td>
<p>The width of the element</p>
</td></tr>
<tr><td><code id="maplibreCompareOutput_+3A_height">height</code></td>
<td>
<p>The height of the element</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Maplibre GL Compare output element for use in a Shiny UI
</p>

<hr>
<h2 id='maplibreOutput'>Create a Maplibre GL output element for Shiny</h2><span id='topic+maplibreOutput'></span>

<h3>Description</h3>

<p>Create a Maplibre GL output element for Shiny
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maplibreOutput(outputId, width = "100%", height = "400px")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="maplibreOutput_+3A_outputid">outputId</code></td>
<td>
<p>The output variable to read from</p>
</td></tr>
<tr><td><code id="maplibreOutput_+3A_width">width</code></td>
<td>
<p>The width of the element</p>
</td></tr>
<tr><td><code id="maplibreOutput_+3A_height">height</code></td>
<td>
<p>The height of the element</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Maplibre GL output element for use in a Shiny UI
</p>

<hr>
<h2 id='maptiler_style'>Get MapTiler Style URL</h2><span id='topic+maptiler_style'></span>

<h3>Description</h3>

<p>Get MapTiler Style URL
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maptiler_style(style_name, api_key = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="maptiler_style_+3A_style_name">style_name</code></td>
<td>
<p>The name of the style (e.g., &quot;basic&quot;, &quot;streets&quot;, &quot;toner&quot;, etc.).</p>
</td></tr>
<tr><td><code id="maptiler_style_+3A_api_key">api_key</code></td>
<td>
<p>Your MapTiler API key (required)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The style URL corresponding to the given style name.
</p>

<hr>
<h2 id='match_expr'>Create a match expression</h2><span id='topic+match_expr'></span>

<h3>Description</h3>

<p>This function generates a match expression that can be used to style your data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>match_expr(column = NULL, property = NULL, values, stops, default = "#cccccc")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="match_expr_+3A_column">column</code></td>
<td>
<p>The name of the column to use for the match expression. If specified, <code>property</code> should be NULL.</p>
</td></tr>
<tr><td><code id="match_expr_+3A_property">property</code></td>
<td>
<p>The name of the property to use for the match expression. If specified, <code>column</code> should be NULL.</p>
</td></tr>
<tr><td><code id="match_expr_+3A_values">values</code></td>
<td>
<p>A vector of values to match against.</p>
</td></tr>
<tr><td><code id="match_expr_+3A_stops">stops</code></td>
<td>
<p>A vector of corresponding stops (colors, etc.) for the matched values.</p>
</td></tr>
<tr><td><code id="match_expr_+3A_default">default</code></td>
<td>
<p>A default value to use if no matches are found.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list representing the match expression.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>match_expr(
    column = "category",
    values = c("A", "B", "C"),
    stops = c("#ff0000", "#00ff00", "#0000ff"),
    default = "#cccccc"
)
</code></pre>

<hr>
<h2 id='move_layer'>Move a layer to a different z-position</h2><span id='topic+move_layer'></span>

<h3>Description</h3>

<p>This function allows a layer to be moved to a different z-position in an existing Mapbox GL or Maplibre GL map using a proxy object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>move_layer(proxy, layer_id, before_id = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="move_layer_+3A_proxy">proxy</code></td>
<td>
<p>A proxy object created by <code>mapboxgl_proxy</code> or <code>maplibre_proxy</code>.</p>
</td></tr>
<tr><td><code id="move_layer_+3A_layer_id">layer_id</code></td>
<td>
<p>The ID of the layer to move.</p>
</td></tr>
<tr><td><code id="move_layer_+3A_before_id">before_id</code></td>
<td>
<p>The ID of an existing layer to insert the new layer before. <strong>Important</strong>: this means that the layer will appear <em>immediately behind</em> the layer defined in <code>before_id</code>. If omitted, the layer will be appended to the end of the layers array and appear above all other layers.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated proxy object.
</p>

<hr>
<h2 id='on_section'>Observe events on story map section transitions</h2><span id='topic+on_section'></span>

<h3>Description</h3>

<p>For a given <code>story_section()</code>, you may want to trigger an event when the section becomes visible.
This function wraps <code>shiny::observeEvent()</code> to allow you to modify the state of your map or
invoke other Shiny actions on user scroll.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>on_section(map_id, section_id, handler)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="on_section_+3A_map_id">map_id</code></td>
<td>
<p>The ID of your map output</p>
</td></tr>
<tr><td><code id="on_section_+3A_section_id">section_id</code></td>
<td>
<p>The ID of the section to trigger on, defined in <code>story_section()</code></p>
</td></tr>
<tr><td><code id="on_section_+3A_handler">handler</code></td>
<td>
<p>Expression to execute when section becomes visible.</p>
</td></tr>
</table>

<hr>
<h2 id='renderMapboxgl'>Render a Mapbox GL output element in Shiny</h2><span id='topic+renderMapboxgl'></span>

<h3>Description</h3>

<p>Render a Mapbox GL output element in Shiny
</p>


<h3>Usage</h3>

<pre><code class='language-R'>renderMapboxgl(expr, env = parent.frame(), quoted = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="renderMapboxgl_+3A_expr">expr</code></td>
<td>
<p>An expression that generates a Mapbox GL map</p>
</td></tr>
<tr><td><code id="renderMapboxgl_+3A_env">env</code></td>
<td>
<p>The environment in which to evaluate <code>expr</code></p>
</td></tr>
<tr><td><code id="renderMapboxgl_+3A_quoted">quoted</code></td>
<td>
<p>Is <code>expr</code> a quoted expression</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A rendered Mapbox GL map for use in a Shiny server
</p>

<hr>
<h2 id='renderMapboxglCompare'>Render a Mapbox GL Compare output element in Shiny</h2><span id='topic+renderMapboxglCompare'></span>

<h3>Description</h3>

<p>Render a Mapbox GL Compare output element in Shiny
</p>


<h3>Usage</h3>

<pre><code class='language-R'>renderMapboxglCompare(expr, env = parent.frame(), quoted = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="renderMapboxglCompare_+3A_expr">expr</code></td>
<td>
<p>An expression that generates a Mapbox GL Compare map</p>
</td></tr>
<tr><td><code id="renderMapboxglCompare_+3A_env">env</code></td>
<td>
<p>The environment in which to evaluate <code>expr</code></p>
</td></tr>
<tr><td><code id="renderMapboxglCompare_+3A_quoted">quoted</code></td>
<td>
<p>Is <code>expr</code> a quoted expression</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A rendered Mapbox GL Compare map for use in a Shiny server
</p>

<hr>
<h2 id='renderMaplibre'>Render a Maplibre GL output element in Shiny</h2><span id='topic+renderMaplibre'></span>

<h3>Description</h3>

<p>Render a Maplibre GL output element in Shiny
</p>


<h3>Usage</h3>

<pre><code class='language-R'>renderMaplibre(expr, env = parent.frame(), quoted = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="renderMaplibre_+3A_expr">expr</code></td>
<td>
<p>An expression that generates a Maplibre GL map</p>
</td></tr>
<tr><td><code id="renderMaplibre_+3A_env">env</code></td>
<td>
<p>The environment in which to evaluate <code>expr</code></p>
</td></tr>
<tr><td><code id="renderMaplibre_+3A_quoted">quoted</code></td>
<td>
<p>Is <code>expr</code> a quoted expression</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A rendered Maplibre GL map for use in a Shiny server
</p>

<hr>
<h2 id='renderMaplibreCompare'>Render a Maplibre GL Compare output element in Shiny</h2><span id='topic+renderMaplibreCompare'></span>

<h3>Description</h3>

<p>Render a Maplibre GL Compare output element in Shiny
</p>


<h3>Usage</h3>

<pre><code class='language-R'>renderMaplibreCompare(expr, env = parent.frame(), quoted = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="renderMaplibreCompare_+3A_expr">expr</code></td>
<td>
<p>An expression that generates a Maplibre GL Compare map</p>
</td></tr>
<tr><td><code id="renderMaplibreCompare_+3A_env">env</code></td>
<td>
<p>The environment in which to evaluate <code>expr</code></p>
</td></tr>
<tr><td><code id="renderMaplibreCompare_+3A_quoted">quoted</code></td>
<td>
<p>Is <code>expr</code> a quoted expression</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A rendered Maplibre GL Compare map for use in a Shiny server
</p>

<hr>
<h2 id='set_config_property'>Set a configuration property for a Mapbox GL map</h2><span id='topic+set_config_property'></span>

<h3>Description</h3>

<p>Set a configuration property for a Mapbox GL map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_config_property(map, import_id, config_name, value)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_config_property_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> function or a proxy object defined with <code>mapboxgl_proxy()</code>.</p>
</td></tr>
<tr><td><code id="set_config_property_+3A_import_id">import_id</code></td>
<td>
<p>The name of the imported style to set the config for (e.g., 'basemap').</p>
</td></tr>
<tr><td><code id="set_config_property_+3A_config_name">config_name</code></td>
<td>
<p>The name of the configuration property from the style.</p>
</td></tr>
<tr><td><code id="set_config_property_+3A_value">value</code></td>
<td>
<p>The value to set for the configuration property.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated map object with the configuration property set.
</p>

<hr>
<h2 id='set_filter'>Set a filter on a map layer</h2><span id='topic+set_filter'></span>

<h3>Description</h3>

<p>This function sets a filter on a map layer, working with both regular map objects and proxy objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_filter(map, layer_id, filter)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_filter_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function, or a proxy object.</p>
</td></tr>
<tr><td><code id="set_filter_+3A_layer_id">layer_id</code></td>
<td>
<p>The ID of the layer to which the filter will be applied.</p>
</td></tr>
<tr><td><code id="set_filter_+3A_filter">filter</code></td>
<td>
<p>The filter expression to apply.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated map object.
</p>

<hr>
<h2 id='set_fog'>Set fog on a Mapbox GL map</h2><span id='topic+set_fog'></span>

<h3>Description</h3>

<p>Set fog on a Mapbox GL map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_fog(
  map,
  range = NULL,
  color = NULL,
  horizon_blend = NULL,
  high_color = NULL,
  space_color = NULL,
  star_intensity = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_fog_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> function or a proxy object.</p>
</td></tr>
<tr><td><code id="set_fog_+3A_range">range</code></td>
<td>
<p>A numeric vector of length 2 defining the minimum and maximum range of the fog.</p>
</td></tr>
<tr><td><code id="set_fog_+3A_color">color</code></td>
<td>
<p>A string specifying the color of the fog.</p>
</td></tr>
<tr><td><code id="set_fog_+3A_horizon_blend">horizon_blend</code></td>
<td>
<p>A number between 0 and 1 controlling the blending of the fog at the horizon.</p>
</td></tr>
<tr><td><code id="set_fog_+3A_high_color">high_color</code></td>
<td>
<p>A string specifying the color of the fog at higher elevations.</p>
</td></tr>
<tr><td><code id="set_fog_+3A_space_color">space_color</code></td>
<td>
<p>A string specifying the color of the fog in space.</p>
</td></tr>
<tr><td><code id="set_fog_+3A_star_intensity">star_intensity</code></td>
<td>
<p>A number between 0 and 1 controlling the intensity of the stars in the fog.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated map object.
</p>

<hr>
<h2 id='set_layout_property'>Set a layout property on a map layer</h2><span id='topic+set_layout_property'></span>

<h3>Description</h3>

<p>Set a layout property on a map layer
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_layout_property(map, layer, name, value)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_layout_property_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function, or a proxy object.</p>
</td></tr>
<tr><td><code id="set_layout_property_+3A_layer">layer</code></td>
<td>
<p>The ID of the layer to update.</p>
</td></tr>
<tr><td><code id="set_layout_property_+3A_name">name</code></td>
<td>
<p>The name of the layout property to set.</p>
</td></tr>
<tr><td><code id="set_layout_property_+3A_value">value</code></td>
<td>
<p>The value to set the property to.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated map object.
</p>

<hr>
<h2 id='set_paint_property'>Set a paint property on a map layer</h2><span id='topic+set_paint_property'></span>

<h3>Description</h3>

<p>Set a paint property on a map layer
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_paint_property(map, layer, name, value)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_paint_property_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function, or a proxy object.</p>
</td></tr>
<tr><td><code id="set_paint_property_+3A_layer">layer</code></td>
<td>
<p>The ID of the layer to update.</p>
</td></tr>
<tr><td><code id="set_paint_property_+3A_name">name</code></td>
<td>
<p>The name of the paint property to set.</p>
</td></tr>
<tr><td><code id="set_paint_property_+3A_value">value</code></td>
<td>
<p>The value to set the property to.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated map object.
</p>

<hr>
<h2 id='set_projection'>Set Projection for a Mapbox/Maplibre Map</h2><span id='topic+set_projection'></span>

<h3>Description</h3>

<p>This function sets the projection dynamically after map initialization.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_projection(map, projection)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_projection_+3A_map">map</code></td>
<td>
<p>A map object created by mapboxgl() or maplibre() functions, or their respective proxy objects</p>
</td></tr>
<tr><td><code id="set_projection_+3A_projection">projection</code></td>
<td>
<p>A string representing the projection name (e.g., &quot;mercator&quot;, &quot;globe&quot;, &quot;albers&quot;, &quot;equalEarth&quot;, etc.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object
</p>

<hr>
<h2 id='set_source'>Set source of a map layer</h2><span id='topic+set_source'></span>

<h3>Description</h3>

<p>Set source of a map layer
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_source(map, layer, source)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_source_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function, or a proxy object.</p>
</td></tr>
<tr><td><code id="set_source_+3A_layer">layer</code></td>
<td>
<p>The ID of the layer to update.</p>
</td></tr>
<tr><td><code id="set_source_+3A_source">source</code></td>
<td>
<p>An sf object (which will be converted to a GeoJSON source).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated map object.
</p>

<hr>
<h2 id='set_style'>Update the style of a map</h2><span id='topic+set_style'></span>

<h3>Description</h3>

<p>Update the style of a map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_style(map, style, config = NULL, diff = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_style_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function, or a proxy object.</p>
</td></tr>
<tr><td><code id="set_style_+3A_style">style</code></td>
<td>
<p>The new style URL to be applied to the map.</p>
</td></tr>
<tr><td><code id="set_style_+3A_config">config</code></td>
<td>
<p>A named list of options to be passed to the style config.</p>
</td></tr>
<tr><td><code id="set_style_+3A_diff">diff</code></td>
<td>
<p>A boolean that attempts a diff-based update rather than re-drawing the full style. Not available for all styles.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
map &lt;- mapboxgl(
    style = mapbox_style("streets"),
    center = c(-74.006, 40.7128),
    zoom = 10,
    access_token = "your_mapbox_access_token"
)

# Update the map style in a Shiny app
observeEvent(input$change_style, {
    mapboxgl_proxy("map", session) %&gt;%
        set_style(mapbox_style("dark"), config = list(showLabels = FALSE), diff = TRUE)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='set_terrain'>Set terrain properties on a map</h2><span id='topic+set_terrain'></span>

<h3>Description</h3>

<p>Set terrain properties on a map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_terrain(map, source, exaggeration = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_terrain_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> functions.</p>
</td></tr>
<tr><td><code id="set_terrain_+3A_source">source</code></td>
<td>
<p>The ID of the raster DEM source.</p>
</td></tr>
<tr><td><code id="set_terrain_+3A_exaggeration">exaggeration</code></td>
<td>
<p>The terrain exaggeration factor.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified map object with the terrain settings applied.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapgl)

mapboxgl(
  style = mapbox_style("standard-satellite"),
  center = c(-114.26608, 32.7213),
  zoom = 14,
  pitch = 80,
  bearing = 41
) |&gt;
  add_raster_dem_source(
    id = "mapbox-dem",
    url = "mapbox://mapbox.mapbox-terrain-dem-v1",
    tileSize = 512,
    maxzoom = 14
  ) |&gt;
  set_terrain(
    source = "mapbox-dem",
    exaggeration = 1.5
  )

## End(Not run)
</code></pre>

<hr>
<h2 id='set_tooltip'>Set tooltip on a map layer</h2><span id='topic+set_tooltip'></span>

<h3>Description</h3>

<p>Set tooltip on a map layer
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_tooltip(map, layer, tooltip)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_tooltip_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function, or a proxy object.</p>
</td></tr>
<tr><td><code id="set_tooltip_+3A_layer">layer</code></td>
<td>
<p>The ID of the layer to update.</p>
</td></tr>
<tr><td><code id="set_tooltip_+3A_tooltip">tooltip</code></td>
<td>
<p>The name of the tooltip to set.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated map object.
</p>

<hr>
<h2 id='set_view'>Set the map center and zoom level</h2><span id='topic+set_view'></span>

<h3>Description</h3>

<p>Set the map center and zoom level
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_view(map, center, zoom)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_view_+3A_map">map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> function or a proxy object.</p>
</td></tr>
<tr><td><code id="set_view_+3A_center">center</code></td>
<td>
<p>A numeric vector of length 2 specifying the center of the map (longitude, latitude).</p>
</td></tr>
<tr><td><code id="set_view_+3A_zoom">zoom</code></td>
<td>
<p>The zoom level.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated map object.
</p>

<hr>
<h2 id='step_expr'>Create a step expression</h2><span id='topic+step_expr'></span>

<h3>Description</h3>

<p>This function generates a step expression that can be used in your styles.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>step_expr(column = NULL, property = NULL, base, values, stops, na_color = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="step_expr_+3A_column">column</code></td>
<td>
<p>The name of the column to use for the step expression. If specified, <code>property</code> should be NULL.</p>
</td></tr>
<tr><td><code id="step_expr_+3A_property">property</code></td>
<td>
<p>The name of the property to use for the step expression. If specified, <code>column</code> should be NULL.</p>
</td></tr>
<tr><td><code id="step_expr_+3A_base">base</code></td>
<td>
<p>The base value to use for the step expression.</p>
</td></tr>
<tr><td><code id="step_expr_+3A_values">values</code></td>
<td>
<p>A numeric vector of values at which steps occur.</p>
</td></tr>
<tr><td><code id="step_expr_+3A_stops">stops</code></td>
<td>
<p>A vector of corresponding stops (colors, sizes, etc.) for the steps.</p>
</td></tr>
<tr><td><code id="step_expr_+3A_na_color">na_color</code></td>
<td>
<p>The color to use for missing values.  Mapbox GL JS defaults to black if this is not supplied.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list representing the step expression.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>step_expr(
    column = "value",
    base = "#ffffff",
    values = c(1000, 5000, 10000),
    stops = c("#ff0000", "#00ff00", "#0000ff")
)
</code></pre>

<hr>
<h2 id='story_leaflet'>Create a scrollytelling story map with Leaflet</h2><span id='topic+story_leaflet'></span>

<h3>Description</h3>

<p>Create a scrollytelling story map with Leaflet
</p>


<h3>Usage</h3>

<pre><code class='language-R'>story_leaflet(
  map_id,
  sections,
  root_margin = "-20% 0px -20% 0px",
  threshold = 0,
  styles = NULL,
  bg_color = "rgba(255,255,255,0.9)",
  text_color = "#34495e",
  font_family = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="story_leaflet_+3A_map_id">map_id</code></td>
<td>
<p>The ID of your mapboxgl, maplibre, or leaflet output
defined in the server, e.g. <code>"map"</code></p>
</td></tr>
<tr><td><code id="story_leaflet_+3A_sections">sections</code></td>
<td>
<p>A named list of story_section objects.
Names will correspond to map events defined within
the server using <code>on_section()</code>.</p>
</td></tr>
<tr><td><code id="story_leaflet_+3A_root_margin">root_margin</code></td>
<td>
<p>The margin around the viewport for triggering sections by
the intersection observer. Should be specified as a string,
e.g. <code>"-20% 0px -20% 0px"</code>.</p>
</td></tr>
<tr><td><code id="story_leaflet_+3A_threshold">threshold</code></td>
<td>
<p>A number that indicates the visibility ratio for a story
'       panel to be used to trigger a section; should be a number between
0 and 1. Defaults to 0, meaning that the section is triggered as soon
as the first pixel is visible.</p>
</td></tr>
<tr><td><code id="story_leaflet_+3A_styles">styles</code></td>
<td>
<p>Optional custom CSS styles. Should be specified as a
character string within <code>shiny::tags$style()</code>.</p>
</td></tr>
<tr><td><code id="story_leaflet_+3A_bg_color">bg_color</code></td>
<td>
<p>Default background color for all sections</p>
</td></tr>
<tr><td><code id="story_leaflet_+3A_text_color">text_color</code></td>
<td>
<p>Default text color for all sections</p>
</td></tr>
<tr><td><code id="story_leaflet_+3A_font_family">font_family</code></td>
<td>
<p>Default font family for all sections</p>
</td></tr>
</table>

<hr>
<h2 id='story_map'>Create a scrollytelling story map</h2><span id='topic+story_map'></span>

<h3>Description</h3>

<p>Create a scrollytelling story map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>story_map(
  map_id,
  sections,
  map_type = c("mapboxgl", "maplibre", "leaflet"),
  root_margin = "-20% 0px -20% 0px",
  threshold = 0,
  styles = NULL,
  bg_color = "rgba(255,255,255,0.9)",
  text_color = "#34495e",
  font_family = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="story_map_+3A_map_id">map_id</code></td>
<td>
<p>The ID of your mapboxgl, maplibre, or leaflet output
defined in the server, e.g. <code>"map"</code></p>
</td></tr>
<tr><td><code id="story_map_+3A_sections">sections</code></td>
<td>
<p>A named list of story_section objects.
Names will correspond to map events defined within
the server using <code>on_section()</code>.</p>
</td></tr>
<tr><td><code id="story_map_+3A_map_type">map_type</code></td>
<td>
<p>One of <code>"mapboxgl"</code>, <code>"maplibre"</code>, or <code>"leaflet"</code>.
This will use either <code>mapboxglOutput()</code>, <code>maplibreOutput()</code>,
or <code>leafletOutput()</code> respectively, and must
correspond to the appropriate <code style="white-space: pre;">&#8288;render*()&#8288;</code> function used in the server.</p>
</td></tr>
<tr><td><code id="story_map_+3A_root_margin">root_margin</code></td>
<td>
<p>The margin around the viewport for triggering sections by
the intersection observer. Should be specified as a string,
e.g. <code>"-20% 0px -20% 0px"</code>.</p>
</td></tr>
<tr><td><code id="story_map_+3A_threshold">threshold</code></td>
<td>
<p>A number that indicates the visibility ratio for a story
'       panel to be used to trigger a section; should be a number between
0 and 1. Defaults to 0, meaning that the section is triggered as soon
as the first pixel is visible.</p>
</td></tr>
<tr><td><code id="story_map_+3A_styles">styles</code></td>
<td>
<p>Optional custom CSS styles. Should be specified as a
character string within <code>shiny::tags$style()</code>.</p>
</td></tr>
<tr><td><code id="story_map_+3A_bg_color">bg_color</code></td>
<td>
<p>Default background color for all sections</p>
</td></tr>
<tr><td><code id="story_map_+3A_text_color">text_color</code></td>
<td>
<p>Default text color for all sections</p>
</td></tr>
<tr><td><code id="story_map_+3A_font_family">font_family</code></td>
<td>
<p>Default font family for all sections</p>
</td></tr>
</table>

<hr>
<h2 id='story_maplibre'>Create a scrollytelling story map with MapLibre</h2><span id='topic+story_maplibre'></span>

<h3>Description</h3>

<p>Create a scrollytelling story map with MapLibre
</p>


<h3>Usage</h3>

<pre><code class='language-R'>story_maplibre(
  map_id,
  sections,
  root_margin = "-20% 0px -20% 0px",
  threshold = 0,
  styles = NULL,
  bg_color = "rgba(255,255,255,0.9)",
  text_color = "#34495e",
  font_family = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="story_maplibre_+3A_map_id">map_id</code></td>
<td>
<p>The ID of your mapboxgl, maplibre, or leaflet output
defined in the server, e.g. <code>"map"</code></p>
</td></tr>
<tr><td><code id="story_maplibre_+3A_sections">sections</code></td>
<td>
<p>A named list of story_section objects.
Names will correspond to map events defined within
the server using <code>on_section()</code>.</p>
</td></tr>
<tr><td><code id="story_maplibre_+3A_root_margin">root_margin</code></td>
<td>
<p>The margin around the viewport for triggering sections by
the intersection observer. Should be specified as a string,
e.g. <code>"-20% 0px -20% 0px"</code>.</p>
</td></tr>
<tr><td><code id="story_maplibre_+3A_threshold">threshold</code></td>
<td>
<p>A number that indicates the visibility ratio for a story
'       panel to be used to trigger a section; should be a number between
0 and 1. Defaults to 0, meaning that the section is triggered as soon
as the first pixel is visible.</p>
</td></tr>
<tr><td><code id="story_maplibre_+3A_styles">styles</code></td>
<td>
<p>Optional custom CSS styles. Should be specified as a
character string within <code>shiny::tags$style()</code>.</p>
</td></tr>
<tr><td><code id="story_maplibre_+3A_bg_color">bg_color</code></td>
<td>
<p>Default background color for all sections</p>
</td></tr>
<tr><td><code id="story_maplibre_+3A_text_color">text_color</code></td>
<td>
<p>Default text color for all sections</p>
</td></tr>
<tr><td><code id="story_maplibre_+3A_font_family">font_family</code></td>
<td>
<p>Default font family for all sections</p>
</td></tr>
</table>

<hr>
<h2 id='story_section'>Create a story section for story maps</h2><span id='topic+story_section'></span>

<h3>Description</h3>

<p>Create a story section for story maps
</p>


<h3>Usage</h3>

<pre><code class='language-R'>story_section(
  title,
  content,
  position = c("left", "center", "right"),
  width = 400,
  bg_color = NULL,
  text_color = NULL,
  font_family = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="story_section_+3A_title">title</code></td>
<td>
<p>Section title</p>
</td></tr>
<tr><td><code id="story_section_+3A_content">content</code></td>
<td>
<p>Section content - can be text, HTML, or Shiny outputs</p>
</td></tr>
<tr><td><code id="story_section_+3A_position">position</code></td>
<td>
<p>Position of text block (&quot;left&quot;, &quot;center&quot;, &quot;right&quot;)</p>
</td></tr>
<tr><td><code id="story_section_+3A_width">width</code></td>
<td>
<p>Width of text block in pixels (default: 400)</p>
</td></tr>
<tr><td><code id="story_section_+3A_bg_color">bg_color</code></td>
<td>
<p>Background color (with alpha) for text block</p>
</td></tr>
<tr><td><code id="story_section_+3A_text_color">text_color</code></td>
<td>
<p>Text color</p>
</td></tr>
<tr><td><code id="story_section_+3A_font_family">font_family</code></td>
<td>
<p>Font family for the section</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
