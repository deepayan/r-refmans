<!DOCTYPE html><html lang="en"><head><title>Help for package transportr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {transportr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#transportr-package'><p>transportr: Transporting Intervention Effects from One Population to Another</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#transport_ate'><p>Transported Average Treatment Effect</p></a></li>
<li><a href='#transport_control'><p>Set Estimation Parameters</p></a></li>
<li><a href='#transport_ittate'><p>Transported Intent-to-Treat Average Treatment Effect</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Transporting Intervention Effects from One Population to Another</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Doubly-robust, non-parametric estimators for the transported average treatment effect from 
  Rudolph, Williams, Stuart, and Diaz (2023) &lt;<a href="https://doi.org/10.48550%2FarXiv.2304.00117">doi:10.48550/arXiv.2304.00117</a>&gt; and the 
  intent-to-treatment average treatment effect from Rudolph and van der Laan (2017)
  &lt;<a href="https://doi.org/10.1111%2Frssb.12213">doi:10.1111/rssb.12213</a>&gt;. Estimators are fit using cross-fitting and nuisance parameters are 
  estimated using the Super Learner algorithm.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, cli, generics, ife, mlr3superlearner, origami, R6</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/nt-williams/transportr">https://github.com/nt-williams/transportr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/nt-williams/transportr/issues">https://github.com/nt-williams/transportr/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>ranger, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-19 17:43:26 UTC; nicholaswilliams</td>
</tr>
<tr>
<td>Author:</td>
<td>Nicholas Williams <a href="https://orcid.org/0000-0002-1378-4831"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Kara Rudolph <a href="https://orcid.org/0000-0002-9417-7960"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Nicholas Williams &lt;ntwilliams.personal@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-20 18:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='transportr-package'>transportr: Transporting Intervention Effects from One Population to Another</h2><span id='topic+transportr'></span><span id='topic+transportr-package'></span>

<h3>Description</h3>

<p>Doubly-robust, non-parametric estimators for the transported average treatment effect from Rudolph, Williams, Stuart, and Diaz (2023) <a href="https://doi.org/10.48550/arXiv.2304.00117">doi:10.48550/arXiv.2304.00117</a> and the intent-to-treatment average treatment effect from Rudolph and van der Laan (2017) <a href="https://doi.org/10.1111/rssb.12213">doi:10.1111/rssb.12213</a>. Estimators are fit using cross-fitting and nuisance parameters are estimated using the Super Learner algorithm.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Nicholas Williams <a href="mailto:ntwilliams.personal@gmail.com">ntwilliams.personal@gmail.com</a> (<a href="https://orcid.org/0000-0002-1378-4831">ORCID</a>) [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Kara Rudolph <a href="mailto:kr2854@cumc.columbia.edu">kr2854@cumc.columbia.edu</a> (<a href="https://orcid.org/0000-0002-9417-7960">ORCID</a>) [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/nt-williams/transportr">https://github.com/nt-williams/transportr</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/nt-williams/transportr/issues">https://github.com/nt-williams/transportr/issues</a>
</p>
</li></ul>


<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+tidy'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>generics</dt><dd><p><code><a href="generics.html#topic+tidy">tidy</a></code></p>
</dd>
</dl>

<hr>
<h2 id='transport_ate'>Transported Average Treatment Effect</h2><span id='topic+transport_ate'></span>

<h3>Description</h3>

<p>Implements two one-step estimators for the transported average treatment effect for a binary or continuous outcome.
Nuisance parameters are estimated using the Super Learner algorithm.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transport_ate(
  data,
  trt,
  outcome,
  covar,
  pop,
  obs = NULL,
  id = NULL,
  weights = NULL,
  estimator = c("standard", "collaborative"),
  learners_trt = "glm",
  learners_pop = "glm",
  learners_outcome = "glm",
  learners_heterogeneity = "glm",
  folds = 1,
  control = transport_control()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="transport_ate_+3A_data">data</code></td>
<td>
<p>[<code>data.frame</code>]<br />
A <code>data.frame</code> in containing all necessary variables for the estimation problem.</p>
</td></tr>
<tr><td><code id="transport_ate_+3A_trt">trt</code></td>
<td>
<p>[<code>character(1)</code>]
The column name of the treatment variable. This variable must be binary (0/1).</p>
</td></tr>
<tr><td><code id="transport_ate_+3A_outcome">outcome</code></td>
<td>
<p>[<code>character(1)</code>]<br />
The column name of the outcome variable. This variable must be binary (0/1) or numeric.</p>
</td></tr>
<tr><td><code id="transport_ate_+3A_covar">covar</code></td>
<td>
<p>[<code>character</code>]<br />
An optional vector containing the column names of covariates to be
included for adjustment.</p>
</td></tr>
<tr><td><code id="transport_ate_+3A_pop">pop</code></td>
<td>
<p>[<code>character(1)</code>]<br />
The column name of the population indicator variable.
This variable must be binary (0/1) with 0 indicating the target population and 1 the source population.</p>
</td></tr>
<tr><td><code id="transport_ate_+3A_obs">obs</code></td>
<td>
<p>[<code>character(1)</code>]<br />
An optional column name for a censoring indicator the same. If missingness in the outcome is
present, must be provided. This variable must be binary (0/1) with 1 indicating that the outcome is observed.</p>
</td></tr>
<tr><td><code id="transport_ate_+3A_id">id</code></td>
<td>
<p>[<code>character(1)</code>]<br />
An optional column name containing cluster level identifiers.</p>
</td></tr>
<tr><td><code id="transport_ate_+3A_weights">weights</code></td>
<td>
<p>[<code>character(1)</code>]<br />
An optional column name containing sampling weights. Currently not used.</p>
</td></tr>
<tr><td><code id="transport_ate_+3A_estimator">estimator</code></td>
<td>
<p>[<code>character(1)</code>]<br />
The estimator to use. See details for more information.</p>
</td></tr>
<tr><td><code id="transport_ate_+3A_learners_trt">learners_trt</code></td>
<td>
<p>[<code>character</code>]<br />
A vector of <code>mlr3superlearner</code> algorithms for estimation of the propensity score.</p>
</td></tr>
<tr><td><code id="transport_ate_+3A_learners_pop">learners_pop</code></td>
<td>
<p>[<code>character</code>]<br />
A vector of <code>mlr3superlearner</code> algorithms for estimation of the population mechanism.</p>
</td></tr>
<tr><td><code id="transport_ate_+3A_learners_outcome">learners_outcome</code></td>
<td>
<p>[<code>character</code>]<br />
A vector of <code>mlr3superlearner</code> algorithms for estimation of the outcome regression.</p>
</td></tr>
<tr><td><code id="transport_ate_+3A_learners_heterogeneity">learners_heterogeneity</code></td>
<td>
<p>[<code>character</code>]<br />
A vector of <code>mlr3superlearner</code> algorithms for estimation of collaborative nuisance parameters.
Ignored when <code>estimator = "standard"</code>.</p>
</td></tr>
<tr><td><code id="transport_ate_+3A_folds">folds</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
The number of folds to be used for cross-fitting.</p>
</td></tr>
<tr><td><code id="transport_ate_+3A_control">control</code></td>
<td>
<p>[<code>list()</code>]<br />
Output of <code>transport_control()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Estimators</h4>

<p>The &quot;collaborative&quot; estimator uses covariate dimension reduction and does not require users to have knowledge about which covariates
are effect modifiers and which differ in distribution between the populations. The &quot;standard&quot;
estimator assumes all covariates are effect modifiers and differ in distribution between the populations.
</p>



<h3>Value</h3>

<p>An object of class <code>transported_ate</code> containing the parameter estimate.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gendata &lt;- function(n, A = NULL) {
  W &lt;- rbinom(n, 1, 0.5)
  V &lt;- rbinom(n, 1, 0.66)
  Z &lt;- rbinom(n, 1, 0.33)

  if (is.null(A)) A &lt;- rbinom(n, 1, 0.5)

  S &lt;- rbinom(n, 1, 0.4 + 0.5*W - 0.3*Z)

  Yi &lt;- rnorm(n, A + W + A*V + 2.5*A*Z, sqrt((0.1 + 0.8*W)^2))
  Y &lt;- ifelse(S == 1, Yi, NA_real_)

  data.frame(W = W,
             V = V,
             Z = Z,
             S = S,
             A = A,
             Y = Y,
             Yi = Yi)
}

set.seed(123)
n &lt;- 250

tmp &lt;- gendata(n)

transport_ate(data = tmp,
              trt = "A",
              outcome = "Y",
              covar = c("W", "V", "Z"),
              pop = "S",
              estimator = "standard",
              folds = 1)

transport_ate(data = tmp,
              trt = "A",
              outcome = "Y",
              covar = c("W", "V", "Z"),
              pop = "S",
              estimator = "collaborative",
              folds = 1)
</code></pre>

<hr>
<h2 id='transport_control'>Set Estimation Parameters</h2><span id='topic+transport_control'></span>

<h3>Description</h3>

<p>Defines default parameters for estimators in the 'transport' package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transport_control(
  .learners_folds = NULL,
  .bound = 1e+05,
  .return_full_fits = FALSE,
  .discrete = FALSE,
  .info = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="transport_control_+3A_.learners_folds">.learners_folds</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
The number of cross-validation folds for fitting nuisance parameters.</p>
</td></tr>
<tr><td><code id="transport_control_+3A_.bound">.bound</code></td>
<td>
<p>[<code>numeric(1)</code>]<br />
Determines that maximum and minimum values binomial predictions
will be bounded by. The default is 1e-5, bounding predictions by 1e-5 and 0.9999.</p>
</td></tr>
<tr><td><code id="transport_control_+3A_.return_full_fits">.return_full_fits</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Return full 'mlr3superlearner' fits? Default is <code>FALSE</code>, return only 'mlr3superlearner' weights.</p>
</td></tr>
<tr><td><code id="transport_control_+3A_.discrete">.discrete</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Use discrete or ensemble super learner? Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="transport_control_+3A_.info">.info</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Print super learner fitting info to the console? Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with parameter values.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>transport_control(.learners_folds = 10)
</code></pre>

<hr>
<h2 id='transport_ittate'>Transported Intent-to-Treat Average Treatment Effect</h2><span id='topic+transport_ittate'></span>

<h3>Description</h3>

<p>Implements a TMLE for the transported intent-to-treat average treatment effect.
Nuisance parameters are estimated using the Super Learner algorithm.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transport_ittate(
  data,
  instrument,
  trt,
  outcome,
  covar,
  pop,
  obs = NULL,
  id = NULL,
  weights = NULL,
  learners_instrument = "glm",
  learners_trt = "glm",
  learners_pop = "glm",
  learners_outcome = "glm",
  folds = 1,
  control = transport_control()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="transport_ittate_+3A_data">data</code></td>
<td>
<p>[<code>data.frame</code>]<br />
A <code>data.frame</code> in containing all necessary variables for the estimation problem.</p>
</td></tr>
<tr><td><code id="transport_ittate_+3A_instrument">instrument</code></td>
<td>
<p>[<code>character(1)</code>]
The column name of the randomization variable. This variable must be binary (0/1).</p>
</td></tr>
<tr><td><code id="transport_ittate_+3A_trt">trt</code></td>
<td>
<p>[<code>character(1)</code>]
The column name of the treatment variable. This variable must be binary (0/1).</p>
</td></tr>
<tr><td><code id="transport_ittate_+3A_outcome">outcome</code></td>
<td>
<p>[<code>character(1)</code>]<br />
The column name of the outcome variable. This variable must be binary (0/1) or numeric.</p>
</td></tr>
<tr><td><code id="transport_ittate_+3A_covar">covar</code></td>
<td>
<p>[<code>character</code>]<br />
An optional vector containing the column names of covariates to be
included for adjustment.</p>
</td></tr>
<tr><td><code id="transport_ittate_+3A_pop">pop</code></td>
<td>
<p>[<code>character(1)</code>]<br />
The column name of the population indicator variable.
This variable must be binary (0/1) with 0 indicating the target population and 1 the source population.</p>
</td></tr>
<tr><td><code id="transport_ittate_+3A_obs">obs</code></td>
<td>
<p>[<code>character(1)</code>]<br />
An optional column name for a censoring indicator the same. If missingness in the outcome is
present, must be provided. This variable must be binary (0/1) with 1 indicating that the outcome is observed.</p>
</td></tr>
<tr><td><code id="transport_ittate_+3A_id">id</code></td>
<td>
<p>[<code>character(1)</code>]<br />
An optional column name containing cluster level identifiers.</p>
</td></tr>
<tr><td><code id="transport_ittate_+3A_weights">weights</code></td>
<td>
<p>[<code>character(1)</code>]<br />
An optional column name containing sampling weights. Currently not used.</p>
</td></tr>
<tr><td><code id="transport_ittate_+3A_learners_instrument">learners_instrument</code></td>
<td>
<p>[<code>character</code>]<br />
A vector of <code>mlr3superlearner</code> algorithms for estimation of the propensity score of the instrument.</p>
</td></tr>
<tr><td><code id="transport_ittate_+3A_learners_trt">learners_trt</code></td>
<td>
<p>[<code>character</code>]<br />
A vector of <code>mlr3superlearner</code> algorithms for estimation of the propensity score of the treatment.</p>
</td></tr>
<tr><td><code id="transport_ittate_+3A_learners_pop">learners_pop</code></td>
<td>
<p>[<code>character</code>]<br />
A vector of <code>mlr3superlearner</code> algorithms for estimation of the population mechanism.</p>
</td></tr>
<tr><td><code id="transport_ittate_+3A_learners_outcome">learners_outcome</code></td>
<td>
<p>[<code>character</code>]<br />
A vector of <code>mlr3superlearner</code> algorithms for estimation of the outcome regression.</p>
</td></tr>
<tr><td><code id="transport_ittate_+3A_folds">folds</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
The number of folds to be used for cross-fitting.</p>
</td></tr>
<tr><td><code id="transport_ittate_+3A_control">control</code></td>
<td>
<p>[<code>list()</code>]<br />
Output of <code>transport_control()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>transported_ittate</code> containing the parameter estimate.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gendata &lt;- function(n, A = NULL, S = NULL) {
  if (is.null(S)) S &lt;- rbinom(n, 1, 0.5)
  W1 &lt;- rbinom(n, 1, 0.4 + (0.2 * S))
  W2 &lt;- rnorm(n, 0.1 * S, 1)
  W3 &lt;- rnorm(n, 1 + (0.2 * S), 1)
  if (is.null(A)) A &lt;- rbinom(n, 1, 0.5)
  Z &lt;- rbinom(n, 1, plogis(-log(1.6) + log(4)*A - log(1.1)*W2 - log(1.3)*W3))
  Yi &lt;- rbinom(n, 1, plogis(log(1.6) + log(1.9)*Z - log(1.3)*W3 - log(1.2)*W1 + log(1.2)*W1*Z))
  Y &lt;- ifelse(S == 1, Yi, NA_real_)

  data.frame(W1 = W1, W2 = W2, W3 = W3,
             S = S,
             A = A,
             Z = Z,
             Y = Y,
             Yi = Yi)
}

set.seed(123)
n &lt;- 1000

tmp &lt;- gendata(n)

if (requireNamespace("ranger", quietly = TRUE)) {
  transport_ittate(data = tmp,
                   trt = "Z",
                   instrument = "A",
                   outcome = "Y",
                   covar = c("W1", "W2", "W3"),
                   pop = "S",
                   folds = 1)
}
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
