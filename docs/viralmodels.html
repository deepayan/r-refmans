<!DOCTYPE html><html lang="en"><head><title>Help for package viralmodels</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {viralmodels}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#viralmodels-package'><p>viralmodels: Viral Load and CD4 Lymphocytes Regression Models</p></a></li>
<li><a href='#viralmodel'><p>Select best model</p></a></li>
<li><a href='#viralpreds'><p>Predict Viral Load or CD4 Count using Many Models</p></a></li>
<li><a href='#viraltab'><p>Competing models table</p></a></li>
<li><a href='#viralvis'><p>Competing models plot</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Viral Load and CD4 Lymphocytes Regression Models</td>
</tr>
<tr>
<td>Version:</td>
<td>1.3.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a comprehensive framework for building, evaluating, and visualizing regression models for analyzing viral load and CD4 (Cluster of Differentiation 4) lymphocytes data. It leverages the principles of the tidymodels ecosystem of Max Kuhn and Hadley Wickham (2020) <a href="https://www.tidymodels.org">https://www.tidymodels.org</a> to offer a user-friendly experience in model development. This package includes functions for data preprocessing, feature engineering, model training, tuning, and evaluation, along with visualization tools to enhance the interpretation of model results. It is specifically designed for researchers in biostatistics, computational biology, and HIV research who aim to perform reproducible and rigorous analyses to gain insights into disease dynamics. The main focus is on improving the understanding of the relationships between viral load, CD4 lymphocytes, and other relevant covariates to contribute to HIV research and the visibility of vulnerable seropositive populations.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>baguette, Cubist, earth, glmnet, kernlab, kknn, ranger,
rules, testthat (&ge; 3.0.0), tidyverse, vdiffr, viraldomain</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Imports:</td>
<td>dials, dplyr, hardhat, parsnip, purrr, recipes, rsample,
stats, tidyselect, tune, workflows, workflowsets</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/juanv66x/viralmodels">https://github.com/juanv66x/viralmodels</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/juanv66x/viralmodels/issues">https://github.com/juanv66x/viralmodels/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-19 14:06:15 UTC; jp</td>
</tr>
<tr>
<td>Author:</td>
<td>Juan Pablo Acuña González
    <a href="https://orcid.org/0009-0003-6029-6560"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Juan Pablo Acuña González &lt;acua6307@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-19 14:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='viralmodels-package'>viralmodels: Viral Load and CD4 Lymphocytes Regression Models</h2><span id='topic+viralmodels'></span><span id='topic+viralmodels-package'></span>

<h3>Description</h3>

<p>Provides a comprehensive framework for building, evaluating, and visualizing regression models for analyzing viral load and CD4 (Cluster of Differentiation 4) lymphocytes data. It leverages the principles of the tidymodels ecosystem of Max Kuhn and Hadley Wickham (2020) <a href="https://www.tidymodels.org">https://www.tidymodels.org</a> to offer a user-friendly experience in model development. This package includes functions for data preprocessing, feature engineering, model training, tuning, and evaluation, along with visualization tools to enhance the interpretation of model results. It is specifically designed for researchers in biostatistics, computational biology, and HIV research who aim to perform reproducible and rigorous analyses to gain insights into disease dynamics. The main focus is on improving the understanding of the relationships between viral load, CD4 lymphocytes, and other relevant covariates to contribute to HIV research and the visibility of vulnerable seropositive populations.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Juan Pablo Acuña González <a href="mailto:acua6307@gmail.com">acua6307@gmail.com</a> (<a href="https://orcid.org/0009-0003-6029-6560">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/juanv66x/viralmodels">https://github.com/juanv66x/viralmodels</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/juanv66x/viralmodels/issues">https://github.com/juanv66x/viralmodels/issues</a>
</p>
</li></ul>


<hr>
<h2 id='viralmodel'>Select best model</h2><span id='topic+viralmodel'></span>

<h3>Description</h3>

<p>Returns performance metrics for a selected model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>viralmodel(
  traindata,
  semilla,
  target,
  viralvars,
  logbase,
  pliegues,
  repeticiones,
  rejilla,
  modelo
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="viralmodel_+3A_traindata">traindata</code></td>
<td>
<p>A data frame</p>
</td></tr>
<tr><td><code id="viralmodel_+3A_semilla">semilla</code></td>
<td>
<p>A numeric value</p>
</td></tr>
<tr><td><code id="viralmodel_+3A_target">target</code></td>
<td>
<p>A character value</p>
</td></tr>
<tr><td><code id="viralmodel_+3A_viralvars">viralvars</code></td>
<td>
<p>Vector of variable names related to viral data.</p>
</td></tr>
<tr><td><code id="viralmodel_+3A_logbase">logbase</code></td>
<td>
<p>The base for logarithmic transformations.</p>
</td></tr>
<tr><td><code id="viralmodel_+3A_pliegues">pliegues</code></td>
<td>
<p>A numeric value</p>
</td></tr>
<tr><td><code id="viralmodel_+3A_repeticiones">repeticiones</code></td>
<td>
<p>A numeric value</p>
</td></tr>
<tr><td><code id="viralmodel_+3A_rejilla">rejilla</code></td>
<td>
<p>A numeric value</p>
</td></tr>
<tr><td><code id="viralmodel_+3A_modelo">modelo</code></td>
<td>
<p>A character value</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table with a single model hyperparameters
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(tidyverse)
library(baguette)
library(kernlab)
library(kknn)
library(ranger)
library(rules)
library(glmnet)
# Define the function to impute values in the undetectable range
set.seed(123)
impute_undetectable &lt;- function(column) {
ifelse(column &lt;= 40,
      rexp(sum(column &lt;= 40), rate = 1/13) + 1,
            column)
            }
# Apply the function to all vl columns using purrr's map_dfc
library(viraldomain)
data("viral", package = "viraldomain")
viral_imputed &lt;- viral %&gt;%
mutate(across(starts_with("vl"), ~impute_undetectable(.x)))
traindata &lt;- viral_imputed
semilla &lt;- 1501
target &lt;- "cd_2022"
viralvars &lt;- c("vl_2019", "vl_2021", "vl_2022")
logbase &lt;- 10
pliegues &lt;- 2
repeticiones &lt;- 1
rejilla &lt;- 1
modelo &lt;- "simple_rf"
set.seed(123)
viralmodel(traindata, semilla, target, viralvars, logbase, pliegues, repeticiones, rejilla, modelo)

</code></pre>

<hr>
<h2 id='viralpreds'>Predict Viral Load or CD4 Count using Many Models</h2><span id='topic+viralpreds'></span>

<h3>Description</h3>

<p>This function predicts viral load or CD4 count values based on multiple machine learning models using cross-validation.
It allows users to specify two types of predictions: normal predictions on the full dataset or observation-by-observation
(obs-by-obs) predictions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>viralpreds(
  target,
  pliegues,
  repeticiones,
  rejilla,
  semilla,
  data,
  prediction_type = "full"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="viralpreds_+3A_target">target</code></td>
<td>
<p>A character string specifying the column name of the target variable to predict.</p>
</td></tr>
<tr><td><code id="viralpreds_+3A_pliegues">pliegues</code></td>
<td>
<p>An integer specifying the number of folds for cross-validation.</p>
</td></tr>
<tr><td><code id="viralpreds_+3A_repeticiones">repeticiones</code></td>
<td>
<p>An integer specifying the number of times the cross-validation should be repeated.</p>
</td></tr>
<tr><td><code id="viralpreds_+3A_rejilla">rejilla</code></td>
<td>
<p>An integer specifying the number of grid search iterations for tuning hyperparameters.</p>
</td></tr>
<tr><td><code id="viralpreds_+3A_semilla">semilla</code></td>
<td>
<p>An integer specifying the seed for random number generation to ensure reproducibility.</p>
</td></tr>
<tr><td><code id="viralpreds_+3A_data">data</code></td>
<td>
<p>A data frame containing the predictors and the target variable.</p>
</td></tr>
<tr><td><code id="viralpreds_+3A_prediction_type">prediction_type</code></td>
<td>
<p>A character string specifying the type of predictions to perform.
Use <code>"full"</code> (default) to perform predictions on the full dataset at once, or <code>"batch"</code> to perform predictions in a smaller
size batches of data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing two elements: <code>predictions</code> (a vector of predicted values for the target variable)
and <code>RMSE</code> (the root mean square error of the best model).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(tidyverse)
library(baguette)
library(kernlab)
library(kknn)
library(ranger)
library(rules)
library(glmnet)
# Define the function to impute values in the undetectable range
set.seed(123)
impute_undetectable &lt;- function(column) {
ifelse(column &lt;= 40,
      rexp(sum(column &lt;= 40), rate = 1/13) + 1,
            column)
            }
# Apply the function to all vl columns using purrr's map_dfc
library(viraldomain)
data("viral", package = "viraldomain")
viral_imputed &lt;- viral %&gt;%
mutate(across(starts_with("vl"), ~impute_undetectable(.x)))
traindata &lt;- viral_imputed
target &lt;- "cd_2022"
viralvars &lt;- c("vl_2019", "vl_2021", "vl_2022")
logbase &lt;- 10
pliegues &lt;- 5
repeticiones &lt;- 2
rejilla &lt;- 2
semilla &lt;- 123
viralpreds(target, pliegues, repeticiones, rejilla, semilla, traindata)

</code></pre>

<hr>
<h2 id='viraltab'>Competing models table</h2><span id='topic+viraltab'></span>

<h3>Description</h3>

<p>Trains and optimizes a series of regression models for viral load or CD4
counts
</p>


<h3>Usage</h3>

<pre><code class='language-R'>viraltab(
  traindata,
  semilla,
  target,
  viralvars,
  logbase,
  pliegues,
  repeticiones,
  rejilla,
  rank_output = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="viraltab_+3A_traindata">traindata</code></td>
<td>
<p>A data frame</p>
</td></tr>
<tr><td><code id="viraltab_+3A_semilla">semilla</code></td>
<td>
<p>A numeric value</p>
</td></tr>
<tr><td><code id="viraltab_+3A_target">target</code></td>
<td>
<p>A character value</p>
</td></tr>
<tr><td><code id="viraltab_+3A_viralvars">viralvars</code></td>
<td>
<p>Vector of variable names related to viral data.</p>
</td></tr>
<tr><td><code id="viraltab_+3A_logbase">logbase</code></td>
<td>
<p>The base for logarithmic transformations.</p>
</td></tr>
<tr><td><code id="viraltab_+3A_pliegues">pliegues</code></td>
<td>
<p>A numeric value</p>
</td></tr>
<tr><td><code id="viraltab_+3A_repeticiones">repeticiones</code></td>
<td>
<p>A numeric value</p>
</td></tr>
<tr><td><code id="viraltab_+3A_rejilla">rejilla</code></td>
<td>
<p>A numeric value</p>
</td></tr>
<tr><td><code id="viraltab_+3A_rank_output">rank_output</code></td>
<td>
<p>Logical value. If TRUE, returns ranked output; if FALSE, returns unranked output.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table of competing models
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(tidyverse)
library(dplyr)
library(baguette)
library(kernlab)
library(kknn)
library(ranger)
library(rules)
library(glmnet)
# Define the function to impute values in the undetectable range
impute_undetectable &lt;- function(column) {
set.seed(123)
ifelse(column &lt;= 40,
      rexp(sum(column &lt;= 40), rate = 1/13) + 1,
            column)
            }
library(viraldomain)
data("viral", package = "viraldomain")
viral_imputed &lt;- viral %&gt;%
mutate(across(starts_with("vl"), ~impute_undetectable(.x)))
traindata &lt;- viral_imputed
semilla &lt;- 1501
target &lt;- "cd_2022"
viralvars &lt;- c("vl_2019", "vl_2021", "vl_2022")
logbase &lt;- 10
pliegues &lt;- 2
repeticiones &lt;- 1
rejilla &lt;- 1
set.seed(123)
viraltab(traindata, semilla, target, viralvars, logbase, pliegues, 
repeticiones, rejilla, rank_output = TRUE)

</code></pre>

<hr>
<h2 id='viralvis'>Competing models plot</h2><span id='topic+viralvis'></span>

<h3>Description</h3>

<p>Plots the rankings of a series of regression models for viral load or CD4
counts
</p>


<h3>Usage</h3>

<pre><code class='language-R'>viralvis(
  traindata,
  semilla,
  target,
  viralvars,
  logbase,
  pliegues,
  repeticiones,
  rejilla
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="viralvis_+3A_traindata">traindata</code></td>
<td>
<p>A data frame</p>
</td></tr>
<tr><td><code id="viralvis_+3A_semilla">semilla</code></td>
<td>
<p>A numeric value</p>
</td></tr>
<tr><td><code id="viralvis_+3A_target">target</code></td>
<td>
<p>A character value</p>
</td></tr>
<tr><td><code id="viralvis_+3A_viralvars">viralvars</code></td>
<td>
<p>Vector of variable names related to viral data.</p>
</td></tr>
<tr><td><code id="viralvis_+3A_logbase">logbase</code></td>
<td>
<p>The base for logarithmic transformations.</p>
</td></tr>
<tr><td><code id="viralvis_+3A_pliegues">pliegues</code></td>
<td>
<p>A numeric value</p>
</td></tr>
<tr><td><code id="viralvis_+3A_repeticiones">repeticiones</code></td>
<td>
<p>A numeric value</p>
</td></tr>
<tr><td><code id="viralvis_+3A_rejilla">rejilla</code></td>
<td>
<p>A numeric value</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot of ranking models
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(tidyverse)
library(baguette)
library(kernlab)
library(kknn)
library(ranger)
library(rules)
library(glmnet)
# Define the function to impute values in the undetectable range
set.seed(123)
impute_undetectable &lt;- function(column) {
ifelse(column &lt;= 40,
      rexp(sum(column &lt;= 40), rate = 1/13) + 1,
            column)
            }
# Apply the function to all vl columns using purrr's map_dfc
library(viraldomain)
data("viral", package = "viraldomain")
viral_imputed &lt;- viral %&gt;%
mutate(across(starts_with("vl"), ~impute_undetectable(.x)))
traindata &lt;- viral_imputed
semilla &lt;- 1501
target &lt;- "cd_2022"
viralvars &lt;- c("vl_2019", "vl_2021", "vl_2022")
logbase &lt;- 10
pliegues &lt;- 2
repeticiones &lt;- 1
rejilla &lt;- 1
set.seed(123)
viralvis(traindata, semilla, target, viralvars, logbase, pliegues, repeticiones, rejilla)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
