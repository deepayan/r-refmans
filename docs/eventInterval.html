<!DOCTYPE html><html><head><title>Help for package eventInterval</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {eventInterval}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#eventInterval-package'>
<p>Sequential event interval analysis</p></a></li>
<li><a href='#EIdist'><p>Plot the empirical and exponential distributions of values</p></a></li>
<li><a href='#EIglm'><p>Perform a GLM on times of events</p></a></li>
<li><a href='#EIplot'><p>Plot the intervals between times against the times</p></a></li>
<li><a href='#florida_hurr20'><p>Hurricanes affecting Florida, USA from 1900-1999</p></a></li>
<li><a href='#florida_temp20'><p>Average temperatures in Florida, USA from 1900-1999</p></a></li>
<li><a href='#get_intervals'><p>Calculate the intervals between events</p></a></li>
<li><a href='#rescale'><p>Scale numbers into a new range</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>1.3</td>
</tr>
<tr>
<td>Title:</td>
<td>Sequential Event Interval Analysis</td>
</tr>
<tr>
<td>Date:</td>
<td>2015-10-20</td>
</tr>
<tr>
<td>Author:</td>
<td>Jim Lemon &lt;drjimlemon@gmail.com&gt;,</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jim Lemon &lt;drjimlemon@gmail.com&gt;</td>
</tr>
<tr>
<td>Imports:</td>
<td>MASS, graphics, stats</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions for analysis of rate changes in sequential events.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2015-10-20 03:15:47 UTC; root</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2015-10-20 07:37:06</td>
</tr>
</table>
<hr>
<h2 id='eventInterval-package'>
Sequential event interval analysis
</h2><span id='topic+eventInterval-package'></span><span id='topic+eventInterval'></span>

<h3>Description</h3>

<p>Functions for analysis of rate changes in sequential events. Appropriate data
are the times of observation of well defined events, such as equipment
failures or deaths.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> eventInterval</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.0</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2013-05-28</td>
</tr>
<tr>
 <td style="text-align: left;">
Depends: </td><td style="text-align: left;"> MASS</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL (&gt;=2)</td>
</tr>
<tr>
 <td style="text-align: left;">
Packaged: </td><td style="text-align: left;"> 2013-05-28 11:12:16 UTC; root</td>
</tr>
<tr>
 <td style="text-align: left;">
Built: </td><td style="text-align: left;"> R 3.0.0; ; 2013-05-28 11:12:19 UTC; unix</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Index:
</p>
<pre>
EIglm		Perform a GLM with intervals as response variable
EIdensity	Plot the empirical and theoretical densities of intervals
EIplot		Plot the intervals against the occurrence of the events
rescale		scale numeric values into a new range
</pre>
<p>The basic model is of events that are independent and uniformly distributed
in time. This assumption underlies the use of the exponential distribution
in the generalized linear models produced by &lsquo;<span class="samp">&#8288;EIglm&#8288;</span>&rsquo;. In general, it is
expected that deviations from uniformly distributed intervals follow a 
function that is expressed in one or more of the predictors. A predictor that 
is included by default is the times of the occurrence of the events. This will 
reveal linear changes in the rate. Other predictors may test for non-linear or 
cyclic changes in rate.
</p>
<p>Event interval analysis can be a useful alternative to Poisson based analysis
when few events occur in the counting intervals. Its advantage in power to
detect changes in rate diminishes as the number of events increases.
</p>
<p>This type of analysis was known as event history analysis, but the phrase is
now usually applied to the analysis of the antecedents of events, whether
sequential or not.
</p>


<h3>Author(s)</h3>

<p>Jim Lemon &lt;jim@bitwrit.com.au&gt;,
Maintainer: Jim Lemon &lt;jim@bitwrit.com.au&gt;
</p>


<h3>References</h3>

<p>Maguire, B.A., Pearson, E.S. &amp; Wynn, A.H.A. (1952)
The time intervals between industrial accidents.
Biometrika, 39(1/2): 168-180.
</p>
<p>Whitworth, W.A. (1901) Choice and chance. (3rd ed.) Cambridge: 
Deighton Bell.
</p>
<p>Lemon, J. (2014) The analysis of event rates using intervals. 
The Quantitative Methods for Psychology, 10 (1), 68-76. 
</p>

<hr>
<h2 id='EIdist'>Plot the empirical and exponential distributions of values</h2><span id='topic+EIdist'></span>

<h3>Description</h3>

<p>Plot the empirical distribution of a set of values.</p>


<h3>Usage</h3>

<pre><code class='language-R'> EIdist(event_times,nbreaks=10,main="",xlab="",ylab="",
 xaxticks=NA,xaxlabs=NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="EIdist_+3A_event_times">event_times</code></td>
<td>
<p>A numeric vector of times of occurrence of events.</p>
</td></tr>
<tr><td><code id="EIdist_+3A_nbreaks">nbreaks</code></td>
<td>
<p>The number of breaks desired (but not always delivered).</p>
</td></tr>
<tr><td><code id="EIdist_+3A_main">main</code></td>
<td>
<p>Title for the plot.</p>
</td></tr>
<tr><td><code id="EIdist_+3A_xlab">xlab</code></td>
<td>
<p>X axis label for the plot.</p>
</td></tr>
<tr><td><code id="EIdist_+3A_ylab">ylab</code></td>
<td>
<p>Y axis label for the plot.</p>
</td></tr>
<tr><td><code id="EIdist_+3A_xaxticks">xaxticks</code></td>
<td>
<p>Optional X tick mark positions.</p>
</td></tr>
<tr><td><code id="EIdist_+3A_xaxlabs">xaxlabs</code></td>
<td>
<p>Optional X tick labels.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>&lsquo;<span class="samp">&#8288;EIdist&#8288;</span>&rsquo; calculates the intervals between the times passed in 
&lsquo;<span class="samp">&#8288;event_times&#8288;</span>&rsquo; and plots a histogram of their distribution. It adds
a smoothed line based on the &lsquo;<span class="samp">&#8288;mids&#8288;</span>&rsquo; and &lsquo;<span class="samp">&#8288;counts&#8288;</span>&rsquo;. It then
calls &lsquo;<span class="samp">&#8288;fitdistr&#8288;</span>&rsquo; from <span class="pkg">MASS</span> to get an estimated rate for a
model exponential distribution. A second line is added to the plot for
comparison with the smoothed empirical distribution.
</p>


<h3>Value</h3>

<p>nil</p>


<h3>Author(s)</h3>

<p>Jim Lemon</p>


<h3>Examples</h3>

<pre><code class='language-R'> ## Not run: 
  # won't pass check due to the call to fitdistr
  data(florida_hurr20)
  oldloc&lt;-Sys.setlocale("LC_TIME", "C")
  fh_dates&lt;-
   as.Date(paste(florida_hurr20$day,florida_hurr20$month,
   florida_hurr20$year,sep="-"),"%d-%B-%Y")
  fh_days&lt;-as.numeric(fh_dates)
  fh_ints&lt;-diff(fh_days)
  fh_counts&lt;-tabulate(florida_hurr20$year[-1]-1899,nbins=100)
  require(MASS)
  EIdist(fh_days,main="Empirical distribution of hurricanes",
   xlab="Intervals in days",ylab="Frequencies")
  Sys.setlocale("LC_TIME", oldloc)
 
## End(Not run)
</code></pre>

<hr>
<h2 id='EIglm'>Perform a GLM on times of events</h2><span id='topic+EIglm'></span>

<h3>Description</h3>

<p>Perform a GLM with the intervals between events as the response 
and the times of the events as a predictor.</p>


<h3>Usage</h3>

<pre><code class='language-R'> EIglm(event_times,event_vars=list(),formula=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="EIglm_+3A_event_times">event_times</code></td>
<td>
<p>A numeric vector of times of occurrence of events.</p>
</td></tr>
<tr><td><code id="EIglm_+3A_event_vars">event_vars</code></td>
<td>
<p>Optional predictors to include in the GLM.</p>
</td></tr>
<tr><td><code id="EIglm_+3A_formula">formula</code></td>
<td>
<p>A optional string that can be coerced to a valid formula.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>&lsquo;<span class="samp">&#8288;EIglm&#8288;</span>&rsquo; calculates the intervals between the times passed in 
&lsquo;<span class="samp">&#8288;event_times&#8288;</span>&rsquo; and calls &lsquo;<span class="samp">&#8288;glm&#8288;</span>&rsquo; with &lsquo;<span class="samp">&#8288;family="Gamma"&#8288;</span>&rsquo;.
If the times are not in increasing order, they will be sorted. If there are
any zero length intervals, the events that occur in the same time increment
are spread out over that time increment. 
</p>
<p>If more predictors are passed in &lsquo;<span class="samp">&#8288;event_vars&#8288;</span>&rsquo; these will be added to
the formula passed to &lsquo;<span class="samp">&#8288;glm&#8288;</span>&rsquo;. When passing predictors based on the events,
remember to discard the first value as the intervals are calculated between
events. This means that the interval is unknown for the first event.
</p>
<p>&lsquo;<span class="samp">&#8288;EIglm&#8288;</span>&rsquo; only tests the effects of the variables specified and does not
test interactions. If a more complex model is to be tested, the user must
directly call &lsquo;<span class="samp">&#8288;glm&#8288;</span>&rsquo; and compose a formula for the model (see the last 
example). Note that because there is no &lsquo;<span class="samp">&#8288;data&#8288;</span>&rsquo; argument in EIglm, 
each term in the model must be specified explicitly.
</p>


<h3>Value</h3>

<p>An object of class &lsquo;<span class="samp">&#8288;glm&#8288;</span>&rsquo;.</p>


<h3>Author(s)</h3>

<p>Jim Lemon</p>


<h3>References</h3>

<p>Blake, E.S., Rappaport, E.N. &amp; Landsea, C.W. (2007)
The deadliest, costliest, and most intense United States tropical
cyclones from 1851 to 2006 (and other frequently requested hurricane facts).
NOAA Technical Memorandum NWS TPC-5, Miami: National Weather Service.
</p>
<p>Florida Climate Center (2013)
Florida statewide averaged temperature data (in degrees Fahrenheit).
URL: http://climatecenter.fsu.edu/products-services/data/statewide-averages/temperature
accessed 28/5/2013
</p>


<h3>Examples</h3>

<pre><code class='language-R'> ## Not run: 
  # Florida hurricane analysis (20th century)
  data(florida_hurr20)
  oldloc&lt;-Sys.setlocale("LC_TIME", "C")
  fh_dates&lt;-
   as.Date(paste(florida_hurr20$day,florida_hurr20$month,
   florida_hurr20$year,sep="-"),"%d-%B-%Y")
  fh_days&lt;-as.numeric(fh_dates)
  fh_ints&lt;-diff(fh_days)
  fh_counts&lt;-tabulate(florida_hurr20$year[-1]-1899,nbins=100)
  # run a Poisson analysis on the counts
  print(summary(glm(fh_counts~I(1900:1999),family="poisson")))
  EIglm(fh_days)
  data(florida_temp20)
  plot(florida_temp20$year,florida_temp20$Annual,type="b",
    main="Average temperature in Florida",xlab="Year",ylab="degrees F")
  lines(supsmu(florida_temp20$year,florida_temp20$Annual),lwd=2)
  # define a function to match values
  findval&lt;-
   function(x,set) return(which(set %in% x))
  ftemp_years&lt;-florida_temp20$Annual[unlist(sapply(florida_hurr20$year,
   FUN=findval,florida_temp20$year))]
  EIglm(fh_days,list(ft=ftemp_years[-1]))
  Sys.setlocale("LC_TIME", oldloc)
 
## End(Not run)
 # manually performing an event interval GLM
 # get the Florida hurricane data
 data(florida_hurr20)
 # create date values for the events
 florida_hurr20$date&lt;-
  as.Date(paste(florida_hurr20$day,florida_hurr20$month,
  florida_hurr20$year,sep="-"),"%d-%B-%Y")
 # convert the dates to numeric values (offsets from 1/1/1970)
 florida_hurr20$days&lt;-as.numeric(florida_hurr20$date)
 # calculate the intervals, adding NA for the first unknown value
 florida_hurr20$ints&lt;-c(NA,diff(florida_hurr20$days))
 # first test the default model in EIglm, dropping the first event
 summary(glm(ints~days,florida_hurr20[-1,],family="Gamma"))
 # test a model predicting intervals with times of occurrence,
 # the intensities of the hurricanes and their interaction,
 # again dropping the first event
 summary(glm(ints~days*category,florida_hurr20[-1,],family="Gamma"))
</code></pre>

<hr>
<h2 id='EIplot'>Plot the intervals between times against the times</h2><span id='topic+EIplot'></span>

<h3>Description</h3>

<p>Plot the intervals between times against the times.</p>


<h3>Usage</h3>

<pre><code class='language-R'> EIplot(event_times,main="",xlab="",ylab="",xaxticks=NA,xaxlabs=NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="EIplot_+3A_event_times">event_times</code></td>
<td>
<p>A numeric vector of times of occurrence of events.</p>
</td></tr>
<tr><td><code id="EIplot_+3A_main">main</code></td>
<td>
<p>Title for the plot.</p>
</td></tr>
<tr><td><code id="EIplot_+3A_xlab">xlab</code></td>
<td>
<p>X axis label for the plot.</p>
</td></tr>
<tr><td><code id="EIplot_+3A_ylab">ylab</code></td>
<td>
<p>Y axis label for the plot.</p>
</td></tr>
<tr><td><code id="EIplot_+3A_xaxticks">xaxticks</code></td>
<td>
<p>Optional X tick mark positions.</p>
</td></tr>
<tr><td><code id="EIplot_+3A_xaxlabs">xaxlabs</code></td>
<td>
<p>Optional X tick labels.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>&lsquo;<span class="samp">&#8288;EIplot&#8288;</span>&rsquo; calculates the intervals between the times passed in 
&lsquo;<span class="samp">&#8288;event_times&#8288;</span>&rsquo; and plots a scattergram of intervals against times. 
It adds a smoothed line and a &quot;rug&quot; of the event times to allow visual
inspection for trend.
</p>


<h3>Value</h3>

<p>nil</p>


<h3>Author(s)</h3>

<p>Jim Lemon</p>


<h3>Examples</h3>

<pre><code class='language-R'> # Florida hurricane analysis (20th century)
 data(florida_hurr20)
 oldloc&lt;-Sys.setlocale("LC_TIME", "C")
 fh_dates&lt;-
  as.Date(paste(florida_hurr20$day,florida_hurr20$month,
  florida_hurr20$year,sep="-"),"%d-%B-%Y")
 fh_days&lt;-as.numeric(fh_dates)
 fh_ints&lt;-diff(fh_days)
 fh_counts&lt;-tabulate(florida_hurr20$year[-1]-1899,nbins=100)
 EIplot(fh_days,main="Florida hurricanes, 1900-1999",
  xlab="Year",ylab="Interval between hurricanes (days)",
  xaxticks=as.Date(as.character(seq(1900,2000,by=20)),"%Y"),
  xaxlabs=seq(1900,2000,by=20))
 Sys.setlocale("LC_TIME", oldloc)
</code></pre>

<hr>
<h2 id='florida_hurr20'>Hurricanes affecting Florida, USA from 1900-1999</h2><span id='topic+florida_hurr20'></span>

<h3>Description</h3>

<p>Atlantic hurricanes recorded as affecting Florida, USA during the 20th century.
</p>


<h3>Usage</h3>

<pre><code class='language-R'> data(florida_hurr20)
</code></pre>


<h3>Source</h3>

<p>Blake, E.S., Rappaport, E.N. &amp; Landsea, C.W. (2007)
The deadliest, costliest, and most intense United States tropical
cyclones from 1851 to 2006 (and other frequently requested hurricane facts).
NOAA Technical Memorandum NWS TPC-5, Miami: National Weather Service.
</p>

<hr>
<h2 id='florida_temp20'>Average temperatures in Florida, USA from 1900-1999</h2><span id='topic+florida_temp20'></span>

<h3>Description</h3>

<p>Average statewide temperatures in Florida, USA from 1900-1999.
</p>


<h3>Usage</h3>

<pre><code class='language-R'> data(florida_temp20)
</code></pre>


<h3>Source</h3>

<p>Florida Climate Center (2013)
Florida statewide averaged temperature data (in degrees Fahrenheit).
URL: http://climatecenter.fsu.edu/products-services/data/statewide-averages/temperature
accessed 28/5/2013
</p>

<hr>
<h2 id='get_intervals'>Calculate the intervals between events</h2><span id='topic+get_intervals'></span>

<h3>Description</h3>

<p>Calculate the intervals between a series of times, spreading
out equal times in one unit of time.</p>


<h3>Usage</h3>

<pre><code class='language-R'> get_intervals(event_times)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_intervals_+3A_event_times">event_times</code></td>
<td>
<p>A numeric vector of times of occurrence of events.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>&lsquo;<span class="samp">&#8288;get_intervals&#8288;</span>&rsquo; calculates the intervals between the times passed
in &lsquo;<span class="samp">&#8288;event_times&#8288;</span>&rsquo;, adding increments to spread out times that are exactly
the same. This can be a problem when the times are integers, as in days. The
spreading out of events avoids zero intervals. The rationale for this is that
even if more than event occurred on the same day, it is extremely unlikely 
that the events occurred at exactly the same time of day. The best estimate
of the times of day is a uniform distribution over one day.
</p>


<h3>Value</h3>

<p>a vector of intervals between the vector of times passed</p>


<h3>Author(s)</h3>

<p>Jim Lemon</p>


<h3>Examples</h3>

<pre><code class='language-R'> event_times&lt;-c(1,3,5,5,7,9,10,10,10,12)
 get_intervals(event_times)
</code></pre>

<hr>
<h2 id='rescale'>Scale numbers into a new range</h2><span id='topic+rescale'></span>

<h3>Description</h3>

<p>Scale a vector or matrix of numbers into a new range.</p>


<h3>Usage</h3>

<pre><code class='language-R'> rescale(x,newrange)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rescale_+3A_x">x</code></td>
<td>
<p>A numeric vector, matrix or data frame.</p>
</td></tr>
<tr><td><code id="rescale_+3A_newrange">newrange</code></td>
<td>
<p>The minimum and maximum value of the range into which
&lsquo;<span class="samp">&#8288;x&#8288;</span>&rsquo; will be scaled.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>&lsquo;<span class="samp">&#8288;rescale&#8288;</span>&rsquo; performs a simple linear conversion of &lsquo;<span class="samp">&#8288;x&#8288;</span>&rsquo; into the
range specified by &lsquo;<span class="samp">&#8288;newrange&#8288;</span>&rsquo;. Only numeric vectors, matrices or data
frames with some variation will be accepted. NAs are now preserved - 
formerly the function would fail.
</p>


<h3>Value</h3>

<p>On success, the rescaled object, otherwise the original object.</p>


<h3>Author(s)</h3>

<p>Jim Lemon</p>


<h3>Examples</h3>

<pre><code class='language-R'> # scale one vector into the range of another
 normal.counts&lt;-rnorm(100)
 normal.tab&lt;-tabulate(cut(normal.counts,breaks=seq(-3,3,by=1)))
 normal.density&lt;-rescale(dnorm(seq(-3,3,length=100)),range(normal.tab))
 # now plot them
 plot(c(-2.5,-1.5,-0.5,0.5,1.5,2.5),normal.tab,xlab="X values",
  type="h",col="green")
 lines(seq(-3,3,length=100),normal.density,col="blue")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
