<!DOCTYPE html><html><head><title>Help for package leaftime</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {leaftime}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#addTimeline'><p>Add 'leaflet-timeline' To Leaflet Map</p></a></li>
<li><a href='#leaftimeDependency'><p>'Leaflet.timeline' Dependencies</p></a></li>
<li><a href='#sliderOptions'><p>Timeline Slider Options Helper</p></a></li>
<li><a href='#styleOptions'><p>Timeline Style Options Helper</p></a></li>
<li><a href='#timelineOptions'><p>Timeline Options Helper</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>'Leaflet-timeline' Plugin for Leaflet</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-01-26</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kent Russell &lt;kent.russell@timelyportfolio.com&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/timelyportfolio/leaftime">https://github.com/timelyportfolio/leaftime</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/timelyportfolio/leaftime/issues">https://github.com/timelyportfolio/leaftime/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Use the 'leaflet-timeline' plugin with a leaflet widget to add an
    interactive slider with play, pause, and step buttons to explore temporal
    geographic spatial data changes.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.0.2</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0), leaflet (&ge; 2.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>htmlwidgets, htmltools</td>
</tr>
<tr>
<td>Suggests:</td>
<td>geojsonio</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-01-26 15:46:15 UTC; kentr</td>
</tr>
<tr>
<td>Author:</td>
<td>Jonathan Skeate [aut] (leaflet-timeline library,
    https://github.com/skeate/Leaflet.timeline),
  Kent Russell [aut, cre] (R interface)</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-01-26 16:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='addTimeline'>Add 'leaflet-timeline' To Leaflet Map</h2><span id='topic+addTimeline'></span>

<h3>Description</h3>

<p>Add 'leaflet-timeline' To Leaflet Map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addTimeline(
  map = NULL,
  data = NULL,
  group = NULL,
  timelineOpts = timelineOptions(),
  sliderOpts = sliderOptions(),
  width = NULL,
  onchange = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addTimeline_+3A_map">map</code></td>
<td>
<p><code>htmlwidget</code> leaflet map to which a timeline will be added.</p>
</td></tr>
<tr><td><code id="addTimeline_+3A_data">data</code></td>
<td>
<p><code>geojson</code> with data for the timeline.  Each feature should have
start and end properties so the timeline will know when to show the
feature.</p>
</td></tr>
<tr><td><code id="addTimeline_+3A_group">group</code></td>
<td>
<p><code>string</code> name of the group for the timeline control.</p>
</td></tr>
<tr><td><code id="addTimeline_+3A_timelineopts">timelineOpts</code></td>
<td>
<p><code>list</code> from <code><a href="#topic+timelineOptions">timelineOptions</a></code>.</p>
</td></tr>
<tr><td><code id="addTimeline_+3A_slideropts">sliderOpts</code></td>
<td>
<p><code>list</code> from <code><a href="#topic+sliderOptions">sliderOptions</a></code>.</p>
</td></tr>
<tr><td><code id="addTimeline_+3A_width">width</code></td>
<td>
<p>valid <code>CSS</code> width for the timeline control.  If given as a percentage,
then <code>95%</code> or less is recommended to show within the bounds of the map.</p>
</td></tr>
<tr><td><code id="addTimeline_+3A_onchange">onchange</code></td>
<td>
<p><code>htmlwidgets::JS</code> function callback for when the timeline is changed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>leaflet htmlwidget</code> with an interactive slider timeline control
</p>


<h3>See Also</h3>

<p><code><a href="#topic+timelineOptions">timelineOptions</a></code>,<code><a href="#topic+sliderOptions">sliderOptions</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()) {

library(leaflet)
library(leaftime)
library(htmltools)

#Build data.frame with 10 obs + 3 cols
power &lt;- data.frame(
  "Latitude" = c(
    33.515556, 38.060556, 47.903056, 49.71, 49.041667, 31.934167,
    54.140586, 54.140586, 48.494444, 48.494444
  ),
  "Longitude" = c(
    129.837222, -77.789444, 7.563056, 8.415278, 9.175, -82.343889,
    13.664422, 13.664422, 17.681944, 17.681944
  ),
  "start" = seq.Date(as.Date("2015-01-01"), by = "day", length.out = 10),
  "end" = seq.Date(as.Date("2015-01-01"), by = "day", length.out = 10) + 1
)

# use geojsonio to convert our data.frame
#  to GeoJSON which timeline expects
power_geo &lt;- geojsonio::geojson_json(power,lat="Latitude",lon="Longitude")

# we can add data in addTimeline
leaflet() %&gt;%
  addTiles() %&gt;%
  setView(44.0665,23.74667,2) %&gt;%
  addTimeline(data = power_geo)

# or we can add data in leaflet()
leaflet(power_geo) %&gt;%
  addTiles() %&gt;%
  setView(44.0665,23.74667,2) %&gt;%
  addTimeline()

# we can control the slider controls through sliderOptions
leaflet(power_geo) %&gt;%
  addTiles() %&gt;%
  setView(44.0665,23.74667,2) %&gt;%
  addTimeline(
    sliderOpts = sliderOptions(
      formatOutput = htmlwidgets::JS(
        "function(date) {return new Date(date).toDateString()}
      "),
      position = "bottomright",
      step = 10,
      duration = 3000,
      showTicks = FALSE
    )
  )

# we can control the timeline through timelineOptions
#  wondering what should be the default
#  currently timeline uses marker
leaflet(power_geo) %&gt;%
  addTiles() %&gt;%
  setView(44.0665,23.74667,2) %&gt;%
  addTimeline(
    timelineOpts = timelineOptions(
      pointToLayer = htmlwidgets::JS(
"
function(data, latlng) {
  return L.circleMarker(latlng, {
    radius: 3
  })
}
"
      ),
      style = NULL
    )
  )

# change styling manually
leaflet(power_geo) %&gt;%
  addTiles() %&gt;%
  setView(44.0665,23.74667,2) %&gt;%
  addTimeline(
    timelineOpts = timelineOptions(
      pointToLayer = htmlwidgets::JS(
"
function(data, latlng) {
  return L.circleMarker(latlng, {
    radius: 10,
    color: 'black',
    fillColor: 'pink',
    fillOpacity: 1
  })
}
"
      ),
      styleOptions = NULL
    )
  )

# change style with styleOptions helper function
#   this will change style for all points
leaflet(power_geo) %&gt;%
  addTiles() %&gt;%
  setView(44.0665,23.74667,2) %&gt;%
  addTimeline(
    timelineOpts = timelineOptions(
      styleOptions = styleOptions(
        radius = 10,
        color = "black",
        fillColor = "pink",
        fillOpacity = 1
      )
    )
  )

# to style each point differently based on the data
power_styled &lt;- power
# IE does not like alpha so strip colors of alpha hex
power_styled$color &lt;- substr(topo.colors(6)[ceiling(runif(nrow(power),0,6))],1,7)
power_styled$radius &lt;- seq_len(nrow(power_styled)) # ceiling(runif(nrow(power),3,10))

leaflet(geojsonio::geojson_json(power_styled)) %&gt;%
  addTiles() %&gt;%
  setView(44.0665,23.74667,2) %&gt;%
  # addCircleMarkers(
  #   data = power_styled, lat = ~Latitude, lng = ~Longitude, radius = 11
  # ) %&gt;%
  addTimeline(
    timelineOpts = timelineOptions(
      styleOptions = NULL, # make sure default style does not override
      pointToLayer = htmlwidgets::JS(
"
function(data, latlng) {
  return L.circleMarker(
    latlng,
    {
      radius: +data.properties.radius,
      color: data.properties.color,
      fillColor: data.properties.color,
      fillOpacity: 1
    }
  );
}
"
      )
    )
  )



# we can use onchange to handle timeline change event
leaflet(power_geo) %&gt;%
  addTiles() %&gt;%
  setView(44.0665,23.74667,2) %&gt;%
  addTimeline(
    onchange = htmlwidgets::JS("function(e) {console.log(e, arguments)}")
  )


leaflet(power_geo, elementId = "leaflet-wide-timeline") %&gt;%
  addTiles() %&gt;%
  setView(44.0665,23.74667,2) %&gt;%
  addTimeline(
    width = "96%"
  )

}
</code></pre>

<hr>
<h2 id='leaftimeDependency'>'Leaflet.timeline' Dependencies</h2><span id='topic+leaftimeDependency'></span>

<h3>Description</h3>

<p>'Leaflet.timeline' Dependencies
</p>


<h3>Usage</h3>

<pre><code class='language-R'>leaftimeDependency()
</code></pre>


<h3>Value</h3>

<p><code>htmltools::htmlDependency</code>
</p>

<hr>
<h2 id='sliderOptions'>Timeline Slider Options Helper</h2><span id='topic+sliderOptions'></span>

<h3>Description</h3>

<p>Timeline Slider Options Helper
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sliderOptions(
  start = NULL,
  end = NULL,
  position = NULL,
  formatOutput = formatOutputFun(),
  enablePlayback = NULL,
  enableKeyboardControls = NULL,
  steps = NULL,
  duration = NULL,
  waitToUpdateMap = NULL,
  showTicks = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sliderOptions_+3A_start">start</code></td>
<td>
<p><code>number</code> that will be the starting value of the slider.</p>
</td></tr>
<tr><td><code id="sliderOptions_+3A_end">end</code></td>
<td>
<p><code>number</code> that will be the ending value of the slider.</p>
</td></tr>
<tr><td><code id="sliderOptions_+3A_position">position</code></td>
<td>
<p><code>string</code> that will be the position of the timeline.  See
<a href="https://leafletjs.com/reference-1.5.0.html#control-position">position options</a>.</p>
</td></tr>
<tr><td><code id="sliderOptions_+3A_formatoutput">formatOutput</code></td>
<td>
<p><code>htmlwidgets::JS</code> function that outputs the date as a string
in the timeline.</p>
</td></tr>
<tr><td><code id="sliderOptions_+3A_enableplayback">enablePlayback</code></td>
<td>
<p><code>logical</code> to show playback controls.</p>
</td></tr>
<tr><td><code id="sliderOptions_+3A_enablekeyboardcontrols">enableKeyboardControls</code></td>
<td>
<p><code>logical</code> to allow playback to be controlled by
the keyboard.</p>
</td></tr>
<tr><td><code id="sliderOptions_+3A_steps">steps</code></td>
<td>
<p><code>number</code> for how many steps in the timeline.</p>
</td></tr>
<tr><td><code id="sliderOptions_+3A_duration">duration</code></td>
<td>
<p><code>number</code> for the minimum time in milliseconds of the length of playback.</p>
</td></tr>
<tr><td><code id="sliderOptions_+3A_waittoupdatemap">waitToUpdateMap</code></td>
<td>
<p><code>logical</code> to wait until user is finished before redrawing.</p>
</td></tr>
<tr><td><code id="sliderOptions_+3A_showticks">showTicks</code></td>
<td>
<p><code>logical</code> to show ticks on the slider.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>list</code> of options to customize the timeline slider
</p>


<h3>See Also</h3>

<p><code><a href="#topic+addTimeline">addTimeline</a></code>
</p>

<hr>
<h2 id='styleOptions'>Timeline Style Options Helper</h2><span id='topic+styleOptions'></span>

<h3>Description</h3>

<p>Timeline Style Options Helper
</p>


<h3>Usage</h3>

<pre><code class='language-R'>styleOptions(
  radius = 3,
  color = NULL,
  stroke = TRUE,
  fill = TRUE,
  fillColor = NULL,
  fillOpacity = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="styleOptions_+3A_radius">radius</code></td>
<td>
<p><code>number</code> to specify radius of drawn circle.</p>
</td></tr>
<tr><td><code id="styleOptions_+3A_color">color</code>, <code id="styleOptions_+3A_stroke">stroke</code>, <code id="styleOptions_+3A_fillcolor">fillColor</code></td>
<td>
<p>valid <code>CSS</code> color the circle.
<code>fill</code> and/or <code>stroke</code> will
override <code>color</code>.</p>
</td></tr>
<tr><td><code id="styleOptions_+3A_fill">fill</code></td>
<td>
<p><code>logical</code> to determine if drawn will be filled with <code>color</code>.</p>
</td></tr>
<tr><td><code id="styleOptions_+3A_fillopacity">fillOpacity</code></td>
<td>
<p><code>number</code> between 0 and 1 to set opacity of the drawn circle.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>list</code> with options to style the timeline
</p>


<h3>See Also</h3>

<p><code><a href="#topic+addTimeline">addTimeline</a></code>
</p>

<hr>
<h2 id='timelineOptions'>Timeline Options Helper</h2><span id='topic+timelineOptions'></span>

<h3>Description</h3>

<p>Timeline Options Helper
</p>


<h3>Usage</h3>

<pre><code class='language-R'>timelineOptions(
  getInterval = NULL,
  pointToLayer = pointToLayerFun(),
  styleOptions = leaftime::styleOptions(),
  drawOnSetTime = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="timelineOptions_+3A_getinterval">getInterval</code></td>
<td>
<p><code>htmlwidgets::JS</code> function that returns an object with
<code>start</code> and <code>end</code> properties to specify the start and end
of the timeline range.  See
<a href="https://github.com/skeate/Leaflet.timeline#getinterval-function----optional">getInterval</a>.</p>
</td></tr>
<tr><td><code id="timelineOptions_+3A_pointtolayer">pointToLayer</code></td>
<td>
<p><code>htmlwidgets::JS</code> function that determines what is drawn
on the map.  By default, a circle marker will be drawn.  See
<a href="https://leafletjs.com/reference-1.5.0.html#geojson-pointtolayer">pointToLayer</a>.</p>
</td></tr>
<tr><td><code id="timelineOptions_+3A_styleoptions">styleOptions</code></td>
<td>
<p><code>list</code> from <code><a href="#topic+styleOptions">styleOptions</a></code>.</p>
</td></tr>
<tr><td><code id="timelineOptions_+3A_drawonsettime">drawOnSetTime</code></td>
<td>
<p><code>logical</code> to draw when time is set.  Default is <code>TRUE</code>.  See
<a href="https://github.com/skeate/Leaflet.timeline#drawonsettime-boolean----optional-default-true">drawOnSetTime</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>list</code> with options to customize the timeline
</p>


<h3>See Also</h3>

<p><code><a href="#topic+addTimeline">addTimeline</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
