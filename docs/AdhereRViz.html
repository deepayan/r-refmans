<!DOCTYPE html><html><head><title>Help for package AdhereRViz</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {AdhereRViz}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#plot_interactive_cma'><p>Interactive exploration and CMA computation.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Adherence to Medications</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.1</td>
</tr>
<tr>
<td>Author:</td>
<td>Dan Dediu [aut, cre],
  Alexandra Dima [aut],
  Samuel Allemann [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Dan Dediu &lt;ddediu@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Interactive graphical user interface (GUI) for the package 
    'AdhereR', allowing the user to access different data sources, to explore 
    the patterns of medication use therein, and the computation of various  
    measures of adherence. It is implemented using Shiny and HTML/CSS/JavaScript. </td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ddediu/AdhereR">https://github.com/ddediu/AdhereR</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Imports:</td>
<td>AdhereR (&ge; 0.7.1), data.table (&ge; 1.9), manipulate (&ge; 1.0),
shiny (&ge; 1.0), shinyWidgets (&ge; 0.4.4), shinyjs (&ge; 1.0), V8
(&ge; 1.5), colourpicker (&ge; 1.0), viridisLite(&ge; 0.3), highlight
(&ge; 0.4), clipr (&ge; 0.4), knitr (&ge; 1.20), DBI (&ge; 1.0),
RMariaDB (&ge; 1.0.5), RSQLite (&ge; 2.1)</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown (&ge; 1.1), readODS (&ge; 1.6), readxl (&ge; 1.2), haven
(&ge; 2.0), R.rsp (&ge; 0.40)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr, R.rsp</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-06-23 11:54:58 UTC; ddediu</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-06-24 08:00:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='plot_interactive_cma'>Interactive exploration and CMA computation.</h2><span id='topic+plot_interactive_cma'></span>

<h3>Description</h3>

<p>Interactively plots the data for one of more patients, allowing the real-time
exploration of the various CMAs and their parameters.
It can use <code>Rstudio</code>'s <code>manipulate</code> library (deprecated) or
<code>Shiny</code> (recommended).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_interactive_cma(
  data = NULL,
  ID = NULL,
  cma.class = c("simple", "per episode", "sliding window")[1],
  print.full.params = FALSE,
  ID.colname = NA,
  event.date.colname = NA,
  event.duration.colname = NA,
  event.daily.dose.colname = NA,
  medication.class.colname = NA,
  medication.groups = NULL,
  date.format = "%m/%d/%Y",
  followup.window.start.max = 5 * 365,
  followup.window.duration.max = 5 * 365,
  observation.window.start.max = followup.window.start.max,
  observation.window.duration.max = followup.window.duration.max,
  align.all.patients = FALSE,
  align.first.event.at.zero = FALSE,
  maximum.permissible.gap.max = 2 * 365,
  sliding.window.start.max = followup.window.start.max,
  sliding.window.duration.max = 2 * 365,
  sliding.window.step.duration.max = 2 * 365,
  backend = c("shiny", "rstudio")[1],
  use.system.browser = FALSE,
  get.colnames.fnc = function(d) names(d),
  get.patients.fnc = function(d, idcol) unique(d[[idcol]]),
  get.data.for.patients.fnc = function(patientid, d, idcol, cols = NA, maxrows = NA)
    d[d[[idcol]] %in% patientid, ],
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_interactive_cma_+3A_data">data</code></td>
<td>
<p>Usually a <em><code>data.frame</code></em> containing the events (prescribing
or dispensing) used to compute the CMA. Must contain, at a minimum, the patient
unique ID, the event date and duration, and might also contain the daily
dosage and medication type (the actual column names are defined in the
following four parameters). Alternatively, this can be any other data source
(for example, a connection to a database), in which case the user must redefine
the arguments <code>get.colnames.fnc</code>, <code>get.patients.fnc</code> and
<code>get.data.for.patients.fnc</code> appropriately. Currently, this works only when
using Shiny for interactive rendering. For a working example, please see
the vignette describing the interfacing with databases.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_id">ID</code></td>
<td>
<p>The ID (as given in the <code>ID.colname</code> column) of the patient
whose data to interactively plot (if absent, pick the first one); please not
that this an be interactively selected during plotting.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_cma.class">cma.class</code></td>
<td>
<p>The type of CMAs to plot; can be &quot;simple&quot; (CMA0 to CMA9),
&quot;per episode&quot;, or &quot;sliding window&quot;.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_print.full.params">print.full.params</code></td>
<td>
<p>A <em>logical</em> specifying if the values of all the
parameters used to generate the current plot should be printed in the console
(if <em>TRUE</em>, it can generate extremely verbose output!).</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_id.colname">ID.colname</code></td>
<td>
<p>A <em>string</em>, the name of the column in <code>data</code>
containing the unique patient ID, or <code>NA</code> if not defined.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_event.date.colname">event.date.colname</code></td>
<td>
<p>A <em>string</em>, the name of the column in
<code>data</code> containing the start date of the event (in the format given in
the <code>date.format</code> parameter), or <code>NA</code> if not defined.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_event.duration.colname">event.duration.colname</code></td>
<td>
<p>A <em>string</em>, the name of the column in
<code>data</code> containing the event duration (in days), or <code>NA</code> if not
defined.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_event.daily.dose.colname">event.daily.dose.colname</code></td>
<td>
<p>A <em>string</em>, the name of the column in
<code>data</code> containing the prescribed daily dose, or <code>NA</code> if not defined.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_medication.class.colname">medication.class.colname</code></td>
<td>
<p>A <em>string</em>, the name of the column in
<code>data</code> containing the classes/types/groups of medication, or <code>NA</code>
if not defined.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_medication.groups">medication.groups</code></td>
<td>
<p>A <em>named character vector</em> defining the
medication classes, the name of a column in the data the defines the groups,
or <code>NULL</code> if none (the default).</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_date.format">date.format</code></td>
<td>
<p>A <em>string</em> giving the format of the dates used in the
<code>data</code> and the other parameters; see the <code>format</code> parameters of the
<code><a href="base.html#topic+as.Date">as.Date</a></code> function for details (NB, this concerns only the
dates given as strings and not as <code>Date</code> objects).</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_followup.window.start.max">followup.window.start.max</code></td>
<td>
<p>The maximum number of days when the
follow-up window can start.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_followup.window.duration.max">followup.window.duration.max</code></td>
<td>
<p>The maximum duration of the follow-up
window in days.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_observation.window.start.max">observation.window.start.max</code></td>
<td>
<p>The maximum number of days when the
observation window can start.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_observation.window.duration.max">observation.window.duration.max</code></td>
<td>
<p>The maximum duration of the
observation window in days.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_align.all.patients">align.all.patients</code></td>
<td>
<p>Should the patients be aligend?</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_align.first.event.at.zero">align.first.event.at.zero</code></td>
<td>
<p>Should the first event be put at zero?</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_maximum.permissible.gap.max">maximum.permissible.gap.max</code></td>
<td>
<p>The maximum permissible gap in days.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_sliding.window.start.max">sliding.window.start.max</code></td>
<td>
<p>The maximum number of days when the sliding
windows can start.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_sliding.window.duration.max">sliding.window.duration.max</code></td>
<td>
<p>The maximum duration of the sliding
windows in days.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_sliding.window.step.duration.max">sliding.window.step.duration.max</code></td>
<td>
<p>The maximum sliding window step in
days.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_backend">backend</code></td>
<td>
<p>The plotting backend to use; &quot;shiny&quot; (the default) tries to
use the Shiny framework, while &quot;rstudio&quot; uses the manipulate RStudio
capability.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_use.system.browser">use.system.browser</code></td>
<td>
<p>For shiny, use the system browser?</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_get.colnames.fnc">get.colnames.fnc</code></td>
<td>
<p>A <em>function</em> taking as parameter the data source
and returning the column names. Must be overridden when the data source is
not derived from a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_get.patients.fnc">get.patients.fnc</code></td>
<td>
<p>A <em>function</em> taking as parameter the data source
and the patient ID column name, and returns the list of all patient IDs.
Must be overridden when the data source is not derived from a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_get.data.for.patients.fnc">get.data.for.patients.fnc</code></td>
<td>
<p>A <em>function</em> taking as parameter a (set
of) patient ID(s), the data source, and the patient ID column name, and returns
the list of all patient IDs. Must be overridden when the data source is not
derived from a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="plot_interactive_cma_+3A_...">...</code></td>
<td>
<p>Extra arguments.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>manipulate</code> is kept for backward compatibility only, as it is much
more limited than <code>Shiny</code> and will receive no new development in the
future.
<code>Shiny</code> currently allows the use of any other data source besides a
default (and usual) <code>data.frame</code> (or derived), such a connection to an
<code>SQL</code> database. In this case, the user <em>must</em> redefine the three
argument functions <code>get.colnames.fnc</code>, <code>get.patients.fnc</code> and
<code>get.data.for.patients.fnc</code> which collectively define an interface for
listing the column names, all the patient IDs, and for retreiving the actual
data for a (set of) patient ID(s). A fully worked example is described in
the vignette detailing the access to standard databases storaging the
patient information.
For more info please see the vignette.
</p>


<h3>Value</h3>

<p>Nothing
</p>


<h3>See Also</h3>

<p>The vignette *AdhereR: Interactive plotting (and more) with Shiny*.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(AdhereR);
plot_interactive_cma(med.events,
                     ID.colname="PATIENT_ID",
                     event.date.colname="DATE",
                     event.duration.colname="DURATION",
                     event.daily.dose.colname="PERDAY",
                     medication.class.colname="CATEGORY");
## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
