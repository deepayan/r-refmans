<!DOCTYPE html><html lang="en"><head><title>Help for package BuildSys</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {BuildSys}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#BuildSys-package'>
<p>System for Building and Debugging C/C++ Dynamic Libraries</p></a></li>
<li><a href='#BSysProject-class'><p>Class <code>"BSysProject"</code></p></a></li>
<li><a href='#BSysSourceFile-class'><p>Class <code>"BSysSourceFile"</code></p></a></li>
<li><a href='#buildMakefile'>
<p>Build a GNU makefile</p></a></li>
<li><a href='#clean'>
<p>Remove Files Create by this Project</p></a></li>
<li><a href='#includePath'>
<p>Get the Path to the Project Include Files</p></a></li>
<li><a href='#initProjectFromFolder'>
<p>Initialise an S4 <code>BSysProject</code> Instance based on a Project Folder</p></a></li>
<li><a href='#installIncludePath'>
<p>Get the Install Path for the Project Include Files</p></a></li>
<li><a href='#installLibraryPath'>
<p>Get the Install Path for the Project Shared Library File</p></a></li>
<li><a href='#libraryPath'>
<p>Get the Path to the Built Shared Library</p></a></li>
<li><a href='#loadLibrary'>
<p>Load the Built Shared Library</p></a></li>
<li><a href='#make'>
<p>Make the Shared Library</p></a></li>
<li><a href='#objPath'>
<p>Get the Path to the Project Object Files</p></a></li>
<li><a href='#sourcePath'>
<p>Get the Path to the Project Source Files</p></a></li>
<li><a href='#unloadLibrary'>
<p>Unload the Built Shared Library</p></a></li>
<li><a href='#vcDebug'>
<p>Debug the Shared Library</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>System for Building and Debugging C/C++ Dynamic Libraries</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-06-11</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Paavo Jumppanen &lt;paavo.jumppanen@csiro.au&gt;</td>
</tr>
<tr>
<td>Author:</td>
<td>Paavo Jumppanen [aut, cre]</td>
</tr>
<tr>
<td>Copyright:</td>
<td>CSIRO Marine and Atmospheric Research</td>
</tr>
<tr>
<td>Description:</td>
<td>A build system based on 'GNU make' that creates and
    maintains (simply) make files in an R session and provides
    GUI debugging support through 'Microsoft Visual Code'.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/pjumppanen/BuildSys">https://github.com/pjumppanen/BuildSys</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/pjumppanen/BuildSys/issues">https://github.com/pjumppanen/BuildSys/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, digest</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>'Microsoft Visual Code', 'Rtools' on 'Windows',
'gdb' or 'lldb' depending on which OS</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-06-16 01:16:25 UTC; paavo</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-06-16 22:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='BuildSys-package'>
System for Building and Debugging C/C++ Dynamic Libraries
</h2><span id='topic+BuildSys-package'></span><span id='topic+BuildSys'></span>

<h3>Description</h3>

<p>A build system based on 'GNU make' that creates and
    maintains (simply) make files in an R session and provides
    GUI debugging support through 'Microsoft Visual Code'.
</p>


<h3>Details</h3>

<p>In the standard <em>R</em> approach dynamic libraries are typically built using the <em>R CMD</em> interface.
That interface in turn uses the <em>GNU make</em> system to build the library through a generic makefile
bundled with <em>R</em>. This is presumably done to simplify the process of building dynamic libraries for
the less experience. The downside however, is adding complexity to the process when doing more esoteric 
programming that makes use of static or dynamic libraries outside of those bundled with <em>R</em>. In those 
cases it is likely that we may need to specify compiler include options to be able to successfully compile 
the code but <em>R CMD SHLIB</em> provides no direct method of acomplishing this task. Instead we have to create a 
<em>Makevars</em> file that defines the variables <code>PKG_CFLAGS</code>, <code>PKG_CXXFLAGS</code> or <code>PKG_FFLAGS</code> 
to achieve the desired outcome. 
</p>
<p>It is also common to have build issues with libraries not linking because of missing dependencies or link 
order issues (libraries must be linked in the correct order with <em>gcc</em> to ensure error free linking). 
Resolving these link related issues is made more complex through the <em>R CMD</em> interface because it is no
longer possible to simply look at the makefile definition and make modifications to it in an attempt to resolve 
the build problem. By having a system approach whereby makefiles are the centre of the build process and not 
obfuscated away in an R installation folder, the process of debugging build issues is made simpler by virtue 
of the fact that all necessary changes to fix the build are in one file only, and a simple one at that.
</p>
<p>Lastly, a major part of developing library code is debugging and standard <em>R</em> provides little support
for that. Developers typically rely on <em>gdb / lldb</em> command line driven debugger support, which is
daunting for an inexperienced user, so much so that many will simply resort to print statement based
debugging approaches, which whilst capable of resolving bugs, is a cumbersome and slow approach. What
is required is an easy to use and full featured GUI based debugger and to that end, <em>Microsoft Visual Code</em>
coupled with the machine interface (/MI) support in <em>gdb / lldb</em> provide the perfect solution.
</p>
<p><code>BuildSys</code> provides a simple but complete and flexible way to create project makefiles, build libraries
and launch GUI based debug sessions, all from within <em>R</em>. The makefiles it creates are permanent rather
than transitory so in the event of build troubles it is easy to resort to tinkering with the makefile
to resolve the cause of the build problem and then reflect the necessary fixes in the <em>R</em> based project
definition.
</p>


<h4>Project Creation</h4>

<p><code>BuildSys</code> encapsulates a C/C++ dynamic library project definition into an S4 class <code>BSysProject</code>.
To create a new project we simply create a new instance of that class and <code>BuildSys</code> will construct
the appropriate project definition. For example,
</p>
<p><code>Project &lt;- new("BSysProject", "./MyFolder")</code>
</p>
<p>will search the directory <code>./MyFolder</code> for source files (<code>.c, .cpp</code> etc) and add them to the project definition.
In searching for source files it will also scan the found source files for include statements and any found includes
will be saved as dependencies for the give source file. No attempt is made to properly parse the source so
if the code uses conditional preprocessing statements the situation may arrise that an include file is
marked as a dependency when for the given build configuration it may not be. In any case, this will not
affect the ability to correctly build the library but will just mean the dependencies are marked wider than true.
</p>
<p>Another feature of the dependency check is that any include files not found are considered externalities and
if they belong to a known set, will result in the automatic addition of library and include path dependencies
for the project. Currently <code>BuildSys</code> knows about <code>TMB.hpp, Rcpp.hpp</code> and <code>RcppEigen.hpp</code>, so if any of these are
included into the source file then the necessary include file and define dependencies will be added. This added
feature means <em>TMB</em> and <em>Rcpp</em> users have minimalistic usage requirements to construct libraries with <code>BuildSys</code> and
need not provide any additional information other than the working folder and possibly the source files being compiled.
</p>
<p>A typical project will also need to be given a name but if there is only one source file then the name
can be omitted and is inferred from the filename of the source file. For instance, we can explicitly
name the project with,
</p>
<p><code>Project &lt;- new("BSysProject", WorkingFolder="./MyFolder", Name="MyProject")</code>
</p>
<p>A <code>WorkingFolder</code> must be provided which names the folder where the source code resides and can be either an absolute path or one
relative to the <em>R</em> working directory. 
</p>
<p>Finally, if our project is hierarchical in its structure (eg. having source in one folder, header files in another folder,
and binary output in yet another) <code>BuildSys</code> can accomodate that too. In such case we set <code>Flat=FALSE</code> with,
</p>
<p><code>Project &lt;- new("BSysProject", WorkingFolder="./MyFolder", Name="MyProject", Flat=FALSE)</code>
</p>
<p>For this case the relevent folders are,
</p>
<pre>
MyFolder/src
MyFolder/include
MyFolder/obj
</pre>
<p>These sub folder names are the default behaviour. If these sub folder names are not as required they can be renamed
using the <code>SourceName</code>, <code>IncludeName</code> and <code>ObjName</code> arguments in the <code>BSysProject</code> initilizer.
That is,
</p>
<p><code>Project &lt;- new("BSysProject", WorkingFolder="./MyFolder", Name="MyProject", Flat=FALSE, SourceName="source", IncludeName="header")</code>
</p>
<p>Given an existing project, we can also re-initialize it using the <code>initProjectFromFolder</code> method which has the same
argument list as the <code>initialize</code> method (it is actually called from the <code>initialize</code> method). For instance, as with the above,
</p>
<p><code>Project &lt;- initProjectFromFolder(Project, WorkingFolder="./MyFolder", Name="MyProject", Flat=FALSE, SourceName="source", IncludeName="header")</code>
</p>



<h4>Project Compilation</h4>

<p>Once we have constructed a <code>Project</code> object compilation is simply a matter of calling the <code>make</code> method. As with
traditional GNU makefiles, calling <code>make</code> with no arguments compiles the dynamic library. Calling make with a
<code>"clean"</code> argument erases all object files and the built dynamic library. For example,
</p>
<pre>
make(Project) # Compiles the source files and links the dynamic library

make(Project, "clean") # deletes all .o object files and the dynamic library
</pre>
<p>Since the makefile is permanent a subsequent call to <code>make</code> for an already built project will return immediately
as the library is already present and up to date. If a source file is altered then only the files with stale
dependencies will be recompiled and linked into a new dynamic library build.
</p>
<p>Internally <code>make</code> will call the <code>buildMakefile</code> method to first construct an up to date makefile representing
the project. Each makefile has an <em>md5 digest</em> in it which will be updated should you alter the project at all and
this stamp is then used to determine if the makefile needs re-construction. If the makefile is re-constructed during
a call to <code>make</code> then a make clean operation will be carried out to ensure the entire project is re-built. This
should ensure that the state of the project, makefile and the build remains in sync.
</p>
<p>Finally, if your project needs to install the library and/or include files to a specific location, that behaviour is also
catered for in <code>BuildSys</code>. Simply specify the install locations with the <code>InstallLibraryName</code> and <code>InstallIncludeName</code>
arguments in the <code>BSysProject</code> initializer. For instance,
</p>
<p><code>Project &lt;- new("BSysProject", WorkingFolder="./MyFolder", Flat=F, InstallLibraryName="inst/lib", InstallIncludeName="inst/include")</code>
</p>



<h4>Loading and Unloading the Library</h4>

<p>Once the project is made using the <code>make</code> method the dynamic library can be loaded into <em>R</em> memory. We do so using the
<code>loadLibrary</code> method and we can similarly unload the library using the <code>unloadLibrary</code> method. The library
name is based upon the project name and the path to the library can be obtained with the <code>libraryPath</code> method. For example,
</p>
<pre>
loadLibrary(Project) # load the library built by Project

unloadLibrary(Project) # unload the library built by Project

libraryPath(Project) # return the path to the library built by Project
</pre>



<h4>Debugging the Library</h4>

<p>To debug a dynamic library a debug build must be made to include the symbolic information needed with the dynamic library.
By default, projects constructed using <code>BuildSys</code> will be created as debug builds. This is controlled by the <code>Debug</code> argument
supplied in the call to the <code>BSysProject</code> initilizer. For instance,
</p>
<p><code>Project &lt;- new("BSysProject", Debug=TRUE)</code>
</p>
<p>creates a debug enabled project whereas,
</p>
<p><code>Project &lt;- new("BSysProject", Debug=FALSE)</code>
</p>
<p>create a release / optimised project. For an existing project we can make a debug build by supplying the <code>Debug</code> argument
to the call to the <code>make</code> method as with,
</p>
<p><code>Project &lt;- make(Project, Debug=TRUE)</code>
</p>
<p>Recall that for <em>S4 class methods</em> to change the object state we need to assign the returned modified object to the original one,
which is why the above example assigns the <code>make</code> call to <code>Project</code>.
</p>
<p>Debugging is handled through <em>Microsoft Visual Code</em> and <em>gdb / lldb</em> and it is assumed that these components are installed and
functional. For information regarding the installation of these components consult the next section.
</p>
<p>To debug an existing dynamic library (built from a <code>BSysProject</code>) simply call the <code>vcDebug</code> method as follows.
</p>
<p><code>vcDebug(Project) # Debug the library created by project</code>
</p>
<p>Calling this method will open an instance of <em>Microsoft Visual Code</em> that is correctly initialised to debug your library code. Within
<em>Visual Code</em> you can open the source file/s of your library, set breakpoints and run a debug session. To run a debug
session select the <em>run/Start Debugging</em> menu item. Doing so will result in a new instance of <em>R</em> being launched which contains
the same environment (including loaded packages and loaded dynamic libraries) as the parent <em>R</em> session where <code>vcDebug</code> was first
called. This <em>R</em> session is your <em>sandbox</em> to safely debug your library in and leaves the parent <em>R</em> session safe from loss should
your code crash <em>R</em> completely.
</p>
<p>Typically when debugging a new library the library requires <em>R</em> setup code to initialise as a foundation for library use and/or testing.
With <code>BuildSys</code> you should perform this initial setup of <em>R</em> in the parent <em>R</em> session before calling <code>vcDebug</code> so that you
never have to initialise <em>R</em> in your debug session. Its correct state will have been initialised from the parent <em>R</em> session.
</p>



<h4>Software Installation Requirements for Debugging</h4>

<p>In order to debug code with <code>BuildSys</code> <em>Microsoft Visual Code</em> must be installed. You can download and install this software from
here:
</p>
<p><a href="https://code.visualstudio.com/download">Download Visual Studio Code</a>
</p>
<p>Choose the appropriate installer for your operating system. On Windows and Linux the installer should include <em>code</em> in the <code>PATH</code> environment variable.
Verify this by opening a new shell/command prompt and typing,
</p>
<p><code>code</code>
</p>
<p>and enter. If <em>Visual Code</em> starts then the <code>PATH</code> enviroment variable is correctly set. If it fails to start then add it to the
system <code>PATH</code> environment variable. 
</p>
<p>On MacOS the application name is <code>Visual Studio Code.app</code> and is an application bundle. For it to be usable by <em>BuildSys</em> drag the <em>Visual Studio Code</em> application bundle to the <em>Applications</em> folder using <em>Finder</em>. 
</p>
<p>On <em>Windows</em> you will have to install <em>Rtools</em> which you can find here:
</p>
<p><a href="https://cran.r-project.org/bin/windows/Rtools/">Using Rtools40 on Windows</a>
</p>
<p>You will need to add <em>R</em> and <em>Rtools</em> to the system <em>Path</em>. For instance add,
</p>
<pre>
C:\rtools40\mingw64\bin\
C:\rtools40\usr\bin\
C:\Program Files\R\R-4.0.1\bin\x64\
</pre>
<p>but be aware that the locations may differ in your case depending on which version of <em>R</em> and <em>Rtools</em> and where these products were installed.
To set environment variables in <em>Windows 10</em>,
</p>

<ol>
<li><p> Open the Start Search, type in &ldquo;env&rdquo;, and choose &ldquo;Edit the system environment variables&rdquo;:
</p>
</li>
<li><p> Click the &ldquo;Environment Variables...&rdquo; button.
</p>
</li>
<li><p> Set the environment variables as needed. The New button adds an additional variable.
</p>
</li>
<li><p> Dismiss all of the dialogs by choosing &ldquo;OK&rdquo;. Your changes are saved!
</p>
</li></ol>

<p>In Windows after installing <em>Rtools</em> we also need to install <em>gdb</em>. To install <em>gdb</em>, open an <em>MSYS2</em> shell (In explorer migrate to the Rtools40 folder
and double click on <em>msys2.exe</em>) and enter the following commands,
</p>
<pre>
pacman -Sy
pacman -S mingw-w64-{i686,x86_64}-gdb
</pre>
<p>After installing verify that <em>gdb</em> is installed by opening a new <em>DOS box</em> and typing,
</p>
<p><code>gdb -v</code>
</p>
<p>If all is correct it should respond with something like,
</p>
<pre>
GNU gdb (GDB) 8.3.1
Copyright (C) 2019 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
</pre>
<p>On <em>MacOS / OS X</em> you will need to install <em>Xcode</em> to have access to both <em>clang</em> and <em>lldb</em>. Go to <em>Mac App Store</em> and download and install <em>Xcode</em>.
</p>
<p>On <em>Linux</em> you will need to have <em>gcc</em> installed. Installation of <em>gcc</em> on <em>Linux</em> is omitted because of the
many and varied ways to do so depending on the distribution being used. Please consult <em>Google</em> on this topic for more information
on installing development tools on <em>Linux</em>.
</p>
<p>On <em>Windows</em> and <em>Linux</em>, you will also need to install the <em>Microsoft C/C++ IntelliSense, debugging, and code browsing</em> extension in
<em>Microsoft Visual Code</em>. To install, press <em>Ctrl+Shift+X</em> and search for <em>C/C++</em> and then click on <em>Install</em> beside the
<em>Microsoft C/C++ IntelliSense, debugging, and code browsing</em> entry in the list. On <em>MacOS / OS X</em> you will need to install
the <em>Microsoft C/C++ IntelliSense, debugging, and code browsing</em> and <em>CodeLLDB</em> extensions. To install press <em>CMD+Shift+X</em> and 
search for <em>C/C++</em> and then click on <em>Install</em> beside the <em>Microsoft C/C++ IntelliSense, debugging, and code browsing</em> entry in the list,
then also search for <em>CodeLLDB</em> and click on the <em>Install</em> next to <em>Native debugger based on LLDB</em> in the list.
</p>

<p>On <em>MacOS (OS X 10.11 and later)</em> <em>Apple</em> introduced <em>System Integrity Protection</em> which restricts the ability to debug your code from within an R session. 
To debug code in R using <em>BuildSys</em> and <em>CodeLLDB</em> will require that the debugging restrictions are disabled. To do so shutdown <em>MacOS</em>, then press and hold down <em>CMD+R</em>
keys while pressing the power button and keep them depressed until you see a language selection dialog. After selecting the language you should see
the <em>Utilities Window</em>. In the menu bar at the top of the screen select the <em>utilities/Terminal</em> menu and in the terminal session enter
the follow command:
</p>
<pre>
csrutil enable --without debug
</pre>
<p>You will be prompted for your password. Enter your password to carry out the command. If successful you will be presented with a warning about it being a non-standard configuration. 
Now re-boot your Mac by selecting the re-boot option from the Apple menu at the top of the screen. You should now be able to debug your R dynamic libraries with <em>BuildSys</em>.
</p>


<h3>Note</h3>

<p>If the absolute path to source and dynamic library files contains spaces then debugging in <em>Visual Code</em> fails to function correctly.
To ensure code is debuggable users will need to avoid putting code in folders with whitespace in the folder names.
</p>


<h3>Author(s)</h3>

<p>Paavo Jumppanen [aut, cre]
</p>
<p>Maintainer: Paavo Jumppanen &lt;paavo.jumppanen@csiro.au&gt;
</p>


<h3>See Also</h3>

<p><a href="https://code.visualstudio.com/docs/cpp/cpp-debug">Debug C++ in Visual Studio Code</a>
<a href="https://developer.apple.com/documentation/security/disabling_and_enabling_system_integrity_protection">Disabling and Enabling System Integrity Protection</a>
<a href="https://developer.apple.com/forums/thread/17452">Enabling parts of System Integrity Protection while disabling specific parts?</a>
<code><a href="#topic+make">make</a></code>
<code><a href="#topic+buildMakefile">buildMakefile</a></code>
<code><a href="#topic+vcDebug">vcDebug</a></code>
<code><a href="#topic+loadLibrary">loadLibrary</a></code>
<code><a href="#topic+unloadLibrary">unloadLibrary</a></code>
<code><a href="#topic+libraryPath">libraryPath</a></code>
<code><a href="#topic+sourcePath">sourcePath</a></code>
<code><a href="#topic+includePath">includePath</a></code>
<code><a href="#topic+objPath">objPath</a></code>
<code><a href="#topic+installLibraryPath">installLibraryPath</a></code>
<code><a href="#topic+installIncludePath">installIncludePath</a></code>
<code><a href="#topic+clean">clean</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ProjectFolder &lt;- tempdir()

# Create source file for finite convolution example in "Writing R Extensions"  
lines &lt;- c(
"#include &lt;R.h&gt;",
"#include &lt;Rinternals.h&gt;",
"",
"SEXP convolve2(SEXP a, SEXP b)",
"{",
"    int na, nb, nab;",
"    double *xa, *xb, *xab;",
"    SEXP ab;",
"",
"    a = PROTECT(coerceVector(a, REALSXP));",
"    b = PROTECT(coerceVector(b, REALSXP));",
"    na = length(a); nb = length(b); nab = na + nb - 1;",
"    ab = PROTECT(allocVector(REALSXP, nab));",
"    xa = REAL(a); xb = REAL(b); xab = REAL(ab);",
"    for(int i = 0; i &lt; nab; i++) xab[i] = 0.0;",
"    for(int i = 0; i &lt; na; i++)",
"        for(int j = 0; j &lt; nb; j++) xab[i + j] += xa[i] * xb[j];",
"    UNPROTECT(3);",
"    return ab;",
"}")  

SourceFilePath &lt;- paste0(ProjectFolder, "/convolve.c")
writeLines(lines, SourceFilePath)

# digest need not be loaded but the digest package needs to be installed
# as it is used to create a digest of the project to track the need for
# makefile re-creation.
require(BuildSys)

# create project to build shared library, a flat project with source in current working directory. 
Project &lt;- new("BSysProject", ProjectFolder)

# re-initialise project from current working directory, new("BSysProject") calls this internally
Project &lt;- initProjectFromFolder(Project, ProjectFolder)

# build the shared library
make(Project)

# get project library path
libraryPath(Project)

# get project source path
sourcePath(Project)

# get project include path
includePath(Project)

# get project object path
objPath(Project)

# get project install library path
installLibraryPath(Project)

# get project install include path
installIncludePath(Project)

# load the library
loadLibrary(Project)

# R wrapper on .Call
conv &lt;- function(a, b) .Call("convolve2", a, b)

# Test data
a &lt;- rnorm(100)
b &lt;- rep(1.0, times=10)

# call the shared library function
conv(a, b)

## Not run: 
# open a debug session - assumes Visual Studio Code is installed as directed in the 
# package documentation. This will open a Visual Studio Code session. In that session
# open the convolve.c source file and set breakpoints, then select the "run/start debugging"
# menu to debug. This will start a new R session with the same state as the parent 
# R session where vcDebug() is first called. In the new debug session run the following
# command:
#
# conv(a, b)
vcDebug(Project)

## End(Not run)

# unload the shared library
unloadLibrary(Project)

# clean up example
make(Project, "clean")
clean(Project)
unlink(SourceFilePath)
</code></pre>

<hr>
<h2 id='BSysProject-class'>Class <code>"BSysProject"</code></h2><span id='topic+BSysProject-class'></span><span id='topic+buildMakefile+2CBSysProject-method'></span><span id='topic+includePath+2CBSysProject-method'></span><span id='topic+initProjectFromFolder+2CBSysProject-method'></span><span id='topic+installIncludePath+2CBSysProject-method'></span><span id='topic+installLibraryPath+2CBSysProject-method'></span><span id='topic+libraryPath+2CBSysProject-method'></span><span id='topic+loadLibrary+2CBSysProject-method'></span><span id='topic+make+2CBSysProject-method'></span><span id='topic+objPath+2CBSysProject-method'></span><span id='topic+sourcePath+2CBSysProject-method'></span><span id='topic+unloadLibrary+2CBSysProject-method'></span><span id='topic+vcDebug+2CBSysProject-method'></span><span id='topic+clean+2CBSysProject-method'></span>

<h3>Description</h3>

<p><code>BSysProject</code> implements a build system based on GNU make that creates and
maintains (simply) makefiles in an R session and provides GUI debugging support 
through Microsoft Visual Code.
</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form:
</p>
<pre>
  new("BSysProject", 
      WorkingFolder,
      Name, 
      SourceFiles, 
      SourceName, 
      IncludeName, 
      ObjName, 
      InstallLibraryName, 
      InstallIncludeName, 
      Flat, 
      Packages, 
      Includes, 
      Defines, 
      Libraries, 
      CFLAGS, 
      CXXFLAGS, 
      FFLAGS, 
      LDFLAGS, 
      LDLIBS, 
      DEFINES, 
      Debug)</pre>
<p>For more information consult <code><a href="#topic+initProjectFromFolder">initProjectFromFolder</a></code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>WorkingFolder</code>:</dt><dd>
<p>Object of class <code>"character"</code> that is the absolute path to the root folder of the project.
</p>
</dd>
<dt><code>ProjectName</code>:</dt><dd>
<p>Object of class <code>"character"</code> that is the name given to the project and will form the basename of the shared library.
</p>
</dd>
<dt><code>SourceName</code>:</dt><dd>
<p>Object of class <code>"character"</code> that is the sub-path / sub-drectory of the source folder (containing <code>.c</code>, <code>.cpp</code> files)
in the project.
</p>
</dd>
<dt><code>IncludeName</code>:</dt><dd>
<p>Object of class <code>"character"</code> that is the sub-path / sub-drectory of the include folder (containing <code>.h</code>, <code>.hpp</code> files)
in the project.
</p>
</dd>
<dt><code>ObjName</code>:</dt><dd>
<p>Object of class <code>"character"</code> that is he sub-path / sub-drectory of the object folder (containing the compiled <code>.o</code>
files) in the project.
</p>
</dd>
<dt><code>InstallLibraryName</code>:</dt><dd>
<p>Object of class <code>"character"</code> that is the sub-path / sub-drectory of the folder to install the compiled shared library to.
</p>
</dd>
<dt><code>InstallIncludeName</code>:</dt><dd>
<p>Object of class <code>"character"</code> that is the sub-path / sub-drectory of the folder to install the shared library header files to.
</p>
</dd>
<dt><code>Flat</code>:</dt><dd>
<p>Object of class <code>"logical"</code> that determines if the project is assumed <em>flat</em> or <em>heirarchical</em>. If <em>flat</em>
then all the source and include files are assumed to reside in the <code>WorkingFolder</code>, otherwise they
are assumed to be in the sub-folders descibed by the <code>SourceName</code>, <code>IncludeName</code> and <code>ObjName</code>
arguments.
</p>
</dd>
<dt><code>SourceFiles</code>:</dt><dd>
<p>Object of class <code>"list"</code> is a <code>"BSysSourceFile" list</code> that names the source files of the project.
</p>
</dd>
<dt><code>Packages</code>:</dt><dd>
<p>Object of class <code>"character"</code> is a <code>string list</code> that names the packages that this library is depenedent
on (C/C++ include dependencies).
</p>
</dd>
<dt><code>Includes</code>:</dt><dd>
<p>Object of class <code>"character"</code> is a <code>string list</code> that contains the include paths of external dependencies
of the library code.
</p>
</dd>
<dt><code>Defines</code>:</dt><dd>
<p>Object of class <code>"character"</code> is a <code>string list</code> that contains preprocessor (<em>#defines</em>) defines
required to compile the code.
</p>
</dd>
<dt><code>Libraries</code>:</dt><dd>
<p>Object of class <code>"character"</code> is a <code>string list</code> that names the additional library dependencies needed
to link the library. The format is as required by <em>gcc</em>. For instance, <code>"-L/usr/local/lib -lexpat"</code> would
constitute a single item in the list.
</p>
</dd>
<dt><code>CFLAGS</code>:</dt><dd>
<p>Object of class <code>"character"</code> is a <code>string list</code> naming additional <em>gcc</em> flags to apply when
compiling <code>.c</code> files.
</p>
</dd>
<dt><code>CXXFLAGS</code>:</dt><dd>
<p>Object of class <code>"character"</code> is a <code>string list</code> naming additional <em>gcc</em> flags to apply when
compiling <code>.cpp</code> files.
</p>
</dd>
<dt><code>FFLAGS</code>:</dt><dd>
<p>Object of class <code>"character"</code> is a <code>string list</code> naming additional <em>gcc</em> flags to apply when
compiling <code>.f</code> files.
</p>
</dd>
<dt><code>LDFLAGS</code>:</dt><dd>
<p>Object of class <code>"character"</code> is a <code>string list</code> naming additional <em>gcc</em> flags to apply when
linking <code>.o</code> files.
</p>
</dd>
<dt><code>LDLIBS</code>:</dt><dd>
<p>Object of class <code>"character"</code> is a <code>string list</code> naming additional <em>gcc</em> linker flags to apply
when linking <code>.o</code> files.
</p>
</dd>
<dt><code>DEFINES</code>:</dt><dd>
<p>Object of class <code>"character"</code> is a <code>string list</code> that contains preprocessor (<em>#defines</em>) defines
supplied when compiling the code.
</p>
</dd>
<dt><code>IsDebug</code>:</dt><dd>
<p>Object of class <code>"logical"</code> is a <code>Boolean</code> that indicates whether to create a debug build.
</p>
</dd>
<dt><code>DebugState</code>:</dt><dd>
<p>Object of class <code>"list"</code> used internally to manage debugging.
</p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>buildMakefile</dt><dd><p><code>signature(.Object = "BSysProject")</code>: see <code><a href="#topic+buildMakefile">buildMakefile</a></code> </p>
</dd>
<dt>includePath</dt><dd><p><code>signature(.Object = "BSysProject")</code>: see <code><a href="#topic+includePath">includePath</a></code> </p>
</dd>
<dt>initProjectFromFolder</dt><dd><p><code>signature(.Object = "BSysProject")</code>: see <code><a href="#topic+initProjectFromFolder">initProjectFromFolder</a></code> </p>
</dd>
<dt>installIncludePath</dt><dd><p><code>signature(.Object = "BSysProject")</code>: see <code><a href="#topic+installIncludePath">installIncludePath</a></code> </p>
</dd>
<dt>installLibraryPath</dt><dd><p><code>signature(.Object = "BSysProject")</code>: see <code><a href="#topic+installLibraryPath">installLibraryPath</a></code> </p>
</dd>
<dt>libraryPath</dt><dd><p><code>signature(.Object = "BSysProject")</code>: see <code><a href="#topic+libraryPath">libraryPath</a></code> </p>
</dd>
<dt>loadLibrary</dt><dd><p><code>signature(.Object = "BSysProject")</code>: see <code><a href="#topic+loadLibrary">loadLibrary</a></code> </p>
</dd>
<dt>make</dt><dd><p><code>signature(.Object = "BSysProject")</code>: see <code><a href="#topic+make">make</a></code> </p>
</dd>
<dt>objPath</dt><dd><p><code>signature(.Object = "BSysProject")</code>: see <code><a href="#topic+objPath">objPath</a></code> </p>
</dd>
<dt>sourcePath</dt><dd><p><code>signature(.Object = "BSysProject")</code>: <code><a href="#topic+sourcePath">sourcePath</a></code> </p>
</dd>
<dt>unloadLibrary</dt><dd><p><code>signature(.Object = "BSysProject")</code>: <code><a href="#topic+unloadLibrary">unloadLibrary</a></code> </p>
</dd>
<dt>vcDebug</dt><dd><p><code>signature(.Object = "BSysProject")</code>: <code><a href="#topic+vcDebug">vcDebug</a></code> </p>
</dd>
<dt>clean</dt><dd><p><code>signature(.Object = "BSysProject")</code>: <code><a href="#topic+clean">clean</a></code> </p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Paavo Jumppanen [aut, cre]
</p>
<p>Maintainer: Paavo Jumppanen &lt;paavo.jumppanen@csiro.au&gt;
</p>

<hr>
<h2 id='BSysSourceFile-class'>Class <code>"BSysSourceFile"</code></h2><span id='topic+BSysSourceFile-class'></span>

<h3>Description</h3>

<p>This class is for internal use only and is used to track the source files and
corresponding dependecies that make up a <code>BSysProject</code>.
</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <code>new("BSysSourceFile", Filename, SrcFolder, IncludeFolder, Type)</code>. Users
should not be using this class directly. Instances of this class are used to track the source files and
corresponding dependecies that make up a <code>BSysProject</code>. 
</p>


<h3>Slots</h3>


<dl>
<dt><code>Filename</code>:</dt><dd><p>Object of class <code>"character"</code> is the file name and path of a file in a <code>BSysProject</code> object instance. </p>
</dd>
<dt><code>Type</code>:</dt><dd><p>Object of class <code>"character"</code> is a string naming the source file type (<code>"c"</code>, <code>"cpp"</code> or <code>"f"</code>). </p>
</dd>
<dt><code>Dependencies</code>:</dt><dd><p>Object of class <code>"list"</code> is a list of fully qualified include file dependencies for this source file. </p>
</dd>
<dt><code>Externals</code>:</dt><dd><p>Object of class <code>"list"</code> is a list of external include file dependencies (the file is not in the <code><a href="#topic+includePath">includePath</a></code>. </p>
</dd>
</dl>



<h3>Methods</h3>

<p>No methods defined with class &quot;BSysSourceFile&quot; in the signature.
</p>


<h3>Author(s)</h3>

<p>Paavo Jumppanen [aut, cre]
</p>
<p>Maintainer: Paavo Jumppanen &lt;paavo.jumppanen@csiro.au&gt;
</p>

<hr>
<h2 id='buildMakefile'>
Build a GNU makefile
</h2><span id='topic+buildMakefile'></span><span id='topic++5CS4method+7BbuildMakefile+7D+7BBSysProject+7D'></span>

<h3>Description</h3>

<p>Calling <code>buildMakefile</code> builds a GNU makefile based on the project specification in the S4 <code>BSysProject</code> object instance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  ## S4 method for signature 'BSysProject'
buildMakefile(.Object, Force = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="buildMakefile_+3A_.object">.Object</code></td>
<td>

<p><code>.Object</code> is an object instance of class <code>BSysProject</code> that describes the code project.
</p>
</td></tr>
<tr><td><code id="buildMakefile_+3A_force">Force</code></td>
<td>

<p><code>Force</code> is a boolean that when <code>TRUE</code> forces re-construction of the makefile.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>buildMakefile</code> constructs a makefile that represents the project specfication in the S4 <code>BSysProject</code> object instance.
That instance is created with a call to <code>new("BSysProject", ...)</code> constructor (see <code><a href="#topic+initProjectFromFolder">initProjectFromFolder</a></code>). If the makefile
already exists and is in sync with <code>Object</code> then the makefile is left untouched, unless <code>Force=TRUE</code>, in which case it is written afresh.
A makefile is determined to be in sync with the parent project by comparison of an <em>md5 digest</em> of the <code>BSysProject</code> object instance
and the digest stored in the header comment line of the makefile.
</p>


<h3>Value</h3>

<p>Returns <code>TRUE</code> if the makefile is created or re-created and <code>FALSE</code> otherwise.
</p>


<h3>Note</h3>

<p>see <code><a href="#topic+BuildSys-package">BuildSys-package</a></code> for examples of use.
</p>


<h3>Author(s)</h3>

<p>Paavo Jumppanen [aut, cre]
</p>
<p>Maintainer: Paavo Jumppanen &lt;paavo.jumppanen@csiro.au&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make">make</a></code>
<code><a href="#topic+initProjectFromFolder">initProjectFromFolder</a></code>
<code><a href="#topic+BuildSys-package">BuildSys-package</a></code>
</p>

<hr>
<h2 id='clean'>
Remove Files Create by this Project
</h2><span id='topic+clean'></span><span id='topic++5CS4method+7Bclean+7D+7BBSysProject+7D'></span>

<h3>Description</h3>

<p>Calling <code>clean</code> will remove the files and folders created by the
project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  ## S4 method for signature 'BSysProject'
clean(.Object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean_+3A_.object">.Object</code></td>
<td>

<p><code>.Object</code> is an object instance of class <code>BSysProject</code> that describes the code project.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>this method has no return value.
</p>


<h3>Note</h3>

<p>see <code><a href="#topic+BuildSys-package">BuildSys-package</a></code> for examples of use.
</p>


<h3>Author(s)</h3>

<p>Paavo Jumppanen [aut, cre]
</p>
<p>Maintainer: Paavo Jumppanen &lt;paavo.jumppanen@csiro.au&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+BuildSys-package">BuildSys-package</a></code>
</p>

<hr>
<h2 id='includePath'>
Get the Path to the Project Include Files
</h2><span id='topic+includePath'></span><span id='topic++5CS4method+7BincludePath+7D+7BBSysProject+7D'></span>

<h3>Description</h3>

<p>Calling <code>includePath</code> will return the fully qualified path to the include
file folder of the project specification in the S4 <code>BSysProject</code> object instance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  ## S4 method for signature 'BSysProject'
includePath(.Object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="includePath_+3A_.object">.Object</code></td>
<td>

<p><code>.Object</code> is an object instance of class <code>BSysProject</code> that describes the code project.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns the fully qualified path to the include file folder of the project.
</p>


<h3>Note</h3>

<p>see <code><a href="#topic+BuildSys-package">BuildSys-package</a></code> for examples of use.
</p>


<h3>Author(s)</h3>

<p>Paavo Jumppanen [aut, cre]
</p>
<p>Maintainer: Paavo Jumppanen &lt;paavo.jumppanen@csiro.au&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+libraryPath">libraryPath</a></code>
<code><a href="#topic+sourcePath">sourcePath</a></code>
<code><a href="#topic+objPath">objPath</a></code>
<code><a href="#topic+installLibraryPath">installLibraryPath</a></code>
<code><a href="#topic+installIncludePath">installIncludePath</a></code>
</p>

<hr>
<h2 id='initProjectFromFolder'>
Initialise an S4 <code>BSysProject</code> Instance based on a Project Folder
</h2><span id='topic+initProjectFromFolder'></span><span id='topic++5CS4method+7BinitProjectFromFolder+7D+7BBSysProject+7D'></span>

<h3>Description</h3>

<p>Calling <code>initProjectFromFolder</code> initialises a project specification in an S4 <code>BSysProject</code> object instance. That
object instance can then be used to compile and debug the resulting shared library. A new <code>BSysProject</code> object instance
can be constructed by calling <code>new("BSysProject", ...)</code> where the argument list (...) is the same as for <code>initProjectFromFolder</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'BSysProject'
initProjectFromFolder(.Object,
                      WorkingFolder = "NULL",
                      Name = "",
                      SourceFiles = "NULL",
                      SourceName = "src",
                      IncludeName = "include",
                      ObjName = "obj",
                      InstallLibraryName = as.character(NULL),
                      InstallIncludeName = as.character(NULL),
                      Flat = TRUE,
                      Packages = as.character(c()),
                      Includes = as.character(c()),
                      Defines = as.character(c()),
                      Libraries = as.character(c()),
                      CFLAGS = as.character(c()),
                      CXXFLAGS = as.character(c()),
                      FFLAGS = as.character(c()),
                      LDFLAGS = as.character(c()),
                      LDLIBS = as.character(c()),
                      DEFINES = as.character(c()),
                      Debug = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="initProjectFromFolder_+3A_.object">.Object</code></td>
<td>

<p><code>.Object</code> is an S4 object instance of class <code>BSysProject</code> that the code project will be based off.
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_workingfolder">WorkingFolder</code></td>
<td>

<p>The path to the root folder of the project, either relative or absolute and must be supplied.
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_name">Name</code></td>
<td>

<p>The name given to the project and will form the basename of the shared library.
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_sourcefiles">SourceFiles</code></td>
<td>

<p>The a list of file names in WorkingFolder that should be compiled as part of the project or <code>NULL</code>. If <code>NULL</code> 
then all compilable source files in WorkingFolder are included. 
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_sourcename">SourceName</code></td>
<td>

<p>The sub-path / sub-drectory of the source folder (containing <code>.c</code>, <code>.cpp</code> files) in the project.
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_includename">IncludeName</code></td>
<td>

<p>The sub-path / sub-drectory of the include folder (containing <code>.h</code>, <code>.hpp</code> files) in the project.
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_objname">ObjName</code></td>
<td>

<p>The sub-path / sub-drectory of the object folder (containing the compiled <code>.o</code> files) in the project.
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_installlibraryname">InstallLibraryName</code></td>
<td>

<p>The sub-path / sub-drectory of the folder to install the compiled shared library to.
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_installincludename">InstallIncludeName</code></td>
<td>

<p>The sub-path / sub-drectory of the folder to install the shared library header files to.
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_flat">Flat</code></td>
<td>

<p>A <code>Boolean</code> determining if the project is assumed <em>flat</em> or <em>heirarchical</em>. If <em>flat</em>
then all the source and include files are assumed to reside in the <code>WorkingFolder</code>, otherwise they
are assumed to be in the sub-folders descibed by the <code>SourceName</code>, <code>IncludeName</code> and <code>ObjName</code>
arguments.
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_packages">Packages</code></td>
<td>

<p>A <code>string list</code> that names the packages that this library is depenedent on (C/C++ include dependencies)
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_includes">Includes</code></td>
<td>

<p>A <code>string list</code> that contains the include paths of external dependencies of the library code
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_defines">Defines</code></td>
<td>

<p>A <code>string list</code> that contains preprocessor (<em>#defines</em>) defines required to compile the code
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_libraries">Libraries</code></td>
<td>

<p>A <code>string list</code> that names the additional library dependencies needed to link the library. The format is as required
by <em>gcc</em>. For instance, <code>"-L/usr/local/lib -lexpat"</code> would constitute a single item in the list.
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_cflags">CFLAGS</code></td>
<td>

<p>A <code>string list</code> naming additional <em>gcc</em> flags to apply when compiling <code>.c</code> files
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_cxxflags">CXXFLAGS</code></td>
<td>

<p>A <code>string list</code> naming additional <em>gcc</em> flags to apply when compiling <code>.cpp</code> files
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_fflags">FFLAGS</code></td>
<td>

<p>A <code>string list</code> naming additional <em>gcc</em> flags to apply when compiling <code>.f</code> files
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_ldflags">LDFLAGS</code></td>
<td>

<p>A <code>string list</code> naming additional <em>gcc</em> flags to apply when linking <code>.o</code> files
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_ldlibs">LDLIBS</code></td>
<td>

<p>A <code>string list</code> naming additional <em>gcc</em> linker flags to apply when linking <code>.o</code> files
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_defines">DEFINES</code></td>
<td>

<p>A <code>string list</code> that contains preprocessor (<em>#defines</em>) defines supplied when compiling the code
</p>
</td></tr>
<tr><td><code id="initProjectFromFolder_+3A_debug">Debug</code></td>
<td>

<p>A <code>Boolean</code> that indicates whether to create a debug build
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>initProjectFromFolder</code> constructs a project specification by scanning the <code>WorkingFolder</code>
and relevant <code>sourceName</code> sub path for source files to add to the project. If the <code>SourceFiles</code>
is included the the source file scan is omitted and only the named source files included. The named files
are assumed relative to the Working Folder so if a hierarchical project is being created then the relative
path to the source folder will need to be included in the <code>SourceFiles</code> list. Any <code>.c</code>, <code>.cpp</code>
and <code>.f</code> files it finds are added to the project. In the case of Fortran files the following extensions
are scanned; <code>.f</code>, <code>.for</code>, <code>.f90</code>, <code>.f95</code> and <code>.f77</code>. Any added files are scanned 
for include directives and those includes are added as project dependencies. If the dependency is not found 
in the path described by the <code>includeName</code> it is regarded as an external dependency.
</p>
<p>If the external dependency is known (<code>TMB.hpp</code> for example) then the appropriate <code>Includes</code>,
<code>Defines</code> and <code>Libraries</code> are added to the project definition. <code>BuildSys</code> is currently
aware of <code>TMB</code>, <code>Rcpp</code>, <code>RcppEigen</code> and the <code>BLAS</code> library support in R. External
dependencies not know to <code>BuildSys</code> need to be handle by adding the appropriate <code>Includes</code>,
<code>Defines</code> and <code>Libraries</code> to the Project manually with the arguments provided above.
</p>
<p><code>initProjectFromFolder</code> has useful defaults meaning in most cases very few arguments need be provided.
At most, the <code>WorkingFolder</code> and <code>Name</code> arguments will be required but if the project has only
a single source file then even <code>Name</code> can be omitted as the name will be inferred from the source file name.
</p>


<h3>Value</h3>

<p>returns an S4 object instance of class <code>BSysProject</code> that describes the code project.
</p>


<h3>Note</h3>

<p>see <code><a href="#topic+BuildSys-package">BuildSys-package</a></code> for examples of use.
</p>


<h3>Author(s)</h3>

<p>Paavo Jumppanen [aut, cre]
</p>
<p>Maintainer: Paavo Jumppanen &lt;paavo.jumppanen@csiro.au&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make">make</a></code>
<code><a href="#topic+buildMakefile">buildMakefile</a></code>
<code><a href="#topic+vcDebug">vcDebug</a></code>
<code><a href="#topic+loadLibrary">loadLibrary</a></code>
<code><a href="#topic+unloadLibrary">unloadLibrary</a></code>
<code><a href="#topic+libraryPath">libraryPath</a></code>
<code><a href="#topic+sourcePath">sourcePath</a></code>
<code><a href="#topic+includePath">includePath</a></code>
<code><a href="#topic+objPath">objPath</a></code>
<code><a href="#topic+installLibraryPath">installLibraryPath</a></code>
<code><a href="#topic+installIncludePath">installIncludePath</a></code>
<code><a href="#topic+BuildSys-package">BuildSys-package</a></code>
</p>

<hr>
<h2 id='installIncludePath'>
Get the Install Path for the Project Include Files
</h2><span id='topic+installIncludePath'></span><span id='topic++5CS4method+7BinstallIncludePath+7D+7BBSysProject+7D'></span>

<h3>Description</h3>

<p>Calling <code>installIncludePath</code> will return the fully qualified path to the install include
file folder of the project specification in the S4 <code>BSysProject</code> object instance.
This is the folder where the shared library include files will be copied to when calling
<code>make(Project, "install")</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  ## S4 method for signature 'BSysProject'
installIncludePath(.Object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="installIncludePath_+3A_.object">.Object</code></td>
<td>

<p><code>.Object</code> is an object instance of class <code>BSysProject</code> that describes the code project.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns the fully qualified path to the install include file folder of the project specification.
</p>


<h3>Note</h3>

<p>see <code><a href="#topic+BuildSys-package">BuildSys-package</a></code> for examples of use.
</p>


<h3>Author(s)</h3>

<p>Paavo Jumppanen [aut, cre]
</p>
<p>Maintainer: Paavo Jumppanen &lt;paavo.jumppanen@csiro.au&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+libraryPath">libraryPath</a></code>
<code><a href="#topic+sourcePath">sourcePath</a></code>
<code><a href="#topic+includePath">includePath</a></code>
<code><a href="#topic+objPath">objPath</a></code>
<code><a href="#topic+installLibraryPath">installLibraryPath</a></code>
</p>

<hr>
<h2 id='installLibraryPath'>
Get the Install Path for the Project Shared Library File
</h2><span id='topic+installLibraryPath'></span><span id='topic++5CS4method+7BinstallLibraryPath+7D+7BBSysProject+7D'></span>

<h3>Description</h3>

<p>Calling <code>installLibraryPath</code> will return the fully qualified path to the install library
file folder of the project specification in the S4 <code>BSysProject</code> object instance.
This is the folder where the shared library will be copied to when calling <code>make(Project, "install")</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  ## S4 method for signature 'BSysProject'
installLibraryPath(.Object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="installLibraryPath_+3A_.object">.Object</code></td>
<td>

<p><code>.Object</code> is an object instance of class <code>BSysProject</code> that describes the code project.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns the fully qualified path to the install library file folder of the project specification.
</p>


<h3>Note</h3>

<p>see <code><a href="#topic+BuildSys-package">BuildSys-package</a></code> for examples of use.
</p>


<h3>Author(s)</h3>

<p>Paavo Jumppanen [aut, cre]
</p>
<p>Maintainer: Paavo Jumppanen &lt;paavo.jumppanen@csiro.au&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+libraryPath">libraryPath</a></code>
<code><a href="#topic+sourcePath">sourcePath</a></code>
<code><a href="#topic+includePath">includePath</a></code>
<code><a href="#topic+objPath">objPath</a></code>
<code><a href="#topic+installIncludePath">installIncludePath</a></code>
</p>

<hr>
<h2 id='libraryPath'>
Get the Path to the Built Shared Library
</h2><span id='topic+libraryPath'></span><span id='topic++5CS4method+7BlibraryPath+7D+7BBSysProject+7D'></span>

<h3>Description</h3>

<p>Calling <code>libraryPath</code> will return the fully qualified path to the built
shared library of the project specification in the S4 <code>BSysProject</code> object instance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  ## S4 method for signature 'BSysProject'
libraryPath(.Object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="libraryPath_+3A_.object">.Object</code></td>
<td>

<p><code>.Object</code> is an object instance of class <code>BSysProject</code> that describes the code project.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns the fully qualified path to the built shared library of the project specification.
</p>


<h3>Note</h3>

<p>see <code><a href="#topic+BuildSys-package">BuildSys-package</a></code> for examples of use.
</p>


<h3>Author(s)</h3>

<p>Paavo Jumppanen [aut, cre]
</p>
<p>Maintainer: Paavo Jumppanen &lt;paavo.jumppanen@csiro.au&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sourcePath">sourcePath</a></code>
<code><a href="#topic+includePath">includePath</a></code>
<code><a href="#topic+objPath">objPath</a></code>
<code><a href="#topic+installLibraryPath">installLibraryPath</a></code>
<code><a href="#topic+installIncludePath">installIncludePath</a></code>
</p>

<hr>
<h2 id='loadLibrary'>
Load the Built Shared Library
</h2><span id='topic+loadLibrary'></span><span id='topic++5CS4method+7BloadLibrary+7D+7BBSysProject+7D'></span>

<h3>Description</h3>

<p>Calling <code>loadLibrary</code> will load the built library of the project specification in the S4 <code>BSysProject</code> object instance
into the R session.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  ## S4 method for signature 'BSysProject'
loadLibrary(.Object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loadLibrary_+3A_.object">.Object</code></td>
<td>

<p><code>.Object</code> is an object instance of class <code>BSysProject</code> that describes the code project.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Internally this method delagates to <code>dyn.load</code>. Refer to the doucmentation of <code><a href="base.html#topic+dyn.load">dyn.load</a></code> for further details.
</p>


<h3>Value</h3>

<p>returns an object of class <code>DLLInfo</code>.
</p>


<h3>Note</h3>

<p>see <code><a href="#topic+BuildSys-package">BuildSys-package</a></code> for examples of use.
</p>


<h3>Author(s)</h3>

<p>Paavo Jumppanen [aut, cre]
</p>
<p>Maintainer: Paavo Jumppanen &lt;paavo.jumppanen@csiro.au&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+unloadLibrary">unloadLibrary</a></code>
<code><a href="base.html#topic+dyn.load">dyn.load</a></code>
</p>

<hr>
<h2 id='make'>
Make the Shared Library
</h2><span id='topic+make'></span><span id='topic++5CS4method+7Bmake+7D+7BBSysProject+7D'></span>

<h3>Description</h3>

<p>Calling <code>make</code> will <em>build</em>, <em>clean</em> or <em>install</em> your C/C++ library.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  ## S4 method for signature 'BSysProject'
make(.Object, Operation = "", Debug = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_+3A_.object">.Object</code></td>
<td>

<p>S4 <code>BSysProject</code> object instance defining the library to be made. See <code><a href="#topic+BuildSys-package">BuildSys-package</a></code> for more information.
</p>
</td></tr>
<tr><td><code id="make_+3A_operation">Operation</code></td>
<td>

<p>the <code>make</code> operation to be carried out. Can be one of,
</p>

<ul>
<li><p><code>""</code> build the library by compiling and linking all source files
</p>
</li>
<li><p><code>"clean"</code> clean the library by deleting all object files (<code>.o</code> files) and the library itself (<code>.dll</code> or <code>.so</code> files)
</p>
</li>
<li><p><code>"install"</code> copy the built library file and/or header files to the install locations (see <code><a href="#topic+initProjectFromFolder">initProjectFromFolder</a></code> and <code><a href="#topic+BuildSys-package">BuildSys-package</a></code>)
</p>
</li></ul>

</td></tr>
<tr><td><code id="make_+3A_debug">Debug</code></td>
<td>

<p>A <code>Boolean</code> indicating whether to make a debug build. If <code>NULL</code> the <code>IsDebug</code> attribute in the <code>BSysProject</code> determines
if a debug build is being made. If non-null the <code>IsDebug</code> attribute is updated using the <code>Debug</code> argument.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calling <code>make</code> results in the project described by the <code>Object</code> instance being transformed into a <em>GNU makefile</em> and then
GNU make being called with the appropriate operation as determined by the <code>Operation</code> argument. The makefile will be
written to the sub-folder specified by the <code>ObjName</code> attribute of the <code>Object</code> instance. If the makefile already exists it
will only be re-created if the existing one in not in sync with the project definition. This is determined by an <em>md5 digest</em> of
the project definition which is stored as the header comment line in the makefile. If the makefile is re-written then a <em>make clean</em>
operation will be automatically carried out to ensure the built library remains in sync with the makefile.
</p>


<h3>Value</h3>

<p>This method returns an updated S4 <code>BSysProject</code> object instance. If the any change to <code>Debug</code> state is to be preserved then the
returned result should be assigned to the calling <code>BSysProject</code> object instance passed in the <code>Object</code> argument.
</p>


<h3>Note</h3>

<p>see <code><a href="#topic+BuildSys-package">BuildSys-package</a></code> for examples of use.
</p>


<h3>Author(s)</h3>

<p>Paavo Jumppanen [aut, cre]
</p>
<p>Maintainer: Paavo Jumppanen &lt;paavo.jumppanen@csiro.au&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+buildMakefile">buildMakefile</a></code>
<code><a href="#topic+initProjectFromFolder">initProjectFromFolder</a></code>
<code><a href="#topic+BuildSys-package">BuildSys-package</a></code>
</p>

<hr>
<h2 id='objPath'>
Get the Path to the Project Object Files
</h2><span id='topic+objPath'></span><span id='topic++5CS4method+7BobjPath+7D+7BBSysProject+7D'></span>

<h3>Description</h3>

<p>Calling <code>objPath</code> will return the fully qualified path to the object
file folder of the project specification in the S4 <code>BSysProject</code> object instance.
The object file folder will contain the makefile and compiled (object) <code>.o</code> files as
well as the linked shared library.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  ## S4 method for signature 'BSysProject'
objPath(.Object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="objPath_+3A_.object">.Object</code></td>
<td>

<p><code>.Object</code> is an object instance of class <code>BSysProject</code> that describes the code project.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns the fully qualified path to the object file folder of the project specification.
</p>


<h3>Note</h3>

<p>see <code><a href="#topic+BuildSys-package">BuildSys-package</a></code> for examples of use.
</p>


<h3>Author(s)</h3>

<p>Paavo Jumppanen [aut, cre]
</p>
<p>Maintainer: Paavo Jumppanen &lt;paavo.jumppanen@csiro.au&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+libraryPath">libraryPath</a></code>
<code><a href="#topic+sourcePath">sourcePath</a></code>
<code><a href="#topic+includePath">includePath</a></code>
<code><a href="#topic+installLibraryPath">installLibraryPath</a></code>
<code><a href="#topic+installIncludePath">installIncludePath</a></code>
</p>

<hr>
<h2 id='sourcePath'>
Get the Path to the Project Source Files
</h2><span id='topic+sourcePath'></span><span id='topic++5CS4method+7BsourcePath+7D+7BBSysProject+7D'></span>

<h3>Description</h3>

<p>Calling <code>sourcePath</code> will return the fully qualified path to the source
file folder of the project specification in the S4 <code>BSysProject</code> object instance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  ## S4 method for signature 'BSysProject'
sourcePath(.Object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sourcePath_+3A_.object">.Object</code></td>
<td>

<p><code>.Object</code> is an object instance of class <code>BSysProject</code> that describes the code project.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns the fully qualified path to the source file folder of the project specification.
</p>


<h3>Note</h3>

<p>see <code><a href="#topic+BuildSys-package">BuildSys-package</a></code> for examples of use.
</p>


<h3>Author(s)</h3>

<p>Paavo Jumppanen [aut, cre]
</p>
<p>Maintainer: Paavo Jumppanen &lt;paavo.jumppanen@csiro.au&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+libraryPath">libraryPath</a></code>
<code><a href="#topic+includePath">includePath</a></code>
<code><a href="#topic+objPath">objPath</a></code>
<code><a href="#topic+installLibraryPath">installLibraryPath</a></code>
<code><a href="#topic+installIncludePath">installIncludePath</a></code>
</p>

<hr>
<h2 id='unloadLibrary'>
Unload the Built Shared Library
</h2><span id='topic+unloadLibrary'></span><span id='topic++5CS4method+7BunloadLibrary+7D+7BBSysProject+7D'></span>

<h3>Description</h3>

<p>Calling <code>unloadLibrary</code> will unload the built library of the project specification in the S4 <code>BSysProject</code> object instance
from the R session.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  ## S4 method for signature 'BSysProject'
unloadLibrary(.Object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="unloadLibrary_+3A_.object">.Object</code></td>
<td>

<p><code>.Object</code> is an object instance of class <code>BSysProject</code> that describes the code project.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Internally this method delagates to <code>dyn.unload</code>. Refer to the doucmentation of <code><a href="base.html#topic+dyn.unload">dyn.unload</a></code> for further details.
</p>


<h3>Value</h3>

<p>this method has no return value.
</p>


<h3>Note</h3>

<p>see <code><a href="#topic+BuildSys-package">BuildSys-package</a></code> for examples of use.
</p>


<h3>Author(s)</h3>

<p>Paavo Jumppanen [aut, cre]
</p>
<p>Maintainer: Paavo Jumppanen &lt;paavo.jumppanen@csiro.au&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+loadLibrary">loadLibrary</a></code>
<code><a href="base.html#topic+dyn.unload">dyn.unload</a></code>
</p>

<hr>
<h2 id='vcDebug'>
Debug the Shared Library
</h2><span id='topic+vcDebug'></span><span id='topic++5CS4method+7BvcDebug+7D+7BBSysProject+7D'></span>

<h3>Description</h3>

<p>Calling <code>vcDebug</code> will initiate a debug enabled <em>Microsoft Visual Code</em> instance
that can be use as a GUI debugger of your C/C++ code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  ## S4 method for signature 'BSysProject'
vcDebug(.Object, LaunchEditor=TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vcDebug_+3A_.object">.Object</code></td>
<td>

<p><code>BSysProject</code> object instance defining the library to be debugged. See <code><a href="#topic+BuildSys-package">BuildSys-package</a></code> for more information.
</p>
</td></tr>
<tr><td><code id="vcDebug_+3A_launcheditor">LaunchEditor</code></td>
<td>

<p><code>LaunchEditor</code> is a reserved argument that should not be used by the user. A call to it with <code>LaunchEditor=FALSE</code> is used 
in the <em>.Rprofile</em> file for the debug R session to do the necessary tasks to initialise the R session state.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>vcDebug</code> creates the necessary <code>c_cpp_properties.json</code> and <code>launch.json</code> files needed for <em>Microsoft Visual Code</em>
to effectively debug the project dynamic library and launches an instance of <em>Visual Code</em>. It is assumed that the dynamic
library has already been compiled with <code><a href="#topic+make">make</a></code> and <code>Debug</code> support enabled. R needs to be configured to be able to build
C/C++ libraries (RTools installed on Windows) and it is assumed that <em>Microsoft Visual Code</em> is installed. These requirements
are discussed at length in <code><a href="#topic+BuildSys-package">BuildSys-package</a></code>.
</p>
<p>Within <em>Visual Code</em> you can open the source file/s of your library, set breakpoints and run a debug session. To run a debug
session select the <em>run/Start Debugging</em> menu item. Doing so will result in a new instance of <em>R</em> being launched which contains
the same environment (including loaded packages and loaded dynamic libraries) as the parent <em>R</em> session where <code>vcDebug</code> was first
called. This <em>R</em> session is your <em>sandbox</em> to safely debug your library in and leaves the parent <em>R</em> session safe from loss should
your code crash <em>R</em> completely.
</p>
<p>Debugging a new library will typically require some <em>R</em> setup code to be executed before using and/or testing it. With <code>BuildSys</code> you 
should perform this initial setup of <em>R</em> in the parent <em>R</em> session before calling <code>vcDebug</code> so that you never have to initialise 
<em>R</em> in your debug session. The debug <em>R</em> session will inherit the state of the parent <em>R</em> session at the time that <code>vcDebug</code> 
was called.
</p>


<h3>Value</h3>

<p>this method returns no value.
</p>


<h3>Note</h3>

<p>see <code><a href="#topic+BuildSys-package">BuildSys-package</a></code> for examples of use.
</p>
<p>If the absolute path to source and dynamic library files contains spaces then debugging in <em>Visual Code</em> fails to function correctly.
To ensure code is debuggable users will need to avoid putting code in folders with whitespace in the folder names.
</p>


<h3>Author(s)</h3>

<p>Paavo Jumppanen [aut, cre]
</p>
<p>Maintainer: Paavo Jumppanen &lt;paavo.jumppanen@csiro.au&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+initProjectFromFolder">initProjectFromFolder</a></code>
<code><a href="#topic+make">make</a></code>
<code><a href="#topic+BuildSys-package">BuildSys-package</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
