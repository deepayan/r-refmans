<!DOCTYPE html><html><head><title>Help for package ivitr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ivitr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#dt_Rouse'><p>Rouse (1995) dataset</p></a></li>
<li><a href='#estimate_BP_bound'><p>Estimate the Balke-Pearl bound for each instance in a dataset</p></a></li>
<li><a href='#estimate_Sid_bound'><p>Estimate the partial identification bound as in Siddique (2013, JASA)</p>
for each instance in a dataset</a></li>
<li><a href='#IV_PILE'><p>Estimate an IV-optimal individualized treatment rule</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Estimate IV-Optimal Individualized Treatment Rules</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Author:</td>
<td>Bo Zhang</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Bo Zhang &lt;bozhan@wharton.upenn.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A method that estimates
    an IV-optimal individualized treatment rule. An individualized
    treatment rule is said to be IV-optimal if it minimizes the 
    maximum risk with respect to the putative IV and the set of
    IV identification assumptions. Please refer to 
    &lt;<a href="https://doi.org/10.48550/arXiv.2002.02579">doi:10.48550/arXiv.2002.02579</a>&gt; for more details on the methodology and 
    some theory underpinning the method. Function IV-PILE() uses
    functions in the package 'locClass'. Package 'locClass' can be
    accessed and installed from the 'R-Forge' repository via the following link: 
    <a href="https://r-forge.r-project.org/projects/locclass/">https://r-forge.r-project.org/projects/locclass/</a>.
    Alternatively, one can install the package by entering the following in R:
    'install.packages("locClass", repos="<a href="http://R-Forge.R-project.org">http://R-Forge.R-project.org</a>")'.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>locClass</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, nnet, randomForest, dplyr, rlang</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-09-03 19:15:08 UTC; ASUS</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-09-11 08:40:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='dt_Rouse'>Rouse (1995) dataset</h2><span id='topic+dt_Rouse'></span>

<h3>Description</h3>

<p>Variables of the dataset is as follows:
</p>

<dl>
<dt>educ86</dt><dd><p>Years of education since 1986.</p>
</dd>
<dt>twoyr</dt><dd><p>Attending a two-year college immediately after high school.</p>
</dd>
<dt>female</dt><dd><p>Gender: 1 if female and 0 otherwise.</p>
</dd>
<dt>black</dt><dd><p>Race: 1 if African American and 0 otherwise.</p>
</dd>
<dt>hispanic</dt><dd><p>Race: 1 if Hispanic and 0 otherwise.</p>
</dd>
<dt>bytest</dt><dd><p>Test score.</p>
</dd>
<dt>dadsome</dt><dd><p>Dad's education: some college.</p>
</dd>
<dt>dadcoll</dt><dd><p>Dad's education: college.</p>
</dd>
<dt>momsome</dt><dd><p>Mom's education: some college.</p>
</dd>
<dt>momcoll</dt><dd><p>Mom's education: college.</p>
</dd>
<dt>fincome</dt><dd><p>Family income.</p>
</dd>
<dt>fincmiss</dt><dd><p>Missingness indicator for family income.</p>
</dd>
<dt>tuition2</dt><dd><p>Average state two-year college tuition.</p>
</dd>
<dt>tuition4</dt><dd><p>Average state four-year college tuition.</p>
</dd>
<dt>dist2yr</dt><dd><p>Distance to the nearest two-year college.</p>
</dd>
<dt>dist4yr</dt><dd><p>Distance to the nearest four-year college.</p>
</dd>
</dl>



<h3>Usage</h3>

<pre><code class='language-R'>data(dt_Rouse)
</code></pre>


<h3>Format</h3>

<p>A data frame with 4437 rows and 16 columns.
</p>


<h3>Source</h3>

<p>ss
</p>

<hr>
<h2 id='estimate_BP_bound'>Estimate the Balke-Pearl bound for each instance in a dataset</h2><span id='topic+estimate_BP_bound'></span>

<h3>Description</h3>

<p><code>estimate_BP_bound</code> estimates the Balke-Pearl bound for
each instance in the input dataset with a binary IV, observed
covariates, a binary treatment indicator, and a binary outcome.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_BP_bound(dt, method = "rf", nodesize = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="estimate_BP_bound_+3A_dt">dt</code></td>
<td>
<p>A dataframe whose first column is a binary IV 'Z', followed
by q columns of observed covariates, followed by a binary
treatment indicator 'A', and finally followed by a binary
outcome 'Y'. The dataset has q+3 columns in total.</p>
</td></tr>
<tr><td><code id="estimate_BP_bound_+3A_method">method</code></td>
<td>
<p>A character string indicator the method used to estimate
each constituent conditional probability of the
Balke-Pearl bound. Users can choose to fit multinomial
regression by setting method = 'multinom', and random
forest by setting method = 'rf'.</p>
</td></tr>
<tr><td><code id="estimate_BP_bound_+3A_nodesize">nodesize</code></td>
<td>
<p>Node size to be used in a random forest algorithm if
method is set to 'rf'. The default value is set to 5.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The original dataframe with two additional columns: L and U.
L indicates the Balke-Pearl lower bound and U is the Balke-Pearl
upper bound.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>attach(dt_Rouse)
# Construct an IV out of differential distance to two-year versus
# four-year college. Z = 1 if the subject lives not farther from
# a 4-year college compared to a 2-year college.
Z = (dist4yr &lt;= dist2yr) + 0

# Treatment A = 1 if the subject attends a 4-year college and 0
# otherwise.
A = 1 - twoyr

# Outcome Y = 1 if the subject obtained a bachelor's degree
Y = (educ86 &gt;= 16) + 0

# Prepare the dataset
dt = data.frame(Z, female, black, hispanic, bytest, dadsome,
     dadcoll, momsome, momcoll, fincome, fincmiss, A, Y)

# Calculate the Balke-Pearl bound by estimating each constituent
# conditional probability p(Y = y, A = a | Z, X) with a random
# forest.
dt_with_BP_bound_rf = estimate_BP_bound(dt, method = 'rf', nodesize = 5)

# Calculate the Balke-Pearl bound by estimating each constituent
# conditional probability p(Y = y, A = a | Z, X) with a multinomial
# regression.
dt_with_BP_bound_multinom = estimate_BP_bound(dt, method = 'multinom')

</code></pre>

<hr>
<h2 id='estimate_Sid_bound'>Estimate the partial identification bound as in Siddique (2013, JASA)
for each instance in a dataset</h2><span id='topic+estimate_Sid_bound'></span>

<h3>Description</h3>

<p><code>estimate_Sid_bound</code> estimates the partial identification bound
for each instance in the input dataset with a binary IV, observed
covariates, a binary treatment indicator, and a binary outcome according
to Siddique (2013, JASA).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_Sid_bound(dt, method = "rf", nodesize = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="estimate_Sid_bound_+3A_dt">dt</code></td>
<td>
<p>A dataframe whose first column is a binary IV 'Z', followed
by q columns of observed covariates, followed by a binary
treatment indicator 'A', and finally followed by a binary
outcome 'Y'. The dataset has q+3 columns in total.</p>
</td></tr>
<tr><td><code id="estimate_Sid_bound_+3A_method">method</code></td>
<td>
<p>A character string indicator the method used to estimate
each constituent conditional probability of the partial
identification bound. Users can choose to fit multinomial
regression by setting method = 'multinom', and random
forest by setting method = 'rf'.</p>
</td></tr>
<tr><td><code id="estimate_Sid_bound_+3A_nodesize">nodesize</code></td>
<td>
<p>Node size to be used in a random forest algorithm if
method is set to 'rf'. The default value is set to 5.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The original dataframe with two additional columns: L and U.
L indicates the lower bound and U the upper bound as in
Siddique 2013
</p>


<h3>Examples</h3>

<pre><code class='language-R'>attach(dt_Rouse)
# Construct an IV out of differential distance to two-year versus
# four-year college. Z = 1 if the subject lives not farther from
# a 4-year college compared to a 2-year college.
Z = (dist4yr &lt;= dist2yr) + 0

# Treatment A = 1 if the subject attends a 4-year college and 0
# otherwise.
A = 1 - twoyr

# Outcome Y = 1 if the subject obtained a bachelor's degree
Y = (educ86 &gt;= 16) + 0

# Prepare the dataset
dt = data.frame(Z, female, black, hispanic, bytest, dadsome,
     dadcoll, momsome, momcoll, fincome, fincmiss, A, Y)

# Calculate the Siddique bound by estimating each constituent
# conditional probability p(Y = y, A = a | Z, X) with a random
# forest.
dt_with_Sid_bound_rf = estimate_Sid_bound(dt, method = 'rf', nodesize = 5)

# Calculate the Siddique bound by estimating each constituent
# conditional probability p(Y = y, A = a | Z, X) with a multinomial
# regression.
dt_with_Sid_bound_multinom = estimate_Sid_bound(dt, method = 'multinom')

</code></pre>

<hr>
<h2 id='IV_PILE'>Estimate an IV-optimal individualized treatment rule</h2><span id='topic+IV_PILE'></span>

<h3>Description</h3>

<p><code>IV_PILE</code> estimates an IV-optimal individualized treatment
rule given a dataset with estimated partial identification intervals
for each instance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>IV_PILE(dt, kernel = "linear", C = 1, sig = 1/(ncol(dt) - 5))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="IV_PILE_+3A_dt">dt</code></td>
<td>
<p>A dataframe whose first column is a binary IV 'Z', followed
by q columns of observed covariates, a binary
treatment indicator 'A', a binary outcome 'Y',
lower endpoint of the partial identification interval 'L',
and upper endpoint of the partial identification interval 'U'.
The dataset has q+5 columns in total.</p>
</td></tr>
<tr><td><code id="IV_PILE_+3A_kernel">kernel</code></td>
<td>
<p>The kernel used in the weighted SVM algorithm. The user
may choose between 'linear' (linear kernel) and
'radial' (Gaussian RBF kernel).</p>
</td></tr>
<tr><td><code id="IV_PILE_+3A_c">C</code></td>
<td>
<p>Cost of violating the constraint. This is the parameter C in
the Lagrange formulation.</p>
</td></tr>
<tr><td><code id="IV_PILE_+3A_sig">sig</code></td>
<td>
<p>Sigma in the Gaussian RBF kernel. Default is set to
1/dimension of covariates, i.e., 1/q. This parameter
is not relevant for linear kernel.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of the type <code>wsvm</code>, inheriting from <code>svm</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# It is necessary to install the package locClass in order
# to run the following code.

attach(dt_Rouse)
# Construct an IV out of differential distance to two-year versus
# four-year college. Z = 1 if the subject lives not farther from
# a 4-year college compared to a 2-year college.
Z = (dist4yr &lt;= dist2yr) + 0

# Treatment A = 1 if the subject attends a 4-year college and 0
# otherwise.
A = 1 - twoyr

# Outcome Y = 1 if the subject obtained a bachelor's degree
Y = (educ86 &gt;= 16) + 0

# Prepare the dataset
dt = data.frame(Z, female, black, hispanic, bytest, dadsome,
     dadcoll, momsome, momcoll, fincome, fincmiss, A, Y)

# Estimate the Balke-Pearl bound by estimating each constituent
# conditional probability p(Y = y, A = a | Z, X) with a multinomial
# regression.
dt_with_BP_bound_multinom = estimate_BP_bound(dt, method = 'multinom')

# Estimate the IV-optimal individualized treatment rule using a
# linear kernel, under the putative IV and the Balke-Pearl bound.


iv_itr_BP_linear = IV_PILE(dt_with_BP_bound_multinom, kernel = 'linear')

## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
