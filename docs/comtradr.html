<!DOCTYPE html><html><head><title>Help for package comtradr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {comtradr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#comtradr-package'><p>comtradr: Interface with the United Nations 'Comtrade' API</p></a></li>
<li><a href='#country_codes'><p>Country codes</p></a></li>
<li><a href='#ct_commodity_db_type'><p>ct_commodity_db_type</p></a></li>
<li><a href='#ct_commodity_lookup'><p>UN Comtrade commodities database query</p></a></li>
<li><a href='#ct_country_lookup'><p>ct_country_lookup</p></a></li>
<li><a href='#ct_get_data'><p>Get trade data from the UN Comtrade API</p></a></li>
<li><a href='#ct_get_ref_table'><p>Get reference table from package data</p></a></li>
<li><a href='#ct_get_remaining_hourly_queries'><p>ct_get_remaining_hourly_queries</p></a></li>
<li><a href='#ct_get_reset_time'><p>ct_get_reset_time</p></a></li>
<li><a href='#ct_pretty_cols'><p>ct_pretty_cols</p></a></li>
<li><a href='#ct_register_token'><p>ct_register_token</p></a></li>
<li><a href='#ct_search'><p>ct_search</p></a></li>
<li><a href='#ct_update_databases'><p>ct_update_databases</p></a></li>
<li><a href='#ct_use_pretty_cols'><p>ct_use_pretty_cols</p></a></li>
<li><a href='#get_primary_comtrade_key'><p>get_primary_comtrade_key</p></a></li>
<li><a href='#set_primary_comtrade_key'><p>Set your primary Comtrade API key in the environment variable</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Interface with the United Nations 'Comtrade' API</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.0.0</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Paul Bochtler &lt;paulbochtler.gh@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Interface with and extract data from the United Nations 'Comtrade' 
  API <a href="https://comtradeplus.un.org/">https://comtradeplus.un.org/</a>. 'Comtrade' provides country level shipping 
  data for a variety of commodities, these functions allow for easy API query 
  and data returned as a tidy data frame.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>lifecycle, fs, readr, askpass, cli, httr2, rlang, stringr,
poorman, lubridate, purrr, rappdirs, memoise, cachem</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, dplyr, ggplot2, httptest2, knitr, rmarkdown, spelling,
testthat (&ge; 3.0.0), callr</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.ropensci.org/comtradr/">https://docs.ropensci.org/comtradr/</a>,
<a href="https://github.com/ropensci/comtradr">https://github.com/ropensci/comtradr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/comtradr/issues">https://github.com/ropensci/comtradr/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-05 23:48:53 UTC; paulbochtler</td>
</tr>
<tr>
<td>Author:</td>
<td>Paul Bochtler <a href="https://orcid.org/0000-0002-9146-6185"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Harriet Goers [aut],
  Chris Muir [aut],
  Alicia Schep <a href="https://orcid.org/0000-0002-3915-0618"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [rev] (Alicia reviewed the package for rOpenSci, see
    https://github.com/ropensci/onboarding/issues/141),
  Rafael Hellwig <a href="https://orcid.org/0000-0002-3092-3493"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [rev] (Rafael reviewed the package for rOpenSci, see
    https://github.com/ropensci/onboarding/issues/141),
  Ernest Guevarra <a href="https://orcid.org/0000-0002-4887-4415"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [rev] (Ernest reviewed the package for rOpenSci, see
    https://github.com/ropensci/software-review/issues/613),
  Nicholas Potter <a href="https://orcid.org/0000-0002-3410-3732"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [rev] (Nicholas reviewed the package for rOpenSci, see
    https://github.com/ropensci/software-review/issues/613),
  Juergen Amann [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-06 18:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='comtradr-package'>comtradr: Interface with the United Nations 'Comtrade' API</h2><span id='topic+comtradr'></span><span id='topic+comtradr-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Interface with and extract data from the United Nations 'Comtrade' API <a href="https://comtradeplus.un.org/">https://comtradeplus.un.org/</a>. 'Comtrade' provides country level shipping data for a variety of commodities, these functions allow for easy API query and data returned as a tidy data frame.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Paul Bochtler <a href="mailto:paulbochtler.gh@gmail.com">paulbochtler.gh@gmail.com</a> (<a href="https://orcid.org/0000-0002-9146-6185">ORCID</a>) [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Harriet Goers <a href="mailto:hgoers@umd.edu">hgoers@umd.edu</a>
</p>
</li>
<li><p> Chris Muir <a href="mailto:chrismuirRVA@gmail.com">chrismuirRVA@gmail.com</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Alicia Schep (<a href="https://orcid.org/0000-0002-3915-0618">ORCID</a>) (Alicia reviewed the package for rOpenSci, see https://github.com/ropensci/onboarding/issues/141) [reviewer]
</p>
</li>
<li><p> Rafael Hellwig (<a href="https://orcid.org/0000-0002-3092-3493">ORCID</a>) (Rafael reviewed the package for rOpenSci, see https://github.com/ropensci/onboarding/issues/141) [reviewer]
</p>
</li>
<li><p> Ernest Guevarra (<a href="https://orcid.org/0000-0002-4887-4415">ORCID</a>) (Ernest reviewed the package for rOpenSci, see https://github.com/ropensci/software-review/issues/613) [reviewer]
</p>
</li>
<li><p> Nicholas Potter (<a href="https://orcid.org/0000-0002-3410-3732">ORCID</a>) (Nicholas reviewed the package for rOpenSci, see https://github.com/ropensci/software-review/issues/613) [reviewer]
</p>
</li>
<li><p> Juergen Amann [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://docs.ropensci.org/comtradr/">https://docs.ropensci.org/comtradr/</a>
</p>
</li>
<li> <p><a href="https://github.com/ropensci/comtradr">https://github.com/ropensci/comtradr</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ropensci/comtradr/issues">https://github.com/ropensci/comtradr/issues</a>
</p>
</li></ul>


<hr>
<h2 id='country_codes'>Country codes</h2><span id='topic+country_codes'></span>

<h3>Description</h3>

<p>A full dataset of all reporter and partner codes available
in the UN Comtrade database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>country_codes
</code></pre>


<h3>Format</h3>

<p><code>country_codes</code>
A dataframe with 312 rows and eight columns:
</p>

<dl>
<dt>id</dt><dd><p>Unique country code.</p>
</dd>
<dt>country</dt><dd><p>Name of the country (in English).</p>
</dd>
<dt>iso_3</dt><dd><p>The country's ISO 3 code.</p>
</dd>
<dt>entry_year</dt><dd><p>The country's entry into
the international system or 1900 (whichever is largest).</p>
</dd>
<dt>exit_year</dt><dd><p>The country's exit from the
international system, if applicable.</p>
</dd>
<dt>group</dt><dd><p>Indicates whether the entity is a
group of countries. For example, ASEAN or the European Union.</p>
</dd>
<dt>reporter</dt><dd><p>Indicates whether the country is a
reporter in the UN Comtrade database.</p>
</dd>
<dt>partner</dt><dd><p>Indicates whether the country can be
reported on by others in the UN Comtrade database. Not all
partners are reporters. For example,
the World cannot report its trade values.</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://comtradeapi.un.org/files/v1/app/reference/Reporters.json">https://comtradeapi.un.org/files/v1/app/reference/Reporters.json</a>
and <a href="https://comtradeapi.un.org/files/v1/app/reference/partnerAreas.json">https://comtradeapi.un.org/files/v1/app/reference/partnerAreas.json</a>
</p>

<hr>
<h2 id='ct_commodity_db_type'>ct_commodity_db_type</h2><span id='topic+ct_commodity_db_type'></span>

<h3>Description</h3>

<p>This function is deprecated. There is currently
no alternative for this function.
<a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ct_commodity_db_type(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ct_commodity_db_type_+3A_...">...</code></td>
<td>
<p>Used to catch all possible arguments that users
have supplied to this function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>depreciation error
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# no examples because only legacy function

</code></pre>

<hr>
<h2 id='ct_commodity_lookup'>UN Comtrade commodities database query</h2><span id='topic+ct_commodity_lookup'></span>

<h3>Description</h3>

<p>The Comtrade API requires that searches for specific commodities be done
using commodity codes. This is a helper function for querying the
Comtrade commodity database. It takes as input a vector of
commodities or commodity codes. Output is a list or vector of commodity
descriptions or codes associated with the input search_terms. For use with
the UN Comtrade API, full API docs can be found at
<a href="https://unstats.un.org/wiki/display/comtrade/">https://unstats.un.org/wiki/display/comtrade/</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ct_commodity_lookup(
  search_terms,
  return_code = FALSE,
  commodity_classification = "HS",
  type = "goods",
  return_char = FALSE,
  verbose = TRUE,
  ignore.case = TRUE,
  update = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ct_commodity_lookup_+3A_search_terms">search_terms</code></td>
<td>
<p>Commodity names or commodity codes, as a char or numeric
vector.</p>
</td></tr>
<tr><td><code id="ct_commodity_lookup_+3A_return_code">return_code</code></td>
<td>
<p>Logical, if set to FALSE, the function will return a
set of commodity descriptions along with commodity codes (as a single
string for each match found), if set to TRUE it will return only the
commodity codes. Default value is FALSE.</p>
</td></tr>
<tr><td><code id="ct_commodity_lookup_+3A_commodity_classification">commodity_classification</code></td>
<td>
<p>The trade classification scheme.
Possible values for goods: <code>c('HS','S1','S2','S3','S4','SS','B4','B5')</code>;
for services: <code>c('EB02','EB10','EB10S','EB')</code>. Default: 'HS'.</p>
</td></tr>
<tr><td><code id="ct_commodity_lookup_+3A_type">type</code></td>
<td>
<p>The type of returned trade data.
Possible values: 'goods' for trade in goods,
'services' for trade in services. Default: 'goods'.</p>
</td></tr>
<tr><td><code id="ct_commodity_lookup_+3A_return_char">return_char</code></td>
<td>
<p>Logical, if set to FALSE, the function will return the
matches as a named list, if set to TRUE it will return them as a character
vector. Default value is FALSE.</p>
</td></tr>
<tr><td><code id="ct_commodity_lookup_+3A_verbose">verbose</code></td>
<td>
<p>Logical, if set to TRUE, a warning message will print to
console if any of the elements of input &quot;search_terms&quot; returned no matches
(message will indicate which elements returned no data). Default is TRUE.</p>
</td></tr>
<tr><td><code id="ct_commodity_lookup_+3A_ignore.case">ignore.case</code></td>
<td>
<p>logical, to be passed along to arg ignore.case within
<code><a href="base.html#topic+grepl">grepl</a></code>. Default value is TRUE.</p>
</td></tr>
<tr><td><code id="ct_commodity_lookup_+3A_update">update</code></td>
<td>
<p>If TRUE, downloads possibly updated reference tables
from the UN. Default: FALSE.</p>
</td></tr>
<tr><td><code id="ct_commodity_lookup_+3A_...">...</code></td>
<td>
<p>additional args to be passed along to <code><a href="base.html#topic+grepl">grepl</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function uses regular expressions (regex) to find matches
within the commodity DB. This means it will treat as a match any commodity
description that contains the input search term. For more on using regex
within R, see
<a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/regex.html">https://stat.ethz.ch/R-manual/R-devel/library/base/html/regex.html</a>
</p>


<h3>Value</h3>

<p>A list or character vector of commodity descriptions and/or
commodity codes that are matches with the elements of &quot;search_terms&quot;.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+grepl">grepl</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
comtradr::ct_commodity_lookup("wine")

</code></pre>

<hr>
<h2 id='ct_country_lookup'>ct_country_lookup</h2><span id='topic+ct_country_lookup'></span>

<h3>Description</h3>

<p>This function is deprecated. You can <code style="white-space: pre;">&#8288;use country_codes&#8288;</code>
to return a dataset with all possible country codes, but in general the
specification of iso 3 codes makes a look-up unnecessary.
<a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ct_country_lookup(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ct_country_lookup_+3A_...">...</code></td>
<td>
<p>Used to catch all possible arguments that users
have supplied to this function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>depreciation error
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# no examples because only legacy function

</code></pre>

<hr>
<h2 id='ct_get_data'>Get trade data from the UN Comtrade API</h2><span id='topic+ct_get_data'></span>

<h3>Description</h3>

<p>This function queries the UN Comtrade API to retrieve
international trade data.
It allows for detailed specification of the query,
including the type of data (goods or services),
frequency (annual or monthly), commodity classification,
flow direction, and more.
By providing <code>everything</code> for certain parameters,
you can query all possible values.
The function is opinionated in that it already verifies certain parameters
for you and is more than a pure wrapper around the API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ct_get_data(
  type = "goods",
  frequency = "A",
  commodity_classification = "HS",
  commodity_code = "TOTAL",
  flow_direction = c("Import", "Export", "Re-export", "Re-import"),
  reporter = "all_countries",
  partner = "World",
  start_date = NULL,
  end_date = NULL,
  process = TRUE,
  tidy_cols = TRUE,
  verbose = FALSE,
  primary_token = get_primary_comtrade_key(),
  mode_of_transport = "TOTAL modes of transport",
  partner_2 = "World",
  customs_code = "C00",
  update = FALSE,
  requests_per_second = 10/60,
  extra_params = NULL,
  cache = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ct_get_data_+3A_type">type</code></td>
<td>
<p>The type of returned trade data.
Possible values: 'goods' for trade in goods,
'services' for trade in services. Default: 'goods'.</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_frequency">frequency</code></td>
<td>
<p>The frequency of returned trade data.
Possible values: 'A' for annual data, 'M' for monthly data. Default: 'A'.</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_commodity_classification">commodity_classification</code></td>
<td>
<p>The trade classification scheme.
Possible values for goods: <code>c('HS','S1','S2','S3','S4','SS','B4','B5')</code>;
for services: <code>c('EB02','EB10','EB10S','EB')</code>. Default: 'HS'.</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_commodity_code">commodity_code</code></td>
<td>
<p>The commodity code(s) or <code>everything</code> for all possible
codes. See <code>comtradr::ct_get_ref_table('HS')</code> for possible values.
Default: 'TOTAL' (sum of all commodities).</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_flow_direction">flow_direction</code></td>
<td>
<p>The direction of trade flows or <code>everything</code>.
Possible values can be found in <code>ct_get_ref_table('flow_direction')</code>. These
are implemented case-insensitive, 'import' and 'Import' are equivalent.
Default: c('import','export','re-export','re-import').</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_reporter">reporter</code></td>
<td>
<p>Reporter ISO3 code(s), <code>everything</code> or <code>all_countries</code>.
See <code>comtradr::country_codes</code> or <code>comtradr::ct_get_ref_table('reporter')</code>
for possible values. <code>all_countries</code> returns all countries without aggregates
<code>everything</code> returns all possible parameters. Default: 'all_countries'.</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_partner">partner</code></td>
<td>
<p>Partner ISO3 code(s), <code>everything</code> or <code>all_countries</code>.
See <code>comtradr::country_codes</code> for possible values.
<code>all_countries</code> returns all countries without aggregates
<code>everything</code> returns all possible parameters, incl. aggregates like World.
Default: 'World' (all partners as an aggregate).</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_start_date">start_date</code></td>
<td>
<p>The start date of the query.
Format: <code>yyyy</code> for yearly, <code>yyyy-mm</code> for monthly.</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_end_date">end_date</code></td>
<td>
<p>The end date of the query.
Format: <code>yyyy</code> for yearly, <code>yyyy-mm</code> for monthly.
Max: 12 years after start date for annual data, one year for monthly data.</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_process">process</code></td>
<td>
<p>If TRUE, returns a data.frame with results.
If FALSE, returns the raw httr2 request. Default: TRUE.</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_tidy_cols">tidy_cols</code></td>
<td>
<p>If TRUE, returns tidy column names.
If FALSE, returns raw column names. Default: TRUE.</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_verbose">verbose</code></td>
<td>
<p>If TRUE, sends status updates to the console.
If FALSE, runs functions quietly. Default: FALSE.</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_primary_token">primary_token</code></td>
<td>
<p>Your primary UN Comtrade API token.
Default: stored token from <code>comtradr::set_primary_comtrade_key</code>.</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_mode_of_transport">mode_of_transport</code></td>
<td>
<p>Text code of mode of transport or <code>everything</code> for
all possible parameters.
See <code>ct_get_ref_table(dataset_id = 'mode_of_transport')</code> for possible values.
Default: 'TOTAL modes of transport' (TOTAL).</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_partner_2">partner_2</code></td>
<td>
<p>Partner 2 ISO3 code(s), <code>everything</code> or <code>all_countries</code>.
See <code>comtradr::country_codes</code> for possible values.
<code>all_countries</code> returns all countries without aggregates
<code>everything</code> returns all possible parameters, incl. aggregates like World.
Default: 'World' (all partners as an aggregate).</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_customs_code">customs_code</code></td>
<td>
<p>Customs Code ID or <code>everything</code> for all possible
parameters.
See <code>ct_get_ref_table(dataset_id = 'customs_code')</code> for possible values.
Default: 'C00' (TOTAL).</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_update">update</code></td>
<td>
<p>If TRUE, downloads possibly updated reference tables
from the UN. Default: FALSE.</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_requests_per_second">requests_per_second</code></td>
<td>
<p>Rate of requests per second executed,
usually specified as a fraction, e.g. 10/60 for 10 requests per minute,
see <code>req_throttle()</code> for details.</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_extra_params">extra_params</code></td>
<td>
<p>Additional parameters to the API, passed as query
parameters without checking. Please provide a named list to this parameter.
Default: NULL.</p>
</td></tr>
<tr><td><code id="ct_get_data_+3A_cache">cache</code></td>
<td>
<p>A logical value to determine, whether requests should be cached
or not. If set to True, <code>rappdirs::user_cache_dir()</code> is used
to determine the location of the cache. Use the .Renviron file to set the
R_USER_CACHE_DIR in order to change this location. Default: False.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The UN Comtrade database provides a repository of official international
trade statistics and relevant analytical tables.
It contains annual trade statistics starting from 1988
and monthly trade statistics since 2000 for goods data
</p>
<p>Parameters that accept <code>everything</code> will query all possible values.
For example, setting <code>commodity_code = 'everything'</code>
will retrieve data for all commodity codes.
This can be useful for broad queries but may result in large datasets.
</p>


<h3>Value</h3>

<p>A data.frame with trade data or,
if <code>process = F</code>, a httr2 response object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Query goods data for China's trade with Argentina and Germany in 2019
ct_get_data(
  type = "goods",
  commodity_classification = "HS",
  commodity_code = "TOTAL",
  reporter = "CHN",
  partner = c("ARG", "DEU"),
  start_date = "2019",
  end_date = "2019",
  flow_direction = "Import",
  partner_2 = "World",
  verbose = TRUE
)

# Query all commodity codes for China's imports from Germany in 2019
ct_get_data(
  commodity_code = "everything",
  reporter = "CHN",
  partner = "DEU",
  start_date = "2019",
  end_date = "2019",
  flow_direction = "Import"
)

# Query all commodity codes for China's imports from Germany
# from January to June of 2019
ct_get_data(
  commodity_code = "everything",
  reporter = "CHN",
  partner = "DEU",
  start_date = "2019",
  end_date = "2019",
  flow_direction = "import"
)

</code></pre>

<hr>
<h2 id='ct_get_ref_table'>Get reference table from package data</h2><span id='topic+ct_get_ref_table'></span>

<h3>Description</h3>

<p>The first time, the function will read from disk, the second time from the
environment. In the case of a necessary update the new data will be saved
to the environment for the current session.
You can use this table to look at the reference tables and if necessary
extract respective classification codes by hand. In general we would
recommend the function <code>ct_commodity_lookup</code> for this purpose.
It uses the present function in the backend.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ct_get_ref_table(dataset_id, update = FALSE, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ct_get_ref_table_+3A_dataset_id">dataset_id</code></td>
<td>
<p>The dataset ID, which is either partner,
reporter or a valid classification scheme.</p>
</td></tr>
<tr><td><code id="ct_get_ref_table_+3A_update">update</code></td>
<td>
<p>If TRUE, downloads possibly updated reference tables
from the UN. Default: FALSE.</p>
</td></tr>
<tr><td><code id="ct_get_ref_table_+3A_verbose">verbose</code></td>
<td>
<p>If TRUE, sends status updates to the console.
If FALSE, runs functions quietly. Default: FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function allows you to query most possible input parameters
that are listed by the Comtrade API. The following dataset_ids are permitted:
</p>

<ul>
<li><p> Datasets that contain codes for the <code>commodity_code</code> argument. The name is
the same as you would provide under <code>commodity_classification</code>.
</p>

<ul>
<li><p> 'HS' This is probably the most common classification for goods.
</p>
</li>
<li><p> 'B4'
</p>
</li>
<li><p> 'B5'
</p>
</li>
<li><p> 'EB02'
</p>
</li>
<li><p> 'EB10'
</p>
</li>
<li><p> 'EB10S'
</p>
</li>
<li><p> 'EB'
</p>
</li>
<li><p> 'S1'
</p>
</li>
<li><p> 'S2'
</p>
</li>
<li><p> 'S3'
</p>
</li>
<li><p> 'S4'
</p>
</li>
<li><p> 'SS'
</p>
</li></ul>

</li>
<li><p> 'reporter'
</p>
</li>
<li><p> 'partner'
</p>
</li>
<li><p> 'mode_of_transport'
</p>
</li>
<li><p> 'customs_code'
</p>
</li>
<li><p> 'flow_direction'
</p>
</li></ul>



<h3>Value</h3>

<p>a tidy dataset with a reference table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## get HS commodity table
ct_get_ref_table("HS")

## get reporter table
ct_get_ref_table("reporter")

</code></pre>

<hr>
<h2 id='ct_get_remaining_hourly_queries'>ct_get_remaining_hourly_queries</h2><span id='topic+ct_get_remaining_hourly_queries'></span>

<h3>Description</h3>

<p>This function is deprecated. There is no more reset
time, as the upper limit of 250 calls per day is enforced daily.
<a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ct_get_remaining_hourly_queries(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ct_get_remaining_hourly_queries_+3A_...">...</code></td>
<td>
<p>Used to catch all possible arguments that users
have supplied to this function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>depreciation error
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# no examples because only legacy function

</code></pre>

<hr>
<h2 id='ct_get_reset_time'>ct_get_reset_time</h2><span id='topic+ct_get_reset_time'></span>

<h3>Description</h3>

<p>This function is deprecated. There is no more reset
time, as the upper limit of 250 calls per day is enforced daily.
<a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ct_get_reset_time(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ct_get_reset_time_+3A_...">...</code></td>
<td>
<p>Used to catch all possible arguments that users
have supplied to this function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>depreciation error
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# no examples because only legacy function

</code></pre>

<hr>
<h2 id='ct_pretty_cols'>ct_pretty_cols</h2><span id='topic+ct_pretty_cols'></span>

<h3>Description</h3>

<p>A data.frame with a matched list of tidy and
untidy column names for the results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ct_pretty_cols
</code></pre>


<h3>Format</h3>

<p><code>country_codes</code>
A dataframe with 47 rows and twi columns:
</p>

<dl>
<dt>to</dt><dd><p>tidy columns</p>
</dd>
<dt>from</dt><dd><p>original column names</p>
</dd>
</dl>


<hr>
<h2 id='ct_register_token'>ct_register_token</h2><span id='topic+ct_register_token'></span>

<h3>Description</h3>

<p>This function is deprecated.
Please use  <code>set_primary_comtrade_key()</code> instead.
<a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ct_register_token(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ct_register_token_+3A_...">...</code></td>
<td>
<p>Used to catch all possible arguments that users
have supplied to this function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>depreciation error
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# no examples because only legacy function

</code></pre>

<hr>
<h2 id='ct_search'>ct_search</h2><span id='topic+ct_search'></span>

<h3>Description</h3>

<p>This function is deprecated Please use  <code>ct_get_data()</code> instead.
<a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ct_search(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ct_search_+3A_...">...</code></td>
<td>
<p>Used to catch all possible arguments that users
have supplied to this function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>depreciation error
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# no examples because only legacy function

</code></pre>

<hr>
<h2 id='ct_update_databases'>ct_update_databases</h2><span id='topic+ct_update_databases'></span>

<h3>Description</h3>

<p>This function is deprecated. Please use  <code>update</code>
parameter in the main <code>ct_get_data</code> function instead.
<a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ct_update_databases(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ct_update_databases_+3A_...">...</code></td>
<td>
<p>Used to catch all possible arguments that users
have supplied to this function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>depreciation error
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# no examples because only legacy function

</code></pre>

<hr>
<h2 id='ct_use_pretty_cols'>ct_use_pretty_cols</h2><span id='topic+ct_use_pretty_cols'></span>

<h3>Description</h3>

<p>This function is deprecated. Please use the <code>process</code>
argument in the main function instead.
<a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ct_use_pretty_cols(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ct_use_pretty_cols_+3A_...">...</code></td>
<td>
<p>Used to catch all possible arguments that users
have supplied to this function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>depreciation error
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# no examples because only legacy function

</code></pre>

<hr>
<h2 id='get_primary_comtrade_key'>get_primary_comtrade_key</h2><span id='topic+get_primary_comtrade_key'></span>

<h3>Description</h3>

<p>If you would like your Comtrade API key to persist in between sessions,
use <code>usethis::edit_r_environ()</code> to add the env variable COMTRADE_PRIMARY
to your environment file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_primary_comtrade_key()
</code></pre>


<h3>Value</h3>

<p>Gets your primary comtrade key from the environment
var COMTRADE_PRIMARY
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## get API key
get_primary_comtrade_key()

</code></pre>

<hr>
<h2 id='set_primary_comtrade_key'>Set your primary Comtrade API key in the environment variable</h2><span id='topic+set_primary_comtrade_key'></span>

<h3>Description</h3>

<p>If you would like your Comtrade API key to persist in between sessions,
use <code>usethis::edit_r_environ()</code> to add the env variable COMTRADE_PRIMARY
to your environment file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_primary_comtrade_key(key = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_primary_comtrade_key_+3A_key">key</code></td>
<td>
<p>Provide your primary comtrade key</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Saves your comtrade primary key in the environment.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## set API key
set_primary_comtrade_key("xxxxxc678ca4dbxxxxxxxx8285r3")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
