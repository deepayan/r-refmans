<!DOCTYPE html><html><head><title>Help for package SortedEffects</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {SortedEffects}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ca'><p>Empirical Classification Analysis (CA) and Inference</p></a></li>
<li><a href='#mortgage'><p>Mortgage Denial</p></a></li>
<li><a href='#plot.ca'><p>Distribution plotting</p></a></li>
<li><a href='#plot.spe'><p>Plot output of <code>spe</code> command. The x-axis limits are set to the</p>
specified range of percentile index.</a></li>
<li><a href='#plot.subpop'><p>Plot 2-dimensional projections of variables in interest.</p></a></li>
<li><a href='#spe'><p>Empirical Sorted Partial Effects (SPE) and Inference</p></a></li>
<li><a href='#subpop'><p>Inference on Most and Least Affected Groups</p></a></li>
<li><a href='#summary.ca'><p>Return the output of <code>ca</code> function.</p></a></li>
<li><a href='#summary.spe'><p>Tabulate the output of <code>spe</code> function.</p></a></li>
<li><a href='#summary.subpop'><p>Return the output of <code>subpop</code> function.</p></a></li>
<li><a href='#wage2015'><p>Wage Data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Estimation and Inference Methods for Sorted Causal Effects and
Classification Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>1.7.0</td>
</tr>
<tr>
<td>Author:</td>
<td>Shuowen Chen [aut, cre],
  Victor Chernozhukov [aut],
  Ivan Fernandez-Val [aut],
  Ye Luo [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Shuowen Chen &lt;swchen@bu.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Implements the estimation and inference methods for sorted causal effects and 
    classification analysis as in Chernozhukov, Fernandez-Val and Luo (2018) &lt;<a href="https://doi.org/10.3982%2FECTA14415">doi:10.3982/ECTA14415</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/shuowencs/SortedEffects">https://github.com/shuowencs/SortedEffects</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>boot, graphics, Hmisc, pbapply, parallel, quantreg, SparseM,
stats</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-03-22 02:04:11 UTC; shuowenchen</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-03-22 07:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='ca'>Empirical Classification Analysis (CA) and Inference</h2><span id='topic+ca'></span>

<h3>Description</h3>

<p><code>ca</code> conducts CA estimation and inference on user-specified objects of
interest: first (weighted) moment or (weighted) distribution. Users can use
<code>t</code> to specify variables in interest. When object of interest is
moment, use <code>cl</code> to specify whether want to see averages or difference
of the two groups.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ca(
  fm,
  data,
  method = c("ols", "logit", "probit", "QR"),
  var_type = c("binary", "continuous", "categorical"),
  var,
  compare,
  subgroup = NULL,
  samp_weight = NULL,
  taus = c(5:95)/100,
  u = 0.1,
  interest = c("moment", "dist"),
  t = c(1, 1, rep(0, dim(data)[2] - 2)),
  cl = c("both", "diff"),
  cat = NULL,
  alpha = 0.1,
  b = 500,
  parallel = FALSE,
  ncores = detectCores(),
  seed = 1,
  bc = TRUE,
  range_cb = c(1:99)/100,
  boot_type = c("nonpar", "weighted")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ca_+3A_fm">fm</code></td>
<td>
<p>Regression formula</p>
</td></tr>
<tr><td><code id="ca_+3A_data">data</code></td>
<td>
<p>The data in use: full sample or subpopulation in interset</p>
</td></tr>
<tr><td><code id="ca_+3A_method">method</code></td>
<td>
<p>Models to be used for estimating partial effects. Four
options: <code>"logit"</code> (binary response),
<code>"probit"</code> (binary response), <code>"ols"</code>
(interactive linear with additive errors), <code>"QR"</code>
(linear model with non-additive errors). Default is
<code>"ols"</code>.</p>
</td></tr>
<tr><td><code id="ca_+3A_var_type">var_type</code></td>
<td>
<p>The type of parameter in interest. Three options:
<code>"binary"</code>, <code>"categorical"</code>,
<code>"continuous"</code>. Default is <code>"binary"</code>.</p>
</td></tr>
<tr><td><code id="ca_+3A_var">var</code></td>
<td>
<p>Variable T in interset. Should be a character.</p>
</td></tr>
<tr><td><code id="ca_+3A_compare">compare</code></td>
<td>
<p>If parameter in interest is categorical, then user needs
to specify which two category to compare with. Should be
a 1 by 2 character vector. For example, if the two levels
to compare with is 1 and 3, then <code>c=("1", "3")</code>,
which will calculate partial effect from 1 to 3. To use
this option, users first need to specify <code>var</code> as
a factor variable.</p>
</td></tr>
<tr><td><code id="ca_+3A_subgroup">subgroup</code></td>
<td>
<p>Subgroup in interest. Default is <code>NULL</code>.
Specifcation should be a logical variable. For example,
suppose data contain indicator variable for women (female
if 1, male if 0). If users are interested in women SPE,
then users should specify
<code>subgroup = data[, "female"] == 1</code>.</p>
</td></tr>
<tr><td><code id="ca_+3A_samp_weight">samp_weight</code></td>
<td>
<p>Sampling weight of data. Input should be a n by 1 vector,
where n denotes sample size. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ca_+3A_taus">taus</code></td>
<td>
<p>Indexes for quantile regression. Default is
<code>c(5:95)/100</code>.</p>
</td></tr>
<tr><td><code id="ca_+3A_u">u</code></td>
<td>
<p>Percentile of most and least affected. Default is set to
be 0.1.</p>
</td></tr>
<tr><td><code id="ca_+3A_interest">interest</code></td>
<td>
<p>Generic objects in the least and most affected
subpopulations. Two options:
(1) <code>"moment"</code>: weighted mean of Z in the
u-least/most affected subpopulation.
(2) <code>"dist"</code>: distribution of Z in the u-least/most
affected subpopulation.
Default is <code>interest = "moment"</code>.</p>
</td></tr>
<tr><td><code id="ca_+3A_t">t</code></td>
<td>
<p>An index for ca object. Should be a 1 by ncol(data)
indicator vector. Users can either (1) specify names of
variables of interest directly, or (2) use 1 to indicate
the variable of interest. For example, total number of
variables is 5 and interested in the 1st and 3rd vars,
then specify <code>t = c(1, 0, 1, 0, 0)</code>.</p>
</td></tr>
<tr><td><code id="ca_+3A_cl">cl</code></td>
<td>
<p>If <code>moment = "interest"</code>, <code>cl</code> allows the user
to get the variables of interest (specified in <code>t</code>
option) of the most and least affected groups. The
default is <code>"both"</code>, which shows the variables of
the two groups; the alternative is <code>"diff"</code>, which
shows the difference of the two groups. The user can
use the <code><a href="#topic+summary.ca">summary.ca</a></code> to tabulate the
results, which also contain the standard errors and p-
values. If <code>interest = "dist"</code>, this option doesn't
have any bearing and user can leave it to be the default
value.</p>
</td></tr>
<tr><td><code id="ca_+3A_cat">cat</code></td>
<td>
<p>P-values in classification analysis are adjusted for
multiplicity to account for joint testing of zero
coefficients on for all variables within a category.
Suppose we have selected specified 3 variables in
interest: <code>t = c("a", "b", "c")</code>. Without loss of
generality, assume <code>"a"</code> is not a factor, while
<code>"b"</code> and <code>"c"</code> are two factors. Then users
need to specify as <code>cat = c("b", "c")</code>. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ca_+3A_alpha">alpha</code></td>
<td>
<p>Size for confidence interval. Shoule be between 0 and 1.
Default is 0.1</p>
</td></tr>
<tr><td><code id="ca_+3A_b">b</code></td>
<td>
<p>Number of bootstrap draws. Default is 500.</p>
</td></tr>
<tr><td><code id="ca_+3A_parallel">parallel</code></td>
<td>
<p>Whether the user wants to use parallel computation.
The default is <code>FALSE</code> and only 1 CPU will be used.
The other option is <code>TRUE</code>, and user can specify
the number of CPUs in the <code>ncores</code> option.</p>
</td></tr>
<tr><td><code id="ca_+3A_ncores">ncores</code></td>
<td>
<p>Number of cores for computation. Default is set to be
<code>detectCores()</code>, which is a function from package
<code>parallel</code> that detects the number of CPUs on the
current host. For large dataset, parallel computing is
highly recommended since bootstrap is time-consuming.</p>
</td></tr>
<tr><td><code id="ca_+3A_seed">seed</code></td>
<td>
<p>Pseudo-number generation for reproduction. Default is 1.</p>
</td></tr>
<tr><td><code id="ca_+3A_bc">bc</code></td>
<td>
<p>Whether want the estimate to be bias-corrected. Default
is <code>TRUE</code>. If <code>FALSE</code> uncorrected estimate and
corresponding confidence bands will be reported.</p>
</td></tr>
<tr><td><code id="ca_+3A_range_cb">range_cb</code></td>
<td>
<p>When <code>interest = "dist"</code>, we sort and unique
variables in interest to estimate weighted CDF. For large
dataset there can be memory problem storing very many of
observations, and thus users can provide a Sort value and
the package will sort and unique based on the weighted
quantile of Sort. If users don't want this feature, set
<code>range_cb = NULL</code>. Default is <code>c(1:99)/100</code>.</p>
</td></tr>
<tr><td><code id="ca_+3A_boot_type">boot_type</code></td>
<td>
<p>Type of bootstrap. Default is <code>"nonpar"</code>, and the
package implements nonparametric bootstrap. The
alternative is <code>"weighted"</code>, and the package
implements weighted bootstrap.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All estimates are bias-corrected and all confidence bands are monotonized.
The bootstrap procedures follow algorithm 2.2 as in Chernozhukov,
Fernandez-Val and Luo (2018).
</p>


<h3>Value</h3>

<p>If <code>subgroup = NULL</code>, all outputs are whole sample. Otherwise output
are subgroup results. When <code>interest = "moment"</code>, the output is a list
showing
</p>

<ul>
<li> <p><code>est</code> Estimates of variables in interest.
</p>
</li>
<li> <p><code>bse</code> Bootstrap standard errors.
</p>
</li>
<li> <p><code>joint_p</code> P-values that are adjusted for multiplicity to
account for joint testing for all variables.
</p>
</li>
<li> <p><code>pointwise_p</code> P-values that doesn't adjust for join testing
</p>
</li></ul>

<p>If users have further specified <code>cat</code> (e.g., <code>!is.null(cat)</code>), the
fourth component will be replaced with <code>p_cat</code>: P-values that are a
djusted for multiplicity to account for joint testing for all variables
within a category. Users can use <code><a href="#topic+summary.ca">summary.ca</a></code> to tabulate the
results.
</p>
<p>When <code>interest = "dist"</code>, the output is a list of two components:
</p>

<ul>
<li> <p><code>infresults</code> A list that stores estimates, upper and lower
confidence bounds for all variables in interest for least and most
affected groups.
</p>
</li>
<li> <p><code>sortvar</code> A list that stores sorted and unique variables in
interest.
</p>
</li></ul>

<p>We recommend using <code><a href="#topic+plot.ca">plot.ca</a></code> command for result visualization.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("mortgage")
### Regression Specification
fm &lt;- deny ~ black + p_irat + hse_inc + ccred + mcred + pubrec +
ltv_med + ltv_high + denpmi + selfemp + single + hischl
### Specify characteristics of interest
t &lt;- c("deny", "p_irat", "black", "hse_inc", "ccred", "mcred", "pubrec",
"denpmi", "selfemp", "single", "hischl", "ltv_med", "ltv_high")
### issue ca command
CA &lt;- ca(fm = fm, data = mortgage, var = "black", method = "logit",
cl = "diff", t = t, b = 50, bc = TRUE)
</code></pre>

<hr>
<h2 id='mortgage'>Mortgage Denial</h2><span id='topic+mortgage'></span>

<h3>Description</h3>

<p>Mortgage Denial
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mortgage
</code></pre>


<h3>Format</h3>

<p>Contains the data on mortgage application in Boston from 1990,
(Munnell et al., 1996.)
We obtain the data from the companion website of Stock and Watson (2011).
The file contains the following variables:
</p>

<dl>
<dt>deny</dt><dd><p>indicator for mortgage application denied</p>
</dd>
<dt>p_irat</dt><dd><p>monthly debt to income ratio</p>
</dd>
<dt>black</dt><dd><p>indicator for black applicant</p>
</dd>
<dt>hse_inc</dt><dd><p>monthly housing expenses to income ratio</p>
</dd>
<dt>loan_val</dt><dd><p>loan to assessed property value ratio</p>
</dd>
<dt>ccred</dt><dd><p>consumer credit score with 6 categories. 1 if no &quot;slow&quot;
payments or delinquencies, 2 if one or two &quot;slow&quot; payments or delinquencies,
3 if more than two &quot;slow&quot; payments or delinguencies, 4 if insufficient
credit history for determination, 5 if delinquent credit history with
payment 60 days overdue, and 6 if delinquent credit history with payments
90 days overdue.</p>
</dd>
<dt>mcred</dt><dd><p>mortgage credit score with 4 categories. 1 if no late mortgage
payments, 2 if no mortgage payment history, 3 if one or two late mortage
payments, and 4 if more than two late mortgages payments</p>
</dd>
<dt>pubrec</dt><dd><p>indicator for any public record of credit problems: bankruptcy
, charge-offs, collection actions</p>
</dd>
<dt>denpmi</dt><dd><p>indicator for applicant applied for mortgage insurance and was
denied</p>
</dd>
<dt>selfemp</dt><dd><p>indicator for self-employed applicant</p>
</dd>
<dt>single</dt><dd><p>indicator for single applicant</p>
</dd>
<dt>hischl</dt><dd><p>indicator for high school graduated applicant</p>
</dd>
<dt>probunmp</dt><dd><p>1989 Massachusetts unemployment rate in the applicant's
history</p>
</dd>
<dt>condo</dt><dd><p>indicator for unit is a condominium</p>
</dd>
<dt>ltv_med</dt><dd><p>indicator for medium loan to property value ratio [.80, .95]</p>
</dd>
<dt>ltv_high</dt><dd><p>indicator for high loan to property value ratio &gt;.95</p>
</dd>
</dl>



<h3>Source</h3>

<p>Munnell, Alicia, Geoffrey Tootell, Lynn Browne, and James McEneaney,
&quot;Mortgage Lending in Boston: Interpreting HMDA Data&quot;, The American Economic
Review, 1996.
</p>

<hr>
<h2 id='plot.ca'>Distribution plotting</h2><span id='topic+plot.ca'></span>

<h3>Description</h3>

<p>Plots distributions and joint uniform confidence bands of variables in
interest from <code><a href="#topic+ca">ca</a></code> command.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ca'
plot(x, var, main = NULL, sub = NULL, xlab = NULL, ylab = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.ca_+3A_x">x</code></td>
<td>
<p>Output of <code><a href="#topic+ca">ca</a></code> command with
<code>interest = "dist"</code>.</p>
</td></tr>
<tr><td><code id="plot.ca_+3A_var">var</code></td>
<td>
<p>Name of variable for plotting</p>
</td></tr>
<tr><td><code id="plot.ca_+3A_main">main</code></td>
<td>
<p>Main title of the plot. Defualt is NULL.</p>
</td></tr>
<tr><td><code id="plot.ca_+3A_sub">sub</code></td>
<td>
<p>Sub title of the plot. Default is NULL.</p>
</td></tr>
<tr><td><code id="plot.ca_+3A_xlab">xlab</code></td>
<td>
<p>x-axis label. Default is NULL.</p>
</td></tr>
<tr><td><code id="plot.ca_+3A_ylab">ylab</code></td>
<td>
<p>y-axis label. Default is NULL.</p>
</td></tr>
<tr><td><code id="plot.ca_+3A_...">...</code></td>
<td>
<p>graphics parameters to be passed to the plotting
routines.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data("mortgage")
### Regression Specification
fm &lt;- deny ~ black + p_irat + hse_inc + ccred + mcred + pubrec +
ltv_med + ltv_high + denpmi + selfemp + single + hischl
### Specify characteristics of interest for plotting
t2 &lt;- "p_irat"
### issue ca command
CAdist &lt;- ca(fm = fm, data = mortgage, var = "black", method = "logit",
t = "p_irat", b = 50, interest = "dist")
### plotting
plot(CAdist, var = "p_irat", ylab = "Prob",
xlab = "Monthly Debt-to-Income Ratio", sub = "logit model")

</code></pre>

<hr>
<h2 id='plot.spe'>Plot output of <code><a href="#topic+spe">spe</a></code> command. The x-axis limits are set to the
specified range of percentile index.</h2><span id='topic+plot.spe'></span>

<h3>Description</h3>

<p>Plot output of <code><a href="#topic+spe">spe</a></code> command. The x-axis limits are set to the
specified range of percentile index.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'spe'
plot(
  x,
  ylim = NULL,
  main = NULL,
  sub = NULL,
  xlab = "Percentile Index",
  ylab = "Sorted Effects",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.spe_+3A_x">x</code></td>
<td>
<p>Output of <code><a href="#topic+spe">spe</a></code> command.</p>
</td></tr>
<tr><td><code id="plot.spe_+3A_ylim">ylim</code></td>
<td>
<p>y-axis limits. Default is NULL.</p>
</td></tr>
<tr><td><code id="plot.spe_+3A_main">main</code></td>
<td>
<p>Main title of the plot. Defualt is NULL.</p>
</td></tr>
<tr><td><code id="plot.spe_+3A_sub">sub</code></td>
<td>
<p>Sub title of the plot. Default is NULL.</p>
</td></tr>
<tr><td><code id="plot.spe_+3A_xlab">xlab</code></td>
<td>
<p>x-axis label. Default is &quot;Percentile Index&quot;.</p>
</td></tr>
<tr><td><code id="plot.spe_+3A_ylab">ylab</code></td>
<td>
<p>y-axis label. Default is &quot;Sorted Effects&quot;.</p>
</td></tr>
<tr><td><code id="plot.spe_+3A_...">...</code></td>
<td>
<p>graphics parameters to be passed to the plotting
routines.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data("mortgage")
fm &lt;- deny ~ black + p_irat + hse_inc + ccred + mcred + pubrec + ltv_med +
ltv_high + denpmi + selfemp + single + hischl
test &lt;- spe(fm = fm, data = mortgage, var = "black", method = "logit",
us = c(2:98)/100, b = 50)

plot(x = test, main="APE and SPE of Being Black on the prob of
Mortgage Denial", sub="Logit Model", ylab="Change in Probability")

</code></pre>

<hr>
<h2 id='plot.subpop'>Plot 2-dimensional projections of variables in interest.</h2><span id='topic+plot.subpop'></span>

<h3>Description</h3>

<p>Takes output from <code><a href="#topic+subpop">subpop</a></code> command as inputs and plots
2-dimensional projection plots of two specified variables. If a
variable in interest is of type factor, then the user must put it on
the y-axis. If the variable on the y-coordinate is a factor, range of
y-axis is set to be the factor level. Otherwise, users can use
<code><a href="#topic+summary.subpop">summary.subpop</a></code> to know the ranges of variables in the
two groups.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'subpop'
plot(
  x,
  varx,
  vary,
  xlim = NULL,
  ylim = NULL,
  main = NULL,
  sub = NULL,
  xlab = NULL,
  ylab = NULL,
  overlap = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.subpop_+3A_x">x</code></td>
<td>
<p>Output of <code><a href="#topic+subpop">subpop</a></code> command.</p>
</td></tr>
<tr><td><code id="plot.subpop_+3A_varx">varx</code></td>
<td>
<p>The name of the variable to be plotted on the x-axis.</p>
</td></tr>
<tr><td><code id="plot.subpop_+3A_vary">vary</code></td>
<td>
<p>The name of the variable name to be plotted on the
y-axis.</p>
</td></tr>
<tr><td><code id="plot.subpop_+3A_xlim">xlim</code></td>
<td>
<p>The range of x-axis. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="plot.subpop_+3A_ylim">ylim</code></td>
<td>
<p>The range of y-axis. Default is <code>NULL</code>. If the
variable on the y-coordinate is a factor, the default
will set it to be the factor level, and users don't
need to specify <code>ylim</code>.</p>
</td></tr>
<tr><td><code id="plot.subpop_+3A_main">main</code></td>
<td>
<p>Main title of the plot. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="plot.subpop_+3A_sub">sub</code></td>
<td>
<p>Sub title of the plot. Default is NULL.</p>
</td></tr>
<tr><td><code id="plot.subpop_+3A_xlab">xlab</code></td>
<td>
<p>x-axis label. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="plot.subpop_+3A_ylab">ylab</code></td>
<td>
<p>y-axis label. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="plot.subpop_+3A_overlap">overlap</code></td>
<td>
<p>Whether user wants to allow observations included in both
confidence sets. Default is <code>FALSE</code>, and the plot
drops the overlapped observations.</p>
</td></tr>
<tr><td><code id="plot.subpop_+3A_...">...</code></td>
<td>
<p>Graphics parameters to be passed to the plotting
routines.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data("mortgage")
### Regression Specification
fm &lt;- deny ~ black + p_irat + hse_inc + ccred + mcred + pubrec +
   ltv_med + ltv_high + denpmi + selfemp + single + hischl
### Issue the subpop command
set_b &lt;- subpop(fm, data = mortgage, method = "logit", var = "black",
u = 0.1, alpha = 0.1, b = 50)
### Plotting
plot(set_b, varx = mortgage$p_irat, vary = mortgage$hse_inc,
     xlim = c(0, 1.5), ylim = c(0, 1.5), xlab = "Debt/Income",
     ylab = "Housing expenses/Income", overlap = TRUE)
</code></pre>

<hr>
<h2 id='spe'>Empirical Sorted Partial Effects (SPE) and Inference</h2><span id='topic+spe'></span>

<h3>Description</h3>

<p><code>spe</code> conducts SPE estimation and inference at user-specifed quantile
index. The bootstrap procedures follows algorithm 2.1 as in Chernozhukov,
Fernandez-Val and Luo (2018). All estimates are bias-corrected and all
confidence bands are monotonized. For graphical results, please use
<code><a href="#topic+plot.spe">plot.spe</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spe(
  fm,
  data,
  method = c("ols", "logit", "probit", "QR"),
  var_type = c("binary", "continuous", "categorical"),
  var,
  compare,
  subgroup = NULL,
  samp_weight = NULL,
  us = c(1:9)/10,
  alpha = 0.1,
  taus = c(5:95)/100,
  b = 500,
  parallel = FALSE,
  ncores = detectCores(),
  seed = 1,
  bc = TRUE,
  boot_type = c("nonpar", "weighted")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spe_+3A_fm">fm</code></td>
<td>
<p>Regression formula.</p>
</td></tr>
<tr><td><code id="spe_+3A_data">data</code></td>
<td>
<p>Data in use.</p>
</td></tr>
<tr><td><code id="spe_+3A_method">method</code></td>
<td>
<p>Models to be used for estimating partial effects. Four
options: <code>"logit"</code> (binary response),
<code>"probit"</code> (binary response), <code>"ols"</code>
(interactive linear with additive errors), <code>"QR"</code>
(linear model with non-additive errors). Default is
<code>"ols"</code>.</p>
</td></tr>
<tr><td><code id="spe_+3A_var_type">var_type</code></td>
<td>
<p>The type of parameter in interest. Three options:
<code>"binary"</code>, <code>"categorical"</code>,
<code>"continuous"</code>. Default is <code>"binary"</code>.</p>
</td></tr>
<tr><td><code id="spe_+3A_var">var</code></td>
<td>
<p>Variable T in interset. Should be a character type.</p>
</td></tr>
<tr><td><code id="spe_+3A_compare">compare</code></td>
<td>
<p>If parameter in interest is categorical, then user needs
to specify which two category to compare with. Should be
a 1 by 2 character vector. For example, if the two levels
to compare with is 1 and 3, then <code>c=("1", "3")</code>,
which will calculate partial effect from 1 to 3. To use
this option, users first need to specify <code>var</code> as a
factor variable.</p>
</td></tr>
<tr><td><code id="spe_+3A_subgroup">subgroup</code></td>
<td>
<p>Subgroup in interest. Default is <code>NULL</code>.
Specifcation should be a logical variable. For example,
suppose data contains indicator variable for women
(female if 1, male if 0). If users are interested in
women SPE, then users should specify <code>subgroup =
data[, "female"] == 1</code>.</p>
</td></tr>
<tr><td><code id="spe_+3A_samp_weight">samp_weight</code></td>
<td>
<p>Sampling weight of data. Input should be a n by 1 vector,
where n denotes sample size. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="spe_+3A_us">us</code></td>
<td>
<p>Percentile of interest for SPE. Should be a vector of
values between 0 and 1. Default is <code>c(1:9)/10</code>.</p>
</td></tr>
<tr><td><code id="spe_+3A_alpha">alpha</code></td>
<td>
<p>Size for confidence interval. Shoule be between 0 and 1.
Default is 0.1</p>
</td></tr>
<tr><td><code id="spe_+3A_taus">taus</code></td>
<td>
<p>Indexes for quantile regression. Default is
<code>c(5:95)/100</code>.</p>
</td></tr>
<tr><td><code id="spe_+3A_b">b</code></td>
<td>
<p>Number of bootstrap draws. Default is set to be 500.</p>
</td></tr>
<tr><td><code id="spe_+3A_parallel">parallel</code></td>
<td>
<p>Whether the user wants to use parallel computation.
The default is <code>FALSE</code> and only 1 CPU will be used.
The other option is <code>TRUE</code>, and user can specify
the number of CPUs in the <code>ncores</code> option.</p>
</td></tr>
<tr><td><code id="spe_+3A_ncores">ncores</code></td>
<td>
<p>Number of cores for computation. Default is set to be
<code>detectCores()</code>, which is a function from package
<code>parallel</code> that detects the number of CPUs on the
current host. For large dataset, parallel computing is
highly recommended since bootstrap is time-consuming.</p>
</td></tr>
<tr><td><code id="spe_+3A_seed">seed</code></td>
<td>
<p>Pseudo-number generation for reproduction. Default is 1.</p>
</td></tr>
<tr><td><code id="spe_+3A_bc">bc</code></td>
<td>
<p>Whether want the estimate to be bias-corrected. Default
is <code>TRUE</code>. If <code>FALSE</code> uncorrected estimate and
corresponding confidence bands will be reported.</p>
</td></tr>
<tr><td><code id="spe_+3A_boot_type">boot_type</code></td>
<td>
<p>Type of bootstrap. Default is <code>"nonpar"</code>, and the
package implements nonparametric bootstrap. The other
alternative is <code>"weighted"</code>, and the package
implements weighted bootstrap.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The output is a list with 4 components: (1) <code>spe</code> stores spe
estimates, the upper and lower confidence bounds, and standard errors;
(2) <code>ape</code> stores ape estimates, the upper and lower confidence bounds,
and the standard error; (3) <code>us</code> stores percentile index as in \
codespe command; (4) <code>alpha</code> stores significance level as in
<code>spe</code> command.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("mortgage")
fm &lt;- deny ~ black + p_irat + hse_inc + ccred + mcred + pubrec + ltv_med +
ltv_high + denpmi + selfemp + single + hischl

test &lt;- spe(fm = fm, data = mortgage, var = "black", method = "logit",
us = c(2:98)/100, b = 50)

</code></pre>

<hr>
<h2 id='subpop'>Inference on Most and Least Affected Groups</h2><span id='topic+subpop'></span>

<h3>Description</h3>

<p><code>subpop</code> conducts set inference on the groups of most and least
affected. When <code>subgroup = NULL</code>, output is for whole sample. Otherwise
the results are subgroup. The output of <code>subpop</code> is a list
containing six components: <code>cs_most</code>, <code>cs_least</code>, <code>u</code>,
<code>subgroup</code>, <code>most</code> and <code>least</code>. As the names
indicate, <code>cs_most</code> and <code>cs_least</code> denote the confidence sets for
the most and least affected units. <code>u</code> stores the u-th most and least
affected index. <code>subgroup</code> stores the indicators for subpopulations.
<code>most</code> and <code>least</code> store the data of the most and
least affected groups. The confidence sets can be visualized using the
<code><a href="#topic+plot.subpop">plot.subpop</a></code> command while the two groups can be tabulated via
the <code><a href="#topic+summary.subpop">summary.subpop</a></code> command.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>subpop(
  fm,
  data,
  method = c("ols", "logit", "probit", "QR"),
  var_type = c("binary", "continuous", "categorical"),
  var,
  compare,
  subgroup = NULL,
  samp_weight = NULL,
  taus = c(5:95)/100,
  u = 0.1,
  alpha = 0.1,
  b = 500,
  seed = 1,
  parallel = FALSE,
  ncores = detectCores(),
  boot_type = c("nonpar", "weighted")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="subpop_+3A_fm">fm</code></td>
<td>
<p>Regression formula</p>
</td></tr>
<tr><td><code id="subpop_+3A_data">data</code></td>
<td>
<p>The data in use</p>
</td></tr>
<tr><td><code id="subpop_+3A_method">method</code></td>
<td>
<p>Models to be used for estimating partial effects. Four
options: <code>"logit"</code> (binary response),
<code>"probit"</code> (binary response), <code>"ols"</code>
(interactive linear with additive errors), <code>"QR"</code>
(linear model with non-additive errors). Default is
<code>"ols"</code>.</p>
</td></tr>
<tr><td><code id="subpop_+3A_var_type">var_type</code></td>
<td>
<p>The type of parameter in interest. Three options:
<code>"binary"</code>, <code>"categorical"</code>,
<code>"continuous"</code>. Default is <code>"binary"</code>.</p>
</td></tr>
<tr><td><code id="subpop_+3A_var">var</code></td>
<td>
<p>Variable T in interset. Should be a character.</p>
</td></tr>
<tr><td><code id="subpop_+3A_compare">compare</code></td>
<td>
<p>If parameter in interest is categorical, then user needs
to specify which two category to compare with. Should be
a 1 by 2 character vector. For example, if the two levels
to compare with is 1 and 3, then <code>c=("1", "3")</code>,
which will calculate partial effect from 1 to 3. To use
this option, users first need to specify <code>var</code> as a
factor variable.</p>
</td></tr>
<tr><td><code id="subpop_+3A_subgroup">subgroup</code></td>
<td>
<p>Subgroup in interest. Default is <code>NULL</code>.
Specifcation should be a logical variable. For example,
suppose data contains indicator variable for women
(female if 1, male if 0). If users are interested in
women SPE, then users should specify
<code>subgroup = data[, "female"] == 1</code>.</p>
</td></tr>
<tr><td><code id="subpop_+3A_samp_weight">samp_weight</code></td>
<td>
<p>Sampling weight of data. Input should be a n by 1 vector,
where n denotes sample size. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="subpop_+3A_taus">taus</code></td>
<td>
<p>Indexes for quantile regression.
Default is <code>c(5:95)/100</code>.</p>
</td></tr>
<tr><td><code id="subpop_+3A_u">u</code></td>
<td>
<p>Percentile of most and least affected. Default is set to
be 0.1.</p>
</td></tr>
<tr><td><code id="subpop_+3A_alpha">alpha</code></td>
<td>
<p>Size for confidence interval. Shoule be between 0 and 1.
Default is 0.1</p>
</td></tr>
<tr><td><code id="subpop_+3A_b">b</code></td>
<td>
<p>Number of bootstrap draws. Default is set to be 500.</p>
</td></tr>
<tr><td><code id="subpop_+3A_seed">seed</code></td>
<td>
<p>Pseudo-number generation for reproduction. Default is 1.</p>
</td></tr>
<tr><td><code id="subpop_+3A_parallel">parallel</code></td>
<td>
<p>Whether the user wants to use parallel computation.
The default is <code>FALSE</code> and only 1 CPU will be used.
The other option is <code>TRUE</code>, and user can specify
the number of CPUs in the <code>ncores</code> option.</p>
</td></tr>
<tr><td><code id="subpop_+3A_ncores">ncores</code></td>
<td>
<p>Number of cores for computation. Default is set to be
<code>detectCores()</code>, which is a function from package
<code>parallel</code> that detects the number of CPUs on the
current host. For large dataset, parallel computing is
highly recommended since bootstrap is time-consuming.</p>
</td></tr>
<tr><td><code id="subpop_+3A_boot_type">boot_type</code></td>
<td>
<p>Type of bootstrap. Default is <code>"nonpar"</code>, and the
package implements nonparametric bootstrap. The
alternative is <code>"weighted"</code>, and the package
implements weighted bootstrap.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data("mortgage")
### Regression Specification
fm &lt;- deny ~ black + p_irat + hse_inc + ccred + mcred + pubrec +
   ltv_med + ltv_high + denpmi + selfemp + single + hischl
### Issue the subpop command
set_b &lt;- subpop(fm, data = mortgage, method = "logit", var = "black",
u = 0.1, alpha = 0.1, b = 50)

</code></pre>

<hr>
<h2 id='summary.ca'>Return the output of <code><a href="#topic+ca">ca</a></code> function.</h2><span id='topic+summary.ca'></span>

<h3>Description</h3>

<p>Return the output of <code><a href="#topic+ca">ca</a></code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ca'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.ca_+3A_object">object</code></td>
<td>
<p>Output of <code><a href="#topic+ca">ca</a></code> command with
<code>interest = "moments"</code>.</p>
</td></tr>
<tr><td><code id="summary.ca_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data("mortgage")
### Regression Specification
fm &lt;- deny ~ black + p_irat + hse_inc + ccred + mcred + pubrec +
ltv_med + ltv_high + denpmi + selfemp + single + hischl
### Specify characteristics of interest
t &lt;- c("deny", "p_irat", "black", "hse_inc", "ccred", "mcred", "pubrec",
"denpmi", "selfemp", "single", "hischl", "ltv_med", "ltv_high")
### Issue ca command
CA &lt;- ca(fm = fm, data = mortgage, var = "black", method = "logit",
cl = "both", t = t, b = 50, bc = TRUE)
### Report summary table
summary(CA)
</code></pre>

<hr>
<h2 id='summary.spe'>Tabulate the output of <code><a href="#topic+spe">spe</a></code> function.</h2><span id='topic+summary.spe'></span>

<h3>Description</h3>

<p>The option <code>result</code> allows user to tabulate either sorted estimates or
average estimates. For sorted estimates, the table shows user-specified
quantile indices, sorted estimates, standard errors, point-wise confidence
intervals, and uniform confidence intervals. For average estimates, the
table shows average estiamtes, standard errors, and confidence intervals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'spe'
summary(object, result = c("sorted", "average"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.spe_+3A_object">object</code></td>
<td>
<p>The output of <code><a href="#topic+spe">spe</a></code> function.</p>
</td></tr>
<tr><td><code id="summary.spe_+3A_result">result</code></td>
<td>
<p>Whether the user wants to see the sorted or the average
estimates. Default is <code>sorted</code>, which shows the
sorted estimates.</p>
</td></tr>
<tr><td><code id="summary.spe_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data("mortgage")
fm &lt;- deny ~ black + p_irat + hse_inc + ccred + mcred + pubrec + ltv_med +
ltv_high + denpmi + selfemp + single + hischl
test &lt;- spe(fm = fm, data = mortgage, var = "black", method = "logit",
us = c(2:98)/100, b = 50)
summary(test)
</code></pre>

<hr>
<h2 id='summary.subpop'>Return the output of <code><a href="#topic+subpop">subpop</a></code> function.</h2><span id='topic+summary.subpop'></span>

<h3>Description</h3>

<p>The <code><a href="#topic+subpop">subpop</a></code> function stores the most and least affected groups.
This command allows users to see these two groups and their corresponding
characteristics. The command also allows users to check the summary
statistics of variables in interest, which can be useful for plotting the
projections plot via the <code><a href="#topic+plot.subpop">plot.subpop</a></code> method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'subpop'
summary(object, vars = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.subpop_+3A_object">object</code></td>
<td>
<p>Output of <code><a href="#topic+subpop">subpop</a></code> command.</p>
</td></tr>
<tr><td><code id="summary.subpop_+3A_vars">vars</code></td>
<td>
<p>The variables that users want to see the summary
statistics. The default is <code>NULL</code> and the command
shows all variables. The summary statistcs include min
1st quartile, median, mean, 3rd quartile and the max.</p>
</td></tr>
<tr><td><code id="summary.subpop_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data("mortgage")
### Regression Specification
fm &lt;- deny ~ black + p_irat + hse_inc + ccred + mcred + pubrec +
   ltv_med + ltv_high + denpmi + selfemp + single + hischl
### Issue the subpop command
set_b &lt;- subpop(fm, data = mortgage, method = "logit", var = "black",
u = 0.1, alpha = 0.1, b = 50)
### Produce summary of two variables
groups &lt;- summary(set_b, vars = c("p_irat", "hse_inc"))
</code></pre>

<hr>
<h2 id='wage2015'>Wage Data</h2><span id='topic+wage2015'></span>

<h3>Description</h3>

<p>Wage Data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wage2015
</code></pre>


<h3>Format</h3>

<p>Consists of white, non-hispanic individuals aging from 25 to 64 and
working more than 35 hours per week during at least 50 weeks of the year.
Excludes self-employed, individuals living in group quarters; individuals in
the military, agricultural or private household sectors; individuals with
inconsistent reports on earnings and employment status; individuals with
allocated or missing information in any of the variables used in the
analysis; individuals with hourly wage rate below $3. Contains 32,523
workers including 18,137 men and 14,382 women. The file contains the
following variables:
</p>

<dl>
<dt>lnw</dt><dd><p>log of hourly wages</p>
</dd>
<dt>weight</dt><dd><p>CPS sampling weight</p>
</dd>
<dt>female</dt><dd><p>gender indicator: 1 if female</p>
</dd>
<dt>exp1</dt><dd><p>max(age-years of educ-7, 0)</p>
</dd>
<dt>exp2</dt><dd><p>exp1^2/100</p>
</dd>
<dt>exp3</dt><dd><p>exp1^3/100</p>
</dd>
<dt>exp4</dt><dd><p>exp1^4/100</p>
</dd>
<dt>occ</dt><dd><p>Aggregated occupation with 5 categories: managers, service,
sales, construction and production.</p>
</dd>
<dt>ind</dt><dd><p>Aggregated industry with 12 categories: minery, construction,
manufacture, retail, transport, information, finance, professional,
education, leisure, services, public.</p>
</dd>
<dt>educ</dt><dd><p>Education attainment with 5 categories: lhs (less than high
school graduate, years of educ &lt; 12), hsg (high school graduate: years of
educ = 12), sc (some college: 13&lt;=years of educ&lt;=15), cg (college:
16&lt;=years of educ&lt;=17), ad (advanced degree: years of educ&gt;=18).</p>
</dd>
<dt>ms</dt><dd><p>Marital Status with 5 categories: married, widowed, separated,
divorced, and nevermarried.</p>
</dd>
<dt>region</dt><dd><p>Regions with 4 categories: mw (midwest), so (south),
we (west), ne (northeast).</p>
</dd>
</dl>



<h3>Source</h3>

<p>U.S. March Supplement of the Current Population Survey (CPS) in 2015.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
