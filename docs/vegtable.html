<!DOCTYPE html><html><head><title>Help for package vegtable</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {vegtable}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_releves'><p>Merge relevés from data frames into vegtable objects</p></a></li>
<li><a href='#as'><p>Coerce objects to lists</p></a></li>
<li><a href='#aspect_conv-data'><p>Conversion of aspect classes to azimuth</p></a></li>
<li><a href='#braun_blanquet-data'><p>Conversion of Braun-Blanquet codes to cover percentage</p></a></li>
<li><a href='#check_args'><p>Check validity of arguments for statistics</p></a></li>
<li><a href='#clean'><p>Clean orphaned records in vegtable object</p></a></li>
<li><a href='#count_taxa'><p>Count taxa included in vegtable objects</p></a></li>
<li><a href='#cover_trans'><p>Convert cover scales to percent cover</p></a></li>
<li><a href='#coverconvert'><p>Cover conversion tables</p></a></li>
<li><a href='#crosstable'><p>Generating cross tables from database lists</p></a></li>
<li><a href='#df2coverconvert'><p>Create coverconvert objects</p></a></li>
<li><a href='#df2vegtable'><p>Convert a data frame into a vegtable object.</p></a></li>
<li><a href='#dune_veg-data'><p>Dutch dune meadows as vegtable</p></a></li>
<li><a href='#Extract'><p>Select or replace elements in objects</p></a></li>
<li><a href='#format_F2'><p>Have to be described</p></a></li>
<li><a href='#header'><p>Retrieve or replace slot header in vegtable objects</p></a></li>
<li><a href='#Kenya_veg-data'><p>Vegetation-plots from Kenya</p></a></li>
<li><a href='#layers2samples'><p>Add information from slot 'layers' into slot 'samples'</p></a></li>
<li><a href='#make_cocktail'><p>Produce a Cocktail classification</p></a></li>
<li><a href='#names'><p>Retrieve names of vegtable and coverconvert objects</p></a></li>
<li><a href='#new_relation'><p>Insert a new variable as relation in vegtable object</p></a></li>
<li><a href='#relation2header'><p>Insert variables from relations into header</p></a></li>
<li><a href='#rewrite_formulas'><p>Re-writing formulas for print output</p></a></li>
<li><a href='#shaker-class'><p>Class containing Cocktail algorithms.</p></a></li>
<li><a href='#subset'><p>Subset functions for vegtable objects</p></a></li>
<li><a href='#summary'><p>Summary method for vegtable objects</p></a></li>
<li><a href='#taxa2samples'><p>Insert taxon information into samples</p></a></li>
<li><a href='#trait_stats'><p>Statistics and proportion for taxon traits</p></a></li>
<li><a href='#tv2vegtable'><p>Import of vegetation data from Turboveg databases</p></a></li>
<li><a href='#update_det'><p>Update by determined specimens</p></a></li>
<li><a href='#used_synonyms'><p>Retrieve synonyms or taxon concepts used in a data set</p></a></li>
<li><a href='#veg_aggregate'><p>Aggregating information into a data frame</p></a></li>
<li><a href='#veg_diverstiy'><p>Calculation of statistics at plot level</p></a></li>
<li><a href='#veg_relation'><p>Retrieve or replace relations in vegtable objects</p></a></li>
<li><a href='#vegtable_stat'><p>General statistics from vegtable objects</p></a></li>
<li><a href='#vegtable-class'><p>Class vegtable.</p></a></li>
<li><a href='#Wetlands-data'><p>Vegetation-plots from Tanzania</p></a></li>
<li><a href='#write_juice'><p>Exporting tables for Juice</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.1.8</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Title:</td>
<td>Handling Vegetation Data Sets</td>
</tr>
<tr>
<td>Depends:</td>
<td>R(&ge; 3.5.0), taxlist (&ge; 0.2.4)</td>
</tr>
<tr>
<td>Imports:</td>
<td>foreign, methods, qdapRegex, sp, stats, stringi, utils,
vegdata</td>
</tr>
<tr>
<td>Suggests:</td>
<td>biblio, knitr, rmarkdown, sf, testthat, vegan</td>
</tr>
<tr>
<td>Description:</td>
<td>Import and handling data from vegetation-plot databases, especially
    data stored in 'Turboveg 2' (<a href="https://www.synbiosys.alterra.nl/turboveg/">https://www.synbiosys.alterra.nl/turboveg/</a>).
    Also import/export routines for exchange of data with 'Juice'
    (<a href="https://www.sci.muni.cz/botany/juice/">https://www.sci.muni.cz/botany/juice/</a>) are implemented.</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/kamapu/vegtable">https://github.com/kamapu/vegtable</a>,
<a href="http://kamapu.github.io/vegtable/">http://kamapu.github.io/vegtable/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/kamapu/vegtable/issues">https://github.com/kamapu/vegtable/issues</a></td>
</tr>
<tr>
<td>Collate:</td>
<td>'imports.R' 'NULLing.R' 'coverconvert-class.R'
'vegtable-class.R' 'shaker-class.R' 'df2coverconvert.R'
'new_relation.R' 'relation2header.R' 'cover_trans.R' 'clean.R'
'coerce-methods.R' 'add_releves.R' 'header.R' 'Extract.R'
'veg_relation.R' 'vegtable_stat.R' 'df2vegtable.R'
'used_synonyms.R' 'taxa2samples.R' 'subset.R' 'names.R'
'tv2vegtable.R' 'crosstable.R' 'veg_aggregate.R'
'write_juice.R' 'layers2samples.R' 'make_cocktail.R'
'summary.R' 'count_taxa.R' 'trait_stats.R' 'update_det.R'
'veg_diversity.R' 'aspect_conv-data.R' 'braun_blanquet-data.R'
'dune_veg-data.R' 'Kenya_veg-data.R' 'Wetlands-data.R'</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-03-14 08:14:28 UTC; miguel</td>
</tr>
<tr>
<td>Author:</td>
<td>Miguel Alvarez <a href="https://orcid.org/0000-0003-1500-1834"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Miguel Alvarez &lt;kamapu78@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-03-14 08:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_releves'>Merge relevés from data frames into vegtable objects</h2><span id='topic+add_releves'></span><span id='topic+add_releves+2Cvegtable+2Cdata.frame-method'></span><span id='topic+add_releves+3C-'></span><span id='topic+add_releves+3C-+2Cvegtable+2Cdata.frame-method'></span>

<h3>Description</h3>

<p>Addition of plot observations into existing data sets may implicate merging
data frames with <a href="#topic+vegtable-class">vegtable</a> objects.
</p>
<p>Since this function will only update slots <strong>samples</strong> and <strong>header</strong>,
consistency with slots <strong>layers</strong>, <strong>relations</strong> and <strong>species</strong> have to be
checked and accordingly updated in advance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_releves(vegtable, releves, ...)

## S4 method for signature 'vegtable,data.frame'
add_releves(
  vegtable,
  releves,
  header,
  abundance,
  split_string,
  usage_ids = FALSE,
  layers = FALSE,
  layers_var,
  format = "crosstable",
  preserve_ids = FALSE,
  ...
)

add_releves(vegtable, ...) &lt;- value

## S4 replacement method for signature 'vegtable,data.frame'
add_releves(vegtable, ...) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_releves_+3A_vegtable">vegtable</code></td>
<td>
<p>An object of class <a href="#topic+vegtable-class">vegtable</a>.</p>
</td></tr>
<tr><td><code id="add_releves_+3A_releves">releves</code></td>
<td>
<p>A data frame including plot observations to be added into
<code>vegtable</code>.</p>
</td></tr>
<tr><td><code id="add_releves_+3A_...">...</code></td>
<td>
<p>Further arguments passed to function <code><a href="#topic+cross2db">cross2db()</a></code> (i.e.
<code>na_strings</code>).</p>
</td></tr>
<tr><td><code id="add_releves_+3A_header">header</code></td>
<td>
<p>A data frame (optional) including header information for plots.</p>
</td></tr>
<tr><td><code id="add_releves_+3A_abundance">abundance</code></td>
<td>
<p>A character value (or vector of length 2) indicating the
names of abundance variable in <code>vegtable</code>.</p>
</td></tr>
<tr><td><code id="add_releves_+3A_split_string">split_string</code></td>
<td>
<p>Character value used to split mixed abundance codes.</p>
</td></tr>
<tr><td><code id="add_releves_+3A_usage_ids">usage_ids</code></td>
<td>
<p>Logical value indicating whether species are as taxon usage
ids (integers) or names in <code>releves</code>.</p>
</td></tr>
<tr><td><code id="add_releves_+3A_layers">layers</code></td>
<td>
<p>Logical value indicating whether layers are included in
<code>releves</code> or not.</p>
</td></tr>
<tr><td><code id="add_releves_+3A_layers_var">layers_var</code></td>
<td>
<p>Name of the layer variable in <code>vegtable</code>.</p>
</td></tr>
<tr><td><code id="add_releves_+3A_format">format</code></td>
<td>
<p>Character value indicating input format of <code>releves</code> (either
<code>"crosstable"</code> or <code>"databaselist"</code>).</p>
</td></tr>
<tr><td><code id="add_releves_+3A_preserve_ids">preserve_ids</code></td>
<td>
<p>A logical value, whether IDs in input data set should
used as <code>ReleveID</code> or not. Those IDs have to be integers and if one
of those already exists in <code>vegtable</code>, an error will be retrieved.</p>
</td></tr>
<tr><td><code id="add_releves_+3A_value">value</code></td>
<td>
<p>A data frame containing new plot observations. I is passed to
parameter 'releves' by the replace method.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cross2db">cross2db()</a></code>
</p>

<hr>
<h2 id='as'>Coerce objects to lists</h2><span id='topic+as'></span><span id='topic+as.list+2Cvegtable-method'></span><span id='topic+coerce+2Cvegtable+2Clist-method'></span><span id='topic+coerce+2Ccoverconvert+2Clist-method'></span><span id='topic+as.list+2Ccoverconvert-method'></span>

<h3>Description</h3>

<p>Coerce vegtable objects to a list with every slot as a component of the list.
This way allows to explore content and solve problems when validity checks
fail.
</p>
<p>Coercion is applied for different classes by vegtable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'vegtable'
as.list(x, ...)

## S4 method for signature 'coverconvert'
as.list(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_+3A_x">x</code></td>
<td>
<p>An object to be coerced.</p>
</td></tr>
<tr><td><code id="as_+3A_...">...</code></td>
<td>
<p>further arguments passed from or to other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>list</code>.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## vegtable as list
veg &lt;- as(Kenya_veg, "list")
names(veg)

## coverconvert as list
as(Kenya_veg@coverconvert, "list")

</code></pre>

<hr>
<h2 id='aspect_conv-data'>Conversion of aspect classes to azimuth</h2><span id='topic+aspect_conv-data'></span><span id='topic+aspect_conv'></span>

<h3>Description</h3>

<p>Conversion table required to transform values of aspect to azimuth in
degrees.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aspect_conv
</code></pre>


<h3>Format</h3>

<p>A numeric vector of values in degrees for the symbols used as names.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>aspect_conv[c("N", "S", "ENE", "SSW")]
</code></pre>

<hr>
<h2 id='braun_blanquet-data'>Conversion of Braun-Blanquet codes to cover percentage</h2><span id='topic+braun_blanquet-data'></span><span id='topic+braun_blanquet'></span>

<h3>Description</h3>

<p>Cover values conversion as <a href="#topic+coverconvert-class">coverconvert</a> object.
</p>
<p>Object of class <a href="#topic+coverconvert-class">coverconvert</a> contains conversion tables
usually from a categorical variable (a cover scale) to a numerical one
(equivalent percentage cover value).
Cover values are stored as range for each level in the scale (minimum and
maximum cover value).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>braun_blanquet
</code></pre>


<h3>Format</h3>

<p>An object of class <code><a href="#topic+coverconvert-class">coverconvert</a></code>.
</p>


<h3>See Also</h3>

<p><a href="#topic+coverconvert-class">coverconvert</a> <code><a href="#topic+cover_trans">cover_trans()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>names(braun_blanquet)
summary(braun_blanquet)
summary(braun_blanquet$b_bbds)
</code></pre>

<hr>
<h2 id='check_args'>Check validity of arguments for statistics</h2><span id='topic+check_args'></span>

<h3>Description</h3>

<p>Check validity of arguments in functions <code><a href="#topic+trait_stats">trait_stats()</a></code> and
<code><a href="#topic+trait_proportion">trait_proportion()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_args(
  object,
  trait,
  head_var,
  weight,
  taxon_levels,
  merge_to,
  trait_levels
)
</code></pre>

<hr>
<h2 id='clean'>Clean orphaned records in vegtable object</h2><span id='topic+clean'></span><span id='topic+clean_once'></span><span id='topic+clean+2Cvegtable-method'></span>

<h3>Description</h3>

<p>Delete entries in slots <code>header</code> and <code>species</code> orphaned by manipulation of
slots.
</p>
<p>Orphaned records generated by modifications in some slots may cause a loss
on the validity of <a href="#topic+vegtable-class">vegtable</a> objects.
This function should be applied to optimise the allocated size of a
<a href="#topic+vegtable-class">vegtable</a> object, as well. Since running cleaning only
once does not assure the deletion of all orphaned entries, it is recommended
to run it at least twice. This repetition of cleaning is controlled by the
argument <code>times</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_once(object)

## S4 method for signature 'vegtable'
clean(object, times = 2, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_+3A_object">object</code></td>
<td>
<p>A <a href="#topic+vegtable-class">vegtable</a> object.</p>
</td></tr>
<tr><td><code id="clean_+3A_times">times</code></td>
<td>
<p>Numeric value indicating how many times should be the cleaning
be repeated.</p>
</td></tr>
<tr><td><code id="clean_+3A_...">...</code></td>
<td>
<p>Further arguments passed from or to other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A clean <a href="#topic+vegtable-class">vegtable</a> object.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Create an invalid object
veg &lt;- Kenya_veg
veg@header &lt;- veg@header[1:10, ]

## Resolve invalidity
veg &lt;- clean(veg)

</code></pre>

<hr>
<h2 id='count_taxa'>Count taxa included in vegtable objects</h2><span id='topic+count_taxa'></span><span id='topic+count_taxa+2Cvegtable+2Cmissing-method'></span><span id='topic+count_taxa+2Cformula+2Cvegtable-method'></span><span id='topic+count_taxa+3C-'></span><span id='topic+count_taxa+3C-+2Cvegtable+2Cformula-method'></span>

<h3>Description</h3>

<p>Counting number of taxa within <a href="taxlist.html#topic+taxlist-class">taxlist</a> objects or character vectors
containing taxon names.
</p>
<p>This function provides a quick calculation of taxa in <a href="#topic+vegtable-class">vegtable</a>
objects, considering only records in slot samples.
Such records can be also merged from lower ranks.
</p>
<p>For the formula method, units without any requested taxa will not appear in
the output data frame. If no taxa at all is occurring at the requested level
in any unit, an error message will be retrieved.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'vegtable,missing'
count_taxa(object, level, include_lower = FALSE, ...)

## S4 method for signature 'formula,vegtable'
count_taxa(
  object,
  data,
  include_lower = FALSE,
  suffix = "_count",
  in_header = TRUE,
  ...
)

count_taxa(data, ...) &lt;- value

## S4 replacement method for signature 'vegtable,formula'
count_taxa(data, ...) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="count_taxa_+3A_object">object</code></td>
<td>
<p>An object of class <a href="#topic+vegtable-class">vegtable</a> or a formula.</p>
</td></tr>
<tr><td><code id="count_taxa_+3A_level">level</code></td>
<td>
<p>Character value indicating the taxonomic rank of counted taxa.</p>
</td></tr>
<tr><td><code id="count_taxa_+3A_include_lower">include_lower</code></td>
<td>
<p>Logical value, whether lower taxonomic ranks should be
included at the requested level.</p>
</td></tr>
<tr><td><code id="count_taxa_+3A_...">...</code></td>
<td>
<p>further arguments passed among methods.</p>
</td></tr>
<tr><td><code id="count_taxa_+3A_data">data</code></td>
<td>
<p>An object of class <a href="#topic+vegtable-class">vegtable</a>.</p>
</td></tr>
<tr><td><code id="count_taxa_+3A_suffix">suffix</code></td>
<td>
<p>Character value used as suffix on the calculated variable.</p>
</td></tr>
<tr><td><code id="count_taxa_+3A_in_header">in_header</code></td>
<td>
<p>Logical value, whether the result should be included in the
slot header of the input <a href="#topic+vegtable-class">vegtable</a> object or not.
A warning message is provided if the calculation is not done for every
plot observation.</p>
</td></tr>
<tr><td><code id="count_taxa_+3A_value">value</code></td>
<td>
<p>A formula passed to parameter 'object' by the replace method.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An data frame with the number of taxa from requested level at requested
units for the formula method, or just an integer value.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Different alternatives
count_taxa(Kenya_veg)
head(count_taxa(~ReleveID, Kenya_veg, in_header = FALSE))
head(count_taxa(species ~ ReleveID, Kenya_veg, in_header = FALSE))
head(count_taxa(species ~ ReleveID, Kenya_veg, TRUE, in_header = FALSE))
head(count_taxa(family ~ ReleveID, Kenya_veg, TRUE))

</code></pre>

<hr>
<h2 id='cover_trans'>Convert cover scales to percent cover</h2><span id='topic+cover_trans'></span><span id='topic+cover_trans+2Ccharacter+2Ccoverconvert-method'></span><span id='topic+cover_trans+2Cfactor+2Ccoverconvert-method'></span><span id='topic+cover_trans+2Cnumeric+2Ccoverconvert-method'></span><span id='topic+cover_trans+2Cvegtable+2Cmissing-method'></span>

<h3>Description</h3>

<p>Convert values of a categorical cover scale to percentage values.
</p>
<p>This function requires as input a <a href="#topic+coverconvert-class">coverconvert</a> object which contains
the conversion tables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'character,coverconvert'
cover_trans(x, conversion, from = NULL, rule = "top", zeroto = 0.1, ...)

## S4 method for signature 'factor,coverconvert'
cover_trans(x, conversion, ...)

## S4 method for signature 'numeric,coverconvert'
cover_trans(x, conversion, ...)

## S4 method for signature 'vegtable,missing'
cover_trans(x, to, replace = FALSE, rule = "top", zeroto = 0.1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cover_trans_+3A_x">x</code></td>
<td>
<p>Either a factor or character vector, or a <a href="#topic+vegtable-class">vegtable</a> object.</p>
</td></tr>
<tr><td><code id="cover_trans_+3A_conversion">conversion</code></td>
<td>
<p>An object of class <a href="#topic+vegtable-class">vegtable</a>.</p>
</td></tr>
<tr><td><code id="cover_trans_+3A_from">from</code></td>
<td>
<p>Scale name of values in <code>x</code> as character value.</p>
</td></tr>
<tr><td><code id="cover_trans_+3A_rule">rule</code></td>
<td>
<p>A character value indicating the rule applied for cover
transformation. Three rules are implemented for transformation,
either <code>top</code> (values transformed to the top of the range),
<code>middle</code> (transformation at the midpoint), and
<code>bottom</code> (conversion at the lowest value of the range).
In the later case, if the bottom is zero cover, a fictive bottom value
can be set by <code>'zeroto'</code></p>
</td></tr>
<tr><td><code id="cover_trans_+3A_zeroto">zeroto</code></td>
<td>
<p>Value set for transformation of classes with bottom at 0%
cover.</p>
</td></tr>
<tr><td><code id="cover_trans_+3A_...">...</code></td>
<td>
<p>Further arguments passed from or to other methods.</p>
</td></tr>
<tr><td><code id="cover_trans_+3A_to">to</code></td>
<td>
<p>Name of the column in slot <code>samples</code> for writing converted values.</p>
</td></tr>
<tr><td><code id="cover_trans_+3A_replace">replace</code></td>
<td>
<p>Logical value indicating whether existing cover values should
be replaced by the new computed values or not.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Either a vector or a <a href="#topic+vegtable-class">vegtable</a> object.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Check the available scales
summary(Kenya_veg@coverconvert)

## Conversion by default 'top' rule
Kenya_veg &lt;- cover_trans(Kenya_veg, to = "percent")
summary(as.factor(Kenya_veg@samples$percent))

## Conversion by 'middle' rule
Kenya_veg &lt;- cover_trans(Kenya_veg, to = "percent", rule = "middle", replace = TRUE)
summary(as.factor(Kenya_veg@samples$percent))

## Conversion by 'bottom' rule
Kenya_veg &lt;- cover_trans(Kenya_veg, to = "percent", rule = "bottom", replace = TRUE)
summary(as.factor(Kenya_veg@samples$percent))
</code></pre>

<hr>
<h2 id='coverconvert'>Cover conversion tables</h2><span id='topic+coverconvert'></span><span id='topic+coverconvert-class'></span>

<h3>Description</h3>

<p>Cover conversion tables for <a href="#topic+vegtable-class">vegtable</a> objects.
</p>
<p>This class implements conversions from different cover scales in percentage
cover. For transformations to percentage cover, the function <code><a href="#topic+cover_trans">cover_trans()</a></code>
should be than used.
</p>


<h3>Slots</h3>


<dl>
<dt><code>value</code></dt><dd><p>List containing the levels of each scale.</p>
</dd>
<dt><code>conversion</code></dt><dd><p>List with the respective start and end cut levels for the
scale levels.</p>
</dd>
</dl>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+tv2coverconvert">tv2coverconvert()</a></code> <a href="#topic+braun_blanquet">braun_blanquet</a>.
</p>

<hr>
<h2 id='crosstable'>Generating cross tables from database lists</h2><span id='topic+crosstable'></span><span id='topic+crosstable+2Cformula+2Cdata.frame-method'></span><span id='topic+crosstable+2Cformula+2Cvegtable-method'></span><span id='topic+cross2db'></span>

<h3>Description</h3>

<p>cross table is the most common format required by statistical packages
used to analyse vegetation data (e.g.
<a href="https://CRAN.R-project.org/package=vegan">vegan</a>).
</p>
<p>You may use for convenience a formula as
<code>'abundance ~ plot + species + ...'</code>.
Additional variables used for rows (<code>...</code>) can be for instance the
layers.
For objects of class <a href="#topic+vegtable-class">vegtable</a>, the formula can also include
variables from the species list (for example <code>AcceptedName</code>, <code>AuthorName</code>)
or even taxon traits.
</p>
<p>If required, tables already formatted as cross tables can be converted into
column-oriented tables by using the function <code>cross2db()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crosstable(formula, data, ...)

## S4 method for signature 'formula,data.frame'
crosstable(
  formula,
  data,
  FUN,
  na_to_zero = FALSE,
  use_nas = TRUE,
  as_matrix = FALSE,
  ...
)

## S4 method for signature 'formula,vegtable'
crosstable(formula, data, FUN, na_to_zero = FALSE, use_nas = TRUE, ...)

cross2db(object, layers = FALSE, na_strings)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crosstable_+3A_formula">formula</code></td>
<td>
<p>A formula indicating the variables used in the cross table.
This formula can be represented as <code>'abundance ~ cols + rows'</code>, where
<code>'abundance'</code> is the numeric variable quantified for a row in a column,
for instance the abundance of a species in a plot.
Further variables can be set as additional rows indices in a cross table.</p>
</td></tr>
<tr><td><code id="crosstable_+3A_data">data</code></td>
<td>
<p>Either a data frame or an object of class <a href="#topic+vegtable-class">vegtable</a>.</p>
</td></tr>
<tr><td><code id="crosstable_+3A_...">...</code></td>
<td>
<p>Further arguments passed to the function <code><a href="stats.html#topic+aggregate">stats::aggregate()</a></code>.</p>
</td></tr>
<tr><td><code id="crosstable_+3A_fun">FUN</code></td>
<td>
<p>Function used to aggregate values in the case of a multiple
occurrence of a species in a plot, for instance.</p>
</td></tr>
<tr><td><code id="crosstable_+3A_na_to_zero">na_to_zero</code></td>
<td>
<p>A logical value indicating whether zeros should be
inserted into empty cells or not.</p>
</td></tr>
<tr><td><code id="crosstable_+3A_use_nas">use_nas</code></td>
<td>
<p>Logical value indicating whether NAs should be considered as
levels for categorical variables or not.</p>
</td></tr>
<tr><td><code id="crosstable_+3A_as_matrix">as_matrix</code></td>
<td>
<p>A logical value, whether output should be done as matrix or
data frame.</p>
</td></tr>
<tr><td><code id="crosstable_+3A_object">object</code></td>
<td>
<p>A data frame including a cross table.</p>
</td></tr>
<tr><td><code id="crosstable_+3A_layers">layers</code></td>
<td>
<p>Logical value, whether the cross table includes a layer column
or not.</p>
</td></tr>
<tr><td><code id="crosstable_+3A_na_strings">na_strings</code></td>
<td>
<p>Character vector indicating no records in the cross table.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <a href="base.html#topic+data.frame">data.frame</a>.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>veg &lt;- subset(Kenya_veg, REFERENCE == 2331, slot = "header")

## transform cover to percentage
veg &lt;- cover_trans(veg, to = "cover_perc", rule = "middle")

## cross table of the first 5 plots
Cross &lt;- crosstable(cover_perc ~ ReleveID + AcceptedName + AuthorName,
  veg[1:5, ], mean,
  na_to_zero = TRUE
)
head(Cross)
</code></pre>

<hr>
<h2 id='df2coverconvert'>Create coverconvert objects</h2><span id='topic+df2coverconvert'></span><span id='topic+df2coverconvert.list'></span><span id='topic+df2coverconvert+2Clist-method'></span><span id='topic+df2coverconvert.data.frame'></span><span id='topic+df2coverconvert+2Cdata.frame-method'></span>

<h3>Description</h3>

<p>The class <a href="#topic+coverconvert-class">coverconvert</a> contains tables for transforming cover values
to percentage using the function <code><a href="#topic+cover_trans">cover_trans()</a></code>.
These objects can be created from conversion tables imported as data frames.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>df2coverconvert(x, ...)

## S3 method for class 'list'
df2coverconvert(x, ...)

## S3 method for class 'data.frame'
df2coverconvert(x, name, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="df2coverconvert_+3A_x">x</code></td>
<td>
<p>Either a data frame or a list of data frames containing the
conversion table. Three columns are mandatory in such data frames, namely
<strong>value</strong> (factor with the symbols for each class in the cover scale,
sorted from the lowest to the highest value), <strong>bottom</strong> (numeric value
with the bottom values of each class), and <strong>top</strong> (numeric value with
the top values of each class). The values <strong>bottom</strong> and <strong>top</strong> are
usually as cover percentage but they may refer to any other numeric
abundance.</p>
</td></tr>
<tr><td><code id="df2coverconvert_+3A_...">...</code></td>
<td>
<p>Further arguments passed among methods.</p>
</td></tr>
<tr><td><code id="df2coverconvert_+3A_name">name</code></td>
<td>
<p>A character value used as name of the cover scale in the data
frame method. In the list method, this name will be extracted from the
names of the elements in the list.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Convert object into list
cov &lt;- as(Kenya_veg@coverconvert, "list")

## Convert back to coverconvert
cov &lt;- df2coverconvert(cov)

</code></pre>

<hr>
<h2 id='df2vegtable'>Convert a data frame into a vegtable object.</h2><span id='topic+df2vegtable'></span><span id='topic+df2vegtable+2Cdata.frame+2Cnumeric+2Cnumeric-method'></span><span id='topic+df2vegtable+2Cdata.frame+2Cnumeric+2Cmissing-method'></span>

<h3>Description</h3>

<p>Conversion of a data frame containing a cross table of abundance or cover of
species in single plots.
</p>
<p>This function coerces a data frame containing a vegetation cross table into
a <a href="#topic+vegtable-class">vegtable</a> object. The input data frame <code>x</code> may include information
on the layers or not.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>df2vegtable(x, species, layer, ...)

## S4 method for signature 'data.frame,numeric,numeric'
df2vegtable(x, species, layer, ...)

## S4 method for signature 'data.frame,numeric,missing'
df2vegtable(x, species, layer, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="df2vegtable_+3A_x">x</code></td>
<td>
<p>A data frame formatted for a taxlist object.</p>
</td></tr>
<tr><td><code id="df2vegtable_+3A_species">species</code></td>
<td>
<p>Numeric or integer indicating the position of the column with
species names.</p>
</td></tr>
<tr><td><code id="df2vegtable_+3A_layer">layer</code></td>
<td>
<p>Numeric or integer indicating the position of the column with
layers.</p>
</td></tr>
<tr><td><code id="df2vegtable_+3A_...">...</code></td>
<td>
<p>Further arguments passed from or to other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="#topic+vegtable-class">vegtable</a> object.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Creating data set 'dune_veg'
library(vegan)

## Load data from vegan
data(dune)
data(dune.env)

## Conversion to vegtable
dune_veg &lt;- data.frame(
  species = colnames(dune), t(dune),
  stringsAsFactors = FALSE, check.names = FALSE
)
dune_veg &lt;- df2vegtable(dune_veg, species = 1)

summary(dune_veg)

## Adding environmental variables
dune.env$ReleveID &lt;- as.integer(rownames(dune.env))
header(dune_veg) &lt;- dune.env

summary(dune_veg)
</code></pre>

<hr>
<h2 id='dune_veg-data'>Dutch dune meadows as vegtable</h2><span id='topic+dune_veg-data'></span><span id='topic+dune_veg'></span>

<h3>Description</h3>

<p>Data set from the package <a href="vegan.html#topic+vegan-package">vegan::vegan</a>, converted to a <a href="#topic+vegtable-class">vegtable</a>
object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dune_veg
</code></pre>


<h3>Format</h3>

<p>An object of class <code><a href="#topic+vegtable-class">vegtable</a></code>.
</p>


<h3>Source</h3>

<p>Original data were imported from <a href="vegan.html#topic+dune">vegan::dune</a>.
</p>


<h3>References</h3>

<p><b>Jongman RHG, ter Braak CJF, van Tongeren OFR (1987).</b>
<em>Data analysis in community and landscape ecology.</em> Pudoc, Wageningen,
NL.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>summary(dune_veg)
</code></pre>

<hr>
<h2 id='Extract'>Select or replace elements in objects</h2><span id='topic+Extract'></span><span id='topic++24'></span><span id='topic++24+2Cvegtable-method'></span><span id='topic++24+3C-+2Cvegtable+2CANY-method'></span><span id='topic++24+3C-'></span><span id='topic++24+3C-+2Cvegtable-method'></span><span id='topic++24+2Ccoverconvert-method'></span><span id='topic++5B+2Ccoverconvert-method'></span><span id='topic++5B'></span><span id='topic++5B+2Ccoverconvert+2CANY+2CANY+2CANY-method'></span><span id='topic++24+3C-+2Ccoverconvert+2Ccoverconvert-method'></span><span id='topic++5B+2Cvegtable-method'></span><span id='topic++5B+2Cvegtable+2CANY+2CANY+2CANY-method'></span><span id='topic++5B+3C-+2Cvegtable-method'></span><span id='topic++5B+3C-'></span>

<h3>Description</h3>

<p>Methods for quick access to slot <code>header</code> of <a href="#topic+vegtable-class">vegtable</a> objects or for
access to single cover scales in <a href="#topic+coverconvert-class">coverconvert</a> objects.
Also replacement methods are implemented.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'vegtable'
x$name

## S4 replacement method for signature 'vegtable,ANY'
x$name &lt;- value

## S4 method for signature 'coverconvert'
x$name

## S4 method for signature 'coverconvert'
x[i]

## S4 replacement method for signature 'coverconvert,coverconvert'
x$name &lt;- value

## S4 method for signature 'vegtable'
x[i, j, ..., drop = FALSE]

## S4 replacement method for signature 'vegtable'
x[i, j] &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Extract_+3A_x">x</code></td>
<td>
<p>Object of class <a href="#topic+vegtable-class">vegtable</a>.</p>
</td></tr>
<tr><td><code id="Extract_+3A_name">name</code></td>
<td>
<p>A name to access.</p>
</td></tr>
<tr><td><code id="Extract_+3A_value">value</code></td>
<td>
<p>Either a vectors or a list, used as replacement.</p>
</td></tr>
<tr><td><code id="Extract_+3A_i">i</code>, <code id="Extract_+3A_j">j</code></td>
<td>
<p>Indices for access.</p>
</td></tr>
<tr><td><code id="Extract_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
<tr><td><code id="Extract_+3A_drop">drop</code></td>
<td>
<p>A logical value passed to <a href="#topic+Extract">Extract</a>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Range of latitude values in database
range(Kenya_veg$LATITUDE)

## Summary of countries
summary(Kenya_veg$COUNTRY)
summary(droplevels(Kenya_veg$COUNTRY))

## First 5 samples
summary(Kenya_veg[1:5, ])
</code></pre>

<hr>
<h2 id='format_F2'>Have to be described</h2><span id='topic+format_F2'></span>

<h3>Description</h3>

<p>Have to be described
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_F2(x)
</code></pre>

<hr>
<h2 id='header'>Retrieve or replace slot header in vegtable objects</h2><span id='topic+header'></span><span id='topic+header+2Cvegtable-method'></span><span id='topic+header+3C-'></span><span id='topic+header+3C-+2Cvegtable+2Cdata.frame-method'></span>

<h3>Description</h3>

<p>Retrieve or replace the content of slot <code>header</code> in <a href="#topic+vegtable-class">vegtable</a> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>header(x, ...)

## S4 method for signature 'vegtable'
header(x, ...)

header(x) &lt;- value

## S4 replacement method for signature 'vegtable,data.frame'
header(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="header_+3A_x">x</code></td>
<td>
<p>Object of class <a href="#topic+vegtable-class">vegtable</a>.</p>
</td></tr>
<tr><td><code id="header_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
<tr><td><code id="header_+3A_value">value</code></td>
<td>
<p>Data frame to be set as slot <code>header</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>head(header(Kenya_veg))
</code></pre>

<hr>
<h2 id='Kenya_veg-data'>Vegetation-plots from Kenya</h2><span id='topic+Kenya_veg-data'></span><span id='topic+Kenya_veg'></span>

<h3>Description</h3>

<p>A subset of <a href="http://www.givd.info/ID/AF-00-006SWEA-Dataveg">http://www.givd.info/ID/AF-00-006SWEA-Dataveg</a> including
five references providing plots collected in Kenya.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Kenya_veg
</code></pre>


<h3>Format</h3>

<p>An object of class <a href="#topic+vegtable-class">vegtable</a>.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a> and Michael Curran
<a href="mailto:currmi01@gmail.com">currmi01@gmail.com</a>
</p>


<h3>Source</h3>

<p><a href="http://www.givd.info/ID/AF-00-006">http://www.givd.info/ID/AF-00-006</a>
</p>


<h3>References</h3>

<p><b>Bronner G (1990).</b> <em>Vegetation and land use in the
Mathews Range area, Samburu-District, Kenya</em>. J. Cramer, Berlin.
</p>
<p><b>Bussmann RW (1994).</b> <em>The forests of Mount Kenya &ndash; vegetation,
ecology, destruction and management of a tropical mountain forest
ecosystem</em>. Universität Bayreuth.
</p>
<p><b>Bussmann RW (2002).</b> Islands in the desert &ndash; forest vegetation of
Kenya's smaller mountains and highland areas. <em>Journal of East African
Natural History</em> 91: 27&ndash;79.
</p>
<p><b>Fujiwara K, Furukawa T, Kiboi SK, Mathenge S, Mutiso P, Hayashi H,
Meguro S (2014).</b> Forest types and biodiversity around the Great Rift Valley
in Kenya. <em>Contributii Botanice</em> 49: 143&ndash;178.
</p>
<p><b>Schmitt K (1991).</b> <em>The vegetation of the Aberdare National Park
Kenya</em>. Universitätsverlag Wagner, Innsbruck.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>summary(Kenya_veg)
</code></pre>

<hr>
<h2 id='layers2samples'>Add information from slot 'layers' into slot 'samples'</h2><span id='topic+layers2samples'></span><span id='topic+layers2samples+2Cvegtable+2Ccharacter+2Ccharacter-method'></span><span id='topic+layers2samples+2Cvegtable+2Ccharacter+2Cmissing-method'></span>

<h3>Description</h3>

<p>Slot layers may include additional information that should be moved to
samples in order to use it by <code><a href="#topic+subset">subset()</a></code>, <code><a href="stats.html#topic+aggregate">aggregate()</a></code>
or <code><a href="#topic+crosstable">crosstable()</a></code> methods.
</p>
<p>If names of variables are not provided, all variables from the respective
layer table will be inserted in slot <code>samples</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>layers2samples(object, layer, variable, ...)

## S4 method for signature 'vegtable,character,character'
layers2samples(object, layer, variable, ...)

## S4 method for signature 'vegtable,character,missing'
layers2samples(object, layer, variable, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="layers2samples_+3A_object">object</code></td>
<td>
<p>An object of class <a href="#topic+vegtable-class">vegtable</a>.</p>
</td></tr>
<tr><td><code id="layers2samples_+3A_layer">layer</code></td>
<td>
<p>Character value indicating a target layer.</p>
</td></tr>
<tr><td><code id="layers2samples_+3A_variable">variable</code></td>
<td>
<p>Character vector with the names of variables to be inserted
in slot <code>samples</code>.</p>
</td></tr>
<tr><td><code id="layers2samples_+3A_...">...</code></td>
<td>
<p>Further arguments to be passed among methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <a href="#topic+vegtable-class">vegtable</a> with variables added to samples.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>.
</p>

<hr>
<h2 id='make_cocktail'>Produce a Cocktail classification</h2><span id='topic+make_cocktail'></span><span id='topic+set_group'></span><span id='topic+set_group+2Cshaker+2Ctaxlist+2Ccharacter-method'></span><span id='topic+set_group+2Cshaker+2Cvegtable+2Ccharacter-method'></span><span id='topic+set_pseudo'></span><span id='topic+set_pseudo+2Cshaker+2Ctaxlist+2Ccharacter-method'></span><span id='topic+set_pseudo+2Cshaker+2Cvegtable+2Ccharacter-method'></span><span id='topic+set_formula'></span><span id='topic+set_formula+2Cshaker+2Ctaxlist+2Ccharacter-method'></span><span id='topic+set_formula+2Cshaker+2Cvegtable+2Ccharacter-method'></span><span id='topic+make_cocktail+2Cshaker+2Cvegtable-method'></span>

<h3>Description</h3>

<p>Classification of <a href="#topic+vegtable-class">vegtable</a> objects according to <strong>Cocktail</strong>
algorithms.
</p>
<p>Cocktail algorithms are logical functions selecting plots according to
either occurrence of species groups and cover values of single species. A
group will be declared as occurring in a plot when at least a half of its
members is present in the plot.
</p>
<p>This function inserts single columns with logical values indicating whether
a plot is classified in the vegetation unit or not. An additional column
(name provided in argument <code>syntax</code>) compile all vegetation units,
indicating with a <code>+</code> symbol those plots classified in more than one
vegetation unit.
When only a part of the formulas will be used, it should be
specified by the argument <code>which</code>.
</p>
<p>These functions are implemented for constructing or complementing
<a href="#topic+shaker-class">shaker</a> objects.
Note that construction of those objects will always require a <code>companion</code>
object, which is either an object of class <a href="taxlist.html#topic+taxlist-class">taxlist</a> or
<a href="#topic+vegtable-class">vegtable</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_group(shaker, companion, group, ...)

## S4 method for signature 'shaker,taxlist,character'
set_group(
  shaker,
  companion,
  group,
  group_id,
  authority = FALSE,
  enc_cont = "latin1",
  enc_gr = "utf8",
  ...
)

## S4 method for signature 'shaker,vegtable,character'
set_group(shaker, companion, group, ...)

set_pseudo(shaker, companion, pseudo, ...)

## S4 method for signature 'shaker,taxlist,character'
set_pseudo(
  shaker,
  companion,
  pseudo,
  pseudo_id,
  authority = FALSE,
  enc_cont = "latin1",
  enc_gr = "utf8",
  ...
)

## S4 method for signature 'shaker,vegtable,character'
set_pseudo(shaker, companion, pseudo, ...)

set_formula(shaker, companion, formula, ...)

## S4 method for signature 'shaker,taxlist,character'
set_formula(
  shaker,
  companion,
  formula,
  formula_id,
  authority = FALSE,
  enc_cont = "latin1",
  enc_gr = "utf8",
  ...
)

## S4 method for signature 'shaker,vegtable,character'
set_formula(shaker, companion, formula, ...)

make_cocktail(shaker, vegtable, ...)

## S4 method for signature 'shaker,vegtable'
make_cocktail(
  shaker,
  vegtable,
  which,
  cover,
  syntax = "Syntax",
  FUN = sum,
  in_header = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_cocktail_+3A_shaker">shaker</code></td>
<td>
<p>An object of class <a href="#topic+shaker-class">shaker</a> containing the respective
cocktail definitions.</p>
</td></tr>
<tr><td><code id="make_cocktail_+3A_companion">companion</code></td>
<td>
<p>Either a <a href="taxlist.html#topic+taxlist-class">taxlist</a> or a <a href="#topic+vegtable-class">vegtable</a> object.</p>
</td></tr>
<tr><td><code id="make_cocktail_+3A_...">...</code></td>
<td>
<p>Further arguments passes from or to other methods.</p>
</td></tr>
<tr><td><code id="make_cocktail_+3A_authority">authority</code></td>
<td>
<p>Logical value indicating whether author names should be
included in the taxon name or not.</p>
</td></tr>
<tr><td><code id="make_cocktail_+3A_enc_cont">enc_cont</code>, <code id="make_cocktail_+3A_enc_gr">enc_gr</code></td>
<td>
<p>Encodings used for special characters.</p>
</td></tr>
<tr><td><code id="make_cocktail_+3A_pseudo">pseudo</code>, <code id="make_cocktail_+3A_group">group</code></td>
<td>
<p>Character vector with names of taxa included in a
pseudo-species or a species group.</p>
</td></tr>
<tr><td><code id="make_cocktail_+3A_pseudo_id">pseudo_id</code>, <code id="make_cocktail_+3A_group_id">group_id</code>, <code id="make_cocktail_+3A_formula_id">formula_id</code></td>
<td>
<p>Character value as name of the
pseudo-species, species group or defined vegetation unit.</p>
</td></tr>
<tr><td><code id="make_cocktail_+3A_formula">formula</code></td>
<td>
<p>Character vector including a formula as definition of a
vegetation unit.</p>
</td></tr>
<tr><td><code id="make_cocktail_+3A_vegtable">vegtable</code></td>
<td>
<p>An object of class <a href="#topic+vegtable-class">vegtable</a> containing the
vegetation observations to be classified.</p>
</td></tr>
<tr><td><code id="make_cocktail_+3A_which">which</code></td>
<td>
<p>Integer or character indicating the definition to be applied
for classification.</p>
</td></tr>
<tr><td><code id="make_cocktail_+3A_cover">cover</code></td>
<td>
<p>Name of the cover variable in <code>vegtable</code>.</p>
</td></tr>
<tr><td><code id="make_cocktail_+3A_syntax">syntax</code></td>
<td>
<p>Character value indicating the name of the retrieved variable
including the final classification of plots.</p>
</td></tr>
<tr><td><code id="make_cocktail_+3A_fun">FUN</code></td>
<td>
<p>Function used for merging multiple occurrence of species in a
single plot.</p>
</td></tr>
<tr><td><code id="make_cocktail_+3A_in_header">in_header</code></td>
<td>
<p>Logical value indicating whether results of Cocktail
classification should be inserted to the header of the input vegtable or
not. In the second case, a data frame is provided as output.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame corresponding to the slot <code>header</code> of input object <code>vegtable</code>,
including the results of Cocktail classification for the respective plots.
</p>
<p>A <a href="#topic+shaker-class">shaker</a> object.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>References</h3>

<p><b>Alvarez M (2017).</b> Classification of aquatic and
semi-aquatic vegetation in two East African sites: Cocktail definitions and
syntaxonomy. <em>Phytocoenologia</em>.
</p>
<p><b>Bruelheide H (2000).</b> A new measure of fidelity and its application to
defining species groups. <em>Journal of Vegetation Science</em> 11: 167&ndash;178.
</p>
<p><b>Kočí M, Chytrý M, Tichý L (2003).</b> Formalized reproduction of an
expert-based phytosociological classification: a case study of subalpine
tall-forb vegetation. <em>Journal of Vegetation Science</em> 14: 601&ndash;610.
</p>


<h3>See Also</h3>

<p><a href="#topic+shaker-class">shaker</a> <a href="#topic+vegtable-class">vegtable</a> <a href="#topic+Wetlands">Wetlands</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example from Alvarez (2017)
Wetlands_veg &lt;- make_cocktail(Wetlands, Wetlands_veg, cover = "percen")
summary(as.factor(Wetlands_veg@header$Syntax))

## Same but only for two vegetation units
Wetlands_veg &lt;- make_cocktail(Wetlands, Wetlands_veg,
  which = c("HY1", "HY2"), cover = "percen"
)
summary(as.factor(Wetlands_veg$Syntax))

## Construct the 'shaker' object anew
Wetlands &lt;- new("shaker")

## Set a pseudo-species
Wetlands &lt;- set_pseudo(Wetlands, Wetlands_veg, c(
  "Cyperus latifolius",
  "Cyperus exaltatus"
))

## Set a species group
Wetlands &lt;- set_group(Wetlands, Wetlands_veg,
  group_id = "Cyperus papyrus",
  group = c(
    "Cyperus papyrus",
    "Cyclosorus interruptus",
    "Lepistemon owariense"
  )
)

## Set a fromula
Wetlands &lt;- set_formula(Wetlands, Wetlands_veg,
  formula_id = "HE1",
  formula = "groups:'Cyperus papyrus' | species:'Cyperus papyrus &gt; 50'"
)

## Summaries
summary(Wetlands)
summary(Wetlands, Wetlands_veg)
</code></pre>

<hr>
<h2 id='names'>Retrieve names of vegtable and coverconvert objects</h2><span id='topic+names'></span><span id='topic+names+2Cvegtable-method'></span><span id='topic+dimnames+2Cvegtable-method'></span><span id='topic+dimnames'></span><span id='topic+names+2Ccoverconvert-method'></span><span id='topic+names+3C-+2Ccoverconvert-method'></span>

<h3>Description</h3>

<p>Quick access to column names in slot header and names of conversion codes.
</p>
<p>These methods provide a quick display of the contents in
<a href="#topic+coverconvert-class">coverconvert</a> and <a href="#topic+vegtable-class">vegtable</a> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'vegtable'
names(x)

## S4 method for signature 'vegtable'
dimnames(x)

## S4 method for signature 'coverconvert'
names(x)

## S4 replacement method for signature 'coverconvert'
names(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="names_+3A_x">x</code></td>
<td>
<p>An object of class <a href="#topic+coverconvert-class">coverconvert</a> or <a href="#topic+vegtable-class">vegtable</a>.</p>
</td></tr>
<tr><td><code id="names_+3A_value">value</code></td>
<td>
<p>A character vector used for replacement methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the names from each slot.
</p>
<p>Either a vector or a list (in the case of <code>dimnames()</code>) with
the names of variables.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>names(Kenya_veg@coverconvert)
names(Kenya_veg)
dimnames(Kenya_veg)
</code></pre>

<hr>
<h2 id='new_relation'>Insert a new variable as relation in vegtable object</h2><span id='topic+new_relation'></span><span id='topic+new_relation.vegtable'></span><span id='topic+new_relation+2Cvegtable-method'></span><span id='topic+new_relation+3C-'></span><span id='topic+new_relation+3C-+2Cvegtable+2Ccharacter+2Ccharacter-method'></span><span id='topic+new_relation+3C-+2Cvegtable+2Cmissing+2Ccharacter-method'></span>

<h3>Description</h3>

<p>Insert a new variable in slot <strong>header</strong> with a respective table at slot
<strong>relations</strong>. The respective variable in header will be set as factor.
</p>
<p>Existing categorical variables can also be set as relations. If such
variables are factors, its levels can be preserved (missing argument in
<code>'levels'</code>) or reset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_relation(object, ...)

## S3 method for class 'vegtable'
new_relation(object, relation, levels, ...)

new_relation(object, levels) &lt;- value

## S4 replacement method for signature 'vegtable,character,character'
new_relation(object, levels) &lt;- value

## S4 replacement method for signature 'vegtable,missing,character'
new_relation(object) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_relation_+3A_object">object</code></td>
<td>
<p>A <a href="#topic+vegtable-class">vegtable</a> object.</p>
</td></tr>
<tr><td><code id="new_relation_+3A_...">...</code></td>
<td>
<p>Further arguments passed among methods.</p>
</td></tr>
<tr><td><code id="new_relation_+3A_relation">relation</code>, <code id="new_relation_+3A_value">value</code></td>
<td>
<p>A character value indicating the name of the new
relation. The parameter 'value' is used for the replacement method</p>
</td></tr>
<tr><td><code id="new_relation_+3A_levels">levels</code></td>
<td>
<p>A character vector with the levels for the inserted factor.
This may be missing for variables that already exist in slot <strong>header</strong>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="#topic+vegtable-class">vegtable</a> object with the inserted new relation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## A brand new variable
new_relation(Kenya_veg, levels = c("forest", "grassland", "cropland")) &lt;- "land_use"

## Set an existing variable as relation
new_relation(Kenya_veg) &lt;- "REMARKS"

</code></pre>

<hr>
<h2 id='relation2header'>Insert variables from relations into header</h2><span id='topic+relation2header'></span><span id='topic+relation2header.vegtable'></span><span id='topic+relation2header+2Cvegtable-method'></span>

<h3>Description</h3>

<p>Information associated to categories listed in slot <strong>relations</strong> can be
inserted to slot <strong>header</strong> for further statistical comparisons.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>relation2header(vegtable, ...)

## S3 method for class 'vegtable'
relation2header(vegtable, relation, vars, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="relation2header_+3A_vegtable">vegtable</code></td>
<td>
<p>An <a href="#topic+vegtable-class">vegtable</a> object.</p>
</td></tr>
<tr><td><code id="relation2header_+3A_...">...</code></td>
<td>
<p>Further arguments passed among methods</p>
</td></tr>
<tr><td><code id="relation2header_+3A_relation">relation</code></td>
<td>
<p>A character value indicating the relation to be used for
inserting new variables in slot header.</p>
</td></tr>
<tr><td><code id="relation2header_+3A_vars">vars</code></td>
<td>
<p>A selection of variables from the relation to be inserted in
header. This function will check the existence of the variables in the
respective relation and retrieve an error if none is matching the names.
If missing in the arguments, all variables of the respective relation
will be inserted.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="#topic+vegtable-class">vegtable</a> object.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez, <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Insert publication year of the source into header
veg &lt;- relation2header(Kenya_veg, "REFERENCE", "YEAR")

## Show the frequency of plots per publication year
summary(as.factor(veg$YEAR))

</code></pre>

<hr>
<h2 id='rewrite_formulas'>Re-writing formulas for print output</h2><span id='topic+rewrite_formulas'></span>

<h3>Description</h3>

<p>Mediating between syntax and print format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rewrite_formulas(shaker, companion)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rewrite_formulas_+3A_shaker">shaker</code></td>
<td>
<p>A <a href="#topic+shaker-class">shaker</a> object.</p>
</td></tr>
<tr><td><code id="rewrite_formulas_+3A_companion">companion</code></td>
<td>
<p>A companion data set which is either missing or a
<a href="#topic+vegtable-class">vegtable</a> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A formated output text.
</p>

<hr>
<h2 id='shaker-class'>Class containing Cocktail algorithms.</h2><span id='topic+shaker-class'></span><span id='topic+shaker'></span>

<h3>Description</h3>

<p>Objects used for collecting Cocktail definitions.
</p>
<p>These objects work as <b>expert systems</b> for recognition of defined
vegetation units among plots of a <a href="#topic+vegtable-class">vegtable</a> object.
A <code>shaker</code> object will be always dependent on a <a href="#topic+vegtable-class">vegtable</a> object,
which is called <code>companion</code>.
Since modifications in the <code>companion</code> may affect the functionality of
the <code>shaker</code> object, it will be recommended to create the last during
a session by a source script instead of recycling them from old R images.
</p>


<h3>Slots</h3>


<dl>
<dt><code>pseudos</code></dt><dd><p>List containing IDs of taxa that will be merged into
pseudo-species.</p>
</dd>
<dt><code>groups</code></dt><dd><p>List containing IDs of taxa belonging to the same Cocktail
group.</p>
</dd>
<dt><code>dominants</code></dt><dd><p>A data frame including lists of species used as dominant
species in Cocktail algorithms, as well as operators and cover values
used in the formulas.</p>
</dd>
<dt><code>formulas</code></dt><dd><p>List with formulas that will be used as definitions for
vegetation units.</p>
</dd>
</dl>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make_cocktail">make_cocktail()</a></code> <code><a href="#topic+set_pseudo">set_pseudo()</a></code> <code><a href="#topic+set_group">set_group()</a></code> <code><a href="#topic+set_formula">set_formula()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>showClass("shaker")
</code></pre>

<hr>
<h2 id='subset'>Subset functions for vegtable objects</h2><span id='topic+subset'></span><span id='topic+subset+2Cvegtable-method'></span>

<h3>Description</h3>

<p>Produce subsets of <a href="#topic+vegtable-class">vegtable</a> objects.
</p>
<p>Logical operations can be applied either to the plots, or the
relations, which are the main slots in that class.
</p>
<p>This method can be referred to the slot <code>species</code> the same way as
<code><a href="taxlist.html#topic+subset">taxlist::subset()</a></code>, then the rest of the data will include only
references to the subset of species list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'vegtable'
subset(
  x,
  subset,
  slot = "header",
  keep_children = FALSE,
  keep_parents = FALSE,
  relation,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="subset_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+vegtable-class">vegtable</a> object for subset.</p>
</td></tr>
<tr><td><code id="subset_+3A_subset">subset</code></td>
<td>
<p>Logical expression for the subset.</p>
</td></tr>
<tr><td><code id="subset_+3A_slot">slot</code></td>
<td>
<p>Character value indicating the slot used as reference for subset.
At the moment only the values &quot;taxonNames&quot;, &quot;taxonRelations&quot;,
&quot;taxonTraits&quot;, &quot;header&quot;, &quot;samples&quot;, and &quot;relations&quot; are accepted.
The three first values will be applied to the respective slots in the
contained <a href="taxlist.html#topic+taxlist-class">taxlist</a> object (slot <strong>species</strong>).</p>
</td></tr>
<tr><td><code id="subset_+3A_keep_children">keep_children</code></td>
<td>
<p>Argument passed to <code><a href="taxlist.html#topic+get_children">taxlist::get_children()</a></code>.</p>
</td></tr>
<tr><td><code id="subset_+3A_keep_parents">keep_parents</code></td>
<td>
<p>Argument passed to <code><a href="taxlist.html#topic+get_children">taxlist::get_parents()</a></code>.</p>
</td></tr>
<tr><td><code id="subset_+3A_relation">relation</code></td>
<td>
<p>Character value indicating the relation (slot <strong>relations</strong>)
to be used as reference for subset.</p>
</td></tr>
<tr><td><code id="subset_+3A_...">...</code></td>
<td>
<p>Further arguments passed from or to other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A S4 object of class <a href="#topic+vegtable-class">vegtable</a>.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Subset by taxon name
Kenya_sub &lt;- subset(
  x = Kenya_veg, subset = TaxonName == "Tagetes",
  slot = "taxonNames", keep_children = TRUE, keep_parents = TRUE
)
summary(Kenya_sub)
summary(Kenya_sub@species)

## Subset by taxon relations
Kenya_sub &lt;- subset(
  x = Kenya_veg, subset = Level == "species",
  slot = "taxonRelations"
)
summary(Kenya_sub)
summary(Kenya_sub@species)

## Subset by taxon traits
Kenya_sub &lt;- subset(
  x = Kenya_veg, subset = lf_behn_2018 == "obligate_annual",
  slot = "taxonTraits"
)
summary(Kenya_sub)
summary(Kenya_sub@species)

## Subset by header
Kenya_sub &lt;- subset(x = Kenya_veg, subset = ALTITUDE &lt;= 1000, slot = "header")
summary(Kenya_sub)

## Subset by samples (after converting coverage)
Kenya_veg &lt;- cover_trans(x = Kenya_veg, to = "cover_percentage", rule = "middle")
Kenya_sub &lt;- subset(x = Kenya_veg, subset = cover_percentage &gt;= 50, slot = "samples")
summary(Kenya_sub)

## Subset by relations
Kenya_sub &lt;- subset(
  x = Kenya_veg, subset = as.integer(YEAR) &gt;= 2000,
  slot = "relations", relation = "REFERENCE"
)
summary(Kenya_sub)
</code></pre>

<hr>
<h2 id='summary'>Summary method for vegtable objects</h2><span id='topic+summary'></span><span id='topic+summary+2Cvegtable-method'></span><span id='topic+summary+2Ccoverconvert-method'></span><span id='topic+summary+2Cshaker-method'></span><span id='topic+show+2Cvegtable-method'></span><span id='topic+print+2Cvegtable-method'></span><span id='topic+show+2Ccoverconvert-method'></span><span id='topic+print+2Ccoverconvert-method'></span><span id='topic+show+2Cshaker-method'></span><span id='topic+print+2Cshaker-method'></span>

<h3>Description</h3>

<p>Display summaries for <a href="#topic+vegtable-class">vegtable</a> objects.
</p>
<p>Those methods are implemented for objects of the classes <a href="#topic+vegtable-class">vegtable</a>,
<a href="#topic+coverconvert-class">coverconvert</a> and <a href="#topic+shaker-class">shaker</a>.
</p>
<p>The method for class <code>vegtable</code> retrieves the metadata, the size of
the object, its validity and additional statistics on the content of input
object.
</p>
<p>For objects of class <a href="#topic+shaker-class">shaker</a>, the function <code>summary()</code> will either
retrieve general statistics when <code>companion</code> is missing, or a more detailed
display when accompained by a <a href="taxlist.html#topic+taxlist-class">taxlist</a> or <a href="#topic+vegtable-class">vegtable</a> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'vegtable'
summary(object, units = "Kb", ...)

## S4 method for signature 'coverconvert'
summary(object, ...)

## S4 method for signature 'shaker'
summary(object, companion, authority = FALSE, ...)

## S4 method for signature 'vegtable'
show(object)

## S4 method for signature 'vegtable'
print(x, ...)

## S4 method for signature 'coverconvert'
show(object)

## S4 method for signature 'coverconvert'
print(x, ...)

## S4 method for signature 'shaker'
show(object)

## S4 method for signature 'shaker'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary_+3A_object">object</code>, <code id="summary_+3A_x">x</code></td>
<td>
<p>Object to be summarized.</p>
</td></tr>
<tr><td><code id="summary_+3A_units">units</code></td>
<td>
<p>Units used for object size (passed to <code><a href="base.html#topic+format">format()</a></code>).</p>
</td></tr>
<tr><td><code id="summary_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from other methods.</p>
</td></tr>
<tr><td><code id="summary_+3A_companion">companion</code></td>
<td>
<p>Companion object (either a <a href="taxlist.html#topic+taxlist-class">taxlist</a> or a
<a href="#topic+vegtable-class">vegtable</a> object.</p>
</td></tr>
<tr><td><code id="summary_+3A_authority">authority</code></td>
<td>
<p>Logical value indicating whether authors should be
displayed or not.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Summary for 'vegtable' objects
summary(Wetlands_veg)
## Summary for 'coverconvert' objects
summary(braun_blanquet)
## Summary for 'shaker' objects (alone and with companion)
summary(Wetlands, Wetlands_veg)
</code></pre>

<hr>
<h2 id='taxa2samples'>Insert taxon information into samples</h2><span id='topic+taxa2samples'></span><span id='topic+taxa2samples.vegtable'></span><span id='topic+taxa2samples+2Cvegtable-method'></span>

<h3>Description</h3>

<p>For statistical purposes it may be necessary to insert information on
recorded taxa into the slot samples, which contain the records of taxa in
sampling plots.
This can be also done selectivelly for specific taxonomic ranks and lower
ranks can be aggregated to their parental ones.
</p>
<p>If column <strong>TaxonConceptID</strong> is already existing in <code>'objec@samples'</code>,
this column will get overwritten, retrieving a warning message.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taxa2samples(object, ...)

## S3 method for class 'vegtable'
taxa2samples(
  object,
  merge_to,
  include_levels,
  add_relations = FALSE,
  add_traits = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="taxa2samples_+3A_object">object</code></td>
<td>
<p>A <a href="#topic+vegtable-class">vegtable</a> object.</p>
</td></tr>
<tr><td><code id="taxa2samples_+3A_...">...</code></td>
<td>
<p>Further arguments passed among methods.</p>
</td></tr>
<tr><td><code id="taxa2samples_+3A_merge_to">merge_to</code></td>
<td>
<p>Character value indicating the level (taxonomic rank) to
which taxa of lower rank have to be merged.</p>
</td></tr>
<tr><td><code id="taxa2samples_+3A_include_levels">include_levels</code></td>
<td>
<p>Character vector indicating the levels to be considered
in the output object. This will set the values of <strong>TaxonConceptID</strong> and
any respective values inserted from slots <strong>taxonRelations</strong> and
<strong>taxonTraits</strong> as NA.</p>
</td></tr>
<tr><td><code id="taxa2samples_+3A_add_relations">add_relations</code></td>
<td>
<p>A logical value indicating whether the content of slot
<strong>taxonRelations</strong> have to be inserted in slot <strong>samples</strong> or not.</p>
</td></tr>
<tr><td><code id="taxa2samples_+3A_add_traits">add_traits</code></td>
<td>
<p>A logical value indicating whether the content of slot
<strong>taxonTraits</strong> have to be inserted in slot <strong>samples</strong> or not.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <a href="#topic+vegtable-class">vegtable</a>.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Add only variable TaxonConceptID
veg &lt;- taxa2samples(Kenya_veg)
head(veg@samples)

## Add also information from slots taxonRelations and taxonTraits
veg &lt;- taxa2samples(Kenya_veg, add_relations = TRUE, add_traits = TRUE)
head(veg@samples)

## Different ranks recorded at samples
veg &lt;- taxa2samples(Kenya_veg, add_relations = TRUE)
summary(veg@samples$Level)

## Aggregate taxa to family level
veg &lt;- taxa2samples(Kenya_veg, add_relations = TRUE, merge_to = "family")
summary(veg@samples$Level)

</code></pre>

<hr>
<h2 id='trait_stats'>Statistics and proportion for taxon traits</h2><span id='topic+trait_stats'></span><span id='topic+trait_stats+2Ccharacter+2Cvegtable-method'></span><span id='topic+trait_stats+2Cformula+2Cvegtable-method'></span><span id='topic+trait_proportion'></span><span id='topic+trait_proportion+2Ccharacter+2Cvegtable-method'></span><span id='topic+trait_proportion+2Cformula+2Cvegtable-method'></span>

<h3>Description</h3>

<p>Calculation of statistics and proportions of taxon traits for plot
observations or groups of observations, considering data relationships,
taxonomic ranks and the handling of not available values.
</p>
<p>In <code>trait_stats()</code> you can use customized functions, which have to be
defined as <code>foo(x, w, ...)</code>, where <code>'x'</code> is the (numeric) taxon trait and
<code>'w'</code> is the weight (e.g. the abundance).
</p>
<p>With the arguments <code>taxon_levels</code> and <code>merge_to</code> the used taxonomic ranks
can be defined, where the first one indicates which ranks
have to be considered in the calculations and the second one determine the
aggregation of taxa from a lower level to a parental one.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trait_stats(trait, object, ...)

## S4 method for signature 'character,vegtable'
trait_stats(
  trait,
  object,
  FUN,
  head_var = "ReleveID",
  taxon_levels,
  merge_to,
  weight,
  suffix = "_stats",
  in_header = TRUE,
  na.rm = TRUE,
  ...
)

## S4 method for signature 'formula,vegtable'
trait_stats(trait, object, ...)

trait_proportion(trait, object, ...)

## S4 method for signature 'character,vegtable'
trait_proportion(
  trait,
  object,
  head_var = "ReleveID",
  trait_levels,
  taxon_levels,
  merge_to,
  include_nas = TRUE,
  weight,
  suffix = "_prop",
  in_header = TRUE,
  ...
)

## S4 method for signature 'formula,vegtable'
trait_proportion(trait, object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trait_stats_+3A_trait">trait</code></td>
<td>
<p>Either a character value indicating the name of trait variable
or a formula as <code>'trait ~ head_var'</code>. Note that you can add multiple
variables in the form <code>trait_1 + ... + trait_n ~ head_var</code>.</p>
</td></tr>
<tr><td><code id="trait_stats_+3A_object">object</code></td>
<td>
<p>A <a href="#topic+vegtable-class">vegtable</a> object.</p>
</td></tr>
<tr><td><code id="trait_stats_+3A_...">...</code></td>
<td>
<p>Further arguments passed among methods. In the case of the
character method, they are passed to 'FUN'.</p>
</td></tr>
<tr><td><code id="trait_stats_+3A_fun">FUN</code></td>
<td>
<p>A function usually defined as <code>foo(x, ...)</code> or as
<code>foo(x, w, ...)</code> for weighted statistics.</p>
</td></tr>
<tr><td><code id="trait_stats_+3A_head_var">head_var</code></td>
<td>
<p>Character value, the name of the variable at slot header to
be used as aggregation level for the calculation of statistics or
proportions.
If not provided, the function will use <strong>ReleveID</strong> by default.</p>
</td></tr>
<tr><td><code id="trait_stats_+3A_taxon_levels">taxon_levels</code></td>
<td>
<p>Character vector indicating the selected taxonomic ranks
to be considered in the output.</p>
</td></tr>
<tr><td><code id="trait_stats_+3A_merge_to">merge_to</code></td>
<td>
<p>Character value indicating the taxonomic rank for
aggregation of taxa.
All ranks lower than the one indicated here will be assigned to the
respective parents at the required taxonomic rank.</p>
</td></tr>
<tr><td><code id="trait_stats_+3A_weight">weight</code></td>
<td>
<p>Character value indicating the name of the variable at slot
<strong>samples</strong> used as weight for the proportions. Usually the numeric
abundance.</p>
</td></tr>
<tr><td><code id="trait_stats_+3A_suffix">suffix</code></td>
<td>
<p>A suffix added to the name of the trait variable or to the
levels of categorical trait variables. I is meant to avoid homonymous
variables within the same object.</p>
</td></tr>
<tr><td><code id="trait_stats_+3A_in_header">in_header</code></td>
<td>
<p>Logical value indicating whether the output should be
inserted in the slot <strong>header</strong> or provided as data frame. In the case
that <code>'head_var'</code> (or the right term in the formula method) is different
from <strong>ReleveID</strong>, the statistics and proportions will be inserted in the
respective data frame at slot <strong>relations</strong>.</p>
</td></tr>
<tr><td><code id="trait_stats_+3A_na.rm">na.rm</code></td>
<td>
<p>A logical value indicating whether NAs should be removed for the
calculation of statistics or not. It is passed to <code>'FUN'</code> in
<code>trait_stats()</code>.</p>
</td></tr>
<tr><td><code id="trait_stats_+3A_trait_levels">trait_levels</code></td>
<td>
<p>Character vector indicating a selection of levels from a
trait, in the case that some levels should be ignored in the output.
Trait levels that are skipped at output will be still used for the
calculation of proportions.
This argument gets only applied for the character method.</p>
</td></tr>
<tr><td><code id="trait_stats_+3A_include_nas">include_nas</code></td>
<td>
<p>Logical value indicating whether NAs should be considered
for the calculation of proportions or not.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the proportions of traits levels or statistics for
the trait variable, or an object of class <a href="#topic+vegtable-class">vegtable</a> including those
results at the slot <code>header</code>.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>veg &lt;- cover_trans(Kenya_veg, to = "cover")
veg &lt;- trait_proportion("lf_behn_2018", veg,
  trait_levels = "obligate_annual", weight = "cover", include_nas = FALSE
)
summary(veg$obligate_annual_prop)
</code></pre>

<hr>
<h2 id='tv2vegtable'>Import of vegetation data from Turboveg databases</h2><span id='topic+tv2vegtable'></span><span id='topic+tv2coverconvert'></span>

<h3>Description</h3>

<p>Import function for <strong>Turboveg</strong> databases into an object of class
<a href="#topic+vegtable-class">vegtable</a>.
Most of the contents of <strong>Turboveg</strong> databases are included in DBF files and
therefore imported by the function <code><a href="foreign.html#topic+read.dbf">foreign::read.dbf()</a></code>.
The automatic setting of database path will be done by the function
<code><a href="vegdata.html#topic+tv.home">vegdata::tv.home()</a></code> but it can be customised by the argument <code>tv_home</code>.
</p>
<p>The species list will be imported by using the function
<code><a href="taxlist.html#topic+tv2taxlist">taxlist::tv2taxlist()</a></code> and therefore formatted as a <a href="taxlist.html#topic+taxlist-class">taxlist</a> object.
Similarly, conversion tables will be handled as <a href="#topic+coverconvert-class">coverconvert</a> objects.
</p>
<p>Empty columns in the header will be deleted in the imported object.
</p>
<p>The function <code>tv2coverconvert()</code> reads the content of cover conversion
tables stored in <strong>Turboveg</strong> and attempts to reformat them in a more
comprehensive structure.
</p>
<p>This function is used by <code>tv2vegtable()</code> to import the respective
conversion table from <strong>Turboveg</strong> databases.
Note that conversion tables in <strong>Turboveg</strong> have only stored the middle
point for each cover class in a scale, thus it will be recommended to
rebuild the <code>coverconvert</code> slot or use <a href="#topic+braun_blanquet">braun_blanquet</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tv2vegtable(
  db,
  tv_home = tv.home(),
  skip_empty_relations = TRUE,
  skip_scale,
  clean = TRUE
)

tv2coverconvert(file, as.is = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tv2vegtable_+3A_db">db</code></td>
<td>
<p>Name of <strong>Turboveg</strong> data base as character value.</p>
</td></tr>
<tr><td><code id="tv2vegtable_+3A_tv_home">tv_home</code></td>
<td>
<p><strong>Turboveg</strong> installation path as character value.</p>
</td></tr>
<tr><td><code id="tv2vegtable_+3A_skip_empty_relations">skip_empty_relations</code></td>
<td>
<p>Logical value indicating whether empty relations
may be excluded from imported database or not.</p>
</td></tr>
<tr><td><code id="tv2vegtable_+3A_skip_scale">skip_scale</code></td>
<td>
<p>Character value indicating scales to be excluded in slot
<code>coverconvert</code>.</p>
</td></tr>
<tr><td><code id="tv2vegtable_+3A_clean">clean</code></td>
<td>
<p>Logical value indicating whether output object should be
cleaned or not.</p>
</td></tr>
<tr><td><code id="tv2vegtable_+3A_file">file</code></td>
<td>
<p>A connection to a DBF file containing conversion table in
<strong>Turboveg</strong>.</p>
</td></tr>
<tr><td><code id="tv2vegtable_+3A_as.is">as.is</code></td>
<td>
<p>A logical value passed to <code><a href="foreign.html#topic+read.dbf">read.dbf()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="#topic+vegtable-class">vegtable</a> object in the case of <code>tv2vegtable()</code>.
A <a href="#topic+coverconvert-class">coverconvert</a> object in the case of <code>tv2coverconvert()</code>.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="taxlist.html#topic+tv2taxlist">taxlist::tv2taxlist()</a></code> <code><a href="foreign.html#topic+read.dbf">foreign::read.dbf()</a></code> <code><a href="vegdata.html#topic+tv.home">vegdata::tv.home()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Installed 'Turboveg' version of 'Fujiwara et al. (2014)'
# TV_Home &lt;- file.path(path.package("vegtable"), "tv_data")
# Veg &lt;- tv2vegtable("Fujiwara_2014", TV_Home)
# summary(Veg)
## Installed 'Turboveg' version of "Fujiwara et al. (2014)"
TV_Home &lt;- file.path(path.package("vegtable"), "tv_data", "popup", "Swea")
Table &lt;- tv2coverconvert(file.path(TV_Home, "tvscale.dbf"))

## First scale have to be deleted from conversion table
Table@value &lt;- Table@value[-1]
Table@conversion &lt;- Table@conversion[-1]
summary(Table)

## Compare the 'Turboveg' version with a vegtable version
data(braun_blanquet)
summary(Table$br_bl)
summary(braun_blanquet$br_bl)
</code></pre>

<hr>
<h2 id='update_det'>Update by determined specimens</h2><span id='topic+update_det'></span><span id='topic+update_det+2Cvegtable+2Ccharacter-method'></span><span id='topic+update_det+2Cvegtable-method'></span>

<h3>Description</h3>

<p>Reference specimens can be integrated in slot <strong>layers</strong> within a
<a href="#topic+vegtable-class">vegtable</a> object.
Updated entries in the specimens can be updated in slot <strong>samples</strong> by using
this function.
Alternatively expert opinions can be inserted and applied in case of
disagreement with the original records.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_det(x, specimens, ...)

## S4 method for signature 'vegtable,character'
update_det(x, specimens, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_det_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+vegtable-class">vegtable</a> object to be updated.</p>
</td></tr>
<tr><td><code id="update_det_+3A_specimens">specimens</code></td>
<td>
<p>A character vector indicating the names of tables included
in slot <strong>layers</strong> with updates to be applied.
Note that they will be applied in the same order of the vector in the
case of multiple updates.</p>
</td></tr>
<tr><td><code id="update_det_+3A_...">...</code></td>
<td>
<p>Further arguments (not yet in use).</p>
</td></tr>
</table>

<hr>
<h2 id='used_synonyms'>Retrieve synonyms or taxon concepts used in a data set</h2><span id='topic+used_synonyms'></span><span id='topic+used_synonyms.vegtable'></span><span id='topic+used_synonyms+2Cvegtable-method'></span><span id='topic+used_concepts'></span><span id='topic+used_concepts.vegtable'></span><span id='topic+used_concepts+2Cvegtable-method'></span>

<h3>Description</h3>

<p>Plots records are rather linked to plant names than plant taxon concepts and
<code>used_synonyms()</code> lists all synonyms linked to records in a <a href="#topic+vegtable-class">vegtable</a>
object, including their respective accepted names.
</p>
<p>On the other side, the function <code>used_concepts()</code> produces a subset of the
taxonomic list embeded in the slot <strong>species</strong> including only taxonomic
concepts linked to records in the slot <strong>samples</strong>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>used_synonyms(x, ...)

## S3 method for class 'vegtable'
used_synonyms(x, ...)

used_concepts(x, ...)

## S3 method for class 'vegtable'
used_concepts(x, keep_children = FALSE, keep_parents = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="used_synonyms_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+vegtable-class">vegtable</a> object.</p>
</td></tr>
<tr><td><code id="used_synonyms_+3A_...">...</code></td>
<td>
<p>Further arguments to be passed from or to another methods.</p>
</td></tr>
<tr><td><code id="used_synonyms_+3A_keep_children">keep_children</code></td>
<td>
<p>A logical argument indicating whether children of
selected taxa should be included in the output or not.
This argument passed to <code><a href="taxlist.html#topic+get_children">get_children()</a></code>.</p>
</td></tr>
<tr><td><code id="used_synonyms_+3A_keep_parents">keep_parents</code></td>
<td>
<p>A logical argument indicating whether parents of
selected taxa should be included in the output or not.
This argument passed to <code><a href="taxlist.html#topic+get_parents">get_parents()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function <code>used_synonyms()</code> returns a data frame including following
variables:
</p>

<dl>
<dt>SynonymID</dt><dd><p>ID of the taxon usage name applied as synonym.</p>
</dd>
<dt>Synonym</dt><dd><p>The synonym itself.</p>
</dd>
<dt>SynonymAuthor</dt><dd><p>Author of synonym.</p>
</dd>
<dt>TaxonConceptID</dt><dd><p>ID of the respective taxon concept.</p>
</dd>
<dt>AcceptedNameID</dt><dd><p>ID of the taxon usage name set as accepted name of
the taxon concept.</p>
</dd>
<dt>AcceptedName</dt><dd><p>The respective accepted name.</p>
</dd>
<dt>AcceptedNameAuthor</dt><dd><p>The author of the accepted name.</p>
</dd>
</dl>

<p>The function <code>used_concepts()</code> returns a <a href="taxlist.html#topic+taxlist-class">taxlist</a> object including
only taxa occurring in the plot observations of the input <a href="#topic+vegtable-class">vegtable</a>
object.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="taxlist.html#topic+accepted_name">accepted_name()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Synonyms used in the Kenya_veg
Synonyms &lt;- used_synonyms(Kenya_veg)
head(Synonyms)

## Subset species list to used concepts
species &lt;- used_concepts(Kenya_veg)
Kenya_veg@species
species

</code></pre>

<hr>
<h2 id='veg_aggregate'>Aggregating information into a data frame</h2><span id='topic+veg_aggregate'></span><span id='topic+veg_aggregate+2Cformula+2Cvegtable+2Cfunction-method'></span>

<h3>Description</h3>

<p>Compute summarizing tables from <a href="#topic+vegtable-class">vegtable</a> objects.
This function works in a similar way as <code><a href="#topic+crosstable">crosstable()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>veg_aggregate(object, data, FUN, ...)

## S4 method for signature 'formula,vegtable,'function''
veg_aggregate(object, data, FUN, use_nas = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="veg_aggregate_+3A_object">object</code></td>
<td>
<p>A formula indicating the variables used for the summary.
As in <code><a href="#topic+crosstable">crosstable()</a></code>, the keywords <code>"TaxonName"</code> and <code>"AcceptedName"</code>
can be used to retrieve taxonomic names, where the second will set the
accepted name for names considered as synonyms.</p>
</td></tr>
<tr><td><code id="veg_aggregate_+3A_data">data</code></td>
<td>
<p>Either a data frame or an object of class <a href="#topic+vegtable-class">vegtable</a>.</p>
</td></tr>
<tr><td><code id="veg_aggregate_+3A_fun">FUN</code></td>
<td>
<p>Function used to aggregate values.</p>
</td></tr>
<tr><td><code id="veg_aggregate_+3A_...">...</code></td>
<td>
<p>Further arguments passed to the function <code><a href="stats.html#topic+aggregate">stats::aggregate()</a></code>.</p>
</td></tr>
<tr><td><code id="veg_aggregate_+3A_use_nas">use_nas</code></td>
<td>
<p>Logical value indicating whether NA's should be included in
categorical variables or not.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <a href="base.html#topic+data.frame">data.frame</a>.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+aggregate">aggregate()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Transform cover to percentage cover
veg &lt;- cover_trans(x = Kenya_veg, to = "cover")

## Frequency of taxa per publication
atab &lt;- veg_aggregate(object = cover ~ AcceptedName + REFERENCE, data = veg, FUN = length)
head(atab)

## Life form proportions per plot
atab &lt;- veg_aggregate(object = cover ~ lf_behn_2018 + ReleveID, data = veg, FUN = sum)
head(atab)

</code></pre>

<hr>
<h2 id='veg_diverstiy'>Calculation of statistics at plot level</h2><span id='topic+veg_diverstiy'></span><span id='topic+shannon'></span><span id='topic+evenness'></span><span id='topic+dominance'></span><span id='topic+simpson'></span><span id='topic+richness'></span><span id='topic+veg_diversity'></span><span id='topic+veg_diversity.vegtable'></span><span id='topic+veg_diversity+2Cvegtable-method'></span>

<h3>Description</h3>

<p>Calculation of diversity statistics at the plot level allowing for customized
functions defined as <code>foo(x, ...)</code>, where <code>x</code> is the vector of abundance
values.
</p>
<p>This function calls <code><a href="#topic+taxa2samples">taxa2samples()</a></code> to derive taxa from taxon usage names in
slot <strong>samples</strong> and multiple records of species in a single plot will be
merged by <a href="stats.html#topic+aggregate">stats::aggregate</a>.
</p>
<p>The functions <code>shannon()</code>, <code>evenness()</code>, and <code>dominance()</code> calculate the
diversity index of Shannon, the evenness, and the dominance
(<em>1 - evenness</em>), respectively.
Dominance is the complementary value to evenness (i.e. <code>1 - evenness</code>).
</p>
<p>The function <code>simpson()</code> calculates the Simpson's index using the alternative
for vegetation plot observations.
</p>
<p>The function <code>richness()</code> counts the number of taxa per plot and can be used
as alternative to <a href="#topic+count_taxa">vegtable::count_taxa</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shannon(x, na.rm = TRUE, ...)

evenness(x, ...)

dominance(x, ...)

simpson(x, na.rm = TRUE, ...)

richness(x, na.rm = TRUE, ...)

veg_diversity(object, ...)

## S3 method for class 'vegtable'
veg_diversity(
  object,
  weight,
  FUN = shannon,
  aggr_fun = mean,
  arg_fun = list(),
  var_name,
  in_header = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="veg_diverstiy_+3A_x">x</code></td>
<td>
<p>A numeric vector containing the abundance of single species.</p>
</td></tr>
<tr><td><code id="veg_diverstiy_+3A_na.rm">na.rm</code></td>
<td>
<p>A logical value indicating whether NA values should be removed
from the abundance vector or not.</p>
</td></tr>
<tr><td><code id="veg_diverstiy_+3A_...">...</code></td>
<td>
<p>Further arguments passed among methods. In <code>'evenness()'</code> and
<code>'dominance()'</code>, these arguments are passed to <code>'shannon()'</code>.
In <code>'veg_diversity()'</code>, these arguments are passed to <code><a href="stats.html#topic+aggregate">aggregate()</a></code>
(actually to <code>'FUN'</code>).</p>
</td></tr>
<tr><td><code id="veg_diverstiy_+3A_object">object</code></td>
<td>
<p>A <a href="#topic+vegtable-class">vegtable</a> object.</p>
</td></tr>
<tr><td><code id="veg_diverstiy_+3A_weight">weight</code></td>
<td>
<p>A character value indicating the name of the column at slot
<strong>samples</strong> which will be used as species abundance.</p>
</td></tr>
<tr><td><code id="veg_diverstiy_+3A_fun">FUN</code></td>
<td>
<p>A function used to calculate the diversity index.</p>
</td></tr>
<tr><td><code id="veg_diverstiy_+3A_aggr_fun">aggr_fun</code></td>
<td>
<p>A function used to aggregate abundance values for multiple
records of a taxon in a plot observation. Average value is used by
default.</p>
</td></tr>
<tr><td><code id="veg_diverstiy_+3A_arg_fun">arg_fun</code></td>
<td>
<p>A named list with parameters and arguments passed to
<code><a href="#topic+taxa2samples">taxa2samples()</a></code>, which will
retrieve the respective taxon concept for each taxon usage name and can
be used to merge taxa at a determined taxonomic rank, for instance to
merge all sub-specific taxa into their respective species
(i.e. <code>'merge_to = "species"'</code>).</p>
</td></tr>
<tr><td><code id="veg_diverstiy_+3A_var_name">var_name</code></td>
<td>
<p>A character value used as name for the calculated index.
If missing, the name of the function will be used.</p>
</td></tr>
<tr><td><code id="veg_diverstiy_+3A_in_header">in_header</code></td>
<td>
<p>A logical value indicating whether the results should be
included as variables in the slot <strong>header</strong> of the input object.
If <code>'in_header = TRUE'</code>, you may assign the result of the function to the
input object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Functions <code>shannon()</code>, <code>evenness()</code>, <code>dominance()</code>, <code>simpson()</code>, and
<code>richness()</code> return a numeric value (the calculated index).
</p>
<p>Funtion <code>veg_diversity()</code> produce either a data frame with calculated values
per plot observation (option <code>'in_header = FALSE'</code>) or a <a href="#topic+vegtable-class">vegtable</a>
object with the calculated values inserted in the slot <strong>header</strong>
(option <code>'in_header = TRUE'</code>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Compare Evenness with Shannon index
Kenya_veg &lt;- cover_trans(x = Kenya_veg, to = "cover")
Kenya_veg &lt;- veg_diversity(object = Kenya_veg, weight = "cover")
Kenya_veg &lt;- veg_diversity(object = Kenya_veg, weight = "cover", FUN = evenness)

with(Kenya_veg@header, plot(shannon, evenness))

</code></pre>

<hr>
<h2 id='veg_relation'>Retrieve or replace relations in vegtable objects</h2><span id='topic+veg_relation'></span><span id='topic+veg_relation+2Cvegtable+2Ccharacter-method'></span><span id='topic+veg_relation+3C-'></span><span id='topic+veg_relation+3C-+2Cvegtable+2Cdata.frame-method'></span>

<h3>Description</h3>

<p>Tables providing information about levels of categorical variables in the
header are called <code>popups</code> in <strong>Turboveg</strong> databases
but <code>relations</code> in <a href="#topic+vegtable-class">vegtable</a> objects.
Such variables will be converted into factors in the slot <code>header</code> according
to the levels and their sorting in the respective relation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>veg_relation(vegtable, relation, ...)

## S4 method for signature 'vegtable,character'
veg_relation(vegtable, relation, match_header = FALSE, ...)

veg_relation(vegtable) &lt;- value

## S4 replacement method for signature 'vegtable,data.frame'
veg_relation(vegtable) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="veg_relation_+3A_vegtable">vegtable</code></td>
<td>
<p>An object of class <a href="#topic+vegtable-class">vegtable</a>.</p>
</td></tr>
<tr><td><code id="veg_relation_+3A_relation">relation</code></td>
<td>
<p>A character value indicating the relation table to be
retrieved or replaced.</p>
</td></tr>
<tr><td><code id="veg_relation_+3A_...">...</code></td>
<td>
<p>Further arguments to be passed among methods.</p>
</td></tr>
<tr><td><code id="veg_relation_+3A_match_header">match_header</code></td>
<td>
<p>A logical vector, whether only levels occurring in slot
<code>header</code> should be considered or all.</p>
</td></tr>
<tr><td><code id="veg_relation_+3A_value">value</code></td>
<td>
<p>A data frame containing the new veg_relation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function retrieves and object of class <code>data.frame</code>.
In the replacement method, an object of class <a href="#topic+vegtable-class">vegtable</a>, including
<code>value</code> in the slot <code>relations</code>.
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## overview of references
veg_relation(Kenya_veg, "REFERENCE")

</code></pre>

<hr>
<h2 id='vegtable_stat'>General statistics from vegtable objects</h2><span id='topic+vegtable_stat'></span><span id='topic+vegtable_stat.vegtable'></span><span id='topic+vegtable_stat+2Cvegtable-method'></span>

<h3>Description</h3>

<p>This function calculates general statistics of local <strong>Turboveg</strong>
databases as required by GIVD (Global Index of Vegetation-Plot Databases,
<a href="https://www.givd.info">https://www.givd.info</a>).
</p>
<p>This function is based on a script delivered by GIVD for summarising
statistics required in the descriptions of databases (see meta data in the
page of the Global Index for Vegetation-Plot Databases).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vegtable_stat(vegtable, ...)

## S3 method for class 'vegtable'
vegtable_stat(vegtable, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vegtable_stat_+3A_vegtable">vegtable</code></td>
<td>
<p>An object of class <a href="#topic+vegtable-class">vegtable</a>.</p>
</td></tr>
<tr><td><code id="vegtable_stat_+3A_...">...</code></td>
<td>
<p>Further arguments passed among methods.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>GIVD. Adapted by Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Statistics for GIVD
vegtable_stat(Kenya_veg)

</code></pre>

<hr>
<h2 id='vegtable-class'>Class vegtable.</h2><span id='topic+vegtable-class'></span><span id='topic+vegtable'></span>

<h3>Description</h3>

<p>Class holding vegetation-plot data sets.
Designed to content all information stored in <strong>Turboveg</strong> databases in
just one object.
</p>
<p>This class was designed to include information of relevés, header data and
species in just one object. Objects can be created by calls of the form
<code>new("vegtable", ...)</code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>description</code></dt><dd><p>A named character vector containing metadata.</p>
</dd>
<dt><code>samples</code></dt><dd><p>A data frame with samples list.</p>
</dd>
<dt><code>header</code></dt><dd><p>A data frame with plots data.</p>
</dd>
<dt><code>species</code></dt><dd><p>Species list as a <a href="taxlist.html#topic+taxlist-class">taxlist</a> object.</p>
</dd>
<dt><code>layers</code></dt><dd><p>A list including strata within samples as data frames.</p>
</dd>
<dt><code>relations</code></dt><dd><p>A list including popup lists as data frames.</p>
</dd>
<dt><code>coverconvert</code></dt><dd><p>A scale conversion object of class <a href="#topic+coverconvert-class">coverconvert</a>.</p>
</dd>
<dt><code>syntax</code></dt><dd><p>A list including syntaxonomic lists either as data frames or as
<a href="taxlist.html#topic+taxlist-class">taxlist</a> objects.</p>
</dd>
</dl>


<h3>See Also</h3>

<p><code><a href="#topic+tv2vegtable">tv2vegtable()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>showClass("vegtable")
</code></pre>

<hr>
<h2 id='Wetlands-data'>Vegetation-plots from Tanzania</h2><span id='topic+Wetlands-data'></span><span id='topic+Wetlands'></span><span id='topic+Wetlands_veg'></span>

<h3>Description</h3>

<p>A subset of <a href="http://www.givd.info/ID/AF-00-006SWEA-Dataveg">http://www.givd.info/ID/AF-00-006SWEA-Dataveg</a> with plots
sampled in Tanzania.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Wetlands
</code></pre>


<h3>Format</h3>

<p>An object of class <a href="#topic+shaker-class">shaker</a> (<code>Wetlands</code>) and the respective companion
as <a href="#topic+vegtable-class">vegtable</a> object (<code>Wetlands_veg</code>).
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Source</h3>

<p><a href="http://www.givd.info/ID/AF-00-006">http://www.givd.info/ID/AF-00-006</a>.
</p>


<h3>References</h3>

<p><b>Alvarez M (2017).</b> Classification of aquatic and
semi-aquatic vegetation in two East African sites: Cocktail definitions and
syntaxonomy. <em>Phytocoenologia</em>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>summary(Wetlands)
summary(Wetlands_veg)
</code></pre>

<hr>
<h2 id='write_juice'>Exporting tables for Juice</h2><span id='topic+write_juice'></span><span id='topic+write_juice+2Cvegtable+2Ccharacter+2Cformula-method'></span><span id='topic+read_juice'></span>

<h3>Description</h3>

<p>This function produce txt files as inport formats for <strong>Juice</strong>
(<a href="https://www.sci.muni.cz/botany/juice/">https://www.sci.muni.cz/botany/juice/</a>).
</p>
<p>This function produces two output files to be imported into a <strong>Juice</strong>
file: A vegetation table produced by <code><a href="#topic+crosstable">crosstable()</a></code> and a header table.
Both tables share the file name plus a suffix (<code>table</code> for the
vegetation table and <code>header</code> for the header).
</p>
<p>For the import in <strong>Juice</strong>, you go to the menu
<code style="white-space: pre;">&#8288;File -&gt; Import -&gt; Table -&gt; from Spreadsheet File (e.g. EXCEL Table)&#8288;</code> and
then follow the wizard.
Do not forget to select the proper settings in the wizard: 1) 'Character
delimiting columns: Comma' (for default argument values). 2) 'Use the second
column as layer information: Unchecked'. 3) 'Cover values: Percentage
Values'.
</p>
<p>To further import the header table you need to go to the menu
<code style="white-space: pre;">&#8288;File -&gt; Import -&gt; Header Data -&gt; From Comma Delimited File&#8288;</code>.
</p>
<p>In the <code>header</code> (see <strong>Value</strong>), the first column (<code style="white-space: pre;">&#8288;Table number&#8288;</code>)
corresponds to the plot number assigned by <strong>Juice</strong> at import, while
the column (<code style="white-space: pre;">&#8288;Releve number&#8288;</code>) is the number originally assigned to the plot
(e.g. <strong>Turboveg</strong> ID).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_juice(data, file, formula, ...)

## S4 method for signature 'vegtable,character,formula'
write_juice(
  data,
  file,
  formula,
  FUN,
  db_name = "Plot Observations",
  header,
  coords,
  sep = ",",
  ...
)

read_juice(file, encoding = "LATIN-1", sep = ";", na = "", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_juice_+3A_data">data</code></td>
<td>
<p>An object of class <a href="#topic+vegtable-class">vegtable</a>.</p>
</td></tr>
<tr><td><code id="write_juice_+3A_file">file</code></td>
<td>
<p>Character value indicating the name of output files (without
file extension).</p>
</td></tr>
<tr><td><code id="write_juice_+3A_formula">formula</code></td>
<td>
<p>A formula passed to <code><a href="#topic+crosstable">crosstable()</a></code>.</p>
</td></tr>
<tr><td><code id="write_juice_+3A_...">...</code></td>
<td>
<p>Further arguments. While <code>write_juice()</code> passes them to the
function <code><a href="#topic+crosstable">crosstable()</a></code>, <code>read_juice()</code> passes those arguments to
<code><a href="base.html#topic+readLines">readLines()</a></code>.</p>
</td></tr>
<tr><td><code id="write_juice_+3A_fun">FUN</code></td>
<td>
<p>Funtion passed to <code><a href="#topic+crosstable">crosstable()</a></code>.</p>
</td></tr>
<tr><td><code id="write_juice_+3A_db_name">db_name</code></td>
<td>
<p>Name for data set displayed in inport wizard.</p>
</td></tr>
<tr><td><code id="write_juice_+3A_header">header</code></td>
<td>
<p>Variables of header to be exported.</p>
</td></tr>
<tr><td><code id="write_juice_+3A_coords">coords</code></td>
<td>
<p>Names of coordinate variables in header of <code>data</code>.</p>
</td></tr>
<tr><td><code id="write_juice_+3A_sep">sep</code></td>
<td>
<p>Separator used to split rows into columns.</p>
</td></tr>
<tr><td><code id="write_juice_+3A_encoding">encoding</code></td>
<td>
<p>Argument passed to <code><a href="base.html#topic+readLines">readLines</a></code>.</p>
</td></tr>
<tr><td><code id="write_juice_+3A_na">na</code></td>
<td>
<p>Character used as not available values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>For <code>read_juice()</code>, a list with two elements: A data frame of species by
plot (<code>cross_table</code>), and a data frame with header data (<code>header</code>).
</p>


<h3>Author(s)</h3>

<p>Miguel Alvarez <a href="mailto:kamapu78@gmail.com">kamapu78@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Subset and transform cover values to percentage
vegetation &lt;- Kenya_veg[1:20, ]
vegetation &lt;- cover_trans(x = vegetation, to = "cover_percent", rule = "middle")

## Write in tempdir
write_juice(data = vegetation, file = file.path(tempdir(), "SWEA"),
    formula = cover_percent ~ ReleveID + AcceptedName, FUN = mean,
    header = c("ReleveID", "COMM_TYPE"))
## Installed 'Juice' version of 'Wetlands_veg'
Veg &lt;- file.path(path.package("vegtable"), "juice", "Wetlands_juice.txt")
Veg &lt;- read_juice(Veg)

summary(Veg)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
