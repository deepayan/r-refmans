<!DOCTYPE html><html lang="en"><head><title>Help for package swfscAirDAS</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {swfscAirDAS}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#swfscAirDAS-package'><p>Southwest Fisheries Science Center Aerial Survey DAS</p></a></li>
<li><a href='#airdas_check'><p>Check AirDAS file</p></a></li>
<li><a href='#airdas_chop_condition'><p>Chop AirDAS data - condition</p></a></li>
<li><a href='#airdas_chop_equallength'><p>Chop AirDAS data - equal length</p></a></li>
<li><a href='#airdas_chop_section'><p>Chop AirDAS data - section</p></a></li>
<li><a href='#airdas_comments'><p>Extract comments from AirDAS data</p></a></li>
<li><a href='#airdas_comments_process'><p>Process comments in AirDAS data</p></a></li>
<li><a href='#airdas_df-class'><p><code>airdas_df</code> class</p></a></li>
<li><a href='#airdas_dfr-class'><p><code>airdas_dfr</code> class</p></a></li>
<li><a href='#airdas_effort'><p>Summarize AirDAS effort</p></a></li>
<li><a href='#airdas_effort_sight'><p>Summarize AirDAS sightings by effort segment</p></a></li>
<li><a href='#airdas_format_pdf'><p>Aerial DAS format requirements</p></a></li>
<li><a href='#airdas_process'><p>Process aerial survey DAS data</p></a></li>
<li><a href='#airdas_read'><p>Read AirDAS file(s)</p></a></li>
<li><a href='#airdas_segdata'><p>Summarize AirDAS data for a continuous effort section</p></a></li>
<li><a href='#airdas_sight'><p>Aerial DAS sightings</p></a></li>
<li><a href='#as_airdas_df'><p>Coerce object to a airdas_df object</p></a></li>
<li><a href='#as_airdas_dfr'><p>Coerce object to a airdas_dfr object</p></a></li>
<li><a href='#subsetting'><p>Subsetting objects created using swfscAirDAS</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Southwest Fisheries Science Center Aerial DAS Data Processing</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Process and summarize aerial survey 'DAS' data (AirDAS) 
    <a href="https://swfsc-publications.fisheries.noaa.gov/publications/TM/SWFSC/NOAA-TM-NMFS-SWFSC-185.PDF">https://swfsc-publications.fisheries.noaa.gov/publications/TM/SWFSC/NOAA-TM-NMFS-SWFSC-185.PDF</a>
    collected using an aerial survey program from the 
    Southwest Fisheries Science Center (SWFSC) 
    <a href="https://www.fisheries.noaa.gov/west-coast/science-data/california-current-marine-mammal-assessment-program">https://www.fisheries.noaa.gov/west-coast/science-data/california-current-marine-mammal-assessment-program</a>.
    PDF files detailing the relevant AirDAS data formats are included in this package.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://swfsc.github.io/swfscAirDAS/">https://swfsc.github.io/swfscAirDAS/</a>,
<a href="https://github.com/swfsc/swfscAirDAS/">https://github.com/swfsc/swfscAirDAS/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/swfsc/swfscAirDAS/issues/">https://github.com/swfsc/swfscAirDAS/issues/</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, lubridate, magrittr, methods, parallel, purrr, readr,
rlang, stringr, swfscDAS (&ge; 0.3.0), swfscMisc, tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 2.1.0), tibble</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (== 2)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-03 17:53:35 UTC; sam.woodman</td>
</tr>
<tr>
<td>Author:</td>
<td>Sam Woodman <a href="https://orcid.org/0000-0001-6071-8186"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sam Woodman &lt;sam.woodman@noaa.gov&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-03 18:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='swfscAirDAS-package'>Southwest Fisheries Science Center Aerial Survey DAS</h2><span id='topic+swfscAirDAS-package'></span><span id='topic+swfscAirDAS'></span>

<h3>Description</h3>

<p>Process and summarize aerial survey DAS data
</p>


<h3>Details</h3>

<p>This package contains functions designed for processing and analyzing 
aerial survey DAS data (AirDAS) collected using one of the following 
Southwest Fisheries Science Center (SWFSC) programs: 
PHOCOENA, SURVEY, CARETTA, or TURTLE (such as TURTLEP or TURTLE 4D).
Functionality includes checking AirDAS data for data entry errors, 
reading AirDAS data into a data frame, processing this data 
(extracting state and condition information for each AirDAS event), 
and summarizing sighting and effort information.
</p>


<h3>Author(s)</h3>

<p>Sam Woodman <a href="mailto:sam.woodman@noaa.gov">sam.woodman@noaa.gov</a>
</p>


<h3>See Also</h3>

<p><a href="https://swfsc.github.io/swfscAirDAS/">https://swfsc.github.io/swfscAirDAS/</a>
</p>

<hr>
<h2 id='airdas_check'>Check AirDAS file</h2><span id='topic+airdas_check'></span>

<h3>Description</h3>

<p>Check that AirDAS file has accepted formatting and values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airdas_check(
  file,
  file.type = c("turtle", "caretta", "phocoena"),
  skip = 0,
  file.out = NULL,
  sp.codes = NULL,
  print.transect = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airdas_check_+3A_file">file</code></td>
<td>
<p>filename(s) of one or more AirDAS files</p>
</td></tr>
<tr><td><code id="airdas_check_+3A_file.type">file.type</code></td>
<td>
<p>character; indicates the program used to create <code>file</code>.
Must be one of: &quot;turtle&quot;, &quot;caretta&quot;, &quot;survey&quot;, or &quot;phocoena&quot; (case
sensitive). Default is &quot;turtle&quot;. Passed to <code><a href="#topic+airdas_read">airdas_read</a></code></p>
</td></tr>
<tr><td><code id="airdas_check_+3A_skip">skip</code></td>
<td>
<p>integer: see <code><a href="readr.html#topic+read_fwf">read_fwf</a></code>. Default is 0. Passed
to <code><a href="#topic+airdas_read">airdas_read</a></code></p>
</td></tr>
<tr><td><code id="airdas_check_+3A_file.out">file.out</code></td>
<td>
<p>character; filename to which to write the error log. Should
be a text or CSV file. Default is <code>NULL</code></p>
</td></tr>
<tr><td><code id="airdas_check_+3A_sp.codes">sp.codes</code></td>
<td>
<p>character; filename of .dat file from which to read accepted
species codes. If <code>NULL</code>, default (internal) file will be used.
Default is <code>NULL</code></p>
</td></tr>
<tr><td><code id="airdas_check_+3A_print.transect">print.transect</code></td>
<td>
<p>logical; indicates if a table with all the transect
numbers in the <code>x</code> should be printed using <code><a href="base.html#topic+table">table</a></code>.
Default is <code>TRUE</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The default (internal) <code>sp.codes</code> file is located at
<code>system.file("SpCodesAirDAS.dat", package = "swfscAirDAS")</code>.
</p>
<p>To see the checks performed by this function, you can access the PDF locally
at <code>system.file("AirDAS_check.pdf", package = "swfscAirDAS")</code>, or online
at
<a href="https://github.com/swfsc/swfscAirDAS/blob/master/inst/AirDAS_check.pdf">https://github.com/swfsc/swfscAirDAS/blob/master/inst/AirDAS_check.pdf</a>
</p>
<p>Checks that are not done by this function that may be of interest:
</p>

<ul>
<li><p> Check for valid fish ball/mola/jelly/crab pot codes
</p>
</li>
<li><p> Check that datetimes are sequential, meaning they 
1) are the same as or 2) come after the previous event
</p>
</li></ul>



<h3>Value</h3>

<p>A data frame with five columns that list information about errors
found in the AirDAS files: the file name, line number, index (row number)
from the <code>airdas_read(file)</code> data frame, 'ID' (pre-Data# columns from
the DAS file), and description of the issue. This data frame is sorted by the
'Description' column. If there are multiple issues with the same line, the
issue descriptions are concatenated together using <code>paste(..., collapse
= "; ")</code>
</p>
<p>If <code>print.transect</code> is <code>TRUE</code>, then the output of
<code>table(x$Data1[x$Event == "T"], useNA = "always")</code>, where <code>x</code> is
the output of <code>airdas_read(file, ...)</code> is printed
</p>
<p>If <code>file.out</code> is not <code>NULL</code>, then the error log is also written to
the file (e.g., a .txt or .csv file) specified by <code>file.out</code>
</p>


<h3>See Also</h3>

<p><a href="https://swfsc.github.io/swfscAirDAS/">https://swfsc.github.io/swfscAirDAS/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- system.file("airdas_sample.das", package = "swfscAirDAS")
if (interactive()) airdas_check(y, print.transect = TRUE)

</code></pre>

<hr>
<h2 id='airdas_chop_condition'>Chop AirDAS data - condition</h2><span id='topic+airdas_chop_condition'></span><span id='topic+airdas_chop_condition.data.frame'></span><span id='topic+airdas_chop_condition.airdas_df'></span>

<h3>Description</h3>

<p>Chop AirDAS data into a new effort segment every time a condition changes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airdas_chop_condition(x, ...)

## S3 method for class 'data.frame'
airdas_chop_condition(x, ...)

## S3 method for class 'airdas_df'
airdas_chop_condition(
  x,
  conditions,
  seg.min.km = 0.1,
  distance.method = NULL,
  num.cores = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airdas_chop_condition_+3A_x">x</code></td>
<td>
<p><code>airdas_df</code> object, 
or a data frame that can be coerced to a <code>airdas_df</code> object. 
This data must be filtered for 'OnEffort' events; 
see the Details section below</p>
</td></tr>
<tr><td><code id="airdas_chop_condition_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
<tr><td><code id="airdas_chop_condition_+3A_conditions">conditions</code></td>
<td>
<p>the conditions that trigger a new segment; 
see <code><a href="#topic+airdas_effort">airdas_effort</a></code></p>
</td></tr>
<tr><td><code id="airdas_chop_condition_+3A_seg.min.km">seg.min.km</code></td>
<td>
<p>numeric; minimum allowable segment length (in kilometers).
Default is 0.1. See the Details section below for more information</p>
</td></tr>
<tr><td><code id="airdas_chop_condition_+3A_distance.method">distance.method</code></td>
<td>
<p>character; see <code><a href="#topic+airdas_effort">airdas_effort</a></code>.
Default is <code>NULL</code> since these distances should have already been
calculated in <code><a href="#topic+airdas_effort">airdas_effort</a></code></p>
</td></tr>
<tr><td><code id="airdas_chop_condition_+3A_num.cores">num.cores</code></td>
<td>
<p>See <code><a href="#topic+airdas_effort">airdas_effort</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>WARNING - do not call this function directly!
It is exported for documentation purposes, but is intended for internal package use only.
</p>
<p>This function is intended to only be called by <code><a href="#topic+airdas_effort">airdas_effort</a></code> 
when the &quot;condition&quot; method is specified. 
Thus, <code>x</code> must be filtered for events (rows) where either
the 'OnEffort' column is <code>TRUE</code> or the 'Event' column is either &quot;E&quot; or &quot;O&quot;; 
see <code><a href="#topic+airdas_effort">airdas_effort</a></code> for more details. 
This function chops each continuous effort section (henceforth 'effort sections') 
in <code>x</code> into modeling segments (henceforth 'segments') by 
creating a new segment every time a condition changes. 
Each effort section runs from a T/R event to its corresponding E/O event. 
After chopping, <code><a href="#topic+airdas_segdata">airdas_segdata</a></code> is called 
(with <code>segdata.method = "maxdist"</code>)
to get relevant segdata information for each segment.
</p>
<p>Changes in the one of the conditions specified in the <code>conditions</code>
argument triggers a new segment.
An exception is when multiple condition changes happen at
the same location, such as a 'TVPAW' series of events.
When this happens, no segments of length zero are created;
rather, a single segment is created that includes all of the condition changes
(i.e. all of the events in the event series) that happened during
the series of events (i.e. at the same location).
Note that this combining of events at the same Lat/Lon happens
even if <code>seg.min.km = 0</code>.
</p>
<p>In addition, (almost) all segments whose length is less than <code>seg.min.km</code>
are combined with the segment immediately following them to ensure that the length
of (almost) all segments is at least <code>seg.min.km</code>.
This allows users to account for situations where multiple conditions,
such as Beaufort and a viewing condition, change in rapid succession, say &lt;0.1 km apart.
When segments are combined, a message is printed, and the condition that was
recorded for the maximum distance within the new segment is reported.
See <code><a href="#topic+airdas_segdata">airdas_segdata</a></code>, <code>segdata.method = "maxdist"</code>, for more details
about how the segdata information is determined.
The only exception to this rule is if the short segment ends in an &quot;E&quot; or an &quot;O&quot; event,
meaning it is the last segment of the effort section.
Since in this case there is no 'next' segment,
this short segment is left as-is.
</p>
<p>If the column <code>dist_from_prev</code> does not exist, the distance between
subsequent events is calculated as described in <code><a href="#topic+airdas_effort">airdas_effort</a></code>
</p>


<h3>Value</h3>

<p>List of two data frames:
</p>

<ul>
<li> <p><code>x</code>, with columns added for the corresponding unique segment code and number
</p>
</li>
<li><p> segdata: data frame with one row for each segment, and columns with
relevant data (see <code><a href="#topic+airdas_effort">airdas_effort</a></code> for specifics)
</p>
</li></ul>


<hr>
<h2 id='airdas_chop_equallength'>Chop AirDAS data - equal length</h2><span id='topic+airdas_chop_equallength'></span><span id='topic+airdas_chop_equallength.data.frame'></span><span id='topic+airdas_chop_equallength.airdas_df'></span>

<h3>Description</h3>

<p>Chop AirDAS data into equal-length effort segments, averaging conditions by segment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airdas_chop_equallength(x, ...)

## S3 method for class 'data.frame'
airdas_chop_equallength(x, ...)

## S3 method for class 'airdas_df'
airdas_chop_equallength(
  x,
  conditions,
  seg.km,
  randpicks.load = NULL,
  distance.method = NULL,
  num.cores = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airdas_chop_equallength_+3A_x">x</code></td>
<td>
<p><code>airdas_df</code> object, 
or a data frame that can be coerced to a <code>airdas_df</code> object. 
This data must be filtered for 'OnEffort' events; 
see the Details section below</p>
</td></tr>
<tr><td><code id="airdas_chop_equallength_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
<tr><td><code id="airdas_chop_equallength_+3A_conditions">conditions</code></td>
<td>
<p>see <code><a href="#topic+airdas_effort">airdas_effort</a></code></p>
</td></tr>
<tr><td><code id="airdas_chop_equallength_+3A_seg.km">seg.km</code></td>
<td>
<p>numeric; target segment length in kilometers</p>
</td></tr>
<tr><td><code id="airdas_chop_equallength_+3A_randpicks.load">randpicks.load</code></td>
<td>
<p>character, data frame, or <code>NULL</code>. 
If character, must be filename of past randpicks output to load and use 
(passed to <code>file</code> argument of <code><a href="utils.html#topic+read.table">read.csv</a></code>).
If data frame, randpicks values will be extracted from the data frame.
If <code>NULL</code>, new randpicks values will be generated by the function</p>
</td></tr>
<tr><td><code id="airdas_chop_equallength_+3A_distance.method">distance.method</code></td>
<td>
<p>character; see <code><a href="#topic+airdas_effort">airdas_effort</a></code>.
Default is <code>NULL</code> since these distances should have already been
calculated in <code><a href="#topic+airdas_effort">airdas_effort</a></code></p>
</td></tr>
<tr><td><code id="airdas_chop_equallength_+3A_num.cores">num.cores</code></td>
<td>
<p>See <code><a href="#topic+airdas_effort">airdas_effort</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>WARNING - do not call this function directly!
It is exported for documentation purposes, but is intended for internal package use only.
</p>
<p>This function is intended to only be called by <code><a href="#topic+airdas_effort">airdas_effort</a></code> 
when the &quot;equallength&quot; method is specified. 
Thus, <code>x</code> must be filtered for events (rows) where either
the 'OnEffort' column is <code>TRUE</code> or the 'Event' column is either &quot;E&quot; or &quot;O&quot;; 
see <code><a href="#topic+airdas_effort">airdas_effort</a></code> for more details. 
This function chops each continuous effort section (henceforth 'effort sections') 
in <code>x</code> into modeling segments (henceforth 'segments') of equal length. 
Each effort section runs from a &quot;T&quot;/&quot;R&quot; event to its corresponding &quot;E&quot;/&quot;O&quot; event. 
After chopping, <code><a href="#topic+airdas_segdata">airdas_segdata</a></code> is called to get relevant  
segdata information for each segment.
</p>
<p>When chopping the effort sections in segments of length <code>seg.km</code>, 
there are several possible scenarios:
</p>

<ul>
<li><p> The extra length remaining after chopping is greater than or equal to 
half of the target segment length (i.e. <code>&gt;= 0.5*seg.km</code>): 
the extra length is assigned to a random portion of the effort section as its own segment 
(<a href="https://github.com/swfsc/swfscAirDAS/blob/master/inst/AirDAS_chop_equallength_figures.pdf">see Fig. 1a</a>)
</p>
</li>
<li><p> The extra length remaining after chopping is less than half of the 
target segment length (i.e. <code>&lt; 0.5*seg.km</code>): 
the extra length is added to one of the (randomly selected) equal-length segments 
(<a href="https://github.com/swfsc/swfscAirDAS/blob/master/inst/AirDAS_chop_equallength_figures.pdf">see Fig. 1b</a>)
</p>
</li>
<li><p> The length of the effort section is less than or equal to 
the target segment length: the entire segment becomes a segment 
(<a href="https://github.com/swfsc/swfscAirDAS/blob/master/inst/AirDAS_chop_equallength_figures.pdf">see Fig. 1c</a>)
</p>
</li>
<li><p> The length of the effort section is zero: a segment of length zero. 
If there are more than two events (the &quot;T&quot;/R&quot; and &quot;E&quot;/&quot;O&quot; events),
the function throws a warning
</p>
</li></ul>

<p>Therefore, the length of each segment is constrained to be between 
one half and one and one half of <code>seg.km</code> (i.e. <code>0.5*seg.km &lt;=</code> 
segment length <code>&gt;=1.5*seg.km</code>), 
and the central tendency is approximately equal to the target segment length. 
The only exception is when a continuous effort section is less than 
one half of the target segment length (i.e. <code>&lt; 0.5*seg.km</code>; 
<a href="https://github.com/swfsc/swfscAirDAS/blob/master/inst/AirDAS_chop_equallength_figures.pdf">see Fig. 1c</a>).
</p>
<p>Note the PDF with Figs. 1a - 1c is included in the package, and can be found at:
<code>system.file("AirDAS_chop_equallength_figures.pdf", package = "swfscAirDAS")</code>   
</p>
<p>'Randpicks' is a record of the random assignments that were made when 
chopping the effort sections into segments, and can be saved to allow 
users to recreate the same random allocation of extra km when chopping. 
The randpicks returned by this function is a data frame with two columns: 
the number of the effort section and the randpick value. 
Users should save the randpicks output to a CSV file, 
which then can be specified using the <code>randpicks.load</code> argument
to recreate the same effort segments from <code>x</code> 
(i.e., using the same AirDAS data) in the future.
Note that when saving with <code><a href="utils.html#topic+read.table">write.csv</a></code>, users must 
specify <code>row.names = FALSE</code> so that the CSV file only has two columns.
For an example randpicks file, see 
<code>system.file("airdas_sample_randpicks.csv", package = "swfscAirDAS")</code>
</p>
<p>If the column <code>dist_from_prev</code> does not exist, the distance between
subsequent events is calculated as described in <code><a href="#topic+airdas_effort">airdas_effort</a></code>
</p>


<h3>Value</h3>

<p>List of three data frames:
</p>

<ul>
<li> <p><code>x</code>, with columns added for the corresponding unique segment code and number
</p>
</li>
<li><p> segdata: data frame with one row for each segment, and columns with
relevant data (see <code><a href="#topic+airdas_effort">airdas_effort</a></code> for specifics)
</p>
</li>
<li><p> randpicks: data frame with record of length allocations 
(see Details section above)
</p>
</li></ul>


<hr>
<h2 id='airdas_chop_section'>Chop AirDAS data - section</h2><span id='topic+airdas_chop_section'></span><span id='topic+airdas_chop_section.data.frame'></span><span id='topic+airdas_chop_section.airdas_df'></span>

<h3>Description</h3>

<p>Chop AirDAS data into effort segments by continuous effort section
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airdas_chop_section(x, ...)

## S3 method for class 'data.frame'
airdas_chop_section(x, ...)

## S3 method for class 'airdas_df'
airdas_chop_section(
  x,
  conditions,
  distance.method = NULL,
  num.cores = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airdas_chop_section_+3A_x">x</code></td>
<td>
<p><code>airdas_df</code> object, 
or a data frame that can be coerced to a <code>airdas_df</code> object. 
This data must be filtered for 'OnEffort' events; 
see the Details section below</p>
</td></tr>
<tr><td><code id="airdas_chop_section_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
<tr><td><code id="airdas_chop_section_+3A_conditions">conditions</code></td>
<td>
<p>see <code><a href="#topic+airdas_effort">airdas_effort</a></code></p>
</td></tr>
<tr><td><code id="airdas_chop_section_+3A_distance.method">distance.method</code></td>
<td>
<p>character; see <code><a href="#topic+airdas_effort">airdas_effort</a></code>.
Default is <code>NULL</code> since these distances should have already been
calculated in <code><a href="#topic+airdas_effort">airdas_effort</a></code></p>
</td></tr>
<tr><td><code id="airdas_chop_section_+3A_num.cores">num.cores</code></td>
<td>
<p>See <code><a href="#topic+airdas_effort">airdas_effort</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>WARNING - do not call this function directly!
It is exported for documentation purposes, but is intended for internal package use only.
</p>
<p>This function is simply a wrapper for <code><a href="#topic+airdas_chop_equallength">airdas_chop_equallength</a></code>.
It calls <code><a href="#topic+airdas_chop_equallength">airdas_chop_equallength</a></code>, with <code>seg.km</code> set to a 
value larger than the longest continuous effort section in <code>x</code>. 
Thus, the effort is 'chopped' into the continuous effort sections and then summarized.
</p>
<p>See the Examples section for an example where the two methods give the same output.
Note that the longest continuous effort section in the sample data is ~32km.
</p>
<p>For an example of how to summarize data by transect, 
see <code>vignette("swfscAirDAS")</code>.
In short, if looking to group by individual transects, use 
<code>segdata$transect_idx &lt;- cumsum(segdata$event == "T")</code> 
to create a column with a transect index. 
Then you can use <code><a href="dplyr.html#topic+group_by">group_by</a>(transect_idx)</code> and 
<code><a href="dplyr.html#topic+summarise">summarise</a></code> to summarise the desired data by transect
</p>


<h3>Value</h3>

<p>See <code><a href="#topic+airdas_chop_equallength">airdas_chop_equallength</a></code>. 
The randpicks values will all be <code>NA</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- system.file("airdas_sample.das", package = "swfscAirDAS")
y.proc &lt;- airdas_process(y)

y.eff1 &lt;- airdas_effort(y.proc, method = "equallength", seg.km = 35, num.cores = 1)
y.eff2 &lt;- airdas_effort(y.proc, method = "section", num.cores = 1)

all.equal(y.eff1, y.eff2)

</code></pre>

<hr>
<h2 id='airdas_comments'>Extract comments from AirDAS data</h2><span id='topic+airdas_comments'></span><span id='topic+airdas_comments.data.frame'></span><span id='topic+airdas_comments.airdas_df'></span><span id='topic+airdas_comments.airdas_dfr'></span>

<h3>Description</h3>

<p>Extract comments from <code>airdas_dfr</code> or <code>airdas_df</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airdas_comments(x)

## S3 method for class 'data.frame'
airdas_comments(x)

## S3 method for class 'airdas_df'
airdas_comments(x)

## S3 method for class 'airdas_dfr'
airdas_comments(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airdas_comments_+3A_x">x</code></td>
<td>
<p><code>airdas_dfr</code> or <code>airdas_df</code> object, 
or a data frame that can be coerced to a <code>airdas_dfr</code> object</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function recreates the comment strings by 
pasting the Data# columns back together for the C events (comments)
</p>
<p>See the examples section for how to search for comments with the
phrase &quot;record&quot; to determine what extra information (e.g. molas)
was being recorded vs ignored.
</p>


<h3>Value</h3>

<p><code>x</code>, filtered for C events and with the added column
comment_str containing the concatenated comment strings
</p>


<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- system.file("airdas_sample.das", package = "swfscAirDAS")
y.read &lt;- airdas_read(y, file.type = "turtle")

airdas_comments(y.read)

# Extract all comments containing "record"
y.comm &lt;- airdas_comments(y.read)
y.comm[grepl("record", y.comm$comment_str, ignore.case = TRUE), ]

# Extract all comments containing "record", but not "recorder"
y.comm &lt;- airdas_comments(y.read)
y.comm[grepl("record", y.comm$comment_str, ignore.case = TRUE) &amp; 
         !grepl("recorder", y.comm$comment_str, ignore.case = TRUE), ]
         
# Join comments with processed data
dplyr::left_join(y.read, y.comm[, c("file_das", "line_num", "comment_str")],
                 by = c("file_das", "line_num"))

</code></pre>

<hr>
<h2 id='airdas_comments_process'>Process comments in AirDAS data</h2><span id='topic+airdas_comments_process'></span><span id='topic+airdas_comments_process.data.frame'></span><span id='topic+airdas_comments_process.airdas_dfr'></span><span id='topic+airdas_comments_process.airdas_df'></span>

<h3>Description</h3>

<p>Extract miscellaneous information recorded in AirDAS data comments, i.e. comment-data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airdas_comments_process(x, ...)

## S3 method for class 'data.frame'
airdas_comments_process(x, ...)

## S3 method for class 'airdas_dfr'
airdas_comments_process(x, comment.format = NULL, ...)

## S3 method for class 'airdas_df'
airdas_comments_process(x, comment.format = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airdas_comments_process_+3A_x">x</code></td>
<td>
<p><code>airdas_dfr</code> or <code>airdas_df</code> object, 
or a data frame that can be coerced to a <code>airdas_dfr</code> object</p>
</td></tr>
<tr><td><code id="airdas_comments_process_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
<tr><td><code id="airdas_comments_process_+3A_comment.format">comment.format</code></td>
<td>
<p>list; default is <code>NULL</code>. 
See the 'Using <code>comment.format</code>' section</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Historically, project-specific or miscellaneous data have been 
recorded in AirDAS comments using specific formats and character codes. 
This functions identifies and extracts this data from the comment text strings. 
However, different data types have different comment-data formats. 
Specifically, TURTLE and PHOCOENA comment-data uses identifier codes 
that each signify a certain data pattern, while other comment-data
(usually that of CARETTA) uses data separated by some delimiter.
</p>


<h3>Value</h3>

<p><code>x</code>, filtered for comments with recorded data, 
with the following columns added: 
</p>

<ul>
<li><p> comment_str: the full comment string
</p>
</li>
<li><p> Misc#: Some number of descriptor columns. There should be <code>n</code> columns, 
although the minimum number will be two columns
</p>
</li>
<li><p> Value: Associated count or percentage for TURTLE/PHOCOENA data
</p>
</li>
<li><p> flag_check: logical indicating if the TURTLE/PHOCOENA 
comment string was longer than an expected number of characters, 
and thus should be manually inspected 
</p>
</li></ul>

<p>See the additional sections for more context. 
If <code>comment.format</code> is <code>NULL</code>, 
then the output data frame would two Misc# columns: 
a level one descriptor, e.g. &quot;Fish ball&quot; or &quot;Jellyfish&quot;, 
and a level two descriptor, e.g. s, m, or c. 
However, if <code>comment.format$n</code> is say 4, then the output data frame would have
columns Misc1, Misc2, Misc3, and Misc4.
</p>
<p>Messages are printed if either <code>comment.format</code> is not <code>NULL</code>
and not comment-data is identified using <code>comment.format</code>, or if 
<code>x</code> has TURTLE/PHOCOENA data but no TURTLE/PHOCOENA comment-data
</p>


<h3>TURTLE and PHOCOENA comment-data</h3>

<p>Current supported data types are: fish balls, molas, jellyfish, and crab pots. 
See any of the AirDAS format PDFs (<code><a href="#topic+airdas_format_pdf">airdas_format_pdf</a></code>) 
for information about the specific codes and formats used to
record this data. All comments are converted to lower case for processing 
to avoid missing data.
</p>
<p>These different codes contain (at most):
a level one descriptor (e.g. fish ball or crab pot), 
a level two descriptor (e.g. size or jellyfish species), 
and a value (a count or percentage). 
Thus, the extracted data are returned together in this structure. 
The output data frame is long data, i.e. it has one piece of information per line.
For instance, if the comment is &quot;fb1s fb1m&quot;, then the output data frame
will have one line for the small fish ball and one for the medium fish ball. 
See Value section for more details.
</p>
<p>Currently this function only recognizes mola data recorded using the 
&quot;m1&quot;, &quot;m2&quot;, and &quot;m3&quot; codes (small, medium, and large mola, respectively). 
Thus, &quot;mola&quot; is not recognized and processed.
</p>
<p>The following codes are used for the level two descriptors: 
</p>

<table>
<tr>
 <td style="text-align: left;">
    <em>Description</em> </td><td style="text-align: right;"> <em>Code</em></td>
</tr>
<tr>
 <td style="text-align: left;">
    Small  </td><td style="text-align: right;"> s</td>
</tr>
<tr>
 <td style="text-align: left;">
    Medium </td><td style="text-align: right;"> m</td>
</tr>
<tr>
 <td style="text-align: left;">
    Large  </td><td style="text-align: right;"> l</td>
</tr>
<tr>
 <td style="text-align: left;">
    Unknown  </td><td style="text-align: right;"> u</td>
</tr>
<tr>
 <td style="text-align: left;">
    Chrysaora  </td><td style="text-align: right;"> c</td>
</tr>
<tr>
 <td style="text-align: left;">
    Moon jelly </td><td style="text-align: right;"> m</td>
</tr>
<tr>
 <td style="text-align: left;">
    Egg yolk   </td><td style="text-align: right;"> e</td>
</tr>
<tr>
 <td style="text-align: left;">
    Other      </td><td style="text-align: right;"> o</td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>



<h3>Using <code>comment.format</code></h3>

<p><code>comment.format</code> is a list that allows the user to specify the comment-data format. 
To use this argument, data must be separated by a delimiter. 
This list must contain three named elements:
</p>

<ul>
<li><p> n: A single number indicating the number of elements of data in each comment. 
Must equal the length of <code>type</code>. 
A comment must contain exactly this number of <code>sep</code> to be recognized as comment-data
</p>
</li>
<li><p> sep: A single string indicating the field separator string (delimiter). 
Values within each comment are separated by this string. 
Currently accepted values are &quot;;&quot; and &quot;,&quot;
</p>
</li>
<li><p> type: A character vector of length <code>n</code> indicating the data type of 
each data element (column). 
All values must be one of: &quot;character&quot;, &quot;numeric&quot;, or &quot;integer&quot;.
</p>
</li></ul>

<p>For instance, for most CARETTA data <code>comment.format</code> should be 
<code>list(n = 5, sep = ";", type = c("character", "character", "numeric", "numeric", "character"))</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- system.file("airdas_sample.das", package = "swfscAirDAS")
y.proc &lt;- airdas_process(y)

airdas_comments_process(y.proc)

</code></pre>

<hr>
<h2 id='airdas_df-class'><code>airdas_df</code> class</h2><span id='topic+airdas_df-class'></span><span id='topic+airdas_df'></span>

<h3>Description</h3>

<p>The <code>airdas_df</code> class is a subclass of <code><a href="base.html#topic+data.frame">data.frame</a></code>,
created to provide a concise and robust way to ensure that the input to 
downstream AirDAS processing functions, such as <code><a href="#topic+airdas_sight">airdas_sight</a></code>, 
adheres to certain requirements.
Specifically, objects of class <code>airdas_df</code> are data frames with specific column names and classes,
as detailed in the 'Properties of <code>airdas_df</code>' section. 
In addition, <code>airdas_df</code> objects have no <code>NA</code> values 
in the 'Lat' 'Lon', or 'DateTime' columns.
Objects of class <code>airdas_df</code> are created by <code><a href="#topic+airdas_process">airdas_process</a></code> 
or <code><a href="#topic+as_airdas_df">as_airdas_df</a></code>, and are intended to be passed directly to
DAS processing functions such as <code><a href="#topic+airdas_sight">airdas_sight</a></code>.
</p>
<p>Subsetting, say for a specific date or transect number, 
or otherwise altering an object of class <code>airdas_df</code>
will cause the object to drop its <code>airdas_df</code> class attribute, although note 
that combining two <code>airdas_df</code> objects using <code><a href="base.html#topic+cbind">rbind</a></code> 
will return an object with a <code>airdas_df</code> class attribute.
If this object is then passed to a DAS processing function such as <code><a href="#topic+airdas_sight">airdas_sight</a></code>, 
the function will try to coerce the object to a <code>airdas_df</code> object.
</p>


<h3>Properties of <code>airdas_df</code> objects</h3>

<p>Objects of class <code>airdas_df</code> have a class attribute of <code>c("airdas_df", "data.frame")</code>.
All values in the OnEffort column must be <code>TRUE</code> or <code>FALSE</code> (no <code>NA</code> values).
All on effort events must have non-<code>NA</code> Lat/Lon/DateTime values, and 
there must be no events with a &quot;#&quot; event code (deleted event). 
Like <code>airdas_dfr</code> events, there must be a <code>file_type</code> column where 
all values are one of: &quot;turtle&quot;, &quot;caretta&quot;, &quot;survey&quot;, or &quot;phocoena&quot; 
(case sensitive; see <code><a href="#topic+airdas_read">airdas_read</a></code> for more details about file types). 
</p>
<p>In addition, <code>airdas_df</code> objects must have the following column names and classes:
</p>

<table>
<tr>
 <td style="text-align: left;">
    <em>Column name</em> </td><td style="text-align: left;"> <em>Column class</em></td>
</tr>
<tr>
 <td style="text-align: left;">
    Event     </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    DateTime  </td><td style="text-align: left;"> c("POSIXct", "POSIXt")</td>
</tr>
<tr>
 <td style="text-align: left;">
    Lat       </td><td style="text-align: left;"> "numeric"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Lon       </td><td style="text-align: left;"> "numeric"</td>
</tr>
<tr>
 <td style="text-align: left;">
    OnEffort  </td><td style="text-align: left;"> "logical"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Trans    </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Bft      </td><td style="text-align: left;"> "numeric"</td>
</tr>
<tr>
 <td style="text-align: left;">
    CCover   </td><td style="text-align: left;"> "numeric"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Jelly    </td><td style="text-align: left;"> "numeric"</td>
</tr>
<tr>
 <td style="text-align: left;">
    HorizSun </td><td style="text-align: left;"> "numeric"</td>
</tr>
<tr>
 <td style="text-align: left;">
    VertSun  </td><td style="text-align: left;"> "numeric"</td>
</tr>
<tr>
 <td style="text-align: left;">
    HKR      </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Haze     </td><td style="text-align: left;"> "logical"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Kelp     </td><td style="text-align: left;"> "logical"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Red tide </td><td style="text-align: left;"> "logical"</td>
</tr>
<tr>
 <td style="text-align: left;">
    AltFt  </td><td style="text-align: left;"> "numeric"</td>
</tr>
<tr>
 <td style="text-align: left;">
    SpKnot </td><td style="text-align: left;"> "numeric"</td>
</tr>
<tr>
 <td style="text-align: left;">
    ObsL   </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    ObsB   </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    ObsR   </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Rec    </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    VLI    </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    VLO    </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    VB     </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    VRI    </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    VRO    </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Data1 </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Data2 </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Data3 </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Data4 </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Data5 </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Data6 </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Data7 </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    EffortDot </td><td style="text-align: left;"> "logical"</td>
</tr>
<tr>
 <td style="text-align: left;">
    EventNum  </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    file_das  </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    line_num  </td><td style="text-align: left;"> "integer"</td>
</tr>
<tr>
 <td style="text-align: left;">
    file_type </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>



<h3>See Also</h3>

<p><code><a href="#topic+as_airdas_df">as_airdas_df</a></code>
</p>

<hr>
<h2 id='airdas_dfr-class'><code>airdas_dfr</code> class</h2><span id='topic+airdas_dfr-class'></span><span id='topic+airdas_dfr'></span>

<h3>Description</h3>

<p>The <code>airdas_dfr</code> class is a subclass of <code><a href="base.html#topic+data.frame">data.frame</a></code>,
created to provide a concise and robust way to ensure that the input 
to <code><a href="#topic+airdas_process">airdas_process</a></code>adheres to certain requirements.
Specifically, objects of class <code>airdas_dfr</code> are data frames with specific column names and classes,
as detailed in the 'Properties of <code>airdas_dfr</code>' section. 
Objects of class <code>airdas_dfr</code> are created by
<code><a href="#topic+airdas_read">airdas_read</a></code> or <code><a href="#topic+as_airdas_dfr">as_airdas_dfr</a></code>, 
and are intended to be passed directly to <code><a href="#topic+airdas_process">airdas_process</a></code>.
</p>
<p>Subsetting or otherwise altering an object of class <code>airdas_dfr</code> will cause 
the object to drop its <code>airdas_dfr</code> class attribute, although note that combining
two <code>airdas_dfr</code> objects using <code><a href="base.html#topic+cbind">rbind</a></code> 
will return an object with a <code>airdas_dfr</code> class attribute.
<code><a href="#topic+airdas_process">airdas_process</a></code> will then try to coerce the object to a
<code>airdas_dfr</code> object. It is <b>strongly</b> recommended to pass an object of class <code>airdas_dfr</code> to
<code><a href="#topic+airdas_process">airdas_process</a></code> before subsetting, e.g. for events from a certain date range.
</p>


<h3>Properties of <code>airdas_dfr</code> objects</h3>

<p>Objects of class <code>airdas_dfr</code> have a class attribute of <code>c("airdas_dfr", "data.frame")</code>.
They must have a column <code>file_type</code> where all values are one of: 
&quot;turtle&quot;, &quot;caretta&quot;, &quot;survey&quot;, or &quot;phocoena&quot; 
(case sensitive; see <code><a href="#topic+airdas_read">airdas_read</a></code> for more details). 
<code>airdas_dfr</code> objects also must not have any <code>NA</code> event codes.
</p>
<p>In addition, they must have the following column names and classes:
</p>

<table>
<tr>
 <td style="text-align: left;">
    <em>Column name</em> </td><td style="text-align: left;"> <em>Column class</em></td>
</tr>
<tr>
 <td style="text-align: left;">
    Event     </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    EffortDot </td><td style="text-align: left;"> "logical"</td>
</tr>
<tr>
 <td style="text-align: left;">
    DateTime  </td><td style="text-align: left;"> c("POSIXct", "POSIXt")</td>
</tr>
<tr>
 <td style="text-align: left;">
    Lat       </td><td style="text-align: left;"> "numeric"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Lon       </td><td style="text-align: left;"> "numeric"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Data1 </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Data2 </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Data3 </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Data4 </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Data5 </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Data6 </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    Data7 </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    EventNum  </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    file_das  </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
    line_num  </td><td style="text-align: left;"> "integer"</td>
</tr>
<tr>
 <td style="text-align: left;">
    file_type </td><td style="text-align: left;"> "character"</td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>



<h3>See Also</h3>

<p><code><a href="#topic+as_airdas_dfr">as_airdas_dfr</a></code>
</p>

<hr>
<h2 id='airdas_effort'>Summarize AirDAS effort</h2><span id='topic+airdas_effort'></span><span id='topic+airdas_effort.data.frame'></span><span id='topic+airdas_effort.airdas_df'></span>

<h3>Description</h3>

<p>Chop AirDAS data into effort segments
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airdas_effort(x, ...)

## S3 method for class 'data.frame'
airdas_effort(x, ...)

## S3 method for class 'airdas_df'
airdas_effort(
  x,
  method = c("condition", "equallength", "section"),
  conditions = NULL,
  distance.method = c("greatcircle", "lawofcosines", "haversine", "vincenty"),
  num.cores = NULL,
  angle.min = 12,
  bft.max = 5,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airdas_effort_+3A_x">x</code></td>
<td>
<p><code>airdas_df</code> object; output from <code><a href="#topic+airdas_process">airdas_process</a></code>, 
or a data frame that can be coerced to a <code>airdas_df</code> object</p>
</td></tr>
<tr><td><code id="airdas_effort_+3A_...">...</code></td>
<td>
<p>arguments passed to the chopping function specified using <code>method</code>,
such as <code>seg.km</code> or <code>seg.min.km</code></p>
</td></tr>
<tr><td><code id="airdas_effort_+3A_method">method</code></td>
<td>
<p>character; method to use to chop AirDAS data into effort segments
Can be &quot;condition&quot;, &quot;equallength&quot;, &quot;section&quot;, 
or any partial match thereof (case sensitive)</p>
</td></tr>
<tr><td><code id="airdas_effort_+3A_conditions">conditions</code></td>
<td>
<p>character vector of names of conditions 
to include in segdata output.
These values must be column names from the output of <code><a href="#topic+airdas_process">airdas_process</a></code>,
e.g. 'Bft', 'CCover', etc. The default is <code>NULL</code>, 
in which case all relevant conditions will be included.
If <code>method == "condition"</code>, then these also are the conditions which
trigger segment chopping when they change.</p>
</td></tr>
<tr><td><code id="airdas_effort_+3A_distance.method">distance.method</code></td>
<td>
<p>character;
method to use to calculate distance between lat/lon coordinates.
Can be &quot;greatcircle&quot;, &quot;lawofcosines&quot;, &quot;haversine&quot;, &quot;vincenty&quot;,
or any partial match thereof (case sensitive). Default is &quot;greatcircle&quot;</p>
</td></tr>
<tr><td><code id="airdas_effort_+3A_num.cores">num.cores</code></td>
<td>
<p>Number of CPUs to over which to distribute computations.
Defaults to <code>NULL</code>, which uses one fewer than the number of cores
reported by <code><a href="parallel.html#topic+detectCores">detectCores</a></code>
Using 1 core likely will be faster for smaller datasets</p>
</td></tr>
<tr><td><code id="airdas_effort_+3A_angle.min">angle.min</code></td>
<td>
<p>passed to <code><a href="#topic+airdas_sight">airdas_sight</a></code></p>
</td></tr>
<tr><td><code id="airdas_effort_+3A_bft.max">bft.max</code></td>
<td>
<p>numeric; the maximum Beaufort (column 'Bft') for which to 
mark a sighting as <code>TRUE</code> in 'included' (see Details). 
Default is 5.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is the top-level function for chopping processed AirDAS data 
into modeling segments (henceforth 'segments'), and assigning sightings 
and related information (e.g., weather conditions) to each segment. 
This function returns data frames with all relevant information for the 
effort segments and associated sightings ('segdata' and 'sightinfo', respectively). 
Before chopping, the AirDAS data is filtered for events (rows) where either
the 'OnEffort' column is <code>TRUE</code> or the 'Event' column is &quot;E&quot; or &quot;O&quot;. 
In other words, the data is filtered for continuous effort sections (henceforth 'effort sections'), 
where effort sections run from &quot;T&quot;/&quot;R&quot; to &quot;E&quot;/&quot;O&quot; events (inclusive), 
and then passed to the chopping function specified using <code>method</code>. 
All on effort events must not have <code>NA</code> Lat or Lon values; 
note Lat/Lon values for 1 events were 'filled in' in <code><a href="#topic+airdas_process">airdas_process</a></code>.
</p>
<p>The following chopping methods are currently available: 
&quot;condition&quot;, &quot;equallength&quot;, and &quot;section&quot;. 
When using the &quot;condition&quot; method, effort sections are chopped 
into segments every time a condition specified in <code>conditions</code> changes, 
thereby ensuring that the conditions are consistent across the entire segment.
See <code><a href="#topic+airdas_chop_condition">airdas_chop_condition</a></code> for more details about this method, 
including arguments that must be passed to it via <code>...</code>.
</p>
<p>The &quot;equallength&quot; method consists of
chopping effort sections into equal-length segments of length <code>seg.km</code>, 
and doing a weighted average of the conditions for the length of that segment. 
See <code><a href="#topic+airdas_chop_equallength">airdas_chop_equallength</a></code> for more details about this method, 
including arguments that must be passed to it via <code>...</code>.
</p>
<p>The &quot;section&quot; method involves 'chopping' the effort into continuous effort sections,
i.e. each continuous effort section is a single effort segment.
See <code><a href="#topic+airdas_chop_section">airdas_chop_section</a></code> for more details about this method.
</p>
<p>The distance between the lat/lon points of subsequent events
is calculated using the method specified in <code>distance.method</code>.
If &quot;greatcircle&quot;, <code><a href="swfscDAS.html#topic+distance_greatcircle">distance_greatcircle</a></code> is used,
while <code><a href="swfscMisc.html#topic+distance">distance</a></code> is used otherwise.
See <code><a href="#topic+airdas_sight">airdas_sight</a></code> for how the sightings are processed.
</p>
<p>The sightinfo data frame includes the column 'included',
which is used in <code><a href="#topic+airdas_effort_sight">airdas_effort_sight</a></code> when summarizing
the number of sightings and animals for selected species.
<code><a href="#topic+airdas_effort_sight">airdas_effort_sight</a></code> is a separate function to allow users to
personalize the 'included' values as desired for their specific analysis.
By default, i.e. in the output of this function, 'included' is <code>TRUE</code> if:
the sighting was a standard sighting (see <code><a href="#topic+airdas_sight">airdas_sight</a></code>) 
and in a Beaufort sea state less than or equal to 'btf.max'.
</p>


<h3>Value</h3>

<p>List of three data frames: 
</p>

<ul>
<li><p> segdata: one row for every segment, and columns for information including
unique segment number, event code that started the associated continuous effort section, 
the starting and ending line of the segment in the DAS file (stlin, endlin),
start/end/midpoint coordinates(lat1/lon1, lat2/lon2, and mlat/mlon, respectively),
the start/end/midpoint date/time of the segment (DateTime1, DateTime2, and mDateTime, respectively;
mDateTime is the average of DateTime1 and DateTime2), segment length (dist),
and conditions (e.g. Beaufort)
</p>
</li>
<li><p> sightinfo: details for all sightings in <code>x</code>, including: 
the unique segment number it is associated with, segment mid points (lat/lon), 
the 'included' column described in the Details section,
and the output information described in <code><a href="#topic+airdas_sight">airdas_sight</a></code>
</p>
</li>
<li><p> randpicks: see <code><a href="#topic+airdas_chop_equallength">airdas_chop_equallength</a></code>. 
<code>NULL</code> if using &quot;condition&quot; method.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- system.file("airdas_sample.das", package = "swfscAirDAS")
y.proc &lt;- airdas_process(y)

airdas_effort(
  y.proc, method = "condition", conditions = "Bft", seg.min.km = 0.05, 
  num.cores = 1
)

y.rand &lt;- system.file("airdas_sample_randpicks.csv", package = "swfscAirDAS")
airdas_effort(
  y.proc, method = "equallength", conditions = c("Bft", "CCover"), 
  seg.km = 3, randpicks.load = y.rand, num.cores = 1
)

airdas_effort(y.proc, method = "section", num.cores = 1)

</code></pre>

<hr>
<h2 id='airdas_effort_sight'>Summarize AirDAS sightings by effort segment</h2><span id='topic+airdas_effort_sight'></span>

<h3>Description</h3>

<p>Summarize number of sightings and animals for selected species by segment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airdas_effort_sight(x.list, sp.codes, sp.events = c("S", "t"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airdas_effort_sight_+3A_x.list">x.list</code></td>
<td>
<p>list; output of <code><a href="#topic+airdas_effort">airdas_effort</a></code></p>
</td></tr>
<tr><td><code id="airdas_effort_sight_+3A_sp.codes">sp.codes</code></td>
<td>
<p>character; species code(s) to include in segdata. 
These code(s) will be converted to lower case to match <code><a href="#topic+airdas_sight">airdas_sight</a></code></p>
</td></tr>
<tr><td><code id="airdas_effort_sight_+3A_sp.events">sp.events</code></td>
<td>
<p>character; event code(s) to include in the sightinfo output.
This argument supersedes the 'included' value when determining
whether a sighting is included in the segment summaries.
Must be one or more of: &quot;S&quot;, &quot;t&quot; (case-sensitive).
The default is that all of these event codes are kept</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function takes the output of <code><a href="#topic+airdas_effort">airdas_effort</a></code> and
adds columns for the number of sightings (nSI) and number of animals (ANI)
for selected species (selected via <code>sp.codes</code>) for each segment
to the segdata element of <code>x.list</code>.
However, only sightings with an included value of <code>TRUE</code>
(included is a column in sightinfo) are included in the summaries.
Having this step separate from <code><a href="#topic+airdas_effort">airdas_effort</a></code> allows users to
personalize the included values as desired for their analysis.
</p>


<h3>Value</h3>

<p>A list, identical to <code>x.list</code> except for
1) the nSI and ANI columns added to <code>x.list$segdata</code>,
one each for each element of <code>sp.codes</code>, and
2) the included column of <code>x.list$sightinfo</code>, which has been set as
<code>FALSE</code> for sightings of species not listed in <code>sp.codes</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- system.file("airdas_sample.das", package = "swfscAirDAS")
y.proc &lt;- airdas_process(y)
y.cond &lt;- airdas_effort(
  y.proc, method = "condition", conditions = "Bft", seg.min.km = 0.05, 
  num.cores = 1
)

airdas_effort_sight(y.cond, sp.codes = c("mn", "bm"))

</code></pre>

<hr>
<h2 id='airdas_format_pdf'>Aerial DAS format requirements</h2><span id='topic+airdas_format_pdf'></span>

<h3>Description</h3>

<p>Access and save local PDF documents describing the data format of the 
different file types supported by <code>swfscAirDAS</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airdas_format_pdf(file, file.type = c("phocoena", "caretta", "turtle"), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airdas_format_pdf_+3A_file">file</code></td>
<td>
<p>character; the name of the file where the PDF will be saved</p>
</td></tr>
<tr><td><code id="airdas_format_pdf_+3A_file.type">file.type</code></td>
<td>
<p>character; indicates which data format PDF to extract.
Must be one of: &quot;turtle&quot;, &quot;caretta&quot;, &quot;survey&quot;, or &quot;phocoena&quot; (case sensitive)</p>
</td></tr>
<tr><td><code id="airdas_format_pdf_+3A_...">...</code></td>
<td>
<p>passed to <code><a href="base.html#topic+files">file.copy</a></code>; 
might included named argument <code>overwrite</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a wrapper function for <code><a href="base.html#topic+files">file.copy</a></code>. 
It saves a PDF document describing the specified aerial DAS data 
format requirements by copying the PDF document to <code>file</code>
</p>
<p>The PDF files can also be manually copied or downloaded from:
</p>
<p>PHOCOENA
</p>

<ul>
<li><p> Can be copied from: 
<code>system.file("AirDAS_Format_PHOCOENA.pdf", package = "swfscAirDAS")</code>
</p>
</li>
<li><p> Can be downloaded from: 
<a href="https://github.com/swfsc/swfscAirDAS/blob/master/inst/AirDAS_Format_PHOCOENA.pdf">https://github.com/swfsc/swfscAirDAS/blob/master/inst/AirDAS_Format_PHOCOENA.pdf</a>
</p>
</li></ul>

<p>CARETTA
</p>

<ul>
<li><p> Can be copied from: 
<code>system.file("AirDAS_Format_CARETTA.pdf", package = "swfscAirDAS")</code>
</p>
</li>
<li><p> Can be downloaded from: 
<a href="https://github.com/swfsc/swfscAirDAS/blob/master/inst/AirDAS_Format_CARETTA.pdf">https://github.com/swfsc/swfscAirDAS/blob/master/inst/AirDAS_Format_CARETTA.pdf</a>
</p>
</li></ul>

<p>TURTLE
</p>

<ul>
<li><p> Can be copied from: 
<code>system.file("AirDAS_Format_TURTLE.pdf", package = "swfscAirDAS")</code>
</p>
</li>
<li><p> Can be downloaded from: 
<a href="https://github.com/swfsc/swfscAirDAS/blob/master/inst/AirDAS_Format_TURTLE.pdf">https://github.com/swfsc/swfscAirDAS/blob/master/inst/AirDAS_Format_TURTLE.pdf</a>
</p>
</li></ul>



<h3>Value</h3>

<p>output of <code><a href="base.html#topic+files">file.copy</a></code>: 
<code>TRUE</code> if writing of file was successful, and <code>FALSE</code> otherwise
</p>


<h3>See Also</h3>

<p><a href="https://swfsc.github.io/swfscAirDAS/">https://swfsc.github.io/swfscAirDAS/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  airdas_format_pdf(
    "AirDAS_Format_TURTLE.pdf", file.type  = "turtle", 
    overwrite = FALSE
  )
}

</code></pre>

<hr>
<h2 id='airdas_process'>Process aerial survey DAS data</h2><span id='topic+airdas_process'></span><span id='topic+airdas_process.character'></span><span id='topic+airdas_process.data.frame'></span><span id='topic+airdas_process.airdas_dfr'></span>

<h3>Description</h3>

<p>Process AirDAS data (the output of <code><a href="#topic+airdas_read">airdas_read</a></code>), 
including extracting state and condition information for each AirDAS event
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airdas_process(x, ...)

## S3 method for class 'character'
airdas_process(x, ...)

## S3 method for class 'data.frame'
airdas_process(x, ...)

## S3 method for class 'airdas_dfr'
airdas_process(
  x,
  days.gap.part = 0.5/24,
  days.gap.full = 12/24,
  gap.message = FALSE,
  reset.transect = TRUE,
  trans.upper = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airdas_process_+3A_x">x</code></td>
<td>
<p>an object of class <code>airdas_dfr</code> object, 
an object that can be coerced to class <code>airdas_dfr</code>,
or a character (filepath) which is first passed to <code><a href="#topic+airdas_read">airdas_read</a></code></p>
</td></tr>
<tr><td><code id="airdas_process_+3A_...">...</code></td>
<td>
<p>passed to <code><a href="#topic+airdas_read">airdas_read</a></code> if <code>x</code> is a character.
Otherwise ignored</p>
</td></tr>
<tr><td><code id="airdas_process_+3A_days.gap.part">days.gap.part</code></td>
<td>
<p>numeric of length 1; 
time gap (in days) used to identify when a 'partial reset' is performed, 
i.e. when propagated info (weather, observers, etc) is reset. 
Default is 30 minutes; must be less than or equal to <code>days.gap.full</code></p>
</td></tr>
<tr><td><code id="airdas_process_+3A_days.gap.full">days.gap.full</code></td>
<td>
<p>numeric of length 1; 
time gap (in days) used to identify when a 'full reset; is performed, 
i.e. when all info (transect number and propagated info) is reset. 
Default is 12 hours; must be greater than <code>days.gap.part</code></p>
</td></tr>
<tr><td><code id="airdas_process_+3A_gap.message">gap.message</code></td>
<td>
<p>logical; default is <code>FALSE</code>.
Indicates if messages should be printed detailing which row(s) of the 
output data frame were partially or fully reset</p>
</td></tr>
<tr><td><code id="airdas_process_+3A_reset.transect">reset.transect</code></td>
<td>
<p>logical; default is <code>TRUE</code>.
Indicates if propagated info (weather, observers, etc) should be reset 
to <code>NA</code> when beginning a new transect. See Details section</p>
</td></tr>
<tr><td><code id="airdas_process_+3A_trans.upper">trans.upper</code></td>
<td>
<p>logical; indicates if all transect codes should be 
capitalized using <code><a href="base.html#topic+chartr">toupper</a></code>.
Default is <code>FALSE</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>x</code> is a character, it is assumed to be a filepath and 
first passed to <code><a href="#topic+airdas_read">airdas_read</a></code>. 
This output is then processed.
</p>
<p>This function cannot handle concatenated airdas_dfr objects of multiple file types. 
In other words, AirDAS data must be processed and then concatenated.
</p>
<p>AirDAS data is event-based, meaning most events indicate when a state or weather condition changes.
For instance, a 'W' event indicates when one or more weather conditions 
(such as Beaufort sea state) change, and the weather conditions 
are the same for subsequent events until the next 'W' event.
For each state/condition: a new column is created, 
the state/condition information is extracted from relevant events, 
and extracted information is propagated to appropriate subsequent rows (events). 
Thus, each row in the output data frame contains all 
pertinent state/condition information for that row.
</p>
<p>The following assumptions/decisions are made during processing:
</p>

<ul>
<li><p> All '#' events (deleted events) are removed
</p>
</li>
<li><p> 'DateTime', 'Lat', and 'Lon' information are added to '1' events where applicable
</p>
</li>
<li><p> Effort is determined as follows: T/R events turns effort on, 
and O/E events turn effort off. 
T/R events themselves will be on effort, while O/E events will be off effort.
The 'EffortDot' column is ignored
</p>
</li>
<li><p> 'HKR' values are converted to lower case. &quot;Y&quot; values are considered to be &quot;H&quot; values
</p>
</li>
<li><p> Observer ('ObsL', 'ObsB', 'ObsR', 'Rec') values are converted to lower case
</p>
</li>
<li><p> Viewing condition ('VLI', 'VLO', 'VB', 'VRI', 'VRO') values are converted to lower case
</p>
</li>
<li><p> Missing values are <code>NA</code> rather than <code>-1</code>
</p>
</li></ul>

<p>Normally, a T event (to indicate starting/resuming a transect)
is immediately followed by a VPAW event series, creating a TVPAW event series.
The <code>reset.transect</code> argument causes the conditions set in the VPAW event series
(Beaufort, viewing conditions, altitude, etc.) to be reset to <code>NA</code> at each T event
</p>


<h3>Value</h3>

<p>An <code>airdas_df</code> object, which is also a data frame.
It consists of the input data frame, i.e. the output of <code><a href="#topic+airdas_read">airdas_read</a></code>,
with the following columns added:
</p>

<table>
<tr>
 <td style="text-align: left;">
    <em>State/condition</em>            </td><td style="text-align: left;"> <em>Column name</em> </td><td style="text-align: left;"> <em>Notes</em></td>
</tr>
<tr>
 <td style="text-align: left;">
    On/off effort                     </td><td style="text-align: left;"> OnEffort</td>
</tr>
<tr>
 <td style="text-align: left;">
    Transect code                     </td><td style="text-align: left;"> Trans</td>
</tr>
<tr>
 <td style="text-align: left;">
    Beaufort sea state                </td><td style="text-align: left;"> Bft</td>
</tr>
<tr>
 <td style="text-align: left;">
    Percent overcast (cloud cover)    </td><td style="text-align: left;"> CCover</td>
</tr>
<tr>
 <td style="text-align: left;">
    Jellyfish code                    </td><td style="text-align: left;"> Jelly </td><td style="text-align: left;"> not in PHOCOENA data</td>
</tr>
<tr>
 <td style="text-align: left;">
    Horizontal sun (clock system)     </td><td style="text-align: left;"> HorizSun</td>
</tr>
<tr>
 <td style="text-align: left;">
    Vertical sun (clock system)       </td><td style="text-align: left;"> VertSun </td><td style="text-align: left;"> only in PHOCOENA data</td>
</tr>
<tr>
 <td style="text-align: left;">
    Haze/Kelp/Red tide code           </td><td style="text-align: left;"> HKR</td>
</tr>
<tr>
 <td style="text-align: left;">
    Haze (from HKR code)              </td><td style="text-align: left;"> Haze</td>
</tr>
<tr>
 <td style="text-align: left;">
    Kelp (from HKR code)              </td><td style="text-align: left;"> Kelp</td>
</tr>
<tr>
 <td style="text-align: left;">
    Red tide (from HKR code)          </td><td style="text-align: left;"> RedTide</td>
</tr>
<tr>
 <td style="text-align: left;">
    Altitude (feet)                   </td><td style="text-align: left;"> AltFt</td>
</tr>
<tr>
 <td style="text-align: left;">
    Speed (knots)                     </td><td style="text-align: left;"> SpKnot</td>
</tr>
<tr>
 <td style="text-align: left;">
    Left observer                     </td><td style="text-align: left;"> ObsL</td>
</tr>
<tr>
 <td style="text-align: left;">
    Belly observer                    </td><td style="text-align: left;"> ObsB</td>
</tr>
<tr>
 <td style="text-align: left;">
    Right observer                    </td><td style="text-align: left;"> ObsR</td>
</tr>
<tr>
 <td style="text-align: left;">
    Data recorder                     </td><td style="text-align: left;"> Rec</td>
</tr>
<tr>
 <td style="text-align: left;">
    Viewing condition - left inside   </td><td style="text-align: left;"> VLI</td>
</tr>
<tr>
 <td style="text-align: left;">
    Viewing condition - left outside  </td><td style="text-align: left;"> VLO</td>
</tr>
<tr>
 <td style="text-align: left;">
    Viewing condition - belly         </td><td style="text-align: left;"> VB</td>
</tr>
<tr>
 <td style="text-align: left;">
    Viewing condition - right inside  </td><td style="text-align: left;"> VRI</td>
</tr>
<tr>
 <td style="text-align: left;">
    Viewing condition - right outside </td><td style="text-align: left;"> VRO</td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>

<p>See <code><a href="#topic+airdas_format_pdf">airdas_format_pdf</a></code> for which data columns the condition information 
is extracted form for each file type. 
In addition, warnings are printed with line numbers of unexpected event codes
</p>


<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- system.file("airdas_sample.das", package = "swfscAirDAS")
airdas_process(y, trans.upper = FALSE)

y.read &lt;- airdas_read(y)
airdas_process(y.read)

</code></pre>

<hr>
<h2 id='airdas_read'>Read AirDAS file(s)</h2><span id='topic+airdas_read'></span>

<h3>Description</h3>

<p>Read one or more fixed-width aerial survey DAS text file(s) 
generated by TURTLEP, or another AirDAS program, into a data frame, 
where each line is data for a specific event
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airdas_read(
  file,
  file.type = c("turtle", "caretta", "survey", "phocoena"),
  skip = 0,
  tz = "UTC",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airdas_read_+3A_file">file</code></td>
<td>
<p>filename(s) of one or more AirDAS files</p>
</td></tr>
<tr><td><code id="airdas_read_+3A_file.type">file.type</code></td>
<td>
<p>character; indicates the program used to create <code>file</code>.
Must be one of: &quot;turtle&quot;, &quot;caretta&quot;, &quot;survey&quot;, or &quot;phocoena&quot; (case sensitive). 
Default is &quot;turtle&quot;</p>
</td></tr>
<tr><td><code id="airdas_read_+3A_skip">skip</code></td>
<td>
<p>integer: see <code><a href="readr.html#topic+read_fwf">read_fwf</a></code>. Default is 0</p>
</td></tr>
<tr><td><code id="airdas_read_+3A_tz">tz</code></td>
<td>
<p>character; see <code><a href="base.html#topic+strptime">strptime</a></code>. Default is UTC</p>
</td></tr>
<tr><td><code id="airdas_read_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Reads/parses aerial survey DAS data into columns of a data frame.
If <code>file</code> contains multiple filenames, then the individual 
data frames will be combined using <code><a href="base.html#topic+cbind">rbind</a></code>
</p>
<p>See <code><a href="#topic+airdas_format_pdf">airdas_format_pdf</a></code> for information about 
AirDAS format requirements for the specific file types (programs)
</p>


<h3>Value</h3>

<p>An <code>airdas_dfr</code> object, which is also a data frame, 
with AirDAS data read into columns.
The data are read into the data frame as characters,
with the following exceptions:
</p>

<table>
<tr>
 <td style="text-align: left;">
    <em>Name</em> </td><td style="text-align: left;"> <em>Class</em> </td><td style="text-align: left;"> <em>Details</em></td>
</tr>
<tr>
 <td style="text-align: left;">
    EffortDot </td><td style="text-align: left;"> logical   </td><td style="text-align: left;"> <code>TRUE</code> if "." was present, and <code>FALSE</code> otherwise</td>
</tr>
<tr>
 <td style="text-align: left;">
    DateTime  </td><td style="text-align: left;"> POSIXct   </td><td style="text-align: left;"> combination of 'Date' and 'Time' columns, with time zone <code>tz</code></td>
</tr>
<tr>
 <td style="text-align: left;">
    Lat       </td><td style="text-align: left;"> numeric   </td><td style="text-align: left;"> 'Latitude' columns converted to decimal degrees in range [-90, 90]</td>
</tr>
<tr>
 <td style="text-align: left;">
    Lon       </td><td style="text-align: left;"> numeric   </td><td style="text-align: left;"> 'Longitude' columns converted to decimal degrees in range [-180, 180]</td>
</tr>
<tr>
 <td style="text-align: left;">
    Data#     </td><td style="text-align: left;"> character </td><td style="text-align: left;"> leading/trailing whitespace trimmed for non-comment events (i.e. where 'Event' is not "C" )</td>
</tr>
<tr>
 <td style="text-align: left;">
    file_das  </td><td style="text-align: left;"> character </td><td style="text-align: left;"> base filename, extracted from the <code>file</code> argument</td>
</tr>
<tr>
 <td style="text-align: left;">
    line_num  </td><td style="text-align: left;"> integer   </td><td style="text-align: left;"> line number of each data row</td>
</tr>
<tr>
 <td style="text-align: left;">
    file_type </td><td style="text-align: left;"> character </td><td style="text-align: left;"> <code>file.type</code> argument
  </td>
</tr>

</table>



<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- system.file("airdas_sample.das", package = "swfscAirDAS")
airdas_read(y, file.type = "turtle")

</code></pre>

<hr>
<h2 id='airdas_segdata'>Summarize AirDAS data for a continuous effort section</h2><span id='topic+airdas_segdata'></span><span id='topic+airdas_segdata.data.frame'></span><span id='topic+airdas_segdata.airdas_df'></span>

<h3>Description</h3>

<p>Summarize AirDAS effort data by effort segment, while averaging conditions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airdas_segdata(x, ...)

## S3 method for class 'data.frame'
airdas_segdata(x, ...)

## S3 method for class 'airdas_df'
airdas_segdata(
  x,
  conditions,
  segdata.method = c("avg", "maxdist"),
  seg.lengths,
  section.id,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airdas_segdata_+3A_x">x</code></td>
<td>
<p><code>airdas_df</code> object, 
or a data frame that can be coerced to a <code>airdas_df</code> object.
Must contain a single continuous effort section of AirDAS data; 
see the Details section below</p>
</td></tr>
<tr><td><code id="airdas_segdata_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
<tr><td><code id="airdas_segdata_+3A_conditions">conditions</code></td>
<td>
<p>see <code><a href="#topic+airdas_effort">airdas_effort</a></code>, or
see Details section for more information</p>
</td></tr>
<tr><td><code id="airdas_segdata_+3A_segdata.method">segdata.method</code></td>
<td>
<p>character; either <code>"avg"</code> or <code>"maxdist"</code>.
<code>"avg"</code> means the condition values will be
calculated as a weighted average by distance, while
<code>"maxdist"</code> means the condition values will be those recorded
for the longest distance during that segment</p>
</td></tr>
<tr><td><code id="airdas_segdata_+3A_seg.lengths">seg.lengths</code></td>
<td>
<p>numeric; length of the modeling segments 
into which <code>x</code> will be chopped</p>
</td></tr>
<tr><td><code id="airdas_segdata_+3A_section.id">section.id</code></td>
<td>
<p>numeric; the ID of <code>x</code> (the current continuous effort section)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>WARNING - do not call this function directly!
It is exported for documentation purposes, but is intended for internal package use only.
</p>
<p>This function was designed to be called by one of the airdas_chop_ functions, 
e.g. <code><a href="#topic+airdas_chop_equallength">airdas_chop_equallength</a></code>, and thus 
users should avoid calling it themselves.
It loops through the events in <code>x</code>, calculating and storing relevant
information for each modeling segment as it goes. 
Because <code>x</code> is a continuous effort section, it must begin with 
a &quot;T&quot; or &quot;R&quot; event and end with the corresponding &quot;E&quot; or &quot;O&quot; event.
</p>
<p>For each segment, this function reports the 
segment ID, transect code, the start/end/mid coordinates (lat/lon),
start/end/mid date/times (DateTime), segment length, 
year, month, day, time, observers, 
and average conditions (which are specified by <code>conditions</code>).
The segment ID is designated as <code>section.id</code> _ index of the modeling segment.
Thus, if <code>section.id</code> is <code>1</code>, then the segment ID for 
the second segment from <code>x</code> is <code>"1_2"</code>.
</p>
<p>When <code>segdata.method</code> is <code>"avg"</code>, the condition values are
calculated as a weighted average by distance.
The reported value for logical columns (e.g. Haze) is the percentage
(in decimals) of the segment in which that condition was <code>TRUE</code>.
For character columns, the reported value for each segment is
the unique value(s) present in the segment, with <code>NA</code>s omitted,
pasted together via <code>paste(..., collapse = "; ")</code>.
When <code>segdata.method</code> is <code>"maxdist"</code>, the reported values
are, for each condition, the value recorded for the longest distance
during that segment (with <code>NA</code>s omitted).
</p>
<p>Transect code, file name, and vent code that started the continuous effort section 
are also included in the segdata output.
These values (excluding <code>NA</code>s) must be consistent across the
entire effort section, and thus across all segments in <code>x</code>;
a warning is printed if there are any inconsistencies.
</p>
<p><code><a href="swfscMisc.html#topic+bearing">bearing</a></code> and <code><a href="swfscMisc.html#topic+destination">destination</a></code>
are used to calculate the segment start, mid, and end points,
with <code>method = "vincenty"</code>.
</p>


<h3>Value</h3>

<p>Data frame with the segdata information described above
and in <code><a href="#topic+airdas_effort">airdas_effort</a></code>
</p>

<hr>
<h2 id='airdas_sight'>Aerial DAS sightings</h2><span id='topic+airdas_sight'></span><span id='topic+airdas_sight.data.frame'></span><span id='topic+airdas_sight.airdas_df'></span>

<h3>Description</h3>

<p>Extract sighting information from aerial DAS data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airdas_sight(x, ...)

## S3 method for class 'data.frame'
airdas_sight(x, ...)

## S3 method for class 'airdas_df'
airdas_sight(x, angle.min = 12, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airdas_sight_+3A_x">x</code></td>
<td>
<p><code>airdas_df</code> object; output from <code><a href="#topic+airdas_process">airdas_process</a></code>, 
or a data frame that can be coerced to a <code>airdas_df</code> object</p>
</td></tr>
<tr><td><code id="airdas_sight_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
<tr><td><code id="airdas_sight_+3A_angle.min">angle.min</code></td>
<td>
<p>numeric; the minimum (absolute value) angle 
for which to consider a sighting a standard sighting. Default is 12</p>
</td></tr>
</table>


<h3>Details</h3>

<p>AirDAS events contain specific information in the 'Data#' columns,
with the information depending on the event code and file type for that row.
This function extracts relevant data for sighting events, and returns a
data frame with dedicated columns for each piece of sighting information. 
It can handle multiple file types in <code>x</code>; for instance, 
<code>x</code> could be processed PHOCOENA and TURTLE data
combined using <code><a href="base.html#topic+cbind">rbind</a></code>. 
See <code><a href="#topic+airdas_format_pdf">airdas_format_pdf</a></code> for more information about the expected
events and event formats, depending on the file type.
</p>
<p>All species codes are converted to lower case using <code><a href="base.html#topic+chartr">tolower</a></code>.
</p>
<p>Abbreviations used in column names include: Gs = group size, Sp = species, 
Mixed = mixed species (multi-species) sighting. 
In addition, note that multi-species group sizes are rounded to 
the nearest whole number using <code>round(, 0)</code>
</p>
<p>A 'sighting by a standard observer' ('ObsStd') is a sighting 
made by ObsL, ObsB, or ObsR (not the data recorder or pilot).   
A 'standard sighting' ('SightStd') is a sighting 
that was made while on effort, by a standard observer, 
and with the absolute value of the angle of declination 
being greater than or equal to <code>angle.min</code>.   
Resights (Events 's') are not considered standard events, 
and thus both 'ObsStd' and 'SightStd' will be <code>NA</code> for 's' events.
</p>


<h3>Value</h3>

<p>Data frame with 1) the columns from <code>x</code>, excluding the 'Data#' columns,
and 2) columns with sighting information extracted from 'Data#' columns as described below.
The data frame has one row for each sighting, or one row for each 
species of each sighting if it is a multi-species (mixed) sighting.
</p>
<p>Added sighting information columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
    <em>Sighting information</em>       </td><td style="text-align: left;"> <em>Column name</em> </td><td style="text-align: left;"> <em>Notes</em></td>
</tr>
<tr>
 <td style="text-align: left;">
    Sighting number                   </td><td style="text-align: left;"> SightNo</td>
</tr>
<tr>
 <td style="text-align: left;">
    Observer that made the sighting   </td><td style="text-align: left;"> Obs</td>
</tr>
<tr>
 <td style="text-align: left;">
    Angle of declination              </td><td style="text-align: left;"> Angle    </td><td style="text-align: left;"> Left is negative</td>
</tr>
<tr>
 <td style="text-align: left;">
    Sighting by standard observer     </td><td style="text-align: left;"> ObsStd   </td><td style="text-align: left;"> Logical; described in Details</td>
</tr>
<tr>
 <td style="text-align: left;">
    Standard sighting                 </td><td style="text-align: left;"> SightStd </td><td style="text-align: left;"> Logical; described in Details</td>
</tr>
<tr>
 <td style="text-align: left;">
    Mixed species sighting            </td><td style="text-align: left;"> Mixed    </td><td style="text-align: left;"> Logical</td>
</tr>
<tr>
 <td style="text-align: left;">
    Species code                      </td><td style="text-align: left;"> SpCode   </td><td style="text-align: left;"> All characters converted to lower case</td>
</tr>
<tr>
 <td style="text-align: left;">
    Group size of school              </td><td style="text-align: left;"> GsTotal  </td><td style="text-align: left;"> Only different from GsSp for mixed species sightings</td>
</tr>
<tr>
 <td style="text-align: left;">
    Group size of species             </td><td style="text-align: left;"> GsSp</td>
</tr>
<tr>
 <td style="text-align: left;">
    Turtle length (feet if numeric)   </td><td style="text-align: left;"> TurtleSize      </td><td style="text-align: left;"> <code>NA</code> for non-"t" events; may be character or numeric</td>
</tr>
<tr>
 <td style="text-align: left;">
    Turtle travel direction (degrees) </td><td style="text-align: left;"> TurtleDirection </td><td style="text-align: left;"> <code>NA</code> for non-"t" events</td>
</tr>
<tr>
 <td style="text-align: left;">
    Turtle tail visible?              </td><td style="text-align: left;"> TurtleTail      </td><td style="text-align: left;"> <code>NA</code> for non-"t" events</td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>

<p>The TurtleSize will be of class character is there is any 
CARETTA data in <code>x</code>, and of class numeric otherwise.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- system.file("airdas_sample.das", package = "swfscAirDAS")
y.proc &lt;- airdas_process(y)

airdas_sight(y.proc)

</code></pre>

<hr>
<h2 id='as_airdas_df'>Coerce object to a airdas_df object</h2><span id='topic+as_airdas_df'></span><span id='topic+as_airdas_df.airdas_df'></span><span id='topic+as_airdas_df.data.frame'></span>

<h3>Description</h3>

<p>Check if an object is of class <code><a href="#topic+airdas_df">airdas_df</a></code>, or coerce it if possible.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_airdas_df(x)

## S3 method for class 'airdas_df'
as_airdas_df(x)

## S3 method for class 'data.frame'
as_airdas_df(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_airdas_df_+3A_x">x</code></td>
<td>
<p>An object to be coerced to class <code>airdas_df</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently only data frames can be coerced to an object 
of class <code><a href="#topic+airdas_df">airdas_df</a></code>.
If <code>x</code> does not have column names, classes, and contents 
as specified in <code><a href="#topic+airdas_df">airdas_df</a></code>,
then the function returns an error message detailing the first column that does not
meet the <code><a href="#topic+airdas_df">airdas_df</a></code> requirements.
</p>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+airdas_df">airdas_df</a></code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+airdas_df-class">airdas_df-class</a></code>
</p>

<hr>
<h2 id='as_airdas_dfr'>Coerce object to a airdas_dfr object</h2><span id='topic+as_airdas_dfr'></span><span id='topic+as_airdas_dfr.airdas_dfr'></span><span id='topic+as_airdas_dfr.data.frame'></span>

<h3>Description</h3>

<p>Check if an object is of class <code><a href="#topic+airdas_dfr">airdas_dfr</a></code>, or coerce it if possible.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_airdas_dfr(x)

## S3 method for class 'airdas_dfr'
as_airdas_dfr(x)

## S3 method for class 'data.frame'
as_airdas_dfr(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_airdas_dfr_+3A_x">x</code></td>
<td>
<p>An object to be coerced to class <code>airdas_dfr</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently only data frames can be coerced to an object of class <code><a href="#topic+airdas_dfr">airdas_dfr</a></code>.
If <code>x</code> does not have column names and classes as specified in <code><a href="#topic+airdas_dfr">airdas_dfr</a></code>,
then the function returns an error message detailing the first column that does not
meet the <code><a href="#topic+airdas_dfr">airdas_dfr</a></code> requirements.
</p>


<h3>Value</h3>

<p>An object of class 'airdas_dfr'
</p>


<h3>See Also</h3>

<p><code><a href="#topic+airdas_dfr-class">airdas_dfr-class</a></code>
</p>

<hr>
<h2 id='subsetting'>Subsetting objects created using swfscAirDAS</h2><span id='topic+subsetting'></span><span id='topic++5B.airdas_dfr'></span><span id='topic++24+3C-.airdas_dfr'></span><span id='topic++5B+3C-.airdas_dfr'></span><span id='topic++5B+5B+3C-.airdas_dfr'></span><span id='topic++5B.airdas_df'></span><span id='topic++24+3C-.airdas_df'></span><span id='topic++5B+3C-.airdas_df'></span><span id='topic++5B+5B+3C-.airdas_df'></span>

<h3>Description</h3>

<p>Subsetting <code>airdas_dfr</code> or <code>airdas_df</code> objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'airdas_dfr'
x[i, j, ..., drop = TRUE]

## S3 replacement method for class 'airdas_dfr'
x$name &lt;- value

## S3 replacement method for class 'airdas_dfr'
x[i, j, ...] &lt;- value

## S3 replacement method for class 'airdas_dfr'
x[[i]] &lt;- value

## S3 method for class 'airdas_df'
x[i, j, ..., drop = TRUE]

## S3 replacement method for class 'airdas_df'
x$name &lt;- value

## S3 replacement method for class 'airdas_df'
x[i, j, ...] &lt;- value

## S3 replacement method for class 'airdas_df'
x[[i]] &lt;- value
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="subsetting_+3A_x">x</code></td>
<td>
<p>object of class <code>airdas_dfr</code> or <code>airdas_df</code></p>
</td></tr>
<tr><td><code id="subsetting_+3A_i">i</code>, <code id="subsetting_+3A_j">j</code>, <code id="subsetting_+3A_...">...</code></td>
<td>
<p>elements to extract or replace, see <code><a href="base.html#topic++5B.data.frame">[.data.frame</a></code></p>
</td></tr>
<tr><td><code id="subsetting_+3A_drop">drop</code></td>
<td>
<p>logical, see <code><a href="base.html#topic++5B.data.frame">[.data.frame</a></code></p>
</td></tr>
<tr><td><code id="subsetting_+3A_name">name</code></td>
<td>
<p>A literal character string or ..., see <code><a href="base.html#topic++5B.data.frame">[.data.frame</a></code></p>
</td></tr>
<tr><td><code id="subsetting_+3A_value">value</code></td>
<td>
<p>A suitable replacement value, see <code><a href="base.html#topic++5B.data.frame">[.data.frame</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>When subsetting a <code>airdas_dfr</code> or <code>airdas_df</code> object, 
henceforth a <code>airdas_</code> object,
using any of the functions described in <code><a href="base.html#topic++5B.data.frame">[.data.frame</a></code>,
then then the <code>airdas_</code> class is simply dropped and the object is of class <code>data.frame</code>.
This is because of the strict format requirements of <code>airdas_</code> objects;
it is likely that a subsetted <code>airdas_</code> object will not have
the format required by subsequent swfscAirDAS functions,
and thus it is safest to drop the <code>airdas_</code> class.
If a data frame is passed to downstream <code>swfscAirDAS</code> functions 
that require a <code>airdas_</code> object,
then they will attempt to coerce the object to the necessary <code>airdas_</code> class
See <code><a href="#topic+as_airdas_dfr">as_airdas_dfr</a></code> and <code><a href="#topic+as_airdas_df">as_airdas_df</a></code> for more details.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>y &lt;- system.file("airdas_sample.das", package = "swfscAirDAS")
y.read &lt;- airdas_read(y)

# All return a data frame:
class(y.read[1:10, ])
class(y.read[, 1:10])

y.df &lt;- y.read
y.df[, 1] &lt;- "a"
class(y.df)

y.df &lt;- y.read
y.df$Event &lt;- "a"
class(y.df)

y.df &lt;- y.read
y.df[["Event"]] &lt;- "a"
class(y.df)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
