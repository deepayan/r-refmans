<!DOCTYPE html><html><head><title>Help for package sgo</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {sgo}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#sgo_area'><p>Calculate area from an ordered set of points</p></a></li>
<li><a href='#sgo_bng_lonlat'><p>British National Grid (BNG) Easting/Northing to Geodetic Coordinate</p>
System (GCS)</a></li>
<li><a href='#sgo_bng_ngr'><p>BNG Easting/Northing to National Grid References (NGR)</p></a></li>
<li><a href='#sgo_cart_lonlat'><p>Geodetic Coordinate System (GCS) in cartesian coordinates to polar</p>
coordinates</a></li>
<li><a href='#sgo_coordinates'><p>Extracts coordinates from an <code>sgo_points</code> object</p></a></li>
<li><a href='#sgo_distance'><p>Calculate distance(s) between points</p></a></li>
<li><a href='#sgo_en_wgs84'><p>Pseudo - Mercator to WGS84 Longitude/Latitude</p></a></li>
<li><a href='#sgo_etrs_laea'><p>ETRS89 to ETRS89-LAEA Easting/Northing</p></a></li>
<li><a href='#sgo_laea_etrs'><p>ETRS89-LAEA Easting/Northing to ETRS89 geodetic coordinates</p></a></li>
<li><a href='#sgo_lonlat_bng'><p>GCS to BNG Easting/Northing</p></a></li>
<li><a href='#sgo_lonlat_cart'><p>Geodetic Coordinate System (GCS) in polar coordinates to cartesian</p>
coordinates</a></li>
<li><a href='#sgo_ngr_bng'><p>NGR to BNG Easting/Northing</p></a></li>
<li><a href='#sgo_points'><p>Object containing 2D or 3D point coordinates</p></a></li>
<li><a href='#sgo_set_gcs'><p>Set GCS of a set of points</p></a></li>
<li><a href='#sgo_transform'><p>Coordinate transformation of a set of points</p></a></li>
<li><a href='#sgo_wgs84_en'><p>WGS84 to Easting Northing (Pseudo - Mercator)</p></a></li>
<li><a href='#sgo-package'><p>sgo: Simple Geographical Operations (with OSGB36).</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Simple Geographical Operations (with OSGB36)</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.2</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/clozanoruiz/sgo">https://github.com/clozanoruiz/sgo</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/clozanoruiz/sgo/issues">https://github.com/clozanoruiz/sgo/issues</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>Description:</td>
<td>Methods focused in performing the OSGB36/ETRS89 transformation 
  (Great Britain and the Isle of Man only) by using the Ordnance Survey's 
  OSTN15/OSGM15 transformation model. Calculation of distances and areas from 
  sets of points defined in any of the supported Coordinated Systems is also
  available.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>maps, tinytest</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/BSD-2-Clause">BSD_2_clause</a> + file LICENSE</td>
</tr>
<tr>
<td>Copyright:</td>
<td>OSTN transformation data included in this module remains
Crown Copyright (C) 2016 under the terms of the BSD licence:
(c) Copyright and database rights Ordnance Survey Limited 2016,
(c) Crown copyright and database rights Land &amp; Property
Services 2016 and/or (c) Ordnance Survey Ireland, 2016. All
rights reserved.</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>yes</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Collate:</td>
<td>'sgo.R' 'sgo_area.R' 'sgo_bng.R' 'sgo_distance.R' 'sgo_laea.R'
'sgo_ngr.R' 'sgo_points.R' 'sgo_set_gcs.R' 'sgo_wgs84.R'
'sgo_transform.R'</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-09-23 15:55:32 UTC; Carlos</td>
</tr>
<tr>
<td>Author:</td>
<td>Carlos Lozano Ruiz [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Carlos Lozano Ruiz &lt;carloslozanoruiz@outlook.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-09-23 16:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='sgo_area'>Calculate area from an ordered set of points</h2><span id='topic+sgo_area'></span>

<h3>Description</h3>

<p>Calculates the planar area for a set of points defined in the OS BNG or
ETRS89-LAEA. An accurate approximation of the geodetic area is calculated
when points are expressed in angular coordinates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sgo_area(x, interpolate = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sgo_area_+3A_x">x</code></td>
<td>
<p>A <code>sgo_points</code> object describing an ordered set of points.</p>
</td></tr>
<tr><td><code id="sgo_area_+3A_interpolate">interpolate</code></td>
<td>
<p>Numeric variable. If not <code>NULL</code>, defines the maximum
distance in metres between adjacent coordinates. It is only used with
angular coordinates.</p>
</td></tr>
<tr><td><code id="sgo_area_+3A_...">...</code></td>
<td>
<p>Currently ignored</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculate areas using the Gauss's area formula
(https://en.wikipedia.org/wiki/Shoelace_formula).
</p>
<p>When using angular coordinates the function performs an approximation of the
geodetic area following the methodology discussed in Berk &amp; Ferlan (2018)
where the area on the ellipsoid is determined by using a region-adapted
equal-area projection (Albers Equal-Area Conic) with one standard parallel.
The standard parallel and the projection origin are tied to the moment
centroid of the polygon.
</p>
<p>Boundary segments can be divided by interpolating vertices on the projected
geodesic to reduce the error introduced by boundary simplification and to
provide an even more accurate area computation for angular coordinates.
For instance, if <code>interpolate = 500</code> then any segment between adjacent
coordinates whose length is greater than <code>interpolate</code> will be split in
parts no greater than <code>500 m</code> and new vertices will be added.
</p>
<p>The area calculation in this package is best suited for features that would
be represented in a large or medium scale (like plots or council boundaries).
It will provide much less accurate results for features usually represented
at smalle scale (countries, continents, etc.).
</p>


<h3>Value</h3>

<p>Value of the area in squared metres rounded up to the first decimal.
</p>


<h3>References</h3>

<p>Sandi Berk &amp; Miran Ferlan, 2018. <em>Accurate area determination in the
cadaster: case study of Slovenia</em>. Cartography and Geographic Information
Science, 45:1, 1-17. DOI: 10.1080/15230406.2016.1217789
</p>
<p>Snyder, J.P. 1987. <em>Map Projections — A Working Manual</em>. US Geological
Survey Professional Paper, no. 1395. Washington, DC: US Government Printing
Office. DOI: 10.3133/pp1395
</p>


<h3>Examples</h3>

<pre><code class='language-R'>lon &lt;- c(-6.43698696, -6.43166843, -6.42706831, -6.42102546,
-6.42248238, -6.42639092, -6.42998435, -6.43321409)
lat &lt;- c(58.21740316, 58.21930597, 58.22014035, 58.22034112,
58.21849188, 58.21853606, 58.21824033, 58.21748949)
A &lt;- sgo_area(sgo_points(list(lon, lat), epsg=4326))
</code></pre>

<hr>
<h2 id='sgo_bng_lonlat'>British National Grid (BNG) Easting/Northing to Geodetic Coordinate
System (GCS)</h2><span id='topic+sgo_bng_lonlat'></span>

<h3>Description</h3>

<p>Converts Ordnance Survey grid reference easting/northing coordinates to GCS
longitude/latitude (SW corner of grid square).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sgo_bng_lonlat(x, to = 4258, OSTN = TRUE, OD = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sgo_bng_lonlat_+3A_x">x</code></td>
<td>
<p>A <code>sgo_points</code> object with coordinates defined in the projected
coordinate system BNG (EPSGs 27700 or 7405).</p>
</td></tr>
<tr><td><code id="sgo_bng_lonlat_+3A_to">to</code></td>
<td>
<p>Numeric. Sets the <code>epsg</code> code of the destination Geodetic
Coordinate System. 4258 (ETRS89) by default.</p>
</td></tr>
<tr><td><code id="sgo_bng_lonlat_+3A_ostn">OSTN</code></td>
<td>
<p>Logical variable indicating whether use OSTN15 transformation
when TRUE or a less accurate but slightly faster single Helmert
transformation when FALSE.</p>
</td></tr>
<tr><td><code id="sgo_bng_lonlat_+3A_od">OD</code></td>
<td>
<p>Logical variable. When TRUE, and the output contains a
column with heights, then a new column is added to the result indicating the
ordnance datum (OD) used on each point. It is ignored when <code>OSTN=FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The UK Ordnance Survey defined 'OSGB36' as the datum for the UK, based on the
'Airy 1830' ellipsoid. However, in 2014, they deprecated OSGB36 in favour of
ETRS89 for longitude/latitude coordinates. Thus, when converting to
longitude/latitude the OSGB36 datum should be always converted to ETRS89
(or WGS84).
</p>
<p>According to the Transformations and OSGM15 User Guide, p. 8:
<em>&quot;...ETRS89 is a precise version of the better known WGS84 reference
system optimised for use in Europe; however, for most purposes it can be
considered equivalent to WGS84.&quot;</em> and <em>&quot;For all navigation, mapping,
GIS, and engineering applications within the tectonically stable parts of
Europe (including UK and Ireland), the term ETRS89 should be taken as
synonymous with WGS84.&quot;</em> This means that ETRS89 and WGS84 datums will be
considered equivalent by this routine.
</p>
<p>If, for historical reasons, longitude/latitude coordinates must have the old
OSGB36 datum, then the parameter <code>to</code> must be set to 4277.
</p>
<p><strong>Note</strong>: Grid references rounded to whole metres will give
latitude/longitude that are accurate to about 5 decimal places: in Great
Britain, 1/100000 of a degree of latitude is about 70cm and 1/100000 of a
degree of longitude is about 1m.
All those coordinates outside the rectangle covered by OSTN15
will be automatically computed using the small Helmert transformation. Such
coordinates will be accurate up to about +/-5 metres.
Converting from BNG to lon/lat coordinates is slower than the other way
around, due to the iterative nature of the algorithm that is built into
OSTN15.
</p>


<h3>Value</h3>

<p>An object of class <code>sgo_points</code> whose coordinates are defined as
Longitude/Latitude.If <code>OD=TRUE</code> a column named <code>height.datum</code> is
added to the resulting object.
</p>


<h3>References</h3>

<p>Ordnance Survey Limited, 2018. <em>Transformations and OSGM15 user guide</em>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sgo_points">sgo_points</a></code>, <code><a href="#topic+sgo_lonlat_bng">sgo_lonlat_bng</a></code>,
<code><a href="#topic+sgo_coordinates">sgo_coordinates</a></code>, <code><a href="#topic+sgo_transform">sgo_transform</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- sgo_points(list(651409.903, 313177.270), epsg=27700)
p.89 &lt;- sgo_bng_lonlat(p) #ETRS89 lon/lat
p.36 &lt;- sgo_bng_lonlat(p, to=4277) #OSGB36 lon/lat
</code></pre>

<hr>
<h2 id='sgo_bng_ngr'>BNG Easting/Northing to National Grid References (NGR)</h2><span id='topic+sgo_bng_ngr'></span>

<h3>Description</h3>

<p>Converts BNG Easting/Northing coordinates to National Grid References
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sgo_bng_ngr(x, digits = 10)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sgo_bng_ngr_+3A_x">x</code></td>
<td>
<p>A <code>sgo_points</code> object with coordinates defined as
<code>epsg=27700</code> or <code>epsg=7405</code>.</p>
</td></tr>
<tr><td><code id="sgo_bng_ngr_+3A_digits">digits</code></td>
<td>
<p>Numeric. It defines the precision of the resulting grid
references.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All resulting grid references will have 10 digits (1m × 1m square) by
default. In order to reduce the output precision change the digits parameter
accordingly. When <code>digits=0</code>, it returns the numeric format of the grid
references.
</p>
<p>Note that National Grid references are truncated instead of being rounded
when converting to less precise references (as the OS system demands). By
doing so, the grid reference refers to the lower left corner of the relevant
square - to ensure the more precise polygon will remain within the boundaries
of the less precise polygon.
</p>


<h3>Value</h3>

<p>A list with at least one column named 'ngr'.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sgo_points">sgo_points</a></code>, <code><a href="#topic+sgo_ngr_bng">sgo_ngr_bng</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sgo &lt;- sgo_points(list(x=247455, y=706338, name="Ben Venue"),
coords=c("x", "y"), epsg=27700)
grid10 &lt;- sgo_bng_ngr(sgo)
grid8 &lt;- sgo_bng_ngr(sgo, digits=8)
#and notice the truncating, not rounding, of grid8 regarding grid10.
</code></pre>

<hr>
<h2 id='sgo_cart_lonlat'>Geodetic Coordinate System (GCS) in cartesian coordinates to polar
coordinates</h2><span id='topic+sgo_cart_lonlat'></span>

<h3>Description</h3>

<p>Converts a GCS expressed Earth-centered Earth-fixed (ECEF) cartesian
coordinate to Longitude and Latitude and Ellipsoid Height.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sgo_cart_lonlat(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sgo_cart_lonlat_+3A_x">x</code></td>
<td>
<p>A <code>sgo_points</code> object with coordinates expressed in cartesian
coordinates</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently converts from EPSGs <code>4936</code> and <code>4978</code> to <code>4937</code> and
<code>4979</code>
</p>


<h3>Value</h3>

<p>An object of class <code>sgo_points</code> with polar coordinates (Longitude,
Latitude and Ellipsoid Height).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sgo_points">sgo_points</a></code>, <code><a href="#topic+sgo_bng_lonlat">sgo_bng_lonlat</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- sgo_points(list(3487823.234, -305433.201, 5313739.634), epsg=4936)
p.xyz &lt;- sgo_cart_lonlat(p) #Cartesian coordinates
</code></pre>

<hr>
<h2 id='sgo_coordinates'>Extracts coordinates from an <code>sgo_points</code> object</h2><span id='topic+sgo_coordinates'></span>

<h3>Description</h3>

<p>Extract the coordinates of an <code>sgo_points</code> object expressed as a matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sgo_coordinates(x, names.xyz = NULL, as.latlon = FALSE,
ll.format=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sgo_coordinates_+3A_x">x</code></td>
<td>
<p>An instance of <code>sgo_points</code>.</p>
</td></tr>
<tr><td><code id="sgo_coordinates_+3A_names.xyz">names.xyz</code></td>
<td>
<p>Character vector. New names for the columns x, y and
possibly z of the object <code>x</code>.</p>
</td></tr>
<tr><td><code id="sgo_coordinates_+3A_as.latlon">as.latlon</code></td>
<td>
<p>Logical variable. When <code>x</code> is defined in a geodetic
coordinate system as lon/lat and this parameter is set to <code>TRUE</code> then
it returns the coordinates ordered as lat/lon.</p>
</td></tr>
<tr><td><code id="sgo_coordinates_+3A_ll.format">ll.format</code></td>
<td>
<p>Character variable. Applies a format to the returned
coordinates when <code>x</code> is defined in a geodetic coordinate system. As of
now it only accepts <code>DMS</code>, which will return strings of
coordinates formatted as degrees, minutes and seconds (certain accuracy will
be lost because seconds are rounded to the second decimal).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix with 2 or 3 named columns.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- sgo_points(list(57.47777, -4.22472), epsg=4326)
coords &lt;- sgo_coordinates(p)

</code></pre>

<hr>
<h2 id='sgo_distance'>Calculate distance(s) between points</h2><span id='topic+sgo_distance'></span>

<h3>Description</h3>

<p>Calculates the distance between OS National Grid Reference points. Points
with angular coordinates will use the Harvesine or Vicenty formulae.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sgo_distance(x, y, by.element = FALSE,
  which = ifelse(isTRUE(x$epsg==27700 || x$epsg==7405), "BNG", "Vicenty"),
  grid.true.distance = ifelse(isTRUE(x$epsg==27700 || x$epsg==7405),
  TRUE, FALSE), iterations = 100L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sgo_distance_+3A_x">x</code></td>
<td>
<p>A <code>sgo_points</code> object describing a set of points in a geodetic
coordinate system.</p>
</td></tr>
<tr><td><code id="sgo_distance_+3A_y">y</code></td>
<td>
<p>A <code>sgo_points</code> object, defaults to <code>x</code>.</p>
</td></tr>
<tr><td><code id="sgo_distance_+3A_by.element">by.element</code></td>
<td>
<p>Logical variable. If <code>TRUE</code>, return a vector with
distance between the first elements of <code>x</code> and <code>y</code>, the second,
etc. If <code>FALSE</code>, return the dense matrix with all pairwise distances.</p>
</td></tr>
<tr><td><code id="sgo_distance_+3A_which">which</code></td>
<td>
<p>Character vector. For geodetic coordinates one of
<code>Harvesine</code> or <code>Vicenty</code>. It defaults to <code>BNG</code> for points in
'OS British National Grid' coordinates.</p>
</td></tr>
<tr><td><code id="sgo_distance_+3A_grid.true.distance">grid.true.distance</code></td>
<td>
<p>Logical variable. Currently only used for BNG
coordinates. If <code>TRUE</code> it returns the true (geodesic) distance.</p>
</td></tr>
<tr><td><code id="sgo_distance_+3A_iterations">iterations</code></td>
<td>
<p>Numeric variable. Maximum number of iterations used in the
Vicenty method.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function can use two different methods when working with geodetic
coordinates: When <code>which = "Vicenty"</code> the Vincenty's formula is used to
calculate the geodesics (distance) on an ellipsoid to an accuracy of up to
a millimetre. If such accuracy is not needed, <code>which</code> can also
accept the string &quot;Harvesine&quot; which calculates the great-circle distance
between two points on a sphere. Harvesines are faster to compute than the
Vicenty distances but can result in an error of up to 0.5%.
</p>
<p>When working with (BNG) planar coordinates the Local Scale Factor is the
scale distortion inherent in the map projection at a point. When
<code>grid.true.distance</code> is <code>TRUE</code> the function computes a line
scale factor using Simpson's Rule to achieve greater accuracy and
approximate the distance to the true geodesic distance. When it is
<code>FALSE</code> the Euclidean distance in the plane is calculated.
</p>
<p><strong>Note</strong>: Considering F as the scale factor, we have that
S (True distance) = s (grid distance) / F<br />
For most purposes the scale factor can be taken as constant for distances up
to 20km (errors not exceeding 1 or 2 parts er million) and equal to the mid
point of the line. For longer lines, this routine computes a scale factor for
both ends (F1 and F2) and the mid point (Fm) and then uses the Simpson's
Rule:<br />
F = 1/6(F1 + 4Fm + F2)
</p>


<h3>Value</h3>

<p>If <code>by.element</code> is <code>FALSE</code> <code>sgo_distance</code> returns a dense
numeric matrix of dimension length(x) by length(y). Otherwise it returns a
numeric vector of length <code>x</code> or <code>y</code>, the shorter one being
recycled. Distances involving empty geometries are <code>NA</code>.
All distances are returned in metres.
</p>


<h3>References</h3>

<p>Thaddeus Vincenty, 1975. <em>Direct and Inverse Solutions of Geodesics on
the Ellipsoid with application of nested equations</em>. Survey Review, 23:176,
88-93, DOI: 10.1179/sre.1975.23.176.88
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p1 &lt;- sgo_points(list(-3.9369, 56.1165), epsg=4326)
lon &lt;- c(-4.25181,-3.18827)
lat &lt;- c(55.86424, 55.95325)
pts &lt;- sgo_points(list(longitude=lon, latitude=lat), epsg=4326)
p1.to.pts &lt;- sgo_distance(p1, pts, by.element = TRUE)

## Perimeter of a polygon defined as a series of ordered points:
lon &lt;- c(-6.43698696, -6.43166843, -6.42706831, -6.42102546,
-6.42248238, -6.42639092, -6.42998435, -6.43321409)
lat &lt;- c(58.21740316, 58.21930597, 58.22014035, 58.22034112,
58.21849188, 58.21853606, 58.21824033, 58.21748949)
pol &lt;- sgo_points(list(lon, lat), epsg=4326)
# Create a copy of the polygon with its coordinates shifted one position
# so that we can calculate easily the distance between vertices
coords &lt;- sgo_coordinates(pol)
pol.shift.one &lt;- sgo_points(rbind(coords[-1, ], coords[1, ]), epsg=pol$epsg)
perimeter &lt;- sum(sgo_distance(pol, pol.shift.one, by.element=TRUE))
</code></pre>

<hr>
<h2 id='sgo_en_wgs84'>Pseudo - Mercator to WGS84 Longitude/Latitude</h2><span id='topic+sgo_en_wgs84'></span>

<h3>Description</h3>

<p>Converts Pseudo - Mercator coordinates to WGS84 (EPSG=4326)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sgo_en_wgs84(x, to = 4326)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sgo_en_wgs84_+3A_x">x</code></td>
<td>
<p>A <code>sgo_points</code> object describing a set of points in the
geodetic coordinate system EPSG=3857.</p>
</td></tr>
<tr><td><code id="sgo_en_wgs84_+3A_to">to</code></td>
<td>
<p>Numeric. Sets the <code>epsg</code> code of the destination Geodetic
Coordinate System. 4326 (WGS84) by default. And currently doesn't support any
other.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently converts ONLY from EPSG 3857 to 4326 (Longitude/Latitude).
</p>


<h3>Value</h3>

<p>An object of class <code>sgo_points</code> whose coordinates are defined as
Longitude/Latitude.
</p>


<h3>References</h3>

<p>IOGP Publication 373-7-2 - Geomatics Guidance Note number 7,
part 2 (October 2020). https://epsg.org/guidance-notes.html
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sgo_points">sgo_points</a></code>, <code><a href="#topic+sgo_wgs84_en">sgo_wgs84_en</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- sgo_points(list(-11169055.58, 2810000.00), epsg=3857)
res &lt;- sgo_en_wgs84(p)
</code></pre>

<hr>
<h2 id='sgo_etrs_laea'>ETRS89 to ETRS89-LAEA Easting/Northing</h2><span id='topic+sgo_etrs_laea'></span>

<h3>Description</h3>

<p>Converts ETRS89 geodetic coordinates to ETRS89-LAEA Easting/Northing
(EPSG:3035)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sgo_etrs_laea(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sgo_etrs_laea_+3A_x">x</code></td>
<td>
<p>A <code>sgo_points</code> object describing a set of points in the
geodetic coordinate system EPSG=4258, 4937 or 4936.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>ETRS89-LAEA (EPSG:3035) is a CRS for pan-European statistical mapping at all
scales or other purposes where true area representation is required.
</p>


<h3>Value</h3>

<p>An object of class <code>sgo_points</code> whose coordinates are defined as
Easting/Northing in the EPSG:3035 Projected Coordinate System.
</p>


<h3>References</h3>

<p>IOGP Publication 373-7-2 - Geomatics Guidance Note number 7,
part 2 (October 2020). https://epsg.org/guidance-notes.html)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sgo_points">sgo_points</a></code>, <code><a href="#topic+sgo_area">sgo_area</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- sgo_points(list(-3.9369, 56.1165), epsg=4258)
prj &lt;- sgo_etrs_laea(p)
</code></pre>

<hr>
<h2 id='sgo_laea_etrs'>ETRS89-LAEA Easting/Northing to ETRS89 geodetic coordinates</h2><span id='topic+sgo_laea_etrs'></span>

<h3>Description</h3>

<p>Converts ETRS89-LAEA Easting/Northing to ETRS89 geodetic coordinates
(EPSG:4258)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sgo_laea_etrs(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sgo_laea_etrs_+3A_x">x</code></td>
<td>
<p>A <code>sgo_points</code> object describing a set of points in the
projected coordinate system EPSG=3035.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>ETRS89-LAEA (EPSG:3035) is a CRS for pan-European statistical mapping at all
scales or other purposes where true area representation is required.
</p>


<h3>Value</h3>

<p>An object of class <code>sgo_points</code> whose coordinates are defined as
Longitude/Latitude in the ETRS89 Coordinate Reference System.
</p>


<h3>References</h3>

<p>IOGP Publication 373-7-2 - Geomatics Guidance Note number 7,
part 2 (October 2020). https://epsg.org/guidance-notes.html
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sgo_points">sgo_points</a></code>, <code><a href="#topic+sgo_area">sgo_area</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>prj &lt;- sgo_points(list(3962799.45, 2999718.85), epsg=3035)
p &lt;- sgo_laea_etrs(prj)
</code></pre>

<hr>
<h2 id='sgo_lonlat_bng'>GCS to BNG Easting/Northing</h2><span id='topic+sgo_lonlat_bng'></span>

<h3>Description</h3>

<p>Converts a geodetic coordinate system to BNG (projected) Easting/Northing
coordinates. It also transforms GPS ellipsoid heights to orthometric
(mean sea level) heights on the relevant Ordnance Survey mapping datum, using
the National Geoid Model OSGM15.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sgo_lonlat_bng(x, to=27700, OSTN=TRUE, OD=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sgo_lonlat_bng_+3A_x">x</code></td>
<td>
<p>A <code>sgo_points</code> object with coordinates defined in a Geodetic
Coordinate System expressed as Longitude and Latitude (e.g. epsg=4258, 4937,
4326, 4979 or 4277).</p>
</td></tr>
<tr><td><code id="sgo_lonlat_bng_+3A_to">to</code></td>
<td>
<p>Specifies the EPSG code to convert the coordinates to. It can only
take the following values: <code>27700</code> or <code>7405</code>.</p>
</td></tr>
<tr><td><code id="sgo_lonlat_bng_+3A_ostn">OSTN</code></td>
<td>
<p>Logical variable indicating whether use OSTN15 transformation
when TRUE or a less accurate but slightly faster single Helmert
transformation when FALSE.</p>
</td></tr>
<tr><td><code id="sgo_lonlat_bng_+3A_od">OD</code></td>
<td>
<p>Logical variable. When TRUE, and the output contains a
column with heights, then a new column is added to the result indicating the
ordnance datum (OD) used on each point. It is ignored when <code>OSTN=FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The UK Ordnance Survey defined 'OSGB36' as the datum for the UK, based on the
'Airy 1830' ellipsoid. However, in 2014, they deprecated OSGB36 in favour of
ETRS89 for longitude/latitude coordinates. Thus, <code>x</code> should be defined
as ETRS89 (or WGS84) most of the times.
</p>
<p>Note: When transforming from EPSG=4277 any height included in the input
will be simply discarded (see <code><a href="#topic+sgo_points">sgo_points</a></code>).
</p>
<p>According to the Transformations and OSGM15 User Guide, p. 8:
<em>&quot;...ETRS89 is a precise version of the better known WGS84 reference
system optimised for use in Europe; however, for most purposes it can be
considered equivalent to WGS84.&quot;</em> and <em>&quot;For all navigation, mapping,
GIS, and engineering applications within the tectonically stable parts of
Europe (including UK and Ireland), the term ETRS89 should be taken as
synonymous with WGS84.&quot;</em> This means that EPSGs with the ETRS89 datum or
WGS84 will be considered equivalent by this routine.
</p>
<p><strong>Note</strong>: All those coordinates outside the rectangle covered by OSTN15
will be automatically computed using the small Helmert transformation. Such
coordinates will be accurate up to about +/-5 metres, therefore the resulting
easting and northing coordinates will be rounded to the metre. Since those
coordinates are outside of the OSTN15 domain the resulting coordinates will
have the resulting height defined as <code>NA</code>.
Similarly, when using <code>OSTN=FALSE</code> on 3D coordinates, the result will
have all the heights defined as <code>NA</code>.
Converting from lon/lat to BNG coordinates is faster than the other way
around, due to the iterative nature of the algorithm that is built into
OSTN15.
</p>


<h3>Value</h3>

<p>An object of class <code>sgo_points</code> whose coordinates are defined as
Easting/Northing (epsg=27700 or 7405). They are adjusted to the SW corner of
1m grid square. If <code>OD=TRUE</code> a column named <code>height.datum</code> is
added to the resulting object.
</p>


<h3>References</h3>

<p>Ordnance Survey Limited, 2018. <em>Transformations and OSGM15 user guide</em>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sgo_points">sgo_points</a></code>, <code><a href="#topic+sgo_bng_lonlat">sgo_bng_lonlat</a></code>,
<code><a href="#topic+sgo_coordinates">sgo_coordinates</a></code>, <code><a href="#topic+sgo_transform">sgo_transform</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>lon &lt;- c(-4.25181,-3.18827)
lat &lt;- c(55.86424, 55.95325)
pts &lt;- sgo_points(list(longitude=lon, latitude=lat), epsg=4326)
bng.pts &lt;- sgo_lonlat_bng(pts)
</code></pre>

<hr>
<h2 id='sgo_lonlat_cart'>Geodetic Coordinate System (GCS) in polar coordinates to cartesian
coordinates</h2><span id='topic+sgo_lonlat_cart'></span>

<h3>Description</h3>

<p>Converts a GCS expressed in Longitude and Latitude
(and Ellipsoid Height) to an Earth-centered Earth-fixed (ECEF) cartesian
coordinate system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sgo_lonlat_cart(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sgo_lonlat_cart_+3A_x">x</code></td>
<td>
<p>A <code>sgo_points</code> object with coordinates expressed as Longitude
and Latitude (and Ellipsoid Height if they are 3D points).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently converts from EPSGs <code>4258</code> and <code>4937</code> to <code>4936</code> or
from EPSGs <code>4326</code>, <code>4979</code> to <code>4978</code>
</p>


<h3>Value</h3>

<p>An object of class <code>sgo_points</code> whose coordinates are defined as a
x, y and z cartesian vector.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sgo_points">sgo_points</a></code>, <code><a href="#topic+sgo_lonlat_bng">sgo_lonlat_bng</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- sgo_points(list(-5.00355049, 56.7968571), epsg=4326)
p.xyz &lt;- sgo_lonlat_cart(p) #Cartesian coordinates
</code></pre>

<hr>
<h2 id='sgo_ngr_bng'>NGR to BNG Easting/Northing</h2><span id='topic+sgo_ngr_bng'></span>

<h3>Description</h3>

<p>Converts OS National Grid References to Easting/Northing coordinates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sgo_ngr_bng(x, col = NULL, check.only = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sgo_ngr_bng_+3A_x">x</code></td>
<td>
<p>A data.frame, list or vector containing strings describing OS
National Grid References, with or without whitespace separators.
(e.g. 'SU 387 148').</p>
</td></tr>
<tr><td><code id="sgo_ngr_bng_+3A_col">col</code></td>
<td>
<p>Character string with the name of the 'column' containing the
vector of NGR values, it is required when <code>x</code> is a list or data.frame
with more than one column.</p>
</td></tr>
<tr><td><code id="sgo_ngr_bng_+3A_check.only">check.only</code></td>
<td>
<p>Logical parameter. If it is set to TRUE then the routine
returns a logical vector indicating which references are correct.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All entered standard grid references can range from two-digit references up
to 10-digit references (1m × 1m square).
If <code>x</code> is a list with 2 or more vector elements, <code>col</code> can be used
to inform the function which of the elements contains the NGR strings. The
rest of the elements will be appended to the resulting object. See examples.
</p>


<h3>Value</h3>

<p>An object of class <code>sgo_points</code> whose coordinates are defined as
Easting/Northing when <code>check.only</code> is kept as FALSE. Otherwise, it
returns a logical vector indicating which grid references are correct and
which ones are not.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sgo_points">sgo_points</a></code>, <code><a href="#topic+sgo_bng_ngr">sgo_bng_ngr</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vec &lt;- c("NN 166 712", "HU38637653")
lst &lt;- list(vec)
v &lt;- sgo_ngr_bng(vec)
l &lt;- sgo_ngr_bng(lst)

# any additional column (here 'attr') will be added to the result
extra &lt;- list(p=c("NN 166712", "HU38637653"),
              attr=c("name1","name2"))
res &lt;- sgo_ngr_bng(extra, col="p")
res

# grid references returned by sgo_bng_ngr are within an
# element (column) named 'ngr'
grid &lt;- sgo_bng_ngr(sgo_points(list(x=247455, y=706338, name="Ben Venue"),
                               coords=c("x","y"),
                               epsg=27700))
bng &lt;- sgo_ngr_bng(grid, col="ngr")

# test
bad &lt;- c("NN 166 712", "AA 3863 7653")
check &lt;- sgo_ngr_bng(bad, check.only=TRUE) #returns a logical vector
</code></pre>

<hr>
<h2 id='sgo_points'>Object containing 2D or 3D point coordinates</h2><span id='topic+sgo_points'></span><span id='topic+print.sgo_points'></span><span id='topic+as.data.frame.sgo_points'></span><span id='topic+as.list.sgo_points'></span>

<h3>Description</h3>

<p>2D or 3D coordinates (and other attributes) of a point or collection of
points
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sgo_points(x, coords = NULL, epsg = NULL)

## S3 method for class 'sgo_points'
print(x, ..., n = 6L)

## S3 method for class 'sgo_points'
as.data.frame(x, row.names = NULL, optional = FALSE, ...)

## S3 method for class 'sgo_points'
as.list(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sgo_points_+3A_x">x</code></td>
<td>
<p>A matrix, list or dataframe with at least 2 columns of either
easting/northing or longitude/latitude coordinates per row. A column with
height values is optional.
<strong>Please note</strong> that the order is important when <code>x</code> has only 2 or
3 columns and <code>coords</code> is not informed: lat/lon or northing/easting
(and height) will produce wrong results.</p>
</td></tr>
<tr><td><code id="sgo_points_+3A_coords">coords</code></td>
<td>
<p>A vector with the names of the two or three columns containing
the X (easting or longitude), Y (northing or latitude) and optionally Z
(ellipsoid or orthometric height) coordinates.</p>
</td></tr>
<tr><td><code id="sgo_points_+3A_epsg">epsg</code></td>
<td>
<p>Specifies the EPSG code of coordinates to store. It can take any
of the following values:
</p>

<ul>
<li><p> when working with (2D/3D) ETRS89 Datum: <code>4258</code>, <code>4937</code>,
<code>4936</code>, <code>3035</code>
</p>
</li>
<li><p> when working with (2D/3D) WGS84 Datum:<code>4326</code>, <code>4979</code>,
<code>4978</code>
</p>
</li>
<li><p> when working with (2D/3D) OSGB36 Datum:<code>4277</code>, <code>27700</code>,
<code>7405</code>
</p>
</li>
<li><p> WGS84/Pseudo-Mercator (Google Maps, OpenStreetMap, etc.): <code>3857</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="sgo_points_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods,
see <a href="base.html#topic+print">print</a>, <a href="base.html#topic+as.data.frame">as.data.frame</a> or <a href="base.html#topic+as.list">as.list</a> .</p>
</td></tr>
<tr><td><code id="sgo_points_+3A_n">n</code></td>
<td>
<p>Maximum number of features to print.</p>
</td></tr>
<tr><td><code id="sgo_points_+3A_row.names">row.names</code></td>
<td>
<p>NULL or a character vector giving the row names for the
data frame. Missing values are not allowed.</p>
</td></tr>
<tr><td><code id="sgo_points_+3A_optional">optional</code></td>
<td>
<p>Logical. See <a href="base.html#topic+as.data.frame">as.data.frame</a></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This object stores 2D or 3D point coordinates and any other column-list of
attributes related to each point. Note that additional column-lists will be
expanded with <code>NA</code> values if they contain less elements than
coordinates.
Currently it only supports the following <code>epsg</code>s:
</p>

<ul>
<li><p><code>4258</code>: ETRS89, geodetic coordinate system. The columns in
<code>x</code> must be defined as Longitude and Latitude (<code>sgo</code> also accepts
a third column for ellipsoid heights). The defined datum for this set of
coordinates is ETRS89 (https://epsg.io/4258).
</p>
</li>
<li><p><code>4937</code>: ETRS89, geodetic coordinate system. The columns in
<code>x</code> must be defined as Longitude, Latitude and Ellipsoid Heights
respectively. The defined datum for this set of coordinates is ETRS89
(https://epsg.io/4937).
</p>
</li>
<li><p><code>4936</code>: ETRS89, geodetic coordinate system. The columns in
<code>x</code> must be defined as cartesian coordinates x, y and z. The defined
datum for this set of coordinates is ETRS89 (https://epsg.io/4936).
</p>
</li>
<li><p><code>3035</code>: ETRS-LAEA, projected coordinate system. The
columns in <code>x</code> must be defined as Easting and Northing. The defined
datum for this set of coordinates is ETRS89 (https://epsg.io/3035)
</p>
</li>
<li><p><code>4326</code>: WGS84, geodetic coordinate system. The columns in <code>x</code>
must be defined as Longitude and Latitude (<code>sgo</code> also accepts a
third column for ellipsoid heights). The defined datum for this set of
coordinates is WGS84 (https://epsg.io/4326).
</p>
</li>
<li><p><code>4979</code>: WGS84, geodetic coordinate system. The columns in <code>x</code>
must be defined as Longitude, Latitude and Ellipsoid Height respectively.
The defined datum for this set of coordinates is WGS84 (https://epsg.io/4979)
</p>
</li>
<li><p><code>4978</code>: WGS84, geodetic coordinate system. The columns in <code>x</code>
must be defined as cartesian coordinates x, y and z. The
defined datum for this set of coordinates is WGS84 (https://epsg.io/4978)
</p>
</li>
<li><p><code>4277</code>: OSGB36, geodetic coordinate system. The 2 columns in
<code>x</code> must be defined as Longitude and Latitude values respectively. The
defined datum for this set of coordinates is OSGB 1936
(https://epsg.io/4277). <em>Coordinates defined like this should only be
used for historical reasons and to convert only to or from BNG coordinates.</em>
<strong>Height values will be discarded when working with this coordinate
system.</strong>
</p>
</li>
<li><p><code>27700</code>: British National Grid, projected coordinate system. The
columns in <code>x</code> must be defined as Easting and Northing (<code>sgo</code> also
accepts a third column for orthometric heights). The defined datum for this
set of coordinates is OSGB 1936 (https://epsg.io/27700).
</p>
</li>
<li><p><code>7405</code>: British National Grid, projected coordinate system. The
columns in <code>x</code> must be defined as Easting, Northing and ODN Orthometric
height respectively (<code>sgo</code> accepts heights from other datums like
Orkney, Lerwick, Stornoway, Douglas, St.Marys and 'Newlyn offshore').
The defined datum for this set of coordinates is OSGB 1936
(https://epsg.io/7405).
</p>
</li>
<li><p><code>3857</code>: WGS 84 / Pseudo-Mercator, projected coordinate system. The
columns in <code>x</code> must be defined as Easting and Northing. The defined
datum for this set of coordinates is WGS84 (https://epsg.io/3857)
</p>
</li></ul>



<h3>Value</h3>

<p>An object of class <code>sgo_points</code>. This object is a actually a list with
class <code>sgo_points</code> and at least 5 elements (or 6 elements if it is 3D):
</p>

<ul>
<li><p><code>x</code>: A numeric vector containing easting or longitude coordinates.
</p>
</li>
<li><p><code>y</code>: A numeric vector with northing or latitude coordintes.
</p>
</li>
<li><p><code>z</code>: A numeric vector with height values when the object is 3D.
</p>
</li>
<li><p><code>epsg</code>: A scalar value with the EPSG code of the current
Geographic Coordinate System (GCS).
</p>
</li>
<li><p><code>datum</code>: A string describing the geodetic datum that defines the
GCS of the object. Currently can take the values &quot;OSGB36&quot;, &quot;WGS84&quot; or
&quot;ETRS89&quot;
</p>
</li>
<li><p><code>dimension</code>: A string describing whether the object is 2D or 3D.
It can take the values &quot;XY&quot; or &quot;XYZ&quot;.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+sgo_coordinates">sgo_coordinates</a></code>, <code><a href="#topic+sgo_transform">sgo_transform</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># lists:
p1 &lt;- sgo_points(list(-3.9369, 56.1165), epsg=4326)
lon &lt;- c(-4.25181,-3.18827)
lat &lt;- c(55.86424, 55.95325)
p2 &lt;- sgo_points(list(longitude=lon, latitude=lat), epsg=4326)
#p3 will fill up the list 'desc' with NA's to have the same number of
#elements as coordinates in the list:
p3 &lt;- sgo_points(list(longitude=lon, latitude=lat, desc="c1"),
                 coords=c("longitude", "latitude"), epsg=4326)
# dataframe:
ln &lt;- c(-4.22472, -2.09908)
lt &lt;- c(57.47777, 57.14965)
n &lt;- c("Inverness", "Aberdeen")
df &lt;- data.frame(n, ln, lt, stringsAsFactors = FALSE)
p4 &lt;- sgo_points(df, coords=c("ln", "lt"), epsg=4326)

# plotting on a map:
if (require(maps)) {
  map('world', regions=('uk'), xlim=c(-9, 0), ylim=c(54.5, 60.9))
  points(x=p1$x, y=p1$y, pch=0, col="green") #Stirling
  points(p4, pch=0, col="red")
  text(p4, labels=p4$n, pos=1, cex=0.9)
}
</code></pre>

<hr>
<h2 id='sgo_set_gcs'>Set GCS of a set of points</h2><span id='topic+sgo_set_gcs'></span>

<h3>Description</h3>

<p>Changes the geodetic coordinate system of a set of points using a single
Helmert transformation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sgo_set_gcs(x, to = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sgo_set_gcs_+3A_x">x</code></td>
<td>
<p>A <code>sgo_points</code> object describing a set of points in a geodetic
coordinate system.</p>
</td></tr>
<tr><td><code id="sgo_set_gcs_+3A_to">to</code></td>
<td>
<p>Specifies the EPSG code to convert the coordinates to. Currently it
can take any of the following values: <code>4258</code>, <code>4937</code>, <code>4936</code>,
<code>4326</code>, <code>4979</code>, <code>4978</code> or <code>4277</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Changes the geodetic coordinate system of a set of points. Note that the
precision of various datums will vary, and the original WGS-84 is not defined
to be accurate to better than ±1 metre. Most transformations shouldn't be
assumed to be accurate to better than a meter; between OSGB36 and WGS84
somewhat less - the lost of accuracy can be up to ±5m when using single
Helmert transformations.
</p>
<p>Input points with a projected coordinate system (e.g. 27700, 7405, 3035 or
3857) are not allowed.
</p>
<p><strong>Warning</strong>
This function is mainly for internal use of the program. Since it relies on a
single Helmert transformation it is not recommended to call it directly. Use
any other of the transformation functions available (<a href="#topic+sgo-package">sgo-package</a>).
</p>


<h3>Value</h3>

<p>An object of class 'sgo_points'.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sgo_points">sgo_points</a></code>, <code><a href="#topic+sgo_transform">sgo_transform</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>lon &lt;- c(-4.25181,-3.18827)
lat &lt;- c(55.86424, 55.95325)
p &lt;- sgo_points(list(longitude=lon, latitude=lat), epsg=4326)
# warning: a single Helmert transformation is used in the next transformation
p2 &lt;- sgo_set_gcs(p, to=4277)
# if higher precision is required to transform between OSGB36 lon/lat and
# ETRS89/WGS84 lon/lat then use the OSTN15 transformation (will be slower):
# Transform from WGS84 lon/lat coordinates to EPSG:4277 using OSTN15
p2 &lt;- sgo_transform(p, to=4277)
</code></pre>

<hr>
<h2 id='sgo_transform'>Coordinate transformation of a set of points</h2><span id='topic+sgo_transform'></span>

<h3>Description</h3>

<p>Transforms the coordinate system of a set of points to any supported
coordinate system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sgo_transform(x, to = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sgo_transform_+3A_x">x</code></td>
<td>
<p>A <code>sgo_points</code> object.</p>
</td></tr>
<tr><td><code id="sgo_transform_+3A_to">to</code></td>
<td>
<p>Specifies the EPSG code to convert the coordinates to. See
<code><a href="#topic+sgo_points">sgo_points</a></code> for a list of supported EPSG codes.</p>
</td></tr>
<tr><td><code id="sgo_transform_+3A_...">...</code></td>
<td>
<p>Additional parameters passed to internal functions. Currently it
supports the additional arguments seen in <code>sgo_bng_lonlat</code> and
<code>sgo_lonlat_bng</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a wrapper of specific transformation functions
(<code><a href="#topic+sgo_bng_lonlat">sgo_bng_lonlat</a></code>, <code><a href="#topic+sgo_en_wgs84">sgo_en_wgs84</a></code>,
<code><a href="#topic+sgo_lonlat_bng">sgo_lonlat_bng</a></code>, <code><a href="#topic+sgo_wgs84_en">sgo_wgs84_en</a></code>,
<code><a href="#topic+sgo_laea_etrs">sgo_laea_etrs</a></code>, <code><a href="#topic+sgo_etrs_laea">sgo_etrs_laea</a></code>,
<code><a href="#topic+sgo_cart_lonlat">sgo_cart_lonlat</a></code>, <code><a href="#topic+sgo_lonlat_cart">sgo_lonlat_cart</a></code>) that transforms
the coordinate system of a set of points to any of the supported coordinate
systems.
</p>
<p>Please note that this package assumes that the Coordinate Reference Systems
(CRS) ETRS89 and WGS84 are the same within the UK, but this shouldn't be a
problem for most civilian use of GPS satellites. If a high-precision
transformation between WGS84 and ETRS89 is required then it is recommended
to use a different package to do the conversion.
</p>
<p>According to the Transformations and OSGM15 User Guide, p. 8:
<em>&quot;...ETRS89 is a precise version of the better known WGS84 reference
system optimised for use in Europe; however, for most purposes it can be
considered equivalent to WGS84.&quot;</em> and <em>&quot;For all navigation, mapping,
GIS, and engineering applications within the tectonically stable parts of
Europe (including UK and Ireland), the term ETRS89 should be taken as
synonymous with WGS84.&quot;</em>.
</p>
<p><strong>Warning: </strong>Coordinates defined in the Geodetic Coordinate System
EPSG:4277 (with datum OSGB 1936) should only be used to convert to or from
BNG coordinates and for historical reasons only.
</p>


<h3>Value</h3>

<p>An object of class 'sgo_points'.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sgo_points">sgo_points</a></code>, <code><a href="#topic+sgo_coordinates">sgo_coordinates</a></code>,
<code><a href="#topic+sgo_set_gcs">sgo_set_gcs</a></code>, <code><a href="#topic+sgo_bng_ngr">sgo_bng_ngr</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ln &lt;- c(-4.22472, -2.09908)
lt &lt;- c(57.47777, 57.14965)
n &lt;- c("Inverness", "Aberdeen")
df &lt;- data.frame(n, ln, lt, stringsAsFactors = FALSE)
locations &lt;- sgo_points(df, coords=c("ln", "lt"), epsg=4326)

locations.bng &lt;- sgo_transform(locations, to=27700)
locations.osgb36 &lt;- sgo_transform(locations, to=4277)
locations.ngr &lt;- sgo_bng_ngr(sgo_transform(locations, to=27700))
locations.wgs84EN &lt;- sgo_transform(locations.bng, to=3857)
</code></pre>

<hr>
<h2 id='sgo_wgs84_en'>WGS84 to Easting Northing (Pseudo - Mercator)</h2><span id='topic+sgo_wgs84_en'></span>

<h3>Description</h3>

<p>Converts WGS84 coordinates to Easting/Northing (Pseudo-Mercator)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sgo_wgs84_en(x, to = 3857)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sgo_wgs84_en_+3A_x">x</code></td>
<td>
<p>A <code>sgo_points</code> object describing a set of points in the
geodetic coordinate system EPSG=4326 or 4979.</p>
</td></tr>
<tr><td><code id="sgo_wgs84_en_+3A_to">to</code></td>
<td>
<p>Numeric. Sets the <code>epsg</code> code of the destination Geodetic
Coordinate System. 3857 (WGS84) by default. And currently doesn't support any
other.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This routine also accepts source data expressed in ETRS89 coordinates
(EPSG=4258 or 4937) as it is considered the difference between those two GCS
is far less than the accuracy available when working with Pseudo-Mercator
coordinates.
</p>
<p>The results can be used in maps where Pseudo-Mercator coordinates are needed.
Usually, those include Google, Bing, OpenStreetMap and several other webmap
applications.
</p>


<h3>Value</h3>

<p>An object of class <code>sgo_points</code> whose coordinates are defined as
Easting/Northing.
</p>


<h3>References</h3>

<p>IOGP Publication 373-7-2 - Geomatics Guidance Note number 7,
part 2 (October 2020). https://epsg.org/guidance-notes.html
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sgo_points">sgo_points</a></code>, <code><a href="#topic+sgo_en_wgs84">sgo_en_wgs84</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- sgo_points(list(-3.9369, 56.1165), epsg=4326)
res &lt;- sgo_wgs84_en(p)
</code></pre>

<hr>
<h2 id='sgo-package'>sgo: Simple Geographical Operations (with OSGB36).</h2><span id='topic+sgo-package'></span>

<h3>Description</h3>

<p>The sgo package aims to help with spatial or geographic analysis in Open
Source R and derivatives. Its main purpose is to perform OSGB36/ETRS89
transformations using the Ordnance Survey's OSTN15 transformation model for
Great Britain and the Isle of Man. It also transforms GPS ellipsoid heights
to orthometric (mean sea level) heights on the relevant Ordnance Survey
mapping datum, using the National Geoid Model OSGM15.
</p>


<h3>Details</h3>

<p>Most of the functions available in this package will become much less
accurate if used outside the coverage of OSTN, therefore it is advised to
apply these functions on coordinates within Great Britain, the Isle of Man
and any areas of sea less than a few miles off shore.
</p>
<p>This package assumes that the Coordinate Reference Systems (CRS) ETRS89 and
WGS84 are practically the same within the UK, but this shouldn't be a
problem for most civilian use of GPS satellites. If a high-precision
transformation between WGS84 and ETRS89 is required then it is recommended
to use a different package to do the conversion.
</p>


<h3>Object constructors</h3>


<ul>
<li><p><code><a href="#topic+sgo_points">sgo_points</a></code>: 2D/3D point coordinates
</p>
</li></ul>



<h3>Transformation and Conversion functions</h3>

<p>Functions to provide coordinate transformations:
</p>

<ul>
<li><p><code><a href="#topic+sgo_bng_lonlat">sgo_bng_lonlat</a></code>: British National Grid (E/N) to Lon/Lat
</p>
</li>
<li><p><code><a href="#topic+sgo_lonlat_bng">sgo_lonlat_bng</a></code>: Lon/Lat to British National Grid (E/N)
</p>
</li>
<li><p><code><a href="#topic+sgo_bng_ngr">sgo_bng_ngr</a></code>: British National Grid (E/N) to National Grid
References
</p>
</li>
<li><p><code><a href="#topic+sgo_ngr_bng">sgo_ngr_bng</a></code>: National Grid References to British National
Grid (E/N)
</p>
</li>
<li><p><code><a href="#topic+sgo_laea_etrs">sgo_laea_etrs</a></code>: ETRS89-LAEA Easting/Northing to ETRS89
</p>
</li>
<li><p><code><a href="#topic+sgo_etrs_laea">sgo_etrs_laea</a></code>: ETRS89 to ETRS89-LAEA Easting/Northing
</p>
</li>
<li><p><code><a href="#topic+sgo_cart_lonlat">sgo_cart_lonlat</a></code>: 3D Earth Centred Earth Fixed (ECEF)
Cartesian coordinates to polar coordinates
</p>
</li>
<li><p><code><a href="#topic+sgo_lonlat_cart">sgo_lonlat_cart</a></code>: Polar coordinates to 3D ECEF
Cartesian coordinates
</p>
</li>
<li><p><code><a href="#topic+sgo_wgs84_en">sgo_wgs84_en</a></code>: WGS84 Lon/Lat to Pseudo-Mercator (E/N)
</p>
</li>
<li><p><code><a href="#topic+sgo_en_wgs84">sgo_en_wgs84</a></code>: Pseudo-Mercator (E/N) to WGS84 Lon/Lat
</p>
</li>
<li><p><code><a href="#topic+sgo_transform">sgo_transform</a></code>: Wrapper for all the transformations above
</p>
</li>
<li><p><code><a href="#topic+sgo_coordinates">sgo_coordinates</a></code>: Extract coordinates from a
<code>sgo_points</code> object
</p>
</li></ul>



<h3>Geometric measurements</h3>


<ul>
<li><p><code><a href="#topic+sgo_area">sgo_area</a></code>: Calculate area from an ordered set of points
</p>
</li>
<li><p><code><a href="#topic+sgo_distance">sgo_distance</a></code>: Calculate distance(s) between points
</p>
</li></ul>



<h3>Disclaimer</h3>

<p>The OSTN15 transformation model is used in this package, and it is licensed
under the BSD Licence (http://opensource.org/licenses/bsd-license.php):<br />
<em>© Copyright and database rights Ordnance Survey Limited 2016, © Crown
copyright and database rights Land &amp; Property Services 2016 and/or ©
Ordnance Survey Ireland, 2016. All rights reserved.</em>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
