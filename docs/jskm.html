<!DOCTYPE html><html><head><title>Help for package jskm</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {jskm}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#jskm'><p>Creates a Kaplan-Meier plot for survfit object.</p></a></li>
<li><a href='#svyjskm'><p>Creates a Weighted Kaplan-Meier plot - svykm.object in survey package</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Kaplan-Meier Plot with 'ggplot2'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-01-24</td>
</tr>
<tr>
<td>Description:</td>
<td>The function 'jskm()' creates publication quality Kaplan-Meier plot with at risk tables below. 'svyjskm()' provides plot for weighted Kaplan-Meier estimator. </td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2, ggpubr, survival, survey, scales, patchwork</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jinseob2kim/jskm">https://github.com/jinseob2kim/jskm</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jinseob2kim/jstable/issues">https://github.com/jinseob2kim/jstable/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-26 05:51:07 UTC; js</td>
</tr>
<tr>
<td>Author:</td>
<td>Jinseob Kim <a href="https://orcid.org/0000-0002-9403-605X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  yoonkyoung Chun [aut],
  Zarathu [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jinseob Kim &lt;jinseob2kim@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-26 06:20:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='jskm'>Creates a Kaplan-Meier plot for survfit object.</h2><span id='topic+jskm'></span>

<h3>Description</h3>

<p>Creates a Kaplan-Meier plot with at risk tables below for survfit object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>jskm(
  sfit,
  table = FALSE,
  xlabs = "Time-to-event",
  ylabs = NULL,
  xlims = c(0, max(sfit$time)),
  ylims = c(0, 1),
  surv.scale = c("default", "percent"),
  ystratalabs = names(sfit$strata),
  ystrataname = "Strata",
  timeby = signif(max(sfit$time)/7, 1),
  main = "",
  pval = FALSE,
  pval.size = 5,
  pval.coord = c(NULL, NULL),
  pval.testname = F,
  marks = TRUE,
  shape = 3,
  legend = TRUE,
  legendposition = c(0.85, 0.8),
  ci = FALSE,
  subs = NULL,
  label.nrisk = "Numbers at risk",
  size.label.nrisk = 10,
  linecols = "Set1",
  dashed = FALSE,
  cumhaz = F,
  cluster.option = "None",
  cluster.var = NULL,
  data = NULL,
  cut.landmark = NULL,
  showpercent = F,
  status.cmprsk = NULL,
  linewidth = 0.75,
  theme = NULL,
  nejm.infigure.ratiow = 0.6,
  nejm.infigure.ratioh = 0.5,
  nejm.infigure.ylim = c(0, 1),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="jskm_+3A_sfit">sfit</code></td>
<td>
<p>a survfit object</p>
</td></tr>
<tr><td><code id="jskm_+3A_table">table</code></td>
<td>
<p>logical: Create a table graphic below the K-M plot, indicating at-risk numbers?</p>
</td></tr>
<tr><td><code id="jskm_+3A_xlabs">xlabs</code></td>
<td>
<p>x-axis label</p>
</td></tr>
<tr><td><code id="jskm_+3A_ylabs">ylabs</code></td>
<td>
<p>y-axis label</p>
</td></tr>
<tr><td><code id="jskm_+3A_xlims">xlims</code></td>
<td>
<p>numeric: list of min and max for x-axis. Default = c(0,max(sfit$time))</p>
</td></tr>
<tr><td><code id="jskm_+3A_ylims">ylims</code></td>
<td>
<p>numeric: list of min and max for y-axis. Default = c(0,1)</p>
</td></tr>
<tr><td><code id="jskm_+3A_surv.scale">surv.scale</code></td>
<td>
<p>scale transformation of survival curves. Allowed values are &quot;default&quot; or &quot;percent&quot;.</p>
</td></tr>
<tr><td><code id="jskm_+3A_ystratalabs">ystratalabs</code></td>
<td>
<p>character list. A list of names for each strata. Default = names(sfit$strata)</p>
</td></tr>
<tr><td><code id="jskm_+3A_ystrataname">ystrataname</code></td>
<td>
<p>The legend name. Default = &quot;Strata&quot;</p>
</td></tr>
<tr><td><code id="jskm_+3A_timeby">timeby</code></td>
<td>
<p>numeric: control the granularity along the time-axis; defaults to 7 time-points. Default = signif(max(sfit$time)/7, 1)</p>
</td></tr>
<tr><td><code id="jskm_+3A_main">main</code></td>
<td>
<p>plot title</p>
</td></tr>
<tr><td><code id="jskm_+3A_pval">pval</code></td>
<td>
<p>logical: add the pvalue to the plot?</p>
</td></tr>
<tr><td><code id="jskm_+3A_pval.size">pval.size</code></td>
<td>
<p>numeric value specifying the p-value text size. Default is 5.</p>
</td></tr>
<tr><td><code id="jskm_+3A_pval.coord">pval.coord</code></td>
<td>
<p>numeric vector, of length 2, specifying the x and y coordinates of the p-value. Default values are NULL</p>
</td></tr>
<tr><td><code id="jskm_+3A_pval.testname">pval.testname</code></td>
<td>
<p>logical: add '(Log-rank)' text to p-value. Default = F</p>
</td></tr>
<tr><td><code id="jskm_+3A_marks">marks</code></td>
<td>
<p>logical: should censoring marks be added?</p>
</td></tr>
<tr><td><code id="jskm_+3A_shape">shape</code></td>
<td>
<p>what shape should the censoring marks be, default is a vertical line</p>
</td></tr>
<tr><td><code id="jskm_+3A_legend">legend</code></td>
<td>
<p>logical. should a legend be added to the plot?</p>
</td></tr>
<tr><td><code id="jskm_+3A_legendposition">legendposition</code></td>
<td>
<p>numeric. x, y position of the legend if plotted. Default=c(0.85,0.8)</p>
</td></tr>
<tr><td><code id="jskm_+3A_ci">ci</code></td>
<td>
<p>logical. Should confidence intervals be plotted. Default = FALSE</p>
</td></tr>
<tr><td><code id="jskm_+3A_subs">subs</code></td>
<td>
<p>= NULL,</p>
</td></tr>
<tr><td><code id="jskm_+3A_label.nrisk">label.nrisk</code></td>
<td>
<p>Numbers at risk label. Default = &quot;Numbers at risk&quot;</p>
</td></tr>
<tr><td><code id="jskm_+3A_size.label.nrisk">size.label.nrisk</code></td>
<td>
<p>Font size of label.nrisk. Default = 10</p>
</td></tr>
<tr><td><code id="jskm_+3A_linecols">linecols</code></td>
<td>
<p>Character. Colour brewer pallettes too colour lines. Default =&quot;Set1&quot;, &quot;black&quot; for black with dashed line.</p>
</td></tr>
<tr><td><code id="jskm_+3A_dashed">dashed</code></td>
<td>
<p>logical. Should a variety of linetypes be used to identify lines. Default = FALSE</p>
</td></tr>
<tr><td><code id="jskm_+3A_cumhaz">cumhaz</code></td>
<td>
<p>Show cumulative incidence function, Default: F</p>
</td></tr>
<tr><td><code id="jskm_+3A_cluster.option">cluster.option</code></td>
<td>
<p>Cluster option for p value, Option: &quot;None&quot;, &quot;cluster&quot;, &quot;frailty&quot;, Default: &quot;None&quot;</p>
</td></tr>
<tr><td><code id="jskm_+3A_cluster.var">cluster.var</code></td>
<td>
<p>Cluster variable</p>
</td></tr>
<tr><td><code id="jskm_+3A_data">data</code></td>
<td>
<p>select specific data - for reactive input, Default = NULL</p>
</td></tr>
<tr><td><code id="jskm_+3A_cut.landmark">cut.landmark</code></td>
<td>
<p>cut-off for landmark analysis, Default = NULL</p>
</td></tr>
<tr><td><code id="jskm_+3A_showpercent">showpercent</code></td>
<td>
<p>Shows the percentages on the right side.</p>
</td></tr>
<tr><td><code id="jskm_+3A_status.cmprsk">status.cmprsk</code></td>
<td>
<p>Status value when competing risk analysis, Default = 2nd level of status variable</p>
</td></tr>
<tr><td><code id="jskm_+3A_linewidth">linewidth</code></td>
<td>
<p>Line witdh, Default = 0.75</p>
</td></tr>
<tr><td><code id="jskm_+3A_theme">theme</code></td>
<td>
<p>Theme of the plot, Default = NULL, &quot;nejm&quot; for NEJMOA style, &quot;jama&quot; for JAMA style</p>
</td></tr>
<tr><td><code id="jskm_+3A_nejm.infigure.ratiow">nejm.infigure.ratiow</code></td>
<td>
<p>Ratio of infigure width to total width, Default = 0.6</p>
</td></tr>
<tr><td><code id="jskm_+3A_nejm.infigure.ratioh">nejm.infigure.ratioh</code></td>
<td>
<p>Ratio of infigure height to total height, Default = 0.5</p>
</td></tr>
<tr><td><code id="jskm_+3A_nejm.infigure.ylim">nejm.infigure.ylim</code></td>
<td>
<p>y-axis limit of infigure, Default = c(0,1)</p>
</td></tr>
<tr><td><code id="jskm_+3A_...">...</code></td>
<td>
<p>PARAM_DESCRIPTION</p>
</td></tr>
</table>


<h3>Details</h3>

<p>DETAILS
</p>


<h3>Value</h3>

<p>Plot
</p>


<h3>Author(s)</h3>

<p>Jinseob Kim, but heavily modified version of a script created by Michael Way.
<a href="https://github.com/michaelway/ggkm/">https://github.com/michaelway/ggkm/</a>
I have packaged this function, added functions to namespace and included a range of new parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survival)
data(colon)
fit &lt;- survfit(Surv(time, status) ~ rx, data = colon)
jskm(fit, timeby = 500)
</code></pre>

<hr>
<h2 id='svyjskm'>Creates a Weighted Kaplan-Meier plot - svykm.object in survey package</h2><span id='topic+svyjskm'></span>

<h3>Description</h3>

<p>Creates a Weighted Kaplan-Meier plot - svykm.object in survey package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svyjskm(
  sfit,
  theme = NULL,
  xlabs = "Time-to-event",
  ylabs = "Survival probability",
  xlims = NULL,
  ylims = c(0, 1),
  ystratalabs = NULL,
  ystrataname = NULL,
  surv.scale = c("default", "percent"),
  timeby = NULL,
  main = "",
  pval = FALSE,
  pval.size = 5,
  pval.coord = c(NULL, NULL),
  pval.testname = F,
  legend = TRUE,
  legendposition = c(0.85, 0.8),
  ci = NULL,
  linecols = "Set1",
  dashed = FALSE,
  cumhaz = F,
  design = NULL,
  subs = NULL,
  table = F,
  label.nrisk = "Numbers at risk",
  size.label.nrisk = 10,
  cut.landmark = NULL,
  showpercent = F,
  linewidth = 0.75,
  nejm.infigure.ratiow = 0.6,
  nejm.infigure.ratioh = 0.5,
  nejm.infigure.ylim = c(0, 1),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svyjskm_+3A_sfit">sfit</code></td>
<td>
<p>a svykm object</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_theme">theme</code></td>
<td>
<p>Theme of the plot, Default = NULL, &quot;nejm&quot; for NEJMOA style, &quot;jama&quot; for JAMA style</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_xlabs">xlabs</code></td>
<td>
<p>x-axis label, Default: 'Time-to-event'</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_ylabs">ylabs</code></td>
<td>
<p>y-axis label.</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_xlims">xlims</code></td>
<td>
<p>numeric: list of min and max for x-axis. Default: NULL</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_ylims">ylims</code></td>
<td>
<p>numeric: list of min and max for y-axis. Default: c(0, 1)</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_ystratalabs">ystratalabs</code></td>
<td>
<p>character list. A list of names for each strata. Default: NULL</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_ystrataname">ystrataname</code></td>
<td>
<p>The legend name. Default: 'Strata'</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_surv.scale">surv.scale</code></td>
<td>
<p>scale transformation of survival curves. Allowed values are &quot;default&quot; or &quot;percent&quot;.</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_timeby">timeby</code></td>
<td>
<p>numeric: control the granularity along the time-axis; defaults to 7 time-points.</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_main">main</code></td>
<td>
<p>plot title, Default: &rdquo;</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_pval">pval</code></td>
<td>
<p>logical: add the pvalue to the plot?, Default: FALSE</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_pval.size">pval.size</code></td>
<td>
<p>numeric value specifying the p-value text size. Default is 5.</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_pval.coord">pval.coord</code></td>
<td>
<p>numeric vector, of length 2, specifying the x and y coordinates of the p-value. Default values are NULL</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_pval.testname">pval.testname</code></td>
<td>
<p>logical: add '(Log-rank)' text to p-value. Default = F</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_legend">legend</code></td>
<td>
<p>logical. should a legend be added to the plot? Default: TRUE</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_legendposition">legendposition</code></td>
<td>
<p>numeric. x, y position of the legend if plotted. Default: c(0.85, 0.8)</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_ci">ci</code></td>
<td>
<p>logical. Should confidence intervals be plotted. Default = NULL</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_linecols">linecols</code></td>
<td>
<p>Character. Colour brewer pallettes too colour lines. Default: 'Set1', &quot;black&quot; for black with dashed line.</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_dashed">dashed</code></td>
<td>
<p>logical. Should a variety of linetypes be used to identify lines. Default: FALSE</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_cumhaz">cumhaz</code></td>
<td>
<p>Show cumulaive incidence function, Default: F</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_design">design</code></td>
<td>
<p>Data design for reactive design data , Default: NULL</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_subs">subs</code></td>
<td>
<p>= NULL,</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_table">table</code></td>
<td>
<p>logical: Create a table graphic below the K-M plot, indicating at-risk numbers?</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_label.nrisk">label.nrisk</code></td>
<td>
<p>Numbers at risk label. Default = &quot;Numbers at risk&quot;</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_size.label.nrisk">size.label.nrisk</code></td>
<td>
<p>Font size of label.nrisk. Default = 10</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_cut.landmark">cut.landmark</code></td>
<td>
<p>cut-off for landmark analysis, Default = NULL</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_showpercent">showpercent</code></td>
<td>
<p>Shows the percentages on the right side.</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_linewidth">linewidth</code></td>
<td>
<p>Line witdh, Default = 0.75</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_nejm.infigure.ratiow">nejm.infigure.ratiow</code></td>
<td>
<p>Ratio of infigure width to total width, Default = 0.6</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_nejm.infigure.ratioh">nejm.infigure.ratioh</code></td>
<td>
<p>Ratio of infigure height to total height, Default = 0.5</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_nejm.infigure.ylim">nejm.infigure.ylim</code></td>
<td>
<p>y-axis limit of infigure, Default = c(0,1)</p>
</td></tr>
<tr><td><code id="svyjskm_+3A_...">...</code></td>
<td>
<p>PARAM_DESCRIPTION</p>
</td></tr>
</table>


<h3>Details</h3>

<p>DETAILS
</p>


<h3>Value</h3>

<p>plot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
data(pbc, package = "survival")
pbc$randomized &lt;- with(pbc, !is.na(trt) &amp; trt &gt; 0)
biasmodel &lt;- glm(randomized ~ age * edema, data = pbc)
pbc$randprob &lt;- fitted(biasmodel)
dpbc &lt;- svydesign(id = ~1, prob = ~randprob, strata = ~edema, data = subset(pbc, randomized))
s1 &lt;- svykm(Surv(time, status &gt; 0) ~ sex, design = dpbc)
svyjskm(s1)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
