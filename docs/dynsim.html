<!DOCTYPE html><html><head><title>Help for package dynsim</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {dynsim}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#dynsim'><p>Dynamic simulations of autoregressive relationships</p></a></li>
<li><a href='#dynsimGG'><p>Plot dynamic simulation results from <code>dynsim</code></p></a></li>
<li><a href='#grunfeld'><p>A data set from Grunfeld (1958)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Dynamic Simulations of Autoregressive Relationships</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-06-20</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://cran.r-project.org/package=dynsim">https://cran.r-project.org/package=dynsim</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/christophergandrud/dynsim/issues">https://github.com/christophergandrud/dynsim/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Dynamic simulations and graphical depictions of autoregressive
    relationships.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2 (&ge; 1.0.1.9003), grid, gridExtra (&ge; 2.0.0), MASS</td>
</tr>
<tr>
<td>Suggests:</td>
<td>DataCombine</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>BuildVignettes:</td>
<td>true</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-06-20 16:03:46 UTC; cgandrud</td>
</tr>
<tr>
<td>Author:</td>
<td>Christopher Gandrud [aut, cre],
  Laron K. Williams [aut],
  Guy D. Whitten [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Christopher Gandrud &lt;christopher.gandrud@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-06-20 16:10:01 UTC</td>
</tr>
</table>
<hr>
<h2 id='dynsim'>Dynamic simulations of autoregressive relationships</h2><span id='topic+dynsim'></span>

<h3>Description</h3>

<p><code>dynsim</code> dynamic simulations of autoregressive relationships
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dynsim(obj, ldv, scen, n = 10, sig = 0.95, num = 1000, shocks = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dynsim_+3A_obj">obj</code></td>
<td>
<p>the output object the estimation model.</p>
</td></tr>
<tr><td><code id="dynsim_+3A_ldv">ldv</code></td>
<td>
<p>character. Names the lagged dependent variable</p>
</td></tr>
<tr><td><code id="dynsim_+3A_scen">scen</code></td>
<td>
<p>data frame or list of data frames. Specifies the values of the
variables used to generate the predicted values when <code class="reqn">t = 0</code>. If only one
scenario is desired then <code>scen</code> should be a data frame. If more than one
scenario is desired then the <code class="reqn">t = 0</code> values should be in data frames
contained in a list.</p>
</td></tr>
<tr><td><code id="dynsim_+3A_n">n</code></td>
<td>
<p>numeric. Specifies the number of iterations (or time period) over
which the program will generate the predicted value of the dependent
variable. The default is 10.</p>
</td></tr>
<tr><td><code id="dynsim_+3A_sig">sig</code></td>
<td>
<p>numeric. Specifies the level of statistical significance of the
confidence intervals. Any value allowed be greater than 0 and cannot be
greater than 1.</p>
</td></tr>
<tr><td><code id="dynsim_+3A_num">num</code></td>
<td>
<p>numeric. Specifies the number of simulations to compute for each
value of <code>n</code>. The default is 1000.</p>
</td></tr>
<tr><td><code id="dynsim_+3A_shocks">shocks</code></td>
<td>
<p>data frame. Allows the user to choose independent variables,
their values, and times to introduce these values. The first column of the
data frame must be called <code>times</code> this will contain the times in
<code>n</code> to use the shock values. The following columns' names must match the
names of the variables whose values you wish to alter. You do not need to
specify values for variables that you want to remain the same as in
<code>scen</code>. In times <code>n</code> where shock values are not specified,
non-<code>ldv</code> variable values will revert to those in <code>scen</code>. If
<code>*</code> is used to create interactions, interaction terms will be fitted
appropriately.</p>
</td></tr>
<tr><td><code id="dynsim_+3A_...">...</code></td>
<td>
<p>arguments to pass to methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A post-estimation technique for producing dynamic simulations of
autoregressive models.
</p>


<h3>Value</h3>

<p>The command returns a <code>data.frame</code> and <code>dynsim</code> class
object. This can contain up to columns elements:
</p>

<ul>
<li><p><code>scenNumber</code>: The scenario number.
</p>
</li>
<li><p><code>time</code>: The time points.
</p>
</li>
<li><p><code>shock.</code>: Columns containing the values of the shock variables
at each point in <code>time</code>.
</p>
</li>
<li><p><code>ldvMean</code>: Mean of the simulation distribution.
</p>
</li>
<li><p><code>ldvLower</code>: Lower bound of the simulation distribution's
central interval set with <code>sig</code>.
</p>
</li>
<li><p><code>ldvUpper</code>: Upper bound of the simulation distribution's
central interval set with <code>sig</code>.
</p>
</li>
<li><p><code>ldvLower50</code>: Lower bound of the simulation distribution's
central 50 percent interval.
</p>
</li>
<li><p><code>ldvUpper50</code>: Upper bound of the simulation distribution's
central 50 percent interval.
</p>
</li></ul>

<p>The output object is a data frame class object. Do with it as you like.
</p>


<h3>References</h3>

<p>Williams, L. K., &amp; Whitten, G. D. (2011). Dynamic Simulations of
Autoregressive Relationships. The Stata Journal, 11(4), 577-588.
</p>
<p>Williams, L. K., &amp; Whitten, G. D. (2012). But Wait, There's More! Maximizing
Substantive Inferences from TSCS Models. Journal of Politics, 74(03),
685-693.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load package
library(DataCombine)

# Load Grunfeld data
data(grunfeld, package = "dynsim")

# Create lag invest variable
grunfeld &lt;- slide(grunfeld, Var = "invest", GroupVar = "company",
               NewVar = "InvestLag")

# Convert company to factor for fixed-effects specification
grunfeld$company &lt;- as.factor(grunfeld$company)

# Estimate basic model
M1 &lt;- lm(invest ~ InvestLag + mvalue + kstock + company, data = grunfeld)

# Estimate model with interaction between mvalue and kstock
M2 &lt;- lm(invest ~ InvestLag + mvalue*kstock + company, data = grunfeld)

# Set up scenarios for company 4
## List version ##
attach(grunfeld)
Scen1 &lt;- data.frame(InvestLag = mean(InvestLag, na.rm = TRUE),
                    mvalue = quantile(mvalue, 0.05),
                    kstock = quantile(kstock, 0.05),
                    company4 = 1)
Scen2 &lt;- data.frame(InvestLag = mean(InvestLag, na.rm = TRUE),
                    mvalue = mean(mvalue),
                    kstock = mean(kstock),
                    company4 = 1)
Scen3 &lt;- data.frame(InvestLag = mean(InvestLag, na.rm = TRUE),
                    mvalue = quantile(mvalue, 0.95),
                    kstock = quantile(kstock, 0.95),
                    company4 = 1)
detach(grunfeld)

## Not run: 
## Alternative data frame version of the scenario builder ##
attach(grunfeld)
ScenComb &lt;- data.frame(InvestLag = rep(mean(InvestLag, na.rm = TRUE), 3),
                      mvalue = c(quantile(mvalue, 0.95), mean(mvalue), 
                                 quantile(mvalue, 0.05)),
                      kstock = c(quantile(kstock, 0.95), mean(kstock),
                                 quantile(kstock, 0.05)),
                      company4 = rep(1, 3)
)
detach(grunfeld)

## End(Not run)

# Combine into a single list
ScenComb &lt;- list(Scen1, Scen2, Scen3)

## Run dynamic simulations without shocks and no interactions
Sim1 &lt;- dynsim(obj = M1, ldv = "InvestLag", scen = ScenComb, n = 20)

## Run dynamic simulations without shocks and interactions
Sim2 &lt;- dynsim(obj = M2, ldv = "InvestLag", scen = ScenComb, n = 20)

## Run dynamic simulations with shocks

# Create data frame of shock values
mShocks &lt;- data.frame(times = c(5, 10), kstock = c(100, 1000),
                      mvalue = c(58, 5000))

# Run simulations without interactions
Sim3 &lt;- dynsim(obj = M1, ldv = "InvestLag", scen = ScenComb, n = 20,
               shocks = mShocks)

# Run simulations with interactions
Sim4 &lt;- dynsim(obj = M2, ldv = "InvestLag", scen = ScenComb, n = 20,
               shocks = mShocks)

</code></pre>

<hr>
<h2 id='dynsimGG'>Plot dynamic simulation results from <code>dynsim</code></h2><span id='topic+dynsimGG'></span>

<h3>Description</h3>

<p><code>dynsimGG</code> uses ggplot2 to plot dynamic simulation results
created by <code><a href="#topic+dynsim">dynsim</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dynsimGG(
  obj,
  lsize = 1,
  color,
  alpha = 0.5,
  xlab = "\nTime",
  ylab = "Predicted Value\n",
  title = "",
  leg.name = "Scenario",
  leg.labels,
  legend = "legend",
  shockplot.var,
  shockplot.ylab,
  shockplot.heights = c(12, 4),
  shockplot.heights.units = c("cm", "cm")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dynsimGG_+3A_obj">obj</code></td>
<td>
<p>a <code>dynsim</code> class object.</p>
</td></tr>
<tr><td><code id="dynsimGG_+3A_lsize">lsize</code></td>
<td>
<p>size of the smoothing line. Default is 1. See
ggplot2.</p>
</td></tr>
<tr><td><code id="dynsimGG_+3A_color">color</code></td>
<td>
<p>character string. Specifies the color of the lines and ribbons.
If only one scenario is to be plotted then it can either be a single color
value using any color value allowed by ggplot2. The default is
the hexadecimal color <code>"#2B8CBE"</code>. If more than one scenario is to be
plotted then a color brewer palette is set. The default is<code>"Set1"</code>. See
<code><a href="ggplot2.html#topic+scale_colour_brewer">scale_colour_brewer</a></code>.</p>
</td></tr>
<tr><td><code id="dynsimGG_+3A_alpha">alpha</code></td>
<td>
<p>numeric. Alpha (e.g. transparency) for the ribbons. Default is
<code>alpha = 0.1</code>. See ggplot2.</p>
</td></tr>
<tr><td><code id="dynsimGG_+3A_xlab">xlab</code></td>
<td>
<p>a label for the plot's x-axis.</p>
</td></tr>
<tr><td><code id="dynsimGG_+3A_ylab">ylab</code></td>
<td>
<p>a label of the plot's y-axis.</p>
</td></tr>
<tr><td><code id="dynsimGG_+3A_title">title</code></td>
<td>
<p>the plot's main title.</p>
</td></tr>
<tr><td><code id="dynsimGG_+3A_leg.name">leg.name</code></td>
<td>
<p>name of the legend (if applicable).</p>
</td></tr>
<tr><td><code id="dynsimGG_+3A_leg.labels">leg.labels</code></td>
<td>
<p>character vector specifying the labels for each scenario in
the legend.</p>
</td></tr>
<tr><td><code id="dynsimGG_+3A_legend">legend</code></td>
<td>
<p>specifies what type of legend to include (if applicable). The
default is <code>legend = "legend"</code>. To hide the legend use
<code>legend = FALSE</code>. See <code><a href="ggplot2.html#topic+discrete_scale">discrete_scale</a></code> for more details.</p>
</td></tr>
<tr><td><code id="dynsimGG_+3A_shockplot.var">shockplot.var</code></td>
<td>
<p>character string naming the one shock variable to plot
fitted values of over time specified underneath the main plot.</p>
</td></tr>
<tr><td><code id="dynsimGG_+3A_shockplot.ylab">shockplot.ylab</code></td>
<td>
<p>character string for the shockplot's y-axis label.</p>
</td></tr>
<tr><td><code id="dynsimGG_+3A_shockplot.heights">shockplot.heights</code></td>
<td>
<p>numeric vector with of length 2 with units of
the main and shockplot height plots.</p>
</td></tr>
<tr><td><code id="dynsimGG_+3A_shockplot.heights.units">shockplot.heights.units</code></td>
<td>
<p>a character vector of length 2 with the
unit types for the values in <code>shockplot.heights</code>.
See <code><a href="grid.html#topic+unit">unit</a></code> for details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plots dynamic simulations of autoregressive relationships from
<code><a href="#topic+dynsim">dynsim</a></code>. The central line is the mean of the simulation
distributions. The outer ribbon is the furthest extent of the simulation
distributions' central intervals found in <code><a href="#topic+dynsim">dynsim</a></code> with the
<code>sig</code> argument. The middle ribbons plot the limits of the simulation
distributions' central 50
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load package
library(DataCombine)

# Load Grunfeld data
data(grunfeld, package = "dynsim")

# Create lag invest variable
grunfeld &lt;- slide(grunfeld, Var = "invest", GroupVar = "company",
               NewVar = "InvestLag")

# Convert company to factor for fixed-effects specification
grunfeld$company &lt;- as.factor(grunfeld$company)

# Estimate basic model
M1 &lt;- lm(invest ~ InvestLag + mvalue + kstock + company, data = grunfeld)

# Set up scenarios for company 4
attach(grunfeld)
Scen1 &lt;- data.frame(InvestLag = mean(InvestLag, na.rm = TRUE),
                    mvalue = quantile(mvalue, 0.05),
                    kstock = quantile(kstock, 0.05),
                    company4 = 1)
Scen2 &lt;- data.frame(InvestLag = mean(InvestLag, na.rm = TRUE),
                    mvalue = mean(mvalue),
                    kstock = mean(kstock),
                    company4 = 1)
Scen3 &lt;- data.frame(InvestLag = mean(InvestLag, na.rm = TRUE),
                    mvalue = quantile(mvalue, 0.95),
                    kstock = quantile(kstock, 0.95),
                    company4 = 1)
detach(grunfeld)

# Combine into a single list
ScenComb &lt;- list(Scen1, Scen2, Scen3)

## Run dynamic simulations without shocks
Sim1 &lt;- dynsim(obj = M1, ldv = "InvestLag", scen = ScenComb, n = 20)

# Create plot legend label
Labels &lt;- c("5th Percentile", "Mean", "95th Percentile")

# Plot
dynsimGG(Sim1, leg.labels = Labels)

## Run dynamic simulations with shocks

# Create data frame of shock values
mShocks &lt;- data.frame(times = c(5, 10), kstock = c(100, 1000))

# Run simulations
Sim2 &lt;- dynsim(obj = M1, ldv = "InvestLag", scen = ScenComb, n = 20,
               shocks = mShocks)

# Plot
dynsimGG(Sim2, leg.labels = Labels)

# Plot with accompanying shock plot
dynsimGG(Sim2, leg.labels = Labels, shockplot.var = "kstock")

</code></pre>

<hr>
<h2 id='grunfeld'>A data set from Grunfeld (1958)</h2><span id='topic+grunfeld'></span>

<h3>Description</h3>

<p>A data set from Grunfeld (1958)
</p>


<h3>Format</h3>

<p>A data set with 200 observations and 6 variables
</p>


<h3>Source</h3>

<p>Grunfeld, Yehuda. 1958. The Determinants of Corporate Investment.
PhD thesis. University of Chicago.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
