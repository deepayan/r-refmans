<!DOCTYPE html><html lang="en"><head><title>Help for package RcppCCTZ</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {RcppCCTZ}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#RcppCCTZ-package'>
<p>A Simple Wrapper to the CCTZ Library for Time Zone Calculations</p></a></li>
<li><a href='#formatDatetime'><p>Format a Datetime vector as a string vector</p></a></li>
<li><a href='#parseDatetime'><p>Parse a Datetime vector from a string vector</p></a></li>
<li><a href='#toTz'><p>Shift datetime object from one timezone to another</p></a></li>
<li><a href='#tzDiff'><p>Return difference between two time zones at a given date.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>'Rcpp' Bindings for the 'CCTZ' Library</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.13</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-12-11</td>
</tr>
<tr>
<td>Description:</td>
<td>'Rcpp' Access to the 'CCTZ' timezone library is provided. 'CCTZ' is
 a C++ library for translating between absolute and civil times using the rules
 of a time zone. The 'CCTZ' source code, released under the Apache 2.0 License,
 is included in this package. See <a href="https://github.com/google/cctz">https://github.com/google/cctz</a> for more
 details.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.11.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>tinytest</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>A 64-bit POSIX OS such as Linux or OS X with IANA
time zone data in /usr/share/zoneinfo as well as a
recent-enough C++11 compiler (such as g++-4.9 or later which is
preferred, g++-4.8 works too). On Windows the zoneinfo included
with R is used; and time parsing support is enabled via a
backport of std::get_time from the LLVM libc++ library.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/eddelbuettel/rcppcctz">https://github.com/eddelbuettel/rcppcctz</a>,
<a href="https://dirk.eddelbuettel.com/code/rcpp.cctz.html">https://dirk.eddelbuettel.com/code/rcpp.cctz.html</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/eddelbuettel/rcppcctz/issues">https://github.com/eddelbuettel/rcppcctz/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-12-12 01:32:20 UTC; edd</td>
</tr>
<tr>
<td>Author:</td>
<td>Dirk Eddelbuettel <a href="https://orcid.org/0000-0001-6419-907X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Bradley White [aut] (Principal author of CCTZ)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Dirk Eddelbuettel &lt;edd@debian.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-12-12 04:40:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='RcppCCTZ-package'>
A Simple Wrapper to the CCTZ Library for Time Zone Calculations
</h2><span id='topic+RcppCCTZ-package'></span><span id='topic+RcppCCTZ'></span><span id='topic+example0'></span><span id='topic+example1'></span><span id='topic+example2'></span><span id='topic+example3'></span><span id='topic+example4'></span><span id='topic+helloMoon'></span><span id='topic+exampleFormat'></span>

<h3>Description</h3>

<p>CCTZ contains two underlying libraries which build on the C++11
library <code>chrono</code>.  The first covers <em>civil time</em> for
computing with human-scale time such as dates and time. It is
header-only. The second covers time zones and allow translation
between absolute time and civil time.
</p>
<p>RcppCCTZ brings CCTZ to R by means of Rcpp.
</p>


<h3>Details</h3>

<p>CCTZ requires a valid timezone library as well as recent-enough
compiler to cope with C++11.
</p>
<p>Windows is supported since version 0.2.0 via the <code>g++-4.9</code>
compiler, but note that it provides an <em>incomplete</em> C++11
library. The <code>std::get_time</code> function was ported from libc++ of
the LLVM to enable this. However, string formatting is more limited as
the libc++ library used by <code>g++-4.9</code> does not provide complete
C++11 semantics. As one example, CCTZ frequently uses <code>"%F %T"</code>
which do not work on Windows; one has to use
<code>"%Y-%m-%d %H:%M:%S"</code>.
</p>


<h3>Author(s)</h3>

<p>Dirk Eddelbuettel wrote the package; Dan Dillon ported <code>std::get_time</code>
from LLVM's libc++; Bradley White and Greg Miller wrote the underlying CCTZ library.
</p>
<p>Maintainer: Dirk Eddelbuettel &lt;edd@debian.org&gt;
</p>


<h3>References</h3>

<p>The CCZT repository at <a href="https://github.com/google/cctz">https://github.com/google/cctz</a> has additional information.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  helloMoon()
</code></pre>

<hr>
<h2 id='formatDatetime'>Format a Datetime vector as a string vector</h2><span id='topic+formatDatetime'></span><span id='topic+formatDouble'></span>

<h3>Description</h3>

<p>Format a Datetime vector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>formatDatetime(dtv, fmt = "%Y-%m-%dT%H:%M:%E*S%Ez", lcltzstr = "UTC",
  tgttzstr = "UTC")

formatDouble(secv, nanov, fmt = "%Y-%m-%dT%H:%M:%E*S%Ez",
  tgttzstr = "UTC")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="formatDatetime_+3A_dtv">dtv</code></td>
<td>
<p>A Datetime vector object to be formatted</p>
</td></tr>
<tr><td><code id="formatDatetime_+3A_fmt">fmt</code></td>
<td>
<p>A string with the format, which is based on <code>strftime</code> with some
extensions; see the CCTZ documentation for details.</p>
</td></tr>
<tr><td><code id="formatDatetime_+3A_lcltzstr">lcltzstr</code></td>
<td>
<p>The local timezone object for creation the CCTZ timepoint</p>
</td></tr>
<tr><td><code id="formatDatetime_+3A_tgttzstr">tgttzstr</code></td>
<td>
<p>The target timezone for the desired format</p>
</td></tr>
<tr><td><code id="formatDatetime_+3A_secv">secv</code></td>
<td>
<p>A numeric vector with seconds since the epoch</p>
</td></tr>
<tr><td><code id="formatDatetime_+3A_nanov">nanov</code></td>
<td>
<p>A numeric vector with nanoseconds since the epoch,
complementing <code>secv</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An alternative to <code>format.POSIXct</code> based on the CCTZ library. The
<code>formatDouble</code> variant uses two vectors for seconds since the epoch 
and fractional nanoseconds, respectively, to provide fuller resolution.
</p>


<h3>Value</h3>

<p>A string vector with the requested format of the datetime objects
</p>


<h3>Note</h3>

<p>Windows is now supported via the <code>g++-4.9</code> compiler, but note
that it provides an <em>incomplete</em> C++11 library. This means we had
to port a time parsing routine, and that string formatting is more
limited. As one example, CCTZ frequently uses <code>"%F %T"</code> which do
not work on Windows; one has to use <code>"%Y-%m-%d %H:%M:%S"</code>.
</p>


<h3>Author(s)</h3>

<p>Dirk Eddelbuettel
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
now &lt;- Sys.time()
formatDatetime(now)            # current (UTC) time, in full precision RFC3339
formatDatetime(now, tgttzstr="America/New_York")  # same but in NY
formatDatetime(now + 0:4)	   # vectorised

## End(Not run)
</code></pre>

<hr>
<h2 id='parseDatetime'>Parse a Datetime vector from a string vector</h2><span id='topic+parseDatetime'></span><span id='topic+parseDouble'></span>

<h3>Description</h3>

<p>Parse a Datetime vector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parseDatetime(svec, fmt = "%Y-%m-%dT%H:%M:%E*S%Ez", tzstr = "UTC")

parseDouble(svec, fmt = "%Y-%m-%dT%H:%M:%E*S%Ez", tzstr = "UTC")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="parseDatetime_+3A_svec">svec</code></td>
<td>
<p>A string vector from which a Datetime vector is to be parsed</p>
</td></tr>
<tr><td><code id="parseDatetime_+3A_fmt">fmt</code></td>
<td>
<p>A string with the format, which is based on <code>strftime</code> with some
extensions; see the CCTZ documentation for details.</p>
</td></tr>
<tr><td><code id="parseDatetime_+3A_tzstr">tzstr</code></td>
<td>
<p>The local timezone for the desired format</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An alternative to <code>as.POSIXct</code> based on the CCTZ library
</p>


<h3>Value</h3>

<p>A Datetime vector object for <code>parseDatetime</code>, a numeric matrix with
two columns for seconds and nanoseconds for <code>parseDouble</code>
</p>


<h3>Author(s)</h3>

<p>Dirk Eddelbuettel
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ds &lt;- getOption("digits.secs")
options(digits.secs=6) # max value
parseDatetime("2016-12-07 10:11:12",        "%Y-%m-%d %H:%M:%S")   # full seconds
parseDatetime("2016-12-07 10:11:12.123456", "%Y-%m-%d %H:%M:%E*S") # fractional seconds
parseDatetime("2016-12-07T10:11:12.123456-00:00")  ## default RFC3339 format
parseDatetime("20161207 101112.123456",     "%E4Y%m%d %H%M%E*S")   # fractional seconds
now &lt;- trunc(Sys.time())
parseDatetime(formatDatetime(now + 0:4))	   			# vectorised
options(digits.secs=ds)
</code></pre>

<hr>
<h2 id='toTz'>Shift datetime object from one timezone to another</h2><span id='topic+toTz'></span>

<h3>Description</h3>

<p>Change from one given timezone to another.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>toTz(dtv, tzfrom, tzto, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="toTz_+3A_dtv">dtv</code></td>
<td>
<p>A DatetimeVector object specifying when the difference is to be computed.</p>
</td></tr>
<tr><td><code id="toTz_+3A_tzfrom">tzfrom</code></td>
<td>
<p>The first time zone as a character vector.</p>
</td></tr>
<tr><td><code id="toTz_+3A_tzto">tzto</code></td>
<td>
<p>The second time zone as a character vector.</p>
</td></tr>
<tr><td><code id="toTz_+3A_verbose">verbose</code></td>
<td>
<p>A boolean toggle indicating whether more verbose operations
are desired, default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Time zone offsets vary by date, and this helper function converts
a Datetime object from one given timezone to another.
</p>


<h3>Value</h3>

<p>A DatetimeVector object with the given (civil time) determined by the
incoming object (and its timezone) shifted to the target timezone.
</p>


<h3>Author(s)</h3>

<p>Dirk Eddelbuettel
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
toTz(Sys.time(), "America/New_York", "Europe/London")
# this redoes the 'Armstrong on the moon in NYC and Sydney' example
toTz(ISOdatetime(1969,7,20,22,56,0,tz="UTC"), "America/New_York", "Australia/Sydney", verbose=TRUE)
# we can also explicitly format for Sydney time 
format(toTz(ISOdatetime(1969,7,20,22,56,0,tz="UTC"), 
            "America/New_York", "Australia/Sydney", verbose=TRUE), 
       tz="Australia/Sydney")

## End(Not run)
</code></pre>

<hr>
<h2 id='tzDiff'>Return difference between two time zones at a given date.</h2><span id='topic+tzDiff'></span>

<h3>Description</h3>

<p>Difference between two given timezones at a specified date.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tzDiff(tzfrom, tzto, dt, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tzDiff_+3A_tzfrom">tzfrom</code></td>
<td>
<p>The first time zone as a character vector.</p>
</td></tr>
<tr><td><code id="tzDiff_+3A_tzto">tzto</code></td>
<td>
<p>The second time zone as a character vector.</p>
</td></tr>
<tr><td><code id="tzDiff_+3A_dt">dt</code></td>
<td>
<p>A Datetime object specifying when the difference is to be computed.</p>
</td></tr>
<tr><td><code id="tzDiff_+3A_verbose">verbose</code></td>
<td>
<p>A boolean toggle indicating whether more verbose operations
are desired, default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Time zone offsets vary by date, and this helper function computes
the difference (in hours) between two time zones for a given date time.
</p>


<h3>Value</h3>

<p>A numeric value with the difference (in hours) between the first and
second time zone at the given date
</p>


<h3>Author(s)</h3>

<p>Dirk Eddelbuettel
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# simple call: difference now
tzDiff("America/New_York", "Europe/London", Sys.time())
# tabulate difference for every week of the year
table(sapply(0:52, function(d) tzDiff("America/New_York", "Europe/London",
                                      as.POSIXct(as.Date("2016-01-01") + d*7))))

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
