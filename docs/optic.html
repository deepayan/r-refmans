<!DOCTYPE html><html><head><title>Help for package optic</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {optic}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#calculate_exposure'><p>Calculates the exposure rate applied to each year provided month</p>
of policy implementation and number of years to full implementation</a></li>
<li><a href='#dispatch_simulations'><p>Execute simulations defined in a optic_simulation object</p></a></li>
<li><a href='#exposure_list'><p>Applies a time-varying treatment effect</p></a></li>
<li><a href='#model_terms'><p>Parse a formula object into its left-hand-side and right-hand-side components</p></a></li>
<li><a href='#optic_model'><p>Optic Model</p></a></li>
<li><a href='#optic_simulation'><p>Create a configuration object used to run simulations</p></a></li>
<li><a href='#overdoses'><p>OPTIC Overdoses example data.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Simulation Tool for Causal Inference Using Longitudinal Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Implements a simulation study to assess the strengths and
    weaknesses of causal inference methods for estimating policy effects
    using panel data. See Griffin et al. (2021)
    &lt;<a href="https://doi.org/10.1007%2Fs10742-022-00284-w">doi:10.1007/s10742-022-00284-w</a>&gt; and Griffin et al. (2022)
    &lt;<a href="https://doi.org/10.1186%2Fs12874-021-01471-y">doi:10.1186/s12874-021-01471-y</a>&gt; for a description of our methods.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://randcorporation.github.io/optic/">https://randcorporation.github.io/optic/</a>,
<a href="https://github.com/randcorporation/optic">https://github.com/randcorporation/optic</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/randcorporation/optic/issues">https://github.com/randcorporation/optic/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>did, dplyr, future.apply, lmtest, magrittr, MASS, methods,
purrr, R6, rlang, sandwich, stats, tidyr, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-08 13:06:43 UTC; plima</td>
</tr>
<tr>
<td>Author:</td>
<td>Beth Ann Griffin <a href="https://orcid.org/0000-0002-2391-4601"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cph],
  Pedro Nascimento de Lima
    <a href="https://orcid.org/0000-0001-9057-198X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [cre, aut],
  Max Griswold <a href="https://orcid.org/0000-0002-6387-128X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Adam Scherling [aut],
  Joseph Pane [aut],
  Geoffrey Grimm [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Pedro Nascimento de Lima &lt;plima@rand.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-08 13:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='calculate_exposure'>Calculates the exposure rate applied to each year provided month
of policy implementation and number of years to full implementation</h2><span id='topic+calculate_exposure'></span>

<h3>Description</h3>

<p>Calculates the exposure rate applied to each year provided month
of policy implementation and number of years to full implementation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_exposure(month, n_years, monthly_effect = (1/n_years)/12)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculate_exposure_+3A_month">month</code></td>
<td>
<p>month of year (as integer) that policy takes effect</p>
</td></tr>
<tr><td><code id="calculate_exposure_+3A_n_years">n_years</code></td>
<td>
<p>number of months until full implementation in effect</p>
</td></tr>
<tr><td><code id="calculate_exposure_+3A_monthly_effect">monthly_effect</code></td>
<td>
<p>increment of exposure to apply each month; default is
((1/n_years) / 12) (constant over the period)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of percentages, indicating change in exposure by year (relative to start month)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Calculate uniform increase in policy effect which ramps up across 10 years

# Assume policy starts in July of the first year, then continues for 10 years
starting_month &lt;- 7
implementation_years &lt;- 10

# Assume some policy effect (which is the target effect for simulations)
policy_effect &lt;- 2

exposure_by_year &lt;- calculate_exposure(starting_month, implementation_years)

# Based on exposure by year, calculate policy effect by year:
plot(policy_effect*exposure_by_year)

</code></pre>

<hr>
<h2 id='dispatch_simulations'>Execute simulations defined in a optic_simulation object</h2><span id='topic+dispatch_simulations'></span>

<h3>Description</h3>

<p>Execute simulations defined in a optic_simulation object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dispatch_simulations(object, seed = NULL, use_future = FALSE, verbose = 0, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dispatch_simulations_+3A_object">object</code></td>
<td>
<p>Simulation scenarios object created using optic_simulation</p>
</td></tr>
<tr><td><code id="dispatch_simulations_+3A_seed">seed</code></td>
<td>
<p>Specified as either NULL or a numeric. Sets a seed, which is becomes an index in results, for
each independent set of simulations in optic_simulation.</p>
</td></tr>
<tr><td><code id="dispatch_simulations_+3A_use_future">use_future</code></td>
<td>
<p>Runs simulation scenarios in parallel. Default FALSE, set to TRUE if you have already setup a future
plan (e.g., multiprocess, cluster, etc) and would like for the iterations to
be run in parallel.</p>
</td></tr>
<tr><td><code id="dispatch_simulations_+3A_verbose">verbose</code></td>
<td>
<p>Default TRUE. IF TRUE, provides details on what's currently running.</p>
</td></tr>
<tr><td><code id="dispatch_simulations_+3A_...">...</code></td>
<td>
<p>additional parameters to be passed to future_apply. User can pass future.globals and future.packages if your code relies on additional packages</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of dataframes, where each list entry contains results for a set of simulation parameters, with dataframes containing estimated treatment effects and summary statistics by model and  draw.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Set up a basic model and simulation scenario:
data(overdoses)

eff &lt;- 0.1*mean(overdoses$crude.rate, na.rm = TRUE)
form &lt;- formula(crude.rate ~ state + year + population + treatment_level)
mod &lt;- optic_model(name = 'lin', 
                   type = 'reg', 
                   call = 'lm', 
                   formula = form, 
                   se_adjust = 'none')

sim &lt;- optic_simulation(x = overdoses, 
                        models = list(mod), 
                        method = 'no_confounding', 
                        unit_var = 'state', 
                        treat_var = 'state',
                        time_var = 'year', 
                        effect_magnitude = list(eff), 
                        n_units = 2, 
                        effect_direction = 'pos', 
                        iters = 2,
                        policy_speed = 'instant', 
                        n_implementation_periods = 1)

# Finally, dispatch the simulation:
dispatch_simulations(sim)
</code></pre>

<hr>
<h2 id='exposure_list'>Applies a time-varying treatment effect</h2><span id='topic+exposure_list'></span>

<h3>Description</h3>

<p>Simulates a time-varying treatment effect that starts at zero in time period zero, then linearly increases to a 'full treatment' effect, based on
analyst-provided choices concerning time until full treatment effect and 'speed'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exposure_list(
  sampled_time_period,
  mo,
  available_periods,
  policy_speed,
  n_implementation_periods
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exposure_list_+3A_sampled_time_period">sampled_time_period</code></td>
<td>
<p>Year that treatment is first enacted</p>
</td></tr>
<tr><td><code id="exposure_list_+3A_mo">mo</code></td>
<td>
<p>Month that treatment is first enacted</p>
</td></tr>
<tr><td><code id="exposure_list_+3A_available_periods">available_periods</code></td>
<td>
<p>Maximum number of time periods in the data (e.g. if policy is between 1950-2000, then available_periods == 50)</p>
</td></tr>
<tr><td><code id="exposure_list_+3A_policy_speed">policy_speed</code></td>
<td>
<p>A string which is either &quot;instant&quot; for the policy going into immediate effect or &quot;slow&quot;
for the policy effect phasing in linearly across n_implement_periods</p>
</td></tr>
<tr><td><code id="exposure_list_+3A_n_implementation_periods">n_implementation_periods</code></td>
<td>
<p>Number of periods until full treatment effect is applied. Only used if policy_speed is 'slow'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list, containing a vector of policy years of implementation, an integer of the starting policy implementation month,
and the effect of treatment within a given implementation year (as a fraction of the total policy effect)
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Set up a policy that starts in first-year of data, in July and takes 
# 2 years for full implementation:
exposure_list(1, 7, 3, policy_speed = 'slow', n_implementation_periods = 2)

# Same scenario but effect happens instantaneously:
exposure_list(1, 7, 3, policy_speed = 'instant')
</code></pre>

<hr>
<h2 id='model_terms'>Parse a formula object into its left-hand-side and right-hand-side components</h2><span id='topic+model_terms'></span>

<h3>Description</h3>

<p>Parse a formula object into its left-hand-side and right-hand-side components
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model_terms(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="model_terms_+3A_x">x</code></td>
<td>
<p>Formula to parse</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list with named elements &quot;lhs&quot; and &quot;rhs&quot;, containing variables on each respective side of the equation
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Set up a hypothetical function, then decompose into left-hand and 
# right-hand sides
form &lt;- formula(outcome ~ treatment + confounder + unit + time)
model_terms(form)
</code></pre>

<hr>
<h2 id='optic_model'>Optic Model</h2><span id='topic+optic_model'></span>

<h3>Description</h3>

<p>Generates model object to apply to each simulated dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>optic_model(name, type, call, formula, se_adjust, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="optic_model_+3A_name">name</code></td>
<td>
<p>Name of the model object, used to identify the model when reviewing simulation results</p>
</td></tr>
<tr><td><code id="optic_model_+3A_type">type</code></td>
<td>
<p>Estimator used to identify the treatment effect using simulated data. Specified as a string, which can either be 'reg' (regression), 'autoreg' (autoregression, which adds a lag for the outcome variable to a regression model), 'drdid' (doubly-robust difference-in-difference estimator), or 'multisynth' (augmented synthetic control)</p>
</td></tr>
<tr><td><code id="optic_model_+3A_call">call</code></td>
<td>
<p>String which specifies the R function to call for applying the estimator. Package currently supports  either 'lm' (linear model), 'feols' (fixed-effect OLS), 'multisynth' (pooled synthetic controls), or 'glm.nb' (negative-binomial generalized nearlized linear model)</p>
</td></tr>
<tr><td><code id="optic_model_+3A_formula">formula</code></td>
<td>
<p>Model specification, using R formula formatting. Must include a variable labeled 'treatment' for the 'nonconf' &amp; 'selbias' simulation method or variables labeled 'treatment1' &amp; 'treatment2' for the simulation method 'concurrent'</p>
</td></tr>
<tr><td><code id="optic_model_+3A_se_adjust">se_adjust</code></td>
<td>
<p>Adjustments applied to standard errors following model estimation. Specified as a string, OPTIC currently support 'none' for no adjustment or 'cluster' for clustered standard errors. Clustered standard errors will use the 'unit_var' specified in optic_simulation for determining unit used for clustering standard errors.</p>
</td></tr>
<tr><td><code id="optic_model_+3A_...">...</code></td>
<td>
<p>Additional arguments that are passed to the model call. Please refer to documentation for each model call for additional details. If the model call expects a name, you may need to pass your parameter using param = as.name(&quot;variable_name&quot;) as opposed to param = variable_name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>optic_model An optic_model object to be used as an input within optic_simulations. Details model calls and parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Set up a simple linear model
form &lt;- formula(crude.rate ~ state + year + population + treatment_level)
mod &lt;- optic_model(name = 'lin', 
                   type = 'reg', 
                   call = 'lm', 
                   formula = form, 
                   se_adjust = 'none')

# Deploy an auto-regressive model.
# type = "autoreg" will make AR term 
# automatically when the model is deployed; also note
# in formula the use of "treatment_change" as the treatment variable 
# rather than "treatment_level" like in the previous example:

form_ar &lt;- formula(crude.rate ~ state + year + population + treatment_change)
mod_ar &lt;- optic_model(name = "auto_regressive_linear", 
                      type = "autoreg", 
                      call = "lm", 
                      formula = form_ar,
                      se_adjust = "none")

# One could also use a different call, assuming the right packages 
# are installed and the model uses a familiar formula framework. 
# Example with random intercept for states, using lme4 package.

form_me &lt;- formula(crude.rate ~ 
                   population + year + treatment_level + (1|state))
                   
mod_me &lt;- optic_model(name = "mixed_effect", 
                      type = "reg", 
                      call = "lmer", 
                      formula = form_me, 
                      se_adjust = "none")

</code></pre>

<hr>
<h2 id='optic_simulation'>Create a configuration object used to run simulations</h2><span id='topic+optic_simulation'></span>

<h3>Description</h3>

<p>Performs validation on inputs and produces a configuration object
that contains all required parameters to dispatch simulation runs for the empirical data
provided.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>optic_simulation(
  x,
  models,
  iters,
  unit_var,
  time_var,
  conf_var,
  effect_magnitude,
  n_units,
  effect_direction,
  policy_speed,
  prior_control = "level",
  bias_size = NULL,
  bias_type = NULL,
  treat_var = NULL,
  n_implementation_periods,
  rhos = NULL,
  years_apart = NULL,
  ordered = NULL,
  method,
  method_sample,
  method_model,
  method_results,
  method_pre_model,
  method_post_model,
  globals = NULL,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="optic_simulation_+3A_x">x</code></td>
<td>
<p>Empirical data used to simulate synthetic datasets with specified treatment effect.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_models">models</code></td>
<td>
<p>List of 'optic_model' objects that should be run for each iteration and simulation scenario.
The elements must be created using the 'optic_model' function.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_iters">iters</code></td>
<td>
<p>A numeric, specifying number of iterations for each simulation scenario.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_unit_var">unit_var</code></td>
<td>
<p>A string variable, used to determine clusters for clustered standard errors.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_time_var">time_var</code></td>
<td>
<p>A string variable, specifying time units (e.g. &quot;year&quot;, &quot;time to treat&quot;, etc). Must be specified in terms of years (fractional years are accepted).</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_conf_var">conf_var</code></td>
<td>
<p>An unobserved confounding variable. Only used for the 'confound-method'.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_effect_magnitude">effect_magnitude</code></td>
<td>
<p>A vector of numerics, specifying 'true' effect sizes for treatment scenarios. See vignette for more details. Synthetic datasets will be generated for each entry in the vector.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_n_units">n_units</code></td>
<td>
<p>A numeric, determining number of units to simulate treatment effects. Synthetic datasets will be generated for each entry in the vector.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_effect_direction">effect_direction</code></td>
<td>
<p>A vector containing either 'neg', 'null', or 'pos'. Determines the direction of the simulated effect. Synthetic datasets will be generated for each entry in the vector.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_policy_speed">policy_speed</code></td>
<td>
<p>A vector of strings, containing either 'instant' or 'slow' entries, determining how quickly treated units obtain the simulated effect. Synthetic datasets will be generated for each entry in the vector. Can either be 'instant&quot; (so treatment effect applies fully in the first treated time period) or 'slow' (treatment effect ramps up linearly to the desired effect size, based on 'n_implementation_periods'.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_prior_control">prior_control</code></td>
<td>
<p>Only used for confounding method. Adds an additional set of variables which control for the outcome in previous periods (either a moving average of previous time periods or an autoregressive term)</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_bias_size">bias_size</code></td>
<td>
<p>A string, either &quot;small&quot; &quot;medium&quot; or &quot;large&quot;. Specifies relative size of bias for 'confounding' method.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_bias_type">bias_type</code></td>
<td>
<p>A string, either linear&quot; or &quot;nonlinear&quot;. Specifies type of bias for 'confounding' method</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_treat_var">treat_var</code></td>
<td>
<p>A string variable, referring to the unit-of-analysis for treatment (which may not be the same as the unit var argument, e.g. treated classrooms within clustered schools)</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_n_implementation_periods">n_implementation_periods</code></td>
<td>
<p>A vector of numerics, determining number of periods after implementation until treated units reach the desired simulated treatment effect. Synthetic datasets will be generated for each entry in the vector.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_rhos">rhos</code></td>
<td>
<p>A vector of values between 0-1, indicating the correlation between the primary policy and a concurrent policy. Only applies when 'method' == 'concurrent'. Synthetic datasets will be generated for each entry in the vector.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_years_apart">years_apart</code></td>
<td>
<p>A numeric, for number of years between the primary policy being implemented and the concurrent policy. Only applies when 'method' == 'concurrent'.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_ordered">ordered</code></td>
<td>
<p>A boolean, determines if the primary policy always occurs before the concurrent policy ('TRUE') or if the policies are randomly ordered ('FALSE').</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_method">method</code></td>
<td>
<p>A string, determing the simulation method. Can be either 'no_confounding', 'confounding' or 'concurrent'</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_method_sample">method_sample</code></td>
<td>
<p>Underlying function for the sampling method to determine treatment status. Provided here for convenience so that the user does not need to modify the actual underlying function's script.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_method_model">method_model</code></td>
<td>
<p>Another convenience function, which can be modified to control the model call.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_method_results">method_results</code></td>
<td>
<p>Another convenience function, which can be modified to control the simulation results that are returned.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_method_pre_model">method_pre_model</code></td>
<td>
<p>Similar to method_sample argument, this variable is provided as a convenience for the user. This function transforms the treatment effect, after it's simulated within the synthetic data.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_method_post_model">method_post_model</code></td>
<td>
<p>Another convenience function, which can be modified to control transformations to the simulated effect, after modeling.</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_globals">globals</code></td>
<td>
<p>Additional globals to pass to the simulate function, such as parallelization packages or additional R packages used by method calls (e.g. modeling packages, like &quot;FEOLS&quot;).</p>
</td></tr>
<tr><td><code id="optic_simulation_+3A_verbose">verbose</code></td>
<td>
<p>Boolean, default True. If TRUE, provides summary details on simulation runs across iterations</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The resulting configuration object is used to pass simulation scenarios to the 'simulate' function. Provided as a convenience function to the user
so they can investigate simulation arguments prior to running models.
</p>


<h3>Value</h3>

<p>An OpticSim object, which contains simulation and model parameters for simulation runs, which is used as an input for dispatch_simulations.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load data for simulation and set up a hypothetical policy effect: 

data(overdoses)
eff &lt;- 0.1*mean(overdoses$crude.rate, na.rm = TRUE)

# Set up a simple linear model
form &lt;- formula(crude.rate ~ state + year + population + treatment_level)
mod &lt;- optic_model(name = 'lin', 
                   type = 'reg', 
                   call = 'lm', 
                   formula = form, 
                   se_adjust = 'none')

# Create simulation object, with desired parameters for simulations:
sim &lt;- optic_simulation(x = overdoses, 
                        models = list(mod), 
                        method = 'no_confounding', 
                        unit_var = 'state', 
                        treat_var = 'state',
                        time_var = 'year', 
                        effect_magnitude = list(eff), 
                        n_units = 10, 
                        effect_direction = 'pos', 
                        iters = 10,
                        policy_speed = 'instant', 
                        n_implementation_periods = 1)

</code></pre>

<hr>
<h2 id='overdoses'>OPTIC Overdoses example data.</h2><span id='topic+overdoses'></span>

<h3>Description</h3>

<p>An example dataset for performing simulations using the OPTIC library,
consisting of state-year overdose data from the US Bureau of Labor Statistics, 
the Centers from Disease Control and Prevention, and IQVIA Xponent.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>overdoses
</code></pre>


<h3>Format</h3>

<p>A data frame with 969 rows and 7 variables:
</p>

<dl>
<dt>state</dt><dd><p>US state</p>
</dd>
<dt>year</dt><dd><p>Year</p>
</dd>
<dt>population</dt><dd><p>Population estimate (Centers for Disease Control and Prevention, National Center for Health Statistics)</p>
</dd>
<dt>unemploymentrate</dt><dd><p>Average annual unemployment rate (US Bureau of Labor Statistics)</p>
</dd>
<dt>opioid_rx</dt><dd><p>Estimated number of annual opioid prescriptions dispensed per 100 residents (Centers for Disease Control and Prevention, IQVIA)</p>
</dd>
<dt>deaths</dt><dd><p>Annual number of drug-induced deaths (all drug overdose) (Centers for Disease Control and Prevention, National Center for Health Statistics)</p>
</dd>
<dt>crude.rate</dt><dd><p>Crude rate of drug-induced deaths (all drug overdose) per 100,000 residents (Centers for Disease Control and Prevention, National Center for Health Statistics)</p>
</dd>
</dl>



<h3>Source</h3>

<p>US Bureau of Labor Statistics. Local Area Unemployment Statistics April 2019 release. Accessed at https://www.bls.gov/lau/.
</p>
<p>Centers for Disease Control and Prevention, National Center for Health Statistics. Multiple Cause of Death 1999-2019 on CDC WONDER Online Database, released in 2020. Data are from the Multiple Cause of Death Files, 1999-2019, as compiled from data provided by the 57 vital statistics jurisdictions through the Vital Statistics Cooperative Program. Accessed at <a href="http://wonder.cdc.gov/mcd-icd10.html">http://wonder.cdc.gov/mcd-icd10.html</a>.
</p>
<p>Centers for Disease Control and Prevention, IQVIA Xponent 2006â€“2019. U.S. Opioid Dispensing Rate Maps. Accessed at https://www.cdc.gov/drugoverdose/rxrate-maps/index.html.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
