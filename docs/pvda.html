<!DOCTYPE html><html><head><title>Help for package pvda</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {pvda}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_disproportionality'><p>Add disproportionality estimates to data frame</p>
with expected counts</a></li>
<li><a href='#add_expected_counts'><p>Produces expected counts</p></a></li>
<li><a href='#apply_rule_of_N'><p>apply_rule_of_N</p></a></li>
<li><a href='#build_colnames_da'><p>An internal function creating colnames for da confidence/credibility bounds</p></a></li>
<li><a href='#ci_for_ic'><p>Confidence intervals for Information Component (IC)</p></a></li>
<li><a href='#ci_for_prr'><p>Confidence intervals for Proportional Reporting Rate</p></a></li>
<li><a href='#ci_for_ror'><p>Confidence intervals for Reporting Odds Ratio</p></a></li>
<li><a href='#conf_lvl_to_quantile_prob'><p>Quantile probabilities from confidence level</p></a></li>
<li><a href='#count_expected_prr'><p>Count expected for Proportional Reporting Rate</p></a></li>
<li><a href='#count_expected_ror'><p>Count expected for Reporting Odds Ratio</p></a></li>
<li><a href='#count_expected_rrr'><p>Count Expected for Relative Reporting Rate</p></a></li>
<li><a href='#da'><p>Disproportionality Analysis</p></a></li>
<li><a href='#drug_event_df'><p>A simulated ICSR database</p></a></li>
<li><a href='#grouped_da'><p>Disproportionality Analysis by Subgroups</p></a></li>
<li><a href='#ic'><p>Information component</p></a></li>
<li><a href='#print.da'><p>print function for da objects</p></a></li>
<li><a href='#prr'><p>Proportional Reporting Rate</p></a></li>
<li><a href='#ror'><p>Reporting Odds Ratio</p></a></li>
<li><a href='#round_and_sort_by_lower_da_limit'><p>Sort a disproportionality analysis by the lower da conf. or cred. limit</p></a></li>
<li><a href='#round_columns_with_many_decimals'><p>Rounds columns in da_df with many decimals</p></a></li>
<li><a href='#summary.da'><p>Summary function for disproportionality objects</p></a></li>
<li><a href='#tiny_dataset'><p>A 110 reports big, simulated ICSR database</p></a></li>
<li><a href='#write_to_excel'><p>Write to excel</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Disproportionality Functions for Pharmacovigilance</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Tools for performing disproportionality analysis using the information component, proportional reporting rate and the reporting odds ratio. The anticipated use is passing data to the da() function, which executes the disproportionality analysis. See Nor√©n et al (2011) &lt;<a href="https://doi.org/10.1177%2F0962280211403604">doi:10.1177/0962280211403604</a>&gt; and Montastruc et al (2011) &lt;<a href="https://doi.org/10.1111%2Fj.1365-2125.2011.04037.x">doi:10.1111/j.1365-2125.2011.04037.x</a>&gt; for further details.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr (&ge; 1.43), rmarkdown (&ge; 2.24), testthat (&ge; 3.1.10),
writexl (&ge; 1.4.2)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>BuildVignettes:</td>
<td>true</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate (&ge; 2.1.0), cli (&ge; 3.4.1), data.table (&ge; 1.14.6),
dplyr (&ge; 1.0.10), dtplyr (&ge; 1.2.2), glue (&ge; 1.6.2), purrr
(&ge; 0.3.5), Rdpack (&ge; 2.4), rlang (&ge; 1.0.6), stats (&ge;
4.1.3), stringr (&ge; 1.5.0), tibble (&ge; 3.1.8), tidyr (&ge;
1.3.0), tidyselect (&ge; 1.2.0), utils (&ge; 4.1.3)</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://oskargauffin.github.io/pvda/">https://oskargauffin.github.io/pvda/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/OskarGauffin/pvda/issues">https://github.com/OskarGauffin/pvda/issues</a></td>
</tr>
<tr>
<td>RdMacros:</td>
<td>Rdpack</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-01 19:48:10 UTC; OskarG</td>
</tr>
<tr>
<td>Author:</td>
<td>Oskar Gauffin <a href="https://orcid.org/0000-0003-1593-356X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Oskar Gauffin &lt;oskar.gauffin@hotmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-01 23:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_disproportionality'>Add disproportionality estimates to data frame
with expected counts</h2><span id='topic+add_disproportionality'></span>

<h3>Description</h3>

<p>Add disproportionality estimates to data frame
with expected counts
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_disproportionality(
  df = NULL,
  df_syms = NULL,
  da_estimators = c("ic", "prr", "ror"),
  rule_of_N = 3,
  conf_lvl = 0.95
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_disproportionality_+3A_df">df</code></td>
<td>
<p>Intended use is on the output tibble from <code>add_expected_counts</code>.</p>
</td></tr>
<tr><td><code id="add_disproportionality_+3A_df_syms">df_syms</code></td>
<td>
<p>A list built from df_colnames through conversion to symbols.</p>
</td></tr>
<tr><td><code id="add_disproportionality_+3A_da_estimators">da_estimators</code></td>
<td>
<p>Character vector specifying which disproportionality
estimators to use, in case you don't need all implemented options. Defaults
to c(&quot;ic&quot;, &quot;prr&quot;, &quot;ror&quot;).</p>
</td></tr>
<tr><td><code id="add_disproportionality_+3A_rule_of_n">rule_of_N</code></td>
<td>
<p>Numeric value. Sets estimates for ROR and PRR to NA when observed
counts are strictly less than the passed value of <code>rule_of_N</code>. Default value
is 3, 5 is sometimes used as a more liberal alternative. Set to NULL if you
don't want to apply any such rule.</p>
</td></tr>
<tr><td><code id="add_disproportionality_+3A_conf_lvl">conf_lvl</code></td>
<td>
<p>Confidence level of confidence or credibility intervals.
Default is 0.95 (i.e. 95 % confidence interval).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The passed data frame with disproportionality point and interval
estimates.
</p>

<hr>
<h2 id='add_expected_counts'>Produces expected counts</h2><span id='topic+add_expected_counts'></span>

<h3>Description</h3>

<p>Produces various counts used in disproportionality analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_expected_counts(
  df = NULL,
  df_colnames = NULL,
  df_syms = NULL,
  expected_count_estimators = c("rrr", "prr", "ror")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_expected_counts_+3A_df">df</code></td>
<td>
<p>An object possible to convert to a data table, e.g.
a tibble or data.frame, containing patient level reported drug-event-pairs.
See header 'The df object' below for further details.</p>
</td></tr>
<tr><td><code id="add_expected_counts_+3A_df_colnames">df_colnames</code></td>
<td>
<p>A list of column names to use in <code>df</code>. That is,
point <code>da</code> to the 'report id'-column (<code>report_id</code>), the
'drug name'-column (<code>drug</code>), the 'adverse event'-column (<code>event</code>)
and optionally a grouping column <code>group_by</code> to calculate disproportionality
across. See the vignette for further details.</p>
</td></tr>
<tr><td><code id="add_expected_counts_+3A_df_syms">df_syms</code></td>
<td>
<p>A list built from df_colnames through conversion to symbols.</p>
</td></tr>
<tr><td><code id="add_expected_counts_+3A_expected_count_estimators">expected_count_estimators</code></td>
<td>
<p>A character vector containing the desired
expected count estimators. Defaults to c(&quot;rrr&quot;, &quot;prr&quot;, &quot;ror&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing the various counts.
</p>


<h3>The df object</h3>

<p>The passed <code>df</code> should be (convertible to) a data table and at least contain three
columns: <code>report_id</code>, <code>drug</code> and <code>event</code>. The data table should contain one row
per reported drug-event-combination, i.e. receiving a single additional report
for drug X and event Y would add one row to the table. If the single report
contained drug X for event Y and event Z, two rows would be added, with the
same <code>report_id</code> and <code>drug</code> on both rows. Column <code>report_id</code> must be of type
numeric or character. Columns <code>drug</code> and <code>event</code> must be of type character.
If column <code>group_by</code> is provided, it can be either numeric or character.
You can use a <code>df</code> with column names of your choosing, as long as you
connect role and name in the <code>df_colnames</code>-parameter.
</p>

<hr>
<h2 id='apply_rule_of_N'>apply_rule_of_N</h2><span id='topic+apply_rule_of_N'></span>

<h3>Description</h3>

<p>Internal function to set disproportionality cells for ROR and PRR to NA when observed count &lt; 3
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apply_rule_of_N(
  da_df = NULL,
  da_estimators = c("ic", "prr", "ror"),
  rule_of_N = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apply_rule_of_N_+3A_da_df">da_df</code></td>
<td>
<p>See the intermediate object da_df in add_disproportionality</p>
</td></tr>
<tr><td><code id="apply_rule_of_N_+3A_da_estimators">da_estimators</code></td>
<td>
<p>Default is c(&quot;ic&quot;, &quot;prr&quot;, &quot;ror&quot;).</p>
</td></tr>
<tr><td><code id="apply_rule_of_N_+3A_rule_of_n">rule_of_N</code></td>
<td>
<p>An length one integer between 0 and 10.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Sometimes, you want to protect yourself from spurious findings based
on small observed counts combined with infinitesimal expected counts.
</p>


<h3>Value</h3>

<p>The input data frame (da_df) with potentially some cells set to NA.
</p>

<hr>
<h2 id='build_colnames_da'>An internal function creating colnames for da confidence/credibility bounds</h2><span id='topic+build_colnames_da'></span>

<h3>Description</h3>

<p>Given the output from quantile_prob, and a da_name string,
create column names such as PRR025, ROR025 and IC025
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_colnames_da(
  quantile_prob = list(lower = 0.025, upper = 0.975),
  da_name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_colnames_da_+3A_quantile_prob">quantile_prob</code></td>
<td>
<p>A list with two parameters, lower and upper. Default: list(lower = 0.025, upper = 0.975)</p>
</td></tr>
<tr><td><code id="build_colnames_da_+3A_da_name">da_name</code></td>
<td>
<p>A string, such as &quot;ic&quot;, &quot;prr&quot; or &quot;ror&quot;. Default: NULL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with two symbols, to be inserted in the dtplyr-chain
</p>

<hr>
<h2 id='ci_for_ic'>Confidence intervals for Information Component (IC)</h2><span id='topic+ci_for_ic'></span>

<h3>Description</h3>

<p>Mainly used in function <code><a href="#topic+ic">ic</a></code>. Produces quantiles of the
posterior gamma distribution. Called twice in <code>ic</code> to create
credibility intervals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ci_for_ic(obs, exp, conf_lvl_probs, shrinkage)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ci_for_ic_+3A_obs">obs</code></td>
<td>
<p>A numeric vector with observed counts, i.e. number of reports
for the selected drug-event-combination. Note that shrinkage (e.g. +0.5) is added
inside the function and should not be included here.</p>
</td></tr>
<tr><td><code id="ci_for_ic_+3A_exp">exp</code></td>
<td>
<p>A numeric vector with expected counts, i.e. number of reports
to be expected given a comparator or <em>background</em>. Note that shrinkage
(e.g. +0.5) is added inside the function and should not be included here.</p>
</td></tr>
<tr><td><code id="ci_for_ic_+3A_conf_lvl_probs">conf_lvl_probs</code></td>
<td>
<p>The probabilities of the posterior, based on
a passed confidence level (<code>conf_lvl</code>) in <code><a href="#topic+ic">ic</a></code>. For
instance, if <code>sgn_lvl = .95</code> in <code>ic</code> is used, quantiles will be
extracted at <code>sgn_lvl_probs</code> 0.025 and 0.975.</p>
</td></tr>
<tr><td><code id="ci_for_ic_+3A_shrinkage">shrinkage</code></td>
<td>
<p>A non-negative numeric value, to be added to
observed and expected count. Default is 0.5.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The credibility interval specified by input parameters.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ic">ic</a></code>
</p>

<hr>
<h2 id='ci_for_prr'>Confidence intervals for Proportional Reporting Rate</h2><span id='topic+ci_for_prr'></span>

<h3>Description</h3>

<p>Mainly for use in <code><a href="#topic+prr">prr</a></code>. Produces (symmetric,
normality based) confidence bounds for the PRR, for a passed probability.
Called twice in <code>prr</code> to create confidence intervals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ci_for_prr(
  obs = NULL,
  n_drug = NULL,
  n_event_prr = NULL,
  n_tot_prr = NULL,
  conf_lvl_probs = 0.95
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ci_for_prr_+3A_obs">obs</code></td>
<td>
<p>Number of reports for the specific drug and event (i.e. the
observed count).</p>
</td></tr>
<tr><td><code id="ci_for_prr_+3A_n_drug">n_drug</code></td>
<td>
<p>Number of reports with the drug of interest.</p>
</td></tr>
<tr><td><code id="ci_for_prr_+3A_n_event_prr">n_event_prr</code></td>
<td>
<p>Number of reports with the event in the background.</p>
</td></tr>
<tr><td><code id="ci_for_prr_+3A_n_tot_prr">n_tot_prr</code></td>
<td>
<p>Number of reports in the background.</p>
</td></tr>
<tr><td><code id="ci_for_prr_+3A_conf_lvl_probs">conf_lvl_probs</code></td>
<td>
<p>The probabilities of the normal distribution, based on
a passed confidence level (<code>conf_lvl</code>) in <code><a href="#topic+prr">prr</a></code>. If
<code>sgn_lvl = .95</code> in <code>prr</code>, quantiles of the normal distribution will
be extracted at <code>sgn_lvl_probs</code> of 0.025 and 0.975.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The confidence interval specified by input parameters.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+prr">prr</a></code>
</p>

<hr>
<h2 id='ci_for_ror'>Confidence intervals for Reporting Odds Ratio</h2><span id='topic+ci_for_ror'></span>

<h3>Description</h3>

<p>Mainly for use in <code><a href="#topic+ror">ror</a></code>. Produces (symmetric,
normality based) confidence bounds for the ROR, for a passed probability.
Called twice in <code>ror</code> to create confidence intervals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ci_for_ror(a, b, c, d, conf_lvl_probs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ci_for_ror_+3A_a">a</code></td>
<td>
<p>Number of reports for the specific drug and event (i.e. the
observed count).</p>
</td></tr>
<tr><td><code id="ci_for_ror_+3A_b">b</code></td>
<td>
<p>Number of reports with the drug, without the event</p>
</td></tr>
<tr><td><code id="ci_for_ror_+3A_c">c</code></td>
<td>
<p>Number of reports without the drug, with the event</p>
</td></tr>
<tr><td><code id="ci_for_ror_+3A_d">d</code></td>
<td>
<p>Number of reports without the drug, without the event</p>
</td></tr>
<tr><td><code id="ci_for_ror_+3A_conf_lvl_probs">conf_lvl_probs</code></td>
<td>
<p>The probabilities of the normal distribution, based on
a passed confidence level (<code>conf_lvl</code>) in <code><a href="#topic+ror">ror</a></code>. If
<code>sgn_lvl = .95</code> in <code>ror</code>, quantiles of the normal distribution will
be extracted at <code>sgn_lvl_probs</code> of 0.025 and 0.975.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The credibility interval specified by input parameters.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ror">ror</a></code>
</p>

<hr>
<h2 id='conf_lvl_to_quantile_prob'>Quantile probabilities from confidence level</h2><span id='topic+conf_lvl_to_quantile_prob'></span>

<h3>Description</h3>

<p>Calculates equi-tailed quantile probabilities from a
confidence level
</p>


<h3>Usage</h3>

<pre><code class='language-R'>conf_lvl_to_quantile_prob(conf_lvl = 0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="conf_lvl_to_quantile_prob_+3A_conf_lvl">conf_lvl</code></td>
<td>
<p>Confidence level of confidence or credibility intervals.
Default is 0.95 (i.e. 95 % confidence interval).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with two numerical vectors, &quot;lower&quot; and &quot;upper&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>conf_lvl_to_quantile_prob(0.95)
</code></pre>

<hr>
<h2 id='count_expected_prr'>Count expected for Proportional Reporting Rate</h2><span id='topic+count_expected_prr'></span>

<h3>Description</h3>

<p>Internal function to provide expected counts related to the PRR
</p>


<h3>Usage</h3>

<pre><code class='language-R'>count_expected_prr(count_dt)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="count_expected_prr_+3A_count_dt">count_dt</code></td>
<td>
<p>A data table, output from count_expected_rrr</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data table with added columns for n_event_prr
n_tot_prr and expected_prr
@export
</p>

<hr>
<h2 id='count_expected_ror'>Count expected for Reporting Odds Ratio</h2><span id='topic+count_expected_ror'></span>

<h3>Description</h3>

<p>Internal function to provide expected counts related to the ROR
</p>


<h3>Usage</h3>

<pre><code class='language-R'>count_expected_ror(count_dt)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="count_expected_ror_+3A_count_dt">count_dt</code></td>
<td>
<p>A data table, output from count_expected_rrr</p>
</td></tr>
</table>


<h3>Details</h3>

<p>DETAILS
</p>


<h3>Value</h3>

<p>A data table with added columns for n_event_prr,
n_tot_prr and expected_prr
</p>
<p>OUTPUT_DESCRIPTION
</p>


<h3>See Also</h3>

<p><code><a href="dplyr.html#topic+mutate">mutate</a></code>, <code><a href="dplyr.html#topic+select">select</a></code>
<code><a href="tidyselect.html#topic+everything">everything</a></code>
</p>

<hr>
<h2 id='count_expected_rrr'>Count Expected for Relative Reporting Rate</h2><span id='topic+count_expected_rrr'></span>

<h3>Description</h3>

<p>Internal function to provide expected counts related to the RRR
</p>


<h3>Usage</h3>

<pre><code class='language-R'>count_expected_rrr(df, df_colnames, df_syms)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="count_expected_rrr_+3A_df">df</code></td>
<td>
<p>See documentation for add_expected_counts</p>
</td></tr>
<tr><td><code id="count_expected_rrr_+3A_df_colnames">df_colnames</code></td>
<td>
<p>See documentation for da</p>
</td></tr>
<tr><td><code id="count_expected_rrr_+3A_df_syms">df_syms</code></td>
<td>
<p>A list built from df_colnames through conversion to symbols.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with columns for obs, n_drug,
n_event, n_tot and (RRR) expected
</p>

<hr>
<h2 id='da'>Disproportionality Analysis</h2><span id='topic+da'></span>

<h3>Description</h3>

<p>The function <code>da</code> executes disproportionality analyses,
i.e. compares the proportion of reports with a specific adverse event for a drug,
against an event proportion from a comparator based on the passed data frame.
See the vignette for a brief introduction to disproportionality analysis.
Furthermore, <code>da</code> supports three estimators: Information Component (IC),
Proportional Reporting Rate (PRR) and the Reporting Odds Ratio (ROR).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>da(
  df = NULL,
  df_colnames = list(report_id = "report_id", drug = "drug", event = "event", group_by =
    NULL),
  da_estimators = c("ic", "prr", "ror"),
  sort_by = "ic",
  number_of_digits = 2,
  rule_of_N = 3,
  conf_lvl = 0.95,
  excel_path = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="da_+3A_df">df</code></td>
<td>
<p>An object possible to convert to a data table, e.g.
a tibble or data.frame, containing patient level reported drug-event-pairs.
See header 'The df object' below for further details.</p>
</td></tr>
<tr><td><code id="da_+3A_df_colnames">df_colnames</code></td>
<td>
<p>A list of column names to use in <code>df</code>. That is,
point <code>da</code> to the 'report id'-column (<code>report_id</code>), the
'drug name'-column (<code>drug</code>), the 'adverse event'-column (<code>event</code>)
and optionally a grouping column <code>group_by</code> to calculate disproportionality
across. See the vignette for further details.</p>
</td></tr>
<tr><td><code id="da_+3A_da_estimators">da_estimators</code></td>
<td>
<p>Character vector specifying which disproportionality
estimators to use, in case you don't need all implemented options. Defaults
to c(&quot;ic&quot;, &quot;prr&quot;, &quot;ror&quot;).</p>
</td></tr>
<tr><td><code id="da_+3A_sort_by">sort_by</code></td>
<td>
<p>The output is sorted in descending order of the lower bound of
the confidence/credibility interval for a passed da estimator. Any of the passed strings
in &quot;da_estimators&quot; is accepted, the default is &quot;ic&quot;.
If a grouping variable is passed, sorting is made by the sample average across each drug-event-combination (ignoring NAs).</p>
</td></tr>
<tr><td><code id="da_+3A_number_of_digits">number_of_digits</code></td>
<td>
<p>Round decimal columns to specified precision, default is two decimals.</p>
</td></tr>
<tr><td><code id="da_+3A_rule_of_n">rule_of_N</code></td>
<td>
<p>Numeric value. Sets estimates for ROR and PRR to NA when observed
counts are strictly less than the passed value of <code>rule_of_N</code>. Default value
is 3, 5 is sometimes used as a more liberal alternative. Set to NULL if you
don't want to apply any such rule.</p>
</td></tr>
<tr><td><code id="da_+3A_conf_lvl">conf_lvl</code></td>
<td>
<p>Confidence level of confidence or credibility intervals.
Default is 0.95 (i.e. 95 % confidence interval).</p>
</td></tr>
<tr><td><code id="da_+3A_excel_path">excel_path</code></td>
<td>
<p>Intended for users who prefer to work in excel with minimal work in R.
To write the output of <code>da</code> to an excel file, provide a path
to a folder. For instance, to write to your current working directory, pass <code>getwd()</code>.
The excel file will by default be named <code>da.xlsx</code>. To control the excel file name,
pass a path ending with the desired filename suffixed with <code>.xlsx</code>. If you
do not want to export the output to an excel file, pass NULL (the default).</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>da</code> returns a data frame (invisibly) containing counts and
estimates related to supported disproportionality estimators. Each row
corresponds to a drug-event pair.
</p>


<h3>The df object</h3>

<p>The passed <code>df</code> should be (convertible to) a data table and at least contain three
columns: <code>report_id</code>, <code>drug</code> and <code>event</code>. The data table should contain one row
per reported drug-event-combination, i.e. receiving a single additional report
for drug X and event Y would add one row to the table. If the single report
contained drug X for event Y and event Z, two rows would be added, with the
same <code>report_id</code> and <code>drug</code> on both rows. Column <code>report_id</code> must be of type
numeric or character. Columns <code>drug</code> and <code>event</code> must be of type character.
If column <code>group_by</code> is provided, it can be either numeric or character.
You can use a <code>df</code> with column names of your choosing, as long as you
connect role and name in the <code>df_colnames</code>-parameter.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### Run a disproportionality analysis

da_1 &lt;-
  tiny_dataset |&gt;
  da()

### Run a disproportionality across subgroups
list_of_colnames &lt;-
  list(
    report_id = "report_id",
    drug = "drug",
    event = "event",
    group_by = "group"
  )

 da_2 &lt;-
  tiny_dataset |&gt;
  da(df_colnames = list_of_colnames)

# If columns in your df have different names than the default ones,
# you can specify the column names in the df_colnames parameter list:

renamed_df &lt;-
  tiny_dataset |&gt;
  dplyr::rename(ReportID = report_id)

list_of_colnames$report_id &lt;- "ReportID"

da_3 &lt;-
  renamed_df |&gt;
  da(df_colnames = list_of_colnames)


</code></pre>

<hr>
<h2 id='drug_event_df'>A simulated ICSR database</h2><span id='topic+drug_event_df'></span>

<h3>Description</h3>

<p>drug_event_df is a simulated dataset, slightly larger than the &quot;tiny_dataset&quot;
which is also contained in this package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drug_event_df
</code></pre>


<h3>Format</h3>

<p>'drug_event_df'
A data frame with 3,971 rows and 3 columns. In total 1000 unique report_ids,
i.e. the same report_id can have several drugs and events.
</p>
<p>Number of drugs per report_id is sampled as 1 + Pois(3), with increasing
probability as the drug letter closes in on Z. Every drug is assigned
an event, with decreasing probability as the event index number increases
towards 1000. See the DATASET.R file in the data-raw folder for details.
</p>

<dl>
<dt>report_id</dt><dd><p>A patient or report identifier</p>
</dd>
<dt>drug</dt><dd><p>One of 26 fake drugs (Drug_A - Drug_Z)</p>
</dd>
<dt>event</dt><dd><p>Sampled events (Event_1 - Event_1000)</p>
</dd>
</dl>



<h3>Source</h3>

<p>Simulated data.
</p>

<hr>
<h2 id='grouped_da'>Disproportionality Analysis by Subgroups</h2><span id='topic+grouped_da'></span>

<h3>Description</h3>

<p>A package internal wrapper for executing da across subgroups
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grouped_da(
  df = NULL,
  df_colnames = NULL,
  df_syms = NULL,
  expected_count_estimators = NULL,
  da_estimators = NULL,
  sort_by = NULL,
  conf_lvl = NULL,
  rule_of_N = NULL,
  number_of_digits = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="grouped_da_+3A_df">df</code></td>
<td>
<p>See the da function</p>
</td></tr>
<tr><td><code id="grouped_da_+3A_df_colnames">df_colnames</code></td>
<td>
<p>See the da function</p>
</td></tr>
<tr><td><code id="grouped_da_+3A_df_syms">df_syms</code></td>
<td>
<p>A list built from df_colnames through conversion to symbols.</p>
</td></tr>
<tr><td><code id="grouped_da_+3A_expected_count_estimators">expected_count_estimators</code></td>
<td>
<p>See the da function</p>
</td></tr>
<tr><td><code id="grouped_da_+3A_da_estimators">da_estimators</code></td>
<td>
<p>See the da function</p>
</td></tr>
<tr><td><code id="grouped_da_+3A_sort_by">sort_by</code></td>
<td>
<p>See the da function</p>
</td></tr>
<tr><td><code id="grouped_da_+3A_conf_lvl">conf_lvl</code></td>
<td>
<p>See the da function</p>
</td></tr>
<tr><td><code id="grouped_da_+3A_rule_of_n">rule_of_N</code></td>
<td>
<p>See the da function</p>
</td></tr>
<tr><td><code id="grouped_da_+3A_number_of_digits">number_of_digits</code></td>
<td>
<p>See the da function</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See the da documentation
</p>


<h3>Value</h3>

<p>See the da function
</p>

<hr>
<h2 id='ic'>Information component</h2><span id='topic+ic'></span>

<h3>Description</h3>

<p>Calculates the information component (&quot;IC&quot;) and credibility
interval, used in disproportionality analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ic(obs = NULL, exp = NULL, shrinkage = 0.5, conf_lvl = 0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ic_+3A_obs">obs</code></td>
<td>
<p>A numeric vector with observed counts, i.e. number of reports
for the selected drug-event-combination. Note that shrinkage (e.g. +0.5) is added
inside the function and should not be included here.</p>
</td></tr>
<tr><td><code id="ic_+3A_exp">exp</code></td>
<td>
<p>A numeric vector with expected counts, i.e. number of reports
to be expected given a comparator or <em>background</em>. Note that shrinkage
(e.g. +0.5) is added inside the function and should not be included here.</p>
</td></tr>
<tr><td><code id="ic_+3A_shrinkage">shrinkage</code></td>
<td>
<p>A non-negative numeric value, to be added to
observed and expected count. Default is 0.5.</p>
</td></tr>
<tr><td><code id="ic_+3A_conf_lvl">conf_lvl</code></td>
<td>
<p>Confidence level of confidence or credibility intervals.
Default is 0.95 (i.e. 95 % confidence interval).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The IC is a log2-transformed observed-to-expected ratio, based on
the relative reporting rate (RRR) for counts, but modified with an addition
of &quot;shrinkage&quot; to protect against spurious associations.
</p>
<p style="text-align: center;"><code class="reqn">\hat{IC} = log_{2}(\frac{\hat{O}+k}{\hat{E}+k})</code>
</p>

<p>where <code class="reqn">\hat{O}</code> = observed number of reports, <code class="reqn">k</code> is the shrinkage
(typically +0.5), and expected <code class="reqn">\hat{E}</code> is (for RRR, and using the
entire database as comparator or <em>background</em>) estimated as
</p>
<p style="text-align: center;"><code class="reqn"> \hat{E} = \frac{\hat{N}_{drug} \times \hat{N}_{event}}{\hat{N}_{TOT}}</code>
</p>

<p>where <code class="reqn">\hat{N}_{drug}</code>, <code class="reqn">\hat{N}_{event}</code> and <code class="reqn">\hat{N}_{TOT}</code> are the number of
reports with the drug, the event, and in the whole database respectively.
</p>
<p>The credibility interval is created from the quantiles of the posterior
gamma distribution with shape (<code class="reqn">\hat{S}</code>) and rate (<code class="reqn">\hat{R}</code>) parameters as
</p>
<p style="text-align: center;"><code class="reqn">\hat{S} = \hat{O} + k</code>
</p>

<p style="text-align: center;"><code class="reqn">\hat{R} = \hat{E} + k</code>
</p>

<p>using the <code>stats::qgamma</code> function. Parameter <code class="reqn">k</code> is the shrinkage defined
earlier. For completeness, a credibility interval of the gamma distributed <code class="reqn">X</code> (i.e.
<code class="reqn">X \sim \Gamma(\hat{S}, \hat{R})</code> where <code class="reqn">\hat{S}</code> and <code class="reqn">\hat{R}</code> are shape and rate parameters)
with associated quantile function <code class="reqn">Q_X(p)</code> for a significance level <code class="reqn">\alpha</code> is
constructed as
</p>
<p style="text-align: center;"><code class="reqn">[Q_X(\alpha/2), Q_X(1-\alpha/2)]</code>
</p>



<h3>Value</h3>

<p>A tibble with three columns (point estimate and credibility bounds).
</p>


<h3>Further details</h3>

<p>From a bayesian point-of-view, the credibility interval of the IC is constructed
from the poisson-gamma conjugacy. The shrinkage constitutes a prior of
observed and expected of 0.5. A shrinkage of +0.5 with a gamma-quantile based 95 %
credibility interval cannot have lower bound above 0 unless the observed count
exceeds 3. One benefit of <code class="reqn">log_{2}</code> is to provide
a log-scale for convenient plotting of multiple IC values side-by-side.
</p>


<h3>References</h3>

<p>Nor√©n GN, Hopstadius J, Bate A (2011).
&ldquo;Shrinkage observed-to-expected ratios for robust and transparent large-scale pattern discovery.&rdquo;
<em>Statistical Methods in Medical Research</em>, <b>22</b>(1), 57&ndash;69.
<a href="https://doi.org/10.1177/0962280211403604">doi:10.1177/0962280211403604</a>, <a href="https://doi.org/10.1177/0962280211403604">https://doi.org/10.1177/0962280211403604</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ic(obs = 20, exp = 10)
# Note that obs and exp can be vectors (of equal length, no recycling allowed)
ic(obs = c(20, 30), exp = c(10, 10))
</code></pre>

<hr>
<h2 id='print.da'>print function for da objects</h2><span id='topic+print.da'></span>

<h3>Description</h3>

<p>print function for da objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'da'
print(x, n = 10, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.da_+3A_x">x</code></td>
<td>
<p>A S3 obj of class &quot;da&quot;, output from <code>pvda::da()</code>.</p>
</td></tr>
<tr><td><code id="print.da_+3A_n">n</code></td>
<td>
<p>Control the number of rows to print.</p>
</td></tr>
<tr><td><code id="print.da_+3A_...">...</code></td>
<td>
<p>For passing additional parameters to extended classes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing, but prints the tibble da_df in the da object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
da_1 &lt;-
tiny_dataset |&gt;
da()
print(da_1)
</code></pre>

<hr>
<h2 id='prr'>Proportional Reporting Rate</h2><span id='topic+prr'></span>

<h3>Description</h3>

<p>Calculates Proportional Reporting Rate (&quot;PRR&quot;) with
confidence intervals, used in disproportionality analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prr(
  obs = NULL,
  n_drug = NULL,
  n_event_prr = NULL,
  n_tot_prr = NULL,
  conf_lvl = 0.95
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prr_+3A_obs">obs</code></td>
<td>
<p>Number of reports for the specific drug and event (i.e. the
observed count).</p>
</td></tr>
<tr><td><code id="prr_+3A_n_drug">n_drug</code></td>
<td>
<p>Number of reports with the drug of interest.</p>
</td></tr>
<tr><td><code id="prr_+3A_n_event_prr">n_event_prr</code></td>
<td>
<p>Number of reports with the event in the background.</p>
</td></tr>
<tr><td><code id="prr_+3A_n_tot_prr">n_tot_prr</code></td>
<td>
<p>Number of reports in the background.</p>
</td></tr>
<tr><td><code id="prr_+3A_conf_lvl">conf_lvl</code></td>
<td>
<p>Confidence level of confidence or credibility intervals.
Default is 0.95 (i.e. 95 % confidence interval).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The PRR is the proportion of reports with an event in set of exposed
cases, divided with the proportion of reports with the event in a background
or comparator, which does not include the exposed.
</p>
<p>The PRR is estimated from a observed-to-expected ratio, based on
similar to the RRR and IC, but excludes the exposure of interest from the
comparator.
</p>
<p style="text-align: center;"><code class="reqn">\hat{PRR} = \frac{\hat{O}}{\hat{E}}</code>
</p>

<p>where <code class="reqn">\hat{O}</code> is the observed number of reports, and expected <code class="reqn">\hat{E}</code>
is estimated as
</p>
<p style="text-align: center;"><code class="reqn">\hat{E} = \frac{\hat{N}_{drug} \times (\hat{N}_{event} - \hat{O})}{\hat{N}_{TOT}-\hat{N}_{drug}}</code>
</p>

<p>where <code class="reqn">\hat{N}_{drug}</code>, <code class="reqn">\hat{N}_{event}</code>, <code class="reqn">\hat{O}</code> and <code class="reqn">\hat{N}_{TOT}</code> are
the number of reports with the drug, the event, the drug and event, and
in the whole database respectively.
</p>
<p>A confidence interval is derived in Gravel (2009) using the delta method:
</p>
<p style="text-align: center;"><code class="reqn">\hat{s} = \sqrt{ 1/\hat{O} - 1/(\hat{N}_{drug}) + 1/(\hat{N}_{event} - \hat{O}) - 1/(\hat{N}_{TOT} - \hat{N}_{drug})}</code>
</p>

<p>and </p>
<p style="text-align: center;"><code class="reqn">[\hat{CI}_{\alpha/2}, \hat{CI}_{1-\alpha/2}] = </code>
</p>

<p style="text-align: center;"><code class="reqn">[\frac{\hat{O}}{\hat{E}} \times \exp(Q_{\alpha/2} \times \hat{s}),
\frac{\hat{O}}{\hat{E}} \times \exp(Q_{1-\alpha/2} \times \hat{s})]</code>
</p>

<p>where <code class="reqn">Q_{\alpha}</code> denotes the quantile function of a
standard Normal distribution at significance level <code class="reqn">\alpha</code>.
</p>
<p>Note: For historical reasons, another version of this standard deviation is sometimes used
where the last fraction under the square root is added rather than subtracted,
with negligible practical implications in large databases. This function uses the version
declared above, i.e. with subtraction.
</p>


<h3>Value</h3>

<p>A tibble with three columns (point estimate and credibility bounds).
Number of rows equals length of inputs obs, n_drug, n_event_prr and n_tot_prr.
</p>


<h3>References</h3>

<p>Montastruc J, Sommet A, Bagheri H, Lapeyre-Mestre M (2011).
&ldquo;Benefits and strengths of the disproportionality analysis for identification of adverse drug reactions in a pharmacovigilance database.&rdquo;
<em>British Journal of Clinical Pharmacology</em>, <b>72</b>(6), 905&ndash;908.
<a href="https://doi.org/10.1111/j.1365-2125.2011.04037.x">doi:10.1111/j.1365-2125.2011.04037.x</a>, <a href="https://doi.org/10.1111/j.1365-2125.2011.04037.x">https://doi.org/10.1111/j.1365-2125.2011.04037.x</a>.
</p>
<p>Gravel C (2009).
&ldquo;Statistical Methods for Signal Detection in Pharmacovigilance.&rdquo;
<a href="https://repository.library.carleton.ca/downloads/jd472x08w">https://repository.library.carleton.ca/downloads/jd472x08w</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>prr(
  obs = 5,
  n_drug = 10,
  n_event_prr = 20,
  n_tot_prr = 10000
)


# Note that input parameters can be vectors (of equal length, no recycling)
pvda::prr(
  obs = c(5, 10),
  n_drug = c(10, 20),
  n_event_prr = c(15, 30),
  n_tot_prr = c(10000, 10000)
)
</code></pre>

<hr>
<h2 id='ror'>Reporting Odds Ratio</h2><span id='topic+ror'></span>

<h3>Description</h3>

<p>Calculates Reporting Odds Ratio (&quot;ROR&quot;) and confidence
intervals, used in disproportionality analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ror(a = NULL, b = NULL, c = NULL, d = NULL, conf_lvl = 0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ror_+3A_a">a</code></td>
<td>
<p>Number of reports for the specific drug and event (i.e. the
observed count).</p>
</td></tr>
<tr><td><code id="ror_+3A_b">b</code></td>
<td>
<p>Number of reports with the drug, without the event</p>
</td></tr>
<tr><td><code id="ror_+3A_c">c</code></td>
<td>
<p>Number of reports without the drug, with the event</p>
</td></tr>
<tr><td><code id="ror_+3A_d">d</code></td>
<td>
<p>Number of reports without the drug, without the event</p>
</td></tr>
<tr><td><code id="ror_+3A_conf_lvl">conf_lvl</code></td>
<td>
<p>Confidence level of confidence or credibility intervals.
Default is 0.95 (i.e. 95 % confidence interval).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The ROR is an odds ratio calculated from reporting counts. The
R for Reporting in ROR is meant to emphasize an interpretation of reporting,
as the ROR is calculated from a reporting database. Note: the function is
vectorized, i.e. a, b, c and d can be vectors, see the examples.
</p>
<p>A reporting odds ratio is simply an odds ratio based on adverse event
reports.
</p>
<p style="text-align: center;"><code class="reqn">\hat{ROR} = \frac{a/b}{c/d}</code>
</p>

<p>where <code class="reqn">a</code> = observed count (i.e. number of reports with exposure and
outcome), <code class="reqn">b</code> = number of reports with the drug and without the event,
<code class="reqn">c</code> = number of reports without the drug with the event and <code class="reqn">d</code> =
number of reports with neither of the drug and the event.
</p>
<p>A confidence interval for the ROR can be derived through the delta method,
with a standard deviation:
</p>
<p style="text-align: center;"><code class="reqn">\hat{s} = \sqrt{1/a + 1/b + 1/c + 1/d}</code>
</p>

<p>with the resulting confidence interval for significance level <code class="reqn">\alpha</code>
</p>
<p style="text-align: center;"><code class="reqn">[\hat{ROR} \times exp(\Phi_{\alpha/2} \times \hat{s}), \hat{ROR} \times exp(\Phi_{1-\alpha/2} \times \hat{s})]</code>
</p>



<h3>Value</h3>

<p>A tibble with three columns (point estimate and credibility bounds).
Number of rows equals length of inputs a, b, c, d.
</p>


<h3>References</h3>

<p>Montastruc J, Sommet A, Bagheri H, Lapeyre-Mestre M (2011).
&ldquo;Benefits and strengths of the disproportionality analysis for identification of adverse drug reactions in a pharmacovigilance database.&rdquo;
<em>British Journal of Clinical Pharmacology</em>, <b>72</b>(6), 905&ndash;908.
<a href="https://doi.org/10.1111/j.1365-2125.2011.04037.x">doi:10.1111/j.1365-2125.2011.04037.x</a>, <a href="https://doi.org/10.1111/j.1365-2125.2011.04037.x">https://doi.org/10.1111/j.1365-2125.2011.04037.x</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
ror(
  a = 5,
  b = 10,
  c = 20,
  d = 10000
)

# Note that a, b, c and d can be vectors (of equal length, no recycling)
pvda::ror(
  a = c(5, 10),
  b = c(10, 20),
  c = c(15, 30),
  d = c(10000, 10000)
)
</code></pre>

<hr>
<h2 id='round_and_sort_by_lower_da_limit'>Sort a disproportionality analysis by the lower da conf. or cred. limit</h2><span id='topic+round_and_sort_by_lower_da_limit'></span>

<h3>Description</h3>

<p>Sorts the output by the mean lower limit of a passed da estimator
</p>


<h3>Usage</h3>

<pre><code class='language-R'>round_and_sort_by_lower_da_limit(
  df = NULL,
  df_colnames = NULL,
  df_syms = NULL,
  conf_lvl = NULL,
  sort_by = NULL,
  da_estimators = NULL,
  number_of_digits = 2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="round_and_sort_by_lower_da_limit_+3A_df">df</code></td>
<td>
<p>See add_disproportionality</p>
</td></tr>
<tr><td><code id="round_and_sort_by_lower_da_limit_+3A_df_colnames">df_colnames</code></td>
<td>
<p>See add_disproportionality</p>
</td></tr>
<tr><td><code id="round_and_sort_by_lower_da_limit_+3A_df_syms">df_syms</code></td>
<td>
<p>See add_disproportionality</p>
</td></tr>
<tr><td><code id="round_and_sort_by_lower_da_limit_+3A_conf_lvl">conf_lvl</code></td>
<td>
<p>See add_disproportionality</p>
</td></tr>
<tr><td><code id="round_and_sort_by_lower_da_limit_+3A_sort_by">sort_by</code></td>
<td>
<p>See add_disproportionality</p>
</td></tr>
<tr><td><code id="round_and_sort_by_lower_da_limit_+3A_da_estimators">da_estimators</code></td>
<td>
<p>See add_disproportionality</p>
</td></tr>
<tr><td><code id="round_and_sort_by_lower_da_limit_+3A_number_of_digits">number_of_digits</code></td>
<td>
<p>Numeric value. Set the number of digits to show in output by passing
an integer. Default value is 2 digits. Set to NULL to avoid rounding.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The df object, sorted.
</p>

<hr>
<h2 id='round_columns_with_many_decimals'>Rounds columns in da_df with many decimals</h2><span id='topic+round_columns_with_many_decimals'></span>

<h3>Description</h3>

<p>Internal function containing a mutate + across
</p>


<h3>Usage</h3>

<pre><code class='language-R'>round_columns_with_many_decimals(
  da_df = NULL,
  da_estimators = NULL,
  number_of_digits = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="round_columns_with_many_decimals_+3A_da_df">da_df</code></td>
<td>
<p>See add_disproportionality</p>
</td></tr>
<tr><td><code id="round_columns_with_many_decimals_+3A_da_estimators">da_estimators</code></td>
<td>
<p>See add_disproportionality</p>
</td></tr>
<tr><td><code id="round_columns_with_many_decimals_+3A_number_of_digits">number_of_digits</code></td>
<td>
<p>See add_disproportionality</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A df with rounded columns
</p>

<hr>
<h2 id='summary.da'>Summary function for disproportionality objects</h2><span id='topic+summary.da'></span>

<h3>Description</h3>

<p>Provides summary counts of SDRs and shows the top five DECs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'da'
summary(object, print = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.da_+3A_object">object</code></td>
<td>
<p>A S3 obj of class &quot;da&quot;, output from <code>pvda::da()</code>.</p>
</td></tr>
<tr><td><code id="summary.da_+3A_print">print</code></td>
<td>
<p>Do you want to print the output to the console. Defaults to TRUE.</p>
</td></tr>
<tr><td><code id="summary.da_+3A_...">...</code></td>
<td>
<p>For passing additional parameters to extended classes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Passes a tibble with the SDR counts invisibly.
</p>

<hr>
<h2 id='tiny_dataset'>A 110 reports big, simulated ICSR database</h2><span id='topic+tiny_dataset'></span>

<h3>Description</h3>

<p>The dataframe tiny_dataset is used to demonstrate the functionality
of the package in examples. The larger drug_event_df-dataset can also
be used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tiny_dataset
</code></pre>


<h3>Format</h3>

<p>'tiny_dataset'
A data frame with 110 rows and 3 columns. In total 110 unique report_ids.
In particular, for Drug A and Event 1 the observed count will be 4 and
exp_rrr = 1.1
</p>

<dl>
<dt>report_id</dt><dd><p>A report identifier, 1-110. </p>
</dd>
<dt>drug</dt><dd><p>Drugs named as Drug_A - Drug_Z.</p>
</dd>
<dt>event</dt><dd><p>Events named as Event_1 - Event_97)</p>
</dd>
<dt>group</dt><dd><p>In this example, sex of the patient, i.e. Male or Female.</p>
</dd>
</dl>



<h3>Source</h3>

<p>Simulated data.
</p>

<hr>
<h2 id='write_to_excel'>Write to excel</h2><span id='topic+write_to_excel'></span>

<h3>Description</h3>

<p>Writes output from a disproportionality analysis to an excel file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_to_excel(df, write_path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_to_excel_+3A_df">df</code></td>
<td>
<p>The data frame to export. See '?da' for details.</p>
</td></tr>
<tr><td><code id="write_to_excel_+3A_write_path">write_path</code></td>
<td>
<p>A string giving the file path</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
