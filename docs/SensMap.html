<!DOCTYPE html><html lang="en"><head><title>Help for package SensMap</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {SensMap}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#hedo_biscuit'>
<p>Consumer data</p></a></li>
<li><a href='#PrefMap'><p>External Prefernce Mapping tools</p></a></li>
<li><a href='#sens_biscuit'>
<p>Sensory data</p></a></li>
<li><a href='#SensMapUI'><p>Graphical User Interface for SensMap package</p></a></li>
<li><a href='#SmoothMap'><p>Smoothed version of External Preference Mapping by LOESS</p></a></li>
<li><a href='#StabMap'><p>Evaluation of External Prefernce mapping stability</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Sensory and Consumer Data Mapping</td>
</tr>
<tr>
<td>Version:</td>
<td>0.7</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-06-29</td>
</tr>
<tr>
<td>Author:</td>
<td>Ibtihel Rebhi [aut, cre],  Dhafer Malouche [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ibtihel Rebhi &lt;ibtihel.rebhi@enit.utm.tn&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/IbtihelRebhi/SensMap">https://github.com/IbtihelRebhi/SensMap</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Provides Sensory and Consumer Data 
    mapping and analysis &lt;<a href="https://doi.org/10.14569%2FIJACSA.2017.081266">doi:10.14569/IJACSA.2017.081266</a>&gt;. The mapping visualization is made available
    from several features : options in dimension reduction methods and prediction models ranging from 
    linear to non linear regressions. A smoothed version of the map performed using locally weighted regression algorithm 
    is available. A selection process of map stability is provided. A 'shiny' application is included. 
    It presents an easy GUI for the implemented functions as well as a comparative tool of fit models
    using several criteria. Basic analysis such as characterization of products,
    panelists and sessions likewise consumer segmentation are also made available.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0), stats, grDevices, graphics</td>
</tr>
<tr>
<td>Imports:</td>
<td>doBy, lattice, FactoMineR, MCMCpack, factoextra, fields,
ggdendro, glmulti, mgcv, plotly, shiny, ggplot2, reshape2</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2.9000</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-07-04 12:45:33 UTC; Ibtihel Rebhi</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-07-04 19:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='hedo_biscuit'>
Consumer data
</h2><span id='topic+hedo_biscuit'></span>

<h3>Description</h3>

<p>hedo_biscuit data was collected from ratings of 294 consumers towards 8 products (cookies).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hedo_biscuit
</code></pre>


<h3>Format</h3>


<dl>
<dt><code>produit </code></dt><dd>
<p>factor : numbering the 8 products
</p>
</dd>
<dt><code>consumers</code></dt><dd>
<p>294 consumers : ratings of consumers
</p>
</dd>
</dl>


<h3>Value</h3>

<p>No return value, called for data loading</p>


<h3>Source</h3>

<p>Francois Husson data sets
</p>


<h3>References</h3>

<p>Pages et al. Sensory analysis comparison of eight biscuits
by French and Pakistani panels, 2007, Journal of Sensory Studies 22(6), 665-686.7
</p>

<hr>
<h2 id='PrefMap'>External Prefernce Mapping tools</h2><span id='topic+PrefMap'></span>

<h3>Description</h3>

<p>function that provides external preference mapping technique and visualizes consumers preferences in the prediction space provided by the principal components obtained from application of dimension reduction method (PCA, MFA and CA) to quantitative
descriptive variables. The prediction can be fitted either from Polynomial regressions <code><a href="stats.html#topic+lm">lm</a></code>, GAM <code><a href="mgcv.html#topic+gam">gam</a></code>, GLM <code><a href="stats.html#topic+glm">glm</a></code> or Bayesian models <code><a href="MCMCpack.html#topic+MCMCregress">MCMCregress</a></code>. The surfaces of predictions and preferences are displayed in 2D and 3D.</p>


<h3>Usage</h3>

<pre><code class='language-R'>PrefMap(Y,X,S,axis=c(1,2),formula,dimredumethod=1,
predmodel=1,nbpoints=50,pred.na =FALSE,
graph.pred =FALSE,graph.map =TRUE, graph.map.3D =FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PrefMap_+3A_y">Y</code></td>
<td>
<p>a data frame in which each row represents a product
and each column represents hedonic scores of a
given consumer for the products.</p>
</td></tr>
<tr><td><code id="PrefMap_+3A_x">X</code></td>
<td>
<p>a data frame in which each row represents a product and
each column represents evaluations of a given sensory
or physico-chemical attribute for the products.</p>
</td></tr>
<tr><td><code id="PrefMap_+3A_s">S</code></td>
<td>
<p>a data frame crossing products and panelists evaluations
of a given sensory or physico-chemical attribute for each product. It's required when choosing Canonical Analysis as dimension reduction method.</p>
</td></tr>
<tr><td><code id="PrefMap_+3A_axis">axis</code></td>
<td>
<p>a length 2 vector specifying the components of dimension reduction method to plot.</p>
</td></tr>
<tr><td><code id="PrefMap_+3A_formula">formula</code></td>
<td>
<p>a formula expression to be introduced. If predmodel=1, it corresponds to four polynomial regression models performed using
<code><a href="stats.html#topic+lm">lm</a></code> : Quadratic model, the corresponding
formula = &quot;~I(F1*F1)+I(F2*F2)+F1*F2&quot;. Vector model,
the formula = &quot;~ F1 + F2&quot;. Circular model,
the formula=&quot;~ F1 + F2 + (F1*F1 + F2*F2)&quot;. Elliptic model,
the formula = &quot;~I(F1*F1)+I(F2*F2)&quot;. If predmodel= 2, Generalized Additive models (GAM) structure performed using <code><a href="mgcv.html#topic+gam">gam</a></code>, proposed formula=&quot;~s(F1,k=3)+s(F2,k=3)&quot;. If predmodel= 3, Generalized Linear Models(GLM) structure performed using <code><a href="stats.html#topic+glm">glm</a></code>, proposed
formula = &quot;~I(F1*F1)+ I(F2*F2)+ F1*F2&quot;. If predmodel= 4, Bayes structure performed using <code><a href="MCMCpack.html#topic+MCMCregress">MCMCregress</a></code>, proposed
formula=&quot;~I(F1*F1)+I(F2*F2)+F1*F2&quot;.</p>
</td></tr>
<tr><td><code id="PrefMap_+3A_dimredumethod">dimredumethod</code></td>
<td>
<p>1 is assigned to Principal Component Analysis (PCA). If 2, Multiple Factor Analysis (MFA). If 3, Canonical Analysis (CA).</p>
</td></tr>
<tr><td><code id="PrefMap_+3A_predmodel">predmodel</code></td>
<td>
<p>the type of prediction model :
If predmodel = 1 : Polynomial regression models.
If predmodel = 2 : Generalized Additive models (GAM).
If predmodel = 3 : Generalized Linear Models (GLM).
If predmodel = 4 : Bayesian models.</p>
</td></tr>
<tr><td><code id="PrefMap_+3A_nbpoints">nbpoints</code></td>
<td>
<p>an integer. The number of points in th grid-point of the discretized plan of the map provided by the two first components. By default 50.</p>
</td></tr>
<tr><td><code id="PrefMap_+3A_pred.na">pred.na</code></td>
<td>
<p>boolean, if TRUE, predictions outside the set of liking scores are removed (generally [0:10]), if FALSE, we keep all predictions in and outside the set of liking scores.</p>
</td></tr>
<tr><td><code id="PrefMap_+3A_graph.pred">graph.pred</code></td>
<td>
<p>boolean, if TRUE, plot of surface prediction
of all consumers is posted.</p>
</td></tr>
<tr><td><code id="PrefMap_+3A_graph.map">graph.map</code></td>
<td>
<p>boolean, if TRUE, extrenal preference mapping in 2 dimensions is posted.</p>
</td></tr>
<tr><td><code id="PrefMap_+3A_graph.map.3d">graph.map.3D</code></td>
<td>
<p>boolean, if TRUE, extrenal preference mapping is 3 dimensions is posted.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The external preference mapping method is a very common way used
in sensory analysis field to explain hedonic judgments towards products in function of analytic attributes of these products in order to understand the consumers' sensory profile and more especially which characteristics influence positively or negatively their liking (Danzart,2004). Classically, A Principal Component Analysis is performed (PCA) on the descriptive data. Individual consumer responses are then regressed according to the chosen two principal components of PCA. Cards of prediction response surface for each consumer are displayed and then superposed. At each point of the grid, if the predicted value is higher than the mean value of liking score in the hedonic data it is considered as preference point. The map of preferences for all consumers is then obtained. Areas of rejection and preferences are underlined via showing the percentage of consumers.
</p>


<h3>Value</h3>

<p>graph.pred plot of surface predictions
</p>
<p>graph.map plot of external preference mapping
</p>
<p>graph.map.3D plot of external preference mapping in 3D
</p>
<p>nb.NA if pred.na = TRUE, it returns a list of the number of predictions outside the liking scores space for each consumer prediction surface.
</p>
<p>pos.NA if pred.na=TRUE, it returns a list of positions of predictions outside the liking scores space for each consumer prediction surface.
</p>
<p>occur.NA if pred.na=TRUE, it returns a data frame with total number of predictions outside the liking scores space at each point of the prediction surface of all consumers.
</p>


<h3>Author(s)</h3>

<p>Ibtihel Rebhi, Dhafer Malouche
</p>


<h3>References</h3>

<p>Sebastien Le, Francois Husson (2008).SensoMineR:
A package for sensory data analysis,
Journal of Sensory Studies Volume 23, Issue 1, Pages 14-25
</p>
<p>Danzart M., Sieffermann J.M., Delarue J. (2004). New developments in preference mapping techniques: finding out a consumer optimal product, its sensory profile and the key sensory attributes. 7th Sensometrics Conference, July 27-30, 2004, Davis, CA
</p>


<h3>See Also</h3>

<p><code><a href="#topic+SmoothMap">SmoothMap</a></code>, <code><a href="#topic+StabMap">StabMap</a></code>, <code><a href="#topic+SensMapUI">SensMapUI</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example of external preference mapping performed from PCA and quadratic
# regression model.
 data(hedo_biscuit)
 data(sens_biscuit)
# Make data compatible to the form of X, Y and S
 rownames(hedo_biscuit)=hedo_biscuit[,1]
 Y=hedo_biscuit[,-1]
 library(doBy)
 juge_senso_bisc&lt;- summaryBy(. ~ produit + juge,
 data=sens_biscuit, FUN=c(mean),keep.names = TRUE,na.rm=TRUE)
 S=juge_senso_bisc[,-3]
 prod_bisc=summaryBy(. ~ produit, data=sens_biscuit,
 FUN=c(mean),keep.names = TRUE,na.rm=TRUE)
 rownames(prod_bisc)= prod_bisc[,1]
 X= prod_bisc[,-c(1:3)]
 # Map drawing in 2D
 map_QR= PrefMap(Y,X,S,axis=c(1,2),
 formula="~I(F1*F1)+I(F2*F2)+F1*F2",
 dimredumethod=1, predmodel=1, nbpoints=50,pred.na =FALSE,
 graph.pred =FALSE, graph.map =TRUE, graph.map.3D =FALSE )
 # if pred.na= TRUE total number of NA in each point of the grid-map
 nb.QR=map_QR$occur.NA
 # if pred.na=TRUE List of positions of predictions outside [0:10]
 pos.QR=map_QR$pos.NA
 # if pred.na=TRUE total number of predictions outside the liking scores space
 occur.QR=map_QR$occur.NA
</code></pre>

<hr>
<h2 id='sens_biscuit'>
Sensory data
</h2><span id='topic+sens_biscuit'></span>

<h3>Description</h3>

<p>A sensory evaluation was organized in Pakistan to characterize
8 cookies products with a set of 23 quantitative sensory
attributes by 12 trained panelists at 2 tasting sessions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sens_biscuit
</code></pre>


<h3>Format</h3>


<dl>
<dt><code>seance</code></dt><dd>
<p>factor : the tasting sessions 1 and 2
</p>
</dd>
<dt><code>juge</code></dt><dd>
<p>factor : numbering the 12 assessors
</p>
</dd>
<dt><code>produit</code></dt><dd>
<p>factor : numbering the 8 products
</p>
</dd>
<dt><code>23 attributes</code></dt><dd>
<p>quantitative variables : characteristics of products
</p>
</dd>
</dl>


<h3>Value</h3>

<p>No return value, called for data loading</p>


<h3>Source</h3>

<p>Francois Husson data sets
</p>


<h3>References</h3>

<p>Pages et al. Sensory analysis comparison of eight biscuits
by French and Pakistani panels, 2007, Journal of Sensory Studies 22(6), 665-686.7
</p>

<hr>
<h2 id='SensMapUI'>Graphical User Interface for SensMap package</h2><span id='topic+SensMapUI'></span>

<h3>Description</h3>

<p>launches a 'shiny' application that provides a Graphical User Interface (GUI) for the functions included in the SensMap package as well as a comparative tool of fit models performance using several criteria. Basic analysis such as characterization of products, panelists and sessions likewise consumers segmentation are also available. The application includes data import in different formats, plot displays and results in tables as well as downloading them. This application is very helpful for practitioners and researchers in sensory analysis field.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SensMapUI()
</code></pre>


<h3>Value</h3>

<p>No return value, called for launching application</p>


<h3>Author(s)</h3>

<p>Ibtihel Rebhi, Dhafer Malouche
</p>


<h3>See Also</h3>

<p><a href="#topic+PrefMap">PrefMap</a>, <a href="#topic+SmoothMap">SmoothMap</a>, <a href="#topic+StabMap">StabMap</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(SensMap)
SensMapUI()


## End(Not run)
</code></pre>

<hr>
<h2 id='SmoothMap'>Smoothed version of External Preference Mapping by LOESS</h2><span id='topic+SmoothMap'></span>

<h3>Description</h3>

<p>a function that provides a smoothed version of external preference mapping by performing a locally weighted regression smoothing
(LOESS) on the curves of preference level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SmoothMap(Y,X,S,axis=c(1,2),
formula,dimredumethod=1,
predmodel=1,pred.na =FALSE,span=.5,
degree=2, graphpred=FALSE, drawmap=TRUE, dmap.loess=FALSE,
nbpoints=50)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="SmoothMap_+3A_y">Y</code></td>
<td>
<p>a data frame in which each row represents a product
and each column represents hedonic scores of a
given consumer for the products.</p>
</td></tr>
<tr><td><code id="SmoothMap_+3A_x">X</code></td>
<td>
<p>a data frame in which each row represents a product and
each column represents evaluations of a given sensory
or physico-chemical attribute for the products.</p>
</td></tr>
<tr><td><code id="SmoothMap_+3A_s">S</code></td>
<td>
<p>a data frame crossing products and panelists evaluations
of a given sensory or physico-chemical attribute for the product.
It's required when choosing Canonical Analysis as dimension reduction method.</p>
</td></tr>
<tr><td><code id="SmoothMap_+3A_axis">axis</code></td>
<td>
<p>a length 2 vector specifying the components of dimension reduction method to plot.</p>
</td></tr>
<tr><td><code id="SmoothMap_+3A_formula">formula</code></td>
<td>
<p>a formula expression to be introduced. If predmodel=1, it corresponds to four polynomial regression models performed using
<code><a href="stats.html#topic+lm">lm</a></code> : Quadratic model, the corresponding
formula = &quot;~I(F1*F1)+I(F2*F2)+F1*F2&quot;. Vector model,
the formula = &quot;~ F1 + F2&quot;. Circular model,
the formula=&quot;~ F1 + F2 + (F1*F1 + F2*F2)&quot;. Elliptic model,
the formula = &quot;~I(F1*F1)+I(F2*F2)&quot;. If predmodel= 2, Generalized Additive models (GAM) structure performed using <code><a href="mgcv.html#topic+gam">gam</a></code>, proposed formula=&quot;~s(F1,k=3)+s(F2,k=3)&quot;. If predmodel= 3, Generalized Linear Models(GLM) structure performed using <code><a href="stats.html#topic+glm">glm</a></code>, proposed
formula = &quot;~I(F1*F1)+ I(F2*F2)+ F1*F2&quot;. If predmodel= 4, Bayes structure performed using <code><a href="MCMCpack.html#topic+MCMCregress">MCMCregress</a></code>, proposed
formula=&quot;~I(F1*F1)+I(F2*F2)+F1*F2&quot;.</p>
</td></tr>
<tr><td><code id="SmoothMap_+3A_dimredumethod">dimredumethod</code></td>
<td>
<p>1 is assignedd to Principal Component Analysis(PCA). If 2, Multiple Factor Analysis(MFA). If 3, Canonical Analysis(CA).</p>
</td></tr>
<tr><td><code id="SmoothMap_+3A_predmodel">predmodel</code></td>
<td>
<p>the type of prediction model :
If predmodel = 1 : Polynomial regression models.
If predmodel = 2 : Generalized Additive models (GAM).
If predmodel = 3 : Generalized Linear Models (GLM).
If predmodel = 4 : Bayesian models.</p>
</td></tr>
<tr><td><code id="SmoothMap_+3A_pred.na">pred.na</code></td>
<td>
<p>boolean, if TRUE, predictions outside the set of liking scores are removed (generally [0:10]), if FALSE, we keep all predictions in and outside the set of liking scores.</p>
</td></tr>
<tr><td><code id="SmoothMap_+3A_span">span</code></td>
<td>
<p>the parameter which controls the degree of smoothing by LOESS.</p>
</td></tr>
<tr><td><code id="SmoothMap_+3A_degree">degree</code></td>
<td>
<p>the degree of the polynomials to be used, normally
between 1 and 2.</p>
</td></tr>
<tr><td><code id="SmoothMap_+3A_graphpred">graphpred</code></td>
<td>
<p>boolean, if TRUE, plot of smoothed surface prediction of all consumers is posted.</p>
</td></tr>
<tr><td><code id="SmoothMap_+3A_drawmap">drawmap</code></td>
<td>
<p>boolean, if TRUE, smoothed version of extrenal preference mapping in 2 dimensions is posted.</p>
</td></tr>
<tr><td><code id="SmoothMap_+3A_dmap.loess">dmap.loess</code></td>
<td>
<p>boolean, if TRUE, smoothed version of extrenal preference mapping is 3 dimensions is posted.</p>
</td></tr>
<tr><td><code id="SmoothMap_+3A_nbpoints">nbpoints</code></td>
<td>
<p>an integer. The number of points in th grid-point of the discretized plan of the map provided with the two first components. By default 50.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>z.loess object of class loess obtained from
fitting a polynomial surface determined by
the components of dimension reduction method as predictors
and consumers predictions as explained variable.
</p>
<p>m.loess object of class loess obtained from
fitting a polynomial surface determined by
the components of dimension reduction method as predictors
and consumers preferences as explained variable.
</p>
<p>plots of the smoothed prediction surface, smoothed external preference mapping in 2D and in 3D
</p>


<h3>Author(s)</h3>

<p>Ibtihel Rebhi, Dhafer Malouche
</p>


<h3>See Also</h3>

<p><code><a href="#topic+PrefMap">PrefMap</a></code>, <code><a href="#topic+StabMap">StabMap</a></code>,
<code><a href="#topic+SensMapUI">SensMapUI</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(hedo_biscuit)
 data(sens_biscuit)
# Make data compatible to the form of X, Y and S
 rownames(hedo_biscuit)=hedo_biscuit[,1]
 Y=hedo_biscuit[,-1]
 library(doBy)
 juge_senso_bisc&lt;- summaryBy(. ~ produit + juge,
 data=sens_biscuit, FUN=c(mean),keep.names = TRUE,na.rm=TRUE)
 S=juge_senso_bisc[,-3]
 prod_bisc=summaryBy(. ~ produit, data=sens_biscuit,
 FUN=c(mean),keep.names = TRUE,na.rm=TRUE)
 rownames(prod_bisc)= prod_bisc[,1]
 X= prod_bisc[,-c(1:3)]
# Example of smoothed version of external preference mapping for quadratic
#  model.
# Smap= SmoothMap(Y,X,S, axis=c(1,2),
# formula="~I(F1*F1)+I(F2*F2)+F1*F2",
# dimredumethod=1,predmodel=1,span=.5,degree=2,
 #graphpred=FALSE, drawmap=TRUE, dmap.loess=FALSE)
# results of predictions by LOESS smoothing
#  Smap$z.loess
#  Smap$m.loess
</code></pre>

<hr>
<h2 id='StabMap'>Evaluation of External Prefernce mapping stability</h2><span id='topic+StabMap'></span>

<h3>Description</h3>

<p>A function that introduces a comparison approach of maps stability from different strategies before and after LOESS smoothing. It is based on the calculation of an average squared distance of preferences (ASDP) between maps obtained from subsamples of hedonic data through a resampling approach. The strategy with an overall ASDP lower than the other is preferred.</p>


<h3>Usage</h3>

<pre><code class='language-R'>StabMap(Y,X,S,n,axis=c(1,2),formula_lm,
formula_gam,formula_glm, dimredumethod=1,
pred.na=FALSE,nbpoints=50)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="StabMap_+3A_y">Y</code></td>
<td>
<p>a data frame in which each row represents a product
and each column represents hedonic scores of a
given consumer for the products.</p>
</td></tr>
<tr><td><code id="StabMap_+3A_x">X</code></td>
<td>
<p>a data frame in which each row represents a product and
each column represents evaluations of a given sensory
or physico-chemical attribute for the products.</p>
</td></tr>
<tr><td><code id="StabMap_+3A_s">S</code></td>
<td>
<p>a data frame crossing products and panelists evaluations
of a given sensory or physico-chemical attribute for the products.
It's required when choosing Canonical Analysis ad dimension reduction method.</p>
</td></tr>
<tr><td><code id="StabMap_+3A_n">n</code></td>
<td>
<p>number of selection of random samples from hedonic data for which maps are compared before and after LOESS smoothing.</p>
</td></tr>
<tr><td><code id="StabMap_+3A_axis">axis</code></td>
<td>
<p>a length 2 vector specifying the components of dimension reduction method to plot.</p>
</td></tr>
<tr><td><code id="StabMap_+3A_formula_lm">formula_lm</code></td>
<td>
<p>a formula expression for polynomial regression model
for example formula_lm = &quot;~I(F1*F1)+I(F2*F2)+F1*F2&quot;.</p>
</td></tr>
<tr><td><code id="StabMap_+3A_formula_gam">formula_gam</code></td>
<td>
<p>a formula expression for GAM model fitting
for example formula_gam = &quot;~s(F1,k=3)+s(F2,k=3)&quot;.</p>
</td></tr>
<tr><td><code id="StabMap_+3A_formula_glm">formula_glm</code></td>
<td>
<p>a formula expression for GLM model fitting
for example formula_glm = &quot;~I(F1*F1)+I(F2*F2)+F1*F2&quot;.</p>
</td></tr>
<tr><td><code id="StabMap_+3A_dimredumethod">dimredumethod</code></td>
<td>
<p>1 is assigned to Principal Component Analysis(PCA). If 2, Multiple Factor Analysis(MFA). If 3, Canonical Analysis(CA).</p>
</td></tr>
<tr><td><code id="StabMap_+3A_pred.na">pred.na</code></td>
<td>
<p>boolean, if TRUE, predictions outside the set of liking scores are removed, if FALSE, all predections are kept in and out the set of liking scores.</p>
</td></tr>
<tr><td><code id="StabMap_+3A_nbpoints">nbpoints</code></td>
<td>
<p>an integer. The number of points in the grid-point of the discretized plan. By default = 50.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>sum squared distances of preferences computed between maps before and after LOESS smoothing for each prediction model.</p>


<h3>Author(s)</h3>

<p>Ibtihel Rebhi, Dhafer Malouche
</p>


<h3>See Also</h3>

<p><code><a href="#topic+PrefMap">PrefMap</a></code>, <code><a href="#topic+SmoothMap">SmoothMap</a></code>,<code><a href="#topic+SensMapUI">SensMapUI</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(hedo_biscuit)
 data(sens_biscuit)
# Make data compatible to the form of X, Y and S
 rownames(hedo_biscuit)=hedo_biscuit[,1]
 Y=hedo_biscuit[,-1]
 library(doBy)
 juge_senso_bisc&lt;- summaryBy(. ~ produit + juge,
 data=sens_biscuit, FUN=c(mean),keep.names = TRUE,na.rm=TRUE)
 S=juge_senso_bisc[,-3]
 prod_bisc=summaryBy(. ~ produit, data=sens_biscuit,
 FUN=c(mean),keep.names = TRUE,na.rm=TRUE)
 rownames(prod_bisc)= prod_bisc[,1]
 X= prod_bisc[,-c(1:3)]
# Results of comparing maps stability
#res_stab= StabMap(Y,X,S,n=2,axis=c(1,2),
#formula_lm="~I(F1*F1)+I(F2*F2)+F1*F2",
#formula_gam="~s(F1,k=3)+s(F2,k=3)",
#formula_glm="~I(F1*F1)+I(F2*F2)+F1*F2",
#dimredumethod=1, nbpoints=50)
#library(reshape2)
#res_stab=melt(res_stab)
#colnames(res_stab)=c("prob", "var", "value")
# Visualization of stability results
#library(ggplot2)
#gr&lt;-ggplot(res_stab,aes(x=prob,y=value,fill=prob))+geom_boxplot()+xlab("Methods")+
#ylab("Average Squared Distance of Preferences")
#gr&lt;-gr+theme_bw()+theme(legend.position = "none",
#    axis.text.x = element_text(angle = 90))
#gr
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
