<!DOCTYPE html><html><head><title>Help for package readabs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {readabs}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#abs_api'><p>ABS.Stat API functions</p></a></li>
<li><a href='#check_latest_date'><p>Get date of most recent observation(s) in ABS time series</p></a></li>
<li><a href='#check_lfs_grossflows'><p>Internal function to check if the data frame returned by read_lfs_grossflows()</p>
contains expected unique values in key columns</a></li>
<li><a href='#download_abs_data_cube'><p>Experimental helper function to download ABS data cubes that are not compatible with read_abs.</p></a></li>
<li><a href='#download_previous_payrolls'><p>This function is temporarily necessary while the readabs maintainer</p>
attempts to resolve an issue with the ABS. The ABS as at late March 2021
stopped including Table 5 of the Weekly Payrolls release with each new
release of the data. This function finds the link from the previous
release and attemps to download it. This function will no longer be required
if/when the ABS reverts to the previous release arrangements. The function
is internal and is called by <code>read_payrolls()</code>.</a></li>
<li><a href='#extract_abs_sheets'><p>Extract data sheets from an ABS timeseries workbook saved locally as an</p>
Excel file.</a></li>
<li><a href='#fast_str_squish'><p>Very slightly faster version of stringr's str_squish()</p></a></li>
<li><a href='#get_available_lfs_cubes'><p>Show the available Labour Force, Australia, detailed data cubes that can be</p>
downloaded</a></li>
<li><a href='#read_abs'><p>Download, extract, and tidy ABS time series spreadsheets</p></a></li>
<li><a href='#read_abs_data'><p>Extracts ABS time series data from local Excel spreadsheets and converts to</p>
long format.</a></li>
<li><a href='#read_abs_local'><p>Read and tidy locally-saved ABS time series spreadsheet(s)</p></a></li>
<li><a href='#read_abs_metadata'><p>Extracts ABS series metadata directly from Excel spreadsheets and</p>
converts to long-form.</a></li>
<li><a href='#read_abs_url'><p>Download and import an ABS time series spreadsheet from a given URL</p></a></li>
<li><a href='#read_awe'><p>read_awe</p></a></li>
<li><a href='#read_cpi'><p>Download a tidy tibble containing the Consumer Price Index from the ABS</p></a></li>
<li><a href='#read_job_mobility'><p>Download and tidy ABS Job Mobility tables</p></a></li>
<li><a href='#read_lfs_datacube'><p>Convenience function to download and tidy data cubes from</p>
ABS Labour Force, Australia, Detailed.</a></li>
<li><a href='#read_lfs_grossflows'><p>Download, import and tidy 'gross flows' data cube</p>
from the monthly ABS Labour Force survey.</a></li>
<li><a href='#read_payrolls'><p>Download and tidy ABS payroll jobs and wages data</p></a></li>
<li><a href='#scrape_abs_catalogues'><p>Helper function for <code>download_abs_data_cube</code> to scrape the available catalogues from the ABS website.</p></a></li>
<li><a href='#search_catalogues'><p>Search for ABS catalogues that match a string</p></a></li>
<li><a href='#search_files'><p>Search for a file within an ABS catalogue</p></a></li>
<li><a href='#separate_series'><p>Separate the series column in a tidy ABS time series data frame</p></a></li>
<li><a href='#show_available_catalogues'><p>Helper function for <code>download_abs_data_cube</code> to show the available catalogues.</p></a></li>
<li><a href='#show_available_files'><p>Helper function to show the files available in a particular catalogue number.</p></a></li>
<li><a href='#tidy_abs'><p>Tidy ABS time series data.</p></a></li>
<li><a href='#tidy_abs_list'><p>Tidy multiple dataframes of ABS time series data contained in a list.</p></a></li>
<li><a href='#tidy_awe'><p>Internal function to tidy a dataframe from ABS 6302</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Download and Tidy Time Series Data from the Australian Bureau of
Statistics</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.16</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Matt Cowgill &lt;mattcowgill@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Downloads, imports, and tidies time series data from the 
    Australian Bureau of Statistics <a href="https://www.abs.gov.au/">https://www.abs.gov.au/</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>Imports:</td>
<td>readxl (&ge; 1.2.0), dplyr (&ge; 0.8.0), hutils (&ge; 1.5.0), fst,
purrr, tidyr (&ge; 1.0.0), stringi, tools, glue, httr, rvest,
xml2, rlang, labelled</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/mattcowgill/readabs">https://github.com/mattcowgill/readabs</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/mattcowgill/readabs/issues">https://github.com/mattcowgill/readabs/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, markdown, testthat (&ge; 2.1.0), ggplot2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-05-27 05:18:08 UTC; r837499</td>
</tr>
<tr>
<td>Author:</td>
<td>Matt Cowgill <a href="https://orcid.org/0000-0003-0422-3300"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Zoe Meers [aut],
  Jaron Lee [aut],
  David Diviny [aut],
  Hugh Parsonage [ctb],
  Kinto Behr [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-05-27 08:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='abs_api'>ABS.Stat API functions</h2><span id='topic+abs_api'></span><span id='topic+read_api_dataflows'></span><span id='topic+read_api'></span><span id='topic+read_api_url'></span><span id='topic+read_api_datastructure'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>These experimental functions provide a minimal interface to the ABS.Stat API.
</p>
<p>More information on the ABS.Stat API can be found
on the <a href="https://www.abs.gov.au/about/data-services/application-programming-interfaces-apis/data-api-user-guide/using-api">ABS website</a>
</p>
<p>Note that an ABS.Stat 'dataflow' is like a table. A 'datastructure'
contains metadata that describes the variables in the dataflow. To load data
from the ABS.Stat API, you need to either:
</p>

<ul>
<li><p> Using <code>read_api_dataflows()</code> you can get information on the available dataflows
</p>
</li>
<li><p> Using <code>read_api_datastructure()</code> you can get metadata relating to a
specific dataflow, including the variables available in each dataflow
</p>
</li>
<li><p> Using <code>read_api()</code> you can get the data belonging to a given dataflow.
</p>
</li>
<li><p> Using <code>read_api_url()</code> you can get the data for a given query url
generated using the <a href="https://explore.data.abs.gov.au/">online data viewer</a>.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>read_api_dataflows()

read_api(
  id,
  datakey = NULL,
  start_period = NULL,
  end_period = NULL,
  version = NULL
)

read_api_url(url)

read_api_datastructure(id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="abs_api_+3A_id">id</code></td>
<td>
<p>A dataflow id. Use <code>read_api_dataflows()</code> to obtain a dataframe
listing available dataflows.</p>
</td></tr>
<tr><td><code id="abs_api_+3A_datakey">datakey</code></td>
<td>
<p>A named list matching filter variables to codes. All variables
with a <code>position</code> in the datastructure are filterable. Use
<code>read_api_datastructure()</code> to obtain information about the variables in
a dataflow and the values of that variable.</p>
</td></tr>
<tr><td><code id="abs_api_+3A_start_period">start_period</code></td>
<td>
<p>The start period (used to filter by time). This is
inclusive. The supported formats are:
</p>

<ul>
<li> <p><code>"YYYY"</code> for annual data (e.g. 2019)
</p>
</li>
<li> <p><code>"YYYY-S[1-2]"</code> for semi-annual data (e.g. 2019-S1)
</p>
</li>
<li> <p><code>"YYYY-Q[1-4]"</code> for quarterly data (e.g. 2019-Q1)
</p>
</li>
<li> <p><code>"YYYY-MM[01-12]"</code> for monthly data (e.g. 2019-01)
</p>
</li>
<li> <p><code>"YYYY-W[01-53]"</code> for weekly data (e.g. 2019-W01)
</p>
</li>
<li> <p><code>"YYYY-MM-DD"</code> for daily and business data (e.g. 2019-01-01)
</p>
</li></ul>
</td></tr>
<tr><td><code id="abs_api_+3A_end_period">end_period</code></td>
<td>
<p>The end period (used to filter on time). This is inclusive.
The supported formats are the same as for <code>start_period</code></p>
</td></tr>
<tr><td><code id="abs_api_+3A_version">version</code></td>
<td>
<p>A version number, if unspecified the latest version of the
dataset is used. Use <code>read_api_dataflows()</code> to see
available dataflow versions.</p>
</td></tr>
<tr><td><code id="abs_api_+3A_url">url</code></td>
<td>
<p>A complete query url</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that the API enforces a reasonably strict gateway timeout policy. This
means that, if you're trying to access a reasonably large dataset, you will
need to filter it on the server side using the <code>datakey</code>. You might like to
review the data manually via the <a href="https://explore.data.abs.gov.au/">ABS website</a>
to figure out what subset of the data you require.
</p>
<p>Note, furthermore, that the datastructure contains a complete codebook for
the variables appearing in the relevant dataflow. Since some variables are
shared across multiple dataflows, this means that the datastructure
corresponding to a particular <code>id</code> may contain values for a given variable
which are not in the corresponding dataflow.
</p>


<h3>Value</h3>

<p>A data.frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# List available dataflows
read_api_dataflows()

# Say we want the "Estimated resident population, Country of birth"
# data flow, with the id ERP_COB. We load the data like this:
# Get full data set for a given flow by providing id and start period:
read_api("ERP_COB", start_period = 2020)

# In some cases, loading a whole dataflow (as above) won't work.
# For eg., the `ABS_C16_T10_SA` dataflow is very large,
# so the gateway will timeout if we try to collect the full data set
try(read_api("ABS_C16_T10_SA"))

# We need to filter the dataflow before downlaoding it.
# To figure out how to filter it, we get metadata ('datastructure').
ds &lt;- read_api_datastructure("ABS_C16_T10_SA")

# The `asgs_2016` code for 'Australia' is 0
ds[ds$var == "asgs_2016" &amp; ds$label == "Australia", ]

# The `sex_abs` code for 'Persons' (i.e. all persons) is 3
ds[ds$var == "sex_abs" &amp; ds$label == "Persons", ]

# So we have:
x &lt;- read_api("ABS_C16_T10_SA", datakey = list(asgs_2016 = 0, sex_abs = 3))
unique(x["asgs_2016"]) # Confirming only 'Australia' level records came through
unique(x["sex_abs"]) # Confirming only 'Persons' level records came through

# Please note however that not all values in the datastructure necessarily
# appear in the data. You get 404s in this case
ds[ds$var == "regiontype" &amp; ds$label == "Destination Zones", ]
try(read_api("ABS_C16_T10_SA", datakey = list(regiontype = "DZN")))

# If you already have a query url, then use `read_api_url()`
wpi_url &lt;- ""https://api.data.abs.gov.au/data/ABS,WPI/all""
read_api_url(wpi_url)

## End(Not run)
</code></pre>

<hr>
<h2 id='check_latest_date'>Get date of most recent observation(s) in ABS time series</h2><span id='topic+check_latest_date'></span>

<h3>Description</h3>

<p>This function returns the most recent observation date for a specified ABS
time series catalogue number (as a whole), individual tables, or series IDs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_latest_date(cat_no = NULL, tables = "all", series_id = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_latest_date_+3A_cat_no">cat_no</code></td>
<td>
<p>ABS catalogue number, as a string, including the extension.
For example, &quot;6202.0&quot;.</p>
</td></tr>
<tr><td><code id="check_latest_date_+3A_tables">tables</code></td>
<td>
<p>numeric. Time series tables in <code style="white-space: pre;">&#8288;cat_no`` to download and extract. Default is "all", which will read all time series in &#8288;</code>cat_no<code style="white-space: pre;">&#8288;. Specify &#8288;</code>tables<code style="white-space: pre;">&#8288;to download and import specific tables(s) - eg.&#8288;</code>tables = 1<code>or</code>tables = c(1, 5)'.</p>
</td></tr>
<tr><td><code id="check_latest_date_+3A_series_id">series_id</code></td>
<td>
<p>(optional) character. Supply an ABS unique time series
identifier (such as &quot;A2325807L&quot;) to get only that series.
This is an alternative to specifying <code>cat_no</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Where the individual time series in your request
have multiple dates, only the most recent will be returned.
</p>


<h3>Value</h3>

<p>Date vector of length one. Date corresponds to the most recent
observation date for any of the time series in the table(s) requested.
observation date for any of the time series in the table(s) requested.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Check a whole catalogue number; return the latest release date for any
# time series in the number

check_latest_date("6345.0")

# Return latest release date for a table within a catalogue number  - note
# the function will return the release date
# of the most-recently-updated series within the tables
check_latest_date("6345.0", tables = 1)

# Or for multiple tables - note the function will return the release date
# of the most-recently-updated series within the tables
check_latest_date("6345.0", tables = c("1", "5a"))

# Or for an individual time series
check_latest_date(series_id = "A2713849C")

## End(Not run)

</code></pre>

<hr>
<h2 id='check_lfs_grossflows'>Internal function to check if the data frame returned by read_lfs_grossflows()
contains expected unique values in key columns</h2><span id='topic+check_lfs_grossflows'></span>

<h3>Description</h3>

<p>Internal function to check if the data frame returned by read_lfs_grossflows()
contains expected unique values in key columns
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_lfs_grossflows(df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_lfs_grossflows_+3A_df">df</code></td>
<td>
<p>data frame containing gross flows data</p>
</td></tr>
</table>

<hr>
<h2 id='download_abs_data_cube'>Experimental helper function to download ABS data cubes that are not compatible with read_abs.</h2><span id='topic+download_abs_data_cube'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
<code>download_abs_data_cube()</code> downloads the latest ABS data cubes based on the catalogue name (from the website url) and cube.
The function downloads the file to disk.
</p>
<p>Unlike <code>read_abs()</code>, this function doesn't import or tidy the data.
Convenience functions are provided to import and tidy key data cubes; see
<code>?read_payrolls()</code> and <code>?read_lfs_grossflows()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_abs_data_cube(
  catalogue_string,
  cube,
  path = Sys.getenv("R_READABS_PATH", unset = tempdir())
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="download_abs_data_cube_+3A_catalogue_string">catalogue_string</code></td>
<td>
<p>ABS catalogue name as a string from the ABS website.
For example, Labour Force, Australia, Detailed is &quot;labour-force-australia-detailed&quot;.
The possible catalogues can be obtained using the helper function <code>show_available_catalogues()</code>;
or search these catalogues using <code>search_catalogues()</code>,</p>
</td></tr>
<tr><td><code id="download_abs_data_cube_+3A_cube">cube</code></td>
<td>
<p>character. A character string that is either the complete filename or (uniquely) in the filename of the data cube you want to
download, e.g. &quot;EQ09&quot;. The available filenames can be obtained using the helper function <code>get_available_files()</code></p>
</td></tr>
<tr><td><code id="download_abs_data_cube_+3A_path">path</code></td>
<td>
<p>Local directory in which downloaded files should be stored. By default, <code>path</code>
takes the value set in the environment variable &quot;R_READABS_PATH&quot;.
If this variable is not set, any files downloaded
will be stored in a temporary directory (<code>tempdir()</code>).
See <code>Details</code> below for  more information.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>download_abs_data_cube()</code> downloads an Excel spreadsheet from the ABS.
</p>
<p>The file need to be saved somewhere on your disk.
This local directory can be controlled using the <code>path</code> argument to
<code>read_abs()</code>. If the <code>path</code> argument is not set, <code>read_abs()</code> will store
the files in a directory set in the &quot;R_READABS_PATH&quot; environment variable.
If this variable isn't set, files will be saved in a temporary directory.
</p>
<p>To check the value of the &quot;R_READABS_PATH&quot; variable, run
<code>Sys.getenv("R_READABS_PATH")</code>. You can set the value of this variable
for a single session using <code>Sys.setenv(R_READABS_PATH = &lt;path&gt;)</code>.
If you would like to change this variable for all future R sessions, edit
your <code>.Renviron</code> file and add <code>R_READABS_PATH = &lt;path&gt;</code> line.
The easiest way to edit this file is using <code>usethis::edit_r_environ()</code>.
</p>
<p>The filepath is returned invisibly which enables piping to <code>unzip()</code> or <code>readxl::read_excel</code>.
</p>


<h3>See Also</h3>

<p>Other data cube functions: 
<code><a href="#topic+search_catalogues">search_catalogues</a>()</code>,
<code><a href="#topic+show_available_catalogues">show_available_catalogues</a>()</code>,
<code><a href="#topic+show_available_files">show_available_files</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
download_abs_data_cube(
  catalogue_string = "labour-force-australia-detailed",
  cube = "EQ09"
)

## End(Not run)

</code></pre>

<hr>
<h2 id='download_previous_payrolls'>This function is temporarily necessary while the readabs maintainer
attempts to resolve an issue with the ABS. The ABS as at late March 2021
stopped including Table 5 of the Weekly Payrolls release with each new
release of the data. This function finds the link from the previous
release and attemps to download it. This function will no longer be required
if/when the ABS reverts to the previous release arrangements. The function
is internal and is called by <code>read_payrolls()</code>.</h2><span id='topic+download_previous_payrolls'></span>

<h3>Description</h3>

<p>This function is temporarily necessary while the readabs maintainer
attempts to resolve an issue with the ABS. The ABS as at late March 2021
stopped including Table 5 of the Weekly Payrolls release with each new
release of the data. This function finds the link from the previous
release and attemps to download it. This function will no longer be required
if/when the ABS reverts to the previous release arrangements. The function
is internal and is called by <code>read_payrolls()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_previous_payrolls(cube_name, path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="download_previous_payrolls_+3A_cube_name">cube_name</code></td>
<td>
<p>eg. DO004 for table 4</p>
</td></tr>
<tr><td><code id="download_previous_payrolls_+3A_path">path</code></td>
<td>
<p>Directory in which to download payrolls cube</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing two elements: <code>result</code> (will contain path + filename
to downloaded file if download was successful); and <code>error</code> (NULL if file
downloaded successfully; character otherwise).
</p>

<hr>
<h2 id='extract_abs_sheets'>Extract data sheets from an ABS timeseries workbook saved locally as an
Excel file.</h2><span id='topic+extract_abs_sheets'></span>

<h3>Description</h3>

<p>Note that this function will not tidy the data for you.
Use <code>read_abs_local()</code>to import and tidy data from local ABS time series
spreadsheets or <code>read_abs()</code> to download, import and tidy ABS time series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_abs_sheets(
  filename,
  table_title = NULL,
  path = Sys.getenv("R_READABS_PATH", unset = tempdir())
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_abs_sheets_+3A_filename">filename</code></td>
<td>
<p>Filename for an ABS time series spreadsheet (as string)</p>
</td></tr>
<tr><td><code id="extract_abs_sheets_+3A_table_title">table_title</code></td>
<td>
<p>String giving the full title of the ABS table, such as
&quot;Table 1. Employed persons, Australia&quot;</p>
</td></tr>
<tr><td><code id="extract_abs_sheets_+3A_path">path</code></td>
<td>
<p>Local directory in which an ABS time series is stored. Default is
<code>Sys.getenv("R_READABS_PATH", unset = tempdir())</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='fast_str_squish'>Very slightly faster version of stringr's str_squish()</h2><span id='topic+fast_str_squish'></span>

<h3>Description</h3>

<p>Very slightly faster version of stringr's str_squish()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fast_str_squish(string)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fast_str_squish_+3A_string">string</code></td>
<td>
<p>A string to squish (remove whitespace)</p>
</td></tr>
</table>

<hr>
<h2 id='get_available_lfs_cubes'>Show the available Labour Force, Australia, detailed data cubes that can be
downloaded</h2><span id='topic+get_available_lfs_cubes'></span>

<h3>Description</h3>

<p>Show the available Labour Force, Australia, detailed data cubes that can be
downloaded
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_available_lfs_cubes()
</code></pre>


<h3>Details</h3>

<p>Intended to be used with <code>read_lfs_datacube()</code>. Call
<code>read_lfs_datacube()</code> interactively, find the table of interest
(eg. &quot;LM1&quot;), then use <code>read_lfs_datacube()</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
get_available_lfs_cubes()

</code></pre>

<hr>
<h2 id='read_abs'>Download, extract, and tidy ABS time series spreadsheets</h2><span id='topic+read_abs'></span><span id='topic+read_abs_series'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>
<p><code>read_abs()</code> downloads ABS time series spreadsheets,
then extracts the data from those spreadsheets,
then tidies the data. The result is a single
data frame (tibble) containing tidied data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_abs(
  cat_no = NULL,
  tables = "all",
  series_id = NULL,
  path = Sys.getenv("R_READABS_PATH", unset = tempdir()),
  metadata = TRUE,
  show_progress_bars = TRUE,
  retain_files = TRUE,
  check_local = TRUE,
  release_date = "latest"
)

read_abs_series(series_id, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_abs_+3A_cat_no">cat_no</code></td>
<td>
<p>ABS catalogue number, as a string, including the extension.
For example, &quot;6202.0&quot;.</p>
</td></tr>
<tr><td><code id="read_abs_+3A_tables">tables</code></td>
<td>
<p>numeric. Time series tables in <code style="white-space: pre;">&#8288;cat_no`` to download and extract. Default is "all", which will read all time series in &#8288;</code>cat_no<code style="white-space: pre;">&#8288;. Specify &#8288;</code>tables<code style="white-space: pre;">&#8288;to download and import specific tables(s) - eg.&#8288;</code>tables = 1<code>or</code>tables = c(1, 5)'.</p>
</td></tr>
<tr><td><code id="read_abs_+3A_series_id">series_id</code></td>
<td>
<p>(optional) character. Supply an ABS unique time series
identifier (such as &quot;A2325807L&quot;) to get only that series.
This is an alternative to specifying <code>cat_no</code>.</p>
</td></tr>
<tr><td><code id="read_abs_+3A_path">path</code></td>
<td>
<p>Local directory in which downloaded ABS time series
spreadsheets should be stored. By default, <code>path</code> takes the value set in the
environment variable &quot;R_READABS_PATH&quot;. If this variable is not set,
any files downloaded by read_abs()  will be stored in a temporary directory
(<code>tempdir()</code>). See <code>Details</code> below for
more information.</p>
</td></tr>
<tr><td><code id="read_abs_+3A_metadata">metadata</code></td>
<td>
<p>logical. If <code>TRUE</code> (the default), a tidy data frame including
ABS metadata (series name, table name, etc.) is included in the output. If
<code>FALSE</code>, metadata is dropped.</p>
</td></tr>
<tr><td><code id="read_abs_+3A_show_progress_bars">show_progress_bars</code></td>
<td>
<p>TRUE by default. If set to FALSE, progress bars
will not be shown when ABS spreadsheets are downloading.</p>
</td></tr>
<tr><td><code id="read_abs_+3A_retain_files">retain_files</code></td>
<td>
<p>when TRUE (the default), the spreadsheets downloaded
from the ABS website will be saved in the directory specified with <code>path</code>.
If set to <code>FALSE</code>, the files will be stored in a temporary directory.</p>
</td></tr>
<tr><td><code id="read_abs_+3A_check_local">check_local</code></td>
<td>
<p>If <code>TRUE</code>, the default, local <code>fst</code> files are used,
if present.</p>
</td></tr>
<tr><td><code id="read_abs_+3A_release_date">release_date</code></td>
<td>
<p>Either <code>"latest"</code> or a string coercible to a date, such as
<code>"2022-02-01"</code>. If <code>"latest"</code>, the latest release of the requested data will
be returned. If a date, (eg. <code>"2022-02-01"</code>) <code>read_abs()</code> will
attempt to download the data from that month's release. See <code>Details</code>.</p>
</td></tr>
<tr><td><code id="read_abs_+3A_...">...</code></td>
<td>
<p>Arguments to <code>read_abs_series()</code> are passed to <code>read_abs()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>read_abs_series()</code> is a wrapper around <code>read_abs()</code>, with <code>series_id</code> as
the first argument.
</p>
<p><code>read_abs()</code> downloads spreadsheet(s) from the ABS containing time
series data. These files need to be saved somewhere on your disk.
This local directory can be controlled using the <code>path</code> argument to
<code>read_abs()</code>. If the <code>path</code> argument is not set, <code>read_abs()</code> will store
the files in a directory set in the &quot;R_READABS_PATH&quot; environment variable.
If this variable isn't set, files will be saved in a temporary directory.
</p>
<p>To check the value of the &quot;R_READABS_PATH&quot; variable, run
<code>Sys.getenv("R_READABS_PATH")</code>. You can set the value of this variable
for a single session using <code>Sys.setenv(R_READABS_PATH = &lt;path&gt;)</code>.
If you would like to change this variable for all future R sessions, edit
your <code>.Renviron</code> file and add <code>R_READABS_PATH = &lt;path&gt;</code> line.
The easiest way to edit this file is using <code>usethis::edit_r_environ()</code>.
</p>
<p>Certain corporate networks restrict your ability to download files in an R
session. On some of these networks, the <code>"wininet"</code> method must be used when
downloading files. Users can now specify the method that will be used to
download files by setting the <code>"R_READABS_DL_METHOD"</code> environment variable.
</p>
<p>For example, the following code sets the environment variable for your
current session: s<code>Sys.setenv("R_READABS_DL_METHOD" = "wininet")</code>
You can add <code>"R_READABS_DL_METHOD"</code> to your .Rprofile to have this persist across sessions.
</p>
<p>The <code>release_date</code> argument allows you to download table(s) other than the
latest release. This is useful for examining revisions to time series, or
for obtaining the version of series that were available on a given date.
Note that you cannot supply more than one date to <code>release_date</code>. Note also
that any dates prior to mid-2019 (the exact date varies by series) will fail.
</p>


<h3>Value</h3>

<p>A data frame (tibble) containing the tidied data from the ABS time
series table(s).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Download and tidy all time series spreadsheets
# from the Wage Price Index (6345.0)
## Not run: 
wpi &lt;- read_abs("6345.0")

## End(Not run)

# Download table 1 from the Wage Price Index
## Not run: 
wpi_t1 &lt;- read_abs("6345.0", tables = "1")

## End(Not run)

# Or table 1 as in the Sep 2019 release of the WPI:
## Not run: 
wpi_t1_sep2019 &lt;- read_abs("6345.0", tables = "1", release_date = "2019-09-01")

## End(Not run)

# Or tables 1 and 2a from the WPI
## Not run: 
wpi_t1_t2a &lt;- read_abs("6345.0", tables = c("1", "2a"))

## End(Not run)


# Get two specific time series, based on their time series IDs
## Not run: 
cpi &lt;- read_abs(series_id = c("A2325806K", "A2325807L"))

## End(Not run)

# Get series IDs using the `read_abs_series()` wrapper function
## Not run: 
cpi &lt;- read_abs_series(c("A2325806K", "A2325807L"))

## End(Not run)
</code></pre>

<hr>
<h2 id='read_abs_data'>Extracts ABS time series data from local Excel spreadsheets and converts to
long format.</h2><span id='topic+read_abs_data'></span>

<h3>Description</h3>

<p><code>read_abs_data()</code> is soft deprecated and will be removed in a future version.
Please use <code>read_abs_local()</code> to import and tidy locally-stored
ABS time series spreadsheets, or <code>read_abs()</code> to download, import,
and tidy time series spreadsheets from the ABS website.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_abs_data(path, sheet)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_abs_data_+3A_path">path</code></td>
<td>
<p>Filepath to Excel spreadsheet.</p>
</td></tr>
<tr><td><code id="read_abs_data_+3A_sheet">sheet</code></td>
<td>
<p>Sheet name or number.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Long-format dataframe
</p>

<hr>
<h2 id='read_abs_local'>Read and tidy locally-saved ABS time series spreadsheet(s)</h2><span id='topic+read_abs_local'></span>

<h3>Description</h3>

<p>If you need to download and tidy time series data from the ABS,
use <code>read_abs()</code>. <code>read_abs_local()</code> imports and tidies data
from ABS time series spreadsheets that are already saved to your local drive.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_abs_local(
  cat_no = NULL,
  filenames = NULL,
  path = Sys.getenv("R_READABS_PATH", unset = tempdir()),
  use_fst = TRUE,
  metadata = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_abs_local_+3A_cat_no">cat_no</code></td>
<td>
<p>character; a single catalogue number such as &quot;6202.0&quot;.
When <code>cat_no</code> is specified, all local files in <code>path</code> corresponding to
the specified catalogue number will be imported.
For example, if you run <code>read_abs_local("6202.0")</code>, it will look in
the <code>6202.0</code> sub-folder of <code>path</code> and attempt to load any
.xls and .xlsx files in that location.
If <code style="white-space: pre;">&#8288;cat_no`` is specified, &#8288;</code>filenames' will be ignored.</p>
</td></tr>
<tr><td><code id="read_abs_local_+3A_filenames">filenames</code></td>
<td>
<p>character vector of at least one filename of a
locally-stored ABS time series spreadsheet. For example, &quot;6202001.xls&quot; or
c(&quot;6202001.xls&quot;, &quot;6202005.xls&quot;). Ignored if a value is supplied to <code>cat_no</code>.
If <code>filenames</code> is blank and <code>cat_no</code> is blank, <code>read_abs_local()</code> will
attempt to read all .xls and .xlsx files in the directory specified with <code>path</code>.</p>
</td></tr>
<tr><td><code id="read_abs_local_+3A_path">path</code></td>
<td>
<p>path to local directory containing ABS time series file(s).
Default is <code>Sys.getenv("R_READABS_PATH", unset = tempdir())</code>.
If nothing is specified in <code>filenames</code> or <code>cat_no</code>,
<code>read_abs_local()</code> will attempt to read all .xls and .xlsx files in the directory
specified with <code>path</code>.</p>
</td></tr>
<tr><td><code id="read_abs_local_+3A_use_fst">use_fst</code></td>
<td>
<p>logical. If <code>TRUE</code> (the default) then, if an <code>fst</code> file of the
tidy data frame has already been saved in <code>path</code>, it is read immediately.</p>
</td></tr>
<tr><td><code id="read_abs_local_+3A_metadata">metadata</code></td>
<td>
<p>logical. If <code>TRUE</code> (the default), a tidy data frame including
ABS metadata (series name, table name, etc.) is included in the output. If
<code>FALSE</code>, metadata is dropped.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Unlike <code>read_abs()</code>, the <code>table_title</code> column in the data frame
returned by <code>read_abs_local()</code> is blank. If you require <code>table_title</code>,
please use <code>read_abs()</code> instead.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load and tidy two specified files from the "data/ABS" subdirectory
# of your working directory
## Not run: 
lfs &lt;- read_abs_local(c("6202001.xls", "6202005.xls"))

## End(Not run)

</code></pre>

<hr>
<h2 id='read_abs_metadata'>Extracts ABS series metadata directly from Excel spreadsheets and
converts to long-form.</h2><span id='topic+read_abs_metadata'></span>

<h3>Description</h3>

<p>Extracts ABS series metadata directly from Excel spreadsheets and
converts to long-form.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_abs_metadata(path, sheet)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_abs_metadata_+3A_path">path</code></td>
<td>
<p>Filepath to Excel spreadsheet.</p>
</td></tr>
<tr><td><code id="read_abs_metadata_+3A_sheet">sheet</code></td>
<td>
<p>Sheet name or number.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Long-form dataframe
</p>

<hr>
<h2 id='read_abs_url'>Download and import an ABS time series spreadsheet from a given URL</h2><span id='topic+read_abs_url'></span>

<h3>Description</h3>

<p>Download and import an ABS time series spreadsheet from a given URL
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_abs_url(
  url,
  path = Sys.getenv("R_READABS_PATH", unset = tempdir()),
  show_progress_bars = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_abs_url_+3A_url">url</code></td>
<td>
<p>Character vector of url(s) to ABS time series spreadsheet(s).</p>
</td></tr>
<tr><td><code id="read_abs_url_+3A_path">path</code></td>
<td>
<p>Local directory in which downloaded ABS time series
spreadsheets should be stored. By default, <code>path</code> takes the value set in the
environment variable &quot;R_READABS_PATH&quot;. If this variable is not set,
any files downloaded by read_abs()  will be stored in a temporary directory
(<code>tempdir()</code>). See <code>?read_abs()</code> for more.</p>
</td></tr>
<tr><td><code id="read_abs_url_+3A_show_progress_bars">show_progress_bars</code></td>
<td>
<p>TRUE by default. If set to FALSE, progress bars
will not be shown when ABS spreadsheets are downloading.</p>
</td></tr>
<tr><td><code id="read_abs_url_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code>read_abs_local()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If you have a specific URL to the time series spreadsheet you wish
to download, <code>read_abs_url()</code> will download, import and tidy it. This is
useful for older vintages of data, or discontinued data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
url &lt;- paste0(
  "https://www.abs.gov.au/statistics/labour/",
  "employment-and-unemployment/labour-force-australia/aug-2022/6202001.xlsx"
)
read_abs_url(url)

## End(Not run)
</code></pre>

<hr>
<h2 id='read_awe'>read_awe</h2><span id='topic+read_awe'></span>

<h3>Description</h3>

<p>Convenience function to obtain wage levels from ABS
6302.0, Average Weekly Earnings, Australia.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_awe(
  wage_measure = c("awote", "ftawe", "awe"),
  sex = c("persons", "males", "females"),
  sector = c("total", "private", "public"),
  state = c("all", "nsw", "vic", "qld", "sa", "wa", "tas", "nt", "act"),
  na.rm = FALSE,
  path = Sys.getenv("R_READABS_PATH", unset = tempdir()),
  show_progress_bars = FALSE,
  check_local = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_awe_+3A_wage_measure">wage_measure</code></td>
<td>
<p>Character of length 1. Must be one of:
</p>

<dl>
<dt><code>awote</code></dt><dd><p> Average weekly ordinary time earnings; also known as Full-time adult ordinary time earnings</p>
</dd>
<dt><code>ftawe</code></dt><dd><p> Full-time adult total earnings</p>
</dd>
<dt><code>awe</code></dt><dd><p> Average weekly total earnings of all employees</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="read_awe_+3A_sex">sex</code></td>
<td>
<p>Character of length 1. Must be one of: <code>persons</code>, <code>males</code>, or <code>females</code>.</p>
</td></tr>
<tr><td><code id="read_awe_+3A_sector">sector</code></td>
<td>
<p>Character of length 1. Must be one of: <code>total</code>, <code>private</code>, or
<code>public</code>. Note that you cannot get sector-by-state data; if <code>state</code> is not
<code>all</code> then <code>sector</code> must be <code>total</code>.</p>
</td></tr>
<tr><td><code id="read_awe_+3A_state">state</code></td>
<td>
<p>Character of length 1. Must be one of: <code>all</code>, <code>nsw</code>, <code>vic</code>, <code>qld</code>,
<code>sa</code>, <code>wa</code>, <code>nt</code>, or <code>act</code>. Note that you cannot get sector-by-state data;
if <code>sector</code> is not <code>total</code> then <code>state</code> must be <code>all</code>.</p>
</td></tr>
<tr><td><code id="read_awe_+3A_na.rm">na.rm</code></td>
<td>
<p>Logical. <code>FALSE</code> by default. If <code>FALSE</code>, a consistent quarterly
series is returned, with <code>NA</code> values for quarters in which there is no data.
If <code>TRUE</code>, only dates with data are included in the returned data frame.</p>
</td></tr>
<tr><td><code id="read_awe_+3A_path">path</code></td>
<td>
<p>See <code>?read_abs</code></p>
</td></tr>
<tr><td><code id="read_awe_+3A_show_progress_bars">show_progress_bars</code></td>
<td>
<p>See <code>?read_abs</code></p>
</td></tr>
<tr><td><code id="read_awe_+3A_check_local">check_local</code></td>
<td>
<p>See <code>?read_abs</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The latest AWE data is available using <code>read_abs(cat_no = "6302.0", tables = 2)</code>.
However, this time series only goes back to 2012, when the ABS switched
from quarterly to biannual collection and release of the AWE data. The
<code>read_awe()</code> function assembles on time series back to November 1983 quarter;
it is quarterly to 2012 and biannual from then. Note that the data
returned with this function is consistently quarterly; any quarters for
which there are no observations are recorded as <code>NA</code> unless <code>na.rm</code> = <code>TRUE</code>.
</p>


<h3>Value</h3>

<p>A <code>tbl_df</code> with four columns: <code>date</code>, <code>sex</code>, <code>wage_measure</code> and <code>value</code>.
The data is nominal and seasonally adjusted.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
read_awe("awote", "persons")

## End(Not run)

</code></pre>

<hr>
<h2 id='read_cpi'>Download a tidy tibble containing the Consumer Price Index from the ABS</h2><span id='topic+read_cpi'></span>

<h3>Description</h3>

<p><code>read_cpi()</code> uses the <code>read_abs()</code> function to download, import,
and tidy the Consumer Price Index from the ABS. It returns a tibble
containing two columns: the date and the CPI index value that corresponds
to that date. This makes joining the CPI to another dataframe easy.
<code>read_cpi()</code> returns the original (ie. not seasonally adjusted)
all groups CPI for Australia. If you want the analytical series
(eg. seasonally adjusted CPI, or trimmed mean CPI), you can use
<code>read_abs()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_cpi(
  path = Sys.getenv("R_READABS_PATH", unset = tempdir()),
  show_progress_bars = TRUE,
  check_local = FALSE,
  retain_files = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_cpi_+3A_path">path</code></td>
<td>
<p>character; default is &quot;data/ABS&quot;. Only used if
retain_files is set to TRUE. Local directory in which to save
downloaded ABS time series spreadsheets.</p>
</td></tr>
<tr><td><code id="read_cpi_+3A_show_progress_bars">show_progress_bars</code></td>
<td>
<p>logical; TRUE by default. If set to FALSE, progress
bars will not be shown when ABS spreadsheets are downloading.</p>
</td></tr>
<tr><td><code id="read_cpi_+3A_check_local">check_local</code></td>
<td>
<p>logical; FALSE by default. See <code>?read_abs</code>.</p>
</td></tr>
<tr><td><code id="read_cpi_+3A_retain_files">retain_files</code></td>
<td>
<p>logical; FALSE by default. When TRUE, the spreadsheets
downloaded from the ABS website will be saved in the
directory specified with 'path'.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
# Create a tibble called 'cpi' that contains the CPI index
# numbers for each quarter

cpi &lt;- read_cpi()


# This tibble can now be joined to another to help streamline the process of
# deflating nominal values.
</code></pre>

<hr>
<h2 id='read_job_mobility'>Download and tidy ABS Job Mobility tables</h2><span id='topic+read_job_mobility'></span>

<h3>Description</h3>

<p>Import a tidy tibble of ABS Job Mobility data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_job_mobility(
  tables = "all",
  path = Sys.getenv("R_READABS_PATH", unset = tempdir())
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_job_mobility_+3A_tables">tables</code></td>
<td>
<p>Either <code>"all"</code> (the default) to import all tables, or a
vector of table numbers, such as <code>1</code> or <code>c(2, 4)</code>.</p>
</td></tr>
<tr><td><code id="read_job_mobility_+3A_path">path</code></td>
<td>
<p>Local directory in which downloaded ABS time series spreadsheets should be stored. By default, 'path' takes the value set in the environment variable &quot;R_READABS_PATH&quot;. If this variable is not set, any files downloaded by read_abs() will be stored in a temporary directory (tempdir()).</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Get all tables from the ABS Job Mobility series
read_job_mobility()

# Get tables 1 and 2
read_job_mobility(c(1, 2))

## End(Not run)

</code></pre>

<hr>
<h2 id='read_lfs_datacube'>Convenience function to download and tidy data cubes from
ABS Labour Force, Australia, Detailed.</h2><span id='topic+read_lfs_datacube'></span>

<h3>Description</h3>

<p>Convenience function to download and tidy data cubes from
ABS Labour Force, Australia, Detailed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_lfs_datacube(cube, path = Sys.getenv("R_READABS_PATH", unset = tempdir()))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_lfs_datacube_+3A_cube">cube</code></td>
<td>
<p>character. A character string that is either the complete filename
or (uniquely) in the filename of the data cube you want to download. Use
<code>get_available_lfs_cubes()</code> to see a dataframe of options.</p>
</td></tr>
<tr><td><code id="read_lfs_datacube_+3A_path">path</code></td>
<td>
<p>Local directory in which downloaded files should be stored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with the data from the data cube. Columns names are
tidied and dates are converted to Date class.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>read_lfs_datacube("EQ02")
</code></pre>

<hr>
<h2 id='read_lfs_grossflows'>Download, import and tidy 'gross flows' data cube
from the monthly ABS Labour Force survey.</h2><span id='topic+read_lfs_grossflows'></span>

<h3>Description</h3>

<p>This convenience function downloads, imports and tidies the 'gross flows' data
cube from the monthly ABS Labour Force survey. The gross flows data cube (GM1)
shows estimates of the number of people who
transitioned from one labour force status to another between two months.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_lfs_grossflows(
  weights = c("current", "previous"),
  path = Sys.getenv("R_READABS_PATH", unset = tempdir())
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_lfs_grossflows_+3A_weights">weights</code></td>
<td>
<p>either <code>"current"</code> or <code>"previous"</code>. If <code>"current"</code>, figures will
use the current month's Labour Force survey weights; if <code>"previous"</code>, the
previous month's weights are used.</p>
</td></tr>
<tr><td><code id="read_lfs_grossflows_+3A_path">path</code></td>
<td>
<p>Local directory in which downloaded files should be stored.
By default, 'path' takes the value set in the environment variable
&quot;R_READABS_PATH&quot;. If this variable is not set, any files downloaded
will be stored in a temporary directory (<code>tempdir()</code>).
See <code>Details</code> in <code>?read_abs</code> for more information.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing data cube GM1 from the monthly Labour Force survey.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
read_lfs_grossflows()

## End(Not run)

</code></pre>

<hr>
<h2 id='read_payrolls'>Download and tidy ABS payroll jobs and wages data</h2><span id='topic+read_payrolls'></span>

<h3>Description</h3>

<p>Import a tidy tibble of ABS Weekly Payrolls data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_payrolls(
  series = c("industry_jobs", "subindustry_jobs", "empsize_jobs", "sex_age_jobs"),
  path = Sys.getenv("R_READABS_PATH", unset = tempdir())
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_payrolls_+3A_series">series</code></td>
<td>
<p>Character. Must be one of:
</p>

<dl>
<dt>&quot;industry_jobs&quot;</dt><dd><p> Payroll jobs by industry division, state, sex, and age
group (Table 4)</p>
</dd>
<dt>&quot;subindustry_jobs&quot;</dt><dd><p> Payroll jobs by industry sub-division and
industry division (Table 6)</p>
</dd>
<dt>&quot;empsize_jobs&quot;</dt><dd><p> Payroll jobs by size of employer (number of
employees) and state (Table 7)</p>
</dd>
<dt>&quot;sex_age_jobs</dt><dd><p> Payroll jobs by sex and age (Table 8)</p>
</dd>
</dl>

<p>The default is &quot;industry_jobs&quot;.</p>
</td></tr>
<tr><td><code id="read_payrolls_+3A_path">path</code></td>
<td>
<p>Local directory in which downloaded ABS time series
spreadsheets should be stored. By default, <code>path</code> takes the value set in the
environment variable &quot;R_READABS_PATH&quot;. If this variable is not set,
any files downloaded by read_abs()  will be stored in a temporary directory
(<code>tempdir()</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The ABS <a href="https://www.abs.gov.au/statistics/labour/jobs/weekly-payroll-jobs/latest-release#changes-in-this-release">Weekly Payroll Jobs</a>
dataset is useful to analysts of the Australian labour market.
It draws upon data collected
by the Australian Taxation Office as part of its Single-Touch Payroll
initiative and supplements the monthly Labour Force Survey. Unfortunately,
the data as published by the ABS (1) is not in a standard time series
spreadsheet; and (2) is messy in various ways that make it hard to
read in R. This convenience function uses <code>download_abs_data_cube()</code> to
import the payrolls data, and then tidies it up.
</p>
<p>Note that this ABS release used to be called Weekly Payroll Jobs and Wages Australia.
The total wages series were removed from this release in mid-2023 and it
was renamed to Weekly Payroll Jobs. The ability to read total wages
indexes using this function was therefore also removed.
</p>


<h3>Value</h3>

<p>A tidy (long) <code>tbl_df</code>. The number of columns differs based on the <code>series</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Fetch payroll jobs by industry and state (the default, "industry_jobs")
read_payrolls()

# Payroll jobs by employer size
read_payrolls("empsize_jobs")

## End(Not run)

</code></pre>

<hr>
<h2 id='scrape_abs_catalogues'>Helper function for <code>download_abs_data_cube</code> to scrape the available catalogues from the ABS website.</h2><span id='topic+scrape_abs_catalogues'></span>

<h3>Description</h3>

<p>This function downloads a new version of the lookup table used by <code>show_available_catalogues</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scrape_abs_catalogues()
</code></pre>


<h3>Value</h3>

<p>A tibble containing the catalogues and how they are organised on the ABS website.
</p>

<hr>
<h2 id='search_catalogues'>Search for ABS catalogues that match a string</h2><span id='topic+search_catalogues'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
Helper function to use with <code>download_abs_data_cube()</code>.
</p>
<p><code>download_abs_data_cube()</code> requires that you specify a <code>catalogue</code>.
<code>search_catalogues()</code> helps you find the catalogue you want, by searching for
a given string in the catalogue names, product title, and broad topic.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>search_catalogues(string, refresh = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="search_catalogues_+3A_string">string</code></td>
<td>
<p>Character. A word or phrase you want to search for, such as &quot;labour&quot; or
&quot;union&quot;. Not case sensitive.</p>
</td></tr>
<tr><td><code id="search_catalogues_+3A_refresh">refresh</code></td>
<td>
<p>Logical. <code>FALSE</code> by default. If <code>TRUE</code>, will re-scrape the ABS
website to ensure that the list of catalogues is up-to-date.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame (tibble) containing the topic (<code>heading</code>), product title
(<code>sub_heading</code>), catalogue (<code>catalogue</code>) and URL (<code>URL</code>) of any catalogues
that match the provided string.
</p>


<h3>See Also</h3>

<p>Other data cube functions: 
<code><a href="#topic+download_abs_data_cube">download_abs_data_cube</a>()</code>,
<code><a href="#topic+show_available_catalogues">show_available_catalogues</a>()</code>,
<code><a href="#topic+show_available_files">show_available_files</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
search_catalogues("labour")
</code></pre>

<hr>
<h2 id='search_files'>Search for a file within an ABS catalogue</h2><span id='topic+search_files'></span>

<h3>Description</h3>

<p>Search for a file within an ABS catalogue
</p>


<h3>Usage</h3>

<pre><code class='language-R'>search_files(string, catalogue, refresh = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="search_files_+3A_string">string</code></td>
<td>
<p>String to search for among filenames in a catalogue</p>
</td></tr>
<tr><td><code id="search_files_+3A_catalogue">catalogue</code></td>
<td>
<p>Name of catalogue</p>
</td></tr>
<tr><td><code id="search_files_+3A_refresh">refresh</code></td>
<td>
<p>logical; <code>FALSE</code> by default. When <code>TRUE</code>, will re-scrape the
list of files within the catalogue.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
search_files("GM1", "labour-force-australia")

## End(Not run)

</code></pre>

<hr>
<h2 id='separate_series'>Separate the series column in a tidy ABS time series data frame</h2><span id='topic+separate_series'></span>

<h3>Description</h3>

<p>Separate the 'series' column in a data frame (tibble)
downloaded using <code>read_abs()</code> into multiple columns using the &quot;;&quot;
separator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>separate_series(
  data,
  column_names = NULL,
  remove_totals = FALSE,
  remove_nas = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="separate_series_+3A_data">data</code></td>
<td>
<p>A data frame (tibble) containing tidied data from the ABS time
series table(s).</p>
</td></tr>
<tr><td><code id="separate_series_+3A_column_names">column_names</code></td>
<td>
<p>(optional) character vector. Supply a vector of column
names, such as <code>c("group_name", "variable","gender")</code>. If not
supplied, columns will be named &quot;series_1&quot; etc.</p>
</td></tr>
<tr><td><code id="separate_series_+3A_remove_totals">remove_totals</code></td>
<td>
<p>logical. FALSE by default.
If set to TRUE, any series rows that contain the word &quot;total&quot;
will be removed.</p>
</td></tr>
<tr><td><code id="separate_series_+3A_remove_nas">remove_nas</code></td>
<td>
<p>locical. FALSE by default. If set to TRUE, any rows
containining an NA in at least one of the separated series columns
will be removed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame (tibble) containing the tidied data from the ABS time
series table(s).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
wpi &lt;- read_abs("6345.0", 1) %&gt;%
  separate_series()

## End(Not run)

</code></pre>

<hr>
<h2 id='show_available_catalogues'>Helper function for <code>download_abs_data_cube</code> to show the available catalogues.</h2><span id='topic+show_available_catalogues'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>This function lists the possible catalogues that are available on the ABS website.
These catalogues must be specified as a string as an argument to <code>download_abs_data_cube</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_available_catalogues(selected_heading = NULL, refresh = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show_available_catalogues_+3A_selected_heading">selected_heading</code></td>
<td>
<p>optional character string specifying the heading on the <a href="https://www.abs.gov.au/statistics">ABS statistics webpage</a>.
e.g. &quot;Earnings and work hours&quot;</p>
</td></tr>
<tr><td><code id="show_available_catalogues_+3A_refresh">refresh</code></td>
<td>
<p>logical; <code>FALSE</code> by default. If <code>FALSE</code>, an internal table of the available ABS catalogues is used. If <code>TRUE</code>, this table is refreshed from the ABS website.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector of catalogues.
</p>


<h3>See Also</h3>

<p>Other data cube functions: 
<code><a href="#topic+download_abs_data_cube">download_abs_data_cube</a>()</code>,
<code><a href="#topic+search_catalogues">search_catalogues</a>()</code>,
<code><a href="#topic+show_available_files">show_available_files</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>show_available_catalogues("Earnings and work hours")
</code></pre>

<hr>
<h2 id='show_available_files'>Helper function to show the files available in a particular catalogue number.</h2><span id='topic+show_available_files'></span><span id='topic+get_available_files'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
To be used in conjunction with <code>download_abs_data_cube()</code>.
</p>
<p>This function lists the possible files that are available in a catalogue.
The filename (or an unambiguous part of the filename) must be specified
as a string as an argument to <code>download_abs_data_cube</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_available_files(catalogue_string, refresh = FALSE)

get_available_files(catalogue_string, refresh = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show_available_files_+3A_catalogue_string">catalogue_string</code></td>
<td>
<p>character string specifying the catalogue,
e.g. &quot;labour-force-australia-detailed&quot;.
You can use <code>show_available_catalogues()</code> see all the possible catalogues,
or <code>search_catalogues()</code> to find catalogues that contain a given string.</p>
</td></tr>
<tr><td><code id="show_available_files_+3A_refresh">refresh</code></td>
<td>
<p>logical; <code>FALSE</code> by default. If <code>FALSE</code>, an internal table
of the available ABS catalogues is used. If <code>TRUE</code>, this table is refreshed
from the ABS website.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>get_available_files()</code> is an alias for <code>show_available_files()</code>.
</p>


<h3>Value</h3>

<p>A tibble containing the title of the file, the filename and the complete url.
</p>


<h3>See Also</h3>

<p>Other data cube functions: 
<code><a href="#topic+download_abs_data_cube">download_abs_data_cube</a>()</code>,
<code><a href="#topic+search_catalogues">search_catalogues</a>()</code>,
<code><a href="#topic+show_available_catalogues">show_available_catalogues</a>()</code>
</p>
<p>Other data cube functions: 
<code><a href="#topic+download_abs_data_cube">download_abs_data_cube</a>()</code>,
<code><a href="#topic+search_catalogues">search_catalogues</a>()</code>,
<code><a href="#topic+show_available_catalogues">show_available_catalogues</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
show_available_files("labour-force-australia-detailed")

## End(Not run)

</code></pre>

<hr>
<h2 id='tidy_abs'>Tidy ABS time series data.</h2><span id='topic+tidy_abs'></span>

<h3>Description</h3>

<p>Tidy ABS time series data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidy_abs(df, metadata = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tidy_abs_+3A_df">df</code></td>
<td>
<p>A data frame containing ABS time series data
that has been extracted using <code>extract_abs_sheets</code>.</p>
</td></tr>
<tr><td><code id="tidy_abs_+3A_metadata">metadata</code></td>
<td>
<p>logical. If <code>TRUE</code> (the default), a tidy data frame
including ABS metadata (series name, table name, etc.) is
included in the output. If <code>FALSE</code>, metadata is dropped.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame (tibble) in long format.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# First extract the data from the local spreadsheet
## Not run: 
wpi &lt;- extract_abs_sheets("634501.xls")

## End(Not run)

# Then tidy the data extracted from the spreadsheet. Note that
# \code{extract_abs_sheets()} returns a list of data frames, so we need to
# subset the list.
## Not run: 
tidy_wpi &lt;- tidy_abs(wpi[[1]])

## End(Not run)

</code></pre>

<hr>
<h2 id='tidy_abs_list'>Tidy multiple dataframes of ABS time series data contained in a list.</h2><span id='topic+tidy_abs_list'></span>

<h3>Description</h3>

<p>Tidy multiple dataframes of ABS time series data contained in a list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidy_abs_list(list_of_dfs, metadata = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tidy_abs_list_+3A_list_of_dfs">list_of_dfs</code></td>
<td>
<p>A list of dataframes containing extracted
ABS time series data.</p>
</td></tr>
<tr><td><code id="tidy_abs_list_+3A_metadata">metadata</code></td>
<td>
<p>logical. If <code>TRUE</code> (the default), a tidy data frame including
ABS metadata (series name, table name, etc.) is included in the output. If
<code>FALSE</code>, metadata is dropped.</p>
</td></tr>
</table>

<hr>
<h2 id='tidy_awe'>Internal function to tidy a dataframe from ABS 6302</h2><span id='topic+tidy_awe'></span>

<h3>Description</h3>

<p>Internal function to tidy a dataframe from ABS 6302
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidy_awe(df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tidy_awe_+3A_df">df</code></td>
<td>
<p>Data frame containing table 2 from ABS 6302, imported using <code>read_abs()</code></p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
