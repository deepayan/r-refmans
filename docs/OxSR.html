<!DOCTYPE html><html lang="en-US"><head><title>Help for package OxSR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {OxSR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#clean_sheet_cary'><p>Organize Cary data</p></a></li>
<li><a href='#data_cary'><p>Diffuse soil reflectance via Cary equipment</p></a></li>
<li><a href='#relation_hm_gt'><p>Ratios Hm/(Hm+Gt)</p></a></li>
<li><a href='#soil_color'><p>Soil color by diffuse reflectance</p></a></li>
<li><a href='#soil_refle'><p>Diffuse reflectance of soils from Brazil</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Soil Iron Oxides via Diffuse Reflectance</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Calculate the ratio of iron oxides, hematite and goethite, in
    soil using the diffuse reflectance technique. The Kubelka-Munk theory,
    second derivative analysis, and spectral region amplitudes related to
    hematite and goethite content are used for quantification (Torrent,
    J., &amp; Barron, V. (2008) &lt;<a href="https://doi.org/10.2136%2Fsssabookser5.5.c13">doi:10.2136/sssabookser5.5.c13</a>&gt;).
    Additionally, the package calculates soil color in the visible
    spectrum using Munsell and RGB color spaces, based on color theory
    (Viscarra et al. (2006) &lt;<a href="https://doi.org/10.1016%2Fj.geoderma.2005.07.017">doi:10.1016/j.geoderma.2005.07.017</a>&gt;).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL (&ge; 3)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/FGu5tav0/OxSR/">https://github.com/FGu5tav0/OxSR/</a>,
<a href="https://fgu5tav0.github.io/OxSR/">https://fgu5tav0.github.io/OxSR/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/FGu5tav0/OxSR/issues">https://github.com/FGu5tav0/OxSR/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>colorSpec, dplyr, ggplot2, grDevices, janitor,
munsellinterpol, rlang, stats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>spelling, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-03-17 11:28:36 UTC; gusta</td>
</tr>
<tr>
<td>Author:</td>
<td>Gustavo Frosi <a href="https://orcid.org/0000-0002-0324-636X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Vidal Barrón <a href="https://orcid.org/0000-0003-1484-1655"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Alberto Inda <a href="https://orcid.org/0000-0001-5252-0313"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Kayn Bastiani <a href="https://orcid.org/0000-0003-2692-1695"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Gustavo Frosi &lt;gustavofrosi@hotmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-18 12:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='clean_sheet_cary'>Organize Cary data</h2><span id='topic+clean_sheet_cary'></span>

<h3>Description</h3>

<p>Cleans the raw data extracted from the Cary 5000 UV-Vis-IR spectrophotometer, ensuring an organized dataset for analysis. During the process, duplicate columns containing <code>wavelength</code> are removed to avoid redundancy. Samples with missing data are also eliminated, ensuring that only complete measurements are retained. Additionally, the columns are reordered based on the sample names, making it easier to interpret and manipulate the data. The <code>wavelength</code> column is placed as the first column, followed by the sample columns.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_sheet_cary(
  data = data,
  prefix = NULL,
  name_wave = "Wave",
  range_wave = c(380, 2500),
  nm_step = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean_sheet_cary_+3A_data">data</code></td>
<td>
<p>A data.frame containing the wavelength and reflectance values. It should be obtained directly from the export of a CSV file.</p>
</td></tr>
<tr><td><code id="clean_sheet_cary_+3A_prefix">prefix</code></td>
<td>
<p>Indicates the prefix for columns where there is no sample. It is usually predefined as <code>x</code> or <code>.</code>.</p>
</td></tr>
<tr><td><code id="clean_sheet_cary_+3A_name_wave">name_wave</code></td>
<td>
<p>Indicates the name of the wavelength column. The default is 'wave'.</p>
</td></tr>
<tr><td><code id="clean_sheet_cary_+3A_range_wave">range_wave</code></td>
<td>
<p>Is the wavelength range used. The default is from 380 nm to 2500 nm.</p>
</td></tr>
<tr><td><code id="clean_sheet_cary_+3A_nm_step">nm_step</code></td>
<td>
<p>The increment in nanometers between consecutive wavelength readings.
This defines the resolution of the measurements. The default value is 0.5 nm.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an organized <code>data.frame</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example code
library(OxSR)
data(data_cary)

clean_sheet_cary(data_cary, prefix = "x")

# With pipe

data_cary |&gt; clean_sheet_cary(prefix = "x")

</code></pre>

<hr>
<h2 id='data_cary'>Diffuse soil reflectance via Cary equipment</h2><span id='topic+data_cary'></span>

<h3>Description</h3>

<p>A dataset containing diffuse reflectance measurements of soil samples from Brazil. The data were obtained using a Cary 5000 UV-Vis-NIR spectrophotometer, covering the spectral range from 2500 nm to 380 nm with a reading interval of 0.5 nm (Frosi et al., 2025).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_cary
</code></pre>


<h3>Format</h3>

<p>A data frame with 5,417 rows and 52 columns:
</p>

<dl>
<dt><code>a1</code>, <code>a2</code>, <code>a3</code>, <code>a4</code>, <code>a5</code>, <code>a6</code>, <code>a7</code>, <code>a8</code>, <code>a9</code>, <code>a10</code>, <code>a11</code>, <code>a12</code>, <code>a13</code>, <code>a14</code>, <code>a15</code>, <code>a16</code>, <code>a17</code>, <code>a18</code>, <code>a19</code>, <code>a20</code>, <code>a21</code>, <code>a22</code>, <code>a23</code>, <code>a24</code>, <code>a26</code></dt><dd><p>Wavelength values in nanometers for each sample (labeled &quot;a&quot;). Each column represents the wavelength for a specific sample.</p>
</dd>
<dt><code>x2</code>, <code>x4</code>, <code>x6</code>, <code>x8</code>, <code>x10</code>, <code>x12</code>, <code>x14</code>, <code>x16</code>, <code>x18</code>, <code>x20</code>, <code>x22</code>, <code>x24</code>, <code>x26</code>, <code>x28</code>, <code>x30</code>, <code>x32</code>, <code>x34</code>, <code>x36</code>, <code>x38</code>, <code>x40</code>, <code>x42</code>, <code>x44</code>, <code>x46</code>, <code>x48</code>, <code>x50</code></dt><dd><p>Reflectance percentage (%R) corresponding to each wavelength for the same sample. The &quot;x&quot; columns represent the reflectance values for the corresponding &quot;a&quot; sample columns.</p>
</dd>
</dl>



<h3>References</h3>

<p>Frosi, G., Inda, A., &amp; Barrón, V. (2025).
Diffuse reflectance of soils from Brazil <em>Data set</em>. Zenodo. <a href="https://doi.org/10.5281/zenodo.14879041">doi:10.5281/zenodo.14879041</a>
</p>

<hr>
<h2 id='relation_hm_gt'>Ratios Hm/(Hm+Gt)</h2><span id='topic+relation_hm_gt'></span>

<h3>Description</h3>

<p>Calculates the relationship between the iron oxides hematite and goethite in soil sample: </p>
<p style="text-align: center;"><code class="reqn">Hm/Gt = \frac{\text{hematite}}{\text{hematite} + \text{goethite}}</code>
</p>

<p>based on the soil's diffuse reflectance curve in the visible spectrum, the Kubelka-Munk equation, and the second derivative (Scheinost et al., 1998; Torrent et al., 2008).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>relation_hm_gt(
  data = data,
  points_smoothing = 0.3,
  hm_gt_limits = list(hm = c(535, 585), gt = c(430, 460)),
  pv_tolerance = c(0, 0, 0, 0),
  name_wave = "wave",
  plot = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="relation_hm_gt_+3A_data">data</code></td>
<td>
<p>A data.frame containing the input data, where the first column should be the wavelength and the remaining columns should contain the reflectance data of the sample.</p>
</td></tr>
<tr><td><code id="relation_hm_gt_+3A_points_smoothing">points_smoothing</code></td>
<td>
<p>The number of points used for smoothing the data to reduce noise in the spectral readings. The default value is 0.3.</p>
</td></tr>
<tr><td><code id="relation_hm_gt_+3A_hm_gt_limits">hm_gt_limits</code></td>
<td>
<p>A list containing the detection range values for hematite (hm) and goethite (gt). The default is <code>list(hm = c(535, 585), gt = c(430, 460))</code>.</p>
</td></tr>
<tr><td><code id="relation_hm_gt_+3A_pv_tolerance">pv_tolerance</code></td>
<td>
<p>A numeric vector with 4 elements, each corresponding to one of the limits for hematite (hm) and goethite (gt). This value specifies the tolerance for the point values in the calculation, helping to account for small variations in the data and controlling the precision of the calculation.</p>
</td></tr>
<tr><td><code id="relation_hm_gt_+3A_name_wave">name_wave</code></td>
<td>
<p>The name of the wavelength column in the data. By default, it is set to 'wave'.</p>
</td></tr>
<tr><td><code id="relation_hm_gt_+3A_plot">plot</code></td>
<td>
<p>A logical value indicating whether to generate a plot of the results. If set to TRUE, a plot will be displayed; if FALSE, no plot will be shown.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>data.frame</code> with each sample in the rows and columns containing the minimum, maximum, and amplitude for Hm and Gt, along with the Hm/Gt ratio.
</p>


<h3>References</h3>

<p>Scheinost, A. C., Chavernas, A., Barrón, V., &amp; Torrent, J. (1998).
Use and limitations of second-derivative diffuse reflectance spectroscopy in the visible to near-infrared range to identify and quantify Fe oxide minerals in soil. <em>Clays and Clay Minerals, 46(5), 528–536.</em> <a href="https://doi.org/10.1346/CCMN.1998.0460506">doi:10.1346/CCMN.1998.0460506</a>
</p>
<p>Torrent, J., &amp; Barron, V. (2008).
Diffuse Reflectance Spectroscopy. <em>Methods of Soil Analysis, 5, 367–385.</em> <a href="https://doi.org/10.2136/sssabookser5.5.c13">doi:10.2136/sssabookser5.5.c13</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example code
library(OxSR)
data(data_cary)

data_clean &lt;- clean_sheet_cary(data_cary, prefix = "x")

relation_hm_gt(data_clean)

# With plot
relation_hm_gt(data_clean[,1:2], plot = TRUE)

</code></pre>

<hr>
<h2 id='soil_color'>Soil color by diffuse reflectance</h2><span id='topic+soil_color'></span>

<h3>Description</h3>

<p>The function converts the visible soil spectrum to three-dimensional color systems, such as Munsell and RGB, using the CIE tristimulus values for the conversion. This allows for the standardized representation of colors and facilitates visual and comparative analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>soil_color(data = data,
           name_wave = "wave",
           tri_values = "std",
           plot = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="soil_color_+3A_data">data</code></td>
<td>
<p>A data.frame containing the wavelength and reflectance values.</p>
</td></tr>
<tr><td><code id="soil_color_+3A_name_wave">name_wave</code></td>
<td>
<p>Character indicating the name of the column with the wavelength. It can be only the initial characters.</p>
</td></tr>
<tr><td><code id="soil_color_+3A_tri_values">tri_values</code></td>
<td>
<p>Tristimulus Values. Values from the <code>colorSpec</code> package can be used.</p>
</td></tr>
<tr><td><code id="soil_color_+3A_plot">plot</code></td>
<td>
<p>Logical, if TRUE, the plot with the colors is generated, the default is FALSE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> with color values in <code>Munsell</code>, <code>HVC</code>, <code>RGB</code>, and <code style="white-space: pre;">&#8288;hexadecimal code&#8288;</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example code
data(soil_refle)

soil_color(soil_refle)

# tristimulus values {colorSpec}
soil_color(soil_refle, tri_values = "xyz1931.1nm", plot = TRUE)
</code></pre>

<hr>
<h2 id='soil_refle'>Diffuse reflectance of soils from Brazil</h2><span id='topic+soil_refle'></span>

<h3>Description</h3>

<p>A cleaned and organized diffuse reflectance database. The structure of the database includes the first column as the wavelength used in all samples, with the remaining columns representing the soil samples (Frosi et al., 2025).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>soil_refle
</code></pre>


<h3>Format</h3>

<p>A data frame with 4241 rows and 24 columns:
</p>

<dl>
<dt><code>wavelength_nm</code></dt><dd><p>Wavelength values in nanometers.</p>
</dd>
<dt><code>a1</code>, <code>a2</code>, <code>a3</code>, <code>a4</code>, <code>a5</code>, <code>a6</code>, <code>a7</code>, <code>a8</code>, <code>a9</code>, <code>a10</code>, <code>a11</code>, <code>a12</code>, <code>a13</code>, <code>a14</code>, <code>a15</code>, <code>a16</code>, <code>a17</code>, <code>a18</code>, <code>a19</code>, <code>a20</code>, <code>a22</code>, <code>a24</code>, <code>a26</code></dt><dd><p>Reflectance percentage (%R) corresponding to each for each soil sample.</p>
</dd>
</dl>



<h3>References</h3>

<p>Frosi, G., Inda, A., &amp; Barrón, V. (2025).
Diffuse reflectance of soils from Brazil <em>Data set</em>. Zenodo <a href="https://doi.org/10.5281/zenodo.14879041">doi:10.5281/zenodo.14879041</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
