<!DOCTYPE html><html><head><title>Help for package priceR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {priceR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#adjust_for_inflation'><p>Convert nominal prices into real prices</p></a></li>
<li><a href='#append_exchangeratehost_access_key'><p>Retrieves exchangerate.host (forex) API key from R environment variables</p>
and appends to API call</a></li>
<li><a href='#convert_currencies'><p>Convert Currencies</p></a></li>
<li><a href='#convert_to_iso2Code'><p>Convert any country input into its iso2Code</p></a></li>
<li><a href='#country_input_type'><p>Determines whether country input is a country name or iso2Code</p></a></li>
<li><a href='#currencies'><p>Retrieve available currencies and their respective symbols/codes</p></a></li>
<li><a href='#currency_characters'><p>Provide currency characters</p></a></li>
<li><a href='#currency_info'><p>Information for each of 191 currencies</p></a></li>
<li><a href='#currency_to_numeric'><p>Convert human readable currencies into numeric data</p></a></li>
<li><a href='#display_api_info'><p>Display link to further information</p></a></li>
<li><a href='#exchange_rate_latest'><p>Retrieve the latest exchange rates between the provided currency code</p></a></li>
<li><a href='#extract_salary'><p>Extract numeric salary from text data</p></a></li>
<li><a href='#format_currency'><p>Make numeric currency values human readable</p></a></li>
<li><a href='#format_dollars'><p>Make numeric currency values human readable</p></a></li>
<li><a href='#from_to_dates_rates'><p>Wrapper around 'priceR::historical_exchange_rates()' with slight modifications</p>
to structure of inputs and output</a></li>
<li><a href='#historical_exchange_rates'><p>Retrieve historical exchange rates</p></a></li>
<li><a href='#make_dates'><p>Creates date ranges so as to batch up large API calls into many smaller ones</p></a></li>
<li><a href='#pminmax'><p>Removes redundant API calls of currency pairs. That is, revmoes the need</p>
to for separate calls for both
'from = EUR, to = USD' and 'from = USD, to = EUR'</a></li>
<li><a href='#retrieve_historical_rates'><p>Retrieve historical exchange rates</p></a></li>
<li><a href='#retrieve_inflation_data'><p>Retrieve historical inflation data</p></a></li>
<li><a href='#round_down_to_nearest'><p>Round prices down to the nearest specified increment</p></a></li>
<li><a href='#round_to_nearest'><p>Round prices to the nearest specified increment</p></a></li>
<li><a href='#round_up_to_nearest'><p>Round prices up to the nearest specified increment</p></a></li>
<li><a href='#show_countries'><p>Show available country codes</p></a></li>
<li><a href='#url_all_results'><p>Generate a World Bank API URL that will return all results for a given indicator in JSON format</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Economics and Pricing Tools</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, gsubfn, stringr, purrr, jsonlite, stats, lubridate,
stringi, tidyr</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Steve Condylios &lt;steve.condylios@gmail.com&gt;</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/stevecondylios/priceR/issues">https://github.com/stevecondylios/priceR/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/stevecondylios/priceR">https://github.com/stevecondylios/priceR</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Functions to aid in micro and macro economic analysis and handling of price and
    currency data. Includes extraction of relevant inflation and exchange rate data from World Bank
    API, data cleaning/parsing, and standardisation. Inflation adjustment
    calculations as found in Principles of Macroeconomics by Gregory Mankiw et al (2014). Current
    and historical end of day exchange rates for 171 currencies from the European Central Bank
    Statistical Data Warehouse (2020) <a href="https://sdw.ecb.europa.eu/curConverter.do">https://sdw.ecb.europa.eu/curConverter.do</a>.</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-21 23:48:37 UTC; st</td>
</tr>
<tr>
<td>Author:</td>
<td>Steve Condylios [aut, cre],
  Bruno Mioto [ctb],
  Bryan Shalloway [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-22 00:10:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='adjust_for_inflation'>Convert nominal prices into real prices</h2><span id='topic+adjust_for_inflation'></span><span id='topic+afi'></span>

<h3>Description</h3>

<p>Inflate/deflate prices from any year to any year, using World Bank inflation data and assumptions only where necessary.
Typically used for converting past (nominal) values into current (real) values. This uses World Bank inflation data where available,
but allows for both historical and future assumptions in extrapolation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adjust_for_inflation(price, from_date, country, to_date, inflation_dataframe,
countries_dataframe, extrapolate_future_method, future_averaging_period, future_rate,
extrapolate_past_method, past_averaging_period, past_rate)

afi(
  price,
  from_date,
  country,
  to_date,
  inflation_dataframe,
  countries_dataframe,
  extrapolate_future_method,
  future_averaging_period,
  future_rate,
  extrapolate_past_method,
  past_averaging_period,
  past_rate
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="adjust_for_inflation_+3A_price">price</code></td>
<td>
<p>A price (or prices).</p>
</td></tr>
<tr><td><code id="adjust_for_inflation_+3A_from_date">from_date</code></td>
<td>
<p>A date(s) from which the prices will be converted.</p>
</td></tr>
<tr><td><code id="adjust_for_inflation_+3A_country">country</code></td>
<td>
<p>A country or region in whose currency the prices are denominated.</p>
</td></tr>
<tr><td><code id="adjust_for_inflation_+3A_to_date">to_date</code></td>
<td>
<p>A date(s) to which the prices will be converted.</p>
</td></tr>
<tr><td><code id="adjust_for_inflation_+3A_inflation_dataframe">inflation_dataframe</code></td>
<td>
<p>The R object (list) representing the JSON retrieved by calling retrieve_inflation_data().</p>
</td></tr>
<tr><td><code id="adjust_for_inflation_+3A_countries_dataframe">countries_dataframe</code></td>
<td>
<p>The R object (data.frame) representing the JSON retreived by calling show_countries().</p>
</td></tr>
<tr><td><code id="adjust_for_inflation_+3A_extrapolate_future_method">extrapolate_future_method</code></td>
<td>
<p>The extrapolation method that shall be used if extrapolation into the future is required. Options are 'average' or 'rate'.</p>
</td></tr>
<tr><td><code id="adjust_for_inflation_+3A_future_averaging_period">future_averaging_period</code></td>
<td>
<p>The number of recent periods to average in order to extrapolate forward (if 'average' is method being used).</p>
</td></tr>
<tr><td><code id="adjust_for_inflation_+3A_future_rate">future_rate</code></td>
<td>
<p>An assumed rate of inflation to use for extrapolating forward (if 'rate' is method being used).</p>
</td></tr>
<tr><td><code id="adjust_for_inflation_+3A_extrapolate_past_method">extrapolate_past_method</code></td>
<td>
<p>The extrapolation method that shall be used if extrapolation from the earliest available data to some even earlier period is required.</p>
</td></tr>
<tr><td><code id="adjust_for_inflation_+3A_past_averaging_period">past_averaging_period</code></td>
<td>
<p>The number of periods back from the earliest available inflation data for a given country to average in order to extrapolate into the past (if 'average' is method being used).</p>
</td></tr>
<tr><td><code id="adjust_for_inflation_+3A_past_rate">past_rate</code></td>
<td>
<p>An assumed rate of inflation to use for extrapolating from the earliest available data to some even earlier period (if 'rate' is method being used).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of inflation-adjusted prices
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Assign these variables once
country &lt;- "AU"
inflation_dataframe &lt;- retrieve_inflation_data(country)
countries_dataframe &lt;- show_countries()

# Convert $100 from 2005 into 2017 dollars

adjust_for_inflation(100, 2005, country, to_date = 2017,
inflation_dataframe = inflation_dataframe,
countries_dataframe = countries_dataframe)

# [1] 133.9861 # i.e. $100 in 2005 had the same purchasing power as $133.99 in 2017

## End(Not run)

</code></pre>

<hr>
<h2 id='append_exchangeratehost_access_key'>Retrieves exchangerate.host (forex) API key from R environment variables
and appends to API call</h2><span id='topic+append_exchangeratehost_access_key'></span>

<h3>Description</h3>

<p>Retrieves exchangerate.host (forex) API key from R environment variables
and appends to API call
</p>


<h3>Usage</h3>

<pre><code class='language-R'>append_exchangeratehost_access_key(url)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="append_exchangeratehost_access_key_+3A_url">url</code></td>
<td>
<p>A URL representing an API endpoint</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The input URL with API access key appended as a URL parameter
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
base_Url &lt;- "https://api.exchangerate.host/latest?base=USD"
base_Url %&gt;% append_exchangeratehost_access_key

# [1] "https://api.exchangerate.host/latest?base=USD&amp;access_key=7e5e3140140bd8e4f4650cc41fc772c0"


## End(Not run)


</code></pre>

<hr>
<h2 id='convert_currencies'>Convert Currencies</h2><span id='topic+convert_currencies'></span>

<h3>Description</h3>

<p>Vectorized approach to converting prices across potentially different dates
and between different currencies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_currencies(
  price_start,
  from,
  to,
  date = lubridate::today(),
  floor_unit = "day"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convert_currencies_+3A_price_start">price_start</code></td>
<td>
<p>Numeric vector of prices in terms of 'from' currenc(ies).</p>
</td></tr>
<tr><td><code id="convert_currencies_+3A_from">from</code></td>
<td>
<p>Character vector of currenc(ies) of 'price_start'.</p>
</td></tr>
<tr><td><code id="convert_currencies_+3A_to">to</code></td>
<td>
<p>Character vector of currenc(ies) to convert 'price_start' to.</p>
</td></tr>
<tr><td><code id="convert_currencies_+3A_date">date</code></td>
<td>
<p>Date vector specifying date of exchange rate to use.</p>
</td></tr>
<tr><td><code id="convert_currencies_+3A_floor_unit">floor_unit</code></td>
<td>
<p>Character string. Default is &quot;day&quot; meaning that 'date' will
be converted based on daily conversion rates. Changing to &quot;week&quot; will
change conversions to be based on the start of the week of 'date'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric vector of 'price_start' now in the 'to' currenc(ies).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(dplyr)

sales_transactions &lt;- tibble(
  local_price = c(100, 80, 9200, 90),
  local_currency = c("USD", "EUR", "JPY", "USD"),
  final_currency = c("EUR", "USD", "USD", "JPY"),
  date_transaction = lubridate::ymd(c(20200601, 20200609, 20200614, 20200623))
)
# Some made-up sales transactions of different values and currencies
sales_transactions %&gt;%
  mutate(
    converted_price = convert_currencies(
      price_start = local_price,
      from = local_currency,
      to = final_currency,
      date = date_transaction
    )
  )

## End(Not run)
</code></pre>

<hr>
<h2 id='convert_to_iso2Code'>Convert any country input into its iso2Code</h2><span id='topic+convert_to_iso2Code'></span>

<h3>Description</h3>

<p>'convert_to_iso2Code' accepts the type of country input and the country, and returns the relevant iso2Code
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_to_iso2Code(country_input_type_string, country, countries_dataframe)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convert_to_iso2Code_+3A_country_input_type_string">country_input_type_string</code></td>
<td>
<p>Either &quot;country_name&quot; or &quot;iso2Code&quot; - use country_input_type(country, countries_dataframe) to determine or assign manually.</p>
</td></tr>
<tr><td><code id="convert_to_iso2Code_+3A_country">country</code></td>
<td>
<p>A country/region name or iso2Code.</p>
</td></tr>
<tr><td><code id="convert_to_iso2Code_+3A_countries_dataframe">countries_dataframe</code></td>
<td>
<p>The output of show_countries()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector containing a valid iso2Code
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

# Assign so as to save on API calls (recommended)
countries_dataframe &lt;- show_countries()
country &lt;- "Australia"
country_input_type_string &lt;- country_input_type(country, countries_dataframe)
convert_to_iso2Code(country_input_type_string, country, countries_dataframe)
# [1] "AU"

country &lt;- "AU"
country_input_type_string &lt;- country_input_type(country, countries_dataframe)
convert_to_iso2Code(country_input_type_string, country, countries_dataframe)
# [1] "AU"



## End(Not run)

</code></pre>

<hr>
<h2 id='country_input_type'>Determines whether country input is a country name or iso2Code</h2><span id='topic+country_input_type'></span>

<h3>Description</h3>

<p>Determines whether a string is a country name, an iso2Code, or invalid (not a World Bank API
country/region)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>country_input_type(country_input, countries_dataframe)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="country_input_type_+3A_country_input">country_input</code></td>
<td>
<p>A country/region the user wishes to validate (string) E.g. &quot;Australia&quot;.</p>
</td></tr>
<tr><td><code id="country_input_type_+3A_countries_dataframe">countries_dataframe</code></td>
<td>
<p>A dataframe containing available iso2Code and country_name
(see show_countries()).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# Assign so as to save on API calls - recommended
countries_dataframe &lt;- show_countries()

  country &lt;- "Australia"
  country_input_type(country, countries_dataframe)
# [1] "country_name"

  country &lt;- "AU"
  country_input_type(country, countries_dataframe)
# [1] "iso2Code"

  country &lt;- "something other than a valid country name or iso2Code"
  country_input_type(country, countries_dataframe)
# [1] "invalid"

## End(Not run)
</code></pre>

<hr>
<h2 id='currencies'>Retrieve available currencies and their respective symbols/codes</h2><span id='topic+currencies'></span>

<h3>Description</h3>

<p>Retrieve available currencies and their respective symbols/codes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>currencies()
</code></pre>


<h3>Value</h3>

<p>A data.frame of available currencies and their respective symbols/codes
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Display available currencies and their respective symbols/codes
currencies()
#                                description code
# 1              United Arab Emirates Dirham  AED
# 2                           Afghan Afghani  AFN
# 3                             Albanian Lek  ALL
# 4                            Armenian Dram  AMD
# 5            Netherlands Antillean Guilder  ANG
# 6                           Angolan Kwanza  AOA
# 7                           Argentine Peso  ARS

## End(Not run)


</code></pre>

<hr>
<h2 id='currency_characters'>Provide currency characters</h2><span id='topic+currency_characters'></span>

<h3>Description</h3>

<p>Provide currency characters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>currency_characters()
</code></pre>


<h3>Value</h3>

<p>A character vector of currency symbols
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
currency_characters()

</code></pre>

<hr>
<h2 id='currency_info'>Information for each of 191 currencies</h2><span id='topic+currency_info'></span>

<h3>Description</h3>

<p>Information for each of 191 currencies
</p>


<h3>Usage</h3>

<pre><code class='language-R'>currency_info
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 191 rows and 15 columns.
</p>


<h3>Value</h3>

<p>A data.frame containing currency information for 191 currencies.
Currency information includes: name, iso code, currency symbol (and
alternative symbols if applicable), subunit, number of subunits per major
unit, whether the currency symbol ought to appear before or after the
number of units, display format, html entity, decimal mark,
thousands separator, iso numeric, and smallest denomination.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>head(currency_info)
</code></pre>

<hr>
<h2 id='currency_to_numeric'>Convert human readable currencies into numeric data</h2><span id='topic+currency_to_numeric'></span>

<h3>Description</h3>

<p>Convert human readable currencies into numeric data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>currency_to_numeric(currency_text)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="currency_to_numeric_+3A_currency_text">currency_text</code></td>
<td>
<p>Price or vector of prices</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
c("$134,345.05", "£22", "¥30000") %&gt;% currency_to_numeric()
# [1] 134345     22  30000
</code></pre>

<hr>
<h2 id='display_api_info'>Display link to further information</h2><span id='topic+display_api_info'></span>

<h3>Description</h3>

<p>Display link to further information
</p>


<h3>Usage</h3>

<pre><code class='language-R'>display_api_info()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Display a message indicating where further documentation can be found

## End(Not run)

</code></pre>

<hr>
<h2 id='exchange_rate_latest'>Retrieve the latest exchange rates between the provided currency code</h2><span id='topic+exchange_rate_latest'></span>

<h3>Description</h3>

<p>Retrieve the latest exchange rates between the provided currency code
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exchange_rate_latest(currency)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exchange_rate_latest_+3A_currency">currency</code></td>
<td>
<p>A currency code (see currencies() for supported codes)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame containing the latest exchange rates between the provided currency code
and each other available currency
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

exchange_rate_latest("AUD")
# Daily AUD exchange rate as at end of day 2020-07-27 GMT
#     currency one_aud_is_equivalent_to
# 1        AED                  2.61894
# 2        AFN                 54.47724
# 3        ALL                 75.51799
# 4        AMD                343.40193
# 5        ANG                  1.26829
# 6        AOA                400.54604


# Defaults to USD
exchange_rate_latest()
#     currency one_USD_is_equivalent_to
# 1        AED                   3.6730
# 2        AFN                  76.4035
# 3        ALL                 105.9129
# 4        AMD                 481.6162
# 5        ANG                   1.7788
# 6        AOA                 561.7599

# It can also accept other base rates
exchange_rate_latest("AUD")
#    currency one_AUD_is_equivalent_to
# 1       AED                  2.31619
# 2       AFN                 48.69229
# 3       ALL                 63.87806
# 4       AMD                260.72150
# 5       ANG                  1.13675
# 6       AOA                522.76772

## End(Not run)

</code></pre>

<hr>
<h2 id='extract_salary'>Extract numeric salary from text data</h2><span id='topic+extract_salary'></span>

<h3>Description</h3>

<p>Extract numeric salary from text data. 'extract_salary' automatically converts weekly and hourly rates to amounts per annum.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_salary(salary_text, exclude_below, exclude_above, salary_range_handling,
include_periodicity, hours_per_workday, days_per_workweek, working_weeks_per_year)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_salary_+3A_salary_text">salary_text</code></td>
<td>
<p>A character string, or vector of character strings.</p>
</td></tr>
<tr><td><code id="extract_salary_+3A_exclude_below">exclude_below</code></td>
<td>
<p>A lower bound. Anything lower than this number will be replaced with NA.</p>
</td></tr>
<tr><td><code id="extract_salary_+3A_exclude_above">exclude_above</code></td>
<td>
<p>An upper bound. Anything above this number will be replaced with NA.</p>
</td></tr>
<tr><td><code id="extract_salary_+3A_salary_range_handling">salary_range_handling</code></td>
<td>
<p>A method of handling salary ranges. Defaults to returning an average of the range; can also be set to &quot;max&quot; or &quot;min&quot;.</p>
</td></tr>
<tr><td><code id="extract_salary_+3A_include_periodicity">include_periodicity</code></td>
<td>
<p>Set to TRUE to return an additional column stating the detected peridicity in the character string. Periodicity is assumed to be 'Annual' unless evidence is found to the contrary.</p>
</td></tr>
<tr><td><code id="extract_salary_+3A_hours_per_workday">hours_per_workday</code></td>
<td>
<p>Set assumed number of hours in the workday. Only affects annualisation of rates indentified as Daily. Default is 8 hours.</p>
</td></tr>
<tr><td><code id="extract_salary_+3A_days_per_workweek">days_per_workweek</code></td>
<td>
<p>Set assumed number of days per workweek. Only affects annualisation of rates indentified as Daily. Default is 5 days.</p>
</td></tr>
<tr><td><code id="extract_salary_+3A_working_weeks_per_year">working_weeks_per_year</code></td>
<td>
<p>Set assumed number of working weeks in the year. Only affects annualisation of rates indentified as Daily or Weekly. Default is 50 weeks.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame of 1 column, or 2 columns if include_periodicity is set to TRUE
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Provide a salary string and 'extract_salary' and will extract the salary and return it
extract_salary("$160,000 per annum")
# 160000


# If a range is present, the average will be taken by default
extract_salary("$160,000 - $180000.00 per annum")
# 170000


# Take the 'min' or 'max' of a salary range by setting salary_range_handling parameter accordingly
extract_salary("$160,000 - $180000.00 per annum", salary_range_handling = "min")
# 160000


# Extract salaries from character string(s)
annual_salaries &lt;- c("$160,000 - $180000.00 per annum",
                     "$160000.00 - $180000.00 per annum",
                     "$145000 - $155000.00 per annum",
                     "$70000.00 - $90000 per annum",
                     "$70000.00 - $90000.00 per annum plus 15.4% super",
                     "$80000.00 per annum plus 15.4% super",
                     "60,000 - 80,000",
                     "$78,686 to $89,463 pa, plus 15.4% superannuation",
                     "80k - 100k")

extract_salary(annual_salaries)
# 170000 170000 150000  80000  53338  40008  70000  56055  90000
# Note the fifth, sixth, and eighth elements are averages including '15' (undesirable)
# Using exclude_below parameter avoids this (see below)

# Automatically detect, extract, and annualise daily rates
daily_rates &lt;- c("$200 daily", "$400 - $600 per day", "Day rate negotiable dependent on experience")
extract_salary(daily_rates)
# 48000 120000     NA


# Automatically detect, extract, and annualise hourly rates
hourly_rates &lt;- c("$80 - $100+ per hour", "APS6/EL1 hourly rate contract")
extract_salary(hourly_rates)
# 172800   6720
# Note 6720 is undesirable. Setting the exclude_below and exclude_above sensibly avoids this


salaries &lt;- c(annual_salaries, daily_rates, hourly_rates)


# Setting lower and upper bounds provides a catch-all to remove unrealistic results
# Out of bounds values will be converted to NA
extract_salary(salaries, exclude_below = 20000, exclude_above = 600000)
# 170000 170000 150000  80000  80000  80000  70000  84074  90000  48000 120000     NA 172800     NA


# extract_salary automatically annualises hourly and daily rates
# It does so by making assumptions about the number of working weeks in a year,
# days per workweek, and hours per workday
# And the assumed number of hours per workday can be changed from the default (8)
# The assumed number of workdays per workweek can be changed from the default (5)
# The assumed number of working weeks in year can be changed from the default (50)
# E.g.
extract_salary(salaries, hours_per_workday = 7, days_per_workweek = 4,
               working_weeks_per_year = 46, exclude_below = 20000)
# 170000 170000 150000  80000  53338  40008  70000  56055  90000  36800  92000     NA 115920     NA


# To see which salaries were detected as hourly or weekly, set include_periodicity to TRUE
extract_salary(salaries, include_periodicity = TRUE, exclude_below = 20000)

# salary periodicity
# 1  170000      Annual
# 2  170000      Annual
# 3  150000      Annual
# 4   80000      Annual
# 5   80000      Annual
# 6   80000      Annual
# 7   70000      Annual
# 8   84074      Annual
# 9   90000      Annual
# 10  48000       Daily
# 11 120000       Daily
# 12     NA       Daily
# 13 172800      Hourly
# 14     NA      Hourly


</code></pre>

<hr>
<h2 id='format_currency'>Make numeric currency values human readable</h2><span id='topic+format_currency'></span>

<h3>Description</h3>

<p>Make numeric currency values human readable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_currency(amount, symbol, digits)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_currency_+3A_amount">amount</code></td>
<td>
<p>Price or vector of prices (character, numeric, or integer)</p>
</td></tr>
<tr><td><code id="format_currency_+3A_symbol">symbol</code></td>
<td>
<p>Symbol to prepend to amount (e.g. $) see: currency_characters()</p>
</td></tr>
<tr><td><code id="format_currency_+3A_digits">digits</code></td>
<td>
<p>The number of decimal places. Set equal to 2 to include cents (defaults to 0 i.e. whole major currency units)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# format_currency("2423562534234", "$")
# "$2,423,562,534,234"

# format_currency("2423562534234.876", "$", 0)
# "$2,423,562,534,234"

# format_currency("2423562534234.876", "$", 2)
# "$2,423,562,534,234.88"

# format_currency("2423562534234", "¥", 2)
# "¥2,423,562,534,234.00"

# format_currency() is vectorized and can accept vector arguments
format_currency(c("2423562534234", "20"), c("¥", "$"), c(1, 2))
# "¥2,423,562,534,234.0" "$20.00"

</code></pre>

<hr>
<h2 id='format_dollars'>Make numeric currency values human readable</h2><span id='topic+format_dollars'></span>

<h3>Description</h3>

<p>Make numeric currency values human readable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_dollars(amount, digits)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_dollars_+3A_amount">amount</code></td>
<td>
<p>Price or vector of prices (character, numeric, or integer)</p>
</td></tr>
<tr><td><code id="format_dollars_+3A_digits">digits</code></td>
<td>
<p>The number of decimal places. Set equal to 2 to include cents (defaults to 0 i.e. whole dollars)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# format_dollars("2423562534234")
# "$2,423,562,534,234"

# format_dollars("2423562534234.876", 0)
# "$2,423,562,534,234"

# format_dollars("2423562534234.876", 2)
# "$2,423,562,534,234.88"

# format_dollars("2423562534234", 2)
# "$2,423,562,534,234.00"
</code></pre>

<hr>
<h2 id='from_to_dates_rates'>Wrapper around 'priceR::historical_exchange_rates()' with slight modifications
to structure of inputs and output</h2><span id='topic+from_to_dates_rates'></span>

<h3>Description</h3>

<p>Wrapper around 'priceR::historical_exchange_rates()' with slight modifications
to structure of inputs and output
</p>


<h3>Usage</h3>

<pre><code class='language-R'>from_to_dates_rates(from, to, dates)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="from_to_dates_rates_+3A_from">from</code></td>
<td>
<p>A currency code (see currencies() for supported codes)</p>
</td></tr>
<tr><td><code id="from_to_dates_rates_+3A_to">to</code></td>
<td>
<p>A currency code</p>
</td></tr>
<tr><td><code id="from_to_dates_rates_+3A_dates">dates</code></td>
<td>
<p>A list of date ranges</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with two columns: date (of class Date), and rate
(of class numeric).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(lubridate)
from_to_dates_rates("AUD", "USD", dates = list(today()-10, today()))

## End(Not run)

</code></pre>

<hr>
<h2 id='historical_exchange_rates'>Retrieve historical exchange rates</h2><span id='topic+historical_exchange_rates'></span>

<h3>Description</h3>

<p>Retrieves historical exchange rates between a currency pair
</p>


<h3>Usage</h3>

<pre><code class='language-R'>historical_exchange_rates(from, to, start_date, end_date)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="historical_exchange_rates_+3A_from">from</code></td>
<td>
<p>A currency code (see currencies() for supported codes)</p>
</td></tr>
<tr><td><code id="historical_exchange_rates_+3A_to">to</code></td>
<td>
<p>A currency code</p>
</td></tr>
<tr><td><code id="historical_exchange_rates_+3A_start_date">start_date</code></td>
<td>
<p>A start date (of the form &quot;2010-01-01&quot;)</p>
</td></tr>
<tr><td><code id="historical_exchange_rates_+3A_end_date">end_date</code></td>
<td>
<p>An end date</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame containing exchange rate data for select currency pair
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
Retrieve AUD to USD exchange rates
au &lt;- historical_exchange_rates(from = "AUD", to = "USD",
                          start_date = "2010-01-01", end_date = "2020-06-30")

# Retrieve AUD to EUR exchange rates
ae &lt;- historical_exchange_rates(from = "AUD", to = "EUR",
                          start_date = "2010-01-01", end_date = "2020-06-30")

# Combine
cur &lt;- au %&gt;% left_join(ae, by = "date")

head(cur)

## End(Not run)


</code></pre>

<hr>
<h2 id='make_dates'>Creates date ranges so as to batch up large API calls into many smaller ones</h2><span id='topic+make_dates'></span>

<h3>Description</h3>

<p>Creates date ranges so as to batch up large API calls into many smaller ones
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_dates(start_date, end_date, n_days)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_dates_+3A_start_date">start_date</code></td>
<td>
<p>A start date (of the form &quot;2010-01-01&quot;)</p>
</td></tr>
<tr><td><code id="make_dates_+3A_end_date">end_date</code></td>
<td>
<p>An end date</p>
</td></tr>
<tr><td><code id="make_dates_+3A_n_days">n_days</code></td>
<td>
<p>The maximum number of days in each period</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame containing start and end dates for periods of length no longer than n_days
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Simple test
start_date = "2010-01-01"
end_date = "2020-06-30"
n_days = 365
priceR:::make_dates(start_date, end_date, n_days)

# With lots of periods
start_date = "2010-01-01"
end_date = "2020-06-30"
n_days = 20
priceR:::make_dates(start_date, end_date, n_days)

# Less than one period
start_date = "2020-01-01"
end_date = "2020-06-30"
n_days = 365
priceR:::make_dates(start_date, end_date, n_days)

# 366 days (note 2020 was a leap year)
start_date = "2019-07-30"
end_date = "2020-07-29"
n_days = 365
priceR:::make_dates(start_date, end_date, n_days)

# 365 days
start_date = "2019-07-30"
end_date = "2020-07-28"
n_days = 365
priceR:::make_dates(start_date, end_date, n_days)

# 1095 days (3 years)
start_date = "2019-07-30"
end_date = "2022-07-28"
n_days = 365
priceR:::make_dates(start_date, end_date, n_days)

</code></pre>

<hr>
<h2 id='pminmax'>Removes redundant API calls of currency pairs. That is, revmoes the need
to for separate calls for both
'from = EUR, to = USD' and 'from = USD, to = EUR'</h2><span id='topic+pminmax'></span>

<h3>Description</h3>

<p>Removes redundant API calls of currency pairs. That is, revmoes the need
to for separate calls for both
'from = EUR, to = USD' and 'from = USD, to = EUR'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pminmax(x, y)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pminmax_+3A_x">x</code></td>
<td>
<p>A currency code (see currencies() for supported codes)</p>
</td></tr>
<tr><td><code id="pminmax_+3A_y">y</code></td>
<td>
<p>A currency code</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# See: https://stackoverflow.com/a/73254014/9059865



</code></pre>

<hr>
<h2 id='retrieve_historical_rates'>Retrieve historical exchange rates</h2><span id='topic+retrieve_historical_rates'></span>

<h3>Description</h3>

<p>Retrieves historical exchange rates between a currency pair - retrieves max. 365 days' data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>retrieve_historical_rates(from, to, start_date, end_date)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="retrieve_historical_rates_+3A_from">from</code></td>
<td>
<p>A currency code (see currencies() for supported codes)</p>
</td></tr>
<tr><td><code id="retrieve_historical_rates_+3A_to">to</code></td>
<td>
<p>A currency code</p>
</td></tr>
<tr><td><code id="retrieve_historical_rates_+3A_start_date">start_date</code></td>
<td>
<p>A start date (of the form &quot;2010-01-01&quot;)</p>
</td></tr>
<tr><td><code id="retrieve_historical_rates_+3A_end_date">end_date</code></td>
<td>
<p>An end date</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame containing exchange rate data for select currency pair
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Note date range &gt;365 days', yet only 365 days' returned.
# Use historical_exchange_rates() for &gt; 365 days'.
 priceR:::retrieve_historical_rates("USD", to = "AUD",
                                    start_date = "2018-01-01",
                                    end_date = "2020-06-30")

## End(Not run)


</code></pre>

<hr>
<h2 id='retrieve_inflation_data'>Retrieve historical inflation data</h2><span id='topic+retrieve_inflation_data'></span>

<h3>Description</h3>

<p>Retrieve inflation data for any country/region (using iso2Code or country_name)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>retrieve_inflation_data(country, countries_dataframe)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="retrieve_inflation_data_+3A_country">country</code></td>
<td>
<p>A country_name or iso2code (see show_countries() for complete list of available inputs).</p>
</td></tr>
<tr><td><code id="retrieve_inflation_data_+3A_countries_dataframe">countries_dataframe</code></td>
<td>
<p>The output from show_countries(). It is optional, but if not provided, it will be retrieved via the API.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame containing inflation data from World Bank API for specified country
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Retrieve inflation data for any country (or iso2Code)
country &lt;- "AU"
inflation_dataframe &lt;- retrieve_inflation_data(country)

country &lt;- "Australia"
countries_dataframe &lt;- show_countries()
inflation_dataframe &lt;- retrieve_inflation_data(country, countries_dataframe)

## End(Not run)
# inflation_dataframe
#    indicator.id                       indicator.value country.id country.value     value
#  FP.CPI.TOTL.ZG Inflation, consumer prices (annual %)         AU     Australia      &lt;NA&gt;
#  FP.CPI.TOTL.ZG Inflation, consumer prices (annual %)         AU     Australia   1.94864
#  FP.CPI.TOTL.ZG Inflation, consumer prices (annual %)         AU     Australia   1.27699
#  FP.CPI.TOTL.ZG Inflation, consumer prices (annual %)         AU     Australia   1.50836
#  Etc


</code></pre>

<hr>
<h2 id='round_down_to_nearest'>Round prices down to the nearest specified increment</h2><span id='topic+round_down_to_nearest'></span>

<h3>Description</h3>

<p>Round prices down to the nearest specified increment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>round_down_to_nearest(amount, to_nearest)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="round_down_to_nearest_+3A_amount">amount</code></td>
<td>
<p>Price to be rounded</p>
</td></tr>
<tr><td><code id="round_down_to_nearest_+3A_to_nearest">to_nearest</code></td>
<td>
<p>Increment to which price is to be rounded down to</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
# Round down to nearest 0.05 (5c)
library(dplyr)
prices &lt;- c(4.45, 5.22, 0.16, 27.88, 112.19)
prices %&gt;% round_down_to_nearest(0.05)


# Round down to nearest $10
prices &lt;- c(4.45, 5.22, 0.16, 27.88, 112.19)
prices %&gt;% round_down_to_nearest(10)
</code></pre>

<hr>
<h2 id='round_to_nearest'>Round prices to the nearest specified increment</h2><span id='topic+round_to_nearest'></span>

<h3>Description</h3>

<p>Round prices to the nearest specified increment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>round_to_nearest(amount, to_nearest)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="round_to_nearest_+3A_amount">amount</code></td>
<td>
<p>Price to be rounded</p>
</td></tr>
<tr><td><code id="round_to_nearest_+3A_to_nearest">to_nearest</code></td>
<td>
<p>Increment to which price is to be rounded to</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
# Round to nearest 0.05 (5c)
library(dplyr)
prices &lt;- c(4.45, 5.22, 0.16, 27.88, 112.19)
prices %&gt;% round_to_nearest(0.05)


# Round to nearest $10
prices &lt;- c(4.45, 5.22, 0.16, 27.88, 112.19)
prices %&gt;% round_to_nearest(10)


</code></pre>

<hr>
<h2 id='round_up_to_nearest'>Round prices up to the nearest specified increment</h2><span id='topic+round_up_to_nearest'></span>

<h3>Description</h3>

<p>Round prices up to the nearest specified increment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>round_up_to_nearest(amount, to_nearest)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="round_up_to_nearest_+3A_amount">amount</code></td>
<td>
<p>Price to be rounded</p>
</td></tr>
<tr><td><code id="round_up_to_nearest_+3A_to_nearest">to_nearest</code></td>
<td>
<p>Increment to which price is to be rounded up to</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
# Round up to nearest 0.05 (5c)
library(dplyr)
prices &lt;- c(4.45, 5.22, 0.16, 27.88, 112.19)
prices %&gt;% round_up_to_nearest(0.05)


# Round up to nearest $10
prices &lt;- c(4.45, 5.22, 0.16, 27.88, 112.19)
prices %&gt;% round_up_to_nearest(10)
</code></pre>

<hr>
<h2 id='show_countries'>Show available country codes</h2><span id='topic+show_countries'></span>

<h3>Description</h3>

<p>'show_countries' calls the World Bank API and retrieves a list of available countries and regions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_countries()
</code></pre>


<h3>Value</h3>

<p>A data.frame of countries available to query using the World Bank API
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Simply call show_countries() to receive a dataframe of all countries (and regions) and their
# iso2Code

# show_countries()
#       iso2Code         country_name
#   1         AW                Aruba
#   2         AF          Afghanistan
#   3         A9               Africa
#   4         AO               Angola
#   Etc


</code></pre>

<hr>
<h2 id='url_all_results'>Generate a World Bank API URL that will return all results for a given indicator in JSON format</h2><span id='topic+url_all_results'></span>

<h3>Description</h3>

<p>results and returns JSON format
</p>


<h3>Usage</h3>

<pre><code class='language-R'>url_all_results(original_url)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="url_all_results_+3A_original_url">original_url</code></td>
<td>
<p>A World Bank API URL. E.g. &quot;http://api.worldbank.org/v2/country&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Provide a World Bank API URL and `url_all_results` will convert it into one with all results
# for that indicator
## Not run: 
  original_url &lt;- "http://api.worldbank.org/v2/country" # Note: no ?format=json on url
  url_all_results(original_url)

## End(Not run)
# "http://api.worldbank.org/v2/country?format=json&amp;per_page=304"



</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
