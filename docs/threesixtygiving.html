<!DOCTYPE html><html><head><title>Help for package threesixtygiving</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {threesixtygiving}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#threesixtygiving'><p>threesixtygiving package</p></a></li>
<li><a href='#tsg_all_grants'><p>All grants</p></a></li>
<li><a href='#tsg_available'><p>Available datasets</p></a></li>
<li><a href='#tsg_core_data'><p>Core Data</p></a></li>
<li><a href='#tsg_missing'><p>Identify missing data sets</p></a></li>
<li><a href='#tsg_process_data'><p>Convert data to tibble</p></a></li>
<li><a href='#tsg_search_funders'><p>Search funders</p></a></li>
<li><a href='#tsg_search_grants'><p>Search for specific datasets</p></a></li>
<li><a href='#tsg_specific_df'><p>Get specific datasets</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Download Charitable Grants from the '360Giving' Platform</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Access open data from <a href="https://www.threesixtygiving.org">https://www.threesixtygiving.org</a>, a 
    database of charitable grant giving in the UK operated by '360Giving'.
    The package provides functions to search and retrieve data on charitable 
    grant giving, and process that data into tidy formats. It relies on the 
    '360Giving' data standard, described at 
    <a href="https://standard.threesixtygiving.org/">https://standard.threesixtygiving.org/</a>.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.evanodell.com/threesixtygiving">https://docs.evanodell.com/threesixtygiving</a>,
<a href="https://github.com/evanodell/threesixtygiving">https://github.com/evanodell/threesixtygiving</a>,</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/evanodell/threesixtygiving/issues">https://github.com/evanodell/threesixtygiving/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, httr, readxl, readr, jsonlite, purrr, janitor, tidyr,
tidyselect, anytime, tibble, curl</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, testthat (&ge; 2.1.0), knitr, rmarkdown, ggplot2, scales,
stringi, ggrepel, fixerapi</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-11-29 10:45:27 UTC; evanodell</td>
</tr>
<tr>
<td>Author:</td>
<td>Evan Odell <a href="https://orcid.org/0000-0003-1845-808X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Evan Odell &lt;evanodell91@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-12-02 09:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='threesixtygiving'>threesixtygiving package</h2><span id='topic+threesixtygiving-package'></span>

<h3>Description</h3>

<p>360Giving is a data standard for publishing information about
charitable grant giving in the UK. <code>threesixtygiving</code> provides functions to
retrieve and process charitable grant funding data from 360Giving.
</p>


<h3>Details</h3>

<p>See the <a href="https://www.threesixtygiving.org/">360 Giving website</a>
for more information on the source of this data, and the
<a href="https://standard.threesixtygiving.org">360Giving Standard</a> page for
details of the data standard this package relies on.
</p>

<hr>
<h2 id='tsg_all_grants'>All grants</h2><span id='topic+tsg_all_grants'></span>

<h3>Description</h3>

<p>Returns a list of data frames with details of all grants from funders
returned by <code><a href="#topic+tsg_available">tsg_available()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tsg_all_grants(verbose = TRUE, timeout = 30, retries = 0, correct_names = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tsg_all_grants_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code>, prints console messages on data retrieval progress.
Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="tsg_all_grants_+3A_timeout">timeout</code></td>
<td>
<p>The maximum request time, in seconds. If data is not returned
in this time, a value of <code>NA</code> is returned for that dataset.
Defaults to 30 seconds.</p>
</td></tr>
<tr><td><code id="tsg_all_grants_+3A_retries">retries</code></td>
<td>
<p>The number of retries to make if a request is not successful.
Defaults to 0.</p>
</td></tr>
<tr><td><code id="tsg_all_grants_+3A_correct_names">correct_names</code></td>
<td>
<p>If <code>TRUE</code>, corrects known mistakes in column names,
such as spelling mistakes. Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Due to the structure of the 360 Giving data, the package will make
multiple attempts to request data. This can cause issues with servers
automatically blocking requests. You can use <code><a href="#topic+tsg_missing">tsg_missing()</a></code> to identify
missing sets of grant data.
</p>


<h3>Value</h3>

<p>A list of tibbles with grant data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
all_grants &lt;- tsg_all_grants()

## End(Not run)

</code></pre>

<hr>
<h2 id='tsg_available'>Available datasets</h2><span id='topic+tsg_available'></span>

<h3>Description</h3>

<p>Returns a tibble with information on all datasets available through
360Giving. Some funders have multiple datasets
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tsg_available()
</code></pre>


<h3>Value</h3>

<p>A tibble with details on all available datasets.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
available &lt;- tsg_available()

## End(Not run)

</code></pre>

<hr>
<h2 id='tsg_core_data'>Core Data</h2><span id='topic+tsg_core_data'></span>

<h3>Description</h3>

<p>Given a list returned by <code><a href="#topic+tsg_all_grants">tsg_all_grants()</a></code> or <code><a href="#topic+tsg_search_grants">tsg_search_grants()</a></code>, creates
a tibble with the core variables required by the
<a href="https://standard.threesixtygiving.org/en/latest/">360Giving</a> open standard,
as well as the publisher prefix and dataset identifier,
which are useful for data processing, and the licence the data was
published under.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tsg_core_data(x, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tsg_core_data_+3A_x">x</code></td>
<td>
<p>A list of tibble with grant data returned by <code><a href="#topic+tsg_all_grants">tsg_all_grants()</a></code>.</p>
</td></tr>
<tr><td><code id="tsg_core_data_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code>, prints console messages on data retrieval progress.
Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with the core variables in the 360Giving standard.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+tsg_process_data">tsg_process_data()</a></code>, which does the same processing but returns
all available variables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
grants &lt;- tsg_all_grants()

df &lt;- tsg_core_data(grants)

## End(Not run)
</code></pre>

<hr>
<h2 id='tsg_missing'>Identify missing data sets</h2><span id='topic+tsg_missing'></span>

<h3>Description</h3>

<p>Returns a tibble with details on any available data missing from a list
of grants returned by <code><a href="#topic+tsg_all_grants">tsg_all_grants()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tsg_missing(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tsg_missing_+3A_x">x</code></td>
<td>
<p>A list of tibble with grant data returned by <code><a href="#topic+tsg_all_grants">tsg_all_grants()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with details on funders missing data from a list of tibbles
passed to the function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
all_grants &lt;- tsg_all_grants()

missing_grants &lt;- tsg_missing(all_grants)

## End(Not run)

</code></pre>

<hr>
<h2 id='tsg_process_data'>Convert data to tibble</h2><span id='topic+tsg_process_data'></span>

<h3>Description</h3>

<p>Given a list returned by <code><a href="#topic+tsg_all_grants">tsg_all_grants()</a></code> or <code><a href="#topic+tsg_search_grants">tsg_search_grants()</a></code>,
creates a tibble with all available variables. This tibble contains roughly
200 columns if all available grants are used (as of October 2019),
due to differences in how grant data is labelled and structured.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tsg_process_data(x, min_coverage = 0, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tsg_process_data_+3A_x">x</code></td>
<td>
<p>A list of tibble with grant data returned by <code><a href="#topic+tsg_all_grants">tsg_all_grants()</a></code>.</p>
</td></tr>
<tr><td><code id="tsg_process_data_+3A_min_coverage">min_coverage</code></td>
<td>
<p>A number from 0 to 1. If &gt;0, only returns variables
with a value other than <code>NA</code> for at least that proportion of rows. Defaults
to 0 and returns all columns.</p>
</td></tr>
<tr><td><code id="tsg_process_data_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code>, prints console messages on data retrieval progress.
Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with all variables from all provided grants.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+tsg_core_data">tsg_core_data()</a></code>, which does the same processing but only returns
the core variables in the 360Giving standard.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
grants &lt;- tsg_all_grants()

df1 &lt;- tsg_process_data(grants)

# Only return data from columns with more than 50% coverage
df2 &lt;- tsg_process_data(grants, min_coverage = 0.5)

## End(Not run)

</code></pre>

<hr>
<h2 id='tsg_search_funders'>Search funders</h2><span id='topic+tsg_search_funders'></span>

<h3>Description</h3>

<p>Return a tibble with information on all grant datasets where funder data
matches one or more search strings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tsg_search_funders(
  search,
  search_in = NULL,
  verbose = TRUE,
  ignore_case = TRUE,
  perl = FALSE,
  fixed = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tsg_search_funders_+3A_search">search</code></td>
<td>
<p>The string(s) to search for. By default allows POSIX 1003.2
regular expressions. Use <code>perl = TRUE</code> for perl-style regex, or
<code>fixed = TRUE</code> for fixed strings.
Accepts single strings or a character vector of strings.</p>
</td></tr>
<tr><td><code id="tsg_search_funders_+3A_search_in">search_in</code></td>
<td>
<p>The name of the column to search in. Accepts single strings
or a character vector of column names. If <code>NULL</code>, searches all columns.</p>
</td></tr>
<tr><td><code id="tsg_search_funders_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code>, prints console messages on data retrieval progress.
Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="tsg_search_funders_+3A_ignore_case">ignore_case</code></td>
<td>
<p>If <code>TRUE</code> ignores case.</p>
</td></tr>
<tr><td><code id="tsg_search_funders_+3A_perl">perl</code></td>
<td>
<p>If <code>TRUE</code>, uses perl-style regex.</p>
</td></tr>
<tr><td><code id="tsg_search_funders_+3A_fixed">fixed</code></td>
<td>
<p>If <code>TRUE</code>, searches will be matched as-is.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with information on matching datasets
</p>


<h3>See Also</h3>

<p><code><a href="#topic+tsg_search_grants">tsg_search_grants()</a></code> for retrieving all grants
from matching funders.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
search1 &lt;- tsg_search_funders(search = c("bbc", "caBinet"))

## End(Not run)

</code></pre>

<hr>
<h2 id='tsg_search_grants'>Search for specific datasets</h2><span id='topic+tsg_search_grants'></span>

<h3>Description</h3>

<p>Returns a list of tibbles with details of all grants from specific funders.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tsg_search_grants(
  search,
  search_in = NULL,
  verbose = TRUE,
  ignore_case = TRUE,
  perl = FALSE,
  fixed = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tsg_search_grants_+3A_search">search</code></td>
<td>
<p>The string(s) to search for. By default allows POSIX 1003.2
regular expressions. Use <code>perl = TRUE</code> for perl-style regex, or
<code>fixed = TRUE</code> for fixed strings.
Accepts single strings or a character vector of strings.</p>
</td></tr>
<tr><td><code id="tsg_search_grants_+3A_search_in">search_in</code></td>
<td>
<p>The name of the column to search in. Accepts single strings
or a character vector of column names. If <code>NULL</code>, searches all columns.</p>
</td></tr>
<tr><td><code id="tsg_search_grants_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code>, prints console messages on data retrieval progress.
Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="tsg_search_grants_+3A_ignore_case">ignore_case</code></td>
<td>
<p>If <code>TRUE</code> ignores case.</p>
</td></tr>
<tr><td><code id="tsg_search_grants_+3A_perl">perl</code></td>
<td>
<p>If <code>TRUE</code>, uses perl-style regex.</p>
</td></tr>
<tr><td><code id="tsg_search_grants_+3A_fixed">fixed</code></td>
<td>
<p>If <code>TRUE</code>, searches will be matched as-is.</p>
</td></tr>
<tr><td><code id="tsg_search_grants_+3A_...">...</code></td>
<td>
<p>Additional params passed to <code><a href="#topic+tsg_all_grants">tsg_all_grants()</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>tsg_search_grants</code> retrieves grants where funder data
matches one or more search strings. If only one dataset
matches queries, returns a tibble of that dataset.
Use <code><a href="#topic+tsg_specific_df">tsg_specific_df()</a></code> to pass a dataframe.
</p>


<h3>Value</h3>

<p>A single tibble (if only one grant maker matches the queries) or a
list of tibbles (if the query matches multiple datasets).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+tsg_search_funders">tsg_search_funders()</a></code> for retrieving information on available
datasets from matching funders. <code><a href="#topic+tsg_specific_df">tsg_specific_df()</a></code> to retrieve data
contained with all or specific rows of a tibble returned
by <code><a href="#topic+tsg_available">tsg_available()</a></code> or <code><a href="#topic+tsg_missing">tsg_missing()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
specific1 &lt;- tsg_search_grants(search = c("bbc", "caBinet"))

## End(Not run)

</code></pre>

<hr>
<h2 id='tsg_specific_df'>Get specific datasets</h2><span id='topic+tsg_specific_df'></span>

<h3>Description</h3>

<p>Retrieve data contained with all or specific rows of a tibble
returned by <code><a href="#topic+tsg_available">tsg_available()</a></code> or <code><a href="#topic+tsg_missing">tsg_missing()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tsg_specific_df(x, verbose = TRUE, timeout = 30, retries = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tsg_specific_df_+3A_x">x</code></td>
<td>
<p>All or a subset of a tibble returned by
<code><a href="#topic+tsg_available">tsg_available()</a></code> or <code><a href="#topic+tsg_missing">tsg_missing()</a></code></p>
</td></tr>
<tr><td><code id="tsg_specific_df_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code>, prints console messages on data retrieval progress.
Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="tsg_specific_df_+3A_timeout">timeout</code></td>
<td>
<p>The maximum request time, in seconds. If data is not returned
in this time, a value of <code>NA</code> is returned for that dataset.
Defaults to 30 seconds.</p>
</td></tr>
<tr><td><code id="tsg_specific_df_+3A_retries">retries</code></td>
<td>
<p>The number of retries to make if a request is not successful.
Defaults to 0.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of tibbles with grant data.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+tsg_search_grants">tsg_search_grants()</a></code>
</p>
<p><code><a href="#topic+tsg_available">tsg_available()</a></code>
</p>
<p><code><a href="#topic+tsg_missing">tsg_missing()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
all_grants &lt;- tsg_all_grants()

missing_grants &lt;- tsg_missing(all_grants)

more_grants &lt;- tsg_specific_df(missing_grants)

## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
