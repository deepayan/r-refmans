<!DOCTYPE html><html lang="en"><head><title>Help for package arcgisgeocode</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {arcgisgeocode}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#arcgisgeocode-package'><p>arcgisgeocode: A Robust Interface to ArcGIS 'Geocoding Services'</p></a></li>
<li><a href='#esri_wkids'><p>Esri well-known IDs</p></a></li>
<li><a href='#find_address_candidates'><p>Find Address Candidates</p></a></li>
<li><a href='#geocode_addresses'><p>Batch Geocode Addresses</p></a></li>
<li><a href='#geocode_server'><p>Create a GeocodeServer</p></a></li>
<li><a href='#iso_3166_codes'><p>ISO 3166 Country Codes</p></a></li>
<li><a href='#list_geocoders'><p>List Available Geocoder Services</p></a></li>
<li><a href='#reverse_geocode'><p>Reverse Geocode Locations</p></a></li>
<li><a href='#storage'><p>Storing Geocoding Results</p></a></li>
<li><a href='#suggest_places'><p>Search Suggestion</p></a></li>
<li><a href='#world_geocoder'><p>ArcGIS World Geocoder</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>A Robust Interface to ArcGIS 'Geocoding Services'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.2</td>
</tr>
<tr>
<td>Description:</td>
<td>A very fast and robust interface to ArcGIS 'Geocoding
    Services'. Provides capabilities for reverse geocoding, finding
    address candidates, character-by-character search autosuggestion, and
    batch geocoding. The public 'ArcGIS World Geocoder' is accessible for
    free use via 'arcgisgeocode' for all services except batch geocoding.
    'arcgisgeocode' also integrates with 'arcgisutils' to provide access
    to custom locators or private 'ArcGIS World Geocoder' hosted on
    'ArcGIS Enterprise'. Learn more in the 'Geocode service' API reference
    <a href="https://developers.arcgis.com/rest/geocode/api-reference/overview-world-geocoding-service.htm">https://developers.arcgis.com/rest/geocode/api-reference/overview-world-geocoding-service.htm</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/r-arcgis/arcgisgeocode">https://github.com/r-arcgis/arcgisgeocode</a>,
<a href="https://r.esri.com/arcgisgeocode/">https://r.esri.com/arcgisgeocode/</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>arcgisutils (&ge; 0.3.0), cli, curl, httr2 (&ge; 1.0.5), jsonify,
RcppSimdJson, rlang (&ge; 1.1.0), sf</td>
</tr>
<tr>
<td>Suggests:</td>
<td>data.table, dplyr, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/rextendr/version:</td>
<td>0.3.1.9000</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>Cargo (Rust's package manager), rustc &gt;= 1.67</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.2)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-09-26 19:19:24 UTC; josiahparry</td>
</tr>
<tr>
<td>Author:</td>
<td>Josiah Parry <a href="https://orcid.org/0000-0001-9910-865X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Josiah Parry &lt;josiah.parry@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-09-27 14:50:10 UTC</td>
</tr>
</table>
<hr>
<h2 id='arcgisgeocode-package'>arcgisgeocode: A Robust Interface to ArcGIS 'Geocoding Services'</h2><span id='topic+arcgisgeocode-package'></span>

<h3>Description</h3>

<p>A very fast and robust interface to ArcGIS 'Geocoding Services'. Provides capabilities for reverse geocoding, finding address candidates, character-by-character search autosuggestion, and batch geocoding. The public 'ArcGIS World Geocoder' is accessible for free use via 'arcgisgeocode' for all services except batch geocoding. 'arcgisgeocode' also integrates with 'arcgisutils' to provide access to custom locators or private 'ArcGIS World Geocoder' hosted on 'ArcGIS Enterprise'. Learn more in the 'Geocode service' API reference <a href="https://developers.arcgis.com/rest/geocode/api-reference/overview-world-geocoding-service.htm">https://developers.arcgis.com/rest/geocode/api-reference/overview-world-geocoding-service.htm</a>.
</p>
<p>A very fast and robust interface to ArcGIS 'Geocoding Services'. Provides capabilities for reverse geocoding, finding address candidates, character-by-character search autosuggestion, and batch geocoding. The public 'ArcGIS World Geocoder' is accessible for free use via 'arcgisgeocode' for all services except batch geocoding. 'arcgisgeocode' also integrates with 'arcgisutils' to provide access to custom locators or private 'ArcGIS World Geocoder' hosted on 'ArcGIS Enterprise'. Learn more in the 'Geocode service' API reference <a href="https://developers.arcgis.com/rest/geocode/api-reference/overview-world-geocoding-service.htm">https://developers.arcgis.com/rest/geocode/api-reference/overview-world-geocoding-service.htm</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Josiah Parry <a href="mailto:josiah.parry@gmail.com">josiah.parry@gmail.com</a> (<a href="https://orcid.org/0000-0001-9910-865X">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/r-arcgis/arcgisgeocode">https://github.com/r-arcgis/arcgisgeocode</a>
</p>
</li>
<li> <p><a href="https://r.esri.com/arcgisgeocode/">https://r.esri.com/arcgisgeocode/</a>
</p>
</li></ul>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/r-arcgis/arcgisgeocode">https://github.com/r-arcgis/arcgisgeocode</a>
</p>
</li>
<li> <p><a href="https://r.esri.com/arcgisgeocode/">https://r.esri.com/arcgisgeocode/</a>
</p>
</li></ul>


<hr>
<h2 id='esri_wkids'>Esri well-known IDs</h2><span id='topic+esri_wkids'></span>

<h3>Description</h3>

<p>An integer vector containing the WKIDs of Esri authority
spatial references.
Esri WKIDs were identified from the <a href="https://cran.r-project.org/package=arcgeocoder"><code>{arcgeocoder}</code></a> package from
<a href="https://github.com/dieghernan">@dieghernan</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esri_wkids
</code></pre>


<h3>Format</h3>

<p>An object of class <code>integer</code> of length 2886.
</p>


<h3>Value</h3>

<p>a numeric vector of well-known IDs
</p>

<hr>
<h2 id='find_address_candidates'>Find Address Candidates</h2><span id='topic+find_address_candidates'></span>

<h3>Description</h3>

<p>Given an address, returns geocode result candidates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_address_candidates(
  single_line = NULL,
  address = NULL,
  address2 = NULL,
  address3 = NULL,
  neighborhood = NULL,
  city = NULL,
  subregion = NULL,
  region = NULL,
  postal = NULL,
  postal_ext = NULL,
  country_code = NULL,
  search_extent = NULL,
  location = NULL,
  category = NULL,
  crs = NULL,
  max_locations = NULL,
  for_storage = FALSE,
  match_out_of_range = NULL,
  location_type = NULL,
  lang_code = NULL,
  source_country = NULL,
  preferred_label_values = NULL,
  magic_key = NULL,
  geocoder = default_geocoder(),
  token = arc_token(),
  .progress = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="find_address_candidates_+3A_single_line">single_line</code></td>
<td>
<p>a character vector of addresses to geocode. If provided
other <code>address</code> fields cannot be used. If <code>address</code> is not provided,
<code>single_line</code> must be.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_address">address</code></td>
<td>
<p>a character vector of the first part of a street address.
Typically used for the street name and house number. But can also be a place
or building name. If <code>single_line</code> is not provided, <code>address</code> must be.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_address2">address2</code></td>
<td>
<p>a character vector of the second part of a street address.
Typically includes a house number, sub-unit, street, building, or place name.
Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_address3">address3</code></td>
<td>
<p>a character vector of the third part of an address. Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_neighborhood">neighborhood</code></td>
<td>
<p>a character vector of the smallest administrative division
associated with an address. Typically, a neighborhood or a section of a
larger populated place. Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_city">city</code></td>
<td>
<p>a character vector of the next largest administrative division
associated with an address, typically, a city or municipality. A city is a
subdivision of a subregion or a region. Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_subregion">subregion</code></td>
<td>
<p>a character vector of the next largest administrative division
associated with an address. Depending on the country, a subregion can
represent a county, state, or province. Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_region">region</code></td>
<td>
<p>a character vector of the largest administrative division
associated with an address, typically, a state or province. Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_postal">postal</code></td>
<td>
<p>a character vector of the standard postal code for an address,
typically, a three– to six-digit alphanumeric code. Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_postal_ext">postal_ext</code></td>
<td>
<p>a character vector of the postal code extension, such as
the United States Postal Service ZIP+4 code, provides finer resolution or
higher accuracy when also passing postal. Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_country_code">country_code</code></td>
<td>
<p>default <code>NULL.</code> An ISO 3166 country code.
See <code><a href="#topic+iso_3166_codes">iso_3166_codes()</a></code> for valid ISO codes. Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_search_extent">search_extent</code></td>
<td>
<p>an object of class <code>bbox</code> that limits the search area. This is especially useful for applications in which a user will search for places and addresses within the current map extent. Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_location">location</code></td>
<td>
<p>an <code>sfc_POINT</code> object that centers the search. Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_category">category</code></td>
<td>
<p>a scalar character. Place or address type that can be used to
filter suggest results. Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_crs">crs</code></td>
<td>
<p>the CRS of the returned geometries. Passed to <code>sf::st_crs()</code>.
Ignored if <code>locations</code> is not an <code>sfc_POINT</code> object.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_max_locations">max_locations</code></td>
<td>
<p>the maximum number of results to return. The default is
15 with a maximum of 50. Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_for_storage">for_storage</code></td>
<td>
<p>default <code>FALSE</code>. Whether or not the results will be saved
for long term storage.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_match_out_of_range">match_out_of_range</code></td>
<td>
<p>set to <code>TRUE</code> by service by default. Matches locations Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_location_type">location_type</code></td>
<td>
<p>default <code>"rooftop"</code>. Must be one of <code>"rooftop"</code> or <code>"street"</code>.
Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_lang_code">lang_code</code></td>
<td>
<p>default <code>NULL</code>. An ISO 3166 country code.
See <code><a href="#topic+iso_3166_codes">iso_3166_codes()</a></code> for valid ISO codes. Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_source_country">source_country</code></td>
<td>
<p>default <code>NULL</code>. An ISO 3166 country code.
See <code><a href="#topic+iso_3166_codes">iso_3166_codes()</a></code> for valid ISO codes. Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_preferred_label_values">preferred_label_values</code></td>
<td>
<p>default NULL. Must be one of <code>"postalCity"</code>
or <code>"localCity"</code>. Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_magic_key">magic_key</code></td>
<td>
<p>a unique identifier returned from <code><a href="#topic+suggest_places">suggest_places()</a></code>.
When a <code>magic_key</code> is provided, results are returned faster. Optional.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_geocoder">geocoder</code></td>
<td>
<p>default <code><a href="#topic+default_geocoder">default_geocoder()</a></code>.</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_token">token</code></td>
<td>
<p>an object of class <code>httr2_token</code> as generated by <code><a href="arcgisutils.html#topic+auth_code">auth_code()</a></code>
or related function</p>
</td></tr>
<tr><td><code id="find_address_candidates_+3A_.progress">.progress</code></td>
<td>
<p>default <code>TRUE</code>. Whether a progress bar should be provided.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Utilizes the <a href="https://developers.arcgis.com/rest/geocode/api-reference/geocoding-find-address-candidates.htm"><code style="white-space: pre;">&#8288;/findAddressCandidates&#8288;</code></a> endpoint.
</p>
<p>The endpoint can only handle one request at a time. To
make the operation as performant as possible, requests are sent in parallel
using <code><a href="httr2.html#topic+req_perform_parallel">httr2::req_perform_parallel()</a></code>. The JSON responses are then processed
using Rust and returned as an sf object.
</p>


<h3>Value</h3>

<p>An <code>sf</code> object with 60 columns.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>candidates_from_single &lt;- find_address_candidates(
  single_line = "Bellwood Coffee, 1366 Glenwood Ave SE, Atlanta, GA, 30316, USA"
)

candidates_from_parts &lt;- find_address_candidates(
  address = c("Bellwood Coffee", "Joe's coffeehouse"),
  address2 = c("1366 Glenwood Ave SE", "510 Flat Shoals Ave"),
  city = "Atlanta",
  region = "GA",
  postal = "30316",
  country_code = "USA"
)

str(candidates_from_parts)

</code></pre>

<hr>
<h2 id='geocode_addresses'>Batch Geocode Addresses</h2><span id='topic+geocode_addresses'></span>

<h3>Description</h3>

<p>Gecocode a vector of addresses in batches.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geocode_addresses(
  single_line = NULL,
  address = NULL,
  address2 = NULL,
  address3 = NULL,
  neighborhood = NULL,
  city = NULL,
  subregion = NULL,
  region = NULL,
  postal = NULL,
  postal_ext = NULL,
  country_code = NULL,
  location = NULL,
  search_extent = NULL,
  category = NULL,
  crs = NULL,
  max_locations = NULL,
  for_storage = FALSE,
  match_out_of_range = NULL,
  location_type = NULL,
  lang_code = NULL,
  source_country = NULL,
  preferred_label_values = NULL,
  batch_size = NULL,
  geocoder = default_geocoder(),
  token = arc_token(),
  .progress = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geocode_addresses_+3A_single_line">single_line</code></td>
<td>
<p>a character vector of addresses to geocode. If provided
other <code>address</code> fields cannot be used. If <code>address</code> is not provided,
<code>single_line</code> must be.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_address">address</code></td>
<td>
<p>a character vector of the first part of a street address.
Typically used for the street name and house number. But can also be a place
or building name. If <code>single_line</code> is not provided, <code>address</code> must be.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_address2">address2</code></td>
<td>
<p>a character vector of the second part of a street address.
Typically includes a house number, sub-unit, street, building, or place name.
Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_address3">address3</code></td>
<td>
<p>a character vector of the third part of an address. Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_neighborhood">neighborhood</code></td>
<td>
<p>a character vector of the smallest administrative division
associated with an address. Typically, a neighborhood or a section of a
larger populated place. Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_city">city</code></td>
<td>
<p>a character vector of the next largest administrative division
associated with an address, typically, a city or municipality. A city is a
subdivision of a subregion or a region. Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_subregion">subregion</code></td>
<td>
<p>a character vector of the next largest administrative division
associated with an address. Depending on the country, a subregion can
represent a county, state, or province. Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_region">region</code></td>
<td>
<p>a character vector of the largest administrative division
associated with an address, typically, a state or province. Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_postal">postal</code></td>
<td>
<p>a character vector of the standard postal code for an address,
typically, a three– to six-digit alphanumeric code. Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_postal_ext">postal_ext</code></td>
<td>
<p>a character vector of the postal code extension, such as
the United States Postal Service ZIP+4 code, provides finer resolution or
higher accuracy when also passing postal. Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_country_code">country_code</code></td>
<td>
<p>default <code>NULL.</code> An ISO 3166 country code.
See <code><a href="#topic+iso_3166_codes">iso_3166_codes()</a></code> for valid ISO codes. Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_location">location</code></td>
<td>
<p>an <code>sfc_POINT</code> object that centers the search. Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_search_extent">search_extent</code></td>
<td>
<p>an object of class <code>bbox</code> that limits the search area. This is especially useful for applications in which a user will search for places and addresses within the current map extent. Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_category">category</code></td>
<td>
<p>a scalar character. Place or address type that can be used to
filter suggest results. Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_crs">crs</code></td>
<td>
<p>the CRS of the returned geometries. Passed to <code>sf::st_crs()</code>.
Ignored if <code>locations</code> is not an <code>sfc_POINT</code> object.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_max_locations">max_locations</code></td>
<td>
<p>the maximum number of results to return. The default is
15 with a maximum of 50. Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_for_storage">for_storage</code></td>
<td>
<p>default <code>FALSE</code>. Whether or not the results will be saved
for long term storage.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_match_out_of_range">match_out_of_range</code></td>
<td>
<p>set to <code>TRUE</code> by service by default. Matches locations Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_location_type">location_type</code></td>
<td>
<p>default <code>"rooftop"</code>. Must be one of <code>"rooftop"</code> or <code>"street"</code>.
Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_lang_code">lang_code</code></td>
<td>
<p>default <code>NULL</code>. An ISO 3166 country code.
See <code><a href="#topic+iso_3166_codes">iso_3166_codes()</a></code> for valid ISO codes. Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_source_country">source_country</code></td>
<td>
<p>default <code>NULL</code>. An ISO 3166 country code.
See <code><a href="#topic+iso_3166_codes">iso_3166_codes()</a></code> for valid ISO codes. Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_preferred_label_values">preferred_label_values</code></td>
<td>
<p>default NULL. Must be one of <code>"postalCity"</code>
or <code>"localCity"</code>. Optional.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_batch_size">batch_size</code></td>
<td>
<p>the number of addresses to geocode per
request. Uses the suggested batch size property of the
<code>geocoder</code>.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_geocoder">geocoder</code></td>
<td>
<p>default <code><a href="#topic+default_geocoder">default_geocoder()</a></code>.</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_token">token</code></td>
<td>
<p>an object of class <code>httr2_token</code> as generated by <code><a href="arcgisutils.html#topic+auth_code">auth_code()</a></code>
or related function</p>
</td></tr>
<tr><td><code id="geocode_addresses_+3A_.progress">.progress</code></td>
<td>
<p>default <code>TRUE</code>. Whether a progress bar should be provided.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Addresses are partitioned into batches of up to <code>batch_size</code>
elements. The batches are then sent to the geocoding service
in parallel using <code><a href="httr2.html#topic+req_perform_parallel">httr2::req_perform_parallel()</a></code>.
The JSON responses are then processed
using Rust and returned as an sf object.
</p>
<p>Utilizes the <a href="https://developers.arcgis.com/rest/geocode/api-reference/geocoding-geocode-addresses.htm"><code style="white-space: pre;">&#8288;/geocodeAddresses&#8288;</code></a> endpoint.
</p>


<h3>Value</h3>

<p>an <code>sf</code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example dataset from the Urban Institute
## Not run: 
fp &lt;- paste0(
  "https://urban-data-catalog.s3.amazonaws.com/",
  "drupal-root-live/2020/02/25/geocoding_test_data.csv"
)
to_geocode &lt;- read.csv(fp)
geocode_addresses(
  address = to_geocode$address,
  city = to_geocode$city,
  region = to_geocode$state,
  postal = to_geocode$zip
)

## End(Not run)
</code></pre>

<hr>
<h2 id='geocode_server'>Create a GeocodeServer</h2><span id='topic+geocode_server'></span>

<h3>Description</h3>

<p>Create an object of class <code>GeocodeServer</code> from a URL. This object
stores the service definition of the geocoding service as a list object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geocode_server(url, token = arc_token())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geocode_server_+3A_url">url</code></td>
<td>
<p>the URL of a geocoding server.</p>
</td></tr>
<tr><td><code id="geocode_server_+3A_token">token</code></td>
<td>
<p>an object of class <code>httr2_token</code> as generated by <code><a href="arcgisutils.html#topic+auth_code">auth_code()</a></code>
or related function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class <code>GeocodeServer</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>server_url &lt;- "https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"
geocode_server(server_url)
</code></pre>

<hr>
<h2 id='iso_3166_codes'>ISO 3166 Country Codes</h2><span id='topic+iso_3166_codes'></span>

<h3>Description</h3>

<p>Create a data.frame of ISO 3166 2 and 3 digit Country codes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>iso_3166_codes()
</code></pre>


<h3>Details</h3>

<p>Country codes provided by <a href="https://docs.rs/rust_iso3166/latest/rust_iso3166/index.html"><code>rust_iso3166</code></a>.
</p>


<h3>Value</h3>

<p>a <code>data.frame</code> with columns <code>country</code>, <code>code_2</code>, <code>code_3</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>head(iso_3166_codes())
</code></pre>

<hr>
<h2 id='list_geocoders'>List Available Geocoder Services</h2><span id='topic+list_geocoders'></span><span id='topic+default_geocoder'></span>

<h3>Description</h3>

<p>Evaluates the logged in user from an authorization token and returns
a data.frame containing the available geocoding services for the
associated token.
</p>
<p>For users who have not signed into a private portal or ArcGIS Online,
the public <a href="https://www.esri.com/en-us/arcgis/products/arcgis-world-geocoder">ArcGIS World Geocoder</a> is used. Otherwise, the first available geocoding service associated
with your authorization token is used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_geocoders(token = arc_token())

default_geocoder(token = arc_token())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_geocoders_+3A_token">token</code></td>
<td>
<p>an object of class <code>httr2_token</code> as generated by <code><a href="arcgisutils.html#topic+auth_code">auth_code()</a></code>
or related function</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>default_geocoder()</code> will return the ArcGIS World Geocoder if no
token is available. <code>list_geocoder()</code> requires an authorization
token.
</p>
<p>To manually create a <code>GeocodeServer</code> object, see <code><a href="#topic+geocode_server">geocode_server()</a></code>.
</p>


<h3>Value</h3>

<p>a <code>data.frame</code> with columns <code>url</code>, <code>northLat</code>, <code>southLat</code>,
<code>eastLon</code>, <code>westLon</code>, <code>name</code>, <code>suggest</code>, <code>zoomScale</code>, <code>placefinding</code>, <code>batch</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Default geocoder object
# ArcGIS World Geocoder b/c no token
default_geocoder()

# Requires an Authorization Token
## Not run: 
list_geocoders()

## End(Not run)
</code></pre>

<hr>
<h2 id='reverse_geocode'>Reverse Geocode Locations</h2><span id='topic+reverse_geocode'></span>

<h3>Description</h3>

<p>Determines the address for a given point.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reverse_geocode(
  locations,
  crs = sf::st_crs(locations),
  ...,
  lang_code = NULL,
  feature_type = NULL,
  location_type = c("rooftop", "street"),
  preferred_label_values = c("postalCity", "localCity"),
  for_storage = FALSE,
  geocoder = default_geocoder(),
  token = arc_token(),
  .progress = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="reverse_geocode_+3A_locations">locations</code></td>
<td>
<p>an <code>sfc_POINT</code> object of the locations to be reverse geocoded.</p>
</td></tr>
<tr><td><code id="reverse_geocode_+3A_crs">crs</code></td>
<td>
<p>the CRS of the returned geometries. Passed to <code>sf::st_crs()</code>.
Ignored if <code>locations</code> is not an <code>sfc_POINT</code> object.</p>
</td></tr>
<tr><td><code id="reverse_geocode_+3A_...">...</code></td>
<td>
<p>unused.</p>
</td></tr>
<tr><td><code id="reverse_geocode_+3A_lang_code">lang_code</code></td>
<td>
<p>default <code>NULL</code>. An ISO 3166 country code.
See <code><a href="#topic+iso_3166_codes">iso_3166_codes()</a></code> for valid ISO codes. Optional.</p>
</td></tr>
<tr><td><code id="reverse_geocode_+3A_feature_type">feature_type</code></td>
<td>
<p>limits the possible match types returned. Must be one of
<code>"StreetInt"</code>, <code>"DistanceMarker"</code>, <code>"StreetAddress"</code>, <code>"StreetName"</code>,
<code>"POI"</code>, <code>"Subaddress"</code>, <code>"PointAddress"</code>, <code>"Postal"</code>, or <code>"Locality"</code>. Optional.</p>
</td></tr>
<tr><td><code id="reverse_geocode_+3A_location_type">location_type</code></td>
<td>
<p>default <code>"rooftop"</code>. Must be one of <code>"rooftop"</code> or <code>"street"</code>.
Optional.</p>
</td></tr>
<tr><td><code id="reverse_geocode_+3A_preferred_label_values">preferred_label_values</code></td>
<td>
<p>default NULL. Must be one of <code>"postalCity"</code>
or <code>"localCity"</code>. Optional.</p>
</td></tr>
<tr><td><code id="reverse_geocode_+3A_for_storage">for_storage</code></td>
<td>
<p>default <code>FALSE</code>. Whether or not the results will be saved
for long term storage.</p>
</td></tr>
<tr><td><code id="reverse_geocode_+3A_geocoder">geocoder</code></td>
<td>
<p>default <code><a href="#topic+default_geocoder">default_geocoder()</a></code>.</p>
</td></tr>
<tr><td><code id="reverse_geocode_+3A_token">token</code></td>
<td>
<p>an object of class <code>httr2_token</code> as generated by <code><a href="arcgisutils.html#topic+auth_code">auth_code()</a></code>
or related function</p>
</td></tr>
<tr><td><code id="reverse_geocode_+3A_.progress">.progress</code></td>
<td>
<p>default <code>TRUE</code>. Whether a progress bar should be provided.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function utilizes the
<a href="https://developers.arcgis.com/rest/geocode/api-reference/geocoding-reverse-geocode.htm"><code style="white-space: pre;">&#8288;/reverseGeocode&#8288;</code></a> endpoint of a geocoding service. By default, it uses
the public ArcGIS World Geocoder.
</p>

<ul>
<li><p> Intersection matches are only returned when <code>feature_types = "StreetInt"</code>. See <a href="https://developers.arcgis.com/rest/geocode/api-reference/geocoding-reverse-geocode.htm#ESRI_SECTION3_1FE6B6D350714E45B2707845ADA22E1E">REST documentation for more</a>.
</p>
</li></ul>



<h4>Location Type</h4>


<ul>
<li><p> Specifies whether the output geometry shuold be the rooftop point or the
street entrance location.
</p>
</li>
<li><p> The <code>location_type</code> parameter changes the geometry's placement but does not
change the attribute values of <code>X</code>, <code>Y</code>, or <code>DisplayX</code>, and <code>DisplayY</code>.
</p>
</li></ul>




<h4>Storage</h4>

<p><strong>Very Important</strong>
</p>
<p>The argument <code>for_storage</code> is used to determine if the request allows you to
persist the results of the query. It is important to note that there are
contractual obligations to appropriately set this argument. <strong>You cannot save
or persist results</strong> when <code>for_storage = FALSE</code> (the default).
</p>



<h4>Execution</h4>

<p>The <code style="white-space: pre;">&#8288;/reverseGeocode&#8288;</code> endpoint can only handle one address at a time. To
make the operation as performant as possible, requests are sent in parallel
using <code><a href="httr2.html#topic+req_perform_parallel">httr2::req_perform_parallel()</a></code>. The JSON responses are then processed
using Rust and returned as an sf object.
</p>



<h3>Value</h3>

<p>An sf object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Find addresses from locations
reverse_geocode(c(-117.172, 34.052))
</code></pre>

<hr>
<h2 id='storage'>Storing Geocoding Results</h2><span id='topic+storage'></span>

<h3>Description</h3>

<p>The results of geocoding operations cannot be stored or
persisted unless the <code>for_storage</code> argument is set to
<code>TRUE</code>. The default argument value is <code>for_storage = FALSE</code>, which indicates the results of the operation can't be stored, but they can be temporarily displayed on a map, for instance. If you store the results, in a database, for example, you need to set this parameter to true.
</p>


<h3>Details</h3>

<p>See <a href="https://developers.arcgis.com/rest/geocode/api-reference/geocoding-find-address-candidates.htm#ESRI_SECTION3_BBCB5704B46B4CDF8377749B873B1A7F">the official documentation</a> for more context.
</p>

<hr>
<h2 id='suggest_places'>Search Suggestion</h2><span id='topic+suggest_places'></span>

<h3>Description</h3>

<p>This function returns candidate locations based on a partial search query.
It is designed to be used in an interactive search experience in a client
facing application.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>suggest_places(
  text,
  location = NULL,
  category = NULL,
  search_extent = NULL,
  max_suggestions = NULL,
  country_code = NULL,
  preferred_label_values = NULL,
  geocoder = default_geocoder(),
  token = arc_token()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="suggest_places_+3A_text">text</code></td>
<td>
<p>a scalar character of search key to generate a place suggestion.</p>
</td></tr>
<tr><td><code id="suggest_places_+3A_location">location</code></td>
<td>
<p>an <code>sfc_POINT</code> object that centers the search. Optional.</p>
</td></tr>
<tr><td><code id="suggest_places_+3A_category">category</code></td>
<td>
<p>a scalar character. Place or address type that can be used to
filter suggest results. Optional.</p>
</td></tr>
<tr><td><code id="suggest_places_+3A_search_extent">search_extent</code></td>
<td>
<p>an object of class <code>bbox</code> that limits the search area. This is especially useful for applications in which a user will search for places and addresses within the current map extent. Optional.</p>
</td></tr>
<tr><td><code id="suggest_places_+3A_max_suggestions">max_suggestions</code></td>
<td>
<p>default <code>NULL</code>. The maximum number of suggestions to return.
The service default is 5 with a maximum of 15.</p>
</td></tr>
<tr><td><code id="suggest_places_+3A_country_code">country_code</code></td>
<td>
<p>default <code>NULL.</code> An ISO 3166 country code.
See <code><a href="#topic+iso_3166_codes">iso_3166_codes()</a></code> for valid ISO codes. Optional.</p>
</td></tr>
<tr><td><code id="suggest_places_+3A_preferred_label_values">preferred_label_values</code></td>
<td>
<p>default NULL. Must be one of <code>"postalCity"</code>
or <code>"localCity"</code>. Optional.</p>
</td></tr>
<tr><td><code id="suggest_places_+3A_geocoder">geocoder</code></td>
<td>
<p>default <code><a href="#topic+default_geocoder">default_geocoder()</a></code>.</p>
</td></tr>
<tr><td><code id="suggest_places_+3A_token">token</code></td>
<td>
<p>an object of class <code>httr2_token</code> as generated by <code><a href="arcgisutils.html#topic+auth_code">auth_code()</a></code>
or related function</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Unlike the other functions in this package, <code>suggest_places()</code> is not
vectorized as it is intended to provide search suggestions for individual
queries such as those made in a search bar.
</p>
<p>Utilizes the <a href="https://developers.arcgis.com/rest/geocode/api-reference/geocoding-suggest.htm"><code style="white-space: pre;">&#8288;/suggest&#8288;</code></a> endpoint.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> with 3 columns: <code>text</code>, <code>magic_key</code>, and <code>is_collection</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># identify a search point
location &lt;- sf::st_sfc(sf::st_point(c(-84.34, 33.74)), crs = 4326)

# create a search extent from it
search_extent &lt;- sf::st_bbox(sf::st_buffer(location, 10))

# find suggestions from it
suggestions &lt;- suggest_places(
  "bellwood",
  location,
  search_extent = search_extent
)

# get address candidate information
# using the text and the magic key
find_address_candidates(
  suggestions$text,
  magic_key = suggestions$magic_key
)
</code></pre>

<hr>
<h2 id='world_geocoder'>ArcGIS World Geocoder</h2><span id='topic+world_geocoder'></span>

<h3>Description</h3>

<p>The <a href="https://www.esri.com/en-us/arcgis/products/arcgis-world-geocoder">ArcGIS World Geocoder</a>
is made publicly available for some uses. The <code>world_geocoder</code> object is used
as the default <code>GeocodeServer</code> object in <code><a href="#topic+default_geocoder">default_geocoder()</a></code> when no
authorization token is found. The <code><a href="#topic+find_address_candidates">find_address_candidates()</a></code>,
<code><a href="#topic+reverse_geocode">reverse_geocode()</a></code>, and <code><a href="#topic+suggest_places">suggest_places()</a></code> can be used without an
authorization token. The <code><a href="#topic+geocode_addresses">geocode_addresses()</a></code> funciton requires an
authorization token to be used for batch geocoding.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>world_geocoder
</code></pre>


<h3>Format</h3>

<p>An object of class <code>GeocodeServer</code> (inherits from <code>list</code>) of length 12.
</p>


<h3>Value</h3>

<p>an object of class <code>GeocodeServer</code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
