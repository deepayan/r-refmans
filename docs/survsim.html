<!DOCTYPE html><html><head><title>Help for package survsim</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {survsim}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#survsim-package'>
<p>Simulation of simple and complex survival data</p></a></li>
<li><a href='#accum'>
<p>Aggregate data from a simulated cohort.</p></a></li>
<li><a href='#crisk.sim'>
<p>Generate a cohort in a competing risks context</p></a></li>
<li><a href='#mult.ev.sim'>
<p>Generate a cohort with multiple events</p></a></li>
<li><a href='#rec.ev.sim'>
<p>Generate a cohort with recurrent events</p></a></li>
<li><a href='#simple.surv.sim'>
<p>Generate a cohort with single-event survival times</p></a></li>
<li><a href='#survsim-internal'><p>Internal survsim functions</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Simulation of Simple and Complex Survival Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.8</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-12-13</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David Mori単a Soler &lt;dmorina@ub.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Simulation of simple and complex survival data including recurrent and multiple events and competing risks. See Mori単a D, Navarro A. (2014) &lt;<a href="https://doi.org/10.18637%2Fjss.v059.i02">doi:10.18637/jss.v059.i02</a>&gt; and Mori単a D, Navarro A. (2017) &lt;<a href="https://doi.org/10.1080%2F03610918.2016.1175621">doi:10.1080/03610918.2016.1175621</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.13.1), eha, statmod</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-12-09 12:03:29 UTC; dmorinya</td>
</tr>
<tr>
<td>Author:</td>
<td>David Mori単a Soler
    <a href="https://orcid.org/0000-0001-5949-7443"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Albert Navarro [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-12-14 15:30:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='survsim-package'>
Simulation of simple and complex survival data 
</h2><span id='topic+survsim-package'></span><span id='topic+survsim'></span>

<h3>Description</h3>

<p>Simulation of cohorts in a context of simple and complex survival analysis, multiple events and recurrent events including several covariates, individual heterogeneity and periods at risk before and after the initial time of follow-up.
</p>

<table>
<tr>
 <td style="text-align: center;">
         Distribution </td><td style="text-align: center;"> Survival function   </td><td style="text-align: center;"> Density function </td><td style="text-align: center;"> Parametrization</td>
</tr>
<tr>
 <td style="text-align: center;">
         Weibull </td><td style="text-align: center;"> <code class="reqn">exp(- \lambda t^p)</code> </td><td style="text-align: center;"> <code class="reqn">\lambda pt^{p-1}exp(- \lambda t^p)</code> </td><td style="text-align: center;"> <code class="reqn">\lambda = exp(-p \beta_0)</code></td>
</tr>
<tr>
 <td style="text-align: center;">
         Log-normal </td><td style="text-align: center;"> <code class="reqn">1- \Theta((log(t)- \mu)/ \sigma)</code> </td><td style="text-align: center;"> <code class="reqn">(1/(t \sigma \sqrt{2 \pi})) exp((-1/(2 \sigma^2))(log(t) - \mu)^2)</code> </td><td style="text-align: center;"> <code class="reqn">\mu = \beta_0</code></td>
</tr>
<tr>
 <td style="text-align: center;">
         Log-logistic </td><td style="text-align: center;"> <code class="reqn">1/(1+(\lambda t)^{1/ \gamma}</code>) </td><td style="text-align: center;"> <code class="reqn">\lambda^{1/ \gamma}t^{(1/ \gamma) - 1}/ (\gamma (1 + (\lambda t)^{1/ \gamma})^2)</code> </td><td style="text-align: center;"> <code class="reqn">\lambda = exp(- \beta_0)</code></td>
</tr>
<tr>
 <td style="text-align: center;">
       </td>
</tr>

</table>


<table>
<tr>
 <td style="text-align: center;">
         Distribution </td><td style="text-align: center;"> Time</td>
</tr>
<tr>
 <td style="text-align: center;">
         Weibull </td><td style="text-align: center;"> <code class="reqn">t = (- ln u/ \lambda)^{1/p}</code></td>
</tr>
<tr>
 <td style="text-align: center;">
         Log-normal </td><td style="text-align: center;"> <code class="reqn">t = exp(\beta_0 + \gamma (log(u)-log(1-u)))</code></td>
</tr>
<tr>
 <td style="text-align: center;">
         Log-logistic </td><td style="text-align: center;"> <code class="reqn">t = exp(\beta_0 + \sigma \Theta^{-1}(u))</code></td>
</tr>
<tr>
 <td style="text-align: center;">
       </td>
</tr>

</table>

<p>Where <code class="reqn">\Theta</code> is the standard normal cumulative distribution.
</p>
<p>In order to simulate censored survival data, two survival distributions are required, one for the uncensored survival times that would be observed if the follow-up had been sufficiently long to reach the event and another representing the censoring mechanism. The uncensored survival distribution, <code class="reqn">T'_i</code>, for <code class="reqn">i=1,\ldots,n</code> subjects, could be generated to depend on a set of covariates with a specified relationship with survival, which represents the true prognostic importance of each covariate (Burton, 2006). The package allows to simulate times by means of using Weibull (and exponential as a particular case), log-normal and log-logistic distributions, as such is showed in previous table.
To induce individual heterogeneity or within-subject correlation we generate <code class="reqn">Z_i</code>, a random effect covariate that follows a particular distribution (Uniform or Normal). 
</p>
<p style="text-align: center;"><code class="reqn">t_i = t_i'\cdot z_i</code>
</p>

<p>When <code class="reqn">z_i = 1</code>, for all subjects, we are in the case of individual homogeneity and the survival times are completely specified by the covariates.
Random non-informative right censoring, <code class="reqn">C_i</code>, can be generated in a similar manner to the uncensored survival times, <code class="reqn">T'_i</code>, by assuming a  particular distribution for the censoring times (previous table), but without including any covariates nor individual heterogenity. 
The observation times, <code class="reqn">Y_i'</code>, incorporating both events and censored observations are calculated for each case by combining the uncensored survival times, <code class="reqn">T_i</code>, and the censoring times, <code class="reqn">C_i</code>. If the uncensored survival time for an observation is less than or equal to the censored time, then the event is considered to be observed and the observation time equals the uncensored survival time, otherwise the event is considered censored and the observation time equals the censored time. In other words, once simulated <code class="reqn">t_i</code> and <code class="reqn">c_i</code>, we can define <code class="reqn">Y_i'= min(t_i,c_i)</code> as the obervation time with <code class="reqn">\delta_i</code> an indicator of non-censoring, i.e. <code class="reqn">\delta_i = I(t_i \le c_i )</code>.
While all <code class="reqn">y_i'</code>  start at 0, the package allows create dynamic cohorts. We can generate entry times higher than 0 adding a <code class="reqn">t_0</code> value corresponding with an uniform distribution in <code class="reqn">[0,t_{max follow-up}]</code>. We can also simulate subjects at risk before of the initial time of follow-up <code class="reqn">(y_i'= 0)</code>, by including an uniform distribution for <code class="reqn">t_0</code> between <code class="reqn">[-t_{max old},0)</code> for a fixed percentage of subjects. Then:
</p>
<p style="text-align: center;"><code class="reqn">y_i=y_i' + t_0</code>
</p>

<p>where <code class="reqn">t_0</code> follows a uniform distribution in <code class="reqn">[0,t_{max follow-up}]</code> if entry time is 0 or more and <code class="reqn">t_0</code> is uniform distributed in <code class="reqn">[-t_{max old}, 0)</code> if entry time is less than 0.
Therefore, <code class="reqn">t_0</code> represents the initial point of the episode, <code class="reqn">y_i</code> the endpoint and <code class="reqn">y_i'</code> is the lenght. Note that <code class="reqn">y_i'+t_0</code> can be higher than <code class="reqn">t_{max follow-up}</code>, and in this case <code class="reqn">y_i</code> will be set at <code class="reqn">t_{max follow-up}</code> and <code class="reqn">\delta_i=0</code>. The observations corresponding to the subjects at risk before of the initial time of follow-up have <code class="reqn">t_0</code> negative, then the initial point of the episode will be set at 0. <code class="reqn">y_i</code> may also be negative, in this case this episode will not be included in the simulated data, as long as this episode won't be observed in practice. 
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> survsim</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.1.8</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2021-12-13</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL version 2 or newer</td>
</tr>
<tr>
 <td style="text-align: left;">
LazyLoad: </td><td style="text-align: left;"> yes</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>The package provide a tool for simulation of cohorts in a simple single-event context through the function <code><a href="#topic+simple.surv.sim">simple.surv.sim</a></code>, in a recurrent event context with the function <code><a href="#topic+rec.ev.sim">rec.ev.sim</a></code>, in a multiple event context with the function <code><a href="#topic+mult.ev.sim">mult.ev.sim</a></code> and in a competing risks context with the function <code><a href="#topic+crisk.sim">crisk.sim</a></code>, and it also allows the user to generate aggregated data from the simulated cohort, by means of the function <code><a href="#topic+accum">accum</a></code>.
</p>


<h3>Author(s)</h3>

<p>David Mori単a, (Universitat de Barcelona) and Albert Navarro (Universitat Aut嘆noma de Barcelona)
</p>
<p>Maintainer: David Mori単a Soler &lt;dmorina@ub.edu&gt;
</p>


<h3>References</h3>

<p>Kelly PJ, Lim LL. Survival analysis for recurrent event data: an application to childhood infectious diseases. Stat Med 2000 Jan 15;<b>19</b>(1):13-33.
</p>
<p>Bender R, Augustin T, Blettner M. Generating survival times to simulate Cox proportional hazards models. Stat Med 2005 Jun 15;<b>24</b>(11):1713-1723.
</p>
<p>Metcalfe C, Thompson SG. The importance of varying the event generation process in simulation studies of statistical methods for recurrent events. Stat Med 2006 Jan 15;<b>25</b>(1):165-179.
</p>
<p>Burton A, Altman DG, Royston P, Holder RL. The design of simulation studies in medical statistics. Stat Med 2006 Dec 30;<b>25</b>(24):4279-4292.
</p>
<p>Beyersmann J, Latouche A, Buchholz A, Schumacher M. Simulating competing risks data in survival analysis. Stat Med 2009 Jan 5;<b>28</b>(1):956-971. 
</p>
<p>Reis RJ, Utzet M, La Rocca PF, Nedel FB, Martin M, Navarro A. Previous sick leaves as predictor of subsequent ones. Int Arch Occup Environ Health 2011 Jun;<b>84</b>(5):491-499.
</p>
<p>Navarro A, Mori単a D, Reis R, Nedel FB, Martin M, Alvarado S. Hazard functions to describe patterns of new and recurrent sick leave episodes for different diagnoses. Scand J Work Environ Health 2012 Jan 27.
</p>
<p>Mori単a D, Navarro A. The R package survsim for the simulation of simple and complex survival data. Journal of Statistical Software 2014 Jul; <b>59</b>(2):1-20.
</p>

<hr>
<h2 id='accum'>
Aggregate data from a simulated cohort.
</h2><span id='topic+accum'></span>

<h3>Description</h3>

<p>Aggregate the observed number of events suffered by a subject, the time of follow-up, the duration of all the observed episodes and the real number of events suffered in all subject history.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  accum(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="accum_+3A_data">data</code></td>
<td>

<p>An object of class <code>mult.ev.data.sim</code>, if the individual cohort has been simulated in a multiple event situation or an object of class <code>rec.ev.data.sim</code>, if the individual cohort has been simulated in a recurrent event situation. Note that, although the routine will work, it's probably not much useful in other contexts than recurrent event situation. 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The output contains <code>z</code> and <code>real.ep.accum</code> because they can be interesting when analyzing several aspects as missing data or individual heterogeneity, although those variables cannot be observed in a real cohort.
</p>


<h3>Value</h3>

<p>An object of class <code>sim.ev.agg.data</code>. It is a data frame with a row for each subject in <code>data</code>, and the following columns
</p>
<table>
<tr><td><code>nid</code></td>
<td>
<p>an <code>integer</code> number that identifies the subject.</p>
</td></tr>
<tr><td><code>old</code></td>
<td>
<p>real value indicating the time that the individual was at risk before the beginning of the follow-up.</p>
</td></tr>
<tr><td><code>risk.bef</code></td>
<td>
<p><code>Boolean</code> indicating if the subject was at risk before the beginning of the follow-up time or not.</p>
</td></tr>
<tr><td><code>z</code></td>
<td>
<p>individual heterogeneity, generated according to the specified distribution.</p>
</td></tr>
<tr><td><code>x</code></td>
<td>
<p> value of each covariate randomly generated for each subject in the cohort.</p>
</td></tr>
<tr><td><code>obs.ep.accum</code></td>
<td>
<p>aggregated number of episodes suffered by an individual since the beginning of subject's follow-up time.</p>
</td></tr>
<tr><td><code>real.ep.accum</code></td>
<td>
<p>aggregated number of episodes suffered by an individual from the beginning of subject's history.</p>
</td></tr>
<tr><td><code>time.accum</code></td>
<td>
<p>global time of follow-up for each individual.</p>
</td></tr>
<tr><td><code>long.accum</code></td>
<td>
<p>global time not at risk within the follow-up time, corresponding to the sum of times between the end of an event and the beginning of the next.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>David Mori単a, Universitat de Barcelona and Albert Navarro, Universitat Aut嘆noma de Barcelona
</p>


<h3>References</h3>

<p>Kelly PJ, Lim LL. Survival analysis for recurrent event data: an application to childhood infectious diseases. Stat Med 2000 Jan 15;<b>19</b>(1):13-33. 
</p>
<p>Bender R, Augustin T, Blettner M. Generating survival times to simulate Cox proportional hazards models. Stat Med 2005 Jun 15;<b>24</b>(11):1713-1723.
</p>
<p>Metcalfe C, Thompson SG. The importance of varying the event generation process in simulation studies of statistical methods for recurrent events. Stat Med 2006 Jan 15;<b>25</b>(1):165-179.
</p>
<p>Reis RJ, Utzet M, La Rocca PF, Nedel FB, Martin M, Navarro A. Previous sick leaves as predictor of subsequent ones. Int Arch Occup Environ Health 2011 Jun;<b>84</b>(5):491-499.
</p>
<p>Navarro A, Mori単a D, Reis R, Nedel FB, Martin M, Alvarado S. Hazard functions to describe patterns of new and recurrent sick leave episodes for different diagnoses. Scand J Work Environ Health 2012 Jan 27.
</p>
<p>Mori単a D, Navarro A. The R package survsim for the simulation of simple and complex survival data. Journal of Statistical Software 2014 Jul; <b>59</b>(2):1-20.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rec.ev.sim">rec.ev.sim</a></code>, <code><a href="#topic+mult.ev.sim">mult.ev.sim</a></code>, <code><a href="#topic+crisk.sim">crisk.sim</a></code>, <code><a href="#topic+survsim">survsim</a></code>, <code><a href="#topic+simple.surv.sim">simple.surv.sim</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### A cohort with 500 subjects, with a maximum follow-up time of 1825 days and
### just a covariate, following a Bernoulli distribution, and a corresponding
### beta of -0.4, -0.5, -0.6 and -0.7 for each episode, in a context of recurrent
### events.

sim.data &lt;- rec.ev.sim(n=500, foltime=1825, dist.ev=c('lnorm','llogistic', 'weibull',
'weibull'),anc.ev=c(1.498, 0.924, 0.923, 1.051),beta0.ev=c(7.195, 6.583, 6.678, 6.430)
,,anc.cens=c(1.272, 1.218, 1.341, 1.484),beta0.cens=c(7.315, 6.975, 6.712, 6.399), 
z=list(c("unif",0.8,1.2)),beta=list(c(-0.4,-0.5,-0.6,-0.7)), x=list(c("bern", 0.5)),
lambda=c(2.18,2.33,2.40,3.46),priskb=0.5,max.old=730)

### Aggregated data

accum.data   &lt;- accum(sim.data)

head(accum.data)
</code></pre>

<hr>
<h2 id='crisk.sim'>
Generate a cohort in a competing risks context
</h2><span id='topic+crisk.sim'></span>

<h3>Description</h3>

<p>Simulation of cohorts in a context of competing risks survival analysis including several covariates, individual heterogeneity and periods at risk prior and after the start of follow-up. 
</p>
<p>Competing risks analysis considers time-to-first-event and the event type, possibly subject to right censoring (Beyersmann et al., 2009)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crisk.sim(n, foltime, dist.ev, anc.ev, beta0.ev, dist.cens="weibull", 
anc.cens, beta0.cens, z=NULL, beta=NA, x=NA, nsit)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crisk.sim_+3A_n">n</code></td>
<td>

<p>integer value indicating the desired size of the cohort to be simulated.
</p>
</td></tr>
<tr><td><code id="crisk.sim_+3A_foltime">foltime</code></td>
<td>

<p>real number that indicates the maximum time of follow-up of the simulated cohort.
</p>
</td></tr>
<tr><td><code id="crisk.sim_+3A_dist.ev">dist.ev</code></td>
<td>

<p>vector of arbitrary size indicating the time to event distributions, with possible values <code>weibull</code> for the Weibull distribution, <code>lnorm</code> for the log-normal distribution and <code>llogistic</code> for the log-logistic distribution.
</p>
</td></tr>
<tr><td><code id="crisk.sim_+3A_anc.ev">anc.ev</code></td>
<td>

<p>vector of arbitrary size of real components containing the ancillary parameters for the time to event distributions.
</p>
</td></tr>
<tr><td><code id="crisk.sim_+3A_beta0.ev">beta0.ev</code></td>
<td>

<p>vector of arbitrary size of real components containing the <code class="reqn">\beta_0</code> parameters for the time to event distributions.
</p>
</td></tr>
<tr><td><code id="crisk.sim_+3A_dist.cens">dist.cens</code></td>
<td>

<p>string indicating the time to censoring distributions, with possible values <code>weibull</code> for the Weibull distribution, <code>lnorm</code> for the log-normal distribution, <code>llogistic</code> for the log-logistic distribution and <code>unif</code> for the uniform distribution. If no distribution is introduced, the time to censoring is assumed to follow a Weibull distribution.
</p>
</td></tr>
<tr><td><code id="crisk.sim_+3A_anc.cens">anc.cens</code></td>
<td>

<p>real number containing the ancillary parameter for the time to censoring distribution or the maximum in case of uniform distributed time to censoring.
</p>
</td></tr>
<tr><td><code id="crisk.sim_+3A_beta0.cens">beta0.cens</code></td>
<td>

<p>real number containing the <code class="reqn">\beta_0</code> parameter for the time to censoring distribution or the minimum in case of uniform distributed time to censoring.
</p>
</td></tr>
<tr><td><code id="crisk.sim_+3A_z">z</code></td>
<td>

<p>list of vectors with three elements containing information relative to a random effect used in order to introduce individual heterogeneity. Each vector in the list refers to a possible competing risk, so the number of vectors must be equal to <code>nsit</code> or equal to 1 if the same random effect will be used for all the causes. The first element indicates the distribution: <code>"unif"</code> states for a uniform distribution, <code>"gamma"</code> states for a gamma distribution, <code>"exp"</code> states for an exponential distribution, <code>"weibull"</code> states for a Weibull distribution and <code>"invgauss"</code> states for an inverse gaussian distribution. The second and third elements indicates the minimum and maximum in the case of a uniform distribution (both must be positive) and the parameters in the case of the rest of distributions. Note that just one parameter is needed in the case of exponential distribution. Its default value is <code>NULL</code>, indicating that no individual heterogeneity is introduced. 
</p>
</td></tr>
<tr><td><code id="crisk.sim_+3A_beta">beta</code></td>
<td>

<p>list of vectors indicating the effect of the corresponding covariate. The number of vectors in <code>beta</code> must match the number of covariates, and the length of each vector must match the number of events considered. Its default value is NA, indicating that no covariates are included.
</p>
</td></tr>
<tr><td><code id="crisk.sim_+3A_x">x</code></td>
<td>

<p>list of vectors indicating the distribution and parameters of any covariate that the user needs to introduce in the simulated cohort. The possible distributions are <code>"normal"</code> for normal distribution, <code>"unif"</code> for uniform distribution and <code>"bern"</code> for Bernoulli distribution. Its default value is NA, indicating that no covariates are included. The number of vectors in <code>x</code> must match the number of vectors in <code>beta</code>. Each vector in <code>x</code> must contain the name of the distribution and the parameter(s), which are: the probability of success in the case of a Bernoulli distribution; the mean and the variance in the case of a <code>normal</code> distribution; and the minimum and maximum in the case of a <code>uniform</code> distribution.
</p>
</td></tr>
<tr><td><code id="crisk.sim_+3A_nsit">nsit</code></td>
<td>

<p>Number of different events that a subject can suffer. It must match the number of distributions specified in <code>dist.ev</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In order to get the function to work properly, the length of the vectors containing the parameters of the time to event and the number of distributions indicated in the parameter <code>dist.ev</code> must be the same. 
</p>


<h3>Value</h3>

<p>An object of class <code>mult.ev.data.sim</code>. It is a data frame containing the events suffered by the corresponding subjects. The columns of this data frame are detailed below
</p>
<table>
<tr><td><code>nid</code></td>
<td>
<p>an integer number that identifies the subject.</p>
</td></tr>
<tr><td><code>cause</code></td>
<td>
<p>cause of the event corresponding to the follow-up time of the individual.</p>
</td></tr>
<tr><td><code>time</code></td>
<td>
<p>time until the corresponding event happens (or time to subject drop-out).</p>
</td></tr>
<tr><td><code>status</code></td>
<td>
<p>logical value indicating if the corresponding event has been suffered or not.</p>
</td></tr>
<tr><td><code>start</code></td>
<td>
<p>time at which the follow-up time begins for each event.</p>
</td></tr>
<tr><td><code>stop</code></td>
<td>
<p>time at which the follow-up time ends for each event.</p>
</td></tr>
<tr><td><code>z</code></td>
<td>
<p>Individual heterogeneity generated according to the specified distribution.</p>
</td></tr>
<tr><td><code>x</code></td>
<td>
<p>value of each covariate randomly generated for each subject in the cohort.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>David Mori単a, Universitat de Barcelona and Albert Navarro, Universitat Aut嘆noma de Barcelona
</p>


<h3>References</h3>

<p>Beyersmann J, Latouche A, Buchholz A, Schumacher M. Simulating competing risks data in survival analysis. Stat Med 2009 Jan 5;<b>28</b>(1):956-971. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+survsim-package">survsim-package</a></code>, <code><a href="#topic+accum">accum</a></code>, <code><a href="#topic+rec.ev.sim">rec.ev.sim</a></code>, <code><a href="#topic+mult.ev.sim">mult.ev.sim</a></code>, <code><a href="#topic+simple.surv.sim">simple.surv.sim</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### A cohort with 50 subjects, with a maximum follow-up time of 100 days and two 
### covariates, following Bernoulli distributions, and a corresponding beta of 
### 0.1698695 and 0.0007010932 for each event for the first covariate and a 
### corresponding beta of 0.3735146 and 0.5591244 for each event for the 
### second covariate. Notice that the time to censorship is assumed to follow a 
### log-normal distribution.

sim.data &lt;- crisk.sim(n=50, foltime=100, dist.ev=c("lnorm","lnorm"),
anc.ev=c(1.479687, 0.5268302),beta0.ev=c(3.80342, 2.535374),dist.cens="lnorm",
anc.cens=1.242733,beta0.cens=5.421748,z=list(c("unif", 0.8,1.2), c("unif", 0.9, 1.5)), 
beta=list(c(0.1698695,0.0007010932),c(0.3735146,0.5591244)), 
x=list(c("bern", 0.381), c("bern", 0.564)), nsit=2)

summary(sim.data)
</code></pre>

<hr>
<h2 id='mult.ev.sim'>
Generate a cohort with multiple events
</h2><span id='topic+mult.ev.sim'></span>

<h3>Description</h3>

<p>Simulation of cohorts in a context of multiple event survival analysis including several covariates, individual heterogeneity and periods at risk prior and after the start of follow-up. 
</p>
<p>Multiple event data occurs when each subject can have more than one event of entirely different natures (Kelly, 2000). Examples of this type of event are the occurrence of tumours at different sites in the body or multiple sequalae after a surgery.
</p>
<p>We can obtain the observation time of the <code class="reqn">k</code>-th event in the <code class="reqn">i</code>-th subject, <code class="reqn">y_ik</code>, in the same manner that we can simulate <code class="reqn">k</code> simple independent survival data. Notice that, in multiple-type events, <code class="reqn">T_{ik}</code> and <code class="reqn">C_{i}</code> are mutually independent and, furthermore, the failure in each event is independent of the others (within each subject all <code class="reqn">y_ik</code> are independents for all <code class="reqn">k</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mult.ev.sim(n, foltime, dist.ev, anc.ev, beta0.ev, dist.cens="weibull", 
anc.cens, beta0.cens, z=NULL, beta=NA, x=NA, nsit)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mult.ev.sim_+3A_n">n</code></td>
<td>

<p>integer value indicating the desired size of the cohort to be simulated.
</p>
</td></tr>
<tr><td><code id="mult.ev.sim_+3A_foltime">foltime</code></td>
<td>

<p>real number that indicates the maximum time of follow-up of the simulated cohort.
</p>
</td></tr>
<tr><td><code id="mult.ev.sim_+3A_dist.ev">dist.ev</code></td>
<td>

<p>vector of arbitrary size indicating the time to event distributions, with possible values <code>weibull</code> for the Weibull distribution, <code>lnorm</code> for the log-normal distribution and <code>llogistic</code> for the log-logistic distribution.
</p>
</td></tr>
<tr><td><code id="mult.ev.sim_+3A_anc.ev">anc.ev</code></td>
<td>

<p>vector of arbitrary size of real components containing the ancillary parameters for the time to event distributions.
</p>
</td></tr>
<tr><td><code id="mult.ev.sim_+3A_beta0.ev">beta0.ev</code></td>
<td>

<p>vector of arbitrary size of real components containing the <code class="reqn">\beta_0</code> parameters for the time to event distributions.
</p>
</td></tr>
<tr><td><code id="mult.ev.sim_+3A_dist.cens">dist.cens</code></td>
<td>

<p>string indicating the time to censoring distributions, with possible values <code>weibull</code> for the Weibull distribution, <code>lnorm</code> for the log-normal distribution, <code>llogistic</code> for the log-logistic distribution and <code>unif</code> for the uniform distribution. If no distribution is introduced, the time to censoring is assumed to follow a Weibull distribution.
</p>
</td></tr>
<tr><td><code id="mult.ev.sim_+3A_anc.cens">anc.cens</code></td>
<td>

<p>real number containing the ancillary parameter for the time to censoring distribution or the maximum in case of uniform distributed time to censoring.
</p>
</td></tr>
<tr><td><code id="mult.ev.sim_+3A_beta0.cens">beta0.cens</code></td>
<td>

<p>real number containing the <code class="reqn">\beta_0</code> parameter for the time to censoring distribution or the minimum in case of uniform distributed time to censoring.
</p>
</td></tr>
<tr><td><code id="mult.ev.sim_+3A_z">z</code></td>
<td>

<p>list of vectors with three elements containing information relative to a random effect used in order to introduce individual heterogeneity. Each vector in the list refers to a possible event, so the number of vectors must be equal to <code>nsit</code> or equal to 1 if the same random effect will be used for all the events. The first element indicates the distribution: <code>"unif"</code> states for a uniform distribution, <code>"gamma"</code> states for a gamma distribution, <code>"exp"</code> states for an exponential distribution, <code>"weibull"</code> states for a Weibull distribution and <code>"invgauss"</code> states for an inverse gaussian distribution. The second and third elements indicates the minimum and maximum in the case of a uniform distribution (both must be positive) and the parameters in the case of the rest of distributions. Note that just one parameter is needed in the case of exponential distribution. Its default value is <code>NULL</code>, indicating that no individual heterogeneity is introduced. 
</p>
</td></tr>
<tr><td><code id="mult.ev.sim_+3A_beta">beta</code></td>
<td>

<p>list of vectors indicating the effect of the corresponding covariate. The number of vectors in <code>beta</code> must match the number of covariates, and the length of each vector must match the number of events considered. Its default value is NA, indicating that no covariates are included.
</p>
</td></tr>
<tr><td><code id="mult.ev.sim_+3A_x">x</code></td>
<td>

<p>list of vectors indicating the distribution and parameters of any covariate that the user needs to introduce in the simulated cohort. The possible distributions are <code>"normal"</code> for normal distribution, <code>"unif"</code> for uniform distribution and <code>"bern"</code> for Bernoulli distribution. Its default value is NA, indicating that no covariates are included. The number of vectors in <code>x</code> must match the number of vectors in <code>beta</code>. Each vector in <code>x</code> must contain the name of the distribution and the parameter(s), which are: the probability of success in the case of a Bernoulli distribution; the mean and the variance in the case of a <code>normal</code> distribution; and the minimum and maximum in the case of a <code>uniform</code> distribution.
</p>
</td></tr>
<tr><td><code id="mult.ev.sim_+3A_nsit">nsit</code></td>
<td>

<p>Number of different events that a subject can suffer. It must match the number of distributions specified in <code>dist.ev</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In order to get the function to work properly, the length of the vectors containing the parameters of the time to event and the number of distributions indicated in the parameter <code>dist.ev</code> must be the same. 
</p>


<h3>Value</h3>

<p>An object of class <code>mult.ev.data.sim</code>. It is a data frame containing the events suffered by the corresponding subjects. The columns of this data frame are detailed below
</p>
<table>
<tr><td><code>nid</code></td>
<td>
<p>an integer number that identifies the subject.</p>
</td></tr>
<tr><td><code>ev.num</code></td>
<td>
<p>number of the event corresponding to the follow-up time of the individual.</p>
</td></tr>
<tr><td><code>time</code></td>
<td>
<p>time until the corresponding event happens (or time to subject drop-out).</p>
</td></tr>
<tr><td><code>status</code></td>
<td>
<p>logical value indicating if the corresponding event has been suffered or not.</p>
</td></tr>
<tr><td><code>start</code></td>
<td>
<p>time at which the follow-up time begins for each event.</p>
</td></tr>
<tr><td><code>stop</code></td>
<td>
<p>time at which the follow-up time ends for each event.</p>
</td></tr>
<tr><td><code>z</code></td>
<td>
<p>Individual heterogeneity generated according to the specified distribution.</p>
</td></tr>
<tr><td><code>x</code></td>
<td>
<p>value of each covariate randomly generated for each subject in the cohort.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>David Mori単a, Universitat de Barcelona and Albert Navarro, Universitat Aut嘆noma de Barcelona
</p>


<h3>References</h3>

<p>Kelly PJ, Lim LL. Survival analysis for recurrent event data: an application to childhood infectious diseases. Stat Med 2000 Jan 15;<b>19</b>(1):13-33. 
</p>
<p>Bender R, Augustin T, Blettner M. Generating survival times to simulate Cox proportional hazards models. Stat Med 2005 Jun 15;<b>24</b>(11):1713-1723.
</p>
<p>Metcalfe C, Thompson SG. The importance of varying the event generation process in simulation studies of statistical methods for recurrent events. Stat Med 2006 Jan 15;<b>25</b>(1):165-179.
</p>
<p>Mori単a D, Navarro A. The R package survsim for the simulation of simple and complex survival data. Journal of Statistical Software 2014 Jul; <b>59</b>(2):1-20.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+survsim-package">survsim-package</a></code>, <code><a href="#topic+accum">accum</a></code>, <code><a href="#topic+rec.ev.sim">rec.ev.sim</a></code>, <code><a href="#topic+crisk.sim">crisk.sim</a></code>, <code><a href="#topic+simple.surv.sim">simple.surv.sim</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### A cohort with 1000 subjects, with a maximum follow-up time of 3600 days and two 
### covariates, following a Bernoulli and uniform distribution respectively, and a 
### corresponding beta of -0.4, -0.5, -0.6 and -0.7 for each event for the first 
### covariate and a corresponding beta of 0, 0, 0 and 1 for each event for the 
### second covariate. Notice that the time to censorship is assumed to follow a 
### Weibull distribution, as no other distribution is stated and random effect is
### the same for all events.

sim.data &lt;- mult.ev.sim(n=1000, foltime=3600, dist.ev=c('llogistic','weibull', 
'weibull','weibull'),anc.ev=c(0.69978200185280, 0.79691659193027, 
0.82218416457321, 0.85817155198598),beta0.ev=c(5.84298525742252, 5.94362650803287,
5.78182528904637, 5.46865223339755),,anc.cens=1.17783687569519,
beta0.cens=7.39773677281100,z=list(c("unif", 0.8,1.2)), beta=list(c(-0.4,-0.5,-0.6,-0.7),
c(0,0,0,1)), x=list(c("bern", 0.5), c("unif", 0.7, 1.3)), nsit=4)

summary(sim.data)
</code></pre>

<hr>
<h2 id='rec.ev.sim'>
Generate a cohort with recurrent events
</h2><span id='topic+rec.ev.sim'></span>

<h3>Description</h3>

<p>Simulation of cohorts in a context of recurrent event survival analysis including several covariates, individual heterogeneity and periods at risk before and after the initial time of follow-up.
</p>
<p>Recurrent event data is a type of multiple event where the subject can experience repeated occurences of the same type (Kelly, 2000), for example repeated asthma attacks or sick leave episodes. In practice, the hazard of an recurrent event can vary depending on the number of previous occurrences, in terms of shape and intensity (Reis, 2011; Navarro, 2012). However, simulations based on a mixture of distributions with different baseline hazard rates are quite rare (Bender, 2005; Metcalfe, 2006).
</p>
<p>In a recurrent data context, each subject can present different number of episodes. We talk of episodes (or occurrences) rather than events since each occurrence is a new episode of the same event. This package supposes that there exists one different and independent <code class="reqn">Y_k</code> distribution depending on <code class="reqn">k</code>, the number of episode at risk. The simulating process for each <code class="reqn">Y_k</code> is the same than for the multiple events situation (see <code><a href="#topic+mult.ev.sim">mult.ev.sim</a></code>), but in this case, obviously, a subject cannot be at risk for the <code class="reqn">k</code>-th episode if he/she hadn't had the <code class="reqn">k-1</code>-th. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rec.ev.sim(n, foltime, dist.ev, anc.ev, beta0.ev, dist.cens=rep("weibull",
length(beta0.cens)), anc.cens, beta0.cens, z=NULL, beta=NA, x=NA, lambda=NA, 
max.ep=Inf, priskb=0, max.old=0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rec.ev.sim_+3A_n">n</code></td>
<td>

<p>integer value indicating the desired size of the cohort to be simulated.
</p>
</td></tr>
<tr><td><code id="rec.ev.sim_+3A_foltime">foltime</code></td>
<td>

<p>real number that indicates the maximum time of follow-up of the simulated cohort.
</p>
</td></tr>
<tr><td><code id="rec.ev.sim_+3A_dist.ev">dist.ev</code></td>
<td>

<p>vector of arbitrary size indicating the time to event distributions, with possible values <code>weibull</code> for the Weibull distribution, <code>lnorm</code> for the log-normal distribution and <code>llogistic</code> for the log-logistic distribution. If a subject suffers more episodes than specified distributions, the last distribution specified here is used to generate times corresponding to posterior episodes.
</p>
</td></tr>
<tr><td><code id="rec.ev.sim_+3A_anc.ev">anc.ev</code></td>
<td>

<p>vector of arbitrary size of real components containing the ancillary parameters for the time to event distributions.
</p>
</td></tr>
<tr><td><code id="rec.ev.sim_+3A_beta0.ev">beta0.ev</code></td>
<td>

<p>vector of arbitrary size of real components containing the <code class="reqn">\beta_0</code> parameters for the time to event distributions.
</p>
</td></tr>
<tr><td><code id="rec.ev.sim_+3A_dist.cens">dist.cens</code></td>
<td>

<p>string indicating the time to censoring distributions, with possible values <code>weibull</code> for the Weibull distribution, <code>lnorm</code> for the log-normal distribution, <code>llogistic</code> for the log-logistic distribution and <code>unif</code> for the uniform distribution. If no distribution is introduced, the time to censoring is assumed to follow a Weibull distribution.
</p>
</td></tr>
<tr><td><code id="rec.ev.sim_+3A_anc.cens">anc.cens</code></td>
<td>

<p>real number containing the ancillary parameter for the time to censoring distribution or the maximum in case of uniform distributed time to censoring.
</p>
</td></tr>
<tr><td><code id="rec.ev.sim_+3A_beta0.cens">beta0.cens</code></td>
<td>

<p>real number containing the <code class="reqn">\beta_0</code> parameter for the time to censoring distribution or the minimum in case of uniform distributed time to censoring.
</p>
</td></tr>
<tr><td><code id="rec.ev.sim_+3A_z">z</code></td>
<td>

<p>list of vectors with three elements containing information relative to a random effect used in order to introduce individual heterogeneity. Each vector in the list refers to a possible episode, so the number of vectors must be equal to <code>nsit</code> or equal to 1 if the same random effect will be used for all the episodes. The first element indicates the distribution: <code>"unif"</code> states for a uniform distribution, <code>"gamma"</code> states for a gamma distribution, <code>"exp"</code> states for an exponential distribution, <code>"weibull"</code> states for a Weibull distribution and <code>"invgauss"</code> states for an inverse gaussian distribution. The second and third elements indicates the minimum and maximum in the case of a uniform distribution (both must be positive) and the parameters in the case of the rest of distributions. Note that just one parameter is needed in the case of exponential distribution. Its default value is <code>NULL</code>, indicating that no individual heterogeneity is introduced. 
</p>
</td></tr>  <tr><td><code id="rec.ev.sim_+3A_beta">beta</code></td>
<td>

<p>list of vectors indicating the effect of the corresponding covariate. The number of vectors in <code>beta</code> must match the number of covariates, and the length of each vector must match the number of events considered. Its default value is NA, indicating that no covariates are included.
</p>
</td></tr>
<tr><td><code id="rec.ev.sim_+3A_x">x</code></td>
<td>

<p>list of vectors indicating the distribution and parameters of any covariate that the user need to introduce in the simulated cohort. The possible distributions are <code>"normal"</code> for a normal distribution, <code>"unif"</code> for a uniform distribution and <code>"bern"</code> for a Bernoulli distribution. Its default value is NA, indicating that no covariates are included. The number of vectors in <code>x</code> must match the number of vectors in <code>beta</code>. Each vector in <code>x</code> must contain the name of the distribution and the parameter(s), which are: the probability of success in the case of a Bernoulli distribution; the mean and the variance in the case of a <code>normal</code> distribution; and the minimum and maximum in the case of a <code>uniform</code> distribution.
</p>
</td></tr>
<tr><td><code id="rec.ev.sim_+3A_lambda">lambda</code></td>
<td>

<p>real number indicating the mean duration of each event or discontinous risk time, assumed to follow a zero-truncated Poisson distribution. Its default value is <code>NA</code>, corresponding to the case where the duration of each event or discontinous risk time is unnecessary information for the user.
</p>
</td></tr>
<tr><td><code id="rec.ev.sim_+3A_max.ep">max.ep</code></td>
<td>

<p>integer value that matches the maximum permitted number of episodes per subject. Its default value is <code>Inf</code>, i.e. the number of episodes per subject is no limited.
</p>
</td></tr>
<tr><td><code id="rec.ev.sim_+3A_priskb">priskb</code></td>
<td>

<p>proportion of subjects at risk prior to the start of follow-up, defaults to 0.
</p>
</td></tr>
<tr><td><code id="rec.ev.sim_+3A_max.old">max.old</code></td>
<td>

<p>maximum time at risk prior to the start of follow-up.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In order to get the function to work properly, the length of the vectors containing the parameters of the time to event and time to censure distributions and the number of distributions indicated in the parameter <code>dist</code> must be the same. Finally, <code>priskb</code> and <code>max.old</code> must be positive numbers, with <code>priskb</code> being between 0 and 1. Notice that large values of <code>max.old</code> can result in the routine taking a long time to simulate a cohort with the specified size.
</p>


<h3>Value</h3>

<p>An object of class <code>rec.ev.data.sim</code>. It is a data frame containing the episodes suffered by the corresponding subjects. The columns of the data frame are detailed below
</p>
<table>
<tr><td><code>nid</code></td>
<td>
<p>an integer number that identifies the subject.</p>
</td></tr>
<tr><td><code>real.episode</code></td>
<td>
<p>number of the episode corresponding to the real history of the individual.</p>
</td></tr>
<tr><td><code>obs.episode</code></td>
<td>
<p>number of the episode corresponding to the follow-up time of the individual.</p>
</td></tr>
<tr><td><code>time</code></td>
<td>
<p>time until the corresponding event happens (or time to subject drop-out), regarding the beginning of the follow-up time.</p>
</td></tr>
<tr><td><code>status</code></td>
<td>
<p>logical value indicating if the episode corresponds to an event or a drop-out.</p>
</td></tr>
<tr><td><code>start</code></td>
<td>
<p>time at which an episode starts, taking the beginning of follow-up as the origin of the time scale.</p>
</td></tr>
<tr><td><code>stop</code></td>
<td>
<p>time at which an episode ends, taking the beginning of follow-up as the origin of the time scale.</p>
</td></tr>
<tr><td><code>time2</code></td>
<td>
<p>time until the corresponding event happens (or time to subject drop-out), in calendar time.</p>
</td></tr>
<tr><td><code>start2</code></td>
<td>
<p>time at which an episode starts, where the time scale is calendar time.</p>
</td></tr>
<tr><td><code>stop2</code></td>
<td>
<p>time at which an episode ends, where the time scale is calendar time.</p>
</td></tr>
<tr><td><code>old</code></td>
<td>
<p>real value indicating the time that the individual was at risk before the beginning of follow-up.</p>
</td></tr>
<tr><td><code>risk.bef</code></td>
<td>
<p>factor that indicates if an individual was at risk before the beginning of follow-up or not.</p>
</td></tr>
<tr><td><code>long</code></td>
<td>
<p>time not at risk immediately after an episode.</p>
</td></tr>
<tr><td><code>z</code></td>
<td>
<p>Individual heterogeneity generated according to the specified distribution.</p>
</td></tr>
<tr><td><code>x</code></td>
<td>
<p>value of each covariate randomly generated for each subject in the cohort.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>David Mori単a, Universitat de Barcelona and Albert Navarro, Universitat Aut嘆noma de Barcelona
</p>


<h3>References</h3>

<p>Kelly PJ, Lim LL. Survival analysis for recurrent event data: an application to childhood infectious diseases. Stat Med 2000 Jan 15;<b>19</b>(1):13-33. 
</p>
<p>Bender R, Augustin T, Blettner M. Generating survival times to simulate Cox proportional hazards models. Stat Med 2005 Jun 15;<b>24</b>(11):1713-1723.
</p>
<p>Metcalfe C, Thompson SG. The importance of varying the event generation process in simulation studies of statistical methods for recurrent events. Stat Med 2006 Jan 15;<b>25</b>(1):165-179.
</p>
<p>Reis RJ, Utzet M, La Rocca PF, Nedel FB, Martin M, Navarro A. Previous sick leaves as predictor of subsequent ones. Int Arch Occup Environ Health 2011 Jun;<b>84</b>(5):491-499.
</p>
<p>Navarro A, Mori単a D, Reis R, Nedel FB, Martin M, Alvarado S. Hazard functions to describe patterns of new and recurrent sick leave episodes for different diagnoses. Scand J Work Environ Health 2012 Jan 27.
</p>
<p>Mori単a D, Navarro A. The R package survsim for the simulation of simple and complex survival data. Journal of Statistical Software 2014 Jul; <b>59</b>(2):1-20.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+survsim-package">survsim-package</a></code>, <code><a href="#topic+accum">accum</a></code>, <code><a href="#topic+mult.ev.sim">mult.ev.sim</a></code>, <code><a href="#topic+simple.surv.sim">simple.surv.sim</a></code>, <code><a href="#topic+crisk.sim">crisk.sim</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### A cohort with 500 subjects, with a maximum follow-up time of 1825 days and 
### just a covariate, following a Bernoulli distribution, and a corresponding 
### beta of -0.4, -0.5, -0.6 and -0.7 for each episode. Note that random effect is
### the same for all events.

sim.data &lt;- rec.ev.sim(n=500, foltime=1825, dist.ev=c('lnorm','llogistic', 
'weibull','weibull'),anc.ev=c(1.498, 0.924, 0.923, 1.051),beta0.ev=c(7.195, 
6.583, 6.678, 6.430),,anc.cens=c(1.272, 1.218, 1.341, 1.484),
beta0.cens=c(7.315, 6.975, 6.712, 6.399), z=list(c("unif", 0.8,1.2)), 
beta=list(c(-0.4,-0.5,-0.6,-0.7)), x=list(c("bern", 0.5)),
lambda=c(2.18,2.33,2.40,3.46), priskb=0.5, max.old=730)

summary(sim.data)
</code></pre>

<hr>
<h2 id='simple.surv.sim'>
Generate a cohort with single-event survival times
</h2><span id='topic+simple.surv.sim'></span>

<h3>Description</h3>

<p>Simulation of cohorts in a context of standard survival analysis including several covariates and individual heterogeneity. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simple.surv.sim(n, foltime, dist.ev, anc.ev, beta0.ev, dist.cens="weibull", 
anc.cens, beta0.cens, z=NULL, beta=NA, x=NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simple.surv.sim_+3A_n">n</code></td>
<td>

<p>integer value indicating the desired size of the cohort to be simulated.
</p>
</td></tr>
<tr><td><code id="simple.surv.sim_+3A_foltime">foltime</code></td>
<td>

<p>real number that indicates the maximum time of follow-up of the simulated cohort.
</p>
</td></tr>
<tr><td><code id="simple.surv.sim_+3A_dist.ev">dist.ev</code></td>
<td>

<p>time to event distributions, with possible values <code>weibull</code> for the Weibull distribution, <code>lnorm</code> for the log-normal distribution and <code>llogistic</code> for the log-logistic distribution.
</p>
</td></tr>
<tr><td><code id="simple.surv.sim_+3A_anc.ev">anc.ev</code></td>
<td>

<p>ancillary parameter for the time to event distribution.
</p>
</td></tr>
<tr><td><code id="simple.surv.sim_+3A_beta0.ev">beta0.ev</code></td>
<td>

<p><code class="reqn">\beta_0</code> parameter for the time to event distribution.
</p>
</td></tr>
<tr><td><code id="simple.surv.sim_+3A_dist.cens">dist.cens</code></td>
<td>

<p>string indicating the time to censoring distributions, with possible values <code>weibull</code> for the Weibull distribution, <code>lnorm</code> for the log-normal distribution, <code>llogistic</code> for the log-logistic distribution and <code>unif</code> for the uniform distribution. If no distribution is introduced, the time to censoring is assumed to follow a Weibull distribution.
</p>
</td></tr>
<tr><td><code id="simple.surv.sim_+3A_anc.cens">anc.cens</code></td>
<td>

<p>real number containing the ancillary parameter for the time to censoring distribution or the maximum in case of uniform distributed time to censoring.
</p>
</td></tr>
<tr><td><code id="simple.surv.sim_+3A_beta0.cens">beta0.cens</code></td>
<td>

<p>real number containing the <code class="reqn">\beta_0</code> parameter for the time to censoring distribution or the minimum in case of uniform distributed time to censoring.
</p>
</td></tr>
<tr><td><code id="simple.surv.sim_+3A_z">z</code></td>
<td>

<p>vector with three elements that contains information relative to a random effect used in order to introduce individual heterogeneity. The first element indicates the distribution: <code>"unif"</code> states for a uniform distribution, <code>"gamma"</code> states for a gamma distribution, <code>"exp"</code> states for an exponential distribution, <code>"weibull"</code> states for a Weibull distribution and <code>"invgauss"</code> states for an inverse gaussian distribution. The second and third elements indicates the minimum and maximum in the case of a uniform distribution (both must be positive) and the parameters in the case of the rest of distributions. Notice that that just one parameter is needed in the case of exponential distribution. Its default value is <code>NULL</code>, indicating that no individual heterogeneity is introduced.
</p>
</td></tr>
<tr><td><code id="simple.surv.sim_+3A_beta">beta</code></td>
<td>

<p>list of elements indicating the effect of the corresponding covariate. The number of vectors in <code>beta</code> must match the number of covariates. Its default value is NA, indicating that no covariates are included.
</p>
</td></tr>
<tr><td><code id="simple.surv.sim_+3A_x">x</code></td>
<td>

<p>list of vectors indicating the distribution and parameters of any covariate that the user needs to introduce in the simulated cohort. The possible distributions are <code>"normal"</code> for normal distribution, <code>"unif"</code> for uniform distribution and <code>"bern"</code> for Bernoulli distribution. Its default value is NA, indicating that no covariates are included. The number of vectors in <code>x</code> must match the number of vectors in <code>beta</code>. Each vector in <code>x</code> must contain the name of the distribution and the parameter(s), which are: the probability of success in the case of a Bernoulli distribution; the mean and the variance in the case of a <code>normal</code> distribution; and the minimum and maximum in the case of a <code>uniform</code> distribution.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>simple.surv.sim</code>. It is a data frame containing the events suffered by the corresponding subjects. The columns of this data frame are detailed below
</p>
<table>
<tr><td><code>nid</code></td>
<td>
<p>an integer number that identifies the subject.</p>
</td></tr>
<tr><td><code>status</code></td>
<td>
<p>logical value indicating if the corresponding event has been suffered or not.</p>
</td></tr>
<tr><td><code>start</code></td>
<td>
<p>time at which the follow-up time begins for each event.</p>
</td></tr>
<tr><td><code>stop</code></td>
<td>
<p>time at which the follow-up time ends for each event.</p>
</td></tr>
<tr><td><code>z</code></td>
<td>
<p>Individual heterogeneity generated according to the specified distribution.</p>
</td></tr>
<tr><td><code>x</code></td>
<td>
<p>value of each covariate randomly generated for each subject in the cohort.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>David Mori単a, Universitat de Barcelona and Albert Navarro, Universitat Aut嘆noma de Barcelona
</p>


<h3>References</h3>

<p>Kelly PJ, Lim LL. Survival analysis for recurrent event data: an application to childhood infectious diseases. Stat Med 2000 Jan 15;<b>19</b>(1):13-33. 
</p>
<p>Bender R, Augustin T, Blettner M. Generating survival times to simulate Cox proportional hazards models. Stat Med 2005 Jun 15;<b>24</b>(11):1713-1723.
</p>
<p>Mori単a D, Navarro A. The R package survsim for the simulation of simple and complex survival data. Journal of Statistical Software 2014 Jul; <b>59</b>(2):1-20.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+survsim-package">survsim-package</a></code>, <code><a href="#topic+accum">accum</a></code>, <code><a href="#topic+rec.ev.sim">rec.ev.sim</a></code>, <code><a href="#topic+mult.ev.sim">mult.ev.sim</a></code>, <code><a href="#topic+crisk.sim">crisk.sim</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### A cohort with 1000 subjects, with a maximum follow-up time of 3600 days and two 
### covariates, following a Bernoulli and uniform distribution respectively, and a 
### corresponding beta of -0.4 for the first covariate and a corresponding beta of 0
### for the second covariate. Notice that the time to censorship is assumed to 
### follow a Weibull distribution, as no other distribution is stated.

sim.data &lt;- simple.surv.sim(n=1000, foltime=3600, dist.ev=c('llogistic'),
anc.ev=c(0.69978200185280),beta0.ev=c(5.84298525742252),,anc.cens=1.17783687569519,
beta0.cens=7.39773677281100,z=list(c("unif", 0.8, 1.2)), beta=list(c(-0.4),
c(0)), x=list(c("bern", 0.5), c("unif", 0.7, 1.3)))

summary(sim.data)
</code></pre>

<hr>
<h2 id='survsim-internal'>Internal survsim functions</h2><span id='topic+survsim-internal'></span><span id='topic+rtpois'></span><span id='topic+simple.ev.sim'></span><span id='topic+crisk.ncens.sim'></span><span id='topic+mult.ev.ncens.sim'></span><span id='topic+rec.ev.cens.sim'></span><span id='topic+rec.ev.ncens.sim'></span><span id='topic+summary.simple.surv.sim'></span><span id='topic+print.summary.simple.surv.sim'></span><span id='topic+summary.crisk.data.sim'></span><span id='topic+print.summary.crisk.data.sim'></span><span id='topic+summary.mult.ev.data.sim'></span><span id='topic+print.summary.mult.ev.data.sim'></span><span id='topic+summary.rec.ev.data.sim'></span><span id='topic+print.summary.rec.ev.data.sim'></span>

<h3>Description</h3>

<p>Internal survsim functions</p>


<h3>Usage</h3>

<pre><code class='language-R'>rtpois(N, lambda)
simple.ev.sim(foltime, anc.ev, beta0.ev, anc.cens, beta0.cens, z=NULL, beta=0, eff=0,
                  dist.ev, dist.cens, i)
crisk.ncens.sim(foltime, anc.ev, beta0.ev, anc.cens, beta0.cens, z=NULL, beta=0, eff=0,
                  dist.ev, dist.cens, i, nsit)
mult.ev.ncens.sim(foltime, anc.ev, beta0.ev, anc.cens, beta0.cens, z=NULL, beta=0, eff=0,
                  dist.ev, dist.cens, i, nsit)
rec.ev.cens.sim(foltime, anc.ev, beta0.ev, anc.cens, beta0.cens, z=NULL, beta=0, eff=0,
                lambda=NA, dist.ev, dist.cens, max.ep=Inf, un.cens, i, max.time)
rec.ev.ncens.sim(foltime, anc.ev, beta0.ev, anc.cens, beta0.cens, z=NULL, beta=0, eff=0, 
                 lambda=NA, dist.ev, dist.cens, max.ep=Inf, un.ncens, i, max.time)
## S3 method for class 'simple.surv.sim'
summary(object, ...)
## S3 method for class 'mult.ev.data.sim'
summary(object, ...)
## S3 method for class 'rec.ev.data.sim'
summary(object, ...)
## S3 method for class 'crisk.data.sim'
summary(object, ...)
## S3 method for class 'simple.surv.sim'
print.summary(x, ...)
## S3 method for class 'mult.ev.data.sim'
print.summary(x, ...)
## S3 method for class 'rec.ev.data.sim'
print.summary(x, ...)
## S3 method for class 'crisk.data.sim'
print.summary(x, ...)
</code></pre>


<h3>Details</h3>

<p>These functions are not to be called by the user</p>


<h3>See Also</h3>

<p><code><a href="#topic+survsim-package">survsim-package</a></code>, <code><a href="#topic+accum">accum</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
