<!DOCTYPE html><html><head><title>Help for package pref</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {pref}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#c99'><p>Example of an election of an academic organisation using STV allowing equal preferences frelection om an</p></a></li>
<li><a href='#cnc17'><p>Example of a political STV election - Cumnock and New Cumnock 2017</p></a></li>
<li><a href='#hc12'><p>Unusually simple example of a political STV election - Helensburgh Central 2012</p></a></li>
<li><a href='#j02'><p>Example of an STV election allowing equal preferences - John Muir Trust 2002</p></a></li>
<li><a href='#nws17'><p>Example of a political STV election - North West and Central Sutherland 2017</p>
Unusual in that under WIG no candidate reaches the (fixed) quota</a></li>
<li><a href='#p17'><p>Example of a political STV election - Partick 2017</p></a></li>
<li><a href='#pref.data'><p>put election data in an R file (.rda)</p></a></li>
<li><a href='#stv'><p>STV election count - uses Meek STV, allows equal preferences</p></a></li>
<li><a href='#stv.plots'><p>Makes webpage plots of result of an STV election</p></a></li>
<li><a href='#stv.wig'><p>STV election count using WIG as for Scottish Council elections</p>
calculated to 5 places of decimals as used for those elections</a></li>
<li><a href='#y12'><p>Example of an STV election - Yale faculty election (last 12)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Preference Voting with Explanatory Graphics</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Implements the Single Transferable Vote (STV) electoral system, with
    clear explanatory graphics. The core function stv() uses Meek's method, the purest
    expression of the simple principles of STV, but which requires electronic
    counting. It can handle votes expressing equal preferences for subsets of
    the candidates. A function stv.wig() implementing the Weighted Inclusive
    Gregory method, as used in Scottish council elections, is also provided,
    and with the same options, as described in the manual. The required vote
    data format is as an R list: a function pref.data() is provided to transform
    some commonly used data formats into this format.
    References for methodology:
    Hill, Wichmann and Woodall (1987) &lt;<a href="https://doi.org/10.1093%2Fcomjnl%2F30.3.277">doi:10.1093/comjnl/30.3.277</a>&gt;,
    Hill, David (2006) <a href="https://www.votingmatters.org.uk/ISSUE22/I22P2.pdf">https://www.votingmatters.org.uk/ISSUE22/I22P2.pdf</a>,
    Mollison, Denis (2023) &lt;<a href="https://arxiv.org/abs/2303.15310">arXiv:2303.15310</a>&gt;,
    (see also the package manual pref_pkg_manual.pdf).</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/denismollison/pref">https://github.com/denismollison/pref</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>base, graphics, grDevices, jpeg, utils</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/denismollison/pref/issues">https://github.com/denismollison/pref/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-31 15:40:27 UTC; denismollison</td>
</tr>
<tr>
<td>Author:</td>
<td>Denis Mollison <a href="https://orcid.org/0000-0002-4014-3431"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Denis Mollison &lt;denis.mollison@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-02 18:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='c99'>Example of an election of an academic organisation using STV allowing equal preferences frelection om an</h2><span id='topic+c99'></span>

<h3>Description</h3>

<p>Votes are in a ballot-format matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>c99
</code></pre>


<h3>Format</h3>

<p>A list with 10 variables, largest the vote matrix (343 x 10)
</p>
<p>q()
</p>
<dl>
<dt>s</dt><dd><p>number of seats</p>
</dd>
<dt>c</dt><dd><p>number of candidates</p>
</dd>
</dl>
<p>...

</p>

<hr>
<h2 id='cnc17'>Example of a political STV election - Cumnock and New Cumnock 2017</h2><span id='topic+cnc17'></span>

<h3>Description</h3>

<p>Votes are in a ballot-format matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cnc17
</code></pre>


<h3>Format</h3>

<p>A list with 10 variables, largest the vote matrix (930 x 8)
</p>

<dl>
<dt>s</dt><dd><p>number of seats</p>
</dd>
<dt>c</dt><dd><p>number of candidates</p>
</dd>
</dl>
<p>...

</p>


<h3>Source</h3>

<p><a href="https://www.macs.hw.ac.uk/~denis/stv_elections/SC2017/">https://www.macs.hw.ac.uk/~denis/stv_elections/SC2017/</a>
</p>

<hr>
<h2 id='hc12'>Unusually simple example of a political STV election - Helensburgh Central 2012</h2><span id='topic+hc12'></span>

<h3>Description</h3>

<p>Votes are in a ballot-format matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hc12
</code></pre>


<h3>Format</h3>

<p>A list with 10 variables, largest the vote matrix (629 x 6)
</p>

<dl>
<dt>s</dt><dd><p>number of seats</p>
</dd>
<dt>c</dt><dd><p>number of candidates</p>
</dd>
</dl>
<p>...

</p>


<h3>Source</h3>

<p><a href="https://www.macs.hw.ac.uk/~denis/stv_elections/SC2012/">https://www.macs.hw.ac.uk/~denis/stv_elections/SC2012/</a>
</p>

<hr>
<h2 id='j02'>Example of an STV election allowing equal preferences - John Muir Trust 2002</h2><span id='topic+j02'></span>

<h3>Description</h3>

<p>Votes are in a ballot-format matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>j02
</code></pre>


<h3>Format</h3>

<p>A list with 10 variables, largest the vote matrix (1168 x 10)
</p>
<p>q()
</p>
<dl>
<dt>s</dt><dd><p>number of seats</p>
</dd>
<dt>c</dt><dd><p>number of candidates</p>
</dd>
</dl>
<p>...

</p>


<h3>Source</h3>

<p><a href="https://www.macs.hw.ac.uk/~denis/stv_elections/jmt2002.blt">https://www.macs.hw.ac.uk/~denis/stv_elections/jmt2002.blt</a>
</p>

<hr>
<h2 id='nws17'>Example of a political STV election - North West and Central Sutherland 2017
Unusual in that under WIG no candidate reaches the (fixed) quota</h2><span id='topic+nws17'></span>

<h3>Description</h3>

<p>Votes are in a ballot-format matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nws17
</code></pre>


<h3>Format</h3>

<p>A list with 10 variables, largest the vote matrix (629 x 6)
</p>

<dl>
<dt>s</dt><dd><p>number of seats</p>
</dd>
<dt>c</dt><dd><p>number of candidates</p>
</dd>
</dl>
<p>...

</p>


<h3>Source</h3>

<p><a href="https://www.macs.hw.ac.uk/~denis/stv_elections/SC2017/">https://www.macs.hw.ac.uk/~denis/stv_elections/SC2017/</a>
</p>

<hr>
<h2 id='p17'>Example of a political STV election - Partick 2017</h2><span id='topic+p17'></span>

<h3>Description</h3>

<p>Votes are in a ballot-format matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>p17
</code></pre>


<h3>Format</h3>

<p>A list with 10 variables, largest the vote matrix (1456 x 8)
</p>

<dl>
<dt>s</dt><dd><p>number of seats</p>
</dd>
<dt>c</dt><dd><p>number of candidates</p>
</dd>
</dl>
<p>...

</p>


<h3>Source</h3>

<p><a href="https://www.macs.hw.ac.uk/~denis/stv_elections/SC2017/">https://www.macs.hw.ac.uk/~denis/stv_elections/SC2017/</a>
</p>

<hr>
<h2 id='pref.data'>put election data in an R file (.rda)</h2><span id='topic+pref.data'></span>

<h3>Description</h3>

<p>put election data in an R file (.rda)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pref.data(
  datafile,
  mult = FALSE,
  details = TRUE,
  parties = FALSE,
  ballot = FALSE,
  friendly = FALSE,
  header = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pref.data_+3A_datafile">datafile</code></td>
<td>
<p>File with election data</p>
</td></tr>
<tr><td><code id="pref.data_+3A_mult">mult</code></td>
<td>
<p>Whether includes aggregated votes (default FALSE)</p>
</td></tr>
<tr><td><code id="pref.data_+3A_details">details</code></td>
<td>
<p>Whether full election detail (default) or just vote matrix</p>
</td></tr>
<tr><td><code id="pref.data_+3A_parties">parties</code></td>
<td>
<p>File with party details (default FALSE, i.e. omit)</p>
</td></tr>
<tr><td><code id="pref.data_+3A_ballot">ballot</code></td>
<td>
<p>Default FALSE (meaning pref format)</p>
</td></tr>
<tr><td><code id="pref.data_+3A_friendly">friendly</code></td>
<td>
<p>Default FALSE (meaning most details after votes)</p>
</td></tr>
<tr><td><code id="pref.data_+3A_header">header</code></td>
<td>
<p>Whether a vote matrix has a header</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A standardised list of election info to save in a .rda file; for details see manual pref_pkg_manual.pdf (section 4)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>datafile=system.file("extdata","yale.dat",package="pref")
yale=pref.data(datafile,details=FALSE)
datafile=system.file("extdata","Jedburgh2012.blt",package="pref")
parties12=system.file("extdata","parties_SC2012.txt",package="pref")
jed12=pref.data(datafile,mult=TRUE,parties=parties12)
datafile=system.file("extdata","jmt2002.blt",package="pref")
j02=pref.data(datafile,friendly=TRUE)
</code></pre>

<hr>
<h2 id='stv'>STV election count - uses Meek STV, allows equal preferences</h2><span id='topic+stv'></span>

<h3>Description</h3>

<p>STV election count - uses Meek STV, allows equal preferences
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stv(
  votedata,
  outdirec = tempdir(),
  plot = TRUE,
  webdisplay = FALSE,
  interactive = FALSE,
  messages = TRUE,
  timing = FALSE,
  map = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stv_+3A_votedata">votedata</code></td>
<td>
<p>File with vote data</p>
</td></tr>
<tr><td><code id="stv_+3A_outdirec">outdirec</code></td>
<td>
<p>Needs to be set for permanent record of results</p>
</td></tr>
<tr><td><code id="stv_+3A_plot">plot</code></td>
<td>
<p>If =TRUE (default) produces plots of count and webpages in outdirec</p>
</td></tr>
<tr><td><code id="stv_+3A_webdisplay">webdisplay</code></td>
<td>
<p>If =TRUE displays plots and statistics as web pages</p>
</td></tr>
<tr><td><code id="stv_+3A_interactive">interactive</code></td>
<td>
<p>If =TRUE reports and pauses at each stage of the count
(press return to continue to next stage)</p>
</td></tr>
<tr><td><code id="stv_+3A_messages">messages</code></td>
<td>
<p>If=TRUE prints 1-line initial and final reports</p>
</td></tr>
<tr><td><code id="stv_+3A_timing">timing</code></td>
<td>
<p>Whether to report computing time at each stage</p>
</td></tr>
<tr><td><code id="stv_+3A_map">map</code></td>
<td>
<p>Link to a map or other URL associated with election</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing vote and count data, + optional web pages; for details see manual pref_pkg_manual.pdf (section 3)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cnc17meek=stv(cnc17,plot=FALSE)
c99result=stv(c99,plot=FALSE)
y12meek=stv(y12,plot=FALSE)

</code></pre>

<hr>
<h2 id='stv.plots'>Makes webpage plots of result of an STV election</h2><span id='topic+stv.plots'></span>

<h3>Description</h3>

<p>Makes webpage plots of result of an STV election
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stv.plots(elecdata, outdirec = tempdir(), webdisplay = FALSE, map = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stv.plots_+3A_elecdata">elecdata</code></td>
<td>
<p>An R list of results from stv or stv.wig</p>
</td></tr>
<tr><td><code id="stv.plots_+3A_outdirec">outdirec</code></td>
<td>
<p>A directory for web page output</p>
</td></tr>
<tr><td><code id="stv.plots_+3A_webdisplay">webdisplay</code></td>
<td>
<p>If TRUE displays the main output web page</p>
</td></tr>
<tr><td><code id="stv.plots_+3A_map">map</code></td>
<td>
<p>A possible extra showing map of election location</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Webpages with plots of election count and results
</p>


<h3>Examples</h3>

<pre><code class='language-R'>c99result=stv(c99)
c99plots=stv.plots(c99result)
nws17wig=stv.wig(nws17)
nws17plots=stv.plots(nws17wig)
</code></pre>

<hr>
<h2 id='stv.wig'>STV election count using WIG as for Scottish Council elections
calculated to 5 places of decimals as used for those elections</h2><span id='topic+stv.wig'></span>

<h3>Description</h3>

<p>STV election count using WIG as for Scottish Council elections
calculated to 5 places of decimals as used for those elections
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stv.wig(
  votedata,
  outdirec = tempdir(),
  plot = TRUE,
  webdisplay = FALSE,
  interactive = FALSE,
  messages = TRUE,
  timing = FALSE,
  map = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stv.wig_+3A_votedata">votedata</code></td>
<td>
<p>File with vote data</p>
</td></tr>
<tr><td><code id="stv.wig_+3A_outdirec">outdirec</code></td>
<td>
<p>Needs to be set for permanent record of results
(press return to continue to next stage)</p>
</td></tr>
<tr><td><code id="stv.wig_+3A_plot">plot</code></td>
<td>
<p>If =TRUE (default) produces plots of count and webpages in outdirec</p>
</td></tr>
<tr><td><code id="stv.wig_+3A_webdisplay">webdisplay</code></td>
<td>
<p>If =TRUE displays plots and statistics as web pages</p>
</td></tr>
<tr><td><code id="stv.wig_+3A_interactive">interactive</code></td>
<td>
<p>If =TRUE reports and pauses at each stage of the count</p>
</td></tr>
<tr><td><code id="stv.wig_+3A_messages">messages</code></td>
<td>
<p>If=TRUE prints 1-line initial and final reports</p>
</td></tr>
<tr><td><code id="stv.wig_+3A_timing">timing</code></td>
<td>
<p>Whether to report computing time at each stage</p>
</td></tr>
<tr><td><code id="stv.wig_+3A_map">map</code></td>
<td>
<p>Link to a map or other URL associated with election</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing votes at each stage, + optional web pages; for details see manual pref_pkg_manual.pdf (section 3)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>hc12wig=stv.wig(hc12,plot=FALSE,messages=FALSE)
nws17wig=stv.wig(nws17,plot=FALSE)
p17wig=stv.wig(p17,plot=FALSE)
cnc17wig=stv.wig(cnc17,plot=FALSE,timing=TRUE)

</code></pre>

<hr>
<h2 id='y12'>Example of an STV election - Yale faculty election (last 12)</h2><span id='topic+y12'></span>

<h3>Description</h3>

<p>Votes are in a ballot-format matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>y12
</code></pre>


<h3>Format</h3>

<p>A list with 10 variables, largest the vote matrix (424 x 44)
</p>

<dl>
<dt>s</dt><dd><p>number of seats</p>
</dd>
<dt>c</dt><dd><p>number of candidates</p>
</dd>
</dl>
<p>...

</p>


<h3>Source</h3>

<p><a href="https://cran.r-project.org/package=STV">https://cran.r-project.org/package=STV</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
