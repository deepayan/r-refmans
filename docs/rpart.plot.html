<!DOCTYPE html><html lang="en"><head><title>Help for package rpart.plot</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rpart.plot}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#prp'><p>Plot an rpart model.</p></a></li>
<li><a href='#ptitanic'><p>Titanic data with passenger names and other details removed.</p></a></li>
<li><a href='#rpart.plot'><p>Plot an rpart model. A simplified interface to the prp function.</p></a></li>
<li><a href='#rpart.predict'><p>Extended version of predict.rpart</p></a></li>
<li><a href='#rpart.rules'><p>Print an rpart model as a set of rules.</p></a></li>
<li><a href='#show.prp.palettes'><p>Show the built-in prp palettes.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>3.1.2</td>
</tr>
<tr>
<td>Title:</td>
<td>Plot 'rpart' Models: An Enhanced Version of 'plot.rpart'</td>
</tr>
<tr>
<td>Author:</td>
<td>Stephen Milborrow</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Stephen Milborrow &lt;milbo@sonic.net&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.0), rpart (&ge; 4.1-15)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>earth (&ge; 5.1.2)</td>
</tr>
<tr>
<td>Description:</td>
<td>Plot 'rpart' models. Extends plot.rpart() and text.rpart()
             in the 'rpart' package.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://www.milbo.org/rpart-plot/index.html">http://www.milbo.org/rpart-plot/index.html</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-26 10:57:51 UTC; milbo</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-26 14:30:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='prp'>Plot an rpart model.</h2><span id='topic+prp'></span>

<h3>Description</h3>

<p>Plot an <code><a href="rpart.html#topic+rpart">rpart</a></code> model.
</p>
<p>First-time users should use <code><a href="#topic+rpart.plot">rpart.plot</a></code> instead,
which provides a simplified interface to this function.
</p>
<p>For an overview, please see the package vignette
<a href="../doc/prp.pdf">Plotting rpart trees with the rpart.plot package</a>.
</p>
<p>The arguments of this function are a superset of those of
<code><a href="#topic+rpart.plot">rpart.plot</a></code> and some of the arguments have different
defaults.
In detail the different defaults are:
</p>

<table>
<tr>
 <td style="text-align: left;">
                     </td><td style="text-align: left;"> | </td><td style="text-align: center;"> <code><a href="#topic+rpart.plot">rpart.plot</a></code> </td><td style="text-align: left;"> | </td><td style="text-align: center;"> <code><a href="#topic+prp">prp</a></code> </td><td style="text-align: right;"> | </td>
</tr>
<tr>
 <td style="text-align: left;">
                     </td><td style="text-align: left;">   </td><td style="text-align: center;">               </td><td style="text-align: left;">   </td><td style="text-align: center;">              </td><td style="text-align: right;">   </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>type</code>          </td><td style="text-align: left;"> | </td><td style="text-align: center;"> <code>2</code>      </td><td style="text-align: left;"> | </td><td style="text-align: center;"> <code>0</code>     </td><td style="text-align: right;"> | </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>extra</code>         </td><td style="text-align: left;"> | </td><td style="text-align: center;"> <code>"auto"</code> </td><td style="text-align: left;"> | </td><td style="text-align: center;"> <code>0</code>     </td><td style="text-align: right;"> | </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>fallen.leaves</code> </td><td style="text-align: left;"> | </td><td style="text-align: center;"> <code>TRUE</code>   </td><td style="text-align: left;"> | </td><td style="text-align: center;"> <code>FALSE</code> </td><td style="text-align: right;"> | </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>varlen</code>        </td><td style="text-align: left;"> | </td><td style="text-align: center;"> <code>0</code>      </td><td style="text-align: left;"> | </td><td style="text-align: center;"> <code>-8</code>    </td><td style="text-align: right;"> | </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>faclen</code>        </td><td style="text-align: left;"> | </td><td style="text-align: center;"> <code>0</code>      </td><td style="text-align: left;"> | </td><td style="text-align: center;"> <code>3</code>     </td><td style="text-align: right;"> | </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>box.palette</code>   </td><td style="text-align: left;"> | </td><td style="text-align: center;"> <code>"auto"</code> </td><td style="text-align: left;"> | </td><td style="text-align: center;"> <code>0</code>     </td><td style="text-align: right;"> | </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>The defaults are different for historical reasons: for backwards
compatibility the defaults of <code><a href="#topic+prp">prp</a></code> haven't changed,
whereas the defaults of <code><a href="#topic+rpart.plot">rpart.plot</a></code> were changed when
<code>type="auto"</code> and <code>box.palette</code> were introduced
in version 2.0.0 of this package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prp(x=stop("no 'x' arg"),
    type=0, extra=0, under=FALSE, fallen.leaves=FALSE,
    nn=FALSE, ni=FALSE, yesno=TRUE,
    branch=if(fallen.leaves) 1 else .2,
    uniform=TRUE, left=TRUE, xflip=FALSE, yflip=FALSE,
    digits=2, varlen=-8, faclen=3, roundint=TRUE,
    cex=NULL, tweak=1,
    clip.facs=FALSE, clip.right.labs=TRUE,
    compress=TRUE, ycompress=uniform,
    Margin=0, space=1, gap=NULL,
    snip=FALSE, snip.fun=NULL, trace=FALSE,

    box.col=0, box.palette=0,
    pal.thresh=NULL, pal.node.fun=FALSE,
    border.col=col,
    round=NULL, leaf.round=NULL,
    shadow.col=0, prefix="", suffix="", xsep=NULL,

    under.percent=2, under.font=font, under.col=1, under.cex=.8,

    split.cex=1, split.font=2, split.family=family, split.col=1,
    split.box.col=0, split.border.col=0,
    split.lty=1, split.lwd=NULL, split.round=0,
    split.shadow.col=0,
    split.prefix="", right.split.prefix=NULL,
    split.suffix="", right.split.suffix=NULL,
    facsep=",", eq=" = ", lt=" &lt; ", ge=" &gt;= ",

    branch.col=if(is.zero(branch.type)) 1 else "gray",
    branch.lty=1, branch.lwd=NULL,
    branch.type=0, branch.tweak=1,
    min.branch.width=.002, branch.fill=branch.col,

    nn.cex=NULL, nn.font=3, nn.family="", nn.col=1,
    nn.box.col=0, nn.border.col=nn.col,
    nn.lty=1, nn.lwd=NULL, nn.round=.3,
    yes.text="yes", no.text="no",

    node.fun=NULL,
    split.fun=NULL,
    FUN="text",

    nspace=branch, minbranch=.3, do.par=TRUE,
    add.labs=TRUE, clip.left.labs=(type == 5), fam.main="",
    yshift=0, yspace=space, shadow.offset=.4,
    split.adj=NULL, split.yshift=0, split.space=space,
    split.yspace=yspace, split.shadow.offset=shadow.offset,
    nn.adj=.5, nn.yshift=0, nn.space=.8, nn.yspace=.5,
    ygap=gap/2, under.ygap=.5, yesno.yshift=0,
    xcompact=TRUE, ycompact=uniform, xcompact.ratio=.8, min.inter.height=4,
    max.auto.cex=1, min.auto.cex=.15, ycompress.cex=.7, accept.cex=1.1,
    shift.amounts=c(1.5, 2),
    Fallen.yspace=.1, boxes.include.gap=FALSE,
    legend.x=NULL, legend.y=NULL, legend.cex=1,
    ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prp_+3A_x">x</code></td>
<td>

<p>An <code><a href="rpart.html#topic+rpart">rpart</a></code> object.  The only required argument.
</p>
</td></tr>
<tr><td><code id="prp_+3A_type">type</code></td>
<td>

<p>Type of plot. Possible values:
</p>
<p><b>0</b> Default. Draw a split label at each split
and a node label at each leaf.
</p>
<p><b>1</b> Label all nodes, not just leaves.
Similar to <code>text.rpart</code>'s <code>all=TRUE</code>.
</p>
<p><b>2</b> Like <code>1</code> but draw the split labels below the node labels.
Similar to the plots in the CART book.
</p>
<p><b>3</b> Draw separate split labels for the left and right directions.
</p>
<p><b>4</b> Like <code>3</code> but label all nodes, not just leaves.
Similar to <code>text.rpart</code>'s <code>fancy=TRUE</code>.
See also <code>clip.right.labs</code>.<br />
</p>
<p><b>5</b> Show the split variable name in the interior nodes.<br />
</p>
</td></tr>
<tr><td><code id="prp_+3A_extra">extra</code></td>
<td>

<p>Display extra information at the nodes. Possible values:
</p>
<p><b>&quot;auto&quot;</b> (case insensitive)<br />
Automatically select a value based on the model type, as follows:<br />
<code>extra=106</code> class model with a binary response<br />
<code>extra=104</code> class model with a response having more than two levels<br />
<code>extra=100</code> other models<br />
</p>
<p><b>0</b> Default. No extra information.
</p>
<p><b>1</b> Display the number of observations that fall in the node
(per class for <code>class</code> objects;
prefixed by the number of events for <code>poisson</code> and <code>exp</code> models).
Similar to <code>text.rpart</code>'s <code>use.n=TRUE</code>.
</p>
<p><b>2</b> Class models: display the classification rate at the node,
expressed as the number of correct classifications and the number
of observations in the node.<br />
Poisson and exp models: display the number of events.
</p>
<p><b>3</b> Class models: misclassification rate at the node,
expressed as the number of incorrect classifications and the number
of observations in the node.
</p>
<p><b>4</b> Class models:
probability per class of observations in the node
(conditioned on the node, sum across a node is 1).
</p>
<p><b>5</b> Class models:
like <code>4</code> but don't display the fitted class.
</p>
<p><b>6</b> Class models:
the probability of the second class only.
Useful for binary responses.
</p>
<p><b>7</b> Class models:
like <code>6</code> but don't display the fitted class.
</p>
<p><b>8</b> Class models:
the probability of the fitted class.
</p>
<p><b>9</b> Class models:
The probability relative to <em>all</em> observations &ndash;
the sum of these probabilities across all leaves is 1.
This is in contrast to the options above, which give the probability
relative to observations falling <em>in the node</em> &ndash;
the sum of the probabilities across the node is 1.
</p>
<p><b>10</b> Class models:
Like <code>9</code> but display the probability of the second class only.
Useful for binary responses.<br />
</p>
<p><b>11</b> Class models:
Like <code>10</code> but don't display the fitted class.<br />
</p>
<p><b>+100</b> Add <code>100</code> to any of the above to also display
the percentage of observations in the node.
For example <code>extra=101</code> displays the number
and percentage of observations in the node.
Actually, it's a weighted percentage
using the <code>weights</code> passed to <code>rpart</code>.<br />
</p>
<p>Note: Unlike <code>text.rpart</code>,
by default <code>prp</code> uses its own routine for
generating node  labels (not the function attached to the object).
See the <code>node.fun</code> argument.<br />
</p>
</td></tr>
<tr><td><code id="prp_+3A_under">under</code></td>
<td>

<p>Applies only if <code>extra &gt; 0</code>.
Default <code>FALSE</code>, meaning put the extra text <em>in</em> the box.
Use <code>TRUE</code> to put the text <em>under</em> the box.
See also <code>under.cex</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_fallen.leaves">fallen.leaves</code></td>
<td>

<p>Default <code>FALSE</code>.
If <code>TRUE</code>, position the leaf nodes at the bottom of the graph.
</p>
</td></tr>
<tr><td><code id="prp_+3A_nn">nn</code></td>
<td>

<p>Display the node numbers.
Default <code>FALSE</code>.
(In the current implementation
some overplotting may occur with <code>nn=TRUE</code>.)
</p>
</td></tr>
<tr><td><code id="prp_+3A_ni">ni</code></td>
<td>

<p>Display the node indices,
i.e. the row numbers of the nodes in the object's <code><a href="rpart.html#topic+rpart.object">frame</a></code>.
Default <code>FALSE</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_yesno">yesno</code></td>
<td>

<p>One of<br />
<b>0</b> don't write <code>yes</code> and <code>no</code> on the tree
<br />
<b>1</b> (default) write <code>yes</code> and <code>no</code> at the top split
<br />
<b>2</b> write <code>yes</code> and <code>no</code> at all splits.  Seems to work best with
<code>fallen.leaves=TRUE, split.border.col=1</code>.
<br />
(The <code>yesno</code> argument is ignored if <code>type=3</code> or <code>4</code>.
Use <code>nn.col</code> and the other <code>nn</code> parameters
to change the color etc. of the <code>yes</code> and <code>no</code> text.
Use <code>yes.text</code> and <code>no.text</code> to change the actual text displayed.)
</p>
</td></tr>
<tr><td><code id="prp_+3A_branch">branch</code></td>
<td>

<p>Controls the shape of the branch lines.
Specify a value between <code>0</code> (V shaped branches) and
<code>1</code> (square shouldered branches).<br />
Default is <code>if(fallen.leaves) 1 else .2</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_uniform">uniform</code></td>
<td>

<p>If <code>TRUE</code> (the default), the vertical spacing of the nodes is uniform.
If <code>FALSE</code>, the nodes are spaced proportionally to the fit
(more precisely, to the difference between a node's deviance and the
sum of its two children's deviances).
Very small vertical spaces are automatically artificially expanded
to make room for the labels, see <code>minbranch</code>.
Note: <code>uniform=FALSE</code> with <code>cex=NULL</code> (the default)
can sometimes cause very small text.
</p>
</td></tr>
<tr><td><code id="prp_+3A_left">left</code></td>
<td>

<p>Default <code>TRUE</code>, meaning the left side of a split is the path
taken if the split condition is true.
With <code>left=FALSE</code> the split labels are changed so the right side is true.
</p>
</td></tr>
<tr><td><code id="prp_+3A_xflip">xflip</code></td>
<td>

<p>Default <code>FALSE</code>. If <code>TRUE</code>, flip the tree horizontally.
</p>
</td></tr>
<tr><td><code id="prp_+3A_yflip">yflip</code></td>
<td>

<p>Default <code>FALSE</code>. If <code>TRUE</code>, flip the tree vertically, so the root
is at the bottom.
</p>
</td></tr>
<tr><td><code id="prp_+3A_digits">digits</code></td>
<td>

<p>The number of significant digits in displayed numbers.
Default <code>2</code>.<br />
If <code>0</code>, use <code><a href="base.html#topic+getOption">getOption</a>("digits")</code>.<br />
If negative, use the standard <code><a href="base.html#topic+format">format</a></code> function
(with the absolute value of <code>digits</code>).<br /><br />
When <code>digits</code> is positive, the following details apply:<br />
Numbers from <code>0.001</code> to <code>9999</code> are printed without an exponent
(and the number of digits is actually only a suggestion,
see <code><a href="base.html#topic+format">format</a></code> for details).
Numbers out that range are printed with an &ldquo;engineering&rdquo; exponent (a multiple of 3).<br />
</p>
</td></tr>
<tr><td><code id="prp_+3A_varlen">varlen</code></td>
<td>

<p>Length of variable names in text at the splits
(and, for class responses, the class in the node label).
Default <code>-8</code>, meaning truncate to eight characters.
Possible values:<br />
</p>
<p><b>0</b> use full names.<br />
</p>
<p><b>greater than 0</b> call <code><a href="base.html#topic+abbreviate">abbreviate</a></code> with the given <code>varlen</code>.<br />
</p>
<p><b>less than 0</b> truncate variable names to the shortest length where they are still unique,
but never truncate to shorter than <code>abs(varlen)</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_faclen">faclen</code></td>
<td>

<p>Length of factor level names in splits.
Default <code>3</code>, meaning <code><a href="base.html#topic+abbreviate">abbreviate</a></code> to three characters.
Possible values are as <code>varlen</code> above, except that
for back-compatibility with <code><a href="rpart.html#topic+text.rpart">text.rpart</a></code> the special value <code>1</code>
means represent the factor levels with alphabetic characters
(<code>a</code> for the first level, <code>b</code> for the second, etc.).
</p>
</td></tr>
<tr><td><code id="prp_+3A_roundint">roundint</code></td>
<td>

<p>If <code>roundint=TRUE</code> (default) and all values of a predictor in the
training data are integers, then splits for that predictor
are rounded to integer.
For example, display <code>nsiblings &lt; 3</code> instead of <code>nsiblings &lt; 2.5</code>.<br />
If <code>roundint=TRUE</code> and the data used to build the model is no longer
available, a warning will be issued.<br />
Using <code>roundint=FALSE</code> is advised if non-integer values are in fact possible
for a predictor, even though all values in the training data for that
predictor are integral.
</p>
</td></tr>
<tr><td><code id="prp_+3A_cex">cex</code></td>
<td>

<p>Default <code>NULL</code>, meaning calculate the text size automatically.<br />
Since font sizes are discrete, the <code>cex</code> you ask for
may not be exactly the <code>cex</code> you get.
</p>
</td></tr>
<tr><td><code id="prp_+3A_tweak">tweak</code></td>
<td>

<p>Adjust the (possibly automatically calculated) <code>cex</code>.
Using <code>tweak</code> is often easier than specifying <code>cex</code>.<br />
The default <code>tweak</code> is <code>1</code>, meaning no adjustment.<br />
Use say <code>tweak=1.2</code> to make the text 20% larger.<br />
Since font sizes are discrete,
a small change to tweak may not actually change the type size,
or change it more than you want.
</p>
</td></tr>
<tr><td><code id="prp_+3A_clip.facs">clip.facs</code></td>
<td>

<p>Default <code>FALSE</code>.
If <code>TRUE</code>, print splits on factors as <code>female</code> instead of
<code>sex = female</code>; the variable name and equals is dropped.
<br />
Another example: print <code>survived</code> or <code>died</code> rather than
<code>survived = survived</code> or <code>survived = died</code>.<br />
</p>
</td></tr>
<tr><td><code id="prp_+3A_clip.right.labs">clip.right.labs</code></td>
<td>

<p>Applies only if <code>type=3</code> or <code>4</code>.<br />
Default is <code>TRUE</code> meaning &ldquo;clip&rdquo; the right-hand split labels,
i.e., don't print <code>variable=</code>.<br />
See also <code>clip.left.labs</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_compress">compress</code></td>
<td>

<p>If <code>TRUE</code> (the default), make more space
by shifting nodes horizontally where space is available.
This often allows larger text.
(This is the same as <code>plot.rpart</code>'s argument of the same name,
except that here the default is <code>TRUE</code>.)
</p>
</td></tr>
<tr><td><code id="prp_+3A_ycompress">ycompress</code></td>
<td>

<p>If <code>TRUE</code> (the default unless <code>uniform=FALSE</code>),
make more space by shifting labels vertically where space is available.
Actually, this only kicks in
if the initial automatically calculated <code>cex</code> is less than <code>0.7</code>.
Use <code>ycompress=FALSE</code> if you feel the resulting display is too messy.
In the current implementation, the shifting algorithm
works a little better (allowing larger text)
with <code>type=1</code>, <code>2</code>, or <code>3</code>. 
</p>
</td></tr>
<tr><td><code id="prp_+3A_margin">Margin</code></td>
<td>

<p>Extra white space around the tree, as a fraction of the graph width.
Default <code>0</code>, meaning no extra space.
To add say 10% space around the tree use <code>Margin=0.1</code>.
(This is the <code>margin</code> argument of <code>plot.rpart</code>.
The name was changed to prevent partial matching with <code>mar</code>,
which can be passed in as a ... argument.)
</p>
</td></tr>
<tr><td><code id="prp_+3A_space">space</code></td>
<td>

<p>Horizontal space to the box border on each side of the node label text,
in character widths.
Default <code>1</code>.
Use this (and <code>yspace</code>) for bigger boxes.
Since this affects the size of the (possibly invisible) boxes,
it also affects the graph layout and hence also the automatic calculation of <code>cex</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_gap">gap</code></td>
<td>

<p>Minimum horizontal gap between the (possibly invisible) boxes, in character widths.
Default <code>NULL</code>, meaning automatically choose a suitable value
(normally <code>1</code>, but if the graph is very crowded will be set to <code>0</code>,
permitting boxes to touch to allow a bigger <code>cex</code>).
See also <code>space</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_snip">snip</code></td>
<td>

<p>Default <code>FALSE</code>.
Set <code>TRUE</code> to interactively trim the tree with the mouse.
See the <a href="../doc/prp.pdf">package vignette</a> (or just try it).
</p>
</td></tr>
<tr><td><code id="prp_+3A_snip.fun">snip.fun</code></td>
<td>

<p>Function invoked after each mouse click when <code>snip=TRUE</code>.
Default <code>NULL</code>, meaning no function.
Otherwise set <code>snip.fun</code> to your own function
with the prototype <code>function(tree)</code>, where <code>tree</code> is the snipped tree.
See the <a href="../doc/prp.pdf">package vignette</a> for an example.
</p>
<p><b>The following control the node labels.</b>
</p>
</td></tr>
<tr><td><code id="prp_+3A_trace">trace</code></td>
<td>

<p>Default <code>FALSE</code>.
Use <code>TRUE</code> to print the automatically calculated <code>cex</code>, <code>xlim</code>, and <code>ylim</code>.
Use integer values greater than 1 for more detailed tracing.<br />
</p>
</td></tr>
<tr><td><code id="prp_+3A_box.col">box.col</code></td>
<td>

<p>Color of the boxes around the text.
Default <code>0</code>, meaning use the background color.
If this argument is used, the <code>box.palette</code> argument is ignored.
</p>
</td></tr>
<tr><td><code id="prp_+3A_box.palette">box.palette</code></td>
<td>

<p>Palette for coloring the node boxes based on the fitted value.
This is a vector of <code><a href="grDevices.html#topic+colors">colors</a></code>,
for example <code>box.palette=c("green", "green2", "green4")</code>.
Small fitted values are displayed with colors at the start of the vector;
large values with colors at the end.
Quantiles are used to partition the fitted values.
</p>
<p>The special value <code>box.palette=0</code> (default for <code>prp</code>) uses
the background color (typically white).
</p>
<p>The special value <code>box.palette="auto"</code> (default for
<code>rpart.plot</code>, case insensitive) automatically selects a
predefined palette based on the type of model.
</p>
<p>Otherwise specify a <b>predefined palette</b>
e.g. <code>box.palette="Grays"</code> for the predefined gray palette (a range of grays).
The predefined palettes are (see the <code><a href="#topic+show.prp.palettes">show.prp.palettes</a></code> function):<br />
<code>Grays</code> <code>Greys</code> <code>Greens</code> <code>Blues</code> <code>Browns</code> <code>Oranges</code> <code>Reds</code> <code>Purples</code> <br />
<code>Gy</code> <code>Gn</code> <code>Bu</code> <code>Bn</code> <code>Or</code> <code>Rd</code> <code>Pu</code> (alternative names for the above palettes)<br />
<code>BuGn</code> <code>GnRd</code> <code>BuOr</code> etc. (two-color diverging palettes: any combination of two of the above palettes)<br />
<code>RdYlGn</code> <code>GnYlRd</code> <code>BlGnYl</code> <code>YlGnBl</code> (three color palettes)
</p>
<p>Prefix the palette name with <code>"-"</code> to reverse the order of the colors<br />
e.g. <code>box.palette="-auto"</code> or <code>box.palette="-Grays"</code>.
</p>
<p>The <code>box.palette</code> argument is ignored if the <code>box.col</code> palette argument is specified.
</p>
</td></tr>
<tr><td><code id="prp_+3A_pal.thresh">pal.thresh</code></td>
<td>

<p>Applies when <code>box.palette</code> is a
two-color diverging palette (such as <code>BuGn</code>).
Specifies the response threshold to split the two sub-palettes (such as
<code>Bu</code> and <code>Gn</code>).
<br />
For example, to display fitted values less than 90 in shades of blue
and values greater than 90 in shades of green, use
<code>pal.thresh=90</code> with <code>box.palette="BuGn"</code>.
<br />
By default <code>pal.thresh</code> is calculated automatically.
(For a two-class response the default threshold is <code>0.5</code>; for
a continuous response the default is the median fitted value.)
<br />
Node boxes for fitted values less than the threshold are displayed using
colors from the first sub-palette;
boxes for fitted values greater than the threshold are displayed using
colors from the second sub-palette.
<br />
This argument is ignored if <code>box.palette</code> isn't a two-color diverging palette,
and is ignored for models with multiple-class responses (more than two classes).
</p>
</td></tr>
<tr><td><code id="prp_+3A_pal.node.fun">pal.node.fun</code></td>
<td>

<p>Specifies how the <code>box.palette</code> argument is handled when
the <code>node.fun</code> argument is specified.
<br />
Default is <code>FALSE</code>, meaning ignore <code>node.fun</code> and  use
the fitted value to select the node color from <code>box.palette</code> as usual.
<br />
If <code>TRUE</code>, use the label returned by the node
function (instead of the fitted value) to select the color.
The first number in each label returned by the node function is used,
skipping over any non-numeric initial text in the label.
An error message will be issued if a label doesn't include a number.
<br />
This argument is ignored if <code>node.fun</code> isn't specified,
and is ignored for models with multiple-class responses (more than two
classes).
</p>
</td></tr>
<tr><td><code id="prp_+3A_border.col">border.col</code></td>
<td>

<p>Color of the box border around the text.
Default <code>col</code>, the color of the text in the box.
Use <code>0</code> for no border.
(Note: <code>par</code> settings like <code>col</code> can be passed in as ... arguments.
If not passed in, <code>par("col")</code> is used.)
</p>
</td></tr>
<tr><td><code id="prp_+3A_round">round</code></td>
<td>

<p>Controls the rounding of the corners of the node boxes.
Default <code>NULL</code>, meaning calculate automatically.
Else specify <code>0</code> for sharp edges, and values greater
than <code>0</code> for rounded edges.
Bigger is more round.
Values too big for the size of the box get silently reduced.
</p>
</td></tr>
<tr><td><code id="prp_+3A_leaf.round">leaf.round</code></td>
<td>

<p>Controls the rounding of the corners of the leaf node boxes.
Default <code>NULL</code>, meaning use <code>round</code>.
Else specify a value greater than or equal to <code>0</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_shadow.col">shadow.col</code></td>
<td>

<p>Color of the shadow under the boxes.
Default <code>0</code>, no shadow.
Try <code>"gray"</code> or <code>"darkgray"</code>.
(Note: overlapping shadows look better on devices that support <code><a href="grDevices.html#topic+rgb">alpha</a></code> channels.
If you get the message &quot;Warning: semi-transparency is not supported&quot; please let me know &ndash;
it means that a fix is needed to the code that determines if the device supports alpha channels.)
</p>
</td></tr>
<tr><td><code id="prp_+3A_prefix">prefix</code></td>
<td>

<p>Default <code>""</code>.
Prepend this string to the node labels.
So could be the name of the fitted response, for instance.
</p>
</td></tr>
<tr><td><code id="prp_+3A_suffix">suffix</code></td>
<td>

<p>Default <code>""</code>.
Append this string to the node labels.
Text after a double newline <code>"\n\n"</code> (if any) will be plotted <em>under</em> the box.
(Actually, double newlines can be used in any of the prefix or suffix
arguments for this purpose.)
</p>
</td></tr>
<tr><td><code id="prp_+3A_xsep">xsep</code></td>
<td>

<p>String which separates the individual counts and probabilities
in node labels when <code>extra&gt;0</code>.
Default NULL meaning automatically select: usually<br />
<code>"  "</code> (two spaces), but <code>" / "</code> for rates.
Use <code>xsep="/"</code> for compatibility with <code>text.rpart</code>.
See also <code>facsep</code>, which separates the factor levels in split labels.<br />
</p>
</td></tr>
<tr><td><code id="prp_+3A_under.percent">under.percent</code></td>
<td>

<p>Control whitespace before the percentage (when 100 is used with the <code>extra</code> argument).
One of<br />
<b>0</b> put a space before the percentage
<br />
<b>1</b> put a newline before the percentage
<br />
<b>2</b> (default) automatically choose a space or newline before the percentage.
<br />
</p>
<p><b>The following control the text under the boxes</b> (apply only if
<code>under=TRUE</code> or there is a double newline <code>\n\n</code> in <code>prefix</code> or <code>suffix</code>).
</p>
</td></tr>
<tr><td><code id="prp_+3A_under.font">under.font</code></td>
<td>

<p>Font of the text under the box. Default <code>font</code> (which can be passed in as a ... argument).
</p>
</td></tr>
<tr><td><code id="prp_+3A_under.col">under.col</code></td>
<td>

<p>Color of the text under the box.
Default <code>1</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_under.cex">under.cex</code></td>
<td>

<p>Size of the text under the box relative to the text in the box.
Default <code>.8</code>, smaller than the text in the box.<br />
</p>
<p><b>The following control the split labels.</b>
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.cex">split.cex</code></td>
<td>

<p>Size of the split text relative to <code>cex</code>
(which by default is calculated automatically).
Default <code>1</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.font">split.font</code></td>
<td>

<p>Font for the split labels.
Default <code>2</code>, bold.
(Note: use <code>font</code> to change the <em>node</em> label text.)
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.family">split.family</code></td>
<td>

<p>Font family for the split labels.<br />
Default <code>""</code>,
or use something like <code>split.family="serif"</code>.
(Note: use <code>family</code> to change the <em>node</em> label text.)
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.col">split.col</code></td>
<td>

<p>Color of the split label text.
Default <code>1</code>.
(Note: use <code>col</code> to change the <em>node</em> label text.)
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.box.col">split.box.col</code></td>
<td>

<p>Color of the split boxes.
Default <code>0</code>, meaning use the background color.
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.border.col">split.border.col</code></td>
<td>

<p>Color of the split box borders.
Default <code>0</code>, invisible.
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.lty">split.lty</code></td>
<td>

<p>Line type for the split box borders.
The default is <code>1</code>, but the border will be invisible
unless you change the default <code>split.border.col</code>.
(Note: use <code>lty</code> to change the <em>node</em> box borders.)
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.lwd">split.lwd</code></td>
<td>

<p>Line width of the split box border relative to <code>cex</code>
(which by default is calculated automatically).
The border is by default invisible, see <code>split.border.col</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.round">split.round</code></td>
<td>

<p>Controls the rounding of the corners of the split boxes.
Default <code>0</code>, meaning sharp corners.
Else specify a value greater than or equal to <code>0</code>.
The split boxes are by default invisible,
see <code>split.box.col</code> and <code>split.border.col</code>).
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.shadow.col">split.shadow.col</code></td>
<td>

<p>Color of the shadow under the split boxes.
Default <code>0</code>, no shadow.
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.prefix">split.prefix</code></td>
<td>

<p>Default <code>""</code>.
Prepend this string to the split labels.
</p>
</td></tr>
<tr><td><code id="prp_+3A_right.split.prefix">right.split.prefix</code></td>
<td>

<p>Default <code>split.prefix</code>.
Prepend this string to the right split labels.
Applies only when <code>type=3</code> or <code>4</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.suffix">split.suffix</code></td>
<td>

<p>Default <code>""</code>.
Append this string to the split labels.
</p>
</td></tr>
<tr><td><code id="prp_+3A_right.split.suffix">right.split.suffix</code></td>
<td>

<p>Default <code>split.suffix</code>.
Append this string to the right split labels.
Applies only when <code>type=3</code> or <code>4</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_facsep">facsep</code></td>
<td>

<p>Default <code>","</code>.
String which separates the factor levels in split labels.
See also <code>xsep</code>, which separates the individual counts when <code>extra</code> is used.
</p>
</td></tr>
<tr><td><code id="prp_+3A_eq">eq</code></td>
<td>

<p>Default <code>" = "</code>.
String which separates the factor name from the levels in split labels.
The idea is that you can add or remove spaces around the <code>=</code>, or use
words if that suits you.
</p>
</td></tr>
<tr><td><code id="prp_+3A_lt">lt</code></td>
<td>

<p>Default <code>" &lt; "</code>.
String which represents &ldquo;less than&rdquo; in split labels.
</p>
</td></tr>
<tr><td><code id="prp_+3A_ge">ge</code></td>
<td>

<p>Default <code>" &gt;= "</code>.
String which represents &ldquo;greater than or equal&rdquo; in split labels.<br />
</p>
<p><b>The following control the branches.</b>
</p>
</td></tr>
<tr><td><code id="prp_+3A_branch.col">branch.col</code></td>
<td>

<p>Color of the branch lines.
Default <code>1</code>, but set to <code>"gray"</code> if <code>branch.type</code> is nonzero.
</p>
</td></tr>
<tr><td><code id="prp_+3A_branch.lty">branch.lty</code></td>
<td>

<p>Branch line type.
Default <code>1</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_branch.lwd">branch.lwd</code></td>
<td>

<p>Line width of the branch lines relative to <code>cex</code>
(which by default is calculated automatically).
(Note: <code>branch.lwd</code> does not control the width of the
&ldquo;wide branches&rdquo; drawn when <code>branch.type</code> is nonzero.)
</p>
</td></tr>
<tr><td><code id="prp_+3A_branch.type">branch.type</code></td>
<td>

<p>Default <code>0</code>.
If nonzero draw &ldquo;wide branches&rdquo;, with branch widths proportional
to the parameter selected by <code>branch.type</code> as follows:
</p>
<p><b>0</b> The default.  The branch lines are drawn conventionally.<br />
<b>1</b> deviance<br />
<b>2</b> sqrt(deviance)<br />
<b>3</b> deviance / nobs<br />
<b>4</b> sqrt(deviance / nobs) (the standard deviation when <code>method="anova"</code>)<br />
<b>5</b> weight (<code>frame$wt</code>).
This is the number of observations at the node,
unless <code>rpart</code>'s <code>weight</code> argument was used.<br />
<b>6</b> complexity<br />
<b>7</b> abs(predicted value)<br />
<b>8</b> predicted value - min(predicted value)<br />
<b>9</b> constant (for checking visual perception of the
relative width of branches).<br />
</p>
<p>Otherwise set <code>branch.type</code> to your own function.
The function should take a single argument <code>x</code>
(the <code>rpart</code> object) and return
a numeric vector of non-negative widths corresponding to rows in <code>frame</code>.
See <code>get.branch.widths</code> in the source code.
</p>
<p>Note: with a nonzero <code>branch.type</code>, in the current implementation
the <code>branch</code> argument will be silently changed to <code>1</code>
(if <code>branch &gt; .5</code>) or <code>0</code> (if <code>branch &lt; .5</code>)<br />
</p>
</td></tr>
<tr><td><code id="prp_+3A_branch.tweak">branch.tweak</code></td>
<td>

<p>Default <code>1</code>.
Applies only if <code>branch.type</code> is nonzero.
Use this argument to scale the widths of the branches,
for example, <code>branch.tweak=.5</code> to halve the width of the branches.
(By default, <code>prp</code> normalizes the widths so the
widest branch is one-fifth the plot width.)
</p>
</td></tr>
<tr><td><code id="prp_+3A_min.branch.width">min.branch.width</code></td>
<td>

<p>Default <code>0.002</code>.
Applies only if <code>branch.type</code> is nonzero.
The minimum width of a branch, as a fraction of the page width.
The width of branches that would be thinner than <code>min.branch.width</code> is clamped.
Increase <code>min.branch.width</code> if the thinnest branches are too skinny on your display device.
</p>
</td></tr>
<tr><td><code id="prp_+3A_branch.fill">branch.fill</code></td>
<td>

<p>Color used to fill the wide branch lines.
Applies only if <code>branch.type</code> is nonzero.
Default <code>branch.col</code>.<br />
</p>
<p><b>The following control the node numbers (with <code>nn=TRUE)</code>.</b>
</p>
</td></tr>
<tr><td><code id="prp_+3A_nn.cex">nn.cex</code></td>
<td>

<p>Default <code>NULL</code>, meaning calculate the <code>cex</code>
of the node numbers automatically.
This and the following arguments apply only when <code>nn=TRUE</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_nn.font">nn.font</code></td>
<td>

<p>Font for the node numbers.
Default <code>3</code>, italic.
</p>
</td></tr>
<tr><td><code id="prp_+3A_nn.family">nn.family</code></td>
<td>

<p>Font family for the node numbers.
Default <code>""</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_nn.col">nn.col</code></td>
<td>

<p>Color of the node number text.
Default <code>1</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_nn.box.col">nn.box.col</code></td>
<td>

<p>Color of the boxes around the node numbers.
Default <code>0</code>, meaning use the background color.
</p>
</td></tr>
<tr><td><code id="prp_+3A_nn.border.col">nn.border.col</code></td>
<td>

<p>Color of the box border around the node numbers.
Default <code>nn.col</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_nn.lty">nn.lty</code></td>
<td>

<p>Line type of the node number box border.
Default <code>1</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_nn.lwd">nn.lwd</code></td>
<td>

<p>Line width of the node box border relative to <code>cex</code>
(which by default is calculated automatically).
Default <code>NULL</code>, meaning use <code>lwd</code> (which can be passed in as a ... argument).
</p>
</td></tr>
<tr><td><code id="prp_+3A_nn.round">nn.round</code></td>
<td>

<p>Controls the rounding of the corners of the node number boxes.
Default <code>.3</code>, meaning small corners.
Else specify a value greater than or equal to <code>0</code>.<br />
</p>
</td></tr>
<tr><td><code id="prp_+3A_yes.text">yes.text</code>, <code id="prp_+3A_no.text">no.text</code></td>
<td>

<p>Text displayed when <code>yesno=TRUE</code>.
Default <code>yes.text="yes"</code> and <code>no.text="no"</code>.
</p>
<p><b>The following are user definable functions.</b>
</p>
</td></tr>
<tr><td><code id="prp_+3A_node.fun">node.fun</code></td>
<td>

<p>The function that generates the text at the node labels.
The default is <code>NULL</code>,
which means use a default function internal to <code>prp</code>.
(This is necessary for full support of <code>extra</code> as described
in the section on <code>extra</code> above.)<br />
Otherwise set <code>node.fun</code> to your own function
with the prototype<br />
<code>function(x, labs, digits, varlen)</code><br />
See the <a href="../doc/prp.pdf">package vignette</a> for details.
See also the <code>pal.node.fun</code> argument.
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.fun">split.fun</code></td>
<td>

<p>The function that generates the text at the splits.
The default is <code>NULL</code>,
which means use a default function internal to <code>prp</code>.
Otherwise set <code>split.fun</code> to your own function with the
prototype <code>function(x, labs, digits, varlen, faclen)</code>
</p>
</td></tr>
<tr><td><code id="prp_+3A_fun">FUN</code></td>
<td>

<p>The function that displays the text on the screen.
Default <code><a href="graphics.html#topic+text">text</a></code>.<br />
</p>
<p><b>The following are esoteric parameters, mostly for the graph layout engine.</b>
</p>
</td></tr>
<tr><td><code id="prp_+3A_nspace">nspace</code></td>
<td>

<p>Applies only when <code>compress=TRUE</code>.
Default <code>nspace=branch</code>.
The size of the space between a split and a leaf, relative to
the space between leaves.
</p>
</td></tr>
<tr><td><code id="prp_+3A_minbranch">minbranch</code></td>
<td>

<p>Applies only when <code>uniform=FALSE</code>.  Default <code>.3</code>.
The minimum height between levels is clamped at
<code>minbranch</code> times the mean interlevel distance.
Needed because sometimes a split gives little or no improvement in deviance, and
an interlevel distance strictly proportional to the improvement would
leave no room for the label.
</p>
</td></tr>
<tr><td><code id="prp_+3A_do.par">do.par</code></td>
<td>

<p>Default <code>TRUE</code>, meaning adjust the <code>mar</code> parameter
so the tree fills the figure region.
This also sets <code>xpd=NA</code>.
These graphic parameters are restored to their original
state before <code>prp</code> exits.
If you explicitly set <code>mar</code> or <code>xpd</code>, <code>prp</code> will
use your setting regardless of the setting of <code>do.par</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_add.labs">add.labs</code></td>
<td>

<p>Default <code>TRUE</code>, meaning display the labels.
If <code>FALSE</code>, gives a bare bones display similar to <code>plot.rpart</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_clip.left.labs">clip.left.labs</code></td>
<td>

<p>Like <code>clip.right.labs</code> but for the left labels.
Default is <code>FALSE</code>.
Note that <code>clip.left.labs</code> and <code>clip.right.labs</code> can be vectors,
indexed on the split number.
</p>
</td></tr>
<tr><td><code id="prp_+3A_fam.main">fam.main</code></td>
<td>

<p>Font family for the main text.  Default <code>""</code>.
The (inconsistent) name was chosen to minimize partial matching
with <code>main</code> and <code>family</code> which can be passed in as
in as ... arguments.
</p>
</td></tr>
<tr><td><code id="prp_+3A_yshift">yshift</code></td>
<td>

<p>Vertical position of the labels, in character heights relative to their default position.
Default <code>0</code>.
Negative values move the text down; positive up
(the box around the text will follow along).
</p>
</td></tr>
<tr><td><code id="prp_+3A_yspace">yspace</code></td>
<td>

<p>Vertical space to the box border above and below the node label text, in character heights.
Default <code>space</code>.
See the comments for <code>space</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_shadow.offset">shadow.offset</code></td>
<td>

<p>Offset of the shadow from the boxes, in character widths.
Default <code>.4</code>
(but the shadow will be invisible unless the default <code>shadow.col</code> is changed).
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.adj">split.adj</code></td>
<td>

<p>Horizontal position of the split text.
In string width units, as is the convention for <code>adj</code> arguments.
Default <code>NULL</code>, meaning use <code>adj</code>
(which defaults to <code>0.5</code> but can be passed in as a ... argument).
Use values less/more than <code>.5</code> to shift the text left/right
(the box around the text will follow along).
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.yshift">split.yshift</code></td>
<td>

<p>Vertical position of the split labels,
in character heights relative to their default positions.
Default <code>0</code>.
Negative values move the text down; positive up
(the box around the text will follow along).
This adjusts the positions of the split labels relative to the node labels.
(Use <code>yshift</code> if you want to shift <em>both</em> the split and node labels.)
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.space">split.space</code></td>
<td>

<p>Horizontal space between the split label text and the box,
in character widths.
Default <code>space</code>.
Affects the size of the box drawn around the text.
The split boxes are by default invisible
(see <code>split.box.col</code> and <code>split.border.col</code>),
but nevertheless affect the graph layout used
in the automatic calculation of <code>cex</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.yspace">split.yspace</code></td>
<td>

<p>Vertical space between the split label text and the box, in character heights.
Default <code>yspace</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_split.shadow.offset">split.shadow.offset</code></td>
<td>

<p>Offset of the shadow from the split boxes, in character widths.
Default <code>shadow.offset</code>.
(but the shadow will be invisible unless the default <code>shadow.col</code> is changed).
</p>
</td></tr>
<tr><td><code id="prp_+3A_nn.adj">nn.adj</code></td>
<td>

<p>Horizontal position of the node label text.
Default <code>.5</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_nn.yshift">nn.yshift</code></td>
<td>

<p>Vertical position of the node numbers, in character heights relative to their default positions.
Default <code>0</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_nn.space">nn.space</code></td>
<td>

<p>Horizontal space to the box border on each side of the node number text,
in character widths.
Default <code>.8</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_nn.yspace">nn.yspace</code></td>
<td>

<p>Vertical space to the box border above and below the node number text, in character heights.
Default <code>.5</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_under.ygap">under.ygap</code></td>
<td>

<p>Applies if text is plotted under the box
(i.e. if <code>under=TRUE</code> or there is a double newline in <code>prefix</code> or <code>suffix</code>).
Vertical gap (in char heights) between the lower edge of the box and
the top of the text under the box.
</p>
</td></tr>
<tr><td><code id="prp_+3A_yesno.yshift">yesno.yshift</code></td>
<td>

<p>Vertical position of &quot;yes&quot; and &quot;no&quot;
in character heights relative to their default position.
Default <code>0</code>.
Applies only when <code>yesno=TRUE</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_ygap">ygap</code></td>
<td>

<p>Minimum vertical gap between boxes, in character heights.
Default <code>gap/2</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_xcompact">xcompact</code></td>
<td>

<p>If <code>TRUE</code> (the default) and there is too much white space,
automatically change <code>xlim</code> to compact the entire tree horizontally.
This usually only activates for small trees.
(The <code>xcompact</code> and <code>ycompact</code> arguments compact the tree as a whole,
whereas the <code>compress</code> and <code>ycompress</code> arguments move parts of the tree
into available space.)
</p>
</td></tr>
<tr><td><code id="prp_+3A_ycompact">ycompact</code></td>
<td>

<p>If <code>TRUE</code> (the default) and there is too much vertical space,
automatically change <code>ylim</code> to compact the entire tree vertically.
</p>
</td></tr>
<tr><td><code id="prp_+3A_xcompact.ratio">xcompact.ratio</code></td>
<td>

<p>Default <code>.8</code>.
Applies only when <code>xcompact=TRUE</code>.
The maximum possible without overplotting is <code>1</code>,
but compacting by <code>.8</code> usually
gives more pleasing spacing (it gives more space).
</p>
</td></tr>
<tr><td><code id="prp_+3A_min.inter.height">min.inter.height</code></td>
<td>

<p>Default <code>4</code>.
Applies only when <code>ycompact=TRUE</code>.
Minimum height (in units of character height)
between the lowest label in a layer and the highest label in the layer below it.
</p>
</td></tr>
<tr><td><code id="prp_+3A_max.auto.cex">max.auto.cex</code></td>
<td>

<p>Clamp the maximum automatically calculated <code>cex</code> at this value
Default <code>1</code>, meaning never expand <code>cex</code>, only contract when necessary.
</p>
</td></tr>
<tr><td><code id="prp_+3A_min.auto.cex">min.auto.cex</code></td>
<td>

<p>Default <code>.15</code>.
Never downscale to less than this when automatically calculating <code>cex</code>,
even if overplotted labels result.
(The graph layout algorithm is unstable with <code>cex</code>'s below <code>0.15</code>
&ndash; meaning that the automatic type size may be smaller than necessary.)
</p>
</td></tr>
<tr><td><code id="prp_+3A_ycompress.cex">ycompress.cex</code></td>
<td>

<p>Default <code>.7</code>.
Applies only when <code>ycompress=TRUE</code>.
Apply the <code>ycompress</code> algorithm if the initial automatically calculated <code>cex</code> is less than this.
The idea is that we don't want to shift if we get an acceptable cex without shifting.
Make <code>Inf</code> to always attempt shifting.
</p>
</td></tr>
<tr><td><code id="prp_+3A_accept.cex">accept.cex</code></td>
<td>

<p>Accept shifting only if it causes at least this much improvement in <code>cex</code>
(because we don't want to shift if it gives only a small improvement in cex).
Default <code>1.1</code> i.e. require at least a 10% improvement.
Use <code>0</code> to always accept shifts and
<code>Inf</code> to never accept (or use <code>ycompress=FALSE</code>).
</p>
</td></tr>
<tr><td><code id="prp_+3A_shift.amounts">shift.amounts</code></td>
<td>

<p>Default <code>c(1.5, 2, 3)</code>.
For <code>ycompress</code>, choose the best <code>cex</code> yielded
by shifting nodes by these amounts,
in multiples of the box heights (after initial scaling).
</p>
</td></tr>
<tr><td><code id="prp_+3A_fallen.yspace">Fallen.yspace</code></td>
<td>

<p>Extra space for fallen leaves.
Default <code>.1</code>, meaning allow 10% of the vertical space for the fallen leaves.
(The name <code>Fallen.yspace</code> uses upper case to avoid partial matching with <code>fallen.leaves</code>.)
</p>
</td></tr>
<tr><td><code id="prp_+3A_boxes.include.gap">boxes.include.gap</code></td>
<td>

<p>Default <code>FALSE</code>.
Include <code>gap</code> and <code>ygap</code> when drawing the boxes, for debugging purposes.
(To draw the boxes, see
<code>box.col</code>, <code>border.col</code>, <code>split.box.col</code>, and <code>split.border.col</code>.)
This argument only affects the way the boxes are drawn, not the graph layout algorithm in any way.
With the optimum <code>cex</code> at least one pair of boxes displayed in this manner will just touch
(but none will overlap).
</p>
</td></tr>
<tr><td><code id="prp_+3A_legend.x">legend.x</code></td>
<td>

<p>Applies only to models with a multilevel class response
(not binary or anova models, for which no legend is drawn).<br />
Horizontal position of the legend.
Typically a value between <code>0</code> and <code>1</code>, although values beyond
those limits are often useful.<br />
Default is <code>NULL</code> meaning automatically position the legend (assuming
there is enough space). Use <code>NA</code> for no legend.<br />
Use <code>trace=TRUE</code> to see the automatically calculated legend position.
</p>
</td></tr>
<tr><td><code id="prp_+3A_legend.y">legend.y</code></td>
<td>

<p>Like <code>legend.x</code> but for the vertical position of the legend.
</p>
</td></tr>
<tr><td><code id="prp_+3A_legend.cex">legend.cex</code></td>
<td>

<p>Like <code>legend.x</code> but for the relative size of the legend text.
Default is <code>1</code>.
</p>
</td></tr>
<tr><td><code id="prp_+3A_...">...</code></td>
<td>

<p>Extra <code><a href="graphics.html#topic+par">par</a></code> arguments.  Only the &ldquo;important&rdquo; <code>par</code> arguments are supported.
Note that arguments like <code>col</code> apply only to the <em>node</em> labels.
To affect the split labels or branch lines, use <code>split.col</code> and <code>branch.col</code> instead.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the following components.
With the default args most of these are calculated automatically.
</p>
<table role = "presentation">
<tr><td><code>obj</code></td>
<td>
<p> The <code>rpart</code> object.
Identical to the <code>x</code> argument passed in unless <code>snip</code> was used.</p>
</td></tr>
<tr><td><code>snipped.nodes</code></td>
<td>
<p> The snipped nodes, <code>NULL</code> unless <code>snip</code> was used.</p>
</td></tr>
<tr><td><code>xlim</code>, <code>ylim</code></td>
<td>
<p> The graph limits.</p>
</td></tr>
<tr><td><code>x</code>, <code>y</code></td>
<td>
<p> The node coords.</p>
</td></tr>
<tr><td><code>branch.x</code>, <code>branch.y</code></td>
<td>
<p> The branch line coords.</p>
</td></tr>
<tr><td><code>labs</code></td>
<td>
<p> The node labels.</p>
</td></tr>
<tr><td><code>cex</code></td>
<td>
<p> The node label <code>cex</code>.</p>
</td></tr>
<tr><td><code>boxes</code></td>
<td>
<p> The coords of the boxes around the nodes.</p>
</td></tr>
<tr><td><code>split.labs</code></td>
<td>
<p> The split labels.</p>
</td></tr>
<tr><td><code>split.cex</code></td>
<td>
<p> The split label <code>cex</code>.</p>
</td></tr>
<tr><td><code>split.boxes</code></td>
<td>
<p> The coords of the boxes around the splits.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>The package vignette <a href="../doc/prp.pdf">Plotting rpart trees with the rpart.plot package</a><br /><br />
<code><a href="#topic+rpart.plot">rpart.plot</a></code><br /><br />
Functions in the <code>rpart</code> package:
<code><a href="rpart.html#topic+plot.rpart">plot.rpart</a></code>
<code><a href="rpart.html#topic+text.rpart">text.rpart</a></code>
<code><a href="rpart.html#topic+rpart">rpart</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ptitanic)
tree &lt;- rpart(survived ~ ., data = ptitanic, cp = .02)
                           # cp = .02 because want small tree for demo

old.par &lt;- par(mfrow = c(2,2))
                           # put 4 figures on one page

prp(tree, main = "default prp\n(type =  0, extra = 0)")

prp(tree, main = "type = 4,  extra = 6\nbox.palette = \"auto\"",
    type = 4, extra = 6,   # label all nodes, show prob of second class
    box.palette = "auto",  # auto color the nodes based on the model type
    faclen = 0)            # faclen = 0 to print full factor names

cols &lt;- ifelse(tree$frame$yval == 1, "darkred", "green4")
                           # green if survived

prp(tree, main = "assorted arguments",
    extra = 106,           # display prob of survival and percent of obs
    nn = TRUE,             # display the node numbers
    fallen.leaves = TRUE,  # put the leaves on the bottom of the page
    shadow.col = "gray",   # shadows under the leaves
    branch.lty = 3,        # draw branches using dotted lines
    branch = .5,           # change angle of branch lines
    faclen = 0,            # faclen = 0 to print full factor names
    trace = 1,             # print the auto calculated cex, xlim, ylim
    split.cex = 1.2,       # make the split text larger than the node text
    split.prefix = "is ",  # put "is " before split text
    split.suffix = "?",    # put "?" after split text
    col = cols, border.col = cols,   # green if survived
    split.box.col = "lightgray",   # lightgray split boxes (default is white)
    split.border.col = "darkgray", # darkgray border on split boxes
    split.round = .5)              # round the split box corners a tad

# compare to the plotting functions in the rpart package
plot(tree, uniform = TRUE, compress = TRUE, branch = .2)
text(tree, use.n = TRUE, cex = .8, xpd = NA) # cex is a guess, depends on your window size
title("compare to the plotting functions\nin the rpart package", cex.sub = .8)

par(old.par)
</code></pre>

<hr>
<h2 id='ptitanic'>Titanic data with passenger names and other details removed.</h2><span id='topic+ptitanic'></span>

<h3>Description</h3>

<p>Titanic data with passenger names and other details removed.</p>


<h3>Format</h3>

<p>A data frame with 1046 observations on 6 variables.
</p>

<table>
<tr>
 <td style="text-align: left;">
      <code>pclass</code>   </td><td style="text-align: left;"> passenger class, unordered factor: 1st 2nd 3rd</td>
</tr>
<tr>
 <td style="text-align: left;">
      <code>survived</code> </td><td style="text-align: left;"> factor: died or survived</td>
</tr>
<tr>
 <td style="text-align: left;">
      <code>sex</code>      </td><td style="text-align: left;"> unordered factor: male female</td>
</tr>
<tr>
 <td style="text-align: left;">
      <code>age</code>      </td><td style="text-align: left;"> age in years, min 0.167 max 80.0</td>
</tr>
<tr>
 <td style="text-align: left;">
      <code>sibsp</code>    </td><td style="text-align: left;"> number of siblings or spouses aboard, integer: 0...8</td>
</tr>
<tr>
 <td style="text-align: left;">
      <code>parch</code>    </td><td style="text-align: left;"> number of parents or children aboard, integer: 0...6</td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>



<h3>Source</h3>

<p>The dataset was compiled by Frank Harrell and Robert Dawson:<br />
<a href="https://hbiostat.org/data/repo/titanic.html">https://hbiostat.org/data/repo/titanic.html</a>.
</p>
<p>See also:<br />
<a href="https://biostat.app.vumc.org/wiki/pub/Main/DataSets/titanic3info.txt">https://biostat.app.vumc.org/wiki/pub/Main/DataSets/titanic3info.txt</a>.
</p>
<p>For this version of the Titanic data, passenger details were deleted,
<code>survived</code> was cast as a <code>factor</code>,
and the name changed to <code>ptitanic</code> to minimize confusion with
other versions.
</p>
<p>In this data the crew are conspicuous by their absence.
</p>
<p>Contents of <code>ptitanic</code>:
</p>
<pre>
         pclass survived    sex    age sibsp parch
    1       1st survived female 29.000     0     0
    2       1st survived   male  0.917     1     2
    3       1st     died female  2.000     1     2
    4       1st     died   male 30.000     1     2
    5       1st     died female 25.000     1     2
    ...
    1309    3rd     died   male 29.000     0     0
    </pre>
<p>How <code>ptitanic</code> was built:
</p>
<pre>
    load("titanic3.sav") # from Dr. Harrell's web site
    # discard name, ticket, fare, cabin, embarked, body, home.dest
    ptitanic &lt;- titanic3[,c(1,2,4,5,6,7)]
    # change survived from integer to factor
    ptitanic$survived &lt;- factor(ptitanic$survived, labels = c("died", "survived"))
    save(ptitanic, file = "ptitanic.rda")</pre>
<p>This version of the data differs from
<code><a href="earth.html#topic+etitanic">etitanic</a></code> in the <code><a href="earth.html#topic+earth">earth</a></code> package
in that here <code>survived</code> is a factor (not an integer)
and <code>age</code> has some <code>NA</code>s.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ptitanic)
summary(ptitanic)

# survival rate was greater for females
rpart.rules(rpart(survived ~ sex, data = ptitanic))

# survival rate was greater for higher classes
rpart.rules(rpart(survived ~ pclass, data = ptitanic))

# survival rate was greater for children
rpart.rules(rpart(survived ~ age, data = ptitanic))

# main indicator of missing data is 3rd class esp. with many children
obs.with.nas &lt;- rowSums(is.na(ptitanic)) &gt; 0
rpart.rules(rpart(obs.with.nas ~ ., data = ptitanic, method = "class"))

</code></pre>

<hr>
<h2 id='rpart.plot'>Plot an rpart model. A simplified interface to the prp function.</h2><span id='topic+rpart.plot'></span>

<h3>Description</h3>

<p>Plot an <code><a href="rpart.html#topic+rpart">rpart</a></code> model, automatically tailoring the plot
for the model's response type.
</p>
<p>For an overview, please see the package vignette
<a href="../doc/prp.pdf">Plotting rpart trees with the rpart.plot package</a>.
</p>
<p>This function is a simplified front-end to <code><a href="#topic+prp">prp</a></code>,
with only the most useful arguments of that function, and
with different defaults for some of the arguments.
The different defaults mean that this function automatically creates a
colored plot suitable for the type of model (whereas <code><a href="#topic+prp">prp</a></code>
by default creates a minimal plot).
See the <code><a href="#topic+prp">prp</a></code> help page for a table showing the
different defaults.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rpart.plot(x = stop("no 'x' arg"),
    type = 2, extra = "auto",
    under = FALSE, fallen.leaves = TRUE,
    digits = 2, varlen = 0, faclen = 0, roundint = TRUE,
    cex = NULL, tweak = 1,
    clip.facs = FALSE, clip.right.labs = TRUE,
    snip = FALSE,
    box.palette = "auto", shadow.col = 0,
    ...)
</code></pre>


<h3>Arguments</h3>

<p>To start off, look at the arguments <code>x</code>, <code>type</code> and <code>extra</code>.
Just those arguments will suffice for many users.
If you don't want a colored plot, use <code>box.palette=0</code>.
</p>
<table role = "presentation">
<tr><td><code id="rpart.plot_+3A_x">x</code></td>
<td>

<p>An <code><a href="rpart.html#topic+rpart">rpart</a></code> object.  The only required argument.
</p>
</td></tr>
<tr><td><code id="rpart.plot_+3A_type">type</code></td>
<td>

<p>Type of plot. Possible values:
</p>
<p><b>0</b> Draw a split label at each split
and a node label at each leaf.
</p>
<p><b>1</b> Label all nodes, not just leaves.
Similar to <code>text.rpart</code>'s <code>all=TRUE</code>.
</p>
<p><b>2</b> Default.
Like <code>1</code> but draw the split labels below the node labels.
Similar to the plots in the CART book.
</p>
<p><b>3</b> Draw separate split labels for the left and right directions.
</p>
<p><b>4</b> Like <code>3</code> but label all nodes, not just leaves.
Similar to <code>text.rpart</code>'s <code>fancy=TRUE</code>.
See also <code>clip.right.labs</code>.<br />
</p>
<p><b>5</b> Show the split variable name in the interior nodes.<br />
</p>
</td></tr>
<tr><td><code id="rpart.plot_+3A_extra">extra</code></td>
<td>

<p>Display extra information at the nodes. Possible values:
</p>
<p><b>&quot;auto&quot;</b> (case insensitive) Default.<br />
Automatically select a value based on the model type, as follows:<br />
<code>extra=106</code> class model with a binary response<br />
<code>extra=104</code> class model with a response having more than two levels<br />
<code>extra=100</code> other models<br />
</p>
<p><b>0</b> No extra information.
</p>
<p><b>1</b> Display the number of observations that fall in the node
(per class for <code>class</code> objects;
prefixed by the number of events for <code>poisson</code> and <code>exp</code> models).
Similar to <code>text.rpart</code>'s <code>use.n=TRUE</code>.
</p>
<p><b>2</b> Class models: display the classification rate at the node,
expressed as the number of correct classifications and the number
of observations in the node.<br />
Poisson and exp models: display the number of events.
</p>
<p><b>3</b> Class models: misclassification rate at the node,
expressed as the number of incorrect classifications and the number
of observations in the node.
</p>
<p><b>4</b> Class models:
probability per class of observations in the node
(conditioned on the node, sum across a node is 1).
</p>
<p><b>5</b> Class models:
like <code>4</code> but don't display the fitted class.
</p>
<p><b>6</b> Class models:
the probability of the second class only.
Useful for binary responses.
</p>
<p><b>7</b> Class models:
like <code>6</code> but don't display the fitted class.
</p>
<p><b>8</b> Class models:
the probability of the fitted class.
</p>
<p><b>9</b> Class models:
The probability relative to <em>all</em> observations &ndash;
the sum of these probabilities across all leaves is 1.
This is in contrast to the options above, which give the probability
relative to observations falling <em>in the node</em> &ndash;
the sum of the probabilities across the node is 1.
</p>
<p><b>10</b> Class models:
Like <code>9</code> but display the probability of the second class only.
Useful for binary responses.<br />
</p>
<p><b>11</b> Class models:
Like <code>10</code> but don't display the fitted class.<br />
</p>
<p><b>+100</b> Add <code>100</code> to any of the above to also display
the percentage of observations in the node.
For example <code>extra=101</code> displays the number
and percentage of observations in the node.
Actually, it's a weighted percentage
using the <code>weights</code> passed to <code>rpart</code>.<br />
</p>
<p>Note: Unlike <code>text.rpart</code>,
by default <code>prp</code> uses its own routine for
generating node  labels (not the function attached to the object).
See the <code>node.fun</code> argument of <code>prp</code>.<br />
</p>
</td></tr>
<tr><td><code id="rpart.plot_+3A_under">under</code></td>
<td>

<p>Applies only if <code>extra &gt; 0</code>.
Default <code>FALSE</code>, meaning put the extra text <em>in</em> the box.
Use <code>TRUE</code> to put the text <em>under</em> the box.
</p>
</td></tr>
<tr><td><code id="rpart.plot_+3A_fallen.leaves">fallen.leaves</code></td>
<td>

<p>Default <code>TRUE</code> to position the leaf nodes at the bottom of the graph.
It can be helpful to use <code>FALSE</code> if the graph is too crowded
and the text size is too small.
</p>
</td></tr>
<tr><td><code id="rpart.plot_+3A_digits">digits</code></td>
<td>

<p>The number of significant digits in displayed numbers.
Default <code>2</code>.<br />
If <code>0</code>, use <code><a href="base.html#topic+getOption">getOption</a>("digits")</code>.<br />
If negative, use the standard <code><a href="base.html#topic+format">format</a></code> function
(with the absolute value of <code>digits</code>).<br /><br />
When <code>digits</code> is positive, the following details apply:<br />
Numbers from <code>0.001</code> to <code>9999</code> are printed without an exponent
(and the number of digits is actually only a suggestion,
see <code><a href="base.html#topic+format">format</a></code> for details).
Numbers out that range are printed with an &ldquo;engineering&rdquo; exponent (a multiple of 3).<br />
</p>
</td></tr>
<tr><td><code id="rpart.plot_+3A_varlen">varlen</code></td>
<td>

<p>Length of variable names in text at the splits
(and, for class responses, the class in the node label).
Default <code>0</code>, meaning display the full variable names.
Possible values:<br />
</p>
<p><b>0</b> use full names (default).<br />
</p>
<p><b>greater than 0</b> call <code><a href="base.html#topic+abbreviate">abbreviate</a></code> with the given <code>varlen</code>.<br />
</p>
<p><b>less than 0</b> truncate variable names to the shortest length where they are still unique,
but never truncate to shorter than <code>abs(varlen)</code>.
</p>
</td></tr>
<tr><td><code id="rpart.plot_+3A_faclen">faclen</code></td>
<td>

<p>Length of factor level names in splits.
Default <code>0</code>, meaning display the full factor names.
Possible values are as <code>varlen</code> above, except that
for back-compatibility with <code><a href="rpart.html#topic+text.rpart">text.rpart</a></code> the special value <code>1</code>
means represent the factor levels with alphabetic characters
(<code>a</code> for the first level, <code>b</code> for the second, etc.).
</p>
</td></tr>
<tr><td><code id="rpart.plot_+3A_roundint">roundint</code></td>
<td>

<p>If <code>roundint=TRUE</code> (default) and all values of a predictor in the
training data are integers, then splits for that predictor
are rounded to integer.
For example, display <code>nsiblings &lt; 3</code> instead of <code>nsiblings &lt; 2.5</code>.<br />
If <code>roundint=TRUE</code> and the data used to build the model is no longer
available, a warning will be issued.<br />
Using <code>roundint=FALSE</code> is advised if non-integer values are in fact possible
for a predictor, even though all values in the training data for that
predictor are integral.
</p>
</td></tr>
<tr><td><code id="rpart.plot_+3A_cex">cex</code></td>
<td>

<p>Default <code>NULL</code>, meaning calculate the text size automatically.<br />
Since font sizes are discrete, the <code>cex</code> you ask for
may not be exactly the <code>cex</code> you get.
</p>
</td></tr>
<tr><td><code id="rpart.plot_+3A_tweak">tweak</code></td>
<td>

<p>Adjust the (possibly automatically calculated) <code>cex</code>.
Using <code>tweak</code> is often easier than specifying <code>cex</code>.<br />
The default <code>tweak</code> is <code>1</code>, meaning no adjustment.<br />
Use say <code>tweak=1.2</code> to make the text 20% larger.<br />
Since font sizes are discrete,
a small change to tweak may not actually change the type size,
or change it more than you want.
</p>
</td></tr>
<tr><td><code id="rpart.plot_+3A_clip.facs">clip.facs</code></td>
<td>

<p>Default <code>FALSE</code>.
If <code>TRUE</code>, print splits on factors as <code>female</code> instead of
<code>sex = female</code>; the variable name and equals is dropped.
<br />
Another example: print <code>survived</code> or <code>died</code> rather than
<code>survived = survived</code> or <code>survived = died</code>.<br />
</p>
</td></tr>
<tr><td><code id="rpart.plot_+3A_clip.right.labs">clip.right.labs</code></td>
<td>

<p>Applies only if <code>type=3</code> or <code>4</code>.<br />
Default is <code>TRUE</code> meaning &ldquo;clip&rdquo; the right-hand split labels,
i.e., don't print <code>variable=</code>.
</p>
</td></tr>
<tr><td><code id="rpart.plot_+3A_snip">snip</code></td>
<td>

<p>Default <code>FALSE</code>.
Set <code>TRUE</code> to interactively trim the tree with the mouse.
See the <a href="../doc/prp.pdf">package vignette</a> (or just try it).
</p>
</td></tr>
<tr><td><code id="rpart.plot_+3A_box.palette">box.palette</code></td>
<td>

<p>Palette for coloring the node boxes based on the fitted value.
This is a vector of <code><a href="grDevices.html#topic+colors">colors</a></code>,
for example <code>box.palette=c("green", "green2", "green4")</code>.
Small fitted values are displayed with colors at the start of the vector;
large values with colors at the end.
Quantiles are used to partition the fitted values.
</p>
<p>The special value <code>box.palette=0</code> (default for <code>prp</code>) uses
the background color (typically white).
</p>
<p>The special value <code>box.palette="auto"</code> (default for
<code>rpart.plot</code>, case insensitive) automatically selects a
predefined palette based on the type of model.
</p>
<p>Otherwise specify a <b>predefined palette</b>
e.g. <code>box.palette="Grays"</code> for the predefined gray palette (a range of grays).
The predefined palettes are (see the <code><a href="#topic+show.prp.palettes">show.prp.palettes</a></code> function):<br />
<code>Grays</code> <code>Greys</code> <code>Greens</code> <code>Blues</code> <code>Browns</code> <code>Oranges</code> <code>Reds</code> <code>Purples</code> <br />
<code>Gy</code> <code>Gn</code> <code>Bu</code> <code>Bn</code> <code>Or</code> <code>Rd</code> <code>Pu</code> (alternative names for the above palettes)<br />
<code>BuGn</code> <code>GnRd</code> <code>BuOr</code> etc. (two-color diverging palettes: any combination of two of the above palettes)<br />
<code>RdYlGn</code> <code>GnYlRd</code> <code>BlGnYl</code> <code>YlGnBl</code> (three color palettes)
</p>
<p>Prefix the palette name with <code>"-"</code> to reverse the order of the colors<br />
e.g. <code>box.palette="-auto"</code> or <code>box.palette="-Grays"</code>.
</p>
</td></tr>
<tr><td><code id="rpart.plot_+3A_shadow.col">shadow.col</code></td>
<td>

<p>Color of the shadow under the boxes.
Default <code>0</code>, no shadow.
Try <code>"gray"</code> or <code>"darkgray"</code>.
</p>
</td></tr>
<tr><td><code id="rpart.plot_+3A_...">...</code></td>
<td>

<p>Extra arguments passed to <code><a href="#topic+prp">prp</a></code> and the plotting routines.
Any of <code><a href="#topic+prp">prp</a></code>'s arguments can be used.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The returned value is identical to that of <code><a href="#topic+prp">prp</a></code>.
</p>


<h3>Author(s)</h3>

<p>Stephen Milborrow, borrowing heavily from the <code><a href="rpart.html#topic+rpart">rpart</a></code>
package by Terry M. Therneau and Beth Atkinson,
and the R port of that package by Brian Ripley.
</p>


<h3>See Also</h3>

<p>The package vignette <a href="../doc/prp.pdf">Plotting rpart trees with the rpart.plot package</a><br />
<code><a href="#topic+prp">prp</a></code><br />
<code><a href="#topic+rpart.rules">rpart.rules</a></code><br />
Functions in the <code>rpart</code> package:
<code><a href="rpart.html#topic+plot.rpart">plot.rpart</a></code>
<code><a href="rpart.html#topic+text.rpart">text.rpart</a></code>
<code><a href="rpart.html#topic+rpart">rpart</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>old.par &lt;- par(mfrow=c(2,2))            # put 4 figures on one page

data(ptitanic)

#---------------------------------------------------------------------------

binary.model &lt;- rpart(survived ~ ., data = ptitanic, cp = .02)
                                        # cp = .02 for small demo tree

rpart.plot(binary.model,
           main = "titanic survived\n(binary response)")

rpart.plot(binary.model, type = 3, clip.right.labs = FALSE,
           branch = .4,
           box.palette = "Grays",       # override default GnBu palette
           main = "type = 3, clip.right.labs = FALSE, ...\n")

#---------------------------------------------------------------------------

anova.model &lt;- rpart(Mileage ~ ., data = cu.summary)

rpart.plot(anova.model,
           shadow.col = "gray",         # add shadows just for kicks
           main = "miles per gallon\n(continuous response)\n")

#---------------------------------------------------------------------------

multi.class.model &lt;- rpart(Reliability ~ ., data = cu.summary)

rpart.plot(multi.class.model,
           main = "vehicle reliability\n(multi class response)")

par(old.par)
</code></pre>

<hr>
<h2 id='rpart.predict'>Extended version of predict.rpart</h2><span id='topic+rpart.predict'></span>

<h3>Description</h3>

<p>Identical to <code><a href="rpart.html#topic+predict.rpart">predict.rpart</a></code> but
optionally show the node numbers and rules for the predicted values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rpart.predict(object, newdata,
              type = c("vector", "prob", "class", "matrix"),
              na.action = na.pass,
              nn=FALSE, rules=FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rpart.predict_+3A_object">object</code>, <code id="rpart.predict_+3A_newdata">newdata</code>, <code id="rpart.predict_+3A_type">type</code>, <code id="rpart.predict_+3A_na.action">na.action</code></td>
<td>

<p>Identical to the same arguments for <code><a href="rpart.html#topic+predict.rpart">predict.rpart</a></code>.<br />
If both <code>nn</code> and <code>rules</code> are <code>FALSE</code>,
the returned value is identical to <code><a href="rpart.html#topic+predict.rpart">predict.rpart</a></code>.
</p>
</td></tr>
<tr><td><code id="rpart.predict_+3A_nn">nn</code></td>
<td>

<p>If <code>TRUE</code>, return a <code>data.frame</code>
with the predictions as usual
but with an extra column showing the leaf node number for each prediction.
</p>
</td></tr>
<tr><td><code id="rpart.predict_+3A_rules">rules</code></td>
<td>

<p>If <code>TRUE</code>, return a <code>data.frame</code>
with the predictions as usual
but with an extra column showing the rpart rule (as a string) for each prediction.<br />
It may be helpful to use <code>options(width=1000)</code>
before printing this <code>data.frame</code>.
</p>
</td></tr>
<tr><td><code id="rpart.predict_+3A_...">...</code></td>
<td>

<p>Passed on to <code><a href="#topic+rpart.rules">rpart.rules</a></code>,
for example <code>clip.facs=TRUE</code>.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Same as <code><a href="rpart.html#topic+predict.rpart">predict.rpart</a></code>,
but with additional information if <code>nn=TRUE</code> and/or <code>rules=TRUE</code>.
</p>


<h3>See Also</h3>

<p><code><a href="rpart.html#topic+predict.rpart">predict.rpart</a></code><br />
<code><a href="#topic+rpart.rules">rpart.rules</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ptitanic)
model &lt;- rpart(survived ~ ., data = ptitanic, cp = .02)
head(rpart.predict(model, rules=TRUE))
</code></pre>

<hr>
<h2 id='rpart.rules'>Print an rpart model as a set of rules.</h2><span id='topic+rpart.rules'></span><span id='topic+print.rpart.rules'></span>

<h3>Description</h3>

<p>Print an <code>rpart</code> model as a set of rules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rpart.rules(x = stop("no 'x' argument"),
            style = "wide", cover = FALSE, nn = FALSE,
            roundint = TRUE, clip.facs = FALSE,
            varorder = NULL, ...)

## S3 method for class 'rpart.rules'
print(x = stop("no 'x' argument"), style = attr(x, "style"), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rpart.rules_+3A_x">x</code></td>
<td>

<p>An <code><a href="rpart.html#topic+rpart">rpart</a></code> object.  The only required argument.
</p>
</td></tr>
<tr><td><code id="rpart.rules_+3A_style">style</code></td>
<td>
<p>One of:<br />
<b>&quot;wide&quot;</b> (default) One rule per line.  May require a lot of horizontal space.<br />
<b>&quot;tall&quot;</b> One split per line.<br />
<b>&quot;tallw&quot;</b> Like <code>"tall"</code> but with more horizontal white space for readability.<br />
</p>
</td></tr>
<tr><td><code id="rpart.rules_+3A_cover">cover</code></td>
<td>

<p>Default <code>FALSE</code>.
If <code>TRUE</code>, also print the percentage of cases covered by each rule.
</p>
</td></tr>
<tr><td><code id="rpart.rules_+3A_nn">nn</code></td>
<td>

<p>Default <code>FALSE</code>.
If <code>TRUE</code>, also print the leaf node number for each rule.
</p>
</td></tr>
<tr><td><code id="rpart.rules_+3A_roundint">roundint</code></td>
<td>

<p>If <code>roundint=TRUE</code> (default) and all values of a predictor in the
training data are integers, then splits for that predictor
are rounded to integer.
For example, display <code>nsiblings &lt; 3</code> instead of <code>nsiblings &lt; 2.5</code>.<br />
Identical to the argument of the same name in <code><a href="#topic+rpart.plot">rpart.plot</a></code>, see there for details.
</p>
</td></tr>
<tr><td><code id="rpart.rules_+3A_clip.facs">clip.facs</code></td>
<td>

<p>Default <code>FALSE</code>.
If <code>TRUE</code>, print splits on factors as <code>female</code> instead of
<code>sex = female</code>; the variable name and equals is dropped.
<br />
Identical to the argument of the same name in <code><a href="#topic+rpart.plot">rpart.plot</a></code>.
</p>
</td></tr>
<tr><td><code id="rpart.rules_+3A_varorder">varorder</code></td>
<td>

<p>By default, the variables in the rules are ordered left to right on
importance, where the &ldquo;importance&rdquo; of a variable here is the number of rules
it appears in.<br />
Use <code>varorder</code> to force variables to appear first in the rules.
For example <code>varorder="sex"</code> or <code>varorder=c("sex", "pclass"</code>)
will put the specified variables first.<br />
Partial matching of variable names is supported.
</p>
</td></tr>
<tr><td><code id="rpart.rules_+3A_...">...</code></td>
<td>

<p>The following can be passed as dot arguments.
See <code><a href="#topic+prp">prp</a></code> for details on these arguments.
</p>

<table>
<tr>
 <td style="text-align: left;">
<b>argument</b>  </td><td style="text-align: left;"> <b>default</b> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>extra</code> </td><td style="text-align: left;"> <code>= "auto"</code> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> a subset of the legal values for <code>prp</code> are supported  </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>digits</code> </td><td style="text-align: left;"> <code>= 2</code> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> default is two digits of accuracy, increase if necessary  </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>varlen</code> </td><td style="text-align: left;"> <code>= 0</code> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> default displays full variable names  </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>faclen</code> </td><td style="text-align: left;"> <code>= 0</code> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> default displays full factor names  </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>trace</code> </td><td style="text-align: left;"> <code>= 0</code> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>facsep</code> </td><td style="text-align: left;"> <code>= " or "</code> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>eq</code> </td><td style="text-align: left;"> <code>= " is "</code> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>lt</code> </td><td style="text-align: left;"> <code>= " &lt;  "</code> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>ge</code> </td><td style="text-align: left;"> <code>= " &gt;= "</code> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>and</code> </td><td style="text-align: left;"> <code>= " &amp; "</code> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
<code>when</code> </td><td style="text-align: left;"> <code>= " when "</code> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"></td>
</tr>
<tr>
 <td style="text-align: left;">
<code>because</code> </td><td style="text-align: left;"> <code>= " because "</code> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> used only by <code><a href="#topic+rpart.predict">rpart.predict</a></code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>null.model</code> </td><td style="text-align: left;"> <code>= "null model"</code> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> for root-only models (no splits)</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>response.name</code> </td><td style="text-align: left;"> <code>= NULL</code> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td><td style="text-align: left;"> the response name printed before the rules (<code>NULL</code> means automatic)  </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> of class <code>c("rpart.rules", "data.frame")</code>
with some attached attributes which are passed on to <code>print.rpart.rules</code>.
Note that <code>print.rpart.rules</code> temporarily increases <code>options(width)</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rpart.plot">rpart.plot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ptitanic)
model &lt;- rpart(survived ~ ., data = ptitanic, cp = .02)
rpart.plot(model)
rpart.rules(model)
</code></pre>

<hr>
<h2 id='show.prp.palettes'>Show the built-in prp palettes.</h2><span id='topic+show.prp.palettes'></span>

<h3>Description</h3>

<p>Display a diagram showing the built-in palettes
accepted by <code>prp</code>'s <code>box.palette</code> argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show.prp.palettes()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>show.prp.palettes()
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
