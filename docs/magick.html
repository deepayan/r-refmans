<!DOCTYPE html><html><head><title>Help for package magick</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {magick}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#_index_'><p>Magick Image Processing</p></a></li>
<li><a href='#analysis'><p>Image Analysis</p></a></li>
<li><a href='#animation'><p>Image Frames and Animation</p></a></li>
<li><a href='#as_EBImage'><p>Convert to EBImage</p></a></li>
<li><a href='#attributes'><p>Image Attributes</p></a></li>
<li><a href='#autoviewer'><p>RStudio Graphics AutoViewer</p></a></li>
<li><a href='#coder_info'><p>Magick Configuration</p></a></li>
<li><a href='#color'><p>Image Color</p></a></li>
<li><a href='#composite'><p>Image Composite</p></a></li>
<li><a href='#defines'><p>Set encoder defines</p></a></li>
<li><a href='#device'><p>Magick Graphics Device</p></a></li>
<li><a href='#edges'><p>Edge / Line Detection</p></a></li>
<li><a href='#editing'><p>Image Editing</p></a></li>
<li><a href='#effects'><p>Image Effects</p></a></li>
<li><a href='#fx'><p>Image FX</p></a></li>
<li><a href='#geometry'><p>Geometry Helpers</p></a></li>
<li><a href='#image_ggplot'><p>Image to ggplot</p></a></li>
<li><a href='#morphology'><p>Morphology</p></a></li>
<li><a href='#ocr'><p>Image Text OCR</p></a></li>
<li><a href='#options'><p>Magick Options</p></a></li>
<li><a href='#painting'><p>Image Painting</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#segmentation'><p>Image Segmentation</p></a></li>
<li><a href='#thresholding'><p>Image thresholding</p></a></li>
<li><a href='#transform'><p>Image Transform</p></a></li>
<li><a href='#video'><p>Write Video</p></a></li>
<li><a href='#wizard'><p>Example Images</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Advanced Graphics and Image-Processing in R</td>
</tr>
<tr>
<td>Version:</td>
<td>2.8.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Bindings to 'ImageMagick': the most comprehensive open-source image
    processing library available. Supports many common formats (png, jpeg, tiff,
    pdf, etc) and manipulations (rotate, scale, crop, trim, flip, blur, etc).
    All operations are vectorized via the Magick++ STL meaning they operate either
    on a single frame or a series of frames for working with layers, collages,
    or animation. In RStudio images are automatically previewed when printed to
    the console, resulting in an interactive editing environment. The latest 
    version of the package includes a native graphics device for creating 
    in-memory graphics or drawing onto images using pixel coordinates.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.ropensci.org/magick/">https://docs.ropensci.org/magick/</a>
<a href="https://ropensci.r-universe.dev/magick">https://ropensci.r-universe.dev/magick</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/magick/issues">https://github.com/ropensci/magick/issues</a></td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>ImageMagick++: ImageMagick-c++-devel (rpm) or
libmagick++-dev (deb)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.12.12), magrittr, curl</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Suggests:</td>
<td>av (&ge; 0.3), spelling, jsonlite, methods, knitr, rmarkdown,
rsvg, webp, pdftools, ggplot2, gapminder, IRdisplay, tesseract
(&ge; 2.0), gifski</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.0</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-17 14:47:15 UTC; jeroen</td>
</tr>
<tr>
<td>Author:</td>
<td>Jeroen Ooms <a href="https://orcid.org/0000-0002-4035-0289"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jeroen Ooms &lt;jeroen@berkeley.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-18 09:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='_index_'>Magick Image Processing</h2><span id='topic+_index_'></span><span id='topic+magick'></span><span id='topic+magick-package'></span><span id='topic+imagemagick'></span>

<h3>Description</h3>

<p>The <code>magick</code> package for graphics and image processing in R. Important resources:
</p>

<ul>
<li> <p><a href="https://docs.ropensci.org/magick/articles/intro.html">R introduction vignette</a>: getting started
</p>
</li>
<li> <p><a href="https://www.imagemagick.org/Magick++/Image++.html">Magick++ API</a> and
<a href="https://www.imagemagick.org/Magick++/STL.html">Magick++ STL</a> detailed descriptions of methods and parameters
</p>
</li></ul>



<h3>Details</h3>

<p>Documentation is split into the following pages:
</p>

<ul>
<li> <p><a href="#topic+analysis">analysis</a> - metrics and calculations: <code>compare</code>, <code>fft</code>
</p>
</li>
<li> <p><a href="#topic+animation">animation</a> - manipulate or combine multiple frames: <code>animate</code>,
<code>morph</code>, <code>mosaic</code>, <code>montage</code>, <code>average</code>, <code>append</code>, <code>apply</code>
</p>
</li>
<li> <p><a href="#topic+attributes">attributes</a> - image properties: <code>comment</code>, <code>info</code>
</p>
</li>
<li> <p><a href="#topic+color">color</a> - contrast, brightness, colors: <code>modulate</code>, <code>quantize</code>, <code>map</code>, <code>transparent</code>,
<code>background</code>, <code>colorize</code>, <code>contrast</code>, <code>normalize</code>, <code>enhance</code>, <code>equalize</code>, <code>median</code>
</p>
</li>
<li> <p><a href="#topic+composite">composite</a> - advanced joining: <code>composite</code>, <code>border</code>, <code>frame</code>
</p>
</li>
<li> <p><a href="#topic+device">device</a> - creating graphics and drawing on images
</p>
</li>
<li> <p><a href="#topic+editing">editing</a> - basic image IO: <code>read</code>, <code>write</code>, <code>convert</code>, <code>join</code>, <code>display</code>, <code>brose</code>
</p>
</li>
<li> <p><a href="#topic+effects">effects</a> - fun effects: <code>despecle</code>, <code>reducenoise</code>, <code>noise</code>, <code>blur</code>, <code>charcoal</code>,
<code>edge</code>, <code>oilpaint</code>, <code>emboss</code>, <code>implode</code>, <code>negate</code>
</p>
</li>
<li> <p><a href="#topic+geometry">geometry</a> - specify points, areas and sizes using geometry syntax
</p>
</li>
<li> <p><a href="#topic+ocr">ocr</a> - extract text from image using <a href="tesseract.html#topic+tesseract">tesseract</a> package
</p>
</li>
<li> <p><a href="#topic+options">options</a> - list option types and values supported in your version of ImageMagick
</p>
</li>
<li> <p><a href="#topic+painting">painting</a> - flood fill and annotating text
</p>
</li>
<li> <p><a href="#topic+transform">transform</a> - shape operations: <code>trim</code>, <code>chop</code>, <code>rotate</code>, <code>resize</code>, <code>scale</code>, <code>sample</code>
<code>crop</code>, <code>flip</code>, <code>flop</code>, <code>deskew</code>, <code>page</code>
</p>
</li></ul>



<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>

<hr>
<h2 id='analysis'>Image Analysis</h2><span id='topic+analysis'></span><span id='topic+image_compare'></span><span id='topic+image_compare_dist'></span><span id='topic+image_fft'></span>

<h3>Description</h3>

<p>Functions for image calculations and analysis. This part of the package needs more work.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_compare(image, reference_image, metric = "", fuzz = 0)

image_compare_dist(image, reference_image, metric = "", fuzz = 0)

image_fft(image)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="analysis_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="analysis_+3A_reference_image">reference_image</code></td>
<td>
<p>another image to compare to</p>
</td></tr>
<tr><td><code id="analysis_+3A_metric">metric</code></td>
<td>
<p>string with a <a href="http://www.imagemagick.org/script/command-line-options.php#metric">metric</a>
from <a href="#topic+metric_types">metric_types()</a> such as <code>"AE"</code> or <code>"phash"</code></p>
</td></tr>
<tr><td><code id="analysis_+3A_fuzz">fuzz</code></td>
<td>
<p>relative color distance (value between 0 and 100) to be considered similar
in the filling algorithm</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For details see <a href="https://www.imagemagick.org/Magick++/Image++.html">Image++</a>
documentation. Short descriptions:
</p>

<ul>
<li> <p><a href="#topic+image_compare">image_compare</a> calculates a metric by comparing image with a reference image.
</p>
</li>
<li> <p><a href="#topic+image_fft">image_fft</a> returns Discrete Fourier Transform (DFT) of the image as a
magnitude / phase image pair. I wish I knew what this means.
</p>
</li></ul>

<p>Here <code>image_compare()</code> is vectorized over the first argument and returns the diff image
with the calculated distortion value as an attribute.
</p>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>out1 &lt;- image_blur(logo, 3)
out2 &lt;- image_oilpaint(logo, 3)
input &lt;- c(logo, out1, out2, logo)
if(magick_config()$version &gt;= "6.8.7"){
  diff_img &lt;- image_compare(input, logo, metric = "AE")
  attributes(diff_img)
}
</code></pre>

<hr>
<h2 id='animation'>Image Frames and Animation</h2><span id='topic+animation'></span><span id='topic+image_animate'></span><span id='topic+image_coalesce'></span><span id='topic+image_morph'></span><span id='topic+image_mosaic'></span><span id='topic+image_flatten'></span><span id='topic+image_average'></span><span id='topic+image_append'></span><span id='topic+image_apply'></span><span id='topic+image_montage'></span>

<h3>Description</h3>

<p>Operations to manipulate or combine multiple frames of an image. Details below.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_animate(
  image,
  fps = 10,
  delay = NULL,
  loop = 0,
  dispose = c("background", "previous", "none"),
  optimize = FALSE
)

image_coalesce(image)

image_morph(image, frames = 8)

image_mosaic(image, operator = NULL)

image_flatten(image, operator = NULL)

image_average(image)

image_append(image, stack = FALSE)

image_apply(image, FUN, ...)

image_montage(
  image,
  geometry = NULL,
  tile = NULL,
  gravity = "Center",
  bg = "white",
  shadow = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="animation_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="animation_+3A_fps">fps</code></td>
<td>
<p>frames per second. Ignored if <code>delay</code> is not <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="animation_+3A_delay">delay</code></td>
<td>
<p>delay after each frame, in 1/100 seconds.
Must be length 1, or number of frames. If specified, then <code>fps</code> is ignored.</p>
</td></tr>
<tr><td><code id="animation_+3A_loop">loop</code></td>
<td>
<p>how many times to repeat the animation. Default is infinite.</p>
</td></tr>
<tr><td><code id="animation_+3A_dispose">dispose</code></td>
<td>
<p>a frame <a href="https://legacy.imagemagick.org/Usage/anim_basics/#dispose">disposal method</a>
from <a href="#topic+dispose_types">dispose_types()</a></p>
</td></tr>
<tr><td><code id="animation_+3A_optimize">optimize</code></td>
<td>
<p>optimize the <code>gif</code> animation by storing only the differences
between frames. Input images must be exactly the same size.</p>
</td></tr>
<tr><td><code id="animation_+3A_frames">frames</code></td>
<td>
<p>number of frames to use in output animation</p>
</td></tr>
<tr><td><code id="animation_+3A_operator">operator</code></td>
<td>
<p>string with a
<a href="https://www.imagemagick.org/Magick++/Enumerations.html#CompositeOperator">composite operator</a>
from <a href="#topic+compose_types">compose_types()</a></p>
</td></tr>
<tr><td><code id="animation_+3A_stack">stack</code></td>
<td>
<p>place images top-to-bottom (TRUE) or left-to-right (FALSE)</p>
</td></tr>
<tr><td><code id="animation_+3A_fun">FUN</code></td>
<td>
<p>a function to be called on each frame in the image</p>
</td></tr>
<tr><td><code id="animation_+3A_...">...</code></td>
<td>
<p>additional parameters for <code>FUN</code></p>
</td></tr>
<tr><td><code id="animation_+3A_geometry">geometry</code></td>
<td>
<p>a <a href="#topic+geometry">geometry</a> string that defines the size the individual
thumbnail images, and the spacing between them.</p>
</td></tr>
<tr><td><code id="animation_+3A_tile">tile</code></td>
<td>
<p>a <a href="#topic+geometry">geometry</a> string for example &quot;4x5 with limits on how the
tiled images are to be laid out on the final result.</p>
</td></tr>
<tr><td><code id="animation_+3A_gravity">gravity</code></td>
<td>
<p>a gravity direction, if the image is smaller than the frame, where
in the frame is the image to be placed.</p>
</td></tr>
<tr><td><code id="animation_+3A_bg">bg</code></td>
<td>
<p>a background color string</p>
</td></tr>
<tr><td><code id="animation_+3A_shadow">shadow</code></td>
<td>
<p>enable shadows between images</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For details see <a href="https://www.imagemagick.org/Magick++/STL.html">Magick++ STL</a>
documentation. Short descriptions:
</p>

<ul>
<li> <p><a href="#topic+image_animate">image_animate</a> coalesces frames by playing the sequence and converting to <code>gif</code> format.
</p>
</li>
<li> <p><a href="#topic+image_morph">image_morph</a> expands number of frames by interpolating intermediate frames to blend
into each other when played as an animation.
</p>
</li>
<li> <p><a href="#topic+image_mosaic">image_mosaic</a> inlays images to form a single coherent picture.
</p>
</li>
<li> <p><a href="#topic+image_montage">image_montage</a> creates a composite image by combining frames.
</p>
</li>
<li> <p><a href="#topic+image_flatten">image_flatten</a> merges frames as layers into a single frame using a given operator.
</p>
</li>
<li> <p><a href="#topic+image_average">image_average</a> averages frames into single frame.
</p>
</li>
<li> <p><a href="#topic+image_append">image_append</a> stack images left-to-right (default) or top-to-bottom.
</p>
</li>
<li> <p><a href="#topic+image_apply">image_apply</a> applies a function to each frame
</p>
</li></ul>

<p>The <a href="#topic+image_apply">image_apply</a> function calls an image function to each frame and joins
results back into a single image. Because most operations are already vectorized
this is often not needed. Note that <code>FUN()</code> should return an image. To apply other
kinds of functions to image frames simply use <a href="base.html#topic+lapply">lapply</a>, <a href="base.html#topic+vapply">vapply</a>, etc.
</p>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Combine images
logo &lt;- image_read("https://jeroen.github.io/images/Rlogo.png")
oldlogo &lt;- image_read("https://jeroen.github.io/images/Rlogo-old.png")

# Create morphing animation
both &lt;- image_scale(c(oldlogo, logo), "400")
image_average(image_crop(both))
image_animate(image_morph(both, 10))

# Create thumbnails from GIF
banana &lt;- image_read("https://jeroen.github.io/images/banana.gif")
length(banana)
image_average(banana)
image_flatten(banana)
image_append(banana)
image_append(banana, stack = TRUE)

# Append images together
wizard &lt;- image_read("wizard:")
image_append(image_scale(c(image_append(banana[c(1,3)], stack = TRUE), wizard)))

image_composite(banana, image_scale(logo, "300"))

# Break down and combine frames
front &lt;- image_scale(banana, "300")
background &lt;- image_background(image_scale(logo, "400"), 'white')
frames &lt;- image_apply(front, function(x){image_composite(background, x, offset = "+70+30")})
image_animate(frames, fps = 10)
# Simple 4x3 montage
input &lt;- rep(logo, 12)
image_montage(input, geometry = 'x100+10+10', tile = '4x3', bg = 'pink', shadow = TRUE)

# With varying frame size
input &lt;- c(wizard, wizard, logo, logo)
image_montage(input, tile = '2x2', bg = 'pink', gravity = 'southwest')
</code></pre>

<hr>
<h2 id='as_EBImage'>Convert to EBImage</h2><span id='topic+as_EBImage'></span>

<h3>Description</h3>

<p>Convert a Magick image to <a href="https://bioconductor.org/packages/release/bioc/html/EBImage.html">EBImage</a>
class. Note that EBImage only supports multi-frame images in greyscale.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_EBImage(image)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_EBImage_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='attributes'>Image Attributes</h2><span id='topic+attributes'></span><span id='topic+image_comment'></span><span id='topic+image_info'></span>

<h3>Description</h3>

<p>Attributes are properties of the image that might be present on some images
and might affect image manipulation methods.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_comment(image, comment = NULL)

image_info(image)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="attributes_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="attributes_+3A_comment">comment</code></td>
<td>
<p>string to set an image comment</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Each attribute can be get and set with the same function. The <code><a href="#topic+image_info">image_info()</a></code>
function returns a data frame with some commonly used attributes.
</p>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>

<hr>
<h2 id='autoviewer'>RStudio Graphics AutoViewer</h2><span id='topic+autoviewer'></span><span id='topic+autoviewer_enable'></span><span id='topic+autoviewer_disable'></span>

<h3>Description</h3>

<p>This enables a <a href="base.html#topic+addTaskCallback">addTaskCallback</a> that automatically updates the viewer after
the state of a magick graphics device has changed. This is enabled by default in
RStudio.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>autoviewer_enable()

autoviewer_disable()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'># Only has effect in RStudio (or other GUI with a viewer):
autoviewer_enable()

img &lt;- magick::image_graph()
plot(1)
abline(0, 1, col = "blue", lwd = 2, lty = "solid")
abline(0.1, 1, col = "red", lwd = 3, lty = "dotted")

autoviewer_disable()
abline(0.2, 1, col = "green", lwd = 4, lty = "twodash")
abline(0.3, 1, col = "black", lwd = 5, lty = "dotdash")

autoviewer_enable()
abline(0.4, 1, col = "purple", lwd = 6, lty = "dashed")
abline(0.5, 1, col = "yellow", lwd = 7, lty = "longdash")
</code></pre>

<hr>
<h2 id='coder_info'>Magick Configuration</h2><span id='topic+coder_info'></span><span id='topic+magick_config'></span><span id='topic+magick_set_seed'></span>

<h3>Description</h3>

<p>ImageMagick can be configured to support various additional tool and formats
via external libraries. These functions show which features ImageMagick supports
on your system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>coder_info(format)

magick_config()

magick_set_seed(seed)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="coder_info_+3A_format">format</code></td>
<td>
<p>image format such as <code>png</code>, <code>tiff</code> or <code>pdf</code>.</p>
</td></tr>
<tr><td><code id="coder_info_+3A_seed">seed</code></td>
<td>
<p>integer with seed value to use</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that <code>coder_info</code> raises an error for unsupported formats.
</p>


<h3>References</h3>

<p><a href="https://www.imagemagick.org/Magick++/CoderInfo.html">https://www.imagemagick.org/Magick++/CoderInfo.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>coder_info("png")
coder_info("jpg")
coder_info("pdf")
coder_info("tiff")
coder_info("gif")
# Reproduce random image
magick_set_seed(123)
image_blank(200,200, pseudo_image = "plasma:fractal")
</code></pre>

<hr>
<h2 id='color'>Image Color</h2><span id='topic+color'></span><span id='topic+image_modulate'></span><span id='topic+image_quantize'></span><span id='topic+image_map'></span><span id='topic+image_ordered_dither'></span><span id='topic+image_channel'></span><span id='topic+image_separate'></span><span id='topic+image_combine'></span><span id='topic+image_transparent'></span><span id='topic+image_background'></span><span id='topic+image_colorize'></span><span id='topic+image_contrast'></span><span id='topic+image_normalize'></span><span id='topic+image_enhance'></span><span id='topic+image_equalize'></span><span id='topic+image_median'></span>

<h3>Description</h3>

<p>Functions to adjust contrast, brightness, colors of the image. Details below.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_modulate(image, brightness = 100, saturation = 100, hue = 100)

image_quantize(
  image,
  max = 256,
  colorspace = "rgb",
  dither = TRUE,
  treedepth = NULL
)

image_map(image, map, dither = FALSE)

image_ordered_dither(image, threshold_map)

image_channel(image, channel = "lightness")

image_separate(image, channel = "default")

image_combine(image, colorspace = "sRGB", channel = "default")

image_transparent(image, color, fuzz = 0)

image_background(image, color, flatten = TRUE)

image_colorize(image, opacity, color)

image_contrast(image, sharpen = 1)

image_normalize(image)

image_enhance(image)

image_equalize(image)

image_median(image, radius = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="color_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="color_+3A_brightness">brightness</code></td>
<td>
<p>modulation of brightness as percentage of the current value (100 for no change)</p>
</td></tr>
<tr><td><code id="color_+3A_saturation">saturation</code></td>
<td>
<p>modulation of saturation as percentage of the current value (100 for no change)</p>
</td></tr>
<tr><td><code id="color_+3A_hue">hue</code></td>
<td>
<p>modulation of hue is an absolute rotation of -180 degrees to +180 degrees from the
current position corresponding to an argument range of 0 to 200 (100 for no change)</p>
</td></tr>
<tr><td><code id="color_+3A_max">max</code></td>
<td>
<p>preferred number of colors in the image. The actual number of colors in the image may
be less than your request, but never more.</p>
</td></tr>
<tr><td><code id="color_+3A_colorspace">colorspace</code></td>
<td>
<p>string with a <a href="https://www.imagemagick.org/Magick++/Enumerations.html#ColorspaceType"><code>colorspace</code></a>
from <a href="#topic+colorspace_types">colorspace_types</a> for example <code>"gray"</code>, <code>"rgb"</code> or <code>"cmyk"</code></p>
</td></tr>
<tr><td><code id="color_+3A_dither">dither</code></td>
<td>
<p>a boolean (defaults to <code>TRUE</code>) specifying whether to apply Floyd/Steinberg error
diffusion to the image: averages intensities of several neighboring pixels</p>
</td></tr>
<tr><td><code id="color_+3A_treedepth">treedepth</code></td>
<td>
<p>depth of the quantization color classification tree. Values of 0 or 1 allow
selection of the optimal tree depth for the color reduction algorithm. Values between 2 and 8
may be used to manually adjust the tree depth.</p>
</td></tr>
<tr><td><code id="color_+3A_map">map</code></td>
<td>
<p>reference image to map colors from</p>
</td></tr>
<tr><td><code id="color_+3A_threshold_map">threshold_map</code></td>
<td>
<p>A string giving the dithering pattern to use. See
<a href="https://legacy.imagemagick.org/Usage/option_link.cgi?ordered-dither">the ImageMagick documentation</a>
for possible values</p>
</td></tr>
<tr><td><code id="color_+3A_channel">channel</code></td>
<td>
<p>a string with a
<a href="https://www.imagemagick.org/Magick++/Enumerations.html#ChannelType">channel</a> from
<a href="#topic+channel_types">channel_types</a> for example <code>"alpha"</code> or <code>"hue"</code> or <code>"cyan"</code></p>
</td></tr>
<tr><td><code id="color_+3A_color">color</code></td>
<td>
<p>a valid <a href="https://www.imagemagick.org/Magick++/Color.html">color string</a> such as
<code>"navyblue"</code> or <code>"#000080"</code>. Use <code>"none"</code> for transparency.</p>
</td></tr>
<tr><td><code id="color_+3A_fuzz">fuzz</code></td>
<td>
<p>relative color distance (value between 0 and 100) to be considered similar
in the filling algorithm</p>
</td></tr>
<tr><td><code id="color_+3A_flatten">flatten</code></td>
<td>
<p>should image be flattened before writing? This also replaces
transparency with background color.</p>
</td></tr>
<tr><td><code id="color_+3A_opacity">opacity</code></td>
<td>
<p>percentage of opacity used for coloring</p>
</td></tr>
<tr><td><code id="color_+3A_sharpen">sharpen</code></td>
<td>
<p>enhance intensity differences in image</p>
</td></tr>
<tr><td><code id="color_+3A_radius">radius</code></td>
<td>
<p>replace each pixel with the median color in a circular neighborhood</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For details see <a href="https://www.imagemagick.org/Magick++/STL.html">Magick++ STL</a>
documentation. Short descriptions:
</p>

<ul>
<li> <p><a href="#topic+image_modulate">image_modulate</a> adjusts brightness, saturation and hue of image relative to current.
</p>
</li>
<li> <p><a href="#topic+image_quantize">image_quantize</a> reduces number of unique colors in the image.
</p>
</li>
<li> <p><a href="#topic+image_ordered_dither">image_ordered_dither</a> reduces number of unique colors using a dithering threshold map.
</p>
</li>
<li> <p><a href="#topic+image_map">image_map</a> replaces colors of image with the closest color from a reference image.
</p>
</li>
<li> <p><a href="#topic+image_channel">image_channel</a> extracts a single channel from an image and returns as grayscale.
</p>
</li>
<li> <p><a href="#topic+image_transparent">image_transparent</a> sets pixels approximately matching given color to transparent.
</p>
</li>
<li> <p><a href="#topic+image_background">image_background</a> sets background color. When image is flattened, transparent pixels get background color.
</p>
</li>
<li> <p><a href="#topic+image_colorize">image_colorize</a> overlays a solid color frame using specified opacity.
</p>
</li>
<li> <p><a href="#topic+image_contrast">image_contrast</a> enhances intensity differences in image
</p>
</li>
<li> <p><a href="#topic+image_normalize">image_normalize</a> increases contrast by normalizing the pixel values to span the full range of colors
</p>
</li>
<li> <p><a href="#topic+image_enhance">image_enhance</a> tries to minimize noise
</p>
</li>
<li> <p><a href="#topic+image_equalize">image_equalize</a> equalizes using histogram equalization
</p>
</li>
<li> <p><a href="#topic+image_median">image_median</a> replaces each pixel with the median color in a circular neighborhood
</p>
</li></ul>

<p>Note that
colors are also determined by image properties
<a href="https://www.imagemagick.org/Magick++/Enumerations.html#ImageType">imagetype</a> and
<a href="https://www.imagemagick.org/Magick++/Enumerations.html#ColorspaceType">colorspace</a>
which can be modified via <code><a href="#topic+image_convert">image_convert()</a></code>.
</p>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># manually adjust colors
logo &lt;- image_read("logo:")
image_modulate(logo, brightness = 200)
image_modulate(logo, saturation = 150)
image_modulate(logo, hue = 200)

# Reduce image to 10 different colors using various spaces
image_quantize(logo, max = 10, colorspace = 'gray')
image_quantize(logo, max = 10, colorspace = 'rgb')
image_quantize(logo, max = 10, colorspace = 'cmyk')

image_ordered_dither(logo, 'o8x8')
# Change background color
translogo &lt;- image_transparent(logo, 'white')
image_background(translogo, "pink", flatten = TRUE)

# Compare to flood-fill method:
image_fill(logo, "pink", fuzz = 20)

# Other color tweaks
image_colorize(logo, 50, "red")
image_contrast(logo)
image_normalize(logo)
image_enhance(logo)
image_equalize(logo)
image_median(logo)

# Alternate way to convert into black-white
image_convert(logo, type = 'grayscale')
</code></pre>

<hr>
<h2 id='composite'>Image Composite</h2><span id='topic+composite'></span><span id='topic+image_composite'></span><span id='topic+image_border'></span><span id='topic+image_frame'></span><span id='topic+image_shadow_mask'></span><span id='topic+image_shadow'></span><span id='topic+image_shade'></span>

<h3>Description</h3>

<p>Similar to the ImageMagick <code>composite</code> utility: compose an image on top of another one using a
<a href="https://www.imagemagick.org/Magick++/Enumerations.html#CompositeOperator">CompositeOperator</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_composite(
  image,
  composite_image,
  operator = "atop",
  offset = "+0+0",
  gravity = "northwest",
  compose_args = ""
)

image_border(image, color = "lightgray", geometry = "10x10", operator = "copy")

image_frame(image, color = "lightgray", geometry = "25x25+6+6")

image_shadow_mask(image, geometry = "50x10+30+30")

image_shadow(
  image,
  color = "black",
  bg = "none",
  geometry = "50x10+30+30",
  operator = "copy",
  offset = "+20+20"
)

image_shade(image, azimuth = 30, elevation = 30, color = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="composite_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="composite_+3A_composite_image">composite_image</code></td>
<td>
<p>composition image</p>
</td></tr>
<tr><td><code id="composite_+3A_operator">operator</code></td>
<td>
<p>string with a
<a href="https://www.imagemagick.org/Magick++/Enumerations.html#CompositeOperator">composite operator</a>
from <a href="#topic+compose_types">compose_types()</a></p>
</td></tr>
<tr><td><code id="composite_+3A_offset">offset</code></td>
<td>
<p>string with either a <a href="#topic+gravity_types">gravity_type</a> or a <a href="#topic+geometry_point">geometry_point</a>
to set position of top image.</p>
</td></tr>
<tr><td><code id="composite_+3A_gravity">gravity</code></td>
<td>
<p>string with
<a href="https://www.imagemagick.org/Magick++/Enumerations.html#GravityType">gravity</a>
value from <a href="#topic+gravity_types">gravity_types</a>.</p>
</td></tr>
<tr><td><code id="composite_+3A_compose_args">compose_args</code></td>
<td>
<p>additional arguments needed for some composite operations</p>
</td></tr>
<tr><td><code id="composite_+3A_color">color</code></td>
<td>
<p>Set to true to shade the red, green, and blue components of the image.</p>
</td></tr>
<tr><td><code id="composite_+3A_geometry">geometry</code></td>
<td>
<p>a <a href="https://www.imagemagick.org/Magick++/Geometry.html">geometry string</a>
to set height and width of the border, e.g. <code>"10x8"</code>. In addition <a href="#topic+image_frame">image_frame</a> allows
for adding shadow by setting an offset e.g. <code>"20x10+7+2"</code>.</p>
</td></tr>
<tr><td><code id="composite_+3A_bg">bg</code></td>
<td>
<p>background color</p>
</td></tr>
<tr><td><code id="composite_+3A_azimuth">azimuth</code></td>
<td>
<p>position of light source</p>
</td></tr>
<tr><td><code id="composite_+3A_elevation">elevation</code></td>
<td>
<p>position of light source</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>image_composite</code> function is vectorized over both image arguments: if the first image has
<code>n</code> frames and the second <code>m</code> frames, the output image will contain <code>n</code> * <code>m</code> frames.
</p>
<p>The <a href="#topic+image_border">image_border</a> function creates a slightly larger solid color frame and then composes the
original frame on top. The <a href="#topic+image_frame">image_frame</a> function is similar but has an additional feature to
create a shadow effect on the border (which is really ugly).
</p>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Compose images using one of many operators
imlogo &lt;- image_scale(image_read("logo:"), "x275")
rlogo &lt;- image_read("https://jeroen.github.io/images/Rlogo-old.png")

# Standard is atop
image_composite(imlogo, rlogo)

# Same as 'blend 50' in the command line
image_composite(imlogo, rlogo, operator = "blend", compose_args="50")

# Offset can be geometry or gravity
image_composite(logo, rose, offset = "+100+100")
image_composite(logo, rose, gravity = "East")

# Add a border frame around the image
image_border(imlogo, "red", "10x10")
image_frame(imlogo)
image_shadow(imlogo)
image_shade(imlogo)
</code></pre>

<hr>
<h2 id='defines'>Set encoder defines</h2><span id='topic+defines'></span><span id='topic+image_set_defines'></span>

<h3>Description</h3>

<p>So called 'defines' are properties that are passed along to external
filters and libraries. Usually defines are used in <a href="#topic+image_read">image_read</a> or
<a href="#topic+image_write">image_write</a> to control the image encoder/decoder, but you can also
set these manually on the image object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_set_defines(image, defines)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="defines_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="defines_+3A_defines">defines</code></td>
<td>
<p>a named character vector with extra options to control reading.
These are the <code style="white-space: pre;">&#8288;-define key{=value}&#8288;</code> settings in the <a href="http://www.imagemagick.org/script/command-line-options.php#define">command line tool</a>.
Use an empty string for value-less defines, and NA to unset a define.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The defines values must be a character string, where the names contain
the defines keys. Each name must be of the format &quot;enc:key&quot; where the
first part is the encoder or filter to which the key is passed. For
example <code>"png:...."</code> defines can control the encoding and decoding of
png images.
</p>
<p>The <a href="#topic+image_set_defines">image_set_defines</a> function does not make a copy of the image, so
the defined values remain in the image object until they are overwritten
or unset.
</p>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Write an image
x &lt;- image_read("https://jeroen.github.io/images/frink.png")
image_write(x, "frink.png")

# Pass some properties to PNG encoder
defines &lt;- c("png:compression-filter" = "1", "png:compression-level" = "0")
image_set_defines(x, defines)
image_write(x, "frink-uncompressed.png")

# Unset properties
defines[1:2] = NA
image_set_defines(x, defines)
image_write(x, "frink-final.png")

# Compare size and cleanup
file.info(c("frink.png", "frink-uncompressed.png", "frink-final.png"))
unlink(c("frink.png", "frink-uncompressed.png", "frink-final.png"))
</code></pre>

<hr>
<h2 id='device'>Magick Graphics Device</h2><span id='topic+device'></span><span id='topic+image_graph'></span><span id='topic+image_device'></span><span id='topic+image_draw'></span><span id='topic+image_capture'></span>

<h3>Description</h3>

<p>Graphics device that produces a Magick image. Can either be used like a regular
device for making plots, or alternatively via <code>image_draw</code> to open a device
which draws onto an existing image using pixel coordinates. The latter is vectorized,
i.e. drawing operations are applied to each frame in the image.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_graph(
  width = 800,
  height = 600,
  bg = "white",
  pointsize = 12,
  res = 72,
  clip = TRUE,
  antialias = TRUE
)

image_draw(image, pointsize = 12, res = 72, antialias = TRUE, ...)

image_capture()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="device_+3A_width">width</code></td>
<td>
<p>in pixels</p>
</td></tr>
<tr><td><code id="device_+3A_height">height</code></td>
<td>
<p>in pixels</p>
</td></tr>
<tr><td><code id="device_+3A_bg">bg</code></td>
<td>
<p>background color</p>
</td></tr>
<tr><td><code id="device_+3A_pointsize">pointsize</code></td>
<td>
<p>size of fonts</p>
</td></tr>
<tr><td><code id="device_+3A_res">res</code></td>
<td>
<p>resolution in pixels</p>
</td></tr>
<tr><td><code id="device_+3A_clip">clip</code></td>
<td>
<p>enable clipping in the device. Because clipping can slow things down
a lot, you can disable it if you don't need it.</p>
</td></tr>
<tr><td><code id="device_+3A_antialias">antialias</code></td>
<td>
<p>TRUE/FALSE: enables anti-aliasing for text and strokes</p>
</td></tr>
<tr><td><code id="device_+3A_image">image</code></td>
<td>
<p>an existing image on which to start drawing</p>
</td></tr>
<tr><td><code id="device_+3A_...">...</code></td>
<td>
<p>additional device parameters passed to <a href="graphics.html#topic+plot.window">plot.window</a> such as
<code>xlim</code>, <code>ylim</code>, or <code>mar</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The device is a relatively recent feature of the package. It should support all
operations but there might still be small inaccuracies. Also it is a bit slower than
some of the other devices, in particular for rendering text and clipping. Hopefully
this can be optimized in the next version.
</p>
<p>By default <code>image_draw</code> sets all margins to 0 and uses graphics coordinates to
match image size in pixels (width x height) where <code>(0,0)</code> is the top left corner.
Note that this means the y axis increases from top to bottom which is the opposite
of typical graphics coordinates.  You can override all this by passing custom
<code>xlim</code>, <code>ylim</code> or <code>mar</code> values to <code>image_draw</code>.
</p>
<p>The <code>image_capture</code> function returns the current device as an image. This only
works if the current device is a magick device or supports <a href="grDevices.html#topic+dev.capture">dev.capture</a>.
</p>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Regular image
frink &lt;- image_read("https://jeroen.github.io/images/frink.png")

# Produce image using graphics device
fig &lt;- image_graph(res = 96)
ggplot2::qplot(mpg, wt, data = mtcars, colour = cyl)
dev.off()

# Combine
out &lt;- image_composite(fig, frink, offset = "+70+30")
print(out)

# Or paint over an existing image
img &lt;- image_draw(frink)
rect(20, 20, 200, 100, border = "red", lty = "dashed", lwd = 5)
abline(h = 300, col = 'blue', lwd = '10', lty = "dotted")
text(10, 250, "Hoiven-Glaven", family = "monospace", cex = 4, srt = 90)
palette(rainbow(11, end = 0.9))
symbols(rep(200, 11), seq(0, 400, 40), circles = runif(11, 5, 35),
  bg = 1:11, inches = FALSE, add = TRUE)
dev.off()
print(img)


# Vectorized example with custom coordinates
earth &lt;- image_read("https://jeroen.github.io/images/earth.gif")
img &lt;- image_draw(earth, xlim = c(0,1), ylim = c(0,1))
rect(.1, .1, .9, .9, border = "red", lty = "dashed", lwd = 5)
text(.5, .9, "Our planet", cex = 3, col = "white")
dev.off()
print(img)

</code></pre>

<hr>
<h2 id='edges'>Edge / Line Detection</h2><span id='topic+edges'></span><span id='topic+image_edge'></span><span id='topic+image_canny'></span><span id='topic+image_hough_draw'></span><span id='topic+image_hough_txt'></span>

<h3>Description</h3>

<p>Best results are obtained by finding edges with <code><a href="#topic+image_canny">image_canny()</a></code> and
then performing Hough-line detection on the edge image.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_edge(image, radius = 1)

image_canny(image, geometry = "0x1+10%+30%")

image_hough_draw(
  image,
  geometry = NULL,
  color = "red",
  bg = "transparent",
  size = 3,
  overlay = FALSE
)

image_hough_txt(image, geometry = NULL, format = c("mvg", "svg"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edges_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="edges_+3A_radius">radius</code></td>
<td>
<p>edge size in pixels</p>
</td></tr>
<tr><td><code id="edges_+3A_geometry">geometry</code></td>
<td>
<p>geometry string, see details.</p>
</td></tr>
<tr><td><code id="edges_+3A_color">color</code></td>
<td>
<p>a valid <a href="https://www.imagemagick.org/Magick++/Color.html">color string</a> such as
<code>"navyblue"</code> or <code>"#000080"</code>. Use <code>"none"</code> for transparency.</p>
</td></tr>
<tr><td><code id="edges_+3A_bg">bg</code></td>
<td>
<p>background color</p>
</td></tr>
<tr><td><code id="edges_+3A_size">size</code></td>
<td>
<p>size in points to draw the line</p>
</td></tr>
<tr><td><code id="edges_+3A_overlay">overlay</code></td>
<td>
<p>composite the drawing atop the input image. Only for <code>bg = 'transparent'</code>.</p>
</td></tr>
<tr><td><code id="edges_+3A_format">format</code></td>
<td>
<p>output format of the text, either <code>svg</code> or <code>mvg</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>For Hough-line detection, the geometry format is <code style="white-space: pre;">&#8288;{W}x{H}+{threshold}&#8288;</code>
defining the size and threshold of the filter used to find 'peaks' in
the intermediate search image. For canny edge detection the format is
<code style="white-space: pre;">&#8288;{radius}x{sigma}+{lower%}+{upper%}&#8288;</code>. More details and examples are
available at the <a href="https://legacy.imagemagick.org/Usage/transform/">imagemagick website</a>.
</p>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(magick_config()$version &gt; "6.8.9"){
shape &lt;- demo_image("shape_rectangle.gif")
rectangle &lt;- image_canny(shape)
rectangle |&gt; image_hough_draw('5x5+20')
rectangle |&gt; image_hough_txt(format = 'svg') |&gt; cat()
}
</code></pre>

<hr>
<h2 id='editing'>Image Editing</h2><span id='topic+editing'></span><span id='topic+image_read'></span><span id='topic+image_read_svg'></span><span id='topic+image_read_pdf'></span><span id='topic+image_read_video'></span><span id='topic+image_write'></span><span id='topic+image_convert'></span><span id='topic+image_data'></span><span id='topic+image_raster'></span><span id='topic+image_display'></span><span id='topic+image_browse'></span><span id='topic+image_strip'></span><span id='topic+image_blank'></span><span id='topic+image_destroy'></span><span id='topic+image_join'></span><span id='topic+image_attributes'></span><span id='topic+image_get_artifact'></span><span id='topic+demo_image'></span>

<h3>Description</h3>

<p>Read, write and join or combine images. All image functions are vectorized, meaning
they operate either on a single frame or a series of frames (e.g. a collage, video,
or animation). Besides paths and URLs, <code><a href="#topic+image_read">image_read()</a></code> supports commonly used bitmap
and raster object types.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_read(
  path,
  density = NULL,
  depth = NULL,
  strip = FALSE,
  coalesce = TRUE,
  defines = NULL
)

image_read_svg(path, width = NULL, height = NULL)

image_read_pdf(path, pages = NULL, density = 300, password = "")

image_read_video(path, fps = 1, format = "png")

image_write(
  image,
  path = NULL,
  format = NULL,
  quality = NULL,
  depth = NULL,
  density = NULL,
  comment = NULL,
  flatten = FALSE,
  defines = NULL,
  compression = NULL
)

image_convert(
  image,
  format = NULL,
  type = NULL,
  colorspace = NULL,
  depth = NULL,
  antialias = NULL,
  matte = NULL,
  interlace = NULL
)

image_data(image, channels = NULL, frame = 1)

image_raster(image, frame = 1, tidy = TRUE)

image_display(image, animate = TRUE)

image_browse(image, browser = getOption("browser"))

image_strip(image)

image_blank(width, height, color = "none", pseudo_image = "", defines = NULL)

image_destroy(image)

image_join(...)

image_attributes(image)

image_get_artifact(image, artifact = "")

demo_image(path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="editing_+3A_path">path</code></td>
<td>
<p>a file, url, or raster object or bitmap array</p>
</td></tr>
<tr><td><code id="editing_+3A_density">density</code></td>
<td>
<p>resolution to render pdf or svg</p>
</td></tr>
<tr><td><code id="editing_+3A_depth">depth</code></td>
<td>
<p>color depth (either 8 or 16)</p>
</td></tr>
<tr><td><code id="editing_+3A_strip">strip</code></td>
<td>
<p>drop image comments and metadata</p>
</td></tr>
<tr><td><code id="editing_+3A_coalesce">coalesce</code></td>
<td>
<p>automatically <code><a href="#topic+image_coalesce">image_coalesce()</a></code> gif images</p>
</td></tr>
<tr><td><code id="editing_+3A_defines">defines</code></td>
<td>
<p>a named character vector with extra options to control reading.
These are the <code style="white-space: pre;">&#8288;-define key{=value}&#8288;</code> settings in the <a href="http://www.imagemagick.org/script/command-line-options.php#define">command line tool</a>.
Use an empty string for value-less defines, and NA to unset a define.</p>
</td></tr>
<tr><td><code id="editing_+3A_width">width</code></td>
<td>
<p>in pixels</p>
</td></tr>
<tr><td><code id="editing_+3A_height">height</code></td>
<td>
<p>in pixels</p>
</td></tr>
<tr><td><code id="editing_+3A_pages">pages</code></td>
<td>
<p>integer vector with page numbers. Defaults to all pages.</p>
</td></tr>
<tr><td><code id="editing_+3A_password">password</code></td>
<td>
<p>user <a href="pdftools.html#topic+pdf_render_page">password</a> to open protected pdf files</p>
</td></tr>
<tr><td><code id="editing_+3A_fps">fps</code></td>
<td>
<p>how many images to capture per second of video. Set to
<code>NULL</code> to get all frames from the input video.</p>
</td></tr>
<tr><td><code id="editing_+3A_format">format</code></td>
<td>
<p>output format such as <code>"png"</code>, <code>"jpeg"</code>, <code>"gif"</code>, <code>"rgb"</code> or <code>"rgba"</code>.</p>
</td></tr>
<tr><td><code id="editing_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="editing_+3A_quality">quality</code></td>
<td>
<p>number between 0 and 100 for jpeg quality. Defaults to 75.</p>
</td></tr>
<tr><td><code id="editing_+3A_comment">comment</code></td>
<td>
<p>text string added to the image metadata for supported formats</p>
</td></tr>
<tr><td><code id="editing_+3A_flatten">flatten</code></td>
<td>
<p>should image be flattened before writing? This also replaces
transparency with background color.</p>
</td></tr>
<tr><td><code id="editing_+3A_compression">compression</code></td>
<td>
<p>a string with compression type from <a href="#topic+compress_types">compress_types</a></p>
</td></tr>
<tr><td><code id="editing_+3A_type">type</code></td>
<td>
<p>string with <a href="https://www.imagemagick.org/Magick++/Enumerations.html#ImageType">imagetype</a>
value from <a href="#topic+image_types">image_types</a> for example <code>grayscale</code> to convert into black/white</p>
</td></tr>
<tr><td><code id="editing_+3A_colorspace">colorspace</code></td>
<td>
<p>string with a <a href="https://www.imagemagick.org/Magick++/Enumerations.html#ColorspaceType"><code>colorspace</code></a>
from <a href="#topic+colorspace_types">colorspace_types</a> for example <code>"gray"</code>, <code>"rgb"</code> or <code>"cmyk"</code></p>
</td></tr>
<tr><td><code id="editing_+3A_antialias">antialias</code></td>
<td>
<p>enable anti-aliasing for text and strokes</p>
</td></tr>
<tr><td><code id="editing_+3A_matte">matte</code></td>
<td>
<p>set to <code>TRUE</code> or <code>FALSE</code> to enable or disable transparency</p>
</td></tr>
<tr><td><code id="editing_+3A_interlace">interlace</code></td>
<td>
<p>string with <a href="https://www.imagemagick.org/Magick++/Enumerations.html#InterlaceType">interlace</a></p>
</td></tr>
<tr><td><code id="editing_+3A_channels">channels</code></td>
<td>
<p>string with image channel(s) for example <code>"rgb"</code>, <code>"rgba"</code>,
<code>"cmyk"</code>,<code>"gray"</code>, or <code>"ycbcr"</code>. Default is either <code>"gray"</code>, <code>"rgb"</code> or <code>"rgba"</code>
depending on the image</p>
</td></tr>
<tr><td><code id="editing_+3A_frame">frame</code></td>
<td>
<p>integer setting which frame to extract from the image</p>
</td></tr>
<tr><td><code id="editing_+3A_tidy">tidy</code></td>
<td>
<p>converts raster data to long form for use with <a href="ggplot2.html#topic+geom_tile">geom_raster</a>.
If <code>FALSE</code> output is the same as <code>as.raster()</code>.</p>
</td></tr>
<tr><td><code id="editing_+3A_animate">animate</code></td>
<td>
<p>support animations in the X11 display</p>
</td></tr>
<tr><td><code id="editing_+3A_browser">browser</code></td>
<td>
<p>argument passed to <a href="utils.html#topic+browseURL">browseURL</a></p>
</td></tr>
<tr><td><code id="editing_+3A_color">color</code></td>
<td>
<p>a valid <a href="https://www.imagemagick.org/Magick++/Color.html">color string</a> such as
<code>"navyblue"</code> or <code>"#000080"</code>. Use <code>"none"</code> for transparency.</p>
</td></tr>
<tr><td><code id="editing_+3A_pseudo_image">pseudo_image</code></td>
<td>
<p>string with <a href="http://www.imagemagick.org/script/formats.php#pseudo">pseudo image</a>
specification for example <code>"radial-gradient:purple-yellow"</code></p>
</td></tr>
<tr><td><code id="editing_+3A_...">...</code></td>
<td>
<p>several images or lists of images to be combined</p>
</td></tr>
<tr><td><code id="editing_+3A_artifact">artifact</code></td>
<td>
<p>string with name of the artifact to extract, see the
<a href="#topic+image_deskew">image_deskew</a> for an example.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All standard base vector methods such as <a href="Matrix.html#topic++5B">[</a>, <a href="base.html#topic++5B+5B">[[</a>, <code><a href="base.html#topic+c">c()</a></code>, <code><a href="base.html#topic+as.list">as.list()</a></code>,
<code><a href="grDevices.html#topic+as.raster">as.raster()</a></code>, <code><a href="base.html#topic+rev">rev()</a></code>, <code><a href="base.html#topic+length">length()</a></code>, and <code><a href="base.html#topic+print">print()</a></code> can be used to work with magick
image objects. Use the standard <code>img[i]</code> syntax to extract a subset of the frames
from an image. The <code>img[[i]]</code> method is an alias for <code><a href="#topic+image_data">image_data()</a></code> which extracts
a single frame as a raw bitmap matrix with pixel values.
</p>
<p>For reading svg or pdf it is recommended to use <code>image_read_svg()</code> and <code>image_read_pdf()</code>
if the <a href="rsvg.html#topic+rsvg">rsvg</a> and <a href="pdftools.html#topic+pdf_render_page">pdftools</a> R packages are available.
These functions provide more rendering options (including rendering of literal svg) and
better quality than built-in svg/pdf rendering delegates from imagemagick itself.
</p>
<p>X11 is required for <code>image_display()</code> which is only works on some platforms. A more
portable method is <code>image_browse()</code> which opens the image in a browser. RStudio has
an embedded viewer that does this automatically which is quite nice.
</p>
<p>Image objects are automatically released by the garbage collector when they are no longer
reachable. Because the GC only runs once in a while, you can also call <code>image_destroy()</code>
explicitly to release the memory immediately. This is usually only needed if you create
a lot of images in a short period of time, and you might run out of memory.
</p>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Download image from the web
frink &lt;- image_read("https://jeroen.github.io/images/frink.png")
worldcup_frink &lt;- image_fill(frink, "orange", "+100+200", 20)
image_write(worldcup_frink, "output.png")

# extract raw bitmap array
bitmap &lt;- frink[[1]]

# replace pixels with #FF69B4 ('hot pink') and convert back to image
bitmap[,50:100, 50:100] &lt;- as.raw(c(0xff, 0x69, 0xb4, 0xff))
image_read(bitmap)

# Plot to graphics device via legacy raster format
raster &lt;- as.raster(frink)
par(ask=FALSE)
plot(raster)

# Read bitmap arrays from other image packages
download.file("https://jeroen.github.io/images/example.webp", "example.webp", mode = 'wb')
if(require(webp)) image_read(webp::read_webp("example.webp"))
unlink(c("example.webp", "output.png"))
if(require(rsvg)){
tiger &lt;- image_read_svg("http://jeroen.github.io/images/tiger.svg")
svgtxt &lt;- '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;svg width="400" height="400" viewBox="0 0 400 400" fill="none"&gt;
 &lt;circle fill="steelblue" cx="200" cy="200" r="100" /&gt;
 &lt;circle fill="yellow" cx="200" cy="200" r="90" /&gt;
&lt;/svg&gt;'
circles &lt;- image_read_svg(svgtxt)
}
if(require(pdftools))
image_read_pdf(file.path(R.home('doc'), 'NEWS.pdf'), pages = 1, density = 100)
# create a solid canvas
image_blank(600, 400, "green")
image_blank(600, 400, pseudo_image = "radial-gradient:purple-yellow")
image_blank(200, 200, pseudo_image = "gradient:#3498db-#db3a34",
  defines = c('gradient:direction' = 'east'))
</code></pre>

<hr>
<h2 id='effects'>Image Effects</h2><span id='topic+effects'></span><span id='topic+image_despeckle'></span><span id='topic+image_reducenoise'></span><span id='topic+image_noise'></span><span id='topic+image_blur'></span><span id='topic+image_motion_blur'></span><span id='topic+image_charcoal'></span><span id='topic+image_oilpaint'></span><span id='topic+image_emboss'></span><span id='topic+image_implode'></span><span id='topic+image_negate'></span>

<h3>Description</h3>

<p>High level effects applied to an entire image.
These are mostly just for fun.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_despeckle(image, times = 1L)

image_reducenoise(image, radius = 1L)

image_noise(image, noisetype = "gaussian")

image_blur(image, radius = 1, sigma = 0.5)

image_motion_blur(image, radius = 1, sigma = 0.5, angle = 0)

image_charcoal(image, radius = 1, sigma = 0.5)

image_oilpaint(image, radius = 1)

image_emboss(image, radius = 1, sigma = 0.5)

image_implode(image, factor = 0.5)

image_negate(image)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="effects_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="effects_+3A_times">times</code></td>
<td>
<p>number of times to repeat the despeckle operation</p>
</td></tr>
<tr><td><code id="effects_+3A_radius">radius</code></td>
<td>
<p>radius, in pixels, for various transformations</p>
</td></tr>
<tr><td><code id="effects_+3A_noisetype">noisetype</code></td>
<td>
<p>string with a
<a href="https://www.imagemagick.org/Magick++/Enumerations.html#NoiseType">noisetype</a> value
from <a href="#topic+noise_types">noise_types</a>.</p>
</td></tr>
<tr><td><code id="effects_+3A_sigma">sigma</code></td>
<td>
<p>the standard deviation of the Laplacian, in pixels.</p>
</td></tr>
<tr><td><code id="effects_+3A_angle">angle</code></td>
<td>
<p>angle, in degrees, for various transformations</p>
</td></tr>
<tr><td><code id="effects_+3A_factor">factor</code></td>
<td>
<p>image implode factor (special effect)</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>logo &lt;- image_read("logo:")
image_despeckle(logo)
image_reducenoise(logo)
image_noise(logo)
image_blur(logo, 10, 10)
image_motion_blur(logo, 10, 10, 45)
image_charcoal(logo)
image_oilpaint(logo, radius = 3)
image_emboss(logo)
image_implode(logo)
image_negate(logo)
</code></pre>

<hr>
<h2 id='fx'>Image FX</h2><span id='topic+fx'></span><span id='topic+image_fx'></span><span id='topic+image_fx_sequence'></span>

<h3>Description</h3>

<p>Apply a custom an <a href="https://www.imagemagick.org/script/fx.php">fx expression</a> to the image.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_fx(image, expression = "p", channel = NULL)

image_fx_sequence(image, expression = "p")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fx_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="fx_+3A_expression">expression</code></td>
<td>
<p>string with an <a href="https://www.imagemagick.org/script/fx.php">fx expression</a></p>
</td></tr>
<tr><td><code id="fx_+3A_channel">channel</code></td>
<td>
<p>a value of <code><a href="#topic+channel_types">channel_types()</a></code> specifying which channel(s) to set</p>
</td></tr>
</table>


<h3>Details</h3>

<p>There are two different interfaces. The <a href="#topic+image_fx">image_fx</a> function simply applies
the same fx to each frame in the input image. The <a href="#topic+image_fx_sequence">image_fx_sequence</a> function
on the other hand treats the entire input vector as a sequence, allowing you
to apply an expression with multiple input images. See examples.
</p>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Show image_fx() expression
img &lt;- image_convert(logo, colorspace = "Gray")
gradient_x &lt;- image_convolve(img, kernel = "Prewitt")
gradient_y &lt;- image_convolve(img, kernel = "Prewitt:90")
gradient &lt;- c(image_fx(gradient_x, expression = "p^2"),
                image_fx(gradient_y, expression = "p^2"))
gradient &lt;- image_flatten(gradient, operator = "Plus")
#gradient &lt;- image_fx(gradient, expression = "sqrt(p)")
gradient


image_fx(img, expression = "pow(p, 0.5)")
image_fx(img, expression = "rand()")

# Use multiple source images

input &lt;- c(logo, image_flop(logo))
image_fx_sequence(input, "(u+v)/2")

</code></pre>

<hr>
<h2 id='geometry'>Geometry Helpers</h2><span id='topic+geometry'></span><span id='topic+geometry_point'></span><span id='topic+geometry_area'></span><span id='topic+geometry_size_pixels'></span><span id='topic+geometry_size_percent'></span>

<h3>Description</h3>

<p>ImageMagick uses a handy geometry syntax to specify coordinates and shapes
for use in image transformations. You can either specify these manually as
strings or use the helper functions below.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geometry_point(x, y)

geometry_area(width = NULL, height = NULL, x_off = 0, y_off = 0)

geometry_size_pixels(width = NULL, height = NULL, preserve_aspect = TRUE)

geometry_size_percent(width = 100, height = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="geometry_+3A_x">x</code></td>
<td>
<p>left offset in pixels</p>
</td></tr>
<tr><td><code id="geometry_+3A_y">y</code></td>
<td>
<p>top offset in pixels</p>
</td></tr>
<tr><td><code id="geometry_+3A_width">width</code></td>
<td>
<p>in pixels</p>
</td></tr>
<tr><td><code id="geometry_+3A_height">height</code></td>
<td>
<p>in pixels</p>
</td></tr>
<tr><td><code id="geometry_+3A_x_off">x_off</code></td>
<td>
<p>offset in pixels on x axis</p>
</td></tr>
<tr><td><code id="geometry_+3A_y_off">y_off</code></td>
<td>
<p>offset in pixels on y axis</p>
</td></tr>
<tr><td><code id="geometry_+3A_preserve_aspect">preserve_aspect</code></td>
<td>
<p>if FALSE, resize to width and height exactly, loosing original
aspect ratio. Only one of <code>percent</code> and <code>preserve_aspect</code> may be <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <a href="http://www.imagemagick.org/Magick++/Geometry.html">ImageMagick Manual</a>
for details about the syntax specification.
Examples of <code>geometry</code> strings:
</p>

<ul>
<li> <p><strong><code>"500x300"</code></strong>       &ndash; <em>Resize image keeping aspect ratio, such that width does not exceed 500 and the height does not exceed 300.</em>
</p>
</li>
<li> <p><strong><code>"500x300!"</code></strong>      &ndash; <em>Resize image to 500 by 300, ignoring aspect ratio</em>
</p>
</li>
<li> <p><strong><code>"500x"</code></strong>          &ndash; <em>Resize width to 500 keep aspect ratio</em>
</p>
</li>
<li> <p><strong><code>"x300"</code></strong>          &ndash; <em>Resize height to 300 keep aspect ratio</em>
</p>
</li>
<li> <p><strong><code>"50%x20%"</code></strong> &ndash; <em>Resize width to 50 percent and height to 20 percent of original</em>
</p>
</li>
<li> <p><strong><code>"500x300+10+20"</code></strong> &ndash; <em>Crop image to 500 by 300 at position 10,20</em>
</p>
</li></ul>



<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Specify a point
logo &lt;- image_read("logo:")
image_annotate(logo, "Some text", location = geometry_point(100, 200), size = 24)

# Specify image area
image_crop(logo, geometry_area(300, 300), repage = FALSE)
image_crop(logo, geometry_area(300, 300, 100, 100), repage = FALSE)

# Specify image size
image_resize(logo, geometry_size_pixels(300))
image_resize(logo, geometry_size_pixels(height = 300))
image_resize(logo, geometry_size_pixels(300, 300, preserve_aspect = FALSE))

# resize relative to current size
image_resize(logo, geometry_size_percent(50))
image_resize(logo, geometry_size_percent(50, 20))

</code></pre>

<hr>
<h2 id='image_ggplot'>Image to ggplot</h2><span id='topic+image_ggplot'></span>

<h3>Description</h3>

<p>Create a ggplot with axes set to pixel coordinates and plot the raster image
on it using <a href="ggplot2.html#topic+annotation_raster">ggplot2::annotation_raster</a>. See examples for how to plot an image
onto an existing ggplot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_ggplot(image, interpolate = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="image_ggplot_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="image_ggplot_+3A_interpolate">interpolate</code></td>
<td>
<p>passed to <a href="ggplot2.html#topic+annotation_raster">ggplot2::annotation_raster</a></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Plot with base R
plot(logo)

# Plot image with ggplot2
library(ggplot2)
myplot &lt;- image_ggplot(logo)
myplot + ggtitle("Test plot")

# Show that coordinates are reversed:
myplot + theme_classic()

# Or add to plot as annotation
image &lt;- image_fill(logo, 'none')
raster &lt;- as.raster(image)
myplot &lt;- qplot(mpg, wt, data = mtcars)
myplot + annotation_raster(raster, 25, 35, 3, 5)

# Or overplot image using grid
library(grid)
qplot(speed, dist, data = cars, geom = c("point", "smooth"))
grid.raster(image)
</code></pre>

<hr>
<h2 id='morphology'>Morphology</h2><span id='topic+morphology'></span><span id='topic+image_morphology'></span><span id='topic+image_convolve'></span>

<h3>Description</h3>

<p>Apply a morphology method. This is a very flexible function which
can be used to apply any morphology method with custom parameters.
See <a href="https://legacy.imagemagick.org/Usage/morphology/">imagemagick website</a>
for examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_morphology(
  image,
  method = "convolve",
  kernel = "Gaussian",
  iterations = 1,
  opts = list()
)

image_convolve(
  image,
  kernel = "Gaussian",
  iterations = 1,
  scaling = NULL,
  bias = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="morphology_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="morphology_+3A_method">method</code></td>
<td>
<p>a string with a valid method from <code><a href="#topic+morphology_types">morphology_types()</a></code></p>
</td></tr>
<tr><td><code id="morphology_+3A_kernel">kernel</code></td>
<td>
<p>either a square matrix or a string. The string can either be a
parameterized <a href="#topic+kernel_types">kerneltype</a> such as: <code>"DoG:0,0,2"</code> or <code>"Diamond"</code>
or it can contain a custom matrix (see examples)</p>
</td></tr>
<tr><td><code id="morphology_+3A_iterations">iterations</code></td>
<td>
<p>number of iterations</p>
</td></tr>
<tr><td><code id="morphology_+3A_opts">opts</code></td>
<td>
<p>a named list or character vector with custom attributes</p>
</td></tr>
<tr><td><code id="morphology_+3A_scaling">scaling</code></td>
<td>
<p>string with kernel scaling. The special flag <code>"!"</code> automatically scales to full
dynamic range, for example: <code>"50%!"</code></p>
</td></tr>
<tr><td><code id="morphology_+3A_bias">bias</code></td>
<td>
<p>output bias string, for example <code>"50%"</code></p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#example from IM website:
if(magick_config()$version &gt; "6.8.8"){
pixel &lt;- image_blank(1, 1, 'white') |&gt; image_border('black', '5x5')

# See the effect of Dilate method
pixel |&gt; image_scale('800%')
pixel |&gt; image_morphology('Dilate', "Diamond") |&gt; image_scale('800%')

# These produce the same output:
pixel |&gt; image_morphology('Dilate', "Diamond", iter = 3) |&gt; image_scale('800%')
pixel |&gt; image_morphology('Dilate', "Diamond:3") |&gt; image_scale('800%')

# Plus example
pixel |&gt; image_morphology('Dilate', "Plus", iterations = 2) |&gt; image_scale('800%')

# Rose examples
rose |&gt; image_morphology('ErodeI', 'Octagon', iter = 3)
rose |&gt; image_morphology('DilateI', 'Octagon', iter = 3)
rose |&gt; image_morphology('OpenI', 'Octagon', iter = 3)
rose |&gt; image_morphology('CloseI', 'Octagon', iter = 3)

# Edge detection
man &lt;- demo_image('man.gif')
man |&gt; image_morphology('EdgeIn', 'Octagon')
man |&gt; image_morphology('EdgeOut', 'Octagon')
man |&gt; image_morphology('Edge', 'Octagon')

# Octagonal Convex Hull
 man |&gt;
   image_morphology('Close', 'Diamond') |&gt;
   image_morphology('Thicken', 'ConvexHull', iterations = 1)

# Thinning down to a Skeleton
man |&gt; image_morphology('Thinning', 'Skeleton', iterations = 1)

# Specify custom kernel matrix usingn a string:
img &lt;- demo_image("test_mag.gif")
i &lt;- image_convolve(img, kernel = '4x5:
       0 -1  0  0
      -1 +1 -1  0
      -1 +1 -1  0
      -1 +1 +1 -1
       0 -1 -1  0 ', bias = "50%")
}
</code></pre>

<hr>
<h2 id='ocr'>Image Text OCR</h2><span id='topic+ocr'></span><span id='topic+image_ocr'></span><span id='topic+image_ocr_data'></span>

<h3>Description</h3>

<p>Extract text from an image using the <a href="tesseract.html#topic+tesseract">tesseract</a> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_ocr(image, language = "eng", HOCR = FALSE, ...)

image_ocr_data(image, language = "eng", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ocr_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="ocr_+3A_language">language</code></td>
<td>
<p>passed to <a href="tesseract.html#topic+tesseract">tesseract</a>. To install additional languages see
instructions in <a href="tesseract.html#topic+tessdata">tesseract_download()</a>.</p>
</td></tr>
<tr><td><code id="ocr_+3A_hocr">HOCR</code></td>
<td>
<p>if <code>TRUE</code> return results as HOCR xml instead of plain text</p>
</td></tr>
<tr><td><code id="ocr_+3A_...">...</code></td>
<td>
<p>additional parameters passed to <a href="tesseract.html#topic+tesseract">tesseract</a></p>
</td></tr>
</table>


<h3>Details</h3>

<p>To use this function you need to tesseract first:
</p>
<div class="sourceCode"><pre>  install.packages("tesseract")
</pre></div>
<p>Best results are obtained if you set the correct language in <a href="tesseract.html#topic+tesseract">tesseract</a>.
To install additional languages see instructions in <a href="tesseract.html#topic+tessdata">tesseract_download()</a>.
</p>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(require("tesseract")){
img &lt;- image_read("http://jeroen.github.io/images/testocr.png")
image_ocr(img)
image_ocr_data(img)
}

</code></pre>

<hr>
<h2 id='options'>Magick Options</h2><span id='topic+options'></span><span id='topic+magick_options'></span><span id='topic+magick_fonts'></span><span id='topic+option_types'></span><span id='topic+filter_types'></span><span id='topic+metric_types'></span><span id='topic+dispose_types'></span><span id='topic+compose_types'></span><span id='topic+colorspace_types'></span><span id='topic+channel_types'></span><span id='topic+image_types'></span><span id='topic+kernel_types'></span><span id='topic+noise_types'></span><span id='topic+gravity_types'></span><span id='topic+orientation_types'></span><span id='topic+morphology_types'></span><span id='topic+style_types'></span><span id='topic+decoration_types'></span><span id='topic+compress_types'></span><span id='topic+distort_types'></span><span id='topic+dump_option_info'></span>

<h3>Description</h3>

<p>List option types and values supported in your version of ImageMagick. For
descriptions see
<a href="https://www.imagemagick.org/Magick++/Enumerations.html">ImageMagick Enumerations</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>magick_options()

magick_fonts()

option_types()

filter_types()

metric_types()

dispose_types()

compose_types()

colorspace_types()

channel_types()

image_types()

kernel_types()

noise_types()

gravity_types()

orientation_types()

morphology_types()

style_types()

decoration_types()

compress_types()

distort_types()

dump_option_info(option = "font")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="options_+3A_option">option</code></td>
<td>
<p>one of the <a href="#topic+option_types">option_types</a></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <a href="#topic+dump_option_info">dump_option_info</a> function is equivalent to calling <code>convert -list [option]</code> on
the command line. It does not return anything, it only makes ImageMagick print
stuff to the console, use only for debugging.
</p>


<h3>References</h3>

<p>ImageMagick Manual: <a href="https://www.imagemagick.org/Magick++/Enumerations.html">Enumerations</a>
</p>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>

<hr>
<h2 id='painting'>Image Painting</h2><span id='topic+painting'></span><span id='topic+image_fill'></span><span id='topic+image_annotate'></span>

<h3>Description</h3>

<p>The <code><a href="#topic+image_fill">image_fill()</a></code> function performs flood-fill by painting starting point and all
neighboring pixels of approximately the same color. Annotate prints some text on
the image.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_fill(image, color, point = "+1+1", fuzz = 0, refcolor = NULL)

image_annotate(
  image,
  text,
  gravity = "northwest",
  location = "+0+0",
  degrees = 0,
  size = 10,
  font = "",
  style = "normal",
  weight = 400,
  kerning = 0,
  decoration = NULL,
  color = NULL,
  strokecolor = NULL,
  strokewidth = NULL,
  boxcolor = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="painting_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="painting_+3A_color">color</code></td>
<td>
<p>a valid <a href="https://www.imagemagick.org/Magick++/Color.html">color string</a> such as
<code>"navyblue"</code> or <code>"#000080"</code>. Use <code>"none"</code> for transparency.</p>
</td></tr>
<tr><td><code id="painting_+3A_point">point</code></td>
<td>
<p>a geometry_point string indicating the starting point of the flood-fill</p>
</td></tr>
<tr><td><code id="painting_+3A_fuzz">fuzz</code></td>
<td>
<p>relative color distance (value between 0 and 100) to be considered similar
in the filling algorithm</p>
</td></tr>
<tr><td><code id="painting_+3A_refcolor">refcolor</code></td>
<td>
<p>if set, <code>fuzz</code> color distance will be measured against this color,
not the color of the starting <code>point</code>. Any color (within <code>fuzz</code> color distance of
the given <code>refcolor</code>), connected to starting point will be replaced with the <code>color</code>.
If the pixel at the starting point does not itself match the given <code>refcolor</code>
(according to <code>fuzz</code>) then no action will be taken.</p>
</td></tr>
<tr><td><code id="painting_+3A_text">text</code></td>
<td>
<p>character vector of length equal to 'image' or length 1</p>
</td></tr>
<tr><td><code id="painting_+3A_gravity">gravity</code></td>
<td>
<p>string with
<a href="https://www.imagemagick.org/Magick++/Enumerations.html#GravityType">gravity</a>
value from <a href="#topic+gravity_types">gravity_types</a>.</p>
</td></tr>
<tr><td><code id="painting_+3A_location">location</code></td>
<td>
<p>geometry string with location relative to <code>gravity</code></p>
</td></tr>
<tr><td><code id="painting_+3A_degrees">degrees</code></td>
<td>
<p>rotates text around center point</p>
</td></tr>
<tr><td><code id="painting_+3A_size">size</code></td>
<td>
<p>font-size in pixels</p>
</td></tr>
<tr><td><code id="painting_+3A_font">font</code></td>
<td>
<p>string with font family such as <code>"sans"</code>, <code>"mono"</code>, <code>"serif"</code>,
<code>"Times"</code>, <code>"Helvetica"</code>, <code>"Trebuchet"</code>, <code>"Georgia"</code>, <code>"Palatino"</code> or <code>"Comic Sans"</code>.
See <code><a href="#topic+magick_fonts">magick_fonts()</a></code> for what is available.</p>
</td></tr>
<tr><td><code id="painting_+3A_style">style</code></td>
<td>
<p>value of <a href="#topic+style_types">style_types</a> for example <code>"italic"</code></p>
</td></tr>
<tr><td><code id="painting_+3A_weight">weight</code></td>
<td>
<p>thickness of the font, 400 is normal and 700 is bold, see <code><a href="#topic+magick_fonts">magick_fonts()</a></code>.</p>
</td></tr>
<tr><td><code id="painting_+3A_kerning">kerning</code></td>
<td>
<p>increases or decreases whitespace between letters</p>
</td></tr>
<tr><td><code id="painting_+3A_decoration">decoration</code></td>
<td>
<p>value of <a href="#topic+decoration_types">decoration_types</a> for example <code>"underline"</code></p>
</td></tr>
<tr><td><code id="painting_+3A_strokecolor">strokecolor</code></td>
<td>
<p>a <a href="https://www.imagemagick.org/Magick++/Color.html">color string</a>
adds a stroke (border around the text)</p>
</td></tr>
<tr><td><code id="painting_+3A_strokewidth">strokewidth</code></td>
<td>
<p>set the strokewidth of the border around the text</p>
</td></tr>
<tr><td><code id="painting_+3A_boxcolor">boxcolor</code></td>
<td>
<p>a <a href="https://www.imagemagick.org/Magick++/Color.html">color string</a>
for background color that annotation text is rendered on.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that more sophisticated drawing mechanisms are available via the graphics
device using <a href="#topic+image_draw">image_draw</a>.
</p>
<p>Setting a font, weight, style only works if your imagemagick is compiled
with fontconfig support.
</p>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>logo &lt;- image_read("logo:")
logo &lt;- image_background(logo, 'white')
image_fill(logo, "pink", point = "+450+400")
image_fill(logo, "pink", point = "+450+400", fuzz = 25)
# Add some text to an image
image_annotate(logo, "This is a test")
image_annotate(logo, "CONFIDENTIAL", size = 50, color = "red", boxcolor = "pink",
 degrees = 30, location = "+100+100")

# Setting fonts requires fontconfig support (and that you have the font)
image_annotate(logo, "The quick brown fox", font = "monospace", size = 50)
</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>magrittr</dt><dd><p><code><a href="magrittr.html#topic+pipe">%&gt;%</a></code></p>
</dd>
</dl>

<hr>
<h2 id='segmentation'>Image Segmentation</h2><span id='topic+segmentation'></span><span id='topic+image_connect'></span><span id='topic+image_split'></span><span id='topic+image_fuzzycmeans'></span>

<h3>Description</h3>

<p>Basic image segmentation like connected components labelling, blob extraction and fuzzy c-means
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_connect(image, connectivity = 4)

image_split(image, keep_color = TRUE)

image_fuzzycmeans(image, min_pixels = 1, smoothing = 1.5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="segmentation_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="segmentation_+3A_connectivity">connectivity</code></td>
<td>
<p>number neighbor colors which are considered part of a unique object</p>
</td></tr>
<tr><td><code id="segmentation_+3A_keep_color">keep_color</code></td>
<td>
<p>if TRUE the output images retain the color of the input pixel.
If FALSE all matching pixels are set black to retain only the image mask.</p>
</td></tr>
<tr><td><code id="segmentation_+3A_min_pixels">min_pixels</code></td>
<td>
<p>the minimum number of pixels contained in a hexahedra before it can be considered valid (expressed as a percentage)</p>
</td></tr>
<tr><td><code id="segmentation_+3A_smoothing">smoothing</code></td>
<td>
<p>the smoothing threshold which eliminates noise in the second derivative of the histogram (higher values gives smoother second derivative)</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li> <p><a href="#topic+image_connect">image_connect</a> Connect adjacent pixels with the same pixel intensities to do blob extraction
</p>
</li>
<li> <p><a href="#topic+image_split">image_split</a> Splits the image according to pixel intensities
</p>
</li>
<li> <p><a href="#topic+image_fuzzycmeans">image_fuzzycmeans</a> Fuzzy c-means segmentation of the histogram of color components
</p>
</li></ul>

<p><a href="#topic+image_connect">image_connect</a> performs blob extraction by scanning the image, pixel-by-pixel from top-left
to bottom-right where regions of adjacent pixels which share the same set of intensity values
get combined.
</p>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+transform">transform</a>()</code>,
<code><a href="#topic+video">video</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Split an image by color
img &lt;- image_quantize(logo, 4)
layers &lt;- image_split(img)
layers

# This returns the original image
image_flatten(layers)

# From the IM website
objects &lt;- image_convert(demo_image("objects.gif"), colorspace = "Gray")
objects


# Split image in blobs of connected pixel levels
if(magick_config()$version &gt; "6.9.0"){
objects |&gt;
  image_connect(connectivity = 4) |&gt;
  image_split()

# Fuzzy c-means
image_fuzzycmeans(logo)

logo |&gt;
  image_convert(colorspace = "HCL") |&gt;
  image_fuzzycmeans(smoothing = 5)
}

</code></pre>

<hr>
<h2 id='thresholding'>Image thresholding</h2><span id='topic+thresholding'></span><span id='topic+image_threshold'></span><span id='topic+image_level'></span><span id='topic+image_lat'></span>

<h3>Description</h3>

<p>Thresholding an image can be used for simple and straightforward image segmentation.
The function <code><a href="#topic+image_threshold">image_threshold()</a></code> allows to do black and white thresholding whereas
<code><a href="#topic+image_lat">image_lat()</a></code> performs local adaptive thresholding.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_threshold(
  image,
  type = c("black", "white"),
  threshold = "50%",
  channel = NULL
)

image_level(
  image,
  black_point = 0,
  white_point = 100,
  mid_point = 1,
  channel = NULL
)

image_lat(image, geometry = "10x10+5%")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="thresholding_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="thresholding_+3A_type">type</code></td>
<td>
<p>type of thresholding, either one of lat, black or white (see details below)</p>
</td></tr>
<tr><td><code id="thresholding_+3A_threshold">threshold</code></td>
<td>
<p>pixel intensity threshold percentage for black or white thresholding</p>
</td></tr>
<tr><td><code id="thresholding_+3A_channel">channel</code></td>
<td>
<p>a value of <code><a href="#topic+channel_types">channel_types()</a></code> specifying which channel(s) to set</p>
</td></tr>
<tr><td><code id="thresholding_+3A_black_point">black_point</code></td>
<td>
<p>value between 0 and 100, the darkest color in the image</p>
</td></tr>
<tr><td><code id="thresholding_+3A_white_point">white_point</code></td>
<td>
<p>value between 0 and 100, the lightest color in the image</p>
</td></tr>
<tr><td><code id="thresholding_+3A_mid_point">mid_point</code></td>
<td>
<p>value between 0 and 10 used for gamma correction</p>
</td></tr>
<tr><td><code id="thresholding_+3A_geometry">geometry</code></td>
<td>
<p>pixel window plus offset for LAT algorithm</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li> <p><code>image_threshold(type = "black")</code>: Forces all pixels below the threshold into black while leaving all pixels
at or above the threshold unchanged
</p>
</li>
<li> <p><code>image_threshold(type = "white")</code>: Forces all pixels above the threshold into white while leaving all pixels
at or below the threshold unchanged
</p>
</li>
<li> <p><code>image_lat()</code>: Local Adaptive Thresholding. Looks in a box (width x height) around the
pixel neighborhood if the pixel value is bigger than the average minus an offset.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>test &lt;- image_convert(logo, colorspace = "Gray")
image_threshold(test, type = "black", threshold = "50%")
image_threshold(test, type = "white", threshold = "50%")

# Turn image into BW
test |&gt;
  image_threshold(type = "white", threshold = "50%") |&gt;
  image_threshold(type = "black", threshold = "50%")

# adaptive thresholding
image_lat(test, geometry = '10x10+5%')
</code></pre>

<hr>
<h2 id='transform'>Image Transform</h2><span id='topic+transform'></span><span id='topic+image_trim'></span><span id='topic+image_chop'></span><span id='topic+image_rotate'></span><span id='topic+image_resize'></span><span id='topic+image_scale'></span><span id='topic+image_sample'></span><span id='topic+image_crop'></span><span id='topic+image_extent'></span><span id='topic+image_flip'></span><span id='topic+image_flop'></span><span id='topic+image_deskew'></span><span id='topic+image_deskew_angle'></span><span id='topic+image_page'></span><span id='topic+image_repage'></span><span id='topic+image_orient'></span><span id='topic+image_shear'></span><span id='topic+image_distort'></span>

<h3>Description</h3>

<p>Basic transformations like rotate, resize, crop and flip. The <a href="#topic+geometry">geometry</a> syntax
is used to specify sizes and areas.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_trim(image, fuzz = 0)

image_chop(image, geometry)

image_rotate(image, degrees)

image_resize(image, geometry = NULL, filter = NULL)

image_scale(image, geometry = NULL)

image_sample(image, geometry = NULL)

image_crop(image, geometry = NULL, gravity = NULL, repage = TRUE)

image_extent(image, geometry, gravity = "center", color = "none")

image_flip(image)

image_flop(image)

image_deskew(image, threshold = 40)

image_deskew_angle(image, threshold = 40)

image_page(image, pagesize = NULL, density = NULL)

image_repage(image)

image_orient(image, orientation = NULL)

image_shear(image, geometry = "10x10", color = "none")

image_distort(image, distortion = "perspective", coordinates, bestfit = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transform_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="transform_+3A_fuzz">fuzz</code></td>
<td>
<p>relative color distance (value between 0 and 100) to be considered similar
in the filling algorithm</p>
</td></tr>
<tr><td><code id="transform_+3A_geometry">geometry</code></td>
<td>
<p>a <a href="#topic+geometry">geometry</a> string specifying area (for cropping) or size (for resizing).</p>
</td></tr>
<tr><td><code id="transform_+3A_degrees">degrees</code></td>
<td>
<p>value between 0 and 360 for how many degrees to rotate</p>
</td></tr>
<tr><td><code id="transform_+3A_filter">filter</code></td>
<td>
<p>string with <a href="https://www.imagemagick.org/Magick++/Enumerations.html#FilterTypes">filter</a>
type from: <a href="#topic+filter_types">filter_types</a></p>
</td></tr>
<tr><td><code id="transform_+3A_gravity">gravity</code></td>
<td>
<p>string with
<a href="https://www.imagemagick.org/Magick++/Enumerations.html#GravityType">gravity</a>
value from <a href="#topic+gravity_types">gravity_types</a>.</p>
</td></tr>
<tr><td><code id="transform_+3A_repage">repage</code></td>
<td>
<p>resize the canvas to the cropped area</p>
</td></tr>
<tr><td><code id="transform_+3A_color">color</code></td>
<td>
<p>a valid <a href="https://www.imagemagick.org/Magick++/Color.html">color string</a> such as
<code>"navyblue"</code> or <code>"#000080"</code>. Use <code>"none"</code> for transparency.</p>
</td></tr>
<tr><td><code id="transform_+3A_threshold">threshold</code></td>
<td>
<p>straightens an image. A threshold of 40 works for most images.</p>
</td></tr>
<tr><td><code id="transform_+3A_pagesize">pagesize</code></td>
<td>
<p>geometry string with preferred size and location of an image canvas</p>
</td></tr>
<tr><td><code id="transform_+3A_density">density</code></td>
<td>
<p>geometry string with vertical and horizontal resolution in pixels of
the image. Specifies an image density when decoding a Postscript or PDF.</p>
</td></tr>
<tr><td><code id="transform_+3A_orientation">orientation</code></td>
<td>
<p>string to set image orientation one of the <a href="#topic+orientation_types">orientation_types</a>.
If <code>NULL</code> it applies auto-orientation which tries to infer the correct orientation
from the Exif data.</p>
</td></tr>
<tr><td><code id="transform_+3A_distortion">distortion</code></td>
<td>
<p>string to set image orientation one of the <a href="#topic+distort_types">distort_types</a>.</p>
</td></tr>
<tr><td><code id="transform_+3A_coordinates">coordinates</code></td>
<td>
<p>numeric vector (typically of length 12) with distortion coordinates</p>
</td></tr>
<tr><td><code id="transform_+3A_bestfit">bestfit</code></td>
<td>
<p>if set to <code>TRUE</code> the size of the output image can be different from input</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For details see <a href="https://www.imagemagick.org/Magick++/STL.html">Magick++ STL</a>
documentation. Short descriptions:
</p>

<ul>
<li> <p><a href="#topic+image_trim">image_trim</a> removes edges that are the background color from the image.
</p>
</li>
<li> <p><a href="#topic+image_chop">image_chop</a> removes vertical or horizontal subregion of image.
</p>
</li>
<li> <p><a href="#topic+image_crop">image_crop</a> cuts out a subregion of original image
</p>
</li>
<li> <p><a href="#topic+image_rotate">image_rotate</a> rotates and increases size of canvas to fit rotated image.
</p>
</li>
<li> <p><a href="#topic+image_deskew">image_deskew</a> auto rotate to correct skewed images
</p>
</li>
<li> <p><a href="#topic+image_resize">image_resize</a> resizes using custom <a href="https://www.imagemagick.org/Magick++/Enumerations.html#FilterTypes">filterType</a>
</p>
</li>
<li> <p><a href="#topic+image_scale">image_scale</a> and <a href="#topic+image_sample">image_sample</a> resize using simple ratio and pixel sampling algorithm.
</p>
</li>
<li> <p><a href="#topic+image_flip">image_flip</a> and <a href="#topic+image_flop">image_flop</a> invert image vertically and horizontally
</p>
</li></ul>

<p>The most powerful resize function is <a href="#topic+image_resize">image_resize</a> which allows for setting
a custom resize filter. Output of <a href="#topic+image_scale">image_scale</a> is similar to <code>image_resize(img, filter = "point")</code>.
</p>
<p>For resize operations it holds that if no <code>geometry</code> is specified, all frames
are rescaled to match the top frame.
</p>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+video">video</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>logo &lt;- image_read("logo:")
logo &lt;- image_scale(logo, "400")
image_trim(logo)
image_chop(logo, "100x20")
image_rotate(logo, 45)
# Small image
rose &lt;- image_convert(image_read("rose:"), "png")

# Resize to 400 width or height:
image_resize(rose, "400x")
image_resize(rose, "x400")

# Resize keeping ratio
image_resize(rose, "400x400")

# Resize, force size losing ratio
image_resize(rose, "400x400!")

# Different filters
image_resize(rose, "400x", filter = "Triangle")
image_resize(rose, "400x", filter = "Point")
# simple pixel resize
image_scale(rose, "400x")
image_sample(rose, "400x")
image_crop(logo, "400x400+200+200")
image_extent(rose, '200x200', color = 'pink')
image_flip(logo)
image_flop(logo)
skewed &lt;- image_rotate(logo, 5)
deskewed &lt;- image_deskew(skewed)
attr(deskewed, 'angle')
if(magick_config()$version &gt; "6.8.6")
  image_orient(logo)
image_shear(logo, "10x10")
building &lt;- demo_image('building.jpg')
image_distort(building, 'perspective', c(7,40,4,30,4,124,4,123,85,122,100,123,85,2,100,30))
</code></pre>

<hr>
<h2 id='video'>Write Video</h2><span id='topic+video'></span><span id='topic+image_write_video'></span><span id='topic+image_write_gif'></span>

<h3>Description</h3>

<p>High quality video / gif exporter based on external packages <a href="gifski.html#topic+gifski">gifski</a>
and <a href="av.html#topic+encoding">av</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_write_video(image, path = NULL, framerate = 10, ...)

image_write_gif(image, path = NULL, delay = 1/10, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="video_+3A_image">image</code></td>
<td>
<p>magick image object returned by <code><a href="#topic+image_read">image_read()</a></code> or <code><a href="#topic+image_graph">image_graph()</a></code></p>
</td></tr>
<tr><td><code id="video_+3A_path">path</code></td>
<td>
<p>filename of the output gif or video. This is also the return value.</p>
</td></tr>
<tr><td><code id="video_+3A_framerate">framerate</code></td>
<td>
<p>frames per second, passed to <a href="av.html#topic+encoding">av_encode_video</a></p>
</td></tr>
<tr><td><code id="video_+3A_...">...</code></td>
<td>
<p>additional parameters passed to <a href="av.html#topic+encoding">av_encode_video</a> and
<a href="gifski.html#topic+gifski">gifski</a>.</p>
</td></tr>
<tr><td><code id="video_+3A_delay">delay</code></td>
<td>
<p>duration of each frame in seconds (inverse of framerate)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This requires an image with multiple frames. The GIF exporter accomplishes the same
thing as <a href="#topic+image_animate">image_animate</a> but much faster and with better quality.
</p>


<h3>See Also</h3>

<p>Other image: 
<code><a href="#topic+_index_">_index_</a></code>,
<code><a href="#topic+analysis">analysis</a></code>,
<code><a href="#topic+animation">animation</a></code>,
<code><a href="#topic+attributes">attributes</a>()</code>,
<code><a href="#topic+color">color</a></code>,
<code><a href="#topic+composite">composite</a></code>,
<code><a href="#topic+defines">defines</a></code>,
<code><a href="#topic+device">device</a></code>,
<code><a href="#topic+edges">edges</a></code>,
<code><a href="#topic+editing">editing</a></code>,
<code><a href="#topic+effects">effects</a>()</code>,
<code><a href="#topic+fx">fx</a></code>,
<code><a href="#topic+geometry">geometry</a></code>,
<code><a href="#topic+morphology">morphology</a></code>,
<code><a href="#topic+ocr">ocr</a></code>,
<code><a href="#topic+options">options</a>()</code>,
<code><a href="#topic+painting">painting</a></code>,
<code><a href="#topic+segmentation">segmentation</a></code>,
<code><a href="#topic+transform">transform</a>()</code>
</p>

<hr>
<h2 id='wizard'>Example Images</h2><span id='topic+wizard'></span><span id='topic+logo'></span><span id='topic+rose'></span><span id='topic+granite'></span>

<h3>Description</h3>

<p>Example images included with ImageMagick:
</p>


<h3>Usage</h3>

<pre><code class='language-R'>logo
</code></pre>


<h3>Format</h3>

<p>An object of class <code>magick-image</code> of length 1.
</p>


<h3>Details</h3>


<ul>
<li> <p><code>logo</code>: ImageMagick Logo, 640x480
</p>
</li>
<li> <p><code>wizard</code>: ImageMagick Wizard, 480x640
</p>
</li>
<li> <p><code>rose</code> : Picture of a rose, 70x46
</p>
</li>
<li> <p><code>granite</code> : Granite texture pattern, 128x128
</p>
</li></ul>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
