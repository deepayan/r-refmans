<!DOCTYPE html><html><head><title>Help for package gsynth</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gsynth}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#gsynth-package'><p>Generalized Synthetic Control Method</p></a></li>
<li><a href='#cumuEff'><p>Calculate Cumulative or sub-gr Treatment Effects</p></a></li>
<li><a href='#gsynth'><p>Generalized Synthetic Control Method</p></a></li>
<li><a href='#gsynth-internal'><p>Internal Gsynth Functions</p></a></li>
<li><a href='#interFE'><p>Interactive Fixed Effects Models</p></a></li>
<li><a href='#plot.gsynth'><p>Plotting</p></a></li>
<li><a href='#print.gsynth'><p>Print Results</p></a></li>
<li><a href='#print.interFE'><p>Print Results</p></a></li>
<li><a href='#simdata'><p>simdata</p></a></li>
<li><a href='#turnout'><p>turnout</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Generalized Synthetic Control Method</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-08-06</td>
</tr>
<tr>
<td>Author:</td>
<td>Yiqing Xu, Licheng Liu</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Yiqing Xu &lt;yiqingxu@stanford.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides causal inference with interactive fixed-effect models. It imputes counterfactuals for each treated unit using control group information based on a linear interactive fixed effects model that incorporates unit-specific intercepts interacted with time-varying coefficients. This method generalizes the synthetic control method to the case of multiple treated units and variable treatment periods, and improves efficiency and interpretability. This version supports unbalanced panels and implements the matrix completion method. </td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://yiqingxu.org/packages/gsynth/gsynth_examples.html">https://yiqingxu.org/packages/gsynth/gsynth_examples.html</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.12.3), ggplot2 (&ge; 2.1.0), GGally (&ge; 1.0.1),
future (&ge; 1.21.0), doRNG (&ge; 1.8.2), doParallel (&ge; 1.0.10),
foreach (&ge; 1.4.3), abind (&ge; 1.4-0), mvtnorm (&ge; 1.0-6), MASS
(&ge; 7.3.47), lfe (&ge; 1.0-0)</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>A C++11 compiler.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppArmadillo</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-08-06 07:06:05 UTC; xyq</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-08-06 07:50:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='gsynth-package'>Generalized Synthetic Control Method</h2><span id='topic+gsynth-package'></span>

<h3>Description</h3>

<p>Implements the generalized synthetic control method based on interactive fixed effect models.</p>


<h3>Details</h3>

<p>Implements the generalized synthetic control method. It imputes
counterfactuals for each treated unit using control group
information based on a linear interactive fixed effects model that
incorporates unit-specific intercepts interacted with time-varying
coefficients.
</p>
<p>See <code><a href="#topic+gsynth">gsynth</a></code> for details.
</p>


<h3>Author(s)</h3>

<p>Yiqing Xu &lt;yiqingxu@stanfprd.edu&gt;, Stanford University
</p>
<p>Licheng Liu &lt;liulch@mit.edu&gt;, M.I.T.
</p>


<h3>References</h3>

<p>Yiqing Xu. 2017. &quot;Generalized Synthetic Control Method: Causal Inference
with Interactive Fixed Effects Models.&quot; Political Analysis, Vol. 25, Iss. 1, January 2017, pp. 57-76. 
</p>
<p>For more details, see <a href="https://yiqingxu.org/packages/gsynth/gsynth_examples.html">https://yiqingxu.org/packages/gsynth/gsynth_examples.html</a>.
</p>

<hr>
<h2 id='cumuEff'>Calculate Cumulative or sub-gr Treatment Effects</h2><span id='topic+cumuEff'></span>

<h3>Description</h3>

<p>Calculate Cumulative or sub-gr Treatment Effects</p>


<h3>Usage</h3>

<pre><code class='language-R'>cumuEff(x, cumu = TRUE, id = NULL, period = NULL)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cumuEff_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+gsynth">gsynth</a></code> object.</p>
</td></tr>
<tr><td><code id="cumuEff_+3A_cumu">cumu</code></td>
<td>
<p>a logical flag indicating whether to calculate cumulative effects or not.</p>
</td></tr>
<tr><td><code id="cumuEff_+3A_id">id</code></td>
<td>
<p>a string vector speicfying a sub-group of treated units that treatment 
effects are to be averaged on. </p>
</td></tr>
<tr><td><code id="cumuEff_+3A_period">period</code></td>
<td>
<p>a two-element numeric vector specifying the range of term during which treatment effects are to be accumulated. If left blank, atts at all post-treatment 
periods will be calculated.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>catt</code></td>
<td>
<p>esimated (cumulative) atts.</p>
</td></tr>
<tr><td><code>est.catt</code></td>
<td>
<p>uncertainty estimates for <code>catt</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Yiqing Xu &lt;yiqingxu@stanfprd.edu&gt;, Stanford University
</p>
<p>Licheng Liu &lt;liulch@mit.edu&gt;, M.I.T.
</p>


<h3>References</h3>

  
<p>Jushan Bai. 2009. &quot;Panel Data Models with Interactive Fixed
Effects.&quot; Econometrica 77:1229&ndash;1279.
</p>
<p>Yiqing Xu. 2017. &quot;Generalized Synthetic Control Method: Causal Inference
with Interactive Fixed Effects Models.&quot; Political Analysis, Vol. 25, 
Iss. 1, January 2017, pp. 57-76. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+gsynth">gsynth</a></code>
</p>

<hr>
<h2 id='gsynth'>Generalized Synthetic Control Method</h2><span id='topic+gsynth'></span>

<h3>Description</h3>

<p>Implements the generalized synthetic control method based
on interactive fixed effect models.</p>


<h3>Usage</h3>

<pre><code class='language-R'>gsynth(formula=NULL, data, Y, D, X = NULL, na.rm = FALSE, 
       index, weight = NULL, force = "unit", cl = NULL, r = 0, 
       lambda = NULL, nlambda = 10, CV = TRUE, criterion = "mspe",
       k = 5, EM = FALSE, estimator = "ife",
       se = FALSE, nboots = 200, 
       inference = "nonparametric", cov.ar = 1, parallel = TRUE, 
       cores = NULL, tol = 0.001, seed = NULL, min.T0 = 5, 
       alpha = 0.05, normalize = FALSE)  
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gsynth_+3A_formula">formula</code></td>
<td>
<p>an object of class &quot;formula&quot;: a symbolic description of
the model to be fitted.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_data">data</code></td>
<td>
<p>a data frame (must be with a dichotomous treatment but balanced
is not required).</p>
</td></tr>
<tr><td><code id="gsynth_+3A_y">Y</code></td>
<td>
<p>outcome.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_d">D</code></td>
<td>
<p>treatment.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_x">X</code></td>
<td>
<p>time-varying covariates.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_na.rm">na.rm</code></td>
<td>
<p>a logical flag indicating whether to list-wise delete
missing data. The algorithm will report an error if missing data
exist.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_index">index</code></td>
<td>
<p>a two-element string vector specifying the unit (group)
and time indicators. Must be of length 2.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_weight">weight</code></td>
<td>
<p>a string specifying the weighting variable(if any) to estimate 
the weighted average treatment effect. Default is <code>weight = NULL</code>.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_force">force</code></td>
<td>
<p>a string indicating whether unit or time fixed effects will be
imposed. Must be one of the following,
&quot;none&quot;, &quot;unit&quot;, &quot;time&quot;, or &quot;two-way&quot;. The default is &quot;unit&quot;.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_cl">cl</code></td>
<td>
<p>a string indicator the cluster variable. The default value is 
<code>NULL</code>. If <code>cl = NULL</code>, bootstrap will be blocked at unit level
(only for non-parametric bootstrap).</p>
</td></tr>
<tr><td><code id="gsynth_+3A_r">r</code></td>
<td>
<p>an integer specifying the number of factors. If <code>CV = TRUE</code>, 
the cross validation procedure will select the optimal number of
factors from <code>r</code> to 5.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_lambda">lambda</code></td>
<td>
<p>a single or sequence of positive numbers specifying the 
hyper-parameter sequence for matrix completion method. If <code>lambda</code> 
is a sequence and <code>CV = 1</code>, cross-validation will be performed.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_nlambda">nlambda</code></td>
<td>
<p>an integer specifying the length of hyper-parameter sequence 
for matrix completion method. Default is <code>nlambda = 10</code>.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_cv">CV</code></td>
<td>
<p>a logical flag indicating whether cross-validation will be
performed to select the optimal number of factors or hyper-parameter 
in matrix completion algorithm. If <code>r</code> is not specified, the procedure
will search through <code>r = 0</code> to <code>5</code>.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_criterion">criterion</code></td>
<td>
<p>a string specifying the criteria used for determining the number
of factors. Choose from <code>c("mspe", "pc")</code>. &quot;mspe&quot; stands for the mean squared 
prediction error obtained through the loocv procedure, and &quot;pc&quot; stands for a kind 
of information criterion. If <code>criterion = "pc"</code>, the number of factors that 
minimize &quot;pc&quot; will be selected. Default is <code>criterion = "mspe"</code>.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_k">k</code></td>
<td>
<p>a positive integer specifying cross-validation times for matrix 
completion algorithm. Default is <code>k = 5</code>.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_em">EM</code></td>
<td>
<p>a logical flag indicating whether an Expectation Maximization
algorithm will be used (Gobillon and Magnac 2016).</p>
</td></tr>
<tr><td><code id="gsynth_+3A_estimator">estimator</code></td>
<td>
<p>a string that controls the estimation method, either 
&quot;ife&quot; (interactive fixed effects) or &quot;mc&quot; (the matrix completion method).</p>
</td></tr>
<tr><td><code id="gsynth_+3A_se">se</code></td>
<td>
<p>a logical flag indicating whether uncertainty estimates will
be produced.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_nboots">nboots</code></td>
<td>
<p>an integer specifying the number of bootstrap
runs. Ignored if <code>se = FALSE</code>.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_inference">inference</code></td>
<td>
<p>a string specifying which type of inferential method
will be used, either &quot;parametric&quot; or &quot;nonparametric&quot;. &quot;parametric&quot; is
recommended when the number of treated units is small. parametric bootstrap 
is not valid for matrix completion method. Ignored if <code>estimator = "mc"</code>.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_cov.ar">cov.ar</code></td>
<td>
<p>an integer specifying order of the auto regression process
that the residuals follow. Used for parametric bootstrap procedure when data
is in the form of unbalanced panel. The default value is 1.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_parallel">parallel</code></td>
<td>
<p>a logical flag indicating whether parallel computing
will be used in bootstrapping and/or cross-validation. Ignored if 
<code>se = FALSE</code>.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_cores">cores</code></td>
<td>
<p>an integer indicating the number of cores to be used in
parallel computing. If not specified, the algorithm will use the
maximum number of logical cores of your computer (warning: this
could prevent you from multi-tasking on your computer).</p>
</td></tr>
<tr><td><code id="gsynth_+3A_tol">tol</code></td>
<td>
<p>a positive number indicating the tolerance level.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_seed">seed</code></td>
<td>
<p>an integer that sets the seed in random number
generation. Ignored if <code>se = FALSE</code> and <code>r</code> is specified.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_min.t0">min.T0</code></td>
<td>
<p>an integer specifying the minimum value of pre-treatment 
periods. Treated units with pre-treatment periods less than that will 
be removed automatically. This item is important for unbalanced panels. 
If users want to perform cross validation procedure to select the optimal 
number of factors from <code>(r.min, r.max)</code>, they should set <code>min.T0</code> 
larger than <code>(r.max+1)</code> if no individual fixed effects or <code>(r.max+2)</code> 
otherwise. If there are too few pre-treatment periods among all treated units, 
a smaller value of <code>r.max</code> is recommended.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_alpha">alpha</code></td>
<td>
<p>a positive number in the range of 0 and 1 specifying significant 
levels for uncertainty estimates. The default value is <code>alpha = 0.05</code>.</p>
</td></tr>
<tr><td><code id="gsynth_+3A_normalize">normalize</code></td>
<td>
<p>a logic flag indicating whether to scale outcome and 
covariates. Useful for accelerating computing speed when magnitude of 
data is large. The default is <code>normalize=FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>gsynth</code> implements the generalized synthetic control method. It
imputes counterfactuals for each treated unit using control group
information based on a linear interactive fixed effects model that
incorporates unit-specific intercepts interacted with time-varying
coefficients. It generalizes the synthetic control method to the case
of multiple treated units and variable treatment periods, and improves
efficiency and interpretability. It allows the treatment to be
correlated with unobserved unit and time heterogeneities under
reasonable modeling assumptions. With a built-in cross-validation
procedure, it avoids specification searches and thus is easy to
implement. Data must be with a dichotomous treatment.
</p>


<h3>Value</h3>

<table>
<tr><td><code>Y.dat</code></td>
<td>
<p>a matrix storing data of the outcome variable.</p>
</td></tr>
<tr><td><code>Y</code></td>
<td>
<p>name of the outcome variable.</p>
</td></tr>
<tr><td><code>D</code></td>
<td>
<p>name of the treatment variable.</p>
</td></tr>
<tr><td><code>X</code></td>
<td>
<p>name of the time-varying control variables.</p>
</td></tr>
<tr><td><code>index</code></td>
<td>
<p>name of the unit and time indicators.</p>
</td></tr>
<tr><td><code>id</code></td>
<td>
<p>a vector of unit IDs.</p>
</td></tr>
<tr><td><code>time</code></td>
<td>
<p>a vector of time periods.</p>
</td></tr>
<tr><td><code>obs.missing</code></td>
<td>
<p>a matrix storing status of each unit at each time point. 
<code>0</code> for missing, <code>1</code> for control group units, <code>2</code> for treat group 
units at pre-treatment period, <code>3</code> for treat group units at post-treatment 
period, and <code>4</code> for removed treated group units. Useful for unbalanced panel data.</p>
</td></tr>
<tr><td><code>id.tr</code></td>
<td>
<p>a vector of IDs for the treatment units.</p>
</td></tr>
<tr><td><code>id.co</code></td>
<td>
<p>a vector of IDs for the control units.</p>
</td></tr>
<tr><td><code>removed.id</code></td>
<td>
<p>a vector of IDs for units that are removed.</p>
</td></tr>
<tr><td><code>D.tr</code></td>
<td>
<p>a matrix of treatment indicator for the treated unit outcome.</p>
</td></tr>
<tr><td><code>I.tr</code></td>
<td>
<p>a matrix of observation indicator for the treated unit outcome.</p>
</td></tr>
<tr><td><code>Y.tr</code></td>
<td>
<p>data of the treated unit outcome.</p>
</td></tr>
<tr><td><code>Y.ct</code></td>
<td>
<p>predicted counterfactuals for the treated units.</p>
</td></tr>
<tr><td><code>Y.co</code></td>
<td>
<p>data of the control unit outcome.</p>
</td></tr>
<tr><td><code>eff</code></td>
<td>
<p>difference between actual outcome and predicted Y(0).</p>
</td></tr>
<tr><td><code>Y.bar</code></td>
<td>
<p>average values of Y.tr, Y.ct, and Y.co over time.</p>
</td></tr>
<tr><td><code>att</code></td>
<td>
<p>average treatment effect on the treated over time (it is averaged 
based on the timing of the treatment if it is different for each unit).</p>
</td></tr>
<tr><td><code>att.avg</code></td>
<td>
<p>average treatment effect on the treated.</p>
</td></tr>
<tr><td><code>force</code></td>
<td>
<p>user specified <code>force</code> option.</p>
</td></tr>
<tr><td><code>sameT0</code></td>
<td>
<p>TRUE if the timing of the treatment is the same.</p>
</td></tr>
<tr><td><code>T</code></td>
<td>
<p>the number of time periods.</p>
</td></tr>
<tr><td><code>N</code></td>
<td>
<p>the total number of units.</p>
</td></tr>
<tr><td><code>p</code></td>
<td>
<p>the number of time-varying observables.</p>
</td></tr>
<tr><td><code>Ntr</code></td>
<td>
<p>the number of treated units.</p>
</td></tr>
<tr><td><code>Nco</code></td>
<td>
<p>the number of control units.</p>
</td></tr>
<tr><td><code>T0</code></td>
<td>
<p>a vector that stores the timing of the treatment for balanced panel
data.</p>
</td></tr>
<tr><td><code>tr</code></td>
<td>
<p>a vector indicating treatment status for each unit.</p>
</td></tr>
<tr><td><code>pre</code></td>
<td>
<p>a matrix indicating the pre-treatment/non-treatment status.</p>
</td></tr>
<tr><td><code>post</code></td>
<td>
<p>a matrix indicating the post-treatment status.</p>
</td></tr>
<tr><td><code>r.cv</code></td>
<td>
<p>the number of factors included in the model &ndash; either
supplied by users or automatically chosen via cross-validation.</p>
</td></tr>
<tr><td><code>lambda.cv</code></td>
<td>
<p>the optimal hyper-parameter in matrix completion method
chosen via cross-validation.</p>
</td></tr>
<tr><td><code>res.co</code></td>
<td>
<p>residuals of the control group units.</p>
</td></tr>
<tr><td><code>beta</code></td>
<td>
<p>coefficients of time-varying observables from the
interactive fixed effect model.</p>
</td></tr>
<tr><td><code>sigma2</code></td>
<td>
<p>the mean squared error of interactive fixed effect model.</p>
</td></tr>
<tr><td><code>IC</code></td>
<td>
<p>the information criterion.</p>
</td></tr>
<tr><td><code>PC</code></td>
<td>
<p>the proposed criterion for determining factor numbers.</p>
</td></tr>
<tr><td><code>est.co</code></td>
<td>
<p>result of the interactive fixed effect model based on
the control group data. An <code><a href="#topic+interFE">interFE</a></code> object.</p>
</td></tr>
<tr><td><code>eff.cnt</code></td>
<td>
<p>difference between actual outcome and predicted Y(0);
rearranged based on the timing of the treatment.</p>
</td></tr>
<tr><td><code>Y.tr.cnt</code></td>
<td>
<p>data of the treated unit outcome, rearranged based on the timing of the treatment.</p>
</td></tr>
<tr><td><code>Y.ct.cnt</code></td>
<td>
<p>data of the predicted Y(0), rearranged based on the timing of the treatment.</p>
</td></tr>
<tr><td><code>MSPE</code></td>
<td>
<p>mean squared prediction error of the cross-validated model.</p>
</td></tr>
<tr><td><code>CV.out</code></td>
<td>
<p>result of the cross-validation procedure.</p>
</td></tr>
<tr><td><code>niter</code></td>
<td>
<p>the number of iterations in the estimation of the
interactive fixed effect model.</p>
</td></tr>
<tr><td><code>factor</code></td>
<td>
<p>estimated time-varying factors.</p>
</td></tr>
<tr><td><code>lambda.co</code></td>
<td>
<p>estimated loadings for the control group.</p>
</td></tr>
<tr><td><code>lambda.tr</code></td>
<td>
<p>estimated loadings for the treatment group.</p>
</td></tr>
<tr><td><code>wgt.implied</code></td>
<td>
<p>estimated weights of each of the control group unit for each of the treatment group unit.</p>
</td></tr>
<tr><td><code>mu</code></td>
<td>
<p>estimated ground mean. </p>
</td></tr>
<tr><td><code>xi</code></td>
<td>
<p>estimated time fixed effects.</p>
</td></tr>
<tr><td><code>alpha.tr</code></td>
<td>
<p>estimated unit fixed effects for the treated units.</p>
</td></tr>
<tr><td><code>alpha.co</code></td>
<td>
<p>estimated unit fixed effects for the control units.</p>
</td></tr>
<tr><td><code>validX</code></td>
<td>
<p>a logic value indicating if multicollinearity exists.</p>
</td></tr>
<tr><td><code>inference</code></td>
<td>
<p>a string indicating bootstrap procedure.</p>
</td></tr>
<tr><td><code>est.att</code></td>
<td>
<p>inference for <code>att</code>.</p>
</td></tr>
<tr><td><code>est.att.avg</code></td>
<td>
<p>inference for <code>att.avg</code>.</p>
</td></tr>
<tr><td><code>est.beta</code></td>
<td>
<p>inference for <code>beta</code>.</p>
</td></tr>
<tr><td><code>est.ind</code></td>
<td>
<p>inference for <code>att</code> of each treated unit.</p>
</td></tr>
<tr><td><code>att.avg.boot</code></td>
<td>
<p>bootstrap results for <code>att.avg</code>.</p>
</td></tr>
<tr><td><code>att.boot</code></td>
<td>
<p>bootstrap results for <code>att</code>.</p>
</td></tr>
<tr><td><code>beta.boot</code></td>
<td>
<p>bootstrap results for <code>beta</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Yiqing Xu &lt;yiqingxu@stanfprd.edu&gt;, Stanford University
</p>
<p>Licheng Liu &lt;liulch@mit.edu&gt;, M.I.T.
</p>


<h3>References</h3>

<p>Laurent Gobillon and Thierry Magnac, 2016.
&quot;Regional Policy Evaluation: Interactive Fixed Effects and Synthetic Controls.&quot;
The Review of Economics and Statistics, July 2016, Vol. 98, No. 3,
pp. 535&ndash;551.
</p>
<p>Yiqing Xu. 2017. &quot;Generalized Synthetic Control Method: Causal Inference
with Interactive Fixed Effects Models.&quot; Political Analysis, Vol. 25, 
Iss. 1, January 2017, pp. 57-76. 
</p>
<p>Athey S, Bayati M, Doudchenko N, et al. Matrix completion methods for causal panel data models[J]. arXiv preprint arXiv:1710.10251, 2017.
</p>
<p>For more details, see <a href="https://yiqingxu.org/packages/gsynth/gsynth_examples.html">https://yiqingxu.org/packages/gsynth/gsynth_examples.html</a>.
</p>
<p>For more details about the matrix completion method, see <a href="https://github.com/susanathey/MCPanel">https://github.com/susanathey/MCPanel</a>. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.gsynth">plot.gsynth</a></code> and <code><a href="#topic+print.gsynth">print.gsynth</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(gsynth)
data(gsynth)
out &lt;- gsynth(Y ~ D + X1 + X2, data = simdata, parallel = FALSE, 
              index = c("id","time"), force = "two-way",
              CV = TRUE, r = c(0, 5), se = FALSE) 
print(out) 
</code></pre>

<hr>
<h2 id='gsynth-internal'>Internal Gsynth Functions</h2><span id='topic+XXinv'></span><span id='topic+beta_iter'></span><span id='topic+data_ub_adj'></span><span id='topic+Y_demean'></span><span id='topic+fe_add'></span><span id='topic+fe_ad_iter'></span><span id='topic+fe_ad_covar_iter'></span><span id='topic+fe_ad_inter_iter'></span><span id='topic+fe_ad_inter_covar_iter'></span><span id='topic+gsynth.default'></span><span id='topic+gsynth.formula'></span><span id='topic+_gsynth_XXinv'></span><span id='topic+_gsynth_beta_iter'></span><span id='topic+_gsynth_inter_fe'></span><span id='topic+_gsynth_inter_fe_ub'></span><span id='topic+_gsynth_inter_fe_mc'></span><span id='topic+_gsynth_data_ub_adj'></span><span id='topic+_gsynth_panel_beta'></span><span id='topic+_gsynth_panel_est'></span><span id='topic+_gsynth_panel_factor'></span><span id='topic+_gsynth_panel_fe'></span><span id='topic+_gsynth_Y_demean'></span><span id='topic+_gsynth_fe_add'></span><span id='topic+_gsynth_fe_ad_iter'></span><span id='topic+_gsynth_fe_ad_covar_iter'></span><span id='topic+_gsynth_fe_ad_inter_iter'></span><span id='topic+_gsynth_fe_ad_inter_covar_iter'></span><span id='topic+interFE.default'></span><span id='topic+interFE.formula'></span><span id='topic+inter_fe'></span><span id='topic+inter_fe_ub'></span><span id='topic+inter_fe_mc'></span><span id='topic+panel_beta'></span><span id='topic+panel_est'></span><span id='topic+panel_factor'></span><span id='topic+panel_fe'></span><span id='topic+synth.boot'></span><span id='topic+synth.core'></span><span id='topic+synth.em'></span><span id='topic+synth.em.cv'></span><span id='topic+synth.mc'></span><span id='topic+res.vcov'></span><span id='topic+ct.adjsut'></span><span id='topic+initialFit'></span>

<h3>Description</h3>

<p>Internal Gsynth functions
</p>


<h3>Details</h3>

<p>These are not to be called by the user (or in some cases are just
waiting for proper documentation to be written :).
</p>

<hr>
<h2 id='interFE'>Interactive Fixed Effects Models</h2><span id='topic+interFE'></span>

<h3>Description</h3>

<p>Estimating interactive fixed effect models.</p>


<h3>Usage</h3>

<pre><code class='language-R'>interFE(formula = NULL, data, Y, X, index, r = 0, force = "none",
         se = TRUE, nboots = 500, seed = NULL, tol = 1e-3, normalize = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="interFE_+3A_formula">formula</code></td>
<td>
<p>an object of class &quot;formula&quot;: a symbolic description of the model to be fitted. </p>
</td></tr>
<tr><td><code id="interFE_+3A_data">data</code></td>
<td>
<p>a data frame (must be with a dichotomous treatment but balanced
is not required).</p>
</td></tr>
<tr><td><code id="interFE_+3A_y">Y</code></td>
<td>
<p>outcome.</p>
</td></tr>
<tr><td><code id="interFE_+3A_x">X</code></td>
<td>
<p>time-varying covariates.</p>
</td></tr>
<tr><td><code id="interFE_+3A_index">index</code></td>
<td>
<p>a two-element string vector specifying the unit (group)
and time indicators. Must be of length 2.</p>
</td></tr>
<tr><td><code id="interFE_+3A_r">r</code></td>
<td>
<p>an integer specifying the number of factors.</p>
</td></tr>
<tr><td><code id="interFE_+3A_force">force</code></td>
<td>
<p>a string indicating whether unit or time fixed effects will be
imposed. Must be one of the following,
&quot;none&quot;, &quot;unit&quot;, &quot;time&quot;, or &quot;two-way&quot;. The default is &quot;unit&quot;.</p>
</td></tr>
<tr><td><code id="interFE_+3A_se">se</code></td>
<td>
<p>a logical flag indicating whether uncertainty estimates will
be produced via bootstrapping.</p>
</td></tr>
<tr><td><code id="interFE_+3A_nboots">nboots</code></td>
<td>
<p>an integer specifying the number of bootstrap
runs. Ignored if <code>se = FALSE</code>.</p>
</td></tr>
<tr><td><code id="interFE_+3A_seed">seed</code></td>
<td>
<p>an integer that sets the seed in random number
generation. Ignored if  <code>se = FALSE</code> and <code>r</code> is specified.</p>
</td></tr>
<tr><td><code id="interFE_+3A_tol">tol</code></td>
<td>
<p>a numeric value that specifies tolerate level.</p>
</td></tr>
<tr><td><code id="interFE_+3A_normalize">normalize</code></td>
<td>
<p>a logic flag indicating whether to scale outcome and 
covariates. Useful for accelerating computing speed when magnitude of data is large.The default is <code>normalize=FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>interFE</code> estimates interactive fixed effect models proposed by
Bai (2009).
</p>


<h3>Value</h3>

<table>
<tr><td><code>beta</code></td>
<td>
<p>estimated coefficients.</p>
</td></tr>
<tr><td><code>mu</code></td>
<td>
<p>estimated grand mean.</p>
</td></tr>
<tr><td><code>factor</code></td>
<td>
<p>estimated factors.</p>
</td></tr>
<tr><td><code>lambda</code></td>
<td>
<p>estimated factor loadings.</p>
</td></tr>
<tr><td><code>VNT</code></td>
<td>
<p>a diagonal matrix that consists of the r eigenvalues.</p>
</td></tr>
<tr><td><code>niter</code></td>
<td>
<p>the number of iteration before convergence.</p>
</td></tr>
<tr><td><code>alpha</code></td>
<td>
<p>estimated unit fixed effect (if <code>force</code> is &quot;unit&quot; or &quot;two-way&quot;).</p>
</td></tr>
<tr><td><code>xi</code></td>
<td>
<p>estimated time fixed effect (if <code>force</code> is &quot;time&quot; or &quot;two-way&quot;).</p>
</td></tr>
<tr><td><code>residuals</code></td>
<td>
<p>residuals of the estimated interactive fixed effect model.</p>
</td></tr>
<tr><td><code>sigma2</code></td>
<td>
<p>mean squared error of the residuals.</p>
</td></tr>
<tr><td><code>IC</code></td>
<td>
<p>the information criterion.</p>
</td></tr>
<tr><td><code>ValidX</code></td>
<td>
<p>a logical flag specifying whether there are valid covariates.</p>
</td></tr>
<tr><td><code>dat.Y</code></td>
<td>
<p>a matrix storing data of the outcome variable.</p>
</td></tr>
<tr><td><code>dat.X</code></td>
<td>
<p>an array storing data of the independent variables.</p>
</td></tr>
<tr><td><code>Y</code></td>
<td>
<p>name of the outcome variable.</p>
</td></tr>
<tr><td><code>X</code></td>
<td>
<p>name of the time-varying control variables.</p>
</td></tr>
<tr><td><code>index</code></td>
<td>
<p>name of the unit and time indicators.</p>
</td></tr>
<tr><td><code>est.table</code></td>
<td>
<p>a table of the estimation results.</p>
</td></tr>
<tr><td><code>est.boot</code></td>
<td>
<p>a matrix storing results from bootstraps.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Yiqing Xu &lt;yiqingxu@stanfprd.edu&gt;, Stanford University
</p>
<p>Licheng Liu &lt;liulch@mit.edu&gt;, M.I.T.
</p>


<h3>References</h3>

<p>Jushan Bai. 2009. &quot;Panel Data Models with Interactive Fixed
Effects.&quot; Econometrica 77:1229&ndash;1279.</p>


<h3>See Also</h3>

<p><code><a href="#topic+print.interFE">print.interFE</a></code> and <code><a href="#topic+gsynth">gsynth</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(gsynth)
data(gsynth)
d &lt;- simdata[-(1:150),] # remove the treated units
out &lt;- interFE(Y ~ X1 + X2, data = d, index=c("id","time"),
               r = 2, force = "two-way", nboots = 50)
</code></pre>

<hr>
<h2 id='plot.gsynth'>Plotting</h2><span id='topic+plot.gsynth'></span>

<h3>Description</h3>

<p>Visualizes estimation results of the generalized synthetic control method.</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gsynth'
plot(x, type = "gap", xlim = NULL, ylim = NULL,
            xlab = NULL, ylab = NULL, legendOff = FALSE, raw = "none",
            main = NULL, nfactors = NULL, id = NULL, axis.adjust = FALSE, 
            theme.bw = TRUE, shade.post = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.gsynth_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+gsynth">gsynth</a></code> object.</p>
</td></tr>
<tr><td><code id="plot.gsynth_+3A_type">type</code></td>
<td>
<p>a string that specifies the type of the plot. Must be one
of the following: &quot;gap&quot; (plotting the average treatment effect on
the treated; &quot;raw&quot; (plotting the raw data); &quot;counterfactual&quot;, or &quot;ct&quot; for short,   
(plotting predicted Y(0)'s); &quot;factors&quot; (plotting estimated factors);    
&quot;loadings&quot; (plotting the distribution of estimated factor
loadings); &quot;missing&quot; (plotting status of each unit at each time point).</p>
</td></tr>
<tr><td><code id="plot.gsynth_+3A_xlim">xlim</code></td>
<td>
<p>a two-element numeric vector specifying the range of x-axis. When 
class of time variable is string, must specify not original value but a 
counting number e.g. <code>xlim=c(1,30)</code>.</p>
</td></tr>
<tr><td><code id="plot.gsynth_+3A_ylim">ylim</code></td>
<td>
<p>a two-element numeric vector specifying the range of y-axis.</p>
</td></tr>
<tr><td><code id="plot.gsynth_+3A_xlab">xlab</code></td>
<td>
<p>a string indicating the label of the x-axis.</p>
</td></tr>
<tr><td><code id="plot.gsynth_+3A_ylab">ylab</code></td>
<td>
<p>a string indicating the label of the y-axis.</p>
</td></tr>
<tr><td><code id="plot.gsynth_+3A_legendoff">legendOff</code></td>
<td>
<p>a logical flag controlling whether to show the legend.</p>
</td></tr>
<tr><td><code id="plot.gsynth_+3A_raw">raw</code></td>
<td>
<p>a string indicating whether or how raw data for the outcome
variable will be shown
in the &quot;counterfactual&quot; plot. Ignored if <code>type</code> is not
&quot;counterfactual&quot;. Must be one of the following: &quot;none&quot; (not showing
the raw data); &quot;band&quot; (showing the middle 90 percentiles of the raw
data); and &quot;all&quot; (showing the raw data as they are).</p>
</td></tr>
<tr><td><code id="plot.gsynth_+3A_main">main</code></td>
<td>
<p>a string that controls the title of the plot. If not
supplied, no title will be shown.</p>
</td></tr>
<tr><td><code id="plot.gsynth_+3A_nfactors">nfactors</code></td>
<td>
<p>a positive integer that specifies the number of
factors to be shown. The maximum number if 4. Ignored if <code>type</code>
is not &quot;factors&quot;</p>
</td></tr>
<tr><td><code id="plot.gsynth_+3A_id">id</code></td>
<td>
<p>a unit identifier of which the predicted counterfactual or
the difference between actual and predicted counterfactual is to be shown. 
It can also be a vector specifying units to be plotted if <code>type=="missing"</code>
when data magnitude is large. Ignored if <code>type</code> is none of 
&quot;missing&quot;, &quot;counterfactual&quot;, &quot;gap&quot;.</p>
</td></tr>
<tr><td><code id="plot.gsynth_+3A_axis.adjust">axis.adjust</code></td>
<td>
<p>a logical flag indicating whether to adjust labels on x-axis. 
Useful when class of time variable is string and data magnitude is large.</p>
</td></tr>
<tr><td><code id="plot.gsynth_+3A_theme.bw">theme.bw</code></td>
<td>
<p>a logical flag indicating whether to use a black/white theme.</p>
</td></tr>
<tr><td><code id="plot.gsynth_+3A_shade.post">shade.post</code></td>
<td>
<p>a logical flag controlling whether to shade the post-treatment periods.</p>
</td></tr>
<tr><td><code id="plot.gsynth_+3A_...">...</code></td>
<td>
<p>other argv.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>plot.gsynth</code> visualizes the raw data used by, or estimation
results obtained from, the generalized synthetic control method.
</p>


<h3>Author(s)</h3>

<p>Yiqing Xu &lt;yiqingxu@stanfprd.edu&gt;, Stanford University
</p>
<p>Licheng Liu &lt;liulch@mit.edu&gt;, M.I.T.
</p>


<h3>References</h3>

<p>Yiqing Xu. 2017. &quot;Generalized Synthetic Control Method: Causal Inference
with Interactive Fixed Effects Models.&quot; Political Analysis, Vol. 25, 
Iss. 1, January 2017, pp. 57-76. 
</p>
<p>See <a href="https://yiqingxu.org/packages/gsynth/gsynth_examples.html">https://yiqingxu.org/packages/gsynth/gsynth_examples.html</a> for
more detailed information.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+gsynth">gsynth</a></code> and <code><a href="#topic+print.gsynth">print.gsynth</a></code>
</p>

<hr>
<h2 id='print.gsynth'>Print Results</h2><span id='topic+print.gsynth'></span>

<h3>Description</h3>

<p>Print results of the generalized synthetic control method.</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gsynth'
print(x, ...)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.gsynth_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+gsynth">gsynth</a></code> object.</p>
</td></tr>
<tr><td><code id="print.gsynth_+3A_...">...</code></td>
<td>
<p>other argv.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Yiqing Xu &lt;yiqingxu@stanfprd.edu&gt;, Stanford University
</p>
<p>Licheng Liu &lt;liulch@mit.edu&gt;, M.I.T.
</p>


<h3>References</h3>

<p>Yiqing Xu. 2017. &quot;Generalized Synthetic Control Method: Causal Inference
with Interactive Fixed Effects Models.&quot; Political Analysis, Vol. 25, 
Iss. 1, January 2017, pp. 57-76. 
</p>
<p>For more details, see <a href="https://yiqingxu.org/packages/gsynth/gsynth_examples.html">https://yiqingxu.org/packages/gsynth/gsynth_examples.html</a>. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+gsynth">gsynth</a></code> and <code><a href="#topic+plot.gsynth">plot.gsynth</a></code>
</p>

<hr>
<h2 id='print.interFE'>Print Results</h2><span id='topic+print.interFE'></span>

<h3>Description</h3>

<p>Print  results of interactive fixed effects estimation.</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'interFE'
print(x, ...)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.interFE_+3A_x">x</code></td>
<td>
<p>an <code><a href="#topic+interFE">interFE</a></code> object.</p>
</td></tr>
<tr><td><code id="print.interFE_+3A_...">...</code></td>
<td>
<p>other argv.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Yiqing Xu &lt;yiqingxu@stanfprd.edu&gt;, Stanford University
</p>
<p>Licheng Liu &lt;liulch@mit.edu&gt;, M.I.T.
</p>


<h3>References</h3>

<p>Jushan Bai. 2009. &quot;Panel Data Models with Interactive Fixed
Effects.&quot; Econometrica 77:1229&ndash;1279.</p>


<h3>See Also</h3>

<p><code><a href="#topic+interFE">interFE</a></code> and <code><a href="#topic+gsynth">gsynth</a></code></p>

<hr>
<h2 id='simdata'>simdata</h2><span id='topic+simdata'></span>

<h3>Description</h3>

<p>A simulated dataset.</p>


<h3>Format</h3>

<p>dataframe</p>


<h3>References</h3>

<p>Yiqing Xu. 2017. &quot;Generalized Synthetic Control Method: Causal Inference
with Interactive Fixed Effects Models.&quot; Political Analysis, Vol. 25, 
Iss. 1, January 2017, pp. 57-76. 
</p>
<p>For more details, see <a href="https://yiqingxu.org/packages/gsynth/gsynth_examples.html">https://yiqingxu.org/packages/gsynth/gsynth_examples.html</a>. 
</p>

<hr>
<h2 id='turnout'>turnout</h2><span id='topic+turnout'></span>

<h3>Description</h3>

<p>State-level voter turnout data.</p>


<h3>Format</h3>

<p>dataframe</p>


<h3>References</h3>

<p>Melanie Jean Springer. 2014. How the States Shaped the
Nation: American Electoral Institutions and Voter Turnout,
1920-2000. University of Chicago Press.
</p>
<p>Yiqing Xu. 2017. &quot;Generalized Synthetic Control Method: Causal Inference
with Interactive Fixed Effects Models.&quot; Political Analysis, Vol. 25, 
Iss. 1, January 2017, pp. 57-76. 
</p>
<p>For more details, see <a href="https://yiqingxu.org/packages/gsynth/gsynth_examples.html">https://yiqingxu.org/packages/gsynth/gsynth_examples.html</a>. 
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
