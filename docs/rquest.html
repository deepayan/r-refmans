<!DOCTYPE html><html lang="en"><head><title>Help for package rquest</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rquest}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#rquest-package'><p>rquest: Hypothesis Tests for Quantiles and Quantile-Based Measures</p></a></li>
<li><a href='#q.test'><p>q.test</p></a></li>
<li><a href='#qcov'><p>qcov</p></a></li>
<li><a href='#qineq'><p>qineq</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Hypothesis Tests for Quantiles and Quantile-Based Measures</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions to conduct hypothesis tests and derive confidence intervals 
    for quantiles, linear combinations of quantiles, 
    ratios of dependent linear combinations and differences 
    and ratios of all of the above for comparisons between independent samples. 
    Additionally, quantile-based measures of inequality are also considered.</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>stats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/shenal-dkumara/rquest">https://github.com/shenal-dkumara/rquest</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/shenal-dkumara/rquest/issues">https://github.com/shenal-dkumara/rquest/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-09 01:04:29 UTC; a1228273</td>
</tr>
<tr>
<td>Author:</td>
<td>Shenal Dedduwakumara [aut, cre],
  Luke Prendergast [aut],
  Robert Staudte [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Shenal Dedduwakumara &lt;shenal.dedduwakumara@adelaide.edu.au&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-09 03:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='rquest-package'>rquest: Hypothesis Tests for Quantiles and Quantile-Based Measures</h2><span id='topic+rquest'></span><span id='topic+rquest-package'></span>

<h3>Description</h3>

<p>Functions to conduct hypothesis tests and derive confidence intervals for quantiles, linear combinations of quantiles, ratios of dependent linear combinations and differences and ratios of all of the above for comparisons between independent samples. Additionally, quantile-based measures of inequality are also considered.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Shenal Dedduwakumara <a href="mailto:shenal.dedduwakumara@adelaide.edu.au">shenal.dedduwakumara@adelaide.edu.au</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Luke Prendergast <a href="mailto:luke.prendergast@latrobe.edu.au">luke.prendergast@latrobe.edu.au</a>
</p>
</li>
<li><p> Robert Staudte <a href="mailto:r.staudte@latrobe.edu.au">r.staudte@latrobe.edu.au</a>
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/shenal-dkumara/rquest">https://github.com/shenal-dkumara/rquest</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/shenal-dkumara/rquest/issues">https://github.com/shenal-dkumara/rquest/issues</a>
</p>
</li></ul>


<hr>
<h2 id='q.test'>q.test</h2><span id='topic+q.test'></span>

<h3>Description</h3>

<p>carry out hypothesis tests and obtain associated confidence intervals for linear combinations of quantiles,
and ratios of such linear combinations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>q.test(
  x,
  y = NULL,
  measure = "median",
  u = NULL,
  coef = NULL,
  u2 = NULL,
  coef2 = NULL,
  quantile.type = 8,
  var.method = "qor",
  alternative = c("two.sided", "less", "greater"),
  conf.level = 0.95,
  true.q = 0,
  log.transf = FALSE,
  back.transf = FALSE,
  min.q = -Inf,
  p = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="q.test_+3A_x">x</code></td>
<td>
<p>a numeric vector of data values.</p>
</td></tr>
<tr><td><code id="q.test_+3A_y">y</code></td>
<td>
<p>an optional second vector of data values for two-sample testing.</p>
</td></tr>
<tr><td><code id="q.test_+3A_measure">measure</code></td>
<td>
<p>a character string specifying the quantile measure to be estimated (See details).</p>
</td></tr>
<tr><td><code id="q.test_+3A_u">u</code></td>
<td>
<p>a numeric vector of probability values in [0, 1] indicating all quantiles to be estimated.</p>
</td></tr>
<tr><td><code id="q.test_+3A_coef">coef</code></td>
<td>
<p>a vector or matrix with two rows specifying the coefficients that define the linear combinations (coefficients must match the corresponding probability values in u). If coef is a vector then a single linear combination (LC) is computed. If it is a matrix, then first row defines the numerator LS and the second the denominator LC.</p>
</td></tr>
<tr><td><code id="q.test_+3A_u2">u2</code></td>
<td>
<p>a numeric vector of probability values in [0, 1] indicating all quantiles to be estimated for the denominator.</p>
</td></tr>
<tr><td><code id="q.test_+3A_coef2">coef2</code></td>
<td>
<p>a vector specifying the coefficients that define the linear combination for the denominator.  This is can be used as an alternative to defining coef as matrix for ratios of linear combinations.</p>
</td></tr>
<tr><td><code id="q.test_+3A_quantile.type">quantile.type</code></td>
<td>
<p>argument for the quantile function.  Default is set to 8 so that output is consistent with default quantile function use and other functions such as IQR (see help file for <code>quantile()</code>
for more details)</p>
</td></tr>
<tr><td><code id="q.test_+3A_var.method">var.method</code></td>
<td>
<p>approach use to estimate the quantile density function.  Either &quot;qor&quot;(default) or &quot;density&quot; (See details).</p>
</td></tr>
<tr><td><code id="q.test_+3A_alternative">alternative</code></td>
<td>
<p>a character string for alternative hypothesis equal to one of &quot;two.sided&quot;, &quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="q.test_+3A_conf.level">conf.level</code></td>
<td>
<p>coverage for the estimated confidence interval.</p>
</td></tr>
<tr><td><code id="q.test_+3A_true.q">true.q</code></td>
<td>
<p>a numeric value for the true value under the null hypothesis test.</p>
</td></tr>
<tr><td><code id="q.test_+3A_log.transf">log.transf</code></td>
<td>
<p>boolean indicating whether the a log transformation of the measure is to be used (i.e., estimates of the log of the measure are computed).</p>
</td></tr>
<tr><td><code id="q.test_+3A_back.transf">back.transf</code></td>
<td>
<p>boolean indicating whether the measure and estimates should be back-transformed  to the original scale using exp.</p>
</td></tr>
<tr><td><code id="q.test_+3A_min.q">min.q</code></td>
<td>
<p>the lower bound for a one-sided confidence interval when alternative  argument if &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="q.test_+3A_p">p</code></td>
<td>
<p>optional value in (0, 1) for Bowley's generalized skewness coefficient.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function <code>q.test</code> performs hypothesis tests and calculates confidence intervals for linear combinations of quantiles.
The quantile measures that can be estimated are specified in the <code>measure</code> argument and are listed below.
</p>

<ul>
<li> <p><code>median</code>: The default choice.
</p>
</li>
<li> <p><code>iqr</code>: The interquartile range.
</p>
</li>
<li> <p><code>rCViqr</code>: The robust Coefficient of Variation measure (Arachchige et al.,2022)
</p>
</li>
<li> <p><code>bowley</code>, <code>groenR</code> and <code>groenL</code>: These choices are for Bowley's skew coefficient,
for the generalized measure, and the right and left skew measures by Groeneveld and Meeden (Groeneveld &amp; Meeden, 1984, 2009). For each of these measures, the user may specify the choice of p using argument <code>p</code>.  If this is not used, then the default is <code>p=0.25</code>.
</p>
</li>
<li> <p><code>moors</code>: This Moors kurtosis measure (Moors, 1988).
</p>
</li>
<li> <p><code>lqw</code> and <code>rqw</code>: These are for the robust left and right tail weights (Brys et al., 2006).
</p>
</li>
<li> <p><code>qrxxyy</code>: A character string consisting of the first two characters &quot;qr&quot; and followed by four numbers will request a ratio of dependents quantiles (i.e. different quantiles from the same sample).The first two number digits (in place of &quot;xx&quot;) will indicate the quantile for the numerator, and the second two numerical digits &quot;yy&quot; for the denominator.  For example, <code>qr9010</code> will estimate and test the ratio Q(0.9)/Q(0.1).
</p>
</li></ul>

<p>The default <code>var.method="qor"</code> is to estimate the probability density function directly using the lognormal Quantile Optimality Ratio (QOR)
for choosing a suitable bandwidth (Prendergast &amp; Staudte,2016). Alternatively, the variances can be
estimated by inverting a density estimator evaluated at the quantiles and this can be done using <code>var.method = "density"</code>.
</p>
<p>Additional to using a text string with argument measure to indicate which quantile-based measure is to be used (of those included for the <code>q.test</code> function),
users can also define and request their own.  For example, while the median is the default for a single quantile, other quantiles can also be requested
(e.g., <code>u = 0.25</code> will request the first quartile).  This option is also included for linear combinations of quantiles and ratios of linear combinations,
which can be done in two ways.  For a single linear combination, argument <code>u</code> is the vector of probability values defining the quantiles to be used,
and argument <code>coef</code> is a vector of coefficients for the linear combination.  If a ratio is needed, then <code>u</code> and <code>coef</code> are used for the numerator and <code>u2</code> and <code>coef2</code>
for the denominator linear combination.  Alternatively, a single <code>u</code> can be used to identify all quantiles for the ratio, and then <code>coef</code> can be a matrix (2 rows)
whose first row specifies the coefficients for the numerator and the second row for the denominator. For more information and further examples,
see Prendergast, Dedduwakumara &amp; Staudte (2024), and the example code below shows how to obtain results for
the robust CVs using all three approaches (to achieve identical results).
</p>
<p>Further details on confidence intervals, including coverage properties of, can be found for ratios of dependent quantiles (Prendergast &amp; Staudte, 2017),
ratios of independent quantiles and IQRs (Arachchige et al., 2021) and for robust CVs (Arachchige et al., 2022).
</p>


<h3>Value</h3>

<p>hypothesis test results and associated confidence interval (a list with class &quot;htest&quot;)
</p>


<h3>References</h3>

<p>Arachchige, C. N., Cairns, M., &amp; Prendergast, L. A. (2021). Interval estimators for ratios of independent quantiles and interquantile ranges.
Communications in Statistics-Simulation and Computation, 50(12), 3914-3930.
</p>
<p>Arachchige, C.N.P.G., Prendergast, L.A., &amp; Staudte, R.G. (2022). Robust Analogs to the Coefficient of
Variation. Journal of Applied Statistics, 49(2), 268–290.
</p>
<p>Brys, G., Hubert, M., &amp; Struyf, A. (2006). Robust measures of tail weight. Computational Statistics &amp; Data
Analysis, 50(3), 733–759.
</p>
<p>Groeneveld, R. A., &amp; Meeden, G. (1984). Measuring skewness and kurtosis. Journal of the Royal Statistical
Society Series D: The Statistician, 33(4), 391–399.
</p>
<p>Groeneveld, R. A., &amp; Meeden, G. (2009). An improved skewness measure. Metron, 67(3), 325.
</p>
<p>Hyndman, R.J., &amp; Fan, Y. (1996). Sample quantiles in statistical packages. The American Statistician, 50(4),
361–365.
</p>
<p>Moors, J. J. A. (1988). A quantile alternative for kurtosis. Journal of the Royal Statistical Society:
Series D (The Statistician), 37(1), 25–32.
</p>
<p>Prendergast, L. A., &amp; Staudte, R. G. (2016). Exploiting the quantile optimality ratio in finding confidence intervals for quantiles. Stat, 5(1), 70-81
</p>
<p>Prendergast, L. A., &amp; Staudte, R. G. (2017). When large n is not enough–distribution-free interval estimators for ratios of quantiles.
The Journal of Economic Inequality, 15, 277-293.
</p>
<p>Prendergast, L. A., Dedduwakumara, D.S. &amp; Staudte, R.G. (2024) rquest: An R package for hypothesis tests and confidence intervals
for quantiles and summary measures based on quantiles, preprint, pages 1-13
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#  Create some data
x &lt;- c(8.43,7.08,8.79,8.88,7.87,5.94,8.79,5.46,8.11,7.08)
y &lt;- c(13.44,13.65,14.77,9.51,14.07,10.92,11.59,13.42,8.93,10.88)

# One sample hypothesis test for the IQR
q.test(x, measure = "iqr")

# Two samples hypothesis test for robust coefficient variations (0.75*IQR/median)
# with log transformation and back-transformation to the ratio scale,.
q.test(x, y, measure = "rCViqr", log.transf = TRUE, back.transf = TRUE)

# The same two samples hypothesis test for robust coefficient variations (0.75*IQR/median)
# by using 'u',''u2','coef' and 'coef2' arguments.
u&lt;-c(0.25,0.75)
coef&lt;-0.75*c(-1,1)
u2&lt;-0.5
coef2&lt;-1
q.test(x,y,u=u,u2=u2,coef=coef,coef2=coef2,log.transf=TRUE,back.transf=TRUE)

# The same two samples hypothesis test for robust coefficient variations (0.75*IQR/median)
# by using only 'u' and 'coef' arguments.
u&lt;-c(0.25,0.5,0.75)
num &lt;- 0.75*c(-1,0,1)
den &lt;- c(0,1,0)
coef &lt;- rbind(num, den)
q.test(x,y,u=u,coef=coef,log.transf=TRUE,back.transf=TRUE)
</code></pre>

<hr>
<h2 id='qcov'>qcov</h2><span id='topic+qcov'></span>

<h3>Description</h3>

<p>compute a covariance matrix consisting of variances (on the diagonal) for quantile estimates and covariances (off-diagonal) between different quantile estimates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qcov(x, u, method = "qor", FUN = qor.ln, quantile.type = 8, bw.correct = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qcov_+3A_x">x</code></td>
<td>
<p>a numeric vector of data values.</p>
</td></tr>
<tr><td><code id="qcov_+3A_u">u</code></td>
<td>
<p>a numeric vector of probability values in [0, 1]) specifying the quantiles to be estimate.</p>
</td></tr>
<tr><td><code id="qcov_+3A_method">method</code></td>
<td>
<p>approach use to estimate the quantile density function. Either &quot;qor&quot; or &quot;density&quot;.</p>
</td></tr>
<tr><td><code id="qcov_+3A_fun">FUN</code></td>
<td>
<p>QOR function for the log-normal</p>
</td></tr>
<tr><td><code id="qcov_+3A_quantile.type">quantile.type</code></td>
<td>
<p>argument for the quantile function.  Default is set to 8 so that output is consistent with default quantile function use and other functions such as IQR (see help file for <code>quantile()</code>
for more details)</p>
</td></tr>
<tr><td><code id="qcov_+3A_bw.correct">bw.correct</code></td>
<td>
<p>replace bw by the values of v when v&lt;=bw (see Prendergast &amp; Staudte (2016b) for more details)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function computes a covariance matrix for a vector of quantile estimators.
This is done via estimating the inverted density function evaluated at the respective quantiles.
The default for this is to use the quantile optimality ratio (QOR) approach (Prendergast &amp; Staudte, 2016) which computes an optimal bandwidth.
Alternatively, using <code>method = "density"</code> will use the generic density function to estimate the density.
</p>


<h3>Value</h3>

<p>a covariance matrix consisting of variances (on the diagonal) for quantile estimates and covariances (off-diagonal) between different quantile estimates
</p>


<h3>References</h3>

<p>Prendergast, L. A., &amp; Staudte, R. G. (2016). Exploiting the quantile optimality ratio in finding confidence intervals for quantiles. Stat, 5(1), 70-81
</p>
<p>Prendergast, L. A., Dedduwakumara, D.S. &amp; Staudte, R.G. (2024) rquest: An R package for hypothesis tests and confidence intervals
for quantiles and summary measures based on quantiles, preprint, pages 1-13
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create some data
set.seed(1234)
x &lt;- rnorm(100)

# Compute the variance-covariance matrix for sample quartiles.
qcov(x, c(0.25, 0.5, 0.75))
</code></pre>

<hr>
<h2 id='qineq'>qineq</h2><span id='topic+qineq'></span>

<h3>Description</h3>

<p>carry out hypothesis tests and obtain associated confidence intervals for quantile based inequality measures
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qineq(
  x,
  y = NULL,
  J = 100,
  measure = "QRI",
  alternative = c("two.sided", "less", "greater"),
  quantile.type = 8,
  var.method = "qor",
  conf.level = 0.95,
  true.ineq = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qineq_+3A_x">x</code></td>
<td>
<p>a numeric vector of data values.</p>
</td></tr>
<tr><td><code id="qineq_+3A_y">y</code></td>
<td>
<p>an optional second vector of data values for two-sample testing.</p>
</td></tr>
<tr><td><code id="qineq_+3A_j">J</code></td>
<td>
<p>number of grid points</p>
</td></tr>
<tr><td><code id="qineq_+3A_measure">measure</code></td>
<td>
<p>quantile based inequality measure to be used.  Either &quot;QRI&quot; (default) or &quot;G2&quot;.(See details).</p>
</td></tr>
<tr><td><code id="qineq_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis, must be one of &quot;two.sided&quot; (default), &quot;greater&quot; or &quot;less&quot;.</p>
</td></tr>
<tr><td><code id="qineq_+3A_quantile.type">quantile.type</code></td>
<td>
<p>argument for the quantile function.  Default is set to 8 so that output is consistent with default quantile function use and other functions such as IQR (see help file for <code>quantile()</code>
for more details)</p>
</td></tr>
<tr><td><code id="qineq_+3A_var.method">var.method</code></td>
<td>
<p>approach use to estimate the quantile density function.  Either &quot;qor&quot;(default) or &quot;density&quot;.(See details).</p>
</td></tr>
<tr><td><code id="qineq_+3A_conf.level">conf.level</code></td>
<td>
<p>coverage for the estimated confidence interval.</p>
</td></tr>
<tr><td><code id="qineq_+3A_true.ineq">true.ineq</code></td>
<td>
<p>the specified hypothesized value of the inequality measure or the difference of the inequality depending on whether it was a one-sample test or a two-sample test.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function performs hypothesis testing and calculates the corresponding confidence intervals for inequality measures based on quantiles.
The available options for quantile based measures in argument <code>measure</code> are shown below.
</p>

<ul>
<li> <p><code>QRI</code>: Quantile Ratio Index (Prendergast &amp; Staudte, 2018). This is the default choice.
</p>
</li>
<li> <p><code>G2</code>:  Quantile variant of the Gini index (Prendergast &amp; Staudte, 2016a).
</p>
</li></ul>

<p>The default <code>var.method="qor"</code> is to estimate the probability density function directly using the lognormal Quantile Optimality Ratio (QOR)
for choosing a suitable bandwidth (Prendergast &amp; Staudte,2016b). Alternatively, the variances can be
estimated by inverting a density estimator evaluated at the quantiles and this can be done using <code>var.method = "density"</code>.
</p>
<p>For more information and further examples, see Prendergast, Dedduwakumara &amp; Staudte (2024)
</p>


<h3>Value</h3>

<p>hypothesis test results and associated confidence interval (a list with class &quot;htest&quot;)
</p>


<h3>References</h3>

<p>Prendergast, L.A., &amp; Staudte, R.G. (2016a). Quantile versions of the Lorenz curve. Electronic Journal of
Statistics, 10(2), 1896 – 1926.
</p>
<p>Prendergast, L. A., &amp; Staudte, R. G. (2016b). Exploiting the quantile optimality ratio in finding confidence intervals for quantiles. Stat, 5(1), 70-81
</p>
<p>Prendergast, L. A., &amp; Staudte, R. G. (2018). A simple and effective inequality measure. The American Statistician, 72(4), 328-343.
</p>
<p>Prendergast, L. A., Dedduwakumara, D.S. &amp; Staudte, R.G. (2024) rquest: An R package for hypothesis tests and confidence intervals
for quantiles and summary measures based on quantiles, preprint, pages 1-13
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create some data
x &lt;- c(8.43,7.08,8.79,8.88,7.87,5.94,8.79,5.46,8.11,7.08)
y &lt;- c(13.44,13.65,14.77,9.51,14.07,10.92,11.59,13.42,8.93,10.88)

# Two sample hypothesis test for the QRI measure
qineq(x,y)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
