<!DOCTYPE html><html lang="en-GB"><head><title>Help for package IgorR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {IgorR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#IgorR-package'><p>Read binary files saved by Igor Pro (including Neuromatic data)</p></a></li>
<li><a href='#IgorR-private'><p>Private functions in IgorR Package</p></a></li>
<li><a href='#read.ibw'><p>Read binary files in the Igor Binary Wave format (IBW)</p></a></li>
<li><a href='#read.pxp'><p>Reads an Igor Pro Packed Experiment (.pxp) file</p></a></li>
<li><a href='#ReadAllNclampLogTables'><p>Read all Nclamp log tables from a directory into a list</p></a></li>
<li><a href='#ReadNclampLogTable'><p>Read the log table produced by Nclamp acquisition software for Igor</p></a></li>
<li><a href='#SummariseSweepFile'><p>Extract summary information from an Nclamp/Igor Sweep File</p></a></li>
<li><a href='#SweepFilesToDataFrame'><p>Summarise multiple sweep files into a single dataframe</p></a></li>
<li><a href='#tsp.igorwave'><p>Return tsp attribute of Igor wave (start, end, frequency)</p></a></li>
<li><a href='#UpdateSweepDataFrame'><p>Update the CSV file summarising the sweeps in an Nclamp data folder</p></a></li>
<li><a href='#WaveToTimeSeries'><p>Convert an Igor wave (wave list) loaded by read.ibw into an R time series</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Read Binary Files Saved by 'Igor Pro' (Including 'Neuromatic'
Data)</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides function to read data from the 'Igor Pro' data analysis
    program by 'Wavemetrics'. The data formats supported are 'Igor' packed 
    experiment format ('pxp') and 'Igor' binary wave ('ibw'). See: 
    <a href="https://www.wavemetrics.com/">https://www.wavemetrics.com/</a> for details. Also includes functions to load 
    special 'pxp' files produced by the 'Igor Pro' 'Neuromatic' and 'Nclamp' 
    packages for recording and analysing neuronal data. See 
    <a href="https://github.com/SilverLabUCL/NeuroMatic">https://github.com/SilverLabUCL/NeuroMatic</a> for details.</td>
</tr>
<tr>
<td>Imports:</td>
<td>bitops, tools, timechange</td>
</tr>
<tr>
<td>Suggests:</td>
<td>spelling, testthat</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jefferis/IgorR">https://github.com/jefferis/IgorR</a>,
<a href="https://jefferis.github.io/IgorR/">https://jefferis.github.io/IgorR/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jefferis/IgorR/issues">https://github.com/jefferis/IgorR/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-08-23 09:30:04 UTC; jefferis</td>
</tr>
<tr>
<td>Author:</td>
<td>Gregory Jefferis <a href="https://orcid.org/0000-0002-0587-9355"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Thomas Braun <a href="https://orcid.org/0000-0002-1416-2065"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Gregory Jefferis &lt;jefferis@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-08-28 08:20:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='IgorR-package'>Read binary files saved by Igor Pro (including Neuromatic data)</h2><span id='topic+IgorR-package'></span><span id='topic+IgorR'></span>

<h3>Description</h3>

<p>This package provides function to read data from the Igor Pro data analysis
program by Wavemetrics. The data formats supported are Igor packed experiment
format (<code>.pxp</code>) and Igor binary wave (<code>.ibw</code>). See:
<a href="https://www.wavemetrics.com/">https://www.wavemetrics.com/</a> for details.
</p>


<h3>Details</h3>

<p>It also includes some functions to load special pxp files produced by the
Neuromatic/Nclamp packages for recording and analysing neuronal #data. See
<a href="https://github.com/SilverLabUCL/NeuroMatic">https://github.com/SilverLabUCL/NeuroMatic</a> for details.
</p>
<p>Key functions in the package include <code><a href="#topic+read.ibw">read.ibw</a></code>,
<code><a href="#topic+read.pxp">read.pxp</a></code>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Gregory Jefferis <a href="mailto:jefferis@gmail.com">jefferis@gmail.com</a> (<a href="https://orcid.org/0000-0002-0587-9355">ORCID</a>)
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Thomas Braun [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/jefferis/IgorR">https://github.com/jefferis/IgorR</a>
</p>
</li>
<li> <p><a href="https://jefferis.github.io/IgorR/">https://jefferis.github.io/IgorR/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/jefferis/IgorR/issues">https://github.com/jefferis/IgorR/issues</a>
</p>
</li></ul>


<hr>
<h2 id='IgorR-private'>Private functions in IgorR Package</h2><span id='topic+IgorR-private'></span><span id='topic+.ReadPackedHeader'></span>

<h3>Description</h3>

<p><code>.ReadPackedHeader</code> reads the short record header from the
current location in a PXP file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.ReadPackedHeader(con, endian)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="IgorR-private_+3A_con">con</code></td>
<td>
<p>an R connection to the file we are reading</p>
</td></tr>
<tr><td><code id="IgorR-private_+3A_endian">endian</code></td>
<td>
<p>either little or big</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that the <code>recordType</code> will be one of the constants from
Igor's enum <code>PackedFileRecordType</code>
</p>


<h3>Value</h3>

<p>a list containing information about the current record
</p>


<h3>Author(s)</h3>

<p>jefferis
</p>

<hr>
<h2 id='read.ibw'>Read binary files in the Igor Binary Wave format (IBW)</h2><span id='topic+read.ibw'></span>

<h3>Description</h3>

<p>Read binary files in the Igor Binary Wave format (IBW)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.ibw(
  wavefile,
  Verbose = FALSE,
  ReturnTimeSeries = FALSE,
  MakeWave = FALSE,
  HeaderOnly = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read.ibw_+3A_wavefile">wavefile</code></td>
<td>
<p>either a character vector containing the path to a file or an
R <a href="base.html#topic+connection">connection</a>.</p>
</td></tr>
<tr><td><code id="read.ibw_+3A_verbose">Verbose</code></td>
<td>
<p>if <code>TRUE</code>, print status information while reading the
file.</p>
</td></tr>
<tr><td><code id="read.ibw_+3A_returntimeseries">ReturnTimeSeries</code></td>
<td>
<p>if <code>TRUE</code>, return as an R time series (package
<code><a href="stats.html#topic+ts">ts</a></code>).</p>
</td></tr>
<tr><td><code id="read.ibw_+3A_makewave">MakeWave</code></td>
<td>
<p>if <code>TRUE</code>, assign wave to a list in the global user
environment.</p>
</td></tr>
<tr><td><code id="read.ibw_+3A_headeronly">HeaderOnly</code></td>
<td>
<p>if <code>TRUE</code>, only return the header of the Igor Wave.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector containing the wave data or, if <code>MakeWave == TRUE</code>,
returns the name of a new R vector containing the data which has been made
in the user environment
</p>


<h3>Author(s)</h3>

<p>jefferis
</p>


<h3>See Also</h3>

<p>Other igor-io: 
<code><a href="#topic+WaveToTimeSeries">WaveToTimeSeries</a>()</code>,
<code><a href="#topic+read.pxp">read.pxp</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># return a list containing the wave
wavedata=read.ibw(system.file("igor","version5.ibw",package="IgorR")) 
sum(wavedata)

# make a list containing the wave's data in the users's environment
wavename=read.ibw(system.file("igor","version5.ibw",package="IgorR"),MakeWave=TRUE) 
sum(get(wavename))
</code></pre>

<hr>
<h2 id='read.pxp'>Reads an Igor Pro Packed Experiment (.pxp) file</h2><span id='topic+read.pxp'></span>

<h3>Description</h3>

<p>Note that PXP files are only partially documented so some contents cannot be 
parsed (e.g. image data). This function currently reads data records (Igor 
waves and variables), history, procedures, recreation macros and plain text 
notebooks. Formatted notebooks cannot be read.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.pxp(
  pxpfile,
  regex,
  ReturnTimeSeries = FALSE,
  Verbose = FALSE,
  StructureOnly = FALSE,
  ExtractText = FALSE,
  IgorPlatform = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read.pxp_+3A_pxpfile">pxpfile</code></td>
<td>
<p>character vector naming a PXP file or an R <a href="base.html#topic+connection">connection</a>.</p>
</td></tr>
<tr><td><code id="read.pxp_+3A_regex">regex</code></td>
<td>
<p>if <code>TRUE</code>, only read records (e.g. waves) in the PXP file
whose names match a <a href="base.html#topic+regex">regex</a>.</p>
</td></tr>
<tr><td><code id="read.pxp_+3A_returntimeseries">ReturnTimeSeries</code></td>
<td>
<p>if <code>TRUE</code>, Igor waves are returned as a
<code>link{ts}</code> object with sensible x scaling (<code>FALSE</code> by default).</p>
</td></tr>
<tr><td><code id="read.pxp_+3A_verbose">Verbose</code></td>
<td>
<p>whether to print information to console during loading 
(numeric values are also allowed 0=none, 1=basic, 2=all).</p>
</td></tr>
<tr><td><code id="read.pxp_+3A_structureonly">StructureOnly</code></td>
<td>
<p>(TODO) if <code>TRUE</code>, only the structure of the PXP
file for inspection.</p>
</td></tr>
<tr><td><code id="read.pxp_+3A_extracttext">ExtractText</code></td>
<td>
<p>whether to extract procedures, recreation macros, history 
and plain text notebooks (<code>FALSE</code> by default).</p>
</td></tr>
<tr><td><code id="read.pxp_+3A_igorplatform">IgorPlatform</code></td>
<td>
<p>OS on which Igor file was saved (windows or macintosh).</p>
</td></tr>
<tr><td><code id="read.pxp_+3A_...">...</code></td>
<td>
<p>optional parameters passed to <a href="#topic+read.ibw">read.ibw</a>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>IgorPlatform</code> will determine in which encoding text is read 
(WINDOWS-1252 for windows and macintosh for macintosh). Unique abbreviations 
are acceptable. Defaults to <code>"windows"</code> on Windows, <code>"macintosh"</code>
otherwise. Note that Igor Pro 5.5 added a PlatformRecord to the PXP file
format which is used to determine the file's platform of origin when
available. Since this is information straight from the horse's mouth it will
override the <code>IgorPlatform</code> argument.
</p>


<h3>Value</h3>

<p>A list containing all the individual waves or variables in the PXP 
file.
</p>


<h3>Author(s)</h3>

<p>jefferis
</p>


<h3>See Also</h3>

<p>Other igor-io: 
<code><a href="#topic+WaveToTimeSeries">WaveToTimeSeries</a>()</code>,
<code><a href="#topic+read.ibw">read.ibw</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>r=read.pxp(system.file("igor","testexpt.pxp",package="IgorR"))
</code></pre>

<hr>
<h2 id='ReadAllNclampLogTables'>Read all Nclamp log tables from a directory into a list</h2><span id='topic+ReadAllNclampLogTables'></span>

<h3>Description</h3>

<p>Read all Nclamp log tables from a directory into a list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ReadAllNclampLogTables(logfiledir, pattern = "_log[0-9]+[.]pxp$", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ReadAllNclampLogTables_+3A_logfiledir">logfiledir</code></td>
<td>
<p>path to directory containing log files (pxp files).</p>
</td></tr>
<tr><td><code id="ReadAllNclampLogTables_+3A_pattern">pattern</code></td>
<td>
<p>optional regular expression &ndash; see <code><a href="base.html#topic+list.files">list.files</a></code>.</p>
</td></tr>
<tr><td><code id="ReadAllNclampLogTables_+3A_...">...</code></td>
<td>
<p>additional parameters for <code><a href="#topic+ReadNclampLogTable">ReadNclampLogTable</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list containing one dataframe for each parsed log file.
</p>


<h3>Author(s)</h3>

<p>jefferis
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
logfiles &lt;- ReadAllNclampLogTables("/GD/projects/PhysiologyData/logs")
str(logfiles)

## End(Not run)
</code></pre>

<hr>
<h2 id='ReadNclampLogTable'>Read the log table produced by Nclamp acquisition software for Igor</h2><span id='topic+ReadNclampLogTable'></span>

<h3>Description</h3>

<p>log tables are special Igor .pxp files that contain only variables.
Each entry corresponds to a single run of an Nclamp protocol, 
storing information like protocol name, run time etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ReadNclampLogTable(f, Verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ReadNclampLogTable_+3A_f">f</code></td>
<td>
<p>path to the log file.</p>
</td></tr>
<tr><td><code id="ReadNclampLogTable_+3A_verbose">Verbose</code></td>
<td>
<p>whether to print status information while reading the file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe containing a row for each acquisition protocol run.
</p>


<h3>Author(s)</h3>

<p>jefferis
</p>

<hr>
<h2 id='SummariseSweepFile'>Extract summary information from an Nclamp/Igor Sweep File</h2><span id='topic+SummariseSweepFile'></span>

<h3>Description</h3>

<p>e.g. for import into Physiology database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SummariseSweepFile(f, Verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="SummariseSweepFile_+3A_f">f</code></td>
<td>
<p>path to an Nclamp/Igor PXP format sweep file.</p>
</td></tr>
<tr><td><code id="SummariseSweepFile_+3A_verbose">Verbose</code></td>
<td>
<p>if <code>TRUE</code>, print details while parsing underlying PXP
file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of about 25 fields summarising the sweep file.
</p>


<h3>Author(s)</h3>

<p>jefferis
</p>


<h3>Examples</h3>

<pre><code class='language-R'>l &lt;- SummariseSweepFile(system.file("igor", "WedJul407c2_001.pxp", package="IgorR"))
cat("There are", l$NumWaves, "waves in the file each of total duration", l$StimWaveLength, 
 "ms and sample duration", l$StimSampleInterval, "ms \n") 
</code></pre>

<hr>
<h2 id='SweepFilesToDataFrame'>Summarise multiple sweep files into a single dataframe</h2><span id='topic+SweepFilesToDataFrame'></span>

<h3>Description</h3>

<p>Note that this is still a little fragile if the lists produced by 
<code><a href="#topic+SummariseSweepFile">SummariseSweepFile</a></code> do not have consistent field names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SweepFilesToDataFrame(ff)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="SweepFilesToDataFrame_+3A_ff">ff</code></td>
<td>
<p>paths to a set of sweep files.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe with rows for each sweep file.
</p>


<h3>Author(s)</h3>

<p>jefferis
</p>


<h3>See Also</h3>

<p>SummariseSweepFile
</p>

<hr>
<h2 id='tsp.igorwave'>Return tsp attribute of Igor wave (start, end, frequency)</h2><span id='topic+tsp.igorwave'></span>

<h3>Description</h3>

<p>Note that end = (npts-1) * deltat
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tsp.igorwave(wave)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tsp.igorwave_+3A_wave">wave</code></td>
<td>
<p>Igor wave loaded by <code>read.ibw</code> or<code>read.pxp</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>numeric vector with elements start, end, frequency
</p>


<h3>Author(s)</h3>

<p>jefferis
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+tsp">tsp</a></code>
</p>

<hr>
<h2 id='UpdateSweepDataFrame'>Update the CSV file summarising the sweeps in an Nclamp data folder</h2><span id='topic+UpdateSweepDataFrame'></span>

<h3>Description</h3>

<p>Update the CSV file summarising the sweeps in an Nclamp data folder
</p>


<h3>Usage</h3>

<pre><code class='language-R'>UpdateSweepDataFrame(
  folder,
  outfile = NULL,
  action = c("update", "force"),
  DryRun = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="UpdateSweepDataFrame_+3A_folder">folder</code></td>
<td>
<p>path to the folder.</p>
</td></tr>
<tr><td><code id="UpdateSweepDataFrame_+3A_outfile">outfile</code></td>
<td>
<p>path to outfile (default: <code>/path/to/datafolder/datafolder.csv</code>).</p>
</td></tr>
<tr><td><code id="UpdateSweepDataFrame_+3A_action">action</code></td>
<td>
<p>update newer (default) or force update (not yet implemented).</p>
</td></tr>
<tr><td><code id="UpdateSweepDataFrame_+3A_dryrun">DryRun</code></td>
<td>
<p>if <code>TRUE</code>, report which files would be processed, but do
nothing.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> if something happened, <code>FALSE</code> otherwise.
</p>


<h3>Author(s)</h3>

<p>jefferis
</p>

<hr>
<h2 id='WaveToTimeSeries'>Convert an Igor wave (wave list) loaded by read.ibw into an R time series</h2><span id='topic+WaveToTimeSeries'></span>

<h3>Description</h3>

<p>Where there are multiple waves, they are assumed to be of compatible lengths
so that they can be joined together by <code>cbind</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>WaveToTimeSeries(WaveData, ReturnOriginalDataOnError = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="WaveToTimeSeries_+3A_wavedata">WaveData</code></td>
<td>
<p>a wave or list of waves</p>
</td></tr>
<tr><td><code id="WaveToTimeSeries_+3A_returnoriginaldataonerror">ReturnOriginalDataOnError</code></td>
<td>
<p>If we can't make a time series, return
return original data (default TRUE)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a time series or multi time series (<code><a href="stats.html#topic+ts">ts</a></code>,
<code>mts</code>)
</p>


<h3>Author(s)</h3>

<p>jefferis
</p>


<h3>See Also</h3>

<p>Other igor-io: 
<code><a href="#topic+read.ibw">read.ibw</a>()</code>,
<code><a href="#topic+read.pxp">read.pxp</a>()</code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
