<!DOCTYPE html><html><head><title>Help for package ApacheLogProcessor</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ApacheLogProcessor}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#access_log_combined'><p>Apache log combined file example.</p></a></li>
<li><a href='#access_log_common'><p>Apache log common file example.</p></a></li>
<li><a href='#clear.urls'><p>Clear a list of URLs according parameters.</p></a></li>
<li><a href='#get.url.params'><p>Extract from the data frame with the access log the urls query strings parameters and values.</p></a></li>
<li><a href='#parse.php.msgs'><p>Parses PHP mesages and store its parts in a data frame that contains level, message, file, line number and referer.</p></a></li>
<li><a href='#read.apache.access.log'><p>read.apache.log</p></a></li>
<li><a href='#read.apache.error.log'><p>Read the apache erro log file and loads it to a data frame.</p></a></li>
<li><a href='#read.multiple.apache.access.log'><p>Reads multiple files of apache web server.</p></a></li>
<li><a href='#read.multiple.apache.error.log'><p>Reads multiple apache error log files and loads them to a data frame.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Process the Apache Web Server Log Files</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2018-07-18</td>
</tr>
<tr>
<td>Author:</td>
<td>Diogo Silveira Mendonca</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Diogo Silveira Mendonca &lt;diogosmendonca@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides capabilities to process Apache HTTPD Log files.The main functionalities are to extract data from access and error log files to data frames.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/LGPL-3">LGPL-3</a> | file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/diogosmendonca/ApacheLogProcessor">https://github.com/diogosmendonca/ApacheLogProcessor</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/diogosmendonca/ApacheLogProcessor/issues">https://github.com/diogosmendonca/ApacheLogProcessor/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>foreach, parallel, doParallel, utils, stringr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2018-07-19 02:09:54 UTC; 09513592740</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2018-07-19 07:30:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='access_log_combined'>Apache log combined file example.</h2><span id='topic+access_log_combined'></span>

<h3>Description</h3>

<p>A set of 12 log lines in Apache Log Combined Format
</p>


<h3>Format</h3>

<p>LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%{Referer}i\&quot; \&quot;%{User-Agent}i\&quot;&quot; combined</p>


<h3>Source</h3>

<p><a href="http://www.infinance.com.br/">http://www.infinance.com.br/</a>
</p>

<hr>
<h2 id='access_log_common'>Apache log common file example.</h2><span id='topic+access_log_common'></span>

<h3>Description</h3>

<p>A set of 12 log lines in Apache Log Common Format
</p>


<h3>Format</h3>

<p>LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b\&quot; common</p>


<h3>Source</h3>

<p><a href="http://www.infinance.com.br/">http://www.infinance.com.br/</a>
</p>

<hr>
<h2 id='clear.urls'>Clear a list of URLs according parameters.</h2><span id='topic+clear.urls'></span>

<h3>Description</h3>

<p>Clear a list of URLs according parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clear.urls(urls, remove_http_method = TRUE, remove_http_version = TRUE,
  remove_params_inside_url = TRUE, remove_query_string = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clear.urls_+3A_urls">urls</code></td>
<td>
<p>list of URLs</p>
</td></tr>
<tr><td><code id="clear.urls_+3A_remove_http_method">remove_http_method</code></td>
<td>
<p>boolean. If the http method will be removed from the urls.</p>
</td></tr>
<tr><td><code id="clear.urls_+3A_remove_http_version">remove_http_version</code></td>
<td>
<p>booelan. If the http version will be removed from the urls.</p>
</td></tr>
<tr><td><code id="clear.urls_+3A_remove_params_inside_url">remove_params_inside_url</code></td>
<td>
<p>boolean. If the parameters inside the URL, commonly used in REST web services, will be removed from the urls.</p>
</td></tr>
<tr><td><code id="clear.urls_+3A_remove_query_string">remove_query_string</code></td>
<td>
<p>boolean. If the query string will be removed from the urls.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector with the urls cleaned
</p>


<h3>Author(s)</h3>

<p>Diogo Silveira Mendonca
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Load the path to the log file
path_combined = system.file("examples", "access_log_combined.txt", package = "ApacheLogProcessor")

#Read a log file with combined format and return it in a data frame
df1 = read.apache.access.log(path_combined)

#Clear the urls
urls &lt;- clear.urls(df1$url)

#Clear the urls but do not remove query strings
urlsWithQS &lt;- clear.urls(df1$url, remove_query_string = FALSE)

#Load a log which the urls have parameters inside
path2 = system.file("examples", 
"access_log_with_params_inside_url.txt", package = "ApacheLogProcessor")

#Read a log file with combined format and return it in a data frame
df2 = read.apache.access.log(path2, format = "common")

#Clear the urls with parameters inside
urls2 &lt;- clear.urls(df2$url)

</code></pre>

<hr>
<h2 id='get.url.params'>Extract from the data frame with the access log the urls query strings parameters and values.</h2><span id='topic+get.url.params'></span>

<h3>Description</h3>

<p>The function supports multivalued parameters, but does not support parameters inside urls yet.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.url.params(dfLog)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get.url.params_+3A_dflog">dfLog</code></td>
<td>
<p>a dataframe with the access log. Can be load with read.apache.access.log or read.multiple.apache.access.log.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a structure of data frames with query strings parameters for each url of the log
</p>


<h3>Author(s)</h3>

<p>Diogo Silveira Mendonca
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Load a log which the urls have query strings
path = system.file("examples", "access_log_with_query_string.log", package = "ApacheLogProcessor")

#Read a log file with combined format and return it in a data frame
df = read.apache.access.log(path, format = "common")

#Clear the urls with parameters inside
params &lt;- get.url.params(df)

</code></pre>

<hr>
<h2 id='parse.php.msgs'>Parses PHP mesages and store its parts in a data frame that contains level, message, file, line number and referer.</h2><span id='topic+parse.php.msgs'></span>

<h3>Description</h3>

<p>Parses PHP mesages and store its parts in a data frame that contains level, message, file, line number and referer.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse.php.msgs(dfErrorLog)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parse.php.msgs_+3A_dferrorlog">dfErrorLog</code></td>
<td>
<p>Error log load with the read.apache.error.log or read.multiple.apache.error.log functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with PHP error message split in parts.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Loads the path of the erro log
path &lt;- system.file("examples", "error_log.log", package = "ApacheLogProcessor")

#Loads the error log to a data frame
dfELog &lt;- read.apache.error.log(path)

dfPHPMsgs &lt;- parse.php.msgs(dfELog)


</code></pre>

<hr>
<h2 id='read.apache.access.log'>read.apache.log</h2><span id='topic+read.apache.access.log'></span>

<h3>Description</h3>

<p>Reads the Apache Log Common or Combined Format and return a data frame with the log data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.apache.access.log(file, format = "combined", url_includes = "",
  url_excludes = "", columns = c("ip", "datetime", "url", "httpcode",
  "size", "referer", "useragent"), num_cores = 1, fields_have_quotes = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read.apache.access.log_+3A_file">file</code></td>
<td>
<p>string. Full path to the log file.</p>
</td></tr>
<tr><td><code id="read.apache.access.log_+3A_format">format</code></td>
<td>
<p>string. Values &quot;common&quot; or &quot;combined&quot; to set the input log format. The default value is the combined.</p>
</td></tr>
<tr><td><code id="read.apache.access.log_+3A_url_includes">url_includes</code></td>
<td>
<p>regex. If passed only the urls that matches with the regular expression passed will be returned.</p>
</td></tr>
<tr><td><code id="read.apache.access.log_+3A_url_excludes">url_excludes</code></td>
<td>
<p>regex. If passed only the urls that don't matches with the regular expression passed will be returned.</p>
</td></tr>
<tr><td><code id="read.apache.access.log_+3A_columns">columns</code></td>
<td>
<p>list. List of columns names that will be included in data frame output. All columns is the default value. c(&quot;ip&quot;, &quot;datetime&quot;, &quot;url&quot;, &quot;httpcode&quot;, &quot;size&quot; , &quot;referer&quot;, &quot;useragent&quot;)</p>
</td></tr>
<tr><td><code id="read.apache.access.log_+3A_num_cores">num_cores</code></td>
<td>
<p>number. Number of cores for parallel execution, if not passed 1 core is assumed. Used only to convert datetime form string to datetime type.</p>
</td></tr>
<tr><td><code id="read.apache.access.log_+3A_fields_have_quotes">fields_have_quotes</code></td>
<td>
<p>boolean. If passesd as true search and remove the quotes inside the all text fields.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The functions recives a full path to the log file and process the default log in common or combined format of Apache. 
LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%{Referer}i\&quot; \&quot;%{User-Agent}i\&quot;&quot; combined
LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b\&quot; common
</p>


<h3>Value</h3>

<p>a data frame with the apache log file information.
</p>


<h3>Author(s)</h3>

<p>Diogo Silveira Mendonca
</p>


<h3>See Also</h3>

<p><a href="http://httpd.apache.org/docs/1.3/logs.html">http://httpd.apache.org/docs/1.3/logs.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path_combined = system.file("examples", "access_log_combined.txt", package = "ApacheLogProcessor")
path_common = system.file("examples", "access_log_common.txt", package = "ApacheLogProcessor")

#Read a log file with combined format and return it in a data frame
df1 = read.apache.access.log(path_combined)

#Read a log file with common format and return it in a data frame
df2 = read.apache.access.log(path_common, format="common") 

#Read only the lines that url matches with the pattern passed
df3 = read.apache.access.log(path_combined, url_includes="infinance")

#Read only the lines that url matches with the pattern passed, but do not matche the exclude pattern
df4 = read.apache.access.log(path_combined, 
url_includes="infinance", url_excludes="infinanceclient")

#Return only the ip, url and datetime columns
df5 = read.apache.access.log(path_combined, columns=c("ip", "url", "datetime"))

#Process using 2 cores in parallel for speed up. 
df6 = read.apache.access.log(path_combined, num_cores=2)


</code></pre>

<hr>
<h2 id='read.apache.error.log'>Read the apache erro log file and loads it to a data frame.</h2><span id='topic+read.apache.error.log'></span>

<h3>Description</h3>

<p>Read the apache erro log file and loads it to a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.apache.error.log(file, columns = c("datetime", "logLevel", "pid",
  "ip_port", "msg"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read.apache.error.log_+3A_file">file</code></td>
<td>
<p>path to the error log file</p>
</td></tr>
<tr><td><code id="read.apache.error.log_+3A_columns">columns</code></td>
<td>
<p>which columns should be loaded. Default value is all columns. c(&quot;datetime&quot;, &quot;logLevel&quot;, &quot;pid&quot;, &quot;ip_port&quot;, &quot;msg&quot;)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with the error log data
</p>


<h3>Author(s)</h3>

<p>Diogo Silveira Mendonca
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Loads the path of the erro log
path &lt;- system.file("examples", "error_log.log", package = "ApacheLogProcessor")

#Loads the error log to a data frame
dfELog &lt;- read.apache.error.log(path)

</code></pre>

<hr>
<h2 id='read.multiple.apache.access.log'>Reads multiple files of apache web server.</h2><span id='topic+read.multiple.apache.access.log'></span>

<h3>Description</h3>

<p>The files can be gziped or not. If the files are gziped they are extracted once at time, processed and after only the extracted file is deleted.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.multiple.apache.access.log(path, prefix, verbose = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read.multiple.apache.access.log_+3A_path">path</code></td>
<td>
<p>path where the files are located</p>
</td></tr>
<tr><td><code id="read.multiple.apache.access.log_+3A_prefix">prefix</code></td>
<td>
<p>the prefix that identify the logs files</p>
</td></tr>
<tr><td><code id="read.multiple.apache.access.log_+3A_verbose">verbose</code></td>
<td>
<p>if prints messages during the processing</p>
</td></tr>
<tr><td><code id="read.multiple.apache.access.log_+3A_...">...</code></td>
<td>
<p>parameter to be passed to read.apache.access.log function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with the apache log files information.
</p>


<h3>Author(s)</h3>

<p>Diogo Silveira Mendonca
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path &lt;- system.file("examples", package="ApacheLogProcessor")
path &lt;- paste(path, "/", sep="")

#read multiple gziped logs with the prefix m_access_log_combined_
dfLog &lt;- read.multiple.apache.access.log(path, "m_access_log_combined_")

</code></pre>

<hr>
<h2 id='read.multiple.apache.error.log'>Reads multiple apache error log files and loads them to a data frame.</h2><span id='topic+read.multiple.apache.error.log'></span>

<h3>Description</h3>

<p>Reads multiple apache error log files and loads them to a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.multiple.apache.error.log(path, prefix, verbose = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read.multiple.apache.error.log_+3A_path">path</code></td>
<td>
<p>path to the folder that contains the error log files</p>
</td></tr>
<tr><td><code id="read.multiple.apache.error.log_+3A_prefix">prefix</code></td>
<td>
<p>prefix for all error log files that will be loaded</p>
</td></tr>
<tr><td><code id="read.multiple.apache.error.log_+3A_verbose">verbose</code></td>
<td>
<p>if the function prints messages during the logs processing</p>
</td></tr>
<tr><td><code id="read.multiple.apache.error.log_+3A_...">...</code></td>
<td>
<p>parameters to be passed to read.apache.error.log function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with the error log data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
path &lt;- system.file("examples", package="ApacheLogProcessor")
path &lt;- paste(path, "/", sep="")

#read multiple gziped logs with the prefix m_access_log_combined_
dfELog &lt;- read.multiple.apache.error.log(path, "m_error_log_")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
