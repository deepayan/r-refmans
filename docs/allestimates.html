<!DOCTYPE html><html><head><title>Help for package allestimates</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {allestimates}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#all_cox'><p>Estimates all possible effect estimates using Cox Proportional Hazards regression models</p></a></li>
<li><a href='#all_glm'><p>Estimates all possible effect estimates using <code>glm</code></p></a></li>
<li><a href='#all_lm'><p>Estimates all possible effect estimates using <code>lm</code></p></a></li>
<li><a href='#all_plot'><p>Plot all effect estimates against p values</p></a></li>
<li><a href='#all_plot_aic'><p>Draws scatter plot with all effect estimates against AIC</p></a></li>
<li><a href='#all_plot_aic2'><p>Draws multiple scatter plots of all effect estimates against AIC</p></a></li>
<li><a href='#all_plot2'><p>Plots all effect estimates against p values with each specific variable in the models</p></a></li>
<li><a href='#allestimates'><p>Effect estimates from models with all possible combinations of variables</p></a></li>
<li><a href='#diab_df'><p>Example data: Health outcomes of 2372 adults with and without diabetes</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Effect Estimates from All Models</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Estimates and plots effect estimates from models with all possible 
    combinations of a list of variables. It can be used for assessing treatment 
    effects in clinical trials or risk factors in bio-medical and epidemiological 
    research. Like Stata command 'confall' (Wang Z (2007) &lt;<a href="https://doi.org/10.1177%2F1536867X0700700203">doi:10.1177/1536867X0700700203</a>&gt; ), 
    'allestimates' calculates and stores all effect estimates, and plots them against p values or 
    Akaike information criterion (AIC) values. It currently has functions for linear 
    regression: all_lm(), logistic and Poisson regression: all_glm(), 
    and Cox proportional hazards regression: all_cox(). </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>broom, ggplot2, survival, tidyr, utils, stringr, dplyr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>spelling, knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-03-26 07:07:46 UTC; zhiqiang</td>
</tr>
<tr>
<td>Author:</td>
<td>Zhiqiang Wang [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Zhiqiang Wang &lt;menzies.uq@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-03-26 07:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='all_cox'>Estimates all possible effect estimates using Cox Proportional Hazards regression models</h2><span id='topic+all_cox'></span>

<h3>Description</h3>

<p>Estimates hazard ratios using Proportional Hazards Regression models
(<code>"coxph"</code> from <span class="pkg">survival</span> package) from models with all
possible combinations of a list of variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_cox(crude, xlist, data, na_omit = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_cox_+3A_crude">crude</code></td>
<td>
<p>An object of <em>formula</em> for initial model, generally crude model.
However, any other variables can also be included here as the initial model.
The left-hand side of ~ is the outcome of interest, and the variable on the
right-hand side of ~ is the exposure of the interest (either a treatment or a risk factor)</p>
</td></tr>
<tr><td><code id="all_cox_+3A_xlist">xlist</code></td>
<td>
<p>A <em>vector</em> of a list of variable names.</p>
</td></tr>
<tr><td><code id="all_cox_+3A_data">data</code></td>
<td>
<p><em>Data frame</em>.</p>
</td></tr>
<tr><td><code id="all_cox_+3A_na_omit">na_omit</code></td>
<td>
<p>Remove all missing values. Default is <code>"na_omit = TRUE"</code>.</p>
</td></tr>
<tr><td><code id="all_cox_+3A_...">...</code></td>
<td>
<p>Further optional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of all effect estimates.
</p>


<h3>See Also</h3>

<p><code>surival</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vlist &lt;- c("Age", "Sex", "Married", "BMI", "Education", "Income")
results &lt;- all_cox(crude = "Surv(t0, t1, Endpoint) ~ Diabetes", xlist = vlist, data = diab_df)
results
</code></pre>

<hr>
<h2 id='all_glm'>Estimates all possible effect estimates using <code>glm</code></h2><span id='topic+all_glm'></span>

<h3>Description</h3>

<p><code>all_glm</code> estimates odds ratios or rate ratios using
generalized linear models (<code>glm</code>) with all
possible combinations of a list of variables (potential confounding factors).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_glm(crude, xlist, data, family = "binomial", na_omit = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_glm_+3A_crude">crude</code></td>
<td>
<p>An object of <em>formula</em> for initial model, generally crude model.
However, any other variables can also be included here as the initial model.</p>
</td></tr>
<tr><td><code id="all_glm_+3A_xlist">xlist</code></td>
<td>
<p>A <em>vector</em> of a list of variable names (potential confounding factors).</p>
</td></tr>
<tr><td><code id="all_glm_+3A_data">data</code></td>
<td>
<p><em>Data frame</em>.</p>
</td></tr>
<tr><td><code id="all_glm_+3A_family">family</code></td>
<td>
<p><em>family</em> Description of the error distribution. Default is <code>"binomial"</code>.</p>
</td></tr>
<tr><td><code id="all_glm_+3A_na_omit">na_omit</code></td>
<td>
<p>Remove all missing values. Default is <code>"na_omit = TRUE"</code>.</p>
</td></tr>
<tr><td><code id="all_glm_+3A_...">...</code></td>
<td>
<p>Further optional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of all effect estimates.
</p>


<h3>See Also</h3>

<p><span class="pkg">stats</span>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>diab_df$Overweight &lt;- as.numeric(diab_df$BMI &gt;= 25)
vlist &lt;- c("Age", "Sex", "Income")
all_glm(crude = "Diabetes ~ Overweight", xlist = vlist, data = diab_df)
</code></pre>

<hr>
<h2 id='all_lm'>Estimates all possible effect estimates using <code>lm</code></h2><span id='topic+all_lm'></span>

<h3>Description</h3>

<p><code>all_lm</code> estimates coefficients of a specific variable using
linear models (<code>lm</code>) with all possible combinations of other variables (potential confounding factors).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_lm(crude, xlist, data, na_omit = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_lm_+3A_crude">crude</code></td>
<td>
<p>An object of <em>formula</em> for initial model, generally crude model.
However, additional variables can also be included here as the initial model.</p>
</td></tr>
<tr><td><code id="all_lm_+3A_xlist">xlist</code></td>
<td>
<p>A <em>vector</em> of a list of variable names (potential confounding factors).</p>
</td></tr>
<tr><td><code id="all_lm_+3A_data">data</code></td>
<td>
<p><em>Data frame</em>.</p>
</td></tr>
<tr><td><code id="all_lm_+3A_na_omit">na_omit</code></td>
<td>
<p>Remove all missing values. Default is <code>"na_omit = TRUE"</code>.</p>
</td></tr>
<tr><td><code id="all_lm_+3A_...">...</code></td>
<td>
<p>Further optional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of all effect estimates.
</p>


<h3>See Also</h3>

<p><span class="pkg">lm</span>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vlist &lt;- c("Age", "Sex", "Cancer", "CVD", "Education", "Income")
all_lm(crude = "BMI ~ Married", xlist = vlist, data = diab_df)
</code></pre>

<hr>
<h2 id='all_plot'>Plot all effect estimates against p values</h2><span id='topic+all_plot'></span>

<h3>Description</h3>

<p><code>all_plot()</code>  generates a scatter plot with effect estimates of all possible models
again p values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_plot(
  data,
  xlabels = c(0, 0.001, 0.01, 0.05, 0.2, 0.5, 1),
  xlim = c(0, 1),
  xlab = "P value",
  ylim = NULL,
  ylab = NULL,
  yscale_log = FALSE,
  title = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_plot_+3A_data">data</code></td>
<td>
<p><em>Object</em> from <code>all_cox</code>, <code>all_glm</code>, <code>all_speedglm</code>, or <code>all_glm</code>, including all effect estimate values.</p>
</td></tr>
<tr><td><code id="all_plot_+3A_xlabels">xlabels</code></td>
<td>
<p><em>Numeric vector</em> x-axis tick labels. Default is
<code>"c(0, 0.001, 0.01, 0.05, 0.2, 0.5, 1)"</code>.</p>
</td></tr>
<tr><td><code id="all_plot_+3A_xlim">xlim</code></td>
<td>
<p><em>Vector</em> of 2 numeric values for x-axis limits. Default is <code>"c(0, 1)"</code>.</p>
</td></tr>
<tr><td><code id="all_plot_+3A_xlab">xlab</code></td>
<td>
<p><em>Character</em> string for x-axis name. Default is <code>"P value"</code>.</p>
</td></tr>
<tr><td><code id="all_plot_+3A_ylim">ylim</code></td>
<td>
<p><em>Vector</em> of 2 numeric values for y-axis limits.</p>
</td></tr>
<tr><td><code id="all_plot_+3A_ylab">ylab</code></td>
<td>
<p><em>Character</em> string for y-axis name. Default depends on original model types.</p>
</td></tr>
<tr><td><code id="all_plot_+3A_yscale_log">yscale_log</code></td>
<td>
<p><em>TRUE or FALSE</em> to re-scale y-axis to &quot;log10&quot;. Default is <code>"FALSE"</code>.</p>
</td></tr>
<tr><td><code id="all_plot_+3A_title">title</code></td>
<td>
<p><em>Character</em> for plot title. Default is <code>"NULL"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <span class="pkg">ggplot2</span> object: scatter plot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vlist &lt;- c("Age", "Sex", "Married", "BMI", "Education", "Income")
results &lt;- all_cox(crude = "Surv(t0, t1, Endpoint) ~ Diabetes", xlist = vlist, data = diab_df)
all_plot(results)
</code></pre>

<hr>
<h2 id='all_plot_aic'>Draws scatter plot with all effect estimates against AIC</h2><span id='topic+all_plot_aic'></span>

<h3>Description</h3>

<p><code>all_plot_aic()</code> generates a scatter plot with all effect estimates against AIC.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_plot_aic(data, xlab = "AIC", ylab = NULL, title = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_plot_aic_+3A_data">data</code></td>
<td>
<p><em>Object</em> from <code>all_cox</code>, <code>all_glm</code>, <code>all_speedglm</code>, or <code>all_glm</code>, including all effect estimate values.</p>
</td></tr>
<tr><td><code id="all_plot_aic_+3A_xlab">xlab</code></td>
<td>
<p><em>Character</em> string for x-axis name. Default is <code>"AIC"</code></p>
</td></tr>
<tr><td><code id="all_plot_aic_+3A_ylab">ylab</code></td>
<td>
<p><em>Character</em> string for y-axis name. Default depends on original model types.</p>
</td></tr>
<tr><td><code id="all_plot_aic_+3A_title">title</code></td>
<td>
<p><em>Character</em> for plot title. Default is <code>"NULL"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <span class="pkg">ggplot2</span> object: scatter plot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vlist &lt;- c("Age", "Sex", "Married", "BMI", "Education", "Income")
results &lt;- all_cox(crude = "Surv(t0, t1, Endpoint) ~ Diabetes", xlist = vlist, data = diab_df)
all_plot_aic(results)
</code></pre>

<hr>
<h2 id='all_plot_aic2'>Draws multiple scatter plots of all effect estimates against AIC</h2><span id='topic+all_plot_aic2'></span>

<h3>Description</h3>

<p><code>all_plot_aic2()</code> draws multiple scatter plots of
all effect estimates against AIC. Each plot indicates if a specific
variable is included in the models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_plot_aic2(data, xlab = "AIC", ylab = NULL, title = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_plot_aic2_+3A_data">data</code></td>
<td>
<p><em>Object</em> from <code>all_cox</code>, <code>all_glm</code>, <code>all_speedglm</code>, or <code>all_glm</code>, including all effect estimate values.</p>
</td></tr>
<tr><td><code id="all_plot_aic2_+3A_xlab">xlab</code></td>
<td>
<p><em>Character</em> string for x-axis name. Default is <code>"AIC"</code>.</p>
</td></tr>
<tr><td><code id="all_plot_aic2_+3A_ylab">ylab</code></td>
<td>
<p><em>Character</em> string for y-axis name. Default depends on original model types.</p>
</td></tr>
<tr><td><code id="all_plot_aic2_+3A_title">title</code></td>
<td>
<p><em>Character</em> for plot title. Default is <code>"NULL"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A  <span class="pkg">ggplot2</span>  object: scatter plot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vlist &lt;- c("Age", "Sex", "Married", "BMI", "Education", "Income")
results &lt;- all_cox(crude = "Surv(t0, t1, Endpoint) ~ Diabetes", xlist = vlist, data = diab_df)
all_plot_aic(data = results)
</code></pre>

<hr>
<h2 id='all_plot2'>Plots all effect estimates against p values with each specific variable in the models</h2><span id='topic+all_plot2'></span>

<h3>Description</h3>

<p><code>all_plot2()</code>  generates a panel of scatter plots with effect estimates of all possible models
again p values. Each plot includes effect estimates from all models including a specific variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_plot2(
  data,
  xlabels = c(0, 0.001, 0.01, 0.05, 0.2, 0.5, 1),
  xlim = c(0, 1),
  xlab = "P value",
  ylim = NULL,
  ylab = NULL,
  yscale_log = FALSE,
  title = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_plot2_+3A_data">data</code></td>
<td>
<p><em>Object</em> from <code>all_cox</code>, <code>all_glm</code>, <code>all_speedglm</code>, or <code>all_glm</code>, including all effect estimate values.</p>
</td></tr>
<tr><td><code id="all_plot2_+3A_xlabels">xlabels</code></td>
<td>
<p><em>numeric vector</em> x-axis tick labels. Default is
<code>"c(0, 0.001, 0.01, 0.05, 0.2, 0.5, 1)"</code></p>
</td></tr>
<tr><td><code id="all_plot2_+3A_xlim">xlim</code></td>
<td>
<p><em>vector</em> of 2 numeric values for x-axis limits. Default is <code>"c(0, 1)"</code>.</p>
</td></tr>
<tr><td><code id="all_plot2_+3A_xlab">xlab</code></td>
<td>
<p><em>Character</em> string for x-axis name. Default is <code>"P value"</code>.</p>
</td></tr>
<tr><td><code id="all_plot2_+3A_ylim">ylim</code></td>
<td>
<p><em>vector</em> of 2 numeric values for y-axis limits.</p>
</td></tr>
<tr><td><code id="all_plot2_+3A_ylab">ylab</code></td>
<td>
<p><em>Character</em> string for y-axis name. Default depends on original model types.</p>
</td></tr>
<tr><td><code id="all_plot2_+3A_yscale_log">yscale_log</code></td>
<td>
<p><em>TRUE or FALSE</em> re-scale y-axis to &quot;log10&quot;. Default is <code>"FALSE"</code>.</p>
</td></tr>
<tr><td><code id="all_plot2_+3A_title">title</code></td>
<td>
<p><em>Character</em> title. Default is <code>"NULL"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <span class="pkg">ggplot2</span> object: scatter plot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vlist &lt;- c("Age", "Sex", "Married", "BMI", "Income")
results &lt;- all_cox(crude = "Surv(t0, t1, Endpoint) ~ Diabetes", xlist = vlist, data = diab_df)
all_plot2(results)
</code></pre>

<hr>
<h2 id='allestimates'>Effect estimates from models with all possible combinations of variables</h2><span id='topic+allestimates'></span>

<h3>Description</h3>

<p>To assess treatment effects in clinical trials and risk factors in bio-medical
and epidemiological research, we use
<em>regression coefficients</em>, <em>odds ratios</em> or <em>hazard ratios</em> as
<em>effect estimates</em>. <code>allestimates</code> allows users to quickly obtain
effect estimates from models with all possible combinations of a list of variables
specified by users. <code>all_lm</code> for linear regression, <code>all_glm</code> for
logistic regression, <code>all_speedglm</code>
using <code>speedlm</code> as a faster alternative of <code>all_glm</code>, and
<code>all_cox</code> for Cox Proportional Hazards Models. Users can further
use those values in a returned list of results.
<code>all_plot</code> draws scatter plots with all effect
estimate values against p values, as <code>Stata confall</code> command
(Wang Z (2007) &lt;doi:10.1177/1536867X0700700203&gt;).
Those plots divide estimates into four categories:
</p>


<h3>Details</h3>


<ul>
<li><p>positive and significant: left-top quarter
</p>
</li>
<li><p>negative and significant: left-bottom quarter
</p>
</li>
<li><p>positive and non-significant: right-top quarter
</p>
</li>
<li><p>negative and non-significant: right-bottom quarter
</p>
</li></ul>

<p><code>all_plot2</code> draws multiple plots. Each of those plots
indicates whether a specific variable is included or
not included in models.
Those effect estimates help users better understand
confounding effects, uncertainty of their estimates, as well as
inappropriately including variables in the models. This is a tool for
calculating and exploring effect estimates from all possible models.
Interpretation of the results should be in the context of other
analyses and biological knowledge.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
? all_speedglm
? all_glm
? all_cox
? all_lm
? all_plot
? all_plot2
</code></pre>

<hr>
<h2 id='diab_df'>Example data: Health outcomes of 2372 adults with and without diabetes</h2><span id='topic+diab_df'></span>

<h3>Description</h3>

<p>A data frame with 2372 rows and 14 variables with diabetes status
<code>diabetes</code> and mortality status <code>endpoint</code>. For the purpose
of demonstrate, assume that we are interested in the association
between <code>diabetes</code> and <code>endpoint</code>. Other variables are
considered as possible confounding factors. The purposes of this dataset
is to illustrate those functions in <span class="pkg">chest</span> and <span class="pkg">allestimates</span> packages only.
Therefore, we assume it is a cohort design for Cox Proportional Hazard regression,
and a case-control design for logistic regression.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diab_df
</code></pre>


<h3>Format</h3>

<p>A data frame with 2372 rows and 14 variables:
</p>

<dl>
<dt>Diabetes</dt><dd><p>diabetes status 1: with diabetes 0: without diabetes </p>
</dd>
<dt>Endpoint</dt><dd><p>mortality status 1: reached end point, and 0: survived </p>
</dd>
<dt>Age</dt><dd><p>Age, in years</p>
</dd>
<dt>Sex</dt><dd><p>sex, 1: male, 2: Female</p>
</dd>
<dt>BMI</dt><dd><p>Body mass index</p>
</dd>
<dt>Married</dt><dd><p>marital status 1: married, 0: not</p>
</dd>
<dt>Smoke</dt><dd><p>smoking status 1: smoker, 0: non-smoker</p>
</dd>
<dt>CVD</dt><dd><p>cardiovascular disease 1: yes 0: no</p>
</dd>
<dt>Cancer</dt><dd><p>cancer 1: yes, 0: no</p>
</dd>
<dt>Education</dt><dd><p>education 1: high, 0: low</p>
</dd>
<dt>Income</dt><dd><p>income 1: high, 0: low</p>
</dd>
<dt>t0</dt><dd><p>time (age) at the start of the follow-up</p>
</dd>
<dt>t1</dt><dd><p>time (age) at the end of the follow-up</p>
</dd>
<dt>mid</dt><dd><p>matched set id, for conditional logistic regression </p>
</dd>
</dl>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
