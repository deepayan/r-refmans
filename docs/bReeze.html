<!DOCTYPE html><html><head><title>Help for package bReeze</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {bReeze}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bReeze-package'><p>Functions for Wind Resource Assessment</p></a></li>
<li><a href='#aep'><p>Calculation of annual energy production</p></a></li>
<li><a href='#aep.int'><p>Internal function for aep</p></a></li>
<li><a href='#availability'><p>Calculate availability for pairs of wind speed and direction</p></a></li>
<li><a href='#availability.int'><p>Internal function for availability</p></a></li>
<li><a href='#changes'><p>Show the NEWS file</p></a></li>
<li><a href='#clean'><p>Clean faulty values</p></a></li>
<li><a href='#clean.int'><p>Internal function for clean</p></a></li>
<li><a href='#day.plot'><p>Plot diurnal wind speed</p></a></li>
<li><a href='#energy'><p>Calculation of total wind energy content</p></a></li>
<li><a href='#energy.int'><p>Internal function for energy</p></a></li>
<li><a href='#frequency'><p>Calculation of frequency and mean wind speed</p></a></li>
<li><a href='#map.plot'><p>Plot map or satellite image</p></a></li>
<li><a href='#mast'><p>Creation of met mast objects</p></a></li>
<li><a href='#month.stats'><p>Calculation of monthly statistics</p></a></li>
<li><a href='#month.stats.int'><p>Internal function for month.stats</p></a></li>
<li><a href='#pc'><p>Import power curve from file</p></a></li>
<li><a href='#polar.plot'><p>Plot wind speed vs. direction</p></a></li>
<li><a href='#set'><p>Creation of datasets</p></a></li>
<li><a href='#subset.int'><p>Internal function data subsets</p></a></li>
<li><a href='#timestamp'><p>Format time stamps</p></a></li>
<li><a href='#turb.iec.plot'><p>Plot turbulence intensity site classification</p></a></li>
<li><a href='#turbulence'><p>Calculation of turbulence intensity</p></a></li>
<li><a href='#uncertainty'><p>Uncertainty assessment</p></a></li>
<li><a href='#weibull'><p>Calculation of Weibull parameters</p></a></li>
<li><a href='#weibull.int'><p>Internal function for weibull</p></a></li>
<li><a href='#winddata'><p>Example data for bReeze</p></a></li>
<li><a href='#windprofile'><p>Calculate wind profile</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Functions for Wind Resource Assessment</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4-4</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-02-05</td>
</tr>
<tr>
<td>Author:</td>
<td>Christian Graul and Carsten Poppinga</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Christian Graul &lt;christian.graul@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A collection of functions to analyse, visualize and interpret wind data
         and to calculate the potential energy production of wind turbines.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/chgrl/bReeze">https://github.com/chgrl/bReeze</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.14.2)</td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics, grDevices, lubridate, stats, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>RColorBrewer, RgoogleMaps, XML</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-05 20:04:50 UTC; SauerGraul</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-05 20:40:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='bReeze-package'>Functions for Wind Resource Assessment</h2><span id='topic+bReeze-package'></span><span id='topic+bReeze'></span>

<h3>Description</h3>

<p>A collection of functions to analyse, visualize and interpret wind data and to calculate the potential energy production of wind turbines.
</p>


<h3>Details</h3>

<p>Wind power is a global source of energy which attracts a large share of investments in renewables. Project sites with high wind potential do not only minimise the financial risk but increase the efficiency in carbon footprint reduction. Hence a thorough productivity analysis of a wind project is essential, regarding both economic and environmental aspects. The evaluation of the potential of a site requires a wind resource assessment, which is best based on data gained by a local measurement campaign. A methodology of processing the measured data has been established, resulting in a better understanding of the wind conditions of a site and therefore a more reliable estimation of energy production.
</p>
<p><code>bReeze</code> is a collection of widely used methods to analyse, visualise and interpret wind data. Wind resource analyses can subsequently be combined with characteristics of wind turbines to estimate the potential energy production on the investigated site.
</p>
<p>Usually the data to be analysed are collected by meteorological masts (met masts) and averaged over ten minutes, but other time intervals are also processable. 
</p>
<p><code>bReeze</code> suggests three packages, written by other developers: <code>RColorBrewer</code> (by Erich Neuwirth) provides nice colours for the graphics, <code>XML</code> (by Duncan Temple Lang) provides xml parsing for power curve import and <code>RgoogleMaps</code> (by Markus Loecher) provides simple site maps.
</p>
<p>Try the examples below to check if <code>bReeze</code> has been correctly installed. Any question and feedback is welcome via email to &lt;christian.graul@gmail.com&gt; or on <a href="https://github.com/chgrl/bReeze">GitHub</a>.
</p>


<h3>Author(s)</h3>

<p>Christian Graul and Carsten Poppinga
</p>
<p>Maintainer: Christian Graul &lt;christian.graul@gmail.com&gt;
</p>


<h3>References</h3>

<p>The following handbook gives a detailed thematic overview and is available online:
</p>
<p>Brower, M., Marcus, M., Taylor, M., Bernadett, D., Filippelli, M., Beaucage, P., Hale, E., Elsholz, K., Doane, J., Eberhard, M., Tensen, J., Ryan, D. (2010) Wind Resource Assessment Handbook. http://www.renewablenrgsystems.com/TechSupport/~/media/Files/PDFs/wind_resource_handbook.ashx
</p>
<p>Further references are given under the specific functions of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# load example data
data("winddata", package="bReeze")

# create two datasets
set40 &lt;- set(height=40, v.avg=winddata[,2], v.std=winddata[,5],
  dir.avg=winddata[,14])
set30 &lt;- set(height=30, v.avg=winddata[,6], v.std=winddata[,9],
  dir.avg=winddata[,16])

# format time stamp
ts &lt;- timestamp(timestamp=winddata[,1])

# create met mast object
metmast &lt;- mast(timestamp=ts, set40=set40, set30=set30)

# plot time series of met mast signals
plot(metmast)

# calculate frequency and mean wind speed per wind direction sector
freq &lt;- frequency(mast=metmast, v.set=1)

# plot frequency
plot(freq)

# calculate availability of pairs of wind speed and direction
availability(mast=metmast)

# calculate monthly means of wind speed
month.stats(mast=metmast)

# calculate turbulence intensity
turbulence(mast=metmast, turb.set=1)

# calculate weibull parameters
wb &lt;- weibull(mast=metmast, v.set=1)

# calculate total wind energy content
energy(wb=wb)

# calculate wind profile
pf &lt;- windprofile(mast=metmast, v.set=c(1,2), dir.set=1)

# import power curve
pc &lt;- pc("Enercon_E126_7.5MW.pow")

# calculate annual energy production
aep &lt;- aep(profile=pf, pc=pc, hub.h=135)

# plot AEP
plot(aep)

## End(Not run)
</code></pre>

<hr>
<h2 id='aep'>Calculation of annual energy production</h2><span id='topic+aep'></span><span id='topic+plot.aep'></span>

<h3>Description</h3>

<p>Calculates annual energy production (AEP) from a site's wind profile and wind turbine characteristics.</p>


<h3>Usage</h3>

<pre><code class='language-R'>aep(profile, pc, hub.h, rho=1.225, avail=1, bins=c(5,10,15,20), 
  sectoral=FALSE, digits=c(3,0,0,3), print=TRUE)

## S3 method for class 'aep'
plot(x, show.total=TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="aep_+3A_profile">profile</code></td>
<td>
<p>Wind profile object created by <code><a href="stats.html#topic+profile">profile</a></code>.</p>
</td></tr>
<tr><td><code id="aep_+3A_pc">pc</code></td>
<td>
<p>Power curve object created by <code><a href="#topic+pc">pc</a></code>.</p>
</td></tr>
<tr><td><code id="aep_+3A_hub.h">hub.h</code></td>
<td>
<p>Hub heigth of wind turbine as numeric value.</p>
</td></tr>
<tr><td><code id="aep_+3A_rho">rho</code></td>
<td>
<p>Air density as numeric value. Default is <code>1.225</code> kg/m3 according to the International Standard Atmosphere (ISA) at sea level and 15°C.</p>
</td></tr>
<tr><td><code id="aep_+3A_avail">avail</code></td>
<td>
<p>Availability of turbine as numeric value between <code>0</code> (not available at all) and <code>1</code> (100% available).</p>
</td></tr>
<tr><td><code id="aep_+3A_bins">bins</code></td>
<td>
<p>Edges of wind speed bins as numeric vector or <code>NULL</code> if only total AEP is desired. Default values are <code>c(5, 10, 15, 20)</code>.</p>
</td></tr>
<tr><td><code id="aep_+3A_sectoral">sectoral</code></td>
<td>
<p>If <code>TRUE</code>, wind speeds are extrapolated to hub height using the wind profiles of each direction sector. Otherwise the general profile (<code>"all"</code>) is used for extrapolation (default).</p>
</td></tr>
<tr><td><code id="aep_+3A_digits">digits</code></td>
<td>
<p>Number of decimal places to be used for results as numeric vector. The first value is used for <code>wind.speed</code>, the second for <code>operation</code>, the third for <code>aep</code> and the fourth for <code>capacity</code> results. Default is <code>c(3,0,0,3)</code>.</p>
</td></tr>
<tr><td><code id="aep_+3A_print">print</code></td>
<td>
<p>If <code>TRUE</code>, results are printed directly.</p>
</td></tr>
<tr><td><code id="aep_+3A_x">x</code></td>
<td>
<p>AEP object, created by <code>aep</code>.</p>
</td></tr>
<tr><td><code id="aep_+3A_show.total">show.total</code></td>
<td>
<p>If <code>TRUE</code> (the default) the total AEP is added to the plot.</p>
</td></tr>
<tr><td><code id="aep_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods. For optional graphical parameters see below.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For a wind turbine the mean energy production can be expressed by
</p>
<p style="text-align: center;"><code class="reqn">E = T \, \int_{v_{in}}^{v_{out}} \! f(v) \, p(v)</code>
</p>

<p>where <code class="reqn">f(v)</code> is the probability density function of the wind speed <code class="reqn">v</code>, <code class="reqn">p(v)</code> is the power curve of the turbine and <code class="reqn">T</code> is the production time period. Energy production starts at the turbine's cut-in wind speed <code class="reqn">v_{in}</code> and stops at cut-out wind speed <code class="reqn">v_{out}</code>.
</p>
<p>Based on this fundamental expression, <code>aep</code> calculates the annual energy production as follows:   
</p>
<p style="text-align: center;"><code class="reqn">AEP = A_{turb} \, \frac{\rho}{\rho_{pc}} \, H \, \sum_{b=1}^{n} \! W(v_b) \, P(v_b)</code>
</p>

<p>where <code class="reqn">A_{turb}</code> is the average availability of the turbine, <code class="reqn">\rho</code> is the air density of the site and <code class="reqn">\rho_{pc}</code> is the air density, the power curve is defined for. <code class="reqn">W(v_b)</code> is the probability of the wind speed bin <code class="reqn">v_b</code>, estimated by the Weibull distribution and <code class="reqn">P(v_b)</code> is the power output for that wind speed bin. <code class="reqn">H</code> is the number of operational hours &ndash; the production time period of the AEP is per definition 8760 hours.
</p>
<p>The wind speed <code class="reqn">v_h</code> at hub height <code class="reqn">h</code> of the turbine is extrapolated from the measured wind speed <code class="reqn">v_{ref}</code> at reference height <code class="reqn">h_{ref}</code> using the Hellman exponential law (see <code>profile</code>): 
</p>
<p style="text-align: center;"><code class="reqn">v_h = v_{ref} \, \left(\frac{h}{h_{ref}} \right)^\alpha</code>
</p>

<p>The productive suitability of a wind turbine for a site can be evaluated by the capacity factor <code class="reqn">CF</code>. This factor is defined as the ratio of average power output of a turbine to the theoretical maximum power output. Using the AEP as the average power output, the rated power <code class="reqn">P_{rated}</code> of a turbine and the maximum operational hours of a year we get:
</p>
<p style="text-align: center;"><code class="reqn">CF = \frac{AEP}{P_{rated} \, 8760}</code>
</p>



<h3>Value</h3>

<p>Returns a list containing:
</p>
<table>
<tr><td><code>wind.speed</code></td>
<td>
<p>Mean wind speed for each direction sector.</p>
</td></tr>
<tr><td><code>operation</code></td>
<td>
<p>Operational hours per year for each direction sector.</p>
</td></tr>
<tr><td><code>total</code></td>
<td>
<p>Total annual energy production for each direction sector.</p>
</td></tr>
<tr><td><code>...</code></td>
<td>
<p>Annual energy production per wind speed bin for each direction sector.</p>
</td></tr>
<tr><td><code>capacity</code></td>
<td>
<p>Capacity factor of the wind turbine.</p>
</td></tr>
</table>


<h3>Optional graphical parameters</h3>

<p>The following graphical parameters can optionally be added to customize the plot:
</p>

<ul>
<li> <p><code>border.leg</code>: Border colour(s) for the legend. One colour for each wind speed bin or a single colour &ndash; default is same as <code>col</code>.
</p>
</li>
<li> <p><code>bty.leg</code>: Type of box to be drawn around the legend. Allowed values are <code>"n"</code> (no box, the default) and <code>"o"</code>.
</p>
</li>
<li> <p><code>cex</code>: Amount by which text on the plot should be scaled relative to the default (which is <code>1</code>), as numeric. To be used for scaling of all texts at once.
</p>
</li>
<li> <p><code>cex.axis</code>: Amount by which axis annotations should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.lab</code>: Amount by which axis labels should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.leg</code>: Amount by which legend text should be scaled, as numeric value.
</p>
</li>
<li> <p><code>circles</code>: Manual definition of circles to be drawn, as numeric vector of the form c(inner circle, outer circle, interval between the circles).
</p>
</li>
<li> <p><code>col</code>: Vector of colours &ndash; one colour for each wind speed bin or a single colour if <code>aep</code> only contains the total AEP.
</p>
</li>
<li> <p><code>col.axis</code>: Colour to be used for axis annotations &ndash; default is <code>"gray45"</code>.
</p>
</li>
<li> <p><code>col.border</code>: Colour to be used for sector borders &ndash; default is <code>NULL</code> (no border is drawn).
</p>
</li>
<li> <p><code>col.circle</code>: Colour to be used for circles &ndash; default is <code>"gray45"</code>.
</p>
</li>
<li> <p><code>col.cross</code>: Colour to be used for axis lines &ndash; default is <code>"gray45"</code>.
</p>
</li>
<li> <p><code>col.lab</code>: Colour to be used for axis labels &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.leg</code>: Colour to be used for legend text &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>fg</code>: If <code>TRUE</code>, sectors are plotted in foreground (on top of axis lines and circles) &ndash; default is <code>FALSE</code>.
</p>
</li>
<li> <p><code>lty.circle</code>: Line type of circles &ndash; default is <code>"dashed"</code>. See <code><a href="graphics.html#topic+par">par</a></code> for available line types.
</p>
</li>
<li> <p><code>lty.cross</code>: Line type of axis lines &ndash; default is <code>"solid"</code>. See <code><a href="graphics.html#topic+par">par</a></code> for available line types.
</p>
</li>
<li> <p><code>lwd.border</code>: Line width of the sector borders &ndash; default is <code>0.5</code>. Only used if <code>col.border</code> is set.
</p>
</li>
<li> <p><code>lwd.circle</code>: Line width of circles, as numeric value &ndash; default is <code>0.7</code>.
</p>
</li>
<li> <p><code>lwd.cross</code>: Line width of axis lines, as numeric value &ndash; default is <code>0.7</code>.
</p>
</li>
<li> <p><code>pos.axis</code>: Position of axis labels in degree, as numeric value &ndash; default is <code>60</code>.
</p>
</li>
<li> <p><code>sec.space</code>: Space between plotted sectors, as numeric value between <code>0</code> and <code>1</code> &ndash; default is <code>0.2</code>.
</p>
</li>
<li> <p><code>title.leg</code>: Alternative legend title, as string.
</p>
</li>
<li> <p><code>type</code>: If <code>"n"</code> nothing is plotted.
</p>
</li>
<li> <p><code>width.leg</code>: Widths of legend space relative to plot space, as numeric value between <code>0</code> and <code>1</code>. If <code>0</code>, the legend is omitted, default value is <code>0.2</code>.
</p>
</li>
<li> <p><code>x.intersp</code>: Horizontal interspacing factor for legend text, as numeric &ndash; default is <code>0.4</code>.
</p>
</li>
<li> <p><code>y.intersp</code>: Vertical line distance for legend text, as numeric &ndash; default is <code>0.4</code>.
</p>
</li></ul>



<h3>Note</h3>

<p>Sectoral extrapolation should be used carefully. Some sector's profile might be abnormal &ndash; particularly in case of short measurement periods (&lt;= one year) and/or few samples per sector &ndash; causing biased results. Always check the profiles and set <code>sectoral</code> to <code>FALSE</code> to get more robust results.
</p>


<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>References</h3>

<p>Burton, T., Sharpe, D., Jenkins, N., Bossanyi, E. (2001) <em>Wind Energy Handbook</em>. New York: Wiley
</p>
<p>Fördergesellschaft Windenergie e.V. (2007) Technical Guidelines for Wind Turbines, Part 6: Determination of Wind Potential and Energy Yields, Revision 7
</p>
<p>International Organisation for Standardization (1975) ISO 2533:1975 Standard Atmosphere. ISO Standard
</p>
<p>Jangamshetti, S.H., Rau, V.G. (1999) Site Matching of Wind Turbine Generators: A Case Study. <em>IEEE Transaction on Energy Conversion</em> <b>14</b>(4), 1537&ndash;1543
</p>


<h3>See Also</h3>

<p><code><a href="#topic+windprofile">windprofile</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## load and prepare data
data("winddata", package="bReeze")
set1 &lt;- set(height=40, v.avg=winddata[,2], v.std=winddata[,5],
  dir.avg=winddata[,14])
set2 &lt;- set(height=30, v.avg=winddata[,6], v.std=winddata[,9],
  dir.avg=winddata[,16])
ts &lt;- timestamp(timestamp=winddata[,1])
neubuerg &lt;- mast(timestamp=ts, set1, set2)
neubuerg &lt;- clean(mast=neubuerg)


## calculate AEP
# calculate wind profile
neubuerg.wp &lt;- profile(mast=neubuerg, v.set=c(1,2), dir.set=1, 
  print=FALSE)

# load power curve
pw.56 &lt;- pc("PowerWind_56_900kW.wtg")

# calculate AEP
aep(profile=neubuerg.wp, pc=pw.56, hub.h=71)

# calculate AEP with site specific air density and availability of 97
aep(profile=neubuerg.wp, pc=pw.56, hub.h=71, rho=1.195, avail=0.97)

# calculate total AEP using sectoral profiles
aep(profile=neubuerg.wp, pc=pw.56, hub.h=71, sectoral=TRUE)

# calculate AEP for 1 m/s speed bins and without binning
aep(profile=neubuerg.wp, pc=pw.56, hub.h=71, bins=seq(0,25))
aep(profile=neubuerg.wp, pc=pw.56, hub.h=71, bins=NULL)

# change number of digits and hide results
aep(profile=neubuerg.wp, pc=pw.56, hub.h=71, digits=c(1,1,1,1))
neubuerg.aep &lt;- aep(profile=neubuerg.wp, pc=pw.56, hub.h=71, print=FALSE)
neubuerg.aep


## plot AEP objects
# default
plot(neubuerg.aep)

# omit total AEP
plot(neubuerg.aep, show.total=FALSE)

# change colours and text sizes
plot(neubuerg.aep, col=gray(5:0 / 5), cex=0.8)

# manual definition of circles
plot(neubuerg.aep, circles=c(250, 750, 250))

# plot sectors in foreground
plot(neubuerg.aep, fg=TRUE)

# change position of axis labels
plot(neubuerg.aep, pos.axis=135)

# no legend
plot(neubuerg.aep, width.leg=0)

# freaky
plot(neubuerg.aep, border.leg=heat.colors(5), bty.leg="o", 
  cex.axis=0.5, cex.lab=2, cex.leg=0.5, circles=c(80, 800, 80), 
  col=rainbow(5), col.axis="green", col.border="orange", 
  col.circle="purple", col.cross="yellow", col.lab="pink", 
  col.leg="lightblue", fg=TRUE, lwd.border=2, lwd.circle=3, 
  lwd.cross=4, lty.circle="12345678", lty.cross="87654321", 
  sec.space=0.6, title.leg="* WiNd SpEeD *", x.intersp=2, y.intersp=5)

## End(Not run)
</code></pre>

<hr>
<h2 id='aep.int'>Internal function for aep</h2><span id='topic+aep_int'></span>

<h3>Description</h3>

<p>Internal function for <code><a href="#topic+aep">aep</a></code></p>


<h3>Arguments</h3>

<table>
<tr><td><code id="aep.int_+3A_wb.par">wb.par</code></td>
<td>
<p>Weibull parameters A and k.</p>
</td></tr>
<tr><td><code id="aep.int_+3A_lim">lim</code></td>
<td>
<p>Lower and upper calculation limit (wind speed) as numeric vector.</p>
</td></tr>
<tr><td><code id="aep.int_+3A_pc">pc</code></td>
<td>
<p>Power curve object</p>
</td></tr>
<tr><td><code id="aep.int_+3A_rho.pc">rho.pc</code></td>
<td>
<p>Air desity the power curve is defined for.</p>
</td></tr>
<tr><td><code id="aep.int_+3A_op">op</code></td>
<td>
<p>Operational hours</p>
</td></tr>
<tr><td><code id="aep.int_+3A_rho">rho</code></td>
<td>
<p>Air density</p>
</td></tr>
<tr><td><code id="aep.int_+3A_avail">avail</code></td>
<td>
<p>Availability of turbine</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns annual energy production as numeric value.</p>


<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>See Also</h3>

<p><code><a href="#topic+aep">aep</a></code></p>

<hr>
<h2 id='availability'>Calculate availability for pairs of wind speed and direction</h2><span id='topic+availability'></span><span id='topic+avail'></span><span id='topic+plot.availability'></span>

<h3>Description</h3>

<p>Calculates the availability for pairs of wind speed and wind direction of a met mast.</p>


<h3>Usage</h3>

<pre><code class='language-R'>availability(mast, v.set, dir.set, subset, digits=1, print=TRUE)
avail(mast, v.set, dir.set, subset, digits=1, print=TRUE)

## S3 method for class 'availability'
plot(x, set, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="availability_+3A_mast">mast</code></td>
<td>
<p>Met mast object created by <code><a href="#topic+mast">mast</a></code>.</p>
</td></tr>
<tr><td><code id="availability_+3A_v.set">v.set</code></td>
<td>
<p>Set(s) to be used for wind speed, specified as set number(s) or set name(s). Argument is optional &ndash; if missing, all sets containing wind speed and wind direction data are used.</p>
</td></tr>
<tr><td><code id="availability_+3A_dir.set">dir.set</code></td>
<td>
<p>Set(s) to be used for wind direction, specified as set number(s) or set name(s). Argument is optional &ndash; if missing, the set(s) used for wind speed data will also be used for wind direction.</p>
</td></tr>
<tr><td><code id="availability_+3A_subset">subset</code></td>
<td>
<p>Optional start and end time stamp for a data subset, as string vector <code>c(start, end)</code>. The time stamps format shall follow the rules of ISO 8601 international standard, e.g. &quot;2012-08-08 22:55:00&quot;.</p>
</td></tr>
<tr><td><code id="availability_+3A_digits">digits</code></td>
<td>
<p>Number of decimal places to be used for results as numeric value. Default is <code>1</code>.</p>
</td></tr>
<tr><td><code id="availability_+3A_print">print</code></td>
<td>
<p>If <code>TRUE</code> (the default), results are printed directly.</p>
</td></tr>
<tr><td><code id="availability_+3A_x">x</code></td>
<td>
<p>Availability object created by <code>availability</code>.</p>
</td></tr>
<tr><td><code id="availability_+3A_set">set</code></td>
<td>
<p>Number of dataset to be plotted, specified as set number or set name (optional).</p>
</td></tr>
<tr><td><code id="availability_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods. For optional graphical parameters see below.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The availability is the number of pairs of valid wind speed and valid wind direction data samples as a percentage of the total possible for the measurement period, i.e.:
</p>
<p style="text-align: center;"><code class="reqn">Availability = \frac{N(v_{valid} \wedge dir_{valid})}{N}</code>
</p>

<p>where <code class="reqn">N</code> is the total possible number of samples and <code class="reqn">v_{valid} \wedge dir_{valid}</code> is a pair of valid wind speed and direction data.
</p>
<p>Causes of invalid or missing data are manifold. Typical causes are icing and defects of sensors or other measurement equipment.
</p>


<h3>Value</h3>

<p>Returns a list of sub lists for each pair of <code>v.set</code>/<code>dir.set</code> containing:
</p>
<table>
<tr><td><code>total</code></td>
<td>
<p>Total availability (%), effective period (days) and total period (days) of a set/pair of wind speed and direction.</p>
</td></tr>
<tr><td><code>daily</code></td>
<td>
<p>Availability per day, i.e. number of samples per day.</p>
</td></tr>
</table>


<h3>Optional graphical parameters</h3>

<p>The following graphical parameters can optionally be added to customize the plot:
</p>

<ul>
<li> <p><code>border</code>: Colour of the cell borders &ndash; default value is <code>"black"</code>.
</p>
</li>
<li> <p><code>cex</code>: Numeric value, giving the amount by which text on the plot should be scaled relative to the default (which is 1).
</p>
</li>
<li> <p><code>cex.axis</code>: Amount by which axis annotations should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.lab</code>: Amount by which axis labels should be scaled, as numeric value.
</p>
</li>
<li> <p><code>col</code>: Vector of three text colours (or just one colour), where the first indicates 'full availability', the second 'partial availability' and the third 'not available' &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.axis</code>: Colour to be used for axis &ndash; default is <code>"gray45"</code>.
</p>
</li>
<li> <p><code>col.lab</code>: Colour to be used for axis labels &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>fill</code>: Vector of three fill colours (or just one colour), where the first indicates 'full availability', the second 'partial availability' and the third 'not available'.
</p>
</li>
<li> <p><code>lwd</code>: Line widths of the cell borders. See <code><a href="graphics.html#topic+par">par</a></code> for usage.
</p>
</li>
<li> <p><code>mar</code>: A numerical vector of the form c(bottom, left, top, right) which gives the number of lines of margin to be specified on the four sides of the plot &ndash; default is <code>c(0, 0, 0, 0)</code>.
</p>
</li>
<li> <p><code>plot.names</code>: If <code>TRUE</code> (the default), the names of the datasets is plotted as second label of the y axis.
</p>
</li>
<li> <p><code>xlab</code>: Alternative label for the x axis.
</p>
</li>
<li> <p><code>ylab</code>: Alternative label for the y axis.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>References</h3>

<p>Brower, M., Marcus, M., Taylor, M., Bernadett, D., Filippelli, M., Beaucage, P., Hale, E., Elsholz, K., Doane, J., Eberhard, M., Tensen, J., Ryan, D. (2010) Wind Resource Assessment Handbook. http://www.renewablenrgsystems.com/TechSupport/~/media/Files/PDFs/wind_resource_handbook.ashx
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mast">mast</a></code>, <code><a href="#topic+clean">clean</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## load and prepare data
data("winddata", package="bReeze")
set40 &lt;- set(height=40, v.avg=winddata[,2], v.std=winddata[,5],
  dir.avg=winddata[,14])
set30 &lt;- set(height=30, v.avg=winddata[,6], v.std=winddata[,9],
  dir.avg=winddata[,16])
set20 &lt;- set(height=20, v.avg=winddata[,10], v.std=winddata[,13])
ts &lt;- timestamp(timestamp=winddata[,1])
neubuerg &lt;- mast(timestamp=ts, set40=set40, set30=set30, 
  set20=set20)
neubuerg &lt;- clean(mast=neubuerg)


## calculate availability
neubuerg.avail &lt;- availability(mast=neubuerg)

# compare the total availability of 'set40' and 'set30'
neubuerg.avail$set40$total
neubuerg.avail$set30$total

# check the daily availability of 'set40'
neubuerg.avail$set40$daily

# note: availability for 'set20' is missing - its availability is NULL,
# since it does not contain wind direction data

# calculate availability for 'set20' using wind direction data from 'set40'
set20.avail &lt;- availability(mast=neubuerg, v.set=3, dir.set=1)
# same as above
set20.avail &lt;- availability(mast=neubuerg, v.set="set20", dir.set="set40")

# calculate availability for all sets using wind direction data from 'set40'
neubuerg.avail &lt;- availability(mast=neubuerg, v.set=c(1,2,3), dir.set=1)

# data subsets
availability(mast=neubuerg, v.set=1, 
  subset=c("2009-12-01 00:10:00", "2009-12-31 23:50:00"))
availability(mast=neubuerg, v.set=1, 
  subset=c("2010-01-01 00:10:00", NA)) # just 'start' time stamp
availability(mast=neubuerg, v.set=1, 
  subset=c(NA, "2009-12-31 23:50:00")) # just 'end' time stamp

# change number of digits and hide results
neubuerg.avail &lt;- availability(mast=neubuerg, digits=0)
neubuerg.avail &lt;- availability(mast=neubuerg, print=FALSE)
neubuerg.avail


## plot availability objects
plot(neubuerg.avail)  # default
plot(neubuerg.avail, set=2)	 # one dataset
plot(neubuerg.avail, set="set30")  # same as above
plot(neubuerg.avail, set=c(1,2))  # several datasets

# customize plot
plot(neubuerg.avail, border="darkgray", cex.axis=0.7, 
  cex.lab=0.9, col=c("darkgreen", "orange", "red4"), col.axis="blue", 
  col.lab="blue", fill=c("lightgreen", "yellow", "red"), lwd=0.5, 
  mar=c(1,1,1,1), plot.names=FALSE, xlab="jour", ylab="mois")

## End(Not run)
</code></pre>

<hr>
<h2 id='availability.int'>Internal function for availability</h2><span id='topic+availability_int'></span>

<h3>Description</h3>

<p>Internal function for <code><a href="#topic+availability">availability</a></code></p>


<h3>Arguments</h3>

<table>
<tr><td><code id="availability.int_+3A_v.avg">v.avg</code></td>
<td>
<p>Average wind speed.</p>
</td></tr>
<tr><td><code id="availability.int_+3A_dir.avg">dir.avg</code></td>
<td>
<p>Average wind direction.</p>
</td></tr>
<tr><td><code id="availability.int_+3A_ts">ts</code></td>
<td>
<p>Time stamp</p>
</td></tr>
<tr><td><code id="availability.int_+3A_start.year">start.year</code></td>
<td>
<p>First year of measurement period.</p>
</td></tr>
<tr><td><code id="availability.int_+3A_start.month">start.month</code></td>
<td>
<p>First month of measurement period.</p>
</td></tr>
<tr><td><code id="availability.int_+3A_num.months">num.months</code></td>
<td>
<p>Number of months.</p>
</td></tr>
<tr><td><code id="availability.int_+3A_period.days">period.days</code></td>
<td>
<p>Days of measurement period.</p>
</td></tr>
<tr><td><code id="availability.int_+3A_digits">digits</code></td>
<td>
<p>Number of digits.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list of:
</p>
<table>
<tr><td><code>total</code></td>
<td>
<p>Total availability</p>
</td></tr>
<tr><td><code>daily</code></td>
<td>
<p>Daily availability</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>See Also</h3>

<p><code><a href="#topic+availability">availability</a></code></p>

<hr>
<h2 id='changes'>Show the NEWS file</h2><span id='topic+changes'></span>

<h3>Description</h3>

<p>Show the NEWS file of the <code><a href="#topic+bReeze">bReeze</a></code> package.</p>


<h3>Usage</h3>

<pre><code class='language-R'>changes(pkg="bReeze")</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="changes_+3A_pkg">pkg</code></td>
<td>
<p>&quot;bReeze&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>NULL</p>

<hr>
<h2 id='clean'>Clean faulty values</h2><span id='topic+clean'></span><span id='topic+cln'></span>

<h3>Description</h3>

<p>Cleans faulty values of a met mast object, set or specified set of a met mast. Faulty values are replaced by <code>NA</code>.</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean(mast, set, v.avg.min=0.4, v.avg.max=50, dir.clean=TRUE, 
	turb.clean=4, icing=FALSE, rep=NULL, n.rep=5, ts=FALSE)
cln(mast, set, v.avg.min=0.4, v.avg.max=50, dir.clean=TRUE, 
	turb.clean=4, icing=FALSE, rep=NULL, n.rep=5, ts=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_+3A_mast">mast</code></td>
<td>
<p>Met mast object created by <code><a href="#topic+mast">mast</a></code>. To be ignored, if a single dataset shall be cleaned.</p>
</td></tr>
<tr><td><code id="clean_+3A_set">set</code></td>
<td>
<p>Set object created by <code><a href="#topic+set">set</a></code> (if no <code>mast</code> is given) or set of met mast specified as set number or set name. To be ignored, if all datasets of <code>mast</code> shall be cleaned.</p>
</td></tr>
<tr><td><code id="clean_+3A_v.avg.min">v.avg.min</code></td>
<td>
<p>Lower limit for wind speeds as numeric value. Default is <code>0.4</code> m/s. Set to <code>NULL</code> to omit minimum wind speed.</p>
</td></tr>
<tr><td><code id="clean_+3A_v.avg.max">v.avg.max</code></td>
<td>
<p>Upper limit for wind speeds as numeric value. Default is <code>50</code> m/s. Set to <code>NULL</code> to omit maximum wind speed.</p>
</td></tr>
<tr><td><code id="clean_+3A_dir.clean">dir.clean</code></td>
<td>
<p>If <code>TRUE</code> (default), faulty wind direction values are excluded. Faulty values are <code>dir.avg</code>&lt;0, <code>dir.avg</code>&gt;360 and <code>dir.avg</code>, where the wind speed is lower than the <code>v.avg.min</code> specified.</p>
</td></tr>
<tr><td><code id="clean_+3A_turb.clean">turb.clean</code></td>
<td>
<p>Wind speed limit for turbulence intensity as numeric value. Turbulence intesity values are excluded for wind speeds lower then this limit. Default is 4 m/s.</p>
</td></tr>
<tr><td><code id="clean_+3A_icing">icing</code></td>
<td>
<p>If <code>TRUE</code>, wind direction values are excluded, where standard deviation of wind direction is 0, assuming icing. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="clean_+3A_rep">rep</code></td>
<td>
<p>Signal (or a vector of signals), for which repetitions shall be cleaned &ndash; default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="clean_+3A_n.rep">n.rep</code></td>
<td>
<p>Minimum number of repetitions that shall be cleaned, as integer value &ndash; default is <code>5</code>. Only used if <code>rep</code> is not <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="clean_+3A_ts">ts</code></td>
<td>
<p>If <code>TRUE</code>, uneven time intervals are corrected. Can only be used with <code><a href="#topic+mast">mast</a></code> objects. Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Turbulence can be ignored for low wind speeds. Use <code>turb.clean</code> to clean the respective turbulence intensity values. See <code><a href="#topic+turbulence">turbulence</a></code> for more details.
</p>
<p>If icing is detected using <code>icing</code>, the time stamp should be checked to exclude implausible assumptions, e.g. in summer.
</p>
<p>Repetitions are often generated by a corrupted data stream between sensor and data logger. Some sensors also repeat their last captured value during calm conditions. Although they are unlikely for averaged time intervals, repetitions are no faulty values by default. Do only clean repetitions if you know your data. Note: the number of repetitions <code>n.rep</code> means <code>n.rep</code>+1 consecutive values in a dataset are identical. The default of 5 repetitions corresponds to one hour in case of a ten minutes interval.
</p>
<p>Uneven time intervals might come up due to rounding errors. <code>ts</code> corrects them to the <code>median</code> time interval.</p>


<h3>Value</h3>

<p>Returns the input met mast or dataset object with cleaned data.</p>


<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>See Also</h3>

<p><code><a href="#topic+mast">mast</a></code>, <code><a href="#topic+set">set</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# load and prepare data
data("winddata", package="bReeze")
set40 &lt;- set(height=40, v.avg=winddata[,2], v.std=winddata[,5],
  dir.avg=winddata[,14])
set30 &lt;- set(height=30, v.avg=winddata[,6], v.std=winddata[,9],
  dir.avg=winddata[,16])
set20 &lt;- set(height=20, v.avg=winddata[,10], v.std=winddata[,13])
ts &lt;- timestamp(timestamp=winddata[,1])
neubuerg &lt;- mast(timestamp=ts, set40=set40, set30=set30, 
  set20=set20)

# clean faulty values of a met mast
neubuerg.clean &lt;- clean(mast=neubuerg)

# compare a subset of the original and cleaned data
neubuerg$sets$set40$data$v.avg[660:670]
neubuerg.clean$sets$set40$data$v.avg[660:670]


# clean faulty values of a dataset
set40.clean &lt;- clean(set=set40)
  
# clean just one dataset of a met mast
neubuerg.clean.2 &lt;- clean(mast=neubuerg, set=1)
neubuerg.clean.2 &lt;- clean(mast=neubuerg, set="set40")	# same as above

# change lower wind speed limit 
neubuerg.clean.3 &lt;- clean(mast=neubuerg, v.avg.min=0.3)

# compare number of samples set to 'NA', due to lowered limit
length(which(is.na(neubuerg.clean$sets$set40$data$v.avg)==TRUE))
length(which(is.na(neubuerg.clean.3$sets$set40$data$v.avg)==TRUE))


# change wind speed limit for cleaning of turbulence intensity
neubuerg.clean.4 &lt;- clean(mast=neubuerg, turb.clean=3)

# compare number of samples set to 'NA', due to turb.clean
neubuerg.clean$sets$set40$data$turb.int[75:100]
neubuerg.clean.4$sets$set40$data$turb.int[75:100]


# check whether icing is assumed for any samples
neubuerg.clean.5 &lt;- clean(mast=neubuerg, set=1, v.avg.min=0, 
  v.avg.max=100, dir.clean=FALSE, turb.clean=0, icing=TRUE)
not.cleaned &lt;- which(is.na(neubuerg$sets$set40$data$dir.avg)==TRUE)
cleaned &lt;- which(is.na(neubuerg.clean.5$sets$set40$data$dir.avg)==TRUE)
length(cleaned)-length(cleaned)	# no icing here

# checked time stamp to exclude implausible icing assumptions (e.g. in summer)
# (which makes no sense here, since cleaned is empty)
neubuerg.clean.5$timestamp[cleaned]


# clean repetitions
neubuerg.clean.6 &lt;- clean(mast=neubuerg, rep=c("v.avg", "dir.avg"))
neubuerg.clean.7 &lt;- clean(mast=neubuerg, rep="v.avg", n.rep=3)

## End(Not run)
</code></pre>

<hr>
<h2 id='clean.int'>Internal function for clean</h2><span id='topic+clean_int'></span>

<h3>Description</h3>

<p>Internal function for <code><a href="#topic+clean">clean</a></code></p>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean.int_+3A_dat">dat</code></td>
<td>
<p>Dataset to be cleaned.</p>
</td></tr>
<tr><td><code id="clean.int_+3A_v.avg.min">v.avg.min</code></td>
<td>
<p>Lower limit for wind speeds as numeric value. Default is <code>0.4</code> m/s.</p>
</td></tr>
<tr><td><code id="clean.int_+3A_v.avg.max">v.avg.max</code></td>
<td>
<p>Upper limit for wind speeds as numeric value. Default is <code>50</code> m/s.</p>
</td></tr>
<tr><td><code id="clean.int_+3A_dir.clean">dir.clean</code></td>
<td>
<p>If <code>TRUE</code>, faulty wind direction values are excluded. Faulty values are <code>dir.avg</code>&lt;0, <code>dir.avg</code>&gt;360 and <code>dir.avg</code>, where the wind speed is lower than the <code>v.avg.min</code> specified. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="clean.int_+3A_turb.clean">turb.clean</code></td>
<td>
<p>Wind speed limit for turbulence intensity. Turbulence intesity values are excluded for wind speeds lower then this limit. Default is 4 m/s.</p>
</td></tr>
<tr><td><code id="clean.int_+3A_icing">icing</code></td>
<td>
<p>If <code>TRUE</code>, wind direction values are excluded, where standard deviation of wind direction is 0, assuming icing. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="clean.int_+3A_rep">rep</code></td>
<td>
<p>Signal (or a vector of signals), for which repetitions shall be cleaned.</p>
</td></tr>
<tr><td><code id="clean.int_+3A_n.rep">n.rep</code></td>
<td>
<p>Number of repetitions that shall be cleaned, as integer value &ndash; default is <code>5</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns cleaned dataset.</p>


<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>See Also</h3>

<p><code><a href="#topic+clean">clean</a></code></p>

<hr>
<h2 id='day.plot'>Plot diurnal wind speed</h2><span id='topic+day.plot'></span><span id='topic+day'></span>

<h3>Description</h3>

<p>Plots the diurnal variation of wind speed or wind direction.</p>


<h3>Usage</h3>

<pre><code class='language-R'>day.plot(mast, set, dir.set=set, signal, num.sectors=NULL, subset, ...)
day(mast, set, dir.set=set, signal, num.sectors=NULL, subset, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="day.plot_+3A_mast">mast</code></td>
<td>
<p>Met mast object created by <code><a href="#topic+mast">mast</a></code>.</p>
</td></tr>
<tr><td><code id="day.plot_+3A_set">set</code></td>
<td>
<p>Set used for plotting, specified as set number or set name. Argument is optional &ndash; if missing, all sets containing the choosen <code>signal</code> are used.</p>
</td></tr>
<tr><td><code id="day.plot_+3A_dir.set">dir.set</code></td>
<td>
<p>Direction set used for sectoral splitting of the data, specified as set number or set name. Argument is used for sectoral plotting only (see <code>num.sectors</code>).</p>
</td></tr>
<tr><td><code id="day.plot_+3A_signal">signal</code></td>
<td>
<p>Signal to be plotted as string.</p>
</td></tr>
<tr><td><code id="day.plot_+3A_num.sectors">num.sectors</code></td>
<td>
<p>Number of wind direction sectors as integer value greater 1. Argument is optional &ndash; if not <code>NULL</code>, data is splitted into directional sectors for plotting. Sectoral plots are available only for single sets.</p>
</td></tr>
<tr><td><code id="day.plot_+3A_subset">subset</code></td>
<td>
<p>Optional start and end time stamp for a data subset, as string vector <code>c(start, end)</code>. The time stamps format shall follow the rules of ISO 8601 international standard, e.g. &quot;2012-08-08 22:55:00&quot;.</p>
</td></tr>
<tr><td><code id="day.plot_+3A_...">...</code></td>
<td>
<p>Optional graphical parameters, see below for details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>plotDay</code> reveals diurnal variations of a signal. The plot may show outliers that indicate data inconsistancy.
</p>


<h3>Optional graphical parameters</h3>

<p>The following graphical parameters can optionally be added to customize the plot:
</p>

<ul>
<li> <p><code>bty</code>: Type of box to be drawn around the plot region. Allowed values are <code>"o"</code> (the default), <code>"l"</code>, <code>"7"</code>, <code>"c"</code>, <code>"u"</code>, or <code>"]"</code>. The resulting box resembles the corresponding upper case letter. A value of <code>"n"</code> suppresses the box.
</p>
</li>
<li> <p><code>bty.leg</code>: Type of box to be drawn around the legend. Allowed values are <code>"n"</code> (no box, the default) and <code>"o"</code>.
</p>
</li>
<li> <p><code>cex</code>: Amount by which text on the plot should be scaled relative to the default (which is <code>1</code>), as numeric. To be used for scaling of all texts at once.
</p>
</li>
<li> <p><code>cex.axis</code>: Amount by which axis annotations should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.lab</code>: Amount by which axis labels should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.leg</code>: Amount by which legend text should be scaled, as numeric value.
</p>
</li>
<li> <p><code>col</code>: Vector of colours, one for each set plotted.
</p>
</li>
<li> <p><code>col.axis</code>: Colour to be used for axis annotations &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.box</code>: Colour to be used for the box around the plot region (if <code>bty</code>) &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.lab</code>: Colour to be used for axis labels &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.leg</code>: Colour to be used for legend text &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.ticks</code>: Colours for the axis line and the tick marks respectively &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>las</code>: Style of axis labels. One of <code>0</code> (always parallel to the axis, default), <code>1</code> (always horizontal), <code>2</code> (always perpendicular to the axis), <code>3</code> (always vertical).
</p>
</li>
<li> <p><code>lty</code>: Vector of line types, one for each set plotted. See <code><a href="graphics.html#topic+par">par</a></code> for available line types.
</p>
</li>
<li> <p><code>lwd</code>: Vector of line widths, one for each set plotted. See <code><a href="graphics.html#topic+par">par</a></code> for usage.
</p>
</li>
<li> <p><code>mar</code>: A numerical vector of the form c(bottom, left, top, right) which gives the number of lines of margin to be specified on the four sides of the plot &ndash; default is <code>c(4.5, 5, 1.5, 1)</code>.
</p>
</li>
<li> <p><code>mgp</code>: A numerical vector of the form c(label, annotation, line), which gives the margin line for the axis label, axis annotation and axis line. The default is <code>c(2, 0.7, 0)</code>.
</p>
</li>
<li> <p><code>pos.leg</code>: Position of legend &ndash; one of <code>"bottomright"</code>, <code>"bottom"</code>, <code>"bottomleft"</code>, <code>"left"</code>, <code>"topleft"</code>, <code>"top"</code>, <code>"topright"</code>, <code>"right"</code> or <code>"center"</code>. Use <code>NULL</code> to hide the legend.
</p>
</li>
<li> <p><code>xlab</code>: Alternative label for the x axis.
</p>
</li>
<li> <p><code>ylab</code>: Alternative label for the y axis.
</p>
</li>
<li> <p><code>ylim</code>: Limits of the y axis, as vector of two values.
</p>
</li>
<li> <p><code>x.intersp</code>: Horizontal interspacing factor for legend text, as numeric &ndash; default is <code>0.4</code>.
</p>
</li>
<li> <p><code>y.intersp</code>: Vertical line distance for legend text, as numeric &ndash; default is <code>0.8</code>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>See Also</h3>

<p><code><a href="#topic+mast">mast</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# load and prepare data
data("winddata", package="bReeze")
set40 &lt;- set(height=40, v.avg=winddata[,2], dir.avg=winddata[,14])
set30 &lt;- set(height=30, v.avg=winddata[,6], dir.avg=winddata[,16])
set20 &lt;- set(height=20, v.avg=winddata[,10])
ts &lt;- timestamp(timestamp=winddata[,1])
neubuerg &lt;- mast(timestamp=ts, set40, set30, set20)
neubuerg &lt;- clean(mast=neubuerg)

# plot all datasets
day.plot(mast=neubuerg, signal="v.avg")
day.plot(mast=neubuerg, signal="dir.avg")

# plot one dataset
day.plot(mast=neubuerg, set=1, signal="v.avg")
day.plot(mast=neubuerg, set="set1", signal="v.avg")	# same as above
day.plot(mast=neubuerg, set=2, signal="dir.avg")

# sectoral plot
day.plot(mast=neubuerg, set=1, signal="v.avg", num.sectors=8)

# data subsets
day.plot(mast=neubuerg, signal="v.avg", 
  subset=c("2009-12-01 00:00:00", "2009-12-31 23:50:00"))
day.plot(mast=neubuerg, signal="v.avg",  
  subset=c("2010-01-01 00:00:00", NA)) # just 'start' time stamp
day.plot(mast=neubuerg, set=1, signal="v.avg", num.sectors=4, 
  subset=c(NA, "2009-12-31 23:50:00")) # just 'end' time stamp

# customize plot
day.plot(mast=neubuerg, signal="v.avg", 
  bty="l", cex.axis=0.8, cex.lab=0.9, cex.leg=0.7, 
  col=c("darkgreen", "royalblue", "purple"), col.axis="darkgray", 
  col.box="darkgray", col.lab="darkgray", col.leg="darkgray", 
  col.ticks="darkgray", las=2, lty=c(2,3,4), lwd=1.5, mar=c(3, 3, 0.5, 0.5), 
  mgp=c(1.5, 0.5, 0), pos.leg="topleft", xlab="hour", ylab="velocity", 
  ylim=c(3.5,6), x.intersp=1, y.intersp=1)

## End(Not run)
</code></pre>

<hr>
<h2 id='energy'>Calculation of total wind energy content</h2><span id='topic+energy'></span><span id='topic+en'></span><span id='topic+plot.energy'></span>

<h3>Description</h3>

<p>Calculates the total wind energy content per direction sector from Weibull data.</p>


<h3>Usage</h3>

<pre><code class='language-R'>energy(wb, rho=1.225, bins=c(5, 10, 15, 20), 
  digits=0, print=TRUE)
en(wb, rho=1.225, bins=c(5, 10, 15, 20), 
  digits=0, print=TRUE)

## S3 method for class 'energy'
plot(x, show.total=TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="energy_+3A_wb">wb</code></td>
<td>
<p>Weibull object created by <code><a href="#topic+weibull">weibull</a></code>.</p>
</td></tr>
<tr><td><code id="energy_+3A_rho">rho</code></td>
<td>
<p>Air density as numeric value. Default is <code>1.225</code> kg/m3 according to the International Standard Atmosphere (ISA) at sea level and 15°C.</p>
</td></tr>
<tr><td><code id="energy_+3A_bins">bins</code></td>
<td>
<p>Wind speed bins as numeric vector or <code>NULL</code> if no classification is desired. Default is <code>c(5, 10, 15, 20)</code>.</p>
</td></tr>
<tr><td><code id="energy_+3A_digits">digits</code></td>
<td>
<p>Number of decimal places to be used for results as numeric value. Default is <code>0</code>.</p>
</td></tr>
<tr><td><code id="energy_+3A_print">print</code></td>
<td>
<p>If <code>TRUE</code> (the default), results are printed directly.</p>
</td></tr>
<tr><td><code id="energy_+3A_x">x</code></td>
<td>
<p>Energy object created by <code>energy</code>.</p>
</td></tr>
<tr><td><code id="energy_+3A_show.total">show.total</code></td>
<td>
<p>If <code>TRUE</code> (the default), the total amount of wind energy per square meter is shown.</p>
</td></tr>
<tr><td><code id="energy_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods. For optional graphical parameters see below.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The total wind energy content can be perceived as the theoretic energy potential of a particular site. Therefore it is usefull for a resource assessment, independent of the wind turbine.
</p>
<p>The power density function
</p>
<p style="text-align: center;"><code class="reqn">E(v) = \frac{1}{2} \, \rho \, v^3 \, f(v)</code>
</p>

<p>where <code class="reqn">\rho</code> is the air density, <code class="reqn">v</code> is the wind speed and <code class="reqn">f(v)</code> is its probability density function, leads to an analytical solution using wind speed bins as:
</p>
<p style="text-align: center;"><code class="reqn">E(v) = \frac{1}{2} \, \rho \, H \, \sum_{b=1}^{n} \! v_b^3 \, W(v_b)</code>
</p>

<p>where <code class="reqn">H</code> is the number of hours of the desired period, <code class="reqn">v_b</code> is the wind speed bin and <code class="reqn">W(v_b)</code> is the probability of that bin estimated by the Weibull distribution. The result for <code class="reqn">H=8760</code> is the available wind energy per square meter and year.
</p>


<h3>Value</h3>

<p>Returns a data frame containing:
</p>
<table>
<tr><td><code>total</code></td>
<td>
<p>Total wind energy content per direction sector.</p>
</td></tr>
<tr><td><code>...</code></td>
<td>
<p>Wind energy content per direction sector for each given wind speed bin.</p>
</td></tr>
</table>


<h3>Optional graphical parameters</h3>

<p>The following graphical parameters can optionally be added to customize the plot:
</p>

<ul>
<li> <p><code>border.leg</code>: Border colour(s) for the legend. One colour for each wind speed bin or a single colour &ndash; default is same as <code>col</code>.
</p>
</li>
<li> <p><code>bty.leg</code>: Type of box to be drawn around the legend. Allowed values are <code>"n"</code> (no box, the default) and <code>"o"</code>.
</p>
</li>
<li> <p><code>cex</code>: Amount by which text on the plot should be scaled relative to the default (which is <code>1</code>), as numeric. To be used for scaling of all texts at once.
</p>
</li>
<li> <p><code>cex.axis</code>: Amount by which axis annotations should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.lab</code>: Amount by which axis labels should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.leg</code>: Amount by which legend text should be scaled, as numeric value.
</p>
</li>
<li> <p><code>circles</code>: Manual definition of circles to be drawn, as numeric vector of the form c(inner circle, outer circle, interval between the circles).
</p>
</li>
<li> <p><code>col</code>: Vector of colours &ndash; one colour for each wind speed bin or a single colour if <code>energy</code> only contains the total energy per direction sector.
</p>
</li>
<li> <p><code>col.axis</code>: Colour to be used for axis annotations &ndash; default is <code>"gray45"</code>.
</p>
</li>
<li> <p><code>col.border</code>: Colour to be used for sector borders &ndash; default is <code>NULL</code> (no border is drawn).
</p>
</li>
<li> <p><code>col.circle</code>: Colour to be used for circles &ndash; default is <code>"gray45"</code>.
</p>
</li>
<li> <p><code>col.cross</code>: Colour to be used for axis lines &ndash; default is <code>"gray45"</code>.
</p>
</li>
<li> <p><code>col.lab</code>: Colour to be used for axis labels &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.leg</code>: Colour to be used for legend text &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>fg</code>: If <code>TRUE</code>, sectors are plotted in foreground (on top of axis lines and circles) &ndash; default is <code>FALSE</code>.
</p>
</li>
<li> <p><code>lty.circle</code>: Line type of circles &ndash; default is <code>"dashed"</code>. See <code><a href="graphics.html#topic+par">par</a></code> for available line types.
</p>
</li>
<li> <p><code>lty.cross</code>: Line type of axis lines &ndash; default is <code>"solid"</code>. See <code><a href="graphics.html#topic+par">par</a></code> for available line types.
</p>
</li>
<li> <p><code>lwd.border</code>: Line width of the sector borders &ndash; default is <code>0.5</code>. Only used if <code>col.border</code> is set.
</p>
</li>
<li> <p><code>lwd.circle</code>: Line width of circles, as numeric value &ndash; default is <code>0.7</code>.
</p>
</li>
<li> <p><code>lwd.cross</code>: Line width of axis lines, as numeric value &ndash; default is <code>0.7</code>.
</p>
</li>
<li> <p><code>pos.axis</code>: Position of axis labels in degree, as numeric value &ndash; default is <code>60</code>.
</p>
</li>
<li> <p><code>sec.space</code>: Space between plotted sectors, as numeric value between <code>0</code> and <code>1</code> &ndash; default is <code>0.2</code>.
</p>
</li>
<li> <p><code>title.leg</code>: Alternative legend title, as string.
</p>
</li>
<li> <p><code>width.leg</code>: Widths of legend space relative to plot space, as numeric value between <code>0</code> and <code>1</code>. If <code>0</code>, the legend is omitted, default value is <code>0.2</code>.
</p>
</li>
<li> <p><code>x.intersp</code>: Horizontal interspacing factor for legend text, as numeric &ndash; default is <code>0.4</code>.
</p>
</li>
<li> <p><code>y.intersp</code>: Vertical line distance for legend text, as numeric &ndash; default is <code>0.4</code>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>References</h3>

<p>Fördergesellschaft Windenergie e.V. (2007) Technical Guidelines for Wind Turbines, Part 6: Determination of Wind Potential and Energy Yields, Revision 7
</p>
<p>International Organisation for Standardization (1975) ISO 2533:1975 Standard Atmosphere. ISO Standard
</p>
<p>Troen, I., Petersen, E.L. (1989) <em>European Wind Atlas</em>. Tønder: Laursen
</p>


<h3>See Also</h3>

<p><code><a href="#topic+weibull">weibull</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## load and prepare data
data("winddata", package="bReeze")
set1 &lt;- set(height=40, v.avg=winddata[,2], v.std=winddata[,5],
  dir.avg=winddata[,14])
set2 &lt;- set(height=30, v.avg=winddata[,6], v.std=winddata[,9],
  dir.avg=winddata[,16])
set3 &lt;- set(height=20, v.avg=winddata[,10], v.std=winddata[,13])
ts &lt;- timestamp(timestamp=winddata[,1])
neubuerg &lt;- mast(timestamp=ts, set1, set2, set3)
neubuerg &lt;- clean(mast=neubuerg)


## calculate Energy object
# calculate Weibull object
neubuerg.wb &lt;- weibull(mast=neubuerg, v.set=1, print=FALSE)

# calculate energy
neubuerg.e &lt;- energy(wb=neubuerg.wb)

# calculate energy for 1 m/s speed bins and without binning
energy(wb=neubuerg.wb, bins=0:25)
energy(wb=neubuerg.wb, bins=NULL)

# calculate energy with site specific air density
energy(wb=neubuerg.wb, rho=1.115, bins=NULL)

# change number of digits and hide results
energy(wb=neubuerg.wb, digits=2)
energy(wb=neubuerg.wb, print=FALSE)


## plot energy objects
plot(neubuerg.e)  # default
plot(neubuerg.e, show.total=FALSE)  # omit total amount
plot(neubuerg.e, col=gray(5:0/5.5), cex=0.8)  # change colours/text sizes
plot(neubuerg.e, circles=c(100, 500, 100))  # manual definition of circles
plot(neubuerg.e, fg=TRUE)  # plot sectors in foreground
plot(neubuerg.e, pos.axis=135)  # change axis label position
plot(neubuerg.e, width.leg=0)  # no legend

# freaky
plot(neubuerg.e, border.leg=heat.colors(5), bty.leg="o", 
  cex.axis=0.5, cex.lab=2, cex.leg=0.5, circles=c(80, 800, 80), 
  col=rainbow(5), col.axis="green", col.border="orange", 
  col.circle="purple", col.cross="yellow", col.lab="pink", 
  col.leg="lightblue", fg=TRUE, lwd.border=2, lwd.circle=3, lwd.cross=4, 
  lty.circle="52168319", lty.cross="12223242", sec.space=0.6, 
  title.leg="* WiNd SpEeD *", x.intersp=2, y.intersp=5)

## End(Not run)
</code></pre>

<hr>
<h2 id='energy.int'>Internal function for energy</h2><span id='topic+energy_int'></span>

<h3>Description</h3>

<p>Internal function for <code><a href="#topic+energy">energy</a></code></p>


<h3>Arguments</h3>

<table>
<tr><td><code id="energy.int_+3A_lim">lim</code></td>
<td>
<p>Lower and upper calculation limit (wind speed) as numeric vector.</p>
</td></tr>
<tr><td><code id="energy.int_+3A_k">k</code></td>
<td>
<p>Shape parameter of the weibull distribution.</p>
</td></tr>
<tr><td><code id="energy.int_+3A_a">A</code></td>
<td>
<p>Scale parameter of the weibull distribution.</p>
</td></tr>
<tr><td><code id="energy.int_+3A_rho">rho</code></td>
<td>
<p>Air density</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns energy as numeric value.</p>


<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>See Also</h3>

<p><code><a href="#topic+energy">energy</a></code></p>

<hr>
<h2 id='frequency'>Calculation of frequency and mean wind speed</h2><span id='topic+frequency'></span><span id='topic+freq'></span>

<h3>Description</h3>

<p>Calculates the frequency of occurrence and mean wind speed per wind direction sector.</p>


<h3>Usage</h3>

<pre><code class='language-R'>frequency(mast, v.set, dir.set, num.sectors=12, 
  bins=c(5, 10, 15, 20), subset, digits=3, print=TRUE)
freq(mast, v.set, dir.set, num.sectors=12, 
  bins=c(5, 10, 15, 20), subset, digits=3, print=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="frequency_+3A_mast">mast</code></td>
<td>
<p>Met mast object created by <code><a href="#topic+mast">mast</a></code>.</p>
</td></tr>
<tr><td><code id="frequency_+3A_v.set">v.set</code></td>
<td>
<p>Set used for wind speed, specified as set number or set name (optional, if <code>dir.set</code> is given).</p>
</td></tr>
<tr><td><code id="frequency_+3A_dir.set">dir.set</code></td>
<td>
<p>Set used for wind direction, specified as set number or set name (optional, if <code>v.set</code> is given).</p>
</td></tr>
<tr><td><code id="frequency_+3A_num.sectors">num.sectors</code></td>
<td>
<p>Number of wind direction sectors as integer value greater 1. Default is <code>12</code>.</p>
</td></tr>
<tr><td><code id="frequency_+3A_bins">bins</code></td>
<td>
<p>Wind speed bins as numeric vector or <code>NULL</code> if no classification is desired. Default is <code>c(5, 10, 15, 20)</code>.</p>
</td></tr>
<tr><td><code id="frequency_+3A_subset">subset</code></td>
<td>
<p>Optional start and end time stamp for a data subset, as string vector <code>c(start, end)</code>. The time stamps format shall follow the rules of ISO 8601 international standard, e.g. &quot;2012-08-08 22:55:00&quot;.</p>
</td></tr>
<tr><td><code id="frequency_+3A_digits">digits</code></td>
<td>
<p>Number of decimal places to be used for results as numeric value. Default is <code>3</code>.</p>
</td></tr>
<tr><td><code id="frequency_+3A_print">print</code></td>
<td>
<p>If <code>TRUE</code> (the default), results are printed directly.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The directional frequency of occurrence is an important factor for the design of a wind project. The influence is clear for the arrangement of turbines in a wind farm, that should be perpendicular to the most frequent wind direction. But also single turbines are affected, e.g. by fatigue tower loads in most frequent directions or in directions with highest wind speeds.
</p>


<h3>Value</h3>

<p>Returns a data frame containing:
</p>
<table>
<tr><td><code>wind.speed</code></td>
<td>
<p>Mean wind speed per direction sector.</p>
</td></tr>
<tr><td><code>total</code></td>
<td>
<p>Frequency per direction sector.</p>
</td></tr>
<tr><td><code>...</code></td>
<td>
<p>Frequencies per direction sector, for each given wind speed bin.</p>
</td></tr>
</table>


<h3>Optional graphical parameters for plotting</h3>

<p>The following graphical parameters can optionally be added to customize the plot:
</p>

<ul>
<li> <p><code>border.leg</code>: Border colour(s) for the legend. One colour for each wind speed bin or a single colour &ndash; default is same as <code>col</code>.
</p>
</li>
<li> <p><code>bty.leg</code>: Type of box to be drawn around the legend. Allowed values are <code>"n"</code> (no box, the default) and <code>"o"</code>.
</p>
</li>
<li> <p><code>cex</code>: Amount by which text on the plot should be scaled relative to the default (which is <code>1</code>), as numeric. To be used for scaling of all texts at once.
</p>
</li>
<li> <p><code>cex.axis</code>: Amount by which axis annotations should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.lab</code>: Amount by which axis labels should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.leg</code>: Amount by which legend text should be scaled, as numeric value.
</p>
</li>
<li> <p><code>circles</code>: Manual definition of circles to be drawn, as numeric vector of the form c(inner circle, outer circle, interval between the circles).
</p>
</li>
<li> <p><code>col</code>: Vector of colours &ndash; one colour for each wind speed bin or a single colour if <code>frequency</code> only contains the total frequency per direction sector.
</p>
</li>
<li> <p><code>col.axis</code>: Colour to be used for axis annotations &ndash; default is <code>"gray45"</code>.
</p>
</li>
<li> <p><code>col.border</code>: Colour to be used for sector borders &ndash; default is <code>NULL</code> (no border is drawn).
</p>
</li>
<li> <p><code>col.circle</code>: Colour to be used for circles &ndash; default is <code>"gray45"</code>.
</p>
</li>
<li> <p><code>col.cross</code>: Colour to be used for axis lines &ndash; default is <code>"gray45"</code>.
</p>
</li>
<li> <p><code>col.lab</code>: Colour to be used for axis labels &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.leg</code>: Colour to be used for legend text &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>fg</code>: If <code>TRUE</code>, sectors are plotted in foreground (on top of axis lines and circles) &ndash; default is <code>FALSE</code>.
</p>
</li>
<li> <p><code>lty.circle</code>: Line type of circles &ndash; default is <code>"dashed"</code>. See <code><a href="graphics.html#topic+par">par</a></code> for available line types.
</p>
</li>
<li> <p><code>lty.cross</code>: Line type of axis lines &ndash; default is <code>"solid"</code>. See <code><a href="graphics.html#topic+par">par</a></code> for available line types.
</p>
</li>
<li> <p><code>lwd.border</code>: Line width of the sector borders &ndash; default is <code>0.5</code>. Only used if <code>col.border</code> is set.
</p>
</li>
<li> <p><code>lwd.circle</code>: Line width of circles, as numeric value &ndash; default is <code>0.7</code>.
</p>
</li>
<li> <p><code>lwd.cross</code>: Line width of axis lines, as numeric value &ndash; default is <code>0.7</code>.
</p>
</li>
<li> <p><code>pos.axis</code>: Position of axis labels in degree, as numeric value &ndash; default is <code>60</code>.
</p>
</li>
<li> <p><code>sec.space</code>: Space between plotted sectors, as numeric value between <code>0</code> and <code>1</code> &ndash; default is <code>0.2</code>.
</p>
</li>
<li> <p><code>title.leg</code>: Alternative legend title, as string.
</p>
</li>
<li> <p><code>width.leg</code>: Widths of legend space relative to plot space, as numeric value between <code>0</code> and <code>1</code>. If <code>0</code>, the legend is omitted, default value is <code>0.2</code>.
</p>
</li>
<li> <p><code>x.intersp</code>: Horizontal interspacing factor for legend text, as numeric &ndash; default is <code>0.4</code>.
</p>
</li>
<li> <p><code>y.intersp</code>: Vertical line distance for legend text, as numeric &ndash; default is <code>0.4</code>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>References</h3>

<p>Brower, M., Marcus, M., Taylor, M., Bernadett, D., Filippelli, M., Beaucage, P., Hale, E., Elsholz, K., Doane, J., Eberhard, M., Tensen, J., Ryan, D. (2010) Wind Resource Assessment Handbook. http://www.renewablenrgsystems.com/TechSupport/~/media/Files/PDFs/wind_resource_handbook.ashx
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mast">mast</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## load and prepare data
data("winddata", package="bReeze")
set40 &lt;- set(height=40, v.avg=winddata[,2], dir.avg=winddata[,14])
set30 &lt;- set(height=30, v.avg=winddata[,6], dir.avg=winddata[,16])
set20 &lt;- set(height=20, v.avg=winddata[,10])
ts &lt;- timestamp(timestamp=winddata[,1])
neubuerg &lt;- mast(timestamp=ts, set40, set30, set20)
neubuerg &lt;- clean(mast=neubuerg)

## calculate frequency
frequency(mast=neubuerg, v.set=1)

# if only one of v.set and dir.set is given, 
# the dataset is assigned to both
frequency(mast=neubuerg, v.set=1)
frequency(mast=neubuerg, dir.set=1)

# use different datasets for wind speed and direction
frequency(mast=neubuerg, v.set=3)	# no direction in dataset
frequency(mast=neubuerg, v.set=3, dir.set=2)
frequency(mast=neubuerg, v.set="set3", dir.set="set2")	# same as above

# change number of direction sectors 
frequency(mast=neubuerg, v.set=1, num.sectors=4)
frequency(mast=neubuerg, v.set=1, num.sectors=16)

# calculate frequency for 1 m/s speed bins and without binning
frequency(mast=neubuerg, v.set=1, bins=1:25)
frequency(mast=neubuerg, v.set=1, bins=0:25)	# same as above
frequency(mast=neubuerg, v.set=1, bins=NULL)

# data subsets
frequency(mast=neubuerg, v.set=1, 
  subset=c("2009-12-01 00:00:00", "2009-12-31 23:50:00"))
frequency(mast=neubuerg, v.set=1, 
  subset=c("2010-01-01 00:00:00", NA)) # just 'start' time stamp
frequency(mast=neubuerg, v.set=1, 
  subset=c(NA, "2009-12-31 23:50:00")) # just 'end' time stamp

# change number of digits and hide results
frequency(mast=neubuerg, v.set=1, digits=2)
neubuerg.freq &lt;- frequency(mast=neubuerg, v.set=1, print=FALSE)
neubuerg.freq

## plot frequency objects
plot(neubuerg.freq)  # default
plot(neubuerg.freq, col=gray(5:0 / 5.5), cex=0.8)  # change colours/text sizes
plot(neubuerg.freq, circles=c(10, 30, 10))  # manual definition of circles
plot(neubuerg.freq, fg=TRUE)  # plot sectors in foreground
plot(neubuerg.freq, pos.axis=135) # change axis label position
plot(neubuerg.freq, width.leg=0)  # no legend

# freaky
plot(neubuerg.freq, border.leg=heat.colors(5), bty.leg="o", 
  cex.axis=0.5, cex.lab=2, cex.leg=0.5, circles=c(5, 30, 5), 
  col=rainbow(5), col.axis="green", col.border="orange", 
  col.circle="purple", col.cross="yellow", col.lab="pink", 
  col.leg="lightblue", fg=TRUE, lwd.border=2, lwd.circle=3, lwd.cross=3, 
  lty.circle="12345678", lty.cross="87654321", sec.space=0.6, 
  title.leg="* WiNd SpEeD *", x.intersp=2, y.intersp=5)

## End(Not run)
</code></pre>

<hr>
<h2 id='map.plot'>Plot map or satellite image</h2><span id='topic+map.plot'></span><span id='topic+map'></span>

<h3>Description</h3>

<p>Plots a map or satellite image of the met mast location.</p>


<h3>Usage</h3>

<pre><code class='language-R'>map.plot(mast, type=c("satellite", "terrain", "hybrid", "roadmap"), 
  zoom, label, ...)
map(mast, type=c("satellite", "terrain", "hybrid", "roadmap"), 
  zoom, label, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="map.plot_+3A_mast">mast</code></td>
<td>
<p>Met mast object created by <code><a href="#topic+mast">mast</a></code>.</p>
</td></tr>
<tr><td><code id="map.plot_+3A_type">type</code></td>
<td>
<p>Type of the map as string. One of <code>"satellite"</code> (satellite image), <code>"terrain"</code> (map with terrain information), <code>"hybrid"</code> (satellite image with map overlay) or <code>"roadmap"</code> (map).</p>
</td></tr>
<tr><td><code id="map.plot_+3A_zoom">zoom</code></td>
<td>
<p>Zoom level as integer from <code>1</code> (small scale) up to <code>18</code> (large scale) &ndash; default is <code>15</code>.</p>
</td></tr>
<tr><td><code id="map.plot_+3A_label">label</code></td>
<td>
<p>Label to be placed next to the location symbol as string. Set to <code>NA</code> to leave the label blank. If ignored, the location coordinates are used as label default.</p>
</td></tr>
<tr><td><code id="map.plot_+3A_...">...</code></td>
<td>
<p>Optional graphical parameters, see below for details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is based on the <code>RgoogleMaps</code> package by Markus Loecher, which uses the Google Static Maps API.
</p>


<h3>Optional graphical parameters</h3>

<p>The following graphical parameters can optionally be added to customize the plot:
</p>

<ul>
<li> <p><code>cex</code>: Numeric value, giving the amount by which location symbol should be scaled relative to the default (which is <code>1.5</code>).
</p>
</li>
<li> <p><code>col</code>: The colour of the symbol.
</p>
</li>
<li> <p><code>pch</code>: Location symbol, either as integer or as single character. See <code><a href="graphics.html#topic+points">points</a></code> for possible values and their interpretation &ndash;  default is <code>8</code>.
</p>
</li>
<li> <p><code>cex.lab</code>: Numeric value, giving the amount by which the label should be scaled relative to the default (which is <code>1</code>).
</p>
</li>
<li> <p><code>col.lab</code>: The colour of the label &ndash; default is same as <code>col</code>.
</p>
</li>
<li> <p><code>pos.lab</code>: Position specifier for the label. One of <code>1</code> (below symbol), <code>2</code> (left of symbol), <code>3</code> (above symbol) or <code>4</code> (right of symbol) &ndash; default is <code>4</code>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>See Also</h3>

<p><code><a href="#topic+mast">mast</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# load and prepare data
data("winddata", package="bReeze")
set1 &lt;- set(height=40, v.avg=winddata[,2])
ts &lt;- timestamp(winddata[,1])
neubuerg &lt;- mast(timestamp=ts, set1, loc=c(49.8909,11.4017))

# plot satellite image
map.plot(neubuerg)

# plot terrain map
map.plot(neubuerg, type="terrain")

# change zoom level
map.plot(neubuerg, zoom=1)
map.plot(neubuerg, zoom=18)

# change symbol (and label) 
map.plot(neubuerg, col="white", pch="+", cex=2)

# change label
map.plot(neubuerg, col.lab=3, cex.lab=1.5)
map.plot(neubuerg, pos.lab=1)
map.plot(neubuerg, label="Site #247 - Neubuerg")  # custom label
map.plot(neubuerg, label=NA)  # no label

## End(Not run)
</code></pre>

<hr>
<h2 id='mast'>Creation of met mast objects</h2><span id='topic+mast'></span><span id='topic+plot.mast'></span>

<h3>Description</h3>

<p>Creates met mast objects from one or more datasets (measurement heights). All datasets are sorted by height in descending order.</p>


<h3>Usage</h3>

<pre><code class='language-R'>mast(timestamp, ..., loc=NULL, desc=NULL)

## S3 method for class 'mast'
plot(x, set, signal=c("v.avg", "dir.avg", "turb.int"), subset, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mast_+3A_timestamp">timestamp</code></td>
<td>
<p>Time stamp as <code>POSIXlt</code> vector, e.g. created by <code><a href="#topic+timestamp">timestamp</a></code>.</p>
</td></tr>
<tr><td><code id="mast_+3A_...">...</code></td>
<td>
<p>At least one dataset created by <code><a href="#topic+set">set</a></code>. For plotting function: optional graphical parameters (see below).</p>
</td></tr>
<tr><td><code id="mast_+3A_loc">loc</code></td>
<td>
<p>Lat/lon coordinates of the site in decimal degrees as vector of two numeric values (optional).</p>
</td></tr>
<tr><td><code id="mast_+3A_desc">desc</code></td>
<td>
<p>Plain text information about the site, measurement, met mast condition, etc. as string (optional).</p>
</td></tr>
<tr><td><code id="mast_+3A_x">x</code></td>
<td>
<p>Met mast object, created by <code>mast</code>.</p>
</td></tr>
<tr><td><code id="mast_+3A_set">set</code></td>
<td>
<p>Set used for plotting specified as set number or set name. Argument is optional &ndash; if missing, all sets containing the given <code>signal</code>(s) are used.</p>
</td></tr>
<tr><td><code id="mast_+3A_signal">signal</code></td>
<td>
<p>Signal(s) to be plotted as vector of strings giving the signal names.</p>
</td></tr>
<tr><td><code id="mast_+3A_subset">subset</code></td>
<td>
<p>Optional start and end time stamp for a data subset, as string vector <code>c(start, end)</code>. The time stamps format shall follow the rules of ISO 8601 international standard, e.g. &quot;2012-08-08 22:55:00&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Valuable information about a met mast is usually provided by an installation protocol.
</p>
<p>Measurements of wind speed in several heights is required for the computation of the site's wind profile. Met masts might have mounted more than one sensor of the same type at the same height. Thus, the data of a broken sensor can later be substituted by the 'backup-sensor'.
</p>


<h3>Value</h3>

<p>Returns a met mast object, which is necessary for all data analyses. A met mast object is a list of:
</p>
<table>
<tr><td><code>timestamp</code></td>
<td>
<p>Time stamp of the observations.</p>
</td></tr>
<tr><td><code>location</code></td>
<td>
<p>Lat/lon coordinates of the site (optional).</p>
</td></tr>
<tr><td><code>description</code></td>
<td>
<p>Mast information (optional).</p>
</td></tr>
<tr><td><code>sets</code></td>
<td>
<p>List of one or more datasets (measurement heights) consisting of height information and the data.</p>
</td></tr>
</table>


<h3>Optional graphical parameters</h3>

<p>The following graphical parameters can optionally be added to customize the plot:
</p>

<ul>
<li> <p><code>bty</code>: Type of box to be drawn around the plot region. Allowed values are <code>"o"</code> (the default), <code>"l"</code>, <code>"7"</code>, <code>"c"</code>, <code>"u"</code>, or <code>"]"</code>. The resulting box resembles the corresponding upper case letter. A value of <code>"n"</code> suppresses the box. 
</p>
</li>
<li> <p><code>bty.leg</code>: Type of box to be drawn around the legend. Allowed values are <code>"n"</code> (no box, the default) and <code>"o"</code>.
</p>
</li>
<li> <p><code>cex</code>: Amount by which text on the plot should be scaled relative to the default (which is <code>1</code>), as numeric. To be used for scaling of all texts at once.
</p>
</li>
<li> <p><code>cex.axis</code>: Amount by which axis annotations should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.lab</code>: Amount by which axis labels should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.leg</code>: Amount by which legend text should be scaled, as numeric value.
</p>
</li>
<li> <p><code>col</code>: Vector of colours, one for each set plotted.
</p>
</li>
<li> <p><code>col.axis</code>: Colour to be used for axis annotations &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.box</code>: Colour to be used for the box around the plot region (if <code>bty</code>) &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.lab</code>: Colour to be used for axis labels &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.leg</code>: Colour to be used for legend text &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.ticks</code>: Colours for the axis line and the tick marks respectively &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>las</code>: Style of axis labels. One of <code>0</code> (always parallel to the axis, default), <code>1</code> (always horizontal), <code>2</code> (always perpendicular to the axis), <code>3</code> (always vertical).
</p>
</li>
<li> <p><code>legend</code>: If <code>TRUE</code> (the default) a legend is drawn.
</p>
</li>
<li> <p><code>lty</code>: Vector of line types &ndash; one for each set plotted. See <code><a href="graphics.html#topic+par">par</a></code> for available line types.
</p>
</li>
<li> <p><code>mar</code>: A numerical vector of the form c(bottom, left, top, right) which gives the number of lines of margin to be specified on the four sides of the plot (only for plots with one dataset) &ndash; default is <code>c(1, 4.5, 0, 1)</code>.
</p>
</li>
<li> <p><code>mgp</code>: A numerical vector of the form c(label, annotation, line), which gives the margin line for the axis label, axis annotation and axis line. The default is <code>c(2.5, 0.7, 0)</code>.
</p>
</li>
<li> <p><code>ylab</code>: String vector of labels for the y axis.
</p>
</li>
<li> <p><code>x.intersp</code>: Horizontal interspacing factor for legend text, as numeric &ndash; default is <code>0.4</code>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+POSIXlt">POSIXlt</a></code>, <code><a href="#topic+set">set</a></code>, <code><a href="#topic+timestamp">timestamp</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## load data, prepare sets and time stamp
data("winddata", package="bReeze")
set40 &lt;- set(height=40, v.avg=winddata[,2], v.std=winddata[,5],
  dir.avg=winddata[,14])
set30 &lt;- set(height=30, v.avg=winddata[,6], v.std=winddata[,9],
  dir.avg=winddata[,16])
set20 &lt;- set(height=20, v.avg=winddata[,10], v.std=winddata[,13])
ts &lt;- timestamp(timestamp=winddata[,1])

## create met mast object
neubuerg &lt;- mast(timestamp=ts, set40, set30, set20)  # default

# add location and description
neubuerg.2 &lt;- mast(timestamp=ts, set40, set30, set20, 
  loc=c(49.8909,11.4017), desc="Site #247 - Neubuerg")

# name sets
neubuerg.3 &lt;- mast(timestamp=ts, C1.A1=set40, C2.A2=set30, 
  C3=set20, loc=c(49.8909,11.4017), desc="Site #247 - Neubuerg")


## plot met mast (time series)
plot(neubuerg)  # default
plot(neubuerg, set=1, legend=FALSE)  # only one set
plot(neubuerg, set="set1", legend=FALSE)  # same as above 
plot(neubuerg, signal=c("v.avg", "dir.avg"))  # change signals

# change time scale
plot(neubuerg, subset=c("2010-01-01 00:10:00", NA))
plot(neubuerg, subset=c("2009-10-11 00:10:00", "2009-10-11 23:50:00"))
plot(neubuerg, set=1, signal="dir.avg", subset=c(NA, "2009-12-27 18:30:00"))

# customize plot
plot(neubuerg, bty="n", bty.leg="o", cex.axis=1.2, cex.lab=1.4, cex.leg=1.2, 
  col=c("darkblue", "red2", "darkgreen"), col.axis="darkgray", 
  col.lab="darkgray", col.leg="darkgray", col.ticks="darkgray", 
  las=0, lty=rep(1.5,3), mar=c(0.5,4,0,0.5), mgp=c(2,0.5,0), 
  ylab=c("v [m/s]","dir [deg]","ti [-]"), x.intersp=1)

## End(Not run)
</code></pre>

<hr>
<h2 id='month.stats'>Calculation of monthly statistics</h2><span id='topic+month.stats'></span><span id='topic+ms'></span><span id='topic+plot.month.stats'></span>

<h3>Description</h3>

<p>Calculates monthly statistics.</p>


<h3>Usage</h3>

<pre><code class='language-R'>month.stats(mast, set, signal="v.avg", 
  fun=c("mean", "median", "min", "max", "sd"), subset, 
  digits=3, print=TRUE)
ms(mast, set, signal="v.avg", 
  fun=c("mean", "median", "min", "max", "sd"), subset, 
  digits=3, print=TRUE)

## S3 method for class 'month.stats'
plot(x, set, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="month.stats_+3A_mast">mast</code></td>
<td>
<p>Met mast object created by <code><a href="#topic+mast">mast</a></code>.</p>
</td></tr>
<tr><td><code id="month.stats_+3A_set">set</code></td>
<td>
<p>Set used for calculation or plotting specified as set number or set name. If missing, the calculation or plotting is carried out for all datasets that contain the specified <code>signal</code>.</p>
</td></tr>
<tr><td><code id="month.stats_+3A_signal">signal</code></td>
<td>
<p>The signal to be used, as string value. Default is <code>"v.avg"</code>.</p>
</td></tr>
<tr><td><code id="month.stats_+3A_fun">fun</code></td>
<td>
<p>Statistical function, as string value &ndash; one of <code>"mean"</code> (arithmetic mean), <code>"median"</code>, <code>"min"</code> (minimum), <code>"max"</code> (maximum) or <code>"sd"</code> (standard deviation).</p>
</td></tr>
<tr><td><code id="month.stats_+3A_subset">subset</code></td>
<td>
<p>Optional start and end time stamp for a data subset, as string vector <code>c(start, end)</code>. The time stamps format shall follow the rules of ISO 8601 international standard, e.g. &quot;2012-08-08 22:55:00&quot;.</p>
</td></tr>
<tr><td><code id="month.stats_+3A_digits">digits</code></td>
<td>
<p>Number of decimal places to be used for results as numeric value. Default is <code>3</code>.</p>
</td></tr>
<tr><td><code id="month.stats_+3A_print">print</code></td>
<td>
<p>If <code>TRUE</code> (the default), results are printed directly.</p>
</td></tr>
<tr><td><code id="month.stats_+3A_x">x</code></td>
<td>
<p>Monthly statistics object created by <code>month.stats</code>.</p>
</td></tr>
<tr><td><code id="month.stats_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods. For optional graphical parameters see below.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>month.stats</code> calculates statistics of valid data for each month and year in the measurement period. Usually this function is used for the calculation of average wind speeds. Means strongly depend on the measurement period and the number of samples. One important requirement for a reliable wind assessment is a measurement period covering the full seasonal cycle of variations.  A typical bias is a measurement limited to winter months, which usually results in overestimated wind speeds.
</p>


<h3>Value</h3>

<p>Returns a list of data frames (one for each dataset) containing monthly, annual and total statistics of the specified signal.</p>


<h3>Optional graphical parameters</h3>

<p>The following graphical parameters can optionally be added to customize the plot:
</p>
    
<ul>
<li> <p><code>border</code>: Colour to be used for the border of the bars &ndash; default value is <code>"black"</code>. Use <code>border=NA</code> to omit borders.
</p>
</li>
<li> <p><code>bty</code>: Type of box to be drawn around the plot region. Allowed values are <code>"o"</code> (the default), <code>"l"</code>, <code>"7"</code>, <code>"c"</code>, <code>"u"</code>, or <code>"]"</code>. The resulting box resembles the corresponding upper case letter. A value of <code>"n"</code> suppresses the box. 
</p>
</li>
<li> <p><code>bty.leg</code>: Type of box to be drawn around the legend. Allowed values are <code>"n"</code> (no box, the default) and <code>"o"</code>.
</p>
</li>
<li> <p><code>cex</code>: Amount by which text on the plot should be scaled relative to the default (which is <code>1</code>), as numeric. To be used for scaling of all texts at once.
</p>
</li>
<li> <p><code>cex.axis</code>: Amount by which axis annotations should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.lab</code>: Amount by which axis labels should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.leg</code>: Amount by which legend text should be scaled, as numeric value.
</p>
</li>
<li> <p><code>col</code>: Vector of colours, one for each year in the measurement period.
</p>
</li>
<li> <p><code>col.axis</code>: Colour to be used for axis annotations &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.box</code>: Colour to be used for the box around the plot region (if <code>bty</code>) &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.lab</code>: Colour to be used for axis labels &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.leg</code>: Colour to be used for legend text &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.ticks</code>: Colours for the axis line and the tick marks respectively &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>las</code>: Style of axis labels. One of <code>0</code> (always parallel to the axis, default), <code>1</code> (always horizontal), <code>2</code> (always perpendicular to the axis), <code>3</code> (always vertical).
</p>
</li>
<li> <p><code>legend</code>: If <code>TRUE</code> (the default) a legend is drawn.
</p>
</li>
<li> <p><code>mar</code>: A numerical vector of the form c(bottom, left, top, right) which gives the number of lines of margin to be specified on the four sides of the plot (only for plots with one dataset) &ndash; default is <code>c(4, 5, 1, 1)</code>.
</p>
</li>
<li> <p><code>mgp</code>: A numerical vector of the form c(label, annotation, line), which gives the margin line for the axis label, axis annotation and axis line. The default is <code>c(2.5, 1, 0)</code>.
</p>
</li>
<li> <p><code>plot.names</code>: If <code>TRUE</code> (the default), the names of the datasets is plotted as second label of the y axis.
</p>
</li>
<li> <p><code>pos.leg</code>: Position of legend &ndash; one of <code>"bottomright"</code>, <code>"bottom"</code>, <code>"bottomleft"</code>, <code>"left"</code>, <code>"topleft"</code>, <code>top</code>, <code>"topright"</code>, <code>"right"</code> or <code>"center"</code>.
</p>
</li>
<li> <p><code>xlab</code>: Alternative label for the x axis.
</p>
</li>
<li> <p><code>ylab</code>: Alternative label for the y axis.
</p>
</li>
<li> <p><code>ylim</code>: Limits of the y axis, as vector of two values.
</p>
</li>
<li> <p><code>x.intersp</code>: Horizontal interspacing factor for legend text, as numeric &ndash; default is <code>0.4</code>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>References</h3>

<p>Brower, M., Marcus, M., Taylor, M., Bernadett, D., Filippelli, M., Beaucage, P., Hale, E., Elsholz, K., Doane, J., Eberhard, M., Tensen, J., Ryan, D. (2010) Wind Resource Assessment Handbook. http://www.renewablenrgsystems.com/TechSupport/~/media/Files/PDFs/wind_resource_handbook.ashx
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mast">mast</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## load and prepare data
data("winddata", package="bReeze")
set40 &lt;- set(height=40, v.avg=winddata[,2], v.max=winddata[,3])
set30 &lt;- set(height=30, v.avg=winddata[,6], v.max=winddata[,7])
set20 &lt;- set(height=20, v.avg=winddata[,10])
ts &lt;- timestamp(timestamp=winddata[,1])
neubuerg &lt;- mast(timestamp=ts, set40, set30, set20)
neubuerg &lt;- clean(mast=neubuerg)

## calculate monthly means
neubuerg.stats &lt;- month.stats(mast=neubuerg)  # default
month.stats(mast=neubuerg, set=1)  # one dataset
month.stats(mast=neubuerg, set="set1")  # same as above
month.stats(mast=neubuerg, signal="v.max")  # change signal

# calculate monthly median, min, max and standard deviation
month.stats(mast=neubuerg, fun="median")
month.stats(mast=neubuerg, fun="min")
month.stats(mast=neubuerg, fun="max")
month.stats(mast=neubuerg, fun="sd")

# data subsets
month.stats(mast=neubuerg, 
  subset=c("2009-12-01 00:10:00", "2009-12-31 23:50:00"))
month.stats(mast=neubuerg, 
  subset=c("2010-01-01 00:10:00", NA)) # just 'start' time stamp
month.stats(mast=neubuerg, 
  subset=c(NA, "2009-12-31 23:50:00")) # just 'end' time stamp

month.stats(mast=neubuerg, digits=2)  # change number of digits
neubuerg.ms &lt;- month.stats(mast=neubuerg, print=FALSE)  # hide results
neubuerg.ms


## plot month stats object
plot(neubuerg.ms)  # default
plot(neubuerg.ms, set=1)  # one dataset
plot(neubuerg.ms, set="set1")  # same as above

# customize plot
plot(neubuerg.ms, border="darkgray", bty="l", cex.axis=0.7, 
  cex.lab=0.9, col=c(gray(0.3), gray(0.7)), col.axis="darkgray", 
  col.box="darkgray", col.lab="darkgray", col.ticks="darkgray", las=0, 
  legend=FALSE, mgp=c(2, 0.7, 0), plot.names=FALSE, ylim=c(0,7), 
  ylab="Wind speed [m/s]")

## End(Not run)
</code></pre>

<hr>
<h2 id='month.stats.int'>Internal function for month.stats</h2><span id='topic+month_stats_int'></span>

<h3>Description</h3>

<p>Internal function for <code><a href="#topic+month.stats">month.stats</a></code></p>


<h3>Arguments</h3>

<table>
<tr><td><code id="month.stats.int_+3A_data">data</code></td>
<td>
<p>Data vector</p>
</td></tr>
<tr><td><code id="month.stats.int_+3A_fun">fun</code></td>
<td>
<p>Function</p>
</td></tr>
<tr><td><code id="month.stats.int_+3A_ts">ts</code></td>
<td>
<p>Time stamp</p>
</td></tr>
<tr><td><code id="month.stats.int_+3A_years">years</code></td>
<td>
<p>Vector of measurement period</p>
</td></tr>
<tr><td><code id="month.stats.int_+3A_digits">digits</code></td>
<td>
<p>Number of decimal places.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns data frame with monthly statistics.</p>


<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>See Also</h3>

<p><code><a href="#topic+month.stats">month.stats</a></code></p>

<hr>
<h2 id='pc'>Import power curve from file</h2><span id='topic+pc'></span><span id='topic+pc.default'></span><span id='topic+pc.read'></span><span id='topic+plot.pc'></span>

<h3>Description</h3>

<p>Imports a power curve from a WAsP 'wgt' file or a WindPower program 'pow' file.</p>


<h3>Usage</h3>

<pre><code class='language-R'>pc(pc, ...)

## Default S3 method:
pc(pc, rho=1.225, rated.p, desc, ...)
## S3 method for class 'read'
pc(pc, ...)
## S3 method for class 'pc'
plot(x, cp=TRUE, ct=TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pc_+3A_pc">pc</code></td>
<td>
<p><code>list</code> or <code>data.frame</code> of power curve variables &ndash; v (wind speed in m/s), p (corresponding power output in kW), cp (power coefficient, optional), ct (thrust coefficient, optional), all as numeric vectors of same length.
Or the name of, or the path to a 'wgt' or 'pow' file containing power curve data.</p>
</td></tr>
<tr><td><code id="pc_+3A_rho">rho</code></td>
<td>
<p>Air density as numeric value. Default is <code>1.225</code> kg/m3 according to the International Standard Atmosphere (ISA) at sea level and 15 degrees Celsius.</p>
</td></tr>
<tr><td><code id="pc_+3A_rated.p">rated.p</code></td>
<td>
<p>Rated power of wind turbine in kW as numeric value. If not given, the rated power is set to the maximum value of <code>p</code>.</p>
</td></tr>
<tr><td><code id="pc_+3A_desc">desc</code></td>
<td>
<p>Plain text information about the wind turbine as string (optional).</p>
</td></tr>
<tr><td><code id="pc_+3A_x">x</code></td>
<td>
<p>Power curve object created by <code>pc</code>.</p>
</td></tr>
<tr><td><code id="pc_+3A_cp">cp</code></td>
<td>
<p>If <code>TRUE</code> (the default), the power coefficient (cp) is added to the plot (if available).</p>
</td></tr>
<tr><td><code id="pc_+3A_ct">ct</code></td>
<td>
<p>If <code>TRUE</code> (the default), the thrust coefficient (ct) is added to the plot (if available).</p>
</td></tr>
<tr><td><code id="pc_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods. For optional graphical parameters see below.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><em>Power curve</em>
</p>
<p>A power curve characterizes the power production of a wind turbine and gives the amount of generated electrical power output as a function of wind speed. The theoretical power curve of a turbine is defined as:
</p>

<table>
<tr>
 <td style="text-align: left;">
	</td><td style="text-align: left;"> <code class="reqn">P \propto v^3</code> </td><td style="text-align: left;"> <code class="reqn">\mbox{for} \ v&lt;v_{rated}</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
	</td><td style="text-align: left;"> <code class="reqn">P = P_{rated}</code> </td><td style="text-align: left;"> <code class="reqn">\mbox{for} \ v&gt;v_{rated}</code></td>
</tr>

</table>

<p>Hence the generated power is proportional to the wind speed cubed, for wind speeds lower than rated wind speed. For higher wind speeds the generated power is equal to the rated power of the turbine.
</p>
<p>Conventionally a power curve consists of pairs of wind speed and power in 0.5 or 1 m/s wind speed bins, starting at 0 m/s or the cut-in wind speed of the turbine and ending with the cut-out wind speed, e.g. at about 25 m/s.
</p>
<p><em>Coefficients</em>
</p>
<p>The power coefficient <code class="reqn">c_p</code> is defined as:
</p>
<p style="text-align: center;"><code class="reqn">c_p = \frac{P_t}{P}</code>
</p>

<p>where <code class="reqn">P_t</code> is the ratio of the electrical power extracted by the wind turbine and <code class="reqn">P</code> is the energy available in the wind stream. According to Betz's law, the theoretically achievable power coefficient is approximately 0.59. However, no wind turbine will obtain this value, due to inefficiencies and various losses of the machine.
</p>
<p>The thrust coefficient is a turbine specific characteristic and used for the modelling of wake effects. Therefore it is an important parameter for wind farm configuration.
</p>
<p><code>bReeze</code> provides several power curves of common manufacturers, that can be read from the package directory. See examples for usage.
</p>
<p><em>Available 'wtg' files</em>
</p>

<table>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Nordex_N80_2.5MW </td><td style="text-align: left;"> Nordex_N90_2.5MW_HS </td><td style="text-align: left;"> Nordex_N90_2.5MW_LS </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Nordex_N100_2.5MW </td><td style="text-align: left;"> PowerWind_56_900kW </td><td style="text-align: left;"> PowerWind_90_2.5MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Vestas_V52_850kW </td><td style="text-align: left;"> Vestas_V60_850kW </td><td style="text-align: left;"> Vestas_V80_2.0MW_os </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Vestas_V80_2.0MW </td><td style="text-align: left;"> Vestas_V82_1650kW </td><td style="text-align: left;"> Vestas_V90_1.8MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Vestas_V90_2.0MW </td><td style="text-align: left;"> Vestas_V90_3.0MW </td><td style="text-align: left;"> Vestas_V100_1.8MW_50Hz </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Vestas_V100_1.8MW_60Hz </td><td style="text-align: left;"> Vestas_V112_3.0MW </td><td style="text-align: left;">
</td>
</tr>

</table>

<p><em>Available 'pow' files</em>
</p>

<table>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Bonus_82.4m_2.3MW </td><td style="text-align: left;"> Bonus_MKIV_600kW </td><td style="text-align: left;"> Clipper_LibertyC89_2.5MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Clipper_LibertyC93_2.5MW </td><td style="text-align: left;"> Clipper_LibertyC96_2.5MW </td><td style="text-align: left;"> Clipper_LibertyC100_2.5MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Enercon_E33_330kW </td><td style="text-align: left;"> Enercon_E40_500kW </td><td style="text-align: left;"> Enercon_E44_900kW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Enercon_E48_800kW </td><td style="text-align: left;"> Enercon_E53_800kW </td><td style="text-align: left;"> Enercon_E66_1870kW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Enercon_E66_2000kW </td><td style="text-align: left;"> Enercon_E70_2.3MW </td><td style="text-align: left;"> Enercon_E82_2.0MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Enercon_E82_2.3MW </td><td style="text-align: left;"> Enercon_E82_3.0MW </td><td style="text-align: left;"> Enercon_E101_3.0MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Enercon_E126_7.5MW </td><td style="text-align: left;"> EWT_DW52_500kW </td><td style="text-align: left;"> EWT_DW54_500kW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> EWT_DW90_2MW </td><td style="text-align: left;"> EWT_DW96_2MW </td><td style="text-align: left;"> Gamesa_G52_850kW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Gamesa_G58_850kW </td><td style="text-align: left;"> Gamesa_G80_2.0MW </td><td style="text-align: left;"> Gamesa_G83_2.0MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Gamesa_G87_2.0MW </td><td style="text-align: left;"> Gamesa_G90_2.0MW </td><td style="text-align: left;"> GE_1.5sl_1.5MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> GE_1.5sle_1.5MW </td><td style="text-align: left;"> GE_1.5xle_1.5MW </td><td style="text-align: left;"> GE_1.6MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> GE_2.5xl_2.5MW </td><td style="text-align: left;"> GE_3.6sl_3.6MW </td><td style="text-align: left;"> Leitwind_LTW70_1.7MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Leitwind_LTW70_2.0MW </td><td style="text-align: left;"> Leitwind_LTW77_1.5MW </td><td style="text-align: left;"> Leitwind_LTW80_1.5MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Leitwind_LTW80_1.8MW </td><td style="text-align: left;"> Leitwind_LTW101_3.0MW </td><td style="text-align: left;"> Nordex_N60_1.3MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Nordex_N70_1.5MW </td><td style="text-align: left;"> Nordex_N90_2.5MW </td><td style="text-align: left;"> Nordex_N100_2.5MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Nordex_S70_1.5MW </td><td style="text-align: left;"> Nordex_S77_1.5MW </td><td style="text-align: left;"> Nordic_1000_1.0MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> PowerWind_56_500kW </td><td style="text-align: left;"> Repower_5M_5.0MW </td><td style="text-align: left;"> Repower_MM82_2.0MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Repower_MM92_2.0MW </td><td style="text-align: left;"> Siemens_SWT-2.3MW-93m </td><td style="text-align: left;"> Siemens_SWT-2.3MW-101m </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Siemens_SWT-3.6MW-107m </td><td style="text-align: left;"> Siemens_SWT-3.6MW-120m </td><td style="text-align: left;"> Suzlon_S64_1.25MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Suzlon_S64_950kW </td><td style="text-align: left;"> Suzlon_S66_1.25MW </td><td style="text-align: left;"> Suzlon_S88_2.1MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> VensysEnergy_77_1.5MW </td><td style="text-align: left;"> Vensys_82_1.5MW </td><td style="text-align: left;"> Vensys_100_2.5MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Vensys_109_2.5MW </td><td style="text-align: left;"> Vensys_112_2.5MW </td><td style="text-align: left;"> Vestas_V27_225kW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Vestas_V39_500kW </td><td style="text-align: left;"> Vestas_V52_850kW </td><td style="text-align: left;"> Vestas_V80_2.0MW_os </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Vestas_V80_2.0MW </td><td style="text-align: left;"> Vestas_V82_1.65MW </td><td style="text-align: left;"> Vestas_V90_2.0MW </td>
</tr>
<tr>
 <td style="text-align: left;">
 </td><td style="text-align: left;"> Vestas_V90_3.0MW </td><td style="text-align: left;"> Vestas_V112_3MW </td><td style="text-align: left;"> Vestas_V164_7.0MW_os
</td>
</tr>

</table>



<h3>Value</h3>

<p>Returns a data frame binding the given data</p>


<h3>Optional graphical parameters</h3>

<p>The following graphical parameters can optionally be added to customize the plot:
</p>

<ul>
<li> <p><code>bty</code>: Type of box to be drawn around the plot region. Allowed values are <code>"o"</code> (the default), <code>"l"</code>, <code>"7"</code>, <code>"c"</code>, <code>"u"</code>, or <code>"]"</code>. The resulting box resembles the corresponding upper case letter. A value of <code>"n"</code> suppresses the box.
</p>
</li>
<li> <p><code>bty.leg</code>: Type of box to be drawn around the legend. Allowed values are <code>"n"</code> (no box, the default) and <code>"o"</code>.
</p>
</li>
<li> <p><code>cex</code>: Amount by which text on the plot should be scaled relative to the default (which is <code>1</code>), as numeric. To be used for scaling of all texts at once.
</p>
</li>
<li> <p><code>cex.axis</code>: Amount by which axis annotations should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.lab</code>: Amount by which axis labels should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.leg</code>: Amount by which legend text should be scaled, as numeric value.
</p>
</li>
<li> <p><code>col</code>: Vector of colours. The first colour is used for the power curve. If only one coefficient is available, the second colour is used for this coefficient, if both coefficients are available, the second colour is used for <code>pc</code> and the third for <code>ct</code>.
</p>
</li>
<li> <p><code>col.axis</code>: Colour to be used for axis annotations &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.box</code>: Colour to be used for the box around the plot region (if <code>bty</code>) &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.lab</code>: Colour to be used for axis labels &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.leg</code>: Colour to be used for legend text &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.ticks</code>: Colours for the axis line and the tick marks respectively &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>las</code>: Style of axis labels. One of <code>0</code> (always parallel to the axis, default), <code>1</code> (always horizontal), <code>2</code> (always perpendicular to the axis), <code>3</code> (always vertical).
</p>
</li>
<li> <p><code>legend</code>: If <code>TRUE</code> (the default) a legend is drawn.
</p>
</li>
<li> <p><code>leg.text</code>: A character or <code><a href="base.html#topic+expression">expression</a></code> vector to appear in the legend.
</p>
</li>
<li> <p><code>lty</code>: Vector of line types, assigned like <code>col</code>. See <code><a href="graphics.html#topic+par">par</a></code> for available line types.
</p>
</li>
<li> <p><code>lwd</code>: Vector of line widths, assigned like <code>col</code>. See <code><a href="graphics.html#topic+par">par</a></code> for usage.
</p>
</li>
<li> <p><code>mar</code>: A numerical vector of the form c(bottom, left, top, right) which gives the number of lines of margin to be specified on the four sides of the plot &ndash; default is <code>c(5, 5, 1, 5)</code> for one y axis and <code>c(5, 5, 1, 1)</code> for two y axes.
</p>
</li>
<li> <p><code>mgp</code>: A numerical vector of the form c(label, annotation, line), which gives the margin line for the axis label, axis annotation and axis line. The default is <code>c(3, 1, 0)</code>.
</p>
</li>
<li> <p><code>pos.leg</code>: Position of legend &ndash; one of <code>"bottomright"</code>, <code>"bottom"</code>, <code>"bottomleft"</code>, <code>"left"</code>, <code>"topleft"</code>, <code>"top"</code>, <code>"topright"</code>, <code>"right"</code> or <code>"center"</code>. Use <code>NULL</code> to hide the legend.
</p>
</li>
<li> <p><code>xlab</code>: Alternative label for the x axis.
</p>
</li>
<li> <p><code>ylab</code>: Alternative labels for the y axis, as vector of the form c(left axis label, right axis label).
</p>
</li>
<li> <p><code>ylim</code>: Limits of the y axis, as vector of two values.
</p>
</li>
<li> <p><code>x.intersp</code>: Horizontal interspacing factor for legend text, as numeric &ndash; default is <code>0.4</code>.
</p>
</li>
<li> <p><code>y.intersp</code>: Vertical line distance for legend text, as numeric &ndash; default is <code>0.4</code>.
</p>
</li></ul>



<h3>Note</h3>

<p>All power curves are provided without any warranty of accuracy and timeliness. Reliable data can only be received from the respective manufacturer directly. 
</p>


<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>Source</h3>

<p>Wind turbine generator files (*.wtg) were collected from the WAsP website:
</p>
<p>http://www.wasp.dk/Download/PowerCurves.aspx
</p>
<p>Power curve files (*.pow) were collected from the WindPower Program website:
</p>
<p>http://www.wind-power-program.com/download.htm
</p>
<p>Both links are not active anymore and the turbine list is now a bit outdated.
</p>


<h3>References</h3>

<p>Betz, A. (1966) <em>Introduction to the Theory of Flow Machines</em>. Oxford: Pergamon Press
</p>
<p>Burton, T., Sharpe, D., Jenkins, N., Bossanyi, E. (2001) <em>Wind Energy Handbook</em>. New York: Wiley
</p>
<p>International Electrotechnical Commission (2005) IEC 61400-12 Wind Turbines &ndash; Part 12-1: Power Performance Measurements of Electricity Producing Wind Turbines. IEC Standard
</p>
<p>Milan, P., Wächter, M., Barth, S., Peinke, J. (2010) Power Curves for Wind Turbines. In: Wei Tong (Ed.), Wind Power Generation and Wind Turbine Design, Chapter 18, p. 595&ndash;612, Southampton: WIT Press
</p>
<p>Ragheb, M., Ragheb, A.M. (2011) Wind Turbines Theory &ndash; The Betz Equation and Optimal Rotor Tip Speed Ratio. In: Rupp Carriveau (Ed.), Fundamental and Advanced Topics in Wind Power, Chapter 2, p. 19&ndash;38, InTech
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## create power curve
# minimal theoretic power curve
pc.1 &lt;- pc(list(1:25, c(0, 0, seq(0,1000,length.out=8), rep(1000,15))))
pc.1
	
# detailed power curve
v &lt;- seq(3, 25, 0.5)
p &lt;- c(5, 15.5, 32, 52, 71, 98, 136, 182, 230, 285, 345, 419, 497, 594, 
  687, 760, 815, 860, 886, rep(900, 26))	
cp &lt;- c(0.263, NA, 0.352, NA, 0.423, NA, 0.453, NA, 0.470, NA, 0.478, 
  NA, 0.480, NA, 0.483, NA, 0.470, NA, 0.429, NA, 0.381, NA, 0.329, 
  NA, 0.281, NA, 0.236, NA, 0.199, NA, 0.168, NA, 0.142, NA, 0.122, 
  NA, 0.105, NA, 0.092, NA, 0.080, NA, 0.071, NA, 0.063)
ct &lt;- c(0.653, NA, 0.698, NA, 0.705, NA, 0.713, NA, 0.720, NA, 0.723, NA, 
  0.724, NA, 0.727, NA, 0.730, NA, 0.732, NA, 0.385, NA, 0.301, NA, 0.242, 
  NA, 0.199, NA, 0.168, NA, 0.146, NA, 0.128, NA, 0.115, NA, 0.103, NA, 
  0.094, NA, 0.086, NA, 0.079, NA, 0.073)	

# variables as list
pc.2 &lt;- pc(list(v=v, p=p, cp=cp, ct=ct), 
  rho=1.195, rated.p=900, desc="PowerWind 56")
pc.2

# variables as data frame
pc.3 &lt;- pc(data.frame(v=v, p=p, cp=cp, ct=ct), 
  rho=1.195, rated.p=900, desc="PowerWind 56")
pc.3

## import power curve
## note: XML package required for WAsP .wtg files
vestas.v90 &lt;- pc("Vestas_V90_2.0MW.wtg")  # bReeze wtg file
repower.mm92 &lt;- pc("Repower_MM92_2.0MW.pow")  # bReeze pow file
#my.pc &lt;- pc("~/Projects/bReeze/Sandbox/myPC.wtg")  # user file


## plot power curve
plot(pc.2)  # default
plot(pc.2, cp=FALSE, ct=FALSE)  # drop coefficients

# customize plot
plot(pc.2, bty="u", bty.leg="o", cex.axis=0.8, cex.lab=0.9, 
  cex.leg=0.7, col=c("red", gray(0.4), gray(0.4)), col.axis=gray(0.2), 
  col.box=gray(0.5), col.lab=gray(0.2), col.leg=gray(0.2), 
  col.ticks=gray(0.5), las=2, leg.text=c("electric Power", 
  "power coefficient", "thrust coefficient"), lty=2:4, lwd=c(2,1,1), 
  mar=c(3.5,3.5,0.5,3.5), mgp=c(1.8,0.6,0), pos.leg="top", 
  xlab="velocity [m/s]", ylab=c("electric power", "coefficients"), 
  ylim=c(0,1100), x.intersp=1, y.intersp=1)

## End(Not run)
</code></pre>

<hr>
<h2 id='polar.plot'>Plot wind speed vs. direction</h2><span id='topic+polar.plot'></span><span id='topic+pol'></span>

<h3>Description</h3>

<p>Plots wind speeds against directions in a polar plot.</p>


<h3>Usage</h3>

<pre><code class='language-R'>polar.plot(mast, v.set=1, dir.set=1, subset, ...)
pol(mast, v.set=1, dir.set=1, subset, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="polar.plot_+3A_mast">mast</code></td>
<td>
<p>Met mast object created by <code><a href="#topic+mast">mast</a></code>.</p>
</td></tr>
<tr><td><code id="polar.plot_+3A_v.set">v.set</code></td>
<td>
<p>Set used for wind speed values, specified as set number or set name.</p>
</td></tr>
<tr><td><code id="polar.plot_+3A_dir.set">dir.set</code></td>
<td>
<p>Set used for wind direction values, specified as set number or set name.</p>
</td></tr>
<tr><td><code id="polar.plot_+3A_subset">subset</code></td>
<td>
<p>Optional start and end time stamp for a data subset, as string vector <code>c(start, end)</code>. The time stamps format shall follow the rules of ISO 8601 international standard, e.g. &quot;2012-08-08 22:55:00&quot;.</p>
</td></tr>
<tr><td><code id="polar.plot_+3A_...">...</code></td>
<td>
<p>Optional graphical parameters, see below for details.</p>
</td></tr>
</table>


<h3>Optional graphical parameters</h3>

<p>The following graphical parameters can optionally be added to customize the plot:
</p>

<ul>
<li> <p><code>cex</code>: Numeric value, giving the amount by which text on the plot should be scaled relative to the default (which is 1).
</p>
</li>
<li> <p><code>cex.axis</code>: Amount by which axis annotations should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.lab</code>: Amount by which axis labels should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.pts</code>: Amount by which the plot symbols should be scaled, as numeric value.
</p>
</li>
<li> <p><code>circles</code>: Manual definition of circles to be drawn, as numeric vector of the form c(inner circle, outer circle, interval between the circles).
</p>
</li>
<li> <p><code>col</code>: The colour of the symbols plotted.
</p>
</li>
<li> <p><code>col.axis</code>: Colour to be used for axis annotations &ndash; default is <code>"gray45"</code>.
</p>
</li>
<li> <p><code>col.circle</code>: Colour to be used for circles &ndash; default is <code>"gray45"</code>.
</p>
</li>
<li> <p><code>col.cross</code>: Colour to be used for axis lines &ndash; default is <code>"gray45"</code>.
</p>
</li>
<li> <p><code>col.lab</code>: Colour to be used for axis labels &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>fg</code>: If <code>TRUE</code>, sectors are plotted in foreground (on top of axis lines and circles) &ndash; default is <code>FALSE</code>.
</p>
</li>
<li> <p><code>lty.circle</code>: Line type of circles &ndash; default is <code>"dashed"</code>. See <code><a href="graphics.html#topic+par">par</a></code> for available line types.
</p>
</li>
<li> <p><code>lty.cross</code>: Line type of axis lines &ndash; default is <code>"solid"</code>. See <code><a href="graphics.html#topic+par">par</a></code> for available line types.
</p>
</li>
<li> <p><code>lwd.circle</code>: Line width of circles, as numeric value &ndash; default is <code>0.7</code>.
</p>
</li>
<li> <p><code>lwd.cross</code>: Line width of axis lines, as numeric value &ndash; default is <code>0.7</code>.
</p>
</li>
<li> <p><code>pch</code>: Either an integer specifying a symbol or a single character to be used as symbol &ndash; default is <code>"."</code>, which is drawn much faster than other symbols. See <code><a href="graphics.html#topic+points">points</a></code> for possible values and their interpretation. 
</p>
</li>
<li> <p><code>pos.axis</code>: Position of axis labels in degree, as numeric value &ndash; default is <code>60</code>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>See Also</h3>

<p><code><a href="#topic+mast">mast</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# load and prepare data
data("winddata", package="bReeze")
set40 &lt;- set(height=40, v.avg=winddata[,2], dir.avg=winddata[,14])
set30 &lt;- set(height=30, v.avg=winddata[,6], dir.avg=winddata[,16])
set20 &lt;- set(height=20, v.avg=winddata[,10])
ts &lt;- timestamp(timestamp=winddata[,1])
neubuerg &lt;- mast(timestamp=ts, set40, set30, set20)
neubuerg &lt;- clean(mast=neubuerg)

# plot v vs. dir
polar.plot(mast=neubuerg)
polar.plot(mast=neubuerg, v.set=3, dir.set=2)
polar.plot(mast=neubuerg, v.set="set3", dir.set="set2")	# same as above

# data subsets
polar.plot(mast=neubuerg, 
  subset=c("2009-12-01 00:00:00", "2009-12-31 23:50:00"))
polar.plot(mast=neubuerg,  
  subset=c("2010-01-01 00:00:00", NA)) # just 'start' time stamp
polar.plot(mast=neubuerg, 
  subset=c(NA, "2009-12-31 23:50:00")) # just 'end' time stamp

# customize plot
polar.plot(mast=neubuerg, cex.axis=1.2, cex.lab=1.5, cex.pts=0.8, 
  circles=c(10,20,5), col="red3", col.axis=gray(0.2), col.circle=gray(0.3), 
  col.cross=gray(0.3), col.lab=gray(0.2), fg=TRUE, lty.circle="dotted", 
  lty.cross="longdash", lwd.circle=1.2, lwd.cross=1.2, pch=1, pos.axis=135)

## End(Not run)
</code></pre>

<hr>
<h2 id='set'>Creation of datasets</h2><span id='topic+set'></span>

<h3>Description</h3>

<p>Creates a dataset object, by combining all signals of one height of measurement.</p>


<h3>Usage</h3>

<pre><code class='language-R'>set(height, desc, v.avg, v.max, v.min, v.std, 
  dir.avg, dir.std, tmp, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_+3A_height">height</code></td>
<td>
<p>Height of measurement in m as numeric value.</p>
</td></tr>
<tr><td><code id="set_+3A_desc">desc</code></td>
<td>
<p>Plain text information about the set, signals, instruments, etc. as string (optional).</p>
</td></tr>
<tr><td><code id="set_+3A_v.avg">v.avg</code></td>
<td>
<p>Average of wind speed within interval in m/s as numeric vector (optional, if at least one other signal is given).</p>
</td></tr>
<tr><td><code id="set_+3A_v.max">v.max</code></td>
<td>
<p>Maximum of wind speed within interval in m/s as numeric vector (optional, if at least one other signal is given).</p>
</td></tr>
<tr><td><code id="set_+3A_v.min">v.min</code></td>
<td>
<p>Minimum of wind speed within interval in m/s as numeric vector (optional, if at least one other signal is given).</p>
</td></tr>
<tr><td><code id="set_+3A_v.std">v.std</code></td>
<td>
<p>Standard deviation of wind speed within interval in m/s as numeric vector (optional, if at least one other signal is given).</p>
</td></tr>
<tr><td><code id="set_+3A_dir.avg">dir.avg</code></td>
<td>
<p>Average of wind direction within interval in degrees from north as numeric vector (optional, if at least one other signal is given).</p>
</td></tr>
<tr><td><code id="set_+3A_dir.std">dir.std</code></td>
<td>
<p>Standard deviation of wind direction within interval in degrees from north as numeric vector (optional, if at least one other signal is given).</p>
</td></tr>
<tr><td><code id="set_+3A_tmp">tmp</code></td>
<td>
<p>Temperature in °C as numeric vector (optional, if at least one other signal is given).</p>
</td></tr>
<tr><td><code id="set_+3A_...">...</code></td>
<td>
<p>Further signals, e.g. air pressure, humidity, etc. as numeric vector (optional).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Anemometer and wind vanes are usually mounted as pairs at same or similar heights of the met mast. Signals with marginal differences in height, about 1 or 2 m, may or may not be combined to one dataset. In case of a combination of two heights the height of the anemometer should be used for the whole dataset, as in subsequent analyses wind speed might be extrapolated to other heights. A dataset shall not contain data from more than one sensor of the same type, say data of two anemometers.
</p>
<p>A typical interval of wind measurments is 10 minutes, but also other intervals are applicable.
</p>
<p>For datasets containing mean wind speed <code>v.avg</code> and its standard deviation within the time interval <code>v.std</code>, the turbulence intensity is calculated and added to the data, named <code>turb.int</code>. See <code><a href="#topic+turbulence">turbulence</a></code> for more details about turbulence intensity.
</p>


<h3>Value</h3>

<p>Returns a dataset object which is a list of:
</p>
<table>
<tr><td><code>height</code></td>
<td>
<p>Height of measurement.</p>
</td></tr>
<tr><td><code>data</code></td>
<td>
<p>Data of measured signals.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>See Also</h3>

<p><code><a href="#topic+mast">mast</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# load data
data("winddata", package="bReeze")

# minimal dataset
s &lt;- set(height=40, v.avg=winddata[,2])

# detailed dataset
s2 &lt;- set(height=40, desc=
  "C1: cup anemometer (SN: 4.3250.128), A1: wind vane (SN: 4.2800.205)", 
  v.avg=winddata[,2], v.max=winddata[,3], v.min=winddata[,4], 
  v.std=winddata[,5], dir.avg=winddata[,14], dir.std=winddata[,15])

## End(Not run)
</code></pre>

<hr>
<h2 id='subset.int'>Internal function data subsets</h2><span id='topic+subset_int'></span>

<h3>Description</h3>

<p>Internal function for data subsets</p>


<h3>Arguments</h3>

<table>
<tr><td><code id="subset.int_+3A_timestamp">timestamp</code></td>
<td>
<p>Time stamp</p>
</td></tr>
<tr><td><code id="subset.int_+3A_subset">subset</code></td>
<td>
<p>Subset, containing start and end time stamp.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns index of start and end time stamp.</p>


<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>See Also</h3>

<p><code><a href="#topic+aep">aep</a></code>, <code><a href="#topic+availability">availability</a></code>, <code><a href="#topic+energy">energy</a></code>, <code><a href="#topic+frequency">frequency</a></code>, <code><a href="#topic+month.stats">month.stats</a></code>, <code><a href="#topic+day.plot">day.plot</a></code>, <code><a href="#topic+polar.plot">polar.plot</a></code>, <code><a href="#topic+turb.iec.plot">turb.iec.plot</a></code>, <code><a href="stats.html#topic+profile">profile</a></code>, <code><a href="#topic+turbulence">turbulence</a></code>, <code><a href="#topic+weibull">weibull</a></code></p>

<hr>
<h2 id='timestamp'>Format time stamps</h2><span id='topic+timestamp'></span><span id='topic+ts'></span>

<h3>Description</h3>

<p>Converts time stamps from string to <code>POSIXlt</code>. The conversion specification (pattern) is looked up if not given as argument.</p>


<h3>Usage</h3>

<pre><code class='language-R'>timestamp(timestamp, pattern, tz)
ts(timestamp, pattern, tz)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="timestamp_+3A_timestamp">timestamp</code></td>
<td>
<p>Time stamp as string vector.</p>
</td></tr>
<tr><td><code id="timestamp_+3A_pattern">pattern</code></td>
<td>
<p>Conversion specification of time stamp as string (optional). See Details for usage.</p>
</td></tr>
<tr><td><code id="timestamp_+3A_tz">tz</code></td>
<td>
<p>Optional character string specifying the time zone to be used for the conversion. System-specific (see <code><a href="base.html#topic+as.POSIXlt">as.POSIXlt</a></code>), but <code>""</code> is the current time zone (used as default). Use <code>"?"</code> to check <code>timestamp</code> for time zone abbreviation.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the time stamp is already formatted as <code>POSIXlt</code>, the usage of <code>timestamp</code> is not necessary. <code><a href="base.html#topic+strptime">strptime</a></code> can also be used to create an applicable time stamp. Usage of <code>timestamp</code> is recommeded, since it checks the created time stamp, thus faulty time stamps are avoided.
</p>
<p><em>Pattern</em>
</p>
<p>A conversion specification is introduced by &quot;%&quot;, usually followed by a single letter. Any character in the format string not part
of a conversion specification is interpreted literally. Widely implemented conversion specifications include:
</p>

<ul>
<li> <p><code>%d</code>: day of the month as decimal number (01&ndash;31)
</p>
</li>
<li> <p><code>%m</code>: month as decimal number (01&ndash;12)
</p>
</li>
<li> <p><code>%y</code>: year without century (00&ndash;99), where values 00&ndash;68 are prefixed by 20 and 69&ndash;99 by 19
</p>
</li>
<li> <p><code>%Y</code>: year with century
</p>
</li>
<li> <p><code>%H</code>: hour as decimal number (00&ndash;23)
</p>
</li>
<li> <p><code>%M</code>: minute as decimal number (00&ndash;59)
</p>
</li>
<li> <p><code>%S</code>: second as decimal number (00&ndash;61)
</p>
</li></ul>

<p>For details see <code><a href="base.html#topic+strptime">strptime</a></code>.
</p>


<h3>Value</h3>

<p>Returns a <code>POSIXlt</code> vector.</p>


<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+POSIXlt">POSIXlt</a></code>, <code><a href="base.html#topic+strptime">strptime</a></code>, <code><a href="#topic+mast">mast</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# load and prepare data
data("winddata", package="bReeze")

# format time stamp
timestamp &lt;- timestamp(timestamp=winddata[,1])

# format time stamp with given pattern
timestamp.2 &lt;- timestamp(timestamp=winddata[,1], "%d.%m.%Y %H:%M")

# wrong pattern (
timestamp.2 &lt;- timestamp(timestamp=winddata[,1], "%d.%m.%y %H:%M")

# strange time stamp pattern
ts &lt;- c("TS 08/2012-10 8h10m30s", "TS 08/2012-10 8h20m30s", 
  "TS 08/2012-10 8h30m30s")
timestamp.3 &lt;- timestamp(timestamp=ts)	# pattern not found
timestamp.3 &lt;- timestamp(timestamp=ts, "TS %m/%Y-%d %Hh%Mm%Ss")

# time zones
# manually define time zone
timestamp.4 &lt;- timestamp(timestamp=winddata[,1], tz="CET")

# get time zone from timestamp
timestamp.5 &lt;- timestamp(timestamp="2012-08-08 22:55 GMT", tz="?")

## End(Not run)
</code></pre>

<hr>
<h2 id='turb.iec.plot'>Plot turbulence intensity site classification</h2><span id='topic+turb.iec.plot'></span><span id='topic+iec'></span>

<h3>Description</h3>

<p>Plots the turbulence intensity and site classification after IEC.</p>


<h3>Usage</h3>

<pre><code class='language-R'>turb.iec.plot(mast, set, subset, ...)
iec(mast, set, subset, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="turb.iec.plot_+3A_mast">mast</code></td>
<td>
<p>Met mast object created by <code>mast</code>.</p>
</td></tr>
<tr><td><code id="turb.iec.plot_+3A_set">set</code></td>
<td>
<p>Set used for plotting specified as set number or set name.</p>
</td></tr>
<tr><td><code id="turb.iec.plot_+3A_subset">subset</code></td>
<td>
<p>Optional start and end time stamp for a data subset, as string vector <code>c(start, end)</code>. The time stamps format shall follow the rules of ISO 8601 international standard, e.g. &quot;2012-08-08 22:55:00&quot;.</p>
</td></tr>
<tr><td><code id="turb.iec.plot_+3A_...">...</code></td>
<td>
<p>Optional graphical parameters, see below for details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The IEC defines wind turbine classes by wind speed and turbulence characteristics. In terms of turbulence intensity three reference values (at 15 m/s) are defined:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <em> Turbulence class</em> </td><td style="text-align: left;"> <em>Reference value</em> </td>
</tr>
<tr>
 <td style="text-align: left;">
  A </td><td style="text-align: left;"> 0.16 </td>
</tr>
<tr>
 <td style="text-align: left;">
  B </td><td style="text-align: left;"> 0.14 </td>
</tr>
<tr>
 <td style="text-align: left;">
  C </td><td style="text-align: left;"> 0.12
</td>
</tr>

</table>

<p><code>plotTurbIEC</code> plots these IEC references together with the sites values to allow for a classification.
</p>
<p>See <code><a href="#topic+turbulence">turbulence</a></code> for a definition of turbulence intensity.
</p>


<h3>Optional graphical parameters</h3>

<p>The following graphical parameters can optionally be added to customize the plot:
</p>

<ul>
<li> <p><code>border</code>: Colour, used for the border around the bars &ndash; default is <code>"white"</code>.
</p>
</li>
<li> <p><code>bty</code>: Type of box to be drawn around the plot region. Allowed values are <code>"o"</code> (the default), <code>"l"</code>, <code>"7"</code>, <code>"c"</code>, <code>"u"</code>, or <code>"]"</code>. The resulting box resembles the corresponding upper case letter. A value of <code>"n"</code> suppresses the box. 
</p>
</li>
<li> <p><code>bty.leg</code>: Type of box to be drawn around the legend. Allowed values are <code>"n"</code> (no box, the default) and <code>"o"</code>.
</p>
</li>
<li> <p><code>cex</code>: Amount by which text on the plot should be scaled relative to the default (which is <code>1</code>), as numeric. To be used for scaling of all texts at once.
</p>
</li>
<li> <p><code>cex.axis</code>: Amount by which axis annotations should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.lab</code>: Amount by which axis labels should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.leg</code>: Amount by which legend text should be scaled, as numeric value.
</p>
</li>
<li> <p><code>col</code>: Colour, used to fill the bars.
</p>
</li>
<li> <p><code>col.axis</code>: Colour to be used for axis annotations &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.box</code>: Colour to be used for the box around the plot region (if <code>bty</code>) &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.lab</code>: Colour to be used for axis labels &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.leg</code>: Colour to be used for legend text &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.ticks</code>: Colours for the axis line and the tick marks respectively &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>las</code>: Style of axis labels. One of <code>0</code> (always parallel to the axis, default), <code>1</code> (always horizontal), <code>2</code> (always perpendicular to the axis), <code>3</code> (always vertical).
</p>
</li>
<li> <p><code>legend</code>: If <code>TRUE</code> (the default) a legend is drawn.
</p>
</li>
<li> <p><code>leg.text</code>: A character or <code><a href="base.html#topic+expression">expression</a></code> vector to appear in the legend.
</p>
</li>
<li> <p><code>line</code>: Vector of three colours &ndash; one for each IEC turbulence class.
</p>
</li>
<li> <p><code>lty</code>: Vector of three line types &ndash; one for each IEC turbulence class. See <code><a href="graphics.html#topic+par">par</a></code> for available line types.
</p>
</li>
<li> <p><code>lwd</code>: Vector of three line widths &ndash; one for each IEC turbulence class. See <code><a href="graphics.html#topic+par">par</a></code> for usage.
</p>
</li>
<li> <p><code>mar</code>: A numerical vector of the form c(bottom, left, top, right) which gives the number of lines of margin to be specified on the four sides of the plot (only for plots with one dataset) &ndash; default is <code>c(4.5, 4.5, 1, 1)</code>.
</p>
</li>
<li> <p><code>mgp</code>: A numerical vector of the form c(label, annotation, line), which gives the margin line for the axis label, axis annotation and axis line. The default is <code>c(2.2, 0.7, 0)</code>.
</p>
</li>
<li> <p><code>pos.leg</code>: Position of legend &ndash; one of <code>"bottomright"</code>, <code>"bottom"</code>, <code>"bottomleft"</code>, <code>"left"</code>, <code>"topleft"</code>, <code>"top"</code>, <code>"topright"</code>, <code>"right"</code> or <code>"center"</code>. Use <code>NULL</code> to hide the legend.
</p>
</li>
<li> <p><code>space</code>: Numeric value between 0 and 1, giving the space left before each bar. Default space is <code>0.2</code>.
</p>
</li>
<li> <p><code>xlab</code>: Alternative label for the x axis.
</p>
</li>
<li> <p><code>ylab</code>: Alternative label for the y axis.
</p>
</li>
<li> <p><code>xlim</code>: Limits of the x axis, as vector of two values.
</p>
</li>
<li> <p><code>ylim</code>: Limits of the y axis, as vector of two values.
</p>
</li>
<li> <p><code>x.intersp</code>: Horizontal interspacing factor for legend text, as numeric &ndash; default is <code>0.4</code>.
</p>
</li>
<li> <p><code>y.intersp</code>: Vertical interspacing factor for legend text, as numeric &ndash; default is <code>0.8</code>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>References</h3>

<p>International Electrotechnical Commission (2005) IEC 61400-1 Wind Turbines &ndash; Part 1: Design Requirements. IEC Standard
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mast">mast</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# load and prepare data
data("winddata", package="bReeze")
set40 &lt;- set(height=40, v.avg=winddata[,2], v.std=winddata[,5])
set30 &lt;- set(height=30, v.avg=winddata[,6], v.std=winddata[,9])
set20 &lt;- set(height=20, v.avg=winddata[,10], v.std=winddata[,13])
ts &lt;- timestamp(timestamp=winddata[,1])
neubuerg &lt;- mast(timestamp=ts, set40, set30, set20)
neubuerg &lt;- clean(mast=neubuerg)

# plot
turb.iec.plot(mast=neubuerg, set=1)
turb.iec.plot(mast=neubuerg, set="set1")	# same as above

# data subsets
turb.iec.plot(mast=neubuerg, set=1, 
  subset=c("2009-12-01 00:00:00", "2009-12-31 23:50:00"))
turb.iec.plot(mast=neubuerg, set=1,  
  subset=c("2010-01-01 00:00:00", NA)) # just 'start' time stamp
turb.iec.plot(mast=neubuerg, set=1, 
  subset=c(NA, "2009-12-31 23:50:00")) # just 'end' time stamp

# customize plot
turb.iec.plot(mast=neubuerg, set=1, bty="l", cex.axis=0.8, cex.lab=0.9, 
  cex.leg=0.7, col.axis="darkblue", col.box="lightblue", col.lab=
  "darkblue", col.leg="darkblue", col.ticks="darkblue", las=0, 
  leg.text=c("IEC class A", "IEC class B", "IEC class C", "measured"), 
  mar=c(3,3,0.5,0.5), mgp=c(1.8,0.5,0), pos.leg="top", xlab="v [m/s]", 
  ylab="ti [-]", xlim=c(0,25), ylim=c(0,0.5), x.intersp=1, y.intersp=1)

# customize bars
turb.iec.plot(mast=neubuerg, set=1, col="gray", border="black", space=0.6)

# customize lines
turb.iec.plot(mast=neubuerg, set=1, line=gray(1:3 / 10), lty=2:4, 
  lwd=0.5:2.5)

## End(Not run)
</code></pre>

<hr>
<h2 id='turbulence'>Calculation of turbulence intensity</h2><span id='topic+turbulence'></span><span id='topic+turb'></span>

<h3>Description</h3>

<p>Calculates turbulence intensity and mean wind speed for each given direction sector.</p>


<h3>Usage</h3>

<pre><code class='language-R'>turbulence(mast, turb.set, dir.set, num.sectors=12, 
  bins=c(5, 10, 15, 20), subset, digits=3, print=TRUE)
turb(mast, turb.set, dir.set, num.sectors=12, 
  bins=c(5, 10, 15, 20), subset, digits=3, print=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="turbulence_+3A_mast">mast</code></td>
<td>
<p>Met mast object created by <code><a href="#topic+mast">mast</a></code>.</p>
</td></tr>
<tr><td><code id="turbulence_+3A_turb.set">turb.set</code></td>
<td>
<p>Set used for turbulence intensity, specified as set number or set name (optional, if <code>dir.set</code> is given).</p>
</td></tr>
<tr><td><code id="turbulence_+3A_dir.set">dir.set</code></td>
<td>
<p>Set used for wind direction, specified as set number or set name (optional, if <code>turb.set</code> is given).</p>
</td></tr>
<tr><td><code id="turbulence_+3A_num.sectors">num.sectors</code></td>
<td>
<p>Number of wind direction sectors as integer value greater 1. Default is <code>12</code>.</p>
</td></tr>
<tr><td><code id="turbulence_+3A_bins">bins</code></td>
<td>
<p>Wind speed bins as numeric vector or <code>NULL</code> if no classification is desired. Default is <code>c(5, 10, 15, 20)</code>.</p>
</td></tr>
<tr><td><code id="turbulence_+3A_subset">subset</code></td>
<td>
<p>Optional start and end time stamp for a data subset, as string vector <code>c(start, end)</code>. The time stamps format shall follow the rules of ISO 8601 international standard, e.g. &quot;2012-08-08 22:55:00&quot;.</p>
</td></tr>
<tr><td><code id="turbulence_+3A_digits">digits</code></td>
<td>
<p>Number of decimal places to be used for results as numeric value. Default is <code>3</code>.</p>
</td></tr>
<tr><td><code id="turbulence_+3A_print">print</code></td>
<td>
<p>If <code>TRUE</code> (the default), results are printed directly.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Turbulence can be perceived as wind speed fluctuations on a relatively short time scale and it strongly depends on surface roughness, terrain features, as well as thermal effects. High turbulence should be avoided, since it is a main driver of fatigue loads and might decrease energy output. A measure of the overall level of turbulence, is the turbulence intensity <code class="reqn">I</code>, which is defined as:
</p>
<p style="text-align: center;"><code class="reqn">I = \frac{\sigma}{\bar v}</code>
</p>

<p>where <code class="reqn">\sigma</code> is the standard deviation of wind speed &ndash; usually measured over a 10-minutes period &ndash; and <code class="reqn">\bar v</code> is the mean wind speed over this period. 
</p>


<h3>Value</h3>

<p>Returns a data frame containing:
</p>
<table>
<tr><td><code>wind.speed</code></td>
<td>
<p>Mean wind speed for each direction sector.</p>
</td></tr>
<tr><td><code>total</code></td>
<td>
<p>Total turbulence intensity for each direction sector.</p>
</td></tr>
<tr><td><code>...</code></td>
<td>
<p>Turbulence intensities per direction sector for each given wind speed bin.</p>
</td></tr>
</table>


<h3>Optional graphical parameters for plotting</h3>

<p>The following graphical parameters can optionally be added to customize the plot:
</p>

<ul>
<li> <p><code>cex</code>: Numeric value, giving the amount by which text on the plot should be scaled relative to the default (which is 1).
</p>
</li>
<li> <p><code>cex.axis</code>: Amount by which axis annotations should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.lab</code>: Amount by which axis labels should be scaled, as numeric value.
</p>
</li>
<li> <p><code>circles</code>: Manual definition of circles to be drawn, as numeric vector of the form c(inner circle, outer circle, interval between the circles).
</p>
</li>
<li> <p><code>col</code>: Colour to be used for the sectors.
</p>
</li>
<li> <p><code>col.axis</code>: Colour to be used for axis annotations &ndash; default is <code>"gray45"</code>.
</p>
</li>
<li> <p><code>col.border</code>: Colour to be used for sector borders &ndash; default is <code>NULL</code> (no border is drawn).
</p>
</li>
<li> <p><code>col.circle</code>: Colour to be used for circles &ndash; default is <code>"gray45"</code>.
</p>
</li>
<li> <p><code>col.cross</code>: Colour to be used for axis lines &ndash; default is <code>"gray45"</code>.
</p>
</li>
<li> <p><code>col.lab</code>: Colour to be used for axis labels &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>fg</code>: If <code>TRUE</code>, sectors are plotted in foreground (on top of axis lines and circles) &ndash; default is <code>FALSE</code>.
</p>
</li>
<li> <p><code>lty.circle</code>: Line type of circles &ndash; default is <code>"dashed"</code>. See <code><a href="graphics.html#topic+par">par</a></code> for available line types.
</p>
</li>
<li> <p><code>lty.cross</code>: Line type of axis lines &ndash; default is <code>"solid"</code>. See <code><a href="graphics.html#topic+par">par</a></code> for available line types.
</p>
</li>
<li> <p><code>lwd.border</code>: Line width of the sector borders &ndash; default is <code>0.5</code>. Only used if <code>col.border</code> is set.
</p>
</li>
<li> <p><code>lwd.circle</code>: Line width of circles, as numeric value &ndash; default is <code>0.7</code>.
</p>
</li>
<li> <p><code>lwd.cross</code>: Line width of axis lines, as numeric value &ndash; default is <code>0.7</code>.
</p>
</li>
<li> <p><code>pos.axis</code>: Position of axis labels in degree, as numeric value &ndash; default is <code>60</code>.
</p>
</li>
<li> <p><code>sec.space</code>: Space between plotted sectors, as numeric value between <code>0</code> and <code>1</code> &ndash; default is <code>0.2</code>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>References</h3>

<p>Albers, A. (2010) Turbulence and Shear Normalisation of Wind Turbine Power Curve. Proceedings of the EWEC 2010, Warsaw, Poland
</p>
<p>Burton, T., Sharpe, D., Jenkins, N., Bossanyi, E. (2001) <em>Wind Energy Handbook</em>. New York: Wiley
</p>
<p>Langreder, W. (2010) Wind Resource and Site Assessment. In: Wei Tong (Ed.), Wind Power Generation and Wind Turbine Design, Chapter 2, p. 49&ndash;87, Southampton: WIT Press
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mast">mast</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## load and prepare data
data("winddata", package="bReeze")
set40 &lt;- set(height=40, v.avg=winddata[,2], v.std=winddata[,5],
  dir.avg=winddata[,14])
set30 &lt;- set(height=30, v.avg=winddata[,6], v.std=winddata[,9],
  dir.avg=winddata[,16])
set20 &lt;- set(height=20, v.avg=winddata[,10], v.std=winddata[,13])
ts &lt;- timestamp(timestamp=winddata[,1])
neubuerg &lt;- mast(timestamp=ts, set40, set30, set20)
neubuerg &lt;- clean(mast=neubuerg)


## calculate turbulence intensity
turbulence(mast=neubuerg, turb.set=1)  # default
turbulence(mast=neubuerg, turb.set=1, dir.set=2)  # use different datasets
turbulence(mast=neubuerg, turb.set="set1", dir.set="set2")  # same as above
turbulence(mast=neubuerg, turb.set=1, num.sectors=4)  # change sector number

# calculate turbulence intensity for 1 m/s speed bins and without binning
turbulence(mast=neubuerg, turb.set=1, bins=1:25)
turbulence(mast=neubuerg, turb.set=1, bins=NULL)

# data subset
turbulence(mast=neubuerg, turb.set=1, 
  subset=c(NA, "2010-01-01 00:00:00"))

# change number of digits and hide results
turbulence(mast=neubuerg, turb.set=1, digits=2)
neubuerg.ti &lt;- turbulence(mast=neubuerg, turb.set=1, print=FALSE)
neubuerg.ti


## plot turbulence intensity object
plot(neubuerg.ti)  # default

# change colour, text size etc.
plot(neubuerg.ti, cex.axis=0.7, cex.lab=0.9, circles=c(0.05,0.20,0.05), 
  col="lightgray", col.axis="darkgray", col.border="gray", col.circle="darkgray", 
  col.cross="darkgray", col.lab="darkgray", fg=TRUE, lty.circle="dotdash", 
  lty.cross="longdash", lwd.border=1.2, lwd.circle=1.2, lwd.cross=1.2, 
  pos.axis=135, sec.space=0.6)

## End(Not run)
</code></pre>

<hr>
<h2 id='uncertainty'>Uncertainty assessment</h2><span id='topic+uncertainty'></span><span id='topic+uc'></span><span id='topic+plot.uncertainty'></span>

<h3>Description</h3>

<p>Calculates probability of exceedance based of AEP data and given uncertainties of applied methods.</p>


<h3>Usage</h3>

<pre><code class='language-R'>uncertainty(aep, uc.values, uc.names, prob=seq(5,95,5), 
  digits=c(0,0), print=TRUE)
uc(aep, uc.values, uc.names, prob=seq(5,95,5), 
  digits=c(0,0), print=TRUE)

## S3 method for class 'uncertainty'
plot(x, type=c("prob", "uncert"), p.values=c(50,75,90), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="uncertainty_+3A_aep">aep</code></td>
<td>
<p>AEP object created by <code><a href="#topic+aep">aep</a></code>.</p>
</td></tr>
<tr><td><code id="uncertainty_+3A_uc.values">uc.values</code></td>
<td>
<p>Uncertainty values (in percent) for applied methods as numeric vector.</p>
</td></tr>
<tr><td><code id="uncertainty_+3A_uc.names">uc.names</code></td>
<td>
<p>Names of the uncertainty components. Normally a string vector of the same length as <code>uc.values</code>. If <code>uc.names</code> is a string vector with the length of <code>uc.values</code> + 1, the calculated total uncertainty is named after the additional name (default is &quot;total&quot;). If <code>uc.names</code> is <code>NULL</code>, the methods are numbered consecutively.</p>
</td></tr>
<tr><td><code id="uncertainty_+3A_prob">prob</code></td>
<td>
<p>Probability values used for the probability of exceedance analysis. Default is <code>seq(5,95,5)</code>.</p>
</td></tr>
<tr><td><code id="uncertainty_+3A_digits">digits</code></td>
<td>
<p>Number of decimal places to be used for results as numeric vector. The first value is used for uncertainties of applied methods, the second for probability of exceedance results. Default is <code>c(0,0)</code>.</p>
</td></tr>
<tr><td><code id="uncertainty_+3A_print">print</code></td>
<td>
<p>If <code>TRUE</code>, results are printed directly.</p>
</td></tr>
<tr><td><code id="uncertainty_+3A_x">x</code></td>
<td>
<p>Uncertainty object created by <code>uncertainty</code>.</p>
</td></tr>
<tr><td><code id="uncertainty_+3A_type">type</code></td>
<td>
<p>Type of plot as string. One of <code>"prob"</code> (probability of exceedance plot) or <code>"uncert"</code> (uncertainties overview plot).</p>
</td></tr>
<tr><td><code id="uncertainty_+3A_p.values">p.values</code></td>
<td>
<p>The P-values highlighted in the plot as numeric vector &ndash; default is P50, P75 and P90.</p>
</td></tr>
<tr><td><code id="uncertainty_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods. For optional graphical parameters see below.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A wind resource assessment, like every statistical analysis, is only complete with an accompanying uncertainty assessment. <code>uncertainty</code> provides a simple tool to arrange uncertainties of the methods applied and analyse their approximate effects to the energy output of a turbine. The total uncertainty arises from many uncertainty components of different type and impact. Common components are wind measurement (sensor quality/calibration, mast influences, etc.), data analysis (missing data, data selection, simplifications/assumptions etc.), long term data (reference data, length of measuring period, etc.), flow modelling (horizontal and vertical extrapolations, etc.) or power curve (measurement quality, assumptions, etc.).
</p>
<p>Assuming all uncertainty components to be independent from each other, the combined standard uncertainty is calculated as follows:
</p>
<p style="text-align: center;"><code class="reqn">U = \sqrt{u_1 + u_2 + ... + u_n}</code>
</p>

<p>where <code class="reqn">U</code> is the total uncertainty and <code class="reqn">u_1</code> untill <code class="reqn">u_n</code> are the uncertainty components.
</p>


<h3>Value</h3>

<p>Returns a list containing:
</p>
<table>
<tr><td><code>uncertainty.meth</code></td>
<td>
<p>Table of uncertainty components and their uncertainty value.</p>
</td></tr>
<tr><td><code>prob.exceedance</code></td>
<td>
<p>Table of probability values and the related annual energy production.</p>
</td></tr>
</table>


<h3>Optional graphical parameters</h3>

<p><em>The following graphical parameters can optionally be added to customize the probability of exceedance plot (<code>type="prob"</code>):</em>
</p>

<ul>
<li> <p><code>bty</code>: Type of box to be drawn around the plot region. Allowed values are <code>"o"</code> (the default), <code>"l"</code>, <code>"7"</code>, <code>"c"</code>, <code>"u"</code>, or <code>"]"</code>. The resulting box resembles the corresponding upper case letter. A value of <code>"n"</code> suppresses the box.
</p>
</li>
<li> <p><code>bty.leg</code>: Type of box to be drawn around the legend. Allowed values are <code>"n"</code> (no box, the default) and <code>"o"</code>.
</p>
</li>
<li> <p><code>cex</code>: Amount by which text on the plot should be scaled relative to the default (which is <code>1</code>), as numeric. To be used for scaling of all texts at once.
</p>
</li>
<li> <p><code>cex.axis</code>: Amount by which axis annotations should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.lab</code>: Amount by which axis labels should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.leg</code>: Amount by which legend text should be scaled, as numeric value.
</p>
</li>
<li> <p><code>col</code>: Vector of n colours &ndash; [1] for the probability curve, [2:n] for the highlighted P-values (<code>p.values</code>).
</p>
</li>
<li> <p><code>col.axis</code>: Colour to be used for axis annotations &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.box</code>: Colour to be used for the box around the plot region (<code>bty</code>) &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.lab</code>: Colour to be used for axis labels &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.leg</code>: Colour to be used for legend text &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.ticks</code>: Colours for the axis line and the tick marks respectively &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>las</code>: Style of axis labels. One of <code>0</code> (always parallel to the axis, default), <code>1</code> (always horizontal), <code>2</code> (always perpendicular to the axis), <code>3</code> (always vertical).
</p>
</li>
<li> <p><code>legend</code>: If <code>TRUE</code> (the default) a legend is drawn.
</p>
</li>
<li> <p><code>leg.text</code>: Vector of strings used as alternative legend text.
</p>
</li>
<li> <p><code>lty</code>: Vector of line types &ndash; usage like <code>col</code>. See <code><a href="graphics.html#topic+par">par</a></code> for available line types.
</p>
</li>
<li> <p><code>lwd</code>: Vector of line widths &ndash; usage like <code>col</code>. See <code><a href="graphics.html#topic+par">par</a></code> for usage.
</p>
</li>
<li> <p><code>mar</code>: A numerical vector of the form c(bottom, left, top, right) which gives the number of lines of margin to be specified on the four sides of the plot &ndash; default is <code>c(4.5, 4.5, 1, 1)</code>.
</p>
</li>
<li> <p><code>mgp</code>: A numerical vector of the form c(label, annotation, line), which gives the margin line for the axis label, axis annotation and axis line. The default is <code>c(2.7, 0.7, 0)</code>.
</p>
</li>
<li> <p><code>pos.leg</code>: Position of legend &ndash; one of <code>"bottomright"</code>, <code>"bottom"</code>, <code>"bottomleft"</code>, <code>"left"</code>, <code>"topleft"</code>, <code>"top"</code>, <code>"topright"</code>, <code>"right"</code> or <code>"center"</code>.
</p>
</li>
<li> <p><code>xlab</code>: Alternative label for the x axis.
</p>
</li>
<li> <p><code>ylab</code>: Alternative label for the y axis.
</p>
</li>
<li> <p><code>xlim</code>: Limits of the x axis, as vector of two values.
</p>
</li>
<li> <p><code>ylim</code>: Limits of the y axis, as vector of two values.
</p>
</li>
<li> <p><code>x.intersp</code>: Horizontal interspacing factor for legend text, as numeric &ndash; default is <code>0.4</code>.
</p>
</li>
<li> <p><code>y.intersp</code>: Vertical line distance for legend text, as numeric &ndash; default is <code>0.8</code>.
</p>
</li></ul>

<p><em>Optional graphical parameters for the uncertainty overview plot (<code>type="uncert"</code>):</em>
</p>

<ul>
<li> <p><code>border</code>: Colour to be used for the border of the bars &ndash; usage like <code>col</code>, as default no border is drawn.
</p>
</li>
<li> <p><code>cex</code>: Amount by which text on the plot should be scaled relative to the default (which is <code>1</code>), as numeric. To be used for scaling of all texts at once.
</p>
</li>
<li> <p><code>cex.axis</code>: Amount by which the names of the uncertainty components should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.text</code>: Amount by which the uncertainty values inside the bars should be scaled, as numeric value.
</p>
</li>
<li> <p><code>col</code>: One or a vector of colours. If one colour is specified, this colour is used for all bars. If two colours are specified, the first colour is used for uncertainty component bars and the second for the total uncertainty bar. Separate colours for each bar can also be specified.
</p>
</li>
<li> <p><code>col.axis</code>: Colour to be used for the names of the uncertainty components &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.text</code>: Colour to be used for the uncertainty values inside the bars &ndash; default is <code>"white"</code>.
</p>
</li>
<li> <p><code>mar</code>: A numerical vector of the form c(bottom, left, top, right) which gives the number of lines of margin to be specified on the four sides of the plot.
</p>
</li>
<li> <p><code>mgp</code>: A numerical vector of the form c(label, annotation, line), which gives the margin line for the axis label, axis annotation and axis line. The default is <code>c(3, 1, 0)</code>.
</p>
</li>
<li> <p><code>space</code>: Numeric value between 0 and 1, giving the space left before each bar. Default space is <code>0.2</code>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>References</h3>

<p>Measnet (2009) MEASNET Procedure: Evaluation of Site Specific Wind Conditions, Version 1
</p>


<h3>See Also</h3>

<p><code><a href="#topic+aep">aep</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## load and prepare data
data("winddata", package="bReeze")
set1 &lt;- set(height=40, v.avg=winddata[,2], v.std=winddata[,5],
  dir.avg=winddata[,14])
set2 &lt;- set(height=30, v.avg=winddata[,6], v.std=winddata[,9],
  dir.avg=winddata[,16])
ts &lt;- timestamp(timestamp=winddata[,1])
neubuerg &lt;- mast(timestamp=ts, set1, set2)
neubuerg &lt;- clean(mast=neubuerg)


## calculate uncertainty
# calculate AEP
nb.wp &lt;- profile(mast=neubuerg, v.set=c(1,2), dir.set=1, 
  print=FALSE)
pw.56 &lt;- pc("PowerWind_56_900kW.wtg")
nb.aep &lt;- aep(profile=nb.wp, pc=pw.56, hub.h=71, print=FALSE)

# calculate uncertainty
uncertainty(nb.aep, uc.values=c(5,10,5,5), 
  uc.names=c("Wind Measurement Mast", "Long Term Correlation", 
  "Flow Model", "Power Curve"))

# unnamed uncertainty components
uncertainty(nb.aep, uc.values=c(5,10,5,5), 
  uc.names=NULL)

# new name for combined uncertainty
uncertainty(nb.aep, uc.values=c(5,10,5,5), 
  uc.names=c("Wind Measurement Mast", "Long Term Correlation", 
  "Flow Model", "Power Curve", "Total Uncertainty"))

# changed probability values
uncertainty(nb.aep, uc.values=c(5,10,5,5), 
  uc.names=c("Wind Measurement Mast", "Long Term Correlation", 
  "Flow Model", "Power Curve"), prob=seq(50,90,10))

# change number of digits and hide results
neubuerg.uc &lt;- uncertainty(nb.aep, uc.values=c(5,10,5,5), 
  uc.names=c("Wind Measurement Mast", "Long Term Correlation", 
  "Flow Model", "Power Curve"), digits=c(1,2), print=FALSE)
neubuerg.uc


## plot uncertainty objects - probability of exceedance plot 
plot(neubuerg.uc)  # default
plot(neubuerg.uc, p.values=c(50, 95))  # change highlighted P-values

# change colours, line types, line width and text size
plot(neubuerg.uc, col="blue", lty=c(1, 2, 3, 4), lwd=2, cex=1.2)

# freaky
plot(neubuerg.uc, bty="l", bty.leg="o", cex.axis=2, 
  cex.lab=0.5, cex.leg=0.8, col=c(5, 10, 15, 20), col.axis="sienna", 
  col.box="purple", col.lab="plum", col.leg="orchid", col.ticks="gold", 
  las=0, lty=c(8, 7, 6, 5), lwd=c(5, 3, 1, 0.5), mar=c(6, 5, 4, 3), 
  mgp=c(4, 2, 1), pos.leg="bottomleft", xlim=c(0.1, 0.9), ylim=c(1000, 2000), 
  x.intersp=2, y.intersp=1.5)


## plot uncertainty objects - uncertainty overview plot
plot(neubuerg.uc, type="uncert")  # default

# change colours and border
plot(neubuerg.uc, type="uncert", col="red", border="red4")
plot(neubuerg.uc, type="uncert", col=c(gray(0.7), gray(0.5)), 
  border=c(gray(0.6), gray(0.4)))
plot(neubuerg.uc, type="uncert", col=c(5:1), border=c(1:5))

# change text size, space and margin
plot(neubuerg.uc, type="uncert", cex=1.5, space=0.1, mar=c(1, 13, 1, 1))

# freaky
plot(neubuerg.uc, type="uncert", border=c(11, 22, 33, 44, 55), cex.axis=0.7, 
  cex.text=2, col=c("maroon", "navy", "thistle", "rosybrown", "papayawhip"), 
  col.axis="pink3", col.text="seagreen", mar=c(3, 8, 2, 1), mgp=c(0, 1, 2), space=1)

## End(Not run)
</code></pre>

<hr>
<h2 id='weibull'>Calculation of Weibull parameters</h2><span id='topic+weibull'></span><span id='topic+wb'></span><span id='topic+plot.weibull'></span>

<h3>Description</h3>

<p>Calculates the shape parameters (k) and scale parameters (A) of the Weibull distribution per direction sector.</p>


<h3>Usage</h3>

<pre><code class='language-R'>weibull(mast, v.set, dir.set, num.sectors=12, 
  subset, digits=3, print=TRUE)
wb(mast, v.set, dir.set, num.sectors=12, 
  subset, digits=3, print=TRUE)

## S3 method for class 'weibull'
plot(x, type=c("hist", "dir"), show.ak=FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="weibull_+3A_mast">mast</code></td>
<td>
<p>Met mast object created by <code><a href="#topic+mast">mast</a></code>.</p>
</td></tr>
<tr><td><code id="weibull_+3A_v.set">v.set</code></td>
<td>
<p>Set used for wind speed, specified as set number or set name (optional, if dir.set is given).</p>
</td></tr>
<tr><td><code id="weibull_+3A_dir.set">dir.set</code></td>
<td>
<p>Set used for wind direction, specified as set number or set name (optional, if <code>v.set</code> is given).</p>
</td></tr>
<tr><td><code id="weibull_+3A_num.sectors">num.sectors</code></td>
<td>
<p>Number of wind direction sectors as integer value greater 1. Default is <code>12</code>.</p>
</td></tr>
<tr><td><code id="weibull_+3A_subset">subset</code></td>
<td>
<p>Optional start and end time stamp for a data subset, as string vector <code>c(start, end)</code>. The time stamps format shall follow the rules of ISO 8601 international standard, e.g. &quot;2012-08-08 22:55:00&quot;.</p>
</td></tr>
<tr><td><code id="weibull_+3A_digits">digits</code></td>
<td>
<p>Number of decimal places to be used for results as numeric value. Default is <code>3</code>.</p>
</td></tr>
<tr><td><code id="weibull_+3A_print">print</code></td>
<td>
<p>If <code>TRUE</code>, results are printed directly.</p>
</td></tr>
<tr><td><code id="weibull_+3A_x">x</code></td>
<td>
<p>Weibull object, created by <code>weibull</code>.</p>
</td></tr>
<tr><td><code id="weibull_+3A_type">type</code></td>
<td>
<p>Plot type - one of <code>"hist"</code> (histogram plot) or <code>"dir"</code> (directional plot).</p>
</td></tr>
<tr><td><code id="weibull_+3A_show.ak">show.ak</code></td>
<td>
<p>If <code>TRUE</code> (the default), the Weibull parameters A and k are added to the legend.</p>
</td></tr>
<tr><td><code id="weibull_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods. For optional graphical parameters see below.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To evaluate the potential energy production of a site the observed data of a particular measurement period must be generalized to a wind speed distribution. This is commonly done by fitting the Weibull function to the data. The two-parametered Weibull distribution is expressed mathematically as:
</p>
<p style="text-align: center;"><code class="reqn">f(v) = \frac{k}{A} \left({\frac{v}{A}} \right)^{k-1} e^{-\left({\frac{v}{A}} \right)^k}</code>
</p>

<p>where <code class="reqn">f(v)</code> is the frequency of occurence of wind speed <code class="reqn">v</code>, <code class="reqn">A</code> is the scale parameter (measure for the wind speed) and <code class="reqn">k</code> is the shape parameter (description of the shape of the distribution).
</p>
<p>The resulting Weibull distribution characterizes the wind regime on the site and can directly be used for the calculation of the potential energy production of a wind turbine (see <code><a href="#topic+aep">aep</a></code>).
</p>


<h3>Value</h3>

<p>Returns a data frame containing:
</p>
<table>
<tr><td><code>k</code></td>
<td>
<p>Shape parameter of the Weibull distribution for each direction sector.</p>
</td></tr>
<tr><td><code>A</code></td>
<td>
<p>scale parameter of the Weibull distribution for each direction sector.</p>
</td></tr>
<tr><td><code>wind.speed</code></td>
<td>
<p>Mean wind speed of the Weibull distribution for each direction sector.</p>
</td></tr>
<tr><td><code>frequency</code></td>
<td>
<p>Frequency of the Weibull distribution for each direction sector.</p>
</td></tr>
</table>


<h3>Optional graphical parameters</h3>

<p>Graphical parameters to customize the histogram plot:
</p>
  
<ul>
<li> <p><code>border</code>: Colour, used for the border around the bars &ndash; default is <code>"white"</code>.
</p>
</li>
<li> <p><code>breaks</code>: A numeric vector giving the breakpoints between histogram cells.
</p>
</li>
<li> <p><code>bty</code>: Type of box to be drawn around the plot region. Allowed values are <code>"o"</code> (the default), <code>"l"</code>, <code>"7"</code>, <code>"c"</code>, <code>"u"</code>, or <code>"]"</code>. The resulting box resembles the corresponding upper case letter. A value of <code>"n"</code> suppresses the box. 
</p>
</li>
<li> <p><code>bty.leg</code>: Type of box to be drawn around the legend. Allowed values are <code>"n"</code> (no box, the default) and <code>"o"</code>.
</p>
</li>
<li> <p><code>cex</code>: Amount by which text on the plot should be scaled relative to the default (which is <code>1</code>), as numeric. To be used for scaling of all texts at once.
</p>
</li>
<li> <p><code>cex.axis</code>: Amount by which axis annotations should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.lab</code>: Amount by which axis labels should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.leg</code>: Amount by which legend text should be scaled, as numeric value.
</p>
</li>
<li> <p><code>col</code>: Colour, used to fill the bars.
</p>
</li>
<li> <p><code>col.axis</code>: Colour to be used for axis annotations &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.box</code>: Colour to be used for the box around the plot region (if <code>bty</code>) &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.lab</code>: Colour to be used for axis labels &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.leg</code>: Colour to be used for legend text &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.ticks</code>: Colours for the axis line and the tick marks respectively &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>las</code>: Style of axis labels. One of <code>0</code> (always parallel to the axis, default), <code>1</code> (always horizontal), <code>2</code> (always perpendicular to the axis), <code>3</code> (always vertical).
</p>
</li>
<li> <p><code>legend</code>: If <code>TRUE</code> (the default) a legend is drawn.
</p>
</li>
<li> <p><code>leg.text</code>: A character or <code><a href="base.html#topic+expression">expression</a></code> vector to appear in the legend.
</p>
</li>
<li> <p><code>line</code>: Colour, used for the Weibull fit line.
</p>
</li>
<li> <p><code>lty</code>: Line type of the Weibull fit line &ndash; see <code><a href="graphics.html#topic+par">par</a></code> for available line types.
</p>
</li>
<li> <p><code>lwd</code>: Line width for the Weibull fit line &ndash; see <code><a href="graphics.html#topic+par">par</a></code> for usage.
</p>
</li>
<li> <p><code>mar</code>: A numerical vector of the form c(bottom, left, top, right) which gives the number of lines of margin to be specified on the four sides of the plot (only for plots with one dataset) &ndash; default is <code>c(4.5, 4.5, 1, 1)</code>.
</p>
</li>
<li> <p><code>mgp</code>: A numerical vector of the form c(label, annotation, line), which gives the margin line for the axis label, axis annotation and axis line. The default is <code>c(2.2, 0.7, 0)</code>.
</p>
</li>
<li> <p><code>pos.leg</code>: Position of legend &ndash; one of <code>"bottomright"</code>, <code>"bottom"</code>, <code>"bottomleft"</code>, <code>"left"</code>, <code>"topleft"</code>, <code>"top"</code>, <code>"topright"</code>, <code>"right"</code> or <code>"center"</code>. Use <code>NULL</code> to hide the legend.
</p>
</li>
<li> <p><code>xlab</code>: Alternative label for the x axis.
</p>
</li>
<li> <p><code>ylab</code>: Alternative label for the y axis.
</p>
</li>
<li> <p><code>xlim</code>: Limits of the x axis, as vector of two values.
</p>
</li>
<li> <p><code>ylim</code>: Limits of the y axis, as vector of two values.
</p>
</li>
<li> <p><code>x.intersp</code>: Horizontal interspacing factor for legend text, as numeric &ndash; default is <code>0.4</code>.
</p>
</li>
<li> <p><code>y.intersp</code>: Vertical interspacing factor for legend text, as numeric &ndash; default is <code>0.8</code>.
</p>
</li></ul>

<p>Graphical parameters to customize the directional plot:
</p>
    
<ul>
<li> <p><code>bty</code>: Type of box to be drawn around the plot region. Allowed values are <code>"o"</code> (the default), <code>"l"</code>, <code>"7"</code>, <code>"c"</code>, <code>"u"</code>, or <code>"]"</code>. The resulting box resembles the corresponding upper case letter. A value of <code>"n"</code> suppresses the box.
</p>
</li>
<li> <p><code>bty.leg</code>: Type of box to be drawn around the legend. Allowed values are <code>"n"</code> (no box, the default) and <code>"o"</code>.
</p>
</li>
<li> <p><code>cex</code>: Amount by which text on the plot should be scaled relative to the default (which is <code>1</code>), as numeric. To be used for scaling of all texts at once.
</p>
</li>
<li> <p><code>cex.axis</code>: Amount by which axis annotations should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.lab</code>: Amount by which axis labels should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.leg</code>: Amount by which legend text should be scaled, as numeric value.
</p>
</li>
<li> <p><code>col</code>: Vector of colours for the sectoral distributions, with the length of sector number + 1, where the last colour is used for the general profile.
</p>
</li>
<li> <p><code>col.axis</code>: Colour to be used for axis annotations &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.box</code>: Colour to be used for the box around the plot region (if <code>bty</code>) &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.lab</code>: Colour to be used for axis labels &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.leg</code>: Colour to be used for legend text &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.ticks</code>: Colours for the axis line and the tick marks respectively &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>las</code>: Style of axis labels. One of <code>0</code> (always parallel to the axis, default), <code>1</code> (always horizontal), <code>2</code> (always perpendicular to the axis), <code>3</code> (always vertical).
</p>
</li>
<li> <p><code>lty</code>: Vector of line types, assigned like <code>col</code>. See <code><a href="graphics.html#topic+par">par</a></code> for usage.
</p>
</li>
<li> <p><code>lwd</code>: Vector of line widths, assigned like <code>col</code>. See <code><a href="graphics.html#topic+par">par</a></code> for usage.
</p>
</li>
<li> <p><code>mar</code>: A numerical vector of the form c(bottom, left, top, right) which gives the number of lines of margin to be specified on the four sides of the plot &ndash; default is <code>c(4.5, 4.5, 1, 1)</code>.
</p>
</li>
<li> <p><code>mgp</code>: A numerical vector of the form c(label, annotation, line), which gives the margin line for the axis label, axis annotation and axis line. The default is <code>c(2.5, 0.7, 0)</code>.
</p>
</li>
<li> <p><code>pos.leg</code>: Position of legend &ndash; one of <code>"bottomright"</code>, <code>"bottom"</code>, <code>"bottomleft"</code>, <code>"left"</code>, <code>"topleft"</code>, <code>"top"</code>, <code>"topright"</code>, <code>"right"</code> or <code>"center"</code>. Use <code>NULL</code> to hide the legend.
</p>
</li>
<li> <p><code>xlab</code>: Alternative label for the x axis.
</p>
</li>
<li> <p><code>ylab</code>: Alternative label for the y axis.
</p>
</li>
<li> <p><code>xlim</code>: Numeric vector of the x limits of the plot.
</p>
</li>
<li> <p><code>ylim</code>: Numeric vector of the y limits.
</p>
</li>
<li> <p><code>x.intersp</code>: Horizontal interspacing factor for legend text, as numeric &ndash; default is <code>0.4</code>.
</p>
</li>
<li> <p><code>y.intersp</code>: Vertical line distance for legend text, as numeric &ndash; default is <code>0.8</code>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>References</h3>

<p>Brower, M., Marcus, M., Taylor, M., Bernadett, D., Filippelli, M., Beaucage, P., Hale, E., Elsholz, K., Doane, J., Eberhard, M., Tensen, J., Ryan, D. (2010) Wind Resource Assessment Handbook. http://www.renewablenrgsystems.com/TechSupport/~/media/Files/PDFs/wind_resource_handbook.ashx
</p>
<p>Langreder, W. (2010) Wind Resource and Site Assessment. In: Wei Tong (Ed.), Wind Power Generation and Wind Turbine Design, Chapter 2, p. 49&ndash;87, Southampton: WIT Press
</p>
<p>Weibull, W. (1951) A Statistical Distribution Function of Wide Applicability. <em>Journal of Applied Mechanics &ndash; Trans. ASME</em> <b>18</b>(3), 293&ndash;297
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mast">mast</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## load and prepare data
data("winddata", package="bReeze")
set40 &lt;- set(height=40, v.avg=winddata[,2], dir.avg=winddata[,14])
set30 &lt;- set(height=30, v.avg=winddata[,6], dir.avg=winddata[,16])
set20 &lt;- set(height=20, v.avg=winddata[,10])
ts &lt;- timestamp(timestamp=winddata[,1])
neubuerg &lt;- mast(timestamp=ts, set40, set30, set20)
neubuerg &lt;- clean(mast=neubuerg)


## calculate Weibull parameters
weibull(mast=neubuerg, v.set=1)  # default

# if only one of v.set and dir.set is given, 
# the dataset is assigned to both
weibull(mast=neubuerg, v.set=1)
weibull(mast=neubuerg, dir.set=1)
weibull(mast=neubuerg, dir.set="set1")

# change number of direction sectors
weibull(mast=neubuerg, v.set=1, num.sectors=16)

# data subsets
weibull(mast=neubuerg, v.set=1, 
  subset=c("2009-12-01 00:00:00", "2009-12-31 23:50:00"))
weibull(mast=neubuerg, v.set=1, 
  subset=c("2010-01-01 00:00:00", NA)) # just 'start' time stamp
weibull(mast=neubuerg, v.set=1, 
  subset=c(NA, "2009-12-31 23:50:00")) # just 'end' time stamp

# change number of digits and hide results
neubuerg.wb &lt;- weibull(mast=neubuerg, v.set=1, digits=2, print=FALSE)


## plot weibull objects - histogram plot
plot(neubuerg.wb)  # default
plot(neubuerg.wb, type="dir")  # same as above
plot(neubuerg.wb, show.ak=TRUE)  # show parameters in legend

# customize plot
plot(neubuerg.wb, bty="l", bty.leg="l", cex.axis=1.2, cex.lab=1.4, cex.leg=0.9, 
  col.axis="darkgray", col.box="darkgray", col.lab="darkgray", col.leg="darkgray", 
  col.ticks="darkgray", las=0, leg.text=c("measured", "calculated"), 
  mar=c(3,3,0.5,0.5), mgp=c(1.8,0.5,0), pos.leg="right", xlab="velocity [m/s]", 
  ylab="frequency [%]", xlim=c(0,20), ylim=c(0,15), x.intersp=1, y.intersp=1)

# customize bars
plot(neubuerg.wb, border="darkgray", breaks=seq(0,21,0.5), 
  col="lightgray")

# customize line
plot(neubuerg.wb, line="black", lty="dotdash", lwd=2)


## plot weibull objects - directional plot
plot(neubuerg.wb, type="dir")

# show parameters in legend
plot(neubuerg.wb, type="dir", show.ak=TRUE)

# customize plot
plot(neubuerg.wb, type="dir", bty="l", bty.leg="o", cex.axis=0.8, cex.lab=0.9, 
  cex.leg=0.7, col=c(rainbow(12), gray(0.4)), col.axis=gray(0.2), col.box=gray(0.4), 
  col.lab=gray(0.2), col.leg=gray(0.2), col.ticks=gray(0.2), las=0, 
  lty=c(rep(3, 12), 1), lwd=c(rep(1, 12), 2), mar=c(3,3,0.5,0.5), mgp=c(1.5,0.5,0), 
  pos.leg="right", xlab="velocity [m/s]", ylab="frequency [m/s]", xlim=c(0,15), 
  ylim=c(0,25), x.intersp=1, y.intersp=1)

## End(Not run)
</code></pre>

<hr>
<h2 id='weibull.int'>Internal function for weibull</h2><span id='topic+weibull_int'></span>

<h3>Description</h3>

<p>Internal function for <code><a href="#topic+weibull">weibull</a></code></p>


<h3>Arguments</h3>

<table>
<tr><td><code id="weibull.int_+3A_v.dat">v.dat</code></td>
<td>
<p>Vector of wind speed data.</p>
</td></tr>
<tr><td><code id="weibull.int_+3A_msg">msg</code></td>
<td>
<p>If <code>TRUE</code>, messages are printed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the shape parameter k and scale parameter A of the weibull distribution.</p>


<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>See Also</h3>

<p><code><a href="#topic+weibull">weibull</a></code></p>

<hr>
<h2 id='winddata'>Example data for bReeze</h2><span id='topic+winddata'></span>

<h3>Description</h3>

<p>This dataset is provided as part of the <code>bReeze</code> package for use with the examples in the documantation. 
It contains measured wind speed and wind direction in a 10 minute interval, collected by a meteorological mast.
</p>


<h3>Format</h3>

<p>Data frame with 36548 observations on the following 17 variables:
</p>

<dl>
<dt><code>date_time</code></dt><dd><p>Date and time of observation as character vector.</p>
</dd>
<dt><code>v1_40m_avg</code></dt><dd><p>Average wind speed in m/s at a height of 40 m as numeric vector.</p>
</dd>
<dt><code>v1_40m_max</code></dt><dd><p>Maximum wind speed in m/s at a height of 40 m as numeric vector.</p>
</dd>
<dt><code>v1_40m_min</code></dt><dd><p>Minimum wind speed in m/s at a height of 40 m as numeric vector.</p>
</dd>
<dt><code>v1_40m_std</code></dt><dd><p>Standard deviation of wind speed in m/s at a height of 40 m as numeric vector.</p>
</dd>
<dt><code>v2_30m_avg</code></dt><dd><p>Average wind speed in m/s at a height of 30 m as numeric vector.</p>
</dd>
<dt><code>v2_30m_max</code></dt><dd><p>Maximum wind speed in m/s at a height of 30 m as numeric vector.</p>
</dd>
<dt><code>v2_30m_min</code></dt><dd><p>Minimum wind speed in m/s at a height of 30 m as numeric vector.</p>
</dd>
<dt><code>v2_30m_std</code></dt><dd><p>Standard deviation of wind speed in m/s at a height of 30 m as numeric vector.</p>
</dd>
<dt><code>v3_20m_avg</code></dt><dd><p>Average wind speed in m/s at a height of 20 m as numeric vector.</p>
</dd>
<dt><code>v3_20m_max</code></dt><dd><p>Maximum wind speed in m/s at a height of 20 m as numeric vector.</p>
</dd>
<dt><code>v3_20m_min</code></dt><dd><p>Minimum wind speed in m/s at a height of 20 m as numeric vector.</p>
</dd>
<dt><code>v3_20m_std</code></dt><dd><p>Standard deviation of wind speed in m/s at a height of 20 m as numeric vector.</p>
</dd>
<dt><code>dir1_40m_avg</code></dt><dd><p>Average wind direction in degrees from north at a height of 40 m as numeric vector.</p>
</dd>
<dt><code>dir1_40m_std</code></dt><dd><p>Standard deviation of wind direction in degrees from north at a height of 40 m as numeric vector.</p>
</dd>
<dt><code>dir2_30m_avg</code></dt><dd><p>Average wind direction in degrees from north at a height of 30 m as numeric vector.</p>
</dd>
<dt><code>dir2_30m_std</code></dt><dd><p>Standard deviation of wind direction in degrees from north at a height of 30 m as numeric vector.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# load example data
data("winddata", package="bReeze")

# display the structure of the data
str(winddata)

## End(Not run)
</code></pre>

<hr>
<h2 id='windprofile'>Calculate wind profile</h2><span id='topic+windprofile'></span><span id='topic+pro'></span><span id='topic+plot.windprofile'></span>

<h3>Description</h3>

<p>Calculates a wind profile, using on the Hellman exponential law.</p>


<h3>Usage</h3>

<pre><code class='language-R'>windprofile(mast, v.set, dir.set, num.sectors=12, 
  method=c("hellman", "loglm", "fixed"), alpha=NULL, 
  subset, digits=3, print=TRUE)
pro(mast, v.set, dir.set, num.sectors=12, 
  method=c("hellman", "loglm", "fixed"), alpha=NULL, 
  subset, digits=3, print=TRUE)

## S3 method for class 'windprofile'
plot(x, sector, measured=TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="windprofile_+3A_mast">mast</code></td>
<td>
<p>Met mast object created by <code><a href="#topic+mast">mast</a></code>.</p>
</td></tr>
<tr><td><code id="windprofile_+3A_v.set">v.set</code></td>
<td>
<p>Set(s) to be used for wind speed, specified as set number or set name. The first given dataset is used as reference height. If one single dataset is given, the same Hellman exponent is assumed for each sector and can be specified using <code>alpha</code> (see Details for empirical values). If two or more datasets are given, the Hellman exponent is calculated for each sector. If more than two datasets are given, currently only the first two datasets are used.</p>
</td></tr>
<tr><td><code id="windprofile_+3A_dir.set">dir.set</code></td>
<td>
<p>Set to be used for wind direction, specified as set number or set name.</p>
</td></tr>
<tr><td><code id="windprofile_+3A_num.sectors">num.sectors</code></td>
<td>
<p>Number of wind direction sectors as integer value greater 1. Default is <code>12</code>.</p>
</td></tr>
<tr><td><code id="windprofile_+3A_method">method</code></td>
<td>
<p>Method to be used for the calculation. One of <code>"hellman"</code>, <code>"loglm"</code> or <code>"fixed"</code> (see Details section). Optional argument: <code>"fixed"</code> is used if <code>v.set</code> is a single dataset, <code>"hellman"</code> is used if <code>v.set</code> specifies two, <code>"loglm"</code> if <code>v.set</code> specifies three datasets.</p>
</td></tr>
<tr><td><code id="windprofile_+3A_alpha">alpha</code></td>
<td>
<p>Hellman exponent &ndash; one general exponent or a vector of exponents (one per sector). Optional and only used if the choosen <code>method</code> is <code>"fixed"</code>. If <code>alpha</code> is <code>NULL</code> (the default), <code>0.2</code> is used as default.</p>
</td></tr>
<tr><td><code id="windprofile_+3A_subset">subset</code></td>
<td>
<p>Optional start and end time stamp for a data subset, as string vector <code>c(start, end)</code>. The time stamps format shall follow the rules of ISO 8601 international standard, e.g. &quot;2012-08-08 22:55:00&quot;.</p>
</td></tr>
<tr><td><code id="windprofile_+3A_digits">digits</code></td>
<td>
<p>Number of decimal places to be used for results as numeric value. Default is <code>3</code>.</p>
</td></tr>
<tr><td><code id="windprofile_+3A_print">print</code></td>
<td>
<p>If <code>TRUE</code> (the default), results are printed directly.</p>
</td></tr>
<tr><td><code id="windprofile_+3A_x">x</code></td>
<td>
<p>Wind profile object created by <code>profile</code>.</p>
</td></tr>
<tr><td><code id="windprofile_+3A_sector">sector</code></td>
<td>
<p>Direction sector as integer (sector number) or string (sector code). If missing or <code>NULL</code>, all sectors are plotted. For plotting the general profile only use <code>"all"</code>.</p>
</td></tr>
<tr><td><code id="windprofile_+3A_measured">measured</code></td>
<td>
<p>If <code>TRUE</code> (the default), measured sector mean wind speeds are added to the plot.</p>
</td></tr>
<tr><td><code id="windprofile_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods. For optional graphical parameters see below.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The average wind speed as a function of height above ground gives a site's wind profile. For reasons of cost-efficiency met mast heights are usually below hub heights of modern wind turbines, thus measured wind speeds must be extrapolated by based wind profile. A common method is the Hellman exponential law or power law (<code>"hellman"</code>), defined as:
</p>
<p style="text-align: center;"><code class="reqn">\frac{v_2}{v_1} = \left(\frac{h_2}{h_1} \right)^\alpha</code>
</p>

<p>where <code class="reqn">v_2</code> is the wind speed at height <code class="reqn">h_2</code>, <code class="reqn">v_1</code> is the wind speed at height <code class="reqn">h_1</code> and <code class="reqn">\alpha</code> is the Hellman exponent (also power law exponent or shear exponent).
</p>
<p>To calculate <code class="reqn">\alpha</code>, <code>profile</code> uses the inverted equation as:
</p>
<p style="text-align: center;"><code class="reqn">\alpha = \frac{\log \left(\frac{v_2}{v_1} \right)}{\log \left(\frac{h_2}{h_1} \right)}</code>
</p>

<p>If data is available for two or more heights, a log-linear model fit can be used for the computation of <code class="reqn">\alpha</code>. In this case the data is logarithmized to allow for fitting a linear model. The models slope is then used as <code class="reqn">\alpha</code>. Please note: depending on the data this method might result in negative <code class="reqn">\alpha</code>.
</p>
<p>If the wind speed is only known for one height, <code class="reqn">\alpha</code> must be estimated. <code class="reqn">\alpha</code> depends on various issues, including roughness and terrain of the site. Some empirical values for temperate climates are:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <em> Site conditions</em> </td><td style="text-align: left;"> <code class="reqn">\alpha</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
  Open water </td><td style="text-align: left;"> 0.08--0.15 </td>
</tr>
<tr>
 <td style="text-align: left;">
  Flat terrain, open land cover </td><td style="text-align: left;"> 0.16--0.22 </td>
</tr>
<tr>
 <td style="text-align: left;">
  Complex terrain with mixed or continuous forest </td><td style="text-align: left;"> 0.25--0.40 </td>
</tr>
<tr>
 <td style="text-align: left;">
  Exposed ridgetops, open land cover </td><td style="text-align: left;"> 0.10--0.14 </td>
</tr>
<tr>
 <td style="text-align: left;">
  Sloping terrain with drainage flows </td><td style="text-align: left;"> 0.10--0.15
</td>
</tr>

</table>



<h3>Value</h3>

<p>Returns a list of:
</p>
<table>
<tr><td><code>profile</code></td>
<td>
<p>Data frame containing alpha and reference wind speed for each direction sector.</p>
</td></tr>
<tr><td><code>h.ref</code></td>
<td>
<p>Reference height of the profile (the height of the first given dataset in <code>v.set</code>).</p>
</td></tr>
</table>


<h3>Optional graphical parameters</h3>

<p>The following graphical parameters can optionally be added to customize the plot:
</p>

<ul>
<li> <p><code>bty</code>: Type of box to be drawn around the plot region. Allowed values are <code>"o"</code> (the default), <code>"l"</code>, <code>"7"</code>, <code>"c"</code>, <code>"u"</code>, or <code>"]"</code>. The resulting box resembles the corresponding upper case letter. A value of <code>"n"</code> suppresses the box.
</p>
</li>
<li> <p><code>bty.leg</code>: Type of box to be drawn around the legend. Allowed values are <code>"n"</code> (no box, the default) and <code>"o"</code>.
</p>
</li>
<li> <p><code>cex</code>: Amount by which text on the plot should be scaled relative to the default (which is <code>1</code>), as numeric. To be used for scaling of all texts at once.
</p>
</li>
<li> <p><code>cex.axis</code>: Amount by which axis annotations should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.lab</code>: Amount by which axis labels should be scaled, as numeric value.
</p>
</li>
<li> <p><code>cex.leg</code>: Amount by which legend text should be scaled, as numeric value.
</p>
</li>
<li> <p><code>col</code>: Vector of colours, one for each set plotted.
</p>
</li>
<li> <p><code>col.axis</code>: Colour to be used for axis annotations &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.box</code>: Colour to be used for the box around the plot region (if <code>bty</code>) &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.lab</code>: Colour to be used for axis labels &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.leg</code>: Colour to be used for legend text &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>col.ticks</code>: Colours for the axis line and the tick marks respectively &ndash; default is <code>"black"</code>.
</p>
</li>
<li> <p><code>las</code>: Style of axis labels. One of <code>0</code> (always parallel to the axis, default), <code>1</code> (always horizontal), <code>2</code> (always perpendicular to the axis), <code>3</code> (always vertical).
</p>
</li>
<li> <p><code>lty</code>: Line type(s) of the profile lines &ndash; assigned like <code>col</code>. See <code><a href="graphics.html#topic+par">par</a></code> for available line types.
</p>
</li>
<li> <p><code>lwd</code>: Line width(s) of the profile lines &ndash; assigned like <code>col</code>. See <code><a href="graphics.html#topic+par">par</a></code> for usage.
</p>
</li>
<li> <p><code>mar</code>: A numerical vector of the form c(bottom, left, top, right) which gives the number of lines of margin to be specified on the four sides of the plot &ndash; default is <code>c(4, 4, 1, 1)</code>.
</p>
</li>
<li> <p><code>mgp</code>: A numerical vector of the form c(label, annotation, line), which gives the margin line for the axis label, axis annotation and axis line. The default is <code>c(2.5, 0.7, 0)</code>.
</p>
</li>
<li> <p><code>pos.leg</code>: Position of legend &ndash; one of <code>"bottomright"</code>, <code>"bottom"</code>, <code>"bottomleft"</code>, <code>"left"</code>, <code>"topleft"</code>, <code>"top"</code>, <code>"topright"</code>, <code>"right"</code> or <code>"center"</code>. Use <code>NULL</code> to hide the legend.
</p>
</li>
<li> <p><code>xlab</code>: Alternative label for the x axis.
</p>
</li>
<li> <p><code>ylab</code>: Alternative label for the y axis.
</p>
</li>
<li> <p><code>xlim</code>: Numeric vector of the x limits of the plot.
</p>
</li>
<li> <p><code>ylim</code>: Numeric vector of the y limits.
</p>
</li>
<li> <p><code>x.intersp</code>: Horizontal interspacing factor for legend text, as numeric &ndash; default is <code>0.4</code>.
</p>
</li>
<li> <p><code>y.intersp</code>: Vertical line distance for legend text, as numeric &ndash; default is <code>0.8</code>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Christian Graul</p>


<h3>References</h3>

<p>Bañuelos-Ruedas, F., Camacho, C.A., Rios-Marcuello, S. (2011) Methodologies Used in the Extrapolation of Wind Speed Data at Different Heights and Its Impact in the Wind Energy Resource Assessment in a Region. In: Gastón O. Suvire (Ed.), Wind Farm &ndash; Technical Regulations, Potential Estimation and Siting Assessment, Chapter 4, p. 97&ndash;114, InTech
</p>
<p>Brower, M., Marcus, M., Taylor, M., Bernadett, D., Filippelli, M., Beaucage, P., Hale, E., Elsholz, K., Doane, J., Eberhard, M., Tensen, J., Ryan, D. (2010) Wind Resource Assessment Handbook. http://www.renewablenrgsystems.com/TechSupport/~/media/Files/PDFs/wind_resource_handbook.ashx
</p>
<p>International Electrotechnical Commission (2005) IEC 61400-12 Wind Turbines &ndash; Part 12-1: Power Performance Measurements of Electricity Producing Wind Turbines. IEC Standard
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mast">mast</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## load and prepare data
data("winddata", package="bReeze")
set40 &lt;- set(height=40, v.avg=winddata[,2], dir.avg=winddata[,14])
set30 &lt;- set(height=30, v.avg=winddata[,6], dir.avg=winddata[,16])
set20 &lt;- set(height=20, v.avg=winddata[,10], v.std=winddata[,13])
ts &lt;- timestamp(timestamp=winddata[,1])
neubuerg &lt;- mast(timestamp=ts, set40, set30, set20)
neubuerg &lt;- clean(mast=neubuerg)


## calculate profile
# create profile based on one height
windprofile(mast=neubuerg, v.set=1, dir.set=1)	# default alpha=0.2
windprofile(mast=neubuerg, v.set=1, dir.set=1, alpha=0.15)

# calculate profile based on two heights
windprofile(mast=neubuerg, v.set=c(1,2), dir.set=1)
windprofile(mast=neubuerg, v.set=c(1,3), dir.set=1)
# same as above
windprofile(mast=neubuerg, v.set=c("set1", "set3"), dir.set="set1")

# calculate profile based on three heights
windprofile(mast=neubuerg, v.set=c(1,2,3), dir.set=1)

# change the method used for computation
# note: negative alphas!
windprofile(mast=neubuerg, v.set=c(1,2), dir.set=1, method="loglm")

# change number of direction sectors
windprofile(mast=neubuerg, v.set=c(1,2), dir.set=1, num.sectors=8)

# data subsets
windprofile(mast=neubuerg, v.set=1, dir.set=1, 
  subset=c("2009-12-01 00:00:00", "2009-12-31 23:50:00"))
windprofile(mast=neubuerg, v.set=c(1,2), dir.set=1, 
  subset=c("2010-01-01 00:00:00", NA)) # just 'start' time stamp
windprofile(mast=neubuerg, v.set=c(1:3), dir.set=1, 
  subset=c(NA, "2009-12-31 23:50:00")) # just 'end' time stamp

# change number of digits and hide results
windprofile(mast=neubuerg, v.set=1, dir.set=1, digits=2)
neubuerg.wp &lt;- windprofile(mast=neubuerg, v.set=1, dir.set=1, print=FALSE)
neubuerg.wp


## plot profile objects
plot(neubuerg.wp)  # default
plot(neubuerg.wp, measured=FALSE)  # omit 'measured' points

# plot only one sector
plot(neubuerg.wp, sector=3)	# ENE by sector number
plot(neubuerg.wp, sector="ene")	# ENE by sector code
plot(neubuerg.wp, sector="all")	# general profile

# customize plot
plot(neubuerg.wp, bty="l", bty.leg="o", cex.axis=0.8, 
  cex.lab=0.9, cex.leg=0.7, col=rainbow(13), col.axis=gray(0.2), 
  col.box=gray(0.2), col.lab=gray(0.2), col.leg=gray(0.2), 
  col.ticks=gray(0.2), las=0, lty=c(rep(3,12),1), 
  lwd=c(rep(1.2,12), 1.7), mar=c(3,3,0.5,0.5), mgp=c(2,0.7,0), 
  pos.leg="right", xlab="velocity [m/s]", ylab="height [m]", 
  xlim=c(0,11), ylim=c(0,150), x.intersp=1, y.intersp=1.2)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
