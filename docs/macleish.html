<!DOCTYPE html><html lang="en"><head><title>Help for package macleish</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {macleish}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#etl_extract.etl_macleish'><p>Extract weather data</p></a></li>
<li><a href='#macleish_layers'><p>MacLeish spatial data</p></a></li>
<li><a href='#maple_sap'><p>Maple sap collection at MacLeish</p></a></li>
<li><a href='#mass_gis'><p>Retrieve elevation layers from MassGIS</p></a></li>
<li><a href='#phenocam_image_url'><p>Retrieve images from Phenocam</p></a></li>
<li><a href='#tree_diameter1'><p>MacLeish Data Plot 1</p></a></li>
<li><a href='#tree_diameter2'><p>MacLeish Data Plot 2</p></a></li>
<li><a href='#whately_2015'><p>Weather data from Macleish Field Stations</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Retrieve Data from MacLeish Field Station</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.9</td>
</tr>
<tr>
<td>Description:</td>
<td>Download data from the Ada and Archibald MacLeish Field 
    Station in Whately, MA. The Ada 
    and Archibald MacLeish Field Station is a 260-acre patchwork of 
    forest and farmland located in West Whately, MA that provides opportunities 
    for faculty and students to pursue environmental research, outdoor 
    education, and low-impact recreation 
    (see <a href="https://www.smith.edu/about-smith/sustainable-smith/macleish">https://www.smith.edu/about-smith/sustainable-smith/macleish</a> for more information). 
    This package contains 
    weather data over several years, and spatial data on various man-made and 
    natural structures.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://creativecommons.org/publicdomain/zero/1.0/legalcode">CC0</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, lubridate, phenocamr, readr, rvest, sf, stringr, xml2</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5), etl</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ggplot2, dbplyr, RSQLite, broom, knitr, leaflet, purrr,
rmarkdown, markdown, mgcv, clifro, testthat</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/beanumber/macleish">https://github.com/beanumber/macleish</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/beanumber/macleish/issues">https://github.com/beanumber/macleish/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-07-06 20:11:41 UTC; bbaumer</td>
</tr>
<tr>
<td>Author:</td>
<td>Benjamin S. Baumer
    <a href="https://orcid.org/0000-0002-3279-0516"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Rose Goueth [aut],
  Wencong Li [aut],
  Weijia Zhang [ctb],
  Nicholas Horton [ctb],
  Dominique Kelly <a href="https://orcid.org/0000-0001-7186-9385"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Albert Y. Kim <a href="https://orcid.org/0000-0001-7824-306X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Benjamin S. Baumer &lt;ben.baumer@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-07-06 20:30:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='etl_extract.etl_macleish'>Extract weather data</h2><span id='topic+etl_extract.etl_macleish'></span><span id='topic+etl_transform.etl_macleish'></span><span id='topic+etl_transform_help'></span>

<h3>Description</h3>

<p>Retrieve data from the Macleish Field Station weather monitors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'etl_macleish'
etl_extract(obj, ...)

## S3 method for class 'etl_macleish'
etl_transform(obj, ...)

etl_transform_help(obj, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="etl_extract.etl_macleish_+3A_obj">obj</code></td>
<td>
<p>an <code><a href="etl.html#topic+etl">etl</a></code> object</p>
</td></tr>
<tr><td><code id="etl_extract.etl_macleish_+3A_...">...</code></td>
<td>
<p>arguments passed to methods</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
macleish &lt;- etl("macleish")
str(macleish)

## Not run: 
macleish %&gt;%
  etl_extract() %&gt;%
  etl_transform() %&gt;%
  etl_load()
whately &lt;- macleish %&gt;%
  tbl("whately") 
orchard &lt;- macleish %&gt;%
  tbl("orchard") 
  
whately %&gt;%
  summarize(N = n(), avg_temp = mean(temperature))
orchard %&gt;%
  summarize(N = n(), avg_temp = mean(temperature))
  
# check data types
whately %&gt;%
  glimpse()

# if using SQLite, datetimes will get converted to integers
whately &lt;- whately %&gt;%
  mutate(when_datetime = datetime(when, 'unixepoch'))
whately %&gt;%
  glimpse()

# show the most recent data -- should be within the past hour
whately %&gt;%
  collect() %&gt;%
  tail()

# show that no time-shifting is happening
if (require(ggplot2)) {
macleish %&gt;%
  tbl("whately") %&gt;%
  collect() %&gt;%
  mutate(when = lubridate::ymd_hms(when)) %&gt;%
  filter(lubridate::year(when) == 2012 &amp; month(when) == 12 &amp; day(when) == 20) %&gt;%
  ggplot(aes(x = when, y = temperature)) + geom_line()
}

## End(Not run)
</code></pre>

<hr>
<h2 id='macleish_layers'>MacLeish spatial data</h2><span id='topic+macleish_layers'></span>

<h3>Description</h3>

<p>Shapefiles from the MacLeish Field Station. The field station
itself is located at <code>lat = 42.449167</code>, <code>lon = -72.679389</code>. These
data contain information about various man-made and natural structures
surrounding the field station.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>macleish_layers
</code></pre>


<h3>Format</h3>

<p>A <code>list</code> of <code><a href="sf.html#topic+sf">sf::sf()</a></code> objects, each providing a different layer.
</p>

<dl>
<dt>landmarks</dt><dd><p>Landmarks</p>
</dd>
<dt>forests</dt><dd><p>Type of dominant tree in individual forests, as
noted by Jesse Bellemare</p>
</dd>
<dt>streams</dt><dd><p>local streams</p>
</dd>
<dt>challenge_courses</dt><dd><p>Challenge courses on the property</p>
</dd>
<dt>buildings</dt><dd><p>Buildings at MacLeish</p>
</dd>
<dt>wetlands</dt><dd><p>Wetland areas</p>
</dd>
<dt>boundary</dt><dd><p>the property boundary</p>
</dd>
<dt>research</dt><dd><p>research plots</p>
</dd>
<dt>soil</dt><dd><p>soil deposits used by Amy Rhodes</p>
</dd>
<dt>trails</dt><dd><p>Hiking trails</p>
</dd>
<dt>camp_sites</dt><dd><p>Two camp sites</p>
</dd>
<dt>elevation</dt><dd><p>30 foot elevation contours</p>
</dd>
</dl>



<h3>Details</h3>

<p>Each of the <code><a href="sf.html#topic+sf">sf::sf()</a></code> objects are projected in
<code>epsg:4326</code> for easy integration with Google Maps or
<code><a href="leaflet.html#topic+leaflet">leaflet::leaflet()</a></code> objects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>names(macleish_layers)
macleish_layers[["buildings"]]

if (require(sf)) {
 plot(macleish_layers[["buildings"]])
}
</code></pre>

<hr>
<h2 id='maple_sap'>Maple sap collection at MacLeish</h2><span id='topic+maple_sap'></span>

<h3>Description</h3>

<p>Maple sap collection at MacLeish
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maple_sap
</code></pre>


<h3>Format</h3>


<dl>
<dt>when</dt><dd><p>the date of collection</p>
</dd>
<dt>sap</dt><dd><p>how much sap was collected, in gallons</p>
</dd>
<dt>Comments</dt><dd><p>comments</p>
</dd>
<dt>People</dt><dd><p>who was there?</p>
</dd>
</dl>


<hr>
<h2 id='mass_gis'>Retrieve elevation layers from MassGIS</h2><span id='topic+mass_gis'></span><span id='topic+macleish_intersect'></span>

<h3>Description</h3>

<p>Retrieve elevation layers from MassGIS
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mass_gis(layer = "contours250k")

macleish_intersect(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mass_gis_+3A_layer">layer</code></td>
<td>
<p>MassGIS layer name to import</p>
</td></tr>
<tr><td><code id="mass_gis_+3A_x">x</code></td>
<td>
<p>an <code><a href="sf.html#topic+sf">sf::sf()</a></code> object</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function will download shapefiles from MassGIS, unzip them,
transform the projection to EPSG:4326, compute their intersection with the
boundary of the MacLeish property, and return the resulting
<code><a href="sf.html#topic+sf">sf::sf()</a></code> object.
</p>
<p>Intersect a spatial layer with the MacLeish boundary layer
</p>


<h3>Source</h3>

<p>https://www.mass.gov/info-details/massgis-data-layers
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# have to download the shapefiles...could take a while...
elevation &lt;- mass_gis()
macleish_elevation &lt;- macleish_intersect(elevation)
if (require(sf)) {
  plot(macleish_elevation)
}

dcr_trails &lt;- mass_gis("dcrtrails")


## End(Not run)
</code></pre>

<hr>
<h2 id='phenocam_image_url'>Retrieve images from Phenocam</h2><span id='topic+phenocam_image_url'></span><span id='topic+phenocam_read_day_urls'></span><span id='topic+phenocam_read_monthly_midday_urls'></span><span id='topic+phenocam_image_url_midday'></span><span id='topic+phenocam_info'></span><span id='topic+phenocam_download'></span>

<h3>Description</h3>

<p>Phenocam contains over 70,000 images taken from MacLeish.
Photos have been taken every 30 minutes since February 2017.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>phenocam_image_url(when = NULL, ...)

phenocam_read_day_urls(x = Sys.Date())

phenocam_read_monthly_midday_urls(x = Sys.Date())

phenocam_image_url_midday(x = Sys.Date())

phenocam_info()

phenocam_download(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="phenocam_image_url_+3A_when">when</code></td>
<td>
<p>a string to be converted into a date-time</p>
</td></tr>
<tr><td><code id="phenocam_image_url_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="phenocamr.html#topic+download_phenocam">download_phenocam</a></code></p>
</td></tr>
<tr><td><code id="phenocam_image_url_+3A_x">x</code></td>
<td>
<p>a Date</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://phenocam.nau.edu/webcam/sites/macleish/">https://phenocam.nau.edu/webcam/sites/macleish/</a>
</p>


<h3>See Also</h3>

<p><code><a href="phenocamr.html#topic+download_phenocam">download_phenocam</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>phenocam_image_url()
phenocam_image_url("2021-12-25 12:05:05")
## Not run: 
phenocam_read_day_urls()

## End(Not run)
## Not run: 
phenocam_read_monthly_midday_urls()

## End(Not run)
## Not run: 
phenocam_image_url_midday(Sys.Date() - 3)
phenocam_image_url_midday(Sys.Date() - 365)

## End(Not run)
## Not run: 
phenocam_info()

## End(Not run)
## Not run: 
phenocam_download()
df &lt;- read_phenocam(file.path(tempdir(),"macleish_DB_1000_3day.csv"))
print(str(df))

## End(Not run)
</code></pre>

<hr>
<h2 id='tree_diameter1'>MacLeish Data Plot 1</h2><span id='topic+tree_diameter1'></span>

<h3>Description</h3>

<p>Data on change in tree diameter (in centimeters)
for parasitic Hemlock Woolly Adelgid dominated areas on the Western side of MacLeish.
Tree diameter was measured at 1.4 meters high above the ground.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tree_diameter1
</code></pre>


<h3>Format</h3>


<dl>
<dt>Module</dt><dd><p>Module number that represents one of the 10 subplot modules that are 110 m
and 20 x 50 m. There are five 10 x 10 modules along central 50 m axis.</p>
</dd>
<dt>Tag</dt><dd><p>Tag numbers used to identify each tree.</p>
</dd>
<dt>Species</dt><dd><p>Tree species include Red Maple (Acer rubrum), Sweet Birch (Betula lenta), Paper Birch (Betula papyrifera), American Beech (Fagus grandifolia),
American witch-hazel (Hamamelis virginiana), Eastern White Pine (Pinus strobus), Northern Red Oak (Quercus rubra), and Eastern Hemlock (Tsuga canadensis).</p>
</dd>
<dt>Position</dt><dd><p>Stage of growth for each individual tree. The emergent position are the tallest trees, followed by canopy, subcanopy,
and finally, sapling trees, which are the smallest trees.</p>
</dd>
<dt>Year</dt><dd><p>Data collected from 2010-2015 in the fall semesters.</p>
</dd>
<dt>Notes</dt><dd><p>Notes collected on the wellbeing of tree species, including notes on death or poor health.</p>
</dd>
<dt>Diameter</dt><dd><p>Tree diameter measured in centimeters and at 1.4 meters high above the ground.</p>
</dd>
<dt>People</dt><dd><p>Data obtained from Jesse Bellemare and Smith College students from BIO364-365 courses.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="#topic+tree_diameter2">tree_diameter2</a>
</p>

<hr>
<h2 id='tree_diameter2'>MacLeish Data Plot 2</h2><span id='topic+tree_diameter2'></span>

<h3>Description</h3>

<p>Data on change in tree diameter (in centimeters)
for parasitic Hemlock Woolly Adelgid dominated areas on the Western side of MacLeish.
Tree diameter was measured at 1.4 meters high above the ground.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tree_diameter2
</code></pre>


<h3>Format</h3>


<dl>
<dt>Module</dt><dd><p>Module number that represents one of the 10 subplot modules that are 110 m
and 20 x 50 m. There are five 10 x 10 modules along central 50 m axis.</p>
</dd>
<dt>Tag</dt><dd><p>Tag numbers used to identify each tree.</p>
</dd>
<dt>Species</dt><dd><p>Tree species include Red Maple (Acer rubrum), Sweet Birch (Betula lenta), American Beech (Fagus grandifolia), Eastern White Pine (Pinus strobus),
Northern Red Oak (Quercus rubra), and Eastern Hemlock (Tsuga canadensis).</p>
</dd>
<dt>Year</dt><dd><p>Data collected from 2009-2012 in the fall semesters.</p>
</dd>
<dt>Notes</dt><dd><p>Notes collected on the wellbeing of tree species, including notes on death or poor health.</p>
</dd>
<dt>Diameter</dt><dd><p>Tree diameter measured in centimeters and at 1.4 meters high above the ground.</p>
</dd>
<dt>People</dt><dd><p>Data obtained from Jesse Bellemare and Smith College students from BIO364-365 courses.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="#topic+tree_diameter1">tree_diameter1</a>
</p>

<hr>
<h2 id='whately_2015'>Weather data from Macleish Field Stations</h2><span id='topic+whately_2015'></span><span id='topic+orchard_2015'></span>

<h3>Description</h3>

<p>Weather data collected at the Macleish Field Station in Whately,
MA during 2015.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>whately_2015

orchard_2015
</code></pre>


<h3>Format</h3>

<p>For both, a data frame (<code><a href="dplyr.html#topic+tbl_df">dplyr::tbl_df()</a></code>) with roughly 52,560 rows and 8 or 9 variables.
</p>
<p>The following variables are values that are found in either the <code>whately_2015</code>
or <code>orchard_2015</code> data tables.
</p>
<p>All variables are averaged over the 10 minute interval unless otherwise noted.
</p>

<dl>
<dt>when</dt><dd><p>Timestamp for each measurement set in Eastern Standard Time.</p>
</dd>
<dt>temperature</dt><dd><p>average temperature, in Celsius</p>
</dd>
<dt>wind_speed</dt><dd><p>Wind speed, in meters per second</p>
</dd>
<dt>wind_dir</dt><dd><p>Wind direction, in degrees</p>
</dd>
<dt>rel_humidity</dt><dd><p>How much water there is in the air, in millimeters</p>
</dd>
<dt>pressure</dt><dd><p>Atmospheric pressure, in millibars</p>
</dd>
<dt>rainfall</dt><dd><p>Total rainfall, in millimeters</p>
</dd>
<dt>solar_radiation</dt><dd><p>Amount of radiation coming from the sun, in Watts/meters^2. Solar measurement for Whately</p>
</dd>
<dt>par_density</dt><dd><p>Photosynthetically Active Radiation (sunlight between 400 and 700 nm), in average density of Watts/meters^2. One of two solar measurements for Orchard</p>
</dd>
<dt>par_total</dt><dd><p>Photosynthetically Active Radiation (sunlight between 400 and 700 nm), in average total over measurement period of Watts/meters^2. One of two solar measurements for Orchard</p>
</dd>
</dl>

<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 52547 rows and 9 columns.
</p>


<h3>Details</h3>

<p>The Macleish Field Station is a remote outpost owned by Smith
College and used for field research. There are two weather stations on the
premises. One is called <code>WhatelyMet</code> and the other is <code>OrchardMet</code>.
</p>
<p>The <code>WhatelyMet</code> station is located at (42.448470, -72.680553) and
the <code>OrchardMet</code> station is at (42.449653, -72.680315).
</p>
<p><code>WhatelyMet</code> is located at the end of Poplar Hill Road in Whately,
Massachusetts, USA. The meteorological instruments of <code>WhatelyMet</code> (except the
rain gauge) are mounted at the top of a tower 25.3 m tall, well above the
surrounding forest canopy. The tower is located on a local ridge at an
elevation 250.75m above sea level.
</p>
<p><code>OrchardMet</code> is located about 250 m north of the first tower in an open
field next to an apple orchard. Full canopy trees (~20 m tall) are within
30 m of this station. This station has a standard instrument configuration
with temperature, relative humidity, solar radiation, and barometric
pressure measured between 1.5 and 2.0 m above the ground. Wind speed and
direction are measured on a 10 m tall tower and precipitation is measured
on the ground. Ground temperature is measured at 15 and 30 cm below the
ground surface 2 m south of the tower. The tower is located 258.1 m above
sea level. Data collection at OrchardMet began on June 27th, 2014.
</p>
<p>The variables shown above are weather data collected at <code>WhatelyMet</code> and
<code>OrchardMet</code> during 2015. Solar radiation is measured in two different ways:
see <code>SlrW_Avg</code>or the <code>PAR</code> variables for Photosynthetic Active Radiation.
</p>
<p>Note that a loose wire resulted in erroneous temperature reading at OrchardMet
in late November, 2015.
</p>


<h3>Source</h3>

<p>These data are recorded at <a href="https://www.smith.edu/about-smith/sustainable-smith/ceeds">https://www.smith.edu/about-smith/sustainable-smith/ceeds</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
#' # loose wire anomalies
if (require(dplyr) &amp; require(ggplot2) &amp; require(lubridate)) {
 orchard_2015 %&gt;%
 filter(month(when) == 11) %&gt;%
   ggplot(aes(x = when, y = temperature)) +
   geom_line() + geom_smooth()
}

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
