<!DOCTYPE html><html><head><title>Help for package logitr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {logitr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#apolloModeChoiceData'><p>Simulated SP dataset of mode choice (from the apollo package).</p></a></li>
<li><a href='#augment.logitr'><p>Glance a <code>logitr</code> class object</p></a></li>
<li><a href='#cars_china'><p>Stated car choice observations by Chinese car buyers</p></a></li>
<li><a href='#cars_us'><p>Stated car choice observations by US car buyers</p></a></li>
<li><a href='#ci'><p>Obtain a confidence interval from coefficient draws</p></a></li>
<li><a href='#confint.logitr'><p>Extract Model Confidence Interval</p></a></li>
<li><a href='#dummyCode'><p>Add dummy-coded variables to data frame.</p></a></li>
<li><a href='#electricity'><p>Stated preference data for the choice of electricity suppliers (from mlogit package)</p></a></li>
<li><a href='#fitted.logitr'><p>Extract Model Fitted Values</p></a></li>
<li><a href='#fquantile'><p>Predict probabilities and / or outcomes</p></a></li>
<li><a href='#glance.logitr'><p>Glance a <code>logitr</code> class object</p></a></li>
<li><a href='#logit_probs'><p>Compute logit fraction for sets of alternatives given coefficient draws</p></a></li>
<li><a href='#logitr'><p>The main function for estimating logit models</p></a></li>
<li><a href='#miscmethods.logitr'><p>Methods for logitr objects</p></a></li>
<li><a href='#model.frame.logitr'><p>Extracting the Model Frame from a Formula or Fit</p></a></li>
<li><a href='#model.matrix.logitr'><p>Construct Design Matrices</p></a></li>
<li><a href='#predict.logitr'><p>Predict probabilities and / or outcomes</p></a></li>
<li><a href='#predictChoices'><p>Predict choices</p></a></li>
<li><a href='#predictProbs'><p>Predict expected choice probabilities</p></a></li>
<li><a href='#recodeData'><p>Returns a list of the design matrix <code>X</code> and updated <code>pars</code> and</p>
<code>randPars</code> to include any dummy-coded categorical or interaction
variables.</a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#residuals.logitr'><p>Extract Model Residuals</p></a></li>
<li><a href='#runtimes'><p>Data frame of run times for logitr benchmark</p></a></li>
<li><a href='#se'><p>Extract standard errors</p></a></li>
<li><a href='#se.logitr'><p>Extract standard errors</p></a></li>
<li><a href='#simulateShares'><p>Simulate expected shares</p></a></li>
<li><a href='#statusCodes'><p>View a description the nloptr status codes</p></a></li>
<li><a href='#tidy.logitr'><p>Tidy a <code>logitr</code> class object</p></a></li>
<li><a href='#vcov.logitr'><p>Calculate the variance-covariance matrix</p></a></li>
<li><a href='#wtp'><p>Get WTP estimates a preference space model</p></a></li>
<li><a href='#wtp.logitr'><p>Get WTP estimates a preference space model</p></a></li>
<li><a href='#wtpCompare'><p>Compare WTP from preference and WTP space models</p></a></li>
<li><a href='#yogurt'><p>Choice observations of yogurt purchases by 100 households</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Logit Models w/Preference &amp; WTP Space Utility Parameterizations</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Fast estimation of multinomial (MNL) and mixed logit (MXL) models in R. Models can be estimated using "Preference" space or "Willingness-to-pay" (WTP) space utility parameterizations. Weighted models can also be estimated. An option is available to run a parallelized multistart optimization loop with random starting points in each iteration, which is useful for non-convex problems like MXL models or models with WTP space utility parameterizations. The main optimization loop uses the 'nloptr' package to minimize the negative log-likelihood function. Additional functions are available for computing and comparing WTP from both preference space and WTP space models and for predicting expected choices and choice probabilities for sets of alternatives based on an estimated model. Mixed logit models can include uncorrelated or correlated heterogeneity covariances and are estimated using maximum simulated likelihood based on the algorithms in Train (2009) &lt;<a href="https://doi.org/10.1017%2FCBO9780511805271">doi:10.1017/CBO9780511805271</a>&gt;. More details can be found in Helveston (2023) &lt;<a href="https://doi.org/10.18637%2Fjss.v105.i10">doi:10.18637/jss.v105.i10</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>apollo, broom, dplyr, fastDummies, ggplot2, ggrepel, gmnl,
gtsummary, here, kableExtra, knitr, mixl, mlogit, rmarkdown,
testthat, texreg, tidyr</td>
</tr>
<tr>
<td>Imports:</td>
<td>generics, MASS, nloptr, parallel, randtoolbox, stats, tibble</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jhelvy/logitr">https://github.com/jhelvy/logitr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jhelvy/logitr/issues">https://github.com/jhelvy/logitr/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-27 15:04:25 UTC; jhelvy</td>
</tr>
<tr>
<td>Author:</td>
<td>John Helveston <a href="https://orcid.org/0000-0002-2657-9191"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Connor Forsythe [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>John Helveston &lt;john.helveston@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-29 15:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='apolloModeChoiceData'>Simulated SP dataset of mode choice (from the apollo package).</h2><span id='topic+apolloModeChoiceData'></span>

<h3>Description</h3>

<p>A simulated dataset containing 7,000 mode choices among four alternatives.
Data comes from 500 individuals, each with 14 stated stated preference
(SP) observations. There are 7,000 choices in total.
Each observation contains attributes for the alternatives,
availability of alternatives, and characteristics of the
individuals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(apolloModeChoiceData)
</code></pre>


<h3>Format</h3>


<table>
<tr>
 <td style="text-align: left;">
   Variable </td><td style="text-align: left;"> Description </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>ID</code> </td><td style="text-align: left;"> individual identifiers </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>obsID</code> </td><td style="text-align: left;"> identifier for unique choice observation </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>altID</code> </td><td style="text-align: left;"> alternative in each choice observation </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>qID</code> </td><td style="text-align: left;"> Numeric. Consecutive ID of SP choice tasks. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>choice</code> </td><td style="text-align: left;"> dummy code for choice (1 or 0) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>mode</code> </td><td style="text-align: left;"> Character describing mode: "air", "rail", "car", "bus" </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>time</code> </td><td style="text-align: left;"> Travel time in minutes. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>cost</code> </td><td style="text-align: left;"> cost (in GBP) of trip. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>access</code> </td><td style="text-align: left;"> Access time in minutes. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>service</code> </td><td style="text-align: left;"> Numeric. Additional services: 1 for no-frills, 2 for wifi, 3 for food. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>mode_air</code> </td><td style="text-align: left;"> Dummy coefficient for "air" mode. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>mode_bus</code> </td><td style="text-align: left;"> Dummy coefficient for "bus" mode. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>mode_car</code> </td><td style="text-align: left;"> Dummy coefficient for "car" mode. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>mode_rail</code> </td><td style="text-align: left;"> Dummy coefficient for "rail" mode. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>service_no_frills</code> </td><td style="text-align: left;"> Dummy coefficient for "no-frills" additional service. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>service_wifi</code> </td><td style="text-align: left;"> Dummy coefficient for "wifi" additional service. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>service_food</code> </td><td style="text-align: left;"> Dummy coefficient for "food" additional service. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>time_car</code> </td><td style="text-align: left;"> Travel time (in minutes) for car trip. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>time_bus</code> </td><td style="text-align: left;"> Travel time (in minutes) for bus trip. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>time_air</code> </td><td style="text-align: left;"> Travel time (in minutes) for air trip. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>time_rail</code> </td><td style="text-align: left;"> Travel time (in minutes) for rail trip. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>female</code> </td><td style="text-align: left;"> Numeric. Sex of individual. 1 for female, 0 for male. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>business</code> </td><td style="text-align: left;"> Numeric. Purpose of the trip. 1 for business, 0 for other. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>income</code> </td><td style="text-align: left;"> Numeric. Income (in GBP per annum) of the individual. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Source</h3>

<p>Data imported from the apollo package <a href="https://www.rdocumentation.org/packages/apollo/versions/0.2.6/topics/apollo_modeChoiceData">archive</a>
</p>


<h3>References</h3>

<p>Hess, S. &amp; Palma, D. (2019), Apollo: a flexible, powerful and customisable freeware package for choice model estimation and application, Journal of Choice Modelling, Volume 32, September 2019.
<a href="https://doi.org/10.1016/j.jocm.2019.100170">doi:10.1016/j.jocm.2019.100170</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(apolloModeChoiceData)

head(apolloModeChoiceData)
</code></pre>

<hr>
<h2 id='augment.logitr'>Glance a <code>logitr</code> class object</h2><span id='topic+augment.logitr'></span>

<h3>Description</h3>

<p>Glance a <code>logitr</code> class object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'logitr'
augment(x, newdata = NULL, obsID = NULL, type = "prob", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="augment.logitr_+3A_x">x</code></td>
<td>
<p>is an object of class <code>logitr</code>.</p>
</td></tr>
<tr><td><code id="augment.logitr_+3A_newdata">newdata</code></td>
<td>
<p>a <code>data.frame</code>. Each row is an alternative and each column an
attribute corresponding to parameter names in the estimated model. Defaults
to <code>NULL</code>, in which case predictions are made on the original data used to
estimate the model.</p>
</td></tr>
<tr><td><code id="augment.logitr_+3A_obsid">obsID</code></td>
<td>
<p>The name of the column that identifies each set of
alternatives in the data. Required if newdata != NULL. Defaults to <code>NULL</code>,
in which case the value for <code>obsID</code> from the data in <code>object</code> is used.</p>
</td></tr>
<tr><td><code id="augment.logitr_+3A_type">type</code></td>
<td>
<p>A character vector defining what to predict: <code>prob</code> for
probabilities, <code>outcomes</code> for outcomes. If you want both outputs, use
<code>c("prob", "outcome")</code>. Outcomes are predicted randomly according to the
predicted probabilities. Defaults to <code>"prob"</code>.</p>
</td></tr>
<tr><td><code id="augment.logitr_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble of ...
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(logitr)

# Estimate a preference space model
mnl_pref &lt;- logitr(
  data    = yogurt,
  outcome = "choice",
  obsID   = "obsID",
  pars    = c("price", "feat", "brand")
)

# Extract a tibble of the model summary statistics
augment(mnl_pref)

</code></pre>

<hr>
<h2 id='cars_china'>Stated car choice observations by Chinese car buyers</h2><span id='topic+cars_china'></span>

<h3>Description</h3>

<p>Data from Helveston et al. (2015) containing 448 stated choice observations
from Chinese car buyers and 384 stated choice observations from US car
buyers. Conjoint surveys were fielded in 2012 in four major Chinese cities
(Beijing, Shanghai, Shenzhen, and Chengdu), online in the US on Amazon
Mechanical Turk, and in person at the Pittsburgh Auto show. Participants
were asked to select a vehicle from a set of three alternatives. Each
participant answered 15 choice questions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(cars_china)
</code></pre>


<h3>Format</h3>


<table>
<tr>
 <td style="text-align: left;">
   Variable </td><td style="text-align: left;"> Description </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>id</code> </td><td style="text-align: left;"> individual identifiers </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>obsnum</code> </td><td style="text-align: left;"> identifier for unique choice observation </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>choice</code> </td><td style="text-align: left;"> dummy code for choice (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>hev</code> </td><td style="text-align: left;"> dummy code for HEV vehicle type (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>phev10</code> </td><td style="text-align: left;"> dummy code for PHEV vehicle type w/10 mile electric driving range (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>phev20</code> </td><td style="text-align: left;"> dummy code for PHEV vehicle type w/20 mile electric driving range (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>phev40</code> </td><td style="text-align: left;"> dummy code for PHEV vehicle type w/40 mile electric driving range (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>bev75</code> </td><td style="text-align: left;"> dummy code for BEV vehicle type w/75 mile electric driving range (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>bev100</code> </td><td style="text-align: left;"> dummy code for BEV vehicle type w/100 mile electric driving range (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>bev150</code> </td><td style="text-align: left;"> dummy code for BEV vehicle type w/150 mile electric driving range (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>phevFastcharge</code> </td><td style="text-align: left;"> dummy code for whether PHEV vehicle had fast charging capability (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>bevFastcharge</code> </td><td style="text-align: left;"> dummy code for whether BEV vehicle had fast charging capability (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>price</code> </td><td style="text-align: left;"> price of vehicle ($USD) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>opCost</code> </td><td style="text-align: left;"> operating cost of vehicle (US cents / mile) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>accelTime</code> </td><td style="text-align: left;"> 0-60 mph acceleration time (seconds) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>american</code> </td><td style="text-align: left;"> dummy code for whether American brand (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>japanese</code> </td><td style="text-align: left;"> dummy code for whether Japanese brand (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>chinese</code> </td><td style="text-align: left;"> dummy code for whether Chinese brand (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>skorean</code> </td><td style="text-align: left;"> dummy code for whether S. Korean brand (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>weights</code> </td><td style="text-align: left;"> weights for each individual computed so that the sample age and income demographics matched with those of the general car-buying population </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Source</h3>

<p>Raw data downloaded from <a href="https://github.com/jhelvy/tra2015">this repo</a>
</p>


<h3>References</h3>

<p>Helveston, J. P., Liu, Y., Feit, E. M., Fuchs, E. R. H.,
Klampfl, E., &amp; Michalek, J. J. (2015). &quot;Will Subsidies Drive Electric
Vehicle Adoption? Measuring Consumer Preferences in the U.S. and China.&quot;
Transportation Research Part A: Policy and Practice, 73, 96–112.
<a href="https://doi.org/10.1016/j.tra.2015.01.002">doi:10.1016/j.tra.2015.01.002</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(cars_china)

head(cars_china)
</code></pre>

<hr>
<h2 id='cars_us'>Stated car choice observations by US car buyers</h2><span id='topic+cars_us'></span>

<h3>Description</h3>

<p>Data from Helveston et al. (2015) containing 448 stated choice observations
from Chinese car buyers and 384 stated choice observations from US car
buyers. Conjoint surveys were fielded in 2012 in four major Chinese cities
(Beijing, Shanghai, Shenzhen, and Chengdu), online in the US on Amazon
Mechanical Turk, and in person at the Pittsburgh Auto show. Participants
were asked to select a vehicle from a set of three alternatives. Each
participant answered 15 choice questions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(cars_us)
</code></pre>


<h3>Format</h3>


<table>
<tr>
 <td style="text-align: left;">
   Variable </td><td style="text-align: left;"> Description </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>id</code> </td><td style="text-align: left;"> individual identifiers </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>obsnum</code> </td><td style="text-align: left;"> identifier for unique choice observation </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>choice</code> </td><td style="text-align: left;"> dummy code for choice (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>hev</code> </td><td style="text-align: left;"> dummy code for HEV vehicle type (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>phev10</code> </td><td style="text-align: left;"> dummy code for PHEV vehicle type w/10 mile electric driving range (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>phev20</code> </td><td style="text-align: left;"> dummy code for PHEV vehicle type w/20 mile electric driving range (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>phev40</code> </td><td style="text-align: left;"> dummy code for PHEV vehicle type w/40 mile electric driving range (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>bev75</code> </td><td style="text-align: left;"> dummy code for BEV vehicle type w/75 mile electric driving range (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>bev100</code> </td><td style="text-align: left;"> dummy code for BEV vehicle type w/100 mile electric driving range (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>bev150</code> </td><td style="text-align: left;"> dummy code for BEV vehicle type w/150 mile electric driving range (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>phevFastcharge</code> </td><td style="text-align: left;"> dummy code for whether PHEV vehicle had fast charging capability (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>bevFastcharge</code> </td><td style="text-align: left;"> dummy code for whether BEV vehicle had fast charging capability (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>price</code> </td><td style="text-align: left;"> price of vehicle ($USD) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>opCost</code> </td><td style="text-align: left;"> operating cost of vehicle (US cents / mile) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>accelTime</code> </td><td style="text-align: left;"> 0-60 mph acceleration time (seconds) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>american</code> </td><td style="text-align: left;"> dummy code for whether American brand (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>japanese</code> </td><td style="text-align: left;"> dummy code for whether Japanese brand (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>chinese</code> </td><td style="text-align: left;"> dummy code for whether Chinese brand (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>skorean</code> </td><td style="text-align: left;"> dummy code for whether S. Korean brand (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>weights</code> </td><td style="text-align: left;"> weights for each individual computed so that the sample age and income demographics matched with those of the general car-buying population </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Source</h3>

<p>Raw data downloaded from <a href="https://github.com/jhelvy/tra2015">this repo</a>
</p>


<h3>References</h3>

<p>Helveston, J. P., Liu, Y., Feit, E. M., Fuchs, E. R. H.,
Klampfl, E., &amp; Michalek, J. J. (2015). &quot;Will Subsidies Drive Electric
Vehicle Adoption? Measuring Consumer Preferences in the U.S. and China.&quot;
Transportation Research Part A: Policy and Practice, 73, 96–112.
<a href="https://doi.org/10.1016/j.tra.2015.01.002">doi:10.1016/j.tra.2015.01.002</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(cars_us)

head(cars_us)
</code></pre>

<hr>
<h2 id='ci'>Obtain a confidence interval from coefficient draws</h2><span id='topic+ci'></span>

<h3>Description</h3>

<p>Returns a data frame with the columns 'mean', 'lower', and 'upper'
reflecting the mean and lower and upper bounds of a confidence
interval (quantiles) for every column in a data frame of draws
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ci(df, level = 0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ci_+3A_df">df</code></td>
<td>
<p>A data frame of draws with all numeric columns.</p>
</td></tr>
<tr><td><code id="ci_+3A_level">level</code></td>
<td>
<p>The sensitivity of the computed confidence interval (CI).
Defaults to <code>level = 0.95</code>, reflecting a 95% CI.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(logitr)

# Estimate a preference space model
mnl_pref &lt;- logitr(
  data    = yogurt,
  outcome = "choice",
  obsID   = "obsID",
  pars    = c("price", "feat", "brand")
)

# Obtain 10,000 draws of parameters from model
coefs &lt;- coef(mnl_pref)
covariance &lt;- vcov(mnl_pref)
coef_draws &lt;- as.data.frame(MASS::mvrnorm(10^4, coefs, covariance))

# Compute a confidence interval
ci(coef_draws, level = 0.95)

</code></pre>

<hr>
<h2 id='confint.logitr'>Extract Model Confidence Interval</h2><span id='topic+confint.logitr'></span>

<h3>Description</h3>

<p>Returns confidence intervals from an object of class <code>logitr</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'logitr'
confint(object, parm, level = 0.95, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="confint.logitr_+3A_object">object</code></td>
<td>
<p>is an object of class <code>logitr</code> (a model estimated using
the 'logitr()' function).</p>
</td></tr>
<tr><td><code id="confint.logitr_+3A_parm">parm</code></td>
<td>
<p>A specification of which parameters are to be given confidence
intervals, either a vector of numbers or a vector of names.
If missing, all parameters are considered.</p>
</td></tr>
<tr><td><code id="confint.logitr_+3A_level">level</code></td>
<td>
<p>The confidence level required.</p>
</td></tr>
<tr><td><code id="confint.logitr_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of the confidence intervals of model coefficients.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(logitr)

# Estimate a preference space model
mnl_pref &lt;- logitr(
  data    = yogurt,
  outcome = "choice",
  obsID   = "obsID",
  pars    = c("price", "feat", "brand")
)

# Compute a confidence interval
confint(mnl_pref)
</code></pre>

<hr>
<h2 id='dummyCode'>Add dummy-coded variables to data frame.</h2><span id='topic+dummyCode'></span>

<h3>Description</h3>

<p>This function is depreciated. Use fastDummies::dummy_cols() instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dummyCode(df, vars)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dummyCode_+3A_df">df</code></td>
<td>
<p>A data frame.</p>
</td></tr>
<tr><td><code id="dummyCode_+3A_vars">vars</code></td>
<td>
<p>The variables in the data frame for which you want to
create new dummy coded variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A a dataframe with new dummy-coded variables added.
</p>

<hr>
<h2 id='electricity'>Stated preference data for the choice of electricity suppliers (from mlogit package)</h2><span id='topic+electricity'></span>

<h3>Description</h3>

<p>A sample of 2308 households in the United States.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(electricity)
</code></pre>


<h3>Format</h3>


<table>
<tr>
 <td style="text-align: left;">
   Variable </td><td style="text-align: left;"> Description </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>id</code> </td><td style="text-align: left;"> individual identifiers </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>obsID</code> </td><td style="text-align: left;"> identifier for unique choice observation </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>choice</code> </td><td style="text-align: left;"> dummy code for choice (1 or 0) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>alt</code> </td><td style="text-align: left;"> alternative in each choice observation </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>pf</code> </td><td style="text-align: left;"> fixed price at a stated cents per kWh, with the price varying over suppliers and experiments, for scenario i=(1, 2, 3, 4), </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>cl</code> </td><td style="text-align: left;"> the length of contract that the supplier offered, in years (such as 1 year or 5 years.) During this contract period, the supplier guaranteed the prices and the buyer would have to pay a penalty if he/she switched to another supplier. The supplier could offer no contract in which case either side could stop the agreement at any time. This is recorded as a contract length of 0. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>loc</code> </td><td style="text-align: left;"> is the supplier a local company. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>wk</code> </td><td style="text-align: left;"> is the supplier a well-known company. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>tod</code> </td><td style="text-align: left;"> a time-of-day rate under which the price is 11 cents per kWh from 8am to 8pm and 5 cents per kWh from 8pm to 8am. These TOD prices did not vary over suppliers or experiments: whenever the supplier was said to offer TOD, the prices were stated as above. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>seas</code> </td><td style="text-align: left;"> a seasonal rate under which the price is 10 cents per kWh in the summer, 8 cents per kWh in the winter, and 6 cents per kWh in the spring and fall. Like TOD rates, these prices did not vary. Note that the price is for the electricity only, not transmission and distribution, which is supplied by the local regulated utility. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Source</h3>

<p><a href="https://eml.berkeley.edu/~train/">Kenneth Train's home page</a>
</p>


<h3>References</h3>

<p>Croissant, Y. (2020). Estimation of Random Utility Models in R: The mlogit Package. Journal of Statistical Software, 95(11), 1–41.
<a href="https://doi.org/10.18637/jss.v095.i11">doi:10.18637/jss.v095.i11</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(electricity)

head(electricity)
</code></pre>

<hr>
<h2 id='fitted.logitr'>Extract Model Fitted Values</h2><span id='topic+fitted.logitr'></span>

<h3>Description</h3>

<p>Returns fitted values from an object of class <code>logitr</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'logitr'
fitted(object, probs = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fitted.logitr_+3A_object">object</code></td>
<td>
<p>is an object of class <code>logitr</code> (a model estimated using
the 'logitr()' function).</p>
</td></tr>
<tr><td><code id="fitted.logitr_+3A_probs">probs</code></td>
<td>
<p>Predicted probabilities for an object of class <code>logitr</code> to use
in computing fitted values Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="fitted.logitr_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of the <code>obsID</code> and the fitted values extracted from
<code>object</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(logitr)

# Estimate a preference space model
mnl_pref &lt;- logitr(
  data    = yogurt,
  outcome = "choice",
  obsID   = "obsID",
  pars    = c("price", "feat", "brand")
)

# Extract the fitted values from the model
fitted(mnl_pref)
</code></pre>

<hr>
<h2 id='fquantile'>Predict probabilities and / or outcomes</h2><span id='topic+fquantile'></span>

<h3>Description</h3>

<p>This function is a faster implementation of the &quot;type 7&quot; <code>quantile()</code>
algorithm and is modified from this gist:
https://gist.github.com/sikli/f1775feb9736073cefee97ec81f6b193
It returns sample quantiles corresponding to the given probabilities.
The smallest observation corresponds to a probability of 0 and the largest
to a probability of 1. For speed, output quantile names are removed as are
error handling such as checking if x are factors, or if probs lie outside
the <code style="white-space: pre;">&#8288;[0,1]&#8288;</code> range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fquantile(x, probs = seq(0, 1, 0.25), na.rm = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fquantile_+3A_x">x</code></td>
<td>
<p>numeric vector whose sample quantiles are wanted. <code>NA</code> and <code>NaN</code>
values are not allowed in numeric vectors unless <code>na.rm</code> is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="fquantile_+3A_probs">probs</code></td>
<td>
<p>numeric vector of probabilities with values in <code style="white-space: pre;">&#8288;[0,1]&#8288;</code>.
(Values up to <code>2e-14</code> outside that range are accepted and moved to the
nearby endpoint.)</p>
</td></tr>
<tr><td><code id="fquantile_+3A_na.rm">na.rm</code></td>
<td>
<p>logical; if <code>TRUE</code>, any <code>NA</code> and <code>NaN</code>'s are removed from <code>x</code>
before the quantiles are computed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of length <code>length(probs)</code> is returned;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(logitr)

</code></pre>

<hr>
<h2 id='glance.logitr'>Glance a <code>logitr</code> class object</h2><span id='topic+glance.logitr'></span>

<h3>Description</h3>

<p>Glance a <code>logitr</code> class object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'logitr'
glance(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="glance.logitr_+3A_x">x</code></td>
<td>
<p>is an object of class <code>logitr</code>.</p>
</td></tr>
<tr><td><code id="glance.logitr_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble of the model summary statistics.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(logitr)

# Estimate a preference space model
mnl_pref &lt;- logitr(
  data    = yogurt,
  outcome = "choice",
  obsID   = "obsID",
  pars    = c("price", "feat", "brand")
)

# Extract a tibble of the model summary statistics
glance(mnl_pref)

</code></pre>

<hr>
<h2 id='logit_probs'>Compute logit fraction for sets of alternatives given coefficient draws</h2><span id='topic+logit_probs'></span>

<h3>Description</h3>

<p>Returns a data frame of the predicted probabilities (with a confidence
interval) for a data frame of alternatives given coefficient draws.
WARNING: Most of the time you probably want to use <code>predict()</code> instead of
this function. Where <code>logit_probs()</code> is useful is if you estimate a model
with an interaction parameter to see differences between groups. In those
cases, you can obtain draws of the estimated parameters and then use the
draws to predict probabilities for each group after summing together the
appropriate columns of the draws for each group. Also note that this function
is only useful for multinomial logit models and is not appropriate for mixed
logit models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>logit_probs(object, coef_draws, newdata, obsID = NULL, level = 0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="logit_probs_+3A_object">object</code></td>
<td>
<p>is an object of class <code>logitr</code> (a model estimated using
the 'logitr()' function).</p>
</td></tr>
<tr><td><code id="logit_probs_+3A_coef_draws">coef_draws</code></td>
<td>
<p>A data frame of coefficients draws.</p>
</td></tr>
<tr><td><code id="logit_probs_+3A_newdata">newdata</code></td>
<td>
<p>A data frame of sets of alternatives for which to compute
logit probabilities. Each row is an alternative.</p>
</td></tr>
<tr><td><code id="logit_probs_+3A_obsid">obsID</code></td>
<td>
<p>The name of the column in <code>newdata</code> that identifies each set of
alternatives. Defaults to <code>NULL</code>, in which case it assumes the newdata
are all one choice scenario.</p>
</td></tr>
<tr><td><code id="logit_probs_+3A_level">level</code></td>
<td>
<p>The sensitivity of the computed confidence interval (CI).
Defaults to <code>level = 0.95</code>, reflecting a 95% CI.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(logitr)

# Estimate a preference space model
mnl_pref &lt;- logitr(
  data    = yogurt,
  outcome = "choice",
  obsID   = "obsID",
  pars    = c("price", "feat", "brand")
)

# Create a set of alternatives for which to simulate probabilities
# (Columns are attributes, rows are alternatives)
data &lt;- data.frame(
  altID       = c(1, 2, 3, 4),
  obsID       = c(1, 1, 1, 1),
  price       = c(8, 6, 7, 10),
  feat    = c(0, 1, 0, 0),
  brand   = c('dannon', 'hiland', 'weight', 'yoplait')
)

# Obtain 10,000 draws of parameters from model
coefs &lt;- coef(mnl_pref)
covariance &lt;- vcov(mnl_pref)
coef_draws &lt;- as.data.frame(MASS::mvrnorm(10^4, coefs, covariance))

# Compute the probabilities
sim &lt;- logit_probs(
  mnl_pref,
  coef_draws = coef_draws,
  newdata = data,
  obsID = 'obsID',
  level = 0.95
)

</code></pre>

<hr>
<h2 id='logitr'>The main function for estimating logit models</h2><span id='topic+logitr'></span>

<h3>Description</h3>

<p>Use this function to estimate multinomial (MNL) and mixed logit (MXL)
models with &quot;Preference&quot; space or &quot;Willingness-to-pay&quot; (WTP) space utility
parameterizations. The function includes an option to run a multistart
optimization loop with random starting points in each iteration, which is
useful for non-convex problems like MXL models or models with WTP space
utility parameterizations. The main optimization loop uses the <code>nloptr()</code>
function to minimize the negative log-likelihood function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>logitr(
  data,
  outcome,
  obsID,
  pars,
  scalePar = NULL,
  randPars = NULL,
  randScale = NULL,
  modelSpace = NULL,
  weights = NULL,
  panelID = NULL,
  clusterID = NULL,
  robust = FALSE,
  correlation = FALSE,
  startValBounds = c(-1, 1),
  startVals = NULL,
  numMultiStarts = 1,
  useAnalyticGrad = TRUE,
  scaleInputs = TRUE,
  standardDraws = NULL,
  drawType = "halton",
  numDraws = 50,
  numCores = NULL,
  vcov = FALSE,
  predict = TRUE,
  options = list(print_level = 0, xtol_rel = 1e-06, xtol_abs = 1e-06, ftol_rel = 1e-06,
    ftol_abs = 1e-06, maxeval = 1000, algorithm = "NLOPT_LD_LBFGS"),
  price,
  randPrice,
  choice,
  parNames,
  choiceName,
  obsIDName,
  priceName,
  weightsName,
  clusterName,
  cluster
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="logitr_+3A_data">data</code></td>
<td>
<p>The data, formatted as a <code>data.frame</code> object.</p>
</td></tr>
<tr><td><code id="logitr_+3A_outcome">outcome</code></td>
<td>
<p>The name of the column that identifies the outcome variable,
which should be coded with a <code>1</code> for <code>TRUE</code> and <code>0</code> for <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_obsid">obsID</code></td>
<td>
<p>The name of the column that identifies each observation.</p>
</td></tr>
<tr><td><code id="logitr_+3A_pars">pars</code></td>
<td>
<p>The names of the parameters to be estimated in the model.
Must be the same as the column names in the <code>data</code> argument. For WTP space
models, do not include the <code>scalePar</code> variable in <code>pars</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_scalepar">scalePar</code></td>
<td>
<p>The name of the column that identifies the scale variable,
which is typically &quot;price&quot; for WTP space models, but could be any
continuous variable, such as &quot;time&quot;. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_randpars">randPars</code></td>
<td>
<p>A named vector whose names are the random parameters and
values the distribution: <code>'n'</code> for normal, <code>'ln'</code> for log-normal, or
<code>'cn'</code> for zero-censored normal. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_randscale">randScale</code></td>
<td>
<p>The random distribution for the scale parameter: <code>'n'</code> for
normal, <code>'ln'</code> for log-normal, or <code>'cn'</code> for zero-censored normal. Only used
for WTP space MXL models. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_modelspace">modelSpace</code></td>
<td>
<p>This argument is no longer needed as of v0.7.0. The model
space is now determined based on the <code>scalePar</code> argument:
if <code>NULL</code> (the default), the model will be in the preference space,
otherwise it will be in the WTP space. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_weights">weights</code></td>
<td>
<p>The name of the column that identifies the weights to be
used in model estimation. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_panelid">panelID</code></td>
<td>
<p>The name of the column that identifies the individual (for
panel data where multiple observations are recorded for each individual).
Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_clusterid">clusterID</code></td>
<td>
<p>The name of the column that identifies the cluster
groups to be used in model estimation. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_robust">robust</code></td>
<td>
<p>Determines whether or not a robust covariance matrix is
estimated. Defaults to <code>FALSE</code>. Specification of a <code>clusterID</code> or
<code>weights</code> will override the user setting and set this to &lsquo;TRUE&rsquo; (a
warning will be displayed in this case). Replicates the functionality of
Stata's cmcmmixlogit.</p>
</td></tr>
<tr><td><code id="logitr_+3A_correlation">correlation</code></td>
<td>
<p>Set to <code>TRUE</code> to account for correlation across random
parameters (correlated heterogeneity). Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_startvalbounds">startValBounds</code></td>
<td>
<p>sets the <code>lower</code> and <code>upper</code> bounds for the starting
parameter values for each optimization run, which are generated by
<code>runif(n, lower, upper)</code>. Defaults to <code>c(-1, 1)</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_startvals">startVals</code></td>
<td>
<p>is vector of values to be used as starting values for the
optimization. Only used for the first run if <code>numMultiStarts &gt; 1</code>. Defaults
to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_nummultistarts">numMultiStarts</code></td>
<td>
<p>is the number of times to run the optimization loop,
each time starting from a different random starting point for each parameter
between <code>startValBounds</code>. Recommended for non-convex models, such as WTP
space models and mixed logit models. Defaults to <code>1</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_useanalyticgrad">useAnalyticGrad</code></td>
<td>
<p>Set to <code>FALSE</code> to use numerically approximated
gradients instead of analytic gradients during estimation. For now, using
the analytic gradient is faster for MNL models but slower for MXL models.
Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_scaleinputs">scaleInputs</code></td>
<td>
<p>By default each variable in <code>data</code> is scaled to be
between 0 and 1 before running the optimization routine because it usually
helps with stability, especially if some of the variables have very large or
very small values (e.g. <code style="white-space: pre;">&#8288;&gt; 10^3&#8288;</code> or <code style="white-space: pre;">&#8288;&lt; 10^-3&#8288;</code>). Set to <code>FALSE</code> to turn this
feature off. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_standarddraws">standardDraws</code></td>
<td>
<p>By default, a new set of standard normal draws are
generated during each call to <code>logitr</code> (the same draws are used during each
multistart iteration). The user can override those draws by providing a
matrix of standard normal draws if desired. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_drawtype">drawType</code></td>
<td>
<p>Specify the draw type as a character: <code>"halton"</code>
(the default) or <code>"sobol"</code> (recommended for models with more than 5
random parameters).</p>
</td></tr>
<tr><td><code id="logitr_+3A_numdraws">numDraws</code></td>
<td>
<p>The number of Halton draws to use for MXL models for the
maximum simulated likelihood. Defaults to <code>50</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_numcores">numCores</code></td>
<td>
<p>The number of cores to use for parallel processing of the
multistart. Set to <code>1</code> to serially run the multistart. Defaults to <code>NULL</code>,
in which case the number of cores is set to <code>parallel::detectCores() - 1</code>.
Max cores allowed is capped at <code>parallel::detectCores()</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_vcov">vcov</code></td>
<td>
<p>Set to <code>TRUE</code> to evaluate and include the variance-covariance
matrix and coefficient standard errors in the returned object.
Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_predict">predict</code></td>
<td>
<p>If <code>FALSE</code>, predicted probabilities, fitted values, and
residuals are not included in the returned object. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="logitr_+3A_options">options</code></td>
<td>
<p>A list of options for controlling the <code>nloptr()</code> optimization.
Run <code>nloptr::nloptr.print.options()</code> for details.</p>
</td></tr>
<tr><td><code id="logitr_+3A_price">price</code></td>
<td>
<p>No longer used as of v0.7.0 - if provided, this is passed
to the <code>scalePar</code> argument and a warning is displayed.</p>
</td></tr>
<tr><td><code id="logitr_+3A_randprice">randPrice</code></td>
<td>
<p>No longer used as of v0.7.0 - if provided, this is passed
to the <code>randScale</code> argument and a warning is displayed.</p>
</td></tr>
<tr><td><code id="logitr_+3A_choice">choice</code></td>
<td>
<p>No longer used as of v0.4.0 - if provided, this is passed
to the <code>outcome</code> argument and a warning is displayed.</p>
</td></tr>
<tr><td><code id="logitr_+3A_parnames">parNames</code></td>
<td>
<p>No longer used as of v0.2.3 - if provided, this is passed
to the <code>pars</code> argument and a warning is displayed.</p>
</td></tr>
<tr><td><code id="logitr_+3A_choicename">choiceName</code></td>
<td>
<p>No longer used as of v0.2.3 - if provided, this is passed
to the <code>outcome</code> argument and a warning is displayed.</p>
</td></tr>
<tr><td><code id="logitr_+3A_obsidname">obsIDName</code></td>
<td>
<p>No longer used as of v0.2.3 - if provided, this is passed
to the <code>obsID</code> argument and a warning is displayed.</p>
</td></tr>
<tr><td><code id="logitr_+3A_pricename">priceName</code></td>
<td>
<p>No longer used as of v0.2.3 - if provided, this is passed
to the <code>scalePar</code> argument and a warning is displayed.</p>
</td></tr>
<tr><td><code id="logitr_+3A_weightsname">weightsName</code></td>
<td>
<p>No longer used as of v0.2.3 - if provided, this is passed
to the <code>weights</code> argument and a warning is displayed.</p>
</td></tr>
<tr><td><code id="logitr_+3A_clustername">clusterName</code></td>
<td>
<p>No longer used as of v0.2.3 - if provided, this is passed
to the <code>clusterID</code> argument and a warning is displayed.</p>
</td></tr>
<tr><td><code id="logitr_+3A_cluster">cluster</code></td>
<td>
<p>No longer used as of v0.2.3 - if provided, this is passed
to the <code>clusterID</code> argument and a warning is displayed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The the <code>options</code> argument is used to control the detailed behavior of the
optimization and must be passed as a list, e.g. <code>options = list(...)</code>.
Below are a list of the default options, but other options can be included.
Run <code>nloptr::nloptr.print.options()</code> for more details.</p>

<table>
<tr>
 <td style="text-align: left;">
   Argument </td><td style="text-align: left;"> Description </td><td style="text-align: left;"> Default </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>xtol_rel</code> </td><td style="text-align: left;"> The relative <code>x</code> tolerance for the <code>nloptr</code> optimization loop. </td><td style="text-align: left;"> <code>1.0e-6</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>xtol_abs</code> </td><td style="text-align: left;"> The absolute <code>x</code> tolerance for the <code>nloptr</code> optimization loop. </td><td style="text-align: left;"> <code>1.0e-6</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>ftol_rel</code> </td><td style="text-align: left;"> The relative <code>f</code> tolerance for the <code>nloptr</code> optimization loop. </td><td style="text-align: left;"> <code>1.0e-6</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>ftol_abs</code> </td><td style="text-align: left;"> The absolute <code>f</code> tolerance for the <code>nloptr</code> optimization loop. </td><td style="text-align: left;"> <code>1.0e-6</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>maxeval</code> </td><td style="text-align: left;"> The maximum number of function evaluations for the <code>nloptr</code> optimization loop. </td><td style="text-align: left;"> <code>1000</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>algorithm</code> </td><td style="text-align: left;"> The optimization algorithm that <code>nloptr</code> uses. </td><td style="text-align: left;"> <code>"NLOPT_LD_LBFGS"</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>print_level</code> </td><td style="text-align: left;"> The print level of the <code>nloptr</code> optimization loop. </td><td style="text-align: left;"> <code>0</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Value</h3>

<p>The function returns a list object containing the following objects.</p>

<table>
<tr>
 <td style="text-align: left;">
   Value </td><td style="text-align: left;"> Description </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>coefficients</code> </td><td style="text-align: left;"> The model coefficients at convergence. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>logLik</code> </td><td style="text-align: left;"> The log-likelihood value at convergence. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>nullLogLik</code> </td><td style="text-align: left;"> The null log-likelihood value (if all coefficients are 0). </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>gradient</code> </td><td style="text-align: left;"> The gradient of the log-likelihood at convergence. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>hessian</code> </td><td style="text-align: left;"> The hessian of the log-likelihood at convergence. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>probabilities</code> </td><td style="text-align: left;"> Predicted probabilities. Not returned if <code>predict = FALSE</code>. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>fitted.values</code> </td><td style="text-align: left;"> Fitted values. Not returned if <code>predict = FALSE</code>. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>residuals</code> </td><td style="text-align: left;"> Residuals. Not returned if <code>predict = FALSE</code>. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>startVals</code> </td><td style="text-align: left;"> The starting values used. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>multistartNumber</code> </td><td style="text-align: left;"> The multistart run number for this model. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>multistartSummary</code> </td><td style="text-align: left;"> A summary of the log-likelihood values for each multistart run (if more than one multistart was used). </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>time</code> </td><td style="text-align: left;"> The user, system, and elapsed time to run the optimization. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>iterations</code> </td><td style="text-align: left;"> The number of iterations until convergence. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>message</code> </td><td style="text-align: left;"> A more informative message with the status of the optimization result. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>status</code> </td><td style="text-align: left;"> An integer value with the status of the optimization (positive values are successes). Use <code><a href="#topic+statusCodes">statusCodes()</a></code> for a detailed description. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>call</code> </td><td style="text-align: left;"> The matched call to <code>logitr()</code>. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>inputs</code> </td><td style="text-align: left;"> A list of the original inputs to <code>logitr()</code>. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>data</code> </td><td style="text-align: left;"> A list of the original data provided to <code>logitr()</code> broken up into components used during model estimation. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>numObs</code> </td><td style="text-align: left;"> The number of observations. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>numParams</code> </td><td style="text-align: left;"> The number of model parameters. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>freq</code> </td><td style="text-align: left;"> The frequency counts of each alternative. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>modelType</code> </td><td style="text-align: left;"> The model type, <code>'mnl'</code> for multinomial logit or <code>'mxl'</code> for mixed logit. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>weightsUsed</code> </td><td style="text-align: left;"> <code>TRUE</code> or <code>FALSE</code> for whether weights were used in the model. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>numClusters</code> </td><td style="text-align: left;"> The number of clusters. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>parSetup</code> </td><td style="text-align: left;"> A summary of the distributional assumptions on each model parameter (<code>"f"</code>="fixed", <code>"n"</code>="normal distribution", <code>"ln"</code>="log-normal distribution"). </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>parIDs</code> </td><td style="text-align: left;"> A list identifying the indices of each parameter in <code>coefficients</code> by a variety of types. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>scaleFactors</code> </td><td style="text-align: left;"> A vector of the scaling factors used to scale each coefficient during estimation. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>standardDraws</code> </td><td style="text-align: left;"> The draws used during maximum simulated likelihood (for MXL models). </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>options</code> </td><td style="text-align: left;"> A list of options for controlling the <code>nloptr()</code> optimization. Run <code>nloptr::nloptr.print.options()</code> for details. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Examples</h3>

<pre><code class='language-R'># For more detailed examples, visit
# https://jhelvy.github.io/logitr/articles/

library(logitr)

# Estimate a MNL model in the Preference space
mnl_pref &lt;- logitr(
  data    = yogurt,
  outcome = "choice",
  obsID   = "obsID",
  pars    = c("price", "feat", "brand")
)

# Estimate a MNL model in the WTP space, using a 5-run multistart
mnl_wtp &lt;- logitr(
  data           = yogurt,
  outcome        = "choice",
  obsID          = "obsID",
  pars           = c("feat", "brand"),
  scalePar       = "price",
  numMultiStarts = 5
)

# Estimate a MXL model in the Preference space with "feat"
# following a normal distribution
# Panel structure is accounted for in this example using "panelID"
mxl_pref &lt;- logitr(
  data     = yogurt,
  outcome  = "choice",
  obsID    = "obsID",
  panelID  = "id",
  pars     = c("price", "feat", "brand"),
  randPars = c(feat = "n")
)
</code></pre>

<hr>
<h2 id='miscmethods.logitr'>Methods for logitr objects</h2><span id='topic+miscmethods.logitr'></span><span id='topic+logLik.logitr'></span><span id='topic+terms.logitr'></span><span id='topic+coef.logitr'></span><span id='topic+coef.summary.logitr'></span><span id='topic+summary.logitr'></span><span id='topic+print.logitr'></span><span id='topic+print.summary.logitr'></span><span id='topic+print.logitr_wtp'></span>

<h3>Description</h3>

<p>Miscellaneous methods for <code>logitr</code> class objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'logitr'
logLik(object, ...)

## S3 method for class 'logitr'
terms(x, ...)

## S3 method for class 'logitr'
coef(object, ...)

## S3 method for class 'summary.logitr'
coef(object, ...)

## S3 method for class 'logitr'
summary(object, ...)

## S3 method for class 'logitr'
print(
  x,
  digits = max(3, getOption("digits") - 2),
  width = getOption("width"),
  ...
)

## S3 method for class 'summary.logitr'
print(
  x,
  digits = max(3, getOption("digits") - 2),
  width = getOption("width"),
  ...
)

## S3 method for class 'logitr_wtp'
print(
  x,
  digits = max(3, getOption("digits") - 2),
  width = getOption("width"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="miscmethods.logitr_+3A_object">object</code></td>
<td>
<p>is an object of class <code>logitr</code> (a model estimated using
the 'logitr()' function).</p>
</td></tr>
<tr><td><code id="miscmethods.logitr_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
<tr><td><code id="miscmethods.logitr_+3A_x">x</code></td>
<td>
<p>is an object of class <code>logitr</code>.</p>
</td></tr>
<tr><td><code id="miscmethods.logitr_+3A_digits">digits</code></td>
<td>
<p>the number of digits for printing, defaults to <code>3</code>.</p>
</td></tr>
<tr><td><code id="miscmethods.logitr_+3A_width">width</code></td>
<td>
<p>the width of the printing.</p>
</td></tr>
</table>

<hr>
<h2 id='model.frame.logitr'>Extracting the Model Frame from a Formula or Fit</h2><span id='topic+model.frame.logitr'></span>

<h3>Description</h3>

<p>Returns a data.frame with the variables needed to use formula and
any <code>...</code> arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'logitr'
model.frame(formula, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="model.frame.logitr_+3A_formula">formula</code></td>
<td>
<p>a model <code>formula</code> or <code>terms</code> object or an R object.</p>
</td></tr>
<tr><td><code id="model.frame.logitr_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with the variables needed to use formula and
any <code>...</code> arguments.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(logitr)

# Estimate a preference space model
mnl_pref &lt;- logitr(
  data    = yogurt,
  outcome = "choice",
  obsID   = "obsID",
  pars    = c("price", "feat", "brand")
)

# Get the model.frame data frame
model.frame(mnl_pref)
</code></pre>

<hr>
<h2 id='model.matrix.logitr'>Construct Design Matrices</h2><span id='topic+model.matrix.logitr'></span>

<h3>Description</h3>

<p>Creates a design (or model) matrix, e.g., by expanding factors to a set of
dummy variables (depending on the contrasts) and expanding interactions
similarly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'logitr'
model.matrix(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="model.matrix.logitr_+3A_object">object</code></td>
<td>
<p>an object of an appropriate class. For the default method,
a model <code>formula</code> or a <code>terms</code> object.</p>
</td></tr>
<tr><td><code id="model.matrix.logitr_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A design matrix
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(logitr)

# Estimate a preference space model
mnl_pref &lt;- logitr(
  data    = yogurt,
  outcome = "choice",
  obsID   = "obsID",
  pars    = c("price", "feat", "brand")
)

# Get the model.matrix design matrix
model.matrix(mnl_pref)
</code></pre>

<hr>
<h2 id='predict.logitr'>Predict probabilities and / or outcomes</h2><span id='topic+predict.logitr'></span>

<h3>Description</h3>

<p>This method is used for computing predicted probabilities and / or outcomes
for either the data used for model estimation or a new data set consisting
of a single or multiple sets of alternatives.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'logitr'
predict(
  object,
  newdata = NULL,
  obsID = NULL,
  type = "prob",
  returnData = FALSE,
  interval = "none",
  level = 0.95,
  numDrawsCI = 10^4,
  pars = NULL,
  scalePar = NULL,
  randPars = NULL,
  randScale = NULL,
  ci,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.logitr_+3A_object">object</code></td>
<td>
<p>is an object of class <code>logitr</code> (a model estimated using
the 'logitr()' function).</p>
</td></tr>
<tr><td><code id="predict.logitr_+3A_newdata">newdata</code></td>
<td>
<p>a <code>data.frame</code>. Each row is an alternative and each column an
attribute corresponding to parameter names in the estimated model. Defaults
to <code>NULL</code>, in which case predictions are made on the original data used to
estimate the model.</p>
</td></tr>
<tr><td><code id="predict.logitr_+3A_obsid">obsID</code></td>
<td>
<p>The name of the column that identifies each set of
alternatives in the data. Required if newdata != NULL. Defaults to <code>NULL</code>,
in which case the value for <code>obsID</code> from the data in <code>object</code> is used.</p>
</td></tr>
<tr><td><code id="predict.logitr_+3A_type">type</code></td>
<td>
<p>A character vector defining what to predict: <code>prob</code> for
probabilities, <code>outcomes</code> for outcomes. If you want both outputs, use
<code>c("prob", "outcome")</code>. Outcomes are predicted randomly according to the
predicted probabilities. Defaults to <code>"prob"</code>.</p>
</td></tr>
<tr><td><code id="predict.logitr_+3A_returndata">returnData</code></td>
<td>
<p>If <code>TRUE</code> the data is also returned, otherwise only the
predicted values (&quot;prob&quot; and / or  &quot;outcome&quot;) are returned.
Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="predict.logitr_+3A_interval">interval</code></td>
<td>
<p>Type of interval calculation: &quot;none&quot; (default) or
&quot;confidence&quot;. Future versions will include &quot;prediction&quot; intervals as well.</p>
</td></tr>
<tr><td><code id="predict.logitr_+3A_level">level</code></td>
<td>
<p>Tolerance / confidence interval. Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="predict.logitr_+3A_numdrawsci">numDrawsCI</code></td>
<td>
<p>The number of draws to use in simulating uncertainty
for the computed CI. Defaults to 10^4.</p>
</td></tr>
<tr><td><code id="predict.logitr_+3A_pars">pars</code></td>
<td>
<p>The names of the parameters to be estimated in the model.
Must be the same as the column names in the <code>data</code> argument. For WTP space
models, do not include the <code>scalePar</code> variable in <code>pars</code>.</p>
</td></tr>
<tr><td><code id="predict.logitr_+3A_scalepar">scalePar</code></td>
<td>
<p>The name of the column that identifies the scale variable,
which is typically &quot;price&quot; for WTP space models, but could be any
continuous variable, such as &quot;time&quot;. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="predict.logitr_+3A_randpars">randPars</code></td>
<td>
<p>A named vector whose names are the random parameters and
values the distribution: <code>'n'</code> for normal, <code>'ln'</code> for log-normal, or
<code>'cn'</code> for zero-censored normal. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="predict.logitr_+3A_randscale">randScale</code></td>
<td>
<p>The random distribution for the scale parameter: <code>'n'</code> for
normal, <code>'ln'</code> for log-normal, or <code>'cn'</code> for zero-censored normal. Only used
for WTP space MXL models. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="predict.logitr_+3A_ci">ci</code></td>
<td>
<p>No longer used as of v1.1.0 - if provided, this is passed
to the <code>level</code> argument, <code>interval</code> is set to <code>"confidence"</code>,
and a warning is displayed.</p>
</td></tr>
<tr><td><code id="predict.logitr_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of predicted probabilities and / or outcomes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(logitr)

# Estimate a preference space model
mnl_pref &lt;- logitr(
  data    = yogurt,
  outcome = "choice",
  obsID   = "obsID",
  pars    = c("price", "feat", "brand")
)

# Predict probabilities and / or outcomes

# Predict probabilities for each alternative in the model data
probs &lt;- predict(mnl_pref)
head(probs)

# Create a set of alternatives for which to make predictions.
# Each row is an alternative and each column an attribute.
data &lt;- subset(
    yogurt, obsID %in% c(42, 13),
    select = c('obsID', 'alt', 'price', 'feat', 'brand'))
data

# Predict probabilities using the estimated model
predict(mnl_pref, newdata = data, obsID = "obsID")

# Predict probabilities and include a 95% confidence interval
predict(
  mnl_pref,
  newdata = data,
  obsID = "obsID",
  interval = "confidence",
  level = 0.95
)

# Predict outcomes
predict(mnl_pref, newdata = data, obsID = "obsID", type = "outcome")

# Predict outcomes and probabilities
predict(mnl_pref, newdata = data, obsID = "obsID", type = c("prob", "outcome"))
</code></pre>

<hr>
<h2 id='predictChoices'>Predict choices</h2><span id='topic+predictChoices'></span>

<h3>Description</h3>

<p>Returns the expected choices for a set of one or more alternatives based
on the results from an estimated model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predictChoices(model, alts, altID, obsID = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predictChoices_+3A_model">model</code></td>
<td>
<p>The output of a model estimated model using the <code>logitr()</code>
function.
Include if you want to compare true choices from actual observations (e.g.
hold outs) to the predicted choices.</p>
</td></tr>
<tr><td><code id="predictChoices_+3A_alts">alts</code></td>
<td>
<p>A data frame of a set of alternatives for which to predict
choices. Each row is an alternative and each column an attribute
corresponding to parameter names in the estimated model.</p>
</td></tr>
<tr><td><code id="predictChoices_+3A_altid">altID</code></td>
<td>
<p>The name of the column that identifies each alternative
in each set of alternatives.</p>
</td></tr>
<tr><td><code id="predictChoices_+3A_obsid">obsID</code></td>
<td>
<p>The name of the column that identifies each set of
alternatives. Required if predicting results for more than one set of
alternatives. Defaults to <code>NULL</code> (for a single set of alternatives).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the predicted choices for each alternative in
<code>alts</code>.
</p>

<hr>
<h2 id='predictProbs'>Predict expected choice probabilities</h2><span id='topic+predictProbs'></span>

<h3>Description</h3>

<p>Returns the expected choice probabilities for a single set or multiple sets
of alternatives based on the results from an estimated model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predictProbs(
  model,
  alts,
  altID,
  obsID = NULL,
  computeCI = TRUE,
  ci = 0.95,
  numDraws = 10^4,
  alpha
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predictProbs_+3A_model">model</code></td>
<td>
<p>The output of a model estimated model using the <code>logitr()</code>
function.</p>
</td></tr>
<tr><td><code id="predictProbs_+3A_alts">alts</code></td>
<td>
<p>A data frame of a set of alternatives for which to predict
choice probabilities. Each row is an alternative and each column an
attribute corresponding to parameter names in the estimated model.</p>
</td></tr>
<tr><td><code id="predictProbs_+3A_altid">altID</code></td>
<td>
<p>The name of the column that identifies each alternative
in each set of alternatives.</p>
</td></tr>
<tr><td><code id="predictProbs_+3A_obsid">obsID</code></td>
<td>
<p>The name of the column that identifies each set of
alternatives. Required if predicting results for more than one set of
alternatives. Defaults to <code>NULL</code> (for a single set of alternatives).</p>
</td></tr>
<tr><td><code id="predictProbs_+3A_computeci">computeCI</code></td>
<td>
<p>Should a confidence interval be computed?
Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="predictProbs_+3A_ci">ci</code></td>
<td>
<p>The sensitivity of the computed confidence interval (CI).
Defaults to <code>ci = 0.95</code>, reflecting a 95% CI.</p>
</td></tr>
<tr><td><code id="predictProbs_+3A_numdraws">numDraws</code></td>
<td>
<p>The number of draws to use in simulating uncertainty
for the computed confidence interval.</p>
</td></tr>
<tr><td><code id="predictProbs_+3A_alpha">alpha</code></td>
<td>
<p>The sensitivity of the computed confidence interval.
No longer used as of v0.2.7 - if provided, a warning is shown and <code>ci</code>
is computed from <code>alpha</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the estimated choice probabilities for each
alternative in <code>alts</code>.
</p>

<hr>
<h2 id='recodeData'>Returns a list of the design matrix <code>X</code> and updated <code>pars</code> and
<code>randPars</code> to include any dummy-coded categorical or interaction
variables.</h2><span id='topic+recodeData'></span>

<h3>Description</h3>

<p>Recodes the data and returns a list of the encoded design matrix (<code>X</code>) as
well as two vectors (<code>pars</code> and <code>randPars</code>) with discrete (categorical)
variables and interaction variables added to <code>X</code>, <code>pars</code>, and
<code>randPars</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recodeData(data, pars, randPars)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recodeData_+3A_data">data</code></td>
<td>
<p>The data, formatted as a <code>data.frame</code> object.</p>
</td></tr>
<tr><td><code id="recodeData_+3A_pars">pars</code></td>
<td>
<p>The names of the parameters to be estimated in the model.
Must be the same as the column names in the <code>data</code> argument. For WTP space
models, do not include price in <code>pars</code> - it should instead be defined by
the <code>scalePar</code> argument.</p>
</td></tr>
<tr><td><code id="recodeData_+3A_randpars">randPars</code></td>
<td>
<p>A named vector whose names are the random parameters and
values the distribution: <code>'n'</code> for normal or <code>'ln'</code> for log-normal.
Defaults to <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of the design matrix (<code>X</code>) and two vectors (<code>pars</code> and
<code>randPars</code>) with discrete (categorical) variables and interaction variables
added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(logitr)

data(yogurt)

# Recode the yogurt data
result &lt;- recodeData(
    data = yogurt,
    pars = c("price", "feat", "brand", "price*brand"),
    randPars = c(feat = "n", brand = "n")
)

result$formula
result$pars
result$randPars
head(result$X)
</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+tidy'></span><span id='topic+glance'></span><span id='topic+augment'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>generics</dt><dd><p><code><a href="generics.html#topic+augment">augment</a></code>, <code><a href="generics.html#topic+glance">glance</a></code>, <code><a href="generics.html#topic+tidy">tidy</a></code></p>
</dd>
</dl>

<hr>
<h2 id='residuals.logitr'>Extract Model Residuals</h2><span id='topic+residuals.logitr'></span>

<h3>Description</h3>

<p>Returns model residuals from an object of class <code>logitr</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'logitr'
residuals(object, fitted = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="residuals.logitr_+3A_object">object</code></td>
<td>
<p>is an object of class <code>logitr</code> (a model estimated using
the 'logitr()' function).</p>
</td></tr>
<tr><td><code id="residuals.logitr_+3A_fitted">fitted</code></td>
<td>
<p>Fitted values for an object of class <code>logitr</code> to use in
computing residuals. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="residuals.logitr_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of the <code>obsID</code> and the residuals (response minus fitted
values) extracted from <code>object</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(logitr)

# Estimate a preference space model
mnl_pref &lt;- logitr(
  data    = yogurt,
  outcome = "choice",
  obsID   = "obsID",
  pars    = c("price", "feat", "brand")
)

# Extract the residuals from the model
residuals(mnl_pref)
</code></pre>

<hr>
<h2 id='runtimes'>Data frame of run times for logitr benchmark</h2><span id='topic+runtimes'></span>

<h3>Description</h3>

<p>This data frame contains the run times for a benchmark comparing the
relative computation time to estimate a preference space mixed logit model
using the following R packages: logitr, mixl, mlogit, gmnl, and
apollo. The run times are exported from the Google colab notebook here:
https://colab.research.google.com/drive/1vYlBdJd4xCV43UwJ33XXpO3Ys8xWkuxx?usp=sharing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(runtimes)
</code></pre>


<h3>Format</h3>


<table>
<tr>
 <td style="text-align: left;">
   Variable </td><td style="text-align: left;"> Description </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>package</code> </td><td style="text-align: left;"> Package name. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>time_sec</code> </td><td style="text-align: left;"> The estimation time in seconds. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>numDraws</code> </td><td style="text-align: left;"> The number of random draws used during estimation. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Source</h3>

<p><a href="https://colab.research.google.com/drive/1vYlBdJd4xCV43UwJ33XXpO3Ys8xWkuxx?usp=sharing">This</a> Google colab notebook
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(runtimes)

head(runtimes)
</code></pre>

<hr>
<h2 id='se'>Extract standard errors</h2><span id='topic+se'></span>

<h3>Description</h3>

<p>Extract standard errors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>se(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="se_+3A_object">object</code></td>
<td>
<p>is an object of class <code>logitr</code> (a model estimated using
the 'logitr()' function).</p>
</td></tr>
<tr><td><code id="se_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
</table>

<hr>
<h2 id='se.logitr'>Extract standard errors</h2><span id='topic+se.logitr'></span>

<h3>Description</h3>

<p>Extract standard errors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'logitr'
se(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="se.logitr_+3A_object">object</code></td>
<td>
<p>is an object of class <code>logitr</code> (a model estimated using
the 'logitr()' function).</p>
</td></tr>
<tr><td><code id="se.logitr_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
</table>

<hr>
<h2 id='simulateShares'>Simulate expected shares</h2><span id='topic+simulateShares'></span>

<h3>Description</h3>

<p>This function has been depreciated since logitr version 0.1.4. Use
<code>predictProbs()</code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulateShares(
  model,
  alts,
  obsIDName = NULL,
  priceName = NULL,
  computeCI = TRUE,
  alpha = 0.025,
  numDraws = 10^4
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulateShares_+3A_model">model</code></td>
<td>
<p>The output of a model estimated model using the <code>logitr()</code>
function.</p>
</td></tr>
<tr><td><code id="simulateShares_+3A_alts">alts</code></td>
<td>
<p>A data frame of a set of alternatives for which to simulate
shares. Each row is an alternative and each column an attribute
corresponding to parameter names in the estimated model.</p>
</td></tr>
<tr><td><code id="simulateShares_+3A_obsidname">obsIDName</code></td>
<td>
<p>The name of the column that identifies each set of
alternatives. Required if simulating results for more than one set of
alternatives. Defaults to <code>NULL</code> (for a single set of alternatives).</p>
</td></tr>
<tr><td><code id="simulateShares_+3A_pricename">priceName</code></td>
<td>
<p>The name of the parameter that identifies price. Only
required for WTP space models. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="simulateShares_+3A_computeci">computeCI</code></td>
<td>
<p>Should a confidence interval be computed?
Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="simulateShares_+3A_alpha">alpha</code></td>
<td>
<p>The sensitivity of the computed confidence interval.
Defaults to <code>alpha = 0.025</code>, reflecting a 95% CI.</p>
</td></tr>
<tr><td><code id="simulateShares_+3A_numdraws">numDraws</code></td>
<td>
<p>The number of draws to use in simulating uncertainty
for the computed confidence interval.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the estimated shares for each alternative in
<code>alts</code>.
</p>

<hr>
<h2 id='statusCodes'>View a description the nloptr status codes</h2><span id='topic+statusCodes'></span>

<h3>Description</h3>

<p>Prints a description of the status codes from the nloptr optimization routine.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>statusCodes()
</code></pre>


<h3>Value</h3>

<p>No return value; prints a summary of the <code>nloptr</code> status codes to
the console.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>statusCodes()
</code></pre>

<hr>
<h2 id='tidy.logitr'>Tidy a <code>logitr</code> class object</h2><span id='topic+tidy.logitr'></span>

<h3>Description</h3>

<p>Tidy a <code>logitr</code> class object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'logitr'
tidy(x, conf.int = FALSE, conf.level = 0.95, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tidy.logitr_+3A_x">x</code></td>
<td>
<p>is an object of class <code>logitr</code>.</p>
</td></tr>
<tr><td><code id="tidy.logitr_+3A_conf.int">conf.int</code></td>
<td>
<p>Logical indicating whether or not to include
a confidence interval in the tidied output. Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="tidy.logitr_+3A_conf.level">conf.level</code></td>
<td>
<p>The confidence level to use for the confidence
interval if conf.int = TRUE. Must be strictly greater than 0
and less than 1. Defaults to 0.95, which corresponds to a
95 percent confidence interval.</p>
</td></tr>
<tr><td><code id="tidy.logitr_+3A_...">...</code></td>
<td>
<p>Unused, included for generic consistency only.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tidy <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> summarizing component-level
information about the model
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(logitr)

# Estimate a preference space model
mnl_pref &lt;- logitr(
  data    = yogurt,
  outcome = "choice",
  obsID   = "obsID",
  pars    = c("price", "feat", "brand")
)

# Extract a tibble of the model coefficients
tidy(mnl_pref)

# Extract a tibble of the model coefficients with confidence intervals
tidy(mnl_pref, conf.int = TRUE)

</code></pre>

<hr>
<h2 id='vcov.logitr'>Calculate the variance-covariance matrix</h2><span id='topic+vcov.logitr'></span>

<h3>Description</h3>

<p>Returns the variance-covariance matrix of the main parameters of a fitted
model object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'logitr'
vcov(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vcov.logitr_+3A_object">object</code></td>
<td>
<p>is an object of class <code>logitr</code> (a model estimated using
the 'logitr()' function).</p>
</td></tr>
<tr><td><code id="vcov.logitr_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
</table>

<hr>
<h2 id='wtp'>Get WTP estimates a preference space model</h2><span id='topic+wtp'></span>

<h3>Description</h3>

<p>Returns the computed WTP from a preference space model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wtp(object, scalePar)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wtp_+3A_object">object</code></td>
<td>
<p>is an object of class <code>logitr</code> (a model estimated using
the 'logitr()' function).</p>
</td></tr>
<tr><td><code id="wtp_+3A_scalepar">scalePar</code></td>
<td>
<p>The name of the column that identifies the scale variable,
which is typically &quot;price&quot; for WTP space models, but could be any
continuous variable, such as &quot;time&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Willingness to pay is computed by dividing the estimated parameters of a
utility model in the &quot;preference&quot; space by the scale parameter, which is
should be price to obtain WTP estimates. Uncertainty is handled via
simulation.
</p>


<h3>Value</h3>

<p>A data frame of the WTP estimates.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(logitr)

# Estimate a preference space model
mnl_pref &lt;- logitr(
  data    = yogurt,
  outcome = "choice",
  obsID   = "obsID",
  pars    = c("price", "feat", "brand")
)

# Compute the WTP implied from the preference space model
wtp(mnl_pref, scalePar = "price")
</code></pre>

<hr>
<h2 id='wtp.logitr'>Get WTP estimates a preference space model</h2><span id='topic+wtp.logitr'></span>

<h3>Description</h3>

<p>Returns the computed WTP from a preference space model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'logitr'
wtp(object, scalePar)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wtp.logitr_+3A_object">object</code></td>
<td>
<p>is an object of class <code>logitr</code> (a model estimated using
the 'logitr()' function).</p>
</td></tr>
<tr><td><code id="wtp.logitr_+3A_scalepar">scalePar</code></td>
<td>
<p>The name of the column that identifies the scale variable,
which is typically &quot;price&quot; for WTP space models, but could be any
continuous variable, such as &quot;time&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Willingness to pay is computed by dividing the estimated parameters of a
utility model in the &quot;preference&quot; space by the scale parameter, which is
should be price to obtain WTP estimates. Uncertainty is handled via
simulation.
</p>


<h3>Value</h3>

<p>A data frame of the WTP estimates.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(logitr)

# Estimate a preference space model
mnl_pref &lt;- logitr(
  data    = yogurt,
  outcome = "choice",
  obsID   = "obsID",
  pars    = c("price", "feat", "brand")
)

# Compute the WTP implied from the preference space model
wtp(mnl_pref, scalePar = "price")
</code></pre>

<hr>
<h2 id='wtpCompare'>Compare WTP from preference and WTP space models</h2><span id='topic+wtpCompare'></span>

<h3>Description</h3>

<p>Returns a comparison of the WTP between a preference space and WTP space
model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wtpCompare(model_pref, model_wtp, scalePar)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wtpCompare_+3A_model_pref">model_pref</code></td>
<td>
<p>The output of a &quot;preference space&quot; model estimated using
the <code>logitr()</code> function.</p>
</td></tr>
<tr><td><code id="wtpCompare_+3A_model_wtp">model_wtp</code></td>
<td>
<p>The output of a &quot;willingness to pay space&quot; model estimated
using the <code>logitr()</code> function.</p>
</td></tr>
<tr><td><code id="wtpCompare_+3A_scalepar">scalePar</code></td>
<td>
<p>The name of the column that identifies the scale variable,
which is typically &quot;price&quot; for WTP space models, but could be any
continuous variable, such as &quot;time&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Willingness to pay (WTP) is first computed from the preference space model
by dividing the estimated parameters by the scale parameter (typically
&quot;price&quot; to obtain WTP estimates). Then those estimates are compared against
the WTP values directly estimated from the &quot;WTP&quot; space model. Uncertainty is
handled via simulation.
</p>


<h3>Value</h3>

<p>A data frame comparing the WTP estimates from preference space and
WTP space models.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(logitr)

# Estimate a MNL model in the Preference space
mnl_pref &lt;- logitr(
  data    = yogurt,
  outcome = "choice",
  obsID   = "obsID",
  pars    = c("price", "feat", "brand")
)

# Compute the WTP implied from the preference space model
wtp_mnl_pref &lt;- wtp(mnl_pref, scalePar = "price")

# Estimate a MNL model in the WTP Space, using the computed WTP values
# from the preference space model as starting points
mnl_wtp &lt;- logitr(
  data      = yogurt,
  outcome   = "choice",
  obsID     = "obsID",
  pars      = c("feat", "brand"),
  scalePar  = "price",
  startVals = wtp_mnl_pref$Estimate
)

# Compare the WTP between the two spaces
wtpCompare(mnl_pref, mnl_wtp, scalePar = "price")
</code></pre>

<hr>
<h2 id='yogurt'>Choice observations of yogurt purchases by 100 households</h2><span id='topic+yogurt'></span>

<h3>Description</h3>

<p>Data from Jain et al. (1994) containing 2,412 choice observations from a
series of yogurt purchases by a panel of 100 households in Springfield,
Missouri, over a roughly two-year period. The data were collected by
optical scanners and contain information about the price, brand, and a
&quot;feature&quot; variable, which identifies whether a newspaper advertisement was
shown to the customer. There are four brands of yogurt: Yoplait, Dannon,
Weight Watchers, and Hiland, with market shares of 34%, 40%, 23% and 3%,
respectively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(yogurt)
</code></pre>


<h3>Format</h3>


<table>
<tr>
 <td style="text-align: left;">
   Variable </td><td style="text-align: left;"> Description </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>id</code> </td><td style="text-align: left;"> individual identifiers </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>obsID</code> </td><td style="text-align: left;"> identifier for unique choice observation </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>alt</code> </td><td style="text-align: left;"> alternative in each choice observation </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>choice</code> </td><td style="text-align: left;"> dummy code for choice (1 or 0) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>price</code> </td><td style="text-align: left;"> price of yogurt </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>feat</code> </td><td style="text-align: left;"> dummy for whether a newspaper advertisement was shown to the customer (<code>1</code> or <code>0</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>brand</code> </td><td style="text-align: left;"> yogurt brand: <code>"yoplait"</code>, <code>"dannon"</code>, <code>"hiland"</code>, or <code>"weight"</code> (for weight watcher) </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Source</h3>

<p>Raw data downloaded from the package mlogit v0.3-0 by Yves
Croissant <a href="https://www.rdocumentation.org/packages/mlogit/versions/0.3-0/topics/Yogurt">archive</a>
</p>


<h3>References</h3>

<p>Dipak C. Jain, Naufel J. Vilcassim &amp; Pradeep K. Chintagunta (1994) A Random-Coefficients Logit Brand-Choice Model Applied to Panel Data, Journal of Business &amp; Economic Statistics, 12:3, 317-328,
<a href="https://doi.org/10.1080/07350015.1994.10524547">doi:10.1080/07350015.1994.10524547</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(yogurt)

head(yogurt)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
