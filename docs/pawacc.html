<!DOCTYPE html><html><head><title>Help for package pawacc</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {pawacc}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#aggAccFile'>
<p>Aggregate Accelerometry Data</p></a></li>
<li><a href='#collapse.accfile'>
<p>Collapse raw accelerometer files into a summary dataset</p></a></li>
<li><a href='#dateSummary'>
<p>Date summary for accelerometer files</p></a></li>
<li><a href='#errorChk'>
<p>Perform error checking</p></a></li>
<li><a href='#fun.collapse'>
<p>Summary statistics</p></a></li>
<li><a href='#gt1m_sample'><p>GT1M accelerometer file</p></a></li>
<li><a href='#gt1mAccDir'>
<p>Read list of accelerometer files</p></a></li>
<li><a href='#gt1mAccFile'>
<p>Read a single accelerometer file</p></a></li>
<li><a href='#gt3x_sample'><p>GT3X accelerometer file</p></a></li>
<li><a href='#gt3xAccDir'>
<p>Read list of accelerometer files</p></a></li>
<li><a href='#gt3xAccFile'>
<p>Read a single accelerometer file</p></a></li>
<li><a href='#markbouts.acclist'>
<p>Classify accumulation of physical activity in bouts</p></a></li>
<li><a href='#markpa.acclist'>
<p>Classify mode of physical activity</p></a></li>
<li><a href='#markwear.acclist'>
<p>Classify wear and non-wear time</p></a></li>
<li><a href='#pawacc-internal'><p>Internal pawacc objects</p></a></li>
<li><a href='#pawacc-package'>
<p>Physical Activity with Accelerometers</p></a></li>
<li><a href='#plot.gt1m'>
<p>Plot accelerometer file</p></a></li>
<li><a href='#print.acclist'>
<p>Print an <code>accfile</code> or <code>acclist</code> Object</p></a></li>
<li><a href='#readAccDir'>
<p>Read content of a directory with accelerometer files</p></a></li>
<li><a href='#tsFormat'>
<p>Time Stamping</p></a></li>
<li><a href='#tsFromEpoch'>
<p>Calculate timestamp from epoch number or epoch number from timestamp</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Physical Activity with Accelerometers</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-02-11</td>
</tr>
<tr>
<td>Author:</td>
<td>Marco Geraci</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Marco Geraci &lt;marco.geraci@uniroma1.it&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, utils, graphics, SparseM</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions to process, format and store ActiGraph GT1M and GT3X accelerometer data.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-11 15:27:20 UTC; marco</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-12 09:20:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='aggAccFile'>
Aggregate Accelerometry Data
</h2><span id='topic+aggAccFile'></span>

<h3>Description</h3>

<p>This function aggregates count values 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aggAccFile(object, by, which = "counts",
	x = NULL, keep.error = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="aggAccFile_+3A_object">object</code></td>
<td>

<p>an object of class <code>accfile</code>.
</p>
</td></tr>
<tr><td><code id="aggAccFile_+3A_by">by</code></td>
<td>

<p>epoch by which count and steps are aggregated. Note: it cannot be less that the accelerometer epoch (<code>object$info$epoch</code>).
</p>
</td></tr>
<tr><td><code id="aggAccFile_+3A_which">which</code></td>
<td>

<p>either 'counts' or 'steps' for <code>gt1m</code> files or one of <code>c('x','y','z','steps')</code> for <code>gt3x</code> files.
</p>
</td></tr>
<tr><td><code id="aggAccFile_+3A_x">x</code></td>
<td>

<p>optional argument. If <code>NULL</code>, this is set to <code>counts</code>.
</p>
</td></tr>
<tr><td><code id="aggAccFile_+3A_keep.error">keep.error</code></td>
<td>

<p>logical flag. Should errors be omitted?
</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>outcome</code></td>
<td>
<p>aggregated values</p>
</td></tr>
<tr><td><code>ts_agg</code></td>
<td>
<p>time stamping</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Marco Geraci
</p>


<h3>References</h3>

<p>Geraci M, Rich C, Sera F, Cortina-Borja M, Griffiths LJ, and Dezateux C (2012). Technical report on accelerometry data processing in the Millennium Cohort Study. London, UK: University College London. Available at <a href="https://discovery.ucl.ac.uk/1361699">https://discovery.ucl.ac.uk/1361699</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+collapse.accfile">collapse.accfile</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(gt1m_sample)

# aggregate by 30-second epochs
aggAccFile(gt1m_sample, by = 30)

# aggregate by 5-minute epochs
aggAccFile(gt1m_sample, by = 300, keep.error = FALSE)

</code></pre>

<hr>
<h2 id='collapse.accfile'>
Collapse raw accelerometer files into a summary dataset
</h2><span id='topic+collapse'></span><span id='topic+collapse.accfile'></span>

<h3>Description</h3>

<p>This function collapses accelerometer data into a dataframe with summary statistics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>collapse(...)
## S3 method for class 'accfile'
collapse(object, which = "counts", palist = list(value = c(0, 100, 1000, 5000, 13000),
rescale.epoch = 60, labels = NULL, extreme = NULL), mwlist = list(value = 20,
nz = 0, rescale.epoch = 60), collapse.by = "%Y-%m-%d", collapse.epoch = 60, aggregate.by =
NULL, FUN.list = list(mean = function(x) mean(x, na.rm = TRUE)),
keep.extreme = FALSE, keep.error = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="collapse.accfile_+3A_object">object</code></td>
<td>

<p>an object of class <code>gt1m</code>.
</p>
</td></tr>
<tr><td><code id="collapse.accfile_+3A_which">which</code></td>
<td>

<p>either 'counts' or 'steps' for <code>gt1m</code> files or one of <code>c('x','y','z','steps')</code> for <code>gt3x</code> files.
</p>
</td></tr>
<tr><td><code id="collapse.accfile_+3A_palist">palist</code></td>
<td>

<p>list of arguments for <code><a href="#topic+markpa.accfile">markpa.accfile</a></code>.
</p>
</td></tr>
<tr><td><code id="collapse.accfile_+3A_mwlist">mwlist</code></td>
<td>

<p>list of arguments for <code><a href="#topic+markwear.accfile">markwear.accfile</a></code>.
</p>
</td></tr>
<tr><td><code id="collapse.accfile_+3A_collapse.by">collapse.by</code></td>
<td>

<p>dataset aggregation level. See argument <code>format</code> from <code><a href="base.html#topic+strptime">strptime</a></code> for options and details below.
</p>
</td></tr>
<tr><td><code id="collapse.accfile_+3A_collapse.epoch">collapse.epoch</code></td>
<td>

<p>epoch by which time spent in different physical activity modes is summarized. See details.
</p>
</td></tr>
<tr><td><code id="collapse.accfile_+3A_aggregate.by">aggregate.by</code></td>
<td>

<p>pre-collapsing aggregation level for accelerometer values. See argument <code>format</code> from <code><a href="base.html#topic+strptime">strptime</a></code> for options.
</p>
</td></tr>
<tr><td><code id="collapse.accfile_+3A_fun.list">FUN.list</code></td>
<td>

<p>a named list of functions. See <code><a href="#topic+fun.collapse">fun.collapse</a></code>.
</p>
</td></tr>
<tr><td><code id="collapse.accfile_+3A_keep.extreme">keep.extreme</code></td>
<td>

<p>logical flag. If <code>FALSE</code> (default) extreme values will be replaced by NAs. See <code><a href="#topic+markpa.accfile">markpa.accfile</a></code>.
</p>
</td></tr>
<tr><td><code id="collapse.accfile_+3A_keep.error">keep.error</code></td>
<td>

<p>logical flag. If <code>FALSE</code> (default) data errors as identified by <code><a href="#topic+errorChk">errorChk</a></code> will be replaced by NAs.
</p>
</td></tr>
<tr><td><code id="collapse.accfile_+3A_...">...</code></td>
<td>

<p>arguments for <code><a href="#topic+dateSummary">dateSummary</a></code>.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing the following variables
</p>
<table>
<tr><td><code>collapse.by</code></td>
<td>
<p>aggregation factor</p>
</td></tr>
<tr><td><code>fileid</code></td>
<td>
<p>file identifier</p>
</td></tr>
<tr><td><code>...</code></td>
<td>
<p>named columns according to arguments <code>FUN</code> and <code>labels</code> of <code>palist</code></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Marco Geraci
</p>


<h3>References</h3>

<p>Geraci M, Rich C, Sera F, Cortina-Borja M, Griffiths LJ, and Dezateux C (2012). Technical report on accelerometry data processing in the Millennium Cohort Study. London, UK: University College London. Available at <a href="https://discovery.ucl.ac.uk/1361699">https://discovery.ucl.ac.uk/1361699</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+markpa.accfile">markpa.accfile</a></code>, <code><a href="#topic+markwear.accfile">markwear.accfile</a></code>, <code><a href="#topic+fun.collapse">fun.collapse</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

data(gt1m_sample)

collapse(gt1m_sample, palist = list(value = c(0, 100, 2000, 4000, 11000),
rescale.epoch = 60, labels = c("sedentary","light","moderate","vigorous","extreme_values"),
extreme = "last"), mwlist = list(value = 20,
nz = 0), collapse.by = "%Y-%m-%d", collapse.epoch = 60,
FUN.list = list(mean = function(x) round(mean(x, na.rm = TRUE),2)),
keep.extreme = FALSE, keep.error = FALSE)
$outcome
  collapse.by fileid outcome.mean sedentary  light moderate vigorous
1  2011-12-08   test       117.63    293.75 243.75    29.75     4.00
2  2011-12-09   test       157.83    349.75 143.25    33.50    24.50
3  2011-12-10   test        79.75    468.25 177.25    24.25     6.25
4  2011-12-11   test        57.96    355.50 126.00     8.50     3.25
5  2011-12-12   test        70.05    455.50 157.25    19.50     6.00
6  2011-12-13   test        72.99    475.50 181.50    15.25     8.00
7  2011-12-14   test        79.94    476.25 210.50    20.25     8.50
8  2011-12-15   test       232.50      0.00   0.50     0.00     0.00
9  2011-12-16   test          NaN      0.00   0.00     0.00     0.00
  extreme_values non-wear
1           0.00   388.75
2           6.00   883.00
3           0.50   763.50
4           0.25   946.50
5           0.00   801.75
6           0.25   759.50
7           1.50   723.00
8           0.00  1439.50
9           0.00   187.50

$call
collapse.accfile(object = gt1m_sample, palist = list(value = c(0, 
    100, 2000, 4000, 11000), rescale.epoch = 60, labels = c("sedentary", 
    "light", "moderate", "vigorous", "extreme_values"), extreme = "last"), 
    mwlist = list(value = 20, nz = 0), collapse.by = "
    collapse.epoch = 60, FUN.list = list(mean = function(x) round(mean(x, 
        na.rm = TRUE), 2)), keep.extreme = FALSE, keep.error = FALSE)

attr(,"class")
[1] "accfile.collapse"
Warning message:
In collapse.accfile(gt1m_sample, palist = list(value = c(0, 100,  :
  NAs imputed where extreme counts found

## End(Not run)

## Not run: 

collapse(gt1m_sample, palist = list(value = c(0, 100, 2000, 4000, 11000),
rescale.epoch = 60, labels = c("sedentary","light","moderate","vigorous","extreme_values"),
extreme = "last"), mwlist = list(value = 20,
nz = 0), collapse.by = "%Y-%m-%d", collapse.epoch = 60,
FUN.list = list(mean = function(x) round(mean(x, na.rm = TRUE),2),
sd = function(x) round(sd(x, na.rm = TRUE),2),
"95th" = function(x) round(quantile(x, probs = .95, na.rm = TRUE),2)),
keep.extreme = TRUE, keep.error = FALSE)
$outcome
  collapse.by fileid outcome.mean outcome.sd outcome.95th sedentary  light
1  2011-12-08   test       117.63     216.12       529.40    293.75 243.75
2  2011-12-09   test       201.10     567.65      1085.60    349.75 143.25
3  2011-12-10   test        81.97     221.33       465.50    468.25 177.25
4  2011-12-11   test        59.80     172.08       320.35    355.50 126.00
5  2011-12-12   test        70.05     188.49       401.00    455.50 157.25
6  2011-12-13   test        74.08     207.55       386.85    475.50 181.50
7  2011-12-14   test        87.42     275.27       415.30    476.25 210.50
8  2011-12-15   test       232.50     222.74       374.25      0.00   0.50
9  2011-12-16   test          NaN         NA           NA      0.00   0.00
  moderate vigorous extreme_values non-wear
1    29.75     4.00           0.00   388.75
2    33.50    24.50           6.00   883.00
3    24.25     6.25           0.50   763.50
4     8.50     3.25           0.25   946.50
5    19.50     6.00           0.00   801.75
6    15.25     8.00           0.25   759.50
7    20.25     8.50           1.50   723.00
8     0.00     0.00           0.00  1439.50
9     0.00     0.00           0.00   187.50

$call
collapse.accfile(object = gt1m_sample, palist = list(value = c(0, 
    100, 2000, 4000, 11000), rescale.epoch = 60, labels = c("sedentary", 
    "light", "moderate", "vigorous", "extreme_values"), extreme = "last"), 
    mwlist = list(value = 20, nz = 0), collapse.by = "
    collapse.epoch = 60, FUN.list = list(mean = function(x) round(mean(x, 
        na.rm = TRUE), 2), sd = function(x) round(sd(x, na.rm = TRUE), 
        2), `95th` = function(x) round(quantile(x, probs = 0.95, 
        na.rm = TRUE), 2)), keep.extreme = TRUE, keep.error = FALSE)

attr(,"class")
[1] "accfile.collapse"

## End(Not run)


</code></pre>

<hr>
<h2 id='dateSummary'>
Date summary for accelerometer files
</h2><span id='topic+dateSummary'></span>

<h3>Description</h3>

<p>This function provides a date summary for Actigraph GT1M accelerometer files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dateSummary(object, wear, timestamp, minval = 0,
rescale.epoch = 60, keep.error = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dateSummary_+3A_object">object</code></td>
<td>

<p>an object of class <code>gt1m</code>.
</p>
</td></tr>
<tr><td><code id="dateSummary_+3A_wear">wear</code></td>
<td>

<p>a vector that classifies wear and non-wear time. See <code><a href="#topic+markwear.accfile">markwear.accfile</a></code>.
</p>
</td></tr>
<tr><td><code id="dateSummary_+3A_timestamp">timestamp</code></td>
<td>

<p>a timestamp vector for accelerometer values that can be provided by <code>tsFormat</code>.
</p>
</td></tr>
<tr><td><code id="dateSummary_+3A_minval">minval</code></td>
<td>

<p>threshold defining the minimum number of minutes to identify first and last days. See details.
</p>
</td></tr>
<tr><td><code id="dateSummary_+3A_rescale.epoch">rescale.epoch</code></td>
<td>

<p>epoch expressed in the same unit as acceleromenter's epoch to determine minutes of wear time (default is 60 and assumed to be in seconds).
</p>
</td></tr>
<tr><td><code id="dateSummary_+3A_keep.error">keep.error</code></td>
<td>

<p>logical flag. If <code>FALSE</code> (default) data errors as identified by <code><a href="#topic+errorChk">errorChk</a></code> will be replaced by NAs.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Based on total wear time (in minutes) for each day, the theshold <code>minval</code> is applied to identify the first and last days. For example, if accelerometers are sent by post to collect survey data, the first and last days in which the accelerometer was worn might not be known. Days before the first and those after the last day (<code>truncated</code> days) are discarded by <code><a href="#topic+collapse.accfile">collapse.accfile</a></code>.
</p>


<h3>Value</h3>

<p>A data frame containing the following variables
</p>
<table>
<tr><td><code>fileid</code></td>
<td>
<p>file identifier</p>
</td></tr>
<tr><td><code>days</code></td>
<td>
<p>dates by calendar day</p>
</td></tr>
<tr><td><code>freq</code></td>
<td>
<p>frequency of accelerometer observations in each day</p>
</td></tr>
<tr><td><code>hour_day</code></td>
<td>
<p>total hours of accelerometer observations in each day</p>
</td></tr>
<tr><td><code>start_day</code></td>
<td>
<p>starting time of accelerometer observations</p>
</td></tr>
<tr><td><code>end</code></td>
<td>
<p>end time of accelerometer observations</p>
</td></tr>
<tr><td><code>valid_mins</code></td>
<td>
<p>wear time (minutes)</p>
</td></tr>
<tr><td><code>IsStartDate</code></td>
<td>
<p>dummy variable to define starting date (1 = yes)</p>
</td></tr>
<tr><td><code>IsEndDate</code></td>
<td>
<p>dummy variable to define end date (1 = yes)</p>
</td></tr>
<tr><td><code>IsTruncated</code></td>
<td>
<p>dummy variable to define truncated date (1 = yes)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Marco Geraci
</p>


<h3>References</h3>

<p>Geraci M, Rich C, Sera F, Cortina-Borja M, Griffiths LJ, and Dezateux C (2012). Technical report on accelerometry data processing in the Millennium Cohort Study. London, UK: University College London. Available at <a href="https://discovery.ucl.ac.uk/1361699">https://discovery.ucl.ac.uk/1361699</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+collapse.accfile">collapse.accfile</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(gt1m_sample)

mw &lt;- markwear.accfile(gt1m_sample, 20)
tsf &lt;- tsFormat(gt1m_sample)
dateSummary(gt1m_sample, mw, tsf)
## Not run: 
  fileid       days freq hour_day start_day end_day valid_mins IsStartDate
1   test 2011-12-08 3840   16.000        08      23     571.25           1
2   test 2011-12-09 5760   24.000        00      23     557.00           0
3   test 2011-12-10 5760   24.000        00      23     676.50           0
4   test 2011-12-11 5760   24.000        00      23     493.50           0
5   test 2011-12-12 5760   24.000        00      23     638.25           0
6   test 2011-12-13 5760   24.000        00      23     680.50           0
7   test 2011-12-14 5760   24.000        00      23     717.00           0
8   test 2011-12-15 5760   24.000        00      23       0.50           0
9   test 2011-12-16  750    3.125        00      03       0.00           0
  IsEndDate IsTruncated
1         0           0
2         0           0
3         0           0
4         0           0
5         0           0
6         0           0
7         0           0
8         0           0
9         1           0

## End(Not run)

# at least 600 minutes per day to determine first and last day
dateSummary(gt1m_sample, mw, tsf, minval = 600)
## Not run: 
  fileid       days freq hour_day start_day end_day valid_mins IsStartDate
1   test 2011-12-08 3840   16.000        08      23     571.25           0
2   test 2011-12-09 5760   24.000        00      23     557.00           0
3   test 2011-12-10 5760   24.000        00      23     676.50           1
4   test 2011-12-11 5760   24.000        00      23     493.50           0
5   test 2011-12-12 5760   24.000        00      23     638.25           0
6   test 2011-12-13 5760   24.000        00      23     680.50           0
7   test 2011-12-14 5760   24.000        00      23     717.00           0
8   test 2011-12-15 5760   24.000        00      23       0.50           0
9   test 2011-12-16  750    3.125        00      03       0.00           0
  IsEndDate IsTruncated
1         0           1
2         0           1
3         0           0
4         0           0
5         0           0
6         0           0
7         1           0
8         0           1
9         0           1

## End(Not run)

</code></pre>

<hr>
<h2 id='errorChk'>
Perform error checking
</h2><span id='topic+errorChk'></span>

<h3>Description</h3>

<p>These functions look for errors in the data. A code is returned.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>errorChk(x, fault = 32767)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="errorChk_+3A_x">x</code></td>
<td>

<p>vector of accelerometer data.
</p>
</td></tr>
<tr><td><code id="errorChk_+3A_fault">fault</code></td>
<td>

<p>numerical value that indicates voltage signal saturation (temporarily used for both accelerometer counts and steps).
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Error coded are as follow: 0, no error; 1, all values are 5-digit values or all one value;  2, negative values; 3, <code>NA</code>s.
</p>


<h3>Value</h3>

<p>a vector of the same length as <code>x</code>.
</p>


<h3>Author(s)</h3>

<p>Marco Geraci
</p>


<h3>References</h3>

<p>Geraci M, Rich C, Sera F, Cortina-Borja M, Griffiths LJ, and Dezateux C (2012). Technical report on accelerometry data processing in the Millennium Cohort Study. London, UK: University College London. Available at <a href="https://discovery.ucl.ac.uk/1361699">https://discovery.ucl.ac.uk/1361699</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+gt1mAccFile">gt1mAccFile</a></code>, <code><a href="#topic+gt3xAccFile">gt3xAccFile</a></code>
</p>

<hr>
<h2 id='fun.collapse'>
Summary statistics
</h2><span id='topic+fun.collapse'></span>

<h3>Description</h3>

<p>Accessory function for collapsing accelerometer files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fun.collapse(x, fun = list(mean = function(x) mean(x, na.rm = TRUE),
median = function(x) median(x, na.rm = TRUE),
sd = function(x) sd(x, na.rm = TRUE)))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fun.collapse_+3A_x">x</code></td>
<td>

<p>numeric vector.
</p>
</td></tr>
<tr><td><code id="fun.collapse_+3A_fun">fun</code></td>
<td>

<p>named list of functions to be applied to <code>x</code>.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of named values of the same length as <code>fun</code>.
</p>


<h3>Author(s)</h3>

<p>Marco Geraci
</p>


<h3>References</h3>

<p>Geraci M, Rich C, Sera F, Cortina-Borja M, Griffiths LJ, and Dezateux C (2012). Technical report on accelerometry data processing in the Millennium Cohort Study. London, UK: University College London. Available at <a href="https://discovery.ucl.ac.uk/1361699">https://discovery.ucl.ac.uk/1361699</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+collapse.accfile">collapse.accfile</a></code>
</p>

<hr>
<h2 id='gt1m_sample'>GT1M accelerometer file</h2><span id='topic+gt1m_sample'></span>

<h3>Description</h3>

<p>This is the output of <code><a href="#topic+gt1mAccFile">gt1mAccFile</a></code>.
</p>


<h3>Format</h3>

<p>See <code>value</code> in <code><a href="#topic+gt1mAccFile">gt1mAccFile</a></code>. The 'raw' file 'gt1m_sample.dat' can be found in the directory '\inst\extdata' of this package.
</p>


<h3>Source</h3>

<p>Actigraph (Pensacola, Florida).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gt1m_sample &lt;- gt1mAccFile("gt1m_sample.dat", path = "", fileid = "test")
gt1m_sample
  fileid serial  nobs epoch mode            ts_start  tz voltage               ts_dl
1   test  xxxxx 44910    15    1 2011-12-08 08:00:00 GMT    3.76 2011-12-24 11:20:36

## End(Not run)
</code></pre>

<hr>
<h2 id='gt1mAccDir'>
Read list of accelerometer files
</h2><span id='topic+gt1mAccDir'></span>

<h3>Description</h3>

<p>This function reads a list of Actigraph GT1M accelerometer files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gt1mAccDir(accFileList, save, compress = "gzip",
	compression_level = 6, progbar = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gt1mAccDir_+3A_accfilelist">accFileList</code></td>
<td>

<p>an object of type <code>list</code>.
</p>
</td></tr>
<tr><td><code id="gt1mAccDir_+3A_save">save</code></td>
<td>

<p>either logical or character. See <code><a href="#topic+readAccDir">readAccDir</a></code> for details.
</p>
</td></tr>
<tr><td><code id="gt1mAccDir_+3A_compress">compress</code></td>
<td>

<p>logical or character string specifying whether saving to a named file is to use compression if <code>save = TRUE</code>. See argument <code>compress</code> in <code><a href="base.html#topic+save">save</a></code>.
</p>
</td></tr>
<tr><td><code id="gt1mAccDir_+3A_compression_level">compression_level</code></td>
<td>

<p>integer: the level of compression to be used. See argument <code>compression_level</code> in <code><a href="base.html#topic+save">save</a></code>.
</p>
</td></tr>
<tr><td><code id="gt1mAccDir_+3A_progbar">progbar</code></td>
<td>

<p>logical flag. Should a progress bar be used? Available for Windows only.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>acclist</code>.
</p>


<h3>Author(s)</h3>

<p>Marco Geraci
</p>


<h3>References</h3>

<p>Actigraph (Pensacola, Florida).
</p>
<p>Geraci M, Rich C, Sera F, Cortina-Borja M, Griffiths LJ, and Dezateux C (2012). Technical report on accelerometry data processing in the Millennium Cohort Study. London, UK: University College London. Available at <a href="https://discovery.ucl.ac.uk/1361699">https://discovery.ucl.ac.uk/1361699</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readAccDir">readAccDir</a></code>
</p>

<hr>
<h2 id='gt1mAccFile'>
Read a single accelerometer file
</h2><span id='topic+gt1mAccFile'></span>

<h3>Description</h3>

<p>This function reads an Actigraph GT1M accelerometer file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gt1mAccFile(file, path, fileid, counts.pos = 1,
	tz = "Europe/London", sparse = FALSE,
	fault = 32767)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gt1mAccFile_+3A_file">file</code></td>
<td>

<p>file name including file extension.
</p>
</td></tr>
<tr><td><code id="gt1mAccFile_+3A_path">path</code></td>
<td>

<p>path to <code>file</code>.
</p>
</td></tr>
<tr><td><code id="gt1mAccFile_+3A_fileid">fileid</code></td>
<td>

<p>label for file identifier.
</p>
</td></tr>
<tr><td><code id="gt1mAccFile_+3A_counts.pos">counts.pos</code></td>
<td>

<p>when storage mode allows for accelerometer counts and steps to be recorded at the same time, this argument specifies the position of first measurement of accelerometer counts (default is <code>counts.pos</code> = 1).
</p>
</td></tr>
<tr><td><code id="gt1mAccFile_+3A_tz">tz</code></td>
<td>

<p>a character string specifying the timezone to be used for the conversion (see <code><a href="base.html#topic+strptime">strptime</a></code>).
</p>
</td></tr>
<tr><td><code id="gt1mAccFile_+3A_sparse">sparse</code></td>
<td>

<p>logical flag: should data be stored in sparse format?
</p>
</td></tr>
<tr><td><code id="gt1mAccFile_+3A_fault">fault</code></td>
<td>

<p>numerical value that indicates voltage signal saturation.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Raw accelerometer data are processed according to the device data format. Several data checks are performed by <code><a href="#topic+errorChk">errorChk</a></code> and <code><a href="#topic+infoDate">infoDate</a></code>. An additional check is performed on the lenght of the sequence of measurements when both accelerometer counts and steps are recorded. If the length is odd, a warning message is produced. See file 'gt1m_sample.dat' in directory '\inst\extdata' of this package.
</p>


<h3>Value</h3>

<p>These functions return an object of two <code><a href="base.html#topic+class">class</a></code>es: <code>accfile</code> and additional device-specific class (i.e., <code>gt1m</code>).
</p>
<p>An object of class <code>accfile</code> is a list containing the following components:
</p>
<table>
<tr><td><code>df</code></td>
<td>
<p>A <code><a href="base.html#topic+data.frame">data.frame</a></code> object with accelerometer values in columns <code>counts</code> and <code>steps</code> (if present), and coded error for each accelerometer data column. See <code><a href="#topic+errorChk">errorChk</a></code> for error codes. If <code>sparse = TRUE</code>, all variables of the data frame <code>df</code> are returned as vectors of a matrix in sparse format (see <code><a href="SparseM.html#topic+as.matrix.csr">as.matrix.csr</a></code> for details).</p>
</td></tr>
<tr><td><code>info</code></td>
<td>
<p>A <code><a href="base.html#topic+data.frame">data.frame</a></code> object with file identifier (<code>fileid</code>), device serial number (<code>serial</code>), number of recorded measurements (<code>nobs</code>), epoch (<code>epoch</code>), accelerometer mode (<code>mode</code>), start date and time (<code>ts_start</code>), time zone (<code>tz</code>), battery voltage (<code>voltage</code>), download date and time (<code>ts_dl</code>).</p>
</td></tr>
<tr><td><code>error_summary</code></td>
<td>
<p>A <code><a href="base.html#topic+list">list</a></code> object with file identifier (<code>fileid</code>), summary tables of error codes for each accelerometer data column, error code for date (<code>date</code>), and logical flag for odd number of measurements (<code>odd_number</code>) (see details).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Marco Geraci
</p>


<h3>References</h3>

<p>Actigraph (Pensacola, Florida).
</p>
<p>Geraci M, Rich C, Sera F, Cortina-Borja M, Griffiths LJ, and Dezateux C (2012). Technical report on accelerometry data processing in the Millennium Cohort Study. London, UK: University College London. Available at <a href="https://discovery.ucl.ac.uk/1361699">https://discovery.ucl.ac.uk/1361699</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readAccDir">readAccDir</a></code>, <code><a href="#topic+gt1mAccDir">gt1mAccDir</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(gt1m_sample)
class(gt1m_sample)

</code></pre>

<hr>
<h2 id='gt3x_sample'>GT3X accelerometer file</h2><span id='topic+gt3x_sample'></span>

<h3>Description</h3>

<p>This is the output of <code><a href="#topic+gt3xAccFile">gt3xAccFile</a></code>.
</p>


<h3>Format</h3>

<p>See <code>value</code> in <code><a href="#topic+gt3xAccFile">gt3xAccFile</a></code>. The 'raw' file 'gt3x_sample.dat' can be found in the directory '\inst\extdata' of this package.
</p>


<h3>Source</h3>

<p>Actigraph (Pensacola, Florida).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gt3x_sample &lt;- gt3xAccFile("gt3x_sample.dat", path = "", fileid = "test")
gt3x_sample
  fileid serial nobs epoch mode            ts_start  tz voltage               ts_dl
1   test  xxxxx 2676     1   13 2009-03-03 10:40:00 GMT    4.09 2009-03-03 11:24:49

## End(Not run)
</code></pre>

<hr>
<h2 id='gt3xAccDir'>
Read list of accelerometer files
</h2><span id='topic+gt3xAccDir'></span>

<h3>Description</h3>

<p>This function reads a list of Actigraph GT3X accelerometer files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gt3xAccDir(accFileList, save, compress = "gzip",
	compression_level = 6, progbar = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gt3xAccDir_+3A_accfilelist">accFileList</code></td>
<td>

<p>an object of type <code>list</code>.
</p>
</td></tr>
<tr><td><code id="gt3xAccDir_+3A_save">save</code></td>
<td>

<p>either logical or character. See <code><a href="#topic+readAccDir">readAccDir</a></code> for details.
</p>
</td></tr>
<tr><td><code id="gt3xAccDir_+3A_compress">compress</code></td>
<td>

<p>logical or character string specifying whether saving to a named file is to use compression if <code>save = TRUE</code>. See argument <code>compress</code> in <code><a href="base.html#topic+save">save</a></code>.
</p>
</td></tr>
<tr><td><code id="gt3xAccDir_+3A_compression_level">compression_level</code></td>
<td>

<p>integer: the level of compression to be used. See argument <code>compression_level</code> in <code><a href="base.html#topic+save">save</a></code>.
</p>
</td></tr>
<tr><td><code id="gt3xAccDir_+3A_progbar">progbar</code></td>
<td>

<p>logical flag. Should a progress bar be used? Available for Windows only.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>acclist</code>.
</p>


<h3>Author(s)</h3>

<p>Marco Geraci
</p>


<h3>References</h3>

<p>Actigraph (Pensacola, Florida).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readAccDir">readAccDir</a></code>
</p>

<hr>
<h2 id='gt3xAccFile'>
Read a single accelerometer file
</h2><span id='topic+gt3xAccFile'></span>

<h3>Description</h3>

<p>This function reads Actigraph GT3X and ActiSleep accelerometer files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gt3xAccFile(file, path, fileid, tz = "Europe/London",
	sparse = FALSE, fault = 32767)

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gt3xAccFile_+3A_file">file</code></td>
<td>

<p>file name including file extension.
</p>
</td></tr>
<tr><td><code id="gt3xAccFile_+3A_path">path</code></td>
<td>

<p>path to <code>file</code>.
</p>
</td></tr>
<tr><td><code id="gt3xAccFile_+3A_fileid">fileid</code></td>
<td>

<p>label for file identifier.
</p>
</td></tr>
<tr><td><code id="gt3xAccFile_+3A_tz">tz</code></td>
<td>

<p>a character string specifying the timezone to be used for the conversion (see <code><a href="base.html#topic+strptime">strptime</a></code>).
</p>
</td></tr>
<tr><td><code id="gt3xAccFile_+3A_sparse">sparse</code></td>
<td>

<p>logical flag: should data be stored in sparse format?
</p>
</td></tr>
<tr><td><code id="gt3xAccFile_+3A_fault">fault</code></td>
<td>

<p>numerical value that indicates voltage signal saturation.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Raw accelerometer data are processed according to the device data format. See file 'gt3x_sample.dat' in directory '\inst\extdata' of this package.
</p>


<h3>Value</h3>

<p>These functions return an object of two <code><a href="base.html#topic+class">class</a></code>es: <code>accfile</code> and additional device-specific class (i.e., <code>gt3x</code>).
</p>
<p>An object of class <code>accfile</code> is a list containing the following components:
</p>
<table>
<tr><td><code>df</code></td>
<td>
<p>A <code><a href="base.html#topic+data.frame">data.frame</a></code> object with accelerometer values in columns <code>y</code>, <code>x</code>, <code>z</code>, and <code>steps</code> (if present), and coded error for each accelerometer data column. See <code><a href="#topic+errorChk">errorChk</a></code> for error codes. If <code>sparse = TRUE</code>, all variables of the data frame <code>df</code> are returned as vectors of a matrix in sparse format (see <code><a href="SparseM.html#topic+as.matrix.csr">as.matrix.csr</a></code> for details).</p>
</td></tr>
<tr><td><code>info</code></td>
<td>
<p>A <code><a href="base.html#topic+data.frame">data.frame</a></code> object with file identifier (<code>fileid</code>), device serial number (<code>serial</code>), number of recorded measurements (<code>nobs</code>), epoch (<code>epoch</code>), accelerometer mode (<code>mode</code>), start date and time (<code>ts_start</code>), time zone (<code>tz</code>), battery voltage (<code>voltage</code>), download date and time (<code>ts_dl</code>).</p>
</td></tr>
<tr><td><code>error_summary</code></td>
<td>
<p>A <code><a href="base.html#topic+list">list</a></code> object with file identifier (<code>fileid</code>), summary tables of error codes for each accelerometer data column, error code for date (<code>date</code>), and logical flag for odd number of measurements (<code>odd_number</code>) (see details).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Marco Geraci
</p>


<h3>References</h3>

<p>Actigraph (Pensacola, Florida).
</p>
<p>Geraci M, Rich C, Sera F, Cortina-Borja M, Griffiths LJ, and Dezateux C (2012). Technical report on accelerometry data processing in the Millennium Cohort Study. London, UK: University College London. Available at <a href="https://discovery.ucl.ac.uk/1361699">https://discovery.ucl.ac.uk/1361699</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readAccDir">readAccDir</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(gt3x_sample)
class(gt3x_sample)

</code></pre>

<hr>
<h2 id='markbouts.acclist'>
Classify accumulation of physical activity in bouts
</h2><span id='topic+markbouts'></span><span id='topic+markbouts.accfile'></span><span id='topic+markbouts.acclist'></span>

<h3>Description</h3>

<p>This function identifies bouts of physical activity using user-defined breakpoints for accelerometer counts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>markbouts(object, value, which = "counts", bts = c(0, 10, 20, Inf), rescale.epoch = 60,
collapse.by = "%Y-%m-%d", value.labels = NULL, bouts.labels = NULL,
extreme = NULL, keep.error = FALSE, progbar = TRUE)
## S3 method for class 'acclist'
markbouts(object, value, which = "counts", bts = c(0, 10, 20, Inf), rescale.epoch = 60,
collapse.by = "%Y-%m-%d", value.labels = NULL, bouts.labels = NULL,
extreme = NULL, keep.error = FALSE, progbar = TRUE)
## S3 method for class 'accfile'
markbouts(object, value, which = "counts", bts = c(0, 10, 20, Inf), rescale.epoch = 60,
collapse.by = "%Y-%m-%d", value.labels = NULL, bouts.labels = NULL,
extreme = NULL, keep.error = FALSE, progbar = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="markbouts.acclist_+3A_object">object</code></td>
<td>

<p>an object of class <code>acclist</code> or <code>accfile</code>.
</p>
</td></tr>
<tr><td><code id="markbouts.acclist_+3A_value">value</code></td>
<td>

<p>vector of breaks to define physical activity modes. The lowest breakpoint must be 0.
</p>
</td></tr>
<tr><td><code id="markbouts.acclist_+3A_which">which</code></td>
<td>

<p>either 'counts' or 'steps' for <code>gt1m</code> files or one of <code>c('x','y','z','steps')</code> for <code>gt3x</code> files.
</p>
</td></tr>
<tr><td><code id="markbouts.acclist_+3A_bts">bts</code></td>
<td>

<p>vector of breaks to define bouts duration (in minutes).
</p>
</td></tr>
<tr><td><code id="markbouts.acclist_+3A_rescale.epoch">rescale.epoch</code></td>
<td>

<p>epoch expressed in the same unit as acceleromenter's epoch to determine multiplier to rescale <code>value</code> (default is 60). See details.
</p>
</td></tr>
<tr><td><code id="markbouts.acclist_+3A_collapse.by">collapse.by</code></td>
<td>

<p>dataset aggregation level. See argument <code>format</code> from <code><a href="base.html#topic+strptime">strptime</a></code> for options and details below.
</p>
</td></tr>
<tr><td><code id="markbouts.acclist_+3A_value.labels">value.labels</code></td>
<td>

<p>labels for physical activity modes.
</p>
</td></tr>
<tr><td><code id="markbouts.acclist_+3A_bouts.labels">bouts.labels</code></td>
<td>

<p>labels for bouts duration catergories (<code>NULL</code> is recommended).
</p>
</td></tr>
<tr><td><code id="markbouts.acclist_+3A_extreme">extreme</code></td>
<td>

<p>if <code>value</code> includes a threshold for defining the category of extreme values, this argument identifies such category among the physical activity modes defined by <code>value</code>. See details.
</p>
</td></tr>
<tr><td><code id="markbouts.acclist_+3A_keep.error">keep.error</code></td>
<td>

<p>logical flag. If <code>FALSE</code> (default) data errors as identified by <code><a href="#topic+errorChk">errorChk</a></code> will be replaced by NAs.
</p>
</td></tr>
<tr><td><code id="markbouts.acclist_+3A_progbar">progbar</code></td>
<td>

<p>logical flag. Should a progress bar be used? Available for Windows only. Argument not used for class <code>accfile</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Breakpoints are specified as counts per seconds using <code>value</code>. If the epoch used for <code>value</code> is different from the accelerometer's epoch, a rescaling is applied. E.g., if epoch is 15 seconds and breakpoints are expressed as counts per 60 seconds, <code>value</code> is divided by 60/15 = 4. There can be <em>n</em> physical activity modes at maximum, where <em>n</em> is the length of <code>value</code>. 
</p>
<p>The argument <code>extreme</code> is <code>NULL</code> by default. Use either &lsquo;last&rsquo; to select the last category or the category number 1 to <em>n</em>.
</p>


<h3>Value</h3>

<p>The function <code>markbouts.accfile</code> returns duration, frequency and mean duration of bouts by bout category, physical activity mode and <code>T</code> levels of <code>collapse.by</code> (e.g., day) in array of dimension <code>c(length(bts) - 1,length(value) + 1,3,T)</code>. <code>markbouts.acclist</code> is applied to objects of class <code>acclist</code>, in which case a list of arrays of the same length as the number of accelerometer files in <code>object</code> is returned.
</p>


<h3>Author(s)</h3>

<p>Marco Geraci
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readAccDir">readAccDir</a></code>
</p>

<hr>
<h2 id='markpa.acclist'>
Classify mode of physical activity
</h2><span id='topic+markpa'></span><span id='topic+markpa.accfile'></span><span id='topic+markpa.acclist'></span>

<h3>Description</h3>

<p>This function identifies modes of physical activity using user-defined breakpoints for accelerometer counts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>markpa(object, value, which = "counts", rescale.epoch = 60, labels = NULL,
extreme = NULL, keep.error = FALSE, progbar = TRUE)
## S3 method for class 'acclist'
markpa(object, value, which = "counts", rescale.epoch = 60, labels = NULL,
extreme = NULL, keep.error = FALSE, progbar = TRUE)
## S3 method for class 'accfile'
markpa(object, value, which = "counts", rescale.epoch = 60, labels = NULL,
extreme = NULL, keep.error = FALSE, progbar = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="markpa.acclist_+3A_object">object</code></td>
<td>

<p>an object of class <code>acclist</code> or <code>accfile</code>.
</p>
</td></tr>
<tr><td><code id="markpa.acclist_+3A_value">value</code></td>
<td>

<p>vector of breaks to define physical activity modes. The lowest breakpoint must be 0.
</p>
</td></tr>
<tr><td><code id="markpa.acclist_+3A_which">which</code></td>
<td>

<p>either 'counts' or 'steps' for <code>gt1m</code> files or one of <code>c('x','y','z','steps')</code> for <code>gt3x</code> files.
</p>
</td></tr>
<tr><td><code id="markpa.acclist_+3A_rescale.epoch">rescale.epoch</code></td>
<td>

<p>epoch expressed in the same unit as acceleromenter epoch to determine multiplier to rescale <code>value</code> (default is 60). See details.
</p>
</td></tr>
<tr><td><code id="markpa.acclist_+3A_labels">labels</code></td>
<td>

<p>labels for physical activity modes.
</p>
</td></tr>
<tr><td><code id="markpa.acclist_+3A_extreme">extreme</code></td>
<td>

<p>if <code>value</code> includes a threshold for defining the category of extreme values, this argument identifies such category among the physical activity modes defined by <code>value</code>. See details.
</p>
</td></tr>
<tr><td><code id="markpa.acclist_+3A_keep.error">keep.error</code></td>
<td>

<p>logical flag. If <code>FALSE</code> (default) data errors as identified by <code><a href="#topic+errorChk">errorChk</a></code> will be replaced by NAs.
</p>
</td></tr>
<tr><td><code id="markpa.acclist_+3A_progbar">progbar</code></td>
<td>

<p>logical flag. Should a progress bar be used? Available for Windows only. Argument not used for class <code>accfile</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Breakpoints are specified as counts per seconds using <code>value</code>. If the epoch used for <code>value</code> is different from the accelerometer epoch, a rescaling is applied. E.g., if epoch is 15 seconds and breakpoints are expressed as counts per 60 seconds, <code>value</code> is divided by 60/15 = 4. There can be <em>n</em> physical activity modes at maximum, where <em>n</em> is the length of <code>value</code>. 
</p>
<p>The argument <code>extreme</code> is <code>NULL</code> by default. Use either &lsquo;last&rsquo; to select the last category or the category number 1 to <em>n</em>.
</p>


<h3>Value</h3>

<p>If <code>object</code> is of class <code>acclist</code>, a list of factors of the same length as the number of accelerometer files in <code>object</code>. If <code>object</code> is of class <code>accfile</code>, a single factor will be given. The number of levels is equal to <code>length(value) + 1</code>.
</p>


<h3>Author(s)</h3>

<p>Marco Geraci
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readAccDir">readAccDir</a></code>
</p>

<hr>
<h2 id='markwear.acclist'>
Classify wear and non-wear time
</h2><span id='topic+markwear'></span><span id='topic+markwear.accfile'></span><span id='topic+markwear.acclist'></span>

<h3>Description</h3>

<p>This functions identifies sequences of zeroes of a given length to classify wear and non-wear time in accelerometer data files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>markwear(object, value, which = "counts", rescale.epoch = 60,
	nz = 0, keep.error = FALSE, progbar = TRUE)
## S3 method for class 'acclist'
markwear(object, value, which = "counts", rescale.epoch = 60,
	nz = 0, keep.error = FALSE, progbar = TRUE)
## S3 method for class 'accfile'
markwear(object, value, which = "counts", rescale.epoch = 60,
	nz = 0, keep.error = FALSE, progbar = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="markwear.acclist_+3A_object">object</code></td>
<td>

<p>an object of class <code>acclist</code> or <code>accfile</code>.
</p>
</td></tr>
<tr><td><code id="markwear.acclist_+3A_value">value</code></td>
<td>

<p>the length of the time window (in minutes) which contains zero values.
</p>
</td></tr>
<tr><td><code id="markwear.acclist_+3A_which">which</code></td>
<td>

<p>either 'counts' or 'steps' for <code>gt1m</code> files or one of <code>c('x','y','z','steps')</code> for <code>gt3x</code> files.
</p>
</td></tr>
<tr><td><code id="markwear.acclist_+3A_rescale.epoch">rescale.epoch</code></td>
<td>

<p>epoch expressed in the same unit as acceleromenter epoch to determine multiplier to rescale <code>value</code> (default is 60). See details.
</p>
</td></tr>
<tr><td><code id="markwear.acclist_+3A_nz">nz</code></td>
<td>

<p>the length of the time window (in minutes) of non-zero value sequences allowed between every two sequences of zero values.
</p>
</td></tr>
<tr><td><code id="markwear.acclist_+3A_keep.error">keep.error</code></td>
<td>

<p>logical flag. If <code>FALSE</code> (default) data errors as identified by <code><a href="#topic+errorChk">errorChk</a></code> will be replaced by NAs.
</p>
</td></tr>
<tr><td><code id="markwear.acclist_+3A_progbar">progbar</code></td>
<td>

<p>logical flag. Should a progress bar be used? Available for Windows only. Argument not used for class <code>accfile</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The accelerometer epoch is assumed to be expressed in seconds. Therefore <code>value</code> is automatically rescaled to <code>value * 60/object$info$epoch</code>.
</p>


<h3>Value</h3>

<p>If <code>object</code> is of class <code>acclist</code>, a list of factors with two levels of the same length as the number of accelerometers files in <code>object</code>. If <code>object</code> is of class <code>accfile</code>, a single factor will be given. Levels are 'non-wear' and 'wear'.
</p>


<h3>Author(s)</h3>

<p>Marco Geraci
</p>


<h3>References</h3>

<p>Geraci M, Rich C, Sera F, Cortina-Borja M, Griffiths LJ, and Dezateux C (2012). Technical report on accelerometry data processing in the Millennium Cohort Study. London, UK: University College London. Available at <a href="https://discovery.ucl.ac.uk/1361699">https://discovery.ucl.ac.uk/1361699</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readAccDir">readAccDir</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

data(gt1m_sample)

# 20-minute threshold
wear &lt;- markwear(gt1m_sample, value = 20)
&gt; table(wear)
 wear
 Non-wear     Wear 
    27572    17338 

## End(Not run)

## Not run: 

# lower threshold
wear &lt;- markwear(gt1m_sample, value = 5)
&gt; table(wear)
 wear
 Non-wear     Wear 
    30188    14722 

## End(Not run)

## Not run: 

# allow for some non-zero values within a 20-minute window
wear &lt;- markwear.accfile(gt1m_sample, value = 20, nz = 2)
&gt; table(wear)
 wear
 Non-wear     Wear 
   28198    16712 

## End(Not run)

</code></pre>

<hr>
<h2 id='pawacc-internal'>Internal pawacc objects</h2><span id='topic+.First.lib'></span><span id='topic+handleError'></span><span id='topic+infoDate'></span><span id='topic+.Last.lib'></span>

<h3>Description</h3>

<p>Internal pawacc objects.</p>


<h3>Details</h3>

<p>These are not to be called by the user.</p>

<hr>
<h2 id='pawacc-package'>
Physical Activity with Accelerometers
</h2><span id='topic+pawacc-package'></span><span id='topic+pawacc'></span>

<h3>Description</h3>

<p>This package provides processing and summary functions.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> pawacc</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.2.3</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2024-02-11</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL (&gt;= 2)</td>
</tr>
<tr>
 <td style="text-align: left;">
LazyLoad: </td><td style="text-align: left;"> yes</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Marco Geraci
</p>
<p>Maintainer: Marco Geraci &lt;marco.geraci@uniroma1.it&gt;
</p>


<h3>References</h3>

<p>Geraci M, Rich C, Sera F, Cortina-Borja M, Griffiths LJ, and Dezateux C (2012). Technical report on accelerometry data processing in the Millennium Cohort Study. London, UK: University College London. Available at <a href="https://discovery.ucl.ac.uk/1361699">https://discovery.ucl.ac.uk/1361699</a>
</p>

<hr>
<h2 id='plot.gt1m'>
Plot accelerometer file
</h2><span id='topic+plot.gt3x'></span><span id='topic+plot.gt1m'></span>

<h3>Description</h3>

<p>Thes functions plot data from Actigraph GT1M and GT3X accelerometer files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gt1m'
plot(x, y = NULL, xlab, ylab, main,
keep.error = TRUE, which = "counts", select = 1,...)
## S3 method for class 'gt3x'
plot(x, y = NULL, xlab, ylab, main,
keep.error = TRUE, which = "x", select = 1,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.gt1m_+3A_x">x</code></td>
<td>

<p>an object of class <code>gt1m</code>. It can be either <code>accfile</code> or <code>acclist</code>.
</p>
</td></tr>
<tr><td><code id="plot.gt1m_+3A_y">y</code></td>
<td>

<p>ignored.
</p>
</td></tr>
<tr><td><code id="plot.gt1m_+3A_xlab">xlab</code></td>
<td>

<p>x-axis label (optional).
</p>
</td></tr>
<tr><td><code id="plot.gt1m_+3A_ylab">ylab</code></td>
<td>

<p>y-axis label (optional).
</p>
</td></tr>
<tr><td><code id="plot.gt1m_+3A_main">main</code></td>
<td>

<p>main title (optional).
</p>
</td></tr>
<tr><td><code id="plot.gt1m_+3A_keep.error">keep.error</code></td>
<td>

<p>logical flag. If <code>FALSE</code> (default) data errors as identified by <code><a href="#topic+errorChk">errorChk</a></code> will be replaced by NAs.
</p>
</td></tr>
<tr><td><code id="plot.gt1m_+3A_which">which</code></td>
<td>

<p>either 'counts' or 'steps' for <code>gt1m</code> files or one of <code>c('x','y','z','steps')</code> for <code>gt3x</code> files.
</p>
</td></tr>
<tr><td><code id="plot.gt1m_+3A_select">select</code></td>
<td>

<p>numeric. If <code>class(x)</code> is <code>acclist</code>, this argument specifies the corresponding position of the accelerometer file in the <code>list</code> (first file by default).
</p>
</td></tr>
<tr><td><code id="plot.gt1m_+3A_...">...</code></td>
<td>

<p>Arguments to be passed to methods, such as graphical parameters (see <code><a href="graphics.html#topic+par">par</a></code>).
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Marco Geraci
</p>


<h3>References</h3>

<p>Actigraph (Pensacola, Florida).
</p>
<p>Geraci M, Rich C, Sera F, Cortina-Borja M, Griffiths LJ, and Dezateux C (2012). Technical report on accelerometry data processing in the Millennium Cohort Study. London, UK: University College London. Available at <a href="https://discovery.ucl.ac.uk/1361699">https://discovery.ucl.ac.uk/1361699</a>
</p>


<h3>See Also</h3>

<p><code><a href="graphics.html#topic+plot">plot</a></code>, <code><a href="graphics.html#topic+par">par</a></code>, <code><a href="#topic+gt1mAccFile">gt1mAccFile</a></code>, <code><a href="#topic+gt1mAccDir">gt1mAccDir</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(gt1m_sample)
data(gt3x_sample)


plot(gt1m_sample, which = "counts")
plot(gt1m_sample, which = "steps")
plot(gt3x_sample, which = "x")
plot(gt3x_sample, which = "steps")


</code></pre>

<hr>
<h2 id='print.acclist'>
Print an <code>accfile</code> or <code>acclist</code> Object
</h2><span id='topic+print.accfile'></span><span id='topic+print.acclist'></span>

<h3>Description</h3>

<p>Print an object generated by <code><a href="#topic+gt1mAccFile">gt1mAccFile</a></code>, <code><a href="#topic+gt3xAccFile">gt3xAccFile</a></code> or <code><a href="#topic+readAccDir">readAccDir</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'acclist'
print(x, ...)
## S3 method for class 'accfile'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.acclist_+3A_x">x</code></td>
<td>

<p>an <code>accfile</code> or an <code>acclist</code> object.
</p>
</td></tr>
<tr><td><code id="print.acclist_+3A_...">...</code></td>
<td>

<p>not used.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Marco Geraci
</p>

<hr>
<h2 id='readAccDir'>
Read content of a directory with accelerometer files
</h2><span id='topic+readAccDir'></span>

<h3>Description</h3>

<p>This function reads raw files downloaded from accelerometers and stores them in one directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readAccDir(path, model, ext = "dat", counts.pos = 1,
	tz = "Europe/London", sparse = FALSE,
	fault = 32767, save = TRUE, compress = "gzip",
	compression_level = 6,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readAccDir_+3A_path">path</code></td>
<td>

<p>path to accelerometer files.
</p>
</td></tr>
<tr><td><code id="readAccDir_+3A_model">model</code></td>
<td>

<p>accelerometer model, either 'gt1m' or 'gt3x'.
</p>
</td></tr>
<tr><td><code id="readAccDir_+3A_ext">ext</code></td>
<td>

<p>file extension without '.' (default is 'dat').
</p>
</td></tr>
<tr><td><code id="readAccDir_+3A_counts.pos">counts.pos</code></td>
<td>

<p>position of first measurement of accelerometer counts. See <code><a href="#topic+gt1mAccFile">gt1mAccFile</a></code> for details.
</p>
</td></tr>
<tr><td><code id="readAccDir_+3A_tz">tz</code></td>
<td>

<p>a character string specifying the timezone to be used for the conversion (see <code><a href="base.html#topic+strptime">strptime</a></code>).
</p>
</td></tr>
<tr><td><code id="readAccDir_+3A_sparse">sparse</code></td>
<td>

<p>logical flag: should data be stored in sparse format?
</p>
</td></tr>
<tr><td><code id="readAccDir_+3A_fault">fault</code></td>
<td>

<p>numerical value that indicates voltage signal saturation (temporarily used for both accelerometer counts and steps).
</p>
</td></tr>
<tr><td><code id="readAccDir_+3A_save">save</code></td>
<td>

<p>either logical or character. If logical, <code>save = TRUE</code> stores accelerometer files as <code>.Rdata</code> objects in a new directory ('accRfiles') in <code>path</code>. If the directory already exists, confirmation for overwriting will be prompted. <code>save = FALSE</code> stores accelerometer files in current R session. Alternatively, an existing folder can be specified.
</p>
</td></tr>
<tr><td><code id="readAccDir_+3A_compress">compress</code></td>
<td>

<p>logical or character string specifying whether saving to a named file is to use compression if <code>save = TRUE</code>. See argument <code>compress</code> in <code><a href="base.html#topic+save">save</a></code>.
</p>
</td></tr>
<tr><td><code id="readAccDir_+3A_compression_level">compression_level</code></td>
<td>

<p>integer: the level of compression to be used. See argument <code>compression_level</code> in <code><a href="base.html#topic+save">save</a></code>.
</p>
</td></tr>
<tr><td><code id="readAccDir_+3A_...">...</code></td>
<td>

<p>not used.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a wrapper function. It reads raw accelerometer files stored in one directory. The argument <code>ext</code> specifies the extension of the files to look for (e.g., 'dat' or 'txt'). Files with different extension and/or sub-directories are ignored. The data format must be consistent with the specification of <code>model</code>.
</p>


<h3>Value</h3>

<p>Either a set of <code>.Rdata</code> files or a <code><a href="base.html#topic+list">list</a></code> of objects of class <code>accfile</code>. In both cases, each accelerometer data file is stored as an object of type <code>list</code> and labelled using the data file name. See <code><a href="#topic+gt1mAccFile">gt1mAccFile</a></code> or <code><a href="#topic+gt3xAccFile">gt3xAccFile</a></code> for details.
</p>


<h3>Author(s)</h3>

<p>Marco Geraci
</p>


<h3>References</h3>

<p>Geraci M, Rich C, Sera F, Cortina-Borja M, Griffiths LJ, and Dezateux C (2012). Technical report on accelerometry data processing in the Millennium Cohort Study. London, UK: University College London. Available at <a href="https://discovery.ucl.ac.uk/1361699">https://discovery.ucl.ac.uk/1361699</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+gt1mAccFile">gt1mAccFile</a></code>, <code><a href="#topic+gt3xAccFile">gt3xAccFile</a></code>, <code><a href="#topic+gt1mAccDir">gt1mAccDir</a></code>, <code><a href="#topic+gt3xAccDir">gt3xAccDir</a></code>
</p>

<hr>
<h2 id='tsFormat'>
Time Stamping
</h2><span id='topic+tsFormat'></span>

<h3>Description</h3>

<p>Time stamping.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tsFormat(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tsFormat_+3A_object">object</code></td>
<td>

<p>an object of class <code>accfile</code>.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of timestamps.
</p>


<h3>Author(s)</h3>

<p>Marco Geraci
</p>


<h3>See Also</h3>

<p><code><a href="#topic+tsFromEpoch">tsFromEpoch</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(gt1m_sample)
data(gt3x_sample)

tsFormat(gt1m_sample)
tsFormat(gt3x_sample)

</code></pre>

<hr>
<h2 id='tsFromEpoch'>
Calculate timestamp from epoch number or epoch number from timestamp
</h2><span id='topic+tsFromEpoch'></span><span id='topic+epochFromTS'></span>

<h3>Description</h3>

<p>Utility functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tsFromEpoch(object, x)
epochFromTS(object, x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tsFromEpoch_+3A_object">object</code></td>
<td>

<p>an object of class <code>accfile</code>.
</p>
</td></tr>
<tr><td><code id="tsFromEpoch_+3A_x">x</code></td>
<td>

<p>either an integer giving the epoch number or the timestamp in a <code>POSIX</code> format (e.g., '%Y-%m-%d %H:%M:%S').
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>either a timestamp corresponding to an epoch number or the epoch number corresponding to a timestamp.
</p>


<h3>Author(s)</h3>

<p>Marco Geraci
</p>


<h3>See Also</h3>

<p><code><a href="#topic+gt1mAccFile">gt1mAccFile</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(gt1m_sample)

tsFromEpoch(gt1m_sample, 10000)
# [1] "2011-12-10 01:39:45 GMT"

epochFromTS(gt1m_sample, as.POSIXlt(strptime('2011-12-10 01:39:45', '%Y-%m-%d %H:%M:%S')))
# [1] 10000
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
