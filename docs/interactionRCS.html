<!DOCTYPE html><html><head><title>Help for package interactionRCS</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {interactionRCS}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#intEST'><p>Returns the estimates of for an unspecified interaction model</p></a></li>
<li><a href='#linLIN'><p>Linear regression interaction estimates</p></a></li>
<li><a href='#loglinHR'><p>Linear interaction HR</p></a></li>
<li><a href='#loglinOR'><p>Linear interaction OR</p></a></li>
<li><a href='#plotINT'><p>Plot the result of HR, OR or linear estimates</p></a></li>
<li><a href='#rcsHR'><p>Restricted cubic spline interaction HR for more than 3 knots</p></a></li>
<li><a href='#rcsLIN'><p>Restricted cubic spline interaction linear estimates for more than 3 knots</p></a></li>
<li><a href='#rcsOR'><p>Restricted cubic spline interaction OR for more than 3 knots</p></a></li>
<li><a href='#umaru'><p>UMARU IMPACT Study data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Calculate Estimates in Models with Interaction</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-11-21</td>
</tr>
<tr>
<td>Description:</td>
<td>A tool to calculate and plot estimates from models 
    in which an interaction between the main predictor and a continuous covariate has been specified.
    Methods used in the package refer to Harrell Jr FE (2015, ISBN:9783319330396); 
    Durrleman S, Simon R. (1989) &lt;<a href="https://doi.org/10.1002%2Fsim.4780080504">doi:10.1002/sim.4780080504</a>&gt;; Greenland S. (1995) &lt;<a href="https://doi.org/10.1097%2F00001648-199507000-00005">doi:10.1097/00001648-199507000-00005</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6)</td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics, stats, utils, survival, msm, rms, boot, pspline,
pryr, stringr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, dplyr, mlbench, grDevices, parallel,
methods</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-21 21:57:55 UTC; gem37</td>
</tr>
<tr>
<td>Author:</td>
<td>Giorgio Melloni <a href="https://orcid.org/0000-0001-6371-1334"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Andrea Bellavia <a href="https://orcid.org/0000-0003-4988-4532"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Hong Xiong <a href="https://orcid.org/0000-0003-4402-7478"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Giorgio Melloni &lt;melloni.giorgio@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-21 22:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='intEST'>Returns the estimates of for an unspecified interaction model</h2><span id='topic+intEST'></span>

<h3>Description</h3>

<p>This function is a dispatcher that generate OR, HR or linear estimates values for a simple or restricted cubic spline
interaction model from a logistic, Cox or linear regression
</p>


<h3>Usage</h3>

<pre><code class='language-R'>intEST(
  var2values,
  model,
  data,
  var1,
  var2,
  ci = TRUE,
  conf = 0.95,
  ci.method = "delta",
  ci.boot.method = "perc",
  R = 100,
  parallel = "multicore",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="intEST_+3A_var2values">var2values</code></td>
<td>
<p>numeric vector of var2 points to estimate</p>
</td></tr>
<tr><td><code id="intEST_+3A_model">model</code></td>
<td>
<p>model of class cph, coxph, lrm, glm or Glm. If data is NULL, the function expects to find the data in model$x.</p>
</td></tr>
<tr><td><code id="intEST_+3A_data">data</code></td>
<td>
<p>data used in the model. If absent, we will attempt to recover the data from the model. Only used for bootstrap and glm class models</p>
</td></tr>
<tr><td><code id="intEST_+3A_var1">var1</code></td>
<td>
<p>variable that increases by 1 unit from 0</p>
</td></tr>
<tr><td><code id="intEST_+3A_var2">var2</code></td>
<td>
<p>variable to spline. var2values belong to var2</p>
</td></tr>
<tr><td><code id="intEST_+3A_ci">ci</code></td>
<td>
<p>calculate 95% CI?</p>
</td></tr>
<tr><td><code id="intEST_+3A_conf">conf</code></td>
<td>
<p>confidence level. Default 0.95</p>
</td></tr>
<tr><td><code id="intEST_+3A_ci.method">ci.method</code></td>
<td>
<p>confidence interval method. &quot;delta&quot; performs delta method. &quot;bootstrap&quot; performs bootstrapped CI (slower)</p>
</td></tr>
<tr><td><code id="intEST_+3A_ci.boot.method">ci.boot.method</code></td>
<td>
<p>one of the available bootstrap CI methods from <code><a href="boot.html#topic+boot.ci">boot.ci</a></code>. Default percentile</p>
</td></tr>
<tr><td><code id="intEST_+3A_r">R</code></td>
<td>
<p>number of bootstrap samples if ci.method = &quot;bootstrap&quot;. Default 100</p>
</td></tr>
<tr><td><code id="intEST_+3A_parallel">parallel</code></td>
<td>
<p>can take values &quot;no&quot;, &quot;multicore&quot;, &quot;snow&quot; if ci.method = &quot;bootstrap&quot;. Default multicore</p>
</td></tr>
<tr><td><code id="intEST_+3A_...">...</code></td>
<td>
<p>other parameters for boot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>if ci = FALSE, a dataframe with initial values and OR/HR/linear estimates
, if ci = TRUE a dataframe with 5 columns, initial values, OR/HR/linear estimates, lower CI, upper CI and SE
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(rms)
library(mlbench)
data(PimaIndiansDiabetes)
# Set age on a 5-year scale
PimaIndiansDiabetes$age &lt;- PimaIndiansDiabetes$age/5
# Recode diabetes as 0/1
PimaIndiansDiabetes$diabetes &lt;- ifelse(PimaIndiansDiabetes$diabetes=="pos" , 1 , 0)
# Logistic model predicting diabetes over BMI, age and glucose
myformula &lt;- diabetes ~ mass + age * rcs( glucose , 3 )
model &lt;- lrm(myformula , data = PimaIndiansDiabetes )
intEST( var2values = 20:80
       , model = model , data = PimaIndiansDiabetes , var1 ="age", var2="glucose"
       , ci=TRUE , conf = 0.95 , ci.method = "delta")
# Linear model predicting BMI over diabetes, age and glucose
myformula2 &lt;- mass ~ diabetes + age * rcs( glucose , 3 )
model2 &lt;- glm(myformula2 , data = PimaIndiansDiabetes , family = "gaussian")
intEST( var2values = 20:80
       , model = model2 , data = PimaIndiansDiabetes , var1 ="age", var2="glucose"
       , ci=TRUE , conf = 0.95 , ci.method = "delta")
</code></pre>

<hr>
<h2 id='linLIN'>Linear regression interaction estimates</h2><span id='topic+linLIN'></span>

<h3>Description</h3>

<p>Generate linear estimates for a 1 unit increase in a variable at
specified points of another interacting variable in a linear interaction model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>linLIN(
  var2values,
  model,
  data,
  var1,
  var2,
  ci = TRUE,
  conf = 0.95,
  ci.method = "delta",
  ci.boot.method = "perc",
  R = 100,
  parallel = "multicore",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="linLIN_+3A_var2values">var2values</code></td>
<td>
<p>numeric vector of var2 points to estimate</p>
</td></tr>
<tr><td><code id="linLIN_+3A_model">model</code></td>
<td>
<p>model of class rms::Glm or stats::glm family gaussian. If data is NULL, the function expects to find the data in model$x</p>
</td></tr>
<tr><td><code id="linLIN_+3A_data">data</code></td>
<td>
<p>data used in the model. If absent, it will attempt to recover the data from the model object. Only used for bootstrap CI</p>
</td></tr>
<tr><td><code id="linLIN_+3A_var1">var1</code></td>
<td>
<p>variable that increases by 1 unit from 0</p>
</td></tr>
<tr><td><code id="linLIN_+3A_var2">var2</code></td>
<td>
<p>variable to spline. var2values belong to var2</p>
</td></tr>
<tr><td><code id="linLIN_+3A_ci">ci</code></td>
<td>
<p>calculate 95% CI?</p>
</td></tr>
<tr><td><code id="linLIN_+3A_conf">conf</code></td>
<td>
<p>confidence level. Default 0.95</p>
</td></tr>
<tr><td><code id="linLIN_+3A_ci.method">ci.method</code></td>
<td>
<p>confidence interval method. &quot;delta&quot; performs delta method. &quot;bootstrap&quot; performs bootstrapped CI (slower)</p>
</td></tr>
<tr><td><code id="linLIN_+3A_ci.boot.method">ci.boot.method</code></td>
<td>
<p>one of the available bootstrap CI methods from <code><a href="boot.html#topic+boot.ci">boot.ci</a></code>. Default percentile</p>
</td></tr>
<tr><td><code id="linLIN_+3A_r">R</code></td>
<td>
<p>number of bootstrap samples if ci.method = &quot;bootstrap&quot;. Default 100</p>
</td></tr>
<tr><td><code id="linLIN_+3A_parallel">parallel</code></td>
<td>
<p>can take values &quot;no&quot;, &quot;multicore&quot;, &quot;snow&quot; if ci.method = &quot;bootstrap&quot;. Default multicore</p>
</td></tr>
<tr><td><code id="linLIN_+3A_...">...</code></td>
<td>
<p>other parameters for boot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>if ci = FALSE, a vector of estimate of length(var2values),
if ci = TRUE a dataframe with 5 columns, initial values, linear estimates, lower CI, upper CI and SE
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(rms)
library(mlbench)
data(PimaIndiansDiabetes)
# Recode diabetes as 0/1
PimaIndiansDiabetes$diabetes &lt;- ifelse(PimaIndiansDiabetes$diabetes=="pos" , 1 , 0)
myformula &lt;- glucose ~ mass + diabetes * age
model &lt;- glm(myformula , data = PimaIndiansDiabetes ,family=gaussian)
# Show the effect on glucose of being diabetic at age 20 to 80
linLIN( var2values = 20:80
       , model = model , data = PimaIndiansDiabetes , var1 ="diabetes", var2="age"
       , ci=TRUE , conf = 0.95 , ci.method = "delta")
</code></pre>

<hr>
<h2 id='loglinHR'>Linear interaction HR</h2><span id='topic+loglinHR'></span>

<h3>Description</h3>

<p>Generate HR values for a 1 unit increase in a variable at
specified points of another interacting variable in a simple Cox interaction model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loglinHR(
  var2values,
  model,
  data,
  var1,
  var2,
  ci = TRUE,
  conf = 0.95,
  ci.method = "delta",
  ci.boot.method = "perc",
  R = 100,
  parallel = "multicore",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loglinHR_+3A_var2values">var2values</code></td>
<td>
<p>numeric vector of var2 points to estimate</p>
</td></tr>
<tr><td><code id="loglinHR_+3A_model">model</code></td>
<td>
<p>model of class coxph or cph. If data is NULL, the function expects to find the data in model$x</p>
</td></tr>
<tr><td><code id="loglinHR_+3A_data">data</code></td>
<td>
<p>data used in the model. If absent, it will attempt to recover the data from the model object. Only used for bootstrap CI</p>
</td></tr>
<tr><td><code id="loglinHR_+3A_var1">var1</code></td>
<td>
<p>variable that increases by 1 unit from 0</p>
</td></tr>
<tr><td><code id="loglinHR_+3A_var2">var2</code></td>
<td>
<p>variable to spline. var2values belong to var2</p>
</td></tr>
<tr><td><code id="loglinHR_+3A_ci">ci</code></td>
<td>
<p>calculate 95% CI?</p>
</td></tr>
<tr><td><code id="loglinHR_+3A_conf">conf</code></td>
<td>
<p>confidence level. Default 0.95</p>
</td></tr>
<tr><td><code id="loglinHR_+3A_ci.method">ci.method</code></td>
<td>
<p>confidence interval method. &quot;delta&quot; performs delta method. &quot;bootstrap&quot; performs bootstrapped CI (slower)</p>
</td></tr>
<tr><td><code id="loglinHR_+3A_ci.boot.method">ci.boot.method</code></td>
<td>
<p>one of the available bootstrap CI methods from <code><a href="boot.html#topic+boot.ci">boot.ci</a></code>. Default percentile</p>
</td></tr>
<tr><td><code id="loglinHR_+3A_r">R</code></td>
<td>
<p>number of bootstrap samples if ci.method = &quot;bootstrap&quot;. Default 100</p>
</td></tr>
<tr><td><code id="loglinHR_+3A_parallel">parallel</code></td>
<td>
<p>can take values &quot;no&quot;, &quot;multicore&quot;, &quot;snow&quot; if ci.method = &quot;bootstrap&quot;. Default multicore</p>
</td></tr>
<tr><td><code id="loglinHR_+3A_...">...</code></td>
<td>
<p>other parameters for boot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>if ci = FALSE, a vector of estimate of length(var2values),
if ci = TRUE a dataframe with 5 columns, initial values, HR, lower CI, upper CI and SE
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survival)
data(cancer)
myformula &lt;- Surv(time, status) ~ ph.karno + ph.ecog + age*sex
model &lt;- coxph(myformula , data = lung )
loglinHR( var2values = 40:80
                     , model = model , data = lung , var1 ="sex", var2="age"
                     , ci=TRUE , conf = 0.95 , ci.method = "delta")
</code></pre>

<hr>
<h2 id='loglinOR'>Linear interaction OR</h2><span id='topic+loglinOR'></span>

<h3>Description</h3>

<p>Generate OR values for a 1 unit increase in a variable at
specified points of another interacting variable in a simple logistic interaction model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loglinOR(
  var2values,
  model,
  data,
  var1,
  var2,
  ci = TRUE,
  conf = 0.95,
  ci.method = "delta",
  ci.boot.method = "perc",
  R = 100,
  parallel = "multicore",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loglinOR_+3A_var2values">var2values</code></td>
<td>
<p>numeric vector of var2 points to estimate</p>
</td></tr>
<tr><td><code id="loglinOR_+3A_model">model</code></td>
<td>
<p>model of class lrm Glm or glm. If data is NULL, the function expects to find the data in model$x</p>
</td></tr>
<tr><td><code id="loglinOR_+3A_data">data</code></td>
<td>
<p>data used in the model. If absent, it will attempt to recover the data from the model object. Only used for bootstrap CI</p>
</td></tr>
<tr><td><code id="loglinOR_+3A_var1">var1</code></td>
<td>
<p>variable that increases by 1 unit from 0</p>
</td></tr>
<tr><td><code id="loglinOR_+3A_var2">var2</code></td>
<td>
<p>variable to spline. var2values belong to var2</p>
</td></tr>
<tr><td><code id="loglinOR_+3A_ci">ci</code></td>
<td>
<p>calculate 95% CI?</p>
</td></tr>
<tr><td><code id="loglinOR_+3A_conf">conf</code></td>
<td>
<p>confidence level. Default 0.95</p>
</td></tr>
<tr><td><code id="loglinOR_+3A_ci.method">ci.method</code></td>
<td>
<p>confidence interval method. &quot;delta&quot; performs delta method. &quot;bootstrap&quot; performs bootstrapped CI (slower)</p>
</td></tr>
<tr><td><code id="loglinOR_+3A_ci.boot.method">ci.boot.method</code></td>
<td>
<p>one of the available bootstrap CI methods from <code><a href="boot.html#topic+boot.ci">boot.ci</a></code>. Default percentile</p>
</td></tr>
<tr><td><code id="loglinOR_+3A_r">R</code></td>
<td>
<p>number of bootstrap samples if ci.method = &quot;bootstrap&quot;. Default 100</p>
</td></tr>
<tr><td><code id="loglinOR_+3A_parallel">parallel</code></td>
<td>
<p>can take values &quot;no&quot;, &quot;multicore&quot;, &quot;snow&quot; if ci.method = &quot;bootstrap&quot;. Default multicore</p>
</td></tr>
<tr><td><code id="loglinOR_+3A_...">...</code></td>
<td>
<p>other parameters for boot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>if ci = FALSE, a vector of estimate of length(var2values),
if ci = TRUE a dataframe with 5 columns, initial values, OR, lower CI, upper CI and SE
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(rms)
library(mlbench)
data(PimaIndiansDiabetes)
# Set age on a 5-year scale
PimaIndiansDiabetes$age &lt;- PimaIndiansDiabetes$age/5
# Recode diabetes as 0/1
PimaIndiansDiabetes$diabetes &lt;- ifelse(PimaIndiansDiabetes$diabetes=="pos" , 1 , 0)
myformula &lt;- diabetes ~ mass + age * glucose
model &lt;- glm(myformula , data = PimaIndiansDiabetes , family = binomial())
loglinOR( var2values = 20:80
       , model = model , data = PimaIndiansDiabetes , var1 ="age", var2="glucose"
       , ci=TRUE , conf = 0.95 , ci.method = "delta")
</code></pre>

<hr>
<h2 id='plotINT'>Plot the result of HR, OR or linear estimates</h2><span id='topic+plotINT'></span>

<h3>Description</h3>

<p>Create a spline var2 by 1 unit increase of var1
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotINT(
  x,
  xlab = "",
  main = "",
  log = FALSE,
  ylab = NULL,
  line1 = TRUE,
  linecolor = "dodgerblue",
  cicolor = "darkgray",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotINT_+3A_x">x</code></td>
<td>
<p>data.frame calculated using any of the function of this package</p>
</td></tr>
<tr><td><code id="plotINT_+3A_xlab">xlab</code></td>
<td>
<p>xlab name</p>
</td></tr>
<tr><td><code id="plotINT_+3A_main">main</code></td>
<td>
<p>plot title</p>
</td></tr>
<tr><td><code id="plotINT_+3A_log">log</code></td>
<td>
<p>if TRUE, plot the estimate in log scale</p>
</td></tr>
<tr><td><code id="plotINT_+3A_ylab">ylab</code></td>
<td>
<p>ylab name. Default is the estimate column name if log=FALSE otherwise Estimate(log scale)</p>
</td></tr>
<tr><td><code id="plotINT_+3A_line1">line1</code></td>
<td>
<p>if TRUE, plot horizontal line on 1 or 0 (if log=TRUE)</p>
</td></tr>
<tr><td><code id="plotINT_+3A_linecolor">linecolor</code></td>
<td>
<p>line color. Default dodgerblue</p>
</td></tr>
<tr><td><code id="plotINT_+3A_cicolor">cicolor</code></td>
<td>
<p>confidence intervals color. Default gray</p>
</td></tr>
<tr><td><code id="plotINT_+3A_...">...</code></td>
<td>
<p>other parameters for plot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>simple pspline smoothed splined plot of estimates of 1 unit increase in var1 at var2 values
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(rms)
library(survival)
data(cancer)
myformula &lt;- Surv(time, status) ~ ph.karno + ph.ecog + rcs(age, 3)*sex
model &lt;- cph(myformula , data = lung )
myHR &lt;- rcsHR( var2values = 40:80
               , model = model , data = lung , var1 ="sex", var2="age"
               , ci=TRUE , conf = 0.95 , ci.method = "delta")
plotINT(myHR , ylab = "HR of male VS female" , xlab = "Age")
</code></pre>

<hr>
<h2 id='rcsHR'>Restricted cubic spline interaction HR for more than 3 knots</h2><span id='topic+rcsHR'></span>

<h3>Description</h3>

<p>Generate HR values in a Cox model for a 1 unit increase in a variable at
specified points of another interacting variable splined with rcs(df &gt;= 3)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rcsHR(
  var2values,
  model,
  data = NULL,
  var1,
  var2,
  ci = TRUE,
  conf = 0.95,
  ci.method = "delta",
  ci.boot.method = "perc",
  R = 100,
  parallel = "multicore",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rcsHR_+3A_var2values">var2values</code></td>
<td>
<p>numeric vector of var2 points to estimate</p>
</td></tr>
<tr><td><code id="rcsHR_+3A_model">model</code></td>
<td>
<p>model of class cph or coxph. If data is NULL, the function expects to find the data in model$x.</p>
</td></tr>
<tr><td><code id="rcsHR_+3A_data">data</code></td>
<td>
<p>data used in the model. If absent, we will attempt to recover the data from the model. Only used for bootstrap and coxph models</p>
</td></tr>
<tr><td><code id="rcsHR_+3A_var1">var1</code></td>
<td>
<p>variable that increases by 1 unit from 0.</p>
</td></tr>
<tr><td><code id="rcsHR_+3A_var2">var2</code></td>
<td>
<p>variable to spline. var2values belong to var2</p>
</td></tr>
<tr><td><code id="rcsHR_+3A_ci">ci</code></td>
<td>
<p>calculate 95% CI?</p>
</td></tr>
<tr><td><code id="rcsHR_+3A_conf">conf</code></td>
<td>
<p>confidence level. Default 0.95</p>
</td></tr>
<tr><td><code id="rcsHR_+3A_ci.method">ci.method</code></td>
<td>
<p>confidence interval method. &quot;delta&quot; performs delta method. &quot;bootstrap&quot; performs bootstrapped CI (slower)</p>
</td></tr>
<tr><td><code id="rcsHR_+3A_ci.boot.method">ci.boot.method</code></td>
<td>
<p>one of the available bootstrap CI methods from <code><a href="boot.html#topic+boot.ci">boot.ci</a></code>. Default percentile</p>
</td></tr>
<tr><td><code id="rcsHR_+3A_r">R</code></td>
<td>
<p>number of bootstrap samples if ci.method = &quot;bootstrap&quot;. Default 100</p>
</td></tr>
<tr><td><code id="rcsHR_+3A_parallel">parallel</code></td>
<td>
<p>can take values &quot;no&quot;, &quot;multicore&quot;, &quot;snow&quot; if ci.method = &quot;bootstrap&quot;. Default multicore</p>
</td></tr>
<tr><td><code id="rcsHR_+3A_...">...</code></td>
<td>
<p>other parameters for boot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>if ci = FALSE, a dataframe with initial values and HR
, if ci = TRUE a dataframe with 5 columns, initial values, HR, lower CI, upper CI and SE
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survival)
library(rms)
data(cancer)
myformula &lt;- Surv(time, status) ~ ph.karno + ph.ecog + rcs(age,4)*sex
model &lt;- cph(myformula , data = lung )
rcsHR( var2values = 40:80
       , model = model , data = lung , var1 ="sex", var2="age"
       , ci=TRUE , conf = 0.95 , ci.method = "delta")
</code></pre>

<hr>
<h2 id='rcsLIN'>Restricted cubic spline interaction linear estimates for more than 3 knots</h2><span id='topic+rcsLIN'></span>

<h3>Description</h3>

<p>Generate estimates in a linear model for a 1 unit increase in a variable at
specified points of another interacting variable splined with rcs(df &gt;= 3)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rcsLIN(
  var2values,
  model,
  data = NULL,
  var1,
  var2,
  ci = TRUE,
  conf = 0.95,
  ci.method = "delta",
  ci.boot.method = "perc",
  R = 100,
  parallel = "multicore",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rcsLIN_+3A_var2values">var2values</code></td>
<td>
<p>numeric vector of var2 points to estimate</p>
</td></tr>
<tr><td><code id="rcsLIN_+3A_model">model</code></td>
<td>
<p>model of class rms::Glm or stats::glm family gaussian. If data is NULL, the function expects to find the data in model$x.</p>
</td></tr>
<tr><td><code id="rcsLIN_+3A_data">data</code></td>
<td>
<p>data used in the model. If absent, we will attempt to recover the data from the model. Only used for bootstrap</p>
</td></tr>
<tr><td><code id="rcsLIN_+3A_var1">var1</code></td>
<td>
<p>variable that increases by 1 unit from 0</p>
</td></tr>
<tr><td><code id="rcsLIN_+3A_var2">var2</code></td>
<td>
<p>variable to spline. var2values belong to var2</p>
</td></tr>
<tr><td><code id="rcsLIN_+3A_ci">ci</code></td>
<td>
<p>calculate 95% CI?</p>
</td></tr>
<tr><td><code id="rcsLIN_+3A_conf">conf</code></td>
<td>
<p>confidence level. Default 0.95</p>
</td></tr>
<tr><td><code id="rcsLIN_+3A_ci.method">ci.method</code></td>
<td>
<p>confidence interval method. &quot;delta&quot; performs delta method. &quot;bootstrap&quot; performs bootstrapped CI (slower)</p>
</td></tr>
<tr><td><code id="rcsLIN_+3A_ci.boot.method">ci.boot.method</code></td>
<td>
<p>one of the available bootstrap CI methods from <code><a href="boot.html#topic+boot.ci">boot.ci</a></code>. Default percentile</p>
</td></tr>
<tr><td><code id="rcsLIN_+3A_r">R</code></td>
<td>
<p>number of bootstrap samples if ci.method = &quot;bootstrap&quot;. Default 100</p>
</td></tr>
<tr><td><code id="rcsLIN_+3A_parallel">parallel</code></td>
<td>
<p>can take values &quot;no&quot;, &quot;multicore&quot;, &quot;snow&quot; if ci.method = &quot;bootstrap&quot;. Default multicore</p>
</td></tr>
<tr><td><code id="rcsLIN_+3A_...">...</code></td>
<td>
<p>other parameters for boot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>if ci = FALSE, a dataframe with initial values and linear estimates
, if ci = TRUE a dataframe with 5 columns, initial values, linear estimates, lower CI, upper CI and SE
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(rms)
library(mlbench)
data(PimaIndiansDiabetes)
# Recode diabetes as 0/1
PimaIndiansDiabetes$diabetes &lt;- ifelse(PimaIndiansDiabetes$diabetes=="pos" , 1 , 0)
myformula &lt;- glucose ~ mass + diabetes * rcs(age, 4)
model &lt;- glm(myformula , data = PimaIndiansDiabetes , family="gaussian")
# Show the effect on glucose of being diabetic at age 20 to 80
rcsLIN( var2values = 20:80
       , model = model , data = PimaIndiansDiabetes , var1 ="diabetes", var2="age"
       , ci=TRUE , conf = 0.95 , ci.method = "delta")
</code></pre>

<hr>
<h2 id='rcsOR'>Restricted cubic spline interaction OR for more than 3 knots</h2><span id='topic+rcsOR'></span>

<h3>Description</h3>

<p>Generate OR values in a logistic model for a 1 unit increase in a variable at
specified points of another interacting variable splined with rcs(df &gt;= 3)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rcsOR(
  var2values,
  model,
  data = NULL,
  var1,
  var2,
  ci = TRUE,
  conf = 0.95,
  ci.method = "delta",
  ci.boot.method = "perc",
  R = 100,
  parallel = "multicore",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rcsOR_+3A_var2values">var2values</code></td>
<td>
<p>numeric vector of var2 points to estimate</p>
</td></tr>
<tr><td><code id="rcsOR_+3A_model">model</code></td>
<td>
<p>model of class lrm, Glm or glm family binomial. If data is NULL, the function expects to find the data in model$x.</p>
</td></tr>
<tr><td><code id="rcsOR_+3A_data">data</code></td>
<td>
<p>data used in the model. If absent, we will attempt to recover the data from the model. Only used for bootstrap and glm class models</p>
</td></tr>
<tr><td><code id="rcsOR_+3A_var1">var1</code></td>
<td>
<p>variable that increases by 1 unit from 0</p>
</td></tr>
<tr><td><code id="rcsOR_+3A_var2">var2</code></td>
<td>
<p>variable to spline. var2values belong to var2</p>
</td></tr>
<tr><td><code id="rcsOR_+3A_ci">ci</code></td>
<td>
<p>calculate 95% CI?</p>
</td></tr>
<tr><td><code id="rcsOR_+3A_conf">conf</code></td>
<td>
<p>confidence level. Default 0.95</p>
</td></tr>
<tr><td><code id="rcsOR_+3A_ci.method">ci.method</code></td>
<td>
<p>confidence interval method. &quot;delta&quot; performs delta method. &quot;bootstrap&quot; performs bootstrapped CI (slower)</p>
</td></tr>
<tr><td><code id="rcsOR_+3A_ci.boot.method">ci.boot.method</code></td>
<td>
<p>one of the available bootstrap CI methods from <code><a href="boot.html#topic+boot.ci">boot.ci</a></code>. Default percentile</p>
</td></tr>
<tr><td><code id="rcsOR_+3A_r">R</code></td>
<td>
<p>number of bootstrap samples if ci.method = &quot;bootstrap&quot;. Default 100</p>
</td></tr>
<tr><td><code id="rcsOR_+3A_parallel">parallel</code></td>
<td>
<p>can take values &quot;no&quot;, &quot;multicore&quot;, &quot;snow&quot; if ci.method = &quot;bootstrap&quot;. Default multicore</p>
</td></tr>
<tr><td><code id="rcsOR_+3A_...">...</code></td>
<td>
<p>other parameters for boot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>if ci = FALSE, a dataframe with initial values and OR
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(rms)
library(mlbench)
data(PimaIndiansDiabetes)
# Set age on a 5-year scale
PimaIndiansDiabetes$age &lt;- PimaIndiansDiabetes$age/5
# Recode diabetes as 0/1
PimaIndiansDiabetes$diabetes &lt;- ifelse(PimaIndiansDiabetes$diabetes=="pos" , 1 , 0)
myformula &lt;- diabetes ~ mass + age * rcs( glucose , 4 )
model &lt;- glm(myformula , data = PimaIndiansDiabetes , family = "binomial")
rcsOR( var2values = 20:80
       , model = model , data = PimaIndiansDiabetes , var1 ="age", var2="glucose"
       , ci=TRUE , conf = 0.95 , ci.method = "delta")
</code></pre>

<hr>
<h2 id='umaru'>UMARU IMPACT Study data</h2><span id='topic+umaru'></span>

<h3>Description</h3>

<p>A subset of data from the University of Massachusets Aids Research Unit (UMARU) IMPACT study.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>umaru
</code></pre>


<h3>Format</h3>

<p>A data frame with 575 rows and 10 variables
</p>

<dl>
<dt>X</dt><dd><p>observation count</p>
</dd>
<dt>id</dt><dd><p>identification code</p>
</dd>
<dt>age</dt><dd><p>Age in years</p>
</dd>
<dt>beckscore</dt><dd><p>Beck Depression Score at admission</p>
</dd>
<dt>ndrugtx</dt><dd><p>Number of prior drug treatments</p>
</dd>
<dt>treat</dt><dd><p>treat</p>
</dd>
<dt>site</dt><dd><p>site</p>
</dd>
<dt>los</dt><dd><p>los</p>
</dd>
<dt>time</dt><dd><p>time to event</p>
</dd>
<dt>censor</dt><dd><p>censor event</p>
</dd>
<dt>heroin</dt><dd><p>heroin use at admission</p>
</dd>
<dt>cocaine</dt><dd><p>cocaine use at admission</p>
</dd>
<dt>drugtx</dt><dd><p>Prior Drug treatment, yes/no</p>
</dd>
<dt>ivdrug</dt><dd><p>Prior IV drug treatment</p>
</dd>
<dt>nonwhite</dt><dd><p>1 if non white, 0 otherwise</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="ftp://ftp.wiley.com/public/sci_tech_med/logistic">ftp://ftp.wiley.com/public/sci_tech_med/logistic</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
