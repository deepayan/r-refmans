<!DOCTYPE html><html lang="en"><head><title>Help for package qmethod</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {qmethod}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#qmethod-package'><p>Package for Q methodology analysis</p></a></li>
<li><a href='#build.q.set'><p>Q methodology: sample a Q set from a concourse</p></a></li>
<li><a href='#centroid'><p>Q methodology: centroid extraction</p></a></li>
<li><a href='#export.pqmethod'><p>Q methodology: export to PQMethod *.DAT and *.STA files</p></a></li>
<li><a href='#export.qm'><p>Q Methodology: export results to a plain text document</p></a></li>
<li><a href='#import.easyhtmlq'><p>Q methodology: import data from easy-HTMLQ</p></a></li>
<li><a href='#import.htmlq'><p>Q methodology: import data from HTMLQ and FlashQ</p></a></li>
<li><a href='#import.pqmethod'><p>Q methodology: import PQMethod *.DAT files</p></a></li>
<li><a href='#import.q.concourse'><p>Q methodology: import concourse of Q items</p></a></li>
<li><a href='#import.q.feedback'><p>Q methodology: imports feedback on Q items</p></a></li>
<li><a href='#import.q.sorts'><p>Q methodology: import Q-sorts from CSV</p></a></li>
<li><a href='#importexample'><p>Import Example</p></a></li>
<li><a href='#lipset'><p><em>Lipset</em> (1963) Q methodology dataset</p></a></li>
<li><a href='#loa.and.flags'><p>Q methodology: show factor loadings next to flags</p></a></li>
<li><a href='#make.cards'><p>Q methodology: produce printable cards for Q study with ID and full item wording</p></a></li>
<li><a href='#make.distribution'><p>Q methodology: create Q normal distribution</p></a></li>
<li><a href='#plot.QmethodRes'><p>Q Method: plot for statement z-scores</p></a></li>
<li><a href='#print.QmethodRes'><p>Q Method: print method for results</p></a></li>
<li><a href='#q.fnames'><p>Change factor names in the results of Q methodology analysis</p></a></li>
<li><a href='#qbstep'><p>Q Methodology: Single step for the bootstrap</p></a></li>
<li><a href='#qdc'><p>Q methodology: distinguishing and consensus statements</p></a></li>
<li><a href='#qdc.zsc'><p>Q methodology: distinguishing and consensus statements</p></a></li>
<li><a href='#qfcharact'><p>Q methodology: factor characteristics</p></a></li>
<li><a href='#qflag'><p>Q methodology: automatic flagging of Q-sorts</p></a></li>
<li><a href='#qfsi'><p>Q Methodology: Factor Stability index</p></a></li>
<li><a href='#qindtest'><p>Q Methodology: PCA bootstrap indeterminacy tests</p></a></li>
<li><a href='#qmb.plot'><p>Q Methodology: Plot of bootstrap results</p></a></li>
<li><a href='#qmb.summary'><p>Q Methodology: Summary of bootstrap results</p></a></li>
<li><a href='#qmboots'><p>Q Methodology: Bootstrap</p></a></li>
<li><a href='#qmethod'><p>Q methodology analysis</p></a></li>
<li><a href='#qpcrustes'><p>Q Methodology: Procrustes rotation of loadings</p></a></li>
<li><a href='#qzscores'><p>Q methodology: z-scores from loadings</p></a></li>
<li><a href='#runInterface'><p>Q methodology: Graphical User Interface (GUI)</p></a></li>
<li><a href='#summary.QmethodRes'><p>Q methodology: summary for class 'QmethodRes'</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>1.8.4</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-03-23</td>
</tr>
<tr>
<td>Title:</td>
<td>Analysis of Subjective Perspectives Using Q Methodology</td>
</tr>
<tr>
<td>Description:</td>
<td>Analysis of Q methodology, used to identify distinct perspectives existing within a group.
  This methodology is used across social, health and environmental sciences to understand diversity of attitudes, discourses, or decision-making styles (for more information, see <a href="https://qmethod.org/">https://qmethod.org/</a>).
  A single function runs the full analysis. Each step can be run separately using the corresponding functions: for automatic flagging of Q-sorts (manual flagging is optional), for statement scores, for distinguishing and consensus statements, and for general characteristics of the factors.
  The package allows to choose either principal components or centroid factor extraction, manual or automatic flagging, a number of mathematical methods for rotation (or none), and a number of correlation coefficients for the initial correlation matrix, among many other options.
  Additional functions are available to import and export data (from raw *.CSV, 'HTMLQ' and 'FlashQ' *.CSV, 'PQMethod' *.DAT and 'easy-htmlq' *.JSON files), to print and plot, to import raw data from individual *.CSV files, and to make printable cards.
  The package also offers functions to print Q cards and to generate Q distributions for study administration.
  See further details in the package documentation, and in the web pages below, which include a cookbook, guidelines for more advanced analysis (how to perform manual flagging or change the sign of factors), data management, and a graphical user interface (GUI) for online and offline use.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, psych, tools, digest, knitr, xtable,</td>
</tr>
<tr>
<td>Suggests:</td>
<td>shiny, rjson, MCMCpack</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/aiorazabala/qmethod">https://github.com/aiorazabala/qmethod</a>,
<a href="http://aiorazabala.github.io/qmethod/">http://aiorazabala.github.io/qmethod/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/aiorazabala/qmethod/issues">https://github.com/aiorazabala/qmethod/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-03-28 08:05:27 UTC; aiora</td>
</tr>
<tr>
<td>Author:</td>
<td>Aiora Zabala <a href="https://orcid.org/0000-0001-8534-3325"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre] (Main author),
  Maximilian Held [aut] (Author of additional data management functions),
  Frans Hermans [aut] (Author of centroid extraction function)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Aiora Zabala &lt;aiora.zabala@gmail.com&gt;</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-03-28 10:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='qmethod-package'>Package for Q methodology analysis</h2><span id='topic+qmethod-package'></span>

<h3>Description</h3>

<p>Q is a methodology to study distinct perspectives existing within a group on a topic of interest.
It is used across social, health, and environmental studies.
See the references below for more details about the methodology.
</p>
<p>This package performs the analysis of Q methodology data (both forced and non-forced distributions). The user can choose the extraction method (principal components analysis or centroid factor extraction) and the rotation method (none, varimax or other rotations, uncommon in Q but implemented via <code><a href="psych.html#topic+principal">principal</a></code>). The default analysis conducts automatic flagging, and manual flagging is optional.
</p>
<p>The following steps of the analysis correspond to separate functions: automatic flagging of Q-sorts (<code><a href="#topic+qflag">qflag</a></code>), z-scores and factor scores for statements (<code><a href="#topic+qzscores">qzscores</a></code>), distinguishing and consensus statements (<code><a href="#topic+qdc">qdc</a></code>), and general characteristics of the factors (<code><a href="#topic+qfcharact">qfcharact</a></code>).
The function <code><a href="#topic+qmethod">qmethod</a></code> wraps them all.
</p>
<p>The functions for each step may be used separately for advanced analysis, for example, for manual flagging (see details in <code><a href="#topic+qzscores">qzscores</a></code>).
</p>
<p>The package also includes additional functions for the following:
</p>

<ul>
<li><p> An interactive Graphical User Interface with the basic functionality (<code><a href="#topic+runInterface">runInterface</a></code>)
</p>
</li>
<li><p> Import data from <a href="http://schmolck.org/qmethod/">PQMethod software</a> (<code><a href="#topic+import.pqmethod">import.pqmethod</a></code>), both <a href="https://github.com/aproxima/htmlq/">HTMLQ</a> and FlashQ (<code><a href="#topic+import.htmlq">import.htmlq</a></code>), and <a href="https://github.com/shawnbanasick/easy-htmlq/">easy-htmlq</a> (<code><a href="#topic+import.easyhtmlq">import.easyhtmlq</a></code>) tools for online data collection of Q-sorts.
</p>
</li>
<li><p> Export a plain-text report of the analysis for interpretation in two flavours (<code><a href="#topic+export.qm">export.qm</a></code>).
</p>
</li>
<li><p> Generic methods to <code><a href="#topic+print.QmethodRes">print.QmethodRes</a></code> and <code><a href="#topic+plot.QmethodRes">plot.QmethodRes</a></code> Q method results. The specific dotchart visualisation of Q results in <code><a href="#topic+plot.QmethodRes">plot.QmethodRes</a></code> was first developed and introduced in this package, in preparation for the study in <a href="https://www.sciencedirect.com/science/article/abs/pii/S0921800916302683">Zabala et al. (2017)</a>.  
</p>
</li>
<li><p> Functions to explore the analysis and facilitate interpretation:
</p>

<ul>
<li> <p>explore automatic pre-flagging,  (<code><a href="#topic+loa.and.flags">loa.and.flags</a></code>) 
</p>
</li>
<li> <p>to rename the factors in the results, with short, meaningful names (<code><a href="#topic+q.fnames">q.fnames</a></code>).
</p>
</li></ul>

</li>
<li><p> Generate printable cards for the administration of a Q study. The function <code><a href="#topic+make.cards">make.cards</a></code> produces a PDF with full item wording and codes, ready for printout on business card templates that can be easily broken into individual Q-cards.
</p>
</li>
<li><p> Several functions to aid reproducible research, by importing the following from raw, separate *.CSV or *.TEX files for each respondent or item:
</p>

<ul>
<li><p> Q-sorts (<code><a href="#topic+import.q.sorts">import.q.sorts</a></code>)
</p>
</li>
<li><p> Participant item feedback (<code><a href="#topic+import.q.feedback">import.q.feedback</a></code>)
</p>
</li>
<li><p> Complete concourses (<code><a href="#topic+import.q.concourse">import.q.concourse</a></code>)
</p>
</li>
<li><p> Item samples (<code><a href="#topic+build.q.set">build.q.set</a></code>)
</p>
</li></ul>

</li></ul>

<p>Use <code>help(package="qmethod")</code> for a list of all the functions.
</p>


<h4>Terminology</h4>

<p>The functions for analysis use the terms standard in Q methodology.
In addition, the optional functions to import raw data from separate *.CSV files (<code><a href="#topic+import.q.sorts">import.q.sorts</a></code>, <code><a href="#topic+import.q.concourse">import.q.concourse</a></code>, <code><a href="#topic+build.q.set">build.q.set</a></code>, <code><a href="#topic+import.q.feedback">import.q.feedback</a></code>) and the card printing function (<code><a href="#topic+make.cards">make.cards</a></code>) refer to items in three distinct ways:
</p>

<ol>
<li><p> Item <strong>full wording</strong>, is the complete item, such as:
</p>
<p>&quot;&lsquo;<span class="samp">&#8288;One small community of indomitable Q-methodologists ...&#8288;</span>&rsquo;&quot;.
This item can be read in from individual *.TEX files by using <code><a href="#topic+import.q.concourse">import.q.concourse</a></code>.
The wording is not passed on to any other function, but can be readily retrieved from the object returned from <code><a href="#topic+import.q.concourse">import.q.concourse</a></code>.
</p>
</li>
<li><p> The item <strong>handle</strong> is a shorthand way of referring to an item, which should be <em>meaningful</em> to the researcher (e.g. <code>"life-with-q"</code>).
Item handles are <em>researcher-facing</em> and can be used to refer to items during data <em>analysis</em>.
They are read in from the <em>filenames</em> of individual *.TEX files when using <code><a href="#topic+import.q.concourse">import.q.concourse</a></code>.
Handles can be used to identify items in other functions and their outputs.
For example, the resulting array or matrix from <code><a href="#topic+import.q.sorts">import.q.sorts</a></code> carries these handles as row names.
</p>
</li>
<li><p> The item <strong>ID</strong> is another shorthand way of referring to an item, that should be <em>meaningless</em> to humans (so as not to influence the participants in unintended ways), such as an arbitrary string of characters.
Item IDs are <em>participant-facing</em> and are used to identify items during data <em>entry</em>.
The item ID can take two forms, depending on function arguments specified by the user:
</p>

<ol>
<li><p> Standard <strong>IDs</strong> (such as <kbd>sta12</kbd>, <kbd>sta13</kbd>) which are generated automatically in <code><a href="#topic+qmethod">qmethod</a></code> or can be provided by the user using the respective <code>manual.lookup</code> arguments in <code><a href="#topic+make.cards">make.cards</a></code>, <code><a href="#topic+import.q.sorts">import.q.sorts</a></code> and <code><a href="#topic+import.q.feedback">import.q.feedback</a></code>.
See the documentation of these functions for details.
</p>
</li>
<li><p> A set of hexadecimal <strong>hashed IDs</strong> (such as <kbd>ae128fs</kbd>) can be automatically generated and expected by the functions <code><a href="#topic+make.cards">make.cards</a></code>, <code><a href="#topic+import.q.sorts">import.q.sorts</a></code> and <code><a href="#topic+import.q.feedback">import.q.feedback</a></code> if the argument <code>manual.lookup</code> remains empty and defaults to <code>NULL</code>.
In that case, IDs are computed by 'summarising' the full item wordings (e.g. 
</p>
<p>&quot;&lsquo;<span class="samp">&#8288;Q Method is used by a crazy, but charming community ...&#8288;</span>&rsquo;&quot;) into a hexadecimal number (e.g. &quot;<kbd>ae128fs</kbd>&quot;), a process known as cryptographic <em>hashing</em> (for more details see <code><a href="digest.html#topic+digest">digest</a></code>)).
These hash values change whenever <em>anything</em> in the full item wordings is changed, and allow a precise identification of different versions of an item.
This function never exposes users to the hash values.
Automatic, hashed IDs are generally recommended and easier to use, but some caveats apply (see <code><a href="#topic+make.cards">make.cards</a></code>).
</p>
</li></ol>

</li></ol>

<p>For more information on this terminology and the rationale behind it, consider the best practices suggested by Maximilian Held on the <a href="https://github.com/aiorazabala/qmethod/wiki/Data-management/">data management</a> page.
</p>



<h4>Suggested File Structure</h4>

<p>For studies in which each Q-sort and item are kept in separate *.CSV files, the import functions <code><a href="#topic+import.q.sorts">import.q.sorts</a></code>, <code><a href="#topic+import.q.concourse">import.q.concourse</a></code>, <code><a href="#topic+build.q.set">build.q.set</a></code>, <code><a href="#topic+import.q.feedback">import.q.feedback</a></code> and the print function <code><a href="#topic+make.cards">make.cards</a></code> require a nested directory structure in the study folder. An example of such structure can be found in <code>../qmethod/extdata/importexample</code>.
Although recommended for complex studies, this structure is not necessary for using the data analysis functions or for exploring and exporting results.
</p>
<p>If the suggested file structure is followed, the subdirectories for (within-subjects) <em>conditions</em> and <em>languages</em> are optional, and need to be used only if there are more than one condition and language, respectively.
In such case, the arguments <code>conditions</code> and <code>languages</code> for the above import functions must be specified accordingly.
</p>
<p>For more information on the file structure and the rationale behind it, consider the best practices suggested by Maximilian Held on the <a href="https://github.com/aiorazabala/qmethod/wiki/Data-management">data management</a> page.
</p>



<h4>Bootstrapping</h4>

<p>A set of functions are available to perform bootstrapping with Q data (see <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0148087">Zabala and Pascual, 2016, Bootstrapping Q Methodology to Improve the Understanding of Human Perspectives. PLoS ONE</a> for details). The main bootstrap functions are as follows:
</p>

<ul>
<li> <p><code><a href="#topic+qmboots">qmboots</a></code> performs a full bootstrap. It calls internally the functions <code><a href="#topic+qbstep">qbstep</a></code> (for each bootstrap step), and to either <code><a href="#topic+qindtest">qindtest</a></code> or <code><a href="#topic+qpcrustes">qpcrustes</a></code> in order to correct the <strong>alignment problem</strong>.
</p>
</li>
<li> <p><code><a href="#topic+qmb.summary">qmb.summary</a></code> summarises the object resulting from <code><a href="#topic+qmboots">qmboots</a></code> into two tables: (1) summary of <strong>factor loadings</strong> (standard factor loadings, bootstrapped factor loadings, and flagging frequency) and (2) summary of <strong>statement scores</strong> (bootstrapped and standard z-scores, bootstrapped and standard factor scores, standard error of bootstrapped z-scores, and differences between standard and bootstrapped values).
</p>
</li>
<li> <p><code><a href="#topic+qmb.plot">qmb.plot</a></code> plots an object resulting from <code><a href="#topic+qmb.summary">qmb.summary</a></code> in a figure designed for bootstrapped Q data (either the factor loadings or the statement z-scores).
</p>
</li></ul>




<h3>Author(s)</h3>

<p>Aiora Zabala<br />
Main author and maintainer<br />
<a href="https://aiorazabala.net/">https://aiorazabala.net/</a><br />
<a href="mailto:aiora.zabala@gmail.com">aiora.zabala@gmail.com</a>
</p>
<p>Maximilian Held<br /> 
Author of data management functions: <code><a href="#topic+import.q.sorts">import.q.sorts</a></code>, <code><a href="#topic+import.q.concourse">import.q.concourse</a></code>, <code><a href="#topic+build.q.set">build.q.set</a></code>, <code><a href="#topic+import.q.feedback">import.q.feedback</a></code> and <code><a href="#topic+make.cards">make.cards</a></code><br />
<a href="https://maxheld.de/">https://maxheld.de/</a>
</p>
<p>Frans Hermans<br /> 
Author of centroid function: <code><a href="#topic+centroid">centroid</a></code><br />
<a href="https://www.researchgate.net/profile/Frans-Hermans-3">https://www.researchgate.net/profile/Frans-Hermans-3</a>
</p>


<h3>References</h3>


<ul>
<li><p> Zabala, A., 2014. qmethod: A Package to Explore Human Perspectives Using Q Methodology. <em>The R Journal</em>, 6(2):163-173.<br /> Available from: <a href="https://journal.r-project.org/archive/2014-2/zabala.pdf">https://journal.r-project.org/archive/2014-2/zabala.pdf</a>.
</p>
</li>
<li><p> Zabala A. and Pascual, U., 2016. Bootstrapping Q Methodology to Improve the Understanding of Human Perspectives. <em>PLoS ONE</em>.<br /> Available from: <a href="https://doi.org/10.1371/journal.pone.0148087">doi:10.1371/journal.pone.0148087</a>.
</p>
</li>
<li><p> Watts, S., and and P. Stenner, 2012. <em>Doing Q Methodological Research: Theory, Method &amp; Interpretation</em>, London: Sage Publications Ltd.
</p>
</li>
<li><p> Van Exel, J., and G. de Graaf, 2005. <em>Q Methodology: A Sneak Preview</em><br /> <a href="https://qmethodblog.files.wordpress.com/2016/01/qmethodologyasneakpreviewreferenceupdate.pdf">https://qmethodblog.files.wordpress.com/2016/01/qmethodologyasneakpreviewreferenceupdate.pdf</a>Available at this link.
</p>
</li>
<li><p> Brown, S. R., 1980. <em>Political subjectivity: Applications of Q methodology in political science</em>, New Haven, CT: Yale University Press.<br /> <a href="https://qmethodblog.files.wordpress.com/2016/01/brown-1980-politicalsubjectivity.pdf">https://qmethodblog.files.wordpress.com/2016/01/brown-1980-politicalsubjectivity.pdf</a>Available at this link.
</p>
</li>
<li> <p><a href="https://qmethod.org/">https://qmethod.org/</a><br />
The website of the <em>International Society for the Scientific Study of Subjectivity</em>.
</p>
</li>
<li> <p><a href="http://schmolck.org/qmethod/">http://schmolck.org/qmethod/</a><br />
Peter Schmolck's Q Method Page, with further references, datasets and the PQMethod software.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>data(lipset)
results &lt;- qmethod(lipset[[1]], nfactors = 3, rotation = "varimax")
summary(results)
results
plot(results)
</code></pre>

<hr>
<h2 id='build.q.set'>Q methodology: sample a Q set from a concourse</h2><span id='topic+build.q.set'></span>

<h3>Description</h3>

<p>Subsets a concourse of items into a sample of selected items.
Returns a dataframe with handles as row names, and languages (if applicable) as columns.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build.q.set(q.concourse, q.sample, q.distribution)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="build.q.set_+3A_q.concourse">q.concourse</code></td>
<td>

<p>A matrix with handles as row names, (optional) languages as columns, and full item wordings in cells as produced by <code><a href="#topic+import.q.concourse">import.q.concourse</a></code>.
</p>
</td></tr>
<tr><td><code id="build.q.set_+3A_q.sample">q.sample</code></td>
<td>

<p>A character vector of handles (such as <kbd>q-is-great</kbd>).
The items identified by the handles will be sampled.
</p>
</td></tr>
<tr><td><code id="build.q.set_+3A_q.distribution">q.distribution</code></td>
<td>

<p>The chosen Q distribution as a vector of integers, such as <code>c(1,3,1)</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Q studies are carried out letting participants rank a <em>sample</em> of statements (items), collectively referred to as the <em>Q set</em>.
These Q sets are drawn (by some sampling strategy) from a <em>concourse</em>, or universe of items.
This function subsets the concourse generated by <code><a href="#topic+import.q.concourse">import.q.concourse</a></code>, based on a vector of handles provided, and returns it as <code>q.set</code>.
</p>
<p>The function implements a number of tests on the validity and consistency of inputs.
</p>
<p>If you are not familiar with the terminology of item <em>handle</em>, <em>ID</em> and <em>wording</em> or the file structure expected for import functions, please read the respective sections in the documentation for <a href="#topic+qmethod-package">qmethod-package</a> first or consider the package <a href="http://aiorazabala.github.io/qmethod/Data-management">website</a>.
</p>


<h3>Value</h3>

<p>Returns a matrix with handles as row names, languages (if applicable) as column names and full item wordings in cells.
</p>


<h3>Note</h3>

<p>This function currently does <em>not</em> actually <em>draw</em> a sample, but merely builds the Q set from a <em>given</em> sample.
</p>
<p>This function currently requires input in the argument <code>q.distribution</code>, but it only checks for the sum, so if you are working with a distribution-free study that still has a fixed number of items, you can just enter a vector of length 1 with your total sum of items.
</p>


<h3>Author(s)</h3>

<p>Maximilian Held</p>


<h3>See Also</h3>

<p><code><a href="#topic+import.q.concourse">import.q.concourse</a></code>,
<code><a href="#topic+import.q.feedback">import.q.feedback</a></code>,
<code><a href="#topic+import.q.sorts">import.q.sorts</a></code>,
<code><a href="#topic+make.cards">make.cards</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Build a Q Set from a concourse and a sample
data(importexample)
q.set &lt;- build.q.set(
  q.concourse = importexample$q.concourse,  # as created by import.q.concourse
  q.sample = c("life-with-q","q-uprising","r-dominance","small-village"),
  # add vector with items to be selected from concourse
  # q.sample is ideally read in from a separate *.CSV file
  q.distribution = c(1,2,1) # very simple distribution
  )
</code></pre>

<hr>
<h2 id='centroid'>Q methodology: centroid extraction</h2><span id='topic+centroid'></span>

<h3>Description</h3>

<p>Extracts factors/ components using the centroid approach as an alternative to Principal Components Analysis.</p>


<h3>Usage</h3>

<pre><code class='language-R'>centroid(tmat, nfactors = 7, spc)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="centroid_+3A_tmat">tmat</code></td>
<td>
<p>a correlation matrix between Q-sorts.</p>
</td></tr>
<tr><td><code id="centroid_+3A_nfactors">nfactors</code></td>
<td>
<p>number of factors/ components to extract. Defaults to 7.</p>
</td></tr>
<tr><td><code id="centroid_+3A_spc">spc</code></td>
<td>
<p>the threshold to accept factor results, set to 0.00001 by default (in Brown 1980, this is set to 0.02).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This functions implement the centroid method for extraction of factors, an alternative to Principal Components that can be used in Q methodology. The calculations are based in Brown (1980; below). 
</p>
<p>The function is called from within <code><a href="#topic+qmethod">qmethod</a></code> where the attribute <code>extraction</code> is set to <code>centroid</code>.
</p>
<p>This function can be used independently where conducting each step of the analysis separately, preceded by a correlation between Q-sorts and followed by the rotation of factors/ components (see below), calculation of z-scores, etc.
</p>


<h3>Value</h3>

<p>Returns a matrix with Q-sorts as rows, and rotated factors as columns.
</p>


<h3>Note</h3>

<p>This is a function used within <code><a href="#topic+qmethod">qmethod</a></code>. Rarely to be used independently.</p>


<h3>Author(s)</h3>

<p>Frans Hermans</p>


<h3>References</h3>

<p>Brown, S. R., 1980 <em>Political subjectivity: Applications of Q methodology in political science</em>, New Haven, CT: Yale University Press, pages 208-224.
</p>
<p>See further references on the methodology in <code><a href="#topic+qmethod-package">qmethod-package</a></code>.</p>


<h3>Examples</h3>

<pre><code class='language-R'>#### Example
require('qmethod')
require ("psych")

# Load data
data("lipset")
lip &lt;- lipset[[1]]

# Correlation matrix
corlip &lt;-cor(lip)

# Centroid extraction
lipcent &lt;- centroid(corlip)
lipcent


## To finalise the full analysis, continue with the following steps
# Rotation (in this example, varimax over 3 factors)
vmax &lt;- varimax(lipcent[,1:3])

# Automatic pre-flagging of Q-sorts
flags &lt;- qflag(unclass(vmax$loadings), nstat = 33)

# Calculate z-scores and general characeristics
results &lt;- qzscores(lip, 3, loa=vmax$loadings, flagged=flags)
summary(results)

# Consensus and distinguishing statements
results$qdc &lt;- qdc(lip, 3, zsc=results$zsc, sed=results$f_char$sd_dif)

plot(results)

## All of the above can be done with:
results2 &lt;- qmethod(lip, 3, extraction="centroid")
</code></pre>

<hr>
<h2 id='export.pqmethod'>Q methodology: export to PQMethod *.DAT and *.STA files</h2><span id='topic+export.pqmethod'></span>

<h3>Description</h3>

<p>Exports Q data to *.DAT and *.STA files readable in PQMethod software.</p>


<h3>Usage</h3>

<pre><code class='language-R'>export.pqmethod(dataset, study.name, 
     study.description, col.range, 
     filename='Q_data_forPQmethod', 
     left.zeros, right.zeros, statements)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="export.pqmethod_+3A_dataset">dataset</code></td>
<td>
<p>a matrix or data frame qwith Q data: Q-sorts as columns and statements as rows. The names of the columns will be used as Q-sort IDs in the *.DAT file.</p>
</td></tr>
<tr><td><code id="export.pqmethod_+3A_study.name">study.name</code></td>
<td>
<p>a string with a short name of the study. No space characters are allowed.</p>
</td></tr>
<tr><td><code id="export.pqmethod_+3A_study.description">study.description</code></td>
<td>
<p>a string with a one-sentence description of the study).</p>
</td></tr>
<tr><td><code id="export.pqmethod_+3A_col.range">col.range</code></td>
<td>
<p>a two-element numerical vector with the values at the two extremes of the Q distribution (e.g. <code>c(-4, 4)</code>).</p>
</td></tr>
<tr><td><code id="export.pqmethod_+3A_filename">filename</code></td>
<td>
<p>a filename. The extension *.DAT is added automatically).</p>
</td></tr>
<tr><td><code id="export.pqmethod_+3A_left.zeros">left.zeros</code></td>
<td>
<p>number of zeros before the distribution, in the second line of *.DAT file.</p>
</td></tr>
<tr><td><code id="export.pqmethod_+3A_right.zeros">right.zeros</code></td>
<td>
<p>number of zeros after the distribution, in the second line of *.DAT file).</p>
</td></tr>
<tr><td><code id="export.pqmethod_+3A_statements">statements</code></td>
<td>
<p>a matrix with statements, one in each row).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exports the raw data of a Q methodology study into the native format used in PQMethod. Returns a message with some basic information about the data.
</p>
<p>Note that <b>no checks are made on the data</b>, such as whether there are duplicated or non-forced Q-sorts.
</p>
<p>This function is not applicable to non-forced distributions.
</p>


<h3>Note</h3>

<p>This function is experimental. Use with caution and verify that the output is as desired.</p>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>Schmolck, Peter, 2014. <em>PQMethod Software</em>, Available at: <a href="http://schmolck.org/qmethod/">http://schmolck.org/qmethod/</a>
</p>
<p>File descriptions in <em>PQMethod Manual</em>: <a href="http://schmolck.org/qmethod/pqmanual.htm#appdxa">http://schmolck.org/qmethod/pqmanual.htm#appdxa</a></p>


<h3>Examples</h3>

<pre><code class='language-R'># data(lipset)
# db &lt;- lipset[[1]]
# export.pqmethod(dataset = db, 
#                study.name = 'mystudy', 
#                study.description = 'great study', 
#                col.range = c(-4, 4), 
#                filename = 'mystudy',
#                statements=lipset[[2]])
</code></pre>

<hr>
<h2 id='export.qm'>Q Methodology: export results to a plain text document</h2><span id='topic+export.qm'></span>

<h3>Description</h3>

<p>Exports an object of class <code>QmethodRes</code> to a plain text file (*.TXT). All the objects within the list resulting from <code><a href="#topic+qmethod">qmethod</a></code> are exported as they are. This is intended for interpretation rather than for further analysis.</p>


<h3>Usage</h3>

<pre><code class='language-R'>export.qm(qmobject, file, style= c("R", "PQMethod"))</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="export.qm_+3A_qmobject">qmobject</code></td>
<td>
<p>an object of Q methodology results, obtained from the function <code><a href="#topic+qmethod">qmethod</a></code>.</p>
</td></tr>
<tr><td><code id="export.qm_+3A_file">file</code></td>
<td>
<p>the file name. Note that in some operating systems, the file name will need an extension *.TXT so that other software opens it.</p>
</td></tr>
<tr><td><code id="export.qm_+3A_style">style</code></td>
<td>
<p>the structure and formatting of the results in the exported document. Defaults to <code>"R"</code> where the <code>qmobject</code> will be written as is. Option <code>"PQMethod"</code> provides an output with similar structure and elements as those provided by PQMethod software in the *.LIS files (see details of *.LIS files in the References below). Note that the latter creates a much longer document.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>Schmolck. <em>PQMethod Software (Version 2.35)</em>, 2014. <a href="http://schmolck.org/qmethod/">http://schmolck.org/qmethod/</a>
</p>
<p>File descriptions in <em>PQMethod Manual</em>: <a href="http://schmolck.org/qmethod/pqmanual.htm#appdxa">http://schmolck.org/qmethod/pqmanual.htm#appdxa</a>
</p>

<hr>
<h2 id='import.easyhtmlq'>Q methodology: import data from easy-HTMLQ</h2><span id='topic+import.easyhtmlq'></span>

<h3>Description</h3>

<p>Imports data from *.JSON files created with easy-HTMLQ software for Q-sort administration.</p>


<h3>Usage</h3>

<pre><code class='language-R'>import.easyhtmlq(filename, ...)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="import.easyhtmlq_+3A_filename">filename</code></td>
<td>
<p>a file with extension *.JSON (see full description of the file below in References).</p>
</td></tr>
<tr><td><code id="import.easyhtmlq_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to <code><a href="utils.html#topic+read.csv2">read.csv2</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Extracts the raw data of a Q methodology study from the native format saved in <em>easy-HTMLQ</em>. Returns a list with two objects.
</p>
<p>The first object contains a data frame with items as rows and Q-sorts as columns, ready to be used in <code><a href="#topic+qmethod">qmethod</a></code>. It sets the Q-sort names to the values in the column 'uid' or else in 'sid'.
</p>
<p>The second object contains the additional data collected. Columns <code>npos</code>, <code>nneu</code> and <code>nneg</code> have the number of items allocated to the groups of 'positive', 'neutral', and 'negative' respectively. Columns which name start with <code>comment*</code> and <code>form*</code> contain further information introduced by the respondent. Columns which name start with <code>dur*</code> contain the time that the respondent spent in each screen. Column <code>datetime</code> contains the data stamp when the Q-sort was submitted.
</p>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>Banasick, Shawn, 2021. <em>easy-htmlq</em>, Available at: <a href="https://github.com/shawnbanasick/easy-htmlq">https://github.com/shawnbanasick/easy-htmlq</a>, based on Oschlies, Johannes and Killing, Marvin, 2015. <em>HTMLQ</em>, Available at: <a href="https://github.com/aproxima/htmlq">https://github.com/aproxima/htmlq</a>
</p>

<hr>
<h2 id='import.htmlq'>Q methodology: import data from HTMLQ and FlashQ</h2><span id='topic+import.htmlq'></span>

<h3>Description</h3>

<p>Imports data from *.CSV files created with HTMLQ or FlashQ softwares for Q-sort administration.</p>


<h3>Usage</h3>

<pre><code class='language-R'>import.htmlq(filename, ...)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="import.htmlq_+3A_filename">filename</code></td>
<td>
<p>a file with extension *.CSV, separated by &quot;;&quot; as done by default in HTMLQ (see full description of the file below in References).</p>
</td></tr>
<tr><td><code id="import.htmlq_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to <code><a href="utils.html#topic+read.csv2">read.csv2</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Extracts the raw data of a Q methodology study from the native format saved in both <em>FlashQ</em> and <em>HTMLQ</em>. Returns a list with two objects.
</p>
<p>The first object contains a data frame with items as rows and Q-sorts as columns, ready to be used in <code><a href="#topic+qmethod">qmethod</a></code>. It sets the Q-sort names to the values in the column 'uid' or else in 'sid'.
</p>
<p>The second object contains the additional data collected. Columns <code>npos</code>, <code>nneu</code> and <code>nneg</code> have the number of items allocated to the groups of 'positive', 'neutral', and 'negative' respectively. Columns which name start with <code>comment*</code> and <code>form*</code> contain further information introduced by the respondent. Columns which name start with <code>dur*</code> contain the time that the respondent spent in each screen. Column <code>datetime</code> contains the data stamp when the Q-sort was responded.
</p>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>Hackert, Christian and Braehler, Gernot, 2007. <em>FlashQ</em>, Used to be available at: http://www.hackert.biz/flashq, but offline as tested on Feb 2021.
</p>
<p>Oschlies, Johannes and Killing, Marvin, 2015. <em>HTMLQ</em>, Available at: <a href="https://github.com/aproxima/htmlq">https://github.com/aproxima/htmlq</a>
</p>

<hr>
<h2 id='import.pqmethod'>Q methodology: import PQMethod *.DAT files</h2><span id='topic+import.pqmethod'></span>

<h3>Description</h3>

<p>Imports data from *.DAT files created in PQMethod software.</p>


<h3>Usage</h3>

<pre><code class='language-R'>import.pqmethod(file, ...)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="import.pqmethod_+3A_file">file</code></td>
<td>
<p>a file with extension *.DAT (see full description of the file below in References).</p>
</td></tr>
<tr><td><code id="import.pqmethod_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to <code><a href="utils.html#topic+read.table">read.table</a></code> and <code><a href="utils.html#topic+read.fwf">read.fwf</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Extracts the raw data of a Q methodology study from the native format used in PQMethod. Returns a data frame with statements as rows and Q-sorts as columns.
</p>
<p>If the following error occurs: <code>"invalid multibyte string"</code>, a possible solution is to either set the right file-encoding in the argument <code>fileEncoding</code> or inspect the file for uncommon characters (see details in <code><a href="utils.html#topic+read.table">read.table</a></code>).
</p>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>Schmolck, Peter, 2014. <em>PQMethod Software</em>, Available at: <a href="http://schmolck.org/qmethod/">http://schmolck.org/qmethod/</a>
</p>
<p>File descriptions in <em>PQMethod Manual</em>: <a href="http://schmolck.org/qmethod/pqmanual.htm#appdxa">http://schmolck.org/qmethod/pqmanual.htm#appdxa</a></p>

<hr>
<h2 id='import.q.concourse'>Q methodology: import concourse of Q items</h2><span id='topic+import.q.concourse'></span>

<h3>Description</h3>

<p>Imports a full set of items (statements in a concourse) from a directory of *.TEX files (one file per item), including possible translations in separate folders.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import.q.concourse(q.concourse.dir, languages = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="import.q.concourse_+3A_q.concourse.dir">q.concourse.dir</code></td>
<td>

<p>A directory of <em>individual</em> item wordings in *.TEX files with handles as filenames (e.g. <kbd>happy-feeling.tex</kbd>).
If <code>languages</code> are specified, the directory should contain one folder per language, with all full item wordings as individual *.TEX files in <em>each</em> language folder.
Items should have the <em>same</em> file name across all languages (e.g. <kbd>happy-feeling.tex</kbd>).
Directories end with a trailing slash, such as <code>study/q-sample/q-concourse/</code>.
</p>
</td></tr>
<tr><td><code id="import.q.concourse_+3A_languages">languages</code></td>
<td>

<p>A character vector of languages, same as folders within <code>q.concourse.dir</code>.
If the concourse is monolingual, leave empty. Defaults to <code>NULL</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Q studies are conducted by asking participants (or a P set) to rank order a <em>sample</em> (or Q Set) of items, drawn from a universe (or concourse) of items, based on some sampling strategy.
A concourse is, simply put, <em>the sum of all things people could say about a subject matter</em>.
</p>
<p>It is helpful to keep the <em>entire</em> concourse readily available, so as to draw samples from it.
</p>
<p>For some studies, it is necessary to have the complete items available in several languages.
</p>
<p>This function simply imports all full item wordings and assigns a <em>handle</em> for the item, based on the filename (see <a href="#topic+qmethod-package">qmethod-package</a>).
These filenames should be short and meaningful to the researcher.
</p>
<p>Individual items as *.TEX files should include minimal markup, and no trailing whitespace or empty newlines.
If you do not need any additional formatting, you can just save plain text files (*.TXT) with the extension *.TEX.
There is no need to know <a href="https://www.latex-project.org/">LaTeX</a>.
</p>
<p>Returns error if items are not available in all translations.
</p>
<p>Defaults to monolingual variant.
</p>
<p>If you are not familiar with the terminology of Q item <em>handle</em>, <em>ID</em> and <em>wording</em> or the file structure expected for import functions, please read the respective sections in the documentation for <a href="#topic+qmethod-package">qmethod-package</a> first or consider the package <a href="http://aiorazabala.github.io/qmethod/Data-management">website</a>.
</p>


<h3>Value</h3>

<p>Returns a character matrix with handles as row names, languages (if applicable) as columns and full item wording per language in cells.
</p>


<h3>Author(s)</h3>

<p>Maximilian Held</p>


<h3>See Also</h3>

<p><code><a href="#topic+build.q.set">build.q.set</a></code>,
<code><a href="#topic+import.q.feedback">import.q.feedback</a></code>,
<code><a href="#topic+import.q.sorts">import.q.sorts</a></code>,
<code><a href="#topic+make.cards">make.cards</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Import a full q concourse from 'importexample' dataset
path.concourse &lt;- paste(            # this part is only for the example!
  path.package("qmethod"),          # just to make sure, use absolute path
  # import example files are in root/extdata of package
  "/extdata/importexample/sample/concourse/",  # location of concourse
  sep = ""
  )
q.concourse &lt;- import.q.concourse(  # import concourse
  q.concourse.dir = path.concourse, # insert your applicable path here
  languages = c("english","german") # choose your languages from path here
  )

</code></pre>

<hr>
<h2 id='import.q.feedback'>Q methodology: imports feedback on Q items</h2><span id='topic+import.q.feedback'></span>

<h3>Description</h3>

<p>Turns raw item feedback (in *.CSV files) into a  verified array or matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import.q.feedback(q.feedback.dir,	q.sorts, q.set,	manual.lookup = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="import.q.feedback_+3A_q.feedback.dir">q.feedback.dir</code></td>
<td>

<p>A relative path to a directory structure where:
</p>

<ul>
<li><p> (optional) folders are <code>conditions</code> (such as <kbd>before</kbd> and <kbd>after</kbd>), if there is more than one condition.
Conditions are inferred from the specified <code>q.sorts</code>.
If there are no conditions, there should be no folders.
</p>
</li>
<li><p> filenames of *.CSV are participant names (might be given pseudonyms).
</p>
</li>
<li><p> *.CSV files within folders contain raw feedback, beginning with an arbitrary header line (ignored), and the following columns, starting from the left:
</p>

<ol>
<li><p> An ID, either as an automatic hash or manually specified (see <code><a href="#topic+qmethod-package">qmethod-package</a></code>), as specified per the <code>manual.lookup</code> option of <code><a href="#topic+make.cards">make.cards</a></code>.
Each ID only occurs once.
</p>
</li>
<li><p> The full feedback in plain text, enclosed in quotes.
</p>
</li>
<li><p> Optionally, a logical indicator whether current line should be ignored (in which case it should be set to <code>TRUE</code>).
If there is no such column, all feedback will be imported.
</p>
</li></ol>

</li></ul>

</td></tr>
<tr><td><code id="import.q.feedback_+3A_q.sorts">q.sorts</code></td>
<td>

<p>A matrix or array with handles as row names, participant as column names, (optional) conditions as 3rd dimension and cells as Q-sort ranks, as produced by <code><a href="#topic+import.q.sorts">import.q.sorts</a></code>.
</p>
</td></tr>
<tr><td><code id="import.q.feedback_+3A_q.set">q.set</code></td>
<td>

<p>A matrix with handles as row names, languages (if applicable) in columns, as produced by <code><a href="#topic+build.q.set">build.q.set</a></code>.
</p>
</td></tr>
<tr><td><code id="import.q.feedback_+3A_manual.lookup">manual.lookup</code></td>
<td>

<p>A matrix with handles as row names, and IDs (such as <kbd>"sta121"</kbd>, as printed on the Q-cards by <code><a href="#topic+make.cards">make.cards</a></code>) in any of the columns.
Defaults to <code>NULL</code> in which case items IDs are expected to be item wording hashes, as produced by <code><a href="#topic+make.cards">make.cards</a></code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Participants in Q studies are often invited to provide open-ended feedback on items, giving researchers additional information on participants' viewpoints.
This feedback is conveniently entered in a spreadsheet editor (2nd column), where each line of feedback corresponds to an item ID (1st column)
An additional, optional (3rd) column indicates whether the current line should be ignored (<code>TRUE</code>), as may be the case for privacy reasons or when the feedback is merely a correction of a typographic error.
If no such 3rd column is included, all feedback will be imported.
</p>
<p>The automatic summary of full item wordings, technically known as <em>hashing</em>, proceeds internally by passing the full item wording to the <code><a href="digest.html#topic+digest">digest</a></code> function of the package <span class="pkg">digest</span> (with arguments set to <code>algo = crc32, serialize = FALSE</code>.)
</p>
<p>After an (arbitrary) header line, a *.CSV file may look like this:<br />
&lsquo;<span class="samp">&#8288;sta001,"This q-item sounds like r-research to me!",FALSE&#8288;</span>&rsquo;, indicating that it should <em>not</em> be ignored (<kbd>FALSE</kbd>).
</p>
<p>If you are not familiar with the terminology of item <em>handle</em>, <em>ID</em> and <em>wording</em> or the file structure expected for import functions, please read the respective sections in the documentation for <a href="#topic+qmethod-package">qmethod-package</a> first or consider the package <a href="http://aiorazabala.github.io/qmethod/Data-management">website</a>.
</p>


<h3>Value</h3>

<p>Returns a matrix or array (if there is more than one condition) with handles as row names, people as column names, (optional) conditions as 3rd dimension name and item feedback in cells.
The return parallels the output from <code><a href="#topic+import.q.sorts">import.q.sorts</a></code>, but with feedback as array cells, rather than Q-sort ranks.
</p>


<h3>Author(s)</h3>

<p>Maximilian Held</p>


<h3>See Also</h3>

<p><code><a href="#topic+import.q.concourse">import.q.concourse</a></code>,
<code><a href="#topic+import.q.sorts">import.q.sorts</a></code>,
<code><a href="#topic+build.q.set">build.q.set</a></code>,
<code><a href="#topic+make.cards">make.cards</a></code>,
<code><a href="#topic+qmethod">qmethod</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(importexample)
path.feedback &lt;- paste(            # this part is only for the example!
  path.package("qmethod"),         # just to make sure, use absolute path
  # import example files are in root/extdata of package:
  "/extdata/importexample/feedback/",  # location of sorts
  sep = ""
  )
q.feedback &lt;- import.q.feedback(   # now import the feedback
  q.feedback.dir = path.feedback,  # add your path here
  q.sorts = importexample$q.sorts,
  q.set = importexample$q.set,     # as produced by build.q.set
  manual.lookup = matrix(  # ideally empty for automatic hashing, or read in from *.CSV
    c("i01","i02","i03","i04"),
    ncol = 1,
    nrow = 4,
    dimnames = list(c("r-dominance","q-uprising","small-village","life-with-q"),"ID")
    )
  )
</code></pre>

<hr>
<h2 id='import.q.sorts'>Q methodology: import Q-sorts from CSV</h2><span id='topic+import.q.sorts'></span>

<h3>Description</h3>

<p>Turns raw Q-sorts (from *.CSV) into a Q-sorts array (when there are &gt; 2 conditions) or matrix (with single condition).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import.q.sorts(q.sorts.dir,	q.set, q.distribution, 
               conditions = NULL, manual.lookup = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="import.q.sorts_+3A_q.sorts.dir">q.sorts.dir</code></td>
<td>

<p>A relative path to a directory structure where:
</p>

<ul>
<li><p> (optional) folders are (within-subjects) <code>conditions</code> (such as <em>before</em> or <em>after</em>), if there is more than one condition as per the <code>conditions</code> argument.
If there are no <code>conditions</code> (defaults to <code>NULL</code>), there should be no folders.
</p>
</li>
<li><p> file names of *.CSV files are participant names (might be given pseudonyms).
</p>
</li>
<li><p> *.CSV files contain <em>raw</em> Q-sorts, where each line contains item IDs, such as &lsquo;<span class="samp">&#8288;,,sta12,sta64,,&#8288;</span>&rsquo;.
All lines below the maximum Q-sort height will be ignored and can have arbitrary input.
For example, in a study with a highest column of 8 cards, everything below the 8th line in the file will be ignored.
There is no need to include the values of the x-axis (say, <code>-4</code> to <code>+4</code>) in these files.
If they are included, they should be the last row.
</p>
</li>
<li><p> cells contains either all manual or all automatic item IDs (such as <kbd>"sta12"</kbd>), both as produced by <code><a href="#topic+make.cards">make.cards</a></code>.
</p>
</li></ul>

</td></tr>
<tr><td><code id="import.q.sorts_+3A_q.set">q.set</code></td>
<td>

<p>A matrix with handles as row names, languages (if applicable) in columns, as read in by <code><a href="#topic+build.q.set">build.q.set</a></code>.
</p>
</td></tr>
<tr><td><code id="import.q.sorts_+3A_q.distribution">q.distribution</code></td>
<td>

<p>The chosen Q distribution as a vector of integers, such as <code>c(1,3,1)</code>.
</p>
</td></tr>
<tr><td><code id="import.q.sorts_+3A_conditions">conditions</code></td>
<td>

<p>A character vector of (optional) study (within-subjects) conditions, such as 
</p>
<p><code>c("before","after")</code>, same as folders under <code>q.sorts.dir</code>.
Defaults to <code>NULL</code> in which case there is only one condition, and *.CSV files are expected directly under <code>q.sorts.dir</code>.
</p>
</td></tr>
<tr><td><code id="import.q.sorts_+3A_manual.lookup">manual.lookup</code></td>
<td>

<p>A matrix with handles (such as <kbd>q-is-great</kbd>, same as in <code><a href="#topic+build.q.set">build.q.set</a></code>, 
</p>
<p><code><a href="#topic+import.q.concourse">import.q.concourse</a></code>) as row names, and arbitrary strings (item IDs, such as <code>"it212"</code>) in any of the columns as printed on the Q-cards by <code><a href="#topic+make.cards">make.cards</a></code>.
Defaults to <code>NULL</code> in which case items are automatically identified by automatic hash IDs, as also produced by <code><a href="#topic+make.cards">make.cards</a></code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function imports Q-sorts from their raw format stored in *.CSV files, in the form in which they were sorted by participants (applicable to Q-sorts with forced distributions only).
</p>
<p>Q-sorts in their raw form have columns as ranks (from, say, <code>-6</code> to <code>+6</code>) with cards (items) sorted in rows.
The vertical dimension of Q-sorts is <em>meaningless</em>.
</p>
<p>Q-sorts are conveniently entered as *.CSV (comma separated values) files in standard spreadsheet editors.
This function ignores any rows in the files below the maximum height of columns expected from <code>q.distribution</code>.
</p>
<p>It is recommended that Q-sort data are kept in their rawest form, with clear documentation of any processing applied to this data.
This is also good practice for reproducible research.
</p>
<p>Q-sorts are best entered not by typing up the full form of an item, but some unique string (ID) printed on the card.
This function, and, analogously, <code><a href="#topic+make.cards">make.cards</a></code> and <code><a href="#topic+import.q.feedback">import.q.feedback</a></code> offer a manual and automatic way to create these IDs, which are then expected as input (see <a href="#topic+qmethod-package">qmethod-package</a> for details).
</p>
<p>The automatic summary of full item wordings, technically known as <em>hashing</em>, proceeds internally by passing the full item wording to the <code><a href="digest.html#topic+digest">digest</a></code> function of the package <span class="pkg">digest</span> (with arguments set to <code>algo = crc32, serialize = FALSE</code>.)
</p>
<p>Q-sorts are conveniently entered as *.CSV (comma separated values) files in standard spreadsheet editors.
</p>
<p>This function includes a number of tests to verify the integrity of entered Q-sorts:
</p>

<ol>
<li> <p><code>manual.lookup</code> tables provided are tested for duplicate identifiers.
</p>
</li>
<li><p> Function returns a warning if some participants do not have Q-sort files under all conditions (applies only if there are more than one <code>conditions</code>).
</p>
</li>
<li><p> Function errors out if there are item IDs in a Q-sort not matched by any manually or automatically specified ID, respectively (see <code><a href="#topic+qmethod-package">qmethod-package</a></code> for details).
</p>
</li>
<li><p> Function errors out if the distribution in a given Q-sort does not conform to the defined <code>q.distribution</code>.
</p>
</li>
<li><p> Function errors out if there are items in the sample <code>q.set</code> that cannot be found in any given Q-sort.
</p>
</li>
<li><p> Function errors out if there are items in a given Q-sort that cannot be found in the sample <code>q.set</code>.
</p>
</li></ol>

<p>If you are not familiar with the terminology of item <em>handle</em>, <em>ID</em> and <em>wording</em> or the file structure expected for import functions, please read the respective sections in the documentation for <code><a href="#topic+qmethod-package">qmethod-package</a></code> first or consider the package <a href="http://aiorazabala.github.io/qmethod/Data-management">website</a>.
</p>


<h3>Value</h3>

<p>Returns a matrix (when there is a single condition) or array (with two or more conditions) with handles as row names, people as column names, conditions (if more than one) as 3rd dimension and Q-sort ranks in cells, as expected for analysis by <code><a href="#topic+qmethod">qmethod</a></code>.
</p>
<p>Notice that <code><a href="#topic+qmethod">qmethod</a></code> expects a matrix (with two dimensions).
If you have several conditions, and therefore an array of data, you must pass them to <code><a href="#topic+qmethod">qmethod</a></code> in individual 'slices' of conditions, using subsetting.
</p>


<h3>Note</h3>

<p>This function currently works only with forced distributions.
</p>
<p>When argument <code>manual.lookup</code> is set to <code>NULL</code>, IDs are computed by &quot;summarising&quot; the complete item wordings (<code>"Q Method is used by a crazy, but charming community of ..."</code>) into a hexadecimal number (<code>"ae128fs"</code>), a process known as cryptographic hashing. These hash values change whenever anything in the full item wordings is changed, and allow a precise identification of different versions of an item. This function never exposes users to the hash values; the encrypting and decrypting are done under the hood by the respective functions. Automatic, hashed IDs are generally recommended and easier to use, but some caveats apply.
</p>
<p>Hashed identification has not been widely tested in Q studies and should be used with great care and only for extra convenience.
When using hash identification, researchers should be careful to record the precise item wordings at the time of hashing for the printed Q-cards, preferably with a version control system.
Researchers should also record the complete Q-sorts of participants in an <em>unhashed</em> form, such as a picture of the completed sort in full wordings, in case problems with the hashing arise.
</p>
<p>This function does <em>not</em> test whether Q-sorts were entered correctly into the *.CSV files.
It is recommended to enter any given Q-sort more than once and have a spreadsheet editor compare several entry attempts for consistency.
This function ignores any entries in *.CSV files below the highest row expected by the <code>q.distribution</code>.
</p>


<h3>Author(s)</h3>

<p>Maximilian Held</p>


<h3>See Also</h3>

<p><code><a href="#topic+import.q.concourse">import.q.concourse</a></code>,
<code><a href="#topic+import.q.feedback">import.q.feedback</a></code>,
<code><a href="#topic+build.q.set">build.q.set</a></code>,
<code><a href="#topic+make.cards">make.cards</a></code>,
<code><a href="#topic+qmethod">qmethod</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Import a Q sample from a directory of *.CSV files
data(importexample)
path.sorts &lt;- paste(                 # this part is only for the example!
  path.package("qmethod"),           # just to make sure, use absolute path
  # import example files are in root/extdata of package:
  "/extdata/importexample/qsorts/",  # location of sorts
  sep = ""
  )
q.sorts &lt;- import.q.sorts(           # now import the sorts
  q.sorts.dir = path.sorts,          # add your path here
  q.set = importexample$q.set,       # as produced by build.q.set
  q.distribution = c(1,2,1),         # very simple distribution
  conditions = c("before","after"),  # enter your conditions here, same as in path
  manual.lookup = matrix(  # ideally empty for automatic hashing, 
                           # or read in from *.CSV file
    c("i01","i02","i03","i04"),
    ncol = 1,
    nrow = 4,
    dimnames = list(c("r-dominance","q-uprising","small-village",
                      "life-with-q"),"ID")
    )
  )
</code></pre>

<hr>
<h2 id='importexample'>Import Example</h2><span id='topic+importexample'></span>

<h3>Description</h3>

<p>A minimum working example (MWE) to test the functions <code><a href="#topic+import.q.concourse">import.q.concourse</a></code>, <code><a href="#topic+build.q.set">build.q.set</a></code>, <code><a href="#topic+import.q.sorts">import.q.sorts</a></code>, <code><a href="#topic+import.q.feedback">import.q.feedback</a></code> and <code><a href="#topic+make.cards">make.cards</a></code>.
The example is too small to run an actual Q analysis.
To test out a real study with the same data structure, go to: <a href="https://github.com/maxheld83/keyneson">https://github.com/maxheld83/keyneson</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>importexample</code></pre>


<h3>Format</h3>

<p><code>importexample</code> is included as a directory in <code>qmethod</code> package root folder, including subdirectories as documented in the package documentation, and on the package <a href="http://aiorazabala.github.io/qmethod/Data-management">website</a>.
Importexample is <em>also</em> partly included as a ready-made RData datafile in the folder <code>qmethod/data</code> so that (cumulative) function examples can run.
</p>


<h3>Source</h3>

<p>None.</p>

<hr>
<h2 id='lipset'><em>Lipset</em> (1963) Q methodology dataset</h2><span id='topic+lipset'></span>

<h3>Description</h3>

<p>Dataset about <em>The Value Patterns of Democracy</em> based on Lipset (1963) to illustrate the <span class="pkg">qmethod</span> package.</p>


<h3>Usage</h3>

<pre><code class='language-R'>lipset</code></pre>


<h3>Format</h3>

<p>A list with two objects. A data frame with 9 Q sorts sorting 33 statements and a data frame with the text corresponding to the statements.</p>


<h3>Source</h3>

<p>Brown, S. R., 1980. <em>Political subjectivity: Applications of Q methodology in political science</em>, New Haven, CT: Yale University Press.
</p>
<p>Lipset, S. M., 1963. The value patterns of democracy: A case study in comparative analysis. <em>American Sociological Review</em>, 28, 515-531.
</p>

<hr>
<h2 id='loa.and.flags'>Q methodology: show factor loadings next to flags</h2><span id='topic+loa.and.flags'></span>

<h3>Description</h3>

<p>Prints a table with factor loadings and flagged Q-sorts are indicated with a star.</p>


<h3>Usage</h3>

<pre><code class='language-R'>loa.and.flags(results, nload = FALSE)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loa.and.flags_+3A_results">results</code></td>
<td>
<p>an object of Q method results.</p>
</td></tr>
<tr><td><code id="loa.and.flags_+3A_nload">nload</code></td>
<td>
<p>logical; print number of flagged Q-sorts.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Simple function to explore the Q-sorts that are automatically pre-flagged, using the standard criteria implemented in function <code><a href="#topic+qflag">qflag</a></code>
</p>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lipset)
results &lt;- qmethod(lipset[[1]], nfactors = 3, rotation = "varimax")
loa.and.flags(results)
</code></pre>

<hr>
<h2 id='make.cards'>Q methodology: produce printable cards for Q study with ID and full item wording</h2><span id='topic+make.cards'></span>

<h3>Description</h3>

<p>Creates cards for administering a Q study.
Full item wordings are printed on the front of business cards and item IDs on the back.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make.cards(
  	 q.set,
    study.language = NULL,
    paper.format = "AveryZweckformC32010.Rnw",
    output.pdf = TRUE,
    manual.lookup = NULL,
    wording.font.size = NULL,
    file.name = "QCards",
    babel.language = NULL
    )
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make.cards_+3A_q.set">q.set</code></td>
<td>

<p>A matrix with handles as row names (&quot;<code>q-is-great</code>&quot;, for example), languages (if applicable) in columns, as produced by <code><a href="#topic+build.q.set">build.q.set</a></code>.
</p>
</td></tr>
<tr><td><code id="make.cards_+3A_study.language">study.language</code></td>
<td>

<p>A character vector of length 1.
Must be one of the languages from the column names in the specified <code>q.set</code> (which will be the same as the respective Q concourse object).
Defaults to <code>NULL</code>, in which case the first column from <code>q.set</code> is selected.
</p>
</td></tr>
<tr><td><code id="make.cards_+3A_paper.format">paper.format</code></td>
<td>

<p>A character vector of length 1, choosing among available templates of business card sheets.
Defaults to the only currently available <code>"AveryZweckformC32010.Rnw"</code>.
Must include file extension of template.
</p>
</td></tr>
<tr><td><code id="make.cards_+3A_output.pdf">output.pdf</code></td>
<td>

<p>Logical.
If <code>TRUE</code>, function invokes <code>knit2pdf</code> to create a PDF in the workspace.
If <code>FALSE</code>, function invokes <code>knit</code> to return only a *.TEX in the workspace, may be preferable if no <a href="https://www.latex-project.org/">LaTeX</a> installation is available on the used computer.
Defaults to <code>TRUE</code>.
</p>
</td></tr>
<tr><td><code id="make.cards_+3A_manual.lookup">manual.lookup</code></td>
<td>

<p>A matrix with handles (same as in <code><a href="#topic+build.q.set">build.q.set</a></code>, <code><a href="#topic+import.q.concourse">import.q.concourse</a></code>) as row names, and arbitrary, unique identifying strings in any of the columns as also expected in <code><a href="#topic+import.q.sorts">import.q.sorts</a></code> and <code><a href="#topic+import.q.feedback">import.q.feedback</a></code>.
Defaults to <code>NULL</code> in which case items are automatically identified by full item hashes, as also detected by <code><a href="#topic+import.q.sorts">import.q.sorts</a></code> and <code><a href="#topic+import.q.feedback">import.q.feedback</a></code>.
</p>
</td></tr>
<tr><td><code id="make.cards_+3A_wording.font.size">wording.font.size</code></td>
<td>

<p>A character vector of length 1 to set the font size of the full item wording on the cards.
Defaults to <code>NULL</code> in which case the default font size 12pt is used.
Only <a href="https://en.wikibooks.org/wiki/LaTeX/Fonts#Sizing_text">standard LaTeX font sizes</a> are allowed, from <code>\tiny</code> to <code>\Huge</code>.
</p>
</td></tr>
<tr><td><code id="make.cards_+3A_file.name">file.name</code></td>
<td>

<p>A character vector of length 1 to set the output file path relative to the working directory <em>without file extension</em>.
Defaults to <code>QCards</code>.
</p>
</td></tr>
<tr><td><code id="make.cards_+3A_babel.language">babel.language</code></td>
<td>

<p>A character vector of length 1 to set the babel language for appropriate hyphenation, special letters and other international support as provided by the <a href="https://www.ctan.org/pkg/babel/">babel LaTeX package</a>.
Only available babel options are permissible.
Defaults to <code>NULL</code>, in which case babel is never called.
Changing <code>babel.language</code> between function calls can occasionally leave inconsistent LaTeX temp files, which may trip up compilation.
Please re-run the function once again or clean up temp files (in the working directory) in that case.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Preparing cards with full items and IDs quickly becomes cumbersome if a study is done several times or if items change frequently.
Participants require well-printed, well-designed cards for their sorting task, ideally on heavier paper.
Cards should include shorthand, unique identifiers to simplify later data entry.
</p>
<p>This function prepares a properly typeset *.PDF (or *.TEX source), where items are printed on readily-available business card templates, from which individual cards can be easily broken out.
</p>
<p>The function prints the full item wording on the <em>right</em> column of any page, and the identifier (ID) on the <em>left</em> column.
If templates are duplex printed with the same page on the front and back, and in proper orientation, the front of each card includes the full wording, and the back its unique identifier (ID).
</p>
<p>Identifiers (ID) entered manually or automatically hashed from full wordings are also expected in the import functions <code><a href="#topic+import.q.sorts">import.q.sorts</a></code> and <code><a href="#topic+import.q.feedback">import.q.feedback</a></code>.
The automatic summary of full item wordings, technically known as <em>hashing</em>, proceeds internally by passing the full item wording to the <code><a href="digest.html#topic+digest">digest</a></code> function of the package <span class="pkg">digest</span> (with arguments set to 
</p>
<p><code>algo = crc32, serialize = FALSE</code>.)
</p>
<p>The function proceeds internally by preparing a dataframe with full item wordings and identifiers (ID), and then invokes a prepared <code>*.RNW</code> template included with this package, which in turn includes a <span class="pkg">knitr</span> chunk, which in turn calls <span class="pkg">xtable</span> to return a neatly layed-out multi-page table.
</p>
<p>If you are not familiar with the terminology of item <em>handle</em>, <em>ID</em> and <em>wording</em> or the file structure expected for import functions, please read the respective sections in the documentation for <a href="#topic+qmethod-package">qmethod-package</a> first or consider the package <a href="http://aiorazabala.github.io/qmethod/Data-management">website</a>.
</p>


<h3>Value</h3>

<p>Writes a *.PDF file or its source *.TEX file to the working directory ready for printout.
</p>


<h3>Note</h3>

<p>Hashed identification has not been widely tested in Q studies and should be used with great care and only for extra convenience.
When using hash identification, researchers should be careful to record the precise item wordings at the time of hashing for the printed Q-cards, preferably with a version control system.
Researchers should also record the complete Q-sorts of participants in an <em>unhashed</em> form, such as a picture of the completed sort in full wordings, in case problems with the hashing arise.
</p>
<p>When <code>output.pdf = TRUE</code>, the function will sometimes fail with the error message<br /> <code>"Running 'texi2dvi' on ... failed"</code>.
This is not a bug with the function, but simply indicates that the path to pdflatex is not available in the current R environment.
To fix this issue, compile the resulting *.TEX manually, use RStudio or try <a href="https://www.r-bloggers.com/2012/12/building-r-packages-missing-path-to-pdflatex/">this fix</a>.
</p>
<p>This function does <em>not</em> automatically scale the font size to fit the given card size.
Instead, users will have to proceed by trial and error, using a <code>wording.font.size</code> that works for their longest item.
The default value should work for most Q items.
</p>
<p>This function currently only works for Avery Zweckform C32010 templates, designed in<br /> <code>/cardtemplates/AveryZweckformC32010.Rnw</code>.
If you would like support for other templates, check out / chip in here: <a href="https://github.com/aiorazabala/qmethod/issues/34">https://github.com/aiorazabala/qmethod/issues/34</a>.
</p>


<h3>Author(s)</h3>

<p>Maximilian Held</p>


<h3>See Also</h3>

<p><code><a href="#topic+build.q.set">build.q.set</a></code>,
<code><a href="#topic+import.q.feedback">import.q.feedback</a></code>,
<code><a href="#topic+import.q.sorts">import.q.sorts</a></code>,
<code><a href="#topic+import.q.concourse">import.q.concourse</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Make cards from importexample
data(importexample)
# use your own output file name or leave NULL for `file.name`
# tempfile() is used here to avoid leaving files behind example code runs
make.cards(importexample$q.set, output.pdf = FALSE, file.name = tempfile())
</code></pre>

<hr>
<h2 id='make.distribution'>Q methodology: create Q normal distribution</h2><span id='topic+make.distribution'></span>

<h3>Description</h3>

<p>Creates a distribution close to a standard normal distribution given a number of statements and a maximum Q sort rank.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  make.distribution(
  	nstat,
  	max.bin = 5
  )
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make.distribution_+3A_nstat">nstat</code></td>
<td>

<p>Number of desired statements in a Q sample for a given study.
Must be a positive integer, vector of length 1.
</p>
</td></tr>
<tr><td><code id="make.distribution_+3A_max.bin">max.bin</code></td>
<td>

<p>Maximum positive value to be entered by participants.
Must be a positive integer, vector of length 1.
Defaults to frequent value <code>5</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Participants in Q studies are frequently asked to sort Q items under a quasi-normal distribution.
This function generates such a Q distribution, given a number of statements <code>nstat</code> and a desired maximum positive value <code>max.bin</code> in the Q distribution.
</p>
<p>The function always returns an <em>uneven</em> number of columns, ensuring that there is always a modal column at the zero mark.
</p>
<p>Not every combination of <code>nstat</code> and <code>max.bin</code> can be neatly fit under a standard normal distribution, in which case the function returns a vector of unequal length to the specified <code>nstat</code>.
The function will issue a warning in that case.
Researchers can either accept the different <code>nstat</code>, or try again with a different <code>max.bin</code>.
</p>


<h3>Value</h3>

<p>Returns a vector of positive integers (column heights), of the length <code>max.column * 2 + 1</code>.
An object of this kind is expected in <code><a href="#topic+import.q.sorts">import.q.sorts</a></code>, <code><a href="#topic+build.q.set">build.q.set</a></code> and other convenience functions.
</p>


<h3>Author(s)</h3>

<p>Maximilian Held</p>


<h3>See Also</h3>

<p><code><a href="#topic+build.q.set">build.q.set</a></code>,
<code><a href="#topic+import.q.sorts">import.q.sorts</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  ## Make Q distribution
  make.distribution(nstat=76, max.bin=7)
</code></pre>

<hr>
<h2 id='plot.QmethodRes'>Q Method: plot for statement z-scores</h2><span id='topic+plot.QmethodRes'></span>

<h3>Description</h3>

<p>Takes an object of class <code>QmethodRes</code> resulting from <code><a href="#topic+qmethod">qmethod</a></code> and makes a dot-chart with the z-scores for statements and all factors.</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'QmethodRes'
plot(x, xlab = 'z-scores', ylab = 'statements', 
     pchlist = NULL, colours = NULL, 
     fnames = NULL, legend = TRUE,
     dist = TRUE, pchlist.fill = NULL,
     leg.pos="bottomright", xlim= NULL, 
     sort.items=T, factors = NULL,
     ...)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.QmethodRes_+3A_x">x</code></td>
<td>
<p>results object returned by <code><a href="#topic+qmethod">qmethod</a></code>.</p>
</td></tr>
<tr><td><code id="plot.QmethodRes_+3A_xlab">xlab</code></td>
<td>
<p>label for x axis. Defaults to 'z-scores'.</p>
</td></tr>
<tr><td><code id="plot.QmethodRes_+3A_ylab">ylab</code></td>
<td>
<p>label for y axis. Defaults to 'statements'.</p>
</td></tr>
<tr><td><code id="plot.QmethodRes_+3A_pchlist">pchlist</code></td>
<td>
<p>array of <code>pch</code> symbols to be used in plotting the points for each factor. Defaults to a pre-defined set of symbols.</p>
</td></tr>
<tr><td><code id="plot.QmethodRes_+3A_colours">colours</code></td>
<td>
<p>array of colours to be used when plotting the points for each perspective. Defaults to a pre-defined set of colours based on the <code><a href="grDevices.html#topic+rainbow">rainbow</a></code> palette.</p>
</td></tr>
<tr><td><code id="plot.QmethodRes_+3A_fnames">fnames</code></td>
<td>
<p>names for factors to be used in the legend. In results where factor names have not been changed (using, e.g. <code><a href="#topic+q.fnames">q.fnames</a></code>) it defaults to <code>'Factor 1'</code>, <code>'Factor 2'</code>, etc.</p>
</td></tr>
<tr><td><code id="plot.QmethodRes_+3A_legend">legend</code></td>
<td>
<p>logical; if <code>FALSE</code>, no <code>legend</code> will be drawn.</p>
</td></tr>
<tr><td><code id="plot.QmethodRes_+3A_dist">dist</code></td>
<td>
<p>Logical. Should distinguishing statements be indicated in the plot dots? If <code>TRUE</code>, then the z-score values that are distinguishing for a given statement and factor are represented with a different (filled) symbol.</p>
</td></tr>
<tr><td><code id="plot.QmethodRes_+3A_pchlist.fill">pchlist.fill</code></td>
<td>
<p>List of symbols to indicate distinguishing statements. By default, this is set to <code>NULL</code>, which provides a set of symbols that coincides with those in <code>pchlist</code>, but filled.</p>
</td></tr>
<tr><td><code id="plot.QmethodRes_+3A_leg.pos">leg.pos</code></td>
<td>
<p>Position of the legend.</p>
</td></tr>
<tr><td><code id="plot.QmethodRes_+3A_xlim">xlim</code></td>
<td>
<p>Limits for the x axis, given as a vector of two numbers. If this is not provided, the limits are calculated from the sample.</p>
</td></tr>
<tr><td><code id="plot.QmethodRes_+3A_sort.items">sort.items</code></td>
<td>
<p>Whether and how the items are sorted in the vertical axis. Defaults to <code>TRUE</code>, which sorts the items according to the standard deviation of their z-scores for all factors; items of most disagreement are placed at the top. To invert this order (items of most disagreement at the bottom), set this argument to &quot;consensus.top&quot; A value of <code>FALSE</code> will not sort the items, and these are displayed in the same order as in the raw data. A numerical vector can also be provided in order to sort the statements manually: the vector needs to have the same length as the number of items, and provides the order in which the items are to be ordered.</p>
</td></tr>
<tr><td><code id="plot.QmethodRes_+3A_factors">factors</code></td>
<td>
<p>The factors to plot. Defaults to <code>NULL</code>, which plots all the factors in the object <code>x</code> in the order given. To print a subset of these factors or to print them in a different order, provide a numeric vector here with the factors and the order desired, e.g. <code>c(2,1)</code></p>
</td></tr></table>
<p>.
</p>
<table role = "presentation">
<tr><td><code id="plot.QmethodRes_+3A_...">...</code></td>
<td>
<p>other arguments for <code><a href="graphics.html#topic+plot">plot</a></code>.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>The names of items to be plotted are taken from the matrix <code>x$zsc</code>.
</p>
<p>To change these names, change the row names in that matrix first, e.g.:
<code>rownames(x$zsc) &lt;- vector.of.item.names</code>.
</p>
<p>If the margin width is not enough to read the items, specify <code>par(mai=...)</code> first. See <code><a href="graphics.html#topic+par">par</a></code> for details.
</p>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>This specific dotchart visualisation of Q results implemented in <code><a href="#topic+plot.QmethodRes">plot.QmethodRes</a></code> was first developed and introduced in this R package, in preparation for the study published in <a href="https://www.sciencedirect.com/science/article/abs/pii/S0921800916302683">Zabala et al. (2017)</a>.
</p>

<ul>
<li><p> Zabala, A., 2014. qmethod: A Package to Explore Human Perspectives Using Q Methodology. <em>The R Journal</em>, 6(2):163-173.<br /> Available from: <a href="https://journal.r-project.org/archive/2014-2/zabala.pdf">https://journal.r-project.org/archive/2014-2/zabala.pdf</a>.
</p>
</li>
<li><p> Zabala, A., Pascual, U. and Garcia-Barrios, L. 2017. Payments for Pioneers? Revisiting the Role of External Rewards for Sustainable Innovation under Heterogeneous Motivations. <em>Ecological Economics</em>, 135:234-245.<br /> Available from: <a href="https://www.sciencedirect.com/science/article/pii/S0921800916302683/">https://www.sciencedirect.com/science/article/pii/S0921800916302683/</a>.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="graphics.html#topic+dotchart">dotchart</a></code> and <code><a href="graphics.html#topic+points">points</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lipset)
results &lt;- qmethod(lipset[[1]], nfactors = 3, rotation = "varimax")
title &lt;- "Q method z-scores, lipset dataset"
subtitle &lt;- paste0("Three factors, PCA, varimax. Printed on ",
                  Sys.Date())
plot(results, main = title, sub = subtitle)

# Order the items in a different way
plot(results, main = title, sub = subtitle, 
     sort.items = c(rev(1:nrow(results$zsc))))
</code></pre>

<hr>
<h2 id='print.QmethodRes'>Q Method: print method for results</h2><span id='topic+print.QmethodRes'></span>

<h3>Description</h3>

<p>Takes an object <code>QmethodRes</code> resulting from <code><a href="#topic+qmethod">qmethod</a></code> and prints it in a synthetic way.</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'QmethodRes'
print(x, length = 10, digits = 2, ...)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.QmethodRes_+3A_x">x</code></td>
<td>
<p>an object of class <code>QmethodRes</code>.</p>
</td></tr>
<tr><td><code id="print.QmethodRes_+3A_length">length</code></td>
<td>
<p>maximum number of rows to print from the data frames within <code>QmethodRes</code>. Defaults to 10. Set to <code>NULL</code> to see the full results.</p>
</td></tr>
<tr><td><code id="print.QmethodRes_+3A_digits">digits</code></td>
<td>
<p>minimum number of significant digits, see <code><a href="base.html#topic+print.default">print.default</a>.</code></p>
</td></tr>
<tr><td><code id="print.QmethodRes_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lipset)
results &lt;- qmethod(lipset[[1]], nfactors = 3, rotation = "varimax")
print(results, length = 5, digits = 1)
</code></pre>

<hr>
<h2 id='q.fnames'>Change factor names in the results of Q methodology analysis</h2><span id='topic+q.fnames'></span>

<h3>Description</h3>

<p>This function replaces the automatic names created in an object of Q method results returned by <code><a href="#topic+qmethod">qmethod</a></code>.</p>


<h3>Usage</h3>

<pre><code class='language-R'>q.fnames(results, fnames)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="q.fnames_+3A_results">results</code></td>
<td>
<p>an object of class <code>QmethodRes</code>.</p>
</td></tr>
<tr><td><code id="q.fnames_+3A_fnames">fnames</code></td>
<td>
<p>a vector with the names of the factors. The number of names provided has to match the number of factors extracted in the object <code>results</code>. The names cannot begin with a number. A limit of 50 characters is set, to avoid excessively wide columns. Names should ideally contain no spaces or symbols that are used for other purposes in R (e.g. '-', '+', '/' , ). However '.' are fine.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the object <code>results</code> of class <code>QmethodRes</code>, with the new factor names.
</p>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>See Also</h3>

<p><code><a href="#topic+qmethod">qmethod</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lipset)
results &lt;- qmethod(lipset[[1]], nfactors = 3, rotation = "varimax")
factor.names &lt;- c("good", "bad", "ugly") 
results.renamed &lt;- q.fnames(results, fnames = factor.names)
results.renamed #shows all results
</code></pre>

<hr>
<h2 id='qbstep'>Q Methodology: Single step for the bootstrap</h2><span id='topic+qbstep'></span>

<h3>Description</h3>

<p>Bootstraping of Q methodology using PCA.</p>


<h3>Usage</h3>

<pre><code class='language-R'>qbstep(subdata, subtarget, indet, 
       nfactors, nqsorts, nstat, 
       qmts = qmts, qmts_log = qmts_log, 
       rotation = "unknown", 
       flagged = flagged, cor.method="pearson", ...)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qbstep_+3A_subdata">subdata</code></td>
<td>
<p>resampled dataset of Q-sorts.</p>
</td></tr>
<tr><td><code id="qbstep_+3A_subtarget">subtarget</code></td>
<td>
<p>target matrix, adapted to match the rows of the resampled dataset.</p>
</td></tr>
<tr><td><code id="qbstep_+3A_indet">indet</code></td>
<td>
<p>method to solve the double indeterminacy issue when bootstrapping Principal Components Analysis (PCA). <code>"procrustes"</code> for procrustes rotation from <span class="pkg">MCMCpack</span>, <code>"qindtest"</code> for simple solution valid for at least up to 3 factors extracted (see references), <code>"both"</code> for a <em><code>"qindtest"</code></em> and a <em><code>"procrustes"</code></em> rotation, or <code>"none"</code> for no solution. The latter is not recommended because it introduces inflated variability. If <code>"none"</code> is selected, each replication is rotated using the method set in <code>rotation</code>.</p>
</td></tr>
<tr><td><code id="qbstep_+3A_nfactors">nfactors</code></td>
<td>
<p>number of factors in the study.</p>
</td></tr>
<tr><td><code id="qbstep_+3A_nqsorts">nqsorts</code></td>
<td>
<p>number of Q-sorts in the study.</p>
</td></tr>
<tr><td><code id="qbstep_+3A_nstat">nstat</code></td>
<td>
<p>number of statements in the study.</p>
</td></tr>
<tr><td><code id="qbstep_+3A_qmts">qmts</code></td>
<td>
<p>data frame with two rows and at least one column. This is automatically created when this function is called from <code><a href="#topic+qmboots">qmboots</a></code>(see <em>Note</em> below).</p>
</td></tr>
<tr><td><code id="qbstep_+3A_qmts_log">qmts_log</code></td>
<td>
<p>data frame with two rows and at least one column. This is automatically created when this function is called from <code><a href="#topic+qmboots">qmboots</a></code>(see <em>Note</em> below).</p>
</td></tr>
<tr><td><code id="qbstep_+3A_rotation">rotation</code></td>
<td>
<p>rotation method, defaults to <code>"none"</code>.</p>
</td></tr>
<tr><td><code id="qbstep_+3A_flagged">flagged</code></td>
<td>
<p>matrix or data frame of <code>nqsorts</code> rows and <code>nfactors</code> columns, with <code>TRUE</code> values for the Q-sorts that are flagged. Automatic flagging can be aplied using <code><a href="#topic+qflag">qflag</a></code>. Manual flagging can be done by providing a logical matrix with <code>nqsorts</code> rows and <code>nfactors</code> columns to the argument <code>flagged</code>.</p>
</td></tr>
<tr><td><code id="qbstep_+3A_cor.method">cor.method</code></td>
<td>
<p>character string indicating which correlation coefficient is to be computed, to be passed on to the function <code><a href="stats.html#topic+cor">cor</a></code>: <code>"pearson"</code> (default), <code>"kendall"</code>, or <code>"spearman"</code>. </p>
</td></tr>
<tr><td><code id="qbstep_+3A_...">...</code></td>
<td>
<p>other arguments to be passed on to <code><a href="#topic+qzscores">qzscores</a></code> or to <code><a href="psych.html#topic+principal">principal</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function performs a single step within a bootstrap of Q methodology data. It takes one resample, performs the Q method analysis, checks for indeterminacy issues, and corrects them if necessary by calling the function <code><a href="#topic+qindtest">qindtest</a></code> or <code><a href="#topic+qpcrustes">qpcrustes</a></code>.
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>step_res</code></td>
<td>
<p>summary of the analysis.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>This function is called within the function <code><a href="#topic+qmboots">qmboots</a></code>. Not intended to be used separately.</p>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>Zabala, Pascual (2016) Bootstrapping Q Methodology to Improve the Understanding of Human Perspectives. PLoS ONE 11(2): e0148087.</p>


<h3>See Also</h3>

<p><code><a href="#topic+qmethod">qmethod</a></code> and <code><a href="#topic+qmboots">qmboots</a></code> in this package.
</p>

<hr>
<h2 id='qdc'>Q methodology: distinguishing and consensus statements</h2><span id='topic+qdc'></span>

<h3>Description</h3>

<p>Indicates the distinguishing and consensus statements. It does so by comparing the z-scores between each pair factors.</p>


<h3>Usage</h3>

<pre><code class='language-R'>qdc(dataset, nfactors, zsc, sed)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qdc_+3A_dataset">dataset</code></td>
<td>
<p>a matrix or a dataframe containing original data, with statements as rows, Q sorts as columns, and grid column values in each cell.</p>
</td></tr>
<tr><td><code id="qdc_+3A_nfactors">nfactors</code></td>
<td>
<p>number of factors extracted.</p>
</td></tr>
<tr><td><code id="qdc_+3A_zsc">zsc</code></td>
<td>
<p>a matrix or a dataframe with the factor z-scores for statements resulting from <code><a href="#topic+qzscores">qzscores</a></code>.</p>
</td></tr>
<tr><td><code id="qdc_+3A_sed">sed</code></td>
<td>
<p>a matrix or a dataframe with the standard error of differences resulting from <code><a href="#topic+qfcharact">qfcharact</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Finds the distinguishing and consensus statements, based on the absolute differences between factor z-scores being larger than the standard error of differences (SED, calculated in <code><a href="#topic+qfcharact">qfcharact</a></code>) for a given pair of factors.
</p>
<p>Returns a single data frame with the differences in z-scores between each pair of factors and the variable <code>dist.and.cons</code>, indicating whether each statement is distinguishing or consensus and for which factor(s) it is distinguishing. These are the possible categories in the <code>dist.and.cons</code> variable:
</p>

<ul>
<li><p> Where all the comparisons between each pair of factors are significantly different at p-value &lt; .05 the statement is labelled as <code>"Distinguishes all"</code>.
</p>
</li>
<li><p> Where the comparisons of a given factor with all other factors are significant at p-value &lt; .05, and comparisons between all other factors are not significant, the statement is labeled as <code>"Distinguishes f*"</code>.
</p>
</li>
<li><p> Where none of the comparisons are significantly different, the statement is labeled as <code>"Consensus"</code>.
</p>
</li>
<li><p> Statements that have category <code>""</code> (empty) are not distinguishing for any of the factors in particularly. They distinguish one or more pairs of factors and the star indications may be inspected to understand their role.
</p>
</li></ul>

<p>Significant differences at p-values:
</p>

<ul>
<li> <p>p &gt;= 0.05 &lt;- <code>""</code> (i.e. nothing)
</p>
</li>
<li> <p>p &lt; 0.05 &lt;- <code>"*"</code>
</p>
</li>
<li> <p>p &lt; 0.01 &lt;- <code>"**"</code>
</p>
</li>
<li> <p>p &lt; 0.001 &lt;- <code>"***"</code>
</p>
</li>
<li> <p>p &lt; 0.000001 &lt;- <code>"6*"</code>
</p>
</li></ul>



<h3>Note</h3>

<p>This is a function used within <code><a href="#topic+qmethod">qmethod</a></code>. Rarely to be used independently.</p>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>Brown, S. R., 1980 <em>Political subjectivity: Applications of Q methodology in political science</em>, New Haven, CT: Yale University Press.
</p>
<p>See further references on the methodology in <code><a href="#topic+qmethod-package">qmethod-package</a></code>.</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lipset)
results &lt;- qmethod(lipset[[1]], nfactors = 3, rotation = "varimax")
sed &lt;- as.data.frame(results[[7]][[3]])
zsc &lt;- results[[5]]
qdc(lipset[[1]], nfactors = 3, zsc = zsc, sed = sed)
</code></pre>

<hr>
<h2 id='qdc.zsc'>Q methodology: distinguishing and consensus statements</h2><span id='topic+qdc.zsc'></span>

<h3>Description</h3>

<p>Extracts the z-score of distinguishing statements, in order to plot.</p>


<h3>Usage</h3>

<pre><code class='language-R'>qdc.zsc(results)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qdc.zsc_+3A_results">results</code></td>
<td>
<p>an object of class <code>QmethodRes</code>.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>This is a function used within <code><a href="#topic+plot.QmethodRes">plot.QmethodRes</a></code>. Rarely to be used independently.</p>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lipset)
results &lt;- qmethod(lipset[[1]], nfactors = 3, rotation = "varimax")
qdc.zsc(results)
</code></pre>

<hr>
<h2 id='qfcharact'>Q methodology: factor characteristics</h2><span id='topic+qfcharact'></span>

<h3>Description</h3>

<p>Calculates the general factor characteristics: number of flagged Q-sorts, composite reliability, standard errors of factor scores, and comparisons between factors.</p>


<h3>Usage</h3>

<pre><code class='language-R'>qfcharact(loa, flagged, zsc, nfactors, av_rel_coef = 0.8)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qfcharact_+3A_loa">loa</code></td>
<td>
<p>matrix or data frame of as many rows as Q-sorts (<code>nqsorts</code>) and <code>nfactors</code> columns, with values of factor loadings for Q-sorts, calculated using, e.g., <code>principal(...)$loadings</code>.</p>
</td></tr>
<tr><td><code id="qfcharact_+3A_flagged">flagged</code></td>
<td>
<p>matrix or data frame of type <em>logical</em>, indicating which Q-sorts are flagged for each factor. Provided manually or automatically using <code><a href="#topic+qflag">qflag</a></code>.</p>
</td></tr>
<tr><td><code id="qfcharact_+3A_zsc">zsc</code></td>
<td>
<p>a data frame with the z-scores for statements, calculated using <code><a href="#topic+qzscores">qzscores</a></code>.</p>
</td></tr>
<tr><td><code id="qfcharact_+3A_nfactors">nfactors</code></td>
<td>
<p>number of factors extracted.</p>
</td></tr>
<tr><td><code id="qfcharact_+3A_av_rel_coef">av_rel_coef</code></td>
<td>
<p>average reliability coefficient (the individual variability of a respondent), set by default as 0.8.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list with three objects:
</p>
<table role = "presentation">
<tr><td><code>characteristics</code></td>
<td>
<p>data frame with the following values for each factor:
</p>

<ul>
<li><p><code>"av_rel_coef"</code>: average reliability coefficient.
</p>
</li>
<li><p><code>"nload"</code>: number of loading Q-sorts.
</p>
</li>
<li><p><code>"eigenvals"</code>: eigenvalues.
</p>
</li>
<li><p><code>"expl_var"</code>: percentage of explained variance.
</p>
</li>
<li><p><code>"reliability"</code>: composite reliability.
</p>
</li>
<li><p><code>"se_fscores"</code>: standard error of factor scores (SE).
</p>
</li></ul>

</td></tr>
<tr><td><code>cor_zsc</code></td>
<td>
<p>matrix of correlation coefficients between factors z-scores.</p>
</td></tr>
<tr><td><code>sd_dif</code></td>
<td>
<p>matrix of standard errors of differences (SED).</p>
</td></tr>
</table>


<h3>Note</h3>

<p>This is a function used within <code><a href="#topic+qzscores">qzscores</a></code>. Rarely to be used independently.</p>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>Brown, S. R., 1980 <em>Political subjectivity: Applications of Q methodology in political science</em>, New Haven, CT: Yale University Press.
</p>
<p>See further references on the methodology in <code><a href="#topic+qmethod-package">qmethod-package</a></code>.</p>

<hr>
<h2 id='qflag'>Q methodology: automatic flagging of Q-sorts</h2><span id='topic+qflag'></span>

<h3>Description</h3>

<p>Applies the two standard algorithms to pre-flag Q-sorts automatically, for posterior calculation of the statement scores.</p>


<h3>Usage</h3>

<pre><code class='language-R'>qflag(loa, nstat)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qflag_+3A_loa">loa</code></td>
<td>
<p>a Q-sort factor loading matrix obtained, for example from<br /> <code>unclass(<a href="psych.html#topic+principal">principal</a>(...)$loadings)</code>, or from <code><a href="#topic+qmethod">qmethod</a>(...)$loa</code>.</p>
</td></tr>
<tr><td><code id="qflag_+3A_nstat">nstat</code></td>
<td>
<p>number of statements in the study.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These are the two standard criteria for automatic flagging used in Q method analysis:
</p>

<ol>
<li><p>Q-sorts which factor loading is higher than the threshold for p-value &lt; 0.05, and
</p>
</li>
<li><p>Q-sorts which square loading is higher than the sum of square loadings of the same Q-sort in all other factors.
</p>
</li></ol>

<p>Returns a logical matrix with Q-sorts as rows, and factors as columns.
</p>
<p>The function also runs two checks: Q-sorts flagged that have negative loadings and Q-sorts flagged in more than one factor. If any of these is true, the function returns a warning for the user to inspect the automatic pre-flagging (which should be done in all cases, but particularly in these ones). To conduct manual flagging, see guidelines here: <a href="http://aiorazabala.github.io/qmethod/Advanced-analysis">http://aiorazabala.github.io/qmethod/Advanced-analysis</a>
</p>


<h3>Note</h3>

<p>This is a function used within <code><a href="#topic+qmethod">qmethod</a></code>. Rarely to be used independently.</p>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>Brown, S. R., 1980 <em>Political subjectivity: Applications of Q methodology in political science</em>, New Haven, CT: Yale University Press.
</p>
<p>Van Exel, J., de Graaf, G., Rietveld, P., 2011. &quot;'I can do perfectly well without a car!'&quot; <em>Transportation</em> 38, 383-407 (Page 388, footnote 8).
</p>
<p>See further references on the methodology in <code><a href="#topic+qmethod-package">qmethod-package</a></code>.</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lipset)
library(psych)
loa &lt;- unclass(principal(lipset[[1]], nfactors = 3,
               rotate = "varimax")$loadings)
flagged &lt;- qflag(loa = loa, nstat = nrow(lipset[[1]]))
summary(flagged)

# Remember to manually inspect the automatic pre-flagging:
results=list(loa=loa, flagged=flagged, brief=list(nfactors = ncol(loa)))
loa.and.flags(results)

</code></pre>

<hr>
<h2 id='qfsi'>Q Methodology: Factor Stability index</h2><span id='topic+qfsi'></span>

<h3>Description</h3>

<p>Calculates a Factor Stability index and a Normalised Factor Stability index to bootstrapped Q method results (experimental).</p>


<h3>Usage</h3>

<pre><code class='language-R'>qfsi(nfactors, nstat, qscores, zsc_bn, qm)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qfsi_+3A_nfactors">nfactors</code></td>
<td>
<p>number of factors to extract.</p>
</td></tr>
<tr><td><code id="qfsi_+3A_nstat">nstat</code></td>
<td>
<p>number of statements in the study.</p>
</td></tr>
<tr><td><code id="qfsi_+3A_qscores">qscores</code></td>
<td>
<p>all possible factor score values in the Q grid distribution.</p>
</td></tr>
<tr><td><code id="qfsi_+3A_zsc_bn">zsc_bn</code></td>
<td>
<p>bootstrapped factor scores.</p>
</td></tr>
<tr><td><code id="qfsi_+3A_qm">qm</code></td>
<td>
<p>original Q method results from <code><a href="#topic+qmethod">qmethod</a></code> function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Applies the Factor Stability index to a bootstrapped Q method results. Returns a data frame with two variables and as many rows as factors extracted. The first variable is the raw Factor Stability index. The second variable is the Normalised Factor Stability index which ranges from 0 to 1.
</p>


<h3>Note</h3>

<p>IMPORTANT: This function is experimental. Please contact the author for details.</p>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>See Also</h3>

<p><code><a href="#topic+qmboots">qmboots</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lipset)
boots &lt;- qmboots(lipset[[1]], nfactors=3, nsteps=10, 
           rotation="varimax", indet="qindtest",
           fsi=FALSE)
fsi &lt;- qfsi(nfactors=3, nstat=33, qscores=boots[[6]], 
           zsc_bn=boots[[1]][[1]], qm=boots[[5]])
fsi
</code></pre>

<hr>
<h2 id='qindtest'>Q Methodology: PCA bootstrap indeterminacy tests</h2><span id='topic+qindtest'></span>

<h3>Description</h3>

<p>This is a simple test and implementation of the 'reordering-reflection' solution for the indeterminacy problem (alignment problem) when bootstrapping Principal Components Analysis (PCA) that causes factor order swaps and factor sign swaps.</p>


<h3>Usage</h3>

<pre><code class='language-R'>qindtest(loa, target, nfactors)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qindtest_+3A_loa">loa</code></td>
<td>
<p>data frame with factor loadings from the subsample analysis.</p>
</td></tr>
<tr><td><code id="qindtest_+3A_target">target</code></td>
<td>
<p>data frame with factor loadings from the full sample analysis, excluding qsorts that are not present in the bootstrap step.</p>
</td></tr>
<tr><td><code id="qindtest_+3A_nfactors">nfactors</code></td>
<td>
<p>number of factors extracted.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function tests whether there is any or both of the indeterminacy issues in bootstrapped PCA factor loading values. For testing, it looks at correlation coefficients between the target factor loadings and the bootstrapped factor loadings for each factor.
</p>
<p>First, if <em>factor swap</em> is detected (Is the absolute value of diagonal coefficients bigger than non-diagonal coefficients for the same factor?) and it is only between two factors, these are swaped. After, the test is again performed to ensure that there is no need for further swaps. If the test fails, then the original factor loadings are recovered and the failure is reported. If the need for factor swap is detected for 1, 3 or more factors, this is reported and left unresolved. This is because an algorithm to determine which factors should swap with which has not been implemented.
</p>
<p>Second, <em>sign swap</em> is tested for (Are all diagonal coefficients positive?). If it is detected, then the sign of factor loadings is shifted. This is not tested again afterwards, for it is given for granted that swaping signs will solve the issue.</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>qindtest</code></td>
<td>
<p>returns a list with three data frames: the factor loadings of the corrected bootstrap step, results from order swap and sign swap tests, and report of errors.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>this function is called within the function <code><a href="#topic+qmboots">qmboots</a></code>. Not intended to be used separately.</p>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>Zabala, Pascual (2016) Bootstrapping Q Methodology to Improve the Understanding of Human Perspectives. PLoS ONE 11(2): e0148087.
</p>
<p>See also:
</p>
<p>Timmerman, M.E., Kiers, H. a L., Smilde, A.K., 2007. Estimating confidence intervals for principal component loadings: a comparison between the bootstrap and asymptotic results. The British journal of mathematical and statistical psychology 60, 295-314.
</p>
<p>Zhang, G., Preacher, K.J., Luo, S., 2010. Bootstrap Confidence Intervals for Ordinary Least Squares Factor Loadings and Correlations in Exploratory Factor Analysis. Multivariate Behavioral Research 45, 104-134.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lipset)
nf &lt;- 3

# 1. Create target matrix
qm &lt;- qmethod(lipset[[1]], nfactors = nf, rotation = "varimax")

# 2. Resample
qselim &lt;- sample(1:3, 2, replace = FALSE) ##q sorts to eliminate
subdata &lt;- lipset[[1]][ , -qselim]

# 3. Calculate factor loadings with the resample
library(psych)
loa &lt;- as.data.frame(unclass(principal(subdata, 
           nfactors = nf, rotate = "varimax")$loadings))

# 4. Reorder target matrix 
target &lt;- as.matrix(as.data.frame(qm[3]))
colnames(target) &lt;- paste0("target_f", 1:nf)
subtarget &lt;- target[c(-qselim),]

# 5. Apply test and solution for indeterminacy issue
qindt &lt;- qindtest(loa, subtarget, nf)
qindt
</code></pre>

<hr>
<h2 id='qmb.plot'>Q Methodology: Plot of bootstrap results</h2><span id='topic+qmb.plot'></span>

<h3>Description</h3>

<p>Plots the summary of bootstrap results, either z-scores or factor loadings.</p>


<h3>Usage</h3>

<pre><code class='language-R'>qmb.plot(qmbsum, type = c("zsc", "loa"), nfactors, 
         cex = 0.7, cex.leg = 0.8, errbar.col = "black",
         lwd = 1, lty = 1, vertdist = 0.2, limits = NULL, 
         r.names = NA, sort = c("none", "difference", "sd"),
         sbset = NULL, leg.pos = "topleft", 
         bty = "n", plot.std = TRUE, pch= NULL,
         col=NULL, grid.col="gray", ...)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qmb.plot_+3A_qmbsum">qmbsum</code></td>
<td>
<p>an object with the summary of bootstrap results, as produced by <code><a href="#topic+qmb.summary">qmb.summary</a></code>.</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_type">type</code></td>
<td>
<p>the subject to plot, either z-zcores of statements or factor loadings of Q-sorts.</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_nfactors">nfactors</code></td>
<td>
<p>number of factors extracted.</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_cex">cex</code></td>
<td>
<p>a numerical value giving the amount by which plotting text and symbols should be magnified relative to the default (see <code><a href="graphics.html#topic+par">par</a></code>).)</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_cex.leg">cex.leg</code></td>
<td>
<p>a numerical value giving the amount by which the legend should be magnified relative to <code>cex</code>.)</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_errbar.col">errbar.col</code></td>
<td>
<p>colour used for the error bars. Defaults to <code>"black"</code>.</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_lwd">lwd</code></td>
<td>
<p>line width (see <code><a href="graphics.html#topic+par">par</a></code>).</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_lty">lty</code></td>
<td>
<p>line type (see <code><a href="graphics.html#topic+par">par</a></code>).</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_vertdist">vertdist</code></td>
<td>
<p>distance between the values for each factor.</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_limits">limits</code></td>
<td>
<p>axis limits for the numerical values. If set to <code>NULL</code>, the limits are automatically set as <code>c(-1, 1)</code> when <code>type = "loa"</code>, and as the minimum and maximum values of z-scores (including the error bars) when <code>type = "zsc"</code></p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_r.names">r.names</code></td>
<td>
<p>names of the items to be printed in the axis ticks(either Q-sorts when <code>type = "loa"</code>, or statements when <code>type = "zsc"</code>). When the value is <code>NULL</code>, it defaults to <code>rownames</code>.</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_sort">sort</code></td>
<td>
<p>ordering of the items in the axis. If set to <code>"none"</code>, items are ordered by the default order in the dataset. If set to <code>"difference"</code>, items are ordered according to the variability in the values across factors. If set to <code>"sd"</code>, items are ordered according to the sum of the errors obtained in the bootstrap.</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_sbset">sbset</code></td>
<td>
<p>How many items are to be printed? When the value is <code>NULL</code>, it plots all the items.</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_leg.pos">leg.pos</code></td>
<td>
<p>Position of the legend.</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_bty">bty</code></td>
<td>
<p>Legend box (see <code><a href="graphics.html#topic+legend">legend</a></code>).</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_plot.std">plot.std</code></td>
<td>
<p>logical value. When set to <code>TRUE</code> (default), it prints the points for values obtained with the standard analysis (non bootstrapped).</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_pch">pch</code></td>
<td>
<p>plotting symbols. Defaults to <code>NULL</code>, in which case the symbols are selected automatically. If provided, the vector needs to contain at least as many elements as number of factors. In addition, if argument <code>plot.std == TRUE</code> (default) the vector needs to contain at least double as many elements as vectors, in order to extract (a) the plotting symbols for bootstrapped values (the first elements) and (b) the plotting symbols for standard values (the next elements).</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_col">col</code></td>
<td>
<p>colours for the points. At least as many elements as number of factors have to be provided.</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_grid.col">grid.col</code></td>
<td>
<p>colour of the grid.</p>
</td></tr>
<tr><td><code id="qmb.plot_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to the functions <code><a href="graphics.html#topic+dotchart">dotchart</a></code>, <code><a href="graphics.html#topic+mtext">mtext</a></code>, <code><a href="graphics.html#topic+segments">segments</a></code>, <code><a href="graphics.html#topic+points">points</a></code>, <code><a href="graphics.html#topic+abline">abline</a></code> or <code><a href="graphics.html#topic+legend">legend</a></code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>Zabala, Pascual (2016) Bootstrapping Q Methodology to Improve the Understanding of Human Perspectives. PLoS ONE 11(2): e0148087.</p>


<h3>See Also</h3>

<p><code><a href="#topic+qmethod">qmethod</a></code>, <code><a href="#topic+qmboots">qmboots</a></code>, <code><a href="#topic+qmb.summary">qmb.summary</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lipset)
boots &lt;- qmboots(lipset[[1]], nfactors = 3, nsteps = 50,
                load = "auto", rotation = "varimax", 
                indet = "qindet", fsi = TRUE)
                
boots.summary &lt;- qmb.summary(boots)

qmb.plot(boots.summary, 3, type = "loa", sort="difference")
</code></pre>

<hr>
<h2 id='qmb.summary'>Q Methodology: Summary of bootstrap results</h2><span id='topic+qmb.summary'></span>

<h3>Description</h3>

<p>Summarises bootstrap results for Q-sorts and statements into two tables.</p>


<h3>Usage</h3>

<pre><code class='language-R'>qmb.summary(qmboots)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qmb.summary_+3A_qmboots">qmboots</code></td>
<td>
<p>an object of bootstrap results, as produced by <code><a href="#topic+qmboots">qmboots</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list with two data frames:
</p>
<table role = "presentation">
<tr><td><code>qsorts</code></td>
<td>
<p>data frame with Q-sort as rows, and the following columns: the factor loadings from the standard analysis (*.std), the bootstrap (*.loa), the bootstrap SE (*.SE), the frequency of flagging (*.freq*) and the estimate of bias (*.bias).</p>
</td></tr>
<tr><td><code>statements</code></td>
<td>
<p>data frame with statements as rows, and the following columns: the z-scores from the standard analysis (*.std), from the bootstrap (*.bts), bootstrap SE (*.SE), estimate of bias of z-scores (*.bias), factor scores from the standard analysis (fsc_f*), from the bootstrap (fsc.bts.*), estimate of bias of factor scores, distinguishing and consensus statements from the standard results (see <code><a href="#topic+qdc">qdc</a></code>) and from the bootstrap values.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>Zabala, Pascual (2016) Bootstrapping Q Methodology to Improve the Understanding of Human Perspectives. PLoS ONE 11(2): e0148087.</p>


<h3>See Also</h3>

<p><code><a href="#topic+qmethod">qmethod</a></code>, <code><a href="#topic+qmboots">qmboots</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lipset)
boots &lt;- qmboots(lipset[[1]], nfactors = 3, nsteps = 50, 
                 load = "auto", rotation = "varimax",
                 indet = "qindet", fsi = TRUE)

boots.summary &lt;- qmb.summary(boots)

# First rows of the summary for Q-sorts:
head(boots.summary$qsorts)

# First rows of the summary for statements:
head(boots.summary$statements)
</code></pre>

<hr>
<h2 id='qmboots'>Q Methodology: Bootstrap</h2><span id='topic+qmboots'></span>

<h3>Description</h3>

<p>Implementation of the bootstrap to Q methodology using Principal Components Analysis (PCA).</p>


<h3>Usage</h3>

<pre><code class='language-R'>qmboots(dataset, nfactors, nsteps, load = "auto",
        rotation = "varimax", indet = "qindtest", fsi = TRUE, 
        forced = T, distribution = NULL, 
        cor.method="pearson", ...)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qmboots_+3A_dataset">dataset</code></td>
<td>
<p>a matrix or dataframe containing original data, with statements as rows, Q sorts as columns, and Q board column values in each cell.</p>
</td></tr>
<tr><td><code id="qmboots_+3A_nfactors">nfactors</code></td>
<td>
<p>number of factors to extract using PCA.</p>
</td></tr>
<tr><td><code id="qmboots_+3A_load">load</code></td>
<td>
<p>a matrix of factor loadings to be used as target. If &quot;auto&quot;, the target matrix is generated using the rotation indicated (&quot;varimax&quot; by default).</p>
</td></tr>
<tr><td><code id="qmboots_+3A_nsteps">nsteps</code></td>
<td>
<p>number of steps (repetitions) for the bootstraping.</p>
</td></tr>
<tr><td><code id="qmboots_+3A_rotation">rotation</code></td>
<td>
<p>rotation method, set to &quot;varimax&quot; by default. Other possible rotations from <span class="pkg">psych</span> <code><a href="psych.html#topic+principal">principal</a></code> function &quot;none&quot;, &quot;varimax&quot;, &quot;quatimax&quot;, &quot;promax&quot;, &quot;oblimin&quot;, &quot;simplimax&quot;, and &quot;cluster&quot; are possible.</p>
</td></tr>
<tr><td><code id="qmboots_+3A_indet">indet</code></td>
<td>
<p>method to solve the double indeterminacy issue in PCA bootstrapping. <code>"procrustes"</code> for procrustes rotation, <code>"qindtest"</code> for simple solution valid for up to 3 factors extracted, <code>"both"</code> for a qindtest and a procrustes rotation, or <code>"none"</code> for no rotation. The latter is not recommended for it introduces inflated variability. If <code>"none"</code> is selected, each replication is rotated using varimax.</p>
</td></tr>
<tr><td><code id="qmboots_+3A_fsi">fsi</code></td>
<td>
<p>logical; Shall the Factor Stability index be calculated? (experimental index).</p>
</td></tr>
<tr><td><code id="qmboots_+3A_forced">forced</code></td>
<td>
<p>logical; Is the ranking of the items forced to match the distributions? Set to <code>TRUE</code> if all respondents ranked the items strictly following the distribution scores, in which case the values of the distribution are calculated automatically. Set to <code>FALSE</code> if respondents had the possibility to rank the items without following the distribution, and the values of the distribution have to be provided as an array in the argument <code>distribution</code>.</p>
</td></tr>
<tr><td><code id="qmboots_+3A_distribution">distribution</code></td>
<td>
<p>logical; when forced = <code>FALSE</code>, the distribution has to be provided as a vector of numbers, such as <code>c(-2, -1, -1, 0, 1, 1, 2, 2)</code>.</p>
</td></tr>
<tr><td><code id="qmboots_+3A_cor.method">cor.method</code></td>
<td>
<p>character string indicating which correlation coefficient is to be computed, to be passed on to the function <code><a href="stats.html#topic+cor">cor</a></code>: <code>"pearson"</code> (default), <code>"kendall"</code>, or <code>"spearman"</code>. </p>
</td></tr>
<tr><td><code id="qmboots_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="#topic+qmethod">qmethod</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>zscore-stats</code></td>
<td>
<p>summary of the analysis. List of one object, plus as many objects as factors extracted: the bootstrapped factor scores, and the z-score statistics of the bootrstrap. The z-score statistics of interest are <code>mean</code> (the bootstrap estimate of the z-score), and <code>sd</code> (the bootstrap estimate of the SE).</p>
</td></tr>
<tr><td><code>full.bts.res</code></td>
<td>
<p>full bootstrap results. List with as many objects as factors extracted, each object containing three data frames: <code>flagged</code>, <code>zsc</code> and <code>loa</code>. These data frames have as many columns as bootstrap steps, and contain the results of the analysis of each iteration. See description of these three data frames in <code><a href="#topic+qmethod">qmethod</a></code>.</p>
</td></tr>
<tr><td><code>indet.tests</code></td>
<td>
<p>indeterminacy tests.</p>
</td></tr>
<tr><td><code>resamples</code></td>
<td>
<p>index of the Q-sorts selected for each step.</p>
</td></tr>
<tr><td><code>orig.res</code></td>
<td>
<p>original results. See details of all the objects in <code><a href="#topic+qmethod">qmethod</a></code>.</p>
</td></tr>
<tr><td><code>q.array</code></td>
<td>
<p>array of values in the distribution grid.</p>
</td></tr>
<tr><td><code>loa.stats</code></td>
<td>
<p>statistics of factor loadings. List with as many objects as factors extracted, each object containing one data frame with the factor loading statistics of the bootrstrap. The factor loading statistics of interest are <code>mean</code> (the bootstrap estimate of the factor loading), and <code>sd</code> (the bootstrap estimate of the SE). This table includes <code>flag_freq</code>, which indicates the frequency with which the given Q-sort was flagged for the given factor.</p>
</td></tr>
<tr><td><code>q.array</code></td>
<td>
<p>array of values in the distribution grid.</p>
</td></tr>
<tr><td><code>fsi</code></td>
<td>
<p>factor stability index (optional; experimental).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>Zabala, Pascual (2016) Bootstrapping Q Methodology to Improve the Understanding of Human Perspectives. PLoS ONE 11(2): e0148087.</p>


<h3>See Also</h3>

<p><code><a href="#topic+qmethod">qmethod</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lipset)
boots &lt;- qmboots(lipset[[1]], nfactors = 3, nsteps = 10, load = "auto",
           rotation = "varimax", indet = "qindtest",
           fsi = TRUE)
boots
boxplot(t(boots[[2]][[1]][[2]]), horizontal = TRUE, 
main = "Statement z-score boxplot for the first factor", las = 1)

#See the table summaries:
qms &lt;- qmb.summary(boots)
round(qms$statements, digits=2) # statements
round(qms$qsorts, digits=2)     # Q-sorts

# A more synthetic visualisation:
# z-scores:
qmb.plot(qms, nfactors=3, type="zsc", sort="difference")
# factor loadings:
qmb.plot(qms, nfactors=3, type="loa", sort="difference")


</code></pre>

<hr>
<h2 id='qmethod'>Q methodology analysis</h2><span id='topic+qmethod'></span>

<h3>Description</h3>

<p>This function performs a full Q methodology analysis. Both principal components analysis or centroid factor extraction can be used. The main results are factor characteristics, statement z-scores and factor scores, and distinguishing and consensus statements.</p>


<h3>Usage</h3>

<pre><code class='language-R'>qmethod(dataset, nfactors, extraction = "PCA", rotation = "varimax", 
        forced = TRUE, distribution = NULL, cor.method = "pearson",
        silent = FALSE, spc = 10^-5, ...)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qmethod_+3A_dataset">dataset</code></td>
<td>
<p>a matrix or a data frame containing original data, with statements as rows, Q-sorts as columns, and the column scores in the distribution in each cell. The matrix or data frame should not contain character strings. The results keep row names and column names if set in the <code>dataset</code> (see 'Details').</p>
</td></tr>
<tr><td><code id="qmethod_+3A_nfactors">nfactors</code></td>
<td>
<p>number of factors to extract.</p>
</td></tr>
<tr><td><code id="qmethod_+3A_extraction">extraction</code></td>
<td>
<p>extraction method, either Principal Components Analysis or centroid factor extraction. It defaults to <code>"PCA"</code>.</p>
</td></tr>
<tr><td><code id="qmethod_+3A_rotation">rotation</code></td>
<td>
<p>rotation method, defaults to <code>"varimax"</code>. For <code>"centroid"</code> extraction, <code>"none"</code> and <code>"varimax"</code> are implemented. For <code>"PCA"</code> other possible rotations allowed in <code><a href="psych.html#topic+principal">principal</a></code> function can be used: <code>"none"</code>, <code>"varimax"</code>, <code>"quartimax"</code>, <code>"promax"</code>, <code>"oblimin"</code>, <code>"simplimax"</code>, and <code>"cluster"</code>. Note that only 'varimax' and manual rotation are standard in Q methodology.</p>
</td></tr>
<tr><td><code id="qmethod_+3A_forced">forced</code></td>
<td>
<p>logical; Is the ranking of the items forced to match the distributions? Set to <code>TRUE</code> if all respondents ranked the items strictly following the distribution scores, in which case the values of the distribution are calculated automatically. Set to <code>FALSE</code> if respondents were able to rank the items without following the distribution, and the values of the distribution have to be provided as an array in the argument <code>distribution</code>. See more details below in 'Notes'.</p>
</td></tr>
<tr><td><code id="qmethod_+3A_distribution">distribution</code></td>
<td>
<p>logical; when forced = <code>FALSE</code>, the distribution has to be provided as a vector of numbers, such as <code>c(-2, -1, -1, 0, 1, 1, 2, 2)</code>. See more details below in 'Notes' number 2.</p>
</td></tr>
<tr><td><code id="qmethod_+3A_cor.method">cor.method</code></td>
<td>
<p>character string indicating which correlation coefficient is to be computed, to be passed on to the function <code><a href="stats.html#topic+cor">cor</a></code>: <code>"pearson"</code> (default), <code>"kendall"</code>, or <code>"spearman"</code>. </p>
</td></tr>
<tr><td><code id="qmethod_+3A_silent">silent</code></td>
<td>
<p>logical; when = <code>TRUE</code>, a summary message is printed.</p>
</td></tr>
<tr><td><code id="qmethod_+3A_spc">spc</code></td>
<td>
<p>If centroid extraction is selected, this is the threshold to accept factor results, set to 0.00001 by default (in Brown 1980, this is set to 0.02; see <code><a href="#topic+centroid">centroid</a></code>)</p>
</td></tr></table>
<p>.
</p>
<table role = "presentation">
<tr><td><code id="qmethod_+3A_...">...</code></td>
<td>
<p>other parameters to pass to functions such as <code><a href="psych.html#topic+principal">principal</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function wraps together all the steps required for a complete analysis: extracting component loadings (<code><a href="psych.html#topic+principal">principal</a></code> or <code><a href="#topic+centroid">centroid</a></code>); flagging Q-sorts (<code><a href="#topic+qflag">qflag</a></code>); calculating weights, z-scores, and rounded scores (<code><a href="#topic+qzscores">qzscores</a></code>), calculating general characteristics (<code><a href="#topic+qfcharact">qfcharact</a></code>), and finding distinguishing and consensus statements (<code><a href="#topic+qdc">qdc</a></code>).
</p>
<p>The default <code><a href="#topic+qmethod">qmethod</a></code> performs automatic flagging and uses varimax rotation. Varimax rotation can be replaced by <code>"none"</code> or other methods for rotation allowed in <code><a href="psych.html#topic+principal">principal</a></code> from <span class="pkg">psych</span> package.
</p>
<p>If the input data contains row names and variable names, these will be kept throughout the analysis. Input data is validated, and it will give an error if there are non numerical values or if either the number of statements and Q-sorts introduced do not match the input data. It also returns error if the argument <code>forced</code> is set to <code>TRUE</code> but Q-sorts contain differing distributions.
</p>


<h3>Value</h3>

<p>Returns a list of class <code>QmethodRes</code>, with eight objects:
</p>
<table role = "presentation">
<tr><td><code>brief</code></td>
<td>
<p>a list with the basic values of the analysis: date (<code>"date"</code>), number of statements (<code>"nstat"</code>), number of Q-sorts (<code>"nqsort"</code>), whether the distribution was 'forced' (<code>"distro"</code>),  number of factors extracted (<code>"nfactors"</code>), method for factor extraction (<code>"extraction"</code>), method for rotation (<code>"rotation"</code>), method for correlation (<code>"cor.method"</code>), package version (<code>"pkg.version"</code>), and a summary of this information for display purposes (<code>"info"</code>).</p>
</td></tr>
<tr><td><code>dataset</code></td>
<td>
<p>original data.</p>
</td></tr>
<tr><td><code>loa</code></td>
<td>
<p>factor loadings for Q-sorts.</p>
</td></tr>
<tr><td><code>flagged</code></td>
<td>
<p>logical dataframe of flagged Q-sorts.</p>
</td></tr>
<tr><td><code>zsc</code></td>
<td>
<p>statements z-scores.</p>
</td></tr>
<tr><td><code>zsc_n</code></td>
<td>
<p>statements factor scores, matched to the ordered array of values in the first row of the dataset.</p>
</td></tr>
<tr><td><code>f_char</code></td>
<td>
<p>factor characteristics (see <code><a href="#topic+qfcharact">qfcharact</a></code>):
</p>

<ul>
<li><p><code>"characteristics"</code>: data frame with the following values for each factor: average reliability coefficient, number of loading Q-sorts, eigenvalues, percentage of explained variance, composite reliability, standard error of factor scores.
</p>
</li>
<li><p><code>"cor_zsc"</code>: matrix of correlation coefficients between factors z-scores.
</p>
</li>
<li><p><code>"sd_dif"</code>: matrix of standard errors of differences.
</p>
</li></ul>

</td></tr>
<tr><td><code>qdc</code></td>
<td>
<p>distinguishing and consensus statements (see <code><a href="#topic+qdc">qdc</a></code>).</p>
</td></tr>
</table>


<h3>Note about non-forced distribution studies</h3>

<p>The forced/ non-forced distribution (argument <code>forced</code>) refers to whether respondents were able to sort the items freely or they had to fit them in the distribution (i.e. the pyramid). If the <code>qmethod</code> function returns the following error: <code>"Q method input: The argument 'forced' is set as 'TRUE', but ..."</code> and you are unsure of how to solve it, continue reading. 
</p>
<p>First, ensure that the data are correctly introduced. For example, typos in the numbers entered result from forced distribution Q-sorts appearing as non-forced. 
</p>
<p>Second, if you data are indeed non-forced, set the argument <code>"forced = FALSE"</code> and specify the argument <code>"distribution = ..."</code>. For the argument <code>"distribution"</code>, specify a numerical vector with as many elements as there are cells in your original distribution (i.e. as many items in the Q-set), and with the values of the columns. Repeat the values of each column as many times as there are cells in that column. For example, for the distribution shown in Figure 1 in <a href="https://journal.r-project.org/archive/2014-2/zabala.pdf">this paper at <em>The R Journal</em></a>, the argument <code>distribution</code> should be:
</p>
<pre>c(-4, -4,
  -3, -3, -3,
  -2, -2, -2, -2, 
  -1, -1, -1, -1, -1, 
   0,  0,  0,  0,  0,
   1,  1,  1,  1,  1, 
   2,  2,  2,  2,
   3,  3,  3,
   4,  4 )</pre>
<p>Or alternatively (a different way of getting the same vector):
</p>
<pre>c(rep(-4, 2), rep(-3, 3), rep(-2, 4), rep(-1, 5), rep( 0, 5), 
  rep( 1, 5), rep( 2, 4), rep( 3, 3), rep( 4, 2)) </pre>
<p>If you don't want to specify a given distribution, you can specify <code>distribution = c(1:nrow(dataset)</code> and then ignore the factor scores in the output of results.
</p>
<p><strong>IMPORTANT</strong>: The arguments <code>forced</code> and  <code>distribution</code> are relevant only for the calculation of factor (normalised) scores. All other values in the results (e.g. z-scores) are unaffected by these specifications. <strong>If in doubt in a study with non-forced distribution, best to interpret the z-scores instead of the factor scores</strong>.
</p>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>Zabala, A., 2014. qmethod: a package to analyse human perspectives using Q methodology. <em>The R Journal</em>, 6(2):163-173. Available from: <a href="https://journal.r-project.org/archive/2014-2/zabala.pdf">https://journal.r-project.org/archive/2014-2/zabala.pdf</a> (Open access).
</p>
<p>Brown, S. R., 1980 <em>Political subjectivity: Applications of Q methodology in political science</em>, New Haven, CT: Yale University Press.
</p>
<p>See further references on the methodology in <code><a href="#topic+qmethod-package">qmethod-package</a></code>.</p>


<h3>See Also</h3>

<p><code><a href="#topic+qzscores">qzscores</a></code> and <code><a href="#topic+centroid">centroid</a></code> in this package, and <code><a href="psych.html#topic+principal">principal</a></code> in package <span class="pkg">psych</span>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lipset)
results &lt;- qmethod(lipset[[1]], nfactors = 3, rotation = "varimax")
summary(results)
results #shows all results

# Remember to manually inspect the automatic pre-flagging:
loa.and.flags(results)
</code></pre>

<hr>
<h2 id='qpcrustes'>Q Methodology: Procrustes rotation of loadings</h2><span id='topic+qpcrustes'></span>

<h3>Description</h3>

<p>This is a wrap of <code>procrustes</code> rotation from <span class="pkg">MCMCpack</span> for bootstrapping Q methodology in the function <code><a href="#topic+qmboots">qmboots</a></code>.</p>


<h3>Usage</h3>

<pre><code class='language-R'>qpcrustes(loa, target, nfactors)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qpcrustes_+3A_loa">loa</code></td>
<td>
<p>factor loadings from the analysis of a resample.</p>
</td></tr>
<tr><td><code id="qpcrustes_+3A_target">target</code></td>
<td>
<p>factor loadings from the analysis of a subsample.</p>
</td></tr>
<tr><td><code id="qpcrustes_+3A_nfactors">nfactors</code></td>
<td>
<p>fumber of factors</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns the factor loadings for the subsample after applying Procrustes rotation to correct the indeterminacy issue. Use <code>procrustes</code> from <span class="pkg">MCMCpack</span>. Used within the function <code><a href="#topic+qmboots">qmboots</a></code>, not intended for independent use.
</p>


<h3>Note</h3>

<p>this function is called within the function <code><a href="#topic+qmboots">qmboots</a></code>. Not intended to be used separately. The function calls <code>procrustes</code> from <span class="pkg">MCMCpack</span>, a package that requires the package <code>graph</code>. As from April 2016 the package has been moved to Bioconductor, and therefore it needs to be installed manually. If you get errors of missing packages when using this function or <code><a href="#topic+qmboots">qmboots</a></code>, install <code>graph</code> manually:
<code>source("https://bioconductor.org/biocLite.R")
biocLite("graph")</code>
</p>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>Zabala, Pascual (2016) Bootstrapping Q Methodology to Improve the Understanding of Human Perspectives. PLoS ONE 11(2): e0148087.</p>


<h3>See Also</h3>

<p>Function <code>procrustes</code> from <span class="pkg">GPArotation</span> package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># This example requires installing 'MCMCpack':
data(lipset)
qm &lt;- qmethod(lipset[[1]], nfactors=3, rotation="varimax")
qselim &lt;- sample(1:3, 2, replace=FALSE) ##q sorts to eliminate
subdata &lt;- lipset[[1]][ , -qselim]
library(psych)
loa &lt;- as.data.frame(unclass(principal(subdata, 
         nfactors=3, rotate="varimax")$loadings))
target &lt;- as.matrix(as.data.frame(qm[3]))
colnames(target) &lt;- paste("target_f", 1:3, sep="")
subtarget &lt;- target[c(-qselim),]
qindt &lt;- qpcrustes(loa, subtarget, 3)
qindt
</code></pre>

<hr>
<h2 id='qzscores'>Q methodology: z-scores from loadings</h2><span id='topic+qzscores'></span>

<h3>Description</h3>

<p>Calculates factor characteristics, z-scores, and factor scores, provided a matrix of loadings and a matrix of (manually or automatically) flagged Q-sorts.</p>


<h3>Usage</h3>

<pre><code class='language-R'>qzscores(dataset, nfactors, loa, flagged, forced = TRUE, 
         distribution = NULL)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qzscores_+3A_dataset">dataset</code></td>
<td>
<p>a matrix or a data frame containing raw data, with statements as rows, Q-sorts as columns, and the column scores in the distribution in each cell.</p>
</td></tr>
<tr><td><code id="qzscores_+3A_nfactors">nfactors</code></td>
<td>
<p>number of factors to extract.</p>
</td></tr>
<tr><td><code id="qzscores_+3A_loa">loa</code></td>
<td>
<p>matrix or data frame of <code>nqsorts</code> rows and <code>nfactors</code> columns, with values of factor loadings for Q-sorts, calculated using, e.g., <code>principal(...)$loadings</code> or <code><a href="#topic+centroid">centroid</a></code>.</p>
</td></tr>
<tr><td><code id="qzscores_+3A_flagged">flagged</code></td>
<td>
<p>matrix or data frame of <code>nqsorts</code> rows and <code>nfactors</code> columns, with <code>TRUE</code> values for the Q-sorts that are flagged. Automatic flagging can be aplied using <code><a href="#topic+qflag">qflag</a></code>. Manual flagging can be done by providing a logical matrix with <code>nqsorts</code> rows and <code>nfactors</code> columns to the argument <code>flagged</code>.</p>
</td></tr>
<tr><td><code id="qzscores_+3A_forced">forced</code></td>
<td>
<p>logical; Is the distribution of items forced? Set to <code>TRUE</code> if all respondents ranked the items following strictly the distribution scores, and the values of the distribution are calculated automatically. Set to <code>FALSE</code> if respondents were able to rank the items without following the distribution, and the values of the distribution have to be provided as an array in the argument <code>distribution</code>.</p>
</td></tr>
<tr><td><code id="qzscores_+3A_distribution">distribution</code></td>
<td>
<p>logical; when <code>forced = FALSE</code>, the distribution has to be provided as a vector of numbers, such as <code>c(-2, -1, -1, 0, 1, 1, 2, 2)</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In order to implement manual flagging, use a manually created data frame (or matrix) for <code>flagged</code>. See an example of code to perform manual flagging or to manipulate the loadings in <a href="http://aiorazabala.github.io/qmethod/Advanced-analysis">the website</a>.
</p>
<p>The loadings from <code>principal(...)$loadings</code> or <code>centroid</code> can be explored to decide upon flagging. The <code>loa</code> data frame should have Q-sorts as rows, and factors as columns, where <code>TRUE</code> are the flagged Q-sorts.</p>


<h3>Value</h3>

<p>Returns a list of class <code>QmethodRes</code>, with seven objects:
</p>
<table role = "presentation">
<tr><td><code>brief</code></td>
<td>
<p>a list with the basic values of the analysis: date (<code>"date"</code>), number of statements (<code>"nstat"</code>), number of Q-sorts (<code>"nqsort"</code>), whether the distribution was 'forced' (<code>"distro"</code>),  number of factors extracted (<code>"nfactors"</code>), type of extraction (<code>"extraction"</code>), type of rotation (<code>"rotation"</code>), method for correlation (<code>"cor.method"</code>), and a summary of this information for display purposes (<code>"info"</code>).</p>
</td></tr>
<tr><td><code>dataset</code></td>
<td>
<p>original data.</p>
</td></tr>
<tr><td><code>loa</code></td>
<td>
<p>factor loadings for Q-sorts.</p>
</td></tr>
<tr><td><code>flagged</code></td>
<td>
<p>logical dataframe of flagged Q-sorts.</p>
</td></tr>
<tr><td><code>zsc</code></td>
<td>
<p>statements z-scores.</p>
</td></tr>
<tr><td><code>zsc_n</code></td>
<td>
<p>statements rounded scores, rounded to the values in the first row of the original dataset.</p>
</td></tr>
<tr><td><code>f_char</code></td>
<td>
<p>factor characteristics obtained from <code><a href="#topic+qfcharact">qfcharact</a></code>.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>This is a function used within <code><a href="#topic+qmethod">qmethod</a></code>. Rarely to be used independently.</p>


<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>Brown, S. R., 1980 <em>Political subjectivity: Applications of Q methodology in political science</em>, New Haven, CT: Yale University Press.
</p>
<p>See further references on the methodology in <code><a href="#topic+qmethod-package">qmethod-package</a></code>.</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lipset)
library(psych)
loa &lt;- unclass(principal(lipset[[1]], 
               nfactors = 3, rotate = "varimax")$loadings)
flagged &lt;- qflag(nstat = 33, loa = loa)
qmzsc &lt;- qzscores(lipset[[1]], nfactors = 3, flagged = flagged, loa = loa)
qmzsc # Show results
</code></pre>

<hr>
<h2 id='runInterface'>Q methodology: Graphical User Interface (GUI)</h2><span id='topic+runInterface'></span>

<h3>Description</h3>

<p>Launch an interactive interface to run Q methodology analysis using the basic features.
The interface is also [available online](https://azabala.shinyapps.io/qmethod-gui/).</p>


<h3>Usage</h3>

<pre><code class='language-R'>runInterface()</code></pre>


<h3>Details</h3>

<p>This GUI allows the user to conduct a full Q methodology analysis, choosing:
</p>

<ul>
<li> <p>either PCA or centroid extraction method
</p>
</li>
<li> <p>varimax or no rotation method (for PCA and centroid) and other uncommon rotation methods (for PCA)
</p>
</li>
<li> <p>selecting from 2 to 7 factors/components.
</p>
</li></ul>

<p>The GUI conducts analysis with forced distribution and automatic flagging. See Note.
</p>
<p>The GUI shows the full results from the analysis, and also:
</p>

<ul>
<li><p>Plot of z-scores
</p>
</li>
<li><p>Automatically flagged Q-sorts
</p>
</li>
<li><p>Information to explore how many factors to extract (including a screeplot)
</p>
</li>
<li><p>Plot of z-scores
</p>
</li></ul>



<h3>Note</h3>

<p>This GUI has limited functionality in comparison to that through the command-line. For full functionality (such as specifying non-forced analysis, manual flagging, and much more), use the command-line directly in the R console. See, for example, a tutorial for <a href="http://aiorazabala.github.io/qmethod/Advanced-analysis">manual manipulation of Q-sort loadings and/or manual flagging</a>.
</p>
<p>To run this same analysis directly in R, see the code generated in the GUI in <em>Run the analysis directly in R</em>. 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Only run this example in interactive R sessions
if (interactive()) {
  runInterface()
}
</code></pre>

<hr>
<h2 id='summary.QmethodRes'>Q methodology: summary for class 'QmethodRes'</h2><span id='topic+summary.QmethodRes'></span>

<h3>Description</h3>

<p>Shows a summary of the results of Q methodology from the <code><a href="#topic+qmethod">qmethod</a></code> function: factor scores and factor characteristics.</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'QmethodRes'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.QmethodRes_+3A_object">object</code></td>
<td>
<p>an object of class <code>QmethodRes</code> created after <code><a href="#topic+qmethod">qmethod</a></code> function.</p>
</td></tr>
<tr><td><code id="summary.QmethodRes_+3A_...">...</code></td>
<td>
<p>any other argument for the <code><a href="base.html#topic+summary">summary</a></code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the summary of the analysis:
</p>

<ul>
<li><p> Statements factor scores normalized to the values in the first row of the original dataset, and 
</p>
</li>
<li><p> Factor characteristics: Average reliability coefficient, Number of loading Q-sorts, Eigenvalues, Percentage of explained variance, Composite reliability, Standard error of factor scores, Correlation coefficients between factors z-scores, Standard errors of differences
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Aiora Zabala</p>


<h3>References</h3>

<p>Brown, S. R., 1980 <em>Political subjectivity: Applications of Q methodology in political science</em>, New Haven, CT: Yale University Press.</p>


<h3>See Also</h3>

<p><code><a href="#topic+qmethod">qmethod</a></code> in this package
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(lipset)
results &lt;- qmethod(lipset[[1]], nfactors = 3, rotation = "varimax")
summary(results)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
