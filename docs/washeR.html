<!DOCTYPE html><html lang="en"><head><title>Help for package washeR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {washeR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#dati'><p>Data frame of meteorological data</p></a></li>
<li><a href='#ts'><p>Time series</p></a></li>
<li><a href='#wash.out'><p>Outlier detection for single or grouped time series</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Time Series Outlier Detection</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.3</td>
</tr>
<tr>
<td>Author:</td>
<td>Andrea Venturini</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Andrea Venturini &lt;andrea.venturini@bancaditalia.it&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Time series outlier detection with non parametric test. This is a new outlier detection methodology (washer): efficient for time saving elaboration and implementation procedures, adaptable for general assumptions and for needing very short time series, reliable and effective as involving robust non parametric test. You can find two approaches: single time series (a vector) and grouped time series (a data frame). For other informations: Andrea Venturini (2011) Statistica - Universita di Bologna, Vol.71, pp.329-344. For an informal explanation look at R-bloggers on web.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>gplots,grDevices,graphics,stats,utils</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-09-19 20:49:42 UTC; andrea</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-09-20 07:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='dati'>Data frame of meteorological data</h2><span id='topic+dati'></span>

<h3>Description</h3>

<p>This sample data would be invented meteorological information detected by weather stations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dati
</code></pre>


<h3>Format</h3>

<p>A data frame with 800 rows and 4 variables:
</p>

<dl>
<dt>phen</dt><dd><p>Temperature, Rain</p>
</dd>
<dt>time</dt><dd><p>ordered numbers for time (a number in the format YYYYMMDD [Year Month Day] is possible too)  </p>
</dd>
<dt>zone</dt><dd><p>label classification for the group, for example the identification code of a wheather station.</p>
</dd>
<dt>value</dt><dd><p>values</p>
</dd>
</dl>


<hr>
<h2 id='ts'>Time series</h2><span id='topic+ts'></span>

<h3>Description</h3>

<p>This is an example of a single time series with increasing trend and some variability.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ts
</code></pre>


<h3>Format</h3>

<p>A data frame with 35 rows and 1 variable:
</p>

<dl>
<dt>dati</dt><dd><p>pseudo random numers</p>
</dd>
</dl>


<hr>
<h2 id='wash.out'>Outlier detection for single or grouped time series</h2><span id='topic+wash.out'></span>

<h3>Description</h3>

<p>This function provides anomaly signals (even a graphical visualization) when there is a 'jump' in a single time series, or the 'jump' is too much different respect those ones of grouped similar time series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wash.out(
  dati,
  graph = FALSE,
  linear_analysis = FALSE,
  val_test_limit = 5,
  save_out = FALSE,
  out_out = "out.csv",
  pdf_out = "out.pdf",
  r_out = 3,
  c_out = 2,
  first_line = 1,
  pace_line = 6
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="wash.out_+3A_dati">dati</code></td>
<td>
<p>data frame (grouped time series: phenomenon+date+group+values) or vector (single time series)</p>
</td></tr>
<tr><td><code id="wash.out_+3A_graph">graph</code></td>
<td>
<p>logical value for graphical analysis (default=FALSE)</p>
</td></tr>
<tr><td><code id="wash.out_+3A_linear_analysis">linear_analysis</code></td>
<td>
<p>logical value for linear analysis (default=FALSE)</p>
</td></tr>
<tr><td><code id="wash.out_+3A_val_test_limit">val_test_limit</code></td>
<td>
<p>value for outlier detection sensitiveness (default=5 ; max=10)</p>
</td></tr>
<tr><td><code id="wash.out_+3A_save_out">save_out</code></td>
<td>
<p>logical value for saving detected outliers (default=FALSE)</p>
</td></tr>
<tr><td><code id="wash.out_+3A_out_out">out_out</code></td>
<td>
<p>a character file name for saving outliers in csv form, delimited with &quot;;&quot; and using ',' as decimal separator  (default out.csv)</p>
</td></tr>
<tr><td><code id="wash.out_+3A_pdf_out">pdf_out</code></td>
<td>
<p>a character file name for saving graphic analysis in pdf file (default=out.pdf)</p>
</td></tr>
<tr><td><code id="wash.out_+3A_r_out">r_out</code></td>
<td>
<p>rows number of graphs (default=3)</p>
</td></tr>
<tr><td><code id="wash.out_+3A_c_out">c_out</code></td>
<td>
<p>cols number of graphs (default=2)</p>
</td></tr>
<tr><td><code id="wash.out_+3A_first_line">first_line</code></td>
<td>
<p>value for first dotted line in graphic analysis (default=1)</p>
</td></tr>
<tr><td><code id="wash.out_+3A_pace_line">pace_line</code></td>
<td>
<p>value for pace in dotted line in graphic analysis (default=6)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame of possible outliers in a triad. Output record: rows/time.2/series/y1/y2/y3/test(AV)/AV/ n/median(AV)/mad(AV)/madindex(AV). Where time.2 is the center of the triad y1, y2, y3; test(AV) is the number to compare with 5 to detect outlier; n is the number of observations of the group ....
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## we can start with data without outliers but structured with co-movement between groups
data("dati")
## first column for phenomenon
## 2° col for time written in ordered numbers or strings
## 3° col for group classification variable
## 4° col for values
str(dati)
#######################################
## a data frame without any outlier
#######################################
out=wash.out(dati)
out   ## empity data frame
length(out[,1])  ## no row
## we can add two outliers
####  time=3 temperature value=0
dati[99,4]=  0
## ... and then for "rain" phenomenon!
####  time=3 rain value=37
dati[118,4]=  37
#######################################
##   data.frame with 2 fresh outliers
#######################################
out=wash.out(dati)
##  all "three terms" time series
## let's take a look at anomalous time series
out
## ... the same but we save results in a file....
## If we don't specify a name, out.csv  is the default
out=wash.out(dati,save_out=TRUE,out_out="tabel_out.csv")
out
## we put the parameter from 5 to 10, using this upper one  to capture
##       only  particularly anomalous outliers
out=wash.out(dati, val_test_limit = 10)
out
## save plots and outliers in a pdf file "out.pdf" as a default
out=wash.out(dati, val_test_limit = 10, graph=TRUE)
out
## we can make the usual analysis for groups but we can also use that one
## reserved for every single time series
## (linear_analysis): two files for saved outliers (out.csv and linout.csv)
##  and for graph display in two pdf files (out.pdf and linout.pdf)
out=wash.out(dati,val_test_limit=5,save_out=TRUE,linear_analysis=TRUE,graph=TRUE)
out
## out return only the linear analysis...
## ... in this case we lose the co-movement information an we run the risk
##     of finding too much variance in a single time series
##     and detecting not too much likely outliers
##########################################################
##  single time series analysis
##########################################################
data(ts)
str(ts)
sts= ts$dati
plot(sts,type="b",pch=20,col="red")
## a time series with a variability and an increasing trend
## sts is a vector and linear analysis is the default one
out=wash.out(sts)
out
## we find no outlier
out=wash.out(sts,val_test_limit=5,linear_analysis=TRUE,graph=TRUE)
out
## no outlier
## We can add an outlier with limited amount
sts[5]=sts[5]*2
plot(sts,type="b",pch=20,col="red")
out=wash.out(sts,val_test_limit=5)
out
## test is over 5 for a bit
out=wash.out(sts,val_test_limit=5,save_out=TRUE,graph=TRUE)
out
data(ts)
sts= ts$dati
sts[5]=sts[5]*3
## we can try a greater value to put an outlier of a certain importance
plot(sts,type="b",pch=20,col="blue")
out=wash.out(sts,val_test_limit=5,save_out=TRUE,graph=TRUE)
out
## washer procedure identify three triads of outliers values
system("rm *.csv *.pdf")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
