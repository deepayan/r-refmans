<!DOCTYPE html><html><head><title>Help for package encryptr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {encryptr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#encryptr-package'><p>encryptr: Encrypt and decrypt data frame or tibble columns using the strong RSA public/private keys.</p></a></li>
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#assign_to_global'><p>Assign</p></a></li>
<li><a href='#decrypt'><p>Decrypt a data frame or tibble column using an RSA public/private key</p></a></li>
<li><a href='#decrypt_file'><p>Decrypt a file</p></a></li>
<li><a href='#decrypt_vec'><p>Decrypt ciphertext using an RSA public/private key</p></a></li>
<li><a href='#encrypt'><p>Encrypt a data frame or tibble column using an RSA public/private key</p></a></li>
<li><a href='#encrypt_file'><p>Encrypt a file</p></a></li>
<li><a href='#encrypt_vec'><p>Encrypt a character vector using an RSA public/private key</p></a></li>
<li><a href='#genkeys'><p>Create and write RSA private and public keys</p></a></li>
<li><a href='#gp'><p>General Practioner (family doctor) practices in Scotland 2018</p></a></li>
<li><a href='#hex2raw'><p>Convert hexadecimal to raw</p></a></li>
<li><a href='#raw2hex'><p>Convert raw to hexadecimal</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Easily Encrypt and Decrypt Data Frame/Tibble Columns or Files
using RSA Public/Private Keys</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.3</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ewen Harrison &lt;ewen.harrison@ed.ac.uk&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>It is important to ensure that sensitive data is protected. 
    This straightforward package is aimed at the end-user. 
    Strong RSA encryption using a public/private key pair is used to encrypt data frame or tibble columns.
    A public key can be shared to allow others to encrypt data to be sent to you. 
    This is particularly aimed a healthcare settings so patient data can be pseudonymised. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/SurgicalInformatics/encryptr/issues">https://github.com/SurgicalInformatics/encryptr/issues</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/SurgicalInformatics/encryptr">https://github.com/SurgicalInformatics/encryptr</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, knitr, openssl, purrr, readr, rlang</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.0</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, withr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-04-25 06:54:01 UTC; eharrison</td>
</tr>
<tr>
<td>Author:</td>
<td>Cameron Fairfield [aut],
  Riinu Ots [aut],
  Stephen Knight [aut],
  Tom Drake [aut],
  Ewen Harrison [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-04-25 07:10:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='encryptr-package'>encryptr: Encrypt and decrypt data frame or tibble columns using the strong RSA public/private keys.</h2><span id='topic+encryptr-package'></span>

<h3>Description</h3>

<p>encryptr: Encrypt and decrypt data frame or tibble columns using the strong RSA public/private keys.
</p>


<h3><code>encryptr</code> key generation</h3>

<p><a href="#topic+genkeys">genkeys</a>,
</p>


<h3><code>encryptr</code> encrypt/decrypt</h3>

<p><a href="#topic+encrypt">encrypt</a>,
<a href="#topic+decrypt">decrypt</a>
</p>

<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>Pipe operator
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='assign_to_global'>Assign</h2><span id='topic+assign_to_global'></span>

<h3>Description</h3>

<p>Assign
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assign_to_global(key, val, pos)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="assign_to_global_+3A_pos">pos</code></td>
<td>
</td></tr>
</table>

<hr>
<h2 id='decrypt'>Decrypt a data frame or tibble column using an RSA public/private key</h2><span id='topic+decrypt'></span>

<h3>Description</h3>

<p>Decrypt a data frame or tibble column using an RSA public/private key
</p>


<h3>Usage</h3>

<pre><code class='language-R'>decrypt(.data, ..., private_key_path = "id_rsa", lookup_object = NULL,
  lookup_path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="decrypt_+3A_.data">.data</code></td>
<td>
<p>A data frame or tibble.</p>
</td></tr>
<tr><td><code id="decrypt_+3A_...">...</code></td>
<td>
<p>The unquoted names of columns to decrypt.</p>
</td></tr>
<tr><td><code id="decrypt_+3A_private_key_path">private_key_path</code></td>
<td>
<p>Character. A quoted path to an RSA private key
created using <code><a href="#topic+genkeys">genkeys</a></code>.</p>
</td></tr>
<tr><td><code id="decrypt_+3A_lookup_object">lookup_object</code></td>
<td>
<p>An unquote name of a lookup object in the current
environment created using <code>link{encrypt}</code>.</p>
</td></tr>
<tr><td><code id="decrypt_+3A_lookup_path">lookup_path</code></td>
<td>
<p>Character. A quoted path to an RSA private key
created using <code><a href="#topic+encrypt">encrypt</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The original dataframe or tibble with the specified columns
decrypted.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#' This will run:
# genkeys()
# gp_encrypt = gp %&gt;%
#   select(-c(name, address1, address2, address3)) %&gt;%
#   encrypt(postcode, telephone)
# gp_encrypt %&gt;%
#   decrypt(postcode, telephone)

## Not run: 
# For CRAN and testing:
library(dplyr)
temp_dir = tempdir()
genkeys(file.path(temp_dir, "id_rsa")) # temp directory for testing only
gp_encrypt = gp %&gt;%
  select(-c(name, address1, address2, address3)) %&gt;%
  encrypt(postcode, telephone, public_key_path = file.path(temp_dir, "id_rsa.pub"))
  gp_encrypt %&gt;%
  decrypt(postcode, telephone, private_key_path = file.path(temp_dir, "id_rsa"))
  
## End(Not run)
</code></pre>

<hr>
<h2 id='decrypt_file'>Decrypt a file</h2><span id='topic+decrypt_file'></span>

<h3>Description</h3>

<p>See <code><a href="#topic+encrypt_file">encrypt_file</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>decrypt_file(.path, file_name = NULL, private_key_path = "id_rsa")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="decrypt_file_+3A_.path">.path</code></td>
<td>
<p>Quoted path to file to encrypt.</p>
</td></tr>
<tr><td><code id="decrypt_file_+3A_file_name">file_name</code></td>
<td>
<p>Optional new name for unencrypted file.</p>
</td></tr>
<tr><td><code id="decrypt_file_+3A_private_key_path">private_key_path</code></td>
<td>
<p>Quoted path to private key, created with
<code><a href="#topic+genkeys">genkeys</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The decrypted file is saved with optional file name.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># This will run:
# Create example file to encrypt
# write.csv(gp, "gp.csv")
# genkeys()
# encrypt_file("gp.csv")
# decrypt_file("gp.csv.encryptr.bin", file_name = "gp2.csv")

# For CRAN and testing:
temp_dir = tempdir() # temp directory for testing only
genkeys(file.path(temp_dir, "id_rsa4"))
write.csv(gp, file.path(temp_dir, "gp.csv"))
encrypt_file(file.path(temp_dir, "gp.csv"), public_key_path = file.path(temp_dir, "id_rsa4.pub"))
decrypt_file(file.path(temp_dir, "gp.csv.encryptr.bin"),
  private_key_path = file.path(temp_dir, "id_rsa4"),
  file_name = "file.path(temp_dir, gp2.csv)")
</code></pre>

<hr>
<h2 id='decrypt_vec'>Decrypt ciphertext using an RSA public/private key</h2><span id='topic+decrypt_vec'></span>

<h3>Description</h3>

<p>Not usually called directly. Password for private key required.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>decrypt_vec(.data, private_key_path = "id_rsa")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="decrypt_vec_+3A_.data">.data</code></td>
<td>
<p>A vector of ciphertexts created using <code><a href="#topic+encrypt">encrypt</a></code>.</p>
</td></tr>
<tr><td><code id="decrypt_vec_+3A_private_key_path">private_key_path</code></td>
<td>
<p>Character. A quoted path to an RSA private key
created using <code><a href="#topic+genkeys">genkeys</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
hospital_number = c("1010761111", "2010761212")
genkeys(file.path(tempdir(), "id_rsa") # temp directory for testing only
hospital_number_encrypted = encrypt_char(hospital_number)
decrypt_vec(hospital_number_encrypted)

## End(Not run)
</code></pre>

<hr>
<h2 id='encrypt'>Encrypt a data frame or tibble column using an RSA public/private key</h2><span id='topic+encrypt'></span>

<h3>Description</h3>

<p>Encrypt a data frame or tibble column using an RSA public/private key
</p>


<h3>Usage</h3>

<pre><code class='language-R'>encrypt(.data, ..., public_key_path = "id_rsa.pub", lookup = FALSE,
  lookup_name = "lookup", write_lookup = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="encrypt_+3A_.data">.data</code></td>
<td>
<p>A data frame or tibble.</p>
</td></tr>
<tr><td><code id="encrypt_+3A_...">...</code></td>
<td>
<p>The unquoted names of columns to encrypt.</p>
</td></tr>
<tr><td><code id="encrypt_+3A_public_key_path">public_key_path</code></td>
<td>
<p>Character. A quoted path to an RSA public key created
using <code><a href="#topic+genkeys">genkeys</a></code>.</p>
</td></tr>
<tr><td><code id="encrypt_+3A_lookup">lookup</code></td>
<td>
<p>Logical. Whether to substitute the encrypted columns for
key-column of integers.</p>
</td></tr>
<tr><td><code id="encrypt_+3A_lookup_name">lookup_name</code></td>
<td>
<p>Character. A quoted name to give lookup table and file.</p>
</td></tr>
<tr><td><code id="encrypt_+3A_write_lookup">write_lookup</code></td>
<td>
<p>Logical. Write a lookup table as a .csv file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The original dataframe or tibble with the specified columns
encrypted.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># This will run:
# genkeys()
# gp_encrypt = gp %&gt;%
#   select(-c(name, address1, address2, address3)) %&gt;%
#   encrypt(postcode, telephone)

# For CRAN and testing:
library(dplyr)
temp_dir = tempdir()
genkeys(file.path(temp_dir, "id_rsa2")) # temp directory for testing only
gp_encrypt = gp %&gt;%
  select(-c(name, address1, address2, address3)) %&gt;%
  encrypt(postcode, telephone, public_key_path = file.path(temp_dir, "id_rsa2.pub"))
</code></pre>

<hr>
<h2 id='encrypt_file'>Encrypt a file</h2><span id='topic+encrypt_file'></span>

<h3>Description</h3>

<p>Encryption and decryption with asymmetric keys is computationally expensive.
This is how <code><a href="#topic+encrypt">encrypt</a></code> works, in order to allow each piece of data
in a data frame to be decrypted without compromise of the whole data frame.
This works on the presumption that each cell contains less than 245 bytes of
data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>encrypt_file(.path, crypt_file_name = NULL,
  public_key_path = "id_rsa.pub")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="encrypt_file_+3A_.path">.path</code></td>
<td>
<p>Quoted path to file to encrypt.</p>
</td></tr>
<tr><td><code id="encrypt_file_+3A_crypt_file_name">crypt_file_name</code></td>
<td>
<p>Optional new name to give encrypted file. Must end with &quot;.encrypter.bin&quot;.</p>
</td></tr>
<tr><td><code id="encrypt_file_+3A_public_key_path">public_key_path</code></td>
<td>
<p>Quoted path to public key, created with
<code><a href="#topic+genkeys">genkeys</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>File encryption requires a different approach as files are often larger in
size. This function encrypts a file using a a symmetric &quot;session&quot; key and the
AES-256 cipher. This key is itself then encrypted using a public key
generated using <code><a href="#topic+genkeys">genkeys</a></code>. In OpenSSL this combination is
referred to as an envelope.
</p>


<h3>Value</h3>

<p>The encrypted file is saved.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># This will run:
# Create example file to encrypt
# write.csv(gp, "gp.csv")
# genkeys()
# encrypt_file("gp.csv")

# For CRAN and testing:
## Not run: 
# Run only once in decrypt_file example
temp_dir = tempdir() # temp directory for testing only
genkeys(file.path(temp_dir, "id_rsa"))
write.csv(gp, file.path(temp_dir, "gp.csv"))
encrypt_file(file.path(temp_dir, "gp.csv"), public_key_path = file.path(temp_dir, "id_rsa.pub"))

## End(Not run)
</code></pre>

<hr>
<h2 id='encrypt_vec'>Encrypt a character vector using an RSA public/private key</h2><span id='topic+encrypt_vec'></span>

<h3>Description</h3>

<p>Not usually called directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>encrypt_vec(.data, public_key_path = "id_rsa.pub")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="encrypt_vec_+3A_.data">.data</code></td>
<td>
<p>A vector, which if not a character vector is coerced to one.</p>
</td></tr>
<tr><td><code id="encrypt_vec_+3A_public_key_path">public_key_path</code></td>
<td>
<p>Character. A quoted path to an RSA public key created
using <code><a href="#topic+genkeys">genkeys</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of ciphertexts.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
hospital_number = c("1010761111", "2010761212")
encrypt_vec(hospital_number)

## End(Not run)
</code></pre>

<hr>
<h2 id='genkeys'>Create and write RSA private and public keys</h2><span id='topic+genkeys'></span>

<h3>Description</h3>

<p>The first step for the <code>encryptr</code> workflow is to create a pair of
encryption keys. This uses the <code><a href="openssl.html#topic+openssl">openssl</a></code> package. The public key
is used to encrypt information and can be shared. The private key allows
decryption of the encrypted information. It requires a password to be set.
This password cannot be recovered if lost. If the file is lost or
overwritten, any data encrypted with the public key cannot be decrypted.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>genkeys(private_key_name = "id_rsa",
  public_key_name = paste0(private_key_name, ".pub"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="genkeys_+3A_private_key_name">private_key_name</code></td>
<td>
<p>Character string. Do not change default unless good
reason.</p>
</td></tr>
<tr><td><code id="genkeys_+3A_public_key_name">public_key_name</code></td>
<td>
<p>Character string. Do not change default unless good
reason.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Two files containing the public key and encrypted private key are
written to the working directory.
</p>


<h3>See Also</h3>

<p>encrypt decrypt
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Function can be used as this:
# genkeys()

# For CRAN purposes and testing
temp_dir = tempdir()
genkeys(file.path(temp_dir, "id_rsa3"))

</code></pre>

<hr>
<h2 id='gp'>General Practioner (family doctor) practices in Scotland 2018</h2><span id='topic+gp'></span>

<h3>Description</h3>

<p>From here: <a href="https://digital.nhs.uk/services/organisation-data-service/data-downloads/home-countries">https://digital.nhs.uk/services/organisation-data-service/data-downloads/home-countries</a>
Downloaded February 2019
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(gp)
</code></pre>


<h3>Format</h3>

<p>A data frame with 1212 rows and 12 variables</p>

<hr>
<h2 id='hex2raw'>Convert hexadecimal to raw</h2><span id='topic+hex2raw'></span>

<h3>Description</h3>

<p>Convert hexadecimal to raw
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hex2raw(.data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hex2raw_+3A_.data">.data</code></td>
<td>
</td></tr>
</table>

<hr>
<h2 id='raw2hex'>Convert raw to hexadecimal</h2><span id='topic+raw2hex'></span>

<h3>Description</h3>

<p>Convert raw to hexadecimal
</p>


<h3>Usage</h3>

<pre><code class='language-R'>raw2hex(.data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="raw2hex_+3A_.data">.data</code></td>
<td>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
