<!DOCTYPE html><html lang="en-US"><head><title>Help for package afdx</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {afdx}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#afdx-package'><p>afdx: Diagnosis performance indicators from attributable fraction estimates.</p></a></li>
<li><a href='#get_latent_model'><p>Template for the bayesian latent class model</p></a></li>
<li><a href='#logitexp'><p>Exponential logit model for two variables</p></a></li>
<li><a href='#make_cutoffs'><p>Cut-off points for densities and fever</p></a></li>
<li><a href='#make_n_cutoffs'><p>Make a defined number of categories having similar number of positives in each category</p></a></li>
<li><a href='#malaria_df1'><p>Synthetic data simulating a malaria crossectional</p></a></li>
<li><a href='#malaria_df2'><p>Synthetic data simulating a malaria crossectional</p></a></li>
<li><a href='#senspec'><p>S3 methods to estimate diagnosis performance of an afmodel</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Diagnosis Performance Using Attributable Fraction</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-05-24</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/johnaponte/afdx">https://github.com/johnaponte/afdx</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Estimate diagnosis performance (Sensitivity, Specificity, 
    Positive predictive value, Negative predicted value) of a diagnostic test
    where can not measure the golden standard but can estimate it using the 
    attributable fraction. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>maxLik, dplyr, magrittr, tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, ggplot2, DescTools, kableExtra, coda,
rjags, ggmcmc, spelling, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-05-24 09:38:44 UTC; apontej</td>
</tr>
<tr>
<td>Author:</td>
<td>John J. Aponte <a href="https://orcid.org/0000-0002-3014-3673"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Orvalho Augusto <a href="https://orcid.org/0000-0002-0005-3968"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>John J. Aponte &lt;john.j.aponte@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-05-25 11:50:12 UTC</td>
</tr>
</table>
<hr>
<h2 id='afdx-package'>afdx: Diagnosis performance indicators from attributable fraction estimates.</h2><span id='topic+afdx'></span><span id='topic+afdx-package'></span>

<h3>Description</h3>

<p>The afdx package provides functions to estimate the attributable fraction
using logit exponential model or  bayesian latent class model.
</p>


<h3>The logit exponential model</h3>

<p>The logitexp function estimated the logit exponential function fitting a
maximum likelihood model. The senspec() function estimate the sensitivity,
specificity, positive predicted value and negative predicted values for
the specified cut-off points.
</p>


<h3>The bayesian latent class model</h3>

<p>The get_latent_model() provides an rjags model template to estimate
the attributable fraction and the sensitivity, specificity, positive
predicted value and negative predicted value of the latent class model.
</p>
<p>@docType package
@name afdx
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: John J. Aponte <a href="mailto:john.j.aponte@gmail.com">john.j.aponte@gmail.com</a> (<a href="https://orcid.org/0000-0002-3014-3673">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Orvalho Augusto <a href="mailto:caveman@gmail.com">caveman@gmail.com</a> (<a href="https://orcid.org/0000-0002-0005-3968">ORCID</a>)
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/johnaponte/afdx">https://github.com/johnaponte/afdx</a>
</p>
</li></ul>


<hr>
<h2 id='get_latent_model'>Template for the bayesian latent class model</h2><span id='topic+get_latent_model'></span>

<h3>Description</h3>

<p>This function returns a template that can be use as model in an <code>rjags</code> model
it requires two vectors with the number of subjects in the symptoms,
like fever in the case of malaria (n) and the number of non-symptomatic (m)
in each of the categories of results of the diagnostic test. The first
category is reserved for the negatives by the diagnostic test (in the malaria
case those with asexual density 0) and the rest categories each one with
higher values than the previous category.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_latent_model()
</code></pre>


<h3>Details</h3>

<p>See:
Smith T, Vounatsou P. Logistic regression and latent class models for
estimating positivities in diagnostic assays with poor resolution.
Communications in Statistics - Theory and Methods. 1997 Jan;26(7):1677–700.
</p>
<p>Vounatsou P, Smith T, Smith AFM. Bayesian analysis of two-component mixture
distributions applied to estimating malaria attributable fractions. Journal
of the Royal Statistical Society: Series C (Applied Statistics).
1998;47(4):575–87.
</p>
<p>Müller I, Genton B, Rare L, Kiniboro B, Kastens W, Zimmerman P, et al.
Three different Plasmodium species show similar patterns of clinical
tolerance of malaria infection. Malar J. 2009;8(1):158.
</p>
<p>Plucinski MM, Rogier E, Dimbu PR, Fortes F, Halsey ES, Aidoo M, et al.
Performance of Antigen Concentration Thresholds for Attributing Fever to
Malaria among Outpatients in Angola. J Clin Microbiol. 2019;57(3).
</p>


<h3>Value</h3>

<p>a string value
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
 get_latent_model()
}
</code></pre>

<hr>
<h2 id='logitexp'>Exponential logit model for two variables</h2><span id='topic+logitexp'></span>

<h3>Description</h3>

<p>Fit a logit model of v.density on v.fever v.density with
a exponential coefficient for the v.density
</p>


<h3>Usage</h3>

<pre><code class='language-R'>logitexp(v.fever, v.density)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="logitexp_+3A_v.fever">v.fever</code></td>
<td>
<p>numeric vector of 0/1 indicating fever or equivalent</p>
</td></tr>
<tr><td><code id="logitexp_+3A_v.density">v.density</code></td>
<td>
<p>numeric vector of values &gt;= 0 indicating the density</p>
</td></tr>
</table>


<h3>Details</h3>

<p>logit(v.fever) ~ beta * (v. density ^ tau)
</p>
<p>This corresponds to the  model 3 describe by
Smith, T., Schellenberg, J.A., Hayes, R., 1994.
Attributable fraction estimates and case definitions for malaria
in endemic areas. Stat Med 13, 2345–2358.
</p>


<h3>Value</h3>

<p>S3 object of class afmodel with 4 components: data, model, coefficients
and the estimated attributable fraction.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+senspec">senspec</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
# Get the sample data
head(malaria_df1)
fit &lt;- logitexp(malaria_df1$fever, malaria_df1$density)
fit
senspec(fit,  c(1,100,500,1000,2000,4000,8000,16000, 32000,54000,100000))
}
</code></pre>

<hr>
<h2 id='make_cutoffs'>Cut-off points for densities and fever</h2><span id='topic+make_cutoffs'></span>

<h3>Description</h3>

<p>Generate the cutoffs at every change of density in the fever, but
first category is for density 0, and last category if possible have
no subjects with no fever.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_cutoffs(v.fever, v.density, add1 = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_cutoffs_+3A_v.fever">v.fever</code></td>
<td>
<p>numeric vector of 0/1 indicating fever or equivalent</p>
</td></tr>
<tr><td><code id="make_cutoffs_+3A_v.density">v.density</code></td>
<td>
<p>numeric vector of values &gt;= 0 indicating the density</p>
</td></tr>
<tr><td><code id="make_cutoffs_+3A_add1">add1</code></td>
<td>
<p>a logical value to indicate the category started with 1 is included</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector with the cutoff points
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
 make_cutoffs(malaria_df1$fever, malaria_df1$density, add1 = TRUE)
}
</code></pre>

<hr>
<h2 id='make_n_cutoffs'>Make a defined number of categories having similar number of positives in each category</h2><span id='topic+make_n_cutoffs'></span>

<h3>Description</h3>

<p>Generate the categories in a way that each category have at least the
<code>mintot</code> number of observation. It generate all possible categories
were there is change and then collapse to have minimum number of observations
in each category
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_n_cutoffs(v.fever, v.density, mintot, add1 = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_n_cutoffs_+3A_v.fever">v.fever</code></td>
<td>
<p>numeric vector of 0/1 indicating fever or equivalent</p>
</td></tr>
<tr><td><code id="make_n_cutoffs_+3A_v.density">v.density</code></td>
<td>
<p>numeric vector of values &gt;= 0 indicating the density</p>
</td></tr>
<tr><td><code id="make_n_cutoffs_+3A_mintot">mintot</code></td>
<td>
<p>minimum number of observations per category</p>
</td></tr>
<tr><td><code id="make_n_cutoffs_+3A_add1">add1</code></td>
<td>
<p>a logical value to indicate the category started with 1 is included</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector with the cutoff points
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
make_n_cutoffs(malaria_df1$fever, malaria_df1$density, mintot=50)
}
</code></pre>

<hr>
<h2 id='malaria_df1'>Synthetic data simulating a malaria crossectional</h2><span id='topic+malaria_df1'></span>

<h3>Description</h3>

<p>Simulated data with the main outcomes of a malaria crossectional,
fever and parasite density
</p>


<h3>Usage</h3>

<pre><code class='language-R'>malaria_df1
</code></pre>


<h3>Format</h3>

<p> a dataset with two variables
</p>

<dl>
<dt>fever</dt><dd><p>1 if fever or history of fever, 0 otherwise</p>
</dd>
<dt>density</dt><dd><p>asexual Plasmodium parasite density, in parasites per ul</p>
</dd>
</dl>



<hr>
<h2 id='malaria_df2'>Synthetic data simulating a malaria crossectional</h2><span id='topic+malaria_df2'></span>

<h3>Description</h3>

<p>Simulated data with the main outcomes of a malaria crossectional,
fever and parasite density
</p>


<h3>Usage</h3>

<pre><code class='language-R'>malaria_df2
</code></pre>


<h3>Format</h3>

<p> a dataset with two variables
</p>

<dl>
<dt>fever</dt><dd><p>1 if fever or history of fever, 0 otherwise</p>
</dd>
<dt>density</dt><dd><p>asexual Plasmodium parasite density, in parasites per ul</p>
</dd>
</dl>



<hr>
<h2 id='senspec'>S3 methods to estimate diagnosis performance of an afmodel</h2><span id='topic+senspec'></span><span id='topic+senspec.default'></span><span id='topic+senspec.afmodel'></span>

<h3>Description</h3>

<p>Estimate sensitivity, specificity, positive predicted value and
negative predicted value negative predictive value from an afmodel.
The estimated &quot;true&quot; negative and &quot;true&quot; positive are estimated using
the estimated overall attributable fraction and the predictive positive value
associated with each cut-off point as described by
Smith, T., Schellenberg, J.A., Hayes, R., 1994.
Attributable fraction estimates and case definitions for malaria
in endemic areas. Stat Med 13, 2345–2358.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>senspec(object, ...)

## Default S3 method:
senspec(object, ...)

## S3 method for class 'afmodel'
senspec(object, cutoff, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="senspec_+3A_object">object</code></td>
<td>
<p>with the data to calculate the sensitivity and specificity</p>
</td></tr>
<tr><td><code id="senspec_+3A_...">...</code></td>
<td>
<p>other parameters for the implementing functions</p>
</td></tr>
<tr><td><code id="senspec_+3A_cutoff">cutoff</code></td>
<td>
<p>vector of cut-off points to make the estimations</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a matrix with the columns sensitivity and specificity,
ppv (positive predicted value) and npv (negative predicted value)
</p>
<p>No return value. Raise an error.
</p>
<p>a matrix with the columns sensitivity and specificity,
ppv (positive predicted value) and npv (negative predicted value)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+logitexp">logitexp</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
# Get the sample data
head(malaria_df1)
fit &lt;- logitexp(malaria_df1$fever, malaria_df1$density)
fit
senspec(fit,  c(1,100,500,1000,2000,4000,8000,16000, 32000,54000,100000))
}
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
