<!DOCTYPE html><html><head><title>Help for package elevatr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {elevatr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bbox_to_sf'><p>Assumes geographic projection</p>
sf bbox to poly</a></li>
<li><a href='#clip_it'><p>function to clip the DEM</p></a></li>
<li><a href='#elevatr'><p>Access elevation data from the web</p></a></li>
<li><a href='#estimate_raster_size'><p>Estimate download size of DEMs</p></a></li>
<li><a href='#get_aws_points'><p>Get point elevation data from the AWS Terrain Tiles</p></a></li>
<li><a href='#get_aws_terrain'><p>Get a digital elevation model from the AWS Terrain Tiles</p></a></li>
<li><a href='#get_elev_point'><p>Get Point Elevation</p></a></li>
<li><a href='#get_elev_raster'><p>Get Raster Elevation</p></a></li>
<li><a href='#get_epqs'><p>Get point elevation data from the USGS Elevation Point Query Service</p></a></li>
<li><a href='#get_opentopo'><p>Get a digital elevation model from the Open Topography SRTM Version 3</p></a></li>
<li><a href='#get_opentopo_key'><p>OpenTopo Key</p></a></li>
<li><a href='#get_tilexy'><p>function to get a data.frame of all xyz tiles to download</p></a></li>
<li><a href='#lake'><p>SpatialPolygonsDataFrame of Lake Sunapee</p></a></li>
<li><a href='#latlong_to_tilexy'><p>function to convert lat long to xyz tile with decimals</p>
rounding to tile occurs in <code>get_tilexy</code></a></li>
<li><a href='#loc_check'><p>function to check input type and projection.  All input types convert to a</p>
SpatialPointsDataFrame for point elevation and bbx for raster.</a></li>
<li><a href='#merge_rasters'><p>Merge Rasters</p></a></li>
<li><a href='#proj_expand'><p>function to project bounding box and if needed expand it</p></a></li>
<li><a href='#pt_df'><p>Small data frame of xy locations</p></a></li>
<li><a href='#set_opentopo_key'><p>Store OpenTopography Key</p></a></li>
<li><a href='#sf_big'><p>A sf POINT dataset of random points</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Access Elevation Data from Various APIs</td>
</tr>
<tr>
<td>Version:</td>
<td>0.99.0</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jhollist/elevatr/">https://github.com/jhollist/elevatr/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jhollist/elevatr/issues/">https://github.com/jhollist/elevatr/issues/</a></td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jeffrey Hollister &lt;hollister.jeff@epa.gov&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Several web services are available that provide access to elevation
             data. This package provides access to many of those services and 
             returns elevation data either as an 'sf' simple features object 
             from point elevation services or as a 'raster' object from raster 
             elevation services. In future versions, 'elevatr' will drop 
             support for 'raster' and will instead return 'terra' objects. 
             Currently, the package supports access to the Amazon Web Services 
             Terrain Tiles <a href="https://registry.opendata.aws/terrain-tiles/">https://registry.opendata.aws/terrain-tiles/</a>, 
             the Open Topography Global Datasets 
             API <a href="https://opentopography.org/developers/">https://opentopography.org/developers/</a>, and the USGS 
             Elevation Point Query Service <a href="https://apps.nationalmap.gov/epqs/">https://apps.nationalmap.gov/epqs/</a>.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>httr, jsonlite, progressr, sf, terra, future, furrr, purrr,
units, slippymath, curl, raster, methods</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown, formatR, progress</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-12 11:22:36 UTC; JHollist</td>
</tr>
<tr>
<td>Author:</td>
<td>Jeffrey Hollister <a href="https://orcid.org/0000-0002-9254-9740"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Tarak Shah [ctb],
  Jakub Nowosad <a href="https://orcid.org/0000-0002-1057-3721"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Alec L. Robitaille
    <a href="https://orcid.org/0000-0002-4706-1762"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Marcus W. Beck <a href="https://orcid.org/0000-0002-4996-0059"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [rev],
  Mike Johnson <a href="https://orcid.org/0000-0002-5288-8350"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-12 21:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='bbox_to_sf'>Assumes geographic projection
sf bbox to poly</h2><span id='topic+bbox_to_sf'></span>

<h3>Description</h3>

<p>Assumes geographic projection
sf bbox to poly
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bbox_to_sf(bbox, prj = 4326)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bbox_to_sf_+3A_bbox">bbox</code></td>
<td>
<p>an sf bbox object</p>
</td></tr>
<tr><td><code id="bbox_to_sf_+3A_prj">prj</code></td>
<td>
<p>defaults to &quot;EPSG:4326&quot;</p>
</td></tr>
</table>

<hr>
<h2 id='clip_it'>function to clip the DEM</h2><span id='topic+clip_it'></span>

<h3>Description</h3>

<p>function to clip the DEM
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clip_it(rast, loc, expand, clip)
</code></pre>

<hr>
<h2 id='elevatr'>Access elevation data from the web</h2><span id='topic+elevatr'></span>

<h3>Description</h3>

<p>This package provides tools to access and download elevation data available
from the Mapzen elevation and Mapzen terrain service.
</p>

<hr>
<h2 id='estimate_raster_size'>Estimate download size of DEMs</h2><span id='topic+estimate_raster_size'></span>

<h3>Description</h3>

<p>Estimate download size of DEMs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_raster_size(locations, prj, src, z = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="estimate_raster_size_+3A_locations">locations</code></td>
<td>
<p>the locations</p>
</td></tr>
<tr><td><code id="estimate_raster_size_+3A_prj">prj</code></td>
<td>
<p>prj string as set earlier by get_elev_point or get_elev_raster</p>
</td></tr>
<tr><td><code id="estimate_raster_size_+3A_src">src</code></td>
<td>
<p>the src</p>
</td></tr>
<tr><td><code id="estimate_raster_size_+3A_z">z</code></td>
<td>
<p>zoom level if source is aws</p>
</td></tr>
</table>

<hr>
<h2 id='get_aws_points'>Get point elevation data from the AWS Terrain Tiles</h2><span id='topic+get_aws_points'></span>

<h3>Description</h3>

<p>Function for accessing elevation data from AWS and extracting the elevations
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_aws_points(
  locations,
  z = 5,
  units = c("meters", "feet"),
  verbose = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_aws_points_+3A_locations">locations</code></td>
<td>
<p>Either a <code>data.frame</code> with x (e.g. longitude) as the 
first column and y (e.g. latitude) as the second column, a 
<code>SpatialPoints</code>/<code>SpatialPointsDataFrame</code>, or a 
<code>sf</code> <code>POINT</code> or <code>MULTIPOINT</code> object.   
Elevation for these points will be returned in the 
originally supplied class.</p>
</td></tr>
<tr><td><code id="get_aws_points_+3A_z">z</code></td>
<td>
<p>The zoom level to return.  The zoom ranges from 1 to 14.  Resolution
of the resultant raster is determined by the zoom and latitude.  For 
details on zoom and resolution see the documentation from Mapzen at 
<a href="https://github.com/tilezen/joerd/blob/master/docs/data-sources.md#what-is-the-ground-resolution">https://github.com/tilezen/joerd/blob/master/docs/data-sources.md#what-is-the-ground-resolution</a>.  
default value is 5 is supplied.</p>
</td></tr>
<tr><td><code id="get_aws_points_+3A_units">units</code></td>
<td>
<p>Character string of either meters or feet. Conversions for 
'aws' are handled in R as the AWS terrain tiles are served in 
meters.</p>
</td></tr>
<tr><td><code id="get_aws_points_+3A_verbose">verbose</code></td>
<td>
<p>Report back messages.</p>
</td></tr>
<tr><td><code id="get_aws_points_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <code>get_elev_raster</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with a SpatialPointsDataFrame or sf POINT or MULTIPOINT object with 
elevation added to the data slot and a character of the elevation units
</p>

<hr>
<h2 id='get_aws_terrain'>Get a digital elevation model from the AWS Terrain Tiles</h2><span id='topic+get_aws_terrain'></span>

<h3>Description</h3>

<p>This function uses the AWS Terrain Tile service to retrieve an elevation
raster from the geotiff service.  It accepts a <code>sf::st_bbox</code> object as 
input and returns a single raster object covering that extent.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_aws_terrain(
  locations,
  z,
  prj,
  expand = NULL,
  ncpu = future::availableCores() - 1,
  serial = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_aws_terrain_+3A_locations">locations</code></td>
<td>
<p>Either a <code>data.frame</code> of x (long) and y (lat), an 
<code>sp</code>, <code>sf</code>, or <code>raster</code> object as input.</p>
</td></tr>
<tr><td><code id="get_aws_terrain_+3A_z">z</code></td>
<td>
<p>The zoom level to return.  The zoom ranges from 1 to 14.  Resolution
of the resultant raster is determined by the zoom and latitude.  For 
details on zoom and resolution see the documentation from Mapzen at 
<a href="https://github.com/tilezen/joerd/blob/master/docs/data-sources.md#what-is-the-ground-resolution">https://github.com/tilezen/joerd/blob/master/docs/data-sources.md#what-is-the-ground-resolution</a></p>
</td></tr>
<tr><td><code id="get_aws_terrain_+3A_prj">prj</code></td>
<td>
<p>A valid input to <code><a href="sf.html#topic+st_crs">st_crs</a></code> If a <code>sf</code> 
object or a <code>terra</code> object is provided as the <code>locations</code>, 
the prj is optional and will be taken from <code>locations</code>.  This 
argument is required for a <code>data.frame</code> of locations.</p>
</td></tr>
<tr><td><code id="get_aws_terrain_+3A_expand">expand</code></td>
<td>
<p>A numeric value of a distance, in map units, used to expand the
bounding box that is used to fetch the terrain tiles. This can 
be used for features that fall close to the edge of a tile and 
additional area around the feature is desired. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_aws_terrain_+3A_ncpu">ncpu</code></td>
<td>
<p>Number of CPU's to use when downloading aws tiles.</p>
</td></tr>
<tr><td><code id="get_aws_terrain_+3A_serial">serial</code></td>
<td>
<p>Logical to determine if API should be hit in serial or in 
parallel.  TRUE will use purrr, FALSE will use furrr.</p>
</td></tr>
<tr><td><code id="get_aws_terrain_+3A_...">...</code></td>
<td>
<p>Extra configuration parameters to be passed to httr::GET.  Common 
usage is to adjust timeout.  This is done as 
<code>config=timeout(x)</code> where <code>x</code> is a numeric value in 
seconds.  Multiple configuration functions may be passed as a 
vector.</p>
</td></tr>
</table>


<h3>Source</h3>

<p>Attribution: Mapzen terrain tiles contain 3DEP, SRTM, and GMTED2010 
content courtesy of the U.S. Geological Survey and ETOPO1 content 
courtesy of U.S. National Oceanic and Atmospheric Administration. 
<a href="https://github.com/tilezen/joerd/tree/master/docs">https://github.com/tilezen/joerd/tree/master/docs</a>
</p>

<hr>
<h2 id='get_elev_point'>Get Point Elevation</h2><span id='topic+get_elev_point'></span>

<h3>Description</h3>

<p>This function provides access to point elevations using either the USGS 
Elevation Point Query Service (US Only) or by extracting point elevations 
from the AWS Terrain Tiles.  The function accepts a <code>data.frame</code> of x 
(long) and y (lat) or a <code>sf</code> <code>POINT</code> or <code>MULTIPOINT</code> object as 
input.  A <code>sf</code> <code>POINT</code> or <code>MULTIPOINT</code> object is returned with 
elevation and elevation units as an added <code>data.frame</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_elev_point(
  locations,
  prj = NULL,
  src = c("epqs", "aws"),
  overwrite = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_elev_point_+3A_locations">locations</code></td>
<td>
<p>Either a <code>data.frame</code> with x (e.g. longitude) as the 
first column and y (e.g. latitude) as the second column, a 
<code>SpatialPoints</code>/<code>SpatialPointsDataFrame</code>, or a 
<code>sf</code> <code>POINT</code> or <code>MULTIPOINT</code> object.   
Elevation for these points will be returned in the 
originally supplied class.</p>
</td></tr>
<tr><td><code id="get_elev_point_+3A_prj">prj</code></td>
<td>
<p>A valid input to <code><a href="sf.html#topic+st_crs">st_crs</a></code>.   This 
argument is required for a <code>data.frame</code> of locations and optional
for <code>sf</code> locations.</p>
</td></tr>
<tr><td><code id="get_elev_point_+3A_src">src</code></td>
<td>
<p>A character indicating which API to use, either &quot;epqs&quot; or &quot;aws&quot; 
accepted. The &quot;epqs&quot; source is relatively slow for larger numbers 
of points (e.g. &gt; 500).  The &quot;aws&quot; source may be quicker in these 
cases provided the points are in a similar geographic area.  The 
&quot;aws&quot; source downloads a DEM using <code>get_elev_raster</code> and then
extracts the elevation for each point.</p>
</td></tr>
<tr><td><code id="get_elev_point_+3A_overwrite">overwrite</code></td>
<td>
<p>A logical indicating that existing <code>elevation</code> and 
<code>elev_units</code> columns should be overwritten.  Default is 
FALSE and <code>get_elev_point</code> will error if these columns 
already exist.</p>
</td></tr>
<tr><td><code id="get_elev_point_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to get_epqs or get_aws_points.  When 
using &quot;aws&quot; as the source, pay attention to the 'z' argument.  A 
defualt of 5 is used, but this uses a raster with a large ~4-5 km 
pixel.  Additionally, the source data changes as zoom levels 
increase.  
Read <a href="https://github.com/tilezen/joerd/blob/master/docs/data-sources.md#what-is-the-ground-resolution">https://github.com/tilezen/joerd/blob/master/docs/data-sources.md#what-is-the-ground-resolution</a> 
for details.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Function returns an <code>sf</code> object in the projection specified by 
the <code>prj</code> argument.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(elevatr)
library(sf)
library(terra)

mts &lt;- data.frame(x = c(-71.3036, -72.8145), 
                  y = c(44.2700, 44.5438), 
                  names = c("Mt. Washington", "Mt. Mansfield"))
ll_prj &lt;- 4326
mts_sf &lt;- st_as_sf(x = mts, coords = c("x", "y"), crs = ll_prj)
#Empty Raster
mts_raster &lt;- rast(mts_sf, nrow = 5, ncol = 5)
# Raster with cells for each location
mts_raster_loc &lt;- terra::rasterize(mts_sf, rast(mts_sf, nrow = 10, ncol = 10))

get_elev_point(locations = mts, prj = ll_prj)
get_elev_point(locations = mts, units="feet", prj = ll_prj)
get_elev_point(locations = mts_sf)
get_elev_point(locations = mts_raster)
get_elev_point(locations = mts_raster_loc)


# Code to split into a loop and grab point at a time.
# This is usually faster for points that are spread apart 
 
library(dplyr)

elev &lt;- vector("numeric", length = nrow(mts))
for(i in seq_along(mts)){
elev[i]&lt;-get_elev_point(locations = mts[i,], prj = ll_prj, src = "aws", 
                        z = 10)$elevation}
mts_elev &lt;- cbind(mts, elev)
mts_elev

## End(Not run)

</code></pre>

<hr>
<h2 id='get_elev_raster'>Get Raster Elevation</h2><span id='topic+get_elev_raster'></span>

<h3>Description</h3>

<p>Several web services provide access to raster elevation. Currently, this 
function provides access to the Amazon Web Services Terrain Tiles and the 
Open Topography global datasets API. The function accepts a <code>data.frame</code> 
of x (long) and y (lat), an <code>sf</code>, or <code>terra</code> object as input.  A 
<code>RasterLayer</code> object is returned. In subsequent versions, a <code>SpatRaster</code>
will be returned.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_elev_raster(
  locations,
  z,
  prj = NULL,
  src = c("aws", "gl3", "gl1", "alos", "srtm15plus"),
  expand = NULL,
  clip = c("tile", "bbox", "locations"),
  verbose = TRUE,
  neg_to_na = FALSE,
  override_size_check = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_elev_raster_+3A_locations">locations</code></td>
<td>
<p>Either a <code>data.frame</code> of x (long) and y (lat), an 
<code>sf</code>, or <code>terra</code> object as input.</p>
</td></tr>
<tr><td><code id="get_elev_raster_+3A_z">z</code></td>
<td>
<p>The zoom level to return.  The zoom ranges from 1 to 14.  Resolution
of the resultant raster is determined by the zoom and latitude.  For 
details on zoom and resolution see the documentation from Mapzen at 
<a href="https://github.com/tilezen/joerd/blob/master/docs/data-sources.md#what-is-the-ground-resolution">https://github.com/tilezen/joerd/blob/master/docs/data-sources.md#what-is-the-ground-resolution</a>.
The z is not required for the OpenTopography data sources.</p>
</td></tr>
<tr><td><code id="get_elev_raster_+3A_prj">prj</code></td>
<td>
<p>A valid input to <code><a href="sf.html#topic+st_crs">st_crs</a></code> If a <code>sf</code> 
object or a <code>terra</code> object is provided as the <code>locations</code>, 
the prj is optional and will be taken from <code>locations</code>.  This 
argument is required for a <code>data.frame</code> of locations.</p>
</td></tr>
<tr><td><code id="get_elev_raster_+3A_src">src</code></td>
<td>
<p>A character indicating which API to use.  Currently supports &quot;aws&quot; 
and &quot;gl3&quot;, &quot;gl1&quot;, &quot;alos&quot;, or &quot;srtm15plus&quot; from the OpenTopography API global 
datasets. &quot;aws&quot; is the default.</p>
</td></tr>
<tr><td><code id="get_elev_raster_+3A_expand">expand</code></td>
<td>
<p>A numeric value of a distance, in map units, used to expand the
bounding box that is used to fetch the terrain tiles. This can 
be used for features that fall close to the edge of a tile or 
for retrieving additional area around the feature. If the 
feature is a single point, the area it returns will be small if 
clip is set to &quot;bbox&quot;. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_elev_raster_+3A_clip">clip</code></td>
<td>
<p>A character value used to determine clipping of returned DEM.
The default value is &quot;tile&quot; which returns the full tiles.  Other 
options are &quot;bbox&quot; which returns the DEM clipped to the bounding 
box of the original locations (or expanded bounding box if used), 
or &quot;locations&quot; if the spatial data (e.g. polygons) in the input 
locations should be used to clip the DEM.  Locations are not used 
to clip input point datasets.  Instead the bounding box is used.</p>
</td></tr>
<tr><td><code id="get_elev_raster_+3A_verbose">verbose</code></td>
<td>
<p>Toggles on and off the note about units and coordinate 
reference system.</p>
</td></tr>
<tr><td><code id="get_elev_raster_+3A_neg_to_na">neg_to_na</code></td>
<td>
<p>Some of the data sources return large negative numbers as 
missing data.  When the end result is a projected those 
large negative numbers can vary.  When set to TRUE, only 
zero and positive values are returned.  Default is FALSE.</p>
</td></tr>
<tr><td><code id="get_elev_raster_+3A_override_size_check">override_size_check</code></td>
<td>
<p>Boolean to override size checks.  Any download 
between 100 Mb and 500Mb report a message but
continue.  Between 500Mb and 3000Mb requires 
interaction and greater than 3000Mb fails.  These
can be overriden with this argument set to TRUE.</p>
</td></tr>
<tr><td><code id="get_elev_raster_+3A_...">...</code></td>
<td>
<p>Extra arguments to pass to <code>httr::GET</code> via a named vector, 
<code>config</code>.   See
<code><a href="#topic+get_aws_terrain">get_aws_terrain</a></code> for more details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently, the <code>get_elev_raster</code> function utilizes the 
Amazon Web Services 
(<a href="https://registry.opendata.aws/terrain-tiles/">https://registry.opendata.aws/terrain-tiles/</a>) terrain 
tiles and the Open Topography Global Datasets API 
(<a href="https://opentopography.org/developers">https://opentopography.org/developers</a>).  
</p>
<p>The AWS Terrain Tiles data is provided via x, y, and z tiles (see 
<a href="https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames">https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames</a> for 
details.) The x and y are determined from the bounding box of the 
object submitted for <code>locations</code> argument, and the z argument 
must be specified by the user.
</p>


<h3>Value</h3>

<p>Function returns a <code>RasterLayer</code> in the projection 
specified by the <code>prj</code> argument or in the projection of the 
provided locations.  In subsequent versions, a <code>SpatRaster</code>
will be returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(elevatr)
library(sf)
data(lake)
lake_buff  &lt;- st_buffer(lake, 1000)
loc_df &lt;- data.frame(x = runif(6,min=sf::st_bbox(lake)$xmin, 
                               max=sf::st_bbox(lake)$xmax),
                     y = runif(6,min=sf::st_bbox(lake)$ymin, 
                               max=sf::st_bbox(lake)$ymax))
                               
x &lt;- get_elev_raster(locations = loc_df, prj = st_crs(lake) , z=10)
x &lt;- get_elev_raster(lake, z = 12)
x &lt;- get_elev_raster(lake, src = "gl3", expand = 5000)
x &lt;- get_elev_raster(lake_buff, z = 10, clip = "locations")

## End(Not run)
</code></pre>

<hr>
<h2 id='get_epqs'>Get point elevation data from the USGS Elevation Point Query Service</h2><span id='topic+get_epqs'></span>

<h3>Description</h3>

<p>Function for accessing elevation data from the USGS epqs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_epqs(
  locations,
  units = c("meters", "feet"),
  ncpu = future::availableCores() - 1,
  serial = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_epqs_+3A_locations">locations</code></td>
<td>
<p>A SpatialPointsDataFrame of the location(s) for which you 
wish to return elevation. The first column is Longitude and 
the second column is Latitude.</p>
</td></tr>
<tr><td><code id="get_epqs_+3A_units">units</code></td>
<td>
<p>Character string of either meters or feet. Conversions for 
'epqs' are handled by the API itself.</p>
</td></tr>
<tr><td><code id="get_epqs_+3A_ncpu">ncpu</code></td>
<td>
<p>Number of CPU's to use when downloading epqs data.</p>
</td></tr>
<tr><td><code id="get_epqs_+3A_serial">serial</code></td>
<td>
<p>Logical to determine if API should be hit in serial or in 
parallel.  TRUE will use purrr, FALSE will use furrr.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with a SpatialPointsDataFrame or sf POINT or MULTIPOINT object with 
elevation added to the data slot and a character of the elevation units
</p>

<hr>
<h2 id='get_opentopo'>Get a digital elevation model from the Open Topography SRTM Version 3</h2><span id='topic+get_opentopo'></span>

<h3>Description</h3>

<p>This function uses the Open Topography SRTM Version 3 files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_opentopo(locations, src, prj, expand = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_opentopo_+3A_locations">locations</code></td>
<td>
<p>Either a <code>data.frame</code> of x (long) and y (lat), an 
<code>sp</code>, an <code>sf</code>, or <code>raster</code> object as input.</p>
</td></tr>
<tr><td><code id="get_opentopo_+3A_prj">prj</code></td>
<td>
<p>A valid input to <code><a href="sf.html#topic+st_crs">st_crs</a></code> If a <code>sf</code> 
object or a <code>terra</code> object is provided as the <code>locations</code>, 
the prj is optional and will be taken from <code>locations</code>.  This 
argument is required for a <code>data.frame</code> of locations.</p>
</td></tr>
<tr><td><code id="get_opentopo_+3A_expand">expand</code></td>
<td>
<p>A numeric value of a distance, in map units, used to expand the
bounding box that is used to fetch the SRTM data.</p>
</td></tr>
<tr><td><code id="get_opentopo_+3A_...">...</code></td>
<td>
<p>Extra configuration parameters to be passed to httr::GET.  Common 
usage is to adjust timeout.  This is done as 
<code>config=timeout(x)</code> where <code>x</code> is a numeric value in 
seconds.  Multiple configuration functions may be passed as a 
vector.</p>
</td></tr>
</table>


<h3>Source</h3>

<p>Attribution: Details here
</p>

<hr>
<h2 id='get_opentopo_key'>OpenTopo Key</h2><span id='topic+get_opentopo_key'></span>

<h3>Description</h3>

<p>The OpenTopography API now requires an API Key.  This function will grab your
key from an .Renviron file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_opentopo_key()
</code></pre>

<hr>
<h2 id='get_tilexy'>function to get a data.frame of all xyz tiles to download</h2><span id='topic+get_tilexy'></span>

<h3>Description</h3>

<p>function to get a data.frame of all xyz tiles to download
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_tilexy(bbx, z)
</code></pre>

<hr>
<h2 id='lake'>SpatialPolygonsDataFrame of Lake Sunapee</h2><span id='topic+lake'></span>

<h3>Description</h3>

<p>This example data is a SpatialPolygonsDataFrame 
of a single lake, Lake Sunapee.  Used for examples and tests.
</p>


<h3>Format</h3>

<p>SpatialPolygonDataframe with 1 lakes, each with 13 variables
</p>

<hr>
<h2 id='latlong_to_tilexy'>function to convert lat long to xyz tile with decimals
rounding to tile occurs in <code>get_tilexy</code></h2><span id='topic+latlong_to_tilexy'></span>

<h3>Description</h3>

<p>function to convert lat long to xyz tile with decimals
rounding to tile occurs in <code>get_tilexy</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>latlong_to_tilexy(lon_deg, lat_deg, zoom)
</code></pre>

<hr>
<h2 id='loc_check'>function to check input type and projection.  All input types convert to a
SpatialPointsDataFrame for point elevation and bbx for raster.</h2><span id='topic+loc_check'></span>

<h3>Description</h3>

<p>function to check input type and projection.  All input types convert to a
SpatialPointsDataFrame for point elevation and bbx for raster.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loc_check(locations, prj = NULL)
</code></pre>

<hr>
<h2 id='merge_rasters'>Merge Rasters</h2><span id='topic+merge_rasters'></span>

<h3>Description</h3>

<p>Merge multiple downloaded raster files into a single file. The input 'target_prj' 
describes the projection for the new grid.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>merge_rasters(
  raster_list,
  target_prj,
  method = "bilinear",
  returnRaster = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="merge_rasters_+3A_raster_list">raster_list</code></td>
<td>
<p>a list of raster file paths to be mosaiced</p>
</td></tr>
<tr><td><code id="merge_rasters_+3A_target_prj">target_prj</code></td>
<td>
<p>the target projection of the output raster</p>
</td></tr>
<tr><td><code id="merge_rasters_+3A_method">method</code></td>
<td>
<p>the method for resampling/reprojecting. Default is 'bilinear'. 
Options can be found [here](https://gdal.org/programs/gdalwarp.html#cmdoption-gdalwarp-r)</p>
</td></tr>
<tr><td><code id="merge_rasters_+3A_returnraster">returnRaster</code></td>
<td>
<p>if TRUE, return a raster object (default), else, return the file path to the object</p>
</td></tr>
</table>

<hr>
<h2 id='proj_expand'>function to project bounding box and if needed expand it</h2><span id='topic+proj_expand'></span>

<h3>Description</h3>

<p>function to project bounding box and if needed expand it
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proj_expand(locations, prj, expand)
</code></pre>

<hr>
<h2 id='pt_df'>Small data frame of xy locations</h2><span id='topic+pt_df'></span>

<h3>Description</h3>

<p>Example data frame of locations for use in examples and text
</p>


<h3>Format</h3>

<p>A data.frame with two columns, x(long) and y(lat)
</p>

<hr>
<h2 id='set_opentopo_key'>Store OpenTopography Key</h2><span id='topic+set_opentopo_key'></span>

<h3>Description</h3>

<p>This function stores an OpenTopgrapy key in a local .Renviron file. If the
.Renviron file exists, the key will be appended. This will typically only 
need to be done once per machine.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_opentopo_key(key)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_opentopo_key_+3A_key">key</code></td>
<td>
<p>An OpenTopography API Key as a character.  For details on obtaining an 
OpenTopgraphy key see <a href="https://opentopography.org/blog/introducing-api-keys-access-opentopography-global-datasets">https://opentopography.org/blog/introducing-api-keys-access-opentopography-global-datasets</a>.</p>
</td></tr>
</table>

<hr>
<h2 id='sf_big'>A sf POINT dataset of random points</h2><span id='topic+sf_big'></span>

<h3>Description</h3>

<p>This sf POINT dataset is 250 uniform random points to be used for 
examples and tests
</p>


<h3>Format</h3>

<p>A sf POINT object
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
