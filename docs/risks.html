<!DOCTYPE html><html><head><title>Help for package risks</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {risks}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#breastcancer'><p>Breast Cancer Data</p></a></li>
<li><a href='#confint.duplicate'><p>Clustering-corrected confidence intervals for case duplication model</p></a></li>
<li><a href='#confint.margstd_boot'><p>Bootstrap confidence intervals</p></a></li>
<li><a href='#confint.margstd_delta'><p>Delta method confidence intervals</p></a></li>
<li><a href='#confint.robpoisson'><p>Robust confidence intervals for Poisson model</p></a></li>
<li><a href='#conv.test'><p>Helper function for logbin and addreg packages</p></a></li>
<li><a href='#print.risks'><p>Print model</p></a></li>
<li><a href='#print.summary.risks'><p>Print model summary</p></a></li>
<li><a href='#riskratio'><p>Fit risk ratio and risk difference models</p></a></li>
<li><a href='#risks'><p>risks: Estimate risk ratios and risk differences using regression</p></a></li>
<li><a href='#rr_rd_mantel_haenszel'><p>Risk Ratios and Risk Differences from Mantel-Haenszel Estimators</p></a></li>
<li><a href='#summary.duplicate'><p>Summary for logistic model with case duplication and cluster-robust covariance</p></a></li>
<li><a href='#summary.margstd_boot'><p>Summary for models using marginal standardization</p></a></li>
<li><a href='#summary.margstd_delta'><p>Summary for models using marginal standardization with delta method SEs</p></a></li>
<li><a href='#summary.risks'><p>Generate model summary</p></a></li>
<li><a href='#summary.robpoisson'><p>Summary for Poisson model with robust covariance</p></a></li>
<li><a href='#tidy.risks'><p>Tidy model summaries for risks models</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Estimate Risk Ratios and Risk Differences using Regression</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Risk ratios and risk differences are estimated using regression 
  models that allow for binary, categorical, and continuous exposures and 
  confounders. Implemented are marginal standardization after fitting logistic 
  models (g-computation) with delta-method and bootstrap standard errors, 
  Miettinen's case-duplication approach (Schouten et al. 1993, 
  &lt;<a href="https://doi.org/10.1002%2Fsim.4780121808">doi:10.1002/sim.4780121808</a>&gt;), log-binomial (Poisson) models with empirical 
  variance (Zou 2004, &lt;<a href="https://doi.org/10.1093%2Faje%2Fkwh090">doi:10.1093/aje/kwh090</a>&gt;), binomial models with starting 
  values from Poisson models (Spiegelman and Hertzmark 2005, 
  &lt;<a href="https://doi.org/10.1093%2Faje%2Fkwi188">doi:10.1093/aje/kwi188</a>&gt;), and others.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://stopsack.github.io/risks/">https://stopsack.github.io/risks/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/stopsack/risks/issues">https://github.com/stopsack/risks/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>addreg, covr, knitr, logbin, MASS, rmarkdown, testthat</td>
</tr>
<tr>
<td>Imports:</td>
<td>boot, bcaboot, broom, dplyr, purrr, rlang, sandwich, stats,
tibble, tidyr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-06-12 12:41:09 UTC; stopsack</td>
</tr>
<tr>
<td>Author:</td>
<td>Konrad Stopsack <a href="https://orcid.org/0000-0002-0722-1311"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Travis Gerke <a href="https://orcid.org/0000-0002-9500-8907"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Konrad Stopsack &lt;stopsack@post.harvard.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-06-13 08:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='breastcancer'>Breast Cancer Data</h2><span id='topic+breastcancer'></span>

<h3>Description</h3>

<p>A cohort of women with breast cancer and complete follow-up, as used by
Spiegelman and Hertzmark (Am J Epidemiol 2005) and
Greenland (Am J Epidemiol 2004).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>breastcancer
</code></pre>


<h3>Format</h3>



<h4><code>breastcancer</code></h4>

<p>A tibble with 192 rows and 3 columns:
</p>

<dl>
<dt>death</dt><dd><p>Death, binary: 0, 1</p>
</dd>
<dt>stage</dt><dd><p>Cancer stage, 3 categories</p>
</dd>
<dt>receptor</dt><dd><p>Hormone receptor status, binary: &quot;High&quot;, &quot;Low&quot;</p>
</dd>
</dl>
<p>...

</p>



<h3>Source</h3>

<p>Newman SC. Biostatistical methods in epidemiology.
New York, NY: Wiley, 2001, table 5.3
</p>

<hr>
<h2 id='confint.duplicate'>Clustering-corrected confidence intervals for case duplication model</h2><span id='topic+confint.duplicate'></span>

<h3>Description</h3>

<p>Estimate confidence intervals for the case duplication model
with robust/sandwich/empirical covariance structure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'duplicate'
confint(object, parm = NULL, level = 0.95, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="confint.duplicate_+3A_object">object</code></td>
<td>
<p>Fitted model</p>
</td></tr>
<tr><td><code id="confint.duplicate_+3A_parm">parm</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="confint.duplicate_+3A_level">level</code></td>
<td>
<p>Confidence level, defaults to 0.95</p>
</td></tr>
<tr><td><code id="confint.duplicate_+3A_...">...</code></td>
<td>
<p>Additional arguments, not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Matrix: First column, lower bound; second column, upper bound.
</p>

<hr>
<h2 id='confint.margstd_boot'>Bootstrap confidence intervals</h2><span id='topic+confint.margstd_boot'></span>

<h3>Description</h3>

<p>Confidence intervals for models fit using marginal standardization
based on parametric bootstrapping.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'margstd_boot'
confint(
  object,
  parm = NULL,
  level = 0.95,
  bootrepeats = 1000,
  bootci = c("bca", "normal", "nonpar"),
  jacksd = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="confint.margstd_boot_+3A_object">object</code></td>
<td>
<p>Model fitted through marginal standardization</p>
</td></tr>
<tr><td><code id="confint.margstd_boot_+3A_parm">parm</code></td>
<td>
<p>Not used, for compatibility</p>
</td></tr>
<tr><td><code id="confint.margstd_boot_+3A_level">level</code></td>
<td>
<p>Confidence level, defaults to 0.95.</p>
</td></tr>
<tr><td><code id="confint.margstd_boot_+3A_bootrepeats">bootrepeats</code></td>
<td>
<p>Bootstrap repeats. Defaults to 1000. Consider increasing.</p>
</td></tr>
<tr><td><code id="confint.margstd_boot_+3A_bootci">bootci</code></td>
<td>
<p>Type of bootstrap confidence interval:
</p>

<ul>
<li> <p><code>"bca"</code> Default. Parametric BCa (bias-corrected accelerated)
confidence intervals.
</p>
</li>
<li> <p><code>"normal"</code> Parametric normality-based confidence intervals,
which require lower repeat numbers but are less accurate and
may result in invalid results for ratios.
</p>
</li>
<li> <p><code>"nonpar"</code> Non-parametric BCa confidence intervals,
which should be used with caution because of the risk
of sparse-data bias with non-parametric bootstrapping.
</p>
</li></ul>
</td></tr>
<tr><td><code id="confint.margstd_boot_+3A_jacksd">jacksd</code></td>
<td>
<p>Return jackknife Monte-Carlo error for the confidence limits?
Only functional with BCa confidence intervals. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="confint.margstd_boot_+3A_...">...</code></td>
<td>
<p>Not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Matrix: First column, lower bound; second column, upper bound.
</p>

<hr>
<h2 id='confint.margstd_delta'>Delta method confidence intervals</h2><span id='topic+confint.margstd_delta'></span>

<h3>Description</h3>

<p>Confidence intervals for models fit using marginal standardization
based on the melta method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'margstd_delta'
confint(object, parm = NULL, level = 0.95, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="confint.margstd_delta_+3A_object">object</code></td>
<td>
<p>Model fitted through marginal standardization, delta method</p>
</td></tr>
<tr><td><code id="confint.margstd_delta_+3A_parm">parm</code></td>
<td>
<p>Not used, for compatibility</p>
</td></tr>
<tr><td><code id="confint.margstd_delta_+3A_level">level</code></td>
<td>
<p>Confidence level, defaults to <code>0.95</code>.</p>
</td></tr>
<tr><td><code id="confint.margstd_delta_+3A_...">...</code></td>
<td>
<p>Not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Matrix: First column, lower bound; second column, upper bound.
</p>

<hr>
<h2 id='confint.robpoisson'>Robust confidence intervals for Poisson model</h2><span id='topic+confint.robpoisson'></span>

<h3>Description</h3>

<p>Estimate confidence intervals for the Poisson model
with robust/sandwich/empirical covariance structure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'robpoisson'
confint(object, parm = NULL, level = 0.95, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="confint.robpoisson_+3A_object">object</code></td>
<td>
<p>Fitted model</p>
</td></tr>
<tr><td><code id="confint.robpoisson_+3A_parm">parm</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="confint.robpoisson_+3A_level">level</code></td>
<td>
<p>Confidence level, defaults to 0.95</p>
</td></tr>
<tr><td><code id="confint.robpoisson_+3A_...">...</code></td>
<td>
<p>Additional arguments, not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Matrix: First column, lower bound; second column, upper bound.
</p>

<hr>
<h2 id='conv.test'>Helper function for logbin and addreg packages</h2><span id='topic+conv.test'></span>

<h3>Description</h3>

<p>This is a 1:1 copy of a function from logbin that is needed but not exported
by logbin and addreg.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>conv.test(theta1, theta2, epsilon)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="conv.test_+3A_theta1">theta1</code></td>
<td>
<p>theta1</p>
</td></tr>
<tr><td><code id="conv.test_+3A_theta2">theta2</code></td>
<td>
<p>theta2</p>
</td></tr>
<tr><td><code id="conv.test_+3A_epsilon">epsilon</code></td>
<td>
<p>epsilon</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical.
</p>

<hr>
<h2 id='print.risks'>Print model</h2><span id='topic+print.risks'></span>

<h3>Description</h3>

<p>Print fitted risks model. The only change, compared to <code>print.glm()</code>,
is the addition of the main type of model: relative risk or risk difference.
If multiple models were fitted via <code>approach = "all"</code>, then the
first converged model will be printed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'risks'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.risks_+3A_x">x</code></td>
<td>
<p>Fitted model</p>
</td></tr>
<tr><td><code id="print.risks_+3A_...">...</code></td>
<td>
<p>Passed to print.glm()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for printing
</p>

<hr>
<h2 id='print.summary.risks'>Print model summary</h2><span id='topic+print.summary.risks'></span>

<h3>Description</h3>

<p>Print summaries for &quot;risks&quot; models. The printout is the same as
for regular summaries of generalized linear models fit via
<code>stats::glm()</code>, except that the type of &quot;risks&quot; model
is printed first (e.g., &quot;Poisson model with robust covariance&quot;)
and confidence intervals for model parameters are printed at the end.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'summary.risks'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.summary.risks_+3A_x">x</code></td>
<td>
<p>Model</p>
</td></tr>
<tr><td><code id="print.summary.risks_+3A_...">...</code></td>
<td>
<p>Passed on</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for printing
</p>

<hr>
<h2 id='riskratio'>Fit risk ratio and risk difference models</h2><span id='topic+riskratio'></span><span id='topic+riskdiff'></span>

<h3>Description</h3>

<p><code>riskratio</code> and <code>riskdiff</code> provide a flexible interface to fitting
risk ratio and risk difference models.
</p>
<p>In cohort studies with a binary outcome, risk ratios and risk differences
are typically more appropriate to report than odds ratios from logistic
regression, yet such models have historically been difficult to implement in
standard software.
</p>
<p>The risks package selects an efficient way to fit risk ratio or
risk difference models successfully, which will converge whenever logistic
models converge. Optionally, a specific approach to model fitting can also be
requested. Implemented are Poisson models with robust covariance, binomial
models, logistic models with case duplication, binomial models aided in
convergence by starting values obtained through Poisson models or
logistic models with case duplication, binomial models fitted via
combinatorial expectation maximization (optionally also with Poisson starting
values), and estimates obtained via marginal standardization after logistic
regression with bootstrapped or delta method for confidence intervals.
</p>
<p>Adjusting for covariates (e.g., confounders) in the model specification
(<code>formula =</code>) is possible.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>riskratio(
  formula,
  data,
  approach = c("auto", "all", "robpoisson", "duplicate", "glm", "glm_startp",
    "glm_startd", "glm_cem", "glm_cem_startp", "margstd_boot", "margstd_delta",
    "logistic", "legacy"),
  variable = NULL,
  at = NULL,
  ...
)

riskdiff(
  formula,
  data,
  approach = c("auto", "all", "robpoisson", "glm", "glm_startp", "glm_cem",
    "glm_cem_startp", "margstd_boot", "margstd_delta", "legacy"),
  variable = NULL,
  at = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="riskratio_+3A_formula">formula</code></td>
<td>
<p>A formula object of the form <code>response ~ predictors</code>.</p>
</td></tr>
<tr><td><code id="riskratio_+3A_data">data</code></td>
<td>
<p>A <code>tibble</code> or <code>data.frame</code> object.</p>
</td></tr>
<tr><td><code id="riskratio_+3A_approach">approach</code></td>
<td>
<p>Optional: Method for model fitting.
</p>

<ul>
<li> <p><code>"auto"</code> (default) is recommended; it will return results of
<code>"margstd_delta"</code> unless interaction terms between exposure and
confounders are included. This these cases, results from
<code>"margstd_boot"</code> are returned.
</p>
</li>
<li> <p><code>"all"</code> will attempt to fit
the model via all implemented approaches to allow for comparisons.
</p>
</li>
<li> <p><code>"legacy"</code> selects the most efficient approach that converges and
ensures that predicted probabilities are within range (&lt; 1).
</p>
</li></ul>

<p>The other options allow for directly selecting a fitting approach,
some of which may not converge or yield out-of-range predicted
probabilities. See full documentation for details.
</p>

<ul>
<li> <p><code>"glm"</code> Binomial model.
</p>
</li>
<li> <p><code>"glm_startp"</code> Binomial model with starting values from Poisson
model.
</p>
</li>
<li> <p><code>"glm_startd"</code> Binomial model with starting values from logistic
model with case duplication.
</p>
</li>
<li> <p><code>"robpoisson"</code> Poisson model with robust covariance.
</p>
</li>
<li> <p><code>"duplicate"</code> Logistic model with duplication of cases. Only
available in <code>riskratio()</code>.
</p>
</li>
<li> <p><code>"glm_cem"</code> Binomial model fitted with combinatorial expectation
maximization.
</p>
</li>
<li> <p><code>"glm_cem_startp"</code> As <code>glm_cem</code>, with Poisson starting values.
</p>
</li>
<li> <p><code>"margstd_boot"</code> Marginal standardization after logistic model,
bootstrap standard errors/confidence intervals.
</p>
</li>
<li> <p><code>"margstd_delta"</code> Marginal standardization after logistic model,
delta method standard errors/confidence intervals.
</p>
</li>
<li> <p><code>"logistic"</code> For comparison only: the logistic model. Only available
in <code>riskratio()</code>.
</p>
</li></ul>
</td></tr>
<tr><td><code id="riskratio_+3A_variable">variable</code></td>
<td>
<p>Optional: exposure variable to use for marginal
standardization. If <code>variable</code> is not provided and marginal
standardization is attempted, then the first variable in the model
is used as the exposure. Levels are determined automatically for
variables types <code>logical</code>, <code>character</code>, <code>factor</code> and can
optionally be supplied via <code>at =</code>.</p>
</td></tr>
<tr><td><code id="riskratio_+3A_at">at</code></td>
<td>
<p>Optional: Levels of exposure variable <code>variable</code> for marginal
standardization. <code>at =</code> determines the levels at which contrasts of
the exposure are to be assessed. The level listed first is used as the
reference. Levels must exist in the data for character, factor or ordered
factor variables. For numeric variables, levels that do not exist in the
data can be interpolations or extrapolations; if levels exceed the
extremes of the data (extrapolation), a warning will be displayed.</p>
</td></tr>
<tr><td><code id="riskratio_+3A_...">...</code></td>
<td>
<p>Optional: Further arguments passed to fitting functions
(<code>glm</code>, <code>logbin</code>, or <code>addreg</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Fitted model. This object can be passed on to post-processing
functions:
</p>

<ul>
<li> <p><code><a href="#topic+summary.risks">summary.risks</a></code>: an overview of results
(risks-specific S3 methods: <code><a href="#topic+summary.robpoisson">summary.robpoisson</a></code>,
<code><a href="#topic+summary.margstd_boot">summary.margstd_boot</a></code>,
<code><a href="#topic+summary.margstd_delta">summary.margstd_delta</a></code>).
</p>
</li>
<li> <p><code><a href="#topic+tidy.risks">tidy.risks</a></code>: a tibble of coefficients and confidence
intervals.
</p>
</li></ul>

<p>Standard post-processing functions can also be used:
</p>

<ul>
<li> <p><code><a href="stats.html#topic+coef">coef</a></code>: a vector of coefficients.
</p>
</li>
<li> <p><code><a href="stats.html#topic+confint">confint</a></code>: a matrix of confidence intervals
(risks-specific S3 methods: <code><a href="#topic+confint.robpoisson">confint.robpoisson</a></code>,
<code><a href="#topic+confint.margstd_boot">confint.margstd_boot</a></code>,
<code><a href="#topic+confint.margstd_delta">confint.margstd_delta</a></code>).
</p>
</li>
<li> <p><code><a href="stats.html#topic+predict.glm">predict.glm</a>(type = "response")</code>: fitted values
(predictions).
</p>
</li>
<li> <p><code><a href="stats.html#topic+residuals">residuals</a></code>: residuals.
</p>
</li></ul>

<p>If model fitting using all possible approaches was requested via
<code>approach = "all"</code>, then their results can be retrieved from the
list <code>all_models</code> in the returned object (e.g.,
<code>fit$all_models[[1]]</code>, <code>fit$all_models[[2]]</code>, etc.).
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>riskratio()</code>: Fit risk ratio models
</p>
</li>
<li> <p><code>riskdiff()</code>: Fit risk difference models
</p>
</li></ul>


<h3>References</h3>

<p>Wacholder S. Binomial regression in GLIM: Estimating risk ratios
and risk differences. Am J Epidemiol 1986;123:174-184.
(Binomial regression models; <code>approach = "glm"</code>)
</p>
<p>Spiegelman D, Hertzmark E. Easy SAS Calculations for Risk or
Prevalence Ratios and Differences. Am J Epidemiol 2005;162:199-200.
(Binomial models fitted used starting values from Poisson models;
<code>approach = "glm_start"</code>)
</p>
<p>Zou G. A modified Poisson regression approach to prospective
studies with binary data. Am J Epidemiol 2004;159:702-706.
(Poisson model with robust/sandwich standard errors;
<code>approach = "robpoisson"</code>)
</p>
<p>Schouten EG, Dekker JM, Kok FJ, Le Cessie S, Van Houwelingen HC,
Pool J, Vandenbroucke JP. Risk ratio and rate ratio estimation in
case-cohort designs: hypertension and cardiovascular mortality.
Stat Med 1993;12:1733–45; (Logistic model with case duplication and
cluster-robust standard errors, <code>approach = "duplicate"</code>).
</p>
<p>Donoghoe MW, Marschner IC. logbin: An R Package for
Relative Risk Regression Using the Log-Binomial Model.
J Stat Softw 2018;86(9). (Log-binomial models fitted via combinatorial
expectation maximization; <code>riskratio(approach = "glm_cem")</code>
</p>
<p>Donoghoe MW, Marschner IC. Stable computational methods
for additive binomial models with application to adjusted risk differences.
Comput Stat Data Anal 2014;80:184-96. (Additive binomial models
fitted via combinatorial expectation maximization;
<code>riskdiff(approach = "glm_cem")</code>)
</p>
<p>Localio AR, Margolis DJ, Berlin JA.
Relative risks and confidence intervals were easily computed
indirectly from multivariable logistic regression.
J Clin Epidemiol 2007;60(9):874-82. (Marginal standardization after fitting
a logistic model; <code>approach = "margstd_boot"</code>)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(breastcancer)  # Cohort study with binary outcome
                    # See for details: help(breastcancer)

# Risk ratio model
fit_rr &lt;- riskratio(formula = death ~ stage + receptor, data = breastcancer)
fit_rr
summary(fit_rr)

# Risk difference model
fit_rd &lt;- riskdiff(formula = death ~ stage + receptor, data = breastcancer)
fit_rd
summary(fit_rd)
</code></pre>

<hr>
<h2 id='risks'>risks: Estimate risk ratios and risk differences using regression</h2><span id='topic+risks'></span>

<h3>Description</h3>

<p>The risks package allows for fitting risk ratio and risk difference
models using regression.
</p>


<h3>risks functions</h3>

<p><code><a href="#topic+riskratio">riskratio</a></code>: Fit risk ratio models.
</p>
<p><code><a href="#topic+riskdiff">riskdiff</a></code>: Fit risk difference models.
</p>
<p><code><a href="#topic+summary.risks">summary.risks</a></code>: Summarize fitted model.
</p>
<p><code><a href="#topic+tidy.risks">tidy.risks</a></code>: Tibble (data frame) of parameters,
coefficients, standard errors, confidence intervals.
</p>
<p><code><a href="#topic+confint.robpoisson">confint.robpoisson</a></code>,
<code><a href="#topic+confint.duplicate">confint.duplicate</a></code>,
<code><a href="#topic+confint.margstd_boot">confint.margstd_boot</a></code>,
<code><a href="#topic+confint.margstd_delta">confint.margstd_delta</a></code>: Confidence intervals. (Standard
confidence intervals for generalized linear models are used for other
models.)
</p>


<h3>See Also</h3>

<p><a href="https://github.com/stopsack/risks">https://github.com/stopsack/risks</a>
</p>

<hr>
<h2 id='rr_rd_mantel_haenszel'>Risk Ratios and Risk Differences from Mantel-Haenszel Estimators</h2><span id='topic+rr_rd_mantel_haenszel'></span>

<h3>Description</h3>

<p>This function implements the Mantel-Haenszel estimators for risk ratio and
risk differences for a binary or categorical exposure and one or more
categorical confounder(s). Compare to estimates from regression models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rr_rd_mantel_haenszel(
  data,
  exposure,
  outcome,
  confounders,
  estimand = c("rr", "rd"),
  conf.level = 0.95
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rr_rd_mantel_haenszel_+3A_data">data</code></td>
<td>
<p>Data set.</p>
</td></tr>
<tr><td><code id="rr_rd_mantel_haenszel_+3A_exposure">exposure</code></td>
<td>
<p>Exposure variable. Must be binary or categorical. The first
level is treated as unexposed.</p>
</td></tr>
<tr><td><code id="rr_rd_mantel_haenszel_+3A_outcome">outcome</code></td>
<td>
<p>Outcome variable. Must be binary.</p>
</td></tr>
<tr><td><code id="rr_rd_mantel_haenszel_+3A_confounders">confounders</code></td>
<td>
<p>Optional. Binary or categorical variable(s) to perform
stratification over. Supply more than one variable using
<code>confounders = c(var1, var2)</code>.</p>
</td></tr>
<tr><td><code id="rr_rd_mantel_haenszel_+3A_estimand">estimand</code></td>
<td>
<p>Optional. <code>"rr"</code> for risk ratio; <code>"rd"</code> for risk
difference. Defaults to <code>"rr"</code>.</p>
</td></tr>
<tr><td><code id="rr_rd_mantel_haenszel_+3A_conf.level">conf.level</code></td>
<td>
<p>Optional. Confidence level. Defaults to <code>0.95</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Tibble in <code><a href="broom.html#topic+tidy">tidy</a></code> format with
</p>

<ul>
<li> <p><code>term</code> the (non-reference) exposure levels
</p>
</li>
<li> <p><code>estimate</code> Risk ratio (on log scale) or risk difference
</p>
</li>
<li> <p><code>std.error</code>, <code>conf.low</code>, and <code>conf.high</code>  Square-root of M-H
variance estimate, and the corresponding confidence limits (on log scale
for RR)
</p>
</li>
<li> <p><code>model</code> always <code>"mh"</code>
</p>
</li>
<li> <p><code>estimand</code> <code>"rr"</code> or <code>"rd"</code>
</p>
</li></ul>



<h3>References</h3>

<p>Greenland S, Rothman KJ. Introduction to Stratified Analysis. In: Rothman KJ,
Greenland S, Lash TL. Modern Epidemiology. 3rd edn. Lippincott Williams &amp;
Wilkins: Philadelphia, PA 2008. Page 275. Risk ratios: formulae 15-18, -20,
-22. Risk differences: formulae 15-18, -19, -21.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Newman SC. Biostatistical methods in epidemiology. New York, NY:
# Wiley, 2001, table 5.3

library(tibble)  # used to set up example data
dat &lt;- tibble(
  death    = c(rep(1, 54), rep(0, 138)),
  stage    = c(rep("Stage I", 7),  rep("Stage II", 26), rep("Stage III", 21),
               rep("Stage I", 60), rep("Stage II", 70), rep("Stage III", 8)),
  receptor = c(rep("Low", 2),  rep("High", 5),  rep("Low", 9),  rep("High", 17),
               rep("Low", 12), rep("High", 9),  rep("Low", 10), rep("High", 50),
               rep("Low", 13), rep("High", 57), rep("Low", 2),  rep("High", 6)))

# Risk difference
rr_rd_mantel_haenszel(
  data = dat,
  exposure = stage,
  outcome = death,
  confounders = receptor,
  estimand = "rd")

# Risk ratio, log scale:
result &lt;- rr_rd_mantel_haenszel(
  data = dat,
  exposure = stage,
  outcome = death,
  confounders = receptor,
  estimand = "rr")
result

# Risk ratio, exponentiated:
result %&gt;%
  dplyr::mutate(dplyr::across(.cols = c(estimate, conf.low, conf.high),
                              .fns = exp))
</code></pre>

<hr>
<h2 id='summary.duplicate'>Summary for logistic model with case duplication and cluster-robust covariance</h2><span id='topic+summary.duplicate'></span>

<h3>Description</h3>

<p>Summarize results from fitting a logistic model with case duplication and
cluster-robust covariance.
The output is the same as for a regular <code>summary(glm(...))</code>,
except for using cluster-robust standard errors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'duplicate'
summary(
  object,
  dispersion = NULL,
  correlation = FALSE,
  symbolic.cor = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.duplicate_+3A_object">object</code></td>
<td>
<p>Model</p>
</td></tr>
<tr><td><code id="summary.duplicate_+3A_dispersion">dispersion</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="summary.duplicate_+3A_correlation">correlation</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="summary.duplicate_+3A_symbolic.cor">symbolic.cor</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="summary.duplicate_+3A_...">...</code></td>
<td>
<p>Other arguments, not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Model summary (list)
</p>

<hr>
<h2 id='summary.margstd_boot'>Summary for models using marginal standardization</h2><span id='topic+summary.margstd_boot'></span>

<h3>Description</h3>

<p>Summary for models using marginal standardization
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'margstd_boot'
summary(
  object,
  dispersion = NULL,
  correlation = FALSE,
  symbolic.cor = FALSE,
  level = 0.95,
  bootrepeats = 1000,
  bootci = c("bca", "normal", "nonpar"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.margstd_boot_+3A_object">object</code></td>
<td>
<p>Model</p>
</td></tr>
<tr><td><code id="summary.margstd_boot_+3A_dispersion">dispersion</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="summary.margstd_boot_+3A_correlation">correlation</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="summary.margstd_boot_+3A_symbolic.cor">symbolic.cor</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="summary.margstd_boot_+3A_level">level</code></td>
<td>
<p>Confidence level, defaults to <code>0.95</code>.</p>
</td></tr>
<tr><td><code id="summary.margstd_boot_+3A_bootrepeats">bootrepeats</code></td>
<td>
<p>Bootstrap repeats for standard errors. Defaults to 1000.
Consider increasing.</p>
</td></tr>
<tr><td><code id="summary.margstd_boot_+3A_bootci">bootci</code></td>
<td>
<p>Type of bootstrap confidence interval:
</p>

<ul>
<li> <p><code>"bca"</code> Default. Parametric BCa (bias-corrected accelerated)
confidence intervals.
</p>
</li>
<li> <p><code>"normal"</code> Parametric normality-based confidence intervals,
which require lower repeat numbers but are less accurate and
may result in invalid results for ratios.
</p>
</li>
<li> <p><code>"nonpar"</code> Non-parametric BCa confidence intervals,
which should be used with caution because of the risk
of sparse-data bias with non-parametric bootstrapping.
</p>
</li></ul>
</td></tr>
<tr><td><code id="summary.margstd_boot_+3A_...">...</code></td>
<td>
<p>Not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Model summary (list)
</p>

<hr>
<h2 id='summary.margstd_delta'>Summary for models using marginal standardization with delta method SEs</h2><span id='topic+summary.margstd_delta'></span>

<h3>Description</h3>

<p>Summary for models using marginal standardization with delta method SEs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'margstd_delta'
summary(
  object,
  dispersion = NULL,
  correlation = FALSE,
  symbolic.cor = FALSE,
  level = 0.95,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.margstd_delta_+3A_object">object</code></td>
<td>
<p>Model</p>
</td></tr>
<tr><td><code id="summary.margstd_delta_+3A_dispersion">dispersion</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="summary.margstd_delta_+3A_correlation">correlation</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="summary.margstd_delta_+3A_symbolic.cor">symbolic.cor</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="summary.margstd_delta_+3A_level">level</code></td>
<td>
<p>Confidence level, defaults to <code>0.95</code>.</p>
</td></tr>
<tr><td><code id="summary.margstd_delta_+3A_...">...</code></td>
<td>
<p>Not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Model summary (list)
</p>

<hr>
<h2 id='summary.risks'>Generate model summary</h2><span id='topic+summary.risks'></span>

<h3>Description</h3>

<p>Determine type of risks model fitted and
generate appropriate summary.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'risks'
summary(object, conf.int = TRUE, default = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.risks_+3A_object">object</code></td>
<td>
<p>Fitted model</p>
</td></tr>
<tr><td><code id="summary.risks_+3A_conf.int">conf.int</code></td>
<td>
<p>Add confidence intervals to printout? Defaults to TRUE.</p>
</td></tr>
<tr><td><code id="summary.risks_+3A_default">default</code></td>
<td>
<p>Normal confidence intervals via confint.default()?
Default to TRUE. By setting <code>default = FALSE</code>, profiling-based
confidence intervals can be calculated for binomial models.</p>
</td></tr>
<tr><td><code id="summary.risks_+3A_...">...</code></td>
<td>
<p>Passed on</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If multiple models were fitted (<code>approach = "all"</code>), then
the first converged model is displayed. Other models can be accessed
via the returned list <code>$all_models</code>.
</p>


<h3>Value</h3>

<p>Model summary (list)
</p>

<hr>
<h2 id='summary.robpoisson'>Summary for Poisson model with robust covariance</h2><span id='topic+summary.robpoisson'></span>

<h3>Description</h3>

<p>Summarize results from fitting a Poisson model with
robust/empirical/sandwich covariance.
The output is the same as for a regular <code>summary(glm(...))</code>,
except for using robust standard errors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'robpoisson'
summary(
  object,
  dispersion = NULL,
  correlation = FALSE,
  symbolic.cor = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.robpoisson_+3A_object">object</code></td>
<td>
<p>Model</p>
</td></tr>
<tr><td><code id="summary.robpoisson_+3A_dispersion">dispersion</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="summary.robpoisson_+3A_correlation">correlation</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="summary.robpoisson_+3A_symbolic.cor">symbolic.cor</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="summary.robpoisson_+3A_...">...</code></td>
<td>
<p>Other arguments, not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Model summary (list)
</p>

<hr>
<h2 id='tidy.risks'>Tidy model summaries for risks models</h2><span id='topic+tidy.risks'></span>

<h3>Description</h3>

<p>Obtain a tibble (data frame) with parameters,
coefficients, standard errors, confidence limits,
and p-values. A column with the type of model fitted is added.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'risks'
tidy(
  x,
  conf.int = TRUE,
  conf.level = 0.95,
  bootrepeats = 1000,
  bootci = c("bca", "normal", "nonpar"),
  bootverbose = FALSE,
  exponentiate = FALSE,
  default = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tidy.risks_+3A_x">x</code></td>
<td>
<p>Model</p>
</td></tr>
<tr><td><code id="tidy.risks_+3A_conf.int">conf.int</code></td>
<td>
<p>Show confidence intervals?</p>
</td></tr>
<tr><td><code id="tidy.risks_+3A_conf.level">conf.level</code></td>
<td>
<p>Optional. Confidence level. Defaults to <code>0.95</code>.</p>
</td></tr>
<tr><td><code id="tidy.risks_+3A_bootrepeats">bootrepeats</code></td>
<td>
<p>Optional. Number of bootstrap repeats.
Applicable to models fitted via marginal standardization and bootstrapping
(<code>approach = "margstd_boot"</code>). Defaults to 1000. Strongly recommended
to increase repeats to &gt;&gt;1000.</p>
</td></tr>
<tr><td><code id="tidy.risks_+3A_bootci">bootci</code></td>
<td>
<p>Optional and applicable for <code>approach = "margstd_boot"</code>
only. Type of bootstrap confidence interval:
</p>

<ul>
<li> <p><code>"bca"</code> Default. Parametric BCa (bias-corrected accelerated)
confidence intervals.
</p>
</li>
<li> <p><code>"normal"</code> Parametric normality-based confidence intervals,
which require lower repeat numbers but are less accurate and
may result in invalid results for ratios.
</p>
</li>
<li> <p><code>"nonpar"</code> Non-parametric BCa confidence intervals,
which should be used with caution because of the risk
of sparse-data bias with non-parametric bootstrapping.
</p>
</li></ul>
</td></tr>
<tr><td><code id="tidy.risks_+3A_bootverbose">bootverbose</code></td>
<td>
<p>Optional. Add values of <code>bootrepeats</code> and
<code>bootci</code> parameters and the jackknife-based Monte-Carlo error for the
confidence limits (only for <code>type = "bca"</code>) to the returned tibble?
Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="tidy.risks_+3A_exponentiate">exponentiate</code></td>
<td>
<p>Optional. Exponentiate coefficients and confidence
limits? Defaults to FALSE. Setting <code>exponentiate = TRUE</code> is useful for
relative risk models (log links).</p>
</td></tr>
<tr><td><code id="tidy.risks_+3A_default">default</code></td>
<td>
<p>Use default, normality-based confidence intervals?
Defaults to TRUE. With <code>default = FALSE</code>, for binomial models only,
profile likelihood-based confidence intervals can be calculated.</p>
</td></tr>
<tr><td><code id="tidy.risks_+3A_...">...</code></td>
<td>
<p>Passed on</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If multiple types of models are fitted, <code>tidy()</code> can be used
to parameters for all models at once, in one tibble. The last
column of the tibble includes the name of the model. See examples.
</p>


<h3>Value</h3>

<p>tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Define example data
library(broom)  # provides tidy() function
dat &lt;- tibble::tibble(
  death    = c(rep(1, 54), rep(0, 138)),
  stage    = c(rep("Stage I", 7),  rep("Stage II", 26), rep("Stage III", 21),
               rep("Stage I", 60), rep("Stage II", 70), rep("Stage III", 8)),
  receptor = c(rep("Low", 2),  rep("High", 5),  rep("Low", 9),  rep("High", 17),
               rep("Low", 12), rep("High", 9),  rep("Low", 10), rep("High", 50),
               rep("Low", 13), rep("High", 57), rep("Low", 2),  rep("High", 6)))
# Fit and tidy the model
fit_rr &lt;- riskratio(formula = death ~ stage + receptor, data = dat)
tidy(fit_rr)

# Marginal standardization,
# increase number of bootstrap repeats:

fit_rr &lt;- riskratio(
  formula = death ~ stage + receptor, data = dat,
  approach = "margstd_boot")
tidy(fit_rr, bootrepeats = 2000)


# Multiple types of models fitted:

fit_rr &lt;- riskratio(formula = death ~ stage + receptor, data = dat,
                    approach = "all")
tidy(fit_rr)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
