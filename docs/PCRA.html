<!DOCTYPE html><html lang="en"><head><title>Help for package PCRA</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {PCRA}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#PCRA-package'><p>PCRA: Companion to Portfolio Construction and Risk Analysis</p></a></li>
<li><a href='#barplotWts'><p>A Barplot of a Set of Portfolio Weights</p></a></li>
<li><a href='#bootEfronts'><p>Bootstrapped Efficient Frontiers</p></a></li>
<li><a href='#chart.Efront'><p>Create Efficient Frontier</p></a></li>
<li><a href='#cleanOutliers'><p>Clean Returns Outliers</p></a></li>
<li><a href='#crsp.returns8'><p>crsp.returns8</p></a></li>
<li><a href='#datFF3W'><p>Fama-French Weekly 3-Factor Model</p></a></li>
<li><a href='#datFF4W'><p>Fama-French-Carhart Weekly 4-Factor Model</p></a></li>
<li><a href='#divHHI'><p>HHI Based Diversification Index</p></a></li>
<li><a href='#ellipsesPlotPCRA.covfm'><p>Overlaid Correlations Ellipses Plots</p></a></li>
<li><a href='#factorsSPGMI'><p>factorsSPGMI</p></a></li>
<li><a href='#FRBinterestRates'><p>Federal Reserve Board Interest Rates</p></a></li>
<li><a href='#getPCRAData'><p>Download CRSP and SPGMI Data</p></a></li>
<li><a href='#gfunds5'><p>gfunds5</p></a></li>
<li><a href='#invensysEPS'><p>Earnings per Share of Invensys</p></a></li>
<li><a href='#KRest'><p>Kurtosis Estimator</p></a></li>
<li><a href='#levgLongShort'><p>Long Short Portfolio Leverage</p></a></li>
<li><a href='#mathEfront'><p>Efficient Frontiers from Returns</p></a></li>
<li><a href='#mathEfrontCashRisky'><p>Math Efficient Frontier: Cash and Risky Assets</p></a></li>
<li><a href='#mathEfrontRisky'><p>Efficient Frontier of Risky Stocks</p></a></li>
<li><a href='#mathEfrontRiskyMuCov'><p>Efficient Frontier</p></a></li>
<li><a href='#mathGmv'><p>Global Minimum Variance Portfolio (GMV)</p></a></li>
<li><a href='#mathGmvMuCov'><p>Global Minimum Variance Portfolios From Mu and Cov</p></a></li>
<li><a href='#mathTport'><p>Tangency Portfolio Weights</p></a></li>
<li><a href='#mathWtsEfrontRisky'><p>Efficient Frontier Portfolio Weights Vectors</p></a></li>
<li><a href='#mathWtsEfrontRiskyMuCov'><p>Efficient Frontier Portfolio Weights Vectors</p></a></li>
<li><a href='#meanReturns4Types'><p>Four Types of Mean Returns</p></a></li>
<li><a href='#opt.outputMvoPCRA'><p>Optimal Portfolio Weights and Performance</p></a></li>
<li><a href='#plotLSandRobustSFM'><p>Robust and Least Square Single Factor Model (SFM) Fits</p></a></li>
<li><a href='#qqnormDatWindat'><p>qqnormDatWindat</p></a></li>
<li><a href='#retDD'><p>Stock with Ticker DD</p></a></li>
<li><a href='#retEDS'><p>Stock with Ticker EDS</p></a></li>
<li><a href='#retFNB'><p>Stock with Ticker FNB</p></a></li>
<li><a href='#retKBH'><p>Stock with Ticker KBH</p></a></li>
<li><a href='#retMER'><p>Stock with Ticker MER</p></a></li>
<li><a href='#retOFG'><p>Stock with Ticker OFG</p></a></li>
<li><a href='#retPSC'><p>Stock with Ticker PSC</p></a></li>
<li><a href='#returnsCRSPxts'><p>Select CRSP Stocks Returns</p></a></li>
<li><a href='#retVHI'><p>Stock with Ticker VHI</p></a></li>
<li><a href='#retWTS'><p>Stock with Ticker WTS</p></a></li>
<li><a href='#selectCRSPandSPGMI'><p>Select and merge data from the stocksCRSP and factorsSPGMI data sets</p></a></li>
<li><a href='#SKest'><p>Skewness estimator</p></a></li>
<li><a href='#SP400Industrials'><p>SP400Industrials</p></a></li>
<li><a href='#SP425Industrials'><p>SP425Industrials</p></a></li>
<li><a href='#SP500'><p>SP500</p></a></li>
<li><a href='#SP500from1967to2007'><p>SP500from1967to2007</p></a></li>
<li><a href='#SPIndustrials'><p>SPIndustrials</p></a></li>
<li><a href='#stocksCRSP'><p>stocksCRSP</p></a></li>
<li><a href='#stocksCRSPxts'><p>Select CRSP Stocks Returns</p></a></li>
<li><a href='#strategies'><p>Hedge Fund Strategies Returns</p></a></li>
<li><a href='#tsPlotMP'><p>Lattice Multi-Panel Time Series Plots</p></a></li>
<li><a href='#turnOver'><p>Portfolio Turnover</p></a></li>
<li><a href='#winsorize'><p>Winsorize Data</p></a></li>
<li><a href='#winsorMean'><p>Winsorized Mean</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Companion to Portfolio Construction and Risk Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-08-27</td>
</tr>
<tr>
<td>Description:</td>
<td>A collection of functions and data sets that support teaching
  a quantitative finance MS level course on Portfolio Construction and Risk
  Analysis, and the writing of a textbook for such a course.  The package is
  unique in providing several real-world data sets that may be used for problem
  assignments and student projects.  The data sets include cross-sections of
  stock data from the Center for Research on Security Prices, LLC (CRSP),
  corresponding factor exposures data from S&amp;P Global, and several SP500 data
  sets.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0),</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>PerformanceAnalytics, PortfolioAnalytics, boot, methods, xts,
zoo, lattice, corpcor, data.table, quadprog, RobStatTM,
robustbase, R.cache</td>
</tr>
<tr>
<td>Suggests:</td>
<td>R.rsp</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>true</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>LazyDataCompression:</td>
<td>xz</td>
</tr>
<tr>
<td>Copyright:</td>
<td>(c) 2022-2023</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>R.rsp</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-30 03:30:40 UTC; cocok</td>
</tr>
<tr>
<td>Author:</td>
<td>Doug Martin [cre, aut],
  Alexios Galanos [ctb],
  Kirk Li [aut, ctb],
  Jon Spinney [ctb],
  Thomas Philips [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Doug Martin &lt;martinrd3d@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-30 04:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='PCRA-package'>PCRA: Companion to Portfolio Construction and Risk Analysis</h2><span id='topic+PCRA'></span><span id='topic+PCRA-package'></span>

<h3>Description</h3>

<p>A collection of functions and data sets that support teaching a quantitative finance MS level course on Portfolio Construction and Risk Analysis, and the writing of a textbook for such a course. The package is unique in providing several real-world data sets that may be used for problem assignments and student projects. The data sets include cross-sections of stock data from the Center for Research on Security Prices, LLC (CRSP), corresponding factor exposures data from S&amp;P Global, and several SP500 data sets.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Doug Martin <a href="mailto:martinrd3d@gmail.com">martinrd3d@gmail.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Kirk Li <a href="mailto:cocokecoli@gmail.com">cocokecoli@gmail.com</a> [contributor]
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Alexios Galanos <a href="mailto:alexios@4dscape.com">alexios@4dscape.com</a> [contributor]
</p>
</li>
<li><p> Jon Spinney <a href="mailto:Jon.Spinney@vestcor.org">Jon.Spinney@vestcor.org</a> [contributor]
</p>
</li>
<li><p> Thomas Philips <a href="mailto:tkpmep@gmail.com">tkpmep@gmail.com</a> [contributor]
</p>
</li></ul>


<hr>
<h2 id='barplotWts'>A Barplot of a Set of Portfolio Weights</h2><span id='topic+barplotWts'></span>

<h3>Description</h3>

<p>Uses the R barplot function to make a barplot of efficient 
frontier weights. See the manual page for barplot()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>barplotWts(
  wts.efront,
  legend.text = NULL,
  col = NULL,
  ylab = NULL,
  xlab = c("MU", "VOL"),
  bar.ylim = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="barplotWts_+3A_wts.efront">wts.efront</code></td>
<td>
<p>Matrix of weights along the efficient frontier</p>
</td></tr>
<tr><td><code id="barplotWts_+3A_legend.text">legend.text</code></td>
<td>
<p>Vector of text for the legend</p>
</td></tr>
<tr><td><code id="barplotWts_+3A_col">col</code></td>
<td>
<p>Vector of colors for the bars</p>
</td></tr>
<tr><td><code id="barplotWts_+3A_ylab">ylab</code></td>
<td>
<p>A label for the y axis</p>
</td></tr>
<tr><td><code id="barplotWts_+3A_xlab">xlab</code></td>
<td>
<p>A label for the x axis</p>
</td></tr>
<tr><td><code id="barplotWts_+3A_bar.ylim">bar.ylim</code></td>
<td>
<p>Limits of the y axis for barplot</p>
</td></tr>
<tr><td><code id="barplotWts_+3A_...">...</code></td>
<td>
<p>additional parameters from barplot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, just a barplot of efficient frontier weights
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(barplotWts)
</code></pre>

<hr>
<h2 id='bootEfronts'>Bootstrapped Efficient Frontiers</h2><span id='topic+bootEfronts'></span>

<h3>Description</h3>

<p>Computes and plots bootstrapped portfolio efficient frontiers, 
with optional bullet points for GMV portfolios and tangency portfolios.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bootEfronts(
  returns,
  pspec,
  rf = 0.003,
  npoints = 20,
  B = 3,
  Seed = NULL,
  gmv = TRUE,
  maxSR = FALSE,
  xlim = NULL,
  ylim = NULL,
  k.sigma = 2,
  k.mu = 2,
  digits = 4,
  figTitle = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bootEfronts_+3A_returns">returns</code></td>
<td>
<p>A multivarite xts returns object</p>
</td></tr>
<tr><td><code id="bootEfronts_+3A_pspec">pspec</code></td>
<td>
<p>PortfolioAnalytics portfolio specification object</p>
</td></tr>
<tr><td><code id="bootEfronts_+3A_rf">rf</code></td>
<td>
<p>Risk-free rate as a decimal, default 0.003</p>
</td></tr>
<tr><td><code id="bootEfronts_+3A_npoints">npoints</code></td>
<td>
<p>Number of points on efficient frontier, default 10</p>
</td></tr>
<tr><td><code id="bootEfronts_+3A_b">B</code></td>
<td>
<p>Number of bootstrap samples, default 3</p>
</td></tr>
<tr><td><code id="bootEfronts_+3A_seed">Seed</code></td>
<td>
<p>Seed of bootstrap random number generator, default NULL</p>
</td></tr>
<tr><td><code id="bootEfronts_+3A_gmv">gmv</code></td>
<td>
<p>Logical variable, default TRUE</p>
</td></tr>
<tr><td><code id="bootEfronts_+3A_maxsr">maxSR</code></td>
<td>
<p>Logical variable, default FALSE</p>
</td></tr>
<tr><td><code id="bootEfronts_+3A_xlim">xlim</code></td>
<td>
<p>Numeric x axis plot limits, default NULL</p>
</td></tr>
<tr><td><code id="bootEfronts_+3A_ylim">ylim</code></td>
<td>
<p>Numeric y axis plot limits, default NULL</p>
</td></tr>
<tr><td><code id="bootEfronts_+3A_k.sigma">k.sigma</code></td>
<td>
<p>Numeric value</p>
</td></tr>
<tr><td><code id="bootEfronts_+3A_k.mu">k.mu</code></td>
<td>
<p>Numeric value</p>
</td></tr>
<tr><td><code id="bootEfronts_+3A_digits">digits</code></td>
<td>
<p>Number of significant digits for numeric values</p>
</td></tr>
<tr><td><code id="bootEfronts_+3A_figtitle">figTitle</code></td>
<td>
<p>Optional figure title, default NULL</p>
</td></tr>
</table>


<h3>Details</h3>

<p>k.sigma controls horizontal axis plotting range if xlim = NULL, and
k.mu controls vertical axis plotting range if ylim = NULL. Adjust k.mu and
k.sigma to eliminate plot &quot;Line out of bounds&quot; Warnings.
gmv = TRUE to display a bullet at global minimum variance portfolio
maxSR = TRUE to display a bullet at tangency portfolio
</p>


<h3>Value</h3>

<p>No value returned, instead a bootstrapped efficient frontiers plot
with options described in the above details.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(bootEfronts)
</code></pre>

<hr>
<h2 id='chart.Efront'>Create Efficient Frontier</h2><span id='topic+chart.Efront'></span>

<h3>Description</h3>

<p>Utility function for creating initial efficient frontier, and
for creating subsequent bootstrap efficient frontiers created, all of which
are created by the PortfolioAnalytics function create.EfficientFrontier.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chart.Efront(
  returns,
  pspec,
  firstEfront = TRUE,
  gmv = TRUE,
  maxSR = TRUE,
  rf = 0.003,
  xlim = NULL,
  ylim = NULL,
  xlab = NULL,
  ylab = NULL,
  n.portfolios = 10
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="chart.Efront_+3A_returns">returns</code></td>
<td>
<p>A multivarite xts returns object</p>
</td></tr>
<tr><td><code id="chart.Efront_+3A_pspec">pspec</code></td>
<td>
<p>PortfolioAnalytics portfolio specification object</p>
</td></tr>
<tr><td><code id="chart.Efront_+3A_firstefront">firstEfront</code></td>
<td>
<p>Logical variable, default TRUE</p>
</td></tr>
<tr><td><code id="chart.Efront_+3A_gmv">gmv</code></td>
<td>
<p>Logical variable, default TRUE</p>
</td></tr>
<tr><td><code id="chart.Efront_+3A_maxsr">maxSR</code></td>
<td>
<p>Logical variable, default TRUE</p>
</td></tr>
<tr><td><code id="chart.Efront_+3A_rf">rf</code></td>
<td>
<p>Risk-free rate, default 0.003</p>
</td></tr>
<tr><td><code id="chart.Efront_+3A_xlim">xlim</code></td>
<td>
<p>Numeric value, default NULL</p>
</td></tr>
<tr><td><code id="chart.Efront_+3A_ylim">ylim</code></td>
<td>
<p>Numeric value, default NULL</p>
</td></tr>
<tr><td><code id="chart.Efront_+3A_xlab">xlab</code></td>
<td>
<p>Numeric value, default NULL</p>
</td></tr>
<tr><td><code id="chart.Efront_+3A_ylab">ylab</code></td>
<td>
<p>Numeric value, default NULL</p>
</td></tr>
<tr><td><code id="chart.Efront_+3A_n.portfolios">n.portfolios</code></td>
<td>
<p>Number of efficient frontier portfolios, default 10</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The variable firstEfront is set to TRUE for the initial efficient
frontier plot, but is set to FALSE for the bootstrap replicate efficient
frontier plots. The choices gmv = TRUE and maxSR = TRUE result in bullet points
at those locations on the initial efficient frontier plot
</p>


<h3>Value</h3>

<p>No value returned, instead plots of efficient frontiers for use by bootEfronts()
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(chart.Efront)
</code></pre>

<hr>
<h2 id='cleanOutliers'>Clean Returns Outliers</h2><span id='topic+cleanOutliers'></span>

<h3>Description</h3>

<p>Outliers are &quot;cleaned&quot; by shrinking or rejecting data whose
distance from the median (med) is larger in absolute value than a specified
value k multiplied by the median absolute deviation from the median (mad).
Outlier shrinkage results in the data value being set equal to the nearest
of med-k*mad and med+k*mad. Rejected data is assigned an NA. Shrinkage is
the default.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cleanOutliers(x, k = 3, shrink = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cleanOutliers_+3A_x">x</code></td>
<td>
<p>A numeric vector</p>
</td></tr>
<tr><td><code id="cleanOutliers_+3A_k">k</code></td>
<td>
<p>A numeric value, which multiplies the mad.  Smaller values of k
result in greater fractions of data which is either shrunk of rejected,
and larger values of k result in smaller fractions of the data that are
shrunk or rejected.</p>
</td></tr>
<tr><td><code id="cleanOutliers_+3A_shrink">shrink</code></td>
<td>
<p>A logical variable whose default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an outlier cleaned numeric object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(cleanOutliers)
</code></pre>

<hr>
<h2 id='crsp.returns8'>crsp.returns8</h2><span id='topic+crsp.returns8'></span>

<h3>Description</h3>

<p>Monthly returns of 8 stocks with tickers GHI, PBCI, MODI, MGJ, MAT,
EMN, AMAT, AMGN from 1997 to 2001
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(crsp.returns8)
</code></pre>


<h3>Format</h3>

<p>A multivariate xts object
</p>


<h3>Source</h3>

<p>Center for Research in Security Prices, LLC (CRSP), an Affiliate of
the University of Chicago Booth School of Business. NOTE: CRSP data is not
covered by the GPL. Redistribution of the data in any form is not permitted,
and use of the data in derivative works is not permitted without the written
permission of CRSP.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PCRA)
library(zoo)
data(crsp.returns8)
names(crsp.returns8)
dim(crsp.returns8)
range(index(crsp.returns8))
</code></pre>

<hr>
<h2 id='datFF3W'>Fama-French Weekly 3-Factor Model</h2><span id='topic+datFF3W'></span>

<h3>Description</h3>

<p>Weekly values of the 3 factors MKT, SMB and HML
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(datFF3W)
</code></pre>


<h3>Format</h3>

<p>Multivariate time series xts object
</p>


<h3>Source</h3>

<p><a href="https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html">https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PCRA)
library(zoo)
data(datFF3W)
head(datFF3W)
range(index(datFF3W))
</code></pre>

<hr>
<h2 id='datFF4W'>Fama-French-Carhart Weekly 4-Factor Model</h2><span id='topic+datFF4W'></span>

<h3>Description</h3>

<p>Weekly values of the 4 factors MKT, SMB, HML and MOM
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(datFF4W)
</code></pre>


<h3>Format</h3>

<p>Multivariate time series xts object
</p>


<h3>Source</h3>

<p><a href="https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html">https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PCRA)
library(zoo)
data(datFF4W)
head(datFF4W)
range(index(datFF4W))
</code></pre>

<hr>
<h2 id='divHHI'>HHI Based Diversification Index</h2><span id='topic+divHHI'></span>

<h3>Description</h3>

<p>divHHI calculates a portfolio diversification index DIV. The DIV
is equal to 1 minus the Herfindahl-Hirschman Index (HHI), which is defined
as the sum of the squared portfolio weights. The maximum HHI of a long-only
portfolio is 1, which occurs when all of the portfolio's investment is in a
single asset, and correspondingly HHI = 0.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>divHHI(weights)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="divHHI_+3A_weights">weights</code></td>
<td>
<p>A numeric vector of portfolio weights</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a zoo time series object containing portfolio diversification values
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(divHHI)
</code></pre>

<hr>
<h2 id='ellipsesPlotPCRA.covfm'>Overlaid Correlations Ellipses Plots</h2><span id='topic+ellipsesPlotPCRA.covfm'></span>

<h3>Description</h3>

<p>When there are 3 or more variables in the data, this 
function produces a matrix with overlaid ellipses drawn in the upper
triangle. The main use case is a sample covariance estimator and a
robust covariance matrix estimator, so two overlaid ellipses. The
ellipses in cell i,j of the plot is drawn to be a contour of a 
standard bivariate normal density with correlation 'rho(i,j)'. Two
ellipses are drawn in each cell, one for the sample covariance matrix
estimate and one for the robust covariance matrix estimate. When there
are only 2 variables in the data, this function produces a scatter plot
of the data with overlaid 95
robust covariance matrix estimates in the 'covfm' object. The lower 
triangle displays the sample correlation estimate value in red font,
and robust correlation estimate in black font.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ellipsesPlotPCRA.covfm(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ellipsesPlotPCRA.covfm_+3A_x">x</code></td>
<td>
<p>a 'covfm' object</p>
</td></tr>
<tr><td><code id="ellipsesPlotPCRA.covfm_+3A_...">...</code></td>
<td>
<p>additional arguments are ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>x is invisibly returned
</p>


<h3>Author(s)</h3>

<p>The original version 'ellipsesPlot.covfm was wirtten by Kjell
Konis for the 'fit.models' package.  This version, modified by Doug
Martin, uses thicker lines for the ellipses, with red color for the
sample correlation and black for the robust correlation, for a better
overall visual display.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(ellipsesPlotPCRA.covfm)
</code></pre>

<hr>
<h2 id='factorsSPGMI'>factorsSPGMI</h2><span id='topic+factorsSPGMI'></span>

<h3>Description</h3>

<p>14 SPGMI monthly factor exposures for 294 CRSP stocks from 1993 to 2015
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(factorsSPGMI)
</code></pre>


<h3>Format</h3>

<p>A data.frame containing 14 SPGMI monthly factor exposures (alpha
factors) for 294 stocks from 1993 to 2015 (276 months) of observations on 21
variables that include the 14 factor exposures, for each of 294 stocks
</p>

<ul>
<li> <p><strong>Date:</strong> type 'Date'.
</p>
</li>
<li> <p><strong>TickerLast:</strong> type 'chr'. This is the ticker as of December 2015
</p>
</li>
<li> <p><strong>Ticker:</strong> type 'chr'. This is the monthly ticker
</p>
</li>
<li> <p><strong>Company:</strong> type 'chr'. The name of the company 
</p>
</li>
<li> <p><strong>CapGroupLast:</strong> type 'chr'. Company market capitalization group
as of December 2015, one of: MicroCap, SmallCap, MidCap or LargeCap
</p>
</li>
<li> <p><strong>CapGroup:</strong> type 'chr'. Monthly market capitalization group
</p>
</li>
<li> <p><strong>GICS:</strong> type 'chr'. An 8 digit S&amp;P GICS code, the first two
digits of which are codes for 11 GICS sectors
</p>
</li>
<li> <p><strong>Sector:</strong> type 'chr'. One of 8  of the 11 GICS sectors, with
none of the 294 stocks in Financials, Real Estate or Utilities
</p>
</li>
<li> <p><strong>AnnVol12M:</strong> type 'num'. Annualized Volatility of Monthly
Stock Returns (Last Twelve Months)
</p>
</li>
<li> <p><strong>Beta60M:</strong> type 'num'.	60 Month OLS Beta relative to the
S&amp;P 500 estimated using Monthly Total Returns
</p>
</li>
<li> <p><strong>BP:</strong> type 'num'. Most Recent Book Value of
Common Equity divided by Market Value of Common Equity
</p>
</li>
<li> <p><strong>EP:</strong> type 'num'. Sum of trailing four quarters Earnings per
Share divided by Current Price per share
</p>
</li>
<li> <p><strong>LogMktCap:</strong> type 'num'. Natural Logarithm of Current Market
Capitalization in $
</p>
</li>
<li> <p><strong>PM12M1M:</strong> type 'num'. Price relative change from time t-12 to
time t-1: PM12M1M(t) = (P(t-1)-P(t-12))/P(t-12) = P(t-1)/P(t-12) – 1
</p>
</li>
<li> <p><strong>AccrualRatioCF:</strong> type 'num'. Ratio of Accruals to Net
Operating Assets, where Accruals = Income Before Extraordinary Items minus
Net Operating Cash Flow minus Net Investing Cash Flow, and Net Operating
Assets = Total Assets – Total Liabilities – Cash and Short-Term Investments 
+ Short- and Long-Term Debt.  Both numerator and denominator are computed
over the trailing four quarters
</p>
</li>
<li> <p><strong>AstAdjChg1YOCF:</strong> type 'num'. One-Year Change in Trailing
Four Quarter Operating Cash Flow divided by Trailing Four Quarter
Average(Total Assets)
</p>
</li>
<li> <p><strong>CFROIC:</strong> type 'num'. Trailing Four Quarter Operating Cash Flow
divided by Trailing Four Quarter Average of Invested Capital where Invested
Capital = Sum of Long-Term Debt, Preferred Stock, Common Equity and Minority
Interests – Treasury Stock 
</p>
</li>
<li> <p><strong>Chg1YAstTo:</strong> type 'num'. Percentage change over 12 months in
Trailing Four Quarter Revenues divided by Trailing Four Quarter Average of
Total Assets
</p>
</li>
<li> <p><strong>EBITDAEV:</strong> type 'num'. Trailing Four Quarter EBITDA divided by
Average of Trailing Four Quarter Enterprise Value where Enterprise Value =
Book Value of Equity + Market Value of Debt
</p>
</li>
<li> <p><strong>FCFP:</strong> type 'num'. Trailing Four Quarter Free Cash Flow
divided by Trailing Four Quarter Average of Market Value of Equity
</p>
</li>
<li> <p><strong>PM1M:</strong> type 'num'. Trailing 1-Month Price Return.  Relative
price change from time t-1 to t: PM1M(t) =  (P(t) – P(t-1)) / P(t-1),
commonly called one period return R(t)
</p>
</li>
<li> <p><strong>SEV:</strong> type 'num'. Trailing Four Quarter Sales divided by
Average of Trailing Four Quarter Enterprise Value, where Enterprise Value =
Market Value of Equity + Market Value of Debt
</p>
</li></ul>



<h3>Details</h3>

<p>The term &quot;factor exposures&quot; is often used for the values of the 14 factors,
which SPGMI also refers to as &quot;scores&quot; or &quot;alpha factors&quot;. 
Our names for the the 14 factors are identical to those used by SPGMI in
their AFL library.  For an introduction to the AFL library see:
<a href="https://www.marketplace.spglobal.com/en/datasets/alpha-factor-library-(3)">https://www.marketplace.spglobal.com/en/datasets/alpha-factor-library-(3)</a>
</p>
<p>The four CapGroupLast categorizations of the stocks were determined using the
three capitalization breakpoints $xxxM, $yyyM, $zzzM. Details concerning the
construction of the monthly CapGroup categorizations will eventually be
provided in a Vignette.
</p>
<p>The factorsSPGMI data contains stocks in 8 of the 11 GICS sectors, with no
stocks in the Financials, Utilities and Real Estate sectors.  On each of the
next 11 lines we list all 11 of the two digit GICS code that defines the GICS
Sector, followed by the GICS sector name:
</p>
<p>10 Energy
</p>
<p>15 Materials
</p>
<p>20 Industrials
</p>
<p>25 Consumer Discretionary
</p>
<p>30 Consumer Staples
</p>
<p>35 Health Care  
</p>
<p>40 Financials (none currently available)
</p>
<p>45 Information Technology
</p>
<p>50 Communication Services
</p>
<p>55 Utilities (none currently available)
</p>
<p>60 Real Estate (none currently available)
</p>
<p>GICS is a joint product of SPGMI and MSCI.
For details, see the GICS Global Industry Classification Standard document
(The GICS MAP Book) available at <a href="https://www.spglobal.com/en/">https://www.spglobal.com/en/</a>, and the MSCI
GICS Methodology 2020 document available at <a href="https://www.msci.com/">https://www.msci.com/</a>.
</p>


<h3>Source</h3>

<p>Standard and Poors Global Market Intelligence (SPGMI). NOTE: SPGMI
data is not covered by the GPL. Redistribution of this SPGMI data is not
permitted, and use of the data in derivative works is not permitted without
the written permission of SPGMI
</p>


<h3>References</h3>

<p>A standard corporate finance textbook:  Ross, Westerfield, Jaffe and
Jordan (2019). Corporate Finance, McGraw-Hill Education.
CFA: <a href="https://alphabetaprep.com/cfa-level-1/financial-ratio-analysis/">https://alphabetaprep.com/cfa-level-1/financial-ratio-analysis/</a>
</p>

<hr>
<h2 id='FRBinterestRates'>Federal Reserve Board Interest Rates</h2><span id='topic+FRBinterestRates'></span>

<h3>Description</h3>

<p>Federal Reserve Board monthly interest rates of 90 day Bill from 1934
to 2014.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(FRBinterestRates)
</code></pre>


<h3>Format</h3>

<p>A time series zoo object
</p>


<h3>Source</h3>

<p>Federal Reserve Board
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PCRA)
library(zoo)
data(FRBinterestRates)
class(FRBinterestRates)
range(index(FRBinterestRates))
</code></pre>

<hr>
<h2 id='getPCRAData'>Download CRSP and SPGMI Data</h2><span id='topic+getPCRAData'></span>

<h3>Description</h3>

<p>Downloads stocksCRSPweekly, stocksCRSPdaily
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getPCRAData(dataset = "stocksCRSPweekly", cache = TRUE, refresh = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getPCRAData_+3A_dataset">dataset</code></td>
<td>
<p>a valid dataset name (see details)</p>
</td></tr>
<tr><td><code id="getPCRAData_+3A_cache">cache</code></td>
<td>
<p>logical variable controlling whether or not to cache the data so
that when calling the function for the same dataset it will be loaded from cache
rather than re-downloading from the github site</p>
</td></tr>
<tr><td><code id="getPCRAData_+3A_refresh">refresh</code></td>
<td>
<p>logical variable controlling whether or not to re-download a
cached dataset</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The following are valid names of datasets available:
</p>

<ul>
<li><p>&quot;stocksCRSPdaily&quot;&quot;Details same as for stocksCRSP except now daily&quot;
</p>
</li>
<li><p>&quot;stocksCRSPweekly&quot;&quot;Details same as for stocksCRSP except now weekly&quot;
</p>
</li></ul>

<p>User must install R.cache package
</p>


<h3>Value</h3>

<p>An object of class &ldquo;data.table&rdquo;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
stocksCRSPweekly &lt;- getPCRAData(data = "stocksCRSPweekly")
class(stocksCRSPweekly)
names(stocksCRSPweekly)

stocksCRSPdaily &lt;- getPCRAData(data = "stocksCRSPdaily")
class(stocksCRSPdaily)
names(stocksCRSPdaily)

</code></pre>

<hr>
<h2 id='gfunds5'>gfunds5</h2><span id='topic+gfunds5'></span>

<h3>Description</h3>

<p>Monthly returns of 5 German investment funds November 1989
to July 2001: EM (emerging markets), PE (private equity), HY (high yield),
ALT (alternatives), and BND (fixed income)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(gfunds5)
</code></pre>


<h3>Format</h3>

<p>Multivariate xts object
</p>


<h3>Source</h3>

<p>Unknown
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PCRA)
library(zoo)
data(gfunds5)
class(gfunds5)
names(gfunds5)
range(index(gfunds5))
</code></pre>

<hr>
<h2 id='invensysEPS'>Earnings per Share of Invensys</h2><span id='topic+invensysEPS'></span>

<h3>Description</h3>

<p>Yearly earnings-per-share of company Invensys for 17 years.
The company's name was invensys prior to 2004.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(invensysEPS)
</code></pre>


<h3>Format</h3>

<p>A numeric vector
</p>


<h3>Source</h3>

<p>Corporate Finance Department of Dupont
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PCRA)
data(invensysEPS)
invensysEPS
</code></pre>

<hr>
<h2 id='KRest'>Kurtosis Estimator</h2><span id='topic+KRest'></span>

<h3>Description</h3>

<p>Sample estimate of excess kurtosis, with option for ordinary
kurtosis. This function will eventually have a robust estimator option.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>KRest(x, excess = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="KRest_+3A_x">x</code></td>
<td>
<p>A numeric vector</p>
</td></tr>
<tr><td><code id="KRest_+3A_excess">excess</code></td>
<td>
<p>A logical variable with default TRUE, which results in the
computation of excess kurtosis, and FALSE results ordinary kurtosis.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>numeric value of excess kurtosis or ordinary kurtosis
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(KRest)
</code></pre>

<hr>
<h2 id='levgLongShort'>Long Short Portfolio Leverage</h2><span id='topic+levgLongShort'></span>

<h3>Description</h3>

<p>This function computes a time series of portfolio leverages,
defined  as the sum of the absolute portfolio weights divided by the sum of
the long position weights
</p>


<h3>Usage</h3>

<pre><code class='language-R'>levgLongShort(wts)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="levgLongShort_+3A_wts">wts</code></td>
<td>
<p>Multivariate xts portfolio weights object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an xts time series of portfolio leverages
</p>


<h3>Author(s)</h3>

<p>Doug Martin
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(levgLongShort)

</code></pre>

<hr>
<h2 id='mathEfront'>Efficient Frontiers from Returns</h2><span id='topic+mathEfront'></span>

<h3>Description</h3>

<p>Computes and plots the efficient frontier with and without 
risk-free asset, using a multivariate time series of returns to compute
the mean vector and covariance matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mathEfront(
  returns,
  mu.max = NULL,
  sigma.max = NULL,
  rf = 0.003,
  rf.line = TRUE,
  stocks = TRUE,
  stock.names = TRUE,
  SRvalue = TRUE,
  npoints = 100,
  cexText = 0.8,
  cexPoints = 0.8,
  digits = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mathEfront_+3A_returns">returns</code></td>
<td>
<p>Multivariate xts object of portfolio returns</p>
</td></tr>
<tr><td><code id="mathEfront_+3A_mu.max">mu.max</code></td>
<td>
<p>Numeric value, default NULL</p>
</td></tr>
<tr><td><code id="mathEfront_+3A_sigma.max">sigma.max</code></td>
<td>
<p>Numeric value, default NULL</p>
</td></tr>
<tr><td><code id="mathEfront_+3A_rf">rf</code></td>
<td>
<p>Numeric value with default 0.003</p>
</td></tr>
<tr><td><code id="mathEfront_+3A_rf.line">rf.line</code></td>
<td>
<p>Logical variable with default TRUE</p>
</td></tr>
<tr><td><code id="mathEfront_+3A_stocks">stocks</code></td>
<td>
<p>Logical variable with default TRUE</p>
</td></tr>
<tr><td><code id="mathEfront_+3A_stock.names">stock.names</code></td>
<td>
<p>Logical variable with default TRUE</p>
</td></tr>
<tr><td><code id="mathEfront_+3A_srvalue">SRvalue</code></td>
<td>
<p>Logical variable with default TRUE</p>
</td></tr>
<tr><td><code id="mathEfront_+3A_npoints">npoints</code></td>
<td>
<p>Integer number of efficient frontier points, default 100</p>
</td></tr>
<tr><td><code id="mathEfront_+3A_cextext">cexText</code></td>
<td>
<p>Character expansion factor for text</p>
</td></tr>
<tr><td><code id="mathEfront_+3A_cexpoints">cexPoints</code></td>
<td>
<p>Expansion factor for points</p>
</td></tr>
<tr><td><code id="mathEfront_+3A_digits">digits</code></td>
<td>
<p>Integer variable number of significant digits, default NULL</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When rf.line = TRUE, the linear efficient frontier is displayed,
and it is not displayed when rf.line = FALSE.
When values = TRUE, the Sharpe ratio and risk-free rate values are displayed
in the plot as SHARPE RATIO and RISK-FREE values.
</p>


<h3>Value</h3>

<p>No value returned, instead a plot is displayed of the efficient frontier with
cash and risky assets, with risky assets only efficient frontier overlaid
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(mathEfront)
</code></pre>

<hr>
<h2 id='mathEfrontCashRisky'>Math Efficient Frontier: Cash and Risky Assets</h2><span id='topic+mathEfrontCashRisky'></span>

<h3>Description</h3>

<p>This function computes and plots a linear efficient frontier that is
a mix of a risk-free asset (&quot;cash&quot;) and risky stocks (or other assets).
It optionally returns the weights along the linear efficient frontier.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mathEfrontCashRisky(
  returns,
  npoints = 10,
  rf = 0.003,
  plot.efront = TRUE,
  stock.names = TRUE,
  values = FALSE,
  scalex = 1.1,
  scaley = 1.1,
  cexPoints = 0.8,
  cexText = 0.8
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mathEfrontCashRisky_+3A_returns">returns</code></td>
<td>
<p>Risky asset returns multivariate xts object</p>
</td></tr>
<tr><td><code id="mathEfrontCashRisky_+3A_npoints">npoints</code></td>
<td>
<p>Number of efficient frontier points with default 10</p>
</td></tr>
<tr><td><code id="mathEfrontCashRisky_+3A_rf">rf</code></td>
<td>
<p>A risk-free rate with default 0.003</p>
</td></tr>
<tr><td><code id="mathEfrontCashRisky_+3A_plot.efront">plot.efront</code></td>
<td>
<p>Logical variable which if TRUE results in a plot of</p>
</td></tr>
<tr><td><code id="mathEfrontCashRisky_+3A_stock.names">stock.names</code></td>
<td>
<p>Logical variable with default TRUE</p>
</td></tr>
<tr><td><code id="mathEfrontCashRisky_+3A_values">values</code></td>
<td>
<p>Logical variable for returning efront values with default FALSE</p>
</td></tr>
<tr><td><code id="mathEfrontCashRisky_+3A_scalex">scalex</code></td>
<td>
<p>Horizontal axis scale parameter with default 1.1</p>
</td></tr>
<tr><td><code id="mathEfrontCashRisky_+3A_scaley">scaley</code></td>
<td>
<p>Vertical axis scale parameter with default 1.1</p>
</td></tr>
<tr><td><code id="mathEfrontCashRisky_+3A_cexpoints">cexPoints</code></td>
<td>
<p>Numerical size parameter for points with default 0.8</p>
</td></tr>
<tr><td><code id="mathEfrontCashRisky_+3A_cextext">cexText</code></td>
<td>
<p>Numerical size parameter for text with default 0.8</p>
</td></tr>
</table>


<h3>Value</h3>

<p>default is no value returned, and a plot is displayed of the linear
efficient frontier.  Optionally, a numeric object containing the weights along
the linear efficient frontier are displayed. Optionally no plot is displayed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(mathEfrontCashRisky)
</code></pre>

<hr>
<h2 id='mathEfrontRisky'>Efficient Frontier of Risky Stocks</h2><span id='topic+mathEfrontRisky'></span>

<h3>Description</h3>

<p>Computes and plots the efficient frontier of risky assets
only, using a multivariate time series of returns to compute the mean
vector and covariance matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mathEfrontRisky(
  returns,
  npoints = 100,
  efront.only = TRUE,
  display = TRUE,
  cexGmv = 0.9,
  pchPoints = 20,
  cexPoints = 1,
  cexText = 0.7,
  values = FALSE,
  digits = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mathEfrontRisky_+3A_returns">returns</code></td>
<td>
<p>Multivariate xts object of portfolio returns</p>
</td></tr>
<tr><td><code id="mathEfrontRisky_+3A_npoints">npoints</code></td>
<td>
<p>Integer number of efficient frontier points, with default 100</p>
</td></tr>
<tr><td><code id="mathEfrontRisky_+3A_efront.only">efront.only</code></td>
<td>
<p>Logical variable with default TRUE</p>
</td></tr>
<tr><td><code id="mathEfrontRisky_+3A_display">display</code></td>
<td>
<p>If TRUE the efficient frontier is plotted</p>
</td></tr>
<tr><td><code id="mathEfrontRisky_+3A_cexgmv">cexGmv</code></td>
<td>
<p>A size parameter for the text &quot;GMV&quot;</p>
</td></tr>
<tr><td><code id="mathEfrontRisky_+3A_pchpoints">pchPoints</code></td>
<td>
<p>A parameter of the type of points</p>
</td></tr>
<tr><td><code id="mathEfrontRisky_+3A_cexpoints">cexPoints</code></td>
<td>
<p>A size parameter of points</p>
</td></tr>
<tr><td><code id="mathEfrontRisky_+3A_cextext">cexText</code></td>
<td>
<p>A size parameter of text</p>
</td></tr>
<tr><td><code id="mathEfrontRisky_+3A_values">values</code></td>
<td>
<p>Logical variable with default TRUE</p>
</td></tr>
<tr><td><code id="mathEfrontRisky_+3A_digits">digits</code></td>
<td>
<p>Integer variable number of significant digits, default NULL</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When efront.only = TRUE only the efficient frontier is computed,
and if FALSE the entire frontier is computed.  When value = TRUE the
efficient frontier mean and volatility values are returned, and when
value = FALSE these values are not returned.
</p>


<h3>Value</h3>

<p>no values are returned by default, and a plot is displayed of the
either the risky assets only efficient frontier, or the entire frontier.
Optionally, the values of the mean and volatility along the efficient
frontier are returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(mathEfrontRisky)
</code></pre>

<hr>
<h2 id='mathEfrontRiskyMuCov'>Efficient Frontier</h2><span id='topic+mathEfrontRiskyMuCov'></span>

<h3>Description</h3>

<p>Computes a frontier or efficient frontier based on user
specified mean vector and covariance matrix.  Default is to compute the
efficient frontier and plot it.  Optionally the mean and volatility values
of the frontier or efficient frontier is returned at a user specified number
of significant digits.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mathEfrontRiskyMuCov(
  muRet,
  volRet,
  corrRet,
  npoints = 100,
  display = TRUE,
  efront.only = TRUE,
  values = FALSE,
  digits = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mathEfrontRiskyMuCov_+3A_muret">muRet</code></td>
<td>
<p>Numeric vector of asset mean returns</p>
</td></tr>
<tr><td><code id="mathEfrontRiskyMuCov_+3A_volret">volRet</code></td>
<td>
<p>Numeric vector of asset standard deviations/volatilities</p>
</td></tr>
<tr><td><code id="mathEfrontRiskyMuCov_+3A_corrret">corrRet</code></td>
<td>
<p>Correlation matrix of asset returns</p>
</td></tr>
<tr><td><code id="mathEfrontRiskyMuCov_+3A_npoints">npoints</code></td>
<td>
<p>Integer number of points on efficient frontier, default 100</p>
</td></tr>
<tr><td><code id="mathEfrontRiskyMuCov_+3A_display">display</code></td>
<td>
<p>Logical variable, default TRUE</p>
</td></tr>
<tr><td><code id="mathEfrontRiskyMuCov_+3A_efront.only">efront.only</code></td>
<td>
<p>Logical variable, default TRUE</p>
</td></tr>
<tr><td><code id="mathEfrontRiskyMuCov_+3A_values">values</code></td>
<td>
<p>Logical variable, default = FALSE</p>
</td></tr>
<tr><td><code id="mathEfrontRiskyMuCov_+3A_digits">digits</code></td>
<td>
<p>Integer number of significant</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When efront.only = TRUE only the efficient frontier is computed,
and if FALSE the entire frontier is computed.  When value = TRUE the
efficient frontier mean and volatility values are returned, and when
value = FALSE these values are not returned.
</p>


<h3>Value</h3>

<p>Plot of efficient frontier
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(mathEfrontRiskyMuCov)
</code></pre>

<hr>
<h2 id='mathGmv'>Global Minimum Variance Portfolio (GMV)</h2><span id='topic+mathGmv'></span>

<h3>Description</h3>

<p>Computes the weights of a GMV portfolio, and its mean return
and volatility based on portfolio asset returns
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mathGmv(returns, digits = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mathGmv_+3A_returns">returns</code></td>
<td>
<p>Matrix or xts object of returns</p>
</td></tr>
<tr><td><code id="mathGmv_+3A_digits">digits</code></td>
<td>
<p>Integer value of number of significant digits, default NULL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of GMV portfolio weights, mean return and volatility
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(mathGmv)
</code></pre>

<hr>
<h2 id='mathGmvMuCov'>Global Minimum Variance Portfolios From Mu and Cov</h2><span id='topic+mathGmvMuCov'></span>

<h3>Description</h3>

<p>Compute the weights, mean return and volatility of a GMV portfolio based on
user specified mean vector and covariance matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mathGmvMuCov(muRet, volRet, corrRet, digits = 3)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mathGmvMuCov_+3A_muret">muRet</code></td>
<td>
<p>Mean vector</p>
</td></tr>
<tr><td><code id="mathGmvMuCov_+3A_volret">volRet</code></td>
<td>
<p>Volatility vector</p>
</td></tr>
<tr><td><code id="mathGmvMuCov_+3A_corrret">corrRet</code></td>
<td>
<p>matrix of correlations</p>
</td></tr>
<tr><td><code id="mathGmvMuCov_+3A_digits">digits</code></td>
<td>
<p>Integer value number of decimal places, default 3</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list contains weights, mean return and volatility of a GMV portfolio
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(mathGmvMuCov)
</code></pre>

<hr>
<h2 id='mathTport'>Tangency Portfolio Weights</h2><span id='topic+mathTport'></span>

<h3>Description</h3>

<p>Computes the portfolio weights of the tangency portfolio, and
its mean return and volatility.  The tangency portfolio is defined by the
line connecting the zero volatility risk-free rate to its tangency point on
the efficient frontier.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mathTport(returns, rf = 0.005, digits = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mathTport_+3A_returns">returns</code></td>
<td>
<p>A vector or xts object</p>
</td></tr>
<tr><td><code id="mathTport_+3A_rf">rf</code></td>
<td>
<p>The risk-free rate, default 0.005</p>
</td></tr>
<tr><td><code id="mathTport_+3A_digits">digits</code></td>
<td>
<p>Number of significant digits default NULL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Tangency portfoliow weights, mean and volatility
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(mathTport)
</code></pre>

<hr>
<h2 id='mathWtsEfrontRisky'>Efficient Frontier Portfolio Weights Vectors</h2><span id='topic+mathWtsEfrontRisky'></span>

<h3>Description</h3>

<p>Uses time series of asset returns to compute the weights vectors
for a set of points along the efficient frontier that are defined by their
mean return values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mathWtsEfrontRisky(returns, mu.efront, digits = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mathWtsEfrontRisky_+3A_returns">returns</code></td>
<td>
<p>A multivariate xts object of n asset returns</p>
</td></tr>
<tr><td><code id="mathWtsEfrontRisky_+3A_mu.efront">mu.efront</code></td>
<td>
<p>A vector of specified efficient frontier mean returns</p>
</td></tr>
<tr><td><code id="mathWtsEfrontRisky_+3A_digits">digits</code></td>
<td>
<p>Integer number of significant digits with default NULL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix with first row containing the mean (MU) along the efficient
frontier, the second row containing the standard deviation, and the 
following n rows contain the n weight vectors along the efficient fronier
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(mathWtsEfrontRisky)

</code></pre>

<hr>
<h2 id='mathWtsEfrontRiskyMuCov'>Efficient Frontier Portfolio Weights Vectors</h2><span id='topic+mathWtsEfrontRiskyMuCov'></span>

<h3>Description</h3>

<p>Same as function <code>"mathWtsEfrontRisky"</code> except that
instead a user specified time series of portfolio asset returns, it is
based on user specified returns mean vector and covariance matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mathWtsEfrontRiskyMuCov(muRet, volRet, corrRet, mu.efront, digits = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mathWtsEfrontRiskyMuCov_+3A_muret">muRet</code></td>
<td>
<p>Vector of asset mean returns</p>
</td></tr>
<tr><td><code id="mathWtsEfrontRiskyMuCov_+3A_volret">volRet</code></td>
<td>
<p>Vector of asset volatilities</p>
</td></tr>
<tr><td><code id="mathWtsEfrontRiskyMuCov_+3A_corrret">corrRet</code></td>
<td>
<p>Asset correlation matrix</p>
</td></tr>
<tr><td><code id="mathWtsEfrontRiskyMuCov_+3A_mu.efront">mu.efront</code></td>
<td>
<p>A vector of specified efficient frontier mean returns</p>
</td></tr>
<tr><td><code id="mathWtsEfrontRiskyMuCov_+3A_digits">digits</code></td>
<td>
<p>Integer number of significant digits with default NULL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix whose first row contains the mean returns along the efficient
frontier, the second row contains the corresponding volatilities, and the
remaining rows contain the components of the corresponding weight vectors.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(mathWtsEfrontRiskyMuCov)
</code></pre>

<hr>
<h2 id='meanReturns4Types'>Four Types of Mean Returns</h2><span id='topic+meanReturns4Types'></span>

<h3>Description</h3>

<p>Computation of arithmetic mean, logarithmic mean, geometric
mean, and an approximate geometric mean.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>meanReturns4Types(return, robust = FALSE, eff = 0.95)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="meanReturns4Types_+3A_return">return</code></td>
<td>
<p>An xts object or a numeric vector of returns</p>
</td></tr>
<tr><td><code id="meanReturns4Types_+3A_robust">robust</code></td>
<td>
<p>A logical value controlling whether a classical or robust
sample mean and standard deviation is computed. Default is FALSE</p>
</td></tr>
<tr><td><code id="meanReturns4Types_+3A_eff">eff</code></td>
<td>
<p>Normal distribution efficiency of RobStatTM function locScaleM()
used for computing a robust location estimate</p>
</td></tr>
</table>


<h3>Value</h3>

<p>fourMeans numeric values of the four means in the Description
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(meanReturns4Types)
</code></pre>

<hr>
<h2 id='opt.outputMvoPCRA'>Optimal Portfolio Weights and Performance</h2><span id='topic+opt.outputMvoPCRA'></span>

<h3>Description</h3>

<p>Converts output of PortfolioAnalytics function
optimize.portfolio, which computes a minimum variance portfolio,
to a list containing the portfolio weights vector, mean, volatility
and Sharpe Ratio.
</p>
<p>Converts output of 'optimize.portfolio' to a list of the
portfolio weights, mean, volatility and Sharpe Ratio.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>opt.outputMvoPCRA(
  opt,
  returns,
  digits = NULL,
  itemNames = NULL,
  annualize = TRUE,
  frequency = "monthly",
  rf = 0
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="opt.outputMvoPCRA_+3A_opt">opt</code></td>
<td>
<p>List output of 'optimize.portfolio'</p>
</td></tr>
<tr><td><code id="opt.outputMvoPCRA_+3A_returns">returns</code></td>
<td>
<p>Multivariate xts object of portfolio assets returns</p>
</td></tr>
<tr><td><code id="opt.outputMvoPCRA_+3A_digits">digits</code></td>
<td>
<p>Integer number of significant digits with default NULL</p>
</td></tr>
<tr><td><code id="opt.outputMvoPCRA_+3A_itemnames">itemNames</code></td>
<td>
<p>character vector of use-supplied names for portfolio
weights, mean, standard deviation and Sharpe Ratio</p>
</td></tr>
<tr><td><code id="opt.outputMvoPCRA_+3A_annualize">annualize</code></td>
<td>
<p>Logical with default TRUE</p>
</td></tr>
<tr><td><code id="opt.outputMvoPCRA_+3A_frequency">frequency</code></td>
<td>
<p>Returns frequency: &quot;monthly&quot;, &quot;weekly&quot; or &quot;daily&quot;, with 
default &quot;monthly&quot;</p>
</td></tr>
<tr><td><code id="opt.outputMvoPCRA_+3A_rf">rf</code></td>
<td>
<p>Numeric value of risk-free rate with default 0.0</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function uses the weights returned by optimize.portfolio,
along with the portfolio monthly, weekly or daily assets returns, and a
risk-free rate, to compute the portfolio mean return, volatility, and
Sharpe Ratio.  By default the latter three are annualized, but the user
may choose to return non-annualized performance values.
</p>


<h3>Value</h3>

<p>A list containing the portfolio numeric weights, mean value,
standard deviation and Sharpe Ratio, with default names Wgts, Mean, 
StdDev, and SR, or user-supplied names as a character vector value for
the argument 'itemNames'.
</p>


<h3>Author(s)</h3>

<p>R. Douglas Martin
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(opt.outputMvoPCRA)
</code></pre>

<hr>
<h2 id='plotLSandRobustSFM'>Robust and Least Square Single Factor Model (SFM) Fits</h2><span id='topic+plotLSandRobustSFM'></span>

<h3>Description</h3>

<p>Plot of Least squares and robust single factor model (SFM) fits,
with outliers identified, and legend containing slope and intercept coefficient
estimates with standard errors in parentheses.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotLSandRobustSFM(
  x,
  family = "mopt",
  efficiency = 0.95,
  mainText = NULL,
  ylimits = NULL,
  legendPos = "topleft",
  makePct = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotLSandRobustSFM_+3A_x">x</code></td>
<td>
<p>A univariate xts object.</p>
</td></tr>
<tr><td><code id="plotLSandRobustSFM_+3A_family">family</code></td>
<td>
<p>Robust loss function choice with default mopt</p>
</td></tr>
<tr><td><code id="plotLSandRobustSFM_+3A_efficiency">efficiency</code></td>
<td>
<p>Estimator Normal distribution efficiency, default 0.95</p>
</td></tr>
<tr><td><code id="plotLSandRobustSFM_+3A_maintext">mainText</code></td>
<td>
<p>Main title, if any.</p>
</td></tr>
<tr><td><code id="plotLSandRobustSFM_+3A_ylimits">ylimits</code></td>
<td>
<p>Vertical axis limits.</p>
</td></tr>
<tr><td><code id="plotLSandRobustSFM_+3A_legendpos">legendPos</code></td>
<td>
<p>Legend position.</p>
</td></tr>
<tr><td><code id="plotLSandRobustSFM_+3A_makepct">makePct</code></td>
<td>
<p>Logical variable with default FALSE</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The robust fit is computed using the lmrobdetMM() function in the
R package RobStatTM. For other choices of efficiency and family see the
RobStatTM package help(lmrobdetMM)
</p>


<h3>Value</h3>

<p>No value returned, instead plot with straight line fits and legend
is displayed
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(plotLSandRobustSFM)
</code></pre>

<hr>
<h2 id='qqnormDatWindat'>qqnormDatWindat</h2><span id='topic+qqnormDatWindat'></span>

<h3>Description</h3>

<p>Normal QQPlot of data and Winsorized data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qqnormDatWindat(
  dat,
  windat,
  fraction = 0.01,
  ylim = NULL,
  main = main,
  facName = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qqnormDatWindat_+3A_dat">dat</code></td>
<td>
<p>Numeric data vector</p>
</td></tr>
<tr><td><code id="qqnormDatWindat_+3A_windat">windat</code></td>
<td>
<p>Numeric Winsorized data set</p>
</td></tr>
<tr><td><code id="qqnormDatWindat_+3A_fraction">fraction</code></td>
<td>
<p>Fraction of data that is Winsorized</p>
</td></tr>
<tr><td><code id="qqnormDatWindat_+3A_ylim">ylim</code></td>
<td>
<p>Numeric data with two values that control vertical plot range</p>
</td></tr>
<tr><td><code id="qqnormDatWindat_+3A_main">main</code></td>
<td>
<p>Character main title of plot</p>
</td></tr>
<tr><td><code id="qqnormDatWindat_+3A_facname">facName</code></td>
<td>
<p>Character data for y axis label</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The result plot displays a normal QQPlot of the orginal data
as solid points, along with the horizontal display of the Winsorized
data as small circles.
</p>


<h3>Value</h3>

<p>A normal QQPlot of data with overlaid Winsorized data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(qqnormDatWindat)
</code></pre>

<hr>
<h2 id='retDD'>Stock with Ticker DD</h2><span id='topic+retDD'></span>

<h3>Description</h3>

<p>Weekly returns (RET) of stock with ticker DD for 1986
and 1987, along with market returns (MKT) and risk-free rate (RF).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(retDD)
</code></pre>


<h3>Format</h3>

<p>Multivariate time series xts object
</p>


<h3>Source</h3>

<p>Center for Research in Security Prices, LLC (CRSP), an Affiliate
of the University of Chicago Booth School of Business.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PCRA)
library(zoo)
data(retDD)
head(retDD)
range(index(retDD))
</code></pre>

<hr>
<h2 id='retEDS'>Stock with Ticker EDS</h2><span id='topic+retEDS'></span>

<h3>Description</h3>

<p>Weekly returns (RET) of stock with ticker EDS for 2002
and 2003, along with market returns (MKT) and risk-free rate (RF).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(retEDS)
</code></pre>


<h3>Format</h3>

<p>Multivariate time series xts object
</p>


<h3>Source</h3>

<p>Center for Research in Security Prices, LLC (CRSP), an Affiliate of
the University of Chicago Booth School of Business.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PCRA)
library(zoo)
data(retEDS)
head(retEDS)
range(index(retEDS))
</code></pre>

<hr>
<h2 id='retFNB'>Stock with Ticker FNB</h2><span id='topic+retFNB'></span>

<h3>Description</h3>

<p>Weekly returns (RET) of stock with ticker FNB for 2008
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(retFNB)
</code></pre>


<h3>Format</h3>

<p>Univariate time series xts object
</p>


<h3>Source</h3>

<p>Center for Research in Security Prices, LLC (CRSP), an Affiliate of
the University of Chicago Booth School of Business.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PCRA)
library(zoo)
data(retFNB)
head(retFNB)
range(index(retFNB))
</code></pre>

<hr>
<h2 id='retKBH'>Stock with Ticker KBH</h2><span id='topic+retKBH'></span>

<h3>Description</h3>

<p>Weekly returns (RET) of stock with ticker KBH for 2007
and 2008, along with market returns (MKT) and risk-free rate (RF).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(retKBH)
</code></pre>


<h3>Format</h3>

<p>Multivariate time series xts object
</p>


<h3>Source</h3>

<p>Center for Research in Security Prices, LLC (CRSP), an Affiliate of
the University of Chicago Booth School of Business.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PCRA)
library(zoo)
data(retKBH)
head(retKBH)
range(index(retKBH))
</code></pre>

<hr>
<h2 id='retMER'>Stock with Ticker MER</h2><span id='topic+retMER'></span>

<h3>Description</h3>

<p>Weekly returns (RET) of stock with ticker MER for 2002
and 2003, along with market returns (MKT) and risk-free rate (RF).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(retMER)
</code></pre>


<h3>Format</h3>

<p>Multivariate time series xts object
</p>


<h3>Source</h3>

<p>Center for Research in Security Prices, LLC (CRSP), an Affiliate of
the University of Chicago Booth School of Business.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PCRA)
library(zoo)
data(retMER)
head(retMER)
range(index(retMER))
</code></pre>

<hr>
<h2 id='retOFG'>Stock with Ticker OFG</h2><span id='topic+retOFG'></span>

<h3>Description</h3>

<p>Weekly returns (RET) of stock with ticker OFG for 2007
and 2008, along with market returns (MKT) and risk-free rate (RF).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(retOFG)
</code></pre>


<h3>Format</h3>

<p>Multivariate time series xts object
</p>


<h3>Source</h3>

<p>Center for Research in Security Prices, LLC (CRSP), an Affiliate of
the University of Chicago Booth School of Business.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PCRA)
library(zoo)
data(retOFG)
head(retOFG)
range(index(retOFG))
</code></pre>

<hr>
<h2 id='retPSC'>Stock with Ticker PSC</h2><span id='topic+retPSC'></span>

<h3>Description</h3>

<p>Weekly returns (RET) of stock with ticker PSC for 1987
and 1088, along with market returns (MKT) and risk-free rate (RF).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(retPSC)
</code></pre>


<h3>Format</h3>

<p>Multivariate time series xts object
</p>


<h3>Source</h3>

<p>Center for Research in Security Prices, LLC (CRSP), an Affiliate of
the University of Chicago Booth School of Business.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PCRA)
library(zoo)
data(retPSC)
head(retPSC)
range(index(retPSC))
</code></pre>

<hr>
<h2 id='returnsCRSPxts'>Select CRSP Stocks Returns</h2><span id='topic+returnsCRSPxts'></span>

<h3>Description</h3>

<p>Uses selectCRSPandSPGMI to select a subset of the stocksCRSP
data, and convert it to an xts object that contains the returns of a set
of stocks, along with those of the MktIndexCRSP and the Ret13WkBill.
</p>
<p>NOTE:  For this function to work, the selectCRSPandSPGMI must include the 
the stockItems TickerLast, MktIndexCRSP and Ret13WkBill.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>returnsCRSPxts(stocksData)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="returnsCRSPxts_+3A_stocksdata">stocksData</code></td>
<td>
<p>The data.table created by selectCRSPandSPGMI</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A multivariate xts object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data.table::setDTthreads(1)
library(PCRA)
library(xts)
library(data.table)
stockItems &lt;- c("Date","TickerLast","CapGroupLast","Return","MktIndexCRSP",
               "Ret13WkBill")
dateRange &lt;- c("1997-01-31","2002-12-31")
stocksDT &lt;- selectCRSPandSPGMI("monthly",dateRange = dateRange, stockItems =
                                 stockItems, factorItems = NULL,
                                 outputType   = "data.table")
stocksDT &lt;- stocksDT[CapGroupLast == "SmallCap"]
ret &lt;- returnsCRSPxts(stocksDT)
tickers &lt;- unique(stocksDT[,TickerLast])
tickers10 &lt;- tickers[11:20]
colnames &lt;- c(tickers10,"Market","RiskFree")
head(ret[,colnames],1)
</code></pre>

<hr>
<h2 id='retVHI'>Stock with Ticker VHI</h2><span id='topic+retVHI'></span>

<h3>Description</h3>

<p>Weekly returns (RET) of stock with ticker VHI for 1990
and 1991, along with market returns (MKT) and risk-free rate (RF).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(retVHI)
</code></pre>


<h3>Format</h3>

<p>Multivariate time series xts object
</p>


<h3>Source</h3>

<p>Center for Research in Security Prices, LLC (CRSP), an Affiliate of
the University of Chicago Booth School of Business.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PCRA)
library(zoo)
data(retVHI)
head(retVHI)
range(index(retVHI))
</code></pre>

<hr>
<h2 id='retWTS'>Stock with Ticker WTS</h2><span id='topic+retWTS'></span>

<h3>Description</h3>

<p>Weekly returns (RET) of stock with ticker WTS for 2009
and 2010, along with market returns (MKT) and risk-free rate (RF).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(retWTS)
</code></pre>


<h3>Format</h3>

<p>Multivariate time series xts object
</p>


<h3>Source</h3>

<p>Center for Research in Security Prices, LLC (CRSP), an Affiliate of
the University of Chicago Booth School of Business.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PCRA)
library(zoo)
data(retWTS)
head(retWTS)
range(index(retWTS))
</code></pre>

<hr>
<h2 id='selectCRSPandSPGMI'>Select and merge data from the stocksCRSP and factorsSPGMI data sets</h2><span id='topic+selectCRSPandSPGMI'></span>

<h3>Description</h3>

<p>Select data from stocksCRSP and merge with factorsSPGMI 
for use in risk model estimation or returns analysis. This version of 
selectCRSPandSPGMI allows various options for subsetting. Users may specify 
a dateRange for the data as well as specifying specific lists of tickers, 
market capitalization groups, or sectors via the subsetType and subsetValues
parameters. Additionally, for data.table output,  users may select specific 
columns for each of stocksCRSP and factorsSPGMI to be included in the final 
output via the stockItems and factorItems parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>selectCRSPandSPGMI(
  periodicity = "monthly",
  dateRange = c("1993-01-31", "2015-12-31"),
  stockItems = c("Date", "TickerLast", "CapGroupLast", "Sector", "Return", "Ret13WkBill",
    "MktIndexCRSP"),
  factorItems = c("BP", "LogMktCap", "SEV"),
  subsetType = NULL,
  subsetValues = NULL,
  outputType = "xts"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="selectCRSPandSPGMI_+3A_periodicity">periodicity</code></td>
<td>
<p>Character &quot;monthly&quot;,&quot;weekly&quot;,&quot;daily&quot;. Currently only 
&quot;monthly&quot; is supported.</p>
</td></tr>
<tr><td><code id="selectCRSPandSPGMI_+3A_daterange">dateRange</code></td>
<td>
<p>A character vector providing a start data and an end 
date, having the same form as c(&quot;2006-01-31&quot;, &quot;2010-12-31&quot;).</p>
</td></tr>
<tr><td><code id="selectCRSPandSPGMI_+3A_stockitems">stockItems</code></td>
<td>
<p>A character vector that is a subset of the names
of columns in the stocksCRSP data.table. Set to &quot;NULL&quot; when no data from this
data set is desired in the final output.</p>
</td></tr>
<tr><td><code id="selectCRSPandSPGMI_+3A_factoritems">factorItems</code></td>
<td>
<p>A character vector that is a subset of the names
of columns in the factorsSPGMI data.table. Set to &quot;NULL&quot; when no data from this
data set is desired in the final output.</p>
</td></tr>
<tr><td><code id="selectCRSPandSPGMI_+3A_subsettype">subsetType</code></td>
<td>
<p>Character &quot;TickerLast&quot;, &quot;sector&quot; or &quot;CapGroupLast&quot;. Default 
NULL for no sub-setting.</p>
</td></tr>
<tr><td><code id="selectCRSPandSPGMI_+3A_subsetvalues">subsetValues</code></td>
<td>
<p>Character vector containing either a list of TickerLast
values, Sector values, or CapGroup values.</p>
</td></tr>
<tr><td><code id="selectCRSPandSPGMI_+3A_outputtype">outputType</code></td>
<td>
<p>Character &quot;xts&quot; for a wide multivariate xts returns object,
or a long format &quot;data.table&quot; object foranalysis and risk model estimation.
Set to &quot;xts&quot; by default.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Users select a periodicity for the data (stocksCRSP is available in daily, 
weekly, and monthly variants). When weekly or daily data are selected, the
function re-samples the lower frequency factorsSPGMI data up to the 
chosen stocksCRSP frequency.
</p>
<p>IMPORTANT:  When using selectCRSPandSPGMI with periodicity = &quot;weekly&quot;, you must
first use the code line stocksCRSPweekly &lt;- getPCRAData(data = &quot;stocksCRSPweekly&quot;),
and for &quot;daily&quot; data use stocksCRSPdaily &lt;- getPCRAData(data = &quot;stocksCRSPdaily&quot;). 
</p>
<p>Users may select all columns from both data sets, a specified set of columns,
or by setting either stockItems or factorItems to &quot;NULL&quot;, may select only 
items from the other data set (that is, if only the stocksCRSP data is 
desired, set factorItems to NULL). 
</p>
<p>Users may select a specific range of dates (&quot;dateRange&quot;) for the data.
</p>
<p>Smaller sub-samples of the data (fewer rows) can be returned by
selecting a specific Sectors, CapGroupLast (MicroCap, SmallCap, MidCap, LargeCap) 
of interest, or by specifying a list of TickerLast values for which data can be
returned. This is accomplished via the subsetType and subsetValues 
parameters.
</p>


<h3>Value</h3>

<p>Either a multivariate xts object of returns, plus the risk-free rate
(&quot;Ret13WkBill&quot;) and market return (&quot;MktIndexCRSP&quot;) values, or a data.table
consisting of selected stocks and/or factor exposures data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data.table::setDTthreads(1)
data(stocksCRSP)
return_data &lt;- selectCRSPandSPGMI(periodicity  = "monthly",
                                    dateRange  = c("2006-01-31", "2006-07-31"),
                                    stockItems = c("Date", "TickerLast",
                                    "CapGroupLast", "Sector", "Return",
                                    "Ret13WkBill", "MktIndexCRSP"),
                                    factorItems  = NULL,
                                    subsetType   = NULL,
                                    subsetValues = NULL,
                                    outputType   = "xts")

length(unique(stocksCRSP$TickerLast)) 
dim(return_data) #includes all tickers plus risk free rate &amp; market return columns

stocks_factors &lt;- selectCRSPandSPGMI(periodicity = "monthly",
                                    dateRange    = c("2006-01-31", "2006-07-31"),
                                    stockItems   = c("Date", "TickerLast",
                                    "CapGroupLast", "Sector", "Return",
                                    "Ret13WkBill", "MktIndexCRSP"),
                                    factorItems  = c("BP", "LogMktCap", "SEV"),
                                    subsetType   = NULL,
                                    subsetValues = NULL,
                                    outputType   = "data.table")
names(stocks_factors)
str(stocks_factors)

</code></pre>

<hr>
<h2 id='SKest'>Skewness estimator</h2><span id='topic+SKest'></span>

<h3>Description</h3>

<p>Sample estimate of skewness
This function will eventually have a robust estimation option
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SKest(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="SKest_+3A_x">x</code></td>
<td>
<p>A numeric vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>numeric value of estimate of skewness
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(SKest)
</code></pre>

<hr>
<h2 id='SP400Industrials'>SP400Industrials</h2><span id='topic+SP400Industrials'></span>

<h3>Description</h3>

<p>Year-end data on the S&amp;P 400 Industrials® Index from 1957 to 1987 
extracted from a paper copy of the S&amp;P Analysts' Handbook.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(SP400Industrials)
</code></pre>


<h3>Format</h3>

<p>A data frame with observations on the S&amp;P 400 Industrials® index 
from 1957 to 1987
</p>

<ul>
<li> <p><strong>Year:</strong> type 'num'.
</p>
</li>
<li> <p><strong>Sales:</strong> type 'num'. Revenues per share for the S&amp;P 400 Industrials 
for the calendar year.
</p>
</li>
<li> <p><strong>Operating_Profit:</strong> type 'num'. Operating Income per share 
for the S&amp;P 400 Industrials for the calendar year.
</p>
</li>
<li> <p><strong>Profit_Margin_Pct:</strong> type 'num'. Ratio of Operating_Profit to 
Sales for the S&amp;P 400 Industrials expressed as a percentage.
</p>
</li>
<li> <p><strong>Depreciation:</strong> type 'num'. Depreciation expense per share for 
the S&amp;P 400 Industrials for the calendar year.
</p>
</li>
<li> <p><strong>Income_Taxes:</strong> type 'num'. Tax expense per share for 
the S&amp;P 400 Industrials for the calendar year.
</p>
</li>
<li> <p><strong>Earnings_Per_Share:</strong> type 'num'. Fully Diluted As-Reported Earnings 
per share for the S&amp;P 400 Industrials for the calendar year.
</p>
</li>
<li> <p><strong>Earnings_Pct_of_Sales:</strong> type 'num'. Ratio of Diluted_EPS to 
Sales for the S&amp;P 400 Industrials from 1993 to 2007 expressed as a percentage.
Definition currently unknown for earlier years.
</p>
</li>
<li> <p><strong>Dividends_Per_Share:</strong> type 'num'. Dividends per share for the 
S&amp;P 400 Industrials for the calendar year.
</p>
</li>
<li> <p><strong>Dividends_Pct_of_Earnings:</strong> type 'num'. Ratio of Dividends_Per_Share
to Diluted_EPS for the S&amp;P 400 Industrials, expressed as a percentage.
</p>
</li>
<li> <p><strong>Price_High:</strong> type 'num'. Highest price level achieved by the 
S&amp;P 400 Industrials Index during the calendar year.
</p>
</li>
<li> <p><strong>Price_Low:</strong> type 'num'. Lowest price level achieved by the 
S&amp;P 400 Industrials Index during the calendar year.
</p>
</li>
<li> <p><strong>PE_Ratio_High:</strong> type 'num'. Ratio of Price_High to Diluted_EPS
for the S&amp;P 400 Industrials Index.
</p>
</li>
<li> <p><strong>PE_Ratio_Low:</strong> type 'num'. Ratio of Price_Low to Diluted_EPS
for the S&amp;P 400 Industrials Index.
</p>
</li>
<li> <p><strong>Dividend_Yld_High:</strong> type 'num'. Ratio of Dividends_Per_Share to
Price_High for the S&amp;P 400 Industrials Index.
</p>
</li>
<li> <p><strong>Dividend_Yld_Low:</strong> type 'num'. Ratio of Dividends_Per_Share to
Price_Low for the S&amp;P 400 Industrials Index.
</p>
</li>
<li> <p><strong>Book_Value_Per_Share:</strong> type 'num'. Year-end (12/31) Book Value 
(or Shareholders' Equity) per share for the S&amp;P 400 Industrials Index.
</p>
</li>
<li> <p><strong>Book_Value_Pct_Return:</strong> type 'num'. Definition Unknown. 
</p>
</li>
<li> <p><strong>Working_Capital:</strong> type 'num'. Definition Unknown.
</p>
</li>
<li> <p><strong>Capital_Expenditures:</strong> type 'num'. Capital Expenditures
per share for the S&amp;P 400 Industrials for the calendar year.
</p>
</li></ul>



<h3>Details</h3>

<p>Data for the S&amp;P® 400 Industrials is taken from a paper copy of the 
S&amp;P® Analysts' Handbook published in 1988. The average price level of the
index in 1941-1943 was set to 10. The index is based on 70 individual groups,
and price information on it was backfilled to 1918, though we do not have 
access to it. The original S&amp;P® 500 index was created in late February 1957 
and included 425 industrial stocks, 15 rail stocks and 60 utility stocks. 
In July 1976, financial stocks were added to the index, which now included
400 industrials, 40 utilities, 40 finance and 20 transport stocks. It is 
possible that the pre-1967 history was recreated by S&amp;P® for the Analysts' 
Handbook. See https://globalfinancialdata.com/the-sp-composite-before-1957
for a useful history of the various S&amp;P® indices.
</p>


<h3>Source</h3>

<p>S&amp;P Dow Jones Indices. 
S&amp;P®, S&amp;P 400 Industrials®, S&amp;P 425 Industrials®, S&amp;P Industrials®and S&amp;P 500® 
are registered trademarks of Standard &amp; Poor’s Financial Services LLC, 
and Dow Jones® is a registered trademark of Dow Jones Trademark Holdings LLC. 
© 2023 S&amp;P Dow Jones Indices LLC, #' its affiliates and/or its licensors. 
All rights reserved.
Redistribution of the data is not permitted, and use of the data in
derivative works is not permitted without the written permission of 
S&amp;P Dow Jones Indices LLC.
</p>


<h3>References</h3>

<p>Chapter 13 (Expected Returns) of Martin, Philips, Scherer, Stoyanov and Li, 
Portfolio Construction and Risk Analysis, Springer, 2024.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
data(SP400Industrials)
names(SP400Industrials)
head(SP400Industrials, 5)
tail(SP400Industrials, 5)
</code></pre>

<hr>
<h2 id='SP425Industrials'>SP425Industrials</h2><span id='topic+SP425Industrials'></span>

<h3>Description</h3>

<p>Year-end data on the S&amp;P 425 Industrials® Index from 1946 to 1966 
extracted from a paper copy of the S&amp;P Analysts' Handbook.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(SP425Industrials)
</code></pre>


<h3>Format</h3>

<p>A data frame with observations on the S&amp;P 425 Industrials® index 
from 1946 to 1966
</p>

<ul>
<li> <p><strong>Year:</strong> type 'num'.
</p>
</li>
<li> <p><strong>Sales:</strong> type 'num'. Revenues per share for the S&amp;P 425 Industrials 
for the calendar year.
</p>
</li>
<li> <p><strong>Operating_Profit:</strong> type 'num'. Operating Income per share 
for the S&amp;P 425 Industrials for the calendar year.
</p>
</li>
<li> <p><strong>Profit_Margin_Pct:</strong> type 'num'. Ratio of Operating_Profit to 
Sales for the S&amp;P 425 Industrials expressed as a percentage.
</p>
</li>
<li> <p><strong>Depreciation:</strong> type 'num'. Depreciation expense per share for 
the S&amp;P 425 Industrials for the calendar year.
</p>
</li>
<li> <p><strong>Federal_Income_Taxes:</strong> type 'num'. Federl Tax expense per share for 
the S&amp;P 425 Industrials for the calendar year.
</p>
</li>
<li> <p><strong>Earnings_Per_Share:</strong> type 'num'. Fully Diluted As-Reported Earnings 
per share for the S&amp;P 425 Industrials for the calendar year.
</p>
</li>
<li> <p><strong>Earnings_Pct_of_Sales:</strong> type 'num'. Ratio of Diluted_EPS to 
Sales for the S&amp;P 425 Industrials from 1993 to 2007 expressed as a percentage.
Definition currently unknown for earlier years.
</p>
</li>
<li> <p><strong>Dividends_Per_Share:</strong> type 'num'. Dividends per share for the 
S&amp;P 425 Industrials for the calendar year.
</p>
</li>
<li> <p><strong>Dividends_Pct_of_Earnings:</strong> type 'num'. Ratio of Dividends_Per_Share
to Diluted_EPS for the S&amp;P 425 Industrials, expressed as a percentage.
</p>
</li>
<li> <p><strong>Price_High:</strong> type 'num'. Highest price level achieved by the 
S&amp;P 425 Industrials Index during the calendar year.
</p>
</li>
<li> <p><strong>Price_Low:</strong> type 'num'. Lowest price level achieved by the 
S&amp;P 425 Industrials Index during the calendar year.
</p>
</li>
<li> <p><strong>PE_Ratio_High:</strong> type 'num'. Ratio of Price_High to Diluted_EPS
for the S&amp;P 425 Industrials Index.
</p>
</li>
<li> <p><strong>PE_Ratio_Low:</strong> type 'num'. Ratio of Price_Low to Diluted_EPS
for the S&amp;P 425 Industrials Index.
</p>
</li>
<li> <p><strong>Dividend_Yld_High:</strong> type 'num'. Ratio of Dividends_Per_Share to
Price_High for the S&amp;P 425 Industrials Index.
</p>
</li>
<li> <p><strong>Dividend_Yld_Low:</strong> type 'num'. Ratio of Dividends_Per_Share to
Price_Low for the S&amp;P 425 Industrials Index.
</p>
</li>
<li> <p><strong>Book_Value_Per_Share:</strong> type 'num'. Year-end (12/31) Book Value 
(or Shareholders' Equity) per share for the S&amp;P 425 Industrials Index.
</p>
</li>
<li> <p><strong>Book_Value_Pct_Return:</strong> type 'num'. Definition Unknown. 
</p>
</li>
<li> <p><strong>Working_Capital:</strong> type 'num'. Definition Unknown.
</p>
</li>
<li> <p><strong>Capital_Expenditures:</strong> type 'num'. Capital Expenditures
per share for the S&amp;P 425 Industrials for the calendar year.
</p>
</li></ul>



<h3>Details</h3>

<p>Data for the S&amp;P® 425 Industrials is taken from a paper copy of the 
S&amp;P® Analysts' Handbook published in 1967. The average price level of the
index in 1941-1943 was set to 10. The index is based on 70 individual groups,
and price information on it was backfilled to 1918, though we do not have 
access to it. The original S&amp;P® 500 index was created in late February 1957 
and included 425 industrial stocks, 15 rail stocks and 60 utility stocks. It 
maintained this composition until July 1976 when finance stocks were added 
to the index. See https://globalfinancialdata.com/the-sp-composite-before-1957
for a useful history of the various S&amp;P® indices.
</p>


<h3>Source</h3>

<p>S&amp;P Dow Jones Indices. 
S&amp;P®, S&amp;P 400 Industrials®, S&amp;P 425 Industrials®, S&amp;P Industrials®and S&amp;P 500® 
are registered trademarks of Standard &amp; Poor’s Financial Services LLC, 
and Dow Jones® is a registered trademark of Dow Jones Trademark Holdings LLC. 
© 2023 S&amp;P Dow Jones Indices LLC, #' its affiliates and/or its licensors. 
All rights reserved.
Redistribution of the data is not permitted, and use of the data in
derivative works is not permitted without the written permission of 
S&amp;P Dow Jones Indices LLC.
</p>


<h3>References</h3>

<p>Chapter 13 (Expected Returns) of Martin, Philips, Scherer, Stoyanov and Li, 
Portfolio Construction and Risk Analysis, Springer, 2024.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
data(SP425Industrials)
names(SP425Industrials)
head(SP425Industrials, 5)
tail(SP425Industrials, 5)
</code></pre>

<hr>
<h2 id='SP500'>SP500</h2><span id='topic+SP500'></span>

<h3>Description</h3>

<p>Year-end data on the S&amp;P 500®, Nominal GDP and Consumer Prices from 
1925 to the most recent year-end for which final data is available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(SP500)
</code></pre>


<h3>Format</h3>

<p>A data frame with observations on the S&amp;P 500® from 1925 
to the most recent year end for which final data is available:
</p>

<ul>
<li> <p><strong>Year:</strong> type 'num'.
</p>
</li>
<li> <p><strong>SP500PriceHigh:</strong> type 'num'. Highest price level achieved by the 
S&amp;P 500 during the calendar year.
</p>
</li>
<li> <p><strong>SP500PriceLow:</strong> type 'num'. Lowest price level achieved by the 
S&amp;P 500 during the calendar year.
</p>
</li>
<li> <p><strong>SP500PriceClose:</strong> type 'num'. Year-end (12/31) price of the S&amp;P 500.
</p>
</li>
<li> <p><strong>SP500EpsAll4Q:</strong> type 'num'. As-Reported Earnings per share
for the S&amp;P 500 for the entire calendar year.
</p>
</li>
<li> <p><strong>SP500EpsBest3Q:</strong> type 'num'. 4/3 x Sum of the three highest
quarterly earnings per share for the S&amp;P 500 during the calendar year.
</p>
</li>
<li> <p><strong>SP500EpsBest2Q:</strong> type 'num'. 2 x Sum of the two highest
quarterly earnings per share for the S&amp;P 500 during the calendar year.
</p>
</li>
<li> <p><strong>SP500EpsBest1Q:</strong> type 'num'. 4 x the highest earnings per share
in a quarter for the S&amp;P 500 during the calendar year.
</p>
</li>
<li> <p><strong>SP500RevenuePS:</strong> type 'num'. Annual Revenues per share 
for the S&amp;P 500 during the calendar year.
</p>
</li>
<li> <p><strong>SP500BookValuePS:</strong> type 'num'. Year-end (12/31) Book Value 
(or Shareholders' Equity) per share for the S&amp;P 500.
</p>
</li>
<li> <p><strong>SP500DPS:</strong> type 'num'. Dividends per share for the S&amp;P 500 
during the calendar year.
</p>
</li>
<li> <p><strong>SP500OperatingEPS:</strong> type 'num'. Operating Earnings 
per share for the S&amp;P 500 for the calendar year.
</p>
</li>
<li> <p><strong>SP500NomRet:</strong> type 'num'. Nominal total return including
both change in price and dividends and not adjusted for inflation for the 
S&amp;P 500 for the current calendar year.
</p>
</li>
<li> <p><strong>SP500Nom1YrFwdRet:</strong> type 'num'. Nominal total return including
both change in price and dividends and not adjusted for inflation for the 
S&amp;P 500 for the FOLLOWING calendar year. This is the same as SP500NomRet
with a one year lag. It is included primarily to make it easy to build
forecasting models without any need to apply a lag operator to SP500NomRet.
</p>
</li>
<li> <p><strong>CPIAUCNS:</strong> type 'num'. Consumer Price Index for All Urban 
Consumers: All Items in U.S. City Average, as of year end.
</p>
</li>
<li> <p><strong>GDPA:</strong> type 'num'. Nominal GDP at an annual frequency.
</p>
</li></ul>



<h3>Details</h3>

<p>This dataset was constructed by combining information in various datasets, and
is updated annually using data published in
https://www.spglobal.com/spdji/en/documents/additional-material/sp-500-eps-est.xlsx. Final year-end numbers
Revenues per share from 1992 to 199 are taken from SP500from1967to2007,
and prior to this are estimated from the per-share revenues of the 
S&amp;P 425 Industrials® and S&amp;P Industrials® indices, using the procedure described in 
Philips, Thomas and Ural, Cenk, &quot;Uncloaking Campbell and Shiller’s CAPE: A
Comprehensive Guide to its Construction and Use&quot;, Journal of Portfolio Management,
Vol 43, No. 1, Fall 2016, pp. 109-125.
</p>


<h3>Source</h3>

<p>S&amp;P Dow Jones Indices and Federal Reserve Bank of St. Louis. 
S&amp;P®, S&amp;P 400 Industrials®, S&amp;P 425 Industrials®, S&amp;P Industrials®and S&amp;P 500® 
are registered trademarks of Standard &amp; Poor’s Financial Services LLC, 
and Dow Jones® is a registered trademark of Dow Jones Trademark Holdings LLC. 
© 2023 S&amp;P Dow Jones Indices LLC, #' its affiliates and/or its licensors. 
All rights reserved.
Redistribution of the data is not permitted, and use of the data in
derivative works is not permitted without the written permission of 
S&amp;P Dow Jones Indices LLC. Data for the S&amp;P 500® is updated using the QUARTERLY DATA tab of
https://www.spglobal.com/spdji/en/documents/additional-material/sp-500-eps-est.xlsx. 
Final year-end numbers are typically reported in April or May of the following year.
CPIAUCNS is obtained from the Federal Reserve Bank of St. Louis' FRED database at 
https://fred.stlouisfed.org/series/CPIAUCNS. 
GDPA is obtained from the Federal Reserve Bank of St. Louis' FRED database at 
https://fred.stlouisfed.org/series/GDPA.
</p>


<h3>References</h3>

<p>Chapter 13 (Expected Returns) of Martin, Philips, Scherer, Stoyanov and Li, 
Portfolio Construction and Risk Analysis, Springer, 2024.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
data(SP500)
names(SP500)
head(SP500, 5)
tail(SP500, 5)
</code></pre>

<hr>
<h2 id='SP500from1967to2007'>SP500from1967to2007</h2><span id='topic+SP500from1967to2007'></span>

<h3>Description</h3>

<p>Year-end data on the S&amp;P 500® Index from 1967 to 2007 
extracted from a paper copy of the S&amp;P Analysts' Handbook.  
The title of the page from which this data was extracted says 
&quot;Historical Index - S&amp;P 500 Composite - 500 stocks&quot;. It includes some 
information (e.g. Cash Flow) that is no longer provided. An extensive dataset
for the S&amp;P 500® and various other S&amp;P® indices can be downloaded from
https://www.spglobal.com/spdji/en/documents/additional-material/sp-500-eps-est.xlsx. 
Final year-end numbers are typically reported in April or May of the following year.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(SP500from1967to2007)
</code></pre>


<h3>Format</h3>

<p>A data frame with observations on the S&amp;P 500® index 
from 1967 to 2007
</p>

<ul>
<li> <p><strong>Year:</strong> type 'num'.
</p>
</li>
<li> <p><strong>Sales:</strong> type 'num'. Revenues per share for the S&amp;P 500® 
for the calendar year.
</p>
</li>
<li> <p><strong>Cash_Flow:</strong> type 'num'. Cash Flow per share for the S&amp;P 500® 
for the calendar year.
</p>
</li>
<li> <p><strong>Diluted_EPS:</strong> type 'num'. Fully Diluted As-Reported Earnings 
per share for the S&amp;P 500® for the calendar year.
</p>
</li>
<li> <p><strong>Dividends_Per_Share:</strong> type 'num'. Dividends per share for the 
S&amp;P 500® for the calendar year.
</p>
</li>
<li> <p><strong>Dividends_Pct_of_Earnings:</strong> type 'num'. Ratio of Dividends per 
share to Fully Diluted As-Reported Earnings per share for the S&amp;P 500® 
for the calendar year, expressed as a percentage.
</p>
</li>
<li> <p><strong>Price_High:</strong> type 'num'. Highest price level achieved by the 
S&amp;P 500® during the calendar year.
</p>
</li>
<li> <p><strong>Price_Low:</strong> type 'num'. Lowest price level achieved by the 
S&amp;P 500® during the calendar year.
</p>
</li>
<li> <p><strong>Price_Close:</strong> type 'num'. Year-end (12/31) price of the 
S&amp;P® Index.
</p>
</li>
<li> <p><strong>PE_Ratio_High:</strong> type 'num'. Ratio of Price_High to Diluted_EPS
for the S&amp;P 500®.
</p>
</li>
<li> <p><strong>PE_Ratio_Low:</strong> type 'num'. Ratio of Price_Low to Diluted_EPS
for the S&amp;P 500®.
</p>
</li>
<li> <p><strong>PE_Ratio_Close:</strong> type 'num'. Ratio of Price_Close to Diluted_EPS
for the S&amp;P 500®.
</p>
</li>
<li> <p><strong>Dividend_Yld_High:</strong> type 'num'. Ratio of Dividends_Per_Share to
Price_High for the S&amp;P 500®.
</p>
</li>
<li> <p><strong>Dividend_Yld_Low:</strong> type 'num'. Ratio of Dividends_Per_Share to
Price_Low for the S&amp;P 500®.
</p>
</li>
<li> <p><strong>Dividend_Yld_Close:</strong> type 'num'. Ratio of Dividends_Per_Share to
Price_Close for the S&amp;P 500®.
</p>
</li>
<li> <p><strong>Total_Return_Index:</strong> type 'num'. Cumulative total return of the
S&amp;P 500® including both dividends and price return. Start date for the series 
(when it was likely normalized to 100) is not known.
</p>
</li>
<li> <p><strong>Book_Value_Per_Share:</strong> type 'num'. Year-end (12/31) Book Value 
(or Shareholders' Equity) per share for the S&amp;P 500®.
</p>
</li>
<li> <p><strong>Book_Value_Pct_Return:</strong> type 'num'. Definition currently unknown. 
</p>
</li>
<li> <p><strong>Price_to_Book_Ratio:</strong> type 'num'. Ratio of Price_Close to 
Book_Value_Per_Share for the S&amp;P 500®.
</p>
</li></ul>



<h3>Details</h3>

<p>Data for the S&amp;P® Industrials is taken from a paper copy of the 
S&amp;P® Analysts' Handbook published in 2008. It includes one variable (Cash Flow)
that is no longer provided, and excludes many others (Operating Earnings, 
Capital Expenditures, Earnings Estimates, Index Divisor, 
beaten estimates, sector breakdowns, projected growth rates by sector, 
effective tax rate etc.) that are now provided by S&amp;P® in the spreadsheet
https://www.spglobal.com/spdji/en/documents/additional-material/sp-500-eps-est.xlsx. 
Final year-end numbers are typically reported in April or May of the following year.
</p>


<h3>Source</h3>

<p>S&amp;P Dow Jones Indices. 
S&amp;P®, S&amp;P 400 Industrials®, S&amp;P 425 Industrials®, S&amp;P Industrials®and S&amp;P 500® 
are registered trademarks of Standard &amp; Poor’s Financial Services LLC, 
and Dow Jones® is a registered trademark of Dow Jones Trademark Holdings LLC. 
© 2023 S&amp;P Dow Jones Indices LLC, its affiliates and/or its licensors. 
All rights reserved. ' Redistribution of the data is not permitted, and use of the data in
derivative works is not permitted without the written permission of 
S&amp;P Dow Jones Indices LLC.
</p>


<h3>References</h3>

<p>Chapter 13 (Expected Returns) of Martin, Philips, Scherer, Stoyanov and Li, 
Portfolio Construction and Risk Analysis, Springer, 2024.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
data(SP500from1967to2007)
names(SP500from1967to2007)
head(SP500from1967to2007, 5)
tail(SP500from1967to2007, 5)
</code></pre>

<hr>
<h2 id='SPIndustrials'>SPIndustrials</h2><span id='topic+SPIndustrials'></span>

<h3>Description</h3>

<p>Year-end data on the S&amp;P Industrials® Index from 1967 to 2007 
extracted from a paper copy of the S&amp;P Analysts' Handbook.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(SPIndustrials)
</code></pre>


<h3>Format</h3>

<p>A data frame with observations on the S&amp;P Industrials® index 
from 1967 to 2007
</p>

<ul>
<li> <p><strong>Year:</strong> type 'num'.
</p>
</li>
<li> <p><strong>Sales:</strong> type 'num'. Revenues per share for the S&amp;P Industrials 
for the calendar year.
</p>
</li>
<li> <p><strong>Operating_Profit:</strong> type 'num'. Operating Income per share 
for the S&amp;P Industrials for the calendar year.
</p>
</li>
<li> <p><strong>Profit_Margin_Pct:</strong> type 'num'. Ratio of Operating_Profit to 
Sales for the S&amp;P Industrials from 1993 to 2007 expressed as a percentage.
Definition currently unknown for earlier years.
</p>
</li>
<li> <p><strong>Depreciation:</strong> type 'num'. Depreciation expense per share for 
the S&amp;P Industrials for the calendar year.
</p>
</li>
<li> <p><strong>Income_Tax:</strong> type 'num'. Tax expense per share for 
the S&amp;P Industrials for the calendar year.
</p>
</li>
<li> <p><strong>Cash_Flow:</strong> type 'num'. Cash Flow per share for the 
S&amp;P Industrials for the calendar year.
</p>
</li>
<li> <p><strong>Diluted_EPS:</strong> type 'num'. Fully Diluted As-Reported Earnings 
per share for the S&amp;P Industrials for the calendar year.
</p>
</li>
<li> <p><strong>Earnings_Pct_of_Sales:</strong> type 'num'. Ratio of Diluted_EPS to 
Sales for the S&amp;P Industrials from 1993 to 2007 expressed as a percentage.
Definition currently unknown for earlier years.
</p>
</li>
<li> <p><strong>Dividends_Per_Share:</strong> type 'num'. Dividends per share for the 
S&amp;P Industrials for the calendar year.
</p>
</li>
<li> <p><strong>Dividends_Pct_of_Earnings:</strong> type 'num'. Ratio of Dividends_Per_Share
to Diluted_EPS for the S&amp;P Industrials, expressed as a percentage.
</p>
</li>
<li> <p><strong>Price_High:</strong> type 'num'. Highest price level achieved by the 
S&amp;P Industrials Index during the calendar year.
</p>
</li>
<li> <p><strong>Price_Low:</strong> type 'num'. Lowest price level achieved by the 
S&amp;P Industrials Index during the calendar year.
</p>
</li>
<li> <p><strong>Price_Close:</strong> type 'num'. Year-end (12/31) price of the 
S&amp;P Industrials Index.
</p>
</li>
<li> <p><strong>PE_Ratio_High:</strong> type 'num'. Ratio of Price_High to Diluted_EPS
for the S&amp;P Industrials Index.
</p>
</li>
<li> <p><strong>PE_Ratio_Low:</strong> type 'num'. Ratio of Price_Low to Diluted_EPS
for the S&amp;P Industrials Index.
</p>
</li>
<li> <p><strong>PE_Ratio_Close:</strong> type 'num'. Ratio of Price_Close to Diluted_EPS
for the S&amp;P Industrials Index.
</p>
</li>
<li> <p><strong>Dividend_Yld_High:</strong> type 'num'. Ratio of Dividends_Per_Share to
Price_High for the S&amp;P Industrials Index.
</p>
</li>
<li> <p><strong>Dividend_Yld_Low:</strong> type 'num'. Ratio of Dividends_Per_Share to
Price_Low for the S&amp;P Industrials Index.
</p>
</li>
<li> <p><strong>Dividend_Yld_Close:</strong> type 'num'. Ratio of Dividends_Per_Share to
Price_Close for the S&amp;P Industrials Index.
</p>
</li>
<li> <p><strong>Total_Return_Index:</strong> type 'num'. Cumulative total return of the
S&amp;P Industrials Index including both dividends and price return. Start date
for the series is not known.
</p>
</li>
<li> <p><strong>Book_Value_Per_Share:</strong> type 'num'. Year-end (12/31) Book Value 
(or Shareholders' Equity) per share for the S&amp;P Industrials Index.
</p>
</li>
<li> <p><strong>Book_Value_Pct_Return:</strong> type 'num'. Definition Unknown. 
</p>
</li>
<li> <p><strong>Price_to_Book_Ratio:</strong> type 'num'. Ratio of Price_Close to 
Book_Value_Per_Share for the S&amp;P Industrials Index.
</p>
</li></ul>



<h3>Details</h3>

<p>Data for the S&amp;P® Industrials is taken from a paper copy of the 
S&amp;P® Analysts' Handbook published in 2008. The average price level of the
index in 1941-1943 was set to 100. See https://globalfinancialdata.com/the-sp-composite-before-1957
for a useful history of the various S&amp;P® indices.
</p>


<h3>Source</h3>

<p>S&amp;P Dow Jones Indices. 
S&amp;P®, S&amp;P 400 Industrials®, S&amp;P 425 Industrials®, S&amp;P Industrials®and S&amp;P 500® 
are registered trademarks of Standard &amp; Poor’s Financial Services LLC, 
and Dow Jones® is a registered trademark of Dow Jones Trademark Holdings LLC. 
© 2023 S&amp;P Dow Jones Indices LLC, #' its affiliates and/or its licensors. 
All rights reserved. Redistribution of the data is not permitted, and use of 
the data in derivative works is not permitted without the written permission of 
S&amp;P Dow Jones Indices LLC.
</p>


<h3>References</h3>

<p>Chapter 13 (Expected Returns) of Martin, Philips, Scherer, Stoyanov and Li, 
Portfolio Construction and Risk Analysis, Springer, 2024.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
data(SPIndustrials)
names(SPIndustrials)
head(SPIndustrials, 5)
tail(SPIndustrials, 5)
</code></pre>

<hr>
<h2 id='stocksCRSP'>stocksCRSP</h2><span id='topic+stocksCRSP'></span>

<h3>Description</h3>

<p>CRSP monthly stocks data for 294 stocks 1993 to 2015
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(stocksCRSP)
</code></pre>


<h3>Format</h3>

<p>A data.table object with 82000 observations on 15 variables:
</p>

<ul>
<li> <p><strong>Date:</strong> type 'Date'.
</p>
</li>
<li> <p><strong>TickerLast:</strong> type 'chr'. The ticker as of December 2015
</p>
</li>
<li> <p><strong>Ticker:</strong> type 'chr'. Monthly ticker
period
</p>
</li>
<li> <p><strong>Company:</strong> type 'chr'. The name of company with TickerLast
</p>
</li>
<li> <p><strong>CapGroupLast:</strong> type 'chr'. Company market capitalization group
as of December 2015, one of: MicroCap, SmallCap, MidCap or LargeCap
</p>
</li>
<li> <p><strong>CapGroup:</strong> type 'chr'. Monthly market capitalization group
</p>
</li>
<li> <p><strong>GICS:</strong> type 'chr'. 6 digit S&amp;P GICS code
</p>
</li>
<li> <p><strong>Sector:</strong> type 'chr'. One of 10 sectors specified by the first
two digits of the GICS code
</p>
</li>
<li> <p><strong>Return:</strong> type 'num'. Arithmetic stock return from one period
to the next in decimal form
</p>
</li>
<li> <p><strong>RetExDiv:</strong> type 'num'.
</p>
</li>
<li> <p><strong>Price:</strong> type 'num'. Stock price at each time period in decimal
form
</p>
</li>
<li> <p><strong>PrcSplitAdj:</strong> type 'num'.
</p>
</li>
<li> <p><strong>Ret4WkBill:</strong> type 'num'. Return of 4 week Treasury bill
</p>
</li>
<li> <p><strong>Ret13WkBill:</strong> type 'num'. Return of 13 week Treasury bill
</p>
</li>
<li> <p><strong>Ret1YrBill:</strong> type 'num'. Return of 1 year Treasury bill
</p>
</li>
<li> <p><strong>mktIndexCRSP:</strong> type 'num'. CRSP value weighted market return
</p>
</li></ul>



<h3>Details</h3>

<p>The four CapGroupLast categorizations of the stocks were determined using the
three capitalization breakpoints $15.6B, $5.4B, $600M. Details concerning the
construction of the monthly CapGroup categorizations will eventually be
provided in a Vignette.
</p>
<p>Weekly and daily versions stocksCRSPweekly and stocksCRSPdaily may be
obtained using the function getPCRAData() - see PCRAData.R.
</p>


<h3>Source</h3>

<p>Center for Research in Security Prices (CRSP) at the University of
Chicago's Booth School of Business (CRSP). NOTE: CRSP data is not covered by
the GPL. Redistribution of the data is not permitted, and use of the data in
derivative works is not permitted without the written permission of CRSP.
</p>


<h3>References</h3>

<p>A standard corporate finance textbook:  Ross, Westerfield, Jaffe and
Jordan (2019). Corporate Finance, McGraw-Hill Education.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data.table::setDTthreads(1)  
data(stocksCRSP)
names(stocksCRSP)
unique(stocksCRSP$Sector)
unique(stocksCRSP$CapGroup)
head(stocksCRSP,2)
</code></pre>

<hr>
<h2 id='stocksCRSPxts'>Select CRSP Stocks Returns</h2><span id='topic+stocksCRSPxts'></span>

<h3>Description</h3>

<p>A function to extract a subset of the stocksCRSP data.table
specified by a date range and a set of tickers, with convenient defaults,
and convert it to an xts object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stocksCRSPxts(
  data,
  dateRange = c("1993-01-31", "2015-12-31"),
  tickerSet = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stocksCRSPxts_+3A_data">data</code></td>
<td>
<p>One of the data.table objects stocksCRSP, stocksCRSPweekly,
stocksCRSPdaily</p>
</td></tr>
<tr><td><code id="stocksCRSPxts_+3A_daterange">dateRange</code></td>
<td>
<p>Character vector with two components a start date
and an end date using format &quot;yyyy-mm-dd&quot;.  Default is the entire
stocksCRSP data dates range c(&quot;1993-01-31&quot;,&quot;2015-12-32&quot;)</p>
</td></tr>
<tr><td><code id="stocksCRSPxts_+3A_tickerset">tickerSet</code></td>
<td>
<p>A subset of tickers of the stocks in stocksCRSP. The
default is tickerSet = NULL, which results in selection of all stocks
in stocksCRSP.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A multivariate xts object of stock returns
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data.table::setDTthreads(1)
library(PCRA)
library(xts)
library(data.table)
class(stocksCRSP)
args(stocksCRSPxts)
tickers4 &lt;- c("DHR","CSL","AVP","AMWD")
dateRange &lt;- c("2011-01-31","2015-12-31")
returns4 &lt;- stocksCRSPxts(stocksCRSP, dateRange = dateRange,
                           tickerSet = tickers4) 
class(returns4)
dim(returns4)
names(returns4)
range(index(returns4))                         
</code></pre>

<hr>
<h2 id='strategies'>Hedge Fund Strategies Returns</h2><span id='topic+strategies'></span>

<h3>Description</h3>

<p>Monthly returns of 9 hedge fund strategies from 1994 to 2004
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(strategies)
</code></pre>


<h3>Format</h3>

<p>A multivariate xts object
</p>


<h3>Source</h3>

<p>Unknown
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PCRA)
library(zoo)
data(strategies)
names(strategies)
dim(strategies)
range(index(strategies))
</code></pre>

<hr>
<h2 id='tsPlotMP'>Lattice Multi-Panel Time Series Plots</h2><span id='topic+tsPlotMP'></span>

<h3>Description</h3>

<p>Lattice multi-panel time series plot with several plotting
style control parameters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tsPlotMP(
  ret,
  add.grid = FALSE,
  layout = NULL,
  type = "l",
  yname = "RETURNS (%)",
  Pct = FALSE,
  scaleType = "free",
  stripLeft = TRUE,
  main = NULL,
  lwd = 1,
  stripText.cex = 1,
  axis.cex = 1,
  color = "black",
  zeroLine = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tsPlotMP_+3A_ret">ret</code></td>
<td>
<p>A multivariate xts object</p>
</td></tr>
<tr><td><code id="tsPlotMP_+3A_add.grid">add.grid</code></td>
<td>
<p>Logical variable, if 'TRUE', type = c('l', 'g'), and if
'FALSE', type = c('l')</p>
</td></tr>
<tr><td><code id="tsPlotMP_+3A_layout">layout</code></td>
<td>
<p>Numeric vector of length 2 or 3 giving the number of columns,
rows, and pages (optional) for a multipanel lattice display</p>
</td></tr>
<tr><td><code id="tsPlotMP_+3A_type">type</code></td>
<td>
<p>Character variable type of plot: 'l' for a line, 'p' for a
point, and 'b' and 'o' both denote both together, deafault 'l'</p>
</td></tr>
<tr><td><code id="tsPlotMP_+3A_yname">yname</code></td>
<td>
<p>Character or expression giving label(s) for the y-axis</p>
</td></tr>
<tr><td><code id="tsPlotMP_+3A_pct">Pct</code></td>
<td>
<p>Logical variable with default TRUE</p>
</td></tr>
<tr><td><code id="tsPlotMP_+3A_scaletype">scaleType</code></td>
<td>
<p>Character variable that controls scale of y-axis, choose 
from c('same', 'free')</p>
</td></tr>
<tr><td><code id="tsPlotMP_+3A_stripleft">stripLeft</code></td>
<td>
<p>Logical variable to choose the position of Lattice strip,
TRUE for drawing strips at the left of each panel, FALSE for drawing
strips at the top of each panel</p>
</td></tr>
<tr><td><code id="tsPlotMP_+3A_main">main</code></td>
<td>
<p>A character string, or possibly an expression, for main title</p>
</td></tr>
<tr><td><code id="tsPlotMP_+3A_lwd">lwd</code></td>
<td>
<p>The line width, a positive number, defaulting to 1</p>
</td></tr>
<tr><td><code id="tsPlotMP_+3A_striptext.cex">stripText.cex</code></td>
<td>
<p>Numeric factor by which strip text in the plot(s)
are scaled relative to the default 1, 1.5 is 50 percent larger</p>
</td></tr>
<tr><td><code id="tsPlotMP_+3A_axis.cex">axis.cex</code></td>
<td>
<p>Numeric factor by which axis in the plot(s) are scaled
relative to default of 1, 1.5 is 50 larger larger, 0.5 is 50 percent smaller</p>
</td></tr>
<tr><td><code id="tsPlotMP_+3A_color">color</code></td>
<td>
<p>Specification of plotting color, with default black</p>
</td></tr>
<tr><td><code id="tsPlotMP_+3A_zeroline">zeroLine</code></td>
<td>
<p>Logical variable specifying whether or not a dotted 
horizontal line is location at the zero vertical distance, default TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value returned, instead a time series multi-panel Lattice plot
</p>


<h3>Author(s)</h3>

<p>Kirk Li and Doug Martin
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Load the data
library(xts)
data("stocksCRSP")
dat = stocksCRSP
returns = tapply(dat$Return,list(dat$Date,dat$TickerLast),I)
ret = xts(returns[,1:5],as.yearmon(rownames(returns)))

#generate return time series plot               
tsPlotMP(ret, color = 'Blue')
tsPlotMP(ret, scaleType = "same", zeroLine = FALSE)
tsPlotMP(ret, stripLeft = FALSE, main = 'Time Series Plot')
</code></pre>

<hr>
<h2 id='turnOver'>Portfolio Turnover</h2><span id='topic+turnOver'></span>

<h3>Description</h3>

<p>Calculates T-1 turn-over values for a times of portfolio
weight vectors from time t = 1 to time t = T, where the turnover from time
t-1 to time t is the sum of the absolute differences between the portfolio
weights at time t-1 and time t.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>turnOver(weights)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="turnOver_+3A_weights">weights</code></td>
<td>
<p>A multivariate xts object of portfolio weights</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A zoo time series object containing T-1 turnover values
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(turnOver)

</code></pre>

<hr>
<h2 id='winsorize'>Winsorize Data</h2><span id='topic+winsorize'></span>

<h3>Description</h3>

<p>This function Winsorizes a fraction gamma of a numeric data
set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>winsorize(x, fraction = 0.1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="winsorize_+3A_x">x</code></td>
<td>
<p>A numeric data set</p>
</td></tr>
<tr><td><code id="winsorize_+3A_fraction">fraction</code></td>
<td>
<p>A fraction greater than 0 and less than 0.5</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Winsorized data is obtained by by setting the gamma smallest
data values equal to the next smallest value, and setting the gamma largest
data values equal to the next largest data value.
</p>


<h3>Value</h3>

<p>The Winsorized numeric data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- rt(10,8)
winsorize(x,0.2)
</code></pre>

<hr>
<h2 id='winsorMean'>Winsorized Mean</h2><span id='topic+winsorMean'></span>

<h3>Description</h3>

<p>Winsorized Mean
</p>


<h3>Usage</h3>

<pre><code class='language-R'>winsorMean(x, winFrac = 0, na.rm = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="winsorMean_+3A_x">x</code></td>
<td>
<p>Numeric vector</p>
</td></tr>
<tr><td><code id="winsorMean_+3A_winfrac">winFrac</code></td>
<td>
<p>Fraction of data to be Winsorized</p>
</td></tr>
<tr><td><code id="winsorMean_+3A_na.rm">na.rm</code></td>
<td>
<p>Logical variable with default FALSE</p>
</td></tr>
<tr><td><code id="winsorMean_+3A_...">...</code></td>
<td>
<p>Pass-through parameters</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric value of Winsorized mean
</p>


<h3>Examples</h3>

<pre><code class='language-R'>args(winsorMean)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
