<!DOCTYPE html><html><head><title>Help for package renv</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="/home/deepayan/Rinstall/R-devel/lib/R/doc/html/R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {renv}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#activate'><p>Activate or deactivate a project</p></a></li>
<li><a href='#autoload'><p>Auto-load the active project</p></a></li>
<li><a href='#checkout'><p>Checkout a repository</p></a></li>
<li><a href='#clean'><p>Clean a project</p></a></li>
<li><a href='#config'><p>User-level settings</p></a></li>
<li><a href='#consent'><p>Consent to usage of renv</p></a></li>
<li><a href='#dependencies'><p>Find R package dependencies in a project</p></a></li>
<li><a href='#diagnostics'><p>Print a diagnostics report</p></a></li>
<li><a href='#embed'><p>Capture and re-use dependencies within a <code>.R</code> or <code>.Rmd</code></p></a></li>
<li><a href='#equip'><p>Install required system libraries</p></a></li>
<li><a href='#graph'><p>Generate a Package Dependency Graph</p></a></li>
<li><a href='#history'><p>View and revert to a historical lockfile</p></a></li>
<li><a href='#hydrate'><p>Copy packages from user libraries to a project library</p></a></li>
<li><a href='#imbue'><p>Imbue an renv Installation</p></a></li>
<li><a href='#init'><p>Use renv in a project</p></a></li>
<li><a href='#install'><p>Install packages</p></a></li>
<li><a href='#isolate'><p>Isolate a project</p></a></li>
<li><a href='#load'><p>Load a project</p></a></li>
<li><a href='#lockfile-api'><p>Programmatically Create and Modify a Lockfile</p></a></li>
<li><a href='#lockfiles'><p>Lockfiles</p></a></li>
<li><a href='#migrate'><p>Migrate a project from packrat to renv</p></a></li>
<li><a href='#modify'><p>Modify a Lockfile</p></a></li>
<li><a href='#paths'><p>Path for storing global state</p></a></li>
<li><a href='#project'><p>Retrieve the active project</p></a></li>
<li><a href='#purge'><p>Purge packages from the cache</p></a></li>
<li><a href='#rebuild'><p>Rebuild the packages in your project library</p></a></li>
<li><a href='#record'><p>Update package records in a lockfile</p></a></li>
<li><a href='#refresh'><p>Refresh the local cache of available packages</p></a></li>
<li><a href='#rehash'><p>Re-hash packages in the renv cache</p></a></li>
<li><a href='#remote'><p>Resolve a Remote</p></a></li>
<li><a href='#remove'><p>Remove packages</p></a></li>
<li><a href='#renv_lockfile_from_manifest'><p>Generate <code>renv.lock</code> from an RStudio Connect <code>manifest.json</code></p></a></li>
<li><a href='#renv-package'><p>Project-local Environments for R</p></a></li>
<li><a href='#repair'><p>Repair a project</p></a></li>
<li><a href='#restore'><p>Restore project library from a lockfile</p></a></li>
<li><a href='#run'><p>Run a script</p></a></li>
<li><a href='#sandbox'><p>The default library sandbox</p></a></li>
<li><a href='#scaffold'><p>Generate project infrastructure</p></a></li>
<li><a href='#settings'><p>Project settings</p></a></li>
<li><a href='#snapshot'><p>Record current state of the project library in the lockfile</p></a></li>
<li><a href='#status'><p>Report inconsistencies between lockfile, library, and dependencies</p></a></li>
<li><a href='#update'><p>Update packages</p></a></li>
<li><a href='#upgrade'><p>Upgrade renv</p></a></li>
<li><a href='#use_python'><p>Use python</p></a></li>
<li><a href='#vendor'><p>Vendor renv in an R package</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Project Environments</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.3</td>
</tr>
<tr>
<td>Description:</td>
<td>A dependency management toolkit for R. Using 'renv', you can create
    and manage project-local R libraries, save the state of these libraries to
    a 'lockfile', and later restore your library as required. Together, these
    tools can help make your projects more isolated, portable, and reproducible.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://rstudio.github.io/renv/">https://rstudio.github.io/renv/</a>, <a href="https://github.com/rstudio/renv">https://github.com/rstudio/renv</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rstudio/renv/issues">https://github.com/rstudio/renv/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>BiocManager, cli, covr, cpp11, devtools, gitcreds, jsonlite,
knitr, miniUI, packrat, pak, R6, remotes, reticulate,
rmarkdown, rstudioapi, shiny, testthat, uuid, waldo, yaml,
webfakes</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>tidyverse/tidytemplate</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>true</td>
</tr>
<tr>
<td>Config/testthat/start-first:</td>
<td>bioconductor,python,install,restore,snapshot,retrieve,remotes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-18 18:18:27 UTC; kevin</td>
</tr>
<tr>
<td>Author:</td>
<td>Kevin Ushey <a href="https://orcid.org/0000-0003-2880-7407"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Hadley Wickham <a href="https://orcid.org/0000-0003-4757-117X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Posit Software, PBC [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kevin Ushey &lt;kevin@rstudio.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-19 08:10:02 UTC</td>
</tr>
<tr>
<td>Built:</td>
<td>R 4.4.0; ; 2024-01-26 10:47:18 UTC; unix</td>
</tr>
</table>
<hr>
<h2 id='activate'>Activate or deactivate a project</h2><span id='topic+activate'></span><span id='topic+deactivate'></span>

<h3>Description</h3>

<p><code>activate()</code> enables renv for a project in both the current session and
in all future sessions. You should not generally need to call <code>activate()</code>
yourself as it's called automatically by <code><a href="packrat.html#topic+init">init()</a></code>, which is the best
way to start using renv in a new project.
</p>
<p><code>activate()</code> first calls <code><a href="renv.html#topic+scaffold">scaffold()</a></code> to set up the project
infrastructure. Most importantly, this creates a project library and adds a
an auto-loader to <code>.Rprofile</code> to ensure that the project library is
automatically used for all future instances of the project. It then restarts
the session to use that auto-loader.
</p>
<p><code>deactivate()</code> removes the infrastructure added by <code>activate()</code>, and
restarts the session. By default it will remove the auto-loader from the
<code>.Rprofile</code>; use <code>clean = TRUE</code> to also delete the lockfile and the project
library.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>activate(project = NULL, profile = NULL)

deactivate(project = NULL, clean = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="activate_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
<tr><td><code id="activate_+3A_profile">profile</code></td>
<td>
<p>The profile to be activated. When <code>NULL</code>, the default
profile is activated instead. See <code>vignette("profiles", package = "renv")</code>
for more information.</p>
</td></tr>
<tr><td><code id="activate_+3A_clean">clean</code></td>
<td>
<p>If <code>TRUE</code>, will also remove the <code style="white-space: pre;">&#8288;renv/&#8288;</code> directory and the
lockfile.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The project directory, invisibly. Note that this function is normally
called for its side effects.
</p>


<h3>Temporary deactivation</h3>

<p>If you need to temporarily disable autoload activation you can set
the <code>RENV_CONFIG_AUTOLOADER_ENABLED</code> envvar, e.g.
<code>Sys.setenv(RENV_CONFIG_AUTOLOADER_ENABLED = "false")</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# activate the current project
renv::activate()

# activate a separate project
renv::activate("~/projects/analysis")

# deactivate the currently-activated project
renv::deactivate()


## End(Not run)
</code></pre>

<hr>
<h2 id='autoload'>Auto-load the active project</h2><span id='topic+autoload'></span>

<h3>Description</h3>

<p>Automatically load the renv project associated with a particular directory.
renv will search parent directories for the renv project root; if found,
that project will be loaded via <code><a href="base.html#topic+load">load()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>autoload()
</code></pre>


<h3>Details</h3>

<p>To enable the renv auto-loader, you can place:
</p>
<div class="sourceCode"><pre>renv::autoload()
</pre></div>
<p>into your site-wide or user <code>.Rprofile</code> to ensure that renv projects are
automatically loaded for any newly-launched <span class="rlang"><b>R</b></span> sessions, even if those <span class="rlang"><b>R</b></span>
sessions are launched within the sub-directory of an renv project.
</p>
<p>If you'd like to launch <span class="rlang"><b>R</b></span> within the sub-directory of an renv project
without auto-loading renv, you can set the environment variable:
</p>
<div class="sourceCode"><pre>RENV_AUTOLOAD_ENABLED = FALSE
</pre></div>
<p>before starting <span class="rlang"><b>R</b></span>.
</p>
<p>Note that <code>renv::autoload()</code> is only compatible with projects using
<code style="white-space: pre;">&#8288;renv 0.15.3&#8288;</code> or newer, as it relies on features within the <code>renv/activate.R</code>
script that are only generated with newer versions of renv.
</p>

<hr>
<h2 id='checkout'>Checkout a repository</h2><span id='topic+checkout'></span>

<h3>Description</h3>

<p><code>renv::checkout()</code> can be used to retrieve the latest-availabe packages from
a (set of) package repositories.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkout(
  repos = NULL,
  ...,
  packages = NULL,
  date = NULL,
  clean = FALSE,
  actions = "restore",
  project = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkout_+3A_repos">repos</code></td>
<td>
<p>The <span class="rlang"><b>R</b></span> package repositories to use.</p>
</td></tr>
<tr><td><code id="checkout_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p>
</td></tr>
<tr><td><code id="checkout_+3A_packages">packages</code></td>
<td>
<p>The packages to be installed. When <code>NULL</code> (the default),
all packages currently used in the project will be installed, as
determined by <code><a href="renv.html#topic+dependencies">dependencies()</a></code>. The recursive dependencies of these
packages will be included as well.</p>
</td></tr>
<tr><td><code id="checkout_+3A_date">date</code></td>
<td>
<p>The snapshot date to use. When set, the associated snapshot as
available from the Posit's public
<a href="https://packagemanager.rstudio.com/">Package Manager</a> instance will be
used. Ignored if <code>repos</code> is non-<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="checkout_+3A_clean">clean</code></td>
<td>
<p>Boolean; remove packages not recorded in the lockfile from
the target library? Use <code>clean = TRUE</code> if you'd like the library state
to exactly reflect the lockfile contents after <code>restore()</code>.</p>
</td></tr>
<tr><td><code id="checkout_+3A_actions">actions</code></td>
<td>
<p>The action(s) to perform with the requested repositories.
This can either be &quot;snapshot&quot;, in which <code>renv</code> will generate a lockfile
based on the latest versions of the packages available from <code>repos</code>, or
&quot;restore&quot; if you'd like to install those packages. You can use
<code>c("snapshot", "restore")</code> if you'd like to generate a lockfile and
install those packages in the same step.</p>
</td></tr>
<tr><td><code id="checkout_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>renv::checkout()</code> is most useful with services like the Posit's
<a href="https://packagemanager.rstudio.com/">Package Manager</a>, as it
can be used to switch between different repository snapshots within an
renv project. In this way, you can upgrade (or downgrade) all of the
packages used in a particular renv project to the package versions
provided by a particular snapshot.
</p>
<p>If your library contains packages installed from other remote sources (e.g.
GitHub), but a version of a package of the same name is provided by the
repositories being checked out, then please be aware that the package will be
replaced with the version provided by the requested repositories. This could
be a concern if your project uses <span class="rlang"><b>R</b></span> packages from GitHub whose name matches
that of an existing CRAN package, but is otherwise unrelated to the package
on CRAN.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# check out packages from PPM using the date '2023-01-02'
renv::checkout(date = "2023-01-02")

# alternatively, supply the full repository path
renv::checkout(repos = "https://packagemanager.rstudio.com/cran/2023-01-02")

# only check out some subset of packages (and their recursive dependencies)
renv::checkout(packages = "dplyr", date = "2023-01-02")


## End(Not run)
</code></pre>

<hr>
<h2 id='clean'>Clean a project</h2><span id='topic+clean'></span>

<h3>Description</h3>

<p>Clean up a project and its associated <span class="rlang"><b>R</b></span> libraries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean(project = NULL, ..., actions = NULL, prompt = interactive())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
<tr><td><code id="clean_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p>
</td></tr>
<tr><td><code id="clean_+3A_actions">actions</code></td>
<td>
<p>The set of clean actions to take. See the documentation in
<strong>Actions</strong> for a list of available actions, and the default actions
taken when no actions are supplied.</p>
</td></tr>
<tr><td><code id="clean_+3A_prompt">prompt</code></td>
<td>
<p>Boolean; prompt the user before taking any action? For backwards
compatibility, <code>confirm</code> is accepted as an alias for <code>prompt</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The project directory, invisibly. Note that this function is normally
called for its side effects.
</p>


<h3>Actions</h3>

<p>The following clean actions are available:
</p>

<dl>
<dt><code>package.locks</code></dt><dd>
<p>During package installation, <span class="rlang"><b>R</b></span> will create package locks in the
library path, typically named <code style="white-space: pre;">&#8288;00LOCK-&lt;package&gt;&#8288;</code>. On occasion, if package
installation fails or <span class="rlang"><b>R</b></span> is terminated while installing a package, these
locks can be left behind and will inhibit future attempts to reinstall
that package. Use this action to remove such left-over package locks.
</p>
</dd>
<dt><code>library.tempdirs</code></dt><dd>
<p>During package installation, <span class="rlang"><b>R</b></span> may create temporary directories with
names of the form <code style="white-space: pre;">&#8288;file\w{12}&#8288;</code>, and on occasion those files can be
left behind even after they are no longer in use. Use this action to
remove such left-over directories.
</p>
</dd>
<dt><code>system.library</code></dt><dd>
<p>In general, it is recommended that only packages distributed with <span class="rlang"><b>R</b></span>
are installed into the default library (the library path referred to
by <code>.Library</code>). Use this action to remove any user-installed packages
that have been installed to the system library.
</p>
<p>Because this action is destructive, it is by default never run &ndash; it
must be explicitly requested by the user.
</p>
</dd>
<dt><code>unused.packages</code></dt><dd>
<p>Remove packages that are installed in the project library, but no longer
appear to be used in the project sources.
</p>
<p>Because this action is destructive, it is by default only run in
interactive sessions when prompting is enabled.
</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# clean the current project
renv::clean()


## End(Not run)
</code></pre>

<hr>
<h2 id='config'>User-level settings</h2><span id='topic+config'></span>

<h3>Description</h3>

<p>Configure different behaviors of renv.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>config
</code></pre>


<h3>Details</h3>

<p>For a given configuration option:
</p>

<ol>
<li><p> If an <span class="rlang"><b>R</b></span> option of the form <code style="white-space: pre;">&#8288;renv.config.&lt;name&gt;&#8288;</code> is available,
then that option's value will be used;
</p>
</li>
<li><p> If an environment variable of the form <code style="white-space: pre;">&#8288;RENV_CONFIG_&lt;NAME&gt;&#8288;</code> is available,
then that option's value will be used;
</p>
</li>
<li><p> Otherwise, the default for that particular configuration value is used.
</p>
</li></ol>

<p>Any periods (<code>.</code>)s in the option name are transformed into underscores (<code style="white-space: pre;">&#8288;_&#8288;</code>)
in the environment variable name, and vice versa. For example, the
configuration option <code>auto.snapshot</code> could be configured as:
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;options(renv.config.auto.snapshot = &lt;...&gt;)&#8288;</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;Sys.setenv(RENV_CONFIG_AUTO_SNAPSHOT = &lt;...&gt;)&#8288;</code>
</p>
</li></ul>

<p>Note that if both the <span class="rlang"><b>R</b></span> option and the environment variable are defined, the
<span class="rlang"><b>R</b></span> option will be used instead. Environment variables can be more useful when
you want a particular configuration to be automatically inherited by child
processes; if that behavior is not desired, then the R option may be
preferred.
</p>
<p>If you want to set and persist these options across multiple projects, it is
recommended that you set them in a a startup <code>.Renviron</code> file; e.g. in your
own <code style="white-space: pre;">&#8288;~/.Renviron&#8288;</code>, or in the R installation's <code>etc/Rprofile.site</code> file. See
<a href="base.html#topic+Startup">Startup</a> for more details.
</p>
<p>Configuration options can also be set within the project <code>.Rprofile</code>, but
be aware the options should be set before <code>source("renv/activate.R")</code> is
called.
</p>


<h3>Configuration</h3>

<p>The following renv configuration options are available:
</p>


<h4>renv.config.activate.prompt</h4>

<p>Automatically prompt the user to activate the current project, if it does not appear to already be activated? This is mainly useful to help ensure that calls to <code>renv::snapshot()</code> and <code>renv::restore()</code> use the project library. See <code>?renv::activate</code> for more details.
Defaults to <code>TRUE</code>.</p>



<h4>renv.config.autoloader.enabled</h4>

<p>Enable the renv auto-loader? When <code>FALSE</code>, renv will not not automatically load a project containing an renv autoloader within its <code>.Rprofile</code>. In addition, renv will not write out the project auto-loader in calls to <code>renv::init()</code>.
Defaults to <code>TRUE</code>.</p>



<h4>renv.config.auto.snapshot</h4>

<p>Automatically snapshot changes to the project library when the project dependencies change?
Defaults to <code>FALSE</code>.</p>



<h4>renv.config.bitbucket.host</h4>

<p>The default Bitbucket host to be used during package retrieval.
Defaults to <code>"api.bitbucket.org/2.0"</code>.</p>



<h4>renv.config.copy.method</h4>

<p>The method to use when attempting to copy directories. See <strong>Copy Methods</strong> for more information.
Defaults to <code>"auto"</code>.</p>



<h4>renv.config.connect.timeout</h4>

<p>The amount of time to spend (in seconds) when attempting to download a file. Only applicable when the <code>curl</code> downloader is used.
Defaults to <code>20L</code>.</p>



<h4>renv.config.connect.retry</h4>

<p>The number of times to attempt re-downloading a file, when transient download errors occur. Only applicable when the <code>curl</code> downloader is used.
Defaults to <code>3L</code>.</p>



<h4>renv.config.cache.enabled</h4>

<p>Enable the global renv package cache? When active, renv will install packages into a global cache, and link or copy packages from the cache into your <span class="rlang"><b>R</b></span> library as appropriate. This can greatly save on disk space and install time when <span class="rlang"><b>R</b></span> packages are shared across multiple projects in the same environment.
Defaults to <code>TRUE</code>.</p>



<h4>renv.config.cache.symlinks</h4>

<p>Symlink packages from the global renv package cache into your project library? When <code>TRUE</code>, renv will use symlinks (or, on Windows, junction points) to reference packages installed in the cache. Set this to <code>FALSE</code> if you'd prefer to copy packages from the cache into your project library. Enabled by default, except on Windows where this feature is only enabled if the project library and global package cache are on the same volume.
Defaults to <code>NULL</code>.</p>



<h4>renv.config.dependency.errors</h4>

<p>Many renv APIs require the enumeration of your project's <span class="rlang"><b>R</b></span> package dependencies. This option controls how errors that occur during this enumeration are handled. By default, errors are reported but are non-fatal. Set this to <code>"fatal"</code> to force errors to be fatal, and <code>"ignored"</code> to ignore errors altogether. See <code><a href="renv.html#topic+dependencies">dependencies()</a></code> for more details.
Defaults to <code>"reported"</code>.</p>



<h4>renv.config.dependencies.limit</h4>

<p>By default, renv reports if it discovers more than this many files when looking for dependencies, as that may indicate you are running <code>dependencies()</code> in the wrong place. Set to <code>Inf</code> to disable this warning.
Defaults to <code>1000L</code>.</p>



<h4>renv.config.exported.functions</h4>

<p>When <code>library(renv)</code> is called, should its exports be placed on the search path? Set this to <code>FALSE</code> to avoid issues that can arise with, for example, <code>renv::load()</code> masking <code>base::load()</code>. In general, we recommend referencing renv functions from its namespace explicitly; e.g. prefer <code>renv::snapshot()</code> over <code>snapshot()</code>.
By default, all exported renv functions are attached and placed on the search path, for backwards compatibility with existing scripts using renv.
Defaults to <code>"*"</code>.</p>



<h4>renv.config.external.libraries</h4>

<p>A character vector of external libraries, to be used in tandem with your projects. Be careful when using external libraries: it's possible that things can break within a project if the version(s) of packages used in your project library happen to be incompatible with packages in your external libraries; for example, if your project required <code style="white-space: pre;">&#8288;xyz 1.0&#8288;</code> but <code style="white-space: pre;">&#8288;xyz 1.1&#8288;</code> was present and loaded from an external library. Can also be an <span class="rlang"><b>R</b></span> function that provides the paths to external libraries. Library paths will be expanded via <code><a href="base.html#topic+.expand_R_libs_env_var">.expand_R_libs_env_var()</a></code> as necessary.
Defaults to <code>NULL</code>.</p>



<h4>renv.config.filebacked.cache</h4>

<p>Enable the renv file-backed cache? When enabled, renv will cache the contents of files that are read (e.g. DESCRIPTION files) in memory, thereby avoiding re-reading the file contents from the filesystem if the file has not changed. renv uses the file <code>mtime</code> to determine if the file has changed; consider disabling this if <code>mtime</code> is unreliable on your system.
Defaults to <code>TRUE</code>.</p>



<h4>renv.config.github.host</h4>

<p>The default GitHub host to be used during package retrieval.
Defaults to <code>"api.github.com"</code>.</p>



<h4>renv.config.gitlab.host</h4>

<p>The default GitLab host to be used during package retrieval.
Defaults to <code>"gitlab.com"</code>.</p>



<h4>renv.config.hydrate.libpaths</h4>

<p>A character vector of library paths, to be used by <code><a href="renv.html#topic+hydrate">hydrate()</a></code> when attempting to hydrate projects. When empty, the default set of library paths (as documented in <code>?renv::hydrate</code>) are used instead. See <code><a href="renv.html#topic+hydrate">hydrate()</a></code> for more details.
Defaults to <code>NULL</code>.</p>



<h4>renv.config.install.build</h4>

<p>Should downloaded package archives be built (via <code style="white-space: pre;">&#8288;R CMD build&#8288;</code>) before installation? When TRUE, package vignettes will also be built as part of package installation. Because building packages before installation may require packages within 'Suggests' to be available, this option is not enabled by default.
Defaults to <code>FALSE</code>.</p>



<h4>renv.config.install.remotes</h4>

<p>Should renv read a package's <code style="white-space: pre;">&#8288;Remotes:&#8288;</code> field when determining how package dependencies should be installed?
Defaults to <code>TRUE</code>.</p>



<h4>renv.config.install.shortcuts</h4>

<p>Allow for a set of 'shortcuts' when installing packages with renv? When enabled, if renv discovers that a package to be installed is already available within the user or site libraries, then it will install a local copy of that package.
Defaults to <code>TRUE</code>.</p>



<h4>renv.config.install.staged</h4>

<p>DEPRECATED: Please use <code>renv.config.install.transactional</code> instead.
Defaults to <code>TRUE</code>.</p>



<h4>renv.config.install.transactional</h4>

<p>Perform a transactional install of packages during install and restore? When enabled, renv will first install packages into a temporary library, and later copy or move those packages back into the project library only if all packages were successfully downloaded and installed. This can be useful if you'd like to avoid mutating your project library if installation of one or more packages fails.
Defaults to <code>TRUE</code>.</p>



<h4>renv.config.install.verbose</h4>

<p>Be verbose when installing R packages from sources? When <code>TRUE</code>, renv will stream any output generated during package build + installation to the console.
Defaults to <code>FALSE</code>.</p>



<h4>renv.config.locking.enabled</h4>

<p>Use interprocess locks when invoking methods which might mutate the project library? Enable this to allow multiple processes to use the same renv project, while minimizing risks relating to concurrent access to the project library. Disable this if you encounter locking issues. Locks are stored as files within the project at <code>renv/lock</code>; if you need to manually remove a stale lock you can do so via <code>unlink("renv/lock", recursive = TRUE)</code>.
Defaults to <code>FALSE</code>.</p>



<h4>renv.config.mran.enabled</h4>

<p>DEPRECATED: MRAN is no longer maintained by Microsoft.
Defaults to <code>FALSE</code>.</p>



<h4>renv.config.pak.enabled</h4>

<p>Use the <a href="https://pak.r-lib.org/">pak</a> package to install packages?
Defaults to <code>FALSE</code>.</p>



<h4>renv.config.ppm.enabled</h4>

<p>Boolean; enable <a href="https://packagemanager.posit.co/">Posit Package Manager</a> integration in renv projects? When <code>TRUE</code>, renv will attempt to transform repository URLs used by PPM into binary URLs as appropriate for the current Linux platform. Set this to <code>FALSE</code> if you'd like to continue using source-only PPM URLs, or if you find that renv is improperly transforming your repository URLs. You can still set and use PPM repositories with this option disabled; it only controls whether renv tries to transform source repository URLs into binary URLs on your behalf.
Defaults to <code>TRUE</code>.</p>



<h4>renv.config.ppm.default</h4>

<p>Boolean; should new projects use the <a href="https://packagemanager.posit.co/">Posit Public Package Manager</a> instance by default? When <code>TRUE</code> (the default), projects initialized with <code>renv::init()</code> will use the P3M instance if the <code>repos</code> R option has not already been set by some other means (for example, in a startup <code>.Rprofile</code>).
Defaults to <code>TRUE</code>.</p>



<h4>renv.config.ppm.url</h4>

<p>The default PPM URL to be used for new renv projects. Defaults to the CRAN mirror maintained by Posit at <a href="https://packagemanager.posit.co/">https://packagemanager.posit.co/</a>. This option can be changed if you'd like renv to use an alternate package manager instance.
Defaults to <code>"https://packagemanager.posit.co/cran/latest"</code>.</p>



<h4>renv.config.repos.override</h4>

<p>Override the R package repositories used during <code><a href="packrat.html#topic+restore">restore()</a></code>? Primarily useful for deployment / continuous integration, where you might want to enforce the usage of some set of repositories over what is defined in <code>renv.lock</code> or otherwise set by the R session.
Defaults to <code>NULL</code>.</p>



<h4>renv.config.rspm.enabled</h4>

<p>DEPRECATED: Please use <code>renv.config.ppm.enabled</code> instead.
Defaults to <code>TRUE</code>.</p>



<h4>renv.config.sandbox.enabled</h4>

<p>Enable sandboxing for renv projects? When active, renv will attempt to sandbox the system library, preventing non-system packages installed in the system library from becoming available in renv projects. (That is, only packages with priority <code>"base"</code> or <code>"recommended"</code>, as reported by <code>installed.packages()</code>, are made available.)
Sandboxing is done by linking or copying system packages into a separate library path, and then instructing R to use that library path as the system library path. In some environments, this action can take a large amount of time &ndash; in such a case, you may want to disable the renv sandbox.
Defaults to <code>TRUE</code>.</p>



<h4>renv.config.shims.enabled</h4>

<p>Should renv shims be installed on package load? When enabled, renv will install its own shims over the functions <code>install.packages()</code>, <code>update.packages()</code> and <code>remove.packages()</code>, delegating these functions to <code><a href="BiocManager.html#topic+install">install()</a></code>, <code><a href="stats.html#topic+update">update()</a></code> and <code><a href="base.html#topic+remove">remove()</a></code> as appropriate.
Defaults to <code>TRUE</code>.</p>



<h4>renv.config.snapshot.inference</h4>

<p>For packages which were installed from local sources, should renv try to infer the package's remote from its DESCRIPTION file? When <code>TRUE</code>, renv will check and prompt you to update the package's DESCRIPTION file if the remote source can be ascertained. Currently, this is only implemented for packages hosted on GitHub. Note that this check is only performed in interactive R sessions.
Defaults to <code>TRUE</code>.</p>



<h4>renv.config.snapshot.validate</h4>

<p>Validate <span class="rlang"><b>R</b></span> package dependencies when calling snapshot? When <code>TRUE</code>, renv will attempt to diagnose potential issues in the project library before creating <code>renv.lock</code> &ndash; for example, if a package installed in the project library depends on a package which is not currently installed.
Defaults to <code>TRUE</code>.</p>



<h4>renv.config.startup.quiet</h4>

<p>Be quiet during startup? When set, renv will not display the typical <code style="white-space: pre;">&#8288;Project &lt;path&gt; loaded. [renv &lt;version&gt;]&#8288;</code> banner on startup.
Defaults to <code>NULL</code>.</p>



<h4>renv.config.synchronized.check</h4>

<p>Check that the project library is synchronized with the lockfile on load?
Defaults to <code>TRUE</code>.</p>



<h4>renv.config.updates.check</h4>

<p>Check for package updates when the session is initialized? This can be useful if you'd like to ensure that your project lockfile remains up-to-date with packages as they are released on CRAN.
Defaults to <code>FALSE</code>.</p>



<h4>renv.config.updates.parallel</h4>

<p>Check for package updates in parallel? This can be useful when a large number of packages installed from non-CRAN remotes are installed, as these packages can then be checked for updates in parallel.
Defaults to <code>2L</code>.</p>



<h4>renv.config.user.environ</h4>

<p>Load the user R environ (typically located at <code style="white-space: pre;">&#8288;~/.Renviron&#8288;</code>) when renv is loaded?
Defaults to <code>TRUE</code>.</p>



<h4>renv.config.user.library</h4>

<p>Include the system library on the library paths for your projects? Note that this risks breaking project encapsulation and is not recommended for projects which you intend to share or collaborate on with other users. See also the caveats for the <code>renv.config.external.libraries</code> option.
Defaults to <code>FALSE</code>.</p>



<h4>renv.config.user.profile</h4>

<p>Load the user R profile (typically located at <code style="white-space: pre;">&#8288;~/.Rprofile&#8288;</code>) when renv is loaded? This is disabled by default, as running arbitrary code from the the user <code style="white-space: pre;">&#8288;~/.Rprofile&#8288;</code> could risk breaking project encapsulation. If your goal is to set environment variables that are visible within all renv projects, then placing those in <code style="white-space: pre;">&#8288;~/.Renviron&#8288;</code> is often a better choice. Defaults to <code>FALSE</code>.</p>



<h3>Copy methods</h3>

<p>If you find that renv is unable to copy some directories in your
environment, you may want to try setting the <code>copy.method</code> option. By
default, renv will try to choose a system tool that is likely to succeed in
copying files on your system &ndash; <code>robocopy</code> on Windows, and <code>cp</code> on Unix.
renv will also instruct these tools to preserve timestamps and attributes
when copying files. However, you can select a different method as
appropriate.
</p>
<p>The following methods are supported:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code>auto</code>     </td><td style="text-align: left;"> Use <code>robocopy</code> on Windows, and <code>cp</code> on Unix-alikes. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>R</code>        </td><td style="text-align: left;"> Use <span class="rlang"><b>R</b></span>'s built-in <code>file.copy()</code> function. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>cp</code>       </td><td style="text-align: left;"> Use <code>cp</code> to copy files. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>robocopy</code> </td><td style="text-align: left;"> Use <code>robocopy</code> to copy files. (Only available on Windows.) </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>rsync</code>    </td><td style="text-align: left;"> Use <code>rsync</code> to copy files. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>You can also provide a custom copy method if required; e.g.
</p>
<div class="sourceCode"><pre>options(renv.config.copy.method = function(src, dst) {
  # copy a file from 'src' to 'dst'
})
</pre></div>
<p>Note that renv will always first attempt to copy a directory first to a
temporary path within the target folder, and then rename that temporary path
to the final target destination. This helps avoid issues where a failed
attempt to copy a directory could leave a half-copied directory behind
in the final location.
</p>


<h3>Project-local settings</h3>

<p>For settings that should persist alongside a particular project, the
various settings available in <a href="renv.html#topic+settings">settings</a> can be used.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# disable automatic snapshots
options(renv.config.auto.snapshot = FALSE)

# disable with environment variable
Sys.setenv(RENV_CONFIG_AUTO_SNAPSHOT = FALSE)

</code></pre>

<hr>
<h2 id='consent'>Consent to usage of renv</h2><span id='topic+consent'></span>

<h3>Description</h3>

<p>Provide consent to renv, allowing it to write and update certain files
on your filesystem.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>consent(provided = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="consent_+3A_provided">provided</code></td>
<td>
<p>The default provided response. If you need to provide
consent from a non-interactive <span class="rlang"><b>R</b></span> session, you can invoke
<code>renv::consent(provided = TRUE)</code> explicitly.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>As part of its normal operation, renv will write and update some files
in your project directory, as well as an application-specific cache
directory. These paths are documented within <a href="renv.html#topic+paths">paths</a>.
</p>
<p>In accordance with the
<a href="https://cran.r-project.org/web/packages/policies.html">CRAN Repository Policy</a>,
renv must first obtain consent from you, the user, before these actions
can be taken. Please call <code>renv::consent()</code> first to provide this consent.
</p>
<p>You can also set the <span class="rlang"><b>R</b></span> option:
</p>
<div class="sourceCode"><pre>options(renv.consent = TRUE)
</pre></div>
<p>to implicitly provide consent for e.g. non-interactive <span class="rlang"><b>R</b></span> sessions.
</p>


<h3>Value</h3>

<p><code>TRUE</code> if consent is provided, or an <span class="rlang"><b>R</b></span> error otherwise.
</p>

<hr>
<h2 id='dependencies'>Find R package dependencies in a project</h2><span id='topic+dependencies'></span>

<h3>Description</h3>

<p><code>dependencies()</code> will crawl files within your project, looking for <span class="rlang"><b>R</b></span> files
and the packages used within those <span class="rlang"><b>R</b></span> files. This is done primarily by
parsing the code and looking for calls of the form <code>library(package)</code>,
<code>require(package)</code>, <code>requireNamespace("package")</code>, and <code>package::method()</code>.
renv also supports package loading with
<a href="https://cran.r-project.org/package=box">box</a> (<code>box::use(...)</code>) and
<a href="https://cran.r-project.org/package=pacman">pacman</a> (<code>pacman::p_load(...)</code>)
.
</p>
<p>For <span class="rlang"><b>R</b></span> package projects, dependencies expressed in the <code>DESCRIPTION</code> file
will also be discovered.
</p>
<p>Note that the rmarkdown package is required in order to crawl dependencies
in R Markdown files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dependencies(
  path = getwd(),
  root = NULL,
  ...,
  quiet = NULL,
  progress = TRUE,
  errors = c("reported", "fatal", "ignored"),
  dev = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dependencies_+3A_path">path</code></td>
<td>
<p>The path to a <code>.R</code>, <code>.Rmd</code>, <code>.qmd</code>, <code>DESCRIPTION</code>, a directory
containing such files, or an R function. The default uses all files
found within the current working directory and its children.</p>
</td></tr>
<tr><td><code id="dependencies_+3A_root">root</code></td>
<td>
<p>The root directory to be used for dependency discovery.
Defaults to the active project directory. You may need to set this
explicitly to ensure that your project's <code>.renvignore</code>s (if any) are
properly handled.</p>
</td></tr>
<tr><td><code id="dependencies_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p>
</td></tr>
<tr><td><code id="dependencies_+3A_quiet">quiet</code></td>
<td>
<p>Boolean; be quiet while checking for dependencies?
Setting <code>quiet = TRUE</code> is equivalent to setting <code>progress = FALSE</code>
and <code>errors = "ignored"</code>, and overrides those options when not <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="dependencies_+3A_progress">progress</code></td>
<td>
<p>Boolean; report progress output while enumerating
dependencies?</p>
</td></tr>
<tr><td><code id="dependencies_+3A_errors">errors</code></td>
<td>
<p>How should errors that occur during dependency enumeration be
handled?
</p>

<ul>
<li> <p><code>"reported"</code> (the default): errors are reported to the user, but
otherwise ignored.
</p>
</li>
<li> <p><code>"fatal"</code>: errors are fatal and stop execution.
</p>
</li>
<li> <p><code>"ignored"</code>: errors are ignored and not reported to the user.
</p>
</li></ul>
</td></tr>
<tr><td><code id="dependencies_+3A_dev">dev</code></td>
<td>
<p>Boolean; include development dependencies? These packages are
typically required when developing the project, but not when running it
(i.e. you want them installed when humans are working on the project but
not when computers are deploying it).
</p>
<p>Development dependencies include packages listed in the <code>Suggests</code> field
of a <code>DESCRIPTION</code> found in the project root, and roxygen2 or devtools if
their use is implied by other project metadata. They also include packages
used in <code style="white-space: pre;">&#8288;~/.Rprofile&#8288;</code> if <code>config$user.profile()</code> is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <span class="rlang"><b>R</b></span> <code>data.frame</code> of discovered dependencies, mapping inferred
package names to the files in which they were discovered. Note that the
<code>Package</code> field might name a package remote, rather than just a plain
package name.
</p>


<h3>Missing dependencies</h3>

<p><code>dependencies()</code> uses static analysis to determine which packages are used
by your project. This means that it inspects, but doesn't run, your
source. Static analysis generally works well, but is not 100% reliable in
detecting the packages required by your project. For example, renv is
unable to detect this kind of usage:
</p>
<div class="sourceCode r"><pre>for (package in c("dplyr", "ggplot2")) {
  library(package, character.only = TRUE)
}
</pre></div>
<p>It also can't generally tell if one of the packages you use, uses one of
its suggested packages. For example, <code>tidyr::separate_wider_delim()</code>
uses the stringr package which is only suggested, not required by tidyr.
</p>
<p>If you find that renv's dependency discovery misses one or more packages
that you actually use in your project, one escape hatch is to include a file
called <code style="white-space: pre;">&#8288;_dependencies.R&#8288;</code> that includes straightforward library calls:
</p>
<div class="sourceCode"><pre>library(dplyr)
library(ggplot2)
library(stringr)
</pre></div>


<h3>Explicit dependencies</h3>

<p>Alternatively, you can suppress dependency discover and instead rely
on an explicit set of packages recorded by you in a project <code>DESCRIPTION</code> file.
Call <code>renv::settings$snapshot.type("explicit")</code> to enable &quot;explicit&quot; mode,
then enumerate your dependencies in a project <code>DESCRIPTION</code> file.
</p>
<p>In that case, your <code>DESCRIPTION</code> might look something like this:
</p>
<div class="sourceCode"><pre>Type: project
Description: My project.
Depends:
    tidyverse,
    devtools,
    shiny,
    data.table
</pre></div>


<h3>Ignoring files</h3>

<p>By default, renv will read your project's <code>.gitignore</code>s (if present) to
determine whether certain files or folders should be included when traversing
directories. If preferred, you can also create a <code>.renvignore</code> file (with
entries of the same format as a standard <code>.gitignore</code> file) to tell renv
which files to ignore within a directory. If both <code>.renvignore</code> and
<code>.gitignore</code> exist within a folder, the <code>.renvignore</code> will be used in lieu of
the <code>.gitignore</code>.
</p>
<p>See <a href="https://git-scm.com/docs/gitignore">https://git-scm.com/docs/gitignore</a> for documentation on the
<code>.gitignore</code> format. Some simple examples here:
</p>
<div class="sourceCode"><pre># ignore all R Markdown files
*.Rmd

# ignore all data folders
data/

# ignore only data folders from the root of the project
/data/
</pre></div>
<p>Using ignore files is important if your project contains a large number
of files; for example, if you have a <code style="white-space: pre;">&#8288;data/&#8288;</code> directory containing many
text files.
</p>


<h3>Errors</h3>

<p>renv's attempts to enumerate package dependencies in your project can fail
&ndash; most commonly, because of failures when attempting to parse your <span class="rlang"><b>R</b></span> code.
You can use the <code>errors</code> argument to suppress these problems, but a
more robust solution is tell renv not to look at the problematic code.
As well as using <code>.renvignore</code>, as described above, you can also suppress errors
discovered within individual <code>.Rmd</code> chunks by including <code>renv.ignore=TRUE</code>
in the chunk header. For example:
</p>
<div class="sourceCode"><pre>```{r chunk-label, renv.ignore=TRUE}
# code in this chunk will be ignored by renv
```
</pre></div>
<p>Similarly, if you'd like renv to parse a chunk that is otherwise ignored
(e.g. because it has <code>eval=FALSE</code> as a chunk header), you can set:
</p>
<div class="sourceCode"><pre>```{r chunk-label, eval=FALSE, renv.ignore=FALSE}
# code in this chunk will _not_ be ignored
```
</pre></div>


<h3>Development dependencies</h3>

<p>renv has some support for distinguishing between development and run-time
dependencies. For example, your Shiny app might rely on
<a href="https://ggplot2.tidyverse.org">ggplot2</a> (a run-time dependency) but while
you use <a href="https://usethis.r-lib.org">usethis</a> during development, your app
doesn't need it to run (i.e. it's only a development dependency).
</p>
<p>You can record development dependencies by listing them in the <code>Suggests</code>
field of your project's <code>DESCRIPTION</code> file. Development dependencies will be installed by
<code><a href="BiocManager.html#topic+install">install()</a></code> (when called without arguments) but will not be tracked in
the project snapshot. If you need greater control, you can also try project
profiles as discussed in <code>vignette("profiles")</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# find R package dependencies in the current directory
renv::dependencies()


## End(Not run)
</code></pre>

<hr>
<h2 id='diagnostics'>Print a diagnostics report</h2><span id='topic+diagnostics'></span>

<h3>Description</h3>

<p>Print a diagnostics report, summarizing the state of a project using renv.
This report can occasionally be useful when diagnosing issues with renv.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diagnostics(project = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="diagnostics_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function is normally called for its side effects.
</p>

<hr>
<h2 id='embed'>Capture and re-use dependencies within a <code>.R</code> or <code>.Rmd</code></h2><span id='topic+embed'></span><span id='topic+use'></span>

<h3>Description</h3>

<p>Together, <code>embed()</code> and <code>use()</code> provide a lightweight way to specify and
restore package versions within a file. <code>use()</code> is a lightweight lockfile
specification that <code>embed()</code> can automatically generate and insert into a
script or document.
</p>
<p>Calling <code>embed()</code> inspects the dependencies of the specified document then
generates and inserts a call to <code>use()</code> that looks something like this:
</p>
<div class="sourceCode R"><pre>renv::use(
  "digest@0.6.30",
  "rlang@0.3.4"
)
</pre></div>
<p>Then, when you next run your R script or render your <code>.Rmd</code>, <code>use()</code> will:
</p>

<ol>
<li><p> Create a temporary library path.
</p>
</li>
<li><p> Install the requested packages and their recursive dependencies into that
library.
</p>
</li>
<li><p> Activate the library, so it's used for the rest of the script.
</p>
</li></ol>



<h4>Manual usage</h4>

<p>You can also create calls to <code>use()</code> yourself, either specifying the
packages needed by hand, or by supplying the path to a lockfile,
<code>renv::use(lockfile = "/path/to/renv.lock")</code>.
</p>
<p>This can be useful in projects where you'd like to associate different
lockfiles with different documents, as in a blog where you want each
post to capture the dependencies at the time of writing. Once you've
finished writing each, the post, you can use
<code>renv::snapshot(lockfile = "/path/to/renv.lock")</code>
to &quot;save&quot; the state that was active while authoring that bost, and then use
<code>renv::use(lockfile = "/path/to/renv.lock")</code> in that document to ensure the
blog post always uses those dependencies onfuture renders.
</p>
<p><code>renv::use()</code> is inspired in part by the <a href="https://groundhogr.com/">groundhog</a>
package, which also allows one to specify a script's <span class="rlang"><b>R</b></span> package requirements
within that same <span class="rlang"><b>R</b></span> script.
</p>



<h3>Usage</h3>

<pre><code class='language-R'>embed(path = NULL, ..., lockfile = NULL, project = NULL)

use(
  ...,
  lockfile = NULL,
  library = NULL,
  isolate = sandbox,
  sandbox = TRUE,
  attach = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="embed_+3A_path">path</code></td>
<td>
<p>The path to an <span class="rlang"><b>R</b></span> or R Markdown script. The default will use the current
document, if running within RStudio.</p>
</td></tr>
<tr><td><code id="embed_+3A_...">...</code></td>
<td>
<p>The <span class="rlang"><b>R</b></span> packages to be used with this script. Ignored if <code>lockfile</code> is
non-<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="embed_+3A_lockfile">lockfile</code></td>
<td>
<p>The lockfile to use. When supplied, renv will use the packages as
declared in the lockfile.</p>
</td></tr>
<tr><td><code id="embed_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
<tr><td><code id="embed_+3A_library">library</code></td>
<td>
<p>The library path into which the requested packages should be installed.
When <code>NULL</code> (the default), a library path within the <span class="rlang"><b>R</b></span> temporary
directory will be generated and used. Note that this same library path
will be re-used on future calls to <code>renv::use()</code>, allowing <code>renv::use()</code>
to be used multiple times within a single script.</p>
</td></tr>
<tr><td><code id="embed_+3A_isolate">isolate</code></td>
<td>
<p>Boolean; should the active library paths be included in the set of library
paths activated for this script? Set this to <code>TRUE</code> if you only want the
packages provided to <code>renv::use()</code> to be visible on the library paths.</p>
</td></tr>
<tr><td><code id="embed_+3A_sandbox">sandbox</code></td>
<td>
<p>Should the system library be sandboxed? See the sandbox documentation in
<a href="httr.html#topic+config">config</a> for more details. You can also provide an explicit sandbox
path if you want to configure where <code>renv::use()</code> generates its sandbox.
By default, the sandbox is generated within the <span class="rlang"><b>R</b></span> temporary directory.</p>
</td></tr>
<tr><td><code id="embed_+3A_attach">attach</code></td>
<td>
<p>Boolean; should the set of requested packages be automatically attached?
If <code>TRUE</code>, packages will be loaded and attached via a call
to <code><a href="base.html#topic+library">library()</a></code> after install. Ignored if <code>lockfile</code> is non-<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="embed_+3A_verbose">verbose</code></td>
<td>
<p>Boolean; be verbose while installing packages?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function is normally called for its side effects.
</p>

<hr>
<h2 id='equip'>Install required system libraries</h2><span id='topic+equip'></span>

<h3>Description</h3>

<p>Equip your system with libraries commonly-used during compilation of
base and recommended <span class="rlang"><b>R</b></span> packages. This was previously useful with older
versions of R on windows, but is no longer terribly helpful.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>equip()
</code></pre>


<h3>Value</h3>

<p>This function is normally called for its side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# download useful build tools
renv::equip()


## End(Not run)
</code></pre>

<hr>
<h2 id='graph'>Generate a Package Dependency Graph</h2><span id='topic+graph'></span>

<h3>Description</h3>

<p>Generate a package dependency graph.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>graph(
  root = NULL,
  leaf = NULL,
  ...,
  suggests = FALSE,
  enhances = FALSE,
  resolver = NULL,
  renderer = c("DiagrammeR", "visNetwork"),
  attributes = list(),
  project = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="graph_+3A_root">root</code></td>
<td>
<p>The top-most package dependencies of interest in the dependency graph.</p>
</td></tr>
<tr><td><code id="graph_+3A_leaf">leaf</code></td>
<td>
<p>The bottom-most package dependencies of interest in the dependency graph.</p>
</td></tr>
<tr><td><code id="graph_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p>
</td></tr>
<tr><td><code id="graph_+3A_suggests">suggests</code></td>
<td>
<p>Should suggested packages be included within
the dependency graph?</p>
</td></tr>
<tr><td><code id="graph_+3A_enhances">enhances</code></td>
<td>
<p>Should enhanced packages be included within
the dependency graph?</p>
</td></tr>
<tr><td><code id="graph_+3A_resolver">resolver</code></td>
<td>
<p>An <span class="rlang"><b>R</b></span> function accepting a package name, and returning the
contents of its <code>DESCRIPTION</code> file (as an <span class="rlang"><b>R</b></span> <code>data.frame</code> or <code>list</code>).
When <code>NULL</code> (the default), an internal resolver is used.</p>
</td></tr>
<tr><td><code id="graph_+3A_renderer">renderer</code></td>
<td>
<p>Which package should be used to render the resulting graph?</p>
</td></tr>
<tr><td><code id="graph_+3A_attributes">attributes</code></td>
<td>
<p>An <span class="rlang"><b>R</b></span> list of graphViz attributes, mapping node names to
attribute key-value pairs. For example, to ask graphViz to prefer orienting
the graph from left to right, you can use <code>list(graph = c(rankdir = "LR"))</code>.</p>
</td></tr>
<tr><td><code id="graph_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# graph the relationship between devtools and rlang
graph(root = "devtools", leaf = "rlang")

# figure out why a project depends on 'askpass'
graph(leaf = "askpass")

## End(Not run)

</code></pre>

<hr>
<h2 id='history'>View and revert to a historical lockfile</h2><span id='topic+history'></span><span id='topic+revert'></span>

<h3>Description</h3>

<p><code>history()</code> uses your version control system to show prior versions of the
lockfile and <code>revert()</code> allows you to restore one of them.
</p>
<p>These functions are currently only implemented for projects that use git.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>history(project = NULL)

revert(commit = "HEAD", ..., project = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="history_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
<tr><td><code id="history_+3A_commit">commit</code></td>
<td>
<p>The commit associated with a prior version of the lockfile.</p>
</td></tr>
<tr><td><code id="history_+3A_...">...</code></td>
<td>
<p>Optional arguments; currently unused.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>history()</code> returns a <code>data.frame</code> summarizing the commits in which
<code>renv.lock</code> has been changed. <code>revert()</code> is usually called for its
side-effect but also invisibly returns the <code>commit</code> used.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# get history of previous versions of renv.lock in VCS
db &lt;- renv::history()

# choose an older commit
commit &lt;- db$commit[5]

# revert to that version of the lockfile
renv::revert(commit = commit)


## End(Not run)
</code></pre>

<hr>
<h2 id='hydrate'>Copy packages from user libraries to a project library</h2><span id='topic+hydrate'></span>

<h3>Description</h3>

<p><code>hydrate()</code> installs missing packages from a user library into the project
library. <code>hydrate()</code> is called automatically by <code><a href="packrat.html#topic+init">init()</a></code>, and it is rare
that you should need it otherwise, as it can easily get your project into
an inconsistent state.
</p>
<p>It may very occasionally be useful to call <code>hydate(update = "all")</code> if you
want to update project packages to match those installed in your global
library (as opposed to using <code><a href="stats.html#topic+update">update()</a></code> which will get the latest versions
from CRAN). In this case, you should verify that your code continues to work,
then call <code><a href="packrat.html#topic+snapshot">snapshot()</a></code> to record updated package versions in the lockfile.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hydrate(
  packages = NULL,
  ...,
  library = NULL,
  repos = getOption("repos"),
  update = FALSE,
  sources = NULL,
  prompt = interactive(),
  report = TRUE,
  project = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hydrate_+3A_packages">packages</code></td>
<td>
<p>The set of <span class="rlang"><b>R</b></span> packages to install. When <code>NULL</code>, the
packages found by <code><a href="renv.html#topic+dependencies">dependencies()</a></code> are used.</p>
</td></tr>
<tr><td><code id="hydrate_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p>
</td></tr>
<tr><td><code id="hydrate_+3A_library">library</code></td>
<td>
<p>The <span class="rlang"><b>R</b></span> library to be hydrated. When <code>NULL</code>, the active
library as reported by <code>.libPaths()</code> is used.</p>
</td></tr>
<tr><td><code id="hydrate_+3A_repos">repos</code></td>
<td>
<p>The <span class="rlang"><b>R</b></span> repositories to be used. If the project depends on any
<span class="rlang"><b>R</b></span> packages which cannot be found within the user library paths, then
those packages will be installed from these repositories instead.</p>
</td></tr>
<tr><td><code id="hydrate_+3A_update">update</code></td>
<td>
<p>Boolean; should <code>hydrate()</code> attempt to update already-installed
packages if the requested package is already installed in the project
library? Set this to <code>"all"</code> if you'd like <em>all</em> packages to be refreshed
from the source library if possible.</p>
</td></tr>
<tr><td><code id="hydrate_+3A_sources">sources</code></td>
<td>
<p>A vector of library paths where renv should look for packages.
When <code>NULL</code> (the default), <code>hydrate()</code> will look in the system libraries
(the user library, the site library and the default library) then the
renv cache.
</p>
<p>If a package is not found in any of these locations, <code>hydrate()</code>
will try to install it from the active R repositories.</p>
</td></tr>
<tr><td><code id="hydrate_+3A_prompt">prompt</code></td>
<td>
<p>Boolean; prompt the user before taking any action? Ignored
when <code>report = FALSE</code>.</p>
</td></tr>
<tr><td><code id="hydrate_+3A_report">report</code></td>
<td>
<p>Boolean; display a report of what packages will be installed
by <code>renv::hydrate()</code>?</p>
</td></tr>
<tr><td><code id="hydrate_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named <span class="rlang"><b>R</b></span> list, giving the packages that were used for hydration
as well as the set of packages which were not found.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# hydrate the active library
renv::hydrate()


## End(Not run)
</code></pre>

<hr>
<h2 id='imbue'>Imbue an renv Installation</h2><span id='topic+imbue'></span>

<h3>Description</h3>

<p>Imbue an renv installation into a project, thereby making the requested
version of renv available within.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>imbue(project = NULL, version = NULL, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="imbue_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
<tr><td><code id="imbue_+3A_version">version</code></td>
<td>
<p>The version of renv to install. If <code>NULL</code>, the version
of renv currently installed will be used. The requested version of
renv will be retrieved from the renv public GitHub repository,
at <a href="https://github.com/rstudio/renv">https://github.com/rstudio/renv</a>.</p>
</td></tr>
<tr><td><code id="imbue_+3A_quiet">quiet</code></td>
<td>
<p>Boolean; avoid printing output during install of renv?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Normally, this function does not need to be called directly by the user; it
will be invoked as required by <code><a href="packrat.html#topic+init">init()</a></code> and <code><a href="renv.html#topic+activate">activate()</a></code>.
</p>


<h3>Value</h3>

<p>The project directory, invisibly. Note that this function is normally
called for its side effects.
</p>

<hr>
<h2 id='init'>Use renv in a project</h2><span id='topic+init'></span>

<h3>Description</h3>

<p>Call <code>renv::init()</code> to start using renv in the current project. This will:
</p>

<ol>
<li><p> Set up project infrastructure (as described in <code><a href="renv.html#topic+scaffold">scaffold()</a></code>) including
the project library and the <code>.Rprofile</code> that ensures renv will be
used in all future sessions.
</p>
</li>
<li><p> Discover the packages that are currently being used in your project and
install them into the project library (as described in <code><a href="renv.html#topic+hydrate">hydrate()</a></code>).
</p>
</li>
<li><p> Create a lockfile that records the state of the project library so it
can be restored by others (as described in <code><a href="packrat.html#topic+snapshot">snapshot()</a></code>).
</p>
</li>
<li><p> Restarts R (if running inside RStudio).
</p>
</li></ol>

<p>If you call <code>init()</code> on a project that already uses renv, it will attempt
to do the right thing: it will restore the project library if it's missing,
or otherwise ask you what to do.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>init(
  project = NULL,
  ...,
  profile = NULL,
  settings = NULL,
  bare = FALSE,
  force = FALSE,
  repos = NULL,
  bioconductor = NULL,
  load = TRUE,
  restart = interactive()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="init_+3A_project">project</code></td>
<td>
<p>The project directory. When <code>NULL</code> (the default), the current
working directory will be used. The <span class="rlang"><b>R</b></span> working directory will be
changed to match the requested project directory.</p>
</td></tr>
<tr><td><code id="init_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p>
</td></tr>
<tr><td><code id="init_+3A_profile">profile</code></td>
<td>
<p>The profile to be activated. When <code>NULL</code>, the default
profile is activated instead. See <code>vignette("profiles", package = "renv")</code>
for more information.</p>
</td></tr>
<tr><td><code id="init_+3A_settings">settings</code></td>
<td>
<p>A list of <a href="renv.html#topic+settings">settings</a> to be used with the newly-initialized
project.</p>
</td></tr>
<tr><td><code id="init_+3A_bare">bare</code></td>
<td>
<p>Boolean; initialize the project without attempting to discover
and install R package dependencies?</p>
</td></tr>
<tr><td><code id="init_+3A_force">force</code></td>
<td>
<p>Boolean; force initialization? By default, renv will refuse
to initialize the home directory as a project, to defend against accidental
mis-usages of <code>init()</code>.</p>
</td></tr>
<tr><td><code id="init_+3A_repos">repos</code></td>
<td>
<p>The <span class="rlang"><b>R</b></span> repositories to be used in this project.
See <strong>Repositories</strong> for more details.</p>
</td></tr>
<tr><td><code id="init_+3A_bioconductor">bioconductor</code></td>
<td>
<p>The version of Bioconductor to be used with this project.
Setting this may be appropriate if renv is unable to determine that your
project depends on a package normally available from Bioconductor. Set this
to <code>TRUE</code> to use the default version of Bioconductor recommended by the
BiocManager package.</p>
</td></tr>
<tr><td><code id="init_+3A_load">load</code></td>
<td>
<p>Boolean; should the project be loaded after it is initialized?</p>
</td></tr>
<tr><td><code id="init_+3A_restart">restart</code></td>
<td>
<p>Boolean; attempt to restart the <span class="rlang"><b>R</b></span> session after initializing
the project? A session restart will be attempted if the <code>"restart"</code> <span class="rlang"><b>R</b></span>
option is set by the frontend embedding <span class="rlang"><b>R</b></span>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The project directory, invisibly. Note that this function is normally
called for its side effects.
</p>


<h3>Repositories</h3>

<p>If the default <span class="rlang"><b>R</b></span> repositories have not already been set, renv will use
the <a href="https://packagemanager.posit.co/">Posit Public Package Manager</a> CRAN
mirror for package installation. The primary benefit to using this mirror is
that it can provide pre-built binaries for <span class="rlang"><b>R</b></span> packages on a variety of
commonly-used Linux distributions. This behavior can be configured or
disabled if desired &ndash; see the options in <code><a href="httr.html#topic+config">config()</a></code> for more details.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

# disable automatic snapshots
auto.snapshot &lt;- getOption("renv.config.auto.snapshot")
options(renv.config.auto.snapshot = FALSE)

# initialize a new project (with an empty R library)
renv::init(bare = TRUE)

# install digest 0.6.19
renv::install("digest@0.6.19")

# save library state to lockfile
renv::snapshot()

# remove digest from library
renv::remove("digest")

# check library status
renv::status()

# restore lockfile, thereby reinstalling digest 0.6.19
renv::restore()

# restore automatic snapshots
options(renv.config.auto.snapshot = auto.snapshot)


## End(Not run)
</code></pre>

<hr>
<h2 id='install'>Install packages</h2><span id='topic+install'></span>

<h3>Description</h3>

<p>Install one or more <span class="rlang"><b>R</b></span> packages, from a variety of remote sources.
<code>install()</code> uses the same machinery as <code><a href="packrat.html#topic+restore">restore()</a></code> (i.e. it uses cached
packages where possible) but it does not respect the lockfile, instead
installing the latest versions available from CRAN.
</p>
<p>See <code>vignette("package-install")</code> for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>install(
  packages = NULL,
  ...,
  exclude = NULL,
  library = NULL,
  type = NULL,
  rebuild = FALSE,
  repos = NULL,
  prompt = interactive(),
  dependencies = NULL,
  project = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="install_+3A_packages">packages</code></td>
<td>
<p>Either <code>NULL</code> (the default) to install all packages required
by the project, or a character vector of packages to install. renv
supports a subset of the remotes syntax used for package installation,
e.g:
</p>

<ul>
<li> <p><code>pkg</code>: install latest version of <code>pkg</code> from CRAN.
</p>
</li>
<li> <p><code>pkg@version</code>: install specified version of <code>pkg</code> from CRAN.
</p>
</li>
<li> <p><code>username/repo</code>: install package from GitHub
</p>
</li>
<li> <p><code>bioc::pkg</code>: install <code>pkg</code> from Bioconductor.
</p>
</li></ul>

<p>See <a href="https://remotes.r-lib.org/articles/dependencies.html">https://remotes.r-lib.org/articles/dependencies.html</a> and the examples
below for more details.
</p>
<p>renv deviates from the remotes spec in one important way: subdirectories
are separated from the main repository specification with a <code>:</code>, not <code>/</code>.
So to install from the <code>subdir</code> subdirectory of GitHub package
<code>username/repo</code> you'd use <code style="white-space: pre;">&#8288;"username/repo:subdir&#8288;</code>.</p>
</td></tr>
<tr><td><code id="install_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p>
</td></tr>
<tr><td><code id="install_+3A_exclude">exclude</code></td>
<td>
<p>Packages which should not be installed. <code>exclude</code> is useful
when using <code>renv::install()</code> to install all dependencies in a project,
except for a specific set of packages.</p>
</td></tr>
<tr><td><code id="install_+3A_library">library</code></td>
<td>
<p>The <span class="rlang"><b>R</b></span> library to be used. When <code>NULL</code>, the active project
library will be used instead.</p>
</td></tr>
<tr><td><code id="install_+3A_type">type</code></td>
<td>
<p>The type of package to install (&quot;source&quot; or &quot;binary&quot;). Defaults
to the value of <code>getOption("pkgType")</code>.</p>
</td></tr>
<tr><td><code id="install_+3A_rebuild">rebuild</code></td>
<td>
<p>Force packages to be rebuilt, thereby bypassing any installed
versions of the package available in the cache? This can either be a
boolean (indicating that all installed packages should be rebuilt), or a
vector of package names indicating which packages should be rebuilt.</p>
</td></tr>
<tr><td><code id="install_+3A_repos">repos</code></td>
<td>
<p>The repositories to use when restoring packages installed
from CRAN or a CRAN-like repository. By default, the repositories recorded
in the lockfile will be, ensuring that (e.g.) CRAN packages are
re-installed from the same CRAN mirror.
</p>
<p>Use <code>repos = getOptions(repos)</code> to override with the repositories set
in the current session, or see the <code>repos.override</code> option in <a href="httr.html#topic+config">config</a> for
an alternate way override.</p>
</td></tr>
<tr><td><code id="install_+3A_prompt">prompt</code></td>
<td>
<p>Boolean; prompt the user before taking any action? For backwards
compatibility, <code>confirm</code> is accepted as an alias for <code>prompt</code>.</p>
</td></tr>
<tr><td><code id="install_+3A_dependencies">dependencies</code></td>
<td>
<p>A vector of DESCRIPTION field names that should be used
for package dependency resolution. When <code>NULL</code> (the default), the value
of <code>renv::settings$package.dependency.fields</code> is used. The aliases
&quot;strong&quot;, &quot;most&quot;, and &quot;all&quot; are also supported.
See <code><a href="tools.html#topic+package_dependencies">tools::package_dependencies()</a></code> for more details.</p>
</td></tr>
<tr><td><code id="install_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list of package records which were installed by renv.
</p>


<h3><code>Remotes</code></h3>

<p><code>install()</code> (called without arguments) will respect the <code>Remotes</code> field
of the <code>DESCRIPTION</code> file (if present). This allows you to specify places
to install a package other than the latest version from CRAN.
See <a href="https://remotes.r-lib.org/articles/dependencies.html">https://remotes.r-lib.org/articles/dependencies.html</a> for details.
</p>


<h3>Bioconductor</h3>

<p>Packages from Bioconductor can be installed by using the <code style="white-space: pre;">&#8288;bioc::&#8288;</code> prefix.
For example,
</p>
<div class="sourceCode"><pre>renv::install("bioc::Biobase")
</pre></div>
<p>will install the latest-available version of Biobase from Bioconductor.
</p>
<p>renv depends on BiocManager (or, for older versions of <span class="rlang"><b>R</b></span>, BiocInstaller)
for the installation of packages from Bioconductor. If these packages are
not available, renv will attempt to automatically install them before
fulfilling the installation request.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# install the latest version of 'digest'
renv::install("digest")

# install an old version of 'digest' (using archives)
renv::install("digest@0.6.18")

# install 'digest' from GitHub (latest dev. version)
renv::install("eddelbuettel/digest")

# install a package from GitHub, using specific commit
renv::install("eddelbuettel/digest@df55b00bff33e945246eff2586717452e635032f")

# install a package from Bioconductor
# (note: requires the BiocManager package)
renv::install("bioc::Biobase")

# install a package, specifying path explicitly
renv::install("~/path/to/package")

# install packages as declared in the project DESCRIPTION file
renv::install()


## End(Not run)
</code></pre>

<hr>
<h2 id='isolate'>Isolate a project</h2><span id='topic+isolate'></span>

<h3>Description</h3>

<p>Copy packages from the renv cache directly into the project library, so
that the project can continue to function independently of the renv cache.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>isolate(project = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="isolate_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>After calling <code>isolate()</code>, renv will still be able to use the cache on
future <code><a href="BiocManager.html#topic+install">install()</a></code>s and <code><a href="packrat.html#topic+restore">restore()</a></code>s. If you'd prefer that renv copy
packages from the cache, rather than use symlinks, you can set the renv
configuration option:
</p>
<div class="sourceCode"><pre>options(renv.config.cache.symlinks = FALSE)
</pre></div>
<p>to force renv to copy packages from the cache, as opposed to symlinking
them. If you'd like to disable the cache altogether for a project, you can
use:
</p>
<div class="sourceCode"><pre>settings$use.cache(FALSE)
</pre></div>
<p>to explicitly disable the cache for the project.
</p>


<h3>Value</h3>

<p>The project directory, invisibly. Note that this function is normally
called for its side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# isolate a project
renv::isolate()


## End(Not run)
</code></pre>

<hr>
<h2 id='load'>Load a project</h2><span id='topic+load'></span>

<h3>Description</h3>

<p><code>renv::load()</code> sets the library paths to use a project-local library,
sets up the system library <a href="renv.html#topic+sandbox">sandbox</a>, if needed, and creates shims
for <code>install.packages()</code>, <code>update.packages()</code>, and <code>remove.packages()</code>.
</p>
<p>You should not generally need to call <code>renv::load()</code> yourself, as it's
called automatically by the project auto-loader created by <code><a href="packrat.html#topic+init">init()</a></code>/
<code><a href="renv.html#topic+activate">activate()</a></code>. However, if needed, you can use <code>renv::load("&lt;project&gt;")</code>
to explicitly load an renv project located at a particular path.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load(project = NULL, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
<tr><td><code id="load_+3A_quiet">quiet</code></td>
<td>
<p>Boolean; be quiet during load?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The project directory, invisibly. Note that this function is normally
called for its side effects.
</p>


<h3>Shims</h3>

<p>To help you take advantage of the package cache, renv places a couple of
shims on the search path:
</p>

<ul>
<li> <p><code>install.packages()</code> instead calls <code>renv::install()</code>.
</p>
</li>
<li> <p><code>remove.packages()</code> instead calls <code>renv::remove()</code>.
</p>
</li>
<li> <p><code>update.packages()</code> instead calls <code>renv::update()</code>.
</p>
</li></ul>

<p>This allows you to keep using your existing muscle memory for installing,
updating, and remove packages, while taking advantage of renv features
like the package cache.
</p>
<p>If you'd like to bypass these shims within an <span class="rlang"><b>R</b></span> session, you can explicitly
call the version of these functions from the utils package, e.g. with
<code style="white-space: pre;">&#8288;utils::install.packages(&lt;...&gt;)&#8288;</code>.
</p>
<p>If you'd prefer not to use the renv shims at all, they can be disabled by
setting the R option <code>options(renv.config.shims.enabled = FALSE)</code> or by
setting the environment variable <code>RENV_CONFIG_SHIMS_ENABLED = FALSE</code>. See
<code>?config</code> for more details.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# load a project -- note that this is normally done automatically
# by the project's auto-loader, but calling this explicitly to
# load a particular project may be useful in some circumstances
renv::load()


## End(Not run)
</code></pre>

<hr>
<h2 id='lockfile-api'>Programmatically Create and Modify a Lockfile</h2><span id='topic+lockfile-api'></span><span id='topic+lockfile'></span>

<h3>Description</h3>

<p>This function provides an API for creating and modifying <code>renv</code> lockfiles.
This can be useful when you'd like to programmatically generate or modify
a lockfile &ndash; for example, because you want to update or change a package
record in an existing lockfile.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lockfile(file = NULL, project = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lockfile-api_+3A_file">file</code></td>
<td>
<p>The path to an existing lockfile. When no lockfile is provided,
a new one will be created based on the current project context. If you
want to create a blank lockfile, use <code>file = NA</code> instead.</p>
</td></tr>
<tr><td><code id="lockfile-api_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="renv.html#topic+lockfiles">lockfiles</a></code>, for a description of the structure of an
<code>renv</code> lockfile.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

lock &lt;- lockfile("renv.lock")

# set the repositories for a lockfile
lock$repos(CRAN = "https://cran.r-project.org")

# depend on digest 0.6.22
lock$add(digest = "digest@0.6.22")

# write to file
lock$write("renv.lock")


## End(Not run)

</code></pre>

<hr>
<h2 id='lockfiles'>Lockfiles</h2><span id='topic+lockfiles'></span><span id='topic+lockfile_create'></span><span id='topic+lockfile_read'></span><span id='topic+lockfile_write'></span><span id='topic+lockfile_modify'></span>

<h3>Description</h3>

<p>A <strong>lockfile</strong> records the state of a project at some point in time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lockfile_create(
  type = settings$snapshot.type(project = project),
  libpaths = .libPaths(),
  packages = NULL,
  exclude = NULL,
  prompt = interactive(),
  force = FALSE,
  ...,
  project = NULL
)

lockfile_read(file = NULL, ..., project = NULL)

lockfile_write(lockfile, file = NULL, ..., project = NULL)

lockfile_modify(
  lockfile = NULL,
  ...,
  remotes = NULL,
  repos = NULL,
  project = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lockfiles_+3A_type">type</code></td>
<td>
<p>The type of snapshot to perform:
</p>

<ul>
<li> <p><code>"implict"</code>, (the default), uses all packages captured by <code><a href="renv.html#topic+dependencies">dependencies()</a></code>.
</p>
</li>
<li> <p><code>"explicit"</code> uses packages recorded in <code>DESCRIPTION</code>.
</p>
</li>
<li> <p><code>"all"</code> uses all packages in the project library.
</p>
</li>
<li> <p><code>"custom"</code> uses a custom filter.
</p>
</li></ul>

<p>See <strong>Snapshot type</strong> below for more details.</p>
</td></tr>
<tr><td><code id="lockfiles_+3A_libpaths">libpaths</code></td>
<td>
<p>The library paths to be used when generating the lockfile.</p>
</td></tr>
<tr><td><code id="lockfiles_+3A_packages">packages</code></td>
<td>
<p>A vector of packages to be included in the lockfile. When
<code>NULL</code> (the default), all packages relevant for the type of snapshot being
performed will be included. When set, the <code>type</code> argument is ignored.
Recursive dependencies of the specified packages will be added to the
lockfile as well.</p>
</td></tr>
<tr><td><code id="lockfiles_+3A_exclude">exclude</code></td>
<td>
<p>A vector of packages to be explicitly excluded from the lockfile.
Note that transitive package dependencies will always be included, to avoid
potentially creating an incomplete / non-functional lockfile.</p>
</td></tr>
<tr><td><code id="lockfiles_+3A_prompt">prompt</code></td>
<td>
<p>Boolean; prompt the user before taking any action? For backwards
compatibility, <code>confirm</code> is accepted as an alias for <code>prompt</code>.</p>
</td></tr>
<tr><td><code id="lockfiles_+3A_force">force</code></td>
<td>
<p>Boolean; force generation of a lockfile even when pre-flight
validation checks have failed?</p>
</td></tr>
<tr><td><code id="lockfiles_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p>
</td></tr>
<tr><td><code id="lockfiles_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
<tr><td><code id="lockfiles_+3A_file">file</code></td>
<td>
<p>A file path, or <span class="rlang"><b>R</b></span> connection.</p>
</td></tr>
<tr><td><code id="lockfiles_+3A_lockfile">lockfile</code></td>
<td>
<p>An <code>renv</code> lockfile; typically created by either
<code>lockfile_create()</code> or <code>lockfile_read()</code>.</p>
</td></tr>
<tr><td><code id="lockfiles_+3A_remotes">remotes</code></td>
<td>
<p>An <span class="rlang"><b>R</b></span> vector of remote specifications.</p>
</td></tr>
<tr><td><code id="lockfiles_+3A_repos">repos</code></td>
<td>
<p>A named vector, mapping <span class="rlang"><b>R</b></span> repository names to their URLs.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A lockfile captures the state of a project's library at some point in time.
In particular, the package names, their versions, and their sources (when
known) are recorded in the lockfile.
</p>
<p>Projects can be restored from a lockfile using the <code><a href="packrat.html#topic+restore">restore()</a></code> function. This
implies reinstalling packages into the project's private library, as encoded
within the lockfile.
</p>
<p>While lockfiles are normally generated and used with <code><a href="packrat.html#topic+snapshot">snapshot()</a></code> /
<code><a href="packrat.html#topic+restore">restore()</a></code>, they can also be edited by hand if so desired. Lockfiles are
written as <code>.json</code>, to allow for easy consumption by other tools.
</p>
<p>An example lockfile follows:
</p>
<div class="sourceCode"><pre>{
  "R": {
    "Version": "3.6.1",
    "Repositories": [
      {
        "Name": "CRAN",
        "URL": "https://cloud.r-project.org"
      }
    ]
  },
  "Packages": {
    "markdown": {
      "Package": "markdown",
      "Version": "1.0",
      "Source": "Repository",
      "Repository": "CRAN",
      "Hash": "4584a57f565dd7987d59dda3a02cfb41"
    },
    "mime": {
      "Package": "mime",
      "Version": "0.7",
      "Source": "Repository",
      "Repository": "CRAN",
      "Hash": "908d95ccbfd1dd274073ef07a7c93934"
    }
  }
}
</pre></div>
<p>The sections used within a lockfile are described next.
</p>


<h4>renv</h4>

<p>Information about the version of renv used to manage this project.
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>Version</strong>     </td><td style="text-align: left;"> The version of the renv package used with this project. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>R</h4>

<p>Properties related to the version of <span class="rlang"><b>R</b></span> associated with this project.
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>Version</strong>      </td><td style="text-align: left;"> The version of <span class="rlang"><b>R</b></span> used. </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>Repositories</strong> </td><td style="text-align: left;"> The <span class="rlang"><b>R</b></span> repositories used in this project. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>Packages</h4>

<p><span class="rlang"><b>R</b></span> package records, capturing the packages used or required by a project
at the time when the lockfile was generated.
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>Package</strong>      </td><td style="text-align: left;"> The package name. </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>Version</strong>      </td><td style="text-align: left;"> The package version. </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>Source</strong>       </td><td style="text-align: left;"> The location from which this package was retrieved. </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>Repository</strong>   </td><td style="text-align: left;"> The name of the repository (if any) from which this package was retrieved. </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>Hash</strong>         </td><td style="text-align: left;"> (Optional) A unique hash for this package, used for package caching. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Additional remote fields, further describing how the package can be
retrieved from its corresponding source, will also be included as
appropriate (e.g. for packages installed from GitHub).
</p>



<h4>Python</h4>

<p>Metadata related to the version of Python used with this project (if any).
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>Version</strong> </td><td style="text-align: left;"> The version of Python being used. </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>Type</strong>    </td><td style="text-align: left;"> The type of Python environment being used ("virtualenv", "conda", "system") </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>Name</strong>    </td><td style="text-align: left;"> The (optional) name of the environment being used.
</td>
</tr>

</table>

<p>Note that the <code>Name</code> field may be empty. In that case, a project-local Python
environment will be used instead (when not directly using a system copy of Python).
</p>



<h3>Caveats</h3>

<p>These functions are primarily intended for expert users &ndash; in most cases,
<code><a href="packrat.html#topic+snapshot">snapshot()</a></code> and <code><a href="packrat.html#topic+restore">restore()</a></code> are the primariy tools you will need when
creating and using lockfiles.
</p>


<h3>See Also</h3>

<p>Other reproducibility: 
<code><a href="packrat.html#topic+restore">restore</a>()</code>,
<code><a href="packrat.html#topic+snapshot">snapshot</a>()</code>
</p>

<hr>
<h2 id='migrate'>Migrate a project from packrat to renv</h2><span id='topic+migrate'></span>

<h3>Description</h3>

<p>Migrate a project's infrastructure from packrat to renv.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>migrate(
  project = NULL,
  packrat = c("lockfile", "sources", "library", "options", "cache")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="migrate_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
<tr><td><code id="migrate_+3A_packrat">packrat</code></td>
<td>
<p>Components of the Packrat project to migrate. See the default
argument list for components of the Packrat project that can be migrated.
Select a subset of those components for migration as appropriate.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The project directory, invisibly. Note that this function is normally
called for its side effects.
</p>


<h3>Migration</h3>

<p>When migrating Packrat projects to renv, the set of components migrated
can be customized using the <code>packrat</code> argument. The set of components that
can be migrated are as follows:
</p>

<table>
<tr>
 <td style="text-align: left;">

<strong>Name</strong> </td><td style="text-align: left;"> <strong>Description</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>lockfile</code> </td><td style="text-align: left;">
Migrate the Packrat lockfile (<code>packrat/packrat.lock</code>) to the renv lockfile
(<code>renv.lock</code>). </td>
</tr>
<tr>
 <td style="text-align: left;">

<code>sources</code> </td><td style="text-align: left;">
Migrate package sources from the <code>packrat/src</code> folder to the renv
sources folder. Currently, only CRAN packages are migrated to renv --
packages retrieved from other sources (e.g. GitHub) are ignored.
</td>
</tr>
<tr>
 <td style="text-align: left;">

<code>library</code> </td><td style="text-align: left;">
Migrate installed packages from the Packrat library to the renv project
library.
</td>
</tr>
<tr>
 <td style="text-align: left;">

<code>options</code> </td><td style="text-align: left;">
Migrate compatible Packrat options to the renv project.
</td>
</tr>
<tr>
 <td style="text-align: left;">

<code>cache</code> </td><td style="text-align: left;">
Migrate packages from the Packrat cache to the renv cache.
</td>
</tr>
<tr>
 <td style="text-align: left;">

</td>
</tr>

</table>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# migrate Packrat project infrastructure to renv
renv::migrate()


## End(Not run)
</code></pre>

<hr>
<h2 id='modify'>Modify a Lockfile</h2><span id='topic+modify'></span>

<h3>Description</h3>

<p>Modify a project's lockfile, either interactively or non-interactively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modify(project = NULL, changes = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modify_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
<tr><td><code id="modify_+3A_changes">changes</code></td>
<td>
<p>A list of changes to be merged into the lockfile.
When <code>NULL</code> (the default), the lockfile is instead opened for
interactive editing.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>After edit, if the lockfile edited is associated with the active project, any
state-related changes (e.g. to <span class="rlang"><b>R</b></span> repositories) will be updated in the
current session.
</p>


<h3>Value</h3>

<p>The project directory, invisibly. Note that this function is normally
called for its side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# modify an existing lockfile
if (interactive())
  renv::modify()


## End(Not run)
</code></pre>

<hr>
<h2 id='paths'>Path for storing global state</h2><span id='topic+paths'></span>

<h3>Description</h3>

<p>By default, renv stores global state in the following OS-specific folders:
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>Platform</strong> </td><td style="text-align: left;"> <strong>Location</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
Linux        </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;~/.cache/R/renv&#8288;</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
macOS        </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;~/Library/Caches/org.R-project.R/R/renv&#8288;</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
Windows      </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;%LOCALAPPDATA%/R/cache/R/renv&#8288;</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>If desired, this path can be customized by setting the <code>RENV_PATHS_ROOT</code>
environment variable. This can be useful if you'd like, for example, multiple
users to be able to share a single global cache.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>paths
</code></pre>


<h3>Customising individual paths</h3>

<p>The various state sub-directories can also be individually adjusted, if so
desired (e.g. you'd prefer to keep the cache of package installations on a
separate volume). The various environment variables that can be set are
enumerated below:
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>Environment Variable</strong>     </td><td style="text-align: left;"> <strong>Description</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>RENV_PATHS_ROOT</code>            </td><td style="text-align: left;"> The root path used for global state storage. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>RENV_PATHS_LIBRARY</code>         </td><td style="text-align: left;"> The path to the project library. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>RENV_PATHS_LIBRARY_ROOT</code>    </td><td style="text-align: left;"> The parent path for project libraries. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>RENV_PATHS_LIBRARY_STAGING</code> </td><td style="text-align: left;"> The parent path used for staged package installs. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>RENV_PATHS_SANDBOX</code>         </td><td style="text-align: left;"> The path to the sandboxed <span class="rlang"><b>R</b></span> system library. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>RENV_PATHS_LOCKFILE</code>        </td><td style="text-align: left;"> The path to the <a href="renv.html#topic+lockfile">lockfile</a>. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>RENV_PATHS_CELLAR</code>          </td><td style="text-align: left;"> The path to the cellar, containing local package binaries and sources. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>RENV_PATHS_SOURCE</code>          </td><td style="text-align: left;"> The path containing downloaded package sources. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>RENV_PATHS_BINARY</code>          </td><td style="text-align: left;"> The path containing downloaded package binaries. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>RENV_PATHS_CACHE</code>           </td><td style="text-align: left;"> The path containing cached package installations. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>RENV_PATHS_PREFIX</code>          </td><td style="text-align: left;"> An optional prefix to prepend to the constructed library / cache paths. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>RENV_PATHS_RENV</code>            </td><td style="text-align: left;"> The path to the project's renv folder. For advanced users only. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>RENV_PATHS_RTOOLS</code>          </td><td style="text-align: left;"> (Windows only) The path to <a href="https://cran.r-project.org/bin/windows/Rtools/">Rtools</a>. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>RENV_PATHS_EXTSOFT</code>         </td><td style="text-align: left;"> (Windows only) The path containing external software needed for compilation of Windows source packages. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>RENV_PATHS_MRAN</code>            </td><td style="text-align: left;"> The path containing MRAN-related metadata. See <code>vignette("mran", package = "renv")</code> for more details. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>(If you want these settings to persist in your project, it is recommended that
you add these to an appropriate <span class="rlang"><b>R</b></span> startup file. For example, these could be
set in: a project-local <code>.Renviron</code>, the user-level <code>.Renviron</code>, or a
site-wide file at <code>file.path(R.home("etc"), "Renviron.site")</code>. See
<a href="base.html#topic+Startup">Startup</a> for more details).
</p>
<p>Note that renv will append platform-specific and version-specific entries
to the set paths as appropriate. For example, if you have set:
</p>
<div class="sourceCode"><pre>Sys.setenv(RENV_PATHS_CACHE = "/mnt/shared/renv/cache")
</pre></div>
<p>then the directory used for the cache will still depend on the renv cache
version (e.g. <code>v2</code>), the <span class="rlang"><b>R</b></span> version (e.g. <code>3.5</code>) and the platform (e.g.
<code>x86_64-pc-linux-gnu</code>). For example:
</p>
<div class="sourceCode"><pre>/mnt/shared/renv/cache/v2/R-3.5/x86_64-pc-linux-gnu
</pre></div>
<p>This ensures that you can set a single <code>RENV_PATHS_CACHE</code> environment variable
globally without worry that it may cause collisions or errors if multiple
versions of <span class="rlang"><b>R</b></span> needed to interact with the same cache.
</p>
<p>If reproducibility of a project is desired on a particular machine, it is
highly recommended that the renv cache of installed packages + binary
packages is backed up and persisted, so that packages can be easily restored
in the future &ndash; installation of packages from source can often be arduous.
</p>


<h3>Sharing state across operating systems</h3>

<p>If you need to share the same cache with multiple different Linux operating
systems, you may want to set the <code>RENV_PATHS_PREFIX</code> environment variable
to help disambiguate the paths used on Linux. For example, setting
<code>RENV_PATHS_PREFIX = "ubuntu-bionic"</code> would instruct renv to construct a
cache path like:
</p>
<div class="sourceCode"><pre>/mnt/shared/renv/cache/v2/ubuntu-bionic/R-3.5/x86_64-pc-linux-gnu
</pre></div>
<p>If this is required, it's strongly recommended that this environment
variable is set in your <span class="rlang"><b>R</b></span> installation's <code>Renviron.site</code> file, typically
located at <code>file.path(R.home("etc"), "Renviron.site")</code>, so that it can be
active for any <span class="rlang"><b>R</b></span> sessions launched on that machine.
</p>
<p>Starting from <code style="white-space: pre;">&#8288;renv 0.13.0&#8288;</code>, you can also instruct renv to auto-generate
an OS-specific component to include as part of library and cache paths,
by setting the environment variable:
</p>
<div class="sourceCode"><pre>RENV_PATHS_PREFIX_AUTO = TRUE
</pre></div>
<p>The prefix will be constructed based on fields within the system's
<code style="white-space: pre;">&#8288;/etc/os-release&#8288;</code> file.
</p>


<h3>Package cellar</h3>

<p>If your project depends on one or <span class="rlang"><b>R</b></span> packages that are not available in any
remote location, you can still provide a locally-available tarball for renv
to use during restore. By default, these packages should be made available in
the folder as specified by the <code>RENV_PATHS_CELLAR</code> environment variable. The
package sources should be placed in a file at one of these locations:
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;${RENV_PATHS_CELLAR}/&lt;package&gt;_&lt;version&gt;.&lt;ext&gt;&#8288;</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;${RENV_PATHS_CELLAR}/&lt;package&gt;/&lt;package&gt;_&lt;version&gt;.&lt;ext&gt;&#8288;</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;&lt;project&gt;/renv/cellar/&lt;package&gt;_&lt;version&gt;.&lt;ext&gt;&#8288;</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;&lt;project&gt;/renv/cellar/&lt;package&gt;/&lt;package&gt;_&lt;version&gt;.&lt;ext&gt;&#8288;</code>
</p>
</li></ul>

<p>where <code style="white-space: pre;">&#8288;.&lt;ext&gt;&#8288;</code> is <code>.tar.gz</code> for source packages, or <code>.tgz</code> for binaries on
macOS and <code>.zip</code> for binaries on Windows. During <code>restore()</code>, renv will
search the cellar for a compatible package, and prefer installation with
that copy of the package if appropriate.
</p>


<h3>Older versions</h3>

<p>Older version of renv used a different default cache location.
Those cache locations are:
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>Platform</strong> </td><td style="text-align: left;"> <strong>Location</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
Linux        </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;~/.local/share/renv&#8288;</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
macOS        </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;~/Library/Application Support/renv&#8288;</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
Windows      </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;%LOCALAPPDATA%/renv&#8288;</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>If an renv root directory has already been created in one of the old
locations, that will still be used. This change was made to comply with the
CRAN policy requirements of <span class="rlang"><b>R</b></span> packages.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># get the path to the project library
path &lt;- renv::paths$library()
</code></pre>

<hr>
<h2 id='project'>Retrieve the active project</h2><span id='topic+project'></span>

<h3>Description</h3>

<p>Retrieve the path to the active project (if any).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>project(default = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="project_+3A_default">default</code></td>
<td>
<p>The value to return when no project is
currently active. Defaults to <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The active project directory, as a length-one character vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# get the currently-active renv project
renv::project()


## End(Not run)
</code></pre>

<hr>
<h2 id='purge'>Purge packages from the cache</h2><span id='topic+purge'></span>

<h3>Description</h3>

<p>Purge packages from the cache. This can be useful if a package which had
previously been installed in the cache has become corrupted or unusable,
and needs to be reinstalled.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>purge(package, ..., version = NULL, hash = NULL, prompt = interactive())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="purge_+3A_package">package</code></td>
<td>
<p>A single package to be removed from the cache.</p>
</td></tr>
<tr><td><code id="purge_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p>
</td></tr>
<tr><td><code id="purge_+3A_version">version</code></td>
<td>
<p>The package version to be removed. When <code>NULL</code>, all versions
of the requested package will be removed.</p>
</td></tr>
<tr><td><code id="purge_+3A_hash">hash</code></td>
<td>
<p>The specific hashes to be removed. When <code>NULL</code>, all hashes
associated with a particular package's version will be removed.</p>
</td></tr>
<tr><td><code id="purge_+3A_prompt">prompt</code></td>
<td>
<p>Boolean; prompt the user before taking any action? For backwards
compatibility, <code>confirm</code> is accepted as an alias for <code>prompt</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>purge()</code> is an inherently destructive option. It removes packages from the
cache, and so any project which had symlinked that package into its own
project library would find that package now unavailable. These projects would
hence need to reinstall any purged packages. Take heed of this in case you're
looking to purge the cache of a package which is difficult to install, or
if the original sources for that package are no longer available!
</p>


<h3>Value</h3>

<p>The set of packages removed from the renv global cache,
as a character vector of file paths.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# remove all versions of 'digest' from the cache
renv::purge("digest")

# remove only a particular version of 'digest' from the cache
renv::purge("digest", version = "0.6.19")


## End(Not run)
</code></pre>

<hr>
<h2 id='rebuild'>Rebuild the packages in your project library</h2><span id='topic+rebuild'></span>

<h3>Description</h3>

<p>Rebuild and reinstall packages in your library. This can be useful as a
diagnostic tool &ndash; for example, if you find that one or more of your
packages fail to load, and you want to ensure that you are starting from a
clean slate.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rebuild(
  packages = NULL,
  recursive = TRUE,
  ...,
  type = NULL,
  prompt = interactive(),
  library = NULL,
  project = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rebuild_+3A_packages">packages</code></td>
<td>
<p>The package(s) to be rebuilt. When <code>NULL</code>, all packages
in the library will be reinstalled.</p>
</td></tr>
<tr><td><code id="rebuild_+3A_recursive">recursive</code></td>
<td>
<p>Boolean; should dependencies of packages be rebuilt
recursively? Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="rebuild_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p>
</td></tr>
<tr><td><code id="rebuild_+3A_type">type</code></td>
<td>
<p>The type of package to install (&quot;source&quot; or &quot;binary&quot;). Defaults
to the value of <code>getOption("pkgType")</code>.</p>
</td></tr>
<tr><td><code id="rebuild_+3A_prompt">prompt</code></td>
<td>
<p>Boolean; prompt the user before taking any action? For backwards
compatibility, <code>confirm</code> is accepted as an alias for <code>prompt</code>.</p>
</td></tr>
<tr><td><code id="rebuild_+3A_library">library</code></td>
<td>
<p>The <span class="rlang"><b>R</b></span> library to be used. When <code>NULL</code>, the active project
library will be used instead.</p>
</td></tr>
<tr><td><code id="rebuild_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list of package records which were installed by renv.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# rebuild the 'dplyr' package + all of its dependencies
renv::rebuild("dplyr", recursive = TRUE)

# rebuild only 'dplyr'
renv::rebuild("dplyr", recursive = FALSE)


## End(Not run)
</code></pre>

<hr>
<h2 id='record'>Update package records in a lockfile</h2><span id='topic+record'></span>

<h3>Description</h3>

<p>Use <code>record()</code> to record a new entry within an existing renv lockfile.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>record(records, lockfile = NULL, project = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="record_+3A_records">records</code></td>
<td>
<p>A list of named records, mapping package names to a definition
of their source. See <strong>Records</strong> for more details.</p>
</td></tr>
<tr><td><code id="record_+3A_lockfile">lockfile</code></td>
<td>
<p>Path to a lockfile. When <code>NULL</code> (the default), the
<code>renv.lock</code> located in the root of the current project will be used.</p>
</td></tr>
<tr><td><code id="record_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function can be useful when you need to change one or more of the
package records within an renv lockfile &ndash; for example, because a recorded
package cannot be restored in a particular environment, and you know of a
suitable alternative.
</p>


<h3>Records</h3>

<p>Records can be provided either using the <strong>remotes</strong> short-hand syntax,
or by using an <span class="rlang"><b>R</b></span> list of entries to record within the lockfile. See
<code>?lockfiles</code> for more information on the structure of a package record.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

# use digest 0.6.22 from package repositories -- different ways
# of specifying the remote. use whichever is most natural
renv::record("digest@0.6.22")
renv::record(list(digest = "0.6.22"))
renv::record(list(digest = "digest@0.6.22"))

# alternatively, provide a full record as a list
digest_record &lt;- list(
  Package = "digest",
  Version = "0.6.22",
  Source  = "Repository",
  Repository = "CRAN"
)

renv::record(list(digest = digest_record))


## End(Not run)
</code></pre>

<hr>
<h2 id='refresh'>Refresh the local cache of available packages</h2><span id='topic+refresh'></span>

<h3>Description</h3>

<p>Query the active R package repositories for available packages, and
update the in-memory cache of those packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>refresh()
</code></pre>


<h3>Details</h3>

<p>Note that <span class="rlang"><b>R</b></span> also maintains its own on-disk cache of available packages,
which is used by <code>available.packages()</code>. Calling <code>refresh()</code> will force
an update of both types of caches. renv prefers using an in-memory
cache as on occasion the temporary directory can be slow to access (e.g.
when it is a mounted network filesystem).
</p>


<h3>Value</h3>

<p>A list of package databases, invisibly &ndash; one for each repository
currently active in the <span class="rlang"><b>R</b></span> session. Note that this function is normally
called for its side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# check available packages
db &lt;- available.packages()

# wait some time (suppose packages are uploaded / changed in this time)
Sys.sleep(5)

# refresh the local available packages database
# (the old locally cached db will be removed)
db &lt;- renv::refresh()


## End(Not run)
</code></pre>

<hr>
<h2 id='rehash'>Re-hash packages in the renv cache</h2><span id='topic+rehash'></span>

<h3>Description</h3>

<p>Re-hash packages in the renv cache, ensuring that any previously-cached
packages are copied to a new cache location appropriate for this version of
renv. This can be useful if the cache scheme has changed in a new version
of renv, but you'd like to preserve your previously-cached packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rehash(prompt = interactive(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rehash_+3A_prompt">prompt</code></td>
<td>
<p>Boolean; prompt the user before taking any action? For backwards
compatibility, <code>confirm</code> is accepted as an alias for <code>prompt</code>.</p>
</td></tr>
<tr><td><code id="rehash_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Any packages which are re-hashed will retain links to the location of the
newly-hashed package, ensuring that prior installations of renv can still
function as expected.
</p>

<hr>
<h2 id='remote'>Resolve a Remote</h2><span id='topic+remote'></span>

<h3>Description</h3>

<p>Given a remote specification, resolve it into an renv package record that
can be used for download and installation (e.g. with <a href="BiocManager.html#topic+install">install</a>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remote(spec)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remote_+3A_spec">spec</code></td>
<td>
<p>A remote specification. This should be a string, conforming
to the Remotes specification as defined in
<a href="https://remotes.r-lib.org/articles/dependencies.html">https://remotes.r-lib.org/articles/dependencies.html</a>.</p>
</td></tr>
</table>

<hr>
<h2 id='remove'>Remove packages</h2><span id='topic+remove'></span>

<h3>Description</h3>

<p>Remove (uninstall) <span class="rlang"><b>R</b></span> packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove(packages, ..., library = NULL, project = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remove_+3A_packages">packages</code></td>
<td>
<p>A character vector of <span class="rlang"><b>R</b></span> packages to remove.</p>
</td></tr>
<tr><td><code id="remove_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p>
</td></tr>
<tr><td><code id="remove_+3A_library">library</code></td>
<td>
<p>The library from which packages should be removed. When
<code>NULL</code>, the active library (that is, the first entry reported in
<code>.libPaths()</code>) is used instead.</p>
</td></tr>
<tr><td><code id="remove_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of package records, describing the packages (if any) which
were successfully removed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

# disable automatic snapshots
auto.snapshot &lt;- getOption("renv.config.auto.snapshot")
options(renv.config.auto.snapshot = FALSE)

# initialize a new project (with an empty R library)
renv::init(bare = TRUE)

# install digest 0.6.19
renv::install("digest@0.6.19")

# save library state to lockfile
renv::snapshot()

# remove digest from library
renv::remove("digest")

# check library status
renv::status()

# restore lockfile, thereby reinstalling digest 0.6.19
renv::restore()

# restore automatic snapshots
options(renv.config.auto.snapshot = auto.snapshot)


## End(Not run)
</code></pre>

<hr>
<h2 id='renv_lockfile_from_manifest'>Generate <code>renv.lock</code> from an RStudio Connect <code>manifest.json</code></h2><span id='topic+renv_lockfile_from_manifest'></span>

<h3>Description</h3>

<p>Use <code>renv_lockfile_from_manifest()</code> to convert a <code>manifest.json</code> file from
an RStudio Connect content bundle into an <code>renv.lock</code> lockfile.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>renv_lockfile_from_manifest(manifest, lockfile = NA, project = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="renv_lockfile_from_manifest_+3A_manifest">manifest</code></td>
<td>
<p>The path to a <code>manifest.json</code> file.</p>
</td></tr>
<tr><td><code id="renv_lockfile_from_manifest_+3A_lockfile">lockfile</code></td>
<td>
<p>The path to the lockfile to be generated and / or updated.
When <code>NA</code> (the default), the generated lockfile is returned as an <span class="rlang"><b>R</b></span>
object; otherwise, the lockfile will be written to the path specified by
<code>lockfile</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function can be useful when you need to recreate the package environment
of a piece of content that is deployed to RStudio Connect. The content bundle
contains a <code>manifest.json</code> file that is used to recreate the package
environment. This function will let you convert that manifest file to an
<code>renv.lock</code> file. Run <code>renv::restore()</code> after you've converted the file to
restore the package environment.
</p>
<p>By default the <code>lockfile</code> argument is set to <code>NA</code>. This will not create a new
<code>renv.lock</code> file. Rather, it will return a lockfile object (see <code>?lockfile</code>)
that can be used to create a new <code>renv.lock</code> file. If <code>lockfile</code> is set to a
character string, a new file will be created with that path &ndash; e.g.
<code>renv.lock</code> &ndash; and the lockfile object will be returned.
</p>


<h3>Value</h3>

<p>An renv lockfile.
</p>

<hr>
<h2 id='renv-package'>Project-local Environments for R</h2><span id='topic+renv'></span><span id='topic+renv-package'></span>

<h3>Description</h3>

<p>Project-local environments for <span class="rlang"><b>R</b></span>.
</p>


<h3>Details</h3>

<p>You can use renv to construct isolated, project-local <span class="rlang"><b>R</b></span> libraries.
Each project using renv will share package installations from a global
cache of packages, helping to avoid wasting disk space on multiple
installations of a package that might otherwise be shared across projects.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Kevin Ushey <a href="mailto:kevin@rstudio.com">kevin@rstudio.com</a> (<a href="https://orcid.org/0000-0003-2880-7407">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Hadley Wickham <a href="mailto:hadley@rstudio.com">hadley@rstudio.com</a> (<a href="https://orcid.org/0000-0003-4757-117X">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Posit Software, PBC [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://rstudio.github.io/renv/">https://rstudio.github.io/renv/</a>
</p>
</li>
<li> <p><a href="https://github.com/rstudio/renv">https://github.com/rstudio/renv</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/rstudio/renv/issues">https://github.com/rstudio/renv/issues</a>
</p>
</li></ul>


<hr>
<h2 id='repair'>Repair a project</h2><span id='topic+repair'></span>

<h3>Description</h3>

<p>Use <code>repair()</code> to recover from some common issues that can occur with
a project. Currently, two operations are performed:
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repair(library = NULL, lockfile = NULL, project = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="repair_+3A_library">library</code></td>
<td>
<p>The <span class="rlang"><b>R</b></span> library to be used. When <code>NULL</code>, the active project
library will be used instead.</p>
</td></tr>
<tr><td><code id="repair_+3A_lockfile">lockfile</code></td>
<td>
<p>The path to a lockfile (if any). When available, renv
will use the lockfile when attempting to infer the remote associated
with the inaccessible version of each missing package. When <code>NULL</code>
(the default), the project lockfile will be used.</p>
</td></tr>
<tr><td><code id="repair_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
</table>


<h3>Details</h3>


<ol>
<li><p> Packages with broken symlinks into the cache will be re-installed.
</p>
</li>
<li><p> Packages that were installed from sources, but appear to be from
an remote source (e.g. GitHub), will have their <code>DESCRIPTION</code> files
updated to record that remote source explicitly.
</p>
</li></ol>


<hr>
<h2 id='restore'>Restore project library from a lockfile</h2><span id='topic+restore'></span>

<h3>Description</h3>

<p>Restore a project's dependencies from a lockfile, as previously generated by
<code><a href="packrat.html#topic+snapshot">snapshot()</a></code>. <code>renv::restore()</code> compares packages recorded in the lockfile to
the packages installed in the project library. Where there are differences
it resolves them by installing the lockfile-recorded package into the
project library. If <code>clean = TRUE</code>, <code>restore()</code> will additionally delete any
packages in the project library that don't appear in the lockfile.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>restore(
  project = NULL,
  ...,
  library = NULL,
  lockfile = NULL,
  packages = NULL,
  exclude = NULL,
  rebuild = FALSE,
  repos = NULL,
  clean = FALSE,
  prompt = interactive()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="restore_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
<tr><td><code id="restore_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p>
</td></tr>
<tr><td><code id="restore_+3A_library">library</code></td>
<td>
<p>The library paths to be used during restore. See <strong>Library</strong>
for details.</p>
</td></tr>
<tr><td><code id="restore_+3A_lockfile">lockfile</code></td>
<td>
<p>Path to a lockfile. When <code>NULL</code> (the default), the
<code>renv.lock</code> located in the root of the current project will be used.</p>
</td></tr>
<tr><td><code id="restore_+3A_packages">packages</code></td>
<td>
<p>A subset of packages recorded in the lockfile to restore.
When <code>NULL</code> (the default), all packages available in the lockfile will be
restored. Any required recursive dependencies of the requested packages
will be restored as well.</p>
</td></tr>
<tr><td><code id="restore_+3A_exclude">exclude</code></td>
<td>
<p>A subset of packages to be excluded during restore. This can
be useful for when you'd like to restore all but a subset of packages from
a lockfile. Note that if you attempt to exclude a package which is required
as the recursive dependency of another package, your request will be
ignored.</p>
</td></tr>
<tr><td><code id="restore_+3A_rebuild">rebuild</code></td>
<td>
<p>Force packages to be rebuilt, thereby bypassing any installed
versions of the package available in the cache? This can either be a
boolean (indicating that all installed packages should be rebuilt), or a
vector of package names indicating which packages should be rebuilt.</p>
</td></tr>
<tr><td><code id="restore_+3A_repos">repos</code></td>
<td>
<p>The repositories to use when restoring packages installed
from CRAN or a CRAN-like repository. By default, the repositories recorded
in the lockfile will be, ensuring that (e.g.) CRAN packages are
re-installed from the same CRAN mirror.
</p>
<p>Use <code>repos = getOptions(repos)</code> to override with the repositories set
in the current session, or see the <code>repos.override</code> option in <a href="httr.html#topic+config">config</a> for
an alternate way override.</p>
</td></tr>
<tr><td><code id="restore_+3A_clean">clean</code></td>
<td>
<p>Boolean; remove packages not recorded in the lockfile from
the target library? Use <code>clean = TRUE</code> if you'd like the library state
to exactly reflect the lockfile contents after <code>restore()</code>.</p>
</td></tr>
<tr><td><code id="restore_+3A_prompt">prompt</code></td>
<td>
<p>Boolean; prompt the user before taking any action? For backwards
compatibility, <code>confirm</code> is accepted as an alias for <code>prompt</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list of package records which were installed by renv.
</p>


<h3>See Also</h3>

<p>Other reproducibility: 
<code><a href="renv.html#topic+lockfiles">lockfiles</a></code>,
<code><a href="packrat.html#topic+snapshot">snapshot</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

# disable automatic snapshots
auto.snapshot &lt;- getOption("renv.config.auto.snapshot")
options(renv.config.auto.snapshot = FALSE)

# initialize a new project (with an empty R library)
renv::init(bare = TRUE)

# install digest 0.6.19
renv::install("digest@0.6.19")

# save library state to lockfile
renv::snapshot()

# remove digest from library
renv::remove("digest")

# check library status
renv::status()

# restore lockfile, thereby reinstalling digest 0.6.19
renv::restore()

# restore automatic snapshots
options(renv.config.auto.snapshot = auto.snapshot)


## End(Not run)
</code></pre>

<hr>
<h2 id='run'>Run a script</h2><span id='topic+run'></span>

<h3>Description</h3>

<p>Run an <span class="rlang"><b>R</b></span> script, in the context of a project using renv. The script will
be run within an <span class="rlang"><b>R</b></span> sub-process.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run(script, ..., job = NULL, name = NULL, project = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="run_+3A_script">script</code></td>
<td>
<p>The path to an <span class="rlang"><b>R</b></span> script.</p>
</td></tr>
<tr><td><code id="run_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p>
</td></tr>
<tr><td><code id="run_+3A_job">job</code></td>
<td>
<p>Run the requested script as an RStudio job? Requires a recent
version of both RStudio and the rstudioapi packages. When <code>NULL</code>, the
script will be run as a job if possible, and as a regular <span class="rlang"><b>R</b></span> process
launched by <code><a href="base.html#topic+system2">system2()</a></code> if not.</p>
</td></tr>
<tr><td><code id="run_+3A_name">name</code></td>
<td>
<p>The name to associate with the job, for scripts run as a job.</p>
</td></tr>
<tr><td><code id="run_+3A_project">project</code></td>
<td>
<p>The path to the renv project. This project will be loaded
before the requested script is executed. When <code>NULL</code> (the default), renv
will automatically determine the project root for the associated script
if possible.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The project directory, invisibly. Note that this function is normally
called for its side effects.
</p>

<hr>
<h2 id='sandbox'>The default library sandbox</h2><span id='topic+sandbox'></span>

<h3>Description</h3>

<p>An <span class="rlang"><b>R</b></span> installation can have up to three types of library paths available
to the user:
</p>

<ul>
<li><p> The <em>user library</em>, where <span class="rlang"><b>R</b></span> packages downloaded and installed by the
current user are installed. This library path is only visible to that
specific user.
</p>
</li>
<li><p> The <em>site library</em>, where <span class="rlang"><b>R</b></span> packages maintained by administrators of a
system are installed. This library path, if it exists, is visible to all
users on the system.
</p>
</li>
<li><p> The <em>default library</em>, where <span class="rlang"><b>R</b></span> packages distributed with <span class="rlang"><b>R</b></span> itself are
installed. This library path is visible to all users on the system.
</p>
</li></ul>

<p>Normally, only so-called &quot;base&quot; and &quot;recommended&quot; packages should be installed
in the default library. (You can get a list of these packages with
<code>installed.packages(priority = c("base", "recommended"))</code>). However, it is
possible for users and administrators to install packages into the default
library, if the filesystem permissions permit them to do so. (This, for
example, is the default behavior on macOS.)
</p>
<p>Because the site and default libraries are visible to all users, having those
accessible in renv projects can potentially break isolation &ndash; that is,
if a package were updated in the default library, that update would be visible
to all <span class="rlang"><b>R</b></span> projects on the system.
</p>
<p>To help defend against this, renv uses something called the &quot;sandbox&quot; to
isolate renv projects from non-&quot;base&quot; packages that are installed into the
default library. When an renv project is loaded, renv will:
</p>

<ul>
<li><p> Create a new, empty library path (called the &quot;sandbox&quot;),
</p>
</li>
<li><p> Link only the &quot;base&quot; and &quot;recommended&quot; packages from the default library
into the sandbox,
</p>
</li>
<li><p> Mark the sandbox as read-only, so that users are unable to install packages
into this library,
</p>
</li>
<li><p> Instruct the <span class="rlang"><b>R</b></span> session to use the &quot;sandbox&quot; as the default library.
</p>
</li></ul>

<p>This process is mostly transparent to the user. However, because the sandbox
is read-only, if you later need to remove the sandbox, you'll need to reset
file permissions manually; for example, with <code>renv::sandbox$unlock()</code>.
</p>
<p>If you'd prefer to keep the sandbox unlocked, you can also set:
</p>
<div class="sourceCode"><pre>RENV_SANDBOX_LOCKING_ENABLED = FALSE
</pre></div>
<p>in an appropriate startup <code>.Renviron</code> or <code>Renviron.site</code> file.
</p>
<p>The sandbox can also be disabled entirely with:
</p>
<div class="sourceCode"><pre>RENV_CONFIG_SANDBOX_ENABLED = FALSE
</pre></div>
<p>The sandbox library path can also be configured using the <code>RENV_PATHS_SANDBOX</code>
environment variable: see <a href="renv.html#topic+paths">paths</a> for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sandbox
</code></pre>

<hr>
<h2 id='scaffold'>Generate project infrastructure</h2><span id='topic+scaffold'></span>

<h3>Description</h3>

<p>Create the renv project infrastructure. This will:
</p>

<ul>
<li><p> Create a project library, <code>renv/library</code>.
</p>
</li>
<li><p> Install renv into the project library.
</p>
</li>
<li><p> Update the project <code>.Rprofile</code> to call <code>source("renv/activate.R")</code> so
that renv is automatically loaded for new <span class="rlang"><b>R</b></span> sessions launched in
this project.
</p>
</li>
<li><p> Create <code>renv/.gitignore</code>, which tells git to ignore the project library.
</p>
</li>
<li><p> Create <code>.Rbuildignore</code>, if the project is also a package. This tells
<code style="white-space: pre;">&#8288;R CMD build&#8288;</code> to ignore the renv infrastructure,
</p>
</li>
<li><p> Write a (bare) <a href="renv.html#topic+lockfile">lockfile</a>, <code>renv.lock</code>.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>scaffold(
  project = NULL,
  version = NULL,
  repos = getOption("repos"),
  settings = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scaffold_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
<tr><td><code id="scaffold_+3A_version">version</code></td>
<td>
<p>The version of renv to associate with this project. By
default, the version of renv currently installed is used.</p>
</td></tr>
<tr><td><code id="scaffold_+3A_repos">repos</code></td>
<td>
<p>The <span class="rlang"><b>R</b></span> repositories to associate with this project.</p>
</td></tr>
<tr><td><code id="scaffold_+3A_settings">settings</code></td>
<td>
<p>A list of renv settings, to be applied to the project
after creation. These should map setting names to the desired values.
See <a href="renv.html#topic+settings">settings</a> for more details.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# create scaffolding with 'devtools' ignored
renv::scaffold(settings = list(ignored.packages = "devtools"))

## End(Not run)

</code></pre>

<hr>
<h2 id='settings'>Project settings</h2><span id='topic+settings'></span>

<h3>Description</h3>

<p>Define project-local settings that can be used to adjust the behavior of
renv with your particular project.
</p>

<ul>
<li><p> Get the current value of a setting with (e.g.) <code>settings$snapshot.type()</code>
</p>
</li>
<li><p> Set current value of a setting with (e.g.)
<code>settings$snapshot.type("explicit")</code>.
</p>
</li></ul>

<p>Settings are automatically persisted across project sessions by writing to
<code>renv/settings.json</code>. You can also edit this file by hand, but you'll need
to restart the session for those changes to take effect.
</p>


<h4><code>bioconductor.version</code></h4>

<p>The Bioconductor version to be used with this project. Use this if you'd
like to lock the version of Bioconductor used on a per-project basis.
When unset, renv will try to infer the appropriate Bioconductor release
using the BiocVersion package if installed; if not, renv uses
<code>BiocManager::version()</code> to infer the appropriate Bioconductor version.
</p>



<h4><code>external.libraries</code></h4>

<p>A vector of library paths, to be used in addition to the project's own
private library. This can be useful if you have a package available for use
in some system library, but for some reason renv is not able to install
that package (e.g. sources or binaries for that package are not publicly
available, or you have been unable to orchestrate the pre-requisites for
installing some packages from source on your machine).
</p>



<h4><code>ignored.packages</code></h4>

<p>A vector of packages, which should be ignored when attempting to snapshot
the project's private library. Note that if a package has already been
added to the lockfile, that entry in the lockfile will not be ignored.
</p>



<h4><code>package.dependency.fields</code></h4>

<p>When explicitly installing a package with <code>install()</code>, what fields
should be used to determine that packages dependencies? The default
uses <code>Imports</code>, <code>Depends</code> and <code>LinkingTo</code> fields, but you also want
to install <code>Suggests</code> dependencies for a package, you can set this to
<code>c("Imports", "Depends", "LinkingTo", "Suggests")</code>.
</p>



<h4><code>ppm.enabled</code></h4>

<p>Enable <a href="https://packagemanager.posit.co/">Posit Package Manager</a>
integration in this project? When <code>TRUE</code>, renv will attempt to transform
repository URLs used by PPM into binary URLs as appropriate for the
current Linux platform. Set this to <code>FALSE</code> if you'd like to continue using
source-only PPM URLs, or if you find that renv is improperly transforming
your repository URLs. You can still set and use PPM repositories with this
option disabled; it only controls whether renv tries to transform source
repository URLs into binary URLs on your behalf.
</p>



<h4><code>ppm.ignored.urls</code></h4>

<p>When <a href="https://packagemanager.posit.co/">Posit Package Manager</a> integration
is enabled, <code>renv</code> will attempt to transform source repository URLs into
binary repository URLs. This setting can be used if you'd like to avoid this
transformation with some subset of repository URLs.
</p>



<h4><code>r.version</code></h4>

<p>The version of <span class="rlang"><b>R</b></span> to encode within the lockfile. This can be set as a
project-specific option if you'd like to allow multiple users to use
the same renv project with different versions of <span class="rlang"><b>R</b></span>. renv will
still warn the user if the major + minor version of <span class="rlang"><b>R</b></span> used in a project
does not match what is encoded in the lockfile.
</p>



<h4><code>snapshot.type</code></h4>

<p>The type of snapshot to perform by default. See <a href="packrat.html#topic+snapshot">snapshot</a> for more
details.
</p>



<h4><code>use.cache</code></h4>

<p>Enable the renv package cache with this project. When active, renv will
install packages into a global cache, and link packages from the cache into
your renv projects as appropriate. This can greatly save on disk space
and install time when for <span class="rlang"><b>R</b></span> packages which are used across multiple
projects in the same environment.
</p>



<h4><code>vcs.manage.ignores</code></h4>

<p>Should renv attempt to manage the version control system's ignore files
(e.g. <code>.gitignore</code>) within this project? Set this to <code>FALSE</code> if you'd
prefer to take control. Note that if this setting is enabled, you will
need to manually ensure internal data in the project's <code style="white-space: pre;">&#8288;renv/&#8288;</code> folder
is explicitly ignored.
</p>



<h4><code>vcs.ignore.cellar</code></h4>

<p>Set whether packages within a project-local package cellar are excluded
from version control. See <code>vignette("cellar", package = "renv")</code> for
more information.
</p>



<h4><code>vcs.ignore.library</code></h4>

<p>Set whether the renv project library is excluded from version control.
</p>



<h4><code>vcs.ignore.local</code></h4>

<p>Set whether renv project-specific local sources are excluded from version
control.
</p>



<h3>Usage</h3>

<pre><code class='language-R'>settings
</code></pre>


<h3>Value</h3>

<p>A named list of renv settings.
</p>


<h3>Defaults</h3>

<p>You can change the default values of these settings for newly-created renv
projects by setting <span class="rlang"><b>R</b></span> options for <code>renv.settings</code> or <code style="white-space: pre;">&#8288;renv.settings.&lt;name&gt;&#8288;</code>.
For example:
</p>
<div class="sourceCode R"><pre>options(renv.settings = list(snapshot.type = "all"))
options(renv.settings.snapshot.type = "all")
</pre></div>
<p>If both of the <code>renv.settings</code> and <code style="white-space: pre;">&#8288;renv.settings.&lt;name&gt;&#8288;</code> options are set
for a particular key, the option associated with <code style="white-space: pre;">&#8288;renv.settings.&lt;name&gt;&#8288;</code> is
used instead. We recommend setting these in an appropriate startup profile,
e.g. <code style="white-space: pre;">&#8288;~/.Rprofile&#8288;</code> or similar.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

# view currently-ignored packaged
renv::settings$ignored.packages()

# ignore a set of packages
renv::settings$ignored.packages("devtools", persist = FALSE)


## End(Not run)
</code></pre>

<hr>
<h2 id='snapshot'>Record current state of the project library in the lockfile</h2><span id='topic+snapshot'></span>

<h3>Description</h3>

<p>Call <code>renv::snapshot()</code> to update a <a href="renv.html#topic+lockfile">lockfile</a> with the current state of
dependencies in the project library. The lockfile can be used to later
<a href="packrat.html#topic+restore">restore</a> these dependencies as required.
</p>
<p>It's also possible to call <code>renv::snapshot()</code> with a non-renv project,
in which case it will record the current state of dependencies in the
current library paths. This makes it possible to <a href="packrat.html#topic+restore">restore</a> the current packages,
providing lightweight portability and reproducibility without isolation.
</p>
<p>If you want to automatically snapshot after each change, you can
set <code>config$config$auto.snapshot(TRUE)</code>, see <code>?config</code> for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>snapshot(
  project = NULL,
  ...,
  library = NULL,
  lockfile = paths$lockfile(project = project),
  type = settings$snapshot.type(project = project),
  dev = FALSE,
  repos = getOption("repos"),
  packages = NULL,
  exclude = NULL,
  prompt = interactive(),
  update = FALSE,
  force = FALSE,
  reprex = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="snapshot_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
<tr><td><code id="snapshot_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p>
</td></tr>
<tr><td><code id="snapshot_+3A_library">library</code></td>
<td>
<p>The <span class="rlang"><b>R</b></span> libraries to snapshot. When <code>NULL</code>, the active <span class="rlang"><b>R</b></span>
libraries (as reported by <code>.libPaths()</code>) are used.</p>
</td></tr>
<tr><td><code id="snapshot_+3A_lockfile">lockfile</code></td>
<td>
<p>The location where the generated lockfile should be written.
By default, the lockfile is written to a file called <code>renv.lock</code> in the
project directory. When <code>NULL</code>, the lockfile (as an <span class="rlang"><b>R</b></span> object) is returned
directly instead.</p>
</td></tr>
<tr><td><code id="snapshot_+3A_type">type</code></td>
<td>
<p>The type of snapshot to perform:
</p>

<ul>
<li> <p><code>"implict"</code>, (the default), uses all packages captured by <code><a href="renv.html#topic+dependencies">dependencies()</a></code>.
</p>
</li>
<li> <p><code>"explicit"</code> uses packages recorded in <code>DESCRIPTION</code>.
</p>
</li>
<li> <p><code>"all"</code> uses all packages in the project library.
</p>
</li>
<li> <p><code>"custom"</code> uses a custom filter.
</p>
</li></ul>

<p>See <strong>Snapshot type</strong> below for more details.</p>
</td></tr>
<tr><td><code id="snapshot_+3A_dev">dev</code></td>
<td>
<p>Boolean; include development dependencies? These packages are
typically required when developing the project, but not when running it
(i.e. you want them installed when humans are working on the project but
not when computers are deploying it).
</p>
<p>Development dependencies include packages listed in the <code>Suggests</code> field
of a <code>DESCRIPTION</code> found in the project root, and roxygen2 or devtools if
their use is implied by other project metadata. They also include packages
used in <code style="white-space: pre;">&#8288;~/.Rprofile&#8288;</code> if <code>config$user.profile()</code> is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="snapshot_+3A_repos">repos</code></td>
<td>
<p>The <span class="rlang"><b>R</b></span> repositories to be recorded in the lockfile. Defaults
to the currently active package repositories, as retrieved by
<code>getOption("repos")</code>.</p>
</td></tr>
<tr><td><code id="snapshot_+3A_packages">packages</code></td>
<td>
<p>A vector of packages to be included in the lockfile. When
<code>NULL</code> (the default), all packages relevant for the type of snapshot being
performed will be included. When set, the <code>type</code> argument is ignored.
Recursive dependencies of the specified packages will be added to the
lockfile as well.</p>
</td></tr>
<tr><td><code id="snapshot_+3A_exclude">exclude</code></td>
<td>
<p>A vector of packages to be explicitly excluded from the lockfile.
Note that transitive package dependencies will always be included, to avoid
potentially creating an incomplete / non-functional lockfile.</p>
</td></tr>
<tr><td><code id="snapshot_+3A_prompt">prompt</code></td>
<td>
<p>Boolean; prompt the user before taking any action? For backwards
compatibility, <code>confirm</code> is accepted as an alias for <code>prompt</code>.</p>
</td></tr>
<tr><td><code id="snapshot_+3A_update">update</code></td>
<td>
<p>Boolean; if the lockfile already exists, then attempt to update
that lockfile without removing any prior package records.</p>
</td></tr>
<tr><td><code id="snapshot_+3A_force">force</code></td>
<td>
<p>Boolean; force generation of a lockfile even when pre-flight
validation checks have failed?</p>
</td></tr>
<tr><td><code id="snapshot_+3A_reprex">reprex</code></td>
<td>
<p>Boolean; generate output appropriate for embedding the lockfile
as part of a <a href="https://www.tidyverse.org/help/#reprex">reprex</a>?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The generated lockfile, as an <span class="rlang"><b>R</b></span> object (invisibly). Note that
this function is normally called for its side effects.
</p>


<h3>Snapshot types</h3>

<p>Depending on how you prefer to manage dependencies, you might prefer
selecting a different snapshot mode. The modes available are as follows:
</p>

<dl>
<dt><code>"implicit"</code></dt><dd>
<p>(The default) Capture only packages which appear to be used in your project,
as determined by <code>renv::dependencies()</code>. This ensures that only the packages
actually required by your project will enter the lockfile; the downside
if it might be slow if your project contains a large number of files.
If speed becomes an issue, you might consider using <code>.renvignore</code> files to
limit which files renv uses for dependency discovery, or switching to
explicit mode, as described next.
</p>
</dd>
<dt><code>"explicit"</code></dt><dd>
<p>Only capture packages which are explicitly listed in the project
<code>DESCRIPTION</code> file. This workflow is recommended for users who wish to
manage their project's <span class="rlang"><b>R</b></span> package dependencies directly.
</p>
</dd>
<dt><code>"all"</code></dt><dd>
<p>Capture all packages within the active <span class="rlang"><b>R</b></span> libraries in the lockfile.
This is the quickest and simplest method, but may lead to undesired
packages (e.g. development dependencies) entering the lockfile.
</p>
</dd>
<dt><code>"custom"</code></dt><dd>
<p>Like <code>"implicit"</code>, but use a custom user-defined filter instead. The filter
should be specified by the <span class="rlang"><b>R</b></span> option <code>renv.snapshot.filter</code>, and should
either be a character vector naming a function (e.g. <code>"package::method"</code>),
or be a function itself. The function should only accept one argument (the
project directory), and should return a vector of package names to include
in the lockfile.
</p>
</dd>
</dl>

<p>You can change the snapshot type for the current project with <code><a href="renv.html#topic+settings">settings()</a></code>.
For example, the following code will switch to using <code>"explicit"</code> snapshots:
</p>
<div class="sourceCode"><pre>renv::settings$snapshot.type("explicit")
</pre></div>
<p>When the <code>packages</code> argument is set, <code>type</code> is ignored, and instead only the
requested set of packages, and their recursive dependencies, will be written
to the lockfile.
</p>


<h3>See Also</h3>

<p>More on handling package <code><a href="renv.html#topic+dependencies">dependencies()</a></code>
</p>
<p>Other reproducibility: 
<code><a href="renv.html#topic+lockfiles">lockfiles</a></code>,
<code><a href="packrat.html#topic+restore">restore</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

# disable automatic snapshots
auto.snapshot &lt;- getOption("renv.config.auto.snapshot")
options(renv.config.auto.snapshot = FALSE)

# initialize a new project (with an empty R library)
renv::init(bare = TRUE)

# install digest 0.6.19
renv::install("digest@0.6.19")

# save library state to lockfile
renv::snapshot()

# remove digest from library
renv::remove("digest")

# check library status
renv::status()

# restore lockfile, thereby reinstalling digest 0.6.19
renv::restore()

# restore automatic snapshots
options(renv.config.auto.snapshot = auto.snapshot)


## End(Not run)
</code></pre>

<hr>
<h2 id='status'>Report inconsistencies between lockfile, library, and dependencies</h2><span id='topic+status'></span>

<h3>Description</h3>

<p><code>renv::status()</code> reports issues caused by inconsistencies across the project
lockfile, library, and <code><a href="renv.html#topic+dependencies">dependencies()</a></code>. In general, you should strive to
ensure that <code>status()</code> reports no issues, as this maximises your chances of
successfully <code>restore()</code>ing the project in the future or on another machine.
</p>
<p><code>renv::load()</code> will report if any issues are detected when starting an
renv project; we recommend resolving these issues before doing any
further work on your project.
</p>
<p>See the headings below for specific advice on resolving any issues
revealed by <code>status()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>status(
  project = NULL,
  ...,
  library = NULL,
  lockfile = NULL,
  sources = TRUE,
  cache = FALSE,
  dev = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="status_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
<tr><td><code id="status_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p>
</td></tr>
<tr><td><code id="status_+3A_library">library</code></td>
<td>
<p>The library paths. By default, the library paths associated
with the requested project are used.</p>
</td></tr>
<tr><td><code id="status_+3A_lockfile">lockfile</code></td>
<td>
<p>Path to a lockfile. When <code>NULL</code> (the default), the
<code>renv.lock</code> located in the root of the current project will be used.</p>
</td></tr>
<tr><td><code id="status_+3A_sources">sources</code></td>
<td>
<p>Boolean; check that each of the recorded packages have a
known installation source? If a package has an unknown source, renv
may be unable to restore it.</p>
</td></tr>
<tr><td><code id="status_+3A_cache">cache</code></td>
<td>
<p>Boolean; perform diagnostics on the global package cache?
When <code>TRUE</code>, renv will validate that the packages installed into the
cache are installed at the expected + proper locations, and validate the
hashes used for those storage locations.</p>
</td></tr>
<tr><td><code id="status_+3A_dev">dev</code></td>
<td>
<p>Boolean; include development dependencies? These packages are
typically required when developing the project, but not when running it
(i.e. you want them installed when humans are working on the project but
not when computers are deploying it).
</p>
<p>Development dependencies include packages listed in the <code>Suggests</code> field
of a <code>DESCRIPTION</code> found in the project root, and roxygen2 or devtools if
their use is implied by other project metadata. They also include packages
used in <code style="white-space: pre;">&#8288;~/.Rprofile&#8288;</code> if <code>config$user.profile()</code> is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function is normally called for its side effects, but
it invisibly returns a list containing the following components:
</p>

<ul>
<li> <p><code>library</code>: packages in your library.
</p>
</li>
<li> <p><code>lockfile</code>: packages in the lockfile.
</p>
</li>
<li> <p><code>synchronized</code>: are the library and lockfile in sync?
</p>
</li></ul>



<h3>Missing packages</h3>

<p><code>status()</code> first checks that all packages used by the project are installed.
This must be done first because if any packages are missing we can't tell for
sure that a package isn't used; it might be a dependency that we don't know
about. Once you have resolve any installation issues, you'll need to run
<code>status()</code> again to reveal the next set of potential problems.
</p>
<p>There are four possibilities for an uninstalled package:
</p>

<ul>
<li><p> If it's used and recorded, call <code>renv::restore()</code> to install the version
specified in the lockfile.
</p>
</li>
<li><p> If it's used and not recorded, call <code>renv::install()</code> to install it
from CRAN or elsewhere.
</p>
</li>
<li><p> If it's not used and recorded, call <code>renv::snapshot()</code> to
remove it from the lockfile.
</p>
</li>
<li><p> If it's not used and not recorded, there's nothing to do. This the most
common state because you only use a small fraction of all available
packages in any one project.
</p>
</li></ul>

<p>If you have multiple packages in an inconsistent state, we recommend
<code>renv::restore()</code>, then <code>renv::install()</code>, then <code>renv::snapshot()</code>, but
that also suggests you should be running status more frequently.
</p>


<h3>Lockfile vs <code>dependencies()</code></h3>

<p>Next we need to ensure that packages are recorded in the lockfile if and
only if they are used by the project. Fixing issues of this nature only
requires calling  <code>snapshot()</code> because there are four possibilities for
a package:
</p>

<ul>
<li><p> If it's used and recorded, it's ok.
</p>
</li>
<li><p> If it's used and not recorded, call <code>renv::snapshot()</code> to add it to the
lockfile.
</p>
</li>
<li><p> If it's not used but is recorded, call <code>renv::snapshot()</code> to remove
it from the lockfile.
</p>
</li>
<li><p> If it's not used and not recorded, it's also ok, as it may be a
development dependency.
</p>
</li></ul>



<h3>Out-of-sync sources</h3>

<p>The final issue to resolve is any inconsistencies between the version of
the package recorded in the lockfile and the version installed in your
library. To fix these issues you'll need to either call <code>renv::restore()</code>
or <code>renv::snapshot()</code>:
</p>

<ul>
<li><p> Call <code>renv::snapshot()</code> if your project code is working. This implies that
the library is correct and you need to update your lockfile.
</p>
</li>
<li><p> Call <code>renv::restore()</code> if your project code isn't working. This probably
implies that you have the wrong package versions installed and you need
to restore from known good state in the lockfile.
</p>
</li></ul>

<p>If you're not sure which case applies, it's generally safer to call
<code>renv::snapshot()</code>. If you want to rollback to an earlier known good
status, see <code><a href="utils.html#topic+history">history()</a></code> and <code><a href="renv.html#topic+revert">revert()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

# disable automatic snapshots
auto.snapshot &lt;- getOption("renv.config.auto.snapshot")
options(renv.config.auto.snapshot = FALSE)

# initialize a new project (with an empty R library)
renv::init(bare = TRUE)

# install digest 0.6.19
renv::install("digest@0.6.19")

# save library state to lockfile
renv::snapshot()

# remove digest from library
renv::remove("digest")

# check library status
renv::status()

# restore lockfile, thereby reinstalling digest 0.6.19
renv::restore()

# restore automatic snapshots
options(renv.config.auto.snapshot = auto.snapshot)


## End(Not run)
</code></pre>

<hr>
<h2 id='update'>Update packages</h2><span id='topic+update'></span>

<h3>Description</h3>

<p>Update packages which are currently out-of-date. Currently supports CRAN,
Bioconductor, other CRAN-like repositories, GitHub, GitLab, Git, and
BitBucket.
</p>
<p>Updates will only be checked from the same source &ndash; for example,
if a package was installed from GitHub, but a newer version is
available on CRAN, that updated version will not be seen.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update(
  packages = NULL,
  ...,
  exclude = NULL,
  library = NULL,
  rebuild = FALSE,
  check = FALSE,
  prompt = interactive(),
  project = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_+3A_packages">packages</code></td>
<td>
<p>A character vector of <span class="rlang"><b>R</b></span> packages to update. When <code>NULL</code>
(the default), all packages (apart from any listed in the <code>ignored.packages</code>
project setting) will be updated.</p>
</td></tr>
<tr><td><code id="update_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p>
</td></tr>
<tr><td><code id="update_+3A_exclude">exclude</code></td>
<td>
<p>A set of packages to explicitly exclude from updating.
Use <code style="white-space: pre;">&#8288;renv::update(exclude = &lt;...&gt;)&#8288;</code> to update all packages except for
a specific set of excluded packages.</p>
</td></tr>
<tr><td><code id="update_+3A_library">library</code></td>
<td>
<p>The <span class="rlang"><b>R</b></span> library to be used. When <code>NULL</code>, the active project
library will be used instead.</p>
</td></tr>
<tr><td><code id="update_+3A_rebuild">rebuild</code></td>
<td>
<p>Force packages to be rebuilt, thereby bypassing any installed
versions of the package available in the cache? This can either be a
boolean (indicating that all installed packages should be rebuilt), or a
vector of package names indicating which packages should be rebuilt.</p>
</td></tr>
<tr><td><code id="update_+3A_check">check</code></td>
<td>
<p>Boolean; check for package updates without actually
installing available updates? This is useful when you'd like to determine
what updates are available, without actually installing those updates.</p>
</td></tr>
<tr><td><code id="update_+3A_prompt">prompt</code></td>
<td>
<p>Boolean; prompt the user before taking any action? For backwards
compatibility, <code>confirm</code> is accepted as an alias for <code>prompt</code>.</p>
</td></tr>
<tr><td><code id="update_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list of package records which were installed by renv.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# update the 'dplyr' package
renv::update("dplyr")


## End(Not run)
</code></pre>

<hr>
<h2 id='upgrade'>Upgrade renv</h2><span id='topic+upgrade'></span>

<h3>Description</h3>

<p>Upgrade the version of renv associated with a project, including using
a development version from GitHub. Automatically snapshots the update
renv, updates the activate script, and restarts R.
</p>
<p>If you want to update all packages (including renv) to their latest CRAN
versions, use <code><a href="stats.html#topic+update">update()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>upgrade(project = NULL, version = NULL, reload = NULL, prompt = interactive())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="upgrade_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
<tr><td><code id="upgrade_+3A_version">version</code></td>
<td>
<p>The version of renv to be installed.
</p>
<p>When <code>NULL</code> (the default), the latest version of renv will be installed as
available from CRAN (or whatever active package repositories are active)
Alternatively, you can install the latest development version with
<code>"main"</code>, or a specific commit with a SHA, e.g. <code>"5049cef8a"</code>.</p>
</td></tr>
<tr><td><code id="upgrade_+3A_reload">reload</code></td>
<td>
<p>Boolean; reload renv after install? When <code>NULL</code> (the
default), renv will be re-loaded only if updating renv for the
active project. Since it's not possible to guarantee a clean reload
in the current session, this will attempt to restart your R session.</p>
</td></tr>
<tr><td><code id="upgrade_+3A_prompt">prompt</code></td>
<td>
<p>Boolean; prompt upgrade before proceeding?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A boolean value, indicating whether the requested version of
renv was successfully installed. Note that this function is normally
called for its side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# upgrade to the latest version of renv
renv::upgrade()

# upgrade to the latest version of renv on GitHub (development version)
renv::upgrade(version = "main")


## End(Not run)
</code></pre>

<hr>
<h2 id='use_python'>Use python</h2><span id='topic+use_python'></span>

<h3>Description</h3>

<p>Associate a version of Python with your project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_python(
  python = NULL,
  ...,
  type = c("auto", "virtualenv", "conda", "system"),
  name = NULL,
  project = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="use_python_+3A_python">python</code></td>
<td>
<p>The path to the version of Python to be used with this project. See
<strong>Finding Python</strong> for more details.</p>
</td></tr>
<tr><td><code id="use_python_+3A_...">...</code></td>
<td>
<p>Optional arguments; currently unused.</p>
</td></tr>
<tr><td><code id="use_python_+3A_type">type</code></td>
<td>
<p>The type of Python environment to use. When <code>"auto"</code> (the default),
virtual environments will be used.</p>
</td></tr>
<tr><td><code id="use_python_+3A_name">name</code></td>
<td>
<p>The name or path that should be used for the associated Python environment.
If <code>NULL</code> and <code>python</code> points to a Python executable living within a
pre-existing virtual environment, that environment will be used. Otherwise,
a project-local environment will be created instead, using a name
generated from the associated version of Python.</p>
</td></tr>
<tr><td><code id="use_python_+3A_project">project</code></td>
<td>
<p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When Python integration is active, renv will:
</p>

<ul>
<li><p> Save metadata about the requested version of Python in <code>renv.lock</code> &ndash; in
particular, the Python version, and the Python type (&quot;virtualenv&quot;, &quot;conda&quot;,
&quot;system&quot;),
</p>
</li>
<li><p> Capture the set of installed Python packages during <code>renv::snapshot()</code>,
</p>
</li>
<li><p> Re-install the set of recorded Python packages during <code>renv::restore()</code>.
</p>
</li></ul>

<p>In addition, when the project is loaded, the following actions will be taken:
</p>

<ul>
<li><p> The <code>RENV_PYTHON</code> environment variable will be set, indicating the version
of Python currently active for this sessions,
</p>
</li>
<li><p> The <code>RETICULATE_PYTHON</code> environment variable will be set, so that the
reticulate package can automatically use the requested copy of Python
as appropriate,
</p>
</li>
<li><p> The requested version of Python will be placed on the <code>PATH</code>, so that
attempts to invoke Python will resolve to the expected version of Python.
</p>
</li></ul>

<p>You can override the version of Python used in a particular project by
setting the <code>RENV_PYTHON</code> environment variable; e.g. as part of the
project's <code>.Renviron</code> file. This can be useful if you find that renv
is unable to automatically discover a compatible version of Python to
be used in the project.
</p>


<h3>Value</h3>

<p><code>TRUE</code>, indicating that the requested version of Python has been
successfully activated. Note that this function is normally called for its
side effects.
</p>


<h3>Finding Python</h3>

<p>In interactive sessions, when <code>python = NULL</code>, renv will prompt for an
appropriate version of Python. renv will search a pre-defined set of
locations when attempting to find Python installations on the system:
</p>

<ul>
<li> <p><code>getOption("renv.python.root")</code>,
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;/opt/python&#8288;</code>,
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;/opt/local/python&#8288;</code>,
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;~/opt/python&#8288;</code>,
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;/usr/local/opt&#8288;</code> (for macOS Homebrew-installed copies of Python),
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;/opt/homebrew/opt&#8288;</code> (for M1 macOS Homebrew-installed copies of Python),
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;~/.pyenv/versions&#8288;</code>,
</p>
</li>
<li><p> Python instances available on the <code>PATH</code>.
</p>
</li></ul>

<p>In non-interactive sessions, renv will first check the <code>RETICULATE_PYTHON</code>
environment variable; if that is unset, renv will look for Python on the
<code>PATH</code>. It is recommended that the version of Python to be used is explicitly
supplied for non-interactive usages of <code>use_python()</code>.
</p>


<h3>Warning</h3>

<p>We strongly recommend using Python virtual environments, for a few reasons:
</p>

<ol>
<li><p> If something goes wrong with a local virtual environment, you can safely
delete that virtual environment, and then re-initialize it later, without
worry that doing so might impact other software on your system.
</p>
</li>
<li><p> If you choose to use a &quot;system&quot; installation of Python, then any packages
you install or upgrade will be visible to any other application that
wants to use that same Python installation. Using a virtual environment
ensures that any changes made are isolated to that environment only.
</p>
</li>
<li><p> Choosing to use Anaconda will likely invite extra frustration in the
future, as you may be required to upgrade and manage your Anaconda
installation as new versions of Anaconda are released. In addition,
Anaconda installations tend to work poorly with software not specifically
installed as part of that same Anaconda installation.
</p>
</li></ol>

<p>In other words, we recommend selecting &quot;system&quot; or &quot;conda&quot; only if you are an
expert Python user who is already accustomed to managing Python / Anaconda
installations on your own.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# use python with a project
renv::use_python()

# use python with a project; create the environment
# within the project directory in the '.venv' folder
renv::use_python(name = ".venv")

# use python with a pre-existing virtual environment located elsewhere
renv::use_python(name = "~/.virtualenvs/env")

# use virtualenv python with a project
renv::use_python(type = "virtualenv")

# use conda python with a project
renv::use_python(type = "conda")


## End(Not run)
</code></pre>

<hr>
<h2 id='vendor'>Vendor renv in an R package</h2><span id='topic+vendor'></span>

<h3>Description</h3>

<p>Calling <code>renv:::vendor()</code> will:
</p>

<ul>
<li><p> Compile a vendored copy of renv to <code>inst/vendor/renv.R</code>,
</p>
</li>
<li><p> Generate an renv auto-loader at <code>R/renv.R</code>.
</p>
</li></ul>

<p>Using this, projects can take a dependency on renv, and use renv
internals, in a CRAN-compliant way. After vendoring renv, you can
use renv APIs in your package via the embedded renv environment;
for example, you could call the <code><a href="renv.html#topic+dependencies">dependencies()</a></code> function with:
</p>
<div class="sourceCode"><pre>renv$dependencies()
</pre></div>
<p>Be aware that renv internals might change in future releases, so if you
need to rely on renv internal functions, we strongly recommend testing
your usages of these functions to avoid potential breakage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vendor(version = "main", project = getwd())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vendor_+3A_version">version</code></td>
<td>
<p>The version of renv to vendor. <code>renv</code> sources will be pulled
from GitHub, and so <code>version</code> should refer to either a commit hash or a
branch name.</p>
</td></tr>
<tr><td><code id="vendor_+3A_project">project</code></td>
<td>
<p>The project in which renv should be vendored.</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
