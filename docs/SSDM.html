<!DOCTYPE html><html><head><title>Help for package SSDM</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {SSDM}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#Algorithm.SDM-class'><p>An S4 class to represent an SDM based on a single algorithm</p></a></li>
<li><a href='#ensemble'><p>Methods to assemble multiple algorithms in an ensemble SDM</p></a></li>
<li><a href='#ensemble_modelling'><p>Build an ensemble SDM that assembles multiple algorithms</p></a></li>
<li><a href='#Ensemble.SDM-class'><p>An S4 class to represent an ensemble SDM</p></a></li>
<li><a href='#Env'><p>A stack of three environmental variables</p></a></li>
<li><a href='#evaluate'><p>Evaluate</p></a></li>
<li><a href='#gui'><p>SSDM package Graphic User Interface</p></a></li>
<li><a href='#load_occ'><p>Load occurrence data</p></a></li>
<li><a href='#load_var'><p>Load environmental variables</p></a></li>
<li><a href='#load.model'><p>Load ensemble SDMs and SSDMs.</p></a></li>
<li><a href='#mapDiversity'><p>Map Diversity</p></a></li>
<li><a href='#modelling'><p>Build an SDM using a single algorithm</p></a></li>
<li><a href='#Occurrences'><p>Plant occurrences data frame</p></a></li>
<li><a href='#plot.model'><p>Plot SDMs, ensemble SDMs, and SSDMs</p></a></li>
<li><a href='#project'><p>Project model into environment</p></a></li>
<li><a href='#save.model'><p>Save ensemble SDMs and SSDMs</p></a></li>
<li><a href='#SSDM'><p>SSDM: Stacked species distribution modelling</p></a></li>
<li><a href='#stack_modelling'><p>Build an SSDM that assembles multiple algorithms and species.</p></a></li>
<li><a href='#Stacked.SDM-class'><p>An S4 class to represent SSDMs</p></a></li>
<li><a href='#stacking'><p>Stack different ensemble SDMs in an SSDM</p></a></li>
<li><a href='#update+2CStacked.SDM-method'><p>Update a previous SSDM</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Stacked Species Distribution Modelling</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.9</td>
</tr>
<tr>
<td>Author:</td>
<td>Sylvain Schmitt, Robin Pouteau, Dimitri Justeau, Florian de Boissieu, Lukas Baumbach, Philippe Birnbaum</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sylvain Schmitt &lt;sylvain.m.schmitt@gmail.com&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/sylvainschmitt/SSDM">https://github.com/sylvainschmitt/SSDM</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/sylvainschmitt/SSDM/issues">https://github.com/sylvainschmitt/SSDM/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Allows to map species richness and endemism based on stacked
    species distribution models (SSDM). Individuals SDMs can be created using a
    single or multiple algorithms (ensemble SDMs). For each species, an SDM can
    yield a habitat suitability map, a binary map, a between-algorithm variance
    map, and can assess variable importance, algorithm accuracy, and between-
    algorithm correlation. Methods to stack individual SDMs include summing
    individual probabilities and thresholding then summing. Thresholding can be
    based on a specific evaluation metric or by drawing repeatedly from a Bernoulli
    distribution. The SSDM package also provides a user-friendly interface.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a> | file LICENSE</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>Imports:</td>
<td>sf (&ge; 1.0-14), raster (&ge; 2.9-5), methods (&ge; 3.2.2), mgcv
(&ge; 1.8.7), earth (&ge; 4.4.3), rpart (&ge; 4.1.10), gbm (&ge;
2.1.1), randomForest (&ge; 4.6.10), dismo (&ge; 1.0.12), nnet (&ge;
7.3.10), e1071 (&ge; 1.6.7), ggplot2 (&ge; 3.1.1), reshape2 (&ge;
1.4.3), scales (&ge; 1.0.0), shiny (&ge; 0.12.2), shinydashboard
(&ge; 0.5.1), spThin (&ge; 0.1.0), poibin (&ge; 1.3.0), foreach (&ge;
1.4.4), doParallel (&ge; 1.0.14), iterators (&ge; 1.0.10),
itertools (&ge; 0.1-3), parallel (&ge; 3.5.2), leaflet (&ge; 2.2.0),
magrittr (&ge; 2.0.3), sdm (&ge; 1.1.8)</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.2)</td>
</tr>
<tr>
<td>Collate:</td>
<td>'SDM.R' 'Algorithm.SDM.R' 'Ensemble.SDM.R' 'Env.R'
'Occurrences.R' 'PA.select.R' 'SSDM.R' 'Stacked.SDM.R'
'accuracy.R' 'checkargs.R' 'data.values.R' 'ensemble.R'
'optim.thresh.R' 'evaluate.R' 'modelling.R'
'ensemble_modelling.R' 'evaluate.axes.R' 'get_PA.R'
'get_model.R' 'gui.R' 'load_model.R' 'load_occ.R' 'load_var.R'
'mapDiversity.R' 'plot.model.R' 'project.R' 'save.model.R'
'stack_modelling.R' 'stacking.R' 'update.stack.R'
'utils-pipe.R' 'zzz.R'</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown, shinyFiles</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-24 12:04:46 UTC; sschmitt</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-24 13:40:18 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling 'rhs(lhs)'.
</p>

<hr>
<h2 id='Algorithm.SDM-class'>An S4 class to represent an SDM based on a single algorithm</h2><span id='topic+Algorithm.SDM-class'></span>

<h3>Description</h3>

<p>This is an S4 class to represent an SDM based on a single algorithm (including
generalized linear model, general additive model, multivariate adpative
splines, generalized boosted regression model, classification tree analysis,
random forest, maximum entropy, artificial neural network, and support vector
machines). This S4 class is obtained with <code><a href="#topic+modelling">modelling</a></code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>name</code></dt><dd><p>character. Name of the SDM (by default Species.SDM).</p>
</dd>
<dt><code>projection</code></dt><dd><p>raster. Habitat suitability map produced by the SDM.</p>
</dd>
<dt><code>binary</code></dt><dd><p>raster. Presence/Absence binary map produced by the SDM.</p>
</dd>
<dt><code>evaluation</code></dt><dd><p>data frame. Evaluation of the SDM (available metrics include
AUC, Kappa, sensitivity, specificity and proportion of correctly predicted
occurrences) and identification of the optimal threshold to convert the
habitat suitability map into a binary presence/absence map.</p>
</dd>
<dt><code>variable.importance</code></dt><dd><p>data frame. Relative importance of
each variable in the SDM.</p>
</dd>
<dt><code>data</code></dt><dd><p>data frame. Data used to build the SDM.</p>
</dd>
<dt><code>parameters</code></dt><dd><p>data frame. Parameters used to build the SDM.</p>
</dd>
</dl>


<h3>See Also</h3>

<p><a href="#topic+Ensemble.SDM-class">Ensemble.SDM</a> an S4 class for ensemble SDMs,
and <a href="#topic+Stacked.SDM-class">Stacked.SDM</a> an S4 class for SSDMs.
</p>

<hr>
<h2 id='ensemble'>Methods to assemble multiple algorithms in an ensemble SDM</h2><span id='topic+ensemble'></span><span id='topic+ensemble+2CAlgorithm.SDM-method'></span><span id='topic+sum+2CAlgorithm.SDM-method'></span>

<h3>Description</h3>

<p>This is a method to assemble several algorithms in an ensemble SDM. The
function takes as inputs several S4 <a href="#topic+Algorithm.SDM-class">Algorithm.SDM</a> class objects
returned by the <code><a href="#topic+modelling">modelling</a></code> function. The function returns an S4
<a href="#topic+Ensemble.SDM-class">Ensemble.SDM</a> class object containing the habitat suitability
map, the binary map, and the uncertainty map (based on the between-algorithm
variance) and the associated evaluation tables (model evaluation, algorithm
evaluation, algorithm correlation matrix and variable importance).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ensemble(
  x,
  ...,
  name = NULL,
  ensemble.metric = c("AUC"),
  ensemble.thresh = c(0.75),
  weight = TRUE,
  thresh = 1001,
  uncertainty = TRUE,
  SDM.projections = FALSE,
  cores = 0,
  verbose = TRUE,
  GUI = FALSE
)

## S4 method for signature 'Algorithm.SDM'
ensemble(
  x,
  ...,
  name = NULL,
  ensemble.metric = c("AUC"),
  ensemble.thresh = c(0.75),
  weight = TRUE,
  thresh = 1001,
  uncertainty = TRUE,
  SDM.projections = FALSE,
  cores = 0,
  verbose = TRUE,
  GUI = FALSE
)

## S4 method for signature 'Algorithm.SDM'
sum(
  x,
  ...,
  name = NULL,
  ensemble.metric = c("AUC"),
  ensemble.thresh = c(0.75),
  weight = TRUE,
  thresh = 1001,
  format = TRUE,
  verbose = TRUE,
  na.rm = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ensemble_+3A_x">x</code>, <code id="ensemble_+3A_...">...</code></td>
<td>
<p>SDMs. SDMs to be assembled.</p>
</td></tr>
<tr><td><code id="ensemble_+3A_name">name</code></td>
<td>
<p>character. Optional name given to the final Ensemble.SDM produced
(by default 'Ensemble.SDM').</p>
</td></tr>
<tr><td><code id="ensemble_+3A_ensemble.metric">ensemble.metric</code></td>
<td>
<p>character. Metric(s) used to select the best SDMs that
will be included in the ensemble SDM (see details below).</p>
</td></tr>
<tr><td><code id="ensemble_+3A_ensemble.thresh">ensemble.thresh</code></td>
<td>
<p>numeric. Threshold(s) associated with the metric(s)
used to compute the selection.</p>
</td></tr>
<tr><td><code id="ensemble_+3A_weight">weight</code></td>
<td>
<p>logical. If TRUE, SDMs are weighted using the ensemble metric
or, alternatively, the mean of the selection   metrics.</p>
</td></tr>
<tr><td><code id="ensemble_+3A_thresh">thresh</code></td>
<td>
<p>numeric. A integer value specifying the number of equal
interval threshold values between 0 and 1.</p>
</td></tr>
<tr><td><code id="ensemble_+3A_uncertainty">uncertainty</code></td>
<td>
<p>logical. If TRUE, generates an uncertainty map and
an algorithm correlation matrix.</p>
</td></tr>
<tr><td><code id="ensemble_+3A_sdm.projections">SDM.projections</code></td>
<td>
<p>logical. If FALSE (default), the Algorithm.SDMs inside the 'sdms' slot will not contain projections (for memory saving purposes).</p>
</td></tr>
<tr><td><code id="ensemble_+3A_cores">cores</code></td>
<td>
<p>integer. Specify the number of CPU cores used to do the
computing. You can use <code><a href="parallel.html#topic+detectCores">detectCores</a></code>) to automatically</p>
</td></tr>
<tr><td><code id="ensemble_+3A_verbose">verbose</code></td>
<td>
<p>logical. If set to true, allows the function to print text in
the console.</p>
</td></tr>
<tr><td><code id="ensemble_+3A_gui">GUI</code>, <code id="ensemble_+3A_format">format</code>, <code id="ensemble_+3A_na.rm">na.rm</code></td>
<td>
<p>logical. Do not take those arguments into account
(parameters for the user interface and sum function).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>ensemble.metric (metric(s) used to select the best SDMs that will be
included in the ensemble SDM) can be chosen from among: </p>

<dl>
<dt>AUC</dt><dd><p>Area under the receiver operating characteristic (ROC) curve</p>
</dd>
<dt>Kappa</dt><dd><p>Kappa from the confusion matrix</p>
</dd> <dt>sensitivity</dt><dd><p>Sensitivity
from the confusion matrix</p>
</dd> <dt>specificity</dt><dd><p>Specificity from the confusion
matrix</p>
</dd> <dt>prop.correct</dt><dd><p>Proportion of correctly predicted occurrences
from the confusion matrix</p>
</dd> <dt>calibration</dt><dd><p>Calibration metric (Naimi &amp; Araujo 2016)</p>
</dd> </dl>



<h3>Value</h3>

<p>an S4 <a href="#topic+Ensemble.SDM-class">Ensemble.SDM</a> class object viewable with the
<code><a href="#topic+plot.model">plot.model</a></code> function.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ensemble_modelling">ensemble_modelling</a></code> to build an ensemble SDM from
multiple algorithms.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Loading data
data(Env)
data(Occurrences)
Occurrences &lt;- subset(Occurrences, Occurrences$SPECIES == 'elliptica')

# ensemble SDM building
CTA &lt;- modelling('CTA', Occurrences, Env, Xcol = 'LONGITUDE', Ycol = 'LATITUDE')
SVM &lt;- modelling('SVM', Occurrences, Env, Xcol = 'LONGITUDE', Ycol = 'LATITUDE')
ESDM &lt;- ensemble(CTA, SVM, ensemble.thresh = c(0.6))

# Results plotting
plot(ESDM)

## End(Not run)

</code></pre>

<hr>
<h2 id='ensemble_modelling'>Build an ensemble SDM that assembles multiple algorithms</h2><span id='topic+ensemble_modelling'></span>

<h3>Description</h3>

<p>Build an ensemble SDM that assembles multiple algorithms for a single species.
The function takes as inputs an occurrence data frame made of presence/absence
or presence-only records and a raster object for data extraction and
projection. The function returns an S4 <a href="#topic+Ensemble.SDM-class">Ensemble.SDM</a> class object
containing the habitat suitability map, the binary map, the between-algorithm
variance map and the associated evaluation tables (model evaluation, algorithm
evaluation, algorithm correlation matrix and variable importance).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ensemble_modelling(
  algorithms,
  Occurrences,
  Env,
  Xcol = "Longitude",
  Ycol = "Latitude",
  Pcol = NULL,
  rep = 10,
  name = NULL,
  save = FALSE,
  path = getwd(),
  cores = 0,
  parmode = "replicates",
  PA = NULL,
  cv = "holdout",
  cv.param = c(0.7, 1),
  final.fit.data = "all",
  bin.thresh = "SES",
  metric = NULL,
  thresh = 1001,
  axes.metric = "Pearson",
  uncertainty = TRUE,
  tmp = FALSE,
  SDM.projections = FALSE,
  ensemble.metric = c("AUC"),
  ensemble.thresh = c(0.75),
  weight = TRUE,
  verbose = TRUE,
  GUI = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ensemble_modelling_+3A_algorithms">algorithms</code></td>
<td>
<p>character. A character vector specifying the algorithm
name(s) to be run (see details below).</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_occurrences">Occurrences</code></td>
<td>
<p>data frame. Occurrences table (can be processed first by
<code><a href="#topic+load_occ">load_occ</a></code>).</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_env">Env</code></td>
<td>
<p>raster object. RasterStack object of environmental variables (can
be processed first by <code><a href="#topic+load_var">load_var</a></code>).</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_xcol">Xcol</code></td>
<td>
<p>character. Name of the column  in the occurrence table  containing
Latitude or X coordinates.</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_ycol">Ycol</code></td>
<td>
<p>character. Name of the column in the occurrence table  containing
Longitude or Y coordinates.</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_pcol">Pcol</code></td>
<td>
<p>character. Name of the column in the occurrence table specifying
whether a line is a presence or an absence. A value of 1 is presence and
value of 0 is absence. If NULL presence-only dataset is assumed.</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_rep">rep</code></td>
<td>
<p>integer. Number of repetitions for each algorithm.</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_name">name</code></td>
<td>
<p>character. Optional name given to the final Ensemble.SDM produced
(by default 'Ensemble.SDM').</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_save">save</code></td>
<td>
<p>logical. If <code>TRUE</code>, the ensemble SDM is automatically saved.</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_path">path</code></td>
<td>
<p>character. If save is If <code>TRUE</code>, the path to the directory in
which the ensemble SDM will be saved.</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_cores">cores</code></td>
<td>
<p>integer. Specify the number of CPU cores used to do the
computing. You can use <code><a href="parallel.html#topic+detectCores">detectCores</a></code>) to automatically</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_parmode">parmode</code></td>
<td>
<p>character. Parallelization mode: along 'algorithms' or 'replicates'. Defaults to 'replicates'.</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_pa">PA</code></td>
<td>
<p>list(nb, strat) defining the pseudo-absence selection strategy used
in case of presence-only dataset. If PA is NULL, recommended PA selection
strategy is used depending on the algorithm (see details below).</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_cv">cv</code></td>
<td>
<p>character. Method of cross-validation used to evaluate the ensemble
SDM (see details below).</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_cv.param">cv.param</code></td>
<td>
<p>numeric. Parameters associated to the method of
cross-validation used to evaluate the ensemble SDM (see details below).</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_final.fit.data">final.fit.data</code></td>
<td>
<p>strategy used for fitting the final/evaluated Algorithm.SDMs: 'holdout'= use same train and test data as in (last) evaluation, 'all'= train model with all data (i.e. no test data) or numeric (0-1)= sample a custom training fraction (left out fraction is set aside as test data)</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_bin.thresh">bin.thresh</code></td>
<td>
<p>character. Classification threshold (<code><a href="dismo.html#topic+threshold">threshold</a></code>) used to binarize model predictions into presence/absence and compute the confusion matrix (see details below).</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_metric">metric</code></td>
<td>
<p>(deprecated) character. Classification threshold (<code>SDMTools::optim.thresh</code>) used to binarize model predictions into presence/absence and compute the confusion matrix (see details below). This argument is only kept for backwards compatibility, if possible please use <code>bin.thresh</code> instead.</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_thresh">thresh</code></td>
<td>
<p>(deprecated) integer. Number of equally spaced thresholds in the interval 0-1 (<code>SDMTools::optim.thresh</code>). Only needed when <code>metric</code> is set.</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_axes.metric">axes.metric</code></td>
<td>
<p>Metric used to evaluate variable relative importance (see
details below).</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_uncertainty">uncertainty</code></td>
<td>
<p>logical. If <code>TRUE</code>, generates an uncertainty map and
an algorithm correlation matrix.</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_tmp">tmp</code></td>
<td>
<p>logical or character. If <code>FALSE</code>, no temporary rasters are written (this could quickly fill up your working memory, if many replicates are modelled). If <code>TRUE</code>, temporary rasters are written to the „tmp“ directory of your R environment. If <code>character</code>, temporary rasters are written to a custom path. But beware: if you
close R, temporary files will be deleted. To avoid any loss you can save your
ensemble SDM with <code><a href="#topic+save.model">save.model</a></code>. Depending on number, resolution
and extent of models, temporary files can take a lot of disk space.
Temporary files are written to the R environment temporary folder.</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_sdm.projections">SDM.projections</code></td>
<td>
<p>logical. If FALSE (default), the Algorithm.SDMs inside the 'sdms' slot will not contain projections (for memory saving purposes).</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_ensemble.metric">ensemble.metric</code></td>
<td>
<p>character. Metric(s) used to select the best SDMs that
will be included in the ensemble SDM (see details below).</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_ensemble.thresh">ensemble.thresh</code></td>
<td>
<p>numeric. Threshold(s) associated with the metric(s)
used to compute the selection.</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_weight">weight</code></td>
<td>
<p>logical. If <code>TRUE</code>, SDMs are weighted using the ensemble
metric or, alternatively, the mean of the selection metrics.</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_verbose">verbose</code></td>
<td>
<p>logical. If <code>TRUE</code>, allows the function to print text in
the console.</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_gui">GUI</code></td>
<td>
<p>logical. Do not take this argument into account (parameter for the
user interface).</p>
</td></tr>
<tr><td><code id="ensemble_modelling_+3A_...">...</code></td>
<td>
<p>additional parameters for the algorithm modelling function (see
details below).</p>
</td></tr>
</table>


<h3>Details</h3>

 <dl>
<dt>algorithms</dt><dd><p>'all' calls all the following
algorithms. Algorithms include Generalized linear model (<strong>GLM</strong>),
Generalized additive model (<strong>GAM</strong>), Multivariate adaptive regression
splines (<strong>MARS</strong>), Generalized boosted regressions model
(<strong>GBM</strong>), Classification tree analysis (<strong>CTA</strong>), Random forest
(<strong>RF</strong>), Maximum entropy (<strong>MAXENT</strong>), Artificial neural network
(<strong>ANN</strong>), and Support vector machines (<strong>SVM</strong>). Each algorithm
has its own parameters settable with the <strong>...</strong> (see each algorithm
section below to set their parameters).</p>
</dd> <dt>&quot;PA&quot;</dt><dd><p>list with two values:
<strong>nb</strong> number of pseudo-absences selected, and <strong>strat</strong> strategy
used to select pseudo-absences: either random selection or disk selection.
We set default recommendation from Barbet-Massin et al. (2012) (see
reference).</p>
</dd> <dt>cv</dt><dd><p><strong>Cross-validation</strong> method used to split the
occurrence dataset used for evaluation: <strong>holdout</strong> data are
partitioned into a training set and an evaluation set using a fraction
(<em>cv.param[1]</em>) and the operation can be repeated (<em>cv.param[2]</em>)
times, <strong>k-fold</strong> data are partitioned into k (<em>cv.param[1]</em>)
folds being k-1 times in the training set and once the evaluation set and
the operation can be repeated (<em>cv.param[2]</em>) times, <strong>LOO</strong>
(Leave One Out) each point is successively taken as evaluation data.</p>
</dd>
<dt>metric</dt><dd><p>Choice of the metric used to compute the binary map threshold
and the confusion matrix (by default SES as recommended by Liu et al.
(2005), see reference below): <strong>Kappa</strong> maximizes the Kappa,
<strong>CCR</strong> maximizes the proportion of correctly predicted observations,
<strong>TSS</strong> (True Skill Statistic) maximizes the sum of sensitivity and
specificity, <strong>SES</strong> uses the sensitivity-specificity equality,
<strong>LW</strong> uses the lowest occurrence prediction probability, <strong>ROC</strong>
minimizes the distance between the ROC plot (receiving operating
characteristic curve) and the upper left corner
(1,1).</p>
</dd><dt>axes.metric</dt><dd><p>Metric used to evaluate the variable relative
importance (difference between a full model and one with each variable
successively omitted): <strong>Pearson</strong> (computes a simple Pearson's
correlation <em>r</em> between predictions of the full model and the one
without a variable, and returns the score <em>1-r</em>: the highest the value,
the more influence the variable has on the model), <strong>AUC</strong>,
<strong>Kappa</strong>, <strong>sensitivity</strong>, <strong>specificity</strong>, and
<strong>prop.correct</strong> (proportion of correctly predicted occurrences).</p>
</dd>
<dt>ensemble.metric</dt><dd><p>Ensemble metric(s) used to select SDMs: <strong>AUC</strong>,
<strong>Kappa</strong>, <strong>sensitivity</strong>, <strong>specificity</strong>, and
<strong>prop.correct</strong> (proportion of correctly predicted occurrences).</p>
</dd>
<dt>&quot;...&quot;</dt><dd><p>See algorithm in detail section</p>
</dd> </dl>



<h3>Value</h3>

<p>an S4 <a href="#topic+Ensemble.SDM-class">Ensemble.SDM</a> class object viewable with the
<code><a href="#topic+plot.model">plot.model</a></code> function.
</p>


<h3>Generalized linear model (<strong>GLM</strong>) </h3>

<p>Uses the <code>glm</code>
function from the package 'stats'. You can set parameters by supplying <code>glm.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="stats.html#topic+glm">glm</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>test</dt><dd><p>character. Test used to evaluate the SDM, default 'AIC'.</p>
</dd>
<dt>control</dt><dd><p>list (created with <code><a href="stats.html#topic+glm.control">glm.control</a></code>).
Contains parameters for controlling the fitting process. Default is <code>glm.control(epsilon = 1e-08, maxit = 500)</code>.
'epsilon' is a numeric and defines the positive convergence tolerance (eps). The iterations converge when <em>|dev - dev_old|/(|dev| + 0.1) &lt; eps</em>.
'maxit' is an integer giving the maximal number of IWLS (Iterative Weighted Last Squares) iterations.</p>
</dd> </dl>



<h3>Generalized additive model (<strong>GAM</strong>) </h3>

<p>Uses the <code>gam</code>
function from the package 'mgcv'. You can set parameters by supplying <code>gam.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="mgcv.html#topic+gam">gam</a></code> for all settable arguments).
The following parameters have defaults: </p>
<dl>
<dt>test</dt><dd><p>character.
Test used to evaluate the model, default 'AIC'.</p>
</dd> <dt>control</dt><dd><p>list (created with <code><a href="mgcv.html#topic+gam.control">gam.control</a></code>).
Contains parameters for controlling the fitting process. Default is <code>gam.control(epsilon = 1e-08, maxit = 500)</code>.
'epsilon' is a numeric used for judging the conversion of the GLM IRLS (Iteratively Reweighted Least Squares) loop. 'maxit' is an integer giving the maximum number of IRLS iterations to perform.</p>
</dd> </dl>



<h3>Multivariate adaptive regression splines (<strong>MARS</strong>) </h3>

<p>Uses the
<code>earth</code> function from the package 'earth'. You can set parameters by supplying <code>mars.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="earth.html#topic+earth">earth</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>degree</dt><dd><p>integer. Maximum degree of interaction (Friedman's mi) ; 1
meaning build an additive model (i.e., no interaction terms). By default,
set to 2.</p>
</dd> </dl>



<h3>Generalized boosted regressions model (<strong>GBM</strong>) </h3>

<p>Uses the
<code>gbm</code> function from the package 'gbm'. You can set parameters by supplying <code>gbm.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="gbm.html#topic+gbm">gbm</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>distribution</dt><dd><p>character. Automatically detected from the format of the presence column in the occurrence dataset.</p>
</dd>
<dt>n.trees</dt><dd><p>integer. The total number of trees to fit. This is equivalent
to the number of iterations and the number of basis functions in the
additive expansion. By default, set to 2500.</p>
</dd>
<dt>n.minobsinnode</dt><dd><p>integer.
minimum number of observations in the trees terminal nodes. Note that this
is the actual number of observations, not the total weight. By default, set
to 1.</p>
</dd>
<dt>cv.folds</dt><dd><p>integer. Number of cross-validation folds to perform.
If cv.folds&gt;1 then gbm - in addition to the usual fit - will perform a
cross-validation. By default, set to 3.</p>
</dd>
<dt>shrinkage</dt><dd><p>numeric. A shrinkage parameter applied to each tree in the expansion (also known as learning rate or step-size reduction). By default, set to 0.001.</p>
</dd>
<dt>bag.fraction</dt><dd><p>numeric. Fraction of the training set observations randomly selected to propose the next tree in the expansion.</p>
</dd>
<dt>train.fraction</dt><dd><p>numeric. Training fraction used to fit the first gbm. The remainder is used to compute out-of-sample estimates of the loss function. By default, set to 1 (since evaluation/holdout is done with <code>SSDM::evaluate</code>.</p>
</dd>
<dt>n.cores</dt><dd><p>integer. Number of cores to use for parallel computation of the CV folds. By default, set to 1. If you intend to use this, please set <code>ncores=0</code> to avoid conflicts.</p>
</dd> </dl>



<h3>Classification tree analysis (<strong>CTA</strong>) </h3>

<p>Uses the <code>rpart</code>
function from the package 'rpart'. You can set parameters by supplying <code>cta.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="rpart.html#topic+rpart">rpart</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>control</dt><dd><p>list (created with <code><a href="rpart.html#topic+rpart.control">rpart.control</a></code>).
Contains parameters for controlling the rpart fit. The default is <code>rpart.control(minbucket=1, xval=3)</code>.
'mibucket' is an integer giving the minimum number of observations in any
terminal node. 'xval' is an integer defining the number of
cross-validations.</p>
</dd> </dl>



<h3>Random Forest (<strong>RF</strong>) </h3>

<p>Uses the <code>randomForest</code> function
from the package 'randomForest'. You can set parameters by supplying <code>cta.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="randomForest.html#topic+randomForest">randomForest</a></code> all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>ntree</dt><dd><p>integer. Number of trees to grow. This should not be set to a
too small number, to ensure that every input row gets predicted at least a
few times. By default, set to 2500.</p>
</dd>
<dt>nodesize</dt><dd><p>integer. Minimum size of terminal nodes. Setting this number larger causes smaller trees to be grown (and thus take less time). By default, set to 1.</p>
</dd> </dl>



<h3>Maximum Entropy (<strong>MAXENT</strong>) </h3>

<p>Uses the <code>maxent</code> function
from the package 'dismo'. Make sure that you have correctly installed the
maxent.jar file in the folder ~\R\library\version\dismo\java available
at <a href="https://biodiversityinformatics.amnh.org/open_source/maxent/">https://biodiversityinformatics.amnh.org/open_source/maxent/</a>. As with the other algorithms, you can set parameters by supplying <code>maxent.args=list(arg1=val1,arg2=val2)</code>. Mind that arguments are passed from dismo to the MAXENT software again as an argument list  (see <code><a href="dismo.html#topic+maxent">maxent</a></code> for more details).
No specific defaults are set with this method.
</p>


<h3>Artificial Neural Network (<strong>ANN</strong>) </h3>

<p>Uses the <code>nnet</code>
function from the package 'nnet'. You can set parameters by supplying <code>ann.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="nnet.html#topic+nnet">nnet</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>size</dt><dd><p>integer. Number of units in the hidden layer. By default, set to 6.</p>
</dd>
<dt>maxit</dt><dd><p>integer. Maximum number of iterations, default 500.</p>
</dd> </dl>



<h3>Support vector machines (<strong>SVM</strong>) </h3>

<p>Uses the <code>svm</code> function
from the package 'e1071'. You can set parameters by supplying <code>svm.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="e1071.html#topic+svm">svm</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>type</dt><dd><p>character. Regression/classification type SVM should be used with. By default, set to &quot;eps-regression&quot;.</p>
</dd>
<dt>epsilon</dt><dd><p>float. Epsilon parameter in the insensitive loss function, default 1e-08.</p>
</dd>
<dt>cross</dt><dd><p>integer. If an integer value k&gt;0 is specified, a k-fold
cross-validation on the training data is performed to assess the quality of
the model: the accuracy rate for classification and the Mean Squared Error
for regression. By default, set to 3.</p>
</dd>
<dt>kernel</dt><dd><p>character. The kernel used in training and predicting. By default, set to &quot;radial&quot;.</p>
</dd>
<dt>gamma</dt><dd><p>numeric. Parameter needed for all kernels, default <code>1/(length(data) -1)</code>.</p>
</dd> </dl>



<h3>Warning </h3>

<p>Depending on the raster object resolution the process can
be more or less time and memory consuming.
</p>


<h3>References</h3>

<p>M. Barbet-Massin, F. Jiguet, C. H.  Albert, &amp; W. Thuiller (2012)
&quot;Selecting pseudo-absences for species distribution models: how, where and
how many?&quot; <em>Methods Ecology and Evolution</em> 3:327-338
<a href="http://onlinelibrary.wiley.com/doi/10.1111/j.2041-210X.2011.00172.x/full">http://onlinelibrary.wiley.com/doi/10.1111/j.2041-210X.2011.00172.x/full</a>
</p>
<p>C. Liu, P. M. Berry, T. P. Dawson,  R. &amp; G. Pearson (2005) &quot;Selecting
thresholds of occurrence in the prediction of species distributions.&quot;
<em>Ecography</em> 28:85-393
<a href="http://www.researchgate.net/publication/230246974_Selecting_Thresholds_of_Occurrence_in_the_Prediction_of_Species_Distributions">http://www.researchgate.net/publication/230246974_Selecting_Thresholds_of_Occurrence_in_the_Prediction_of_Species_Distributions</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+modelling">modelling</a></code> to build SDMs with a single algorithm,
<code><a href="#topic+stack_modelling">stack_modelling</a></code> to build SSDMs.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Loading data
data(Env)
data(Occurrences)
Occurrences &lt;- subset(Occurrences, Occurrences$SPECIES == 'elliptica')

# ensemble SDM building
ESDM &lt;- ensemble_modelling(c('CTA', 'MARS'), Occurrences, Env, rep = 1,
                          Xcol = 'LONGITUDE', Ycol = 'LATITUDE',
                          ensemble.thresh = c(0.6))

# Results plotting
plot(ESDM)

## End(Not run)

</code></pre>

<hr>
<h2 id='Ensemble.SDM-class'>An S4 class to represent an ensemble SDM</h2><span id='topic+Ensemble.SDM-class'></span>

<h3>Description</h3>

<p>This is an S4 class to represent an ensemble SDM from multiple algorithms
(including generalized linear model, general additive model, multivariate
adaptive splines, generalized boosted regression model, classification tree
analysis, random forest, maximum entropy, artificial neural network, and
support vector machines). This S4 class is returned by
<code><a href="#topic+ensemble_modelling">ensemble_modelling</a></code> or <code><a href="#topic+ensemble">ensemble</a></code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>uncertainty</code></dt><dd><p>raster. Between-algorithm variance map.</p>
</dd>
<dt><code>algorithm.correlation</code></dt><dd><p>data frame. Between-algorithm correlation matrix.</p>
</dd>
<dt><code>algorithm.evaluation</code></dt><dd><p>data frame. Evaluation of the ensemble SDM (available</p>
</dd>
<dt><code>sdms</code></dt><dd><p>list. Individual SDMs used to create the ESDM.
metrics include AUC, Kappa, sensitivity, specificity and proportion of
correctly predicted occurrences) and identification of the optimal threshold
to convert the habitat suitability map into a binary presence/absence map.</p>
</dd>
</dl>


<h3>See Also</h3>

<p><a href="#topic+Algorithm.SDM-class">Algorithm.SDM</a> an S4 class to represent an SDM based on
a single algorithm, and <a href="#topic+Stacked.SDM-class">Stacked.SDM</a> an S4 class for SSDMs.
</p>

<hr>
<h2 id='Env'>A stack of three environmental variables</h2><span id='topic+Env'></span>

<h3>Description</h3>

<p>A stack of three 30 arcsec-resolution rasters covering the north part of the
main island of New Caledonia 'Grande Terre'. CRAINFALL and
TEMPERATURE rasters are climatic variables from the WorldClim database, and SUBSTRATE raster is from
the IRD Atlas of New Caledonia (2012) (see reference below).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Env
</code></pre>


<h3>Format</h3>

<p>A stack of three rasters: </p>
 <dl>
<dt>RAINFALL</dt><dd><p>Annual mean
rainfall (mm)</p>
</dd> <dt>TEMPERATURE</dt><dd><p>Annual mean temperature (x10 degree
Celsius)</p>
</dd> <dt>SUBSTRATE</dt><dd><p>Substrate type (categorical variable)</p>
</dd> </dl>



<h3>References</h3>

<p>R.J. Hijmans, C.H. &amp;  Graham (2006) &quot;The  ability  of climate
envelope  models  to  predict  the  effect  of  climate  change  on species
distributions.&quot; <em>Global Change Biology</em> 12:2272-2281
<a href="http://onlinelibrary.wiley.com/doi/10.1111/j.1365-2486.2006.01256.x/full">http://onlinelibrary.wiley.com/doi/10.1111/j.1365-2486.2006.01256.x/full</a>
</p>
<p>E. Fritsch (2012) &quot;Les sols. Atlas de la Nouvelle-Caledonie (ed. by J.
Bonvallot, J.-C. Gay and E. Habert)&quot; <em>IRD-Congres de la
Nouvelle-Caledonie, Marseille.</em> 73-76
</p>

<hr>
<h2 id='evaluate'>Evaluate</h2><span id='topic+evaluate'></span><span id='topic+evaluate+2CAlgorithm.SDM-method'></span><span id='topic+evaluate+2CMAXENT.SDM-method'></span><span id='topic+evaluate+2CStacked.SDM-method'></span>

<h3>Description</h3>

<p>Evaluation of SDM or ESDM habitat suitability predictions or evalaution of
SSDM floristic composition with Pottier et al, 2013 method (see reference
below)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>evaluate(obj, ...)

## S4 method for signature 'Algorithm.SDM'
evaluate(
  obj,
  cv,
  cv.param,
  final.fit.data = "all",
  bin.thresh = "SES",
  metric = NULL,
  thresh = 1001,
  Env,
  ...
)

## S4 method for signature 'MAXENT.SDM'
evaluate(
  obj,
  cv,
  cv.param,
  final.fit.data = "all",
  bin.thresh = "SES",
  metric = NULL,
  thresh = 1001,
  Env,
  ...
)

## S4 method for signature 'Stacked.SDM'
evaluate(obj, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="evaluate_+3A_obj">obj</code></td>
<td>
<p>Stacked.SDM. SSDM to evaluate</p>
</td></tr>
<tr><td><code id="evaluate_+3A_...">...</code></td>
<td>
<p>arguments for internal use (get_model), such as argument lists to be passed to the source functions (e.g. glm.args=list(test=&quot;AIC&quot;,singular.ok=FALSE))</p>
</td></tr>
<tr><td><code id="evaluate_+3A_cv">cv</code></td>
<td>
<p>character. Method of cross-validation used to evaluate the SDM (see
details below).</p>
</td></tr>
<tr><td><code id="evaluate_+3A_cv.param">cv.param</code></td>
<td>
<p>numeric. Parameters associated to the method of
cross-validation used to evaluate the SDM (see details below).</p>
</td></tr>
<tr><td><code id="evaluate_+3A_final.fit.data">final.fit.data</code></td>
<td>
<p>strategy used for fitting the final model to be returned: 'holdout'= use same train and test data as in (last) evaluation, 'all'= train model with all data (i.e. no test data) or numeric (0-1)= sample a custom training fraction (left out fraction is set aside as test data)</p>
</td></tr>
<tr><td><code id="evaluate_+3A_bin.thresh">bin.thresh</code></td>
<td>
<p>character. Classification threshold (<code><a href="dismo.html#topic+threshold">threshold</a></code>) used to binarize model predictions into presence/absence and compute the confusion matrix (including related scores such as TPR, TNR, omission rate, Kappa, etc.).</p>
</td></tr>
<tr><td><code id="evaluate_+3A_metric">metric</code></td>
<td>
<p>(deprecated) character. Classification threshold (<code>SDMTools::optim.thresh</code>) used to binarize model predictions into presence/absence and compute the confusion matrix (including related scores such as TPR, TNR, omission rate, Kappa, etc.).</p>
</td></tr>
<tr><td><code id="evaluate_+3A_thresh">thresh</code></td>
<td>
<p>(deprecated) integer. Number of equally spaced thresholds in the interval 0-1 (<code>SDMTools::optim.thresh</code>).</p>
</td></tr>
<tr><td><code id="evaluate_+3A_env">Env</code></td>
<td>
<p>raster object. Stacked raster object of environmental variables
(can be processed first by <code><a href="#topic+load_var">load_var</a></code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>SDM/ESDM/SSDM evaluation in a data.frame
</p>


<h3>References</h3>

<p>Pottier, J., Dubuis, A., Pellissier, L., Maiorano, L., Rossier,
L., Randin, C. F., Guisan, A. (2013). The .accuracy of plant assemblage
prediction from species distribution models varies along environmental
gradients. Global Ecology and Biogeography, 22(1), 52-63.
https://doi.org/10.1111/j.1466-8238.2012.00790.x
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# Loading data
data(Env)
data(Occurrences)
# SSDM building
SSDM &lt;- stack_modelling(c('CTA', 'SVM'), Occurrences, Env, rep = 1,
                       Xcol = 'LONGITUDE', Ycol = 'LATITUDE',
                       Spcol = 'SPECIES')

# Evaluation
evaluate(SSDM)


## End(Not run)

</code></pre>

<hr>
<h2 id='gui'>SSDM package Graphic User Interface</h2><span id='topic+gui'></span>

<h3>Description</h3>

<p>User interface of the SSDM package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gui(
  port = getOption("shiny.port"),
  host = getOption("shiny.host", "127.0.0.1"),
  working.directory = getwd()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gui_+3A_port">port</code></td>
<td>
<p>char. The TCP port that the application should listen on (see
<code><a href="shiny.html#topic+runApp">runApp</a></code> for more details).</p>
</td></tr>
<tr><td><code id="gui_+3A_host">host</code></td>
<td>
<p>char. The IPv4 address that the application should listen on (see
<code><a href="shiny.html#topic+runApp">runApp</a></code> for more details).</p>
</td></tr>
<tr><td><code id="gui_+3A_working.directory">working.directory</code></td>
<td>
<p>char. Directory in which the application will run.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If your environmental variables have an important size, you should
give enough memory to the interface with the (<code>maxmem</code> parameter).
Note that only one instance of gui can be run at a time.
</p>


<h3>Value</h3>

<p>Open a window with a shiny app to use the SSDM package with an
user-friendly interface.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
gui()

## End(Not run)

</code></pre>

<hr>
<h2 id='load_occ'>Load occurrence data</h2><span id='topic+load_occ'></span>

<h3>Description</h3>

<p>Load occurrence data from CSV file to perform <code><a href="#topic+modelling">modelling</a></code>,
<code><a href="#topic+ensemble_modelling">ensemble_modelling</a></code> or <code><a href="#topic+stack_modelling">stack_modelling</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_occ(
  path = getwd(),
  Env,
  file = NULL,
  ...,
  Xcol = "Longitude",
  Ycol = "Latitude",
  Spcol = NULL,
  GeoRes = TRUE,
  reso = max(res(Env@layers[[1]])),
  verbose = TRUE,
  GUI = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load_occ_+3A_path">path</code></td>
<td>
<p>character. Path to the directory that contains the occurrence table.</p>
</td></tr>
<tr><td><code id="load_occ_+3A_env">Env</code></td>
<td>
<p>raster stack. Environmental variables in the form of a raster stack used to
perform spatial thinning (can be the result of the
<code><a href="#topic+load_var">load_var</a></code> function).</p>
</td></tr>
<tr><td><code id="load_occ_+3A_file">file</code></td>
<td>
<p>character. File containing the occurrence table, if NULL
(default) the .csv file located in the path will be loaded.</p>
</td></tr>
<tr><td><code id="load_occ_+3A_...">...</code></td>
<td>
<p>additional parameters given to <code><a href="utils.html#topic+read.csv">read.csv</a></code>.</p>
</td></tr>
<tr><td><code id="load_occ_+3A_xcol">Xcol</code></td>
<td>
<p>character. Name of the Latitude or X coordinate variable.</p>
</td></tr>
<tr><td><code id="load_occ_+3A_ycol">Ycol</code></td>
<td>
<p>character. Name of the Longitude or Y coordinate variable.</p>
</td></tr>
<tr><td><code id="load_occ_+3A_spcol">Spcol</code></td>
<td>
<p>character. Name of the column containing species names or IDs.</p>
</td></tr>
<tr><td><code id="load_occ_+3A_geores">GeoRes</code></td>
<td>
<p>logical. If <code>TRUE</code>, performs geographical thinning on occurrences
to limit geographical biases in the SDMs.</p>
</td></tr>
<tr><td><code id="load_occ_+3A_reso">reso</code></td>
<td>
<p>numeric. Resolution used to perform the geographical thinning,
default is the resolution of <code>Env</code>.</p>
</td></tr>
<tr><td><code id="load_occ_+3A_verbose">verbose</code></td>
<td>
<p>logical. If <code>TRUE</code>, allows the function to print text in the
console.</p>
</td></tr>
<tr><td><code id="load_occ_+3A_gui">GUI</code></td>
<td>
<p>logical. Parameter reserved for graphical interface.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing the occurrence dataset (spatially thinned or
not).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+load_var">load_var</a></code> to load environmental variables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
load_occ(path = system.file('extdata',  package = 'SSDM'), Env,
         Xcol = 'LONGITUDE', Ycol = 'LATITUDE',
         file = 'Occurrences.csv', sep = ',')

## End(Not run)

</code></pre>

<hr>
<h2 id='load_var'>Load environmental variables</h2><span id='topic+load_var'></span>

<h3>Description</h3>

<p>Function to load environmental variables in the form of rasters to perform
<code><a href="#topic+modelling">modelling</a></code>, <code><a href="#topic+ensemble_modelling">ensemble_modelling</a></code> or
<code><a href="#topic+stack_modelling">stack_modelling</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_var(
  path = getwd(),
  files = NULL,
  format = c(".grd", ".tif", ".asc", ".sdat", ".rst", ".nc", ".envi", ".bil", ".img"),
  categorical = NULL,
  Norm = FALSE,
  tmp = TRUE,
  verbose = TRUE,
  GUI = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load_var_+3A_path">path</code></td>
<td>
<p>character. Path to the directory that contains the environmental variables
files.</p>
</td></tr>
<tr><td><code id="load_var_+3A_files">files</code></td>
<td>
<p>character. Files containing the environmental variables If NULL
(default) all files present in the path in the selected format will
be loaded.</p>
</td></tr>
<tr><td><code id="load_var_+3A_format">format</code></td>
<td>
<p>character. Format of environmental variables files
(including .grd, .tif, .asc, .sdat, .rst, .nc, .tif, .envi, .bil, .img).</p>
</td></tr>
<tr><td><code id="load_var_+3A_categorical">categorical</code></td>
<td>
<p>character. Specify environmental variables that are categorical.</p>
</td></tr>
<tr><td><code id="load_var_+3A_norm">Norm</code></td>
<td>
<p>logical. Default FALSE. If set to TRUE, normalizes environmental variables into a range between 0 and 1.</p>
</td></tr>
<tr><td><code id="load_var_+3A_tmp">tmp</code></td>
<td>
<p>logical. If set to TRUE, rasters are
read in temporary file avoiding to overload the random access memory. But
beware: if you close R, temporary files will be deleted.</p>
</td></tr>
<tr><td><code id="load_var_+3A_verbose">verbose</code></td>
<td>
<p>logical. If set to TRUE, allows the function to print text in the
console.</p>
</td></tr>
<tr><td><code id="load_var_+3A_gui">GUI</code></td>
<td>
<p>logical. Do not take that argument into account (parameter for the
user interface).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A stack containing the environmental rasters (normalized or
not).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+load_occ">load_occ</a></code> to load occurrences.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
load_var(system.file('extdata',  package = 'SSDM'))

## End(Not run)

</code></pre>

<hr>
<h2 id='load.model'>Load ensemble SDMs and SSDMs.</h2><span id='topic+load.model'></span><span id='topic+load_esdm'></span><span id='topic+load_stack'></span>

<h3>Description</h3>

<p>Load S4 <a href="#topic+Ensemble.SDM-class">Ensemble.SDM</a> and <a href="#topic+Stacked.SDM-class">Stacked.SDM</a>
objects saved with their respective save function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_esdm(name, path = getwd())

load_stack(name = "Stack", path = getwd(), GUI = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load.model_+3A_name">name</code></td>
<td>
<p>character. Name of the folder containing the model to be
loaded.</p>
</td></tr>
<tr><td><code id="load.model_+3A_path">path</code></td>
<td>
<p>character. Path to the directory containing the model to be
loaded, by default the path to the current directory.</p>
</td></tr>
<tr><td><code id="load.model_+3A_gui">GUI</code></td>
<td>
<p>logical. Do not take this argument into account (parameter for the
user interface).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The corresponding SDM object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+save.model">save.model</a></code>
</p>

<hr>
<h2 id='mapDiversity'>Map Diversity</h2><span id='topic+mapDiversity'></span><span id='topic+mapDiversity+2CStacked.SDM-method'></span>

<h3>Description</h3>

<p>Methods for Stacked.SDM or SSDM to map diversity and communities composition.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mapDiversity(obj, ...)

## S4 method for signature 'Stacked.SDM'
mapDiversity(obj, method, rep.B = 1000, verbose = TRUE, Env = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mapDiversity_+3A_obj">obj</code></td>
<td>
<p>Stacked.SDM. SSDM to map diversity with.</p>
</td></tr>
<tr><td><code id="mapDiversity_+3A_...">...</code></td>
<td>
<p>other arguments pass to the method.</p>
</td></tr>
<tr><td><code id="mapDiversity_+3A_method">method</code></td>
<td>
<p>character. Define the method used to create the local species
richness map (see details below).</p>
</td></tr>
<tr><td><code id="mapDiversity_+3A_rep.b">rep.B</code></td>
<td>
<p>integer. If the method used to create the local species richness
is the random Bernoulli (<strong>Bernoulli</strong>), rep.B parameter defines the number of
repetitions used to create binary maps for each species.</p>
</td></tr>
<tr><td><code id="mapDiversity_+3A_verbose">verbose</code></td>
<td>
<p>logical. If set to true, allows the function to print text in
the console.</p>
</td></tr>
<tr><td><code id="mapDiversity_+3A_env">Env</code></td>
<td>
<p>raster object. Stacked raster object of environmental variables
(can be processed first by <code><a href="#topic+load_var">load_var</a></code>). Needed only for stacking
method using probability ranking from richness (<strong>PRR</strong>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p><strong>Methods:</strong> Choice of the method used to compute the local
species richness map (see Calabrese et al. (2014) and D'Amen et al (2015) for
more informations, see reference below): </p>
<dl>
<dt>pSSDM</dt><dd><p>sum
probabilities of habitat suitability maps</p>
</dd><dt>Bernoulli</dt><dd><p>draw repeatedly
from a Bernoulli distribution</p>
</dd><dt>bSSDM</dt><dd><p>sum the binary map obtained with
the thresholding (depending on the metric of the
ESDM).</p>
</dd><dt>MaximumLikelihood</dt><dd><p>adjust species richness of the model by
linear regression</p>
</dd><dt>PRR.MEM</dt><dd><p>model richness with a macroecological model
(MEM) and adjust each ESDM binary map by ranking habitat suitability and
keeping as much as predicted richness of the MEM</p>
</dd><dt>PRR.pSSDM</dt><dd><p>model
richness with a pSSDM and adjust each ESDM binary map by ranking habitat
suitability and keeping as much as predicted richness of the pSSDM</p>
</dd></dl>



<h3>Value</h3>

<p>a list with a diversity map and eventually ESDMs for stacking method
using probability ranking from richness (<strong>PPR</strong>).
</p>


<h3>References</h3>

<p>M. D'Amen, A. Dubuis, R. F. Fernandes, J. Pottier, L. Pelissier, &amp;
A Guisan (2015) &quot;Using species richness and functional traits prediction to
constrain assemblage predicitions from stacked species distribution models&quot;
<em>Journal of Biogeography</em> 42(7):1255-1266
<a href="http://doc.rero.ch/record/235561/files/pel_usr.pdf">http://doc.rero.ch/record/235561/files/pel_usr.pdf</a>
</p>
<p>J.M. Calabrese, G. Certain, C.  Kraan, &amp; C.F. Dormann (2014) &quot;Stacking
species distribution  models  and  adjusting  bias  by linking them to
macroecological models.&quot; <em>Global Ecology and Biogeography</em> 23:99-112
<a href="https://onlinelibrary.wiley.com/doi/full/10.1111/geb.12102">https://onlinelibrary.wiley.com/doi/full/10.1111/geb.12102</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+stacking">stacking</a></code> to build SSDMs.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# Loading data
data(Env)
data(Occurrences)
# SSDM building
SSDM &lt;- stack_modelling(c('CTA', 'SVM'), Occurrences, Env, rep = 1,
                       Xcol = 'LONGITUDE', Ycol = 'LATITUDE',
                       Spcol = 'SPECIES')

# Diversity mapping
mapDiversity(SSDM, mathod = 'pSSDM')


## End(Not run)

</code></pre>

<hr>
<h2 id='modelling'>Build an SDM using a single algorithm</h2><span id='topic+modelling'></span>

<h3>Description</h3>

<p>This is a function to build an SDM with one algorithm for a single species.
The function takes as inputs an occurrence data frame made of presence/absence
or presence-only records and a raster object for data extraction and
projection. The function returns an S4 <a href="#topic+Algorithm.SDM-class">Algorithm.SDM</a> class
object containing the habitat suitability map, the binary map and the
evaluation table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modelling(
  algorithm,
  Occurrences,
  Env,
  Xcol = "Longitude",
  Ycol = "Latitude",
  Pcol = NULL,
  name = NULL,
  PA = NULL,
  cv = "holdout",
  cv.param = c(0.7, 2),
  final.fit.data = "all",
  bin.thresh = "SES",
  metric = NULL,
  thresh = 1001,
  axes.metric = "Pearson",
  select = FALSE,
  select.metric = c("AUC"),
  select.thresh = c(0.75),
  verbose = TRUE,
  GUI = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modelling_+3A_algorithm">algorithm</code></td>
<td>
<p>character. Choice of the algorithm to be run (see details
below).</p>
</td></tr>
<tr><td><code id="modelling_+3A_occurrences">Occurrences</code></td>
<td>
<p>data frame. Occurrence table (can be processed first by
<code><a href="#topic+load_occ">load_occ</a></code>).</p>
</td></tr>
<tr><td><code id="modelling_+3A_env">Env</code></td>
<td>
<p>raster object. Raster object of environmental variable (can be
processed first by <code><a href="#topic+load_var">load_var</a></code>).</p>
</td></tr>
<tr><td><code id="modelling_+3A_xcol">Xcol</code></td>
<td>
<p>character. Name of the column in the occurrence table containing
Latitude or X coordinates.</p>
</td></tr>
<tr><td><code id="modelling_+3A_ycol">Ycol</code></td>
<td>
<p>character. Name of the column in the occurrence table containing
Longitude or Y coordinates.</p>
</td></tr>
<tr><td><code id="modelling_+3A_pcol">Pcol</code></td>
<td>
<p>character. Name of the column in the occurrence table specifying
whether a line is a presence or an absence. A value of 1 is presence and
value of 0 is absence. If NULL presence-only dataset is assumed.</p>
</td></tr>
<tr><td><code id="modelling_+3A_name">name</code></td>
<td>
<p>character. Optional name given to the final SDM produced (by
default 'Algorithm.SDM').</p>
</td></tr>
<tr><td><code id="modelling_+3A_pa">PA</code></td>
<td>
<p>list(nb, strat) defining the pseudo-absence selection strategy used
in case of presence-only dataset. If PA is NULL, recommended PA selection
strategy is used depending on the algorithms (see details below).</p>
</td></tr>
<tr><td><code id="modelling_+3A_cv">cv</code></td>
<td>
<p>character. Method of cross-validation used to evaluate the SDM (see
details below).</p>
</td></tr>
<tr><td><code id="modelling_+3A_cv.param">cv.param</code></td>
<td>
<p>numeric. Parameters associated to the method of
cross-validation used to evaluate the SDM (see details below).</p>
</td></tr>
<tr><td><code id="modelling_+3A_final.fit.data">final.fit.data</code></td>
<td>
<p>strategy used for fitting the final model to be returned: 'holdout'= use same train and test data as in (last) evaluation, 'all'= train model with all data (i.e. no test data) or numeric (0-1)= sample a custom training fraction (left out fraction is set aside as test data)</p>
</td></tr>
<tr><td><code id="modelling_+3A_bin.thresh">bin.thresh</code></td>
<td>
<p>character. Classification threshold (<code><a href="dismo.html#topic+threshold">threshold</a></code>) used to binarize model predictions into presence/absence and compute the confusion matrix (see details below).</p>
</td></tr>
<tr><td><code id="modelling_+3A_metric">metric</code></td>
<td>
<p>(deprecated) character. Classification threshold (<code>SDMTools::optim.thresh</code>) used to binarize model predictions into presence/absence and compute the confusion matrix (see details below). This argument is only kept for backwards compatibility, if possible please use <code>bin.thresh</code> instead.</p>
</td></tr>
<tr><td><code id="modelling_+3A_thresh">thresh</code></td>
<td>
<p>(deprecated) integer. Number of equally spaced thresholds in the interval 0-1 (<code>SDMTools::optim.thresh</code>). Only needed when <code>metric</code> is set.</p>
</td></tr>
<tr><td><code id="modelling_+3A_axes.metric">axes.metric</code></td>
<td>
<p>Metric used to evaluate variable relative importance (see
details below).</p>
</td></tr>
<tr><td><code id="modelling_+3A_select">select</code></td>
<td>
<p>logical. If set to true, models are evaluated before being
projected, and not kept if they don't meet selection criteria (see details
below).</p>
</td></tr>
<tr><td><code id="modelling_+3A_select.metric">select.metric</code></td>
<td>
<p>character. Metric(s) used to pre-select SDMs that reach a
sufficient quality (see details below).</p>
</td></tr>
<tr><td><code id="modelling_+3A_select.thresh">select.thresh</code></td>
<td>
<p>numeric. Threshold(s) associated with the metric(s) used
to compute the selection.</p>
</td></tr>
<tr><td><code id="modelling_+3A_verbose">verbose</code></td>
<td>
<p>logical. If set to true, allows the function to print text in
the console.</p>
</td></tr>
<tr><td><code id="modelling_+3A_gui">GUI</code></td>
<td>
<p>logical. Don't take that argument into account (parameter for the
user interface).</p>
</td></tr>
<tr><td><code id="modelling_+3A_...">...</code></td>
<td>
<p>additional parameters, e.g. argument lists for the source algorithm modelling functions (see details below).</p>
</td></tr>
</table>


<h3>Details</h3>

 <dl>
<dt>algorithm</dt><dd><p>'all' allows to call directly all
available algorithms. Currently, available algorithms include Generalized
linear model (<strong>GLM</strong>), Generalized additive model (<strong>GAM</strong>),
Multivariate adaptive regression splines (<strong>MARS</strong>), Generalized
boosted regressions model (<strong>GBM</strong>), Classification tree analysis
(<strong>CTA</strong>), Random forest (<strong>RF</strong>), Maximum entropy
(<strong>MAXENT</strong>), Artificial neural network (<strong>ANN</strong>), and Support
vector machines (<strong>SVM</strong>). Each algorithm has its own parameters
settable with the <strong>...</strong> by supplying argument lists (see each algorithm section below to set
their parameters).</p>
</dd> <dt>'PA'</dt><dd><p>list with two values: <strong>nb</strong> number of
pseudo-absences selected, and <strong>strat</strong> strategy used to select
pseudo-absences: either random selection or disk selection. We set default
recommendation from Barbet-Massin et al. (2012) (see reference).</p>
</dd>
<dt>cv</dt><dd><p><strong>Cross-validation</strong> method used to split the occurrence
dataset used for evaluation: <strong>holdout</strong> data are partitioned into a
training set and an evaluation set using a fraction (<em>cv.param[1]</em>) and
the operation can be repeated (<em>cv.param[2]</em>) times, <strong>k-fold</strong>
data are partitioned into k (<em>cv.param[1]</em>) folds being k-1 times in
the training set and once the evaluation set and the operation can be
repeated (<em>cv.param[2]</em>) times, <strong>LOO</strong> (Leave One Out) each point
is successively taken as evaluation data.</p>
</dd> <dt>bin.thresh</dt><dd><p>Choice of the
metric used to binarize model predictions and compute the confusion matrix (by default SES as recommended by Liu et al. (2005), see reference below):
<strong>Kappa</strong> maximizes the Kappa, <strong>NOM</strong> highest threshold without omission, <strong>TSS</strong> (True Skill Statistic)
maximizes the sum of sensitivity and specificity, <strong>SES</strong> uses the
sensitivity-specificity equality, <strong>EP</strong> threshold where modeled prevalence is closest to observed prevalence.</p>
</dd><dt>metric (deprecated)</dt><dd><p>Choice of the
metric used to compute the binary map threshold and the confusion matrix (by
default SES as recommended by Liu et al. (2005), see reference below):
<strong>Kappa</strong> maximizes the Kappa, <strong>CCR</strong> maximizes the proportion of
correctly predicted observations, <strong>TSS</strong> (True Skill Statistic)
maximizes the sum of sensitivity and specificity, <strong>SES</strong> uses the
sensitivity-specificity equality, <strong>LW</strong> uses the lowest occurrence
prediction probability, <strong>ROC</strong> minimizes the distance between the ROC
plot (receiving operating curve) and the upper left corner
(1,1).</p>
</dd><dt>axes.metric</dt><dd><p>Choice of the metric used to evaluate the variable
relative importance (difference between a full model and one with each
variable successively omitted): <strong>Pearson</strong> (computes a simple
Pearson's correlation <em>r</em> between predictions of the full model and the
one without a variable, and returns the score <em>1-r</em>: the highest the
value, the more influence the variable has on the model), <strong>AUC</strong>,
<strong>Kappa</strong>, <strong>sensitivity</strong>, <strong>specificity</strong>, and
<strong>prop.correct</strong> (proportion of correctly predicted occurrences).</p>
</dd>
<dt>select.metric</dt><dd><p>Selection metric(s) used to select SDMs: <strong>AUC</strong>,
<strong>Kappa</strong>, <strong>sensitivity</strong>, <strong>specificity</strong>, and
<strong>prop.correct</strong> (proportion of correctly predicted occurrences), <strong>calibration</strong> (calibration statistic as used by Naimi &amp; Araujo 2016).</p>
</dd>
<dt>'...'</dt><dd><p>See algorithm in detail section</p>
</dd> </dl>



<h3>Value</h3>

<p>an S4 <a href="#topic+Algorithm.SDM-class">Algorithm.SDM</a> Class object viewable with the
<code><a href="#topic+plot.model">plot.model</a></code> method.
</p>


<h3>Generalized linear model (<strong>GLM</strong>) </h3>

<p>Uses the <code>glm</code>
function from the package 'stats'. You can set parameters by supplying <code>glm.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="stats.html#topic+glm">glm</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>test</dt><dd><p>character. Test used to evaluate the SDM, default 'AIC'.</p>
</dd>
<dt>control</dt><dd><p>list (created with <code><a href="stats.html#topic+glm.control">glm.control</a></code>).
Contains parameters for controlling the fitting process. Default is <code>glm.control(epsilon = 1e-08, maxit = 500)</code>.
'epsilon' is a numeric and defines the positive convergence tolerance (eps).
'maxit' is an integer giving the maximal number of IWLS (Iterative Weighted Last Squares) iterations.</p>
</dd> </dl>



<h3>Generalized additive model (<strong>GAM</strong>) </h3>

<p>Uses the <code>gam</code>
function from the package 'mgcv'. You can set parameters by supplying <code>gam.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="mgcv.html#topic+gam">gam</a></code> for all settable arguments).
The following parameters have defaults: </p>
<dl>
<dt>test</dt><dd><p>character.
Test used to evaluate the model, default 'AIC'.</p>
</dd> <dt>control</dt><dd><p>list (created with <code><a href="mgcv.html#topic+gam.control">gam.control</a></code>).
Contains parameters for controlling the fitting process. Default is <code>gam.control(epsilon = 1e-08, maxit = 500)</code>.
'epsilon' is a numeric used for judging the conversion of the GLM IRLS (Iteratively Reweighted Least Squares) loop. 'maxit' is an integer giving the maximum number of IRLS iterations to perform.</p>
</dd> </dl>



<h3>Multivariate adaptive regression splines (<strong>MARS</strong>) </h3>

<p>Uses the
<code>earth</code> function from the package 'earth'. You can set parameters by supplying <code>mars.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="earth.html#topic+earth">earth</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>degree</dt><dd><p>integer. Maximum degree of interaction (Friedman's mi) ; 1
meaning build an additive model (i.e., no interaction terms). By default,
set to 2.</p>
</dd> </dl>



<h3>Generalized boosted regressions model (<strong>GBM</strong>) </h3>

<p>Uses the
<code>gbm</code> function from the package 'gbm'. You can set parameters by supplying <code>gbm.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="gbm.html#topic+gbm">gbm</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>distribution</dt><dd><p>character. Automatically detected from the format of the presence column in the occurrence dataset.</p>
</dd>
<dt>n.trees</dt><dd><p>integer. The total number of trees to fit. This is equivalent
to the number of iterations and the number of basis functions in the
additive expansion. By default, set to 2500.</p>
</dd>
<dt>n.minobsinnode</dt><dd><p>integer.
minimum number of observations in the trees terminal nodes. Note that this
is the actual number of observations, not the total weight. By default, set
to 1.</p>
</dd>
<dt>cv.folds</dt><dd><p>integer. Number of cross-validation folds to perform.
If cv.folds&gt;1 then gbm - in addition to the usual fit - will perform a
cross-validation. By default, set to 3.</p>
</dd>
<dt>shrinkage</dt><dd><p>numeric. A shrinkage parameter applied to each tree in the expansion (also known as learning rate or step-size reduction). By default, set to 0.001.</p>
</dd>
<dt>bag.fraction</dt><dd><p>numeric. Fraction of the training set observations randomly selected to propose the next tree in the expansion.</p>
</dd>
<dt>train.fraction</dt><dd><p>numeric. Training fraction used to fit the first gbm. The remainder is used to compute out-of-sample estimates of the loss function. By default, set to 1 (since evaluation/holdout is done with <code>SSDM::evaluate</code>.</p>
</dd>
<dt>n.cores</dt><dd><p>integer. Number of cores to use for parallel computation of the CV folds. By default, set to 1. If you intend to use this, please set <code>ncores=0</code> to avoid conflicts.</p>
</dd> </dl>



<h3>Classification tree analysis (<strong>CTA</strong>) </h3>

<p>Uses the <code>rpart</code>
function from the package 'rpart'. You can set parameters by supplying <code>cta.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="rpart.html#topic+rpart">rpart</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>control</dt><dd><p>list (created with <code><a href="rpart.html#topic+rpart.control">rpart.control</a></code>).
Contains parameters for controlling the rpart fit. The default is <code>rpart.control(minbucket=1, xval=3)</code>.
'mibucket' is an integer giving the minimum number of observations in any
terminal node. 'xval' is an integer defining the number of
cross-validations.</p>
</dd> </dl>



<h3>Random Forest (<strong>RF</strong>) </h3>

<p>Uses the <code>randomForest</code> function
from the package 'randomForest'. You can set parameters by supplying <code>cta.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="randomForest.html#topic+randomForest">randomForest</a></code> all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>ntree</dt><dd><p>integer. Number of trees to grow. This should not be set to a
too small number, to ensure that every input row gets predicted at least a
few times. By default, set to 2500.</p>
</dd>
<dt>nodesize</dt><dd><p>integer. Minimum size of terminal nodes. Setting this number larger causes smaller trees to be grown (and thus take less time). By default, set to 1.</p>
</dd> </dl>



<h3>Maximum Entropy (<strong>MAXENT</strong>) </h3>

<p>Uses the <code>maxent</code> function
from the package 'dismo'. Make sure that you have correctly installed the
maxent.jar file in the folder ~\R\library\version\dismo\java available
at <a href="https://biodiversityinformatics.amnh.org/open_source/maxent/">https://biodiversityinformatics.amnh.org/open_source/maxent/</a>. As with the other algorithms, you can set parameters by supplying <code>maxent.args=list(arg1=val1,arg2=val2)</code>. Mind that arguments are passed from dismo to the MAXENT software again as an argument list  (see <code><a href="dismo.html#topic+maxent">maxent</a></code> for more details).
No specific defaults are set with this method.
</p>


<h3>Artificial Neural Network (<strong>ANN</strong>) </h3>

<p>Uses the <code>nnet</code>
function from the package 'nnet'. You can set parameters by supplying <code>ann.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="nnet.html#topic+nnet">nnet</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>size</dt><dd><p>integer. Number of units in the hidden layer. By default, set to 6.</p>
</dd>
<dt>maxit</dt><dd><p>integer. Maximum number of iterations, default 500.</p>
</dd> </dl>



<h3>Support vector machines (<strong>SVM</strong>) </h3>

<p>Uses the <code>svm</code> function
from the package 'e1071'. You can set parameters by supplying <code>svm.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="e1071.html#topic+svm">svm</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>type</dt><dd><p>character. Regression/classification type SVM should be used with. By default, set to &quot;eps-regression&quot;.</p>
</dd>
<dt>epsilon</dt><dd><p>float. Epsilon parameter in the insensitive loss function, default 1e-08.</p>
</dd>
<dt>cross</dt><dd><p>integer. If an integer value k&gt;0 is specified, a k-fold
cross-validation on the training data is performed to assess the quality of
the model: the accuracy rate for classification and the Mean Squared Error
for regression. By default, set to 3.</p>
</dd>
<dt>kernel</dt><dd><p>character. The kernel used in training and predicting. By default, set to &quot;radial&quot;.</p>
</dd>
<dt>gamma</dt><dd><p>numeric. Parameter needed for all kernels, default <code>1/(length(data) -1)</code>.</p>
</dd> </dl>



<h3>Warning </h3>

<p>Depending on the raster object resolution the process can
be more or less time and memory consuming.
</p>


<h3>References</h3>

<p>M. Barbet-Massin, F. Jiguet, C. H.  Albert, &amp; W. Thuiller (2012)
'Selecting pseudo-absences for species distribution models: how, where and
how many?' <em>Methods Ecology and Evolution</em> 3:327-338
<a href="http://onlinelibrary.wiley.com/doi/10.1111/j.2041-210X.2011.00172.x/full">http://onlinelibrary.wiley.com/doi/10.1111/j.2041-210X.2011.00172.x/full</a>
</p>
<p>C. Liu, P. M. Berry, T. P. Dawson,  R. &amp; G. Pearson (2005) 'Selecting
thresholds of occurrence in the prediction of species distributions.'
<em>Ecography</em> 28:85-393
<a href="http://www.researchgate.net/publication/230246974_Selecting_Thresholds_of_Occurrence_in_the_Prediction_of_Species_Distributions">http://www.researchgate.net/publication/230246974_Selecting_Thresholds_of_Occurrence_in_the_Prediction_of_Species_Distributions</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ensemble_modelling">ensemble_modelling</a></code> to build ensemble SDMs,
<code><a href="#topic+stack_modelling">stack_modelling</a></code> to build SSDMs.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Loading data
data(Env)
data(Occurrences)
Occurrences &lt;- subset(Occurrences, Occurrences$SPECIES == 'elliptica')

# SDM building
SDM &lt;- modelling('GLM', Occurrences, Env, Xcol = 'LONGITUDE', Ycol = 'LATITUDE')

# Results plotting
## Not run: 
plot(SDM)

## End(Not run)


</code></pre>

<hr>
<h2 id='Occurrences'>Plant occurrences data frame</h2><span id='topic+Occurrences'></span>

<h3>Description</h3>

<p>A dataset containing plant occurrences of five Cryptocarya species
native to New Caledonia. Occurrence data come from  the Noumea Herbarium
(NOU) and NC-PIPPN network (see Ibanez et al (2014) in reference below).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Occurrences
</code></pre>


<h3>Format</h3>

<p>A data frame with 57 rows and 3 variables: </p>

<dl>
<dt>SPECIES</dt><dd><p>Species of the occurrence</p>
</dd> <dt>LONGITUDE</dt><dd><p>Longitude of the
occurrence</p>
</dd> <dt>LATITUDE</dt><dd><p>Latitude of the occurrence</p>
</dd> </dl>



<h3>References</h3>

<p>T. Ibanez, J. Munzinger, G. Dagostini, V. Hequet, F. Rigault, T.
Jaffre, &amp; P. Birnbaum (2014) &quot;Structural and floristic characteristics of
mixed rainforest in New Caledonia: new data from the New Caledonian Plant
Inventory and Permanent Plot Network (NC-PIPPN).&quot; <em>Applied Vegetation
Science</em> 17:386-397
</p>
<p><a href="http://www.researchgate.net/profile/Jerome_Munzinger/publication/258499017_Structural_and_floristic_diversity_of_mixed_tropical_rain_forest_in_New_Caledonia_new_data_from_the_New_Caledonian_Plant_Inventory_and_Permanent_Plot_Network_%28NC-PIPPN%29/links/0deec52b8b1996488e000000.pdf">http://www.researchgate.net/profile/Jerome_Munzinger/publication/258499017_Structural_and_floristic_diversity_of_mixed_tropical_rain_forest_in_New_Caledonia_new_data_from_the_New_Caledonian_Plant_Inventory_and_Permanent_Plot_Network_%28NC-PIPPN%29/links/0deec52b8b1996488e000000.pdf</a>
</p>

<hr>
<h2 id='plot.model'>Plot SDMs, ensemble SDMs, and SSDMs</h2><span id='topic+plot.model'></span><span id='topic+plot+2CStacked.SDM+2CANY-method'></span><span id='topic+plot+2CSDM+2CANY-method'></span>

<h3>Description</h3>

<p>Allows to plot S4 <a href="#topic+Algorithm.SDM-class">Algorithm.SDM</a>, <a href="#topic+Ensemble.SDM-class">Ensemble.SDM</a> and
<a href="#topic+Stacked.SDM-class">Stacked.SDM</a> class objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'Stacked.SDM,ANY'
plot(x, y, ...)

## S4 method for signature 'SDM,ANY'
plot(x, y, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.model_+3A_x">x</code></td>
<td>
<p>Object to be plotted (S4 Algorithm.SDM, Ensemble.SDM or Stacked.SDM
object).</p>
</td></tr>
<tr><td><code id="plot.model_+3A_y">y</code>, <code id="plot.model_+3A_...">...</code></td>
<td>
<p>Plot-based parameter not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Open a window with a shiny app rendering all the results (habitat
suitability map, binary map, evaluation table, variable importance and/or
between-algorithm variance map, and/or algorithm evaluation,  and/or
algorithm correlation matrix and/or local species richness map) in a
user-friendly interface.
</p>

<hr>
<h2 id='project'>Project model into environment</h2><span id='topic+project'></span><span id='topic+project+2CAlgorithm.SDM-method'></span><span id='topic+project+2CMAXENT.SDM-method'></span><span id='topic+project+2CEnsemble.SDM-method'></span><span id='topic+project+2CStacked.SDM-method'></span>

<h3>Description</h3>

<p>This is a collection of methods to project SDMs, ESDMs or SSDMs into the supplied environment. The function is used internally to calculate the input for the projection slot of .SDM classes but can also be used to project existing .SDM objects (see Details).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>project(obj, Env, ...)

## S4 method for signature 'Algorithm.SDM'
project(obj, Env, output.format = "model", ...)

## S4 method for signature 'MAXENT.SDM'
project(obj, Env, output.format = "model", ...)

## S4 method for signature 'Ensemble.SDM'
project(
  obj,
  Env,
  uncertainty = TRUE,
  output.format = "model",
  SDM.projections = FALSE,
  cores = 0,
  minimal.memory = FALSE,
  tmp = FALSE,
  ...
)

## S4 method for signature 'Stacked.SDM'
project(
  obj,
  Env,
  method = NULL,
  uncertainty = TRUE,
  output.format = "model",
  SDM.projections = FALSE,
  cores = 0,
  minimal.memory = FALSE,
  tmp = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="project_+3A_obj">obj</code></td>
<td>
<p>Object of class Algorithm.SDM, Ensemble.SDM or Stacked.SDM. Model(s) to be projected.</p>
</td></tr>
<tr><td><code id="project_+3A_env">Env</code></td>
<td>
<p>Raster stack. Updated environmental rasters to be used for projection.</p>
</td></tr>
<tr><td><code id="project_+3A_...">...</code></td>
<td>
<p>arguments for internal use (get_model), such as argument lists to be passed to the source functions (e.g. glm.args=list(test=&quot;AIC&quot;,singular.ok=FALSE)). See <code><a href="#topic+modelling">modelling</a></code>, algorithm section for more details.</p>
</td></tr>
<tr><td><code id="project_+3A_output.format">output.format</code></td>
<td>
<p>character. If 'model' (default), the original .SDM object will be returned with updated projection slots. If 'rasters', the projected rasters will be returned as a list of rasters.</p>
</td></tr>
<tr><td><code id="project_+3A_uncertainty">uncertainty</code></td>
<td>
<p>logical. If set to TRUE, generates an uncertainty map. If output.format is 'model' an algorithm correlation matrix is additionally returned.</p>
</td></tr>
<tr><td><code id="project_+3A_sdm.projections">SDM.projections</code></td>
<td>
<p>logical. If FALSE (default), the projections of the Algorithm.SDMs will not be returned (only applies to Ensemble.SDMs and Stack.SDMs).</p>
</td></tr>
<tr><td><code id="project_+3A_cores">cores</code></td>
<td>
<p>integer. Specify the number of CPU cores used to do the
computing. You can use <code><a href="parallel.html#topic+detectCores">detectCores</a></code>) to automatically
use all the available CPU cores.</p>
</td></tr>
<tr><td><code id="project_+3A_minimal.memory">minimal.memory</code></td>
<td>
<p>logical. Only relevant if cores &gt;1. If TRUE, only one model will be sent to each worker at a time, reducing used working memory.</p>
</td></tr>
<tr><td><code id="project_+3A_tmp">tmp</code></td>
<td>
<p>logical or character. If FALSE, no temporary rasters are written. If TRUE, temporary rasters are written to the „tmp“ directory of your R environment. If character, temporary rasters are written to a custom path. Very useful to reduce working memory consumption (use together with minimal.memory=TRUE for maximal effect).
But beware: Depending on number, resolution and extent of models, temporary files can take a lot of disk space.</p>
</td></tr>
<tr><td><code id="project_+3A_method">method</code></td>
<td>
<p>character. Define the method used to create the local species
richness map (for details see <code><a href="#topic+stack_modelling">stack_modelling</a></code>). If NULL (default), the method used for building the SSDM is used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function uses any S4 .SDM class object and a raster stack of environmental layers of the variables the model was trained with.
</p>


<h3>Value</h3>

<p>Either returns the original .SDM object with updated projection slots (default) or if output.format = 'rasters' only returns the projections as Raster* objects or a list thereof.
</p>

<hr>
<h2 id='save.model'>Save ensemble SDMs and SSDMs</h2><span id='topic+save.model'></span><span id='topic+save.esdm'></span><span id='topic+save.esdm+2CEnsemble.SDM-method'></span><span id='topic+save.stack'></span><span id='topic+save.stack+2CStacked.SDM-method'></span>

<h3>Description</h3>

<p>Allows to save S4 <a href="#topic+Ensemble.SDM-class">Ensemble.SDM</a> and <a href="#topic+Stacked.SDM-class">Stacked.SDM</a>
class objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>save.esdm(
  esdm,
  name = strsplit(esdm@name, ".", fixed = TRUE)[[1]][1],
  path = getwd(),
  verbose = TRUE,
  GUI = FALSE
)

## S4 method for signature 'Ensemble.SDM'
save.esdm(
  esdm,
  name = strsplit(esdm@name, ".Ensemble.SDM", fixed = TRUE)[[1]][1],
  path = getwd(),
  verbose = TRUE,
  GUI = FALSE
)

save.stack(stack, name = "Stack", path = getwd(), verbose = TRUE, GUI = FALSE)

## S4 method for signature 'Stacked.SDM'
save.stack(stack, name = "Stack", path = getwd(), verbose = TRUE, GUI = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="save.model_+3A_esdm">esdm</code></td>
<td>
<p>Ensemble.SDM. Ensemble SDM to be saved.</p>
</td></tr>
<tr><td><code id="save.model_+3A_name">name</code></td>
<td>
<p>character. Folder name of the model to save.</p>
</td></tr>
<tr><td><code id="save.model_+3A_path">path</code></td>
<td>
<p>character. Path to the directory chosen to save the SDM,
by default the path to the current directory.</p>
</td></tr>
<tr><td><code id="save.model_+3A_verbose">verbose</code></td>
<td>
<p>logical. If set to true, allows the function to print text in the
console.</p>
</td></tr>
<tr><td><code id="save.model_+3A_gui">GUI</code></td>
<td>
<p>logical. Don't take that argument into account (parameter for the
user interface).</p>
</td></tr>
<tr><td><code id="save.model_+3A_stack">stack</code></td>
<td>
<p>Stacked.SDM. SSDM to be saved.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing in R environment. Creates folders, tables and rasters
associated to the SDM. Tables are in .csv and rasters in .grd/.gri.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+load.model">load.model</a></code>
</p>

<hr>
<h2 id='SSDM'>SSDM: Stacked species distribution modelling</h2><span id='topic+SSDM'></span>

<h3>Description</h3>

<p>SSDM is a package to map species richness and endemism based on Stacked Species Distribution Models (SSDM). It provides tools to build
SDM, i.e. a single species fitted with a single algorithm, Ensemble SDM (ESDM), i.e. a single species fitted with multiple algorithms,
SSDM several species with one or more algorithms. The package includes numerous modelling algorithms, and specifiable ensemble aggregating and stacking methods.
This package also provides tools to evaluate and explore models such as variable importance, algorithm accuracy, and between-algorithm
correlation, and tools to map results such as habitat suitability maps, binary maps, between-algorithm variance maps.
For ease of use, the SSDM package provides a user-friendly graphical interface (<code><a href="#topic+gui">gui</a></code>).
</p>


<h3>Details</h3>

<p>The SSDM package provides five categories of functions (that you can find in details
below): Data preparation, Modelling main functions, Model main methods, Model
classes, and Miscellaneous.
</p>


<h3>Data preparation</h3>

<dl>
<dt><code><a href="#topic+load_occ">load_occ</a></code></dt><dd><p>Load
occurrence data</p>
</dd> <dt><code><a href="#topic+load_var">load_var</a></code></dt><dd><p>Load environmental variables</p>
</dd></dl>



<h3>Modelling main  functions</h3>


<dl>
<dt><code><a href="#topic+modelling">modelling</a></code></dt><dd><p>Build an SDM using a single algorithm</p>
</dd>
<dt><code><a href="#topic+ensemble_modelling">ensemble_modelling</a></code></dt><dd><p>Build an SDM that assembles
multiple algorithms</p>
</dd> <dt><code><a href="#topic+stack_modelling">stack_modelling</a></code></dt><dd><p>Build an SSDMs
that assembles multiple algorithms and species</p>
</dd></dl>



<h3>Model main methods</h3>


<dl>
<dt><code><a href="#topic+ensemble+2CAlgorithm.SDM-method">ensemble,Algorithm.SDM-method</a></code></dt><dd><p>Build an ensemble SDM</p>
</dd>
<dt><code><a href="#topic+stacking+2CEnsemble.SDM-method">stacking,Ensemble.SDM-method</a></code></dt><dd><p>Build an SSDM</p>
</dd>
<dt><code><a href="#topic+update+2CStacked.SDM-method">update,Stacked.SDM-method</a></code></dt><dd><p>Update a previous SSDM with
new occurrence data</p>
</dd></dl>



<h3>Model classes</h3>


<dl>
<dt><code><a href="#topic+Algorithm.SDM-class">Algorithm.SDM</a></code></dt><dd><p>S4 class to represent SDMs</p>
</dd>
<dt><code><a href="#topic+Ensemble.SDM-class">Ensemble.SDM</a></code></dt><dd><p>S4 class to represent ensemble
SDMs</p>
</dd> <dt><code><a href="#topic+Stacked.SDM-class">Stacked.SDM</a></code></dt><dd><p>S4 class to represent SSDMs</p>
</dd></dl>



<h3>Miscellaneous</h3>

 <dl>
<dt><code><a href="#topic+gui">gui</a></code></dt><dd><p>User-friendly
interface for SSDM package</p>
</dd> <dt><code><a href="#topic+plot.model">plot.model</a></code></dt><dd><p>Plot SDMs</p>
</dd>
<dt><code><a href="#topic+save.model">save.model</a></code></dt><dd><p>Save SDMs</p>
</dd>
<dt><code><a href="#topic+load.model">load.model</a></code></dt><dd><p>Load SDMs</p>
</dd></dl>


<hr>
<h2 id='stack_modelling'>Build an SSDM that assembles multiple algorithms and species.</h2><span id='topic+stack_modelling'></span>

<h3>Description</h3>

<p>This is a function to build an SSDM that assembles multiple algorithm and
species. The function takes as inputs an occurrence data frame made of
presence/absence or presence-only records and a raster object for data
extraction and projection. The function returns an S4
<a href="#topic+Stacked.SDM-class">Stacked.SDM</a> class object containing the local species richness
map, the between-algorithm variance map, and all evaluation tables coming with
(model evaluation, algorithm evaluation, algorithm correlation matrix and
variable importance), and a list of ensemble SDMs for each species (see
<code><a href="#topic+ensemble_modelling">ensemble_modelling</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stack_modelling(
  algorithms,
  Occurrences,
  Env,
  Xcol = "Longitude",
  Ycol = "Latitude",
  Pcol = NULL,
  Spcol = "SpeciesID",
  rep = 10,
  name = NULL,
  save = FALSE,
  path = getwd(),
  PA = NULL,
  cv = "holdout",
  cv.param = c(0.7, 1),
  final.fit.data = "all",
  bin.thresh = "SES",
  metric = NULL,
  thresh = 1001,
  axes.metric = "Pearson",
  uncertainty = TRUE,
  tmp = FALSE,
  SDM.projections = FALSE,
  ensemble.metric = c("AUC"),
  ensemble.thresh = c(0.75),
  weight = TRUE,
  method = "pSSDM",
  rep.B = 1000,
  range = NULL,
  endemism = c("WEI", "Binary"),
  verbose = TRUE,
  GUI = FALSE,
  cores = 0,
  parmode = "species",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stack_modelling_+3A_algorithms">algorithms</code></td>
<td>
<p>character. Choice of the algorithm(s) to be run (see details
below).</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_occurrences">Occurrences</code></td>
<td>
<p>data frame. Occurrence table (can be processed first by
<code><a href="#topic+load_occ">load_occ</a></code>).</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_env">Env</code></td>
<td>
<p>raster object. Raster object of environmental variables (can be
processed first by <code><a href="#topic+load_var">load_var</a></code>).</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_xcol">Xcol</code></td>
<td>
<p>character. Name of the column in the occurrence table containing
Latitude or X coordinates.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_ycol">Ycol</code></td>
<td>
<p>character. Name of the column in the occurrence table containing
Longitude or Y coordinates.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_pcol">Pcol</code></td>
<td>
<p>character. Name of the column in the occurrence table specifying
whether a line is a presence or an absence. A value of 1 is presence and
value of 0 is absence. If NULL presence-only dataset is assumed.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_spcol">Spcol</code></td>
<td>
<p>character. Name of the column containing species names or IDs.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_rep">rep</code></td>
<td>
<p>integer. Number of repetitions for each algorithm.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_name">name</code></td>
<td>
<p>character. Optional name given to the final Ensemble.SDM produced.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_save">save</code></td>
<td>
<p>logical. If set to true, the SSDM is automatically saved.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_path">path</code></td>
<td>
<p>character. If save is true, the path to the directory in which the
ensemble SDM will be saved.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_pa">PA</code></td>
<td>
<p>list(nb, strat) defining the pseudo-absence selection strategy used
in case of presence-only dataset. If PA is NULL, recommended PA selection
strategy is used depending on the algorithm (see details below).</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_cv">cv</code></td>
<td>
<p>character. Method of cross-validation used to evaluate the ensemble
SDM (see details below).</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_cv.param">cv.param</code></td>
<td>
<p>numeric. Parameters associated with the method of
cross-validation used to evaluate the ensemble SDM (see details below).</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_final.fit.data">final.fit.data</code></td>
<td>
<p>strategy used for fitting the final/evaluated Algorithm.SDMs: 'holdout'= use same train and test data as in (last) evaluation, 'all'= train model with all data (i.e. no test data) or numeric (0-1)= sample a custom training fraction (left out fraction is set aside as test data)</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_bin.thresh">bin.thresh</code></td>
<td>
<p>character. Classification threshold (<code><a href="dismo.html#topic+threshold">threshold</a></code>) used to binarize model predictions into presence/absence and compute the confusion matrix (see details below).</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_metric">metric</code></td>
<td>
<p>(deprecated) character. Classification threshold (<code>SDMTools::optim.thresh</code>) used to binarize model predictions into presence/absence and compute the confusion matrix (see details below). This argument is only kept for backwards compatibility, if possible please use <code>bin.thresh</code> instead.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_thresh">thresh</code></td>
<td>
<p>(deprecated) integer. Number of equally spaced thresholds in the interval 0-1 (<code>SDMTools::optim.thresh</code>). Only needed when <code>metric</code> is set.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_axes.metric">axes.metric</code></td>
<td>
<p>Metric used to evaluate variable relative importance (see
details below).</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_uncertainty">uncertainty</code></td>
<td>
<p>logical. If set to true, generates an uncertainty map and
an algorithm correlation matrix.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_tmp">tmp</code></td>
<td>
<p>logical. If set to true, the habitat suitability map of each
algorithms is saved in a temporary file to release memory. But beware: if
you close R, temporary files will be deleted. To avoid any loss you can
save your SSDM with <code><a href="#topic+save.model">save.model</a></code>. Depending on number,
resolution and extent of models, temporary files can take a lot of disk
space. Temporary files are written in R environment temporary folder.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_sdm.projections">SDM.projections</code></td>
<td>
<p>logical. If FALSE (default), the Algorithm.SDMs inside the 'sdms' slot will not contain projections (for memory saving purposes).</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_ensemble.metric">ensemble.metric</code></td>
<td>
<p>character. Metric(s) used to select the best SDMs that
will be included in the ensemble SDM (see details below).</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_ensemble.thresh">ensemble.thresh</code></td>
<td>
<p>numeric. Threshold(s) associated with the metric(s)
used to compute the selection.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_weight">weight</code></td>
<td>
<p>logical. Choose whether or not you want the SDMs to be weighted
using the selection metric or, alternatively, the mean of the selection
metrics.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_method">method</code></td>
<td>
<p>character. Define the method used to create the local species
richness map (see details below).</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_rep.b">rep.B</code></td>
<td>
<p>integer. If the method used to create the local species richness
is the random bernoulli (<strong>Bernoulli</strong>), rep.B parameter defines the number of
repetitions used to create binary maps for each species.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_range">range</code></td>
<td>
<p>integer. Set a value of range restriction (in pixels) around
presences occurrences on habitat suitability maps (all further points will
have a null probability, see Crisp et al (2011) in references). If NULL, no
range restriction will be applied.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_endemism">endemism</code></td>
<td>
<p>character. Define the method used to create an endemism map
(see details below).</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_verbose">verbose</code></td>
<td>
<p>logical. If set to true, allows the function to print text in
the console.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_gui">GUI</code></td>
<td>
<p>logical. Don't take that argument into account (parameter for the
user interface).</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_cores">cores</code></td>
<td>
<p>integer. Specify the number of CPU cores used to do the
computing. You can use <code><a href="parallel.html#topic+detectCores">detectCores</a></code>) to automatically
use all the available CPU cores.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_parmode">parmode</code></td>
<td>
<p>character. Parallelization mode: along 'species', 'algorithms' or 'replicates'. Defaults to 'species'.</p>
</td></tr>
<tr><td><code id="stack_modelling_+3A_...">...</code></td>
<td>
<p>additional parameters for the algorithm modelling function (see
details below).</p>
</td></tr>
</table>


<h3>Details</h3>

 <dl>
<dt>algorithms</dt><dd><p>'all' allows you to call directly all
available algorithms. Currently, available algorithms include Generalized
linear model (<strong>GLM</strong>), Generalized additive model (<strong>GAM</strong>),
Multivariate adaptive regression splines (<strong>MARS</strong>), Generalized
boosted regressions model (<strong>GBM</strong>), Classification tree analysis
(<strong>CTA</strong>), Random forest (<strong>RF</strong>), Maximum entropy
(<strong>MAXENT</strong>), Artificial neural network (<strong>ANN</strong>), and Support
vector machines (<strong>SVM</strong>). Each algorithm has its own parameters
settable with the <strong>...</strong> (see each algorithm section below to set
their parameters).</p>
</dd> <dt>&quot;PA&quot;</dt><dd><p>list with two values: <strong>nb</strong> number of
pseudo-absences selected, and <strong>strat</strong> strategy used to select
pseudo-absences: either random selection or disk selection. We set default
recommendation from Barbet-Massin et al. (2012) (see reference).</p>
</dd>
<dt>cv</dt><dd><p><strong>Cross-validation</strong> method used to split the occurrence
dataset used for evaluation: <strong>holdout</strong> data are partitioned into a
training set and an evaluation set using a fraction (<em>cv.param[1]</em>) and
the operation can be repeated (<em>cv.param[2]</em>) times, <strong>k-fold</strong>
data are partitioned into k (<em>cv.param[1]</em>) folds being k-1 times in
the training set and once the evaluation set and the operation can be
repeated (<em>cv.param[2]</em>) times, <strong>LOO</strong> (Leave One Out) each point
is successively taken as evaluation data.</p>
</dd> <dt>metric</dt><dd><p>Choice of the
metric used to compute the binary map threshold and the confusion matrix (by
default SES as recommended by Liu et al. (2005), see reference below):
<strong>Kappa</strong> maximizes the Kappa, <strong>CCR</strong> maximizes the proportion of
correctly predicted observations, <strong>TSS</strong> (True Skill Statistic)
maximizes the sum of sensitivity and specificity, <strong>SES</strong> uses the
sensitivity-specificity equality, <strong>LW</strong> uses the lowest occurrence
prediction probability, <strong>ROC</strong> minimizes the distance between the ROC
plot (receiving operating curve) and the upper left corner
(1,1).</p>
</dd><dt>axes.metric</dt><dd><p>Choice of the metric used to evaluate the variable
relative importance (difference between a full model and one with each
variable successively omitted): <strong>Pearson</strong> (computes a simple
Pearson's correlation <em>r</em> between predictions of the full model and the
one without a variable, and returns the score <em>1-r</em>: the highest the
value, the more influence the variable has on the model), <strong>AUC</strong>,
<strong>Kappa</strong>, <strong>sensitivity</strong>, <strong>specificity</strong>, and
<strong>prop.correct</strong> (proportion of correctly predicted occurrences).</p>
</dd>
<dt>ensemble.metric</dt><dd><p>Ensemble metric(s) used to select SDMs: <strong>AUC</strong>,
<strong>Kappa</strong>, <strong>sensitivity</strong>, <strong>specificity</strong>, and
<strong>prop.correct</strong> (proportion of correctly predicted occurrences).</p>
</dd>
<dt>method</dt><dd><p>Choice of the method used to compute the local species
richness map (see Calabrese et al. (2014) and D'Amen et al (2015) for more
informations, see reference below): <strong>pSSDM</strong> sum probabilities of
habitat suitability maps, <strong>Bernoulli</strong> drawing repeatedly from a
Bernoulli distribution, <strong>bSSDM</strong> sum the binary map obtained with the
thresholding (depending on the metric, see metric parameter),
<strong>MaximumLikelihood</strong> adjust species richness using maximum likelihood parameter estimates on the logit-transformed occurrence probabilities (see Calabrese et al. (2014)), <strong>PRR.MEM</strong> model richness with a macroecological model
(MEM) and adjust each ESDM binary map by ranking habitat suitability and
keeping as much as predicted richness of the MEM, <strong>PRR.pSSDM</strong> model
richness with a pSSDM and adjust each ESDM binary map by ranking habitat
suitability and keeping as much as predicted richness of the pSSDM</p>
</dd>
<dt>endemism</dt><dd><p>Choice of the method used to compute the endemism map (see
Crisp et al. (2001) for more information, see reference below):
<strong>NULL</strong> No endemism map, <strong>WEI</strong> (Weighted Endemism Index)
Endemism map built by counting all species in each cell and weighting each
by the inverse of its range, <strong>CWEI</strong> (Corrected Weighted Endemism
Index) Endemism map built by dividing the weighted endemism index by the
total count of species in the cell. First string of the character is the
method either WEI or CWEI, and in those cases second string of the vector is
used to precise range calculation, whether the total number of occurrences
<strong>'NbOcc'</strong> whether the surface of the binary map species distribution
<strong>'Binary'</strong>.</p>
</dd> <dt>...</dt><dd><p>See algorithm in detail section</p>
</dd> </dl>



<h3>Value</h3>

<p>an S4 <a href="#topic+Stacked.SDM-class">Stacked.SDM</a> class object viewable with the
<code><a href="#topic+plot.model">plot.model</a></code> function.
</p>


<h3>Generalized linear model (<strong>GLM</strong>) </h3>

<p>Uses the <code>glm</code>
function from the package 'stats'. You can set parameters by supplying <code>glm.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="stats.html#topic+glm">glm</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>test</dt><dd><p>character. Test used to evaluate the SDM, default 'AIC'.</p>
</dd>
<dt>control</dt><dd><p>list (created with <code><a href="stats.html#topic+glm.control">glm.control</a></code>).
Contains parameters for controlling the fitting process. Default is <code>glm.control(epsilon = 1e-08, maxit = 500)</code>.
'epsilon' is a numeric and defines the positive convergence tolerance (eps).
'maxit' is an integer giving the maximal number of IWLS (Iterative Weighted Last Squares) iterations.</p>
</dd> </dl>



<h3>Generalized additive model (<strong>GAM</strong>) </h3>

<p>Uses the <code>gam</code>
function from the package 'mgcv'. You can set parameters by supplying <code>gam.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="mgcv.html#topic+gam">gam</a></code> for all settable arguments).
The following parameters have defaults: </p>
<dl>
<dt>test</dt><dd><p>character.
Test used to evaluate the model, default 'AIC'.</p>
</dd> <dt>control</dt><dd><p>list (created with <code><a href="mgcv.html#topic+gam.control">gam.control</a></code>).
Contains parameters for controlling the fitting process. Default is <code>gam.control(epsilon = 1e-08, maxit = 500)</code>.
'epsilon' is a numeric used for judging the conversion of the GLM IRLS (Iteratively Reweighted Least Squares) loop. 'maxit' is an integer giving the maximum number of IRLS iterations to perform.</p>
</dd> </dl>



<h3>Multivariate adaptive regression splines (<strong>MARS</strong>) </h3>

<p>Uses the
<code>earth</code> function from the package 'earth'. You can set parameters by supplying <code>mars.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="earth.html#topic+earth">earth</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>degree</dt><dd><p>integer. Maximum degree of interaction (Friedman's mi) ; 1
meaning build an additive model (i.e., no interaction terms). By default,
set to 2.</p>
</dd> </dl>



<h3>Generalized boosted regressions model (<strong>GBM</strong>) </h3>

<p>Uses the
<code>gbm</code> function from the package 'gbm'. You can set parameters by supplying <code>gbm.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="gbm.html#topic+gbm">gbm</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>distribution</dt><dd><p>character. Automatically detected from the format of the presence column in the occurrence dataset.</p>
</dd>
<dt>n.trees</dt><dd><p>integer. The total number of trees to fit. This is equivalent
to the number of iterations and the number of basis functions in the
additive expansion. By default, set to 2500.</p>
</dd>
<dt>n.minobsinnode</dt><dd><p>integer.
minimum number of observations in the trees terminal nodes. Note that this
is the actual number of observations, not the total weight. By default, set
to 1.</p>
</dd>
<dt>cv.folds</dt><dd><p>integer. Number of cross-validation folds to perform.
If cv.folds&gt;1 then gbm - in addition to the usual fit - will perform a
cross-validation. By default, set to 3.</p>
</dd>
<dt>shrinkage</dt><dd><p>numeric. A shrinkage parameter applied to each tree in the expansion (also known as learning rate or step-size reduction). By default, set to 0.001.</p>
</dd>
<dt>bag.fraction</dt><dd><p>numeric. Fraction of the training set observations randomly selected to propose the next tree in the expansion.</p>
</dd>
<dt>train.fraction</dt><dd><p>numeric. Training fraction used to fit the first gbm. The remainder is used to compute out-of-sample estimates of the loss function. By default, set to 1 (since evaluation/holdout is done with <code>SSDM::evaluate</code>.</p>
</dd>
<dt>n.cores</dt><dd><p>integer. Number of cores to use for parallel computation of the CV folds. By default, set to 1. If you intend to use this, please set <code>ncores=0</code> to avoid conflicts.</p>
</dd> </dl>



<h3>Classification tree analysis (<strong>CTA</strong>) </h3>

<p>Uses the <code>rpart</code>
function from the package 'rpart'. You can set parameters by supplying <code>cta.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="rpart.html#topic+rpart">rpart</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>control</dt><dd><p>list (created with <code><a href="rpart.html#topic+rpart.control">rpart.control</a></code>).
Contains parameters for controlling the rpart fit. The default is <code>rpart.control(minbucket=1, xval=3)</code>.
'mibucket' is an integer giving the minimum number of observations in any
terminal node. 'xval' is an integer defining the number of
cross-validations.</p>
</dd> </dl>



<h3>Random Forest (<strong>RF</strong>) </h3>

<p>Uses the <code>randomForest</code> function
from the package 'randomForest'. You can set parameters by supplying <code>cta.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="randomForest.html#topic+randomForest">randomForest</a></code> all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>ntree</dt><dd><p>integer. Number of trees to grow. This should not be set to a
too small number, to ensure that every input row gets predicted at least a
few times. By default, set to 2500.</p>
</dd>
<dt>nodesize</dt><dd><p>integer. Minimum size of terminal nodes. Setting this number larger causes smaller trees to be grown (and thus take less time). By default, set to 1.</p>
</dd> </dl>



<h3>Maximum Entropy (<strong>MAXENT</strong>) </h3>

<p>Uses the <code>maxent</code> function
from the package 'dismo'. Make sure that you have correctly installed the
maxent.jar file in the folder ~\R\library\version\dismo\java available
at <a href="https://biodiversityinformatics.amnh.org/open_source/maxent/">https://biodiversityinformatics.amnh.org/open_source/maxent/</a>. As with the other algorithms, you can set parameters by supplying <code>maxent.args=list(arg1=val1,arg2=val2)</code>. Mind that arguments are passed from dismo to the MAXENT software again as an argument list  (see <code><a href="dismo.html#topic+maxent">maxent</a></code> for more details).
No specific defaults are set with this method.
</p>


<h3>Artificial Neural Network (<strong>ANN</strong>) </h3>

<p>Uses the <code>nnet</code>
function from the package 'nnet'. You can set parameters by supplying <code>ann.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="nnet.html#topic+nnet">nnet</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>size</dt><dd><p>integer. Number of units in the hidden layer. By default, set to 6.</p>
</dd>
<dt>maxit</dt><dd><p>integer. Maximum number of iterations, default 500.</p>
</dd> </dl>



<h3>Support vector machines (<strong>SVM</strong>) </h3>

<p>Uses the <code>svm</code> function
from the package 'e1071'. You can set parameters by supplying <code>svm.args=list(arg1=val1,arg2=val2)</code> (see <code><a href="e1071.html#topic+svm">svm</a></code> for all settable arguments).
The following parameters have defaults: </p>

<dl>
<dt>type</dt><dd><p>character. Regression/classification type SVM should be used with. By default, set to &quot;eps-regression&quot;.</p>
</dd>
<dt>epsilon</dt><dd><p>float. Epsilon parameter in the insensitive loss function, default 1e-08.</p>
</dd>
<dt>cross</dt><dd><p>integer. If an integer value k&gt;0 is specified, a k-fold
cross-validation on the training data is performed to assess the quality of
the model: the accuracy rate for classification and the Mean Squared Error
for regression. By default, set to 3.</p>
</dd>
<dt>kernel</dt><dd><p>character. The kernel used in training and predicting. By default, set to &quot;radial&quot;.</p>
</dd>
<dt>gamma</dt><dd><p>numeric. Parameter needed for all kernels, default <code>1/(length(data) -1)</code>.</p>
</dd> </dl>



<h3>Warning </h3>

<p>Depending on the raster object resolution the process can
be more or less time and memory consuming.
</p>


<h3>References</h3>

<p>M. D'Amen, A. Dubuis, R. F. Fernandes, J. Pottier, L. Pelissier, &amp;
A Guisan (2015) &quot;Using species richness and functional traits prediction to
constrain assemblage predicitions from stacked species distribution models&quot;
<em>Journal of Biogeography</em> 42(7):1255-1266
<a href="http://doc.rero.ch/record/235561/files/pel_usr.pdf">http://doc.rero.ch/record/235561/files/pel_usr.pdf</a>
</p>
<p>M. Barbet-Massin, F. Jiguet, C. H.  Albert, &amp; W. Thuiller (2012) &quot;Selecting
pseudo-absences for species distribution models: how, where and how many?&quot;
<em>Methods Ecology and Evolution</em> 3:327-338
<a href="http://onlinelibrary.wiley.com/doi/10.1111/j.2041-210X.2011.00172.x/full">http://onlinelibrary.wiley.com/doi/10.1111/j.2041-210X.2011.00172.x/full</a>
</p>
<p>J.M. Calabrese, G. Certain, C.  Kraan, &amp; C.F. Dormann (2014) &quot;Stacking
species distribution  models  and  adjusting  bias  by linking them to
macroecological models.&quot; <em>Global Ecology and Biogeography</em> 23:99-112
<a href="https://onlinelibrary.wiley.com/doi/full/10.1111/geb.12102">https://onlinelibrary.wiley.com/doi/full/10.1111/geb.12102</a>
</p>
<p>M. D. Crisp, S. Laffan, H. P. Linder &amp; A. Monro (2001) &quot;Endemism in the
Australian flora&quot;  <em>Journal of Biogeography</em> 28:183-198
<a href="http://biology-assets.anu.edu.au/hosted_sites/Crisp/pdfs/Crisp2001_endemism.pdf">http://biology-assets.anu.edu.au/hosted_sites/Crisp/pdfs/Crisp2001_endemism.pdf</a>
</p>
<p>C. Liu, P. M. Berry, T. P. Dawson,  R. &amp; G. Pearson (2005) &quot;Selecting
thresholds of occurrence in the prediction of species distributions.&quot;
<em>Ecography</em> 28:85-393
<a href="http://www.researchgate.net/publication/230246974_Selecting_Thresholds_of_Occurrence_in_the_Prediction_of_Species_Distributions">http://www.researchgate.net/publication/230246974_Selecting_Thresholds_of_Occurrence_in_the_Prediction_of_Species_Distributions</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+modelling">modelling</a></code> to build simple SDMs.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Loading data
data(Env)
data(Occurrences)

# SSDM building
SSDM &lt;- stack_modelling(c('CTA', 'SVM'), Occurrences, Env, rep = 1,
                       Xcol = 'LONGITUDE', Ycol = 'LATITUDE',
                       Spcol = 'SPECIES')

# Results plotting
plot(SSDM)

## End(Not run)

</code></pre>

<hr>
<h2 id='Stacked.SDM-class'>An S4 class to represent SSDMs</h2><span id='topic+Stacked.SDM-class'></span>

<h3>Description</h3>

<p>This is an S4 class to represent SSDMs that assembles multiple algorithms
(including generalized linear model, general additive model, multivariate
adaptive splines, generalized boosted regression model, classification tree
analysis, random forest, maximum entropy, artificial neural network, and
support vector machines) built for multiple species. It is obtained with
<code><a href="#topic+stack_modelling">stack_modelling</a></code> or <code><a href="#topic+stacking">stacking</a></code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>name</code></dt><dd><p>character. Name of the SSDM (by default 'Species.SSDM').</p>
</dd>
<dt><code>diversity.map</code></dt><dd><p>raster. Local species richness map produced by the SSDM.</p>
</dd>
<dt><code>endemism.map</code></dt><dd><p>raster. Endemism map produced by the SSDM (see Crisp et al
(2011) in references).</p>
</dd>
<dt><code>uncertainty</code></dt><dd><p>raster. Between-algorithm variance map.</p>
</dd>
<dt><code>evaluation</code></dt><dd><p>data frame. Evaluation of the SSDM (AUC, Kappa, omission
rate, sensitivity, specificity, proportion of correctly predicted
occurrences).</p>
</dd>
<dt><code>variable.importance</code></dt><dd><p>data frame. Relative importance of each variable in
the SSDM.</p>
</dd>
<dt><code>algorithm.correlation</code></dt><dd><p>data frame. Between-algorithm correlation matrix.</p>
</dd>
<dt><code>esdms</code></dt><dd><p>list. List of ensemble SDMs used in the SSDM.</p>
</dd>
<dt><code>parameters</code></dt><dd><p>data frame. Parameters used to build the SSDM.</p>
</dd>
<dt><code>algorithm.evaluation</code></dt><dd><p>data frame. Evaluation of the algorithm averaging
the metrics of all SDMs (AUC, Kappa, omission rate, sensitivity,
specificity, proportion of correctly predicted occurrences).</p>
</dd>
</dl>


<h3>References</h3>

<p>M. D. Crisp, S. Laffan, H. P. Linder &amp; A. Monro (2001)
&quot;Endemism in the Australian flora&quot;  <em>Journal of Biogeography</em>
28:183-198
<a href="http://biology-assets.anu.edu.au/hosted_sites/Crisp/pdfs/Crisp2001_endemism.pdf">http://biology-assets.anu.edu.au/hosted_sites/Crisp/pdfs/Crisp2001_endemism.pdf</a>
</p>


<h3>See Also</h3>

<p><a href="#topic+Ensemble.SDM-class">Ensemble.SDM</a> an S4 class to represent ensemble SDMs,
and <a href="#topic+Algorithm.SDM-class">Algorithm.SDM</a> an S4 class to represent SDMs.
</p>

<hr>
<h2 id='stacking'>Stack different ensemble SDMs in an SSDM</h2><span id='topic+stacking'></span><span id='topic+stacking+2CEnsemble.SDM-method'></span>

<h3>Description</h3>

<p>This is a function to stack several ensemble SDMs in an SSDM. The function
takes as inputs several S4 <a href="#topic+Ensemble.SDM-class">Ensemble.SDM</a> class objects produced
with <code><a href="#topic+ensemble_modelling">ensemble_modelling</a></code> or <code><a href="#topic+ensemble">ensemble</a></code> functions. The
function returns an S4 <a href="#topic+Stacked.SDM-class">Stacked.SDM</a> class object containing the
local species richness map, the between-algorithm variance map, and all
evaluation tables coming with (model evaluation, algorithm evaluation,
algorithm correlation matrix and variable importance), and a list of ensemble
SDMs for each species (see <code><a href="#topic+ensemble_modelling">ensemble_modelling</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stacking(
  esdm,
  ...,
  name = NULL,
  method = "pSSDM",
  rep.B = 1000,
  Env = NULL,
  range = NULL,
  endemism = c("WEI", "Binary"),
  eval = TRUE,
  uncertainty = TRUE,
  verbose = TRUE,
  GUI = FALSE
)

## S4 method for signature 'Ensemble.SDM'
stacking(
  esdm,
  ...,
  name = NULL,
  method = "pSSDM",
  rep.B = 1000,
  Env = NULL,
  range = NULL,
  endemism = c("WEI", "Binary"),
  eval = TRUE,
  uncertainty = TRUE,
  verbose = TRUE,
  GUI = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stacking_+3A_esdm">esdm</code>, <code id="stacking_+3A_...">...</code></td>
<td>
<p>character. Ensemble SDMs to be stacked.</p>
</td></tr>
<tr><td><code id="stacking_+3A_name">name</code></td>
<td>
<p>character. Optional name given to the final SSDM produced (by
default 'Species.SDM').</p>
</td></tr>
<tr><td><code id="stacking_+3A_method">method</code></td>
<td>
<p>character. Define the method used to create the local species
richness map (see details below).</p>
</td></tr>
<tr><td><code id="stacking_+3A_rep.b">rep.B</code></td>
<td>
<p>integer. If the method used to create the local species richness
is the random bernoulli (<strong>Bernoulli</strong>), rep.B parameter defines the number of
repetitions used to create binary maps for each species.</p>
</td></tr>
<tr><td><code id="stacking_+3A_env">Env</code></td>
<td>
<p>raster object. Stacked raster object of environmental variables
(can be processed first by <code><a href="#topic+load_var">load_var</a></code>). Needed only for stacking
method using probability ranking from richness (<strong>PRR</strong>).</p>
</td></tr>
<tr><td><code id="stacking_+3A_range">range</code></td>
<td>
<p>integer. Set a value of range restriction (in pixels) around
presences occurrences on habitat suitability maps (all further points will
have a null probability, see Crisp et al (2011) in references). If NULL, no
range restriction will be applied.</p>
</td></tr>
<tr><td><code id="stacking_+3A_endemism">endemism</code></td>
<td>
<p>character. Define the method used to create an endemism map
(see details below).</p>
</td></tr>
<tr><td><code id="stacking_+3A_eval">eval</code></td>
<td>
<p>logical. If set to FALSE, disable stack evaluation.</p>
</td></tr>
<tr><td><code id="stacking_+3A_uncertainty">uncertainty</code></td>
<td>
<p>logical. If set to TRUE, generates an uncertainty map and
an algorithm correlation matrix.</p>
</td></tr>
<tr><td><code id="stacking_+3A_verbose">verbose</code></td>
<td>
<p>logical. If set to TRUE, allows the function to print text in
the console.</p>
</td></tr>
<tr><td><code id="stacking_+3A_gui">GUI</code></td>
<td>
<p>logical. Don't take that argument into account (parameter for the
user interface).</p>
</td></tr>
</table>


<h3>Details</h3>

<p><strong>Methods:</strong> Choice of the method used to compute the local
species richness map (see Calabrese et al. (2014) and D'Amen et al (2015) for
more informations, see reference below): </p>
<dl>
<dt>pSSDM</dt><dd><p>sum
probabilities of habitat suitability maps</p>
</dd><dt>Bernoulli</dt><dd><p>draw repeatedly
from a Bernoulli distribution</p>
</dd><dt>bSSDM</dt><dd><p>sum the binary map obtained with
the thresholding (depending on the metric of the
ESDM).</p>
</dd><dt>MaximumLikelihood</dt><dd><p>adjust species richness of the model by
linear regression</p>
</dd><dt>PRR.MEM</dt><dd><p>model richness with a macroecological model
(MEM) and adjust each ESDM binary map by ranking habitat suitability and
keeping as much as predicted richness of the MEM</p>
</dd><dt>PRR.pSSDM</dt><dd><p>model
richness with a pSSDM and adjust each ESDM binary map by ranking habitat
suitability and keeping as much as predicted richness of the pSSDM</p>
</dd></dl>

<p><strong>Endemism:</strong> Choice of the method used to compute the endemism map
(see Crisp et al. (2001) for more information, see reference below):
</p>
<dl>
<dt>NULL</dt><dd><p>No endemism map</p>
</dd><dt>WEI</dt><dd><p>(Weighted Endemism Index)
Endemism map built by counting all species in each cell and weighting each
by the inverse of its range</p>
</dd> <dt>CWEI</dt><dd><p>(Corrected Weighted Endemism Index)
Endemism map built by dividing the weighted endemism index by the total
count of species in the cell.</p>
</dd></dl>
<p>First string of the character is the method
either WEI or CWEI, and in those cases second string of the vector is used
to precise range calculation, whether the total number of occurrences
<strong>'NbOcc'</strong> whether the surface of the binary map species distribution
<strong>'Binary'</strong>.
</p>


<h3>Value</h3>

<p>an S4 <a href="#topic+Stacked.SDM-class">Stacked.SDM</a> class object viewable with the
<code><a href="#topic+plot.model">plot.model</a></code> function.
</p>


<h3>References</h3>

<p>M. D'Amen, A. Dubuis, R. F. Fernandes, J. Pottier, L. Pelissier, &amp;
A Guisan (2015) &quot;Using species richness and functional traits prediction to
constrain assemblage predicitions from stacked species distribution models&quot;
<em>Journal of Biogeography</em> 42(7):1255-1266
<a href="http://doc.rero.ch/record/235561/files/pel_usr.pdf">http://doc.rero.ch/record/235561/files/pel_usr.pdf</a>
</p>
<p>J.M. Calabrese, G. Certain, C.  Kraan, &amp; C.F. Dormann (2014) &quot;Stacking
species distribution  models  and  adjusting  bias  by linking them to
macroecological models.&quot; <em>Global Ecology and Biogeography</em> 23:99-112
<a href="https://onlinelibrary.wiley.com/doi/full/10.1111/geb.12102">https://onlinelibrary.wiley.com/doi/full/10.1111/geb.12102</a>
</p>
<p>M. D. Crisp, S. Laffan, H. P. Linder &amp; A. Monro (2001) &quot;Endemism in the
Australian flora&quot;  <em>Journal of Biogeography</em> 28:183-198
<a href="http://biology-assets.anu.edu.au/hosted_sites/Crisp/pdfs/Crisp2001_endemism.pdf">http://biology-assets.anu.edu.au/hosted_sites/Crisp/pdfs/Crisp2001_endemism.pdf</a>
</p>
<p>C. Liu, P. M. Berry, T. P. Dawson,  R. &amp; G. Pearson (2005) &quot;Selecting
thresholds of occurrence in the prediction of species distributions.&quot;
<em>Ecography</em> 28:85-393
<a href="http://www.researchgate.net/publication/230246974_Selecting_Thresholds_of_Occurrence_in_the_Prediction_of_Species_Distributions">http://www.researchgate.net/publication/230246974_Selecting_Thresholds_of_Occurrence_in_the_Prediction_of_Species_Distributions</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+stack_modelling">stack_modelling</a></code> to build SSDMs.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Loading data
data(Env)
data(Occurrences)
Occ1 &lt;- subset(Occurrences, Occurrences$SPECIES == 'elliptica')
Occ2 &lt;- subset(Occurrences, Occurrences$SPECIES == 'gracilis')

# SSDM building
ESDM1 &lt;- ensemble_modelling(c('CTA', 'SVM'), Occ1, Env, rep = 1,
                           Xcol = 'LONGITUDE', Ycol = 'LATITUDE',
                           name = 'elliptica', ensemble.thresh = c(0.6))
ESDM2 &lt;- ensemble_modelling(c('CTA', 'SVM'), Occ2, Env, rep = 1,
                           Xcol = 'LONGITUDE', Ycol = 'LATITUDE',
                           name = 'gracilis', ensemble.thresh = c(0.6))
SSDM &lt;- stacking(ESDM1, ESDM2)

# Results plotting
plot(SSDM)

## End(Not run)

</code></pre>

<hr>
<h2 id='update+2CStacked.SDM-method'>Update a previous SSDM</h2><span id='topic+update+2CStacked.SDM-method'></span>

<h3>Description</h3>

<p>Update a previous SSDM with new occurrence data. The function takes as inputs
updated or new occurrence data from one species, previous environmental
variables, and an S4 <a href="#topic+Stacked.SDM-class">Stacked.SDM</a> class object containing a
previously built SSDM.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'Stacked.SDM'
update(
  object,
  Occurrences,
  Env,
  Xcol = "Longitude",
  Ycol = "Latitude",
  Pcol = NULL,
  Spname = NULL,
  name = stack@name,
  save = FALSE,
  path = getwd(),
  thresh = 1001,
  tmp = FALSE,
  verbose = TRUE,
  GUI = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update+2B2CStacked.SDM-method_+3A_object">object</code></td>
<td>
<p>Stacked.SDM. The previously built SSDM.</p>
</td></tr>
<tr><td><code id="update+2B2CStacked.SDM-method_+3A_occurrences">Occurrences</code></td>
<td>
<p>data frame. New or updated occurrence table (can be
processed first by <code><a href="#topic+load_occ">load_occ</a></code>).</p>
</td></tr>
<tr><td><code id="update+2B2CStacked.SDM-method_+3A_env">Env</code></td>
<td>
<p>raster object. Environment raster object (can be processed first by
<code><a href="#topic+load_var">load_var</a></code>).</p>
</td></tr>
<tr><td><code id="update+2B2CStacked.SDM-method_+3A_xcol">Xcol</code></td>
<td>
<p>character. Name of the column  in the occurrence table  containing
Latitude or X coordinates.</p>
</td></tr>
<tr><td><code id="update+2B2CStacked.SDM-method_+3A_ycol">Ycol</code></td>
<td>
<p>character. Name of the column in the occurrence table  containing
Longitude or Y coordinates.</p>
</td></tr>
<tr><td><code id="update+2B2CStacked.SDM-method_+3A_pcol">Pcol</code></td>
<td>
<p>character. Name of the column in the occurrence table specifying
whether a line is a presence or an absence. A value of 1 is presence and
value of 0 is absence. If NULL presence-only dataset is assumed.</p>
</td></tr>
<tr><td><code id="update+2B2CStacked.SDM-method_+3A_spname">Spname</code></td>
<td>
<p>character. Name of the new or updated species.</p>
</td></tr>
<tr><td><code id="update+2B2CStacked.SDM-method_+3A_name">name</code></td>
<td>
<p>character. Optional name given to the final SSDM produced, by
default it's the name of the previous SSDM.</p>
</td></tr>
<tr><td><code id="update+2B2CStacked.SDM-method_+3A_save">save</code></td>
<td>
<p>logical. If set to true, the model is automatically saved.</p>
</td></tr>
<tr><td><code id="update+2B2CStacked.SDM-method_+3A_path">path</code></td>
<td>
<p>character. Name of the path to the directory to contain the saved
SSDM.</p>
</td></tr>
<tr><td><code id="update+2B2CStacked.SDM-method_+3A_thresh">thresh</code></td>
<td>
<p>numeric. A single integer value representing the number of equal
interval threshold values between 0 and 1.</p>
</td></tr>
<tr><td><code id="update+2B2CStacked.SDM-method_+3A_tmp">tmp</code></td>
<td>
<p>logical. If set to true, the habitat suitability map of each
algorithm is saved in a temporary file to release memory. But beware: if you
close R, temporary files will be deleted To avoid any loss you can save
your model with <code><a href="#topic+save.model">save.model</a></code>.</p>
</td></tr>
<tr><td><code id="update+2B2CStacked.SDM-method_+3A_verbose">verbose</code></td>
<td>
<p>logical. If set to true, allows the function to print text in
the console.</p>
</td></tr>
<tr><td><code id="update+2B2CStacked.SDM-method_+3A_gui">GUI</code></td>
<td>
<p>logical. Don't take that argument into account (parameter for the
user interface).</p>
</td></tr>
<tr><td><code id="update+2B2CStacked.SDM-method_+3A_...">...</code></td>
<td>
<p>additional parameters for the algorithm modelling function (see
details below).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an S4 <a href="#topic+Stacked.SDM-class">Stacked.SDM</a> class object viewable with the
<code><a href="#topic+plot.model">plot.model</a></code> function.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+stack_modelling">stack_modelling</a></code> to build SSDMs.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
update(stack, Occurrences, Env, Spname = 'NewSpecie')

## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
