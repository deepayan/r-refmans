<!DOCTYPE html><html><head><title>Help for package oro.dicom</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {oro.dicom}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#create3D'><p>Create Arrays from DICOM Headers/Images</p></a></li>
<li><a href='#dec2base'><p>Convert Decimal to Base N Number in String</p></a></li>
<li><a href='#dicom.dic'><p>Lookup Tables for DICOM Header Information</p></a></li>
<li><a href='#dicom2analyze'><p>Convert DICOM Header to Analyze</p></a></li>
<li><a href='#dicom2nifti'><p>Convert DICOM Header to NIfTI</p></a></li>
<li><a href='#dicomTable'><p>Construct Data Frame from DICOM Headers</p></a></li>
<li><a href='#extractHeader'><p>Extract Single Field from DICOM Headers</p></a></li>
<li><a href='#getOrientation'><p>Convert Direction Cosines to Anatomical Direction</p></a></li>
<li><a href='#header2matrix'><p>Converts DICOM Header Field to a Matrix</p></a></li>
<li><a href='#matchHeader'><p>Match String to DICOM Header Field</p></a></li>
<li><a href='#nextHeader'><p>Check String Against DICOM Header Field to Produce Error Message or NEXT</p></a></li>
<li><a href='#orthogonal-planes'><p>Orthogonal Planes</p></a></li>
<li><a href='#parsePixelData'><p>Parse DICOM Pixel or Spectroscopy Data</p></a></li>
<li><a href='#readDICOM'><p>Read All DICOM Files in a Directory</p></a></li>
<li><a href='#readDICOMFile'><p>Read Single DICOM File</p></a></li>
<li><a href='#str2time'><p>Convert DICOM Time/Date Entry</p></a></li>
<li><a href='#swapDimension'><p>Reslice Data Volume Using DICOM Header Fields</p></a></li>
<li><a href='#writeHeader'><p>Write DICOM Table to ASCII File</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.5.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2019-10-25</td>
</tr>
<tr>
<td>Title:</td>
<td>Rigorous - DICOM Input / Output</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.14.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, hwriter</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils, oro.nifti (&ge; 0.4.0)</td>
</tr>
<tr>
<td>Description:</td>
<td>Data input/output functions for data that conform to the
    Digital Imaging and Communications in Medicine (DICOM) standard, part
    of the Rigorous Analytics bundle.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/BSD-3-Clause">BSD_3_clause</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://rig.oro.us.com">http://rig.oro.us.com</a>, <a href="http://rigorousanalytics.blogspot.com">http://rigorousanalytics.blogspot.com</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>LazyDataCompression:</td>
<td>gzip</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-10-25 22:12:38 UTC; johnmuschelli</td>
</tr>
<tr>
<td>Author:</td>
<td>Brandon Whitcher [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Brandon Whitcher &lt;bwhitcher@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-10-28 19:40:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='create3D'>Create Arrays from DICOM Headers/Images</h2><span id='topic+create3D'></span><span id='topic+create4D'></span>

<h3>Description</h3>

<p>A DICOM list structure is used to produce a multi-dimensional array
representing a single acquisition of medical imaging data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create3D(dcm, mode = "integer", transpose = TRUE, pixelData = TRUE,
  mosaic = FALSE, mosaicXY = NULL, sequence = FALSE,
  boffset = NULL)

create4D(dcm, mode = "integer", transpose = TRUE, pixelData = TRUE,
  mosaic = FALSE, mosaicXY = NULL, nslices = NULL, ntimes = NULL,
  instance = TRUE, sequence = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create3D_+3A_dcm">dcm</code></td>
<td>
<p>is the DICOM list structure (if <code>pixelData</code> = <code>TRUE</code>)
or the DICOM header information (if <code>pixelData</code> = <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="create3D_+3A_mode">mode</code></td>
<td>
<p>is a valid character string for <code>storage.mode</code>.</p>
</td></tr>
<tr><td><code id="create3D_+3A_transpose">transpose</code></td>
<td>
<p>is available in order to switch the definition of rows and
columns from DICOM (default = <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="create3D_+3A_pixeldata">pixelData</code></td>
<td>
<p>is a logical variable (default = <code>TRUE</code>) that is
associated with the DICOM image data being pre-loaded.</p>
</td></tr>
<tr><td><code id="create3D_+3A_mosaic">mosaic</code></td>
<td>
<p>is a logical variable (default = <code>FALSE</code>) to denote
storage of the data in Siemens &lsquo;Mosaic&rsquo; format.</p>
</td></tr>
<tr><td><code id="create3D_+3A_mosaicxy">mosaicXY</code></td>
<td>
<p>is a vector of length two that provides the (x,y) dimensions
of the individual images.  Default behavior is to use the AcquisitonMatrix
to determine the (x,y) values.</p>
</td></tr>
<tr><td><code id="create3D_+3A_sequence">sequence</code></td>
<td>
<p>is a logical variable (default = <code>FALSE</code>) on whether to
look in SequenceItem entries for DICOM header information.</p>
</td></tr>
<tr><td><code id="create3D_+3A_boffset">boffset</code></td>
<td>
<p>is the number of bytes to skip at the beginning of the DICOM
file (default = <code>NULL</code> which lets the code determine the starting
point).</p>
</td></tr>
<tr><td><code id="create3D_+3A_nslices">nslices</code></td>
<td>
<p>is the third dimension of the array.  Attempts are made to
determine this number from the DICOM data.</p>
</td></tr>
<tr><td><code id="create3D_+3A_ntimes">ntimes</code></td>
<td>
<p>is the fourth dimension of the array.  Attempts are made to
determine this number from the DICOM data.</p>
</td></tr>
<tr><td><code id="create3D_+3A_instance">instance</code></td>
<td>
<p>is a logical variable (default = <code>TRUE</code>) that
determines whether or not to access the <code>InstanceNumber</code> field in the
DICOM header to help order the slices.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Multi-dimensional array of medical imaging data.
</p>


<h3>Author(s)</h3>

<p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a>
</p>


<h3>References</h3>

<p>Digital Imaging and Communications in Medicine (DICOM)<br />
<a href="http://medical.nema.org">http://medical.nema.org</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+array">array</a></code>, <code><a href="#topic+readDICOM">readDICOM</a></code>,
<code><a href="base.html#topic+storage.mode">storage.mode</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
load(system.file("hk-40/hk40.RData", package="oro.dicom"))
dcmList &lt;- hk40
dcmImage &lt;- create3D(dcmList)
image(dcmImage[,,1], col=grey(0:64/64), axes=FALSE, xlab="", ylab="",
      main=paste("First Slice from HK-40"))
imagePositionPatient &lt;- attributes(dcmImage)$ipp
dSL &lt;- abs(diff(imagePositionPatient[,3]))
plot(dSL, ylim=range(range(dSL) * 1.5, 0, 10), xlab="Image", ylab="mm",
     main="Difference in Slice Location")

## Not run: 
## pixelData = FALSE
## The DICOM image data are read from create3D()
## This may save on memory for large batches of DICOM data
dcmList &lt;- readDICOM(system.file("hk-40", package="oro.dicom"),
                     pixelData=FALSE)
dcmImage &lt;- create3D(dcmList, pixelData=FALSE)
image(dcmImage[,,1], col=grey(0:64/64), axes=FALSE, xlab="", ylab="",
      main=paste("First Slice from HK-40 (again)"))

## End(Not run)
## mosaic = TRUE
mosaicFile &lt;- system.file("dcm/MR-sonata-3D-as-Tile.dcm", package="oro.dicom")
dcm &lt;- readDICOMFile(mosaicFile)
image(t(dcm$img), col=grey(0:64/64), axes=FALSE, xlab="", ylab="",
      main="Siemens MOSAIC")
dcmImage &lt;- create3D(dcm, mode="integer", mosaic=TRUE)
z &lt;- trunc(dim(dcmImage)[3]/2)
image(dcmImage[,,z], col=grey(0:64/64), axes=FALSE, xlab="", ylab="",
      main=paste("Slice", z, "from Siemens MOSAIC"))

</code></pre>

<hr>
<h2 id='dec2base'>Convert Decimal to Base N Number in String</h2><span id='topic+dec2base'></span><span id='topic+dec2hex'></span>

<h3>Description</h3>

<p>This function converts the nonnegative integer to the specified base.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dec2base(n, base, len = 0)

dec2hex(n, len = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dec2base_+3A_n">n</code></td>
<td>
<p>Non-negative integer.</p>
</td></tr>
<tr><td><code id="dec2base_+3A_base">base</code></td>
<td>
<p>Number between 2 and 36.</p>
</td></tr>
<tr><td><code id="dec2base_+3A_len">len</code></td>
<td>
<p>Length of the character string.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function converts the nonnegative integer <code>n</code> to the specified
base, where <code>n</code> must be a nonnegative integer smaller than <code class="reqn">2^52</code>,
<code>base</code> must be an integer between 2 and 36 and <code>len</code> suggests the
length of the character string.
</p>


<h3>Value</h3>

<p>The returned argument is a string.
</p>


<h3>Author(s)</h3>

<p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
x &lt;- dec2base(23, 2)

</code></pre>

<hr>
<h2 id='dicom.dic'>Lookup Tables for DICOM Header Information</h2><span id='topic+dicom.dic'></span><span id='topic+dicom.dic.thompson'></span><span id='topic+dicom.VR'></span>

<h3>Description</h3>

<p>Lookup Tables for DICOM Header Information
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(dicom.dic)
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 4188 rows and 5 columns.</p>


<h3>Source</h3>

<p>See references.
</p>


<h3>References</h3>

<p>Digital Imaging and Communications in Medicine (DICOM)<br />
<a href="http://medical.nema.org">http://medical.nema.org</a><br />
<a href="http://en.wikipedia.org/wiki/Digital_Imaging_and_Communications_in_Medicine">http://en.wikipedia.org/wiki/Digital_Imaging_and_Communications_in_Medicine</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDICOM">readDICOM</a></code>, <code><a href="#topic+readDICOMFile">readDICOMFile</a></code>.
</p>

<hr>
<h2 id='dicom2analyze'>Convert DICOM Header to Analyze</h2><span id='topic+dicom2analyze'></span>

<h3>Description</h3>

<p>A subset of header information from DICOM is placed into Analyze 7.5 format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dicom2analyze(dcm, datatype = 4, reslice = TRUE, DIM = 3,
  descrip = "SeriesDescription", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dicom2analyze_+3A_dcm">dcm</code></td>
<td>
<p>DICOM object containing both header and image information.</p>
</td></tr>
<tr><td><code id="dicom2analyze_+3A_datatype">datatype</code></td>
<td>
<p>is an integer that denotes the type of data contained in
each voxel.  See <code>convert.datatype.anlz</code> or the ANALYZE documentation
for more details.</p>
</td></tr>
<tr><td><code id="dicom2analyze_+3A_reslice">reslice</code></td>
<td>
<p>Logical variable (default = <code>TRUE</code>) indicating if the
data volume should be resliced.</p>
</td></tr>
<tr><td><code id="dicom2analyze_+3A_dim">DIM</code></td>
<td>
<p>The dimension of the array to be used (default = 3D).</p>
</td></tr>
<tr><td><code id="dicom2analyze_+3A_descrip">descrip</code></td>
<td>
<p>DICOM header field(s) to be included in the <code>descrip</code></p>
</td></tr>
<tr><td><code id="dicom2analyze_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <code>anlz</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>See the references.
</p>


<h3>Value</h3>

<p>An object of class <code>anlz</code>.
</p>


<h3>Author(s)</h3>

<p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a>
</p>


<h3>References</h3>

<p>Analyze 7.5<br /> <a href="http://rportal.mayo.edu/bir/ANALYZE75.pdf">http://rportal.mayo.edu/bir/ANALYZE75.pdf</a>
</p>
<p>Digital Imaging and Communications in Medicine (DICOM)<br />
<a href="http://medical.nema.org">http://medical.nema.org</a>
</p>


<h3>See Also</h3>

<p><code><a href="oro.nifti.html#topic+convert.datatype.anlz">convert.datatype.anlz</a></code>,
<code><a href="#topic+dicom2nifti">dicom2nifti</a></code>, <code><a href="oro.nifti.html#topic+anlz">anlz</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
dcmList &lt;- dicomSeparate(system.file("hk-40", package="oro.dicom"))
require("oro.nifti")
dcmAnlz &lt;- dicom2analyze(dcmList, datatype=4, mode="integer")
image(dcmAnlz)
orthographic(dcmAnlz)

## End(Not run)

</code></pre>

<hr>
<h2 id='dicom2nifti'>Convert DICOM Header to NIfTI</h2><span id='topic+dicom2nifti'></span>

<h3>Description</h3>

<p>A subset of header information from DICOM is placed into NIfTI-1 format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dicom2nifti(dcm, datatype = 4, units = c("mm", "sec"),
  rescale = FALSE, reslice = TRUE, qform = TRUE, sform = TRUE,
  DIM = 3, descrip = "SeriesDescription", aux.file = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dicom2nifti_+3A_dcm">dcm</code></td>
<td>
<p>DICOM object containing both header and image information.</p>
</td></tr>
<tr><td><code id="dicom2nifti_+3A_datatype">datatype</code></td>
<td>
<p>is an integer that denotes the type of data contained in
each voxel.  See <code>convert.datatype</code> or the NIfTI documentation for more
details.</p>
</td></tr>
<tr><td><code id="dicom2nifti_+3A_units">units</code></td>
<td>
<p>Spatial and temporal units for <code>xyzt</code></p>
</td></tr>
<tr><td><code id="dicom2nifti_+3A_rescale">rescale</code></td>
<td>
<p>Should slope and intercept parameters be extracted from the
DICOM headers and saved?</p>
</td></tr>
<tr><td><code id="dicom2nifti_+3A_reslice">reslice</code></td>
<td>
<p>Logical variable (default = <code>TRUE</code>) indicating if the
data volume should be resliced.</p>
</td></tr>
<tr><td><code id="dicom2nifti_+3A_qform">qform</code></td>
<td>
<p>Logical variable (default = <code>TRUE</code>) indicating if the 3D
image orientation should be used.</p>
</td></tr>
<tr><td><code id="dicom2nifti_+3A_sform">sform</code></td>
<td>
<p>Logical variable (default = <code>TRUE</code>) indicating if the 3D
image orientation should be used.</p>
</td></tr>
<tr><td><code id="dicom2nifti_+3A_dim">DIM</code></td>
<td>
<p>The dimension of the array to be used (default = 3D).</p>
</td></tr>
<tr><td><code id="dicom2nifti_+3A_descrip">descrip</code></td>
<td>
<p>DICOM header field(s) to be included in the <code>descrip</code>
slot for the <code>nifti</code> class object.</p>
</td></tr>
<tr><td><code id="dicom2nifti_+3A_aux.file">aux.file</code></td>
<td>
<p>Character string to be included in the <code>aux_file</code> slot
for the <code>nifti</code> class object.</p>
</td></tr>
<tr><td><code id="dicom2nifti_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <code>nifti</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>See the references.
</p>


<h3>Value</h3>

<p>An object of class <code>nifti</code>.
</p>


<h3>Author(s)</h3>

<p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a>
</p>


<h3>References</h3>

<p>Digital Imaging and Communications in Medicine (DICOM)<br />
<a href="http://medical.nema.org">http://medical.nema.org</a>
</p>
<p>NIfTI-1<br /> <a href="http://nifti.nimh.nih.gov/nifti-1">http://nifti.nimh.nih.gov/nifti-1</a>
</p>


<h3>See Also</h3>

<p><code><a href="oro.nifti.html#topic+convert.datatype">convert.datatype</a></code>,
<code><a href="#topic+dicom2analyze">dicom2analyze</a></code>, <code><a href="oro.nifti.html#topic+nifti">nifti</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
dcmList &lt;- dicomSeparate(system.file("hk-40", package="oro.dicom"))
require("oro.nifti")
dcmNifti &lt;- dicom2nifti(dcmList, datatype=4, mode="integer")
qform(dcmNifti)
sform(dcmNifti)
image(dcmNifti)
orthographic(dcmNifti)

## End(Not run)

</code></pre>

<hr>
<h2 id='dicomTable'>Construct Data Frame from DICOM Headers</h2><span id='topic+dicomTable'></span>

<h3>Description</h3>

<p>A data frame is created given the valid DICOM fields provided by the user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dicomTable(hdrs, stringsAsFactors = FALSE, collapse = "-",
  colSort = TRUE, verbose = FALSE, debug = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dicomTable_+3A_hdrs">hdrs</code></td>
<td>
<p>List object of DICOM headers.</p>
</td></tr>
<tr><td><code id="dicomTable_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>Logical variable to be passed to <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="dicomTable_+3A_collapse">collapse</code></td>
<td>
<p>Character string used to <code>paste</code> DICOM group, element
and value fields.</p>
</td></tr>
<tr><td><code id="dicomTable_+3A_colsort">colSort</code></td>
<td>
<p>Logical variable (default = <code>TRUE</code>) to sort column names
in the table.</p>
</td></tr>
<tr><td><code id="dicomTable_+3A_verbose">verbose</code></td>
<td>
<p>Flag to provide text-based progress bar (default =
<code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="dicomTable_+3A_debug">debug</code></td>
<td>
<p>Logical variable (default = <code>FALSE</code>) that regulates to
display of intermediate processing steps.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame where the rows correspond to images and the columns
correspond to the UNION of all DICOM fields across all files in the list.
</p>


<h3>Author(s)</h3>

<p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a>
</p>


<h3>References</h3>

<p>Whitcher, B., V. J. Schmid and A. Thornton (2011).  Working with
the DICOM and NIfTI Data Standards in R, <em>Journal of Statistical
Software</em>, <b>44</b> (6), 1&ndash;28.  <a href="http://www.jstatsoft.org/v44/i06">http://www.jstatsoft.org/v44/i06</a>
</p>
<p>Digital Imaging and Communications in Medicine (DICOM)<br />
<a href="http://medical.nema.org">http://medical.nema.org</a>
</p>

<hr>
<h2 id='extractHeader'>Extract Single Field from DICOM Headers</h2><span id='topic+extractHeader'></span>

<h3>Description</h3>

<p>A particular DICOM field is extracted for a collection of DICOM headers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extractHeader(hdrs, string, numeric = TRUE, names = FALSE,
  inSequence = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extractHeader_+3A_hdrs">hdrs</code></td>
<td>
<p>List object of DICOM headers.</p>
</td></tr>
<tr><td><code id="extractHeader_+3A_string">string</code></td>
<td>
<p>DICOM field name.</p>
</td></tr>
<tr><td><code id="extractHeader_+3A_numeric">numeric</code></td>
<td>
<p>Logical; values are converted to numbers when <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="extractHeader_+3A_names">names</code></td>
<td>
<p>Logical; file names are kept with elements of the vector.</p>
</td></tr>
<tr><td><code id="extractHeader_+3A_insequence">inSequence</code></td>
<td>
<p>Logical; whether or not to look into SequenceItem
elements.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The DICOM field is extracted from each DICOM header and placed into a
vector.
</p>


<h3>Value</h3>

<p>Vector of values from the requested DICOM field.
</p>


<h3>Author(s)</h3>

<p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a>
</p>


<h3>References</h3>

<p>Digital Imaging and Communications in Medicine (DICOM)<br />
<a href="http://medical.nema.org">http://medical.nema.org</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDICOM">readDICOM</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
x &lt;- readDICOMFile(system.file("dcm/Abdo.dcm", package="oro.dicom"))
seriesDescription &lt;- extractHeader(x$hdr, "SeriesDescription", numeric=FALSE)
IOP &lt;- extractHeader(x$hdr, "ImageOrientationPatient", numeric=FALSE)

</code></pre>

<hr>
<h2 id='getOrientation'>Convert Direction Cosines to Anatomical Direction</h2><span id='topic+getOrientation'></span>

<h3>Description</h3>

<p>For cross-sectional DICOM images the orientation must be derived from the
Image Orientation (Patient) direction cosines.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getOrientation(xyz, delta = 0.0001)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getOrientation_+3A_xyz">xyz</code></td>
<td>
<p>is a vector of direction cosines from
&ldquo;ImageOrientationPatient&rdquo; (0020,0037).</p>
</td></tr>
<tr><td><code id="getOrientation_+3A_delta">delta</code></td>
<td>
<p>is the tolerance around zero for comparisons.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>C.7.6.2.1.1 Image Position And Image Orientation.  The Image Position
(0020,0032) specifies the x, y, and z coordinates of the upper left hand
corner of the image; it is the center of the first voxel transmitted.  Image
Orientation (0020,0037) specifies the direction cosines of the first row and
the first column with respect to the patient.  These Attributes shall be
provide as a pair.  Row value for the x, y, and z axes respectively followed
by the Column value for the x, y, and z axes respectively.  The direction of
the axes is defined fully by the patient's orientation.  The x-axis is
increasing to the left hand side of the patient.  The y-axis is increasing
to the posterior side of the patient.  The z-axis is increasing toward the
head of the patient.  The patient based coordinate system is a right handed
system; i.e., the vector cross product of a unit vector along the positive
x-axis and a unit vector along the positive y-axis is equal to a unit vector
along the positive z-axis.
</p>


<h3>Value</h3>

<p>Anatomical direction shall be designated by the capital letters:
</p>
<table>
<tr><td><code>A</code></td>
<td>
<p>anterior</p>
</td></tr> <tr><td><code>P</code></td>
<td>
<p>posterior</p>
</td></tr> <tr><td><code>R</code></td>
<td>
<p>right</p>
</td></tr> <tr><td><code>L</code></td>
<td>
<p>left</p>
</td></tr>
<tr><td><code>H</code></td>
<td>
<p>head</p>
</td></tr> <tr><td><code>F</code></td>
<td>
<p>foot</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a>
</p>


<h3>References</h3>

<p><a href="http://www.dclunie.com/medical-image-faq/html/part2.html">http://www.dclunie.com/medical-image-faq/html/part2.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+swapDimension">swapDimension</a></code>
</p>

<hr>
<h2 id='header2matrix'>Converts DICOM Header Field to a Matrix</h2><span id='topic+header2matrix'></span>

<h3>Description</h3>

<p>Converts a vector of DICOM header information, assuming there are multiple
entries per element of the vector, into a matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>header2matrix(hdr, ncol, sep = " ", byrow = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="header2matrix_+3A_hdr">hdr</code></td>
<td>
<p>is the result from extracting information from a DICOM header
field; e.g., using <code>extractHeader</code>.</p>
</td></tr>
<tr><td><code id="header2matrix_+3A_ncol">ncol</code></td>
<td>
<p>is the number of columns.</p>
</td></tr>
<tr><td><code id="header2matrix_+3A_sep">sep</code></td>
<td>
<p>is the character string required to split entries in the header
field.</p>
</td></tr>
<tr><td><code id="header2matrix_+3A_byrow">byrow</code></td>
<td>
<p>is a logical variable (default = <code>TRUE</code>) telling the
routine to populate the matrix by rows then columns.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Matrix with <code>length(hdr)</code> rows and <code>ncol</code> columns.
</p>


<h3>Author(s)</h3>

<p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a>
</p>


<h3>References</h3>

<p>Digital Imaging and Communications in Medicine (DICOM)<br />
<a href="http://medical.nema.org">http://medical.nema.org</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+extractHeader">extractHeader</a></code>, <code><a href="base.html#topic+matrix">matrix</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
x &lt;- readDICOMFile(system.file("dcm/Abdo.dcm", package="oro.dicom"))
pixelSpacing &lt;- extractHeader(x$hdr, "PixelSpacing", numeric=FALSE)
pSmat &lt;- header2matrix(pixelSpacing, ncol=2)
IOP &lt;- extractHeader(x$hdr, "ImageOrientationPatient", numeric=FALSE)
IOPmat &lt;- header2matrix(IOP, ncol=6)

</code></pre>

<hr>
<h2 id='matchHeader'>Match String to DICOM Header Field</h2><span id='topic+matchHeader'></span>

<h3>Description</h3>

<p>A convenient wrapper function that utilizes internal functions to match
character strings with the DICOM header information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>matchHeader(hdr, string)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="matchHeader_+3A_hdr">hdr</code></td>
<td>
<p>is the result from extracting information from a DICOM header
field; e.g., using <code>extractHeader</code>.</p>
</td></tr>
<tr><td><code id="matchHeader_+3A_string">string</code></td>
<td>
<p>is a character string to be matched with the DICOM header.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical vector of length <code>length(hdr)</code>.
</p>


<h3>Author(s)</h3>

<p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a>
</p>


<h3>References</h3>

<p>Digital Imaging and Communications in Medicine (DICOM)<br />
<a href="http://medical.nema.org">http://medical.nema.org</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+extractHeader">extractHeader</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
x &lt;- readDICOMFile(system.file("dcm/Abdo.dcm", package="oro.dicom"))
modality &lt;- extractHeader(x$hdr, "Modality", numeric=FALSE)
matchHeader(modality, "mr") # case insensitive by default

</code></pre>

<hr>
<h2 id='nextHeader'>Check String Against DICOM Header Field to Produce Error Message or NEXT</h2><span id='topic+nextHeader'></span>

<h3>Description</h3>

<p>A function designed to <code>break</code> out of loops given information (or the
lack thereof) contained in the DICOM header.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nextHeader(dcm, string, reference, str.warning, htmlfile = NULL,
  heading = 3, numeric = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nextHeader_+3A_dcm">dcm</code></td>
<td>
<p>is the DICOM list structure.</p>
</td></tr>
<tr><td><code id="nextHeader_+3A_string">string</code></td>
<td>
<p>is a character string to be matched with the DICOM header.</p>
</td></tr>
<tr><td><code id="nextHeader_+3A_reference">reference</code></td>
<td>
<p>is the scalar/vector of character strings to check against
the DICOM header output.</p>
</td></tr>
<tr><td><code id="nextHeader_+3A_str.warning">str.warning</code></td>
<td>
<p>is a text string for the warning.</p>
</td></tr>
<tr><td><code id="nextHeader_+3A_htmlfile">htmlfile</code></td>
<td>
<p>is the <span class="pkg">hwriter</span> object for the HTML file (default =
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="nextHeader_+3A_heading">heading</code></td>
<td>
<p>is the HTML tag &lt;H?&gt; (default = <code>3</code>).</p>
</td></tr>
<tr><td><code id="nextHeader_+3A_numeric">numeric</code></td>
<td>
<p>is the argument to be passed to <code>matchHeader</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An expression to be evaluated and HTML content.
</p>


<h3>Author(s)</h3>

<p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a>
</p>


<h3>References</h3>

<p>Digital Imaging and Communications in Medicine (DICOM)<br />
<a href="http://medical.nema.org">http://medical.nema.org</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+extractHeader">extractHeader</a></code>, <code><a href="#topic+matchHeader">matchHeader</a></code>
</p>

<hr>
<h2 id='orthogonal-planes'>Orthogonal Planes</h2><span id='topic+orthogonal-planes'></span><span id='topic+is.axial'></span><span id='topic+is.coronal'></span><span id='topic+is.sagittal'></span>

<h3>Description</h3>

<p>Functions to test the orientation for a single slice.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.axial(imageOrientationPatient, axial = c("L", "R", "A", "P"))

is.coronal(imageOrientationPatient, coronal = c("L", "R", "H", "F"))

is.sagittal(imageOrientationPatient, sagittal = c("A", "P", "H", "F"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="orthogonal-planes_+3A_imageorientationpatient">imageOrientationPatient</code></td>
<td>
<p>A vector of length six taken from the DICOM
header field &ldquo;ImageOrientationPatient&rdquo;.</p>
</td></tr>
<tr><td><code id="orthogonal-planes_+3A_axial">axial</code></td>
<td>
<p>Characters that are valid in defining an &lsquo;axial&rsquo; slice.</p>
</td></tr>
<tr><td><code id="orthogonal-planes_+3A_coronal">coronal</code></td>
<td>
<p>Characters that are valid in defining a &lsquo;coronal&rsquo;
slice.</p>
</td></tr>
<tr><td><code id="orthogonal-planes_+3A_sagittal">sagittal</code></td>
<td>
<p>Characters that are valid in defining a &lsquo;sagittal&rsquo;
slice.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical value.
</p>


<h3>Author(s)</h3>

<p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getOrientation">getOrientation</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
x &lt;- readDICOMFile(system.file("dcm/Abdo.dcm", package="oro.dicom"))
iop &lt;- header2matrix(extractHeader(x$hdr, "ImageOrientationPatient", FALSE), 6)
is.axial(iop)
is.coronal(iop)
is.sagittal(iop)

x &lt;- readDICOMFile(system.file("dcm/Spine1.dcm", package="oro.dicom"))
iop &lt;- header2matrix(extractHeader(x$hdr, "ImageOrientationPatient", FALSE), 6)
is.axial(iop)
is.coronal(iop)
is.sagittal(iop)

</code></pre>

<hr>
<h2 id='parsePixelData'>Parse DICOM Pixel or Spectroscopy Data</h2><span id='topic+parsePixelData'></span><span id='topic+parseSpectroscopyData'></span>

<h3>Description</h3>

<p>These subroutines process the information contained after the DICOM header
and process this information into an image (2D or 3D) or complex-valued
vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parsePixelData(rawString, hdr, endian = "little", flipupdown = TRUE)

parseSpectroscopyData(rawString, hdr, endian = "little")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parsePixelData_+3A_rawstring">rawString</code></td>
<td>
<p>is a vector of <code>raw</code> values taken directly from the
DICOM file.</p>
</td></tr>
<tr><td><code id="parsePixelData_+3A_hdr">hdr</code></td>
<td>
<p>is the list object of DICOM header information.</p>
</td></tr>
<tr><td><code id="parsePixelData_+3A_endian">endian</code></td>
<td>
<p>is the endian-ness of the file (default is <code>"little"</code>).</p>
</td></tr>
<tr><td><code id="parsePixelData_+3A_flipupdown">flipupdown</code></td>
<td>
<p>is a logical variable for vertical flipping of the image
(default is <code>TRUE</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A <code>while</code> loop is used to traverse the unknown number of DICOM header
fields contained in a single file.  Information contained in
&ldquo;sequences&rdquo; may be included/excluded according to the logical
variable <code>skipSequence</code> (default = <code>TRUE</code>).
</p>
<p>A recursive implementation of the code breaks the DICOM file into segments
and calls itself to parse each segment.
</p>


<h3>Value</h3>

<p>A list containing two elements: </p>
 <dl>
<dt>hdr</dt><dd><p>all DICOM
header fields (with or without &ldquo;sequence&rdquo; information).</p>
</dd>
<dt>img</dt><dd><p>the &lsquo;image&rsquo; information.</p>
</dd> </dl>



<h3>Author(s)</h3>

<p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a>
</p>


<h3>Source</h3>

<p>See references.
</p>


<h3>References</h3>

<p>Digital Imaging and Communications in Medicine (DICOM)<br />
<a href="http://medical.nema.org">http://medical.nema.org</a><br />
<a href="http://en.wikipedia.org/wiki/Digital_Imaging_and_Communications_in_Medicine">http://en.wikipedia.org/wiki/Digital_Imaging_and_Communications_in_Medicine</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+parseDICOMHeader">parseDICOMHeader</a></code>, <code><a href="#topic+readDICOMFile">readDICOMFile</a></code>.
</p>

<hr>
<h2 id='readDICOM'>Read All DICOM Files in a Directory</h2><span id='topic+readDICOM'></span>

<h3>Description</h3>

<p>All DICOM files are imported and a text file summarizing their content
recorded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDICOM(path, recursive = TRUE, exclude = NULL, verbose = FALSE,
  counter, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readDICOM_+3A_path">path</code></td>
<td>
<p>Path name to the DICOM directory.</p>
</td></tr>
<tr><td><code id="readDICOM_+3A_recursive">recursive</code></td>
<td>
<p>Search recursively down from the given path name.</p>
</td></tr>
<tr><td><code id="readDICOM_+3A_exclude">exclude</code></td>
<td>
<p>Exclude file names containing this character string.</p>
</td></tr>
<tr><td><code id="readDICOM_+3A_verbose">verbose</code></td>
<td>
<p>Flag to provide text-based progress bar.</p>
</td></tr>
<tr><td><code id="readDICOM_+3A_counter">counter</code></td>
<td>
<p>Ignored.</p>
</td></tr>
<tr><td><code id="readDICOM_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <code>readDICOMFile</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A <code>for</code> loop is used to process each DICOM file contained in the
directory(ies).  If only a single file is specified in the path,
<code>readDICOM</code> will read that file only.
</p>


<h3>Value</h3>

<p>A list structure with two major components: </p>
<table>
<tr><td><code>img</code></td>
<td>
<p>All images
associated with the DICOM directory(ies).</p>
</td></tr> <tr><td><code>hdr</code></td>
<td>
<p>All header files
associated with the DICOM directory(ies).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a>
</p>


<h3>References</h3>

<p>Whitcher, B., V. J. Schmid and A. Thornton (2011).  Working with
the DICOM and NIfTI Data Standards in R, <em>Journal of Statistical
Software</em>, <b>44</b> (6), 1&ndash;28.  <a href="http://www.jstatsoft.org/v44/i06">http://www.jstatsoft.org/v44/i06</a>
</p>
<p>Digital Imaging and Communications in Medicine (DICOM)<br />
<a href="http://medical.nema.org">http://medical.nema.org</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDICOMFile">readDICOMFile</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## pixelData = TRUE
## The DICOM image data are read from readDICOM()

## Not run: 
dcmSphere &lt;- readDICOM(system.file("sphere3", package="oro.dicom"), verbose=TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='readDICOMFile'>Read Single DICOM File</h2><span id='topic+readDICOMFile'></span><span id='topic+parseDICOMHeader'></span>

<h3>Description</h3>

<p>All information, both header and image, is read into a list structure from a
DICOM file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDICOMFile(fname, boffset = NULL, endian = "little",
  flipud = TRUE, skipSequence = FALSE, pixelData = TRUE, warn = -1,
  debug = FALSE)

parseDICOMHeader(rawString, sq.txt = "", endian = "little",
  verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readDICOMFile_+3A_fname">fname</code></td>
<td>
<p>is the file name of the DICOM image (with suffix).</p>
</td></tr>
<tr><td><code id="readDICOMFile_+3A_boffset">boffset</code></td>
<td>
<p>is the number of bytes to skip at the beginning of the DICOM
file (default = <code>NULL</code> which lets the code determine the starting
point).</p>
</td></tr>
<tr><td><code id="readDICOMFile_+3A_endian">endian</code></td>
<td>
<p>is the endian-ness of the file (default is <code>"little"</code>).</p>
</td></tr>
<tr><td><code id="readDICOMFile_+3A_flipud">flipud</code></td>
<td>
<p>is a logical variable for vertical flipping of the image
(default is <code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="readDICOMFile_+3A_skipsequence">skipSequence</code></td>
<td>
<p>is a logical variable to skip all content contained in
SequenceItem tags (default = <code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="readDICOMFile_+3A_pixeldata">pixelData</code></td>
<td>
<p>is a logical variable (default = <code>TRUE</code>) on whether or
not the PixelData should be read from the DICOM files.  This is useful when
one wants to gather the DICOM header information without loading the images.</p>
</td></tr>
<tr><td><code id="readDICOMFile_+3A_warn">warn</code></td>
<td>
<p>is a number to regulate the display of warnings (default = -1).
See <code>options</code> for more details.</p>
</td></tr>
<tr><td><code id="readDICOMFile_+3A_debug">debug</code></td>
<td>
<p>is a logical variable (default = <code>FALSE</code>) that regulates
to display of intermediate processing steps.</p>
</td></tr>
<tr><td><code id="readDICOMFile_+3A_rawstring">rawString</code></td>
<td>
<p>is a vector of <code>raw</code> values taken directly from the
DICOM file.</p>
</td></tr>
<tr><td><code id="readDICOMFile_+3A_sq.txt">sq.txt</code></td>
<td>
<p>is an character string (default = &ldquo;&rdquo;) that indicates if
the DICOM header field is embedded within a sequence.</p>
</td></tr>
<tr><td><code id="readDICOMFile_+3A_verbose">verbose</code></td>
<td>
<p>is a logical variable (default = <code>FALSE</code>) that regulates
to display of intermediate processing steps.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A <code>while</code> loop is used to traverse the unknown number of DICOM header
fields contained in a single file.  Information contained in
&ldquo;sequences&rdquo; may be included/excluded according to the logical
variable <code>skipSequence</code> (default = <code>TRUE</code>).
</p>
<p>A resursive implementation of the code breaks the DICOM file into segments
and calls itself to parse each segment.
</p>
<p>Strict adherence to the DICOM standard is not required.  Specifically,
content is allowed to start at the first byte and the four characters
&lsquo;DICM&rsquo; are not required at bytes 129-132.
</p>


<h3>Value</h3>

<p>A list containing two elements: </p>
 <dl>
<dt>hdr</dt><dd><p>all DICOM
header fields (with or without &ldquo;sequence&rdquo; information).</p>
</dd>
<dt>img</dt><dd><p>the &lsquo;image&rsquo; information.</p>
</dd> </dl>



<h3>Author(s)</h3>

<p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a>
</p>


<h3>References</h3>

<p>Whitcher, B., V. J. Schmid and A. Thornton (2011).  Working with
the DICOM and NIfTI Data Standards in R, <em>Journal of Statistical
Software</em>, <b>44</b> (6), 1&ndash;28.  <a href="http://www.jstatsoft.org/v44/i06">http://www.jstatsoft.org/v44/i06</a>
</p>
<p>Digital Imaging and Communications in Medicine (DICOM)<br />
<a href="http://medical.nema.org">http://medical.nema.org</a><br />
<a href="http://en.wikipedia.org/wiki/Digital_Imaging_and_Communications_in_Medicine">http://en.wikipedia.org/wiki/Digital_Imaging_and_Communications_in_Medicine</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDICOM">readDICOM</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
x &lt;- readDICOMFile(system.file("dcm/Abdo.dcm", package="oro.dicom"))
graphics::image(t(x$img), col=grey(0:64/64), axes=FALSE, xlab="", ylab="",
                main="Abdo.dcm")

x &lt;- readDICOMFile(system.file("dcm/Spine1.dcm", package="oro.dicom"))
graphics::image(t(x$img), col=grey(0:64/64), axes=FALSE, xlab="", ylab="",
                main="Spine1.dcm")

</code></pre>

<hr>
<h2 id='str2time'>Convert DICOM Time/Date Entry</h2><span id='topic+str2time'></span><span id='topic+str2date'></span>

<h3>Description</h3>

<p>The DICOM time entry (TM) is converted into two alternative formats: a text
version of the original format and a number in seconds.  The DICOM date
entry (DA) is converted into a simple alternative format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>str2time(tt, format.out = "%02i:%02i:%08.5f")

str2date(dd, format.in = "%Y%m%d", format.out = "%d %b %Y")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="str2time_+3A_tt">tt</code></td>
<td>
<p>TM field from a DICOM header.</p>
</td></tr>
<tr><td><code id="str2time_+3A_dd">dd</code></td>
<td>
<p>DA field from a DICOM header.</p>
</td></tr>
<tr><td><code id="str2time_+3A_format.in">format.in</code>, <code id="str2time_+3A_format.out">format.out</code></td>
<td>
<p>Appropriate formatting of input or output.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>DICOM &ldquo;TM&rdquo; format consists of a string of characters of the format
<code>hhmmss.frac</code>; where <code>hh</code> contains hours (range &ldquo;00&rdquo; -
&ldquo;23&rdquo;), <code>mm</code> contains minutes (range &ldquo;00&rdquo; - &ldquo;59&rdquo;),
<code>ss</code> contains seconds (range &ldquo;00&rdquo; - &ldquo;59&rdquo;), and
<code>frac</code> contains a fractional part of a second as small as 1 millionth
of a second (range 000000 - 999999).  A 24 hour clock is assumed.  Midnight
can be represented by only 0000 since 2400 would violate the hour range.
The string may be padded with trailing spaces.  Leading and embedded spaces
are not allowed.  One or more of the components <code>mm</code>, <code>ss</code>, or
<code>frac</code> may be unspecified as long as every component to the right of an
unspecified component is also unspecified.  If <code>frac</code> is unspecified
the preceding &ldquo;.&rdquo; may not be included.  <code>Frac</code> shall be held to
six decimal places or less to ensure its format conforms to the ANSI HISPP
MSDS Time common data type.  Examples: </p>
 <dl>
<dt>1.</dt><dd><p>070907.0705
represents a time of 7 hours, 9 minutes and 7.0705 seconds.</p>
</dd> <dt>2.</dt><dd><p>1010
represents a time of 10 hours, and 10 minutes.</p>
</dd> <dt>3.</dt><dd><p>021 is an invalid
value.</p>
</dd> </dl>
<p> Notes: For reasons of backward compatibility with versions of this
standard prior to V3.0, it is recommended that implementations also support
a string of characters of the format <code>hh:mm:ss.frac</code> for this VR.
</p>
<p>DICOM &ldquo;DA&rdquo; format A string of characters of the format yyyymmdd;
where yyyy shall contain year, mm shall contain the month, and dd shall
contain the day. This conforms to the ANSI HISPP MSDS Date common data type.
Example: </p>
 <dl>
<dt>1.</dt><dd><p>19930822 would represent August 22, 1993.</p>
</dd> </dl>

<p>Notes: For reasons of backward compatibility with versions of this standard
prior to V3.0, it is recommended that implementations also support a string
of characters of the format yyyy.mm.dd for this VR.
</p>


<h3>Value</h3>

<p>For &ldquo;TM&rdquo;, a list structure containing two fields </p>
<table>
<tr><td><code>txt</code></td>
<td>
<p>A
text version of the time where colons have been inserted for readability.</p>
</td></tr>
<tr><td><code>time</code></td>
<td>
<p>Time in seconds from midnight.</p>
</td></tr></table>
<p> for &ldquo;DA&rdquo;, a simple
character string.
</p>


<h3>Author(s)</h3>

<p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a>
</p>


<h3>References</h3>

<p>Digital Imaging and Communications in Medicine (DICOM)<br />
<a href="http://medical.nema.org">http://medical.nema.org</a><br />
<a href="http://en.wikipedia.org/wiki/Digital_Imaging_and_Communications_in_Medicine">http://en.wikipedia.org/wiki/Digital_Imaging_and_Communications_in_Medicine</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readDICOM">readDICOM</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
str2date("19930822")
str2time("112308")

</code></pre>

<hr>
<h2 id='swapDimension'>Reslice Data Volume Using DICOM Header Fields</h2><span id='topic+swapDimension'></span>

<h3>Description</h3>

<p>The input data volume (assumed to be three-dimensional) is re-sliced so that
each slice is in the axial plane.  Orientation is preserved so that
orthographic viewing is standardized.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>swapDimension(img, dcm, digits = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="swapDimension_+3A_img">img</code></td>
<td>
<p>Multidimensional array (assumed to be three-dimensional only).</p>
</td></tr>
<tr><td><code id="swapDimension_+3A_dcm">dcm</code></td>
<td>
<p>DICOM header/image object associated with the multidimensional
array.</p>
</td></tr>
<tr><td><code id="swapDimension_+3A_digits">digits</code></td>
<td>
<p>Number of significant digits used in testing
<code>unique</code>-ness of values in DICOM header fields.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Multidimensional array with (potentially) permuted dimensions
because of the reslicing operation.  An additional attribute
&ldquo;<code>pixdim</code>&rdquo; is provided in order to facilitate conversion from
DICOM to NIFTI/ANALYZE.
</p>


<h3>Author(s)</h3>

<p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dicom2nifti">dicom2nifti</a></code>, <code><a href="#topic+getOrientation">getOrientation</a></code>
</p>

<hr>
<h2 id='writeHeader'>Write DICOM Table to ASCII File</h2><span id='topic+writeHeader'></span>

<h3>Description</h3>

<p>A wrapper to <code>write.table</code> specifically for DICOM tables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>writeHeader(dtable, filename, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="writeHeader_+3A_dtable">dtable</code></td>
<td>
<p>The DICOM table.</p>
</td></tr>
<tr><td><code id="writeHeader_+3A_filename">filename</code></td>
<td>
<p>Name of the file to be created.</p>
</td></tr>
<tr><td><code id="writeHeader_+3A_...">...</code></td>
<td>
<p>Additional parameters to be passed to <code>write.table</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a straightforward wrapper to <code>write.table</code>.
</p>


<h3>Value</h3>

<p>None.
</p>


<h3>Author(s)</h3>

<p>Brandon Whitcher <a href="mailto:bwhitcher@gmail.com">bwhitcher@gmail.com</a>
</p>


<h3>References</h3>

<p>Digital Imaging and Communications in Medicine (DICOM)<br />
<a href="http://medical.nema.org">http://medical.nema.org</a>
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+write.table">write.table</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
