<!DOCTYPE html><html><head><title>Help for package autovi</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {autovi}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#AUTO_VI'><p>AUTO_VI class environment</p></a></li>
<li><a href='#AUTO_VI+24..init..'><p>Initialization method</p></a></li>
<li><a href='#AUTO_VI+24..str..'><p>String representation of the object</p></a></li>
<li><a href='#AUTO_VI+24auxiliary'><p>Compute auxiliary variables for the keras model</p></a></li>
<li><a href='#AUTO_VI+24boot_vss'><p>Predict visual signal strength for bootstrapped residual plots</p></a></li>
<li><a href='#AUTO_VI+24check'><p>Conduct a auto visual inference check with a computer vision model</p></a></li>
<li><a href='#AUTO_VI+24check_result'><p>List of diagnostic results</p></a></li>
<li><a href='#AUTO_VI+24feature_pca'><p>Conduct principal component analysis for features extracted from keras model</p></a></li>
<li><a href='#AUTO_VI+24feature_pca_plot'><p>Draw a summary Plot for principal component analysis conducted on extracted features</p></a></li>
<li><a href='#AUTO_VI+24get_data'><p>Get data out of a model object</p></a></li>
<li><a href='#AUTO_VI+24get_fitted_and_resid'><p>Get fitted values and residuals out of a model object</p></a></li>
<li><a href='#AUTO_VI+24likelihood_ratio'><p>Compute the likelihood ratio using the simulated result</p></a></li>
<li><a href='#AUTO_VI+24lineup_check'><p>Conduct a auto visual inference lineup check with a computer vision model</p></a></li>
<li><a href='#AUTO_VI+24null_method'><p>Get null residuals from a fitted model</p></a></li>
<li><a href='#AUTO_VI+24null_vss'><p>Simulate null plots and predict the visual signal strength</p></a></li>
<li><a href='#AUTO_VI+24p_value'><p>Compute the p-value based on the check result</p></a></li>
<li><a href='#AUTO_VI+24plot_resid'><p>Draw a standard residual plot</p></a></li>
<li><a href='#AUTO_VI+24rotate_resid'><p>Get rotated residuals from a fitted linear model</p></a></li>
<li><a href='#AUTO_VI+24select_feature'><p>Select features from the check result</p></a></li>
<li><a href='#AUTO_VI+24summary_density_plot'><p>Draw a summary density plot for the result</p></a></li>
<li><a href='#AUTO_VI+24summary_plot'><p>Draw a summary plot for the result</p></a></li>
<li><a href='#AUTO_VI+24summary_rank_plot'><p>Draw a summary rank plot for the result</p></a></li>
<li><a href='#AUTO_VI+24vss'><p>Predict the visual signal strength</p></a></li>
<li><a href='#check_python_library_available'><p>Check python library availability</p></a></li>
<li><a href='#get_keras_model'><p>Download and load the keras model</p></a></li>
<li><a href='#KERAS_WRAPPER'><p>KERAS_WRAPPER class environment</p></a></li>
<li><a href='#KERAS_WRAPPER+24..init..'><p>Initialization method</p></a></li>
<li><a href='#KERAS_WRAPPER+24..str..'><p>String representation of the object</p></a></li>
<li><a href='#KERAS_WRAPPER+24get_input_height'><p>Get keras model input image height</p></a></li>
<li><a href='#KERAS_WRAPPER+24get_input_width'><p>Get keras model input image width</p></a></li>
<li><a href='#KERAS_WRAPPER+24image_to_array'><p>Load an image as numpy array</p></a></li>
<li><a href='#KERAS_WRAPPER+24list_layer_name'><p>List all layer names</p></a></li>
<li><a href='#KERAS_WRAPPER+24predict'><p>Predict visual signal strength</p></a></li>
<li><a href='#list_keras_model'><p>List all available pre-trained computer vision models</p></a></li>
<li><a href='#remove_plot'><p>Remove a plot</p></a></li>
<li><a href='#save_plot'><p>Save a plot</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Auto Visual Inference with Computer Vision Models</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides automated visual inference of residual plots using computer vision models, facilitating diagnostic checks for classical normal linear regression models.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://tengmcing.github.io/autovi/">https://tengmcing.github.io/autovi/</a>,
<a href="https://github.com/TengMCing/autovi/">https://github.com/TengMCing/autovi/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/TengMCing/autovi/issues">https://github.com/TengMCing/autovi/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>bandicoot, ggplot2, stats, tibble, tools, reticulate, utils,
cassowaryr, cli</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, knitr, testthat (&ge; 3.0.0), covr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-24 19:02:05 UTC; patrickli</td>
</tr>
<tr>
<td>Author:</td>
<td>Weihao Li <a href="https://orcid.org/0000-0003-4959-106X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Weihao Li &lt;llreczx@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-25 14:30:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='AUTO_VI'>AUTO_VI class environment</h2><span id='topic+AUTO_VI'></span><span id='topic+auto_vi'></span>

<h3>Description</h3>

<p>This is the class of auto visual inference,
inherited from <a href="bandicoot.html#topic+BASE">bandicoot::BASE</a>. It is an environment
with S3 class <code>bandicoot_oop</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>auto_vi(
  fitted_model,
  keras_model = NULL,
  data = NULL,
  node_index = 1L,
  env = new.env(parent = parent.frame()),
  init_call = sys.call()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI_+3A_fitted_model">fitted_model</code></td>
<td>
<p>Model. A model object, e.g. <code>lm</code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI_+3A_keras_model">keras_model</code></td>
<td>
<p>Keras model. A trained computer vision model.</p>
</td></tr>
<tr><td><code id="AUTO_VI_+3A_data">data</code></td>
<td>
<p>Data frame. The data used to fit the model.</p>
</td></tr>
<tr><td><code id="AUTO_VI_+3A_node_index">node_index</code></td>
<td>
<p>Integer. An index indicating which node of the output layer
contains the visual signal strength. This is particularly useful
when the keras model has more than one output nodes.</p>
</td></tr>
<tr><td><code id="AUTO_VI_+3A_env">env</code></td>
<td>
<p>Environment. The instance environment.</p>
</td></tr>
<tr><td><code id="AUTO_VI_+3A_init_call">init_call</code></td>
<td>
<p>Call. Contents of the <code>..init_call...</code> It is recommended to leave it
as default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An instance environment.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>auto_vi()</code>: Class constructor, same as <code>AUTO_VI$instantiate()</code>.
</p>
</li></ul>


<h3>Class information</h3>



<h4>Parent classes</h4>


<ul>
<li><p> Direct:
</p>

<ul>
<li> <p><a href="bandicoot.html#topic+BASE">bandicoot::BASE</a>
</p>
</li></ul>

</li></ul>




<h4>New attributes</h4>


<ul>
<li><p> C:
</p>

<ul>
<li> <p><a href="#topic+AUTO_VI+24check_result">AUTO_VI$check_result</a>
</p>
</li></ul>

</li></ul>




<h4>New methods</h4>


<ul>
<li><p> A:
</p>

<ul>
<li> <p><code><a href="#topic+AUTO_VI+24auxiliary">AUTO_VI$auxiliary()</a></code>
</p>
</li></ul>

</li>
<li><p> B:
</p>

<ul>
<li> <p><code><a href="#topic+AUTO_VI+24boot_vss">AUTO_VI$boot_vss()</a></code>
</p>
</li></ul>

</li>
<li><p> C:
</p>

<ul>
<li> <p><code><a href="#topic+AUTO_VI+24check">AUTO_VI$check()</a></code>
</p>
</li></ul>

</li>
<li><p> F:
</p>

<ul>
<li> <p><code><a href="#topic+AUTO_VI+24feature_pca">AUTO_VI$feature_pca()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+AUTO_VI+24feature_pca_plot">AUTO_VI$feature_pca_plot()</a></code>
</p>
</li></ul>

</li>
<li><p> G:
</p>

<ul>
<li> <p><code><a href="#topic+AUTO_VI+24get_data">AUTO_VI$get_data()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+AUTO_VI+24get_fitted_and_resid">AUTO_VI$get_fitted_and_resid()</a></code>
</p>
</li></ul>

</li>
<li><p> I:
</p>

<ul>
<li> <p><code><a href="#topic+AUTO_VI+24..init..">AUTO_VI$..init..()</a></code>
</p>
</li></ul>

</li>
<li><p> L:
</p>

<ul>
<li> <p><code><a href="#topic+AUTO_VI+24lineup_check">AUTO_VI$lineup_check()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+AUTO_VI+24likelihood_ratio">AUTO_VI$likelihood_ratio()</a></code>
</p>
</li></ul>

</li>
<li><p> N:
</p>

<ul>
<li> <p><code><a href="#topic+AUTO_VI+24null_method">AUTO_VI$null_method()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+AUTO_VI+24null_vss">AUTO_VI$null_vss()</a></code>
</p>
</li></ul>

</li>
<li><p> P:
</p>

<ul>
<li> <p><code><a href="#topic+AUTO_VI+24p_value">AUTO_VI$p_value()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+AUTO_VI+24plot_resid">AUTO_VI$plot_resid()</a></code>
</p>
</li></ul>

</li>
<li><p> R:
</p>

<ul>
<li> <p><code><a href="#topic+AUTO_VI+24rotate_resid">AUTO_VI$rotate_resid()</a></code>
</p>
</li></ul>

</li>
<li><p> S:
</p>

<ul>
<li> <p><code><a href="#topic+AUTO_VI+24select_feature">AUTO_VI$select_feature()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+AUTO_VI+24..str..">AUTO_VI$..str..()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+AUTO_VI+24summary_density_plot">AUTO_VI$summary_density_plot()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+AUTO_VI+24summary_plot">AUTO_VI$summary_plot()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+AUTO_VI+24summary_rank_plot">AUTO_VI$summary_rank_plot()</a></code>
</p>
</li></ul>

</li>
<li><p> V:
</p>

<ul>
<li> <p><code><a href="#topic+AUTO_VI+24vss">AUTO_VI$vss()</a></code>
</p>
</li></ul>

</li></ul>



<hr>
<h2 id='AUTO_VI+24..init..'>Initialization method</h2><span id='topic+AUTO_VI+24..init..'></span>

<h3>Description</h3>

<p>This function will be called after an instance is built. User
input will be stored in the environment.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$..init..(fitted_model, keras_model = NULL, data = NULL, node_index = 1L)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24..init.._+3A_fitted_model">fitted_model</code></td>
<td>
<p>Model. A model object, e.g. <code>lm</code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24..init.._+3A_keras_model">keras_model</code></td>
<td>
<p>Keras model. A trained computer vision model.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24..init.._+3A_data">data</code></td>
<td>
<p>Data frame. The data used to fit the model.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24..init.._+3A_node_index">node_index</code></td>
<td>
<p>Integer. An index indicating which node of the output layer
contains the visual signal strength. This is particularly useful
when the keras model has more than one output nodes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return the object itself.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>my_vi &lt;- auto_vi(fitted_model = lm(speed ~ dist, data = cars))
my_vi
</code></pre>

<hr>
<h2 id='AUTO_VI+24..str..'>String representation of the object</h2><span id='topic+AUTO_VI+24..str..'></span>

<h3>Description</h3>

<p>This function returns a string representation of the object.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$..str..()
</pre></div>



<h3>Value</h3>

<p>A string.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AUTO_VI$..str..()

my_vi &lt;- auto_vi(fitted_model = lm(speed ~ dist, data = cars))
my_vi$..str..()
</code></pre>

<hr>
<h2 id='AUTO_VI+24auxiliary'>Compute auxiliary variables for the keras model</h2><span id='topic+AUTO_VI+24auxiliary'></span>

<h3>Description</h3>

<p>This function computes auxiliary variables
including monotonic measure (<code>measure_monotonic</code>),
sparse measure (<code>measure_sparse</code>), splines measure (<code>measure_splines</code>),
striped measure (<code>measure_striped</code>), and the number of observation (<code>n</code>).
Scagnostics are computed using
<code><a href="cassowaryr.html#topic+sc_monotonic">cassowaryr::sc_monotonic()</a></code>, <code><a href="cassowaryr.html#topic+sc_sparse2">cassowaryr::sc_sparse2()</a></code>, <code><a href="cassowaryr.html#topic+sc_splines">cassowaryr::sc_splines()</a></code>,
and <code><a href="cassowaryr.html#topic+sc_striped">cassowaryr::sc_striped()</a></code>.
</p>
<p>If you wish to calculate additional auxiliary variables for your keras
model, please override this method. Ensure that it accepts a data frame
with columns named <code>.fitted</code> and <code>.resid</code> as input and returns
a single row tibble.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$auxiliary(data = seflf$get_fitted_and_resid())
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24auxiliary_+3A_data">data</code></td>
<td>
<p>Data frame. A data frame containing variables <code>.resid</code> and
<code>.fitted</code>. See also <code><a href="#topic+AUTO_VI+24get_fitted_and_resid">AUTO_VI$get_fitted_and_resid()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
my_vi &lt;- auto_vi(fitted_model = lm(speed ~ dist, data = cars))
my_vi$auxiliary()
</code></pre>

<hr>
<h2 id='AUTO_VI+24boot_vss'>Predict visual signal strength for bootstrapped residual plots</h2><span id='topic+AUTO_VI+24boot_vss'></span>

<h3>Description</h3>

<p>This function bootstrap the data and refits the model, then
predicts the visual signal strength of the bootstrapped residual plots.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$boot_vss(
  draws = 100L,
  fitted_model = self$fitted_model,
  keras_model = self$keras_model,
  data = self$get_data(),
  node_index = 1L,
  keep_boot_data = FALSE,
  keep_boot_plot = FALSE,
  extract_feature_from_layer = NULL
)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24boot_vss_+3A_draws">draws</code></td>
<td>
<p>Integer. Number of simulation draws.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24boot_vss_+3A_fitted_model">fitted_model</code></td>
<td>
<p>Model. A model object, e.g. <code>lm</code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24boot_vss_+3A_keras_model">keras_model</code></td>
<td>
<p>Keras model. A trained computer vision model.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24boot_vss_+3A_data">data</code></td>
<td>
<p>Data frame. The data used to fit the model.
See also <code><a href="#topic+AUTO_VI+24get_data">AUTO_VI$get_data()</a></code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24boot_vss_+3A_node_index">node_index</code></td>
<td>
<p>Integer. An index indicating which node of the output layer
contains the visual signal strength. This is particularly useful
when the keras model has more than one output nodes.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24boot_vss_+3A_keep_boot_data">keep_boot_data</code></td>
<td>
<p>Boolean. Whether to keep the bootstrapped data.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24boot_vss_+3A_keep_boot_plot">keep_boot_plot</code></td>
<td>
<p>Boolean. Whether to keep the bootstrapped plots.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24boot_vss_+3A_extract_feature_from_layer">extract_feature_from_layer</code></td>
<td>
<p>Character/Integer. A layer name or an
integer layer index for extracting features from a layer.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keras_model &lt;- try(get_keras_model("vss_phn_32"))
if (!inherits(keras_model, "try-error")) {
  myvi &lt;- auto_vi(lm(dist ~ speed, data = cars), keras_model)

  myvi$boot_vss()
}
</code></pre>

<hr>
<h2 id='AUTO_VI+24check'>Conduct a auto visual inference check with a computer vision model</h2><span id='topic+AUTO_VI+24check'></span>

<h3>Description</h3>

<p>This function conducts a visual inference
check with a computer vision model. The result will be stored in
<code>self$check_result</code>.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$check(
  null_draws = 100L,
  boot_draws = 100L,
  fitted_model = self$fitted_model,
  keras_model = self$keras_model,
  null_method = self$null_method,
  p_value_type = "quantile",
  data = self$get_data(),
  node_index = self$node_index,
  keep_data = FALSE,
  keep_plot = FALSE,
  extract_feature_from_layer = NULL
)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24check_+3A_null_draws">null_draws</code></td>
<td>
<p>Integer. Number of simulation draws for
<code><a href="#topic+AUTO_VI+24null_vss">AUTO_VI$null_vss()</a></code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24check_+3A_boot_draws">boot_draws</code></td>
<td>
<p>Integer. Number of simulation draws for
<code><a href="#topic+AUTO_VI+24boot_vss">AUTO_VI$boot_vss()</a></code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24check_+3A_fitted_model">fitted_model</code></td>
<td>
<p>Model. A model object, e.g. <code>lm</code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24check_+3A_keras_model">keras_model</code></td>
<td>
<p>Keras model. A trained computer vision model.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24check_+3A_null_method">null_method</code></td>
<td>
<p>Function. A method to simulate residuals from the null
hypothesis distribution. For <code>lm</code>, the recommended method is residual
rotation <code><a href="#topic+AUTO_VI+24rotate_resid">AUTO_VI$rotate_resid()</a></code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24check_+3A_p_value_type">p_value_type</code></td>
<td>
<p>Character. Either &quot;quantile&quot; or &quot;lineup&quot;. See
also <code><a href="#topic+AUTO_VI+24p_value">AUTO_VI$p_value()</a></code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24check_+3A_data">data</code></td>
<td>
<p>Data frame. The data used to fit the model.
See also <code><a href="#topic+AUTO_VI+24get_data">AUTO_VI$get_data()</a></code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24check_+3A_node_index">node_index</code></td>
<td>
<p>Integer. An index indicating which node of the output layer
contains the visual signal strength. This is particularly useful
when the keras model has more than one output nodes.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24check_+3A_keep_data">keep_data</code></td>
<td>
<p>Boolean. Whether to keep the simulated data.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24check_+3A_keep_plot">keep_plot</code></td>
<td>
<p>Boolean. Whether to keep the simulated plots.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24check_+3A_extract_feature_from_layer">extract_feature_from_layer</code></td>
<td>
<p>Character/Integer. A layer name or an
integer layer index for extracting features from a layer.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return the object itself.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keras_model &lt;- try(get_keras_model("vss_phn_32"))
if (!inherits(keras_model, "try-error")) {
  myvi &lt;- auto_vi(lm(dist ~ speed, data = cars), keras_model)

  myvi$check()
  myvi
}
</code></pre>

<hr>
<h2 id='AUTO_VI+24check_result'>List of diagnostic results</h2><span id='topic+AUTO_VI+24check_result'></span>

<h3>Description</h3>

<p>A list, will be initialized after the method <code><a href="#topic+AUTO_VI+24check">AUTO_VI$check()</a></code>
is run.
</p>

<hr>
<h2 id='AUTO_VI+24feature_pca'>Conduct principal component analysis for features extracted from keras model</h2><span id='topic+AUTO_VI+24feature_pca'></span>

<h3>Description</h3>

<p>This function conducts principal component analysis for
features extracted from keras model.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$feature_pca(
  feature = self$select_feature(self$check_result$observed),
  null_feature = self$select_feature(self$check_result$null),
  boot_feature = self$select_feature(self$check_result$boot),
  center = TRUE,
  scale = TRUE
)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24feature_pca_+3A_feature">feature</code></td>
<td>
<p>Dataframe. A data frame where columns represent
features and rows represent observations. It should have only one row.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24feature_pca_+3A_null_feature">null_feature</code></td>
<td>
<p>Dataframe. A data frame where columns represent
features and rows represent observations. These features are extracted
during the evaluation of null plots.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24feature_pca_+3A_boot_feature">boot_feature</code></td>
<td>
<p>Dataframe. A data frame where columns represent
features and rows represent observations. These features are extracted
during the evaluation of bootstrapped plots.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24feature_pca_+3A_center">center</code></td>
<td>
<p>Boolean. Whether to subtract the mean from the feature.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24feature_pca_+3A_scale">scale</code></td>
<td>
<p>Boolean. Whether to divide the feature by its standard
deviation.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Features need to be extracted while running the method
<code><a href="#topic+AUTO_VI+24check">AUTO_VI$check()</a></code> and <code><a href="#topic+AUTO_VI+24lineup_check">AUTO_VI$lineup_check()</a></code> by providing the argument
<code>extract_feature_from_layer</code>. Features with zero variance will be ignored
from the analysis. See also <code><a href="stats.html#topic+prcomp">stats::prcomp()</a></code>.
</p>


<h3>Value</h3>

<p>A tibble of the raw features and the rotated features with
attributes <code>sdev</code> and <code>rotation</code> representing the
standard deviation of the principal
components and the rotation matrix respectively.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keras_model &lt;- try(get_keras_model("vss_phn_32"))
if (!inherits(keras_model, "try-error")) {
  myvi &lt;- auto_vi(lm(dist ~ speed, data = cars), keras_model)

  myvi$lineup_check(extract_feature_from_layer = "global_max_pooling2d")
  myvi$feature_pca()
}

</code></pre>

<hr>
<h2 id='AUTO_VI+24feature_pca_plot'>Draw a summary Plot for principal component analysis conducted on extracted features</h2><span id='topic+AUTO_VI+24feature_pca_plot'></span>

<h3>Description</h3>

<p>This function draws a summary Plot for principal component
analysis conducted on extracted features
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$feature_pca_plot(
  feature_pca = self$feature_pca(),
  x = PC1,
  y = PC2,
  col_by_set = TRUE)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24feature_pca_plot_+3A_feature_pca">feature_pca</code></td>
<td>
<p>Dataframe. A data frame containing the rotated features.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24feature_pca_plot_+3A_x">x</code></td>
<td>
<p>Symbol. The x variable. See also <a href="ggplot2.html#topic+tidyeval">ggplot2::tidyeval</a>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24feature_pca_plot_+3A_y">y</code></td>
<td>
<p>Symbol. The y variable. See also <a href="ggplot2.html#topic+tidyeval">ggplot2::tidyeval</a>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24feature_pca_plot_+3A_col_by_set">col_by_set</code></td>
<td>
<p>Boolena. Whether to color points by sets (observed, null,
and boot).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, it will visualize PC2 vs PC1. User can choose to
visualize other principal components.
</p>


<h3>Value</h3>

<p>A <code>ggplot</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keras_model &lt;- try(get_keras_model("vss_phn_32"))
if (!inherits(keras_model, "try-error")) {
  myvi &lt;- auto_vi(lm(dist ~ speed, data = cars), keras_model)

  myvi$lineup_check(extract_feature_from_layer = "global_max_pooling2d")
  myvi$feature_pca_plot()
}

</code></pre>

<hr>
<h2 id='AUTO_VI+24get_data'>Get data out of a model object</h2><span id='topic+AUTO_VI+24get_data'></span>

<h3>Description</h3>

<p>This function gets the data out of a model object
by using <code><a href="stats.html#topic+model.frame">stats::model.frame()</a></code> if <code>self$data</code> is <code>NULL</code>.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$get_data(fitted_model = self$fitted_model)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24get_data_+3A_fitted_model">fitted_model</code></td>
<td>
<p>Model. A model object, e.g. <code>lm</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
my_vi &lt;- auto_vi(fitted_model = lm(speed ~ dist, data = cars))
my_vi$get_data()
</code></pre>

<hr>
<h2 id='AUTO_VI+24get_fitted_and_resid'>Get fitted values and residuals out of a model object</h2><span id='topic+AUTO_VI+24get_fitted_and_resid'></span>

<h3>Description</h3>

<p>This function gets fitted values and residuals
out of a model object by using <code><a href="stats.html#topic+fitted.values">stats::fitted()</a></code> and <code><a href="stats.html#topic+residuals">stats::resid()</a></code>.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$get_fitted_and_resid(fitted_model = self$fitted_model)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24get_fitted_and_resid_+3A_fitted_model">fitted_model</code></td>
<td>
<p>Model. A model object, e.g. <code>lm</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
my_vi &lt;- auto_vi(fitted_model = lm(speed ~ dist, data = cars))
my_vi$get_fitted_and_resid()
</code></pre>

<hr>
<h2 id='AUTO_VI+24likelihood_ratio'>Compute the likelihood ratio using the simulated result</h2><span id='topic+AUTO_VI+24likelihood_ratio'></span>

<h3>Description</h3>

<p>This function estimates the likelihood
of observing the visual signal strength in terms of the bootstrapped
distribution and the simulated null distribution, and computes the ratio
between these two likelihood.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$likelihood_ratio(
  vss = self$check_result$observed$vss,
  dist_1 = self$check_result$boot$vss,
  dist_2 = self$check_result$null$vss
)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24likelihood_ratio_+3A_vss">vss</code></td>
<td>
<p>Numeric. The observed visual signal strength.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24likelihood_ratio_+3A_dist_1">dist_1</code></td>
<td>
<p>Numeric. A vector of visual signal strength for plots following
the first distribution (bootstrap distribution by default).</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24likelihood_ratio_+3A_dist_2">dist_2</code></td>
<td>
<p>Numeric. A vector of visual signal strength for plots following
the second distribution (null distribution by default).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named vector with three elements <code>likelihood_1</code>,
<code>likelihood_2</code> and <code>likelihood_ratio</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
dist_1 &lt;- rnorm(100, 0, 1)
dist_2 &lt;- rnorm(100, 1, 1)
AUTO_VI$likelihood_ratio(0, dist_1, dist_2)
</code></pre>

<hr>
<h2 id='AUTO_VI+24lineup_check'>Conduct a auto visual inference lineup check with a computer vision model</h2><span id='topic+AUTO_VI+24lineup_check'></span>

<h3>Description</h3>

<p>This function conducts a visual inference lineup
check with a computer vision model. The result will be stored in
<code>self$check_result</code>.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$lineup_check(
  lineup_size = 20L,
  fitted_model = self$fitted_model,
  keras_model = self$keras_model,
  null_method = self$null_method,
  data = self$get_data(),
  node_index = self$node_index,
  extract_feature_from_layer = NULL
)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24lineup_check_+3A_lineup_size">lineup_size</code></td>
<td>
<p>Integer. Number of plots in a lineup.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24lineup_check_+3A_fitted_model">fitted_model</code></td>
<td>
<p>Model. A model object, e.g. <code>lm</code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24lineup_check_+3A_keras_model">keras_model</code></td>
<td>
<p>Keras model. A trained computer vision model.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24lineup_check_+3A_null_method">null_method</code></td>
<td>
<p>Function. A method to simulate residuals from the null
hypothesis distribution. For <code>lm</code>, the recommended method is residual
rotation <code><a href="#topic+AUTO_VI+24rotate_resid">AUTO_VI$rotate_resid()</a></code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24lineup_check_+3A_data">data</code></td>
<td>
<p>Data frame. The data used to fit the model.
See also <code><a href="#topic+AUTO_VI+24get_data">AUTO_VI$get_data()</a></code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24lineup_check_+3A_node_index">node_index</code></td>
<td>
<p>Integer. An index indicating which node of the output layer
contains the visual signal strength. This is particularly useful
when the keras model has more than one output nodes.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24lineup_check_+3A_extract_feature_from_layer">extract_feature_from_layer</code></td>
<td>
<p>Character/Integer. A layer name or an
integer layer index for extracting features from a layer.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return the object itself.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keras_model &lt;- try(get_keras_model("vss_phn_32"))
if (!inherits(keras_model, "try-error")) {
  myvi &lt;- auto_vi(lm(dist ~ speed, data = cars), keras_model)

  myvi$lineup_check()
  myvi
}

</code></pre>

<hr>
<h2 id='AUTO_VI+24null_method'>Get null residuals from a fitted model</h2><span id='topic+AUTO_VI+24null_method'></span>

<h3>Description</h3>

<p>This default method gets rotated residuals from a fitted linear
model using <a href="#topic+AUTO_VI+24rotate_resid">AUTO_VI$rotate_resid</a>. User needs to override this method if
the fitted model is not a linear regression model.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$null_method(fitted_model = self$fitted_model)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24null_method_+3A_fitted_model">fitted_model</code></td>
<td>
<p><code>lm</code>. A linear model object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with two columns <code>.fitted</code> and <code>.resid</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
my_vi &lt;- auto_vi(fitted_model = lm(speed ~ dist, data = cars))
null_resid &lt;- my_vi$null_method()
my_vi$plot_resid(null_resid)
</code></pre>

<hr>
<h2 id='AUTO_VI+24null_vss'>Simulate null plots and predict the visual signal strength</h2><span id='topic+AUTO_VI+24null_vss'></span>

<h3>Description</h3>

<p>This function simulates null plots from the null hypothesis
distribution, and predicts the visual signal strength.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$null_vss(
  draws = 100L,
  fitted_model = self$fitted_model,
  keras_model = self$keras_model,
  null_method = self$null_method,
  node_index = self$node_index,
  keep_null_data = FALSE,
  keep_null_plot = FALSE,
  extract_feature_from_layer = NULL
)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24null_vss_+3A_draws">draws</code></td>
<td>
<p>Integer. Number of simulation draws.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24null_vss_+3A_fitted_model">fitted_model</code></td>
<td>
<p>Model. A model object, e.g. <code>lm</code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24null_vss_+3A_keras_model">keras_model</code></td>
<td>
<p>Keras model. A trained computer vision model.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24null_vss_+3A_null_method">null_method</code></td>
<td>
<p>Function. A method to simulate residuals from the null
hypothesis distribution. For <code>lm</code>, the recommended method is residual
rotation <code><a href="#topic+AUTO_VI+24rotate_resid">AUTO_VI$rotate_resid()</a></code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24null_vss_+3A_node_index">node_index</code></td>
<td>
<p>Integer. An index indicating which node of the output layer
contains the visual signal strength. This is particularly useful
when the keras model has more than one output nodes.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24null_vss_+3A_keep_null_data">keep_null_data</code></td>
<td>
<p>Boolean. Whether to keep the simulated null data.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24null_vss_+3A_keep_null_plot">keep_null_plot</code></td>
<td>
<p>Boolean. Whether to keep the simulated null plots.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24null_vss_+3A_extract_feature_from_layer">extract_feature_from_layer</code></td>
<td>
<p>Character/Integer. A layer name or an
integer layer index for extracting features from a layer.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keras_model &lt;- try(get_keras_model("vss_phn_32"))
if (!inherits(keras_model, "try-error")) {
  myvi &lt;- auto_vi(lm(dist ~ speed, data = cars), keras_model)

  myvi$null_vss()
}
</code></pre>

<hr>
<h2 id='AUTO_VI+24p_value'>Compute the p-value based on the check result</h2><span id='topic+AUTO_VI+24p_value'></span>

<h3>Description</h3>

<p>This function computes the p-value of observing the
visual signal strength of the original residual plot based on the null
distribution.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$p_value(
  vss = self$check_result$observed$vss,
  null_dist = self$check_result$null$vss,
  type = "auto"
)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24p_value_+3A_type">type</code></td>
<td>
<p>Character. Either  &quot;auto&quot;, &quot;quantile&quot; or &quot;lineup&quot;. Option
&quot;auto&quot; will use the Boolean flag <code>self$check_result$lineup_check</code>
to determine the correct option.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>There are two types of p-value calculation. Option &quot;quantile&quot;
calculates the percentage of null visual signal strength greater than or
equal to the observed visual signal strength. Option &quot;lineup&quot; combines
the null visual signal strength and the observed visual signal strength
in one vector, and calculates the percentage of entries in this vector
greater than or equal to the observed visual signal strength. The &quot;lineup&quot;
option ensures the p-value will not be smaller than 1 over the size of the
lineup.
</p>


<h3>Value</h3>

<p>A numeric value representing the desired p-value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vss &lt;- 1
null_dist &lt;- rnorm(100, 0, 1)
AUTO_VI$p_value(vss, null_dist)
</code></pre>

<hr>
<h2 id='AUTO_VI+24plot_resid'>Draw a standard residual plot</h2><span id='topic+AUTO_VI+24plot_resid'></span>

<h3>Description</h3>

<p>This function draws a standard residual plot.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$plot_resid(
  data = self$get_fitted_and_resid(),
  theme = ggplot2::theme_light(base_size = 11/5),
  alpha = 1,
  size = 0.5,
  stroke = 0.5,
  remove_axis = TRUE,
  remove_legend = TRUE,
  remove_grid_line = TRUE,
  add_zero_line = TRUE
)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24plot_resid_+3A_data">data</code></td>
<td>
<p>Data frame. A data frame containing variables <code>.resid</code> and
<code>.fitted</code>. See also <code><a href="#topic+AUTO_VI+24get_fitted_and_resid">AUTO_VI$get_fitted_and_resid()</a></code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24plot_resid_+3A_theme">theme</code></td>
<td>
<p><code>ggtheme</code>. A <code>ggplot</code> theme object.
See also <code><a href="ggplot2.html#topic+ggtheme">ggplot2::theme_light()</a></code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24plot_resid_+3A_alpha">alpha</code></td>
<td>
<p>Numeric. Alpha of dot. Value between 0 and 1.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24plot_resid_+3A_size">size</code></td>
<td>
<p>Numeric. Size of dot. Value between 0 and 1.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24plot_resid_+3A_stroke">stroke</code></td>
<td>
<p>Numeric. Stroke of dot. Value between 0 and 1.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24plot_resid_+3A_remove_axis">remove_axis</code></td>
<td>
<p>Boolean. Whether or not to remove the axis.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24plot_resid_+3A_remove_legend">remove_legend</code></td>
<td>
<p>Boolean. Whether or not to remove the legend.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24plot_resid_+3A_remove_grid_line">remove_grid_line</code></td>
<td>
<p>Boolean. Whether or not to remove the grid lines.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24plot_resid_+3A_add_zero_line">add_zero_line</code></td>
<td>
<p>Boolean. Whether or not to add a zero horizontal line.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
my_vi &lt;- auto_vi(fitted_model = lm(speed ~ dist, data = cars))
my_vi$plot_resid()
</code></pre>

<hr>
<h2 id='AUTO_VI+24rotate_resid'>Get rotated residuals from a fitted linear model</h2><span id='topic+AUTO_VI+24rotate_resid'></span>

<h3>Description</h3>

<p>This function gets rotated residuals from a fitted linear
model. The rotated residuals are generated by first regressing random
noises on the original regressors, then multiply the obtained residuals by
original RSS divided by the current RSS. The results are the rotated
residuals.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$rotate_resid(fitted_model = self$fitted_mod)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24rotate_resid_+3A_fitted_model">fitted_model</code></td>
<td>
<p><code>lm</code>. A linear model object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with two columns <code>.fitted</code> and <code>.resid</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
my_vi &lt;- auto_vi(fitted_model = lm(speed ~ dist, data = cars))
rotated_resid &lt;- my_vi$rotate_resid()
my_vi$plot_resid(rotated_resid)
</code></pre>

<hr>
<h2 id='AUTO_VI+24select_feature'>Select features from the check result</h2><span id='topic+AUTO_VI+24select_feature'></span>

<h3>Description</h3>

<p>This function select features from the check result.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$feature_pca(data = self$check_result$observed, pattern = "f_")
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24select_feature_+3A_data">data</code></td>
<td>
<p>Dataframe. A data frame where some columns represent
features and rows represent observations.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24select_feature_+3A_pattern">pattern</code></td>
<td>
<p>Character. A regrex pattern to search for features.
See also <code><a href="base.html#topic+grep">grep()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, features are assumed to follow the naming convention
&quot;f_(index)&quot;, where index is from one to the number of features.
</p>


<h3>Value</h3>

<p>A tibble where columns represent
features and rows represent observations.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keras_model &lt;- try(get_keras_model("vss_phn_32"))
if (!inherits(keras_model, "try-error")) {
  myvi &lt;- auto_vi(lm(dist ~ speed, data = cars), keras_model)

  myvi$lineup_check(extract_feature_from_layer = "global_max_pooling2d")
  myvi$select_feature()
}

</code></pre>

<hr>
<h2 id='AUTO_VI+24summary_density_plot'>Draw a summary density plot for the result</h2><span id='topic+AUTO_VI+24summary_density_plot'></span>

<h3>Description</h3>

<p>This function draws a summary density plot for the result.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$summary_plot(
  vss = self$check_result$observed$vss,
  null_dist = self$check_result$null$vss,
  boot_dist = self$check_result$boot$vss,
  p_value = self$check_result$p_value,
  likelihood_ratio = self$check_result$likelihood_ratio,
  density_alpha = 0.6
)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24summary_density_plot_+3A_vss">vss</code></td>
<td>
<p>Numeric. Observed visual signal strength.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24summary_density_plot_+3A_null_dist">null_dist</code></td>
<td>
<p>Numeric. Null visual signal strength.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24summary_density_plot_+3A_boot_dist">boot_dist</code></td>
<td>
<p>Numeric. Bootstrapped visual signal strength.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24summary_density_plot_+3A_p_value">p_value</code></td>
<td>
<p>Numeric. P-value of the visual test. See also
<code><a href="#topic+AUTO_VI+24p_value">AUTO_VI$p_value()</a></code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24summary_density_plot_+3A_likelihood_ratio">likelihood_ratio</code></td>
<td>
<p>Numeric. Likelihood ratio of the visual test. See
also <code><a href="#topic+AUTO_VI+24likelihood_ratio">AUTO_VI$likelihood_ratio()</a></code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24summary_density_plot_+3A_density_alpha">density_alpha</code></td>
<td>
<p>Numeric. Alpha value for the density.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keras_model &lt;- try(get_keras_model("vss_phn_32"))
if (!inherits(keras_model, "try-error")) {
  myvi &lt;- auto_vi(lm(dist ~ speed, data = cars), keras_model)

  myvi$check()
  myvi$summary_density_plot()
}

</code></pre>

<hr>
<h2 id='AUTO_VI+24summary_plot'>Draw a summary plot for the result</h2><span id='topic+AUTO_VI+24summary_plot'></span>

<h3>Description</h3>

<p>This function draws a summary plot for the result.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$summary_plot(type = "auto", ...)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24summary_plot_+3A_type">type</code></td>
<td>
<p>Character. Either &quot;auto&quot;, &quot;density&quot; or &quot;rank&quot;. Option &quot;auto&quot;
will use the Boolean flag <code>self$check_result$lineup_check</code>
to determine the correct option. See also <code><a href="#topic+AUTO_VI+24summary_density_plot">AUTO_VI$summary_density_plot()</a></code>
and <code><a href="#topic+AUTO_VI+24summary_rank_plot">AUTO_VI$summary_rank_plot()</a></code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24summary_plot_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code><a href="#topic+AUTO_VI+24summary_density_plot">AUTO_VI$summary_density_plot()</a></code> or
<code><a href="#topic+AUTO_VI+24summary_rank_plot">AUTO_VI$summary_rank_plot()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keras_model &lt;- try(get_keras_model("vss_phn_32"))
if (!inherits(keras_model, "try-error")) {
  myvi &lt;- auto_vi(lm(dist ~ speed, data = cars), keras_model)

  myvi$lineup_check()
  myvi$summary_plot()
}

</code></pre>

<hr>
<h2 id='AUTO_VI+24summary_rank_plot'>Draw a summary rank plot for the result</h2><span id='topic+AUTO_VI+24summary_rank_plot'></span>

<h3>Description</h3>

<p>This function draws a summary rank plot for the result.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$summary_plot(
  vss = self$check_result$observed$vss,
  null_dist = self$check_result$null$vss,
  p_value = self$check_result$p_value
)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24summary_rank_plot_+3A_vss">vss</code></td>
<td>
<p>Numeric. Observed visual signal strength.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24summary_rank_plot_+3A_null_dist">null_dist</code></td>
<td>
<p>Numeric. Null visual signal strength.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24summary_rank_plot_+3A_p_value">p_value</code></td>
<td>
<p>Numeric. P-value of the visual test. See also
<code><a href="#topic+AUTO_VI+24p_value">AUTO_VI$p_value()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keras_model &lt;- try(get_keras_model("vss_phn_32"))
if (!inherits(keras_model, "try-error")) {
  myvi &lt;- auto_vi(lm(dist ~ speed, data = cars), keras_model)

  myvi$lineup_check()
  myvi$summary_rank_plot()
}

</code></pre>

<hr>
<h2 id='AUTO_VI+24vss'>Predict the visual signal strength</h2><span id='topic+AUTO_VI+24vss'></span>

<h3>Description</h3>

<p>This function predicts the visual signal strength.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>AUTO_VI$vss(
  p = self$plot_resid(),
  auxiliary = NULL,
  keras_model = self$keras_model,
  node_index = self$node_index,
  extract_feature_from_layer = NULL
)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="AUTO_VI+2B24vss_+3A_p">p</code></td>
<td>
<p><code>ggplot</code>/List/Data.frame/Array/Numpy array/String. The input can be
</p>

<ol>
<li><p> a <code>ggplot</code>,
</p>
</li>
<li><p> a list of <code>ggplot</code>,
</p>
</li>
<li><p> a data.frame containing
<code>.resid</code> (residuals) and <code>.fitted</code> (fitted values) that can be passed to
<code><a href="#topic+AUTO_VI+24plot_resid">AUTO_VI$plot_resid()</a></code>,
</p>
</li>
<li><p> a 3D array representing an image,
</p>
</li>
<li><p> a 4D array representing one or more images,
</p>
</li>
<li><p> a path to an image,
</p>
</li>
<li><p> a vector or a list of paths to images,
</p>
</li>
<li><p> a numpy array.
</p>
</li></ol>
</td></tr>
<tr><td><code id="AUTO_VI+2B24vss_+3A_auxiliary">auxiliary</code></td>
<td>
<p>Dataframe. A dataframe of auxiliary values. This is only used
when the keras model has multiple inputs. If it is not provided, the
values will be automatically computed based on the residual plot of the
fitted model. See also <code><a href="#topic+AUTO_VI+24auxiliary">AUTO_VI$auxiliary()</a></code>.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24vss_+3A_keras_model">keras_model</code></td>
<td>
<p>Keras model. A trained computer vision model.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24vss_+3A_node_index">node_index</code></td>
<td>
<p>Integer. An index indicating which node of the output layer
contains the visual signal strength. This is particularly useful
when the keras model has more than one output nodes.</p>
</td></tr>
<tr><td><code id="AUTO_VI+2B24vss_+3A_extract_feature_from_layer">extract_feature_from_layer</code></td>
<td>
<p>Character/Integer. A layer name or an
integer layer index for extracting features from a layer.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble. The first column is <code>vss</code> which is the prediction, the
rest of the columns are features extracted from a layer.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keras_model &lt;- try(get_keras_model("vss_phn_32"))
if (!inherits(keras_model, "try-error")) {
  myvi &lt;- auto_vi(lm(dist ~ speed, data = cars), keras_model)

  myvi$vss()
}

</code></pre>

<hr>
<h2 id='check_python_library_available'>Check python library availability</h2><span id='topic+check_python_library_available'></span>

<h3>Description</h3>

<p>This function checks if a python library is available. If the library can
not be found by the <code>importlib.util.find_spec</code> method, then an
error will be throw.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_python_library_available(lib_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_python_library_available_+3A_lib_name">lib_name</code></td>
<td>
<p>Character. A library name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return. Called for side-effect.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>try(check_python_library_available("numpy"))
</code></pre>

<hr>
<h2 id='get_keras_model'>Download and load the keras model</h2><span id='topic+get_keras_model'></span>

<h3>Description</h3>

<p>This functions download the keras model from the <code>TengMCing/autovi_data</code>
Github repo using <code><a href="utils.html#topic+download.file">download.file()</a></code> and load the model using
<code>reticulate::import("tensorflow")$keras$models$load_model</code>. Note that
<code>tensorflow</code> version greater than 2.15 is not supported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_keras_model(model_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_keras_model_+3A_model_name">model_name</code></td>
<td>
<p>String. The model name. See also <code><a href="#topic+list_keras_model">list_keras_model()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A keras model.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keras_model &lt;- try(get_keras_model("vss_phn_32"))
if (!inherits(keras_model, "try-error")) keras_model$summary()

</code></pre>

<hr>
<h2 id='KERAS_WRAPPER'>KERAS_WRAPPER class environment</h2><span id='topic+KERAS_WRAPPER'></span><span id='topic+keras_wrapper'></span>

<h3>Description</h3>

<p>This is the class of keras wrapper,
inherited from <a href="bandicoot.html#topic+BASE">bandicoot::BASE</a>. It is an environment
with S3 class <code>bandicoot_oop</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keras_wrapper(
  keras_model = NULL,
  node_index = 1L,
  env = new.env(parent = parent.frame()),
  init_call = sys.call()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="KERAS_WRAPPER_+3A_keras_model">keras_model</code></td>
<td>
<p>Keras model. A trained computer vision model.</p>
</td></tr>
<tr><td><code id="KERAS_WRAPPER_+3A_node_index">node_index</code></td>
<td>
<p>Integer. An index indicating which node of the output layer
contains the visual signal strength. This is particularly useful
when the keras model has more than one output nodes.</p>
</td></tr>
<tr><td><code id="KERAS_WRAPPER_+3A_env">env</code></td>
<td>
<p>Environment. The instance environment.</p>
</td></tr>
<tr><td><code id="KERAS_WRAPPER_+3A_init_call">init_call</code></td>
<td>
<p>Call. Contents of the <code>..init_call..</code>. It is recommended to leave it
as default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An instance environment.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>keras_wrapper()</code>: Class constructor, same as <code>KERAS_WRAPPER$instantiate()</code>.
</p>
</li></ul>


<h3>Class information</h3>



<h4>Parent classes</h4>


<ul>
<li><p> Direct:
</p>

<ul>
<li> <p><a href="bandicoot.html#topic+BASE">bandicoot::BASE</a>
</p>
</li></ul>

</li></ul>




<h4>New methods</h4>


<ul>
<li><p> G:
</p>

<ul>
<li> <p><code><a href="#topic+KERAS_WRAPPER+24get_input_height">KERAS_WRAPPER$get_input_height()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+KERAS_WRAPPER+24get_input_width">KERAS_WRAPPER$get_input_width()</a></code>
</p>
</li></ul>

</li>
<li><p> I:
</p>

<ul>
<li> <p><code><a href="#topic+KERAS_WRAPPER+24image_to_array">KERAS_WRAPPER$image_to_array()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+KERAS_WRAPPER+24..init..">KERAS_WRAPPER$..init..()</a></code>
</p>
</li></ul>

</li>
<li><p> L:
</p>

<ul>
<li> <p><code><a href="#topic+KERAS_WRAPPER+24list_layer_name">KERAS_WRAPPER$list_layer_name()</a></code>
</p>
</li></ul>

</li>
<li><p> P:
</p>

<ul>
<li> <p><code><a href="#topic+KERAS_WRAPPER+24predict">KERAS_WRAPPER$predict()</a></code>
</p>
</li></ul>

</li>
<li><p> S:
</p>

<ul>
<li> <p><code><a href="#topic+KERAS_WRAPPER+24..str..">KERAS_WRAPPER$..str..()</a></code>
</p>
</li></ul>

</li></ul>



<hr>
<h2 id='KERAS_WRAPPER+24..init..'>Initialization method</h2><span id='topic+KERAS_WRAPPER+24..init..'></span>

<h3>Description</h3>

<p>This function will be called after an instance is built. User
input will be stored in the environment.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>KERAS_WRAPPER$..init..(keras_mod = NULL, node_index = 1L)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="KERAS_WRAPPER+2B24..init.._+3A_keras_mod">keras_mod</code></td>
<td>
<p>Keras model. A trained computer vision model.</p>
</td></tr>
<tr><td><code id="KERAS_WRAPPER+2B24..init.._+3A_node_index">node_index</code></td>
<td>
<p>Integer. An index indicating which node of the output layer
contains the visual signal strength. This is particularly useful
when the keras model has more than one output nodes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return the object itself.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keras_wrapper()

</code></pre>

<hr>
<h2 id='KERAS_WRAPPER+24..str..'>String representation of the object</h2><span id='topic+KERAS_WRAPPER+24..str..'></span>

<h3>Description</h3>

<p>This function returns a string representation of the object.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>KERAS_WRAPPER$..str..()
</pre></div>



<h3>Value</h3>

<p>A string.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
KERAS_WRAPPER$..str..()

wrapper &lt;- keras_wrapper()
wrapper$..str..()
</code></pre>

<hr>
<h2 id='KERAS_WRAPPER+24get_input_height'>Get keras model input image height</h2><span id='topic+KERAS_WRAPPER+24get_input_height'></span>

<h3>Description</h3>

<p>This function get the input image height (the input shape
is (batch_size, height, width, channels)) of a keras model.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>KERAS_WRAPPER$get_input_height(keras_model = self$keras_model)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="KERAS_WRAPPER+2B24get_input_height_+3A_keras_model">keras_model</code></td>
<td>
<p>Keras model. A trained computer vision model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keras_model &lt;- try(get_keras_model("vss_phn_32"))
if (!inherits(keras_model, "try-error")) {
  keras_wrapper(keras_model)$get_input_height()
}

</code></pre>

<hr>
<h2 id='KERAS_WRAPPER+24get_input_width'>Get keras model input image width</h2><span id='topic+KERAS_WRAPPER+24get_input_width'></span>

<h3>Description</h3>

<p>This function get the input image width (the input shape
is (batch_size, height, width, channels)) of a keras model.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>KERAS_WRAPPER$get_input_width(keras_model = self$keras_model)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="KERAS_WRAPPER+2B24get_input_width_+3A_keras_model">keras_model</code></td>
<td>
<p>Keras model. A trained computer vision model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keras_model &lt;- try(get_keras_model("vss_phn_32"))
if (!inherits(keras_model, "try-error")) {
  keras_wrapper(keras_model)$get_input_width()
}

</code></pre>

<hr>
<h2 id='KERAS_WRAPPER+24image_to_array'>Load an image as numpy array</h2><span id='topic+KERAS_WRAPPER+24image_to_array'></span>

<h3>Description</h3>

<p>This function loads an image from file and convert it to a
numpy array.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>KERAS_WRAPPER$image_to_array(
  path,
  height = self$get_input_height(),
  width = self$get_input_width()
)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="KERAS_WRAPPER+2B24image_to_array_+3A_path">path</code></td>
<td>
<p>Character. Path to the image.</p>
</td></tr>
<tr><td><code id="KERAS_WRAPPER+2B24image_to_array_+3A_height">height</code></td>
<td>
<p>Integer. Target height of the image.</p>
</td></tr>
<tr><td><code id="KERAS_WRAPPER+2B24image_to_array_+3A_width">width</code></td>
<td>
<p>Integer. Target width of the image.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numpy array.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- ggplot2::ggplot(cars) + ggplot2::geom_point(ggplot2::aes(dist, speed))
path &lt;- save_plot(p)
result &lt;- try(KERAS_WRAPPER$image_to_array(path, 32L, 32L))
if (!inherits(result, "try-error")) {
  result
}

</code></pre>

<hr>
<h2 id='KERAS_WRAPPER+24list_layer_name'>List all layer names</h2><span id='topic+KERAS_WRAPPER+24list_layer_name'></span>

<h3>Description</h3>

<p>This function list all layer names of a keras model.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>KERAS_WRAPPER$list_layer_name(keras_model = self$keras_model)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="KERAS_WRAPPER+2B24list_layer_name_+3A_keras_model">keras_model</code></td>
<td>
<p>Keras model. A trained computer vision model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of strings.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keras_model &lt;- try(get_keras_model("vss_phn_32"))
if (!inherits(keras_model, "try-error")) {
  keras_wrapper(keras_model)$list_layer_name()
}

</code></pre>

<hr>
<h2 id='KERAS_WRAPPER+24predict'>Predict visual signal strength</h2><span id='topic+KERAS_WRAPPER+24predict'></span>

<h3>Description</h3>

<p>This function predicts the visual signal strength using the
provided keras model, input array and optional auxiliary input array.
</p>


<h4>Usage</h4>

<div class="sourceCode"><pre>KERAS_WRAPPER$predict(
  input_array,
  auxiliary = NULL,
  keras_model = self$keras_model,
  node_index = self$node_index,
  extract_featrue_from_layer = NULL
)
</pre></div>



<h3>Arguments</h3>

<table>
<tr><td><code id="KERAS_WRAPPER+2B24predict_+3A_input_array">input_array</code></td>
<td>
<p>Array/Numpy array. An input array, usually of the
shape (batch_size, height, width, channels).</p>
</td></tr>
<tr><td><code id="KERAS_WRAPPER+2B24predict_+3A_auxiliary">auxiliary</code></td>
<td>
<p>Array/Data frame. An auxiliary input array of the
shape (batch_size, number_of_auxiliary_inputs). This is only needed if the
keras model takes multiple inputs.</p>
</td></tr>
<tr><td><code id="KERAS_WRAPPER+2B24predict_+3A_keras_model">keras_model</code></td>
<td>
<p>Keras model. A trained computer vision model.</p>
</td></tr>
<tr><td><code id="KERAS_WRAPPER+2B24predict_+3A_node_index">node_index</code></td>
<td>
<p>Integer. An index indicating which node of the output layer
contains the visual signal strength. This is particularly useful
when the keras model has more than one output nodes.</p>
</td></tr>
<tr><td><code id="KERAS_WRAPPER+2B24predict_+3A_extract_feature_from_layer">extract_feature_from_layer</code></td>
<td>
<p>Character/Integer. A layer name or an
integer layer index for extracting features from a layer.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble. The first column is <code>vss</code> which is the prediction, the
rest of the columns are features extracted from a layer.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keras_model &lt;- try(get_keras_model("vss_phn_32"))
if (!inherits(keras_model, "try-error")) {
  wrapper &lt;- keras_wrapper(keras_model)

  # Provide one 32 * 32 RGB image and one vector of length 5 as input
  wrapper$predict(input_array = array(255, dim = c(1, 32, 32, 3)),
                  auxiliary = matrix(1, ncol = 5))
}

</code></pre>

<hr>
<h2 id='list_keras_model'>List all available pre-trained computer vision models</h2><span id='topic+list_keras_model'></span>

<h3>Description</h3>

<p>This function gets a table of available pre-trained computer vision models
for predicting visual signal strength.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_keras_model()
</code></pre>


<h3>Value</h3>

<p>A tibble of available model names and paths.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
list_keras_model()

</code></pre>

<hr>
<h2 id='remove_plot'>Remove a plot</h2><span id='topic+remove_plot'></span>

<h3>Description</h3>

<p>This function removes a plot from a provided path.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_plot(path, check_ext = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remove_plot_+3A_path">path</code></td>
<td>
<p>Character. Path to the image.</p>
</td></tr>
<tr><td><code id="remove_plot_+3A_check_ext">check_ext</code></td>
<td>
<p>Boolean. Whether to check the file extension.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return. Called for side-effect.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- ggplot2::ggplot(cars) + ggplot2::geom_point(ggplot2::aes(dist, speed))
path &lt;- save_plot(p)
remove_plot(path)

</code></pre>

<hr>
<h2 id='save_plot'>Save a plot</h2><span id='topic+save_plot'></span>

<h3>Description</h3>

<p>This function save a plot to a provided path.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>save_plot(p, path = NULL, width = 7/5, height = 7/4, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="save_plot_+3A_p">p</code></td>
<td>
<p><code>ggplot</code>. A plot.</p>
</td></tr>
<tr><td><code id="save_plot_+3A_path">path</code></td>
<td>
<p>Character. Path to save the image.</p>
</td></tr>
<tr><td><code id="save_plot_+3A_width">width</code></td>
<td>
<p>Numeric. Width of the image.</p>
</td></tr>
<tr><td><code id="save_plot_+3A_height">height</code></td>
<td>
<p>Numeric. Height of the image.</p>
</td></tr>
<tr><td><code id="save_plot_+3A_...">...</code></td>
<td>
<p>Other arguments passed to <code><a href="ggplot2.html#topic+ggsave">ggplot2::ggsave()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The image path.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- ggplot2::ggplot(cars) + ggplot2::geom_point(ggplot2::aes(dist, speed))
save_plot(p)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
