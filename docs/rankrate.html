<!DOCTYPE html><html lang="en"><head><title>Help for package rankrate</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rankrate}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#AIBS'><p>Real peer review data set from the American Institute of Biological Sciences (AIBS)</p></a></li>
<li><a href='#ASTAR'><p>Calculate the exact MLE of a Mallows-Binomial distribution using an A* algorithm</p></a></li>
<li><a href='#ci_mb'><p>Bootstrap Confidence Intervals for Mallows-Binomial parameters.</p></a></li>
<li><a href='#dmall'><p>Calculate the density of rankings under a Mallows distribution</p></a></li>
<li><a href='#dmb'><p>Calculate the density of rankings and ratings under a Mallows-Binomial distribution.</p></a></li>
<li><a href='#fit_mb'><p>Calculate the exact or approximate MLE of a Mallows-Binomial distribution using various methods</p></a></li>
<li><a href='#FV'><p>Estimate the MLE of a Mallows-Binomial distribution using the FV method</p></a></li>
<li><a href='#getQ'><p>Calculate Q Matrix</p></a></li>
<li><a href='#Greedy'><p>Estimate the MLE of a Mallows-Binomial distribution using the Greedy method</p></a></li>
<li><a href='#GreedyLocal'><p>Estimate the MLE of a Mallows-Binomial distribution using the &quot;Greedy Local&quot; method</p></a></li>
<li><a href='#kendall'><p>Calculate the Kendall's tau between rankings</p></a></li>
<li><a href='#psi'><p>Normalizing constant function of a Mallows distribution, psi</p></a></li>
<li><a href='#rmall'><p>Random Mallows generation.</p></a></li>
<li><a href='#rmb'><p>Random Mallows-Binomial generation</p></a></li>
<li><a href='#to_rankings'><p>Convert ranks into rankings (orderings)</p></a></li>
<li><a href='#ToyData1'><p>Toy data set of rankings and ratings demonstrating tie-breaking</p></a></li>
<li><a href='#ToyData2'><p>Toy data set of rankings and ratings demonstrating decision-making with partial rankings</p></a></li>
<li><a href='#ToyData3'><p>Toy data set of rankings and ratings when judges express internally inconsistent preferences</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Joint Statistical Models for Preference Learning with Rankings
and Ratings</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Statistical tools for the Mallows-Binomial model, the first joint statistical model for preference learning for rankings and ratings. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, gtools, isotone</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, devtools, ggplot2, pander, reshape2</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://pearce790.github.io/rankrate/">https://pearce790.github.io/rankrate/</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-17 15:05:10 UTC; michaelpearce</td>
</tr>
<tr>
<td>Author:</td>
<td>Michael Pearce <a href="https://orcid.org/0000-0002-9313-271X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Michael Pearce &lt;pearce790@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-17 15:20:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='AIBS'>Real peer review data set from the American Institute of Biological Sciences (AIBS)</h2><span id='topic+AIBS'></span>

<h3>Description</h3>

<p>This real data set includes 12 judges (reviewers) and 28 objects (proposals), and demonstrates the ability
of the Mallows-Binomial model to combine ratings and rankings for the purpose of demarcating
real grant proposals for a funding agency.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AIBS
</code></pre>


<h3>Format</h3>

<p>A list with three elements: (1) <code>rankings</code>, a 12 x 18 matrix of rankings with one row per judge;
(2) <code>ratings</code>, a 12 x 18 matrix of ratings, with one row per judge and one column per object; and
(3) <code>M</code>, a number indicating the maximum (worst) integer score.
</p>


<h3>Source</h3>

<p>Originally published in: Gallo, Stephen A.. &quot;Grant Peer Review Scoring Data with Criteria Scores&quot; (2023). <a href="https://figshare.com/articles/dataset/Grant_Peer_Review_Scoring_Data_with_Criteria_Scores/12728087/1">https://figshare.com/articles/dataset/Grant_Peer_Review_Scoring_Data_with_Criteria_Scores/12728087/1</a>.
</p>
<p>Originally analyzed in: Gallo, Stephen A., et al. &quot;A new approach to peer review assessments: Score, then rank&quot; (2023). Research Integrity and Peer Review 8:10 (10). <a href="https://researchintegrityjournal.biomedcentral.com/articles/10.1186/s41073-023-00131-7">https://researchintegrityjournal.biomedcentral.com/articles/10.1186/s41073-023-00131-7</a>.
</p>

<hr>
<h2 id='ASTAR'>Calculate the exact MLE of a Mallows-Binomial distribution using an A* algorithm</h2><span id='topic+ASTAR'></span>

<h3>Description</h3>

<p>This function estimates the exact MLE of a Mallows-Binomial distribution using an A* tree search algorithm proposed in Pearce and Erosheva (2022). Algorithm may be very slow when number of objects exceeds 15, but is often still tractable for larger J when consensus is strong.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ASTAR(rankings, ratings, M, keep_nodes = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ASTAR_+3A_rankings">rankings</code></td>
<td>
<p>A matrix of rankings, potentially with attribute &quot;assignments&quot; to signify separate
reviewer assignments. One ranking per row.</p>
</td></tr>
<tr><td><code id="ASTAR_+3A_ratings">ratings</code></td>
<td>
<p>A matrix of ratings, one row per judge and one column per object.</p>
</td></tr>
<tr><td><code id="ASTAR_+3A_m">M</code></td>
<td>
<p>Numeric specifying maximum (=worst quality) integer rating.</p>
</td></tr>
<tr><td><code id="ASTAR_+3A_keep_nodes">keep_nodes</code></td>
<td>
<p>Boolean specifying if function should retain the list of open nodes traversed during A*
tree search. Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with elements <code>pi0</code>, the estimated consensus ranking MLE, <code>p</code>, the
estimated object quality parameter MLE, <code>theta</code>, the estimated scale parameter MLE, and
<code>numnodes</code>, number of nodes traversed during algorithm and a measure of computational complexity.
If <code>keep_nodes == TRUE</code>, then the list also contains <code>nodes</code>, a matrix of open nodes remaining
at the end of search. If multiple MLEs are found, <code>pi0</code>, <code>p</code>, and <code>theta</code> are returned a matrix elements, with
one row per MLE.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("ToyData1")
ASTAR(ToyData1$rankings,ToyData1$ratings,ToyData1$M,keep_nodes=TRUE)

</code></pre>

<hr>
<h2 id='ci_mb'>Bootstrap Confidence Intervals for Mallows-Binomial parameters.</h2><span id='topic+ci_mb'></span>

<h3>Description</h3>

<p>This function calculates confidence intervals for parameters in a Mallows-Binomial model
using the nonparametric bootstrap.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ci_mb(
  rankings,
  ratings,
  M,
  interval = 0.9,
  nsamples = 50,
  all = FALSE,
  method = "ASTAR"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ci_mb_+3A_rankings">rankings</code></td>
<td>
<p>A matrix of rankings, potentially with attribute &quot;assignments&quot; to signify separate
reviewer assignments. One ranking per row.</p>
</td></tr>
<tr><td><code id="ci_mb_+3A_ratings">ratings</code></td>
<td>
<p>A matrix of ratings, one row per judge and one column per object.</p>
</td></tr>
<tr><td><code id="ci_mb_+3A_m">M</code></td>
<td>
<p>Numeric specifying maximum (=worst quality) integer rating.</p>
</td></tr>
<tr><td><code id="ci_mb_+3A_interval">interval</code></td>
<td>
<p>A numeric entry between 0 and 1 specifying the confidence interval (e.g.,
.90 indicates a 90% confidence interval). Defaults to 0.90.</p>
</td></tr>
<tr><td><code id="ci_mb_+3A_nsamples">nsamples</code></td>
<td>
<p>A numeric entry indicating desired number of bootstrap samples to be used when
calculating confidence intervals. Defaults to 50.</p>
</td></tr>
<tr><td><code id="ci_mb_+3A_all">all</code></td>
<td>
<p>A boolean indicating if estimated parameters from all bootstrap samples should be returned.
Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ci_mb_+3A_method">method</code></td>
<td>
<p>A character string indicating which estimation method to use when estimating parameters.
Allowable options are currently &quot;ASTAR&quot;, &quot;Greedy&quot;, &quot;GreedyLocal&quot;, and &quot;FV&quot;. Defaults to exact search, &quot;ASTAR&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with elements <code>ci</code>, a matrix of confidence intervals for Mallows-Binomial parameters,
<code>ci_ranks</code>, a matrix of confidence intervals for object ranks, <code>bootstrap_pi0</code>, a matrix of
bootstrap consensus rankings (returned only if <code>all==TRUE</code>), and <code>bootstrap_ptheta</code>, a
matrix of bootstrap estimates of (p,theta) (returned only if <code>all==TRUE</code>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("ToyData1")
ci_mb(ToyData1$rankings,ToyData1$ratings,ToyData1$M,method="ASTAR",all=TRUE)

</code></pre>

<hr>
<h2 id='dmall'>Calculate the density of rankings under a Mallows distribution</h2><span id='topic+dmall'></span>

<h3>Description</h3>

<p>This function calculates the density of observation(s) under a Mallows distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dmall(rankings, pi0, theta, log = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dmall_+3A_rankings">rankings</code></td>
<td>
<p>A matrix of rankings, potentially with attribute &quot;assignments&quot; to signify separate
reviewer assignments. One ranking per row.</p>
</td></tr>
<tr><td><code id="dmall_+3A_pi0">pi0</code></td>
<td>
<p>A vector specifying the consensus (modal probability) ranking; should be used only for tie-breaking
equal values in <code>p</code>.</p>
</td></tr>
<tr><td><code id="dmall_+3A_theta">theta</code></td>
<td>
<p>A numeric entry specifying the Mallows scale parameter.</p>
</td></tr>
<tr><td><code id="dmall_+3A_log">log</code></td>
<td>
<p>A boolean indicating if the log likelihood should be returned.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric value indicating the (log) likelihood of rankings under a Mallows distribution.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rankings1 &lt;- matrix(c(1,2,3,3,1,2),nrow=2,byrow=TRUE)
rankings2 &lt;- matrix(c(1,2,3,4,2,3,NA,NA),nrow=2,byrow=TRUE)
attr(rankings2,"assignments") &lt;- matrix(c(rep(TRUE,4),FALSE,TRUE,TRUE,TRUE),nrow=2,byrow=TRUE)
dmall(rankings=c(1,2,3,NA),pi0=c(1,2,3,4),theta=2)
dmall(rankings=rankings1,pi0=c(1,2,3),theta=2)
dmall(rankings=rankings2,pi0=c(1,2,3,4),theta=3,log=TRUE)

</code></pre>

<hr>
<h2 id='dmb'>Calculate the density of rankings and ratings under a Mallows-Binomial distribution.</h2><span id='topic+dmb'></span>

<h3>Description</h3>

<p>This function calculates the density of observation(s) under a Mallows-Binomial distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dmb(rankings, ratings, p, theta, M, pi0 = NULL, log = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dmb_+3A_rankings">rankings</code></td>
<td>
<p>A matrix of rankings, potentially with attribute &quot;assignments&quot; to signify separate
reviewer assignments. One ranking per row.</p>
</td></tr>
<tr><td><code id="dmb_+3A_ratings">ratings</code></td>
<td>
<p>A matrix of ratings, one row per judge and one column per object.</p>
</td></tr>
<tr><td><code id="dmb_+3A_p">p</code></td>
<td>
<p>A vector specifying the underlying object qualities. All values between be between 0 and 1, inclusive.</p>
</td></tr>
<tr><td><code id="dmb_+3A_theta">theta</code></td>
<td>
<p>A numeric entry specifying the Mallows scale parameter.</p>
</td></tr>
<tr><td><code id="dmb_+3A_m">M</code></td>
<td>
<p>Numeric specifying maximum (=worst quality) integer rating.</p>
</td></tr>
<tr><td><code id="dmb_+3A_pi0">pi0</code></td>
<td>
<p>A vector specifying the consensus (modal probability) ranking; should be used only for tie-breaking
equal values in <code>p</code>.</p>
</td></tr>
<tr><td><code id="dmb_+3A_log">log</code></td>
<td>
<p>A boolean indicating if the log likelihood should be returned.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric value indicating the (log) likelihood of rankings and ratings under a Mallows distribution.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ToyData1)
dmb(rankings=ToyData1$rankings,ratings=ToyData1$ratings,p=c(.2,.5,.7),theta=1,M=ToyData1$M)
dmb(rankings=ToyData1$rankings,ratings=ToyData1$ratings,p=c(.25,.25,.7),theta=1,M=ToyData1$M,
pi0=c(1,2,3),log=TRUE)

</code></pre>

<hr>
<h2 id='fit_mb'>Calculate the exact or approximate MLE of a Mallows-Binomial distribution using various methods</h2><span id='topic+fit_mb'></span>

<h3>Description</h3>

<p>This function calculates the exact or approximate MLE of a Mallows-Binomial distribution using a user-specified method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit_mb(
  rankings,
  ratings,
  M,
  method = c("ASTAR", "Greedy", "GreedyLocal", "FV")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fit_mb_+3A_rankings">rankings</code></td>
<td>
<p>A matrix of rankings, potentially with attribute &quot;assignments&quot; to signify separate
reviewer assignments. One ranking per row.</p>
</td></tr>
<tr><td><code id="fit_mb_+3A_ratings">ratings</code></td>
<td>
<p>A matrix of ratings, one row per judge and one column per object.</p>
</td></tr>
<tr><td><code id="fit_mb_+3A_m">M</code></td>
<td>
<p>Numeric specifying maximum (=worst quality) integer rating.</p>
</td></tr>
<tr><td><code id="fit_mb_+3A_method">method</code></td>
<td>
<p>A character string indicating which estimation method to use when estimating parameters.
Allowable options are currently &quot;ASTAR&quot;, &quot;Greedy&quot;, &quot;GreedyLocal&quot;, and &quot;FV&quot;. Defaults to exact search, &quot;ASTAR&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with elements <code>pi0</code>, the estimated consensus ranking MLE, <code>p</code>, the
estimated object quality parameter MLE, <code>theta</code>, the estimated scale parameter MLE, and
<code>numnodes</code>, number of nodes traversed during algorithm and a measure of computational complexity.
If multiple MLEs are found, <code>pi0</code>, <code>p</code>, and <code>theta</code> are returned a matrix elements, with
one row per MLE.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("ToyData1")
fit_mb(ToyData1$rankings,ToyData1$ratings,ToyData1$M,method="ASTAR")
fit_mb(ToyData1$rankings,ToyData1$ratings,ToyData1$M,method="Greedy")
fit_mb(ToyData1$rankings,ToyData1$ratings,ToyData1$M,method="GreedyLocal")
fit_mb(ToyData1$rankings,ToyData1$ratings,ToyData1$M,method="FV")

</code></pre>

<hr>
<h2 id='FV'>Estimate the MLE of a Mallows-Binomial distribution using the FV method</h2><span id='topic+FV'></span>

<h3>Description</h3>

<p>This function estimates the MLE of a Mallows-Binomial distribution using the FV method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>FV(rankings, ratings, M)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="FV_+3A_rankings">rankings</code></td>
<td>
<p>A matrix of rankings, potentially with attribute &quot;assignments&quot; to signify separate
reviewer assignments. One ranking per row.</p>
</td></tr>
<tr><td><code id="FV_+3A_ratings">ratings</code></td>
<td>
<p>A matrix of ratings, one row per judge and one column per object.</p>
</td></tr>
<tr><td><code id="FV_+3A_m">M</code></td>
<td>
<p>Numeric specifying maximum (=worst quality) integer rating.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with elements <code>pi0</code>, the estimated consensus ranking MLE, <code>p</code>, the
estimated object quality parameter MLE, <code>theta</code>, the estimated scale parameter MLE, and
<code>numnodes</code>, number of nodes traversed during algorithm and a measure of computational complexity.
If multiple MLEs are found, <code>pi0</code>, <code>p</code>, and <code>theta</code> are returned a matrix elements, with
one row per MLE.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("ToyData1")
FV(ToyData1$rankings,ToyData1$ratings,ToyData1$M)

</code></pre>

<hr>
<h2 id='getQ'>Calculate Q Matrix</h2><span id='topic+getQ'></span>

<h3>Description</h3>

<p>This function calculates the Q matrix given a collection of (partial) rankings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getQ(rankings, I, J)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getQ_+3A_rankings">rankings</code></td>
<td>
<p>A matrix of rankings, potentially with attribute &quot;assignments&quot; to signify separate
reviewer assignments. One ranking per row.</p>
</td></tr>
<tr><td><code id="getQ_+3A_i">I</code></td>
<td>
<p>A numeric entry indicating the total number of judges providing rankings and ratings.</p>
</td></tr>
<tr><td><code id="getQ_+3A_j">J</code></td>
<td>
<p>A numeric entry or vector of positive integers indicating total number of objects.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix with dimension <code>J</code> x <code>J</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rankings &lt;- matrix(c(1,2,3,4,2,1,NA,NA),byrow=TRUE,nrow=2)
getQ(rankings=rankings,I=2,J=4)
attr(rankings,"assignments") &lt;- matrix(c(rep(TRUE,7),FALSE),byrow=TRUE,nrow=2,ncol=4)
getQ(rankings=rankings,I=2,J=4)

</code></pre>

<hr>
<h2 id='Greedy'>Estimate the MLE of a Mallows-Binomial distribution using the Greedy method</h2><span id='topic+Greedy'></span>

<h3>Description</h3>

<p>This function estimates the MLE of a Mallows-Binomial distribution using the Greedy method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Greedy(rankings, ratings, M)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Greedy_+3A_rankings">rankings</code></td>
<td>
<p>A matrix of rankings, potentially with attribute &quot;assignments&quot; to signify separate
reviewer assignments. One ranking per row.</p>
</td></tr>
<tr><td><code id="Greedy_+3A_ratings">ratings</code></td>
<td>
<p>A matrix of ratings, one row per judge and one column per object.</p>
</td></tr>
<tr><td><code id="Greedy_+3A_m">M</code></td>
<td>
<p>Numeric specifying maximum (=worst quality) integer rating.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with elements <code>pi0</code>, the estimated consensus ranking MLE, <code>p</code>, the
estimated object quality parameter MLE, <code>theta</code>, the estimated scale parameter MLE, and
<code>numnodes</code>, number of nodes traversed during algorithm and a measure of computational complexity.
If multiple MLEs are found, <code>pi0</code>, <code>p</code>, and <code>theta</code> are returned a matrix elements, with
one row per MLE.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("ToyData1")
Greedy(ToyData1$rankings,ToyData1$ratings,ToyData1$M)

</code></pre>

<hr>
<h2 id='GreedyLocal'>Estimate the MLE of a Mallows-Binomial distribution using the &quot;Greedy Local&quot; method</h2><span id='topic+GreedyLocal'></span>

<h3>Description</h3>

<p>This function estimates the MLE of a Mallows-Binomial distribution using the GreedyLocal method,
which is identical to the Greedy method but includes an automatic and targeted post-hoc local search.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GreedyLocal(rankings, ratings, M)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GreedyLocal_+3A_rankings">rankings</code></td>
<td>
<p>A matrix of rankings, potentially with attribute &quot;assignments&quot; to signify separate
reviewer assignments. One ranking per row.</p>
</td></tr>
<tr><td><code id="GreedyLocal_+3A_ratings">ratings</code></td>
<td>
<p>A matrix of ratings, one row per judge and one column per object.</p>
</td></tr>
<tr><td><code id="GreedyLocal_+3A_m">M</code></td>
<td>
<p>Numeric specifying maximum (=worst quality) integer rating.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with elements <code>pi0</code>, the estimated consensus ranking MLE, <code>p</code>, the
estimated object quality parameter MLE, <code>theta</code>, the estimated scale parameter MLE, and
<code>numnodes</code>, number of nodes traversed during algorithm and a measure of computational complexity.
If multiple MLEs are found, <code>pi0</code>, <code>p</code>, and <code>theta</code> are returned a matrix elements, with
one row per MLE.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("ToyData1")
GreedyLocal(ToyData1$rankings,ToyData1$ratings,ToyData1$M)

</code></pre>

<hr>
<h2 id='kendall'>Calculate the Kendall's tau between rankings</h2><span id='topic+kendall'></span>

<h3>Description</h3>

<p>This function calculates Kendall's tau distance between ranking(s) and a central permutation, pi0
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kendall(rankings, pi0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="kendall_+3A_rankings">rankings</code></td>
<td>
<p>A matrix of rankings, potentially with attribute &quot;assignments&quot; to signify separate
reviewer assignments. One ranking per row.</p>
</td></tr>
<tr><td><code id="kendall_+3A_pi0">pi0</code></td>
<td>
<p>A vector specifying the consensus (modal probability) ranking.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of the Kendall's tau distance between each ranking in <code>rankings</code> and <code>pi0</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ranking1 &lt;- c(2,1,3)
ranking2 &lt;- matrix(c(2,1,3,1,2,3),byrow=TRUE,nrow=2)
ranking3 &lt;- matrix(c(1,2,3,4,2,4,NA,NA),byrow=TRUE,nrow=2)
attr(ranking3,"assignments") &lt;- matrix(c(TRUE,TRUE,TRUE,TRUE,
  FALSE,TRUE,FALSE,TRUE),byrow=TRUE,nrow=2)
kendall(ranking1,c(1,2,3))
kendall(ranking2,c(1,2,3))
kendall(ranking3,c(1,2,3,4))

</code></pre>

<hr>
<h2 id='psi'>Normalizing constant function of a Mallows distribution, psi</h2><span id='topic+psi'></span>

<h3>Description</h3>

<p>This function calculates the normalizing constant of a Mallows distribution under the Kendall distance
</p>


<h3>Usage</h3>

<pre><code class='language-R'>psi(theta, J, R, log = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="psi_+3A_theta">theta</code></td>
<td>
<p>A numeric entry specifying the Mallows scale parameter.</p>
</td></tr>
<tr><td><code id="psi_+3A_j">J</code></td>
<td>
<p>A numeric entry or vector of positive integers indicating total number of objects each judge has access to.
If <code>length(J)&gt;1</code>, <code>R</code> must be of same length or a single value.</p>
</td></tr>
<tr><td><code id="psi_+3A_r">R</code></td>
<td>
<p>A numeric entry or vector of positive integers indicating the length of the ranking provided by each judge.
If <code>length(R)&gt;1</code>, <code>J</code> must be of same length or a single value.</p>
</td></tr>
<tr><td><code id="psi_+3A_log">log</code></td>
<td>
<p>A boolean indicating if <code>log(psi)</code> should be returned.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric value or vector representing normalizing constant of a Mallows distribution.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>psi(theta=1,J=10,R=8)
psi(theta=2,J=c(4,4,3),R=c(2,2,1),log=TRUE)

</code></pre>

<hr>
<h2 id='rmall'>Random Mallows generation.</h2><span id='topic+rmall'></span>

<h3>Description</h3>

<p>This function randomly generates rankings from a Mallows distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmall(I, pi0, theta, R = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rmall_+3A_i">I</code></td>
<td>
<p>A numeric entry indicating the number of observations to be drawn, i.e., the number of judges
providing rankings and ratings.</p>
</td></tr>
<tr><td><code id="rmall_+3A_pi0">pi0</code></td>
<td>
<p>A vector specifying the consensus (modal probability) ranking; should be used only for tie-breaking
equal values in <code>p</code>.</p>
</td></tr>
<tr><td><code id="rmall_+3A_theta">theta</code></td>
<td>
<p>A numeric entry specifying the Mallows scale parameter.</p>
</td></tr>
<tr><td><code id="rmall_+3A_r">R</code></td>
<td>
<p>A numeric entry specifying the length of the rankings to be drawn. When <code>R&lt;=length(p)</code>, partial
rankings are drawn by definition.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix of rankings (orderings) with one row per judge.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rmall(I=5,pi0=1:5,theta=1,R=3)
rmall(I=5,pi0=1:3,theta=.5,R=c(1,1,1,1,3))
rmall(I=5,pi0=1:3,theta=.5)

</code></pre>

<hr>
<h2 id='rmb'>Random Mallows-Binomial generation</h2><span id='topic+rmb'></span>

<h3>Description</h3>

<p>This function randomly generates rankings and ratings from a Mallows-Binomial distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmb(I, p, theta, M, pi0 = NULL, R = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rmb_+3A_i">I</code></td>
<td>
<p>A numeric entry indicating the number of observations to be drawn, i.e., the number of judges
providing rankings and ratings.</p>
</td></tr>
<tr><td><code id="rmb_+3A_p">p</code></td>
<td>
<p>A vector specifying the underlying object qualities. All values between be between 0 and 1, inclusive.</p>
</td></tr>
<tr><td><code id="rmb_+3A_theta">theta</code></td>
<td>
<p>A numeric entry specifying the Mallows scale parameter.</p>
</td></tr>
<tr><td><code id="rmb_+3A_m">M</code></td>
<td>
<p>A numeric entry specifying the maximum integer rating.</p>
</td></tr>
<tr><td><code id="rmb_+3A_pi0">pi0</code></td>
<td>
<p>A vector specifying the consensus (modal probability) ranking; should be used only for tie-breaking
equal values in <code>p</code>.</p>
</td></tr>
<tr><td><code id="rmb_+3A_r">R</code></td>
<td>
<p>A numeric entry specifying the length of the rankings to be drawn. When <code>R&lt;=length(p)</code>, partial
rankings are drawn by definition.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing elements <code>ratings</code>, a matrix of integer ratings with one row per judge
and one column per object, <code>rankings</code>, and matrix of rankings (orderings) with one row per judge,
and <code>M</code>, the inputted maximum integer rating.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rmb(I=5,p=c(.1,.3,.4,.7,.9),theta=1,M=10)
rmb(I=10,p=c(.1,.3,.3,.7,.9),pi0=c(1,3,2,4,5),theta=5,M=40,R=3)

</code></pre>

<hr>
<h2 id='to_rankings'>Convert ranks into rankings (orderings)</h2><span id='topic+to_rankings'></span>

<h3>Description</h3>

<p>This function converts a matrix of ranks into a matrix of rankings (i.e., orderings), potentially including reviewer
assignments as an attribute of the ranking matrix. Additionally, it can be used to add an assignments matrix to an existing
matrix of rankings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>to_rankings(ranks, assignments = NULL, rankings = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="to_rankings_+3A_ranks">ranks</code></td>
<td>
<p>A matrix or vector of ranks, such that the (i,j) entry includes the rank given by judge i to proposal j.
<code>NA</code> is used to indicate that no rank was assigned to a proposal, which may occur for two reasons: (1)
If the <code>assignments</code> matrix is not specified or the (i,j) entry of assignments is <code>TRUE</code>, then an <code>NA</code> indicates that
a proposal was considered worse than all ranked proposals. (2) If the (i,j) entry of <code>assignments</code> is <code>FALSE</code>, then <code>NA</code>
indicates that a proposal was not considered by the judge and no information can be gleaned from the missing rank.</p>
</td></tr>
<tr><td><code id="to_rankings_+3A_assignments">assignments</code></td>
<td>
<p>A matrix of booleans, such that the (i,j) entry is <code>TRUE</code> if judge i was assigned to review proposal j, and
<code>FALSE</code> otherwise. If <code>assignments</code> is <code>NULL</code>, we assume all judges considered all proposals.</p>
</td></tr>
<tr><td><code id="to_rankings_+3A_rankings">rankings</code></td>
<td>
<p>A matrix or vector of rankings. If a matrix, there should be one ranking per row.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix of rankings, with one row per ranking. If <code>assignments</code> argument is specified, then the rankings matrix will have
the attribute &quot;assignments&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ranks &lt;- matrix(data=c(4,2,3,1,NA,1,2,3,NA,NA,1,NA),byrow=TRUE,nrow=3)
assignments=matrix(TRUE,byrow=TRUE,nrow=3,ncol=4)
to_rankings(ranks=ranks)
to_rankings(ranks=ranks,assignments=assignments)
to_rankings(assignments=matrix(TRUE,nrow=1,ncol=3),rankings=c(3,2,1))

</code></pre>

<hr>
<h2 id='ToyData1'>Toy data set of rankings and ratings demonstrating tie-breaking</h2><span id='topic+ToyData1'></span>

<h3>Description</h3>

<p>This toy data set includes 16 judges and 3 objects, and demonstrates the ability
of the Mallows-Binomial model to break ties in ratings via rankings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ToyData1
</code></pre>


<h3>Format</h3>

<p>list with three elements: (1) <code>rankings</code>, a 16 x 3 matrix of rankings with one row per judge;
(2) <code>ratings</code>, a 16 x 3 matrix of ratings, with one row per judge and one column per object; and
(3) <code>M</code>, a number indicating the maximum (worst) integer score.
</p>


<h3>Source</h3>

<p>Originally analyzed in: Gallo, Stephen A., et al. &quot;A new approach to peer review assessments: Score, then rank&quot; (2023). Research Integrity and Peer Review 8:10 (10). <a href="https://researchintegrityjournal.biomedcentral.com/articles/10.1186/s41073-023-00131-7">https://researchintegrityjournal.biomedcentral.com/articles/10.1186/s41073-023-00131-7</a>.
</p>

<hr>
<h2 id='ToyData2'>Toy data set of rankings and ratings demonstrating decision-making with partial rankings</h2><span id='topic+ToyData2'></span>

<h3>Description</h3>

<p>This toy data set includes 16 judges and 8 objects, and demonstrates the ability
of the Mallows-Binomial model to estimate overall object orderings under partial rankings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ToyData2
</code></pre>


<h3>Format</h3>

<p>list with three elements: (1) <code>rankings</code>, a 16 x 8 matrix of rankings with one row per judge;
(2) <code>ratings</code>, a 16 x 8 matrix of ratings, with one row per judge and one column per object; and
(3) <code>M</code>, a number indicating the maximum (worst) integer score.
</p>


<h3>Source</h3>

<p>Originally analyzed in: Gallo, Stephen A., et al. &quot;A new approach to peer review assessments: Score, then rank&quot; (2023). Research Integrity and Peer Review 8:10 (10). <a href="https://researchintegrityjournal.biomedcentral.com/articles/10.1186/s41073-023-00131-7">https://researchintegrityjournal.biomedcentral.com/articles/10.1186/s41073-023-00131-7</a>.
</p>

<hr>
<h2 id='ToyData3'>Toy data set of rankings and ratings when judges express internally inconsistent preferences</h2><span id='topic+ToyData3'></span>

<h3>Description</h3>

<p>This toy data set includes 16 judges and 3 objects, and demonstrates the ability
of the Mallows-Binomial model to estimate overall object orderings even when judges provide
sets of rankings and ratings which are internally inconsistent.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ToyData3
</code></pre>


<h3>Format</h3>

<p>list with three elements: (1) <code>rankings</code>, a 16 x 3 matrix of rankings with one row per judge;
(2) <code>ratings</code>, a 16 x 3 matrix of ratings, with one row per judge and one column per object; and
(3) <code>M</code>, a number indicating the maximum (worst) integer score.
</p>


<h3>Source</h3>

<p>Originally analyzed in: Gallo, Stephen A., et al. &quot;A new approach to peer review assessments: Score, then rank&quot; (2023). Research Integrity and Peer Review 8:10 (10). <a href="https://researchintegrityjournal.biomedcentral.com/articles/10.1186/s41073-023-00131-7">https://researchintegrityjournal.biomedcentral.com/articles/10.1186/s41073-023-00131-7</a>.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
