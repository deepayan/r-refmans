<!DOCTYPE html><html><head><title>Help for package SvyNom</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {SvyNom}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#SvyNom-package'><p>Nomograms for right-censored outcomes with complex survey data</p></a></li>
<li><a href='#noNA'><p>Gastric cancer case-control study</p></a></li>
<li><a href='#svycox.calibrate'><p>Checking the  calibration of a nomogram for a survey-weighted Cox</p>
model</a></li>
<li><a href='#svycox.nomogram'><p>Builds a nomogram for a survey-weighted Cox model</p></a></li>
<li><a href='#svycox.validate'>
<p>Validating a nomogram for a survey-weighted Cox model</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Nomograms for Right-Censored Outcomes from Survey Designs</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Builds, evaluates and validates a nomogram with survey data
    and right-censored outcomes. As described in Capanu (2015)
    &lt;<a href="https://doi.org/10.18637%2Fjss.v064.c01">doi:10.18637/jss.v064.c01</a>&gt;, the package contains functions to create
    the nomogram, validate it using bootstrap, as well as produce the
    calibration plots.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/MSKCC-Epi-Bio/SvyNom">https://github.com/MSKCC-Epi-Bio/SvyNom</a>,
<a href="https://mskcc-epi-bio.github.io/SvyNom/">https://mskcc-epi-bio.github.io/SvyNom/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/MSKCC-Epi-Bio/SvyNom/issues">https://github.com/MSKCC-Epi-Bio/SvyNom/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>Hmisc, rms, survey, survival</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>Suggests:</td>
<td>spelling</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-04-28 17:16:02 UTC; SjobergD</td>
</tr>
<tr>
<td>Author:</td>
<td>Mithat Gonen [aut, cre],
  Marinela Capanu [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Mithat Gonen &lt;gonenm@mskcc.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-04-28 23:10:11 UTC</td>
</tr>
</table>
<hr>
<h2 id='SvyNom-package'>Nomograms for right-censored outcomes with complex survey data</h2><span id='topic+SvyNom-package'></span><span id='topic+SvyNom'></span>

<h3>Description</h3>

<p>Builds, evaluates and validates a nomogram with survey data and right-censored outcomes.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> SvyNom</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.1</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2015-01-06</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL-2 </td>
</tr>
<tr>
 <td style="text-align: left;">
LazyLoad: </td><td style="text-align: left;"> yes</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>There are three functions for the user
svycox.nomogram, svycox.validate, svycox.calibrate
</p>


<h3>Author(s)</h3>

<p>Marinela Capanu and Mithat Gonen <br />
Maintainer: gonenm@mskcc.org
</p>


<h3>References</h3>

<p>Marinela Capanu, Mithat Gonen (2015). Building a Nomogram for Survey-Weighted Cox Models Using R. 
Journal of Statistical Software, Code Snippets, 64(1), 1-17. URL https://www.jstatsoft.org/v64/c01/.
</p>

<hr>
<h2 id='noNA'>Gastric cancer case-control study
</h2><span id='topic+noNA'></span>

<h3>Description</h3>

<p>Example dataset for the SvyNom package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(noNA)
</code></pre>


<h3>Author(s)</h3>

<p>Mithat Gonen, Marinela Capanu
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(noNA)
</code></pre>

<hr>
<h2 id='svycox.calibrate'>Checking the  calibration of a nomogram for a survey-weighted Cox
model
</h2><span id='topic+svycox.calibrate'></span>

<h3>Description</h3>

<p>Checks the calibration of a nomogram for a survey-weighted
Cox model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svycox.calibrate(.nom, .timept = .nom$pred.at, .ngroup = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svycox.calibrate_+3A_.nom">.nom</code></td>
<td>
<p>a nomogram object from svycox.nomogram
</p>
</td></tr>
<tr><td><code id="svycox.calibrate_+3A_.timept">.timept</code></td>
<td>
<p>the time point at which calibration will take
place; defaults to the time value of the prediction axis in the
nomogram
</p>
</td></tr>
<tr><td><code id="svycox.calibrate_+3A_.ngroup">.ngroup</code></td>
<td>
<p>number of groups to be formed for validation
purposes
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns a matrix of calibration values and plots them
</p>


<h3>Author(s)</h3>

<p>Mithat Gonen, Marinela Capanu
</p>


<h3>References</h3>

<p>Marinela Capanu, Mithat Gonen (2015). Building a Nomogram for Survey-Weighted Cox Models Using R. 
Journal of Statistical Software, Code Snippets, 64(1), 1-17. URL https://www.jstatsoft.org/v64/c01/.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(rms)
data(noNA)
dd=datadist(noNA)
options(datadist="dd")

dstr2=svydesign(id=~1, strata=~group, prob=~inv_weight, fpc=~ssize, data=noNA)

mynom=svycox.nomogram(.design=dstr2, .model=Surv(survival,surv_cens)~ECOG+liver_only+Alb+Hb+Age+
Differentiation+Gt_1_m1site+lymph_only, .data=noNA, pred.at=24, fun.lab="Prob of 2 Yr OS")

svycox.calibrate(mynom)
  </code></pre>

<hr>
<h2 id='svycox.nomogram'>Builds a nomogram for a survey-weighted Cox model</h2><span id='topic+svycox.nomogram'></span>

<h3>Description</h3>

<p>Builds a nomogram for a survey-weighted Cox model.</p>


<h3>Usage</h3>

<pre><code class='language-R'>svycox.nomogram(.design, .model, .data, pred.at, fun.lab)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svycox.nomogram_+3A_.design">.design</code></td>
<td>
<p> represents a survey design object obtained with the package &quot;survey&quot; </p>
</td></tr>
<tr><td><code id="svycox.nomogram_+3A_.model">.model</code></td>
<td>
<p> indicates a Cox model specification </p>
</td></tr>
<tr><td><code id="svycox.nomogram_+3A_.data">.data</code></td>
<td>
<p> contains the data on which the model is to be fit (can not contain NAs) </p>
</td></tr>
<tr><td><code id="svycox.nomogram_+3A_pred.at">pred.at</code></td>
<td>
<p> specifies the time point at which the nomogram prediction axis will be drawn </p>
</td></tr>
<tr><td><code id="svycox.nomogram_+3A_fun.lab">fun.lab</code></td>
<td>
<p> designate the label of the prediction axis </p>
</td></tr>
</table>


<h3>Details</h3>

<p>In addition to the inputs, this function expects the following: 
1) the input dataset (.data) cannot contain NAs. You can accomplish this using the 
na.omit function. See example. 
2) datadist must be set. See examples and the documentation for the rms package.
3) survey design must have been saved in .design
All of these requirements are explained in Capanu &amp; Gonen (2015) in detail
</p>


<h3>Value</h3>

<p>A list including elements
</p>
<table>
<tr><td><code>nomog</code></td>
<td>
<p>A nomogram object</p>
</td></tr>
<tr><td><code>preds</code></td>
<td>
<p>predicted values from the model</p>
</td></tr>
</table>
<p>In addition to what is listed below, the design and the fitted survey weighted Cox model (svy.cox), 
as well as the timepoint at which the nomogram prediction axis will
be drawn (pred.at) are stored
</p>


<h3>Author(s)</h3>

<p>Mithat Gonen, Marinela Capanu
</p>


<h3>References</h3>

<p>Marinela Capanu, Mithat Gonen (2015). Building a Nomogram for Survey-Weighted Cox Models Using R. 
Journal of Statistical Software, Code Snippets, 64(1), 1-17. URL https://www.jstatsoft.org/v64/c01/.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(survey)
library(rms)
data(noNA)
dd=datadist(noNA)
options(datadist="dd")
dstr2=svydesign(id=~1, strata=~group, prob=~inv_weight, fpc=~ssize, data=noNA)
mynom=svycox.nomogram(.design=dstr2, .model=Surv(survival,surv_cens)~ECOG+liver_only+Alb+Hb+Age+
Differentiation+Gt_1_m1site+lymph_only, .data=noNA, pred.at=24, fun.lab="Prob of 2 Yr OS")
plot(mynom$nomog)
</code></pre>

<hr>
<h2 id='svycox.validate'>
Validating a nomogram for a survey-weighted Cox model
</h2><span id='topic+svycox.validate'></span>

<h3>Description</h3>

<p>Validates a nomogram for a survey-weighted Cox model using bootstrap.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svycox.validate(.boot.index, .nom, .data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svycox.validate_+3A_.boot.index">.boot.index</code></td>
<td>

<p>a matrix of bootstrap sample indicators with the number of rows the same as the number of rows 
in the data on which the nomogram was created and the number of columns being the number of 
bootstrap samples</p>
</td></tr>
<tr><td><code id="svycox.validate_+3A_.nom">.nom</code></td>
<td>

<p>a nomogram object returned from svycox.nomogram
</p>
</td></tr>
<tr><td><code id="svycox.validate_+3A_.data">.data</code></td>
<td>

<p>contains the dataset on which the validation will take place
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that generating the bootstrap sample is design dependent and it is not part of the function. 
The user has to generate the bootstrap samples consistent with the   design used. An example of how 
the bootstrap sample was generated for the dataset is presented in the reference below. </p>


<h3>Value</h3>

<p>prints the estimated optimism and returns the vector of optimism values for each bootstrap sample 
which can be used to summarize the validation with the measure of choice
</p>


<h3>References</h3>

<p>Marinela Capanu, Mithat Gonen (2015). Building a Nomogram for Survey-Weighted Cox Models Using R. 
Journal of Statistical Software, Code Snippets, 64(1), 1-17. URL https://www.jstatsoft.org/v64/c01/.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>bootit=200
library(survey)
library(rms)
data(noNA)
dd=datadist(noNA)
options(datadist="dd")
dstr2=svydesign(id=~1, strata=~group, prob=~inv_weight, fpc=~ssize, data=noNA)
mynom=svycox.nomogram(.design=dstr2, .model=Surv(survival,surv_cens)~ECOG+liver_only+Alb+Hb+Age+
Differentiation+Gt_1_m1site+lymph_only, .data=noNA, pred.at=24, fun.lab="Prob of 2 Yr OS")

cases=which(noNA$group=="long")
controls=which(noNA$group=="&lt;24")
boot.index=matrix(NA,nrow(noNA),bootit)
for(i in 1:bootit){
boot.index[,i]=c(sample(cases,replace=TRUE),sample(controls,replace=TRUE))
}
myval=svycox.validate(boot.index,mynom,noNA)  
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
