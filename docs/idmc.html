<!DOCTYPE html><html lang="en"><head><title>Help for package idmc</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {idmc}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#idmc-package'><p>idmc: Load and Wrangle IDMC Displacement Data</p></a></li>
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#idmc_get_data'><p>Get data from the IDMC API</p></a></li>
<li><a href='#idmc_transform_daily'><p>Transform displacement event data to daily data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Load and Wrangle IDMC Displacement Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Utilities to work with data from the Internal Displacement
    Monitoring Centre (IDMC) (<a href="https://www.internal-displacement.org/">https://www.internal-displacement.org/</a>),
    with convenient functions for loading events data from the IDMC API
    and transforming events data to daily displacement estimates.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ocha-dap/idmc">https://github.com/ocha-dap/idmc</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ocha-dap/idmc/issues">https://github.com/ocha-dap/idmc/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, httr, jsonlite, lifecycle, magrittr, stringr, tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, usethis</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-09-23 13:41:29 UTC; caldwellst</td>
</tr>
<tr>
<td>Author:</td>
<td>Seth Caldwell [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Seth Caldwell &lt;caldwellst@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-09-23 13:50:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='idmc-package'>idmc: Load and Wrangle IDMC Displacement Data</h2><span id='topic+idmc'></span><span id='topic+idmc-package'></span>

<h3>Description</h3>

<p>Utilities to work with data from the Internal Displacement Monitoring Centre (IDMC) (<a href="https://www.internal-displacement.org/">https://www.internal-displacement.org/</a>), with convenient functions for loading events data from the IDMC API and transforming events data to daily displacement estimates.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Seth Caldwell <a href="mailto:caldwellst@gmail.com">caldwellst@gmail.com</a> [copyright holder]
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/ocha-dap/idmc">https://github.com/ocha-dap/idmc</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ocha-dap/idmc/issues">https://github.com/ocha-dap/idmc/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='idmc_get_data'>Get data from the IDMC API</h2><span id='topic+idmc_get_data'></span>

<h3>Description</h3>

<p><code>idmc_get_data()</code> calls the IDMC API to retrieve displacement data. The data
is converted from JSON to a data frame, date columns converted to <code>Date</code>
types, and returned as a <a href="dplyr.html#topic+reexports">dplyr::tibble</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>idmc_get_data(api_url = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="idmc_get_data_+3A_api_url">api_url</code></td>
<td>
<p>URL to the IDMC API. If <code>NULL</code>, the default, searches for
the <code>IDMC_API</code> environment variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Tibble of displacement data. Description of the data frame variables
are included in the documentation for the
<a href="https://www.internal-displacement.org/sites/default/files/IDMC_IDU_API_Codebook_14102020.pdf">IDMC IDU API</a>. # nolint
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
idmc_get_data()

</code></pre>

<hr>
<h2 id='idmc_transform_daily'>Transform displacement event data to daily data</h2><span id='topic+idmc_transform_daily'></span>

<h3>Description</h3>

<p><code>idmc_transform_daily()</code> transforms event data from the IDMC API (accessed
through <code><a href="#topic+idmc_get_data">idmc_get_data()</a></code>). For each event, identified by an <code>event_id</code>,
potentially duplicated data is filtered out. If there are <code style="white-space: pre;">&#8288;Recommended figure&#8288;</code>
rows based on the <code>role</code> column, then only those are kept. If there are no
recommended figures, then only the latest update to the <code>event_id</code> data is
kept, using <code>created_at</code> to find latest updates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>idmc_transform_daily(
  df,
  min_date = as.Date("2018-01-01"),
  max_date = Sys.Date(),
  filter_min_date = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="idmc_transform_daily_+3A_df">df</code></td>
<td>
<p>Event displacement data frame, generated from <code><a href="#topic+idmc_get_data">idmc_get_data()</a></code>.</p>
</td></tr>
<tr><td><code id="idmc_transform_daily_+3A_min_date">min_date</code></td>
<td>
<p>Date to backfill displacement data to. By default, <code>min_date</code>
is set the first day of 2018. Only a few observations of the IDMC data
are from before 2018, spanning back to 2011.
If <code>NULL</code>, no backfilling is done, and the first reported
case in the IDMC database is taken as the earliest.</p>
</td></tr>
<tr><td><code id="idmc_transform_daily_+3A_max_date">max_date</code></td>
<td>
<p>Date to extrapolate all data to, filling with <code>0</code>. If the
The latest date in the data frame is used if later than <code>max_date</code>.
If <code>NULL</code>, no extrapolation is done.</p>
</td></tr>
<tr><td><code id="idmc_transform_daily_+3A_filter_min_date">filter_min_date</code></td>
<td>
<p>If <code>TRUE</code>, the default, filters the data to only
contain data from <code>min_date</code> onward. Ensures that the few countries with
observations from 2011 but nothing until 2018 do not skew results.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The data for each event is spread out between
the start and end date, with the total displacement uniformly distributed
across all days. For each country and displacement type (conflict, disaster,
or other), all displacement on a day is summed up to create a total
daily displacement figure.
</p>
<p>By default, data is backfilled for all countries and displacement types to
the first reported date in the IDMC dataset. Data is always infilled with 0
between start and end dates.
</p>


<h3>Value</h3>

<p>Data frame of daily displacement with the following columns:
</p>

<dl>
<dt>iso3</dt><dd><p>Country ISO3 code.</p>
</dd>
<dt>country</dt><dd><p>Country or area name.</p>
</dd>
<dt>displacement_type</dt><dd><p>Type of displacement.</p>
</dd>
<dt>date</dt><dd><p>Date.</p>
</dd>
<dt>displacement_daily</dt><dd><p>Daily level of displacement.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>
idmc_get_data() %&gt;%
  idmc_transform_daily()

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
