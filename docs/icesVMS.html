<!DOCTYPE html><html><head><title>Help for package icesVMS</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {icesVMS}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#check_ecoregion'><p>Lists of Vocabularies</p></a></li>
<li><a href='#get_benthis_parameters'><p>Get gear characteristics for 'benthis' gear categories</p></a></li>
<li><a href='#get_csquare'><p>Download C-square information</p></a></li>
<li><a href='#get_ecoregion_list'><p>Lists of Vocabularies</p></a></li>
<li><a href='#get_effort_map'><p>Download fishing effort map data</p></a></li>
<li><a href='#get_fo_effort'><p>Download fishing effort summaries</p></a></li>
<li><a href='#get_fo_landings'><p>Download fishing landings summaries</p></a></li>
<li><a href='#get_logbook'><p>Download Logbook data</p></a></li>
<li><a href='#get_metier_lookup'><p>Link Metier level 6 to Benthis categories</p></a></li>
<li><a href='#get_passive_footprint'><p>Download passive fishing gear footprint</p></a></li>
<li><a href='#get_sar'><p>Download VMS data</p></a></li>
<li><a href='#get_sar_map'><p>Download swept area ratio map data</p></a></li>
<li><a href='#get_screening_details'><p>Get the details of a file screening session</p></a></li>
<li><a href='#get_screening_messages'><p>Get all messages of a file screening session</p></a></li>
<li><a href='#get_upload_summary'><p>Download a summary of submitted data</p></a></li>
<li><a href='#get_vms'><p>Download VMS data</p></a></li>
<li><a href='#get_wgfbit_data1'><p>Download swept area ratio, landings and value map data</p></a></li>
<li><a href='#get_wgfbit_data2'><p>Download swept area ratio, landings and value map data</p></a></li>
<li><a href='#get_wgfbit_data3'><p>Download swept area ratio, landings and value map data</p></a></li>
<li><a href='#icesVMS-package'><p>Functions to link to the ICES VMS and logbook database web services.</p></a></li>
<li><a href='#screen_vms_file'><p>Screen a VMS file and submit for QC checks</p></a></li>
<li><a href='#sum_distinct_vessels'><p>Add together anonymous ID entries</p></a></li>
<li><a href='#vms_api'><p>Build a VMS web service url</p></a></li>
<li><a href='#wkt_csquare'><p>Build a WKT string from latitude and longitude</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>1.1.4</td>
</tr>
<tr>
<td>Title:</td>
<td>Link to the ICES Vessel Monitoring System and Logbook Database
Web Services</td>
</tr>
<tr>
<td>Imports:</td>
<td>glue, httr, icesConnect (&ge; 1.0.0), icesVocab</td>
</tr>
<tr>
<td>Suggests:</td>
<td>sf</td>
</tr>
<tr>
<td>Description:</td>
<td>Links to the ICES Vessel Monitoring System (VMS) and logbook database web services 
  <a href="https://data.ices.dk/vms/webservices">https://data.ices.dk/vms/webservices</a> to allow users to download summaries and data products.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://data.ices.dk/vms">https://data.ices.dk/vms</a>,
<a href="https://github.com/ices-tools-prod/icesVMS">https://github.com/ices-tools-prod/icesVMS</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0)</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ices-tools-prod/icesVMS/issues">https://github.com/ices-tools-prod/icesVMS/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-03-20 11:20:34 UTC; colin</td>
</tr>
<tr>
<td>Author:</td>
<td>Colin Millar [aut, cre],
  Carlos Pinto [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Colin Millar &lt;colin.millar@ices.dk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-03-21 17:00:14 UTC</td>
</tr>
</table>
<hr>
<h2 id='check_ecoregion'>Lists of Vocabularies</h2><span id='topic+check_ecoregion'></span><span id='topic+check_stat_recs'></span><span id='topic+check_countries'></span>

<h3>Description</h3>

<p>Get a list of vocabularies such as country codes or ecoregions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ecoregion(arg, stop.on.fail = TRUE)

check_stat_recs(arg, stop.on.fail = TRUE)

check_countries(arg, stop.on.fail = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_ecoregion_+3A_arg">arg</code></td>
<td>
<p>one of country code, ICES statistical rectangle or ICES ecoregion</p>
</td></tr>
<tr><td><code id="check_ecoregion_+3A_stop.on.fail">stop.on.fail</code></td>
<td>
<p>logical, if TRUE function will call stop()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>logical
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
check_ecoregion("Celtic Seas")

check_stat_recs("40F1")

check_countries("DK")
check_countries(c("DK", "GB"))

</code></pre>

<hr>
<h2 id='get_benthis_parameters'>Get gear characteristics for 'benthis' gear categories</h2><span id='topic+get_benthis_parameters'></span>

<h3>Description</h3>

<p>Download a data.frame of gear contact models for
'benthis' gear categories used in calculating
the swept area of a fishing gear.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_benthis_parameters()
</code></pre>


<h3>Value</h3>

<p>a data.frame of model parameters
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
benthis_pars &lt;- get_benthis_parameters()


</code></pre>

<hr>
<h2 id='get_csquare'>Download C-square information</h2><span id='topic+get_csquare'></span>

<h3>Description</h3>

<p>Download a data.frame of information on a set of C-squares.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_csquare(c_square, stat_rec, ices_area, ecoregion, convert2sf = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_csquare_+3A_c_square">c_square</code></td>
<td>
<p>character 0.05 degree c-square name</p>
</td></tr>
<tr><td><code id="get_csquare_+3A_stat_rec">stat_rec</code></td>
<td>
<p>ICES statistical rectangle</p>
</td></tr>
<tr><td><code id="get_csquare_+3A_ices_area">ices_area</code></td>
<td>
<p>ICES area</p>
</td></tr>
<tr><td><code id="get_csquare_+3A_ecoregion">ecoregion</code></td>
<td>
<p>ICES ecoregion</p>
</td></tr>
<tr><td><code id="get_csquare_+3A_convert2sf">convert2sf</code></td>
<td>
<p>logical, default FALSE, should an simple features object
be returned if the <code>sf</code> package is installed?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the <code>sf</code> package is installed then a simple features object
will be returned, if convert2sf flag is set to TRUE.
</p>


<h3>Value</h3>

<p>a data.frame of VMS data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
sq40F3 &lt;- get_csquare(stat_rec = "40F3")

# if the sf package is installed, an simple feature object will be returned
 NS &lt;- get_csquare(ecoregion = "Greater North Sea", convert2sf = TRUE)
 plot(NS["ices_area"], border = "transparent")

</code></pre>

<hr>
<h2 id='get_ecoregion_list'>Lists of Vocabularies</h2><span id='topic+get_ecoregion_list'></span><span id='topic+get_stat_rec_list'></span><span id='topic+get_country_list'></span>

<h3>Description</h3>

<p>Get a list of vocabularies such as country codes or ecoregions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_ecoregion_list()

get_stat_rec_list()

get_country_list()
</code></pre>


<h3>Value</h3>

<p>a character vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
ecoregions &lt;- get_ecoregion_list()
"Celtic Seas" %in% ecoregions

stat_recs &lt;- get_stat_rec_list()
"40F1" %in% stat_recs

countries &lt;- get_country_list()
"DK" %in% countries

</code></pre>

<hr>
<h2 id='get_effort_map'>Download fishing effort map data</h2><span id='topic+get_effort_map'></span>

<h3>Description</h3>

<p>Download a data.frame of kw fishing hours by c-square and gear
category averaged over 4 years.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_effort_map(ecoregion, year = NULL, convert2sf = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_effort_map_+3A_ecoregion">ecoregion</code></td>
<td>
<p>ICES ecoregion (see details)</p>
</td></tr>
<tr><td><code id="get_effort_map_+3A_year">year</code></td>
<td>
<p>which year to select (see details)</p>
</td></tr>
<tr><td><code id="get_effort_map_+3A_convert2sf">convert2sf</code></td>
<td>
<p>logical, default FALSE, should an simple features object
be returned if the <code>sf</code> package is installed?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The spatial data.frame contains average annual mega Watt fishing hours,
averaged over 4 years.
</p>
<p>Available ecoregions are given in the description field of the ICES
ecoregion vocabulary &lt;http://vocab.ices.dk/?ref=1414&gt;
</p>


<h3>Value</h3>

<p>a data.frame with a WKT column for the c-square polygons
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# requires authorization
ns_effort_map &lt;- get_effort_map("Greater North Sea", convert2sf = TRUE)
plot(
  ns_effort_map[ns_effort_map$fishing_category_FO == "Otter","mw_fishinghours"], 
  border = FALSE, logz = TRUE
)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_fo_effort'>Download fishing effort summaries</h2><span id='topic+get_fo_effort'></span>

<h3>Description</h3>

<p>Download a data.frame of kw fishing hours by country and year for a
given ICES ecoregion.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_fo_effort(ecoregion)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_fo_effort_+3A_ecoregion">ecoregion</code></td>
<td>
<p>ICES ecoregion</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# requires authorization
ns_effort_data &lt;- get_fo_effort("Greater North Sea")

## End(Not run)

</code></pre>

<hr>
<h2 id='get_fo_landings'>Download fishing landings summaries</h2><span id='topic+get_fo_landings'></span>

<h3>Description</h3>

<p>Download a data.frame of total weight by country and year for a
given ICES ecoregion.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_fo_landings(ecoregion)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_fo_landings_+3A_ecoregion">ecoregion</code></td>
<td>
<p>ICES ecoregion</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# requires authorization
ns_landings_data &lt;- get_fo_landings("Greater North Sea")

## End(Not run)

</code></pre>

<hr>
<h2 id='get_logbook'>Download Logbook data</h2><span id='topic+get_logbook'></span>

<h3>Description</h3>

<p>RESTRICTED.  Only core members of the ICES VMS data call can access this data.
Download a data.frame of VMS data from the ICES VMS and logbook database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_logbook(
  country,
  year,
  month,
  gear_code,
  metier,
  stat_rec,
  ices_area,
  ecoregion
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_logbook_+3A_country">country</code></td>
<td>
<p>country code</p>
</td></tr>
<tr><td><code id="get_logbook_+3A_year">year</code></td>
<td>
<p>integer year</p>
</td></tr>
<tr><td><code id="get_logbook_+3A_month">month</code></td>
<td>
<p>integer month</p>
</td></tr>
<tr><td><code id="get_logbook_+3A_gear_code">gear_code</code></td>
<td>
<p>benthis gear code</p>
</td></tr>
<tr><td><code id="get_logbook_+3A_metier">metier</code></td>
<td>
<p>level 6 metier code</p>
</td></tr>
<tr><td><code id="get_logbook_+3A_stat_rec">stat_rec</code></td>
<td>
<p>ICES statistical rectangle</p>
</td></tr>
<tr><td><code id="get_logbook_+3A_ices_area">ices_area</code></td>
<td>
<p>ICES area</p>
</td></tr>
<tr><td><code id="get_logbook_+3A_ecoregion">ecoregion</code></td>
<td>
<p>ICES ecoregion</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame of VMS data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# requires authorization
logbook &lt;- get_logbook(country = "DK", year = 2021, month = 1)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_metier_lookup'>Link Metier level 6 to Benthis categories</h2><span id='topic+get_metier_lookup'></span>

<h3>Description</h3>

<p>Download a data.frame of Metier codes to link
level 6 metier codes with different gear categories
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_metier_lookup()
</code></pre>


<h3>Value</h3>

<p>a data.frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
metier_lookup &lt;- get_metier_lookup()


</code></pre>

<hr>
<h2 id='get_passive_footprint'>Download passive fishing gear footprint</h2><span id='topic+get_passive_footprint'></span>

<h3>Description</h3>

<p>Download a data.frame of presence of fishing by c-square and year
for passive fishing gears (see details).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_passive_footprint(
  ecoregion,
  year,
  metier_level4 = NULL,
  datacall = NULL,
  convert2sf = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_passive_footprint_+3A_ecoregion">ecoregion</code></td>
<td>
<p>ICES ecoregion</p>
</td></tr>
<tr><td><code id="get_passive_footprint_+3A_year">year</code></td>
<td>
<p>which year to select</p>
</td></tr>
<tr><td><code id="get_passive_footprint_+3A_metier_level4">metier_level4</code></td>
<td>
<p>optional gear code (metier level 4) (&quot;FPO&quot;)</p>
</td></tr>
<tr><td><code id="get_passive_footprint_+3A_datacall">datacall</code></td>
<td>
<p>integer year giving which data call year to inquire about.
If NULL returns the a summary of the most recent approved data.</p>
</td></tr>
<tr><td><code id="get_passive_footprint_+3A_convert2sf">convert2sf</code></td>
<td>
<p>logical, default FALSE, should an simple features object
be returned if the <code>sf</code> package is installed?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Passive gears defined as all gears registered under
the metier level 4 codes, FPO (fishing pots), LLS (long lines) and
GNS (set gill nets), with the exclusion of metier level 5 codes
within the GNS category: GNS_SPF and GNS_LPF (set gill nets
targeting small and large pelagic fish).
</p>


<h3>Value</h3>

<p>a data.frame with a WKT column for the c-square polygons
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# requires authorization
footprint_map &lt;- get_passive_footprint("Celtic Seas", 2021, convert2sf = TRUE)
plot(footprint_map["ecoregion"], border = FALSE)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_sar'>Download VMS data</h2><span id='topic+get_sar'></span>

<h3>Description</h3>

<p>RESTRICTED.  Only core members of the ICES VMS data call can access this data.
Download a data.frame of VMS swept area ratio values from the ICES VMS and logbook database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_sar(
  year,
  c_square,
  gear_code,
  stat_rec,
  ices_area,
  ecoregion,
  datacall = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_sar_+3A_year">year</code></td>
<td>
<p>integer year</p>
</td></tr>
<tr><td><code id="get_sar_+3A_c_square">c_square</code></td>
<td>
<p>character 0.05 degree c-square name</p>
</td></tr>
<tr><td><code id="get_sar_+3A_gear_code">gear_code</code></td>
<td>
<p>benthis gear code</p>
</td></tr>
<tr><td><code id="get_sar_+3A_stat_rec">stat_rec</code></td>
<td>
<p>ICES statistical rectangle</p>
</td></tr>
<tr><td><code id="get_sar_+3A_ices_area">ices_area</code></td>
<td>
<p>ICES area</p>
</td></tr>
<tr><td><code id="get_sar_+3A_ecoregion">ecoregion</code></td>
<td>
<p>ICES ecoregion</p>
</td></tr>
<tr><td><code id="get_sar_+3A_datacall">datacall</code></td>
<td>
<p>integer year giving which data call year to inquire about.
If NULL returns the a summary of the most recent approved data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame of VMS data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# requires authorization
sar &lt;- get_sar(2021, stat_rec = "40F1")

## End(Not run)

</code></pre>

<hr>
<h2 id='get_sar_map'>Download swept area ratio map data</h2><span id='topic+get_sar_map'></span>

<h3>Description</h3>

<p>Download a data.frame of surface and subsurface swept area
ratio by c-square for a given ICES ecoregion.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_sar_map(ecoregion, year = NULL, nyears = NULL, convert2sf = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_sar_map_+3A_ecoregion">ecoregion</code></td>
<td>
<p>ICES ecoregion</p>
</td></tr>
<tr><td><code id="get_sar_map_+3A_year">year</code></td>
<td>
<p>which year to select (see details)</p>
</td></tr>
<tr><td><code id="get_sar_map_+3A_nyears">nyears</code></td>
<td>
<p>the number of years to take an average over</p>
</td></tr>
<tr><td><code id="get_sar_map_+3A_convert2sf">convert2sf</code></td>
<td>
<p>logical, default FALSE, should an simple features object
be returned if the <code>sf</code> package is installed?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The spatial data.frame contains average annual surface-swept-area-ratio
and subsurface-swept-area-ratio averaged over 4 years by default.  If year
is not specified (NULL) then the present year - 1 is assumed.
</p>


<h3>Value</h3>

<p>a data.frame with a WKT column for the c-square polygons
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# requires authorization
sar_map &lt;- get_sar_map("Celtic Seas", 2021, convert2sf = TRUE)
plot(sar_map["surface_sar"], border = FALSE, logz = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_screening_details'>Get the details of a file screening session</h2><span id='topic+get_screening_details'></span>

<h3>Description</h3>

<p>Download a list of information on a file upload screening session.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_screening_details(sessionId)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_screening_details_+3A_sessionid">sessionId</code></td>
<td>
<p>file screening session ID</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
screening_info &lt;- get_screening_details(530)

</code></pre>

<hr>
<h2 id='get_screening_messages'>Get all messages of a file screening session</h2><span id='topic+get_screening_messages'></span>

<h3>Description</h3>

<p>Download a list of error and warning messages on a file upload screening session.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_screening_messages(sessionId)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_screening_messages_+3A_sessionid">sessionId</code></td>
<td>
<p>file screening session ID</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tofix &lt;- get_screening_messages(528)

</code></pre>

<hr>
<h2 id='get_upload_summary'>Download a summary of submitted data</h2><span id='topic+get_upload_summary'></span>

<h3>Description</h3>

<p>Download a summary of submitted data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_upload_summary(datacall = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_upload_summary_+3A_datacall">datacall</code></td>
<td>
<p>integer year giving which data call year to inquire about.
If NULL returns the a summary of the most recent approved data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame of VMS summary data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
upload_summary &lt;- get_upload_summary()

## End(Not run)

</code></pre>

<hr>
<h2 id='get_vms'>Download VMS data</h2><span id='topic+get_vms'></span>

<h3>Description</h3>

<p>RESTRICTED.  Only core members of the ICES VMS data call can access this data.
Download a data.frame of VMS data from the ICES VMS and logbook database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_vms(
  country,
  year,
  month,
  c_square,
  gear_code,
  metier,
  stat_rec,
  ices_area,
  ecoregion,
  datacall = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_vms_+3A_country">country</code></td>
<td>
<p>country code</p>
</td></tr>
<tr><td><code id="get_vms_+3A_year">year</code></td>
<td>
<p>integer year</p>
</td></tr>
<tr><td><code id="get_vms_+3A_month">month</code></td>
<td>
<p>integer month</p>
</td></tr>
<tr><td><code id="get_vms_+3A_c_square">c_square</code></td>
<td>
<p>character 0.05 degree c-square name</p>
</td></tr>
<tr><td><code id="get_vms_+3A_gear_code">gear_code</code></td>
<td>
<p>benthis gear code</p>
</td></tr>
<tr><td><code id="get_vms_+3A_metier">metier</code></td>
<td>
<p>level 6 metier code</p>
</td></tr>
<tr><td><code id="get_vms_+3A_stat_rec">stat_rec</code></td>
<td>
<p>ICES statistical rectangle</p>
</td></tr>
<tr><td><code id="get_vms_+3A_ices_area">ices_area</code></td>
<td>
<p>ICES area</p>
</td></tr>
<tr><td><code id="get_vms_+3A_ecoregion">ecoregion</code></td>
<td>
<p>ICES ecoregion</p>
</td></tr>
<tr><td><code id="get_vms_+3A_datacall">datacall</code></td>
<td>
<p>integer year giving which data call year to inquire about.
If NULL returns the a summary of the most recent approved data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame of VMS data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# requires authorization
vms &lt;- get_vms(country = "DK", year = 2021, month = 1)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_wgfbit_data1'>Download swept area ratio, landings and value map data</h2><span id='topic+get_wgfbit_data1'></span>

<h3>Description</h3>

<p>Download a data.frame of surface and subsurface swept area
ratio by c-square for a given ICES ecoregion, year and gear code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_wgfbit_data1(
  ecoregion,
  year,
  fishing_category = NULL,
  benthis_metier = NULL,
  datacall = NULL,
  convert2sf = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_wgfbit_data1_+3A_ecoregion">ecoregion</code></td>
<td>
<p>ICES ecoregion</p>
</td></tr>
<tr><td><code id="get_wgfbit_data1_+3A_year">year</code></td>
<td>
<p>which year to select</p>
</td></tr>
<tr><td><code id="get_wgfbit_data1_+3A_fishing_category">fishing_category</code></td>
<td>
<p>optional gear category (&quot;Otter&quot;, &quot;Dredge&quot;)</p>
</td></tr>
<tr><td><code id="get_wgfbit_data1_+3A_benthis_metier">benthis_metier</code></td>
<td>
<p>optional benthis metier (&quot;SDN_DMF&quot;)</p>
</td></tr>
<tr><td><code id="get_wgfbit_data1_+3A_datacall">datacall</code></td>
<td>
<p>integer year giving which data call year to inquire about.
If NULL returns the a summary of the most recent approved data.</p>
</td></tr>
<tr><td><code id="get_wgfbit_data1_+3A_convert2sf">convert2sf</code></td>
<td>
<p>logical, default FALSE, should an simple features object
be returned if the <code>sf</code> package is installed?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>fishing_category and benthis_metier may not both be supplied, if neither
are supplied the total is calculated.
</p>


<h3>Value</h3>

<p>a data.frame with a WKT column for the c-square polygons
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# requires authorization
data1 &lt;- get_wgfbit_data1("Celtic Seas", 2021, benthis_metier = "OT_DMF", convert2sf = TRUE)
plot(data1["total_weight"], border = NA, logz = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_wgfbit_data2'>Download swept area ratio, landings and value map data</h2><span id='topic+get_wgfbit_data2'></span>

<h3>Description</h3>

<p>Download a data.frame of surface and subsurface swept area
ratio by c-square for a given ICES ecoregion, year and gear code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_wgfbit_data2(ecoregion, year, convert2sf = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_wgfbit_data2_+3A_ecoregion">ecoregion</code></td>
<td>
<p>ICES ecoregion</p>
</td></tr>
<tr><td><code id="get_wgfbit_data2_+3A_year">year</code></td>
<td>
<p>which year to select</p>
</td></tr>
<tr><td><code id="get_wgfbit_data2_+3A_convert2sf">convert2sf</code></td>
<td>
<p>logical, default FALSE, should an simple features object
be returned if the <code>sf</code> package is installed?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame with a WKT column for the c-square polygons
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# requires authorization
data2 &lt;- get_wgfbit_data2("Celtic Seas", 2021, convert2sf = TRUE)
plot(data2[data2$lE_MET_level6 == "OTB_DEF_70-99_0_0", "total_weight"], border = NA, logz = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_wgfbit_data3'>Download swept area ratio, landings and value map data</h2><span id='topic+get_wgfbit_data3'></span>

<h3>Description</h3>

<p>Download a data.frame of surface and subsurface swept area
ratio by c-square for a given ICES ecoregion, month, year and gear code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_wgfbit_data3(
  year,
  fishing_category = NULL,
  benthis_metier = NULL,
  datacall = NULL,
  convert2sf = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_wgfbit_data3_+3A_year">year</code></td>
<td>
<p>which year to select</p>
</td></tr>
<tr><td><code id="get_wgfbit_data3_+3A_fishing_category">fishing_category</code></td>
<td>
<p>optional gear category (&quot;Otter&quot;, &quot;Dredge&quot;)</p>
</td></tr>
<tr><td><code id="get_wgfbit_data3_+3A_benthis_metier">benthis_metier</code></td>
<td>
<p>optional benthis metier (&quot;SDN_DMF&quot;)</p>
</td></tr>
<tr><td><code id="get_wgfbit_data3_+3A_datacall">datacall</code></td>
<td>
<p>integer year giving which data call year to inquire about.
If NULL returns the a summary of the most recent approved data.</p>
</td></tr>
<tr><td><code id="get_wgfbit_data3_+3A_convert2sf">convert2sf</code></td>
<td>
<p>logical, default FALSE, should an simple features object
be returned if the <code>sf</code> package is installed?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>gear_group and benthis_metier may not both be supplied, if neither
are supplied the total is calculated.
</p>


<h3>Value</h3>

<p>a data.frame with a WKT column for the c-square polygons
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# requires authorization
data3 &lt;- get_wgfbit_data3(2021, benthis_metier = "OT_DMF", convert2sf = TRUE)
plot(data3["surface_sar"], border = NA, logz = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='icesVMS-package'>Functions to link to the ICES VMS and logbook database web services.</h2><span id='topic+icesVMS-package'></span><span id='topic+icesVMS'></span>

<h3>Description</h3>

<p>Functions to link to the ICES VMS and logbook database web services to allow
users to download summaries and data products from the ICES VMS and logbook database.
</p>


<h3>Details</h3>

<p><em>Download data:</em>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+get_benthis_parameters">get_benthis_parameters</a></code>     </td><td style="text-align: left;"> download gear contact model parameters</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+get_metier_lookup">get_metier_lookup</a></code> </td><td style="text-align: left;"> download metier to gear category lookup table</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+get_vms">get_vms</a></code>         </td><td style="text-align: left;"> download VMS data
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Colin Millar.
</p>


<h3>References</h3>

<p>ICES VMS and Logbook Database web services: <a href="https://data.ices.dk/vms/webservices">https://data.ices.dk/vms/webservices</a>.
</p>

<hr>
<h2 id='screen_vms_file'>Screen a VMS file and submit for QC checks</h2><span id='topic+screen_vms_file'></span>

<h3>Description</h3>

<p>In this web service the user can upload a file to be screen and
validated by the VMS database. The service can be called using post
and the file will have to be part of the body of the call. The user
needs to be authenticated in order to call this service.
This file can be later pushed to the database by the same user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>screen_vms_file(file, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="screen_vms_file_+3A_file">file</code></td>
<td>
<p>file name of the file containing the data to screen</p>
</td></tr>
<tr><td><code id="screen_vms_file_+3A_verbose">verbose</code></td>
<td>
<p>return verbose information about the POST request</p>
</td></tr>
</table>


<h3>Value</h3>

<p>text message from the screening process
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# requires authorization
filename &lt;- system.file("test_files/vms_test.csv", package = "icesVMS")
screen_vms_file(filename)

## End(Not run)

</code></pre>

<hr>
<h2 id='sum_distinct_vessels'>Add together anonymous ID entries</h2><span id='topic+sum_distinct_vessels'></span><span id='topic+sum_vessel_ids'></span>

<h3>Description</h3>

<p>Anonymous vessel IDs are supplied when there are less than 2 vessels. Therefore when adding
these values, if there is one or more values containing an empty string (? 2 vessels)
then the results is an empty string also. Otherwise, a unique vector of vessel IDs is
computed and if there are 2 or less unique entries they are returned, otherwise an empty string
is returned.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sum_distinct_vessels(id, n)

sum_vessel_ids(id, n)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sum_distinct_vessels_+3A_id">id</code></td>
<td>
<p>a vector vessel Ids entries: string vector of semi-colon separated IDs</p>
</td></tr>
<tr><td><code id="sum_distinct_vessels_+3A_n">n</code></td>
<td>
<p>a vector corresponding to the number of unique vessel ids in the vector
supplied in <code>id</code> where 3 codes for anything greater than 2.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a single character
</p>


<h3>Note</h3>

<p>the format of the vessel IDs is a semi-colon separated list of IDs contained in a character
vector of length one.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
sum_vessel_ids(c("id1;id2", "id1", "id2", "id1;id3", ""), c(2, 1, 1, 2, 3))
sum_vessel_ids(c("id1;id2", "id1", "id2", "id1;id3"), c(2, 1, 1, 2))


sum_distinct_vessels(c("id1;id2", "id1", "id2", "id1;id3", ""), c(2, 1, 1, 2, 3))
sum_distinct_vessels(c("id1;id2", "id1", "id2", "id1;id3"), c(2, 1, 1, 2))

## Not run: 
require(dplyr)

data(vms)
vms &lt;-
  vms %&gt;%
  group_by(year, cSquare) %&gt;%
  summarise(
    fishingHours = sum(fishingHours, na.rm = TRUE),
    totweight = sum(totweight, na.rm = TRUE),
    noDistinctVessels = sum_distinct_vessels(anonymizedVesselID, noDistinctVessels),
    anonymizedVesselID = sum_vessel_ids(anonymizedVesselID, noDistinctVessels),
    .groups = "drop"
  )

## End(Not run)

</code></pre>

<hr>
<h2 id='vms_api'>Build a VMS web service url</h2><span id='topic+vms_api'></span>

<h3>Description</h3>

<p>utility to build a url with optional query arguments
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vms_api(service, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vms_api_+3A_service">service</code></td>
<td>
<p>the name of the service</p>
</td></tr>
<tr><td><code id="vms_api_+3A_...">...</code></td>
<td>
<p>named arguments will be added as queries</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a complete url as a character string
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
vms_api("hi", bye = 21)
vms_api("csquares", argument1 = 2021, argument2 = NULL)

</code></pre>

<hr>
<h2 id='wkt_csquare'>Build a WKT string from latitude and longitude</h2><span id='topic+wkt_csquare'></span>

<h3>Description</h3>

<p>utility to build a WKT (Well Known Text) polygon string
for a c-square
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wkt_csquare(lat, lon)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wkt_csquare_+3A_lat">lat</code></td>
<td>
<p>latitude</p>
</td></tr>
<tr><td><code id="wkt_csquare_+3A_lon">lon</code></td>
<td>
<p>longitude</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a string in WKT format
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
wkt_csquare(55, 0.1)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
