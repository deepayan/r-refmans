<!DOCTYPE html><html lang="en"><head><title>Help for package ggmap</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ggmap}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bb2bbox'><p>Convert a bb specification to a bbox specification</p></a></li>
<li><a href='#calc_zoom'><p>Calculate a zoom given a bounding box</p></a></li>
<li><a href='#crime'><p>Crime data</p></a></li>
<li><a href='#file_drawer'><p>Manage the ggmap file drawer.</p></a></li>
<li><a href='#geocode'><p>Geocode</p></a></li>
<li><a href='#geom_leg'><p>Single line segments with rounded ends</p></a></li>
<li><a href='#get_cloudmademap'><p>Get a CloudMade map.</p></a></li>
<li><a href='#get_googlemap'><p>Get a Google Map.</p></a></li>
<li><a href='#get_map'><p>Grab a map.</p></a></li>
<li><a href='#get_navermap'><p>Get a Naver Map</p></a></li>
<li><a href='#get_openstreetmap'><p>Get an OpenStreetMap</p></a></li>
<li><a href='#get_stadiamap'><p>Get a Map from Stadia Maps</p></a></li>
<li><a href='#get_stamenmap'><p>Get a Stamen Map</p></a></li>
<li><a href='#ggimage'><p>Plot an image using ggplot2</p></a></li>
<li><a href='#gglocator'><p>Locator for ggplot objects</p></a></li>
<li><a href='#ggmap'><p>Plot a ggmap object</p></a></li>
<li><a href='#ggmap_options'><p>ggmap Options</p></a></li>
<li><a href='#ggmap-defunct'><p>Defunct ggmap functions</p></a></li>
<li><a href='#ggmapplot'><p>Don't use this function, use ggmap.</p></a></li>
<li><a href='#hadley'><p>Highly unofficial ggplot2 image</p></a></li>
<li><a href='#inset'><p>Add ggplot2 insets to a map</p></a></li>
<li><a href='#inset_raster'><p>Create a (ggplot2) raster layer</p></a></li>
<li><a href='#legs2route'><p>Convert a leg-structured route to a route-structured route</p></a></li>
<li><a href='#LonLat2XY'><p>Convert a lon/lat coordinate to a tile coordinate</p></a></li>
<li><a href='#make_bbox'><p>Compute a bounding box</p></a></li>
<li><a href='#mapdist'><p>Compute map distances using Google</p></a></li>
<li><a href='#OSM_scale_lookup'><p>Look up OpenStreetMap scale for a given zoom level.</p></a></li>
<li><a href='#print.ggmap'><p>Print a map</p></a></li>
<li><a href='#qmap'><p>Quick map plot</p></a></li>
<li><a href='#qmplot'><p>Quick map plot</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#register_google'><p>Register a Google API</p></a></li>
<li><a href='#register_stadiamaps'><p>Register a Stadia Maps API Key</p></a></li>
<li><a href='#revgeocode'><p>Reverse geocode</p></a></li>
<li><a href='#route'><p>Grab a route from Google</p></a></li>
<li><a href='#theme_inset'><p>Make a ggplot2 inset theme.</p></a></li>
<li><a href='#theme_nothing'><p>Make a blank ggplot2 theme.</p></a></li>
<li><a href='#trek'><p>Grab a trek from Google</p></a></li>
<li><a href='#wind'><p>Wind data from Hurricane Ike</p></a></li>
<li><a href='#XY2LonLat'><p>Convert a tile coordinate to a lon/lat coordinate</p></a></li>
<li><a href='#zips'><p>Zip code data for the Greater Houston Metropolitan Area from the</p>
2000 census</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>4.0.0</td>
</tr>
<tr>
<td>Title:</td>
<td>Spatial Visualization with ggplot2</td>
</tr>
<tr>
<td>Description:</td>
<td>A collection of functions to visualize spatial data and models
    on top of static maps from various online sources (e.g Google Maps and Stamen
    Maps). It includes tools common to those tasks, including functions for
    geolocation and routing.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/dkahle/ggmap">https://github.com/dkahle/ggmap</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/dkahle/ggmap/issues">https://github.com/dkahle/ggmap/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0), ggplot2 (&ge; 2.2.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>png, plyr, jpeg, digest, scales, dplyr, bitops, grid, glue,
httr, stringr, purrr, magrittr, tibble, tidyr, rlang, cli</td>
</tr>
<tr>
<td>Suggests:</td>
<td>MASS, hexbin, testthat</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-19 03:58:04 UTC; david_kahle</td>
</tr>
<tr>
<td>Author:</td>
<td>David Kahle <a href="https://orcid.org/0000-0002-9999-1558"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Hadley Wickham <a href="https://orcid.org/0000-0003-4757-117X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Scott Jackson [aut],
  Mikko Korpela [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David Kahle &lt;david@kahle.io&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-19 08:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='bb2bbox'>Convert a bb specification to a bbox specification</h2><span id='topic+bb2bbox'></span>

<h3>Description</h3>

<p>In ggmap, all maps (class ggmap) have the bb attribute, a data
frame bounding box specification in terms of the bottom left and
top right points of the spatial extent. This function converts
this specification to a named double vector (with names left,
bottom, right, top) specification that is used in some querying
functions (e.g. get_stadiamap).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bb2bbox(bb)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bb2bbox_+3A_bb">bb</code></td>
<td>
<p>a bounding box in bb format (see examples)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a bounding box in bbox format (see examples)
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: # cut down on R CMD check time

# grab a center/zoom map and compute its bounding box
gc &lt;- geocode("white house, washington dc")
map &lt;- get_map(gc)
(bb &lt;- attr(map, "bb"))
(bbox &lt;- bb2bbox(bb))

# use the bounding box to get a Stadia map
stadMap &lt;- get_stadiamap(bbox)

ggmap(map) +
  geom_point(
    aes(x = lon, y = lat),
    data = gc, colour = "red", size = 3
  )

ggmap(stadMap) +
  geom_point(
    aes(x = lon, y = lat),
    data = gc, colour = "red", size = 3
  )



## End(Not run)


</code></pre>

<hr>
<h2 id='calc_zoom'>Calculate a zoom given a bounding box</h2><span id='topic+calc_zoom'></span>

<h3>Description</h3>

<p>calc_zoom can calculate a zoom based on either (1) a data frame
with longitude and latitude variables, (2) a longitude range and
latitude range, or (3) a bounding box (bbox specification). The
specification for (1) is identical to that of most R functions,
for (2) simply put in a longitude range into lon and a latitude
range into lat, and for (3) put the bounding box in for the lon
argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_zoom(lon, lat, data, adjust = 0, f = 0.05)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_zoom_+3A_lon">lon</code></td>
<td>
<p>longitude, see details</p>
</td></tr>
<tr><td><code id="calc_zoom_+3A_lat">lat</code></td>
<td>
<p>latitude, see details</p>
</td></tr>
<tr><td><code id="calc_zoom_+3A_data">data</code></td>
<td>
<p>(optional) a data frame containing lon and lat as
variables</p>
</td></tr>
<tr><td><code id="calc_zoom_+3A_adjust">adjust</code></td>
<td>
<p>number to add to the calculated zoom</p>
</td></tr>
<tr><td><code id="calc_zoom_+3A_f">f</code></td>
<td>
<p>argument to pass to make_bbox</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+make_bbox">make_bbox()</a></code>, <code><a href="#topic+bb2bbox">bb2bbox()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># From data
calc_zoom(lon, lat, wind)

# From range
lon_range &lt;- extendrange( wind$lon )
lat_range &lt;- extendrange( wind$lat )
calc_zoom(lon_range, lat_range)

# From bounding box
box &lt;- make_bbox(lon, lat, data = crime)
calc_zoom(box)
</code></pre>

<hr>
<h2 id='crime'>Crime data</h2><span id='topic+crime'></span>

<h3>Description</h3>

<p>Lightly cleaned Houston crime from January 2010 to August 2010 geocoded with
Google Maps
</p>


<h3>Author(s)</h3>

<p>Houston Police Department, City of Houston
</p>


<h3>References</h3>

<p><a href="https://www.houstontx.gov/police/cs/index-2.htm">https://www.houstontx.gov/police/cs/index-2.htm</a>
</p>

<hr>
<h2 id='file_drawer'>Manage the ggmap file drawer.</h2><span id='topic+file_drawer'></span>

<h3>Description</h3>

<p>To avoid downloading the same maps again and again, ggmap uses a
&quot;file drawer&quot; to store the maps you've downloaded. By default,
they will be stored in a session specific temporary directory
which will be deleted each time you quit R. If you want them to
persist across sessions, set the global option
&quot;ggmap.file_drawer&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>file_drawer(...)
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run:  if server is unresponsive, R check will fail

file_drawer()
dir(file_drawer())

# The first time you run this, the tiles are downloaded from the server
map &lt;- get_stadiamap()
# The second time, the local cache is used so it's much faster
map &lt;- get_stadiamap()

dir(file_drawer())


## End(Not run)

</code></pre>

<hr>
<h2 id='geocode'>Geocode</h2><span id='topic+geocode'></span><span id='topic+mutate_geocode'></span><span id='topic+geocodeQueryCheck'></span><span id='topic+geocode_cache'></span><span id='topic+write_geocode_cache'></span><span id='topic+load_geocode_cache'></span><span id='topic+clear_geocode_cache'></span>

<h3>Description</h3>

<p>Geocodes (finds latitude and longitude of) a location using the Google
Geocoding API. Note: To use Google's Geocoding API, you must first enable the
API in the Google Cloud Platform Console. See <code><a href="#topic+register_google">register_google()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geocode(
  location,
  output = c("latlon", "latlona", "more", "all"),
  source = c("google", "dsk"),
  force = ifelse(source == "dsk", FALSE, TRUE),
  urlonly = FALSE,
  override_limit = FALSE,
  nameType = c("long", "short"),
  ext = "com",
  inject = "",
  ...
)

mutate_geocode(data, location, ...)

geocodeQueryCheck()

geocode_cache()

write_geocode_cache(path, ...)

load_geocode_cache(path, overwrite = FALSE)

clear_geocode_cache(path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geocode_+3A_location">location</code></td>
<td>
<p>a character vector of street addresses or place names (e.g.
<code style="white-space: pre;">&#8288;"1600 pennsylvania avenue, washington dc" or "Baylor University"&#8288;</code>)</p>
</td></tr>
<tr><td><code id="geocode_+3A_output">output</code></td>
<td>
<p>amount of output, <code>"latlon"</code>, <code>"latlona"</code>, <code>"more"</code>, or <code>"all"</code></p>
</td></tr>
<tr><td><code id="geocode_+3A_source">source</code></td>
<td>
<p>&quot;google&quot; for Google (note: &quot;dsk&quot; is defunct)</p>
</td></tr>
<tr><td><code id="geocode_+3A_force">force</code></td>
<td>
<p>force online query even if cached.</p>
</td></tr>
<tr><td><code id="geocode_+3A_urlonly">urlonly</code></td>
<td>
<p>return only the url?</p>
</td></tr>
<tr><td><code id="geocode_+3A_override_limit">override_limit</code></td>
<td>
<p>override the current query rate</p>
</td></tr>
<tr><td><code id="geocode_+3A_nametype">nameType</code></td>
<td>
<p>in some cases, Google returns both a long name and a short
name. this parameter allows the user to specify which to grab.</p>
</td></tr>
<tr><td><code id="geocode_+3A_ext">ext</code></td>
<td>
<p>top level domain (e.g. &quot;com&quot;, &quot;co.nz&quot;); helpful for non-US users</p>
</td></tr>
<tr><td><code id="geocode_+3A_inject">inject</code></td>
<td>
<p>character string to add to the url or named character vector of
key-value pairs to be injected (e.g. c(&quot;a&quot; = &quot;b&quot;) get converted to &quot;a=b&quot;
and appended to the query)</p>
</td></tr>
<tr><td><code id="geocode_+3A_...">...</code></td>
<td>
<p>In <code><a href="#topic+mutate_geocode">mutate_geocode()</a></code>, arguments to pass to <code><a href="#topic+geocode">geocode()</a></code>. In
<code><a href="#topic+write_geocode_cache">write_geocode_cache()</a></code>, arguments to pass to <code><a href="base.html#topic+saveRDS">saveRDS()</a></code>.</p>
</td></tr>
<tr><td><code id="geocode_+3A_data">data</code></td>
<td>
<p>a data frame or equivalent</p>
</td></tr>
<tr><td><code id="geocode_+3A_path">path</code></td>
<td>
<p>path to file</p>
</td></tr>
<tr><td><code id="geocode_+3A_overwrite">overwrite</code></td>
<td>
<p>in <code><a href="#topic+load_geocode_cache">load_geocode_cache()</a></code>, should the current cache be
wholly replaced with the one on file?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note: <code><a href="#topic+geocode">geocode()</a></code> uses Google's Geocoding API to geocode addresses. Please
take care not to disclose sensitive information.
<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8972108/">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8972108/</a> suggest various
alternative options for such data.
</p>


<h3>Value</h3>

<p>If <code>output</code> is <code>"latlon"</code>, <code>"latlona"</code>, or <code>"more"</code>, a tibble
(classed data frame). If <code>"all"</code>, a list.
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>See Also</h3>

<p><a href="https://developers.google.com/maps/documentation/geocoding/">https://developers.google.com/maps/documentation/geocoding/</a>,
<a href="https://developers.google.com/maps/documentation/javascript/geocoding/">https://developers.google.com/maps/documentation/javascript/geocoding/</a>,
<a href="https://developers.google.com/maps/documentation/geocoding/usage-and-billing/">https://developers.google.com/maps/documentation/geocoding/usage-and-billing/</a>,
<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8972108/">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8972108/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run:  requires Google API key, see ?register_google

## basic usage
########################################

# geocoding is most commonly used for addresses
geocode("1600 Amphitheatre Parkway, Mountain View, CA")
geocode("1600 Amphitheatre Parkway, Mountain View, CA", urlonly = TRUE)

# google can also geocode colloquial names of places
geocode("the white house")

# geocode can also accept character vectors of places
geocode(c("the white house", "washington dc"))



## types of output
########################################

geocode("waco texas")
geocode("waco texas", output = "latlona")
geocode("waco texas", output = "more")
str(geocode("waco texas", output = "all"))

geocode(c("waco, texas", "houston, texas"))
geocode(c("waco, texas", "houston, texas"), output = "latlona")
geocode(c("waco, texas", "houston, texas"), output = "all") %&gt;% str(4)



## mutate_geocode
########################################

# mutate_geocode is used to add location columns to an existing dataset
# that has location information

df &lt;- data.frame(
  address = c("1600 Pennsylvania Avenue, Washington DC", "", "houston texas"),
  stringsAsFactors = FALSE
)

mutate_geocode(df, address)
df %&gt;% mutate_geocode(address)


## known issues
########################################

# in some cases geocode finds several locations



## End(Not run)


</code></pre>

<hr>
<h2 id='geom_leg'>Single line segments with rounded ends</h2><span id='topic+geom_leg'></span>

<h3>Description</h3>

<p>This is ggplot2's segment with rounded ends.  It's mainly
included in ggmap for historical reasons.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_leg(
  mapping = NULL,
  data = NULL,
  stat = "identity",
  position = "identity",
  arrow = NULL,
  lineend = "round",
  na.rm = FALSE,
  show.legend = NA,
  inherit.aes = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geom_leg_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes()</a></code>. If specified and
<code>inherit.aes = TRUE</code> (the default), it is combined with the default mapping
at the top level of the plot. You must supply <code>mapping</code> if there is no plot
mapping.</p>
</td></tr>
<tr><td><code id="geom_leg_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot()</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify()</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame</code>, and
will be used as the layer data. A <code>function</code> can be created
from a <code>formula</code> (e.g. <code>~ head(.x, 10)</code>).</p>
</td></tr>
<tr><td><code id="geom_leg_+3A_stat">stat</code></td>
<td>
<p>The statistical transformation to use on the data for this
layer, either as a <code>ggproto</code> <code>Geom</code> subclass or as a string naming the
stat stripped of the <code>stat_</code> prefix (e.g. <code>"count"</code> rather than
<code>"stat_count"</code>)</p>
</td></tr>
<tr><td><code id="geom_leg_+3A_position">position</code></td>
<td>
<p>Position adjustment, either as a string naming the adjustment
(e.g. <code>"jitter"</code> to use <code>position_jitter</code>), or the result of a call to a
position adjustment function. Use the latter if you need to change the
settings of the adjustment.</p>
</td></tr>
<tr><td><code id="geom_leg_+3A_arrow">arrow</code></td>
<td>
<p>specification for arrow heads, as created by <code><a href="grid.html#topic+arrow">grid::arrow()</a></code>.</p>
</td></tr>
<tr><td><code id="geom_leg_+3A_lineend">lineend</code></td>
<td>
<p>Line end style (round, butt, square).</p>
</td></tr>
<tr><td><code id="geom_leg_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="geom_leg_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p>
</td></tr>
<tr><td><code id="geom_leg_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders()</a></code>.</p>
</td></tr>
<tr><td><code id="geom_leg_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer()</a></code>. These are
often aesthetics, used to set an aesthetic to a fixed value, like
<code>colour = "red"</code> or <code>size = 3</code>. They may also be parameters
to the paired geom/stat.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>only intended for use in ggmap package.  only designed
for mercator projection.
</p>


<h3>See Also</h3>

<p><code>geom_segment()</code>, <code><a href="#topic+route">route()</a></code>, inspired by
http://spatialanalysis.co.uk/2012/02/great-maps-ggplot2/, no longer active
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run:  # removed for R CMD check speed

map &lt;- get_map(
  location = c(-77.0425, 38.8925), # painfully picked by hand
  source = "google", zoom = 14, maptype = "satellite"
)
ggmap(map)


(legs_df &lt;- route(
  "the white house, dc",
  "lincoln memorial washington dc",
  alternatives = TRUE
))

ggplot(data = legs_df) +
  geom_leg(aes(
    x = start_lon, xend = end_lon,
    y = start_lat, yend = end_lat
  )) +
  coord_map()

ggplot(data = legs_df) +
  geom_leg(aes(
    x = start_lon, xend = end_lon,
    y = start_lat, yend = end_lat,
    color = route
  )) +
  coord_map()


ggmap(map) +
  geom_leg(
    aes(
      x = start_lon, xend = end_lon,
      y = start_lat, yend = end_lat
    ),
    data = legs_df, color = "red"
  )

# adding a color aesthetic errors because of a base-layer problem
# ggmap(map) +
#   geom_leg(
#     aes(
#       x = start_lon, xend = end_lon,
#       y = start_lat, yend = end_lat,
#       color = route
#   )
# )


# this is probably the easiest hack to fix it
ggplot(data = legs_df) +
  inset_ggmap(map) +
  geom_leg(
    aes(
      x = start_lon, xend = end_lon,
      y = start_lat, yend = end_lat,
      color = route
    ),
    data = legs_df
  ) +
  coord_map()


## End(Not run)

</code></pre>

<hr>
<h2 id='get_cloudmademap'>Get a CloudMade map.</h2><span id='topic+get_cloudmademap'></span>

<h3>Description</h3>

<p><code><a href="#topic+get_cloudmademap">get_cloudmademap()</a></code> accesses a tile server for Stamen Maps and
downloads/stitches map tiles/formats a map image. This function requires an
api key which can be obtained for free from http://cloudmade.com/user/show,
now defunct. Thousands of maptypes (&quot;styles&quot;), including create-your-own
options, are available from http://maps.cloudmade.com/editor (defunct).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_cloudmademap(
  bbox = c(left = -95.80204, bottom = 29.38048, right = -94.92313, top = 30.14344),
  zoom = 10,
  api_key,
  maptype = 1,
  highres = TRUE,
  crop = TRUE,
  messaging = FALSE,
  urlonly = FALSE,
  filename = NULL,
  color = c("color", "bw"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_cloudmademap_+3A_bbox">bbox</code></td>
<td>
<p>a bounding box in the format c(lowerleftlon, lowerleftlat,
upperrightlon, upperrightlat).</p>
</td></tr>
<tr><td><code id="get_cloudmademap_+3A_zoom">zoom</code></td>
<td>
<p>a zoom level</p>
</td></tr>
<tr><td><code id="get_cloudmademap_+3A_api_key">api_key</code></td>
<td>
<p>character string containing cloud made api key, see details</p>
</td></tr>
<tr><td><code id="get_cloudmademap_+3A_maptype">maptype</code></td>
<td>
<p>an integer of what cloud made calls style, see details</p>
</td></tr>
<tr><td><code id="get_cloudmademap_+3A_highres">highres</code></td>
<td>
<p>double resolution</p>
</td></tr>
<tr><td><code id="get_cloudmademap_+3A_crop">crop</code></td>
<td>
<p>crop raw map tiles to specified bounding box</p>
</td></tr>
<tr><td><code id="get_cloudmademap_+3A_messaging">messaging</code></td>
<td>
<p>turn messaging on/off</p>
</td></tr>
<tr><td><code id="get_cloudmademap_+3A_urlonly">urlonly</code></td>
<td>
<p>return url only</p>
</td></tr>
<tr><td><code id="get_cloudmademap_+3A_filename">filename</code></td>
<td>
<p>destination file for download (file extension added according
to format). Default <code>NULL</code> means a random <code><a href="base.html#topic+tempfile">tempfile()</a></code>.</p>
</td></tr>
<tr><td><code id="get_cloudmademap_+3A_color">color</code></td>
<td>
<p>color or black-and-white</p>
</td></tr>
<tr><td><code id="get_cloudmademap_+3A_...">...</code></td>
<td>
<p>...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggmap object (a classed raster object with a bounding box
attribute)
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>See Also</h3>

<p>http://maps.cloudmade.com/ (defunct), <code><a href="#topic+ggmap">ggmap()</a></code>
</p>

<hr>
<h2 id='get_googlemap'>Get a Google Map.</h2><span id='topic+get_googlemap'></span>

<h3>Description</h3>

<p><code><a href="#topic+get_googlemap">get_googlemap()</a></code> queries the Google Maps Static API version 2 to download
a static map.  Note that in most cases by using this function you are
agreeing to the Google Maps API Terms of Service at
<a href="https://cloud.google.com/maps-platform/terms/">https://cloud.google.com/maps-platform/terms/</a>. Note that as of mid-2018,
registering with Google Cloud to obtain an API key is required to use any of
Google's services, including <code><a href="#topic+get_googlemap">get_googlemap()</a></code>. Usage and billing may apply,
see the links under See Also further down in this documentation for more
details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_googlemap(
  center = c(lon = -95.3632715, lat = 29.7632836),
  zoom = 10,
  size = c(640, 640),
  scale = 2,
  format = c("png8", "gif", "jpg", "jpg-baseline", "png32"),
  maptype = GOOGLE_VALID_MAP_TYPES,
  language = "en-EN",
  messaging = FALSE,
  urlonly = FALSE,
  filename = NULL,
  color = c("color", "bw"),
  force = FALSE,
  where = tempdir(),
  archiving = FALSE,
  ext = "com",
  inject = "",
  region,
  markers,
  path,
  visible,
  style,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_googlemap_+3A_center">center</code></td>
<td>
<p>the center of the map; either a longitude/latitude numeric
vector or a string containing a location, in which case <code><a href="#topic+geocode">geocode()</a></code> is
called with <code>source = "google"</code>. (default: <code>c(lon = -95.3632715, lat = 29.7632836)</code>, a reference to Houston, Texas)</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_zoom">zoom</code></td>
<td>
<p>map zoom; an integer from 3 (continent) to 21 (building), default
value 10 (city)</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_size">size</code></td>
<td>
<p>rectangular dimensions of map in pixels - horizontal x vertical -
with a max of c(640, 640). this parameter is affected in a multiplicative
way by scale.</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_scale">scale</code></td>
<td>
<p>multiplicative factor for the number of pixels returned possible
values are 1, 2, or 4 (e.g. size = c(640,640) and scale = 2 returns an
image with 1280x1280 pixels).  4 is reserved for google business users
only.  scale also affects the size of labels as well.</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_format">format</code></td>
<td>
<p>character string providing image format - png, jpeg, and gif
formats available in various flavors</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_maptype">maptype</code></td>
<td>
<p>character string providing google map theme. options available
are <code>"terrain"</code>, <code>"satellite"</code>, <code>"roadmap"</code>, and <code>"hybrid"</code></p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_language">language</code></td>
<td>
<p>character string providing language of map labels (for themes
with them) in the format <code>"en-EN"</code>.  not all languages are supported; for
those which aren't the default language is used</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_messaging">messaging</code></td>
<td>
<p>turn messaging on/off</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_urlonly">urlonly</code></td>
<td>
<p>return url only</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_filename">filename</code></td>
<td>
<p>destination file for download (file extension added according
to format). Default <code>NULL</code> means a random <code><a href="base.html#topic+tempfile">tempfile()</a></code>.</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_color">color</code></td>
<td>
<p>color or black-and-white</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_force">force</code></td>
<td>
<p>if the map is on file, should a new map be looked up?</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_where">where</code></td>
<td>
<p>where should the file drawer be located (without terminating
&quot;/&quot;)</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_archiving">archiving</code></td>
<td>
<p>use archived maps.  note: by changing to TRUE you agree to
the one of the approved uses listed in the Google Maps API Terms of Service
: <a href="https://cloud.google.com/maps-platform/terms/">https://cloud.google.com/maps-platform/terms/</a>.</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_ext">ext</code></td>
<td>
<p>domain extension (e.g. <code>"com"</code>, <code>"co.nz"</code>)</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_inject">inject</code></td>
<td>
<p>character string to add to the url</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_region">region</code></td>
<td>
<p>borders to display as a region code specified as a
two-character ccTLD (&quot;top-level domain&quot;) value, see
<a href="https://en.wikipedia.org/wiki/List_of_Internet_top-level_domains#Country_code_top-level_domains">https://en.wikipedia.org/wiki/List_of_Internet_top-level_domains#Country_code_top-level_domains</a></p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_markers">markers</code></td>
<td>
<p>data.frame with first column longitude, second column
latitude, for which google markers should be embedded in the map image, or
character string to be passed directly to api</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_path">path</code></td>
<td>
<p>data.frame (or list of data.frames) with first column longitude,
second column latitude, for which a single path should be embedded in the
map image, or character string to be passed directly to api</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_visible">visible</code></td>
<td>
<p>a location as a longitude/latitude numeric vector (or data
frame with first column longitude, second latitude) or vector of character
string addresses which should be visible in map extent</p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_style">style</code></td>
<td>
<p>character string to be supplied directly to the api for the
style argument or a named vector (see examples). this is a powerful complex
specification, see
<a href="https://developers.google.com/maps/documentation/maps-static/">https://developers.google.com/maps/documentation/maps-static/</a></p>
</td></tr>
<tr><td><code id="get_googlemap_+3A_...">...</code></td>
<td>
<p>...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggmap object (a classed raster object with a bounding box
attribute)
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>See Also</h3>

<p><a href="https://developers.google.com/maps/documentation/maps-static/overview/">https://developers.google.com/maps/documentation/maps-static/overview/</a>,
<a href="https://developers.google.com/maps/documentation/maps-static/start/">https://developers.google.com/maps/documentation/maps-static/start/</a>,
<a href="https://developers.google.com/maps/documentation/maps-static/get-api-key/">https://developers.google.com/maps/documentation/maps-static/get-api-key/</a>,
<a href="https://developers.google.com/maps/documentation/maps-static/usage-and-billing/">https://developers.google.com/maps/documentation/maps-static/usage-and-billing/</a>,
<code><a href="#topic+ggmap">ggmap()</a></code>, <code><a href="#topic+register_google">register_google()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run:  requires Google API key, see ?register_google

## basic usage
########################################

(map &lt;- get_googlemap(c(-97.14667, 31.5493)))
ggmap(map)

# plotting based on a colloquial name
# this requires a geocode() call, and needs that API
get_googlemap("waco, texas") %&gt;% ggmap()

# different maptypes are available
get_googlemap("waco, texas", maptype = "satellite") %&gt;% ggmap()
get_googlemap("waco, texas", maptype = "hybrid") %&gt;% ggmap()

# you can get the url as follows
# see ?register_google if you want the key printed
get_googlemap(urlonly = TRUE)


## other usage
########################################

# markers and paths are easy to access
d &lt;- function(x=-95.36, y=29.76, n,r,a){
  round(data.frame(
    lon = jitter(rep(x,n), amount = a),
    lat = jitter(rep(y,n), amount = a)
  ), digits = r)
}
(df &lt;- d(n = 50, r = 3, a = .3))
map &lt;- get_googlemap(markers = df, path = df, scale = 2)
ggmap(map)
ggmap(map, extent = "device") +
  geom_point(aes(x = lon, y = lat), data = df, size = 3, colour = "black") +
  geom_path(aes(x = lon, y = lat), data = df)

gc &lt;- geocode("waco, texas", source = "google")
center &lt;- as.numeric(gc)
ggmap(get_googlemap(center = center, color = "bw", scale = 2), extent = "device")

# the scale argument can be seen in the following
# (make your graphics device as large as possible)
ggmap(get_googlemap(center, scale = 1), extent = "panel") # pixelated
ggmap(get_googlemap(center, scale = 2), extent = "panel") # fine

# archiving; note that you must meet google's terms for this condition
map &lt;- get_googlemap(archiving = TRUE)
map &lt;- get_googlemap()
map &lt;- get_googlemap()
ggmap(map)


# style
map &lt;- get_googlemap(
  maptype = "roadmap",
  style = c(feature = "all", element = "labels", visibility = "off"),
  color = "bw"
)
ggmap(map)





## End(Not run)

</code></pre>

<hr>
<h2 id='get_map'>Grab a map.</h2><span id='topic+get_map'></span>

<h3>Description</h3>

<p><code><a href="#topic+get_map">get_map()</a></code> is a smart wrapper that queries the Google Maps,
OpenStreetMap, and Stadia Maps servers for a map.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_map(
  location = c(lon = -95.3632715, lat = 29.7632836),
  zoom = "auto",
  scale = "auto",
  maptype = c(GOOGLE_VALID_MAP_TYPES, STADIA_VALID_MAP_TYPES),
  source = c("google", "osm", "stadia"),
  force = ifelse(source == "google", TRUE, FALSE),
  messaging = FALSE,
  urlonly = FALSE,
  filename = NULL,
  crop = TRUE,
  color = c("color", "bw"),
  language = "en-EN",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_map_+3A_location">location</code></td>
<td>
<p>an address, longitude/latitude pair (in that order), or
left/bottom/right/top bounding box</p>
</td></tr>
<tr><td><code id="get_map_+3A_zoom">zoom</code></td>
<td>
<p>map zoom, an integer from 3 (continent) to 21 (building), default
value 10 (city).  openstreetmaps limits a zoom of 18, and the limit on
Stadia Maps depends on the maptype.  &quot;auto&quot; automatically determines the
zoom for bounding box specifications, and is defaulted to 10 with
center/zoom specifications.  maps of the whole world currently not
supported.</p>
</td></tr>
<tr><td><code id="get_map_+3A_scale">scale</code></td>
<td>
<p>scale argument of <code><a href="#topic+get_googlemap">get_googlemap()</a></code> or <code><a href="#topic+get_openstreetmap">get_openstreetmap()</a></code></p>
</td></tr>
<tr><td><code id="get_map_+3A_maptype">maptype</code></td>
<td>
<p>character string providing map theme. options available are
&quot;terrain&quot;, &quot;terrain-background&quot;, &quot;satellite&quot;, &quot;roadmap&quot;, and &quot;hybrid&quot;
(Google Maps), &quot;stamen_terrain&quot;, &quot;stamen_toner&quot;, &quot;stamen_toner_lite&quot;, &quot;stamen_watercolor&quot;,
&quot;stamen_terrain_background&quot;, &quot;stamen_toner_background&quot;,
&quot;stamen_terrain_lines&quot;, &quot;stamen_terrain_labels&quot;,
&quot;stamen_toner_lines&quot;, &quot;stamen_toner_labels&quot;
(Stadia Maps)</p>
</td></tr>
<tr><td><code id="get_map_+3A_source">source</code></td>
<td>
<p>Google Maps (&quot;google&quot;), OpenStreetMap (&quot;osm&quot;), Stadia Maps
(&quot;stadia&quot;)</p>
</td></tr>
<tr><td><code id="get_map_+3A_force">force</code></td>
<td>
<p>force new map (don't use archived version)</p>
</td></tr>
<tr><td><code id="get_map_+3A_messaging">messaging</code></td>
<td>
<p>turn messaging on/off</p>
</td></tr>
<tr><td><code id="get_map_+3A_urlonly">urlonly</code></td>
<td>
<p>return url only</p>
</td></tr>
<tr><td><code id="get_map_+3A_filename">filename</code></td>
<td>
<p>destination file for download (file extension added according
to format). Default <code>NULL</code> means a random <code><a href="base.html#topic+tempfile">tempfile()</a></code>.</p>
</td></tr>
<tr><td><code id="get_map_+3A_crop">crop</code></td>
<td>
<p>(Stadia and cloudmade maps) crop tiles to bounding box</p>
</td></tr>
<tr><td><code id="get_map_+3A_color">color</code></td>
<td>
<p>color (&quot;color&quot;) or black-and-white (&quot;bw&quot;)</p>
</td></tr>
<tr><td><code id="get_map_+3A_language">language</code></td>
<td>
<p>language for google maps</p>
</td></tr>
<tr><td><code id="get_map_+3A_...">...</code></td>
<td>
<p>...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggmap object (a classed raster object with a bounding box
attribute)
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ggmap">ggmap()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run:  some requires Google API key, see ?register_google

## basic usage
########################################

# lon-lat vectors automatically use google:
(map &lt;- get_map(c(-97.14667, 31.5493)))
str(map)
ggmap(map)

# bounding boxes default to Stadia Maps
(map &lt;- get_map(c(left = -97.1268, bottom = 31.536245, right = -97.099334, top = 31.559652)))
ggmap(map)

# characters default to google
(map &lt;- get_map("orlando, florida"))
ggmap(map)


## basic usage
########################################

(map &lt;- get_map(maptype = "roadmap"))
(map &lt;- get_map(source = "osm"))
(map &lt;- get_map(source = "stadia", maptype = "stamen_watercolor"))

map &lt;- get_map(location = "texas", zoom = 6, source = "stadia")
ggmap(map, fullpage = TRUE)


## End(Not run)
</code></pre>

<hr>
<h2 id='get_navermap'>Get a Naver Map</h2><span id='topic+get_navermap'></span>

<h3>Description</h3>

<p>This is (at least) temporarily unavailable as the Naver API changed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_navermap(
  center = c(lon = 126.9849208, lat = 37.5664519),
  zoom = 4,
  size = c(640, 640),
  format = c("png", "jpeg", "jpg"),
  crs = c("EPSG:4326", "NHN:2048", "NHN:128", "EPSG:4258", "EPSG:4162", "EPSG:2096",
    "EPSG:2097", "EPSG:2098", "EPSG:900913"),
  baselayer = c("default", "satellite"),
  color = c("color", "bw"),
  overlayers = c("anno_satellite", "bicycle", "roadview", "traffic"),
  markers,
  key,
  uri,
  filename = NULL,
  messaging = FALSE,
  urlonly = FALSE,
  force = FALSE,
  where = tempdir(),
  archiving = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_navermap_+3A_center">center</code></td>
<td>
<p>the center of the map.  this can be longitude/latitude numeric
vector.</p>
</td></tr>
<tr><td><code id="get_navermap_+3A_zoom">zoom</code></td>
<td>
<p>map zoom, an integer from 1 to 14 (building), default value 10</p>
</td></tr>
<tr><td><code id="get_navermap_+3A_size">size</code></td>
<td>
<p>rectangular dimensions of map in pixels - horizontal x vertical -
with a max of c(640, 640).</p>
</td></tr>
<tr><td><code id="get_navermap_+3A_format">format</code></td>
<td>
<p>character string providing image format - png, jpeg(jpg)
formats available in various flavors</p>
</td></tr>
<tr><td><code id="get_navermap_+3A_crs">crs</code></td>
<td>
<p>Coordinate system, this currently supports EPSG:4326</p>
</td></tr>
<tr><td><code id="get_navermap_+3A_baselayer">baselayer</code></td>
<td>
<p>base layer, this can be either &quot;default&quot;, &quot;satellite&quot;.</p>
</td></tr>
<tr><td><code id="get_navermap_+3A_color">color</code></td>
<td>
<p>color or black-and-white</p>
</td></tr>
<tr><td><code id="get_navermap_+3A_overlayers">overlayers</code></td>
<td>
<p>overlay layers, this can be &quot;anno_satellite&quot;,&quot;bicycle&quot;,
&quot;roadview&quot;, &quot;traffic&quot;.</p>
</td></tr>
<tr><td><code id="get_navermap_+3A_markers">markers</code></td>
<td>
<p>data.frame with first column longitude, second column
latitude, for which naver markers should be embedded in the map image, or
character string to be passed directly to api</p>
</td></tr>
<tr><td><code id="get_navermap_+3A_key">key</code></td>
<td>
<p>key code from naver api center</p>
</td></tr>
<tr><td><code id="get_navermap_+3A_uri">uri</code></td>
<td>
<p>registered host url</p>
</td></tr>
<tr><td><code id="get_navermap_+3A_filename">filename</code></td>
<td>
<p>destination file for download (file extension added according
to format). Default <code>NULL</code> means a random <code><a href="base.html#topic+tempfile">tempfile()</a></code>.</p>
</td></tr>
<tr><td><code id="get_navermap_+3A_messaging">messaging</code></td>
<td>
<p>turn messaging on/off</p>
</td></tr>
<tr><td><code id="get_navermap_+3A_urlonly">urlonly</code></td>
<td>
<p>return url only</p>
</td></tr>
<tr><td><code id="get_navermap_+3A_force">force</code></td>
<td>
<p>if the map is on file, should a new map be looked up?</p>
</td></tr>
<tr><td><code id="get_navermap_+3A_where">where</code></td>
<td>
<p>where should the file drawer be located (without terminating
&quot;/&quot;)</p>
</td></tr>
<tr><td><code id="get_navermap_+3A_archiving">archiving</code></td>
<td>
<p>use archived maps.  note: by changing to TRUE you agree to
abide by any of the rules governing caching naver maps</p>
</td></tr>
<tr><td><code id="get_navermap_+3A_...">...</code></td>
<td>
<p>...</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code><a href="#topic+get_navermap">get_navermap()</a></code> accesses the Naver Static Maps API version 1.1 to
download a static map. Note that in most cases by using this function you are
agreeing to the Naver Maps API Terms of Service.
</p>


<h3>Author(s)</h3>

<p>Heewon Jeon <a href="mailto:madjakarta@gmail.com">madjakarta@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ggmap">ggmap()</a></code>
</p>

<hr>
<h2 id='get_openstreetmap'>Get an OpenStreetMap</h2><span id='topic+get_openstreetmap'></span>

<h3>Description</h3>

<p><code><a href="#topic+get_openstreetmap">get_openstreetmap()</a></code> accesses a tile server for OpenStreetMap and
downloads/formats a map image. This is simply a wrapper for the web-based
version at <a href="https://www.openstreetmap.org/">https://www.openstreetmap.org/</a>.  If you don't know how to get
the map you want, go there, navigate to the map extent that you want, click
the export tab at the top of the page, and copy the information into this
function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_openstreetmap(
  bbox = c(left = -95.80204, bottom = 29.38048, right = -94.92313, top = 30.14344),
  scale = 606250,
  format = c("png", "jpeg", "svg", "pdf", "ps"),
  messaging = FALSE,
  urlonly = FALSE,
  filename = NULL,
  color = c("color", "bw"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_openstreetmap_+3A_bbox">bbox</code></td>
<td>
<p>a bounding box in the format c(lowerleftlon, lowerleftlat,
upperrightlon, upperrightlat)</p>
</td></tr>
<tr><td><code id="get_openstreetmap_+3A_scale">scale</code></td>
<td>
<p>scale parameter, see
<a href="https://wiki.openstreetmap.org/wiki/MinScaleDenominator">https://wiki.openstreetmap.org/wiki/MinScaleDenominator</a>.  smaller
scales provide a finer degree of detail, where larger scales produce more
coarse detail. The scale argument is a tricky number to correctly specify.
In most cases, if you get an error when downloading an openstreetmap the
error is attributable to an improper scale specification.
<code><a href="#topic+OSM_scale_lookup">OSM_scale_lookup()</a></code> can help; but the best way to get in the correct range
is to go to <a href="https://www.openstreetmap.org/">https://www.openstreetmap.org/</a>, navigate to the map of
interest, click export at the top of the page, click 'map image' and then
copy down the scale listed.</p>
</td></tr>
<tr><td><code id="get_openstreetmap_+3A_format">format</code></td>
<td>
<p>character string providing image format - png, jpeg, svg, pdf,
and ps formats</p>
</td></tr>
<tr><td><code id="get_openstreetmap_+3A_messaging">messaging</code></td>
<td>
<p>turn messaging on/off</p>
</td></tr>
<tr><td><code id="get_openstreetmap_+3A_urlonly">urlonly</code></td>
<td>
<p>return url only</p>
</td></tr>
<tr><td><code id="get_openstreetmap_+3A_filename">filename</code></td>
<td>
<p>destination file for download (file extension added according
to format). Default <code>NULL</code> means a random <code><a href="base.html#topic+tempfile">tempfile()</a></code>.</p>
</td></tr>
<tr><td><code id="get_openstreetmap_+3A_color">color</code></td>
<td>
<p>color or black-and-white</p>
</td></tr>
<tr><td><code id="get_openstreetmap_+3A_...">...</code></td>
<td>
<p>...</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In some cases the OSM server is unavailable,  in these cases you will receive
an error message from <code><a href="utils.html#topic+download.file">utils::download.file()</a></code> with the message HTTP status
'503 Service Unavailable'.  You can confirm this by setting <code>urlonly = TRUE</code>,
and then entering the URL in a web browser.  the solution is either (1)
change sources or (2) wait for the OSM servers to come back up.
</p>
<p>See <a href="https://www.openstreetmap.org/copyright/">https://www.openstreetmap.org/copyright/</a> for license and copyright
information.
</p>


<h3>Value</h3>

<p>a ggmap object (a classed raster object with a bounding box
attribute)
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>See Also</h3>

<p><a href="https://www.openstreetmap.org/">https://www.openstreetmap.org/</a>, <code><a href="#topic+ggmap">ggmap()</a></code>
</p>

<hr>
<h2 id='get_stadiamap'>Get a Map from Stadia Maps</h2><span id='topic+get_stadiamap'></span>

<h3>Description</h3>

<p><code><a href="#topic+get_stadiamap">get_stadiamap()</a></code> accesses a tile server for Stadia Maps and
downloads/stitches map tiles/formats a map image.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_stadiamap(
  bbox = c(left = -95.80204, bottom = 29.38048, right = -94.92313, top = 30.14344),
  zoom = 10,
  maptype = STADIA_VALID_MAP_TYPES,
  crop = TRUE,
  messaging = FALSE,
  urlonly = FALSE,
  color = c("color", "bw"),
  force = FALSE,
  where = tempdir(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_stadiamap_+3A_bbox">bbox</code></td>
<td>
<p>a bounding box in the format c(lowerleftlon, lowerleftlat,
upperrightlon, upperrightlat).</p>
</td></tr>
<tr><td><code id="get_stadiamap_+3A_zoom">zoom</code></td>
<td>
<p>a zoom level</p>
</td></tr>
<tr><td><code id="get_stadiamap_+3A_maptype">maptype</code></td>
<td>
<p>stamen_terrain, stamen_toner, stamen_toner_lite, stamen_watercolor,
stamen_terrain_background, stamen_toner_background,
stamen_terrain_lines, stamen_terrain_labels,
stamen_toner_lines, stamen_toner_labels.</p>
</td></tr>
<tr><td><code id="get_stadiamap_+3A_crop">crop</code></td>
<td>
<p>crop raw map tiles to specified bounding box. if FALSE, the
resulting map will more than cover the bounding box specified.</p>
</td></tr>
<tr><td><code id="get_stadiamap_+3A_messaging">messaging</code></td>
<td>
<p>turn messaging on/off</p>
</td></tr>
<tr><td><code id="get_stadiamap_+3A_urlonly">urlonly</code></td>
<td>
<p>return url only</p>
</td></tr>
<tr><td><code id="get_stadiamap_+3A_color">color</code></td>
<td>
<p>color or black-and-white (use force = TRUE if you've already
downloaded the images)</p>
</td></tr>
<tr><td><code id="get_stadiamap_+3A_force">force</code></td>
<td>
<p>if the map is on file, should a new map be looked up?</p>
</td></tr>
<tr><td><code id="get_stadiamap_+3A_where">where</code></td>
<td>
<p>where should the file drawer be located (without terminating
&quot;/&quot;)</p>
</td></tr>
<tr><td><code id="get_stadiamap_+3A_...">...</code></td>
<td>
<p>...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggmap object (a classed raster object with a bounding box
attribute)
</p>


<h3>See Also</h3>

<p><a href="https://docs.stadiamaps.com/themes/">https://docs.stadiamaps.com/themes/</a>, <code><a href="#topic+ggmap">ggmap()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run:  requires a Stadia Maps API key. see ?register_stadiamaps


## basic usage
########################################

bbox &lt;- c(left = -97.1268, bottom = 31.536245, right = -97.099334, top = 31.559652)

ggmap(get_stadiamap(bbox, zoom = 13))
ggmap(get_stadiamap(bbox, zoom = 14))
ggmap(get_stadiamap(bbox, zoom = 15))
ggmap(get_stadiamap(bbox, zoom = 17, messaging = TRUE))

place &lt;- "mount everest"
(google &lt;- get_googlemap(place, zoom = 9))
ggmap(google)
bbox_everest &lt;- c(left = 86.05, bottom = 27.21, right = 87.81, top = 28.76)
ggmap(get_stadiamap(bbox_everest, zoom = 9))



## map types
########################################

place &lt;- "rio de janeiro"
google &lt;- get_googlemap(place, zoom = 10)
ggmap(google)

bbox &lt;- bb2bbox(attr(google, "bb"))

get_stadiamap(bbox, maptype = "stamen_terrain")            %&gt;% ggmap()
get_stadiamap(bbox, maptype = "stamen_terrain_background") %&gt;% ggmap()
get_stadiamap(bbox, maptype = "stamen_terrain_labels")     %&gt;% ggmap()
get_stadiamap(bbox, maptype = "stamen_terrain_lines")      %&gt;% ggmap()
get_stadiamap(bbox, maptype = "stamen_toner")              %&gt;% ggmap()
get_stadiamap(bbox, maptype = "stamen_toner_background")   %&gt;% ggmap()
get_stadiamap(bbox, maptype = "stamen_toner_labels")       %&gt;% ggmap()
get_stadiamap(bbox, maptype = "stamen_toner_lines")        %&gt;% ggmap()
get_stadiamap(bbox, maptype = "stamen_toner_lite")         %&gt;% ggmap()
get_stadiamap(bbox, maptype = "stamen_watercolor")         %&gt;% ggmap()


## zoom levels
########################################

get_stadiamap(bbox, maptype = "stamen_watercolor", zoom = 11) %&gt;% ggmap(extent = "device")
get_stadiamap(bbox, maptype = "stamen_watercolor", zoom = 12) %&gt;% ggmap(extent = "device")
get_stadiamap(bbox, maptype = "stamen_watercolor", zoom = 13) %&gt;% ggmap(extent = "device")
# get_stadiamap(bbox, maptype = "stamen_watercolor", zoom = 14) %&gt;% ggmap(extent = "device")
# get_stadiamap(bbox, maptype = "stamen_watercolor", zoom = 15) %&gt;% ggmap(extent = "device")
# get_stadiamap(bbox, maptype = "stamen_watercolor", zoom = 16) %&gt;% ggmap(extent = "device")
# get_stadiamap(bbox, maptype = "stamen_watercolor", zoom = 17) %&gt;% ggmap(extent = "device")
# get_stadiamap(bbox, maptype = "stamen_watercolor", zoom = 18) %&gt;% ggmap(extent = "device")

## more examples
########################################

gc &lt;- geocode("rio de janeiro")

get_stadiamap(bbox, zoom = 10) %&gt;% ggmap() +
 geom_point(aes(x = lon, y = lat), data = gc, colour = "red", size = 2)

get_stadiamap(bbox, zoom = 10, crop = FALSE) %&gt;% ggmap() +
  geom_point(aes(x = lon, y = lat), data = gc, colour = "red", size = 2)

get_stadiamap(bbox, zoom = 10, maptype = "stamen_watercolor") %&gt;% ggmap() +
  geom_point(aes(x = lon, y = lat), data = gc, colour = "red", size = 2)

get_stadiamap(bbox, zoom = 10, maptype = "stamen_toner") %&gt;% ggmap() +
  geom_point(aes(x = lon, y = lat), data = gc, colour = "red", size = 2)


# continental united states labels
c("left" = -125, "bottom" = 25.75, "right" = -67, "top" = 49) %&gt;%
  get_stadiamap(zoom = 5, maptype = "stamen_toner_labels") %&gt;%
  ggmap()




# accuracy check - white house
gc &lt;- geocode("the white house")

qmap("the white house", zoom = 16)  +
  geom_point(aes(x = lon, y = lat), data = gc, colour = "red", size = 3)

qmap("the white house", zoom = 16, source = "stadia", maptype = "stamen_terrain")  +
  geom_point(aes(x = lon, y = lat), data = gc, colour = "red", size = 3)



## known issues
########################################

# Stamen's original tilesets were raster renders built up over time, but have not been
# actively rendered for several years. As a consequence, some tiles simply do not exist,
# particularly at high zoom levels.
#
# The newer styles have been redesigned and are now generated live by Stadia Maps, so
# these are complete, but at the time of this writing, the Watercolor style is still incomplete.

## End(Not run)
</code></pre>

<hr>
<h2 id='get_stamenmap'>Get a Stamen Map</h2><span id='topic+get_stamenmap'></span><span id='topic+get_stamen_tile_download_fail_log'></span><span id='topic+retry_stamen_map_download'></span>

<h3>Description</h3>

<p><code><a href="#topic+get_stamenmap">get_stamenmap()</a></code> accesses a tile server for Stamen Maps and
downloads/stitches map tiles/formats a map image. Note that Stamen maps don't
cover the entire world.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_stamenmap(
  bbox = c(left = -95.80204, bottom = 29.38048, right = -94.92313, top = 30.14344),
  zoom = 10,
  maptype = c("terrain", "terrain-background", "terrain-labels", "terrain-lines",
    "toner", "toner-2010", "toner-2011", "toner-background", "toner-hybrid",
    "toner-labels", "toner-lines", "toner-lite", "watercolor"),
  crop = TRUE,
  messaging = FALSE,
  urlonly = FALSE,
  color = c("color", "bw"),
  force = FALSE,
  where = tempdir(),
  https = FALSE,
  ...
)

get_stamen_tile_download_fail_log()

retry_stamen_map_download()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_stamenmap_+3A_bbox">bbox</code></td>
<td>
<p>a bounding box in the format c(lowerleftlon, lowerleftlat,
upperrightlon, upperrightlat).</p>
</td></tr>
<tr><td><code id="get_stamenmap_+3A_zoom">zoom</code></td>
<td>
<p>a zoom level</p>
</td></tr>
<tr><td><code id="get_stamenmap_+3A_maptype">maptype</code></td>
<td>
<p>terrain, terrain-background, terrain-labels, terrain-lines,
toner, toner-2010, toner-2011, toner-background, toner-hybrid,
toner-labels, toner-lines, toner-lite, or watercolor.</p>
</td></tr>
<tr><td><code id="get_stamenmap_+3A_crop">crop</code></td>
<td>
<p>crop raw map tiles to specified bounding box. if FALSE, the
resulting map will more than cover the bounding box specified.</p>
</td></tr>
<tr><td><code id="get_stamenmap_+3A_messaging">messaging</code></td>
<td>
<p>turn messaging on/off</p>
</td></tr>
<tr><td><code id="get_stamenmap_+3A_urlonly">urlonly</code></td>
<td>
<p>return url only</p>
</td></tr>
<tr><td><code id="get_stamenmap_+3A_color">color</code></td>
<td>
<p>color or black-and-white (use force = TRUE if you've already
downloaded the images)</p>
</td></tr>
<tr><td><code id="get_stamenmap_+3A_force">force</code></td>
<td>
<p>if the map is on file, should a new map be looked up?</p>
</td></tr>
<tr><td><code id="get_stamenmap_+3A_where">where</code></td>
<td>
<p>where should the file drawer be located (without terminating
&quot;/&quot;)</p>
</td></tr>
<tr><td><code id="get_stamenmap_+3A_https">https</code></td>
<td>
<p>if TRUE, queries an https endpoint so that web traffic between
you and the tile server is ecrypted using SSL.</p>
</td></tr>
<tr><td><code id="get_stamenmap_+3A_...">...</code></td>
<td>
<p>...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggmap object (a classed raster object with a bounding box
attribute)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ggmap">ggmap()</a></code>
</p>

<hr>
<h2 id='ggimage'>Plot an image using ggplot2</h2><span id='topic+ggimage'></span>

<h3>Description</h3>

<p>ggimage is the near ggplot2 equivalent of image.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggimage(mat, fullpage = TRUE, coord_equal = TRUE, scale_axes = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ggimage_+3A_mat">mat</code></td>
<td>
<p>a matrix, imagematrix, array, or raster (something
that can be coerced by as.raster)</p>
</td></tr>
<tr><td><code id="ggimage_+3A_fullpage">fullpage</code></td>
<td>
<p>should the image take up the entire viewport?</p>
</td></tr>
<tr><td><code id="ggimage_+3A_coord_equal">coord_equal</code></td>
<td>
<p>should the axes units be equal?</p>
</td></tr>
<tr><td><code id="ggimage_+3A_scale_axes">scale_axes</code></td>
<td>
<p>should the axes be
(0,ncol(mat)-1)x(0,nrow(mat)-1) (F) or (0,1)x(0,1) (T)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
img &lt;- matrix(1:16, 4, 4)
image(img)
ggimage(t(img[,4:1]), fullpage = FALSE, scale_axes = TRUE)
ggimage(t(img[,4:1]), fullpage = FALSE)


## Not run: 
# not run due to slow performance

data(hadley)
ggimage(hadley)
ggimage(hadley, coord_equal = FALSE)

x &lt;- seq(1, 438, 15); n &lt;- length(x)
df &lt;- data.frame(x = x, y = -(120*(scale((x - 219)^3 - 25000*x) + rnorm(n)/2 - 3)))
qplot(x, y, data = df, geom = c('smooth','point'))
ggimage(hadley, fullpage = FALSE) +
  geom_smooth(
    aes(x = x, y = y),
    data = df, color = 'green', size = 1
  ) +
  geom_point(
    aes(x = x, y = y),
    data = df, color = 'green', size = 3
  )


## End(Not run)
</code></pre>

<hr>
<h2 id='gglocator'>Locator for ggplot objects</h2><span id='topic+gglocator'></span>

<h3>Description</h3>

<p>Locator for ggplot objects (Note : only accurate when extent = &quot;normal&quot; when
using ggmap.)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gglocator(n = 1, message = FALSE, mercator = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gglocator_+3A_n">n</code></td>
<td>
<p>number of points to locate.</p>
</td></tr>
<tr><td><code id="gglocator_+3A_message">message</code></td>
<td>
<p>unused</p>
</td></tr>
<tr><td><code id="gglocator_+3A_mercator">mercator</code></td>
<td>
<p>logical flag; should the plot be treated as using the
projection common to most web map services? Set to FALSE if the axes on the
plot use a linear scale.</p>
</td></tr>
<tr><td><code id="gglocator_+3A_...">...</code></td>
<td>
<p>additional arguments (including deprecated, e.g. xexpand)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with columns according to the x and y aesthetics
</p>


<h3>Author(s)</h3>

<p>Tyler Rinker, Baptiste Auguie, DWin, David Kahle, \@Nikolai-Hlubek
and \@mvkorpel.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (interactive()) {

# only run for interactive sessions
df &lt;- expand.grid(x = 0:-5, y = 0:-5)

ggplot(df, aes(x, y)) + geom_point() +
  annotate(geom = "point", x = -2, y = -2, colour = "red")

(pt &lt;- gglocator(mercator = FALSE)) # click red point

last_plot() +
  annotate("point", pt$x, pt$y, color = "blue", size = 3, alpha = .5)

hdf &lt;- get_map("houston, texas")
ggmap(hdf, extent = "normal")
(pt &lt;- gglocator(mercator = TRUE))
last_plot() +
  annotate("point", pt$lon, pt$lat, color = "blue", size = 3, alpha = .5)

}


</code></pre>

<hr>
<h2 id='ggmap'>Plot a ggmap object</h2><span id='topic+ggmap'></span><span id='topic+package-ggmap'></span>

<h3>Description</h3>

<p>ggmap plots the raster object produced by <code><a href="#topic+get_map">get_map()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggmap(
  ggmap,
  extent = "panel",
  base_layer,
  maprange = FALSE,
  legend = "right",
  padding = 0.02,
  darken = c(0, "black"),
  b,
  fullpage,
  expand,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ggmap_+3A_ggmap">ggmap</code></td>
<td>
<p>an object of class ggmap (from function get_map)</p>
</td></tr>
<tr><td><code id="ggmap_+3A_extent">extent</code></td>
<td>
<p>how much of the plot should the map take up? &quot;normal&quot;,
&quot;device&quot;, or &quot;panel&quot; (default)</p>
</td></tr>
<tr><td><code id="ggmap_+3A_base_layer">base_layer</code></td>
<td>
<p>a ggplot(aes(...), ...) call; see examples</p>
</td></tr>
<tr><td><code id="ggmap_+3A_maprange">maprange</code></td>
<td>
<p>logical for use with base_layer; should the map define the x
and y limits?</p>
</td></tr>
<tr><td><code id="ggmap_+3A_legend">legend</code></td>
<td>
<p>&quot;left&quot;, &quot;right&quot; (default), &quot;bottom&quot;, &quot;top&quot;, &quot;bottomleft&quot;,
&quot;bottomright&quot;, &quot;topleft&quot;, &quot;topright&quot;, &quot;none&quot; (used with extent = &quot;device&quot;)</p>
</td></tr>
<tr><td><code id="ggmap_+3A_padding">padding</code></td>
<td>
<p>distance from legend to corner of the plot (used with legend,
formerly b)</p>
</td></tr>
<tr><td><code id="ggmap_+3A_darken">darken</code></td>
<td>
<p>vector of the form c(number, color), where number is in (0,1)
and color is a character string indicating the color of the darken.  0
indicates no darkening, 1 indicates a black-out.</p>
</td></tr>
<tr><td><code id="ggmap_+3A_b">b</code></td>
<td>
<p>Deprecated, renamed to <code>padding</code>. Overrides any <code>padding</code> argument.</p>
</td></tr>
<tr><td><code id="ggmap_+3A_fullpage">fullpage</code></td>
<td>
<p>Deprecated, equivalent to <code>extent = "device"</code> when <code>TRUE</code>.
Overrides any <code>extent</code> argument.</p>
</td></tr>
<tr><td><code id="ggmap_+3A_expand">expand</code></td>
<td>
<p>Deprecated, equivalent to <code>extent = "panel"</code> when <code>TRUE</code> and
<code>fullpage</code> is <code>FALSE</code>. When <code>fullpage</code> is <code>FALSE</code> and <code>expand</code> is <code>FALSE</code>,
equivalent to <code>extent="normal"</code>. Overrides any <code>extent</code> argument.</p>
</td></tr>
<tr><td><code id="ggmap_+3A_...">...</code></td>
<td>
<p>...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_map">get_map()</a></code>, <code><a href="#topic+qmap">qmap()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: ## map queries drag R CMD check


## extents and legends
##################################################
hdf &lt;- get_map("houston, texas")
ggmap(hdf, extent = "normal")
ggmap(hdf) # extent = "panel", note qmap defaults to extent = "device"
ggmap(hdf, extent = "device")



# make some fake spatial data
mu &lt;- c(-95.3632715, 29.7632836); nDataSets &lt;- sample(4:10,1)
chkpts &lt;- NULL
for(k in 1:nDataSets){
  a &lt;- rnorm(2); b &lt;- rnorm(2);
  si &lt;- 1/3000 * (outer(a,a) + outer(b,b))
  chkpts &lt;- rbind(
    chkpts,
    cbind(MASS::mvrnorm(rpois(1,50), jitter(mu, .01), si), k)
  )
}
chkpts &lt;- data.frame(chkpts)
names(chkpts) &lt;- c("lon", "lat","class")
chkpts$class &lt;- factor(chkpts$class)
qplot(lon, lat, data = chkpts, colour = class)

# show it on the map
ggmap(hdf, extent = "normal") +
  geom_point(aes(x = lon, y = lat, colour = class), data = chkpts, alpha = .5)

ggmap(hdf) +
  geom_point(aes(x = lon, y = lat, colour = class), data = chkpts, alpha = .5)

ggmap(hdf, extent = "device") +
  geom_point(aes(x = lon, y = lat, colour = class), data = chkpts, alpha = .5)

theme_set(theme_bw())
ggmap(hdf, extent = "device") +
  geom_point(aes(x = lon, y = lat, colour = class), data = chkpts, alpha = .5)

ggmap(hdf, extent = "device", legend = "topleft") +
  geom_point(aes(x = lon, y = lat, colour = class), data = chkpts, alpha = .5)

# qmplot is great for this kind of thing...
qmplot(lon, lat, data = chkpts, color = class, darken = .6)
qmplot(lon, lat, data = chkpts, geom = "density2d", color = class, darken = .6)

## maprange
##################################################

hdf &lt;- get_map()
mu &lt;- c(-95.3632715, 29.7632836)
points &lt;- data.frame(MASS::mvrnorm(1000, mu = mu, diag(c(.1, .1))))
names(points) &lt;- c("lon", "lat")
points$class &lt;- sample(c("a","b"), 1000, replace = TRUE)

ggmap(hdf) + geom_point(data = points) # maprange built into extent = panel, device
ggmap(hdf) + geom_point(aes(colour = class), data = points)

ggmap(hdf, extent = "normal") + geom_point(data = points)
# note that the following is not the same as extent = panel
ggmap(hdf, extent = "normal", maprange = TRUE) + geom_point(data = points)

# and if you need your data to run off on a extent = device (legend included)
ggmap(hdf, extent = "normal", maprange = TRUE) +
  geom_point(aes(colour = class), data = points) +
  theme_nothing(legend = TRUE) + theme(legend.position = "right")

# again, qmplot is probably more useful
qmplot(lon, lat, data = points, color = class, darken = .4, alpha = I(.6))
qmplot(lon, lat, data = points, color = class, maptype = "stamen_toner_lite")

## cool examples
##################################################

# contour overlay
ggmap(get_map(maptype = "satellite"), extent = "device") +
  stat_density2d(aes(x = lon, y = lat, colour = class), data = chkpts, bins = 5)


# adding additional content
library(grid)
baylor &lt;- get_map("one bear place, waco, texas", zoom = 15, maptype = "satellite")
ggmap(baylor)

# use gglocator to find lon/lat"s of interest
(clicks &lt;- gglocator(2) )
ggmap(baylor) +
  geom_point(aes(x = lon, y = lat), data = clicks, colour = "red", alpha = .5)
expand.grid(lon = clicks$lon, lat = clicks$lat)

ggmap(baylor) + theme_bw() +
  annotate("segment", x=-97.110, xend=-97.1188, y=31.5450, yend=31.5485,
    colour=I("red"), arrow = arrow(length=unit(0.3,"cm")), size = 1.5) +
  annotate("label", x=-97.113, y=31.5445, label = "Department of Statistical Science",
    colour = I("red"), size = 3.5) +
  labs(x = "Longitude", y = "Latitude") + ggtitle("Baylor University")


baylor &lt;- get_map("marrs mclean science, waco, texas", zoom = 16, maptype = "satellite")

ggmap(baylor, extent = "panel") +
  annotate("segment", x=-97.1175, xend=-97.1188, y=31.5449, yend=31.5485,
    colour=I("red"), arrow = arrow(length=unit(0.4,"cm")), size = 1.5) +
  annotate("label", x=-97.1175, y=31.5447, label = "Department of Statistical Science",
    colour = I("red"), size = 4)



# a shapefile like layer
data(zips)
ggmap(get_map(maptype = "satellite", zoom = 8), extent = "device") +
  geom_polygon(aes(x = lon, y = lat, group = plotOrder),
    data = zips, colour = NA, fill = "red", alpha = .2) +
  geom_path(aes(x = lon, y = lat, group = plotOrder),
    data = zips, colour = "white", alpha = .4, size = .4)

library(plyr)
zipsLabels &lt;- ddply(zips, .(zip), function(df){
  df[1,c("area", "perimeter", "zip", "lonCent", "latCent")]
})
ggmap(get_map(maptype = "satellite", zoom = 9),
    extent = "device", legend = "none", darken = .5) +
  geom_text(aes(x = lonCent, y = latCent, label = zip, size = area),
    data = zipsLabels, colour = I("red")) +
  scale_size(range = c(1.5,6))

qmplot(lonCent, latCent, data = zipsLabels, geom = "text",
  label = zip, size = area, maptype = "stamen_toner_lite", color = I("red")
)


## crime data example
##################################################

# only violent crimes
violent_crimes &lt;- subset(crime,
  offense != "auto theft" &amp;
  offense != "theft" &amp;
  offense != "burglary"
)

# rank violent crimes
violent_crimes$offense &lt;-
  factor(violent_crimes$offense,
    levels = c("robbery", "aggravated assault",
      "rape", "murder")
  )

# restrict to downtown
violent_crimes &lt;- subset(violent_crimes,
  -95.39681 &lt;= lon &amp; lon &lt;= -95.34188 &amp;
   29.73631 &lt;= lat &amp; lat &lt;=  29.78400
)


# get map and bounding box
theme_set(theme_bw(16))
HoustonMap &lt;- qmap("houston", zoom = 14, color = "bw",
  extent = "device", legend = "topleft")
HoustonMap &lt;- ggmap(
  get_map("houston", zoom = 14, color = "bw"),
  extent = "device", legend = "topleft"
)

# the bubble chart
HoustonMap +
   geom_point(aes(x = lon, y = lat, colour = offense, size = offense), data = violent_crimes) +
   scale_colour_discrete("Offense", labels = c("Robbery","Aggravated Assault","Rape","Murder")) +
   scale_size_discrete("Offense", labels = c("Robbery","Aggravated Assault","Rape","Murder"),
     range = c(1.75,6)) +
   guides(size = guide_legend(override.aes = list(size = 6))) +
   theme(
     legend.key.size = grid::unit(1.8,"lines"),
     legend.title = element_text(size = 16, face = "bold"),
     legend.text = element_text(size = 14)
   ) +
   labs(colour = "Offense", size = "Offense")


# doing it with qmplot is even easier
qmplot(lon, lat, data = violent_crimes, maptype = "stamen_toner_lite",
  color = offense, size = offense, legend = "topleft"
)

# or, with styling:
qmplot(lon, lat, data = violent_crimes, maptype = "stamen_toner_lite",
  color = offense, size = offense, legend = "topleft"
) +
  scale_colour_discrete("Offense", labels = c("Robbery","Aggravated Assault","Rape","Murder")) +
  scale_size_discrete("Offense", labels = c("Robbery","Aggravated Assault","Rape","Murder"),
    range = c(1.75,6)) +
  guides(size = guide_legend(override.aes = list(size = 6))) +
  theme(
    legend.key.size = grid::unit(1.8,"lines"),
    legend.title = element_text(size = 16, face = "bold"),
    legend.text = element_text(size = 14)
  ) +
  labs(colour = "Offense", size = "Offense")






# a contour plot
HoustonMap +
  stat_density2d(aes(x = lon, y = lat, colour = offense),
    size = 3, bins = 2, alpha = 3/4, data = violent_crimes) +
   scale_colour_discrete("Offense", labels = c("Robbery","Aggravated Assault","Rape","Murder")) +
   theme(
     legend.text = element_text(size = 15, vjust = .5),
     legend.title = element_text(size = 15,face="bold"),
     legend.key.size = grid::unit(1.8,"lines")
   )



# 2d histogram...
HoustonMap +
  stat_bin_2d(aes(x = lon, y = lat, colour = offense, fill = offense),
    size = .5, bins = 30, alpha = 2/4, data = violent_crimes) +
   scale_colour_discrete("Offense",
     labels = c("Robbery","Aggravated Assault","Rape","Murder"),
     guide = FALSE) +
   scale_fill_discrete("Offense", labels = c("Robbery","Aggravated Assault","Rape","Murder")) +
   theme(
     legend.text = element_text(size = 15, vjust = .5),
     legend.title = element_text(size = 15,face="bold"),
     legend.key.size = grid::unit(1.8,"lines")
   )





# changing gears (get a color map)
houston &lt;- get_map("houston", zoom = 14)
HoustonMap &lt;- ggmap(houston, extent = "device", legend = "topleft")

# a filled contour plot...
HoustonMap +
  stat_density2d(aes(x = lon, y = lat, fill = ..level.., alpha = ..level..),
    size = 2, bins = 4, data = violent_crimes, geom = "polygon") +
  scale_fill_gradient("Violent\nCrime\nDensity") +
  scale_alpha(range = c(.4, .75), guide = FALSE) +
  guides(fill = guide_colorbar(barwidth = 1.5, barheight = 10))

# ... with an insert

overlay &lt;- stat_density2d(aes(x = lon, y = lat, fill = ..level.., alpha = ..level..),
    bins = 4, geom = "polygon", data = violent_crimes)

attr(houston,"bb") # to help finding (x/y)(min/max) vals below

HoustonMap +
  stat_density2d(aes(x = lon, y = lat, fill = ..level.., alpha = ..level..),
    bins = 4, geom = "polygon", data = violent_crimes) +
  scale_fill_gradient("Violent\nCrime\nDensity") +
  scale_alpha(range = c(.4, .75), guide = FALSE) +
  guides(fill = guide_colorbar(barwidth = 1.5, barheight = 10)) +
  inset(
    grob = ggplotGrob(ggplot() + overlay +
      scale_fill_gradient("Violent\nCrime\nDensity") +
      scale_alpha(range = c(.4, .75), guide = FALSE) +
      theme_inset()
    ),
    xmin = -95.35877, xmax = -95.34229,
    ymin = 29.73754, ymax = 29.75185
  )









## more examples
##################################################

# you can layer anything on top of the maps (even meaningless stuff)
df &lt;- data.frame(
  lon = rep(seq(-95.39, -95.35, length.out = 8), each = 20),
  lat = sapply(
    rep(seq(29.74, 29.78, length.out = 8), each = 20),
    function(x) rnorm(1, x, .002)
  ),
  class = rep(letters[1:8], each = 20)
)

qplot(lon, lat, data = df, geom = "boxplot", fill = class)

HoustonMap +
  geom_boxplot(aes(x = lon, y = lat, fill = class), data = df)




## the base_layer argument - faceting
##################################################

df &lt;- data.frame(
  x = rnorm(1000, -95.36258, .2),
  y = rnorm(1000,  29.76196, .2)
)

# no apparent change because ggmap sets maprange = TRUE with extent = "panel"
ggmap(get_map(), base_layer = ggplot(aes(x = x, y = y), data = df)) +
  geom_point(colour = "red")

# ... but there is a difference
ggmap(get_map(), base_layer = ggplot(aes(x = x, y = y), data = df), extent = "normal") +
  geom_point(colour = "red")

# maprange can fix it (so can extent = "panel")
ggmap(get_map(), maprange = TRUE, extent = "normal",
  base_layer = ggplot(aes(x = x, y = y), data = df)) +
  geom_point(colour = "red")

# base_layer makes faceting possible
df &lt;- data.frame(
  x = rnorm(10*100, -95.36258, .075),
  y = rnorm(10*100,  29.76196, .075),
  year = rep(paste("year",format(1:10)), each = 100)
)
ggmap(get_map(), base_layer = ggplot(aes(x = x, y = y), data = df)) +
  geom_point() +  facet_wrap(~ year)

ggmap(get_map(), base_layer = ggplot(aes(x = x, y = y), data = df), extent = "device") +
  geom_point() +  facet_wrap(~ year)

qmplot(x, y, data = df)
qmplot(x, y, data = df, facets = ~ year)


## neat faceting examples
##################################################

# simulated example
df &lt;- data.frame(
  x = rnorm(10*100, -95.36258, .05),
  y = rnorm(10*100,  29.76196, .05),
  year = rep(paste("year",format(1:10)), each = 100)
)
for(k in 0:9){
  df$x[1:100 + 100*k] &lt;- df$x[1:100 + 100*k] + sqrt(.05)*cos(2*pi*k/10)
  df$y[1:100 + 100*k] &lt;- df$y[1:100 + 100*k] + sqrt(.05)*sin(2*pi*k/10)
}

ggmap(get_map(),
  base_layer = ggplot(aes(x = x, y = y), data = df)) +
  stat_density2d(aes(fill = ..level.., alpha = ..level..),
    bins = 4, geom = "polygon") +
  scale_fill_gradient2(low = "white", mid = "orange", high = "red", midpoint = 10) +
  scale_alpha(range = c(.2, .75), guide = FALSE) +
  facet_wrap(~ year)



# crime example by month
levels(violent_crimes$month) &lt;- paste(
  toupper(substr(levels(violent_crimes$month),1,1)),
  substr(levels(violent_crimes$month),2,20), sep = ""
)
houston &lt;- get_map(location = "houston", zoom = 14, source = "osm", color = "bw")
HoustonMap &lt;- ggmap(houston,
  base_layer = ggplot(aes(x = lon, y = lat), data = violent_crimes)
  )

HoustonMap +
  stat_density2d(aes(x = lon, y = lat, fill = ..level.., alpha = ..level..),
    bins = I(5), geom = "polygon", data = violent_crimes) +
  scale_fill_gradient2("Violent\nCrime\nDensity",
    low = "white", mid = "orange", high = "red", midpoint = 500) +
  labs(x = "Longitude", y = "Latitude") + facet_wrap(~ month) +
  scale_alpha(range = c(.2, .55), guide = FALSE) +
  ggtitle("Violent Crime Contour Map of Downtown Houston by Month") +
  guides(fill = guide_colorbar(barwidth = 1.5, barheight = 10))








## darken argument
##################################################
ggmap(get_map())
ggmap(get_map(), darken = .5)
ggmap(get_map(), darken = c(.5,"white"))
ggmap(get_map(), darken = c(.5,"red")) # silly, but possible



## End(Not run)
</code></pre>

<hr>
<h2 id='ggmap_options'>ggmap Options</h2><span id='topic+ggmap_options'></span><span id='topic+set_ggmap_option'></span><span id='topic+has_ggmap_options'></span><span id='topic+has_ggmap_option'></span><span id='topic+ggmap_credentials'></span>

<h3>Description</h3>

<p>ggmap stores options as a named list in R's global options, i.e.
<code>getOption("ggmap")</code>. It currently stores two such options, one for Google
credentialing and one to suppress private API information in the URLs printed
to the screen when web queries are placed. For both of those, see
<code><a href="#topic+register_google">register_google()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_ggmap_option(...)

has_ggmap_options()

has_ggmap_option(option)

ggmap_credentials()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ggmap_options_+3A_...">...</code></td>
<td>
<p>a named listing of options to set</p>
</td></tr>
<tr><td><code id="ggmap_options_+3A_option">option</code></td>
<td>
<p>a specific option to query, e.g. <code>"display_api_key"</code></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+register_google">register_google()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
getOption("ggmap")
has_ggmap_options()
has_ggmap_option("display_api_key")



</code></pre>

<hr>
<h2 id='ggmap-defunct'>Defunct ggmap functions</h2><span id='topic+ggmap-defunct'></span>

<h3>Description</h3>

<p>As provider services change over time, ggmap has to make corresponding
changes.  Since its inception, a few services have stopped offering their
previous functionality, and in some cases this has required us to remove
those functions from the package entirely.
</p>


<h3>Details</h3>

<p>The following are defunct ggmap functions:
</p>

<ul>
<li><p> get_cloudemademap
</p>
</li>
<li><p> get_navermap
</p>
</li>
<li><p> get_openstreetmap
</p>
</li>
<li><p> get_stamenmap
</p>
</li></ul>


<hr>
<h2 id='ggmapplot'>Don't use this function, use ggmap.</h2><span id='topic+ggmapplot'></span>

<h3>Description</h3>

<p>ggmap plots the raster object produced by <code><a href="#topic+get_map">get_map()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggmapplot(
  ggmap,
  fullpage = FALSE,
  base_layer,
  maprange = FALSE,
  expand = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ggmapplot_+3A_ggmap">ggmap</code></td>
<td>
<p>an object of class ggmap (from function <code><a href="#topic+get_map">get_map()</a></code>)</p>
</td></tr>
<tr><td><code id="ggmapplot_+3A_fullpage">fullpage</code></td>
<td>
<p>logical; should the map take up the entire viewport?</p>
</td></tr>
<tr><td><code id="ggmapplot_+3A_base_layer">base_layer</code></td>
<td>
<p>a ggplot(aes(...), ...) call; see examples</p>
</td></tr>
<tr><td><code id="ggmapplot_+3A_maprange">maprange</code></td>
<td>
<p>logical for use with base_layer; should the map define the x and y limits?</p>
</td></tr>
<tr><td><code id="ggmapplot_+3A_expand">expand</code></td>
<td>
<p>should the map extend to the edge of the panel? used with base_layer and maprange=TRUE.</p>
</td></tr>
<tr><td><code id="ggmapplot_+3A_...">...</code></td>
<td>
<p>...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_map">get_map()</a></code>, <code><a href="#topic+qmap">qmap()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
this is a deprecated function, use ggmap.

## End(Not run)
</code></pre>

<hr>
<h2 id='hadley'>Highly unofficial ggplot2 image</h2><span id='topic+hadley'></span>

<h3>Description</h3>

<p>Highly unofficial ggplot2 image
</p>


<h3>Author(s)</h3>

<p>Garrett Grolemund <a href="mailto:grolemund@gmail.com">grolemund@gmail.com</a>
</p>

<hr>
<h2 id='inset'>Add ggplot2 insets to a map</h2><span id='topic+inset'></span>

<h3>Description</h3>

<p>This is identical to ggplot2::annotation_custom for use with ggmap
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inset(grob, xmin = -Inf, xmax = Inf, ymin = -Inf, ymax = Inf)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="inset_+3A_grob">grob</code></td>
<td>
<p>grob to display</p>
</td></tr>
<tr><td><code id="inset_+3A_xmin">xmin</code>, <code id="inset_+3A_xmax">xmax</code></td>
<td>
<p>x location (in data coordinates) giving horizontal location
of raster</p>
</td></tr>
<tr><td><code id="inset_+3A_ymin">ymin</code>, <code id="inset_+3A_ymax">ymax</code></td>
<td>
<p>y location (in data coordinates) giving vertical location of
raster</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Most useful for adding tables, inset plots, and other grid-based decorations
</p>


<h3>Note</h3>

<p><code>annotation_custom()</code> expects the grob to fill the entire viewport
defined by xmin, xmax, ymin, ymax. Grobs with a different (absolute) size
will be center-justified in that region. Inf values can be used to fill the
full plot panel
</p>

<hr>
<h2 id='inset_raster'>Create a (ggplot2) raster layer</h2><span id='topic+inset_raster'></span><span id='topic+inset_ggmap'></span>

<h3>Description</h3>

<p>This is a special version of ggplot2::annotation_raster for use with ggmap.
(It simply removes the requirement for cartesian coordinates.)  The only
difference between <code><a href="#topic+inset_raster">inset_raster()</a></code> and <code><a href="#topic+inset_ggmap">inset_ggmap()</a></code> is their arguments.
<code><a href="#topic+inset_ggmap">inset_ggmap()</a></code> is simply a wrapper of <code><a href="#topic+inset_raster">inset_raster()</a></code> with <code>xmin</code>, <code>...</code>,
<code>ymax</code> arguments equal to the map's bounding box.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inset_raster(raster, xmin, xmax, ymin, ymax, interpolate = TRUE)

inset_ggmap(ggmap)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="inset_raster_+3A_raster">raster</code></td>
<td>
<p>raster object to display</p>
</td></tr>
<tr><td><code id="inset_raster_+3A_xmin">xmin</code>, <code id="inset_raster_+3A_xmax">xmax</code></td>
<td>
<p>x location (in data coordinates) giving horizontal location
of raster</p>
</td></tr>
<tr><td><code id="inset_raster_+3A_ymin">ymin</code>, <code id="inset_raster_+3A_ymax">ymax</code></td>
<td>
<p>y location (in data coordinates) giving vertical location of
raster</p>
</td></tr>
<tr><td><code id="inset_raster_+3A_interpolate">interpolate</code></td>
<td>
<p>interpolate the raster? (i.e. antialiasing)</p>
</td></tr>
<tr><td><code id="inset_raster_+3A_ggmap">ggmap</code></td>
<td>
<p>a ggmap object, see <code><a href="#topic+get_map">get_map()</a></code></p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+bb2bbox">bb2bbox()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run:  # save cran check time

bbox &lt;- c(left = -97.1268, bottom = 31.536245, right = -97.099334, top = 31.559652)

terrain_map &lt;- get_stadiamap(bbox, zoom = 14, maptype = "stamen_terrain_background", color = "bw")
ggmap(terrain_map)

lines_map &lt;- get_stadiamap(bbox, zoom = 14, maptype = "stamen_toner_lines")
ggmap(lines_map)

ggmap(terrain_map) +
  inset_ggmap(lines_map)



## End(Not run)


</code></pre>

<hr>
<h2 id='legs2route'>Convert a leg-structured route to a route-structured route</h2><span id='topic+legs2route'></span>

<h3>Description</h3>

<p>Convert a leg-structured route to a route-structured route
</p>


<h3>Usage</h3>

<pre><code class='language-R'>legs2route(legsdf)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="legs2route_+3A_legsdf">legsdf</code></td>
<td>
<p>a legs-structured route, see <code><a href="#topic+route">route()</a></code></p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code>geom_path()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run:  requires Google API key, see ?register_google

(legs_df &lt;- route("houston","galveston"))
legs2route(legs_df)

(legs_df &lt;- route(
  "marrs mclean science, baylor university",
  "220 south 3rd street, waco, tx 76701", # ninfa"s
  alternatives = TRUE))

legs2route(legs_df)




from &lt;- "houston, texas"
to &lt;- "waco, texas"
legs_df &lt;- route(from, to)


qmap("college station, texas", zoom = 8) +
  geom_segment(
    aes(x = start_lon, y = start_lat, xend = end_lon, yend = end_lat),
    colour = "red", size = 1.5, data = legs_df
  )
# notice boxy ends

qmap("college station, texas", zoom = 8) +
  geom_leg(
    aes(x = start_lon, y = start_lat, xend = end_lon, yend = end_lat),
    colour = "red", size = 1.5, data = legs_df
  )
# notice overshooting ends

route_df &lt;- legs2route(legs_df)
qmap("college station, texas", zoom = 8) +
  geom_path(
    aes(x = lon, y = lat),
    colour = "red", size = 1.5, data = route_df, lineend = "round"
  )




## End(Not run)

</code></pre>

<hr>
<h2 id='LonLat2XY'>Convert a lon/lat coordinate to a tile coordinate</h2><span id='topic+LonLat2XY'></span>

<h3>Description</h3>

<p>Convert a lon/lat coordinate to a tile coordinate for a given zoom.  Decimal
tile coordinates (x, y) are reported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>LonLat2XY(lon_deg, lat_deg, zoom, xpix = 256, ypix = 256)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="LonLat2XY_+3A_lon_deg">lon_deg</code></td>
<td>
<p>longitude in degrees</p>
</td></tr>
<tr><td><code id="LonLat2XY_+3A_lat_deg">lat_deg</code></td>
<td>
<p>latitude in degrees</p>
</td></tr>
<tr><td><code id="LonLat2XY_+3A_zoom">zoom</code></td>
<td>
<p>zoom</p>
</td></tr>
<tr><td><code id="LonLat2XY_+3A_xpix">xpix</code></td>
<td>
<p>width of tile in pixels</p>
</td></tr>
<tr><td><code id="LonLat2XY_+3A_ypix">ypix</code></td>
<td>
<p>length of tile in pixels</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with columns X, Y, x, y
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>, based on
<code>RgoogleMaps::LatLon2XY()</code> by Markus Loecher of Sense Networks
<a href="mailto:markus@sensenetworks.com">markus@sensenetworks.com</a>
</p>


<h3>See Also</h3>

<p><a href="https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames">https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## Not run: 
gc &lt;- geocode('baylor university')
LonLat2XY(gc$lon, gc$lat, 10)


## End(Not run)

</code></pre>

<hr>
<h2 id='make_bbox'>Compute a bounding box</h2><span id='topic+make_bbox'></span>

<h3>Description</h3>

<p>Compute a bounding box for a given longitude / latitude collection.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_bbox(lon, lat, data, f = 0.05)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_bbox_+3A_lon">lon</code></td>
<td>
<p>longitude</p>
</td></tr>
<tr><td><code id="make_bbox_+3A_lat">lat</code></td>
<td>
<p>latitude</p>
</td></tr>
<tr><td><code id="make_bbox_+3A_data">data</code></td>
<td>
<p>(optional) a data frame containing lon and lat as variables</p>
</td></tr>
<tr><td><code id="make_bbox_+3A_f">f</code></td>
<td>
<p>number specifying the fraction by which the range should be
extended. if length 2 vector, applies to longitude and then latitude.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
make_bbox(lon, lat, data = crime)
make_bbox(lon, lat, data = crime, f = .20)
make_bbox(lon, lat, data = crime, f = c(.20, .05))

(lon &lt;- sample(crime$lon, 10))
(lat &lt;- sample(crime$lat, 10))
make_bbox(lon, lat)
make_bbox(lon, lat, f = .10) # bigger box


</code></pre>

<hr>
<h2 id='mapdist'>Compute map distances using Google</h2><span id='topic+mapdist'></span><span id='topic+distQueryCheck'></span>

<h3>Description</h3>

<p>Compute map distances using Google's Distance Matrix API. Note: To use
Google's Distance Matrix API, you must first enable the API in the Google
Cloud Platform Console. See <code><a href="#topic+register_google">register_google()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mapdist(
  from,
  to,
  mode = c("driving", "walking", "bicycling", "transit"),
  output = c("simple", "all"),
  urlonly = FALSE,
  override_limit = FALSE,
  ext = "com",
  inject = "",
  ...
)

distQueryCheck()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mapdist_+3A_from">from</code></td>
<td>
<p>name of origin addresses in a data frame (vector accepted), or a
data frame with from and to columns</p>
</td></tr>
<tr><td><code id="mapdist_+3A_to">to</code></td>
<td>
<p>name of destination addresses in a data frame (vector accepted)</p>
</td></tr>
<tr><td><code id="mapdist_+3A_mode">mode</code></td>
<td>
<p>driving, bicycling, walking, or transit</p>
</td></tr>
<tr><td><code id="mapdist_+3A_output">output</code></td>
<td>
<p>amount of output</p>
</td></tr>
<tr><td><code id="mapdist_+3A_urlonly">urlonly</code></td>
<td>
<p>return only the url?</p>
</td></tr>
<tr><td><code id="mapdist_+3A_override_limit">override_limit</code></td>
<td>
<p>override the current query count
(.google_distance_query_times)</p>
</td></tr>
<tr><td><code id="mapdist_+3A_ext">ext</code></td>
<td>
<p>top level domain domain extension (e.g. &quot;com&quot;, &quot;co.nz&quot;)</p>
</td></tr>
<tr><td><code id="mapdist_+3A_inject">inject</code></td>
<td>
<p>character string to add to the url</p>
</td></tr>
<tr><td><code id="mapdist_+3A_...">...</code></td>
<td>
<p>...</p>
</td></tr>
</table>


<h3>Details</h3>

<p>if parameters from and to are specified as geographic coordinates,
they are reverse geocoded with revgeocode.  note that the google maps api
limits to 2500 element queries a day.
</p>


<h3>Value</h3>

<p>a data frame (output=&quot;simple&quot;) or all of the geocoded information
(output=&quot;all&quot;)
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>See Also</h3>

<p><a href="https://developers.google.com/maps/documentation/distance-matrix/">https://developers.google.com/maps/documentation/distance-matrix/</a>,
<a href="https://developers.google.com/maps/documentation/distance-matrix/overview/">https://developers.google.com/maps/documentation/distance-matrix/overview/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run:  requires Google API key, see ?register_google

## basic usage
########################################

mapdist("waco, texas", "houston, texas")


# many from, single to
from &lt;- c("houston, texas", "dallas")
to &lt;- "waco, texas"
mapdist(from, to)
mapdist(from, to, mode = "bicycling")
mapdist(from, to, mode = "walking")


# tibble of from's, vector of to's
# (with a data frame, remember stringsAsFactors = FALSE)
tibble(
  "from" = c("houston", "houston", "dallas"),
    "to" = c("waco", "san antonio", "houston")
) %&gt;% mapdist()


# distance matrix
library("tidyverse")
c("Hamburg, Germany", "Stockholm, Sweden", "Copenhagen, Denmark") %&gt;%
  list(., .) %&gt;%
  set_names(c("from", "to")) %&gt;%
  cross_df() %&gt;%
  mapdist() -&gt; distances

distances

distances %&gt;%
  select(from, to, km) %&gt;%
  spread(from, km)





## other examples
########################################

# many from, single to with addresses
from &lt;- c(
  "1600 Amphitheatre Parkway, Mountain View, CA",
  "3111 World Drive Walt Disney World, Orlando, FL"
)
to &lt;- "1600 Pennsylvania Avenue, Washington DC"
mapdist(from, to)


# mode = "transit
from &lt;- "st lukes hospital houston texas"
to &lt;- "houston zoo, houston texas"
mapdist(from, to, mode = "transit")





## geographic coordinates are accepted as well
########################################
(wh &lt;- as.numeric(geocode("the white house, dc")))
(lm &lt;- as.numeric(geocode("lincoln memorial washington dc")))
mapdist(wh, lm, mode = "walking")


## End(Not run)

</code></pre>

<hr>
<h2 id='OSM_scale_lookup'>Look up OpenStreetMap scale for a given zoom level.</h2><span id='topic+OSM_scale_lookup'></span>

<h3>Description</h3>

<p>Look up OpenStreetMap scale for a given zoom level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>OSM_scale_lookup(zoom = 10)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="OSM_scale_lookup_+3A_zoom">zoom</code></td>
<td>
<p>google zoom</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The calculation of an appropriate OSM scale value for a given zoom
level is a complicated task.  For details, see
<a href="https://wiki.openstreetmap.org/wiki/FAQ">https://wiki.openstreetmap.org/wiki/FAQ</a>
</p>


<h3>Value</h3>

<p>scale
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
OSM_scale_lookup(zoom = 3)
OSM_scale_lookup(zoom = 10)

## Not run: 
# these can take a long time or are prone to crashing
# if the osm server load is too high

# these maps are were the ones used to tailor fit the scale
# the zooms were fixed
ggmap(get_map(zoom =  3, source = 'osm', scale = 47500000), extent = "device")
ggmap(get_map(zoom =  4, source = 'osm', scale = 32500000), extent = "device")
ggmap(get_map(zoom =  5, source = 'osm', scale = 15000000), extent = "device")
ggmap(get_map(zoom =  6, source = 'osm', scale = 10000000), extent = "device")
ggmap(get_map(zoom =  7, source = 'osm', scale =  5000000), extent = "device")
ggmap(get_map(zoom =  8, source = 'osm', scale =  2800000), extent = "device")
ggmap(get_map(zoom =  9, source = 'osm', scale =  1200000), extent = "device")
ggmap(get_map(zoom = 10, source = 'osm', scale =   575000), extent = "device")
ggmap(get_map(zoom = 11, source = 'osm', scale =   220000), extent = "device")
ggmap(get_map(zoom = 12, source = 'osm', scale =   110000), extent = "device")
ggmap(get_map(zoom = 13, source = 'osm', scale =    70000), extent = "device")
ggmap(get_map(zoom = 14, source = 'osm', scale =    31000), extent = "device")
ggmap(get_map(zoom = 15, source = 'osm', scale =    15000), extent = "device")
ggmap(get_map(zoom = 16, source = 'osm', scale =     7500), extent = "device")
ggmap(get_map(zoom = 17, source = 'osm', scale =     4000), extent = "device")
ggmap(get_map(zoom = 18, source = 'osm', scale =     2500), extent = "device")
ggmap(get_map(zoom = 19, source = 'osm', scale =     1750), extent = "device")
ggmap(get_map(zoom = 20, source = 'osm', scale =     1000), extent = "device")

# the USA
lonR &lt;- c(1.01,.99)*c(-124.73,-66.95)
latR &lt;- c(.99,1.01)*c(24.52, 49.38)
qmap(lonR = lonR, latR = latR, source = 'osm', scale = 325E5)


## End(Not run)


</code></pre>

<hr>
<h2 id='print.ggmap'>Print a map</h2><span id='topic+print.ggmap'></span>

<h3>Description</h3>

<p>Print a console description of a map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ggmap'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.ggmap_+3A_x">x</code></td>
<td>
<p>an object of class elicit</p>
</td></tr>
<tr><td><code id="print.ggmap_+3A_...">...</code></td>
<td>
<p>additional parameters</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns <code>x</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run:  requires a Stadia Maps API key. see ?register_stadiamaps

get_stadiamap(zoom = 9)


## End(Not run)

</code></pre>

<hr>
<h2 id='qmap'>Quick map plot</h2><span id='topic+qmap'></span>

<h3>Description</h3>

<p>qmap is a wrapper for <code><a href="#topic+ggmap">ggmap()</a></code> and <code><a href="#topic+get_map">get_map()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qmap(location = "houston", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qmap_+3A_location">location</code></td>
<td>
<p>character; location of interest</p>
</td></tr>
<tr><td><code id="qmap_+3A_...">...</code></td>
<td>
<p>stuff to pass to <code><a href="#topic+ggmap">ggmap()</a></code> and <code><a href="#topic+get_map">get_map()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ggmap">ggmap()</a></code> and <code><a href="#topic+get_map">get_map()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run:  some requires Google API key; heavy network/time load

location &lt;- "marrs mclean science, waco, texas"
qmap(location)
qmap(location, zoom = 14)
qmap(location, zoom = 14, source = "osm")
qmap(location, zoom = 14, source = "osm", scale = 20000)
qmap(location, zoom = 14, maptype = "satellite")
qmap(location, zoom = 14, maptype = "hybrid")
qmap(location, zoom = 14, maptype = "stamen_toner", source = "stadia")
qmap(location, zoom = 14, maptype = "stamen_watercolor", source = "stadia")
qmap(location, zoom = 14, maptype = "stamen_terrain_background", source = "stadia")
qmap(location, zoom = 14, maptype = "stamen_toner_lite", source = "stadia")

where &lt;- "the white house, washington dc"
wh &lt;- geocode(where)
qmap(where, maprange = TRUE, zoom = 15,
  base_layer = ggplot(aes(x=lon, y=lat), data = wh)) +
  geom_point()




## End(Not run)

</code></pre>

<hr>
<h2 id='qmplot'>Quick map plot</h2><span id='topic+qmplot'></span>

<h3>Description</h3>

<p><code><a href="#topic+qmplot">qmplot()</a></code> is the ggmap equivalent to the ggplot2 function qplot and allows
for the quick plotting of maps with data/models/etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qmplot(
  x,
  y,
  ...,
  data,
  zoom,
  source = "stadia",
  maptype = "stamen_toner_lite",
  extent = "device",
  legend = "right",
  padding = 0.02,
  force = FALSE,
  darken = c(0, "black"),
  mapcolor = "color",
  facets = NULL,
  margins = FALSE,
  geom = "auto",
  stat = list(NULL),
  position = list(NULL),
  xlim = c(NA, NA),
  ylim = c(NA, NA),
  main = NULL,
  f = 0.05,
  xlab = "Longitude",
  ylab = "Latitude"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qmplot_+3A_x">x</code></td>
<td>
<p>longitude values</p>
</td></tr>
<tr><td><code id="qmplot_+3A_y">y</code></td>
<td>
<p>latitude values</p>
</td></tr>
<tr><td><code id="qmplot_+3A_...">...</code></td>
<td>
<p>other aesthetics passed for each layer</p>
</td></tr>
<tr><td><code id="qmplot_+3A_data">data</code></td>
<td>
<p>data frame to use (optional).  If not specified, will create one,
extracting vectors from the current environment.</p>
</td></tr>
<tr><td><code id="qmplot_+3A_zoom">zoom</code></td>
<td>
<p>map zoom, see <code><a href="#topic+get_map">get_map()</a></code></p>
</td></tr>
<tr><td><code id="qmplot_+3A_source">source</code></td>
<td>
<p>map source, see <code><a href="#topic+get_map">get_map()</a></code></p>
</td></tr>
<tr><td><code id="qmplot_+3A_maptype">maptype</code></td>
<td>
<p>map type, see <code><a href="#topic+get_map">get_map()</a></code></p>
</td></tr>
<tr><td><code id="qmplot_+3A_extent">extent</code></td>
<td>
<p>how much of the plot should the map take up? &quot;normal&quot;, &quot;panel&quot;,
or &quot;device&quot; (default)</p>
</td></tr>
<tr><td><code id="qmplot_+3A_legend">legend</code></td>
<td>
<p>&quot;left&quot;, &quot;right&quot; (default), &quot;bottom&quot;, &quot;top&quot;, &quot;bottomleft&quot;,
&quot;bottomright&quot;, &quot;topleft&quot;, &quot;topright&quot;, &quot;none&quot; (used with extent = &quot;device&quot;)</p>
</td></tr>
<tr><td><code id="qmplot_+3A_padding">padding</code></td>
<td>
<p>distance from legend to corner of the plot  (used with extent
= &quot;device&quot;)</p>
</td></tr>
<tr><td><code id="qmplot_+3A_force">force</code></td>
<td>
<p>force new map (don't use archived version)</p>
</td></tr>
<tr><td><code id="qmplot_+3A_darken">darken</code></td>
<td>
<p>vector of the form c(number, color), where number is in (0,1)
and color is a character string indicating the color of the darken.  0
indicates no darkening, 1 indicates a black-out.</p>
</td></tr>
<tr><td><code id="qmplot_+3A_mapcolor">mapcolor</code></td>
<td>
<p>color (&quot;color&quot;) or black-and-white (&quot;bw&quot;)</p>
</td></tr>
<tr><td><code id="qmplot_+3A_facets">facets</code></td>
<td>
<p>faceting formula to use.  Picks <code>facet_wrap()</code> or
<code>facet_grid()</code> depending on whether the formula is one sided or two-sided</p>
</td></tr>
<tr><td><code id="qmplot_+3A_margins">margins</code></td>
<td>
<p>whether or not margins will be displayed</p>
</td></tr>
<tr><td><code id="qmplot_+3A_geom">geom</code></td>
<td>
<p>character vector specifying geom to use.  defaults to &quot;point&quot;</p>
</td></tr>
<tr><td><code id="qmplot_+3A_stat">stat</code></td>
<td>
<p>character vector specifying statistics to use</p>
</td></tr>
<tr><td><code id="qmplot_+3A_position">position</code></td>
<td>
<p>character vector giving position adjustment to use</p>
</td></tr>
<tr><td><code id="qmplot_+3A_xlim">xlim</code></td>
<td>
<p>limits for x axis</p>
</td></tr>
<tr><td><code id="qmplot_+3A_ylim">ylim</code></td>
<td>
<p>limits for y axis</p>
</td></tr>
<tr><td><code id="qmplot_+3A_main">main</code></td>
<td>
<p>character vector or expression for plot title</p>
</td></tr>
<tr><td><code id="qmplot_+3A_f">f</code></td>
<td>
<p>number specifying the fraction by which the range should be extended</p>
</td></tr>
<tr><td><code id="qmplot_+3A_xlab">xlab</code></td>
<td>
<p>character vector or expression for x axis label</p>
</td></tr>
<tr><td><code id="qmplot_+3A_ylab">ylab</code></td>
<td>
<p>character vector or expression for y axis label</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run:  # these are skipped to conserve R check time

qmplot(lon, lat, data = crime)


# only violent crimes
violent_crimes &lt;- subset(crime,
  offense != "auto theft" &amp;
  offense != "theft" &amp;
  offense != "burglary"
)

# rank violent crimes
violent_crimes$offense &lt;- factor(
  violent_crimes$offense,
  levels = c("robbery", "aggravated assault", "rape", "murder")
)

# restrict to downtown
violent_crimes &lt;- subset(violent_crimes,
  -95.39681 &lt;= lon &amp; lon &lt;= -95.34188 &amp;
   29.73631 &lt;= lat &amp; lat &lt;=  29.78400
)

theme_set(theme_bw())

qmplot(lon, lat, data = violent_crimes, colour = offense,
  size = I(3.5), alpha = I(.6), legend = "topleft")

qmplot(lon, lat, data = violent_crimes, geom = c("point","density2d"))
qmplot(lon, lat, data = violent_crimes) + facet_wrap(~ offense)
qmplot(lon, lat, data = violent_crimes, extent = "panel") + facet_wrap(~ offense)
qmplot(lon, lat, data = violent_crimes, extent = "panel", colour = offense, darken = .4) +
  facet_wrap(~ month)




qmplot(long, lat, xend = long + delta_long,
  color = I("red"), yend = lat + delta_lat, data = seals,
  geom = "segment", zoom = 5)

qmplot(long, lat, xend = long + delta_long, maptype = "stamen_watercolor",
  yend = lat + delta_lat, data = seals,
  geom = "segment", zoom = 6)

qmplot(long, lat, xend = long + delta_long, maptype = "stamen_terrain",
  yend = lat + delta_lat, data = seals,
  geom = "segment", zoom = 6)


qmplot(lon, lat, data = wind, size = I(.5), alpha = I(.5)) +
  ggtitle("NOAA Wind Report Sites")

# thin down data set...
s &lt;- seq(1, 227, 8)
thinwind &lt;- subset(wind,
  lon %in% unique(wind$lon)[s] &amp;
  lat %in% unique(wind$lat)[s]
)

# for some reason adding arrows to the following plot bugs
theme_set(theme_bw(18))

qmplot(lon, lat, data = thinwind, geom = "tile", fill = spd, alpha = spd,
    legend = "bottomleft") +
  geom_leg(aes(xend = lon + delta_lon, yend = lat + delta_lat)) +
  scale_fill_gradient2("Wind Speed\nand\nDirection",
    low = "green", mid = scales::muted("green"), high = "red") +
  scale_alpha("Wind Speed\nand\nDirection", range = c(.1, .75)) +
  guides(fill = guide_legend(), alpha = guide_legend())




## kriging
############################################################
# the below examples show kriging based on undeclared packages
# to better comply with CRAN's standards, we remove it from
# executing, but leave the code as a kind of case-study
# they also require the rgdal library


library(lattice)
library(sp)
library(rgdal)

# load in and format the meuse dataset (see bivand, pebesma, and gomez-rubio)
data(meuse)
coordinates(meuse) &lt;- c("x", "y")
proj4string(meuse) &lt;- CRS("+init=epsg:28992")
meuse &lt;- spTransform(meuse, CRS("+proj=longlat +datum=WGS84"))

# plot
plot(meuse)

m &lt;- data.frame(slot(meuse, "coords"), slot(meuse, "data"))
names(m)[1:2] &lt;- c("lon", "lat")

qmplot(lon, lat, data = m)
qmplot(lon, lat, data = m, zoom = 14)


qmplot(lon, lat, data = m, size = zinc,
  zoom = 14, source = "google", maptype = "satellite",
  alpha = I(.75), color = I("green"),
  legend = "topleft", darken = .2
) + scale_size("Zinc (ppm)")








# load in the meuse.grid dataset (looking toward kriging)
library(gstat)
data(meuse.grid)
coordinates(meuse.grid) &lt;- c("x", "y")
proj4string(meuse.grid) &lt;- CRS("+init=epsg:28992")
meuse.grid &lt;- spTransform(meuse.grid, CRS("+proj=longlat +datum=WGS84"))

# plot it
plot(meuse.grid)

mg &lt;- data.frame(slot(meuse.grid, "coords"), slot(meuse.grid, "data"))
names(mg)[1:2] &lt;- c("lon", "lat")

qmplot(lon, lat, data = mg, shape = I(15), zoom = 14, legend = "topleft") +
  geom_point(aes(size = zinc), data = m, color = "green") +
  scale_size("Zinc (ppm)")



# interpolate at unobserved locations (i.e. at meuse.grid points)
# pre-define scale for consistency
scale &lt;- scale_color_gradient("Predicted\nZinc (ppm)",
  low = "green", high = "red", lim = c(100, 1850)
)



# inverse distance weighting
idw &lt;- idw(log(zinc) ~ 1, meuse, meuse.grid, idp = 2.5)
mg$idw &lt;- exp(slot(idw, "data")$var1.pred)

qmplot(lon, lat, data = mg, shape = I(15), color = idw,
  zoom = 14, legend = "topleft", alpha = I(.75), darken = .4
) + scale



# linear regression
lin &lt;- krige(log(zinc) ~ 1, meuse, meuse.grid, degree = 1)
mg$lin &lt;- exp(slot(lin, "data")$var1.pred)

qmplot(lon, lat, data = mg, shape = I(15), color = lin,
  zoom = 14, legend = "topleft", alpha = I(.75), darken = .4
) + scale



# trend surface analysis
tsa &lt;- krige(log(zinc) ~ 1, meuse, meuse.grid, degree = 2)
mg$tsa &lt;- exp(slot(tsa, "data")$var1.pred)

qmplot(lon, lat, data = mg, shape = I(15), color = tsa,
  zoom = 14, legend = "topleft", alpha = I(.75), darken = .4
) + scale



# ordinary kriging
vgram &lt;- variogram(log(zinc) ~ 1, meuse)   # plot(vgram)
vgramFit &lt;- fit.variogram(vgram, vgm(1, "Exp", .2, .1))
ordKrige &lt;- krige(log(zinc) ~ 1, meuse, meuse.grid, vgramFit)
mg$ordKrige &lt;- exp(slot(ordKrige, "data")$var1.pred)

qmplot(lon, lat, data = mg, shape = I(15), color = ordKrige,
  zoom = 14, legend = "topleft", alpha = I(.75), darken = .4
) + scale



# universal kriging
vgram &lt;- variogram(log(zinc) ~ 1, meuse) # plot(vgram)
vgramFit &lt;- fit.variogram(vgram, vgm(1, "Exp", .2, .1))
univKrige &lt;- krige(log(zinc) ~ sqrt(dist), meuse, meuse.grid, vgramFit)
mg$univKrige &lt;- exp(slot(univKrige, "data")$var1.pred)

qmplot(lon, lat, data = mg, shape = I(15), color = univKrige,
  zoom = 14, legend = "topleft", alpha = I(.75), darken = .4
) + scale



# adding observed data layer
qmplot(lon, lat, data = mg, shape = I(15), color = univKrige,
  zoom = 14, legend = "topleft", alpha = I(.75), darken = .4
) +
  geom_point(
    aes(x = lon, y = lat, size = zinc),
    data = m, shape = 1, color = "black"
  ) +
  scale +
  scale_size("Observed\nLog Zinc")







## End(Not run) # end dontrun

</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>magrittr</dt><dd><p><code><a href="magrittr.html#topic+pipe">%&gt;%</a></code></p>
</dd>
</dl>

<hr>
<h2 id='register_google'>Register a Google API</h2><span id='topic+register_google'></span><span id='topic+showing_key'></span><span id='topic+ggmap_show_api_key'></span><span id='topic+ggmap_hide_api_key'></span><span id='topic+scrub_key'></span><span id='topic+print.google_credentials'></span><span id='topic+google_key'></span><span id='topic+has_google_key'></span><span id='topic+has_google_account'></span><span id='topic+google_account'></span><span id='topic+google_client'></span><span id='topic+has_google_client'></span><span id='topic+google_signature'></span><span id='topic+has_google_signature'></span><span id='topic+google_second_limit'></span><span id='topic+google_day_limit'></span>

<h3>Description</h3>

<p>This page contains documentation for tools related to enabling Google
services in R. See the Details section of this file for background
information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showing_key()

ggmap_show_api_key()

ggmap_hide_api_key()

scrub_key(string, with = "xxx")

register_google(
  key,
  account_type,
  client,
  signature,
  second_limit,
  day_limit,
  write = FALSE
)

## S3 method for class 'google_credentials'
print(x, ...)

google_key()

has_google_key()

has_google_account()

google_account()

google_client()

has_google_client()

google_signature()

has_google_signature()

google_second_limit()

google_day_limit()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="register_google_+3A_string">string</code></td>
<td>
<p>a url string to be scrubbed. currently key, signature, and
client keywords are scrubbed from the url and replace with the with
argument</p>
</td></tr>
<tr><td><code id="register_google_+3A_with">with</code></td>
<td>
<p>a string to replace</p>
</td></tr>
<tr><td><code id="register_google_+3A_key">key</code></td>
<td>
<p>an api key</p>
</td></tr>
<tr><td><code id="register_google_+3A_account_type">account_type</code></td>
<td>
<p><code>"standard"</code> or <code>"premium"</code></p>
</td></tr>
<tr><td><code id="register_google_+3A_client">client</code></td>
<td>
<p>client code</p>
</td></tr>
<tr><td><code id="register_google_+3A_signature">signature</code></td>
<td>
<p>signature code</p>
</td></tr>
<tr><td><code id="register_google_+3A_second_limit">second_limit</code></td>
<td>
<p>query limit per second (default 50)</p>
</td></tr>
<tr><td><code id="register_google_+3A_day_limit">day_limit</code></td>
<td>
<p>query limit per day (default 2500 for standard accounts,
100000 for premium accounts)</p>
</td></tr>
<tr><td><code id="register_google_+3A_write">write</code></td>
<td>
<p>if TRUE, stores the secrets provided in the .Renviron file</p>
</td></tr>
<tr><td><code id="register_google_+3A_x">x</code></td>
<td>
<p>a google credentials class object</p>
</td></tr>
<tr><td><code id="register_google_+3A_...">...</code></td>
<td>
<p>a dumped formal argument to the generic print method</p>
</td></tr>
</table>


<h3>Details</h3>

<p>As of mid-2018, the Google Maps Platform requires a registered API key. While
this alleviates previous burdens (e.g. query limits), it creates some
challenges as well. The most immediate challenge for most R users is that
ggmap functions that use Google's services no longer function out of the box,
since the user has to setup an account with Google, enable the relevant APIs,
and then tell R about the user's setup.
</p>
<p>To obtain an API key and enable services, go to
<a href="https://mapsplatform.google.com/">https://mapsplatform.google.com/</a>. This documentation shows you
how to input the requisite information (e.g. your API key) into R, and it
also shows you a few tools that can help you work with the credentialing.
</p>
<p>To tell ggmap about your API key, use <code><a href="#topic+register_google">register_google()</a></code>, e.g.
<code>register_google(key = "mQkzTpiaLYjPqXQBotesgif3EfGL2dbrNVOrogg")</code> (that's a
fake key). This will set your API key for the current session, but if you
restart R, you'll need to do it again. You can set it permanently by setting
<code>write = TRUE</code>, see the examples. If you set it permanently it will be stored
in your .Renviron file, and that will be accessed by ggmap persistently
across sessions.
</p>
<p>Users should be aware that the API key, a string of jarbled
characters/numbers/symbols, is a PRIVATE key - it uniquely identifies and
authenticates you to Google's services. If anyone gets your API key, they can
use it to masquerade as you to Google and potentially use services that you
have enabled. Since Google requires a valid credit card to use its online
cloud services, this also means that anyone who obtains your key can
potentially make charges to your card in the form of Google services. So be
sure to not share your API key. To mitigate against users inadvertently
sharing their keys, by default ggmap never displays a user's key in messages
displayed to the console.
</p>
<p>Users should also be aware that ggmap has no mechanism with which to
safeguard the private key once registered with R. That is to say, once you
register your API key, any function R will have access to it. As a
consequence, ggmap will not know if another function, potentially from a
compromised package, accesses the key and uploads it to a third party. For
this reason, when using ggmap we recommend a heightened sense of security and
self-awareness: only use trusted packages, do not save API keys in script
files, routinely cycle keys (regenerate new keys and retire old ones), etc.
Google offers features to help in securing your API key, including things
like limiting queries using that key to a particular IP address, as well as
guidance on security best practices. See
<a href="https://cloud.google.com/docs/authentication/api-keys#securing_an_api_key">https://cloud.google.com/docs/authentication/api-keys#securing_an_api_key</a>
for details.
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>See Also</h3>

<p><a href="https://mapsplatform.google.com/">https://mapsplatform.google.com/</a>,
<a href="https://developers.google.com/maps/documentation/maps-static/get-api-key/">https://developers.google.com/maps/documentation/maps-static/get-api-key/</a>,
<a href="https://developers.google.com/maps/documentation/maps-static/usage-and-billing/">https://developers.google.com/maps/documentation/maps-static/usage-and-billing/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# this sets your google map for this session
# register_google(key = "[your key]")

# this sets your google map permanently
# register_google(key = "[your key]", write = TRUE)

has_google_key()
google_key()
has_google_client()
has_google_signature()

geocode("waco, texas", urlonly = TRUE)
ggmap_show_api_key()
geocode("waco, texas", urlonly = TRUE)
ggmap_hide_api_key()
geocode("waco, texas", urlonly = TRUE)

scrub_key("key=d_5iD")
scrub_key("key=d_5iD", "[your \\1]")
scrub_key("signature=d_5iD")
scrub_key("client=a_5sS&amp;signature=d_5iD")

</code></pre>

<hr>
<h2 id='register_stadiamaps'>Register a Stadia Maps API Key</h2><span id='topic+register_stadiamaps'></span><span id='topic+stadiamaps_key'></span><span id='topic+has_stadiamaps_key'></span>

<h3>Description</h3>

<p>This page contains documentation for tools related to enabling Stadia Maps
services in R. See the Details section of this file for background
information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>register_stadiamaps(key, write = FALSE)

stadiamaps_key()

has_stadiamaps_key()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="register_stadiamaps_+3A_key">key</code></td>
<td>
<p>an api key</p>
</td></tr>
<tr><td><code id="register_stadiamaps_+3A_write">write</code></td>
<td>
<p>if TRUE, stores the secrets provided in the .Renviron file</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To obtain an API key and enable services, go to
<a href="https://client.stadiamaps.com/signup/">https://client.stadiamaps.com/signup/</a>. It is completely free for non-commercial
and evaluation use (a license is for commercial use; see <a href="https://stadiamaps.com/pricing">https://stadiamaps.com/pricing</a>
for pricing), and no credit card is required to sign up.
</p>
<p>To tell ggmap about your API key, use <code><a href="#topic+register_stadiamaps">register_stadiamaps()</a></code>, e.g.
<code>register_stadiamaps(key = "YOUR-API-KEY")</code> (that's a
fake key). This will set your API key for the current session, but if you
restart R, you'll need to do it again. You can set it permanently by setting
<code>write = TRUE</code>, see the examples. If you set it permanently it will be stored
in your .Renviron file, and that will be accessed by ggmap persistently
across sessions.
</p>
<p>Users should be aware that the API key, is a PRIVATE key - it uniquely identifies and
authenticates you to Stadia Maps' services. If anyone gets your API key, they can
use it to masquerade as you to Stadia Maps and potentially use services that you
have enabled. While Stadia Maps requires you to opt in to additional usage-based billing,
this also means that anyone who obtains your key can potentially incur charges on your behalf
or steal the quota that you have already purchased. So be
sure to not share your API key. To mitigate against users inadvertently
sharing their keys, by default ggmap never displays a user's key in messages
displayed to the console.
</p>
<p>Users should also be aware that ggmap has no mechanism with which to
safeguard the private key once registered with R. That is to say, once you
register your API key, any function R will have access to it. As a
consequence, ggmap will not know if another function, potentially from a
compromised package, accesses the key and uploads it to a third party. For
this reason, when using ggmap we recommend a heightened sense of security and
self-awareness: only use trusted packages, do not save API keys in script
files, routinely cycle keys (regenerate new keys and retire old ones), etc.
</p>


<h3>See Also</h3>

<p><a href="https://docs.stadiamaps.com/authentication/">https://docs.stadiamaps.com/authentication/</a>,
<a href="https://stadiamaps.com/pricing">https://stadiamaps.com/pricing</a>,
<a href="https://client.stadiamaps.com/signup/">https://client.stadiamaps.com/signup/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# this sets your Stadia Maps API key for this session
# register_stadiamaps(key = "YOUR-API-KEY")

# this sets your Stadia Maps API key permanently
# register_stadiamaps(key = "YOUR-API-KEY", write = TRUE)

has_stadiamaps_key()
stadiamaps_key()
</code></pre>

<hr>
<h2 id='revgeocode'>Reverse geocode</h2><span id='topic+revgeocode'></span>

<h3>Description</h3>

<p>Reverse geocodes (looks up the address of) a longitude/latitude location
using the Google Geocoding API. Note: To use Google's Geocoding API, you must
first enable the API in the Google Cloud Platform Console. See
<code><a href="#topic+register_google">register_google()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>revgeocode(
  location,
  output = c("address", "all"),
  force = FALSE,
  urlonly = FALSE,
  override_limit = FALSE,
  ext = "com",
  inject = "",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="revgeocode_+3A_location">location</code></td>
<td>
<p>a location in longitude/latitude format</p>
</td></tr>
<tr><td><code id="revgeocode_+3A_output">output</code></td>
<td>
<p>&quot;address&quot; or &quot;all&quot;</p>
</td></tr>
<tr><td><code id="revgeocode_+3A_force">force</code></td>
<td>
<p>force online query, even if cached (previously downloaded)</p>
</td></tr>
<tr><td><code id="revgeocode_+3A_urlonly">urlonly</code></td>
<td>
<p>return only the url?</p>
</td></tr>
<tr><td><code id="revgeocode_+3A_override_limit">override_limit</code></td>
<td>
<p>override the current query rate</p>
</td></tr>
<tr><td><code id="revgeocode_+3A_ext">ext</code></td>
<td>
<p>top level domain extension (e.g. &quot;com&quot;, &quot;co.nz&quot;)</p>
</td></tr>
<tr><td><code id="revgeocode_+3A_inject">inject</code></td>
<td>
<p>character string to add to the url</p>
</td></tr>
<tr><td><code id="revgeocode_+3A_...">...</code></td>
<td>
<p>...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character(1) address or a list (the parsed json output from Google)
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>See Also</h3>

<p><a href="https://developers.google.com/maps/documentation/geocoding/">https://developers.google.com/maps/documentation/geocoding/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run:  requires Google API key, see ?register_google

## basic usage
########################################

( gc &lt;- as.numeric(geocode("the white house")) )
revgeocode(gc)
str(revgeocode(gc, output = "all"), 3)


## End(Not run)

</code></pre>

<hr>
<h2 id='route'>Grab a route from Google</h2><span id='topic+route'></span><span id='topic+routeQueryCheck'></span>

<h3>Description</h3>

<p>Route two locations: determine a sequence of steps (legs) between two
locations using the Google Directions API. Note: To use Google's Directions
API, you must first enable the API in the Google Cloud Platform Console. See
<code><a href="#topic+register_google">register_google()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>route(
  from,
  to,
  mode = c("driving", "walking", "bicycling", "transit"),
  structure = c("legs", "route"),
  output = c("simple", "all"),
  alternatives = FALSE,
  units = "metric",
  urlonly = FALSE,
  override_limit = FALSE,
  ext = "com",
  inject = "",
  ...
)

routeQueryCheck()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="route_+3A_from">from</code></td>
<td>
<p>vector of origin addresses</p>
</td></tr>
<tr><td><code id="route_+3A_to">to</code></td>
<td>
<p>vector of destination addresses</p>
</td></tr>
<tr><td><code id="route_+3A_mode">mode</code></td>
<td>
<p>driving, bicycling, walking, or transit</p>
</td></tr>
<tr><td><code id="route_+3A_structure">structure</code></td>
<td>
<p>structure of output, &quot;legs&quot; or &quot;route&quot;, see examples</p>
</td></tr>
<tr><td><code id="route_+3A_output">output</code></td>
<td>
<p>amount of output (&quot;simple&quot; or &quot;all&quot;)</p>
</td></tr>
<tr><td><code id="route_+3A_alternatives">alternatives</code></td>
<td>
<p>should more than one route be provided?</p>
</td></tr>
<tr><td><code id="route_+3A_units">units</code></td>
<td>
<p>&quot;metric&quot;</p>
</td></tr>
<tr><td><code id="route_+3A_urlonly">urlonly</code></td>
<td>
<p>return only the url?</p>
</td></tr>
<tr><td><code id="route_+3A_override_limit">override_limit</code></td>
<td>
<p>override the current query count</p>
</td></tr>
<tr><td><code id="route_+3A_ext">ext</code></td>
<td>
<p>domain extension (e.g. &quot;com&quot;, &quot;co.nz&quot;)</p>
</td></tr>
<tr><td><code id="route_+3A_inject">inject</code></td>
<td>
<p>character string to add to the url</p>
</td></tr>
<tr><td><code id="route_+3A_...">...</code></td>
<td>
<p>...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame (output=&quot;simple&quot;) or all of the geocoded information
(output=&quot;all&quot;)
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>See Also</h3>

<p><a href="https://developers.google.com/maps/documentation/directions/">https://developers.google.com/maps/documentation/directions/</a>,
<code><a href="#topic+trek">trek()</a></code>, <code><a href="#topic+legs2route">legs2route()</a></code>, <code><a href="#topic+geom_leg">geom_leg()</a></code>, <code><a href="#topic+register_google">register_google()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run:  requires Google API key, see ?register_google

## basic usage
########################################

from &lt;- "houston, texas"
to &lt;- "waco, texas"

route(from, to, structure = "legs")
route(from, to, structure = "route")

route(from, to, alternatives = TRUE)


## comparison to trek
########################################
(route_df &lt;- route(from, to, structure = "route"))
(trek_df  &lt;-  trek(from, to, structure = "route"))

qmap("college station, texas", zoom = 8) +
  geom_path(
    aes(x = lon, y = lat),  colour = "red",
    size = 1.5, alpha = .5,
    data = route_df, lineend = "round"
  ) +
  geom_path(
    aes(x = lon, y = lat),  colour = "blue",
    size = 1.5, alpha = .5,
    data = trek_df, lineend = "round"
  )

qmap("college station, texas", zoom = 6) +
  geom_path(
    aes(x = lon, y = lat), colour = "red", size = 1.5,
    data = route_df, lineend = "round"
  )






## End(Not run)

</code></pre>

<hr>
<h2 id='theme_inset'>Make a ggplot2 inset theme.</h2><span id='topic+theme_inset'></span>

<h3>Description</h3>

<p>theme_inset is a ggplot2 theme geared towards making inset plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>theme_inset(base_size = 12)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="theme_inset_+3A_base_size">base_size</code></td>
<td>
<p>base size, not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot2 theme (i.e., a list of class options).
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
## Not run: 


n &lt;- 50
df &lt;- expand.grid(x = 1:n,y = 1:n)[sample(n^2,.5*n^2),]
qplot(x, y, data = df, geom = 'tile')
qplot(x, y, data = df, geom = 'tile') + theme_nothing()

qplot(1:10, 1:10) +
  annotation_custom(
    grob = ggplotGrob(qplot(1:10,1:10)),
    8, Inf, -Inf, 2
  )

qplot(1:10, 1:10) +
  annotation_custom(
    grob = ggplotGrob(qplot(1:10,1:10) + theme_nothing()),
    8, Inf, -Inf, 2
  )

qplot(1:10, 1:10) +
  annotation_custom(
    grob = ggplotGrob(qplot(1:10,1:10) + theme_inset()),
    8, Inf, -Inf, 2
  )


## End(Not run)

</code></pre>

<hr>
<h2 id='theme_nothing'>Make a blank ggplot2 theme.</h2><span id='topic+theme_nothing'></span>

<h3>Description</h3>

<p>theme_nothing simply strips all thematic element in ggplot2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>theme_nothing(base_size = 12, legend = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="theme_nothing_+3A_base_size">base_size</code></td>
<td>
<p>base size, not used.</p>
</td></tr>
<tr><td><code id="theme_nothing_+3A_legend">legend</code></td>
<td>
<p>should the legend be included?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot2 theme (i.e., a list of class options).
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# no legend example
n &lt;- 50
df &lt;- expand.grid(x = 1:n,y = 1:n)[sample(n^2,.5*n^2),]
p &lt;- ggplot(df, aes(x, y)) + geom_raster()
p
p + theme_nothing()
p + theme_nothing(legend = TRUE) # no difference
p +
  scale_x_continuous(expand = c(0,0)) +
  scale_y_continuous(expand = c(0,0)) +
  theme_nothing()



# legend example
df$class &lt;- factor(sample(0:1, .5*n^2,  replace = TRUE))
p &lt;- ggplot(df, aes(x, y)) + geom_raster(aes(fill = class))
p
p + theme_nothing()
p + theme_nothing(legend = TRUE)

p &lt;- p +
  scale_x_continuous(expand = c(0,0)) +
  scale_y_continuous(expand = c(0,0))
p
p + theme_nothing()
p + theme_nothing(legend = TRUE)



</code></pre>

<hr>
<h2 id='trek'>Grab a trek from Google</h2><span id='topic+trek'></span>

<h3>Description</h3>

<p>Sequence treks (latitude-longitude sequences following ordinary paths, e.g.
roads) between two locations using the Google Directions API. Note: To use
Google's Directions API, you must first enable the API in the Google Cloud
Platform Console. See <code><a href="#topic+register_google">register_google()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trek(
  from,
  to,
  mode = c("driving", "walking", "bicycling", "transit"),
  output = c("simple", "all"),
  alternatives = FALSE,
  units = "metric",
  urlonly = FALSE,
  override_limit = FALSE,
  ext = "com",
  inject = "",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trek_+3A_from">from</code></td>
<td>
<p>name of origin addresses in a data frame</p>
</td></tr>
<tr><td><code id="trek_+3A_to">to</code></td>
<td>
<p>name of destination addresses in a data frame</p>
</td></tr>
<tr><td><code id="trek_+3A_mode">mode</code></td>
<td>
<p>driving, bicycling, walking, or transit</p>
</td></tr>
<tr><td><code id="trek_+3A_output">output</code></td>
<td>
<p>amount of output (&quot;simple&quot; or &quot;all&quot;)</p>
</td></tr>
<tr><td><code id="trek_+3A_alternatives">alternatives</code></td>
<td>
<p>should more than one route be provided?</p>
</td></tr>
<tr><td><code id="trek_+3A_units">units</code></td>
<td>
<p>&quot;metric&quot;</p>
</td></tr>
<tr><td><code id="trek_+3A_urlonly">urlonly</code></td>
<td>
<p>return only the url?</p>
</td></tr>
<tr><td><code id="trek_+3A_override_limit">override_limit</code></td>
<td>
<p>override the current query count</p>
</td></tr>
<tr><td><code id="trek_+3A_ext">ext</code></td>
<td>
<p>domain extension (e.g. &quot;com&quot;, &quot;co.nz&quot;)</p>
</td></tr>
<tr><td><code id="trek_+3A_inject">inject</code></td>
<td>
<p>character string to add to the url</p>
</td></tr>
<tr><td><code id="trek_+3A_...">...</code></td>
<td>
<p>...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tibble
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a> with the key decoding algorithm
due to Stack Overflow user akhmed
</p>


<h3>See Also</h3>

<p><a href="https://developers.google.com/maps/documentation/directions/">https://developers.google.com/maps/documentation/directions/</a>,
<a href="https://stackoverflow.com/questions/30270011/ggmap-route-finding-doesnt-stay-on-roads/">https://stackoverflow.com/questions/30270011/ggmap-route-finding-doesnt-stay-on-roads/</a>,
<code><a href="#topic+route">route()</a></code>, <code><a href="#topic+routeQueryCheck">routeQueryCheck()</a></code>, <code><a href="#topic+register_google">register_google()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run:  requires Google API key, see ?register_google

## basic usage
########################################

from &lt;- "houston, texas"
to &lt;- "waco, texas"

(route_df &lt;- route(from, to, structure = "route"))
(trek_df  &lt;-  trek(from, to, structure = "route"))

qmap("college station, texas", zoom = 8) +
  geom_path(
    aes(x = lon, y = lat),  colour = "red",
    size = 1.5, alpha = .5,
    data = route_df, lineend = "round"
  ) +
  geom_path(
    aes(x = lon, y = lat),  colour = "blue",
    size = 1.5, alpha = .5,
    data = trek_df, lineend = "round"
  )



from &lt;- "rice university houston texas"
to &lt;- "1001 Bissonnet St, Houston, TX 77005"
trek_df &lt;- trek(from, to)
qmplot(lon, lat, data = trek_df, geom = "path", maptype = "terrain",
  color = I("red"), size = I(2), alpha = I(.5)
)

trek_df &lt;- trek(from, to, mode = "walking")
qmplot(lon, lat, data = trek_df, geom = "path", maptype = "terrain",
  color = I("red"), size = I(2), alpha = I(.5)
)

trek_df &lt;- trek(from, to, mode = "transit")
qmplot(lon, lat, data = trek_df, geom = "path", maptype = "terrain",
  color = I("red"), size = I(2), alpha = I(.5)
)



## neat faceting example
########################################

from &lt;- "houston, texas"; to &lt;- "waco, texas"
trek_df &lt;- trek(from, to, alternatives = TRUE)

qmplot(lon, lat, data = trek_df, geom = "path",
  color = route, size = I(2), maptype = "terrain",
  alpha = I(.5)
)

qmplot(lon, lat, data = trek_df, geom = "path",
  color = route, size = I(2), maptype = "terrain",
  zoom = 8
) + facet_grid(. ~ route)





## End(Not run)

</code></pre>

<hr>
<h2 id='wind'>Wind data from Hurricane Ike</h2><span id='topic+wind'></span>

<h3>Description</h3>

<p>Wind data from Hurricane Ike
</p>


<h3>Details</h3>

<p>Powell, M. D., S. H. Houston, L. R. Amat, and N Morisseau-Leroy,
1998: The HRD real-time hurricane wind analysis system. J. Wind Engineer.
and Indust. Aerodyn. 77&amp;78, 53-64
</p>


<h3>Author(s)</h3>

<p>Atlantic Oceanographic and Meteorological Laboratory (AOML), a
division of the National Oceanic and Atmospheric Administration (NOAA)
</p>


<h3>References</h3>

<p><a href="https://www.aoml.noaa.gov/hrd/Storm_pages/ike2008/wind.html">https://www.aoml.noaa.gov/hrd/Storm_pages/ike2008/wind.html</a>
</p>

<hr>
<h2 id='XY2LonLat'>Convert a tile coordinate to a lon/lat coordinate</h2><span id='topic+XY2LonLat'></span>

<h3>Description</h3>

<p>Convert a tile coordinate to a lon/lat coordinate for a given zoom.  Decimal
tile coordinates are accepted.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>XY2LonLat(X, Y, zoom, x = 0, y = 0, xpix = 255, ypix = 255)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="XY2LonLat_+3A_x">X</code></td>
<td>
<p>horizontal map-tile coordinate (0 is map-left)</p>
</td></tr>
<tr><td><code id="XY2LonLat_+3A_y">Y</code></td>
<td>
<p>vertical map-tile coordinate (0 is map-top)</p>
</td></tr>
<tr><td><code id="XY2LonLat_+3A_zoom">zoom</code></td>
<td>
<p>zoom</p>
</td></tr>
<tr><td><code id="XY2LonLat_+3A_x">x</code></td>
<td>
<p>within tile x (0 is tile-left)</p>
</td></tr>
<tr><td><code id="XY2LonLat_+3A_y">y</code></td>
<td>
<p>within tile y (0 it tile-top)</p>
</td></tr>
<tr><td><code id="XY2LonLat_+3A_xpix">xpix</code></td>
<td>
<p>width of tile in pixels</p>
</td></tr>
<tr><td><code id="XY2LonLat_+3A_ypix">ypix</code></td>
<td>
<p>length of tile in pixels</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with columns lon and lat (in degrees)
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>, based on
<code>RgoogleMaps::XY2LatLon()</code> by Markus Loecher of Sense Networks
<a href="mailto:markus@sensenetworks.com">markus@sensenetworks.com</a>
</p>


<h3>See Also</h3>

<p><a href="https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames">https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## Not run: 
XY2LonLat(480, 845, zoom = 11)
XY2LonLat(0, 0, zoom = 1)
XY2LonLat(0, 0, 255, 255, zoom = 1)
XY2LonLat(0, 0, 255, 255, zoom = 1)


## End(Not run)

</code></pre>

<hr>
<h2 id='zips'>Zip code data for the Greater Houston Metropolitan Area from the
2000 census</h2><span id='topic+zips'></span>

<h3>Description</h3>

<p>Zip code data for the Greater Houston Metropolitan Area from the
2000 census
</p>


<h3>Author(s)</h3>

<p>U.S. Census Bureau, Geography Division, Cartographic
Products Management Branch
</p>


<h3>References</h3>

<p>Downloaded from
http://www.census.gov/geo/www/cob/z52000.html (now defunct).
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
