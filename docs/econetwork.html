<!DOCTYPE html><html><head><title>Help for package econetwork</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {econetwork}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#econetwork-package'>
<p>Analyzing Ecological Networks</p></a></li>
<li><a href='#cpness'>
<p>Core-peripheriness measure</p></a></li>
<li><a href='#disPairwise'>
<p>Computation of the dissimilarity matrix (pairwise beta-diversity) for a set of networks</p></a></li>
<li><a href='#divPartition'>
<p>Partitionning network diversity in alpha, beta and gamma diversity</p></a></li>
<li><a href='#elgrin'>
<p>Teasing apart the effects of environmental variations and biotic interactions on species distributions</p></a></li>
<li><a href='#embedding'>
<p>Graph embeddings for comparing trophic network architectures</p></a></li>
<li><a href='#getMetaweb'>
<p>Get metaweb</p></a></li>
<li><a href='#virtualComCompetition'><p>Dataset simulated with communities whose composition is driven</p>
simultaneously by biotic (competition) and abiotic environmental effects.</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Analyzing Ecological Networks</td>
</tr>
<tr>
<td>Version:</td>
<td>0.7.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-10-05</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Vincent Miele &lt;vincent.miele@univ-lyon1.fr&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A collection of advanced tools, methods and models specifically  designed  for  analyzing different  types  of  ecological  networks - especially  antagonistic  (food  webs,  host-parasite),  mutualistic (plant-pollinator, plant-fungus, etc)  and competitive networks, as well as their variability in time and space. Statistical models are developed to describe and understand the mechanisms that determine species interactions, and to decipher the organization of these ecological networks (Ohlmann et al. (2019)  &lt;<a href="https://doi.org/10.1111%2Fele.13221">doi:10.1111/ele.13221</a>&gt;, Gonzalez et al. (2020) &lt;<a href="https://doi.org/10.1101%2F2020.04.02.021691">doi:10.1101/2020.04.02.021691</a>&gt;, Miele et al. (2021) &lt;<a href="https://doi.org/10.48550%2FarXiv.2103.10433">doi:10.48550/arXiv.2103.10433</a>&gt;, Botella et al (2021) &lt;<a href="https://doi.org/10.1111%2F2041-210X.13738">doi:10.1111/2041-210X.13738</a>&gt;).</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, igraph, rdiversity, blockmodels, bipartite, Rcpp</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>GNU GSL</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppEigen, RcppGSL</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://plmlab.math.cnrs.fr/econetproject/econetwork">https://plmlab.math.cnrs.fr/econetproject/econetwork</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-10-21 08:33:26 UTC; vmiele</td>
</tr>
<tr>
<td>Author:</td>
<td>Vincent Miele [aut, cre],
  Catherine Matias [ctb],
  Stephane Dray [ctb],
  Christophe Botella [ctb],
  Marc Ohlmann [ctb],
  Giovanni Poggiato [ctb],
  Wilfried Thuiller [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-10-21 14:45:18 UTC</td>
</tr>
</table>
<hr>
<h2 id='econetwork-package'>
Analyzing Ecological Networks
</h2><span id='topic+econetwork-package'></span><span id='topic+econetwork'></span>

<h3>Description</h3>

<p>A collection of advanced tools, methods and models specifically
designed  for  analyzing different  types  of  ecological  networks.
</p>


<h3>Details</h3>

<p>econetwork is designed  for  analyzing different  types  of  ecological
networks - especially  antagonistic  (food  webs,  host-parasite),
mutualistic (plant-pollinator, plant-fungus, etc.)  and competitive
networks, as well as their variability in time and space. Statistical
models are developed to describe and understand the mechanisms that
determine species interactions, and to decipher the organization of
these (multi-layer) ecological networks.
</p>


<h3>Author(s)</h3>

<p>Authors: Stephane Dray, Catherine Matias, Vincent Miele, Marc Ohlmann, Wilfried Thuiller
Maintainer: Vincent Miele &lt;vincent.miele@univ-lyon1.fr&gt;
</p>


<h3>References</h3>

<p>Marc Ohlmann, Vincent Miele, Stephane Dray, Loic Chalmandrier, Louise O'Connor &amp; Wilfried Thuiller, Diversity indices for ecological networks: a unifying framework using Hill numbers. Ecology Letters (2019) &lt;doi:10.1111/ele.13221&gt;
Ana M. Martin Gonzalez, Diego P. Vazquez, Rodrigo Ramos-Jiliberto, Sang  Hoon Lee &amp; Vincent Miele, Core-periphery structure in mutualistic networks: an epitaph for nestedness? BiorXiv (2020) &lt;doi:10.1101/2020.04.02.021691&gt;
</p>


<h3>See Also</h3>

<p><code><a href="igraph.html#topic+igraph">igraph</a></code>
<code><a href="bipartite.html#topic+bipartite">bipartite</a></code>
</p>

<hr>
<h2 id='cpness'>
Core-peripheriness measure
</h2><span id='topic+cpness'></span>

<h3>Description</h3>

<p>Computation of the cpness measure for a bipartite graph/network
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cpness(web, type=c("automatic","binary","integer","float"), plot=TRUE, fastplot=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cpness_+3A_web">web</code></td>
<td>
<p>A <code>matrix</code> with elements of a set (e.g., plants) as rows,
elements of a second set (e.g., pollinators) as columns and
number of interactions as entries. Species names can be indicated in
the row or column names.</p>
</td></tr>
<tr><td><code id="cpness_+3A_type">type</code></td>
<td>
<p>Type of matrix. This should be (an unambiguous
abbreviation of) one of <code>automatic</code> (default),
<code>binary</code>, <code>integer</code> or <code>float</code>. With <code>automatic</code>
(default), the type of matrix is automatically deduced inside the
function. Using <code>binary</code>, the matrix is binarized in any case. See the &quot;Details&quot; section.</p>
</td></tr>
<tr><td><code id="cpness_+3A_plot">plot</code></td>
<td>
<p>Plot the matrix reordered according to the core-periphery
partitioning. <code>TRUE</code> by default.</p>
</td></tr>
<tr><td><code id="cpness_+3A_fastplot">fastplot</code></td>
<td>
<p>If <code>TRUE</code>, the matrix plot is performed using the
fast <code>image</code> function instead of the <code>visweb</code> function from the
<code>bipartite</code> package, without species names. Only for large matrices. <code>FALSE</code> by default. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>In a matrix displaying a core-periphery structure, there is a species ordering (i.e. an ordering in rows and columns) such that interactions are distributed in an L-shape. This L-shape is composed by four blocks of varying connectance: block C11 represents the core; blocks C12 and C21 include the interactions between core and periphery; block C22 includes the interactions that occur between peripheral species.
</p>
<p>This fonction computes the core-peripheriness (CPness), as
CPness=(E11+E12+E21)/E, where Eij is the number of interactions
(edges)  or the sum of weights for each block (Eij for block ij) or
for the entire network (E).  Here, we rely on a stochastic block model
(SBM) to detect the four groups/blocks C11, C12, C21 and C22 when they
actually exist. However, the SBM can fail in finding these blocks: in
these cases, there is no core-periphery partition and the CPness value is set to <code>NA</code>.
</p>
<p>This function can deal with binary and weighted networks with the appropriate statistical distribution (Bernouilli for <code>binary</code> data, Poisson for <code>integer</code> weights, and Gaussian for <code>float</code> weights). Note that it is often advisable to log-transform float data before running the <code>cpness</code> function.
</p>


<h3>Value</h3>

<p><code>cpness</code> returns an object of class <code>list</code> with the following components:
</p>
<table>
<tr><td><code>cpness</code></td>
<td>
<p>The value of the core-peripheriness measure.  <code>NA</code> when no  core-periphery partition is found.</p>
</td></tr>
<tr><td><code>rowmembership</code></td>
<td>
<p>An integer <code>vector</code> indicating the group to which species in rows are belonging. Group 1 is core and group 2 is periphery, unless there is only a single group.</p>
</td></tr>
<tr><td><code>colmembership</code></td>
<td>
<p>Same as <code>rowmembership</code> for species in columns.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Authors: Vincent Miele
Maintainer: Vincent Miele &lt;vincent.miele@univ-lyon1.fr&gt;
</p>


<h3>References</h3>

<p>Ana M. Martin Gonzalez, Diego P. Vazquez, Rodrigo Ramos-Jiliberto, Sang Hoon Lee &amp; Vincent Miele, Core-periphery structure in mutualistic networks: an epitaph for nestedness? BiorXiv (2020) &lt;doi:10.1101/2020.04.02.021691&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(bipartite)
data(mosquin1967)
result &lt;- cpness(mosquin1967, type="automatic", plot=TRUE)
print(result)

data(junker2013)
result &lt;- cpness(junker2013, type="automatic", plot=TRUE, fastplot=TRUE)
print(result$cpness)
print(table(result$rowmembership))
print(table(result$colmembership))
</code></pre>

<hr>
<h2 id='disPairwise'>
Computation of the dissimilarity matrix (pairwise beta-diversity) for a set of networks
</h2><span id='topic+disPairwise'></span>

<h3>Description</h3>

<p>Computation of the dissimilarity matrix for a set of networks. Each value of the matrix is the pairwise beta-diversity, computed using Hill numbers. It measures the dissimilarity in terms of groups, links, or probability of links.  
</p>


<h3>Usage</h3>

<pre><code class='language-R'>disPairwise(gList, groups=NULL, eta=1,
            type=c('P','L','Pi'), abTable=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="disPairwise_+3A_glist">gList</code></td>
<td>
<p>A <code>list</code> of graph objects of class
<code>igraph</code>. The nodes must have a name.</p>
</td></tr>
<tr><td><code id="disPairwise_+3A_groups">groups</code></td>
<td>
<p>A named vector of class <code>character</code>  indicating the group to
which each node belongs to. The length of <code>groups</code> must correspond to the number of different nodes present in <code>gList</code>. The names <code>names(groups)</code> must
correspond to the nodes names in <code>gList</code>. If NULL, the groups are the initial nodes.</p>
</td></tr>
<tr><td><code id="disPairwise_+3A_eta">eta</code></td>
<td>
<p>A positive number that controls the weight given to abundant groups/links. Default value is 1.</p>
</td></tr>
<tr><td><code id="disPairwise_+3A_type">type</code></td>
<td>
<p>The type of diversity used to measure dissimilarity. It can be groups diversity ('P'), links diversity ('L') or probability of links diversity ('Pi').</p>
</td></tr>
<tr><td><code id="disPairwise_+3A_abtable">abTable</code></td>
<td>
<p>A matrix of size the number of nodes of the metanetwork times the number of networks. The rownames of this matrix must be the node names of metanetwork and the columns must
be in an order corresponding to gList. The element (i,j) of this matrix is the abundance of species i in network j. Importantly, the non-nul elements in each column of <code>abTalbe</code> must 
correspond to the nodes present in each element of <code>gList</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return a <code>dist</code> object whose elements are the pairwise dissimilarities. 
</p>


<h3>Author(s)</h3>

<p>Authors: Stephane Dray, Vincent Miele, Marc Ohlmann, Wilfried Thuiller
Maintainer: Wilfried Thuiller &lt;wilfried.thuiller@univ-grenoble-alpes.fr&gt;
</p>


<h3>References</h3>

<p>Marc Ohlmann, Vincent Miele, Stephane Dray, Loic Chalmandrier, Louise O'Connor &amp; Wilfried Thuiller, Diversity indices for ecological networks: a unifying framework using Hill numbers. Ecology Letters (2019) &lt;doi:10.1111/ele.13221&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generating a set of Erdos-Renyi graphs and give node names.
library(econetwork)
library(igraph)
nbGraph &lt;- 3
gList &lt;- c()
n &lt;- 57 # number of nodes of each graph
C &lt;- 0.1  # connectance of each graph
for(i in 1:nbGraph){
  graphLocal &lt;- erdos.renyi.game(n, type='gnp', p.or.m=C, directed=TRUE)
  V(graphLocal)$name &lt;- as.character(1:57)
  gList = c(gList,list(graphLocal))
}

# vector that gives the group of each node
groups &lt;- c(rep("a",23),rep("b",34))
names(groups) &lt;- as.character(1:57)
#generating random (non-nul) abundances data
abTable &lt;- sapply(1:nbGraph,function(x) rpois(n,1)+1)
rownames(abTable) = unlist(unique(lapply(gList,function(g) V(g)$name)))

# Dissimilarity matrices based on links beta-diversity
# at a node level
disPairwise(gList, type = 'L')
# at a node level while taking into account node abundances
disPairwise(gList, type = 'L', abTable = abTable)
# at a group level
disPairwise(gList, groups, type = 'L')
# at a group level while taking into account node abundances
disPairwise(gList, groups, type = 'L', abTable = abTable) 

</code></pre>

<hr>
<h2 id='divPartition'>
Partitionning network diversity in alpha, beta and gamma diversity
</h2><span id='topic+divPartition'></span>

<h3>Description</h3>

<p>This function computes alpha, beta and gamma diversity of a list of networks. It measures either group, links, or probability of links diversity. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>divPartition(gList, groups, eta=1, framework=c('RLC','Chao'),
             type=c('P','L','Pi'), abTable=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="divPartition_+3A_glist">gList</code></td>
<td>
<p>A <code>list</code> of graph objects of class
<code>igraph</code>.</p>
</td></tr>
<tr><td><code id="divPartition_+3A_groups">groups</code></td>
<td>
<p>A named vector of class <code>character</code>  indicating the group to
which each node belongs to. The length of <code>groups</code> must correspond to the number of different nodes present in <code>gList</code>. The names <code>names(groups)</code> must
correspond to the nodes names in <code>gList</code>. If NULL, the groups are the initial nodes.</p>
</td></tr>
<tr><td><code id="divPartition_+3A_eta">eta</code></td>
<td>
<p>A positive number that controls the weight given to abundant groups/links. Default value is 1.</p>
</td></tr>
<tr><td><code id="divPartition_+3A_framework">framework</code></td>
<td>
<p>The framework used to partitionate diversity, either Reeve Leinster Cobbold ('RLC') or Chao ('Chao')</p>
</td></tr>
<tr><td><code id="divPartition_+3A_type">type</code></td>
<td>
<p>The type of diversity to measure and partitionate. It can be groups diversity ('P'), link diversity ('L') or probability of link diversity ('Pi').</p>
</td></tr>
<tr><td><code id="divPartition_+3A_abtable">abTable</code></td>
<td>
<p>A matrix of size the number of nodes of the metanetwork times the number of networks. The rownames of this matrix must be the node names of metanetwork and the columns must
be in an order corresponding to gList. The element (i,j) of this matrix is the abundance of species i in network j. Importantly, the non-nul elements in each column of <code>abTalbe</code> must 
correspond to the nodes present in each element of <code>gList</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>list</code> the following components:
</p>
<table>
<tr><td><code>mAlpha</code></td>
<td>
<p>The mean value of alpha-diversity accross all networks.</p>
</td></tr>
<tr><td><code>Alphas</code></td>
<td>
<p>A vector of <code>numeric</code> containing the local alpha-diversities (i.e. the alpha-diversity value for each network).</p>
</td></tr>
<tr><td><code>Beta</code></td>
<td>
<p>The value of the overall beta-diversity</p>
</td></tr>
<tr><td><code>Gamma</code></td>
<td>
<p>The value of the gamma-diversity</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Authors: Stephane Dray, Vincent Miele, Marc Ohlmann, Wilfried Thuiller
Maintainer: Wilfried Thuiller &lt;wilfried.thuiller@univ-grenoble-alpes.fr&gt;
</p>


<h3>References</h3>

<p>Marc Ohlmann, Vincent Miele, Stephane Dray, Loic Chalmandrier, Louise O'Connor &amp; Wilfried Thuiller, Diversity indices for ecological networks: a unifying framework using Hill numbers. Ecology Letters (2019) &lt;doi:10.1111/ele.13221&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generating a set of Erdos-Renyi graphs and give node names.
library(econetwork)
library(igraph)
nbGraph &lt;- 3
gList &lt;- c()
n &lt;- 57 # number of nodes of each graph
C &lt;- 0.1  # connectance of each graph
for(i in 1:nbGraph){
  graphLocal &lt;- erdos.renyi.game(n, type='gnp', p.or.m=C, directed=TRUE)
  V(graphLocal)$name &lt;- as.character(1:57)
  gList = c(gList,list(graphLocal))
}

# vector that gives the group of each node
groups &lt;- c(rep("a",23),rep("b",34)) 
names(groups) &lt;- as.character(1:57)
# generating random (non-nul) abundances data
abTable &lt;- sapply(1:nbGraph,function(x) rpois(n,1)+1)
rownames(abTable) = unlist(unique(lapply(gList,function(g) V(g)$name)))

# Diversities in link abundances
# at a node level
divPartition(gList, framework='Chao', type = 'L')
# at a node level while taking into account node abundances
divPartition(gList, framework='Chao', type = 'L', abTable = abTable)
# at a group level
divPartition(gList, framework='Chao', groups, type = 'L')
# at a group level while taking into account node abundances
divPartition(gList, framework='Chao', groups, type = 'L', abTable = abTable)
</code></pre>

<hr>
<h2 id='elgrin'>
Teasing apart the effects of environmental variations and biotic interactions on species distributions
</h2><span id='topic+elgrin'></span>

<h3>Description</h3>

<p>ELGRIN jointly models the presence and absence of all species in a given area in function of environmental covariates and the topological structure of the known metaweb
</p>


<h3>Usage</h3>

<pre><code class='language-R'>elgrin(presence, metaweb, environmentvar, ncores=1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="elgrin_+3A_presence">presence</code></td>
<td>
<p>A <code>matrix</code> with presence/absence of species (rows) at
different locations (columns), coded in 0/1 format (1 for presence).</p>
</td></tr>
<tr><td><code id="elgrin_+3A_metaweb">metaweb</code></td>
<td>
<p>A <code>matrix</code> or a <code>igraph</code> object. This
represents the metaweb/metawnetwork of interactions as an adjacency
matrix or as a graph respectively.</p>
</td></tr>
<tr><td><code id="elgrin_+3A_environmentvar">environmentvar</code></td>
<td>
<p>A <code>matrix</code> with environmental variables (columns) at
different locations (rows).</p>
</td></tr>
<tr><td><code id="elgrin_+3A_ncores">ncores</code></td>
<td>
<p>The number of cores to use, i.e. at most how many
threads will run simultaneously. Default is 1 (no parallelization).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>ELGRIN (in reference to Charles Elton and Joseph Grinnell) can handle the effects of both environmental factors and  known ecological interactions (aka a metanetwork) on species distributions. We rely on Markov random fields, a family of flexible models that can handle dependencies between variables using a graph.
</p>


<h3>Value</h3>

<p><code>elgrin</code> returns an object of class <code>list</code> with the following components:
</p>
<table>
<tr><td><code>a</code></td>
<td>
<p>A <code>vector</code> of species intercepts.</p>
</td></tr>
<tr><td><code>al</code></td>
<td>
<p>A <code>vector</code> of location intercepts.</p>
</td></tr>
<tr><td><code>b</code></td>
<td>
<p>A <code>matrix</code> of linear environmental parameters.</p>
</td></tr>
<tr><td><code>c</code></td>
<td>
<p>A <code>matrix</code> of quadratic environmental parameters. </p>
</td></tr>
<tr><td><code>betaPres</code></td>
<td>
<p>A <code>vector</code> of co-presence strength (or avoidance when &lt;0)  at each location.</p>
</td></tr>
<tr><td><code>betaAbs</code></td>
<td>
<p>A <code>vector</code> of co-absence strength (or avoidance when &lt;0) at each location.</p>
</td></tr>
<tr><td><code>compat</code></td>
<td>
<p>A <code>matrix</code> with niche compatibility of species (rows) at
different locations (columns), coded in 0/1 format (1 for compatibility)..</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Authors: Vincent Miele
Maintainer: Vincent Miele &lt;vincent.miele@univ-lyon1.fr&gt;
</p>


<h3>References</h3>

<p>Vincent Miele, Catherine Matias, Marc Ohlmann, Giovanni Poggiato, St
ephane Dray and Wilfried Thuiller, Quantifying the overall effect of
biotic1interactions on species communities along2environmental
gradients, arXiv &lt;doi:10.48550/arXiv.2103.10433&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(virtualComCompetition)
vcom &lt;- virtualComCompetition

result &lt;- elgrin(vcom$presence, vcom$metaweb, vcom$environmentvar)
str(result)

plot(result$betaPres, result$betaAbs, xlab="Co-presence", ylab="Co-absence")
abline(h=0, col=2)
abline(v=0, col=2)

</code></pre>

<hr>
<h2 id='embedding'>
Graph embeddings for comparing trophic network architectures
</h2><span id='topic+embedding'></span>

<h3>Description</h3>

<p>Computation of different embeddings from a list of directed graphs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>embedding(gList, method="metric2vec", groups=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="embedding_+3A_glist">gList</code></td>
<td>
<p>A <code>list</code> of directed graph objects of class <code>igraph</code>. An edge must go from the predator to the prey.</p>
</td></tr>
<tr><td><code id="embedding_+3A_method">method</code></td>
<td>
<p>Embedding method. This should be (an unambiguous
abbreviation of) one of <code>"metric2vec"</code>, <code>"motif2vec"</code>,
<code>"group2vec"</code> or <code>"shortestpath2vec"</code>.</p>
</td></tr>
<tr><td><code id="embedding_+3A_groups">groups</code></td>
<td>
<p>A named vector of class <code>character</code> or
<code>integer</code> indicating the group to
which each node belongs to. The length of <code>groups</code> must correspond to the number of different nodes present in <code>gList</code>. The names <code>names(groups)</code> must
correspond to the nodes names in <code>gList</code>. If <code>NULL</code>, the groups
are not considered.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function computes a graph embedding from a list of graph.
</p>
<p>Comparing the architecture of interaction networks in space or time is
essential for understanding the assembly, trajectory, functioning and
persistence of species communities. Graph embedding methods, which
position networks into a vector space where nearby networks have
similar architectures, could be ideal tools for this purposes.
</p>
<p>Here, the proposed embedding methods are:
</p>
<p>-<code>"metric2vec"</code>: each column is a network
metric. <code>connectance</code>: network connectance,
<code>modularity</code>: network modularity (undirected graph),
<code>rangeTL</code>: trophic level range, (trophic level is computed as in Williams &amp; Martinez, 2004), 
<code>meanTL</code>: mean trophic level,
<code>SWTL</code>: shortest weighted trophic level,
<code>meanOmni</code>: mean level of omnivory (standard deviation of the
trophic levels of the prey),
<code>propOmni</code>: proportion of omnivorous species,
<code>propCanib</code>: proportion of cannibal species,
<code>meanNbPrey</code>: mean number of prey,
<code>sdNbPrey</code>: standard deviation of the number of prey,
<code>skewNbPrey</code>: skewness of the number of prey,
<code>meanNbPred</code>: mean number of predators,
<code>sdNbPred</code>: standard deviation of the number of predators,
<code>skewNbPred</code>: skewness of the number of predators,
<code>propBasal</code>: proportion of basal species (which have no prey),
<code>propTop</code>: proportion of top species (which have no predator),
<code>propInter</code>: proportion of intermediate species (which have prey and predator),
<code>sdVulnerability</code>: standard deviation of the vulnerability (i.e. in-degree),
<code>sdGeneralism</code>: standard deviation of the generalism (i.e. out-degree),
<code>transitivity</code>: network transitivity,
<code>diameter</code>: network diameter,
<code>meanSP</code>: mean shortest path,
<code>assortativity</code>: network assortativity.
</p>
<p>-<code>"motif2vec"</code>:  Graph motifs are small connected subgraphs with a well-defined
structure. Each column is the proportion of each of the 13
connected motifs as enumerated by the 'motifs' function. 
</p>
<p>-<code>"group2vec"</code>: Groups proportion, where the groups are defined
previously (e.g. taxonmic groups).
</p>
<p>-<code>"shortestpath2vec"</code>: Computing the proportion of shortest path
lengths. Can use the groups as well, path length proportion is decomposed
per source and target group in this case.
</p>


<h3>Value</h3>

<p><code>embedding</code> returns an object of class <code>matrix</code> where rows
corresponds to the differents graphs and columns to the different
dimensions in the embedding space.
</p>


<h3>Author(s)</h3>

<p>Authors: Christophe Botella, Stephane Dray, Catherine Matias, Vincent
Miele, Wilfried Thuiller
</p>
<p>Maintainer: Vincent Miele &lt;vincent.miele@univ-lyon1.fr&gt;
</p>


<h3>References</h3>

<p>Christophe Botella, Stephane Dray, Catherine Matias, Vincent Miele &amp;
Wilfried Thuiller, An appraisal of graph embeddings for comparing
trophic network architectures. Methods in Ecology and evolution (2021) &lt;doi:10.1111/2041-210X.13738&gt;
</p>
<p>Williams, Richard J., and Neo D. Martinez. &quot;Limits to trophic levels and omnivory in complex food webs: theory and data.&quot; The American Naturalist 163.3 (2004)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(igraph)
# Generating a set of graphs with 3 groups
groups = rep(-1,60)
groups[1:20] = 1
groups[21:40] = 2
groups[41:60] = 3
names(groups) = as.character(1:60)

# A first set with a few links between groups 1 and 3
gList = c()
for(i in 1:5){
    pm &lt;- rbind( c(0, .5, 0.05), c(0, 0, 0.5), c(0,0,0) )
    graphLoc &lt;- sample_sbm(60, pref.matrix=pm, block.sizes=c(20,20,20), directed=TRUE)
    V(graphLoc)$name = as.character(1:60)
    gList = c(gList,list(graphLoc))
}
# A second set with many links between groups 1 and 3
for(i in (6:10)){
    pm &lt;- rbind( c(0, .5, .5), c(0, 0, 0.5), c(0,0,0) )
    graphLoc &lt;- sample_sbm(60, pref.matrix=pm, block.sizes=c(20,20,20), directed=TRUE)
    V(graphLoc)$name = as.character(1:60)
    gList = c(gList,list(graphLoc))
}
names(gList) = LETTERS[1:10]

# Computing different embeddings and
usermfrow &lt;- par()$mfrow
par(mfrow=c(2,2))

embd &lt;- embedding(gList, method="metric2vec")
pca &lt;- prcomp(embd, rank=2)$x
plot(pca, main="metric2vec")
text(x=pca[,1], y=pca[,2], labels=rownames(embd), pos=2, col=c(rep("blue",5),rep("red",5)))

embd &lt;- embedding(gList,  method="motif2vec")
pca &lt;- prcomp(embd, rank=2)$x
plot(pca, main="motif2vec")
text(x=pca[,1], y=pca[,2], labels=rownames(embd), pos=2, col=c(rep("blue",5),rep("red",5)))

embd &lt;- embedding(gList, method="shortestpath2vec")
pca &lt;- prcomp(embd, rank=2)$x
plot(pca, main="shortestpath2vec")
text(x=pca[,1], y=pca[,2], labels=rownames(embd), pos=2, col=c(rep("blue",5),rep("red",5)))

embd &lt;- embedding(gList, method="shortestpath2vec", groups)
pca &lt;- prcomp(embd, rank=2)$x
plot(pca, main="shortestpath2vec_group")
text(x=pca[,1], y=pca[,2], labels=rownames(embd), pos=2, col=c(rep("blue",5),rep("red",5)))

par(mfrow=usermfrow)
</code></pre>

<hr>
<h2 id='getMetaweb'>
Get metaweb 
</h2><span id='topic+getMetaweb'></span>

<h3>Description</h3>

<p>Computation of the binary metaweb from a list of graph
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getMetaweb(gList)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getMetaweb_+3A_glist">gList</code></td>
<td>
<p>A <code>list</code> of graph objects of class <code>igraph</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function computes the metaweb from a list of graph. It computes the union (in the sense of graph theory) of the set of graphs.
</p>


<h3>Value</h3>

<p><code>getMetaweb</code> returns an object of class <code>igraph</code>.
</p>


<h3>Author(s)</h3>

<p>Authors: Stephane Dray, Vincent Miele, Marc Ohlmann, Wilfried Thuiller
Maintainer: Wilfried Thuiller &lt;wilfried.thuiller@univ-grenoble-alpes.fr&gt;
</p>


<h3>References</h3>

<p>Marc Ohlmann, Vincent Miele, Stephane Dray, Loic Chalmandrier, Louise O'Connor &amp; Wilfried Thuiller, Diversity indices for ecological networks: a unifying framework using Hill numbers. Ecology Letters (2019) &lt;doi:10.1111/ele.13221&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generating a set of Erdos-Renyi graphs
library(igraph)
gList &lt;- c()
for(i in 1:4){
  graphLocal &lt;- erdos.renyi.game(60, type = 'gnp', p.or.m=0.1, directed=TRUE)
  V(graphLocal)$name &lt;- as.character(1:60)
  gList &lt;- c(gList, list(graphLocal))
}
names(gList) &lt;- c("A","B","C","D")

## building the metaweb
graphMetaweb &lt;- getMetaweb(gList)
</code></pre>

<hr>
<h2 id='virtualComCompetition'>Dataset simulated with communities whose composition is driven
simultaneously by biotic (competition) and abiotic environmental effects.</h2><span id='topic+virtualComCompetition'></span>

<h3>Description</h3>

<p>50 species in interaction in a metaweb, with presence/absence data for
400 locations and a single enviromental variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(virtualComCompetition)</code></pre>


<h3>Format</h3>

<p>A list containing three objects presence, metaweb and environmentvar.</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
