<!DOCTYPE html><html><head><title>Help for package ivdesign</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ivdesign}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ACER'><p>Two-sided test for the average cluster effect ratio estimand</p></a></li>
<li><a href='#control_clusters'><p>100 matched control clusters</p></a></li>
<li><a href='#double_rank'><p>Two-sided double-rank test for Fisher's sharp null</p>
hypothesis in a cluster-level proportional treatment effect model</a></li>
<li><a href='#double_rank_CI'><p>Construct a two-sided confidence interval for the proportional</p>
treatment effect in a cluster-level proportional treatment effect model</a></li>
<li><a href='#encouraged_clusters'><p>100 matched encouraged clusters</p></a></li>
<li><a href='#PER'><p>Two-sided test for the pooled effect ratio estimand</p></a></li>
<li><a href='#PER_CI'><p>Construct a two-sided confidence interval for the pooled</p>
effect ratio</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Hypothesis Testing in Cluster-Randomized Encouragement Designs</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Author:</td>
<td>Bo Zhang</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Bo Zhang &lt;bozhan@wharton.upenn.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>An implementation of randomization-based hypothesis 
    testing for three different estimands in a cluster-randomized 
    encouragement experiment. The three estimands include (1) testing
    a cluster-level constant proportional treatment effect (Fisher's
    sharp null hypothesis), (2) pooled effect ratio, and (3) average 
    cluster effect ratio. To test the third estimand, user needs to install
    'Gurobi' (&gt;= 9.0.1) optimizer via its R API. Please refer to 
    <a href="https://www.gurobi.com/documentation/9.0/refman/ins_the_r_package.html">https://www.gurobi.com/documentation/9.0/refman/ins_the_r_package.html</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>gurobi, Matrix</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-07-13 18:37:05 UTC; ASUS</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-07-14 16:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='ACER'>Two-sided test for the average cluster effect ratio estimand</h2><span id='topic+ACER'></span>

<h3>Description</h3>

<p><code>ACER</code> tests (two-sided) if the average cluster effect
ratio (ACER) is equal to lambda.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ACER(
  num_t,
  num_c,
  R_t,
  R_c,
  d_t,
  d_c,
  lambda,
  alpha = 0.05,
  kappa = 0.1,
  gap = 0.05,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ACER_+3A_num_t">num_t</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to the number of
units in the encouraged cluster of the kth matched
pair of two clusters.</p>
</td></tr>
<tr><td><code id="ACER_+3A_num_c">num_c</code></td>
<td>
<p>A length-K vector with the kth entry equal to the number of
units in the control cluster of the kth matched
pair of two clusters.</p>
</td></tr>
<tr><td><code id="ACER_+3A_r_t">R_t</code></td>
<td>
<p>A length-K vector with kth entry equal to
the sum of unit-level outcomes in the encouraged cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="ACER_+3A_r_c">R_c</code></td>
<td>
<p>A length-K vector with the kth entry equal to
the sum of unit-level outcomes in the control cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="ACER_+3A_d_t">d_t</code></td>
<td>
<p>A length-K vector with the kth entry equal to the sum
of unit-level treatment received in the encouraged cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="ACER_+3A_d_c">d_c</code></td>
<td>
<p>A length-K vector with the kth entry equal to the sum
of unit-level treatment received in the control cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="ACER_+3A_lambda">lambda</code></td>
<td>
<p>The magnitude of the average cluster effect ratio (ACER)
to be tested.</p>
</td></tr>
<tr><td><code id="ACER_+3A_alpha">alpha</code></td>
<td>
<p>The level of the test.</p>
</td></tr>
<tr><td><code id="ACER_+3A_kappa">kappa</code></td>
<td>
<p>Minimum compliance rate.</p>
</td></tr>
<tr><td><code id="ACER_+3A_gap">gap</code></td>
<td>
<p>Relative MIP optimality gap.</p>
</td></tr>
<tr><td><code id="ACER_+3A_verbose">verbose</code></td>
<td>
<p>If true, the solver output is enabled; otherwise,
the solver output is disabled.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of three elements: the optimal solution, the optimal
objective value, and an indicator of whether or not the test
is rejected.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# To run the following example, Gurobi must be installed.

R_t = encouraged_clusters$aggregated_outcome
R_c = control_clusters$aggregated_outcome
d_t = encouraged_clusters$aggregated_treatment
d_c = control_clusters$aggregated_treatment
num_t = encouraged_clusters$number_units
num_c = control_clusters$number_units

# Test at level 0.05 if the ACER is equal
# to 0.2. Assume the minimum compliance rate across
# K clusters is at least 0.2. Set verbose = FALSE
# to suppress the output.
res = ACER(num_t, num_c, R_t, R_c, d_t, d_c,
          lambda = 0.2, alpha = 0.05, kappa = 0.2,
          verbose = FALSE)

# The test is rejected
res$Reject

## End(Not run)
</code></pre>

<hr>
<h2 id='control_clusters'>100 matched control clusters</h2><span id='topic+control_clusters'></span>

<h3>Description</h3>

<p>A dataset containing the covariates, aggregated outcome,
aggregated treatment received, number of units, and the
cluster-level IV of 100 matched control clusters. There is
a one-to-one correspondence between this 100 matched
control clusters and 100 matched encouraged clusters: the kth
control cluster is matched to the kth encouraged cluster in
<code><a href="#topic+encouraged_clusters">encouraged_clusters</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>control_clusters
</code></pre>


<h3>Format</h3>

<p>A data frame with 100 rows and 14 columns:
</p>

<dl>
<dt>V1</dt><dd><p>1st simulated covariate</p>
</dd>
<dt>V2</dt><dd><p>2nd simulated covariate</p>
</dd>
<dt>V3</dt><dd><p>3rd simulated covariate</p>
</dd>
<dt>V4</dt><dd><p>4th simulated covariate</p>
</dd>
<dt>V5</dt><dd><p>5th simulated covariate</p>
</dd>
<dt>V6</dt><dd><p>6th simulated covariate</p>
</dd>
<dt>V7</dt><dd><p>7th simulated covariate</p>
</dd>
<dt>V8</dt><dd><p>8th simulated covariate</p>
</dd>
<dt>V9</dt><dd><p>9th simulated covariate</p>
</dd>
<dt>V10</dt><dd><p>10th simulated covariate</p>
</dd>
<dt>aggregated_outcome</dt><dd><p>Total number of death in the cluster</p>
</dd>
<dt>aggregated_treatment</dt><dd><p>Total number of treatment received</p>
</dd>
<dt>number_units</dt><dd><p>Number of units in each cluster</p>
</dd>
<dt>IV</dt><dd><p>Cluster-level instrumental variable</p>
</dd>
</dl>



<h3>Source</h3>

<p>This is a simulated dataset.
</p>

<hr>
<h2 id='double_rank'>Two-sided double-rank test for Fisher's sharp null
hypothesis in a cluster-level proportional treatment effect model</h2><span id='topic+double_rank'></span>

<h3>Description</h3>

<p><code>double_rank</code> returns the two-sided p-value testing
Fisher's sharp null hypothesis in a cluster-level proportional
treatment effect model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>double_rank(beta_0, R_t, R_c, d_t, d_c, Z_t, Z_c, psi = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="double_rank_+3A_beta_0">beta_0</code></td>
<td>
<p>The magnitude of the proportional treatment effect to
be tested.</p>
</td></tr>
<tr><td><code id="double_rank_+3A_r_t">R_t</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to
the sum of unit-level outcomes in the encouraged cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="double_rank_+3A_r_c">R_c</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to
the sum of unit-level outcomes in the control cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="double_rank_+3A_d_t">d_t</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to the sum of unit-level
treatment received in the encouraged cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="double_rank_+3A_d_c">d_c</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to the sum of unit-level
treatment received in the control cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="double_rank_+3A_z_t">Z_t</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to the encoruagement dose,
i.e., the magnitude of the instrumental variable, of the
encouraged cluster in the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="double_rank_+3A_z_c">Z_c</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to the encoruagement dose,
i.e., the magnitude of the instrumental variable, of the
control cluster in the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="double_rank_+3A_psi">psi</code></td>
<td>
<p>A function specifying the score used in the test statistic.
See Details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Double-rank test statistics is a flexible family of nonparametric
test statistics. Function <code>psi</code> is a function that specifies
the relationship between d_k, the normalized rank of the absolute
treated-minus-control dose difference in the instrumental variable,
and q_k, the normalized rank of the absoluve treated-minus-control
dose difference in the observed outcome. For instance, psi(d_k, q_k)
= 1 yields the sign test, psi(d_k, q_k) = q_k yields the Wilcoxon
signed rank test. The default setting, psi(d_k, q_k) = d_k * q_k, yields
the dose-weighted signed rank test.
</p>


<h3>Value</h3>

<p>A list of five elements: two-sided p-value, deviate, test statistics,
expectation of the test statistic under the null hypothesis,
and variance of the test statistic under the null hypothesis.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>R_t = encouraged_clusters$aggregated_outcome
R_c = control_clusters$aggregated_outcome
d_t = encouraged_clusters$aggregated_treatment
d_c = control_clusters$aggregated_treatment
Z_t = encouraged_clusters$IV
Z_c = control_clusters$IV


# Test beta = 0 in the proportional treatment effect
# model with the help of the double rank test using
# default psi(d_k, q_k) = d_k * q_k:
res = double_rank(0, R_t, R_c, d_t, d_c, Z_t, Z_c)

# Define a new psi function: psi(d_k, q_k) = q_k
psi_2 &lt;- function(x, y) y

# Using psi_2 and the double rank test is reduced to the
#Wilcoxon signed rank test.
res_2 = double_rank(0, R_t, R_c, d_t, d_c,
     Z_t, Z_c, psi = psi_2)


</code></pre>

<hr>
<h2 id='double_rank_CI'>Construct a two-sided confidence interval for the proportional
treatment effect in a cluster-level proportional treatment effect model</h2><span id='topic+double_rank_CI'></span>

<h3>Description</h3>

<p><code>double_rank_CI</code> returns the two-sided level-alpha confidence
interval of the proportional treatment effect in a cluster-level
proportional treatment effect model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>double_rank_CI(
  R_t,
  R_c,
  d_t,
  d_c,
  Z_t,
  Z_c,
  lower,
  upper,
  meshsize = 0.001,
  psi = NULL,
  alpha = 0.05
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="double_rank_CI_+3A_r_t">R_t</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to
the sum of unit-level outcomes in the encouraged cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="double_rank_CI_+3A_r_c">R_c</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to
the sum of unit-level outcomes in the control cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="double_rank_CI_+3A_d_t">d_t</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to the sum of unit-level
treatment received in the encouraged cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="double_rank_CI_+3A_d_c">d_c</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to the sum of unit-level
treatment received in the control cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="double_rank_CI_+3A_z_t">Z_t</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to the encoruagement dose,
i.e., the magnitude of the instrumental variable, of the
encouraged cluster in the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="double_rank_CI_+3A_z_c">Z_c</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to the encoruagement dose,
i.e., the magnitude of the instrumental variable, of the
control cluster in the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="double_rank_CI_+3A_lower">lower</code>, <code id="double_rank_CI_+3A_upper">upper</code></td>
<td>
<p>The lower and upper endpoints of the interval to be searched.</p>
</td></tr>
<tr><td><code id="double_rank_CI_+3A_meshsize">meshsize</code></td>
<td>
<p>The meshsize of the grid search.</p>
</td></tr>
<tr><td><code id="double_rank_CI_+3A_psi">psi</code></td>
<td>
<p>A function specifying the score used in the test statistic.
See Details of <code><a href="#topic+double_rank">double_rank</a></code>.</p>
</td></tr>
<tr><td><code id="double_rank_CI_+3A_alpha">alpha</code></td>
<td>
<p>The level of the confidence interval.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>double_rank_CI</code> constructs a two-sided level-alpha confidence interval
by interting the hypothesis test using a double_rank test. Function
<code>double_rank_CI</code> conducts a grid search with user-specified endpoints
and meshsize in order to construct the confidence interval. For more
details on the double_rank test, see <code><a href="#topic+double_rank">double_rank</a></code>.
</p>


<h3>Value</h3>

<p>A length-2 vector of two endpoints of the confidence interval.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
R_t = encouraged_clusters$aggregated_outcome
R_c = control_clusters$aggregated_outcome
d_t = encouraged_clusters$aggregated_treatment
d_c = control_clusters$aggregated_treatment
Z_t = encouraged_clusters$IV
Z_c = control_clusters$IV


# Construct a level 0.05 CI for the constant proportional
# treatment effect with the help of the double rank test using
# default psi(d_k, q_k) = d_k * q_k. Search from -0.1 to 0.1:
CI = double_rank_CI(R_t, R_c, d_t, d_c, Z_t, Z_c,
                    lower = -0.1, upper = 0.1)


</code></pre>

<hr>
<h2 id='encouraged_clusters'>100 matched encouraged clusters</h2><span id='topic+encouraged_clusters'></span>

<h3>Description</h3>

<p>A dataset containing the covariates, aggregated outcome,
aggregated treatment received, number of units, and the
cluster-level IV of 100 matched encouraged clusters. There is
a one-to-one correspondence between this 100 matched
encouraged clusters and 100 matched control clusters: the kth
encouraged cluster is matched to the kth control cluster in
<code><a href="#topic+control_clusters">control_clusters</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>encouraged_clusters
</code></pre>


<h3>Format</h3>

<p>A data frame with 100 rows and 14 columns:
</p>

<dl>
<dt>V1</dt><dd><p>1st simulated covariate</p>
</dd>
<dt>V2</dt><dd><p>2nd simulated covariate</p>
</dd>
<dt>V3</dt><dd><p>3rd simulated covariate</p>
</dd>
<dt>V4</dt><dd><p>4th simulated covariate</p>
</dd>
<dt>V5</dt><dd><p>5th simulated covariate</p>
</dd>
<dt>V6</dt><dd><p>6th simulated covariate</p>
</dd>
<dt>V7</dt><dd><p>7th simulated covariate</p>
</dd>
<dt>V8</dt><dd><p>8th simulated covariate</p>
</dd>
<dt>V9</dt><dd><p>9th simulated covariate</p>
</dd>
<dt>V10</dt><dd><p>10th simulated covariate</p>
</dd>
<dt>aggregated_outcome</dt><dd><p>Total number of death in the cluster</p>
</dd>
<dt>aggregated_treatment</dt><dd><p>Total number of treatment received</p>
</dd>
<dt>number_units</dt><dd><p>Number of units in each cluster</p>
</dd>
<dt>IV</dt><dd><p>Cluster-level instrumental variable</p>
</dd>
</dl>



<h3>Source</h3>

<p>This is a simulated dataset.
</p>

<hr>
<h2 id='PER'>Two-sided test for the pooled effect ratio estimand</h2><span id='topic+PER'></span>

<h3>Description</h3>

<p><code>PER</code> returns the two-sided p-value testing
the pooled effect ratio equal to lambda_0 in a cluster-randomized
encouragement experiment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PER(lambda_0, R_t, R_c, d_t, d_c, Q = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="PER_+3A_lambda_0">lambda_0</code></td>
<td>
<p>The magnitude of the pooled effect ratio estimand to
be tested.</p>
</td></tr>
<tr><td><code id="PER_+3A_r_t">R_t</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to
the sum of unit-level outcomes in the encouraged cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="PER_+3A_r_c">R_c</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to
the sum of unit-level outcomes in the control cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="PER_+3A_d_t">d_t</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to the sum of unit-level
treatment received in the encouraged cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="PER_+3A_d_c">d_c</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to the sum of unit-level
treatment received in the control cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="PER_+3A_q">Q</code></td>
<td>
<p>A K times p design matrix containing the covariate information.
See Details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Q is used to construct a regression-assisted variance estimator.
Q is can in principle be any K times p design matrix such that p &lt; K.
When Q is a column vector of 1's, the variance estimator is the classical
sample variance estimator. More generally, Q may contain any cluster-level
or even unit-level covariate information that are predictive of the
encouraged-minus-control difference in the observed aggregated outcomes.
</p>


<h3>Value</h3>

<p>A list of five elements: two-sided p-value, deviate, test statistics,
expectation of the test statistic under the null hypothesis,
and variance of the test statistic under the null hypothesis.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>R_t = encouraged_clusters$aggregated_outcome
R_c = control_clusters$aggregated_outcome
d_t = encouraged_clusters$aggregated_treatment
d_c = control_clusters$aggregated_treatment


# Test the pooled effect ratio estimand lambda = 0 using
# the default sample variance estimator, i.e., setting Q = NULL.
res = PER(0, R_t, R_c, d_t, d_c)

# We may leverage observed covariates from both the encouraged
# and control clusters to construct less conservative variance
# estimator. The variance estimator will be less conservative if
# these covariate predict the treated-minus-control difference
# in the outcome. In this illustrated dataset, V1-V10 are simulated
# white noise; it is not surprising that they do not help
# reduce the variance.
Q = cbind(encouraged_clusters[,1:10], control_clusters[,1:10])
res_2 = PER(0, R_t, R_c, d_t, d_c, Q)

</code></pre>

<hr>
<h2 id='PER_CI'>Construct a two-sided confidence interval for the pooled
effect ratio</h2><span id='topic+PER_CI'></span>

<h3>Description</h3>

<p><code>PER_CI</code> returns the two-sided level-alpha confidence
interval of the pooled effect ratio in a cluster-randomized
encouragement experiment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PER_CI(
  R_t,
  R_c,
  d_t,
  d_c,
  lower,
  upper,
  Q = NULL,
  meshsize = 0.001,
  alpha = 0.05
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="PER_CI_+3A_r_t">R_t</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to
the sum of unit-level outcomes in the encouraged cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="PER_CI_+3A_r_c">R_c</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to
the sum of unit-level outcomes in the control cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="PER_CI_+3A_d_t">d_t</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to the sum of unit-level
treatment received in the encouraged cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="PER_CI_+3A_d_c">d_c</code></td>
<td>
<p>A length-K vector where K is equal to the number of
clusters and the kth entry equal to the sum of unit-level
treatment received in the control cluster
of the kth matched pair of two clusters.</p>
</td></tr>
<tr><td><code id="PER_CI_+3A_lower">lower</code>, <code id="PER_CI_+3A_upper">upper</code></td>
<td>
<p>The lower and upper endpoints of the interval to be searched.</p>
</td></tr>
<tr><td><code id="PER_CI_+3A_q">Q</code></td>
<td>
<p>A K times p design matrix containing the covariate information.
See Details of the function <code><a href="#topic+PER">PER</a></code>.</p>
</td></tr>
<tr><td><code id="PER_CI_+3A_meshsize">meshsize</code></td>
<td>
<p>The meshsize of the grid search.</p>
</td></tr>
<tr><td><code id="PER_CI_+3A_alpha">alpha</code></td>
<td>
<p>The level of the confidence interval.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>PER_CI</code> constructs a two-sided level-alpha confidence interval
by interting the corresponding hypothesis test for the pooled effect
ratio. See <code><a href="#topic+PER">PER</a></code> for details on the hypothesis tesing.
<code>PER_CI</code> conducts a grid search with user-specified endpoints
and meshsize in order to construct the confidence interval.
</p>


<h3>Value</h3>

<p>A length-2 vector of two endpoints of the confidence interval.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>R_t = encouraged_clusters$aggregated_outcome
R_c = control_clusters$aggregated_outcome
d_t = encouraged_clusters$aggregated_treatment
d_c = control_clusters$aggregated_treatment

# Construct 95% CI for the pooled effect ratio estimand
# using the default sample variance estimator, i.e.,
# setting Q = NULL.
CI = PER_CI(R_t, R_c, d_t, d_c, lower = -0.1, upper = 0.1,
           alpha = 0.05)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
