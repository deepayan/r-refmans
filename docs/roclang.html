<!DOCTYPE html><html><head><title>Help for package roclang</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {roclang}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#roclang-package'><p>roclang: A package for diffusing function documentations into 'roxygen' comments</p></a></li>
<li><a href='#extract_roc_text'><p>Extract a section, parameter or set of dot-parameters from a function documentation</p></a></li>
<li><a href='#roc_eval_text'><p>Generate Rd from text with evaluated inline code and code blocks</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Functions for Diffusing Function Documentations into 'Roxygen'
Comments</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.2</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Xiurui Zhu &lt;zxr6@163.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Efficient diffusing of content across function documentations. Sections, parameters or dot parameters are extracted from function documentations and turned into valid Rd character strings, which are ready to diffuse into the 'roxygen' comments of another function by inserting inline code. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr (&ge; 1.0.2), tidyr (&ge; 1.1.2), purrr (&ge; 0.3.4), tibble
(&ge; 3.0.4), stringr (&ge; 1.4.0), magrittr (&ge; 2.0.1), rlang (&ge;
0.4.10), roxygen2 (&ge; 7.1.1), methods (&ge; 4.0.0), utils (&ge;
4.0.0), rex (&ge; 1.2.0)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/zhuxr11/roclang">https://github.com/zhuxr11/roclang</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/zhuxr11/roclang/issues">https://github.com/zhuxr11/roclang/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-05-26 11:39:33 UTC; Xiurui Zhu</td>
</tr>
<tr>
<td>Author:</td>
<td>Xiurui Zhu [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-05-26 12:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='roclang-package'>roclang: A package for diffusing function documentations into 'roxygen' comments</h2><span id='topic+roclang-package'></span><span id='topic+roclang'></span>

<h3>Description</h3>

<p>The 'roclang' package facilitates efficient diffusing of content across function documentations.
Sections, parameters or dot parameters are extracted from function documentations and turned into valid Rd character strings,
which are ready to diffuse into the 'roxygen' comments of another function by inserting inline code.
</p>


<h3>Functions</h3>


<ul>
<li><p> Text extraction and manipulation function: <code><a href="#topic+extract_roc_text">extract_roc_text</a></code>.
</p>
</li>
<li><p> Rd evaluation and compilation function: <code><a href="#topic+roc_eval_text">roc_eval_text</a></code>.
</p>
</li></ul>



<h3>Note</h3>

<p>Change log:
</p>

<ul>
<li><p>0.1.1 Xiurui Zhu - Initiate the document.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Xiurui Zhu
</p>

<hr>
<h2 id='extract_roc_text'>Extract a section, parameter or set of dot-parameters from a function documentation</h2><span id='topic+extract_roc_text'></span>

<h3>Description</h3>

<p><code>extract_roc_text</code> cites sections or parameters from a function documentation
in the syntax of <code>@inherit</code>, <code>@inheritSection</code>, <code>@inheritParams</code> or <code>@inheritDotParams</code> tag
from <code><a href="roxygen2.html#topic+roxygen2">roxygen2</a></code> package. See details about how to use this function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_roc_text(
  fun,
  type = c("general", "section", "param", "dot_params"),
  select = NULL,
  capitalize = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_roc_text_+3A_fun">fun</code></td>
<td>
<p>Function or character (of length 1L) indicating function name.</p>
</td></tr>
<tr><td><code id="extract_roc_text_+3A_type">type</code></td>
<td>
<p>Type of extraction. Please choose one from the following table
according to the <code>@tag</code> you would otherwise use if you would like to inherit
the section, parameter or set of dot-parameters as a whole:</p>

<table>
<tr>
 <td style="text-align: center;">
   <code>@tag</code> you would use </td><td style="text-align: center;"> <code>type</code> you should choose </td>
</tr>
<tr>
 <td style="text-align: center;">
   <code>@inherit</code> </td><td style="text-align: center;"> <code>"general"</code> </td>
</tr>
<tr>
 <td style="text-align: center;">
   <code>@inheritSection</code> </td><td style="text-align: center;"> <code>"section"</code> </td>
</tr>
<tr>
 <td style="text-align: center;">
   <code>@inheritParams</code> </td><td style="text-align: center;"> <code>"param"</code> </td>
</tr>
<tr>
 <td style="text-align: center;">
   <code>@inheritDotParams</code> </td><td style="text-align: center;"> <code>"dot_params"</code> </td>
</tr>
<tr>
 <td style="text-align: center;">
</td>
</tr>

</table>
</td></tr>
<tr><td><code id="extract_roc_text_+3A_select">select</code></td>
<td>
<p>Selection of extraction based on <code>type</code>.
</p>

<dl>
<dt><code>type = "general"</code></dt><dd><p>Character (of length 1L) indicating the section to extract</p>
</dd>
<dt><code>type = "section"</code></dt><dd><p>Character (of length 1L) indicating the section title to extract</p>
</dd>
<dt><code>type = "param"</code></dt><dd><p>Character (of length 1L) indicating the name of parameter to extract</p>
</dd>
<dt><code>type = "dot_params"</code></dt><dd><p>Character (of length 1L) or character vector to add or remove (with &quot;-&quot;) parameters as <code>@inheritDotParams</code>;
if character vector provided, the elements are concatenated with spaces just as <code>@inheritDotParams</code> syntax,
e.g. <code>"x y"</code> to inherit two parameters, <code>"-z"</code> to remove a parameter or <code>c("-x", "-y")</code> to remove two parameters</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="extract_roc_text_+3A_capitalize">capitalize</code></td>
<td>
<p>Logical (of length 1L) indicating whether the first letter of the return should be capitalized.
Default to <code>capitalize = NA</code>, in which case the first letter of the return is left as is.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To diffuse the function output into <code><a href="roxygen2.html#topic+roxygen2">roxygen2</a></code> comments,
one may write the function documentation with inline code like this:
</p>
<pre>
#' Diffusion of function documentation with inline code
#'
#' @return Same as \code{\link[stats]{lm}}:
#' `r extract_roc_text(stats::lm, type = "general", select = "return")`
my_fun &lt;- function() {}
</pre>
<p>or with code block like this:
</p>
<pre>
#' Diffusion of function documentation with code block
#'
#' @param lm_arg Named list of
#' ```{r}
#' extract_roc_text(stats::lm,
#'                  type = "dot_params",
#'                  select = c("-formula", "-data"),
#'                  capitalize = FALSE)
#' ```
my_fun &lt;- function(lm_arg) {}
</pre>


<h3>Value</h3>

<p>Character (of length 1L) as a valid Rd character string to diffuse into <code><a href="roxygen2.html#topic+roxygen2">roxygen2</a></code> comments.
</p>


<h3>Note</h3>

<p>Change log:
</p>

<ul>
<li><p>0.1.0 Xiurui Zhu - Initiate the function.
</p>
</li>
<li><p>0.1.1 Xiurui Zhu - Change the default of <code>capitalize</code> from <code>TRUE</code> to <code>NA</code>.
</p>
</li>
<li><p>0.1.1 Xiurui Zhu - Improve code security in evaluating the formal arguments of <code>fun</code>.
</p>
</li>
<li><p>0.2.0 Xiurui Zhu - Make changes for <code>roxygen2 &gt; 7.1.2</code> while keeping compatibility.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Xiurui Zhu
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Inherit a standard section, and leave the first letter as is
cat(
  extract_roc_text(stats::lm,
                   type = "general",
                   select = "description",
                   capitalize = NA)
)

# Inherit a self-defined section, and capitalize the first letter
cat(
  extract_roc_text(stats::lm,
                   type = "section",
                   select = "Using time series",
                   capitalize = TRUE)
)

# Inherit a parameter, and diffuse it into text
cat(
  paste0(
    "Here is the `formula` argument of `stats::lm`, defined as: ",
    extract_roc_text(stats::lm,
                     type = "param",
                     select = "formula",
                     capitalize = FALSE)
  )
)

# Inherit a set of dot params, and diffuse it into text
cat(
  paste0(
    "`lm_arg` is a named list of ",
    extract_roc_text(stats::lm,
                     type = "dot_params",
                     select = c("-formula", "-data"),
                     capitalize = FALSE)
  )
)
</code></pre>

<hr>
<h2 id='roc_eval_text'>Generate Rd from text with evaluated inline code and code blocks</h2><span id='topic+roc_eval_text'></span>

<h3>Description</h3>

<p><code>roc_eval_text</code> is an upgraded version of <code><a href="roxygen2.html#topic+roc_proc_text">roc_proc_text</a></code>
that evaluates inline and block code before generating Rd.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>roc_eval_text(roclet, input)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="roc_eval_text_+3A_roclet">roclet</code></td>
<td>
<p>Name of roclet to use for processing.</p>
</td></tr>
<tr><td><code id="roc_eval_text_+3A_input">input</code></td>
<td>
<p>Source string</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with names as <code>fun_name.Rd</code>, where each element is the <code><a href="roxygen2.html#topic+RoxyTopic">RoxyTopic</a></code> for
the corresponding function, same as the return of <code><a href="roxygen2.html#topic+roc_proc_text">roc_proc_text</a></code>.
</p>


<h3>Note</h3>

<p>Change log:
</p>

<ul>
<li><p>0.1.0 Xiurui Zhu - Initiate the function.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Xiurui Zhu
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Formulate a text version of a function with documentation
fun_text &lt;- '
#\' \\code{iris} is a `r nrow(iris)`-row matrix.
#\'
#\' \\code{iris} matrix has
#\' ```{r results="hold"}
#\' ncol(iris)
#\' ```
#\' columns.
print_iris &lt;- function() iris
'

# Parse the 'roxygen' comments to Rd documentation
roc_eval_text(roxygen2::rd_roclet(), fun_text)[[1L]]
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
