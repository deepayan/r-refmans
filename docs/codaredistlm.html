<!DOCTYPE html><html><head><title>Help for package codaredistlm</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {codaredistlm}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#append_ilr_coords'><p>Add ILR coordinates to a data.frame containing composition variables</p></a></li>
<li><a href='#check_input_args'><p>Sanity checks for arguments passed to predict_delta_comps()</p></a></li>
<li><a href='#check_strictly_positive_vals'><p>Check if compositional variable are strictly greater than 0</p></a></li>
<li><a href='#cols_exist'><p>Check whether columns exist in a data.frame</p></a></li>
<li><a href='#compare_two_lm'><p>Statistical test of the collective significance of the ilr variables</p></a></li>
<li><a href='#create_comparison_matrix'><p>Creates row-wise perturbations of compositions from the mean composition</p></a></li>
<li><a href='#create_v_mat'><p>Create ilr basis matrix (V)</p></a></li>
<li><a href='#extract_lm_quantities'><p>Extract critical quantities from a lm object (for confidence interval calculations)</p></a></li>
<li><a href='#fairclough'><p>Data from Fairclough (2017). Fitness, fatness and the reallocation of time between children's daily movement behaviours: an analysis of compositional data</p></a></li>
<li><a href='#fat_data'><p>Randomly generated data to simulate child fat percentage regressed on time-use compositional data</p></a></li>
<li><a href='#fit_lm'><p>fit linear model based on input data.frame</p></a></li>
<li><a href='#is_deltacomp_obj'><p>Is object that is returned from <code>pred_delta_comps()</code>?</p></a></li>
<li><a href='#is_lm_mod'><p>Is object that is returned from <code>lm()</code>?</p></a></li>
<li><a href='#is_null_or_na'><p>Catch NULL, empty and objects containing NAs</p></a></li>
<li><a href='#plot_delta_comp'><p>Plot redistributed time-use predictions from compositional ilr multiple linear regression model fit</p></a></li>
<li><a href='#predict_delta_comps'><p>Get predictions from compositional ilr multiple linear regression model</p></a></li>
<li><a href='#print_ilr_trans'><p>Print the ilr transformation of provided composition parts to console</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Compositional Data Linear Models with Composition Redistribution</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-12-22</td>
</tr>
<tr>
<td>Description:</td>
<td>Provided data containing an outcome variable, compositional variables and additional covariates (optional); linearly regress the outcome variable on an isometric log ratio (ilr) transformation of the linearly dependent compositional variables. The package provides predictions (with confidence intervals) in the change (delta) in the outcome/response variable based on the multiple linear regression model and evenly spaced reallocations of the compositional values. The compositional data analysis approach implemented is outlined in Dumuid et al. (2017a) &lt;<a href="https://doi.org/10.1177%2F0962280217710835">doi:10.1177/0962280217710835</a>&gt; and Dumuid et al. (2017b) &lt;<a href="https://doi.org/10.1177%2F0962280217737805">doi:10.1177/0962280217737805</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/tystan/codaredistlm">https://github.com/tystan/codaredistlm</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/tystan/codaredistlm/issues">https://github.com/tystan/codaredistlm/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>compositions, ggplot2, broom, knitr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-12-21 13:50:45 UTC; ty</td>
</tr>
<tr>
<td>Author:</td>
<td>Ty Stanford <a href="https://orcid.org/0000-0002-8570-5493"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Charlotte Lund Rasmussen
    <a href="https://orcid.org/0000-0003-2193-5019"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Dot Dumuid <a href="https://orcid.org/0000-0003-3057-0963"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ty Stanford &lt;tystan@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-12-22 19:50:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='append_ilr_coords'>Add ILR coordinates to a data.frame containing composition variables</h2><span id='topic+append_ilr_coords'></span>

<h3>Description</h3>

<p>Add ILR coordinates to a data.frame containing composition variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>append_ilr_coords(dataf, comps, psi)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="append_ilr_coords_+3A_dataf">dataf</code></td>
<td>
<p>data.frame containing composition variables</p>
</td></tr>
<tr><td><code id="append_ilr_coords_+3A_comps">comps</code></td>
<td>
<p>character vector of composition variable names in dataf</p>
</td></tr>
<tr><td><code id="append_ilr_coords_+3A_psi">psi</code></td>
<td>
<p>ilrBase passed to <code>compositions::ilr()</code></p>
</td></tr>
</table>

<hr>
<h2 id='check_input_args'>Sanity checks for arguments passed to predict_delta_comps()</h2><span id='topic+check_input_args'></span>

<h3>Description</h3>

<p>Sanity checks for arguments passed to predict_delta_comps()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_input_args(dataf, y, comps, covars, deltas)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_input_args_+3A_dataf">dataf</code></td>
<td>
<p>A <code>data.frame</code> containing data</p>
</td></tr>
<tr><td><code id="check_input_args_+3A_y">y</code></td>
<td>
<p>Name (as string/character vector of length 1) of outcome variable in <code>dataf</code></p>
</td></tr>
<tr><td><code id="check_input_args_+3A_comps">comps</code></td>
<td>
<p>Character vector of names of compositions in <code>dataf</code>. See details for more information.</p>
</td></tr>
<tr><td><code id="check_input_args_+3A_covars">covars</code></td>
<td>
<p>Character vector of covariates names  (non-comp variables) in <code>dataf</code> or NULL for none (default).</p>
</td></tr>
<tr><td><code id="check_input_args_+3A_deltas">deltas</code></td>
<td>
<p>A vector of time-component changes (as proportions of compositions , i.e., values between -1 and 1). Optional.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Throws errors for any problematic input. Returns <code>TRUE</code> invisibly if no issues found.
</p>

<hr>
<h2 id='check_strictly_positive_vals'>Check if compositional variable are strictly greater than 0</h2><span id='topic+check_strictly_positive_vals'></span>

<h3>Description</h3>

<p>Check if compositional variable are strictly greater than 0
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_strictly_positive_vals(dataf, comps, tol = 1e-06)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_strictly_positive_vals_+3A_dataf">dataf</code></td>
<td>
<p>data.frame containing composition variables</p>
</td></tr>
<tr><td><code id="check_strictly_positive_vals_+3A_comps">comps</code></td>
<td>
<p>character vector of composition variable names in dataf</p>
</td></tr>
<tr><td><code id="check_strictly_positive_vals_+3A_tol">tol</code></td>
<td>
<p>a numeric value that compositional values are expected to be greater or equal than. 1e-6 is deafult</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If any compositional values are found to be strictly less than <code>tol</code> and erro is thrown. 
Returns <code>TRUE</code> invisibly otherwise.
</p>

<hr>
<h2 id='cols_exist'>Check whether columns exist in a data.frame</h2><span id='topic+cols_exist'></span>

<h3>Description</h3>

<p>Check whether columns exist in a data.frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cols_exist(dataf, cols)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cols_exist_+3A_dataf">dataf</code></td>
<td>
<p>a data.frame</p>
</td></tr>
<tr><td><code id="cols_exist_+3A_cols">cols</code></td>
<td>
<p>character vector of columns to be checked in <code>dataf</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An error if all <code>cols</code> not present in <code>dataf</code>. 
Returns <code>TRUE</code> invisibly otherwise.
</p>

<hr>
<h2 id='compare_two_lm'>Statistical test of the collective significance of the ilr variables</h2><span id='topic+compare_two_lm'></span>

<h3>Description</h3>

<p>Statistical test of the collective significance of the ilr variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compare_two_lm(y_str, X1, X2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compare_two_lm_+3A_y_str">y_str</code></td>
<td>
<p>a string representation of the column in <code>X1</code> (and <code>X2</code>)
that is the outcome</p>
</td></tr>
<tr><td><code id="compare_two_lm_+3A_x1">X1</code></td>
<td>
<p>a data.frame or matrix that contains a subset of the predictor variables
in <code>X2</code> and outcome variable</p>
</td></tr>
<tr><td><code id="compare_two_lm_+3A_x2">X2</code></td>
<td>
<p>a data.frame or matrix that contains the predictor variables and outcome
variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>NULL</code> invisibly. The ANOVA analysis is printed to the console, that is,
the statistical test of whether the additional predictors in <code>X2</code> improve the
model significantly from the model with only the subset of predictors in <code>X1</code>.
</p>

<hr>
<h2 id='create_comparison_matrix'>Creates row-wise perturbations of compositions from the mean composition</h2><span id='topic+create_comparison_matrix'></span>

<h3>Description</h3>

<p>Creates row-wise perturbations of compositions from the mean composition
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_comparison_matrix(comparisons, comps, mean_comps)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_comparison_matrix_+3A_comparisons">comparisons</code></td>
<td>
<p>currently two choices:  <code>"one-v-one"</code> or  <code>"prop-realloc"</code> (default).</p>
</td></tr>
<tr><td><code id="create_comparison_matrix_+3A_comps">comps</code></td>
<td>
<p>the names (character vector) of the compositional variables</p>
</td></tr>
<tr><td><code id="create_comparison_matrix_+3A_mean_comps">mean_comps</code></td>
<td>
<p>the mean composition of <code>comps</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>comparisons = "one-v-one"</code> creates a matrix with <code>length(comps)</code> columns and <code>length(comps) * (length(comps) - 1)</code> rows. 
The rows contain all pairs of variables with 1 and -1 values.
</p>
<p><code>comparisons = "prop-realloc"</code> creates a matrix with <code>length(comps)</code> columns and <code>length(comps)</code> rows. 
Each rows contains a 1 value for a compositional variable and the remaining values sum to -1 proportional to the <code>mean_comps</code> value for those variables. 
</p>
<p>Note that for both <code>comparisons</code> options the net change is 0 (each row sums to 0).
</p>

<hr>
<h2 id='create_v_mat'>Create ilr basis matrix (V)</h2><span id='topic+create_v_mat'></span>

<h3>Description</h3>

<p>Create ilr basis matrix (V)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_v_mat(n_comp)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_v_mat_+3A_n_comp">n_comp</code></td>
<td>
<p>the number of compositional variables</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>n_comp</code> by <code>n_comp - 1</code> matrix where each column relates to one ilr variable
</p>
<p>The ilr basis made so that the numerator (<code>+</code> values) for the <code>i</code>th column is in the <code>i</code>th row. 
All values below the <code>+</code> value in the column are set to <code>-1</code> (the denominator).
</p>
<p>The ilr basis for 3 compositional vars is 
<code>(2, -1, -1)/sqrt(6), (0, 1, -1)/sqrt(2)</code>.
</p>
<p>The ilr basis for 4 comp vars is 
<code>(3, -1, -1, -1)/sqrt(12), (0, 2, -1, -1)/sqrt(6), (0, 0, 1, -1)/sqrt(2)</code>.
</p>
<p>etc
</p>

<hr>
<h2 id='extract_lm_quantities'>Extract critical quantities from a lm object (for confidence interval calculations)</h2><span id='topic+extract_lm_quantities'></span>

<h3>Description</h3>

<p>Extract critical quantities from a lm object (for confidence interval calculations)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_lm_quantities(lm_X, alpha = 0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_lm_quantities_+3A_lm_x">lm_X</code></td>
<td>
<p>a lm object</p>
</td></tr>
<tr><td><code id="extract_lm_quantities_+3A_alpha">alpha</code></td>
<td>
<p>level of significance. Defaults to 0.05.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the <code>lm</code> model matrix (<code>dmX</code>), 
the inverse of <code>t(dmX) x dmX</code> (<code>XtX_inv</code>), 
the standard error (<code>s_e</code>),
the estimated single column beta matrix (<code>beta_hat</code>), and
the critical value of the relevant degrees of freedom t-dist (<code>crit_val</code>).
</p>

<hr>
<h2 id='fairclough'>Data from Fairclough (2017). Fitness, fatness and the reallocation of time between children's daily movement behaviours: an analysis of compositional data</h2><span id='topic+fairclough'></span>

<h3>Description</h3>

<p>A dataset containing z_bmi (outcome), time-use compositions (sl,sb,lpa,mvpa), and covariates
from the Fairclough (2017) paper. The data can be found in supp file 7 of the paper
at https://link.springer.com/article/10.1186/s12966-017-0521-z.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(fairclough)
</code></pre>


<h3>Format</h3>

<p>A data frame with 169 rows and 21 variables
</p>


<h3>Details</h3>

<p>The variables in the data are as follows:
</p>

<ul>
<li><p>  child_id
</p>
</li>
<li><p>  school
</p>
</li>
<li><p>  sex
</p>
</li>
<li><p>  decimal_age
</p>
</li>
<li><p>  imd_decile
</p>
</li>
<li><p>  height mass
</p>
</li>
<li><p>  bmi
</p>
</li>
<li><p>  z_bmi
</p>
</li>
<li><p>  itof_grade
</p>
</li>
<li><p>  waist_circ
</p>
</li>
<li><p>  whtr
</p>
</li>
<li><p>  shuttles_20m
</p>
</li>
<li><p>  wear_time
</p>
</li>
<li><p>  sed
</p>
</li>
<li><p>  lpa
</p>
</li>
<li><p>  mpa
</p>
</li>
<li><p>  vpa
</p>
</li>
<li><p>  mvpa
</p>
</li>
<li><p>  sleep
</p>
</li>
<li><p>  min_in_day
</p>
</li></ul>



<h3>References</h3>

<p>Fairclough, Stuart J. and Dumuid, Dorothea and Taylor, Sarah and Curry, Whitney and McGrane, Bronagh and Stratton, Gareth and Maher, Carol and Olds, Timothy. Fitness, fatness and the reallocation of time between children’s daily movement behaviours: an analysis of compositional data. International Journal of Behavioral Nutrition and Physical Activity, 2017. 14(1): 64.
</p>

<hr>
<h2 id='fat_data'>Randomly generated data to simulate child fat percentage regressed on time-use compositional data</h2><span id='topic+fat_data'></span>

<h3>Description</h3>

<p>A dataset containing fat percentage (outcome), time-use compositions (sl,sb,lpa,mvpa), and covariates
(sibs,parents,ed). Note sl+sb+lpa+mvpa=1440 minutes for each subject. The variables are as follows:
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(fat_data)
</code></pre>


<h3>Format</h3>

<p>A data frame with 100 rows and 8 variables
</p>


<h3>Details</h3>


<ul>
<li><p> fat. child fat percentage (11.29&ndash;29.99)
</p>
</li>
<li><p> sl. daily sleep in minutes (283&ndash;765)
</p>
</li>
<li><p> sb. sedentary behaviour in minutes (354&ndash;789)
</p>
</li>
<li><p> lpa. low-intensity physical activity in minutes (157&ndash;507)
</p>
</li>
<li><p> mvpa. moderate- to vigorous-intensity physical activity in minutes (35&ndash;155)
</p>
</li>
<li><p> sibs. number of siblings (0,1,2,3,4)
</p>
</li>
<li><p> parents. number of parents/caregivers at home (1,2)
</p>
</li>
<li><p> ed. education level of parent(s) (0=high school, 1=diploma, 2=degree)
</p>
</li></ul>


<hr>
<h2 id='fit_lm'>fit linear model based on input data.frame</h2><span id='topic+fit_lm'></span>

<h3>Description</h3>

<p>fit linear model based on input data.frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit_lm(y_str, X, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fit_lm_+3A_y_str">y_str</code></td>
<td>
<p>a string representation of the column in <code>X</code> that is the outcome</p>
</td></tr>
<tr><td><code id="fit_lm_+3A_x">X</code></td>
<td>
<p>a data.frame or matrix that contains the predictor and outcome variables</p>
</td></tr>
<tr><td><code id="fit_lm_+3A_verbose">verbose</code></td>
<td>
<p>if <code>TRUE</code> (default), a model summary will be printed to the console</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>lm</code> object where the <code>y_str</code> column has been regressed against the remaining
columns of <code>X</code> (with an intercept term as well).
</p>

<hr>
<h2 id='is_deltacomp_obj'>Is object that is returned from <code>pred_delta_comps()</code>?</h2><span id='topic+is_deltacomp_obj'></span>

<h3>Description</h3>

<p>Is object that is returned from <code>pred_delta_comps()</code>?
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_deltacomp_obj(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_deltacomp_obj_+3A_x">x</code></td>
<td>
<p>object to be tested</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean TRUE or FALSE
</p>

<hr>
<h2 id='is_lm_mod'>Is object that is returned from <code>lm()</code>?</h2><span id='topic+is_lm_mod'></span>

<h3>Description</h3>

<p>Is object that is returned from <code>lm()</code>?
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_lm_mod(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_lm_mod_+3A_x">x</code></td>
<td>
<p>object to be tested</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean TRUE or FALSE
</p>

<hr>
<h2 id='is_null_or_na'>Catch NULL, empty and objects containing NAs</h2><span id='topic+is_null_or_na'></span>

<h3>Description</h3>

<p>Catch NULL, empty and objects containing NAs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_null_or_na(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_null_or_na_+3A_x">x</code></td>
<td>
<p>object to be tested</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Boolean. If object is NULL, empty or contains NA then TRUE returned. FALSE otherwise.
</p>

<hr>
<h2 id='plot_delta_comp'>Plot redistributed time-use predictions from compositional ilr multiple linear regression model fit</h2><span id='topic+plot_delta_comp'></span>

<h3>Description</h3>

<p>Plot redistributed time-use predictions from compositional ilr multiple linear regression model fit by <code>predict_delta_comps()</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_delta_comp(dc_obj, comp_total = NULL, units_lab = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_delta_comp_+3A_dc_obj">dc_obj</code></td>
<td>
<p>A <code>deltacomp_obj</code> object returned from the function <code>predict_delta_comps</code></p>
</td></tr>
<tr><td><code id="plot_delta_comp_+3A_comp_total">comp_total</code></td>
<td>
<p>A numeric scalar that is the original units of the composition to make the x-axis the original scale instead of in the range <code>[min(delta), max(delta)]</code> in (-1, 1).</p>
</td></tr>
<tr><td><code id="plot_delta_comp_+3A_units_lab">units_lab</code></td>
<td>
<p>Character string of the units of the compositions relating to <code>comp_total</code> to add to the x-axis label</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a plot object from the <code>ggplot2</code> package (that is, class of <code>gg</code> and <code>ggplot</code>).
</p>


<h3>Author(s)</h3>

<p>Ty Stanford &lt;tystan@gmail.com&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(fairclough)

deltacomp_df &lt;-
  predict_delta_comps(
    dataf = fairclough,
    y = "z_bmi",
    comps = c("sleep","sed","lpa","mvpa"),
    covars = c("decimal_age","sex"),
    deltas =  seq(-20, 20, by = 5) / (24 * 60),
    comparisons = "prop-realloc",
    alpha = 0.05
  )
class(deltacomp_df)

plot_delta_comp(
  dc_obj = deltacomp_df,
  comp_total = 24 * 60,
  units_lab = "min"
)

deltacomp_df &lt;-
  predict_delta_comps(
    dataf = fairclough,
    y = "z_bmi",
    comps = c("sleep","sed","lpa","mvpa"),
    covars = c("decimal_age","sex"),
    deltas =  seq(-20, 20, by = 5) / (24 * 60),
    comparisons = "one-v-one",
    alpha = 0.05
  )

plot_delta_comp(
  dc_obj = deltacomp_df,
  comp_total = 24 * 60,
  units_lab = "min"
)
</code></pre>

<hr>
<h2 id='predict_delta_comps'>Get predictions from compositional ilr multiple linear regression model</h2><span id='topic+predict_delta_comps'></span>

<h3>Description</h3>

<p>Provided the data (containing outcome, compositional components and covariates), fit a ilr multiple linear regression model and provide predictions from reallocating compositional values pairwise amunsnst the components model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predict_delta_comps(
  dataf,
  y,
  comps,
  covars = NULL,
  deltas = c(0, 10, 20)/(24 * 60),
  comparisons = c("prop-realloc", "one-v-one")[1],
  alpha = 0.05
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict_delta_comps_+3A_dataf">dataf</code></td>
<td>
<p>A <code>data.frame</code> containing data</p>
</td></tr>
<tr><td><code id="predict_delta_comps_+3A_y">y</code></td>
<td>
<p>Name (as string/character vector of length 1) of outcome variable in <code>dataf</code></p>
</td></tr>
<tr><td><code id="predict_delta_comps_+3A_comps">comps</code></td>
<td>
<p>Character vector of names of compositions in <code>dataf</code>. See details for more information.</p>
</td></tr>
<tr><td><code id="predict_delta_comps_+3A_covars">covars</code></td>
<td>
<p>Optional. Character vector of covariates names  (non-comp variables) in <code>dataf</code>. Defaults to NULL.</p>
</td></tr>
<tr><td><code id="predict_delta_comps_+3A_deltas">deltas</code></td>
<td>
<p>A vector of time-component changes (as proportions of compositions , i.e., values between -1 and 1). Optional.
Changes in compositions to be computed pairwise. Defaults to 0, 10 and 20 minutes as a proportion of the 1440 minutes
in a day (i.e., approximately <code>0.000</code>, <code>0.007</code> and <code>0.014</code>).</p>
</td></tr>
<tr><td><code id="predict_delta_comps_+3A_comparisons">comparisons</code></td>
<td>
<p>Currently two choices:  <code>"one-v-one"</code> or <code>"prop-realloc"</code> (default). Please see details for explanation of these methods.</p>
</td></tr>
<tr><td><code id="predict_delta_comps_+3A_alpha">alpha</code></td>
<td>
<p>Optional. Level of significance. Defaults to 0.05.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Values in the <code>comps</code> columns must be strictly greater than zero. These compositional values are NOT assumed to be constrained to (0, 1)
values as the function normalises the compositions row-wise to sum to 1 in part of it's processing of the dataset before analysis.
</p>
<p>Please see the <code>deltacomp</code> package <code>README.md</code> file for examples and explanation of the <code>comparisons = "prop-realloc"</code> and <code>comparisons = "one-v-one"</code> options.
</p>


<h3>Value</h3>

<p>Messages are printed to the console as the function tests the inputs, produces the isometric log ratios (ilrs), fits the linear model and produces the redistributed time-use predictions (with confidence intervals).
</p>
<p>Returns a <code>data.frame</code> of the time-use redistribution predictions (and 95% confidence intervals) with the following columns:
</p>

<ul>
<li>  <p><code>comp+</code>: the compositional variable with the addition of the <code>delta</code> value
</p>
</li>
<li>  <p><code>comp-</code>: the compositional variable with the subtraction of the <code>delta</code> value
</p>
</li>
<li>  <p><code>delta</code>: the time-use redistribution value
</p>
</li>
<li>  <p><code>alpha</code>: significance level for the 100(1-alpha)% confidence interval
</p>
</li>
<li>  <p><code>delta_pred</code>: the predicted mean change in the outcome variable
</p>
</li>
<li>  <p><code>ci_lo</code>: the lower limit of 100(1-alpha)% confidence interval corresponding to <code>delta_pred</code>
</p>
</li>
<li>  <p><code>ci_up</code>: the upper limit of 100(1-alpha)% confidence interval corresponding to <code>delta_pred</code>
</p>
</li>
<li>  <p><code>sig</code>: <code>"*"</code> if the <code>delta_pred</code> is significantly different from 0 at the <code>alpha</code> level (empty string otherwise)
</p>
</li></ul>

<p>The data.frame has a class of <code>deltacomp_obj</code> which denotes there are additional attributes of the returned object accessible using <code>attr(*, "attribute_name")</code>.
</p>
<p>The possible values for <code>"attribute_name"</code> are:
</p>

<ul>
<li>  <p><code>dataf</code>: a data.frame of the predictors (covariates and ilrs)
</p>
</li>
<li>  <p><code>y</code>: a vector of the outcome variable
</p>
</li>
<li>  <p><code>comps</code>: a character vector of the time-use composition names
</p>
</li>
<li>  <p><code>lm</code>: the <code>lm</code> object of the multiple linear regression fit (using <code>y</code> and <code>dataf</code> from above)
</p>
</li>
<li>  <p><code>deltas</code>: the redistributed time-use values used in the predictions
</p>
</li>
<li>  <p><code>comparisons</code>:  <code>"one-v-one"</code> or  <code>"prop-realloc"</code> provided as the <code>comparisons</code> argument
</p>
</li>
<li>  <p><code>alpha</code>: significance level for the 100(1-alpha)% confidence intervals
</p>
</li>
<li>  <p><code>ilr_basis</code>: the ilr change of basis matrix <code>V</code>
</p>
</li>
<li>  <p><code>mean_pred</code>: a single row data.frame with the predicted mean outcome (<code>fit</code> column) value from the &quot;average&quot; set of predictors
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Ty Stanford &lt;tystan@gmail.com&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>predict_delta_comps(
  dataf = fat_data,
  y = "fat",
  comps = c("sl", "sb", "lpa", "mvpa"),
  covars = c("sibs", "parents", "ed"),
  deltas = seq(-60, 60, by = 5) / (24 * 60),
  comparisons = "one-v-one",
  alpha = 0.05
)

delta_comp_out &lt;- predict_delta_comps(
  dataf = fat_data,
  y = "fat",
  comps = c("sl", "sb", "lpa", "mvpa"),
  covars = NULL,
  deltas = seq(-60, 60, by = 5) / (24 * 60),
  comparisons = "prop-realloc",
  alpha = 0.05
)

# get the mean prediction from the returned object
attr(delta_comp_out, "mean_pred")

</code></pre>

<hr>
<h2 id='print_ilr_trans'>Print the ilr transformation of provided composition parts to console</h2><span id='topic+print_ilr_trans'></span>

<h3>Description</h3>

<p>Print the ilr transformation of provided composition parts to console
</p>


<h3>Usage</h3>

<pre><code class='language-R'>print_ilr_trans(comps)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print_ilr_trans_+3A_comps">comps</code></td>
<td>
<p>a character vector of compositional parts</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector of representing the ilr transformation of the <code>comps</code>
is returned invisibly as the function's purpose is simply to
print to the R console
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
