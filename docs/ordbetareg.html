<!DOCTYPE html><html><head><title>Help for package ordbetareg</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ordbetareg}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#dordbeta'><p>Probability Density Function for the Ordered Beta Distribution</p></a></li>
<li><a href='#fit_imputed'><p>Fitted Ordered Beta Regression Model (Imputed Datasets)</p></a></li>
<li><a href='#fit_multivariate'><p>Fitted Ordered Beta Regression Model (Multivariate regression)</p></a></li>
<li><a href='#normalize'><p>Normalize Outcome/Response to \[0,1\] Interval</p></a></li>
<li><a href='#ord_fit_mean'><p>Fitted Ordered Beta Regression Model</p></a></li>
<li><a href='#ord_fit_phi'><p>Fitted Ordered Beta Regression Model (Phi Regression)</p></a></li>
<li><a href='#ordbetareg'><p>Fit Ordered Beta Regression Model</p></a></li>
<li><a href='#pew'><p>Pew American Trends Panel Wave 28</p></a></li>
<li><a href='#pp_check_ordbeta'><p>Accurate Posterior Predictive Plots for Ordbetareg Models</p></a></li>
<li><a href='#rordbeta'><p>Generate Ordered Beta Variates</p></a></li>
<li><a href='#sim_data'><p>Simulated Ordered Beta Regression Values</p></a></li>
<li><a href='#sim_ordbeta'><p>Power Calculation via Simulation of the Ordered Beta Regression Model</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Ordered Beta Regression Models with 'brms'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.7.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Implements ordered beta regression models, which are for modeling continuous variables with upper and lower bounds, such as
   survey sliders, dose-response relationships and indexes. For more information, see
   Kubinec (2022) &lt;<a href="https://doi.org/10.31235%2Fosf.io%2F2sx6y">doi:10.31235/osf.io/2sx6y</a>&gt;. The package is a front-end to the R package 'brms', which 
   facilitates a range of regression specifications, including hierarchical, dynamic and
   multivariate modeling.</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/saudiwin/ordbetareg_pack/issues">https://github.com/saudiwin/ordbetareg_pack/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>LazyDataCompression:</td>
<td>xz</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5), brms (&ge; 2.18.0), stats</td>
</tr>
<tr>
<td>Imports:</td>
<td>transformr, dplyr, ggplot2 (&ge; 3.4.0), gganimate, tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, knitr, gt, modelsummary (&ge; 1.4.1),
marginaleffects (&ge; 0.10.0), haven, stringr, Hmisc, collapse,
ggthemes, glmmTMB, mice, bayestestR</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-09 13:45:10 UTC; rmk7</td>
</tr>
<tr>
<td>Author:</td>
<td>Robert Kubinec <a href="https://orcid.org/0000-0001-6655-4119"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Robert Kubinec &lt;rmk7@nyu.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-10 07:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='dordbeta'>Probability Density Function for the Ordered Beta Distribution</h2><span id='topic+dordbeta'></span>

<h3>Description</h3>

<p>This function will return the density of given variates of the
ordered beta distribution conditional on values for
the mean (<code>mu</code>), dispersion (<code>phi</code>) and cutpoints
governing the ratio of degenerate (discrete) to continuous
responses.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dordbeta(x = 0.9, mu = 0.5, phi = 1, cutpoints = c(-1, 1), log = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dordbeta_+3A_x">x</code></td>
<td>
<p>Variates of the ordered beta distribution (should be in the [0,1] interval).</p>
</td></tr>
<tr><td><code id="dordbeta_+3A_mu">mu</code></td>
<td>
<p>Value of the mean of the distribution.
Should be in the \(0,1\) interval (cannot be strictly equal to 0 or 1). If
length is greater than 1, should be of length x.</p>
</td></tr>
<tr><td><code id="dordbeta_+3A_phi">phi</code></td>
<td>
<p>Value of the dispersion parameter. Should be strictly greater than 0. If
length is greater than 1, should be of length x.</p>
</td></tr>
<tr><td><code id="dordbeta_+3A_cutpoints">cutpoints</code></td>
<td>
<p>A vector of two numeric values for the cutpoints. Second value should</p>
</td></tr>
<tr><td><code id="dordbeta_+3A_log">log</code></td>
<td>
<p>where to return the log density
be strictly greater than the first value.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a vector of length <code>x</code> of the density of the ordered beta distribution
conditional on <code>mu</code> and <code>phi</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# examine density (likelihood) of different possible values
# given fixed values for ordered beta parameters

x &lt;- seq(0, 1, by=0.01)

x_dens &lt;- dordbeta(x, mu = 0.3, phi=2, cutpoints=c(-2, 2))

# Most likely value for x is approx 1
# Note discontinuity in density function between continuous/discrete values
# density function is a combined PMF/PDF, so not a real PDF
# can though be used for MLE

plot(x_dens, x)

# discrete values should be compared to each other:
# prob of discrete 0 &gt; prob of discrete 1

x_dens[x==0] &gt; x_dens[x==1]
</code></pre>

<hr>
<h2 id='fit_imputed'>Fitted Ordered Beta Regression Model (Imputed Datasets)</h2><span id='topic+fit_imputed'></span>

<h3>Description</h3>

<p>A fitted ordered beta regression model on multiple imputed
datasets generated by the package <code>mice</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit_imputed
</code></pre>


<h3>Format</h3>

<p>an <code>ordbetareg</code> object
</p>

<hr>
<h2 id='fit_multivariate'>Fitted Ordered Beta Regression Model (Multivariate regression)</h2><span id='topic+fit_multivariate'></span>

<h3>Description</h3>

<p>A fitted ordered beta regression model with two responses,
one an ordered beta regression and the other a Gaussian/Normal
outcome. Useful for examining mediation analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit_multivariate
</code></pre>


<h3>Format</h3>

<p>an <code>ordbetareg</code> object
</p>

<hr>
<h2 id='normalize'>Normalize Outcome/Response to \[0,1\] Interval</h2><span id='topic+normalize'></span>

<h3>Description</h3>

<p>This function takes a continuous (double) column of data and converts it
to have 0 as the lower bound and 1 as the upper bound.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>normalize(outcome, true_bounds = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="normalize_+3A_outcome">outcome</code></td>
<td>
<p>Any non-character vector. Factors will be converted
to numeric via coercion.</p>
</td></tr>
<tr><td><code id="normalize_+3A_true_bounds">true_bounds</code></td>
<td>
<p>Specify this parameter with the lower and upper bound
if the observed min/max of the outcome should not be used. Useful when
an upper or lower bound exists but the observed data is less than/more than
that bound. The normalization function will respect these bounds.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Beta regression can only be done with a response that is continuous with a
lower bound of 0 and an upper bound of 1. However, it is
straightforward to transform any lower and upper-bounded continuous
variable to the \[0,1\] interval. This function does the transformation
and saves the original bounds as attributes so that the bounds can be
reverse-transformed.
</p>


<h3>Value</h3>

<p>A numeric vector with an upper bound of 1 and a lower bound of
0. The original bounds are saved in the attributes &quot;lower_bound&quot; and
&quot;upper_bound&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># set up arbitrary upper and lower-bounded vector
outcome &lt;- runif(1000, min=-33, max=445)

# normalize to \[0,1\]

trans_outcome &lt;- normalize(outcome=outcome)
summary(trans_outcome)

# only works with numeric vectors and factors

  try(normalize(outcome=c('a','b')))

</code></pre>

<hr>
<h2 id='ord_fit_mean'>Fitted Ordered Beta Regression Model</h2><span id='topic+ord_fit_mean'></span>

<h3>Description</h3>

<p>A fitted ordered beta regression model to the mean of the thermometer
column from the pew data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ord_fit_mean
</code></pre>


<h3>Format</h3>

<p>an <code>ordbetareg</code> object
</p>

<hr>
<h2 id='ord_fit_phi'>Fitted Ordered Beta Regression Model (Phi Regression)</h2><span id='topic+ord_fit_phi'></span>

<h3>Description</h3>

<p>A fitted ordered beta regression model to the dispersion parameter
of the thermometer
column from the pew data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ord_fit_phi
</code></pre>


<h3>Format</h3>

<p>an <code>ordbetareg</code> object
</p>

<hr>
<h2 id='ordbetareg'>Fit Ordered Beta Regression Model</h2><span id='topic+ordbetareg'></span>

<h3>Description</h3>

<p>This function allows you to estimate an ordered beta regression model
via a formula syntax.
</p>
<p>The <code>ordbetareg</code> package is essentially a wrapper around <code>brms</code> that
enables the ordered beta regression model to be fit. This model has
advantages over other alternatives for continous data with upper
and lower bounds, such as survey sliders, indexes,
dose-response relationships,
and visual analog scales (among others). The package allows for all of the
many <code>brms</code> regression modeling functions to be used with the ordered
beta regression distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ordbetareg(
  formula = NULL,
  data = NULL,
  true_bounds = NULL,
  phi_reg = "none",
  use_brm_multiple = FALSE,
  coef_prior_mean = 0,
  coef_prior_SD = 5,
  intercept_prior_mean = NULL,
  intercept_prior_SD = NULL,
  phi_prior = 0.1,
  dirichlet_prior = c(1, 1, 1),
  phi_coef_prior_mean = 0,
  phi_coef_prior_SD = 5,
  phi_intercept_prior_mean = NULL,
  phi_intercept_prior_SD = NULL,
  extra_prior = NULL,
  init = "0",
  make_stancode = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ordbetareg_+3A_formula">formula</code></td>
<td>
<p>Either an R formula in the form response/DV ~ var1 + var2
etc. <em>or</em> formula object as created/called by the <code>brms</code>
<a href="brms.html#topic+brmsformula">brms::bf</a> function. *Please avoid using 0 or <code>Intercept</code> in the
formula definition.</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_data">data</code></td>
<td>
<p>An R data frame or tibble containing the variables in the formula</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_true_bounds">true_bounds</code></td>
<td>
<p>If the true bounds of the outcome/response
don't exist in the data, pass a length 2 numeric vector
of the minimum and maximum bounds to properly normalize
the outcome/response</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_phi_reg">phi_reg</code></td>
<td>
<p>Whether you are including a linear model predicting
the dispersion  parameter, phi, and/or for the response. If you are
including models for both, pass option 'both'. If you only have an
intercept for the outcome (i.e. a 1 in place of covariates), pass 'only'.
If you only have intercepts for phi (such as a varying intercepts/random effects)
model, pass the value &quot;intercepts&quot;. To set priors on these intercepts,
use the <code>extra-prior</code> option with the <a href="brms.html#topic+set_prior">brms::set_prior</a> function (class=&quot;sd&quot;).
If no model of any kind for phi, the default, pass 'none'.</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_use_brm_multiple">use_brm_multiple</code></td>
<td>
<p>(T/F) Whether the model should use
<a href="brms.html#topic+brm_multiple">brms::brm_multiple</a> for multiple
imputation over multiple dataframes passed
as a list to the <code>data</code> argument</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_coef_prior_mean">coef_prior_mean</code></td>
<td>
<p>The mean of the Normal distribution prior on the
regression coefficients (for predicting the mean of the response).
Default is 0.</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_coef_prior_sd">coef_prior_SD</code></td>
<td>
<p>The SD of the Normal distribution prior on the
regression coefficients (for predicting the mean of the response).
Default is 5, which makes the prior weakly informative on the
logit scale.</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_intercept_prior_mean">intercept_prior_mean</code></td>
<td>
<p>The mean of the Normal distribution prior
for the intercept. By default is NULL, which means the intercept
receives the same prior as <code>coef_prior_mean</code>. To zero out the
intercept, set this parameter to 0 and <code>coef_prior_SD</code> to a
very small number (0.01 or smaller). NOTE: the default intercept
in <code>brms</code> is centered (mean-subtracted) by default. To use a
traditional intercept, either add <code>0 + Intercept</code> to the
formula or specify <code>center=FALSE</code> in the <code>bf</code> formula function for
<code>brms</code>. See <code><a href="brms.html#topic+brmsformula">brms::brmsformula()</a></code> for more info.</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_intercept_prior_sd">intercept_prior_SD</code></td>
<td>
<p>The SD of the Normal distribution prior
for the intercept. By default is NULL, which means the intercept
receives the same prior SD as <code>coef_prior_SD</code>.</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_phi_prior">phi_prior</code></td>
<td>
<p>The mean parameter of the exponential prior on
phi, which determines the dispersion of the beta distribution. The
default is .1, which equals a mean of 10 and is thus weakly
informative on the interval (0.4, 30). If the response has very low variance (i.e. tightly)
clusters around a specific value, then decreasing this prior (and increasing the expected value)
may be
helpful. Checking the value of phi in the output of the model command
will reveal if a value of 0.1 (mean of 10) is too small.</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_dirichlet_prior">dirichlet_prior</code></td>
<td>
<p>A vector of three integers
corresponding to the prior parameters for the dirchlet distribution
(alpha parameter) governing the location of the cutpoints between
the components of the response (continuous vs. degenerate).
The default is 1 which puts equal probability on
degenerate versus continuous responses. Likely only needs to be
changed in a repeated sampling situation to stabilize the cutpoint
locations across samples.</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_phi_coef_prior_mean">phi_coef_prior_mean</code></td>
<td>
<p>The mean of the Normal distribution prior on the
regression coefficients for predicting phi, the dispersion parameter.
Only useful if a linear model is being fit to phi.
Default is 0.</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_phi_coef_prior_sd">phi_coef_prior_SD</code></td>
<td>
<p>The SD of the Normal distribution prior on the
regression coefficients for predicting phi, the dispersion parameter.
Only useful if a linear model is being fit to phi.
Default is 5, which makes the prior weakly informative on the
exponential scale.</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_phi_intercept_prior_mean">phi_intercept_prior_mean</code></td>
<td>
<p>The mean of the Normal distribution prior
for the phi (dispersion) regression intercept. By default is NULL,
which means the intercept
receives the same prior as <code>phi_coef_prior_mean</code>. To zero out the
intercept, set this parameter to 0 and <code>phi_coef_prior_SD</code> to a
very small number (0.01 or smaller).</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_phi_intercept_prior_sd">phi_intercept_prior_SD</code></td>
<td>
<p>The SD of the Normal distribution prior
for the phi (dispersion) regression intercept. By default is NULL,
which means the intercept
receives the same prior SD as <code>phi_coef_prior_SD</code>.</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_extra_prior">extra_prior</code></td>
<td>
<p>An additional prior, such as a prior for a specific
regression coefficient, added to the outcome regression by passing one of the <code>brms</code>
functions <a href="brms.html#topic+set_prior">brms::set_prior</a> or <a href="brms.html#topic+set_prior">brms::prior_string</a> with appropriate
values.</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_init">init</code></td>
<td>
<p>This parameter is used to determine starting values for
the Stan sampler to begin Markov Chain Monte Carlo sampling. It is
set by default at 0 because the non-linear nature of beta regression
means that it is possible to begin with extreme values depending on the
scale of the covariates. Setting this to 0 helps the sampler find
starting values. It does, on the other hand, limit the ability to detect
convergence issues with Rhat statistics. If that is a concern, such as
with an experimental feature of <code>brms</code>, set this to <code>"random"</code> to get
more robust starting values (just be sure to scale the covariates so they are
not too large in absolute size).</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_make_stancode">make_stancode</code></td>
<td>
<p>If <code>TRUE</code>, will pass back the Stan code for the
model as a character vector rather than fitting the model.</p>
</td></tr>
<tr><td><code id="ordbetareg_+3A_...">...</code></td>
<td>
<p>All other arguments passed on to the <code>brm</code> function</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a wrapper around the <a href="brms.html#topic+brm">brms::brm</a> function, which is a
powerful Bayesian regression modeling engine using Stan. To fully explore
the options available, including dynamic and hierarchical modeling, please
see the documentation for the <code>brm</code> function above. As the ordered beta
regression model is currently not available in <code>brms</code> natively, this modeling
function allows a <code>brms</code> model to be fit with the ordered beta regression
distribution.
</p>
<p>For more information about the model, see the paper here: https://osf.io/preprints/socarxiv/2sx6y/.
</p>
<p>This function allows you to set priors on the dispersion parameter,
the cutpoints, and the regression coefficients (see below for options).
However, to add specific priors on individual covariates, you would need
to use the <a href="brms.html#topic+set_prior">brms::set_prior</a> function by specifying an individual covariate
(see function documentation) and passing the result of the function call
to the <code>extra_prior</code> argument.
</p>
<p>This function will also automatically normalize the outcome so that it
lies in the \[0,1\] interval, as required by beta regression. For furthur
information, see the documentation for the <a href="#topic+normalize">normalize</a> function.
</p>
<p>Priors can be set on a variety of coefficients in the model, see
the description of parameters <code>coef_prior_mean</code> and <code>intercept_prior_mean</code>,
in addition to setting a custom prior with the <code>extra_prior</code> option.
When setting priors on intercepts, it is important to note that
by default, all intercepts in brms are centered (the means are
subtracted from the data). As a result, a prior set on the default
intercept will have a different interpretation than a traditional
intercept (i.e. the value of the outcome when the covariates are
all zero). To change this setting, use the <code><a href="brms.html#topic+brmsformula">brms::bf()</a></code> function
as a wrapper around the formula with the option <code>center=FALSE</code> to
set priors on a traditional non-centered intercept.
</p>
<p>Note that while <code>brms</code> also supports adding <code>0 + Intercept</code> to the
formula to address this issue, <code>ordbetareg</code> does not support this
syntax. Instead, use <code>center=FALSE</code> as an option to <code><a href="brms.html#topic+brmsformula">brms::bf()</a></code>.
</p>
<p>To learn more about how the package works, see the vignette by using
the command <code>browseVignettes(package='ordbetareg')</code>.
</p>
<p>For more info about the distribution, see
this paper: https://osf.io/preprints/socarxiv/2sx6y/
</p>
<p>To cite the package, please cite the following paper:
</p>
<p>Kubinec, Robert. &quot;Ordered Beta Regression: A Parsimonious, Well-Fitting Model for Continuous Data with Lower and Upper Bounds.&quot; <strong>Political Analysis</strong>. 2022.
</p>


<h3>Value</h3>

<p>A <code>brms</code> object fitted with the ordered beta regression distribution.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load survey data that comes with the package

library(dplyr)
data("pew")

# prepare data

model_data &lt;- select(pew,therm,
             education="F_EDUCCAT2_FINAL",
             region="F_CREGION_FINAL",
             income="F_INCOME_FINAL")

# It takes a while to fit the models. Run the code
# below if you want to load a saved fitted model from the
# package, otherwise use the model-fitting code

data("ord_fit_mean")

  
  # fit the actual model

  if(.Platform$OS.type!="windows") {

    ord_fit_mean &lt;- ordbetareg(formula=therm ~ education + income +
      (1|region),
      data=model_data,
      cores=2,chains=2)

  }


  

# access values of the coefficients

summary(ord_fit_mean)
</code></pre>

<hr>
<h2 id='pew'>Pew American Trends Panel Wave 28</h2><span id='topic+pew'></span>

<h3>Description</h3>

<p>A dataset with the non-missing responses for the 28th wave of the
Pew American Trends Panel survey.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pew
</code></pre>


<h3>Format</h3>

<p>A data frame with 140 variables and 2,538 observations.
</p>


<h3>Source</h3>

<p>https://www.pewresearch.org/social-trends/dataset/american-trends-panel-wave-28/]
</p>

<hr>
<h2 id='pp_check_ordbeta'>Accurate Posterior Predictive Plots for Ordbetareg Models</h2><span id='topic+pp_check_ordbeta'></span>

<h3>Description</h3>

<p>The standard <a href="brms.html#topic+pp_check.brmsfit">brms::pp_check</a> plot available via <code>brms</code>
is not accurate for ordbetareg models because an
ordered beta regression has both continuous and discrete
components. This function implements a bar plot and a density
plot for the continuous and discrete elements separately,
and will return accurate posterior predictive plots
relative to the data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pp_check_ordbeta(
  model = NULL,
  type = "both",
  ndraws = 10,
  cores = NULL,
  group = NULL,
  new_theme = NULL,
  outcome_label = NULL,
  animate = FALSE,
  reverse_bounds = TRUE,
  facet_scales = "fixed"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pp_check_ordbeta_+3A_model">model</code></td>
<td>
<p>A fitted <a href="#topic+ordbetareg">ordbetareg</a> model.</p>
</td></tr>
<tr><td><code id="pp_check_ordbeta_+3A_type">type</code></td>
<td>
<p>Default is &quot;both&quot; for creating both a
discrete (bar) and continuous (density) plot. Can also be
&quot;discrete&quot; for only the bar plot for discrete values (0/1) or
&quot;continuous&quot; for continuous values (density plot).</p>
</td></tr>
<tr><td><code id="pp_check_ordbeta_+3A_ndraws">ndraws</code></td>
<td>
<p>Number of posterior draws to use to calculate estimates and show in plot.
Defaults to 10.</p>
</td></tr>
<tr><td><code id="pp_check_ordbeta_+3A_cores">cores</code></td>
<td>
<p>Number of cores to use to produce posterior predictive distribution. Defaults to NULL or 1 core.</p>
</td></tr>
<tr><td><code id="pp_check_ordbeta_+3A_group">group</code></td>
<td>
<p>A factor variable of the same number of
rows as the data that is used to broduce grouped
(faceted) plots of the posterior distribution.</p>
</td></tr>
<tr><td><code id="pp_check_ordbeta_+3A_new_theme">new_theme</code></td>
<td>
<p>Any additional themes to be added to ggplot2 (default is NULL).</p>
</td></tr>
<tr><td><code id="pp_check_ordbeta_+3A_outcome_label">outcome_label</code></td>
<td>
<p>A character value that will replace the name of the outcome in the plot
(default is the name of the response variable in the data frame).</p>
</td></tr>
<tr><td><code id="pp_check_ordbeta_+3A_animate">animate</code></td>
<td>
<p>Whether to animate each posterior draw for continuous
distributions (defaults to FALSE).</p>
</td></tr>
<tr><td><code id="pp_check_ordbeta_+3A_reverse_bounds">reverse_bounds</code></td>
<td>
<p>Whether to plot data using the original bounds in the data
(i.e. not 0 and 1).</p>
</td></tr>
<tr><td><code id="pp_check_ordbeta_+3A_facet_scales">facet_scales</code></td>
<td>
<p>The option passed on to the <code>facet_wrap</code> function in
<code>ggplot2</code> for the type of scale for facetting if passing a variable for
<code>group</code>. Defaults to <code>"fixed"</code> scales but can be set to <code>"free_y"</code> to allow
probability density/bar count scales to vary or <code>"free"</code> to allow both x
and y axes to vary (i.e., also outcome axis ticks).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If &quot;both&quot;, prints both plots and returns a list of both plots as
<code>ggplot2</code> objects. Otherwise, prints and returnst the specific plot
as a <code>ggplot2</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# need a fitted ordbetareg model

data("ord_fit_mean")

out_plots &lt;- pp_check_ordbeta(ord_fit_mean)

# view discrete bar plot

out_plots$discrete

# view continuous density plot

out_plots$continuous

# change title using ggplot2 ggtitle function

out_plots$discrete + ggplot2::ggtitle("New title")

</code></pre>

<hr>
<h2 id='rordbeta'>Generate Ordered Beta Variates</h2><span id='topic+rordbeta'></span>

<h3>Description</h3>

<p>This function will generate ordered beta random variates given
values for the mean (<code>mu</code>), dispersion (<code>phi</code>) and cutpoints
governing the ratio of degenerate (discrete) to continuous
responses.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rordbeta(n = 100, mu = 0.5, phi = 1, cutpoints = c(-1, 1))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rordbeta_+3A_n">n</code></td>
<td>
<p>Number of variates to generate.</p>
</td></tr>
<tr><td><code id="rordbeta_+3A_mu">mu</code></td>
<td>
<p>Value of the mean of the distribution.
Should be in the \(0,1\) interval (cannot be strictly equal to 0 or 1). If
length is greater than 1, should be of length <code>n</code>.</p>
</td></tr>
<tr><td><code id="rordbeta_+3A_phi">phi</code></td>
<td>
<p>Value of the dispersion parameter. Should be strictly greater than 0. If
length is greater than 1, should be of length <code>n</code>.</p>
</td></tr>
<tr><td><code id="rordbeta_+3A_cutpoints">cutpoints</code></td>
<td>
<p>A vector of two numeric values for the cutpoints. Second value should
be strictly greater than the first value.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of length <code>n</code> of variates from the ordered beta distribution.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# generate 100 random variates with an average of 0.7
# all will be in the closed interval \[0,1\]

ordbeta_var &lt;- rordbeta(n=100, mu=0.7, phi=2)

# Will be approx mean = 0.7 with high positive skew

summary(ordbeta_var)
</code></pre>

<hr>
<h2 id='sim_data'>Simulated Ordered Beta Regression Values</h2><span id='topic+sim_data'></span>

<h3>Description</h3>

<p>The simulated draws used in the vignette for calculating statistical
power.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim_data
</code></pre>


<h3>Format</h3>

<p>A dataframe
</p>

<hr>
<h2 id='sim_ordbeta'>Power Calculation via Simulation of the Ordered Beta Regression Model</h2><span id='topic+sim_ordbeta'></span>

<h3>Description</h3>

<p>This function allows you to calculate power curves (or anything else)
via simulating the ordered beta regression model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim_ordbeta(
  N = 1000,
  k = 5,
  iter = 1000,
  cores = 1,
  phi = 1,
  cutpoints = c(-1, 1),
  beta_coef = NULL,
  beta_type = "continuous",
  treat_assign = 0.5,
  return_data = FALSE,
  seed = as.numeric(Sys.time()),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sim_ordbeta_+3A_n">N</code></td>
<td>
<p>The sample size for the simulation. Include a vector of integers
to examine power/results for multiple sample sizes.</p>
</td></tr>
<tr><td><code id="sim_ordbeta_+3A_k">k</code></td>
<td>
<p>The number of covariates/predictors.</p>
</td></tr>
<tr><td><code id="sim_ordbeta_+3A_iter">iter</code></td>
<td>
<p>The number of simulations to run. For power calculation,
should be at least 500 (yes, this will take some time).</p>
</td></tr>
<tr><td><code id="sim_ordbeta_+3A_cores">cores</code></td>
<td>
<p>The number of cores to use to parallelize the simulation.</p>
</td></tr>
<tr><td><code id="sim_ordbeta_+3A_phi">phi</code></td>
<td>
<p>Value of the dispersion parameter in the beta distribution.</p>
</td></tr>
<tr><td><code id="sim_ordbeta_+3A_cutpoints">cutpoints</code></td>
<td>
<p>Value of the two cutpoints for the ordered model.
By default are the values -1 and +1 (these are interpreted in the
logit scale and so should not be too large). The farther apart,
the fewer degenerate (0 or 1) responses there will be in the distribution.</p>
</td></tr>
<tr><td><code id="sim_ordbeta_+3A_beta_coef">beta_coef</code></td>
<td>
<p>If not null, a vector of length <code>k</code> of the true
predictor coefficients/treatment values to use for the simulation.
Otherwise, coefficients are drawn from a random uniform distribution
from -1 to 1 for each predictor.</p>
</td></tr>
<tr><td><code id="sim_ordbeta_+3A_beta_type">beta_type</code></td>
<td>
<p>Can be either <code>continuous</code> or <code>binary</code>. Use the latter
for conventional treatments with two values.</p>
</td></tr>
<tr><td><code id="sim_ordbeta_+3A_treat_assign">treat_assign</code></td>
<td>
<p>If <code>beta_type</code> is set to <code>binary</code>,
you can use this parameter to set the proportion
of <code>N</code> assigned to treatment. By default,
the parameter is set to 0.5 for
equal/balanced treatment control groups.</p>
</td></tr>
<tr><td><code id="sim_ordbeta_+3A_return_data">return_data</code></td>
<td>
<p>Whether to return the simulated dqta as a list
in the <code>data</code> column of the returned data frame.</p>
</td></tr>
<tr><td><code id="sim_ordbeta_+3A_seed">seed</code></td>
<td>
<p>The seed to use to make the results reproducible. Set
automatically to a date-time stamp.</p>
</td></tr>
<tr><td><code id="sim_ordbeta_+3A_...">...</code></td>
<td>
<p>Any other arguments are passed on to the <a href="brms.html#topic+brm">brms::brm</a> function
to control modeling options.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function implements the simulation found in Kubinec (2022). This
simulation allows you to vary the sample size, number &amp; type of predictors,
values of the predictors (or treatment values), and the power to target.
The function returns a data frame
with one row per simulation draw and covariate <code>k</code>.
</p>


<h3>Value</h3>

<p>a tibble data frame with columns of simulated and estimated values and
rows for each simulation iteration X coefficient combination. I.e.,
if there are five predictors, and 1,000 iterations, the resulting data frame
will have 1,000 rows. If there are multiple values for <code>N</code>,
then each value
of <code>N</code> will have its own set of iterations, making the final size of the
data a multiple of the number of sample sizes to iterate over. The
data frame will have the following columns:
1.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># This function takes a while to run as it has
# to fit an ordered beta regression to each
# draw. The package comes with a saved
# simulation dataset you can inspect to see what the
# result looks like

data("sim_data")

library(dplyr)

# will take a while to run this


  if(.Platform$OS.type!="windows") {

    sim_data &lt;- sim_ordbeta(N=c(250,750),
    k=1,
    beta_coef = .5,
    iter=5,cores=2,
    beta_type="binary",
    treat_assign=0.3)

    }



# to get the power values by N, simply summarize/group
# by N with functions from the R package dplyr

sim_data %&gt;%
  group_by(N) %&gt;%
  summarize(mean_power=mean(power))


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
