<!DOCTYPE html><html lang="en"><head><title>Help for package xpose.xtras</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {xpose.xtras}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#xpose.xtras-package'><p>xpose.xtras: Extra Functionality for the 'xpose' Package</p></a></li>
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#+25p+25'><p>Binary check if LHS is parent of LHS</p></a></li>
<li><a href='#add_prm_association'><p>Describe parameter associations</p></a></li>
<li><a href='#add_relationship'><p>Add relationship(s) to an xpose_set</p></a></li>
<li><a href='#add_xpdb'><p>Add one or more <code>xpdb</code> objects to an <code>xpose_set</code></p></a></li>
<li><a href='#as_leveler'><p>Level-defining helper functions</p></a></li>
<li><a href='#as_xpdb_x'><p>Convert an object to an <code>xpose_data</code> and <code>xp_xtras</code> object</p></a></li>
<li><a href='#backfill_iofv'><p>Add individual objective function to data</p></a></li>
<li><a href='#catdv_vs_dvprobs'><p>Non-simulation based likelihood model diagnostic</p></a></li>
<li><a href='#check_levels'><p>Verify validity of level list</p></a></li>
<li><a href='#check_xpose_set'><p>Check an <code>xpose_set</code> object</p></a></li>
<li><a href='#desc_from_comments'><p>Backfill utility for descriptions</p></a></li>
<li><a href='#diagram_lineage'><p>Visualize <code>xpose_set</code></p></a></li>
<li><a href='#diff.xpose_set'><p>Display deltaOFV values across <code>xpose_set</code></p></a></li>
<li><a href='#duplicated.xpose_set'><p>Check if any xpose_data objects are repeated in xpose_set</p></a></li>
<li><a href='#dv_vs_ipred_modavg'><p>Model average plots</p></a></li>
<li><a href='#edit_xpose_data'><p>Master xpdb editing function</p></a></li>
<li><a href='#eta_grid'><p>Grid plots</p></a></li>
<li><a href='#eta_vs_catcov'><p>Eta categorical covariate plots (typical)</p></a></li>
<li><a href='#eta_vs_contcov'><p>Eta continuous covariate plots (typical)</p></a></li>
<li><a href='#expose_param'><p>Expose a model parameter of xpdb objects in an xpose_set</p></a></li>
<li><a href='#expose_property'><p>Expose a property of xpdb objects in an xpose_set</p></a></li>
<li><a href='#fill_prob_subprob_method'><p>Place .problem, .subprob and .method into environment consistently</p></a></li>
<li><a href='#filter.xpose_set'><p>Filtration method for xpose_set</p></a></li>
<li><a href='#focus_xpdb'><p>Focus on an xpdb object in an xpose_set</p></a></li>
<li><a href='#franken_prop'><p>Combine a property from all components of a <code>franken_xpdb</code></p></a></li>
<li><a href='#franken_xpdb'><p>Combine several <code>xpose_data</code> objects into one</p></a></li>
<li><a href='#get_index'><p>Get full index for xpose_data data</p></a></li>
<li><a href='#get_prm'><p>Access model parameters</p></a></li>
<li><a href='#get_prop'><p>Generic function to extract a property from a model summary</p></a></li>
<li><a href='#get_shk'><p>Get shrinkage estimates from model summary</p></a></li>
<li><a href='#grab_xpose_plot'><p>Grab processed <code>xpose_plot</code></p></a></li>
<li><a href='#iofv_vs_mod'><p>Objective function changes across models</p></a></li>
<li><a href='#ipred_vs_ipred'><p>Compare model predictions</p></a></li>
<li><a href='#irep'><p>Add simulation counter</p></a></li>
<li><a href='#is_formula_list'><p>Convenience functions used in package</p></a></li>
<li><a href='#is_xp_xtras'><p>Basic class checker for <code>xp_xtras</code></p></a></li>
<li><a href='#list_dv_probs'><p>For a categorical DV variable, show associated probabilities</p></a></li>
<li><a href='#list_vars'><p>Updates to <code>list_vars</code></p></a></li>
<li><a href='#modavg_xpdb'><p>Create a model-averaged xpose data object</p></a></li>
<li><a href='#modify_xpdb'><p>Add, remove or rename variables in an xpdb</p></a></li>
<li><a href='#mutate_prm'><p>Transform parameter values in place</p></a></li>
<li><a href='#mutate.xpose_set'><p>Mutation method for xpose_set</p></a></li>
<li><a href='#param_selector'><p>Select parameter row number</p></a></li>
<li><a href='#pheno_base'><p>An <code>xp_xtras</code> example of a base model</p></a></li>
<li><a href='#pheno_final'><p>An <code>xp_xtras</code> example of a final model</p></a></li>
<li><a href='#pheno_saem'><p>An <code>xp_xtras</code> example of a final model</p></a></li>
<li><a href='#pheno_set'><p>A more complex example of <code>xpose_set</code> object</p></a></li>
<li><a href='#pkpd_m3'><p>An <code>xp_xtras</code> example of an M3 model</p></a></li>
<li><a href='#pkpd_m3_df'><p>An <code>xp_xtras</code> example of an M3 model (dataset)</p></a></li>
<li><a href='#prm_waterfall'><p>Specific waterfall plots</p></a></li>
<li><a href='#proc_levels'><p>Convert levels list into tibble</p></a></li>
<li><a href='#pull.xpose_set'><p>Pulling method for xpose_set</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#rename.xpose_set'><p>Renaming method for xpose_set</p></a></li>
<li><a href='#reportable_digits'><p>Reportable digits for model fit</p></a></li>
<li><a href='#reshape_set'><p>Convert xpose_set to a nested list.</p></a></li>
<li><a href='#select_subset'><p>Convenience wrapper for tidyselect</p></a></li>
<li><a href='#select.xpose_set'><p>Selection method for xpose_set</p></a></li>
<li><a href='#set_base_model'><p>Base model for <code>xpose_set</code></p></a></li>
<li><a href='#set_dv_probs'><p>Set probability columns for categorical endpoints</p></a></li>
<li><a href='#set_option'><p>Set an <code>xpose</code> option</p></a></li>
<li><a href='#set_prop'><p>Set a summary property</p></a></li>
<li><a href='#set_var_levels'><p>Set variable levels</p></a></li>
<li><a href='#set_var_types'><p>Set variable types</p></a></li>
<li><a href='#set_var_types_x'><p>Set variable types</p></a></li>
<li><a href='#set_var_types.default'><p>Set variable types</p></a></li>
<li><a href='#set_var_types.xp_xtras'><p>Set variable types</p></a></li>
<li><a href='#shark_colors'><p>Change colors of shark plots</p></a></li>
<li><a href='#shark_plot'><p>Individual contributions to dOFV</p></a></li>
<li><a href='#summarise_xpdb'><p>Group/ungroup and summarize variables in an xpdb</p></a></li>
<li><a href='#two_set_dots'><p>Typical processing for plots of 2 sets</p></a></li>
<li><a href='#val2lvl'><p>Translate values to levels</p></a></li>
<li><a href='#vismo_dtmm'><p>An <code>xp_xtras</code> example of the discrete-time Markov model of categorical vismodegib data</p></a></li>
<li><a href='#vismo_pomod'><p>An <code>xp_xtras</code> example of the proportional odds categorical vismodegib model</p></a></li>
<li><a href='#vismodegib'><p>A tibble of mock data used for fitting vismodegib models</p></a></li>
<li><a href='#wrap_xp_ggally'><p>Ensure consistent style with <code>GGally</code> functions</p></a></li>
<li><a href='#xp_var'><p><code>xp_var</code> Method</p></a></li>
<li><a href='#xp_xtra_theme'><p>Extra theme defaults</p></a></li>
<li><a href='#xp4_xtra_theme'><p>Updated version of the xpose4 theme</p></a></li>
<li><a href='#xpdb_set'><p>An example <code>xpose_set</code> object</p></a></li>
<li><a href='#xpdb_x'><p>An example <code>xp_xtras</code> object</p></a></li>
<li><a href='#xplot_boxplot'><p>Default xpose boxplot function</p></a></li>
<li><a href='#xplot_pairs'><p>Wrapper around ggpairs</p></a></li>
<li><a href='#xpose_set'><p>Generate a set of <code>xpdb</code> objects</p></a></li>
<li><a href='#xset_lineage'><p>Determine lineage within a set</p></a></li>
<li><a href='#xset_waterfall'><p>Waterfall plot</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Extra Functionality for the 'xpose' Package</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Adding some at-present missing functionality, or functions 
    unlikely to be added to the base 'xpose' package.  This includes some 
    diagnostic plots that have been missing in translation from 'xpose4', 
    but also some useful features that truly extend the capabilities of what 
    can be done with 'xpose'. These extensions include the concept of a set of
    'xpose' objects, and diagnostics for likelihood-based models.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>assertthat, cli, colorspace, conflicted, dplyr (&ge; 1.1.2),
forcats (&ge; 1.0.0), GGally, ggplot2 (&ge; 3.4.2), glue,
lifecycle, magrittr, pmxcv, purrr (&ge; 1.0.1), readr (&ge; 2.1.4),
rlang, stats, stringr (&ge; 1.5.0), tibble (&ge; 3.2.1), tidyr (&ge;
1.3.0), tidyselect, utils, vctrs, xpose</td>
</tr>
<tr>
<td>Suggests:</td>
<td>DiagrammeR, grDevices, knitr, rmarkdown, testthat (&ge; 3.0.0),
vdiffr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://jprybylski.github.io/xpose.xtras/">https://jprybylski.github.io/xpose.xtras/</a>,
<a href="https://github.com/jprybylski/xpose.xtras">https://github.com/jprybylski/xpose.xtras</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-11-20 19:03:45 UTC; PRYBYJ</td>
</tr>
<tr>
<td>Author:</td>
<td>John Prybylski <a href="https://orcid.org/0000-0001-5802-0539"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>John Prybylski &lt;john.prybylski@pfizer.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-11-21 17:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='xpose.xtras-package'>xpose.xtras: Extra Functionality for the 'xpose' Package</h2><span id='topic+xpose.xtras'></span><span id='topic+xpose.xtras-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Adding some at-present missing functionality, or functions unlikely to be added to the base 'xpose' package. This includes some diagnostic plots that have been missing in translation from 'xpose4', but also some useful features that truly extend the capabilities of what can be done with 'xpose'. These extensions include the concept of a set of 'xpose' objects, and diagnostics for likelihood-based models.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: John Prybylski <a href="mailto:john.prybylski@pfizer.com">john.prybylski@pfizer.com</a> (<a href="https://orcid.org/0000-0001-5802-0539">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://jprybylski.github.io/xpose.xtras/">https://jprybylski.github.io/xpose.xtras/</a>
</p>
</li>
<li> <p><a href="https://github.com/jprybylski/xpose.xtras">https://github.com/jprybylski/xpose.xtras</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='+25p+25'>Binary check if LHS is parent of LHS</h2><span id='topic++25p+25'></span>

<h3>Description</h3>

<p>Binary check if LHS is parent of LHS
</p>


<h3>Usage</h3>

<pre><code class='language-R'>possible_parent %p% possible_child
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25p+2B25_+3A_possible_parent">possible_parent</code></td>
<td>
<p>&lt;<code>xpose_set_item</code>&gt; object suspected as parent to ...</p>
</td></tr>
<tr><td><code id="+2B25p+2B25_+3A_possible_child">possible_child</code></td>
<td>
<p>... &lt;<code>xpose_set_item</code>&gt; object suspected child</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code style="white-space: pre;">&#8288;&lt;logical&gt;&#8288;</code> <code>TRUE</code> if LHS is parent of RHS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Detect direct parent
pheno_set$run6 %p% pheno_set$run7

# Detect non-parentage (does not try to "flip" parentage)
pheno_set$run6 %p% pheno_set$run5

# Does not detect grand-parentage
pheno_set$run6 %p% pheno_set$run13

</code></pre>

<hr>
<h2 id='add_prm_association'>Describe parameter associations</h2><span id='topic+add_prm_association'></span><span id='topic+drop_prm_association'></span>

<h3>Description</h3>

<p>The relationship between structural parameters and
omega parameters can be described. This is useful if
it deviates from the typical log-normal.
</p>
<p>Default transformations are those that are built into
<code>pmxcv</code>, but see examples for how associations can be
described for other relationships.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_prm_association(xpdb, ..., .problem, .subprob, .method, quiet)

drop_prm_association(xpdb, ..., .problem, .subprob, .method, quiet)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_prm_association_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code>xp_xtras</code>&gt; object</p>
</td></tr>
<tr><td><code id="add_prm_association_+3A_...">...</code></td>
<td>
<p>... &lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; One or more formulas that
define associations between parameters. One list of formulas can also be used,
but a warning is generated.
</p>
<p>For <code>drop_prm_association</code>, these dots should be selectors for which associations
will be dropped (<code style="white-space: pre;">&#8288;the2, the3,...&#8288;</code>). Fixed effect selectors only will work.</p>
</td></tr>
<tr><td><code id="add_prm_association_+3A_.problem">.problem</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to apply this relationship.</p>
</td></tr>
<tr><td><code id="add_prm_association_+3A_.subprob">.subprob</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to apply this relationship.</p>
</td></tr>
<tr><td><code id="add_prm_association_+3A_.method">.method</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to apply this relationship.</p>
</td></tr>
<tr><td><code id="add_prm_association_+3A_quiet">quiet</code></td>
<td>
<p>Silence extra output.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>At time of writing, the built-in distributions for <code>pmxcv</code> are below.
Those marked with an asterisk require a fixed effect parameter to calculate CV.
</p>

<ul>
<li> <p><code>log</code> typical log-normal. Optional <code>exact</code> parameter (if <code>TRUE</code>, default, will not
calculate with integration); this is unrelated to the <code>cvtype</code> option. <strong>Note</strong>,
if <code>cvtype</code> is set to <code>"sqrt"</code>, log-normal <code>gte_prm</code> CVs will use the square root, not any integration
or analytical estimate, regardless of how this association is specified..
</p>
</li>
<li> <p><code>logexp</code>* modified log-normal <code>log(1+X)</code>
</p>
</li>
<li> <p><code>logit</code>* logit-normal
</p>
</li>
<li> <p><code>arcsin</code>* arcsine-transform
</p>
</li>
<li> <p><code>nmboxcox</code>* Box-Cox transform as typically implemented in pharmacometrics.
Requires a <code>lambda</code> parameter.
</p>
</li></ul>

<p>To pass a custom parameter, use <code>custom</code> transform, and pass <code>pdist</code> and <code>qdist</code> to
that transform. See Examples.
</p>
<p>Reminder about <code>qdist</code> and <code>pdist</code>: Consider that <code>qlogis</code> transforms a proportion
to a continuous, unbounded number; it is the <code>logit</code> transform. The <code>pdist</code> function
converts a continuous, unbounded number to a proportion; it is the <em>inverse</em> <code>logit</code>
transform. Other R <code>stats</code> functions work similarly, and as such functions used as
<code>qdist</code> and <code>pdist</code> values are expected to act similarly.
</p>
<p>Note that the functions used in describing associations are not real functions,
it is just the syntax for this application. Based on examples, be mindful of
where positional arguments would acceptable and where named arguments are
required. Care has been given to provide a modest amount of flexibility
with informative errors for fragile points, but not every error can be anticipated.
If this function or downstream results from it seem wrong, the association syntax
should be scrutinized. These &quot;functions&quot; are not processed like in <code><a href="#topic+mutate_prm">mutate_prm</a></code>,
so (eg) <code>the2</code> will not be substituted for the value of <code>the2</code>; if
<code>lambda</code> is a fitted value (like <code>the2</code>), in that edge case the value of <code>the2</code> should be written
explicitly in the association formula, and if any <code>mutate_prm</code> changes <code>the2</code> then users
should be mindful of the new association needed. This may be updated in the future.
</p>
<p>Format for associations is:
<code>LHS~fun(OMEGA, args...)</code>
</p>

<ul>
<li><p> LHS: Selector for a fixed effect parameter. Can be <code style="white-space: pre;">&#8288;the{m}&#8288;</code> (eg, the1),
<code>{name}</code> (eg, THETA1) or <code>{label}</code> (eg, TVCL). These should <em>not</em> be quoted.
Multiple associations can be defined at once with <code>+</code>. Cannot be empty.
</p>
</li>
<li><p> RHS: Should be a simple call to only one function, which should be
custom or one of the built-in distributions or <code>custom(...)</code>. A lot of things
can look like simple calls, so may not break immediately; keep to the described
format and everything should be fine.
</p>
</li>
<li><p> RHS OMEGA: Selector for omega variable. Similar rules to the fixed
effect selector. Can be <code style="white-space: pre;">&#8288;ome{m}&#8288;</code>, <code>{name}</code> or <code>{label}</code>, limited to diagonal
elements. Should <em>not</em> be quoted. <code>OMEGA</code> is not a named argument (<code>OMEGA={selector}</code>
should <strong>not</strong> be considered valid); whatever is used as the first argument to the
&quot;function&quot; will be considered an OMEGA selector. <strong>NOTE</strong>, if selecting an OMEGA parameter
by name (eg, <code>OMEGA(2,2)</code>), backticks (eg <code>`OMEGA(2,2)`</code>) must be used or else the selection will throw
an error.
</p>
</li>
<li><p> RHS args: Applies when the distribution has extra arguments. If these
are limited to 1, can be passed by position (eg, <code>lambda</code> for <code>nmboxcox</code> and
<code>exact</code> for <code>log</code>). For <code>custom()</code>, <code>qdist</code>, <code>pdist</code> and any arguments needed to
pass to them should be named.
</p>
</li></ul>

<p>For the <code>nmboxcox</code> transformation, a lambda value (especially negative ones) may
not work well with the integration-based CV estimation. This may occur even if
the lambda is fitted and stable in that fitting, but it cannot be predicted which
ones will be affected. This note is intended to forewarn that this might happen.
</p>


<h3>Value</h3>

<p>An updated <code>xp_xtras</code> object
</p>


<h3>References</h3>

<p>Prybylski, J.P. Reporting Coefficient of Variation for Logit, Box-Cox and
Other Non-log-normal Parameters. Clin Pharmacokinet 63, 133-135 (2024).
https://doi.org/10.1007/s40262-023-01343-2
</p>


<h3>See Also</h3>

<p><code><a href="pmxcv.html#topic+dist.intcv">dist.intcv</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
pheno_base %&gt;%
   add_prm_association(the1~log(IIVCL),V~log(IIVV)) %&gt;%
   get_prm() # get_prm is the only way to see the effect of associations

# These values are not fitted as logit-normal, but
# just to illustrate:
pheno_final %&gt;%
   add_prm_association(the1~logit(IIVCL),Vpkg~logit(IIVV)) %&gt;%
   get_prm()

# ... same for Box-Cox
pheno_base %&gt;%
   add_prm_association(V~nmboxcox(IIVV, lambda=0.5)) %&gt;%
   # Naming the argument is optional
   add_prm_association(CL~nmboxcox(IIVCL, -0.1)) %&gt;%
   get_prm()

# A 'custom' use-case is when logexp, log(1+X), is
# desired but 1 is too large.
# Again, for this example, treating this like it applies here.
pheno_base %&gt;%
  add_prm_association(V~custom(IIVV, qdist=function(x) log(0.001+x),
        pdist=function(x) exp(x)-0.001)) %&gt;%
   get_prm()

# Dropping association is easy
bad_assoc &lt;- pheno_final %&gt;%
   add_prm_association(the1~logit(IIVCL),Vpkg~logit(IIVV))
bad_assoc

</code></pre>

<hr>
<h2 id='add_relationship'>Add relationship(s) to an xpose_set</h2><span id='topic+add_relationship'></span><span id='topic+remove_relationship'></span>

<h3>Description</h3>

<p>Add relationship(s) to an xpose_set
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_relationship(xpdb_s, ..., .warn = TRUE, .remove = FALSE)

remove_relationship(xpdb_s, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_relationship_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code><a href="#topic+xpose_set">xpose_set</a></code>&gt; An xpose_set object</p>
</td></tr>
<tr><td><code id="add_relationship_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; One or more formulas that define relationships between models. One list of formulas can also be used, but a warning is generated.</p>
</td></tr>
<tr><td><code id="add_relationship_+3A_.warn">.warn</code></td>
<td>
<p>&lt;<code><a href="base.html#topic+logical">logical</a></code>&gt; Should warnings be generated for non-formula inputs? (default: <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="add_relationship_+3A_.remove">.remove</code></td>
<td>
<p>&lt;<code><a href="base.html#topic+logical">logical</a></code>&gt; Should listed relationships be removed? (default: <code>FALSE</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>xpose_set</code> object with relationships added
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
xpdb_set %&gt;%
  add_relationship(mod1~fix2) # ouroboros

xpdb_set %&gt;%
  remove_relationship(fix1~mod2) # split down the middle

</code></pre>

<hr>
<h2 id='add_xpdb'>Add one or more <code>xpdb</code> objects to an <code>xpose_set</code></h2><span id='topic+add_xpdb'></span>

<h3>Description</h3>

<p>Add one or more <code>xpdb</code> objects to an <code>xpose_set</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_xpdb(xpdb_s, ..., .relationships = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_xpdb_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code><a href="#topic+xpose_set">xpose_set</a></code>&gt; An xpose_set object</p>
</td></tr>
<tr><td><code id="add_xpdb_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; One or more <code>xpdb</code> objects to add to the set</p>
</td></tr>
<tr><td><code id="add_xpdb_+3A_.relationships">.relationships</code></td>
<td>
<p>&lt;<code><a href="base.html#topic+list">list</a></code>&gt; A list of relationships between the <code>xpdb</code> objects.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>xpose_set</code> object with the new <code>xpdb</code> objects added
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("xpdb_ex_pk", package = "xpose")

add_xpdb(xpdb_set, ttt=xpdb_ex_pk)

</code></pre>

<hr>
<h2 id='as_leveler'>Level-defining helper functions</h2><span id='topic+as_leveler'></span><span id='topic+is_leveler'></span><span id='topic+lvl_bin'></span><span id='topic+lvl_sex'></span><span id='topic+lvl_inord'></span>

<h3>Description</h3>

<p>Level-defining helper functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_leveler(x, .start_index = 1)

is_leveler(x)

lvl_bin(x = c("No", "Yes"), .start_index = 0)

lvl_sex()

lvl_inord(x, .start_index = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_leveler_+3A_x">x</code></td>
<td>
<p>&lt;<code>character</code>&gt; vector of levels</p>
</td></tr>
<tr><td><code id="as_leveler_+3A_.start_index">.start_index</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; starting index for levels</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Special character vector suitable to be used as leveler
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
set_var_levels(xpdb_x,
  SEX = lvl_sex(),
  MED1 = lvl_bin(),
  MED2 = lvl_inord(c("n","y"), .start_index = 0)
  )

</code></pre>

<hr>
<h2 id='as_xpdb_x'>Convert an object to an <code>xpose_data</code> and <code>xp_xtras</code> object</h2><span id='topic+as_xpdb_x'></span><span id='topic+as_xp_xtras'></span><span id='topic+check_xpdb_x'></span><span id='topic+check_xp_xtras'></span>

<h3>Description</h3>

<p>This function masks the default in <code>xpose</code> package, adding the
<code>xp_xtras</code> class to default <code>xpose_data</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_xpdb_x(x)

as_xp_xtras(x)

check_xpdb_x(x, .warn = TRUE)

check_xp_xtras(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_xpdb_x_+3A_x">x</code></td>
<td>
<p>Suspected <code>xp_xtras</code> object</p>
</td></tr>
<tr><td><code id="as_xpdb_x_+3A_.warn">.warn</code></td>
<td>
<p>&lt;<code>logical</code>&gt; Whether to warn if <code>xpose_data</code> but not <code>xp_xtras</code></p>
</td></tr>
<tr><td><code id="as_xpdb_x_+3A_...">...</code></td>
<td>
<p>Forwarded</p>
</td></tr>
</table>


<h3>Value</h3>

<p>&lt;<code><a href="xpose.html#topic+xpose_data">xpose_data</a></code>&gt; and &lt;<code>xp_xtras</code>&gt; object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>xp_x &lt;- as_xpdb_x(xpose::xpdb_ex_pk)
check_xpdb_x(xp_x)

</code></pre>

<hr>
<h2 id='backfill_iofv'>Add individual objective function to data</h2><span id='topic+backfill_iofv'></span>

<h3>Description</h3>

<p>Add individual objective function to data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>backfill_iofv(xpdb, .problem = NULL, .subprob = NULL, .label = "iOFV")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="backfill_iofv_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code>xpose_data</code>&gt; or &lt;<code>xp_xtras</code>&gt; object</p>
</td></tr>
<tr><td><code id="backfill_iofv_+3A_.problem">.problem</code></td>
<td>
<p>Problem number</p>
</td></tr>
<tr><td><code id="backfill_iofv_+3A_.subprob">.subprob</code></td>
<td>
<p>Subproblem number</p>
</td></tr>
<tr><td><code id="backfill_iofv_+3A_.label">.label</code></td>
<td>
<p>The name of the new column. <code>iOFV</code> is the default.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function will only work for objects with software listed as
<code>nonmem</code>, which has a <code>phi</code> file and with an <code>OBJ</code> column in that
file.
</p>


<h3>Value</h3>

<p>&lt;<code>xp_xtras</code>&gt; object with new column in the data and a
column with <code>iofv</code> var type.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
xpdb_x %&gt;%
  backfill_iofv() %&gt;%
  list_vars()

</code></pre>

<hr>
<h2 id='catdv_vs_dvprobs'>Non-simulation based likelihood model diagnostic</h2><span id='topic+catdv_vs_dvprobs'></span>

<h3>Description</h3>

<p>These plots attempt to provide a means of verifying that the
estimated likelihoods and probabilities for categorical outcomes
are captured within the model.
</p>
<p>When the smooth spline is included (<code>type</code> includes <code>"s"</code>), it is
expected that the overall trend is up and to the right; a relatively
flat trend suggests that the modeled likelihood is inconsistent with the
observed outcome.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catdv_vs_dvprobs(
  xpdb,
  mapping = NULL,
  cutpoint = 1,
  type = "vbs",
  title = "@y vs. @x | @run",
  subtitle = "Ofv: @ofv, Number of individuals: @nind",
  caption = "@dir",
  tag = NULL,
  xlab = c("probability", "basic"),
  facets,
  .problem,
  quiet,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catdv_vs_dvprobs_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code>xp_xtras</code>&gt; or &lt;<code>xpose_data</code>&gt; object</p>
</td></tr>
<tr><td><code id="catdv_vs_dvprobs_+3A_mapping">mapping</code></td>
<td>
<p><code>ggplot2</code> style mapping</p>
</td></tr>
<tr><td><code id="catdv_vs_dvprobs_+3A_cutpoint">cutpoint</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Of defined probabilities, which one to
use in plots.</p>
</td></tr>
<tr><td><code id="catdv_vs_dvprobs_+3A_type">type</code></td>
<td>
<p>See Details.</p>
</td></tr>
<tr><td><code id="catdv_vs_dvprobs_+3A_title">title</code></td>
<td>
<p>Plot title</p>
</td></tr>
<tr><td><code id="catdv_vs_dvprobs_+3A_subtitle">subtitle</code></td>
<td>
<p>Plot subtitle</p>
</td></tr>
<tr><td><code id="catdv_vs_dvprobs_+3A_caption">caption</code></td>
<td>
<p>Plot caption</p>
</td></tr>
<tr><td><code id="catdv_vs_dvprobs_+3A_tag">tag</code></td>
<td>
<p>Plot tag</p>
</td></tr>
<tr><td><code id="catdv_vs_dvprobs_+3A_xlab">xlab</code></td>
<td>
<p>Either use the typical basic x-axis label (the cutpoint-defined
column name) or label it based on the probability/likelihood it is estimating.</p>
</td></tr>
<tr><td><code id="catdv_vs_dvprobs_+3A_facets">facets</code></td>
<td>
<p>Additional facets</p>
</td></tr>
<tr><td><code id="catdv_vs_dvprobs_+3A_.problem">.problem</code></td>
<td>
<p>Problem number</p>
</td></tr>
<tr><td><code id="catdv_vs_dvprobs_+3A_quiet">quiet</code></td>
<td>
<p>Silence extra debugging output</p>
</td></tr>
<tr><td><code id="catdv_vs_dvprobs_+3A_...">...</code></td>
<td>
<p>Any additional aesthetics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The desired plot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Test M3 model
pkpd_m3 %&gt;%
  # Need to ensure var types are set
  set_var_types(catdv=BLQ,dvprobs=LIKE) %&gt;%
  # Set probs
  set_dv_probs(1, 1~LIKE, .dv_var = BLQ) %&gt;%
  # Optional, but useful to set levels
  set_var_levels(1, BLQ = lvl_bin()) %&gt;%
  # Plot with basic xlab makes no assumptions
  catdv_vs_dvprobs(xlab = "basic")

# Test categorical model
vismo_xpdb &lt;- vismo_pomod  %&gt;%
  set_var_types(.problem=1, catdv=DV, dvprobs=matches("^P\\d+$")) %&gt;%
  set_dv_probs(.problem=1, 0~P0,1~P1,ge(2)~P23)

# Various cutpoints (note axes labels and texts)
vismo_xpdb %&gt;%
  catdv_vs_dvprobs(xlab = "basic")
vismo_xpdb %&gt;%
  catdv_vs_dvprobs(cutpoint = 2, xlab = "basic")
vismo_xpdb %&gt;%
  catdv_vs_dvprobs(cutpoint = 3, xlab = "basic")

# Latter is arguably clearer with default xlab
vismo_xpdb %&gt;%
  catdv_vs_dvprobs(cutpoint = 3)

</code></pre>

<hr>
<h2 id='check_levels'>Verify validity of level list</h2><span id='topic+check_levels'></span>

<h3>Description</h3>

<p>Verify validity of level list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_levels(lvl_list, index)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_levels_+3A_lvl_list">lvl_list</code></td>
<td>
<p>&lt;<code>list</code>&gt; of formulas or leveler functions</p>
</td></tr>
<tr><td><code id="check_levels_+3A_index">index</code></td>
<td>
<p>Index of <code>xp_xtras</code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing, warning or error
</p>

<hr>
<h2 id='check_xpose_set'>Check an <code>xpose_set</code> object</h2><span id='topic+check_xpose_set'></span><span id='topic+check_xpose_set_item'></span>

<h3>Description</h3>

<p>Check an <code>xpose_set</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_xpose_set(xpdb_s, .warn = TRUE)

check_xpose_set_item(xpdb_s_i, .example = xpdb_set)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_xpose_set_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code><a href="#topic+xpose_set">xpose_set</a></code>&gt; An xpose_set object</p>
</td></tr>
<tr><td><code id="check_xpose_set_+3A_.warn">.warn</code></td>
<td>
<p>&lt;<code>logical</code>&gt; Display a warning on failure.</p>
</td></tr>
<tr><td><code id="check_xpose_set_+3A_xpdb_s_i">xpdb_s_i</code></td>
<td>
<p>&lt;<code><a href="#topic+xpose_set">xpose_set_item</a></code>&gt; An xpose_set_item object (element of an xpose_set)</p>
</td></tr>
<tr><td><code id="check_xpose_set_+3A_.example">.example</code></td>
<td>
<p>&lt;<code>xpose_set</code>&gt; Basis of comparison for <code>xpose_s_i</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE or error thrown
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
check_xpose_set(xpdb_set)

check_xpose_set_item(xpdb_set$mod1)

</code></pre>

<hr>
<h2 id='desc_from_comments'>Backfill utility for descriptions</h2><span id='topic+desc_from_comments'></span>

<h3>Description</h3>

<p>A slightly more generic approach to getting model
descriptions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>desc_from_comments(
  xpdb,
  start_check = ".*description",
  maxlines = 5,
  remove = paste0(start_check, ":\\s*"),
  extra_proc = c,
  collapse = " "
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="desc_from_comments_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code>xpose_data</code>&gt; or &lt;<code>xp_xtras</code>&gt; object</p>
</td></tr>
<tr><td><code id="desc_from_comments_+3A_start_check">start_check</code></td>
<td>
<p>Regular expression used to mark start of description.
This is tested case-insensitively.</p>
</td></tr>
<tr><td><code id="desc_from_comments_+3A_maxlines">maxlines</code></td>
<td>
<p>If the number of lines after description to the first
code block is more than 1, this allows a limit.</p>
</td></tr>
<tr><td><code id="desc_from_comments_+3A_remove">remove</code></td>
<td>
<p>By default, the start check and a colon, with optional whitespace.
A regex.</p>
</td></tr>
<tr><td><code id="desc_from_comments_+3A_extra_proc">extra_proc</code></td>
<td>
<p>Any extra processing that might be desired prior to
collapsing the description lines. This should be a vectorized function.</p>
</td></tr>
<tr><td><code id="desc_from_comments_+3A_collapse">collapse</code></td>
<td>
<p>Character to use when collapsing multiple lines.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The description-updated &lt;<code>xpose_data</code>) object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+set_prop">set_prop()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# This has a description, but it's not visible by default
pheno_base

# It can be added with the following
pheno_base %&gt;%
  desc_from_comments()

# Extra processing for preference can also implemented
pheno_base %&gt;%
  desc_from_comments(extra_proc = tolower)

# If a run label ($PROB) would make a good description, use the
# following instead:
pkpd_m3 %&gt;%
  set_prop(descr=get_prop(pkpd_m3,"label"))


</code></pre>

<hr>
<h2 id='diagram_lineage'>Visualize <code>xpose_set</code></h2><span id='topic+diagram_lineage'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>In its current state, this function is intended to
provide a simple visual representation of an <code>xpose_set</code>.
Functionality and aesthetic enhancements are expected in
future releases.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diagram_lineage(xpdb_s, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="diagram_lineage_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code>xpose_set</code>&gt; object</p>
</td></tr>
<tr><td><code id="diagram_lineage_+3A_...">...</code></td>
<td>
<p>For later expansion. Will be ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A DiagrammeR-compliant graph object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
diagram_lineage(pheno_set) %&gt;%
  DiagrammeR::render_graph(layout="tree")

</code></pre>

<hr>
<h2 id='diff.xpose_set'>Display deltaOFV values across <code>xpose_set</code></h2><span id='topic+diff.xpose_set'></span>

<h3>Description</h3>

<p>If no base model is provided, and if lineage is unclear,
the first model in the <code>xpose_set</code> is used as the base model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'xpose_set'
diff(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="diff.xpose_set_+3A_x">x</code></td>
<td>
<p>&lt;<code>xpose_set</code>&gt; object</p>
</td></tr>
<tr><td><code id="diff.xpose_set_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; Passed to &lt;<code><a href="#topic+xset_lineage">xset_lineage</a></code>&gt;.
<code>.spinner=FALSE</code> can also be set here.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>&lt;<code>numeric</code>&gt; vector of deltaOFV values
</p>

<hr>
<h2 id='duplicated.xpose_set'>Check if any xpose_data objects are repeated in xpose_set</h2><span id='topic+duplicated.xpose_set'></span>

<h3>Description</h3>

<p>Check if any xpose_data objects are repeated in xpose_set
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'xpose_set'
duplicated(x, incomparables = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="duplicated.xpose_set_+3A_x">x</code></td>
<td>
<p>&lt;<code>xpose_set</code>&gt;</p>
</td></tr>
<tr><td><code id="duplicated.xpose_set_+3A_incomparables">incomparables</code></td>
<td>
<p><code>FALSE</code></p>
</td></tr>
<tr><td><code id="duplicated.xpose_set_+3A_...">...</code></td>
<td>
<p>Must be empty</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical vector or list of logical vectors
</p>

<hr>
<h2 id='dv_vs_ipred_modavg'>Model average plots</h2><span id='topic+dv_vs_ipred_modavg'></span><span id='topic+dv_vs_pred_modavg'></span><span id='topic+ipred_vs_idv_modavg'></span><span id='topic+pred_vs_idv_modavg'></span><span id='topic+plotfun_modavg'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>This is for use when the model averaging of a set
is planned.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dv_vs_ipred_modavg(
  xpdb_s,
  ...,
  .lineage = FALSE,
  algorithm = c("maa", "msa"),
  weight_type = c("individual", "population"),
  auto_backfill = FALSE,
  weight_basis = c("ofv", "aic", "res"),
  res_col = "RES",
  quiet
)

dv_vs_pred_modavg(
  xpdb_s,
  ...,
  .lineage = FALSE,
  algorithm = c("maa", "msa"),
  weight_type = c("individual", "population"),
  auto_backfill = FALSE,
  weight_basis = c("ofv", "aic", "res"),
  res_col = "RES",
  quiet
)

ipred_vs_idv_modavg(
  xpdb_s,
  ...,
  .lineage = FALSE,
  algorithm = c("maa", "msa"),
  weight_type = c("individual", "population"),
  auto_backfill = FALSE,
  weight_basis = c("ofv", "aic", "res"),
  res_col = "RES",
  quiet
)

pred_vs_idv_modavg(
  xpdb_s,
  ...,
  .lineage = FALSE,
  algorithm = c("maa", "msa"),
  weight_type = c("individual", "population"),
  auto_backfill = FALSE,
  weight_basis = c("ofv", "aic", "res"),
  res_col = "RES",
  quiet
)

plotfun_modavg(
  xpdb_s,
  ...,
  .lineage = FALSE,
  avg_cols = NULL,
  avg_by_type = NULL,
  algorithm = c("maa", "msa"),
  weight_type = c("individual", "population"),
  auto_backfill = FALSE,
  weight_basis = c("ofv", "aic", "res"),
  res_col = "RES",
  .fun = NULL,
  .funargs = list(),
  quiet
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dv_vs_ipred_modavg_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code>xpose_set</code>&gt; object</p>
</td></tr>
<tr><td><code id="dv_vs_ipred_modavg_+3A_...">...</code></td>
<td>
<p>&lt;<code>tidyselect</code>&gt; of models in set. If empty, all models are
used in order of their position in the set. May also use a formula,
which will just be processed with <code>all.vars()</code>.</p>
</td></tr>
<tr><td><code id="dv_vs_ipred_modavg_+3A_.lineage">.lineage</code></td>
<td>
<p>&lt;<code>logical</code>&gt; where if <code>TRUE</code>, <code>...</code> is processed</p>
</td></tr>
<tr><td><code id="dv_vs_ipred_modavg_+3A_algorithm">algorithm</code></td>
<td>
<p>&lt;<code>character</code>&gt; Model selection or model averaging</p>
</td></tr>
<tr><td><code id="dv_vs_ipred_modavg_+3A_weight_type">weight_type</code></td>
<td>
<p>&lt;<code>character</code>&gt; Individual-level averaging or by full dataset.</p>
</td></tr>
<tr><td><code id="dv_vs_ipred_modavg_+3A_auto_backfill">auto_backfill</code></td>
<td>
<p>&lt;<code>logical</code>&gt; If true, &lt;<code><a href="#topic+backfill_iofv">backfill_iofv</a></code>&gt; is automatically
applied.</p>
</td></tr>
<tr><td><code id="dv_vs_ipred_modavg_+3A_weight_basis">weight_basis</code></td>
<td>
<p>&lt;<code>character</code>&gt; Weigh by OFV (default), AIC or residual.</p>
</td></tr>
<tr><td><code id="dv_vs_ipred_modavg_+3A_res_col">res_col</code></td>
<td>
<p>&lt;<code>character</code>&gt; Column to weight by if <code>"res"</code> weight basis.</p>
</td></tr>
<tr><td><code id="dv_vs_ipred_modavg_+3A_quiet">quiet</code></td>
<td>
<p>&lt;<code>logical</code>&gt; Minimize extra output.</p>
</td></tr>
<tr><td><code id="dv_vs_ipred_modavg_+3A_avg_cols">avg_cols</code></td>
<td>
<p>&lt;<code>tidyselect</code>&gt; columns in data to average</p>
</td></tr>
<tr><td><code id="dv_vs_ipred_modavg_+3A_avg_by_type">avg_by_type</code></td>
<td>
<p>&lt;<code>character</code>&gt; Mainly for use in wrapper functions.
Column type to average, but resulting column names must be valid
for <code>avg_cols</code> (ie, same across all objects in the set). <code>avg_cols</code> will
be overwritten.</p>
</td></tr>
<tr><td><code id="dv_vs_ipred_modavg_+3A_.fun">.fun</code></td>
<td>
<p>&lt;<code>function</code>&gt; For slightly more convenient
piping of model-averaged <code>xpose_data</code> into a plotting
function.</p>
</td></tr>
<tr><td><code id="dv_vs_ipred_modavg_+3A_.funargs">.funargs</code></td>
<td>
<p>&lt;<code>list</code>&gt; Extra args to pass to function.
If passing <code>tidyselect</code> arguments, be mindful of where
quosures might be needed. See Examples.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The desired plot
</p>


<h3>See Also</h3>

<p><code><a href="#topic+modavg_xpdb">modavg_xpdb()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

pheno_set %&gt;%
  dv_vs_ipred_modavg(run8,run9,run10, auto_backfill = TRUE)

pheno_set %&gt;%
  dv_vs_pred_modavg(run8,run9,run10, auto_backfill = TRUE)

pheno_set %&gt;%
  ipred_vs_idv_modavg(run8,run9,run10, auto_backfill = TRUE)

pheno_set %&gt;%
  pred_vs_idv_modavg(run8,run9,run10, auto_backfill = TRUE)

# Model averaged ETA covariates
pheno_set %&gt;%
  plotfun_modavg(run8,run9,run10, auto_backfill = TRUE,
     avg_by_type = "eta",.fun = eta_vs_catcov,
     # Note quoting
     .funargs = list(etavar=quote(ETA1)))


</code></pre>

<hr>
<h2 id='edit_xpose_data'>Master xpdb editing function</h2><span id='topic+edit_xpose_data'></span>

<h3>Description</h3>

<p>Generic function used to build dedicated editing functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edit_xpose_data(
  .fun,
  .fname,
  .data,
  ...,
  .problem,
  .source,
  .where,
  check_quos = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="edit_xpose_data_+3A_.fun">.fun</code></td>
<td>
<p>An editing function to be applied to the data.</p>
</td></tr>
<tr><td><code id="edit_xpose_data_+3A_.fname">.fname</code></td>
<td>
<p>The name of the editing function.</p>
</td></tr>
<tr><td><code id="edit_xpose_data_+3A_.data">.data</code></td>
<td>
<p>An xpose database object.</p>
</td></tr>
<tr><td><code id="edit_xpose_data_+3A_...">...</code></td>
<td>
<p>Name-value pairs of expressions. Use <code>NULL</code> to drop a variable.</p>
</td></tr>
<tr><td><code id="edit_xpose_data_+3A_.problem">.problem</code></td>
<td>
<p>The problem from which the data will be modified</p>
</td></tr>
<tr><td><code id="edit_xpose_data_+3A_.source">.source</code></td>
<td>
<p>The source of the data in the xpdb. Can either be 'data' or an output
file extension e.g. 'phi'.</p>
</td></tr>
<tr><td><code id="edit_xpose_data_+3A_.where">.where</code></td>
<td>
<p>A vector of element names to be edited in special (e.g.
<code>.where = c('vpc_dat', 'aggr_obs')</code> with vpc).</p>
</td></tr>
<tr><td><code id="edit_xpose_data_+3A_check_quos">check_quos</code></td>
<td>
<p>Check that variables referenced exists. <code>TRUE</code> matches the
behavior of &lt;<code><a href="xpose.html#topic+edit_xpose_data">xpose::edit_xpose_data</a></code>&gt;
</p>
<p>These arguments are automatically quoted and evaluated in the
context of the data frame. They support unquoting and splicing.
See the dplyr vignette(&quot;programming&quot;) for an introduction to these concepts.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified <code>xpose_data</code> object
</p>

<hr>
<h2 id='eta_grid'>Grid plots</h2><span id='topic+eta_grid'></span><span id='topic+cov_grid'></span><span id='topic+eta_vs_cov_grid'></span>

<h3>Description</h3>

<p>This is essentially a wrapper around <code><a href="GGally.html#topic+ggpairs">ggpairs</a></code>,
except it uses <code>xpose</code> motifs and styling. Note that this function
produces a lot of repetitive output if <code>quiet=FALSE</code>; this may not
be an issue, but it could look like an error has occurred if many covariates
and individual parameter estimates are included.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eta_grid(
  xpdb,
  mapping = NULL,
  etavar = NULL,
  drop_fixed = TRUE,
  title = "Eta correlations | @run",
  subtitle = "Based on @nind individuals, Eta shrink: @etashk",
  caption = "@dir",
  tag = NULL,
  pairs_opts,
  .problem,
  quiet,
  ...
)

cov_grid(
  xpdb,
  mapping = NULL,
  cols = NULL,
  covtypes = c("cont", "cat"),
  show_n = TRUE,
  drop_fixed = TRUE,
  title = "Covariate relationships | @run",
  subtitle = "Based on @nind individuals",
  caption = "@dir",
  tag = NULL,
  pairs_opts,
  .problem,
  quiet,
  ...
)

eta_vs_cov_grid(
  xpdb,
  mapping = NULL,
  etavar = NULL,
  cols = NULL,
  covtypes = c("cont", "cat"),
  show_n = TRUE,
  drop_fixed = TRUE,
  title = "Eta covariate correlations | @run",
  subtitle = "Based on @nind individuals, Eta shrink: @etashk",
  caption = "@dir",
  tag = NULL,
  etacov = TRUE,
  pairs_opts,
  .problem,
  quiet,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eta_grid_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code style="white-space: pre;">&#8288;xp_xtras&gt; or  &lt;&#8288;</code>xpose_data'&gt; object</p>
</td></tr>
<tr><td><code id="eta_grid_+3A_mapping">mapping</code></td>
<td>
<p><code>ggplot2</code> style mapping</p>
</td></tr>
<tr><td><code id="eta_grid_+3A_etavar">etavar</code></td>
<td>
<p><code>tidyselect</code> for <code>eta</code> variables</p>
</td></tr>
<tr><td><code id="eta_grid_+3A_drop_fixed">drop_fixed</code></td>
<td>
<p>As in <code>xpose</code></p>
</td></tr>
<tr><td><code id="eta_grid_+3A_title">title</code></td>
<td>
<p>Plot title</p>
</td></tr>
<tr><td><code id="eta_grid_+3A_subtitle">subtitle</code></td>
<td>
<p>Plot subtitle</p>
</td></tr>
<tr><td><code id="eta_grid_+3A_caption">caption</code></td>
<td>
<p>Plot caption</p>
</td></tr>
<tr><td><code id="eta_grid_+3A_tag">tag</code></td>
<td>
<p>Plot tag</p>
</td></tr>
<tr><td><code id="eta_grid_+3A_pairs_opts">pairs_opts</code></td>
<td>
<p>List of arguments to pass to <code style="white-space: pre;">&#8288;_opts&#8288;</code>. See &lt;<code><a href="#topic+xplot_pairs">xplot_pairs</a></code>&gt;</p>
</td></tr>
<tr><td><code id="eta_grid_+3A_.problem">.problem</code></td>
<td>
<p>Problem number</p>
</td></tr>
<tr><td><code id="eta_grid_+3A_quiet">quiet</code></td>
<td>
<p>Silence extra debugging output</p>
</td></tr>
<tr><td><code id="eta_grid_+3A_...">...</code></td>
<td>
<p>Passed to <code>xplot_pairs</code></p>
</td></tr>
<tr><td><code id="eta_grid_+3A_cols">cols</code></td>
<td>
<p><code>tidyselect</code> for covariates variables</p>
</td></tr>
<tr><td><code id="eta_grid_+3A_covtypes">covtypes</code></td>
<td>
<p>Subset to specific covariate type?</p>
</td></tr>
<tr><td><code id="eta_grid_+3A_show_n">show_n</code></td>
<td>
<p>Count the number of <code>ID</code>s in each category</p>
</td></tr>
<tr><td><code id="eta_grid_+3A_etacov">etacov</code></td>
<td>
<p>For<code>eta_vs_cov_grid</code>, <code>eta</code> are sorted after covariates to
give an <code>x</code> orientation to covariate relationships.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>xp_tras_plot</code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

eta_grid(xpdb_x)
cov_grid(xpdb_x)
eta_vs_cov_grid(xpdb_x)

# Labels and units are also supported
xpdb_x %&gt;%
  xpose::set_var_labels(AGE="Age", MED1 = "Digoxin") %&gt;%
  xpose::set_var_units(AGE="yrs") %&gt;%
  set_var_levels(SEX=lvl_sex(), MED1 = lvl_bin()) %&gt;%
  eta_vs_cov_grid()


</code></pre>

<hr>
<h2 id='eta_vs_catcov'>Eta categorical covariate plots (typical)</h2><span id='topic+eta_vs_catcov'></span>

<h3>Description</h3>

<p>Eta categorical covariate plots (typical)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eta_vs_catcov(
  xpdb,
  mapping = NULL,
  etavar = NULL,
  drop_fixed = TRUE,
  orientation = "x",
  show_n = check_xpdb_x(xpdb, .warn = FALSE),
  type = "bol",
  title = "Eta versus categorical covariates | @run",
  subtitle = "Based on @nind individuals, Eta shrink: @etashk",
  caption = "@dir",
  tag = NULL,
  facets,
  .problem,
  quiet,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eta_vs_catcov_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code style="white-space: pre;">&#8288;xp_xtras&gt; or  &lt;&#8288;</code>xpose_data'&gt; object</p>
</td></tr>
<tr><td><code id="eta_vs_catcov_+3A_mapping">mapping</code></td>
<td>
<p><code>ggplot2</code> style mapping</p>
</td></tr>
<tr><td><code id="eta_vs_catcov_+3A_etavar">etavar</code></td>
<td>
<p><code>tidyselect</code> for <code>eta</code> variables</p>
</td></tr>
<tr><td><code id="eta_vs_catcov_+3A_drop_fixed">drop_fixed</code></td>
<td>
<p>As in <code>xpose</code></p>
</td></tr>
<tr><td><code id="eta_vs_catcov_+3A_orientation">orientation</code></td>
<td>
<p>Passed to <code>xplot_boxplot</code></p>
</td></tr>
<tr><td><code id="eta_vs_catcov_+3A_show_n">show_n</code></td>
<td>
<p>Add &quot;N=&quot; to plot</p>
</td></tr>
<tr><td><code id="eta_vs_catcov_+3A_type">type</code></td>
<td>
<p>Passed to <code>xplot_boxplot</code></p>
</td></tr>
<tr><td><code id="eta_vs_catcov_+3A_title">title</code></td>
<td>
<p>Plot title</p>
</td></tr>
<tr><td><code id="eta_vs_catcov_+3A_subtitle">subtitle</code></td>
<td>
<p>Plot subtitle</p>
</td></tr>
<tr><td><code id="eta_vs_catcov_+3A_caption">caption</code></td>
<td>
<p>Plot caption</p>
</td></tr>
<tr><td><code id="eta_vs_catcov_+3A_tag">tag</code></td>
<td>
<p>Plot tag</p>
</td></tr>
<tr><td><code id="eta_vs_catcov_+3A_facets">facets</code></td>
<td>
<p>Additional facets</p>
</td></tr>
<tr><td><code id="eta_vs_catcov_+3A_.problem">.problem</code></td>
<td>
<p>Problem number</p>
</td></tr>
<tr><td><code id="eta_vs_catcov_+3A_quiet">quiet</code></td>
<td>
<p>Silence output</p>
</td></tr>
<tr><td><code id="eta_vs_catcov_+3A_...">...</code></td>
<td>
<p>Any additional aesthetics.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The ability to show number per covariate level is inspired
by the package <code>pmplots</code>, but is implements here within
the <code>xpose</code> ecosystem for consistency.
</p>


<h3>Value</h3>

<p>The desired plot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

eta_vs_catcov(xpdb_x)

# Labels and units are also supported
xpdb_x %&gt;%
  xpose::set_var_labels(AGE="Age", MED1 = "Digoxin") %&gt;%
  xpose::set_var_units(AGE="yrs") %&gt;%
  set_var_levels(SEX=lvl_sex(), MED1 = lvl_bin()) %&gt;%
  eta_vs_catcov()

</code></pre>

<hr>
<h2 id='eta_vs_contcov'>Eta continuous covariate plots (typical)</h2><span id='topic+eta_vs_contcov'></span>

<h3>Description</h3>

<p>Eta continuous covariate plots (typical)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eta_vs_contcov(
  xpdb,
  mapping = NULL,
  etavar = NULL,
  drop_fixed = TRUE,
  linsm = FALSE,
  type = "ps",
  title = "Eta versus continuous covariates | @run",
  subtitle = "Based on @nind individuals, Eta shrink: @etashk",
  caption = "@dir",
  tag = NULL,
  log = NULL,
  guide = TRUE,
  facets,
  .problem,
  quiet,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eta_vs_contcov_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code style="white-space: pre;">&#8288;xp_xtras&gt; or &lt;&#8288;</code>xpose_data'&gt; object</p>
</td></tr>
<tr><td><code id="eta_vs_contcov_+3A_mapping">mapping</code></td>
<td>
<p><code>ggplot2</code> style mapping</p>
</td></tr>
<tr><td><code id="eta_vs_contcov_+3A_etavar">etavar</code></td>
<td>
<p><code>tidyselect</code> for <code>eta</code> variables</p>
</td></tr>
<tr><td><code id="eta_vs_contcov_+3A_drop_fixed">drop_fixed</code></td>
<td>
<p>As in <code>xpose</code></p>
</td></tr>
<tr><td><code id="eta_vs_contcov_+3A_linsm">linsm</code></td>
<td>
<p>If <code>type</code> contains &quot;s&quot; should the smooth method by <code>lm</code>?</p>
</td></tr>
<tr><td><code id="eta_vs_contcov_+3A_type">type</code></td>
<td>
<p>Passed to <code>xplot_scatter</code></p>
</td></tr>
<tr><td><code id="eta_vs_contcov_+3A_title">title</code></td>
<td>
<p>Plot title</p>
</td></tr>
<tr><td><code id="eta_vs_contcov_+3A_subtitle">subtitle</code></td>
<td>
<p>Plot subtitle</p>
</td></tr>
<tr><td><code id="eta_vs_contcov_+3A_caption">caption</code></td>
<td>
<p>Plot caption</p>
</td></tr>
<tr><td><code id="eta_vs_contcov_+3A_tag">tag</code></td>
<td>
<p>Plot tag</p>
</td></tr>
<tr><td><code id="eta_vs_contcov_+3A_log">log</code></td>
<td>
<p>Log scale covariate value?</p>
</td></tr>
<tr><td><code id="eta_vs_contcov_+3A_guide">guide</code></td>
<td>
<p>Add guide line?</p>
</td></tr>
<tr><td><code id="eta_vs_contcov_+3A_facets">facets</code></td>
<td>
<p>Additional facets</p>
</td></tr>
<tr><td><code id="eta_vs_contcov_+3A_.problem">.problem</code></td>
<td>
<p>Problem number</p>
</td></tr>
<tr><td><code id="eta_vs_contcov_+3A_quiet">quiet</code></td>
<td>
<p>Silence output</p>
</td></tr>
<tr><td><code id="eta_vs_contcov_+3A_...">...</code></td>
<td>
<p>Any additional aesthetics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The desired plot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

eta_vs_contcov(xpdb_x)

# Labels and units are also supported
xpdb_x %&gt;%
  xpose::set_var_labels(AGE="Age", MED1 = "Digoxin") %&gt;%
  xpose::set_var_units(AGE="yrs") %&gt;%
  set_var_levels(SEX=lvl_sex(), MED1 = lvl_bin()) %&gt;%
  eta_vs_contcov()

</code></pre>

<hr>
<h2 id='expose_param'>Expose a model parameter of xpdb objects in an xpose_set</h2><span id='topic+expose_param'></span>

<h3>Description</h3>

<p>Expose a model parameter of xpdb objects in an xpose_set
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expose_param(xpdb_s, ..., .problem = NULL, .subprob = NULL, .method = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="expose_param_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code><a href="#topic+xpose_set">xpose_set</a></code>&gt; An xpose_set object</p>
</td></tr>
<tr><td><code id="expose_param_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; One or more parameter
to expose, using selection rules from <code><a href="#topic+add_prm_association">add_prm_association</a></code>.</p>
</td></tr>
<tr><td><code id="expose_param_+3A_.problem">.problem</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to apply this relationship.</p>
</td></tr>
<tr><td><code id="expose_param_+3A_.subprob">.subprob</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to apply this relationship.</p>
</td></tr>
<tr><td><code id="expose_param_+3A_.method">.method</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to apply this relationship.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The parameter returned will be top-level, and to avoid conflicting
names will be prepended by <code>..</code> (e.g., <code>..ome1</code>). The selector
used to fetch the parameter will be used in this <code>..</code> name. If
a better name is preferred, there are convenient renaming functions
from <code>dplyr</code> where needed.
</p>
<p>When using parameter selectors, quotations should be used for more
complex names, like <code>"OMEGA(1,1)"</code>, since these may be read incorrectly
otherwise.
</p>
<p>The untransformed parameter is used for this exposure. The <code>get_prm</code>
call uses <code>transform=FALSE</code>.
</p>


<h3>Value</h3>

<p>An <code>xpose_set</code> object with the parameter exposed
</p>


<h3>See Also</h3>

<p><code><a href="#topic+expose_property">expose_property()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
pheno_set %&gt;%
  expose_param(the1) %&gt;%
  reshape_set()


pheno_set %&gt;%
  expose_param(RUVADD, "OMEGA(1,1)") %&gt;%
  reshape_set()

# This function is useful for generating a model-building table
pheno_set %&gt;%
  # Determine longest lineage
  select(all_of(xset_lineage(.))) %&gt;%
  # Select key variability parameters
  expose_param(RUVADD, "OMEGA(1,1)") %&gt;%
  # Make sure all models have descriptions
  focus_qapply(desc_from_comments) %&gt;%
  # Extract description
  expose_property(descr) %&gt;%
  # Transform to tibble
  reshape_set() # %&gt;% pipe into other processing

</code></pre>

<hr>
<h2 id='expose_property'>Expose a property of xpdb objects in an xpose_set</h2><span id='topic+expose_property'></span>

<h3>Description</h3>

<p>Expose a property of xpdb objects in an xpose_set
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expose_property(xpdb_s, ..., .problem = NULL, .subprob = NULL, .method = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="expose_property_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code><a href="#topic+xpose_set">xpose_set</a></code>&gt; An xpose_set object</p>
</td></tr>
<tr><td><code id="expose_property_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; One or more properties to expose</p>
</td></tr>
<tr><td><code id="expose_property_+3A_.problem">.problem</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to apply this relationship.</p>
</td></tr>
<tr><td><code id="expose_property_+3A_.subprob">.subprob</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to apply this relationship.</p>
</td></tr>
<tr><td><code id="expose_property_+3A_.method">.method</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to apply this relationship.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The property returned will be top-level, and to avoid conflicting
names will be prepended by <code>..</code> (e.g., <code>..descr</code>).
</p>
<p>For some properties, transformations are applied automatically to
make them more useful. This includes:
</p>

<ul>
<li> <p><code>etashk</code> and <code>epsshk</code>: transformed to numeric vectors as in &lt;<code><a href="#topic+get_shk">get_shk</a></code>&gt;
</p>
</li>
<li> <p><code>ofv</code> and other per-problem properties: transformed as
needed and pulls from each <code>xpdb</code> default problem.
</p>
</li></ul>



<h3>Value</h3>

<p>An <code>xpose_set</code> object with the properties exposed
</p>


<h3>See Also</h3>

<p><code><a href="#topic+expose_param">expose_param()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
xpdb_set &lt;- expose_property(xpdb_set, descr)
xpdb_set$mod1$..descr

xpdb_set &lt;- expose_property(xpdb_set, etashk)
xpdb_set$mod1$..etashk

</code></pre>

<hr>
<h2 id='fill_prob_subprob_method'>Place .problem, .subprob and .method into environment consistently</h2><span id='topic+fill_prob_subprob_method'></span>

<h3>Description</h3>

<p>Since this is a common need, it is being functionalized
to ensure consistency.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fill_prob_subprob_method(
  xpdb,
  .problem,
  .subprob,
  .method,
  envir = parent.frame()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fill_prob_subprob_method_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code>xpose_data</code>&gt; or related object</p>
</td></tr>
<tr><td><code id="fill_prob_subprob_method_+3A_.problem">.problem</code></td>
<td>
<p><code>NULL</code> or missing</p>
</td></tr>
<tr><td><code id="fill_prob_subprob_method_+3A_.subprob">.subprob</code></td>
<td>
<p><code>NULL</code> or missing</p>
</td></tr>
<tr><td><code id="fill_prob_subprob_method_+3A_.method">.method</code></td>
<td>
<p><code>NULL</code> or missing</p>
</td></tr>
<tr><td><code id="fill_prob_subprob_method_+3A_envir">envir</code></td>
<td>
<p>&lt;<code>environment</code>&gt; in which to assign the problem info.</p>
</td></tr>
</table>

<hr>
<h2 id='filter.xpose_set'>Filtration method for xpose_set</h2><span id='topic+filter.xpose_set'></span>

<h3>Description</h3>

<p>Filtration method for xpose_set
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'xpose_set'
filter(.data, ..., .rowwise = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter.xpose_set_+3A_.data">.data</code></td>
<td>
<p>&lt;<code><a href="#topic+xpose_set">xpose_set</a></code>&gt; An xpose_set object</p>
</td></tr>
<tr><td><code id="filter.xpose_set_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; (passed through to &lt;<code><a href="dplyr.html#topic+filter">dplyr::filter</a></code>&gt;)</p>
</td></tr>
<tr><td><code id="filter.xpose_set_+3A_.rowwise">.rowwise</code></td>
<td>
<p>&lt;<code><a href="base.html#topic+logical">logical</a></code>&gt; Should the mutation be applied rowwise? (default: <code>FALSE</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A filtered <code>xpose_set</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>xpdb_set %&gt;%
  filter(label=="mod1")

xpdb_set %&gt;%
  filter(length(parent)&gt;1, .rowwise=TRUE)

</code></pre>

<hr>
<h2 id='focus_xpdb'>Focus on an xpdb object in an xpose_set</h2><span id='topic+focus_xpdb'></span><span id='topic+unfocus_xpdb'></span><span id='topic+focused_xpdbs'></span><span id='topic+focus_function'></span><span id='topic+focus_qapply'></span>

<h3>Description</h3>

<p>For piping, set is passed, but with S3 method transformations are applied to the focused <code>xpdb</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>focus_xpdb(xpdb_s, ..., .add = FALSE)

unfocus_xpdb(xpdb_s)

focused_xpdbs(xpdb_s)

focus_function(xpdb_s, fn, ...)

focus_qapply(xpdb_s, fn, ..., .mods = everything())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="focus_xpdb_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code><a href="#topic+xpose_set">xpose_set</a></code>&gt; An xpose_set object</p>
</td></tr>
<tr><td><code id="focus_xpdb_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; One or more xpdb objects to focus on</p>
</td></tr>
<tr><td><code id="focus_xpdb_+3A_.add">.add</code></td>
<td>
<p>&lt;<code><a href="base.html#topic+logical">logical</a></code>&gt; Should the focus be added to the existing focus? (default: <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="focus_xpdb_+3A_fn">fn</code></td>
<td>
<p>&lt;<code>function</code>&gt; to apply to focused <code>xpose_data</code> objects</p>
</td></tr>
<tr><td><code id="focus_xpdb_+3A_.mods">.mods</code></td>
<td>
<p>&lt;<code>tidyselect</code>&gt; Model names in set to quick-apply a function. See Details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>While these functions are used internally, it is recognized that they may have value
in user scripting. It is hoped these are self-explanatory, but the examples should
address common uses.
</p>
<p><em>Note:</em> <code>focus_qapply()</code> (re)focuses as specified in <code>.mods</code> and then un-focuses all elements
of the set so should only be used in the case where a quick application
suffices. Otherwise, focusing with a sequence of <code>focus_function</code> calls
(or a monolithic single <code>focus_function</code> call with a custom function)
should be preferred.
</p>


<h3>Value</h3>

<p>An <code>xpose_set</code> object with the focused xpdb object(s)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Select two xpdb objects to focus on
xpdb_set %&gt;% focus_xpdb(mod2,fix1)

# Add a focus
xpdb_set %&gt;% focus_xpdb(mod2,fix1) %&gt;% focus_xpdb(mod1, .add=TRUE)

# Remove focus
xpdb_set %&gt;% focus_xpdb(mod2,fix1) %&gt;% focus_xpdb()

# Focus function and tidyselect
pheno_set %&gt;%
  focus_xpdb(everything()) %&gt;%
  # Add iOFV col and iofv type to all xpdbs in set
  focus_function(backfill_iofv) %&gt;%
  # Show 1... can do all like this, too, but no need
  unfocus_xpdb() %&gt;%
  select(run6) %&gt;%
  {.[[1]]$xpdb} %&gt;%
  list_vars()

# Quick-apply version of previous example
pheno_set %&gt;%
  focus_qapply(backfill_iofv) %&gt;%
  select(run6) %&gt;%
  {.[[1]]$xpdb} %&gt;%
  list_vars()

</code></pre>

<hr>
<h2 id='franken_prop'>Combine a property from all components of a <code>franken_xpdb</code></h2><span id='topic+franken_prop'></span>

<h3>Description</h3>

<p>Combine a property from all components of a <code>franken_xpdb</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>franken_prop(
  xpdb_f,
  xpdb_list,
  prop,
  problem = NULL,
  glue_cmd = function(x) glue::glue_collapse(x, ", ", last = " and "),
  indices = seq_along(xpdb_list)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="franken_prop_+3A_xpdb_f">xpdb_f</code></td>
<td>
<p>A product of <code><a href="#topic+franken_xpdb">franken_xpdb</a></code></p>
</td></tr>
<tr><td><code id="franken_prop_+3A_xpdb_list">xpdb_list</code></td>
<td>
<p>List of the source <code>xpose_data</code> objects.</p>
</td></tr>
<tr><td><code id="franken_prop_+3A_prop">prop</code></td>
<td>
<p>&lt;<code>character</code>&gt; of the property to combine</p>
</td></tr>
<tr><td><code id="franken_prop_+3A_problem">problem</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; If necessary to specify</p>
</td></tr>
<tr><td><code id="franken_prop_+3A_glue_cmd">glue_cmd</code></td>
<td>
<p>Any special transformation to the properties,
including how to collapse.</p>
</td></tr>
<tr><td><code id="franken_prop_+3A_indices">indices</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Index values <code>1:length(xpdb_list)</code>
to include in the property collapse.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is meant to be called within <code><a href="#topic+franken_xpdb">franken_xpdb</a></code>.
It is expected to be ready to handle cases where, for example,
multiple props are being set in a pipe, or a problem-associated
property is being set while a problem=0 property is also being
set.
</p>
<p>This is a <em>low-level</em> function, so its use outside of internal
functions is not intended.
</p>


<h3>Value</h3>

<p>Same as <code>xpdb_f</code> with new properties.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# This is designed to be called in a function environment which
# would provide something like the following:

xpdb_f &lt;- franken_xpdb(pheno_base, pheno_final, .types="catcov")

xpdb_list &lt;- list(pheno_base, pheno_final)

# The following would be inside the function
xpdb_f %&gt;%
  franken_prop(xpdb_list, "run",
    glue_cmd = function(x) paste(x, collapse="+"))

# xpdb_f may have to be written to a few times if
# and problem-specific combinations are needed:

updated &lt;- xpdb_f %&gt;%
  franken_prop(xpdb_list, "run",
    glue_cmd = function(x) paste(x, collapse="+"))

# problem will also be available. Assume there's
# no reason to loop here, but that may be needed
problem &lt;- 1
updated &lt;- updated %&gt;%
  franken_prop(xpdb_list, "ofv",  problem=problem,
    glue_cmd = function(x) paste(x, collapse="&amp;"))

</code></pre>

<hr>
<h2 id='franken_xpdb'>Combine several <code>xpose_data</code> objects into one</h2><span id='topic+franken_xpdb'></span>

<h3>Description</h3>

<p>This is an internal function designed to meet the needs
of specific plotting functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>franken_xpdb(
  ...,
  .cols = NULL,
  .types = NULL,
  prop_transforms = NULL,
  problem,
  quiet = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="franken_xpdb_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; <code>xpose_data</code> or <code>xp_xtra</code> objects</p>
</td></tr>
<tr><td><code id="franken_xpdb_+3A_.cols">.cols</code></td>
<td>
<p>&lt;<code>tidyselect</code>&gt; of data columns</p>
</td></tr>
<tr><td><code id="franken_xpdb_+3A_.types">.types</code></td>
<td>
<p>&lt;<code>character</code>&gt; of data types in addition to columns</p>
</td></tr>
<tr><td><code id="franken_xpdb_+3A_prop_transforms">prop_transforms</code></td>
<td>
<p>&lt;<code>function</code>&gt; Extra processing using &lt;<code><a href="#topic+franken_prop">franken_prop</a></code>&gt;</p>
</td></tr>
<tr><td><code id="franken_xpdb_+3A_problem">problem</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problems to look for <code>cols</code> and <code>types</code> (defaults all)</p>
</td></tr>
<tr><td><code id="franken_xpdb_+3A_quiet">quiet</code></td>
<td>
<p>Prevents extra output.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The first <code>xpose_data</code> object with new data columns
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

franken_xpdb(pheno_base, pheno_final, .types="catcov") %&gt;%
  xpose::get_data() %&gt;%
  select(starts_with("APGR"))

</code></pre>

<hr>
<h2 id='get_index'>Get full index for xpose_data data</h2><span id='topic+get_index'></span><span id='topic+set_index'></span>

<h3>Description</h3>

<p>Get full index for xpose_data data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_index(xpdb, .problem = NULL, ...)

set_index(xpdb, index, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_index_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code>xpose_data</code><a href="xpose.html#topic+xpose_data">xpose::xpose_data</a>&gt; object</p>
</td></tr>
<tr><td><code id="get_index_+3A_.problem">.problem</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to use. Uses the all problems if <code>NULL</code></p>
</td></tr>
<tr><td><code id="get_index_+3A_...">...</code></td>
<td>
<p>Ignored. Here for future expansion</p>
</td></tr>
<tr><td><code id="get_index_+3A_index">index</code></td>
<td>
<p>&lt;<code>tibble</code>&gt; Index to set</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Tibble of index
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_index(xpose::xpdb_ex_pk)
</code></pre>

<hr>
<h2 id='get_prm'>Access model parameters</h2><span id='topic+get_prm'></span>

<h3>Description</h3>

<p>Access model parameter estimates from an xpdb object.
</p>
<p>Methods have been added to implement extensions. See Details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_prm(
  xpdb,
  .problem = NULL,
  .subprob = NULL,
  .method = NULL,
  digits = 4,
  transform = TRUE,
  show_all = FALSE,
  quiet
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_prm_+3A_xpdb">xpdb</code></td>
<td>
<p>An <code>xpose_data</code> object from which the model output file data will be extracted.</p>
</td></tr>
<tr><td><code id="get_prm_+3A_.problem">.problem</code></td>
<td>
<p>The problem to be used, by default returns the last one for each file.</p>
</td></tr>
<tr><td><code id="get_prm_+3A_.subprob">.subprob</code></td>
<td>
<p>The subproblem to be used, by default returns the last one for each file.</p>
</td></tr>
<tr><td><code id="get_prm_+3A_.method">.method</code></td>
<td>
<p>The estimation method to be used, by default returns the last one for each file</p>
</td></tr>
<tr><td><code id="get_prm_+3A_digits">digits</code></td>
<td>
<p>The number of significant digits to be displayed.</p>
</td></tr>
<tr><td><code id="get_prm_+3A_transform">transform</code></td>
<td>
<p>Should diagonal OMEGA and SIGMA elements be transformed to standard deviation and 
off diagonal elements be transformed to correlations.</p>
</td></tr>
<tr><td><code id="get_prm_+3A_show_all">show_all</code></td>
<td>
<p>Logical, whether the 0 fixed off-diagonal elements should be removed from the output.</p>
</td></tr>
<tr><td><code id="get_prm_+3A_quiet">quiet</code></td>
<td>
<p>Logical, if <code>FALSE</code> messages are printed to the console.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When using an &lt;<code>xp_xtra</code>&gt; object, this function will add a column to the output
where CV% for each diagonal element of omega is calculated. This CV% is with
respect to the resulting structural parameter, so unless the default log-normal
association is applicable update with <code><a href="#topic+add_prm_association">add_prm_association</a></code>.
</p>
<p>For log-normal, users may prefer to use the first-order CV% (<code class="reqn">\sqrt{\omega^2}</code>)
instead of the exact. In such case, <code>xpdb &lt;- set_option(xpdb, cvtype="sqrt")</code> will
get that preferred form.
</p>
<p>If a single omega parameter is associated with multiple fixed effect parameters,
the <code>cv</code> column will be a list. For the <code>omega</code> row associated with multiple
fixed effect parameters, there will be multiple CV values. This will be the case
even if the transformation is log-normal and therefore scale-invariant, given
the need for generality.
</p>
<p><strong>Note</strong> the approach used to calculate CV% assumes an untransformed scale for the
fitted parameter value (unrelated to <code>transform</code>=TRUE). That means, for example,
that for a logit-normal fitted parameter value, it is expected the value will be
something constrained between 0 and 1, not the unbounded, continuous transformed value.
The function &lt;<code><a href="#topic+mutate_prm">mutate_prm</a></code>&gt; is intended to help where that might be an issue.
</p>


<h3>Value</h3>

<p>A tibble for single problem/subprob or a named list for multiple problem|subprob.
</p>


<h3>References</h3>

<p>Prybylski, J.P. Reporting Coefficient of Variation for Logit, Box-Cox and
Other Non-log-normal Parameters. Clin Pharmacokinet 63, 133-135 (2024).
https://doi.org/10.1007/s40262-023-01343-2
</p>


<h3>See Also</h3>

<p><code><a href="#topic+add_prm_association">add_prm_association()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# xpose parameter table
get_prm(xpose::xpdb_ex_pk, .problem = 1)

# xpose.xtra parameter table (basically the same)
get_prm(pheno_final, .problem = 1)

# For the sake of example, even though these were all lognormal:
pheno_final %&gt;%
  add_prm_association(CLpkg~logit(IIVCL)) %&gt;%
  add_prm_association(Vpkg~nmboxcox(IIVV, lambda = 0.01)) %&gt;%
  get_prm(.problem = 1)


</code></pre>

<hr>
<h2 id='get_prop'>Generic function to extract a property from a model summary</h2><span id='topic+get_prop'></span>

<h3>Description</h3>

<p>Generic function to extract a property from a model summary
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_prop(xpdb, prop, .problem = NULL, .subprob = NULL, .method = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_prop_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code>xpose_data</code><a href="xpose.html#topic+xpose_data">xpose::xpose_data</a>&gt; object</p>
</td></tr>
<tr><td><code id="get_prop_+3A_prop">prop</code></td>
<td>
<p>&lt;<code>character</code>&gt; Property to extract</p>
</td></tr>
<tr><td><code id="get_prop_+3A_.problem">.problem</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to use. Uses the xpose default if not provided.</p>
</td></tr>
<tr><td><code id="get_prop_+3A_.subprob">.subprob</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Subproblem number to use. Uses the xpose default if not provided.</p>
</td></tr>
<tr><td><code id="get_prop_+3A_.method">.method</code></td>
<td>
<p>&lt;<code>character</code>&gt; Method to use. Uses the xpose default if not provided.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Exact value for the property
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("xpdb_ex_pk", package = "xpose")

get_prop(xpdb_ex_pk, "descr")
</code></pre>

<hr>
<h2 id='get_shk'>Get shrinkage estimates from model summary</h2><span id='topic+get_shk'></span>

<h3>Description</h3>

<p>This function parses shrinkages as they are currently
presented in <code><a href="xpose.html#topic+get_summary">get_summary</a></code>, so it
is dependent on the current implementation of that function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_shk(xpdb, wh = "eta", .problem = NULL, .subprob = NULL, .method = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_shk_+3A_xpdb">xpdb</code></td>
<td>
<p>An <code>xpose_data</code> object.</p>
</td></tr>
<tr><td><code id="get_shk_+3A_wh">wh</code></td>
<td>
<p>The shrinkage to extract (<code>"eta"</code> or <code>"eps"</code>)</p>
</td></tr>
<tr><td><code id="get_shk_+3A_.problem">.problem</code></td>
<td>
<p>Problem number to use. Uses the xpose default if not provided.</p>
</td></tr>
<tr><td><code id="get_shk_+3A_.subprob">.subprob</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Subproblem number to use. Uses the xpose default if not provided.</p>
</td></tr>
<tr><td><code id="get_shk_+3A_.method">.method</code></td>
<td>
<p>&lt;<code>character</code>&gt; Method to use. Uses the xpose default if not provided.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector of shrinkage estimates.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("xpdb_ex_pk", package = "xpose")

# eta Shrinkage
get_shk(xpdb_ex_pk)

# epsilon Shrinkage
get_shk(xpdb_ex_pk, wh = "eps")


</code></pre>

<hr>
<h2 id='grab_xpose_plot'>Grab processed <code>xpose_plot</code></h2><span id='topic+grab_xpose_plot'></span>

<h3>Description</h3>

<p>This function is very simple and unlikely to capture
every possible situation. Paginated plots are not supported.
</p>
<p>This is helpful for working with <code>xpose</code> plots in <code>patchwork</code> or
<code>ggpubr</code> functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grab_xpose_plot(plot)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="grab_xpose_plot_+3A_plot">plot</code></td>
<td>
<p>&lt;<code>xpose_plot</code>&gt; or list thereof</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Grob or list of grobs
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
single_plot &lt;- xpdb_x %&gt;%
eta_vs_catcov(etavar = ETA1) %&gt;%
grab_xpose_plot()

listof_plots &lt;- xpdb_x %&gt;%
eta_vs_catcov(etavar = c(ETA1,ETA3)) %&gt;%
grab_xpose_plot()

</code></pre>

<hr>
<h2 id='iofv_vs_mod'>Objective function changes across models</h2><span id='topic+iofv_vs_mod'></span>

<h3>Description</h3>

<p>Another visualization of how individual objective functions change over
the course of model development.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>iofv_vs_mod(
  xpdb_s,
  ...,
  .lineage = FALSE,
  auto_backfill = FALSE,
  mapping = NULL,
  orientation = "x",
  type = "bjc",
  title = "Individual OFVs across models",
  subtitle = "Based on @nind individuals, Initial OFV: @ofv",
  caption = "Initial @dir",
  tag = NULL,
  axis.text = "@run",
  facets,
  .problem,
  quiet
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iofv_vs_mod_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code>xpose_set</code>&gt; object</p>
</td></tr>
<tr><td><code id="iofv_vs_mod_+3A_...">...</code></td>
<td>
<p>&lt;<code>tidyselect</code>&gt; of models in set. If empty, all models are
used in order of their position in the set. May also use a formula,
which will just be processed with <code>all.vars()</code>.</p>
</td></tr>
<tr><td><code id="iofv_vs_mod_+3A_.lineage">.lineage</code></td>
<td>
<p>&lt;<code>logical</code>&gt; where if <code>TRUE</code>, <code>...</code> is processed</p>
</td></tr>
<tr><td><code id="iofv_vs_mod_+3A_auto_backfill">auto_backfill</code></td>
<td>
<p>&lt;<code>logical</code>&gt; If <code>TRUE</code>, apply &lt;<code><a href="#topic+backfill_iofv">backfill_iofv()</a></code>&gt;
automatically. <code>FALSE</code> by default to encourage data control as a
separate process to plotting control.</p>
</td></tr>
<tr><td><code id="iofv_vs_mod_+3A_mapping">mapping</code></td>
<td>
<p><code>ggplot2</code> style mapping</p>
</td></tr>
<tr><td><code id="iofv_vs_mod_+3A_orientation">orientation</code></td>
<td>
<p>Defaults to <code>x</code></p>
</td></tr>
<tr><td><code id="iofv_vs_mod_+3A_type">type</code></td>
<td>
<p>Passed to &lt;<code><a href="#topic+xplot_boxplot">xplot_boxplot</a></code>&gt;</p>
</td></tr>
<tr><td><code id="iofv_vs_mod_+3A_title">title</code></td>
<td>
<p>Plot title</p>
</td></tr>
<tr><td><code id="iofv_vs_mod_+3A_subtitle">subtitle</code></td>
<td>
<p>Plot subtitle</p>
</td></tr>
<tr><td><code id="iofv_vs_mod_+3A_caption">caption</code></td>
<td>
<p>Plot caption</p>
</td></tr>
<tr><td><code id="iofv_vs_mod_+3A_tag">tag</code></td>
<td>
<p>Plot tag</p>
</td></tr>
<tr><td><code id="iofv_vs_mod_+3A_axis.text">axis.text</code></td>
<td>
<p>What to label the model. This is parsed on a per-model
basis.</p>
</td></tr>
<tr><td><code id="iofv_vs_mod_+3A_facets">facets</code></td>
<td>
<p>Additional facets</p>
</td></tr>
<tr><td><code id="iofv_vs_mod_+3A_.problem">.problem</code></td>
<td>
<p>Problem number</p>
</td></tr>
<tr><td><code id="iofv_vs_mod_+3A_quiet">quiet</code></td>
<td>
<p>Silence output</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The desired plot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

pheno_set %&gt;%
  focus_qapply(backfill_iofv) %&gt;%
  iofv_vs_mod()

pheno_set %&gt;%
  focus_qapply(backfill_iofv) %&gt;%
  iofv_vs_mod(run3,run11,run14,run15)

pheno_set %&gt;%
  focus_qapply(backfill_iofv) %&gt;%
  iofv_vs_mod(.lineage = TRUE)


</code></pre>

<hr>
<h2 id='ipred_vs_ipred'>Compare model predictions</h2><span id='topic+ipred_vs_ipred'></span><span id='topic+pred_vs_pred'></span>

<h3>Description</h3>

<p>For two models in an <code>xpose_set</code>, these functions are useful in comparing individual
and population predictions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ipred_vs_ipred(
  xpdb_s,
  ...,
  .inorder = FALSE,
  type = "pls",
  title = "Individual prediction comparison | @run",
  subtitle = "Ofv: @ofv, Eps shrink: @epsshk",
  caption = "@dir",
  tag = NULL,
  log = NULL,
  guide = TRUE,
  facets,
  .problem,
  quiet
)

pred_vs_pred(
  xpdb_s,
  ...,
  .inorder = FALSE,
  type = "pls",
  title = "Population prediction comparison | @run",
  subtitle = "Ofv: @ofv, Eps shrink: @epsshk",
  caption = "@dir",
  tag = NULL,
  log = NULL,
  guide = TRUE,
  facets,
  .problem,
  quiet
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ipred_vs_ipred_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code>xpose_set</code>&gt; object</p>
</td></tr>
<tr><td><code id="ipred_vs_ipred_+3A_...">...</code></td>
<td>
<p>See &lt;<code><a href="#topic+two_set_dots">two_set_dots</a></code>&gt;</p>
</td></tr>
<tr><td><code id="ipred_vs_ipred_+3A_.inorder">.inorder</code></td>
<td>
<p>See &lt;<code><a href="#topic+two_set_dots">two_set_dots</a></code>&gt;</p>
</td></tr>
<tr><td><code id="ipred_vs_ipred_+3A_type">type</code></td>
<td>
<p>Passed to <code>xplot_scatter</code></p>
</td></tr>
<tr><td><code id="ipred_vs_ipred_+3A_title">title</code></td>
<td>
<p>Plot title</p>
</td></tr>
<tr><td><code id="ipred_vs_ipred_+3A_subtitle">subtitle</code></td>
<td>
<p>Plot subtitle</p>
</td></tr>
<tr><td><code id="ipred_vs_ipred_+3A_caption">caption</code></td>
<td>
<p>Plot caption</p>
</td></tr>
<tr><td><code id="ipred_vs_ipred_+3A_tag">tag</code></td>
<td>
<p>Plot tag</p>
</td></tr>
<tr><td><code id="ipred_vs_ipred_+3A_log">log</code></td>
<td>
<p>Log scale covariate value?</p>
</td></tr>
<tr><td><code id="ipred_vs_ipred_+3A_guide">guide</code></td>
<td>
<p>Add guide line?</p>
</td></tr>
<tr><td><code id="ipred_vs_ipred_+3A_facets">facets</code></td>
<td>
<p>Additional facets</p>
</td></tr>
<tr><td><code id="ipred_vs_ipred_+3A_.problem">.problem</code></td>
<td>
<p>Problem number</p>
</td></tr>
<tr><td><code id="ipred_vs_ipred_+3A_quiet">quiet</code></td>
<td>
<p>Silence output</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The desired plot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
pheno_set %&gt;%
  ipred_vs_ipred(run5,run15)

pheno_set %&gt;%
  pred_vs_pred(run5,run15)

</code></pre>

<hr>
<h2 id='irep'>Add simulation counter</h2><span id='topic+irep'></span>

<h3>Description</h3>

<p>Add a column containing a simulation counter (irep). A new simulation is counted every time
a value in x is different than its previous value and is a duplicate.
</p>
<p>This version of the function does not require IDs be ascending, but does not work for
datasets where IDs are repeated (not in sequence). Both cases are read as separate
individuals for NONMEM, but NONMEM does not need to detect repetition of ID sequences (for NONMEM,
<code>1,1,2,2,3,3,1,1,2,2,3,3</code> is 6 individuals, regardless of being 2 repeats of 3 individuals).
Given the vast majority of datasets use 1 individual per ID, (which cannot be said about IDs
always being ascending), only one of these corrections is implemented.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>irep(x, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="irep_+3A_x">x</code></td>
<td>
<p>The column to be used for computing simulation number, usually the ID column.</p>
</td></tr>
<tr><td><code id="irep_+3A_quiet">quiet</code></td>
<td>
<p>Logical, if <code>FALSE</code> messages are printed to the console.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Bugfix for <code><a href="xpose.html#topic+irep">irep</a></code>.
</p>


<h3>Value</h3>

<p><code style="white-space: pre;">&#8288;&lt;numeric&gt;&#8288;</code> vector tracking the number of simulations based on unique subject IDs.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("xpdb_ex_pk", package = "xpose")

xpdb_ex_pk_2 &lt;- xpdb_ex_pk %&gt;%
 mutate(sim_id = irep(ID), .problem = 2)

</code></pre>

<hr>
<h2 id='is_formula_list'>Convenience functions used in package</h2><span id='topic+is_formula_list'></span>

<h3>Description</h3>

<p>Convenience functions used in package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_formula_list(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_formula_list_+3A_x">x</code></td>
<td>
<p>object to test</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code style="white-space: pre;">&#8288;&lt;logical&gt;&#8288;</code> <code>TRUE</code> if is a list of formulas
</p>

<hr>
<h2 id='is_xp_xtras'>Basic class checker for <code>xp_xtras</code></h2><span id='topic+is_xp_xtras'></span>

<h3>Description</h3>

<p>Basic class checker for <code>xp_xtras</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_xp_xtras(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_xp_xtras_+3A_x">x</code></td>
<td>
<p>Object to test</p>
</td></tr>
</table>


<h3>Value</h3>

<p>&lt;<code>logical</code>&gt; TRUE if <code>xp_xtras</code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
is_xp_xtras(xpose::xpdb_ex_pk)

is_xp_xtras(xpdb_x)

</code></pre>

<hr>
<h2 id='list_dv_probs'>For a categorical DV variable, show associated probabilities</h2><span id='topic+list_dv_probs'></span>

<h3>Description</h3>

<p>A convenient quick check for how probabilities are currently
assigned, based on <code><a href="#topic+set_dv_probs">set_dv_probs</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_dv_probs(xpdb, .problem = NULL, .dv_var = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_dv_probs_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code>xp_xtras</code>&gt; object</p>
</td></tr>
<tr><td><code id="list_dv_probs_+3A_.problem">.problem</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to use. Uses the all problems if <code>NULL</code></p>
</td></tr>
<tr><td><code id="list_dv_probs_+3A_.dv_var">.dv_var</code></td>
<td>
<p>&lt;<code>tidyselect</code>&gt; of column having the categorical observation. Default is first-listed
<code>catdv</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>&lt;<code>tibble</code>&gt; of probabilities
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
pkpd_m3 %&gt;%
  set_dv_probs(1, 1~LIKE, .dv_var = BLQ) %&gt;%
  list_dv_probs(.dv_var=BLQ)

</code></pre>

<hr>
<h2 id='list_vars'>Updates to <code>list_vars</code></h2><span id='topic+list_vars'></span><span id='topic+list_vars.default'></span><span id='topic+list_vars.xp_xtras'></span>

<h3>Description</h3>

<p>To accommodate changes made in <code>xpose.xtras</code>,
&lt;<code><a href="xpose.html#topic+list_vars">list_vars</a></code>&gt; needed some minimal updates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_vars(xpdb, .problem = NULL, ...)

## Default S3 method:
list_vars(xpdb, .problem = NULL, ...)

## S3 method for class 'xp_xtras'
list_vars(xpdb, .problem = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_vars_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code>xpose_data</code>&gt; or &lt;<code>xp_xtras</code>&gt; object</p>
</td></tr>
<tr><td><code id="list_vars_+3A_.problem">.problem</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to use. Uses the all problems if <code>NULL</code></p>
</td></tr>
<tr><td><code id="list_vars_+3A_...">...</code></td>
<td>
<p>Should be blank.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>&lt;<code>tibble</code>&gt; of variables
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
list_vars(xpose::xpdb_ex_pk)

list_vars(xpdb_x)

</code></pre>

<hr>
<h2 id='modavg_xpdb'>Create a model-averaged xpose data object</h2><span id='topic+modavg_xpdb'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>This function is a helper for plotting functions where models in
an <code>xpose_set</code> can be averaged together. The implementation attempts
to match and extend from the cited prior work.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modavg_xpdb(
  xpdb_s,
  ...,
  .lineage = FALSE,
  avg_cols = NULL,
  avg_by_type = NULL,
  algorithm = c("maa", "msa"),
  weight_type = c("individual", "population"),
  auto_backfill = FALSE,
  weight_basis = c("ofv", "aic", "res"),
  res_col = "RES",
  quiet
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="modavg_xpdb_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code>xpose_set</code>&gt; object</p>
</td></tr>
<tr><td><code id="modavg_xpdb_+3A_...">...</code></td>
<td>
<p>&lt;<code>tidyselect</code>&gt; of models in set. If empty, all models are
used in order of their position in the set. May also use a formula,
which will just be processed with <code>all.vars()</code>.</p>
</td></tr>
<tr><td><code id="modavg_xpdb_+3A_.lineage">.lineage</code></td>
<td>
<p>&lt;<code>logical</code>&gt; where if <code>TRUE</code>, <code>...</code> is processed</p>
</td></tr>
<tr><td><code id="modavg_xpdb_+3A_avg_cols">avg_cols</code></td>
<td>
<p>&lt;<code>tidyselect</code>&gt; columns in data to average</p>
</td></tr>
<tr><td><code id="modavg_xpdb_+3A_avg_by_type">avg_by_type</code></td>
<td>
<p>&lt;<code>character</code>&gt; Mainly for use in wrapper functions.
Column type to average, but resulting column names must be valid
for <code>avg_cols</code> (ie, same across all objects in the set). <code>avg_cols</code> will
be overwritten.</p>
</td></tr>
<tr><td><code id="modavg_xpdb_+3A_algorithm">algorithm</code></td>
<td>
<p>&lt;<code>character</code>&gt; Model selection or model averaging</p>
</td></tr>
<tr><td><code id="modavg_xpdb_+3A_weight_type">weight_type</code></td>
<td>
<p>&lt;<code>character</code>&gt; Individual-level averaging or by full dataset.</p>
</td></tr>
<tr><td><code id="modavg_xpdb_+3A_auto_backfill">auto_backfill</code></td>
<td>
<p>&lt;<code>logical</code>&gt; If true, &lt;<code><a href="#topic+backfill_iofv">backfill_iofv</a></code>&gt; is automatically
applied.</p>
</td></tr>
<tr><td><code id="modavg_xpdb_+3A_weight_basis">weight_basis</code></td>
<td>
<p>&lt;<code>character</code>&gt; Weigh by OFV (default), AIC or residual.</p>
</td></tr>
<tr><td><code id="modavg_xpdb_+3A_res_col">res_col</code></td>
<td>
<p>&lt;<code>character</code>&gt; Column to weight by if <code>"res"</code> weight basis.</p>
</td></tr>
<tr><td><code id="modavg_xpdb_+3A_quiet">quiet</code></td>
<td>
<p>&lt;<code>logical</code>&gt; Minimize extra output.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Weight-averaged &lt;<code>xpose_data</code>&gt; object.
</p>


<h3>References</h3>

<p>Uster, D.W., Stocker, S.L., Carland, J.E., Brett, J., Marriott, D.J.E.,
Day, R.O. and Wicha, S.G. (2021), A Model Averaging/Selection Approach
Improves the Predictive Performance of Model-Informed Precision Dosing:
Vancomycin as a Case Study. Clin. Pharmacol. Ther., 109: 175-183.
https://doi.org/10.1002/cpt.2065
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
pheno_set %&gt;%
  modavg_xpdb(
    avg_cols = IPRED,
    auto_backfill = TRUE,
    algorithm = "maa",
    weight_basis = "aic"
  )

</code></pre>

<hr>
<h2 id='modify_xpdb'>Add, remove or rename variables in an xpdb</h2><span id='topic+modify_xpdb'></span><span id='topic+mutate_x'></span><span id='topic+rename_x'></span>

<h3>Description</h3>

<p><code>mutate_x()</code> adds new variables and preserves existing ones.
<code>select()</code> keeps only the listed variables; <code>rename()</code> keeps all variables.
</p>
<p><strong>Note:</strong> this function uses <code>xpose.xtras::edit_xpose_data</code>, but is otherwise
the same as &lt;<code><a href="xpose.html#topic+reexports">xpose::mutate</a></code>&gt;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mutate_x(.data, ..., .problem, .source, .where)

rename_x(.data, ..., .problem, .source, .where)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="modify_xpdb_+3A_.data">.data</code></td>
<td>
<p>An xpose database object.</p>
</td></tr>
<tr><td><code id="modify_xpdb_+3A_...">...</code></td>
<td>
<p>Name-value pairs of expressions. Use <code>NULL</code> to drop a variable.</p>
</td></tr>
<tr><td><code id="modify_xpdb_+3A_.problem">.problem</code></td>
<td>
<p>The problem from which the data will be modified</p>
</td></tr>
<tr><td><code id="modify_xpdb_+3A_.source">.source</code></td>
<td>
<p>The source of the data in the xpdb. Can either be 'data' or an output
file extension e.g. 'phi'.</p>
</td></tr>
<tr><td><code id="modify_xpdb_+3A_.where">.where</code></td>
<td>
<p>A vector of element names to be edited in special (e.g.
<code>.where = c('vpc_dat', 'aggr_obs')</code> with vpc).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An updated <code>xpose</code> data object
</p>

<hr>
<h2 id='mutate_prm'>Transform parameter values in place</h2><span id='topic+mutate_prm'></span>

<h3>Description</h3>

<p>Apply transformations to fitted parameter values.
</p>
<p>As fitted, sometimes parameter values are not as easy to communicate, but
to transform them outside of the <code>xpose</code> ecosystem limits some available
features. To have the best experience, this function can update the
parameter values that are used by <code>xpose</code> <code>get_prm</code> functions. At this
time these transformations are not applied to <code>param</code> vars (<code><a href="#topic+list_vars">list_vars</a></code>), but that can
already be done with the <code>mutate</code> method.
</p>
<p>This only works for theta parameters.
</p>
<p>All valid mutations are applied sequentially, so a double call to <code>the2~the2^3</code>
will result in effectively <code>the2~the2^9</code>, for example.
</p>
<p>RSE values are calculated at runtime within <code>get_prm</code>, so they are not updated (or
updatable) with this function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mutate_prm(
  xpdb,
  ...,
  .autose = TRUE,
  .problem = NULL,
  .subprob = NULL,
  .method = NULL,
  .sesim = 1e+05,
  quiet
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mutate_prm_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code>xp_xtras</code>&gt; object</p>
</td></tr>
<tr><td><code id="mutate_prm_+3A_...">...</code></td>
<td>
<p>... &lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; One or more formulae that
define transformations to parameters. RHS of formulas can be function or a
value. That value can be a function call like in <code>mutate()</code> (<code>the1~exp(the1)</code>).</p>
</td></tr>
<tr><td><code id="mutate_prm_+3A_.autose">.autose</code></td>
<td>
<p>&lt;<code>logical</code>&gt; If a function is used for the transform then simulation
is used to transform the current SE to a new SE. Precision of this transformation
is dependent on <code>.sesim</code>. If parameter values are not assigned with a function,
this option will simply scale SE to maintain the same RSE. See Details.</p>
</td></tr>
<tr><td><code id="mutate_prm_+3A_.problem">.problem</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to apply this relationship.</p>
</td></tr>
<tr><td><code id="mutate_prm_+3A_.subprob">.subprob</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to apply this relationship.</p>
</td></tr>
<tr><td><code id="mutate_prm_+3A_.method">.method</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to apply this relationship.</p>
</td></tr>
<tr><td><code id="mutate_prm_+3A_.sesim">.sesim</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Length of simulated <code>rnorm</code> vector for <code>.autose</code>.</p>
</td></tr>
<tr><td><code id="mutate_prm_+3A_quiet">quiet</code></td>
<td>
<p>Silence extra output.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Important points about covariance and correlation</h4>

<p>Covariance and correlation parameters are adjusted when standard error (SE)
values are changed directly or with <code>.autose</code>. When a transformation is applied
as a function for the fixed effect parameter (eg, <code>~plogis</code>), the resulting SE may have
an unexpected scale; this is because it is now reporting the standard deviation
of a transformed and potentially non-normal distribution. If the parameter were fit
in the transformed scale (constrained to any appropriate bounds), it would likely have a
different SE given that most covariance estimation methods (excluding non-parametric and
resampling-based) will treat the constrained parameter as continuous and unconstrained.
</p>
<p>The updates to variance-covariance values (and the correlation values, though that is mostly
invariant) are applied to the entire matrices. When piped directly into
<code>get_prm</code>, only the SE estimate is shown, but &lt;<code><a href="xpose.html#topic+get_file">get_file</a></code>&gt; can be used
to see the complete updated variance-covariance values. This could be useful if those
matrices are being used to define priors for a Bayesian model fitting, as the re-scaling
of off-diagonal elements is handled automatically.
</p>
<p>A function to transform parameters will result in a more accurate <code>autose</code> result. If a call
(<code>the1~exp(the)</code>) or a value (<code>the1~2</code>) are used, the standard error will be simply scaled.
</p>



<h3>Value</h3>

<p>An updated <code>xp_xtras</code> object with mutated parameters
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
vismo_pomod %&gt;%
  # Function
  mutate_prm(THETA11~exp) %&gt;%
  # Value (se will not be scaled); plogis = inverse logit
  mutate_prm(THETA12~plogis(THETA12)) %&gt;%
  get_prm()


</code></pre>

<hr>
<h2 id='mutate.xpose_set'>Mutation method for xpose_set</h2><span id='topic+mutate.xpose_set'></span>

<h3>Description</h3>

<p>Mutation method for xpose_set
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'xpose_set'
mutate(.data, ..., .force = FALSE, .retest = !.force, .rowwise = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mutate.xpose_set_+3A_.data">.data</code></td>
<td>
<p>&lt;<code><a href="#topic+xpose_set">xpose_set</a></code>&gt; An xpose_set object</p>
</td></tr>
<tr><td><code id="mutate.xpose_set_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; Mutations to apply to the xpose_set (passed through to &lt;<code><a href="dplyr.html#topic+mutate">dplyr::mutate</a></code>&gt;)</p>
</td></tr>
<tr><td><code id="mutate.xpose_set_+3A_.force">.force</code></td>
<td>
<p>&lt;<code><a href="base.html#topic+logical">logical</a></code>&gt; Should top-level elements be allowed to be manipulated? (default: <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="mutate.xpose_set_+3A_.retest">.retest</code></td>
<td>
<p>&lt;<code><a href="base.html#topic+logical">logical</a></code>&gt; Should the xpose_set be retested after mutation? (default: <code>!force</code>)</p>
</td></tr>
<tr><td><code id="mutate.xpose_set_+3A_.rowwise">.rowwise</code></td>
<td>
<p>&lt;<code><a href="base.html#topic+logical">logical</a></code>&gt; Should the mutation be applied rowwise? (default: <code>FALSE</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A set with updated top-level data (unless focused)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>xpdb_set %&gt;%
  # Adds foo = bar for all objects in the set
  mutate(foo = "bar") %&gt;%
  # Reshape to visualize
  reshape_set()

</code></pre>

<hr>
<h2 id='param_selector'>Select parameter row number</h2><span id='topic+param_selector'></span>

<h3>Description</h3>

<p>The selection rules are described in &lt;<code><a href="#topic+add_prm_association">add_prm_association</a></code>&gt;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>param_selector(sel, prm_tbl)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="param_selector_+3A_sel">sel</code></td>
<td>
<p>&lt;<code>character</code>&gt; Selector of any parameter</p>
</td></tr>
<tr><td><code id="param_selector_+3A_prm_tbl">prm_tbl</code></td>
<td>
<p>&lt;<code>tibble</code>&gt; Like the output of <code>get_prm()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>&lt;<code>integer</code>&gt; of selected row number. Can be used to
get value and other elements of information from <code>prm_tbl</code>.
</p>

<hr>
<h2 id='pheno_base'>An <code>xp_xtras</code> example of a base model</h2><span id='topic+pheno_base'></span>

<h3>Description</h3>

<p>Base model for phenobarbital in neonates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pheno_base
</code></pre>


<h3>Format</h3>



<h4><code>xp_xtras</code></h4>

<p>An <code>xp_xtras</code> object.
</p>



<h3>Details</h3>

<p>This is <code>run6</code> in &lt;<code><a href="#topic+pheno_set">pheno_set</a></code>&gt;
</p>


<h3>Source</h3>

<p>https://doi.org/10.1159/000457062 and nlmixr2data::pheno_sd
</p>

<hr>
<h2 id='pheno_final'>An <code>xp_xtras</code> example of a final model</h2><span id='topic+pheno_final'></span>

<h3>Description</h3>

<p>Final model for phenobarbital in neonates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pheno_final
</code></pre>


<h3>Format</h3>



<h4><code>xp_xtras</code></h4>

<p>An <code>xp_xtras</code> object.
</p>



<h3>Details</h3>

<p>This is re-parameterized from the covariate-building work, which
in this case did not identify a relationship with Apgar score.
</p>
<p>This is <code>run16</code> in &lt;<code><a href="#topic+pheno_set">pheno_set</a></code>&gt;
</p>


<h3>Source</h3>

<p>https://doi.org/10.1159/000457062 and nlmixr2data::pheno_sd
</p>

<hr>
<h2 id='pheno_saem'>An <code>xp_xtras</code> example of a final model</h2><span id='topic+pheno_saem'></span>

<h3>Description</h3>

<p>Final model for phenobarbital in neonates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pheno_saem
</code></pre>


<h3>Format</h3>



<h4><code>xp_xtras</code></h4>

<p>An <code>xp_xtras</code> object.
</p>



<h3>Details</h3>

<p>This is the same as <code><a href="#topic+pheno_final">pheno_final</a></code> but fitted with SAEM/IMP.
</p>
<p>Not a part of &lt;<code><a href="#topic+pheno_set">pheno_set</a></code>&gt;
</p>


<h3>Source</h3>

<p>https://doi.org/10.1159/000457062 and nlmixr2data::pheno_sd
</p>

<hr>
<h2 id='pheno_set'>A more complex example of <code>xpose_set</code> object</h2><span id='topic+pheno_set'></span>

<h3>Description</h3>

<p>Model-building set for the phenobarbital in neonates PK data
used across multiple packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pheno_set
</code></pre>


<h3>Format</h3>



<h4><code>xpose_set</code></h4>

<p>An <code>xpose_set</code> object of length 14 with a branched lineage.
</p>



<h3>Details</h3>

<p>This is not a demonstration of high-quality model-building,
it is just a typical and simple example.
</p>


<h3>Source</h3>

<p>https://doi.org/10.1159/000457062 and nlmixr2data::pheno_sd
</p>

<hr>
<h2 id='pkpd_m3'>An <code>xp_xtras</code> example of an M3 model</h2><span id='topic+pkpd_m3'></span>

<h3>Description</h3>

<p>A representative PK/PD model with M3 fitting applied.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pkpd_m3
</code></pre>


<h3>Format</h3>



<h4><code>xp_xtras</code></h4>

<p>An <code>xp_xtras</code> object.
</p>



<h3>Source</h3>

<p>https://doi.org/10.1002/psp4.13219
</p>


<h3>References</h3>

<p>Beal, S.L. Ways to Fit a PK Model with Some Data
Below the Quantification Limit. J Pharmacokinet
Pharmacodyn 28, 481-504 (2001).
https://doi.org/10.1023/A:1012299115260
</p>
<p>Prybylski JP. Indirect modeling of derived outcomes:
Are minor prediction discrepancies a cause for concern?
CPT Pharmacometrics Syst Pharmacol. 2024; 00: 1-9.
doi:10.1002/psp4.13219
</p>

<hr>
<h2 id='pkpd_m3_df'>An <code>xp_xtras</code> example of an M3 model (dataset)</h2><span id='topic+pkpd_m3_df'></span>

<h3>Description</h3>

<p>The dataset used to fit the <code><a href="#topic+pkpd_m3">pkpd_m3</a></code> model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pkpd_m3_df
</code></pre>


<h3>Format</h3>



<h4><code>xp_xtras</code></h4>

<p>An <code>xp_xtras</code> object.
</p>



<h3>Source</h3>

<p>https://doi.org/10.1002/psp4.13219
</p>


<h3>References</h3>

<p>Prybylski JP. Indirect modeling of derived outcomes:
Are minor prediction discrepancies a cause for concern?
CPT Pharmacometrics Syst Pharmacol. 2024; 00: 1-9.
doi:10.1002/psp4.13219
</p>

<hr>
<h2 id='prm_waterfall'>Specific waterfall plots</h2><span id='topic+prm_waterfall'></span><span id='topic+eta_waterfall'></span><span id='topic+iofv_waterfall'></span>

<h3>Description</h3>

<p>Differences are second listed model minus first listed. Eg, in
<code>eta_waterfall(run1,run2)</code>, the when etas in run2 are greater than
those in run1, the difference will be positive.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prm_waterfall(
  xpdb_s,
  ...,
  .inorder = FALSE,
  type = "bh",
  max_nind = 0.7,
  scale_diff = TRUE,
  show_n = TRUE,
  title = "Parameter changes between models | @run",
  subtitle = "Based on @nobs observations in @nind individuals",
  caption = "@dir",
  tag = NULL,
  facets = NULL,
  facet_scales = "free_x",
  .problem,
  .subprob,
  .method,
  quiet
)

eta_waterfall(
  xpdb_s,
  ...,
  .inorder = FALSE,
  type = "bh",
  max_nind = 0.7,
  scale_diff = TRUE,
  show_n = TRUE,
  title = "Eta changes between models | @run",
  subtitle = "Based on @nobs observations in @nind individuals",
  caption = "@dir",
  tag = NULL,
  facets = NULL,
  facet_scales = "free_x",
  .problem,
  .subprob,
  .method,
  quiet
)

iofv_waterfall(
  xpdb_s,
  ...,
  .inorder = FALSE,
  type = "bh",
  max_nind = 0.7,
  scale_diff = FALSE,
  show_n = TRUE,
  title = "iOFV changes between models | @run",
  subtitle = "Based on @nobs observations in @nind individuals",
  caption = "@dir",
  tag = NULL,
  facets = NULL,
  facet_scales = "free_x",
  .problem,
  .subprob,
  .method,
  quiet
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prm_waterfall_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code>xpose_set</code>&gt; object</p>
</td></tr>
<tr><td><code id="prm_waterfall_+3A_...">...</code></td>
<td>
<p>See &lt;<code><a href="#topic+two_set_dots">two_set_dots</a></code>&gt;</p>
</td></tr>
<tr><td><code id="prm_waterfall_+3A_.inorder">.inorder</code></td>
<td>
<p>See &lt;<code><a href="#topic+two_set_dots">two_set_dots</a></code>&gt;</p>
</td></tr>
<tr><td><code id="prm_waterfall_+3A_type">type</code></td>
<td>
<p>See Details.</p>
</td></tr>
<tr><td><code id="prm_waterfall_+3A_max_nind">max_nind</code></td>
<td>
<p>If less than 1, the percentile of absolute
change values above which to plot.
If above 1, the absolute number of subjects is included. To show all,
use an extreme positive number like 9999.</p>
</td></tr>
<tr><td><code id="prm_waterfall_+3A_scale_diff">scale_diff</code></td>
<td>
<p>&lt;<code>logical</code>&gt; Scale change to the standard deviation
of the model 1 column values. Respects faceting.</p>
</td></tr>
<tr><td><code id="prm_waterfall_+3A_show_n">show_n</code></td>
<td>
<p>&lt;<code>logical</code>&gt; For faceting variables, show N per facet.
<em>Not implemented</em></p>
</td></tr>
<tr><td><code id="prm_waterfall_+3A_title">title</code></td>
<td>
<p>Plot title</p>
</td></tr>
<tr><td><code id="prm_waterfall_+3A_subtitle">subtitle</code></td>
<td>
<p>Plot subtitle</p>
</td></tr>
<tr><td><code id="prm_waterfall_+3A_caption">caption</code></td>
<td>
<p>Plot caption</p>
</td></tr>
<tr><td><code id="prm_waterfall_+3A_tag">tag</code></td>
<td>
<p>Plot tag</p>
</td></tr>
<tr><td><code id="prm_waterfall_+3A_facets">facets</code></td>
<td>
<p>&lt;<code>character</code>&gt; Faceting variables</p>
</td></tr>
<tr><td><code id="prm_waterfall_+3A_facet_scales">facet_scales</code></td>
<td>
<p>&lt;<code>character</code>&gt; Forwarded to <code>facet_*(scales = facet_scales)</code></p>
</td></tr>
<tr><td><code id="prm_waterfall_+3A_.problem">.problem</code></td>
<td>
<p>The problem to be used, by default returns the last one.</p>
</td></tr>
<tr><td><code id="prm_waterfall_+3A_.subprob">.subprob</code></td>
<td>
<p>The subproblem to be used, by default returns the last one.</p>
</td></tr>
<tr><td><code id="prm_waterfall_+3A_.method">.method</code></td>
<td>
<p>The estimation method to be used, by default returns the last one.</p>
</td></tr>
<tr><td><code id="prm_waterfall_+3A_quiet">quiet</code></td>
<td>
<p>Silence extra debugging output</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For type-based customization of plots:
</p>

<ul>
<li> <p><code>b</code> bar plot (from <code>geom_bar</code>)
</p>
</li>
<li> <p><code>h</code> hline at 0 (from <code>geom_hline</code>)
</p>
</li>
<li> <p><code>t</code> text of change value (from <code>geom_text</code>)
</p>
</li></ul>



<h3>Value</h3>

<p>&lt;<code>xpose_plot</code>&gt; object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Parameter value changes
pheno_set %&gt;%
  # Ensure param is set
  focus_qapply(set_var_types, param=c(CL,V)) %&gt;%
  prm_waterfall(run5,run6)


# EBE value changes
pheno_set %&gt;%
  eta_waterfall(run5,run6)

# iOFV changes
pheno_set %&gt;%
  focus_qapply(backfill_iofv) %&gt;%
  # Note the default scaling is flipped here
  iofv_waterfall(run5,run6)


</code></pre>

<hr>
<h2 id='proc_levels'>Convert levels list into tibble</h2><span id='topic+proc_levels'></span>

<h3>Description</h3>

<p>Consumes formula list and converts into corresponding tibble.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proc_levels(lvl_list)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="proc_levels_+3A_lvl_list">lvl_list</code></td>
<td>
<p>&lt;<code>list</code>&gt; of formulas</p>
</td></tr>
</table>


<h3>Value</h3>

<p>&lt;<code>tibble</code>&gt; of levels
</p>

<hr>
<h2 id='pull.xpose_set'>Pulling method for xpose_set</h2><span id='topic+pull.xpose_set'></span>

<h3>Description</h3>

<p>Pulling method for xpose_set
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'xpose_set'
pull(.data, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pull.xpose_set_+3A_.data">.data</code></td>
<td>
<p>&lt;<code><a href="#topic+xpose_set">xpose_set</a></code>&gt; An xpose_set object</p>
</td></tr>
<tr><td><code id="pull.xpose_set_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; (passed through to &lt;<code><a href="dplyr.html#topic+pull">pull</a></code>&gt;)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The top-level information for a set requested.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
xpdb_set %&gt;%
  pull(xpdb)

</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+filter'></span><span id='topic+mutate'></span><span id='topic+select'></span><span id='topic+rename'></span><span id='topic+pull'></span><span id='topic+all_of'></span><span id='topic+any_of'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>dplyr</dt><dd><p><code><a href="dplyr.html#topic+reexports">all_of</a></code>, <code><a href="dplyr.html#topic+reexports">any_of</a></code>, <code><a href="dplyr.html#topic+filter">filter</a></code>, <code><a href="dplyr.html#topic+mutate">mutate</a></code>, <code><a href="dplyr.html#topic+pull">pull</a></code>, <code><a href="dplyr.html#topic+rename">rename</a></code>, <code><a href="dplyr.html#topic+select">select</a></code></p>
</dd>
</dl>

<hr>
<h2 id='rename.xpose_set'>Renaming method for xpose_set</h2><span id='topic+rename.xpose_set'></span>

<h3>Description</h3>

<p>Renaming method for xpose_set
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'xpose_set'
rename(.data, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rename.xpose_set_+3A_.data">.data</code></td>
<td>
<p>&lt;<code><a href="#topic+xpose_set">xpose_set</a></code>&gt; An xpose_set object</p>
</td></tr>
<tr><td><code id="rename.xpose_set_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; (passed indirectly to &lt;<code><a href="dplyr.html#topic+mutate">dplyr::mutate</a></code>&gt;)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Re-labeled set
</p>


<h3>Examples</h3>

<pre><code class='language-R'>xpdb_set %&gt;%
  rename(Mod = mod1)


</code></pre>

<hr>
<h2 id='reportable_digits'>Reportable digits for model fit</h2><span id='topic+reportable_digits'></span>

<h3>Description</h3>

<p>An opinionated function where for optimization routines
that report number of significant digits (eg, FO-based), only
those number of digits are considered reportable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reportable_digits(xpdb, .default = 3, .problem, .subprob, .method)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="reportable_digits_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code>xpose_data</code><a href="xpose.html#topic+xpose_data">xpose::xpose_data</a>&gt; object</p>
</td></tr>
<tr><td><code id="reportable_digits_+3A_.default">.default</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Default number of digits to return if not found</p>
</td></tr>
<tr><td><code id="reportable_digits_+3A_.problem">.problem</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to use. Uses all problem if not provided.</p>
</td></tr>
<tr><td><code id="reportable_digits_+3A_.subprob">.subprob</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Subproblem number to use. Uses the xpose default if not provided.</p>
</td></tr>
<tr><td><code id="reportable_digits_+3A_.method">.method</code></td>
<td>
<p>&lt;<code>character</code>&gt; Method to use. Uses the xpose default if not provided.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Number of reportable digits
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
reportable_digits(xpdb_x)

</code></pre>

<hr>
<h2 id='reshape_set'>Convert xpose_set to a nested list.</h2><span id='topic+reshape_set'></span><span id='topic+unreshape_set'></span>

<h3>Description</h3>

<p>This amounts to a convenience function for tidy manipulations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reshape_set(x)

unreshape_set(y)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="reshape_set_+3A_x">x</code></td>
<td>
<p>&lt;<code><a href="#topic+xpose_set">xpose_set</a></code>&gt; An xpose_set object</p>
</td></tr>
<tr><td><code id="reshape_set_+3A_y">y</code></td>
<td>
<p>&lt;<code><a href="tibble.html#topic+tibble">tibble</a></code>&gt; A nested table from an xpose_set</p>
</td></tr>
</table>


<h3>Value</h3>

<p>&lt;<code><a href="tibble.html#topic+tibble">tibble</a></code>&gt; Nested list, or &lt;<code><a href="#topic+xpose_set">xpose_set</a></code>&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
rset &lt;- reshape_set(xpdb_set)
# Properties (exposed and top-level) can be seen. xpdb objects are nested in the xpdb column.
rset %&gt;% dplyr::select(-xpdb) %&gt;% dplyr::glimpse()

unreshape_set(rset)

# The reversibility of reshaping can be confirmed:
identical(xpdb_set,reshape_set(xpdb_set) %&gt;% unreshape_set())

</code></pre>

<hr>
<h2 id='select_subset'>Convenience wrapper for tidyselect</h2><span id='topic+select_subset'></span>

<h3>Description</h3>

<p>This is intended for use as an internal function to select a subset of xpdb objects from an xpose_set.
</p>
<p>It is a lower level version of &lt;<code><a href="#topic+select.xpose_set">select.xpose_set</a></code>&gt;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>select_subset(xpdb_s, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="select_subset_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code><a href="#topic+xpose_set">xpose_set</a></code>&gt; An xpose_set object</p>
</td></tr>
<tr><td><code id="select_subset_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; One or more tidyselect selectors</p>
</td></tr>
</table>


<h3>Value</h3>

<p>&lt;<code><a href="base.html#topic+numeric">numeric</a></code>&gt; vector of indices for selected xpdb objects
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

select_subset(mod2, xpdb_s=xpdb_set)

select_subset(dplyr::starts_with("fix"), xpdb_s=xpdb_set)


</code></pre>

<hr>
<h2 id='select.xpose_set'>Selection method for xpose_set</h2><span id='topic+select.xpose_set'></span>

<h3>Description</h3>

<p>Selection method for xpose_set
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'xpose_set'
select(.data, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="select.xpose_set_+3A_.data">.data</code></td>
<td>
<p>&lt;<code><a href="#topic+xpose_set">xpose_set</a></code>&gt; An xpose_set object</p>
</td></tr>
<tr><td><code id="select.xpose_set_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; (passed through to &lt;<code><a href="#topic+select_subset">select_subset</a></code>&gt;)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Subset of <code>xpose</code> set
</p>


<h3>Examples</h3>

<pre><code class='language-R'>xpdb_set %&gt;%
  select(starts_with("fix"))

xpdb_set %&gt;%
  select(mod1, fix1)

</code></pre>

<hr>
<h2 id='set_base_model'>Base model for <code>xpose_set</code></h2><span id='topic+set_base_model'></span><span id='topic+get_base_model'></span><span id='topic+unset_base_model'></span>

<h3>Description</h3>

<p>Base model for <code>xpose_set</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_base_model(xpdb_s, ...)

get_base_model(xpdb_s)

unset_base_model(xpdb_s)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_base_model_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code>xpose_set</code>&gt; object</p>
</td></tr>
<tr><td><code id="set_base_model_+3A_...">...</code></td>
<td>
<p>&lt;&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; name of base model</p>
</td></tr>
</table>


<h3>Value</h3>

<p>&lt;<code>xpose_set</code>&gt; object with a base model
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
w_base &lt;- xpdb_set %&gt;%
  set_base_model(mod2)
w_base # base model listed in output

get_base_model(w_base) # base model name

unset_base_model(w_base) # base model no longer in output


</code></pre>

<hr>
<h2 id='set_dv_probs'>Set probability columns for categorical endpoints</h2><span id='topic+set_dv_probs'></span>

<h3>Description</h3>

<p>For categorical DVs or similar endpoints (such as censoring
flag columns, like <code>BLQ</code>), this function allows probability
columns to be defined for each level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_dv_probs(
  xpdb,
  .problem = NULL,
  ...,
  .dv_var = NULL,
  .handle_missing = c("quiet", "warn", "error")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_dv_probs_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code>xp_xtras</code>&gt; object</p>
</td></tr>
<tr><td><code id="set_dv_probs_+3A_.problem">.problem</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to use. Uses the all problems if <code>NULL</code></p>
</td></tr>
<tr><td><code id="set_dv_probs_+3A_...">...</code></td>
<td>
<p>Formulas where LHS are levels or pseudo-functions (see Details), and RHS
are columns with probabilities of those levels.</p>
</td></tr>
<tr><td><code id="set_dv_probs_+3A_.dv_var">.dv_var</code></td>
<td>
<p>&lt;<code>tidyselect</code>&gt; of column having the categorical observation. Default is first-listed
<code>catdv</code>.</p>
</td></tr>
<tr><td><code id="set_dv_probs_+3A_.handle_missing">.handle_missing</code></td>
<td>
<p>&lt;<code>character</code>&gt; How to handle missing levels: &quot;quiet&quot;, &quot;warn&quot;, or &quot;error&quot;</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The same probability cannot be assigned to multiple values. Pseudo-functions can be used, or
new columns can be created to overcome this limitation. The available pseudo-functions should
be written like <code>ge(value)</code> (for <code>&gt;=</code>), <code>gt(value)</code> (for <code>&gt;</code>), etc. These comparison names
are those used in Perl, Fortran and many other languages. The function <code>eq()</code> should not be used,
but it will be ignored either way; equivalence is implied with the base syntax.
</p>


<h3>Value</h3>

<p>&lt;<code>xp_xtras</code>&gt; object with updated probabilities
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pkpd_m3 %&gt;%
 # Not necessary, but correct to set var type before using this
 set_var_types(.problem=1, catdv=BLQ, dvprobs=LIKE) %&gt;%
 # Set var type. Warnings can be helpful unless an inverse likelihood column is available
 set_dv_probs(.problem=1, 1~LIKE, .dv_var = BLQ, .handle_missing = "warn") %&gt;%
 list_vars()

# Same as above with demo of inverse column
pkpd_m3 %&gt;%
 xpose::mutate(INVLIKE = 1-LIKE) %&gt;%
 set_var_types(.problem=1, catdv=BLQ, dvprobs=c(LIKE,INVLIKE)) %&gt;%
 # Note no warning
 set_dv_probs(.problem=1, 1~LIKE, 0~INVLIKE, .dv_var = BLQ, .handle_missing = "warn")%&gt;%
 list_vars()

# With categorical model
vismo_pomod  %&gt;%
 # Update var types
 set_var_types(.problem=1, catdv=DV, dvprobs=matches("^P\\d+$")) %&gt;%
 # Warning (as noted), does not recognize 3 is covered implicitly. That's ok!
 set_dv_probs(.problem=1, 0~P0,1~P1,ge(2)~P23, .handle_missing = "warn")%&gt;%
 list_vars()

# Same as above, but...
vismo_pomod  %&gt;%
 set_var_types(.problem=1, catdv=DV, dvprobs=matches("^P\\d+$")) %&gt;%
 # Default is to not bother users with a warning
 set_dv_probs(.problem=1, 0~P0,1~P1,ge(2)~P23)%&gt;%
 list_vars()

</code></pre>

<hr>
<h2 id='set_option'>Set an <code>xpose</code> option</h2><span id='topic+set_option'></span>

<h3>Description</h3>

<p>Set an <code>xpose</code> option
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_option(xpdb, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_option_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code>xpose_data</code><a href="xpose.html#topic+xpose_data">xpose::xpose_data</a>&gt; object</p>
</td></tr>
<tr><td><code id="set_option_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; Arguments in
the form of <code>option = value</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>xp_xtras</code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
xpdb_x &lt;- set_option(xpdb_x, quiet = TRUE)

</code></pre>

<hr>
<h2 id='set_prop'>Set a summary property</h2><span id='topic+set_prop'></span>

<h3>Description</h3>

<p>Set a summary property
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_prop(xpdb, ..., .problem = NULL, .subprob = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_prop_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code>xpose_data</code><a href="xpose.html#topic+xpose_data">xpose::xpose_data</a>&gt; object</p>
</td></tr>
<tr><td><code id="set_prop_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; defining which properties to transform.
Argument should be valid label.</p>
</td></tr>
<tr><td><code id="set_prop_+3A_.problem">.problem</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to use. Uses all problem if not provided.</p>
</td></tr>
<tr><td><code id="set_prop_+3A_.subprob">.subprob</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Subproblem number to use. Uses the xpose default if not provided.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Although one might be tempted to set custom properties using this function,
with the intention to maintain cross-functionality with <code>xpose</code>, users cannot
set a non-existent property with this function. When used internally, workarounds
to this semi-limitation are used.
</p>


<h3>Value</h3>

<p><code>xp_xtras</code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
set_prop(xpose::xpdb_ex_pk, descr = "New model description") %&gt;%
  xpose::get_summary()

</code></pre>

<hr>
<h2 id='set_var_levels'>Set variable levels</h2><span id='topic+set_var_levels'></span>

<h3>Description</h3>

<p>For variable types such as <code>catcov</code>, it can be convenient to define
levels. This function provides a straightforward means to do so,
consistent with <code>tidy</code> functions like &lt;<code><a href="dplyr.html#topic+case_when">case_when</a></code>&gt;.
</p>
<p>Several convenience functions are provided for common levels in &lt;<code><a href="#topic+as_leveler">levelers</a></code>&gt;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_var_levels(
  xpdb,
  .problem = NULL,
  ...,
  .missing = "Other",
  .handle_missing = c("quiet", "warn", "error")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_var_levels_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code>xp_xtras</code>&gt; object</p>
</td></tr>
<tr><td><code id="set_var_levels_+3A_.problem">.problem</code></td>
<td>
<p>&lt;<code>numeric</code>&gt; Problem number to use. Uses the all problems if <code>NULL</code></p>
</td></tr>
<tr><td><code id="set_var_levels_+3A_...">...</code></td>
<td>
<p>&lt;<code>list</code>&gt; of formulas or leveler functions, where the relevant variable is provided as the argument,</p>
</td></tr>
<tr><td><code id="set_var_levels_+3A_.missing">.missing</code></td>
<td>
<p>&lt;<code>character</code>&gt; Value to use for missing levels</p>
</td></tr>
<tr><td><code id="set_var_levels_+3A_.handle_missing">.handle_missing</code></td>
<td>
<p>&lt;<code>character</code>&gt; How to handle missing levels: &quot;quiet&quot;, &quot;warn&quot;, or &quot;error&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>&lt;<code>xp_xtras</code>&gt; object with updated levels
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
set_var_levels(xpdb_x,
  SEX = lvl_sex(),
  MED1 = lvl_bin(),
  MED2 = c(
    0 ~ "n",
    1 ~ "y"
  )
)

</code></pre>

<hr>
<h2 id='set_var_types'>Set variable types</h2><span id='topic+set_var_types'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>&lt;<code><a href="xpose.html#topic+set_vars">set_var_types</a></code>&gt; wrapper that accepts tidyselect syntax.
Character vector-based selection still works.
</p>
<p><code>set_var_types_x</code> accepts <code>xpose_data</code> or <code>xp_xtras</code> objects.
</p>
<p><code>set_var_types</code> without <code style="white-space: pre;">&#8288;_x&#8288;</code> is defined with S3 methods. To maintain <code>xpose</code> expectations,
the default method is &lt;<code><a href="xpose.html#topic+set_vars">set_var_types</a></code>&gt;, but if an <code>xp_xtras</code> object
is used, the method uses <code>set_var_types_x</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_var_types(xpdb, .problem = NULL, ..., auto_factor = TRUE, quiet)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_var_types_+3A_xpdb">xpdb</code></td>
<td>
<p>An <code>xpose_data</code> object.</p>
</td></tr>
<tr><td><code id="set_var_types_+3A_.problem">.problem</code></td>
<td>
<p>The problem number to which the edits will be applied.</p>
</td></tr>
<tr><td><code id="set_var_types_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; Passed to <code><a href="xpose.html#topic+set_var_types">set_var_types</a></code> after processing.</p>
</td></tr>
<tr><td><code id="set_var_types_+3A_auto_factor">auto_factor</code></td>
<td>
<p>If <code>TRUE</code> new columns assigned to the type 'catcov' will be converted to
factor.</p>
</td></tr>
<tr><td><code id="set_var_types_+3A_quiet">quiet</code></td>
<td>
<p>Logical, if <code>FALSE</code> messages are printed to the console.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An xpose_data object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("xpdb_ex_pk", package = "xpose")

# Change variable type
xpdb_2 &lt;- set_var_types_x(
  xpdb_ex_pk, .problem = 1,
  idv = TAD,
  catcov = starts_with("MED"),
  contcov = c(CLCR,AGE)
  )

</code></pre>

<hr>
<h2 id='set_var_types_x'>Set variable types</h2><span id='topic+set_var_types_x'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>&lt;<code><a href="xpose.html#topic+set_vars">set_var_types</a></code>&gt; wrapper that accepts tidyselect syntax.
Character vector-based selection still works.
</p>
<p><code>set_var_types_x</code> accepts <code>xpose_data</code> or <code>xp_xtras</code> objects.
</p>
<p><code>set_var_types</code> without <code style="white-space: pre;">&#8288;_x&#8288;</code> is defined with S3 methods. To maintain <code>xpose</code> expectations,
the default method is &lt;<code><a href="xpose.html#topic+set_vars">set_var_types</a></code>&gt;, but if an <code>xp_xtras</code> object
is used, the method uses <code>set_var_types_x</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_var_types_x(xpdb, .problem = NULL, ..., auto_factor = TRUE, quiet)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_var_types_x_+3A_xpdb">xpdb</code></td>
<td>
<p>An <code>xpose_data</code> object.</p>
</td></tr>
<tr><td><code id="set_var_types_x_+3A_.problem">.problem</code></td>
<td>
<p>The problem number to which the edits will be applied.</p>
</td></tr>
<tr><td><code id="set_var_types_x_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; Passed to <code><a href="xpose.html#topic+set_var_types">set_var_types</a></code> after processing.</p>
</td></tr>
<tr><td><code id="set_var_types_x_+3A_auto_factor">auto_factor</code></td>
<td>
<p>If <code>TRUE</code> new columns assigned to the type 'catcov' will be converted to
factor.</p>
</td></tr>
<tr><td><code id="set_var_types_x_+3A_quiet">quiet</code></td>
<td>
<p>Logical, if <code>FALSE</code> messages are printed to the console.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An xpose_data object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("xpdb_ex_pk", package = "xpose")

# Change variable type
xpdb_2 &lt;- set_var_types_x(
  xpdb_ex_pk, .problem = 1,
  idv = TAD,
  catcov = starts_with("MED"),
  contcov = c(CLCR,AGE)
  )

</code></pre>

<hr>
<h2 id='set_var_types.default'>Set variable types</h2><span id='topic+set_var_types.default'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>&lt;<code><a href="xpose.html#topic+set_vars">set_var_types</a></code>&gt; wrapper that accepts tidyselect syntax.
Character vector-based selection still works.
</p>
<p><code>set_var_types_x</code> accepts <code>xpose_data</code> or <code>xp_xtras</code> objects.
</p>
<p><code>set_var_types</code> without <code style="white-space: pre;">&#8288;_x&#8288;</code> is defined with S3 methods. To maintain <code>xpose</code> expectations,
the default method is &lt;<code><a href="xpose.html#topic+set_vars">set_var_types</a></code>&gt;, but if an <code>xp_xtras</code> object
is used, the method uses <code>set_var_types_x</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
set_var_types(xpdb, .problem = NULL, ..., auto_factor = TRUE, quiet)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_var_types.default_+3A_xpdb">xpdb</code></td>
<td>
<p>An <code>xpose_data</code> object.</p>
</td></tr>
<tr><td><code id="set_var_types.default_+3A_.problem">.problem</code></td>
<td>
<p>The problem number to which the edits will be applied.</p>
</td></tr>
<tr><td><code id="set_var_types.default_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; Passed to <code><a href="xpose.html#topic+set_var_types">set_var_types</a></code> after processing.</p>
</td></tr>
<tr><td><code id="set_var_types.default_+3A_auto_factor">auto_factor</code></td>
<td>
<p>If <code>TRUE</code> new columns assigned to the type 'catcov' will be converted to
factor.</p>
</td></tr>
<tr><td><code id="set_var_types.default_+3A_quiet">quiet</code></td>
<td>
<p>Logical, if <code>FALSE</code> messages are printed to the console.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An xpose_data object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("xpdb_ex_pk", package = "xpose")

# Change variable type
xpdb_2 &lt;- set_var_types_x(
  xpdb_ex_pk, .problem = 1,
  idv = TAD,
  catcov = starts_with("MED"),
  contcov = c(CLCR,AGE)
  )

</code></pre>

<hr>
<h2 id='set_var_types.xp_xtras'>Set variable types</h2><span id='topic+set_var_types.xp_xtras'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>&lt;<code><a href="xpose.html#topic+set_vars">set_var_types</a></code>&gt; wrapper that accepts tidyselect syntax.
Character vector-based selection still works.
</p>
<p><code>set_var_types_x</code> accepts <code>xpose_data</code> or <code>xp_xtras</code> objects.
</p>
<p><code>set_var_types</code> without <code style="white-space: pre;">&#8288;_x&#8288;</code> is defined with S3 methods. To maintain <code>xpose</code> expectations,
the default method is &lt;<code><a href="xpose.html#topic+set_vars">set_var_types</a></code>&gt;, but if an <code>xp_xtras</code> object
is used, the method uses <code>set_var_types_x</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'xp_xtras'
set_var_types(xpdb, .problem = NULL, ..., auto_factor = TRUE, quiet)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_var_types.xp_xtras_+3A_xpdb">xpdb</code></td>
<td>
<p>An <code>xpose_data</code> object.</p>
</td></tr>
<tr><td><code id="set_var_types.xp_xtras_+3A_.problem">.problem</code></td>
<td>
<p>The problem number to which the edits will be applied.</p>
</td></tr>
<tr><td><code id="set_var_types.xp_xtras_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; Passed to <code><a href="xpose.html#topic+set_var_types">set_var_types</a></code> after processing.</p>
</td></tr>
<tr><td><code id="set_var_types.xp_xtras_+3A_auto_factor">auto_factor</code></td>
<td>
<p>If <code>TRUE</code> new columns assigned to the type 'catcov' will be converted to
factor.</p>
</td></tr>
<tr><td><code id="set_var_types.xp_xtras_+3A_quiet">quiet</code></td>
<td>
<p>Logical, if <code>FALSE</code> messages are printed to the console.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An xpose_data object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("xpdb_ex_pk", package = "xpose")

# Change variable type
xpdb_2 &lt;- set_var_types_x(
  xpdb_ex_pk, .problem = 1,
  idv = TAD,
  catcov = starts_with("MED"),
  contcov = c(CLCR,AGE)
  )

</code></pre>

<hr>
<h2 id='shark_colors'>Change colors of shark plots</h2><span id='topic+shark_colors'></span>

<h3>Description</h3>

<p>This changes the point and text color
in the <code>xp_theme</code> of an <code>xpose_data</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shark_colors(
  xpdb,
  upcolor = xp_xtra_theme(base_on = xpdb$xp_theme)$sharkup_color,
  dncolor = xp_xtra_theme(base_on = xpdb$xp_theme)$sharkdn_color
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="shark_colors_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code>xpose_data</code>&gt; object</p>
</td></tr>
<tr><td><code id="shark_colors_+3A_upcolor">upcolor</code></td>
<td>
<p>Color for increasing dOFV</p>
</td></tr>
<tr><td><code id="shark_colors_+3A_dncolor">dncolor</code></td>
<td>
<p>Color for decreasing dOFV</p>
</td></tr>
</table>


<h3>Value</h3>

<p>&lt;<code>xpose_data</code>&gt; object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+shark_plot">shark_plot()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Where this would fit in a particular workflow
xpose_set(pheno_base, pheno_final) %&gt;%
  # forward functions affecting xpdb objects
  focus_xpdb(everything()) %&gt;%
  # Add iOFVs
  focus_function(backfill_iofv) %&gt;%
  # Change color of all xpdb xp_themes (though only the first one needs to change)
  focus_function(
  function(x) shark_colors(
      x,
      upcolor = "purple",
      dncolor = "green"
    )) %&gt;%
  # See new plot
  shark_plot()

</code></pre>

<hr>
<h2 id='shark_plot'>Individual contributions to dOFV</h2><span id='topic+shark_plot'></span><span id='topic+dofv_vs_id'></span>

<h3>Description</h3>

<p>This is intended to match the overall behavior of
<code>dOFV.vs.id()</code> in <code>xpose4</code>, within the framework
of the <code>xpose_set</code> object.
</p>
<p><code>dofv_vs_id</code> is an alias of the function <code>shark_plot</code>,
for recognition.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shark_plot(
  xpdb_s,
  ...,
  .inorder = FALSE,
  type = "plt",
  alpha = 0.05,
  df = "guess",
  text_cutoff = 0.8,
  title = "Individual contributions to dOFV | @run",
  subtitle = "Based on @nind individuals, OFVs: @ofv",
  caption = "@dir",
  tag = NULL,
  ylab = "dOFV",
  xlab = "Number of individuals removed",
  opt,
  facets = NULL,
  .problem,
  .subprob,
  .method,
  quiet
)

dofv_vs_id(
  xpdb_s,
  ...,
  .inorder = FALSE,
  type = "plt",
  alpha = 0.05,
  df = "guess",
  text_cutoff = 0.8,
  title = "Individual contributions to dOFV | @run",
  subtitle = "Based on @nind individuals, OFVs: @ofv",
  caption = "@dir",
  tag = NULL,
  ylab = "dOFV",
  xlab = "Number of individuals removed",
  opt,
  facets = NULL,
  .problem,
  .subprob,
  .method,
  quiet
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="shark_plot_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code>xpose_set</code>&gt; object</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_...">...</code></td>
<td>
<p>See &lt;<code><a href="#topic+two_set_dots">two_set_dots</a></code>&gt;</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_.inorder">.inorder</code></td>
<td>
<p>See &lt;<code><a href="#topic+two_set_dots">two_set_dots</a></code>&gt;</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_type">type</code></td>
<td>
<p>See Details.</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_alpha">alpha</code></td>
<td>
<p>alpha for LRT</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_df">df</code></td>
<td>
<p>degrees of freedom for LRT. If <code>"guess"</code> (default), then
use the difference in the number of unfixed parameters.</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_text_cutoff">text_cutoff</code></td>
<td>
<p>If less than 1, the percentile of absolute
individual dOFV values above which to show labels of IDs.
If above 1, the absolute number of IDs to show. To show all,
use an extreme positive number like 9999.</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_title">title</code></td>
<td>
<p>Plot title</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_subtitle">subtitle</code></td>
<td>
<p>Plot subtitle</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_caption">caption</code></td>
<td>
<p>Plot caption</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_tag">tag</code></td>
<td>
<p>Plot tag</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_ylab">ylab</code></td>
<td>
<p>y-axis label</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_xlab">xlab</code></td>
<td>
<p>x-axis label</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_opt">opt</code></td>
<td>
<p>User-specified data options. Only some of these
will be used.</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_facets">facets</code></td>
<td>
<p>&lt;<code>character</code>&gt; vector selecting facets, or <code>NULL</code> (default).</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_.problem">.problem</code></td>
<td>
<p>The problem to be used, by default returns the last one.</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_.subprob">.subprob</code></td>
<td>
<p>The subproblem to be used, by default returns the last one.</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_.method">.method</code></td>
<td>
<p>The estimation method to be used, by default returns the last one.</p>
</td></tr>
<tr><td><code id="shark_plot_+3A_quiet">quiet</code></td>
<td>
<p>Silence extra debugging output</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For type-based customization of plots:
</p>

<ul>
<li> <p><code>p</code> points (using aesthetics for <code>sharkup</code> and <code>sharkdn</code>)
</p>
</li>
<li> <p><code>l</code> lines for dOFV (both total dOFV and significance are plotted)
</p>
</li>
<li> <p><code>t</code> text (using aesthetics for <code>shkuptxt</code> and <code>shkdntxt</code>)
</p>
</li></ul>

<p>In <code>xpose4</code>, users can control <code>sig.drop</code>, but this function uses
<code>alpha</code> and <code>df</code> to determine the critical delta by the likelihood
ratio test. It is acknowledged there are situations where this may
not be valid, but it is suggested that <code>df</code> or <code>alpha</code> be adjusted
to meet the desired <code>sig.drop</code>.
</p>
<div class="sourceCode r"><pre>my_alpha &lt;- 0.05
my_df &lt;- 1.34 # fractional, perhaps to account for different IIVs

my_sigdrop &lt;- -stats::qchisq(1-my_alpha, my_df)
my_sigdrop
#&gt; [1] -4.633671
# Then use alpha=my_alpha, df=my_df in `shark_plot` call.
</pre></div>


<h3>Value</h3>

<p>&lt;<code>xpose_plot</code>&gt; object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+shark_colors">shark_colors()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

pheno_set %&gt;%
  # Make sure set has iofv var types defined
  focus_xpdb(everything()) %&gt;%
  focus_function(backfill_iofv) %&gt;%
  # Pick two models or consistent with two_set_dots()
  shark_plot(run6,run11)

pheno_set %&gt;%
  # As before
  focus_xpdb(everything()) %&gt;%
  focus_function(backfill_iofv) %&gt;%
  # Add indicator (or use established covariate)
  mutate(APGRtest = as.numeric(as.character(APGR))&lt;5) %&gt;%
  # Pick two models or consistent with two_set_dots()
  shark_plot(run6,run11, facets = "APGRtest")


</code></pre>

<hr>
<h2 id='summarise_xpdb'>Group/ungroup and summarize variables in an xpdb</h2><span id='topic+summarise_xpdb'></span><span id='topic+group_by_x'></span><span id='topic+ungroup_x'></span>

<h3>Description</h3>

<p><code>group_by_x()</code> takes an existing table and converts it into a
grouped table where operations are performed &quot;by group&quot;. <code>ungroup()</code> removes grouping.
<code>summarize()</code> reduces multiple values down to a single value.
</p>
<p><strong>Note:</strong> this function uses <code>xpose.xtras::edit_xpose_data</code>, but is otherwise
the same as &lt;<code><a href="xpose.html#topic+reexports">xpose::group_by</a></code>&gt;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>group_by_x(.data, ..., .problem, .source, .where)

ungroup_x(.data, ..., .problem, .source, .where)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summarise_xpdb_+3A_.data">.data</code></td>
<td>
<p>An xpose database object.</p>
</td></tr>
<tr><td><code id="summarise_xpdb_+3A_...">...</code></td>
<td>
<p>Name-value pairs of expressions. Use <code>NULL</code> to drop a variable.</p>
</td></tr>
<tr><td><code id="summarise_xpdb_+3A_.problem">.problem</code></td>
<td>
<p>The problem from which the data will be modified</p>
</td></tr>
<tr><td><code id="summarise_xpdb_+3A_.source">.source</code></td>
<td>
<p>The source of the data in the xpdb. Can either be 'data' or an output
file extension e.g. 'phi'.</p>
</td></tr>
<tr><td><code id="summarise_xpdb_+3A_.where">.where</code></td>
<td>
<p>A vector of element names to be edited in special (e.g.
<code>.where = c('vpc_dat', 'aggr_obs')</code> with vpc).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Group data in an <code>xpose</code> data object
</p>

<hr>
<h2 id='two_set_dots'>Typical processing for plots of 2 sets</h2><span id='topic+two_set_dots'></span>

<h3>Description</h3>

<p>Typical processing for plots of 2 sets
</p>


<h3>Usage</h3>

<pre><code class='language-R'>two_set_dots(xpdb_s, ..., .inorder = FALSE, envir = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="two_set_dots_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code>xpose_set</code>&gt; object</p>
</td></tr>
<tr><td><code id="two_set_dots_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; Passed to &lt;<code><a href="#topic+select_subset">select_subset</a></code>&gt;</p>
</td></tr>
<tr><td><code id="two_set_dots_+3A_.inorder">.inorder</code></td>
<td>
<p>&lt;<code>logical</code>&gt; Regardless of base model or parentage, use the
two plots in order of how they are in arguments. First plot listed is treated
as base or parent.</p>
</td></tr>
<tr><td><code id="two_set_dots_+3A_envir">envir</code></td>
<td>
<p>Where to assign <code>mod1</code> and <code>mod2</code> &lt;<code>xpose_set_item</code>&gt;s</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that this function does not return valid <code>xpdb</code>-like objects (&lt;<code>xpose_data</code>&gt;
or &lt;<code>xp_xtras</code>&gt;). The necessary objects for most functions can be retrieved using
<code>mod1$xpdb</code> and <code>mod2$xpdb</code>.
</p>


<h3>Value</h3>

<p>Into environment specified by <code>envir</code>, &lt;<code>xpose_set_item</code>&gt; <code>mod1</code> and <code>mod2</code>
</p>

<hr>
<h2 id='val2lvl'>Translate values to levels</h2><span id='topic+val2lvl'></span>

<h3>Description</h3>

<p>This is intended to be used as a convenience function
in plotting where levels are set for some variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>val2lvl(vals, lvl_tbl = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="val2lvl_+3A_vals">vals</code></td>
<td>
<p>vector of values associated with levels in <code>lvl_tbl</code></p>
</td></tr>
<tr><td><code id="val2lvl_+3A_lvl_tbl">lvl_tbl</code></td>
<td>
<p>tibble of levels</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of levels corresponding to the input vector.
</p>

<hr>
<h2 id='vismo_dtmm'>An <code>xp_xtras</code> example of the discrete-time Markov model of categorical vismodegib data</h2><span id='topic+vismo_dtmm'></span>

<h3>Description</h3>

<p>The referenced work presents two alternative modeling approaches
for muscle spasm response to vismodegib. This is a fit of the
provided discrete-time Markov model to the 50 participant mock data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vismo_dtmm
</code></pre>


<h3>Format</h3>



<h4><code>xp_xtras</code></h4>

<p>An <code>xp_xtras</code> object.
</p>



<h3>Source</h3>

<p>Derived from sup-0009 and sup-0010 from the reference.
</p>


<h3>References</h3>

<p>Lu, T., Yang, Y., Jin, J.Y. and Kågedal, M. (2020),
Analysis of Longitudinal-Ordered Categorical Data for
Muscle Spasm Adverse Event of Vismodegib: Comparison
Between Different Pharmacometric Models. CPT
Pharmacometrics Syst. Pharmacol., 9: 96-105.
https://doi.org/10.1002/psp4.12487
</p>

<hr>
<h2 id='vismo_pomod'>An <code>xp_xtras</code> example of the proportional odds categorical vismodegib model</h2><span id='topic+vismo_pomod'></span>

<h3>Description</h3>

<p>The referenced work presents two alternative modeling approaches
for muscle spasm response to vismodegib. This is a fit of the
provided proportional odds model to the 50 participant mock data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vismo_pomod
</code></pre>


<h3>Format</h3>



<h4><code>xp_xtras</code></h4>

<p>An <code>xp_xtras</code> object.
</p>



<h3>Source</h3>

<p>Derived from sup-0009 and sup-0010 from the reference.
</p>


<h3>References</h3>

<p>Lu, T., Yang, Y., Jin, J.Y. and Kågedal, M. (2020),
Analysis of Longitudinal-Ordered Categorical Data for
Muscle Spasm Adverse Event of Vismodegib: Comparison
Between Different Pharmacometric Models. CPT
Pharmacometrics Syst. Pharmacol., 9: 96-105.
https://doi.org/10.1002/psp4.12487
</p>

<hr>
<h2 id='vismodegib'>A tibble of mock data used for fitting vismodegib models</h2><span id='topic+vismodegib'></span>

<h3>Description</h3>

<p>The referenced work presents two alternative modeling approaches
for muscle spasm response to vismodegib. There is a mock
dataset for one person, and using the provided model a 50 participant
mock dataset could be generated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vismodegib
</code></pre>


<h3>Format</h3>



<h4><code>tibble</code></h4>

<p>An <code>tibble</code>.
</p>



<h3>Source</h3>

<p>Generated using sup-0009 and sup-0010 from the reference.
</p>


<h3>References</h3>

<p>Lu, T., Yang, Y., Jin, J.Y. and Kågedal, M. (2020),
Analysis of Longitudinal-Ordered Categorical Data for
Muscle Spasm Adverse Event of Vismodegib: Comparison
Between Different Pharmacometric Models. CPT
Pharmacometrics Syst. Pharmacol., 9: 96-105.
https://doi.org/10.1002/psp4.12487
</p>

<hr>
<h2 id='wrap_xp_ggally'>Ensure consistent style with <code>GGally</code> functions</h2><span id='topic+wrap_xp_ggally'></span>

<h3>Description</h3>

<p>Ensure consistent style with <code>GGally</code> functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wrap_xp_ggally(fn, xp_theme, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="wrap_xp_ggally_+3A_fn">fn</code></td>
<td>
<p>&lt;<code>character</code>&gt; name of <code>GGally</code> function</p>
</td></tr>
<tr><td><code id="wrap_xp_ggally_+3A_xp_theme">xp_theme</code></td>
<td>
<p>theme to use</p>
</td></tr>
<tr><td><code id="wrap_xp_ggally_+3A_...">...</code></td>
<td>
<p>&lt;<code>any</code>&gt; additional arguments to pass to <code>GGally</code> function</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>ggplot2</code> function
</p>

<hr>
<h2 id='xp_var'><code>xp_var</code> Method</h2><span id='topic+xp_var'></span><span id='topic+xp_var.default'></span><span id='topic+xp_var.xp_xtras'></span>

<h3>Description</h3>

<p>To add a small amount of functionality to &lt;<code><a href="xpose.html#topic+xp_var">xp_var</a></code>&gt;,
this method was created.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xp_var(xpdb, .problem, col = NULL, type = NULL, silent = FALSE)

## Default S3 method:
xp_var(xpdb, .problem, col = NULL, type = NULL, silent = FALSE)

## S3 method for class 'xp_xtras'
xp_var(xpdb, .problem, col = NULL, type = NULL, silent = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xp_var_+3A_xpdb">xpdb</code></td>
<td>
<p>An xpose database object.</p>
</td></tr>
<tr><td><code id="xp_var_+3A_.problem">.problem</code></td>
<td>
<p>The $problem number to be used.</p>
</td></tr>
<tr><td><code id="xp_var_+3A_col">col</code></td>
<td>
<p>The column name to be searched in the index. Alternative to arg 'type'.</p>
</td></tr>
<tr><td><code id="xp_var_+3A_type">type</code></td>
<td>
<p>The type of column to searched in the index. Alternative to 'col'.</p>
</td></tr>
<tr><td><code id="xp_var_+3A_silent">silent</code></td>
<td>
<p>Should the function be silent or return errors.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble of identified variables.
</p>

<hr>
<h2 id='xp_xtra_theme'>Extra theme defaults</h2><span id='topic+xp_xtra_theme'></span>

<h3>Description</h3>

<p>Adds aesthetics for plot components used in this
package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xp_xtra_theme(base_on = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xp_xtra_theme_+3A_base_on">base_on</code></td>
<td>
<p><code>xp_theme</code> object to extend</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This package attempts to generate a consistent
theme even if users are working with a highly
customized <code>xp_theme</code>. There is are only a few
hard-coded aesthetics, and the rest are derived from
existing aesthetics in <code>base_on</code>, which defaults to
the default from <code>xpose</code>.
</p>
<p>Only a few options are worth noting. In &lt;<code><a href="#topic+xplot_pairs">xplot_pairs</a></code>&gt;
(and functions using it), the aesthetics for <code>GGally</code>-specific
elements like <code>barDiag</code> are defined as <code style="white-space: pre;">&#8288;gga(element)_(aesthetic)&#8288;</code>.
The labeller for pairs plots is also changed from the <em>de facto</em> default
<code>label_both</code> to <code>label_value</code>, but any labeller can be provided as
<code>pairs_labeller</code>.
</p>


<h3>Value</h3>

<p>An <code>xpose</code> theme object
</p>

<hr>
<h2 id='xp4_xtra_theme'>Updated version of the xpose4 theme</h2><span id='topic+xp4_xtra_theme'></span>

<h3>Description</h3>

<p>Updated version of the xpose4 theme
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xp4_xtra_theme()
</code></pre>


<h3>Value</h3>

<p>An <code>xpose</code> theme object with <code>xpose4</code> color palette
</p>

<hr>
<h2 id='xpdb_set'>An example <code>xpose_set</code> object</h2><span id='topic+xpdb_set'></span>

<h3>Description</h3>

<p>A set of identical <code>xpdb</code> objects to demo various features of <code>xpose.xtras</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xpdb_set
</code></pre>


<h3>Format</h3>



<h4><code>xpose_set</code></h4>

<p>An <code>xpose_set</code> object of length 4 with a single lineage.
</p>



<h3>Source</h3>

<p>Assembled from the <code>xpdb_ex_pk</code> object in the <code>xpose</code> package.
</p>

<hr>
<h2 id='xpdb_x'>An example <code>xp_xtras</code> object</h2><span id='topic+xpdb_x'></span>

<h3>Description</h3>

<p>The &lt;<code><a href="xpose.html#topic+xpdb_ex_pk">xpdb_ex_pk</a></code>&gt; object converted to <code>xp_xtras</code>. For examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xpdb_x
</code></pre>


<h3>Format</h3>



<h4><code>xp_xtras</code></h4>

<p>An <code>xp_xtras</code> object with no extra data filled.
</p>



<h3>Source</h3>

<p>Assembled from the <code>xpdb_ex_pk</code> object in the <code>xpose</code> package.
</p>

<hr>
<h2 id='xplot_boxplot'>Default xpose boxplot function</h2><span id='topic+xplot_boxplot'></span>

<h3>Description</h3>

<p>Manually generate boxplots from an xpdb object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xplot_boxplot(
  xpdb,
  mapping = NULL,
  type = "bo",
  xscale = "discrete",
  yscale = "continuous",
  orientation = "x",
  group = "ID",
  title = NULL,
  subtitle = NULL,
  caption = NULL,
  tag = NULL,
  plot_name = "boxplot",
  gg_theme,
  xp_theme,
  opt,
  quiet,
  jitter_seed,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xplot_boxplot_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code>xp_xtras</code>&gt; or &lt;<code>xpose_data</code>&gt; object</p>
</td></tr>
<tr><td><code id="xplot_boxplot_+3A_mapping">mapping</code></td>
<td>
<p><code>ggplot2</code> style mapping</p>
</td></tr>
<tr><td><code id="xplot_boxplot_+3A_type">type</code></td>
<td>
<p>See Details.</p>
</td></tr>
<tr><td><code id="xplot_boxplot_+3A_xscale">xscale</code></td>
<td>
<p>Defaults to <code>discrete</code>.</p>
</td></tr>
<tr><td><code id="xplot_boxplot_+3A_yscale">yscale</code></td>
<td>
<p>Defaults to <code>continuous</code>, used as check if <code>orientation</code> changed.</p>
</td></tr>
<tr><td><code id="xplot_boxplot_+3A_orientation">orientation</code></td>
<td>
<p>Defaults to <code>x</code></p>
</td></tr>
<tr><td><code id="xplot_boxplot_+3A_group">group</code></td>
<td>
<p>Grouping for connecting lines through jitter</p>
</td></tr>
<tr><td><code id="xplot_boxplot_+3A_title">title</code></td>
<td>
<p>Plot title</p>
</td></tr>
<tr><td><code id="xplot_boxplot_+3A_subtitle">subtitle</code></td>
<td>
<p>Plot subtitle</p>
</td></tr>
<tr><td><code id="xplot_boxplot_+3A_caption">caption</code></td>
<td>
<p>Plot caption</p>
</td></tr>
<tr><td><code id="xplot_boxplot_+3A_tag">tag</code></td>
<td>
<p>Plot tag</p>
</td></tr>
<tr><td><code id="xplot_boxplot_+3A_plot_name">plot_name</code></td>
<td>
<p>Metadata name of plot</p>
</td></tr>
<tr><td><code id="xplot_boxplot_+3A_gg_theme">gg_theme</code></td>
<td>
<p>As in <code>xpose</code></p>
</td></tr>
<tr><td><code id="xplot_boxplot_+3A_xp_theme">xp_theme</code></td>
<td>
<p>As in <code>xpose</code></p>
</td></tr>
<tr><td><code id="xplot_boxplot_+3A_opt">opt</code></td>
<td>
<p>Processing options for fetched data</p>
</td></tr>
<tr><td><code id="xplot_boxplot_+3A_quiet">quiet</code></td>
<td>
<p>Silence extra debugging output</p>
</td></tr>
<tr><td><code id="xplot_boxplot_+3A_jitter_seed">jitter_seed</code></td>
<td>
<p>A numeric, optional seed to be used in jitters</p>
</td></tr>
<tr><td><code id="xplot_boxplot_+3A_...">...</code></td>
<td>
<p>Any additional aesthetics.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For type-based customization of plots:
</p>

<ul>
<li> <p><code>b</code> box-whisker (using default quantiles)
</p>
</li>
<li> <p><code>p</code> points (from <code>geom_dotplot</code>)
</p>
</li>
<li> <p><code>v</code> violin (from <code>geom_violin</code>)
</p>
</li>
<li> <p><code>o</code> outliers (show outliers)
</p>
</li>
<li> <p><code>l</code> line through 0 (or as indicated in <code>hline_yintercept</code> or
<code>yline_xintercept</code>)
</p>
</li>
<li> <p><code>s</code> smooth line (from <code>geom_smooth</code>)
</p>
</li>
<li> <p><code>j</code> jitter points (from <code>geom_jitter</code>)
</p>
</li>
<li> <p><code>c</code> connecting lines for jitter points  (from <code>geom_path</code>)
</p>
</li></ul>



<h3>Value</h3>

<p>The desired plot
</p>

<hr>
<h2 id='xplot_pairs'>Wrapper around ggpairs</h2><span id='topic+xplot_pairs'></span>

<h3>Description</h3>

<p>Following the <code>xpose</code> design pattern to derive &lt;<code><a href="GGally.html#topic+ggpairs">ggpairs</a></code>&gt; plots.
</p>
<p>Established <code>xplot_</code> are used to generate parts of the grid.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xplot_pairs(
  xpdb,
  mapping = NULL,
  cont_opts = list(group = "ID", guide = FALSE, type = "ps"),
  dist_opts = list(guide = FALSE, type = "hr"),
  cat_opts = list(type = "bo", log = NULL),
  contcont_opts = list(other_fun = NULL, stars = FALSE, digits = reportable_digits(xpdb),
    title = "Pearson Corr"),
  catcont_opts = list(other_fun = NULL, stars = FALSE, digits = reportable_digits(xpdb),
    title = "Spearman rho"),
  catcat_opts = list(use_rho = TRUE),
  title = NULL,
  subtitle = NULL,
  caption = NULL,
  tag = NULL,
  plot_name = "pairs",
  gg_theme,
  xp_theme,
  opt,
  quiet,
  progress = rlang::is_interactive() &amp;&amp; quiet,
  switch = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xplot_pairs_+3A_xpdb">xpdb</code></td>
<td>
<p>&lt;<code style="white-space: pre;">&#8288;xp_xtras&gt; or  &lt;&#8288;</code>xpose_data'&gt; object</p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_mapping">mapping</code></td>
<td>
<p><code>ggplot2</code> style mapping</p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_cont_opts">cont_opts</code></td>
<td>
<p>List of options to pass to <code>xplot_scatter</code>. See Details</p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_dist_opts">dist_opts</code></td>
<td>
<p>List of options to pass to <code>xplot_distribution</code>. See Details</p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_cat_opts">cat_opts</code></td>
<td>
<p>List of options to pass to <code>xplot_boxplot</code>. See Details</p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_contcont_opts">contcont_opts</code></td>
<td>
<p>List of options to pass to <code>ggally_cors</code>. See Details</p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_catcont_opts">catcont_opts</code></td>
<td>
<p>List of options to pass to <code>ggally_statistic</code>. See Details</p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_catcat_opts">catcat_opts</code></td>
<td>
<p>A list with <code>use_rho</code> <code>TRUE</code> or <code>FALSE</code>. If <code>TRUE</code> (default),
then the Spearman rho is displayed, else the ggpairs default count is used.</p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_title">title</code></td>
<td>
<p>Plot title</p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_subtitle">subtitle</code></td>
<td>
<p>Plot subtitle</p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_caption">caption</code></td>
<td>
<p>Plot caption</p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_tag">tag</code></td>
<td>
<p>Plot tag</p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_plot_name">plot_name</code></td>
<td>
<p>Metadata name of plot</p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_gg_theme">gg_theme</code></td>
<td>
<p>As in <code>xpose</code>. This does not work reliably when changed from the default.</p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_xp_theme">xp_theme</code></td>
<td>
<p>As in <code>xpose</code></p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_opt">opt</code></td>
<td>
<p>Processing options for fetched data</p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_quiet">quiet</code></td>
<td>
<p>Silence extra debugging output</p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_progress">progress</code></td>
<td>
<p>Show a progress bar as the plot is generated?</p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_switch">switch</code></td>
<td>
<p>Passed to <code>ggpairs</code></p>
</td></tr>
<tr><td><code id="xplot_pairs_+3A_...">...</code></td>
<td>
<p>Ignored</p>
</td></tr>
</table>


<h3>Details</h3>

<p>There is only limited control over the underlying <code>ggpairs()</code> call given
the need to address abstractions in <code>GGally</code> and <code>xpose</code>. However, users
can modify  key display features. For <code>scatter</code>, <code>distribution</code> and <code>boxplots</code>,
the <code>type</code> option is directly forwarded to the user. For upper elements of the matrix,
users can modify features of the text displayed or supply some other
function entirely (<code>other_fun</code>).
</p>
<p><code style="white-space: pre;">&#8288;_opts&#8288;</code> lists are consumed with &lt;<code><a href="utils.html#topic+modifyList">modifyList</a></code>&gt; from the default,
so there is no need to declare preferences that align with the default if updating
a subset.
</p>


<h3>Value</h3>

<p>specified pair plot
</p>

<hr>
<h2 id='xpose_set'>Generate a set of <code>xpdb</code> objects</h2><span id='topic+xpose_set'></span>

<h3>Description</h3>

<p>This function generates a set of xpose data (<code>xpdb</code>) objects that
can be used to define relationships between models. The
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xpose_set(..., .relationships = NULL, .as_ordered = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xpose_set_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; <code style="white-space: pre;">&#8288;xpdb1, xpdb2, ...&#8288;</code> A set of <code>xpdb</code> objects to be combined into a set.</p>
</td></tr>
<tr><td><code id="xpose_set_+3A_.relationships">.relationships</code></td>
<td>
<p>&lt;<code><a href="base.html#topic+list">list</a></code>&gt; A list of relationships between the <code>xpdb</code> objects. (see Details)</p>
</td></tr>
<tr><td><code id="xpose_set_+3A_.as_ordered">.as_ordered</code></td>
<td>
<p>&lt;<code><a href="base.html#topic+logical">logical</a></code>&gt; Alternative to <code>.relationships</code>, should the set of <code>xpdb</code> objects provided be considered a lineage (<code style="white-space: pre;">&#8288;grandparent, parent, child, ...&#8288;</code>)?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Beyond just a list of <code>xpdb</code> objects, an <code>xpose_set</code> adds hierarchical information.
</p>
<p>When using <code>.relationships</code>, these should be expressed as tilde formulas, where the left-hand side is
children and the right and side is parents. In the simplest case, this would be <code>child ~ parent</code>, but a child can have multiple parents. This
syntax expects that the names for models is either declared as argument names in the call, or that the
variable names are directly used (i.e., not spliced or passed as an unnamed list).
</p>


<h3>Value</h3>

<p>A list of class <code>xpose_set</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("xpdb_ex_pk", package = "xpose")

# Arbitrary copy
xpdb_ex_pk2 &lt;- xpdb_ex_pk

# Simplest call
set1 &lt;- xpose_set(xpdb_ex_pk, xpdb_ex_pk2)

# With predefined relationships
set2 &lt;- xpose_set(xpdb_ex_pk, xpdb_ex_pk2,
  .relationships = list(xpdb_ex_pk2 ~ xpdb_ex_pk)
  )

# Alternative predefined relationships
set2b &lt;- xpose_set(xpdb_ex_pk, xpdb_ex_pk2,
  .as_ordered = TRUE
  )

# With custom labels
set3 &lt;- xpose_set(mod1 = xpdb_ex_pk, mod2 = xpdb_ex_pk2,
  .relationships = list(mod2 ~ mod1)
  )

# Alternative set3 using dyanmic dots
mod_list &lt;- list(
  mod1 = xpdb_ex_pk,
  mod2 = xpdb_ex_pk2
)
mod_rels &lt;- list(
  mod2 ~ mod1
)
set3b = xpose_set(!!!mod_list, .relationships = mod_rels)

</code></pre>

<hr>
<h2 id='xset_lineage'>Determine lineage within a set</h2><span id='topic+xset_lineage'></span>

<h3>Description</h3>

<p>Determine lineage within a set
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xset_lineage(xpdb_s, ..., .spinner = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xset_lineage_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code>xpose_set</code>&gt; object</p>
</td></tr>
<tr><td><code id="xset_lineage_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; labels for
models in the set from which to create lineages (will result in a list
if multiple labels are used). If empty,
lineage from base model will be output; if no base, first listed
model will be used. Always used the most senior model in this list.</p>
</td></tr>
<tr><td><code id="xset_lineage_+3A_.spinner">.spinner</code></td>
<td>
<p>Set to <code>FALSE</code> to not show a loading spinner in interactive mode.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function uses a not-especially-optimized tree-searching algorithm
to determine the longest lineage starting from whatever is treated as
the base model. It is based loosely on &lt;<code><a href="purrr.html#topic+pluck_depth">pluck_depth</a></code>&gt;,
but the values at each depth are maintained.
As such, for larger sets this function and, more importantly,
functions that use it may take some time.
</p>


<h3>Value</h3>

<p>&lt;<code>character</code>&gt; vector of <code>c('base', 'base child', 'base grandchild', ...)</code> or list thereof, depending on dots arguments.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

xset_lineage(xpdb_set)

set_base_model(xpdb_set, fix1) %&gt;%
  xset_lineage()

xset_lineage(xpdb_set, fix1)


</code></pre>

<hr>
<h2 id='xset_waterfall'>Waterfall plot</h2><span id='topic+xset_waterfall'></span>

<h3>Description</h3>

<p>Generic function primarily used with wrappers targeting
types of values changed between two models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xset_waterfall(
  xpdb_s,
  ...,
  .inorder = FALSE,
  type = "bh",
  .cols = NULL,
  max_nind = 0.7,
  scale_diff = TRUE,
  show_n = TRUE,
  title = NULL,
  subtitle = NULL,
  caption = NULL,
  tag = NULL,
  plot_name = "waterfall",
  opt,
  facets = NULL,
  facet_scales = "free_x",
  .problem,
  .subprob,
  .method,
  quiet
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xset_waterfall_+3A_xpdb_s">xpdb_s</code></td>
<td>
<p>&lt;<code>xpose_set</code>&gt; object</p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_...">...</code></td>
<td>
<p>See &lt;<code><a href="#topic+two_set_dots">two_set_dots</a></code>&gt;</p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_.inorder">.inorder</code></td>
<td>
<p>See &lt;<code><a href="#topic+two_set_dots">two_set_dots</a></code>&gt;</p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_type">type</code></td>
<td>
<p>See Details.</p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_.cols">.cols</code></td>
<td>
<p>&lt;<code>tidyselect</code>&gt; data columns to plot.</p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_max_nind">max_nind</code></td>
<td>
<p>If less than 1, the percentile of absolute
change values above which to plot.
If above 1, the absolute number of subjects is included. To show all,
use an extreme positive number like 9999.</p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_scale_diff">scale_diff</code></td>
<td>
<p>&lt;<code>logical</code>&gt; Scale change to the standard deviation
of the model 1 column values. Respects faceting.</p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_show_n">show_n</code></td>
<td>
<p>&lt;<code>logical</code>&gt; For faceting variables, show N per facet.
<em>Not implemented</em></p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_title">title</code></td>
<td>
<p>Plot title</p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_subtitle">subtitle</code></td>
<td>
<p>Plot subtitle</p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_caption">caption</code></td>
<td>
<p>Plot caption</p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_tag">tag</code></td>
<td>
<p>Plot tag</p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_plot_name">plot_name</code></td>
<td>
<p>Metadata name of plot</p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_opt">opt</code></td>
<td>
<p>User-specified data options. Only some of these
will be used.</p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_facets">facets</code></td>
<td>
<p>&lt;<code>character</code>&gt; Faceting variables</p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_facet_scales">facet_scales</code></td>
<td>
<p>&lt;<code>character</code>&gt; Forwarded to <code>facet_*(scales = facet_scales)</code></p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_.problem">.problem</code></td>
<td>
<p>The problem to be used, by default returns the last one.</p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_.subprob">.subprob</code></td>
<td>
<p>The subproblem to be used, by default returns the last one.</p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_.method">.method</code></td>
<td>
<p>The estimation method to be used, by default returns the last one.</p>
</td></tr>
<tr><td><code id="xset_waterfall_+3A_quiet">quiet</code></td>
<td>
<p>Silence extra debugging output</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For type-based customization of plots:
</p>

<ul>
<li> <p><code>b</code> bar plot (from <code>geom_bar</code>)
</p>
</li>
<li> <p><code>h</code> hline at 0 (from <code>geom_hline</code>)
</p>
</li>
<li> <p><code>t</code> text of change value (from <code>geom_text</code>)
</p>
</li></ul>



<h3>Value</h3>

<p>The desired plot
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
