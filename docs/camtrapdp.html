<!DOCTYPE html><html lang="en"><head><title>Help for package camtrapdp</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {camtrapdp}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#camtrapdp-package'><p>camtrapdp: Read and Manipulate Camera Trap Data Packages</p></a></li>
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#check_camtrapdp'><p>Check a Camera Trap Data Package object</p></a></li>
<li><a href='#deployments'><p>Get or set deployments</p></a></li>
<li><a href='#events'><p>Get events</p></a></li>
<li><a href='#example_dataset'><p>Read the Camtrap DP example dataset</p></a></li>
<li><a href='#filter_deployments'><p>Filter deployments</p></a></li>
<li><a href='#filter_media'><p>Filter media</p></a></li>
<li><a href='#filter_observations'><p>Filter observations</p></a></li>
<li><a href='#locations'><p>Get locations</p></a></li>
<li><a href='#media'><p>Get or set media</p></a></li>
<li><a href='#observations'><p>Get observations</p></a></li>
<li><a href='#print.camtrapdp'><p>Print a Camera Trap Data Package</p></a></li>
<li><a href='#read_camtrapdp'><p>Read a Camera Trap Data Package</p></a></li>
<li><a href='#taxa'><p>Get taxa</p></a></li>
<li><a href='#version'><p>Get Camtrap DP version</p></a></li>
<li><a href='#write_dwc'><p>Transform a Camera Trap Data Package to a Darwin Core Archive</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Read and Manipulate Camera Trap Data Packages</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-07-05</td>
</tr>
<tr>
<td>Description:</td>
<td>Read and manipulate Camera Trap Data Packages ('Camtrap DP').
    'Camtrap DP' (<a href="https://camtrap-dp.tdwg.org">https://camtrap-dp.tdwg.org</a>) is a data exchange format
    for camera trap data. With 'camtrapdp' you can read, filter and
    transform data (including to Darwin Core) before further analysis in
    e.g. 'camtraptor' or 'camtrapR'.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/inbo/camtrapdp">https://github.com/inbo/camtrapdp</a>,
<a href="https://inbo.github.io/camtrapdp/">https://inbo.github.io/camtrapdp/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/inbo/camtrapdp/issues">https://github.com/inbo/camtrapdp/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, dplyr, frictionless (&ge; 1.1.0), memoise, purrr, readr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>lubridate, testthat (&ge; 3.0.0), tibble, xml2</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-07-05 13:44:17 UTC; peter_desmet</td>
</tr>
<tr>
<td>Author:</td>
<td>Peter Desmet <a href="https://orcid.org/0000-0002-8442-8025"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre] (affiliation: Research Institute for Nature and Forest
    (INBO)),
  Sanne Govaert <a href="https://orcid.org/0000-0002-8939-1305"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut] (affiliation: Research Institute for Nature and Forest
    (INBO)),
  Pieter Huybrechts <a href="https://orcid.org/0000-0002-6658-6062"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut] (affiliation: Research Institute for Nature and Forest
    (INBO)),
  Damiano Oldoni <a href="https://orcid.org/0000-0003-3445-7562"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut] (affiliation: Research Institute for Nature and Forest
    (INBO)),
  Research Institute for Nature and Forest (INBO) [cph]
    (https://www.vlaanderen.be/inbo/en-gb/),
  LifeWatch Belgium [fnd] (https://lifewatch.be)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Peter Desmet &lt;peter.desmet@inbo.be&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-07-05 14:10:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='camtrapdp-package'>camtrapdp: Read and Manipulate Camera Trap Data Packages</h2><span id='topic+camtrapdp'></span><span id='topic+camtrapdp-package'></span>

<h3>Description</h3>

<p>Read and manipulate Camera Trap Data Packages ('Camtrap DP'). 'Camtrap DP' (<a href="https://camtrap-dp.tdwg.org">https://camtrap-dp.tdwg.org</a>) is a data exchange format for camera trap data. With 'camtrapdp' you can read, filter and transform data (including to Darwin Core) before further analysis in e.g. 'camtraptor' or 'camtrapR'.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Peter Desmet <a href="mailto:peter.desmet@inbo.be">peter.desmet@inbo.be</a> (<a href="https://orcid.org/0000-0002-8442-8025">ORCID</a>) (Research Institute for Nature and Forest (INBO))
</p>
<p>Authors:
</p>

<ul>
<li><p> Sanne Govaert <a href="mailto:sanne.govaert@inbo.be">sanne.govaert@inbo.be</a> (<a href="https://orcid.org/0000-0002-8939-1305">ORCID</a>) (Research Institute for Nature and Forest (INBO))
</p>
</li>
<li><p> Pieter Huybrechts <a href="mailto:pieter.huybrechts@inbo.be">pieter.huybrechts@inbo.be</a> (<a href="https://orcid.org/0000-0002-6658-6062">ORCID</a>) (Research Institute for Nature and Forest (INBO))
</p>
</li>
<li><p> Damiano Oldoni <a href="mailto:damiano.oldoni@inbo.be">damiano.oldoni@inbo.be</a> (<a href="https://orcid.org/0000-0003-3445-7562">ORCID</a>) (Research Institute for Nature and Forest (INBO))
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Research Institute for Nature and Forest (INBO) (https://www.vlaanderen.be/inbo/en-gb/) [copyright holder]
</p>
</li>
<li><p> LifeWatch Belgium (https://lifewatch.be) [funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/inbo/camtrapdp">https://github.com/inbo/camtrapdp</a>
</p>
</li>
<li> <p><a href="https://inbo.github.io/camtrapdp/">https://inbo.github.io/camtrapdp/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/inbo/camtrapdp/issues">https://github.com/inbo/camtrapdp/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::pipe()</code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='check_camtrapdp'>Check a Camera Trap Data Package object</h2><span id='topic+check_camtrapdp'></span>

<h3>Description</h3>

<p>Checks if an object is a Camera Trap Data Package object with the required
properties.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_camtrapdp(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_camtrapdp_+3A_x">x</code></td>
<td>
<p>Camera Trap Data Package object, as returned by
<code>read_camtrapdp()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> invisibly or error.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- example_dataset()
check_camtrapdp(x) # Invisible return of x if valid
</code></pre>

<hr>
<h2 id='deployments'>Get or set deployments</h2><span id='topic+deployments'></span><span id='topic+deployments+3C-'></span>

<h3>Description</h3>

<p><code>deployments()</code> gets the deployments from a Camera Trap Data Package object.
</p>
<p><code style="white-space: pre;">&#8288;deployments&lt;-()&#8288;</code> is the assignment equivalent.
It should only be used within other functions, where the expected data
structure can be guaranteed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deployments(x)

deployments(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="deployments_+3A_x">x</code></td>
<td>
<p>Camera Trap Data Package object, as returned by <code>read_camtrapdp()</code>.</p>
</td></tr>
<tr><td><code id="deployments_+3A_value">value</code></td>
<td>
<p>A data frame to assign as deployments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> data frame with deployments.
</p>


<h3>See Also</h3>

<p>Other accessor functions: 
<code><a href="#topic+events">events</a>()</code>,
<code><a href="#topic+locations">locations</a>()</code>,
<code><a href="#topic+media">media</a>()</code>,
<code><a href="#topic+observations">observations</a>()</code>,
<code><a href="#topic+taxa">taxa</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- example_dataset()
# Get deployments
deployments(x)

# Set deployments (not recommended outside a function)
deployments(x) &lt;- head(deployments(x), 1)
</code></pre>

<hr>
<h2 id='events'>Get events</h2><span id='topic+events'></span>

<h3>Description</h3>

<p>Gets the (unique) events from the observations of a Camera Trap Data
Package object.
Only observations with <code>observationLevel == "event"</code> are considered.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>events(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="events_+3A_x">x</code></td>
<td>
<p>Camera Trap Data Package object, as returned by <code>read_camtrapdp()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> data frame with the events, containing the following
columns:
</p>

<ul>
<li> <p><code>deploymentID</code>
</p>
</li>
<li> <p><code>eventID</code>
</p>
</li>
<li> <p><code>eventStart</code>
</p>
</li>
<li> <p><code>eventEnd</code>
</p>
</li></ul>



<h3>See Also</h3>

<p>Other accessor functions: 
<code><a href="#topic+deployments">deployments</a>()</code>,
<code><a href="#topic+locations">locations</a>()</code>,
<code><a href="#topic+media">media</a>()</code>,
<code><a href="#topic+observations">observations</a>()</code>,
<code><a href="#topic+taxa">taxa</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- example_dataset()
events(x)
</code></pre>

<hr>
<h2 id='example_dataset'>Read the Camtrap DP example dataset</h2><span id='topic+example_dataset'></span>

<h3>Description</h3>

<p>Reads the <a href="https://camtrap-dp.tdwg.org/example/">Camtrap DP example dataset</a>.
This dataset is maintained and versioned with the Camtrap DP standard.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>example_dataset()
</code></pre>


<h3>Value</h3>

<p>Camera Trap Data Package object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>example_dataset()
</code></pre>

<hr>
<h2 id='filter_deployments'>Filter deployments</h2><span id='topic+filter_deployments'></span>

<h3>Description</h3>

<p>Subsets deployments in a Camera Trap Data Package object, retaining all
rows that satisfy the conditions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_deployments(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter_deployments_+3A_x">x</code></td>
<td>
<p>Camera Trap Data Package object, as returned by <code>read_camtrapdp()</code>.</p>
</td></tr>
<tr><td><code id="filter_deployments_+3A_...">...</code></td>
<td>
<p>Filtering conditions, see <code>dplyr::filter()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li><p> Media are filtered on associated <code>deploymentID</code>.
</p>
</li>
<li><p> Observations are filtered on associated <code>deploymentID</code>.
</p>
</li></ul>



<h3>Value</h3>

<p><code>x</code> filtered.
</p>


<h3>See Also</h3>

<p>Other filter functions: 
<code><a href="#topic+filter_media">filter_media</a>()</code>,
<code><a href="#topic+filter_observations">filter_observations</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- example_dataset()

# Filtering returns x, so pipe with deployments() to see the result
x %&gt;%
  filter_deployments(deploymentID == "62c200a9") %&gt;%
  deployments()

# Filtering on deployments also affects associated media and observations
x_filtered &lt;- filter_deployments(x, deploymentID == "62c200a9")
media(x_filtered)
observations(x_filtered)

# Filtering on multiple conditions (combined with &amp;)
x %&gt;%
  filter_deployments(latitude &gt; 51.0, longitude &gt; 5.0) %&gt;%
  deployments()

# Filtering on dates is easiest with lubridate
library(lubridate, warn.conflicts = FALSE)
x %&gt;%
  filter_deployments(
    deploymentStart &gt;= lubridate::as_date("2020-06-19"),
    deploymentEnd &lt;= lubridate::as_date("2020-08-30")
  ) %&gt;%
  deployments()
</code></pre>

<hr>
<h2 id='filter_media'>Filter media</h2><span id='topic+filter_media'></span>

<h3>Description</h3>

<p>Subsets media in a Camera Trap Data Package object, retaining all rows that
satisfy the conditions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_media(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter_media_+3A_x">x</code></td>
<td>
<p>Camera Trap Data Package object, as returned by <code>read_camtrapdp()</code>.</p>
</td></tr>
<tr><td><code id="filter_media_+3A_...">...</code></td>
<td>
<p>Filtering conditions, see <code>dplyr::filter()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li><p> Deployments are not filtered.
</p>
</li>
<li><p> Observations are filtered on associated <code>mediaID</code> (for media-based
observations) and <code>eventID</code> (for event-based observations).
</p>
</li></ul>



<h3>Value</h3>

<p><code>x</code> filtered.
</p>


<h3>See Also</h3>

<p>Other filter functions: 
<code><a href="#topic+filter_deployments">filter_deployments</a>()</code>,
<code><a href="#topic+filter_observations">filter_observations</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- example_dataset()

# Filtering returns x, so pipe with media() to see the result
x %&gt;%
  filter_media(captureMethod == "timeLapse") %&gt;%
  media()

# Filtering on media also affects associated observations, but not deployments
x_filtered &lt;- filter_media(x, favorite == TRUE)
observations(x_filtered)

# Filtering on multiple conditions (combined with &amp;)
x %&gt;%
  filter_media(captureMethod == "activityDetection", filePublic == FALSE) %&gt;%
  media()

# Filtering on datetimes is easiest with lubridate
library(lubridate, warn.conflicts = FALSE)
x %&gt;%
  filter_media(
    timestamp &gt;= lubridate::as_datetime("2020-08-02 05:01:00"),
    timestamp &lt;= lubridate::as_datetime("2020-08-02 05:02:00")
  ) %&gt;%
  media()
</code></pre>

<hr>
<h2 id='filter_observations'>Filter observations</h2><span id='topic+filter_observations'></span>

<h3>Description</h3>

<p>Subsets observations in a Camera Trap Data Package object, retaining all rows
that satisfy the conditions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_observations(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter_observations_+3A_x">x</code></td>
<td>
<p>Camera Trap Data Package object, as returned by <code>read_camtrapdp()</code>.</p>
</td></tr>
<tr><td><code id="filter_observations_+3A_...">...</code></td>
<td>
<p>Filtering conditions, see <code>dplyr::filter()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li><p> Deployments are not filtered.
</p>
</li>
<li><p> Media are filtered on associated <code>mediaID</code> (for media-based observations)
and <code>eventID</code> (for event-based observations).
Filter on <code>observationLevel == "media"</code> to only retain directly linked media.
</p>
</li></ul>



<h3>Value</h3>

<p><code>x</code> filtered.
</p>


<h3>See Also</h3>

<p>Other filter functions: 
<code><a href="#topic+filter_deployments">filter_deployments</a>()</code>,
<code><a href="#topic+filter_media">filter_media</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- example_dataset()

# Filtering returns x, so pipe with observations() to see the result
x %&gt;%
  filter_observations(observationType == "animal") %&gt;%
  observations()

# Filtering on observations also affects associated media, but not deployments
x %&gt;%
  filter_observations(scientificName == "Vulpes vulpes", observationLevel == "event") %&gt;%
  media()
x %&gt;%
  filter_observations(scientificName == "Vulpes vulpes", observationLevel == "media") %&gt;%
  media()

# Filtering on multiple conditions (combined with &amp;)
x %&gt;%
  filter_observations(
    deploymentID == "577b543a",
    scientificName %in% c("Martes foina", "Mustela putorius")
  ) %&gt;%
  observations()

# Filtering on datetimes is easiest with lubridate
library(lubridate, warn.conflicts = FALSE)
x %&gt;%
  filter_observations(
    eventStart &gt;= lubridate::as_datetime("2020-06-19 22:00:00"),
    eventEnd &lt;= lubridate::as_datetime("2020-06-19 22:10:00")
  ) %&gt;%
  observations()
</code></pre>

<hr>
<h2 id='locations'>Get locations</h2><span id='topic+locations'></span>

<h3>Description</h3>

<p>Gets the (unique) locations from the deployments of a Camera Trap Data
Package object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>locations(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="locations_+3A_x">x</code></td>
<td>
<p>Camera Trap Data Package object, as returned by <code>read_camtrapdp()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> data frame with the locations, containing the following
columns:
</p>

<ul>
<li> <p><code>locationID</code>
</p>
</li>
<li> <p><code>locationName</code>
</p>
</li>
<li> <p><code>latitude</code>
</p>
</li>
<li> <p><code>longitude</code>
</p>
</li>
<li> <p><code>coordinateUncertainty</code>
</p>
</li></ul>



<h3>See Also</h3>

<p>Other accessor functions: 
<code><a href="#topic+deployments">deployments</a>()</code>,
<code><a href="#topic+events">events</a>()</code>,
<code><a href="#topic+media">media</a>()</code>,
<code><a href="#topic+observations">observations</a>()</code>,
<code><a href="#topic+taxa">taxa</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- example_dataset()
locations(x)
</code></pre>

<hr>
<h2 id='media'>Get or set media</h2><span id='topic+media'></span><span id='topic+media+3C-'></span>

<h3>Description</h3>

<p><code>media()</code> gets the media from a Camera Trap Data Package object.
</p>
<p><code style="white-space: pre;">&#8288;media&lt;-()&#8288;</code> is the assignment equivalent.
It should only be used within other functions, where the expected data
structure can be guaranteed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>media(x)

media(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="media_+3A_x">x</code></td>
<td>
<p>Camera Trap Data Package object, as returned by <code>read_camtrapdp()</code>.</p>
</td></tr>
<tr><td><code id="media_+3A_value">value</code></td>
<td>
<p>A data frame to assign as media.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> data frame with media.
</p>


<h3>See Also</h3>

<p>Other accessor functions: 
<code><a href="#topic+deployments">deployments</a>()</code>,
<code><a href="#topic+events">events</a>()</code>,
<code><a href="#topic+locations">locations</a>()</code>,
<code><a href="#topic+observations">observations</a>()</code>,
<code><a href="#topic+taxa">taxa</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- example_dataset()
# Get media
media(x)

# Set media (not recommended outside a function)
media(x) &lt;- head(media(x), 1)
</code></pre>

<hr>
<h2 id='observations'>Get observations</h2><span id='topic+observations'></span><span id='topic+observations+3C-'></span>

<h3>Description</h3>

<p><code>observations()</code> gets the observations from a Camera Trap Data Package
object.
</p>
<p><code style="white-space: pre;">&#8288;observations&lt;-()&#8288;</code> is the assignment equivalent.
It should only be used within other functions, where the expected data
structure can be guaranteed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>observations(x)

observations(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="observations_+3A_x">x</code></td>
<td>
<p>Camera Trap Data Package object, as returned by <code>read_camtrapdp()</code>.</p>
</td></tr>
<tr><td><code id="observations_+3A_value">value</code></td>
<td>
<p>A data frame to assign as observations.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> data frame with observations.
</p>


<h3>See Also</h3>

<p>Other accessor functions: 
<code><a href="#topic+deployments">deployments</a>()</code>,
<code><a href="#topic+events">events</a>()</code>,
<code><a href="#topic+locations">locations</a>()</code>,
<code><a href="#topic+media">media</a>()</code>,
<code><a href="#topic+taxa">taxa</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- example_dataset()
# Get the observations
observations(x)

# Set observations (not recommended outside a function)
observations(x) &lt;- head(observations(x), 1)
</code></pre>

<hr>
<h2 id='print.camtrapdp'>Print a Camera Trap Data Package</h2><span id='topic+print.camtrapdp'></span>

<h3>Description</h3>

<p>Prints a human-readable summary of a Camera Trap Data Package, as an
extension of <code><a href="frictionless.html#topic+print.datapackage">frictionless::print.datapackage()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'camtrapdp'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.camtrapdp_+3A_x">x</code></td>
<td>
<p>Camera Trap Data Package object, as returned by <code>read_camtrapdp()</code>.</p>
</td></tr>
<tr><td><code id="print.camtrapdp_+3A_...">...</code></td>
<td>
<p>Further arguments, they are ignored by this function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="base.html#topic+print">print()</a></code> with a summary of the Camera Trap Data Package object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- example_dataset()

# Print a summary
print(x)

# Print a summary after filtering
filter_deployments(x, deploymentID == "62c200a9")
</code></pre>

<hr>
<h2 id='read_camtrapdp'>Read a Camera Trap Data Package</h2><span id='topic+read_camtrapdp'></span>

<h3>Description</h3>

<p>Reads files from a <a href="https://camtrap-dp.tdwg.org">Camera Trap Data Package (Camtrap DP)</a> into memory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_camtrapdp(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_camtrapdp_+3A_file">file</code></td>
<td>
<p>Path or URL to a <code>datapackage.json</code> file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Camera Trap Data Package object.
</p>


<h3>Assign taxonomic information</h3>

<p>Camtrap DP metadata has a <code>taxonomic</code> property that can contain extra
information for each <code>scientificName</code> found in observations.
Such information can include higher taxonomy (<code>family</code>, <code>order</code>, etc.) and
vernacular names in multiple languages.
</p>
<p>This function <strong>will automatically include this taxonomic information in
observations</strong>, as extra columns starting with <code>taxon.</code>.
</p>


<h3>Assign eventIDs</h3>

<p>Observations can contain two classifications at two levels:
</p>
<p><strong>Media-based</strong> observations (<code>observationLevel = "media"</code>) are based on a
single media file and are directly linked to it via <code>mediaID</code>.
</p>
<p><strong>Event-based</strong> observations (<code>observationLevel = "event"</code>) are based on an
event, defined as a combination of <code>eventID</code>, <code>eventStart</code> and <code>eventEnd</code>.
This event can consist of one or more media files, but is not directly linked
to these.
</p>
<p>This function <strong>will automatically assign <code>eventID</code>s to media</strong>, using
<code>media.deploymentID = event.deploymentID</code> and <code style="white-space: pre;">&#8288;eventStart &lt;= media.timestamp &lt;= eventEnd&#8288;</code>.
Note that this can result in media being linked to multiple events (and thus
being duplicated), for example when events and sub-events were defined.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- "https://raw.githubusercontent.com/tdwg/camtrap-dp/1.0/example/datapackage.json"
x &lt;- read_camtrapdp(file)
x
</code></pre>

<hr>
<h2 id='taxa'>Get taxa</h2><span id='topic+taxa'></span>

<h3>Description</h3>

<p>Gets the (unique) scientific names and associated taxonomic information from
the observations of a Camera Trap Data Package object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taxa(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="taxa_+3A_x">x</code></td>
<td>
<p>Camera Trap Data Package object, as returned by <code>read_camtrapdp()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> data frame with the taxonomic information, containing at
least a <code>scientificName</code> column.
</p>


<h3>See Also</h3>

<p>Other accessor functions: 
<code><a href="#topic+deployments">deployments</a>()</code>,
<code><a href="#topic+events">events</a>()</code>,
<code><a href="#topic+locations">locations</a>()</code>,
<code><a href="#topic+media">media</a>()</code>,
<code><a href="#topic+observations">observations</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- example_dataset()
taxa(x)
</code></pre>

<hr>
<h2 id='version'>Get Camtrap DP version</h2><span id='topic+version'></span>

<h3>Description</h3>

<p>Extracts the version number used by a Camera Trap Data Package object.
This version number indicates what version of the <a href="https://camtrap-dp.tdwg.org">Camtrap DP standard</a> was used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>version(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="version_+3A_x">x</code></td>
<td>
<p>Camera Trap Data Package object, as returned by
<code>read_camtrapdp()</code>.
Also works on a Frictionless Data Package, as returned by
<code>frictionless::read_package()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The version number is derived as follows:
</p>

<ol>
<li><p> The <code>version</code> attribute, if defined.
</p>
</li>
<li><p> A version number contained in <code>x$profile</code>, which is expected to
contain the URL to the used Camtrap DP standard.
</p>
</li>
<li> <p><code>x$profile</code> in its entirety (can be <code>NULL</code>).
</p>
</li></ol>



<h3>Value</h3>

<p>Camtrap DP version number (e.g. <code>1.0</code>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- example_dataset()
version(x)
</code></pre>

<hr>
<h2 id='write_dwc'>Transform a Camera Trap Data Package to a Darwin Core Archive</h2><span id='topic+write_dwc'></span>

<h3>Description</h3>

<p>Transforms a Camera Trap Data Package object to a <a href="https://dwc.tdwg.org/text/">Darwin Core Archive</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_dwc(x, directory)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write_dwc_+3A_x">x</code></td>
<td>
<p>Camera Trap Data Package object, as returned by <code>read_camtrapdp()</code>.</p>
</td></tr>
<tr><td><code id="write_dwc_+3A_directory">directory</code></td>
<td>
<p>Path to local directory to write files to.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>CSV and <code>meta.xml</code> files written to disk.
And invisibly, a list of data frames with the transformed data.
</p>


<h3>Transformation details</h3>

<p>This function <strong>follows recommendations</strong> in Reyserhove et al. (2023)
<a href="https://doi.org/10.35035/doc-0qzp-2x37">doi:10.35035/doc-0qzp-2x37</a> and transform data to:
</p>

<ul>
<li><p> An <a href="https://docs.gbif.org/camera-trap-guide/en/#section-occurrence-core">Occurrence core</a>.
</p>
</li>
<li><p> An <a href="https://docs.gbif.org/camera-trap-guide/en/#section-ac-extension">Audubon/Audiovisual Media Description extension</a>.
</p>
</li>
<li><p> A <code>meta.xml</code> file.
</p>
</li></ul>

<p>Key features of the Darwin Core transformation:
</p>

<ul>
<li><p> The Occurrence core contains one row per observation
(<code>dwc:occurrenceID = observationID</code>).
</p>
</li>
<li><p> Only observations with <code>observationType = "animal"</code> and
<code>observationLevel = "event"</code> are included, thus excluding observations that
are (of) humans, vehicles, blanks, unknowns, unclassified and media-based.
</p>
</li>
<li><p> Deployment information is included in the Occurrence core, such as
location, habitat, <code>dwc:samplingProtocol</code>, deployment duration in
<code>dwc:samplingEffort</code> and <code>dwc:parentEventID = deploymentID</code> as grouping
identifier.
</p>
</li>
<li><p> Event information is included in the Occurrence core, as event duration in
<code>dwc:eventDate</code> and <code>dwc:eventID = eventID</code> as grouping identifier.
</p>
</li>
<li><p> Media files are included in the Audubon/Audiovisual Media Description
extension, with a foreign key to the observation.
A media file that is used for more than one observation is repeated.
</p>
</li>
<li><p> Metadata is used to set the following record-level terms:
</p>

<ul>
<li> <p><code>dwc:datasetID = id</code>.
</p>
</li>
<li> <p><code>dwc:datasetName = title</code>.
</p>
</li>
<li> <p><code>dwc:collectionCode</code>: first source in <code>sources</code>.
</p>
</li>
<li> <p><code>dcterms:license</code>: license (<code>name</code>) in <code>licenses</code> with scope <code>data</code>.
The license (<code>name</code>) with scope <code>media</code> is used as <code>dcterms:rights</code> in
the Audubon Media Description extension.
</p>
</li>
<li> <p><code>dcterms:rightsHolder</code>: first contributor in <code>contributors</code> with role
<code>rightsHolder</code>.
</p>
</li>
<li> <p><code>dwc:dataGeneralizations</code>: set if <code>coordinatePrecision</code> is defined.
</p>
</li></ul>

</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- example_dataset()
write_dwc(x, directory = "my_directory")

# Clean up (don't do this if you want to keep your files)
unlink("my_directory", recursive = TRUE)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
