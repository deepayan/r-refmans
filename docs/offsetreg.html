<!DOCTYPE html><html><head><title>Help for package offsetreg</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {offsetreg}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#offsetreg-package'><p>offsetreg: An Extension of 'Tidymodels' Supporting Offset Terms</p></a></li>
<li><a href='#glm_offset'><p>Fit Generalized Linear Models with an Offset</p></a></li>
<li><a href='#glmnet_offset'><p>Fit Penalized Generalized Linear Models with an Offset</p></a></li>
<li><a href='#poisson_reg_offset'><p>Poisson regression models with offsets</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#us_deaths'><p>United States Deaths 2011-2020</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>An Extension of 'Tidymodels' Supporting Offset Terms</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Matt Heaphy &lt;mattrmattrs@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Extend the 'tidymodels' ecosystem <a href="https://www.tidymodels.org/">https://www.tidymodels.org/</a> to
    enable the creation of predictive models with offset terms. Models with 
    offsets are most useful when working with count data or when fitting an
    adjustment model on top of an existing model with a prior expectation. 
    The former situation is common in insurance where data is often weighted by
    exposures. The latter is common in life insurance where industry mortality 
    tables are often used as a starting point for setting assumptions.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/mattheaphy/offsetreg/">https://github.com/mattheaphy/offsetreg/</a>,
<a href="https://mattheaphy.github.io/offsetreg/">https://mattheaphy.github.io/offsetreg/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/mattheaphy/offsetreg/issues">https://github.com/mattheaphy/offsetreg/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.0</td>
</tr>
<tr>
<td>Imports:</td>
<td>generics, glue, parsnip, poissonreg, rlang, stats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>glmnet, recipes, testthat (&ge; 3.0.0), tune, workflows</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-23 04:35:49 UTC; Matt</td>
</tr>
<tr>
<td>Author:</td>
<td>Matt Heaphy [aut, cre, cph]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-23 13:50:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='offsetreg-package'>offsetreg: An Extension of 'Tidymodels' Supporting Offset Terms</h2><span id='topic+offsetreg'></span><span id='topic+offsetreg-package'></span>

<h3>Description</h3>

<p>This package extends the 'tidymodels' ecosystem <a href="https://www.tidymodels.org/">https://www.tidymodels.org/</a> to enable usage of predictive models with offset terms. Models with offsets are most useful when working with count data or when fitting an adjustment model on top of an existing model with a prior expectation. The former situation is common in insurance where data is often weighted by exposures. The latter is common in life insurance where industry mortality tables are often used as a starting point for setting assumptions.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Matt Heaphy <a href="mailto:mattrmattrs@gmail.com">mattrmattrs@gmail.com</a> [copyright holder]
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/mattheaphy/offsetreg/">https://github.com/mattheaphy/offsetreg/</a>
</p>
</li>
<li> <p><a href="https://mattheaphy.github.io/offsetreg/">https://mattheaphy.github.io/offsetreg/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/mattheaphy/offsetreg/issues">https://github.com/mattheaphy/offsetreg/issues</a>
</p>
</li></ul>


<hr>
<h2 id='glm_offset'>Fit Generalized Linear Models with an Offset</h2><span id='topic+glm_offset'></span>

<h3>Description</h3>

<p>This function is a wrapper around <code><a href="stats.html#topic+glm">stats::glm()</a></code> that uses a column from
<code>data</code> as an offset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>glm_offset(formula, family = "gaussian", data, offset_col = "offset", weights)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="glm_offset_+3A_formula">formula</code></td>
<td>
<p>A model formula</p>
</td></tr>
<tr><td><code id="glm_offset_+3A_family">family</code></td>
<td>
<p>A function or character string describing the link function
and error distribution.</p>
</td></tr>
<tr><td><code id="glm_offset_+3A_data">data</code></td>
<td>
<p>Optional. A data frame containing variables used in the model.</p>
</td></tr>
<tr><td><code id="glm_offset_+3A_offset_col">offset_col</code></td>
<td>
<p>Character string. The name of a column in <code>data</code> containing
offsets.</p>
</td></tr>
<tr><td><code id="glm_offset_+3A_weights">weights</code></td>
<td>
<p>Weights to use in the fitting process.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Outside of the <code>tidymodels</code> ecosystem, <code>glm_offset()</code> has no advantages over
<code><a href="stats.html#topic+glm">stats::glm()</a></code> since that function allows for offsets to be specified
in the formula interface or its <code>offset</code> argument.
</p>
<p>Within <code>tidymodels</code>, <code>glm_offset()</code> provides an advantage because it will
ensure that offsets are included in the data whenever resamples are created.
</p>
<p>The <code>formula</code>, <code>family</code>, <code>data</code>, and <code>weights</code> arguments have the same
meanings as <code><a href="stats.html#topic+glm">stats::glm()</a></code>. See that function's documentation for full
details.
</p>


<h3>Value</h3>

<p>A <code>glm</code> object. See <code><a href="stats.html#topic+glm">stats::glm()</a></code> for full details.
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+glm">stats::glm()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>us_deaths$off &lt;- log(us_deaths$population)
glm_offset(deaths ~ age_group + gender, family = "poisson",
           us_deaths, offset_col = "off")

</code></pre>

<hr>
<h2 id='glmnet_offset'>Fit Penalized Generalized Linear Models with an Offset</h2><span id='topic+glmnet_offset'></span>

<h3>Description</h3>

<p>This function is a wrapper around <code><a href="glmnet.html#topic+glmnet">glmnet::glmnet()</a></code> that uses a column from
<code>x</code> as an offset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>glmnet_offset(
  x,
  y,
  family,
  offset_col = "offset",
  weights = NULL,
  lambda = NULL,
  alpha = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="glmnet_offset_+3A_x">x</code></td>
<td>
<p>Input matrix</p>
</td></tr>
<tr><td><code id="glmnet_offset_+3A_y">y</code></td>
<td>
<p>Response variable</p>
</td></tr>
<tr><td><code id="glmnet_offset_+3A_family">family</code></td>
<td>
<p>A function or character string describing the link function
and error distribution.</p>
</td></tr>
<tr><td><code id="glmnet_offset_+3A_offset_col">offset_col</code></td>
<td>
<p>Character string. The name of a column in <code>data</code> containing
offsets.</p>
</td></tr>
<tr><td><code id="glmnet_offset_+3A_weights">weights</code></td>
<td>
<p>Weights to use in the fitting process.</p>
</td></tr>
<tr><td><code id="glmnet_offset_+3A_lambda">lambda</code></td>
<td>
<p>A numeric vector of regularization penalty values</p>
</td></tr>
<tr><td><code id="glmnet_offset_+3A_alpha">alpha</code></td>
<td>
<p>A number between zero and one denoting the proportion of L1
(lasso) versus L2 (ridge) regularization.
</p>

<ul>
<li> <p><code>alpha = 1</code>: Pure lasso model
</p>
</li>
<li> <p><code>alpha = 0</code>: Pure ridge model
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>Outside of the <code>tidymodels</code> ecosystem, <code>glmnet_offset()</code> has no advantages
over <code><a href="glmnet.html#topic+glmnet">glmnet::glmnet()</a></code> since that function allows for offsets to be
specified in its <code>offset</code> argument.
</p>
<p>Within <code>tidymodels</code>, <code>glmnet_offset()</code> provides an advantage because it will
ensure that offsets are included in the data whenever resamples are created.
</p>
<p>The <code>x</code>, <code>y</code>, <code>family</code>, <code>lambda</code>, <code>alpha</code> and <code>weights</code> arguments have the
same meanings as <code><a href="glmnet.html#topic+glmnet">glmnet::glmnet()</a></code>. See that function's documentation for
full details.
</p>


<h3>Value</h3>

<p>A <code>glmnet</code> object. See <code><a href="glmnet.html#topic+glmnet">glmnet::glmnet()</a></code> for full details.
</p>


<h3>See Also</h3>

<p><code><a href="glmnet.html#topic+glmnet">glmnet::glmnet()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>us_deaths$off &lt;- log(us_deaths$population)
x &lt;- model.matrix(~ age_group + gender + off, us_deaths)[, -1]
glmnet_offset(x, us_deaths$deaths, family = "poisson", offset_col = "off")

</code></pre>

<hr>
<h2 id='poisson_reg_offset'>Poisson regression models with offsets</h2><span id='topic+poisson_reg_offset'></span>

<h3>Description</h3>

<p><code>poisson_reg_offset()</code> defines a generalized linear model of count data with
an offset that follow a Poisson distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>poisson_reg_offset(
  mode = "regression",
  penalty = NULL,
  mixture = NULL,
  engine = "glm_offset"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="poisson_reg_offset_+3A_mode">mode</code></td>
<td>
<p>A single character string for the type of model.
The only possible value for this model is &quot;regression&quot;.</p>
</td></tr>
<tr><td><code id="poisson_reg_offset_+3A_penalty">penalty</code></td>
<td>
<p>A non-negative number representing the total
amount of regularization (<code>glmnet</code> only).</p>
</td></tr>
<tr><td><code id="poisson_reg_offset_+3A_mixture">mixture</code></td>
<td>
<p>A number between zero and one (inclusive) giving the
proportion of L1 regularization (i.e. lasso) in the model.
</p>

<ul>
<li> <p><code>mixture = 1</code> specifies a pure lasso model,
</p>
</li>
<li> <p><code>mixture = 0</code>  specifies a ridge regression model, and
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;0 &lt; mixture &lt; 1&#8288;</code> specifies an elastic net model, interpolating lasso and ridge.
</p>
</li></ul>

<p>Available for <code>glmnet</code> and <code>spark</code> only.</p>
</td></tr>
<tr><td><code id="poisson_reg_offset_+3A_engine">engine</code></td>
<td>
<p>A single character string specifying what computational engine
to use for fitting.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is similar to <code><a href="parsnip.html#topic+poisson_reg">parsnip::poisson_reg()</a></code> except that
specification of an offset column is required.
</p>


<h3>Value</h3>

<p>A model specification object with the classes <code>poisson_reg_offset</code>
and <code>model_spec</code>.
</p>


<h3>See Also</h3>

<p><code><a href="parsnip.html#topic+poisson_reg">parsnip::poisson_reg()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>parsnip::show_model_info("poisson_reg_offset")

poisson_reg_offset()

</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+translate'></span><span id='topic+min_grid'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>generics</dt><dd><p><code><a href="generics.html#topic+min_grid">min_grid</a></code></p>
</dd>
<dt>parsnip</dt><dd><p><code><a href="parsnip.html#topic+translate">translate</a></code></p>
</dd>
</dl>

<hr>
<h2 id='us_deaths'>United States Deaths 2011-2020</h2><span id='topic+us_deaths'></span>

<h3>Description</h3>

<p>United States deaths, population estimates, and crude mortality rates for
ages 25+ from the CDC Multiple Causes of Death Files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>us_deaths
</code></pre>


<h3>Format</h3>

<p>A data frame with 140 rows and 6 columns.
</p>

<dl>
<dt>gender</dt><dd><p>Gender</p>
</dd>
<dt>age_group</dt><dd><p>Attained age groups</p>
</dd>
<dt>year</dt><dd><p>Calendar year</p>
</dd>
<dt>deaths</dt><dd><p>Number of deaths</p>
</dd>
<dt>population</dt><dd><p>Population estimate</p>
</dd>
<dt>qx</dt><dd><p>Crude mortality rate equal to <code>deaths / population</code></p>
</dd>
</dl>



<h3>Source</h3>

<p>Centers for Disease Control and Prevention, National Center for Health
Statistics. National Vital Statistics System, Mortality 1999-2020 on CDC
WONDER Online Database, released in 2021. Data are from the Multiple Cause
of Death Files, 1999-2020, as compiled from data provided by the 57 vital
statistics jurisdictions through the Vital Statistics Cooperative Program.
Accessed at <a href="http://wonder.cdc.gov/mcd-icd10.html">http://wonder.cdc.gov/mcd-icd10.html</a> on Jan 15, 2024.&quot;
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
