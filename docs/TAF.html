<!DOCTYPE html><html lang="en"><head><title>Help for package TAF</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {TAF}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#TAF-package'><p>Transparent Assessment Framework for Reproducible Research</p></a></li>
<li><a href='#catage.long'><p>Catch at Age in Long Format</p></a></li>
<li><a href='#catage.taf'><p>Catch at Age in TAF Format</p></a></li>
<li><a href='#catage.xtab'><p>Catch at Age in Crosstab Format</p></a></li>
<li><a href='#clean'><p>Clean TAF Directories</p></a></li>
<li><a href='#clean.boot'><p>Clean Boot Directory</p></a></li>
<li><a href='#clean.data'><p>Clean Data</p></a></li>
<li><a href='#clean.library'><p>Clean TAF Library</p></a></li>
<li><a href='#clean.software'><p>Clean TAF Software</p></a></li>
<li><a href='#convert.spaces'><p>Convert Spaces</p></a></li>
<li><a href='#cp'><p>Copy Files</p></a></li>
<li><a href='#deps'><p>List Dependencies</p></a></li>
<li><a href='#detach.packages'><p>Detach Packages</p></a></li>
<li><a href='#div'><p>Divide Columns</p></a></li>
<li><a href='#dos2unix'><p>Convert Line Endings</p></a></li>
<li><a href='#download'><p>Download File</p></a></li>
<li><a href='#download.github'><p>Download GitHub Repository</p></a></li>
<li><a href='#draft.data'><p>Draft DATA.bib</p></a></li>
<li><a href='#draft.software'><p>Draft SOFTWARE.bib</p></a></li>
<li><a href='#file.encoding'><p>File Encoding</p></a></li>
<li><a href='#flr2taf'><p>Convert FLR Table to TAF Format</p></a></li>
<li><a href='#get.remote.sha'><p>Get Remote SHA</p></a></li>
<li><a href='#is.r.package'><p>Is R Package</p></a></li>
<li><a href='#latin1.to.utf8'><p>Convert File Encoding</p></a></li>
<li><a href='#lim'><p>Axis Limits</p></a></li>
<li><a href='#line.endings'><p>Line Endings</p></a></li>
<li><a href='#long2taf'><p>Convert Long Table to TAF Format</p></a></li>
<li><a href='#long2xtab'><p>Convert Long Table to Crosstab Format</p></a></li>
<li><a href='#make'><p>Run R Script If Needed</p></a></li>
<li><a href='#make.all'><p>Run All TAF Scripts as Needed</p></a></li>
<li><a href='#make.taf'><p>Run TAF Script If Needed</p></a></li>
<li><a href='#mkdir'><p>Create Directory</p></a></li>
<li><a href='#msg'><p>Show Message</p></a></li>
<li><a href='#os'><p>Operating System</p></a></li>
<li><a href='#period'><p>Period</p></a></li>
<li><a href='#plus'><p>Rename Plus Group Column</p></a></li>
<li><a href='#read.bib'><p>Read Metadata Entries</p></a></li>
<li><a href='#read.taf'><p>Read TAF Table from File</p></a></li>
<li><a href='#rmdir'><p>Remove Empty Directory</p></a></li>
<li><a href='#rnd'><p>Round Columns</p></a></li>
<li><a href='#sam2taf'><p>Convert SAM Table to TAF Format</p></a></li>
<li><a href='#source.all'><p>Run All TAF Scripts</p></a></li>
<li><a href='#source.dir'><p>Source Directory</p></a></li>
<li><a href='#source.taf'><p>Run TAF Script</p></a></li>
<li><a href='#summary.taf'><p>Summary Results in TAF Format</p></a></li>
<li><a href='#TAF-internal'><p>Various TAF Helper Functions</p></a></li>
<li><a href='#taf.boot'><p>Boot TAF Analysis</p></a></li>
<li><a href='#taf.boot.path'><p>Construct Boot Path</p></a></li>
<li><a href='#taf.colors'><p>TAF Colors</p></a></li>
<li><a href='#taf.data.path'><p>Construct Boot Data Path</p></a></li>
<li><a href='#taf.install'><p>TAF Install</p></a></li>
<li><a href='#taf.libPaths'><p>Add TAF Library Path</p></a></li>
<li><a href='#taf.library'><p>TAF Library</p></a></li>
<li><a href='#taf.png'><p>PNG Device</p></a></li>
<li><a href='#taf.session'><p>TAF Session</p></a></li>
<li><a href='#taf.skeleton'><p>TAF Skeleton</p></a></li>
<li><a href='#taf.sources'><p>List Sources</p></a></li>
<li><a href='#taf.unzip'><p>Unzip File</p></a></li>
<li><a href='#taf2html'><p>Convert TAF Table to HTML</p></a></li>
<li><a href='#taf2long'><p>Convert TAF Table to Long Format</p></a></li>
<li><a href='#taf2xtab'><p>Convert TAF Table to Crosstab Format</p></a></li>
<li><a href='#tt'><p>TAF Transpose</p></a></li>
<li><a href='#write.taf'><p>Write TAF Table to File</p></a></li>
<li><a href='#xtab2long'><p>Convert Crosstab Table to Long Format</p></a></li>
<li><a href='#xtab2taf'><p>Convert Crosstab Table to TAF Format</p></a></li>
<li><a href='#zoom'><p>Zoom</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>4.2.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-03-20</td>
</tr>
<tr>
<td>Title:</td>
<td>Transparent Assessment Framework for Reproducible Research</td>
</tr>
<tr>
<td>Imports:</td>
<td>grDevices, lattice, stats, tools, utils</td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions to organize data, methods, and results used in scientific
  analyses. A TAF analysis consists of four scripts (data.R, model.R, output.R,
  report.R) that are run sequentially. Each script starts by reading files from
  a previous step and ends with writing out files for the next step. Convenience
  functions are provided to version control the required data and software, run
  analyses, clean residues from previous runs, manage files, manipulate tables,
  and produce figures. With a focus on stability and reproducible analyses, TAF
  is designed to have no package dependencies. TAF forms a base layer for the
  'icesTAF' package and other scientific applications.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ices-tools-prod/TAF">https://github.com/ices-tools-prod/TAF</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-03-20 03:18:17 UTC; arnim</td>
</tr>
<tr>
<td>Author:</td>
<td>Arni Magnusson [aut, cre],
  Colin Millar [aut],
  Alexandros Kokkalis [ctb],
  Iago Mosqueira [ctb],
  Ibrahim Umar [ctb],
  Hjalte Parner [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Arni Magnusson &lt;thisisarni@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-03-21 09:00:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='TAF-package'>Transparent Assessment Framework for Reproducible Research</h2><span id='topic+TAF-package'></span><span id='topic+TAF'></span>

<h3>Description</h3>

<p>Functions to organize data, methods, and results used in scientific analyses.
A TAF analysis consists of four scripts ('data.R', 'model.R', 'output.R',
'report.R') that are run sequentially. Each script starts by reading files
from a previous step and ends with writing out files for the next step.
</p>
<p>Convenience functions are provided to version control the required data and
software, run analyses, clean residues from previous runs, manage files,
manipulate tables, and produce figures. With a focus on stability and
reproducible analyses, TAF is designed to have no package dependencies.
</p>
<p>TAF forms a base layer for the
[icesTAF](https://cran.r-project.org/package=icesTAF) package and other
scientific applications.
</p>


<h3>Details</h3>

<p><em>Initial TAF steps:</em>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+draft.data">draft.data</a></code>     </td><td style="text-align: left;"> draft DATA.bib file</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+draft.software">draft.software</a></code> </td><td style="text-align: left;"> draft SOFTWARE.bib file</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+period">period</a></code>         </td><td style="text-align: left;"> paste period string for DATA.bib</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+taf.boot">taf.boot</a></code>       </td><td style="text-align: left;"> set up data files and software</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+taf.skeleton">taf.skeleton</a></code>   </td><td style="text-align: left;"> create empty TAF template
</td>
</tr>

</table>

<p><em>Running scripts:</em>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+clean">clean</a></code>      </td><td style="text-align: left;"> clean TAF directories</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+clean.boot">clean.boot</a></code> </td><td style="text-align: left;"> clean boot directory</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+make">make</a></code>       </td><td style="text-align: left;"> run R script if needed</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+make.all">make.all</a></code>   </td><td style="text-align: left;"> run all TAF scripts as needed</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+make.taf">make.taf</a></code>   </td><td style="text-align: left;"> run TAF script if needed</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+msg">msg</a></code>        </td><td style="text-align: left;"> show message</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+source.all">source.all</a></code> </td><td style="text-align: left;"> run all TAF scripts</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+source.taf">source.taf</a></code> </td><td style="text-align: left;"> run TAF script
</td>
</tr>

</table>

<p><em>File management:</em>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+convert.spaces">convert.spaces</a></code> </td><td style="text-align: left;"> convert spaces</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+cp">cp</a></code>             </td><td style="text-align: left;"> copy files</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+mkdir">mkdir</a></code>          </td><td style="text-align: left;"> create directory</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+os.linux">os.linux</a></code>       </td><td style="text-align: left;"> operating system</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+os.macos">os.macos</a></code>       </td><td style="text-align: left;"> operating system</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+os.windows">os.windows</a></code>     </td><td style="text-align: left;"> operating system</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+read.taf">read.taf</a></code>       </td><td style="text-align: left;"> read TAF table from file</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+source.dir">source.dir</a></code>     </td><td style="text-align: left;"> read all <code>*.R</code> files</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+taf.boot.path">taf.boot.path</a></code>  </td><td style="text-align: left;"> construct path to boot folder</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+taf.data.path">taf.data.path</a></code>  </td><td style="text-align: left;"> construct path to boot data files</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+taf.library">taf.library</a></code>    </td><td style="text-align: left;"> load package from TAF library</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+taf.unzip">taf.unzip</a></code>      </td><td style="text-align: left;"> unzip file</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+write.taf">write.taf</a></code>      </td><td style="text-align: left;"> write TAF table to file
</td>
</tr>

</table>

<p><em>Tables:</em>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+div">div</a></code>       </td><td style="text-align: left;"> divide column values</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+flr2taf">flr2taf</a></code>   </td><td style="text-align: left;"> convert FLR to TAF</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+long2taf">long2taf</a></code>  </td><td style="text-align: left;"> convert long format to TAF</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+long2xtab">long2xtab</a></code> </td><td style="text-align: left;"> convert long format to crosstab</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+plus">plus</a></code>      </td><td style="text-align: left;"> rename plus group column</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+rnd">rnd</a></code>       </td><td style="text-align: left;"> round column values</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+sam2taf">sam2taf</a></code>   </td><td style="text-align: left;"> convert SAM to TAF</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+taf2html">taf2html</a></code>  </td><td style="text-align: left;"> convert TAF to HTML</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+taf2long">taf2long</a></code>  </td><td style="text-align: left;"> convert TAF to long format</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+taf2xtab">taf2xtab</a></code>  </td><td style="text-align: left;"> convert TAF to crosstab</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+tt">tt</a></code>        </td><td style="text-align: left;"> transpose TAF table</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+xtab2long">xtab2long</a></code> </td><td style="text-align: left;"> convert crosstab to long format</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+xtab2taf">xtab2taf</a></code>  </td><td style="text-align: left;"> convert crosstab to TAF
</td>
</tr>

</table>

<p><em>Plots:</em>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+lim">lim</a></code>        </td><td style="text-align: left;"> compute axis limits</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+taf.colors">taf.colors</a></code> </td><td style="text-align: left;"> predefined colors</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+taf.png">taf.png</a></code>    </td><td style="text-align: left;"> open PNG graphics device</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+zoom">zoom</a></code>       </td><td style="text-align: left;"> change lattice text size
</td>
</tr>

</table>

<p><em>Example tables:</em>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+catage.long">catage.long</a></code> </td><td style="text-align: left;"> long format</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+catage.taf">catage.taf</a></code>  </td><td style="text-align: left;"> TAF format</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+catage.xtab">catage.xtab</a></code> </td><td style="text-align: left;"> crosstab format</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+summary.taf">summary.taf</a></code> </td><td style="text-align: left;"> summary results
</td>
</tr>

</table>

<p><em>Administrative tools, rarely used in scripts:</em>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+clean.data">clean.data</a></code>      </td><td style="text-align: left;"> clean boot data</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+clean.library">clean.library</a></code>   </td><td style="text-align: left;"> clean TAF library</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+clean.software">clean.software</a></code>  </td><td style="text-align: left;"> clean TAF software</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+deps">deps</a></code>            </td><td style="text-align: left;"> list dependencies</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+detach.packages">detach.packages</a></code> </td><td style="text-align: left;"> detach all packages</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+dos2unix">dos2unix</a></code>        </td><td style="text-align: left;"> convert line endings</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+download">download</a></code>        </td><td style="text-align: left;"> download file</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+download.github">download.github</a></code> </td><td style="text-align: left;"> download repository</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+file.encoding">file.encoding</a></code>   </td><td style="text-align: left;"> examine file encoding</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+get.remote.sha">get.remote.sha</a></code>  </td><td style="text-align: left;"> look up SHA code</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+is.r.package">is.r.package</a></code>    </td><td style="text-align: left;"> check if file is an R package</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+latin1.to.utf8">latin1.to.utf8</a></code>  </td><td style="text-align: left;"> convert file encoding</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+line.endings">line.endings</a></code>    </td><td style="text-align: left;"> examine line endings</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+read.bib">read.bib</a></code>        </td><td style="text-align: left;"> read metadata entries</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+rmdir">rmdir</a></code>           </td><td style="text-align: left;"> remove empty directory</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+taf.install">taf.install</a></code>     </td><td style="text-align: left;"> install package in TAF library</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+taf.libPaths">taf.libPaths</a></code>    </td><td style="text-align: left;"> add TAF library to search path</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+taf.session">taf.session</a></code>     </td><td style="text-align: left;"> show session information</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+taf.sources">taf.sources</a></code>     </td><td style="text-align: left;"> list metadata entries</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+unix2dos">unix2dos</a></code>        </td><td style="text-align: left;"> convert line endings</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+utf8.to.latin1">utf8.to.latin1</a></code>  </td><td style="text-align: left;"> convert file encoding
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Arni Magnusson and Colin Millar.
</p>


<h3>References</h3>

<p>Development site: <a href="https://github.com/ices-tools-prod/TAF">https://github.com/ices-tools-prod/TAF</a>.
</p>
<p>ICES Transparent Assessment Framework: <a href="https://taf.ices.dk">https://taf.ices.dk</a>.
</p>
<p>To explore example TAF stock assessments, see the introductory
<a href="https://www.youtube.com/watch?v=FweJbr9hfdY">video</a> and
<a href="https://github.com/ices-taf/doc/blob/master/tutorial-1/README.md">tutorial</a>.
</p>
<p>The <a href="https://github.com/ices-taf/doc/wiki">TAF Wiki</a> provides additional
help resources.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
taf.boot()
source.all()

## End(Not run)
</code></pre>

<hr>
<h2 id='catage.long'>Catch at Age in Long Format</h2><span id='topic+catage.long'></span>

<h3>Description</h3>

<p>Small catch-at-age table to describe a long format data frame to store
year-age values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catage.long
</code></pre>


<h3>Format</h3>

<p>Data frame containing three columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>Year</code>  </td><td style="text-align: left;"> year</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>Age</code>   </td><td style="text-align: left;"> age</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>Catch</code> </td><td style="text-align: left;"> catch (millions of individuals)
</td>
</tr>

</table>



<h3>Details</h3>

<p>The data are an excerpt (first years and ages) from the catch-at-age table
for North Sea cod from the ICES (2016) assessment.
</p>


<h3>Source</h3>

<p>ICES (2016).
Report of the working group on the assessment of demersal stocks in the North
Sea and Skagerrak (WGNSSK).
<em>ICES CM 2016/ACOM:14</em>, p. 673.
<a href="https://doi.org/10.17895/ices.pub.5329">doi:10.17895/ices.pub.5329</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+catage.taf">catage.taf</a></code> and <code><a href="#topic+catage.xtab">catage.xtab</a></code> describe alternative
table formats.
</p>
<p><code><a href="#topic+long2taf">long2taf</a></code> converts a long table to TAF format.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>catage.long
long2taf(catage.long)
</code></pre>

<hr>
<h2 id='catage.taf'>Catch at Age in TAF Format</h2><span id='topic+catage.taf'></span>

<h3>Description</h3>

<p>Small catch-at-age table to describe a TAF format data frame to store
year-age values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catage.taf
</code></pre>


<h3>Format</h3>

<p>Data frame containing five columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>Year</code> </td><td style="text-align: left;"> year</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>1</code>    </td><td style="text-align: left;"> number of one-year-olds in the catch (millions)</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>2</code>    </td><td style="text-align: left;"> number of two-year-olds in the catch (millions)</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>3</code>    </td><td style="text-align: left;"> number of three-year-olds in the catch (millions)</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>4</code>    </td><td style="text-align: left;"> number of four-year-olds in the catch (millions)
</td>
</tr>

</table>



<h3>Details</h3>

<p>The data are an excerpt (first years and ages) from the catch-at-age table
for North Sea cod from the ICES (2016) assessment.
</p>


<h3>Source</h3>

<p>ICES (2016).
Report of the working group on the assessment of demersal stocks in the North
Sea and Skagerrak (WGNSSK).
<em>ICES CM 2016/ACOM:14</em>, p. 673.
<a href="https://doi.org/10.17895/ices.pub.5329">doi:10.17895/ices.pub.5329</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+catage.long">catage.long</a></code> and <code><a href="#topic+catage.xtab">catage.xtab</a></code> describe alternative
table formats.
</p>
<p><code><a href="#topic+taf2long">taf2long</a></code> and <code><a href="#topic+taf2xtab">taf2xtab</a></code> convert a TAF table to
alternative formats.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>catage.taf
taf2long(catage.taf)
taf2xtab(catage.taf)
</code></pre>

<hr>
<h2 id='catage.xtab'>Catch at Age in Crosstab Format</h2><span id='topic+catage.xtab'></span>

<h3>Description</h3>

<p>Small catch-at-age table to describe a crosstab format data frame to store
year-age values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catage.xtab
</code></pre>


<h3>Format</h3>

<p>Data frame with years as row names and containing four columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>1</code> </td><td style="text-align: left;"> number of one-year-olds in the catch (millions)</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>2</code> </td><td style="text-align: left;"> number of two-year-olds in the catch (millions)</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>3</code> </td><td style="text-align: left;"> number of three-year-olds in the catch (millions)</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>4</code> </td><td style="text-align: left;"> number of four-year-olds in the catch (millions)
</td>
</tr>

</table>



<h3>Details</h3>

<p>The data are an excerpt (first years and ages) from the catch-at-age table
for North Sea cod from the ICES (2016) assessment.
</p>


<h3>Source</h3>

<p>ICES (2016).
Report of the working group on the assessment of demersal stocks in the North
Sea and Skagerrak (WGNSSK).
<em>ICES CM 2016/ACOM:14</em>, p. 673.
<a href="https://doi.org/10.17895/ices.pub.5329">doi:10.17895/ices.pub.5329</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+catage.long">catage.long</a></code> and <code><a href="#topic+catage.taf">catage.taf</a></code> describe alternative
table formats.
</p>
<p><code><a href="#topic+xtab2taf">xtab2taf</a></code> converts a crosstab table to TAF format.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>catage.xtab
xtab2taf(catage.xtab)
</code></pre>

<hr>
<h2 id='clean'>Clean TAF Directories</h2><span id='topic+clean'></span>

<h3>Description</h3>

<p>Remove TAF directories (<code style="white-space: pre;">&#8288;data&#8288;</code>, <code style="white-space: pre;">&#8288;model&#8288;</code>, <code style="white-space: pre;">&#8288;output&#8288;</code>,
<code style="white-space: pre;">&#8288;report&#8288;</code>) and/or clean the <code style="white-space: pre;">&#8288;boot&#8288;</code> directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean(dirs = c("data", model.dir(), "output", "report"), force = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean_+3A_dirs">dirs</code></td>
<td>
<p>directories to delete.</p>
</td></tr>
<tr><td><code id="clean_+3A_force">force</code></td>
<td>
<p>passed to <code>clean.boot</code> if any of the <code>dirs</code> is
<code>"boot"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code style="white-space: pre;">&#8288;model&#8288;</code> directory may also be named <code style="white-space: pre;">&#8288;method&#8288;</code> and is cleaned in
the same way.
</p>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>Note</h3>

<p>The purpose of removing the directories is to make sure that subsequent TAF
scripts start by creating new empty directories.
</p>
<p>If any of the <code>dirs</code> is <code>"boot"</code>, it is treated specially and
<code>clean.boot</code> is called to clean the <code style="white-space: pre;">&#8288;boot/data&#8288;</code>,
<code style="white-space: pre;">&#8288;boot/library&#8288;</code>, and <code style="white-space: pre;">&#8288;boot/software&#8288;</code> subdirectories.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+clean.boot">clean.boot</a></code> cleans the boot directory.
</p>
<p><code><a href="#topic+mkdir">mkdir</a></code> and <code><a href="#topic+rmdir">rmdir</a></code> create and remove empty
directories.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
clean()
clean.boot()

## End(Not run)

</code></pre>

<hr>
<h2 id='clean.boot'>Clean Boot Directory</h2><span id='topic+clean.boot'></span>

<h3>Description</h3>

<p>Clean the boot directory using <code>clean.data</code>, <code>clean.library</code>, and
<code>clean.software</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean.boot(force = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean.boot_+3A_force">force</code></td>
<td>
<p>passed to <code>clean.data</code>, <code>clean.library</code>, and
<code>clean.software</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>Note</h3>

<p>Instead of completely removing the <code style="white-space: pre;">&#8288;boot&#8288;</code> directory, <code>clean.data</code>,
<code>clean.library</code>, and <code>clean.software</code> are used to clean the
<code style="white-space: pre;">&#8288;boot/data&#8288;</code>, <code style="white-space: pre;">&#8288;boot/library&#8288;</code>, and <code style="white-space: pre;">&#8288;boot/library&#8288;</code>
subdirectories. This protects the subdirectory <code style="white-space: pre;">&#8288;boot/initial&#8288;</code>, boot
scripts, and <code style="white-space: pre;">&#8288;*.bib&#8288;</code> metadata files from being accidentally deleted.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+clean.data">clean.data</a></code> selectively removes data from <code style="white-space: pre;">&#8288;boot/data&#8288;</code>.
</p>
<p><code><a href="#topic+clean.library">clean.library</a></code> selectively removes packages from
<code style="white-space: pre;">&#8288;boot/library&#8288;</code>.
</p>
<p><code><a href="#topic+clean.software">clean.software</a></code> selectively removes software from
<code style="white-space: pre;">&#8288;boot/software&#8288;</code>.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
clean()
clean.boot()

## End(Not run)

</code></pre>

<hr>
<h2 id='clean.data'>Clean Data</h2><span id='topic+clean.data'></span>

<h3>Description</h3>

<p>Selectively remove data from the <code style="white-space: pre;">&#8288;boot/data&#8288;</code> folder if not listed in
<code style="white-space: pre;">&#8288;DATA.bib&#8288;</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean.data(folder = "boot/data", quiet = FALSE, force = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean.data_+3A_folder">folder</code></td>
<td>
<p>location of <code style="white-space: pre;">&#8288;boot/data&#8288;</code>.</p>
</td></tr>
<tr><td><code id="clean.data_+3A_quiet">quiet</code></td>
<td>
<p>whether to suppress messages about removed data.</p>
</td></tr>
<tr><td><code id="clean.data_+3A_force">force</code></td>
<td>
<p>whether to remove <code style="white-space: pre;">&#8288;folder&#8288;</code>, regardless of how it compares
to <code style="white-space: pre;">&#8288;DATA.bib&#8288;</code> entries.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>Note</h3>

<p>For each data file or subfolder, the cleaning procedure selects between two
cases:
</p>

<ol>
<li><p> Data entry found in <code style="white-space: pre;">&#8288;DATA.bib&#8288;</code> - do nothing.
</p>
</li>
<li><p> Data entry is not listed in <code style="white-space: pre;">&#8288;DATA.bib&#8288;</code> - remove.
</p>
</li></ol>

<p>The <code>taf.boot</code> procedure cleans the <code style="white-space: pre;">&#8288;boot/data&#8288;</code> folder, without
requiring the user to run <code>clean.data</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+taf.boot">taf.boot</a></code> calls <code>clean.data</code> as part of the default boot
procedure.
</p>
<p><code><a href="#topic+clean.software">clean.software</a></code> cleans the local TAF software folder.
</p>
<p><code><a href="#topic+clean.library">clean.library</a></code> cleans the local TAF library.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
clean.data()

## End(Not run)

</code></pre>

<hr>
<h2 id='clean.library'>Clean TAF Library</h2><span id='topic+clean.library'></span>

<h3>Description</h3>

<p>Selectively remove packages from the local TAF library if not listed in
<code style="white-space: pre;">&#8288;SOFTWARE.bib&#8288;</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean.library(folder = "boot/library", quiet = FALSE, force = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean.library_+3A_folder">folder</code></td>
<td>
<p>location of local TAF library.</p>
</td></tr>
<tr><td><code id="clean.library_+3A_quiet">quiet</code></td>
<td>
<p>whether to suppress messages about removed packages.</p>
</td></tr>
<tr><td><code id="clean.library_+3A_force">force</code></td>
<td>
<p>whether to remove the local TAF library, regardless of how it
compares to <code style="white-space: pre;">&#8288;SOFTWARE.bib&#8288;</code> entries.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>Note</h3>

<p>For each package, the cleaning procedure selects between three cases:
</p>

<ol>
<li><p> Installed package matches <code style="white-space: pre;">&#8288;SOFTWARE.bib&#8288;</code> - do nothing.
</p>
</li>
<li><p> Installed package is not the version listed in <code style="white-space: pre;">&#8288;SOFTWARE.bib&#8288;</code> -
remove.
</p>
</li>
<li><p> Installed package is not listed in <code style="white-space: pre;">&#8288;SOFTWARE.bib&#8288;</code> - remove.
</p>
</li></ol>

<p>The <code>taf.boot</code> procedure cleans the TAF library, without requiring the
user to run <code>clean.library</code>. The main reason for a TAF user to run
<code>clean.library</code> directly is to experiment with installing and removing
different versions of software without modifying the <code style="white-space: pre;">&#8288;SOFTWARE.bib&#8288;</code>
file.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+taf.boot">taf.boot</a></code> calls <code>clean.library</code> as part of the default boot
procedure.
</p>
<p><code><a href="#topic+taf.install">taf.install</a></code> installs a package in the local TAF library.
</p>
<p><code><a href="#topic+clean.software">clean.software</a></code> cleans the local TAF software folder.
</p>
<p><code><a href="#topic+clean.data">clean.data</a></code> cleans the <code style="white-space: pre;">&#8288;boot/data&#8288;</code> folder.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
clean.library()

## End(Not run)

</code></pre>

<hr>
<h2 id='clean.software'>Clean TAF Software</h2><span id='topic+clean.software'></span>

<h3>Description</h3>

<p>Selectively remove software from the local TAF software folder if not listed
in <code style="white-space: pre;">&#8288;SOFTWARE.bib&#8288;</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean.software(folder = "boot/software", quiet = FALSE, force = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean.software_+3A_folder">folder</code></td>
<td>
<p>location of local TAF software folder.</p>
</td></tr>
<tr><td><code id="clean.software_+3A_quiet">quiet</code></td>
<td>
<p>whether to suppress messages about removed software.</p>
</td></tr>
<tr><td><code id="clean.software_+3A_force">force</code></td>
<td>
<p>whether to remove the local TAF software folder, regardless of
how it compares to <code style="white-space: pre;">&#8288;SOFTWARE.bib&#8288;</code> entries.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>Note</h3>

<p>For each file (and subdirectory) in the software folder, the cleaning
procedure selects between three cases:
</p>

<ol>
<li><p> File and version matches <code style="white-space: pre;">&#8288;SOFTWARE.bib&#8288;</code> - do nothing.
</p>
</li>
<li><p> Filename does not contain the version listed in <code style="white-space: pre;">&#8288;SOFTWARE.bib&#8288;</code> -
remove.
</p>
</li>
<li><p> File is not listed in <code style="white-space: pre;">&#8288;SOFTWARE.bib&#8288;</code> - remove.
</p>
</li></ol>

<p>The <code>taf.boot</code> procedure cleans the TAF software folder, without
requiring the user to run <code>clean.software</code>. The main reason for a TAF
user to run <code>clean.software</code> directly is to experiment with installing
and removing different versions of software without modifying the
<code style="white-space: pre;">&#8288;SOFTWARE.bib&#8288;</code> file.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+taf.boot">taf.boot</a></code> calls <code>clean.software</code> as part of the default
boot procedure.
</p>
<p><code><a href="#topic+download.github">download.github</a></code> downloads a GitHub repository.
</p>
<p><code><a href="#topic+clean.library">clean.library</a></code> cleans the local TAF library.
</p>
<p><code><a href="#topic+clean.data">clean.data</a></code> cleans the <code style="white-space: pre;">&#8288;boot/data&#8288;</code> folder.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
clean.software()

## End(Not run)

</code></pre>

<hr>
<h2 id='convert.spaces'>Convert Spaces</h2><span id='topic+convert.spaces'></span>

<h3>Description</h3>

<p>Convert spaces in filenames.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert.spaces(file, sep = "_")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="convert.spaces_+3A_file">file</code></td>
<td>
<p>filename, e.g. <code>"file name.csv"</code>, <code>"*.csv"</code>, or
<code>"dir/*"</code>.</p>
</td></tr>
<tr><td><code id="convert.spaces_+3A_sep">sep</code></td>
<td>
<p>character to use instead of spaces.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> for success, <code>FALSE</code> for failure, invisibly.
</p>


<h3>Note</h3>

<p>This function treats &lsquo;<span class="file">%20</span>&rsquo; in filenames as a space and converts to
<code>sep</code>.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+file.rename">file.rename</a></code> is the base function to rename files.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
write(pi, "A B.txt")
convert.spaces("A B.txt")

## Many files
convert.spaces("boot/initial/data/*")

## End(Not run)

</code></pre>

<hr>
<h2 id='cp'>Copy Files</h2><span id='topic+cp'></span>

<h3>Description</h3>

<p>Copy or move files, overwriting existing files if necessary, and returning
the result invisibly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cp(from, to, move = FALSE, ignore = FALSE, overwrite = TRUE,
  quiet = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cp_+3A_from">from</code></td>
<td>
<p>source filenames, e.g. <code>*.csv</code>.</p>
</td></tr>
<tr><td><code id="cp_+3A_to">to</code></td>
<td>
<p>destination filenames, or directory.</p>
</td></tr>
<tr><td><code id="cp_+3A_move">move</code></td>
<td>
<p>whether to move instead of copy.</p>
</td></tr>
<tr><td><code id="cp_+3A_ignore">ignore</code></td>
<td>
<p>whether to suppress error if source file does not exist.</p>
</td></tr>
<tr><td><code id="cp_+3A_overwrite">overwrite</code></td>
<td>
<p>whether to overwrite if destination file exists.</p>
</td></tr>
<tr><td><code id="cp_+3A_quiet">quiet</code></td>
<td>
<p>whether to suppress messages.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> for success, <code>FALSE</code> for failure, invisibly.
</p>


<h3>Note</h3>

<p>To prevent accidental loss of files, two safeguards are enforced when
<code>move = TRUE</code>:
</p>

<ol>
<li><p> When moving files, the <code>to</code> argument must either have a filename
extension or be an existing directory.
</p>
</li>
<li><p> When moving many files to one destination, the <code>to</code> argument must
be an existing directory.
</p>
</li></ol>

<p>If these conditions do not hold, no files are changed and an error is
returned.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+file.copy">file.copy</a></code> and <code><a href="base.html#topic+unlink">unlink</a></code> are the underlying functions
used to copy and (if <code>move = TRUE</code>) delete files.
</p>
<p><code><a href="base.html#topic+file.rename">file.rename</a></code> is the base function to rename files.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
write(pi, "A.txt")
cp("A.txt", "B.txt")
cp("A.txt", "B.txt", move=TRUE)

## Copy directory tree
cp(system.file(package="datasets"), ".")
mkdir("everything")
cp("datasets/*", "everything")

## End(Not run)

</code></pre>

<hr>
<h2 id='deps'>List Dependencies</h2><span id='topic+deps'></span>

<h3>Description</h3>

<p>Search R scripts for packages that are required.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deps(path = ".", base = FALSE, installed = TRUE, available = TRUE,
  list = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="deps_+3A_path">path</code></td>
<td>
<p>a directory or file containing R scripts.</p>
</td></tr>
<tr><td><code id="deps_+3A_base">base</code></td>
<td>
<p>whether to include base packages in the output.</p>
</td></tr>
<tr><td><code id="deps_+3A_installed">installed</code></td>
<td>
<p>whether to include installed packages in the output.</p>
</td></tr>
<tr><td><code id="deps_+3A_available">available</code></td>
<td>
<p>whether to include available packages in the output.</p>
</td></tr>
<tr><td><code id="deps_+3A_list">list</code></td>
<td>
<p>whether to return packages in list format, split by script.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The files analyzed are those with the file extensions <code>.R</code>, <code>.r</code>,
<code>.Rmd</code>, and <code>.rmd</code>.
</p>


<h3>Value</h3>

<p>Names of packages as a vector, or in list format if <code>list=TRUE</code>. If no
dependencies are found, the return value is <code>NULL</code>.
</p>


<h3>Note</h3>

<p>Package names are matched based on four patterns:</p>
<pre>
library(*)
require(*)
*::object
*:::object</pre>
<p>The search algorithm may return false-positive dependencies if these patterns
occur inside if-clauses, strings, comments, etc.
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+installed.packages">installed.packages</a></code>, <code><a href="utils.html#topic+available.packages">available.packages</a></code>.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dir &lt;- system.file(package="MASS", "scripts")
script &lt;- system.file(package="MASS", "scripts/ch08.R")

deps(script)                   # dependencies
deps(script, base=TRUE)        # including base packages
deps(script, installed=FALSE)  # not (yet) installed

deps(dir)
deps(dir, list=TRUE)

deps(dir, available=FALSE)  # dependencies that might be unavailable

## End(Not run)

</code></pre>

<hr>
<h2 id='detach.packages'>Detach Packages</h2><span id='topic+detach.packages'></span>

<h3>Description</h3>

<p>Detach all non-base packages that have been attached using <code>library</code> or
<code>taf.library</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>detach.packages(quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="detach.packages_+3A_quiet">quiet</code></td>
<td>
<p>whether to suppress messages.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Names of detached packages.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+detach">detach</a></code> is the underlying base function to detach a package.
</p>
<p><code><a href="#topic+taf.library">taf.library</a></code> loads a package from <code style="white-space: pre;">&#8288;boot/library&#8288;</code>.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
detach.packages()

## End(Not run)

</code></pre>

<hr>
<h2 id='div'>Divide Columns</h2><span id='topic+div'></span>

<h3>Description</h3>

<p>Divide column values in a data frame with a common number.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>div(x, cols, by = 1000, grep = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="div_+3A_x">x</code></td>
<td>
<p>a data frame.</p>
</td></tr>
<tr><td><code id="div_+3A_cols">cols</code></td>
<td>
<p>column names, or column indices.</p>
</td></tr>
<tr><td><code id="div_+3A_by">by</code></td>
<td>
<p>a number to divide with.</p>
</td></tr>
<tr><td><code id="div_+3A_grep">grep</code></td>
<td>
<p>whether <code>cols</code> is a regular expression.</p>
</td></tr>
<tr><td><code id="div_+3A_...">...</code></td>
<td>
<p>passed to <code>grep()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame similar to <code>x</code>, after dividing columns <code>cols</code> by the
number <code>by</code>.
</p>


<h3>Note</h3>

<p>Provides notation that is convenient for modifying many columns at once.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+transform">transform</a></code> can also be used to recalculate column values, using
a more general and verbose syntax.
</p>
<p><code><a href="base.html#topic+grep">grep</a></code> is the underlying function used to match column names if
<code>grep</code> is <code>TRUE</code>.
</p>
<p><code><a href="#topic+rnd">rnd</a></code> is a similar function that rounds columns.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># These are equivalent:

x1 &lt;- div(summary.taf, c("Rec","Rec_lo","Rec_hi",
                         "TSB","TSB_lo","TSB_hi",
                         "SSB","SSB_lo","SSB_hi",
                         "Removals","Removals_lo","Removals_hi"))

x2 &lt;- div(summary.taf, "Rec|TSB|SSB|Removals", grep=TRUE)

x3 &lt;- div(summary.taf, "Year|Fbar", grep=TRUE, invert=TRUE)

# Less reliable in scripts if columns have been added/deleted/reordered:

x4 &lt;- div(summary.taf, 2:13)

</code></pre>

<hr>
<h2 id='dos2unix'>Convert Line Endings</h2><span id='topic+dos2unix'></span><span id='topic+unix2dos'></span>

<h3>Description</h3>

<p>Convert line endings in a text file between Dos (CRLF) and Unix (LF) format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dos2unix(file)

unix2dos(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dos2unix_+3A_file">file</code></td>
<td>
<p>a filename.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+line.endings">line.endings</a></code> examines line endings.
</p>
<p><code><a href="#topic+write.taf">write.taf</a></code> uses <code>unix2dos</code> to ensure that the resulting
files have Dos line endings.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
file &lt;- "test.txt"
write("123", file)

dos2unix(file)
file.size(file)

unix2dos(file)
file.size(file)

file.remove(file)

## End(Not run)

</code></pre>

<hr>
<h2 id='download'>Download File</h2><span id='topic+download'></span>

<h3>Description</h3>

<p>Download a file in binary mode, e.g. a model executable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download(url, dir = ".", mode = "wb", chmod = file_ext(url) == "",
  destfile = file.path(dir, basename(url)), quiet = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_+3A_url">url</code></td>
<td>
<p>URL of file to download.</p>
</td></tr>
<tr><td><code id="download_+3A_dir">dir</code></td>
<td>
<p>directory to download to.</p>
</td></tr>
<tr><td><code id="download_+3A_mode">mode</code></td>
<td>
<p>download mode, see details.</p>
</td></tr>
<tr><td><code id="download_+3A_chmod">chmod</code></td>
<td>
<p>whether to set execute permission (default is <code>TRUE</code> if
file has no filename extension).</p>
</td></tr>
<tr><td><code id="download_+3A_destfile">destfile</code></td>
<td>
<p>destination path and filename (optional, overrides
<code>dir</code>).</p>
</td></tr>
<tr><td><code id="download_+3A_quiet">quiet</code></td>
<td>
<p>whether to suppress messages.</p>
</td></tr>
<tr><td><code id="download_+3A_...">...</code></td>
<td>
<p>passed to <code>download.file</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>With the default mode <code>"wb"</code> the file is downloaded in binary mode (see
<code><a href="utils.html#topic+download.file">download.file</a></code>), to prevent R from adding <code style="white-space: pre;">&#8288;^M&#8288;</code> at line
ends. This is particularly relevant for Windows model executables, while the
<code>chmod</code> switch is useful when downloading Linux executables.
</p>
<p>This function can be convenient for downloading any file, including text
files. Data files in CSV or other text format can also be read directly into
memory using <code>read.table</code>, <code>read.taf</code> or similar functions, without
writing to the file system.
</p>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>Note</h3>

<p>If <code>destfile</code> contains a question mark it is removed from the
<code>destfile</code> filename. Similarly, if <code>destfile</code> contains spaces or
&lsquo;<span class="file">%20</span>&rsquo; sequences, those are converted to underscores.
</p>
<p>In general, TAF scripts do not access the internet using
<code>download</code> or similar functions. Instead, data and software are declared
in DATA.bib and SOFTWARE.bib and then downloaded using
<code><a href="#topic+taf.boot">taf.boot</a></code>. The exception is when a boot script is used to fetch
files from a web service (see
<a href="https://github.com/ices-taf/doc/wiki/Bib-entries">TAF Wiki</a>).
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+download.file">download.file</a></code> is the underlying base function to download
files.
</p>
<p><code><a href="#topic+download.github">download.github</a></code> downloads a GitHub repository.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
url &lt;- paste0("https://github.com/ices-taf/2015_had-iceg/raw/master/",
              "bootstrap/initial/software/catageysa/catageysa.exe")
download(url)

## End(Not run)

</code></pre>

<hr>
<h2 id='download.github'>Download GitHub Repository</h2><span id='topic+download.github'></span>

<h3>Description</h3>

<p>Download a repository from GitHub in &lsquo;<span class="file">tar.gz</span>&rsquo; format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download.github(repo, dir = ".", quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download.github_+3A_repo">repo</code></td>
<td>
<p>GitHub reference of the form <code style="white-space: pre;">&#8288;owner/repo[/subdir]@ref&#8288;</code>.</p>
</td></tr>
<tr><td><code id="download.github_+3A_dir">dir</code></td>
<td>
<p>directory to download to.</p>
</td></tr>
<tr><td><code id="download.github_+3A_quiet">quiet</code></td>
<td>
<p>whether to suppress messages.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Name of downloaded <code style="white-space: pre;">&#8288;tar.gz&#8288;</code> file.
</p>


<h3>Note</h3>

<p>In general, TAF scripts do not access the internet using
<code>download.github</code> or similar functions. Instead, data and software are
declared in <code style="white-space: pre;">&#8288;DATA.bib&#8288;</code> and <code style="white-space: pre;">&#8288;SOFTWARE.bib&#8288;</code> and then downloaded using
<code><a href="#topic+taf.boot">taf.boot</a></code>. The exception is when a boot script is used to fetch
files from a web service (see
<a href="https://github.com/ices-taf/doc/wiki/Bib-entries">TAF Wiki</a>).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+taf.boot">taf.boot</a></code> uses <code>download.github</code> to fetch software and data
repositories.
</p>
<p><code><a href="#topic+download">download</a></code> downloads a file.
</p>
<p><code><a href="utils.html#topic+untar">untar</a></code> extracts a <code style="white-space: pre;">&#8288;tar.gz&#8288;</code> archive.
</p>
<p><code><a href="#topic+taf.install">taf.install</a></code> installs a package in <code style="white-space: pre;">&#8288;tar.gz&#8288;</code> format.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Specify release tag
download.github("ices-tools-prod/icesAdvice@1.3-0")

# Specify SHA reference code
download.github("ices-tools-prod/icesAdvice@4271797")

## End(Not run)

</code></pre>

<hr>
<h2 id='draft.data'>Draft DATA.bib</h2><span id='topic+draft.data'></span>

<h3>Description</h3>

<p>Create an initial draft version of a &lsquo;<span class="file">DATA.bib</span>&rsquo; metadata file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>draft.data(originator = NULL, year = format(Sys.time(), "%Y"),
  title = NULL, period = NULL, access = "Public", source = NULL,
  file = "", append = FALSE,
  data.files = dir(taf.boot.path("initial/data")),
  data.scripts = dir(boot.dir(), pattern = "\\.R$"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="draft.data_+3A_originator">originator</code></td>
<td>
<p>who prepared the data, e.g. a working group acronym.</p>
</td></tr>
<tr><td><code id="draft.data_+3A_year">year</code></td>
<td>
<p>year of the analysis when the data were used. The default is the
current year.</p>
</td></tr>
<tr><td><code id="draft.data_+3A_title">title</code></td>
<td>
<p>description of the data, including survey names or the like.</p>
</td></tr>
<tr><td><code id="draft.data_+3A_period">period</code></td>
<td>
<p>a string of the form <code>"1990-2000"</code>, indicating the first
and last year that the data cover, separated by a simple dash.
Alternatively, a single number if the data cover only one year. If the
data do not cover specific years, this metadata field can be
suppressed using <code>period = FALSE</code>.</p>
</td></tr>
<tr><td><code id="draft.data_+3A_access">access</code></td>
<td>
<p>data access code: <code>"OSPAR"</code>, <code>"Public"</code>, or
<code>"Restricted"</code>.</p>
</td></tr>
<tr><td><code id="draft.data_+3A_source">source</code></td>
<td>
<p>where the data are copied/downloaded from. This can be a URL,
filename, or a special value: <code>"file"</code>, <code>"folder"</code>, or
<code>"script"</code>.</p>
</td></tr>
<tr><td><code id="draft.data_+3A_file">file</code></td>
<td>
<p>optional filename to save the draft metadata to a file. The value
<code>TRUE</code> can be used as shorthand for <code>"boot/DATA.bib"</code>.</p>
</td></tr>
<tr><td><code id="draft.data_+3A_append">append</code></td>
<td>
<p>whether to append metadata entries to an existing file.</p>
</td></tr>
<tr><td><code id="draft.data_+3A_data.files">data.files</code></td>
<td>
<p>data files to consider. The default is all folders and
files inside <code style="white-space: pre;">&#8288;boot/initial/data&#8288;</code>.</p>
</td></tr>
<tr><td><code id="draft.data_+3A_data.scripts">data.scripts</code></td>
<td>
<p>boot data scripts to consider. The default is all
<code style="white-space: pre;">&#8288;*.R&#8288;</code> files in the <code style="white-space: pre;">&#8288;boot&#8288;</code> folder.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Typical usage is to specify <code>originator</code>, while using the default values
for the other arguments. Most data files have the same originator, which can
be specified to facilitate completing the entries after creating the initial
draft.
</p>
<p>The data access codes come from <a href="https://vocab.ices.dk/?ref=1435">https://vocab.ices.dk/?ref=1435</a>.
</p>
<p>The special values <code style="white-space: pre;">&#8288;source = "file"&#8288;</code>, <code style="white-space: pre;">&#8288;source = "folder"&#8288;</code>, and
<code style="white-space: pre;">&#8288;source = "script"&#8288;</code> are described on the
<a href="https://github.com/ices-taf/doc/wiki/Bib-entries">TAF Wiki</a>, along with
other metadata information.
</p>
<p>The default value <code>file = ""</code> prints the initial draft in the console,
instead of writing it to a file. The output can then be pasted into a file to
edit further, without accidentally overwriting an existing metadata file.
</p>


<h3>Value</h3>

<p>Object of class <code style="white-space: pre;">&#8288;Bibtex&#8288;</code>.
</p>


<h3>Note</h3>

<p>This function is intended to be called from the top directory of a TAF
analysis. It looks for data files inside <code style="white-space: pre;">&#8288;boot/initial/data&#8288;</code> folder and
data scripts inside <code style="white-space: pre;">&#8288;boot&#8288;</code>.
</p>
<p>After creating the initial draft, the user can complete the description of
each data entry inside the <code style="white-space: pre;">&#8288;title&#8288;</code> field and look into each file to
specify the <code style="white-space: pre;">&#8288;period&#8288;</code> that the data cover.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+period">period</a></code> pastes two years to form a <code>period</code> string.
</p>
<p><code><a href="#topic+draft.software">draft.software</a></code> creates an initial draft version of a
<code style="white-space: pre;">&#8288;SOFTWARE.bib&#8288;</code> metadata file.
</p>
<p><code><a href="#topic+taf.boot">taf.boot</a></code> reads and processes metadata entries.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Print in console
draft.data("WGEF", 2015)

# Export to file
draft.data("WGEF", 2015, file=TRUE)

# Empty entry, to complete by hand
draft.data(data.files="")

## End(Not run)

</code></pre>

<hr>
<h2 id='draft.software'>Draft SOFTWARE.bib</h2><span id='topic+draft.software'></span>

<h3>Description</h3>

<p>Create an initial draft version of a &lsquo;<span class="file">SOFTWARE.bib</span>&rsquo; metadata file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>draft.software(package, author = NULL, year = NULL, title = NULL,
  version = NULL, source = NULL, file = "", append = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="draft.software_+3A_package">package</code></td>
<td>
<p>name of one or more R packages, or files/folders starting with
the path <code style="white-space: pre;">&#8288;boot/initial/software&#8288;</code>.</p>
</td></tr>
<tr><td><code id="draft.software_+3A_author">author</code></td>
<td>
<p>author(s) of the software.</p>
</td></tr>
<tr><td><code id="draft.software_+3A_year">year</code></td>
<td>
<p>year when this version of the software was released, or the
publication year of the cited manual/article/etc.</p>
</td></tr>
<tr><td><code id="draft.software_+3A_title">title</code></td>
<td>
<p>title or short description of the software.</p>
</td></tr>
<tr><td><code id="draft.software_+3A_version">version</code></td>
<td>
<p>string to specify details about the version, e.g. GitHub
branch and commit date.</p>
</td></tr>
<tr><td><code id="draft.software_+3A_source">source</code></td>
<td>
<p>string to specify where the software are copied/downloaded
from. This can be a GitHub reference of the form
<code style="white-space: pre;">&#8288;owner/repo[/subdir]@ref&#8288;</code>, URL, or a filename.</p>
</td></tr>
<tr><td><code id="draft.software_+3A_file">file</code></td>
<td>
<p>optional filename to save the draft metadata to a file. The value
<code>TRUE</code> can be used as shorthand for <code>"boot/SOFTWARE.bib"</code>.</p>
</td></tr>
<tr><td><code id="draft.software_+3A_append">append</code></td>
<td>
<p>whether to append metadata entries to an existing file.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Typical usage is to specify <code>package</code>, while using the default values
for the other arguments.
</p>
<p>If <code>package</code> is an R package, it can either be a package that is already
installed (<code>"icesAdvice"</code>) or a GitHub reference
(<code>"ices-tools-prod/icesAdvice@4271797"</code>).
</p>
<p>With the default <code style="white-space: pre;">&#8288;version = NULL&#8288;</code>, the function will automatically
suggest an appropriate version entry for CRAN packages, but for GitHub
packages it is left to the user to add further information about the GitHub
branch (if different from <code style="white-space: pre;">&#8288;master&#8288;</code>) and the commit date.
</p>
<p>With the default <code style="white-space: pre;">&#8288;source = NULL&#8288;</code>, the function will automatically
suggest an appropriate source entry for CRAN and GitHub packages, but for
other R packages it is left to the user to add information about where the
software can be accessed.
</p>
<p>The default value <code>file = ""</code> prints the initial draft in the console,
instead of writing it to a file. The output can then be pasted into a file to
edit further, without accidentally overwriting an existing metadata file.
</p>


<h3>Value</h3>

<p>Object of class <code style="white-space: pre;">&#8288;Bibtex&#8288;</code>.
</p>


<h3>Note</h3>

<p>After creating the initial draft, the user can complete the <code style="white-space: pre;">&#8288;version&#8288;</code>,
<code style="white-space: pre;">&#8288;source&#8288;</code>, and other fields as required.
</p>
<p>This function is especially useful for citing exact versions of R packages on
GitHub. To prepare metadata for software other than R packages, see the
<a href="https://github.com/ices-taf/doc/wiki/Bib-entries">TAF Wiki</a> for an
example.
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+citation">citation</a></code> and <code><a href="utils.html#topic+packageDescription">packageDescription</a></code> are the
underlying functions to access information about installed R packages.
</p>
<p><code><a href="#topic+draft.data">draft.data</a></code> creates an initial draft version of a
<code style="white-space: pre;">&#8288;DATA.bib&#8288;</code> metadata file.
</p>
<p><code><a href="#topic+taf.boot">taf.boot</a></code> reads and processes metadata entries.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Print in console
draft.software("TAF")


## Not run: 
# Export to file
draft.software("TAF", file=TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='file.encoding'>File Encoding</h2><span id='topic+file.encoding'></span>

<h3>Description</h3>

<p>Examine file encoding.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>file.encoding(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="file.encoding_+3A_file">file</code></td>
<td>
<p>a filename.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>"latin1"</code>, <code>"UTF-8"</code>, <code>"unknown"</code>, or <code>NA</code>.
</p>
<p>This function requires the <code>file</code> shell command to be in the path.
Otherwise, this function returns <code>NA</code>.
</p>


<h3>Note</h3>

<p>The encoding <code>"unknown"</code> indicates that the file is an ASCII text file
or a binary file.
</p>
<p>In TAF, text files that have non-ASCII characters should be encoded as UTF-8.
</p>
<p>If this function fails in Windows, the <code>guess_encoding</code> function in the
<span class="pkg">readr</span> package may help.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+Encoding">Encoding</a></code> examines the encoding of a string.
</p>
<p><code><a href="#topic+latin1.to.utf8">latin1.to.utf8</a></code> converts files from <code style="white-space: pre;">&#8288;latin1&#8288;</code> to
<code style="white-space: pre;">&#8288;UTF-8&#8288;</code> encoding.
</p>
<p><code><a href="#topic+line.endings">line.endings</a></code> examines line endings.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
file.base &lt;- system.file(package="base", "DESCRIPTION")
file.nlme &lt;- system.file(package="nlme", "DESCRIPTION")
file.encoding(file.base)  # ASCII
file.encoding(file.nlme)

## End(Not run)

</code></pre>

<hr>
<h2 id='flr2taf'>Convert FLR Table to TAF Format</h2><span id='topic+flr2taf'></span>

<h3>Description</h3>

<p>Convert a table from FLR format to TAF format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flr2taf(x, colname = "Value")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="flr2taf_+3A_x">x</code></td>
<td>
<p>a table of class <code>FLQuant</code>.</p>
</td></tr>
<tr><td><code id="flr2taf_+3A_colname">colname</code></td>
<td>
<p>a column name to use if the FLR table contains only one row.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame in TAF format.
</p>


<h3>Note</h3>

<p>FLR uses the <code>FLQuant</code> class to store tables as 6-dimensional arrays,
while TAF tables are stored as data frames with a year column.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+catage.taf">catage.taf</a></code> describes the TAF format.
</p>
<p><code><a href="base.html#topic+as.data.frame">as.data.frame</a></code> is a method provided by the <span class="pkg">FLCore</span> package
to convert <code>FLQuant</code> tables to a 7-column long format.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- array(t(catage.xtab), dim=c(4,8,1,1,1,1))
dimnames(x) &lt;- list(age=1:4, year=1963:1970,
                    unit="unique", season="all", area="unique", iter=1)
flr2taf(x)

x1 &lt;- x[1,,,,,,drop=FALSE]
flr2taf(x1)
flr2taf(x1, "Juveniles")

</code></pre>

<hr>
<h2 id='get.remote.sha'>Get Remote SHA</h2><span id='topic+get.remote.sha'></span>

<h3>Description</h3>

<p>Look up SHA reference code on GitHub.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.remote.sha(owner, repo, ref, seven = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get.remote.sha_+3A_owner">owner</code></td>
<td>
<p>repository owner.</p>
</td></tr>
<tr><td><code id="get.remote.sha_+3A_repo">repo</code></td>
<td>
<p>repository name.</p>
</td></tr>
<tr><td><code id="get.remote.sha_+3A_ref">ref</code></td>
<td>
<p>reference.</p>
</td></tr>
<tr><td><code id="get.remote.sha_+3A_seven">seven</code></td>
<td>
<p>whether to truncate SHA reference code to seven characters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>SHA reference code as a string.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+taf.boot">taf.boot</a></code> uses <code>get.remote.sha</code> to determine whether it is
necessary to remove or download files, via <code><a href="#topic+clean.library">clean.library</a></code>,
<code><a href="#topic+clean.software">clean.software</a></code>, and <code><a href="#topic+download.github">download.github</a></code>.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
get.remote.sha("ices-tools-prod", "icesAdvice", "master")
get.remote.sha("ices-tools-prod", "icesAdvice", "1.3-0")
get.remote.sha("ices-tools-prod", "icesAdvice", "1.3-0", seven=FALSE)

## End(Not run)

</code></pre>

<hr>
<h2 id='is.r.package'>Is R Package</h2><span id='topic+is.r.package'></span>

<h3>Description</h3>

<p>Check if &lsquo;<span class="file">.tar.gz</span>&rsquo; file is an R package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.r.package(targz, spec = NULL, warn = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is.r.package_+3A_targz">targz</code></td>
<td>
<p>a filename ending with <code style="white-space: pre;">&#8288;tar.gz&#8288;</code>.</p>
</td></tr>
<tr><td><code id="is.r.package_+3A_spec">spec</code></td>
<td>
<p>an optional list generated with <code>parse.repo</code>.</p>
</td></tr>
<tr><td><code id="is.r.package_+3A_warn">warn</code></td>
<td>
<p>whether to warn if the file contents look like an R package
nested inside a repository.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The only purpose of passing <code>spec</code> is to get a more helpful warning
message if the file contents look like an R package nested inside a
repository.
</p>


<h3>Value</h3>

<p>Logical indicating whether <code>targz</code> is an R package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
is.r.package("boot/software/SAM.tar.gz")
is.r.package("boot/software/stockassessment.tar.gz")

## End(Not run)

</code></pre>

<hr>
<h2 id='latin1.to.utf8'>Convert File Encoding</h2><span id='topic+latin1.to.utf8'></span><span id='topic+utf8.to.latin1'></span>

<h3>Description</h3>

<p>Convert file encoding between <code style="white-space: pre;">&#8288;"latin1"&#8288;</code> and <code style="white-space: pre;">&#8288;"UTF-8"&#8288;</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>latin1.to.utf8(file, force = FALSE)

utf8.to.latin1(file, force = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="latin1.to.utf8_+3A_file">file</code></td>
<td>
<p>a filename.</p>
</td></tr>
<tr><td><code id="latin1.to.utf8_+3A_force">force</code></td>
<td>
<p>whether to perform the conversion even if the current file
encoding cannot be verified with <code><a href="#topic+file.encoding">file.encoding</a></code>. Not
recommended.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>Note</h3>

<p>In TAF, text files that have non-ASCII characters must be encoded as UTF-8.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+iconv">iconv</a></code> converts the encoding of a string.
</p>
<p><code><a href="#topic+file.encoding">file.encoding</a></code> examines the encoding of a file.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
utf8.to.latin1("data.txt")
latin1.to.utf8("data.txt")

## End(Not run)

</code></pre>

<hr>
<h2 id='lim'>Axis Limits</h2><span id='topic+lim'></span>

<h3>Description</h3>

<p>Compute reasonable axis limits for plotting non-negative numbers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lim(x, mult = 1.1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="lim_+3A_x">x</code></td>
<td>
<p>a vector of data values.</p>
</td></tr>
<tr><td><code id="lim_+3A_mult">mult</code></td>
<td>
<p>a number to multiply with the highest data value.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of length two, which can be used as axis limits.
</p>


<h3>Note</h3>

<p>The lower limit is set to 0, and the upper limit is determined by the highest
data value, times a multiplier.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot(precip)
plot(precip, ylim=lim(precip))
plot(precip, ylim=lim(precip), yaxs="i")

</code></pre>

<hr>
<h2 id='line.endings'>Line Endings</h2><span id='topic+line.endings'></span>

<h3>Description</h3>

<p>Examine whether file has Dos or Unix line endings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>line.endings(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="line.endings_+3A_file">file</code></td>
<td>
<p>a filename.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>String indicating the line endings: <code>"Dos"</code> or <code>"Unix"</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+file.encoding">file.encoding</a></code> examines the encoding of a file.
</p>
<p><code><a href="#topic+dos2unix">dos2unix</a></code> and <code><a href="#topic+unix2dos">unix2dos</a></code> convert line endings.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
file &lt;- system.file(package="TAF", "DESCRIPTION")
line.endings(file)

## End(Not run)

</code></pre>

<hr>
<h2 id='long2taf'>Convert Long Table to TAF Format</h2><span id='topic+long2taf'></span>

<h3>Description</h3>

<p>Convert a table from long format to TAF format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>long2taf(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="long2taf_+3A_x">x</code></td>
<td>
<p>a data frame in long format.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame in TAF format.
</p>


<h3>Note</h3>

<p>TAF stores tables as data frames, usually with a year column as seen in stock
assessment reports. The long format is more convenient for analysis and
producing plots.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+catage.long">catage.long</a></code> and <code><a href="#topic+catage.taf">catage.taf</a></code> describe the long and
TAF formats.
</p>
<p><code><a href="#topic+taf2long">taf2long</a></code> converts a TAF table to long format.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>long2taf(catage.long)

</code></pre>

<hr>
<h2 id='long2xtab'>Convert Long Table to Crosstab Format</h2><span id='topic+long2xtab'></span>

<h3>Description</h3>

<p>Convert a table from long format to crosstab format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>long2xtab(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="long2xtab_+3A_x">x</code></td>
<td>
<p>a data frame in long format.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with years as row names.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+catage.long">catage.long</a></code> and <code><a href="#topic+catage.xtab">catage.xtab</a></code> describe the long and
crosstab formats.
</p>
<p><code><a href="#topic+long2taf">long2taf</a></code> and <code><a href="#topic+taf2xtab">taf2xtab</a></code> are the underlying
functions that perform the conversion.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>long2xtab(catage.long)

</code></pre>

<hr>
<h2 id='make'>Run R Script If Needed</h2><span id='topic+make'></span>

<h3>Description</h3>

<p>Run an R script if underlying files have changed, otherwise do nothing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make(recipe, prereq, target, include = TRUE, engine = source,
  debug = FALSE, force = FALSE, recon = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_+3A_recipe">recipe</code></td>
<td>
<p>script filename.</p>
</td></tr>
<tr><td><code id="make_+3A_prereq">prereq</code></td>
<td>
<p>one or more underlying files, required by the script. For
example, data files and/or scripts.</p>
</td></tr>
<tr><td><code id="make_+3A_target">target</code></td>
<td>
<p>one or more output files, produced by the script. Directory
names can also be used.</p>
</td></tr>
<tr><td><code id="make_+3A_include">include</code></td>
<td>
<p>whether to automatically include the script itself as a
prerequisite file.</p>
</td></tr>
<tr><td><code id="make_+3A_engine">engine</code></td>
<td>
<p>function to source the script.</p>
</td></tr>
<tr><td><code id="make_+3A_debug">debug</code></td>
<td>
<p>whether to show a diagnostic table of files and time last
modified.</p>
</td></tr>
<tr><td><code id="make_+3A_force">force</code></td>
<td>
<p>whether to run the R script unconditionally.</p>
</td></tr>
<tr><td><code id="make_+3A_recon">recon</code></td>
<td>
<p>whether to return <code>TRUE</code> or <code>FALSE</code>, without actually
running the R script.</p>
</td></tr>
<tr><td><code id="make_+3A_...">...</code></td>
<td>
<p>passed to <code>engine</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> or <code>FALSE</code>, indicating whether the script was run.
</p>


<h3>Note</h3>

<p>This function provides functionality similar to makefile rules, to determine
whether a script should be (re)run or not.
</p>
<p>If any <code>target</code> is missing or older than any <code>prereq</code>, then the
script is run.
</p>


<h3>References</h3>

<p>Stallman, R. M. <em>et al.</em> An introduction to makefiles. Chapter 2 in the
<em><a href="https://www.gnu.org/software/make/manual/make.pdf">GNU Make
manual</a></em>.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+source">source</a></code> runs any R script, <code><a href="#topic+source.taf">source.taf</a></code> is more
convenient for running a TAF script, and <code><a href="#topic+source.all">source.all</a></code> runs all
TAF scripts.
</p>
<p><code><a href="#topic+make">make</a></code>, <code><a href="#topic+make.taf">make.taf</a></code>, and <code><a href="#topic+make.all">make.all</a></code> are
similar to the <code>source</code> functions, except they avoid repeating tasks
that have already been run.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
make("model.R", "data/input.dat", "model/results.dat")

## End(Not run)

</code></pre>

<hr>
<h2 id='make.all'>Run All TAF Scripts as Needed</h2><span id='topic+make.all'></span><span id='topic+makeAll'></span>

<h3>Description</h3>

<p>Run core TAF scripts that have changed, or if previous steps were rerun.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make.all(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make.all_+3A_...">...</code></td>
<td>
<p>passed to <code><a href="#topic+make.taf">make.taf</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical vector indicating which scripts were run.
</p>


<h3>Note</h3>

<p>TAF scripts that will be run as needed are: <code style="white-space: pre;">&#8288;utilities.R&#8288;</code>,
<code style="white-space: pre;">&#8288;data.R&#8288;</code>, <code style="white-space: pre;">&#8288;model.R&#8288;</code>, <code style="white-space: pre;">&#8288;output.R&#8288;</code>, and <code style="white-space: pre;">&#8288;report.R&#8288;</code>.
</p>
<p>The <code style="white-space: pre;">&#8288;model.R&#8288;</code> script may also be named <code style="white-space: pre;">&#8288;method.R&#8288;</code> and is treated in
the same way.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+source">source</a></code> runs any R script, <code><a href="#topic+source.taf">source.taf</a></code> is more
convenient for running a TAF script, and <code><a href="#topic+source.all">source.all</a></code> runs all
TAF scripts.
</p>
<p><code><a href="#topic+make">make</a></code>, <code><a href="#topic+make.taf">make.taf</a></code>, and <code><a href="#topic+make.all">make.all</a></code> are
similar to the <code>source</code> functions, except they avoid repeating tasks
that have already been run.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
make.all()

## End(Not run)

</code></pre>

<hr>
<h2 id='make.taf'>Run TAF Script If Needed</h2><span id='topic+make.taf'></span><span id='topic+makeTAF'></span>

<h3>Description</h3>

<p>Run a TAF script if the target directory is either older than the script, or
older than the directory of the previous TAF step.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make.taf(script, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make.taf_+3A_script">script</code></td>
<td>
<p>TAF script filename.</p>
</td></tr>
<tr><td><code id="make.taf_+3A_...">...</code></td>
<td>
<p>passed to <code><a href="#topic+make">make</a></code> and <code><a href="#topic+source.taf">source.taf</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> or <code>FALSE</code>, indicating whether the script was run.
</p>


<h3>Note</h3>

<p>Any underlying scripts are automatically included if they share the same
filename prefix, followed by an underscore. For example, when determining
whether a script <code style="white-space: pre;">&#8288;data.R&#8288;</code> should be run, this function checks whether
<code style="white-space: pre;">&#8288;data_foo.R&#8288;</code> and <code style="white-space: pre;">&#8288;data_bar.R&#8288;</code> have been recently modified.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+source">source</a></code> runs any R script, <code><a href="#topic+source.taf">source.taf</a></code> is more
convenient for running a TAF script, and <code><a href="#topic+source.all">source.all</a></code> runs all
TAF scripts.
</p>
<p><code><a href="#topic+make">make</a></code>, <code><a href="#topic+make.taf">make.taf</a></code>, and <code><a href="#topic+make.all">make.all</a></code> are
similar to the <code>source</code> functions, except they avoid repeating tasks
that have already been run.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
make.taf("model.R")

## End(Not run)

</code></pre>

<hr>
<h2 id='mkdir'>Create Directory</h2><span id='topic+mkdir'></span>

<h3>Description</h3>

<p>Create directory, including parent directories if necessary, without
generating a warning if the directory already exists.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mkdir(path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mkdir_+3A_path">path</code></td>
<td>
<p>a directory name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> for success, <code>FALSE</code> for failure, invisibly.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+dir.create">dir.create</a></code> is the base function to create a new directory.
</p>
<p><code><a href="#topic+rmdir">rmdir</a></code> removes an empty directory.
</p>
<p><code><a href="#topic+clean">clean</a></code> can be used to remove non-empty directories.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
mkdir("emptydir")
rmdir("emptydir")

mkdir("outer/inner")
rmdir("outer", recursive=TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='msg'>Show Message</h2><span id='topic+msg'></span>

<h3>Description</h3>

<p>Show a message, as well as the current time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>msg(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="msg_+3A_...">...</code></td>
<td>
<p>passed to <code>message</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+message">message</a></code> is the base function to show messages, without the
current time.
</p>
<p><code><a href="#topic+source.taf">source.taf</a></code> reports progress using <code>msg</code>.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
msg("script.R running...")


</code></pre>

<hr>
<h2 id='os'>Operating System</h2><span id='topic+os'></span><span id='topic+os.linux'></span><span id='topic+os.macos'></span><span id='topic+os.windows'></span><span id='topic+os.unix'></span>

<h3>Description</h3>

<p>Determine operating system name.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>os()

os.linux()

os.macos()

os.windows()

os.unix()
</code></pre>


<h3>Value</h3>

<p><code>os</code> returns the name of the operating system, typically <code>"Linux"</code>,
<code>"Darwin"</code>, or <code>"Windows"</code>.
</p>
<p><code>os.linux</code>, <code>os.macos</code>, <code>os.unix</code>, and <code>os.windows</code>
return <code>TRUE</code> or <code>FALSE</code>.
</p>


<h3>Note</h3>

<p>The macOS operating system identifies itself as <code>"Darwin"</code>.
</p>
<p>Both Linux and macOS are <code>os.unix</code>.
</p>
<p>These shorthand functions can be useful when writing workaround solutions in
platform-independent scripts.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+Sys.info">Sys.info</a></code> is the underlying function used to extract the
operating system name.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
os()
os.linux()
os.macos()
os.unix()
os.windows()


</code></pre>

<hr>
<h2 id='period'>Period</h2><span id='topic+period'></span>

<h3>Description</h3>

<p>Paste two years to form a <code>period</code> string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>period(x, y = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="period_+3A_x">x</code></td>
<td>
<p>the first year, vector of years, matrix, or data frame.</p>
</td></tr>
<tr><td><code id="period_+3A_y">y</code></td>
<td>
<p>the last year, if <code>x</code> is only the first year.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>x</code> is a vector or a data frame, then the lowest and highest years
are used, and <code>y</code> is ignored.
</p>
<p>If <code>x</code> is a matrix or data frame, this function looks for years in the
first column. If the values of the first column do not look like years (four
digits), then it looks for years in the row names.
</p>


<h3>Value</h3>

<p>A string of the form <code>"1990-2000"</code>.
</p>


<h3>Note</h3>

<p>This function can be useful when working with <code><a href="#topic+draft.data">draft.data</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+paste">paste</a></code> is the underlying function to paste strings.
</p>
<p><code><a href="#topic+draft.data">draft.data</a></code> has an argument called <code>period</code>.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>period(1963, 1970)
period(c(1963, 1970))
period(1963:1970)

period(range(catage.taf$Year))
period(catage.taf$Year)
period(catage.taf)
period(catage.xtab)
period(catage.long)

</code></pre>

<hr>
<h2 id='plus'>Rename Plus Group Column</h2><span id='topic+plus'></span>

<h3>Description</h3>

<p>Rename the last column in a data frame, by appending a <code>"+"</code> character.
This is useful if the last column is a plus group.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plus(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plus_+3A_x">x</code></td>
<td>
<p>a data frame.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame similar to <code>x</code>, after renaming the last column.
</p>


<h3>Note</h3>

<p>If the last column name already ends with a <code>"+"</code>, the original data
frame is returned without modifications.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+names">names</a></code> is the underlying function to rename columns.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>catage &lt;- catage.taf

# Rename last column
catage &lt;- plus(catage)

# Shorter and less error-prone than
names(catage)[names(catage)=="4"] &lt;- "4+"

</code></pre>

<hr>
<h2 id='read.bib'>Read Metadata Entries</h2><span id='topic+read.bib'></span>

<h3>Description</h3>

<p>Read metadata entries written in BibTeX format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.bib(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read.bib_+3A_file">file</code></td>
<td>
<p>&lsquo;<span class="file">*.bib</span>&rsquo; file to parse.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of metadata entries.
</p>


<h3>Note</h3>

<p>This function was created when the <span class="pkg">bibtex</span> package was temporarily
removed from CRAN. The current implementation reduces the <span class="pkg">TAF</span> package
dependencies to base R and nothing else.
</p>
<p>This parser is similar to the <code>read.bib</code> function in the <span class="pkg">bibtex</span>
package, except:
</p>

<ul>
<li><p> It returns a plain list instead of class <code>bibentry</code>.
</p>
</li>
<li><p> The fields <code>bibtype</code> and <code>key</code> are stored as list elements
instead of attributes.
</p>
</li></ul>

<p>See the TAF Wiki page on
<a href="https://github.com/ices-taf/doc/wiki/Bib-entries">bib entries</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+taf.boot">taf.boot</a></code> reads and processes metadata entries.
</p>
<p><code><a href="#topic+taf.sources">taf.sources</a></code> reads metadata entries and adds a <code>type</code>
field.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bib &lt;- read.bib("DATA.bib")
str(bib)

## End(Not run)

</code></pre>

<hr>
<h2 id='read.taf'>Read TAF Table from File</h2><span id='topic+read.taf'></span>

<h3>Description</h3>

<p>Read a TAF table from a file into a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.taf(file, check.names = FALSE, stringsAsFactors = FALSE,
  fileEncoding = "UTF-8", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read.taf_+3A_file">file</code></td>
<td>
<p>a filename.</p>
</td></tr>
<tr><td><code id="read.taf_+3A_check.names">check.names</code></td>
<td>
<p>whether to enforce regular column names, e.g. convert
column name &lsquo;<span class="samp">&#8288;"3"&#8288;</span>&rsquo; to &lsquo;<span class="samp">&#8288;"X3"&#8288;</span>&rsquo;.</p>
</td></tr>
<tr><td><code id="read.taf_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>whether to import strings as factors.</p>
</td></tr>
<tr><td><code id="read.taf_+3A_fileencoding">fileEncoding</code></td>
<td>
<p>character encoding of input file.</p>
</td></tr>
<tr><td><code id="read.taf_+3A_...">...</code></td>
<td>
<p>passed to <code>read.csv</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Alternatively, <code>file</code> can be a directory or a vector of filenames, to
read many tables in one call.
</p>


<h3>Value</h3>

<p>A data frame in TAF format, or a list of data frames if <code>file</code> is a
directory or a vector of filenames.
</p>


<h3>Note</h3>

<p>This function gives a warning when column names are missing or duplicated. It
also gives a warning if the data frame has zero rows.
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+read.csv">read.csv</a></code> is the underlying function used to read a table from a
file.
</p>
<p><code><a href="#topic+write.taf">write.taf</a></code> writes a TAF table to a file.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
write.taf(catage.taf, "catage.csv")
catage &lt;- read.taf("catage.csv")

write.taf(catage)
file.remove("catage.csv")

## End(Not run)

</code></pre>

<hr>
<h2 id='rmdir'>Remove Empty Directory</h2><span id='topic+rmdir'></span>

<h3>Description</h3>

<p>Remove empty directory under any operating system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmdir(path, recursive = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rmdir_+3A_path">path</code></td>
<td>
<p>a directory name.</p>
</td></tr>
<tr><td><code id="rmdir_+3A_recursive">recursive</code></td>
<td>
<p>whether to remove empty subdirectories as well.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> for success, <code>FALSE</code> for failure, invisibly.
</p>


<h3>Note</h3>

<p>The base function <code>unlink(dir, recursive=FALSE)</code> does not remove empty
directories in Windows and <code>unlink(dir, recursive=TRUE)</code> removes
non-empty directories, making it unsuitable for tidying up empty ones.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+unlink">unlink</a></code> with <code>recursive = TRUE</code> removes non-empty
directories.
</p>
<p><code><a href="#topic+mkdir">mkdir</a></code> creates a new directory.
</p>
<p><code><a href="#topic+clean">clean</a></code> can be used to remove non-empty directories.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
mkdir("emptydir")
rmdir("emptydir")

mkdir("outer/inner")
rmdir("outer", recursive=TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='rnd'>Round Columns</h2><span id='topic+rnd'></span>

<h3>Description</h3>

<p>Round column values in a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rnd(x, cols, digits = 0, grep = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rnd_+3A_x">x</code></td>
<td>
<p>a data frame.</p>
</td></tr>
<tr><td><code id="rnd_+3A_cols">cols</code></td>
<td>
<p>column names, or column indices.</p>
</td></tr>
<tr><td><code id="rnd_+3A_digits">digits</code></td>
<td>
<p>number of decimal places.</p>
</td></tr>
<tr><td><code id="rnd_+3A_grep">grep</code></td>
<td>
<p>whether <code>cols</code> is a regular expression.</p>
</td></tr>
<tr><td><code id="rnd_+3A_...">...</code></td>
<td>
<p>passed to <code>grep()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame similar to <code>x</code>, after rounding columns <code>cols</code> to the
number of <code>digits</code>.
</p>


<h3>Note</h3>

<p>Provides notation that is convenient for modifying many columns at once.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+round">round</a></code> is the underlying function used to round numbers.
</p>
<p><code><a href="base.html#topic+grep">grep</a></code> is the underlying function used to match column names if
<code>grep</code> is <code>TRUE</code>.
</p>
<p><code><a href="#topic+div">div</a></code> is a similar function that divides columns with a common
number.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>
<p>The <span class="pkg">icesAdvice</span> package provides the <code>icesRound</code> function to round
values for ICES advice sheets.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># With rnd() we no longer need to repeat the column names:

m &lt;- mtcars
m[c("mpg","disp","qsec")] &lt;- round(m[c("mpg","disp","qsec")])
m &lt;- rnd(m, c("mpg","disp","qsec"))

# The x1/x2/x3/x4 approaches are equivalent:

x1 &lt;- rnd(summary.taf, c("Rec","Rec_lo","Rec_hi",
                         "TSB","TSB_lo","TSB_hi",
                         "SSB","SSB_lo","SSB_hi",
                         "Removals","Removals_lo","Removals_hi"))
x1 &lt;- rnd(x1, c("Fbar","Fbar_lo","Fbar_hi"), 3)

x2 &lt;- rnd(summary.taf, "Rec|TSB|SSB|Removals", grep=TRUE)
x2 &lt;- rnd(x2, "Fbar", 3, grep=TRUE)

x3 &lt;- rnd(summary.taf, "Fbar", grep=TRUE, invert=TRUE)
x3 &lt;- rnd(x3, "Fbar", 3, grep=TRUE)

# Less reliable in scripts if columns have been added/deleted/reordered:

x4 &lt;- rnd(summary.taf, 2:13)
x4 &lt;- rnd(x4, 14:16, 3)

</code></pre>

<hr>
<h2 id='sam2taf'>Convert SAM Table to TAF Format</h2><span id='topic+sam2taf'></span>

<h3>Description</h3>

<p>Convert a table from SAM format to TAF format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sam2taf(x, colname = NULL, year = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sam2taf_+3A_x">x</code></td>
<td>
<p>a matrix containing columns <code style="white-space: pre;">&#8288;Estimate&#8288;</code>, <code style="white-space: pre;">&#8288;Low&#8288;</code>, and
<code style="white-space: pre;">&#8288;High&#8288;</code>.</p>
</td></tr>
<tr><td><code id="sam2taf_+3A_colname">colname</code></td>
<td>
<p>a descriptive column name for the output.</p>
</td></tr>
<tr><td><code id="sam2taf_+3A_year">year</code></td>
<td>
<p>whether to include a year column.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The default when <code>colname = NULL</code> is to try to infer a column name from
the <code>x</code> argument. For example,
</p>
<pre>sam2taf(ssbtable(fit))
sam2taf(ssb)
sam2taf(SSB)</pre>
<p>will recognize <code style="white-space: pre;">&#8288;ssbtable&#8288;</code> calls and <code style="white-space: pre;">&#8288;ssb&#8288;</code> object names, implicitly
setting <code>colname = "SSB"</code> if the user does not pass an explicit value
for <code>colname</code>.
</p>


<h3>Value</h3>

<p>A data frame in TAF format.
</p>


<h3>Note</h3>

<p>The <span class="pkg">stockassessment</span> package provides accessor functions that return a
matrix with columns <code style="white-space: pre;">&#8288;Estimate&#8288;</code>, <code style="white-space: pre;">&#8288;Low&#8288;</code>, and <code style="white-space: pre;">&#8288;High&#8288;</code>, while TAF
tables are stored as data frames with a year column.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+summary.taf">summary.taf</a></code> describes the TAF format.
</p>
<p><code>catchtable</code>, <code>fbartable</code>, <code>rectable</code>, <code>ssbtable</code>, and
<code>tsbtable</code> (in the <span class="pkg">stockassessment</span> package) return matrices with
SAM estimates and confidence limits.
</p>
<p>The <code>summary</code> method for <code>sam</code> objects produces a summary table
with some key quantities of interest, containing duplicated column names
(<code style="white-space: pre;">&#8288;Low&#8288;</code>, <code style="white-space: pre;">&#8288;High&#8288;</code>) and rounded values.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example objects
x &lt;- as.matrix(summary.taf[grep("SSB", names(summary.taf))])
rec &lt;- as.matrix(summary.taf[grep("Rec", names(summary.taf))])
tsb &lt;- as.matrix(summary.taf[grep("TSB", names(summary.taf))])
dimnames(x) &lt;- list(summary.taf$Year, c("Estimate", "Low", "High"))
dimnames(rec) &lt;- dimnames(tsb) &lt;- dimnames(x)

## One SAM table, arbitrary object name
sam2taf(x)
sam2taf(x, "SSB")
sam2taf(x, "SSB", year=FALSE)

## Many SAM tables, recognized names
sam2taf(rec)
data.frame(sam2taf(rec), sam2taf(tsb, year=FALSE))

## Not run: 

## Accessing tables from SAM fit object
data.frame(sam2taf(rectable(fit)), sam2taf(tsbtable(fit), year=FALSE))

## End(Not run)

</code></pre>

<hr>
<h2 id='source.all'>Run All TAF Scripts</h2><span id='topic+source.all'></span><span id='topic+sourceAll'></span>

<h3>Description</h3>

<p>Run core TAF scripts in current directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>source.all(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="source.all_+3A_...">...</code></td>
<td>
<p>passed to <code><a href="#topic+source.taf">source.taf</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical vector, indicating which scripts ran without errors.
</p>


<h3>Note</h3>

<p>TAF scripts that will be run if they exist are: <code style="white-space: pre;">&#8288;utilities.R&#8288;</code>,
<code style="white-space: pre;">&#8288;data.R&#8288;</code>, <code style="white-space: pre;">&#8288;model.R&#8288;</code>, <code style="white-space: pre;">&#8288;output.R&#8288;</code>, and <code style="white-space: pre;">&#8288;report.R&#8288;</code>.
</p>
<p>The <code style="white-space: pre;">&#8288;model.R&#8288;</code> script may also be named <code style="white-space: pre;">&#8288;method.R&#8288;</code> and is treated in
the same way.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+source.taf">source.taf</a></code> runs a TAF script.
</p>
<p><code><a href="#topic+make.all">make.all</a></code> runs all TAF scripts as needed.
</p>
<p><code><a href="#topic+clean">clean</a></code> cleans TAF directories.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
source.all()

## End(Not run)

</code></pre>

<hr>
<h2 id='source.dir'>Source Directory</h2><span id='topic+source.dir'></span><span id='topic+sourceDir'></span>

<h3>Description</h3>

<p>Read all <code>*.R</code> files from a directory containing R functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>source.dir(dir, pattern = "\\.[r|R]$", all.files = FALSE,
  recursive = FALSE, quiet = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="source.dir_+3A_dir">dir</code></td>
<td>
<p>a directory containing R source files.</p>
</td></tr>
<tr><td><code id="source.dir_+3A_pattern">pattern</code></td>
<td>
<p>passed to <code><a href="base.html#topic+dir">dir</a></code> when selecting files.</p>
</td></tr>
<tr><td><code id="source.dir_+3A_all.files">all.files</code></td>
<td>
<p>passed to <code>dir</code> when selecting files.</p>
</td></tr>
<tr><td><code id="source.dir_+3A_recursive">recursive</code></td>
<td>
<p>passed to <code>dir</code> when selecting files.</p>
</td></tr>
<tr><td><code id="source.dir_+3A_quiet">quiet</code></td>
<td>
<p>whether to suppress messages.</p>
</td></tr>
<tr><td><code id="source.dir_+3A_...">...</code></td>
<td>
<p>passed to <code>source</code> when sourcing files.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>dir</code> argument can also be a vector of filenames, instead of a
directory  name. This can be useful to specify certain files while avoiding
others.
</p>


<h3>Value</h3>

<p>Names of sourced files.
</p>


<h3>Note</h3>

<p>This function is convenient in TAF analyses when many R utility functions are
stored in a directory, see example below.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+source">source</a></code> is the base function to read R code from a file.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
source.dir("boot/software/utilities")

## End(Not run)

</code></pre>

<hr>
<h2 id='source.taf'>Run TAF Script</h2><span id='topic+source.taf'></span><span id='topic+sourceTAF'></span>

<h3>Description</h3>

<p>Run a TAF script and return to the original directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>source.taf(script, rm = FALSE, clean = TRUE, detach = FALSE,
  taf = NULL, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="source.taf_+3A_script">script</code></td>
<td>
<p>script filename.</p>
</td></tr>
<tr><td><code id="source.taf_+3A_rm">rm</code></td>
<td>
<p>whether to remove all objects from the global environment before
and after the script is run.</p>
</td></tr>
<tr><td><code id="source.taf_+3A_clean">clean</code></td>
<td>
<p>whether to <code><a href="#topic+clean">clean</a></code> the target directory before
running the script.</p>
</td></tr>
<tr><td><code id="source.taf_+3A_detach">detach</code></td>
<td>
<p>whether to detach all non-base packages before running the
script, to ensure that the script is not affected by packages that may
have been attached outside the script.</p>
</td></tr>
<tr><td><code id="source.taf_+3A_taf">taf</code></td>
<td>
<p>a convenience flag where <code>taf = TRUE</code> sets <code>rm</code>,
<code>clean</code>, and <code>detach</code> to <code>TRUE</code>, as is done on the TAF
server. Any other value of <code>taf</code> is ignored.</p>
</td></tr>
<tr><td><code id="source.taf_+3A_quiet">quiet</code></td>
<td>
<p>whether to suppress messages reporting progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The default value of <code>rm = FALSE</code> is to protect users from accidental
loss of work, but the TAF server always runs with <code>rm = TRUE</code> to make
sure that only files, not objects in memory, are carried over between
scripts.
</p>
<p>Likewise, the TAF server runs with <code>clean = TRUE</code> to make sure that the
script starts with a clean directory. The target directory of a TAF script
has the same filename prefix as the script: <code style="white-space: pre;">&#8288;data.R&#8288;</code> creates &lsquo;<span class="file">data</span>&rsquo;
etc.
</p>


<h3>Value</h3>

<p><code>TRUE</code> or <code>FALSE</code>, indicating whether the script ran without
errors.
</p>


<h3>Note</h3>

<p>Commands within a script (such as <code>setwd</code>) may change the working
directory, but <code>source.taf</code> guarantees that the working directory
reported by <code>getwd()</code> is the same before and after running a script.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+source">source</a></code> is the base function to run R scripts.
</p>
<p><code><a href="#topic+make.taf">make.taf</a></code> runs a TAF script if needed.
</p>
<p><code><a href="#topic+source.all">source.all</a></code> runs all TAF scripts in a directory.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
write("print(pi)", "script.R")
source("script.R")
source.taf("script.R")
file.remove("script.R")

## End(Not run)

</code></pre>

<hr>
<h2 id='summary.taf'>Summary Results in TAF Format</h2><span id='topic+summary.taf'></span>

<h3>Description</h3>

<p>Small summary results table to describe a TAF format data frame to store
values by year.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summary.taf
</code></pre>


<h3>Format</h3>

<p>Data frame containing 16 columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>Year</code>        </td><td style="text-align: left;"> year</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>Rec</code>         </td><td style="text-align: left;"> recruitment, numbers at age 1 in this year
                          (thousands)</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>Rec_lo</code>      </td><td style="text-align: left;"> lower 95% confidence limit</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>Rec_hi</code>      </td><td style="text-align: left;"> upper 95% confidence limit</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>TSB</code>         </td><td style="text-align: left;"> total stock biomass (tonnes)</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>TSB_lo</code>      </td><td style="text-align: left;"> lower 95% confidence limit</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>TSB_hi</code>      </td><td style="text-align: left;"> upper 95% confidence limit</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>SSB</code>         </td><td style="text-align: left;"> spawning stock biomass (tonnes)</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>SSB_lo</code>      </td><td style="text-align: left;"> lower 95% confidence limit</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>SSB_hi</code>      </td><td style="text-align: left;"> upper 95% confidence limit</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>Removals</code>    </td><td style="text-align: left;"> total removals, including catches due to
                          unaccounted mortality</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>Removals_lo</code> </td><td style="text-align: left;"> lower 95% confidence limit</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>Removals_hi</code> </td><td style="text-align: left;"> upper 95% confidence limit</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>Fbar</code>        </td><td style="text-align: left;"> average fishing mortality (ages 2-4)</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>Fbar_lo</code>     </td><td style="text-align: left;"> lower 95% confidence limit</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>Fbar_hi</code>     </td><td style="text-align: left;"> upper 95% confidence limit
</td>
</tr>

</table>



<h3>Details</h3>

<p>The data are an excerpt (first years) from the summary results table for
North Sea cod from the ICES (2016) assessment.
</p>


<h3>Source</h3>

<p>ICES (2016).
Report of the working group on the assessment of demersal stocks in the North
Sea and Skagerrak (WGNSSK).
<em>ICES CM 2016/ACOM:14</em>, p. 673.
<a href="https://doi.org/10.17895/ices.pub.5329">doi:10.17895/ices.pub.5329</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+div">div</a></code> and <code><a href="#topic+rnd">rnd</a></code> can modify a large number of columns.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>summary.taf
x &lt;- div(summary.taf, "Rec|TSB|SSB|Removals", grep=TRUE)
x &lt;- rnd(x, "Rec|TSB|SSB|Removals", grep=TRUE)
x &lt;- rnd(x, "Fbar", 3, grep=TRUE)
</code></pre>

<hr>
<h2 id='TAF-internal'>Various TAF Helper Functions</h2><span id='topic+TAF-internal'></span><span id='topic+boot.dir'></span><span id='topic+boot.dir.inside'></span><span id='topic+boot.exists'></span><span id='topic+extract.subdir'></span><span id='topic+stamp.description'></span><span id='topic+ds.file'></span><span id='topic+ds.package'></span><span id='topic+model.dir'></span><span id='topic+model.script'></span><span id='topic+parse.repo'></span><span id='topic+process.bibfile'></span><span id='topic+process.entry'></span><span id='topic+already.in.taf.library'></span>

<h3>Description</h3>

<p>These functions are called by user-level functions. The functionality is
documented in the user-level functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>boot.dir()

boot.dir.inside(inside = ".")

boot.exists()

extract.subdir(targz, subtargz, subdir)

stamp.description(targz, spec, sha.full)

ds.file(package, author, year, title, version, source)

ds.package(package, author, year, title, version, source)

model.dir()

model.script()

parse.repo(repo)

process.bibfile(type, clean = TRUE, quiet = FALSE)

process.entry(bib, quiet = FALSE, force = FALSE, clean = FALSE)

already.in.taf.library(targz, lib)
</code></pre>


<h3>See Also</h3>

<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>

<hr>
<h2 id='taf.boot'>Boot TAF Analysis</h2><span id='topic+taf.boot'></span><span id='topic+taf.bootstrap'></span>

<h3>Description</h3>

<p>Process metadata files &lsquo;<span class="file">SOFTWARE.bib</span>&rsquo; and &lsquo;<span class="file">DATA.bib</span>&rsquo; to set up
software and data files required for the analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taf.boot(software = TRUE, data = TRUE, clean = TRUE, force = FALSE,
  taf = NULL, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="taf.boot_+3A_software">software</code></td>
<td>
<p>whether to process <code style="white-space: pre;">&#8288;SOFTWARE.bib&#8288;</code>.</p>
</td></tr>
<tr><td><code id="taf.boot_+3A_data">data</code></td>
<td>
<p>whether to process <code style="white-space: pre;">&#8288;DATA.bib&#8288;</code>.</p>
</td></tr>
<tr><td><code id="taf.boot_+3A_clean">clean</code></td>
<td>
<p>whether to <code><a href="#topic+clean">clean</a></code> directories during the boot
procedure.</p>
</td></tr>
<tr><td><code id="taf.boot_+3A_force">force</code></td>
<td>
<p>whether to remove existing <code style="white-space: pre;">&#8288;boot/data&#8288;</code>,
<code style="white-space: pre;">&#8288;boot/library&#8288;</code>, and <code style="white-space: pre;">&#8288;boot/software&#8288;</code> directories before the
boot procedure.</p>
</td></tr>
<tr><td><code id="taf.boot_+3A_taf">taf</code></td>
<td>
<p>a convenience flag where <code>taf = TRUE</code> sets <code>software</code>,
<code>data</code>, <code>clean</code>, and <code>force</code> to <code>TRUE</code>, as is done
on the TAF server. Any other value of <code>taf</code> is ignored.</p>
</td></tr>
<tr><td><code id="taf.boot_+3A_quiet">quiet</code></td>
<td>
<p>whether to suppress messages reporting progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>clean = TRUE</code> then:
</p>

<ol>
<li> <p><code><a href="#topic+clean.software">clean.software</a></code> and <code><a href="#topic+clean.library">clean.library</a></code> are run if
&lsquo;<span class="file">SOFTWARE.bib</span>&rsquo; is processed.
</p>
</li>
<li> <p><code><a href="#topic+clean.data">clean.data</a></code> is run if &lsquo;<span class="file">DATA.bib</span>&rsquo; is processed.
</p>
</li></ol>

<p>The default behavior of <code>taf.boot</code> is to skip downloading of remote
files (GitHub resources, URLs, boot scripts) and also skip installing R
packages from GitHub if the files seem to be already in place. This is done
to speed up the boot procedure as much as possible. To override this and
guarantee that all data and software files are updated, pass <code>force =
TRUE</code> to download and install everything declared in <code style="white-space: pre;">&#8288;SOFTWARE.bib&#8288;</code> and
<code style="white-space: pre;">&#8288;DATA.bib&#8288;</code>.
</p>


<h3>Value</h3>

<p>Logical vector indicating which metadata files were processed.
</p>


<h3>Note</h3>

<p>This function should be called from the top directory of a TAF analysis. It
looks for a directory called &lsquo;<span class="file">boot</span>&rsquo; and prepares data files and software
according to metadata specifications.
</p>
<p>The boot procedure consists of the following steps:
</p>

<ol>
<li><p> If a <code style="white-space: pre;">&#8288;boot/SOFTWARE.bib&#8288;</code> metadata file exists, it is processed.
</p>
</li>
<li><p> If a <code style="white-space: pre;">&#8288;boot/DATA.bib&#8288;</code> metadata file exists, it is processed.
</p>
</li></ol>

<p>After the boot procedure, software and data have been documented and are
ready to be used in the subsequent analysis. Specifically, the procedure
populates up to three new directories:
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;boot/data&#8288;</code> with data files.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;boot/library&#8288;</code> with R packages compiled for the local platform.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;boot/software&#8288;</code> with software files, such as R packages in
<code style="white-space: pre;">&#8288;tar.gz&#8288;</code> source code format.
</p>
</li></ul>

<p>From version 4.2 onwards, the term <em>boot</em> is preferred for what used to
be called <em>bootstrap</em>, mainly to avoid confusion with statistical
bootstrap. To <code>taf.boot()</code> is similar to booting a computer, readying
the components required for subsequent computations. Help pages now refer to
<code>boot</code>, but all TAF functions fully support existing analyses that have
a legacy <code>bootstrap</code> folder.
</p>
<p>Model settings and configuration files can be set up within <code style="white-space: pre;">&#8288;DATA.bib&#8288;</code>,
see <a href="https://github.com/ices-taf/doc/wiki/Bib-entries">TAF Wiki</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+draft.data">draft.data</a></code> and <code><a href="#topic+draft.software">draft.software</a></code> can be used to
create initial draft versions of &lsquo;<span class="file">DATA.bib</span>&rsquo; and &lsquo;<span class="file">SOFTWARE.bib</span>&rsquo;
metadata files.
</p>
<p><code><a href="#topic+taf.library">taf.library</a></code> loads a package from <code style="white-space: pre;">&#8288;boot/library&#8288;</code>.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
taf.boot()

## End(Not run)

</code></pre>

<hr>
<h2 id='taf.boot.path'>Construct Boot Path</h2><span id='topic+taf.boot.path'></span>

<h3>Description</h3>

<p>Construct a relative path to the <code>boot</code> folder, regardless of whether
the current working directory is the TAF root, the <code>boot</code> folder, or a
subfolder inside <code>boot</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taf.boot.path(..., fsep = .Platform$file.sep)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="taf.boot.path_+3A_...">...</code></td>
<td>
<p>names of folders or files to append to the result.</p>
</td></tr>
<tr><td><code id="taf.boot.path_+3A_fsep">fsep</code></td>
<td>
<p>path separator to use instead of the default forward slash.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Relative path, or a vector of paths.
</p>


<h3>Note</h3>

<p>This function is especially useful in boot scripts.
</p>


<h3>See Also</h3>

<p><a href="base.html#topic+file.path">file.path</a> is the underlying function used to construct the path.
</p>
<p><code><a href="#topic+taf.data.path">taf.data.path</a></code> constructs the path to <code>boot</code> data files.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
taf.boot.path()
taf.boot.path("software")

## End(Not run)

</code></pre>

<hr>
<h2 id='taf.colors'>TAF Colors</h2><span id='topic+taf.colors'></span><span id='topic+taf.green'></span><span id='topic+taf.orange'></span><span id='topic+taf.blue'></span><span id='topic+taf.dark'></span><span id='topic+taf.light'></span>

<h3>Description</h3>

<p>Predefined colors that can be useful in TAF plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taf.green
taf.orange
taf.blue
taf.dark
taf.light
</code></pre>


<h3>See Also</h3>

<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>taf.green

opar &lt;- par(mfrow=c(3,1))
barplot(5:1, main="Five",
        col=c(taf.green, taf.orange, taf.blue, taf.dark, taf.light))

barplot(6:1, main="Six", col=c(taf.green, taf.orange, taf.blue,
                               taf.dark, taf.light, "white"))

barplot(7:1, main="Seven", col=c("black", taf.dark, taf.light,
                                 taf.green, taf.orange, taf.blue, "white"))
par(opar)
</code></pre>

<hr>
<h2 id='taf.data.path'>Construct Boot Data Path</h2><span id='topic+taf.data.path'></span>

<h3>Description</h3>

<p>Construct a relative path to data files in the <code>boot</code> data folder,
regardless of whether the current working directory is the TAF root, the
<code>boot</code> folder, or a subfolder inside <code>boot</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taf.data.path(..., fsep = .Platform$file.sep)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="taf.data.path_+3A_...">...</code></td>
<td>
<p>filenames inside <code>boot/data</code>.</p>
</td></tr>
<tr><td><code id="taf.data.path_+3A_fsep">fsep</code></td>
<td>
<p>path separator to use instead of the default forward slash.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Relative path, or a vector of paths.
</p>


<h3>Note</h3>

<p>This function is especially useful in boot scripts.
</p>


<h3>See Also</h3>

<p><a href="base.html#topic+file.path">file.path</a> is the underlying function used to construct the path.
</p>
<p><code><a href="#topic+taf.boot.path">taf.boot.path</a></code> constructs the path to the <code>boot</code> folder.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>taf.data.path()
taf.data.path("example.dat")

</code></pre>

<hr>
<h2 id='taf.install'>TAF Install</h2><span id='topic+taf.install'></span>

<h3>Description</h3>

<p>Install packages in &lsquo;<span class="file">tar.gz</span>&rsquo; format in local TAF library.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taf.install(targz = NULL, lib = "boot/library", quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="taf.install_+3A_targz">targz</code></td>
<td>
<p>a package filename, vector of filenames, or <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="taf.install_+3A_lib">lib</code></td>
<td>
<p>location of local TAF library.</p>
</td></tr>
<tr><td><code id="taf.install_+3A_quiet">quiet</code></td>
<td>
<p>whether to suppress messages.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code style="white-space: pre;">&#8288;targz = NULL&#8288;</code>, all packages found in <code style="white-space: pre;">&#8288;boot/software&#8288;</code> are
installed, as long as they have filenames of the form
<code style="white-space: pre;">&#8288;package_sha.tar.gz&#8288;</code> containing a 7-character SHA reference code.
</p>
<p>The default behavior of <code>taf.install</code> is to install packages in
alphabetical order. When the installation order matters because of
dependencies, the user can specify a vector of package filenames to install.
</p>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>Note</h3>

<p>The <code>taf.boot</code> procedure downloads and installs R packages, without
requiring the user to run <code>taf.install</code>. The main reason for a TAF user
to run <code>taf.install</code> directly is to initialize and run a TAF analysis
without running the boot procedure, e.g. to avoid updating the underlying
datasets and software.
</p>
<p>After installing the package, this function writes the remote SHA reference
code into the package files <code style="white-space: pre;">&#8288;DESCRIPTION&#8288;</code> and <code style="white-space: pre;">&#8288;Meta/package.rds&#8288;</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+taf.boot">taf.boot</a></code> calls <code><a href="#topic+download.github">download.github</a></code> and
<code>taf.install</code> to download and install R packages.
</p>
<p><code><a href="#topic+taf.library">taf.library</a></code> loads a package from <code style="white-space: pre;">&#8288;boot/library&#8288;</code>.
</p>
<p><code><a href="#topic+clean.library">clean.library</a></code> selectively removes packages from the local TAF
library.
</p>
<p><code><a href="utils.html#topic+install.packages">install.packages</a></code> is the underlying base function to install a
package.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Install one package
taf.install("boot/software/FLAssess_f1e5acb.tar.gz")

# Install all packages found in boot/software
taf.install()

## End(Not run)

</code></pre>

<hr>
<h2 id='taf.libPaths'>Add TAF Library Path</h2><span id='topic+taf.libPaths'></span>

<h3>Description</h3>

<p>Add TAF library to the search path for R packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taf.libPaths(remove = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="taf.libPaths_+3A_remove">remove</code></td>
<td>
<p>whether to remove TAF library from the search path, instead of
adding it.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The resulting vector of file paths.
</p>


<h3>Warning</h3>

<p>An unwanted side effect of having the TAF library as the first element in the
search path is that <code>install.packages</code> will then install packages inside
<code style="white-space: pre;">&#8288;boot/library&#8288;</code>. This is not a serious side effect, since a subsequent
call to <code>taf.boot</code> or  <code>clean.library</code> will remove packages from
the TAF library that are not declared in the &lsquo;<span class="file">SOFTWARE.bib</span>&rsquo; file.
</p>


<h3>Note</h3>

<p>Specifically, this function sets <code>"boot/library"</code> as the first element
of <code>.libPaths()</code>. This is rarely beneficial in TAF scripts, but can be
useful when using the <span class="pkg">sessioninfo</span> package, for example.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+.libPaths">.libPaths</a></code> is the underlying function to modify the search path
for R packages.
</p>
<p><code><a href="#topic+taf.library">taf.library</a></code> loads a package from <code style="white-space: pre;">&#8288;boot/library&#8288;</code>.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
taf.libPaths()
taf.libPaths(remove=TRUE)


</code></pre>

<hr>
<h2 id='taf.library'>TAF Library</h2><span id='topic+taf.library'></span>

<h3>Description</h3>

<p>Load and attach package from local TAF library.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taf.library(package, messages = FALSE, warnings = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="taf.library_+3A_package">package</code></td>
<td>
<p>name of a package found in <code style="white-space: pre;">&#8288;boot/library&#8288;</code>.</p>
</td></tr>
<tr><td><code id="taf.library_+3A_messages">messages</code></td>
<td>
<p>whether to show messages when package loads.</p>
</td></tr>
<tr><td><code id="taf.library_+3A_warnings">warnings</code></td>
<td>
<p>whether to show warnings when package loads.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The names of packages currently installed in the TAF library.
</p>


<h3>Note</h3>

<p>The purpose of the TAF library is to retain R packages that are not commonly
used (and not on CRAN), to support long-term reproducibility of TAF analyses.
</p>
<p>If a package has dependencies that are also in the TAF library, they will be
loaded in preference of any version that may be installed in the system or
user library. To force the use of a dependency from outside of the TAF
library call <code style="white-space: pre;">&#8288;library(package)&#8288;</code> prior to the call to <code style="white-space: pre;">&#8288;taf.library&#8288;</code>.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+library">library</a></code> is the underlying base function to load and attach a
package.
</p>
<p><code><a href="#topic+taf.boot">taf.boot</a></code> is the procedure to install packages into a local TAF
library, via the <code style="white-space: pre;">&#8288;SOFTWARE.bib&#8288;</code> metadata file.
</p>
<p><code><a href="#topic+detach.packages">detach.packages</a></code> detaches all packages.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Show packages in TAF library
taf.library()

# Load packages
taf.library(this)
taf.library(that)

## End(Not run)

</code></pre>

<hr>
<h2 id='taf.png'>PNG Device</h2><span id='topic+taf.png'></span><span id='topic+tafpng'></span>

<h3>Description</h3>

<p>Open PNG graphics device to export a plot into the TAF <code style="white-space: pre;">&#8288;report&#8288;</code> folder.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taf.png(filename, width = 1600, height = 1200, res = 200, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="taf.png_+3A_filename">filename</code></td>
<td>
<p>plot filename.</p>
</td></tr>
<tr><td><code id="taf.png_+3A_width">width</code></td>
<td>
<p>image width.</p>
</td></tr>
<tr><td><code id="taf.png_+3A_height">height</code></td>
<td>
<p>image height.</p>
</td></tr>
<tr><td><code id="taf.png_+3A_res">res</code></td>
<td>
<p>resolution determining the text size, line width, plot symbol
size, etc.</p>
</td></tr>
<tr><td><code id="taf.png_+3A_...">...</code></td>
<td>
<p>passed to <code>png</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>filename</code> can be passed without the preceding
<code>"report/"</code>, and without the <code>".png"</code> filename extension.
</p>
<p>Specifically, the function prepends <code>"report/"</code> to the filename if (1)
the filename does not contain a <code>"/"</code> separator, (2) the working
directory is not <code style="white-space: pre;">&#8288;report&#8288;</code>, and (3) the directory <code style="white-space: pre;">&#8288;report&#8288;</code> exists.
The function also appends <code style="white-space: pre;">&#8288;".png"&#8288;</code> to the filename if it does not
already have that filename extension.
</p>
<p>This automatic filename manipulation can be bypassed by using the <code>png</code>
function directly.
</p>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>Note</h3>

<p>A simple convenience function to shorten
</p>
<pre>png("report/plot.png", width=1600, height=1200, res=200)</pre>
<p>to
</p>
<pre>taf.png("plot")</pre>
<p>The <code>res</code> argument affects the text size, along with all other plot
elements. To change the text size of specific lattice plot elements, the
<code>zoom</code> function can be helpful.
</p>
<p>For consistent image width and text size, it can be useful to keep the
default <code>width = 1600</code> but vary the <code>height</code> to adjust the desired
aspect ratio for each plot.
</p>


<h3>See Also</h3>

<p><code><a href="grDevices.html#topic+png">png</a></code> is the underlying function used to open a PNG graphics
device.
</p>
<p><code><a href="#topic+zoom">zoom</a></code> changes text size in a lattice plot.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
taf.png("myplot")
plot(1)
dev.off()

library(lattice)
taf.png("mytrellis")
xyplot(1~1)
dev.off()

library(ggplot2)
taf.png("myggplot")
qplot(1, 1)
dev.off()

## End(Not run)

</code></pre>

<hr>
<h2 id='taf.session'>TAF Session</h2><span id='topic+taf.session'></span>

<h3>Description</h3>

<p>Show session information about loaded packages, clearly indicating which
packages were loaded from the local TAF library.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taf.session(sort = FALSE, imports = TRUE, details = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="taf.session_+3A_sort">sort</code></td>
<td>
<p>whether to sort packages by name.</p>
</td></tr>
<tr><td><code id="taf.session_+3A_imports">imports</code></td>
<td>
<p>whether to include imported packages.</p>
</td></tr>
<tr><td><code id="taf.session_+3A_details">details</code></td>
<td>
<p>whether to report more detailed session information.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List containing session information about loaded packages.
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+sessionInfo">sessionInfo</a></code> and the <span class="pkg">sessioninfo</span> package provide similar
information, but do not indicate clearly packages that were loaded from the
local TAF library.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
taf.session()
taf.session(sort=TRUE)
taf.session(imports=FALSE)
taf.session(details=TRUE)


</code></pre>

<hr>
<h2 id='taf.skeleton'>TAF Skeleton</h2><span id='topic+taf.skeleton'></span>

<h3>Description</h3>

<p>Create initial directories and R scripts for a new TAF analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taf.skeleton(path = ".", force = FALSE, pkgs = "TAF",
  model.script = "model.R")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="taf.skeleton_+3A_path">path</code></td>
<td>
<p>where to create initial directories and R scripts. The default is
the current working directory.</p>
</td></tr>
<tr><td><code id="taf.skeleton_+3A_force">force</code></td>
<td>
<p>whether to overwrite existing scripts.</p>
</td></tr>
<tr><td><code id="taf.skeleton_+3A_pkgs">pkgs</code></td>
<td>
<p>packages to load at the start of each script. The default is the
TAF package, i.e. <code>library(TAF)</code>.</p>
</td></tr>
<tr><td><code id="taf.skeleton_+3A_model.script">model.script</code></td>
<td>
<p>model script filename, either <code>model.R</code> (default) or
<code>method.R</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Full path to analysis directory.
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+package.skeleton">package.skeleton</a></code> creates an empty template for a new R package.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
taf.skeleton()

## End(Not run)

</code></pre>

<hr>
<h2 id='taf.sources'>List Sources</h2><span id='topic+taf.sources'></span>

<h3>Description</h3>

<p>List metadata entries from <code>DATA.bib</code>, <code>SOFTWARE.bib</code>, or both.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taf.sources(type)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="taf.sources_+3A_type">type</code></td>
<td>
<p>one of <code>"data"</code>, <code>"software"</code> or <code>"both"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of metadata entries.
</p>


<h3>Note</h3>

<p>The functionality is similar to <code>read.bib</code>, with the addition of a
<code>type</code> field, indicating whether an entry is <code>data</code>
<code>software</code>.
</p>
<p>This function is used internally by the <code>taf.boot</code> procedure and is
also useful when organizing a larger TAF project.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+taf.boot">taf.boot</a></code> reads and processes metadata entries.
</p>
<p><code><a href="#topic+read.bib">read.bib</a></code> is the underlying function to read metadata entries.
</p>
<p><code><a href="#topic+process.entry">process.entry</a></code> processes a single metadata entry, in the list
format returned by <code>taf.sources</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
taf.sources("data")
taf.sources("software")
taf.sources("both")

## End(Not run)

</code></pre>

<hr>
<h2 id='taf.unzip'>Unzip File</h2><span id='topic+taf.unzip'></span>

<h3>Description</h3>

<p>Extract files from a zip archive, retaining executable file permissions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taf.unzip(zipfile, files = NULL, exdir = ".", unzip = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="taf.unzip_+3A_zipfile">zipfile</code></td>
<td>
<p>zip archive filename.</p>
</td></tr>
<tr><td><code id="taf.unzip_+3A_files">files</code></td>
<td>
<p>files to extract, default is all files.</p>
</td></tr>
<tr><td><code id="taf.unzip_+3A_exdir">exdir</code></td>
<td>
<p>directory to extract to, will be created if necessary.</p>
</td></tr>
<tr><td><code id="taf.unzip_+3A_unzip">unzip</code></td>
<td>
<p>extraction method to use, see details below.</p>
</td></tr>
<tr><td><code id="taf.unzip_+3A_...">...</code></td>
<td>
<p>passed to <code><a href="utils.html#topic+unzip">unzip</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The default method <code>unzip = NULL</code> uses the external <code>unzip</code>
program in Unix-compatible operating systems, but an internal method in
Windows. For additional information, see the <code><a href="utils.html#topic+unzip">unzip</a></code> help page.
</p>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>Note</h3>

<p>One shortcoming of the base <code>unzip</code> function is that the default
<code>"internal"</code> method resets file permissions, so Linux and macOS
executables will return a <code style="white-space: pre;">&#8288;'Permission denied'&#8288;</code> error when run.
</p>
<p>This function is identical to the base <code>unzip</code> function, except the
default value <code>unzip = NULL</code> chooses an appropriate extraction method in
all operating systems, making it useful when writing platform-independent
scripts.
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+unzip">unzip</a></code> is the base function to unzip files.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
exefile &lt;- if(os.unix()) "run" else "run.exe"
taf.unzip("boot/software/archive.zip", files=exefile, exdir="model")

## End(Not run)
</code></pre>

<hr>
<h2 id='taf2html'>Convert TAF Table to HTML</h2><span id='topic+taf2html'></span>

<h3>Description</h3>

<p>Convert a TAF table to HTML code and optionally write to a file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taf2html(x, file = "", align = "", header = align,
  digits = getOption("digits"), center = "style=\"text-align:center\"",
  left = "style=\"text-align:left\"",
  right = "style=\"text-align:right\"", append = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="taf2html_+3A_x">x</code></td>
<td>
<p>a data frame in TAF format.</p>
</td></tr>
<tr><td><code id="taf2html_+3A_file">file</code></td>
<td>
<p>a filename, or special values <code>NULL</code> or <code>""</code>.</p>
</td></tr>
<tr><td><code id="taf2html_+3A_align">align</code></td>
<td>
<p>a string (or a vector of strings) specifying alignment of data
cells.</p>
</td></tr>
<tr><td><code id="taf2html_+3A_header">header</code></td>
<td>
<p>a string (or a vector strings) specifying alignment of header
cells.</p>
</td></tr>
<tr><td><code id="taf2html_+3A_digits">digits</code></td>
<td>
<p>significant digits for numeric columns.</p>
</td></tr>
<tr><td><code id="taf2html_+3A_center">center</code></td>
<td>
<p>HTML attribute to indicate center alignment.</p>
</td></tr>
<tr><td><code id="taf2html_+3A_left">left</code></td>
<td>
<p>HTML attribute to indicate left alignment.</p>
</td></tr>
<tr><td><code id="taf2html_+3A_right">right</code></td>
<td>
<p>HTML attribute to indicate right alignment.</p>
</td></tr>
<tr><td><code id="taf2html_+3A_append">append</code></td>
<td>
<p>whether to append to an existing file.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>align</code> argument can be a vector of strings to specify
column-specific alignment, for example <code>c("l","r","l","l")</code>. Only the
first letter (case-insensitive) is used, so <code>"left"</code> is equivalent to
<code>"L"</code>. An empty string (the default), or any string that does not begin
with <code>C</code>, <code>L</code>, or <code>R</code> indicates no specific alignment.
</p>
<p>The <code>header</code> argument can be used to specify an alignment for the column
names that is different from the data values. The default is to use the same
alignment as the data values.
</p>
<p>The <code>center</code>, <code>left</code>, and <code>right</code> arguments can be used to
specify the exact HTML attribute to render alignment, for users who are
familiar with cascading style sheets (CSS). For example, the long-winded
<code>style="text-align:center"</code> could be shortened to <code>class="L"</code> if a
corresponding class has been defined in CSS.
</p>
<p>Instead of using <code>file</code> to pass a filename, it can have the special
value <code>file = NULL</code> to return the HTML code as a vector of strings or
<code>file = ""</code> (the default) to show the HTML in the console.
</p>


<h3>Value</h3>

<p><code>NULL</code>, or a vector of strings if <code>file = NULL</code>.
</p>


<h3>Note</h3>

<p>The resulting HTML conforms to the HTML5 standard and aims for compact
output, omitting optional closing tags and rendering each row of data as one
row of HTML code.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+write.taf">write.taf</a></code> writes a TAF table to a file.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>taf2html(catage.taf)
taf2html(catage.taf, align=c("L","R","R","R","R"))

## Not run: 
taf2html(catage.taf, "catage.html")
taf2html(catage.taf, "catage.html", align=c("L","R","R","R","R"),
         append=TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='taf2long'>Convert TAF Table to Long Format</h2><span id='topic+taf2long'></span>

<h3>Description</h3>

<p>Convert a table from TAF format to long format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taf2long(x, names = c("Year", "Age", "Value"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="taf2long_+3A_x">x</code></td>
<td>
<p>a data frame in TAF format.</p>
</td></tr>
<tr><td><code id="taf2long_+3A_names">names</code></td>
<td>
<p>a vector of three column names for the resulting data frame.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with three columns.
</p>


<h3>Note</h3>

<p>TAF stores tables as data frames, usually with a year column as seen in stock
assessment reports. The long format is more convenient for analysis and
producing plots.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+catage.taf">catage.taf</a></code> and <code><a href="#topic+catage.long">catage.long</a></code> describe the TAF and
long formats.
</p>
<p><code><a href="#topic+long2taf">long2taf</a></code> converts a long table to TAF format.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>taf2long(catage.taf, names=c("Year","Age","Catch"))

</code></pre>

<hr>
<h2 id='taf2xtab'>Convert TAF Table to Crosstab Format</h2><span id='topic+taf2xtab'></span>

<h3>Description</h3>

<p>Convert a table from TAF format to crosstab format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taf2xtab(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="taf2xtab_+3A_x">x</code></td>
<td>
<p>a data frame in TAF format.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with years as row names.
</p>


<h3>Note</h3>

<p>TAF stores tables as data frames, usually with a year column as seen in stock
assessment reports. The crosstab format can be more convenient for analysis
and producing plots.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+catage.taf">catage.taf</a></code> and <code><a href="#topic+catage.xtab">catage.xtab</a></code> describe the TAF and
crosstab formats.
</p>
<p><code><a href="#topic+tt">tt</a></code> converts a TAF table to transposed crosstab format.
</p>
<p><code><a href="#topic+xtab2taf">xtab2taf</a></code> converts a crosstab table to TAF format.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>taf2xtab(catage.taf)

</code></pre>

<hr>
<h2 id='tt'>TAF Transpose</h2><span id='topic+tt'></span>

<h3>Description</h3>

<p>Convert a table from TAF format to transposed crosstab format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tt(x, column = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tt_+3A_x">x</code></td>
<td>
<p>a data frame in TAF format.</p>
</td></tr>
<tr><td><code id="tt_+3A_column">column</code></td>
<td>
<p>a logical indicating whether the group names should be stored
in a column called &lsquo;<span class="samp">&#8288;Age&#8288;</span>&rsquo; instead of in row names. Alternatively,
<code>column</code> can be a string supplying another name for that first
column.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with years as column names.
</p>


<h3>Note</h3>

<p>Transposing can be useful when comparing TAF tables to stock assessment
reports.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+t">t</a></code> transposes a matrix.
</p>
<p><code><a href="#topic+catage.taf">catage.taf</a></code> describes the TAF format.
</p>
<p><code><a href="#topic+taf2xtab">taf2xtab</a></code> converts a TAF table to crosstab format, without
transposing.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>taf2xtab(catage.taf)
tt(catage.taf)
tt(catage.taf, TRUE)
tt(catage.taf, "Custom")

</code></pre>

<hr>
<h2 id='write.taf'>Write TAF Table to File</h2><span id='topic+write.taf'></span>

<h3>Description</h3>

<p>Write a TAF table to a file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write.taf(x, file = NULL, dir = NULL, quote = FALSE, row.names = FALSE,
  fileEncoding = "UTF-8", underscore = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write.taf_+3A_x">x</code></td>
<td>
<p>a data frame in TAF format.</p>
</td></tr>
<tr><td><code id="write.taf_+3A_file">file</code></td>
<td>
<p>a filename.</p>
</td></tr>
<tr><td><code id="write.taf_+3A_dir">dir</code></td>
<td>
<p>an optional directory name.</p>
</td></tr>
<tr><td><code id="write.taf_+3A_quote">quote</code></td>
<td>
<p>whether to quote strings.</p>
</td></tr>
<tr><td><code id="write.taf_+3A_row.names">row.names</code></td>
<td>
<p>whether to include row names.</p>
</td></tr>
<tr><td><code id="write.taf_+3A_fileencoding">fileEncoding</code></td>
<td>
<p>character encoding for output file.</p>
</td></tr>
<tr><td><code id="write.taf_+3A_underscore">underscore</code></td>
<td>
<p>whether automatically generated filenames (when
<code>file = NULL</code>) should use underscore separators instead of dots.</p>
</td></tr>
<tr><td><code id="write.taf_+3A_...">...</code></td>
<td>
<p>passed to <code>write.csv</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Alternatively, <code>x</code> can be a list of data frames or a string vector of
object names, to write many tables in one call. The resulting files are named
automatically, similar to <code>file = NULL</code>.
</p>
<p>The default value <code>file = NULL</code> uses the name of <code>x</code> as a filename,
so a data frame called <code>survey.uk</code> will be written to a file called
&lsquo;<span class="file">survey_uk.csv</span>&rsquo; (when <code>underscore = TRUE</code>) or &lsquo;<span class="file">survey.uk.csv</span>&rsquo;
(when <code>underscore = FALSE</code>).
</p>
<p>The special value <code>file = ""</code> prints the data frame in the console,
similar to <code>write.csv</code>.
</p>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>Note</h3>

<p>This function gives a warning when column names are missing or duplicated,
unless the target directory name is <code style="white-space: pre;">&#8288;report&#8288;</code>. It also gives a warning if
the data frame has zero rows.
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+write.csv">write.csv</a></code> is the underlying function used to write a table to a
file.
</p>
<p><code><a href="#topic+read.taf">read.taf</a></code> reads a TAF table from a file into a data frame.
</p>
<p><code><a href="#topic+taf2html">taf2html</a></code> converts TAF table to HTML.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
write.taf(catage.taf, "catage.csv")
catage &lt;- read.taf("catage.csv")

write.taf(catage)
file.remove("catage.csv")

## End(Not run)

</code></pre>

<hr>
<h2 id='xtab2long'>Convert Crosstab Table to Long Format</h2><span id='topic+xtab2long'></span>

<h3>Description</h3>

<p>Convert a table from crosstab format to long format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xtab2long(x, names = c("Year", "Age", "Value"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xtab2long_+3A_x">x</code></td>
<td>
<p>a data frame in crosstab format.</p>
</td></tr>
<tr><td><code id="xtab2long_+3A_names">names</code></td>
<td>
<p>a vector of three column names for the resulting data frame.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with three columns.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+catage.xtab">catage.xtab</a></code> and <code><a href="#topic+catage.long">catage.long</a></code> describe the crosstab
and long formats.
</p>
<p><code><a href="#topic+xtab2taf">xtab2taf</a></code> and <code><a href="#topic+taf2long">taf2long</a></code> are the underlying
functions that perform the conversion.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>xtab2long(catage.xtab, names=c("Year","Age","Catch"))

</code></pre>

<hr>
<h2 id='xtab2taf'>Convert Crosstab Table to TAF Format</h2><span id='topic+xtab2taf'></span>

<h3>Description</h3>

<p>Convert a table from crosstab format to TAF format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xtab2taf(x, colname = "Year")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xtab2taf_+3A_x">x</code></td>
<td>
<p>a data frame in crosstab format.</p>
</td></tr>
<tr><td><code id="xtab2taf_+3A_colname">colname</code></td>
<td>
<p>name for first column.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame in TAF format.
</p>


<h3>Note</h3>

<p>TAF stores tables as data frames, usually with a year column as seen in stock
assessment reports. The crosstab format can be more convenient for analysis
and producing plots.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+catage.xtab">catage.xtab</a></code> and <code><a href="#topic+catage.taf">catage.taf</a></code> describe the crosstab
and TAF formats.
</p>
<p><code><a href="#topic+taf2xtab">taf2xtab</a></code> converts a TAF table to crosstab format.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>xtab2taf(catage.xtab)

</code></pre>

<hr>
<h2 id='zoom'>Zoom</h2><span id='topic+zoom'></span><span id='topic+zoom.trellis'></span>

<h3>Description</h3>

<p>Change text size in a lattice plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zoom(x, ...)

## S3 method for class 'trellis'
zoom(x, size = 1, main = 1.2 * size, lab = size,
  axis = size, strip = size, sub = 0.9 * size, legend = 0.9 * size,
  splom = 0.9 * size, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="zoom_+3A_x">x</code></td>
<td>
<p>a lattice plot of class <code>"trellis"</code>.</p>
</td></tr>
<tr><td><code id="zoom_+3A_...">...</code></td>
<td>
<p>further arguments, currently ignored.</p>
</td></tr>
<tr><td><code id="zoom_+3A_size">size</code></td>
<td>
<p>text size multiplier.</p>
</td></tr>
<tr><td><code id="zoom_+3A_main">main</code></td>
<td>
<p>size of main title (default is <code>1.2 * size</code>).</p>
</td></tr>
<tr><td><code id="zoom_+3A_lab">lab</code></td>
<td>
<p>size of axis labels (default is <code>size</code>).</p>
</td></tr>
<tr><td><code id="zoom_+3A_axis">axis</code></td>
<td>
<p>size of tick labels (default is <code>size</code>).</p>
</td></tr>
<tr><td><code id="zoom_+3A_strip">strip</code></td>
<td>
<p>size of strip labels (default is <code>size</code>).</p>
</td></tr>
<tr><td><code id="zoom_+3A_sub">sub</code></td>
<td>
<p>size of subtitle (default is <code>0.9 * size</code>).</p>
</td></tr>
<tr><td><code id="zoom_+3A_legend">legend</code></td>
<td>
<p>size of legend labels (default is <code>0.9 * size</code>).</p>
</td></tr>
<tr><td><code id="zoom_+3A_splom">splom</code></td>
<td>
<p>size of scatterplot matrix diagonal labels (default is
<code>0.9 * size</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Pass <code>NULL</code> for any argument to avoid changing the size of that text
component.
</p>
<p>The <code>legend</code> component of a lattice plot can be somewhat fickle, as the
object structure varies between plots. One solution is to pass
<code>legend = NULL</code> and tweak the legend before or after calling the
<code>zoom</code> function.
</p>


<h3>Value</h3>

<p>The same lattice object, but with altered text size.
</p>


<h3>Note</h3>

<p>The default values result in lattice plots that have similar text size as
base plots, when using <code>taf.png</code>.
</p>
<p>This function ends with a <code><a href="lattice.html#topic+print.trellis">print</a></code> call, to make
it easy to export the lattice plot to a file, without the need of an explicit
<code>print</code>.
</p>


<h3>See Also</h3>

<p><code><a href="lattice.html#topic+Lattice">Lattice</a></code> plots are created using <code><a href="lattice.html#topic+xyplot">xyplot</a></code> or related
functions.
</p>
<p><code><a href="#topic+taf.png">taf.png</a></code> opens a PNG graphics device.
</p>
<p><code><a href="#topic+TAF-package">TAF-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(lattice)

xyplot(1~1)
zoom(xyplot(1~1))
zoom(xyplot(1~1), size=1.2)
zoom(xyplot(1~1), axis=0.8)
zoom(xyplot(1~1), axis=NULL)

## Not run: 
taf.png("myplot")
plot(1)
dev.off()

taf.png("mytrellis")
xyplot(1~1)
dev.off()

taf.png("mytrellis_zoom")
zoom(xyplot(1~1))
dev.off()

## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
