<!DOCTYPE html><html><head><title>Help for package MBNMAdose</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {MBNMAdose}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#MBNMAdose-package'><p>MBNMAdose for dose-response Model-Based Network Meta-Analysis</p></a></li>
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#add_index'><p>Add arm indices and agent identifiers to a dataset</p></a></li>
<li><a href='#alog_pcfb'><p>Studies of alogliptin for lowering blood glucose concentration in patients with type II diabetes</p></a></li>
<li><a href='#calc.edx'><p>Calculates values for EDx from an Emax model, the dose at which x% of the maximal response (Emax)</p>
is reached</a></li>
<li><a href='#changepd'><p>Update model fit statistics depending on calculation for pD</p></a></li>
<li><a href='#check.network'><p>Check if all nodes in the network are connected (identical to function in <code>MBNMAtime</code>)</p></a></li>
<li><a href='#cumrank'><p>Plot cumulative ranking curves from MBNMA models</p></a></li>
<li><a href='#default.priors'><p>Sets default priors for JAGS model code</p></a></li>
<li><a href='#demax'><p>Emax dose-response function</p></a></li>
<li><a href='#devdev'><p>Dev-dev plot for comparing deviance contributions from two models</p></a></li>
<li><a href='#devplot'><p>Plot deviance contributions from an MBNMA model</p></a></li>
<li><a href='#dexp'><p>Exponential dose-response function</p></a></li>
<li><a href='#dfpoly'><p>Fractional polynomial dose-response function</p></a></li>
<li><a href='#ditp'><p>Integrated Two-Component Prediction (ITP) function</p></a></li>
<li><a href='#dloglin'><p>Log-linear (exponential) dose-response function</p></a></li>
<li><a href='#dmulti'><p>Agent-specific dose-response function</p></a></li>
<li><a href='#dnonparam'><p>Non-parameteric dose-response functions</p></a></li>
<li><a href='#dpoly'><p>Polynomial dose-response function</p></a></li>
<li><a href='#DR.comparisons'><p>Adds placebo comparisons for dose-response relationship</p></a></li>
<li><a href='#drop.comp'><p>Drop treatments from multi-arm (&gt;2) studies for node-splitting</p></a></li>
<li><a href='#drop.disconnected'><p>Drop studies that are not connected to the network reference treatment</p></a></li>
<li><a href='#dspline'><p>Spline dose-response functions</p></a></li>
<li><a href='#duser'><p>User-defined dose-response function</p></a></li>
<li><a href='#fitplot'><p>Plot fitted values from MBNMA model</p></a></li>
<li><a href='#gen.parameters.to.save'><p>Automatically generate parameters to save for a dose-response MBNMA model</p></a></li>
<li><a href='#genspline'><p>Generates spline basis matrices for fitting to dose-response function</p></a></li>
<li><a href='#get.prior'><p>Get current priors from JAGS model code</p></a></li>
<li><a href='#get.relative'><p>Calculates league table of effects between treatments in MBNMA and/or NMA models</p></a></li>
<li><a href='#getjagsdata'><p>Prepares data for JAGS</p></a></li>
<li><a href='#gout'><p>Studies of treatments for Serum Uric Acid reduction in patients with gout</p></a></li>
<li><a href='#inconsistency.loops'><p>Identify comparisons in loops that fulfill criteria for node-splitting</p></a></li>
<li><a href='#mbnma.comparisons'><p>Identify unique comparisons within a network</p></a></li>
<li><a href='#mbnma.nodesplit'><p>Node-splitting model for testing consistency at the treatment level using MBNMA</p></a></li>
<li><a href='#mbnma.run'><p>Run MBNMA dose-response models</p></a></li>
<li><a href='#mbnma.update'><p>Update MBNMA to monitor deviance nodes in the model</p></a></li>
<li><a href='#mbnma.validate.data'><p>Validates that a dataset fulfills requirements for MBNMA</p></a></li>
<li><a href='#mbnma.write'><p>Write MBNMA dose-response model JAGS code</p></a></li>
<li><a href='#nma.nodesplit'><p>Node-splitting model for testing consistency at the treatment-level</p></a></li>
<li><a href='#norm2lnorm'><p>Convert normal distribution parameters to corresponding log-normal distribution parameters</p></a></li>
<li><a href='#osteopain'><p>Studies of treatments for pain relief in patients with osteoarthritis</p></a></li>
<li><a href='#pDcalc'><p>Calculate plugin pD from a JAGS model with univariate likelihood for studies</p>
with repeated measurements</a></li>
<li><a href='#plot.mbnma'><p>Forest plot for results from dose-response MBNMA models</p></a></li>
<li><a href='#plot.mbnma.network'><p>Create an mbnma.network object</p></a></li>
<li><a href='#plot.mbnma.predict'><p>Plots predicted responses from a dose-response MBNMA model</p></a></li>
<li><a href='#plot.mbnma.rank'><p>Plot histograms of rankings from MBNMA models</p></a></li>
<li><a href='#plot.nma'><p>Run an NMA model</p></a></li>
<li><a href='#predict.mbnma'><p>Predict responses for different doses of agents in a given population based on MBNMA</p>
dose-response models</a></li>
<li><a href='#print.mbnma.network'><p>Print mbnma.network information to the console</p></a></li>
<li><a href='#print.mbnma.predict'><p>Print summary information from an mbnma.predict object</p></a></li>
<li><a href='#print.mbnma.rank'><p>Prints summary information about an mbnma.rank object</p></a></li>
<li><a href='#print.nma.nodesplit'><p>Prints summary results from an nma.nodesplit object</p></a></li>
<li><a href='#print.nodesplit'><p>Prints summary results from a nodesplit object</p></a></li>
<li><a href='#print.relative.array'><p>Print posterior medians (95% credible intervals) for table of relative effects/mean</p>
differences between treatments/classes</a></li>
<li><a href='#psoriasis100'><p>Studies of biologics for treatment of moderate-to-severe psoriasis (100% improvement)</p></a></li>
<li><a href='#psoriasis75'><p>Studies of biologics for treatment of moderate-to-severe psoriasis (&gt;=75% improvement)</p></a></li>
<li><a href='#psoriasis90'><p>Studies of biologics for treatment of moderate-to-severe psoriasis (&gt;=90% improvement)</p></a></li>
<li><a href='#rank'><p>Set rank as a method</p></a></li>
<li><a href='#rank.mbnma'><p>Rank parameter estimates</p></a></li>
<li><a href='#rank.mbnma.predict'><p>Rank predicted doses of different agents</p></a></li>
<li><a href='#rank.relative.array'><p>Rank relative effects obtained between specific doses</p></a></li>
<li><a href='#recode.agent'><p>Assigns agent or class variables numeric identifiers</p></a></li>
<li><a href='#ref.synth'><p>Synthesise single arm dose = 0 / placebo studies to estimate E0</p></a></li>
<li><a href='#rescale.link'><p>Rescale data depending on the link function provided</p></a></li>
<li><a href='#ssi_closure'><p>Studies of wound closure methods to reduce Surgical Site Infections (SSI)</p></a></li>
<li><a href='#ssri'><p>Studies of Selective Serotonin Reuptake Inhibitors (SSRIs) for major depression</p></a></li>
<li><a href='#summary.mbnma'><p>Print summary of MBNMA results to the console</p></a></li>
<li><a href='#summary.mbnma.network'><p>Print summary mbnma.network information to the console</p></a></li>
<li><a href='#summary.mbnma.predict'><p>Produces a summary data frame from an mbnma.predict object</p></a></li>
<li><a href='#summary.mbnma.rank'><p>Generates summary data frames for an mbnma.rank object</p></a></li>
<li><a href='#summary.nma.nodesplit'><p>Generates a summary data frame for nma.nodesplit objects</p></a></li>
<li><a href='#summary.nodesplit'><p>Generates a summary data frame for nodesplit objects</p></a></li>
<li><a href='#triptans'><p>Studies of triptans for headache pain relief</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Dose-Response MBNMA Models</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.2</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-08-07</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://hugaped.github.io/MBNMAdose/">https://hugaped.github.io/MBNMAdose/</a></td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hugo Pedder &lt;hugopedder@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Fits Bayesian dose-response model-based network meta-analysis (MBNMA) 
    that incorporate multiple doses within an agent by modelling different dose-response functions, as
    described by Mawdsley et al. (2016) &lt;<a href="https://doi.org/10.1002%2Fpsp4.12091">doi:10.1002/psp4.12091</a>&gt;. 
    By modelling dose-response relationships this can connect networks of evidence that might
    otherwise be disconnected, and can improve precision on treatment estimates. Several common 
    dose-response functions are provided; others may be added by the user. Various characteristics
    and assumptions can be flexibly added to the models, such as shared class effects. The consistency 
    of direct and indirect evidence in the network can be assessed using unrelated mean effects models 
    and/or by node-splitting at the treatment level.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.2)</td>
</tr>
<tr>
<td>Imports:</td>
<td>grDevices, stats, graphics, utils, scales, dplyr (&ge; 0.7.4),
R2jags (&ge; 0.5-7), rjags (&ge; 4-8), magrittr (&ge; 1.5), checkmate
(&ge; 1.8.5), Rdpack (&ge; 0.11-0), igraph (&ge; 1.1.2), reshape2 (&ge;
1.4.3)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>overlapping (&ge; 1.5.0), ggplot2 (&ge; 2.2.1), RColorBrewer (&ge;
1.1-2), mcmcplots (&ge; 0.4.3), coda (&ge; 0.19-4), testthat (&ge;
1.0.2), crayon (&ge; 1.3.4), forestplot (&ge; 1.10), ggdist (&ge;
2.4.0), zoo (&ge; 1.8-8), lspline (&ge; 1.0-0), netmeta, knitr,
rmarkdown</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>JAGS (&gt;= 4.3.0)
(https://mcmc-jags.sourceforge.net/)</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>Rdpack</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-08 07:27:38 UTC; hp17602</td>
</tr>
<tr>
<td>Author:</td>
<td>Hugo Pedder <a href="https://orcid.org/0000-0002-7813-3749"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Adil Karim [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-08 13:00:19 UTC</td>
</tr>
</table>
<hr>
<h2 id='MBNMAdose-package'>MBNMAdose for dose-response Model-Based Network Meta-Analysis</h2><span id='topic+MBNMAdose'></span><span id='topic+MBNMAdose-package'></span>

<h3>Description</h3>

<p><code>MBNMAdose</code> provides a collection of useful commands that allow users to run dose-response
Model-Based Network Meta-Analyses (MBNMA).
</p>


<h3>Introduction</h3>

<p><code>MBNMAdose</code> allows meta-analysis of studies that compare multiple doses of different agents in a way that can
account for the dose-response relationship.
</p>
<p>Whilst making use of all the available evidence in a statistically robust and biologically plausible framework,
this also can help connect networks at the agent level that may otherwise be disconnected at the dose/treatment
level, and help improve precision of estimates (Pedder et al. 2021). The modelling framework is based on synthesising relative effects
which avoids the necessity to adjust for baseline predictors, thereby making fewer assumptions than in typical
Model-Based Meta-Analysis.
</p>
<p>By modelling the dose-response, MBNMA avoids heterogeneity and inconsistency that can arise from &quot;lumping&quot; different
doses together (a technique sometimes done in Network Meta-Analysis). All models and analyses are implemented
in a Bayesian framework, following an extension of the standard NMA methodology presented by
Lu and Ades (2004) and are run in  (). For full details of
dose-response MBNMA methodology see Mawdsley et al. (2016). Within this package we
refer to a <strong>treatment</strong> as a specific <strong>dose</strong> or a specific <strong>agent</strong>.
</p>


<h3>Workflow</h3>

<p>Functions within <code>MBNMAdose</code> follow a clear pattern of use:
</p>

<ol>
<li><p> Load your data into the correct format using <code>mbnma.network()</code>
</p>
</li>
<li><p> Analyse your data using <code>mbnma.run()</code> with a wide range of dose-response functions
</p>
</li>
<li><p> Examine model results using forest plots and treatment rankings
</p>
</li>
<li><p> Check model fit and test for consistency using functions like <code>mbnma.nodesplit()</code>
</p>
</li>
<li><p> Use your model to predict responses using <code>predict()</code>
</p>
</li></ol>

<p>At each of these stages there are a number of informative plots that can be generated to help understand
the data and to make decisions regarding model fitting.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Hugo Pedder <a href="mailto:hugopedder@gmail.com">hugopedder@gmail.com</a> (<a href="https://orcid.org/0000-0002-7813-3749">ORCID</a>)
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Adil Karim [contributor]
</p>
</li></ul>



<h3>References</h3>

<p>(2017).
<a href="https://mcmc-jags.sourceforge.io/">https://mcmc-jags.sourceforge.io/</a>.<br /><br /> Lu G, Ades AE (2004).
&ldquo;Combination of direct and indirect evidence in mixed treatment comparisons.&rdquo;
<em>Stat Med</em>, <b>23</b>(20), 3105-24.
ISSN 0277-6715 (Print) 0277-6715 (Linking), <a href="https://doi.org/10.1002/sim.1875">doi:10.1002/sim.1875</a>, <a href="https://pubmed.ncbi.nlm.nih.gov/15449338/">https://pubmed.ncbi.nlm.nih.gov/15449338/</a>.<br /><br /> Mawdsley D, Bennetts M, Dias S, Boucher M, Welton NJ (2016).
&ldquo;Model-Based Network Meta-Analysis: A Framework for Evidence Synthesis of Clinical Trial Data.&rdquo;
<em>CPT Pharmacometrics Syst Pharmacol</em>, <b>5</b>(8), 393-401.
ISSN 2163-8306 (Electronic) 2163-8306 (Linking), <a href="https://doi.org/10.1002/psp4.12091">doi:10.1002/psp4.12091</a>, <a href="https://pubmed.ncbi.nlm.nih.gov/27479782/">https://pubmed.ncbi.nlm.nih.gov/27479782/</a>.<br /><br /> Pedder H, Dias S, Bennetts M, Boucher M, Welton NJ (2021).
&ldquo;Joining the dots: Linking disconnected networks of evidence using dose-response Model-Based Network Meta-Analysis.&rdquo;
<em>Medical Decision Making</em>, <b>41</b>(2), 194-208.
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://hugaped.github.io/MBNMAdose/">https://hugaped.github.io/MBNMAdose/</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># Generate an "mbnma.network" object that stores data in the correct format
network &lt;- mbnma.network(triptans)

# Generate a network plot at the dose/treatment level
plot(network, level="treatment")

# Generate a network plot at the agent level
plot(network, level="agent", remove.loops=TRUE)


# Perform "split" NMA to examine dose-response relationship
nma &lt;- nma.run(network)
plot(nma)

# Analyse data using mbnma.run() with an Emax dose-response function
# and common treatment effects
result &lt;- mbnma.run(network, fun=demax(),
  method="common")

# Generate forest plots for model results
plot(result)

# Rank results and plot rankograms
ranks &lt;- rank(result)
plot(ranks, params="emax")

# Predict responses
pred &lt;- predict(result, E0=0.2)

# Plot predicted response with "split" NMA results displayed
plot(pred, overlay.split=TRUE)


</code></pre>

<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='add_index'>Add arm indices and agent identifiers to a dataset</h2><span id='topic+add_index'></span>

<h3>Description</h3>

<p>Adds arm indices (<code>arms</code>, <code>narms</code>) to a dataset and adds numeric identifiers for
agent and class (if included in the data).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_index(data.ab, agents = NULL, treatments = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_index_+3A_data.ab">data.ab</code></td>
<td>
<p>A data frame of arm-level data in &quot;long&quot; format containing the columns:
</p>

<ul>
<li> <p><code>studyID</code> Study identifiers
</p>
</li>
<li> <p><code>dose</code> Numeric data indicating the dose (must take positive values)
</p>
</li>
<li> <p><code>agent</code> Agent identifiers (can be numeric, factor or character)
</p>
</li>
<li> <p><code>y</code> Numeric data indicating the aggregate response for a continuous outcome. Required for
continuous data.
</p>
</li>
<li> <p><code>se</code> Numeric data indicating the standard error for a given observation. Required for
continuous data.
</p>
</li>
<li> <p><code>r</code> Numeric data indicating the number of responders within a study arm. Required for
binomial or poisson data.
</p>
</li>
<li> <p><code>n</code> Numeric data indicating the total number of participants within a study arm. Required for
binomial data or when modelling Standardised Mean Differences
</p>
</li>
<li> <p><code>E</code> Numeric data indicating the total exposure time for participants within a study arm. Required
for poisson data.
</p>
</li>
<li> <p><code>class</code> An optional column indicating a particular class code. Agents with the same identifier
must also have the same class code.
</p>
</li>
<li> <p><code>standsd</code> An optional column of numeric data indicating reference SDs used to standardise
treatment effects when modelling using Standardised Mean Differences (SMD).
</p>
</li></ul>
</td></tr>
<tr><td><code id="add_index_+3A_agents">agents</code></td>
<td>
<p>A character string of agent names used to force a particular agent ordering.
Default is <code>NULL</code>, which automatically orders <code>Placebo</code> (dose=0) as agent <code>1</code> and then
subsequent agents by the order given in <code>data.ab</code></p>
</td></tr>
<tr><td><code id="add_index_+3A_treatments">treatments</code></td>
<td>
<p>A character string of treatment names used to force a particular treatment ordering.
Default is <code>NULL</code>, which automatically orders <code>Placebo</code> (dose=0) as treatment <code>1</code> and then
subsequent treatments by the order of agents and doses (smallest to highest) given in <code>data.ab</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame similar to <code>data.ab</code> but with additional columns:
</p>

<ul>
<li> <p><code>arm</code> Arm identifiers coded for each study
</p>
</li>
<li> <p><code>narm</code> The total number of arms in each study
</p>
</li></ul>

<p>If <code>agent</code> or <code>class</code> are non-numeric or non-sequential (i.e. with missing numeric codes),
agents/classes in the returned data frame will be numbered and recoded to enforce sequential
numbering (a warning will be shown stating this).
</p>

<hr>
<h2 id='alog_pcfb'>Studies of alogliptin for lowering blood glucose concentration in patients with type II diabetes</h2><span id='topic+alog_pcfb'></span>

<h3>Description</h3>

<p>A dataset from a systematic review of Randomised-Controlled Trials (RCTs) comparing different doses of
alogliptin with placebo (Langford et al. 2016). The systematic review was simply performed and was intended to
provide data to illustrate a statistical methodology rather than for clinical inference. Alogliptin is
a treatment aimed at reducing blood glucose concentration in type II diabetes. The outcome is continuous,
and aggregate data responses correspond to the mean change in HbA1c from baseline to follow-up in studies
of at least 12 weeks follow-up. The dataset includes 14 Randomised-Controlled Trials (RCTs), comparing 5
different doses of alogliptin with placebo, leading to 6 different treatments (combination of dose and agent)
within the network.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>alog_pcfb
</code></pre>


<h3>Format</h3>

<p>A data frame in long format (one row per arm and study), with 46 rows and 6 variables:
</p>

<ul>
<li> <p><code>studyID</code> Study identifiers
</p>
</li>
<li> <p><code>agent</code> Character data indicating the agent to which participants were randomised
</p>
</li>
<li> <p><code>dose</code> Numeric data indicating the standardised dose received
</p>
</li>
<li> <p><code>y</code> Numeric data indicating the mean change from baseline in blood glucose concentration (mg/dL) in a study arm
</p>
</li>
<li> <p><code>se</code> Numeric data indicating the standard error for the mean change from baseline in blood glucose concentration (mg/dL) in a study arm
</p>
</li>
<li> <p><code>n</code> Numeric data indicating the number of participants randomised
</p>
</li></ul>



<h3>Details</h3>

<p><code>alog_pcfb</code> is a data frame in long format (one row per arm and study), with the variables <code>studyID</code>, <code>agent</code>, <code>dose</code>, <code>y</code>, <code>se</code>, and <code>N</code>.
</p>


<h3>References</h3>

<p>Langford O, Aronson JK, van Valkenhoef G, Stevens RJ (2016).
&ldquo;Methods for meta-analysis of pharmacodynamic dose-response data with application to multi-arm studies of alogliptin.&rdquo;
<em>Stat Methods Med Res</em>.
ISSN 1477-0334 (Electronic) 0962-2802 (Linking), <a href="https://doi.org/10.1177/0962280216637093">doi:10.1177/0962280216637093</a>.
</p>

<hr>
<h2 id='calc.edx'>Calculates values for EDx from an Emax model, the dose at which x% of the maximal response (Emax)
is reached</h2><span id='topic+calc.edx'></span>

<h3>Description</h3>

<p>Calculates values for EDx from an Emax model, the dose at which x% of the maximal response (Emax)
is reached
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc.edx(mbnma, x = 50)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calc.edx_+3A_mbnma">mbnma</code></td>
<td>
<p>An S3 object of class <code>"mbnma"</code> generated by running
a dose-response MBNMA model</p>
</td></tr>
<tr><td><code id="calc.edx_+3A_x">x</code></td>
<td>
<p>A numeric value between 0 and 100 for the dose at which x% of the maximal response (Emax)
should be calculated</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of posterior EDx summary values for each agent
</p>

<hr>
<h2 id='changepd'>Update model fit statistics depending on calculation for pD</h2><span id='topic+changepd'></span>

<h3>Description</h3>

<p>Update model fit statistics depending on calculation for pD
</p>


<h3>Usage</h3>

<pre><code class='language-R'>changepd(model, jagsdata = NULL, pd = "pv", likelihood = NULL, type = "dose")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="changepd_+3A_model">model</code></td>
<td>
<p>A model object of class <code>"rjags"</code></p>
</td></tr>
<tr><td><code id="changepd_+3A_jagsdata">jagsdata</code></td>
<td>
<p>A list object containing data used to estimate <code>model</code></p>
</td></tr>
<tr><td><code id="changepd_+3A_pd">pd</code></td>
<td>
<p>Can take either:
</p>

<ul>
<li> <p><code>pv</code> only pV will be reported (as automatically outputted by <code>R2jags</code>).
</p>
</li>
<li> <p><code>plugin</code> calculates pD by the plug-in
method (Spiegelhalter et al. 2002). It is faster, but may output negative
non-sensical values, due to skewed deviances that can arise with non-linear models.
</p>
</li>
<li> <p><code>pd.kl</code> calculates pD by the Kullback-Leibler divergence (Plummer 2008). This
will require running the model for additional iterations but is a more robust calculation for the effective
number of parameters in non-linear models.
</p>
</li>
<li> <p><code>popt</code> calculates pD using an optimism adjustment which allows for calculation
of the penalized expected deviance (Plummer 2008).
</p>
</li></ul>
</td></tr>
<tr><td><code id="changepd_+3A_likelihood">likelihood</code></td>
<td>
<p>A string indicating the likelihood to use in the model. Can take either <code>"binomial"</code>,
<code>"normal"</code> or <code>"poisson"</code>. If left as <code>NULL</code> the likelihood will be inferred from the data.</p>
</td></tr>
<tr><td><code id="changepd_+3A_type">type</code></td>
<td>
<p>Can take either <code>"dose"</code> for a dose-response MBNMA or <code>"time"</code> for a
time-course MBNMA (this accounts for multiple observations within an arm)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing <code>pd</code> (effective number of parameters calculated using the method
specified in arguments), <code>deviance</code> (the posterior median of the total residual deviance)
and <code>dic</code> (the model DIC)
</p>

<hr>
<h2 id='check.network'>Check if all nodes in the network are connected (identical to function in <code>MBNMAtime</code>)</h2><span id='topic+check.network'></span>

<h3>Description</h3>

<p>Check if all nodes in the network are connected (identical to function in <code>MBNMAtime</code>)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check.network(g, reference = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check.network_+3A_g">g</code></td>
<td>
<p>An network plot of <code>class("igraph")</code></p>
</td></tr>
<tr><td><code id="check.network_+3A_reference">reference</code></td>
<td>
<p>A numeric value indicating which treatment code to use as the reference treatment for
testing that all other treatments connect to it</p>
</td></tr>
</table>

<hr>
<h2 id='cumrank'>Plot cumulative ranking curves from MBNMA models</h2><span id='topic+cumrank'></span>

<h3>Description</h3>

<p>Plot cumulative ranking curves from MBNMA models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cumrank(x, params = NULL, sucra = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cumrank_+3A_x">x</code></td>
<td>
<p>An object of class <code>"mbnma.rank"</code> generated by <code>rank.mbnma()</code></p>
</td></tr>
<tr><td><code id="cumrank_+3A_params">params</code></td>
<td>
<p>A character vector of named parameters in the model that vary by either agent
or class (depending on the value assigned to <code>level</code>). If left as <code>NULL</code> (the default), then
ranking will be calculated for all available parameters that vary by agent/class.</p>
</td></tr>
<tr><td><code id="cumrank_+3A_sucra">sucra</code></td>
<td>
<p>A logical object to indicate whether Surface Under Cumulative Ranking Curve (SUCRA)
values should be calculated and returned as a data frame. Areas calculated
using trapezoid approach.</p>
</td></tr>
<tr><td><code id="cumrank_+3A_...">...</code></td>
<td>
<p>Arguments to be sent to <code>ggplot::geom_line()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Line plots showing the cumulative ranking probabilities for each agent/class and
dose-response parameter in <code>x</code>. The object returned is a list which contains the plot
(an object of <code style="white-space: pre;">&#8288;class(c("gg", "ggplot")&#8288;</code>) and a data frame of SUCRA values
if <code>sucra = TRUE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)

# Estimate rankings  from an Emax dose-response MBNMA
emax &lt;- mbnma.run(network, fun=demax(), method="random")
ranks &lt;- rank(emax)

# Plot cumulative rankings for both dose-response parameters simultaneously
# Note that SUCRA values are also returned
cumrank(ranks)

</code></pre>

<hr>
<h2 id='default.priors'>Sets default priors for JAGS model code</h2><span id='topic+default.priors'></span>

<h3>Description</h3>

<p>This function creates JAGS code snippets for default MBNMA model priors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default.priors(
  fun = dloglin(),
  UME = FALSE,
  regress.mat = NULL,
  regress.effect = "common",
  om = list(rel = 5, abs = 10)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="default.priors_+3A_fun">fun</code></td>
<td>
<p>An object of <code>class("dosefun")</code> that specifies a functional form to be assigned to the
dose-response. See Details.</p>
</td></tr>
<tr><td><code id="default.priors_+3A_ume">UME</code></td>
<td>
<p>A boolean object to indicate whether to fit an Unrelated Mean Effects model
that does not assume consistency and so can be used to test if the consistency
assumption is valid.</p>
</td></tr>
<tr><td><code id="default.priors_+3A_regress.mat">regress.mat</code></td>
<td>
<p>A Nstudy x Ncovariate design matrix of meta-regression covariates</p>
</td></tr>
<tr><td><code id="default.priors_+3A_regress.effect">regress.effect</code></td>
<td>
<p>Indicates whether effect modification should be assumed to be
<code>"common"</code> (assumed to be equal versus Placebo throughout the network),
<code>"random"</code> (assumed to be exchangeable versus Placebo throughout the network),
<code>"agent"</code> (assumed to be equal versus Placebo within each agent), or
<code>"class"</code> (assumed to be equal versus Placebo within each class).</p>
</td></tr>
<tr><td><code id="default.priors_+3A_om">om</code></td>
<td>
<p>a list with two elements that report the maximum relative (<code>"rel"</code>) and maximum absolute (<code>"abs"</code>) efficacies
on the link scale.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list, each element of which is a named JAGS snippet
corresponding to a prior in the MBNMA JAGS code.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
default.priors(fun=demax())


</code></pre>

<hr>
<h2 id='demax'>Emax dose-response function</h2><span id='topic+demax'></span>

<h3>Description</h3>

<p>Emax dose-response function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>demax(emax = "rel", ed50 = "rel", hill = NULL, p.expon = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="demax_+3A_emax">emax</code></td>
<td>
<p>Pooling for Emax  parameter. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="demax_+3A_ed50">ed50</code></td>
<td>
<p>Pooling for ED50 parameter. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="demax_+3A_hill">hill</code></td>
<td>
<p>Pooling for Hill parameter. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="demax_+3A_p.expon">p.expon</code></td>
<td>
<p>A logical object to indicate whether <code>ed50</code> and <code>hill</code> parameters should be
expressed within the dose-response function on an exponential scale</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Emax represents the maximum response.
exp(ED50) represents the dose at which 50% of the maximum response is achieved.
exp(Hill) is the Hill parameter, which allows for a sigmoidal function.
</p>
<p>Without Hill parameter:
</p>
<p style="text-align: center;"><code class="reqn">\frac{E_{max}\times{x}}{ET_{50}+x}</code>
</p>

<p>With Hill parameter:
</p>
<p style="text-align: center;"><code class="reqn">\frac{E_{max}\times{x^{hill}}}{ET_{50}\times{hill}}+x^{hill}</code>
</p>



<h3>Value</h3>

<p>An object of <code>class("dosefun")</code>
</p>


<h3>Dose-response parameters</h3>


<table>
<tr>
 <td style="text-align: left;">
   <strong>Argument</strong> </td><td style="text-align: left;"> <strong>Model specification</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"rel"</code> </td><td style="text-align: left;"> Implies that <em>relative</em> effects should be pooled for this dose-response parameter separately for each agent in the network. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"common"</code> </td><td style="text-align: left;"> Implies that all agents share the same common effect for this dose-response parameter. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"random"</code> </td><td style="text-align: left;"> Implies that all agents share a similar (exchangeable) effect for this dose-response parameter. This approach allows for modelling of variability between agents. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>numeric()</code> </td><td style="text-align: left;"> Assigned a numeric value, indicating that this dose-response parameter should not be estimated from the data but should be assigned the numeric value determined by the user. This can be useful for fixing specific dose-response parameters (e.g. Hill parameters in Emax functions) to a single value. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>When relative effects are modelled on more than one dose-response parameter,
correlation between them is automatically estimated using a vague inverse-Wishart prior.
This prior can be made slightly more informative by specifying the scale matrix <code>omega</code>
and by changing the degrees of freedom of the inverse-Wishart prior
using the <code>priors</code> argument in <code>mbnma.run()</code>.
</p>


<h3>References</h3>

<p>There are no references for Rd macro <code style="white-space: pre;">&#8288;\insertAllCites&#8288;</code> on this help page.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Model without a Hill parameter
demax(emax="rel", ed50="common")

# Model including a Hill parameter and defaults for Emax and ED50 parameters
demax(hill="common")

</code></pre>

<hr>
<h2 id='devdev'>Dev-dev plot for comparing deviance contributions from two models</h2><span id='topic+devdev'></span>

<h3>Description</h3>

<p>Plots the deviances of two model types for comparison. Often used to assess
consistency by comparing consistency (NMA or MBNMA) and unrelated mean effects (UME)
models (see Pedder et al. (2021)). Models must be run
on the <em>same set of data</em> or the deviance comparisons will not be valid.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>devdev(mod1, mod2, dev.type = "resdev", n.iter = 2000, n.thin = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="devdev_+3A_mod1">mod1</code></td>
<td>
<p>First model for which to plot deviance contributions</p>
</td></tr>
<tr><td><code id="devdev_+3A_mod2">mod2</code></td>
<td>
<p>Second model for which to plot deviance contributions</p>
</td></tr>
<tr><td><code id="devdev_+3A_dev.type">dev.type</code></td>
<td>
<p><em>STILL IN DEVELOPMENT FOR MBNMAdose!</em> Deviances to plot - can be either residual
deviances (<code>"resdev"</code>, the default) or deviances (<code>"dev"</code>)</p>
</td></tr>
<tr><td><code id="devdev_+3A_n.iter">n.iter</code></td>
<td>
<p>number of total iterations per chain (including burn in;
default: 2000)</p>
</td></tr>
<tr><td><code id="devdev_+3A_n.thin">n.thin</code></td>
<td>
<p>thinning rate. Must be a positive integer.  Set
<code>n.thin</code> &gt; 1 to save memory and computation time if
<code>n.iter</code> is large.  Default is <code>max(1, floor(n.chains *
    (n.iter-n.burnin) / 1000))</code> which will only thin if there are at
least 2000 simulations.</p>
</td></tr>
<tr><td><code id="devdev_+3A_...">...</code></td>
<td>
<p>Arguments to be sent to <code>ggplot2::geom_point()</code> or <code>ggplot2::geom_boxplot</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)

# Run an poorly fitting linear dose-response
lin &lt;- mbnma.run(network, fun=dpoly(degree=1))

# Run a better fitting Emax dose-response
emax &lt;- mbnma.run(network, fun=demax())

# Run a standard NMA with unrelated mean effects (UME)
ume &lt;- nma.run(network, UME=TRUE)

# Compare residual deviance contributions from linear and Emax
devdev(lin, emax) # Suggests model fit is very different

# Compare deviance contributions from Emax and UME
devdev(emax, ume) # Suggests model fit is similar



</code></pre>

<hr>
<h2 id='devplot'>Plot deviance contributions from an MBNMA model</h2><span id='topic+devplot'></span>

<h3>Description</h3>

<p>Plot deviance contributions from an MBNMA model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>devplot(
  mbnma,
  plot.type = "box",
  facet = TRUE,
  dev.type = "resdev",
  n.iter = mbnma$BUGSoutput$n.iter/2,
  n.thin = mbnma$BUGSoutput$n.thin,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="devplot_+3A_mbnma">mbnma</code></td>
<td>
<p>An S3 object of class <code>"mbnma"</code> generated by running
a dose-response MBNMA model</p>
</td></tr>
<tr><td><code id="devplot_+3A_plot.type">plot.type</code></td>
<td>
<p>Deviances can be plotted either as scatter points (<code>"scatter"</code>)
or as boxplots (<code>"box"</code>)</p>
</td></tr>
<tr><td><code id="devplot_+3A_facet">facet</code></td>
<td>
<p>A boolean object that indicates whether or not to facet (by agent for <code>MBNMAdose</code>
and by treatment for <code>MBNMAtime</code>)</p>
</td></tr>
<tr><td><code id="devplot_+3A_dev.type">dev.type</code></td>
<td>
<p><em>STILL IN DEVELOPMENT FOR MBNMAdose!</em> Deviances to plot - can be either residual
deviances (<code>"resdev"</code>, the default) or deviances (<code>"dev"</code>)</p>
</td></tr>
<tr><td><code id="devplot_+3A_n.iter">n.iter</code></td>
<td>
<p>number of total iterations per chain (including burn in;
default: 2000)</p>
</td></tr>
<tr><td><code id="devplot_+3A_n.thin">n.thin</code></td>
<td>
<p>thinning rate. Must be a positive integer.  Set
<code>n.thin</code> &gt; 1 to save memory and computation time if
<code>n.iter</code> is large.  Default is <code>max(1, floor(n.chains *
    (n.iter-n.burnin) / 1000))</code> which will only thin if there are at
least 2000 simulations.</p>
</td></tr>
<tr><td><code id="devplot_+3A_...">...</code></td>
<td>
<p>Arguments to be sent to <code>ggplot2::geom_point()</code> or <code>ggplot2::geom_boxplot</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Deviances should only be plotted for models that have converged successfully. If deviance
contributions have not been monitored in <code>mbnma$parameters.to.save</code> then additional
iterations will have to be run to get results for these.
</p>
<p>For <code>MBNMAtime</code>, deviance contributions cannot be calculated for models with a multivariate likelihood (i.e.
those that account for correlation between observations) because the covariance matrix in these
models is treated as unknown (if <code>rho = "estimate"</code>) and deviance contributions will be correlated.
</p>


<h3>Value</h3>

<p>Generates a plot of deviance contributions and returns a list containing the
plot (as an object of <code>class(c("gg", "ggplot"))</code>), and a data.frame of posterior mean
deviance/residual deviance contributions for each observation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)

# Run an Emax dose-response MBNMA and predict responses
emax &lt;- mbnma.run(network, fun=demax(), method="random")

# Plot deviances
devplot(emax)

# Plot deviances using boxplots
devplot(emax, plot.type="box")

# Plot deviances on a single scatter plot (not facetted by agent)
devplot(emax, facet=FALSE, plot.type="scatter")

# A data frame of deviance contributions can be obtained from the object
#returned by `devplot`
devs &lt;- devplot(emax)
head(devs$dev.data)

# Other deviance contributions not currently implemented but in future
#it will be possible to plot them like so
#devplot(emax, dev.type="dev")


</code></pre>

<hr>
<h2 id='dexp'>Exponential dose-response function</h2><span id='topic+dexp'></span>

<h3>Description</h3>

<p>Similar parameterisation to the Emax model but with non-asymptotic maximal effect (Emax). Can fit
a 1-parameter (Emax only) or 2-parameter model (includes onset parameter that controls the curvature of
the dose-response relationship)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dexp(emax = "rel", onset = NULL, p.expon = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dexp_+3A_emax">emax</code></td>
<td>
<p>Pooling for Emax  parameter. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="dexp_+3A_onset">onset</code></td>
<td>
<p>Pooling for onset parameter. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="dexp_+3A_p.expon">p.expon</code></td>
<td>
<p>A logical object to indicate whether <code>ed50</code> and <code>hill</code> parameters should be
expressed within the dose-response function on an exponential scale</p>
</td></tr>
</table>


<h3>Details</h3>

<p>1-parameter model:
<code class="reqn">emax\times{(1-exp(-x))}</code>
</p>
<p>2-parameter model:
<code class="reqn">emax\times{(1-exp(onset*-x))}</code>
</p>
<p>where emax is the maximum efficacy of an agent and rate is the speed
</p>
<p>Dose-response parameter arguments:</p>

<table>
<tr>
 <td style="text-align: left;">
   <strong>Argument</strong> </td><td style="text-align: left;"> <strong>Model specification</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"rel"</code> </td><td style="text-align: left;"> Implies that <em>relative</em> effects should be pooled for this dose-response parameter separately for each agent in the network. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"common"</code> </td><td style="text-align: left;"> Implies that all agents share the same common effect for this dose-response parameter. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"random"</code> </td><td style="text-align: left;"> Implies that all agents share a similar (exchangeable) effect for this dose-response parameter. This approach allows for modelling of variability between agents. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>numeric()</code> </td><td style="text-align: left;"> Assigned a numeric value, indicating that this dose-response parameter should not be estimated from the data but should be assigned the numeric value determined by the user. This can be useful for fixing specific dose-response parameters (e.g. Hill parameters in Emax functions) to a single value. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Value</h3>

<p>An object of <code>class("dosefun")</code>
</p>


<h3>References</h3>

<p>There are no references for Rd macro <code style="white-space: pre;">&#8288;\insertAllCites&#8288;</code> on this help page.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Single parameter exponential function is default
dexp()

# Two parameter exponential function
dexp(onset="rel")

</code></pre>

<hr>
<h2 id='dfpoly'>Fractional polynomial dose-response function</h2><span id='topic+dfpoly'></span>

<h3>Description</h3>

<p>Fractional polynomial dose-response function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dfpoly(degree = 1, beta.1 = "rel", beta.2 = "rel", power.1 = 0, power.2 = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dfpoly_+3A_degree">degree</code></td>
<td>
<p>The degree of the fractional polynomial as defined in  Royston and Altman (1994)</p>
</td></tr>
<tr><td><code id="dfpoly_+3A_beta.1">beta.1</code></td>
<td>
<p>Pooling for the 1st fractional polynomial coefficient. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="dfpoly_+3A_beta.2">beta.2</code></td>
<td>
<p>Pooling for the 2nd fractional polynomial coefficient. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="dfpoly_+3A_power.1">power.1</code></td>
<td>
<p>Value for the 1st fractional polynomial power (<code class="reqn">\gamma_1</code>). Must take any numeric value in the set <code style="white-space: pre;">&#8288;-2, -1, -0.5, 0, 0.5, 1, 2, 3&#8288;</code>.</p>
</td></tr>
<tr><td><code id="dfpoly_+3A_power.2">power.2</code></td>
<td>
<p>Value for the 2nd fractional polynomial power (<code class="reqn">\gamma_2</code>). Must take any numeric value in the set <code style="white-space: pre;">&#8288;-2, -1, -0.5, 0, 0.5, 1, 2, 3&#8288;</code>.</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li> <p><code class="reqn">\beta_1</code> represents the 1st coefficient.
</p>
</li>
<li> <p><code class="reqn">\beta_2</code> represents the 2nd coefficient.
</p>
</li>
<li> <p><code class="reqn">\gamma_1</code> represents the 1st fractional polynomial power
</p>
</li>
<li> <p><code class="reqn">\gamma_2</code> represents the 2nd fractional polynomial power
</p>
</li></ul>

<p>For a polynomial of <code>degree=1</code>:
</p>
<p style="text-align: center;"><code class="reqn">{\beta_1}x^{\gamma_1}</code>
</p>

<p>For a polynomial of <code>degree=2</code>:
</p>
<p style="text-align: center;"><code class="reqn">{\beta_1}x^{\gamma_1}+{\beta_2}x^{\gamma_2}</code>
</p>

<p><code class="reqn">x^{\gamma}</code> is a regular power except where <code class="reqn">\gamma=0</code>, where <code class="reqn">x^{(0)}=ln(x)</code>.
If a fractional polynomial power <code class="reqn">\gamma</code> repeats within the function it is multiplied by another <code class="reqn">ln(x)</code>.
</p>


<h3>Value</h3>

<p>An object of <code>class("dosefun")</code>
</p>


<h3>Dose-response parameters</h3>


<table>
<tr>
 <td style="text-align: left;">
   <strong>Argument</strong> </td><td style="text-align: left;"> <strong>Model specification</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"rel"</code> </td><td style="text-align: left;"> Implies that <em>relative</em> effects should be pooled for this dose-response parameter separately for each agent in the network. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"common"</code> </td><td style="text-align: left;"> Implies that all agents share the same common effect for this dose-response parameter. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"random"</code> </td><td style="text-align: left;"> Implies that all agents share a similar (exchangeable) effect for this dose-response parameter. This approach allows for modelling of variability between agents. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>numeric()</code> </td><td style="text-align: left;"> Assigned a numeric value, indicating that this dose-response parameter should not be estimated from the data but should be assigned the numeric value determined by the user. This can be useful for fixing specific dose-response parameters (e.g. Hill parameters in Emax functions) to a single value. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>When relative effects are modelled on more than one dose-response parameter,
correlation between them is automatically estimated using a vague inverse-Wishart prior.
This prior can be made slightly more informative by specifying the scale matrix <code>omega</code>
and by changing the degrees of freedom of the inverse-Wishart prior
using the <code>priors</code> argument in <code>mbnma.run()</code>.
</p>


<h3>References</h3>

<p>Royston P, Altman D (1994).
&ldquo;Regression Using Fractional Polynomials of Continuous Covariates: Parsimonious Parametric Modelling.&rdquo;
<em>Journal of the Royal Statistical Society: Series C</em>, <b>43</b>(3), 429-467.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># 1st order fractional polynomial a value of 0.5 for the power
dfpoly(beta.1="rel", power.1=0.5)

# 2nd order fractional polynomial with relative effects for coefficients
# and a value of -0.5 and 2 for the 1st and 2nd powers respectively
dfpoly(degree=2, beta.1="rel", beta.2="rel",
  power.1=-0.5, power.2=2)

</code></pre>

<hr>
<h2 id='ditp'>Integrated Two-Component Prediction (ITP) function</h2><span id='topic+ditp'></span>

<h3>Description</h3>

<p>Similar parameterisation to the Emax model but with non-asymptotic maximal effect (Emax). Proposed
by proposed by Fu and Manner (2010)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ditp(emax = "rel", rate = "rel", p.expon = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ditp_+3A_emax">emax</code></td>
<td>
<p>Pooling for Emax  parameter. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="ditp_+3A_rate">rate</code></td>
<td>
<p>Pooling for Rate parameter. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="ditp_+3A_p.expon">p.expon</code></td>
<td>
<p>A logical object to indicate whether <code>ed50</code> and <code>hill</code> parameters should be
expressed within the dose-response function on an exponential scale</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Emax represents the maximum response.
Rate represents the rate at which a change in the dose of the drug leads to
a change in the effect
</p>
<p style="text-align: center;"><code class="reqn">{E_{max}}\times\frac{(1-exp(-{rate}\times{x}))}{(1-exp(-{rate}\times{max(x)}))}</code>
</p>



<h3>Value</h3>

<p>An object of <code>class("dosefun")</code>
</p>


<h3>Dose-response parameters</h3>


<table>
<tr>
 <td style="text-align: left;">
   <strong>Argument</strong> </td><td style="text-align: left;"> <strong>Model specification</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"rel"</code> </td><td style="text-align: left;"> Implies that <em>relative</em> effects should be pooled for this dose-response parameter separately for each agent in the network. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"common"</code> </td><td style="text-align: left;"> Implies that all agents share the same common effect for this dose-response parameter. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"random"</code> </td><td style="text-align: left;"> Implies that all agents share a similar (exchangeable) effect for this dose-response parameter. This approach allows for modelling of variability between agents. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>numeric()</code> </td><td style="text-align: left;"> Assigned a numeric value, indicating that this dose-response parameter should not be estimated from the data but should be assigned the numeric value determined by the user. This can be useful for fixing specific dose-response parameters (e.g. Hill parameters in Emax functions) to a single value. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>When relative effects are modelled on more than one dose-response parameter,
correlation between them is automatically estimated using a vague inverse-Wishart prior.
This prior can be made slightly more informative by specifying the scale matrix <code>omega</code>
and by changing the degrees of freedom of the inverse-Wishart prior
using the <code>priors</code> argument in <code>mbnma.run()</code>.
</p>


<h3>References</h3>

<p>Fu H, Manner D (2010).
&ldquo;Bayesian adaptive dose-finding studies with delayed responses.&rdquo;
<em>J Biopharm Stat</em>, <b>20</b>(5), 1055-1070.
<a href="https://doi.org/10.1080/10543400903315740">doi:10.1080/10543400903315740</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Model a common effect on rate
ditp(emax="rel", rate="common")

</code></pre>

<hr>
<h2 id='dloglin'>Log-linear (exponential) dose-response function</h2><span id='topic+dloglin'></span>

<h3>Description</h3>

<p>Modelled assuming relative effects (<code>"rel"</code>)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dloglin()
</code></pre>


<h3>Details</h3>

<p><code class="reqn">rate\times{log(x + 1)}</code>
</p>
<p>Dose-response parameter arguments:</p>

<table>
<tr>
 <td style="text-align: left;">
   <strong>Argument</strong> </td><td style="text-align: left;"> <strong>Model specification</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"rel"</code> </td><td style="text-align: left;"> Implies that <em>relative</em> effects should be pooled for this dose-response parameter separately for each agent in the network. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"common"</code> </td><td style="text-align: left;"> Implies that all agents share the same common effect for this dose-response parameter. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"random"</code> </td><td style="text-align: left;"> Implies that all agents share a similar (exchangeable) effect for this dose-response parameter. This approach allows for modelling of variability between agents. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>numeric()</code> </td><td style="text-align: left;"> Assigned a numeric value, indicating that this dose-response parameter should not be estimated from the data but should be assigned the numeric value determined by the user. This can be useful for fixing specific dose-response parameters (e.g. Hill parameters in Emax functions) to a single value. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Value</h3>

<p>An object of <code>class("dosefun")</code>
</p>


<h3>References</h3>

<p>There are no references for Rd macro <code style="white-space: pre;">&#8288;\insertAllCites&#8288;</code> on this help page.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dloglin()

</code></pre>

<hr>
<h2 id='dmulti'>Agent-specific dose-response function</h2><span id='topic+dmulti'></span>

<h3>Description</h3>

<p>Function combines different dose-response functions together to create an object containing
parameters for multiple dose-response functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dmulti(funs = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dmulti_+3A_funs">funs</code></td>
<td>
<p>A list of objects of <code>class("dosefun")</code>, each element of which corresponds to
an agent in the dataset to be modelled. The list length must be equal to the number of
agents in <code>network$agents</code> used in <code>mbnma.run()</code>, and the order of the dose-response
functions in the list is assumed to correspond to the same order of agents in <code>network$agents</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of <code>class("dosefun")</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
funs &lt;- c(rep(list(demax()),3),
          rep(list(dloglin()),2),
          rep(list(demax(ed50="common")),3),
          rep(list(dexp()),2))

dmulti(funs)
</code></pre>

<hr>
<h2 id='dnonparam'>Non-parameteric dose-response functions</h2><span id='topic+dnonparam'></span>

<h3>Description</h3>

<p>Used to fit monotonically increasing non-parametric dose-response relationship following
the method of Owen et al. (2015))
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dnonparam(direction = "increasing")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dnonparam_+3A_direction">direction</code></td>
<td>
<p>Can take either <code>"increasing"</code> or <code>"decreasing"</code> to indicate the monotonic direction
of the dose-response relationship</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of <code>class("dosefun")</code>
</p>


<h3>References</h3>

<p>Owen RK, Tincello DG, Keith RA (2015).
&ldquo;Network meta-analysis: development of a three-level hierarchical modeling approach incorporating dose-related constraints.&rdquo;
<em>Value Health</em>, <b>18</b>(1), 116-26.
ISSN 1524-4733 (Electronic) 1098-3015 (Linking), <a href="https://doi.org/10.1016/j.jval.2014.10.006">doi:10.1016/j.jval.2014.10.006</a>, <a href="https://pubmed.ncbi.nlm.nih.gov/25595242/">https://pubmed.ncbi.nlm.nih.gov/25595242/</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Monotonically increasing dose-response
dnonparam(direction="increasing")

# Monotonically decreasing dose-response
dnonparam(direction="decreasing")

</code></pre>

<hr>
<h2 id='dpoly'>Polynomial dose-response function</h2><span id='topic+dpoly'></span>

<h3>Description</h3>

<p>Polynomial dose-response function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dpoly(
  degree = 1,
  beta.1 = "rel",
  beta.2 = "rel",
  beta.3 = "rel",
  beta.4 = "rel"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dpoly_+3A_degree">degree</code></td>
<td>
<p>The degree of the polynomial - e.g. <code>degree=1</code> for linear, <code>degree=2</code> for quadratic, <code>degree=3</code> for cubic.</p>
</td></tr>
<tr><td><code id="dpoly_+3A_beta.1">beta.1</code></td>
<td>
<p>Pooling for the 1st polynomial coefficient. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="dpoly_+3A_beta.2">beta.2</code></td>
<td>
<p>Pooling for the 2nd polynomial coefficient. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="dpoly_+3A_beta.3">beta.3</code></td>
<td>
<p>Pooling for the 3rd polynomial coefficient. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="dpoly_+3A_beta.4">beta.4</code></td>
<td>
<p>Pooling for the 4th polynomial coefficient. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li> <p><code class="reqn">\beta_1</code> represents the 1st coefficient.
</p>
</li>
<li> <p><code class="reqn">\beta_2</code> represents the 2nd coefficient.
</p>
</li>
<li> <p><code class="reqn">\beta_3</code> represents the 3rd coefficient.
</p>
</li>
<li> <p><code class="reqn">\beta_4</code> represents the 4th coefficient.
</p>
</li></ul>

<p>Linear model:
</p>
<p style="text-align: center;"><code class="reqn">\beta_1{x}</code>
</p>

<p>Quadratic model:
</p>
<p style="text-align: center;"><code class="reqn">\beta_1{x} + \beta_2{x^2}</code>
</p>

<p>Cubic model:
</p>
<p style="text-align: center;"><code class="reqn">\beta_1{x} + \beta_2{x^2} + \beta_3{x^3}</code>
</p>

<p>Quartic model:
</p>
<p style="text-align: center;"><code class="reqn">\beta_1{x} + \beta_2{x^2} + \beta_3{x^3} + \beta_4{x^4}</code>
</p>



<h3>Value</h3>

<p>An object of <code>class("dosefun")</code>
</p>


<h3>Dose-response parameters</h3>


<table>
<tr>
 <td style="text-align: left;">
   <strong>Argument</strong> </td><td style="text-align: left;"> <strong>Model specification</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"rel"</code> </td><td style="text-align: left;"> Implies that <em>relative</em> effects should be pooled for this dose-response parameter separately for each agent in the network. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"common"</code> </td><td style="text-align: left;"> Implies that all agents share the same common effect for this dose-response parameter. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"random"</code> </td><td style="text-align: left;"> Implies that all agents share a similar (exchangeable) effect for this dose-response parameter. This approach allows for modelling of variability between agents. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>numeric()</code> </td><td style="text-align: left;"> Assigned a numeric value, indicating that this dose-response parameter should not be estimated from the data but should be assigned the numeric value determined by the user. This can be useful for fixing specific dose-response parameters (e.g. Hill parameters in Emax functions) to a single value. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>When relative effects are modelled on more than one dose-response parameter,
correlation between them is automatically estimated using a vague inverse-Wishart prior.
This prior can be made slightly more informative by specifying the scale matrix <code>omega</code>
and by changing the degrees of freedom of the inverse-Wishart prior
using the <code>priors</code> argument in <code>mbnma.run()</code>.
</p>


<h3>References</h3>

<p>There are no references for Rd macro <code style="white-space: pre;">&#8288;\insertAllCites&#8288;</code> on this help page.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Linear model with random effects
dpoly(beta.1="rel")

# Quadratic model dose-response function
# with an exchangeable (random) absolute parameter estimated for the 2nd coefficient
dpoly(beta.1="rel", beta.2="random")

</code></pre>

<hr>
<h2 id='DR.comparisons'>Adds placebo comparisons for dose-response relationship</h2><span id='topic+DR.comparisons'></span>

<h3>Description</h3>

<p>Function adds additional rows to a data.frame of comparisons in a network that account
for the relationship between placebo and other agents via the dose-response
relationship.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DR.comparisons(data.ab, level = "treatment", doselink = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="DR.comparisons_+3A_data.ab">data.ab</code></td>
<td>
<p>A data frame stored in an <code>mbnma.network</code> object (<code>mbnma.network$data.ab</code>)</p>
</td></tr>
<tr><td><code id="DR.comparisons_+3A_level">level</code></td>
<td>
<p>A character that can take either <code>"treatment"</code> or <code>"agent"</code> to indicate the level of the
network for which to identify dose-response</p>
</td></tr>
<tr><td><code id="DR.comparisons_+3A_doselink">doselink</code></td>
<td>
<p>If given an integer value it indicates that connections via the dose-response
relationship with placebo should be plotted. The integer represents the minimum number of doses
from which a dose-response function could be estimated and is equivalent to the number of
parameters in the desired dose-response function plus one. If left as <code>NULL</code> (the default), connections
to placebo via dose-response relationships will not be included.</p>
</td></tr>
</table>

<hr>
<h2 id='drop.comp'>Drop treatments from multi-arm (&gt;2) studies for node-splitting</h2><span id='topic+drop.comp'></span>

<h3>Description</h3>

<p>Drops arms in a way which preserves connectivity and equally removes
data from each treatment in a nodesplit comparison (so as to maximise precision)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drop.comp(ind.df, drops, comp, start = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drop.comp_+3A_ind.df">ind.df</code></td>
<td>
<p>A data frame in long format (one arm per row) from which to drop treatments</p>
</td></tr>
<tr><td><code id="drop.comp_+3A_drops">drops</code></td>
<td>
<p>A vector of study identifiers from which to drop treatments</p>
</td></tr>
<tr><td><code id="drop.comp_+3A_comp">comp</code></td>
<td>
<p>A numeric vector of length 2 that contains treatment codes corresponding to the comparison
for node-splitting</p>
</td></tr>
<tr><td><code id="drop.comp_+3A_start">start</code></td>
<td>
<p>Can take either <code>0</code> or <code>1</code> to indicate whether to drop the treatment
in <code>comp[1]</code> (<code>0</code>) or <code>comp[2]</code> (<code>1</code>)</p>
</td></tr>
</table>

<hr>
<h2 id='drop.disconnected'>Drop studies that are not connected to the network reference treatment</h2><span id='topic+drop.disconnected'></span>

<h3>Description</h3>

<p>Drop studies that are not connected to the network reference treatment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drop.disconnected(network, connect.dose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drop.disconnected_+3A_network">network</code></td>
<td>
<p>An object of class <code>mbnma.network</code>.</p>
</td></tr>
<tr><td><code id="drop.disconnected_+3A_connect.dose">connect.dose</code></td>
<td>
<p>A boolean object to indicate whether treatments should be
kept in the network if they connect via the simplest possible dose-response
relationship (<code>TRUE</code>) or not (<code>FALSE</code>). Simplest possible dose-response relationship
is any function with a single dose-response parameter (e.g. linear, exponential)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing a single row per arm data frame containing only studies that are
connected to the network reference treatment, and a character vector of treatment labels
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Using the triptans headache dataset
network &lt;- mbnma.network(triptans)
drops &lt;- drop.disconnected(network)

# No studies have been dropped since network is fully connected
length(unique(network$data.ab$studyID))==length(unique(drops$data.ab$studyID))


# Make data with no placebo
noplac.df &lt;- network$data.ab[network$data.ab$narm&gt;2 &amp; network$data.ab$agent!=1,]
net.noplac &lt;- mbnma.network(noplac.df)

# Studies are dropped as some only connect via the dose-response function
drops &lt;- drop.disconnected(net.noplac, connect.dose=FALSE)
length(unique(net.noplac$data.ab$studyID))==length(unique(drops$data.ab$studyID))

# Studies are not dropped if they connect via the dose-response function
drops &lt;- drop.disconnected(net.noplac, connect.dose=TRUE)
length(unique(net.noplac$data.ab$studyID))==length(unique(drops$data.ab$studyID))

</code></pre>

<hr>
<h2 id='dspline'>Spline dose-response functions</h2><span id='topic+dspline'></span>

<h3>Description</h3>

<p>Used to fit B-splines, natural cubic splines, and
piecewise linear splines(Perperoglu et al. 2019).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dspline(
  type = "bs",
  knots = 1,
  degree = 1,
  beta.1 = "rel",
  beta.2 = "rel",
  beta.3 = "rel",
  beta.4 = "rel"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dspline_+3A_type">type</code></td>
<td>
<p>The type of spline. Can take <code>"bs"</code> (<a href="https://mathworld.wolfram.com/B-Spline.html">B-spline</a>),
<code>"ns"</code> (<a href="https://mathworld.wolfram.com/CubicSpline.html">natural cubic spline</a>),
or <code>"ls"</code> (piecewise linear spline)</p>
</td></tr>
<tr><td><code id="dspline_+3A_knots">knots</code></td>
<td>
<p>The number/location of spline internal knots. If a single number is given it indicates the number of knots (they will
be equally spaced across the range of doses <em>for each agent</em>). If a numeric vector is given it indicates the location of the knots.</p>
</td></tr>
<tr><td><code id="dspline_+3A_degree">degree</code></td>
<td>
<p>The degree of the piecewise B-spline polynomial - e.g. <code>degree=1</code> for linear, <code>degree=2</code> for quadratic, <code>degree=3</code> for cubic.</p>
</td></tr>
<tr><td><code id="dspline_+3A_beta.1">beta.1</code></td>
<td>
<p>Pooling for the 1st coefficient. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="dspline_+3A_beta.2">beta.2</code></td>
<td>
<p>Pooling for the 2nd coefficient. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="dspline_+3A_beta.3">beta.3</code></td>
<td>
<p>Pooling for the 3rd coefficient. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="dspline_+3A_beta.4">beta.4</code></td>
<td>
<p>Pooling for the 4th coefficient. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of <code>class("dosefun")</code>
</p>


<h3>Dose-response parameters</h3>


<table>
<tr>
 <td style="text-align: left;">
   <strong>Argument</strong> </td><td style="text-align: left;"> <strong>Model specification</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"rel"</code> </td><td style="text-align: left;"> Implies that <em>relative</em> effects should be pooled for this dose-response parameter separately for each agent in the network. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"common"</code> </td><td style="text-align: left;"> Implies that all agents share the same common effect for this dose-response parameter. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"random"</code> </td><td style="text-align: left;"> Implies that all agents share a similar (exchangeable) effect for this dose-response parameter. This approach allows for modelling of variability between agents. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>numeric()</code> </td><td style="text-align: left;"> Assigned a numeric value, indicating that this dose-response parameter should not be estimated from the data but should be assigned the numeric value determined by the user. This can be useful for fixing specific dose-response parameters (e.g. Hill parameters in Emax functions) to a single value. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>When relative effects are modelled on more than one dose-response parameter,
correlation between them is automatically estimated using a vague inverse-Wishart prior.
This prior can be made slightly more informative by specifying the scale matrix <code>omega</code>
and by changing the degrees of freedom of the inverse-Wishart prior
using the <code>priors</code> argument in <code>mbnma.run()</code>.
</p>


<h3>References</h3>

<p>Perperoglu A, Sauerbrei W, Abrahamowicz M, Schmid M (2019).
&ldquo;A review of spline function procedures in R.&rdquo;
<em>BMC Medical Research Methodology</em>, <b>19</b>(46), 1-16.
<a href="https://doi.org/10.1186/s12874-019-0666-3">doi:10.1186/s12874-019-0666-3</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Second order B spline with 2 knots and random effects on the 2nd coefficient
dspline(type="bs", knots=2, degree=2,
  beta.1="rel", beta.2="rel")

# Piecewise linear spline with knots at 0.1 and 0.5 quantiles
# Single parameter independent of treatment estimated for 1st coefficient
#with random effects
dspline(type="ls", knots=c(0.1,0.5),
  beta.1="random", beta.2="rel")

</code></pre>

<hr>
<h2 id='duser'>User-defined dose-response function</h2><span id='topic+duser'></span>

<h3>Description</h3>

<p>User-defined dose-response function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>duser(fun, beta.1 = "rel", beta.2 = "rel", beta.3 = "rel", beta.4 = "rel")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="duser_+3A_fun">fun</code></td>
<td>
<p>A formula specifying any relationship including <code>dose</code> and
one/several of: <code>beta.1</code>, <code>beta.2</code>, <code>beta.3</code>, <code>beta.4</code>.</p>
</td></tr>
<tr><td><code id="duser_+3A_beta.1">beta.1</code></td>
<td>
<p>Pooling for the 1st coefficient. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="duser_+3A_beta.2">beta.2</code></td>
<td>
<p>Pooling for the 2nd coefficient. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="duser_+3A_beta.3">beta.3</code></td>
<td>
<p>Pooling for the 3rd coefficient. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
<tr><td><code id="duser_+3A_beta.4">beta.4</code></td>
<td>
<p>Pooling for the 4th coefficient. Can take <code>"rel"</code>, <code>"common"</code>, <code>"random"</code> or be
assigned a numeric value (see details).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of <code>class("dosefun")</code>
</p>


<h3>Dose-response parameters</h3>


<table>
<tr>
 <td style="text-align: left;">
   <strong>Argument</strong> </td><td style="text-align: left;"> <strong>Model specification</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"rel"</code> </td><td style="text-align: left;"> Implies that <em>relative</em> effects should be pooled for this dose-response parameter separately for each agent in the network. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"common"</code> </td><td style="text-align: left;"> Implies that all agents share the same common effect for this dose-response parameter. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"random"</code> </td><td style="text-align: left;"> Implies that all agents share a similar (exchangeable) effect for this dose-response parameter. This approach allows for modelling of variability between agents. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>numeric()</code> </td><td style="text-align: left;"> Assigned a numeric value, indicating that this dose-response parameter should not be estimated from the data but should be assigned the numeric value determined by the user. This can be useful for fixing specific dose-response parameters (e.g. Hill parameters in Emax functions) to a single value. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>When relative effects are modelled on more than one dose-response parameter,
correlation between them is automatically estimated using a vague inverse-Wishart prior.
This prior can be made slightly more informative by specifying the scale matrix <code>omega</code>
and by changing the degrees of freedom of the inverse-Wishart prior
using the <code>priors</code> argument in <code>mbnma.run()</code>.
</p>


<h3>References</h3>

<p>There are no references for Rd macro <code style="white-space: pre;">&#8288;\insertAllCites&#8288;</code> on this help page.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
dr &lt;- ~ beta.1 * (1/(dose+1)) + beta.2 * dose^2
duser(fun=dr,
  beta.1="common", beta.2="rel")

</code></pre>

<hr>
<h2 id='fitplot'>Plot fitted values from MBNMA model</h2><span id='topic+fitplot'></span>

<h3>Description</h3>

<p>Plot fitted values from MBNMA model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fitplot(
  mbnma,
  disp.obs = TRUE,
  n.iter = mbnma$BUGSoutput$n.iter,
  n.thin = mbnma$BUGSoutput$n.thin,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fitplot_+3A_mbnma">mbnma</code></td>
<td>
<p>An S3 object of class <code>"mbnma"</code> generated by running
a dose-response MBNMA model</p>
</td></tr>
<tr><td><code id="fitplot_+3A_disp.obs">disp.obs</code></td>
<td>
<p>A boolean object to indicate whether raw data responses should be
plotted as points on the graph</p>
</td></tr>
<tr><td><code id="fitplot_+3A_n.iter">n.iter</code></td>
<td>
<p>number of total iterations per chain (including burn in;
default: 2000)</p>
</td></tr>
<tr><td><code id="fitplot_+3A_n.thin">n.thin</code></td>
<td>
<p>thinning rate. Must be a positive integer.  Set
<code>n.thin</code> &gt; 1 to save memory and computation time if
<code>n.iter</code> is large.  Default is <code>max(1, floor(n.chains *
    (n.iter-n.burnin) / 1000))</code> which will only thin if there are at
least 2000 simulations.</p>
</td></tr>
<tr><td><code id="fitplot_+3A_...">...</code></td>
<td>
<p>Arguments to be sent to <code>ggplot2::geom_point()</code> or <code>ggplot2::geom_line()</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Fitted values should only be plotted for models that have converged successfully.
If fitted values (<code>theta</code>) have not been monitored in <code>mbnma$parameters.to.save</code>
then additional iterations will have to be run to get results for these.
</p>


<h3>Value</h3>

<p>Generates a plot of fitted values from the MBNMA model and returns a list containing
the plot (as an object of <code>class(c("gg", "ggplot"))</code>), and a data.frame of posterior mean
fitted values for each observation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)

# Run an Emax dose-response MBNMA and predict responses
emax &lt;- mbnma.run(network, fun=demax(), method="random")

# Plot fitted values and observed values
fitplot(emax)

# Plot fitted values only
fitplot(emax, disp.obs=FALSE)

# A data frame of fitted values can be obtained from the object
#returned by `fitplot`
fits &lt;- fitplot(emax)
head(fits$fv)


</code></pre>

<hr>
<h2 id='gen.parameters.to.save'>Automatically generate parameters to save for a dose-response MBNMA model</h2><span id='topic+gen.parameters.to.save'></span>

<h3>Description</h3>

<p>Automatically generate parameters to save for a dose-response MBNMA model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gen.parameters.to.save(fun, model, regress.mat = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gen.parameters.to.save_+3A_fun">fun</code></td>
<td>
<p>An object of <code>class("dosefun")</code> that specifies a functional form to be assigned to the
dose-response. See Details.</p>
</td></tr>
<tr><td><code id="gen.parameters.to.save_+3A_model">model</code></td>
<td>
<p>A JAGS model written as a character object</p>
</td></tr>
<tr><td><code id="gen.parameters.to.save_+3A_regress.mat">regress.mat</code></td>
<td>
<p>A Nstudy x Ncovariate design matrix of meta-regression covariates</p>
</td></tr>
</table>

<hr>
<h2 id='genspline'>Generates spline basis matrices for fitting to dose-response function</h2><span id='topic+genspline'></span>

<h3>Description</h3>

<p>Generates spline basis matrices for fitting to dose-response function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>genspline(
  x,
  spline = "bs",
  knots = 1,
  degree = 1,
  max.dose = max(x),
  boundaries = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="genspline_+3A_x">x</code></td>
<td>
<p>A numeric vector indicating all time points available in the dataset</p>
</td></tr>
<tr><td><code id="genspline_+3A_spline">spline</code></td>
<td>
<p>Indicates the type of spline function. Can be either a piecewise linear spline (<code>"ls"</code>),
natural cubic spline (<code>"ns"</code>), or B-spline (<code>"bs"</code>).</p>
</td></tr>
<tr><td><code id="genspline_+3A_knots">knots</code></td>
<td>
<p>The number/location of internal knots. If a single integer is given it indicates the number of knots (they will
be equally spaced across the range of doses <em>for each agent</em>). If a numeric vector is given it indicates the quantiles of the knots as
a proportion of the maximum dose in the dataset. For example, if the maximum dose in the dataset
is 100mg/d, <code>knots=c(0.1,0.5)</code> would indicate knots should be fitted at 10mg/d and 50mg/d.</p>
</td></tr>
<tr><td><code id="genspline_+3A_degree">degree</code></td>
<td>
<p>a positive integer giving the degree of the polynomial from which the spline function is composed
(e.g. <code>degree=3</code> represents a cubic spline).</p>
</td></tr>
<tr><td><code id="genspline_+3A_max.dose">max.dose</code></td>
<td>
<p>A number indicating the maximum dose between which to calculate the spline function.</p>
</td></tr>
<tr><td><code id="genspline_+3A_boundaries">boundaries</code></td>
<td>
<p>A positive numeric vector of length 2 that represents the doses at which to anchor the B-spline or natural
cubic spline basis matrix. This allows data to extend beyond the boundary knots, or for the basis parameters to not depend on <code>x</code>.
The default (<code>boundaries=NULL</code>) is the range of <code>x</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A spline basis matrix with number of rows equal to <code>length(x)</code> and the number of columns equal to the number
of coefficients in the spline.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- 0:100

genspline(x)

# Generate a quadratic B-spline with 1 equally spaced internal knot
genspline(x, spline="bs", knots=2, degree=2)

# Generate a natural cubic spline with 3 knots at selected quantiles
genspline(x, spline="ns", knots=c(0.1, 0.5, 0.7))

# Generate a piecewise linear spline with 3 equally spaced knots
genspline(x, spline="ls", knots=3)

</code></pre>

<hr>
<h2 id='get.prior'>Get current priors from JAGS model code</h2><span id='topic+get.prior'></span>

<h3>Description</h3>

<p>Identical to <code>get.prior()</code> in <code>MBNMAtime</code> package.
This function takes JAGS model presented as a string and identifies what
prior values have been used for calculation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.prior(model)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get.prior_+3A_model">model</code></td>
<td>
<p>A character object of JAGS MBNMA model code</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Even if an MBNMA model that has not initialised successfully and
results have not been calculated, the JAGS model for it is saved in
<code>mbnma$model.arg$jagscode</code> and therefore priors can still be obtained.
This allows for priors to be changed even in failing models, which may help
solve issues with compiling or updating.
</p>


<h3>Value</h3>

<p>A character vector, each element of which is a line of JAGS code
corresponding to a prior in the JAGS code.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)

# Run an Emax dose-response MBNMA
result &lt;- mbnma.run(network, fun=demax(), method="random")

# Obtain model prior values
print(result$model.arg$priors)

# Priors when using mbnma.run with an exponential function
result &lt;- mbnma.run(network, fun=dexp(), method="random")
print(result$model.arg$priors)


</code></pre>

<hr>
<h2 id='get.relative'>Calculates league table of effects between treatments in MBNMA and/or NMA models</h2><span id='topic+get.relative'></span>

<h3>Description</h3>

<p>Calculates league table of effects between treatments in MBNMA and/or NMA models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.relative(
  lower.diag,
  upper.diag = lower.diag,
  treatments = list(),
  lower.direction = "colvrow",
  upper.direction = "rowvcol",
  regress.vals = NULL,
  eform = FALSE,
  lim = "cred"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get.relative_+3A_lower.diag">lower.diag</code></td>
<td>
<p>An S3 object either of class <code>"mbnma"</code> generated by running
a dose-response MBNMA model (using <code>mbnma.run()</code>), or of
class <code>"nma"</code> generated by running an NMA model (using <code>nma.run()</code>). Indicates that
this model should be used to estimate treatment effects in the <strong>lower-left diagonal</strong> of the league table.</p>
</td></tr>
<tr><td><code id="get.relative_+3A_upper.diag">upper.diag</code></td>
<td>
<p>Same as for <code>lower.diag</code>, but indicates that this model should be used
to estimate treatment effects in the <strong>upper-right diagonal</strong> of the league table.</p>
</td></tr>
<tr><td><code id="get.relative_+3A_treatments">treatments</code></td>
<td>
<p>A list whose elements each represent different treatments.
Treatment is defined as a combination of agent and dose. Only agents specified in
<code>lower.diag</code> and <code>upper.diag</code> can be included. Each element in <code>treatments</code> is named corresponding to the
agent and contains a numeric vector of doses. Relative effects will be calculated between
all treatments specified in <code>treatments</code>. If <code>treatments</code> is left empty then the set of
treatments in the network on which <code>lower.diag</code> is estimated will be used as the default.</p>
</td></tr>
<tr><td><code id="get.relative_+3A_lower.direction">lower.direction</code></td>
<td>
<p>Whether treatment effects should be presented as the column versus the row treatment
for each cell in the <strong>lower-left diagonal</strong> of the league table (<code>"colvrow"</code>) or as the row versus the
column treatment (<code>"rowvcol"</code>).</p>
</td></tr>
<tr><td><code id="get.relative_+3A_upper.direction">upper.direction</code></td>
<td>
<p>Same as for <code>upper.direction</code> but for results shown in the <strong>upper-right diagonal</strong> of
the league table.</p>
</td></tr>
<tr><td><code id="get.relative_+3A_regress.vals">regress.vals</code></td>
<td>
<p>A named numeric vector of effect modifier values at which relative effects
should be estimated. Named elements must match variable names specified in regression design matrix
(<code>mbnma$model.arg$regress.mat</code>), corresponding to variables in <code>regress</code> within
the MBNMA model (or <strong>both</strong> MBNMA models if different models are used for <code>upper.diag</code>
and <code>lower.diag</code>. Meta-regression is not currently possible for NMA models, so only
unadjusted results will be shown for these (and a warning given if they are compared to
adjusted MBNMA results).</p>
</td></tr>
<tr><td><code id="get.relative_+3A_eform">eform</code></td>
<td>
<p>Whether outputted results should be presented in their exponential form (e.g. for
models with log or logit link functions)</p>
</td></tr>
<tr><td><code id="get.relative_+3A_lim">lim</code></td>
<td>
<p>Specifies calculation of either 95% credible intervals (<code>lim="cred"</code>) or 95% prediction intervals (<code>lim="pred"</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An array of <code style="white-space: pre;">&#8288;length(treatments) x length(treatments) x nsims&#8288;</code>, where <code>nsims</code>
is the number of iterations monitored in <code>lower.diag</code>. The array contains the individual
MCMC values for each relative effect calculated between all <code>treatments</code> on the link scale
specified in the <code>lower.diag</code> and <code>upper.diag</code> models.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Using the osteoarthritis data
network &lt;- mbnma.network(osteopain)

# Run an MBNMA model
expon &lt;- mbnma.run(network, fun=dexp(), method="random")

# Calculate relative effects for MBNMA between:
# Celebrex 100mg/d, Celebrex 200mg/d, Tramadol 100mg/d
rel.eff &lt;- get.relative(lower.diag=expon,
  treatments=list("Celebrex"=c(100,200), "Tramadol"=100))

# Run an NMA model
nma &lt;- nma.run(network, method="random")

# Compare results between MBNMA and NMA models
rel.eff &lt;- get.relative(lower.diag=expon, upper.diag=nma,
  treatments=list("Celebrex"=c(100,200), "Tramadol"=100),
  upper.direction="colvrow")


</code></pre>

<hr>
<h2 id='getjagsdata'>Prepares data for JAGS</h2><span id='topic+getjagsdata'></span>

<h3>Description</h3>

<p>Converts MBNMA data frame to a list for use in JAGS model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getjagsdata(
  data.ab,
  class = FALSE,
  sdscale = FALSE,
  regress = NULL,
  regress.effect = "common",
  likelihood = check.likelink(data.ab)$likelihood,
  link = check.likelink(data.ab)$link,
  level = "agent",
  fun = NULL,
  nodesplit = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getjagsdata_+3A_data.ab">data.ab</code></td>
<td>
<p>A data frame of arm-level data in &quot;long&quot; format containing the columns:
</p>

<ul>
<li> <p><code>studyID</code> Study identifiers
</p>
</li>
<li> <p><code>dose</code> Numeric data indicating the dose (must take positive values)
</p>
</li>
<li> <p><code>agent</code> Agent identifiers (can be numeric, factor or character)
</p>
</li>
<li> <p><code>y</code> Numeric data indicating the aggregate response for a continuous outcome. Required for
continuous data.
</p>
</li>
<li> <p><code>se</code> Numeric data indicating the standard error for a given observation. Required for
continuous data.
</p>
</li>
<li> <p><code>r</code> Numeric data indicating the number of responders within a study arm. Required for
binomial or poisson data.
</p>
</li>
<li> <p><code>n</code> Numeric data indicating the total number of participants within a study arm. Required for
binomial data or when modelling Standardised Mean Differences
</p>
</li>
<li> <p><code>E</code> Numeric data indicating the total exposure time for participants within a study arm. Required
for poisson data.
</p>
</li>
<li> <p><code>class</code> An optional column indicating a particular class code. Agents with the same identifier
must also have the same class code.
</p>
</li>
<li> <p><code>standsd</code> An optional column of numeric data indicating reference SDs used to standardise
treatment effects when modelling using Standardised Mean Differences (SMD).
</p>
</li></ul>
</td></tr>
<tr><td><code id="getjagsdata_+3A_class">class</code></td>
<td>
<p>A boolean object indicating whether or not <code>data.ab</code> contains
information on different classes of treatments</p>
</td></tr>
<tr><td><code id="getjagsdata_+3A_sdscale">sdscale</code></td>
<td>
<p>Logical object to indicate whether to write a model that specifies a reference SD
for standardising when modelling using Standardised Mean Differences. Specifying <code>sdscale=TRUE</code>
will therefore only modify the model if link function is set to SMD (<code>link="smd"</code>).</p>
</td></tr>
<tr><td><code id="getjagsdata_+3A_regress">regress</code></td>
<td>
<p>A formula of effect modifiers (variables that
interact with the treatment effect) to incorporate using Network Meta-Regression
(E.g. <code>~ Population + Age</code>). All variables in the formula are modelled as interacting
with the treatment effect (i.e. prognostic variables cannot be included in this way).
Effects modifiers must be named variables in <code>network$data.ab</code> and must be identical
within a study. Factor and character effect modifiers will be converted to a series of
named dummy variables.</p>
</td></tr>
<tr><td><code id="getjagsdata_+3A_regress.effect">regress.effect</code></td>
<td>
<p>Indicates whether effect modification should be assumed to be
<code>"common"</code> (assumed to be equal versus Placebo throughout the network),
<code>"random"</code> (assumed to be exchangeable versus Placebo throughout the network),
<code>"agent"</code> (assumed to be equal versus Placebo within each agent), or
<code>"class"</code> (assumed to be equal versus Placebo within each class).</p>
</td></tr>
<tr><td><code id="getjagsdata_+3A_likelihood">likelihood</code></td>
<td>
<p>A string indicating the likelihood to use in the model. Can take either <code>"binomial"</code>,
<code>"normal"</code> or <code>"poisson"</code>. If left as <code>NULL</code> the likelihood will be inferred from the data.</p>
</td></tr>
<tr><td><code id="getjagsdata_+3A_link">link</code></td>
<td>
<p>A string indicating the link function to use in the model. Can take any link function
defined within JAGS (e.g. <code>"logit"</code>, <code>"log"</code>, <code>"probit"</code>, <code>"cloglog"</code>), be assigned the value <code>"identity"</code> for
an identity link function, or be assigned the value <code>"smd"</code> for modelling Standardised Mean Differences using an
identity link function. If left as <code>NULL</code> the link function will be automatically assigned based
on the likelihood.</p>
</td></tr>
<tr><td><code id="getjagsdata_+3A_level">level</code></td>
<td>
<p>Can take either <code>"agent"</code> to indicate that data should be at the agent-
level (for MBNMA) or <code>"treatment"</code> to indicate that data should be at the treatment-
level (for NMA)</p>
</td></tr>
<tr><td><code id="getjagsdata_+3A_fun">fun</code></td>
<td>
<p>An object of <code>class("dosefun")</code> that specifies a functional form to be assigned to the
dose-response. See Details.</p>
</td></tr>
<tr><td><code id="getjagsdata_+3A_nodesplit">nodesplit</code></td>
<td>
<p>A numeric vector of length 2 containing treatment codes on which to perform
an MBNMA nodesplit (see <code><a href="#topic+mbnma.nodesplit">mbnma.nodesplit</a></code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list of numbers, vector, matrices and arrays to be sent to
JAGS. List elements are:
</p>

<ul>
<li><p> If <code>likelihood="normal"</code>:
</p>

<ul>
<li> <p><code>y</code> An array of mean responses for each arm within each study
</p>
</li>
<li> <p><code>se</code> An array of standard errors for each arm within each study
</p>
</li></ul>

</li>
<li><p> If <code>likelihood="binomial"</code>:
</p>

<ul>
<li> <p><code>r</code> An array of the number of responses/count for each each arm within each study
</p>
</li>
<li> <p><code>n</code> An array of the number of participants for each arm within each study
</p>
</li></ul>

</li>
<li><p> If <code>likelihood="poisson"</code>:
</p>

<ul>
<li> <p><code>r</code> An array of the number of responses/count for each each arm within each study
</p>
</li>
<li> <p><code>E</code> An array of the total exposure time for each arm within each study
</p>
</li></ul>

</li>
<li> <p><code>dose</code> A matrix of doses for each arm within each study (if <code>level="agent"</code>)
</p>
</li>
<li> <p><code>narm</code> A numeric vector with the number of arms per study
</p>
</li>
<li> <p><code>NS</code> The total number of studies in the dataset
</p>
</li>
<li> <p><code>Nagent</code> The total number of agents in the dataset (if <code>level="agent"</code>)
</p>
</li>
<li> <p><code>agent</code> A matrix of agent codes within each study (if <code>level="agent"</code>)
</p>
</li>
<li> <p><code>NT</code> The total number of treatment in the dataset (if <code>level="treatment"</code>)
</p>
</li>
<li> <p><code>treatment</code> A matrix of treatment codes within each study (if <code>level="treatment"</code>)
</p>
</li>
<li> <p><code>Nclass</code> Optional. The total number of classes in the dataset
</p>
</li>
<li> <p><code>class</code> Optional. A matrix of class codes within each study
</p>
</li>
<li> <p><code>classkey</code> Optional. A vector of class codes that correspond to agent codes.
Same length as the number of agent codes.
</p>
</li>
<li> <p><code>split.ind</code> Optional. A matrix indicating whether a specific arm contributes evidence
to a nodesplit comparison.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># Using the triptans headache dataset
network &lt;- mbnma.network(triptans)
jagsdat &lt;- getjagsdata(network$data.ab, likelihood="binomial", link="logit")


# Get JAGS data with class
netclass &lt;- mbnma.network(osteopain)
jagsdat &lt;- getjagsdata(netclass$data.ab, class=TRUE)


# Get JAGS data at the treatment level for split Network Meta-Analysis
network &lt;- mbnma.network(triptans)
jagsdat &lt;- getjagsdata(network$data.ab, level="treatment")

</code></pre>

<hr>
<h2 id='gout'>Studies of treatments for Serum Uric Acid reduction in patients with gout</h2><span id='topic+gout'></span>

<h3>Description</h3>

<p>A dataset from a systematic review of interventions for lowering Serum Uric Acid (SUA) concentration in
patients with gout <strong>(not published previously)</strong>. The outcome is continuous, and aggregate data responses
correspond to the mean change from baseline in SUA in mg/dL at 2 weeks follow-up. The dataset includes 10
Randomised-Controlled Trials (RCTs), comparing 5 different agents, and placebo. Data for one agent (RDEA)
arises from an RCT that is not placebo-controlled, and so is not connected to the network directly. In total
there were 19 different treatments (combination of dose and agent).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gout
</code></pre>


<h3>Format</h3>

<p>A data frame in long format (one row per arm and study), with 27 rows and 5 variables:
</p>

<ul>
<li> <p><code>studyID</code> Study identifiers
</p>
</li>
<li> <p><code>y</code> Numeric data indicating the mean change from baseline in SUA in a study arm
</p>
</li>
<li> <p><code>se</code> Numeric data indicating the standard error for the mean change from baseline in SUA in a study arm
</p>
</li>
<li> <p><code>agent</code> Character data indicating the agent to which participants were randomised
</p>
</li>
<li> <p><code>dose</code> Numeric data indicating the standardised dose received
</p>
</li></ul>



<h3>Source</h3>

<p>Pfizer Ltd.
</p>

<hr>
<h2 id='inconsistency.loops'>Identify comparisons in loops that fulfill criteria for node-splitting</h2><span id='topic+inconsistency.loops'></span>

<h3>Description</h3>

<p>Identify comparisons informed by both direct and indirect evidence from
independent sources, which therefore fulfill the criteria for testing for
inconsistency via node-splitting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inconsistency.loops(df, checkindirect = TRUE, incldr = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="inconsistency.loops_+3A_df">df</code></td>
<td>
<p>A data frame containing variables <code>studyID</code> and <code>treatment</code> (as
numeric codes) that indicate which treatments are used in which studies. If <code>checkindirect = TRUE</code>
then variables <code>agent</code> and <code>dose</code> are also required.</p>
</td></tr>
<tr><td><code id="inconsistency.loops_+3A_checkindirect">checkindirect</code></td>
<td>
<p>A boolean object to indicate whether or not to perform an additional
check to ensure network remains connected even after dropping direct evidence on a comparison.
Default is <code>TRUE</code> and should be kept as <code>TRUE</code> if working with dose-response data, though this requires
further computational iterations to confirm. If set to <code>FALSE</code>, additional comparisons may be identified, though computation will be much more
rapid.</p>
</td></tr>
<tr><td><code id="inconsistency.loops_+3A_incldr">incldr</code></td>
<td>
<p>A boolean object indicating whether or not to allow for indirect evidence contributions via
the dose-response relationship. This can be used when node-splitting in dose-response MBNMA to allow
for a greater number of potential loops in which to check for consistency.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Similar to <code>gemtc::mtc.nodesplit.comparisons()</code> but uses a fixed
reference treatment and therefore identifies fewer loops in which to test for
inconsistency. Heterogeneity can also be parameterised as inconsistency and
so testing for inconsistency in additional loops whilst changing the
reference treatment would also be identifying heterogeneity. Depends on
<code><a href="igraph.html#topic+igraph">igraph</a></code>.
</p>


<h3>Value</h3>

<p>A data frame of comparisons that are informed by direct and indirect
evidence from independent sources. Each row of the data frame is a
different treatment comparison. Numerical codes in <code>t1</code> and <code>t2</code> correspond
to treatment codes. <code>path</code> indicates the treatment codes that connect the
shortest path of indirect evidence.
</p>
<p>If <code>incldr=TRUE</code> then <code>path</code> may indicate <code>doseresp</code> for some comparisons.
These are comparisons for which indirect evidence is only available via the
dose-response relationship. The two numbers given after (e.g. <code style="white-space: pre;">&#8288;3 2&#8288;</code>) indicate the
number of doses available in the indirect evidence with which to estimate the
dose-response function for the treatments in <code>t1</code> and <code>t2</code> respectively/
</p>


<h3>References</h3>

<p>There are no references for Rd macro <code style="white-space: pre;">&#8288;\insertAllCites&#8288;</code> on this help page.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Identify comparisons informed by direct and indirect evidence
#in triptans dataset
network &lt;- mbnma.network(triptans)
inconsistency.loops(network$data.ab)

# Include indirect evidence via dose-response relationship
inconsistency.loops(network$data.ab, incldr=TRUE)



# Do not perform additional connectivity check on data
data &lt;- data.frame(studyID=c(1,1,2,2,3,3,4,4,5,5,5),
            treatment=c(1,2,1,3,2,3,3,4,1,2,4)
            )
inconsistency.loops(data, checkindirect=FALSE)
</code></pre>

<hr>
<h2 id='mbnma.comparisons'>Identify unique comparisons within a network</h2><span id='topic+mbnma.comparisons'></span>

<h3>Description</h3>

<p>Identify unique contrasts within a network that make up all the head-to-head comparisons. Repetitions
of the same treatment comparison are grouped together.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mbnma.comparisons(df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mbnma.comparisons_+3A_df">df</code></td>
<td>
<p>A data frame containing variables <code>studyID</code> and <code>treatment</code> (as numeric codes) that
indicate which treatments are used in which studies.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of unique comparisons in which each row represents a different comparison.
<code>t1</code> and <code>t2</code> indicate the treatment codes that make up the comparison. <code>nr</code> indicates the number
of times the given comparison is made within the network.
</p>
<p>If there is only a single follow-up observation for each study within the dataset (i.e. as for standard
network meta-analysis) <code>nr</code> will represent the number of studies that compare treatments <code>t1</code> and
<code>t2</code>.
</p>
<p>If there are multiple observations for each study within the dataset (as in time-course MBNMA)
<code>nr</code> will represent the number of time points in the dataset in which treatments <code>t1</code> and <code>t2</code> are
compared.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame(studyID=c(1,1,2,2,3,3,4,4,5,5,5),
  treatment=c(1,2,1,3,2,3,3,4,1,2,4)
  )

# Identify unique comparisons within the data
mbnma.comparisons(df)


# Using the triptans headache dataset
network &lt;- mbnma.network(triptans) # Adds treatment identifiers
mbnma.comparisons(network$data.ab)

</code></pre>

<hr>
<h2 id='mbnma.nodesplit'>Node-splitting model for testing consistency at the treatment level using MBNMA</h2><span id='topic+mbnma.nodesplit'></span><span id='topic+plot.nodesplit'></span>

<h3>Description</h3>

<p>Splits contributions for a given set of treatment comparisons into direct and
indirect evidence. A discrepancy between the two suggests that the consistency
assumption required for NMA and MBNMA may violated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mbnma.nodesplit(
  network,
  fun = dpoly(degree = 1),
  method = "common",
  comparisons = NULL,
  incldr = TRUE,
  ...
)

## S3 method for class 'nodesplit'
plot(x, plot.type = "forest", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mbnma.nodesplit_+3A_network">network</code></td>
<td>
<p>An object of class <code>mbnma.network</code>.</p>
</td></tr>
<tr><td><code id="mbnma.nodesplit_+3A_fun">fun</code></td>
<td>
<p>An object of <code>class("dosefun")</code> that specifies a functional form to be assigned to the
dose-response. See Details.</p>
</td></tr>
<tr><td><code id="mbnma.nodesplit_+3A_method">method</code></td>
<td>
<p>Can take either <code>"common"</code> or <code>"random"</code> to indicate whether relative effects
should be modelled with between-study heterogeneity or not (see details).</p>
</td></tr>
<tr><td><code id="mbnma.nodesplit_+3A_comparisons">comparisons</code></td>
<td>
<p>A matrix specifying the comparisons to be split (one row per comparison).
The matrix must have two columns indicating each treatment for each comparison. Values can
either be character (corresponding to the treatment names given in <code>network</code>) or
numeric (corresponding to treatment codes within the <code>network</code> - note that these
may change if <code>drop.discon = TRUE</code>).</p>
</td></tr>
<tr><td><code id="mbnma.nodesplit_+3A_incldr">incldr</code></td>
<td>
<p>A boolean object indicating whether or not to allow for indirect evidence contributions via
the dose-response relationship. This can be used when node-splitting in dose-response MBNMA to allow
for a greater number of potential loops in which to check for consistency.</p>
</td></tr>
<tr><td><code id="mbnma.nodesplit_+3A_...">...</code></td>
<td>
<p>Arguments to be sent to <code><a href="ggplot2.html#topic+ggplot">ggplot2::ggplot()</a></code> or <code>forestplot::forestplot()</code></p>
</td></tr>
<tr><td><code id="mbnma.nodesplit_+3A_x">x</code></td>
<td>
<p>An object of <code>class("nodesplit")</code></p>
</td></tr>
<tr><td><code id="mbnma.nodesplit_+3A_plot.type">plot.type</code></td>
<td>
<p>A character string that can take the value of <code>"forest"</code> to plot
forest plots or <code>"density"</code> to plot posterior density plots.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The S3 method <code>plot()</code> on an <code>nodesplit</code> object generates either
forest plots of posterior medians and 95\% credible intervals, or density plots
of posterior densities for direct and indirect evidence.
</p>


<h3>Value</h3>

<p>Plots the desired graph if <code>plot.type="forest"</code> and plots and returns an object
of <code>class(c("gg", "ggplot"))</code> if <code>plot.type="density"</code>.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>plot(nodesplit)</code>: Plot outputs from treatment-level nodesplit MBNMA models
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)

split &lt;- mbnma.nodesplit(network, fun=demax(), likelihood = "binomial", link="logit",
  method="common")


#### To perform nodesplit on selected comparisons ####

# Check for closed loops of treatments with independent evidence sources
# Including indirect evidence via the dose-response relationship
loops &lt;- inconsistency.loops(network$data.ab, incldr=TRUE)

# This...
single.split &lt;- mbnma.nodesplit(network, fun=dexp(), likelihood = "binomial", link="logit",
             method="random", comparisons=rbind(c("sumatriptan_1", "almotriptan_1")))

#...is the same as...
single.split &lt;- mbnma.nodesplit(network, fun=dexp(), likelihood = "binomial", link="logit",
             method="random", comparisons=rbind(c(6, 12)))


# Plot results
plot(split, plot.type="density") # Plot density plots of posterior densities
plot(split, txt_gp=forestplot::fpTxtGp(cex=0.5)) # Plot forest plots (with smaller label size)

# Print and summarise results
print(split)
summary(split) # Generate a data frame of summary results

</code></pre>

<hr>
<h2 id='mbnma.run'>Run MBNMA dose-response models</h2><span id='topic+mbnma.run'></span>

<h3>Description</h3>

<p>Fits a Bayesian dose-response for model-based network meta-analysis
(MBNMA) that can account for multiple doses of different agents by
applying a desired dose-response function. Follows the methods
of Mawdsley et al. (2016).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mbnma.run(
  network,
  fun = dpoly(degree = 1),
  method = "common",
  regress = NULL,
  regress.effect = "common",
  class.effect = list(),
  UME = FALSE,
  sdscale = FALSE,
  cor = FALSE,
  omega = NULL,
  parameters.to.save = NULL,
  pd = "pd.kl",
  likelihood = NULL,
  link = NULL,
  priors = NULL,
  n.iter = 20000,
  n.chains = 3,
  n.burnin = floor(n.iter/2),
  n.thin = max(1, floor((n.iter - n.burnin)/1000)),
  autojags = FALSE,
  Rhat = 1.05,
  n.update = 10,
  model.file = NULL,
  jagsdata = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mbnma.run_+3A_network">network</code></td>
<td>
<p>An object of class <code>mbnma.network</code>.</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_fun">fun</code></td>
<td>
<p>An object of <code>class("dosefun")</code> that specifies a functional form to be assigned to the
dose-response. See Details.</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_method">method</code></td>
<td>
<p>Can take either <code>"common"</code> or <code>"random"</code> to indicate whether relative effects
should be modelled with between-study heterogeneity or not (see details).</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_regress">regress</code></td>
<td>
<p>A formula of effect modifiers (variables that
interact with the treatment effect) to incorporate using Network Meta-Regression
(E.g. <code>~ Population + Age</code>). All variables in the formula are modelled as interacting
with the treatment effect (i.e. prognostic variables cannot be included in this way).
Effects modifiers must be named variables in <code>network$data.ab</code> and must be identical
within a study. Factor and character effect modifiers will be converted to a series of
named dummy variables.</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_regress.effect">regress.effect</code></td>
<td>
<p>Indicates whether effect modification should be assumed to be
<code>"common"</code> (assumed to be equal versus Placebo throughout the network),
<code>"random"</code> (assumed to be exchangeable versus Placebo throughout the network),
<code>"agent"</code> (assumed to be equal versus Placebo within each agent), or
<code>"class"</code> (assumed to be equal versus Placebo within each class).</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_class.effect">class.effect</code></td>
<td>
<p>A list of named strings that determines which dose-response
parameters to model with a class effect and what that effect should be
(<code>"common"</code> or <code>"random"</code>). Element names should match dose-response parameter names.
Note that assuming class effects on some dose-response parameters may be unreasonable if
the range of doses differ substantially across agents within a class.</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_ume">UME</code></td>
<td>
<p>A boolean object to indicate whether to fit an Unrelated Mean Effects model
that does not assume consistency and so can be used to test if the consistency
assumption is valid.</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_sdscale">sdscale</code></td>
<td>
<p>Logical object to indicate whether to write a model that specifies a reference SD
for standardising when modelling using Standardised Mean Differences. Specifying <code>sdscale=TRUE</code>
will therefore only modify the model if link function is set to SMD (<code>link="smd"</code>).</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_cor">cor</code></td>
<td>
<p>A boolean object that indicates whether correlation should be modelled
between relative effect dose-response parameters. This is
automatically set to <code>FALSE</code> if class effects are modelled or if multiple dose-response
functions are fitted.</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_omega">omega</code></td>
<td>
<p>A scale matrix for the inverse-Wishart prior for the covariance matrix used
to model the correlation between dose-response parameters (see Details for dose-response functions). <code>omega</code> must
be a symmetric positive definite matrix with dimensions equal to the number of dose-response parameters modelled using
relative effects (<code>"rel"</code>). If left as <code>NULL</code> (the default) a diagonal matrix with elements equal to 100
is used.</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_parameters.to.save">parameters.to.save</code></td>
<td>
<p>A character vector containing names of parameters
to monitor in JAGS</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_pd">pd</code></td>
<td>
<p>Can take either:
</p>

<ul>
<li> <p><code>pv</code> only pV will be reported (as automatically outputted by <code>R2jags</code>).
</p>
</li>
<li> <p><code>plugin</code> calculates pD by the plug-in
method (Spiegelhalter et al. 2002). It is faster, but may output negative
non-sensical values, due to skewed deviances that can arise with non-linear models.
</p>
</li>
<li> <p><code>pd.kl</code> calculates pD by the Kullback-Leibler divergence (Plummer 2008). This
will require running the model for additional iterations but is a more robust calculation for the effective
number of parameters in non-linear models.
</p>
</li>
<li> <p><code>popt</code> calculates pD using an optimism adjustment which allows for calculation
of the penalized expected deviance (Plummer 2008).
</p>
</li></ul>
</td></tr>
<tr><td><code id="mbnma.run_+3A_likelihood">likelihood</code></td>
<td>
<p>A string indicating the likelihood to use in the model. Can take either <code>"binomial"</code>,
<code>"normal"</code> or <code>"poisson"</code>. If left as <code>NULL</code> the likelihood will be inferred from the data.</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_link">link</code></td>
<td>
<p>A string indicating the link function to use in the model. Can take any link function
defined within JAGS (e.g. <code>"logit"</code>, <code>"log"</code>, <code>"probit"</code>, <code>"cloglog"</code>), be assigned the value <code>"identity"</code> for
an identity link function, or be assigned the value <code>"smd"</code> for modelling Standardised Mean Differences using an
identity link function. If left as <code>NULL</code> the link function will be automatically assigned based
on the likelihood.</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_priors">priors</code></td>
<td>
<p>A named list of parameter values (without indices) and
replacement prior distribution values given as strings
<strong>using distributions as specified in JAGS syntax</strong> (see Plummer (2017)). Note
that normal distributions in JAGS are specified as </p>
<p style="text-align: center;"><code class="reqn">N(\mu, prec)</code>
</p>
<p>, where </p>
<p style="text-align: center;"><code class="reqn">prec = 1 / {\sigma^2}</code>
</p>
<p>.</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_n.iter">n.iter</code></td>
<td>
<p>number of total iterations per chain (including burn in; default: 20000)</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_n.chains">n.chains</code></td>
<td>
<p>number of Markov chains (default: 3)</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_n.burnin">n.burnin</code></td>
<td>
<p>length of burn in, i.e. number of iterations to discard at the
beginning. Default is 'n.iter/2&ldquo;, that is, discarding the first half of the
simulations. If n.burnin is 0, jags() will run 100 iterations for adaption.</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_n.thin">n.thin</code></td>
<td>
<p>thinning rate. Must be a positive integer. Set <code style="white-space: pre;">&#8288;n.thin &gt; 1`` to save memory and computation time if n.iter is large. Default is &#8288;</code>max(1, floor(n.chains * (n.iter-n.burnin) / 1000))&ldquo; which will only thin if there are at least 2000
simulations.</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_autojags">autojags</code></td>
<td>
<p>A boolean value that indicates whether the model should be continually updated until
it has converged below a specific cutoff of <code>Rhat</code></p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_rhat">Rhat</code></td>
<td>
<p>A cutoff value for the Gelman-Rubin convergence diagnostic(Gelman and Rubin 1992).
Unless all parameters have Rhat values lower than this the model will continue to sequentially update up
to a maximum of <code>n.update</code>. Default is <code>1.05</code>.</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_n.update">n.update</code></td>
<td>
<p>The maximum number of updates. Each update is run for 1000 iterations, after which the
Rhat values of all parameters are checked against <code>Rhat</code>. Default maximum updates
is <code>10</code> (i.e. 10,000 additional iterations in total).</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_model.file">model.file</code></td>
<td>
<p>The file path to a JAGS model (.jags file) that can be used
to overwrite the JAGS model that is automatically written based on the
specified options in <code>MBNMAdose</code>. Useful for adding further model flexibility.</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_jagsdata">jagsdata</code></td>
<td>
<p>A named list of the data objects to be used in the JAGS model. Only
required if users are defining their own JAGS model using <code>model.file</code>. Format
should match that of standard models fitted in <code>MBNMAdose</code>
(see <code>mbnma$model.arg$jagsdata</code>)</p>
</td></tr>
<tr><td><code id="mbnma.run_+3A_...">...</code></td>
<td>
<p>Arguments to be sent to R2jags.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When relative effects are modelled on more than one dose-response parameter and
<code>cor = TRUE</code>, correlation between the dose-response parameters is automatically
estimated using a vague Wishart prior. This prior can be made slightly more informative
by specifying the relative scale of variances between the dose-response parameters using
<code>omega</code>. <code>cor</code> will automatically be set to <code>FALSE</code> if class effects are modelled.
</p>


<h3>Value</h3>

<p>An object of S3 <code>class(c("mbnma", "rjags"))</code> containing parameter
results from the model. Can be summarized by <code>print()</code> and can check
traceplots using <code>R2jags::traceplot()</code> or various functions from the package <code>mcmcplots</code>.
</p>
<p>Nodes that are automatically monitored (if present in the model) have the
following interpretation:</p>

<table>
<tr>
 <td style="text-align: left;">
   <strong>Parameters(s)/Parameter Prefix</strong> </td><td style="text-align: left;"> <strong>Interpretation</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code style="white-space: pre;">&#8288;&lt;named dose-response parameter&gt;&#8288;</code> (e.g. <code>emax</code>) </td><td style="text-align: left;"> The pooled effect for each dose-response parameter, as defined in dose-response functions. Will vary by agent if pooling is specified as <code>"rel"</code> in the dose-response function. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>sd</code> </td><td style="text-align: left;"> The between-study SD (heterogeneity) for relative effects, reported if <code>method="random"</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code style="white-space: pre;">&#8288;sd.&lt;named dose-response parameter&gt;&#8288;</code> (e.g. <code>sd.emax</code>) </td><td style="text-align: left;"> Between-study SD (heterogeneity) for absolute dose-response parameters specified as <code>"random"</code>. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code style="white-space: pre;">&#8288;&lt;named capitalized dose-response parameter&gt;&#8288;</code> (e.g. <code>EMAX</code>) </td><td style="text-align: left;"> The class effect within each class for a given dose-response parameter. These will be estimated by the model if specified in <code>class.effects</code> for a given dose-response parameter. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code style="white-space: pre;">&#8288;sd.&lt;named capitalized dose-response parameter&gt;&#8288;</code> (e.g. <code>sd.EMAX</code>) </td><td style="text-align: left;"> The within-class SD for different agents within the same class. Will be estimated by the model if any dose-response parameter in <code>class.effect</code> is set to <code>"random"</code>. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>totresdev</code> </td><td style="text-align: left;"> The residual deviance of the model </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>deviance</code> </td><td style="text-align: left;"> The deviance of the model </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>If there are errors in the JAGS model code then the object will be a list
consisting of two elements - an error message from JAGS that can help with
debugging and <code>model.arg</code>, a list of arguments provided to <code>mbnma.run()</code>
which includes <code>jagscode</code>, the JAGS code for the model that can help
users identify the source of the error.
</p>


<h3>Dose-response parameter arguments</h3>


<table>
<tr>
 <td style="text-align: left;">
   <strong>Argument</strong> </td><td style="text-align: left;"> <strong>Model specification</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"rel"</code> </td><td style="text-align: left;"> Implies that <em>relative</em> effects should be pooled for this dose-response parameter separately for each agent in the network. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"common"</code> </td><td style="text-align: left;"> Implies that all agents share the same common effect for this dose-response parameter. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>"random"</code> </td><td style="text-align: left;"> Implies that all agents share a similar (exchangeable) effect for this dose-response parameter. This approach allows for modelling of variability between agents. </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>numeric()</code> </td><td style="text-align: left;"> Assigned a numeric value, indicating that this dose-response parameter should not be estimated from the data but should be assigned the numeric value determined by the user. This can be useful for fixing specific dose-response parameters (e.g. Hill parameters in Emax functions) to a single value. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Dose-response function</h3>

<p>Several general dose-response functions are provided, but a
user-defined dose-response relationship can instead be used.
</p>
<p>As of version 0.4.0 dose-response functions are specified as an object of <code>class("dosefun")</code>. See
help details for each of the functions below for the interpretation of specific dose-response parameters.
</p>
<p>Built-in dose-response functions are:
</p>

<ul>
<li> <p><code>dpoly()</code>: polynomial (e.g. for a linear model - <code>dpoly(degree=1)</code>)
</p>
</li>
<li> <p><code>dloglin()</code>: log-linear
</p>
</li>
<li> <p><code>dexp()</code>: exponential
</p>
</li>
<li> <p><code>demax()</code>: (emax with/without a Hill parameter)
</p>
</li>
<li> <p><code>dspline()</code>: splines (can fit B-splines (<code>type="bs"</code>), restricted cubic splines (<code>type="rcs"</code>), natural splines (<code>type="ns"</code>), or
piecewise linear splines (<code>type="ls"</code>))
</p>
</li>
<li> <p><code>dfpoly()</code>: fractional polynomials
</p>
</li>
<li> <p><code>dnonparam()</code>: Non-parametric monotonic function (<code>direction</code> can be either <code>"increasing"</code> or <code>"decreasing"</code>) following the method
of Owen et al. (2015)
</p>
</li>
<li> <p><code>duser()</code>: user-defined function
</p>
</li>
<li> <p><code>dmulti()</code>: allows agent-specific dose-response functions to be fitted. A separate function must be provided for each agent
in the network.
</p>
</li></ul>



<h3>References</h3>

<p>Gelman A, Rubin DB (1992).
&ldquo;Inference from iterative simulation using multiple sequences.&rdquo;
<em>Statistical Science</em>, <b>7</b>(4), 457-511.
<a href="https://projecteuclid.org/journals/statistical-science/volume-7/issue-4/Inference-from-Iterative-Simulation-Using-Multiple-Sequences/10.1214/ss/1177011136.full">https://projecteuclid.org/journals/statistical-science/volume-7/issue-4/Inference-from-Iterative-Simulation-Using-Multiple-Sequences/10.1214/ss/1177011136.full</a>.<br /><br /> Mawdsley D, Bennetts M, Dias S, Boucher M, Welton NJ (2016).
&ldquo;Model-Based Network Meta-Analysis: A Framework for Evidence Synthesis of Clinical Trial Data.&rdquo;
<em>CPT Pharmacometrics Syst Pharmacol</em>, <b>5</b>(8), 393-401.
ISSN 2163-8306 (Electronic) 2163-8306 (Linking), <a href="https://doi.org/10.1002/psp4.12091">doi:10.1002/psp4.12091</a>, <a href="https://pubmed.ncbi.nlm.nih.gov/27479782/">https://pubmed.ncbi.nlm.nih.gov/27479782/</a>.<br /><br /> Owen RK, Tincello DG, Keith RA (2015).
&ldquo;Network meta-analysis: development of a three-level hierarchical modeling approach incorporating dose-related constraints.&rdquo;
<em>Value Health</em>, <b>18</b>(1), 116-26.
ISSN 1524-4733 (Electronic) 1098-3015 (Linking), <a href="https://doi.org/10.1016/j.jval.2014.10.006">doi:10.1016/j.jval.2014.10.006</a>, <a href="https://pubmed.ncbi.nlm.nih.gov/25595242/">https://pubmed.ncbi.nlm.nih.gov/25595242/</a>.<br /><br /> Plummer M (2008).
&ldquo;Penalized loss functions for Bayesian model comparison.&rdquo;
<em>Biostatistics</em>, <b>9</b>(3), 523-39.
ISSN 1468-4357 (Electronic) 1465-4644 (Linking), <a href="https://pubmed.ncbi.nlm.nih.gov/18209015/">https://pubmed.ncbi.nlm.nih.gov/18209015/</a>.<br /><br /> Plummer M (2017).
<em>JAGS user manual</em>.
<a href="https://people.stat.sc.edu/hansont/stat740/jags_user_manual.pdf">https://people.stat.sc.edu/hansont/stat740/jags_user_manual.pdf</a>.<br /><br /> Spiegelhalter DJ, Best NG, Carlin BP, van der Linde A (2002).
&ldquo;Bayesian measures of model complexity and fit.&rdquo;
<em>J R Statistic Soc B</em>, <b>64</b>(4), 583-639.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)


######## Dose-response functions ########

# Fit a dose-response MBNMA with a linear function
# with common treatment effects
result &lt;- mbnma.run(network, fun=dpoly(degree=1), method="common")

# Fit a dose-response MBNMA with a log-linear function
# with random treatment effects
result &lt;- mbnma.run(network, fun=dloglin(), method="random")

# Fit a dose-response MBNMA with a fractional polynomial function
# with random treatment effects
# with a probit link function
result &lt;- mbnma.run(network, fun=dfpoly(), method="random", link="probit")

# Fit a user-defined function (quadratic)
fun.def &lt;- ~ (beta.1 * dose) + (beta.2 * (dose^2))
result &lt;- mbnma.run(network, fun=duser(fun=fun.def), method="common")

# Fit an Emax function
# with a single random (exchangeable) parameter for ED50
# with common treatment effects
result &lt;- mbnma.run(network, fun=demax(emax="rel", ed50="random"),
              method="common")

# Fit an Emax function with a Hill parameter
# with a fixed value of 5 for the Hill parameter
# with random relative effects
result &lt;- mbnma.run(network, fun=demax(hill=5), method="random")

# Fit a model with natural cubic splines
# with 3 knots at 10% 30% and 60% quartiles of dose ranges
depnet &lt;- mbnma.network(ssri) # Using the sSRI depression dataset
result &lt;- mbnma.run(depnet, fun=dspline(type="ns", knots=c(0.1,0.3,0.6)))

# Fit a model with different dose-response functions for each agent
multifun &lt;- dmulti(list(dloglin(), # for placebo (can be any function)
                       demax(), # for eletriptan
                       demax(), # for sumatriptan
                       dloglin(), # for frovatriptan
                       demax(), # for almotriptan
                       demax(), # for zolmitriptan
                       dloglin(), # for naratriptan
                       demax())) # for rizatriptan

multidose &lt;- mbnma.run(network, fun=multifun)


########## Class effects ##########

 # Using the osteoarthritis dataset
 pain.df &lt;- osteopain

 # Set a shared class (NSAID) only for Naproxcinod and Naproxen
 pain.df &lt;- pain.df %&gt;% dplyr::mutate(
                class = dplyr::case_when(agent %in% c("Naproxcinod", "Naproxen") ~ "NSAID",
                        !agent %in% c("Naproxcinod", "Naproxen") ~ agent
                        )
                )

 # Run an Emax MBNMA with a common class effect on emax
 painnet &lt;- mbnma.network(pain.df)
 result &lt;- mbnma.run(painnet, fun = demax(),
                class.effect = list(emax = "common"))


####### Priors #######

# Obtain priors from a fractional polynomial function
result &lt;- mbnma.run(network, fun=dfpoly(degree=1), method="random")
print(result$model.arg$priors)

# Change the prior distribution for the power
newpriors &lt;- list(power.1 = "dnorm(0,0.001) T(0,)")
newpriors &lt;- list(sd = "dnorm(0,0.5) T(0,)")

result &lt;- mbnma.run(network, fun=dfpoly(degree=1), method="random",
              priors=newpriors)


########## Sampler options ##########

# Change the number of MCMC iterations, the number of chains, and the thin
result &lt;- mbnma.run(network, fun=dloglin(), method="random",
              n.iter=5000, n.thin=5, n.chains=4)

# Calculate effective number of parameters via plugin method
result &lt;- mbnma.run(network, fun=dloglin(), method="random",
              pd="plugin")

# Calculate effective number of parameters using penalized expected deviance
result &lt;- mbnma.run(network, fun=dloglin(), method="random",
              pd="popt")


####### Examine MCMC diagnostics (using mcmcplots or coda packages) #######

# Density plots
mcmcplots::denplot(result)

# Traceplots
mcmcplots::traplot(result)

# Caterpillar plots
mcmcplots::caterplot(result, "rate")

# Autocorrelation plots (using the coda package)
coda::autocorr.plot(coda::as.mcmc(result))

####### Automatically run jags until convergence is reached #########

# Rhat of 1.08 is set as the criteria for convergence
#on all monitored parameters
conv.res &lt;- mbnma.run(network, fun=demax(),
              method="random",
              n.iter=10000, n.burnin=9000,
              autojags=TRUE, Rhat=1.08, n.update=8)


########## Output ###########

# Print R2jags output and summary
print(result)
summary(result)

# Plot forest plot of results
plot(result)


</code></pre>

<hr>
<h2 id='mbnma.update'>Update MBNMA to monitor deviance nodes in the model</h2><span id='topic+mbnma.update'></span>

<h3>Description</h3>

<p>Useful for obtaining deviance contributions or fitted values. Same function used in MBNMAdose and MBNMAtime packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mbnma.update(
  mbnma,
  param = "theta",
  armdat = TRUE,
  n.iter = mbnma$BUGSoutput$n.iter,
  n.thin = mbnma$BUGSoutput$n.thin
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mbnma.update_+3A_mbnma">mbnma</code></td>
<td>
<p>An S3 object of class <code>"mbnma"</code> generated by running
a dose-response MBNMA model</p>
</td></tr>
<tr><td><code id="mbnma.update_+3A_param">param</code></td>
<td>
<p>Used to indicate which node to monitor in the model. Can be any parameter
in the model code that varies by all arms within all studies. These are some typical
parameters that it might be of interest to monitor, provided they are in the original
model code:
</p>

<ul>
<li> <p><code>"theta"</code> for fitted values
</p>
</li>
<li> <p><code>"psi"</code> for fitted values on natural scale (e.g. probabilities)
</p>
</li>
<li> <p><code>"dev"</code> for deviance contributions
</p>
</li>
<li> <p><code>"resdev"</code> for residual deviance contributions
</p>
</li>
<li> <p><code>"delta"</code> for within-study relative effects versus the study reference treatment
</p>
</li></ul>
</td></tr>
<tr><td><code id="mbnma.update_+3A_armdat">armdat</code></td>
<td>
<p>Include raw arm-level data for each data point (agent, dose, study grouping)</p>
</td></tr>
<tr><td><code id="mbnma.update_+3A_n.iter">n.iter</code></td>
<td>
<p>number of total iterations per chain (including burn in;
default: 2000)</p>
</td></tr>
<tr><td><code id="mbnma.update_+3A_n.thin">n.thin</code></td>
<td>
<p>thinning rate. Must be a positive integer.  Set
<code>n.thin</code> &gt; 1 to save memory and computation time if
<code>n.iter</code> is large.  Default is <code>max(1, floor(n.chains *
    (n.iter-n.burnin) / 1000))</code> which will only thin if there are at
least 2000 simulations.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing the posterior mean of the updates by arm and study,
with arm and study identifiers.
</p>
<p>For MBNMAdose:
</p>

<ul>
<li> <p><code>facet</code> indicates the agent identifier in the given arm of a study
</p>
</li>
<li> <p><code>fupdose</code> indicates the dose in the given arm of a study
</p>
</li></ul>

<p>For MBNMAtime:
</p>

<ul>
<li> <p><code>facet</code> indicates the treatment identifier in the given arm of the study
</p>
</li>
<li> <p><code>fupdose</code> indicates the follow-up time at the given observation in the given
arm of the study
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)

# Fit a dose-response MBNMA, monitoring "psi" and "resdev"
result &lt;- mbnma.run(network, fun=dloglin(), method="random",
  parameters.to.save=c("psi", "resdev"))

mbnma.update(result, param="theta") # monitor theta

mbnma.update(result, param="rhat") # monitor rhat

mbnma.update(result, param="delta") # monitor delta


</code></pre>

<hr>
<h2 id='mbnma.validate.data'>Validates that a dataset fulfills requirements for MBNMA</h2><span id='topic+mbnma.validate.data'></span>

<h3>Description</h3>

<p>Validates that a dataset fulfills requirements for MBNMA
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mbnma.validate.data(data.ab, single.arm = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mbnma.validate.data_+3A_data.ab">data.ab</code></td>
<td>
<p>A data frame of arm-level data in &quot;long&quot; format containing the columns:
</p>

<ul>
<li> <p><code>studyID</code> Study identifiers
</p>
</li>
<li> <p><code>dose</code> Numeric data indicating the dose (must take positive values)
</p>
</li>
<li> <p><code>agent</code> Agent identifiers (can be numeric, factor or character)
</p>
</li>
<li> <p><code>y</code> Numeric data indicating the aggregate response for a continuous outcome. Required for
continuous data.
</p>
</li>
<li> <p><code>se</code> Numeric data indicating the standard error for a given observation. Required for
continuous data.
</p>
</li>
<li> <p><code>r</code> Numeric data indicating the number of responders within a study arm. Required for
binomial or poisson data.
</p>
</li>
<li> <p><code>n</code> Numeric data indicating the total number of participants within a study arm. Required for
binomial data or when modelling Standardised Mean Differences
</p>
</li>
<li> <p><code>E</code> Numeric data indicating the total exposure time for participants within a study arm. Required
for poisson data.
</p>
</li>
<li> <p><code>class</code> An optional column indicating a particular class code. Agents with the same identifier
must also have the same class code.
</p>
</li>
<li> <p><code>standsd</code> An optional column of numeric data indicating reference SDs used to standardise
treatment effects when modelling using Standardised Mean Differences (SMD).
</p>
</li></ul>
</td></tr>
<tr><td><code id="mbnma.validate.data_+3A_single.arm">single.arm</code></td>
<td>
<p>A boolean object to indicate whether to allow single arm studies in the dataset (<code>TRUE</code>)
or not (<code>FALSE</code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Checks done within the validation:
</p>

<ul>
<li><p> Checks data.ab has required column names
</p>
</li>
<li><p> Checks there are no NAs
</p>
</li>
<li><p> Checks that all SEs are &gt;0 (if variables are included in dataset)
</p>
</li>
<li><p> Checks that all doses are &gt;=0
</p>
</li>
<li><p> Checks that all r and n are positive (if variables are included in dataset)
</p>
</li>
<li><p> Checks that all y, se, r, n and E are numeric
</p>
</li>
<li><p> Checks that class codes are consistent within each agent
</p>
</li>
<li><p> Checks that agent/class names do not contain restricted characters
</p>
</li>
<li><p> Checks that studies have at least two arms (if <code>single.arm = FALSE</code>)
</p>
</li>
<li><p> Checks that each study includes at least two treatments
</p>
</li>
<li><p> Checks that agent names do not include underscores
</p>
</li>
<li><p> Checks that standsd values are consistent within a study
</p>
</li></ul>



<h3>Value</h3>

<p>An error if checks are not passed. Runs silently if checks are passed
</p>

<hr>
<h2 id='mbnma.write'>Write MBNMA dose-response model JAGS code</h2><span id='topic+mbnma.write'></span>

<h3>Description</h3>

<p>Writes JAGS code for a Bayesian time-course model for model-based network
meta-analysis (MBNMA).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mbnma.write(
  fun = dpoly(degree = 1),
  method = "common",
  regress.mat = NULL,
  regress.effect = "common",
  sdscale = FALSE,
  cor = FALSE,
  cor.prior = "wishart",
  omega = NULL,
  om = list(rel = 5, abs = 10),
  class.effect = list(),
  UME = FALSE,
  likelihood = "binomial",
  link = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mbnma.write_+3A_fun">fun</code></td>
<td>
<p>An object of <code>class("dosefun")</code> that specifies a functional form to be assigned to the
dose-response. See Details.</p>
</td></tr>
<tr><td><code id="mbnma.write_+3A_method">method</code></td>
<td>
<p>Can take either <code>"common"</code> or <code>"random"</code> to indicate whether relative effects
should be modelled with between-study heterogeneity or not (see details).</p>
</td></tr>
<tr><td><code id="mbnma.write_+3A_regress.mat">regress.mat</code></td>
<td>
<p>A Nstudy x Ncovariate design matrix of meta-regression covariates</p>
</td></tr>
<tr><td><code id="mbnma.write_+3A_regress.effect">regress.effect</code></td>
<td>
<p>Indicates whether effect modification should be assumed to be
<code>"common"</code> (assumed to be equal versus Placebo throughout the network),
<code>"random"</code> (assumed to be exchangeable versus Placebo throughout the network),
<code>"agent"</code> (assumed to be equal versus Placebo within each agent), or
<code>"class"</code> (assumed to be equal versus Placebo within each class).</p>
</td></tr>
<tr><td><code id="mbnma.write_+3A_sdscale">sdscale</code></td>
<td>
<p>Logical object to indicate whether to write a model that specifies a reference SD
for standardising when modelling using Standardised Mean Differences. Specifying <code>sdscale=TRUE</code>
will therefore only modify the model if link function is set to SMD (<code>link="smd"</code>).</p>
</td></tr>
<tr><td><code id="mbnma.write_+3A_cor">cor</code></td>
<td>
<p>A boolean object that indicates whether correlation should be modelled
between relative effect dose-response parameters. This is
automatically set to <code>FALSE</code> if class effects are modelled or if multiple dose-response
functions are fitted.</p>
</td></tr>
<tr><td><code id="mbnma.write_+3A_cor.prior">cor.prior</code></td>
<td>
<p>NOT CURRENTLY IN USE - indicates the prior distribution to use for the correlation/covariance
between relative effects. Must be kept as <code>"wishart"</code></p>
</td></tr>
<tr><td><code id="mbnma.write_+3A_omega">omega</code></td>
<td>
<p>A scale matrix for the inverse-Wishart prior for the covariance matrix used
to model the correlation between dose-response parameters (see Details for dose-response functions). <code>omega</code> must
be a symmetric positive definite matrix with dimensions equal to the number of dose-response parameters modelled using
relative effects (<code>"rel"</code>). If left as <code>NULL</code> (the default) a diagonal matrix with elements equal to 100
is used.</p>
</td></tr>
<tr><td><code id="mbnma.write_+3A_om">om</code></td>
<td>
<p>a list with two elements that report the maximum relative (<code>"rel"</code>) and maximum absolute (<code>"abs"</code>) efficacies
on the link scale.</p>
</td></tr>
<tr><td><code id="mbnma.write_+3A_class.effect">class.effect</code></td>
<td>
<p>A list of named strings that determines which dose-response
parameters to model with a class effect and what that effect should be
(<code>"common"</code> or <code>"random"</code>). Element names should match dose-response parameter names.
Note that assuming class effects on some dose-response parameters may be unreasonable if
the range of doses differ substantially across agents within a class.</p>
</td></tr>
<tr><td><code id="mbnma.write_+3A_ume">UME</code></td>
<td>
<p>A boolean object to indicate whether to fit an Unrelated Mean Effects model
that does not assume consistency and so can be used to test if the consistency
assumption is valid.</p>
</td></tr>
<tr><td><code id="mbnma.write_+3A_likelihood">likelihood</code></td>
<td>
<p>A string indicating the likelihood to use in the model. Can take either <code>"binomial"</code>,
<code>"normal"</code> or <code>"poisson"</code>. If left as <code>NULL</code> the likelihood will be inferred from the data.</p>
</td></tr>
<tr><td><code id="mbnma.write_+3A_link">link</code></td>
<td>
<p>A string indicating the link function to use in the model. Can take any link function
defined within JAGS (e.g. <code>"logit"</code>, <code>"log"</code>, <code>"probit"</code>, <code>"cloglog"</code>), be assigned the value <code>"identity"</code> for
an identity link function, or be assigned the value <code>"smd"</code> for modelling Standardised Mean Differences using an
identity link function. If left as <code>NULL</code> the link function will be automatically assigned based
on the likelihood.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When relative effects are modelled on more than one dose-response parameter and
<code>cor = TRUE</code>, correlation between the dose-response parameters is automatically
estimated using a vague Wishart prior. This prior can be made slightly more informative
by specifying the relative scale of variances between the dose-response parameters using
<code>omega</code>. <code>cor</code> will automatically be set to <code>FALSE</code> if class effects are modelled.
</p>


<h3>Value</h3>

<p>A single long character string containing the JAGS model generated
based on the arguments passed to the function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Write model code for a model with an exponential dose-response function,
# with random treatment effects
model &lt;- mbnma.write(fun=dexp(),
             method="random",
             likelihood="binomial",
             link="logit"
             )
names(model) &lt;- NULL
print(model)

# Write model code for a model with an Emax dose-response function,
# relative effects modelled on Emax with a random effects model,
# a single parameter estimated for ED50 with a common effects model
model &lt;- mbnma.write(fun=demax(emax="rel", ed50="common"),
             likelihood="normal",
             link="identity"
             )
names(model) &lt;- NULL
print(model)

# Write model code for a model with an Emax dose-response function,
# relative effects modelled on Emax and ED50.
# Class effects modelled on ED50 with common effects
model &lt;- mbnma.write(fun=demax(),
             likelihood="normal",
             link="identity",
             class.effect=list("ed50"="common")
             )
names(model) &lt;- NULL
print(model)

# Write model code for a model with an Emax dose-response function,
# relative effects modelled on Emax and ED50 with a
# random effects model that automatically models a correlation between
# both parameters.
model &lt;- mbnma.write(fun=demax(),
             method="random",
             likelihood="normal",
             link="identity",
             )
names(model) &lt;- NULL
print(model)
</code></pre>

<hr>
<h2 id='nma.nodesplit'>Node-splitting model for testing consistency at the treatment-level</h2><span id='topic+nma.nodesplit'></span><span id='topic+plot.nma.nodesplit'></span>

<h3>Description</h3>

<p>Splits contributions for a given set of treatment comparisons into direct and
indirect evidence. A discrepancy between the two suggests that the consistency
assumption required for NMA (and subsequently MBNMA) may violated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nma.nodesplit(
  network,
  likelihood = NULL,
  link = NULL,
  method = "common",
  comparisons = NULL,
  drop.discon = TRUE,
  ...
)

## S3 method for class 'nma.nodesplit'
plot(x, plot.type = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nma.nodesplit_+3A_network">network</code></td>
<td>
<p>An object of class <code>mbnma.network</code>.</p>
</td></tr>
<tr><td><code id="nma.nodesplit_+3A_likelihood">likelihood</code></td>
<td>
<p>A string indicating the likelihood to use in the model. Can take either <code>"binomial"</code>,
<code>"normal"</code> or <code>"poisson"</code>. If left as <code>NULL</code> the likelihood will be inferred from the data.</p>
</td></tr>
<tr><td><code id="nma.nodesplit_+3A_link">link</code></td>
<td>
<p>A string indicating the link function to use in the model. Can take any link function
defined within JAGS (e.g. <code>"logit"</code>, <code>"log"</code>, <code>"probit"</code>, <code>"cloglog"</code>), be assigned the value <code>"identity"</code> for
an identity link function, or be assigned the value <code>"smd"</code> for modelling Standardised Mean Differences using an
identity link function. If left as <code>NULL</code> the link function will be automatically assigned based
on the likelihood.</p>
</td></tr>
<tr><td><code id="nma.nodesplit_+3A_method">method</code></td>
<td>
<p>Can take either <code>"common"</code> or <code>"random"</code> to indicate whether relative effects
should be modelled with between-study heterogeneity or not (see details).</p>
</td></tr>
<tr><td><code id="nma.nodesplit_+3A_comparisons">comparisons</code></td>
<td>
<p>A matrix specifying the comparisons to be split (one row per comparison).
The matrix must have two columns indicating each treatment for each comparison. Values can
either be character (corresponding to the treatment names given in <code>network</code>) or
numeric (corresponding to treatment codes within the <code>network</code> - note that these
may change if <code>drop.discon = TRUE</code>).</p>
</td></tr>
<tr><td><code id="nma.nodesplit_+3A_drop.discon">drop.discon</code></td>
<td>
<p>A boolean object that indicates whether to drop treatments
that are disconnected at the treatment level. Default is <code>TRUE</code>. If set to <code>FALSE</code> then
this could lead to identification of nodesplit comparisons that are not connected
to the network reference treatment, or lead to errors in running the nodesplit models, though it
can be useful for error checking.</p>
</td></tr>
<tr><td><code id="nma.nodesplit_+3A_...">...</code></td>
<td>
<p>Arguments to be sent to <code><a href="ggplot2.html#topic+ggplot">ggplot2::ggplot()</a></code></p>
</td></tr>
<tr><td><code id="nma.nodesplit_+3A_x">x</code></td>
<td>
<p>An object of <code>class("nma.nodesplit")</code></p>
</td></tr>
<tr><td><code id="nma.nodesplit_+3A_plot.type">plot.type</code></td>
<td>
<p>A character string that can take the value of <code>"forest"</code> to plot
only forest plots, <code>"density"</code> to plot only density plots, or left as <code>NULL</code> (the
default) to plot both types of plot.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The S3 method <code>plot()</code> on an <code>nma.nodesplit</code> object generates either
forest plots of posterior medians and 95\% credible intervals, or density plots
of posterior densities for direct and indirect evidence.
</p>


<h3>Value</h3>

<p>Plots the desired graph(s) and returns an object (or list of object if
<code>plot.type=NULL</code>) of <code>class(c("gg", "ggplot"))</code>
</p>


<h3>Methods (by generic)</h3>


<ul>
<li> <p><code>plot(nma.nodesplit)</code>: Plot outputs from treatment-level nodesplit models
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)

split &lt;- nma.nodesplit(network, likelihood = "binomial", link="logit",
  method="common")



#### To perform nodesplit on selected comparisons ####

# Check for closed loops of treatments with independent evidence sources
loops &lt;- inconsistency.loops(network$data.ab)

# This...
single.split &lt;- nma.nodesplit(network, likelihood = "binomial", link="logit",
             method="random", comparisons=rbind(c("sumatriptan_1", "almotriptan_1")))

#...is the same as...
single.split &lt;- nma.nodesplit(network, likelihood = "binomial", link="logit",
             method="random", comparisons=rbind(c(6, 12)))


# Plot results
plot(split, plot.type="density") # Plot density plots of posterior densities
plot(split, plot.type="forest") # Plot forest plots of direct and indirect evidence

# Print and summarise results
print(split)
summary(split) # Generate a data frame of summary results

</code></pre>

<hr>
<h2 id='norm2lnorm'>Convert normal distribution parameters to corresponding log-normal distribution parameters</h2><span id='topic+norm2lnorm'></span>

<h3>Description</h3>

<p>Converts mean and variance of normal distribution to the parameters for a log-normal
distribution with the same mean and variance
</p>


<h3>Usage</h3>

<pre><code class='language-R'>norm2lnorm(m, v)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="norm2lnorm_+3A_m">m</code></td>
<td>
<p>Mean of the normal distribution</p>
</td></tr>
<tr><td><code id="norm2lnorm_+3A_v">v</code></td>
<td>
<p>Variance of the normal distribution</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of length two. The first element is the mean and the second element is the variance
of the log-normal distribution
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
norm &lt;- rnorm(1000, mean=5, sd=2)
params &lt;- norm2lnorm(5, 2^2)
lnorm &lt;- rlnorm(1000, meanlog=params[1], sdlog=params[2]^0.5)

# Mean and SD of lnorm is equivalent to mean and sd of norm
mean(lnorm)
sd(lnorm)

</code></pre>

<hr>
<h2 id='osteopain'>Studies of treatments for pain relief in patients with osteoarthritis</h2><span id='topic+osteopain'></span>

<h3>Description</h3>

<p>A dataset from a systematic review of interventions for pain relief in osteoarthritis, used previously
in Pedder et al. (2019). The outcome is continuous, and aggregate data responses correspond to
the mean WOMAC pain score at 2 weeks follow-up. The dataset includes 18 Randomised-Controlled Trials (RCTs),
comparing 8 different agents with placebo. In total there were 26 different treatments (combination of dose and
agent). The active treatments can also be grouped into 3 different classes, within which they have similar
mechanisms of action.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osteopain
</code></pre>


<h3>Format</h3>

<p>A data frame in long format (one row per arm and study), with 74 rows and 7 variables:
</p>

<ul>
<li> <p><code>studyID</code> Study identifiers
</p>
</li>
<li> <p><code>agent</code> Character data indicating the agent to which participants were randomised
</p>
</li>
<li> <p><code>dose</code> Numeric data indicating the standardised dose received
</p>
</li>
<li> <p><code>class</code> Character data indicating the drug class to which the agent belongs to
</p>
</li>
<li> <p><code>y</code> Numeric data indicating the mean pain score on the WOMAC scale in a study arm
</p>
</li>
<li> <p><code>se</code> Numeric data indicating the standard error for the mean pain score on the WOMAC scale in a study arm
</p>
</li>
<li> <p><code>n</code> Numeric data indicating the number of participants randomised
</p>
</li></ul>



<h3>Source</h3>

<p>Pfizer Ltd.
</p>


<h3>References</h3>

<p>Pedder H, Dias S, Bennetts M, Boucher M, Welton NJ (2019).
&ldquo;Modelling time-course relationships with multiple treatments: Model-Based Network Meta-Analysis for continuous summary outcomes.&rdquo;
<em>Res Synth Methods</em>, <b>10</b>(2), 267-286.
</p>

<hr>
<h2 id='pDcalc'>Calculate plugin pD from a JAGS model with univariate likelihood for studies
with repeated measurements</h2><span id='topic+pDcalc'></span>

<h3>Description</h3>

<p>Uses results from MBNMA JAGS models to calculate pD via the
plugin method (Spiegelhalter et al. 2002). Can only be used for models with known
standard errors or covariance matrices. Currently only functions with univariate likelihoods. Function
is identical in MBNMAdose and MBNMAtime packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pDcalc(
  obs1,
  obs2,
  fups = NULL,
  narm,
  NS,
  theta.result,
  resdev.result,
  likelihood = "normal",
  type = "time"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pDcalc_+3A_obs1">obs1</code></td>
<td>
<p>A matrix (study x arm) or array (study x arm x time point) containing
observed data for <code>y</code> (normal likelihood) or <code>r</code> (binomial or poisson likelihood)
in each arm of each study. This will be the same array
used as data for the JAGS model.</p>
</td></tr>
<tr><td><code id="pDcalc_+3A_obs2">obs2</code></td>
<td>
<p>A matrix (study x arm) or array (study x arm x time point) containing
observed data for <code>se</code> (normal likelihood), <code>n</code> (binomial likelihood) or <code>E</code> (poisson likelihood)
in each arm of each study. This will be the same array
used as data for the JAGS model.</p>
</td></tr>
<tr><td><code id="pDcalc_+3A_fups">fups</code></td>
<td>
<p>A numeric vector of length equal to the number of studies,
containing the number of follow-up mean responses reported in each study. Required for
time-course MBNMA models (if <code>type="time"</code>)</p>
</td></tr>
<tr><td><code id="pDcalc_+3A_narm">narm</code></td>
<td>
<p>A numeric vector of length equal to the number of studies,
containing the number of arms in each study.</p>
</td></tr>
<tr><td><code id="pDcalc_+3A_ns">NS</code></td>
<td>
<p>A single number equal to the number of studies in the dataset.</p>
</td></tr>
<tr><td><code id="pDcalc_+3A_theta.result">theta.result</code></td>
<td>
<p>A matrix (study x arm) or array (study x arm x time point)
containing the posterior mean predicted means/probabilities/rate in each arm of each
study. This will be estimated by the JAGS model.</p>
</td></tr>
<tr><td><code id="pDcalc_+3A_resdev.result">resdev.result</code></td>
<td>
<p>A matrix (study x arm) or array (study x arm x time point)
containing the posterior mean residual deviance contributions in each arm of each
study. This will be estimated by the JAGS model.</p>
</td></tr>
<tr><td><code id="pDcalc_+3A_likelihood">likelihood</code></td>
<td>
<p>A character object of any of the following likelihoods:
</p>

<ul>
<li> <p><code>normal</code>
</p>
</li>
<li> <p><code>binomial</code> (does not work with time-course MBNMA models)
</p>
</li>
<li> <p><code>poisson</code> (does not work with time-course MBNMA models)
</p>
</li></ul>
</td></tr>
<tr><td><code id="pDcalc_+3A_type">type</code></td>
<td>
<p>The type of MBNMA model fitted. Can be either <code>"time"</code> or <code>"dose"</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Method for calculating pD via the plugin method proposed by
Spiegelhalter (Spiegelhalter et al. 2002). Standard errors / covariance matrices must be assumed
to be known. To obtain values for <code>theta.result</code> and <code>resdev.result</code> these
parameters must be monitored when running the MBNMA model (using <code>parameters.to.save</code>).
</p>
<p>For non-linear time-course MBNMA models residual deviance contributions may be skewed, which
can lead to non-sensical results when calculating pD via the plugin method.
Alternative approaches are to use pV as an approximation or
pD calculated by Kullback-Leibler divergence (Plummer 2008).
</p>


<h3>Value</h3>

<p>A single numeric value for pD calculated via the plugin method.
</p>


<h3>References</h3>

<p>Plummer M (2008).
&ldquo;Penalized loss functions for Bayesian model comparison.&rdquo;
<em>Biostatistics</em>, <b>9</b>(3), 523-39.
ISSN 1468-4357 (Electronic) 1465-4644 (Linking), <a href="https://pubmed.ncbi.nlm.nih.gov/18209015/">https://pubmed.ncbi.nlm.nih.gov/18209015/</a>.<br /><br /> Spiegelhalter DJ, Best NG, Carlin BP, van der Linde A (2002).
&ldquo;Bayesian measures of model complexity and fit.&rdquo;
<em>J R Statistic Soc B</em>, <b>64</b>(4), 583-639.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)

# Fit a dose-response MBNMA, monitoring "psi" and "resdev"
result &lt;- mbnma.run(network, fun=dloglin(), method="random",
              parameters.to.save=c("psi", "resdev"))


#### Calculate pD for binomial data ####

# Prepare data for pD calculation
r &lt;- result$model$data()$r
n &lt;- result$model$data()$n
narm &lt;- result$model$data()$narm
NS &lt;- result$model$data()$NS

psi &lt;- result$BUGSoutput$median$psi
resdevs &lt;- result$BUGSoutput$median$resdev

# Calculate pD via plugin method
pD &lt;- pDcalc(obs1=r, obs2=n, narm=narm, NS=NS,
          theta.result=psi, resdev.result=resdevs,
          likelihood="binomial", type="dose")


</code></pre>

<hr>
<h2 id='plot.mbnma'>Forest plot for results from dose-response MBNMA models</h2><span id='topic+plot.mbnma'></span>

<h3>Description</h3>

<p>Generates a forest plot for dose-response parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mbnma'
plot(x, params = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.mbnma_+3A_x">x</code></td>
<td>
<p>An S3 object of class <code>"mbnma"</code> generated by running
a dose-response MBNMA model</p>
</td></tr>
<tr><td><code id="plot.mbnma_+3A_params">params</code></td>
<td>
<p>A character vector of dose-response parameters to plot.
Parameters must be given the same name as monitored nodes in <code>mbnma</code> and must be
modelled as relative effects (<code>"rel"</code>). Can be set to
<code>NULL</code> to include all available dose-response parameters estimated by <code>mbnma</code>.</p>
</td></tr>
<tr><td><code id="plot.mbnma_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods, such as graphical parameters</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A forest plot of class <code>c("gg", "ggplot")</code> that has separate panels for
different dose-response parameters. Results are plotted on the link scale.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)

# Run an exponential dose-response MBNMA and generate the forest plot
exponential &lt;- mbnma.run(network, fun=dexp())
plot(exponential)

# Plot only Emax parameters from an Emax dose-response MBNMA
emax &lt;- mbnma.run(network, fun=demax(), method="random")
plot(emax, params=c("emax"))


#### Forest plots including class effects ####
# Generate some classes for the data
class.df &lt;- triptans
class.df$class &lt;- ifelse(class.df$agent=="placebo", "placebo", "active1")
class.df$class &lt;- ifelse(class.df$agent=="eletriptan", "active2", class.df$class)
netclass &lt;- mbnma.network(class.df)
emax &lt;- mbnma.run(netclass, fun=demax(), method="random",
            class.effect=list("ed50"="common"))



</code></pre>

<hr>
<h2 id='plot.mbnma.network'>Create an mbnma.network object</h2><span id='topic+plot.mbnma.network'></span><span id='topic+mbnma.network'></span>

<h3>Description</h3>

<p>Creates an object of <code>class("mbnma.network")</code>. Various MBNMA functions can subsequently be applied
to this object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mbnma.network'
plot(
  x,
  level = "treatment",
  v.color = "connect",
  doselink = NULL,
  layout = igraph::in_circle(),
  remove.loops = FALSE,
  edge.scale = 1,
  v.scale = NULL,
  label.distance = 0,
  legend = TRUE,
  legend.x = "bottomleft",
  legend.y = NULL,
  ...
)

mbnma.network(data.ab, description = "Network")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.mbnma.network_+3A_x">x</code></td>
<td>
<p>An object of class <code>mbnma.network</code>.</p>
</td></tr>
<tr><td><code id="plot.mbnma.network_+3A_level">level</code></td>
<td>
<p>A string indicating whether nodes/facets should represent <code>"treatment"</code>
or <code>"agent"</code> in the plot. Can be used to examine the expected impact of modelling
dose-response in terms of network connectivity.</p>
</td></tr>
<tr><td><code id="plot.mbnma.network_+3A_v.color">v.color</code></td>
<td>
<p>Can take either <code>"connect"</code> (the default) to indicate that nodes should
only be coloured if they are connected to the network reference treatment (indicates
network connectivity) or <code>"agent"</code> to colour nodes by agent.</p>
</td></tr>
<tr><td><code id="plot.mbnma.network_+3A_doselink">doselink</code></td>
<td>
<p>If given an integer value it indicates that connections via the dose-response
relationship with placebo should be plotted. The integer represents the minimum number of doses
from which a dose-response function could be estimated and is equivalent to the number of
parameters in the desired dose-response function plus one. If left as <code>NULL</code> (the default), connections
to placebo via dose-response relationships will not be included.</p>
</td></tr>
<tr><td><code id="plot.mbnma.network_+3A_layout">layout</code></td>
<td>
<p>An igraph layout specification. This is a function specifying an igraph
layout that determines the arrangement of the vertices (nodes). The default
<code>igraph::as_circle()</code> arranged vertices in a circle. Two other useful layouts for
network plots are: <code>igraph::as_star()</code>, <code>igraph::with_fr()</code>. Others can be found
in <code><a href="igraph.html#topic+layout_">layout_</a></code></p>
</td></tr>
<tr><td><code id="plot.mbnma.network_+3A_remove.loops">remove.loops</code></td>
<td>
<p>A boolean value indicating whether to include loops that
indicate comparisons within a node.</p>
</td></tr>
<tr><td><code id="plot.mbnma.network_+3A_edge.scale">edge.scale</code></td>
<td>
<p>A number to scale the thickness of connecting lines
(edges). Line thickness is proportional to the number of studies for a
given comparison. Set to 0 to make thickness equal for all comparisons.</p>
</td></tr>
<tr><td><code id="plot.mbnma.network_+3A_v.scale">v.scale</code></td>
<td>
<p>A number with which to scale the size of the nodes. If the variable <code>N</code>
(to indicate the numbers of participants in each study arm) is included in the
dataset then the size of the nodes will be proportional to the number of participants
within a treatment/agent in the network.</p>
</td></tr>
<tr><td><code id="plot.mbnma.network_+3A_label.distance">label.distance</code></td>
<td>
<p>A number scaling the distance of labels from the nodes
to improve readability. The labels will be directly on top of the nodes if
the default of 0 is used. Option only applicable if <code>layout_in_circle</code> is
set to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="plot.mbnma.network_+3A_legend">legend</code></td>
<td>
<p>A boolean object to indicate whether or not to plot a legend to indicate which node colour
corresponds to which agent if <code>v.color="agent"</code>. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="plot.mbnma.network_+3A_legend.x">legend.x</code>, <code id="plot.mbnma.network_+3A_legend.y">legend.y</code></td>
<td>
<p>The x and y co-ordinates to be used to position the legend. They can be specified
by keyword or in any way which is accepted by <code>xy.coords</code>.</p>
</td></tr>
<tr><td><code id="plot.mbnma.network_+3A_...">...</code></td>
<td>
<p>Options for plotting in <code>igraph</code>.</p>
</td></tr>
<tr><td><code id="plot.mbnma.network_+3A_data.ab">data.ab</code></td>
<td>
<p>A data frame of arm-level data in &quot;long&quot; format containing the columns:
</p>

<ul>
<li> <p><code>studyID</code> Study identifiers
</p>
</li>
<li> <p><code>dose</code> Numeric data indicating the dose (must take positive values)
</p>
</li>
<li> <p><code>agent</code> Agent identifiers (can be numeric, factor or character)
</p>
</li>
<li> <p><code>y</code> Numeric data indicating the aggregate response for a continuous outcome. Required for
continuous data.
</p>
</li>
<li> <p><code>se</code> Numeric data indicating the standard error for a given observation. Required for
continuous data.
</p>
</li>
<li> <p><code>r</code> Numeric data indicating the number of responders within a study arm. Required for
binomial or poisson data.
</p>
</li>
<li> <p><code>n</code> Numeric data indicating the total number of participants within a study arm. Required for
binomial data or when modelling Standardised Mean Differences
</p>
</li>
<li> <p><code>E</code> Numeric data indicating the total exposure time for participants within a study arm. Required
for poisson data.
</p>
</li>
<li> <p><code>class</code> An optional column indicating a particular class code. Agents with the same identifier
must also have the same class code.
</p>
</li>
<li> <p><code>standsd</code> An optional column of numeric data indicating reference SDs used to standardise
treatment effects when modelling using Standardised Mean Differences (SMD).
</p>
</li></ul>
</td></tr>
<tr><td><code id="plot.mbnma.network_+3A_description">description</code></td>
<td>
<p>Optional. Short description of the network.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The S3 method <code>plot()</code> on an <code>mbnma.network</code> object generates a
network plot that shows how different treatments are connected within the
network via study comparisons. This can be used to identify how direct and
indirect evidence are informing different treatment comparisons. Depends on
<code><a href="igraph.html#topic+igraph">igraph</a></code>.
</p>
<p>Agents/classes for arms that have dose = 0 will be relabelled as <code>"Placebo"</code>.
Missing values (<code>NA</code>) cannot be included in the dataset. Single arm studies cannot
be included.
</p>


<h3>Value</h3>

<p><code>plot()</code>: An object of <code>class("igraph")</code> - any functions from the <code>igraph</code> package
can be applied to this object to change its characteristics.
</p>
<p><code>mbnma.network()</code>: An object of <code>class("mbnma.network")</code> which is a list containing:
</p>

<ul>
<li> <p><code>description</code> A short description of the network
</p>
</li>
<li> <p><code>data.ab</code> A data frame containing the arm-level network data (treatment identifiers will have
been recoded to a sequential numeric code)
</p>
</li>
<li> <p><code>studyID</code> A character vector with the IDs of included studies
</p>
</li>
<li> <p><code>agents</code> A character vector indicating the agent identifiers that correspond to the
new agent codes.
</p>
</li>
<li> <p><code>treatments</code> A character vector indicating the treatment identifiers that correspond
to the new treatment codes.
</p>
</li>
<li> <p><code>classes</code> A character vector indicating the class identifiers (if included in the original data)
that correspond to the new class codes.
</p>
</li></ul>



<h3>Methods (by generic)</h3>


<ul>
<li> <p><code>plot(mbnma.network)</code>: Generate a network plot
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'># Create an mbnma.network object from the data
network &lt;- mbnma.network(triptans)

# Generate a network plot from the data
plot(network)

# Generate a network plot at the agent level that removes loops indicating comparisons
#within a node
plot(network, level="agent", remove.loops=TRUE)

# Generate a network plot at the treatment level that colours nodes by agent
plot(network, v.color="agent", remove.loops=TRUE)

# Generate a network plot that includes connections via the dose-response function
# For a one parameter dose-response function (e.g. exponential)
plot(network, level="treatment", doselink=1, remove.loops=TRUE)

# For a two parameter dose-response function (e.g. Emax)
plot(network, level="treatment", doselink=2, remove.loops=TRUE)

# Arrange network plot in a star with the reference treatment in the centre
plot(network, layout=igraph::as_star(), label.distance=3)

#### Plot a network with no placebo data included ####
# Make data with no placebo
noplac.df &lt;- network$data.ab[network$data.ab$narm&gt;2 &amp; network$data.ab$agent!=1,]
net.noplac &lt;- mbnma.network(noplac.df)

# Plotting network automatically plots connections to Placebo via dose-response
plot(net.noplac)
# Using the triptans headache dataset
print(triptans)

# Define network
network &lt;- mbnma.network(triptans, description="Example network")

summary(network)
plot(network)

</code></pre>

<hr>
<h2 id='plot.mbnma.predict'>Plots predicted responses from a dose-response MBNMA model</h2><span id='topic+plot.mbnma.predict'></span>

<h3>Description</h3>

<p>Plots predicted responses on the natural scale from a dose-response MBNMA model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mbnma.predict'
plot(
  x,
  disp.obs = FALSE,
  overlay.split = FALSE,
  method = "common",
  agent.labs = NULL,
  scales = "free_x",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.mbnma.predict_+3A_x">x</code></td>
<td>
<p>An object of class <code>"mbnma.predict"</code> generated by
<code>predict("mbnma")</code></p>
</td></tr>
<tr><td><code id="plot.mbnma.predict_+3A_disp.obs">disp.obs</code></td>
<td>
<p>A boolean object to indicate whether to show the location of observed doses
in the data on the 95\% credible intervals of the predicted dose-response curves as shaded regions (<code>TRUE</code>)
or not (<code>FALSE</code>). If set to <code>TRUE</code> the original network object used for the model
<strong>must</strong> be specified in <code>network</code>.</p>
</td></tr>
<tr><td><code id="plot.mbnma.predict_+3A_overlay.split">overlay.split</code></td>
<td>
<p>A boolean object indicating whether to overlay a line
showing the split (treatment-level) NMA results on the plot (<code>TRUE</code>) or not (<code>FALSE</code>). This will
require automatic running of a split NMA model.
For <code>overlay.split=TRUE</code> the original network object used for the model
<strong>must</strong> be specified in <code>network</code>.</p>
</td></tr>
<tr><td><code id="plot.mbnma.predict_+3A_method">method</code></td>
<td>
<p>Indicates the type of split (treatment-level) NMA to perform when <code>overlay.split=TRUE</code>. Can
take either <code>"common"</code> or <code>"random"</code>.</p>
</td></tr>
<tr><td><code id="plot.mbnma.predict_+3A_agent.labs">agent.labs</code></td>
<td>
<p>A character vector of agent labels to display on plots. If
left as <code>NULL</code> (the default) the names of agents will be taken from <code>predict</code>. The position of
each label corresponds to each element of <code>predict</code>. The number of labels must equal
the number of active agents in <code>predict</code>. If placebo / dose=0 data is included in the predictions
then a label for placebo <strong>should not</strong> be included in <code>agent.labs</code>. It will not be shown
in the final plot since placebo is the point within each plot at which dose = 0 (rather
than a separate agent).</p>
</td></tr>
<tr><td><code id="plot.mbnma.predict_+3A_scales">scales</code></td>
<td>
<p>Should scales be fixed (<code>"fixed"</code>, the default),
free (<code>"free"</code>), or free in one dimension (<code>"free_x"</code>,
<code>"free_y"</code>)?</p>
</td></tr>
<tr><td><code id="plot.mbnma.predict_+3A_...">...</code></td>
<td>
<p>Arguments for <code>ggplot2</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>For the S3 method <code>plot()</code>, it is advisable to ensure predictions in
<code>predict</code> are estimated using a sufficient number of doses to ensure a smooth
predicted dose-response curve. If <code>disp.obs = TRUE</code> it is
advisable to ensure predictions in <code>predict</code> are estimated using an even
sequence of time points to avoid misrepresentation of shaded densities.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)

# Run an Emax dose-response MBNMA and predict responses
emax &lt;- mbnma.run(network, fun=demax(), method="random")
pred &lt;- predict(emax, E0 = 0.5)
plot(pred)

# Display observed doses on the plot
plot(pred, disp.obs=TRUE)

# Display split NMA results on the plot
plot(pred, overlay.split=TRUE)

# Split NMA results estimated using random treatment effects model
plot(pred, overlay.split=TRUE, method="random")

# Add agent labels
plot(pred, agent.labs=c("Elet", "Suma", "Frov", "Almo", "Zolmi",
      "Nara", "Riza"))

# These labels will throw an error because "Placebo" is included in agent.labs when
#it will not be plotted as a separate panel
#### ERROR ####
#plot(pred, agent.labs=c("Placebo", "Elet", "Suma", "Frov", "Almo", "Zolmi",
#      "Nara", "Riza"))


# If insufficient predictions are made across dose-response function
# then the plotted responses are less smooth and can be misleading
pred &lt;- predict(emax, E0 = 0.5, n.doses=3)
plot(pred)


</code></pre>

<hr>
<h2 id='plot.mbnma.rank'>Plot histograms of rankings from MBNMA models</h2><span id='topic+plot.mbnma.rank'></span>

<h3>Description</h3>

<p>Plot histograms of rankings from MBNMA models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mbnma.rank'
plot(x, params = NULL, treat.labs = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.mbnma.rank_+3A_x">x</code></td>
<td>
<p>An object of class <code>"mbnma.rank"</code> generated by <code>rank.mbnma()</code></p>
</td></tr>
<tr><td><code id="plot.mbnma.rank_+3A_params">params</code></td>
<td>
<p>A character vector of named parameters in the model that vary by either agent
or class (depending on the value assigned to <code>level</code>). If left as <code>NULL</code> (the default), then
ranking will be calculated for all available parameters that vary by agent/class.</p>
</td></tr>
<tr><td><code id="plot.mbnma.rank_+3A_treat.labs">treat.labs</code></td>
<td>
<p>A vector of treatment labels in the same order as treatment codes.
Easiest to use treatment labels stored by <code>mbnma.network()</code></p>
</td></tr>
<tr><td><code id="plot.mbnma.rank_+3A_...">...</code></td>
<td>
<p>Arguments to be sent to <code>ggplot::geom_bar()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A series of histograms that show rankings for each treatment/agent/prediction, with a
separate panel for each parameter.
The object returned is a list containing a separate element for each parameter in <code>params</code>
which is an object of <code>class(c("gg", "ggplot"))</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)

# Estimate rankings  from an Emax dose-response MBNMA
emax &lt;- mbnma.run(network, fun=demax(), method="random")
ranks &lt;- rank(emax)

# Plot rankings for both dose-response parameters (in two separate plots)
plot(ranks)

# Plot rankings just for ED50
plot(ranks, params="ed50")

# Plot rankings from prediction
doses &lt;- list("eletriptan"=c(0,1,2,3), "rizatriptan"=c(0.5,1,2))
pred &lt;- predict(emax, E0 = "rbeta(n, shape1=1, shape2=5)",
            exact.doses=doses)
rank &lt;- rank(pred)
plot(rank)


# Trying to plot a parameter that has not been ranked will return an error
#### ERROR ####
# plot(ranks, params="not.a.parameter")

</code></pre>

<hr>
<h2 id='plot.nma'>Run an NMA model</h2><span id='topic+plot.nma'></span><span id='topic+nma.run'></span>

<h3>Description</h3>

<p>Used for calculating treatment-level NMA results, either when comparing MBNMA models to models that
make no assumptions regarding dose-response , or to estimate split results for <code>overlay.split</code>.
Results can also be compared between consistency (<code>UME=FALSE</code>) and inconsistency
(<code>UME=TRUE</code>) models to test the validity of the consistency assumption at the treatment-level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'nma'
plot(x, bydose = TRUE, scales = "free_x", ...)

nma.run(
  network,
  method = "common",
  likelihood = NULL,
  link = NULL,
  priors = NULL,
  sdscale = FALSE,
  warn.rhat = TRUE,
  n.iter = 20000,
  drop.discon = TRUE,
  UME = FALSE,
  pd = "pd.kl",
  parameters.to.save = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.nma_+3A_x">x</code></td>
<td>
<p>An object of <code>class("nma")</code></p>
</td></tr>
<tr><td><code id="plot.nma_+3A_bydose">bydose</code></td>
<td>
<p>A boolean object indicating whether to plot responses with dose
on the x-axis (<code>TRUE</code>) to be able to examine potential dose-response shapes, or
to plot a conventional forest plot with all treatments on the same plot (<code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="plot.nma_+3A_scales">scales</code></td>
<td>
<p>Should scales be fixed (<code>"fixed"</code>, the default),
free (<code>"free"</code>), or free in one dimension (<code>"free_x"</code>,
<code>"free_y"</code>)?</p>
</td></tr>
<tr><td><code id="plot.nma_+3A_...">...</code></td>
<td>
<p>Arguments to be sent to <code><a href="ggplot2.html#topic+ggplot">ggplot2::ggplot()</a></code></p>
</td></tr>
<tr><td><code id="plot.nma_+3A_network">network</code></td>
<td>
<p>An object of class <code>mbnma.network</code>.</p>
</td></tr>
<tr><td><code id="plot.nma_+3A_method">method</code></td>
<td>
<p>Indicates the type of split (treatment-level) NMA to perform when <code>overlay.split=TRUE</code>. Can
take either <code>"common"</code> or <code>"random"</code>.</p>
</td></tr>
<tr><td><code id="plot.nma_+3A_likelihood">likelihood</code></td>
<td>
<p>A string indicating the likelihood to use in the model. Can take either <code>"binomial"</code>,
<code>"normal"</code> or <code>"poisson"</code>. If left as <code>NULL</code> the likelihood will be inferred from the data.</p>
</td></tr>
<tr><td><code id="plot.nma_+3A_link">link</code></td>
<td>
<p>A string indicating the link function to use in the model. Can take any link function
defined within JAGS (e.g. <code>"logit"</code>, <code>"log"</code>, <code>"probit"</code>, <code>"cloglog"</code>), be assigned the value <code>"identity"</code> for
an identity link function, or be assigned the value <code>"smd"</code> for modelling Standardised Mean Differences using an
identity link function. If left as <code>NULL</code> the link function will be automatically assigned based
on the likelihood.</p>
</td></tr>
<tr><td><code id="plot.nma_+3A_priors">priors</code></td>
<td>
<p>A named list of parameter values (without indices) and
replacement prior distribution values given as strings
<strong>using distributions as specified in JAGS syntax</strong> (see Plummer (2017)). Note
that normal distributions in JAGS are specified as </p>
<p style="text-align: center;"><code class="reqn">N(\mu, prec)</code>
</p>
<p>, where </p>
<p style="text-align: center;"><code class="reqn">prec = 1 / {\sigma^2}</code>
</p>
<p>.</p>
</td></tr>
<tr><td><code id="plot.nma_+3A_sdscale">sdscale</code></td>
<td>
<p>Logical object to indicate whether to write a model that specifies a reference SD
for standardising when modelling using Standardised Mean Differences. Specifying <code>sdscale=TRUE</code>
will therefore only modify the model if link function is set to SMD (<code>link="smd"</code>).</p>
</td></tr>
<tr><td><code id="plot.nma_+3A_warn.rhat">warn.rhat</code></td>
<td>
<p>A boolean object to indicate whether to return a warning if Rhat values
for any monitored parameter are &gt;1.02 (suggestive of non-convergence).</p>
</td></tr>
<tr><td><code id="plot.nma_+3A_n.iter">n.iter</code></td>
<td>
<p>number of total iterations per chain (including burn in; default: 20000)</p>
</td></tr>
<tr><td><code id="plot.nma_+3A_drop.discon">drop.discon</code></td>
<td>
<p>A boolean object that indicates whether or not to drop disconnected
studies from the network.</p>
</td></tr>
<tr><td><code id="plot.nma_+3A_ume">UME</code></td>
<td>
<p>A boolean object to indicate whether to fit an Unrelated Mean Effects model
that does not assume consistency and so can be used to test if the consistency
assumption is valid.</p>
</td></tr>
<tr><td><code id="plot.nma_+3A_pd">pd</code></td>
<td>
<p>Can take either:
</p>

<ul>
<li> <p><code>pv</code> only pV will be reported (as automatically outputted by <code>R2jags</code>).
</p>
</li>
<li> <p><code>plugin</code> calculates pD by the plug-in
method (Spiegelhalter et al. 2002). It is faster, but may output negative
non-sensical values, due to skewed deviances that can arise with non-linear models.
</p>
</li>
<li> <p><code>pd.kl</code> calculates pD by the Kullback-Leibler divergence (Plummer 2008). This
will require running the model for additional iterations but is a more robust calculation for the effective
number of parameters in non-linear models.
</p>
</li>
<li> <p><code>popt</code> calculates pD using an optimism adjustment which allows for calculation
of the penalized expected deviance (Plummer 2008).
</p>
</li></ul>
</td></tr>
<tr><td><code id="plot.nma_+3A_parameters.to.save">parameters.to.save</code></td>
<td>
<p>A character vector containing names of parameters
to monitor in JAGS</p>
</td></tr>
</table>


<h3>Functions</h3>


<ul>
<li> <p><code>plot(nma)</code>: Plot outputs from treatment-level NMA models
</p>
<p>Results can be plotted either as a single forest plot, or facetted by agent
and plotted with increasing dose in order to identify potential dose-response
relationships. If Placebo (or any agents with dose=0) is included in the network
then this will be used as the reference treatment, but if it is not then results
will be plotted versus the network reference used in the NMA object (<code>x</code>).
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>
# Run random effects NMA on the alogliptin dataset
alognet &lt;- mbnma.network(alog_pcfb)
nma &lt;- nma.run(alognet, method="random")
print(nma)
plot(nma)

# Run common effects NMA keeping treatments that are disconnected in the NMA
goutnet &lt;- mbnma.network(gout)
nma &lt;- nma.run(goutnet, method="common", drop.discon=FALSE)

# Run an Unrelated Mean Effects (UME) inconsistency model on triptans dataset
tripnet &lt;- mbnma.network(triptans)
ume &lt;- nma.run(tripnet, method="random", UME=TRUE)


</code></pre>

<hr>
<h2 id='predict.mbnma'>Predict responses for different doses of agents in a given population based on MBNMA
dose-response models</h2><span id='topic+predict.mbnma'></span>

<h3>Description</h3>

<p>Used to predict responses for different doses of agents or to predict
the results of a new study. This is calculated by combining
relative treatment effects with a given reference treatment response
(specific to the population of interest).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mbnma'
predict(
  object,
  n.doses = 30,
  exact.doses = NULL,
  E0 = 0.2,
  synth = "fixed",
  lim = "cred",
  regress.vals = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.mbnma_+3A_object">object</code></td>
<td>
<p>An S3 object of class <code>"mbnma"</code> generated by running
a dose-response MBNMA model</p>
</td></tr>
<tr><td><code id="predict.mbnma_+3A_n.doses">n.doses</code></td>
<td>
<p>A number indicating the number of doses at which to make predictions
within each agent. The default is <code>30</code>.</p>
</td></tr>
<tr><td><code id="predict.mbnma_+3A_exact.doses">exact.doses</code></td>
<td>
<p>A list of numeric vectors. Each named element in the list corresponds to an
agent (either named similarly to agent names given in the data, or named
correspondingly to the codes for agents given in <code>mbnma</code>) and each number within the vector
for that element corresponds to a dose of the agent for which to predict responses.
Doses can only take positive values. For models fitted using <code>dspline()</code> making predictions at only a very small
number of doses for each agent may throw an error since it can make the spline difficult to identify.</p>
</td></tr>
<tr><td><code id="predict.mbnma_+3A_e0">E0</code></td>
<td>
<p>An object to indicate the value(s) to use for the response at dose = 0 (i.e.
placebo) in the prediction. This can take a number of different formats depending
on how it will be used/calculated. The default is <code>0.2</code> since a default of <code>0</code> will typically lead
to non-sensical predictions unless an identify link function has been used for the MBNMA model in <code>object</code>.
</p>

<ul>
<li> <p><code>numeric()</code> A single numeric value representing the deterministic response at dose = 0,
given on the natural scale - so for binomial data, proportions should be given and
for Poisson data, a rate should be given.
</p>
</li>
<li> <p><code>character()</code> A single string representing a stochastic distribution for the response
at dose = 0, given on the natural scale - so for binomial data, proportions should be given and
for Poisson data, a rate should be given. This is specified as a random number generator
(RNG) given as a string, and can take any RNG distribution for which a function exists
in R. For example: <code>"rnorm(n, 7, 0.5)"</code>.
</p>
</li>
<li> <p><code>data.frame()</code> A data frame containing data in the long format (one row per study arm) to be meta-analysed
to estimate the dose = 0 (placebo) response. This could be a set of observational
studies that are specific to the population on which to make
predictions, or it can be a subset of the study arms within the MBNMA dataset
that investigate placebo. See <code><a href="#topic+ref.synth">ref.synth()</a></code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="predict.mbnma_+3A_synth">synth</code></td>
<td>
<p>A character object that can take the value <code>"fixed"</code> or <code>"random"</code> to
specify the the type of pooling to use for synthesis of <code>E0</code> if a data frame
has been provided for it. Using <code>"random"</code> rather
than <code>"fixed"</code> for <code>synth</code> will result in wider 95\% CrI for predictions.</p>
</td></tr>
<tr><td><code id="predict.mbnma_+3A_lim">lim</code></td>
<td>
<p>Specifies calculation of either 95% credible intervals (<code>lim="cred"</code>) or 95% prediction intervals (<code>lim="pred"</code>).</p>
</td></tr>
<tr><td><code id="predict.mbnma_+3A_regress.vals">regress.vals</code></td>
<td>
<p>A named numeric vector of effect modifier values at which results should
be predicted. Named elements must match variable names specified in <code>regress.vars</code> within
the MBNMA model.</p>
</td></tr>
<tr><td><code id="predict.mbnma_+3A_...">...</code></td>
<td>
<p>Arguments to be sent to <code><a href="R2jags.html#topic+jags">R2jags::jags()</a></code> for synthesis of the network
reference treatment effect (using <code><a href="#topic+ref.synth">ref.synth()</a></code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The range of doses on which to make predictions can be specified in one of two ways:
</p>

<ol>
<li><p> Use <code>max.dose</code> and <code>n.doses</code> to specify the maximum dose for each agent and the
number of doses within that agent for which to predict responses. Doses will be chosen
that are equally spaced from zero to the maximum dose for each agent. This is useful
for generating plots of predicted responses (using <code style="white-space: pre;">&#8288;[plot-mbnma.predict]&#8288;</code>) as it will
lead to fitting a smooth dose-response curve (provided <code>n.doses</code> is sufficiently high).
</p>
</li>
<li><p> Use <code>exact.doses</code> to specify the exact doses for which to predict responses for each
agent. This may be more useful when ranking different predicted responses using
<code style="white-space: pre;">&#8288;[rank-mbnma.predict]&#8288;</code>
</p>
</li></ol>



<h3>Value</h3>

<p>An S3 object of class <code>mbnma.predict</code> that contains the following
elements:
</p>

<ul>
<li> <p><code>predicts</code> A named list of
matrices. Each matrix contains the MCMC results of predicted responses at
follow-up times specified in <code>times</code> for each treatment specified in
<code>treats</code>
</p>
</li>
<li> <p><code>likelihood</code> The likelihood used in the MBNMA model <code>object</code>
</p>
</li>
<li> <p><code>link</code> The link function used in the MBNMA model <code>object</code>
</p>
</li>
<li> <p><code>network</code> The dataset in <code>mbnma.network</code> format
</p>
</li>
<li> <p><code>E0</code> A numeric vector of value(s) used for E0 in the prediction, on the
link scale.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)

# Run an Emax dose-response MBNMA
emax &lt;- mbnma.run(network, fun=demax(), method="random")


###########################
###### Specifying E0 ######
###########################

#### Predict responses using deterministic value for E0 ####
# Data is binomial so we specify E0 on the natural scale as a probability
pred &lt;- predict(emax, E0 = 0.2)

# Specifying non-sensical values will return an error
#pred &lt;- predict(emax, E0 = -10)
### ERROR ###

#### Predict responses using stochastic value for E0 ####
# Data is binomial so we might want to draw from a beta distribution
pred &lt;- predict(emax, E0 = "rbeta(n, shape1=1, shape2=5)")

# Misspecifying the RNG string will return an error
#pred &lt;- predict(emax, E0 = "rbeta(shape1=1, shape2=5)")
### ERROR ###


#### Predict responses using meta-analysis of dose = 0 studies ####

# E0 is assigned a data frame of studies to synthesis
# Can be taken from placebo arms in triptans dataset
ref.df &lt;- network$data.ab[network$data.ab$agent==1,]

# Synthesis can be fixed/random effects
pred &lt;- predict(emax, E0 = ref.df, synth="random")



######################################################################
#### Specifying which doses/agents for which to predict responses ####
######################################################################

# Change the number of predictions for each agent
pred &lt;- predict(emax, E0 = 0.2, n.doses=20)
pred &lt;- predict(emax, E0 = 0.2, n.doses=3)

# Specify several exact combinations of doses and agents to predict
pred &lt;- predict(emax, E0 = 0.2,
            exact.doses=list("eletriptan"=c(0:5), "sumatriptan"=c(1,3,5)))
plot(pred) # Plot predictions

# Print and summarise `mbnma.predict` object
print(pred)
summary(pred)

# Plot `mbnma.predict` object
plot(pred)


</code></pre>

<hr>
<h2 id='print.mbnma.network'>Print mbnma.network information to the console</h2><span id='topic+print.mbnma.network'></span>

<h3>Description</h3>

<p>Print mbnma.network information to the console
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mbnma.network'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.mbnma.network_+3A_x">x</code></td>
<td>
<p>An object of class <code>mbnma.network</code>.</p>
</td></tr>
<tr><td><code id="print.mbnma.network_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods</p>
</td></tr>
</table>

<hr>
<h2 id='print.mbnma.predict'>Print summary information from an mbnma.predict object</h2><span id='topic+print.mbnma.predict'></span>

<h3>Description</h3>

<p>Print summary information from an mbnma.predict object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mbnma.predict'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.mbnma.predict_+3A_x">x</code></td>
<td>
<p>An object of <code>class("mbnma.predict")</code> generated by <code>predict.mbnma()</code></p>
</td></tr>
<tr><td><code id="print.mbnma.predict_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods</p>
</td></tr>
</table>

<hr>
<h2 id='print.mbnma.rank'>Prints summary information about an mbnma.rank object</h2><span id='topic+print.mbnma.rank'></span>

<h3>Description</h3>

<p>Prints summary information about an mbnma.rank object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mbnma.rank'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.mbnma.rank_+3A_x">x</code></td>
<td>
<p>An object of class <code>"mbnma.rank"</code> generated by <code>rank.mbnma()</code></p>
</td></tr>
<tr><td><code id="print.mbnma.rank_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods</p>
</td></tr>
</table>

<hr>
<h2 id='print.nma.nodesplit'>Prints summary results from an nma.nodesplit object</h2><span id='topic+print.nma.nodesplit'></span>

<h3>Description</h3>

<p>Prints summary results from an nma.nodesplit object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'nma.nodesplit'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.nma.nodesplit_+3A_x">x</code></td>
<td>
<p>An object of <code>class("nma.nodesplit")</code></p>
</td></tr>
<tr><td><code id="print.nma.nodesplit_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods</p>
</td></tr>
</table>

<hr>
<h2 id='print.nodesplit'>Prints summary results from a nodesplit object</h2><span id='topic+print.nodesplit'></span>

<h3>Description</h3>

<p>Prints summary results from a nodesplit object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'nodesplit'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.nodesplit_+3A_x">x</code></td>
<td>
<p>An object of <code>class("nodesplit")</code></p>
</td></tr>
<tr><td><code id="print.nodesplit_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods</p>
</td></tr>
</table>

<hr>
<h2 id='print.relative.array'>Print posterior medians (95% credible intervals) for table of relative effects/mean
differences between treatments/classes</h2><span id='topic+print.relative.array'></span>

<h3>Description</h3>

<p>Print posterior medians (95% credible intervals) for table of relative effects/mean
differences between treatments/classes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'relative.array'
print(x, digits = 2, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.relative.array_+3A_x">x</code></td>
<td>
<p>An object of class <code>"relative.array"</code> generated by <code>get.relative()</code></p>
</td></tr>
<tr><td><code id="print.relative.array_+3A_digits">digits</code></td>
<td>
<p>An integer indicating the number of significant digits to be used.</p>
</td></tr>
<tr><td><code id="print.relative.array_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code>knitr::kable</code></p>
</td></tr>
</table>

<hr>
<h2 id='psoriasis100'>Studies of biologics for treatment of moderate-to-severe psoriasis (100% improvement)</h2><span id='topic+psoriasis100'></span>

<h3>Description</h3>

<p>A dataset from a systematic review of Randomised-Controlled Trials (RCTs) comparing biologics at different doses and placebo
(Warren et al. 2019). The outcome is the number of patients experiencing 100% improvement on the Psoriasis
Area and Severity Index (PASI) measured at 12 weeks follow-up. The dataset
includes 19 Randomised-Controlled Trials (RCTs), comparing 8 different biologics at different doses with placebo.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>psoriasis100
</code></pre>


<h3>Format</h3>

<p>A data frame in long format (one row per arm and study), with 81 rows and 9 variables:
</p>

<ul>
<li> <p><code>studyID</code> Study identifiers
</p>
</li>
<li> <p><code>agent</code> Character data indicating the agent to which participants were randomised
</p>
</li>
<li> <p><code>dose_mg</code> Numeric data indicating the dose to which participants were randomised in mg
</p>
</li>
<li> <p><code>freq</code> Character data indicating the frequency of the dose to which participants were randomised
</p>
</li>
<li> <p><code>dose</code> Numeric data indicating the dose in mg/week to which the participants were randomised
</p>
</li>
<li> <p><code>n</code> Numeric data indicating the number of participants randomised
</p>
</li>
<li> <p><code>r</code> Numeric data indicating the number of participants who achieved 100% improvement in PASI score after 12 weeks
</p>
</li></ul>



<h3>References</h3>

<p>Warren RB, Gooderham M, Burge R, Zhu B, Amato D, Liu KH, Shrom D, Guo J, Brnabic A, Blauvelt A (2019).
&ldquo;Comparison of cumulative clinical benefits of biologics for the treatment of psoriasis over 16 weeks: Results from a network meta-analysis.&rdquo;
<em>J Am Acad Dermatol</em>, <b>82</b>(5), 1138-1149.
</p>

<hr>
<h2 id='psoriasis75'>Studies of biologics for treatment of moderate-to-severe psoriasis (&gt;=75% improvement)</h2><span id='topic+psoriasis75'></span>

<h3>Description</h3>

<p>A dataset from a systematic review of Randomised-Controlled Trials (RCTs) comparing biologics at different doses and placebo
(Warren et al. 2019). The outcome is the number of patients experiencing &gt;=75% improvement on the Psoriasis
Area and Severity Index (PASI) measured at 12 weeks follow-up. The dataset
includes 28 Randomised-Controlled Trials (RCTs), comparing 9 different biologics at different doses with placebo.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>psoriasis75
</code></pre>


<h3>Format</h3>

<p>A data frame in long format (one row per arm and study), with 81 rows and 9 variables:
</p>

<ul>
<li> <p><code>studyID</code> Study identifiers
</p>
</li>
<li> <p><code>agent</code> Character data indicating the agent to which participants were randomised
</p>
</li>
<li> <p><code>dose_mg</code> Numeric data indicating the dose to which participants were randomised in mg
</p>
</li>
<li> <p><code>freq</code> Character data indicating the frequency of the dose to which participants were randomised
</p>
</li>
<li> <p><code>dose</code> Numeric data indicating the dose in mg/week to which the participants were randomised
</p>
</li>
<li> <p><code>n</code> Numeric data indicating the number of participants randomised
</p>
</li>
<li> <p><code>r</code> Numeric data indicating the number of participants who achieved &gt;=75% improvement in PASI score after 12 weeks
</p>
</li></ul>



<h3>References</h3>

<p>Warren RB, Gooderham M, Burge R, Zhu B, Amato D, Liu KH, Shrom D, Guo J, Brnabic A, Blauvelt A (2019).
&ldquo;Comparison of cumulative clinical benefits of biologics for the treatment of psoriasis over 16 weeks: Results from a network meta-analysis.&rdquo;
<em>J Am Acad Dermatol</em>, <b>82</b>(5), 1138-1149.
</p>

<hr>
<h2 id='psoriasis90'>Studies of biologics for treatment of moderate-to-severe psoriasis (&gt;=90% improvement)</h2><span id='topic+psoriasis90'></span>

<h3>Description</h3>

<p>A dataset from a systematic review of Randomised-Controlled Trials (RCTs) comparing biologics at different doses and placebo
(Warren et al. 2019). The outcome is the number of patients experiencing &gt;=90% improvement on the Psoriasis
Area and Severity Index (PASI) measured at 12 weeks follow-up. The dataset
includes 24 Randomised-Controlled Trials (RCTs), comparing 9 different biologics at different doses with placebo.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>psoriasis90
</code></pre>


<h3>Format</h3>

<p>A data frame in long format (one row per arm and study), with 81 rows and 9 variables:
</p>

<ul>
<li> <p><code>studyID</code> Study identifiers
</p>
</li>
<li> <p><code>agent</code> Character data indicating the agent to which participants were randomised
</p>
</li>
<li> <p><code>dose_mg</code> Numeric data indicating the dose to which participants were randomised in mg
</p>
</li>
<li> <p><code>freq</code> Character data indicating the frequency of the dose to which participants were randomised
</p>
</li>
<li> <p><code>dose</code> Numeric data indicating the dose in mg/week to which the participants were randomised
</p>
</li>
<li> <p><code>n</code> Numeric data indicating the number of participants randomised
</p>
</li>
<li> <p><code>r</code> Numeric data indicating the number of participants who achieved &gt;=90% improvement in PASI score after 12 weeks
</p>
</li></ul>



<h3>References</h3>

<p>Warren RB, Gooderham M, Burge R, Zhu B, Amato D, Liu KH, Shrom D, Guo J, Brnabic A, Blauvelt A (2019).
&ldquo;Comparison of cumulative clinical benefits of biologics for the treatment of psoriasis over 16 weeks: Results from a network meta-analysis.&rdquo;
<em>J Am Acad Dermatol</em>, <b>82</b>(5), 1138-1149.
</p>

<hr>
<h2 id='rank'>Set rank as a method</h2><span id='topic+rank'></span>

<h3>Description</h3>

<p>Set rank as a method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rank(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rank_+3A_x">x</code></td>
<td>
<p>An object on which to apply the rank method</p>
</td></tr>
<tr><td><code id="rank_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods</p>
</td></tr>
</table>

<hr>
<h2 id='rank.mbnma'>Rank parameter estimates</h2><span id='topic+rank.mbnma'></span>

<h3>Description</h3>

<p>Only parameters that vary by agent/class can be ranked.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mbnma'
rank(
  x,
  params = NULL,
  lower_better = TRUE,
  level = "agent",
  to.rank = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rank.mbnma_+3A_x">x</code></td>
<td>
<p>An object on which to apply the rank method</p>
</td></tr>
<tr><td><code id="rank.mbnma_+3A_params">params</code></td>
<td>
<p>A character vector of named parameters in the model that vary by either agent
or class (depending on the value assigned to <code>level</code>). If left as <code>NULL</code> (the default), then
ranking will be calculated for all available parameters that vary by agent/class.</p>
</td></tr>
<tr><td><code id="rank.mbnma_+3A_lower_better">lower_better</code></td>
<td>
<p>Indicates whether negative responses are better (<code>TRUE</code>) or positive responses are better (<code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="rank.mbnma_+3A_level">level</code></td>
<td>
<p>Can be set to <code>"agent"</code> to rank across different agents or <code>"class"</code> to rank
across different classes.</p>
</td></tr>
<tr><td><code id="rank.mbnma_+3A_to.rank">to.rank</code></td>
<td>
<p>A numeric vector containing the codes for the agents/classes you wish to rank.
If left <code>NULL</code> then all agents/classes (depending on the value assigned to <code>level</code>) in
the model will be ranked. Included codes must be greater than
<code>2</code> if placebo has been modelled, since placebo cannot be included in the ranking</p>
</td></tr>
<tr><td><code id="rank.mbnma_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Ranking cannot currently be performed on non-parametric dose-response MBNMA
</p>


<h3>Value</h3>

<p>An object of <code>class("mbnma.rank")</code> which is a list containing a summary data
frame, a matrix of rankings for each MCMC iteration, a matrix of probabilities
that each agent has a particular rank, and a matrix of cumulative ranking probabilities
for each agent, for each parameter that has been ranked.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)

# Rank selected agents from a log-linear dose-response MBNMA
loglin &lt;- mbnma.run(network, fun=dloglin())
ranks &lt;- rank(loglin, to.rank=c("zolmitriptan", "eletriptan", "sumatriptan"))
summary(ranks)

# Rank only ED50 parameters from an Emax dose-response MBNMA
emax &lt;- mbnma.run(network, fun=demax(), method="random")
ranks &lt;- rank(emax, params="ed50")
summary(ranks)


#### Ranking by class ####
# Generate some classes for the data
class.df &lt;- triptans
class.df$class &lt;- ifelse(class.df$agent=="placebo", "placebo", "active1")
class.df$class &lt;- ifelse(class.df$agent=="eletriptan", "active2", class.df$class)
netclass &lt;- mbnma.network(class.df)
emax &lt;- mbnma.run(netclass, fun=demax(), method="random",
            class.effect=list("ed50"="common"))

# Rank by class, with negative responses being worse
ranks &lt;- rank(emax, level="class", lower_better=FALSE)
print(ranks)

# Print and generate summary data frame for `mbnma.rank` object
summary(ranks)
print(ranks)

# Plot `mbnma.rank` object
plot(ranks)


</code></pre>

<hr>
<h2 id='rank.mbnma.predict'>Rank predicted doses of different agents</h2><span id='topic+rank.mbnma.predict'></span>

<h3>Description</h3>

<p>Ranks predictions at different doses from best to worst.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mbnma.predict'
rank(x, lower_better = TRUE, rank.doses = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rank.mbnma.predict_+3A_x">x</code></td>
<td>
<p>An object on which to apply the rank method</p>
</td></tr>
<tr><td><code id="rank.mbnma.predict_+3A_lower_better">lower_better</code></td>
<td>
<p>Indicates whether negative responses are better (<code>TRUE</code>) or positive responses are better (<code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="rank.mbnma.predict_+3A_rank.doses">rank.doses</code></td>
<td>
<p>A list of numeric vectors. Each named element corresponds to an
agent (as named/coded in <code>predict</code>), and each number within the vector for that element corresponds to the dose
for that agent. Doses of agents specified in <code>rank.doses</code> <strong>must</strong> be a subset of those
for which responses have been predicted in <code>predict</code>. If left as <code>NULL</code> (the default)
then all doses of all agents in <code>predict</code> will be ranked.</p>
</td></tr>
<tr><td><code id="rank.mbnma.predict_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>predict</code> contains multiple predictions at dose=0, then only the first of these
will be included, to avoid duplicating rankings.
</p>


<h3>Value</h3>

<p>An object of <code>class("mbnma.rank")</code> which is a list containing a summary data
frame, a matrix of rankings for each MCMC iteration, and a matrix of probabilities
that each agent has a particular rank, for each parameter that has been ranked.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)

# Rank all predictions from a log-linear dose-response MBNMA
loglin &lt;- mbnma.run(network, fun=dloglin())
pred &lt;- predict(loglin, E0 = 0.5)
rank &lt;- rank(pred)
summary(rank)

# Rank selected predictions from an Emax dose-response MBNMA
emax &lt;- mbnma.run(network, fun=demax(), method="random")
doses &lt;- list("eletriptan"=c(0,1,2,3), "rizatriptan"=c(0.5,1,2))
pred &lt;- predict(emax, E0 = "rbeta(n, shape1=1, shape2=5)",
            exact.doses=doses)
rank &lt;- rank(pred,
            rank.doses=list("eletriptan"=c(0,2), "rizatriptan"=2))

# Print and generate summary data frame for `mbnma.rank` object
summary(rank)
print(rank)

# Plot `mbnma.rank` object
plot(rank)


</code></pre>

<hr>
<h2 id='rank.relative.array'>Rank relative effects obtained between specific doses</h2><span id='topic+rank.relative.array'></span>

<h3>Description</h3>

<p>Ranks <code>"relative.table"</code> objects generated by <code>get.relative()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'relative.array'
rank(x, lower_better = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rank.relative.array_+3A_x">x</code></td>
<td>
<p>An object on which to apply the rank method</p>
</td></tr>
<tr><td><code id="rank.relative.array_+3A_lower_better">lower_better</code></td>
<td>
<p>Indicates whether negative responses are better (<code>TRUE</code>) or positive responses are better (<code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="rank.relative.array_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of <code>class("mbnma.rank")</code> which is a list containing a summary data
frame, a matrix of rankings for each MCMC iteration, and a matrix of probabilities
that each agent has a particular rank, for each parameter that has been ranked.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)

# Rank selected predictions from an Emax dose-response MBNMA
emax &lt;- mbnma.run(network, fun=demax(), method="random")
rels &lt;- get.relative(emax)
rank &lt;- rank(rels, lower_better=TRUE)

# Print and generate summary data frame for `mbnma.rank` object
summary(rank)
print(rank)

# Plot `mbnma.rank` object
plot(rank)


</code></pre>

<hr>
<h2 id='recode.agent'>Assigns agent or class variables numeric identifiers</h2><span id='topic+recode.agent'></span>

<h3>Description</h3>

<p>Assigns agent or class variables numeric identifiers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recode.agent(data.ab, level = "agent")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recode.agent_+3A_data.ab">data.ab</code></td>
<td>
<p>A data frame of arm-level data in &quot;long&quot; format containing the columns:
</p>

<ul>
<li> <p><code>studyID</code> Study identifiers
</p>
</li>
<li> <p><code>dose</code> Numeric data indicating the dose (must take positive values)
</p>
</li>
<li> <p><code>agent</code> Agent identifiers (can be numeric, factor or character)
</p>
</li>
<li> <p><code>y</code> Numeric data indicating the aggregate response for a continuous outcome. Required for
continuous data.
</p>
</li>
<li> <p><code>se</code> Numeric data indicating the standard error for a given observation. Required for
continuous data.
</p>
</li>
<li> <p><code>r</code> Numeric data indicating the number of responders within a study arm. Required for
binomial or poisson data.
</p>
</li>
<li> <p><code>n</code> Numeric data indicating the total number of participants within a study arm. Required for
binomial data or when modelling Standardised Mean Differences
</p>
</li>
<li> <p><code>E</code> Numeric data indicating the total exposure time for participants within a study arm. Required
for poisson data.
</p>
</li>
<li> <p><code>class</code> An optional column indicating a particular class code. Agents with the same identifier
must also have the same class code.
</p>
</li>
<li> <p><code>standsd</code> An optional column of numeric data indicating reference SDs used to standardise
treatment effects when modelling using Standardised Mean Differences (SMD).
</p>
</li></ul>
</td></tr>
<tr><td><code id="recode.agent_+3A_level">level</code></td>
<td>
<p>Can take either <code>"agent"</code> or <code>"class"</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Also relabels the agent for any arms in which dose = 0 to &quot;Placebo_0&quot;
</p>


<h3>Value</h3>

<p>A list containing a data frame with recoded agent/class identifiers and
a character vector of original agent/class names
</p>

<hr>
<h2 id='ref.synth'>Synthesise single arm dose = 0 / placebo studies to estimate E0</h2><span id='topic+ref.synth'></span>

<h3>Description</h3>

<p>Synthesises single arm studies to estimate E0. Used in predicting responses from a
dose-response MBNMA.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ref.synth(
  data.ab,
  mbnma,
  synth = "fixed",
  n.iter = mbnma$BUGSoutput$n.iter,
  n.burnin = mbnma$BUGSoutput$n.burnin,
  n.thin = mbnma$BUGSoutput$n.thin,
  n.chains = mbnma$BUGSoutput$n.chains,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ref.synth_+3A_data.ab">data.ab</code></td>
<td>
<p>A data frame of arm-level data in &quot;long&quot; format containing the
columns:
</p>

<ul>
<li> <p><code>studyID</code> Study identifiers
</p>
</li>
<li> <p><code>y</code> Numeric data indicating the aggregate response for a continuous outcome. Required for
continuous data.
</p>
</li>
<li> <p><code>se</code> Numeric data indicating the standard error for a given observation. Required for
continuous data.
</p>
</li>
<li> <p><code>r</code> Numeric data indicating the number of responders within a study arm. Required for
binomial or poisson data.
</p>
</li>
<li> <p><code>n</code> Numeric data indicating the total number of participants within a study arm. Required for
binomial data
</p>
</li>
<li> <p><code>E</code> Numeric data indicating the total exposure time for participants within a study arm. Required
for poisson data.
</p>
</li></ul>
</td></tr>
<tr><td><code id="ref.synth_+3A_mbnma">mbnma</code></td>
<td>
<p>An S3 object of class <code>"mbnma"</code> generated by running
a dose-response MBNMA model</p>
</td></tr>
<tr><td><code id="ref.synth_+3A_synth">synth</code></td>
<td>
<p>A character object that can take the value <code>"fixed"</code> or <code>"random"</code> to
specify the the type of pooling to use for synthesis of <code>E0</code> if a data frame
has been provided for it. Using <code>"random"</code> rather
than <code>"fixed"</code> for <code>synth</code> will result in wider 95\% CrI for predictions.</p>
</td></tr>
<tr><td><code id="ref.synth_+3A_n.iter">n.iter</code></td>
<td>
<p>number of total iterations per chain (including burn in;
default: 2000)</p>
</td></tr>
<tr><td><code id="ref.synth_+3A_n.burnin">n.burnin</code></td>
<td>
<p>length of burn in, i.e. number of iterations to
discard at the beginning. Default is <code>n.iter/2</code>, that is,
discarding the first half of the simulations. If n.burnin is 0,
<code>jags()</code> will run 100 iterations for adaption.</p>
</td></tr>
<tr><td><code id="ref.synth_+3A_n.thin">n.thin</code></td>
<td>
<p>thinning rate. Must be a positive integer.  Set
<code>n.thin</code> &gt; 1 to save memory and computation time if
<code>n.iter</code> is large.  Default is <code>max(1, floor(n.chains *
    (n.iter-n.burnin) / 1000))</code> which will only thin if there are at
least 2000 simulations.</p>
</td></tr>
<tr><td><code id="ref.synth_+3A_n.chains">n.chains</code></td>
<td>
<p>number of Markov chains (default: 3)</p>
</td></tr>
<tr><td><code id="ref.synth_+3A_...">...</code></td>
<td>
<p>Arguments to be sent to <code><a href="R2jags.html#topic+jags">R2jags::jags()</a></code> for synthesis of the network
reference treatment effect (using <code><a href="#topic+ref.synth">ref.synth()</a></code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>data.ab</code> can be a collection of studies that closely resemble the
population of interest intended for the prediction, which could be
different to those used to estimate the MBNMA model, and could include
single arms of RCTs or observational studies. If other data is not
available, the data used to estimate the MBNMA model can be used by
selecting only the studies and arms that investigate dose = 0 (placebo).
</p>
<p>Defaults for <code>n.iter</code>, <code>n.burnin</code>, <code>n.thin</code> and <code>n.chains</code> are those used to estimate
<code>mbnma</code>.
</p>


<h3>Value</h3>

<p>A list of named elements corresponding to E0 and the between-study standard deviation for
E0 if <code>synth="random"</code>. Each element contains the full MCMC results from the synthesis.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Using the triptans data
network &lt;- mbnma.network(triptans)

# Run an Emax dose-response MBNMA
emax &lt;- mbnma.run(network, fun=demax(), method="random")

# Data frame for synthesis can be taken from placebo arms
ref.df &lt;- triptans[triptans$agent=="placebo",]

# Meta-analyse placebo studies using fixed treatment effects
E0 &lt;- ref.synth(ref.df, emax, synth="fixed")
names(E0)

# Meta-analyse placebo studies using random treatment effects
E0 &lt;- ref.synth(ref.df, emax, synth="random")
names(E0)


</code></pre>

<hr>
<h2 id='rescale.link'>Rescale data depending on the link function provided</h2><span id='topic+rescale.link'></span>

<h3>Description</h3>

<p>Rescale data depending on the link function provided
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rescale.link(x, direction = "link", link = "logit")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rescale.link_+3A_x">x</code></td>
<td>
<p>A numeric vector of data to be rescaled</p>
</td></tr>
<tr><td><code id="rescale.link_+3A_direction">direction</code></td>
<td>
<p>Can take either <code>"link"</code> to convert data to a particular scale
as defined by the <code>link</code> function, or <code>"natural"</code> to return it to the natural scale.</p>
</td></tr>
<tr><td><code id="rescale.link_+3A_link">link</code></td>
<td>
<p>A string indicating the link function to use in the model. Can take any link function
defined within JAGS (e.g. <code>"logit"</code>, <code>"log"</code>, <code>"probit"</code>, <code>"cloglog"</code>), be assigned the value <code>"identity"</code> for
an identity link function, or be assigned the value <code>"smd"</code> for modelling Standardised Mean Differences using an
identity link function. If left as <code>NULL</code> the link function will be automatically assigned based
on the likelihood.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A rescaled numeric vector
</p>

<hr>
<h2 id='ssi_closure'>Studies of wound closure methods to reduce Surgical Site Infections (SSI)</h2><span id='topic+ssi_closure'></span>

<h3>Description</h3>

<p>A dataset from an ongoing systematic review examining the efficacy of different wound closure methods to reduce surgical
site infections (SSI). The outcome is binary and represents the number of patients who experienced a SSI. The dataset
includes 129 RCTs comparing 16 different interventions in 6 classes. This dataset is primarily used to illustrate
how <code>MBNMAdose</code> can be used to perform different types of network meta-analysis without dose-response information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ssi_closure
</code></pre>


<h3>Format</h3>

<p>A data frame in long format (one row per arm and study), with 281 rows and 6 variables:
</p>

<ul>
<li> <p><code>studyID</code> Study identifiers
</p>
</li>
<li> <p><code>Year</code> Year of publication
</p>
</li>
<li> <p><code>n</code> Numeric data indicating the number of participants randomised
</p>
</li>
<li> <p><code>r</code> Numeric data indicating the number of participants who achieved &gt;50% improvement in depression symptoms
</p>
</li>
<li> <p><code>trt</code> Treatment names, given as character data
</p>
</li>
<li> <p><code>class</code> Class names, given as character data
</p>
</li></ul>


<hr>
<h2 id='ssri'>Studies of Selective Serotonin Reuptake Inhibitors (SSRIs) for major depression</h2><span id='topic+ssri'></span>

<h3>Description</h3>

<p>A dataset from a systematic review examining the efficacy of different doses of SSRI antidepressant drugs and placebo
(Furukawa et al. 2019). The response to treatment is defined as a 50% reduction in depressive symptoms after 8 weeks
(4-12 week range) follow-up. The dataset includes 60 RCTs comparing 5 different SSRIs with placebo.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ssri
</code></pre>


<h3>Format</h3>

<p>A data frame in long format (one row per arm and study), with 145 rows and 8 variables:
</p>

<ul>
<li> <p><code>studyID</code> Study identifiers
</p>
</li>
<li> <p><code>bias</code> Risk of bias evaluated on 6 domains
</p>
</li>
<li> <p><code>age</code> Mean participant age
</p>
</li>
<li> <p><code>weeks</code> Duration of study follow-up
</p>
</li>
<li> <p><code>agent</code> Character data indicating the agent to which participants were randomised
</p>
</li>
<li> <p><code>dose</code> Numeric data indicating the dose to which participants were randomised in mg
</p>
</li>
<li> <p><code>n</code> Numeric data indicating the number of participants randomised
</p>
</li>
<li> <p><code>r</code> Numeric data indicating the number of participants who achieved &gt;50% improvement in depression symptoms
</p>
</li></ul>



<h3>References</h3>

<p>Furukawa TA, Cipriani A, Cowen PJ, Leucht S, Egger M, Salanti G (2019).
&ldquo;Optimal dose of selective serotonin reuptake inhibitors, venlafaxine, and mirtazapine in major depression: a systematic review and dose-response meta-analysis.&rdquo;
<em>Lancet Psychiatry</em>, <b>6</b>, 601-609.
</p>

<hr>
<h2 id='summary.mbnma'>Print summary of MBNMA results to the console</h2><span id='topic+summary.mbnma'></span>

<h3>Description</h3>

<p>Print summary of MBNMA results to the console
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mbnma'
summary(object, digits = 4, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.mbnma_+3A_object">object</code></td>
<td>
<p>An S3 object of class <code>"mbnma"</code> generated by running
a dose-response MBNMA model</p>
</td></tr>
<tr><td><code id="summary.mbnma_+3A_digits">digits</code></td>
<td>
<p>The maximum number of digits for numeric columns</p>
</td></tr>
<tr><td><code id="summary.mbnma_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced</p>
</td></tr>
</table>

<hr>
<h2 id='summary.mbnma.network'>Print summary mbnma.network information to the console</h2><span id='topic+summary.mbnma.network'></span>

<h3>Description</h3>

<p>Print summary mbnma.network information to the console
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mbnma.network'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.mbnma.network_+3A_object">object</code></td>
<td>
<p>An object of class <code>mbnma.network</code>.</p>
</td></tr>
<tr><td><code id="summary.mbnma.network_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods</p>
</td></tr>
</table>

<hr>
<h2 id='summary.mbnma.predict'>Produces a summary data frame from an mbnma.predict object</h2><span id='topic+summary.mbnma.predict'></span>

<h3>Description</h3>

<p>Produces a summary data frame from an mbnma.predict object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mbnma.predict'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.mbnma.predict_+3A_object">object</code></td>
<td>
<p>An object of <code style="white-space: pre;">&#8288;class("mbnma.predict)"&#8288;</code> generated by
<code>predict("mbnma")</code></p>
</td></tr>
<tr><td><code id="summary.mbnma.predict_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing posterior summary statistics from predicted responses
from a dose-response MBNMA model
</p>

<hr>
<h2 id='summary.mbnma.rank'>Generates summary data frames for an mbnma.rank object</h2><span id='topic+summary.mbnma.rank'></span>

<h3>Description</h3>

<p>Generates summary data frames for an mbnma.rank object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mbnma.rank'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.mbnma.rank_+3A_object">object</code></td>
<td>
<p>An object of <code>class("mbnma.rank")</code> generated by <code>rank.mbnma()</code></p>
</td></tr>
<tr><td><code id="summary.mbnma.rank_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list in which each element represents a parameter that has been ranked
in <code>mbnma.rank</code> and contains a data frame of summary ranking results.
</p>

<hr>
<h2 id='summary.nma.nodesplit'>Generates a summary data frame for nma.nodesplit objects</h2><span id='topic+summary.nma.nodesplit'></span>

<h3>Description</h3>

<p>Generates a summary data frame for nma.nodesplit objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'nma.nodesplit'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.nma.nodesplit_+3A_object">object</code></td>
<td>
<p>An object of <code>class("nma.nodesplit")</code></p>
</td></tr>
<tr><td><code id="summary.nma.nodesplit_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods</p>
</td></tr>
</table>

<hr>
<h2 id='summary.nodesplit'>Generates a summary data frame for nodesplit objects</h2><span id='topic+summary.nodesplit'></span>

<h3>Description</h3>

<p>Generates a summary data frame for nodesplit objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'nodesplit'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.nodesplit_+3A_object">object</code></td>
<td>
<p>An object of <code>class("nodesplit")</code></p>
</td></tr>
<tr><td><code id="summary.nodesplit_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods</p>
</td></tr>
</table>

<hr>
<h2 id='triptans'>Studies of triptans for headache pain relief</h2><span id='topic+triptans'></span>

<h3>Description</h3>

<p>A dataset from a systematic review of interventions for pain relief in migraine (Thorlund et al. 2014).
The outcome is binary, and represents (as aggregate data) the proportion of participants who were
headache-free at 2 hours. Data are from patients who had had at least one migraine attack, who were
not lost to follow-up, and who did not violate the trial protocol. The dataset includes 70 Randomised-Controlled
Trials (RCTs), comparing 7 triptans with placebo. Doses are standardised as relative to a &quot;common&quot; dose,
and in total there are 23 different treatments (combination of dose and agent).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>triptans
</code></pre>


<h3>Format</h3>

<p>A data frame in long format (one row per arm and study), with with 181 rows and 6 variables:
</p>

<ul>
<li> <p><code>studyID</code> Study identifiers
</p>
</li>
<li> <p><code>AuthorYear</code> The author and year published of the study
</p>
</li>
<li> <p><code>n</code> Numeric data indicating the number of participants in a study arm
</p>
</li>
<li> <p><code>r</code> Numeric data indicating the number of responders (headache free at 2 hours) in a study arm
</p>
</li>
<li> <p><code>dose</code> Numeric data indicating the standardised dose received
</p>
</li>
<li> <p><code>agent</code> Factor data indicating the agent to which participants were randomised
</p>
</li></ul>



<h3>Source</h3>

<p>There are no references for Rd macro <code style="white-space: pre;">&#8288;\insertAllCites&#8288;</code> on this help page.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
