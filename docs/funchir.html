<!DOCTYPE html><html><head><title>Help for package funchir</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {funchir}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#funchir-infix'><p> Convenient Infix Operators</p></a></li>
<li><a href='#funchir-io'><p> Convenient Functions for Data Reading</p></a></li>
<li><a href='#funchir-plot'><p> Convenience Functions for Plotting</p></a></li>
<li><a href='#funchir-table'><p> Convenient Wrappers for creating and printing tables</p></a></li>
<li><a href='#funchir-utils'><p> Miscellaneous utile functions</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.2.2</td>
</tr>
<tr>
<td>Title:</td>
<td>Convenience Functions by Michael Chirico</td>
</tr>
<tr>
<td>Author:</td>
<td>Michael Chirico</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Michael Chirico &lt;MichaelChirico4@gmail.com&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.2)</td>
</tr>
<tr>
<td>Description:</td>
<td>YACFP (Yet Another Convenience Function Package). get_age() is a fast &amp; accurate tool for measuring fractional years between two dates. abbr_to_colClass() is a much more concise way of feeding many types to a colClass argument in a data reader. stale_package_check() tries to identify any library() calls to unused packages.</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, jsonlite</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/MichaelChirico/funchir">https://github.com/MichaelChirico/funchir</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-04-17 17:11:27 UTC; michael</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-04-17 17:22:28 UTC</td>
</tr>
</table>
<hr>
<h2 id='funchir-infix'> Convenient Infix Operators </h2><span id='topic++25+5C+25'></span><span id='topic++25+3Cunescaped+20bksl+3E+25'></span><span id='topic++25u+25'></span><span id='topic++25+5E+25'></span>

<h3>Description</h3>

<p>Several infix operators which are convenient shorthand for common set operations, namely, <em>modulation</em> (A\B), <em>union</em> (AUB) and <em>intersection</em> (A &amp; B).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>   A %\% B
   A %u% B
   A %^% B
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="funchir-infix_+3A_a">A</code></td>
<td>
<p> A set <code>A</code>. </p>
</td></tr>
<tr><td><code id="funchir-infix_+3A_b">B</code></td>
<td>
 <p><em>idem</em> <code>A</code>. </p>
</td></tr>
</table>


<h3>Value</h3>

<p>The above are simply wrappers for the base functions <code>setdiff</code>, <code>union</code>, and <code>intersect</code>, respectively, so output is exactly as for those functions.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+setdiff">setdiff</a></code> , <code><a href="base.html#topic+union">union</a></code>, <code><a href="base.html#topic+intersect">intersect</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  set1 &lt;- 1:5
  set2 &lt;- 4:6

  set1 %\% set2 # c(1,2,3)
  set1 %u% set2 # c(1,2,3,4,5,6)
  set1 %^% set2 # c(4,5)
</code></pre>

<hr>
<h2 id='funchir-io'> Convenient Functions for Data Reading </h2><span id='topic+abbr_to_colClass'></span>

<h3>Description</h3>

<p>Functions which come in particular handy for process of reading in data which can turn verbose code into readable, clean code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>   abbr_to_colClass(inits, counts)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="funchir-io_+3A_inits">inits</code></td>
<td>
<p> Initials of data types to be passed to a <code>colClasses</code> argument (most typically in <code>fread</code> from <code>data.table</code> for me). See details. </p>
</td></tr>
<tr><td><code id="funchir-io_+3A_counts">counts</code></td>
<td>
<p> Corresponding counts (as an <em>unbroken string</em>) of each type given in <code>inits</code>. See details </p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>abbr_to_colClass</code> was designed specifically for reading in large (read: wide, i.e., with many fields) data files when it is also necessary to specify the types to expect to the reader for speed or for accuracy.
</p>
<p>Currently recognized types are <code>blank</code>, <code>character</code>, <code>factor</code>, <code>logical</code>, <code>integer</code>, <code>numeric</code>, <code>Date</code>, <code>date</code>, <code>text</code> and <code>skip</code>, which are abbreviated to their first initials: <code>"b"</code>, <code>"c"</code>, <code>"f"</code>, <code>"l"</code>, <code>"i"</code>, <code>"n"</code>, <code>"D"</code>, <code>"d"</code>, <code>"t"</code> and <code>"s"</code>, respectively.
</p>
<p>Since like types are often found in sequence, the <code>counts</code> argument can condense the call considerably&ndash;if three integer columns appear in a row, for example, we could specify <code>inits="i"</code> and <code>counts="3"</code> instead of the breathier <code>inits="iii"</code>, <code>counts="111"</code>.
</p>
<p>Note that since <code>counts</code> is read digit-by-digit, sequences of length greater than 9 must be broken up into size-9 (or smaller) chunks, e.g., if there are 20 <code>Date</code> fields in a row, we could set <code>inits="ddd"</code>, <code>counts="992"</code>. This approach was taken (rather than, say, requiring <code>counts</code> to be an integer vector of counts) as I find it speedier and more concise, and the direct parallel to <code>inits</code> can elucidate issues which arise directly in the code instead of, say, checking <code>cbind(strsplit(inits, split = "")[[1L]], counts)</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  abbr_to_colClass(inits = "ncifdfd", counts = "1234567")
</code></pre>

<hr>
<h2 id='funchir-plot'> Convenience Functions for Plotting </h2><span id='topic+tile.axes'></span><span id='topic+xdev2in'></span><span id='topic+ydev2in'></span><span id='topic+xydev2in'></span>

<h3>Description</h3>

<p><code>tile.axes</code> is used in for loops to generate axes in a multi-panel plot with shared x &amp; y axes (within row and column).
</p>
<p><code>xdev2in</code> is the inverse of <code>graphics::xinch</code>; namely, it converts from plotting device units into inches.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>   tile.axes(n, M, N, params = list(x = list(), y = list()),
             use.x = TRUE, use.y = TRUE)
   xdev2in(x = 1)
   ydev2in(y = 1)
   xydev2in(xy = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="funchir-plot_+3A_n">n</code></td>
<td>
<p> Integer. Cell in <code>mfrow</code> to which to apply the axes; fills by <em>row</em>, following base functionality.</p>
</td></tr>
<tr><td><code id="funchir-plot_+3A_m">M</code></td>
<td>
<p> Integer. Number of rows specified in <code>mfrow</code>. </p>
</td></tr>
<tr><td><code id="funchir-plot_+3A_n">N</code></td>
<td>
<p> Integer. Number of columns specified in <code>mfrow</code>. </p>
</td></tr>
<tr><td><code id="funchir-plot_+3A_params">params</code></td>
<td>
<p> A length-2 <code>list</code>. <code>params$x</code> is a <code>list</code> of parameters to be passed to the x-axis. <code>params$y</code> is a <code>list</code> of parameters to be passed to the y-axis. </p>
</td></tr>
<tr><td><code id="funchir-plot_+3A_use.x">use.x</code></td>
<td>
 <p><code>logical</code>. Should the x-axis be printed? </p>
</td></tr>
<tr><td><code id="funchir-plot_+3A_use.y">use.y</code></td>
<td>
 <p><code>logical</code>. Should the y-axis be printed? </p>
</td></tr>
<tr><td><code id="funchir-plot_+3A_x">x</code></td>
<td>
 <p><code>numeric</code> value to convert into inches (along the horizontal axis). </p>
</td></tr>
<tr><td><code id="funchir-plot_+3A_y">y</code></td>
<td>
 <p><code>numeric</code> value to convert into inches (along the vertical axis). </p>
</td></tr>
<tr><td><code id="funchir-plot_+3A_xy">xy</code></td>
<td>
 <p><code>numeric</code> value to convert into inches (along both axes simultaneously). </p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>tile.axes</code> provides a simple way to incorporate the plotting of axes into a loop which creates the plots in a matrix of plots (e.g., by using <code>par(mfrow=c(2, 2))</code>) <em>when the axes are shared by all plots</em>. x axes are only printed on the bottom row of plots, and y axes are only printed on the first column of plots&ndash;this saves potentially wasted / white space by eliminating redundant axes, yet can still be done in a loop.
</p>
<p>Some graphics functions specify some arguments with units in inches (namely, <code>graphics::arrows</code>' <code>length</code> argument). <code>graphics::xinch</code> provides the inverse functionality enabling conversion from inches into plotting units; up to numerical accuracy, then, <code>graphics::xinch(xdev2in(x)) == x</code>.
</p>


<h3>See Also</h3>

<p><code><a href="graphics.html#topic+xinch">xinch</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  smpl &lt;- rnorm(100)

  par(mfrow = c(2, 1), mar = c(0, 0, 0, 0), oma=c(5, 4, 4, 2) + .1)
  for (ii in 1:2){
    hist(smpl[sample(length(smpl), 100, rep = TRUE)], xaxt = "n", yaxt = "n")
    tile.axes(ii, 2, 1)
  }
</code></pre>

<hr>
<h2 id='funchir-table'> Convenient Wrappers for creating and printing tables </h2><span id='topic+sanitize2'></span>

<h3>Description</h3>

<p>Here are wrappers for common table creation/manipulation/printing operations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>   sanitize2(str)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="funchir-table_+3A_str">str</code></td>
<td>
 <p><code>character</code> vector. </p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>sanitize2</code> is a replacement to the internal <code>sanitize</code> function used by default in <code>xtable</code>. Adds items for fixing left and right square brackets, which are (in the current&ndash;2017/03/03&ndash;version of <code>print.xtable</code> ) by default left alone, which can cause errors.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  sanitize2('$\\mathcal{B}$')
</code></pre>

<hr>
<h2 id='funchir-utils'> Miscellaneous utile functions </h2><span id='topic+create_quantiles'></span><span id='topic+to.pct'></span><span id='topic+nx.mlt'></span><span id='topic+divide'></span><span id='topic+dol.form'></span><span id='topic+ntostr'></span><span id='topic+write.packages'></span><span id='topic+stale_package_check'></span><span id='topic+clean_slate'></span><span id='topic+embed.mat'></span><span id='topic+get_age'></span><span id='topic+quick_year'></span><span id='topic+quick_mday'></span><span id='topic+quick_yday'></span>

<h3>Description</h3>

<p>Several odds-and-ends functions for data manipulation &amp; representation, etc. See details and examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>   create_quantiles(x, num, right = FALSE, na.rm = FALSE,
                    include.lowest = TRUE, labels = 1:num)
   to.pct(x, dig = Inf)
   nx.mlt(x, n)
   divide(x, n, na.rm = FALSE)
   dol.form(x, dig = 0L, suff = "", tex = FALSE)
   ntostr(n, dig = 2L)
   write.packages(con)
   stale_package_check(con)
   embed.mat(mat, M = nrow(mat), N = ncol(mat), m = 1L, n = 1L, fill = 0L)
   get_age(birthdays, ref_dates)
   quick_year(dates)
   quick_mday(dates)
   quick_yday(dates)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="funchir-utils_+3A_x">x</code></td>
<td>
<p> A numeric vector. </p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_num">num</code></td>
<td>
<p> A number, typically an integer, specifying how many equal-count intervals into which to divide the data.</p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_right">right</code></td>
<td>
<p> logical, indicating if the intervals should be closed on the right (and open on the left) or vice versa. </p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_na.rm">na.rm</code></td>
<td>
 <p><code>logical</code> passed to <code><a href="stats.html#topic+quantile">quantile</a></code> with the usual interpretation. </p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_include.lowest">include.lowest</code></td>
<td>
<p> logical, indicating if an <code>x[i]</code> equal to the lowest (or highest, for <code>right = FALSE</code>) <code>breaks</code> value should be included.</p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_labels">labels</code></td>
<td>
 <p><code>character</code> vector of length <code>num</code>; the labels to be applied to the resulting <code>factor</code>. </p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_dig">dig</code></td>
<td>
<p> The number of digits to be included past the decimal in output; sent directly to <code>round</code>. </p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_suff">suff</code></td>
<td>
<p> The suffix to appended/unit in which to express <code>x</code>. Currently one of <code>c("", "k", "m", "b")</code>, corresponding to plain units, thousands, millions, and billions, respectively. </p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_tex">tex</code></td>
<td>
<p> Should <code>$</code> be printed as <code>\$</code> for direct copy-pasting to TeX files? </p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_n">n</code></td>
<td>
<p> For <code>nx.mlt</code>, <code>divide</code> and <code>ntostr</code>, a number; see details. For <code>embed.mat</code>, an integer specifying the column at which to insert <code>mat</code>. </p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_con">con</code></td>
<td>
<p> A file/connection where output should be written. </p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_mat">mat</code></td>
<td>
<p> A matrix. </p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_m">M</code></td>
<td>
<p> An integer specifying the number of rows in the enclosing matrix. </p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_n">N</code></td>
<td>
<p> An integer specifying the number of columns in the enclosing matrix. </p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_m">m</code></td>
<td>
<p> An integer specifying the row at which to insert <code>mat</code>. </p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_fill">fill</code></td>
<td>
<p> An atomic vector specifying how to fill the enclosing matrix. </p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_birthdays">birthdays</code></td>
<td>
<p> A vector of <code>Date</code>s. </p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_ref_dates">ref_dates</code></td>
<td>
<p> A vector of <code>Date</code>s. </p>
</td></tr>
<tr><td><code id="funchir-utils_+3A_dates">dates</code></td>
<td>
<p> A vector of <code>Date</code>s. </p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>create_quantiles</code> is a parsimonious function for generating quantiles of a vector (e.g., quartiles for <code>num=4</code> or quintiles for <code>num=5</code>). Basically a wrapper for the <code>cut</code> function; the type of the output is <code>factor</code>. Fails for vectors with overlapping quantiles (e.g., with &gt;50% of values of <code>x</code> equal to zero) unless the correct number of labels (i.e., the number of unique quantile breaks) is given in the <code>labels</code> argument.
</p>
<p><code>to.pct</code> converts a number (probably a proportion, i.e., typically between 0 and 1) to a percentage; also has an argument (<code>dig</code>) which can be used to round the output inline.
</p>
<p><code>nx.mlt</code> returns the least multiple of <code>n</code> which (weakly) exceeds <code>x</code>. Convenient for making axes ticks land on pretty numbers.
</p>
<p><code>divide</code> divides the range (min through max) of <code>x</code> into <code>n</code> points (basically a shorthand for <code>seq</code>).
</p>
<p><code>dol.form</code> takes a financial input and converts it to a (American-formatted, American-currency) string for printing&ndash;appending a dollar sign (<code>"\$"</code>) and inserting commas after every third digit from the left of the decimal point.
</p>
<p><code>ntostr</code> converts <code>n</code> to a <code>character</code> vector with each element width <code>dig</code>. This is particularly nice for converting 99:100 to &quot;99&quot; and &quot;100&quot;.
</p>
<p><code>write.packages</code> captures the current package environment (inspired by <code>sessionInfo()</code> and writes it as a JSON to <code>con</code> with <code><a href="base.html#topic+writeLines">writeLines</a></code>; a <code>list</code> version of this object is returned. This may be essential for tracking across time which package versions were being used.
</p>
<p><code>stale_package_check</code> reads a file (with <code><a href="base.html#topic+readLines">readLines</a></code>) and checks which functions are actually used from each loaded package. Currently only checks for <code>library</code> (i.e., not <code>require</code>) calls.
</p>
<p><code>embed.mat</code> inserts a supplied matrix into a (weakly) larger enclosing matrix, typically filled with 0s, at a specified position.
</p>
<p><code>get_age</code> returns the accurate, fractional age (in years) of each individual, quickly. Accuracy deteriorates when non-leap century years are involved (i.e., any year congruent to 0 mod 100 but not 0 mod 400); designed for use with currently-relevant birthdays and ages.
</p>
<p><code>quick_year</code> converts a <code>Date</code> object into its year efficiently; also ignores concerns of leap centuries. <code>quick_mday</code> returns the day of the month. <code>quick_yday</code> returns the day of the year. Returns as an <code>integer</code>.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+cut">cut</a></code>, <code><a href="base.html#topic+prettyNum">prettyNum</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  x &lt;- runif(100)

  # Return which multiple of 1/7 least
  #   exceeds each element of x
  create_quantiles(x, 7)

  to.pct(x)
  to.pct(x, dig = 2) #output of the form xxx.xx

  nx.mlt(x, 1/3)

  dol.form(x, dig=2L)

  ntostr(999:1000, dig = 3L) # c("999","000")
  ntostr(999:1000, dig = 2L) # c("99","00")

  library(stats)
  write.packages()

  inmat &lt;- matrix(1:9, ncol = 3L)
  embed.mat(inmat, M = 4L, N = 4L)
  embed.mat(inmat, N = 6L, n = 4L, fill = NA)

  d1 = as.Date('1987-05-02')
  d2 = as.Date('2016-02-23')
  get_age(d1, d2)
  quick_year(d1)
  quick_mday(d1)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
