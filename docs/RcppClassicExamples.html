<!DOCTYPE html><html lang="en"><head><title>Help for package RcppClassicExamples</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {RcppClassicExamples}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#RcppClassicExamples-package'><p>Examples for the deprecated Rcpp R/C++ Interface library API</p></a></li>
<li><a href='#RcppDataFrame'><p>Rcpp::DataFrame example for Rcpp &ndash; deprecated API</p></a></li>
<li><a href='#RcppDate'><p>C++ classes for interfacing date and datetime R objects &ndash; deprecated API</p></a></li>
<li><a href='#RcppExample'><p>Rcpp R / C++ interface example &ndash; deprecated API</p></a></li>
<li><a href='#RcppParams'><p>C++ class for receiving (scalar) parameters from R &ndash; deprecated API</p></a></li>
<li><a href='#RcppResultSet'><p>C++ class for sending C++ objects back to R &ndash; deprecated API</p></a></li>
<li><a href='#RcppVector'><p>C++ classes for receiving R object in C++ &ndash; deprecated API</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Examples using 'RcppClassic' to Interface R and C++</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-11-30</td>
</tr>
<tr>
<td>Author:</td>
<td>Dirk Eddelbuettel and Romain Francois, based on code written 
 during 2005 and 2006 by Dominick Samperi </td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Dirk Eddelbuettel &lt;edd@debian.org&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>The 'Rcpp' package contains a C++ library that facilitates the
 integration of R and C++ in various ways via a rich API. This API was
 preceded by an earlier version which has been deprecated since 2010 (but is
 still supported to provide backwards compatibility in the package
 'RcppClassic').  This package 'RcppClassicExamples' provides usage examples for
 the older, deprecated API. There is also a corresponding package
 'RcppExamples' with examples for the newer, current API which we
 strongly recommend as the basis for all new development.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.15.2)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.10.2), RcppClassic (&ge; 0.9.3)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppClassic</td>
</tr>
<tr>
<td>Suggests:</td>
<td>RUnit</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/eddelbuettel/rcppclassicexamples">https://github.com/eddelbuettel/rcppclassicexamples</a>,
<a href="https://dirk.eddelbuettel.com/code/rcpp.classic.html">https://dirk.eddelbuettel.com/code/rcpp.classic.html</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/eddelbuettel/rcppclassicexamples/issues">https://github.com/eddelbuettel/rcppclassicexamples/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-30 13:16:58 UTC; edd</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-30 14:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='RcppClassicExamples-package'>Examples for the deprecated Rcpp R/C++ Interface library API</h2><span id='topic+RcppClassicExamples-package'></span><span id='topic+RcppClassicExamples'></span>

<h3>Description</h3>

<p>This package shows some simple examples for the use of the deprecated
<em>classic</em> API from the first implementation of <span class="pkg">Rcpp</span>. 
</p>
<p>Note that the <span class="pkg">RcppClassic</span> package has been deprecated since
2010, all new development should use the <span class="pkg">Rcpp</span> package instead.
</p>


<h3>Details</h3>

<p>The <span class="pkg">Rcpp</span> package provides a number of C++ classes that ease
access to C++ from R. This comprises both passing parameters to
functions, as well as returning results back from C++ to R.
</p>
<p>Two APIs are supported. The first is an older API which was first
introduced mostly in 2006 and extended in 2008. This interface is used
by a few other packages and will be supported going forward in the
<a href="RcppClassic.html#topic+RcppClassic-package">RcppClassic-package</a> package.
</p>
<p>A second and newer API that was started in 2009 offers more
functionality, see the <a href="Rcpp.html#topic+Rcpp-package">Rcpp-package</a> package.
</p>
<p>The <span class="pkg">RcppExamples</span> package provides some simple examples for use
of <span class="pkg">Rcpp</span>.
</p>


<h3>Author(s)</h3>

<p>Dominick Samperi wrote the initial versions of Rcpp (and
RcppTemplate) during 2005 and 2006.  Dirk Eddelbuettel made some
additions, and became maintainer in 2008. Dirk Eddelbuettel and Romain
Francois have been extending Rcpp since 2009.
</p>


<h3>See Also</h3>

<p>See the <a href="RcppExamples.html#topic+RcppExamples-package">RcppExamples-package</a> for examples of the
recommended <span class="pkg">Rcpp</span> API and <a href="Rcpp.html#topic+Rcpp-package">Rcpp-package</a> for
documentation on the recommended API to extend R with C++ code, while
the deprecated <a href="RcppClassic.html#topic+RcppClassic-package">RcppClassic-package</a> documents the
older, deprecated API.
</p>

<hr>
<h2 id='RcppDataFrame'>Rcpp::DataFrame example for Rcpp &ndash; deprecated API</h2><span id='topic+RcppDataFrame'></span>

<h3>Description</h3>

<p>A <code>DataFrame</code> can be passed C++ and can be instantiated as a
corresponding C++ object using the  Rcpp API. 
</p>
<p>This example shows (in the corresponding C++ code) how to access,
modify and create a data frame.
</p>
<p>Note that the <span class="pkg">RcppClassic</span> package has been deprecated since
2010, all new development should use the <span class="pkg">Rcpp</span> package instead.
</p>


<h3>Details</h3>

<p>Usage of <code>Rcpp::DataFrame</code> is fully defined in
the respective header file.
</p>
<p>The C++ source file corresponding to the this function does the
following (inside of a <code>try/catch</code> block):
</p>
<pre>
      // construct the data.frame object
      Rcpp::DataFrame DF = Rcpp::DataFrame(Dsexp);

      // and access each column by name
      Rcpp::IntegerVector a = DF["a"];
      Rcpp::CharacterVector b = DF["b"];
      Rcpp::DateVector c = DF["c"];
      
      // do something
      a[2] = 42;
      b[1] = "foo";
      c[0] = c[0] + 7;                      // move up a week

      // create a new data frame
      Rcpp::DataFrame NDF = 
	  Rcpp::DataFrame::create(Rcpp::Named("a")=a,
				  Rcpp::Named("b")=b,
				  Rcpp::Named("c")=c);

      // and return old and new in list
      return(Rcpp::List::create(Rcpp::Named("origDataFrame")=DF,
				Rcpp::Named("newDataFrame")=NDF));
  </pre>


<h3>Author(s)</h3>

<p>Dirk Eddelbuettel and Romain Francois</p>


<h3>See Also</h3>

<p>See the <a href="RcppExamples.html#topic+RcppExamples-package">RcppExamples-package</a> for examples of the
recommended <span class="pkg">Rcpp</span> API and <a href="Rcpp.html#topic+Rcpp-package">Rcpp-package</a> for
documentation on the recommended API to extend R with C++ code, while
the deprecated <a href="RcppClassic.html#topic+RcppClassic-package">RcppClassic-package</a> documents the
older, deprecated API.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  ## Not run: 
  RcppDataFrame()
  
## End(Not run)
</code></pre>

<hr>
<h2 id='RcppDate'>C++ classes for interfacing date and datetime R objects &ndash; deprecated API</h2><span id='topic+RcppDate'></span><span id='topic+RcppDatetime'></span><span id='topic+RcppDateVector'></span><span id='topic+RcppDatetimeVector'></span><span id='topic+RcppDateExample'></span>

<h3>Description</h3>

<p><code>RcppDate</code>, <code>RcppDatetime</code>, <code>RcppDateVector</code> and
<code>RcppDatetimeVector</code> are C++ classes defined in their respective
headers files.  They are part of the 'classic' Rcpp API. These classes
pass scalars and vectors of <span class="rlang"><b>R</b></span> objects of types <code>Date</code> and
<code>POSIXct</code>, respectively, to C++ via the <code>.Call()</code> function
interface.  
</p>
<p>Member functions are provided to query the dimension of the vector or
matrix object, convert it in a corresponding <code>C</code> representation.
</p>
<p><span class="rlang"><b>R</b></span> objects of type <code>Date</code>, and hence the <code>RcppDate</code> and
<code>RcppDateVector</code> objects, are internally represented as an
integer counting days since the epoch, i.e. January 1,
1970. Similarly, <span class="rlang"><b>R</b></span> objects of type <code>POSIXct</code> and the
<code>RcppDatetime</code> and <code>RcppDatetimeVector</code> objects, are
internally represented as seconds since the epoch.  However, <span class="rlang"><b>R</b></span>
extends the POSIX standard by using a double leading to microsecond
precision in timestamps. This is fully supported by <code>Rcpp</code> as
well.
</p>
<p>The new API currently has the classes <code>Rcpp::Date</code>, <code>Rcpp::Datetime</code>, 
<code>Rcpp::DateVector</code> and <code>Rcpp::DatetimeVector</code> which are preferred
for new developments, as is the rest of the new API in the <span class="pkg">Rcpp</span> package
while the <span class="pkg">RcppClassic</span> package has been deprecated since
2010.
</p>


<h3>Details</h3>

<p>Usage of the <code>RcppDate</code>, <code>RcppDatetime</code> (and their vector
extensions) in <code>C++</code> is fully defined in the respective header
files <code>RcppDate.h</code> and <code>RcppDatetime.h</code>. 
</p>
<p>As example, consider a call from <span class="rlang"><b>R</b></span> to <code>C++</code> such as
</p>
<pre>
  # an R example passing one type of each class to a function
  # someFunction in package somePackage
  val &lt;- .Call("someFunction",
               Sys.Date(),      # current date
	           Sys.time(), 	    # current timestamp
	           as.Date("2000-02-25")
	             + 0:5,         # date vector
	           ISOdatetime(1999,12,31,23,59,0)
	             + (0:5)*0.250, # datetime vector
   	           PACKAGE="somePackage")
  </pre>
<p>At the <code>C++</code> level, the corresponding code to assign these parameter to
<code>C++</code> objects is can be as follows::
</p>
<pre>
  SEXP someFunction(SEXP ds, SEXP dts,
                    SEXP dvs, SEXP dtvs) {

    RcppDate           d(ds);  		      
    RcppDatetime       dt(dts);
    RcppDateVector     dv(dvs);
    RcppDatetimeVector dtv(dtvs);
  }
  </pre>
<p>Standard accessor functions are defined, see <code>RcppDate.h</code> and
<code>RcppDatetime.h</code> for details.
</p>
<p>Objects of these types can also be returned via <code>RcppResultSet</code>. 
</p>


<h3>Author(s)</h3>

<p>Dominick Samperi wrote the initial versions of Rcpp (and
RcppTemplate) during 2005 and 2006.  Dirk Eddelbuettel made some
additions, and became maintainer in 2008. Dirk Eddelbuettel and Romain
Francois have been extending Rcpp since 2009.
</p>


<h3>References</h3>

<p><em>Writing R Extensions</em>, available at <a href="https://www.r-project.org">https://www.r-project.org</a>.
</p>


<h3>See Also</h3>

<p><code>RcppResultSet</code>.
</p>
<p>See the <a href="RcppExamples.html#topic+RcppExamples-package">RcppExamples-package</a> for examples of the
recommended <span class="pkg">Rcpp</span> API and <a href="Rcpp.html#topic+Rcpp-package">Rcpp-package</a> for
documentation on the recommended API to extend R with C++ code, while
the deprecated <a href="RcppClassic.html#topic+RcppClassic-package">RcppClassic-package</a> documents the
older, deprecated API.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# set up date and datetime vectors
dvec &lt;- Sys.Date() + -2:2
dtvec &lt;- Sys.time() + (-2:2)*0.5

# call the underlying  C++ function
result &lt;- RcppDateExample(dvec, dtvec)

# inspect returned object
result
</code></pre>

<hr>
<h2 id='RcppExample'>Rcpp R / C++ interface example &ndash; deprecated API</h2><span id='topic+RcppExample'></span><span id='topic+print.RcppExample'></span>

<h3>Description</h3>

<p><code>RcppExample</code> illustrates how the older <code>Rcpp</code> R/C++ 
interface class library is used. It provides fairly complete coverage
for the older &lsquo;classic&rsquo; API. 
</p>
<p>Note that the <span class="pkg">RcppClassic</span> package has been deprecated since
2010, all new development should use the <span class="pkg">Rcpp</span> package instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RcppExample(params, nlist, numvec, nummat, df, datevec, stringvec, fnvec, fnlist)
## S3 method for class 'RcppExample'
print(x,...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="RcppExample_+3A_params">params</code></td>
<td>
<p>A heterogeneous list specifying <code>method</code> (string),
<code>tolerance</code> (double), <code>maxIter</code> (int).</p>
</td></tr>
<tr><td><code id="RcppExample_+3A_nlist">nlist</code></td>
<td>
<p>a list of named numeric values (double or int).</p>
</td></tr>
<tr><td><code id="RcppExample_+3A_numvec">numvec</code></td>
<td>
<p>a numeric 1D vector (double or int).</p>
</td></tr>
<tr><td><code id="RcppExample_+3A_nummat">nummat</code></td>
<td>
<p>a numeric 2D matrix (double or int).</p>
</td></tr>
<tr><td><code id="RcppExample_+3A_df">df</code></td>
<td>
<p>a data frame.</p>
</td></tr>
<tr><td><code id="RcppExample_+3A_datevec">datevec</code></td>
<td>
<p>a vector of Date's.</p>
</td></tr>
<tr><td><code id="RcppExample_+3A_stringvec">stringvec</code></td>
<td>
<p>a vector of strings.</p>
</td></tr>
<tr><td><code id="RcppExample_+3A_fnvec">fnvec</code></td>
<td>
<p>an R function with numeric vector argument.</p>
</td></tr>
<tr><td><code id="RcppExample_+3A_fnlist">fnlist</code></td>
<td>
<p>an R function with list argument.</p>
</td></tr>
<tr><td><code id="RcppExample_+3A_x">x</code></td>
<td>
<p>Object of type <code>RcppExample</code>.</p>
</td></tr>
<tr><td><code id="RcppExample_+3A_...">...</code></td>
<td>
<p>Extra named parameters.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The C++ represention of data frames are not passed back to R in a form
that R recognizes as a data frame, but it is a simple matter to do the
conversion. For example, the return value named <code>PreDF</code> (see
return values below) is not seen as a data frame on the R side (thus
the name &quot;pre-data frame&quot;), but it can be converted to a data frame
using <code>df &lt;- data.frame(result$PreDF)</code>.
</p>
<p>The print.RcppExample() function is defined so that we can control
what gets printed when a variable assigned the return value is entered
on a line by itself. It is defined to simply list the names of the
fields returned (see RcppExample.R).
</p>


<h3>Value</h3>

<p><code>RcppExample</code> returns a list containing:
</p>
<table role = "presentation">
<tr><td><code>method</code></td>
<td>
<p>string input paramter</p>
</td></tr>
<tr><td><code>tolerance</code></td>
<td>
<p>double input paramter</p>
</td></tr>
<tr><td><code>maxIter</code></td>
<td>
<p>int input parameter</p>
</td></tr>
<tr><td><code>nlFirstName</code></td>
<td>
<p>first name in nlist</p>
</td></tr>
<tr><td><code>nlFirstValue</code></td>
<td>
<p>first value in nlist</p>
</td></tr>
<tr><td><code>matD</code></td>
<td>
<p>R matrix from an RcppMatrix&lt;double&gt; object</p>
</td></tr>
<tr><td><code>stlvec</code></td>
<td>
<p>R vector from a vector&lt;double&gt; object</p>
</td></tr>
<tr><td><code>stlmat</code></td>
<td>
<p>R matrix from a vector&lt;vector&lt;double&gt; &gt; object</p>
</td></tr>
<tr><td><code>a</code></td>
<td>
<p>R matrix from C/C++ matrix</p>
</td></tr>
<tr><td><code>v</code></td>
<td>
<p>R vector from C/C++ vector</p>
</td></tr>
<tr><td><code>strings</code></td>
<td>
<p>R vector of strings from vector&lt;string&gt; object</p>
</td></tr>
<tr><td><code>InputDF</code></td>
<td>
<p>a data frame passed in from R</p>
</td></tr>
<tr><td><code>PreDF</code></td>
<td>
<p>a data frame created on C++ side to be passed back to R</p>
</td></tr>
<tr><td><code>params</code></td>
<td>
<p>input parameter list (this is redundant because we returned the input parameters above)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Dominick Samperi wrote the initial versions of Rcpp (and
RcppTemplate) during 2005 and 2006.  Dirk Eddelbuettel made some
additions, and became maintainer in 2008. Dirk Eddelbuettel and Romain
Francois have been extending Rcpp since 2009.
</p>


<h3>References</h3>

<p><em>Writing R Extensions</em>, available at <a href="https://www.r-project.org">https://www.r-project.org</a>.
</p>


<h3>See Also</h3>

<p>See the <a href="RcppExamples.html#topic+RcppExamples-package">RcppExamples-package</a> for examples of the
recommended <span class="pkg">Rcpp</span> API and <a href="Rcpp.html#topic+Rcpp-package">Rcpp-package</a> for
documentation on the recommended API to extend R with C++ code, while
the deprecated <a href="RcppClassic.html#topic+RcppClassic-package">RcppClassic-package</a> documents the
older, deprecated API.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
params &lt;- list(method='BFGS',
               tolerance=1.0e-8,
               maxIter=1000,
               startDate=as.Date('2006-7-15'))

nlist &lt;- list(ibm = 80.50, hp = 53.64, c = 45.41)

numvec &lt;- seq(1,5) # numerical vector

nummat &lt;- matrix(seq(1,20),4,5) # numerical matrix

stringvec &lt;- c("hello", "world", "fractal") # string vector

datestr &lt;- c('2006-6-10', '2006-7-12', '2006-8-10')
datevec &lt;- as.Date(datestr, "%Y-%m-%d") # date vector

df &lt;- data.frame(a=c(TRUE, TRUE, FALSE), b=I(c('a','b','c')),
c=c('beta', 'beta', 'gamma'), dates=datevec)

fnvec &lt;- function(x) { sum(x) } # Add up components of vector

fnlist &lt;- function(l) { # Return vector with 1 added to each component
  vec &lt;- c(l$alpha + 1, l$beta + 1, l$gamma + 1)
  vec
}

result &lt;- RcppExample(params, nlist, numvec, nummat, df, datevec,
                      stringvec, fnvec, fnlist)

result

</code></pre>

<hr>
<h2 id='RcppParams'>C++ class for receiving (scalar) parameters from R &ndash; deprecated API</h2><span id='topic+RcppParams'></span><span id='topic+RcppParamsExample'></span>

<h3>Description</h3>

<p><code>RcppParams</code> is a C++ class defined in <code>Rcpp.h</code> that receive
any number of scalar parameters of types in a single named list object
from <span class="rlang"><b>R</b></span> through the <code>.Call()</code> function.
</p>
<p>The parameters can be of different types that are limited to the <span class="rlang"><b>R</b></span>
types <code>numeric</code>, <code>integer</code>, <code>character</code>, <code>logical</code>
or <code>Date</code>. These types are mapped into, respectively, the
corresponding C++ types <code>double</code>,  <code>int</code>, <code>string</code>,
<code>bool</code> and <code>Date</code> (a custom class defined by <code>Rcpp</code>.
</p>
<p><code>RcppParams</code> is part of the old deprecated Rcpp API, and should
be replaces by <code>Rcpp::List</code> which is more flexible and can be
used for both inputs and outputs. <code>RcppParams</code> is retained for
backwards compatibility, but should be avoided in new projects and
replaced in old projects.
</p>
<p>Note that the <span class="pkg">RcppClassic</span> package has been deprecated since
2010, all new development should use the <span class="pkg">Rcpp</span> package instead.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="RcppParams_+3A_params">params</code></td>
<td>
<p>A heterogeneous list specifying <code>method</code> (string),
<code>tolerance</code> (double), <code>maxIter</code> (int) and <code>startDate</code>
(Date in R, RcppDate in C++).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Usage of <code>RcppParams</code> from <span class="rlang"><b>R</b></span> via <code>.Call()</code> is as follows:
</p>
<pre>
  # an R example passing one type of each class to a function
  # someFunction in package somePackage
  val &lt;- .Call("someFunction",
               list(pie=3.1415, magicanswer=42, sometext="foo",
                    yesno=true, today=Sys.date()),
		    PACKAGE="somePackage")
  </pre>
<p>At the C++ level, the corresponding code to assign these parameter to
C++ objects is 
</p>
<pre>
  SEXP someFunction(SEXP params) {
    RcppParams par(params);
    double p   = par.getDoubleValue("pie");
    int magic  = par.getIntValue("magicanswer");
    string txt = par.getStringValue("sometext");
    bool yn    = par.getBoolValue("yesno");
    RcppDate d = par.getDateValue("today");
    // some calculations ...
    // some return values ...
  }
  </pre>
<p>As the lookup is driven by the names givem at the <span class="rlang"><b>R</b></span> level, order is
not important.  It is however important that the types match. Errors
are typically caught and an exception is thrown. 
</p>
<p>The class member function <code>checkNames</code> can be used to verify that the
<code>SEXP</code> object passed to the function contains a given set of
named object.
</p>


<h3>Value</h3>

<p><code>RcppExample</code> returns a list containing:
</p>
<table role = "presentation">
<tr><td><code>method</code></td>
<td>
<p>string input paramter</p>
</td></tr>
<tr><td><code>tolerance</code></td>
<td>
<p>double input paramter</p>
</td></tr>
<tr><td><code>maxIter</code></td>
<td>
<p>int input parameter</p>
</td></tr>
<tr><td><code>startDate</code></td>
<td>
<p>Date type with starting date</p>
</td></tr>
<tr><td><code>params</code></td>
<td>
<p>input parameter list (this is redundant because we
returned the input parameters above)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Dominick Samperi wrote the initial versions of Rcpp (and
RcppTemplate) during 2005 and 2006.  Dirk Eddelbuettel made some
additions, and became maintainer in 2008. Dirk Eddelbuettel and Romain
Francois have been extending Rcpp since 2009.
</p>


<h3>References</h3>

<p><em>Writing R Extensions</em>, available at <a href="https://www.r-project.org">https://www.r-project.org</a>.
</p>


<h3>See Also</h3>

<p><code>RcppExample</code>.
</p>
<p>See the <a href="RcppExamples.html#topic+RcppExamples-package">RcppExamples-package</a> for examples of the
recommended <span class="pkg">Rcpp</span> API and <a href="Rcpp.html#topic+Rcpp-package">Rcpp-package</a> for
documentation on the recommended API to extend R with C++ code, while
the deprecated <a href="RcppClassic.html#topic+RcppClassic-package">RcppClassic-package</a> documents the
older, deprecated API.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# set up some value
params &lt;- list(method='BFGS',
               tolerance=1.0e-5,
               maxIter=100,
               startDate=as.Date('2006-7-15'))

# call the underlying  C++ function
result &lt;- RcppParamsExample(params)

# inspect returned object
result

</code></pre>

<hr>
<h2 id='RcppResultSet'>C++ class for sending C++ objects back to R &ndash; deprecated API</h2><span id='topic+RcppResultSet'></span>

<h3>Description</h3>

<p><code>RcppResultSet</code> is a C++ class defined in <code>RcppResultSet.h</code> that can
assign any number of C++ objects to <span class="rlang"><b>R</b></span> in a single named list object 
as the <code>SEXP</code> return value of a <code>.Call()</code> function call. It
is part of the classic API.
</p>
<p>The C++ objects can be of different types that are limited to 
types  <code>double</code>,  <code>int</code>, <code>string</code>, vectors of
<code>double</code> or <code>int</code> (with explicit dimensions),
matrices of <code>double</code> or <code>int</code> (with explicit dimensions), 
STL vectors of <code>double</code>, <code>int</code> or <code>string</code>, STL
&lsquo;vector of vectors&rsquo; of types <code>double</code> or <code>int</code> (all
with implicit dimensions), the internal types <code>RcppDate</code>, <code>RcppDateVector</code>,
<code>RcppStringVector</code>, <code>RcppVector</code> of types <code>double</code> or
<code>int</code>, <code>RcppMatrix</code> of types <code>double</code> or <code>int</code>
as well <code>RcppFrame</code>, a type that can be converted into a
<code>data.frame</code>, and the <span class="rlang"><b>R</b></span> type <code>SEXP</code>. 
</p>
<p>Where applicable, the <code>C++</code> types are automatically converted to the
corresponding <span class="rlang"><b>R</b></span> types structures around types <code>numeric</code>,
<code>integer</code>, or <code>character</code>.  The <code>C++</code> code can all be
retrieved in <span class="rlang"><b>R</b></span> as elements of a named list object.
</p>
<p>The new API has more generic templated functions.
</p>
<p>Note that the <span class="pkg">RcppClassic</span> package has been deprecated since
2010, all new development should use the <span class="pkg">Rcpp</span> package instead.
</p>


<h3>Details</h3>

<p>Usage of <code>RcppResultSet</code> from  <code>C++</code> is fully defined in
<code>RcppResultSet.h</code>. An example for returning data to <span class="rlang"><b>R</b></span> at the end of a
<code>.Call()</code> call follows.
</p>
<p>At the C++ level, the corresponding code to assign these parameter to
C++ objects is can be as follows (taken from the C++ source of
<code>RcppExample</code>):
</p>
<pre>
  SEXP rl;
  RcppResultSet rs;
    
  rs.add("date", aDate);	// RcppDate
  rs.add("dateVec", dateVec);	// RcppDateVec
  rs.add("method", method);	// string
  rs.add("tolerance", tol);	// numeric
  rs.add("maxIter", maxIter);	// int
  rs.add("matD", matD);		// RcppMatrix
  rs.add("stlvec", stlvec);	// vector&lt;double&gt; or &lt;int&gt;
  rs.add("stlmat", stlmat);	// vector&lt; vector &lt;double&gt; &gt;
  				//   or &lt;int&gt;
  rs.add("a", a, nrows, ncols);	// double** (or int**) with 
				//   two dimension
  rs.add("v", v, len);		// double* (or int*) with 
				//   one dimension
  rs.add("stringVec", strVec);	// RcppStringVector
  rs.add("strings", svec);	// vector&lt;string&gt;
  rs.add("InputDF", inframe);	// RcppFrame
  rs.add("PreDF", frame);	// RcppFrame

  rl = rs.getReturnList();
  return(rl);
  </pre>
<p>As the <span class="rlang"><b>R</b></span> level, we assign the returned object a list variables from
which we select each list element by its name.
lookup is driven by the names givem at the <span class="rlang"><b>R</b></span> level, order is
not important.  It is however important that the types match. Errors
are typically caught and an exception is thrown. 
</p>
<p>The class member function <code>checkNames</code> can be used to verify that the
<code>SEXP</code> object passed to the function contains a given set of
named object.
</p>


<h3>Author(s)</h3>

<p>Dominick Samperi wrote the initial versions of Rcpp (and
RcppTemplate) during 2005 and 2006.  Dirk Eddelbuettel made some
additions, and became maintainer in 2008. Dirk Eddelbuettel and Romain
Francois have been extending Rcpp since 2009.
</p>


<h3>See Also</h3>

<p><code>RcppExample</code>.
</p>
<p>See the <a href="RcppExamples.html#topic+RcppExamples-package">RcppExamples-package</a> for examples of the
recommended <span class="pkg">Rcpp</span> API and <a href="Rcpp.html#topic+Rcpp-package">Rcpp-package</a> for
documentation on the recommended API to extend R with C++ code, while
the deprecated <a href="RcppClassic.html#topic+RcppClassic-package">RcppClassic-package</a> documents the
older, deprecated API.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# example from RcppDate
# set up date and datetime vectors
dvec &lt;- Sys.Date() + -2:2
dtvec &lt;- Sys.time() + (-2:2)*0.5

# call the underlying  C++ function
result &lt;- RcppDateExample(dvec, dtvec)

# inspect returned object
result
</code></pre>

<hr>
<h2 id='RcppVector'>C++ classes for receiving R object in C++ &ndash; deprecated API</h2><span id='topic+RcppVector'></span><span id='topic+RcppMatrix'></span><span id='topic+RcppVectorView'></span><span id='topic+RcppMatrixView'></span><span id='topic+RcppStringVector'></span><span id='topic+RcppVectorExample'></span><span id='topic+RcppMatrixExample'></span><span id='topic+RcppStringVectorExample'></span>

<h3>Description</h3>

<p><code>RcppVector</code>, <code>RcppMatrix</code> and <code>RcppStringVector</code> are
C++ classes that can pass vectors (matrices) of <span class="rlang"><b>R</b></span> objects of
appropriate types to C++ via the <code>.Call()</code> function interface. 
They are part of the 'classic' Rcpp API. 
</p>
<p>The vector and matrix types are templated and can operate on <span class="rlang"><b>R</b></span> types
<code>intger</code> and <code>numeric</code>. 
</p>
<p>The <code>RcppVectorView</code> and <code>RcppMatrixView</code> are slighly more
lightweight read-only variants.
</p>
<p>Member functions are provided to query the dimension of the vector or
matrix object, convert it in a corresponding <code>C</code> representation,
and also to convert it into a corresponding STL object.
</p>
<p>The new API has classes <code>NumericVector</code>, <code>NumericMatrix</code>,
<code>CharacterVector</code> (and also an alias <code>StringVector</code>).
</p>
<p>The files <code>RcppVectorExample.cpp</code> and
<code>RcppMatrixExample.cpp</code> provide examples for both the classic and
new APIs.
</p>
<p>Note that the <span class="pkg">RcppClassic</span> package has been deprecated since
2010, all new development should use the <span class="pkg">Rcpp</span> package instead.
</p>


<h3>Details</h3>

<p>Usage of <code>RcppVector</code>, <code>RcppMatrix</code> and
<code>RcppStringVector</code> in <code>C++</code> is fully defined in
the respective header files. 
</p>
<p>As example, consider a call from <span class="rlang"><b>R</b></span> to <code>C++</code> such as
</p>
<pre>
  # an R example passing one type of each class to a function
  # someFunction in package somePackage
  val &lt;- .Call("someFunction",
               rnorm(100),        # numeric vector
	       sample(1:10, 5, TRUE)  # int vector
	       search(),          # character vector
	       as.matrix(rnorm(100),10,10), # matrix
   	       PACKAGE="somePackage")
  </pre>
<p>At the <code>C++</code> level, the corresponding code to assign these parameter to
<code>C++</code> objects is can be as follows (taken from the C++ source of
<code>RcppExample</code>):
</p>
<pre>
  SEXP someFunction(SEXP nvec, SEXP ivec,
                    SEXP svec, SEXP nmat) {

    RcppVector&lt;double&gt; nv(nvec);  		      
    RcppVector&lt;int&gt;    iv(ivec);
    RcppStringVector   sv(svec);
    RcppMatrix&lt;double&gt; nm(nmat);
  }
  </pre>
<p>These <code>C++</code> objects could then be queried via
</p>
<pre>
    int n = nv.size();
    int d1 = nm.dim1(), d2 = nm.dim2();
  </pre>
<p>to retrieve, respectively, vector length and matrix dimensions.
</p>
<p>Moreover, the <code>stlVector()</code> and <code>stlMatrix()</code> member
functions can be used to convert the objects into STL objects:
</p>
<pre>
    vector&lt;int&gt; ivstl = iv.stlVector();
    vector&lt; vector&lt; double &gt; &gt; = nm.stlMatrix();
  </pre>


<h3>Author(s)</h3>

<p>Dominick Samperi wrote the initial versions of Rcpp (and
RcppTemplate) during 2005 and 2006.  Dirk Eddelbuettel made some
additions, and became maintainer in 2008. Dirk Eddelbuettel and Romain
Francois have been extending Rcpp since 2009.
</p>


<h3>See Also</h3>

<p><code>RcppExample</code>.
</p>
<p>See the <a href="RcppExamples.html#topic+RcppExamples-package">RcppExamples-package</a> for examples of the
recommended <span class="pkg">Rcpp</span> API and <a href="Rcpp.html#topic+Rcpp-package">Rcpp-package</a> for
documentation on the recommended API to extend R with C++ code, while
the deprecated <a href="RcppClassic.html#topic+RcppClassic-package">RcppClassic-package</a> documents the
older, deprecated API.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># set up some value
vector &lt;- (seq(1,9))^2

# call the underlying  C++ function
result &lt;- RcppVectorExample(vector)

# inspect returned object
result
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
