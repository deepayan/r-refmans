<!DOCTYPE html><html><head><title>Help for package lumberjack</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {lumberjack}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#+25+26gt+3B+26gt+3B+25'><p>The lumberjack operator</p></a></li>
<li><a href='#cellwise'><p>The cellwise logger.</p></a></li>
<li><a href='#dump_log'><p>Dump logging data</p></a></li>
<li><a href='#expression_logger'><p>The expression logger.</p></a></li>
<li><a href='#filedump'><p>The file dumping logger.</p></a></li>
<li><a href='#get_log'><p>Get log object from a data item</p></a></li>
<li><a href='#lumberjack'><p>Track changes in data</p></a></li>
<li><a href='#no_log'><p>The nop logger</p></a></li>
<li><a href='#run_file'><p>Run a file while tracking changes in data</p></a></li>
<li><a href='#simple'><p>The simple logger</p></a></li>
<li><a href='#start_log'><p>Start tracking an R object</p></a></li>
<li><a href='#stop_log'><p>Stop logging</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Maintainer:</td>
<td>Mark van der Loo &lt;mark.vanderloo@gmail.com&gt;</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://joinup.ec.europa.eu/software/page/eupl">EUPL</a></td>
</tr>
<tr>
<td>Title:</td>
<td>Track Changes in Data</td>
</tr>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>Description:</td>
<td>A framework that allows for easy logging of changes in data.
    Main features: start tracking changes by adding a single line of code to 
    an existing script. Track changes in multiple datasets, using multiple 
    loggers. Add custom-built loggers or use loggers offered by other 
    packages. &lt;<a href="https://doi.org/10.18637%2Fjss.v098.i01">doi:10.18637/jss.v098.i01</a>&gt;.</td>
</tr>
<tr>
<td>Version:</td>
<td>1.3.1</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/markvanderloo/lumberjack">https://github.com/markvanderloo/lumberjack</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/markvanderloo/lumberjack/issues">https://github.com/markvanderloo/lumberjack/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>utils, R6</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>tinytest</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-03-29 08:35:26 UTC; mark</td>
</tr>
<tr>
<td>Author:</td>
<td>Mark van der Loo <a href="https://orcid.org/0000-0002-9807-4686"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Floris Ruijter [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-03-29 08:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+26gt+3B+25'>The lumberjack operator</h2><span id='topic++25+3E+3E+25'></span><span id='topic++25L+3E+25'></span>

<h3>Description</h3>

<p>The not-a-pipe operator that tracks changes in data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;&gt;% rhs

lhs %L&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>Input value</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>Function call or 'dotted' expression (see below). 
as value</p>
</td></tr>
</table>


<h3>Piping</h3>

<p>The operators <code>%L&gt;%</code> and <code>%&gt;&gt;%</code> are synonyms. The <code>%L&gt;%</code>
is the default since version 0.3.0 to avoid confusion with the <code>%&gt;&gt;%</code>
operator of the <code>pipeR</code> package but <code>%&gt;&gt;%</code> still works.
</p>
<p>The lumberjack operator behaves as a simplified version of the
<code>magrittr</code> pipe operator. The basic behavior of <code>lhs %&gt;&gt;% rhs</code> is
the following:
</p>

<ul>
<li><p>If the <code>rhs</code> uses dot-variables (<code>.</code>), these are interpreted
as the left-hand side, except in formulas where dots already have a special 
meaning.
</p>
</li>
<li><p>If the <code>rhs</code> is a function call, with no dot-variables used, the
<code>lhs</code> is used as its first argument.
</p>
</li></ul>

<p>The most notable differences with 'magrittr' are the following.
</p>

<ul>
<li><p> it does not allow you to define functions in the magrittr style,
like <code>a &lt;- . %&gt;% sin(.) </code> 

</p>
</li>
<li><p>there is no assignment-pipe like <code>%&lt;&gt;%</code>.
</p>
</li>
<li><p>you cannot do things like <code>x %&gt;% sin</code> (without the brackets).
</p>
</li></ul>



<h3>Logging</h3>

<p>If the left-hand-side is tagged for logging, the lumberjack will update the 
log by calling the logger's <code>$add()</code> method, with arguments <code>meta</code>,
<code>input</code>, <code>output</code>. Here, <code>meta</code> is a list with information on
the operations performed, and input and output are the left-hand-side and the
result, respectively.
</p>


<h3>See Also</h3>

<p>Other control: 
<code><a href="#topic+dump_log">dump_log</a>()</code>,
<code><a href="#topic+get_log">get_log</a>()</code>,
<code><a href="#topic+run_file">run_file</a>()</code>,
<code><a href="#topic+start_log">start_log</a>()</code>,
<code><a href="#topic+stop_log">stop_log</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># pass arguments to a function
1:3 %L&gt;% mean()

# pass arguments using "."
TRUE %L&gt;% mean(c(1,NA,3), na.rm = .)

# pass arguments to an expression, using "."
1:3 %L&gt;% { 3 * .}

# in a more complicated expression, return "." explicitly
women %L&gt;% { .$height &lt;- 2*.$height; . }



</code></pre>

<hr>
<h2 id='cellwise'>The cellwise logger.</h2><span id='topic+cellwise'></span>

<h3>Description</h3>

<p>The cellwise logger registers the row, column, old, and new value of cells
that changed, along with a step number, timestamp, source reference, and the
expression used to alter a dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cellwise(key, verbose=TRUE, tempfile=file.path(tempdir(),"cellwise.csv"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cellwise_+3A_key">key</code></td>
<td>
<p><code>[character|integer]</code> index to column that uniquely identifies a row.</p>
</td></tr>
<tr><td><code id="cellwise_+3A_verbose">verbose</code></td>
<td>
<p><code>[logical]</code> toggle verbosity.</p>
</td></tr>
<tr><td><code id="cellwise_+3A_tempfile">tempfile</code></td>
<td>
<p><code>[character]</code> filename for temporary log storage.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>An <code>R6</code> class object.
</p>


<h3>Creating a logger</h3>

<p><code>cellwise$new(key, verbose=TRUE, file=tempfile())</code>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>key</code></td><td style="text-align: left;"> <code>[character|integer]</code> index to column that uniquely identifies a row.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>verbose</code></td><td style="text-align: left;"> <code>[logical]</code> toggle verbosity.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>tempfile</code></td><td style="text-align: left;"> [character] filename for temporary log storage. </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Dump options</h3>

<p><code>$dump(file=NULL)</code>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>file</code></td><td style="text-align: left;"> <code>[character]</code> location to write final output to.</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>The default location is <code>"cellwise.csv"</code> in an interactive session, and
<code>"DATA_cellwise.csv"</code> in a script that executed via <code><a href="#topic+run_file">run_file</a></code>.
Here, <code>DATA</code> is the variable name of the data being tracked or the
<code>label</code> provided with <code><a href="#topic+start_log">start_log</a></code>.
</p>


<h3>Getting data from the logger</h3>

<p><code>$logdata()</code> Returns a data frame with the current log.
</p>


<h3>Details</h3>

<p>At initialization, the cellwise logger opens a connection to a temporary
file. All logging info is appended to that connection. When
<code><a href="#topic+dump_log">dump_log</a></code> is called, the temporary file is closed, copied to
the output file, and reopened for writing. The connection is closed
automatically when the logger is destroyed, for example when calling
<code><a href="#topic+stop_log">stop_log</a>()</code>.
</p>


<h3>See Also</h3>

<p>Other loggers: 
<code><a href="#topic+expression_logger">expression_logger</a></code>,
<code><a href="#topic+filedump">filedump</a></code>,
<code><a href="#topic+no_log">no_log</a></code>,
<code><a href="#topic+simple">simple</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>logfile &lt;- tempfile(fileext=".csv")

# convert height from inch to cm and log changes.
# we need to set a unique key.
women$sleutel &lt;- 1:nrow(women)
out &lt;- women %L&gt;%
  start_log(log=cellwise$new(key="sleutel")) %L&gt;%
  {.$height &lt;- .$height*2.54; .} %L&gt;%
  dump_log(file=logfile, stop=TRUE)

read.csv(logfile) %L&gt;% head()

# work with an externally defined logger.
iris$id &lt;- seq_len(nrow(iris))
logger &lt;- cellwise$new(key="id")
iris %L&gt;% 
  start_log(logger) %L&gt;%
  head() %L&gt;%
  stop_log(dump=FALSE)
logger$logdata()


</code></pre>

<hr>
<h2 id='dump_log'>Dump logging data</h2><span id='topic+dump_log'></span>

<h3>Description</h3>

<p>Calls the <code>$dump(...)</code> method of logger(s) tracking an R object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dump_log(data, logger = NULL, stop = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dump_log_+3A_data">data</code></td>
<td>
<p>An R object tracked by one or more loggers.</p>
</td></tr>
<tr><td><code id="dump_log_+3A_logger">logger</code></td>
<td>
<p><code>[character]</code> vector. Class names of loggers to dump (e.g.
<code>"simple"</code>).  When <code>loggers=NULL</code>, all loggers are dumped
for this object.</p>
</td></tr>
<tr><td><code id="dump_log_+3A_stop">stop</code></td>
<td>
<p><code>[logical]</code> stop logging after the dump? Removes the
logger(s) tracking the object.</p>
</td></tr>
<tr><td><code id="dump_log_+3A_...">...</code></td>
<td>
<p>Arguments passed to the <code>dump</code> method of the logger.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data</code>, invisibly.
</p>


<h3>See Also</h3>

<p>Other control: 
<code><a href="#topic++25+3E+3E+25">%&gt;&gt;%</a>()</code>,
<code><a href="#topic+get_log">get_log</a>()</code>,
<code><a href="#topic+run_file">run_file</a>()</code>,
<code><a href="#topic+start_log">start_log</a>()</code>,
<code><a href="#topic+stop_log">stop_log</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>logfile &lt;- tempfile(fileext=".csv")
women %L&gt;%
  start_log(logger=simple$new()) %L&gt;%
  transform(height_cm = height*2.52) %L&gt;%
  dump_log(file=logfile)
logdata &lt;- read.csv(logfile)
head(logdata)


</code></pre>

<hr>
<h2 id='expression_logger'>The expression logger.</h2><span id='topic+expression_logger'></span>

<h3>Description</h3>

<p>Records the result of one or more user-defined expressions that perform
calculations on the object being tracked.
</p>


<h3>Format</h3>

<p>An <code>R6</code> class object.
</p>


<h3>Creating a logger</h3>

<p><code>expression_logger$new(..., verbose=TRUE)</code>
</p>

<table>
<tr>
 <td style="text-align: left;">
<code>...</code></td><td style="text-align: left;"> A comma-separated list of <code>name = expression</code> pairs. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>verbose</code></td><td style="text-align: left;"> <code>[logical]</code> toggle verbosity.
</td>
</tr>

</table>

<p>Each expression will be evaluated in the context of the object tracked with
this logger. An expression is expected to have a single <code>numeric</code> or
<code>character</code> output.
</p>


<h3>Dump options</h3>

<p><code>$dump(file=NULL)</code>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>file</code></td><td style="text-align: left;"> <code>[character]</code> location to write final output to.</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>The default location is <code>"expression.csv"</code> in an interactive session, and
<code>"DATA_expression.csv"</code> in a script that executed via <code><a href="#topic+run_file">run_file</a></code>.
Here, <code>DATA</code> is the variable name of the data being tracked
or the <code>label</code> provided with <code><a href="#topic+start_log">start_log</a></code>.
</p>


<h3>See Also</h3>

<p>Other loggers: 
<code><a href="#topic+cellwise">cellwise</a></code>,
<code><a href="#topic+filedump">filedump</a></code>,
<code><a href="#topic+no_log">no_log</a></code>,
<code><a href="#topic+simple">simple</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
logfile &lt;- file.path(tempfile(fileext=".csv"))
e &lt;- expression_logger$new(mean=mean(height), sd=sd(height))

out &lt;- women %L&gt;%
  start_log(e) %L&gt;%
  within(height &lt;- height * 2) %L&gt;%
  within(height &lt;- height * 3) %L&gt;%
  dump_log(file=logfile)

read.csv(logfile)


</code></pre>

<hr>
<h2 id='filedump'>The file dumping logger.</h2><span id='topic+filedump'></span>

<h3>Description</h3>

<p>The file dumping logger dumps the most recent version of a dataset to csv in
a directory of choice.
</p>


<h3>Format</h3>

<p>An <code>R6</code> class object.
</p>


<h3>Creating a logger</h3>

<p><code>filedump$new(dir=file.path(tempdir(),"filedump"), filename="%sstep%03d.csv",verbose=TRUE)</code>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>dir</code></td><td style="text-align: left;"> <code>[character]</code> Directory location to write the file dumps.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>filename</code></td><td style="text-align: left;"> <code>[character]</code> Template, used to create file names.
                      to create a file name.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>verbose</code></td><td style="text-align: left;"> <code>[logical]</code> toggle verbosity.
</td>
</tr>

</table>

<p>File locations are created with <code>file.path(dir, file)</code>, where
<code>file</code> is generated as <code>sprintf(filename, DATA, STEP)</code>. In
interactive sessions <code>DATA=""</code>. In sessions where a script is executed
using <code><a href="#topic+run_file">run_file</a></code>, <code>DATA</code> is the name of the R object being
tracked or the <code>label</code> provided with <code><a href="#topic+start_log">start_log</a></code>.
<code>STEP</code> is a counter that increases at each dump.
</p>


<h3>Dump options</h3>

<p><code>$dump(...)</code>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>...</code></td><td style="text-align: left;"> Currently unused.</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Retrieve log data</h3>

<p><code>$logdata()</code> returns a list of data frames, sorted in the order returned by
<code>base::dir()</code>
</p>


<h3>Details</h3>

<p>If <code>dir</code> does not exist it is created.
</p>


<h3>See Also</h3>

<p>Other loggers: 
<code><a href="#topic+cellwise">cellwise</a></code>,
<code><a href="#topic+expression_logger">expression_logger</a></code>,
<code><a href="#topic+no_log">no_log</a></code>,
<code><a href="#topic+simple">simple</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>logger &lt;- filedump$new()

out &lt;- women %L&gt;%
  start_log(logger) %L&gt;%
  within(height &lt;- height * 2) %L&gt;%
  within(height &lt;- height * 3) %L&gt;%
  dump_log()
dir(file.path(tempdir(),"filedump"))


</code></pre>

<hr>
<h2 id='get_log'>Get log object from a data item</h2><span id='topic+get_log'></span>

<h3>Description</h3>

<p>Get log object from a data item
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_log(data, logger = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_log_+3A_data">data</code></td>
<td>
<p>An R object.</p>
</td></tr>
<tr><td><code id="get_log_+3A_logger">logger</code></td>
<td>
<p><code>[character]</code> scalar. Logger to return. Can be
<code>NULL</code> when a single logger is attached.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logging object, or <code>NULL</code> if none exists.
</p>


<h3>See Also</h3>

<p>Other control: 
<code><a href="#topic++25+3E+3E+25">%&gt;&gt;%</a>()</code>,
<code><a href="#topic+dump_log">dump_log</a>()</code>,
<code><a href="#topic+run_file">run_file</a>()</code>,
<code><a href="#topic+start_log">start_log</a>()</code>,
<code><a href="#topic+stop_log">stop_log</a>()</code>
</p>

<hr>
<h2 id='lumberjack'>Track changes in data</h2><span id='topic+lumberjack'></span>

<h3>Description</h3>

<p>This package allows you to track changes in R objects by defining one or
more loggers for each object. There are a number of built-in loggers and
users (or package authors) can create their own loggers.  To get started
please have a look at the <a href="../doc/using_lumberjack.pdf">using
lumberjack</a> vignette.
</p>


<h3>Author(s)</h3>

<p>Mark van der Loo
</p>

<hr>
<h2 id='no_log'>The nop logger</h2><span id='topic+no_log'></span>

<h3>Description</h3>

<p>Record nothing, but present logger interface.
</p>


<h3>Format</h3>

<p>An <code>R6</code> class object.
</p>


<h3>Creating a logger</h3>

<p><code>no_logger$new(verbose=TRUE)</code>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>verbose</code></td><td style="text-align: left;"> toggle verbosity
</td>
</tr>

</table>



<h3>Dump options</h3>

<p><code>$dump(file=NULL,...)</code>
</p>

<table>
<tr>
 <td style="text-align: left;">
<code>file</code></td><td style="text-align: left;"> Ignored. Filename or <code><a href="base.html#topic+connection">connection</a></code> to write output to.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>...</code></td><td style="text-align: left;"> Ignored. extra options passed to <code><a href="utils.html#topic+write.csv">write.csv</a></code>, except
<code>row.names</code>, which is set to <code>FALSE</code>.</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>No file or output is created, except a message when <code>verbose=TRUE</code>.
</p>


<h3>Get data</h3>

<p><code>$logdata()</code> Returns empty data.frame.
</p>


<h3>See Also</h3>

<p>Other loggers: 
<code><a href="#topic+cellwise">cellwise</a></code>,
<code><a href="#topic+expression_logger">expression_logger</a></code>,
<code><a href="#topic+filedump">filedump</a></code>,
<code><a href="#topic+simple">simple</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
logfile &lt;- tempfile(fileext=".csv")
out &lt;- women %L&gt;%
  start_log(log=no_log$new(verbose=FALSE)) %L&gt;%
  identity() %L&gt;%
  head() %L&gt;% 
  dump_log(file=logfile, stop=TRUE)

cat(readLines(logfile),"\n") # Empty file

</code></pre>

<hr>
<h2 id='run_file'>Run a file while tracking changes in data</h2><span id='topic+run_file'></span><span id='topic+source_file'></span>

<h3>Description</h3>

<p>Run all code in a file. Changes in data that are tracked, (e.g.  with
<code><a href="#topic+start_log">start_log</a>(data)</code>) will be followed by the assigned loggers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_file(file, auto_dump = TRUE, envir = NULL)

source_file(file, auto_dump = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="run_file_+3A_file">file</code></td>
<td>
<p><code>[character]</code> file to run.</p>
</td></tr>
<tr><td><code id="run_file_+3A_auto_dump">auto_dump</code></td>
<td>
<p><code>[logical]</code> Toggle automatically dump all remaining logs
after executing <code>file</code>.</p>
</td></tr>
<tr><td><code id="run_file_+3A_envir">envir</code></td>
<td>
<p><code>[environment]</code> to run the code in. By default a new environment will be created
with <code>.GlobalEnv</code> as parent.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The environment where the code was executed, invisibly.
</p>


<h3>Details</h3>

<p><code>run\_file</code> runs code in a separate environment, and returns the environment with all
the variables created by the code. <code>source\_file</code> acts like <code><a href="base.html#topic+source">source</a></code> and 
runs all the code in the current global workspace (<code>.GlobalEnv</code>).
</p>


<h3>See Also</h3>

<p>Other control: 
<code><a href="#topic++25+3E+3E+25">%&gt;&gt;%</a>()</code>,
<code><a href="#topic+dump_log">dump_log</a>()</code>,
<code><a href="#topic+get_log">get_log</a>()</code>,
<code><a href="#topic+start_log">start_log</a>()</code>,
<code><a href="#topic+stop_log">stop_log</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># using 'dontrun'
## Not run: 
# create an R file, with logging.
script &lt;- "
library(lumberjack)
data(women)
start_log(women, logger=simple$new())
women$height &lt;- women$height*2.54
women$weight &lt;- women$weight*0.453592
dump_log()
"
write(script, file="myscript.R")
# run the script
lumberjack::run_file("myscript.R")
# read the logfile
read.csv("women_simple.csv")

## End(Not run)

</code></pre>

<hr>
<h2 id='simple'>The simple logger</h2><span id='topic+simple'></span>

<h3>Description</h3>

<p>Record for each expression a <code>POSIXct</code> timestamp and a <code>logical</code>
indicating whether the tracked object has changed.
</p>


<h3>Format</h3>

<p>An <code>R6</code> class object.
</p>


<h3>Creating a logger</h3>

<p><code>simple$new(verbose=TRUE)</code>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>verbose</code></td><td style="text-align: left;"> toggle verbosity
</td>
</tr>

</table>



<h3>Dump options</h3>

<p><code>$dump(file=NULL,...)</code>
</p>

<table>
<tr>
 <td style="text-align: left;">
<code>file</code></td><td style="text-align: left;"> filename or <code><a href="base.html#topic+connection">connection</a></code> to write output to.</td>
</tr>
<tr>
 <td style="text-align: left;">
<code>...</code></td><td style="text-align: left;"> extra options passed to <code><a href="utils.html#topic+write.csv">write.csv</a></code>, except
<code>row.names</code>, which is set to <code>FALSE</code>.</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>The default location is <code>"simple.csv"</code> in an interactive session, and
<code>"DATA_simple.csv"</code> in a script that executed via <code><a href="#topic+run_file">run_file</a></code>.
Here, <code>DATA</code> is the variable name of the data being tracked 
or the <code>label</code> provided with <code><a href="#topic+start_log">start_log</a></code>.
</p>


<h3>Get data</h3>

<p><code>$logdata()</code> Returns a data frame with the current log.
</p>


<h3>See Also</h3>

<p>Other loggers: 
<code><a href="#topic+cellwise">cellwise</a></code>,
<code><a href="#topic+expression_logger">expression_logger</a></code>,
<code><a href="#topic+filedump">filedump</a></code>,
<code><a href="#topic+no_log">no_log</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
logfile &lt;- tempfile(fileext=".csv")
out &lt;- women %L&gt;%
  start_log(log=simple$new(verbose=FALSE)) %L&gt;%
  identity() %L&gt;%
  head() %L&gt;% 
  dump_log(file=logfile, stop=TRUE)


read.csv(logfile,stringsAsFactors=FALSE)

</code></pre>

<hr>
<h2 id='start_log'>Start tracking an R object</h2><span id='topic+start_log'></span>

<h3>Description</h3>

<p>Start tracking an R object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>start_log(data, logger = simple$new(), label = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="start_log_+3A_data">data</code></td>
<td>
<p>An R object.</p>
</td></tr>
<tr><td><code id="start_log_+3A_logger">logger</code></td>
<td>
<p>A logging object (typically an environment wrapped in an S3 class)</p>
</td></tr>
<tr><td><code id="start_log_+3A_label">label</code></td>
<td>
<p><code>[character]</code> scalar. A label to attach to the logger (for
loggers supporting it).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All loggers that come with <span class="pkg">lumberjack</span> support labeling. The label is
used by <code>dump</code> methods to create a unique file name for each
object/logger combination.
</p>
<p>If <code>label</code> is not supplied, <code>start_log</code> attempts to create a label
from the name of the <code>data</code> variable. This probably fails when
<code>data</code> is not a variable but an expression (like <code>read.csv...</code>). A
label is also not created when data is passed via the lumberjack not-a-pipe
operator.  In that case the label is (silently) not set. In cases where
multiple datasets are logged with the same type of logger, this could lead
to overwriting of dump files, unless <code>file</code> is explicitly defined when
calling <code><a href="#topic+dump_log">dump_log</a></code>.
</p>


<h3>See Also</h3>

<p>Other control: 
<code><a href="#topic++25+3E+3E+25">%&gt;&gt;%</a>()</code>,
<code><a href="#topic+dump_log">dump_log</a>()</code>,
<code><a href="#topic+get_log">get_log</a>()</code>,
<code><a href="#topic+run_file">run_file</a>()</code>,
<code><a href="#topic+stop_log">stop_log</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>logfile &lt;- tempfile(fileext=".csv")
women %L&gt;%
  start_log(logger=simple$new()) %L&gt;%
  transform(height_cm = height*2.52) %L&gt;%
  dump_log(file=logfile)
logdata &lt;- read.csv(logfile)
head(logdata)

</code></pre>

<hr>
<h2 id='stop_log'>Stop logging</h2><span id='topic+stop_log'></span>

<h3>Description</h3>

<p>Calls the logger's <code>$stop()</code> method if it exists, and removes
the logger as attribute from <code>data</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stop_log(data, logger = NULL, dump = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stop_log_+3A_data">data</code></td>
<td>
<p>An R object.</p>
</td></tr>
<tr><td><code id="stop_log_+3A_logger">logger</code></td>
<td>
<p><code>[character]</code> vector. Class names of loggers to dump (e.g.
<code>"simple"</code>).  When <code>loggers=NULL</code>, all loggers are stopped and
removed for this data.</p>
</td></tr>
<tr><td><code id="stop_log_+3A_dump">dump</code></td>
<td>
<p><code>['logical']</code> Toggle dump log file.</p>
</td></tr>
<tr><td><code id="stop_log_+3A_...">...</code></td>
<td>
<p>Passed to the logger's <code>dump</code> method, if it exists.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The data, invisibly.
</p>


<h3>See Also</h3>

<p>Other control: 
<code><a href="#topic++25+3E+3E+25">%&gt;&gt;%</a>()</code>,
<code><a href="#topic+dump_log">dump_log</a>()</code>,
<code><a href="#topic+get_log">get_log</a>()</code>,
<code><a href="#topic+run_file">run_file</a>()</code>,
<code><a href="#topic+start_log">start_log</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>logfile &lt;- tempfile(fileext=".csv")
women %L&gt;%
  start_log(logger=simple$new()) %L&gt;%
  transform(height_cm = height*2.52) %L&gt;%
  dump_log(file=logfile)
logdata &lt;- read.csv(logfile)
head(logdata)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
