<!DOCTYPE html><html><head><title>Help for package jose</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {jose}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#base64url_encode'><p>Base64URL encoding</p></a></li>
<li><a href='#jwt_claim'><p>Generate claim</p></a></li>
<li><a href='#jwt_encode_hmac'><p>JSON Web Token</p></a></li>
<li><a href='#read_jwk'><p>JSON web-keys</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>JavaScript Object Signing and Encryption</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Read and write JSON Web Keys (JWK, rfc7517), generate and verify JSON
    Web Signatures (JWS, rfc7515) and encode/decode JSON Web Tokens (JWT, rfc7519).
    These standards provide modern signing and encryption formats that are natively
    supported by browsers via the JavaScript WebCryptoAPI, and used by services 
    like OAuth 2.0, LetsEncrypt, and Github Apps.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://datatracker.ietf.org/wg/jose/documents/">https://datatracker.ietf.org/wg/jose/documents/</a>
<a href="https://www.w3.org/TR/WebCryptoAPI/#jose">https://www.w3.org/TR/WebCryptoAPI/#jose</a>
<a href="https://github.com/r-lib/jose">https://github.com/r-lib/jose</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/r-lib/jose/issues">https://github.com/r-lib/jose/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>openssl (&ge; 1.2.1)</td>
</tr>
<tr>
<td>Imports:</td>
<td>jsonlite</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>spelling, testthat, knitr, rmarkdown</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-11-06 13:40:34 UTC; jeroen</td>
</tr>
<tr>
<td>Author:</td>
<td>Jeroen Ooms <a href="https://orcid.org/0000-0002-4035-0289"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jeroen Ooms &lt;jeroen@berkeley.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-11-06 14:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='base64url_encode'>Base64URL encoding</h2><span id='topic+base64url_encode'></span><span id='topic+base64url_decode'></span>

<h3>Description</h3>

<p>The <code>base64url_encode</code> functions are a variant of the standard base64. They are
specified in Section 5 of RFC 4648 as a URL-safe alternative. They use different symbols
for the 62:nd and 63:rd alphabet character and do not include trailing <code>==</code>
padding.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>base64url_encode(bin)

base64url_decode(text)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="base64url_encode_+3A_bin">bin</code></td>
<td>
<p>a binary blob to encode</p>
</td></tr>
<tr><td><code id="base64url_encode_+3A_text">text</code></td>
<td>
<p>a base64url encoded string</p>
</td></tr>
</table>

<hr>
<h2 id='jwt_claim'>Generate claim</h2><span id='topic+jwt_claim'></span>

<h3>Description</h3>

<p>Helper function to create a named list used as the claim of a JWT payload.
See <a href="https://tools.ietf.org/html/rfc7519#section-4.1">https://tools.ietf.org/html/rfc7519#section-4.1</a> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>jwt_claim(
  iss = NULL,
  sub = NULL,
  aud = NULL,
  exp = NULL,
  nbf = NULL,
  iat = Sys.time(),
  jti = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="jwt_claim_+3A_iss">iss</code></td>
<td>
<p>(Issuer) Claim, should be rfc7519 'StringOrURI' value</p>
</td></tr>
<tr><td><code id="jwt_claim_+3A_sub">sub</code></td>
<td>
<p>(Subject) Claim, should be rfc7519 'StringOrURI' value</p>
</td></tr>
<tr><td><code id="jwt_claim_+3A_aud">aud</code></td>
<td>
<p>(Audience) Claim, should contain one or rfc7519 'StringOrURI' values</p>
</td></tr>
<tr><td><code id="jwt_claim_+3A_exp">exp</code></td>
<td>
<p>(Expiration Time) Claim, should be rfc7519 'NumericDate' value; R
<code>POSIXct</code> values are automatically coerced.</p>
</td></tr>
<tr><td><code id="jwt_claim_+3A_nbf">nbf</code></td>
<td>
<p>(Not Before) Claim, should be rfc7519 'NumericDate' value; R
<code>POSIXct</code> values are automatically coerced.</p>
</td></tr>
<tr><td><code id="jwt_claim_+3A_iat">iat</code></td>
<td>
<p>(Issued At) Claim, should be rfc7519 'NumericDate' value; R
<code>POSIXct</code> values are automatically coerced.</p>
</td></tr>
<tr><td><code id="jwt_claim_+3A_jti">jti</code></td>
<td>
<p>(JWT ID) Claim, optional unique identifier for the JWT</p>
</td></tr>
<tr><td><code id="jwt_claim_+3A_...">...</code></td>
<td>
<p>additional custom claims to include</p>
</td></tr>
</table>

<hr>
<h2 id='jwt_encode_hmac'>JSON Web Token</h2><span id='topic+jwt_encode_hmac'></span><span id='topic+jwt'></span><span id='topic+jose'></span><span id='topic+jwt_decode_hmac'></span><span id='topic+jwt_encode_sig'></span><span id='topic+jwt_decode_sig'></span><span id='topic+jwt_split'></span>

<h3>Description</h3>

<p>Sign or verify a JSON web token. The <code>jwt_encode_hmac</code>, <code>jwt_encode_rsa</code>,
and <code>jwt_encode_ec</code> default to <code>HS256</code>, <code>RS256</code>, and <code>ES256</code>
respectively. See <a href="https://jwt.io">jwt.io</a> or
<a href="https://tools.ietf.org/html/rfc7519">RFC7519</a> for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>jwt_encode_hmac(claim = jwt_claim(), secret, size = 256, header = NULL)

jwt_decode_hmac(jwt, secret)

jwt_encode_sig(claim = jwt_claim(), key, size = 256, header = NULL)

jwt_decode_sig(jwt, pubkey)

jwt_split(jwt)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="jwt_encode_hmac_+3A_claim">claim</code></td>
<td>
<p>a named list with fields to include in the jwt payload</p>
</td></tr>
<tr><td><code id="jwt_encode_hmac_+3A_secret">secret</code></td>
<td>
<p>string or raw vector with a secret passphrase</p>
</td></tr>
<tr><td><code id="jwt_encode_hmac_+3A_size">size</code></td>
<td>
<p>bitsize of sha2 signature, i.e. <code>sha256</code>, <code>sha384</code> or <code>sha512</code>.
Only for HMAC/RSA, not applicable for ECDSA keys.</p>
</td></tr>
<tr><td><code id="jwt_encode_hmac_+3A_header">header</code></td>
<td>
<p>named list with additional parameter fields to include in the jwt header as
defined in <a href="https://tools.ietf.org/html/rfc7515#section-9.1.2">rfc7515 section 9.1.2</a></p>
</td></tr>
<tr><td><code id="jwt_encode_hmac_+3A_jwt">jwt</code></td>
<td>
<p>string containing the JSON Web Token (JWT)</p>
</td></tr>
<tr><td><code id="jwt_encode_hmac_+3A_key">key</code></td>
<td>
<p>path or object with RSA or EC private key, see <a href="openssl.html#topic+read_key">openssl::read_key</a>.</p>
</td></tr>
<tr><td><code id="jwt_encode_hmac_+3A_pubkey">pubkey</code></td>
<td>
<p>path or object with RSA or EC public key, see <a href="openssl.html#topic+read_pubkey">openssl::read_pubkey</a>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># HMAC signing
mysecret &lt;- "This is super secret"
token &lt;- jwt_claim(name = "jeroen", session = 123456)
sig &lt;- jwt_encode_hmac(token, mysecret)
jwt_decode_hmac(sig, mysecret)

# RSA encoding
mykey &lt;- openssl::rsa_keygen()
pubkey &lt;- as.list(mykey)$pubkey
sig &lt;- jwt_encode_sig(token, mykey)
jwt_decode_sig(sig, pubkey)

# Same with EC
mykey &lt;- openssl::ec_keygen()
pubkey &lt;- as.list(mykey)$pubkey
sig &lt;- jwt_encode_sig(token, mykey)
jwt_decode_sig(sig, pubkey)

# Get elements of the key
mysecret &lt;- "This is super secret"
token &lt;- jwt_claim(name = "jeroen", session = 123456)
jwt &lt;- jwt_encode_hmac(token, mysecret)
jwt_split(jwt)
</code></pre>

<hr>
<h2 id='read_jwk'>JSON web-keys</h2><span id='topic+read_jwk'></span><span id='topic+jwk_read'></span><span id='topic+jwk'></span><span id='topic+write_jwk'></span><span id='topic+jwk_write'></span>

<h3>Description</h3>

<p>Read and write RSA, ECDSA or AES keys as JSON web keys.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_jwk(file)

write_jwk(x, path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_jwk_+3A_file">file</code></td>
<td>
<p>path to file with key data or literal json string</p>
</td></tr>
<tr><td><code id="read_jwk_+3A_x">x</code></td>
<td>
<p>an RSA or EC key or pubkey file</p>
</td></tr>
<tr><td><code id="read_jwk_+3A_path">path</code></td>
<td>
<p>file path to write output</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># generate an ecdsa key
library(openssl)
key &lt;- ec_keygen("P-521")
write_jwk(key)
write_jwk(as.list(key)$pubkey)

# Same for RSA
key &lt;- rsa_keygen()
write_jwk(key)
write_jwk(as.list(key)$pubkey)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
