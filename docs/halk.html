<!DOCTYPE html><html><head><title>Help for package halk</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {halk}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#adjust_ages'><p>Adjusts data to account for plus group or minimum age</p></a></li>
<li><a href='#ages_as_ordered'><p>Convert ages from/to ordered factor</p></a></li>
<li><a href='#assign_ages'><p>Assign ages to non-aged data based on a fitted age model</p></a></li>
<li><a href='#assign_alk_attributes'><p>Assign associated age-length key attributes to a data.frame</p></a></li>
<li><a href='#assign_na_age'><p>Simple function that returns NA values</p></a></li>
<li><a href='#bin_lengths'><p>Convert a vector of lengths into binned values</p></a></li>
<li><a href='#calc_mse'><p>Calculate mean-squared-error (MSE) and root mean-squared-error (RMSE) of</p>
estimated ages</a></li>
<li><a href='#calc_mse_'><p>Backend helper function to compute MSE or RMSE</p></a></li>
<li><a href='#calc_stat_scores'><p>Compute test statistics for comparing actual and estimated ages</p></a></li>
<li><a href='#check_agelen_data'><p>Check for age/length data in the data being estimated or predicted</p></a></li>
<li><a href='#check_model_type'><p>Check the model type and return standardized version</p></a></li>
<li><a href='#integral_quotient'><p>Compute the quotient of integrals as a measure of percent error between two</p>
curves</a></li>
<li><a href='#laa_data'><p>Example length-at-age data</p></a></li>
<li><a href='#length_data'><p>Example length data</p></a></li>
<li><a href='#make_alk'><p>Make an age-length key out of length-at-age data</p></a></li>
<li><a href='#make_halk'><p>Create a hierarchical age-length key (HALK)</p></a></li>
<li><a href='#min_samples'><p>Count number of length-at-age samples or age groups at each level and return</p>
those with greater than equal to the minimum desired number</a></li>
<li><a href='#rename_laa_cols'><p>Simple helper function to rename size and age column names to age and length</p></a></li>
<li><a href='#spp_levels'><p>Check for species in columns and/or levels and add to levels if present</p></a></li>
<li><a href='#wb_spp_data'><p>Separate species, county, waterbody example length-at-age and length data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Methods to Create Hierarchical Age Length Keys for Age
Assignment</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.5</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Paul Frater &lt;paul.frater@wisconsin.gov&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides methods for implementing hierarchical age length keys
    to estimate fish ages from lengths using data borrowing. Users can create
    hierarchical age length keys and use them to assign ages given length.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>rlang (&ge; 1.0.4), tibble (&ge; 3.1.7), dplyr (&ge; 1.0.9), tidyr
(&ge; 1.2.0), purrr, tidyselect, magrittr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.1.4), knitr, rmarkdown</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-03 03:37:25 UTC; paul</td>
</tr>
<tr>
<td>Author:</td>
<td>Paul Frater <a href="https://orcid.org/0000-0002-7237-6563"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-03 04:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling 'rhs(lhs)'.
</p>

<hr>
<h2 id='adjust_ages'>Adjusts data to account for plus group or minimum age</h2><span id='topic+adjust_ages'></span><span id='topic+adjust_plus_min_ages_df'></span><span id='topic+adjust_plus_min_ages'></span>

<h3>Description</h3>

<p>These functions performs two tasks. It lumps all ages greater than the
plus group into that age, and it filters data only to those greater than
or equal to the minimum age. <code>adjust_plus_min_ages</code> works on a vector
whereas <code>adjust_plus_min_ages_df</code> words on a data.frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adjust_plus_min_ages_df(data, minage = NULL, pls_grp = NULL)

adjust_plus_min_ages(age_vec, minage = NULL, pls_grp = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="adjust_ages_+3A_data">data</code></td>
<td>
<p>Data with age as a column, or a numeric vector of ages</p>
</td></tr>
<tr><td><code id="adjust_ages_+3A_minage">minage</code></td>
<td>
<p>Numeric. The minimum age; everything else is excluded</p>
</td></tr>
<tr><td><code id="adjust_ages_+3A_pls_grp">pls_grp</code></td>
<td>
<p>Numeric. The plus group; all ages older will be lumped into
this group</p>
</td></tr>
<tr><td><code id="adjust_ages_+3A_age_vec">age_vec</code></td>
<td>
<p>A vector of ages</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame similar to <code>data</code>, but with ages less than
<code>minage</code> excluded and ages &gt;= <code>plus_group</code> aggregated into that age
</p>

<hr>
<h2 id='ages_as_ordered'>Convert ages from/to ordered factor</h2><span id='topic+ages_as_ordered'></span><span id='topic+ages_as_ordered_factor'></span><span id='topic+ages_as_integer'></span>

<h3>Description</h3>

<p>In order for the machine learning models to properly predict ages, the
known ages should be converted to an ordered factor during model fitting.
This will ensure that the predict.* functions return age values that actually
make sense.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ages_as_ordered_factor(data, age_col = "age")

ages_as_integer(data, age_col = "est.age")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ages_as_ordered_+3A_data">data</code></td>
<td>
<p>A data.frame with a column corresopnding to <code>age_col</code> or
a vector of values</p>
</td></tr>
<tr><td><code id="ages_as_ordered_+3A_age_col">age_col</code></td>
<td>
<p>Character. The name of the column that contains ages</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with the values in <code>age_col</code> converted to an
ordered factor
</p>

<hr>
<h2 id='assign_ages'>Assign ages to non-aged data based on a fitted age model</h2><span id='topic+assign_ages'></span>

<h3>Description</h3>

<p>Assign ages to non-aged data based on a fitted age model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assign_ages(newdata, object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="assign_ages_+3A_newdata">newdata</code></td>
<td>
<p>A vector or data.frame with size/length measurements</p>
</td></tr>
<tr><td><code id="assign_ages_+3A_object">object</code></td>
<td>
<p>An object of class &quot;alk&quot;, &quot;halk_fit&quot; as
produced by <code><a href="#topic+make_alk">make_alk</a></code> or <code><a href="#topic+make_halk">make_halk</a></code></p>
</td></tr>
<tr><td><code id="assign_ages_+3A_...">...</code></td>
<td>
<p>Additional parameters to pass to the S3 object methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame the same as <code>newdata</code>, but with ages assigned based
on the model provided in <code>object</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>spp_alk &lt;- make_halk(spp_data, levels = "spp")
spp_est_ages &lt;- assign_ages(spp_data, spp_alk)
</code></pre>

<hr>
<h2 id='assign_alk_attributes'>Assign associated age-length key attributes to a data.frame</h2><span id='topic+assign_alk_attributes'></span>

<h3>Description</h3>

<p>This is just a helper function to assign the needed attributes and classes
to a data.frame that is produced by either <code><a href="#topic+make_alk">make_alk</a></code> or
<code><a href="#topic+make_halk">make_halk</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assign_alk_attributes(
  data,
  size_col = "length",
  age_col = "age",
  autobin = TRUE,
  size_bin = 1,
  min_age = NULL,
  plus_group = NULL,
  alk_n = NULL,
  classes = "alk",
  dnorm_params = NULL,
  levels = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="assign_alk_attributes_+3A_data">data</code></td>
<td>
<p>A data.frame</p>
</td></tr>
<tr><td><code id="assign_alk_attributes_+3A_size_col">size_col</code></td>
<td>
<p>Character. Name of the column representing sizes</p>
</td></tr>
<tr><td><code id="assign_alk_attributes_+3A_age_col">age_col</code></td>
<td>
<p>Character. Name of the column representing ages</p>
</td></tr>
<tr><td><code id="assign_alk_attributes_+3A_autobin">autobin</code></td>
<td>
<p>Logical to set the attribute of autobin</p>
</td></tr>
<tr><td><code id="assign_alk_attributes_+3A_size_bin">size_bin</code></td>
<td>
<p>Numeric. What is the width of size bins</p>
</td></tr>
<tr><td><code id="assign_alk_attributes_+3A_min_age">min_age</code></td>
<td>
<p>Numeric. The minimum age that was included in the alk</p>
</td></tr>
<tr><td><code id="assign_alk_attributes_+3A_plus_group">plus_group</code></td>
<td>
<p>Numeric. The age that represents the plus group</p>
</td></tr>
<tr><td><code id="assign_alk_attributes_+3A_alk_n">alk_n</code></td>
<td>
<p>Numeric. The number of samples that went into creating the alk</p>
</td></tr>
<tr><td><code id="assign_alk_attributes_+3A_classes">classes</code></td>
<td>
<p>Character. The class that should get prepended to the
data.frame class(es)</p>
</td></tr>
<tr><td><code id="assign_alk_attributes_+3A_dnorm_params">dnorm_params</code></td>
<td>
<p>The value of parameters that went into creating the
normal distributions on the age groups</p>
</td></tr>
<tr><td><code id="assign_alk_attributes_+3A_levels">levels</code></td>
<td>
<p>Character vector of the levels used. This creates the &quot;levels&quot;
attribute if present</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with associated attributes assigned
</p>

<hr>
<h2 id='assign_na_age'>Simple function that returns NA values</h2><span id='topic+assign_na_age'></span>

<h3>Description</h3>

<p>A vector of NA will be returned that is the length of <code>x</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assign_na_age(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="assign_na_age_+3A_x">x</code></td>
<td>
<p>Any vector of any length</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector the same length as x containing only NA values
</p>

<hr>
<h2 id='bin_lengths'>Convert a vector of lengths into binned values</h2><span id='topic+bin_lengths'></span>

<h3>Description</h3>

<p>This will take a vector of numeric values and bin them according to the value
specified in binwidth
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bin_lengths(x, binwidth, include_upper = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bin_lengths_+3A_x">x</code></td>
<td>
<p>Numeric vector of values</p>
</td></tr>
<tr><td><code id="bin_lengths_+3A_binwidth">binwidth</code></td>
<td>
<p>Numeric vector specifying how wide the length bins should be</p>
</td></tr>
<tr><td><code id="bin_lengths_+3A_include_upper">include_upper</code></td>
<td>
<p>Logical. Append the upper value of the bin and return
the length range as a character string (TRUE), or return the lower value as
numeric (FALSE, default)</p>
</td></tr>
<tr><td><code id="bin_lengths_+3A_...">...</code></td>
<td>
<p>Additional arguments passed onto <code><a href="base.html#topic+cut">cut</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of values the same length as x, but binned to the values
according to binwidth
</p>


<h3>Examples</h3>

<pre><code class='language-R'>bin_lengths(length_data$length, binwidth = 2)
</code></pre>

<hr>
<h2 id='calc_mse'>Calculate mean-squared-error (MSE) and root mean-squared-error (RMSE) of
estimated ages</h2><span id='topic+calc_mse'></span><span id='topic+calc_rmse'></span>

<h3>Description</h3>

<p>These functions will calculate MSE and RMSE for estimated ages produced by
<code><a href="#topic+assign_ages">assign_ages</a></code>. Output is specific to each level used by the
age-length key to assign ages
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_mse(data, age_col = "age")

calc_rmse(data, age_col = "age")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calc_mse_+3A_data">data</code></td>
<td>
<p>A data.frame as created by <code><a href="#topic+assign_ages">assign_ages</a></code></p>
</td></tr>
<tr><td><code id="calc_mse_+3A_age_col">age_col</code></td>
<td>
<p>Character. Name of the age column in <code>data</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric value for estimated ages with no levels or a data.frame with
a MSE or RMSE value for each level used to fit ages
</p>


<h3>Examples</h3>

<pre><code class='language-R'>wae_data &lt;- spp_data[spp_data$spp == "walleye", ]
alk &lt;- make_alk(wae_data)
wae_est_age &lt;- assign_ages(wae_data, alk)
calc_mse(wae_est_age)
calc_rmse(wae_est_age)
</code></pre>

<hr>
<h2 id='calc_mse_'>Backend helper function to compute MSE or RMSE</h2><span id='topic+calc_mse_'></span>

<h3>Description</h3>

<p>This function is the engine for <code><a href="#topic+calc_mse">calc_mse</a></code> and
<code><a href="#topic+calc_rmse">calc_rmse</a></code>. It was only created to remove the <code>root</code>
argument from the user in the main <code>calc_mse</code> function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_mse_(data, age_col = "age", root = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calc_mse__+3A_data">data</code></td>
<td>
<p>A data.frame as created by <code><a href="#topic+assign_ages">assign_ages</a></code></p>
</td></tr>
<tr><td><code id="calc_mse__+3A_age_col">age_col</code></td>
<td>
<p>Character. Name of the age column in <code>data</code></p>
</td></tr>
<tr><td><code id="calc_mse__+3A_root">root</code></td>
<td>
<p>Logical. computer MSE (FALSE, default) or RMSE (TRUE)</p>
</td></tr>
</table>

<hr>
<h2 id='calc_stat_scores'>Compute test statistics for comparing actual and estimated ages</h2><span id='topic+calc_stat_scores'></span><span id='topic+calc_ks_score'></span><span id='topic+calc_chi_score'></span>

<h3>Description</h3>

<p>Using these functions you can compute either a Kolmogorov-Smirnov (KS)
statistic or a Chi-squared test statistic to compare estimated ages to actual
ages. See details for how each test works and what is reported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_ks_score(
  data,
  summary_fun = mean,
  age_col = "age",
  suppress_warnings = TRUE,
  return_val = "statistic",
  ...
)

calc_chi_score(
  data,
  age_col = "age",
  suppress_warnings = TRUE,
  return_val = "statistic",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calc_stat_scores_+3A_data">data</code></td>
<td>
<p>A data.frame containing estimated ages as returned by
<code><a href="#topic+assign_ages">assign_ages</a></code></p>
</td></tr>
<tr><td><code id="calc_stat_scores_+3A_summary_fun">summary_fun</code></td>
<td>
<p>Function used to compute summary statistics for
<code>calc_ks_score</code> for each age group (default is <code>mean</code>)</p>
</td></tr>
<tr><td><code id="calc_stat_scores_+3A_age_col">age_col</code></td>
<td>
<p>Character string specifying the name of the age column</p>
</td></tr>
<tr><td><code id="calc_stat_scores_+3A_suppress_warnings">suppress_warnings</code></td>
<td>
<p>Logical. Should any warnings from the function
call to <code>ks.test</code> or <code>chisq.test</code> be suppressed (TRUE, the default)</p>
</td></tr>
<tr><td><code id="calc_stat_scores_+3A_return_val">return_val</code></td>
<td>
<p>Character. The name of the object to return from the given
test</p>
</td></tr>
<tr><td><code id="calc_stat_scores_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass to <code>summary_fun</code>
(<code>calc_ks_score</code>) or <code>chisq.test</code> (<code>calc_chi_score</code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The KS test compares length distributions for each age class from known ages
against that of estimated ages computed by the <code><a href="#topic+assign_ages">assign_ages</a></code>
function. The output is a summary value of the test statistics as specified
by <code>summary_fun</code>.
</p>
<p>The <code>calc_chi_score</code> function performs a Chi-square test (using the
<code><a href="stats.html#topic+chisq.test">chisq.test</a></code> function) on the number of estimated and
actual ages for each age group.
</p>


<h3>Value</h3>

<p>A numeric value for each level that was used in the model to assign
ages
</p>


<h3>Examples</h3>

<pre><code class='language-R'>halk &lt;- make_halk(spp_data, levels = c("spp"))
newdat &lt;- laa_data
newdat$spp &lt;- "bluegill"
pred_ages &lt;- assign_ages(newdat, halk)
calc_ks_score(pred_ages)
calc_chi_score(pred_ages)
</code></pre>

<hr>
<h2 id='check_agelen_data'>Check for age/length data in the data being estimated or predicted</h2><span id='topic+check_agelen_data'></span><span id='topic+check_age_data'></span><span id='topic+check_length_data'></span>

<h3>Description</h3>

<p>These are just simple helper functions used within other functions that check
to make sure that ages and lengths are present in the data and stop the
fucntion call if they are missing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_age_data(data, age_col)

check_length_data(data, size_col)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_agelen_data_+3A_data">data</code></td>
<td>
<p>A data.frame</p>
</td></tr>
<tr><td><code id="check_agelen_data_+3A_age_col">age_col</code></td>
<td>
<p>Character. The column name for the age column in <code>data</code></p>
</td></tr>
<tr><td><code id="check_agelen_data_+3A_size_col">size_col</code></td>
<td>
<p>Character. The column name for the size column in <code>data</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>NULL. An error will be called if age/length data is missing
</p>

<hr>
<h2 id='check_model_type'>Check the model type and return standardized version</h2><span id='topic+check_model_type'></span>

<h3>Description</h3>

<p>This is a non-exported function to check whether the model type specified is
available and return a standardized version of the model name. This
standardized version will then feed into a S3 method for the given model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_model_type(model)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_model_type_+3A_model">model</code></td>
<td>
<p>A character string naming the model</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A standardized version of the model name, or an error if
<code>model</code> doesn't exist yet
</p>

<hr>
<h2 id='integral_quotient'>Compute the quotient of integrals as a measure of percent error between two
curves</h2><span id='topic+integral_quotient'></span>

<h3>Description</h3>

<p>This is a method for comparing how &quot;close&quot; or &quot;accurate&quot; one curve is to
another (reference) curve. The method works by dividing the area between the
curves by the area under the reference curve. See Details for more
information
</p>


<h3>Usage</h3>

<pre><code class='language-R'>integral_quotient(
  ref_curve_params,
  comp_curve_params,
  min_x,
  max_x,
  curve_fun = function(x, linf, k, t0) {
     out &lt;- linf * (1 - exp(-k * (x - t0)))
    
    return(out)
 }
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="integral_quotient_+3A_ref_curve_params">ref_curve_params</code></td>
<td>
<p>A list of named parameters for the reference curve
(i.e. the standard that is being compared to)</p>
</td></tr>
<tr><td><code id="integral_quotient_+3A_comp_curve_params">comp_curve_params</code></td>
<td>
<p>A list of named parameters for the curve that is
being compared</p>
</td></tr>
<tr><td><code id="integral_quotient_+3A_min_x">min_x</code></td>
<td>
<p>The minimum value across which to integrate</p>
</td></tr>
<tr><td><code id="integral_quotient_+3A_max_x">max_x</code></td>
<td>
<p>The maximum value across which to integrate</p>
</td></tr>
<tr><td><code id="integral_quotient_+3A_curve_fun">curve_fun</code></td>
<td>
<p>The function that is being compared. Defaults to an
anonymous function that is the von Bertalanffy growth function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The integral quotient method provides a basis for comparison between two
curves by dividing the area between the curves by the area under the
reference curve (i.e. the quotient of integrals)
</p>


<h3>Value</h3>

<p>A value of the area between curves divided by the area under the
reference curve
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ref_curve_params &lt;- list(linf = 60, k = 0.25, t0 = -0.5)
comp_curve_params &lt;- list(linf = 62, k = 0.25, t0 = -0.4)
comp_curve2_params &lt;- list(linf = 65, k = 0.25, t0 = -1)
comp_curve_iq &lt;-
 integral_quotient(ref_curve_params, comp_curve_params, 0, 10)
comp_curve2_iq &lt;-
  integral_quotient(ref_curve_params, comp_curve2_params, 0, 10)
vbgf &lt;- function (x, linf, k, t0) {linf * (1 - exp(-k * (x - t0)))}
curve(
  vbgf(x, ref_curve_params$linf, ref_curve_params$k, ref_curve_params$t0),
  from = 0,
  to = 10,
  ylim = c(0, 60),
  xlab = "Age", ylab = "Length"
)
curve(
  vbgf(x, comp_curve_params$linf, comp_curve_params$k, comp_curve_params$t0),
  add = TRUE,
  col = "blue"
)
curve(
  vbgf(x, comp_curve2_params$linf, comp_curve2_params$k, comp_curve2_params$t0),
  add = TRUE,
  col = "red"
)
text(9, 40, labels = paste0(comp_curve_iq, "%"), col = "blue")
text(9, 43, labels = paste0(comp_curve2_iq, "%"), col = "red")
</code></pre>

<hr>
<h2 id='laa_data'>Example length-at-age data</h2><span id='topic+laa_data'></span><span id='topic+laa_data_low_n'></span><span id='topic+laa_data_low_age_n'></span><span id='topic+laa_data_few_ages'></span><span id='topic+spp_data'></span><span id='topic+spp_data_low_n'></span><span id='topic+spp_data_low_age_n'></span><span id='topic+spp_data_few_ages'></span>

<h3>Description</h3>

<p>Simple age-structured population data with age and length records for each
individual. <code>laa_data</code> represents a well-sampled age-length dataset,
whereas <code>laa_data_low_n</code> is one with few total samples,
<code>laa_data_low_age_n</code> is one with few samples in some ages,
and <code>laa_data_few_ages</code> is a dataset with few age groups sampled.
Species specific datasets are similar, but with the prefix <code>laa_</code>
replaced by <code>spp_</code>. These datasets contain species specific
length-at-age data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>laa_data

laa_data_low_n

laa_data_low_age_n

laa_data_few_ages

spp_data

spp_data_low_n

spp_data_low_age_n

spp_data_few_ages
</code></pre>


<h3>Format</h3>

<p>## 'laa_data'
A data.frame with 244 rows and 2 columns:
</p>

<dl>
<dt>spp</dt><dd><p>Species, only applicable for spp_data_* data.frames</p>
</dd>
<dt>age</dt><dd><p>Age of individual</p>
</dd>
<dt>length</dt><dd><p>Length of individual (arbitrary units)</p>
</dd>
</dl>

<p>## 'laa_data_low_n'
A data.frame with 27 rows and 2 columns:
</p>
<p>## 'laa_data_low_age_n'
A data.frame with 74 rows and 2 columns:
</p>
<p>## 'laa_data_few_ages'
A data.frame with 49 rows and 2 columns:
</p>
<p>## 'spp_data'
A data.frame with 1022 rows and 3 columns:
</p>
<p>## 'spp_data_low_n'
A data.frame with 87 rows and 3 columns:
</p>
<p>## 'spp_data_low_age_n'
A data.frame with 160 rows and 3 columns:
</p>
<p>## 'spp_data_few_ages'
A data.frame with 261 rows and 3 columns:
</p>

<hr>
<h2 id='length_data'>Example length data</h2><span id='topic+length_data'></span><span id='topic+spp_length_data'></span>

<h3>Description</h3>

<p>Simple vector and data.frame containing length measurements. These are used
in examples for functions that assign ages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>length_data

spp_length_data
</code></pre>


<h3>Format</h3>

<p>## length data
A data.frame with one column and 244 rows
</p>

<dl>
<dt>spp</dt><dd><p>Species, only in spp_length_data</p>
</dd>
<dt>length</dt><dd><p>Length of individual (arbitrary units)</p>
</dd>
</dl>

<p>## 'spp_length_data'
A data.frame with 1022 rows and 2 columns:
</p>

<hr>
<h2 id='make_alk'>Make an age-length key out of length-at-age data</h2><span id='topic+make_alk'></span>

<h3>Description</h3>

<p>Make an age-length key out of length-at-age data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_alk(
  laa_data,
  sizecol = "length",
  autobin = TRUE,
  binwidth = 1,
  agecol = "age",
  min_age = NULL,
  plus_group = NULL,
  numcol = NULL,
  min_age_sample_size = 5,
  min_total_sample_size = min_age_sample_size * min_age_groups,
  min_age_groups = 5,
  warnings = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_alk_+3A_laa_data">laa_data</code></td>
<td>
<p>A data.frame with length-at-age data</p>
</td></tr>
<tr><td><code id="make_alk_+3A_sizecol">sizecol</code></td>
<td>
<p>Character string naming the column that holds size data</p>
</td></tr>
<tr><td><code id="make_alk_+3A_autobin">autobin</code></td>
<td>
<p>Logical. Should the function automatically assign length bins
(default is TRUE)</p>
</td></tr>
<tr><td><code id="make_alk_+3A_binwidth">binwidth</code></td>
<td>
<p>Numeric. If <code>autobin = TRUE</code> this is the width for the
size bins</p>
</td></tr>
<tr><td><code id="make_alk_+3A_agecol">agecol</code></td>
<td>
<p>Character string naming the column that holds age data</p>
</td></tr>
<tr><td><code id="make_alk_+3A_min_age">min_age</code></td>
<td>
<p>Numeric. All ages less than this value will not be used in
ALK</p>
</td></tr>
<tr><td><code id="make_alk_+3A_plus_group">plus_group</code></td>
<td>
<p>Numeric value of the oldest age to include in the ALK. All
older individuals will be included in this plus group</p>
</td></tr>
<tr><td><code id="make_alk_+3A_numcol">numcol</code></td>
<td>
<p>Character string naming the column that holds numbers data</p>
</td></tr>
<tr><td><code id="make_alk_+3A_min_age_sample_size">min_age_sample_size</code></td>
<td>
<p>Only applicable to alk models. The minimum
number of samples that must be in each age group in order to create an alk</p>
</td></tr>
<tr><td><code id="make_alk_+3A_min_total_sample_size">min_total_sample_size</code></td>
<td>
<p>Only applicable to alk models. The minimum
number of samples that must be in data in order to create an alk</p>
</td></tr>
<tr><td><code id="make_alk_+3A_min_age_groups">min_age_groups</code></td>
<td>
<p>Only applicable to alk models. The minimum number of
age groups that must be in data in order to create an alk</p>
</td></tr>
<tr><td><code id="make_alk_+3A_warnings">warnings</code></td>
<td>
<p>Logical. Display warnings (TRUE, default)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame containing the proportions of records for each size
that are at each age.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>make_alk(laa_data)
</code></pre>

<hr>
<h2 id='make_halk'>Create a hierarchical age-length key (HALK)</h2><span id='topic+make_halk'></span>

<h3>Description</h3>

<p>This function creates a hierarchically nested age-length key that can be
used to estimate age of an organism based on proportion of sampled organisms
in each age group.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_halk(data, levels = NULL, age_col = "age", size_col = "length", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_halk_+3A_data">data</code></td>
<td>
<p>A data.frame with age and size samples</p>
</td></tr>
<tr><td><code id="make_halk_+3A_levels">levels</code></td>
<td>
<p>Character vector specifying the levels for HALK creation</p>
</td></tr>
<tr><td><code id="make_halk_+3A_age_col">age_col</code></td>
<td>
<p>Optional. String of the column name in <code>data</code> housing
age data</p>
</td></tr>
<tr><td><code id="make_halk_+3A_size_col">size_col</code></td>
<td>
<p>Optional. String of the column name in <code>data</code> housing
size data</p>
</td></tr>
<tr><td><code id="make_halk_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code><a href="#topic+make_alk">make_alk</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble</a></code> with columns for each level and
a column called alk that houses the age-length key for that particular level
</p>


<h3>Examples</h3>

<pre><code class='language-R'>make_halk(spp_data, levels = "spp")
</code></pre>

<hr>
<h2 id='min_samples'>Count number of length-at-age samples or age groups at each level and return
those with greater than equal to the minimum desired number</h2><span id='topic+min_samples'></span><span id='topic+min_count_laa_data'></span><span id='topic+min_age_groups'></span>

<h3>Description</h3>

<p>These are helper shortcut functions to determine if data meet the minimum
desired number of age groups and/or sample sizes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>min_count_laa_data(
  data,
  sub_levels = NULL,
  min_age_sample_size = NULL,
  min_total_sample_size = NULL,
  min_age_groups = NULL
)

min_age_groups(data, sub_levels = NULL, min_age_grps)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="min_samples_+3A_data">data</code></td>
<td>
<p>Data.frame with length-at-age data</p>
</td></tr>
<tr><td><code id="min_samples_+3A_sub_levels">sub_levels</code></td>
<td>
<p>The levels at which to check</p>
</td></tr>
<tr><td><code id="min_samples_+3A_min_age_sample_size">min_age_sample_size</code></td>
<td>
<p>Only applicable to alk models. The minimum
number of samples that must be in each age group in order to create an alk</p>
</td></tr>
<tr><td><code id="min_samples_+3A_min_total_sample_size">min_total_sample_size</code></td>
<td>
<p>Only applicable to alk models. The minimum
number of samples that must be in data in order to create an alk</p>
</td></tr>
<tr><td><code id="min_samples_+3A_min_age_groups">min_age_groups</code></td>
<td>
<p>Only applicable to alk models. The minimum number of
age groups that must be in data in order to create an alk</p>
</td></tr>
<tr><td><code id="min_samples_+3A_min_age_grps">min_age_grps</code></td>
<td>
<p>The minimum number of age groups that must be present
in data to create an ALK</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame just like <code>data</code>, but with samples excluded that
don't meet the required number of samples in <code>min_sample_size</code>
</p>

<hr>
<h2 id='rename_laa_cols'>Simple helper function to rename size and age column names to age and length</h2><span id='topic+rename_laa_cols'></span>

<h3>Description</h3>

<p>Simple helper function to rename size and age column names to age and length
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rename_laa_cols(
  data,
  size_col = "length",
  age_col = "age",
  num_col = NULL,
  goback = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rename_laa_cols_+3A_data">data</code></td>
<td>
<p>Any data.frame with some columns representing age and size</p>
</td></tr>
<tr><td><code id="rename_laa_cols_+3A_size_col">size_col</code></td>
<td>
<p>Character. The name of the column containing sizes</p>
</td></tr>
<tr><td><code id="rename_laa_cols_+3A_age_col">age_col</code></td>
<td>
<p>Character. The name of the column containing ages</p>
</td></tr>
<tr><td><code id="rename_laa_cols_+3A_num_col">num_col</code></td>
<td>
<p>Character. The name of the column containing number of
individuals</p>
</td></tr>
<tr><td><code id="rename_laa_cols_+3A_goback">goback</code></td>
<td>
<p>Logical. Reverse names once they've already been renamed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame the same as <code>data</code>, but with names changed
</p>

<hr>
<h2 id='spp_levels'>Check for species in columns and/or levels and add to levels if present</h2><span id='topic+spp_levels'></span><span id='topic+is_spp_in_levels'></span><span id='topic+is_spp_in_data'></span><span id='topic+spp_level'></span><span id='topic+rm_spp_level'></span><span id='topic+add_spp_level'></span>

<h3>Description</h3>

<p>These helper functions just check to see if a species column exists in the
data (designated as 'spp' or 'species'). If one of those columns exists,
but the column name is not in the levels argument it will get added to
levels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_spp_in_levels(levels)

is_spp_in_data(data)

spp_level(levels)

rm_spp_level(levels)

add_spp_level(data, levels)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spp_levels_+3A_levels">levels</code></td>
<td>
<p>The levels argument passed from <code><a href="#topic+make_halk">make_halk</a></code></p>
</td></tr>
<tr><td><code id="spp_levels_+3A_data">data</code></td>
<td>
<p>A data.frame with length-at-age data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of levels possibly with 'spp' or 'species' added
</p>

<hr>
<h2 id='wb_spp_data'>Separate species, county, waterbody example length-at-age and length data</h2><span id='topic+wb_spp_data'></span><span id='topic+wb_spp_laa_data'></span><span id='topic+wb_spp_length_data'></span>

<h3>Description</h3>

<p>Simple age-structured population with age and/or length records, but
expanded across multiple counties and waterbodies for tests and examples
in <code><a href="#topic+make_halk">make_halk</a></code> used with levels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wb_spp_laa_data

wb_spp_length_data
</code></pre>


<h3>Format</h3>

<p>## 'wb_spp_laa_data'
A data.frame with 36,849 records and 5 columns
</p>

<dl>
<dt>spp</dt><dd><p>Species</p>
</dd>
<dt>county</dt><dd><p>Arbitrary example county name</p>
</dd>
<dt>waterbody</dt><dd><p>Arbitrary example waterbody name nested within county</p>
</dd>
<dt>age</dt><dd><p>Age of individual, only in wb_spp_laa_data</p>
</dd>
<dt>length</dt><dd><p>Length of individual (arbitrary units)</p>
</dd>
</dl>

<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 9182 rows and 4 columns.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
