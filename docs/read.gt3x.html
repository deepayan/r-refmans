<!DOCTYPE html><html><head><title>Help for package read.gt3x</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {read.gt3x}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#as.data.frame.activity'><p>Convert an activity matrix to a data.frame</p></a></li>
<li><a href='#get_n_samples'><p>Calculate the expected activity sample size from start time</p>
and last sample time in the info.txt of a gt3x directory</a></li>
<li><a href='#gt3x_datapath'><p>Path to read.gt3x package sample data</p></a></li>
<li><a href='#gt3x_dataurl'><p>Get url of github release</p></a></li>
<li><a href='#gt3x_download'><p>Download and unzip a zipped <code>gt3x</code> file</p></a></li>
<li><a href='#gt3x_url'><p>Get url of gt3x sample file</p></a></li>
<li><a href='#is_gt3x'><p>Check if files are .gt3x files</p></a></li>
<li><a href='#list_gt3x'><p>List full paths to all gt3x files in a directory</p></a></li>
<li><a href='#parse_gt3x_info'><p>Parse GT3X info.txt file</p></a></li>
<li><a href='#parseActivityBin'><p>Parse activity samples from a NHANES-GT3X file</p></a></li>
<li><a href='#parseGT3X'><p>Parse activity samples from a GT3X file</p></a></li>
<li><a href='#parseLuxBin'><p>Parse activity samples from a GT3X file</p></a></li>
<li><a href='#print.activity_df'><p>Print the contents of the activity data</p></a></li>
<li><a href='#print.gt3x_info'><p>Print the contents of the info.txt file in a gt3x folder</p></a></li>
<li><a href='#read.gt3x'><p>Read GT3X</p></a></li>
<li><a href='#ticks2datetime'><p>Convert NET ticks to <code>POSIXct</code> datetime</p></a></li>
<li><a href='#unzip_single_gt3x'><p>Unzip a single gt3x file</p></a></li>
<li><a href='#unzip.gt3x'><p>Unzip gt3x files</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Parse 'ActiGraph' 'GT3X'/'GT3X+' 'Accelerometer' Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Implements a high performance C++ parser 
    for 'ActiGraph' 'GT3X'/'GT3X+' data format (with extension '.gt3x') 
    for 'accelerometer' samples. Activity samples can be easily read into a
    matrix or data.frame.  This allows for storing the raw 'accelerometer' 
    samples in the original binary format to reserve space.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://joinup.ec.europa.eu/software/page/eupl">EUPL</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp, utils, R.utils, tools</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 2.1.0), data.table, zoo,
readr, lubridate, zip</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-06-30 07:13:11 UTC; tuomo</td>
</tr>
<tr>
<td>Author:</td>
<td>Tuomo Nieminen [aut, cre],
  John Muschelli <a href="https://orcid.org/0000-0001-6469-1750"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Patrick Bos <a href="https://orcid.org/0000-0002-6033-960X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Vincent van Hees [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Tuomo Nieminen &lt;tuomo.a.nieminen@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-06-30 07:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='as.data.frame.activity'>Convert an activity matrix to a data.frame</h2><span id='topic+as.data.frame.activity'></span>

<h3>Description</h3>

<p>Convert an activity matrix to a data.frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'activity'
as.data.frame(x, ..., verbose = FALSE, add_light = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.data.frame.activity_+3A_x">x</code></td>
<td>
<p>Object of class 'activity' (returned by read.gt3x)</p>
</td></tr>
<tr><td><code id="as.data.frame.activity_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
<tr><td><code id="as.data.frame.activity_+3A_verbose">verbose</code></td>
<td>
<p>print diagnostic messages</p>
</td></tr>
<tr><td><code id="as.data.frame.activity_+3A_add_light">add_light</code></td>
<td>
<p>add light data to the <code>data.frame</code> if data exists in the
GT3X</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>activity_df</code> which is also a data.frame with
the following attributes (and more)
</p>

<ul>
<li> <p><code>subject_name</code> : Subject name from info file
</p>
</li>
<li> <p><code>time_zone</code> : Time zone from info file
</p>
</li>
<li> <p><code>missingness</code> : Data frame with timestamps and the number of missing values associated.
</p>
</li></ul>



<h3>See Also</h3>

<p>Other gt3x-parsers: 
<code><a href="#topic+parse_gt3x_info">parse_gt3x_info</a>()</code>,
<code><a href="#topic+print.gt3x_info">print.gt3x_info</a>()</code>,
<code><a href="#topic+read.gt3x">read.gt3x</a>()</code>
</p>

<hr>
<h2 id='get_n_samples'>Calculate the expected activity sample size from start time
and last sample time in the info.txt of a gt3x directory</h2><span id='topic+get_n_samples'></span>

<h3>Description</h3>

<p>Calculate the expected activity sample size from start time
and last sample time in the info.txt of a gt3x directory
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_n_samples(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_n_samples_+3A_x">x</code></td>
<td>
<p>info out from <code><a href="#topic+parse_gt3x_info">parse_gt3x_info</a></code></p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other gt3x-utils: 
<code><a href="#topic+is_gt3x">is_gt3x</a>()</code>,
<code><a href="#topic+ticks2datetime">ticks2datetime</a>()</code>
</p>

<hr>
<h2 id='gt3x_datapath'>Path to read.gt3x package sample data</h2><span id='topic+gt3x_datapath'></span><span id='topic+gt3x_filename'></span>

<h3>Description</h3>

<p>Path to read.gt3x package sample data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gt3x_datapath(index = NULL, verbose = TRUE)

gt3x_filename(index = NULL, zipped = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gt3x_datapath_+3A_index">index</code></td>
<td>
<p>Integer. The index of a sample file to retrieve.
If NULL (default) the path to the directory
including the sample files will be returned.</p>
</td></tr>
<tr><td><code id="gt3x_datapath_+3A_verbose">verbose</code></td>
<td>
<p>print diagnostic messages</p>
</td></tr>
<tr><td><code id="gt3x_datapath_+3A_zipped">zipped</code></td>
<td>
<p>do the files have a <code>.zip</code> extension</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector of files
</p>


<h3>See Also</h3>

<p>Other file manipulations: 
<code><a href="#topic+is_gt3x">is_gt3x</a>()</code>,
<code><a href="#topic+list_gt3x">list_gt3x</a>()</code>,
<code><a href="#topic+unzip.gt3x">unzip.gt3x</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dir &lt;- gt3x_datapath()
gt3x_filename &lt;- gt3x_datapath(1)
stopifnot(!is.na(gt3x_datapath(2)))

## End(Not run)

testthat::expect_error(gt3x_filename(100))
testthat::expect_error(gt3x_filename(0))
</code></pre>

<hr>
<h2 id='gt3x_dataurl'>Get url of github release</h2><span id='topic+gt3x_dataurl'></span>

<h3>Description</h3>

<p>Get url of github release
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gt3x_dataurl(
  version = "v1.0",
  baseurl = "https://github.com/THLfi/read.gt3x/releases/download"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gt3x_dataurl_+3A_version">version</code></td>
<td>
<p>release version</p>
</td></tr>
<tr><td><code id="gt3x_dataurl_+3A_baseurl">baseurl</code></td>
<td>
<p>URL for GitHub release</p>
</td></tr>
</table>


<h3>Value</h3>

<p>URL to file
</p>


<h3>See Also</h3>

<p>Other sample-data: 
<code><a href="#topic+gt3x_download">gt3x_download</a>()</code>,
<code><a href="#topic+gt3x_url">gt3x_url</a>()</code>
</p>

<hr>
<h2 id='gt3x_download'>Download and unzip a zipped <code>gt3x</code> file</h2><span id='topic+gt3x_download'></span>

<h3>Description</h3>

<p>Download and unzip a zipped <code>gt3x</code> file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gt3x_download(url, exdir, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gt3x_download_+3A_url">url</code></td>
<td>
<p>url of the file to download</p>
</td></tr>
<tr><td><code id="gt3x_download_+3A_exdir">exdir</code></td>
<td>
<p>directory to extract the zip file</p>
</td></tr>
<tr><td><code id="gt3x_download_+3A_verbose">verbose</code></td>
<td>
<p>print diagnostic messages</p>
</td></tr>
</table>


<h3>Value</h3>

<p>file path of <code>exdir</code>
</p>


<h3>See Also</h3>

<p>Other sample-data: 
<code><a href="#topic+gt3x_dataurl">gt3x_dataurl</a>()</code>,
<code><a href="#topic+gt3x_url">gt3x_url</a>()</code>
</p>

<hr>
<h2 id='gt3x_url'>Get url of gt3x sample file</h2><span id='topic+gt3x_url'></span>

<h3>Description</h3>

<p>Get url of gt3x sample file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gt3x_url(index = NULL, filename = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gt3x_url_+3A_index">index</code></td>
<td>
<p>The index of a sample file to retrieve, passed to
<code><a href="#topic+gt3x_filename">gt3x_filename</a></code></p>
</td></tr>
<tr><td><code id="gt3x_url_+3A_filename">filename</code></td>
<td>
<p>file to grab to make url</p>
</td></tr>
</table>


<h3>Value</h3>

<p>file path
</p>


<h3>See Also</h3>

<p>Other sample-data: 
<code><a href="#topic+gt3x_dataurl">gt3x_dataurl</a>()</code>,
<code><a href="#topic+gt3x_download">gt3x_download</a>()</code>
</p>

<hr>
<h2 id='is_gt3x'>Check if files are .gt3x files</h2><span id='topic+is_gt3x'></span><span id='topic+have_log_and_info'></span>

<h3>Description</h3>

<p>Check if files are .gt3x files
</p>
<p>Check if a .gt3x file or unzipped gt3x directory has both log.bin
and info.txt
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_gt3x(path)

have_log_and_info(path, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_gt3x_+3A_path">path</code></td>
<td>
<p>Path(s) to file(s)</p>
</td></tr>
<tr><td><code id="is_gt3x_+3A_verbose">verbose</code></td>
<td>
<p>print diagnostic messages</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Checks if files have a .gt3x file extension
</p>


<h3>Value</h3>

<p>Logical vector of the same length as path, which is TRUE if the
corresponding path is a .gt3x file.
</p>


<h3>See Also</h3>

<p>Other file manipulations: 
<code><a href="#topic+gt3x_datapath">gt3x_datapath</a>()</code>,
<code><a href="#topic+list_gt3x">list_gt3x</a>()</code>,
<code><a href="#topic+unzip.gt3x">unzip.gt3x</a>()</code>
</p>
<p>Other gt3x-utils: 
<code><a href="#topic+get_n_samples">get_n_samples</a>()</code>,
<code><a href="#topic+ticks2datetime">ticks2datetime</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
is_gt3x("test.gt3x") # TRUE
is_gt3x("test") # FALSE
is_gt3x(NULL)

have_log_and_info(tempfile(), verbose = TRUE)
</code></pre>

<hr>
<h2 id='list_gt3x'>List full paths to all gt3x files in a directory</h2><span id='topic+list_gt3x'></span>

<h3>Description</h3>

<p>List full paths to all gt3x files in a directory
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_gt3x(path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="list_gt3x_+3A_path">path</code></td>
<td>
<p>Path(s) to file(s)</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other file manipulations: 
<code><a href="#topic+gt3x_datapath">gt3x_datapath</a>()</code>,
<code><a href="#topic+is_gt3x">is_gt3x</a>()</code>,
<code><a href="#topic+unzip.gt3x">unzip.gt3x</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path &lt;-
  system.file(
    "extdata",
    package = "read.gt3x")
list_gt3x(path)
## Not run: 
list_gt3x(gt3x_datapath())

## End(Not run)
</code></pre>

<hr>
<h2 id='parse_gt3x_info'>Parse GT3X info.txt file</h2><span id='topic+parse_gt3x_info'></span><span id='topic+extract_gt3x_info'></span>

<h3>Description</h3>

<p>Parse GT3X info.txt file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_gt3x_info(path, tz = "GMT")

extract_gt3x_info(path, tz = "GMT")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parse_gt3x_info_+3A_path">path</code></td>
<td>
<p>Path to a .gt3x file or an unzipped gt3x directory</p>
</td></tr>
<tr><td><code id="parse_gt3x_info_+3A_tz">tz</code></td>
<td>
<p>timezone, passed to <code><a href="#topic+ticks2datetime">ticks2datetime</a></code></p>
</td></tr>
</table>


<h3>Note</h3>

<p>The input for <code>parse_gt3x_info</code> is a <code>gt3x</code> file, but
the <code>path</code> for <code>extract_gt3x_info</code> is the <code>info.txt</code> file,
which can also pass in a connection
</p>


<h3>See Also</h3>

<p>Other gt3x-parsers: 
<code><a href="#topic+as.data.frame.activity">as.data.frame.activity</a>()</code>,
<code><a href="#topic+print.gt3x_info">print.gt3x_info</a>()</code>,
<code><a href="#topic+read.gt3x">read.gt3x</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gt3xfile &lt;-
  system.file(
    "extdata", "TAS1H30182785_2019-09-17.gt3x",
    package = "read.gt3x")
parse_gt3x_info(gt3xfile)

## Not run: 
gt3xfile &lt;- gt3x_datapath(1)
parse_gt3x_info(gt3xfile)

## End(Not run)

</code></pre>

<hr>
<h2 id='parseActivityBin'>Parse activity samples from a NHANES-GT3X file</h2><span id='topic+parseActivityBin'></span>

<h3>Description</h3>

<p>Parse activity samples from a NHANES-GT3X file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parseActivityBin(
  filename,
  max_samples,
  scale_factor,
  sample_rate,
  verbose = FALSE,
  debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parseActivityBin_+3A_filename">filename</code></td>
<td>
<p>path to a activity.bin file inside the unzipped gt3x
folder, which contains the activity samples</p>
</td></tr>
<tr><td><code id="parseActivityBin_+3A_max_samples">max_samples</code></td>
<td>
<p>Maximum number of rows to parse.
The returned matrix will always contain this number of rows, having zeroes if
not data is found.</p>
</td></tr>
<tr><td><code id="parseActivityBin_+3A_scale_factor">scale_factor</code></td>
<td>
<p>Scale factor for the activity samples.</p>
</td></tr>
<tr><td><code id="parseActivityBin_+3A_sample_rate">sample_rate</code></td>
<td>
<p>sampling rate for activity samples.</p>
</td></tr>
<tr><td><code id="parseActivityBin_+3A_verbose">verbose</code></td>
<td>
<p>Print the parameters from the activity.bin file and other messages?</p>
</td></tr>
<tr><td><code id="parseActivityBin_+3A_debug">debug</code></td>
<td>
<p>Print information for every activity second</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a matrix with max_samples rows and 3 columns, where the first 3
columns are the acceleration samples and
the last column is timestamps in seconds (including hundredth of seconds)
starting from 00:00:00 1970-01-01 UTC (UNIX time)
</p>

<hr>
<h2 id='parseGT3X'>Parse activity samples from a GT3X file</h2><span id='topic+parseGT3X'></span>

<h3>Description</h3>

<p>Parse activity samples from a GT3X file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parseGT3X(
  filename,
  max_samples,
  scale_factor,
  sample_rate,
  start_time,
  batch_begin = 0L,
  batch_end = 0L,
  verbose = FALSE,
  debug = FALSE,
  impute_zeroes = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parseGT3X_+3A_filename">filename</code></td>
<td>
<p>(char*) path to a log.bin file inside the unzipped gt3x folder, which contains the activity samples</p>
</td></tr>
<tr><td><code id="parseGT3X_+3A_max_samples">max_samples</code></td>
<td>
<p>Maximum number of rows to parse. The returned matrix will always contain this number of rows, having zeroes if
not data is found.</p>
</td></tr>
<tr><td><code id="parseGT3X_+3A_scale_factor">scale_factor</code></td>
<td>
<p>Scale factor for the activity samples.</p>
</td></tr>
<tr><td><code id="parseGT3X_+3A_sample_rate">sample_rate</code></td>
<td>
<p>sampling rate for activity samples.</p>
</td></tr>
<tr><td><code id="parseGT3X_+3A_start_time">start_time</code></td>
<td>
<p>starting time of the sample recording.</p>
</td></tr>
<tr><td><code id="parseGT3X_+3A_batch_begin">batch_begin</code></td>
<td>
<p>first second in time relative to start of raw non-imputed recording to include in this batch</p>
</td></tr>
<tr><td><code id="parseGT3X_+3A_batch_end">batch_end</code></td>
<td>
<p>last second in time relative to start of raw non-imputed recording to include in this batch</p>
</td></tr>
<tr><td><code id="parseGT3X_+3A_verbose">verbose</code></td>
<td>
<p>Print the parameters from the log.bin file and other messages?</p>
</td></tr>
<tr><td><code id="parseGT3X_+3A_debug">debug</code></td>
<td>
<p>Print information for every activity second</p>
</td></tr>
<tr><td><code id="parseGT3X_+3A_impute_zeroes">impute_zeroes</code></td>
<td>
<p>Impute zeros in case there are missingness?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a matrix with max_samples rows and 3 columns with the acceleration samples.
The matrix has attributes
&quot;time_index&quot;, &quot;missingness&quot;, &quot;start_time_log&quot;, &quot;sample_rate&quot;, &quot;impute_zeroes&quot;.
</p>

<hr>
<h2 id='parseLuxBin'>Parse activity samples from a GT3X file</h2><span id='topic+parseLuxBin'></span>

<h3>Description</h3>

<p>Parse activity samples from a GT3X file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parseLuxBin(filename, max_samples, scale_factor, max_value, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parseLuxBin_+3A_filename">filename</code></td>
<td>
<p>(char*) path to a log.bin file inside the unzipped gt3x folder, which contains the activity samples</p>
</td></tr>
<tr><td><code id="parseLuxBin_+3A_max_samples">max_samples</code></td>
<td>
<p>Maximum number of rows to parse. The returned matrix will always contain this number of rows, having zeroes if
not data is found.</p>
</td></tr>
<tr><td><code id="parseLuxBin_+3A_scale_factor">scale_factor</code></td>
<td>
<p>Scale factor for the activity samples.</p>
</td></tr>
<tr><td><code id="parseLuxBin_+3A_max_value">max_value</code></td>
<td>
<p>Maximum value to truncate</p>
</td></tr>
<tr><td><code id="parseLuxBin_+3A_verbose">verbose</code></td>
<td>
<p>Print the parameters from the log.bin file and other messages?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a vector with max_samples elements
</p>

<hr>
<h2 id='print.activity_df'>Print the contents of the activity data</h2><span id='topic+print.activity_df'></span><span id='topic+head.activity_df'></span><span id='topic+print.activity'></span><span id='topic+head.activity'></span>

<h3>Description</h3>

<p>Print the contents of the activity data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'activity_df'
print(x, ...)

## S3 method for class 'activity_df'
head(x, ...)

## S3 method for class 'activity'
print(x, ...)

## S3 method for class 'activity'
head(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.activity_df_+3A_x">x</code></td>
<td>
<p>gt3x_info object returned by parse_gt3x_info()</p>
</td></tr>
<tr><td><code id="print.activity_df_+3A_...">...</code></td>
<td>
<p>additional arguments passed to <code><a href="utils.html#topic+head">head</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='print.gt3x_info'>Print the contents of the info.txt file in a gt3x folder</h2><span id='topic+print.gt3x_info'></span>

<h3>Description</h3>

<p>Print the contents of the info.txt file in a gt3x folder
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gt3x_info'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.gt3x_info_+3A_x">x</code></td>
<td>
<p>gt3x_info object returned by parse_gt3x_info()</p>
</td></tr>
<tr><td><code id="print.gt3x_info_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other gt3x-parsers: 
<code><a href="#topic+as.data.frame.activity">as.data.frame.activity</a>()</code>,
<code><a href="#topic+parse_gt3x_info">parse_gt3x_info</a>()</code>,
<code><a href="#topic+read.gt3x">read.gt3x</a>()</code>
</p>

<hr>
<h2 id='read.gt3x'>Read GT3X</h2><span id='topic+read.gt3x'></span>

<h3>Description</h3>

<p>Read activity samples from a GT3X file as a matrix.
Please note that all timestamps are in local time (of the device)
even though they are represented as <code>POSIXct</code> with GMT timezone.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.gt3x(
  path,
  verbose = FALSE,
  asDataFrame = FALSE,
  imputeZeroes = FALSE,
  flag_idle_sleep = FALSE,
  cleanup = FALSE,
  ...,
  add_light = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read.gt3x_+3A_path">path</code></td>
<td>
<p>Path to gt3x folder</p>
</td></tr>
<tr><td><code id="read.gt3x_+3A_verbose">verbose</code></td>
<td>
<p>print diagnostic messages</p>
</td></tr>
<tr><td><code id="read.gt3x_+3A_asdataframe">asDataFrame</code></td>
<td>
<p>convert to an <code>activity_df</code>, see
<code>as.data.frame.activity</code></p>
</td></tr>
<tr><td><code id="read.gt3x_+3A_imputezeroes">imputeZeroes</code></td>
<td>
<p>Impute zeros in case there are missingness?
Default is FALSE, in which case
the time series will be incomplete in case there is missingness.</p>
</td></tr>
<tr><td><code id="read.gt3x_+3A_flag_idle_sleep">flag_idle_sleep</code></td>
<td>
<p>flag idle sleep mode.  If <code>imputeZeroes = TRUE</code>,
this finds where all 3 axes are zero.</p>
</td></tr>
<tr><td><code id="read.gt3x_+3A_cleanup">cleanup</code></td>
<td>
<p>should any unzipped files be deleted?</p>
</td></tr>
<tr><td><code id="read.gt3x_+3A_...">...</code></td>
<td>
<p>additional arguments to pass to <code>parseGT3X</code> C++ code, e.g. batch-loading options as now documented in vignette &quot;Batch loading a gt3x file&quot;</p>
</td></tr>
<tr><td><code id="read.gt3x_+3A_add_light">add_light</code></td>
<td>
<p>add light data to the <code>data.frame</code> if data exists in the
GT3X</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric matrix with 3 columns (X, Y, Z) and the following
attributes:
</p>

<ul>
<li> <p><code>start_time</code> :  Start time from info file in <code>POSIXct</code> format.
</p>
</li>
<li> <p><code>subject_name</code> : Subject name from info file
</p>
</li>
<li> <p><code>time_zone</code> : Time zone from info file
</p>
</li>
<li> <p><code>missingness</code> : Named integer vector. Names are <code>POSIXct</code>
timestamps and values are the number of missing values.
</p>
</li></ul>



<h3>Note</h3>

<p>The timestamps in the .gt3x data format are saved in .NET format, which is
nanoseconds in local time since 0001-01-01.
This is a bit tricky to parse into an R datetime format. DateTimes are
therefore represented as <code>POSIXct</code> format with the
'GMT' timezone attribute, which is false; the datetime actually
represents local time.
</p>


<h3>See Also</h3>

<p>Other gt3x-parsers: 
<code><a href="#topic+as.data.frame.activity">as.data.frame.activity</a>()</code>,
<code><a href="#topic+parse_gt3x_info">parse_gt3x_info</a>()</code>,
<code><a href="#topic+print.gt3x_info">print.gt3x_info</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
gt3xfile &lt;-
  system.file(
    "extdata", "TAS1H30182785_2019-09-17.gt3x",
    package = "read.gt3x")
is_gt3x(gt3xfile)
have_log_and_info(gt3xfile, verbose = TRUE)

x &lt;- read.gt3x(gt3xfile, imputeZeroes = FALSE, asDataFrame = FALSE,
verbose = TRUE)
attr(x, "features")
df2 &lt;- as.data.frame(x, verbose = TRUE)
attr(df2, "features")
head(df2)
rm(x); gc(); gc()
rm(df2); gc()

x &lt;- read.gt3x(gt3xfile, imputeZeroes = TRUE, asDataFrame = TRUE,
verbose = TRUE)

## Not run: 
# first unzip, then read
datadir &lt;- gt3x_datapath()
gt3xfolders &lt;- unzip.gt3x(datadir)
gt3xfile &lt;- gt3xfolders[2]
# temporary unzip, read, convert to a data frame
gt3xfile &lt;- gt3x_datapath(1)
memory.limit()
df &lt;- read.gt3x(gt3xfile, asDataFrame = FALSE, verbose = 2)
head(df)
rm(df); gc(); gc()


df &lt;- read.gt3x(gt3xfile, asDataFrame = TRUE, verbose = 2)
head(df)

## End(Not run)

## Not run: 



url &lt;- paste0("https://github.com/THLfi/read.gt3x/",
"files/", "3522749/", "GT3X%2B.01.day.gt3x.zip")
destfile &lt;- tempfile(fileext = ".zip")
dl &lt;- download.file(url, destfile = destfile, mode = "wb")
gt3x_file &lt;- unzip(destfile, exdir = tempdir())
gt3x_file &lt;- gt3x_file[!grepl("__MACOSX", gt3x_file)]
path &lt;- gt3x_file

res &lt;- read.gt3x(path)

gz &lt;- R.utils::gzip(path, remove = FALSE, overwrite = FALSE)
df2 &lt;- read.gt3x(gz, asDataFrame = FALSE, verbose = 2)
head(df2)

rm(df2); gc(); gc()


## End(Not run)
</code></pre>

<hr>
<h2 id='ticks2datetime'>Convert NET ticks to <code>POSIXct</code> datetime</h2><span id='topic+ticks2datetime'></span><span id='topic+datetime2ticks'></span>

<h3>Description</h3>

<p>Convert NET ticks to <code>POSIXct</code> datetime
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ticks2datetime(ticks, tz = "GMT")

datetime2ticks(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ticks2datetime_+3A_ticks">ticks</code></td>
<td>
<p>values in NET ticks format</p>
</td></tr>
<tr><td><code id="ticks2datetime_+3A_tz">tz</code></td>
<td>
<p>timezone, passed to <code><a href="base.html#topic+as.POSIXct">as.POSIXct</a></code></p>
</td></tr>
<tr><td><code id="ticks2datetime_+3A_x">x</code></td>
<td>
<p>values in date-time format coerced to ticks</p>
</td></tr>
</table>


<h3>Details</h3>

<p>reference:
<a href="https://stackoverflow.com/questions/35240874/r-net-ticks-to-timestamp-in-r">https://stackoverflow.com/questions/35240874/r-net-ticks-to-timestamp-in-r</a>
</p>


<h3>See Also</h3>

<p>Other gt3x-utils: 
<code><a href="#topic+get_n_samples">get_n_samples</a>()</code>,
<code><a href="#topic+is_gt3x">is_gt3x</a>()</code>
</p>
<p>Other gt3x-utils: 
<code><a href="#topic+get_n_samples">get_n_samples</a>()</code>,
<code><a href="#topic+is_gt3x">is_gt3x</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mystr = "599633592352500000"
x = read.gt3x::ticks2datetime(mystr)
x
out = read.gt3x::datetime2ticks(as.POSIXct("1901-03-02 08:40:35.25", tz = "UTC"))
out = as.character(out)
out
stopifnot(out == mystr)
read.gt3x::datetime2ticks(x = as.POSIXct(Sys.time(), tz = "EST"))
</code></pre>

<hr>
<h2 id='unzip_single_gt3x'>Unzip a single gt3x file</h2><span id='topic+unzip_single_gt3x'></span>

<h3>Description</h3>

<p>A .gt3x file is a zipped archive with two files: log.bin and info.txt.
This function unzips the contents of the archive to a single folder.
This is a helper for unzip.gt3x()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unzip_single_gt3x(
  path,
  dirname = basename(gsub(".gt3x$| ", "", path)),
  location = tempdir(),
  files = c("info.txt", "log.bin"),
  remove_original = FALSE,
  check_structure = TRUE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unzip_single_gt3x_+3A_path">path</code></td>
<td>
<p>Path to a .gt3x file</p>
</td></tr>
<tr><td><code id="unzip_single_gt3x_+3A_dirname">dirname</code></td>
<td>
<p>The name of the resulting directory where the content of
<code>path</code> are extracted.
Default is the name of the input file, sans the .gt3x extension.</p>
</td></tr>
<tr><td><code id="unzip_single_gt3x_+3A_location">location</code></td>
<td>
<p>A path to an output directory. Default is a <code>tempdir</code>.</p>
</td></tr>
<tr><td><code id="unzip_single_gt3x_+3A_files">files</code></td>
<td>
<p>The names of files to extract. Default is <code>info.txt</code> and <code>log.bin</code></p>
</td></tr>
<tr><td><code id="unzip_single_gt3x_+3A_remove_original">remove_original</code></td>
<td>
<p>Remove the zip file after unzipping?</p>
</td></tr>
<tr><td><code id="unzip_single_gt3x_+3A_check_structure">check_structure</code></td>
<td>
<p>check to see if the structure is right for the file</p>
</td></tr>
<tr><td><code id="unzip_single_gt3x_+3A_verbose">verbose</code></td>
<td>
<p>print diagnostic messages</p>
</td></tr>
</table>

<hr>
<h2 id='unzip.gt3x'>Unzip gt3x files</h2><span id='topic+unzip.gt3x'></span>

<h3>Description</h3>

<p>unzip.gt3x() makes it convenient to unzip multiple .gt3x files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unzip.gt3x(path, verbose = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unzip.gt3x_+3A_path">path</code></td>
<td>
<p>One of the following: (1) A path to a directory with
.gt3x files in which case they are all unzipped, or
(2) A character vector of direct paths to .gt3x files.</p>
</td></tr>
<tr><td><code id="unzip.gt3x_+3A_verbose">verbose</code></td>
<td>
<p>print diagnostic messages</p>
</td></tr>
<tr><td><code id="unzip.gt3x_+3A_...">...</code></td>
<td>
<p>arguments to pass to <code><a href="#topic+unzip_single_gt3x">unzip_single_gt3x</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>A .gt3x file is a zipped directory with two files: log.bin and info.txt.
This function simply unzips the contents of the directories.
</p>


<h3>Value</h3>

<p>Returns a vector of paths to unzipped gt3x folders.
</p>


<h3>See Also</h3>

<p>Other file manipulations: 
<code><a href="#topic+gt3x_datapath">gt3x_datapath</a>()</code>,
<code><a href="#topic+is_gt3x">is_gt3x</a>()</code>,
<code><a href="#topic+list_gt3x">list_gt3x</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
gt3xfile &lt;-
  system.file(
    "extdata", "TAS1H30182785_2019-09-17.gt3x",
    package = "read.gt3x")
gt3xdirs &lt;- unzip.gt3x(gt3xfile)
## Not run: 
# unzip a single .gt3x file
path &lt;- gt3x_datapath(1)
gt3xdir &lt;- unzip.gt3x(path)

# unzip multiple .gt3x files
dir &lt;- gt3x_datapath()
gt3xdirs &lt;- unzip.gt3x(dir)

## End(Not run)
tfile = tempfile()
testthat::expect_error(unzip.gt3x(c(dir, tfile)))
testthat::expect_error(unzip.gt3x(c("", "")))

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
