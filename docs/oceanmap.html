<!DOCTYPE html><html><head><title>Help for package oceanmap</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {oceanmap}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#.get.worldmap'>
<p>World Map</p></a></li>
<li><a href='#add.region'>
<p>adding a region to the region_definitions file</p></a></li>
<li><a href='#area_extrac'>
<p>Extracts a pre-defined region from <code>'.gz'</code>-file and saves subset as a new <code>'.gz'</code>-file</p></a></li>
<li><a href='#bindate2Title'>
<p>returns formatted date string for v-plot titles</p></a></li>
<li><a href='#check_gzfiles'>
<p>Returns summary on <code>'.gz'</code>-file types</p></a></li>
<li><a href='#check_ts'>
<p>checks if daily <code>'.gz'</code>-file time series is complete</p></a></li>
<li><a href='#clim_plot'>
<p>plots <code>'.gz'</code>-file climatologies</p></a></li>
<li><a href='#close_fig'>
<p>function to close current graphic device</p></a></li>
<li><a href='#cmap'>
<p>color maps</p></a></li>
<li><a href='#cust.colorbar'>
<p>defines colorbar settings for <code>v.raster</code> and <code>add.region</code>-calls.</p></a></li>
<li><a href='#delete.region'>
<p>deletes a region from the region_definitions-definition file</p></a></li>
<li><a href='#digits'>
<p>returns recognized number of digits for colorbar ticklabels</p></a></li>
<li><a href='#empty.plot'>
<p>Creates an empty scatter plot</p></a></li>
<li><a href='#figure'>
<p>generate (and save) graphic devices with flexible fileformat selection</p></a></li>
<li><a href='#get.avg.bathy'>
<p>returns the average value of circles with specified coordinates and a defined radius</p></a></li>
<li><a href='#get.bathy'>
<p>Returns bathymetric data from the NOAA ETOPO1 database as RasterLayer, given coordinate bounds and resolution.</p></a></li>
<li><a href='#get.cb.pos'>
<p>Returns additional colorbar placement information</p></a></li>
<li><a href='#ggplotmaply'>
<p>Converts a ggplot2 object from ggplotmap() to plotly</p></a></li>
<li><a href='#internal.datasets'>
<p>internal datasets</p></a></li>
<li><a href='#matrix2raster'>
<p>Converts a matrix to a RasterLayer or arrays to a RasterStack-object</p></a></li>
<li><a href='#name_join'>
<p>create '<code>'.gz'</code>-filenames from a list or dataframe</p></a></li>
<li><a href='#name_split'>
<p>Returns a summary data frame of <code>'.gz'</code> encoded oceanography files by splitting their name</p></a></li>
<li><a href='#nc2raster'>
<p>Convert Raster layer to a matrix or array</p></a></li>
<li><a href='#nc2time'>
<p>reads and converts the time variable of a netcdf-file ('.nc'-file) or <code>ncdf4</code>-object as <code>as.Date</code>-object</p></a></li>
<li><a href='#oceanmap'>
<p>oceanmap - plot tools for 2D oceanographic data</p></a></li>
<li><a href='#param_convert'>
<p>converts byte data to absolte values or vise versa (<code>param_unconvert</code>)</p></a></li>
<li><a href='#parameter_definitions'>
<p>parameter definitions dataframe</p></a></li>
<li><a href='#plotmap'>
<p>plots landmask of a defined region</p></a></li>
<li><a href='#raster2matrix'>
<p>Convert Raster layer to a matrix or array</p></a></li>
<li><a href='#readbin'>
<p>Returns <code>'.gz'</code>-file as matrix or raster-object</p></a></li>
<li><a href='#region_definitions'>
<p>region definitions dataframe</p></a></li>
<li><a href='#region2SpatialPolygon'>
<p>creates polygon from raster extent</p></a></li>
<li><a href='#regions'>
<p>Returns two-row summary table of a specified region.</p></a></li>
<li><a href='#set.colorbar'>
<p>Adds colorbar to an extisting plot device</p></a></li>
<li><a href='#SpatialCircle'>
<p>Creates a circle of radius r around a specified point.</p></a></li>
<li><a href='#v'>
<p>Plotting spatial data</p></a></li>
<li><a href='#v-class'><p>v-classes</p></a></li>
<li><a href='#writebin'>
<p>Saves geographic data as byte file (<code>'.gz'</code>)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>A Plotting Toolbox for 2D Oceanographic Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.6</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-11-10</td>
</tr>
<tr>
<td>Author:</td>
<td>Robert K. Bauer</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Robert K. Bauer &lt;rkbauer@hawaii.edu&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0), maps, mapdata, raster, extrafont, reshape2</td>
</tr>
<tr>
<td>Imports:</td>
<td>abind, fields, plotrix, methods, utils, grDevices, sp, ncdf4,
stats, lubridate, ggplot2, ggedit, sf(&ge; 0.9-7), plotly</td>
</tr>
<tr>
<td>Description:</td>
<td>Plotting toolbox for 2D oceanographic data (satellite data, sea surface temperature, chlorophyll, ocean fronts &amp; bathymetry). Recognized classes and formats include netcdf, Raster, '.nc' and '.gz' files.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-10 10:50:42 UTC; work</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-10 12:00:02 UTC</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>ImageMagick</td>
</tr>
</table>
<hr>
<h2 id='.get.worldmap'>
World Map
</h2><span id='topic+.get.worldmap'></span>

<h3>Description</h3>

<p>Creates a world map database that allows longitude ranges between -180 and 360 degrees, and thus from the Pacific to the Atlantic and vise versa. It is based on the <a href="mapdata.html#topic+worldHires">worldHires</a> database (which itself is based on CIA World Data Bank II data and contains approximately 2 million points representing the world coastlines and national boundaries), from which polygon irritations of the Antarctic were also corrected.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.get.worldmap(resolution)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".get.worldmap_+3A_resolution">resolution</code></td>
<td>

<p>number that specifies the resolution with which to draw the map. Resolution 0 is the full resolution of the database [default]. Otherwise, just before polylines are plotted they are thinned: roughly speaking, successive points on the polyline that are within resolution device pixels of one another are collapsed to a single point (see the Reference for further details). Thinning is not performed if plot = FALSE or when polygons are drawn (fill = TRUE or database is a list of polygons).
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of class &quot;map&quot; with longitude (x) and latitude (y) positions of coastlines and state boundaries  (different coastline or booundary elements are seperated by NA), single polygon names are provided by a names vector.
</p>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

 
<p><a href="mapdata.html#topic+worldHires">worldHires</a><br />
<a href="https://www.evl.uic.edu/pape/data/WDB/">https://www.evl.uic.edu/pape/data/WDB/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>worldmap &lt;- oceanmap:::.get.worldmap(worldmap)
str(worldmap)

## wordlmap usage in plotmap, with different center-options
# par(mfrow=c(3,1))
# plotmap(lon=c(80, -120), lat=c(-50, 10), main= "map from East to West")
# plotmap(lon=c(-120, 80), lat=c(-50, 10), main= "map from West to East")
# plotmap('tp')

</code></pre>

<hr>
<h2 id='add.region'>
adding a region to the <a href="#topic+region_definitions">region_definitions</a> file</h2><span id='topic+add.region'></span>

<h3>Description</h3>

<p>adding a region to the <a href="#topic+region_definitions">region_definitions</a>-file, taking or restoring a backup of region definitions. The basic idea is to provide a region-keyword that is used to access the region-information in later related function-calls (see: <a href="#topic+v">v</a> and <a href="#topic+plotmap">plotmap</a>, <a href="#topic+regions">regions</a>). Information consists of a region-keyword, -longname, its spatial extent (longitudes and latitudes), grid resolution, as well as default colorbar position and figure size. 
</p>
<p>The required information can be provided by an interactive <b>session</b> (widget) that leads step by step through the region definition (is set <code>default</code>), in parts by an <a href="raster.html#topic+extent">extent</a>-object with the missing information then completed by the <b>session</b> or by a one-row data frame that holds the entire information (see: <a href="#topic+region_definitions">region_definitions</a>). 
</p>
<p><b>ATTENTION!</b> When reinstalling or updating the oceanmap package, previous region definitions are getting lost! It is therefore highly recommanded to take and restore own backups (see: <code>backup</code> and <code>restore</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add.region(add, add.px, cbx, cby, figdim, lib.folder, 
           widget=T, backup=F, backup.folder='.', backup.name, restore=F,backup.regions)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add.region_+3A_add">add</code></td>
<td>

<p><a href="raster.html#topic+extent">extent</a>-,raster-object or dataset containing all required region definition entries (<code>label</code>, <code>name</code>, <code>latn</code>, <code>lats</code>, <code>lonw</code>, <code>lone</code>, <code>ncol</code>, <code>nrow</code>, <code>px</code>, <code>cbx1</code>, <code>cbx2</code>, <code>cby1</code>, <code>cby2</code>, <code>figxdim</code>, <code>figydim</code> and <code>grid.res</code>). Ignored when <code>add.px</code> is supplied.
</p>
<p>The values <code>latn</code>, <code>lats</code>, <code>lonw</code>, <code>lone</code> define the regions extent, <code>cbx1</code>, <code>cbx2</code>, <code>cby1</code> and <code>cby2</code> define the position of the colorbar,  <code>gradient</code> the orientation of the colorbar (x for horizontal, y for vertical), <code>oticks</code> the margin where to put the colorbar ticks relative to the colorbar rectangle (<code>'l'</code> left, <code>'r'</code> right and <code>'b'</code> for bottom; <code>figxdim</code> and <code>figydim</code> set the default window size of <code>'.gz'</code>-file figures and <code>grid.res</code> the default grid resolution.
</p>
</td></tr>
<tr><td><code id="add.region_+3A_add.px">add.px</code></td>
<td>

<p>dataframe or list containing region data needed to read gz-compressed <code>'.gz'</code>-files. Required entries include '<code>label</code>' to identify the region, '<code>ncol</code>' and '<code>nrow</code>', to define the number of columns and rows of the 'gz'-file, respectively. These values are automatically set if missing when writing gz-compressed <code>'.gz'</code>-files (see: <a href="#topic+writebin">writebin</a>).
</p>
</td></tr>
<tr><td><code id="add.region_+3A_cbx">cbx</code></td>
<td>

<p>the horizontal limits (x1, x2) of the colorbar. If missing, the user will be asked for manual colorbar placement.
</p>
</td></tr>
<tr><td><code id="add.region_+3A_cby">cby</code></td>
<td>

<p>the vertical limits (y1, y2) of the colorbar. If missing, the user will be asked for manual colorbar placement.
</p>
</td></tr>
<tr><td><code id="add.region_+3A_figdim">figdim</code></td>
<td>

<p>numeric vector indicating the <code>width</code> and <code>height</code> of the plot device in inches. If missing and <code>force.figdim.widget</code> is set <code>FALSE</code>, figdim is assigned a default <code>width</code> and <code>height</code> of 7in, otherwise the user will be asked to resize the plot device to set plot dimensions.
</p>
</td></tr>
<tr><td><code id="add.region_+3A_lib.folder">lib.folder</code></td>
<td>

<p>Character string indicating R-library path in which the oceanmap-package is installed.
</p>
</td></tr>
<tr><td><code id="add.region_+3A_widget">widget</code></td>
<td>

<p>whether an interactive session (<b>widget</b>) shall assist the data entry procedure (default is <code>TRUE</code>).
</p>
</td></tr>
<tr><td><code id="add.region_+3A_backup">backup</code></td>
<td>

<p>whether the current region_definitions-file should be backuped in the folder '<code>backup.folder</code> in the file <code>backup.name</code> (default is <code>FALSE</code>). <b>ATTENTION!</b> When reinstalling or updating the oceanmap package, previous region_definitions are getting lost!
</p>
</td></tr>
<tr><td><code id="add.region_+3A_backup.folder">backup.folder</code></td>
<td>

<p>Character string indicating the folder where to store the region_definitions-file backup (default is the current working directory).
</p>
</td></tr>
<tr><td><code id="add.region_+3A_backup.name">backup.name</code></td>
<td>

<p>Character string indicating the filename of the region_definitions-file backup (If <code>restore</code> the default is the original oceanmap-region_definitions file; if <code>backup</code> the default is set to 'region_definitions.bkp.%Y%m%d.rda').
</p>
</td></tr>
<tr><td><code id="add.region_+3A_restore">restore</code></td>
<td>

<p>whether to restore a backup of the region_definitions-file (default is <code>FALSE</code>).
</p>
</td></tr>
<tr><td><code id="add.region_+3A_backup.regions">backup.regions</code></td>
<td>

<p>Vector of region indicators defining which regions should be saved in backup file.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

<p><a href="#topic+delete.region">delete.region</a>, <a href="#topic+region_definitions">region_definitions</a>, <a href="#topic+regions">regions</a>, <a href="#topic+plotmap">plotmap</a>, <a href="#topic+v">v</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Example 1: Add region by supplying a one-row data.frame 
##            that holds the entire required information
# data(region_definitions) # load region_definitions
# lion &lt;- region_definitions[region_definitions$label == 'lion',] # selecting Gulf of Lions region
# lion
# junk &lt;- lion 
# junk$label &lt;- 'junk' # rename region label
# add.region(junk) # add junk region
# data(region_definitions) # reload region_definitions
# region_definitions[,1:9]

## Example 2: Delete region
#delete.region("junk") # delete junk region
#data(region_definitions) # reload region_definitions
#region_definitions[,1:9]

## Example 3: Add region by supplying an extent- or raster-object and running the widget
library(raster)

ext &lt;- extent(0,10,50,60)
plotmap(ext)
#add.region(ext) # extent-object

r &lt;- raster(ext)
#add.region(r) # raster-object

## Example 4: Add region by supplying raster-object, colorbar positions and running the widget
#add.region(r,cbx=c(5,9.5),cby=c(51.7,52.4))

## Example 5: Add region by running the widget
#add.region()

## Example 6: Add region by running the widget
#add.region(add.px=list(label="lion",nrow=10,ncol=10))
#data(region_definitions)
#region_definitions[region_definitions$label =="lion",]

## Example 7: Creating a backup
#add.region(backup=T)
#add.region(backup=T, backup.folder=".",backup.regions=c("lion","medw4"))

## Example 8: Restoring the backup of the original region_definitions file
#add.region(restore=T)
</code></pre>

<hr>
<h2 id='area_extrac'>
Extracts a pre-defined region from <code>'.gz'</code>-file and saves subset as a new <code>'.gz'</code>-file</h2><span id='topic+area_extrac'></span>

<h3>Description</h3>

<p>Extracts a pre-defined region from <code>'.gz'</code>-file and saves subset as a new <code>'.gz'</code>-file (gzip compressed format). Basically it represents a combined call of <a href="#topic+regions">regions</a>, <a href="raster.html#topic+crop">crop</a>, <a href="#topic+raster2matrix">raster2matrix</a>  and <a href="#topic+writebin">writebin</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>area_extrac(obj,area)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="area_extrac_+3A_obj">obj</code></td>
<td>

<p>Character string indicating search criteria for <code>'.gz'</code>-files. 
</p>
</td></tr>
<tr><td><code id="area_extrac_+3A_area">area</code></td>
<td>

<p>Character string identifying the region that should be extracted. <code>area</code> must be a subregion of the original region defined by the <code>'.gz'</code>-file.
See <a href="#topic+region_definitions">region_definitions</a> for area definitions and use <a href="#topic+add.region">add.region</a> to add new regions.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

<p><a href="#topic+readbin">readbin</a>, <a href="#topic+writebin">writebin</a>, <a href="raster.html#topic+crop">crop</a>, <a href="#topic+raster2matrix">raster2matrix</a>, <a href="#topic+param_unconvert">param_unconvert</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example 1: extract, write '.gz'-files, following default plot-procedure
library(raster)

# load sample-'.gz'-file
path &lt;- system.file("test_files", package="oceanmap")
gz.files &lt;- Sys.glob(paste0(path,'/*.gz'))[1] # load sample-'.gz'-files
print(gz.files)
# area_extrac(gz.files[1],area='lion')

# gz &lt;- Sys.glob(path,'/medw4*.gz') # load new-'.gz'-file
# v(gz) # visualize new-'.gz'-file
# system(paste('rm', gz))       
# v(gz.files[1],v_area='lion')
</code></pre>

<hr>
<h2 id='bindate2Title'>
returns formatted date string for v-plot titles
</h2><span id='topic+bindate2Title'></span><span id='topic+bindate2main'></span><span id='topic+bindate2ylab'></span>

<h3>Description</h3>

<p>returns formatted date string for v-plot titles by provided date information (e.g. filename of <code>'.gz'</code>-files, name of raster-layers. <code>bindate2Title</code> is returned by default by <a href="#topic+v">v</a>-calls. <code>bindate2main</code> and <code>bindate2ylab</code> are plotted when <a href="#topic+v">v</a> is called with <code>sidelabels=T</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bindate2Title(timestep, date1, date2=date1)

bindate2main(timestep, date1, date2=date1)

bindate2ylab(timestep, date1, date2=date1)

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bindate2Title_+3A_timestep">timestep</code></td>
<td>

<p>character string, indicating  the range of the time unit in numbers and the time unit (e.g. &quot;1d&quot; for daily data; &quot;7d&quot; or &quot;1w&quot; for weekly data; &quot;1m&quot; for monthly data) 
</p>
</td></tr>
<tr><td><code id="bindate2Title_+3A_date1">date1</code>, <code id="bindate2Title_+3A_date2">date2</code></td>
<td>

<p>character string, indicating the first and last date of the timeframe covered (recognized format is %Y%m%d%H or %Y%m%d). E.g. 20030301 and 20030331 for monthly data (<code>timestep</code> = 1m) of March 2003.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

 <p><a href="#topic+name_split">name_split</a>, <a href="#topic+v">v</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example 1: output of different bindate2???-functions
path &lt;- system.file("test_files", package="oceanmap")
gz.files &lt;- Sys.glob(paste0(path,'/*.gz')) # load sample-'.gz'-files
u &lt;- name_split(gz.files)

print(gz.files[1]) # print filename
print(u[1,]) # print splitted filename
bindate2main(u$timestep[1],u$date1[1],u$date2[1]) # main
bindate2Title(u$timestep[1],u$date1[1],u$date2[1]) # Title
bindate2ylab(u$timestep[1],u$date1[1],u$date2[1]) # ylab


## Example 2: Visualize output for multiple '.gz'-files 
u$option &lt;- '... .'

dev.new(width=9.7,height=7.8,xpos=-1)
empty.plot()
box()
for (i in 1:nrow(u)){
  mtext(name_join(u[i,]),side=1,line=i-10)
  main &lt;- bindate2main(u$timestep[i],u$date1[i],u$date2[i]) # main
  Title &lt;- bindate2Title(u$timestep[i],u$date1[i],u$date2[i]) # Title
  ylab &lt;- bindate2ylab(u$timestep[i],u$date1[i],u$date2[i]) # ylab
  mtext(c(Title,ylab,main),side=1:3,line=c(i,nrow(u)+1-i,nrow(u)+1-i))
  mtext(paste("file",i),side=c(1,1:3),line=c(i-10,i,nrow(u)+1-i,nrow(u)+1-i),adj=0)
}
mtext(c("filename",
        "bindate2Title (default)",
         "bindate2ylab (sidelabels=T)",
         "bindate2main  (sidelabels=T)"),
      side=c(1,1:3),line=c(-11,rep(i+2,3)),font=2)

</code></pre>

<hr>
<h2 id='check_gzfiles'>
Returns summary on <code>'.gz'</code>-file types</h2><span id='topic+check_gzfiles'></span>

<h3>Description</h3>

<p>Returns summary table on <code>'.gz'</code>-file types available in a specified folder. Provided information include <code>region</code> (region covered, as described by the <a href="#topic+region_definitions">region_definitions</a>), <code>sat</code> (satellite source), <code>param</code> (parameter), <code>res</code> (spatial resolution), <code>ts</code> (temporal resolution), <code>filetype</code> (file filetype)</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_gzfiles(sstring="*",folder,filetype=".gz")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_gzfiles_+3A_sstring">sstring</code></td>
<td>

<p>Character string indicating the search criteria for sat files (default is <code>*</code>, including all <code>'.gz'</code>-files). 
</p>
</td></tr>
<tr><td><code id="check_gzfiles_+3A_folder">folder</code></td>
<td>

<p>Character string indicating the folder in which searched files are located (default is current working directory)
</p>
</td></tr>
<tr><td><code id="check_gzfiles_+3A_filetype">filetype</code></td>
<td>

<p>Character string indicating thefile type of sat files  (default is <code>.gz</code>)
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An aggregated data frame, returning <code>'.gz'</code>-file type-information (see description) on available files in a specified folder.
</p>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

<p><a href="#topic+name_split">name_split</a>, <a href="#topic+check_ts">check_ts</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example 1: plot '.gz'-files, following default plot-procedure
path &lt;- system.file("test_files", package="oceanmap")
check_gzfiles(folder=path) # return file summary-table per filetype

## check for missing dates
check_ts('medw4*',folder=path)
check_ts('medw4*',folder=path,output=TRUE)
</code></pre>

<hr>
<h2 id='check_ts'>
checks if daily <code>'.gz'</code>-file time series is complete</h2><span id='topic+check_ts'></span>

<h3>Description</h3>

<p>checks if daily <code>'.gz'</code>-file time series in the present working directory is complete.</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ts(sstring="*.gz",folder,output=F)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_ts_+3A_sstring">sstring</code></td>
<td>

<p>Character string indicating search criteria for gz-files (default is <code>'*.gz'</code>). 
</p>
</td></tr>
<tr><td><code id="check_ts_+3A_folder">folder</code></td>
<td>

<p>Character string indicating the folder in which searched files are located (default is current working directory)
</p>
</td></tr>
<tr><td><code id="check_ts_+3A_output">output</code></td>
<td>

<p>weather the missing dates should be returned as vector (default is <code>F</code>).
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>optional vector of missing dates (see <code>output</code> argument).
</p>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

<p><a href="#topic+name_split">name_split</a>, <a href="#topic+check_gzfiles">check_gzfiles</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example 1: plot '.gz'-files, following default plot-procedure
path &lt;- system.file("test_files", package="oceanmap")
check_gzfiles(folder=path) # return file summary-table per filetype

## check for missing dates
check_ts('medw4*',folder=path)
check_ts('medw4*',folder=path,output=TRUE)
</code></pre>

<hr>
<h2 id='clim_plot'>
plots <code>'.gz'</code>-file climatologies</h2><span id='topic+clim_plot'></span>

<h3>Description</h3>

<p>Creates climatology plots of <code>'.gz'</code>-files. <b>ATTENTION!</b> This function requires an ImageMagick installation, but runs also under Windows operating systems. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clim_plot(obj, folder,plotfolder=".", plotname, question=T, sst.frontcolor='red', 
          chla.frontcolor='blue', sidelabels = F, Ylab = F, axeslabels = T, v_area, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clim_plot_+3A_obj">obj</code></td>
<td>

<p>Character string indicating search criteria for climatology <code>'.gz'</code>-files. 
</p>
</td></tr>
<tr><td><code id="clim_plot_+3A_folder">folder</code></td>
<td>

<p>directory where data files are located (optional).
</p>
</td></tr>
<tr><td><code id="clim_plot_+3A_plotfolder">plotfolder</code></td>
<td>

<p>directory where image should be saved.
</p>
</td></tr>
<tr><td><code id="clim_plot_+3A_plotname">plotname</code></td>
<td>

<p>the name of the output file. If not provided, value will be derived from <code>'.gz'</code>-filenames. 
</p>
</td></tr>
<tr><td><code id="clim_plot_+3A_question">question</code></td>
<td>

<p>whether the user shall be informed about the number of figures to plot before running the procedure (default is <code>TRUE</code>). 
</p>
</td></tr>
<tr><td><code id="clim_plot_+3A_chla.frontcolor">chla.frontcolor</code></td>
<td>

<p>color map to be plotted for chlorophyll fronts (default is blue; obtained from <a href="#topic+cmap">cmap</a>-dataset)
</p>
</td></tr>
<tr><td><code id="clim_plot_+3A_sst.frontcolor">sst.frontcolor</code></td>
<td>

<p>color map to be plotted for sea surface temperature fronts (default is red; obtained from <a href="#topic+cmap">cmap</a>-dataset)
</p>
</td></tr>
<tr><td><code id="clim_plot_+3A_sidelabels">sidelabels</code></td>
<td>

<p>whether an additional y-axis label and title should be added to the plot device (default is <code>FALSE</code>). If <code>TRUE</code>, y-axis label is defined by <code>Ylab</code>, the additional title is derived from the <code>date</code>-information and gives the month information.
</p>
</td></tr>
<tr><td><code id="clim_plot_+3A_ylab">Ylab</code></td>
<td>

<p>an additional title for the y axis (default is date information), only used when <code>sidelabels</code> is set <code>TRUE</code>. Default value is year-information.
</p>
</td></tr>
<tr><td><code id="clim_plot_+3A_axeslabels">axeslabels</code></td>
<td>

<p>whether axeslabels should be shown (default is <code>TRUE</code>, set as 'longitude' and 'latitude')
</p>
</td></tr>
<tr><td><code id="clim_plot_+3A_v_area">v_area</code></td>
<td>

<p>character string identifying the region that should be plotted, or in case of <code>obj == 'bathy'</code>, also a Raster* or Extent object. If missing, region is derived from the <code>'.gz'</code>-filename. 
See <a href="#topic+region_definitions">region_definitions</a> for area definitions and use <a href="#topic+add.region">add.region</a> to add new regions.
</p>
</td></tr>
<tr><td><code id="clim_plot_+3A_...">...</code></td>
<td>

<p>Additional arguments to be passed to <a href="#topic+v">v</a> and <a href="#topic+plotmap">plotmap</a> (e.g. <code>main</code>, <code>sidelabels</code>, <code>Ylab</code>, <code>scale_arrow</code>, <code>minv</code>, <code>maxv</code>, <code>adaptive.vals</code>, <code>cb.xlab</code>, <code>suffix</code>, <code>v_area</code>, <code>v_image</code>, <code>v_contour</code>, <code>v_arrows</code>, <code>fill</code>, <code>col</code>, <code>border</code>, <code>grid</code>, <code>grid.res</code>, <code>bwd</code>, <code>axeslabels</code>, <code>ticklabels</code>, <code>cex.lab</code>, <code>cex.ticks</code>)
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

 <p><code> <a href="#topic+v">v</a>, <a href="#topic+readbin">readbin</a>, <a href="#topic+name_split">name_split</a>, <a href="#topic+regions">regions</a>, <a href="#topic+plotmap">plotmap</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example 1: plot seasonal '.gz'-files, following default plot-procedure
path &lt;- system.file("test_files", package="oceanmap")
gz.file &lt;- Sys.glob(paste0(path,'/*.gz'))[1] # load sample-'.gz'-files
check_gzfiles(folder=path) # return file summary-table
gz.files &lt;- Sys.glob(paste0(path,'/*1s_*.gz')) # load seasonal '.gz'-files
# v(gz.files) # as single plots

## as combined climatology plot, saved in plotfolder
# clim_plot(gz.files,plotname='chla.summary.png') 
</code></pre>

<hr>
<h2 id='close_fig'>
function to close current graphic device
</h2><span id='topic+close_fig'></span>

<h3>Description</h3>

<p>function to close current graphic device, complement to <a href="#topic+figure">figure</a>-function that generates graphic devices in flexible fileformats.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>close_fig(do.close=F, do.save=do.close)

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="close_fig_+3A_do.close">do.close</code>, <code id="close_fig_+3A_do.save">do.save</code></td>
<td>

<p>whether file should be saved or not (default is TRUE). 
if FALSE, new graphic device will be opened inside R.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

 <p><code><a href="#topic+figure">figure</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'># do.save &lt;- TRUE
# figure("Gulf_of_Lions", do.save=do.save, width=5, height=5, type="pdf")
# plotmap("lion")
# close_fig(do.save)

do.save &lt;- TRUE
plotmap("lion")
close_fig(do.save)

do.save &lt;- FALSE
figure("Gulf_of_Lions", do.save=do.save, width=5, height=5, type="pdf")
plotmap("lion")
close_fig(do.save)

</code></pre>

<hr>
<h2 id='cmap'>
color maps 
</h2><span id='topic+cmap'></span><span id='topic+cmap_topo'></span>

<h3>Description</h3>

<p>list holding different color maps that can be used in image plots (see: <a href="#topic+v">v</a>, <a href="#topic+get.bathy">get.bathy</a>, <a href="graphics.html#topic+image">image</a>, <a href="fields.html#topic+image.plot">image.plot</a>s, <a href="#topic+clim_plot">clim_plot</a>)
</p>
<p>available color maps are: <code>ano</code>, <code>bathy</code>, <code>blue</code>, <code>chla</code>, <code>haxby</code>, <code>jet</code> (obtained from matlab), <code>rainbow</code>, <code>red</code>, <code>orange</code>, <code>green</code>, <code>sst</code> and <code>haxbyrev</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(cmap)
data(cmap_topo)
</code></pre>


<h3>Format</h3>

<p>list
</p>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data('cmap') # load color maps data
names(cmap) # list available color maps

path &lt;- system.file("test_files", package="oceanmap")
gz.files &lt;- Sys.glob(paste0(path,'/*.gz')) # load sample-'.gz'-files
# figure(width=15,height=15)
# par(mfrow=c(4,5))
# for(n in names(cmap)) v(gz.files[2], v_area='lion', subplot=TRUE,
#                         pal=n, adaptive.vals=TRUE, main=n)

## simple example of the \link{image}-function
x &lt;- 10*(1:nrow(volcano))
y &lt;- 10*(1:ncol(volcano))
image(x, y, volcano, col = terrain.colors(100))
image(x, y, volcano, col = cmap$jet) # jet color map
image(x, y, volcano, col = cmap$haxby) # haxby color map
image(x, y, volcano, col = cmap$chla) # chlorophyll color map
image(x, y, volcano, col = cmap$sst) # sst color map

data(cmap_topo)
image(x, y, volcano, col = cmap_topo$col) # topography color map

## another example: plot bathymetry and topography of the western Mediterranean Sea
#get.bathy("medw4",visualize=T,terrain=T,res=3)
#get.bathy("medw4",visualize=T,terrain=F,res=3,levels=c(200,2000)) # show contours

</code></pre>

<hr>
<h2 id='cust.colorbar'>
defines colorbar settings for <code>v.raster</code> and <code>add.region</code>-calls.
</h2><span id='topic+cust.colorbar'></span>

<h3>Description</h3>

<p>function (used by <a href="#topic+v">v</a>) to define the colorbar placement and figure dimensions. Unlike <a href="#topic+set.colorbar">set.colorbar</a> the colorbar is not added to an existing plot but to a dummy device. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cust.colorbar(v_area, lon, lat, cbpos='', cbx, cby, 
              figdim, input.mode, force.figdim.widget=F, xpos=-1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cust.colorbar_+3A_v_area">v_area</code></td>
<td>

<p>region-keyword predefined by the <a href="#topic+region_definitions">region_definitions</a>-dataset or an <a href="raster.html#topic+extent">extent</a>.
</p>
</td></tr>
<tr><td><code id="cust.colorbar_+3A_lon">lon</code></td>
<td>

<p>Vector returning longitude coordinates of the area to be plotted.
</p>
</td></tr>
<tr><td><code id="cust.colorbar_+3A_lat">lat</code></td>
<td>

<p>Vector returning latitude coordinates of the area to be plotted.
</p>
</td></tr>
<tr><td><code id="cust.colorbar_+3A_cbpos">cbpos</code></td>
<td>

<p>letter (&quot;b&quot;, &quot;l&quot;, &quot;t&quot;, &quot;r&quot;) indicating the position of the colorbar (bottom, left, top, right). Overwrites <code>cbx</code> and <code>cby</code> values.
</p>
</td></tr>
<tr><td><code id="cust.colorbar_+3A_cbx">cbx</code></td>
<td>

<p>the horizontal limits (x1, x2) of the colorbar. If missing, the user will be asked for manual colorbar placement.
</p>
</td></tr>
<tr><td><code id="cust.colorbar_+3A_cby">cby</code></td>
<td>

<p>the vertical limits (y1, y2) of the colorbar. If missing, the user will be asked for manual colorbar placement.
</p>
</td></tr>
<tr><td><code id="cust.colorbar_+3A_figdim">figdim</code></td>
<td>

<p>numeric vector indicating the <code>width</code> and <code>height</code> of the plot device in inches. If missing and <code>force.figdim.widget</code> is set <code>FALSE</code>, figdim is assigned a default <code>width</code> and <code>height</code> of 7in, otherwise the user will be asked to resize the plot device to set plot dimensions.
</p>
</td></tr>
<tr><td><code id="cust.colorbar_+3A_input.mode">input.mode</code></td>
<td>

<p>character indicating the input mode of the function: 'i' for manual colorbar placement, 'v' for a vertical colorbar on the right side of the plot or 'h' for a hoizontal colorbar below the plot..
</p>
</td></tr>
<tr><td><code id="cust.colorbar_+3A_force.figdim.widget">force.figdim.widget</code></td>
<td>

<p>whether <code>figdim</code> should be assigned by a widget if missing.
</p>
</td></tr>
<tr><td><code id="cust.colorbar_+3A_xpos">xpos</code></td>
<td>

<p>integer: initial position of the top left corner of the figure window on the pc-screen, given in pixels. Negative values are from the opposite corner. (default is -1). Disregarded under Mac OS.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>like <code>set.colobar</code> <code>cust.colobar</code> defines colorbar settings, but furthermore the default figure size. The function is used by calls of <a href="#topic+v">v</a> on non-<code>'.gz'</code>-files and <a href="#topic+add.region">add.region</a>.
</p>


<h3>Value</h3>

<p>a list of colorbar definition vectors: <code>cbx, cby, figdim</code> and <code>align</code> of which the latter holds the values of <code>gradient</code> and <code>oticks</code>. See function argmuments for more details.
</p>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

<p><a href="#topic+set.colorbar">set.colorbar</a>, <a href="#topic+add.region">add.region</a> and <a href="#topic+v.raster">v.raster</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example:
path &lt;- system.file("test_files", package="oceanmap")
nfiles &lt;- Sys.glob(paste0(path,'/herring*.nc')) # load sample-'.nc'-files
head(nfiles)
rfile &lt;- nc2raster(nfiles[1], varname='Conc', layer=1)

ext &lt;- extent(rfile)
#cb &lt;- cust.colorbar(ext) # starts new plot device to define colorbar placement
#cust.colorbar(ext, cbx=cb$cbx, cby=cb$cby) # if cbx and cby are given no figure is produced

#plotmap(ext)
#set.colorbar(cb$cbx, cb$cby) # plots to an existing plot
</code></pre>

<hr>
<h2 id='delete.region'>
deletes a region from the <a href="#topic+region_definitions">region_definitions</a>-definition file</h2><span id='topic+delete.region'></span>

<h3>Description</h3>

<p>deletes a specified region from the <a href="#topic+region_definitions">region_definitions</a>-definition file</p>


<h3>Usage</h3>

<pre><code class='language-R'>delete.region(region,lib.folder,restore=F)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="delete.region_+3A_region">region</code></td>
<td>

<p>Character string identifying the region that should be deleted.
See <a href="#topic+region_definitions">region_definitions</a> for area definitions and use <a href="#topic+add.region">add.region</a> to add new regions.
</p>
</td></tr>
<tr><td><code id="delete.region_+3A_lib.folder">lib.folder</code></td>
<td>

<p>Character string indicating R-library path in which the oceanmap-package is installed.
</p>
</td></tr>
<tr><td><code id="delete.region_+3A_restore">restore</code></td>
<td>

<p>whether the original <a href="#topic+region_definitions">region_definitions</a>-file should be restored.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

<p><a href="#topic+add.region">add.region</a>, <a href="#topic+region_definitions">region_definitions</a>, <a href="#topic+regions">regions</a>, <a href="#topic+writebin">writebin</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example 1: Add region by supplying a one-row data.frame 
##            that holds the entire required information
data(region_definitions)
lion &lt;- region_definitions[region_definitions$label == 'lion',] # selecting Gulf of Lions region
lion
junk &lt;- lion 
junk$label &lt;- 'junk' # rename region label
#add.region(junk) # add junk region
data(region_definitions) # reload region_definitions
region_definitions[,1:9]

## Example 2: Delete region
#delete.region("junk") # delete junk region
data(region_definitions) # reload region_definitions
region_definitions[,1:9]
</code></pre>

<hr>
<h2 id='digits'>
returns recognized number of digits for colorbar ticklabels</h2><span id='topic+digits'></span>

<h3>Description</h3>

<p>returns recognized number of digits for colorbar ticklabels. Used by <a href="#topic+v.plot">v.plot</a> inside <a href="#topic+v">v</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>digits(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="digits_+3A_x">x</code></td>
<td>

<p>a numeric value. If x &gt;= 1 output is set to zero (meaning ticklabels will have no digit positions).
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

 <p><a href="#topic+v.plot">v.plot</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example 1: ticklabels with no digits
digits(1000)
digits(1)
digits(1.01)

## Example 2: ticklabels with digits
digits(0.1)
digits(0.01)


</code></pre>

<hr>
<h2 id='empty.plot'>
Creates an empty scatter plot</h2><span id='topic+empty.plot'></span>

<h3>Description</h3>

<p>Creates an empty scatter plot that is equal to the function call:
</p>
<p><code>plot(1,lwd=0,axes=F,xlab="",ylab="",...)</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>empty.plot(..., xlab = "", ylab = "", new=T, add=!new, n=1, axes = F)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="empty.plot_+3A_...">...</code></td>
<td>

<p>other arguments of the generic x-y plotting fucntion <a href="graphics.html#topic+plot">plot</a>.
</p>
</td></tr>
<tr><td><code id="empty.plot_+3A_xlab">xlab</code>, <code id="empty.plot_+3A_ylab">ylab</code></td>
<td>

<p>label for the x- and y-axis of the plot (default is empty).
</p>
</td></tr>
<tr><td><code id="empty.plot_+3A_new">new</code>, <code id="empty.plot_+3A_add">add</code></td>
<td>

<p>whether to show add plot to a current plot device or to start a new figure (default is: new=<code>TRUE</code> and add=<code>FALSE</code>).
</p>
</td></tr>
<tr><td><code id="empty.plot_+3A_n">n</code></td>
<td>

<p>number of figures to be plotted (default is 1)
</p>
</td></tr>
<tr><td><code id="empty.plot_+3A_axes">axes</code></td>
<td>

<p>whether to show plot axes (default is <code>FALSE</code>).
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>empty.plot()
title("empty plot")
box()
axis(1)
axis(2)
</code></pre>

<hr>
<h2 id='figure'>
generate (and save) graphic devices with flexible fileformat selection
</h2><span id='topic+figure'></span>

<h3>Description</h3>

<p><code>figure</code> generates graphic devices with flexible fileformat selection.
<b>Function call with (figure(do.save=T) needs to be finished by close_fig(do.save=T), to close open file connection.</b>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>figure(filename, folder, type, save=F, do.save=save, 
       width=10, height=10, xpos=-1, do.overwrite=T, delete.old=do.overwrite, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="figure_+3A_filename">filename</code></td>
<td>

<p>name of the figure to be generated (without file extension)
</p>
</td></tr>
<tr><td><code id="figure_+3A_folder">folder</code></td>
<td>

<p>plot folder (by default current working directory) 
</p>
</td></tr>
<tr><td><code id="figure_+3A_type">type</code></td>
<td>

<p>character string indicating the graphics format of the figure file. can be:
</p>

<ul>
<li><p>&quot;jpg&quot;
</p>
</li>
<li><p>&quot;jpeg&quot;
</p>
</li>
<li><p>&quot;png&quot;
</p>
</li>
<li><p>&quot;tiff&quot;
</p>
</li>
<li><p>&quot;eps&quot;
</p>
</li>
<li><p>&quot;pdf&quot;
</p>
</li></ul>
 
</td></tr>
<tr><td><code id="figure_+3A_width">width</code>, <code id="figure_+3A_height">height</code></td>
<td>

<p>width and height of figure to be generated. default units are inches.
</p>
</td></tr>
<tr><td><code id="figure_+3A_save">save</code>, <code id="figure_+3A_do.save">do.save</code></td>
<td>

<p>whether file should be saved or not (default is TRUE). 
if FALSE, new graphic device will be opened inside R.
</p>
</td></tr>
<tr><td><code id="figure_+3A_xpos">xpos</code></td>
<td>

<p>horizontal screen position of graphic device (ignored if do.save == TRUE)
</p>
</td></tr>
<tr><td><code id="figure_+3A_do.overwrite">do.overwrite</code>, <code id="figure_+3A_delete.old">delete.old</code></td>
<td>

<p>overwrite existing figure with same filename and extension (default is FALSE)
</p>
</td></tr>
<tr><td><code id="figure_+3A_...">...</code></td>
<td>

<p>additional arguments to be passed to the graphic device
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

 <p><code><a href="#topic+close_fig">close_fig</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example 1: plotmap() and figure()
do.save &lt;- FALSE
figure("Gulf_of_Lions_extended", do.save=do.save, width=5, height=5, type="pdf")
plotmap("lion")
close_fig(do.save)

## now resize figure manually and get new figure dimensions:
width &lt;- dev.size()[1]
height &lt;- dev.size()[2]

# do.save &lt;- TRUE
# figure("Gulf_of_Lions_extended", do.save=do.save, width=width, height=height, type="pdf")
# plotmap("lion")
# close_fig(do.save)




</code></pre>

<hr>
<h2 id='get.avg.bathy'>
returns the average value of circles with specified coordinates and a defined radius
</h2><span id='topic+get.avg'></span><span id='topic+get.avg.bathy'></span>

<h3>Description</h3>

<p>returns the average value of circles with specified coordinates and a defined radius
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.avg.bathy(x, radius, unit="km", raster, bathy, v_area="medw4")
get.avg(x, radius, unit="km", raster)

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get.avg.bathy_+3A_x">x</code></td>
<td>

<p>a vector or matrix providing the coordinates of the circle
</p>
</td></tr>
<tr><td><code id="get.avg.bathy_+3A_radius">radius</code></td>
<td>

<p>the radius (if <code>unit</code> != &quot;km&quot;, 
the radius is assumed to be of the same scale as the plotting window)
</p>
</td></tr>
<tr><td><code id="get.avg.bathy_+3A_unit">unit</code></td>
<td>

<p>unit of the radius (by default &quot;km&quot;).
if <code>unit</code> != &quot;km&quot;, the radius is assumed to be of the same scale as the plotting window.
</p>
</td></tr>
<tr><td><code id="get.avg.bathy_+3A_raster">raster</code></td>
<td>

<p>raster object, from which the average should be calculated.
</p>
</td></tr>
<tr><td><code id="get.avg.bathy_+3A_bathy">bathy</code></td>
<td>

<p>raster object with bathymetry data, from which the average should be calculated.
</p>
</td></tr>
<tr><td><code id="get.avg.bathy_+3A_v_area">v_area</code></td>
<td>

<p>character string identifying the region for which the bathymetry data should downloaded from the NOAA server.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

<p><a href="#topic+SpatialCircle">SpatialCircle</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Example 1: load &amp; plot bathymetry of the Baltic Sea, defined by longitudes and latidtues
lon &lt;- c(9, 31)
lat &lt;- c(53.5, 66)
# bathy &lt;- get.bathy(lon=lon, lat=lat, main="Baltic Sea", cbpos='r')
plotmap(lon=lon, lat=lat)
spc &lt;- SpatialCircle(x= 20,y = 57.5,r=1)
plot(spc,add=TRUE)
# get.avg.bathy(c(20,57.5), radius = 1, bathy = bathy)
# get.avg(c(20,57.5), radius = 1, unit="km",raster = bathy)

</code></pre>

<hr>
<h2 id='get.bathy'>
Returns bathymetric data from the NOAA ETOPO1 database as RasterLayer, given coordinate bounds and resolution.
</h2><span id='topic+get.bathy'></span>

<h3>Description</h3>

<p>Returns and optionally stores bathymetric data from the ETOPO1 database hosted on the NOAA server as a RasterLayer, based on the defined resolution and provided coordinate bounds or region definition. Stored bathymetry files can be reloaded through the same function call.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.bathy(v_area, lon, lat, resolution=4, keep=F ,
          savename.bathy, folder.bathy, visualize=T, terrain=F,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get.bathy_+3A_v_area">v_area</code></td>
<td>

<p>character string identifying the region that should be plotted, or in case of <code>x == 'bathy'</code>, also a Raster* or Extent object. If missing, region is derived from the <code>'.gz'</code>-filename. 
See <a href="#topic+region_definitions">region_definitions</a> for area definitions and use <a href="#topic+add.region">add.region</a> to add new regions.
</p>
</td></tr>
<tr><td><code id="get.bathy_+3A_lon">lon</code>, <code id="get.bathy_+3A_lat">lat</code></td>
<td>

<p>longitude and latitude describing the extend of the region of interest.
</p>
</td></tr>
<tr><td><code id="get.bathy_+3A_resolution">resolution</code></td>
<td>

<p>resolution of the bathymetric grid, in minutes (default is 4).
</p>
</td></tr>
<tr><td><code id="get.bathy_+3A_keep">keep</code></td>
<td>

<p>whether to write the data downloaded from NOAA into a file (default is FALSE).
</p>
</td></tr>
<tr><td><code id="get.bathy_+3A_savename.bathy">savename.bathy</code></td>
<td>

<p>savename for the bathymetric data file, if not specified set to type 'bathy_lon-lat_res.resolution.dat' or 'bathy_v_area_res.resolution.dat'.
</p>
</td></tr>
<tr><td><code id="get.bathy_+3A_folder.bathy">folder.bathy</code></td>
<td>

<p>directory where bathymetric data should be saved (default is current working directory).
</p>
</td></tr>
<tr><td><code id="get.bathy_+3A_visualize">visualize</code></td>
<td>

<p>whether the bathymetric data should be plotted instantly.
</p>
</td></tr>
<tr><td><code id="get.bathy_+3A_terrain">terrain</code></td>
<td>

<p>whether the to keep terrain data (default is <code>FALSE</code>). If set <code>FALSE</code> and <code>visualize</code> is <code>TRUE</code>, <code>grid</code> command in <a href="#topic+plotmap">plotmap</a> is disabled!
</p>
</td></tr>
<tr><td><code id="get.bathy_+3A_...">...</code></td>
<td>

<p>additional arguments to be passed to <a href="#topic+v">v</a>, used if <code>visualize</code> is set <code>TRUE</code>.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

<p><a href="#topic+v">v</a>, <a href="#topic+add.region">add.region</a>, <a href="#topic+region_definitions">region_definitions</a>, <a href="#topic+regions">regions</a>, <a href="#topic+writebin">writebin</a>, <a href="#topic+get.bathy">get.bathy</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Example 1: load &amp; plot bathymetry of the Baltic Sea, defined by longitudes and latidtues
lon &lt;- c(9, 31)
lat &lt;- c(53.5, 66)
# get.bathy(lon=lon, lat=lat, main="Baltic Sea", cbpos='r')

## Example 2: plot bathymetry using a v_area-keyword
#get.bathy("lion",res=4, keep=T) # can take some time, requires server connection!
#get.bathy("lion",res=1, keep=T,visualize=FALSE)

## Example 3: plot landmask of the Baltic Sea defined by an extent- or raster-object
library('raster')
ext &lt;- extent(lon,lat)
#get.bathy(ext,visualize=T,main="Baltic Sea",res=4,levels=200) # extent-object

## Example 4: plot bathymetry and topography of the western Mediterranean Sea
### a) download, assign and save bathymetry
# bathy &lt;- get.bathy("medw4",visualize=F,terrain=T,res=3,keep=T)
# # load('bathy_medw4_res.3.dat',verbose = T); bathy &lt;- h
# par(mfrow=c(2,1))
# v(bathy,param="bathy",subplot = T)
# get.bathy("medw4",visualize=T,terrain=F,res=3,levels=c(200,2000), 
# subplot = T,grid=F) # show contours

### b) only contour lines:
# par(mfrow=c(1,2))
# h &lt;- get.bathy("lion",visualize=T,terrain=F,res=3,levels=c(200,2000),
#                v_image=F, subplot=T,grid=F)

### use v-function for same plot but on subregion:
# v(h,v_area = "survey", param="bathy",subplot = T, v_contour = T, 
#   v_image = F, levels=c(200,2000)) 

</code></pre>

<hr>
<h2 id='get.cb.pos'>
Returns additional colorbar placement information</h2><span id='topic+get.cb.pos'></span>

<h3>Description</h3>

<p>Returns colorbar ticks length, label-, cb.title- and cb.xlab-position. ticks.lab, cb.title and cb.lab are horizontally centered, so only the y-value is returned.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.cb.pos(cbx,cby,oticks)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get.cb.pos_+3A_cbx">cbx</code></td>
<td>

<p>the horizontal limits (x1, x2) of the colorbar.
</p>
</td></tr>
<tr><td><code id="get.cb.pos_+3A_cby">cby</code></td>
<td>

<p>the vertical limits (y1, y2) of the colorbar.
</p>
</td></tr>
<tr><td><code id="get.cb.pos_+3A_oticks">oticks</code></td>
<td>

<p>letter defining alignment of colorbar ticks and labels. Allowed values are: <code>'b'</code> for bottom, <code>'l'</code> for left and <code>'r'</code> for right alignment. 
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

 <p><code> <a href="#topic+set.colorbar">set.colorbar</a>, <a href="#topic+cust.colorbar">cust.colorbar</a>, <a href="#topic+region_definitions">region_definitions</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>path &lt;- system.file("test_files", package="oceanmap")
gz.files &lt;- Sys.glob(paste0(path,'/*.gz')) # load sample-'.gz'-files

obj &lt;- readbin(gz.files[2],area='lion')
ncorse &lt;- crop(obj,extent(6,9,40,42))
cbx &lt;-c(8.3,8.9)
cby &lt;- c(40.7,40.8)
v(ncorse,zlim=c(20,30),cbx=cbx,cby=cby) # skipping colorbar widget

get.cb.pos(cbx=cbx,cby=cby,oticks="b") 

#dev.new()
#image(obj)
#align &lt;- set.colorbar()
#get.cb.pos(cbx=align$cbx,cby=align$cby,oticks=align$oticks)
</code></pre>

<hr>
<h2 id='ggplotmaply'>
Converts a ggplot2 object from ggplotmap() to plotly
</h2><span id='topic+ggplotmaply'></span>

<h3>Description</h3>

<p>This function converts a ggplot2 object created by oceanmap::ggplotmap() to a plotly object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggplotmaply(ggobj, fixedrange=F, grid=F,expand=3)

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ggplotmaply_+3A_ggobj">ggobj</code></td>
<td>

<p>Character string identifying regions predefined by the <a href="#topic+region_definitions">region_definitions</a>-dataset, Raster* or Extent object (corresponds to <code>v_area</code> of the <a href="#topic+v">v</a>-function). If missing, region is derived from geographical coordinates, denoted by lat and lon. See <a href="#topic+add.region">add.region</a> to define new region definitions and <a href="#topic+delete.region">delete.region</a> to delete unproper region definitions.
</p>
</td></tr>
<tr><td><code id="ggplotmaply_+3A_fixedrange">fixedrange</code></td>
<td>

<p>Vector returning longitude coordinates of the area to be plotted.
</p>
</td></tr>
<tr><td><code id="ggplotmaply_+3A_grid">grid</code></td>
<td>

<p>whether a grid should be plotted (default is <code>TRUE</code>)
</p>
</td></tr>
<tr><td><code id="ggplotmaply_+3A_expand">expand</code></td>
<td>

<p>By default, the underlying <a href="plotly.html#topic+ggplotly">ggplotly</a>-function does not stick to the plotting region of the ggobj, but extends it. This can result in missing countries or islands. The <code>expand</code>-argument extends the plotly-plotting window in each direction in order to cover the corresponding landmasks.)
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>ggoplotmaply</code> uses the <code>ggplotly</code> functions to convert the ggplot object into the plotly format.
</p>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

 <p><code> <a href="#topic+ggplotmap">ggplotmap</a>, <a href="plotly.html#topic+ggplotly">ggplotly</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)

#### Example 1: plot landmask of the Western Mediterranean Sea
## a) by using longitude and latitude coordinates:
# lon &lt;- c(-6, 16.5)
# lat &lt;- c(34, 44.5)
# ggobj &lt;- ggplotmap(xlim=lon, ylim=lat)
# ggobj
# ggplotmaply(ggobj,expand = 10) ## we need to expand the plotting region


## b) plot landmask of the Western Mediterranean Sea by using an extent-object:
# library('raster')
# ext &lt;- extent(lon, lat)
# plotmap(ext, main="Western Mediterranean Sea") # extent-object
# ggobj &lt;- ggplotmap(ext)
# ggobj
# ggplotmaply(ggobj)


## c) plot landmask of the Western Mediterranean Sea by using a raster-object:
# r &lt;- raster(ext)
# ggobj &lt;- ggplotmap(r)
# ggobj
# ggplotmaply(ggobj)
# ggplotmaply(ggobj)

## d) plot landmask of the entire Mediterranean Sea by using keyword:
 ggobj &lt;- ggplotmap("med4") + 
          geom_point(data=data.frame(x=3.7008, y=43.4079),aes(x,y),size=5,colour="blue")
# ggobj
# ggplotmaply(ggobj,expand = 10)


## e) add landmask to raster image plot (similar to v()-call)
# library(dplyr)
# library(ggplot2)
# data(cmap)
# setwd(system.file("test_files", package="oceanmap"))
# nc &lt;- nc2raster(ncfiles[1])
# rs2df &lt;- nc[[1]] %&gt;% ## take first layer
#          rasterToPoints() %&gt;% ## convert raster to xyz matrix
#          as.data.frame() ## convert to data frame
# names(rs2df) &lt;- c("Lon","Lat","Conc") ## reset names (important for ggplotmaply hover text)
# ggobj &lt;- ggplot() + geom_raster(data = rs2df, aes(x=Lon,y=Lat,fill=Conc)) 
# ggobj_with_land_mask &lt;- ggplotmap(add_to = ggobj) + 
#                         scale_fill_gradientn(colours=cmap$jet) # change colorbar
# ggobj_with_land_mask 
# ggplotmaply(ggobj_with_land_mask)


</code></pre>

<hr>
<h2 id='internal.datasets'>
internal datasets
</h2><span id='topic+medm9_proj'></span><span id='topic+regions.dim.bathy'></span>

<h3>Description</h3>

<p>internal (<code>lazyload</code>) datasets <code>medm9_proj</code> and <code>regions.dim.bathy</code>, accessed by <code>v.plot</code> and <a href="#topic+readbin">readbin</a> respectively.
</p>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>

<hr>
<h2 id='matrix2raster'>
Converts a matrix to a RasterLayer or arrays to a RasterStack-object</h2><span id='topic+matrix2raster'></span>

<h3>Description</h3>

<p><code>matrix2raster</code> Converts a matrix to a RasterLayer or arrays to a RasterStack-object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>matrix2raster(z,x,y,layer,proj="+proj=longlat")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="matrix2raster_+3A_z">z</code></td>
<td>

<p>matrix or array to be converted.
</p>
</td></tr>
<tr><td><code id="matrix2raster_+3A_x">x</code></td>
<td>

<p>optional x-coordinates giving the horizontal <a href="base.html#topic+range">range</a> of the raster layer, its size does not need to coincide with ncol(z)! 
</p>
</td></tr>
<tr><td><code id="matrix2raster_+3A_y">y</code></td>
<td>

<p>optional y-coordinates giving the verical <a href="base.html#topic+range">range</a> of the raster layer, its size does not need to coincide with nrow(z)! 
</p>
</td></tr>
<tr><td><code id="matrix2raster_+3A_layer">layer</code></td>
<td>

<p>layer to be selected (only valid if z is an array).
</p>
</td></tr>
<tr><td><code id="matrix2raster_+3A_proj">proj</code></td>
<td>

<p>optional argument, setting the coordinate reference system (CRS) of a Raster* object (default is <code>+proj=longlat</code>).
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example 1: convert a matrix
m &lt;- matrix(3,2,2)
matrix2raster(m)

## Example 2: convert an array
a &lt;- array(3,dim=c(2,2,2))
matrix2raster(a)
matrix2raster(a,layer=1)

## Example 3: convert '.nc'-file to raster-object manually
owd &lt;- getwd()
path &lt;- system.file("test_files", package="oceanmap")
ncfile &lt;- Sys.glob(paste0(path,'/herring*.nc')) # load sample-'.nc'-files

library('ncdf4')
library('raster')
nc &lt;- nc_open(ncfile) # open netcdf file
z &lt;- ncvar_get(nc,'Conc')[,,1]
lon &lt;- as.vector(ncvar_get(nc,'lon')) # fillvalues are automatically replaced by NA
lat &lt;- as.vector(ncvar_get(nc,'lat')) # fillvalues are automatically replaced by NA
matrix2raster(z,x=lon,y=lat)  

## Example 4: convert '.nc'-file to raster-object using nc2raster
nc2raster(ncfile,varname='Conc',layer=1:4)

</code></pre>

<hr>
<h2 id='name_join'>
create '<code>'.gz'</code>-filenames from a list or dataframe
</h2><span id='topic+name_join'></span>

<h3>Description</h3>

<p>creates filenames based on a list or dataframe with the (header)-names:
</p>
<p><code>area source parameter resolution timestep date1 date2 option</code>
</p>
<p>by aligning the defined filetype: 
</p>
<p>e.g. <code>area_source_parameter_resolution_timestep_date1_date2.option.filetype</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>name_join(parts,filetype='gz')
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="name_join_+3A_parts">parts</code></td>
<td>

<p>a list or dataframe with the parts:
</p>
</td></tr>
</table>

<dl>
<dt><code>area</code></dt><dd>
<p>, the region keyword
</p>
</dd>
<dt><code>source</code></dt><dd>
<p>, the data source
</p>
</dd>
<dt><code>param</code></dt><dd>
<p>, the parameter saved in the <code>'.gz'</code>-file. Can only be one value!
</p>
</dd>
<dt><code>resolution</code></dt><dd>
<p>, the  spatial resolution
</p>
</dd>
<dt><code>timestep</code></dt><dd>
<p>, the temporal resolution
</p>
</dd>
<dt><code>date1</code> &amp; <code>date2</code></dt><dd>
<p>, the temporal resolution (the time interval covered).
</p>
</dd>
<dt><code>option</code></dt><dd>
<p>a character string holding supplmentary information of <code>'.gz'</code>-file treatment
</p>
</dd>
</dl>

<table>
<tr><td><code id="name_join_+3A_filetype">filetype</code></td>
<td>

<p>character string inidicating the filtype to be checked. ('.gz' by default)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Herve Demarq, translated from IDL by Robert K. Bauer
</p>


<h3>See Also</h3>

<p>See <a href="#topic+check_gzfiles">check_gzfiles</a> to return summary of available <code>'.gz'</code>-files and <a href="#topic+name_split">name_split</a> to split <code>'.gz'</code>-filenames
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example: read and plot '.gz'-file
path &lt;- system.file("test_files", package="oceanmap")
gz.files &lt;- Sys.glob(paste0(path,'/*.gz')) # load sample-'.gz'-files
check_gzfiles(folder=path) # return file summary-table

# return summary of availble '.gz'-files
# suffix-column corresponds to option column of the name_join-call
# addition n-column returns the number of available files per filetype
check_gzfiles(gz.files)

## Example: split and rejoin '.gz'-filenames
name_split(gz.files) # return summary-table per file
name_join(name_split(gz.files))
</code></pre>

<hr>
<h2 id='name_split'>
Returns a summary data frame of <code>'.gz'</code> encoded oceanography files by splitting their name
</h2><span id='topic+name_split'></span><span id='topic+get.gz.info'></span>

<h3>Description</h3>

<p>Returns a summary <a href="base.html#topic+data.frame">data.frame</a> of <code>'.gz'</code> encoded oceanography files by splitting their name
</p>


<h3>Usage</h3>

<pre><code class='language-R'>name_split(gz.files)
get.gz.info(gz.files)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="name_split_+3A_gz.files">gz.files</code></td>
<td>

<p>Optional character vector or search criteria for .gz-encoded oceanography files. 
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a summary <a href="base.html#topic+data.frame">data.frame</a> of <code>'.gz'</code> encoded oceanography files by splitting their name
</p>
<p><code>area source parameter resolution timestep date1 date2 option</code>
</p>
<table>
<tr><td><code>area</code></td>
<td>

<p>region keyword
</p>
</td></tr>
<tr><td><code>source</code></td>
<td>

<p>data source
</p>
</td></tr>
<tr><td><code>param</code></td>
<td>

<p>the parameter saved in the <code>'.gz'</code>-file. Can only be one value!
</p>
</td></tr>
<tr><td><code>resolution</code></td>
<td>

<p>the spatial resolution
</p>
</td></tr>
<tr><td><code>timestep</code></td>
<td>

<p>the temporal resolution
</p>
</td></tr>
<tr><td><code>date1 &amp; date2</code></td>
<td>

<p>the time interval covered in date format
</p>
</td></tr>
<tr><td><code>option</code></td>
<td>

<p>a character string holding supplmentary information of <code>'.gz'</code>-file treatment
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

<p>See <a href="#topic+check_gzfiles">check_gzfiles</a> to return summary of available <code>'.gz'</code>-files and <a href="#topic+name_join">name_join</a> to create <code>'.gz'</code>-filenames from splitted names (<a href="#topic+name_split">name_split</a>)-calls</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example: read and plot '.gz'-file
path &lt;- system.file("test_files", package="oceanmap")
gz.files &lt;- Sys.glob(paste0(path,'/*.gz')) # load sample-'.gz'-files
check_gzfiles(folder=path) # return file summary-table

# return summary of availble '.gz'-files
# suffix-column corresponds to option column of the name_split-call
# addition n-column returns the number of available files per filetype
check_gzfiles(gz.files)

## Example: split and rejoin '.gz'-filenames
gz.files
name_split(gz.files) # return summary-table per file
name_split() # return summary-table of all gz-file in current folder
name_join(name_split(gz.files))
</code></pre>

<hr>
<h2 id='nc2raster'>
Convert Raster layer to a matrix or array</h2><span id='topic+nc2raster'></span>

<h3>Description</h3>

<p><code>nc2raster</code> converts a netcdf-file ('.nc'-file) or <code>ncdf4</code>-object to a Raster* object, setting the time variable as layer name.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc2raster(nc, varname, t=layer, layer, verbose=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc2raster_+3A_nc">nc</code></td>
<td>
<p>character string indicating the filepath to a netcdf-file ('.nc'-file), or a <code>ncdf4</code>-object.
</p>
</td></tr>
<tr><td><code id="nc2raster_+3A_varname">varname</code></td>
<td>

<p>character string indicating the name of the netcdf-variable to be selected.
</p>
</td></tr>
<tr><td><code id="nc2raster_+3A_layer">layer</code>, <code id="nc2raster_+3A_t">t</code></td>
<td>

<p>layer/time stemp to select in multi-layer files.
</p>
</td></tr>
<tr><td><code id="nc2raster_+3A_verbose">verbose</code></td>
<td>

<p>should information about the netcdf file, including the variables and dimensions it contains, be printed during loading? (default is <code>FALSE</code>)
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>RasterLayer or RasterStack
</p>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path &lt;- system.file("test_files", package="oceanmap")
nfiles &lt;- Sys.glob(paste0(path,'/*.nc'))[1] # load sample-'.nc'-files

nc2raster(nfiles[1],"Conc",layer=1) # RasterLayer
nc2raster(nfiles[1],"Conc",layer=1:4) # RasterStack

library('ncdf4')
nc &lt;- nc_open(nfiles[1])
nc2raster(nc,"Conc",layer=1:4) # RasterStack

###### load &amp; plot sample netcdf-file ('.nc'-file)

### option a) load netcdf-file with ncdf4-package and plot it
library('ncdf4')
ncdf &lt;- nc_open(nfiles[1])
print(ncdf)
v(obj = ncdf, cbpos="r")

### option b) load and plot netcdf-file as RasterStack object
nc &lt;- nc2raster(nfiles[1])
v(nc,cbpos="r") # plot RasterStack object
v(nfiles[1], cbpos="r",replace.na=TRUE) # plot directly netcdf-file

### option c) plot netcdf-file directly
v(nfiles[1], cbpos="r") # plot RasterStack object

###### plot multiple layers:
par(mfrow=c(2,2))
v(nfiles[1], t=1:4, cbpos="r", replace.na=TRUE, subplot = TRUE)

</code></pre>

<hr>
<h2 id='nc2time'>
reads and converts the time variable of a netcdf-file ('.nc'-file) or <code>ncdf4</code>-object as <code>as.Date</code>-object
</h2><span id='topic+nc2time'></span>

<h3>Description</h3>

<p>reads and converts the time variable of a netcdf-file ('.nc'-file) or <code>ncdf4</code>-object as <code>as.Date</code>-object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nc2time(nc,varname)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nc2time_+3A_nc">nc</code></td>
<td>
<p>character string indicating the filepath to a netcdf-file ('.nc'-file), or a <code>ncdf4</code>-object.
</p>
</td></tr>
<tr><td><code id="nc2time_+3A_varname">varname</code></td>
<td>
<p>character string indicating the name of the time vaiable of the netcdf-file.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path &lt;- system.file("test_files", package="oceanmap")
nfile &lt;- Sys.glob(paste0(path,'/herring*.nc')) # load sample-'.nc'-files
head(nc2time(nfile))

library('ncdf4')
nc &lt;- nc_open(nfile)
head(nc2time(nc))

</code></pre>

<hr>
<h2 id='oceanmap'>
oceanmap - plot tools for 2D oceanographic data  
</h2><span id='topic+oceanmap'></span><span id='topic+oceanmap-package'></span>

<h3>Description</h3>

<p><code>oceanmap</code> is a plotting toolbox for oceanographic data.
Visualizing data is a crucial step in analyzing and exploring data. During the last two decades the statistical programming language R has become a major tool for data analyses and visualization across different fields of science. However, creating figures ready for scientific publication can be a tricky and time consuming task. 
</p>
<p>The <code>oceanmap</code> package provides some helpful functions to facilitate and optimize the visualization of geographic and oceanographic data, such as satellite and bathymetric data sets. Its plotting functions are written in a way that they do not require a large amount of their numerous arguments to be specified but still return nice plots. Its major functions are:
</p>
<p><b>Major functions:</b><br />
</p>

<ul>
<li><p><a href="#topic+plotmap">plotmap</a>: plots landmask as basis or overlay
</p>
</li>
<li><p><a href="#topic+v">v</a>: plots oceanographic data (fronts, SST, chla, bathymetry, etc.) from raster-objects, ncdf4- or gz-files
</p>
</li>
<li><p><a href="#topic+set.colorbar">set.colorbar</a>: adds a colorbar to current figure, allowing several placement methods
</p>
</li>
<li><p><a href="#topic+get.bathy">get.bathy</a>: download bahymetric data at user defined resolution from the NOAA ETOPO1 database
</p>
</li>
<li><p><a href="#topic+add.region">add.region</a>: generate region definitions to facilitate land mask and colorbar plotting using <a href="#topic+plotmap">plotmap</a> and <a href="#topic+v">v</a>
</p>
</li>
<li><p><a href="#topic+figure">figure</a> &amp; <a href="#topic+close_fig">close_fig</a>: generate and save graphic devices in flexible file formats (jpeg, png, eps, pdf and eps)
</p>
</li></ul>

<p><b>Getting Started</b><br />
Check out some examples of the principle functions, listed above.
</p>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>

<hr>
<h2 id='param_convert'>
converts byte data to absolte values or vise versa (<code>param_unconvert</code>)
</h2><span id='topic+param_convert'></span><span id='topic+param_unconvert'></span>

<h3>Description</h3>

<p>converts byte data as stored in <code>'.gz'</code>-files to absolte values (<code>param_convert</code>) or vise versa (<code>param_unconvert</code>) using the parameter_definitions-dataset. <code>param_convert</code> is used by <a href="#topic+readbin">readbin</a>, <code>param_unconvert</code> is used by <a href="#topic+writebin">writebin</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>param_convert(x,param)

param_unconvert(x,param)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="param_convert_+3A_x">x</code></td>
<td>

<p>vector, matrix or raster-object holding byte-data that that should be converted to absolute values (<code>param_convert</code>) or vise versa (<code>param_unconvert</code>). 
</p>
</td></tr>
<tr><td><code id="param_convert_+3A_param">param</code></td>
<td>

<p>Character string indicating parameter of the dataset to be treated. See <code>parameter_definitions</code> for available parameters.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

 <p><a href="#topic+param_unconvert">param_unconvert</a>, <a href="#topic+readbin">readbin</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>library('fields')
path &lt;- system.file("test_files", package="oceanmap")
gz.file &lt;- Sys.glob(paste0(path,'/*.gz'))[1] # load sample-'.gz'-files
param &lt;- name_split(gz.file)$parameter
print(param)

## converted data, according to param information
m &lt;- readbin(gz.file, Raster=FALSE) 
image.plot(m)

## byte data ("unconverted") according to param information, as stored in ".gz"files
bin &lt;- param_unconvert(m,param) 
image.plot(bin)

## reconverting byte data, according to param information
conv &lt;- param_convert(bin,param) 
image.plot(conv)

</code></pre>

<hr>
<h2 id='parameter_definitions'>
parameter definitions dataframe
</h2><span id='topic+parameter_definitions'></span>

<h3>Description</h3>

<p>a dataframe containing definitions of parameters to plot or to save by <a href="#topic+v">v</a>, <a href="#topic+readbin">readbin</a> and <a href="#topic+writebin">writebin</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(parameter_definitions)</code></pre>


<h3>Format</h3>

<p>data.frame
</p>


<h3>Value</h3>

<p>a dataframe with the following header, containing definitions of parameters to plot or to save by <a href="#topic+v">v</a>, <a href="#topic+readbin">readbin</a> and <a href="#topic+writebin">writebin</a>:
</p>
<p><code>param a b c log name1 unit pal1 minv maxv min max invalid_data_dc coast_dc land_dc no_data_dc</code>
</p>
<table>
<tr><td><code>param</code></td>
<td>

<p>character string indicating the keyword of a parameter.
</p>
</td></tr>
<tr><td><code>a</code>, <code>b</code>, <code>c</code></td>
<td>

<p>value for parameter parameter data conversion from/to byte data. (See <a href="#topic+param_convert">param_convert</a> and <a href="#topic+param_unconvert">param_unconvert</a>)
</p>
</td></tr>
<tr><td><code>log</code></td>
<td>

<p>whether a logarithmic formula should be applied for data conversion (0 for <code>FALSE</code> and 1 for <code>TRUE</code>; See <a href="#topic+param_convert">param_convert</a> and <a href="#topic+param_unconvert">param_unconvert</a>).
</p>
</td></tr>
<tr><td><code>name</code></td>
<td>

<p>character string indicating the long name of a parameter.
</p>
</td></tr>
<tr><td><code>unit</code></td>
<td>

<p>character string or bgroup statement indicating the parameter unit.
</p>
</td></tr>
<tr><td><code>pal1</code></td>
<td>

<p>default color map used by <code>v</code> calls on parameter related data.
</p>
</td></tr>
<tr><td><code>minv</code>, <code>maxv</code></td>
<td>

<p>default minimum and maximum z-value used by <code>v</code> calls on parameter related data.
</p>
</td></tr>
<tr><td><code>min</code>, <code>max</code></td>
<td>

<p>minimum and maximum byte-values to be considered when calculating absolute values.
</p>
</td></tr>
<tr><td><code>invalid_data_dc</code>, <code>coast_dc</code>, <code>land_dc &amp; no_data_dc</code></td>
<td>

<p>byte values used to mask invalid data, coast lines, land masses and missing data.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

<p><a href="#topic+v">v</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example
data(parameter_definitions)
head(parameter_definitions)

# selecting sea surface temperature parameter definition
parameter_definitions[parameter_definitions$param == "sst2",] 
</code></pre>

<hr>
<h2 id='plotmap'>
plots landmask of a defined region</h2><span id='topic+plotmap'></span><span id='topic+ggplotmap'></span>

<h3>Description</h3>

<p>plots the landmask of a region defined by a <code>region</code>-key word, georgraphical coordinates (<code>lon</code>gitude and <code>lat</code>itude), a raster- or <a href="raster.html#topic+extent">extent</a>-object. See <a href="#topic+add.region">add.region</a> to add and save new region definitions. Attention! Unlike <a href="#topic+add.region">add.region</a>, <code>plotmap</code> does not include colorbar placement (see: <a href="#topic+set.colorbar">set.colorbar</a>)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotmap(region=v_area, lon, lat, add=F, asp,
        grid=T, grid.res, resolution=0, 
        main, axes=T, axeslabels=axes, ticklabels=T, cex.lab=0.8, cex.ticks=0.8, 
        fill.land=T, col.land="grey", col.bg=NA, border='black', bwd=2, las=1, 
        v_area, xlim, ylim
        )

ggplotmap(region=v_area, lon=xlim, lat=ylim, add_to, asp, 
          grid=T, grid.res, resolution=0, 
          main, axes=T, axeslabels=axes, ticklabels=T,
          fill.land=T, col.land="grey", col.bg=NA, border='black', 
          col.scale = "black", bwd=1.5, v_area, xlim, ylim)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotmap_+3A_region">region</code>, <code id="plotmap_+3A_v_area">v_area</code></td>
<td>

<p>Character string identifying regions predefined by the <a href="#topic+region_definitions">region_definitions</a>-dataset, Raster* or Extent object (corresponds to <code>v_area</code> of the <a href="#topic+v">v</a>-function). If missing, region is derived from geographical coordinates, denoted by lat and lon. See <a href="#topic+add.region">add.region</a> to define new region definitions and <a href="#topic+delete.region">delete.region</a> to delete unproper region definitions.
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_lon">lon</code>, <code id="plotmap_+3A_xlim">xlim</code></td>
<td>

<p>Vector returning longitude coordinates of the area to be plotted.
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_lat">lat</code>, <code id="plotmap_+3A_ylim">ylim</code></td>
<td>

<p>Vector returning latitude coordinates of the area to be plotted.
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_add">add</code>, <code id="plotmap_+3A_add_to">add_to</code></td>
<td>

<p>whether the a the landmask should be added to an existent figure (default is <code>FALSE</code>) or an existing ggplot object, in case of
<code>ggplotmap</code>.
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_asp">asp</code></td>
<td>

<p>numeric, giving the aspect y/x-ratio of the y- and x-axes. See <a href="graphics.html#topic+plot.window">plot.window</a> for more details.
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_main">main</code></td>
<td>

<p>title to be plotted
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_axes">axes</code>, <code id="plotmap_+3A_axeslabels">axeslabels</code></td>
<td>

<p>whether axes and axes-labels (longitude and latitude) should be plotted (default is <code>TRUE</code>). 
<code>axes-labels</code> can be a single value or a vector of size two, representing values for x and y axis, respectively.
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_ticklabels">ticklabels</code></td>
<td>

<p>whether tick-labels should be added to the axes (default is <code>TRUE</code>). Can be a single value or a vector.
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_cex.lab">cex.lab</code></td>
<td>

<p>font size of axis labels
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_cex.ticks">cex.ticks</code></td>
<td>

<p>font size of tick labels
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_grid">grid</code></td>
<td>

<p>whether a grid should be plotted (default is <code>TRUE</code>)
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_grid.res">grid.res</code></td>
<td>

<p>resolution of the grid, in degrees (default is is derived from the region extent)
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_resolution">resolution</code></td>
<td>

<p>number that specifies the resolution with which to draw the map. Resolution 0 is the full resolution of the database [default]. Otherwise, just before polylines are plotted they are thinned: roughly speaking, successive points on the polyline that are within resolution device pixels of one another are collapsed to a single point (see the Reference for further details). Thinning is not performed if plot = FALSE or when polygons are drawn (fill = TRUE or database is a list of polygons).
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_bwd">bwd</code></td>
<td>

<p>width is of the axes bars (default is 1)
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_fill.land">fill.land</code></td>
<td>

<p>whether the a the landmask should be filled by a color (default is <code>TRUE</code>)
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_col.land">col.land</code></td>
<td>

<p>fill color of the landmask to be plotted (default is grey)
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_col.bg">col.bg</code></td>
<td>

<p>background color (ocean) to be plotted (default is NA)
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_border">border</code></td>
<td>

<p>country border color of the landmask to be plotted (default is black)
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_col.scale">col.scale</code></td>
<td>

<p>color of the map scale to be plotted around the map (default is black)
</p>
</td></tr>
<tr><td><code id="plotmap_+3A_las">las</code></td>
<td>
<p>numeric in {0,1,2,3}; the style of axis labels
</p>

<dl>
<dt>0:</dt><dd><p>always parallel to the axis [<em>default</em>],</p>
</dd>
<dt>1:</dt><dd><p>always horizontal,</p>
</dd>
<dt>2:</dt><dd><p>always perpendicular to the axis,</p>
</dd>
<dt>3:</dt><dd><p>always vertical.</p>
</dd>
</dl>

</td></tr>
</table>


<h3>Details</h3>

<p><code>plotmap</code> uses the <code>maps</code> and <code>maptools</code> functions to plot the landmask.
</p>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

 <p><code> <a href="#topic+v">v</a>, <a href="#topic+regions">regions</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>#### Example 1: plot landmask of the Mediterranean Sea
## a) by using longitude and latitude coordinates:
lon &lt;- c(-6, 37)
lat &lt;- c(30, 46)
figure(width=9.75,height=5.28)
plotmap(lon=lon, lat=lat, main="Mediterranean Sea")
plotmap(xlim=lon, ylim=lat, main="Mediterranean Sea")
ggobj &lt;- ggplotmap(xlim=lon, ylim=lat)
ggobj


## b) plot landmask of the Mediterranean Sea by using an extent-object:
# library('raster')
# ext &lt;- extent(lon, lat)
# plotmap(ext, main="Mediterranean Sea") # extent-object
# ggplotmap(ext)

## c) plot landmask of the Mediterranean Sea by using a raster-object:
# r &lt;- raster(ext)
# plotmap(r, main="Mediterranean Sea") # raster-object
# ggplotmap(r)

## d) plot landmask of the Mediterranean Sea by using a region label:
# plotmap('med4', main="Mediterranean Sea") # region-label
# regions() ## check preinstalled region label

## e) add landmask to an existing plot:
# plot(3.7008, 43.4079, xlim=lon, ylim=lat)
# plotmap(add=T)
# points(3.7008, 43.4079, pch=19)
# ggplotmap(xlim=lon, ylim=lat)

# library(ggplot2)
# ggobj &lt;- ggplotmap("lion") + 
#         geom_point(data=data.frame(x=3.7008, y=43.4079),aes(x,y),size=5,colour="blue")
# ggobj
## ggplotmaply(ggobj)
## f &lt;- ggplotmaply(ggobj)
## pos &lt;- as.data.frame(list(x=c(5.83, 4.91, 5.67, 5.91, 6.31, 6.37, 
##                               5.66, 5.54, 5.51, 5.67, 5.89, 5.97),
##                           y=c(42.89, 42.27, 42.42, 42.33, 42.1, 41.92, 
##                               41.74, 41.45, 41.32, 41.21, 41.04, 40.96)
##                          ))
## library(dplyr)
## library(plotly)
## f %&gt;% add_trace(data = pos,x = ~x, y= ~y,type='scatter',mode='marker',name="new pos") 



#### Example 2: subplots and some additional arguments of plotmap()
# par(mfrow=c(2, 1))
# plotmap('medw4', main="Western Mediterranean Sea",col.bg="darkblue")
# plotmap('medw4', main="Western Mediterranean Sea", bwd=3, border='grey', grid=FALSE)



#### Example 3: plotmap() and figure()
# do.save &lt;- FALSE ## open a plotting window
# figure("Gulf_of_Lions_extended", do.save=do.save, width=5, height=5, type="pdf")
# plotmap("lion",col.bg='darkblue',grid=FALSE)
# close_fig(do.save)

## now resize figure manually and get new figure dimensions:
# width &lt;- dev.size()[1]
# height &lt;- dev.size()[2]

# do.save &lt;- TRUE ## do NOT open a plotting window, but save figure internally
# figure("Gulf_of_Lions_extended", do.save=do.save, width=width, height=height, type="pdf")
# plotmap("lion",col.bg='darkblue',grid=FALSE)
# close_fig(do.save)


#### Example 4: between hemispheres
# par(mfrow=c(2,1))
# plotmap(lon=c(-180, 180), lat=c(-80, 80), main="map from West to East")
# plotmap(lon=c(0, 360), lat=c(-80, 80), main="map from West to East")
# plotmap(lon=c(-360, 00), lat=c(-80, 80), main="map from West to East") # same as before

#### Example 5: plot bathymetry and topography of the western Mediterranean Sea
#get.bathy("medw4",visualize=T,terrain=T,res=3)
#get.bathy("medw4",visualize=T,terrain=F,res=3,levels=c(200,2000)) # show contours
#get.bathy("lion",visualize=T,terrain=F,res=3,levels=c(200,2000),v_image=F) # show only contours

#### Example 6: testing some additional arguments
# lon &lt;- c(-180,200); lat &lt;- c(-80,90); 
# ext &lt;- extent(lon, lat)
# plotmap(ext, border=NA, bwd=NA, grid=FALSE, col.land = "#9ac0cd",axes=FALSE)

</code></pre>

<hr>
<h2 id='raster2matrix'>
Convert Raster layer to a matrix or array</h2><span id='topic+raster2matrix'></span><span id='topic+raster2array'></span>

<h3>Description</h3>

<p><code>raster2matrix</code> converts a raster layer to a matrix or array. Used by <a href="#topic+readbin">readbin</a> and <a href="#topic+writebin">writebin</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>raster2matrix(RasterLayer)

raster2array(RasterLayer)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="raster2matrix_+3A_rasterlayer">RasterLayer</code></td>
<td>

<p>raster layer to be converted.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library('raster')
path &lt;- system.file("test_files", package="oceanmap")
gz.files &lt;- Sys.glob(paste0(path,'/*.gz')) # load sample-'.gz'-files
check_gzfiles(folder=path) # return file summary-table

raster.file &lt;- readbin(gz.files[1]) # loading gz-file as raster-layer
image(raster.file)

## Example 1: converting single raster layer to matrix
image(as.matrix(raster.file)) # unflipped conversion
m &lt;- raster2matrix(raster.file) # converting raster-layer to matrix
image(m)

## Example 2: converting double raster layer to an array
stack.file &lt;- stack(raster.file,raster.file)
image(as.array(stack.file)[,,1]) # unflipped conversion
a &lt;- raster2array(stack.file) # converting raster-layer to array (works also with raster2matrix)
image(a[,,1])
</code></pre>

<hr>
<h2 id='readbin'>
Returns <code>'.gz'</code>-file as matrix or raster-object</h2><span id='topic+readbin'></span>

<h3>Description</h3>

<p>Returns <code>'.gz'</code>-file as <a href="base.html#topic+matrix">matrix</a> or <a href="raster.html#topic+raster">raster</a>-object.</p>


<h3>Usage</h3>

<pre><code class='language-R'>readbin(filename, area, Image = F, byte = F, Raster = T)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readbin_+3A_filename">filename</code></td>
<td>

<p>Character string indicating search criteria for the <code>'.gz'</code>-file of interest. Only <code>'.gz'</code>-files with valid filenames can be read, consisting of:
</p>
<p><code>area, source, parameter, resolution, timestep, date1, date2</code> and <code>option</code>-criteria, separated by an underscore with only <code>option</code> being aligned by a point and ending with <code>'.gz'</code>, e.g.:
</p>
<p><code>area_source_parameter_resolution_timestep_date1_date2.option.gz</code>.
</p>
<p>See <a href="#topic+region_definitions">region_definitions</a> for valid area- and <a href="#topic+parameter_definitions">parameter_definitions</a> for valid <code>parameter</code>-values, respecively.
</p>
</td></tr>
<tr><td><code id="readbin_+3A_image">Image</code></td>
<td>

<p>whether the a the <code>'.gz'</code>-file should be plotted immediately using <a href="fields.html#topic+image.plot">image.plot</a>-function of the <a href="vctrs.html#topic+fields">fields</a>-package (default is <code>FALSE</code>)
</p>
</td></tr>
<tr><td><code id="readbin_+3A_byte">byte</code></td>
<td>

<p>whether the a the data of the <code>'.gz'</code>-file should be returned unconverted as a byte-values (default is <code>FALSE</code>)
</p>
</td></tr>
<tr><td><code id="readbin_+3A_raster">Raster</code></td>
<td>

<p>whether the a the data of the <code>'.gz'</code>-file should be returned in a <a href="raster.html#topic+raster">raster</a>-object (default is <code>TRUE</code>)
</p>
</td></tr>
<tr><td><code id="readbin_+3A_area">area</code></td>
<td>

<p>Character string identifying the region that should be extracted. If missing, region is derived from the <code>'.gz'</code>-filename. 
See <a href="#topic+region_definitions">region_definitions</a> for area definitions and use <a href="#topic+add.region">add.region</a> to add new regions.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

 <p><a href="#topic+writebin">writebin</a>, <a href="#topic+regions">regions</a>, <a href="raster.html#topic+crop">crop</a>, <a href="#topic+raster2matrix">raster2matrix</a>, <a href="#topic+param_convert">param_convert</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>### Example: read and plot '.gz'-file
path &lt;- system.file("test_files", package="oceanmap")
check_gzfiles(folder=path) # return file summary-table
gz.files &lt;- Sys.glob(paste0(path,'/*.gz')) # load sample-'.gz'-files

### all manual:
obj &lt;- readbin(gz.files[2],area='lion')
obj
ticks &lt;- seq(20,30,5)
data('cmap')
image(obj,zlim=range(ticks),col=cmap$jet)
plotmap('lion',add=TRUE) # add landmask
#set.colorbar(ticks=ticks,cb.title='cb.title',cb.xlab='cb.xlab')

### using v:

## ticks set by adaptive.vals
v(obj,varname="sst2",cb.title='cb.title',cb.xlab='cb.xlab') 

## ticks set by parameter definition
v(obj,varname="sst2",cb.title='cb.title',cb.xlab='cb.xlab',adaptive.vals=FALSE) 

### extracting subregion:
obj &lt;- readbin(gz.files[2])
area.extent &lt;- extent(c(5,10,35,40))
subarea &lt;- crop(obj,area.extent)
# v(subarea)

## getting average value:
mean(subarea[,],na.rm=TRUE)
</code></pre>

<hr>
<h2 id='region_definitions'>
region definitions dataframe
</h2><span id='topic+region_definitions'></span><span id='topic+region_definitions_bkp'></span>

<h3>Description</h3>

<p>dataset providing spatial extent and color bar placement information by a region-keyword  in later related function-calls (see: <a href="#topic+v">v</a>, <a href="#topic+plotmap">plotmap</a> and <a href="#topic+regions">regions</a>). Information consists of a region-keyword, -longname, its spatial extent (longitudes and latitudes), grid resolution, as well as default colorbar position and figure size.
Region definitions can be added, backed up or restored by <a href="#topic+add.region">add.region</a> or deleted by calling <a href="#topic+delete.region">delete.region</a>.
</p>
<p><b>ATTENTION!</b> When reinstalling or updating the oceanmap package, previous region definitions are getting lost! It is therefore highly recommanded to take and restore own backups (see: <code>backup</code> and <code>restore</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(region_definitions)</code></pre>


<h3>Format</h3>

<p>data.frame
</p>


<h3>Value</h3>

<p>dataframe with the following header, containing the summary information of the region specified:
</p>
<p><code>label name latn lats lonw lone ncol nrow px cbx1 cbx2  cby1  cby2 gradient oticks figxdim figydim grid.res</code>
</p>
<table>
<tr><td><code>label</code></td>
<td>

<p>region-keywords
</p>
</td></tr>
<tr><td><code>name</code></td>
<td>

<p>the long name of the region
</p>
</td></tr>
<tr><td><code>latn &amp; lats</code></td>
<td>

<p>northern and southern most latitude of the region
</p>
</td></tr>
<tr><td><code>lonw &amp; lone</code></td>
<td>

<p>western and eastern most longitude of the region
</p>
</td></tr>
<tr><td><code>ncol</code>, <code>nrow &amp; px</code></td>
<td>

<p>default matrix size per region described by the number of columns, rows and pixels. <b>ATTENTION!</b>! Regions of the same spatial extent but different default (matrix-) resolution may cause errors when reading or writing '.gz'-files and must therefore be distinguished by different keywords.
</p>
</td></tr>
<tr><td><code>cbx1 &amp; cbx2</code></td>
<td>

<p>x-coordinates for colorbar
</p>
</td></tr>
<tr><td><code>cby1 &amp; cby2</code></td>
<td>

<p>y-coordinates for colorbar
</p>
</td></tr>
<tr><td><code>gradient</code></td>
<td>

<p>the color-<code>gradient</code> of the colorbar (<code>x</code> for horizontal, and <code>y</code> for vertical)
</p>
</td></tr>
<tr><td><code>oticks</code></td>
<td>

<p>the margin where the colorbar ticks should be plotted, relative to the colorbar rectangle (<code>'l'</code> left, <code>'r'</code> right and <code>'b'</code> for bottom)
</p>
</td></tr>
<tr><td><code>figxdim &amp; figydim</code></td>
<td>

<p>the region-specific default plot device size (width and height in inches)
</p>
</td></tr>
<tr><td><code>grid.res</code></td>
<td>

<p>the default grid resolution in degrees
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

<p>See <code><a href="#topic+add.region">add.region</a></code> to add new, backup or restore region definitions, and <code><a href="#topic+plotmap">plotmap</a></code> for basic landmask plots</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(region_definitions)
head(region_definitions)
region_definitions$label
# ?region_definitions

# figure(width=15,height=15)
# par(mfrow=c(5,6))
# for(n in region_definitions$label) plotmap(region = n,main=n)


# Mediterranean Sea with a spatial resolution of 4km (e.g. MODIS-Aqua)
region_definitions[region_definitions$label == 'med4',]

# Mediterranean Sea with a spatial resolution of 9km (e.g. dekkar)
region_definitions[region_definitions$label == 'med9',]

# plotting same landmasks by different region-keywords
plotmap('med4')
plotmap('med9')


## Example for selecting wrong area definition when saving files
path &lt;- system.file("test_files", package="oceanmap")
gz.files &lt;- Sys.glob(paste0(path,'/med4*.gz')) # load sample-med4'.gz'-files

fname &lt;- name_split(gz.files[1])
param &lt;- fname$parameter
gz &lt;- readbin(gz.files[1])
dim(gz)
v(gz.files[1])

## reset region name
# fname$area &lt;- 'med9'
# fname &lt;- name_join(fname)
# writebin(gz,fname,param=param)
# v(fname,folder=".")
# system(paste('rm', fname))
</code></pre>

<hr>
<h2 id='region2SpatialPolygon'>
creates polygon from raster extent
</h2><span id='topic+region2SpatialPolygon'></span><span id='topic+extent2SpatialPolygon'></span>

<h3>Description</h3>

<p>creates polygon from raster extent
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extent2SpatialPolygon(ext)
region2SpatialPolygon(region,v_area=region)

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="region2SpatialPolygon_+3A_ext">ext</code></td>
<td>

<p>raster extent or vector of region limits (xmax, xmax, ymin, ymax)
</p>
</td></tr>
<tr><td><code id="region2SpatialPolygon_+3A_region">region</code>, <code id="region2SpatialPolygon_+3A_v_area">v_area</code></td>
<td>

<p>region identifier as defined in the region_definitions file.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>r &lt;- regions("lion")
ext &lt;- extent(c(r$xlim,r$ylim))
extent2SpatialPolygon(ext)

region2SpatialPolygon("lion")
</code></pre>

<hr>
<h2 id='regions'>
Returns two-row summary table of a specified region.</h2><span id='topic+regions'></span>

<h3>Description</h3>

<p>Reorganizes summary information of a specified region from the <a href="#topic+region_definitions">region_definitions</a>set into a two-row dataframe.
Region definitions can be added, backed up or restored by <a href="#topic+add.region">add.region</a> or deleted by calling <a href="#topic+delete.region">delete.region</a>.
</p>
<p><b>ATTENTION!</b> When reinstalling or updating the oceanmap package, previous region definitions are getting lost! It is therefore highly recommanded to take and restore own backups (see: <code>backup</code> and <code>restore</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>regions(label)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="regions_+3A_label">label</code></td>
<td>

<p>Character string indicating the name of the region of interest. If missing, list of available regions in the <a href="#topic+region_definitions">region_definitions</a>-dataset will be returned by a error message. 
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a two-row dataframe with the following header, containing the summary information of the region specified:
</p>
<p><code>xlim</code> <code>ylim</code> <code>dim</code> <code>name</code> <code>cbx</code> <code>cby</code> <code>align</code> <code>gradient</code> <code>figdim</code> <code>grid.res</code>
</p>
<table>
<tr><td><code>xlim &amp; ylim</code></td>
<td>

<p>the spatial extent of the region
</p>
</td></tr>
<tr><td><code>dim</code></td>
<td>

<p>the number of grid points for both x &amp; y-dimension
</p>
</td></tr>
<tr><td><code>name</code></td>
<td>

<p>the long name of the region
</p>
</td></tr>
<tr><td><code>cbx &amp; cby</code></td>
<td>

<p>x &amp; y-coordinates for colorbar
</p>
</td></tr>
<tr><td><code>align</code></td>
<td>
<p>a vector defining the color-<code>gradient</code> of the colorbar (<code>x</code> for horizontal, and <code>y</code> for vertical), as well as the <code>margin</code> where the colorbar ticks should be plotted, relative to the colorbar rectangle (<code>'l'</code> left, <code>'r'</code> right and <code>'b'</code> for bottom)
</p>
</td></tr>
<tr><td><code>figdim</code></td>
<td>

<p>the region-specific default plot device size
</p>
</td></tr>
<tr><td><code>grid.res</code></td>
<td>

<p>the default grid resolution in degrees
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

 <p><code> <a href="#topic+v">v</a>, <a href="#topic+plotmap">plotmap</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example: return summary table for the Gulf of Lions
data('region_definitions')
region_definitions[region_definitions$label=='lion',] # select raw region data summary 
regions('lion') # return formatted summary table
</code></pre>

<hr>
<h2 id='set.colorbar'>
Adds colorbar to an extisting plot device
</h2><span id='topic+set.colorbar'></span><span id='topic+set.colorbarp'></span>

<h3>Description</h3>

<p>Adds colorbar to an extisting plot device. If position vectors are not provided, the user will be asked to define the colorbar placement by the mouse cursor.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set.colorbar(cbx, cby, cbpos, cbline=0, pal='jet', zlim, ticks=1:10, labels=ticks, 
             gradient, oticks, cb.title="", cb.xlab="", font=1, cex=1, 
             cex.cb.title=0.9, cex.cb.xlab=0.8, cex.cb.ticks=0.7, cb.ticks.srt=90, 
             cb.ticks.length, cb.ticks.ypos, cb.ticks.lwd=1, 
             integer=F, cb.xlab.line=0, total.reg, cbxp, cbyp,...)
             
set.colorbarp(cbxp, cbyp, total.reg=T, year_bar=F, pal="jet",...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set.colorbar_+3A_cbx">cbx</code>, <code id="set.colorbar_+3A_cby">cby</code></td>
<td>

<p>(<code>set.colorparp</code>-arguments) 
the horizontal and vertical limits of the colorbar. If missing, the user will be asked for manual colorbar placement.
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_cbxp">cbxp</code>, <code id="set.colorbar_+3A_cbyp">cbyp</code></td>
<td>

<p>(<code>set.colorparp</code>-arguments)
the horizontal and vertical limits of the colorbar in percent. If missing, the user will be asked for manual colorbar placement.
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_cbpos">cbpos</code></td>
<td>

<p>letter (&quot;b&quot;, &quot;l&quot;, &quot;t&quot;, &quot;r&quot;) indicating the position of the colorbar (bottom, left, top, right). Overwrites <code>cbx</code> and <code>cby</code> values.
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_cbline">cbline</code></td>
<td>

<p>distance to default location of the colorbar, starting at 0.
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_total.reg">total.reg</code></td>
<td>

<p>(<code>set.colorparp</code>-argument)
if colorbar placement is relative to current subplot or entire figure region.
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_year_bar">year_bar</code></td>
<td>

<p>whether to plot a colorbar with monthly ticks (by default <code>FALSE</code>)
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_pal">pal</code></td>
<td>

<p>color map to be plotted (default is <code>'jet'</code> for direct calls). See <a href="#topic+cmap">cmap</a> for available color maps and <a href="#topic+parameter_definitions">parameter_definitions</a> for predefined colormaps of different parameters (for internal function calls, e.g. <a href="#topic+v">v</a>))
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_zlim">zlim</code></td>
<td>

<p>(optional) value limits of the color bar. Overwrites ticks if ticks are povided.
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_ticks">ticks</code></td>
<td>

<p>the points at which tick-marks are to be drawn (default is 1:10). Non-finite (infinite, NaN or NA) values are omitted.
Gets verwritten by zlim if povided.
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_labels">labels</code></td>
<td>

<p>character or expression vector of labels to be placed at the tickpoints. (default equals <code>ticks</code>-values.)
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_gradient">gradient</code></td>
<td>

<p>whether to have a horizontal (x) or vertical (y) color gradient.
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_oticks">oticks</code></td>
<td>

<p>the margin where to put the colorbar ticks relative to the colorbar rectangle (<code>'l'</code> left, <code>'r'</code> right and <code>'b'</code> for bottom;
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_cb.title">cb.title</code></td>
<td>

<p>character string indicating the title of the colorbar (default is set to date information/empty string if date information is missing.)
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_cb.xlab">cb.xlab</code></td>
<td>

<p>character string indicating the x-axis label of the colorbar.
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_font">font</code></td>
<td>

<p>Integer specifying font to use for text.
1=plain [default], 2=bold, 3=italic, 4=bold italic, 5=symbol 
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_cb.xlab.line">cb.xlab.line</code></td>
<td>

<p>line of x-axis colorbar label
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_cex">cex</code>, <code id="set.colorbar_+3A_cex.cb.title">cex.cb.title</code>, <code id="set.colorbar_+3A_cex.cb.xlab">cex.cb.xlab</code>, <code id="set.colorbar_+3A_cex.cb.ticks">cex.cb.ticks</code></td>
<td>

<p><em>cex</em>: general font size, used as reference for colorbar labels and title
<em>cex.cb.xlab</em>: font size of the x-axis label of the colorbar
<em>cex.cb.title</em>: font size of the title of the colorbar
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_cb.ticks.srt">cb.ticks.srt</code>, <code id="set.colorbar_+3A_cb.ticks.length">cb.ticks.length</code>, <code id="set.colorbar_+3A_cb.ticks.ypos">cb.ticks.ypos</code>, <code id="set.colorbar_+3A_cb.ticks.lwd">cb.ticks.lwd</code></td>
<td>

<p>rotation, length, relative y-position and line width of colorbar ticks 
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_integer">integer</code></td>
<td>

<p>(default is <code>FALSE</code>).
</p>
</td></tr>
<tr><td><code id="set.colorbar_+3A_...">...</code></td>
<td>

<p>additional arguments to be passed to <a href="graphics.html#topic+text">text</a> or <code>set.colorpar</code>
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>set.colobar</code> adds a colorbar to the current plot device. If colorbar positions are missing (<code>cbx</code>, <code>cby</code>), the user will be asked for manual placement. <code>ticks</code> and tick-<code>labels</code> should correspond to <code>zlim</code>-values of the plot. <code>pal</code> defines the colormap and should equal <code>col</code> of the selected plot.
</p>


<h3>Value</h3>

<p>a list of colorbar definition vectors: <code>oticks, gradient, cbx</code> and <code>cby</code>. See function argmuments for more details.
</p>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example 1: plot colorbars manually
par(mar=c(8,8,8,8))
plot(0.5,0.5,xlim=c(0,1),ylim=c(0,1))
set.colorbar(cbx=c(0, 1), cby=c(-.3, -.4)) # bottom
set.colorbar(cby=c(0, 1), cbx=c(-.4, -.3)) # left
set.colorbar(cbx=c(0, 1), cby=c(1.2, 1.3)) # top
set.colorbar(cby=c(0, 1), cbx=c(1.2, 1.3)) # right 


## Example 2: use cbpos
par(mar=c(8,8,8,8))
plot(0.5,0.5,xlim=c(0,1),ylim=c(0,1))
set.colorbar(cbpos='b') # bottom
set.colorbar(cbpos='l') # left
set.colorbar(cbpos='t') # top
set.colorbar(cbpos='r') # right 


## Example 3: interactive placement
# par(mar=c(8,8,8,8))
# plot(0.5,0.5,xlim=c(0,1),ylim=c(0,1))
# cb &lt;- set.colorbar() # interactive
# plot(0.5,0.5,xlim=c(0,1),ylim=c(0,1))
# set.colorbar(cbx=cb$cbx, cby=cb$cby) # reuse stored colorbar positions


</code></pre>

<hr>
<h2 id='SpatialCircle'>
Creates a circle of radius r around a specified point.
</h2><span id='topic+SpatialCircle'></span>

<h3>Description</h3>

<p>Returns a SpatialLines object, that defines a circle of radius r around a specified point.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SpatialCircle(x,y,r,n=100,proj4str)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SpatialCircle_+3A_x">x</code>, <code id="SpatialCircle_+3A_y">y</code></td>
<td>

<p>x and y coordinates of the circle
</p>
</td></tr>
<tr><td><code id="SpatialCircle_+3A_r">r</code></td>
<td>

<p>radius (of the same scale as plotting window)
</p>
</td></tr>
<tr><td><code id="SpatialCircle_+3A_n">n</code></td>
<td>

<p>precision indicator of the circle.
</p>
</td></tr>
<tr><td><code id="SpatialCircle_+3A_proj4str">proj4str</code></td>
<td>

<p>projection string.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

<p><a href="#topic+get.avg.bathy">get.avg.bathy</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Example 1: load &amp; plot bathymetry of the Baltic Sea, defined by longitudes and latidtues
lon &lt;- c(9, 31)
lat &lt;- c(53.5, 66)
# bathy &lt;- get.bathy(lon=lon, lat=lat, main="Baltic Sea", cbpos='r')
plotmap(lon=lon, lat=lat)
spc &lt;- SpatialCircle(x= 20,y = 57.5,r=1)
plot(spc,add=TRUE)
# get.avg.bathy(c(20,57.5), radius = 1, bathy = bathy)
# get.avg(c(20,57.5), radius = 1, unit="km",raster = bathy)

</code></pre>

<hr>
<h2 id='v'>
Plotting spatial data</h2><span id='topic+v'></span><span id='topic+v.plot'></span><span id='topic+v.bathy'></span><span id='topic+v.gz'></span><span id='topic+v.raster'></span><span id='topic+v+2Cbathy-method'></span><span id='topic+v+2CRasterBrick-method'></span><span id='topic+v+2CRasterLayer-method'></span><span id='topic+v+2CRasterStack-method'></span><span id='topic+v+2Ccharacter-method'></span><span id='topic+v+2Cgz-method'></span><span id='topic+v+2Cnc-method'></span><span id='topic+v+2Cncdf4-method'></span>

<h3>Description</h3>

<p>Plots spatial data (e.g. 2D oceanographic data). Valid input data are objects of class 'Raster' ('RasterLayer', 'RasterStack' or 'RasterBrick'), 'ncdf4' (already loaded netcdf files) or a character strings indicating <code>'bathy'</code>metric data, 'gz'- or '.nc-files' (netcdf).
See also <a href="#topic+name_split">name_split</a> for further information on <code>'.gz'</code>-file nomenclature. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>
## S4 method for signature 'bathy'
v(obj, v_area, lon, lat, resolution=4, keep=F, 
  savename.bathy, folder.bathy=".", adaptive.vals=T, cb.title, show.colorbar=T,...)

## S4 method for signature 'nc'
v(obj, varname, t=1, layer=t, adaptive.vals=T, dates, 
  cb.xlab=varname, show.colorbar=T ,...)

## S4 method for signature 'ncdf4'
v(obj, varname, t=1, layer=t, adaptive.vals=T, dates, 
  cb.xlab=varname, show.colorbar=T, ...)

## S4 method for signature 'RasterLayer'
v(obj, varname, t=1, layer=t, ...)

## S4 method for signature 'RasterBrick'
v(obj, varname, t=1, layer=t,  ...)

## S4 method for signature 'RasterStack'
v(obj, varname, t=1, layer=t,  ...)

## S4 method for signature 'gz'
v(obj, v_area, adaptive.vals=F, show.colorbar=T,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="v_+3A_obj">obj</code></td>
<td>

<p>object of class 'Raster' ('RasterLayer', 'RasterStack' or 'RasterBrick'), '<code>ncdf4</code>' or a character string indicating , <code>'bathy'</code>metric data, <code>'.gz'</code>- or <code>'.nc'</code>-files to plot. 
</p>
</td></tr>
<tr><td><code id="v_+3A_v_area">v_area</code></td>
<td>

<p>character string identifying the region that should be plotted, or in case of <code>obj == 'bathy'</code>, also a Raster* or Extent object. If missing, region is derived from the <code>'.gz'</code>-filename. 
See <a href="#topic+region_definitions">region_definitions</a> for area definitions and use <a href="#topic+add.region">add.region</a> to add new regions.
</p>
</td></tr>
<tr><td><code id="v_+3A_adaptive.vals">adaptive.vals</code></td>
<td>

<p>sets minimum and maximum z-value according to the <code>'.gz'</code>-files value range. (<b>ATTENTION!</b> <code>minv</code> and <code>maxv</code> are disregarded if set!).
(default is <code>TRUE</code> for non-<code>'.gz'</code>-files. If <code>FALSE</code> or not set, default value from the <a href="#topic+parameter_definitions">parameter_definitions</a>-dataset will be applied according to the <code>param</code>-value.
</p>
</td></tr>
<tr><td><code id="v_+3A_t">t</code>, <code id="v_+3A_layer">layer</code></td>
<td>

<p>layer/time stemp to select in multi-layer files/objects (e.g. ncdf4, RasterStack).
</p>
</td></tr>
<tr><td><code id="v_+3A_dates">dates</code></td>
<td>

<p>vector of type 'character' indicating dates per layer, used to define the title of the colorbar. Argument is omitted for <code>'.gz'</code>-files but date-information is derived from the filename. For <code>'.nc'</code>-files or 'ncdf4'-objects, date information is derived from the time-vector. For <a href="raster.html#topic+raster">raster</a>-objects the layer name is applied.
</p>
</td></tr>
<tr><td><code id="v_+3A_varname">varname</code></td>
<td>

<p>character string indicating the name of the variable to plot. For <code>'.nc'</code>-files or 'ncdf4'-objects, this name must correspond to a variable name defined in the file/object. Sets also colorbar-title for non-<code>'.gz'</code>-files if <code>cb.xlab</code> is missing.
</p>
</td></tr>
<tr><td><code id="v_+3A_cb.title">cb.title</code></td>
<td>

<p>character string indicating the title of the colorbar (default is set to date information/empty string if date information is missing.)
</p>
</td></tr>
<tr><td><code id="v_+3A_cb.xlab">cb.xlab</code></td>
<td>

<p>character string indicating the x-axis label of the colorbar and <code>cb.xlab.line</code> its placement line (default is 0). If not defined, it will be set to <code>varname</code> for <a href="raster.html#topic+raster">raster</a>, <code>ncdf4</code>-objects and <code>'.nc'</code>-files or for <code>'.gz'</code>-files to a predefined title in the <a href="#topic+parameter_definitions">parameter_definitions</a>-dataset according to the <code>param</code>-value.
</p>
</td></tr>
<tr><td><code id="v_+3A_lon">lon</code></td>
<td>

<p>Vector returning longitude coordinates of the area to be plotted, only valable for <code>obj == 'bathy'</code>.
</p>
</td></tr>
<tr><td><code id="v_+3A_lat">lat</code></td>
<td>

<p>Vector returning latitude coordinates of the area to be plotted, only valable for <code>obj == 'bathy'</code>.
</p>
</td></tr>
<tr><td><code id="v_+3A_resolution">resolution</code></td>
<td>

<p>resolution of the bathymetric grid, in minutes (default is 4), only valable for <code>obj == 'bathy'</code>.
</p>
</td></tr>
<tr><td><code id="v_+3A_keep">keep</code></td>
<td>

<p>whether to write the data downloaded from NOAA into a file (default is FALSE), only valable for <code>obj == 'bathy'</code>.
</p>
</td></tr>
<tr><td><code id="v_+3A_savename.bathy">savename.bathy</code></td>
<td>

<p>savename for the bathymetric data file, if not specified set to type 'bathy_lon-lat_res.resolution.dat' or 'bathy_v_area_res.resolution.dat', only valable for <code>obj == 'bathy'</code>.
</p>
</td></tr>
<tr><td><code id="v_+3A_folder.bathy">folder.bathy</code></td>
<td>

<p>directory where bathymetric data should be saved (default is current working directory), only valable for <code>obj == 'bathy'</code>.
</p>
</td></tr>
<tr><td><code id="v_+3A_show.colorbar">show.colorbar</code></td>
<td>

<p>weather a colorbar should be plotted for image plots(default is <code>T</code>).
</p>
</td></tr>
<tr><td><code id="v_+3A_...">...</code></td>
<td>

<p>additional arguments to be passed:
</p>

<dl>
<dt><code>region</code></dt><dd>
<p>see <code>v_area</code>.
</p>
</dd>
<dt><code>minv, maxv</code></dt><dd>
<p>minimum and maximum z-value to be plotted. If not set, default value from the <a href="#topic+parameter_definitions">parameter_definitions</a>-dataset will be applied. Argument is overwritten by <code>adaptive.vals</code> and <code>zlim</code>.
</p>
</dd>
<dt><code>replace.na</code></dt><dd>
<p>whether missing values should be replaced by minimum values (default is <code>FALSE</code>.)
</p>
</dd>
<dt><code>param</code></dt><dd>
<p>character string indicating the parameter name for the dataset treatment. See <code>parameter_definitions</code> for available parameters. For <code>'.gz'</code>-files, <code>param</code> is derived from the filename. For non-<code>'.gz'</code>-files this value is non-obligatory, but can replace the <code>varname</code>-argument and vise versa. See examples.
</p>
</dd>
<dt><code>main</code></dt><dd>
<p>an overall title for the plot: see <a href="graphics.html#topic+title">title</a>.
</p>
</dd>
<dt><code>cbpos</code></dt><dd>
<p>letter (&quot;b&quot;, &quot;l&quot;, &quot;t&quot;, &quot;r&quot;) indicating the position of the colorbar (bottom, left, top, right). Overwrites <code>cbx</code> and <code>cby</code> values.
</p>
</dd>
<dt><code>cbx</code></dt><dd>
<p>the horizontal limits (x1, x2) of the colorbar. If missing and the value can not be reconstructed by the region information (e.g. <code>v_area</code>, <code>'.gz'</code>-file), the user will be asked for manual colorbar placement.
</p>
</dd>
<dt><code>cby</code></dt><dd>
<p>the vertical limits (y1, y2) of the colorbar. If missing and the value can not be reconstructed by the region information (e.g. <code>v_area</code>, <code>'.gz'</code>-file), the user will be asked for manual colorbar placement.
</p>
</dd>
<dt><code>nticks</code></dt><dd>
<p>number of tick marks for the colorbar (default is 5).
</p>
</dd>
<dt><code>pal</code></dt><dd>
<p>color map to be plotted (default is the 'jet'-colormap, or in case of <code>'.gz'</code>-files derived from the <a href="#topic+parameter_definitions">parameter_definitions</a>-dataset. See <a href="#topic+cmap">cmap</a> for available color maps and <a href="#topic+parameter_definitions">parameter_definitions</a> for predefined colormaps for different parameters.)
</p>
</dd>
<dt><code>sidelabels</code></dt><dd>
<p>whether an additional y-axis label and title should be added to the plot device (default is <code>FALSE</code>). If <code>TRUE</code>, y-axis label is defined by <code>Ylab</code>, the additional title is derived from the <code>date</code>-information and gives the month information.
</p>
</dd>
<dt><code>Ylab</code></dt><dd>
<p>an additional title for the y axis (default is date information), only used when <code>sidelabels</code> is set <code>TRUE</code>. Default value is year-information.
</p>
</dd>
<dt><code>axeslabels</code></dt><dd>
<p>whether axeslabels should be shown (default is <code>TRUE</code>, set as 'longitude' and 'latitude')
</p>
</dd>
<dt><code>subplot</code></dt><dd>
<p>whether <code>'.gz'</code>-file will be plotted as a sub plot to an existing plot device (default is <code>FALSE</code>; see: <a href="graphics.html#topic+par">par</a>)
</p>
</dd>
<dt><code>width, height</code></dt><dd><p>the width and height of the plotting window, in inches. For <code>'.gz'</code>-files, default values are derived from the <code>region</code>-name as indicated by the filename. See <a href="#topic+region_definitions">region_definitions</a> for predescribed definitions and use <a href="#topic+add.region">add.region</a> to add new region definitions.
</p>
</dd>
<dt><code>figdim</code></dt><dd>
<p>numeric vector indicating the <code>width</code> and <code>height</code> of the plot device in inches. For <code>'.gz'</code>-files, default values are derived from the <code>region</code>-name as indicated by the filename. Value is overwritten if both, <code>width</code> and <code>height</code> are provided. See <a href="#topic+region_definitions">region_definitions</a> for predescribed definitions and use <a href="#topic+add.region">add.region</a> to add new region definitions.
</p>
</dd>
<dt><code>xpos</code></dt><dd>
<p>integer: initial position of the top left corner of the figure window on the pc-screen, given in pixels. Negative values are from the opposite corner. (default is -1). Disregarded under Mac OS and if <code>Save</code> is set <code>TRUE</code>.
</p>
</dd>
<dt><code>Save</code></dt><dd>
<p>whether the a plot device should be saved automatically as an image file of type <code>fileformat</code> in a folder specified by <code>plotfolder</code> (default is <code>FALSE</code>)
</p>
</dd>
<dt><code>plotfolder</code></dt><dd>
<p>directory where images should be saved (default is current working directory).
</p>
</dd>
<dt><code>plotname</code></dt><dd>
<p>the name of the output file(s). If not set, value will be derived from the provided file information (For <code>'.gz'</code>-files, default <code>plotname</code> is equal to the <code>'.gz'</code>-filename, replacing the <code>'.gz'</code>-fileformat-suffix with the defined image-<code>fileformat</code>.
</p>
</dd>
<dt><code>fileformat</code></dt><dd>
<p>fielformat of image file to be saved (only <code>png</code> and <code>eps</code> are accepted; default is <code>png</code>).
</p>
</dd>
<dt><code>suffix</code></dt><dd>
<p>suffix to be added to the image filename, before the filetype specification (e.g. '...suffix.png').
</p>
</dd>
<dt><code>v_image</code></dt><dd>
<p>whether an image-plot should be plotted (default is <code>TRUE</code>)
</p>
</dd>
<dt><code>v_contour</code></dt><dd>
<p>whether <code>contour</code> lines should be plotted (default is <code>FALSE</code>). If <code>levels</code> are specified, <code>v_contour</code> is set <code>TRUE</code>.
</p>
</dd>
<dt><code>levels</code></dt><dd>
<p>numeric vector of levels at which to draw contour lines.
</p>
</dd>
<dt><code>contour.labels</code></dt><dd> 
<p>a vector giving the labels for the contour lines. By default levels are used as labels.
</p>
</dd>
<dt><code>v_arrows</code></dt><dd>
<p>whether current or wind vectors should be plotted (default is <code>TRUE</code>; Argument is disregarded for non-<code>.gz</code>-files and omitted if non current or wind data-files are provided)
</p>
</dd>
<dt><code>scale_arrow</code></dt><dd>
<p>scale factor needed for current and wind vector plots (default is 1; Argument is disregarded for non-<code>.gz</code>-files and omitted if no current or wind data-files are provided, indicated by the param-argument (valid <code>param</code>-definitions are: 'uz' and 'vz', for current data, 'wu' and 'wz' for wind data))
</p>
</dd>
<dt><code>terrain</code></dt><dd>
<p>whether the to keep terrain data (default is <code>FALSE</code>). If set <code>FALSE</code> and <code>visualize</code> is <code>TRUE</code>, <code>grid</code> command in <a href="#topic+plotmap">plotmap</a> is disabled!
</p>
</dd>
<dt><code>verbose</code></dt><dd>
<p>whether the plot information shall be printed in the R-console (by default <code>TRUE</code>)
</p>
</dd>
<dt><code>...</code></dt><dd>
<p>Additional arguments to be passed to <code><a href="#topic+plotmap">plotmap</a></code> (<code>bwd</code>, <code>fill</code>, <code>col</code>, <code>border</code>, <code>grid</code>, <code>grid.res</code>, <code>axeslabels</code>, <code>ticklabels</code>, <code>cex.lab</code>, <code>cex.ticks</code>).
</p>
</dd>
</dl>

</td></tr>
</table>


<h3>Details</h3>

<p><code>v</code> uses the <code>maps</code> and <code>maptools</code> functions to plot the landmask. See <code><a href="#topic+clim_plot">clim_plot</a></code> for aligned plots of satallite-data climatologies.
</p>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>References</h3>

<p>Bauer, R. K., Stepputtis, D., Grawe, U., Zimmermann, C., and Hammer, C. 2013. Wind-induced variability in coastal larval retention areas: a case study on Western Baltic spring-spawning herring. Fisheries Oceanography, 22: 388-399.
</p>


<h3>See Also</h3>

 <p><code><a href="#topic+clim_plot">clim_plot</a>, <a href="#topic+readbin">readbin</a>, <a href="#topic+name_split">name_split</a>, <a href="#topic+regions">regions</a>, <a href="#topic+plotmap">plotmap</a>, <a href="#topic+v">v</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>################## simple example section:

## Example 1: load &amp; plot a sample Raster-object
path &lt;- system.file("test_files", package="oceanmap")
load(paste0(path,"/medw4_modis_sst2_4km_1d_20020705_20020705.r2010.0.qual0.Rdata"),verbose=TRUE)
dat &lt;- raster::crop(dat,extent(c(0,10,40,44))) ## crop data, xlim/ylim not yet implemented in v()
print(dat)
v(dat, main="Raster-object", cbpos='r')


## Example 2: load &amp; plot sample netcdf-file ('.nc'-file)
nfiles &lt;- Sys.glob(paste0(path,'/*.nc')) # load list of sample-'.nc'-files
head(nfiles)

### option a) load netcdf-file with ncdf4-package and plot it
library('ncdf4')
ncdf &lt;- nc_open(nfiles[1])
# print(ncdf)
# v(obj = ncdf, cbpos="r")

### option b) load and plot netcdf-file as RasterStack object
# nc &lt;- nc2raster(nfiles[1])
# v(nc,cbpos="r") # plot RasterStack object

### option c) plot netcdf-file directly
# v(nfiles[1], cbpos="r")
# v(nfiles[1], cbpos="r", replace.na=TRUE)

###### plot multiple layers:
# par(mfrow=c(2,2))
# v(nfiles[1], t=1:4, cbpos="r", replace.na=TRUE, subplot = TRUE)


# ## Example 2: load &amp; plot bathymetry data from the NOAA-ETOPO1 database
# par(mfrow=c(2,1))
# bathy &lt;- get.bathy("medw4", terrain=T, res=3, keep=T, visualize=T, subplot = TRUE, grid=F)
# # load('bathy_medw4_res.3.dat',verbose = T); bathy &lt;- h
# v(bathy, param="bathy", subplot = TRUE, terrain=F, levels=c(200,2000)) # show contours
# 
# ## b) only contour lines:
# par(mfrow=c(1,2))
# h &lt;- get.bathy("lion",terrain=F,res=3, visualize=T,
#                v_image = FALSE, levels=c(200,2000))
# 
# ## use v-function for same plot but on subregion:
# v(h,v_area = "survey", param="bathy",
#   v_image = FALSE, levels=c(200,2000)) 


## Example 3: plot sample-'.gz'-file
gz.files &lt;- Sys.glob(paste0(path,'/*.gz'))
# v(gz.files[2]) ## plot content of gz-file
 
 
## Example 4: load sample-'.gz'-file manually as Raster-object and plot it
obj &lt;- readbin(gz.files[2],area='lion')
# par(mfrow=c(1,2))
# v(obj,param="sst",subplot = TRUE)
# v(obj,param="Temp",subplot = TRUE) ## note unset "pal" (colormap) for unkown "param"-values!


## Example 5: available color maps
data('cmap') # load color maps data
names(cmap) # list available color maps

gz.files &lt;- Sys.glob(paste0(path,'/*.gz'))
# figure(width=15,height=15)
# par(mfrow=c(4,5))
# for(n in names(cmap)) v(gz.files[2], v_area='lion', subplot=TRUE,
#                         pal=n, adaptive.vals=TRUE, main=n)

## define new color maps from blue to red to white:
n &lt;- colorRampPalette(c('blue','red','white'))(100)
# v(gz.files[2], v_area='lion', subplot=TRUE,
#  pal=n, adaptive.vals=TRUE, main="own colormap")


## Example 6: available parameters
data(parameter_definitions)
names(parameter_definitions)
# ?parameter_definitions

# figure(width=12, height=6.2)
# par(mfrow=c(2,3))
# v('*sst2*707*',v_area="medw4",main="sst", folder=path, subplot=TRUE)
# v('*chla*531*',v_area="medw4",main="chla", folder=path, subplot=TRUE)
# v('*chlagrad*',v_area="medw4",main="chlagrad",folder=path, subplot=TRUE)
# v('*p100*',v_area="medw4",main="p100 (oceanic fronts)",folder=path, subplot=TRUE)
# v('*sla*',v_area="medw4",main="sla",folder=path, subplot=TRUE)
# h &lt;- get.bathy("medw4",visualize=TRUE,terrain=F,res=4, subplot=TRUE,main="bathy")

################## advanced example section:

## Example I: plot bathymetry using a v_area-keyword
## requires server connection!
# par(mfrow=c(2,1))
# v("bathy","lion",res=4, keep=TRUE,border='grey', 
#   main='Gulf of Lions bathymetry',cb.title="resolution 4 min")

# v("bathy","lion",res=1, keep=TRUE,border='grey',
#   cb.title="resolution 1 min")  # can take some time depending on server connection!


## Example II: plot bathymetry of the Baltic Sea defined by longitude and latidtue coordinates
## requires server connection!
lon &lt;- c(9, 31)
lat &lt;- c(53.5, 66)
#v("bathy",lon=lon,lat=lat,main="Baltic Sea")


## Example III: plot landmask of the Baltic Sea defined by an extent- or raster-object
## requires server connection!
library('raster')
ext &lt;- extent(lon,lat)
# v("bathy",ext,main="Baltic Sea",res=4,levels=200) # extent-object


## Example IV: plot '.gz'-files, following default plot-procedure

check_gzfiles(folder=path) # return file summary-table
gz.files &lt;- Sys.glob(paste0(path,'/*.gz')) # load sample-'.gz'-files
# v(gz.files[1:4])
# v(gz.files[4],bwd=2)

## Example V: plot climatologies from '.gz'-files 
##            (ATTENTION: not working for non-'gz'-files, requiring ImageMagick)
# clim_plot('*1s*.gz' ,folder = path,bwd=0.7,adaptive.vals=TRUE,plotname="seasonal_climatology.png")

## Example VI: plot subregion of gz-files as subplots
# graphics.off()
# par(mfrow=c(2,1))
# v(gz.files[1:2],v_area='lion') # run ?region_definitions to see predefined regions


## Example VII: plot subregion of raster file

# all manual:
obj &lt;- readbin(gz.files[2],area='lion')
dev.new()
ticks &lt;- seq(20,30,5)
par(mar=c(5,4,5,8))
image(obj,zlim=range(ticks),col=cmap$jet)
plotmap('lion',add=TRUE) # add landmask
# set.colorbar(ticks=ticks,cb.title='cb.title',cb.xlab='cb.xlab')

## using v, reconstructing region information
# obj &lt;- readbin(gz.files[2],area='lion')
# v(obj,varname="sst2",cb.title='cb.title',cb.xlab='cb.xlab')

# using v for another subregion
ncorse &lt;- crop(obj,extent(6,9,40,42))
# v(ncorse,grid.res=1)
# v(ncorse,zlim=c(20,30),cbx=c(8.3,8.9),cby=c(40.7,40.8)) # skipping colorbar widget


## Example VIII: Add region by supplying raster-object, colorbar positions and running the widget
#add.region(ncorse,cbx=c(8.3,8.9),cby=c(40.7,40.8))


## Example IX: plot netcdf-files ('.nc'-files)
nfiles &lt;- Sys.glob(paste0(path,'/*.nc')) # load sample-'.nc'-files
head(nfiles)

## plot herring larval dispersal from Bauer et al. (2013)
# par(mfrow=c(2,2))
# v(nfiles[1], subplot=TRUE, t=1:4,minv=0, maxv=1000, adaptive.vals=FALSE, replace.na=TRUE)
# par(new=TRUE,mfrow=c(1,1))
# empty.plot(main='herring larval dispersal in the Greifswald lagoon, Germany')
# mtext('see Bauer et al. (2013) as reference')

# plot bathymetric data (obtained from the Leibniz Institute for Baltic Sea Research Warnemuende)
# v(nfiles[2],varname='bathymetry') # following default plot-procedure
# v(nfiles[2],varname='bathymetry',pal='haxbyrev',Log=TRUE, cb.xlab='depth [log m]',levels=50)




</code></pre>

<hr>
<h2 id='v-class'>v-classes</h2><span id='topic+bathy-class'></span><span id='topic+gz-class'></span><span id='topic+nc-class'></span><span id='topic+ncdf4-class'></span>

<h3>Description</h3>

<p>internal dummy classes used by <a href="#topic+v">v</a>. 
</p>

<hr>
<h2 id='writebin'>
Saves geographic data as byte file (<code>'.gz'</code>)</h2><span id='topic+writebin'></span>

<h3>Description</h3>

<p>Saves geographic data as byte file, in gzip compressed format (<code>'.gz'</code>). <b>ATTENTION!</b>! Only 2D (one layer) can be stored!
</p>


<h3>Usage</h3>

<pre><code class='language-R'>writebin(satdata,filename,folder,param)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="writebin_+3A_satdata">satdata</code></td>
<td>

<p>one layer-<a href="raster.html#topic+raster">raster</a>-object or <a href="base.html#topic+matrix">matrix</a> holding spatial data.
</p>
</td></tr>
<tr><td><code id="writebin_+3A_param">param</code></td>
<td>

<p>character string indicating the parameter name for the dataset treatment. See <code>parameter_definitions</code> for available parameters.
</p>
</td></tr>
<tr><td><code id="writebin_+3A_filename">filename</code></td>
<td>

<p>character string naming the <code>'.gz'</code>-file to be created. 
</p>
</td></tr>
<tr><td><code id="writebin_+3A_folder">folder</code></td>
<td>

<p>character string indicating the target directory. 
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Robert K. Bauer
</p>


<h3>See Also</h3>

<p><a href="#topic+readbin">readbin</a>, <a href="#topic+regions">regions</a>, <a href="raster.html#topic+crop">crop</a>, <a href="#topic+raster2matrix">raster2matrix</a>, <a href="#topic+param_unconvert">param_unconvert</a></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example for selecting wrong area definition when saving files
path &lt;- system.file("test_files", package="oceanmap")
gz.files &lt;- Sys.glob(paste0(path,'/*.gz')) # load sample-'.gz'-files
v(gz.files[1])

fname &lt;- name_split(gz.files[1])
param &lt;- fname$parameter
gz &lt;- readbin(gz.files[1])
dim(gz)
v(gz.files[1])

### reset region name
fname$area &lt;- 'med9'
fname &lt;- name_join(fname)
# writebin(gz,fname,folder=path,param=param)
# v(fname)
# system(paste('rm', fname))

### multi layer raster file
gz2 &lt;- stack(gz,gz)
# writebin(gz2,rep(gz.files[1],2),folder=path,param) # error message since multi layer
# writebin(gz,gz.files[1],folder=path,param) # single layer raster file
# v(gz.files[1])
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
