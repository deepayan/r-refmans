<!DOCTYPE html><html><head><title>Help for package PBSmodelling</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {PBSmodelling}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#addArrows'><p>Add Arrows to a Plot Using Relative (0:1) Coordinates</p></a></li>
<li><a href='#addLabel'><p>Add a Label to a Plot Using Relative (0:1) Coordinates</p></a></li>
<li><a href='#addLegend'><p>Add a Legend to a Plot Using Relative (0:1) Coordinates</p></a></li>
<li><a href='#calcFib'><p>Calculate Fibonacci Numbers by Several Methods</p></a></li>
<li><a href='#calcGM'><p>Calculate the Geometric Mean, Allowing for Zeroes</p></a></li>
<li><a href='#calcMin'><p>Calculate the Minimum of a User-Defined Function</p></a></li>
<li><a href='#CCA.qbr'><p>Data: Sampled Counts of Quillback Rockfish</p>
(Sebastes maliger)</a></li>
<li><a href='#chooseWinVal'><p>Choose and Set a String Item in a GUI</p></a></li>
<li><a href='#cleanProj'><p>Launch a GUI for Project File Deletion</p></a></li>
<li><a href='#cleanWD'><p>Launch a GUI for File Deletion</p></a></li>
<li><a href='#clearAll'><p>Remove all R Objects From a Specified Environment</p></a></li>
<li><a href='#clearPBSext'><p>Clear File Extension Associations</p></a></li>
<li><a href='#clearRcon'><p>Clear the R Console / Focus on the RGui Window</p></a></li>
<li><a href='#clearWinVal'><p>Remove all Current Widget Variables</p></a></li>
<li><a href='#clipVector'><p>Clip a Vector at One or Both Ends</p></a></li>
<li><a href='#closeWin'><p>Close GUI Window(s)</p></a></li>
<li><a href='#compileC'><p>Compile a C File into a Shared Library Object</p></a></li>
<li><a href='#compileDescription'><p>Convert and Save a Window Description as a List</p></a></li>
<li><a href='#convSlashes'><p> Convert Slashes from UNIX to DOS</p></a></li>
<li><a href='#createVector'><p>Create a GUI with a Vector Widget</p></a></li>
<li><a href='#createWin'><p>Create a GUI Window</p></a></li>
<li><a href='#declareGUIoptions'><p>Declare Option Names that Correspond with Widget Names</p></a></li>
<li><a href='#doAction'><p> Execute Action Created by a Widget</p></a></li>
<li><a href='#dot-PBSmodEnv'><p>PBSmodelling Environment</p></a></li>
<li><a href='#dot-win.funs'>
<p>GUI Windows Wrappers</p></a></li>
<li><a href='#drawBars'><p>Draw a Linear Barplot on the Current Plot</p></a></li>
<li><a href='#evalCall'><p> Evaluate a Function Call</p></a></li>
<li><a href='#expandGraph'><p>Expand the Plot Area by Adjusting Margins</p></a></li>
<li><a href='#exportHistory'><p>Export a Saved History</p></a></li>
<li><a href='#findPat'><p>Search a Character Vector to Find Multiple Patterns</p></a></li>
<li><a href='#findPrefix'><p>Find a Prefix Based on Names of Existing Files</p></a></li>
<li><a href='#findProgram'><p>Locates a program in the PATH environment variable</p></a></li>
<li><a href='#focusWin'><p>Set the Focus on a Particular Window</p></a></li>
<li><a href='#genMatrix'><p>Generate Test Matrices for plotBubbles</p></a></li>
<li><a href='#getChoice'><p>Choose One String Item from a List of Choices</p></a></li>
<li><a href='#getGUIoptions'><p>Get PBS Options for Widgets</p></a></li>
<li><a href='#getOptions'>
<p>Get and Set User Options</p></a></li>
<li><a href='#getOptionsFileName'>
<p>Get and Set File Name for Saving and Loading of Options</p></a></li>
<li><a href='#getOptionsPrefix'>
<p>Get and Set GUI Prefix of Options Class</p></a></li>
<li><a href='#getPBSext'><p>Get Command Associated With File Name Extension</p></a></li>
<li><a href='#getPBSoptions'><p>Retrieve A User Option</p></a></li>
<li><a href='#getWinAct'><p>Retrieve the Last Window Action</p></a></li>
<li><a href='#getWinFun'><p>Retrieve Names of Functions Referenced in a Window</p></a></li>
<li><a href='#getWinVal'><p>Retrieve Widget Values for Use in R Code</p></a></li>
<li><a href='#getYes'><p>Prompt the User to Choose Yes or No</p></a></li>
<li><a href='#GT0'><p>Restrict a Numeric Variable to a Positive Value</p></a></li>
<li><a href='#importHistory'><p>Import a History List from a File</p></a></li>
<li><a href='#initHistory'><p>Create Structures for a New History Widget</p></a></li>
<li><a href='#isWhat'><p>Identify an Object and Print Information</p></a></li>
<li><a href='#lisp'>
<p>List Objects in .PBSmodEnv Workspace</p></a></li>
<li><a href='#loadC'><p>Launch a GUI for Compiling and Loading C Code</p></a></li>
<li><a href='#loadOptions'>
<p>Save and Load Options to and from Disk</p></a></li>
<li><a href='#loadOptionsGUI'>
<p>Load and Save Options Values to and from a GUI</p></a></li>
<li><a href='#lucent'>
<p>Convert Solid Colours to Translucence</p></a></li>
<li><a href='#openExamples'><p>Open Example Files from a Package</p></a></li>
<li><a href='#openFile'><p>Open File with Associated Program</p></a></li>
<li><a href='#openUG'>
<p>Open Package User Guide</p></a></li>
<li><a href='#packList'><p> Pack a List with Objects</p></a></li>
<li><a href='#pad0'><p>Pad Values with Leading Zeroes</p></a></li>
<li><a href='#parseWinFile'><p>Convert a Window Description File into a List Object</p></a></li>
<li><a href='#pause'><p>Pause Between Graphics Displays or Other Calculations</p></a></li>
<li><a href='#PBSmodelling'><p>PBS Modelling</p></a></li>
<li><a href='#PBSoptions-class'><p>S4: Project Options Class</p></a></li>
<li><a href='#pickCol'><p>Pick a Colour From a Palette and get the Hexadecimal Code</p></a></li>
<li><a href='#plotACF'>
<p>Plot Autocorrelation Bars From a Data Frame, Matrix, or Vector</p></a></li>
<li><a href='#plotAsp'><p>Construct a Plot with a Specified Aspect Ratio</p></a></li>
<li><a href='#plotBubbles'><p>Construct a Bubble Plot from a Matrix</p></a></li>
<li><a href='#plotCsum'><p>Plot Cumulative Sum of Data</p></a></li>
<li><a href='#plotDens'><p>Plot Density Curves from a Data Frame, Matrix, or Vector</p></a></li>
<li><a href='#plotFriedEggs'><p>Render a Pairs Plot as Fried Eggs and Beer</p></a></li>
<li><a href='#plotSidebars'>
<p>Plot Table as Horizontal Sidebars</p></a></li>
<li><a href='#plotTrace'><p>Plot Trace Lines from a Data Frame, Matrix, or Vector</p></a></li>
<li><a href='#presentTalk'><p>Run a Presentation in R</p></a></li>
<li><a href='#promptWriteOptions'><p>Prompt the User to Write Changed Options</p></a></li>
<li><a href='#readList'><p>Read a List from an ASCII File</p></a></li>
<li><a href='#readPBSoptions'><p>Read PBS Options from an External File</p></a></li>
<li><a href='#resetGraph'><p>Reset par Values for a Plot</p></a></li>
<li><a href='#restorePar'><p>Get Actual Parameters from Scaled Values</p></a></li>
<li><a href='#runDemos'><p>Interactive GUI for R Demos</p></a></li>
<li><a href='#runExample'>
<p>Run a Single GUI Example Included with PBS Modelling</p></a></li>
<li><a href='#runExamples'><p>Run GUI Examples Included with PBS Modelling</p></a></li>
<li><a href='#scalePar'><p>Scale Parameters to [0,1]</p></a></li>
<li><a href='#selectDir'><p>Display Dialogue: Select directory</p></a></li>
<li><a href='#selectFile'><p>Display Dialogue: Open or Save File</p></a></li>
<li><a href='#setFileOption'><p>Set a PBS File Path Option Interactively</p></a></li>
<li><a href='#setGUIoptions'><p>Set PBS Options from Widget Values</p></a></li>
<li><a href='#setPathOption'><p>Set a PBS Path Option Interactively</p></a></li>
<li><a href='#setPBSext'><p>Set Command to Associate with File Name Extension</p></a></li>
<li><a href='#setPBSoptions'><p>Set A User Option</p></a></li>
<li><a href='#setwdGUI'><p>Browse for Working Directory and Optionally Find Prefix</p></a></li>
<li><a href='#setWidgetColor'><p>Update Widget Color</p></a></li>
<li><a href='#setWidgetState'><p>Update Widget State</p></a></li>
<li><a href='#setWinAct'><p>Add a Window Action to the Saved Action Vector</p></a></li>
<li><a href='#setWinVal'><p>Update Widget Values</p></a></li>
<li><a href='#show0'><p>Convert Numbers into Text with Specified Decimal Places</p></a></li>
<li><a href='#showAlert'><p>Display a Message in an Alert Window</p></a></li>
<li><a href='#showArgs'><p>Display Expected Widget Arguments</p></a></li>
<li><a href='#showHelp'><p>Display HTML Help Pages for Packages in Browser</p></a></li>
<li><a href='#showPacks'><p> Show Packages Required But Not Installed</p></a></li>
<li><a href='#showRes'><p>Show Results of Expression Represented by Text</p></a></li>
<li><a href='#showVignettes'><p>Display Vignettes for Packages</p></a></li>
<li><a href='#sortHistory'><p>Sort an Active or Saved History</p></a></li>
<li><a href='#talk-class'>
<p>S4: Present Talk Classes</p></a></li>
<li><a href='#testAlpha'><p> Test Various Alpha Transparency Values</p></a></li>
<li><a href='#testCol'>
<p>Display Colours Available Using a Set of Strings</p></a></li>
<li><a href='#testLty'><p>Display Line Types Available</p></a></li>
<li><a href='#testLwd'><p>Display Line Widths</p></a></li>
<li><a href='#testWidgets'><p>Display Sample GUIs and their Source Code</p></a></li>
<li><a href='#tget'>
<p>Get/Put Objects From/To Temporary Work Environment</p></a></li>
<li><a href='#unpackList'><p>Unpack List Elements into Variables</p></a></li>
<li><a href='#updateGUI'>
<p>Update Active GUI With Local Values</p></a></li>
<li><a href='#vbdata'><p>Data: Lengths-at-Age for von Bertalanffy Curve</p></a></li>
<li><a href='#vbpars'><p>Data: Initial Parameters for a von Bertalanffy Curve</p></a></li>
<li><a href='#view'><p>View First/Last/Random n Elements/Rows of an Object</p></a></li>
<li><a href='#viewCode'><p> View Package R Code</p></a></li>
<li><a href='#writeList'><p>Write a List to a File in PBS Modelling Format</p></a></li>
<li><a href='#writePBSoptions'><p>Write PBS Options to an External File</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>2.69.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-10-26</td>
</tr>
<tr>
<td>Title:</td>
<td>GUI Tools Made Easy: Interact with Models and Explore Data</td>
</tr>
<tr>
<td>Author:</td>
<td>Jon T. Schnute [aut],
  Alex Couture-Beil [aut],
  Rowan Haigh [aut, cre],
  Nicholas Boers [ctb],
  Anisa Egeli [ctb],
  A. R. Kronlund [ctb],
  Steve Martell [ctb],
  Norm Olsen [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Rowan Haigh &lt;rowan.haigh@dfo-mpo.gc.ca&gt;</td>
</tr>
<tr>
<td>Copyright:</td>
<td>2005-2023, Fisheries and Oceans Canada</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, tcltk, XML</td>
</tr>
<tr>
<td>Suggests:</td>
<td>PBSmapping, deSolve, KernSmooth</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>BWidget</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides software to facilitate the design, testing, and operation
   of computer models. It focuses particularly on tools that make it easy to
   construct and edit a customized graphical user interface ('GUI'). Although our
   simplified 'GUI' language depends heavily on the R interface to the 'Tcl/Tk'
   package, a user does not need to know 'Tcl/Tk'. Examples illustrate models
   built with other R packages, including 'PBSmapping', 'PBSddesolve', and 'BRugs'. 
   A complete user's guide 'PBSmodelling-UG.pdf' shows how to use this package
   effectively.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/pbs-software/pbs-modelling">https://github.com/pbs-software/pbs-modelling</a></td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-26 16:24:48 UTC; HaighR</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-09 15:40:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='addArrows'>Add Arrows to a Plot Using Relative (0:1) Coordinates</h2><span id='topic+addArrows'></span>

<h3>Description</h3>

<p>Call the <code>arrows</code> function using relative (0:1) coordinates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addArrows(x1, y1, x2, y2, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addArrows_+3A_x1">x1</code></td>
<td>
<p> x-coordinate (0:1) at base of arrow.</p>
</td></tr>
<tr><td><code id="addArrows_+3A_y1">y1</code></td>
<td>
<p> y-coordinate (0:1) at base of arrow.</p>
</td></tr>
<tr><td><code id="addArrows_+3A_x2">x2</code></td>
<td>
<p> x-coordinate (0:1) at tip of arrow.</p>
</td></tr>
<tr><td><code id="addArrows_+3A_y2">y2</code></td>
<td>
<p> y-coordinate (0:1) at tip of arrow.</p>
</td></tr>
<tr><td><code id="addArrows_+3A_...">...</code></td>
<td>
<p> additional parameters for the function <code>arrows</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Lines will be drawn from <code>(x1[i],y1[i])</code> to <code>(x2[i],y2[i])</code>
</p>


<h3>Author(s)</h3>

<p>Jon T. Schnute, Pacific Biological Station, Fisheries and Oceans Canada , Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+addLabel">addLabel</a></code>, <code><a href="#topic+addLegend">addLegend</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)
  tt=seq(from=-5,to=5,by=0.01)
  plot(sin(tt), cos(tt)*(1-sin(tt)), type="l")
  addArrows(0.2,0.5,0.8,0.5)
  addArrows(0.8,0.95,0.95,0.55, col="#FF0066")
  par(oldpar)
})
</code></pre>

<hr>
<h2 id='addLabel'>Add a Label to a Plot Using Relative (0:1) Coordinates</h2><span id='topic+addLabel'></span>

<h3>Description</h3>

<p>Place a label in a plot using relative (0:1) coordinates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addLabel(x, y, txt, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addLabel_+3A_x">x</code></td>
<td>
<p> x-axis coordinate in the range (0:1); can step outside.</p>
</td></tr>
<tr><td><code id="addLabel_+3A_y">y</code></td>
<td>
<p> y-axis coordinate in the range (0:1); can step outside.</p>
</td></tr>
<tr><td><code id="addLabel_+3A_txt">txt</code></td>
<td>
<p> desired label at (<code>x,y</code>).</p>
</td></tr>
<tr><td><code id="addLabel_+3A_...">...</code></td>
<td>
<p>additional arguments passed to the function <code>text</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jon T. Schnute, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+addArrows">addArrows</a></code>, <code><a href="#topic+addLegend">addLegend</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)
  resetGraph()
  addLabel(0.75,seq(from=0.9,to=0.1,by=-0.10),c('a','b','c'), col="#0033AA")
  par(oldpar)
})
</code></pre>

<hr>
<h2 id='addLegend'>Add a Legend to a Plot Using Relative (0:1) Coordinates</h2><span id='topic+addLegend'></span>

<h3>Description</h3>

<p>Place a legend in a plot using relative (0:1) coordinates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addLegend(x, y, ...) 
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addLegend_+3A_x">x</code></td>
<td>
<p> x-axis coordinate in the range (0:1); can step outside.</p>
</td></tr>
<tr><td><code id="addLegend_+3A_y">y</code></td>
<td>
<p> y-axis coordinate in the range (0:1); can step outside.</p>
</td></tr>
<tr><td><code id="addLegend_+3A_...">...</code></td>
<td>
<p> arguments used by the function <code>legend</code>, 
such as <code>lines</code>, <code>text</code>, or <code>rectangle</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jon T. Schnute, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+addArrows">addArrows</a></code>, <code><a href="#topic+addLabel">addLabel</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)
  resetGraph()
  n &lt;- sample(1:length(colors()),15); clrs &lt;- colors()[n]
  addLegend(.2,1,fill=clrs,leg=clrs,cex=1.5)
  par(oldpar)
})
</code></pre>

<hr>
<h2 id='calcFib'>Calculate Fibonacci Numbers by Several Methods</h2><span id='topic+calcFib'></span>

<h3>Description</h3>

<p>Compute Fibonacci numbers using four different methods:
1) iteratively using R code,
2) via the closed function in R code,
3) iteratively in C using the <code>.C</code> function,
and 4) iteratively in C using the <code>.Call</code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calcFib(n, len=1, method="C")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calcFib_+3A_n">n</code></td>
<td>
<p> nth fibonacci number to calculate</p>
</td></tr>
<tr><td><code id="calcFib_+3A_len">len</code></td>
<td>
<p> a vector of length <code>len</code> showing previous fibonacci numbers</p>
</td></tr>
<tr><td><code id="calcFib_+3A_method">method</code></td>
<td>
<p> select method to use: <code>C</code>, <code>Call</code>, <code>R</code>, <code>closed</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of the last <code>len</code> Fibonacci numbers 
calculated.
</p>


<h3>Author(s)</h3>

<p>Jon T. Schnute, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>

<hr>
<h2 id='calcGM'>Calculate the Geometric Mean, Allowing for Zeroes</h2><span id='topic+calcGM'></span>

<h3>Description</h3>

<p>Calculate the geometric mean of a numeric 
vector, possibly excluding zeroes and/or adding an offset 
to compensate for zero values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calcGM(x, offset = 0, exzero = TRUE)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calcGM_+3A_x">x</code></td>
<td>
<p>vector of numbers</p>
</td></tr>
<tr><td><code id="calcGM_+3A_offset">offset</code></td>
<td>
<p>value to add to all components, including zeroes</p>
</td></tr>
<tr><td><code id="calcGM_+3A_exzero">exzero</code></td>
<td>
<p>if <code>TRUE</code>, exclude zeroes (but still add the offset)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Geometric mean of the modified vector <code>x + offset</code>
</p>


<h3>Note</h3>

<p><code>NA</code> values are automatically removed from <code>x</code></p>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  calcGM(c(0,1,100))
  calcGM(c(0,1,100),offset=0.01,exzero=FALSE)
})
</code></pre>

<hr>
<h2 id='calcMin'>Calculate the Minimum of a User-Defined Function</h2><span id='topic+calcMin'></span>

<h3>Description</h3>

<p>Minimization based on the R-stat functions <code>nlm</code>, <code>nlminb</code>, and <code>optim</code>.
Model parameters are scaled and can be active or not in the minimization.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calcMin(pvec, func, method="nlm", trace=0, maxit=1000, reltol=1e-8,
        steptol=1e-6, temp=10, repN=0, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calcMin_+3A_pvec">pvec</code></td>
<td>
<p>Initial values of the model parameters to be optimized.
<code>pvec</code> is a data frame comprising four columns (
<code>"val","min","max","active"</code>) and as many rows as there are model
parameters. The <code>"active"</code> field (logical) determines whether the 
parameters are estimated (<code>T</code>) or remain fixed (<code>F</code>).</p>
</td></tr>
<tr><td><code id="calcMin_+3A_func">func</code></td>
<td>
<p>The user-defined function to be minimized (or maximized).
The function should return a scalar result.</p>
</td></tr>
<tr><td><code id="calcMin_+3A_method">method</code></td>
<td>
<p>The minimization method to use: one of <code>nlm</code>, <code>nlminb</code>,
<code>Nelder-Mead</code>, <code>BFGS</code>, <code>CG</code>, <code>L-BFGS-B</code>, or 
<code>SANN</code>. Default is <code>nlm</code>.</p>
</td></tr>
<tr><td><code id="calcMin_+3A_trace">trace</code></td>
<td>
<p>Non-negative integer. If positive, tracing information on the
progress of the minimization is produced. Higher values may produce more
tracing information: for method <code>"L-BFGS-B"</code> there are six levels of
tracing. Default is <code>0</code>.</p>
</td></tr>
<tr><td><code id="calcMin_+3A_maxit">maxit</code></td>
<td>
<p>The maximum number of iterations. Default is <code>1000</code>.</p>
</td></tr>
<tr><td><code id="calcMin_+3A_reltol">reltol</code></td>
<td>
<p>Relative convergence tolerance. The algorithm stops if it is
unable to reduce the value by a factor of <code>reltol*(abs(val)+reltol)</code>
at a step. Default is <code>1e-8</code>.</p>
</td></tr>
<tr><td><code id="calcMin_+3A_steptol">steptol</code></td>
<td>
<p>A positive scalar providing the minimum allowable relative step length.
Default is <code>1e-6</code>.</p>
</td></tr>
<tr><td><code id="calcMin_+3A_temp">temp</code></td>
<td>
<p>Temperature controlling the <code>"SANN"</code> method. It is the
starting temperature for the cooling schedule. Default is <code>10</code>.</p>
</td></tr>
<tr><td><code id="calcMin_+3A_repn">repN</code></td>
<td>
<p>Reports the parameter and objective function values on the R-console
every <code>repN</code> evaluations. Default is <code>0</code> for no reporting.</p>
</td></tr>
<tr><td><code id="calcMin_+3A_...">...</code></td>
<td>
<p>Further arguments to be passed to the optimizing function chosen:
<code>nlm</code>, <code>nlminb</code>, or <code>optim</code>.
Beware of partial matching to earlier arguments.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code>optim</code> for details on the following methods: <code>Nelder-Mead</code>,
<code>BFGS</code>, <code>CG</code>, <code>L-BFGS-B</code>, and <code>SANN</code>.
</p>


<h3>Value</h3>

<p>A list with components:
</p>
<table>
<tr><td><code>Fout</code></td>
<td>
<p>The output list from the optimizer function chosen through <code>method</code>.</p>
</td></tr>
<tr><td><code>iters</code></td>
<td>
<p>Number of iterations.</p>
</td></tr>
<tr><td><code>evals</code></td>
<td>
<p>Number of evaluations.</p>
</td></tr>
<tr><td><code>cpuTime</code></td>
<td>
<p>The user CPU time to execute the minimization.</p>
</td></tr>
<tr><td><code>elapTime</code></td>
<td>
<p>The total elapsed time to execute the minimization.</p>
</td></tr>
<tr><td><code>fminS</code></td>
<td>
<p>The objective function value calculated at the start of the minimization.</p>
</td></tr>
<tr><td><code>fminE</code></td>
<td>
<p>The objective function value calculated at the end of the minimization.</p>
</td></tr>
<tr><td><code>Pstart</code></td>
<td>
<p>Starting values for the model parameters.</p>
</td></tr>
<tr><td><code>Pend</code></td>
<td>
<p>Final values estimated for the model parameters from the minimization.</p>
</td></tr>
<tr><td><code>AIC</code></td>
<td>
<p>Akaike's Information Criterion</p>
</td></tr>
<tr><td><code>message</code></td>
<td>
<p>Convergence message from the minimization routine.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>Some arguments to <code>calcMin</code> have no effect depending on the <code>method</code> chosen.
</p>


<h3>Author(s)</h3>

<p>Jon T. Schnute, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+scalePar">scalePar</a></code>, <code><a href="#topic+restorePar">restorePar</a></code>, <code><a href="#topic+calcMin">calcMin</a></code>, <code><a href="#topic+GT0">GT0</a></code> <br />
In the <code>stats</code> package: <code>nlm</code>, <code>nlminb</code>, and <code>optim</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
Ufun &lt;- function(P) {
  Linf &lt;- P[1]; K &lt;- P[2]; t0 &lt;- P[3]; obs &lt;- afile$len;
  pred &lt;- Linf * (1 - exp(-K*(afile$age-t0)));
  n &lt;- length(obs); ssq &lt;- sum((obs-pred)^2 );
  return(n*log(ssq)); };

oldpar = par(no.readonly = TRUE)
afile &lt;- data.frame(age=1:16,len=c(7.36,14.3,21.8,27.6,31.5,35.3,39,
  41.1,43.8,45.1,47.4,48.9,50.1,51.7,51.7,54.1));
pvec &lt;- data.frame(val=c(70,0.5,0),min=c(40,0.01,-2),max=c(100,2,2),
  active=c(TRUE,TRUE,TRUE),row.names=c("Linf","K","t0"),
  stringsAsFactors=FALSE);
alist &lt;- calcMin(pvec=pvec,func=Ufun,method="nlm",steptol=1e-4,repN=10);
print(alist[-1]); P &lt;- alist$Pend;
#resetGraph(); 
expandGraph();
xnew &lt;- seq(afile$age[1],afile$age[nrow(afile)],len=100);
ynew &lt;- P[1] * (1 - exp(-P[2]*(xnew-P[3])) );
plot(afile); lines(xnew,ynew,col="red",lwd=2); 
addLabel(.05,.88,paste(paste(c("Linf","K","t0"),round(P,c(2,4,4)),
  sep=" = "),collapse="\n"),adj=0,cex=0.9);
par(oldpar)
})
</code></pre>

<hr>
<h2 id='CCA.qbr'>Data: Sampled Counts of Quillback Rockfish 
(Sebastes maliger)</h2><span id='topic+CCA.qbr'></span>

<h3>Description</h3>

<p>Count of sampled fish-at-age for quillback rockfish 
(<em>Sebastes maliger</em>) in Johnstone Strait, British Columbia, 
from 1984 to 2004.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(CCA.qbr)</code></pre>


<h3>Format</h3>

<p>A matrix with 70 rows (ages) and 14 columns 
(years). Attributes &ldquo;syrs&rdquo; and &ldquo;cyrs&rdquo; 
specify years of survey and commercial data, respectively.
</p>

<table>
<tr>
 <td style="text-align: left;">
    <code>[,c(3:5,9,13,14)]</code> </td><td style="text-align: left;"> Counts-at-age from research
      survey samples </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>[,c(1,2,6:8,10:12)]</code> </td><td style="text-align: left;"> Counts-at-age from commercial
      fishery samples </td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>

<p>All elements represent sampled counts-at-age in year. Zero-value
entries indicate no observations.
</p>


<h3>Details</h3>

<p>Handline surveys for rockfish have been conducted in 
Johnstone Strait (British Columbia) and adjacent waterways 
(126<code class="reqn">^\circ</code>37'W to 126<code class="reqn">^\circ</code>53'W, 
50<code class="reqn">^\circ</code>32'N to 50<code class="reqn">^\circ</code>39'N) since 1986. 
Yamanaka and Richards (1993) describe surveys conducted in 1986, 
1987, 1988, and 1992. In 2001, the Rockfish Selective Fishery 
Study (Berry 2001) targeted quillback rockfish <em>Sebastes 
maliger</em> for experiments on improving survival after capture  by 
hook and line gear. The resulting data subsequently have been 
incorporated into the survey data series. The most recent survey 
in 2004 essentially repeated the 1992 survey design. Fish samples 
from surveys have been supplemented by commercial handline 
fishery samples taken from a larger region 
(126<code class="reqn">^\circ</code>35'W to 127<code class="reqn">^\circ</code>39'W, 
50<code class="reqn">^\circ</code>32'N to 50<code class="reqn">^\circ</code>59'N) in the years 
1984-1985, 1989-1991, 1993, 1996, and 2000 (Schnute and Haigh 
2007).
</p>


<h3>Note</h3>

<p>Years 1994, 1997-1999, and 2002-2003 do not have data.</p>


<h3>Source</h3>

<p>Fisheries and Oceans Canada - GFBio database: <br />
<a href="http://www.pac.dfo-mpo.gc.ca/science/species-especes/groundfish-poissonsdesfonds/stats-eng.html">http://www.pac.dfo-mpo.gc.ca/science/species-especes/groundfish-poissonsdesfonds/stats-eng.html</a>
</p>


<h3>References</h3>

<p>Berry, M.D. (2001) <em>Area 12 (Inside) Rockfish Selective Fishery 
Study</em>. Science Council of British Columbia, Project Number <b>FS00-05</b>.
</p>
<p>Schnute, J.T. and Haigh, R. (2007) Compositional analysis of 
catch curve data with an application to <em>Sebastes maliger</em>. 
<em>ICES Journal of Marine Science</em> <b>64</b>, 218&ndash;233.
</p>
<p>Yamanaka, K.L. and Richards, L.J. (1993) 1992 Research catch and 
effort data on nearshore reef-fishes in British Columbia 
Statistical Area 12. <em>Canadian Manuscript Report of Fisheries and 
Aquatic Sciences</em> <b>2184</b>, 77 pp.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)
  # Plot age proportions (blue bubbles = survey data, red = commercial)
  data(CCA.qbr,envir=.PBSmodEnv); clrs=c("cornflowerblue","orangered")
  z &lt;- CCA.qbr; cyr &lt;- attributes(z)$cyrs;
  z &lt;- apply(z,2,function(x){x/sum(x)}); z[,cyr] &lt;- -z[,cyr];
  x &lt;- as.numeric(dimnames(z)[[2]]); xlim &lt;- range(x) + c(-.5,.5);
  y &lt;- as.numeric(dimnames(z)[[1]]); ylim &lt;- range(y) + c(-1,1);
  expandGraph(mgp=c(2,.5,0),las=1)
  plotBubbles(z,xval=x,yval=y,powr=.5,size=0.15,clrs=clrs,
    xlim=xlim,ylim=ylim,xlab="Year",ylab="Age",cex.lab=1.5)
  addLegend(.5,1,bty="n",pch=1,cex=1.2,col=clrs,
    legend=c("Survey","Commercial"),horiz=TRUE,xjust=.5)
  par(oldpar)
})
</code></pre>

<hr>
<h2 id='chooseWinVal'>Choose and Set a String Item in a GUI</h2><span id='topic+chooseWinVal'></span>

<h3>Description</h3>

<p>Prompts the user to choose one string item from a list of 
choices displayed in a GUI, then sets a specified variable in 
a target GUI.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chooseWinVal(choice, varname, winname="window")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="chooseWinVal_+3A_choice">choice</code></td>
<td>
<p> vector of strings from which to choose </p>
</td></tr>
<tr><td><code id="chooseWinVal_+3A_varname">varname</code></td>
<td>
<p> variable name to which <code>choice</code> is assigned in the target GUI </p>
</td></tr>
<tr><td><code id="chooseWinVal_+3A_winname">winname</code></td>
<td>
<p> window name for the target GUI </p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>chooseWinVal</code> activates a <code>setWinVal</code> command through an
<code>onClose</code> function created by the <code>getChoice</code> command and 
modified by <code>chooseWinVal</code>.
</p>


<h3>Value</h3>

<p>No value is returned directly. The choice is written to the PBS options 
workspace, accessible through <br /> <code>getPBSoptions("getChoice")</code>. Also set 
in PBS options is the window name from which the choice was activated.
</p>


<h3>Note</h3>

 
<p>Microsoft Windows users may experience difficulties switching focus between the 
R console and GUI windows. The latter frequently disappear from the screen and 
need to be reselected (either clicking on the task bar or pressing &lt;Alt&gt;&lt;Tab&gt;. 
This issue can be resolved by switching from MDI to SDI mode. From the R console 
menu bar, select &lt;Edit&gt; and &lt;GUI preferences&gt;, then change the value of 
&ldquo;single or multiple windows&rdquo; to SDI.
</p>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

 
<p><code><a href="#topic+getChoice">getChoice</a></code>, <code><a href="#topic+getWinVal">getWinVal</a></code>, <code><a href="#topic+setWinVal">setWinVal</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
dfnam &lt;-
  c("airquality","attitude","ChickWeight","faithful","freeny",
  "iris","LifeCycleSavings","longley","morley","Orange",
  "quakes","randu","rock","stackloss","swiss","trees")

wlist &lt;- c(
  "window name=choisir title=\"Test chooseWinVal\"",
  "label text=\"Press &lt;ENTER&gt; in the green entry box
  \nto choose a file, then press &lt;GO&gt;\" sticky=W pady=5",
  "grid 1 3 sticky=W",
  "label text=File: sticky=W",
  "entry name=fnam mode=character width=23 value=\"\" 
  func=chFile entrybg=darkolivegreen1 pady=5",
  "button text=GO bg=green sticky=W func=test",
  "")

chFile &lt;- function(ch=dfnam,fn="fnam") 
  {chooseWinVal(ch,fn,winname="choisir")};

#-- Example 1 GUI test
test &lt;- function() {
  oldpar = par(no.readonly=TRUE); on.exit(par(oldpar))
  getWinVal(winName="choisir",scope="L")
  if (fnam!="" &amp;&amp; any(fnam==dfnam)) {
    file &lt;- get(fnam);
    pairs(file,gap=0); }
  else {
    resetGraph(); 
    addLabel(.5,.5,"Press &lt;ENTER&gt; in the green entry box
    \nto choose a file, then press &lt;GO&gt;", col="red",cex=1.5)
  }
}
#-- Example 2 Non-GUI test
#To try the non-GUI version, type 'test2()' on the command line
test2 &lt;- function(fnames=dfnam) {
  oldpar = par(no.readonly=TRUE); on.exit(par(oldpar))
  frame();resetGraph()
  again &lt;- TRUE;
  while (again) {
    fnam &lt;- sample(fnames,1); file &lt;- get(fnam); 
    flds &lt;- names(file);
    xfld &lt;- getChoice(paste("Pick x-field from",fnam),flds,gui=FALSE);
    yfld &lt;- getChoice(paste("Pick y-field from",fnam),flds,gui=FALSE)
    plot(file[,xfld],file[,yfld],xlab=xfld,ylab=yfld,
      pch=16,cex=1.2,col="red");
    again &lt;- getChoice("Plot another pair?",gui=FALSE)
  }
}
require(PBSmodelling)
createWin(wlist,astext=TRUE); test();
})

## End(Not run)
</code></pre>

<hr>
<h2 id='cleanProj'>Launch a GUI for Project File Deletion</h2><span id='topic+cleanProj'></span>

<h3>Description</h3>

<p>Launches a new window which contains an interface for deleting 
junk files associated with a prefix and a set of suffixes 
(e.g., PBSadmb project) from the working directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cleanProj(prefix, suffix, files)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cleanProj_+3A_prefix">prefix</code></td>
<td>
<p>default prefix for file names.</p>
</td></tr>
<tr><td><code id="cleanProj_+3A_suffix">suffix</code></td>
<td>
<p>character vector of suffixes used for clean options.</p>
</td></tr>
<tr><td><code id="cleanProj_+3A_files">files</code></td>
<td>
<p>character vector of file names used for clean options.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All arguments may contain wildcard characters (<code>"*"</code> to match 0 or
more characters, <code>"?"</code> to match any single character).
</p>
<p>The GUI includes the following:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <b>1</b> </td><td style="text-align: left;"> An entry box for the prefix. </td>
</tr>
<tr>
 <td style="text-align: left;">
           </td><td style="text-align: left;"> The default value of this entry box is taken from <code>prefix</code>. </td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>2</b> </td><td style="text-align: left;"> Check boxes for each suffix in the <code>suffix</code> argument and </td>
</tr>
<tr>
 <td style="text-align: left;">
           </td><td style="text-align: left;"> for each file name in the <code>files</code> argument.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>3</b> </td><td style="text-align: left;"> Buttons marked "Select All" and "Select None" for </td>
</tr>
<tr>
 <td style="text-align: left;"> 
           </td><td style="text-align: left;"> selecting and clearing all the check boxes, respectively.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>4</b> </td><td style="text-align: left;"> A "Clean" button that deletes files in the working directory </td>
</tr>
<tr>
 <td style="text-align: left;">
           </td><td style="text-align: left;"> matching one of the following criteria: </td>
</tr>
<tr>
 <td style="text-align: left;">
           </td><td style="text-align: left;"> (i) file name matches both an expansion of a concatenation of a </td>
</tr>
<tr>
 <td style="text-align: left;">
           </td><td style="text-align: left;"> prefix in the entry box and a suffix chosen with a check box; or </td>
</tr>
<tr>
 <td style="text-align: left;">
           </td><td style="text-align: left;"> (ii) file name matches an expansion of a file chosen with a check box.
  </td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Anisa Egeli, Vancouver Island University, Nanaimo BC
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  cleanProj(prefix="foo",suffix=c(".a*",".b?",".c","-old.d"),files=c("red","blue"))
})

## End(Not run)
</code></pre>

<hr>
<h2 id='cleanWD'>Launch a GUI for File Deletion</h2><span id='topic+cleanWD'></span>

<h3>Description</h3>

<p>Launches a new window which contains an interface for deleting 
specified files from the working directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cleanWD(files)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cleanWD_+3A_files">files</code></td>
<td>
<p>character vector of file names used for clean options.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All arguments may contain wildcard characters (<code>"*"</code> to match 0 or
more characters, <code>"?"</code> to match any single character).
</p>
<p>The GUI includes the following:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <b>1</b> </td><td style="text-align: left;"> Check boxes for each suffix in the <code>suffix</code> argument and </td>
</tr>
<tr>
 <td style="text-align: left;">
           </td><td style="text-align: left;"> for each file name in the <code>files</code> argument.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>2</b> </td><td style="text-align: left;"> Buttons marked "Select All" and "Select None" for </td>
</tr>
<tr>
 <td style="text-align: left;"> 
           </td><td style="text-align: left;"> selecting and clearing all the check boxes, respectively.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>3</b> </td><td style="text-align: left;"> A "Clean" button that deletes files in the working directory </td>
</tr>
<tr>
 <td style="text-align: left;">
           </td><td style="text-align: left;"> matching file name expansion of files chosen with a check box.
  </td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  cleanWD(c("*.bak","*.tmp","junk*"))
})

## End(Not run)
</code></pre>

<hr>
<h2 id='clearAll'>Remove all R Objects From a Specified Environment</h2><span id='topic+clearAll'></span>

<h3>Description</h3>

<p>Generic function to clear all objects from .RData in R
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clearAll(hidden=TRUE, verbose=TRUE, PBSsave=TRUE, pos=".PBSmodEnv")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clearAll_+3A_hidden">hidden</code></td>
<td>
<p>if <code>TRUE</code>, remove variables that start with a dot(.).</p>
</td></tr>
<tr><td><code id="clearAll_+3A_verbose">verbose</code></td>
<td>
<p>if <code>TRUE</code>, report all removed items.</p>
</td></tr>
<tr><td><code id="clearAll_+3A_pbssave">PBSsave</code></td>
<td>
<p>if <code>TRUE</code>, do not remove <code>.PBSmod</code>.</p>
</td></tr>
<tr><td><code id="clearAll_+3A_pos">pos</code></td>
<td>
<p>The pos argument can specify the environment in which to look
for the object in any of several ways: as an integer (the position in
the search list); as the character string name of an element in the
search list; or as an environment (including using <code>sys.frame</code> to access
the currently active function calls).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jon T. Schnute, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>

<hr>
<h2 id='clearPBSext'>Clear File Extension Associations</h2><span id='topic+clearPBSext'></span>

<h3>Description</h3>

<p>Disassociate any number of file extensions from commands previously saved
with <code>setPBSext</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clearPBSext(ext)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clearPBSext_+3A_ext">ext</code></td>
<td>
<p>optional character vector of file extensions to clear; if
unspecified, all associations are removed</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+setPBSext">setPBSext</a></code>, <code><a href="#topic+getPBSext">getPBSext</a></code>, <code><a href="#topic+openFile">openFile</a></code>
</p>

<hr>
<h2 id='clearRcon'>Clear the R Console / Focus on the RGui Window</h2><span id='topic+clearRcon'></span><span id='topic+focusRgui'></span>

<h3>Description</h3>

<p>Clear the R console window or focus on the RGui window using Visual Basic shell scripts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clearRcon(os=.Platform$OS.type)
focusRgui(os=.Platform$OS.type)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clearRcon_+3A_os">os</code></td>
<td>
<p>operating system (e.g., <code>"windows"</code>, <code>"unix"</code>). </p>
</td></tr>
</table>


<h3>Details</h3>

<p>Creates a VB shell script file called <code>clearRcon.vbs</code> or <code>focusRgui.vbs</code>
in R's temporary working directory, then executes the script using the <code>shell</code> command.
</p>
<p>While <code>clearRcon</code> clears the R console, <code>focusRgui</code> returns the desktop 
focus back to the RGui window.
</p>
<p>These commands will only work on Windows operating platforms, using the system's executable <br />
<code>%SystemRoot%\system32\cscript.exe</code>.
</p>


<h3>Author(s)</h3>

<p>Norm Olsen, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cleanWD">cleanWD</a></code>, <code><a href="#topic+clearPBSext">clearPBSext</a></code>, <code><a href="#topic+clearWinVal">clearWinVal</a></code> 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  createWin( c("window title=Focus",
    "button text=\"Go to RGui\" width=20 bg=aliceblue func=focusRgui"), astext=T)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='clearWinVal'>Remove all Current Widget Variables</h2><span id='topic+clearWinVal'></span>

<h3>Description</h3>

<p>Remove all global variables that share a name in common with any widget variable name 
defined in <br /> <code>names(getWinVal())</code>. Use this function with caution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clearWinVal()</code></pre>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getWinVal">getWinVal</a></code>
</p>

<hr>
<h2 id='clipVector'>Clip a Vector at One or Both Ends</h2><span id='topic+clipVector'></span>

<h3>Description</h3>

<p>Clip a vector at one or both ends using the specified clip 
pattern to match.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clipVector(vec, clip, end=0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clipVector_+3A_vec">vec</code></td>
<td>
<p>vector object to clip</p>
</td></tr>
<tr><td><code id="clipVector_+3A_clip">clip</code></td>
<td>
<p>value or string specifying repeated values to clip from ends</p>
</td></tr>
<tr><td><code id="clipVector_+3A_end">end</code></td>
<td>
<p>end to clip <code>clip</code> from: 0=both, 1=front, 2=back</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the vector is named, the names are retained. Otherwise,
element positions are assigned as the vector's names.
</p>


<h3>Value</h3>

<p>Clipped vector with names.
</p>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

 
<p><code><a href="#topic+createVector">createVector</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  x=c(0,0,0,0,1,1,1,1,0,0)
  print(clipVector(x,0))

  x=c(TRUE,TRUE,FALSE,TRUE)
  print(clipVector(x,TRUE))

  x=c("red","tide","red","red")
  print(clipVector(x,"red",2))
})
</code></pre>

<hr>
<h2 id='closeWin'>Close GUI Window(s)</h2><span id='topic+closeWin'></span>

<h3>Description</h3>

<p>Close (destroy) one or more windows made with <code>createWin</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>closeWin(name)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="closeWin_+3A_name">name</code></td>
<td>
<p>a vector of window names that indicate which windows to close. These 
names appear in the <em>window description file</em>(s) on the line(s) defining WINDOW widgets.
If <code>name</code> is omitted, all active windows will be closed.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+createWin">createWin</a></code>
</p>

<hr>
<h2 id='compileC'>Compile a C File into a Shared Library Object</h2><span id='topic+compileC'></span>

<h3>Description</h3>

<p>This function provides an alternative to using R's <code>SHLIB</code> 
command to compile C code into a shared library object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compileC(file, lib="", options="", logWindow=TRUE, logFile=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compileC_+3A_file">file</code></td>
<td>
<p>name of the file to compile.</p>
</td></tr>
<tr><td><code id="compileC_+3A_lib">lib</code></td>
<td>
<p>name of shared library object (without extension).</p>
</td></tr>
<tr><td><code id="compileC_+3A_options">options</code></td>
<td>
<p>linker options (in one string) to prepend to a compilation command.</p>
</td></tr>
<tr><td><code id="compileC_+3A_logwindow">logWindow</code></td>
<td>
<p>if <code>TRUE</code>, a log window containing the compiler output will be displayed.</p>
</td></tr>
<tr><td><code id="compileC_+3A_logfile">logFile</code></td>
<td>
<p>if <code>TRUE</code>, a log file containing the compiler output will be created.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>lib=""</code>, it will take the same name as <code>file</code> (with a different extension).
</p>
<p>If an object with the same name has already been dynamically loaded in R, 
it will be unloaded automatically for recompilation.
</p>
<p>The name of the log file, if created, uses the string value from <code>lib</code> 
concatenated with <code>".log"</code>.
</p>


<h3>Author(s)</h3>

<p>Anisa Egeli, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+loadC">loadC</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  cwd = getwd()
  edir &lt;- system.file("examples", package = "PBSmodelling" )
  file.copy(paste(edir,"fib.c",sep="/"), tempdir(), overwrite=TRUE)
  setwd(tempdir())
  compileC("fib.c", lib="myLib", options="myObj.o", logWindow=FALSE)
  print(list.files())
  setwd(cwd)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='compileDescription'>Convert and Save a Window Description as a List</h2><span id='topic+compileDescription'></span>

<h3>Description</h3>

<p>Convert a <em>window description file</em> (ASCII markup file) to an equivalent 
<em>window description list</em>. The output list (an ASCII file containing R-source code) 
is complete, i.e., all default values have been added.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compileDescription(descFile, outFile)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compileDescription_+3A_descfile">descFile</code></td>
<td>
<p>name of <em>window description file</em> (markup file).</p>
</td></tr>
<tr><td><code id="compileDescription_+3A_outfile">outFile</code></td>
<td>
<p>name of output file containing R source code.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <em>window description file</em> <code>descFile</code> is converted to a list, 
which is then converted to R code, and saved to <code>outFile</code>.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+parseWinFile">parseWinFile</a></code>, <code><a href="#topic+createWin">createWin</a></code>
</p>

<hr>
<h2 id='convSlashes'> Convert Slashes from UNIX to DOS </h2><span id='topic+convSlashes'></span>

<h3>Description</h3>

<p>Convert slashes in a string from &lsquo;<span class="samp">&#8288;/&#8288;</span>&rsquo; to &lsquo;<span class="samp">&#8288;\\&#8288;</span>&rsquo; if the 
operating system is &lsquo;<span class="samp">&#8288;windows&#8288;</span>&rsquo;. Do the reverse if the OS is
&lsquo;<span class="samp">&#8288;unix&#8288;</span>&rsquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convSlashes(expr, os=.Platform$OS.type, addQuotes=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convSlashes_+3A_expr">expr</code></td>
<td>
<p> String value (usually a system pathway). </p>
</td></tr>
<tr><td><code id="convSlashes_+3A_os">os</code></td>
<td>
<p> operating system (either <code>"windows"</code> or <code>"unix"</code>). </p>
</td></tr>
<tr><td><code id="convSlashes_+3A_addquotes">addQuotes</code></td>
<td>
<p> logical: if <code>TRUE</code>, enclose the string expression
in escaped double quotation marks. </p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the input string modified to have the appropriate slashes for the 
specified operating system.
</p>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>

<hr>
<h2 id='createVector'>Create a GUI with a Vector Widget</h2><span id='topic+createVector'></span>

<h3>Description</h3>

<p>Create a basic window containing a vector and a submit button. 
This provides a quick way to create a window without the need 
for a <em>window description file</em>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createVector(vec, vectorLabels=NULL, func="", 
    windowname="vectorwindow", env=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createVector_+3A_vec">vec</code></td>
<td>
<p>a vector of strings representing widget variables. 
The values in <code>vec</code> become the default values for the widget.
If <code>vec</code> is named, the names are used as the variable names. </p>
</td></tr>
<tr><td><code id="createVector_+3A_vectorlabels">vectorLabels</code></td>
<td>
<p>an optional vector of strings to use as labels above each widget.</p>
</td></tr>
<tr><td><code id="createVector_+3A_func">func</code></td>
<td>
<p>string name of function to call when new data are entered 
in widget boxes or when &quot;GO&quot; is pressed.</p>
</td></tr>
<tr><td><code id="createVector_+3A_windowname">windowname</code></td>
<td>
<p>unique window name, required if multiple vector windows are created.</p>
</td></tr>
<tr><td><code id="createVector_+3A_env">env</code></td>
<td>
<p>an environment in which to evaluate widget callback functions.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+createWin">createWin</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
#user defined function which is called on new data  
drawLiss &lt;- function() {
  oldpar = par(no.readonly=TRUE); on.exit(par(oldpar))
  getWinVal(scope="L");
  tt &lt;- 2*pi*(0:k)/k; x &lt;- sin(2*pi*m*tt); y &lt;- sin(2*pi*(n*tt+phi));
  plot(x,y,type="p"); invisible(NULL); };

#create the vector window
createVector(c(m=2, n=3, phi=0, k=1000), func="drawLiss",
  vectorLabels=c("x cycles","y cycles", "y phase", "points"));
})

## End(Not run)
</code></pre>

<hr>
<h2 id='createWin'>Create a GUI Window</h2><span id='topic+createWin'></span>

<h3>Description</h3>

<p>Create a GUI window with widgets using instructions from a 
Window Description File (aka mark-up file) .
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  createWin( fname, astext=FALSE, env=NULL )
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createWin_+3A_fname">fname</code></td>
<td>
<p>name of <em>window description file</em> 
or list returned from <code>parseWinFile</code>.</p>
</td></tr>
<tr><td><code id="createWin_+3A_astext">astext</code></td>
<td>
<p>logical: if <code>TRUE</code>, interpret <code>fname</code> 
as a vector of strings with each element representing a line 
in a <em>window description file</em>.</p>
</td></tr>
<tr><td><code id="createWin_+3A_env">env</code></td>
<td>
<p>an environment in which to evaluate widget callback functions; see example.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Generally, the markup file contains a single widget per line. However, widgets 
can span multiple lines by including a backslash ('\') character at the end of 
a line, prompting the suppression of the newline character.
</p>
<p>For more details on widget types and markup file, see &ldquo;PBSModelling-UG.pdf&rdquo; 
in the R directory <br /> <code>.../library/PBSmodelling/doc</code>.
</p>
<p>It is possible to use a Window Description List produced by 
<code>compileDescription</code> rather than a file name for <code>fname</code>.
</p>
<p>Another alternative is to pass a vector of characters to <code>fname</code> and set 
<code>astext=T</code>. This vector represents the file contents where each element 
is equivalent to a new line in the <em>window description file</em>.
</p>


<h3>Note</h3>

<p>Microsoft Windows users may experience difficulties switching focus between the 
R console and GUI windows. The latter frequently disappear from the screen and 
need to be reselected (either clicking on the task bar or pressing &lt;Alt&gt;&lt;Tab&gt;. 
This issue can be resolved by switching from MDI to SDI mode. From the R console 
menu bar, select &lt;Edit&gt; and &lt;GUI preferences&gt;, then change the value of 
&ldquo;single or multiple windows&rdquo; to SDI.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+parseWinFile">parseWinFile</a></code>, <code><a href="#topic+getWinVal">getWinVal</a></code>, <code><a href="#topic+setWinVal">setWinVal</a></code>
</p>
<p><code><a href="#topic+closeWin">closeWin</a></code>, <code><a href="#topic+compileDescription">compileDescription</a></code>, <code><a href="#topic+createVector">createVector</a></code>
</p>
<p><code><a href="#topic+initHistory">initHistory</a></code> for an example of using <code>astext=TRUE</code>
</p>
<p><code><a href="base.html#topic+environment">environment</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# See file .../library/PBSmodelling/testWidgets/LissWin.txt
# Calculate and draw the Lissajous figure
local(envir=.PBSmodEnv,expr={
  drawLiss &lt;- function() {
    oldpar = par(no.readonly=TRUE); on.exit(par(oldpar))
    getWinVal(scope="L"); ti=2*pi*(0:k)/k;
    x=sin(2*pi*m*ti);     y=sin(2*pi*(n*ti+phi));
    plot(x,y,type=ptype); invisible(NULL); };
  createWin(system.file("testWidgets/LissWin.txt",package="PBSmodelling"));
})

############################################################
# Environment example:
# function in global
local(envir=.PBSmodEnv,expr={
  hello &lt;- function() {
    stop( "I shouldn't be called" )
  }

newNameGreeter &lt;- function( name ) {
  # method to display window
  greet &lt;- function() {
    createWin(c("button \"Say hello\" func=hello"), astext=TRUE,
      env=parent.env(environment()))
  }
  # hello method will refer to the name in this local scope
  hello &lt;- function() {
    cat( "Hello", name, "\n" )
  }
  # return functions which the user can call directly
  return( list( greet=greet, hello=hello ) )
}
alex &lt;- newNameGreeter( "Alex" )
jon  &lt;- newNameGreeter( "Jon" )

alex$hello() # prints hello Alex
jon$hello()  # prints hello Jon
alex$greet() # creates a GUI with a button, which will print "hello Alex" when pushed
})

## End(Not run)
</code></pre>

<hr>
<h2 id='declareGUIoptions'>Declare Option Names that Correspond with Widget Names</h2><span id='topic+declareGUIoptions'></span>

<h3>Description</h3>

<p>This function allows a GUI creator to specify widget names that 
correspond to names in PBS options. These widgets can then be 
used to load and set PBS options using <code>getGUIoptions</code> and 
<code>setGUIoptions</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>declareGUIoptions(newOptions)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="declareGUIoptions_+3A_newoptions">newOptions</code></td>
<td>
<p>a character vector of option names</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>declareGUIoptions</code> is typically called in a GUI initialization function.
The option names are remembered and used for the functions 
<code>getGUIoptions</code>, <code>setGUIoptions</code>, and <code>promptSave</code>.
</p>


<h3>Author(s)</h3>

<p>Anisa Egeli, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getGUIoptions">getGUIoptions</a></code>, <code><a href="#topic+setGUIoptions">setGUIoptions</a></code>,
<code><a href="#topic+promptWriteOptions">promptWriteOptions</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  declareGUIoptions("editor")
})

## End(Not run)
</code></pre>

<hr>
<h2 id='doAction'> Execute Action Created by a Widget </h2><span id='topic+doAction'></span>

<h3>Description</h3>

<p>Executes the action expression formulated by the user and 
written as an &lsquo;<span class="samp">&#8288;action&#8288;</span>&rsquo; by a widget.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>doAction(act)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="doAction_+3A_act">act</code></td>
<td>
<p>string representing an expression that can be executed</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>act</code> is missing, <code>doAction</code> looks for it in the action
directory of the window's widget directory in <code>.PBSmod</code>. This 
action can be accessed through <code>getWinAct()[1]</code>.
</p>
<p>Due to parsing complications, the expression <code>act</code> translates various symbols. <br />
The function translates:
</p>
<p>1. The back tick character &lsquo;<span class="samp">&#8288;`&#8288;</span>&rsquo; to a double quote &lsquo;<span class="samp">&#8288;"&#8288;</span>&rsquo; character. For example,
</p>
<pre>"openFile(paste(getWinVal()$prefix,`.tpl`,sep=``))"</pre>
<p>2. Underscore period &lsquo;<span class="samp">&#8288;_.&#8288;</span>&rsquo; to four back slashes and one period &lsquo;<span class="samp">&#8288;\\\\.&#8288;</span>&rsquo;. For example,
</p>
<pre>"poop=strsplit(`some.thing.else`,split=`_.`)"</pre>


<h3>Value</h3>

<p>Invisibly returns the string expression <code>expr</code>.
</p>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+createWin">createWin</a></code>, <code><a href="#topic+evalCall">evalCall</a></code>,
<code><a href="#topic+getWinAct">getWinAct</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  createWin("button text=\"list objects\" func=doAction action=print(ls(all.names=TRUE))",
    astext=TRUE)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='dot-PBSmodEnv'>PBSmodelling Environment</h2><span id='topic+.PBSmodEnv'></span>

<h3>Description</h3>

<p>An environment set aside for PBSmodelling.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.PBSmodEnv</code></pre>


<h3>Format</h3>

<p>A new environment with a <code>.GlobalEnv</code> parent.
</p>


<h3>Details</h3>

<p>The environment is created in <code>'zzz.r'</code> and is used by
<code>PBSmodelling</code> functions <code>'lisp'</code>, <code>'tget'</code>, 
<code>'tput'</code>, <code>'tprint'</code>, and <code>'tcall'</code>.
</p>


<h3>Source</h3>

<p>Generated by a call to the base function <code>new.env()</code>.
</p>


<h3>See Also</h3>

<p>In <span class="pkg">PBSmodelling</span>:<br />
<code><a href="#topic+lisp">lisp</a></code>,
<code><a href="#topic+tget">tget</a></code>,
<code><a href="#topic+packList">packList</a></code>,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>lisp(.PBSmodEnv)
</code></pre>

<hr>
<h2 id='dot-win.funs'>
GUI Windows Wrappers
</h2><span id='topic+.win.chFile'></span><span id='topic+.win.chTest'></span><span id='topic+.win.closeALL'></span><span id='topic+.win.closeChoice'></span><span id='topic+.win.closeSDE'></span><span id='topic+.win.makeChoice'></span><span id='topic+.win.restoreCWD'></span><span id='topic+.win.runExHelperQuit'></span><span id='topic+.win.tcall'></span><span id='topic+.win.tget'></span><span id='topic+.win.tprint'></span>

<h3>Description</h3>

<p>Wrapper functions to run existing or temporary functions from a GUI's function call.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.win.chFile()
.win.chTest()
.win.closeALL()
.win.closeChoice()
.win.closeSDE()
.win.makeChoice()
.win.restoreCWD()
.win.runExHelperQuit()
.win.tcall()
.win.tget()
.win.tprint()
</code></pre>


<h3>Details</h3>

<p>PBSmodelling Windows (Graphical User Interfaces or GUIs) call
wrapper functions that call non-GUI functions in the package.
</p>


<h3>Author(s)</h3>

<p><a href="mailto:rowan.haigh@dfo-mpo.gc.ca">Rowan Haigh</a>, Program Head &ndash; Offshore Rockfish<br />
Pacific Biological Station (PBS), Fisheries &amp; Oceans Canada (DFO), Nanaimo BC<br />
<em>locus opus</em>: Offsite, Vancouver BC<br />
Last modified <code>Rd: 2023-10-25</code>
</p>


<h3>See Also</h3>

<p>In <span class="pkg">PBSmodelling</span>:<br />
<code><a href="#topic+getWinAct">getWinAct</a></code>,
<code><a href="#topic+getWinVal">getWinVal</a></code>,
<code><a href="#topic+runExamples">runExamples</a></code>,
<code><a href="#topic+tget">tget</a></code>
</p>

<hr>
<h2 id='drawBars'>Draw a Linear Barplot on the Current Plot</h2><span id='topic+drawBars'></span>

<h3>Description</h3>

<p>Draw a linear barplot on the current plot. Fill if desired.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drawBars(x, y, width, base=0, fill=NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drawBars_+3A_x">x</code></td>
<td>
<p>x-coordinates</p>
</td></tr>
<tr><td><code id="drawBars_+3A_y">y</code></td>
<td>
<p>y-coordinates</p>
</td></tr>
<tr><td><code id="drawBars_+3A_width">width</code></td>
<td>
<p>bar width, computed if missing</p>
</td></tr>
<tr><td><code id="drawBars_+3A_base">base</code></td>
<td>
<p>y-value of the base of each bar</p>
</td></tr>
<tr><td><code id="drawBars_+3A_fill">fill</code></td>
<td>
<p>valid R colour to fill the bars</p>
</td></tr>
<tr><td><code id="drawBars_+3A_...">...</code></td>
<td>
<p>further graphical parameters (see <code>par</code>) for the <code>lines</code> function.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jon T. Schnute, Scientist Emeritus,<br />
Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
    if (dev.cur()&gt;1) {
      oldpar=par(no.readonly=TRUE); on.exit(par(oldpar)) }
  plot(0:10,0:10,type="n")
  drawBars(x=1:9,y=9:1,col="deepskyblue4",fill="cyan",lwd=3)
})
</code></pre>

<hr>
<h2 id='evalCall'> Evaluate a Function Call </h2><span id='topic+evalCall'></span>

<h3>Description</h3>

<p>Evaluates a function call after resolving potential
argument conflicts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>evalCall(fn, argu, ..., envir = parent.frame(),
    checkdef=FALSE, checkpar=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="evalCall_+3A_fn">fn</code></td>
<td>
<p> R function </p>
</td></tr>
<tr><td><code id="evalCall_+3A_argu">argu</code></td>
<td>
<p> list of explicitly named arguments and their values to pass to <code>fn</code>. </p>
</td></tr>
<tr><td><code id="evalCall_+3A_...">...</code></td>
<td>
<p> additional arguments that a user might wish to pass to <code>fn</code>. </p>
</td></tr>
<tr><td><code id="evalCall_+3A_envir">envir</code></td>
<td>
<p> environment from which the call originates (currently has no use or effect). </p>
</td></tr>
<tr><td><code id="evalCall_+3A_checkdef">checkdef</code></td>
<td>
<p> logical: if <code>TRUE</code>, gather additional formal arguments from the 
functions default function. </p>
</td></tr>
<tr><td><code id="evalCall_+3A_checkpar">checkpar</code></td>
<td>
<p> logical: if <code>TRUE</code>, gather additional graphical arguments from 
the list object <code>par</code>. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function builds a call to the specified function and executes it. 
During the build, optional arguments (...) are checked for <br />
(i) duplication with explicit arguments <code>argu</code>: if any are duplicated,
the user-supplied arguments supersede the explicit ones; <br />
(ii) availability as usable arguments in <code>fn</code>, <code>fn.default</code> if
<code>checkdef=TRUE</code>, and <code>par</code> if <code>checkpar=TRUE</code>.
</p>


<h3>Value</h3>

<p>Invisibly returns the string expression of the function call that is
passed to <code>eval(parse(text=expr))</code>.
</p>


<h3>Note</h3>

<p>Sometimes the user may wish to pass arguments into a function to be used
by other functions within, but may not want all the arguments to be used, 
depending on the functions subsequently called. In this case, the user needs
to create a list object called <code>dots</code>, which is passed to <code>evalCall</code>.
</p>
<p>For instance, if the user passes <code>lwd=4</code> but only wants this 
used in a call to <code>lines</code> but not in a call to <code>points</code>,
the function might look like this:
</p>
<pre>
myfunc = function(x=seq(0,360,5), ...) {
  pdots = ldots = list(...)
  pdots[["lwd"]] = NULL
  ldots[["col"]] = "cyan"
  xrad = x*pi/180
  plot(sin(xrad),type="n")
  evalCall(lines, argu=list(x=sin(xrad)), dots=ldots, checkpar=TRUE)
  evalCall(points,argu=list(x=sin(xrad)), dots=pdots, checkpar=TRUE)
}
myfunc(lwd=4,pch=20,col=" blue")
</pre>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+doAction">doAction</a></code>, <code><a href="#topic+plotAsp">plotAsp</a></code>  
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)
  # A user may have a function that calls other functions
  # using specific defaults (e.g., blue triangles)
  #------------------------------------------------------
  pbsfun = function(..., use.evalCall=TRUE) {
    plotAsp(0,0,type="n",xlim=c(-1.5,1.5),ylim=c(-1.5,1.5),
      axes=FALSE, frame.plot=TRUE, xlab="",ylab="")
    if (use.evalCall)
      evalCall(polygon, ...,
        argu=list(x=c(-1,1,0),y=c(1,1,-1), col="dodgerblue", border="grey"))
    else
      polygon(x=c(-1,1,0),y=c(1,1,-1),col="dodgerblue",border="grey",...) 
  }
  par(mfrow=c(2,1))
  pbsfun(lwd=4,use.evalCall=FALSE)
  #------------------------------------------------------
  # But what if the user wants pink triangles?
  pbsfun(col="pink",lwd=4,use.evalCall=TRUE,checkpar=TRUE)
  par(oldpar)
})

# Without 'evalCall' an error occurs due to duplicated arguments
## Not run: pbsfun(col="pink",lwd=4,use.evalCall=FALSE)
</code></pre>

<hr>
<h2 id='expandGraph'>Expand the Plot Area by Adjusting Margins</h2><span id='topic+expandGraph'></span>

<h3>Description</h3>

<p>Optimize the plotting region(s) by minimizing margins.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expandGraph(mar=c(4,3,1.2,0.5), mgp=c(1.6,.5,0),...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expandGraph_+3A_mar">mar</code></td>
<td>
<p>numerical vector of the form 'c(bottom, left, top, right)'
specifying the margins of the plot</p>
</td></tr>
<tr><td><code id="expandGraph_+3A_mgp">mgp</code></td>
<td>
<p>numerical vector of the form 'c(axis title, axis labels, axis line)'
specifying the margins for axis title, axis labels, and axis line</p>
</td></tr>
<tr><td><code id="expandGraph_+3A_...">...</code></td>
<td>
<p>additional graphical parameters to be passed to <code>par</code></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jon T. Schnute, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+resetGraph">resetGraph</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)
  expandGraph(mfrow=c(2,1));
  tt=seq(from=-10, to=10, by=0.05);

  plot(tt,sin(tt), xlab="this is the x label",  ylab="this is the y label", 
    main="main title", sub="sometimes there is a \"sub\" title")
  plot(cos(tt),sin(tt*2), xlab="cos(t)", ylab="sin(2 t)", main="main title", 
    sub="sometimes there is a \"sub\" title")
  par(oldpar)
})
</code></pre>

<hr>
<h2 id='exportHistory'>Export a Saved History</h2><span id='topic+exportHistory'></span>

<h3>Description</h3>

<p>Export the current history list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportHistory(hisname="", fname="")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exportHistory_+3A_hisname">hisname</code></td>
<td>
<p>name of the history list to export. If set to <code>""</code>, 
the value from <code>getWinAct()[1]</code> will be used instead.</p>
</td></tr>
<tr><td><code id="exportHistory_+3A_fname">fname</code></td>
<td>
<p>file name where history will be saved. If it is set to <code>""</code>, 
a &lt;Save As&gt; window will be displayed.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+importHistory">importHistory</a></code>, <code><a href="#topic+initHistory">initHistory</a></code>
</p>

<hr>
<h2 id='findPat'>Search a Character Vector to Find Multiple Patterns</h2><span id='topic+findPat'></span>

<h3>Description</h3>

<p>Use all available patterns in <code>pat</code> to search in <code>vec</code>, 
and return the matched elements in <code>vec</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findPat(pat, vec)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="findPat_+3A_pat">pat</code></td>
<td>
<p>character vector of patterns to match in <code>vec</code></p>
</td></tr>
<tr><td><code id="findPat_+3A_vec">vec</code></td>
<td>
<p>character vector where matches are sought</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of all matched strings.
</p>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  #find all strings with a vowel, or that start with a number
  print(findPat(c("[aeiou]", "^[0-9]"), c("hello", "WORLD", "1over")))
})
</code></pre>

<hr>
<h2 id='findPrefix'>Find a Prefix Based on Names of Existing Files</h2><span id='topic+findPrefix'></span><span id='topic+findSuffix'></span>

<h3>Description</h3>

<p>Find the prefixes or suffixes of files with a given suffix or prefix in a directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findPrefix(suffix,path=".")
findSuffix(prefix,path=".")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="findPrefix_+3A_suffix">suffix</code></td>
<td>
<p>character vector of suffixes</p>
</td></tr>
<tr><td><code id="findPrefix_+3A_prefix">prefix</code></td>
<td>
<p>character vector of prefixes</p>
</td></tr>
<tr><td><code id="findPrefix_+3A_path">path</code></td>
<td>
<p>directory to look for files in</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function <code>findPrefix</code> locates all files in a directory that end with
one of the provided suffixes; where as <code>findSuffix</code> locates all files
that start with the given prefixes.
</p>


<h3>Value</h3>

<p>A character vector of all the prefixes or sufixes of files in the working directory that
matched to one of the given suffixes.
</p>


<h3>Author(s)</h3>

<p>Anisa Egeli, Vancouver Island University, Nanaimo BC
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  edir = system.file("examples", package="PBSmodelling")
  print(findPrefix(suffix=c(".txt", ".r"),path=edir)); cat("\n")

  #or use R's dir for similar functionality
  print(dir(pattern="txt$",path=edir)); cat("\n")
  print(dir(pattern="^[a-h]",path=edir)); cat("\n")
})
</code></pre>

<hr>
<h2 id='findProgram'>Locates a program in the PATH environment variable </h2><span id='topic+findProgram'></span>

<h3>Description</h3>

<p>Returns the complete filename and path of a program in the PATH environment variable.
This is a wrapper for <code>Sys.which</code>, and may be deprecated in the future.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findProgram( name, includename=FALSE )
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="findProgram_+3A_name">name</code></td>
<td>
<p>name of a program to locate</p>
</td></tr>
<tr><td><code id="findProgram_+3A_includename">includename</code></td>
<td>
<p>boolean: if true, include the filename in the path returned, otherwise just the directory.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A string containing the location of the program. NULL is returned if the program is not located.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+Sys.which">Sys.which</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  print(list(
  gcc =     findProgram( "gcc" ),
  notepad = findProgram( "notepad" ),
  R       = findProgram( "R", includename=TRUE ) ))
})
</code></pre>

<hr>
<h2 id='focusWin'>Set the Focus on a Particular Window</h2><span id='topic+focusWin'></span>

<h3>Description</h3>

<p>Bring the specified window into focus, and set it as the active window. 
<code>focusWin</code> will fail to bring the window into focus if it is called from the R 
console, since the R console returns focus to itself once a function returns. 
However, it will work if <code>focusWin</code> is called as a result of calling a function 
from the GUI window. (i.e., pushing a button or any other widget that has a 
function argument).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>focusWin(winName, winVal=TRUE)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="focusWin_+3A_winname">winName</code></td>
<td>
<p>name of window to focus</p>
</td></tr>
<tr><td><code id="focusWin_+3A_winval">winVal</code></td>
<td>
<p>if <code>TRUE</code>, associate <code>winName</code> with the default window 
for <code>setWinVal</code> and <code>getWinVal</code></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
focus &lt;- function() {
  winName &lt;- getWinVal()$select;
  focusWin(winName);
  mess = paste("Calling focusWin(\"", winName, "\")\n",
    "getWinVal()$myvar = ", getWinVal()$myvar, "\n\n", sep="",collapse="")
  cat(mess); invisible()
}
#create three windows named win1, win2, win3
#each having three radio buttons, which are used to change the focus
for(i in 1:3) {
  winDesc &lt;- c(
    paste('window onclose=closeWin name=win',i,' title="Win',i,'"', sep=''),
    paste('entry myvar ', i, sep=''),
    'radio name=select value=win1 text="one" function=focus mode=character',
    'radio name=select value=win2 text="two" function=focus mode=character',
    'radio name=select value=win3 text="three" function=focus mode=character');
  createWin(winDesc, astext=TRUE); };
})

## End(Not run)
</code></pre>

<hr>
<h2 id='genMatrix'>Generate Test Matrices for plotBubbles</h2><span id='topic+genMatrix'></span>

<h3>Description</h3>

<p>Generate a test matrix of random numbers (<code>mu</code> = mean 
and <code>signa</code> = standard deviation), primarily for <code>plotBubbles</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>genMatrix(m,n,mu=0,sigma=1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="genMatrix_+3A_m">m</code></td>
<td>
<p>number of rows</p>
</td></tr>
<tr><td><code id="genMatrix_+3A_n">n</code></td>
<td>
<p>number of columns</p>
</td></tr>
<tr><td><code id="genMatrix_+3A_mu">mu</code></td>
<td>
<p>mean of normal distribution</p>
</td></tr>
<tr><td><code id="genMatrix_+3A_sigma">sigma</code></td>
<td>
<p>standard deviation of normal distribution</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>m</code> by <code>n</code> matrix with normally distributed random values.
</p>


<h3>Author(s)</h3>

<p>Jon T. Schnute, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plotBubbles">plotBubbles</a></code> 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  plotBubbles(genMatrix(20,6))
})
</code></pre>

<hr>
<h2 id='getChoice'>Choose One String Item from a List of Choices</h2><span id='topic+getChoice'></span>

<h3>Description</h3>

<p>Prompts the user to choose one string item from a list of 
choices displayed in a GUI. The simplest case <code>getChoice()</code> 
yields <code>TRUE</code> or <code>FALSE</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getChoice(choice=c("Yes","No"), question="Make a choice: ",
          winname="getChoice", horizontal=TRUE, radio=FALSE,
          qcolor="blue", gui=FALSE, quiet=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getChoice_+3A_choice">choice</code></td>
<td>
<p>vector of strings from which to choose.</p>
</td></tr>
<tr><td><code id="getChoice_+3A_question">question</code></td>
<td>
<p>question or prompting statement.</p>
</td></tr>
<tr><td><code id="getChoice_+3A_winname">winname</code></td>
<td>
<p>window name for the <code>getChoice</code> GUI.</p>
</td></tr>
<tr><td><code id="getChoice_+3A_horizontal">horizontal</code></td>
<td>
<p>logical: if <code>TRUE</code>, display the choices horizontally, else vertically.</p>
</td></tr>
<tr><td><code id="getChoice_+3A_radio">radio</code></td>
<td>
<p>logical: if <code>TRUE</code>, display the choices as radio buttons, else as buttons.</p>
</td></tr>
<tr><td><code id="getChoice_+3A_qcolor">qcolor</code></td>
<td>
<p>colour for <code>question</code>.</p>
</td></tr>
<tr><td><code id="getChoice_+3A_gui">gui</code></td>
<td>
<p>logical: if <code>TRUE</code>, <code>getChoice</code> is functional when called from a GUI,
else it is functional from command line programs.</p>
</td></tr>
<tr><td><code id="getChoice_+3A_quiet">quiet</code></td>
<td>
<p>logical: if <code>TRUE</code>, don't print the choice on the command line.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The user's choice is stored in <code>.PBSmod$options$getChoice</code> 
(or whatever <code>winname</code> is supplied).
</p>
<p><code>getChoice</code> generates an <code>onClose</code> function that returns focus
to the calling window (if applicable) and prints out the choice.
</p>


<h3>Value</h3>

<p>If called from a GUI (<code>gui=TRUE</code>), no value is returned directly. Rather, 
the choice is written to the PBS options workspace, accessible through 
<code>getPBSoptions("getChoice")</code> (or whatever <code>winname</code> was supplied).
</p>
<p>If called from a command line program (<code>gui=FASLE</code>), the choice is returned 
directly as a string scalar (e.g., <code>answer &lt;- getChoice(gui=F)</code> ). 
</p>


<h3>Note</h3>

 
<p>Microsoft Windows users may experience difficulties switching focus between the 
R console and GUI windows. The latter frequently disappear from the screen and 
need to be reselected (either clicking on the task bar or pressing &lt;Alt&gt;&lt;Tab&gt;. 
This issue can be resolved by switching from MDI to SDI mode. From the R console 
menu bar, select &lt;Edit&gt; and &lt;GUI preferences&gt;, then change the value of 
&ldquo;single or multiple windows&rdquo; to SDI.
</p>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

 
<p><code><a href="#topic+chooseWinVal">chooseWinVal</a></code>, <code><a href="#topic+getWinVal">getWinVal</a></code>, <code><a href="#topic+setWinVal">setWinVal</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#-- Example 1
local(envir=.PBSmodEnv,expr={
  getChoice(c("Fame","Fortune","Health","Beauty","Lunch"),
    "What do you want?",qcolor="red",gui=FALSE)
})

#-- Example 2
local(envir=.PBSmodEnv,expr={
  getChoice(c("Homer Simpson","Wilberforce Humphries","Miss Marple","Gary Numan"),
    "Who`s your idol?",horiz=FALSE,radio=TRUE,gui=FALSE)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='getGUIoptions'>Get PBS Options for Widgets</h2><span id='topic+getGUIoptions'></span>

<h3>Description</h3>

<p>Get the PBS options declared for GUI usage and set their 
corresponding widget values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getGUIoptions()
</code></pre>


<h3>Details</h3>

<p>The options declared using <code>declareGUIoptions</code> are 
copied from the R environment into widget values. These widgets 
should have names that match the names of their corresponding options.
</p>


<h3>Author(s)</h3>

<p>Anisa Egeli, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+declareGUIoptions">declareGUIoptions</a></code>, <code><a href="#topic+setGUIoptions">setGUIoptions</a></code>,
<code><a href="#topic+promptWriteOptions">promptWriteOptions</a></code>, <code><a href="#topic+readPBSoptions">readPBSoptions</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  getPBSoptions() #loads from default PBSoptions.txt
})

## End(Not run)
</code></pre>

<hr>
<h2 id='getOptions'>
Get and Set User Options
</h2><span id='topic+getOptions'></span><span id='topic+setOptions'></span>

<h3>Description</h3>

<p>Functions to get and set user options within an option class object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getOptions(option.object, key)
setOptions(option.object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getOptions_+3A_option.object">option.object</code></td>
<td>
<p>options class object used for storing package options</p>
</td></tr>
<tr><td><code id="getOptions_+3A_...">...</code></td>
<td>
<p>any number of user options to set where either (a) the
named argument is the option key and the value is the option value
or (b) the single unnamed argument is a list object where each named
list element is the option key and the value is the element's value</p>
</td></tr>
<tr><td><code id="getOptions_+3A_key">key</code></td>
<td>
<p>name of option to retrieve; if missing, all options are returned</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Value of the option specified by <code>key</code> (if specified) or a list
of all options (if missing).
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p>See <code><a href="#topic+PBSoptions-class">PBSoptions-class</a></code> for more details and 
an example that uses <span class="pkg">PBSmodelling</span>'s option management functions.
</p>

<hr>
<h2 id='getOptionsFileName'>
Get and Set File Name for Saving and Loading of Options
</h2><span id='topic+getOptionsFileName'></span><span id='topic+setOptionsFileName'></span>

<h3>Description</h3>

<p>Functions for retrieving and setting the default file name used by <code>loadOptions</code> and <code>saveOptions</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getOptionsFileName(option.object)
setOptionsFileName(option.object, name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getOptionsFileName_+3A_option.object">option.object</code></td>
<td>
<p>options class object used for storing package options</p>
</td></tr>
<tr><td><code id="getOptionsFileName_+3A_name">name</code></td>
<td>
<p>new name for default file name</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>getOptionsFileName</code>: the default file name
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+loadOptions">loadOptions</a></code>, <code><a href="#topic+saveOptions">saveOptions</a></code> <br />
See <code><a href="#topic+PBSoptions-class">PBSoptions-class</a></code> for more details and 
an example using <span class="pkg">PBSmodelling</span>'s option management functions.
</p>

<hr>
<h2 id='getOptionsPrefix'>
Get and Set GUI Prefix of Options Class
</h2><span id='topic+getOptionsPrefix'></span><span id='topic+setOptionsPrefix'></span>

<h3>Description</h3>

<p>The GUI prefix is used for determining which GUI variables are associated with a user option.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getOptionsPrefix(option.object)
setOptionsPrefix(option.object, prefix)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getOptionsPrefix_+3A_option.object">option.object</code></td>
<td>
<p>options class object used for storing package options</p>
</td></tr>
<tr><td><code id="getOptionsPrefix_+3A_prefix">prefix</code></td>
<td>
<p>new prefix to use</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>getOptionsPrefix</code>: a prefix string used to reference GUI variables
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p>See <code><a href="#topic+PBSoptions-class">PBSoptions-class</a></code> for more details and 
an example using <span class="pkg">PBSmodelling</span>'s option management functions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  # For the example, the options object is saved to the temporary environment;
  # however, a user would normally create the object in his/her workspace.
  .mypkg &lt;- new( "PBSoptions", filename="my_pkg.txt", 
    initial.options=list(pi=3.14), gui.prefix="opt" )

  #prefix the option "pi" with "opt" to get "optpi"
  createWin( "entry name=optpi", astext = TRUE )

  #the GUI variable "optpi" will be loaded with the option "pi"
  loadOptionsGUI( .mypkg )
})

## End(Not run)
</code></pre>

<hr>
<h2 id='getPBSext'>Get Command Associated With File Name Extension</h2><span id='topic+getPBSext'></span>

<h3>Description</h3>

<p>Display all locally defined file extensions and their associated commands, 
or search for the command associated with a specific file extension
<code>ext</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getPBSext(ext)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getPBSext_+3A_ext">ext</code></td>
<td>
<p><code>character</code> &ndash; optional string specifying a file extension.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Command associated with file extension.
</p>


<h3>Note</h3>

<p>These file associations are not saved from one <em>PBS Modelling</em> session to
the next unless explicitly saved and loaded (see <code>writePBSoptions</code> and
<code>readPBSoptions</code>).
</p>


<h3>Author(s)</h3>

<p><a href="mailto:alex@mofo.ca">Alex Couture-Beil</a>, Software Engineer<br />
Earthly Technologies, Victoria BC<br />
</p>
<p>Maintainer: <a href="mailto:rowan.haigh@dfo-mpo.gc.ca">Rowan Haigh</a>, Program Head &ndash; Offshore Rockfish<br />
Pacific Biological Station (PBS), Fisheries &amp; Oceans Canada (DFO), Nanaimo BC<br />
<em>locus opus</em>: Regional Headquarters (RHQ), Vancouver BC<br />
Last modified <code>Rd: 2023-01-05</code>
</p>


<h3>See Also</h3>

<p>In package <span class="pkg">PBSmodelling</span>:<br />
<code><a href="#topic+setPBSext">setPBSext</a></code>,
<code><a href="#topic+openFile">openFile</a></code>,
<code><a href="#topic+clearPBSext">clearPBSext</a></code>
</p>

<hr>
<h2 id='getPBSoptions'>Retrieve A User Option</h2><span id='topic+getPBSoptions'></span>

<h3>Description</h3>

<p>Get a previously defined user option.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getPBSoptions(option)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getPBSoptions_+3A_option">option</code></td>
<td>
<p>name of option to retrieve. If omitted, a list containing all options is returned.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Value of the specified option, or <code>NULL</code> if the specified option is not found.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

 <p><code><a href="#topic+getPBSext">getPBSext</a></code>, <code><a href="#topic+readPBSoptions">readPBSoptions</a></code> </p>

<hr>
<h2 id='getWinAct'>Retrieve the Last Window Action</h2><span id='topic+getWinAct'></span>

<h3>Description</h3>

<p>Get a string vector of actions (latest to earliest).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getWinAct(winName)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getWinAct_+3A_winname">winName</code></td>
<td>
<p>name of window to retrieve action from</p>
</td></tr>
</table>


<h3>Details</h3>

 
<p>When a function is called from a GUI, a string descriptor associated with 
the action of the function is stored internally (appended to the first position 
of the action vector). A user can utilize this action as a type of argument 
for programming purposes. The command <code>getWinAct()[1]</code> yields the latest action.
</p>


<h3>Value</h3>

<p>String vector of recorded actions (latest first).
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>

<hr>
<h2 id='getWinFun'>Retrieve Names of Functions Referenced in a Window</h2><span id='topic+getWinFun'></span>

<h3>Description</h3>

<p>Get a vector of all function names referenced by a window.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getWinFun(winName)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getWinFun_+3A_winname">winName</code></td>
<td>
<p>name of window, to retrieve its function list</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of function names referenced by a window.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>

<hr>
<h2 id='getWinVal'>Retrieve Widget Values for Use in R Code</h2><span id='topic+getWinVal'></span>

<h3>Description</h3>

<p>Get a list of variables defined and set by the GUI widgets. An optional 
argument <code>scope</code> directs the function to create local or global 
variables based on the list that is returned.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getWinVal(v=NULL, scope="", asvector=FALSE, winName="")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getWinVal_+3A_v">v</code></td>
<td>
<p>vector of variable names to retrieve from the GUI widgets. 
If <code>NULL</code>, <code>v</code> retrieves all variables from all GUI widgets.</p>
</td></tr>
<tr><td><code id="getWinVal_+3A_scope">scope</code></td>
<td>
<p>scope of the retrieval. The default sets no variables
in the non-GUI environment; <code>scope="L"</code> creates variables
locally in relation to the parent frame that called the function;
<code>scope="P"</code> creates variables in the temporary package 
workspace called <code>.PBSmodEnv</code>; and <code>scope="G"</code> creates
global variables (<code>pos=1</code>).</p>
</td></tr>
<tr><td><code id="getWinVal_+3A_asvector">asvector</code></td>
<td>
<p>return a vector instead of a list. 
WARNING: if a widget variable defines a true vector or matrix, this will not work.</p>
</td></tr>
<tr><td><code id="getWinVal_+3A_winname">winName</code></td>
<td>
<p>window from which to select GUI widget values. The default 
takes the window that has most recently received new user input.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>TODO: talk about scope=G/P/L and side effects of overwriting existing variables
</p>


<h3>Value</h3>

<p>A list (or vector) with named components, where names and values are defined by GUI widgets.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+parseWinFile">parseWinFile</a></code>, <code><a href="#topic+setWinVal">setWinVal</a></code>, <code><a href="#topic+clearWinVal">clearWinVal</a></code>
</p>

<hr>
<h2 id='getYes'>Prompt the User to Choose Yes or No</h2><span id='topic+getYes'></span>

<h3>Description</h3>

<p>Display a message prompt with &quot;Yes&quot; and &quot;No&quot; buttons.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getYes(message, title="Choice", icon="question")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getYes_+3A_message">message</code></td>
<td>
<p>message to display in prompt window.</p>
</td></tr>
<tr><td><code id="getYes_+3A_title">title</code></td>
<td>
<p>title of prompt window.</p>
</td></tr>
<tr><td><code id="getYes_+3A_icon">icon</code></td>
<td>
<p>icon to display in prompt window; options are 
<code>"error"</code>, <code>"info"</code>, <code>"question"</code>, or <code>"warning"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>TRUE</code> if the &quot;Yes&quot; button is clicked, <code>FALSE</code> if the &quot;No&quot; button is clicked.
</p>


<h3>Author(s)</h3>

<p>Anisa Egeli, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+showAlert">showAlert</a></code>, <code><a href="#topic+getChoice">getChoice</a></code>, <code><a href="#topic+chooseWinVal">chooseWinVal</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  if(getYes("Print the number 1?"))
    print(1) else print("hallucination")
})

## End(Not run)
</code></pre>

<hr>
<h2 id='GT0'>Restrict a Numeric Variable to a Positive Value</h2><span id='topic+GT0'></span>

<h3>Description</h3>

<p>Restrict a numeric value <code>x</code> to a positive value using a differentiable function. 
GT0 stands for &ldquo;greater than zero&rdquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GT0(x,eps=1e-4)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="GT0_+3A_x">x</code></td>
<td>
<p>vector of values</p>
</td></tr>
<tr><td><code id="GT0_+3A_eps">eps</code></td>
<td>
<p>minimum value greater than zero.</p>
</td></tr>
</table>


<h3>Details</h3>

<pre>
   if (x &gt;= eps)..........GT0 = x
   if (0 &lt; x &lt; eps).......GT0 = (eps/2) * (1 + (x/eps)^2)
   if (x &lt;= 0)............GT0 = eps/2
  </pre>


<h3>Author(s)</h3>

<p>Jon T. Schnute, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+scalePar">scalePar</a></code>, <code><a href="#topic+restorePar">restorePar</a></code>, <code><a href="#topic+calcMin">calcMin</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)
  plotGT0 &lt;- function(eps=1,x1=-2,x2=10,n=1000,col="black") {
    x &lt;- seq(x1,x2,len=n); y &lt;- GT0(x,eps);
    lines(x,y,col=col,lwd=2); invisible(list(x=x,y=y)); }

  testGT0 &lt;- function(eps=c(7,5,3,1,.1),x1=-2,x2=10,n=1000) {
    x &lt;- seq(x1,x2,len=n); y &lt;- x;
    plot(x,y,type="l");
    mycol &lt;- c("red","blue","green","brown","violet","orange","pink");
    for (i in 1:length(eps)) 
      plotGT0(eps=eps[i],x1=x1,x2=x2,n=n,col=mycol[i]);
    invisible(); };

  testGT0()
  par(oldpar)
})
</code></pre>

<hr>
<h2 id='importHistory'>Import a History List from a File</h2><span id='topic+importHistory'></span>

<h3>Description</h3>

<p>Import a history list from file <code>fname</code>, and place it 
into the history list <code>hisname</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>importHistory(hisname="", fname="", updateHis=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="importHistory_+3A_hisname">hisname</code></td>
<td>
<p>name of the history list to be populated. 
The default (<code>""</code>) uses the value from <code>getWinAct()[1]</code>.</p>
</td></tr>
<tr><td><code id="importHistory_+3A_fname">fname</code></td>
<td>
<p>file name of history file to import. 
The default (<code>""</code>) causes an open-file window to be displayed.</p>
</td></tr>
<tr><td><code id="importHistory_+3A_updatehis">updateHis</code></td>
<td>
<p>logical: if <code>TRUE</code>, update the history widget to reflect the change
in size and index.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exportHistory">exportHistory</a></code>, <code><a href="#topic+initHistory">initHistory</a></code>
</p>

<hr>
<h2 id='initHistory'>Create Structures for a New History Widget</h2><span id='topic+initHistory'></span><span id='topic+rmHistory'></span><span id='topic+addHistory'></span><span id='topic+forwHistory'></span><span id='topic+backHistory'></span><span id='topic+jumpHistory'></span><span id='topic+clearHistory'></span><span id='topic+clearHistory'></span><span id='topic+lastHistory'></span><span id='topic+firstHistory'></span>

<h3>Description</h3>

<p>PBS history functions (below) are available to those who would like to 
use the package's history functionality, without using the pre-defined history widget. 
These functions allow users to create customized history widgets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>initHistory(hisname, indexname=NULL, sizename=NULL,
    buttonnames=NULL, modename=NULL, func=NULL, overwrite=TRUE)
rmHistory(hisname="", index="")
addHistory(hisname="")
forwHistory(hisname="")
backHistory(hisname="")
lastHistory(hisname="")
firstHistory(hisname="")
jumpHistory(hisname="", index="")
clearHistory(hisname="")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="initHistory_+3A_hisname">hisname</code></td>
<td>
<p>name of the history &quot;list&quot; to manipulate. If it is omitted, 
the function uses the value of <code>getWinAct()[1]</code> as the history name. 
This allows the calling of functions directly from the <em>window description file</em> 
(except <code>initHistory</code>, which must be called before <code>createWin()</code>).</p>
</td></tr>
<tr><td><code id="initHistory_+3A_indexname">indexname</code></td>
<td>
<p>name of the index entry widget in the <em>window description file</em>. 
If <code>NULL</code>, then the current index feature will be disabled.</p>
</td></tr>
<tr><td><code id="initHistory_+3A_sizename">sizename</code></td>
<td>
<p>name of the current size entry widget. If <code>NULL</code>, then the 
current size feature will be disabled.</p>
</td></tr>
<tr><td><code id="initHistory_+3A_buttonnames">buttonnames</code></td>
<td>
<p>named list of names of the first, prev, next, and last buttons. If <code>NULL</code>, then the 
buttons are not disabled ever</p>
</td></tr>
<tr><td><code id="initHistory_+3A_modename">modename</code></td>
<td>
<p>name of the radio widgets used to change addHistory\'s mode. If <code>NULL</code>, then the 
default mode will be to insert after the current index.</p>
</td></tr>
<tr><td><code id="initHistory_+3A_index">index</code></td>
<td>
<p>index to the history item. The default (<code>""</code>) causes the value to be 
extracted from the widget identified by <code>indexname</code>.</p>
</td></tr>
<tr><td><code id="initHistory_+3A_func">func</code></td>
<td>
<p>name of user supplied function to call when viewing history items.</p>
</td></tr>
<tr><td><code id="initHistory_+3A_overwrite">overwrite</code></td>
<td>
<p>if <code>TRUE</code>, history (matching <code>hisname</code>) will be cleared. 
Otherwise, the imported history will be merged with the current one.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>PBS Modelling includes a pre-built history widget designed to collect interesting choices of
GUI variables so that they can be redisplayed later, rather like a slide show. 
</p>
<p>Normally, a user would invoke a history widget simply by including a reference to it 
in the <em>window description file</em>. However, PBS Modelling includes support functions (above) 
for customized applications.
</p>
<p>To create a customized history, each button must be described separately in the 
<em>window description file</em> rather than making reference to the history widget.
</p>
<p>The history &quot;List&quot; must be initialized before any other functions may be called. 
The use of a unique history name (<code>hisname</code>) is used to associate a unique 
history session with the supporting functions.
</p>
<p>The <code>indexname</code> and <code>sizename</code> arguments correspond to the given names 
of entry widgets in the <em>window description file</em>, which will be used to display the 
current index and total size of the list. The <code>indexname</code> entry widget can also 
be used by <code>jumpHistory</code> to retrieve a target index.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+importHistory">importHistory</a></code>, <code><a href="#topic+exportHistory">exportHistory</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# ****** THIS CODE DOES NOT RUN. NEEDS FIXING *****
# Example of creating a custom history widget that saves values 
# whenever the "Plot" button is pressed. The user can tweak the 
# inputs "a", "b", and "points" before each "Plot" and see the 
# "Index" increase. After sufficient archiving, the user can review 
# scenarios using the "Back" and "Next" buttons. 
# A custom history is needed to achieve this functionality since 
# the packages pre-defined history widget does not update plots.

# To start, create a Window Description to be used with createWin 
# using astext=TRUE. P.S. Watch out for special characters which 
# must be "escaped" twice (first for R, then PBSmodelling).

local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)

winDesc &lt;- '
  window title="Custom History"
  vector names="a b k" labels="a b points" font="bold" \\
  values="1 1 1000" function=myPlot
  grid 1 3
    button function=myHistoryBack text="&lt;- Back"
    button function=myPlot text="Plot"
    button function=myHistoryForw text="Next -&gt;"
  grid 2 2
    label "Index"
    entry name="myHistoryIndex" width=5
    label "Size"
    entry name="myHistorySize" width=5
'
# Convert text to vector with each line represented as a new element
winDesc &lt;- strsplit(winDesc, "\n")[[1]]

# Custom functions to update plots after restoring history values
myHistoryBack &lt;- function() {
  backHistory("myHistory");
  myPlot(saveVal=FALSE); # show the plot with saved values
}
myHistoryForw &lt;- function() {
  forwHistory("myHistory");
  myPlot(saveVal=FALSE); # show the plot with saved values 
}
myPlot &lt;- function(saveVal=TRUE) {
  # save all data whenever plot is called (directly)
  if (saveVal) addHistory("myHistory");
  getWinVal(scope="L");
  tt &lt;- 2*pi*(0:k)/k;
  x &lt;- (1+sin(a*tt));  y &lt;- cos(tt)*(1+sin(b*tt));
  plot(x, y);
}
  iHistory("myHistory", "myHistoryIndex", "myHistorySize")
  createWin(winDesc, astext=TRUE)
  par(oldpar)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='isWhat'>Identify an Object and Print Information</h2><span id='topic+isWhat'></span>

<h3>Description</h3>

<p>Identify an object by <code>class</code>, <code>mode</code>, <code>typeof</code>,
and <code>attributes</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>isWhat(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="isWhat_+3A_x">x</code></td>
<td>
<p>an R object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value is returned. The function prints the object's 
characteristics on the command line.
</p>


<h3>Author(s)</h3>

<p>Jon T. Schnute, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>

<hr>
<h2 id='lisp'>
List Objects in .PBSmodEnv Workspace
</h2><span id='topic+lisp'></span>

<h3>Description</h3>

<p>The function <code>lisp</code> returns a vector of character strings
giving the names of the objects in <code>.PBSmodEnv</code>. It is only
a wrapper for the base function <code><a href="base.html#topic+ls">ls</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lisp(name, pos = .PBSmodEnv, envir = as.environment(pos),
   all.names = TRUE, pattern)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lisp_+3A_name">name</code></td>
<td>
<p>which environment to use in listing the available objects.
See the details section of <code><a href="base.html#topic+ls">ls</a></code>.</p>
</td></tr>
<tr><td><code id="lisp_+3A_pos">pos</code></td>
<td>
<p>an alternative argument to <code>name</code> for specifying the
environment as a position in the search list.</p>
</td></tr>
<tr><td><code id="lisp_+3A_envir">envir</code></td>
<td>
<p>an alternative argument to <code>name</code> for specifying the
environment.</p>
</td></tr>
<tr><td><code id="lisp_+3A_all.names">all.names</code></td>
<td>
<p>a logical value.  If <code>TRUE</code>, all
object names are returned.  If <code>FALSE</code>, names which begin with a
&lsquo;<span class="samp">&#8288;.&#8288;</span>&rsquo; are omitted.</p>
</td></tr>
<tr><td><code id="lisp_+3A_pattern">pattern</code></td>
<td>
<p>an optional <a href="base.html#topic+regular+20expression">regular expression</a>.  Only names
matching <code>pattern</code> are returned. See <code><a href="base.html#topic+ls">ls</a></code>
for additional details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See the base function <code><a href="base.html#topic+ls">ls</a></code> for details.
</p>


<h3>Author(s)</h3>

<p>Copyright 1995&ndash;2012 R Core Development Team; distributed under GPL 2 or later.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+ls">ls</a></code>, <code><a href="#topic+tget">tget</a></code> <br />
<code><a href="utils.html#topic+glob2rx">glob2rx</a></code> for converting wildcard patterns to regular expressions.
</p>

<hr>
<h2 id='loadC'>Launch a GUI for Compiling and Loading C Code</h2><span id='topic+loadC'></span>

<h3>Description</h3>

<p>A GUI interface allows users to edit, compile, and embed C functions
in the R environment. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadC()</code></pre>


<h3>Details</h3>

<p>The function <code>loadC()</code> launches an interactive GUI that can be used
to manage the construction of C functions intended to be called from R. The
GUI provides tools to edit, compile, load, and run C functions in the R
environment.
</p>
<p>The <code>loadC</code> GUI also includes a tool for comparison between the running times
and return values of R and C functions. It is assumed that the R and C
functions are named <code>prefix.r</code> and <code>prefix.c</code>, respectively, where 
<code>prefix</code> can be any user-chosen prefix. If an initialization function 
<code>prefix.init</code> exists, it is called before the start of the comparison.
</p>
<p><b>The GUI controls:</b>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <b>File Prefix</b>   </td><td style="text-align: left;"> Prefix for <code>.c</code> and <code>.r</code> files.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>Lib Prefix</b>    </td><td style="text-align: left;"> Prefix for shared library object.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>Set WD</b>        </td><td style="text-align: left;"> Set the working directory.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>Open Log</b>      </td><td style="text-align: left;"> Open the log file.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>Open.c File</b>   </td><td style="text-align: left;"> Open the file <code>prefix.c</code> from the working directory.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>Open .r File</b>  </td><td style="text-align: left;"> Open the file <code>prefix.r</code> from the working directory.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>COMPILE</b>       </td><td style="text-align: left;"> Compile <code>prefix.c</code> into a shared library object.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>LOAD</b>          </td><td style="text-align: left;"> Load the shared library object.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>SOURCE R</b>      </td><td style="text-align: left;"> Source the file <code>prefix.r</code>.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>UNLOAD</b>        </td><td style="text-align: left;"> Unload the shared library object.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>Options</b>       </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>Editor</b>        </td><td style="text-align: left;"> Text editor to use.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>Update</b>        </td><td style="text-align: left;"> Commit option changes.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>Browse</b>        </td><td style="text-align: left;"> Browse for a text editor.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>Clean Options</b> </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>Select All</b>    </td><td style="text-align: left;"> Select all check boxes specifying file types.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>Select None</b>   </td><td style="text-align: left;"> Select none of the check boxes.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>Clean Proj</b>    </td><td style="text-align: left;"> Clean the project of selected file types.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>Clean All</b>     </td><td style="text-align: left;"> Clean the directory of selected file types.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>Comparison</b>    </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>Times to Run</b>  </td><td style="text-align: left;"> Number of times to run the R and C functions.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>RUN</b>           </td><td style="text-align: left;"> Run the comparison between R and C functions.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>R Time</b>        </td><td style="text-align: left;"> Computing time to run the R function multiple times.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>C Time</b>        </td><td style="text-align: left;"> Computing time to run the C function multiple times.</td>
</tr>
<tr>
 <td style="text-align: left;">
  <b>Ratio</b>         </td><td style="text-align: left;"> Ratio of R/C run times.</td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Anisa Egeli, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+compileC">compileC</a></code>
</p>

<hr>
<h2 id='loadOptions'>
Save and Load Options to and from Disk
</h2><span id='topic+loadOptions'></span><span id='topic+saveOptions'></span><span id='topic+saveOptionsAs'></span>

<h3>Description</h3>

<p>Save and load options for use from one R session to another. 
If no file name is given, then the default file name 
(specified when the option object was created) is used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadOptions(option.object, fname, prompt = FALSE)
saveOptions(option.object, fname, prompt = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loadOptions_+3A_option.object">option.object</code></td>
<td>
<p>options class object used for storing package options</p>
</td></tr>
<tr><td><code id="loadOptions_+3A_fname">fname</code></td>
<td>
<p>file name to use: if missing the default file name is used; if given, file name becomes the default.</p>
</td></tr>
<tr><td><code id="loadOptions_+3A_prompt">prompt</code></td>
<td>
<p>logical: if <code>TRUE</code>, prompt the user to select a file from an interactive GUI. 
If <code>fname</code> is given, then the value appears as the default selected file.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>fname</code> is given (or selected when <code>prompt=TRUE</code>), 
then that file becomes the default file name for subsequent loading and saving.
</p>


<h3>See Also</h3>

<p>See <code><a href="#topic+PBSoptions-class">PBSoptions-class</a></code> for more details and 
an example using <span class="pkg">PBSmodelling</span>'s option management functions.
</p>

<hr>
<h2 id='loadOptionsGUI'>
Load and Save Options Values to and from a GUI
</h2><span id='topic+loadOptionsGUI'></span><span id='topic+saveOptionsGUI'></span>

<h3>Description</h3>

<p>These functions are used to move option values to and from a GUI. 
Option values are stored within an R object (as referenced by the <code>option.object</code>). <br />
<code>loadOptionsGUI</code> copies the values from the R object to the GUI. <br />
<code>saveOptionsGUI</code> copies the GUI values from the tcltk GUI to the R object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadOptionsGUI(option.object)
saveOptionsGUI(option.object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loadOptionsGUI_+3A_option.object">option.object</code></td>
<td>
<p>options class object used for storing package options</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>See <code><a href="#topic+PBSoptions-class">PBSoptions-class</a></code> for more details and 
an example using <span class="pkg">PBSmodelling</span>'s option management functions.
</p>

<hr>
<h2 id='lucent'>
Convert Solid Colours to Translucence
</h2><span id='topic+lucent'></span>

<h3>Description</h3>

<p>Convert a vector of solid colours to a vector of translucent ones (or vice versa)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lucent(col.pal=1, a=1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lucent_+3A_col.pal">col.pal</code></td>
<td>
<p>vector of colours</p>
</td></tr>
<tr><td><code id="lucent_+3A_a">a</code></td>
<td>
<p>alpha transparency value (<code>0</code> = fully transparent, <code>1</code> = opaque) </p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function acts as a small wrapper to the <code>rgb</code> function.
</p>


<h3>Value</h3>

<p>Vector of transformed colours depending on the alpha transparancy value <code>a</code>.
</p>


<h3>Author(s)</h3>

<p>Steve Martell, International Pacific Halibut Commission, Seattle WA
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pickCol">pickCol</a></code>, <code><a href="#topic+testCol">testCol</a></code>,
<code><a href="grDevices.html#topic+col2rgb">col2rgb</a></code>, <code><a href="grDevices.html#topic+rgb">rgb</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)
  pbsfun = function(clrs=c("moccasin",rainbow(3))){
    clrs = c(clrs,lucent(clrs,a=0.25))
    testCol(clrs); invisible() }
  pbsfun()
  par(oldpar)
})
</code></pre>

<hr>
<h2 id='openExamples'>Open Example Files from a Package</h2><span id='topic+openExamples'></span>

<h3>Description</h3>

<p>Open examples from the examples subdirectory of a given package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>openExamples(package, prefix, suffix)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="openExamples_+3A_package">package</code></td>
<td>
<p>name of the package that contains the examples.</p>
</td></tr>
<tr><td><code id="openExamples_+3A_prefix">prefix</code></td>
<td>
<p>prefix of the example file(s).</p>
</td></tr>
<tr><td><code id="openExamples_+3A_suffix">suffix</code></td>
<td>
<p>character vector of suffixes for the example files.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Copies of each example file are placed in the working directory 
and opened. If files with the same name already exist, the user 
is prompted with a choice to overwrite.
</p>
<p>To use this function in a <em>window description file</em>, the 
<code>package</code>, <code>prefix</code> and <code>suffix</code> arguments must 
be specified as the action of the widget that calls 
<code>openExamples</code>. Furthermore, <code>package</code>, <code>prefix</code>, 
and each <code>suffix</code> must be separated by commas. For example, 
<code>action=myPackage,example1,.r,.c</code> will copy <code>example1.r</code> 
and <code>example2.c</code> from the <code>examples</code> directory of the 
package <span class="pkg">myPackage</span> to the working directory and open these 
files. If the function was called by a widget, a widget named 
<code>prefix</code> will be set to the specified prefix.
</p>


<h3>Note</h3>

<p>If all the required arguments are missing, it is assumed 
that the function is being called by a GUI widget.
</p>


<h3>Author(s)</h3>

<p>Anisa Egeli, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+openFile">openFile</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Copies fib.c and fib.r from the examples directory in 
# PBSmodelling to the temporary working directory, and opens these files.
local(envir=.PBSmodEnv,expr={
  cwd = getwd(); setwd(tempdir())
  openExamples("PBSmodelling", c("fib"), c(".r", ".c"))
  setwd(cwd)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='openFile'>Open File with Associated Program</h2><span id='topic+openFile'></span>

<h3>Description</h3>

<p>Open a file using the program that the operating system (Windows / Mac
OS X / Linux) associates with its type.  Users wishing to override the
default application can specify a program association using <code>'setPBSext'</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>openFile(fname="", package=NULL, select=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="openFile_+3A_fname">fname</code></td>
<td>
<p><code>character</code> &ndash; vector containing file names to open.</p>
</td></tr>
<tr><td><code id="openFile_+3A_package">package</code></td>
<td>
<p><code>character</code> &ndash; (optional) package name; open files relative to this package.</p>
</td></tr>
<tr><td><code id="openFile_+3A_select">select</code></td>
<td>
<p><code>logical</code> &ndash; if <code>TRUE</code>, force the use of <code>'selectFile'</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An invisible string vector of the file names and/or commands with file names.
</p>


<h3>Note</h3>

<p>If a command is registered with <code>setPBSext</code>, then 
<code>openFile</code> will replace all occurrences of <code>"%f"</code> 
with the absolute path of the filename before executing the command.
</p>


<h3>Author(s)</h3>

<p><a href="mailto:alex@mofo.ca">Alex Couture-Beil</a>, Software Engineer<br />
Earthly Technologies, Victoria BC<br />
</p>
<p>Maintainer: <a href="mailto:rowan.haigh@dfo-mpo.gc.ca">Rowan Haigh</a>, Program Head &ndash; Offshore Rockfish<br />
Pacific Biological Station (PBS), Fisheries &amp; Oceans Canada (DFO), Nanaimo BC<br />
<em>locus opus</em>: Regional Headquarters (RHQ), Vancouver BC<br />
Last modified <code>Rd: 2023-01-05</code>
</p>


<h3>See Also</h3>

<p>In package <span class="pkg">PBSmodelling</span>:<br />
<code><a href="#topic+getPBSext">getPBSext</a></code>,
<code><a href="#topic+setPBSext">setPBSext</a></code>,
<code><a href="#topic+clearPBSext">clearPBSext</a></code>,
<code><a href="#topic+writePBSoptions">writePBSoptions</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  # use openFile directly:
  openFile( "doc/PBSmodelling-UG.pdf", package="PBSmodelling" )
})
local(envir=.PBSmodEnv,expr={
  # via doAction in a window description file:
  createWin( "button text=help func=doAction width=20 pady=25 bg=green
  action=\"openFile(`doc/PBSmodelling-UG.pdf`,package=`PBSmodelling`)\"", astext=TRUE)
})
local(envir=.PBSmodEnv,expr={
  # Set up 'Firefox' to open '.html' files (only applicable if Firefox is NOT default web browser)
  setPBSext("html", '"c:/Program Files/Mozilla Firefox/firefox.exe" file://%f')
  openFile("foo.html")
})

## End(Not run)
</code></pre>

<hr>
<h2 id='openUG'>
Open Package User Guide
</h2><span id='topic+openUG'></span>

<h3>Description</h3>

<p>Open package User's Guide &lsquo;&lt;pkg&gt;-UG.pdf&rsquo; if it exists.
This function is essentially a wrapper for <code>openFile</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>openUG(pkg = "PBSmodelling")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="openUG_+3A_pkg">pkg</code></td>
<td>
<p><code>character</code> &ndash; full name (with or without quotes) of a package installed on the user's system.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The user's guide is assumed to be PDF format with extension <code>pdf</code>.
The name of the PDF file will be &lsquo;&lt;pkg&gt;-UG.pdf&rsquo; (e.g., <code>PBSmodelling-UG.pdf</code>.
</p>


<h3>Author(s)</h3>

<p><a href="mailto:rowan.haigh@dfo-mpo.gc.ca">Rowan Haigh</a>, Program Head &ndash; Offshore Rockfish<br />
Pacific Biological Station (PBS), Fisheries &amp; Oceans Canada (DFO), Nanaimo BC<br />
<em>locus opus</em>: Offsite, Vancouver BC<br />
Last modified <code>Rd: 2023-10-18</code>
</p>


<h3>See Also</h3>

<p>In package <span class="pkg">PBSmodelling</span>:<br />
<code><a href="#topic+openFile">openFile</a></code>,
<code><a href="#topic+showHelp">showHelp</a></code>,
<code><a href="#topic+viewCode">viewCode</a></code>
</p>

<hr>
<h2 id='packList'> Pack a List with Objects </h2><span id='topic+packList'></span>

<h3>Description</h3>

<p>Pack a list with existing objects using names only.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>packList(stuff, target="PBSlist", value, penv=NULL, tenv=.PBSmodEnv)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="packList_+3A_stuff">stuff</code></td>
<td>
<p><code>character</code> &ndash; vector of object names</p>
</td></tr>
<tr><td><code id="packList_+3A_target">target</code></td>
<td>
<p><code>character</code> &ndash; name of target list object</p>
</td></tr>
<tr><td><code id="packList_+3A_value">value</code></td>
<td>
<p><code>numeric|character</code> &ndash; an optional explicit value to assign to <code>stuff</code></p>
</td></tr>
<tr><td><code id="packList_+3A_penv">penv</code></td>
<td>
<p><code>environment</code> &ndash; source environment (default=parent) or user-specified environment where <code>stuff</code> resides</p>
</td></tr>
<tr><td><code id="packList_+3A_tenv">tenv</code></td>
<td>
<p><code>environment</code> &ndash; target environment where target list exists or will be located</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A list object called <code>target</code> will be located in the 
<code>tenv</code> environment. The objects named in <code>stuff</code> and 
located in the <code>penv</code> environment will appear as named 
components within the list object <code>target</code>.
</p>
<p>If an explicit <code>value</code> is specified, the function uses this value
instead of looking for local objects. Essentially, <code>stuff = value</code>
which is then packed into <code>target</code>.
</p>


<h3>Value</h3>

<p>No value is returned
</p>


<h3>Note</h3>

<p>The function determines the parent environment from within. 
This environment contains the objects from which the function copies to the target environment.
Alternatively, the user can specify the environment where <code>stuff</code> resides.
</p>


<h3>Author(s)</h3>

<p><a href="mailto:rowan.haigh@dfo-mpo.gc.ca">Rowan Haigh</a>, Program Head &ndash; Offshore Rockfish<br />
Pacific Biological Station (PBS), Fisheries &amp; Oceans Canada (DFO), Nanaimo BC<br />
<em>locus opus</em>: Institute of Ocean Sciences (IOS), Sidney BC<br />
Last modified <code>Rd: 2019-03-12</code>
</p>


<h3>See Also</h3>

<p>In package <span class="pkg">PBSmodelling</span>:<br />
<code><a href="#topic+unpackList">unpackList</a></code>,
<code><a href="#topic+readList">readList</a></code>,
<code><a href="#topic+writeList">writeList</a></code> <br />
Accessor functions:<br />
<code><a href="#topic+tget">tget</a></code>,
<code>tcall</code>,
<code>tprint</code>, and
<code>tput</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  fn = function() {
    alpha=rnorm(10)
    beta=letters
    gamma=mean
    delta=longley
    packList(c("alpha","beta","gamma","delta")) }
  fn(); tprint(PBSlist)
})
</code></pre>

<hr>
<h2 id='pad0'>Pad Values with Leading Zeroes</h2><span id='topic+pad0'></span>

<h3>Description</h3>

<p>Pad numbers and/or text with leading and/or trailing zeroes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pad0(x, n, f = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pad0_+3A_x">x</code></td>
<td>
<p>vector of numbers and/or strings</p>
</td></tr>
<tr><td><code id="pad0_+3A_n">n</code></td>
<td>
<p>number of text characters representing a padded integer</p>
</td></tr>
<tr><td><code id="pad0_+3A_f">f</code></td>
<td>
<p>factor of 10 transformation on <code>x</code> before padding</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Converts numbers (or text coerced to numeric) to integers and then to text,
and pads them with leading zeroes. If the factor <code>f</code> is &gt;0, then 
trailing zeroes are also added.
</p>


<h3>Value</h3>

<p>If <code>length(f)==1</code> or <code>length(x)==1</code>, the function returns 
a character vector representing <code>x</code> with leading zeroes.
</p>
<p>If both <code>f</code> and <code>x</code> have lengths &gt;1, then a list of 
character vectors indexed by <code>f</code> is returned.
</p>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+show0">show0</a></code>, <code><a href="#topic+GT0">GT0</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  resetGraph(); x &lt;- pad0(x=123,n=10,f=0:7);
  addLabel(.5,.5,paste(x,collapse="\n"),cex=1.5);
})
</code></pre>

<hr>
<h2 id='parseWinFile'>Convert a Window Description File into a List Object</h2><span id='topic+parseWinFile'></span>

<h3>Description</h3>

<p>Parse a <em>window description file</em> (markup file) into 
the list format expected by <code>createWin</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parseWinFile(fname, astext=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parseWinFile_+3A_fname">fname</code></td>
<td>
<p>file name of the <em>window description file</em>.</p>
</td></tr>
<tr><td><code id="parseWinFile_+3A_astext">astext</code></td>
<td>
<p>if <code>TRUE</code>, <code>fname</code> is interpreted as a vector of strings, 
with each element representing a line of code in a <em>window description file</em>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list representing a parsed <em>window description file</em> that can be directly 
passed to <code>createWin</code>.
</p>


<h3>Note</h3>

<p>All widgets are forced into a 1-column by N-row grid.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+createWin">createWin</a></code>, <code><a href="#topic+compileDescription">compileDescription</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  x &lt;- parseWinFile(system.file("examples/LissFigWin.txt",package="PBSmodelling"))
  createWin(x)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='pause'>Pause Between Graphics Displays or Other Calculations</h2><span id='topic+pause'></span>

<h3>Description</h3>

<p>Pause, typically between graphics displays. Useful for demo purposes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pause(s = "Press &lt;Enter&gt; to continue")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pause_+3A_s">s</code></td>
<td>
<p>text issued on the command line when <code>pause</code> is invoked.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jon T. Schnute, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>

<hr>
<h2 id='PBSmodelling'>PBS Modelling</h2><span id='topic+PBSmodelling'></span><span id='topic+PBSmodelling-package'></span>

<h3>Description</h3>

<p><em>PBS Modelling</em> provides software to facilitate the design, 
testing, and operation of computer models. It focuses particularly on 
tools that make it easy to construct and edit a customized graphical 
user interface (GUI). Although it depends heavily on the R interface 
to the <code>Tcl/Tk</code> package, a user does not need to know Tcl/Tk. 
</p>
<p><code>PBSmodelling</code> contains examples that illustrate models built using 
other R packages, including <code>PBSmapping</code>, <code>deSolve</code>, 
<code>PBSddesolve</code>, and <code>BRugs</code>. 
It also serves as a convenient prototype for building new R packages, 
along with instructions and batch files to facilitate that process.
</p>
<p>The R directory <code>.../library/PBSmodelling/doc</code> includes a complete 
user guide &lsquo;PBSmodelling-UG.pdf&rsquo;. To use this package effectively, 
please consult the guide.
</p>
<p><em>PBS Modelling</em> comes packaged with interesting examples accessed 
through the function <code>runExamples()</code>.
Additionally, users can view <em>PBS Modelling</em> widgets through the 
function <code>testWidgets()</code>. 
More generally, a user can run any available demos in his/her locally 
installed packages through the function <code>runDemos()</code>.
</p>

<hr>
<h2 id='PBSoptions-class'>S4: Project Options Class</h2><span id='topic+PBSoptions-class'></span><span id='topic+print+2CPBSoptions-method'></span><span id='topic+show+2CPBSoptions-method'></span>

<h3>Description</h3>

<p>Projects commonly involve various settings or options such as paths to C compilers or other third-party tools.
<span class="pkg">PBSmodelling</span> provides a set of option management functions for managing user specific options. Options can be 
modified through the provided set of functions on the command line, or through a custom GUI.
These options can be saved to disk for use in subsequent R sessions.
</p>
<p>To use <span class="pkg">PBSmodelling</span>'s suite of option management functions, a <code>PBSoptions</code> object must be
created for each of your projects. Each <code>PBSoptions</code> object contains a distinct R environment where 
option values are stored; this allows different projects to use overlapping option names without conflicts
(provided each project has its own <code>PBSoptions</code> class object).
</p>


<h3>Details</h3>

<p>When a <code>PBSoptions</code> object is created with the <code>new</code> function, the <code>initial.options</code> list, if supplied, is stored
as initial user options in the object. The initialization routine then attempts to load user set options from the <code>filename</code> file. If such a file exists,
these values are stored in the <code>PBSoptions</code> object overwriting any initial values as specified by <code>initial.options</code>
</p>
<p>Option values are not directly stored in the object, but rather in an environment stored in the <code>instance</code> slot.
Using an environment rather than slots for storing options allows us to pass option object by reference rather than value; that is,
we can save options in the object without the need of returning a new modified class object. It is therefore necessary that users
use the functions listed in the &quot;see also&quot; section to effectively manage user options.
</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <br />
<code>new("PBSoptions",filename,initial.options=list(),gui.prefix="option")</code>.
</p>

<dl>
<dt><code>filename:</code></dt><dd><p> default file name to use when saving and loading options to and from disk </p>
</dd>
<dt><code>initial.options:</code></dt><dd><p> a list with distinctly named initial options to use if no previously saved file exists </p>
</dd>
<dt><code>gui.prefix:</code></dt><dd><p> a prefix used to identify GUI variables which correspond to user options </p>
</dd>
</dl>



<h3>Slots</h3>


<dl>
<dt><code>instance</code>:</dt><dd><p>The R environment used to store options. Please do not use this directly; use the functions listed under the &quot;see also&quot; section. </p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>print</dt><dd><p><code>signature(x = "PBSoptions")</code>: prints the list of options </p>
</dd>
</dl>



<h3>Warning </h3>

<p>Do not use the slots directly &ndash; use the access functions instead.
</p>


<h3>Author(s)</h3>

<p> Alex Couture-Beil, Vancouver Island University, Nanaimo BC </p>


<h3>See Also</h3>

<p><code><a href="#topic+getOptions">getOptions</a></code> for retrieving and modifying user options
</p>
<p><code><a href="#topic+getOptionsFileName">getOptionsFileName</a></code> for retrieving and modifying the default options file name
</p>
<p><code><a href="#topic+loadOptions">loadOptions</a></code> for loading and saving options from and to disk
</p>
<p><code><a href="#topic+getOptionsPrefix">getOptionsPrefix</a></code> for retrieving and modifying the GUI prefix (for custom GUI interfaces)
</p>
<p><code><a href="#topic+loadOptionsGUI">loadOptionsGUI</a></code> for setting GUI values to reflect user options and vice-versa
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  #initialize an option manager with a single logical option
  .mypkg &lt;- new( "PBSoptions", filename="my_pkg.txt", 
    initial.options=list( sillyhatday=FALSE ) )

  #retrieving an option
  silly &lt;- getOptions( .mypkg, "sillyhatday" )
  cat( "today is", ifelse( silly, "silly hat day!", "monday" ), "\n" )

  #set an option
  setOptions( .mypkg, sillyhatday = TRUE, photos = "/shares/silly_hat_photos" )

  #create a GUI which works with options
  createWin( c( 
    "check name=optionsillyhatday text=\"silly hat day\"",
    "entry name=optionphotos width=22 mode=character label=\"photos directory\"",
    "button func=doAction text=save action=saveOptionsGUI(.mypkg)" ), astext = TRUE )

  #update GUI values based on values stored in .mypkg's options
  loadOptionsGUI( .mypkg )
  print(getOptions( .mypkg ))
})

## End(Not run)
</code></pre>

<hr>
<h2 id='pickCol'>Pick a Colour From a Palette and get the Hexadecimal Code</h2><span id='topic+pickCol'></span>

<h3>Description</h3>

<p>Display an interactive colour palette from which the user can choose a colour. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pickCol(returnValue=TRUE)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pickCol_+3A_returnvalue">returnValue</code></td>
<td>
<p>If <code>TRUE</code>, display the full colour palette, choose a colour, 
and return the hex value to the R session. <br /> If <code>FALSE</code>, use an intermediate 
GUI to interact with the palette and display the hex value of the chosen colour.</p>
</td></tr>
</table>


<h3>Value</h3>

<p> A hexidecimal colour value. </p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

 <p><code><a href="#topic+testCol">testCol</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  junk&lt;-pickCol(); resetGraph()
  addLabel(.5,.5,junk,cex=4,col=junk)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='plotACF'>
Plot Autocorrelation Bars From a Data Frame, Matrix, or Vector
</h2><span id='topic+plotACF'></span>

<h3>Description</h3>

<p>Plot autocorrelation bars (ACF) from a data frame, matrix, or vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotACF(file, lags=20, 
    clrs=c("blue","red","green","magenta","navy"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotACF_+3A_file">file</code></td>
<td>
<p>data frame, matrix, or vector of numeric values.</p>
</td></tr>
<tr><td><code id="plotACF_+3A_lags">lags</code></td>
<td>
<p>maximum number of lags to use in the ACF calculation.</p>
</td></tr>
<tr><td><code id="plotACF_+3A_clrs">clrs</code></td>
<td>
<p>vector of colours. Patterns are repeated if the number 
of fields exceed the length of <code>clrs</code>.</p>
</td></tr>
<tr><td><code id="plotACF_+3A_...">...</code></td>
<td>
<p>additional arguments for <code>plot</code> or <code>lines</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is designed primarily to give greater flexibility when viewing 
results from the R-package <code>BRugs</code>. Use <code>plotACF</code> in conjunction with 
<code>samplesHistory("*",beg=0,plot=FALSE)</code> rather than <code>samplesAutoC</code> 
which calls <code>plotAutoC</code>.
</p>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)
  resetGraph(); plotACF(trees,lwd=2,lags=30)
  par(oldpar)
})
</code></pre>

<hr>
<h2 id='plotAsp'>Construct a Plot with a Specified Aspect Ratio</h2><span id='topic+plotAsp'></span>

<h3>Description</h3>

<p>Plot <code>x</code> and <code>y</code> coordinates using a specified aspect ratio.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotAsp(x, y, asp=1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotAsp_+3A_x">x</code></td>
<td>
<p>vector of x-coordinate points in the plot.</p>
</td></tr>
<tr><td><code id="plotAsp_+3A_y">y</code></td>
<td>
<p>vector of y-coordinate points in the plot.</p>
</td></tr>
<tr><td><code id="plotAsp_+3A_asp">asp</code></td>
<td>
<p><code>y</code>/<code>x</code> aspect ratio.</p>
</td></tr>
<tr><td><code id="plotAsp_+3A_...">...</code></td>
<td>
<p>additional arguments for <code>plot</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function <code>plotAsp</code> differs from <code>plot(x,y,asp=1)</code> in the way axis 
limits are handled. Rather than expand the range, <code>plotAsp</code> expands the 
margins through padding to keep the aspect ratio accurate.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)
  x &lt;- seq(0,10,0.1)
  y &lt;- sin(x)
  par(mfrow=2:1)
  plotAsp(x,y,asp=1,xlim=c(0,10),ylim=c(-2,2), main="sin(x)")
  plotAsp(x,y^2,asp=1,xlim=c(0,10),ylim=c(-2,2), main="sin^2(x)")
  par(oldpar)
})
</code></pre>

<hr>
<h2 id='plotBubbles'>Construct a Bubble Plot from a Matrix</h2><span id='topic+plotBubbles'></span>

<h3>Description</h3>

<p>Construct a bubble plot for a matrix <code>z</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotBubbles(z, xval=FALSE, yval=FALSE, dnam=FALSE, rpro=FALSE, 
   cpro=FALSE, rres=FALSE, cres=FALSE, powr=0.5, size=0.2, lwd=1,
   clrs=c("black","red","blue"), hide0=FALSE, frange=0.05, prettyaxis=FALSE, ...) 
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotBubbles_+3A_z">z</code></td>
<td>
<p><code>numeric</code> &ndash; input matrix, array (2 dimensions) or data frame.</p>
</td></tr>
<tr><td><code id="plotBubbles_+3A_xval">xval</code></td>
<td>
<p><code>numeric</code> &ndash; x-values and/or labels for the columns of <code>z</code>. 
if <code>xval=TRUE</code>, the first row contains x-values for the columns.</p>
</td></tr>
<tr><td><code id="plotBubbles_+3A_yval">yval</code></td>
<td>
<p><code>numeric</code> &ndash; y-values and/or labels for the rows of <code>z</code>. 
If <code>yval=TRUE</code>, the first column contains y-values for the rows.</p>
</td></tr>
<tr><td><code id="plotBubbles_+3A_dnam">dnam</code></td>
<td>
<p><code>logical</code> &ndash; if <code>TRUE</code>, attempt to use <code>dimnames</code> of input
matrix <code>z</code> as <code>xval</code> and <code>yval</code>. The <code>dimnames</code> are 
converted to numeric values and must be strictly increasing or decreasing. 
If successful, these values will overwrite previously specified values
of <code>xval</code> and <code>yval</code> or any default indices.</p>
</td></tr>
<tr><td><code id="plotBubbles_+3A_rpro">rpro</code></td>
<td>
<p><code>logical</code> &ndash; if <code>TRUE</code>, convert rows to proportions.</p>
</td></tr>
<tr><td><code id="plotBubbles_+3A_cpro">cpro</code></td>
<td>
<p><code>logical</code> &ndash; if <code>TRUE</code>, convert columns to proportions.</p>
</td></tr>
<tr><td><code id="plotBubbles_+3A_rres">rres</code></td>
<td>
<p><code>logical</code> &ndash; if <code>TRUE</code>, use row residuals (subtract row means).</p>
</td></tr>
<tr><td><code id="plotBubbles_+3A_cres">cres</code></td>
<td>
<p><code>logical</code> &ndash; if <code>TRUE</code>, use column residuals (subtract column means).</p>
</td></tr>
<tr><td><code id="plotBubbles_+3A_powr">powr</code></td>
<td>
<p><code>numeric</code> &ndash; power transform; radii are proportional to <code>z^powr</code>. 
Note: <code>powr=0.5</code> yields bubble areas proportional to <code>z</code>.</p>
</td></tr>
<tr><td><code id="plotBubbles_+3A_size">size</code></td>
<td>
<p><code>numeric</code> &ndash; size (inches) of the largest bubble.</p>
</td></tr>
<tr><td><code id="plotBubbles_+3A_lwd">lwd</code></td>
<td>
<p><code>numeric</code> &ndash; line width for drawing circles.</p>
</td></tr>
<tr><td><code id="plotBubbles_+3A_clrs">clrs</code></td>
<td>
<p><code>character</code> &ndash; colours (3-element vector) used for positive, negative, 
and zero values, respectively.</p>
</td></tr>
<tr><td><code id="plotBubbles_+3A_hide0">hide0</code></td>
<td>
<p><code>logical</code> &ndash; if <code>TRUE</code>, hide zero-value bubbles.</p>
</td></tr>
<tr><td><code id="plotBubbles_+3A_frange">frange</code></td>
<td>
<p><code>numeric</code> &ndash; number specifying the fraction by which the range of the axes should be extended.</p>
</td></tr>
<tr><td><code id="plotBubbles_+3A_prettyaxis">prettyaxis</code></td>
<td>
<p><code>logical</code> &ndash; if <code>TRUE</code>, apply the pretty function to both axes.</p>
</td></tr>
<tr><td><code id="plotBubbles_+3A_...">...</code></td>
<td>
<p><code>dots</code> &ndash; additional arguments for plotting functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function <code>plotBubbles</code> essentially flips the <code>z</code> matrix 
visually. The columns of <code>z</code> become the x-values while the rows of
<code>z</code> become the y-values, where the first row is displayed as the
bottom y-value and the last row is displayed as the top y-value. The 
function's original intention was to display proportions-at-age vs. year.
</p>


<h3>Author(s)</h3>

<p><a href="mailto:schnutej@shaw.ca">Jon T. Schnute</a>, Research Scientist Emeritus<br />
Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC<br />
</p>
<p>Maintainer: <a href="mailto:rowan.haigh@dfo-mpo.gc.ca">Rowan Haigh</a>, Program Head &ndash; Offshore Rockfish<br />
Pacific Biological Station (PBS), Fisheries &amp; Oceans Canada (DFO), Nanaimo BC<br />
<em>locus opus</em>: Offsite, Vancouver BC<br />
Last modified <code>Rd: 2023-10-18</code>
</p>


<h3>See Also</h3>

<p>In package <span class="pkg">PBSmodelling</span>:<br />
<code><a href="#topic+genMatrix">genMatrix</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)
  plotBubbles(round(genMatrix(40,20),0),clrs=c("green","grey","red"));
  data(CCA.qbr,envir=.PBSmodEnv)
  plotBubbles(CCA.qbr,cpro=TRUE,powr=.5,dnam=TRUE,size=.15,
    ylim=c(0,70),xlab="Year",ylab="Quillback Rockfish Age")
  par(oldpar)
})
</code></pre>

<hr>
<h2 id='plotCsum'>Plot Cumulative Sum of Data</h2><span id='topic+plotCsum'></span>

<h3>Description</h3>

<p>Plot the cumulative frequency of a data vector or matrix, 
showing the median and mean of the distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotCsum(x, add = FALSE, ylim = c(0, 1), xlab = "Measure", 
ylab = "Cumulative Proportion", ...)  
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotCsum_+3A_x">x</code></td>
<td>
<p>vector or matrix of numeric values.</p>
</td></tr>
<tr><td><code id="plotCsum_+3A_add">add</code></td>
<td>
<p>logical: if <code>TRUE</code>, add the cumulative frequency curve to a current plot.</p>
</td></tr>
<tr><td><code id="plotCsum_+3A_ylim">ylim</code></td>
<td>
<p>limits for the y-axis.</p>
</td></tr>
<tr><td><code id="plotCsum_+3A_xlab">xlab</code></td>
<td>
<p>label for the x-axis.</p>
</td></tr>
<tr><td><code id="plotCsum_+3A_ylab">ylab</code></td>
<td>
<p>label for the y-axis.</p>
</td></tr>
<tr><td><code id="plotCsum_+3A_...">...</code></td>
<td>
<p>additional arguments for the <code>plot</code> function.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)
  x &lt;- rgamma(n=1000,shape=2)
  plotCsum(x)
  par(oldpar)
})
</code></pre>

<hr>
<h2 id='plotDens'>Plot Density Curves from a Data Frame, Matrix, or Vector</h2><span id='topic+plotDens'></span>

<h3>Description</h3>

<p>Plot the density curves from a data frame, matrix, or vector. 
The mean density curve of the data combined is also shown.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotDens(file, clrs=c("blue","red","green","magenta","navy"), ...)  
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotDens_+3A_file">file</code></td>
<td>
<p>data frame, matrix, or vector of numeric values.</p>
</td></tr>
<tr><td><code id="plotDens_+3A_clrs">clrs</code></td>
<td>
<p>vector of colours. Patterns are repeated if the number 
of fields exceed the length of <code>clrs</code>.</p>
</td></tr>
<tr><td><code id="plotDens_+3A_...">...</code></td>
<td>
<p>additional arguments for <code>plot</code> or <code>lines</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is designed primarily to give greater flexibility when viewing 
results from the R-package <code>BRugs</code>. Use <code>plotDens</code> in conjunction with 
<code>samplesHistory("*",beg=0,plot=FALSE)</code> rather than <code>samplesDensity</code> 
which calls <code>plotDensity</code>.
</p>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)
  z &lt;- data.frame(y1=rnorm(50,sd=2),y2=rnorm(50,sd=1),y3=rnorm(50,sd=.5))
  plotDens(z,lwd=3)
  par(oldpar)
})
</code></pre>

<hr>
<h2 id='plotFriedEggs'>Render a Pairs Plot as Fried Eggs and Beer</h2><span id='topic+plotFriedEggs'></span>

<h3>Description</h3>

<p>Create a pairs plot where the lower left half comprises either 
fried egg contours or smoke ring contours, the upper right half 
comprises glasses of beer filled to the correlation point, and 
the diagonals show frequency histograms of the input data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotFriedEggs(A, eggs=TRUE, rings=TRUE, levs=c(0.01,0.1,0.5,0.75,0.95),
    pepper=200, replace=FALSE, jitt=c(1,1), bw=25, histclr=NULL) 
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotFriedEggs_+3A_a">A</code></td>
<td>
<p>data frame or matrix for use in a pairs plot.</p>
</td></tr>
<tr><td><code id="plotFriedEggs_+3A_eggs">eggs</code></td>
<td>
<p>logical: if <code>TRUE</code>, fry eggs in the lower panels.</p>
</td></tr>
<tr><td><code id="plotFriedEggs_+3A_rings">rings</code></td>
<td>
<p>logical: if <code>TRUE</code>, blow smoke rings in the lower panels.</p>
</td></tr>
<tr><td><code id="plotFriedEggs_+3A_levs">levs</code></td>
<td>
<p>explicit contour levels expressed as quantiles.</p>
</td></tr>
<tr><td><code id="plotFriedEggs_+3A_pepper">pepper</code></td>
<td>
<p>number of samples to draw from <code>A</code> to pepper the plots.</p>
</td></tr>
<tr><td><code id="plotFriedEggs_+3A_replace">replace</code></td>
<td>
<p>logical: if <code>TRUE</code>, sample <code>A</code> with replacement.</p>
</td></tr>
<tr><td><code id="plotFriedEggs_+3A_jitt">jitt</code></td>
<td>
<p>argument <code>factor</code> used by function <code>base::jitter</code> when peppering.
If user supplies two numbers, the first will jitter <code>x</code>, the second will 
jitter <code>y</code>.</p>
</td></tr>
<tr><td><code id="plotFriedEggs_+3A_bw">bw</code></td>
<td>
<p>argument <code>bandwidth</code> used by function <code>KernSmooth::bkde2D</code>.</p>
</td></tr>
<tr><td><code id="plotFriedEggs_+3A_histclr">histclr</code></td>
<td>
<p>user-specified colour(s) for histogram bars along the diagonal.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function comes to us from Dr. Steve Martell of the Fisheries Science 
Centre at UBC. Obviously many hours of contemplation with his students at
the local pub have contributed to this unique rendition of a pairs plot.
</p>


<h3>Note</h3>

<p>If <code>eggs=TRUE</code> and <code>rings=FALSE</code>, fried eggs are served.<br />
If <code>eggs=FALSE</code> and <code>rings=TRUE</code>, smoke rings are blown.<br />
If <code>eggs=TRUE</code> and <code>rings=TRUE</code>, only fried eggs are served.<br />
If <code>eggs=FALSE</code> and <code>rings=FALSE</code>, only pepper is sprinkled.
</p>


<h3>Author(s)</h3>

<p>Steve Martell, International Pacific Halibut Commission, Seattle WA
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plotBubbles">plotBubbles</a></code>, <code><a href="#topic+scalePar">scalePar</a></code>
</p>
<p><code>KernSmooth::bkde2D</code>, <code>grDevices::contourLines</code>, <code>graphics::contour</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)
  x=rnorm(5000,10,3); y=-x+rnorm(5000,1,4); z=x+rnorm(5000,1,3)
  A=data.frame(x=x,y=y,z=z)
  for (i in 1:3)
    switch(i,
    {plotFriedEggs(A,eggs=TRUE,rings=FALSE);
     pause("Here are the eggs...(Press Enter for next)")},
    {plotFriedEggs(A,eggs=FALSE,rings=TRUE);
     pause("Here are the rings...(Press Enter for next)")},
    {plotFriedEggs(A,eggs=FALSE,rings=FALSE);
     cat("Here is the pepper alone.\n")} )
  par(oldpar)
})
</code></pre>

<hr>
<h2 id='plotSidebars'>
Plot Table as Horizontal Sidebars
</h2><span id='topic+plotSidebars'></span>

<h3>Description</h3>

<p>Plot (x,y) table (matrix or data frame) as horizontal sidebars.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotSidebars(z, scale = 1, col = lucent("blue", 0.25), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotSidebars_+3A_z">z</code></td>
<td>
<p>data frame or matrix of z-values (e.g., age frequencies) where 
rows form the plot's y-values and columns describe the grouping 
variable along the x-axis.</p>
</td></tr>
<tr><td><code id="plotSidebars_+3A_scale">scale</code></td>
<td>
<p>numeric scale factor controlling the leftward expansion of z-value bars.</p>
</td></tr>
<tr><td><code id="plotSidebars_+3A_col">col</code></td>
<td>
<p>colour to fill bars.</p>
</td></tr>
<tr><td><code id="plotSidebars_+3A_...">...</code></td>
<td>
<p>additional parameters used by <code>par</code> and <code>polygon</code>. 
The user can also pass in two non-formal arguments to control the function: <br />
<code>lbl</code> &ndash; labels for the x- and y-axis; <br />
<code>margin</code> &ndash; function to report margin summaries. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plots z-data as horizontal bars arising from an x-coordinate controlled by
the column names of <code>z</code>. The bars extend left along the y-coordinate 
by <code>z*scale</code> from the central x-coordinate. 
</p>


<h3>Author(s)</h3>

<p>Steve Martell, International Pacific Halibut Commission, Seattle WA
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plotBubbles">plotBubbles</a></code>, <code><a href="#topic+plotFriedEggs">plotFriedEggs</a></code>,
<code><a href="#topic+evalCall">evalCall</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)
  pbsfun = function () {
    meanmarg = function(x){x=x[!is.na(x)]; 
      if (length(x)==0 | all(x==0)) NA else sum((x/sum(x))*as.numeric(names(x)))}
    data(CCA.qbr,envir=.PBSmodEnv)
    plotSidebars(CCA.qbr,scale=4,las=1,border="navyblue",mar=c(4,4,1,1),
      lbl=c("Year","Quillback Rockfish Age"),margin=function(x){round(meanmarg(x),0)})
    invisible() }
  pbsfun()
  par(oldpar)
})
</code></pre>

<hr>
<h2 id='plotTrace'>Plot Trace Lines from a Data Frame, Matrix, or Vector</h2><span id='topic+plotTrace'></span>

<h3>Description</h3>

<p>Plot trace lines from a data frame or matrix where the first field contains x-values, 
and subsequent fields give y-values to be traced over x. If input is a vector, 
this is traced over the number of observations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotTrace(file, clrs=c("blue","red","green","magenta","navy"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotTrace_+3A_file">file</code></td>
<td>
<p>data frame or matrix of x and y-values, or a vector of y-values.</p>
</td></tr>
<tr><td><code id="plotTrace_+3A_clrs">clrs</code></td>
<td>
<p>vector of colours. Patterns are repeated if the number 
of traces (y-fields) exceed the length of <code>clrs</code>.</p>
</td></tr>
<tr><td><code id="plotTrace_+3A_...">...</code></td>
<td>
<p>additional arguments for <code>plot</code> or <code>lines</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is designed primarily to give greater flexibility when viewing 
results from the R-package <code>BRugs</code>. Use <code>plotTrace</code> in conjunction with 
<code>samplesHistory("*",beg=0,plot=FALSE)</code> rather than <code>samplesHistory</code> 
which calls <code>plotHistory</code>.
</p>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)
  z &lt;- data.frame(x=1:50,y1=rnorm(50,sd=3),y2=rnorm(50,sd=1),y3=rnorm(50,sd=.25))
  plotTrace(z,lwd=3)
  par(oldpar)
})
</code></pre>

<hr>
<h2 id='presentTalk'>Run a Presentation in R</h2><span id='topic+presentTalk'></span>

<h3>Description</h3>

<p>Start an R talk from a <em>talk description file</em> that launches a control GUI.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  presentTalk(talk)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="presentTalk_+3A_talk">talk</code></td>
<td>
<p>name of file containing XML code (e.g., <code>swisstalk.xml</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function <code>presentTalk</code> is a tool that facilitates lectures
and workshops in R.  The function allows the presenter to show code
snippets alongside their execution, making use of R's graphical 
capabilities. When <code>presentTalk</code> is called, a graphical user 
interface (GUI) is launched that allows the user to control the 
flow of the talk (e.g., switching between talks or skipping to 
various sections of a talk.
</p>
<p>The automatic control buttons allow the user to move forward or 
backward in the talk. The <code>GO</code> button moves forward one tag 
segment, the <code>Back</code> button moves back to the previous tag 
segment. The blue buttons allow movement among sections &ndash; 
<code>Prev</code> to the previous section, <code>Restart</code> to the start of
the current section, and <code>Next</code> to the next section. Drop down
lists are provided for both indicating the current section and slide
number and as an additional interface for jumping between different
sections or slide numbers.
</p>
<p>In addition to the automatic menu items, a user can add buttons to
the GUI that accomplish similar purposes.
</p>


<h3>Note</h3>

<p>See the PBSmodelling User's Guide for more information.
</p>


<h3>Author(s)</h3>

 
<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p>See <code><a href="#topic+PBStalk-class">PBStalk-class</a></code> for more details on 
<span class="pkg">PBSmodelling</span>'s talk presentation classes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  cwd = getwd()
  talk_dir &lt;- system.file("examples", package = "PBSmodelling" )
  setwd(talk_dir)
  presentTalk( "swisstalk.xml" ) # closing the GUI should restore cwd
})

## End(Not run)
</code></pre>

<hr>
<h2 id='promptWriteOptions'>Prompt the User to Write Changed Options</h2><span id='topic+promptWriteOptions'></span>

<h3>Description</h3>

<p>If changes have been made to PBS options, this function allows 
the user to choose whether to write PBS options to an external 
file that can be loaded later by <code>readPBSoptions</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>promptWriteOptions(fname="")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="promptWriteOptions_+3A_fname">fname</code></td>
<td>
<p>name of file where options will be saved.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If there are options that have been changed in the GUI but have not been
committed to PBSmodelling memory in the global R environment, the user
is prompted to choose whether or not to commit these options.
</p>
<p>Then, if any PBS options have been changed, the user is prompted to choose
whether to save these options to the file <code>fname</code>. (When a new R session is
started or when a call to <code>readPBSoptions</code> or <code>writePBSoptions</code> is made,
PBS options are considered to be unchanged; when an option is set,
the options are considered to be changed).
</p>
<p>If <code>fname=""</code>, the user is prompted to save under the file name last used 
by a call to <code>readPBSoptions</code> or <code>writePBSoptions</code> if available. 
Otherwise, the default file name &quot;PBSoptions.txt&quot; is used.
</p>


<h3>Author(s)</h3>

<p>Anisa Egeli, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+writePBSoptions">writePBSoptions</a></code>, <code><a href="#topic+readPBSoptions">readPBSoptions</a></code>,
<code><a href="#topic+setPBSoptions">setPBSoptions</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  promptWriteOptions() #uses default filename PBSoptions.txt
})

## End(Not run)
</code></pre>

<hr>
<h2 id='readList'>Read a List from an ASCII File</h2><span id='topic+readList'></span>

<h3>Description</h3>

<p>Read in a list previously saved to an ASCII file by various R functions such
as <code>dput</code>, <code>dump</code>, and <code>writeList</code>. The latter can render
lists in a convenient <span class="pkg">PBSmodelling</span> format. The function <code>readList</code>
detects the format automatically.
</p>
<p>For information about the <span class="pkg">PBSmodelling</span> format, see <code>writeList</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  readList(fname)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readList_+3A_fname">fname</code></td>
<td>
<p>file name of the text file containing the list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list object from ASCII files originally formatted in one of the 
following ways: <br />
<code>"D"</code> = created by the R functions <code>dput</code> or <code>dump</code>;<br />
<code>"R"</code> = R list object that uses &lsquo;structure&rsquo; (e.g., Windows History file);<br />
<code>"P"</code> = PBS-formatted file (see <code>writeList</code>);<br />
<code>"C"</code> = comment-delimited file (e.g., Awatea/Coleraine input files).
</p>


<h3>Warning</h3>

<p>When importing a list in the <code>PBSmodelling</code> (<code>"P"</code>) format,
if two list elements share the same name, the list will import
incorrectly.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+packList">packList</a></code>, <code><a href="#topic+unpackList">unpackList</a></code>, <code><a href="#topic+writeList">writeList</a></code>
</p>

<hr>
<h2 id='readPBSoptions'>Read PBS Options from an External File</h2><span id='topic+readPBSoptions'></span>

<h3>Description</h3>

<p>Load options that were saved using <code>writePBSoptions</code>, for use
with <code>openFile</code>, <code>getPBSoptions</code> or interfaces such as
<code>loadC</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readPBSoptions(fname="PBSoptions.txt")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readPBSoptions_+3A_fname">fname</code></td>
<td>
<p>file name or full path of file from which the options will be loaded.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>If an option exists in R memory but not in the saved file, 
the option is not cleared from memory.
</p>


<h3>Author(s)</h3>

<p>Anisa Egeli, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+writePBSoptions">writePBSoptions</a></code>, <code><a href="#topic+getGUIoptions">getGUIoptions</a></code>,
<code><a href="#topic+openFile">openFile</a></code>, <code><a href="#topic+getPBSoptions">getPBSoptions</a></code>
</p>

<hr>
<h2 id='resetGraph'>Reset par Values for a Plot</h2><span id='topic+resetGraph'></span>

<h3>Description</h3>

<p>Reset <code>par()</code> to default values to ensure that a new plot 
utilizes a full figure region. This function helps manage the device 
surface, especially after previous plotting has altered it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resetGraph(reset.mf=TRUE)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="resetGraph_+3A_reset.mf">reset.mf</code></td>
<td>
<p>if <code>TRUE</code> reset the multi-frame status; otherwise
preserve <code>mfrow</code>, <code>mfcol</code>, and <code>mfg</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function resets <code>par()</code> to its default values.
If <code>reset.mf=TRUE</code>, it also clears the graphics device with 
<code>frame()</code>. Otherwise, the values of <code>mfrow</code>, <code>mfcol</code>, 
and <code>mfg</code> are preserved, and graphics continues as usual in
the current plot. Use <code>resetGraph</code> only before a high level
command that would routinely advance to a new frame.
</p>


<h3>Value</h3>

<p>invisible return of the reset value <code>par()</code>
</p>


<h3>Author(s)</h3>

<p>Jon T. Schnute, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>

<hr>
<h2 id='restorePar'>Get Actual Parameters from Scaled Values</h2><span id='topic+restorePar'></span>

<h3>Description</h3>

<p>Restore scaled parameters to their original units. Used in minimization by <code>calcMin</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>restorePar(S,pvec)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="restorePar_+3A_s">S</code></td>
<td>
<p>scaled parameter vector.</p>
</td></tr>
<tr><td><code id="restorePar_+3A_pvec">pvec</code></td>
<td>
<p>a data frame comprising four columns - 
<code>c("val","min","max","active")</code> and as many rows as there are model 
parameters. The <code>"active"</code> field (logical) determines whether the 
parameters are estimated (<code>TRUE</code>) or remain fixed (<code>FALSE</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Restoration algorithm:  <code class="reqn"> P = P_{min} + (P_{max} - P_{min}) (sin(\frac{\pi S}{2}))^2 </code>
</p>


<h3>Value</h3>

<p>Parameter vector converted from scaled units to original units specified by <code>pvec</code>.
</p>


<h3>Author(s)</h3>

<p>Jon T. Schnute, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+scalePar">scalePar</a></code>, <code><a href="#topic+calcMin">calcMin</a></code>, <code><a href="#topic+GT0">GT0</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  pvec &lt;- data.frame(val=c(1,100,10000),min=c(0,0,0),max=c(5,500,50000),
    active=c(TRUE,TRUE,TRUE))
  S    &lt;- c(.5,.5,.5)
  P    &lt;- restorePar(S,pvec)
  print(cbind(pvec,S,P))
})
</code></pre>

<hr>
<h2 id='runDemos'>Interactive GUI for R Demos</h2><span id='topic+runDemos'></span>

<h3>Description</h3>

<p>An interactive GUI for accessing demos from any R package installed on the 
user's system. <code>runDemos</code> is a convenient alternative to R's <code>demo</code> 
function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runDemos(package)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="runDemos_+3A_package">package</code></td>
<td>
<p> display demos from a particular package (optional).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the argument <code>package</code> is not specified, the function will look for 
demos in all packages installed on the user's system.
</p>


<h3>Note</h3>

<p>The <code>runDemos</code> GUI attempts to retain the user's objects and restore
the working directory. However, pre-existing objects will be overwritten 
if their names coincide with names used by the various demos. Also, 
depending on conditions, the user may lose working directory focus. 
We suggest that cautious users run this demo from a project where data objects are 
not critical.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+runExamples">runExamples</a></code>  for examples specific to <span class="pkg">PBSmodelling</span>.
</p>

<hr>
<h2 id='runExample'>
Run a Single GUI Example Included with PBS Modelling
</h2><span id='topic+runExample'></span>

<h3>Description</h3>

<p>Display a GUI to demonstrate one PBS Modelling example.
</p>
<p>The example source files can be found in the R directory 
<code>.../library/PBSmodelling/examples</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>  runExample(ex, pkg="PBSmodelling")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="runExample_+3A_ex">ex</code></td>
<td>
<p>string specifying an example in the <code>pkg</code> directory <code>examples</code>. </p>
</td></tr>
<tr><td><code id="runExample_+3A_pkg">pkg</code></td>
<td>
<p>package with an <code>examples</code> subdirectory. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>If no example is specified or if the example does not exist, a GUI pops up
informing you of potential choices. Note that the string choice is case-sensitive.
</p>
<p>Some examples use external packages which must be installed to work correctly:
</p>
<p><code>BRugs</code> - <code>LinReg</code>, <code>MarkRec</code>, and <code>CCA</code>;
</p>
<p><code>deSolve/PBSddesolve</code> - <code>FishRes</code>;
</p>
<p><code>PBSmapping</code> - <code>FishTows</code>.
</p>


<h3>Note</h3>

<p>The examples are copied from <code>.../library/PBSmodelling/examples</code> to R's current 
temporary working directory and run from there.
</p>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+runDemos">runDemos</a></code>, <code><a href="#topic+runExamples">runExamples</a></code>
</p>

<hr>
<h2 id='runExamples'>Run GUI Examples Included with PBS Modelling</h2><span id='topic+runExamples'></span>

<h3>Description</h3>

<p>Display an interactive GUI to demonstrate PBS Modelling examples.
</p>
<p>The example source files can be found in the R directory 
<code>.../library/PBSmodelling/examples</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runExamples()</code></pre>


<h3>Details</h3>

<p>Some examples use external packages which must be installed to work correctly:
</p>
<p><code>BRugs</code> - <code>LinReg</code>, <code>MarkRec</code>, and <code>CCA</code>;
</p>
<p><code>deSolve/PBSddesolve</code> - <code>FishRes</code>;
</p>
<p><code>PBSmapping</code> - <code>FishTows</code>.
</p>


<h3>Note</h3>

<p>The examples are copied from <code>.../library/PBSmodelling/examples</code> to R's current 
temporary working directory and run from there.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+runDemos">runDemos</a></code>, <code><a href="#topic+runExample">runExample</a></code>
</p>

<hr>
<h2 id='scalePar'>Scale Parameters to [0,1]</h2><span id='topic+scalePar'></span>

<h3>Description</h3>

<p>Scale parameters for function minimization by <code>calcMin</code>.</p>


<h3>Usage</h3>

<pre><code class='language-R'>scalePar(pvec)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scalePar_+3A_pvec">pvec</code></td>
<td>
<p>a data frame comprising four columns - 
<code>c("val","min","max","active")</code> and as many rows as there are model
parameters. The <code>"active"</code> field (logical) determines whether the 
parameters are estimated (<code>TRUE</code>) or remain fixed (<code>FALSE</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Scaling algorithm:  <code class="reqn"> S = \frac{2}{\pi} asin \sqrt{ \frac{P - P_{min}}{P_{max} - P_{min}} } </code>
</p>


<h3>Value</h3>

<p>Parameter vector scaled between 0 and 1.
</p>


<h3>Author(s)</h3>

<p>Jon T. Schnute, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+restorePar">restorePar</a></code>, <code><a href="#topic+calcMin">calcMin</a></code>, <code><a href="#topic+GT0">GT0</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  pvec &lt;- data.frame(val=c(1,100,10000),min=c(0,0,0),max=c(5,500,50000),
    active=c(TRUE,TRUE,TRUE))
  S    &lt;- scalePar(pvec)
  print(cbind(pvec,S))
})
</code></pre>

<hr>
<h2 id='selectDir'>Display Dialogue: Select directory</h2><span id='topic+selectDir'></span>

<h3>Description</h3>

<p>Display the default directory chooser prompt provided by the Operating System.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>selectDir(initialdir=getwd(), mustexist=TRUE, title="", 
    usewidget=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="selectDir_+3A_initialdir">initialdir</code></td>
<td>
<p>initially selected directory</p>
</td></tr>
<tr><td><code id="selectDir_+3A_mustexist">mustexist</code></td>
<td>
<p>if logical value is <code>TRUE</code>, only a existing directory can be selected</p>
</td></tr>
<tr><td><code id="selectDir_+3A_title">title</code></td>
<td>
<p>title for the prompt window</p>
</td></tr>
<tr><td><code id="selectDir_+3A_usewidget">usewidget</code></td>
<td>
<p>store the selected directory in the named entry widget</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The directory path selected by the user
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+selectFile">selectFile</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  dir(selectDir(title="select a directory to list contents of"))

  #integration with widget via doAction
  createWin( c( "entry foo mode=character", 
    "button text=\"select dir\" 
    func=doAction action=\"selectDir(usewidget=`foo`)\"" ), astext=TRUE )
})

## End(Not run)
</code></pre>

<hr>
<h2 id='selectFile'>Display Dialogue: Open or Save File</h2><span id='topic+selectFile'></span>

<h3>Description</h3>

<p>Display the default <b>Open</b> or  <b>Save</b> prompt provided by the Operating System.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>selectFile(initialfile="", initialdir=getwd(), 
    filetype=list(c("*","All Files")), mode="open", multiple=FALSE,
    title="", defaultextension="", usewidget=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="selectFile_+3A_initialfile">initialfile</code></td>
<td>
<p>initially selected file</p>
</td></tr>
<tr><td><code id="selectFile_+3A_initialdir">initialdir</code></td>
<td>
<p>initially directory the dialog opens </p>
</td></tr>
<tr><td><code id="selectFile_+3A_filetype">filetype</code></td>
<td>
<p>a list of character vectors indicating file types made available 
to users of the GUI. Each vector is of length one or two. The first element 
specifies either the file extension or <code>"*"</code> for all file types. The second 
element gives an optional descriptor name for the file type. The supplied 
<code>filetype</code> list appears as a set of choices in the pull-down box labelled 
&ldquo;Files of type:&rdquo;.</p>
</td></tr>
<tr><td><code id="selectFile_+3A_mode">mode</code></td>
<td>
<p>string: if <code>"save"</code> display <b>Save As</b> prompt, 
if <code>"open"</code> display <b>Open</b> prompt.</p>
</td></tr>
<tr><td><code id="selectFile_+3A_multiple">multiple</code></td>
<td>
<p>if <code>TRUE</code> the open prompt can select multiple files. This has no
effect for the save prompt.</p>
</td></tr>
<tr><td><code id="selectFile_+3A_title">title</code></td>
<td>
<p>title for the prompt window</p>
</td></tr>
<tr><td><code id="selectFile_+3A_defaultextension">defaultextension</code></td>
<td>
<p>default file extension if none is provided by the user</p>
</td></tr>
<tr><td><code id="selectFile_+3A_usewidget">usewidget</code></td>
<td>
<p>store the selected file in the named entry widget</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The file name and path of the file(s) selected by the user.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+selectDir">selectDir</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  #integration with widget via doAction
  createWin( c( "entry foo mode=character width=60", 
    "button text=\"select file\" 
    func=doAction action=\"selectFile(usewidget=`foo`)\"" ), astext=TRUE )
})

## End(Not run)
</code></pre>

<hr>
<h2 id='setFileOption'>Set a PBS File Path Option Interactively</h2><span id='topic+setFileOption'></span>

<h3>Description</h3>

<p>Set a PBS option by browsing for a file. This function provides 
an alternative to using <code>setPBSoptions</code> when setting an 
option that has a path to a file as its value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setFileOption(option)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setFileOption_+3A_option">option</code></td>
<td>
<p>name PBS option to change</p>
</td></tr>
</table>


<h3>Note</h3>

<p>If all the required arguments are missing, it is assumed that 
the function is being called by a GUI widget.
</p>


<h3>Author(s)</h3>

<p>Anisa Egeli, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+setPathOption">setPathOption</a></code>, <code><a href="#topic+setPBSoptions">setPBSoptions</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  setPathOption("editor")
})

## End(Not run)
</code></pre>

<hr>
<h2 id='setGUIoptions'>Set PBS Options from Widget Values</h2><span id='topic+setGUIoptions'></span>

<h3>Description</h3>

<p>Set PBS options from corresponding values of widgets in a GUI.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setGUIoptions(option)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setGUIoptions_+3A_option">option</code></td>
<td>
<p>the name of a single option or the string <code>"*"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A GUI may have PBS options that it uses, which have corresponding widgets that
are used for entering values for these options. These are declared by
<code>declareGUIoptions</code>.
</p>
<p>If the <code>option</code> argument is the name of an option, 
<code>setGUIoptions</code> transfers the value of this option from a 
same-named widget into PBS options global R environment database.
</p>
<p>If the <code>option</code> argument is <code>"*"</code>, then all the 
options that have been declared by <code>declareGUIoptions</code> 
will be transferred in this fashion.
</p>
<p>To use this function in a <em>window description file</em>, the 
<code>option</code> argument must be specified as the action of the 
widget that calls <code>setGUIoptions</code> &ndash; <code>action=editor</code> 
or <code>action=*</code> for example.
</p>


<h3>Note</h3>

<p>If all the required arguments are missing, it is assumed that 
the function is being called by a GUI widget.
</p>


<h3>Author(s)</h3>

<p>Anisa Egeli, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+declareGUIoptions">declareGUIoptions</a></code>, <code><a href="#topic+getGUIoptions">getGUIoptions</a></code>,
<code><a href="#topic+setPBSoptions">setPBSoptions</a></code>,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  setGUIoptions("editor")
})

## End(Not run)
</code></pre>

<hr>
<h2 id='setPathOption'>Set a PBS Path Option Interactively</h2><span id='topic+setPathOption'></span>

<h3>Description</h3>

<p>Set a PBS option by browsing for a directory. This function provides 
an alternative to using <code>setPBSoptions</code> when setting an option 
that has a path as its value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setPathOption(option)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setPathOption_+3A_option">option</code></td>
<td>
<p>name PBS option to change</p>
</td></tr>
</table>


<h3>Note</h3>

<p>If all the required arguments are missing, it is assumed that 
the function is being called by a GUI widget.
</p>


<h3>Author(s)</h3>

<p>Anisa Egeli, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+setFileOption">setFileOption</a></code>, <code><a href="#topic+setPBSoptions">setPBSoptions</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  setPathOption("myPath")
})

## End(Not run)
</code></pre>

<hr>
<h2 id='setPBSext'>Set Command to Associate with File Name Extension</h2><span id='topic+setPBSext'></span>

<h3>Description</h3>

<p>Set a command with an associated extension, for use in 
<code>openFile</code>.  The command must specify where the target file 
name is inserted by indicating a <code>'%f'</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setPBSext(ext, cmd)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setPBSext_+3A_ext">ext</code></td>
<td>
<p><code>character</code> &ndash; string specifying the extension suffix.</p>
</td></tr>
<tr><td><code id="setPBSext_+3A_cmd">cmd</code></td>
<td>
<p><code>character</code> &ndash; command string to associate with the extension.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>These values are not saved from one <em>PBS Modelling</em> session to the next.
</p>


<h3>Author(s)</h3>

<p><a href="mailto:alex@mofo.ca">Alex Couture-Beil</a>, Software Engineer<br />
Earthly Technologies, Victoria BC<br />
</p>
<p>Maintainer: <a href="mailto:rowan.haigh@dfo-mpo.gc.ca">Rowan Haigh</a>, Program Head &ndash; Offshore Rockfish<br />
Pacific Biological Station (PBS), Fisheries &amp; Oceans Canada (DFO), Nanaimo BC<br />
<em>locus opus</em>: Regional Headquarters (RHQ), Vancouver BC<br />
Last modified <code>Rd: 2023-01-05</code>
</p>


<h3>See Also</h3>

<p>In package <span class="pkg">PBSmodelling</span>:<br />
<code><a href="#topic+getPBSext">getPBSext</a></code>,
<code><a href="#topic+openFile">openFile</a></code>,
<code><a href="#topic+clearPBSext">clearPBSext</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  ## Set 'Firefox' to open '.html' files (only applicable if Firefox is NOT default web browser)
  setPBSext("html", '"c:/Program Files/Mozilla Firefox/firefox.exe" file://%f')
  openFile("foo.html")

  ## Set 'notepad' to open '.txt' files (only applicable if notepad is NOT default editor)
  ## Note that commands to editors (at least in Windows) do not use 'file://'.
  setPBSext('txt', '"C:/Windows/notepad.exe" %f')
  openFile("foo.txt")
})

## End(Not run)
</code></pre>

<hr>
<h2 id='setPBSoptions'>Set A User Option</h2><span id='topic+setPBSoptions'></span>

<h3>Description</h3>

<p>Options set by the user for use by other functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setPBSoptions(option, value, sublist=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setPBSoptions_+3A_option">option</code></td>
<td>
<p>name of the option to set.</p>
</td></tr>
<tr><td><code id="setPBSoptions_+3A_value">value</code></td>
<td>
<p>new value to assign this option.</p>
</td></tr>
<tr><td><code id="setPBSoptions_+3A_sublist">sublist</code></td>
<td>
<p>if <code>value</code> is a sublist (list component) of <code>option</code>,
this list component can be changed individually using <code>sublist=TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Objects can be placed into the PBS options manager (see <code><a href="#topic+PBSoptions-class">PBSoptions-class</a></code>).<br />
If the user wishes to change the object associated with an option, issue the command:
</p>
<pre>setPBSoptions("someOldOption",someNewOption)</pre>
<p>If an option comprises a list object, a user can alter specific components of the list 
by activating the <code>sublist</code> argument:
</p>
<pre>setPBSoptions(option="myList", value=list(gamma=130), sublist=TRUE)</pre>
<p>See example below.
</p>


<h3>Note</h3>

<p>A value <code>.PBSmod$.options$.optionsChanged</code> is set to <code>TRUE</code> when an option is changed,
so that the user doesn't always have to be prompted to save the options file. <br />
By default, <code>.PBSmod$.options$.optionsChanged</code> is not set or <code>NULL</code>. <br />
Also, if an option is set to <code>""</code> or <code>NULL</code> then it is removed. <br />
<code>.initPBSoptions()</code> is now called first (options starting with a dot &quot;.&quot; 
do not set <code>.optionsChanged</code>).
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getPBSoptions">getPBSoptions</a></code>, <code><a href="#topic+writePBSoptions">writePBSoptions</a></code>,
<code><a href="#topic+readPBSoptions">readPBSoptions</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  myList=list(alpha=1,beta=2,gamma=3,delta=4)
  setPBSoptions(option="myList", myList)
  cat("Original myList:\n---------------\n")
  print(getPBSoptions("myList"))
  setPBSoptions(option="myList", value=list(gamma=130), sublist=TRUE)
  cat("Revised myList:\n--------------\n")
  print(getPBSoptions("myList"))
})
</code></pre>

<hr>
<h2 id='setwdGUI'>Browse for Working Directory and Optionally Find Prefix</h2><span id='topic+setwdGUI'></span>

<h3>Description</h3>

<p>Allows the user to browse a directory tree to set the working directory.
Optionally, files with given suffixes can be located in the new directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setwdGUI()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  createWin( "button text=\"Change working directory\" func=setwdGUI", astext=TRUE )
})

## End(Not run)
</code></pre>

<hr>
<h2 id='setWidgetColor'>Update Widget Color</h2><span id='topic+setWidgetColor'></span>

<h3>Description</h3>

<p>Update the foreground and background colors of a widget
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setWidgetColor(name, radioValue, winName = .PBSmodEnv$.PBSmod$.activeWin, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setWidgetColor_+3A_name">name</code></td>
<td>
<p>the name of the widget</p>
</td></tr>
<tr><td><code id="setWidgetColor_+3A_radiovalue">radioValue</code></td>
<td>
<p>if specified, modify a particular radio option, as identified by the value, rather than the complete set (identified by the common name)</p>
</td></tr>
<tr><td><code id="setWidgetColor_+3A_winname">winName</code></td>
<td>
<p>window from which to select the GUI widget. 
The window that most recently receive user input is used by default if winname is not supplied</p>
</td></tr>
<tr><td><code id="setWidgetColor_+3A_...">...</code></td>
<td>
<p> any combination of &quot;fg&quot;, &quot;bg&quot;, &quot;disablefg&quot;, &quot;disablebg&quot;, &quot;entryfg&quot;, &quot;entrybg&quot;, &quot;noeditfg&quot;, &quot;noeditbg&quot; arguments, depending on type of widget - see details</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The setWidgetColor function allows dynamic updating of widget colors during program execution.
However, two factors determine whether dynamic color updating is possible for a particular
widget: (i) the type of widget, and (ii) the nature of the Tk implementation in the underlying
widget library.  Thus, a given widget may not support all combinations of colour variables. 
The following widgets support the corresponding options:
</p>

<dl>
<dt>button:</dt><dd><p>fg, bg, disablefg</p>
</dd>
<dt>check:</dt><dd><p>fg, bg, disablefg, entryfg, entrybg</p>
</dd>
<dt>data:</dt><dd><p>entryfg, entrybg, noeditfg, noeditbg</p>
</dd>
<dt>droplist:</dt><dd><p>fg, bg</p>
</dd>
<dt>entry:</dt><dd><p>entryfg, entrybg, noeditfg, noeditbg</p>
</dd>
<dt>label:</dt><dd><p>fg, bg</p>
</dd>
<dt>matrix:</dt><dd><p>entryfg, entrybg, noeditfg, noeditbg</p>
</dd>
<dt>object:</dt><dd><p>entryfg, entrybg, noeditfg, noeditbg</p>
</dd>
<dt>progressbar:</dt><dd><p>fg, bg</p>
</dd>
<dt>radio:</dt><dd><p>fg, bg</p>
</dd>
<dt>slide:</dt><dd><p>fg, bg</p>
</dd>
<dt>spinbox:</dt><dd><p>entryfg, entrybg</p>
</dd>
<dt>text:</dt><dd><p>fg, bg</p>
</dd>
<dt>vector:</dt><dd><p>entryfg, entrybg, noeditfg, noeditbg</p>
</dd>
</dl>

<p>These options are described in the PBSmodelling User Guide under Appendix A.
</p>
<p>Be aware that Tk uses gray for the highlight color during a selection operation.
This means that when the background colour is also gray, there is no visual clue
that the value has been selected for a copy operation.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil (VIU, Nanaimo BC) and Allen R. Kronlund (PBS, Nanaimo BC)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  createWin("label \"hello world\" name=hello", astext=TRUE)
  setWidgetColor( "hello", bg="lightgreen", fg="purple" )
})
local(envir=.PBSmodEnv,expr={
  createWin("vector names=v length=3 values=\"1 2 3\"", astext=TRUE)
  setWidgetColor( "v[1]", entrybg="lightgreen", entryfg="purple" )
  setWidgetColor( "v[2]", entrybg="green", entryfg="purple" )
  setWidgetColor( "v[3]", entrybg="forestgreen", entryfg="purple" )
})

## End(Not run)
</code></pre>

<hr>
<h2 id='setWidgetState'>Update Widget State</h2><span id='topic+setWidgetState'></span>

<h3>Description</h3>

<p>Update the read-only state of a widget.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setWidgetState( varname, state, radiovalue, winname, warn=TRUE )
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setWidgetState_+3A_varname">varname</code></td>
<td>
<p>the name of the widget</p>
</td></tr>
<tr><td><code id="setWidgetState_+3A_state">state</code></td>
<td>
<p>&quot;normal&quot; or &quot;disabled&quot; and for some widgets &quot;readonly&quot; as described under Details below.</p>
</td></tr>
<tr><td><code id="setWidgetState_+3A_radiovalue">radiovalue</code></td>
<td>
<p>if specified, disable a particular radio option, as identified by the value, rather than the complete set (identified by the common name)</p>
</td></tr>
<tr><td><code id="setWidgetState_+3A_winname">winname</code></td>
<td>
<p>window from which to select the GUI widget. The window that most recently receive user input is used by default if winname is not supplied.</p>
</td></tr>
<tr><td><code id="setWidgetState_+3A_warn">warn</code></td>
<td>
<p>if TRUE, display a warning if readonly is converted to disabled (only applies for widgets that don't accept readonly)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The setWidgetState function allows dynamic control of widget functioning during program execution.  The function serves as a wrapper for the tkconfigure function available in the underlying Tk libraries used by PBS Modelling.  Thus, setWidgetState is only available for those widgets that use Tk library widgets.
</p>
<p>The state of the following PBS Modelling widgets can be set to &quot;normal&quot; or &quot;disabled&quot;: button, check, data, droplist, entry, matrix, object, radio, slide, spinbox, table, text, and vector.  When the state variable is set to &quot;disabled&quot;, values displayed in the widget cannot be changed or copied except in the case of the object and table widgets which permit the values to be copied.
</p>
<p>The data, entry, matrix, and vector widgets support a &quot;readonly&quot; state that allows values displayed in the widget to be copied but not changed.  The displayed value can be selected using the keyboard or mouse.  However, the copy and paste operations can only be accomplished via Ctrl-C and Ctrl-V, respectively, not the mouse.
</p>
<p>Be aware that Tk uses gray for the highlight color during a selection operation.  This means that when the background colour is also gray, there is no visual clue that the value has been selected for a copy operation.
</p>
<p>Exceptions to the behaviour determined by state include the object, table and text widgets.  There is no &quot;readonly&quot; state applicable to these widgets.  Nevertheless, the values displayed can be copied even when the state is &quot;disabled&quot;.
</p>
<p>Individual radio widgets grouped by the name variable of a radio declaration can be updated by specifying radiovalue in the call to setWidgetState.
</p>
<p>The state of individual elements in the data, matrix, and vector widgets can be updated by indexing.  For the vector and matrix widgets any element can be addressed by appending the desired index to the widget name using square brackets (e.g., &quot;myVec[2]&quot; or &quot;myMatrix[2,3]&quot;).  The data widget is indexed differently than the matrix widget by adding &quot;d&quot; after the brackets (e.g., &quot;myData[1,1]d&quot;).  This change in syntax is required for internal coding of PBS Modelling.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil (VIU, Nanaimo BC) and Allen R. Kronlund (PBS, Nanaimo BC)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  winDesc &lt;- c('vector length=3 name=vec labels="normal disabled readonly" values="1 2 3"',
             "matrix nrow=2 ncol=2 name=mat", "button name=but_name" );
  createWin(winDesc, astext=TRUE)

  setWidgetState( "vec[1]", "normal" )
  setWidgetState( "vec[2]", "disabled" )
  setWidgetState( "vec[3]", "readonly" )

  setWidgetState( "mat", "readonly" )
  setWinVal( list( mat = matrix( 1:4, 2, 2 ) ) )

  #works for buttons too
  setWidgetState( "but_name", "disabled" )
})

## End(Not run)
</code></pre>

<hr>
<h2 id='setWinAct'>Add a Window Action to the Saved Action Vector</h2><span id='topic+setWinAct'></span>

<h3>Description</h3>

<p>Append a string value specifying an action to the first position of an 
action vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setWinAct(winName, action)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setWinAct_+3A_winname">winName</code></td>
<td>
<p>window name where action is taking place.</p>
</td></tr>
<tr><td><code id="setWinAct_+3A_action">action</code></td>
<td>
<p>string value describing an action.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When a function is called from a GUI, a string descriptor associated with 
the action of the function is stored internally (appended to the first position 
of the action vector). A user can utilize this action as a type of argument 
for programming purposes. The command <code>getWinAct()[1]</code> yields the latest action.
</p>
<p>Sometimes it is useful to &ldquo;fake&rdquo; an action. Calling <code>setWinAct</code> allows 
the recording of an action, even if a button has not been pressed.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>

<hr>
<h2 id='setWinVal'>Update Widget Values</h2><span id='topic+setWinVal'></span>

<h3>Description</h3>

<p>Update a widget with a new value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setWinVal(vars, winName)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setWinVal_+3A_vars">vars</code></td>
<td>
<p>a list or vector with named components.</p>
</td></tr>
<tr><td><code id="setWinVal_+3A_winname">winName</code></td>
<td>
<p>window from which to select GUI widget values. The default 
takes the window that has most recently received new user input.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>vars</code> argument expects a list or vector with named elements. 
Every element name corresponds to the widget name which will be updated 
with the supplied element value.
</p>
<p>The <code>vector</code>, <code>matrix</code>, and <code>data</code> widgets can be updated in 
several ways. If more than one name is specified for the <code>names</code> argument 
of these widgets, each element is treated like an <code>entry</code> widget. 
</p>
<p>If however, a single <code>name</code> describes any of these three widgets, the entire 
widget can be updated by passing an appropriately sized object.
</p>
<p>Alternatively, any element can be updated by appending its index in square brackets 
to the end of the <code>name</code>. The <code>data</code> widget is indexed differently 
than the <code>matrix</code> widget by adding &quot;d&quot; after the brackets. This tweak is necessary 
for the internal coding (bookkeeping) of <em>PBS Modelling</em>. Example: <code>"foo[1,1]d"</code>.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getWinVal">getWinVal</a></code>, <code><a href="#topic+createWin">createWin</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  winDesc &lt;- c("vector length=3 name=vec",
    "matrix nrow=2 ncol=2 name=mat", "slideplus name=foo");
  createWin(winDesc, astext=TRUE)
  setWinVal(list(vec=1:3, "mat[1,1]"=123, foo.max=1.5, foo.min=0.25, foo=0.7))
})

## End(Not run)
</code></pre>

<hr>
<h2 id='show0'>Convert Numbers into Text with Specified Decimal Places</h2><span id='topic+show0'></span>

<h3>Description</h3>

<p>Return a character representation of a number with added zeroes 
out to a specified number of decimal places.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show0(x, n, add2int=FALSE, round2n=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show0_+3A_x">x</code></td>
<td>
<p>numeric data (scalar, vector, or matrix).</p>
</td></tr>
<tr><td><code id="show0_+3A_n">n</code></td>
<td>
<p>number of decimal places to show, including zeroes.</p>
</td></tr>
<tr><td><code id="show0_+3A_add2int">add2int</code></td>
<td>
<p>if <code>TRUE</code>, add zeroes to integers after the decimal.</p>
</td></tr>
<tr><td><code id="show0_+3A_round2n">round2n</code></td>
<td>
<p>if <code>TRUE</code>, round <code>x</code> first to <code>n</code> decimal places.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A scalar/vector of strings representing numbers. Useful for labelling purposes.
</p>


<h3>Note</h3>

<p>By default, this function does not round or truncate numbers. It simply adds zeroes if 
<code>n</code> is greater than the available digits in the decimal part of a number. The user can 
choose to round the numbers first by setting argument <code>round2n = TRUE</code>.
</p>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pad0">pad0</a></code>, <code><a href="#topic+GT0">GT0</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  oldpar = par(no.readonly=TRUE)
  frame()

  #do not show decimals on integers
  addLabel(0.25,0.75,show0(15.2,4))
  addLabel(0.25,0.7,show0(15.1,4))
  addLabel(0.25,0.65,show0(15,4))

  #show decimals on integers
  addLabel(0.25,0.55,show0(15.2,4,TRUE))
  addLabel(0.25,0.5,show0(15.1,4,TRUE))
  addLabel(0.25,0.45,show0(15,4,TRUE))
  par(oldpar)
})
</code></pre>

<hr>
<h2 id='showAlert'>Display a Message in an Alert Window</h2><span id='topic+showAlert'></span>

<h3>Description</h3>

<p>Display an alert window that contains a specified message and 
an OK button for dismissing the window.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showAlert(message, title="Alert", icon="warning")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="showAlert_+3A_message">message</code></td>
<td>
<p>message to display in alert window</p>
</td></tr>
<tr><td><code id="showAlert_+3A_title">title</code></td>
<td>
<p>title of alert window</p>
</td></tr>
<tr><td><code id="showAlert_+3A_icon">icon</code></td>
<td>
<p>icon to display in alert window; options are 
<code>"error"</code>, <code>"info"</code>, <code>"question"</code>, or <code>"warning"</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Anisa Egeli, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getYes">getYes</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  showAlert("Hello World!")
})

## End(Not run)
</code></pre>

<hr>
<h2 id='showArgs'>Display Expected Widget Arguments</h2><span id='topic+showArgs'></span>

<h3>Description</h3>

<p>For each widget specified, display its arguments in order with their default values. 
The display list can be expanded to report each argument on a single line.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showArgs(widget, width=70, showargs=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="showArgs_+3A_widget">widget</code></td>
<td>
<p>vector string of widget names; if not specified (default), 
the function displays information about all widgets in alphabetical order.</p>
</td></tr>
<tr><td><code id="showArgs_+3A_width">width</code></td>
<td>
<p>numeric width used by <code>strwrap</code> to wrap lines of the widget
usage section.</p>
</td></tr>
<tr><td><code id="showArgs_+3A_showargs">showargs</code></td>
<td>
<p>logical:, if <code>TRUE</code>, the display also lists each argument
on single line after the widget usage section.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A text stream to the R console. Invisibly returns the widget usage lines.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>

<hr>
<h2 id='showHelp'>Display HTML Help Pages for Packages in Browser</h2><span id='topic+showHelp'></span>

<h3>Description</h3>

<p>Display the help pages for installed packages that match the 
supplied pattern in an HTML browser window.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showHelp(pattern="methods", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="showHelp_+3A_pattern">pattern</code></td>
<td>
<p>string pattern to match to package names</p>
</td></tr>
<tr><td><code id="showHelp_+3A_...">...</code></td>
<td>
<p>allows user to specify two additional arguments: <br />
<code>remote</code> - character string giving a valid URL for the <code>R_HOME</code>
directory on a remote location; <br />
<code>update</code> - logical: if <code>TRUE</code>, attempt to update the package
index to reflect the currently available packages. 
(Not attempted if <code>remote</code> is non-<code>NULL</code>.) </p>
</td></tr>
</table>


<h3>Details</h3>

<p>The specified pattern is matched to R-packages installed on 
the user's system. The code uses the <code>utils</code> 
function <code>browseURL</code> to display the HTML Help Pages using 
a browser that the system associates with <code>html</code> 
extensions. (See help for <code>browseURL</code> for other operating systems.
</p>


<h3>Value</h3>

<p>A list is invisibly returned, comprising:
</p>
<table>
<tr><td><code>Apacks</code></td>
<td>
<p>all packages installed on user's system</p>
</td></tr>
<tr><td><code>Spacks</code></td>
<td>
<p>selected packages based on specified pattern</p>
</td></tr>
<tr><td><code>URLs</code></td>
<td>
<p>path and file name of HTML Help Page</p>
</td></tr>
</table>
<p>Help pages are displayed in a separate browser window.
</p>


<h3>Note</h3>

<p>The connection time for browsers (at least in Windows OS)
is slow. If the HTML browser program is not already running,
multiple matching pages will most likely not be displayed. However, 
subsequent calls to <code>showHelp</code> should show all matches.
</p>
<p>This function will now only work in R (&gt;=3.2.0) or from SVN revision &gt;= 67548.
The CRAN gurus now disallow direct calls to <code>tools:::httpdPort</code>.
</p>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

 
<p><code><a href="#topic+viewCode">viewCode</a></code>, <code><a href="#topic+showPacks">showPacks</a></code>
</p>

<hr>
<h2 id='showPacks'> Show Packages Required But Not Installed </h2><span id='topic+showPacks'></span>

<h3>Description</h3>

<p>Show the packages specified by the user and compare these to the 
installed packages on the user's system. Display packages not installed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showPacks(packs=c("PBSmodelling","PBSmapping","PBSddesolve",
    "rgl","deSolve","akima","deldir","sp","maptools","KernSmooth"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="showPacks_+3A_packs">packs</code></td>
<td>
<p> string vector of package names that are compared to installed packages. </p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns a list of <code>Apacks</code> (all packages installed on user's system),
<code>Ipacks</code> (packages in <code>packs</code> that are installed), and
<code>Mpacks</code> (packages that are missing).
</p>


<h3>Author(s)</h3>

<p>Jon T. Schnute, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>

<hr>
<h2 id='showRes'>Show Results of Expression Represented by Text</h2><span id='topic+showRes'></span>

<h3>Description</h3>

<p>Evaluate the supplied expression, reflect it on the command line, 
and show the results of the evaluation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showRes(x, cr=TRUE, pau=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="showRes_+3A_x">x</code></td>
<td>
<p>an R expression to evaluate</p>
</td></tr>
<tr><td><code id="showRes_+3A_cr">cr</code></td>
<td>
<p>logical: if <code>TRUE</code>, introduce extra carriage returns</p>
</td></tr>
<tr><td><code id="showRes_+3A_pau">pau</code></td>
<td>
<p>logical: if <code>TRUE</code>, pause after expression reflection and execution</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The results of the expression are return invisibly.
</p>


<h3>Author(s)</h3>

<p>Jon T. Schnute, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  showRes("x=rnorm(100)",pau=FALSE)
})
</code></pre>

<hr>
<h2 id='showVignettes'>Display Vignettes for Packages</h2><span id='topic+showVignettes'></span>

<h3>Description</h3>

<p>Create a GUI that displays all vignettes for installed packages. 
The user can choose to view the source file for building the vignette 
or the final <code>.pdf</code> file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showVignettes(package)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="showVignettes_+3A_package">package</code></td>
<td>
<p>character string specifying package name that exists in the user's R library</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the argument <code>package</code> is not specified, the function
will look for vignettes in all packages installed on the user's 
system. The user can choose to view the source file 
for building the vignette (usually <code>*.Rnw</code> or <code>*.Snw</code> files)
or the final build from the source code (<code>*.pdf</code>).
</p>
<p><code>showVignettes</code> uses the <span class="pkg">PBSmodelling</span> function 
<code>openFile</code> to display the <code>.Rnw</code> and <code>.pdf</code> files 
using programs that the system associates with these extensions. 
On systems that do not support file extension associations, the 
function <code>setPBSext</code> can temporarily set a command to associate 
with an extension.
</p>


<h3>Author(s)</h3>

<p>Anisa Egeli, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

 
<p><code><a href="#topic+showHelp">showHelp</a></code>, <code><a href="#topic+openFile">openFile</a></code>, <code><a href="#topic+setPBSext">setPBSext</a></code>, <code><a href="#topic+getPBSext">getPBSext</a></code>
</p>

<hr>
<h2 id='sortHistory'>Sort an Active or Saved History</h2><span id='topic+sortHistory'></span>

<h3>Description</h3>

<p>Utility to sort history. When called without any arguments, an interactive GUI
is used to pick which history to sort. When called with <code>hisname</code>, sort
this active history widget. When called with <code>file</code> and <code>outfile</code>,
sort the history located in <code>file</code> and save to <code>outfile</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sortHistory(file="", outfile=file, hisname="")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sortHistory_+3A_file">file</code></td>
<td>
<p>file name of saved history to sort.</p>
</td></tr>
<tr><td><code id="sortHistory_+3A_outfile">outfile</code></td>
<td>
<p>file to save sorted history to.</p>
</td></tr>
<tr><td><code id="sortHistory_+3A_hisname">hisname</code></td>
<td>
<p>name of active history widget and window it is located in, given
in the form <code>WINDOW.HISTORY</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>After selecting a history to sort (either from given arguments, or interactive GUI)
the R data editor window will be displayed. The editor will have one column named
\&quot;new\&quot; which will have numbers 1,2,3,...,n. This represents the current ordering
of the history. You may change the numbers around to define a new order. The list
is sorted by reassigning the index in row i as index i.
</p>
<p>For example, if the history had three items 1,2,3. Reordering this to 3,2,1 will
reverse the order; changing the list to 1,2,1,1 will remove entry 3 and 
create two duplicates of entry 1.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+importHistory">importHistory</a></code>, <code><a href="#topic+initHistory">initHistory</a></code>
</p>

<hr>
<h2 id='talk-class'>
S4: Present Talk Classes
</h2><span id='topic+talk-class'></span><span id='topic+section-class'></span><span id='topic+text-class'></span><span id='topic+file-class'></span><span id='topic+code-class'></span><span id='topic+break-class'></span>

<h3>Description</h3>

<p>The function <code>presentTalk</code> is a tool that facilitates lectures and workshops in R.
It allows the presenter to show code snippets alongside their 
execution, making use of R's graphical capabilities. 
</p>
<p>For <code>presentTalk</code> to work, six S4 class objects are created:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>talk</code>    </td><td style="text-align: left;"> root element that constitutes a talk; </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>section</code> </td><td style="text-align: left;"> branch element that defines a section within a talk; </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>text</code>    </td><td style="text-align: left;"> leaf element that specifies text to be printed on the R console; </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>file</code>    </td><td style="text-align: left;"> leaf element that specifies files to be opened by the OS; </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>code</code>    </td><td style="text-align: left;"> leaf element that specifies R code to be executed; </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>break</code>   </td><td style="text-align: left;"> leaf element that specifies where to allow a break in the talk.
  </td>
</tr>

</table>

<p>The leaf elements, also termed <em>primitive</em> elements, occur in isolation and cannot
contain other elements. Therefore, only two levels of nesting are supported: sections 
within a talk and primitives within a section. <br />
See Appendix B in the <span class="pkg">PBSmodelling</span> User's Guide for more information.
</p>


<h3>Details</h3>

<p>This function uses a convenience function called <code>xmlGetAttr</code>
(from the package <span class="pkg">XML</span>) that retrieves the value of a named attribute in an XML node.
</p>
<p>The function <code>presentTalk</code> translates the XML code into a list structure 
called <code>.presentTalk</code> below the global object <code>.PBSmod</code>. The GUI is 
represented as a list structure called <code>presentwin</code> under <code>.PBSmod</code>, 
as for all GUI objects in <span class="pkg">PBSmodelling</span>.
</p>


<h3>Slots Available</h3>


<table>
<tr>
 <td style="text-align: left;">
    <b>talk</b> </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>name</code>       </td><td style="text-align: left;"> <code>character</code> </td><td style="text-align: left;"> string giving the name of the talk (required) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>sections</code>   </td><td style="text-align: left;"> <code>list</code>      </td><td style="text-align: left;"> list of sections within the talk </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>files</code>      </td><td style="text-align: left;"> <code>list</code>      </td><td style="text-align: left;"> list of files within the talk </td>
</tr>
<tr>
 <td style="text-align: left;">
    <b>section</b>    </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>name</code>       </td><td style="text-align: left;"> <code>character</code> </td><td style="text-align: left;"> string giving the name of the section (required) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>items</code>      </td><td style="text-align: left;"> <code>list</code>      </td><td style="text-align: left;"> list of the four primitive (leaf-element) S4 classes </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>button</code>     </td><td style="text-align: left;"> <code>logical</code>   </td><td style="text-align: left;"> should GUI have a button that selects section? </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>col</code>        </td><td style="text-align: left;"> <code>integer</code>   </td><td style="text-align: left;"> column in lower section of GUI to place button </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>section_id</code> </td><td style="text-align: left;"> <code>integer</code>   </td><td style="text-align: left;"> specify if section does not immediately follow a talk </td>
</tr>
<tr>
 <td style="text-align: left;">
    <b>text</b>       </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>text</code>       </td><td style="text-align: left;"> <code>character</code> </td><td style="text-align: left;"> text to display on the R console </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>"break"</code>    </td><td style="text-align: left;"> <code>logical</code>   </td><td style="text-align: left;"> break the presentation after displaying the text specified? </td>
</tr>
<tr>
 <td style="text-align: left;">
    <b>file</b>       </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>name</code>       </td><td style="text-align: left;"> <code>character</code> </td><td style="text-align: left;"> string giving the name in the GUI for a group of files to open (required) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>filename</code>   </td><td style="text-align: left;"> <code>character</code> </td><td style="text-align: left;"> individual file names associated with the group name in the GUI </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>"break"</code>    </td><td style="text-align: left;"> <code>logical</code>   </td><td style="text-align: left;"> break the presentation after opening the group of files? </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>button</code>     </td><td style="text-align: left;"> <code>logical</code>   </td><td style="text-align: left;"> should GUI add a button that opens this group of files? </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>col</code>        </td><td style="text-align: left;"> <code>integer</code>   </td><td style="text-align: left;"> column in lower section of GUI to place button </td>
</tr>
<tr>
 <td style="text-align: left;">
    <b>code</b>       </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>show</code>       </td><td style="text-align: left;"> <code>logical</code>   </td><td style="text-align: left;"> show the code snippet in the R console? </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>print</code>      </td><td style="text-align: left;"> <code>logical</code>   </td><td style="text-align: left;"> print the results of running the R code? </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>code</code>       </td><td style="text-align: left;"> <code>character</code> </td><td style="text-align: left;"> the actual chunk of R code </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>"break"</code>    </td><td style="text-align: left;"> <code>character</code> </td><td style="text-align: left;"> string describing where to introduce breaks in the code segment </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>eval</code>       </td><td style="text-align: left;"> <code>logical</code>   </td><td style="text-align: left;"> evaluate the R code? </td>
</tr>
<tr>
 <td style="text-align: left;">
    <b>break</b>      </td><td style="text-align: left;"> </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>.xData</code>     </td><td style="text-align: left;"> <code>NULL</code>      </td><td style="text-align: left;"> allows a break in the talk for user interaction on the R console.
  </td>
</tr>

</table>



<h3>Creating S4 Objects</h3>

<p>Objects can be created by calls of the form:
</p>
<pre>
new("talk", name=name)
new("section",
  name     = node$attributes["name"],
  button   = as.logical(xmlGetAttr(node,"button",FALSE)),
  col      = as.integer(xmlGetAttr(node,"col",2)))
new("text", 
  text     = xmlValue(node),
  "break"  = as.logical(xmlGetAttr(node,"break",TRUE)))
new("file",
  name     = xmlGetAttr(node,"name",""), 
  "break"  = as.logical(xmlGetAttr(node,"break",TRUE)),
  filename = xmlValue(node),
  button   = as.logical(xmlGetAttr(node,"button",FALSE)),
  col      = as.integer(xmlGetAttr(node,"col",3)))
new("code",
  show     = as.logical(xmlGetAttr(node,"show",TRUE)), 
  print    = as.logical(xmlGetAttr(node,"print",TRUE)), 
  code     = xmlValue(node), 
  "break"  = tolower(xmlGetAttr(node,"break","print")))
new("break") </pre>


<h3>Author(s)</h3>

<p><a href="mailto:alex@mofo.ca">Alex Couture-Beil</a>, Software Engineer<br />
Earthly Technologies, Victoria BC<br />
</p>
<p>Maintainer: <a href="mailto:rowan.haigh@dfo-mpo.gc.ca">Rowan Haigh</a>, Program Head &ndash; Offshore Rockfish<br />
Pacific Biological Station (PBS), Fisheries &amp; Oceans Canada (DFO), Nanaimo BC<br />
<em>locus opus</em>: Offsite, Vancouver BC<br />
Last modified <code>Rd: 2023-10-18</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+presentTalk">presentTalk</a></code> for presenting a talk in R.
</p>
<p><code><a href="XML.html#topic+xmlGetAttr">xmlGetAttr</a></code> for retrieving the value of a named attribute in an XML node.
</p>
<p><code><a href="methods.html#topic+setClass">setClass</a></code> for creating a class definition.
</p>
<p><code><a href="#topic+PBSoptions-class">PBSoptions-class</a></code> for a complicated S4 class implementation.
</p>

<hr>
<h2 id='testAlpha'> Test Various Alpha Transparency Values </h2><span id='topic+testAlpha'></span>

<h3>Description</h3>

<p>Display how the alpha transparency for <code>rgb()</code> varies. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>testAlpha(alpha=seq(0,1,len=25), fg="blue", bg="yellow",
      border="black", grid=FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="testAlpha_+3A_alpha">alpha</code></td>
<td>
<p><code>numeric</code> &ndash; vector of alpha transparency values values from 0 to 1. </p>
</td></tr>
<tr><td><code id="testAlpha_+3A_fg">fg</code></td>
<td>
<p><code>character</code> &ndash; foreground colour of the top shape that varies in transparency. </p>
</td></tr>
<tr><td><code id="testAlpha_+3A_bg">bg</code></td>
<td>
<p><code>character</code> &ndash; background colour (remains constant) of the underlying shape. </p>
</td></tr>
<tr><td><code id="testAlpha_+3A_border">border</code></td>
<td>
<p><code>character</code> &ndash; border colour (which also changes in transparency) of the foreground polygon. </p>
</td></tr>
<tr><td><code id="testAlpha_+3A_grid">grid</code></td>
<td>
<p><code>logical</code> &ndash; if <code>TRUE</code>, lay a grey grid on the background colour. </p>
</td></tr>
<tr><td><code id="testAlpha_+3A_...">...</code></td>
<td>
<p><code>dots</code> &ndash; additional graphical arguments to send to the the ploting functions. </p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns the compound RGB matrix for <code>fg</code>, <code>alpha</code>, 
<code>bg</code>, and <code>border</code>.
</p>


<h3>Author(s)</h3>

<p><a href="mailto:schnutej@shaw.ca">Jon T. Schnute</a>, Research Scientist Emeritus<br />
Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC<br />
</p>
<p>Maintainer: <a href="mailto:rowan.haigh@dfo-mpo.gc.ca">Rowan Haigh</a>, Program Head &ndash; Offshore Rockfish<br />
Pacific Biological Station (PBS), Fisheries &amp; Oceans Canada (DFO), Nanaimo BC<br />
<em>locus opus</em>: Offsite, Vancouver BC<br />
Last modified <code>Rd: 2023-10-18</code>
</p>


<h3>See Also</h3>

<p>In package <span class="pkg">PBSmodelling</span>:<br />
<code><a href="#topic+testCol">testCol</a></code>,
<code><a href="#topic+testLty">testLty</a></code>,
<code><a href="#topic+testLwd">testLwd</a></code><br />
In package <span class="pkg">PBStools</span>:<br />
<code>testPch</code>
</p>

<hr>
<h2 id='testCol'>
Display Colours Available Using a Set of Strings
</h2><span id='topic+testCol'></span>

<h3>Description</h3>

<p>Display colours as round patches in a plot. Useful for programming purposes. 
Colours can be specified in any of 3 different ways: <br />
(i) by colour name, <br />
(ii) by hexadecimal colour code created by <code>rgb()</code>, or <br />
(iii) by calling one of the colour palettes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>testCol(cnam=colors()[sample(length(colors()),15)])
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="testCol_+3A_cnam">cnam</code></td>
<td>
<p><code>character</code> &ndash; vector of colour names to display. Defaults to 15 random names 
from the <code>color</code> palette to use as patterns.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p><a href="mailto:rowan.haigh@dfo-mpo.gc.ca">Rowan Haigh</a>, Program Head &ndash; Offshore Rockfish<br />
Pacific Biological Station (PBS), Fisheries &amp; Oceans Canada (DFO), Nanaimo BC<br />
<em>locus opus</em>: Offsite, Vancouver BC<br />
Last modified <code>Rd: 2023-10-18</code>
</p>


<h3>See Also</h3>

<p>In package <span class="pkg">PBSmodelling</span>:<br />
<code><a href="#topic+pickCol">pickCol</a></code>,
<code><a href="#topic+testAlpha">testAlpha</a></code><br />
In package <span class="pkg">PBStools</span>:<br />
<code>testPch</code><br />
In package <span class="pkg">grDevices</span>:<br />
<code><a href="grDevices.html#topic+palettes">palettes</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  # mix and match patterns
  testCol(c("sky","fire","sea","wood"))
})
local(envir=.PBSmodEnv,expr={
  # display transparencies of blue
  testCol(rgb(0,0,1,seq(0.05,1,0.05)))
})
local(envir=.PBSmodEnv,expr={
  # display colours of the rainbow
  testCol(rainbow(64,end=0.75))
})
local(envir=.PBSmodEnv,expr={
  # display basic palette colours
  testCol(1:length(palette()))
})
local(envir=.PBSmodEnv,expr={
  # mix colour types
  testCol(c("#9e7ad3", "purple", 6))
})
</code></pre>

<hr>
<h2 id='testLty'>Display Line Types Available</h2><span id='topic+testLty'></span>

<h3>Description</h3>

<p>Display line types available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>testLty(newframe=TRUE, n=1:18, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="testLty_+3A_newframe">newframe</code></td>
<td>
<p><code>logical</code> &ndash; if <code>TRUE</code>, create a new blank frame, otherwise overlay current frame.</p>
</td></tr>
<tr><td><code id="testLty_+3A_n">n</code></td>
<td>
<p><code>numeric</code> &ndash; vector of line type numbers.</p>
</td></tr>
<tr><td><code id="testLty_+3A_...">...</code></td>
<td>
<p><code>dots</code> &ndash; additional arguments for function <code>lines</code>.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>Quick representation of line types for reference purposes.
</p>


<h3>Author(s)</h3>

<p><a href="mailto:rowan.haigh@dfo-mpo.gc.ca">Rowan Haigh</a>, Program Head &ndash; Offshore Rockfish<br />
Pacific Biological Station (PBS), Fisheries &amp; Oceans Canada (DFO), Nanaimo BC<br />
<em>locus opus</em>: Offsite, Vancouver BC<br />
Last modified <code>Rd: 2023-10-18</code>
</p>


<h3>See Also</h3>

<p>In package <span class="pkg">PBSmodelling</span>:<br />
<code><a href="#topic+testLwd">testLwd</a></code>,
<code><a href="#topic+testCol">testCol</a></code><br />
In package <span class="pkg">PBStools</span>:<br />
<code>testPch</code> 
</p>

<hr>
<h2 id='testLwd'>Display Line Widths</h2><span id='topic+testLwd'></span>

<h3>Description</h3>

<p>Display line widths. User can specify particular ranges for <code>lwd</code>. 
Colours can also be specified and are internally repeated as necessary.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>testLwd(lwd=1:20, col=c("black","blue"), newframe=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="testLwd_+3A_lwd">lwd</code></td>
<td>
<p>line widths to display. Ranges can be specified.</p>
</td></tr>
<tr><td><code id="testLwd_+3A_col">col</code></td>
<td>
<p>colours to use for lines. Patterns are repeated if 
<code>length(lwd) &gt; length(col)</code></p>
</td></tr></table>
<p>.
</p>
<table>
<tr><td><code id="testLwd_+3A_newframe">newframe</code></td>
<td>
<p>if <code>TRUE</code>, create a new blank frame, otherwise overlay current frame.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  testLwd(3:15,col=c("salmon","aquamarine","gold"))
})
</code></pre>

<hr>
<h2 id='testWidgets'>Display Sample GUIs and their Source Code</h2><span id='topic+testWidgets'></span><span id='topic+widgets'></span>

<h3>Description</h3>

<p>Display an interactive GUI to demonstrate the available widgets in PBS Modelling.
A <code>text</code> window displays the <em>window description file</em> source code. The user
can modify this sample code and recreate the test GUI by pressing the button below.
</p>
<p>The <em>Window Description Files</em> can be found in the R directory <br />
<code>.../library/PBSmodelling/testWidgets</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>testWidgets()</code></pre>


<h3>Details</h3>

<p>Following are the widgets and default values supported by PBS Modelling.
For detailed descriptions, see Appendix A in &lsquo;PBSModelling-UG.pdf&rsquo; 
located in the R directory <code>.../library/PBSmodelling/doc</code>.
</p>
<pre>
button text="Calculate" font="" fg="black" bg="" disablefg=NULL 
   width=0 name=NULL function="" action="button" sticky="" 
   padx=0 pady=0

check name mode="logical" checked=FALSE text="" font="" fg="black" 
   bg="" disablefg=NULL function="" action="check" edit=TRUE 
   sticky="" padx=0 pady=0

data nrow ncol names modes="numeric" rowlabels="" collabels="" 
   rownames="X" colnames="Y" font="" fg="black" bg="" entryfont="" 
   entryfg="black" entrybg="white" noeditfg="black" noeditbg="gray" 
   values="" byrow=TRUE function="" enter=TRUE action="data" 
   edit=TRUE width=6 borderwidth=0 sticky="" padx=0 pady=0

droplist name values=NULL choices=NULL labels=NULL selected=1 
   add=FALSE font="" fg="black" bg="white" function="" enter=TRUE 
   action="droplist" edit=TRUE mode="character" width=20 
   sticky="" padx=0 pady=0

entry name value="" width=20 label=NULL font="" fg="" bg="" 
   entryfont="" entryfg="black" entrybg="white" noeditfg="black" 
   noeditbg="gray" edit=TRUE password=FALSE function="" enter=TRUE 
   action="entry" mode="numeric" sticky="" padx=0 pady=0

grid nrow=1 ncol=1 toptitle="" sidetitle="" topfont="" sidefont="" 
   topfg=NULL sidefg=NULL fg="black" topbg=NULL sidebg=NULL bg="" 
   byrow=TRUE borderwidth=1 relief="flat" sticky="" padx=0 pady=0

history name="default" function="" import="" fg="black" bg="" 
   entryfg="black" entrybg="white" text=NULL textsize=0 sticky="" 
   padx=0 pady=0

image file=NULL varname=NULL subsample=NULL sticky="" padx=0 pady=0

include file=NULL name=NULL

label text="" name="" mode="character" font="" fg="black" bg="" 
   sticky="" justify="left" anchor="center" wraplength=0 width=0 
   padx=0 pady=0

matrix nrow ncol names rowlabels="" collabels="" rownames="" 
   colnames="" font="" fg="black" bg="" entryfont="" entryfg="black" 
   entrybg="white" noeditfg="black" noeditbg="gray" values="" 
   byrow=TRUE function="" enter=TRUE action="matrix" edit=TRUE 
   mode="numeric" width=6 borderwidth=0 sticky="" padx=0 pady=0

menu nitems=1 label font="" fg="" bg=""

menuitem label font="" fg="" bg="" function action="menuitem"

notebook tabs name=NULL selected=1 tabpos="top" font="" fg=NULL 
   bg=NULL width=0 height=0 homogeneous=FALSE arcradius=2 
   tabbevelsize=0 function=NULL action="notebook" sticky="we" 
   padx=0 pady=0

null bg="" padx=0 pady=0

object name rowshow=0 font="" fg="black" bg="" entryfont="" 
   entryfg="black" entrybg="white" noeditfg="black" noeditbg="gray" 
   vertical=FALSE collabels=TRUE rowlabels=TRUE function="" 
   enter=TRUE action="data" edit=TRUE width=6 borderwidth=0 
   sticky="" padx=0 pady=0

progressbar name value=0 maximum=100 style="normal" width=NULL 
   height=NULL vertical=FALSE fg=NULL bg=NULL relief="sunken" 
   borderwidth=2 sticky="" padx=0 pady=0

radio name value text="" font="" fg="black" bg="" function="" 
   action="radio" edit=TRUE mode="numeric" selected=FALSE 
   sticky="" padx=0 pady=0

slide name from=0 to=100 value=NA showvalue=FALSE 
   orientation="horizontal" font="" fg="black" bg="" function="" 
   action="slide" sticky="" padx=0 pady=0

slideplus name from=0 to=1 by=0.01 value=NA font="" fg="black" 
   bg="" entryfont="" entryfg="black" entrybg="white" function="" 
   enter=FALSE action="slideplus" sticky="" padx=0 pady=0

spinbox name from to by=1 value=NA label="" font="" fg="black" 
   bg="" entryfont="" entryfg="black" entrybg="white" function="" 
   enter=TRUE edit=TRUE action="droplist" width=20 sticky="" 
   padx=0 pady=0

table name rowshow=0 font="" fg="black" bg="white" rowlabels="" 
   collabels="" function="" action="table" edit=TRUE width=10 
   sticky="" padx=0 pady=0

text name height=8 width=30 edit=FALSE scrollbar=TRUE fg="black" 
   bg="white" mode="character" font="" value="" borderwidth=1 
   relief="sunken" sticky="" padx=0 pady=0

vector names length=0 labels="" values="" vecnames="" font="" 
   fg="black" bg="" entryfont="" entryfg="black" entrybg="white" 
   noeditfg="black" noeditbg="gray" vertical=FALSE function="" 
   enter=TRUE action="vector" edit=TRUE mode="numeric" width=6 
   borderwidth=0 sticky="" padx=0 pady=0

window name="window" title="" vertical=TRUE bg="#D4D0C8" 
   fg="#000000" onclose="" remove=FALSE
</pre>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+createWin">createWin</a></code>, <code><a href="#topic+showArgs">showArgs</a></code>
</p>

<hr>
<h2 id='tget'>
Get/Put Objects From/To Temporary Work Environment
</h2><span id='topic+tget'></span><span id='topic+tcall'></span><span id='topic+tprint'></span><span id='topic+tput'></span>

<h3>Description</h3>

<p>Get/print objects from or put objects into a temporary work environment
called <code>.PBSmodEnv</code>. These objects include <code>.PBSmod</code>,
which controls the GUI system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tget(x, penv=NULL, tenv=.PBSmodEnv)
tcall(x, penv=NULL, tenv=.PBSmodEnv)
tprint(x, penv=NULL, tenv=.PBSmodEnv)
tput(x, penv=NULL, tenv=.PBSmodEnv)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tget_+3A_x">x</code></td>
<td>
<p><code>character|object</code> &ndash; name (with or without quotes) of
an object to retrieve or store in the temporary environment.</p>
</td></tr>
<tr><td><code id="tget_+3A_penv">penv</code></td>
<td>
<p><code>environment</code> &ndash; parent environment, defaults to
<code>parent.frame()</code> called from within the function.</p>
</td></tr>
<tr><td><code id="tget_+3A_tenv">tenv</code></td>
<td>
<p><code>environment</code> &ndash; temporary working environment, 
defaults to <code>.PBSmodEnv</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These accessor functions were developed as a response to the CRAN
repository policy statement: &ldquo;Packages should not modify the
global environment (user's workspace).&rdquo;
</p>
<p>There are also wrapper functions called <code>.win.tget</code>, 
<code>.win.tcall</code>, and <code>.win.tprint</code> that can be used in 
<em>window description files</em> to launch functions or print objects
from the <code>.PBSmodEnv</code> workspace. 
The wrapper uses <code>getWinAct</code> to get the function (or object) 
name that a user specifies in the <code>action</code> argument of a 
widget command.
</p>


<h3>Value</h3>

<p>Objects are retrieved from or sent to the temporary working 
environment to/from the place where the function(s) are called.
Additionally, <code>tcall</code> invisibly returns the object without 
transferring, which is useful when the object is a function that the
user may wish to call, for example, <code>tcall(myfunc)()</code>.
</p>


<h3>Note</h3>

<p>Additional wrapper functions to access functions in <code>.PBSmodEnv</code>
are named with the prefix <code>.win</code>.
</p>


<h3>Author(s)</h3>

<p><a href="mailto:rowan.haigh@dfo-mpo.gc.ca">Rowan Haigh</a>, Program Head &ndash; Offshore Rockfish<br />
Pacific Biological Station (PBS), Fisheries &amp; Oceans Canada (DFO), Nanaimo BC<br />
<em>locus opus</em>: Offsite, Vancouver BC<br />
Last modified <code>Rd: 2023-10-25</code>
</p>


<h3>References</h3>

<p><a href="https://cran.r-project.org/web/packages/policies.html">CRAN Repository Policy</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  str(tcall(.PBSmod),2)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='unpackList'>Unpack List Elements into Variables</h2><span id='topic+unpackList'></span>

<h3>Description</h3>

<p>Make local or global variables (depending on the scope specified) from 
the named components of a list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unpackList(x, scope="L")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unpackList_+3A_x">x</code></td>
<td>
<p>named list to unpack.</p>
</td></tr>
<tr><td><code id="unpackList_+3A_scope">scope</code></td>
<td>
<p>If <code>"L"</code>, create variables local to the parent
frame that called the function. If <code>"P"</code>, create variables
in the temporary package workspace called <code>.PBSmodEnv</code>. 
If <code>"G"</code>, create global variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of unpacked variable names.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+packList">packList</a></code>, <code><a href="#topic+readList">readList</a></code>, <code><a href="#topic+writeList">writeList</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>local(envir=.PBSmodEnv,expr={
  x &lt;- list(a=21,b=23);
  unpackList(x);
  print(a);
})
</code></pre>

<hr>
<h2 id='updateGUI'>
Update Active GUI With Local Values
</h2><span id='topic+updateGUI'></span>

<h3>Description</h3>

<p>Update the currently active GUI with values from R's memory at the specified location.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>updateGUI(scope = "L")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="updateGUI_+3A_scope">scope</code></td>
<td>
<p>either <code>"L"</code> for the parent frame, <code>"P"</code> for
the temporary work environment <code>.PBSmodEnv</code>, <code>"G"</code> for
the global environment, or an explicit R environment.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the characteristics of the local R objects do not match those of the GUI objects,
the update will fail.
</p>


<h3>Value</h3>

<p>Invisibly returns a Boolean vector that specifies whether the objects in the local R
environment match items in the active GUI.
</p>


<h3>Author(s)</h3>

<p>Rob Kronlund, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getWinVal">getWinVal</a></code>, <code><a href="#topic+setWinVal">setWinVal</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  #law of free food: http://www.phdcomics.com/comics.php?f=1223
  createWin( c( 
    "vector names=\"foodquality hunger cost\" values=\"0.6 0.8 0.1\" width=10",
    "entry name=taste edit=F label=taste:" ), astext=TRUE )
  getWinVal( scope="P" )
  taste &lt;- foodquality * hunger / cost
  updateGUI()
})

## End(Not run)
</code></pre>

<hr>
<h2 id='vbdata'>Data: Lengths-at-Age for von Bertalanffy Curve</h2><span id='topic+vbdata'></span>

<h3>Description</h3>

<p>Lengths-at-age for freshwater mussels (<em>Anodonta kennerlyi</em>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(vbdata)</code></pre>


<h3>Format</h3>

<p>A data frame with 16 rows and 2 columns <code>c("age","len")</code>.
</p>


<h3>Details</h3>

<p>Data for demonstration of the von Bertalanffy model used in the 
<code><a href="#topic+calcMin">calcMin</a></code> example.
</p>


<h3>Source</h3>

<p>Fisheries and Oceans Canada - Mittertreiner and Schnute (1985)
</p>


<h3>References</h3>

<p>Mittertreiner, A. and Schnute, J. (1985) Simplex: a manual and software package 
for easy nonlinear parameter estimation and interpretation in fishery research. 
<em>Canadian Technical Report of Fisheries and Aquatic Sciences</em> <b>1384</b>, xi + 90 pp. 
</p>

<hr>
<h2 id='vbpars'>Data: Initial Parameters for a von Bertalanffy Curve</h2><span id='topic+vbpars'></span>

<h3>Description</h3>

<p>Starting parameter values for <code>Linf</code>, <code>K</code>, and <code>t0</code> for 
von Bertalanffy minimization using length-at-age data (<code><a href="#topic+vbdata">vbdata</a></code>) 
for freshwater mussels (<em>Anodonta kennerlyi</em>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(vbpars)</code></pre>


<h3>Format</h3>

<p>A matrix with 3 rows and 3 columns <code>c("Linf","K","t0")</code>. Each row contains 
the starting values, minima, and maxima, respectively, for the three parameters.
</p>


<h3>Details</h3>

<p>Data for demonstration of the von Bertalanffy model used in 
the <code><a href="#topic+calcMin">calcMin</a></code> example.
</p>


<h3>References</h3>

<p>Mittertreiner, A. and Schnute, J. (1985) Simplex: a manual and software package 
for easy nonlinear parameter estimation and interpretation in fishery research. 
<em>Canadian Technical Report of Fisheries and Aquatic Sciences</em> <b>1384</b>, xi + 90 pp. 
</p>

<hr>
<h2 id='view'>View First/Last/Random n Elements/Rows of an Object</h2><span id='topic+view'></span>

<h3>Description</h3>

<p>View the first or last or random <code>n</code> elements or rows of an object. 
Components of lists will be subset using iterative calls to <code>view</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>view(obj, n=5, last=FALSE, random=FALSE, print.console=TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="view_+3A_obj">obj</code></td>
<td>
<p><code>object</code> &ndash; an R object to view.</p>
</td></tr>
<tr><td><code id="view_+3A_n">n</code></td>
<td>
<p><code>numeric</code> &ndash; first (default)/last/random <code>n</code> elements/rows of <code>obj</code> to view.</p>
</td></tr>
<tr><td><code id="view_+3A_last">last</code></td>
<td>
<p><code>logical</code> &ndash; if <code>TRUE</code>, last <code>n</code> elements/rows of <code>obj</code> are displayed.</p>
</td></tr>
<tr><td><code id="view_+3A_random">random</code></td>
<td>
<p><code>logical</code> &ndash; if <code>TRUE</code>, <code>n</code> random elements/rows 
(without replacement) of <code>obj</code> are displayed.</p>
</td></tr>
<tr><td><code id="view_+3A_print.console">print.console</code></td>
<td>
<p><code>logical</code> &ndash; if <code>TRUE</code>, print the results to the console (default).<br />
The results are also returned invisibly should the user wish to assign the output to an object.</p>
</td></tr>
<tr><td><code id="view_+3A_...">...</code></td>
<td>
<p><code>dots</code> &ndash; additional arguments (e.g., <code>replace=TRUE</code> if specifying <code>random=TRUE</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns the results of the call to <code>view</code>.
</p>


<h3>Note</h3>

<p>If <code>random=TRUE</code>, random sampling will take place before the <code>last</code> operator is applied.
</p>


<h3>Author(s)</h3>

<p><a href="mailto:rowan.haigh@dfo-mpo.gc.ca">Rowan Haigh</a>, Program Head &ndash; Offshore Rockfish<br />
Pacific Biological Station (PBS), Fisheries &amp; Oceans Canada (DFO), Nanaimo BC<br />
<em>locus opus</em>: Institute of Ocean Sciences (IOS), Sidney BC<br />
Last modified <code>Rd: 2019-03-12</code>
</p>


<h3>See Also</h3>

<p>In package <span class="pkg">PBSmodelling</span>:<br />
<code><a href="#topic+lisp">lisp</a></code>,
<code><a href="#topic+showArgs">showArgs</a></code>,
<code><a href="#topic+testCol">testCol</a></code>,
<code><a href="#topic+viewCode">viewCode</a></code><br />
In package <span class="pkg">utils</span>:<br />
<code><a href="utils.html#topic+head">head</a></code>, <code>tail</code>
</p>

<hr>
<h2 id='viewCode'> View Package R Code </h2><span id='topic+viewCode'></span>

<h3>Description</h3>

<p>View the R code of all functions in a specified package 
installed on the user's system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>viewCode(pkg="PBSmodelling", funs, output=4, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="viewCode_+3A_pkg">pkg</code></td>
<td>
<p> string name of a package installed on the user's computer. </p>
</td></tr>
<tr><td><code id="viewCode_+3A_funs">funs</code></td>
<td>
<p> string vector of explicit function names from <code>pkg</code> to view. </p>
</td></tr>
<tr><td><code id="viewCode_+3A_output">output</code></td>
<td>
<p> numeric value: 1 = function names only, 2 = function names with brief description,
3 = functions and their arguments, and 4 = function R-code (default). </p>
</td></tr>
<tr><td><code id="viewCode_+3A_...">...</code></td>
<td>
<p>allows user to specify two additional arguments for <code>output=2</code>: <br />
<code>remote</code> - character string giving a valid URL for the <code>R_HOME</code>
directory on a remote location; <br />
<code>update</code> - logical: if <code>TRUE</code>, attempt to update the package
index to reflect the currently available packages. 
(Not attempted if <code>remote</code> is non-<code>NULL</code>.) <br /> <br />
Also, if user specifies <code>pat=TRUE</code>, then <code>funs</code>, if specified,
are treated like patterns. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>funs</code> is not specified, then all functions, including
hidden (dot) functions are displayed. <br />
If the package has a namespace, functions there are also displayed.
</p>


<h3>Value</h3>

<p>Invisibly returns source code of all functions in the specified package.
The function invokes <code>openFile</code> to display the results.
</p>


<h3>Note</h3>

<p>Output type 2 (function name with brief description) will now only work in
R (&gt;=3.2.0) or from SVN revision &gt;= 67548.
The CRAN gurus now disallow direct calls to <code>tools:::httpdPort</code>.
</p>


<h3>Author(s)</h3>

<p>Rowan Haigh, Pacific Biological Station, Fisheries and Oceans Canada, Nanaimo BC
</p>


<h3>See Also</h3>

 
<p><code><a href="#topic+showHelp">showHelp</a></code>, <code><a href="#topic+view">view</a></code>
</p>

<hr>
<h2 id='writeList'>Write a List to a File in PBS Modelling Format</h2><span id='topic+writeList'></span>

<h3>Description</h3>

<p>Write an ASCII text representation in either <code>"D"</code> format or <code>"P"</code> format. 
The <code>"D"</code> format makes use of <code>dput</code> and <code>dget</code> and produces an R 
representation of the list. The <code>"P"</code> format represents a simple list in an 
easy-to-read, ad hoc <code>PBSmodelling</code> format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>writeList(x, fname, format="D", comments="")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="writeList_+3A_x">x</code></td>
<td>
<p>R list object to write to an ASCII text file.</p>
</td></tr>
<tr><td><code id="writeList_+3A_fname">fname</code></td>
<td>
<p>file name of the text file to create.</p>
</td></tr>
<tr><td><code id="writeList_+3A_format">format</code></td>
<td>
<p>format of the file to create: <code>"D"</code> or <code>"P"</code>.</p>
</td></tr>
<tr><td><code id="writeList_+3A_comments">comments</code></td>
<td>
<p>vector of character strings to use as initial-line comments in the file.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>The D Format</h4>

<p>The <code>"D"</code> format is equivalent to using R's <code>base</code> functions 
<code>dput</code> and <code>dget</code>, which support all R objects.
</p>



<h4>The P Format</h4>

    
<p>The <code>"P"</code> format only supports a list that may contain lists,
vectors, matrices, arrays, and data frames.  Scalars are treated
like vectors. It writes each list element using the following
conventions:
</p>

<ol>
<li> <p><code>$</code> denotes the start of a list element, and the element's
name follows this character; for nested lists, <code>$</code> separates
each nesting level;
</p>
</li>
<li> <p><code>$$</code>, on the next line, denotes a line used to describe
the element's structure, which includes object type, mode(s), names
(if vector), rownames (if matrix or data), and colnames (if matrix
or data); and
</p>
</li>
<li><p> subsequent lines contain data (one line for a vector and
multiple lines for a matrix or other data).
</p>
</li></ol>

<p>If a list's elements are unnamed, have the name NA, or have the
empty string as a name, this function generates names (<code>"P"</code>
format only). If two list elements share the same name, the list
will export correctly, but it will import incorrectly.
</p>
<p>Arrays with three or more dimensions have <code>dim</code> and
<code>dimnames</code> arguments. <code>dim</code> describes the dimension of the
data (a vector as returned by <code>dim(some_array)</code>) and
<code>dimnames</code> is a vector of length <code>sum(dim(some_array)+1)</code>
and is constructed as follows:
</p>
<p><code>
      foreach dimension d,
        first append the name of the dimension d and
        then append all labels within that dimension
    </code>
</p>
<p>Multiple rows of data for matrices or data frames must have equal 
numbers of entries (separated by whitespace).
</p>
<p>Note that array data are written the same format as they are
displayed in the R console: <br />
<code>nrow=dim()[1]</code>, <code>ncol=dim()[2]</code> <br />
repeated by scrolling through successively higher dimensions, increasing the 
index from left to right within each dimension. The flattened table will have 
<code>dim()[2]</code> columns.
</p>

<p>For complete details, see &ldquo;PBSmodelling-UG.pdf&rdquo; at the location
described when loading this package.
</p>


<h3>Value</h3>

<p>String containing the file name.
</p>


<h3>Author(s)</h3>

<p>Alex Couture-Beil, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+packList">packList</a></code>, <code><a href="#topic+readList">readList</a></code>, <code><a href="#topic+unpackList">unpackList</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
local(envir=.PBSmodEnv,expr={
  cwd = getwd(); setwd(tempdir())
  test &lt;- list(a=10,b=euro,c=view(WorldPhones),d=view(USArrests))
  writeList(test,"test.txt",format="P",
    comments=" Scalar, Vector, Matrix, Data Frame")
  openFile("test.txt")
  setwd(cwd)
})
local(envir=.PBSmodEnv,expr={
  cwd = getwd(); setwd(tempdir())
  ##Example of dimnames for Arrays
  dimnames(Titanic)
  writeList( list( Titanic ), format="P")
  setwd(cwd)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='writePBSoptions'>Write PBS Options to an External File</h2><span id='topic+writePBSoptions'></span>

<h3>Description</h3>

<p>Save options that were set using <code>setPBSoptions</code>,
<code>setPBSext</code>, or interfaces such as <code>loadC</code>.  
These options can be reloaded using <code>readPBSoptions</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>writePBSoptions(fname="PBSoptions.txt")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="writePBSoptions_+3A_fname">fname</code></td>
<td>
<p>file name or full path of file to which the options will be saved.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>Options with names starting with <code>"."</code> will not be saved.
</p>


<h3>Author(s)</h3>

<p>Anisa Egeli, Vancouver Island University, Nanaimo BC
</p>


<h3>See Also</h3>

<p><code><a href="#topic+readPBSoptions">readPBSoptions</a></code>, <code><a href="#topic+setPBSoptions">setPBSoptions</a></code>,
<code><a href="#topic+setPBSext">setPBSext</a></code>, <code><a href="#topic+promptWriteOptions">promptWriteOptions</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
