<!DOCTYPE html><html lang="en"><head><title>Help for package mousetrap</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mousetrap}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#mousetrap-package'><p>Process and analyze mouse-tracking data</p></a></li>
<li><a href='#bezier'><p>Create Bezier-curves using the Bernstein approximation.</p></a></li>
<li><a href='#bimodality_coefficient'><p>Calculate bimodality coefficient.</p></a></li>
<li><a href='#KH2017'><p>Mouse-tracking dataset from Kieslich &amp; Henninger (2017)</p></a></li>
<li><a href='#KH2017_raw'><p>Raw mouse-tracking dataset from Kieslich &amp; Henninger (2017)</p></a></li>
<li><a href='#mt_add_trajectory'><p>Add new trajectory to trajectory array.</p></a></li>
<li><a href='#mt_add_variables'><p>Add new variables to trajectory array.</p></a></li>
<li><a href='#mt_aggregate'><p>Aggregate mouse-tracking data per condition.</p></a></li>
<li><a href='#mt_aggregate_per_subject'><p>Aggregate mouse-tracking data per condition separately for each subject.</p></a></li>
<li><a href='#mt_align'><p>Align trajectories.</p></a></li>
<li><a href='#mt_align_start'><p>Align start position of trajectories.</p></a></li>
<li><a href='#mt_align_start_end'><p>Align start and end position of trajectories.</p></a></li>
<li><a href='#mt_angles'><p>Calculate movement angles.</p></a></li>
<li><a href='#mt_animate'><p>Create gif trajectory animation.</p></a></li>
<li><a href='#mt_average'><p>Average trajectories across intervals.</p></a></li>
<li><a href='#mt_bind'><p>Join two trajectory arrays</p></a></li>
<li><a href='#mt_check_bimodality'><p>Assess bimodality of mouse-tracking measure distributions.</p></a></li>
<li><a href='#mt_check_resolution'><p>Check logging resolution by looking at timestamp differences.</p></a></li>
<li><a href='#mt_cluster'><p>Cluster trajectories.</p></a></li>
<li><a href='#mt_cluster_k'><p>Estimate optimal number of clusters.</p></a></li>
<li><a href='#mt_count'><p>Count number of observations.</p></a></li>
<li><a href='#mt_derivatives'><p>Calculate distance, velocity, and acceleration.</p></a></li>
<li><a href='#mt_deviations'><p>Calculate deviations from idealized trajectory.</p></a></li>
<li><a href='#mt_diffmap'><p>Creates a difference-heatmap of two trajectory heatmap images.</p></a></li>
<li><a href='#mt_distmat'><p>Compute distance matrix.</p></a></li>
<li><a href='#mt_example'><p>A mousetrap data object.</p></a></li>
<li><a href='#mt_example_raw'><p>Raw mouse-tracking dataset for demonstrations of the mousetrap package</p></a></li>
<li><a href='#mt_exclude_finish'><p>Exclude phase without mouse movement at end of trial.</p></a></li>
<li><a href='#mt_exclude_initiation'><p>Exclude initial phase without mouse movement.</p></a></li>
<li><a href='#mt_export_long'><p>Export mouse-tracking data.</p></a></li>
<li><a href='#mt_heatmap'><p>Plot trajectory heatmap.</p></a></li>
<li><a href='#mt_heatmap_ggplot'><p>Plot trajectory heatmap using ggplot.</p></a></li>
<li><a href='#mt_heatmap_raw'><p>Creates high-resolution heatmap of trajectory data.</p></a></li>
<li><a href='#mt_import_long'><p>Import mouse-tracking data saved in long format.</p></a></li>
<li><a href='#mt_import_mousetrap'><p>Import mouse-tracking data recorded using the mousetrap plug-ins in OpenSesame.</p></a></li>
<li><a href='#mt_import_wide'><p>Import mouse-tracking data saved in wide format.</p></a></li>
<li><a href='#mt_length_normalize'><p>Length normalize trajectories.</p></a></li>
<li><a href='#mt_map'><p>Map trajectories to prototypes.</p></a></li>
<li><a href='#mt_measures'><p>Calculate mouse-tracking measures.</p></a></li>
<li><a href='#mt_plot'><p>Plot trajectory data.</p></a></li>
<li><a href='#mt_plot_add_rect'><p>Add rectangles to trajectory plot.</p></a></li>
<li><a href='#mt_plot_per_trajectory'><p>Create PDF with separate plots per trajectory.</p></a></li>
<li><a href='#mt_plot_riverbed'><p>Plot density of mouse positions across time steps.</p></a></li>
<li><a href='#mt_prototypes'><p>Mouse trajectory prototypes.</p></a></li>
<li><a href='#mt_qeffect'><p>Create quantile-effect plot</p></a></li>
<li><a href='#mt_remap_symmetric'><p>Remap mouse trajectories.</p></a></li>
<li><a href='#mt_resample'><p>Resample trajectories using a constant time interval.</p></a></li>
<li><a href='#mt_reshape'><p>General-purpose reshape and aggregation function for mousetrap data.</p></a></li>
<li><a href='#mt_sample_entropy'><p>Calculate sample entropy.</p></a></li>
<li><a href='#mt_scale_trajectories'><p>Standardize variables in mouse trajectory array.</p></a></li>
<li><a href='#mt_spatialize'><p>Spatialize trajectories.</p></a></li>
<li><a href='#mt_standardize'><p>Standardize mouse-tracking measures per level of other variables.</p></a></li>
<li><a href='#mt_subset'><p>Filter mousetrap data.</p></a></li>
<li><a href='#mt_time_normalize'><p>Time normalize trajectories.</p></a></li>
<li><a href='#print.mt_heatmap_raw'><p>Generic print for class mt_heatmap_raw</p></a></li>
<li><a href='#read_mt'><p>Read MouseTracker raw data.</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#scale_within'><p>Scale and center variables within the levels of another variable.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Version:</td>
<td>3.2.3</td>
</tr>
<tr>
<td>Title:</td>
<td>Process and Analyze Mouse-Tracking Data</td>
</tr>
<tr>
<td>Description:</td>
<td>Mouse-tracking, the analysis of mouse movements in computerized
    experiments, is a method that is becoming increasingly popular in the
    cognitive sciences. The mousetrap package offers functions for importing,
    preprocessing, analyzing, aggregating, and visualizing mouse-tracking data.
    An introduction into mouse-tracking analyses using mousetrap can be found
    in Wulff, Kieslich, Henninger, Haslbeck, &amp; Schulte-Mecklenbeck (2023)
    &lt;<a href="https://doi.org/10.31234%2Fosf.io%2Fv685r">doi:10.31234/osf.io/v685r</a>&gt; (preprint: 
    <a href="https://osf.io/preprints/psyarxiv/v685r">https://osf.io/preprints/psyarxiv/v685r</a>).</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Pascal J. Kieslich &lt;pascal.kieslich@gmail.com&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://pascalkieslich.github.io/mousetrap/">https://pascalkieslich.github.io/mousetrap/</a>,
<a href="https://github.com/pascalkieslich/mousetrap">https://github.com/pascalkieslich/mousetrap</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/pascalkieslich/mousetrap/issues">https://github.com/pascalkieslich/mousetrap/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0),</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils, stats, pracma, dplyr (&ge; 0.5.0), tidyr, magrittr,
graphics, grDevices, ggplot2, scales, psych (&ge; 1.2.4), Rcpp
(&ge; 0.11.4), diptest, RColorBrewer, cstab, fastcluster,
parallel, fields, rlang, lifecycle</td>
</tr>
<tr>
<td>Suggests:</td>
<td>readbulk, testthat</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-10 12:34:56 UTC; Pascal</td>
</tr>
<tr>
<td>Author:</td>
<td>Pascal J. Kieslich
    <a href="https://orcid.org/0000-0002-0853-9364"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Dirk U. Wulff <a href="https://orcid.org/0000-0002-4008-8022"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Felix Henninger <a href="https://orcid.org/0000-0002-7730-9511"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Jonas M. B. Haslbeck [aut],
  Sarah Brockhaus [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-19 09:50:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='mousetrap-package'>Process and analyze mouse-tracking data</h2><span id='topic+mousetrap'></span><span id='topic+mousetrap-package'></span>

<h3>Description</h3>

<p>The mousetrap package provides functions for importing, preprocessing,
analyzing, aggregating, and visualizing mouse-tracking data. In the
following, a brief overview of the functions in this package is given.
</p>


<h3>Read functions</h3>

<p>Depending on the file format, one of the standard R functions for reading
files into R can be used (e.g., <a href="utils.html#topic+read.table">read.table</a> or
<a href="utils.html#topic+read.table">read.csv</a>).
</p>
<p>If raw data were collected using
<a href="http://www.mousetracker.org/">MouseTracker</a>, the mousetrap package
provides the <a href="#topic+read_mt">read_mt</a> function to read files in the &quot;.mt&quot; format.
</p>
<p>If several raw data files should be read and merged, the
<a href="readbulk.html#topic+read_bulk">read_bulk</a> function from the
<a href="http://pascalkieslich.github.io/readbulk/">readbulk</a> package can be
used (or the <a href="readbulk.html#topic+read_opensesame">read_opensesame</a> function, if data were
collected using <a href="https://osdoc.cogsci.nl/">OpenSesame</a>).
</p>


<h3>Import functions</h3>

<p>The initial step to prepare data for analysis in the mousetrap package is
to create a mousetrap data object. Depending on the input format, one of
the following functions can be used. A detailed description (and example)
of the resulting mousetrap data object can be found in <a href="#topic+mt_example">mt_example</a>.
</p>
<p><a href="#topic+mt_import_mousetrap">mt_import_mousetrap</a> imports mouse-tracking data that were recorded
using the <a href="https://github.com/pascalkieslich/mousetrap-os">mousetrap
plugin</a> for <a href="https://osdoc.cogsci.nl/">OpenSesame</a>.
</p>
<p><a href="#topic+mt_import_wide">mt_import_wide</a> imports mouse-tracking data saved in a wide format
(e.g., data collected using
<a href="http://www.mousetracker.org/">MouseTracker</a>).
</p>
<p><a href="#topic+mt_import_long">mt_import_long</a> imports mouse-tracking data saved in a long format.
(e.g., trajectories exported using <a href="#topic+mt_export_long">mt_export_long</a>).
</p>


<h3>Geometric preprocessing functions</h3>

<p>A number of functions are available that perform geometric preprocessing
operations.
</p>
<p><a href="#topic+mt_remap_symmetric">mt_remap_symmetric</a> remaps mouse trajectories to one side (or one
quadrant) of the coordinate system.
</p>
<p><a href="#topic+mt_align">mt_align</a> is a general purpose function for aligning and rescaling
trajectories. For specific operations, you can rely on one of the
following functions.
</p>
<p><a href="#topic+mt_align_start">mt_align_start</a> aligns the start position of trajectories.
</p>
<p><a href="#topic+mt_align_start_end">mt_align_start_end</a> aligns all trajectories so that they share a
common initial and final coordinate (this is also sometimes referred to as
&quot;space-normalization&quot;).
</p>


<h3>Resampling and interpolation functions</h3>

<p>A number of functions are available that perform resampling and
interpolation operations.
</p>
<p><a href="#topic+mt_exclude_initiation">mt_exclude_initiation</a>	excludes the initial phase of a trial without
mouse movement.
</p>
<p><a href="#topic+mt_exclude_finish">mt_exclude_finish</a>	excludes a potential phase without mouse movement at the end of a trial.
</p>
<p><a href="#topic+mt_time_normalize">mt_time_normalize</a>	performs time-normalization using equidistant time
intervals, resulting in an identical number of samples for all
trajectories.
</p>
<p><a href="#topic+mt_resample">mt_resample</a>	resamples trajectories so that samples occur at constant
intervals of a specified length.
</p>
<p><a href="#topic+mt_average">mt_average</a> averages trajectory coordinates (and related variables)
for time bins of constant duration.
</p>
<p><a href="#topic+mt_length_normalize">mt_length_normalize</a> re-represents each trajectory spatially so that
adjacent points on the trajectory become equidistant to each other.
</p>


<h3>Data handling functions</h3>

<p>A number of functions are available for data handling operations, such as
filtering or adding of new variables or trajectories.
</p>
<p><a href="#topic+mt_subset">mt_subset</a>	filters mouse-tracking data by trials, so that only those
meeting the defined criteria are included.
</p>
<p><a href="#topic+mt_add_variables">mt_add_variables</a> adds new, self created variables to a trajectory
array.
</p>
<p><a href="#topic+mt_add_trajectory">mt_add_trajectory</a> adds a new trajectory to a trajectory array.
</p>
<p><a href="#topic+mt_bind">mt_bind</a> joins two trajectory arrays.
</p>


<h3>Analysis functions</h3>

<p>A number of different analysis procedures and summary statistics for mouse
trajectories have been established in the existing literature. The following
functions implement many of these approaches.
</p>
<p><a href="#topic+mt_derivatives">mt_derivatives</a> calculates distance, velocity, and
acceleration for trajectories.
</p>
<p><a href="#topic+mt_angles">mt_angles</a> calculates movement angles for trajectories.
</p>
<p><a href="#topic+mt_deviations">mt_deviations</a> calculates the deviations from an idealized
trajectory (straight line).
</p>
<p><a href="#topic+mt_measures">mt_measures</a>	calculates a set of mouse-tracking measures.
</p>
<p><a href="#topic+mt_sample_entropy">mt_sample_entropy</a>	calculates sample entropy.
</p>
<p><a href="#topic+mt_standardize">mt_standardize</a> standardizes mouse-tracking measures onto a common
scale (separately for subsets of the data, e.g., per participant).
</p>
<p><a href="#topic+mt_scale_trajectories">mt_scale_trajectories</a> provides different options for standardizing
variables in a mouse trajectory array.
</p>
<p><a href="#topic+mt_check_bimodality">mt_check_bimodality</a>	assesses the bimodality of mouse-tracking
measure distributions.
</p>
<p><a href="#topic+mt_check_resolution">mt_check_resolution</a>	checks the (temporal) logging resolution of raw
trajectories.
</p>
<p><a href="#topic+mt_count">mt_count</a> counts the number of observations for each trajectory.
</p>


<h3>Cluster functions</h3>

<p>A number of different functions for clustering trajectories is provided.
</p>
<p><a href="#topic+mt_distmat">mt_distmat</a> computes the dissimilarity/distance between each pair of
trajectories.
</p>
<p><a href="#topic+mt_cluster">mt_cluster</a> performs trajectory clustering with a specified number of
clusters.
</p>
<p><a href="#topic+mt_cluster_k">mt_cluster_k</a> estimates the optimal number of clusters using various
methods.
</p>
<p><a href="#topic+mt_map">mt_map</a> maps trajectories onto a predefined set of prototype
trajectories (a core set is provided in <a href="#topic+mt_prototypes">mt_prototypes</a>).
</p>


<h3>Reshaping, aggregation, and export functions</h3>

<p>A number of helper functions are provided for aggregating, plotting, and
exporting the multi-dimensional mouse trajectory arrays.
</p>
<p><a href="#topic+mt_reshape">mt_reshape</a> is a general purpose reshaping and aggregation function
for mousetrap data.
</p>
<p><a href="#topic+mt_aggregate">mt_aggregate</a> aggregates mouse-tracking data per condition.
</p>
<p><a href="#topic+mt_aggregate_per_subject">mt_aggregate_per_subject</a>	aggregates mouse-tracking data per
(within subjects-) condition separately for each subject.
</p>
<p><a href="#topic+mt_export_long">mt_export_long</a> exports mouse-tracking data in long format.
</p>
<p><a href="#topic+mt_export_wide">mt_export_wide</a> exports mouse-tracking data in wide format.
</p>


<h3>Visualization functions</h3>

<p>The following functions can be used for plotting trajectory data, e.g.,
individual and aggregated trajectories or velocity profiles.
</p>
<p><a href="#topic+mt_plot">mt_plot</a>	plots individual trajectory data.
</p>
<p><a href="#topic+mt_plot_aggregate">mt_plot_aggregate</a>	plots aggregated trajectory data.
</p>
<p><a href="#topic+mt_plot_add_rect">mt_plot_add_rect</a> adds rectangles to a trajectory plot.
</p>
<p><a href="#topic+mt_plot_riverbed">mt_plot_riverbed</a> plots the relative frequency of a selected variable
across time.
</p>
<p><a href="#topic+mt_plot_per_trajectory">mt_plot_per_trajectory</a> creates a pdf with separate plots per
trajectory.
</p>
<p><a href="#topic+mt_heatmap">mt_heatmap</a> and <a href="#topic+mt_heatmap_ggplot">mt_heatmap_ggplot</a> plot trajectory heatmaps.
</p>
<p><a href="#topic+mt_diffmap">mt_diffmap</a> for creating a difference-heatmap of two trajectory
heatmap images.
</p>
<p><a href="#topic+mt_animate">mt_animate</a> creates a gif trajectory animation.
</p>


<h3>Helper functions</h3>

<p><a href="#topic+bimodality_coefficient">bimodality_coefficient</a> calculates the bimodality coefficient.
</p>
<p><a href="#topic+scale_within">scale_within</a> scales and centers variables within the levels of
another variable.
</p>
<p><a href="#topic+bezier">bezier</a> creates Bezier-curves using the Bernstein approximation.
</p>


<h3>Datasets</h3>

<p><a href="#topic+mt_example">mt_example</a> and <a href="#topic+mt_example_raw">mt_example_raw</a> contain a mouse-tracking
example dataset for demonstrations using the <code>mousetrap</code> package.
</p>
<p><a href="#topic+KH2017">KH2017</a> and <a href="#topic+KH2017_raw">KH2017_raw</a> contain a mouse-tracking dataset from
Kieslich &amp; Henninger (2017).
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Pascal J. Kieslich <a href="mailto:pascal.kieslich@gmail.com">pascal.kieslich@gmail.com</a> (<a href="https://orcid.org/0000-0002-0853-9364">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Dirk U. Wulff <a href="mailto:dirk.wulff@gmail.com">dirk.wulff@gmail.com</a> (<a href="https://orcid.org/0000-0002-4008-8022">ORCID</a>)
</p>
</li>
<li><p> Felix Henninger <a href="mailto:mailbox@felixhenninger.com">mailbox@felixhenninger.com</a> (<a href="https://orcid.org/0000-0002-7730-9511">ORCID</a>)
</p>
</li>
<li><p> Jonas M. B. Haslbeck <a href="mailto:jonas.haslbeck@googlemail.com">jonas.haslbeck@googlemail.com</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Sarah Brockhaus [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://pascalkieslich.github.io/mousetrap/">https://pascalkieslich.github.io/mousetrap/</a>
</p>
</li>
<li> <p><a href="https://github.com/pascalkieslich/mousetrap">https://github.com/pascalkieslich/mousetrap</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/pascalkieslich/mousetrap/issues">https://github.com/pascalkieslich/mousetrap/issues</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
KH2017 &lt;- mt_import_mousetrap(subset(KH2017_raw,correct==1))
KH2017 &lt;- mt_remap_symmetric(KH2017)
KH2017 &lt;- mt_align_start(KH2017)

## End(Not run)

KH2017 &lt;- mt_time_normalize(KH2017)
KH2017 &lt;- mt_measures(KH2017)

mt_aggregate(
  KH2017, use="measures",
  use_variables=c("MAD", "AD"),
  use2_variables="Condition",
  subject_id="subject_nr"
)

mt_plot_aggregate(KH2017,
  use="tn_trajectories",
  x="xpos", y="ypos", color="Condition",
  subject_id="subject_nr"
)

## Not run: 
mt_plot(KH2017,
  use="tn_trajectories",
  x="xpos", y="ypos", color="Condition"
)

## End(Not run)
</code></pre>

<hr>
<h2 id='bezier'>Create Bezier-curves using the Bernstein approximation.</h2><span id='topic+bezier'></span>

<h3>Description</h3>

<p><code>bezier</code> creates 3-point Bezier-curves using the
Bernstein approximation to simulate continuous competition
in mouse- and hand-trajectories.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bezier(x = c(0, 1, -1), y = c(0, 1.5, 1.5), w = 1, resol = 100)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bezier_+3A_x">x</code></td>
<td>
<p>a numeric vector giving the x-coordinates of exactly three
Bezier-points. Defaults to c(0,1,-1) matching the 'mt' format in
<a href="#topic+mt_align">mt_align</a>.</p>
</td></tr>
<tr><td><code id="bezier_+3A_y">y</code></td>
<td>
<p>a numeric vector giving the x-coordinates of exactly three
Bezier-points. Defaults to c(0,1.5,1.5) matching the 'mt' format in
<a href="#topic+mt_align">mt_align</a>.</p>
</td></tr>
<tr><td><code id="bezier_+3A_w">w</code></td>
<td>
<p>a numeric value or vector specifying one or several Bezier curves,
with <code>w</code> governing the pull towards the middle point. Each entry in
<code>w</code> creates one Bezier-curve.</p>
</td></tr>
<tr><td><code id="bezier_+3A_resol">resol</code></td>
<td>
<p>a numeric value specifying the spatial resolution of the bezier
curves. For example, <code>resol = 100</code> creates bezier curves comprised of
100 points each.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A trajectory array containing the bezier curves.
</p>


<h3>Author(s)</h3>

<p>Dirk U. Wulff
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate range of Bezier-curves
bezier_curves &lt;- bezier(w=seq(0,10,.1))

# Plot curves
mt_plot(bezier_curves)
   
</code></pre>

<hr>
<h2 id='bimodality_coefficient'>Calculate bimodality coefficient.</h2><span id='topic+bimodality_coefficient'></span>

<h3>Description</h3>

<p>Calculate the bimodality coefficient for a numeric vector as specified in
Pfister et al. (2013).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bimodality_coefficient(x, na.rm = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bimodality_coefficient_+3A_x">x</code></td>
<td>
<p>a numeric vector.</p>
</td></tr>
<tr><td><code id="bimodality_coefficient_+3A_na.rm">na.rm</code></td>
<td>
<p>logical specifying whether missing values should be removed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The calculation of the bimodality coefficient involves calculating the
skewness and kurtosis of the distribution first. For this, the
<a href="psych.html#topic+skew">skew</a> and <a href="psych.html#topic+skew">kurtosi</a> functions of the <code>psych</code>
package are used.
Note that type is set to &quot;2&quot; for these functions in accordance with
Pfister et al. (2013).
</p>


<h3>Value</h3>

<p>A numeric value.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>References</h3>

<p>Pfister, R., Schwarz, K. A., Janczyk, M., Dale, R., &amp; Freeman, J. B. (2013).
Good things peak in pairs: A note on the bimodality coefficient.
<em>Frontiers in Psychology, 4</em>, 700.
<a href="https://doi.org/10.3389/fpsyg.2013.00700">doi:10.3389/fpsyg.2013.00700</a>
</p>


<h3>See Also</h3>

<p><a href="psych.html#topic+skew">skew</a> for calculating skewness and kurtosis.
</p>
<p><a href="#topic+mt_check_bimodality">mt_check_bimodality</a> for assessing bimodality using several methods in
a mousetrap data object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pfister_data_a &lt;- rep(1:11, times=c(3,5,5,10,17,20,17,10,5,5,3))
bimodality_coefficient(pfister_data_a) #.34
pfister_data_b &lt;- rep(1:11, times=c(2,26,14,6,2,0,2,6,14,26,2))
bimodality_coefficient(pfister_data_b) #.79

</code></pre>

<hr>
<h2 id='KH2017'>Mouse-tracking dataset from Kieslich &amp; Henninger (2017)</h2><span id='topic+KH2017'></span>

<h3>Description</h3>

<p>A data object of class &quot;mousetrap&quot; with the imported and preprocessed
mouse-tracking data from Kieslich &amp; Henninger (2017). More information about
the study and raw data can be found in <a href="#topic+KH2017_raw">KH2017_raw</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>KH2017
</code></pre>


<h3>Format</h3>

<p>A mousetrap data object is a <a href="base.html#topic+list">list</a> containing  at least the
following objects:
</p>

<ul>
<li><p><code>data</code>: a <a href="base.html#topic+data.frame">data.frame</a> containing the trial data (from
which the mouse-tracking data columns have been removed). More
information about the content of the trial data in <code>KH2017</code> can
be found in <a href="#topic+KH2017_raw">KH2017_raw</a>. The <a href="base.html#topic+rownames">rownames</a> of <code>data</code>
correspond to the trial identifier. For convenience, the trial identifier
is also stored in an additional column called &quot;mt_id&quot;.
</p>
</li>
<li><p><code>trajectories</code>: an <a href="base.html#topic+array">array</a> containing the raw
mouse-tracking trajectories. The first dimension represents the different
trials and the dimension names (which can be accessed using
<a href="base.html#topic+rownames">rownames</a>) correspond to the trial identifier (the same identifier
that is used as the <code>rownames</code> in <code>data</code>). The second dimension
corresponds to the samples taken over time which are included in
chronological order. The third dimension corresponds to the different
mouse-tracking variables (timestamps, x-positions, y-positions) which are
usually called <code>timestamps</code>, <code>xpos</code>, and <code>ypos</code>. 
</p>
</li></ul>

<p>Some functions in this package (e.g., <a href="#topic+mt_time_normalize">mt_time_normalize</a> and
<a href="#topic+mt_average">mt_average</a>) add additional trajectory arrays (e.g.,
<code>tn_trajectories</code> and <code>av_trajectories</code>) to the mousetrap data
object. Other functions modify the existing arrays (e.g.,
<a href="#topic+mt_derivatives">mt_derivatives</a> adds distance, velocity, and acceleration
to an existing dataset). Finally <a href="#topic+mt_measures">mt_measures</a> adds an
additional data.frame with mouse-tracking measures to it.
</p>


<h3>Details</h3>

<p>The raw dataset (<a href="#topic+KH2017_raw">KH2017_raw</a>) was filtered keeping only correctly
answered trials. The filtered dataset was imported using
<a href="#topic+mt_import_mousetrap">mt_import_mousetrap</a>. Trajectories were then remapped using
<a href="#topic+mt_remap_symmetric">mt_remap_symmetric</a> so that all trajectories end in the top-left corner
and their starting point was aligned to a common value (0,0) using
<a href="#topic+mt_align_start">mt_align_start</a>.
</p>


<h3>References</h3>

<p>Kieslich, P. J., &amp; Henninger, F. (2017). Mousetrap: An
integrated, open-source mouse-tracking package. <em>Behavior Research
Methods, 49</em>(5), 1652-1667. <a href="https://doi.org/10.3758/s13428-017-0900-z">doi:10.3758/s13428-017-0900-z</a>
</p>
<p>Dale, R., Kehoe, C., &amp; Spivey, M. J. (2007). Graded motor responses in the
time course of categorizing atypical exemplars. <em>Memory &amp; Cognition,
35</em>(1), 15-28. <a href="https://doi.org/10.3758/BF03195938">doi:10.3758/BF03195938</a>
</p>

<hr>
<h2 id='KH2017_raw'>Raw mouse-tracking dataset from Kieslich &amp; Henninger (2017)</h2><span id='topic+KH2017_raw'></span>

<h3>Description</h3>

<p>Raw mouse-tracking dataset from Kieslich &amp; Henninger (2017), an experiment
using the material and procedure of experiment 1 by Dale et al. (2007). A
preprocessed (as opposed to raw) version of the same data can be found in
<a href="#topic+KH2017">KH2017</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>KH2017_raw
</code></pre>


<h3>Format</h3>

<p>A <a href="base.html#topic+data.frame">data.frame</a> with 1140 rows and 19 variables. The data.frame is
based on the combined raw data that were created using
<a href="readbulk.html#topic+read_opensesame">read_opensesame</a> from the
<a href="http://pascalkieslich.github.io/readbulk/">readbulk</a> library. For
ease of use, unnecessary columns were excluded.
</p>
<p>The variables included relate to the item that was presented
(<code>Exemplar</code>), the answer categories (<code>Category1</code> and
<code>Category2</code>), the subject identifier (<code>subject_nr</code>), the
subjects' response (<code>response</code>), the correctness of the response
(<code>response</code>) as well as the mouse-tracking variables
(<code>timestamps_get_response</code>, <code>xpos_get_response</code> and
<code>ypos_get_response</code>)
</p>
<p>Each mouse-tracking variable contains a list of values (separated by ', ')
</p>

<ul>
<li><p> one entry for each recorded position of the mouse. The position
coordinates are given in pixels, such that values of zero for both
<code>xpos_get_response</code> and <code>ypos_get_response</code> indicate that the
cursor is located in the center of the screen. Both variables increase in
value as the mouse moves toward the bottom right. Timestamps are given in
milliseconds.
</p>
</li></ul>



<h3>Details</h3>

<p>The data stem from a study by Kieslich &amp; Henninger (2017) which used the
material and procedure of experiment 1 by Dale et al. (2007). In this
experiment, participants have to assign exemplars (e.g., &quot;whale&quot;) to one of
two categories (e.g., &quot;fish&quot; or &quot;mammal&quot;) by clicking on the button
corresponding to the correct category. All exemplars and categories from the
original study were translated to and presented in German.
</p>
<p>The data was collected in <a href="https://osdoc.cogsci.nl/">OpenSesame</a> using
the <a href="https://github.com/pascalkieslich/mousetrap-os">mousetrap plugin</a>
(Kieslich &amp; Henninger, 2017).
</p>
<p>Across the 19 trials of the experiment, 60 participants categorized 13
exemplars that were typical of their category and 6 atypical exemplars for
which this was not the case. For the atypical exemplars (e.g., &quot;whale&quot;), the
competing category (&quot;fish&quot;) was selected to compete with the correct category
(&quot;mammal&quot;). The hypothesis under investigation is whether participants' mouse
trajectories deviate more towards the competing category for the atypical
exemplars, indicating increased conflict between the response options.
</p>


<h3>References</h3>

<p>Kieslich, P. J., &amp; Henninger, F. (2017). Mousetrap: An
integrated, open-source mouse-tracking package. <em>Behavior Research
Methods, 49</em>(5), 1652-1667. <a href="https://doi.org/10.3758/s13428-017-0900-z">doi:10.3758/s13428-017-0900-z</a>
</p>
<p>Dale, R., Kehoe, C., &amp; Spivey, M. J. (2007). Graded motor responses in the
time course of categorizing atypical exemplars. <em>Memory &amp; Cognition,
35</em>(1), 15-28. <a href="https://doi.org/10.3758/BF03195938">doi:10.3758/BF03195938</a>
</p>

<hr>
<h2 id='mt_add_trajectory'>Add new trajectory to trajectory array.</h2><span id='topic+mt_add_trajectory'></span>

<h3>Description</h3>

<p>Add a single new trajectory to trajectory array.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_add_trajectory(
  data,
  use = "trajectories",
  save_as = use,
  xpos = NULL,
  ypos = NULL,
  xypos = NULL,
  id = "new"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_add_trajectory_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_add_trajectory_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_add_trajectory_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_add_trajectory_+3A_xpos">xpos</code></td>
<td>
<p>a vector of x positions. Ignored, if <code>xypos</code> is provided.</p>
</td></tr>
<tr><td><code id="mt_add_trajectory_+3A_ypos">ypos</code></td>
<td>
<p>a vector of y positions. Ignored, if <code>xypos</code> is provided.</p>
</td></tr>
<tr><td><code id="mt_add_trajectory_+3A_xypos">xypos</code></td>
<td>
<p>a matrix, the first column corresponding to the x positions, the
second to the y positions.</p>
</td></tr>
<tr><td><code id="mt_add_trajectory_+3A_id">id</code></td>
<td>
<p>a character string specifying the identifier of the to be added
trajectory.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) where the new
trajectory has been added.
If the trajectory array was provided directly as <code>data</code>, only the
trajectory array will be returned.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Add additional prototype to mt_prototypes
mt_prototypes_ext &lt;- mt_add_trajectory(mt_prototypes,
   xpos = c(0,1,-1,1,-1), ypos = c(0,1.5,1.5,1.5,1.5), id = "dCoM3"
)

</code></pre>

<hr>
<h2 id='mt_add_variables'>Add new variables to trajectory array.</h2><span id='topic+mt_add_variables'></span>

<h3>Description</h3>

<p>Add new variables to the trajectory array (and remove potentially existing
variables of the same name). This is mostly a helper function used by other
functions in this package (e.g., <a href="#topic+mt_deviations">mt_deviations</a>). However, it
can also be helpful if the user has calculated new variables for each logged
coordinate and wants to add them to an existing trajectory array.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_add_variables(data, use = "trajectories", save_as = use, variables)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_add_variables_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_add_variables_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_add_variables_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_add_variables_+3A_variables">variables</code></td>
<td>
<p>a list of matrices that each contain the data of
one of the to be added variables. In this case, the new variables with
their values are added as a new entry in the trajectory arrays third
dimension. Alternatively, a character vector specifying the name of the new
variables that should be added to the trajectory array. In this case, the
new variables are filled with <code>NA</code>s.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) where the new
variables have been added to the trajectory array.
Depending on the input to <code>variables</code>, the values for the added
variables are either <code>NA</code>s or their actual values. If columns of the
same name already existed, they have been removed. If the trajectory array
was provided directly as <code>data</code>, only the trajectory array will be
returned.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculate new (arbitrary) variables for this example
# ... the sum of the x- and y-positions
xy_sum &lt;- mt_example$trajectories[,,"xpos"] + mt_example$trajectories[,,"ypos"]
# ... the product of the x- and y-positions
xy_prod &lt;- mt_example$trajectories[,,"xpos"] * mt_example$trajectories[,,"ypos"]

# Add the new variables to the trajectory array
mt_example &lt;- mt_add_variables(mt_example,
  variables=list(xy_sum=xy_sum, xy_prod=xy_prod))

</code></pre>

<hr>
<h2 id='mt_aggregate'>Aggregate mouse-tracking data per condition.</h2><span id='topic+mt_aggregate'></span>

<h3>Description</h3>

<p><code>mt_aggregate</code> is used for aggregating mouse-tracking measures (or
trajectories) per condition. One or several condition variables can be
specified using <code>use2_variables</code>. Aggregation will be performed
separately for each level of the condition variables. <code>mt_aggregate</code> is
a wrapper function for <code><a href="#topic+mt_reshape">mt_reshape</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_aggregate(
  data,
  use = "measures",
  use_variables = NULL,
  use2 = "data",
  use2_variables = NULL,
  subject_id = NULL,
  trajectories_long = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_aggregate_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_aggregate_+3A_use">use</code></td>
<td>
<p>a character string specifying which dataset should be aggregated.
The corresponding data are selected from <code>data</code> using
<code>data[[use]]</code>. Usually, this value corresponds to either
&quot;tn_trajectories&quot; or &quot;measures&quot;, depending on whether the time-normalized
trajectories or derived measures should be aggregated.</p>
</td></tr>
<tr><td><code id="mt_aggregate_+3A_use_variables">use_variables</code></td>
<td>
<p>a character vector specifying the mouse-tracking
variables to aggregate. If a data.frame with mouse-tracking measures is
provided as <code>data</code>, this corresponds to the column names. If a
trajectory array is provided, this argument should specify the labels of
respective array dimensions. If unspecified, all variables will be
aggregated.</p>
</td></tr>
<tr><td><code id="mt_aggregate_+3A_use2">use2</code></td>
<td>
<p>a character string specifying where the data containing the
condition information can be found. Defaults to &quot;data&quot; as
<code>data[["data"]]</code> usually contains all non mouse-tracking trial data.
Alternatively, a data.frame can be provided directly.</p>
</td></tr>
<tr><td><code id="mt_aggregate_+3A_use2_variables">use2_variables</code></td>
<td>
<p>a character string (or vector) specifying the variables
(in <code>data[[use2]]</code>) across which the trajectories / measures will be
aggregated. For each combination of levels of the grouping variable(s),
aggregation will be performed separately using <a href="dplyr.html#topic+summarise_all">summarize_at</a>.</p>
</td></tr>
<tr><td><code id="mt_aggregate_+3A_subject_id">subject_id</code></td>
<td>
<p>an optional character string specifying the column that
contains the subject identifier. If specified, aggregation will be
performed within subjects first (i.e., within subjects for all available
values of the grouping variables specified in <code>use2_variables</code>).</p>
</td></tr>
<tr><td><code id="mt_aggregate_+3A_trajectories_long">trajectories_long</code></td>
<td>
<p>logical indicating if the reshaped trajectories
should be returned in long or wide format. If <code>TRUE</code>, every recorded
position in a trajectory is placed in another row (whereby the order of the
positions is logged in the variable <code>mt_seq</code>). If <code>FALSE</code>, every
trajectory is saved in wide format and the respective positions are indexed
by adding an integer to the corresponding label (e.g., <code>xpos_1</code>,
<code>xpos_2</code>, ...). Only relevant if <code>data[[use]]</code> contains
trajectories.</p>
</td></tr>
<tr><td><code id="mt_aggregate_+3A_...">...</code></td>
<td>
<p>additional arguments passed on to <a href="#topic+mt_reshape">mt_reshape</a> (such as
<code>subset</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="base.html#topic+data.frame">data.frame</a> containing the aggregated data.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_aggregate_per_subject">mt_aggregate_per_subject</a> for aggregating mouse-tracking
measures and trajectories per subject.
</p>
<p><a href="dplyr.html#topic+summarise_all">summarize_at</a> for aggregating data using the <code>dplyr</code>
package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Time-normalize trajectories
mt_example &lt;- mt_time_normalize(mt_example)

# Aggregate time-normalized trajectories per condition
average_trajectories &lt;-  mt_aggregate(mt_example,
  use="tn_trajectories",
  use2_variables="Condition"
)


# Calculate mouse-tracking measures
mt_example &lt;- mt_measures(mt_example)

# Aggregate measures per condition
average_measures &lt;- mt_aggregate(mt_example,
  use="measures", use_variables=c("MAD", "AD"),
  use2_variables="Condition"
)

# Aggregate measures per condition
# first within subjects and then across subjects
average_measures &lt;- mt_aggregate(mt_example,
  use="measures", use_variables=c("MAD", "AD"),
  use2_variables="Condition",
  subject_id="subject_nr"
)

</code></pre>

<hr>
<h2 id='mt_aggregate_per_subject'>Aggregate mouse-tracking data per condition separately for each subject.</h2><span id='topic+mt_aggregate_per_subject'></span>

<h3>Description</h3>

<p><code>mt_aggregate_per_subject</code> can be used for aggregating mouse-tracking
measures (or trajectories) per condition separately for each subject. One or
more condition variables can be specified using <code>use2_variables</code>.
Aggregation will be performed separately for each level of the condition
variables. <code>mt_aggregate_per_subject</code> is a wrapper function for
<a href="#topic+mt_reshape">mt_reshape</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_aggregate_per_subject(
  data,
  use = "measures",
  use_variables = NULL,
  use2 = "data",
  use2_variables = NULL,
  subject_id,
  trajectories_long = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_aggregate_per_subject_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_aggregate_per_subject_+3A_use">use</code></td>
<td>
<p>a character string specifying which dataset should be aggregated.
The corresponding data are selected from <code>data</code> using
<code>data[[use]]</code>. Usually, this value corresponds to either
&quot;tn_trajectories&quot; or &quot;measures&quot;, depending on whether the time-normalized
trajectories or derived measures should be aggregated.</p>
</td></tr>
<tr><td><code id="mt_aggregate_per_subject_+3A_use_variables">use_variables</code></td>
<td>
<p>a character vector specifying the mouse-tracking
variables to aggregate. If a data.frame with mouse-tracking measures is
provided as <code>data</code>, this corresponds to the column names. If a
trajectory array is provided, this argument should specify the labels of
respective array dimensions. If unspecified, all variables will be
aggregated.</p>
</td></tr>
<tr><td><code id="mt_aggregate_per_subject_+3A_use2">use2</code></td>
<td>
<p>a character string specifying where the data containing the
condition information can be found. Defaults to &quot;data&quot; as
<code>data[["data"]]</code> usually contains all non mouse-tracking trial data.
Alternatively, a data.frame can be provided directly.</p>
</td></tr>
<tr><td><code id="mt_aggregate_per_subject_+3A_use2_variables">use2_variables</code></td>
<td>
<p>a character string (or vector) specifying the variables
(in <code>data[[use2]]</code>) across which the trajectories / measures will be
aggregated. For each combination of levels of the grouping variable(s),
aggregation will be performed separately using <a href="dplyr.html#topic+summarise_all">summarize_at</a>.</p>
</td></tr>
<tr><td><code id="mt_aggregate_per_subject_+3A_subject_id">subject_id</code></td>
<td>
<p>a character string specifying which column contains the
subject identifier.</p>
</td></tr>
<tr><td><code id="mt_aggregate_per_subject_+3A_trajectories_long">trajectories_long</code></td>
<td>
<p>logical indicating if the reshaped trajectories
should be returned in long or wide format. If <code>TRUE</code>, every recorded
position in a trajectory is placed in another row (whereby the order of the
positions is logged in the variable <code>mt_seq</code>). If <code>FALSE</code>, every
trajectory is saved in wide format and the respective positions are indexed
by adding an integer to the corresponding label (e.g., <code>xpos_1</code>,
<code>xpos_2</code>, ...). Only relevant if <code>data[[use]]</code> contains
trajectories.</p>
</td></tr>
<tr><td><code id="mt_aggregate_per_subject_+3A_...">...</code></td>
<td>
<p>additional arguments passed on to <a href="#topic+mt_reshape">mt_reshape</a> (such as
<code>subset</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="base.html#topic+data.frame">data.frame</a> containing the aggregated data.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_aggregate">mt_aggregate</a> for aggregating mouse-tracking measures and
trajectories per condition.
</p>
<p><a href="dplyr.html#topic+summarise_all">summarize_at</a> for aggregating data using the <code>dplyr</code>
package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Time-normalize trajectories
mt_example &lt;- mt_time_normalize(mt_example)

# Aggregate time-normalized trajectories per condition
# separately per subject
average_trajectories &lt;- mt_aggregate_per_subject(
  mt_example,
  use="tn_trajectories",
  use2_variables="Condition",
  subject_id="subject_nr"
)


# Calculate mouse-tracking measures
mt_example &lt;- mt_measures(mt_example)

# Aggregate measures per condition
# separately per subject
average_measures &lt;- mt_aggregate_per_subject(
  mt_example,
  use="measures",
  use_variables=c("MAD", "AD"),
  use2_variables="Condition",
  subject_id="subject_nr"
)

</code></pre>

<hr>
<h2 id='mt_align'>Align trajectories.</h2><span id='topic+mt_align'></span>

<h3>Description</h3>

<p><code>mt_align</code> aligns trajectories to a common start point, end point, and /
or coordinate system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_align(
  data,
  use = "trajectories",
  save_as = use,
  dimensions = c("xpos", "ypos"),
  coordinates = "isotropic",
  align_start = FALSE,
  align_end = FALSE,
  align_side = "no",
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_align_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_align_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_align_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_align_+3A_dimensions">dimensions</code></td>
<td>
<p>a character string specifying which trajectory variables
should be used. Can be of length 2 or 3 for two-dimensional or
three-dimensional alignment respectively.</p>
</td></tr>
<tr><td><code id="mt_align_+3A_coordinates">coordinates</code></td>
<td>
<p>either a numeric vector of length 4 specifying the xstart,
ystart, xend, yend coordinates of the trajectory start and end points. Can
also be <code>isotropic</code> (the default) to preserve the coordinates of dim1
and dim2, <code>isotropic-norm</code> to set the coordinates to
<code>c(0,0,-1,x)</code> where x is chosen to preserve the aspect ratio of dim1
and dim2, <code>mt</code> to set coordinates to <code>c(0,0,-1,1.5)</code>, <code>norm</code>
to set coordinates  to <code>c(0,0,-1,1)</code>, and <code>wide</code> to set
coordinates  to <code>c(0,0,-1,1.2)</code>. In the three-dimensional case,
<code>coordinates</code> is a vector of length 6.</p>
</td></tr>
<tr><td><code id="mt_align_+3A_align_start">align_start</code></td>
<td>
<p>boolean specifying whether the start points of all
trajectories should be aligned to the position specified in
<code>coordinates</code>. See Details.</p>
</td></tr>
<tr><td><code id="mt_align_+3A_align_end">align_end</code></td>
<td>
<p>boolean specifying whether the end points of all trajectories
should be aligned to the position specified in <code>coordinates</code>. See
Details.</p>
</td></tr>
<tr><td><code id="mt_align_+3A_align_side">align_side</code></td>
<td>
<p>character string specifying whether all trajectories should
be flipped to the left side (<code>left</code>), the right side (<code>right</code>),
or not at all (<code>no</code>). Assumes that first entry in <code>dimensions</code>
are the x positions.</p>
</td></tr>
<tr><td><code id="mt_align_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>align_start</code> / <code>align_end</code> is <code>FALSE</code>, <code>coordinates</code>
define the position of the average start / end point across all trajectories.
</p>
<p>Note that if the end points of trajectories are not aligned, coordinates
refer to the hypothetical case where all trajectories are mapped to one side.
</p>
<p>If <code>align_start</code> / <code>align_end</code> is <code>TRUE</code>, the start / end
point of each trajectory is set to the exact position specified in
<code>coordinates</code>. <code>align_start</code> and <code>align_end</code> can be set
completely independently of one another, i.e., one can align only end points,
only start points, none, or both.
</p>
<p>If <code>align_start</code> is set to <code>"left"</code> or <code>"right"</code> trajectories
will be flipped to the lower or upper spectrum of the first dimensions,
respectively. If the first dimension is the x-coordinate this is equivalent
to flipping the trajectories to the left and right side, respectively.
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) with aligned
trajectories. Per default, the dimensions in the original trajectory array
will be replaced. If a different trajectory array is specified using
<code>save_as</code>, a new trajectory array will be created (including only the
aligned dimensions). If a trajectory array was provided directly as
<code>data</code>, only the aligned trajectories will be returned.
</p>


<h3>Author(s)</h3>

<p>Dirk U. Wulff
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_align_start">mt_align_start</a> for aligning all trajectories to a common
start position.
</p>
<p><a href="#topic+mt_align_start_end">mt_align_start_end</a> for aligning all trajectories so that they share
a common initial and final coordinate.
</p>
<p><a href="#topic+mt_remap_symmetric">mt_remap_symmetric</a> for remapping trajectories to one side (or one
quadrant) of the coordinate system.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mt_example &lt;- mt_align(mt_example,
  align_start = TRUE, align_end = TRUE,
  coordinates = 'mt')

</code></pre>

<hr>
<h2 id='mt_align_start'>Align start position of trajectories.</h2><span id='topic+mt_align_start'></span>

<h3>Description</h3>

<p>Adjust trajectories so that all trajectories have the same start position.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_align_start(
  data,
  use = "trajectories",
  save_as = use,
  dimensions = c("xpos", "ypos"),
  start = c(0, 0),
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_align_start_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_align_start_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_align_start_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_align_start_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying the dimensions in the
trajectory array that should be aligned.</p>
</td></tr>
<tr><td><code id="mt_align_start_+3A_start">start</code></td>
<td>
<p>a numeric vector specifying the start values for each dimension,
i.e., the values the first recorded position should have in every trial. If
<code>NULL</code>, trajectories are aligned to the mean first position across all
trials.</p>
</td></tr>
<tr><td><code id="mt_align_start_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) with aligned
trajectories. All other trajectory dimensions not specified in
<code>dimensions</code> (e.g., timestamps) will be kept as is in the resulting
trajectory array. If the trajectory array was provided directly as
<code>data</code>, only the trajectory array will be returned.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_align_start_end">mt_align_start_end</a>  for aligning the start and end position
of trajectories.
</p>
<p><a href="#topic+mt_align">mt_align</a> as a general purpose function for aligning and rescaling
trajectories.
</p>
<p><a href="#topic+mt_remap_symmetric">mt_remap_symmetric</a> for remapping trajectories.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Import raw trajectories for demonstration
mt_example &lt;- mt_import_mousetrap(mt_example_raw)

# Align trajectories to start coordinates (0,0)
mt_example &lt;- mt_align_start(mt_example,
  start=c(0,0))
  

# Import raw trajectories for demonstration
mt_example &lt;- mt_import_mousetrap(mt_example_raw)

# Align trajectories to mean first coordinates
mt_example &lt;- mt_align_start(mt_example,
  start=NULL)
  
</code></pre>

<hr>
<h2 id='mt_align_start_end'>Align start and end position of trajectories.</h2><span id='topic+mt_align_start_end'></span>

<h3>Description</h3>

<p>Adjust trajectories so that all trajectories have an identical start and end
point. In some articles, this is also referred to as space-normalization
(e.g. Dale et al., 2007).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_align_start_end(
  data,
  use = "trajectories",
  save_as = use,
  dimensions = c("xpos", "ypos"),
  start = c(0, 0),
  end = c(-1, 1),
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_align_start_end_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_align_start_end_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_align_start_end_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_align_start_end_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying the dimensions in the
trajectory array that should be aligned.</p>
</td></tr>
<tr><td><code id="mt_align_start_end_+3A_start">start</code></td>
<td>
<p>a numeric vector specifying the start values for each dimension,
i.e., the values the first recorded position should have in every trial. If
<code>NULL</code>, trajectories are aligned to the mean first position across all
trials.</p>
</td></tr>
<tr><td><code id="mt_align_start_end_+3A_end">end</code></td>
<td>
<p>a numeric vector specifying the end values for each dimension,
i.e., the values the last recorded position should have in every trial. If
<code>NULL</code>, trajectories are aligned to the mean last position across all
trials. Note that in this case trajectories should be remapped to one side
before alignment (e.g., using <a href="#topic+mt_remap_symmetric">mt_remap_symmetric</a>) so that the mean
last position is meaningful.</p>
</td></tr>
<tr><td><code id="mt_align_start_end_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) with aligned
trajectories. All other trajectory dimensions not specified in
<code>dimensions</code> (e.g., timestamps) will be kept as is in the resulting
trajectory array. If the trajectory array was provided directly as
<code>data</code>, only the trajectory array will be returned.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>References</h3>

<p>Dale, R., Kehoe, C., &amp; Spivey, M. J. (2007). Graded motor
responses in the time course of categorizing atypical exemplars.
<em>Memory &amp; Cognition, 35</em>(1), 15-28.
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_align_start">mt_align_start</a> for aligning the start position of
trajectories.
</p>
<p><a href="#topic+mt_align">mt_align</a> as a general purpose function for aligning and rescaling
trajectories.
</p>
<p><a href="#topic+mt_remap_symmetric">mt_remap_symmetric</a> for remapping trajectories.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Align start and end positions to specific coordinates
mt_example &lt;- mt_align_start_end(mt_example,
  start=c(0,0), end=c(-1,1))
  
  
# Import raw trajectories for demonstration
mt_example &lt;- mt_import_mousetrap(mt_example_raw)

# Remap trajectories
mt_example &lt;- mt_remap_symmetric(mt_example)

# Align trajectories to mean first and last coordinates
mt_example &lt;- mt_align_start_end(mt_example,
  start=NULL, end=NULL)

  
</code></pre>

<hr>
<h2 id='mt_angles'>Calculate movement angles.</h2><span id='topic+mt_angles'></span>

<h3>Description</h3>

<p>Calculate point-based and vertical-based angles for the points in the
movement trajectory. Point-based angles are the angle defined by three
subsequent points on the trajectory. Vertical-based angles are the angles
between two subsequent points and the vertical axis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_angles(
  data,
  use = "trajectories",
  dimensions = c("xpos", "ypos"),
  save_as = use,
  na_replace = FALSE,
  unit = "radian",
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_angles_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_angles_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_angles_+3A_dimensions">dimensions</code></td>
<td>
<p>a character string specifying which trajectory variables
should be used. Must be of length 2.</p>
</td></tr>
<tr><td><code id="mt_angles_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_angles_+3A_na_replace">na_replace</code></td>
<td>
<p>logical specifying whether <code>NA</code>s in the angle values
should be replaced using the next existing angle value (see Details).
Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="mt_angles_+3A_unit">unit</code></td>
<td>
<p>character specifying the unit for the angles. Default is
&quot;radian&quot;, alternative is &quot;degree&quot;.</p>
</td></tr>
<tr><td><code id="mt_angles_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, angles are reported in radians, the alternative is degrees. For
the first point in a trajectory, the angle values are always not defined
(<code>NA</code>).
</p>
<p>For vertical-based angles (<code>angle_v</code>), positive values indicate a
movement to the left of the vertical, negative values to the right of the
vertical. If there was no movement across two consecutive points,
<code>angle_v</code> is not defined and, by default, <code>NA</code> is returned. If
<code>na_replace</code> is <code>TRUE</code>, the next existing angle value is reported
instead.
</p>
<p>For point-based angles (<code>angle_p</code>), angles indicate changes of movement
within three consecutive time steps. The reported angle is always the smaller
one. A value of pi (= 3.14...) (for radians) or 180 (for degrees) indicates a
constant movement direction, a value of 0 (both for radians and degrees) a
complete reversal. If there was no movement across two consecutive points,
<code>angle_p</code> is not defined and, by default, <code>NA</code> is returned. If
<code>na_replace</code> is <code>TRUE</code>, the next existing angle value is reported
instead. <code>angle_p</code> is also not defined for the last point of the
trajectory.
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) with point-based and
vertical-based angles added as additional variables to the trajectory array
(called <code>angle_p</code> and <code>angle_v</code>). If a trajectory array was
provided directly as <code>data</code>, only the trajectory array will be
returned.
</p>


<h3>Author(s)</h3>

<p>Dirk U. Wulff
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculate movement angles
mt_example &lt;- mt_angles(mt_example)

# Calculate movement angles (in degree)
# and replace NAs with next existing value
mt_example &lt;- mt_angles(mt_example,
  unit="degree", na_replace=TRUE)

</code></pre>

<hr>
<h2 id='mt_animate'>Create gif trajectory animation.</h2><span id='topic+mt_animate'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p><code>mt_animate</code> animates trajectories using the animation package. Note
that this function has beta status.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_animate(
  data,
  use = "trajectories",
  dimensions = c("xpos", "ypos"),
  timestamps = "timestamps",
  filename = "trajectory_animation.gif",
  xres = 1000,
  seconds = 3,
  framerate = 24,
  speed = 0.5,
  density = 3,
  jitter = TRUE,
  remove = FALSE,
  bg = "black",
  col = "white",
  lwd = 1,
  loop = FALSE,
  bounds = NULL,
  norm = FALSE,
  upscale = 1,
  decay = 10,
  max_intensity = 5,
  discard_images = TRUE,
  im_path = NULL,
  parallel = TRUE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_animate_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying the two dimensions in the
trajectory array that contain the mouse positions. Usually (and by
default), the first value in the vector corresponds to the x-positions
(<code>xpos</code>) and the second to the y-positions (<code>ypos</code>).</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_timestamps">timestamps</code></td>
<td>
<p>a character string specifying the trajectory dimension
containing the timestamps. If <code>NULL</code> linearly increasing timestamps
are assumed, producing a perfectly constant timestamp interval.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_filename">filename</code></td>
<td>
<p>character string specifying the path and filename of the
resulting <em>.gif</em>. If the extension of <code>filename</code> is not
<em>.gif</em>, <em>.gif</em> is added at the end. Must not contain spaces.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_xres">xres</code></td>
<td>
<p>numeric specifying the resolution of the <em>.gif</em> file.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_seconds">seconds</code></td>
<td>
<p>numeric specifying the duration of the <em>.gif</em> file.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_framerate">framerate</code></td>
<td>
<p>numeric specifying the framerate of the <em>.gif</em> file.
Defaults to 24 implying smooth non-discrete frame transitions for the human
eye.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_speed">speed</code></td>
<td>
<p>numeric specifying the speed of the trajectories with regard to
their original velocity profile. I.e., a value of .5 shows trajectories in
half of the original velocities, whereas a value of 2 shows trajectories in
double of the original velocities.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_density">density</code></td>
<td>
<p>integer specifying the number of trajectories to be added
each frame. I.e., if <code>density = 10</code>, <code>seconds = 10</code>,
<code>framerate = 24</code> and <code>speed = .5</code> then the animation will show 10
x 10 x 24 x .5 = 1200 trajectories.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_jitter">jitter</code></td>
<td>
<p>logical specifying whether the density should be jittered. If
<code>TRUE</code>, <code>density</code> varies according to
<a href="stats.html#topic+Geometric">rgeom</a> (<code>1/density</code>).</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_remove">remove</code></td>
<td>
<p>logical specifying whether trajectories that reached their end
points should be removed from the rest of the animation. Defaults to
<code>FALSE</code> implying that all finished trajectories remain visible.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_bg">bg</code></td>
<td>
<p>character string specifying the background color.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_col">col</code></td>
<td>
<p>character string specifying the foreground color, i.e., the color
used to draw the trajectories.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_lwd">lwd</code></td>
<td>
<p>numeric specifying the line width of the trajectories.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_loop">loop</code></td>
<td>
<p>logical specifying whether gif should be looped. If <code>FALSE</code>
(the default), the last frame will remain visible after the animation is
finished. If <code>TRUE</code>, the gif will infinitely repeat itself.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_bounds">bounds</code></td>
<td>
<p>numeric vector specifying the xleft, xright, ybottom, and ytop
limits of the animation canvas. Defaults to <code>NULL</code> in which case the
animation canvas is set to include all existing trajectory points,
irrespective of how extreme they may be.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_norm">norm</code></td>
<td>
<p>logical specifying whether the trajectories should be remapped to
the <em>mt-space</em>. See <a href="#topic+mt_align">mt_align</a>. Note that aligning often requires
that that all trajectories are flipped to one side first (see
<a href="#topic+mt_remap_symmetric">mt_remap_symmetric</a>).</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_upscale">upscale</code></td>
<td>
<p>numeric specifying a scaling factor for the animation
resolution. E.g, <code>upscale = 2</code> implies that the x-resolution in
<em>.gif</em> file is <code>2*xres</code>.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_decay">decay</code></td>
<td>
<p>numeric defining a within-trajectory gradient of color intensity.
Specifically, values larger than 1 will give more recent movements higher
color intensities than movements that lie longer in the past, and vice
versa.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_max_intensity">max_intensity</code></td>
<td>
<p>numeric specifying the maximum color intensity. A value
of, e.g., 5, implies that color intensity is limited to 5 overlapping
trajectories. I.e., a point at which 4 trajectories overlap will in that
case have a smaller color intensity than a point at which 5 trajectories
overlap, but there will be no difference between the latter and a point at
which 6 trajectories overlap. If <code>decay</code> is unequal 1, this metric
refers to the most intense color point within the trajectory.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_discard_images">discard_images</code></td>
<td>
<p>logical specifying whether the temporary folder
containing the temporary <em>.png</em> images should be deleted. Defaults to
TRUE.</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_im_path">im_path</code></td>
<td>
<p>character string specifying the location of ImageMagick's
<em>convert</em> function. If <code>NULL</code>, the <em>convert</em> function is
expected in <code>'/usr/local/bin/convert'</code>, the default location for Linux
and OSX operating systems. The location has to be specified explicitly for
Windows (see Details and Examples).</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_parallel">parallel</code></td>
<td>
<p>logical specifying whether the temporary <em>.png</em> images
should be created using parallel processing (uses
<a href="parallel.html#topic+clusterApply">clusterApplyLB</a>). Process will be run on the maximum
number of available cores (as determined by <a href="parallel.html#topic+detectCores">detectCores</a>).</p>
</td></tr>
<tr><td><code id="mt_animate_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_animate</code> produces a .gif file showing a continuous stream of
animated trajectories. The function first produces a series of <em>.png</em>
images, which then are combined into a <em>.gif</em> animation using
<em>ImageMagick</em> (see <a href="https://www.imagemagick.org/">https://www.imagemagick.org/</a>).
</p>
<p>In order to run this function, ImageMagick must be installed (download from
<a href="https://www.imagemagick.org/">https://www.imagemagick.org/</a>). Under Unix systems (Linux and Apple's
OSX) the function will look for ImageMagick using its default installation
path. Alternatively, the location of ImageMagick's <em>convert</em> function
can be provided using the <code>im_path</code> argument. Under Windows,
<code>im_path</code> must always be specified explicitly (e.g., it might look
something like this <code>im_path = "C:/Program
Files/ImageMagick-7.0.5-Q16/convert.exe"</code>).
</p>
<p>During the animation trajectories are sampled from the data without
replacement. The function stops when it reaches the last trajectory contained
in <code>data</code>.
</p>
<p>By default, <code>mt_animate</code> animates trajectories using the original
timestamps. Timestamps are expected to be expressed in milliseconds. By
setting <code>timestamps = NULL</code>, the function can also assume timestamps to
be regular, i.e., of constant interval, in this case the longest duration is
set to exactly one second.
</p>
<p>In order to create high-resolution (large) animations in a relatively short
time increase <code>upscale</code> in favor of <code>xres</code>. However, note that this
will decrease the sharpness of the image.
</p>
<p>In order to increase or decrease the overall color intensity decrease or
increase the <code>max_intensity</code>, respectively.
</p>


<h3>Author(s)</h3>

<p>Dirk U. Wulff
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Preprocess trajectory data
mt_example &lt;- mt_align_start(mt_example)
mt_example &lt;- mt_remap_symmetric(mt_example) 

# Create animated trajectory gif
# (under Linux / OSX)
mt_animate(mt_example,filename = "MyMovie.gif")

# Increase duration and density while decreasing speed
mt_animate(mt_example, filename = "MyMovie2.gif",
  seconds = 10, speed = .3, density = 10)

# Create animated trajectory gif
# (under Windows - ImageMagick version specific example)
mt_animate(mt_example,filename = "MyMovie.gif",
  im_path = "C:/Program Files/ImageMagick-7.0.5-Q16/convert.exe")


## End(Not run)

</code></pre>

<hr>
<h2 id='mt_average'>Average trajectories across intervals.</h2><span id='topic+mt_average'></span>

<h3>Description</h3>

<p>Average trajectory data across specified intervals (e.g., constant time
intervals). For every specified dimension in the trajectory array (by
default, every dimension, i.e., x- and y-position, possibly also velocity and
acceleration etc.), the mean value for the respective interval is calculated
(see Details for information regarding the exact averaging procedure).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_average(
  data,
  use = "trajectories",
  save_as = "av_trajectories",
  dimensions = "all",
  av_dimension = "timestamps",
  intervals = NULL,
  interval_size = 100,
  max_interval = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_average_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_average_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_average_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_average_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying the dimensions in the
trajectory array that should be averaged. By default (<code>"all"</code>), all
trajectory dimensions will be averaged.</p>
</td></tr>
<tr><td><code id="mt_average_+3A_av_dimension">av_dimension</code></td>
<td>
<p>a character string specifying which values should be used
for determining the intervals for averaging (<code>"timestamps"</code> by
default).</p>
</td></tr>
<tr><td><code id="mt_average_+3A_intervals">intervals</code></td>
<td>
<p>an optional numeric vector. If specified, these values are
taken as the borders of the intervals (<code>interval_size</code> and
<code>max_interval</code> are ignored).</p>
</td></tr>
<tr><td><code id="mt_average_+3A_interval_size">interval_size</code></td>
<td>
<p>an integer specifying the size of the constant dimension
interval.</p>
</td></tr>
<tr><td><code id="mt_average_+3A_max_interval">max_interval</code></td>
<td>
<p>an integer specifying the upper limit of the last
dimension value that should be included (therefore, it should be a multiple
of the <code>interval_size</code>). If specified, only values will be used for
averaging where the dimension values are smaller than <code>max_interval</code>.
If unspecified (the default), all values will be included.</p>
</td></tr>
<tr><td><code id="mt_average_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For each interval, it is first determined which of the values lie within the
respective interval of the dimension used for averaging (e.g., timestamps).
Intervals are left-open, right-closed (e.g., if values are averaged across
constant timestamps of 100 ms, a timestamp of 1200 would be included in the
interval 1100-1200 while a timestamp of 1300 would be included in the
interval 1200-1300). Then, all values for which the corresponding average
dimension values lie within the interval are averaged.
</p>
<p>In case the last interval is not fully covered (e.g., if the last timestamp
has the value 1250), values for the corresponding interval (1200-1300) will
be computed based on the average of the values up to the last existing value.
</p>
<p>Note that <code>mt_average</code> assumes that the trajectory variables are
recorded with a constant sampling rate (i.e., with a constant difference in
the timestamps). If the sampling rate varies considerably, <a href="#topic+mt_resample">mt_resample</a>
should be called before averaging to arrive at equally spaced timestamps. The
sampling rate can be investigated using <a href="#topic+mt_check_resolution">mt_check_resolution</a>.
</p>
<p>If average velocity and acceleration are of interest,
<a href="#topic+mt_derivatives">mt_derivatives</a> should be called before averaging.
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) with an additional
array (by default called <code>av_trajectories</code>) that contains the average
trajectory data per dimension interval. If a trajectory array was provided
directly as <code>data</code>, only the average trajectories will be returned.
</p>
<p>For the dimension values used for averaging (specified in
<code>av_dimension</code>), the mid point of the respective interval is reported,
which is helpful for plotting the trajectory data later on. However, this
value does not necessarily correspond to the empirical mean of the
dimension values in the interval.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_derivatives">mt_derivatives</a> for calculating velocity and
acceleration.
</p>
<p><a href="#topic+mt_resample">mt_resample</a> for resampling trajectories using a constant time
interval.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mt_example &lt;- mt_derivatives(mt_example)

# average trajectories across 100 ms intervals
mt_example &lt;- mt_average(mt_example, save_as="av_trajectories",
  interval_size=100)

# average time-normalized trajectories across specific intervals
# of the time steps
mt_example &lt;- mt_time_normalize(mt_example)
mt_example &lt;- mt_average(mt_example,
  use="tn_trajectories", save_as="av_tn_trajectories",
  av_dimension = "steps", intervals = c(0.5,33.5,67.5,101.5))

</code></pre>

<hr>
<h2 id='mt_bind'>Join two trajectory arrays</h2><span id='topic+mt_bind'></span>

<h3>Description</h3>

<p>Join two trajectory arrays. This function is mainly used internally, but can
be helpful in those (relatively rare) occasions where additional processed
trajectory data should be added to another trajectory array.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_bind(trajectories1, trajectories2, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_bind_+3A_trajectories1">trajectories1</code></td>
<td>
<p>a trajectory array (see <a href="#topic+mt_example">mt_example</a>).</p>
</td></tr>
<tr><td><code id="mt_bind_+3A_trajectories2">trajectories2</code></td>
<td>
<p>a trajectory array (see <a href="#topic+mt_example">mt_example</a>).</p>
</td></tr>
<tr><td><code id="mt_bind_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A trajectory array.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>Examples</h3>

<pre><code class='language-R'>trajectories_combined &lt;- mt_bind(
  mt_example$trajectories,
  mt_prototypes
)

</code></pre>

<hr>
<h2 id='mt_check_bimodality'>Assess bimodality of mouse-tracking measure distributions.</h2><span id='topic+mt_check_bimodality'></span>

<h3>Description</h3>

<p>Assess bimodality of the distribution of mouse-tracking measures using the
bimodality coefficient and Hartigan's dip statistic (see Details). If
bimodality should be assessed separately for different conditions, the
corresponding variables can be specified under <code>grouping_variables</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_check_bimodality(
  data,
  use = "measures",
  use_variables = NULL,
  methods = c("BC", "HDS"),
  B = 2000,
  grouping_variables = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_check_bimodality_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details).</p>
</td></tr>
<tr><td><code id="mt_check_bimodality_+3A_use">use</code></td>
<td>
<p>a character string specifying which data should be used. By
default, points to the <code>measures</code> data.frame created using
<a href="#topic+mt_measures">mt_measures</a>.</p>
</td></tr>
<tr><td><code id="mt_check_bimodality_+3A_use_variables">use_variables</code></td>
<td>
<p>a vector specifying for which mouse-tracking measures
bimodality should be assessed.</p>
</td></tr>
<tr><td><code id="mt_check_bimodality_+3A_methods">methods</code></td>
<td>
<p>a character string (or vector) specifying which methods should
be used for assessing bimodality (see Details).</p>
</td></tr>
<tr><td><code id="mt_check_bimodality_+3A_b">B</code></td>
<td>
<p>an integer specifying the number of replicates used in the Monte
Carlo test (only relevant if &quot;HDS_sim&quot; is included in methods, see
Details).</p>
</td></tr>
<tr><td><code id="mt_check_bimodality_+3A_grouping_variables">grouping_variables</code></td>
<td>
<p>a character string (or vector) specifying one or
more variables in <code>data[["data"]]</code>. If specified, bimodality will be
assessed separately for each level of the variable. If unspecified (the
default), bimodality is checked across all trials.</p>
</td></tr>
<tr><td><code id="mt_check_bimodality_+3A_...">...</code></td>
<td>
<p>additional arguments passed on to <a href="#topic+mt_reshape">mt_reshape</a> (such as
<code>subset</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Different methods have been suggested for assessing the bimodality of
mouse-tracking measure distributions, each of which has advantages and
disadvantages (see Freeman &amp; Dale, 2013).
</p>
<p>Hehman et al. (2015) focus on two specific methods (bimodality coefficient
and Hartigan's dip statistic) which are implemented here.
</p>
<p>If <code>methods</code> include <code>BC</code>, the bimodality coefficient is calculated
using the <a href="#topic+bimodality_coefficient">bimodality_coefficient</a> function in this package. According
to Freeman and Ambady (2010), a distribution is considered bimodal if
<code>BC &gt; 0.555</code>.
</p>
<p>Note that MouseTracker (Freeman &amp; Ambady, 2010) standardizes variables within
each subject before computing the BC. This is also possible here using
<a href="#topic+mt_standardize">mt_standardize</a> (see Examples).
</p>
<p>If <code>methods</code> include <code>HDS</code>, Hartigan's dip statistic is calculated
using the <a href="diptest.html#topic+dip.test">dip.test</a> function of the <code>diptest</code> package.
The corresponding p value (computed via linear interpolation) is returned.
</p>
<p>If <code>methods</code> include <code>HDS_sim</code>, Hartigan's dip statistic is
calculated using the <a href="diptest.html#topic+dip.test">dip.test</a> function with the additional
argument <code>simulate.p.values=TRUE</code>. In this case, the p value is computed
from a Monte Carlo simulation of a uniform distribution with B (default:
2000) replicates.
</p>


<h3>Value</h3>

<p>A list of several data.frames. Each data.frame contains the value
returned by the respective method for assessing bimodality (see Details) -
separately per condition (specified in the row dimension) and measure
(specified in the column dimension).
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>References</h3>

<p>Freeman, J. B., &amp; Ambady, N. (2010). MouseTracker: Software for studying
real-time mental processing using a computer mouse-tracking method.
<em>Behavior Research Methods, 42</em>(1), 226-241.
</p>
<p>Freeman, J. B., &amp; Dale, R. (2013).
Assessing bimodality to detect the presence of a dual cognitive process.
<em>Behavior Research Methods, 45</em>(1), 83-97.
</p>
<p>Hehman, E., Stolier, R. M., &amp; Freeman, J. B. (2015). Advanced mouse-tracking
analytic techniques for enhancing psychological science. <em>Group
Processes &amp; Intergroup Relations, 18</em>(3), 384-401.
</p>


<h3>See Also</h3>

<p><a href="#topic+bimodality_coefficient">bimodality_coefficient</a> for more information about the bimodality
coefficient.
</p>
<p><a href="diptest.html#topic+dip.test">dip.test</a> for more information about Hartigan's dip test.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculate measures
mt_example &lt;- mt_measures(mt_example)

# Assess bimodality for untransformed variables
mt_check_bimodality(mt_example,
  use_variables=c("MAD", "AD"))

# Standardize variables per participant
mt_example &lt;- mt_standardize(mt_example,
  use_variables=c("MAD", "AD"), within="subject_nr")
  
# Assess bimodality for standardized variables
mt_check_bimodality(mt_example,
  use_variables=c("z_MAD", "z_AD"))

# Assess bimodality with simulated p values for HDS
mt_check_bimodality(mt_example,
  use_variables=c("z_MAD", "z_AD"),
  methods=c("BC", "HDS_sim"))
 
# Assess bimodality per condition
mt_check_bimodality(mt_example,
  use_variables=c("z_MAD", "z_AD"),
  grouping_variables="Condition")
                    
</code></pre>

<hr>
<h2 id='mt_check_resolution'>Check logging resolution by looking at timestamp differences.</h2><span id='topic+mt_check_resolution'></span>

<h3>Description</h3>

<p><code>mt_check_resolution</code> computes the timestamp differences as a measure of
the logging resolution. It provides various descriptive statistics to check
the logging resolution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_check_resolution(
  data,
  use = "trajectories",
  timestamps = "timestamps",
  desired = NULL,
  digits = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_check_resolution_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_check_resolution_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_check_resolution_+3A_timestamps">timestamps</code></td>
<td>
<p>a character string specifying the trajectory dimension
containing the timestamps.</p>
</td></tr>
<tr><td><code id="mt_check_resolution_+3A_desired">desired</code></td>
<td>
<p>an optional integer. If specified, additional statistics are
computed concerning the (relative) frequencies with which exactly the
desired timestamp difference (with tolerance 1e-12) occurred.</p>
</td></tr>
<tr><td><code id="mt_check_resolution_+3A_digits">digits</code></td>
<td>
<p>an optional integer. If specified, timestamps will be rounded
before performing any checks. Potentially useful if timestamps are recorded
with submillisecond precision.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If mouse-tracking experiments are conducted using the mousetrap plug-ins for
OpenSesame, the logging resolution can be specified explicitly in the
experiment under &quot;Logging resolution&quot;, which corresponds to the delay (in
milliseconds) between recordings of the mouse position. By default, mouse
positions are recorded every 10 ms (corresponding to a 100 Hz sampling rate).
As the actual resolution achieved depends on the performance of the hardware,
it makes sense to check the logging resolution using
<code>mt_check_resolution</code>. Note that delays smaller than the specified delay
typically result from mouse clicks in the experiment.
</p>


<h3>Value</h3>

<p>A list with various descriptive statistics. For convenience, the
relative frequencies are rounded to 4 decimal places.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mt_check_resolution(mt_example)

</code></pre>

<hr>
<h2 id='mt_cluster'>Cluster trajectories.</h2><span id='topic+mt_cluster'></span>

<h3>Description</h3>

<p>Performs trajectory clustering. It first computes distances between each pair
of trajectories and then applies off-the-shelf clustering tools to explain
the resulting dissimilarity matrix using a predefined number of clusters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_cluster(
  data,
  use = "ln_trajectories",
  save_as = "clustering",
  dimensions = c("xpos", "ypos"),
  n_cluster = 5,
  method = "hclust",
  weights = rep(1, length(dimensions)),
  pointwise = TRUE,
  minkowski_p = 2,
  hclust_method = "ward.D",
  kmeans_nstart = 10,
  na_rm = FALSE,
  cluster_output = FALSE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_cluster_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_cluster_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_cluster_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting data should
be stored.</p>
</td></tr>
<tr><td><code id="mt_cluster_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying which trajectory variables
should be used. Can be of length 2 or 3, for two-dimensional or
three-dimensional trajectories respectively.</p>
</td></tr>
<tr><td><code id="mt_cluster_+3A_n_cluster">n_cluster</code></td>
<td>
<p>an integer specifying the number of clusters to estimate.</p>
</td></tr>
<tr><td><code id="mt_cluster_+3A_method">method</code></td>
<td>
<p>character string specifying the clustering procedure. Either
<a href="fastcluster.html#topic+hclust">hclust</a> (the default) or <a href="stats.html#topic+kmeans">kmeans</a>.</p>
</td></tr>
<tr><td><code id="mt_cluster_+3A_weights">weights</code></td>
<td>
<p>numeric vector specifying the relative importance of the
variables specified in <code>dimensions</code>. Defaults to a vector of 1s
implying equal importance. Technically, each variable is rescaled so that
the standard deviation matches the corresponding value in <code>weights</code>.
To use the original variables, set <code>weights = NULL</code>.</p>
</td></tr>
<tr><td><code id="mt_cluster_+3A_pointwise">pointwise</code></td>
<td>
<p>boolean specifying the way in which dissimilarity between
the trajectories is measured. If <code>TRUE</code> (the default),
<code>mt_distmat</code> measures the average dissimilarity and then sums the
results. If <code>FALSE</code>, <code>mt_distmat</code>  measures dissimilarity once
(by treating the various points as independent dimensions). This is only
relevant if <code>method</code> is &quot;hclust&quot;. See <a href="#topic+mt_distmat">mt_distmat</a> for further
details.</p>
</td></tr>
<tr><td><code id="mt_cluster_+3A_minkowski_p">minkowski_p</code></td>
<td>
<p>an integer specifying the distance metric for the cluster
solution. <code>minkowski_p = 1</code> computes the city-block distance,
<code>minkowski_p = 2</code> (the default) computes the Euclidian distance,
<code>minkowski_p = 3</code> the cubic distance, etc. Only relevant if
<code>method</code> is &quot;hclust&quot;. See <a href="#topic+mt_distmat">mt_distmat</a> for further details.</p>
</td></tr>
<tr><td><code id="mt_cluster_+3A_hclust_method">hclust_method</code></td>
<td>
<p>character string specifying the linkage criterion used.
Passed on to the <code>method</code> argument of <a href="stats.html#topic+hclust">hclust</a>. Default is
set to <code>ward.D</code>. Only relevant if <code>method</code> is &quot;hclust&quot;.</p>
</td></tr>
<tr><td><code id="mt_cluster_+3A_kmeans_nstart">kmeans_nstart</code></td>
<td>
<p>integer specifying the number of reruns of the kmeans
procedure. Larger numbers minimize the risk of finding local minima. Passed
on to the <code>nstart</code> argument of <a href="stats.html#topic+kmeans">kmeans</a>. Only relevant if
<code>method</code> is &quot;kmeans&quot;.</p>
</td></tr>
<tr><td><code id="mt_cluster_+3A_na_rm">na_rm</code></td>
<td>
<p>logical specifying whether trajectory points containing NAs
should be removed. Removal is done column-wise. That is, if any trajectory
has a missing value at, e.g., the 10th recorded position, the 10th position
is removed for all trajectories. This is necessary to compute distance
between trajectories.</p>
</td></tr>
<tr><td><code id="mt_cluster_+3A_cluster_output">cluster_output</code></td>
<td>
<p>logical. If <code>FALSE</code> (the default), the mousetrap
data object with the cluster assignments is returned (see Value). If
<code>TRUE</code>, the output of the cluster method (<code>kmeans</code> or
<code>hclust</code>) is returned directly.</p>
</td></tr>
<tr><td><code id="mt_cluster_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_cluster</code> uses off-the-shelf clustering tools, i.e.,
<a href="fastcluster.html#topic+hclust">hclust</a> and <a href="stats.html#topic+kmeans">kmeans</a>, for cluster estimation.
Cluster estimation using <a href="fastcluster.html#topic+hclust">hclust</a> relies on distances
computed by <a href="#topic+mt_distmat">mt_distmat</a>.
</p>
<p>Mouse trajectories often occur in distinct, qualitative types (see Wulff et
al., 2019; Wulff et al., 2022). Common trajectory types are linear
trajectories, mildly and strongly curved trajctories, and single and multiple
change-of-mind trials (see also <a href="#topic+mt_map">mt_map</a>). <code>mt_cluster</code> can tease
these types apart.
</p>
<p><code>mt_cluster</code> uses <a href="fastcluster.html#topic+hclust">hclust</a> or <a href="stats.html#topic+kmeans">kmeans</a> to
explain the distances between every pair of trajectories using a predefined
number of clusters. If method is &quot;hclust&quot;, <code>mt_cluster</code> computes the
dissimiliarity matrix for all trajectory pairs using <a href="#topic+mt_distmat">mt_distmat</a>. If
method is &quot;kmeans&quot;, this is done internally by <a href="stats.html#topic+kmeans">kmeans</a>.
</p>
<p>We recommend setting <code>method</code> to <a href="fastcluster.html#topic+hclust">hclust</a> using
<code>ward.D</code> as the linkage criterion (via <code>hclust_method</code>). Relative
to <a href="stats.html#topic+kmeans">kmeans</a>, the other implemented clustering method, and other
linkage criteria, this setup handles the skewed distribution cluster sizes
and trajectory outliers found in the majority of datasets best.
</p>
<p>For clustering trajectories, it is often useful that the endpoints of all
trajectories share the same direction, e.g., that all trajectories end in the
top-left corner of the coordinate system (<a href="#topic+mt_remap_symmetric">mt_remap_symmetric</a> or
<a href="#topic+mt_align">mt_align</a> can be used to achieve this). Furthermore, it is recommended
to use length normalized trajectories (see <a href="#topic+mt_length_normalize">mt_length_normalize</a>; Wulff
et al., 2019, Wulff et al., 2023).
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) with an additional
<a href="base.html#topic+data.frame">data.frame</a> added to it (by default called <code>clustering</code>) that
contains the cluster assignments. If a trajectory array was provided
directly as <code>data</code>, only the clustering <code>data.frame</code> will be
returned.
</p>


<h3>Author(s)</h3>

<p>Dirk U. Wulff
</p>
<p>Jonas M. B. Haslbeck
</p>


<h3>References</h3>

<p>Wulff, D. U., Haslbeck, J. M. B., Kieslich, P. J., Henninger, F.,
&amp; Schulte-Mecklenbeck, M. (2019). Mouse-tracking: Detecting types in
movement trajectories. In M. Schulte-Mecklenbeck, A. Khberger, &amp; J. G.
Johnson (Eds.), <em>A Handbook of Process Tracing Methods</em> (pp. 131-145).
New York, NY: Routledge.
</p>
<p>Wulff, D. U., Kieslich, P. J., Henninger, F., Haslbeck, J. M. B., &amp;
Schulte-Mecklenbeck, M. (2023). <em>Movement tracking of psychological
processes: A tutorial using mousetrap.</em> PsyArXiv.
<a href="https://doi.org/10.31234/osf.io/v685r">doi:10.31234/osf.io/v685r</a>
</p>
<p>Wulff, D. U., Haslbeck, J. M. B., &amp; Schulte-Mecklenbeck, M. (2022).
<em>Measuring the (dis-)continuous mind: What movement trajectories
reveal about cognition</em>. Manuscript in preparation.
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_distmat">mt_distmat</a> for more information about how the distance matrix is
computed when the hclust method is used.
</p>
<p><a href="#topic+mt_cluster_k">mt_cluster_k</a> for estimating the optimal number of clusters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Length normalize trajectories
KH2017 &lt;- mt_length_normalize(KH2017)

# Cluster trajectories
KH2017 &lt;- mt_cluster(KH2017, use="ln_trajectories")

# Plot clustered trajectories
mt_plot(KH2017,use="ln_trajectories",
  use2="clustering",facet_col="cluster")

</code></pre>

<hr>
<h2 id='mt_cluster_k'>Estimate optimal number of clusters.</h2><span id='topic+mt_cluster_k'></span>

<h3>Description</h3>

<p>Estimates the optimal number of clusters (<code>k</code>) using various methods.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_cluster_k(
  data,
  use = "ln_trajectories",
  dimensions = c("xpos", "ypos"),
  kseq = 2:15,
  compute = c("stability", "gap", "jump", "slope"),
  method = "hclust",
  weights = rep(1, length(dimensions)),
  pointwise = TRUE,
  minkowski_p = 2,
  hclust_method = "ward.D",
  kmeans_nstart = 10,
  n_bootstrap = 10,
  model_based = FALSE,
  n_gap = 10,
  na_rm = FALSE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_cluster_k_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_cluster_k_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_cluster_k_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying which trajectory variables
should be used. Can be of length 2 or 3, for two-dimensional or
three-dimensional trajectories respectively.</p>
</td></tr>
<tr><td><code id="mt_cluster_k_+3A_kseq">kseq</code></td>
<td>
<p>a numeric vector specifying set of candidates for k. Defaults to
2:15, implying that all values of k within that range are compared using
the metrics specified in <code>compute</code>.</p>
</td></tr>
<tr><td><code id="mt_cluster_k_+3A_compute">compute</code></td>
<td>
<p>character vector specifying the to be computed measures. Can
be any subset of <code>c("stability","gap","jump","slope")</code>.</p>
</td></tr>
<tr><td><code id="mt_cluster_k_+3A_method">method</code></td>
<td>
<p>character string specifying the type of clustering procedure
for the stability-based method. Either <code>hclust</code> or <code>kmeans</code>.</p>
</td></tr>
<tr><td><code id="mt_cluster_k_+3A_weights">weights</code></td>
<td>
<p>numeric vector specifying the relative importance of the
variables specified in <code>dimensions</code>. Defaults to a vector of 1s
implying equal importance. Technically, each variable is rescaled so that
the standard deviation matches the corresponding value in <code>weights</code>.
To use the original variables, set <code>weights = NULL</code>.</p>
</td></tr>
<tr><td><code id="mt_cluster_k_+3A_pointwise">pointwise</code></td>
<td>
<p>boolean specifying the way in which dissimilarity between
the trajectories is measured. If <code>TRUE</code> (the default),
<code>mt_distmat</code> measures the average dissimilarity and then sums the
results. If <code>FALSE</code>, <code>mt_distmat</code>  measures dissimilarity once
(by treating the various points as independent dimensions). This is only
relevant if <code>method</code> is &quot;hclust&quot;. See <a href="#topic+mt_distmat">mt_distmat</a> for further
details.</p>
</td></tr>
<tr><td><code id="mt_cluster_k_+3A_minkowski_p">minkowski_p</code></td>
<td>
<p>an integer specifying the distance metric for the cluster
solution. <code>minkowski_p = 1</code> computes the city-block distance,
<code>minkowski_p = 2</code> (the default) computes the Euclidian distance,
<code>minkowski_p = 3</code> the cubic distance, etc. Only relevant if
<code>method</code> is &quot;hclust&quot;. See <a href="#topic+mt_distmat">mt_distmat</a> for further details.</p>
</td></tr>
<tr><td><code id="mt_cluster_k_+3A_hclust_method">hclust_method</code></td>
<td>
<p>character string specifying the linkage criterion used.
Passed on to the <code>method</code> argument of <a href="stats.html#topic+hclust">hclust</a>. Default is
set to <code>ward.D</code>. Only relevant if <code>method</code> is &quot;hclust&quot;.</p>
</td></tr>
<tr><td><code id="mt_cluster_k_+3A_kmeans_nstart">kmeans_nstart</code></td>
<td>
<p>integer specifying the number of reruns of the kmeans
procedure. Larger numbers minimize the risk of finding local minima. Passed
on to the <code>nstart</code> argument of <a href="stats.html#topic+kmeans">kmeans</a>. Only relevant if
<code>method</code> is &quot;kmeans&quot;.</p>
</td></tr>
<tr><td><code id="mt_cluster_k_+3A_n_bootstrap">n_bootstrap</code></td>
<td>
<p>an integer specifying the number of bootstrap comparisons
used by <code>stability</code>. See <a href="cstab.html#topic+cStability">cStability</a>.</p>
</td></tr>
<tr><td><code id="mt_cluster_k_+3A_model_based">model_based</code></td>
<td>
<p>boolean specifying whether the model-based or the
model-free should be used by <code>stability</code>, when method is
<code>kmeans</code>. See <a href="cstab.html#topic+cStability">cStability</a> and Haslbeck &amp; Wulff (2020).</p>
</td></tr>
<tr><td><code id="mt_cluster_k_+3A_n_gap">n_gap</code></td>
<td>
<p>integer specifying the number of simulated datasets used by
<code>gap</code>. See Tibshirani et al. (2001).</p>
</td></tr>
<tr><td><code id="mt_cluster_k_+3A_na_rm">na_rm</code></td>
<td>
<p>logical specifying whether trajectory points containing NAs
should be removed. Removal is done column-wise. That is, if any trajectory
has a missing value at, e.g., the 10th recorded position, the 10th position
is removed for all trajectories. This is necessary to compute distance
between trajectories.</p>
</td></tr>
<tr><td><code id="mt_cluster_k_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_cluster_k</code> estimates the number of clusters (<code>k</code>) using four
commonly used k-selection methods (specified via <code>compute</code>): cluster
stability (<code>stability</code>), the gap statistic (<code>gap</code>), the jump
statistic (<code>jump</code>), and the slope statistic (<code>slope</code>).
</p>
<p>Cluster stability methods select <code>k</code> as the number of clusters for which
the assignment of objects to clusters is most stable across bootstrap
samples. This function implements the model-based and model-free methods
described by Haslbeck &amp; Wulff (2020). See references.
</p>
<p>The remaining three methods select <code>k</code> as the value that optimizes the
gap statistic (Tibshirani, Walther, &amp; Hastie, 2001), the jump statistic
(Sugar &amp; James, 2013), and the slope statistic (Fujita, Takahashi, &amp;
Patriota, 2014), respectively.
</p>
<p>For clustering trajectories, it is often useful that the endpoints of all
trajectories share the same direction, e.g., that all trajectories end in the
top-left corner of the coordinate system (<a href="#topic+mt_remap_symmetric">mt_remap_symmetric</a> or
<a href="#topic+mt_align">mt_align</a> can be used to achieve this). Furthermore, it is recommended
to use length normalized trajectories (see <a href="#topic+mt_length_normalize">mt_length_normalize</a>; Wulff
et al., 2019).
</p>


<h3>Value</h3>

<p>A list containing two lists that store the results of the different
methods. <code>kopt</code> contains the estimated <code>k</code> for each of the
methods specified in <code>compute</code>. <code>paths</code> contains the values for
each <code>k</code> in <code>kseq</code> as computed by each of the methods specified
in <code>compute</code>. The values in <code>kopt</code> are optima for each of the
vectors in <code>paths</code>.
</p>


<h3>Author(s)</h3>

<p>Dirk U. Wulff
</p>
<p>Jonas M. B. Haslbeck
</p>


<h3>References</h3>

<p>Haslbeck, J. M. B., &amp; Wulff, D. U. (2020). Estimating the Number
of Clusters via a Corrected Clustering Instability. <em>Computational
Statistics, 35</em>, 18791894.
</p>
<p>Wulff, D. U., Haslbeck, J. M. B., Kieslich, P. J., Henninger, F., &amp;
Schulte-Mecklenbeck, M. (2019). Mouse-tracking: Detecting types in movement
trajectories. In M. Schulte-Mecklenbeck, A. Khberger, &amp; J. G. Johnson
(Eds.), <em>A Handbook of Process Tracing Methods</em> (pp. 131-145). New
York, NY: Routledge.
</p>
<p>Tibshirani, R., Walther, G., &amp; Hastie, T. (2001). Estimating the number of
clusters in a data set via the gap statistic. <em>Journal of the Royal
Statistical Society: Series B (Statistical Methodology), 63</em>(2), 411-423.
</p>
<p>Sugar, C. A., &amp; James, G. M. (2013). Finding the number of clusters in a
dataset. <em>Journal of the American Statistical Association, 98</em>(463),
750-763.
</p>
<p>Fujita, A., Takahashi, D. Y., &amp; Patriota, A. G. (2014). A non-parametric
method to estimate the number of clusters. <em>Computational Statistics &amp;
Data Analysis, 73</em>, 27-39.
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_distmat">mt_distmat</a> for more information about how the distance matrix
is computed when the hclust method is used.
</p>
<p><a href="#topic+mt_cluster">mt_cluster</a> for performing trajectory clustering with a specified
number of clusters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# Length normalize trajectories
KH2017 &lt;- mt_length_normalize(KH2017)

# Find k
results &lt;- mt_cluster_k(KH2017, use="ln_trajectories")

# Retrieve results
results$kopt
results$paths

## End(Not run)

</code></pre>

<hr>
<h2 id='mt_count'>Count number of observations.</h2><span id='topic+mt_count'></span>

<h3>Description</h3>

<p>Count number of observations per trial for a specified dimension (or several)
in the trajectory array. This is mostly a helper function used by other
functions in this package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_count(data, use = "trajectories", save_as = "measures", dimensions = "xpos")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_count_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_count_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_count_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_count_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying the name of the dimension(s)
that should be used for counting the number of observations. If several
dimensions are specified, the number of complete observations are reported.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>).
</p>
<p>If a data.frame with label specified in <code>save_as</code> (by default
&quot;measures&quot;) already exists, the number of observations (called <code>nobs</code>)
are added as additional column. If not, an additional <a href="base.html#topic+data.frame">data.frame</a>
will be added.
</p>
<p>If a trajectory array was provided directly as <code>data</code>, only a named
character vector will be returned.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Retrieve vector that counts number of observations
mt_count(mt_example$trajectories)

</code></pre>

<hr>
<h2 id='mt_derivatives'>Calculate distance, velocity, and acceleration.</h2><span id='topic+mt_derivatives'></span>

<h3>Description</h3>

<p>Calculate distance traveled, velocity, and acceleration for each logged
position. Distance is calculated as the Euclidean distance between successive
coordinates, and velocity as distance covered per time interval. The
acceleration denotes the difference in absolute velocity, again normalized
per time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_derivatives(
  data,
  use = "trajectories",
  save_as = use,
  dimensions = c("xpos", "ypos"),
  timestamps = "timestamps",
  prefix = "",
  absolute = FALSE,
  return_delta_time = FALSE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_derivatives_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_derivatives_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_derivatives_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_derivatives_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying across which dimension(s)
distances, velocity, and acceleration are calculated. By default
(<code>c("xpos","ypos")</code>), they are calculated across both x and y
dimensions. Alternatively, only one dimension can be specified, e.g.,
<code>"xpos"</code> or <code>"ypos"</code>.</p>
</td></tr>
<tr><td><code id="mt_derivatives_+3A_timestamps">timestamps</code></td>
<td>
<p>a character string specifying the trajectory dimension
containing the timestamps.</p>
</td></tr>
<tr><td><code id="mt_derivatives_+3A_prefix">prefix</code></td>
<td>
<p>an optional character string that is added as a prefix to the
to be created new trajectory dimensions.</p>
</td></tr>
<tr><td><code id="mt_derivatives_+3A_absolute">absolute</code></td>
<td>
<p>logical indicating if absolute values for distances and
velocities should be reported. Only relevant if a single dimension is
specified in <code>dimensions</code> (see Details).</p>
</td></tr>
<tr><td><code id="mt_derivatives_+3A_return_delta_time">return_delta_time</code></td>
<td>
<p>logical indicating if the timestamp differences
should be returned as well (as &quot;delta_time&quot;).</p>
</td></tr>
<tr><td><code id="mt_derivatives_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Distances, velocities and acceleration are computed as follows:
</p>
<p>The first entry in each respective vector is always zero. Each subsequent
entry thus represents the Euclidean distance traveled since the previous
recorded set of coordinates and the velocity with which the movement between
both samples took place. Thus, both distance and velocity represent the
intervening period between the previous sample and the one with which the
numeric value is saved.
</p>
<p>The acceleration, by contrast, denotes the change in absolute velocity
between two adjacent periods. Because of this, it is shifted forward to best
match the actual time point at which the acceleration was measured. Because
there will always be one less value computed for acceleration than for
velocity, the final value in the acceleration vector has been padded with an
NA.
</p>
<p>If the distance is calculated across both horizontal and vertical (x and y)
dimensions, distance and velocity is always positive (or 0). If only one
dimension is used, by default (<code>absolute=FALSE</code>), increases in x (or y)
values result in positive distances and velocity values, decreases in
negative distances and velocity values. If <code>absolute=TRUE</code>, absolute
values for distance and velocity are reported.
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) with Euclidian
distance, velocity, and acceleration added as additional variables to the
trajectory array (called <code>dist</code>, <code>vel</code>, and  <code>acc</code>, if no
prefix was specified). If the trajectory array was provided directly as
<code>data</code>, only the trajectory array will be returned.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_average">mt_average</a> for averaging trajectories across constant time
intervals.
</p>
<p><a href="#topic+mt_measures">mt_measures</a> for calculating per-trial mouse-tracking
measures.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculate derivatives looking at movement
# across both dimensions
mt_example &lt;- mt_derivatives(mt_example)

# Calculate derivatives only looking at movement along x dimension
# reporting absolute values for distance and velocity
mt_example &lt;- mt_derivatives(mt_example,
  dimensions="xpos", absolute=TRUE)

</code></pre>

<hr>
<h2 id='mt_deviations'>Calculate deviations from idealized trajectory.</h2><span id='topic+mt_deviations'></span>

<h3>Description</h3>

<p>Calculate the idealized trajectory and the perpendicular deviations of the
actual trajectory from it for each logged position.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_deviations(
  data,
  use = "trajectories",
  save_as = use,
  dimensions = c("xpos", "ypos"),
  start_ideal = NULL,
  end_ideal = NULL,
  prefix = "",
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_deviations_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_deviations_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_deviations_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_deviations_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying the two dimensions in the
trajectory array that contain the mouse positions. By default
(<code>c("xpos","ypos")</code>), the x- and y-positions are used.</p>
</td></tr>
<tr><td><code id="mt_deviations_+3A_start_ideal">start_ideal</code></td>
<td>
<p>an optional vector specifying the start position (see
Example). If specified, this position will be used as the starting point of
the idealized trajectory (instead of the actual starting point).</p>
</td></tr>
<tr><td><code id="mt_deviations_+3A_end_ideal">end_ideal</code></td>
<td>
<p>an optional vector specifying the end position (see
Example). If specified, this position will be used as the end point of the
idealized trajectory (instead of the actual end point).</p>
</td></tr>
<tr><td><code id="mt_deviations_+3A_prefix">prefix</code></td>
<td>
<p>an optional character string that is added as a prefix to the
to be created new trajectory dimensions.</p>
</td></tr>
<tr><td><code id="mt_deviations_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The idealized trajectory is defined as the straight line connecting the start
and end point of the actual trajectory (e.g., Freeman &amp; Ambady, 2010). The
deviation for each position is calculated as the perpendicular deviation of
the actual trajectory from the idealized trajectory.
</p>
<p>If a deviation occurs above the direct path, this is denoted by a positive
value. If it occurs below the direct path, this is denoted by a negative
value. This assumes that the complete movement in the trial was from bottom
to top (i.e., the end point has a higher y-position than the start points). In
case the movement was from top to bottom, <code>mt_deviations</code>
automatically flips the signs. Note that the second dimension specified in
<code>dimensions</code> is used for determining all this.
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) where the positions
of the idealized trajectory (by default called <code>xpos_ideal</code> and
<code>ypos_ideal</code>) and the perpendicular deviations of the actual
trajectory from the idealized trajectory (by default called
<code>dev_ideal</code>) have been added as additional variables to the trajectory
array. If the trajectory array was provided directly as <code>data</code>, only
the trajectory array will be returned.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>References</h3>

<p>Freeman, J. B., &amp; Ambady, N. (2010). MouseTracker: Software for
studying real-time mental processing using a computer mouse-tracking
method. <em>Behavior Research Methods, 42</em>(1), 226-241.
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_measures">mt_measures</a> for calculating per-trial
mouse-tracking measures.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculate deviations from idealized trajectory
# (straight line connecting the start and end point of each trial)
mt_example &lt;- mt_deviations(mt_example)
  
# Calculate deviations from idealized trajectory with
# constant start and end points across trials
mt_example &lt;- mt_deviations(mt_example,
  start_ideal=c(0,0), end_ideal=c(-665,974))

</code></pre>

<hr>
<h2 id='mt_diffmap'>Creates a difference-heatmap of two trajectory heatmap images.</h2><span id='topic+mt_diffmap'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p><code>mt_diffmap</code> creates a difference-heatmap of the trajectory data using
gaussian smoothing. Note that this function has beta status.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_diffmap(
  x,
  y = NULL,
  condition = NULL,
  use = "trajectories",
  dimensions = c("xpos", "ypos"),
  use2 = "data",
  filename = NULL,
  bounds = NULL,
  xres = 500,
  upscale = 4,
  smooth_radius = 10,
  colors = c("#00863F", "#000000", "#FF1900"),
  n_shades = 1000,
  plot = TRUE,
  ...,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_diffmap_+3A_x">x</code></td>
<td>
<p>an object of class <code>mousetrap</code>), a trajectory object of class
<code>array</code>, or an object of class <code>mt_heatmap_raw</code> (as created by
<a href="#topic+mt_heatmap_raw">mt_heatmap_raw</a>).</p>
</td></tr>
<tr><td><code id="mt_diffmap_+3A_y">y</code></td>
<td>
<p>an object of class <code>mousetrap</code>), a trajectory object of class
<code>array</code>, or an object of class <code>mt_heatmap_raw</code> (as created by
<a href="#topic+mt_heatmap_raw">mt_heatmap_raw</a>). The class of <code>y</code> must match the class of
<code>x</code>, unless <code>y</code> is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="mt_diffmap_+3A_condition">condition</code></td>
<td>
<p>either a character value specifying which variable codes the
two conditions (in <code>x[[use2]]</code>) that should be compared - or a vector
matching the number of trajectories in <code>x[[use]]</code> that has exactly two
levels. <code>mt_diffmap</code> will create a difference-heatmap comparing all
trajectories between the two conditions. If <code>condition</code> is specified,
<code>y</code> will be ignored (unless <code>x</code> and <code>y</code> are of class
<code>heatmap_raw</code>).</p>
</td></tr>
<tr><td><code id="mt_diffmap_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_diffmap_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying the trajectory variables used
to create the heatmap. The first two entries are used as x and
y-coordinates, the third, if provided, will be added as color information.</p>
</td></tr>
<tr><td><code id="mt_diffmap_+3A_use2">use2</code></td>
<td>
<p>an optional character string specifying where the data that
contain the condition variable can be found. Defaults to &quot;data&quot; as
<code>x[["data"]]</code> usually contains all non mouse-tracking trial data.</p>
</td></tr>
<tr><td><code id="mt_diffmap_+3A_filename">filename</code></td>
<td>
<p>a character string giving the name of the file. If
<code>NULL</code> (the default), the R standard device is used for plotting.
Otherwise, the plotting device is inferred from the file extension. Only
supports devices <a href="grDevices.html#topic+png">tiff</a>, <a href="grDevices.html#topic+png">png</a>,
<a href="grDevices.html#topic+pdf">pdf</a>.</p>
</td></tr>
<tr><td><code id="mt_diffmap_+3A_bounds">bounds</code></td>
<td>
<p>numeric vector specifying the corners (xmin, ymin, xmax, ymax)
of the plot region. By default (<code>bounds = NULL</code>), bounds are
determined based on the data input.</p>
</td></tr>
<tr><td><code id="mt_diffmap_+3A_xres">xres</code></td>
<td>
<p>an integer specifying the number of pixels along the x-dimension.
An <code>xres</code> of 1000 implies an 1000*N px, where N is determined so that
the trajectories aspect ratio is preserved (provided the <code>bounds</code> are
unchanged).</p>
</td></tr>
<tr><td><code id="mt_diffmap_+3A_upscale">upscale</code></td>
<td>
<p>a numeric value by which the output resolution of the image is
increased or decreased. Only applies if device is one of tiff, png, or pdf.</p>
</td></tr>
<tr><td><code id="mt_diffmap_+3A_smooth_radius">smooth_radius</code></td>
<td>
<p>a numeric value specifying the standard deviation of the
gaussian smoothing. If zero, smoothing is omitted.</p>
</td></tr>
<tr><td><code id="mt_diffmap_+3A_colors">colors</code></td>
<td>
<p>a character vector specifying the colors used to color
cases of <code>image1 &gt; image2, image1 ~ image2, image1 &lt; image2</code>,
respectively. Note that the colors are used in that specific order.
Defaults to c(&quot;#00863F&quot;, &quot;#FFFFFF&quot;, &quot;#FF1900&quot;) which specifies
a green-black-red color gradient.</p>
</td></tr>
<tr><td><code id="mt_diffmap_+3A_n_shades">n_shades</code></td>
<td>
<p>integer specifying the number of shades for the color
gradient between the first and second, and the second and third color in
<code>colors</code>.</p>
</td></tr>
<tr><td><code id="mt_diffmap_+3A_plot">plot</code></td>
<td>
<p>logical specifying whether resulting image should be plotted
(<code>plot = TRUE</code>, the default). If (<code>plot = FALSE</code>), an object of
class <code>mt_object_raw</code> is returned.</p>
</td></tr>
<tr><td><code id="mt_diffmap_+3A_...">...</code></td>
<td>
<p>arguments passed to <a href="#topic+mt_heatmap_raw">mt_heatmap_raw</a>.</p>
</td></tr>
<tr><td><code id="mt_diffmap_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_diffmap</code> takes two objects that either contain trajectory heatmaps
or from which trajectory heatmaps can be computed. Difference-heatmaps are
constructed analogously to <a href="#topic+mt_heatmap_raw">mt_heatmap_raw</a>.
</p>


<h3>Author(s)</h3>

<p>Dirk U. Wulff
</p>
<p>Pascal J. Kieslich
</p>


<h3>References</h3>

<p>Wulff, D. U., Haslbeck, J. M. B., Kieslich, P. J., Henninger, F.,
&amp; Schulte-Mecklenbeck, M. (2019). Mouse-tracking: Detecting types in
movement trajectories. In M. Schulte-Mecklenbeck, A. Khberger, &amp; J. G.
Johnson (Eds.), <em>A Handbook of Process Tracing Methods</em> (pp. 131-145). New York, NY:
Routledge.
</p>
<p>Kieslich, P. J., Henninger, F., Wulff, D. U., Haslbeck, J. M. B., &amp;
Schulte-Mecklenbeck, M. (2019). Mouse-tracking: A practical guide to
implementation and analysis. In M. Schulte-Mecklenbeck, A. Khberger, &amp; J.
G. Johnson (Eds.), <em>A Handbook of Process Tracing Methods</em> (pp.
111-130). New York, NY: Routledge.
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_heatmap">mt_heatmap</a> and <a href="#topic+mt_heatmap_ggplot">mt_heatmap_ggplot</a> for plotting trajectory
heatmaps.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
mt_diffmap(
  KH2017, condition="Condition",
  xres=400, smooth_radius=6, n_shades=5
)

## End(Not run)

</code></pre>

<hr>
<h2 id='mt_distmat'>Compute distance matrix.</h2><span id='topic+mt_distmat'></span>

<h3>Description</h3>

<p>Computes the point- or vector-wise dissimilarity between each pair of
trajectories.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_distmat(
  data,
  use = "ln_trajectories",
  save_as = "distmat",
  dimensions = c("xpos", "ypos"),
  weights = rep(1, length(dimensions)),
  pointwise = TRUE,
  minkowski_p = 2,
  na_rm = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_distmat_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_distmat_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_distmat_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting data should
be stored.</p>
</td></tr>
<tr><td><code id="mt_distmat_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying which trajectory variables
should be used. Can be of length 2 or 3 for two-dimensional or
three-dimensional trajectories respectively.</p>
</td></tr>
<tr><td><code id="mt_distmat_+3A_weights">weights</code></td>
<td>
<p>numeric vector specifying the relative importance of the
variables specified in <code>dimensions</code>. Defaults to a vector of 1s
implying equal importance. Technically, each variable is rescaled so that
the standard deviation matches the corresponding value in <code>weights</code>.
To use the original variables, set <code>weights = NULL</code>.</p>
</td></tr>
<tr><td><code id="mt_distmat_+3A_pointwise">pointwise</code></td>
<td>
<p>boolean specifying the way dissimilarity between the
trajectories is measured (see Details). If <code>TRUE</code> (the default),
<code>mt_distmat</code> measures the average dissimilarity and then sums the
results. If <code>FALSE</code>, <code>mt_distmat</code>  measures dissimilarity once
(by treating the various points as independent dimensions).</p>
</td></tr>
<tr><td><code id="mt_distmat_+3A_minkowski_p">minkowski_p</code></td>
<td>
<p>an integer specifying the distance metric.
<code>minkowski_p = 1</code> computes the city-block distance, <code>minkowski_p 
  = 2</code> (the default) computes the Euclidian distance, <code>minkowski_p = 3</code>
the cubic distance, etc.</p>
</td></tr>
<tr><td><code id="mt_distmat_+3A_na_rm">na_rm</code></td>
<td>
<p>logical specifying whether trajectory points containing NAs
should be removed. Removal is done column-wise. That is, if any trajectory
has a missing value at, e.g., the 10th recorded position, the 10th position
is removed for all trajectories. This is necessary to compute distance
between trajectories.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_distmat</code> computes point- or vector-wise dissimilarities between
pairs of trajectories. Point-wise dissimilarity refers to computing the
distance metric defined by <code>minkowski_p</code> for every point of the
trajectory and then summing the results. That is, if <code>minkowski_p = 2</code>
the point-wise dissimilarity between two trajectories, each defined by a set
of x and y coordinates, is calculated as <code>sum(sqrt((x_i-x_j)^2 + (y_i-y_j)^2))</code>.
Vector-wise dissimilarity, on the other hand refers to computing the distance
metric once for the entire trajectory. That is, vector-wise dissimilarity is
computed as <code>sqrt(sum((x_i-x_j)^2 + (y_i-y_j)^2))</code>.
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) with an additional
object added (by default called <code>distmat</code>) containing the distance
matrix. If a trajectory array was provided directly as <code>data</code>, only
the distance matrix will be returned.
</p>


<h3>Author(s)</h3>

<p>Dirk U. Wulff
</p>
<p>Jonas M. B. Haslbeck
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Length normalize trajectories
mt_example &lt;- mt_length_normalize(mt_example)
 
# Compute distance matrix
mt_example &lt;- mt_distmat(mt_example, use="ln_trajectories")

</code></pre>

<hr>
<h2 id='mt_example'>A mousetrap data object.</h2><span id='topic+mt_example'></span>

<h3>Description</h3>

<p>A data object of class &quot;mousetrap&quot; with example data created by importing
<a href="#topic+mt_example_raw">mt_example_raw</a> and applying basic post-processing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_example
</code></pre>


<h3>Format</h3>

<p>A mousetrap data object is a <a href="base.html#topic+list">list</a> containing  at least the
following objects:
</p>

<ul>
<li><p><code>data</code>: a <a href="base.html#topic+data.frame">data.frame</a> containing the trial data (from
which the mouse-tracking data columns have been removed). More
information about the content of the trial data in <code>mt_example</code> can
be found in <a href="#topic+mt_example_raw">mt_example_raw</a>. The <a href="base.html#topic+rownames">rownames</a> of <code>data</code>
correspond to the trial identifier. For convenience, the trial identifier
is also stored in an additional column called &quot;mt_id&quot;.
</p>
</li>
<li><p><code>trajectories</code>: an <a href="base.html#topic+array">array</a> containing the raw
mouse-tracking trajectories. The first dimension represents the different
trials and the dimension names (which can be accessed using
<a href="base.html#topic+rownames">rownames</a>) correspond to the trial identifier (the same identifier
that is used as the <code>rownames</code> in <code>data</code>). The second dimension
corresponds to the samples taken over time which are included in
chronological order. The third dimension corresponds to the different
mouse-tracking variables (timestamps, x-positions, y-positions) which are
usually called <code>timestamps</code>, <code>xpos</code>, and <code>ypos</code>. 
</p>
</li></ul>

<p>Some functions in this package (e.g., <a href="#topic+mt_time_normalize">mt_time_normalize</a> and
<a href="#topic+mt_average">mt_average</a>) add additional trajectory arrays (e.g.,
<code>tn_trajectories</code> and <code>av_trajectories</code>) to the mousetrap data
object. Other functions modify the existing arrays (e.g.,
<a href="#topic+mt_derivatives">mt_derivatives</a> adds distance, velocity, and acceleration
to an existing dataset). Finally <a href="#topic+mt_measures">mt_measures</a> adds an
additional data.frame with mouse-tracking measures to it.
</p>


<h3>Details</h3>

<p>The raw data set was imported using <a href="#topic+mt_import_mousetrap">mt_import_mousetrap</a>. Trajectories
were then remapped using <a href="#topic+mt_remap_symmetric">mt_remap_symmetric</a> so that all trajectories
end in the top-left corner and their starting point was aligned using
<a href="#topic+mt_align_start">mt_align_start</a> to a common value (0,0).
</p>

<hr>
<h2 id='mt_example_raw'>Raw mouse-tracking dataset for demonstrations of the mousetrap package</h2><span id='topic+mt_example_raw'></span>

<h3>Description</h3>

<p>An exemplary mouse-tracking dataset collected
<a href="https://osdoc.cogsci.nl/">OpenSesame</a> using the
<a href="https://github.com/pascalkieslich/mousetrap-os">mousetrap plugin</a>
(Kieslich &amp; Henninger, 2017). A preprocessed (as opposed to raw) version of
the same data can be found in <a href="#topic+mt_example">mt_example</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_example_raw
</code></pre>


<h3>Format</h3>

<p>A <a href="base.html#topic+data.frame">data.frame</a> with 38 rows and 19 variables. The data.frame is
based on the combined raw data that were created using
<a href="readbulk.html#topic+read_opensesame">read_opensesame</a> from the
<a href="http://pascalkieslich.github.io/readbulk/">readbulk</a> library. For
ease of use, unnecessary columns were excluded.
</p>
<p>The variables included relate to the item that was presented
(<code>Exemplar</code>), the answer categories (<code>Category1</code> and
<code>Category2</code>), the subject identifier (<code>subject_nr</code>) the subjects'
response (<code>response_get_response</code>), as well as the mouse-tracking
variables (<code>timestamps_get_response</code>, <code>xpos_get_response</code> and
<code>ypos_get_response</code>). Besides, a number of additional variables are
included, e.g., some variables relating to the general settings of the
experiment (e.g., the <code>width</code> and <code>height</code> of the screen in
pixels).
</p>
<p>Each mouse-tracking variable contains a list of values (separated by ', ')
</p>

<ul>
<li><p> one entry for each recorded position of the mouse. The position
coordinates are given in pixels, such that values of zero for both
<code>xpos_get_response</code> and <code>ypos_get_response</code> indicate that the
cursor is located in the center of the screen. Both variables increase in
value as the mouse moves toward the bottom right. Timestamps are given in
milliseconds.
</p>
</li></ul>



<h3>Details</h3>

<p>The data stem from a study based on experiment 1 by Dale et al. (2007). In
this experiment, participants have to assign exemplars (e.g., &quot;shark&quot;) to one
of two categories (e.g., &quot;fish&quot; or &quot;mammal&quot;) by clicking on the button
corresponding to the correct category. All exemplars and categories were
translated to and presented in German.
</p>
<p>Across the 19 trials of the experiment, participants categorized 13 exemplars
that were typical of their category and 6 atypical exemplars for which this
was not the case. For the atypical exemplars (e.g., &quot;whale&quot;), the competing
category (&quot;fish&quot;) was selected to compete with the correct category
(&quot;mammal&quot;). The hypothesis under investigation is whether participants' mouse
trajectories deviate more towards the competing category for the atypical
exemplars, indicating increased conflict between the response options.
</p>
<p>Please note that <code>mt_example_raw</code> should only be used for exploring the
features of the mousetrap package and not for any substantive analysis.
</p>


<h3>References</h3>

<p>Kieslich, P. J., &amp; Henninger, F. (2017). Mousetrap: An
integrated, open-source mouse-tracking package. <em>Behavior Research
Methods, 49</em>(5), 1652-1667. <a href="https://doi.org/10.3758/s13428-017-0900-z">doi:10.3758/s13428-017-0900-z</a>
</p>
<p>Dale, R., Kehoe, C., &amp; Spivey, M. J. (2007). Graded motor responses in the
time course of categorizing atypical exemplars. <em>Memory &amp; Cognition,
35</em>(1), 15-28. <a href="https://doi.org/10.3758/BF03195938">doi:10.3758/BF03195938</a>
</p>

<hr>
<h2 id='mt_exclude_finish'>Exclude phase without mouse movement at end of trial.</h2><span id='topic+mt_exclude_finish'></span>

<h3>Description</h3>

<p>Exclude a potential phase at the end of a trial where the mouse was not moved. The
corresponding samples (x- and y-positions and timestamps) in the trajectory
data will be removed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_exclude_finish(
  data,
  use = "trajectories",
  save_as = use,
  dimensions = c("xpos", "ypos"),
  timestamps = "timestamps",
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_exclude_finish_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_exclude_finish_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_exclude_finish_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_exclude_finish_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying the dimensions in the
trajectory array that contain the mouse positions.</p>
</td></tr>
<tr><td><code id="mt_exclude_finish_+3A_timestamps">timestamps</code></td>
<td>
<p>a character string specifying the trajectory dimension
containing the timestamps.</p>
</td></tr>
<tr><td><code id="mt_exclude_finish_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_exclude_finish</code> removes all samples (except the first) at the end of
the trial during which the mouse was not moved compared to its final
position. It returns only x- and y-positions as well as timestamps.
</p>
<p>Please note that this operation may result in changes in several
mouse-tracking measures, for example, the response time (RT).
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) from which a
potential phase without mouse movement at the end of the trial was removed.
If the trajectory array was provided directly as <code>data</code>, only the
trajectory array will be returned.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Dirk U. Wulff
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_exclude_initiation">mt_exclude_initiation</a> for removing a potential initial phase
without mouse movement.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mt_example &lt;- mt_exclude_finish(mt_example,
  save_as="mod_trajectories")

</code></pre>

<hr>
<h2 id='mt_exclude_initiation'>Exclude initial phase without mouse movement.</h2><span id='topic+mt_exclude_initiation'></span>

<h3>Description</h3>

<p>Exclude the initial phase in a trial where the mouse was not moved. The
corresponding samples (x- and y-positions and timestamps) in the trajectory
data will be removed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_exclude_initiation(
  data,
  use = "trajectories",
  save_as = use,
  dimensions = c("xpos", "ypos"),
  timestamps = "timestamps",
  reset_timestamps = TRUE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_exclude_initiation_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_exclude_initiation_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_exclude_initiation_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_exclude_initiation_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying the dimensions in the
trajectory array that contain the mouse positions.</p>
</td></tr>
<tr><td><code id="mt_exclude_initiation_+3A_timestamps">timestamps</code></td>
<td>
<p>a character string specifying the trajectory dimension
containing the timestamps.</p>
</td></tr>
<tr><td><code id="mt_exclude_initiation_+3A_reset_timestamps">reset_timestamps</code></td>
<td>
<p>logical indicating whether the timestamps should be
reset after removing the initial phase without movement (see Details).</p>
</td></tr>
<tr><td><code id="mt_exclude_initiation_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_exclude_initiation</code> removes all samples (x- and y-positions as well
as timestamps) at the beginning of the trial during which the mouse was not
moved from its initial position. The last unchanged sample is retained in the
data.
</p>
<p>If <code>reset_timestamps == TRUE</code> (the default), it subtracts the last
timestamp before a movement occurs from all timestamps , so that the series
of timestamps once more begin with zero. If the argument is set to
<code>FALSE</code>, the values of the timestamps are unchanged.
</p>
<p>Please note that resetting the timestamps will result in changes in several
mouse-tracking measures, notably those which report timestamps (e.g.,
<code>MAD_time</code>). Typically, however, these changes are desired when using
this function.
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) from which the
initial phase without mouse movement was removed. If the trajectory array
was provided directly as <code>data</code>, only the trajectory array will be
returned.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_measures">mt_measures</a> for calculating the initiation time.
</p>
<p><a href="#topic+mt_exclude_finish">mt_exclude_finish</a> for removing a potential phase without mouse
movement at the end of the trial.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mt_example &lt;- mt_exclude_initiation(mt_example,
  save_as="mod_trajectories")

</code></pre>

<hr>
<h2 id='mt_export_long'>Export mouse-tracking data.</h2><span id='topic+mt_export_long'></span><span id='topic+mt_export_wide'></span>

<h3>Description</h3>

<p><code>mt_export_long</code> and <code>mt_export_wide</code> can be used for exporting
mouse-tracking data from a mousetrap data object in long or wide format. If
desired, additional data (stored in <code>data[[use2]]</code>) can be merged with
the trajectory data before export. <code>mt_export_long</code> and
<code>mt_export_wide</code> are wrapper functions for <a href="#topic+mt_reshape">mt_reshape</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_export_long(
  data,
  use = "trajectories",
  use_variables = NULL,
  use2 = "data",
  use2_variables = NULL,
  ...
)

mt_export_wide(
  data,
  use = "trajectories",
  use_variables = NULL,
  use2 = "data",
  use2_variables = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_export_long_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_export_long_+3A_use">use</code></td>
<td>
<p>a character string specifying which data should be exported. The
corresponding data are selected from data using <code>data[[use]]</code>.
Usually, this value corresponds to either &quot;trajectories&quot; or
&quot;tn_trajectories&quot;, depending on whether the raw or the time-normalized
trajectories should be exported.</p>
</td></tr>
<tr><td><code id="mt_export_long_+3A_use_variables">use_variables</code></td>
<td>
<p>a character vector specifying which mouse-tracking
variables should be exported. This corresponds to the labels of the
trajectory array dimensions. If unspecified, all variables will be
exported.</p>
</td></tr>
<tr><td><code id="mt_export_long_+3A_use2">use2</code></td>
<td>
<p>an optional character string specifying where the other trial
data can be found. Defaults to &quot;data&quot; as <code>data[["data"]]</code> usually
contains all non mouse-tracking trial data. Alternatively, a data.frame can
be provided directly.</p>
</td></tr>
<tr><td><code id="mt_export_long_+3A_use2_variables">use2_variables</code></td>
<td>
<p>an optional character string (or vector) specifying the
variables (in <code>data[[use2]]</code>) that should be merged with the data.</p>
</td></tr>
<tr><td><code id="mt_export_long_+3A_...">...</code></td>
<td>
<p>additional arguments passed on to <a href="#topic+mt_reshape">mt_reshape</a> (such as
<code>subset</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="base.html#topic+data.frame">data.frame</a> containing the exported data.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>mt_export_long()</code>: Export mouse-tracking data in long format
</p>
</li>
<li> <p><code>mt_export_wide()</code>: Export mouse-tracking data in wide format
</p>
</li></ul>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_import_long">mt_import_long</a> for importing mouse-tracking data saved in a
long format.
</p>
<p><a href="#topic+mt_import_wide">mt_import_wide</a> for importing mouse-tracking data saved in a wide
format.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Export data in long format
# (and include information about condition and subject_nr)
mt_data_long &lt;- mt_export_long(mt_example,
  use2_variables=c("subject_nr","Condition"))

# Export data in wide format
# (and include information about condition and subject_nr)
mt_data_wide &lt;- mt_export_wide(mt_example,
  use2_variables=c("subject_nr","Condition"))

</code></pre>

<hr>
<h2 id='mt_heatmap'>Plot trajectory heatmap.</h2><span id='topic+mt_heatmap'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p><code>mt_heatmap</code> plots high resolution raw trajectory maps. Note that this
function has beta status.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_heatmap(
  x,
  use = "trajectories",
  dimensions = c("xpos", "ypos"),
  filename = NULL,
  ...,
  upscale = 1,
  plot_dims = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_heatmap_+3A_x">x</code></td>
<td>
<p>usually an object of class <code>mousetrap</code>. Alternatively, a
trajectory array or an object of class <code>mt_heatmap_raw</code>.</p>
</td></tr>
<tr><td><code id="mt_heatmap_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_heatmap_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying the trajectory variables used
to create the heatmap. The first two entries are used as x and
y-coordinates, the third, if provided, will be added as color information.</p>
</td></tr>
<tr><td><code id="mt_heatmap_+3A_filename">filename</code></td>
<td>
<p>a character string giving the name of the file. If
<code>NULL</code> (the default), the R standard device is used for plotting.
Otherwise, the plotting device is inferred from the file extension. Only
supports devices <a href="grDevices.html#topic+png">tiff</a>, <a href="grDevices.html#topic+png">png</a>,
<a href="grDevices.html#topic+pdf">pdf</a>.</p>
</td></tr>
<tr><td><code id="mt_heatmap_+3A_...">...</code></td>
<td>
<p>arguments passed to <a href="#topic+mt_heatmap_raw">mt_heatmap_raw</a>.</p>
</td></tr>
<tr><td><code id="mt_heatmap_+3A_upscale">upscale</code></td>
<td>
<p>a numeric value by which the output resolution of the image is
increased or decreased. Only applies if device is one of tiff, png, or pdf.</p>
</td></tr>
<tr><td><code id="mt_heatmap_+3A_plot_dims">plot_dims</code></td>
<td>
<p>adds the coordinates of the four image corners to the plot.
Helps setting <code>bounds</code>.</p>
</td></tr>
<tr><td><code id="mt_heatmap_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_heatmap</code> wraps <a href="#topic+mt_heatmap_raw">mt_heatmap_raw</a> and provides direct plotting
output in <a href="grDevices.html#topic+png">tiff</a>, <a href="grDevices.html#topic+png">png</a>,
<a href="grDevices.html#topic+pdf">pdf</a>, or R's default window output. For further details on
how the trajectory heatmaps are constructed, see <a href="#topic+mt_heatmap_raw">mt_heatmap_raw</a>.
</p>


<h3>Author(s)</h3>

<p>Dirk U. Wulff
</p>


<h3>References</h3>

<p>Wulff, D. U., Haslbeck, J. M. B., Kieslich, P. J., Henninger, F.,
&amp; Schulte-Mecklenbeck, M. (2019). Mouse-tracking: Detecting types in
movement trajectories. In M. Schulte-Mecklenbeck, A. Khberger, &amp; J. G.
Johnson (Eds.), <em>A Handbook of Process Tracing Methods</em> (pp. 131-145). New York, NY:
Routledge.
</p>
<p>Kieslich, P. J., Henninger, F., Wulff, D. U., Haslbeck, J. M. B., &amp;
Schulte-Mecklenbeck, M. (2019). Mouse-tracking: A practical guide to
implementation and analysis. In M. Schulte-Mecklenbeck, A. Khberger, &amp; J.
G. Johnson (Eds.), <em>A Handbook of Process Tracing Methods</em> (pp.
111-130). New York, NY: Routledge.
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_heatmap_ggplot">mt_heatmap_ggplot</a> for plotting a trajectory heatmap using
ggplot2.
</p>
<p><a href="#topic+mt_diffmap">mt_diffmap</a> for plotting trajectory difference-heatmaps.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
mt_heatmap(KH2017, xres=500, n_shades=5, mean_image=0.2)

## End(Not run)



</code></pre>

<hr>
<h2 id='mt_heatmap_ggplot'>Plot trajectory heatmap using ggplot.</h2><span id='topic+mt_heatmap_ggplot'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p><code>mt_heatmap_ggplot</code> plots high resolution raw trajectory maps. Note that
this function has beta status.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_heatmap_ggplot(
  data,
  use = "trajectories",
  dimensions = c("xpos", "ypos"),
  use2 = "data",
  facet_row = NULL,
  facet_col = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_heatmap_ggplot_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_heatmap_ggplot_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_heatmap_ggplot_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying the trajectory variables used
to create the heatmap. The first two entries are used as x and
y-coordinates, the third, if provided, will be added as color information.</p>
</td></tr>
<tr><td><code id="mt_heatmap_ggplot_+3A_use2">use2</code></td>
<td>
<p>an optional character string specifying where the data that
contain the variables used for faceting can be found (in case these
arguments are specified). Defaults to &quot;data&quot; as <code>data[["data"]]</code>
usually contains all non mouse-tracking trial data.</p>
</td></tr>
<tr><td><code id="mt_heatmap_ggplot_+3A_facet_row">facet_row</code></td>
<td>
<p>an optional character string specifying a variable in
<code>data[[use2]]</code> that should be used for (row-wise) faceting.</p>
</td></tr>
<tr><td><code id="mt_heatmap_ggplot_+3A_facet_col">facet_col</code></td>
<td>
<p>an optional character string specifying a variable in
<code>data[[use2]]</code> that should be used for (column-wise) faceting.</p>
</td></tr>
<tr><td><code id="mt_heatmap_ggplot_+3A_...">...</code></td>
<td>
<p>arguments passed to <a href="#topic+mt_heatmap_raw">mt_heatmap_raw</a>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_heatmap_ggplot</code> wraps <a href="#topic+mt_heatmap_raw">mt_heatmap_raw</a> and returns a ggplot
object containing the plot. In contrast to <code>mt_heatmap_plot</code> plots
created by <code>mt_heatmap_ggplot</code> can be extended using ggplot's <code>+</code>
operator. For further details on how the trajectory heatmaps are constructed,
see <a href="#topic+mt_heatmap_raw">mt_heatmap_raw</a>.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>
<p>Dirk U. Wulff
</p>


<h3>References</h3>

<p>Wulff, D. U., Haslbeck, J. M. B., Kieslich, P. J., Henninger, F.,
&amp; Schulte-Mecklenbeck, M. (2019). Mouse-tracking: Detecting types in
movement trajectories. In M. Schulte-Mecklenbeck, A. Khberger, &amp; J. G.
Johnson (Eds.), <em>A Handbook of Process Tracing Methods</em> (pp. 131-145). New York, NY:
Routledge.
</p>
<p>Kieslich, P. J., Henninger, F., Wulff, D. U., Haslbeck, J. M. B., &amp;
Schulte-Mecklenbeck, M. (2019). Mouse-tracking: A practical guide to
implementation and analysis. In M. Schulte-Mecklenbeck, A. Khberger, &amp; J.
G. Johnson (Eds.), <em>A Handbook of Process Tracing Methods</em> (pp.
111-130). New York, NY: Routledge.
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_heatmap">mt_heatmap</a> for plotting a trajectory heatmap using base
plots.
</p>
<p><a href="#topic+mt_diffmap">mt_diffmap</a> for plotting trajectory difference-heatmaps.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
mt_heatmap_ggplot(KH2017, xres=500, n_shades=5, mean_image=0.2)

## End(Not run)

</code></pre>

<hr>
<h2 id='mt_heatmap_raw'>Creates high-resolution heatmap of trajectory data.</h2><span id='topic+mt_heatmap_raw'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p><code>mt_heatmap_raw</code> creates a high-resolution heatmap image of the
trajectory data using gaussian smoothing. Note that this function has beta
status.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_heatmap_raw(
  data,
  use = "trajectories",
  dimensions = c("xpos", "ypos"),
  variable = NULL,
  bounds = NULL,
  xres = 1000,
  upsample = 1,
  norm = FALSE,
  colors = c("black", "blue", "white"),
  n_shades = c(1000, 1000),
  smooth_radius = 1.5,
  low_pass = 200,
  auto_enhance = TRUE,
  mean_image = 0.15,
  mean_color = 0.25,
  aggregate_lwd = 0,
  aggregate_col = "black",
  n_trajectories = NULL,
  seed = NULL,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_heatmap_raw_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying the trajectory variables used
to create the heatmap. The first two entries are used as x and
y-coordinates, the third, if provided, will be added as color information.</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_variable">variable</code></td>
<td>
<p>boolean or numeric vector matching the number of trajectories
that if provided will be used as color information. <code>variable</code> is only
considered when <code>length(dimensions) &lt; 3</code>.</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_bounds">bounds</code></td>
<td>
<p>numeric vector specifying the corners (xmin, ymin, xmax, ymax)
of the plot region. By default (<code>bounds = NULL</code>), bounds are
determined based on the data input.</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_xres">xres</code></td>
<td>
<p>an integer specifying the number of pixels along the x-dimension.
An <code>xres</code> of 1000 implies an 1000*N px, where N is determined so that
the trajectories aspect ratio is preserved (provided the <code>bounds</code> are
unchanged).</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_upsample">upsample</code></td>
<td>
<p>a numeric value by which the number of points used to
represent individual trajectories are increased or decreased. Values of
smaller than one will improve speed but also introduce a certain level of
granularity.</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_norm">norm</code></td>
<td>
<p>a logical specifying whether the data should be warped into
standard space. If <code>norm = TRUE</code>, this overrules <code>bounds</code>.</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_colors">colors</code></td>
<td>
<p>a character vector specifying two or three colors used to color
the background, the foreground (trajectories), and the values of a third
dimension (if specified).</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_n_shades">n_shades</code></td>
<td>
<p>an integer specifying the number of shades for the color
gradient between the first and second, and the second and third color in
<code>colors</code>.</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_smooth_radius">smooth_radius</code></td>
<td>
<p>a numeric value specifying the standard deviation of the
gaussian smoothing. If zero, smoothing is omitted.</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_low_pass">low_pass</code></td>
<td>
<p>an integer specifying the allowed number of counts per pixel.
This arguments limits the maximum pixel color intensity.</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_auto_enhance">auto_enhance</code></td>
<td>
<p>boolean. If <code>TRUE</code> (the default), the image is
adjusted so that the mean color intensity matches <code>mean_image</code> and
<code>mean_color</code>.</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_mean_image">mean_image</code></td>
<td>
<p>a numeric value between 0 and 1 specifying the average
foreground color intensity across the entire image. Defaults to 0.1.</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_mean_color">mean_color</code></td>
<td>
<p>a numeric value between 0 and 1 specifying the average
third dimension's color intensity across the entire image. Defaults to 0.1.
Only relevant if a third dimension is specified in <code>colors</code>.</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_aggregate_lwd">aggregate_lwd</code></td>
<td>
<p>an integer specifying the width of the aggregate
trajectory. If <code>aggregate_lwd</code> is 0 (the default), the aggregate
trajectory is omitted.</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_aggregate_col">aggregate_col</code></td>
<td>
<p>a character value specifying the color of the aggregate
trajectory.</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_n_trajectories">n_trajectories</code></td>
<td>
<p>an optional integer specifying the number of
trajectories used to create the image. By default, all trajectories are
used. If <code>n_trajectories</code> is specified and smaller than the number of
trajectories in the trajectory array, then <code>n_trajectories</code> are
randomly sampled.</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_seed">seed</code></td>
<td>
<p>an optional integer specifying the seed used for the trajectory
sampling.</p>
</td></tr>
<tr><td><code id="mt_heatmap_raw_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To create the image, <code>mt_heatmap_raw</code> takes the following steps. First,
the function maps the trajectory points to a pixel space with x ranging from
1 to xres and y ranging from 1 to xres divided by the ratio of x and y's
value range. Second, the function counts and normalizes the number of
trajectory points occupying each of the x,y-pixels to yield image intensities
between 0 and 1. Third, the function smooths the image using an approximative
guassian approach governed by <code>smooth_radius</code>, which controls the
dispersion of the gaussian smoothing. Fourth, the function automatically
enhances the image (unless <code>auto_enhance = FALSE</code>) using a non-linear
transformation in order to yield a desired <code>mean_image</code> intensity.
Fifth, the function translates the image intensity into color using the
colors specified in <code>colors</code>. Finally, the function returns the image
data in a long format containing the x, y, and color information.
</p>
<p><code>mt_heatmap_raw</code> also offers the possibility to overlay the heatmap with
an additional variable, such as for instance velocity, so that both the
density of mouse trajectories and the information of the additional variable
are visible. In order to do this, specify a third variable label in
<code>dimensions</code> and control its appearance using the <code>color</code> and
<code>mean_color</code> arguments.
</p>


<h3>Value</h3>

<p>An object of class <code>mt_object_raw</code> containing in a matrix format
the image's pixel information, the aggregate trajectory, and the colors.
</p>


<h3>Author(s)</h3>

<p>Dirk U. Wulff
</p>


<h3>References</h3>

<p>Wulff, D. U., Haslbeck, J. M. B., Kieslich, P. J., Henninger, F.,
&amp; Schulte-Mecklenbeck, M. (2019). Mouse-tracking: Detecting types in
movement trajectories. In M. Schulte-Mecklenbeck, A. Khberger, &amp; J. G.
Johnson (Eds.), <em>A Handbook of Process Tracing Methods</em> (pp. 131-145). New York, NY:
Routledge.
</p>
<p>Kieslich, P. J., Henninger, F., Wulff, D. U., Haslbeck, J. M. B., &amp;
Schulte-Mecklenbeck, M. (2019). Mouse-tracking: A practical guide to
implementation and analysis. In M. Schulte-Mecklenbeck, A. Khberger, &amp; J.
G. Johnson (Eds.), <em>A Handbook of Process Tracing Methods</em> (pp.
111-130). New York, NY: Routledge.
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_heatmap">mt_heatmap</a> and  <a href="#topic+mt_heatmap_ggplot">mt_heatmap_ggplot</a> for plotting
trajectory heatmaps.
</p>
<p><a href="#topic+mt_diffmap">mt_diffmap</a> for plotting trajectory difference-heatmaps.
</p>

<hr>
<h2 id='mt_import_long'>Import mouse-tracking data saved in long format.</h2><span id='topic+mt_import_long'></span>

<h3>Description</h3>

<p><code>mt_import_long</code> receives a data.frame in which mouse-tracking data are
stored in long format, i.e., where one row contains the logging data
(timestamp, x- and y-position etc.) at one specific point in the trial. This
is, for example, the case when exporting the trajectory data from the
mousetrap package using <a href="#topic+mt_export_long">mt_export_long</a>. From this data.frame,
<code>mt_import_long</code> creates a mousetrap data object containing the
trajectories and additional data for further processing within the mousetrap
package. Specifically, it returns a list that includes the trajectory data as
an array (called <code>trajectories</code>), and all other data as a data.frame
(called <code>data</code>). This data structure can then be passed on to other
functions within this package (see <a href="#topic+mousetrap">mousetrap</a> for an overview).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_import_long(
  raw_data,
  xpos_label = "xpos",
  ypos_label = "ypos",
  zpos_label = NULL,
  timestamps_label = "timestamps",
  add_labels = NULL,
  mt_id_label = "mt_id",
  mt_seq_label = "mt_seq",
  reset_timestamps = TRUE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_import_long_+3A_raw_data">raw_data</code></td>
<td>
<p>a data.frame in long format, containing the raw data.</p>
</td></tr>
<tr><td><code id="mt_import_long_+3A_xpos_label">xpos_label</code></td>
<td>
<p>a character string specifying the column containing the
x-positions.</p>
</td></tr>
<tr><td><code id="mt_import_long_+3A_ypos_label">ypos_label</code></td>
<td>
<p>a character string specifying the column containing the
y-positions.</p>
</td></tr>
<tr><td><code id="mt_import_long_+3A_zpos_label">zpos_label</code></td>
<td>
<p>an optional character string specifying the column
containing the z-positions.</p>
</td></tr>
<tr><td><code id="mt_import_long_+3A_timestamps_label">timestamps_label</code></td>
<td>
<p>a character string specifying the column containing
the timestamps. If no timestamps are found in the data, a timestamps
variable with increasing integers will be created (assuming equidistant
time steps).</p>
</td></tr>
<tr><td><code id="mt_import_long_+3A_add_labels">add_labels</code></td>
<td>
<p>a character vector specifying columns containing additional
mouse-tracking variables.</p>
</td></tr>
<tr><td><code id="mt_import_long_+3A_mt_id_label">mt_id_label</code></td>
<td>
<p>a character string (or vector) specifying the name of the
column that provides a unique ID for every trial (the trial identifier). If
more than one variable name is provided, a new ID variable will be created
by combining the values of each variable. The trial identifier will be set
as the <a href="base.html#topic+rownames">rownames</a> of the resulting trajectories and trial data, and
additionally be stored in the column &quot;mt_id&quot; in the trial data.</p>
</td></tr>
<tr><td><code id="mt_import_long_+3A_mt_seq_label">mt_seq_label</code></td>
<td>
<p>a character string specifying the column that indicates
the order of the logged coordinates within a trial. If no column of the
specified name is found in the data.frame, the coordinates will be imported
in the order in which they were stored in <code>raw_data</code>.</p>
</td></tr>
<tr><td><code id="mt_import_long_+3A_reset_timestamps">reset_timestamps</code></td>
<td>
<p>logical indicating if the first timestamp should be
subtracted from all timestamps within a trial. Default is <code>TRUE</code> as it
is recommended for all following analyses in mousetrap.</p>
</td></tr>
<tr><td><code id="mt_import_long_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The default arguments are set so that no adjustments have to be made when
importing a data.frame that was created using <a href="#topic+mt_export_long">mt_export_long</a>.
</p>
<p>The coordinates are ordered according to the values in the column provided in
the <code>mt_seq_label</code> parameter (<code>mt_seq</code> by default). If the
corresponding column does not exist, the coordinates will be imported in the
order in which they were stored in the raw_data.
</p>
<p>If no timestamps are found in the data, <code>mt_import_long</code> automatically
creates a timestamps variable with increasing integers (starting with 0)
assuming equally spaced sampling intervals.
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>).
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_import_mousetrap">mt_import_mousetrap</a> and <a href="#topic+mt_import_wide">mt_import_wide</a> for importing
mouse-tracking data in other formats.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create data in long format for test purposes
mt_data_long &lt;- mt_export_long(mt_example,
  use2_variables=c("subject_nr","Condition"))

# Import the data using mt_import_long
mt_data &lt;- mt_import_long(mt_data_long)


## Not run: 
# Import a hypothetical dataset that contains the
# custom mouse-tracking variables angle and velocity
mt_data &lt;- mt_import_long(exp_data,
  add_labels= c("angle", "velocity"))

## End(Not run)

</code></pre>

<hr>
<h2 id='mt_import_mousetrap'>Import mouse-tracking data recorded using the mousetrap plug-ins in OpenSesame.</h2><span id='topic+mt_import_mousetrap'></span>

<h3>Description</h3>

<p><code>mt_import_mousetrap</code> accepts a data.frame of (merged) raw data from a
mouse-tracking experiment implemented in
<a href="https://osdoc.cogsci.nl/">OpenSesame</a> using the
<a href="https://github.com/pascalkieslich/mousetrap-os">mousetrap plugin</a>
(Kieslich &amp; Henninger, 2017). From this data.frame,
<code>mt_import_mousetrap</code> creates a mousetrap data object containing the
trajectories and additional data for further processing within the mousetrap
package. Specifically, it returns a list that includes the trajectory data as
an array (called <code>trajectories</code>), and all other data as a data.frame
(called <code>data</code>). This data structure can then be passed on to other
functions within this package (see <a href="#topic+mousetrap">mousetrap</a> for an overview).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_import_mousetrap(
  raw_data,
  xpos_label = "xpos",
  ypos_label = "ypos",
  timestamps_label = "timestamps",
  mt_id_label = NULL,
  split = ",",
  duplicates = "remove_first",
  unordered = "warn",
  reset_timestamps = TRUE,
  digits = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_import_mousetrap_+3A_raw_data">raw_data</code></td>
<td>
<p>a data.frame containing the raw data.</p>
</td></tr>
<tr><td><code id="mt_import_mousetrap_+3A_xpos_label">xpos_label</code></td>
<td>
<p>a character string specifying the name of the column(s) in
which the x-positions are stored (see Details).</p>
</td></tr>
<tr><td><code id="mt_import_mousetrap_+3A_ypos_label">ypos_label</code></td>
<td>
<p>a character string specifying the name of the column(s) in
which the y-positions are stored (see Details).</p>
</td></tr>
<tr><td><code id="mt_import_mousetrap_+3A_timestamps_label">timestamps_label</code></td>
<td>
<p>a character string specifying the name of the column(s)
in which the timestamps are stored (see Details).</p>
</td></tr>
<tr><td><code id="mt_import_mousetrap_+3A_mt_id_label">mt_id_label</code></td>
<td>
<p>an optional character string (or vector) specifying the
name of the column that provides a unique ID for every trial (the trial
identifier). If unspecified (the default), an ID variable will be
generated. If more than one variable name is provided, a new ID variable
will be created by combining the values of each variable. The trial
identifier will be set as the <a href="base.html#topic+rownames">rownames</a> of the resulting trajectories
and trial data, and additionally be stored in the column &quot;mt_id&quot; in the
trial data.</p>
</td></tr>
<tr><td><code id="mt_import_mousetrap_+3A_split">split</code></td>
<td>
<p>a character string indicating how the different timestamps and
coordinates within a trial are separated.</p>
</td></tr>
<tr><td><code id="mt_import_mousetrap_+3A_duplicates">duplicates</code></td>
<td>
<p>a character string indicating how duplicate timestamps
within a trial are handled (see Details).</p>
</td></tr>
<tr><td><code id="mt_import_mousetrap_+3A_unordered">unordered</code></td>
<td>
<p>a character string indicating how unordered (i.e.,
non-monotonically increasing) timestamps within a trial are handled (see
Details).</p>
</td></tr>
<tr><td><code id="mt_import_mousetrap_+3A_reset_timestamps">reset_timestamps</code></td>
<td>
<p>logical indicating if the first timestamp should be
subtracted from all timestamps within a trial. Default is <code>TRUE</code> as it
is recommended for all following analyses in mousetrap.</p>
</td></tr>
<tr><td><code id="mt_import_mousetrap_+3A_digits">digits</code></td>
<td>
<p>an optional integer. If specified, timestamps will be rounded.
Potentially useful if timestamps are recorded with submillisecond
precision.</p>
</td></tr>
<tr><td><code id="mt_import_mousetrap_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When working with mouse-tracking data that were recorded using the mousetrap
plug-ins for OpenSesame, usually only the <code>raw_data</code> need to be
provided. All other arguments have sensible defaults.
</p>
<p>If the relevant timestamps, x-positions, and y-positions are each stored in
one variable, a character string specifying (parts of) the respective column
name needs to be provided. In this case, the column names are extracted using
<a href="base.html#topic+grep">grep</a> to find the column that starts with the respective character
string (in OpenSesame these will typically contain the name of the item that
was used to record them, such as <code>xpos_get_response</code>). This means that
the exact column names do not have to be provided - as long as only one
column starts with the respective character string (otherwise, the exact
column names have to be provided).
</p>
<p>If several variables contain the timestamps, x-positions, and y-positions
within a trial (e.g., <code>xpos_part1</code> and <code>xpos_part2</code>), a vector of
the exact column names has to be provided (e.g.,
<code>xpos_label=c("xpos_part1","xpos_part2"))</code>. <code>mt_import_mousetrap</code>
will then merge all raw data in the order with which the variable labels have
been specified. If one variable contains NAs or an empty string in a trial,
these cases will be ignored (this covers the special case that, e.g.,
<code>xpos_part2</code> is only relevant for some trials and contains NAs in the
other trials).
</p>
<p><code>duplicates</code> allows for different options to handle duplicate timestamps
within a trial: </p>

<ul>
<li><p><code>remove_first</code>: First timestamp and corresponding x-/y-positions
are removed (the default).
</p>
</li>
<li><p><code>remove_last</code>: Last timestamp and corresponding x-/y-positions are
removed.
</p>
</li>
<li><p><code>ignore</code>: Duplicates are kept. </p>
</li></ul>

<p><code>unordered</code> allows for different options to handle unordered, that is,
non-monotonically increasing timestamps within a trial: </p>

<ul>
<li><p><code>warn</code>: A warning is issued if unordered timestamps are
encountered in a trial (the default).
</p>
</li>
<li><p><code>remove</code>: Unordered timestamps within a trial are removed. This
means that any timestamp that is smaller than its predecessor will be removed
along with the corresponding x-/y-position.
</p>
</li>
<li><p><code>ignore</code>: Unordered timestamps are kept and no warning is issued. </p>
</li></ul>



<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>).
</p>
<p>If mouse-tracking data were recorded using the mousetrap plug-ins for
OpenSesame, the unit of the timestamps is milliseconds.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>References</h3>

<p>Kieslich, P. J., &amp; Henninger, F. (2017). Mousetrap: An
integrated, open-source mouse-tracking package. <em>Behavior Research
Methods, 49</em>(5), 1652-1667. <a href="https://doi.org/10.3758/s13428-017-0900-z">doi:10.3758/s13428-017-0900-z</a>
</p>


<h3>See Also</h3>

<p><a href="readbulk.html#topic+read_opensesame">read_opensesame</a> from the <code>readbulk</code> library
for reading and combining raw data files that were collected with
OpenSesame.
</p>
<p><a href="#topic+mt_import_wide">mt_import_wide</a> and <a href="#topic+mt_import_long">mt_import_long</a> for importing mouse-tracking
data from other sources.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mt_data &lt;- mt_import_mousetrap(mt_example_raw)

</code></pre>

<hr>
<h2 id='mt_import_wide'>Import mouse-tracking data saved in wide format.</h2><span id='topic+mt_import_wide'></span>

<h3>Description</h3>

<p><code>mt_import_wide</code> receives a data.frame where mouse-tracking data are
stored in wide format, i.e., where one row contains the data of one trial and
every recorded mouse position and variable is saved in a separate variable
(e.g., X_1, X_2, ..., Y_1, Y_2, ...). This is, e.g., the case when collecting
data using <a href="http://www.mousetracker.org/">MouseTracker</a> (Freeman &amp;
Ambady, 2010). From this data.frame, <code>mt_import_wide</code> creates a
mousetrap data object containing the trajectories and additional data for
further processing within the mousetrap package. Specifically, it returns a
list that includes the trajectory data as an array (called
<code>trajectories</code>), and all other data as a data.frame (called
<code>data</code>). This data structure can then be passed on to other functions
within this package (see <a href="#topic+mousetrap">mousetrap</a> for an overview).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_import_wide(
  raw_data,
  xpos_label = "X",
  ypos_label = "Y",
  zpos_label = NULL,
  timestamps_label = "T",
  add_labels = NULL,
  mt_id_label = NULL,
  pos_sep = "_",
  pos_ids = NULL,
  reset_timestamps = TRUE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_import_wide_+3A_raw_data">raw_data</code></td>
<td>
<p>a data.frame containing the raw data.</p>
</td></tr>
<tr><td><code id="mt_import_wide_+3A_xpos_label">xpos_label</code></td>
<td>
<p>a character string specifying the core of the column labels
containing the x-positions (e.g., &quot;X&quot; for &quot;X_1&quot;, &quot;X_2&quot;, ...).</p>
</td></tr>
<tr><td><code id="mt_import_wide_+3A_ypos_label">ypos_label</code></td>
<td>
<p>a character string specifying the core of the column labels
containing the y-positions (e.g., &quot;Y&quot; for &quot;Y_1&quot;, &quot;Y_2&quot;, ...).</p>
</td></tr>
<tr><td><code id="mt_import_wide_+3A_zpos_label">zpos_label</code></td>
<td>
<p>a character string specifying the core of the column labels
containing the z-positions.</p>
</td></tr>
<tr><td><code id="mt_import_wide_+3A_timestamps_label">timestamps_label</code></td>
<td>
<p>an optional character string specifying the core of
the column labels containing the timestamps. If no timestamps are found in
the data, a timestamps variable with increasing integers will be created
(assuming equidistant time steps).</p>
</td></tr>
<tr><td><code id="mt_import_wide_+3A_add_labels">add_labels</code></td>
<td>
<p>a character vector specifying the core of columns
containing additional mouse-tracking variables.</p>
</td></tr>
<tr><td><code id="mt_import_wide_+3A_mt_id_label">mt_id_label</code></td>
<td>
<p>an optional character string (or vector) specifying the
name of the column that provides a unique ID for every trial (the trial
identifier). If unspecified (the default), an ID variable will be
generated. If more than one variable name is provided, a new ID variable
will be created by combining the values of each variable. The trial
identifier will be set as the <a href="base.html#topic+rownames">rownames</a> of the resulting trajectories
and trial data, and additionally be stored in the column &quot;mt_id&quot; in the
trial data.</p>
</td></tr>
<tr><td><code id="mt_import_wide_+3A_pos_sep">pos_sep</code></td>
<td>
<p>a character string indicating the character that connects the
core label and the position, (e.g., &quot;_&quot; for &quot;X_1&quot;, &quot;Y_1&quot;, ...).</p>
</td></tr>
<tr><td><code id="mt_import_wide_+3A_pos_ids">pos_ids</code></td>
<td>
<p>the vector of IDs used for indexing the x-coordinates,
y-coordinates etc. (e.g., 1:101 for time-normalized trajectories from
MouseTracker). If unspecified (the default), column labels for the
respective variable will be extracted using grep (see Details).</p>
</td></tr>
<tr><td><code id="mt_import_wide_+3A_reset_timestamps">reset_timestamps</code></td>
<td>
<p>logical indicating if the first timestamp should be
subtracted from all timestamps within a trial. Default is <code>TRUE</code> as it
is recommended for all following analyses in mousetrap.</p>
</td></tr>
<tr><td><code id="mt_import_wide_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_import_wide</code> is designed to import mouse-tracking data saved in a
wide format. The defaults are set so that usually only the <code>raw_data</code>
need to be provided when data have been collecting using MouseTracker
(Freeman &amp; Ambady, 2010) and have been read into R using <a href="#topic+read_mt">read_mt</a>.
</p>
<p>If no <code>pos_ids</code> are provided, column labels for the respective variable
(e.g., x-positions) are extracted using <code><a href="base.html#topic+grep">grep</a></code> returning all
variables that start with the respective character string (e.g., &quot;X_&quot; if
<code>xpos_label="X"</code> and <code>pos_sep="_"</code>).
</p>
<p>If no timestamps are found in the data, <code>mt_import_wide</code> automatically
creates a timestamps variable with increasing integers (starting with 0)
assuming equally spaced sampling intervals.
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>).
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>References</h3>

<p>Freeman, J. B., &amp; Ambady, N. (2010). MouseTracker: Software for
studying real-time mental processing using a computer mouse-tracking method.
<em>Behavior Research Methods, 42</em>(1), 226-241.
</p>


<h3>See Also</h3>

<p><a href="#topic+read_mt">read_mt</a> for reading raw data that was collected using
MouseTracker (Freeman &amp; Ambady, 2010) and stored as a file in the &quot;.mt&quot;
format.
</p>
<p><a href="#topic+mt_import_mousetrap">mt_import_mousetrap</a> and <a href="#topic+mt_import_long">mt_import_long</a> for importing
mouse-tracking data in other formats.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create data in wide format for test purposes
mt_data_wide &lt;- mt_export_wide(mt_example,
  use2_variables=c("subject_nr", "Condition"))

# Import the data using mt_import_wide
mt_data &lt;- mt_import_wide(mt_data_wide,
  xpos_label="xpos", ypos_label="ypos",
  timestamps_label="timestamps")

</code></pre>

<hr>
<h2 id='mt_length_normalize'>Length normalize trajectories.</h2><span id='topic+mt_length_normalize'></span>

<h3>Description</h3>

<p>Re-represent each trajectory spatially using a constant number of points so
that adjacent points on the trajectory become equidistant to each other.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_length_normalize(
  data,
  use = "trajectories",
  dimensions = c("xpos", "ypos"),
  save_as = "ln_trajectories",
  n_points = 20
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_length_normalize_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_length_normalize_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_length_normalize_+3A_dimensions">dimensions</code></td>
<td>
<p>a character string specifying which trajectory variables
should be used. Can be of length 2 or 3 for two-dimensional or
three-dimensional data.</p>
</td></tr>
<tr><td><code id="mt_length_normalize_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_length_normalize_+3A_n_points">n_points</code></td>
<td>
<p>an integer or vector of integers specifying the number of
points used to represent the spatially rescaled trajectories. If a single
integer is provided, the number of points will be constant across
trajectories. Alternatively, a vector of integers can provided that specify
the number of points for each trajectory individually.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_length_normalize</code> is used to emphasize the trajectories' shape.
Usually, the vast majority of points of a raw or a time-normalized trajectory
lie close to the start and end point. <code>mt_length_normalize</code>
re-distributes these points so that the spatial distribution is uniform
across the entire trajectory. <code>mt_length_normalize</code> is mainly used to
improve the results of clustering (in particular <a href="#topic+mt_cluster">mt_cluster</a>) and
visualization.
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) with an additional
array (by default called <code>ln_trajectories</code>) containing the length
normalized trajectories. If a trajectory array was provided directly as
<code>data</code>, only the length normalized trajectories will be returned.
</p>


<h3>Author(s)</h3>

<p>Dirk U. Wulff
</p>
<p>Jonas M. B. Haslbeck
</p>
<p>Pascal J. Kieslich
</p>


<h3>Examples</h3>

<pre><code class='language-R'>KH2017 &lt;- mt_length_normalize(data=KH2017,
  dimensions = c('xpos','ypos'),
  n_points = 20)

</code></pre>

<hr>
<h2 id='mt_map'>Map trajectories to prototypes.</h2><span id='topic+mt_map'></span>

<h3>Description</h3>

<p><code>mt_map</code> maps trajectories onto a predefined set of prototype
trajectories. It first computes distances between the trajectories and each
of the supplied trajectory types and then assigns each trajectory to the
prototype that produced the smallest distance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_map(
  data,
  use = "ln_trajectories",
  save_as = "prototyping",
  dimensions = c("xpos", "ypos"),
  prototypes = mousetrap::mt_prototypes,
  weights = rep(1, length(dimensions)),
  pointwise = TRUE,
  na_rm = FALSE,
  minkowski_p = 2,
  use2 = "data",
  grouping_variables = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_map_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_map_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_map_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting data should
be stored.</p>
</td></tr>
<tr><td><code id="mt_map_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying which trajectory variables
should be used. Can be of length 2 or 3 for two-dimensional or
three-dimensional trajectories respectively.</p>
</td></tr>
<tr><td><code id="mt_map_+3A_prototypes">prototypes</code></td>
<td>
<p>a trajectory array containing the prototypes the
trajectories are mapped to. As a starting point, the trajectories stored in
<a href="#topic+mt_prototypes">mt_prototypes</a> can be used. See Details and Examples for selecting
prototypes and creating new ones.</p>
</td></tr>
<tr><td><code id="mt_map_+3A_weights">weights</code></td>
<td>
<p>numeric vector specifying the relative importance of the
variables specified in <code>dimensions</code>. Defaults to a vector of 1s
implying equal importance. Technically, each variable is rescaled so that
the standard deviation matches the corresponding value in <code>weights</code>.
To use the original variables, set <code>weights = NULL</code>.</p>
</td></tr>
<tr><td><code id="mt_map_+3A_pointwise">pointwise</code></td>
<td>
<p>boolean specifying the way dissimilarity between the
trajectories is measured (see Details). If <code>TRUE</code> (the default),
<code>mt_distmat</code> measures the average dissimilarity and then sums the
results. If <code>FALSE</code>, <code>mt_distmat</code>  measures dissimilarity once
(by treating the various points as independent dimensions).</p>
</td></tr>
<tr><td><code id="mt_map_+3A_na_rm">na_rm</code></td>
<td>
<p>logical specifying whether trajectory points containing NAs
should be removed. Removal is done column-wise. That is, if any trajectory
has a missing value at, e.g., the 10th recorded position, the 10th position
is removed for all trajectories. This is necessary to compute distance
between trajectories.</p>
</td></tr>
<tr><td><code id="mt_map_+3A_minkowski_p">minkowski_p</code></td>
<td>
<p>an integer specifying the distance metric.
<code>minkowski_p = 1</code> computes the city-block distance, <code>minkowski_p 
  = 2</code> (the default) computes the Euclidian distance, <code>minkowski_p = 3</code>
the cubic distance, etc.</p>
</td></tr>
<tr><td><code id="mt_map_+3A_use2">use2</code></td>
<td>
<p>an optional character string specifying where the data that
contain the variables used for grouping can be found (in case
<code>grouping_variables</code> are specified). Defaults to &quot;data&quot; as
<code>data[["data"]]</code> usually contains all non mouse-tracking trial data.</p>
</td></tr>
<tr><td><code id="mt_map_+3A_grouping_variables">grouping_variables</code></td>
<td>
<p>a character string (or vector) specifying one or
more variables in <code>use2</code>. If specified, prototypes will be rescaled
separately to match the coordinate system of the trajectories for each
level of the variable(s). If unspecified (the default), the prototypes are
rescaled in the same way across all trajectories.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Mouse trajectories often occur in distinct, qualitative types (see Wulff et
al., 2019; Wulff et al., 2022). Common trajectory types are linear
trajectories, mildly and strongly curved trajectories, and single and
multiple change-of-mind trials. <code>mt_map</code> allows to map trajectories to a
predefined set of trajectory types.
</p>
<p>First, <code>mt_map</code> adjusts prototypes to match the coordinate system of the
trajectories specified by <code>use</code>. Next, <code>mt_map</code> computes the
distances between each trajectory and each of the supplied prototypes (see
<a href="#topic+mt_distmat">mt_distmat</a>) and then assigns each trajectory to the closest prototype
(i.e., the prototype that produced the smallest distance).
</p>
<p>Mapping trajectories to prototypes requires that the endpoints of all
trajectories (and added prototypes) share the same direction, i.e., that all
trajectories end in the top-left corner of the coordinate system
(<a href="#topic+mt_remap_symmetric">mt_remap_symmetric</a> or <a href="#topic+mt_align">mt_align</a> can be used to achieve this).
Furthermore, it is recommended to use length normalized trajectories (see
<a href="#topic+mt_length_normalize">mt_length_normalize</a>; Wulff et al., 2019, Wulff et al., 2023).
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) with an additional
<a href="base.html#topic+data.frame">data.frame</a> (by default called <code>prototyping</code>) that contains the
best fitting prototype for each trajectory (the number of the prototype is
specified under <code>prototype</code>, the label of the prototype under
<code>prototype_label</code>) and the distance of the trajectory to the best
fitting prototype (<code>min_dist</code>). If a trajectory array was provided
directly as <code>data</code>, only the data.frame containing the results will be
returned.
</p>


<h3>Author(s)</h3>

<p>Dirk U. Wulff
</p>
<p>Jonas M. B. Haslbeck
</p>
<p>Pascal J. Kieslich
</p>


<h3>References</h3>

<p>Wulff, D. U., Haslbeck, J. M. B., Kieslich, P. J., Henninger, F.,
&amp; Schulte-Mecklenbeck, M. (2019). Mouse-tracking: Detecting types in
movement trajectories. In M. Schulte-Mecklenbeck, A. Khberger, &amp; J. G.
Johnson (Eds.), <em>A Handbook of Process Tracing Methods</em> (pp. 131-145).
New York, NY: Routledge.
</p>
<p>Wulff, D. U., Kieslich, P. J., Henninger, F., Haslbeck, J. M. B., &amp;
Schulte-Mecklenbeck, M. (2023). <em>Movement tracking of psychological
processes: A tutorial using mousetrap.</em> PsyArXiv.
<a href="https://doi.org/10.31234/osf.io/v685r">doi:10.31234/osf.io/v685r</a>
</p>
<p>Wulff, D. U., Haslbeck, J. M. B., &amp; Schulte-Mecklenbeck, M. (2022).
<em>Measuring the (dis-)continuous mind: What movement trajectories
reveal about cognition</em>. Manuscript in preparation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Length normalize trajectories
KH2017 &lt;- mt_length_normalize(KH2017)

# Map trajectories onto standard prototype set
KH2017 &lt;- mt_map(KH2017,
  use="ln_trajectories")


# Plot prototypes
mt_plot(mt_prototypes,facet_col="mt_id") + 
  ggplot2::facet_grid(.~factor(mt_id,levels=unique(mt_id)))

# Plot trajectories per assigned prototype
mt_plot(KH2017,use="ln_trajectories",
  use2="prototyping",facet_col="prototype_label")


# Map trajectories onto reduced prototype set
KH2017 &lt;- mt_map(KH2017,
  use="ln_trajectories",
  prototypes=mt_prototypes[c("straight","curved","cCoM"),,],
  save_as="prototyping_red")


# Map trajectories onto extended prototype set

# Add additional prototypes
mt_prototypes_ext &lt;- mt_add_trajectory(mt_prototypes,
   xpos = c(0,1,-1,1,-1), ypos = c(0,1.5,1.5,1.5,1.5), id = "dCoM3"
)
mt_prototypes_ext &lt;- mt_add_trajectory(mt_prototypes_ext,
   xpos = c(0,0,-1), ypos = c(0,1.5,1.5), id = "neutral"
)

# Map trajectories
KH2017 &lt;- mt_map(KH2017,
  use="ln_trajectories", prototypes=mt_prototypes_ext,
  save_as="prototyping_ext")


</code></pre>

<hr>
<h2 id='mt_measures'>Calculate mouse-tracking measures.</h2><span id='topic+mt_measures'></span>

<h3>Description</h3>

<p>Calculate a number of mouse-tracking measures for each trajectory, such as
minima, maxima, and flips for each dimension, and different measures for
curvature (e.g., <code>MAD</code>, <code>AD</code>, and <code>AUC</code>). Note that some
measures are only returned if distance, velocity and acceleration are
calculated using <a href="#topic+mt_derivatives">mt_derivatives</a> before running <code>mt_measures</code>.
More information on the different measures can be found in the Details and
Values sections.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_measures(
  data,
  use = "trajectories",
  save_as = "measures",
  dimensions = c("xpos", "ypos"),
  timestamps = "timestamps",
  flip_threshold = 0,
  hover_threshold = NULL,
  hover_incl_initial = TRUE,
  initiation_threshold = 0,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_measures_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_measures_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_measures_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the calculated measures
should be stored.</p>
</td></tr>
<tr><td><code id="mt_measures_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying the two dimensions in the
trajectory array that contain the mouse positions. Usually (and by
default), the first value in the vector corresponds to the x-positions
(<code>xpos</code>) and the second to the y-positions (<code>ypos</code>).</p>
</td></tr>
<tr><td><code id="mt_measures_+3A_timestamps">timestamps</code></td>
<td>
<p>a character string specifying the trajectory dimension
containing the timestamps.</p>
</td></tr>
<tr><td><code id="mt_measures_+3A_flip_threshold">flip_threshold</code></td>
<td>
<p>a numeric value specifying the distance that needs to
be exceeded in one direction so that a change in direction counts as a
flip. If several thresholds are specified, flips will be returned in
separate variables for each threshold value (the variable name will be
suffixed with the threshold value).</p>
</td></tr>
<tr><td><code id="mt_measures_+3A_hover_threshold">hover_threshold</code></td>
<td>
<p>an optional numeric value. If specified, <code>hovers</code>
(and <code>hover_time</code>)  will be calculated as the number (and total time)
of periods without movement in a trial (whose duration exceeds the value
specified in <code>hover_threshold</code>). If several thresholds are specified,
hovers and hover_time will be returned in separate variables for each
threshold value (the variable name will be suffixed with the threshold
value).</p>
</td></tr>
<tr><td><code id="mt_measures_+3A_hover_incl_initial">hover_incl_initial</code></td>
<td>
<p>logical indicating if the calculation of hovers
should include a potential initial phase in the trial without mouse
movements (this initial phase is included by default).</p>
</td></tr>
<tr><td><code id="mt_measures_+3A_initiation_threshold">initiation_threshold</code></td>
<td>
<p>a numeric value specifying the distance from the
start point of the trajectory that needs to be exceeded for calculating the
initiation time. By default, it is 0, meaning that any movement counts as
movement initiation.</p>
</td></tr>
<tr><td><code id="mt_measures_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that some measures are only returned if distance, velocity and
acceleration are calculated using <a href="#topic+mt_derivatives">mt_derivatives</a> before
running <code>mt_measures</code>. Besides, the meaning of these measures
depends on the values of the arguments in <a href="#topic+mt_derivatives">mt_derivatives</a>.
</p>
<p>If the deviations from the idealized response trajectory have been calculated
using <a href="#topic+mt_deviations">mt_deviations</a> before running
<code>mt_measures</code>, the corresponding data in the trajectory array
will be used. If not, <code>mt_measures</code> will calculate these
deviations automatically.
</p>
<p>The calculation of most measures can be deduced directly from their
definition (see Value). For several more complex measures, a few details are
provided in the following.
</p>
<p>The signed <strong>maximum absolute deviation</strong> (<code>MAD</code>) is the maximum
perpendicular deviation from the straight path connecting start and end point
of the trajectory (e.g., Freeman &amp; Ambady, 2010). If the <code>MAD</code> occurs
above the direct path, this is denoted by a positive value. If it occurs
below the direct path, this is denoted by a negative value. This assumes that
the complete movement in the trial was from bottom to top (i.e., the end
point has a higher y-position than the start point). In case the movement was
from top to bottom, <code>mt_measures</code> automatically flips the signs. Both
<code>MD_above</code> and  <code>MD_below</code> are also reported separately.
</p>
<p>The <strong>average deviation</strong> (<code>AD</code>) is the average of all deviations
across the trial. Note that <code>AD</code> ignores the timestamps when calculating
this average. This implicitly assumes that the time passed between each
recording of the mouse is the same within each individual trajectory. If the
<code>AD</code> is calculated using raw data that were obtained with an
approximately constant logging resolution (sampling rate), this assumption is
usually justified (<a href="#topic+mt_check_resolution">mt_check_resolution</a> can be used to check this).
Alternatively, the <code>AD</code> can be calculated based on time-normalized
trajectories; these can be computed using <a href="#topic+mt_time_normalize">mt_time_normalize</a> which
creates equidistant time steps within each trajectory.
</p>
<p>The <code>AUC</code> represents the <strong>area under curve</strong>, i.e., the geometric
area between the actual trajectory and the direct path. Areas above the
direct path are added and areas below are subtracted. The <code>AUC</code> is
calculated using the <a href="pracma.html#topic+polyarea">polyarea</a> function from the pracma
package.
</p>
<p>Note that all <strong>time</strong> related measures (except <code>idle_time</code> and
<code>hover_time</code>) are reported using the timestamp metric as present in the
data. To interpret the timestamp values as time since tracking start, the
assumption has to be made that for each trajectory the tracking started at
timestamp 0 and that all timestamps indicate the time passed since tracking
start. Therefore, all timestamps should be reset during data import by
subtracting the value of the first timestamp from all timestamps within a
trial (assuming that the first timestamp corresponds to the time when
tracking started). Timestamps are reset by default when importing the data
using one of the mt_import functions (e.g., <a href="#topic+mt_import_mousetrap">mt_import_mousetrap</a>). Note
that <code>initiation_time</code> is defined as the last timestamp before the
<code>initiation_threshold</code> was crossed.
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) where an additional
<a href="base.html#topic+data.frame">data.frame</a> has been added (by default called &quot;measures&quot;) containing
the per-trial mouse-tracking measures. Each row in the data.frame
corresponds to one trajectory (the corresponding trajectory is identified
via the rownames and, additionally, in the column &quot;mt_id&quot;). Each column in
the data.frame corresponds to one of the measures. If a trajectory array
was provided directly as <code>data</code>, only the measures data.frame will be
returned.
</p>
<p>The following measures are computed for each trajectory (the labels
relating to x- and y-positions will be adapted depending on the values
specified in <code>dimensions</code>). Please note that additional information is
provided in the Details section.
</p>
<table role = "presentation">
<tr><td><code>mt_id</code></td>
<td>
<p>Trial ID (can be used for merging measures data.frame with
other trial-level data)</p>
</td></tr>
<tr><td><code>xpos_max</code></td>
<td>
<p>Maximum x-position</p>
</td></tr>
<tr><td><code>xpos_min</code></td>
<td>
<p>Minimum x-position</p>
</td></tr>
<tr><td><code>ypos_max</code></td>
<td>
<p>Maximum y-position</p>
</td></tr>
<tr><td><code>ypos_min</code></td>
<td>
<p>Minimum y-position</p>
</td></tr>
<tr><td><code>MAD</code></td>
<td>
<p>Signed Maximum absolute deviation from the direct path
connecting start and end point of the trajectory (straight line).
If the <code>MAD</code> occurs above the direct path, this is denoted by
a positive value; if it occurs below, by a negative value.</p>
</td></tr>
<tr><td><code>MAD_time</code></td>
<td>
<p>Time at which the maximum absolute deviation was reached
first</p>
</td></tr>
<tr><td><code>MD_above</code></td>
<td>
<p>Maximum deviation above the direct path</p>
</td></tr>
<tr><td><code>MD_above_time</code></td>
<td>
<p>Time at which the maximum deviation above was reached
first</p>
</td></tr>
<tr><td><code>MD_below</code></td>
<td>
<p>Maximum deviation below the direct path</p>
</td></tr>
<tr><td><code>MD_below_time</code></td>
<td>
<p>Time at which the maximum deviation below was reached
first</p>
</td></tr>
<tr><td><code>AD</code></td>
<td>
<p>Average deviation from direct path</p>
</td></tr>
<tr><td><code>AUC</code></td>
<td>
<p>Area under curve, the geometric area between the actual
trajectory and the direct path where areas below the direct path have been
subtracted</p>
</td></tr>
<tr><td><code>xpos_flips</code></td>
<td>
<p>Number of directional changes along x-axis (exceeding the
distance specified in <code>flip_threshold</code>)</p>
</td></tr>
<tr><td><code>ypos_flips</code></td>
<td>
<p>Number of directional changes along y-axis (exceeding the
distance specified in <code>flip_threshold</code>)</p>
</td></tr>
<tr><td><code>xpos_reversals</code></td>
<td>
<p>Number of crossings of the y-axis</p>
</td></tr>
<tr><td><code>ypos_reversals</code></td>
<td>
<p>Number of crossings of the x-axis</p>
</td></tr>
<tr><td><code>RT</code></td>
<td>
<p>Response time, time at which tracking stopped</p>
</td></tr>
<tr><td><code>initiation_time</code></td>
<td>
<p>Time at which first mouse movement was initiated</p>
</td></tr>
<tr><td><code>idle_time</code></td>
<td>
<p>Total time without mouse movement across the entirety of
the trial</p>
</td></tr>
<tr><td><code>hover_time</code></td>
<td>
<p>Total time of all periods without movement in a trial
(whose duration exceeds the value specified in <code>hover_threshold</code>)</p>
</td></tr>
<tr><td><code>hovers</code></td>
<td>
<p>Number of periods without movement in a trial (whose duration
exceeds the value specified in <code>hover_threshold</code>)</p>
</td></tr>
<tr><td><code>total_dist</code></td>
<td>
<p>Total distance covered by the trajectory</p>
</td></tr>
<tr><td><code>vel_max</code></td>
<td>
<p>Maximum velocity</p>
</td></tr>
<tr><td><code>vel_max_time</code></td>
<td>
<p>Time at which maximum velocity occurred first</p>
</td></tr>
<tr><td><code>vel_min</code></td>
<td>
<p>Minimum velocity</p>
</td></tr>
<tr><td><code>vel_min_time</code></td>
<td>
<p>Time at which minimum velocity occurred first</p>
</td></tr>
<tr><td><code>acc_max</code></td>
<td>
<p>Maximum acceleration</p>
</td></tr>
<tr><td><code>acc_max_time</code></td>
<td>
<p>Time at which maximum acceleration occurred first</p>
</td></tr>
<tr><td><code>acc_min</code></td>
<td>
<p>Minimum acceleration</p>
</td></tr>
<tr><td><code>acc_min_time</code></td>
<td>
<p>Time at which minimum acceleration occurred first</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>References</h3>

<p>Kieslich, P. J., Henninger, F., Wulff, D. U., Haslbeck, J. M. B.,
&amp; Schulte-Mecklenbeck, M. (2019). Mouse-tracking: A practical guide to
implementation and analysis. In M. Schulte-Mecklenbeck, A. Khberger, &amp; J.
G. Johnson (Eds.), <em>A Handbook of Process Tracing Methods</em> (pp.
111-130). New York, NY: Routledge.
</p>
<p>Freeman, J. B., &amp; Ambady, N. (2010). MouseTracker: Software for studying
real-time mental processing using a computer mouse-tracking method.
<em>Behavior Research Methods, 42</em>(1), 226-241.
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_sample_entropy">mt_sample_entropy</a> for calculating sample entropy.
</p>
<p><a href="#topic+mt_standardize">mt_standardize</a> for standardizing the measures per subject.
</p>
<p><a href="#topic+mt_check_bimodality">mt_check_bimodality</a> for checking bimodality of the measures using
different methods.
</p>
<p><a href="#topic+mt_aggregate">mt_aggregate</a> and <a href="#topic+mt_aggregate_per_subject">mt_aggregate_per_subject</a> for aggregating the
measures.
</p>
<p><a href="dplyr.html#topic+mutate-joins">inner_join</a> for merging data using the <code>dplyr</code> package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mt_example &lt;- mt_derivatives(mt_example)
mt_example &lt;- mt_deviations(mt_example)
mt_example &lt;- mt_measures(mt_example)

# Merge measures with trial data
mt_example_results &lt;- dplyr::inner_join(
  mt_example$data, mt_example$measures,
  by="mt_id")
  
</code></pre>

<hr>
<h2 id='mt_plot'>Plot trajectory data.</h2><span id='topic+mt_plot'></span><span id='topic+mt_plot_aggregate'></span>

<h3>Description</h3>

<p><code>mt_plot</code> can be used for plotting a number of individual trajectories.
<code>mt_plot_aggregate</code> can be used for plotting aggregated trajectories.
The color and linetype can be varied depending on a set of condition
variables using the <code>color</code> and <code>linetype</code> arguments. If the
<code>x</code> and <code>y</code> arguments are varied, this function can also be used
for plotting velocity and acceleration profiles.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_plot(
  data,
  use = "trajectories",
  use2 = "data",
  x = "xpos",
  y = "ypos",
  color = NULL,
  linetype = NULL,
  alpha = NA,
  size = 0.5,
  facet_row = NULL,
  facet_col = NULL,
  wrap_var = NULL,
  wrap_ncol = NULL,
  points = FALSE,
  return_type = "plot",
  mt_id = "mt_id",
  only_ggplot = NULL,
  ...
)

mt_plot_aggregate(
  data,
  use = "trajectories",
  use2 = "data",
  x = "xpos",
  y = "ypos",
  color = NULL,
  linetype = NULL,
  alpha = NA,
  size = 0.5,
  facet_row = NULL,
  facet_col = NULL,
  wrap_var = NULL,
  wrap_ncol = NULL,
  points = FALSE,
  return_type = "plot",
  subject_id = NULL,
  only_ggplot = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_plot_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectories should be
plotted. The corresponding trajectories are selected from data using
<code>data[[use]]</code>. Usually, this value corresponds to either
&quot;trajectories&quot;, &quot;tn_trajectories&quot; or &quot;av_trajectories&quot;, depending on
whether the raw, time-normalized or averaged trajectories should be
plotted.</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_use2">use2</code></td>
<td>
<p>a character string specifying where the data that contain the
variables used for determining the <code>color</code> and <code>linetype</code> can be
found (in case these arguments are specified). Defaults to &quot;data&quot; as
<code>data[["data"]]</code> usually contains all non mouse-tracking trial data.</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_x">x</code></td>
<td>
<p>a character string specifying which dimension in the trajectory
array should be displayed on the x-axis (defaults to xpos).</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_y">y</code></td>
<td>
<p>a character string specifying which dimension in the trajectory
array should be displayed on the y-axis (defaults to ypos).</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_color">color</code></td>
<td>
<p>an optional character string specifying which variable in
<code>data[[use2]]</code> should be used for coloring the trajectories.</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_linetype">linetype</code></td>
<td>
<p>an optional character string specifying which variable in
<code>data[[use2]]</code> should be used for varying the linetype of the
trajectories.</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_alpha">alpha</code></td>
<td>
<p>an optional numeric value between 0 and 1 that can be used to
make the plotted lines (and points) semitransparent.</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_size">size</code></td>
<td>
<p>an optional numeric value that can be used to vary the width of
the plotted trajectory lines.</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_facet_row">facet_row</code></td>
<td>
<p>an optional character string specifying a variable in
<code>data[[use2]]</code> that should be used for (row-wise) faceting.</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_facet_col">facet_col</code></td>
<td>
<p>an optional character string specifying a variable in
<code>data[[use2]]</code> that should be used for (column-wise) faceting.</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_wrap_var">wrap_var</code></td>
<td>
<p>an optional character string specifying variable(s) in
<code>data[[use2]]</code> that should be used for wrapping.</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_wrap_ncol">wrap_ncol</code></td>
<td>
<p>an optional integer specifying the number of columns if
wrapping is used.</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_points">points</code></td>
<td>
<p>logical. If <code>TRUE</code>, points will be added to the plot using
<a href="ggplot2.html#topic+geom_point">geom_point</a>.</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_return_type">return_type</code></td>
<td>
<p>a character string specifying which type of object should
be returned. If <code>"plot"</code> (the default), a new ggplot is created and
the trajectories are plotted using <a href="ggplot2.html#topic+geom_path">geom_path</a>. If
<code>"mapping"</code>, only the ggplot object containing the mapping but without
any geoms is returned. If <code>"geoms"</code>, only the geoms are returned,
which allows adding the plotted trajectories to an existing ggplot.</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_mt_id">mt_id</code></td>
<td>
<p>a character string specifying the internal label used for the
trial identifier (passed on to the group aesthetic). Only relevant for
<code>mt_plot</code>.</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_only_ggplot">only_ggplot</code></td>
<td>
<p>Deprecated. Please use <code>return_type</code> instead.</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_...">...</code></td>
<td>
<p>additional arguments passed on to <a href="#topic+mt_reshape">mt_reshape</a> (such as
<code>subset</code>).</p>
</td></tr>
<tr><td><code id="mt_plot_+3A_subject_id">subject_id</code></td>
<td>
<p>a character string specifying which column contains the
subject identifier. Only relevant for <code>mt_plot_aggregate</code>. If
specified, aggregation will be performed within subjects first. Note that
aggregation will be performed separately for each level, including all
subjects for whom data are available.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_plot</code> internally uses <a href="#topic+mt_reshape">mt_reshape</a> for reshaping trajectories
into a long format. Next, it creates a ggplot object using the
<a href="ggplot2.html#topic+ggplot">ggplot</a> function of the <code>ggplot2</code> package. The
<a href="ggplot2.html#topic+aes">aes</a> mappings are taken from the function arguments for x, y
etc.; in addition, the group mapping is set to the internal trial identifier
(by default called &quot;mt_id&quot;).
</p>
<p>If <code>return_type == "plot"</code> (the default), a new ggplot is created and
the trajectories are plotted using the <a href="ggplot2.html#topic+geom_path">geom_path</a> function of
the <code>ggplot2</code> package. If <code>return_type == "mapping"</code>, the ggplot
object is returned without layers, which can be used to further customize the
plot (see Examples). If <code>return_type == "geoms"</code>, only the geoms are
returned, which allows adding the plotted trajectories to an existing ggplot
(e.g., adding aggregate trajectories on top of the individual trajectories,
see Examples).
</p>
<p><code>mt_plot_aggregate</code> works similarly, but uses <a href="#topic+mt_aggregate">mt_aggregate</a> for
reshaping and aggregating trajectories prior to plotting.
</p>
<p>Please note that this function is intended as a quick and easy solution for
visualizing mouse trajectories. For additional flexibility, we recommend that
<a href="#topic+mt_reshape">mt_reshape</a> or <a href="#topic+mt_aggregate">mt_aggregate</a> be used in conjunction with
<a href="ggplot2.html#topic+ggplot">ggplot</a> to create custom visualizations.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>mt_plot()</code>: Plot individual trajectory data
</p>
</li>
<li> <p><code>mt_plot_aggregate()</code>: Plot aggregated trajectory data
</p>
</li></ul>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_plot_add_rect">mt_plot_add_rect</a> for adding rectangles representing the
response buttons to the plot.
</p>
<p><a href="#topic+mt_plot_riverbed">mt_plot_riverbed</a> for plotting the relative frequency of a selected
variable across time.
</p>
<p><a href="#topic+mt_plot_per_trajectory">mt_plot_per_trajectory</a> for individually plotting all trajectories as
individual pdf files.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Plot individual example trajectories

# Time-normalize trajectories
mt_example &lt;- mt_time_normalize(mt_example)

# Plot all time-normalized trajectories
# varying the color depending on the condition
mt_plot(mt_example, use="tn_trajectories",
  color="Condition")

# ... setting alpha &lt; 1 for semi-transparency
mt_plot(mt_example, use="tn_trajectories",
  color="Condition", alpha=.2)

# ... with custom colors
mt_plot(mt_example, use="tn_trajectories",
  color="Condition") +
  ggplot2::scale_color_brewer(type="qual")

# Create separate plots per Condition
mt_plot(mt_example, use="tn_trajectories",
  facet_col="Condition")

# Create customized plot by setting the return_type option to "mapping"
# to setup an empty plot. In a next step, a geom is added.
# In this example, only points are plotted.
mt_plot(mt_example, use="tn_trajectories",
  color="Condition", return_type="mapping") + 
  ggplot2::geom_point()

# Plot velocity profiles based on the averaged trajectories
# varying the color depending on the condition
mt_example &lt;- mt_derivatives(mt_example)
mt_example &lt;- mt_average(mt_example, interval_size=100)
mt_plot(mt_example, use="av_trajectories",
  x="timestamps", y="vel", color="Condition")


## Plot aggregate trajectories for KH2017 data

# Time-normalize trajectories
KH2017 &lt;- mt_time_normalize(KH2017)

# Plot aggregated time-normalized trajectories per condition
mt_plot_aggregate(KH2017, use="tn_trajectories",
  color="Condition")

# ... first aggregating trajectories within subjects
mt_plot_aggregate(KH2017, use="tn_trajectories",
  color="Condition", subject_id="subject_nr")

# ... adding points for each position to the plot
mt_plot_aggregate(KH2017, use="tn_trajectories",
  color="Condition", points=TRUE)

## Not run: 
  
# Create combined plot of individual and aggregate trajectories
# by first plotting the individual trajectories using mt_plot.
# In a next step, the aggregate trajectories are added using the
# mt_plot_aggregate function with the return_type argument set to "geom".
mt_plot(KH2017, use="tn_trajectories", color="Condition", alpha=.05) + 
  mt_plot_aggregate(KH2017, use="tn_trajectories",
    color="Condition", return_type="geom", size=2)

## End(Not run)

</code></pre>

<hr>
<h2 id='mt_plot_add_rect'>Add rectangles to trajectory plot.</h2><span id='topic+mt_plot_add_rect'></span>

<h3>Description</h3>

<p><code>mt_plot_add_rect</code> adds one or several rectangles to a mousetrap plot.
These buttons usually correspond to the borders of the buttons in the
mouse-tracking experiment. It is specifically designed so that the arguments
from the <code>mousetrap_response</code> plugin in OpenSesame can be used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_plot_add_rect(rect, color = "black", fill = NA, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_plot_add_rect_+3A_rect">rect</code></td>
<td>
<p>a data.frame or matrix with one row per box. For each rectangle,
the x-position (<code>x</code>), y-position (<code>y</code>), width (<code>w</code>), and
height (<code>h</code>) needs to be provided. If columns are not labeled, the
order <code>x, y, w, h</code> is assumed.</p>
</td></tr>
<tr><td><code id="mt_plot_add_rect_+3A_color">color</code></td>
<td>
<p>argument passed on to <a href="ggplot2.html#topic+geom_tile">geom_rect</a>. Specifies the
color of the border of the rectangles.</p>
</td></tr>
<tr><td><code id="mt_plot_add_rect_+3A_fill">fill</code></td>
<td>
<p>argument passed on to <a href="ggplot2.html#topic+geom_tile">geom_rect</a>. Specifies the
color of the interior of the rectangles. If <code>NA</code> (the default),
rectangles are unfilled.</p>
</td></tr>
<tr><td><code id="mt_plot_add_rect_+3A_...">...</code></td>
<td>
<p>additional arguments passed on to <a href="ggplot2.html#topic+geom_tile">geom_rect</a>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_plot_add_rect</code> internally uses <a href="ggplot2.html#topic+geom_tile">geom_rect</a> of the
<code>ggplot2</code> package for plotting.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_plot">mt_plot</a> for plotting trajectory data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load ggplot2
library(ggplot2)

# Import, flip, and time-normalize raw trajectories
mt_example &lt;- mt_import_mousetrap(mt_example_raw)
mt_example &lt;- mt_remap_symmetric(mt_example,remap_xpos="no")
mt_example &lt;- mt_time_normalize(mt_example)

# Create rectangles matrix
rectangles &lt;- matrix(
  # (The matrix is n x 4, and contains
  # all relevant data for every button,
  # (i.e. x, y, width and height values)
  # in separate rows)
  c(
   -840, 525,  350, -170,
    840, 525, -350, -170
  ),
  ncol=4, byrow=TRUE)

# Plot all time-normalized trajectories
# varying the color depending on the condition
# and add rectangles
mt_plot(mt_example,
  use="trajectories",
  x="xpos", y="ypos", color="Condition"
) + mt_plot_add_rect(rect=rectangles)


</code></pre>

<hr>
<h2 id='mt_plot_per_trajectory'>Create PDF with separate plots per trajectory.</h2><span id='topic+mt_plot_per_trajectory'></span>

<h3>Description</h3>

<p><code>mt_plot_per_trajectory</code> creates a PDF file with separate plots per
trajectory. This PDF can be used for inspecting individual trajectories. Note
that plotting all trajectories can be time-consuming, especially for raw
trajectories. If the appropriate <code>x</code> and <code>y</code> arguments are
inserted, this function can also be used for plotting velocity and
acceleration profiles.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_plot_per_trajectory(
  file,
  data,
  use = "trajectories",
  x = "xpos",
  y = "ypos",
  xlim = NULL,
  ylim = NULL,
  axes_exact = FALSE,
  points = FALSE,
  rect = NULL,
  color = "black",
  fill = NA,
  verbose = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_plot_per_trajectory_+3A_file">file</code></td>
<td>
<p>a character string specifying the name of the PDF file. Passed on
to <a href="grDevices.html#topic+pdf">pdf</a>.</p>
</td></tr>
<tr><td><code id="mt_plot_per_trajectory_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_plot_per_trajectory_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectories should be
plotted. The corresponding trajectories are selected from data using
<code>data[[use]]</code>. Usually, this value corresponds to either
&quot;trajectories&quot;, &quot;tn_trajectories&quot; or &quot;av_trajectories&quot;, depending on
whether the raw, time-normalized or averaged trajectories should be
plotted.</p>
</td></tr>
<tr><td><code id="mt_plot_per_trajectory_+3A_x">x</code></td>
<td>
<p>a character string specifying which dimension in the trajectory
array should be displayed on the x-axis (defaults to xpos).</p>
</td></tr>
<tr><td><code id="mt_plot_per_trajectory_+3A_y">y</code></td>
<td>
<p>a character string specifying which dimension in the trajectory
array should be displayed on the y-axis (defaults to ypos).</p>
</td></tr>
<tr><td><code id="mt_plot_per_trajectory_+3A_xlim">xlim</code></td>
<td>
<p>optional argument specifying the limits for the x axis (passed on
to <a href="ggplot2.html#topic+coord_cartesian">coord_cartesian</a>). If not specified (the default),
sensible axis limits will be computed.</p>
</td></tr>
<tr><td><code id="mt_plot_per_trajectory_+3A_ylim">ylim</code></td>
<td>
<p>optional argument specifying the limits for the y axis (passed on
to <a href="ggplot2.html#topic+coord_cartesian">coord_cartesian</a>). If not specified (the default),
sensible axis limits will be computed.</p>
</td></tr>
<tr><td><code id="mt_plot_per_trajectory_+3A_axes_exact">axes_exact</code></td>
<td>
<p>logical. If <code>TRUE</code>, axes will be set without offset
exactly at the limits of the x and y axes (which can be specified using
<code>xlim</code> and <code>ylim</code>]).</p>
</td></tr>
<tr><td><code id="mt_plot_per_trajectory_+3A_points">points</code></td>
<td>
<p>logical. If <code>TRUE</code>, points will be added to the plot using
<a href="ggplot2.html#topic+geom_point">geom_point</a>.</p>
</td></tr>
<tr><td><code id="mt_plot_per_trajectory_+3A_rect">rect</code></td>
<td>
<p>optional argument passed on to <a href="#topic+mt_plot_add_rect">mt_plot_add_rect</a>. If
specified, rectangles (usually representing the response buttons) will be
plotted for each trajectory plot.</p>
</td></tr>
<tr><td><code id="mt_plot_per_trajectory_+3A_color">color</code></td>
<td>
<p>optional argument passed on to <a href="#topic+mt_plot_add_rect">mt_plot_add_rect</a>. Only
relevant if <code>rect</code> is specified.</p>
</td></tr>
<tr><td><code id="mt_plot_per_trajectory_+3A_fill">fill</code></td>
<td>
<p>optional argument passed on to <a href="#topic+mt_plot_add_rect">mt_plot_add_rect</a>. Only
relevant if <code>rect</code> is specified.</p>
</td></tr>
<tr><td><code id="mt_plot_per_trajectory_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
<tr><td><code id="mt_plot_per_trajectory_+3A_...">...</code></td>
<td>
<p>additional arguments passed on to <a href="grDevices.html#topic+pdf">pdf</a>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_plot_per_trajectory</code> creates a PDF using <a href="grDevices.html#topic+pdf">pdf</a>.
Next, it plots all trajectories individually using <a href="#topic+mt_plot">mt_plot</a>. Every plot
is labeled using the <a href="base.html#topic+rownames">rownames</a> of the trajectories.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_plot">mt_plot</a> for plotting trajectory data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
mt_plot_per_trajectory(mt_example,
  file="trajectories.pdf",
  use="trajectories")

## End(Not run)

</code></pre>

<hr>
<h2 id='mt_plot_riverbed'>Plot density of mouse positions across time steps.</h2><span id='topic+mt_plot_riverbed'></span>

<h3>Description</h3>

<p><code>mt_plot_riverbed</code> creates a plot showing the distribution of one
trajectory variable (e.g., the x-positions or velocity) per time step.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_plot_riverbed(
  data,
  use = "tn_trajectories",
  y = "xpos",
  y_range = NULL,
  y_bins = 250,
  facet_row = NULL,
  facet_col = NULL,
  facet_data = "data",
  grid_colors = c("gray30", "gray10"),
  na.rm = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_plot_riverbed_+3A_data">data</code></td>
<td>
<p>mousetrap data object containing the data to be plotted.</p>
</td></tr>
<tr><td><code id="mt_plot_riverbed_+3A_use">use</code></td>
<td>
<p>character string specifying the set of trajectories to use in the
plot. The steps of this set will constitute the x axis. Defaults to
'tn_trajectories', which results in time steps being plotted on the x axis.</p>
</td></tr>
<tr><td><code id="mt_plot_riverbed_+3A_y">y</code></td>
<td>
<p>variable in the mousetrap data object to be plotted on the
output's y dimension. Defaults to 'xpos', the cursor's x coordinate.</p>
</td></tr>
<tr><td><code id="mt_plot_riverbed_+3A_y_range">y_range</code></td>
<td>
<p>numerical vector containing two values that represent the
upper and lower ends of the y axis. By default, the range is calculated
from the data provided.</p>
</td></tr>
<tr><td><code id="mt_plot_riverbed_+3A_y_bins">y_bins</code></td>
<td>
<p>number of bins to distribute along the y axis (defaults to
250).</p>
</td></tr>
<tr><td><code id="mt_plot_riverbed_+3A_facet_row">facet_row</code></td>
<td>
<p>an optional character string specifying a variable in
<code>data[[facet_data]]</code> that should be used for (row-wise) faceting. If
specified, separate riverbed plots for each level of the variable will be
created.</p>
</td></tr>
<tr><td><code id="mt_plot_riverbed_+3A_facet_col">facet_col</code></td>
<td>
<p>an optional character string specifying a variable in
<code>data[[facet_data]]</code> that should be used for (column-wise) faceting.
If specified, separate riverbed plots for each level of the variable will
be created.</p>
</td></tr>
<tr><td><code id="mt_plot_riverbed_+3A_facet_data">facet_data</code></td>
<td>
<p>a character string specifying where the (optional) data
containing the faceting variables can be found.</p>
</td></tr>
<tr><td><code id="mt_plot_riverbed_+3A_grid_colors">grid_colors</code></td>
<td>
<p>a character string or vector of length 2 specifying the
grid color(s). If a single value is provided, this will be used as the grid
color. If a vector of length 2 is provided, the first value will be used as
the color for the major grid lines, the second value for the minor grid
lines. If set to <code>NA</code>, no grid lines are plotted.</p>
</td></tr>
<tr><td><code id="mt_plot_riverbed_+3A_na.rm">na.rm</code></td>
<td>
<p>logical specifying whether missing values should be removed.
This is not done by default, because generally riverbed plots are generated
from preprocess trajectories (e.g., time-normalized trajectories) that all
have the same length (i.e., the same number of steps).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function plots the relative frequency of the values of a trajectory
variable separately for each of a series of time steps. This type of plot has
been used in previous research to visualize the distribution of x-positions
per time step (e.g., Scherbaum et al., 2010).
</p>
<p><code>mt_plot_riverbed</code> usually is applied to time-normalized trajectory data
as all trajectories must contain the same number of values (if
<code>na.rm=FALSE</code>, the default).
</p>


<h3>Author(s)</h3>

<p>Felix Henninger
</p>
<p>Pascal J. Kieslich
</p>


<h3>References</h3>

<p>Scherbaum, S., Dshemuchadse, M., Fischer, R., &amp; Goschke, T.
(2010). How decisions evolve: The temporal dynamics of action selection.
<em>Cognition, 115</em>(3), 407-416.
</p>
<p>Scherbaum, S., &amp; Kieslich, P. J. (2018). Stuck at the starting line: How
the starting procedure influences mouse-tracking data. <em>Behavior
Research Methods, 50</em>(5), 20972110.
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_plot">mt_plot</a> for plotting trajectory data.
</p>
<p><a href="#topic+mt_time_normalize">mt_time_normalize</a> for time-normalizing trajectories.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Time-normalize trajectories
KH2017 &lt;- mt_time_normalize(KH2017)
  
# Create riverbed plot for all trials
mt_plot_riverbed(KH2017)

## Not run: 
# Create separate plots for typical and atypical trials
mt_plot_riverbed(mt_example, facet_col="Condition")


# Create riverbed plot for all trials with custom x and y axis labels
mt_plot_riverbed(mt_example) +
  ggplot2::xlab("Time step") + ggplot2::ylab("X coordinate")

# Note that it is also possible to replace the
# default scale for fill with a custom scale
mt_plot_riverbed(mt_example, facet_col="Condition") +
  ggplot2::scale_fill_gradientn(colours=grDevices::heat.colors(9),
    name="Frequency", trans="log", labels=scales::percent)

## End(Not run)

</code></pre>

<hr>
<h2 id='mt_prototypes'>Mouse trajectory prototypes.</h2><span id='topic+mt_prototypes'></span>

<h3>Description</h3>

<p>A core set of five mouse trajectory prototypes including the 'straight'
trajectory, the mildly curved trajectory, the continuous change-of-mind
trajectory, the discrete change-of-mind trajectory, and the double discrete
change-of-mind trajectory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_prototypes
</code></pre>


<h3>Format</h3>

<p>An object of class <code>array</code> of dimension 5 x 100 x 2.
</p>


<h3>Details</h3>

<p>Mouse- and hand-trajectories often occur in types. In such cases, movement
trajectory data should be analyzed in terms of discrete type assignments
(Wulff et al., 2023). To this end <a href="#topic+mt_map">mt_map</a> can be used to map mouse- or
hand-trajectory to the closest of several predefined prototypes.
<code>mt_prototypes</code> provides a core set of prototypes that has been shown to
represent well a large fraction of empirical movement trajectories (Wulff et
al., 2022).
</p>
<p>To tailor the set of prototypes to a given study, <code>mt_prototypes</code> can be
extended using <a href="#topic+mt_add_trajectory">mt_add_trajectory</a>.
</p>


<h3>References</h3>

<p>Wulff, D. U., Kieslich, P. J., Henninger, F., Haslbeck, J. M.
B., &amp; Schulte-Mecklenbeck, M. (2023). <em>Movement tracking of psychological
processes: A tutorial using mousetrap.</em> PsyArXiv.
<a href="https://doi.org/10.31234/osf.io/v685r">doi:10.31234/osf.io/v685r</a>
</p>
<p>Wulff, D. U., Haslbeck, J. M. B., Schulte-Mecklenbeck, M. (2022).
<em>Measuring the (dis-)continuous mind: What movement trajectories
reveal about cognition</em>. Manuscript in preparation.
</p>

<hr>
<h2 id='mt_qeffect'>Create quantile-effect plot</h2><span id='topic+mt_qeffect'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>Function in beta and currently only for internal purposes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_qeffect(
  data,
  compare,
  use = "measures",
  measure = "MAD",
  direction = "upward",
  n_steps = 100,
  return_data = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_qeffect_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_qeffect_+3A_compare">compare</code></td>
<td>
<p>either a vector, the label of a variable in , or a mousetrap object.</p>
</td></tr>
<tr><td><code id="mt_qeffect_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_qeffect_+3A_measure">measure</code></td>
<td>
<p>a character value specifying the variable used to calculate the
effect between</p>
</td></tr>
<tr><td><code id="mt_qeffect_+3A_direction">direction</code></td>
<td>
<p>a character value.</p>
</td></tr>
<tr><td><code id="mt_qeffect_+3A_n_steps">n_steps</code></td>
<td>
<p>an integer.</p>
</td></tr>
<tr><td><code id="mt_qeffect_+3A_return_data">return_data</code></td>
<td>
<p>boolean.</p>
</td></tr>
<tr><td><code id="mt_qeffect_+3A_...">...</code></td>
<td>
<p>additional arguments passed on to <a href="graphics.html#topic+points">points</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing, when image is plotted using an external device. Otherwise an
object of class <code>mt_object_raw</code> containing in a matrix format the
image's pixel information.
</p>


<h3>Author(s)</h3>

<p>Dirk U. Wulff
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Plot regular heatmap
#SpiveyEtAl2005 = mt_import_long(SpiveyEtAl2005_raw,'x','y',NULL,'t',
#mt_id_label = c('ptp','trial'))
#heatmap = mt_heatmap_raw(SpiveyEtAl2005,xres = 2000)
#mt_heatmap(heatmap,file = NULL)

# compute measures
#SpiveyEtAl2005 = mt_measures(SpiveyEtAl2005)

# Plot heatmap using velocity
#mt_heatmap(SpiveyEtAl2005)

</code></pre>

<hr>
<h2 id='mt_remap_symmetric'>Remap mouse trajectories.</h2><span id='topic+mt_remap_symmetric'></span>

<h3>Description</h3>

<p>Remap all trajectories to one side (or one quadrant) of the coordinate
system. In doing so, <code>mt_remap_symmetric</code> assumes a centered coordinate
system and a symmetric design of the response buttons (see Details).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_remap_symmetric(
  data,
  use = "trajectories",
  save_as = use,
  dimensions = c("xpos", "ypos"),
  remap_xpos = "left",
  remap_ypos = "up"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_remap_symmetric_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_remap_symmetric_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_remap_symmetric_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_remap_symmetric_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying the two dimensions in the
trajectory array that contain the mouse positions, the first value
corresponding to the x-positions, the second to the y-positions.</p>
</td></tr>
<tr><td><code id="mt_remap_symmetric_+3A_remap_xpos">remap_xpos</code></td>
<td>
<p>character string indicating the direction in which to remap
values on the x axis. If set to &quot;left&quot; (as per default), trajectories with
an endpoint on the right (i.e. with a positive x-value) will be remapped to
the left. The alternatives are &quot;right&quot; which has the reverse effect, and
&quot;no&quot;, which disables remapping on the horizontal dimension.</p>
</td></tr>
<tr><td><code id="mt_remap_symmetric_+3A_remap_ypos">remap_ypos</code></td>
<td>
<p>character string defining whether tracks directed downwards
on the y axis should be remapped so that they end with a positive y value.
This will be performed if this parameter is set to &quot;up&quot; (which is the
default), and the reverse occurs if the parameter is set to &quot;down&quot;. If it
is set to &quot;no&quot;, y-values remain untouched.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When mouse trajectories are compared across different conditions, it is
typically desirable that the endpoints of the trajectories share the same
direction (e.g., diagonally up and left). This way, the trajectories can be
compared regardless of the button they were directed at.
</p>
<p><code>mt_remap_symmetric</code> can be used to achieve this provided that two
assumptions hold:
</p>
<p>First, this function assumes a centered coordinate system, i.e. the
coordinate system is centered on the screen center. This is the case when the
data is produced by the mousetrap plug-ins in OpenSesame.
</p>
<p>Second, it assumes that the response buttons in the mouse-tracking experiment
are symmetric, in that they all are equally distant from the screen center.
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) with remapped
trajectories. If the trajectory array was provided directly as <code>data</code>,
only the trajectory array will be returned.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Remap trajectories so that all trajectories
# end in the top-left corner
mt_example &lt;- mt_import_mousetrap(mt_example_raw)
mt_example &lt;- mt_remap_symmetric(mt_example)

# Only flip trajectories vertically so that all
# trajectories end in the upper half of the screen
mt_example &lt;- mt_import_mousetrap(mt_example_raw)
mt_example &lt;- mt_remap_symmetric(mt_example,
  remap_xpos="no", remap_ypos="up")
  
</code></pre>

<hr>
<h2 id='mt_resample'>Resample trajectories using a constant time interval.</h2><span id='topic+mt_resample'></span>

<h3>Description</h3>

<p>Resample trajectory positions using a constant time interval. If no timestamp
that represents an exact multiple of this time interval is found, linear
interpolation is performed using the two adjacent timestamps.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_resample(
  data,
  use = "trajectories",
  save_as = "rs_trajectories",
  dimensions = c("xpos", "ypos"),
  timestamps = "timestamps",
  step_size = 10,
  exact_last_timestamp = TRUE,
  constant_interpolation = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_resample_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_resample_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_resample_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_resample_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying the dimensions in the
trajectory array that should be resampled. If <code>"all"</code>, all trajectory
dimensions except the timestamps will be resampled.</p>
</td></tr>
<tr><td><code id="mt_resample_+3A_timestamps">timestamps</code></td>
<td>
<p>a character string specifying the trajectory dimension
containing the timestamps.</p>
</td></tr>
<tr><td><code id="mt_resample_+3A_step_size">step_size</code></td>
<td>
<p>an integer specifying the size of the constant time
interval. The unit corresponds to the unit of the timestamps.</p>
</td></tr>
<tr><td><code id="mt_resample_+3A_exact_last_timestamp">exact_last_timestamp</code></td>
<td>
<p>logical indicating if the last timestamp should
always be appended (which is the case by default). If <code>FALSE</code>, the
last timestamp is only appended if it is a multiple of the step_size.</p>
</td></tr>
<tr><td><code id="mt_resample_+3A_constant_interpolation">constant_interpolation</code></td>
<td>
<p>an optional integer. If specified, constant
instead of linear interpolation will be performed for all adjacent
timestamps whose difference exceeds the number specified for
<code>constant_interpolation</code>. The unit corresponds to the unit of the
timestamps.</p>
</td></tr>
<tr><td><code id="mt_resample_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_resample</code> can be used if the number of logged positions in a trial
should be reduced. <code>mt_resample</code> achieves this by artificially
decreasing the resolution with which the positions were recorded. For
example, if mouse positions were recorded every 10 ms in an experiment, but
one was only interested in the exact mouse position every 50 ms,
<code>mt_resample</code> with <code>step_size=50</code> could be used. In this case, only
every fifth sample would be kept.
</p>
<p>In addition, <code>mt_resample</code> can be used to only retain values for
specific timestamps across trials (e.g., if for each trial the position of
the mouse exactly 250 ms and 500 ms after onset of the trial are of
interest). In case that a trial does not contain samples at the specified
timestamps, linear interpolation is performed using the two adjacent
timestamps.
</p>
<p>If a number is specified for <code>constant_interpolation</code>, constant instead
of linear interpolation will be performed for all adjacent timestamps whose
difference exceeds this number. Specifically, a period without mouse movement
will be assumed starting at the respective timestamp until the next timestamp
</p>

<ul>
<li> <p><code>constant_interpolation/2</code>.
</p>
</li></ul>

<p>Note that <code>mt_resample</code> does not average across time intervals. For
this, <a href="#topic+mt_average">mt_average</a> can be used.
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) with an additional
array (by default called <code>rs_trajectories</code>) containing the resampled
trajectories. If a trajectory array was provided directly as <code>data</code>,
only the resampled trajectories will be returned.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>See Also</h3>

<p><a href="stats.html#topic+approxfun">approx</a> for information about the function used for
linear interpolation.
</p>
<p><a href="#topic+mt_average">mt_average</a> for averaging trajectories across constant time intervals.
</p>
<p><a href="#topic+mt_time_normalize">mt_time_normalize</a> for time-normalizing trajectories.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mt_example &lt;- mt_resample(mt_example,
  save_as="rs_trajectories",
  step_size=50)

</code></pre>

<hr>
<h2 id='mt_reshape'>General-purpose reshape and aggregation function for mousetrap data.</h2><span id='topic+mt_reshape'></span>

<h3>Description</h3>

<p><code>mt_reshape</code> is the general function used in the <code>mousetrap</code>
package for filtering, merging, reshaping, and aggregating mouse-tracking
measures or trajectories in combination with other trial data. Several
additional (wrapper) functions for more specific purposes (cf. &quot;See Also&quot;)
are available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_reshape(
  data,
  use = "trajectories",
  use_variables = NULL,
  use2 = "data",
  use2_variables = NULL,
  subset = NULL,
  subject_id = NULL,
  aggregate = FALSE,
  aggregate_subjects_only = FALSE,
  .funs = "mean",
  trajectories_long = TRUE,
  convert_df = TRUE,
  mt_id = "mt_id",
  mt_seq = "mt_seq",
  aggregation_function = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_reshape_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_reshape_+3A_use">use</code></td>
<td>
<p>a character string specifying which data should be reshaped. The
corresponding data are selected from data using <code>data[[use]]</code>.
Usually, this value corresponds to either &quot;trajectories&quot;,
&quot;tn_trajectories&quot;, or &quot;measures&quot;, depending on whether the analysis
concerns raw trajectories, time-normalized trajectories, or derived
measures.</p>
</td></tr>
<tr><td><code id="mt_reshape_+3A_use_variables">use_variables</code></td>
<td>
<p>a character vector specifying which mouse-tracking
variables should be reshaped. Corresponds to the column names in case a
data.frame with mouse-tracking measures is provided. Corresponds to the
labels of the array dimensions in case a trajectory array is provided. If
unspecified, all variables will be reshaped.</p>
</td></tr>
<tr><td><code id="mt_reshape_+3A_use2">use2</code></td>
<td>
<p>an optional character string specifying where the other trial
data can be found. Defaults to &quot;data&quot; as <code>data[["data"]]</code> usually
contains all non mouse-tracking trial data. Alternatively, a data.frame can
be provided directly.</p>
</td></tr>
<tr><td><code id="mt_reshape_+3A_use2_variables">use2_variables</code></td>
<td>
<p>an optional character string (or vector) specifying the
variables (in <code>data[[use2]]</code>) that should be merged with the data. If
<code>aggregate==TRUE</code>, the trajectories / measures will be aggregated
separately for each of the levels of these variables using
<a href="dplyr.html#topic+summarise_all">summarize_at</a>.</p>
</td></tr>
<tr><td><code id="mt_reshape_+3A_subset">subset</code></td>
<td>
<p>a logical expression (passed on to <a href="base.html#topic+subset">subset</a>) indicating
elements or rows to keep. If specified, <code>data[[use2]]</code> will be
subsetted using this expression, and, afterwards, <code>data[[use]]</code> will
be filtered accordingly.</p>
</td></tr>
<tr><td><code id="mt_reshape_+3A_subject_id">subject_id</code></td>
<td>
<p>an optional character string specifying which column
contains the subject identifier in <code>data[[use2]]</code>. If specified and
<code>aggregate==TRUE</code>, aggregation will be performed within subjects
first.</p>
</td></tr>
<tr><td><code id="mt_reshape_+3A_aggregate">aggregate</code></td>
<td>
<p>logical indicating whether data should be aggregated. If
<code>use2_variables</code> are specified, aggregation will be performed
separately for each of the levels of the <code>use2_variables</code>.</p>
</td></tr>
<tr><td><code id="mt_reshape_+3A_aggregate_subjects_only">aggregate_subjects_only</code></td>
<td>
<p>logical indicating whether data should only be
aggregated per subject (if <code>subject_id</code> is specified and
<code>aggregate==TRUE</code>).</p>
</td></tr>
<tr><td><code id="mt_reshape_+3A_.funs">.funs</code></td>
<td>
<p>the aggregation function(s) passed on to
<code><a href="dplyr.html#topic+summarise_all">summarize_at</a></code>. By default, the <code><a href="base.html#topic+mean">mean</a></code> is
calculated.</p>
</td></tr>
<tr><td><code id="mt_reshape_+3A_trajectories_long">trajectories_long</code></td>
<td>
<p>logical indicating if the reshaped trajectories
should be returned in long or wide format. If <code>TRUE</code>, every recorded
position in a trajectory is placed in another row (whereby the order of the
positions is logged in the variable <code>mt_seq</code>). If <code>FALSE</code>, every
trajectory is saved in wide format and the respective positions are indexed
by adding an integer to the corresponding label (e.g., <code>xpos_1</code>,
<code>xpos_2</code>, ...). Only relevant if <code>data[[use]]</code> contains
trajectories.</p>
</td></tr>
<tr><td><code id="mt_reshape_+3A_convert_df">convert_df</code></td>
<td>
<p>logical indicating if the reshaped data should be converted
to a <code><a href="base.html#topic+data.frame">data.frame</a></code> using <code><a href="base.html#topic+as.data.frame">as.data.frame</a></code>. This will
drop potentially existing additional classes (such as
<code><a href="dplyr.html#topic+tbl_df">tbl_df</a></code>) that result from the internally used
<code>dplyr</code> functions for data grouping and aggregation. As these
additional classes might - on rare occasions - cause problems with
functions from other packages, the reshaped data are converted to &quot;pure&quot;
data.frames by default.</p>
</td></tr>
<tr><td><code id="mt_reshape_+3A_mt_id">mt_id</code></td>
<td>
<p>a character string specifying the name of the column that will
contain the trial identifier in the reshaped data. The values for the trial
identifier correspond to the <code>rownames</code> of <code>data[[use]]</code> and
<code>data[[use2]]</code>.</p>
</td></tr>
<tr><td><code id="mt_reshape_+3A_mt_seq">mt_seq</code></td>
<td>
<p>a character string specifying the name of the column that will
contain the integers indicating the order of the mouse positions per
trajectory in the reshaped data. Only relevant if <code>data[[use]]</code>
contains trajectories and <code>trajectories_long==TRUE</code>.</p>
</td></tr>
<tr><td><code id="mt_reshape_+3A_aggregation_function">aggregation_function</code></td>
<td>
<p>Deprecated. Please use <code>.funs</code> instead.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_reshape</code> uses the <a href="base.html#topic+rownames">rownames</a> of <code>data[[use]]</code> and
<code>data[[use2]]</code> for merging the trajectories / measures and the trial
data. For convenience (and for trajectories in long format also of
necessity), an additional column (labelled as specified in the <code>mt_id</code>
argument) is added to the reshaped data containing the rownames as trial
identifier.
</p>
<p>The main purpose of this function is to reshape the trajectory data into a
two-dimensional data.frame, as this format is required for many further
analyses and plots in R.
</p>
<p>Besides, it should aid the user in combining data contained in different
parts of the mousetrap data object, e.g., a condition variable stored in
<code>data[["data"]]</code> with trajectory data stored in
<code>data[["trajectories"]]</code> (or mouse-tracking measures stored in
<code>data[["measures"]]</code>).
</p>
<p>Finally, it offers the possibility to aggregate trajectories and measures for
different conditions and/or subjects.
</p>
<p>The package also includes several functions that wrap <code>mt_reshape</code> and
serve specific purposes. They are often easier to use, and thus recommended
over <code>mt_reshape</code> unless the utmost flexibility is required. These
functions are described in the section &quot;See Also&quot;.
</p>
<p>Note also that many merging, reshaping, and aggregation procedures can be
performed directly by using some of the basic R functions, e.g., <a href="base.html#topic+merge">merge</a>
and <a href="stats.html#topic+aggregate">aggregate</a>, or through the R packages <code>dplyr</code> or
<code>reshape2</code>, if desired.
</p>


<h3>Value</h3>

<p>A <code><a href="base.html#topic+data.frame">data.frame</a></code> containing the reshaped data.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_aggregate">mt_aggregate</a> for aggregating mouse-tracking measures and
trajectories.
</p>
<p><a href="#topic+mt_aggregate_per_subject">mt_aggregate_per_subject</a> for aggregating mouse-tracking measures and
trajectories per subject.
</p>
<p><a href="#topic+mt_export_long">mt_export_long</a> for exporting mouse-tracking data in long format.
</p>
<p><a href="#topic+mt_export_wide">mt_export_wide</a> for exporting mouse-tracking data in wide format.
</p>
<p><a href="dplyr.html#topic+mutate-joins">inner_join</a> for merging data and <code><a href="dplyr.html#topic+summarise_all">summarize_at</a></code>
for aggregating data using the <code>dplyr</code> package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Time-normalize trajectories
mt_example &lt;- mt_time_normalize(mt_example)

# Reshape time-normalized trajectories data into long format
# adding Condition variable
trajectories_long &lt;- mt_reshape(mt_example,
 use="tn_trajectories",
 use2_variables="Condition"
 )

# Reshape time-normalized trajectories data into wide format
# only keeping xpos and ypos
# and adding Condition variable
trajectories_wide &lt;- mt_reshape(mt_example,
  use="tn_trajectories", use_variables = c("xpos","ypos"),
  use2_variables = "Condition",
  trajectories_long = FALSE
  )

</code></pre>

<hr>
<h2 id='mt_sample_entropy'>Calculate sample entropy.</h2><span id='topic+mt_sample_entropy'></span>

<h3>Description</h3>

<p>Calculate sample entropy for each trajectory as a measure of the complexity
of movements along one specific dimension.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_sample_entropy(
  data,
  use = "tn_trajectories",
  save_as = "measures",
  dimension = "xpos",
  m = 3,
  r = NULL,
  use_diff = TRUE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_sample_entropy_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_sample_entropy_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_sample_entropy_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the calculated measures
should be stored.</p>
</td></tr>
<tr><td><code id="mt_sample_entropy_+3A_dimension">dimension</code></td>
<td>
<p>a character string specifying the dimension based on which
sample entropy should be calculated. By default (xpos), the x-positions are
used.</p>
</td></tr>
<tr><td><code id="mt_sample_entropy_+3A_m">m</code></td>
<td>
<p>an integer passed on to the sample entropy function (see Details).</p>
</td></tr>
<tr><td><code id="mt_sample_entropy_+3A_r">r</code></td>
<td>
<p>a numeric value passed on to the sample entropy function (see
Details).</p>
</td></tr>
<tr><td><code id="mt_sample_entropy_+3A_use_diff">use_diff</code></td>
<td>
<p>logical indicating if the differences of the dimension values
should be computed before calculating sample entropy (which is done by
default, see Details).</p>
</td></tr>
<tr><td><code id="mt_sample_entropy_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_sample_entropy</code> calculates the sample entropy for each trajectory as
a measure of its complexity. Hehman et al (2015) provide details on how
sample entropy can be calculated and applied in mouse-tracking (following
Dale et al., 2007). They apply the sample entropy measure to the
differences between adjacent x-positions
(which is also the default here, as in a standard mouse-tracking task with
buttons located in the top-left and right corners mostly the movements in the
horizontal direction are of interest). Besides, they recommend using the
time-normalized trajectories so all trajectories have the same length.
</p>
<p>Sample entropy is computed by comparing windows of a fixed size (specified
using <code>m</code>) across all recorded positions. Sample entropy is the
negative natural logarithm of the conditional probability that this window
remains similar across the trial (Hehman et al., 2015). A window is
considered to be similar to another if their distance is smaller than a
specified tolerance value (which can be specified using <code>r</code>). Hehman et
al. (2015) use a tolerance value of 0.2 * standard deviation of all
differences between adjacent x-positions in the dataset (which is the default
implemented here).
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>).
</p>
<p>If a data.frame with label specified in <code>save_as</code> (by default
&quot;measures&quot;) already exists, the sample entropy values are added as
additional column.
</p>
<p>If not, an additional <a href="base.html#topic+data.frame">data.frame</a> will be added.
</p>
<p>If a trajectory array was provided directly as <code>data</code>, only the
data.frame will be returned.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Dirk Wulff
</p>
<p>Felix Henninger
</p>


<h3>References</h3>

<p>Dale, R., Kehoe, C., &amp; Spivey, M. J. (2007). Graded motor
responses in the time course of categorizing atypical exemplars.
<em>Memory &amp; Cognition, 35</em>(1), 15-28.
</p>
<p>Hehman, E., Stolier, R. M., &amp; Freeman, J. B. (2015). Advanced mouse-tracking
analytic techniques for enhancing psychological science. <em>Group
Processes &amp; Intergroup Relations, 18</em>(3), 384-401.
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_measures">mt_measures</a> for calculating other mouse-tracking
measures.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculate sample entropy based on time-normalized
# trajectories and merge results with other meausres
# derived from raw trajectories
mt_example &lt;- mt_measures(mt_example)
mt_example &lt;- mt_time_normalize(mt_example,
  save_as="tn_trajectories", nsteps=101)
mt_example &lt;- mt_sample_entropy(mt_example,
  use="tn_trajectories", save_as="measures",
  dimension="xpos", m=3)

</code></pre>

<hr>
<h2 id='mt_scale_trajectories'>Standardize variables in mouse trajectory array.</h2><span id='topic+mt_scale_trajectories'></span>

<h3>Description</h3>

<p><code>mt_scale_trajectories</code> centers and / or standardizes selected
trajectory variables within or across trajectories.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_scale_trajectories(
  data,
  use = "trajectories",
  save_as = use,
  var_names,
  center = TRUE,
  scale = TRUE,
  within_trajectory = FALSE,
  prefix = "z_",
  transform = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_scale_trajectories_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_scale_trajectories_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_scale_trajectories_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_scale_trajectories_+3A_var_names">var_names</code></td>
<td>
<p>character vector giving the labels of the to be
standardized variables.</p>
</td></tr>
<tr><td><code id="mt_scale_trajectories_+3A_center">center</code></td>
<td>
<p>logical specifying whether variables should be centered (i.e.,
<code>mean = 0</code>). Can be a logical vector, in which case the values of
<code>scale</code> are mapped to the variables specified in <code>var_names</code>.</p>
</td></tr>
<tr><td><code id="mt_scale_trajectories_+3A_scale">scale</code></td>
<td>
<p>logical or numeric specifying the scaling of the variables. When
logical, <code>scale = TRUE</code> normalizes the trajectory variable to sd = 1,
whereas <code>scale = FALSE</code> leaves the variable on its original scale. When
numeric, the trajectory variables are scaled by (i.e., divided by) the
specific value in scale. Can also be a numeric vector, in which case the
values of <code>scale</code> are mapped to the variables specified in
<code>var_names</code>.</p>
</td></tr>
<tr><td><code id="mt_scale_trajectories_+3A_within_trajectory">within_trajectory</code></td>
<td>
<p>logical specifying whether trajectory variables
should be scaled within or across trajectories. If <code>within_trajectory
  == TRUE</code>, scaling trajectories to mean = 0 and sd = 1 means that every to
be standardized trajectory variable will have mean = 0 and sd = 1. If
<code>within_trajectory == FALSE</code> (the default), mean = 0 and sd = 1 are
only true in the aggregate (i.e., across all trajectories). Can be a
logical vector, in which case the values of <code>scale</code> are mapped to the
variables specified in <code>var_names</code>.</p>
</td></tr>
<tr><td><code id="mt_scale_trajectories_+3A_prefix">prefix</code></td>
<td>
<p>character string added to the names of the new standardized
variables. If <code>prefix = ""</code>, the original variables will be
overwritten.</p>
</td></tr>
<tr><td><code id="mt_scale_trajectories_+3A_transform">transform</code></td>
<td>
<p>function that takes a numeric matrix as argument and returns
a numeric matrix of same size with transformed values. If <code>NULL</code> the
original values are passed on to standardization.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) with an additional
variable containing the standardized trajectory variable added to the
trajectory array). If the trajectory array was provided directly as
<code>data</code>, only the trajectory array will be returned.
</p>


<h3>Author(s)</h3>

<p>Dirk U. Wulff
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_standardize">mt_standardize</a> for standardizing mouse-tracking measures per level of
other variables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculate derivatives
mt_example &lt;- mt_derivatives(mt_example)

# Standardize velocity across trajectories
mt_example &lt;- mt_scale_trajectories(mt_example,var_names = "vel")

</code></pre>

<hr>
<h2 id='mt_spatialize'>Spatialize trajectories.</h2><span id='topic+mt_spatialize'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>
<p>Re-represent each trajectory spatially using a constant number of points so
that adjacent points on the trajectory become equidistant to each other.
Please note that this function is <strong>deprecated</strong> and that
<a href="#topic+mt_length_normalize">mt_length_normalize</a> should be used instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_spatialize(
  data,
  use = "trajectories",
  dimensions = c("xpos", "ypos"),
  save_as = "sp_trajectories",
  n_points = 20
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_spatialize_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_spatialize_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_spatialize_+3A_dimensions">dimensions</code></td>
<td>
<p>a character string specifying which trajectory variables
should be used. Can be of length 2 or 3 for two-dimensional or
three-dimensional data.</p>
</td></tr>
<tr><td><code id="mt_spatialize_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_spatialize_+3A_n_points">n_points</code></td>
<td>
<p>an integer or vector of integers specifying the number of
points used to represent the spatially rescaled trajectories. If a single
integer is provided, the number of points will be constant across
trajectories. Alternatively, a vector of integers can provided that specify
the number of points for each trajectory individually.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_spatialize</code> is used to emphasize the trajectories' shape. Usually,
the vast majority of points of a raw or a time-normalized trajectory lie
close to the start and end point. <code>mt_spatialize</code> re-distributes these
points so that the spatial distribution is uniform across the entire
trajectory. <code>mt_spatialize</code> is mainly used to improve the results of
clustering (in particular <a href="#topic+mt_cluster">mt_cluster</a>) and visualization.
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) with an additional
array containing the spatialized trajectories. If a trajectory array was
provided directly as <code>data</code>, only the spatialized trajectories will be
returned.
</p>


<h3>Author(s)</h3>

<p>Dirk U. Wulff
</p>
<p>Jonas M. B. Haslbeck
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
KH2017 &lt;- mt_spatialize(data=KH2017,
  dimensions = c('xpos','ypos'),
  n_points = 20)

## End(Not run)

</code></pre>

<hr>
<h2 id='mt_standardize'>Standardize mouse-tracking measures per level of other variables.</h2><span id='topic+mt_standardize'></span>

<h3>Description</h3>

<p>Standardize selected mouse-tracking measures across all trials or per level
of one or more other variable, and store them in new variables. This function
is a thin wrapper around <a href="#topic+scale_within">scale_within</a>, focussed on mouse-tracking data
stored in a mousetrap data object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_standardize(
  data,
  use = "measures",
  use_variables = NULL,
  within = NULL,
  prefix = "z_",
  center = TRUE,
  scale = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_standardize_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details).</p>
</td></tr>
<tr><td><code id="mt_standardize_+3A_use">use</code></td>
<td>
<p>a character string specifying which data should be used. By
default points to the <code>measures</code> data.frame created using
<a href="#topic+mt_measures">mt_measures</a>.</p>
</td></tr>
<tr><td><code id="mt_standardize_+3A_use_variables">use_variables</code></td>
<td>
<p>a vector specifying which variables should be
standardized. If unspecified, all variables will be standardized.</p>
</td></tr>
<tr><td><code id="mt_standardize_+3A_within">within</code></td>
<td>
<p>an optional character string specifying one or more variables
in <code>data[["data"]]</code>. If specified, all measures will be standardized
separately for each level of the variable (or for each combination of
levels, if more than one variable is specified).</p>
</td></tr>
<tr><td><code id="mt_standardize_+3A_prefix">prefix</code></td>
<td>
<p>a character string that is inserted before each standardized
variable. If an empty string is specified, the original variables are
replaced.</p>
</td></tr>
<tr><td><code id="mt_standardize_+3A_center">center</code></td>
<td>
<p>argument passed on to <a href="base.html#topic+scale">scale</a>.</p>
</td></tr>
<tr><td><code id="mt_standardize_+3A_scale">scale</code></td>
<td>
<p>argument passed on to <a href="base.html#topic+scale">scale</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>)
including the standardized measures.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>See Also</h3>

<p><a href="#topic+mt_scale_trajectories">mt_scale_trajectories</a> for standardizing variables in mouse
trajectory arrays.
</p>
<p><a href="#topic+scale_within">scale_within</a> which is called by <code>mt_standardize</code>.
</p>
<p><a href="base.html#topic+scale">scale</a> for the R base scale function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mt_example &lt;- mt_measures(mt_example)

# Standardize MAD and AD per subject
mt_example &lt;- mt_standardize(mt_example,
  use_variables=c("MAD", "AD"),
  within="subject_nr", prefix="z_")

# Standardize MAD and AD per subject and Condition
mt_example &lt;- mt_standardize(mt_example,
  use_variables=c("MAD", "AD"),
  within=c("subject_nr", "Condition"),
  prefix="z_")
  
</code></pre>

<hr>
<h2 id='mt_subset'>Filter mousetrap data.</h2><span id='topic+mt_subset'></span>

<h3>Description</h3>

<p>Return a subset of the mousetrap data including only the trial data and
corresponding trajectories that meet the conditions specified in the
arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_subset(data, subset, check = "data")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_subset_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details).</p>
</td></tr>
<tr><td><code id="mt_subset_+3A_subset">subset</code></td>
<td>
<p>a logical expression (passed on to <a href="base.html#topic+subset">subset</a>) indicating
the rows to keep. Missing values are taken as <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="mt_subset_+3A_check">check</code></td>
<td>
<p>a character string specifying which data should be used for
checking the subset condition.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mt_subset</code> is helpful when trials should be removed from all analyses.
By default, <code>check</code> is set to &quot;data&quot; meaning that the subset condition
is evaluated based on the trial data (stored in <code>data[["data"]]</code>).
However, it might also be of interest to only include trials based on
specific mouse-tracking measures (e.g., all trials with an <code>MAD</code> smaller
than 200). In this case, <code>check</code> needs to be set to the respective name
of the data.frame (e.g., &quot;measures&quot;).
</p>
<p>Note that if specific trials should be removed from all analyses based on a
condition known a priori (e.g., practice trials), it is more efficient to use
the <a href="base.html#topic+subset">subset</a> function on the raw data before importing the trajectories
using one of the mt_import functions (such as <a href="#topic+mt_import_mousetrap">mt_import_mousetrap</a>).
</p>
<p>Besides, if trials should only be removed from some analyses or for specific
plots, note that other mousetrap functions (e.g., <a href="#topic+mt_reshape">mt_reshape</a>,
<a href="#topic+mt_aggregate">mt_aggregate</a>, and <a href="#topic+mt_plot">mt_plot</a>) also allow for subsetting.
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) with filtered
data and trajectories.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>See Also</h3>

<p><a href="base.html#topic+subset">subset</a> for the R base subset function for vectors, matrices,
or data.frames.
</p>
<p><a href="#topic+mt_reshape">mt_reshape</a> for information about the subset argument in various other
mousetrap functions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Subset based on trial data
mt_example_atypical &lt;- mt_subset(mt_example, Condition=="Atypical")

# Subset based on mouse-tracking measure (MAD)
mt_example &lt;- mt_measures(mt_example)
mt_example_mad_sub &lt;- mt_subset(mt_example, MAD&lt;400, check="measures")

</code></pre>

<hr>
<h2 id='mt_time_normalize'>Time normalize trajectories.</h2><span id='topic+mt_time_normalize'></span>

<h3>Description</h3>

<p>Compute time-normalized trajectories using a constant number of equally sized
time steps. Time normalization is performed separately for all specified
trajectory dimensions (by default, the x- and y-positions) using linear
interpolation based on the timestamps. By default, 101 time steps are used
(following Spivey et al., 2005).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mt_time_normalize(
  data,
  use = "trajectories",
  save_as = "tn_trajectories",
  dimensions = c("xpos", "ypos"),
  timestamps = "timestamps",
  nsteps = 101,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mt_time_normalize_+3A_data">data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see <a href="#topic+mt_example">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td></tr>
<tr><td><code id="mt_time_normalize_+3A_use">use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td></tr>
<tr><td><code id="mt_time_normalize_+3A_save_as">save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td></tr>
<tr><td><code id="mt_time_normalize_+3A_dimensions">dimensions</code></td>
<td>
<p>a character vector specifying the dimensions in the
trajectory array that should be time-normalized. If <code>"all"</code>, all
trajectory dimensions except the timestamps will be time-normalized.</p>
</td></tr>
<tr><td><code id="mt_time_normalize_+3A_timestamps">timestamps</code></td>
<td>
<p>a character string specifying the trajectory dimension
containing the timestamps.</p>
</td></tr>
<tr><td><code id="mt_time_normalize_+3A_nsteps">nsteps</code></td>
<td>
<p>an integer specifying the number of equally sized time steps.</p>
</td></tr>
<tr><td><code id="mt_time_normalize_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Time-normalization is often performed if the number of recorded x- and
y-positions varies across trajectories, which typically occurs when
trajectories vary in their response time. After time-normalization, all
trajectories have the same number of recorded positions (which is specified
using <code>nsteps</code>) and the positions at different relative time points can
be compared across trajectories.
</p>
<p>For example, time normalized trajectories can be compared across conditions
that differed in their overall response time, as the timestamps are now
relative to the overall trial duration. This is also helpful for creating
average trajectories, which are often used in plots.
</p>


<h3>Value</h3>

<p>A mousetrap data object (see <a href="#topic+mt_example">mt_example</a>) with an additional
array (by default called <code>tn_trajectories</code>) containing the
time-normalized trajectories. In this array, another dimension (called
<code>steps</code>) has been added with increasing integer values indexing the
time-normalized position. If a trajectory array was provided directly as
<code>data</code>, only the time-normalized trajectories will be returned.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>References</h3>

<p>Spivey, M. J., Grosjean, M., &amp; Knoblich, G. (2005). Continuous
attraction toward phonological competitors. <em>Proceedings of the
National Academy of Sciences of the United States of America, 102</em>(29),
10393-10398.
</p>


<h3>See Also</h3>

<p><a href="stats.html#topic+approxfun">approx</a> for information about the function used for
linear interpolation.
</p>
<p><a href="#topic+mt_resample">mt_resample</a> for resampling trajectories using a constant time
interval.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mt_example &lt;- mt_time_normalize(mt_example,
  save_as="tn_trajectories", nsteps=101)

</code></pre>

<hr>
<h2 id='print.mt_heatmap_raw'>Generic print for class mt_heatmap_raw</h2><span id='topic+print.mt_heatmap_raw'></span>

<h3>Description</h3>

<p><code>print.mt_heatmap_raw</code> shows <a href="utils.html#topic+str">str</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mt_heatmap_raw'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.mt_heatmap_raw_+3A_x">x</code></td>
<td>
<p>an object of class mt_heatmap_raw.</p>
</td></tr>
<tr><td><code id="print.mt_heatmap_raw_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>

<hr>
<h2 id='read_mt'>Read MouseTracker raw data.</h2><span id='topic+read_mt'></span>

<h3>Description</h3>

<p><code>read_mt</code> reads raw data that was collected using
<a href="http://www.mousetracker.org/">MouseTracker</a> (Freeman &amp; Ambady, 2010)
and stored as a file in the &quot;.mt&quot; format. If multiple files should be read
into R, <code>read_mt</code> can be used in combination with the
<a href="readbulk.html#topic+read_bulk">read_bulk</a> function from the
<a href="http://pascalkieslich.github.io/readbulk/">readbulk</a> package (see
Examples). After reading the data into R, <a href="#topic+mt_import_wide">mt_import_wide</a> can be used
to prepare the trajectory data for analyses using the mousetrap library. The
current version of <code>read_mt</code> has been tested with data from MouseTracker
Version 2.84 - but please be sure to double-check.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_mt(file, columns = "all", add_trialid = FALSE, add_filename = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_mt_+3A_file">file</code></td>
<td>
<p>a character string specifying the filename of the .mt file.</p>
</td></tr>
<tr><td><code id="read_mt_+3A_columns">columns</code></td>
<td>
<p>either 'all' or a character vector specifying the to be
extracted variables. Defaults to 'all' in which case all existing variables
will be extracted.</p>
</td></tr>
<tr><td><code id="read_mt_+3A_add_trialid">add_trialid</code></td>
<td>
<p>boolean specifying whether an additional column containing
the trial number should be added.</p>
</td></tr>
<tr><td><code id="read_mt_+3A_add_filename">add_filename</code></td>
<td>
<p>boolean specifying whether an additional column
containing the file name should be added.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="base.html#topic+data.frame">data.frame</a> with one row per trial. Variables are ordered
according to columns, x-coordinates, y-coordinates, and timestamps.
</p>


<h3>Author(s)</h3>

<p>Dirk U. Wulff
</p>


<h3>References</h3>

<p>Freeman, J. B., &amp; Ambady, N. (2010). MouseTracker: Software for
studying real-time mental processing using a computer mouse-tracking
method. <em>Behavior Research Methods, 42</em>(1), 226-241.
</p>


<h3>See Also</h3>

<p><a href="readbulk.html#topic+read_bulk">read_bulk</a> from the <code>readbulk</code> package for reading and
combining multiple raw data files.
</p>
<p><a href="#topic+mt_import_wide">mt_import_wide</a> to prepare the imported data for analyses in mousetrap.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Read a single raw data file from MouseTracker
# (stored in the current working directory)
mt_data_raw &lt;- read_mt("example.mt")

# Use read_bulk to read all raw data files ending with ".mt" that are
# stored in the folder "raw_data" (in the current working directory)
library(readbulk)
mt_data_raw &lt;- read_bulk("raw_data", fun=read_mt, extension=".mt")

# Import the data into mousetrap
mt_data &lt;- mt_import_wide(mt_data_raw)

## End(Not run)


</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>magrittr</dt><dd><p><code><a href="magrittr.html#topic+pipe">%&gt;%</a></code></p>
</dd>
</dl>

<hr>
<h2 id='scale_within'>Scale and center variables within the levels of another variable.</h2><span id='topic+scale_within'></span>

<h3>Description</h3>

<p><code>scale_within</code> centers and/or scales variables in a data.frame (using
<a href="base.html#topic+scale">scale</a>) depending on the levels of one or more other variables. By
default, variables are standardized (i.e., centered and scaled). A typical
application is the within-subject standardization of variables in a repeated
measures design.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_within(
  data,
  variables = NULL,
  within = NULL,
  prefix = "",
  center = TRUE,
  scale = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scale_within_+3A_data">data</code></td>
<td>
<p>a <a href="base.html#topic+data.frame">data.frame</a>.</p>
</td></tr>
<tr><td><code id="scale_within_+3A_variables">variables</code></td>
<td>
<p>a character string (or vector) specifying one or more
variables that <a href="base.html#topic+scale">scale</a> is applied to. If unspecified,
<code>scale_within</code> will be applied to all variables in data.</p>
</td></tr>
<tr><td><code id="scale_within_+3A_within">within</code></td>
<td>
<p>an optional character string specifying the name of one or more
variables in <code>data</code>. If specified, <a href="base.html#topic+scale">scale</a> is applied separately
for each of the levels of the variable (or for each combination of levels,
if more than one variable is specified). Alternatively, a vector directly
containing the level values.</p>
</td></tr>
<tr><td><code id="scale_within_+3A_prefix">prefix</code></td>
<td>
<p>a character string that is inserted before each scaled
variable. By default (empty string) the original variables are replaced.</p>
</td></tr>
<tr><td><code id="scale_within_+3A_center">center</code></td>
<td>
<p>argument passed on to <a href="base.html#topic+scale">scale</a>.</p>
</td></tr>
<tr><td><code id="scale_within_+3A_scale">scale</code></td>
<td>
<p>argument passed on to <a href="base.html#topic+scale">scale</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The original data.frame including the centered and / or scaled
variables.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>See Also</h3>

<p><a href="base.html#topic+scale">scale</a> for the R base scale function.
</p>
<p><a href="#topic+mt_standardize">mt_standardize</a> for standardizing measures in a mousetrap data object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ChickWeight_scaled &lt;-  scale_within(
 ChickWeight, variables="weight",
 within="Chick", prefix="z_")
 
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
