<!DOCTYPE html><html><head><title>Help for package earthtide</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {earthtide}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#earthtide-package'><p>earthtide: R port of the earth tide processing package ETERNA</p>
(by Hans-Georg Wenzel) including the Kudryavtsev wave catalog.</a></li>
<li><a href='#calc_earthtide'><p>earthtide</p></a></li>
<li><a href='#Earthtide'><p>Earthtide class</p></a></li>
<li><a href='#eterna_wavegroups'><p>Hartmann and Wenzel (1995) (ETERNA 3.4) wavegroups</p></a></li>
<li><a href='#get_iers'><p>get_iers</p></a></li>
<li><a href='#get_main_frequency'><p>get_main_frequency</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Parallel Implementation of 'ETERNA 3.40' for Prediction and
Analysis of Earth Tides</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jonathan Kennel &lt;jkennel@uoguelph.ca&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>This is a port of 'Fortran ETERNA 3.4' 
             <a href="http://igets.u-strasbg.fr/soft_and_tool.php">http://igets.u-strasbg.fr/soft_and_tool.php</a> by H.G. Wenzel
             for calculating synthetic Earth tides using the 
             Hartmann and Wenzel (1994) &lt;<a href="https://doi.org/10.1029%2F95GL03324">doi:10.1029/95GL03324</a>&gt; or 
             Kudryavtsev (2004) &lt;<a href="https://doi.org/10.1007%2Fs00190-003-0361-2">doi:10.1007/s00190-003-0361-2</a>&gt; tidal catalogs. </td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jkennel/earthtide/issues">https://github.com/jkennel/earthtide/issues</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jkennel/earthtide">https://github.com/jkennel/earthtide</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 1.0.0), R6 (&ge; 2.3.0), RcppThread</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp (&ge; 1.0.0), RcppThread, RcppEigen</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 2.1.0), knitr, rmarkdown, covr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>C++17</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-14 15:06:06 UTC; jonathankennel</td>
</tr>
<tr>
<td>Author:</td>
<td>Jonathan Kennel [aut, cre, trl],
  Beth Parker [ths],
  Wenzel Hans-Georg [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-15 10:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='earthtide-package'>earthtide: R port of the earth tide processing package ETERNA
(by Hans-Georg Wenzel) including the Kudryavtsev wave catalog.</h2><span id='topic+earthtide-package'></span><span id='topic+_PACKAGE'></span>

<h3>Description</h3>

<p>The goal of this package is to generate synthetic earth tides for use in the
R programming language and in particular environmental models. Code was
parallized and refactored to minimize duplication, and to allow for future
improvements.
</p>


<h3>Details</h3>

<p>You can learn about the earthtide package in the vignettes:
<code>browseVignettes(package = "earthtide")</code>
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Jonathan Kennel <a href="mailto:jkennel@uoguelph.ca">jkennel@uoguelph.ca</a> [translator]
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Beth Parker <a href="mailto:bparker@uoguelph.ca">bparker@uoguelph.ca</a> [thesis advisor]
</p>
</li>
<li><p> Wenzel Hans-Georg [contributor]
</p>
</li></ul>



<h3>References</h3>

<p>Hartmann, T., Wenzel, H.-G., 1995. The HW95 tidal potential
catalogue. Geophys. Res. Lett. 22, 3553-3556. <a href="https://doi.org/10.1029/95GL03324">doi:10.1029/95GL03324</a>
</p>
<p>Kudryavtsev, S.M., 2004. Improved harmonic development of
the Earth tide-generating potential. J. Geod. 77, 829-838.
<a href="https://doi.org/10.1007/s00190-003-0361-2">doi:10.1007/s00190-003-0361-2</a>
</p>
<p>Wenzel, H.G., 1996. The nanogal software: Earth tide data
processing package ETERNA 3.30. Bull. Inf. Mar√©es Terrestres, 124,
pp.9425-9439. <a href="https://www.eas.slu.edu/GGP/ETERNA34/MANUAL/ETERNA33.HTM">https://www.eas.slu.edu/GGP/ETERNA34/MANUAL/ETERNA33.HTM</a>
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/jkennel/earthtide">https://github.com/jkennel/earthtide</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/jkennel/earthtide/issues">https://github.com/jkennel/earthtide/issues</a>
</p>
</li></ul>


<hr>
<h2 id='calc_earthtide'>earthtide</h2><span id='topic+calc_earthtide'></span>

<h3>Description</h3>

<p>This is a wrapper to the Earthtide R6 class for the prediction
of Earth tides. This function is provided for users who would prefer a more
typical R function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_earthtide(
  utc,
  do_predict = TRUE,
  method = "gravity",
  latitude = 0,
  longitude = 0,
  elevation = 0,
  azimuth = 0,
  gravity = 0,
  earth_radius = 6378136.3,
  earth_eccen = 0.0066943979514,
  cutoff = 1e-06,
  wave_groups = NULL,
  catalog = "ksm04",
  eop = NULL,
  return_matrix = FALSE,
  scale = TRUE,
  n_thread = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calc_earthtide_+3A_utc">utc</code></td>
<td>
<p>The date-time in UTC (POSIXct vector).</p>
</td></tr>
<tr><td><code id="calc_earthtide_+3A_do_predict">do_predict</code></td>
<td>
<p>run in predict or analyze mode</p>
</td></tr>
<tr><td><code id="calc_earthtide_+3A_method">method</code></td>
<td>
<p>One or more of &quot;gravity&quot;,
&quot;tidal_potential&quot;, &quot;tidal_tilt&quot;, &quot;vertical_displacement&quot;,
&quot;horizontal_displacement&quot;, &quot;n_s_displacement&quot;, &quot;e_w_displacement&quot;,
&quot;vertical_strain&quot;, &quot;areal_strain&quot;, &quot;volume_strain&quot;, &quot;horizontal_strain&quot;,
or &quot;ocean_tides&quot;, &quot;pole_tide&quot;, &quot;lod_tide&quot;. The pole tide and lod_tide
are used in predict mode even if do_predict is FALSE. More than one value
can only be used if do_predict == TRUE.</p>
</td></tr>
<tr><td><code id="calc_earthtide_+3A_latitude">latitude</code></td>
<td>
<p>The station latitude (numeric) defaults to 0.</p>
</td></tr>
<tr><td><code id="calc_earthtide_+3A_longitude">longitude</code></td>
<td>
<p>The station longitude (numeric) defaults to 0.</p>
</td></tr>
<tr><td><code id="calc_earthtide_+3A_elevation">elevation</code></td>
<td>
<p>The station elevation (m) (numeric) defaults to 0.</p>
</td></tr>
<tr><td><code id="calc_earthtide_+3A_azimuth">azimuth</code></td>
<td>
<p>Earth azimuth (numeric) defaults to 0.</p>
</td></tr>
<tr><td><code id="calc_earthtide_+3A_gravity">gravity</code></td>
<td>
<p>Gravity at the station (m/s^2) (numeric) 0 to
estimate gravity from elevation and latitude.</p>
</td></tr>
<tr><td><code id="calc_earthtide_+3A_earth_radius">earth_radius</code></td>
<td>
<p>Radius of earth (m) (numeric) defaults to 6378136.3</p>
</td></tr>
<tr><td><code id="calc_earthtide_+3A_earth_eccen">earth_eccen</code></td>
<td>
<p>Eccentricity of earth (numeric)
defaults to 6.69439795140e-3</p>
</td></tr>
<tr><td><code id="calc_earthtide_+3A_cutoff">cutoff</code></td>
<td>
<p>Cutoff amplitude for constituents (numeric)
defaults to 1e-6.</p>
</td></tr>
<tr><td><code id="calc_earthtide_+3A_wave_groups">wave_groups</code></td>
<td>
<p>Two column data.frame having start and end of
frequency groups (data.frame). This data.frame must have two columns
with the names 'start', and 'end' signifying the start and end of the
wave groupings.  An optional third column 'multiplier' can be provided
to scale the particular wave group.  If column names do no match, the
inferred column positions are start, end, multiplier.</p>
</td></tr>
<tr><td><code id="calc_earthtide_+3A_catalog">catalog</code></td>
<td>
<p>Use the &quot;hw95s&quot; catalog or &quot;ksm04&quot; catalog (character).</p>
</td></tr>
<tr><td><code id="calc_earthtide_+3A_eop">eop</code></td>
<td>
<p>User defined Earth Orientation Parameter (EOP) data.frame with the
following columns: datetime, ddt, ut1_utc, lod, x, y, dx, dy</p>
</td></tr>
<tr><td><code id="calc_earthtide_+3A_return_matrix">return_matrix</code></td>
<td>
<p>Return a matrix of tidal values instead of data.frame.
The datetime column will not be present in this case (logical).</p>
</td></tr>
<tr><td><code id="calc_earthtide_+3A_scale">scale</code></td>
<td>
<p>Scale results when do_predict is FALSE</p>
</td></tr>
<tr><td><code id="calc_earthtide_+3A_n_thread">n_thread</code></td>
<td>
<p>Number of threads to use for parallel processing (integer).</p>
</td></tr>
<tr><td><code id="calc_earthtide_+3A_...">...</code></td>
<td>
<p>Currently not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame or matrix of tidal results
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tms &lt;- as.POSIXct("1990-01-01", tz = "UTC") + c(0, 3600)
wave_groups &lt;- data.frame(start = 0, end = 8, multiplier = 1.5)

et &lt;- calc_earthtide(
  utc = tms,
  do_predict = TRUE,
  method = c("tidal_potential", "lod_tide", "pole_tide"),
  latitude = 52.3868,
  longitude = 9.7144,
  elevation = 110,
  gravity = 9.8127,
  cutoff = 1.0e-5,
  catalog = "ksm04",
  wave_groups = wave_groups,
  n_thread = 1
)
</code></pre>

<hr>
<h2 id='Earthtide'>Earthtide class</h2><span id='topic+Earthtide'></span><span id='topic+Earthtide-class'></span>

<h3>Description</h3>

<p>Class to generate synthetic earthtide signals.
</p>


<h3>Format</h3>

<p>An <code><a href="R6.html#topic+R6Class">R6Class</a></code> generator object
</p>


<h3>Usage</h3>

<pre>
et &lt;- Earthtide$new(
  utc = as.POSIXct("2017-01-01", tz = "UTC") + 0:(24 * 7) * 3600,
  latitude = 52.3868,
  longitude = 9.7144,
  catalog = "ksm04",
  wave_groups = data.frame(start = 0.0, end = 6.0))

et$predict(method = "gravity", n_thread = 1)
et$analyze(method = "gravity", n_thread = 1)
et$lod_tide()
et$pole_tide()
et$tide()
et$print()
</pre>


<h3>Arguments</h3>

<p><code>Earthtide$new</code>
</p>

<dl>
<dt>et: </dt><dd><p>An <code>Earthtide</code> object.</p>
</dd>
<dt>utc: </dt><dd><p>The date-time in UTC (POSIXct vector).</p>
</dd>
<dt>latitude: </dt><dd><p>The station latitude (WGS84) (degree) (numeric)
defaults to 0.0</p>
</dd>
<dt>longitude: </dt><dd><p>The station longitude (WGS84) (degree) (numeric)
defaults to 0.0</p>
</dd>
<dt>elevation: </dt><dd><p>The station ellipsoidal height (WGS84) (m) (numeric)
defaults to 0.0</p>
</dd>
<dt>azimuth: </dt><dd><p>Earth azimuth (numeric) defaults to 0 (degrees)</p>
</dd>
<dt>gravity: </dt><dd><p>Gravity at the station (m/s^2) (numeric) 0 to
estimate gravity from elevation and latitude.</p>
</dd>
<dt>earth_radius: </dt><dd><p>Radius of earth (m) (numeric) defaults to 6378136.3 </p>
</dd>
<dt>earth_eccen: </dt><dd><p>Eccentricity of earth (numeric)
defaults to 6.69439795140e-3</p>
</dd>
<dt>cutoff: </dt><dd><p>Cutoff amplitude for constituents (numeric)
defaults to 1e-6</p>
</dd>
<dt>wave_groups: </dt><dd><p>Two column data.frame having start and end of
frequency groups (data.frame). This data.frame must have two columns
with the names 'start', and 'end' signifying the start and end of the
wave groupings.  An optional third column 'multiplier' can be provided
to scale the particular wave group.  If column names do no match, the
inferred column positions are start, end, multiplier.</p>
</dd>
<dt>catalog: </dt><dd><p>Use the &quot;hw95s&quot; catalog or &quot;ksm04&quot; catalog (character).</p>
</dd>
<dt>eop: </dt><dd><p>User defined Earth Orientation Parameter (EOP) data.frame
with the following columns: datetime, ddt, ut1_utc, lod, x, y, dx, dy</p>
</dd>
<dt>...: </dt><dd><p>Currently not used.</p>
</dd>
</dl>

<p><code>Earthtide$predict, Earthtide$analyze</code>
</p>

<dl>
<dt>method: </dt><dd><p>For <code>predict</code> and <code>analyze</code>. One of &quot;gravity&quot;,
&quot;tidal_potential&quot;, &quot;tidal_tilt&quot;, &quot;vertical_displacement&quot;,
&quot;horizontal_displacement&quot;, &quot;n_s_displacement&quot;, &quot;e_w_displacement&quot;,
&quot;vertical_strain&quot;, &quot;areal_strain&quot;, &quot;volume_strain&quot;, &quot;horizontal_strain&quot;
or &quot;ocean_tides&quot;.</p>
</dd>
<dt>return_matrix: </dt><dd><p>For <code>predict</code> and <code>analyze</code>. Return a
matrix of tidal values instead of data.frame. The datetime column will
not be present in this case (logical).</p>
</dd>
<dt>n_thread: </dt><dd><p>For <code>predict</code> and <code>analyze</code>. Number of threads
to use for parallel processing.</p>
</dd>
</dl>



<h3>Details</h3>

<p><code>$new(utc, latitude, longitude, elevation, azimuth, gravity,</code> <br />
<code>earth_radius, earth_eccen, cutoff, wave_groups, catalog, ...)</code> <br />
create a new <code>Earthtide</code> object and initialize catalog, station
and times.
</p>
<p><code>$predict(method, astro_argument, return_matrix)</code> generate a combined
synthetic Earth tide.
</p>
<p><code>$analyze(method, astro_argument, return_matrix, scale)</code> generate
components of the Earth tide for analysis.
</p>
<p><code>$lod_tide()</code> generate components of the LOD (Length Of Day) tide.
</p>
<p><code>$pole_tide()</code> generate components of the pole tide.
</p>
<p><code>$tide()</code> get the tide <code>data.frame</code>.
</p>
<p><code>$print()</code> print the <code>Earthtide</code> object.
</p>


<h3>References</h3>

<p>Hartmann, T., Wenzel, H.-G., 1995. The HW95 tidal potential catalogue. Geophys. Res. Lett. 22, 3553-3556. <a href="https://doi.org/10.1029/95GL03324">doi:10.1029/95GL03324</a>
</p>
<p>Kudryavtsev, S.M., 2004. Improved harmonic development of the Earth tide-generating potential. J. Geod. 77, 829-838. <a href="https://doi.org/10.1007/s00190-003-0361-2">doi:10.1007/s00190-003-0361-2</a>
</p>
<p>Wenzel, H.G., 1996. The nanogal software: Earth tide data processing package ETERNA 3.30. Bull. Inf. Mar√©es Terrestres, 124, pp.9425-9439. <a href="https://www.eas.slu.edu/GGP/ETERNA34/MANUAL/ETERNA33.HTM">https://www.eas.slu.edu/GGP/ETERNA34/MANUAL/ETERNA33.HTM</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
et &lt;- Earthtide$new(
  utc = as.POSIXct("2017-01-01", tz = "UTC") + 0:(24 * 7) * 3600,
  latitude = 52.3868,
  longitude = 9.7144,
  catalog = "ksm04",
  wave_groups = data.frame(start = 0.0, end = 6.0)
)

et$predict(method = "gravity")

plot(gravity ~ datetime, et$tide(), type = "l")

</code></pre>

<hr>
<h2 id='eterna_wavegroups'>Hartmann and Wenzel (1995) (ETERNA 3.4) wavegroups</h2><span id='topic+eterna_wavegroups'></span>

<h3>Description</h3>

<p>This data.frame contains wavegroups for different data time
spans.  The wavegroups should be subset prior to use and the 'time' column
provides guidelines based on your input time span.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eterna_wavegroups
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> The columns are:
</p>

<dl>
<dt><code>name</code></dt><dd><p>wave group name</p>
</dd>
<dt><code>start</code></dt><dd><p>lowest frequency of the wave group</p>
</dd>
<dt><code>end</code></dt><dd><p>highest frequency of the wave group</p>
</dd>
<dt><code>time</code></dt><dd><p>applicable to data of what length</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>utils::data(eterna_wavegroups)
</code></pre>

<hr>
<h2 id='get_iers'>get_iers</h2><span id='topic+get_iers'></span>

<h3>Description</h3>

<p><code>get_iers</code> returns a <code>data.frame</code> of earth orientation
parameters from (1962-present).  This function requires an active internet
connection. Bulletins A and B are combined giving precedence to B.
Approximately (~ 7 MB) of data are downloaded. This function is brittle and
may fail when data sources change.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_iers(a_path = NULL, b_path = NULL, daily_path = NULL, tai_utc_path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_iers_+3A_a_path">a_path</code></td>
<td>
<p>ftp or http path to download IERS bullitin A</p>
</td></tr>
<tr><td><code id="get_iers_+3A_b_path">b_path</code></td>
<td>
<p>ftp or http path to download IERS bullitin B</p>
</td></tr>
<tr><td><code id="get_iers_+3A_daily_path">daily_path</code></td>
<td>
<p>ftp or http path to download IERS daily data</p>
</td></tr>
<tr><td><code id="get_iers_+3A_tai_utc_path">tai_utc_path</code></td>
<td>
<p>ftp or http path to tai-utc data</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code> of earth orientation parameters with the following
columns: datetime, ddt, ut1_utc, lod, x, y, dx, dy.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
eop &lt;- get_iers()

## End(Not run)

</code></pre>

<hr>
<h2 id='get_main_frequency'>get_main_frequency</h2><span id='topic+get_main_frequency'></span>

<h3>Description</h3>

<p>Get the frequency of the wave with the maximum amplitude in a range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_main_frequency(start, end)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_main_frequency_+3A_start">start</code></td>
<td>
<p>the starting frequency in cycles per day (numeric)</p>
</td></tr>
<tr><td><code id="get_main_frequency_+3A_end">end</code></td>
<td>
<p>the ending frequency in cycles per day (numeric)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the main frequency between start and end
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
