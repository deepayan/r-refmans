<!DOCTYPE html><html><head><title>Help for package quanteda.textplots</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {quanteda.textplots}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#quanteda.textplots-package'><p>quanteda.textplots: Plots for the Quantitative Analysis of Textual Data</p></a></li>
<li><a href='#as.igraph'><p>Convert an fcm to an igraph object</p></a></li>
<li><a href='#as.network'><p>redefinition of network::as.network()</p></a></li>
<li><a href='#check_font'><p>Check if font is available on the system</p></a></li>
<li><a href='#textplot_keyness'><p>Plot word keyness</p></a></li>
<li><a href='#textplot_network'><p>Plot a network of feature co-occurrences</p></a></li>
<li><a href='#textplot_scale1d'><p>Plot a fitted scaling model</p></a></li>
<li><a href='#textplot_wordcloud'><p>Plot features as a wordcloud</p></a></li>
<li><a href='#textplot_xray'><p>Plot the dispersion of key word(s)</p></a></li>
<li><a href='#wordcloud'><p>Internal function for textplot_wordcloud</p></a></li>
<li><a href='#wordcloud_comparison'><p>Internal function for textplot_wordcloud</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Plots for the Quantitative Analysis of Textual Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.94.4</td>
</tr>
<tr>
<td>Description:</td>
<td>Plotting functions for visualising textual data.  Extends 'quanteda' and 
   related packages with plot methods designed specifically for text data, textual statistics, 
   and models fit to textual data. Plot types include word clouds, lexical dispersion plots, 
   scaling plots, network visualisations, and word 'keyness' plots.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>quanteda, extrafont, ggplot2, ggrepel, grid, sna, igraph,
Matrix, methods, network, RColorBrewer, Rcpp (&ge; 0.12.12),
stringi</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, quanteda.textmodels, quanteda.textstats, rmarkdown,
spelling, testthat, wordcloud</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/quanteda/quanteda.textplots/issues">https://github.com/quanteda/quanteda.textplots/issues</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-24 20:23:55 UTC; kbenoit</td>
</tr>
<tr>
<td>Author:</td>
<td>Kenneth Benoit <a href="https://orcid.org/0000-0002-0797-564X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [cre, aut, cph],
  Kohei Watanabe <a href="https://orcid.org/0000-0001-6519-5265"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Haiyan Wang <a href="https://orcid.org/0000-0003-4992-4311"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Adam Obeng <a href="https://orcid.org/0000-0002-2906-4775"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Stefan Müller <a href="https://orcid.org/0000-0002-6315-4125"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Akitaka Matsuo <a href="https://orcid.org/0000-0002-3323-6330"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Ian Fellows [cph] (authored wordcloud C source code (modified)),
  European Research Council [fnd] (ERC-2011-StG 283794-QUANTESS)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kenneth Benoit &lt;kbenoit@lse.ac.uk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-25 14:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='quanteda.textplots-package'>quanteda.textplots: Plots for the Quantitative Analysis of Textual Data</h2><span id='topic+quanteda.textplots'></span><span id='topic+quanteda.textplots-package'></span>

<h3>Description</h3>

<p>Plotting functions for visualising textual data. Extends 'quanteda' and related packages with plot methods designed specifically for text data, textual statistics, and models fit to textual data. Plot types include word clouds, lexical dispersion plots, scaling plots, network visualisations, and word 'keyness' plots.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Kenneth Benoit <a href="mailto:kbenoit@lse.ac.uk">kbenoit@lse.ac.uk</a> (<a href="https://orcid.org/0000-0002-0797-564X">ORCID</a>) [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Kohei Watanabe <a href="mailto:watanabe.kohei@gmail.com">watanabe.kohei@gmail.com</a> (<a href="https://orcid.org/0000-0001-6519-5265">ORCID</a>)
</p>
</li>
<li><p> Haiyan Wang <a href="mailto:whyinsa@yahoo.com">whyinsa@yahoo.com</a> (<a href="https://orcid.org/0000-0003-4992-4311">ORCID</a>)
</p>
</li>
<li><p> Adam Obeng <a href="mailto:quanteda@binaryeagle.com">quanteda@binaryeagle.com</a> (<a href="https://orcid.org/0000-0002-2906-4775">ORCID</a>)
</p>
</li>
<li><p> Stefan Müller <a href="mailto:mullers@tcd.ie">mullers@tcd.ie</a> (<a href="https://orcid.org/0000-0002-6315-4125">ORCID</a>)
</p>
</li>
<li><p> Akitaka Matsuo <a href="mailto:a.matsuo@lse.ac.uk">a.matsuo@lse.ac.uk</a> (<a href="https://orcid.org/0000-0002-3323-6330">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Ian Fellows <a href="mailto:ian@fellstat.com">ian@fellstat.com</a> (authored wordcloud C source code (modified)) [copyright holder]
</p>
</li>
<li><p> European Research Council (ERC-2011-StG 283794-QUANTESS) [funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li><p> Report bugs at <a href="https://github.com/quanteda/quanteda.textplots/issues">https://github.com/quanteda/quanteda.textplots/issues</a>
</p>
</li></ul>


<hr>
<h2 id='as.igraph'>Convert an fcm to an igraph object</h2><span id='topic+as.igraph'></span>

<h3>Description</h3>

<p>Convert an <a href="quanteda.html#topic+fcm">fcm</a> object to an <span class="pkg">igraph</span> graph object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.igraph(x, ...)
</code></pre>

<hr>
<h2 id='as.network'>redefinition of network::as.network()</h2><span id='topic+as.network'></span>

<h3>Description</h3>

<p>redefinition of network::as.network()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.network(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.network_+3A_x">x</code></td>
<td>
<p>input object</p>
</td></tr>
<tr><td><code id="as.network_+3A_...">...</code></td>
<td>
<p>additional arguments</p>
</td></tr>
</table>

<hr>
<h2 id='check_font'>Check if font is available on the system</h2><span id='topic+check_font'></span>

<h3>Description</h3>

<p>This function checks if custom font is available to <span class="pkg">ggplot2</span> and
<span class="pkg">graphics</span> APIs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_font(font)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_font_+3A_font">font</code></td>
<td>
<p>name of a font to be checked if available on the system.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character string
</p>

<hr>
<h2 id='textplot_keyness'>Plot word keyness</h2><span id='topic+textplot_keyness'></span>

<h3>Description</h3>

<p>Plot the results of a &quot;keyword&quot; of features comparing their differential
associations with a target and a reference group, after calculating keyness
using <code><a href="quanteda.textstats.html#topic+textstat_keyness">quanteda.textstats::textstat_keyness()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>textplot_keyness(
  x,
  show_reference = TRUE,
  show_legend = TRUE,
  n = 20L,
  min_count = 2L,
  margin = 0.05,
  color = c("darkblue", "gray"),
  labelcolor = "gray30",
  labelsize = 4,
  font = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="textplot_keyness_+3A_x">x</code></td>
<td>
<p>a return object from <code><a href="quanteda.textstats.html#topic+textstat_keyness">quanteda.textstats::textstat_keyness()</a></code></p>
</td></tr>
<tr><td><code id="textplot_keyness_+3A_show_reference">show_reference</code></td>
<td>
<p>logical; if <code>TRUE</code>, show key reference features in
addition to key target features</p>
</td></tr>
<tr><td><code id="textplot_keyness_+3A_show_legend">show_legend</code></td>
<td>
<p>logical; if <code>TRUE</code>, show legend</p>
</td></tr>
<tr><td><code id="textplot_keyness_+3A_n">n</code></td>
<td>
<p>integer; number of features to plot</p>
</td></tr>
<tr><td><code id="textplot_keyness_+3A_min_count">min_count</code></td>
<td>
<p>numeric; minimum total count of feature across the target
and reference categories, for a feature to be included in the plot</p>
</td></tr>
<tr><td><code id="textplot_keyness_+3A_margin">margin</code></td>
<td>
<p>numeric; size of margin where feature labels are shown</p>
</td></tr>
<tr><td><code id="textplot_keyness_+3A_color">color</code></td>
<td>
<p>character or integer; colours of bars for target and reference
documents. <code>color</code> must have two elements when <code>show_reference = TRUE</code>.
See <a href="ggplot2.html#topic+aes_colour_fill_alpha">ggplot2::color</a>.</p>
</td></tr>
<tr><td><code id="textplot_keyness_+3A_labelcolor">labelcolor</code></td>
<td>
<p>character; color of feature labels.</p>
</td></tr>
<tr><td><code id="textplot_keyness_+3A_labelsize">labelsize</code></td>
<td>
<p>numeric; size of feature labels and bars.  See
<a href="ggplot2.html#topic+aes_linetype_size_shape">ggplot2::size</a>.</p>
</td></tr>
<tr><td><code id="textplot_keyness_+3A_font">font</code></td>
<td>
<p>character; font-family of texts. Use default font if <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <span class="pkg">ggplot2</span> object
</p>


<h3>Author(s)</h3>

<p>Haiyan Wang and Kohei Watanabe
</p>


<h3>See Also</h3>

<p><code><a href="quanteda.textstats.html#topic+textstat_keyness">quanteda.textstats::textstat_keyness()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library("quanteda")
# compare Trump speeches to other Presidents by chi^2
dfmat1 &lt;- data_corpus_inaugural |&gt;
     corpus_subset(Year &gt; 1980) |&gt;
     tokens(remove_punct = TRUE) |&gt;
     tokens_remove(stopwords("en")) |&gt;
     dfm()
dfmat1 &lt;- dfm_group(dfmat1, groups = dfmat1$President)
tstat1 &lt;- quanteda.textstats::textstat_keyness(dfmat1, target = "Trump")
textplot_keyness(tstat1, margin = 0.2, n = 10)
tstat1 &lt;- quanteda.textstats::textstat_keyness(dfmat1, target = "Trump")
textplot_keyness(tstat1, margin = 0.2, n = 10)

# compare contemporary Democrats v. Republicans
corp &lt;- data_corpus_inaugural |&gt;
    corpus_subset(Year &gt; 1960)
corp$party &lt;- ifelse(docvars(corp, "President") %in% c("Nixon", "Reagan", "Bush", "Trump"),
                     "Republican", "Democrat")
dfmat2 &lt;- corp |&gt;
    tokens(remove_punct = TRUE) |&gt;
    tokens_remove(stopwords("en")) |&gt;
    dfm()
tstat2 &lt;- quanteda.textstats::textstat_keyness(dfm_group(dfmat2, groups = dfmat2$party),
                                               target = "Democrat", measure = "lr")
textplot_keyness(tstat2, color = c("blue", "red"), n = 10)

## End(Not run)
</code></pre>

<hr>
<h2 id='textplot_network'>Plot a network of feature co-occurrences</h2><span id='topic+textplot_network'></span><span id='topic+as.network.fcm'></span><span id='topic+as.igraph.fcm'></span>

<h3>Description</h3>

<p>Plot an <a href="quanteda.html#topic+fcm">fcm</a> object as a network, where edges show co-occurrences of
features.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>textplot_network(
  x,
  min_freq = 0.5,
  omit_isolated = TRUE,
  edge_color = "#1F78B4",
  edge_alpha = 0.5,
  edge_size = 2,
  vertex_color = "#4D4D4D",
  vertex_size = 2,
  vertex_labelcolor = NULL,
  vertex_labelfont = NULL,
  vertex_labelsize = 5,
  offset = NULL,
  ...
)

## S3 method for class 'fcm'
as.network(x, min_freq = 0.5, omit_isolated = TRUE, ...)

## S3 method for class 'fcm'
as.igraph(x, min_freq = 0.5, omit_isolated = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="textplot_network_+3A_x">x</code></td>
<td>
<p>a <a href="quanteda.html#topic+fcm">fcm</a> or <a href="quanteda.html#topic+dfm">dfm</a>  object</p>
</td></tr>
<tr><td><code id="textplot_network_+3A_min_freq">min_freq</code></td>
<td>
<p>a frequency count threshold or proportion for co-occurrence
frequencies of features to be included.</p>
</td></tr>
<tr><td><code id="textplot_network_+3A_omit_isolated">omit_isolated</code></td>
<td>
<p>if <code>TRUE</code>, features do not occur more frequent than
<code>min_freq</code> will be omitted.</p>
</td></tr>
<tr><td><code id="textplot_network_+3A_edge_color">edge_color</code></td>
<td>
<p>colour of edges that connect vertices.</p>
</td></tr>
<tr><td><code id="textplot_network_+3A_edge_alpha">edge_alpha</code></td>
<td>
<p>opacity of edges ranging from 0 to 1.0.</p>
</td></tr>
<tr><td><code id="textplot_network_+3A_edge_size">edge_size</code></td>
<td>
<p>size of edges for most frequent co-occurrence The size of
other edges are determined proportionally to the 99th percentile frequency
instead of the maximum to reduce the impact of outliers.</p>
</td></tr>
<tr><td><code id="textplot_network_+3A_vertex_color">vertex_color</code></td>
<td>
<p>colour of vertices.</p>
</td></tr>
<tr><td><code id="textplot_network_+3A_vertex_size">vertex_size</code></td>
<td>
<p>size of vertices</p>
</td></tr>
<tr><td><code id="textplot_network_+3A_vertex_labelcolor">vertex_labelcolor</code></td>
<td>
<p>colour of texts. Defaults to the same as
<code>vertex_color</code>. If <code>NA</code> is given, texts are not rendered.</p>
</td></tr>
<tr><td><code id="textplot_network_+3A_vertex_labelfont">vertex_labelfont</code></td>
<td>
<p>font-family of texts. Use default font if
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="textplot_network_+3A_vertex_labelsize">vertex_labelsize</code></td>
<td>
<p>size of vertex labels in mm. Defaults to size 5.
Supports both integer values and vector values.</p>
</td></tr>
<tr><td><code id="textplot_network_+3A_offset">offset</code></td>
<td>
<p>if <code>NULL</code>, the distance between vertices and texts are
determined automatically.</p>
</td></tr>
<tr><td><code id="textplot_network_+3A_...">...</code></td>
<td>
<p>additional arguments passed to <a href="network.html#topic+network">network</a> or
<a href="igraph.html#topic+graph_from_adjacency_matrix">graph_from_adjacency_matrix</a>.  Not
used for <code>as.igraph</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently the size of the network is limited to 1000, because of the
computationally intensive nature of network formation for larger matrices.
When the <a href="quanteda.html#topic+fcm">fcm</a> is large, users should select features using
<a href="quanteda.html#topic+fcm_select">fcm_select</a>, set the threshold using <code>min_freq</code>, or implement
own plotting function using <code><a href="#topic+as.network.fcm">as.network()</a></code>.
</p>


<h3>Author(s)</h3>

<p>Kohei Watanabe and Stefan Müller
</p>


<h3>See Also</h3>

<p><code><a href="quanteda.html#topic+fcm">fcm()</a></code>
</p>
<p><code><a href="network.html#topic+network">network::network()</a></code>
</p>
<p><code><a href="igraph.html#topic+graph_from_adjacency_matrix">igraph::graph_from_adjacency_matrix()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(100)
library("quanteda")
toks &lt;- data_char_ukimmig2010 |&gt;
    tokens(remove_punct = TRUE) |&gt;
    tokens_tolower() |&gt;
    tokens_remove(pattern = stopwords("english"), padding = FALSE)
fcmat &lt;- fcm(toks, context = "window", tri = FALSE)
feat &lt;- colSums(fcmat) |&gt;
  sort(decreasing = TRUE) |&gt;
  head(30) |&gt;
  names()
fcm_select(fcmat, pattern = feat) |&gt;
    textplot_network(min_freq = 0.5)
fcm_select(fcmat, pattern = feat) |&gt;
    textplot_network(min_freq = 0.8)
fcm_select(fcmat, pattern = feat) |&gt;
    textplot_network(min_freq = 0.8, vertex_labelcolor = rep(c('gray40', NA), 15))
fcm_select(fcmat, pattern = feat) |&gt;
    textplot_network(vertex_labelsize = 10)
fcm_30 &lt;- fcm_select(fcmat, pattern = feat)
textplot_network(fcm_30,
                 vertex_labelsize = Matrix::rowSums(fcm_30) / min(Matrix::rowSums(fcm_30)))
# Vector inputs to vertex_labelsize can be scaled if too small / large
textplot_network(fcm_30,
                 vertex_labelsize = 1.5 * Matrix::rowSums(fcm_30) /
                                    min(Matrix::rowSums(fcm_30)))

# as.igraph
if (requireNamespace("igraph", quietly = TRUE)) {
    txt &lt;- c("a a a b b c", "a a c e", "a c e f g")
    mat &lt;- fcm(tokens(txt))
    as.igraph(mat, min_freq = 1, omit_isolated = FALSE)
}
</code></pre>

<hr>
<h2 id='textplot_scale1d'>Plot a fitted scaling model</h2><span id='topic+textplot_scale1d'></span>

<h3>Description</h3>

<p>Plot the results of a fitted scaling model, from (e.g.) a predicted
<a href="quanteda.textmodels.html#topic+textmodel_wordscores">quanteda.textmodels::textmodel_wordscores</a> model or a fitted
<a href="quanteda.textmodels.html#topic+textmodel_wordfish">quanteda.textmodels::textmodel_wordfish</a> or
<a href="quanteda.textmodels.html#topic+textmodel_ca">quanteda.textmodels::textmodel_ca</a> model. Either document or feature
parameters may be plotted: an ideal point-style plot (estimated document
position plus confidence interval on the x-axis, document labels on the
y-axis) with optional renaming and sorting, or as a plot of estimated
feature-level parameters (estimated feature positions on the x-axis, and a
measure of relative frequency or influence on the y-axis, with feature names
replacing plotting points with some being chosen by the user to be
highlighted).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>textplot_scale1d(
  x,
  margin = c("documents", "features"),
  doclabels = NULL,
  sort = TRUE,
  groups = NULL,
  highlighted = NULL,
  alpha = 0.7,
  highlighted_color = "black"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="textplot_scale1d_+3A_x">x</code></td>
<td>
<p>the fitted or predicted scaling model object to be plotted</p>
</td></tr>
<tr><td><code id="textplot_scale1d_+3A_margin">margin</code></td>
<td>
<p><code>"documents"</code> to plot estimated document scores (the
default) or <code>"features"</code> to plot estimated feature scores by a measure
of relative frequency</p>
</td></tr>
<tr><td><code id="textplot_scale1d_+3A_doclabels">doclabels</code></td>
<td>
<p>a vector of names for document; if left NULL (the default),
docnames will be used</p>
</td></tr>
<tr><td><code id="textplot_scale1d_+3A_sort">sort</code></td>
<td>
<p>if <code>TRUE</code> (the default), order points from low to high
score. If a vector, order according to these values from low to high. Only
applies when <code>margin = "documents"</code>.</p>
</td></tr>
<tr><td><code id="textplot_scale1d_+3A_groups">groups</code></td>
<td>
<p>grouping variable for sampling, equal in length to the number
of documents. This will be evaluated in the docvars data.frame, so that
docvars may be referred to by name without quoting. This also changes
previous behaviours for <code>groups</code>. See <code>news(Version &gt;= "3.0", package = "quanteda")</code> for details.</p>
</td></tr>
<tr><td><code id="textplot_scale1d_+3A_highlighted">highlighted</code></td>
<td>
<p>a vector of feature names to draw attention to in a
feature plot; only applies if <code>margin = "features"</code></p>
</td></tr>
<tr><td><code id="textplot_scale1d_+3A_alpha">alpha</code></td>
<td>
<p>A number between 0 and 1 (default 0.5) representing the level of
alpha transparency used to overplot feature names in a feature plot; only
applies if <code>margin = "features"</code></p>
</td></tr>
<tr><td><code id="textplot_scale1d_+3A_highlighted_color">highlighted_color</code></td>
<td>
<p>colour for highlighted terms in <code>highlighted</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <span class="pkg">ggplot2</span> object
</p>


<h3>Note</h3>

<p>The <code>groups</code> argument only applies when <code>margin = "documents"</code>.
</p>


<h3>Author(s)</h3>

<p>Kenneth Benoit, Stefan Müller, and Adam Obeng
</p>


<h3>See Also</h3>

<p><code><a href="quanteda.textmodels.html#topic+textmodel_wordfish">quanteda.textmodels::textmodel_wordfish()</a></code>,
<code><a href="quanteda.textmodels.html#topic+textmodel_wordscores">quanteda.textmodels::textmodel_wordscores()</a></code>,
<code><a href="quanteda.textmodels.html#topic+textmodel_ca">quanteda.textmodels::textmodel_ca()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("quanteda")
if (require("quanteda.textmodels")) {
dfmat &lt;- dfm(tokens(data_corpus_irishbudget2010))

## wordscores
refscores &lt;- c(rep(NA, 4), 1, -1, rep(NA, 8))
tmod1 &lt;- textmodel_wordscores(dfmat, y = refscores, smooth = 1)
# plot estimated document positions
textplot_scale1d(predict(tmod1, se.fit = TRUE),
                 groups = data_corpus_irishbudget2010$party)
# plot estimated word positions
textplot_scale1d(tmod1, margin = "features",
                 highlighted = c("minister", "have", "our", "budget"))

## wordfish
tmod2 &lt;- quanteda.textmodels::textmodel_wordfish(dfmat, dir = c(6,5))
# plot estimated document positions
textplot_scale1d(tmod2)
textplot_scale1d(tmod2, groups = data_corpus_irishbudget2010$party)
# plot estimated word positions
textplot_scale1d(tmod2, margin = "features",
                 highlighted = c("government", "global", "children",
                                 "bank", "economy", "the", "citizenship",
                                 "productivity", "deficit"))

## correspondence analysis
tmod3 &lt;- textmodel_ca(dfmat)
# plot estimated document positions
textplot_scale1d(tmod3, margin = "documents",
                 groups = docvars(data_corpus_irishbudget2010, "party"))
}
</code></pre>

<hr>
<h2 id='textplot_wordcloud'>Plot features as a wordcloud</h2><span id='topic+textplot_wordcloud'></span>

<h3>Description</h3>

<p>Plot a <a href="quanteda.html#topic+dfm">dfm</a> or <a href="quanteda.textstats.html#topic+textstat_keyness">quanteda.textstats::textstat_keyness</a> object as a wordcloud,
where the feature labels are plotted with their sizes proportional to their
numerical values in the dfm.  When <code>comparison = TRUE</code>, it plots comparison
word clouds by document (or by target and reference categories in the case of
a keyness object).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>textplot_wordcloud(
  x,
  min_size = 0.5,
  max_size = 4,
  min_count = 3,
  max_words = 500,
  color = "darkblue",
  font = NULL,
  adjust = 0,
  rotation = 0.1,
  random_order = FALSE,
  random_color = FALSE,
  ordered_color = FALSE,
  labelcolor = "gray20",
  labelsize = 1.5,
  labeloffset = 0,
  fixed_aspect = TRUE,
  ...,
  comparison = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="textplot_wordcloud_+3A_x">x</code></td>
<td>
<p>a <a href="quanteda.html#topic+dfm">dfm</a> or <a href="quanteda.textstats.html#topic+textstat_keyness">quanteda.textstats::textstat_keyness</a> object</p>
</td></tr>
<tr><td><code id="textplot_wordcloud_+3A_min_size">min_size</code></td>
<td>
<p>size of the smallest word</p>
</td></tr>
<tr><td><code id="textplot_wordcloud_+3A_max_size">max_size</code></td>
<td>
<p>size of the largest word</p>
</td></tr>
<tr><td><code id="textplot_wordcloud_+3A_min_count">min_count</code></td>
<td>
<p>words with frequency below min_count will not be plotted</p>
</td></tr>
<tr><td><code id="textplot_wordcloud_+3A_max_words">max_words</code></td>
<td>
<p>maximum number of words to be plotted. The least frequent
terms dropped.  The maximum frequency will be split evenly across
categories when <code>comparison = TRUE</code>.</p>
</td></tr>
<tr><td><code id="textplot_wordcloud_+3A_color">color</code></td>
<td>
<p>colour of words from least to most frequent</p>
</td></tr>
<tr><td><code id="textplot_wordcloud_+3A_font">font</code></td>
<td>
<p>font-family of words and labels. Use default font if <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="textplot_wordcloud_+3A_adjust">adjust</code></td>
<td>
<p>adjust sizes of words by a constant. Useful for non-English
words for which R fails to obtain correct sizes.</p>
</td></tr>
<tr><td><code id="textplot_wordcloud_+3A_rotation">rotation</code></td>
<td>
<p>proportion of words with 90 degree rotation</p>
</td></tr>
<tr><td><code id="textplot_wordcloud_+3A_random_order">random_order</code></td>
<td>
<p>plot words in random order. If <code>FALSE</code>, they will be
plotted in decreasing frequency.</p>
</td></tr>
<tr><td><code id="textplot_wordcloud_+3A_random_color">random_color</code></td>
<td>
<p>choose colours randomly from the colours. If <code>FALSE</code>,
the colour is chosen based on the frequency</p>
</td></tr>
<tr><td><code id="textplot_wordcloud_+3A_ordered_color">ordered_color</code></td>
<td>
<p>if <code>TRUE</code>, then colours are assigned to words in
order.</p>
</td></tr>
<tr><td><code id="textplot_wordcloud_+3A_labelcolor">labelcolor</code></td>
<td>
<p>colour of group labels. Only used when <code>comparison = TRUE</code>.</p>
</td></tr>
<tr><td><code id="textplot_wordcloud_+3A_labelsize">labelsize</code></td>
<td>
<p>size of group labels. Only used when <code>comparison = TRUE</code>.</p>
</td></tr>
<tr><td><code id="textplot_wordcloud_+3A_labeloffset">labeloffset</code></td>
<td>
<p>position of group labels. Only used when
<code>comparison = TRUE</code>.</p>
</td></tr>
<tr><td><code id="textplot_wordcloud_+3A_fixed_aspect">fixed_aspect</code></td>
<td>
<p>logical; if <code>TRUE</code>, the aspect ratio is fixed. Variable
aspect ratio only supported if rotation = 0.</p>
</td></tr>
<tr><td><code id="textplot_wordcloud_+3A_...">...</code></td>
<td>
<p>additional parameters. Only used to make it compatible with
<span class="pkg">wordcloud</span></p>
</td></tr>
<tr><td><code id="textplot_wordcloud_+3A_comparison">comparison</code></td>
<td>
<p>logical; if <code>TRUE</code>, plot a wordcloud that compares
documents in the same way as <code><a href="wordcloud.html#topic+comparison.cloud">wordcloud::comparison.cloud()</a></code>.  If <code>x</code> is a
<a href="quanteda.textstats.html#topic+textstat_keyness">quanteda.textstats::textstat_keyness</a> object, then only the target
category's key terms are plotted when <code>comparison = FALSE</code>, otherwise the
top <code>max_words / 2</code> terms are plotted from the target and reference
categories.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The default is to plot the word cloud of all features, summed across
documents.  To produce word cloud plots for specific document or set of
documents, you need to slice out the document(s) from the dfm object.
</p>
<p>Comparison wordcloud plots may be plotted by setting <code>comparison = TRUE</code>,
which plots a separate grouping for <em>each document</em> in the dfm. This means
that you will need to slice out just a few documents from the dfm, or to
create a dfm where the &quot;documents&quot; represent a subset or a grouping of
documents by some document variable.
</p>


<h3>Author(s)</h3>

<p>Kohei Watanabe, building on code from Ian Fellows's <span class="pkg">wordcloud</span>
package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># plot the features (without stopwords) from Obama's inaugural addresses
set.seed(10)
library("quanteda")
dfmat1 &lt;- data_corpus_inaugural |&gt;
    corpus_subset(President == "Obama") |&gt;
    tokens(remove_punct = TRUE) |&gt;
    tokens_remove(stopwords("en")) |&gt;
    dfm() |&gt;
    dfm_trim(min_termfreq = 3)

# basic wordcloud
textplot_wordcloud(dfmat1)

# plot in colours with some additional options
textplot_wordcloud(dfmat1, rotation = 0.25,
                   color = rev(RColorBrewer::brewer.pal(10, "RdBu")))

# other display options
col &lt;- sapply(seq(0.1, 1, 0.1), function(x) adjustcolor("#1F78B4", x))
textplot_wordcloud(dfmat1, adjust = 0.5, random_order = FALSE,
                   color = col, rotation = FALSE)

# comparison plot of Obama v. Trump
dfmat2 &lt;- data_corpus_inaugural |&gt;
    corpus_subset(President %in% c("Obama", "Trump")) |&gt;
    tokens(remove_punct = TRUE) |&gt;
    tokens_remove(stopwords("en")) |&gt;
    dfm()
dfmat2 &lt;- dfm_group(dfmat2, dfmat2$President) |&gt;
    dfm_trim(min_termfreq = 3)

textplot_wordcloud(dfmat2, comparison = TRUE, max_words = 100,
                   color = c("blue", "red"))

## Not run: 
# for keyness
tstat &lt;- data_corpus_inaugural[c(1, 3)] |&gt;
    tokens(remove_punct = TRUE) |&gt;
    tokens_remove(stopwords("en")) |&gt;
    dfm() |&gt;
    quanteda.textstats::textstat_keyness()
textplot_wordcloud(tstat, min_count = 2)
textplot_wordcloud(tstat, min_count = 2, comparison = FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='textplot_xray'>Plot the dispersion of key word(s)</h2><span id='topic+textplot_xray'></span>

<h3>Description</h3>

<p>Plots a dispersion or &quot;x-ray&quot; plot of selected word pattern(s) across one or
more texts. The format of the plot depends on the number of <a href="quanteda.html#topic+kwic">kwic</a> class
objects passed: if there is only one document, keywords are plotted one below
the other. If there are multiple documents the documents are plotted one
below the other, with keywords shown side-by-side. Given that this returns a
<span class="pkg">ggplot2</span> object, you can modify the plot by adding <span class="pkg">ggplot2</span> layers
(see example).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>textplot_xray(..., scale = c("absolute", "relative"), sort = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="textplot_xray_+3A_...">...</code></td>
<td>
<p>any number of <a href="quanteda.html#topic+kwic">kwic</a> class objects</p>
</td></tr>
<tr><td><code id="textplot_xray_+3A_scale">scale</code></td>
<td>
<p>whether to scale the token index axis by absolute position of
the token in the document or by relative position. Defaults are absolute
for single document and relative for multiple documents.</p>
</td></tr>
<tr><td><code id="textplot_xray_+3A_sort">sort</code></td>
<td>
<p>whether to sort the rows of a multiple document plot by document
name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <span class="pkg">ggplot2</span> object
</p>


<h3>Known Issues</h3>

<p>These are known issues on which we are working to solve in future versions:
</p>

<ul>
<li> <p><code>textplot_xray()</code> will not display the patterns correctly when
these are multi-token sequences.
</p>
</li>
<li><p> For dictionaries with keys that have overlapping value matches to tokens in
the text, only the first match will be used in the plot.  The way around this
is to produce one kwic per dictionary key, and send them as a list to
<code>textplot_xray</code>.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>library("quanteda")
toks &lt;- data_corpus_inaugural |&gt;
  corpus_subset(Year &gt; 1970) |&gt;
  tokens()
# compare multiple documents
textplot_xray(kwic(toks, pattern = "american"))
textplot_xray(kwic(toks, pattern = "american"), scale = "absolute")

# compare multiple terms across multiple documents
textplot_xray(kwic(toks, pattern = "america*"),
              kwic(toks, pattern = "people"))

## Not run: 
# how to modify the ggplot with different options
library("ggplot2")
tplot &lt;- textplot_xray(kwic(toks, pattern = "american"),
                       kwic(toks, pattern = "people"))
tplot + aes(color = keyword) + scale_color_manual(values = c('red', 'blue'))

# adjust the names of the document names
docnames(toks) &lt;- apply(docvars(toks, c("Year", "President")), 1, paste, collapse = ", ")
textplot_xray(kwic(toks, pattern = "america*"),
              kwic(toks, pattern = "people"))

## End(Not run)
</code></pre>

<hr>
<h2 id='wordcloud'>Internal function for textplot_wordcloud</h2><span id='topic+wordcloud'></span>

<h3>Description</h3>

<p>This function implements wordcloud without dependencies. Code is adopted from
<code><a href="wordcloud.html#topic+wordcloud">wordcloud::wordcloud()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wordcloud(
  x,
  min_size,
  max_size,
  min_count,
  max_words,
  color,
  font,
  adjust,
  rotation,
  random_order,
  random_color,
  ordered_color,
  labelcolor,
  labelsize,
  labeloffset,
  fixed_aspect,
  colors,
  scale,
  min.freq,
  max.words,
  random.order,
  random.color,
  rot.per,
  ordered.colors,
  use.r.layout,
  fixed.asp,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wordcloud_+3A_x">x</code></td>
<td>
<p>a <a href="quanteda.html#topic+dfm">dfm</a> or <a href="quanteda.textstats.html#topic+textstat_keyness">quanteda.textstats::textstat_keyness</a> object</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_min_size">min_size</code></td>
<td>
<p>size of the smallest word</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_max_size">max_size</code></td>
<td>
<p>size of the largest word</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_min_count">min_count</code></td>
<td>
<p>words with frequency below min_count will not be plotted</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_max_words">max_words</code></td>
<td>
<p>maximum number of words to be plotted. The least frequent
terms dropped.  The maximum frequency will be split evenly across
categories when <code>comparison = TRUE</code>.</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_color">color</code></td>
<td>
<p>colour of words from least to most frequent</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_font">font</code></td>
<td>
<p>font-family of words and labels. Use default font if <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_adjust">adjust</code></td>
<td>
<p>adjust sizes of words by a constant. Useful for non-English
words for which R fails to obtain correct sizes.</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_rotation">rotation</code></td>
<td>
<p>proportion of words with 90 degree rotation</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_random_order">random_order</code></td>
<td>
<p>plot words in random order. If <code>FALSE</code>, they will be
plotted in decreasing frequency.</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_random_color">random_color</code></td>
<td>
<p>choose colours randomly from the colours. If <code>FALSE</code>,
the colour is chosen based on the frequency</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_ordered_color">ordered_color</code></td>
<td>
<p>if <code>TRUE</code>, then colours are assigned to words in
order.</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_labelcolor">labelcolor</code></td>
<td>
<p>colour of group labels. Only used when <code>comparison = TRUE</code>.</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_labelsize">labelsize</code></td>
<td>
<p>size of group labels. Only used when <code>comparison = TRUE</code>.</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_labeloffset">labeloffset</code></td>
<td>
<p>position of group labels. Only used when
<code>comparison = TRUE</code>.</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_fixed_aspect">fixed_aspect</code></td>
<td>
<p>logical; if <code>TRUE</code>, the aspect ratio is fixed. Variable
aspect ratio only supported if rotation = 0.</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_scale">scale</code></td>
<td>
<p>deprecated argument</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_min.freq">min.freq</code></td>
<td>
<p>deprecated argument</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_max.words">max.words</code></td>
<td>
<p>deprecated argument</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_random.order">random.order</code></td>
<td>
<p>deprecated argument</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_random.color">random.color</code></td>
<td>
<p>deprecated argument</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_rot.per">rot.per</code></td>
<td>
<p>deprecated argument</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_ordered.colors">ordered.colors</code></td>
<td>
<p>deprecated argument</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_use.r.layout">use.r.layout</code></td>
<td>
<p>deprecated argument</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_fixed.asp">fixed.asp</code></td>
<td>
<p>deprecated argument</p>
</td></tr>
<tr><td><code id="wordcloud_+3A_...">...</code></td>
<td>
<p>additional parameters. Only used to make it compatible with
<span class="pkg">wordcloud</span></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Kohei Watanabe, building on code from Ian Fellows's <span class="pkg">wordcloud</span> package.
</p>

<hr>
<h2 id='wordcloud_comparison'>Internal function for textplot_wordcloud</h2><span id='topic+wordcloud_comparison'></span>

<h3>Description</h3>

<p>This function implements wordcloud that compares documents. Code is adopted
from <code><a href="wordcloud.html#topic+comparison.cloud">wordcloud::comparison.cloud()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wordcloud_comparison(
  x,
  min_size,
  max_size,
  min_count,
  max_words,
  color,
  font,
  adjust,
  rotation,
  random_order,
  random_color,
  ordered_color,
  labelcolor,
  labelsize,
  labeloffset,
  fixed_aspect,
  colors,
  scale,
  min.freq,
  max.words,
  random.order,
  rot.per,
  use.r.layout,
  title.size,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wordcloud_comparison_+3A_x">x</code></td>
<td>
<p>a <a href="quanteda.html#topic+dfm">dfm</a> or <a href="quanteda.textstats.html#topic+textstat_keyness">quanteda.textstats::textstat_keyness</a> object</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_min_size">min_size</code></td>
<td>
<p>size of the smallest word</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_max_size">max_size</code></td>
<td>
<p>size of the largest word</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_min_count">min_count</code></td>
<td>
<p>words with frequency below min_count will not be plotted</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_max_words">max_words</code></td>
<td>
<p>maximum number of words to be plotted. The least frequent
terms dropped.  The maximum frequency will be split evenly across
categories when <code>comparison = TRUE</code>.</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_color">color</code></td>
<td>
<p>colour of words from least to most frequent</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_font">font</code></td>
<td>
<p>font-family of words and labels. Use default font if <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_adjust">adjust</code></td>
<td>
<p>adjust sizes of words by a constant. Useful for non-English
words for which R fails to obtain correct sizes.</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_rotation">rotation</code></td>
<td>
<p>proportion of words with 90 degree rotation</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_random_order">random_order</code></td>
<td>
<p>plot words in random order. If <code>FALSE</code>, they will be
plotted in decreasing frequency.</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_random_color">random_color</code></td>
<td>
<p>choose colours randomly from the colours. If <code>FALSE</code>,
the colour is chosen based on the frequency</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_ordered_color">ordered_color</code></td>
<td>
<p>if <code>TRUE</code>, then colours are assigned to words in
order.</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_labelcolor">labelcolor</code></td>
<td>
<p>colour of group labels. Only used when <code>comparison = TRUE</code>.</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_labelsize">labelsize</code></td>
<td>
<p>size of group labels. Only used when <code>comparison = TRUE</code>.</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_labeloffset">labeloffset</code></td>
<td>
<p>position of group labels. Only used when
<code>comparison = TRUE</code>.</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_fixed_aspect">fixed_aspect</code></td>
<td>
<p>logical; if <code>TRUE</code>, the aspect ratio is fixed. Variable
aspect ratio only supported if rotation = 0.</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_scale">scale</code></td>
<td>
<p>deprecated argument</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_min.freq">min.freq</code></td>
<td>
<p>deprecated argument</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_max.words">max.words</code></td>
<td>
<p>deprecated argument</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_random.order">random.order</code></td>
<td>
<p>deprecated argument</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_rot.per">rot.per</code></td>
<td>
<p>deprecated argument</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_use.r.layout">use.r.layout</code></td>
<td>
<p>deprecated argument</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_title.size">title.size</code></td>
<td>
<p>deprecated argument</p>
</td></tr>
<tr><td><code id="wordcloud_comparison_+3A_...">...</code></td>
<td>
<p>additional parameters. Only used to make it compatible with
<span class="pkg">wordcloud</span></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Kohei Watanabe, build on code from Ian Fellows's <span class="pkg">wordcloud</span> package.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
