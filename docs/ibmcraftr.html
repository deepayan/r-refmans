<!DOCTYPE html><html lang="en"><head><title>Help for package ibmcraftr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ibmcraftr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cumprob'><p>Calculate cumulative probabilities for state transitions.</p></a></li>
<li><a href='#rate2prob'><p>Miscellaneous functions to support the <code>ibmcraftr</code> packare are here.</p></a></li>
<li><a href='#run_state_trans'><p>Run state_trans function over a given number of timesteps.</p></a></li>
<li><a href='#state_trans'><p>Make state transitions.</p></a></li>
<li><a href='#stRCPP'><p>Make state transitions using Rcpp.</p></a></li>
<li><a href='#syn_pop'><p>Create a synthetic population having several states.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Toolkits to Develop Individual-Based Models in Infectious
Disease</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2016-11-16</td>
</tr>
<tr>
<td>Description:</td>
<td>It provides a generic set of tools for initializing a synthetic
         population with each individual in specific disease states, and
         making transitions between those disease states according to the rates
         calculated on each timestep. The new version 1.0.0 has C++ code 
         integration to make the functions run faster. It has also a higher level
         function to actually run the transitions for the number of timesteps
         that users specify. Additional functions will follow for changing
         attributes on demographic, health belief and movement.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>5.0.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2016-11-16 09:19:06 UTC; Sai</td>
</tr>
<tr>
<td>Author:</td>
<td>Sai Thein Than Tun [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sai Thein Than Tun &lt;theinthantun.sai@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2016-11-16 10:51:54</td>
</tr>
</table>
<hr>
<h2 id='cumprob'>Calculate cumulative probabilities for state transitions.</h2><span id='topic+cumprob'></span>

<h3>Description</h3>

<p>This function takes in a vector of probabilities of states transitions and calculate the probability of staying in the original state and output the cumulative probabilities for all possibilities.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cumprob(probs, actual = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cumprob_+3A_probs">probs</code></td>
<td>
<p>A numeric vector of the probabilities of transition to states.</p>
</td></tr>
<tr><td><code id="cumprob_+3A_actual">actual</code></td>
<td>
<p>A logical value, if TRUE, will calculate actual cumulative probabilities which may surpass 1!.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector of cumulative probabilites inclusive of the probability of having the same state in the next timestep.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cumprob(c(.2,.2,.9))
cumprob(c(.2,.2,.9), actual=TRUE)
cumprob(c(.2,.2,.2))

</code></pre>

<hr>
<h2 id='rate2prob'>Miscellaneous functions to support the <code>ibmcraftr</code> packare are here.</h2><span id='topic+rate2prob'></span>

<h3>Description</h3>

<p>Miscellaneous functions to support the <code>ibmcraftr</code> packare are here.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rate2prob(rates)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rate2prob_+3A_rates">rates</code></td>
<td>
<p>A numeric scalar or vector to be transformed into rates.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric scalar or vector in terms of probabilities.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rate2prob(c(.1, .5))

</code></pre>

<hr>
<h2 id='run_state_trans'>Run state_trans function over a given number of timesteps.</h2><span id='topic+run_state_trans'></span>

<h3>Description</h3>

<p>Organize population data and transition parameters to run state_trans function over the given number of timesteps.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_state_trans(timesteps, param, pop, transient = "", useC = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_state_trans_+3A_timesteps">timesteps</code></td>
<td>
<p>A numeric scalar based on which the state_trans function will run for that specific no. of <code>timesteps</code> and accumulate the results.</p>
</td></tr>
<tr><td><code id="run_state_trans_+3A_param">param</code></td>
<td>
<p>A list of lists. Each low-level list must contain transition parameters required by the <code>state_trans</code> function.</p>
</td></tr>
<tr><td><code id="run_state_trans_+3A_pop">pop</code></td>
<td>
<p>A state matrix created from <code>syn_pop</code> function. This matrix represents the states of the population.</p>
</td></tr>
<tr><td><code id="run_state_trans_+3A_transient">transient</code></td>
<td>
<p>A character vector. Each element must include formula(e)/expression(s) to evaluate dynamic parameters after each timestep.</p>
</td></tr>
<tr><td><code id="run_state_trans_+3A_usec">useC</code></td>
<td>
<p>A logical value, which is TRUE by default, will run <code>state_transition</code> function written in RCPP, <code>stRCPP</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summary matrix of the states all individuals in the population are in.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pop &lt;- syn_pop(c(19,1,0,0,0)) #synthesizing population
b &lt;- 2 #effective contact rate
param &lt;- list(
list(1,c(2,5),c(NA,.1)), #transition from state 1 to 2 using FOI lambda
list(2,3,100), #transition from state 2 to 3,
list(3,4,100)  #the 3rd term ensures the transition to the next stage
)

timesteps &lt;- 10
transient &lt;- c("param[[1]][[3]][1] &lt;- rate2prob(b*sum(pop[,2],pop[,3])/sum(pop))")
eval(parse(text=transient))

run_state_trans(timesteps, param, pop, transient)
run_state_trans(timesteps, param, pop, transient, useC = FALSE)

</code></pre>

<hr>
<h2 id='state_trans'>Make state transitions.</h2><span id='topic+state_trans'></span>

<h3>Description</h3>

<p>Take in the matrix of the states of synthetic population (created by <code>syn_pop</code> function)
and calculate the transitions from one state to other state(s) using the transition rate(s).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>state_trans(origin, new.states, params, s.matrix)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="state_trans_+3A_origin">origin</code></td>
<td>
<p>A number which represents the column index <code>s.matrix</code> you want to do the transition from</p>
</td></tr>
<tr><td><code id="state_trans_+3A_new.states">new.states</code></td>
<td>
<p>A numeric vector or a number which represents the column index <code>s.matrix</code> you want
as the destination(s) for the transition</p>
</td></tr>
<tr><td><code id="state_trans_+3A_params">params</code></td>
<td>
<p>A numeric vector of similar length to <code>new.states</code> which serves as the transition rate(s)</p>
</td></tr>
<tr><td><code id="state_trans_+3A_s.matrix">s.matrix</code></td>
<td>
<p>A state matrix created from <code>syn_pop</code> function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A transition matrix of the same dimension as <code>s.matrix</code>. -1 indicates that the individual has left
the corresponding state. +1 indicates that the individual has become the corresponding state.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pop &lt;- syn_pop(c(19,1,0,0))
state_trans(1,2,.1,pop)
state_trans(1,4,100,pop)

</code></pre>

<hr>
<h2 id='stRCPP'>Make state transitions using Rcpp.</h2><span id='topic+stRCPP'></span>

<h3>Description</h3>

<p>Take in the matrix of the states of synthetic population (created by <code>syn_pop</code> function)
and calculate the transitions from one state to other state(s) using the transition probabilities [not rate(s)].
The major difference from the R alone version was that instead of having the transition rate(s),
transition probabilities are used. These probabilities will thus be calculated with another function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stRCPP(origin, new.states, params, s.matrix)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stRCPP_+3A_origin">origin</code></td>
<td>
<p>A number which represents the column index <code>s.matrix</code> you want to do the transition from</p>
</td></tr>
<tr><td><code id="stRCPP_+3A_new.states">new.states</code></td>
<td>
<p>A numeric vector or a number which represents the column index <code>s.matrix</code> you want
as the destination(s) for the transition</p>
</td></tr>
<tr><td><code id="stRCPP_+3A_params">params</code></td>
<td>
<p>A numeric vector of similar length to <code>new.states</code> which serves as the transition rate(s)</p>
</td></tr>
<tr><td><code id="stRCPP_+3A_s.matrix">s.matrix</code></td>
<td>
<p>A state matrix created from <code>syn_pop</code> function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A transition matrix of the same dimension as <code>s.matrix</code>. -1 indicates that the individual has left
the corresponding state. +1 indicates that the individual has become the corresponding state.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pop &lt;- syn_pop(c(19,1,0,0))
stRCPP(1,2,.1,pop)

</code></pre>

<hr>
<h2 id='syn_pop'>Create a synthetic population having several states.</h2><span id='topic+syn_pop'></span>

<h3>Description</h3>

<p>Populate a matrix in which columns represent the states of the individuals and rows represent the individuals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>syn_pop(states, shuffle = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="syn_pop_+3A_states">states</code></td>
<td>
<p>A numeric vector with each element representing the number of individuals in a particular state
its index corresponds to.</p>
</td></tr>
<tr><td><code id="syn_pop_+3A_shuffle">shuffle</code></td>
<td>
<p>A logical value to enable shuffling of the individuals (rows) in the resulting matrix.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix of 0s, and 1s. The rows representing the individuals and the columns representing the states
the individuals are in
</p>


<h3>Examples</h3>

<pre><code class='language-R'>syn_pop(c(3,2,1))
syn_pop(c(0,0,1,5), shuffle=TRUE)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
