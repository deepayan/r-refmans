<!DOCTYPE html><html lang="en"><head><title>Help for package CautiousLearning</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {CautiousLearning}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#CautiousLearning-package'>
<p>Guaranteed In-Control Control Chart Performance with</p>
Cautious Parameter Learning</a></li>
<li><a href='#cautiousLearning'>
<p>Applications of control charts based on the cautious learning approach</p></a></li>
<li><a href='#design'><p>Design of control charts based on the cautious learning approach</p></a></li>
<li><a href='#omp'><p>Support for parallel computation</p></a></li>
<li><a href='#simulation'><p>Estimation errors and conditional run-length simulation</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Control Charts with Guaranteed In-Control Performance and
Cautious Parameters Learning</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2019-06-30</td>
</tr>
<tr>
<td>Author:</td>
<td>Giovanna Capizzi and Guido Masarotto</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Giovanna Capizzi &lt;giovanna.capizzi@unipd.it&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Design and use of control charts for detecting mean changes 
 based on a delayed updating of the in-control parameter estimates.
 See Capizzi and Masarotto (2019) &lt;<a href="https://doi.org/10.1080%2F00224065.2019.1640096">doi:10.1080/00224065.2019.1640096</a>&gt; for the
 description of the method. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 1.0.0), spc</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, sitmo, BH</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-07-18 10:39:56 UTC; guido</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-07-18 13:30:04 UTC</td>
</tr>
</table>
<hr>
<h2 id='CautiousLearning-package'>  
Guaranteed In-Control Control Chart Performance with
Cautious Parameter Learning
</h2><span id='topic+CautiousLearning-package'></span>

<h3>Description</h3>

<p>Functions in this package allow to design, study and apply control
charts based on the cautious parameter learning approach described in 
Capizzi and Masarotto (2019). 
</p>
<p>On system where the openMP standard is
supported, these functions can take advantage of the
computing power offered by a multicore workstation.
See <code><a href="#topic+omp">omp</a></code> for the default setting.
</p>


<h3>Details</h3>

<p>The package includes the following functions:
</p>

<ul>
<li> 
<p>Computation of the control limits via stochastic
approximation: <code><a href="#topic+x.cl">x.cl</a></code>, <code><a href="#topic+ewma.cl">ewma.cl</a></code>,
<code><a href="#topic+cusum.cl">cusum.cl</a></code>;
</p>
</li>
<li> 
<p>Estimation errors and conditional run-length simulation: 
<code><a href="#topic+ruv">ruv</a></code> and <code><a href="#topic+rcrl">rcrl</a></code>;
</p>
</li>
<li> 
<p>Application to real data: <code><a href="#topic+cautiousLearning">cautiousLearning</a></code>;
</p>
</li>
<li>
<p>Controlling the number of used openMP cores and the random number
generator seeds: <code><a href="#topic+hasOMP">hasOMP</a></code>, <code><a href="#topic+setOMPThreads">setOMPThreads</a></code> and
<code><a href="#topic+setSITMOSeeds">setSITMOSeeds</a></code>.    
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Giovanna Capizzi &lt;giovanna.capizzi@unipd.it&gt; and
Guido Masarotto &lt;guido.masarotto@unipd.it&gt;
</p>
<p>Maintainer: Giovanna Capizzi
</p>


<h3>References</h3>

<p>Capizzi, G. and Masarotto, G. (2019) 
&quot;Guaranteed In-Control Control Chart Performance with Cautious Parameter
Learning&quot;, accepted for publication in <em>Journal of Quality Technology</em>,
a copy of the paper can be obtained from the authors.
</p>

<hr>
<h2 id='cautiousLearning'>
Applications of control charts based on the cautious learning approach
</h2><span id='topic+cautiousLearning'></span>

<h3>Description</h3>

<p>This function applies and, optionally, plots a control chart based on the cautious
learning approach described in Capizzi and Masarotto (2019).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cautiousLearning(chart, x, mu0, s0, plot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cautiousLearning_+3A_chart">chart</code></td>
<td>

<p>list with the same elements as those returned by
<code><a href="#topic+x.cl">x.cl</a></code>, <code><a href="#topic+ewma.cl">ewma.cl</a></code> and <code><a href="#topic+cusum.cl">cusum.cl</a></code>.
</p>
</td></tr>
<tr><td><code id="cautiousLearning_+3A_x">x</code></td>
<td>

<p>numeric vector containing the Phase II data.
</p>
</td></tr>
<tr><td><code id="cautiousLearning_+3A_mu0">mu0</code>, <code id="cautiousLearning_+3A_s0">s0</code></td>
<td>

<p>estimates of the in-control mean and standard deviation
obtained by the Phase I reference sample.
</p>
</td></tr>
<tr><td><code id="cautiousLearning_+3A_plot">plot</code></td>
<td>

<p>if <code>TRUE</code> the control statistics and the cautiuos control
limits are plotted.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns (invisibly when <code>plot==TRUE</code>) a numeric matrix 
containing 
</p>
<table role = "presentation">
<tr><td><code>column 1 for X and EWMA</code>, <code>columns 1-2 for CUSUM</code></td>
<td>

<p>control statistic[s]</p>
</td></tr>
<tr><td><code>columns 2-4 for X and EWMA</code>, <code>columns 3-5 for CUSUM</code></td>
<td>

<p>central line, lower and upper control limits</p>
</td></tr>
<tr><td><code>columns 5-7 for X and EWMA</code>, <code>columns 6-8 for CUSUM</code></td>
<td>

<p>&quot;cautious&quot; estimates of the mean, standard deviation and critical
value, i.e., using the notation in Capizzi and Masarotto (2019),
<code class="reqn">\hat{\mu}_{i-d_i}</code>, 
<code class="reqn">\hat{\sigma}_{i-d_i}</code> and
<code class="reqn">L_{i-d_i}</code>. </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Giovanna Capizzi and Guido Masarotto</p>


<h3>References</h3>

<p>Capizzi, G. and Masarotto, G. (2019) 
&quot;Guaranteed In-Control Control Chart Performance with Cautious Parameter
Learning&quot;, accepted for publication in <em>Journal of Quality Technology</em>,
a copy of the paper can be obtained from the authors.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## EWMA control chart (nominal ARL=500, 
## initial estimates based on 100 in-control observations)
chart &lt;- list(chart = "EWMA",
              lambda = 0.2,
              limit = c(Linf=3.187, Delta=0.427, A=1.5, B=50, m=100))
## Phase I estimates
set.seed(12345)
xic &lt;- rnorm(100, 12 , 3)
m0 &lt;- mean(xic)
s0 &lt;- sd(xic)
## Phase II observations (one sigma mean shift starting at i=501)
x &lt;- c(rnorm(500, 12, 3), rnorm(50, 15, 3))
## Monitoring
y &lt;- cautiousLearning(chart, x, m0, s0)
head(y)
tail(y)
</code></pre>

<hr>
<h2 id='design'>Design of control charts based on the cautious learning approach</h2><span id='topic+x.cl'></span><span id='topic+cusum.cl'></span><span id='topic+ewma.cl'></span>

<h3>Description</h3>

<p>These functions compute the control limits  
of X (<code>x.cl</code>), EWMA (<code>ewma.cl</code>) and CUSUM (<code>cusum.cl</code>)
control charts based on the cautious learning approach. 
The stochastic approximation algorithm, described in 
the Appendix A of Capizzi and Masarotto (2019), is used. 
</p>
<p>When openMP is supported, computation can be distribuited on multiple cores.
See <code><a href="#topic+omp">omp</a></code>. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>x.cl(m, arl0, alpha = 0.1, beta = 0.05, H = 200, A = 1.5, B = 50, 
     Ninit = 1000, Nfinal = 30000)

ewma.cl(lambda, m, arl0, alpha = 0.1, beta = 0.05, H = 200, A = 1.5, B = 50, 
        Ninit = 1000, Nfinal = 30000)

cusum.cl(k, m, arl0, alpha = 0.1, beta = 0.05, H = 200, A = 1.5, B = 50, 
         Ninit = 1000, Nfinal = 30000)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="design_+3A_lambda">lambda</code></td>
<td>
<p>EWMA smoothing constant.</p>
</td></tr>
<tr><td><code id="design_+3A_k">k</code></td>
<td>
<p>CUSUM reference value.</p>
</td></tr>
<tr><td><code id="design_+3A_m">m</code></td>
<td>

<p>number of in-control observations used to estimate the process mean
and standard deviation at the beginning of the monitoring phase.
</p>
</td></tr>
<tr><td><code id="design_+3A_arl0">arl0</code>, <code id="design_+3A_alpha">alpha</code>, <code id="design_+3A_beta">beta</code>, <code id="design_+3A_h">H</code></td>
<td>

<p>desired in-control average run-length and constants defining the
empirical guaranteed in-control performance condition. See
equations (2) and (6) in Capizzi and Masarotto (2019).
</p>
</td></tr>
<tr><td><code id="design_+3A_a">A</code>, <code id="design_+3A_b">B</code></td>
<td>

<p>constants controlling when the parameters estimate are updated.
See equation (3) in Capizzi and Masarotto (2019). 
If <code>A=NA</code> and <code>B=NA</code>, the no-learning control limits
are computed.
</p>
</td></tr>
<tr><td><code id="design_+3A_ninit">Ninit</code>, <code id="design_+3A_nfinal">Nfinal</code></td>
<td>

<p>number of iterations used in the stochastic approximation algorithm.
See Capizzi and Masarotto (2019), Appendix A.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the following elements:
</p>
<table role = "presentation">
<tr><td><code>chart</code></td>
<td>
<p>string describing the control chart (&quot;X&quot;, &quot;EWMA&quot; or
&quot;CUSUM&quot;).</p>
</td></tr>
<tr><td><code>lambda</code></td>
<td>
<p>EWMA smoothing constant (only when
<code>chart=="EWMA"</code>).</p>
</td></tr>
<tr><td><code>k</code></td>
<td>
<p>CUSUM reference value (only when
<code>chart=="CUSUM"</code>).</p>
</td></tr>
<tr><td><code>limit</code></td>
<td>
<p>numeric vector of length equal to five containing the
constants defining the cautiuos learning control limits, i.e,
<code class="reqn">L_\infty</code>, <code class="reqn">\Delta</code>, 
A, B and m (see equation (3) and (4) in Capizzi and
Masarotto (2019)).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Giovanna Capizzi and Guido Masarotto</p>


<h3>References</h3>

<p>Capizzi, G. and Masarotto, G. (2019) 
&quot;Guaranteed In-Control Control Chart Performance with Cautious Parameter
Learning&quot;, accepted for publication in <em>Journal of Quality Technology</em>,
a copy of the paper can be obtained from the authors.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Only for testing: the number of iterations is reduced 
## to reduce the computing time
Ninit &lt;- 50
Nfinal &lt;- 100
H &lt;- 50
x.cl(100, 500, Ninit=Ninit, Nfinal=Nfinal, H=H)
x.cl(100, 500, A=NA, B=NA, Ninit=Ninit, Nfinal=Nfinal, H=H)
ewma.cl(0.2, 100, 500, Ninit=Ninit, Nfinal=Nfinal, H=H)
cusum.cl(1, 100, 500, Ninit=Ninit, Nfinal=Nfinal, H=H)

## Using the default number of iterations
x.cl(100, 500)
x.cl(100, 500, A=NA, B=NA)
ewma.cl(0.2,100, 500)
cusum.cl(1, 100, 500)

</code></pre>

<hr>
<h2 id='omp'>Support for parallel computation</h2><span id='topic+omp'></span><span id='topic+hasOMP'></span><span id='topic+setOMPThreads'></span><span id='topic+setSITMOSeeds'></span>

<h3>Description</h3>

<p>The functions can be used 
</p>

<ul>
<li><p> to check if the current system supports the openMP standard;
</p>
</li>
<li><p> to control the number of used cores;
</p>
</li>
<li><p> to set the seeds of the random number generators.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>hasOMP()

setOMPThreads(nthreads)

setSITMOSeeds(seed)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="omp_+3A_nthreads">nthreads</code></td>
<td>

<p>number of OpenMP threads to be used.
</p>
</td></tr>  
<tr><td><code id="omp_+3A_seed">seed</code></td>
<td>

<p>number between 0 and 1 used to set the seeds of the
random number generators in each threads.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Each openMP thread (or the single thread used on systems where openMP is not
supported) uses a separate <code>sitmo</code> random number generator.
See <code><a href="sitmo.html#topic+sitmo-package">sitmo-package</a></code>.
</p>


<h3>Value</h3>

<p>Function <code>hasOMP</code> returns TRUE/FALSE if the system
supports/does not support openMP.
</p>
<p>Functions <code>setOMPThreads</code> and <code>setSITMOSeeds</code>
do not return any value.
</p>


<h3>Note</h3>

<p>When the package is loaded, the following code is automatically executed
</p>

<ul>
<li> <p><code>if (hasOMP()) setOMPThreads(parallel::detectCores())</code>
</p>
</li>
<li> <p><code>setSITMOSeeds(runif(1))</code>
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Giovanna Capizzi and Guido Masarotto</p>

<hr>
<h2 id='simulation'>Estimation errors and conditional run-length simulation</h2><span id='topic+ruv'></span><span id='topic+rcrl'></span>

<h3>Description</h3>

<p>Function <code>ruv</code> simulates the standardized
estimation errors at the starting of the monitoring phase
(see Section 2.3 of Capizzi and Masarotto (2019)). 
</p>
<p>Function <code>rcrl</code> simulates, under different in-control or
out-control scenarios, the conditional run-length given
the standardized estimation errors. When openMP is supported,
computation can be distribuited on multiple cores.
See <code><a href="#topic+omp">omp</a></code>. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ruv(n, m)

rcrl(n, chart, u, v, tau, delta, omega, maxrl = 1000000L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="simulation_+3A_n">n</code></td>
<td>

<p>number of simulated values.
</p>
</td></tr>
<tr><td><code id="simulation_+3A_m">m</code></td>
<td>

<p>number of in-control observations available at the starting of the
monitoring phase.
</p>
</td></tr>
<tr><td><code id="simulation_+3A_chart">chart</code></td>
<td>

<p>list with the same elements as those returned by
<code><a href="#topic+x.cl">x.cl</a></code>, <code><a href="#topic+ewma.cl">ewma.cl</a></code> and <code><a href="#topic+cusum.cl">cusum.cl</a></code>.
</p>
</td></tr>
<tr><td><code id="simulation_+3A_u">u</code>, <code id="simulation_+3A_v">v</code></td>
<td>

<p>values of the estimation errors (scalars).
</p>
</td></tr>
<tr><td><code id="simulation_+3A_tau">tau</code>, <code id="simulation_+3A_delta">delta</code>, <code id="simulation_+3A_omega">omega</code></td>
<td>

<p>when i&lt;tau, observations are distributed as N(mu,sigma^2) random
variables; when i&gt;=tau, observations are distributed as
N(mu+delta*sigma, (omega*sigma)^2) random variables.
</p>
</td></tr>
<tr><td><code id="simulation_+3A_maxrl">maxrl</code></td>
<td>

<p>run-length are truncated at i=maxrl.
</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>ruv</code></td>
<td>
<p>numeric matrix of dimension nx2.</p>
</td></tr>
<tr><td><code>rcrl</code></td>
<td>
<p>integer vector of length n.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Giovanna Capizzi and Guido Masarotto</p>


<h3>References</h3>

<p>Capizzi, G. and Masarotto, G. (2019) 
&quot;Guaranteed In-Control Control Chart Performance with Cautious Parameter
Learning&quot;, accepted for publication in <em>Journal of Quality Technology</em>,
a copy of the paper can be obtained from the authors.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ruv(5, 100)
## EWMA control chart (nominal ARL=500, 
## initial estimates based on 100 in-control observations)
chart &lt;- list(chart = "EWMA",
              lambda = 0.2,
              limit = c(Linf=3.187, Delta=0.427, A=1.5, B=50, m=100))
rcrl(10, chart, 2, 1, 50, 2, 1) 
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
