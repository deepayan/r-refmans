<!DOCTYPE html><html lang="en"><head><title>Help for package RCT</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {RCT}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#RCT'><p>Designing, random assigning and evaluating Randomized Control Trials</p></a></li>
<li><a href='#balance_regression'><p>balance_regression() Runs a LPM of treatment status against all covariates (treatment~X'B).</p></a></li>
<li><a href='#balance_table'><p>Creates balance table for the X variables across treatment status</p></a></li>
<li><a href='#impact_eval'><p>Impact Evaluation of Treatment Effects</p></a></li>
<li><a href='#N_min'><p>N_min() computes the minimum population needed to detect difference between control group and each treatment, given a target minimum detectable effect</p></a></li>
<li><a href='#ntile_label'><p>ntile_label() ranks observations in n groups, with labels</p></a></li>
<li><a href='#summary_statistics'><p>summary_statistics() Creates summary statistics table of all numeric variables in data</p></a></li>
<li><a href='#tau_min'><p>tau_min() computes the minimum detectable difference between control group and each treatment</p></a></li>
<li><a href='#tau_min_probability'><p>tau_min_probability() computes the minimum detectable difference between control group and each treatment for a dichotomous variable</p></a></li>
<li><a href='#treatment_assign'><p>treatment_assign() carries out robust treatment assignment by strata/blocks</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Assign Treatments, Power Calculations, Balances, Impact
Evaluation of Experiments</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Assists in the whole process of designing and evaluating Randomized Control Trials.
    Robust treatment assignment by strata/blocks, that handles misfits; 
    Power calculations of the minimum detectable treatment effect or minimum populations;
    Balance tables of T-test of covariates; 
    Balance Regression: (treatment ~ all x variables) with F-test of null model; 
    Impact_evaluation: Impact evaluation regressions. This function
    gives you the option to include control_vars, fixed effect variables,
    cluster variables (for robust SE), multiple endogenous variables and
    multiple heterogeneous variables (to test treatment effect heterogeneity)
    summary_statistics: Function that creates a summary statistics table with statistics 
    rank observations in n groups: Creates a factor variable with n groups. Each group has 
    a min and max label attach to each category.
    Athey, Susan, and Guido W. Imbens (2017) &lt;<a href="https://doi.org/10.48550/arXiv.1607.00698">doi:10.48550/arXiv.1607.00698</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, purrr, glue, rlang, tidyr, stringr, MASS, pracma,
estimatr, broom (&ge; 1.0.0), forcats, magrittr, ggplot2, utils,
tidyselect (&ge; 1.0.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-21 00:50:55 UTC; isidorogarcia</td>
</tr>
<tr>
<td>Author:</td>
<td>Isidoro Garcia-Urquieta [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Isidoro Garcia-Urquieta &lt;isidoro.gu@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-21 01:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='RCT'>Designing, random assigning and evaluating Randomized Control Trials</h2><span id='topic+RCT-package'></span><span id='topic+RCT'></span>

<h3>Description</h3>

<p>RCT provides three important group of functions:
a) functions for pre-processing the design of the RCT 
b) Functions for assigning treatment status and checking for balances 
c) Function for evaluating the impact of the RCT
</p>


<h3>Details</h3>

<p>RCT helps you focus on the statistics of the randomized control trials, 
rather than the heavy programming lifting. 
RCT helps you in the whole process of designing and evaluating a RCT. 
1. Clean and summarise the data in which you want to randomly assign treatment 
2. Decide the share of observations that will go to control group 
3. Decide which variables to use for strata building
4. Robust Random Assignment by strata/blocks
5 Impact evaluation of all y's and heterogeneities
To lean more about RCT, start with the vignette: browseVignettes(package = &quot;RCT&quot;)
</p>


<h3>RCT functions</h3>

<p>treatment_assign: Robust treatment assign by strata/blocks
</p>
<p>impact_eval: Automatized impact evaluation with heterogeneous treatment effects
</p>
<p>balance_table: Balance tables for any length of covariates
</p>
<p>balance_regression: LPM of treatment status against covariates with F-test
</p>
<p>tau_min: Computation of the minimum detectable effect between control &amp; treatment units
</p>
<p>tau_min_probability: Computation of the minimum detectable effect between control &amp; treatment units for dichotomous y-vars
</p>
<p>summary_statistics: Summary statistics of all numeric columns in your data
</p>
<p>ntile_label: Rank and divide observations in n groups, with label
</p>


<h3>Author(s)</h3>

<p>Isidoro Garcia Urquieta, isidoro.gu@gmail.com
</p>


<h3>References</h3>

<p>Athey, Susan, and Guido W. Imbens (2017) &quot;The Econometrics Randomized Experiments&quot;. Handbook of economic field experiments. <a href="https://arxiv.org/abs/1607.00698">https://arxiv.org/abs/1607.00698</a>
</p>


<h3>See Also</h3>

<p>Useful links:
https://github.com/isidorogu/RCT
Report bugs at https://github.com/isidorogu/RCT/issues
</p>

<hr>
<h2 id='balance_regression'>balance_regression() Runs a LPM of treatment status against all covariates (treatment~X'B).</h2><span id='topic+balance_regression'></span>

<h3>Description</h3>

<p>balance_regression() Runs a LPM of treatment status against all covariates (treatment~X'B).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>balance_regression(data, treatment)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="balance_regression_+3A_data">data</code></td>
<td>
<p>A data.frame, tibble or data.table</p>
</td></tr>
<tr><td><code id="balance_regression_+3A_treatment">treatment</code></td>
<td>
<p>a string with treatment status column</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This functions runs a Linear Probability model of each treatment group &amp; control on all the 
columns in data. For instance, if treatment column has values of (0,1,2), balance_regression will run two 
models: 1) LPM(treatment(0,1)~X'b) and 2) LPM(treatment(0,2)~X'b). The value are the regression tables and 
details of the F_test of these models.
</p>


<h3>Value</h3>

<p>A list: regression_tables = regression output of treatment against all covariates, 
F_test = table with the F tests of each regression
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;-data.frame(x1 = rnorm(n = 100, mean = 100, sd = 15), x2= rnorm(n = 100, mean = 65), 
treat = rep(c(0,1,2,3,4), each = 20))
balance_regression(data = data, treatment = "treat")
</code></pre>

<hr>
<h2 id='balance_table'>Creates balance table for the X variables across treatment status</h2><span id='topic+balance_table'></span>

<h3>Description</h3>

<p>Creates balance table for the X variables across treatment status
</p>


<h3>Usage</h3>

<pre><code class='language-R'>balance_table(data, treatment)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="balance_table_+3A_data">data</code></td>
<td>
<p>A data.frame, tibble or data.table</p>
</td></tr>
<tr><td><code id="balance_table_+3A_treatment">treatment</code></td>
<td>
<p>a string with treatment status column</p>
</td></tr>
</table>


<h3>Details</h3>

<p>balance_table() performs t.test(X~treatment) for each X column in data. Every value of 
treatment i.e 1,2,3,...N is compared against control value (0) or the first value of the treatment
column. For instance, If treatment column has values of (0,1,2,3), balance_table will return: 
the mean value of each treatment (for all X's), and the p_values of the t.test of (1,2,3) against
treatment = 0.
</p>


<h3>Value</h3>

<p>A tibble with Mean_value of each treatment status and p_values
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;-data.frame(x1 = rnorm(n = 100, mean = 100, sd = 15), 
                  x2=rnorm(n = 100, mean = 65), 
                  treatment = rep(c(0,1,2,3,4), each = 20))
balance_table(data, "treatment")
</code></pre>

<hr>
<h2 id='impact_eval'>Impact Evaluation of Treatment Effects</h2><span id='topic+impact_eval'></span>

<h3>Description</h3>

<p>Impact Evaluation of Treatment Effects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>impact_eval(
  data,
  endogenous_vars,
  treatment,
  heterogenous_vars,
  fixed_effect_vars = NULL,
  control_vars,
  cluster_var
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="impact_eval_+3A_data">data</code></td>
<td>
<p>A data.frame, tibble or data.table</p>
</td></tr>
<tr><td><code id="impact_eval_+3A_endogenous_vars">endogenous_vars</code></td>
<td>
<p>Vector of Y's on which treatment effects will be evaluated</p>
</td></tr>
<tr><td><code id="impact_eval_+3A_treatment">treatment</code></td>
<td>
<p>Variable indicating the treatment status</p>
</td></tr>
<tr><td><code id="impact_eval_+3A_heterogenous_vars">heterogenous_vars</code></td>
<td>
<p>Vector of variables for which you wish to assess treatment distributions/heterogeneities.</p>
</td></tr>
<tr><td><code id="impact_eval_+3A_fixed_effect_vars">fixed_effect_vars</code></td>
<td>
<p>Vector of variables to add as fixed effects. Default is without fixed effects</p>
</td></tr>
<tr><td><code id="impact_eval_+3A_control_vars">control_vars</code></td>
<td>
<p>Vector of variables to control for in the evaluation. Default is without controls</p>
</td></tr>
<tr><td><code id="impact_eval_+3A_cluster_var">cluster_var</code></td>
<td>
<p>String of cluster variable the standard errors. Default is without clustered std errors</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function carries out the evaluation of treatment effects on endogenous variables. 
It automatically runs the regressions of all the endogenous_vars supplied &amp; all the combinations 
of endogenous_vars and heterogenous_vars. Additionally, the function has the option of include 
fixed_effects, controls and cluster variables for clustered std errors.
</p>


<h3>Value</h3>

<p>impact_eval() returns a list of regression tables. The names of the list are the same as the endogenous variables.
for heterogeneities the names are endogenous_var_heterogenous_var
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- data.frame(y_1 = rnorm(n = 100, mean = 100, sd = 15), 
                  y_2 = rnorm(n = 100, mean = 8, sd = 2), 
                  treat = rep(c(0,1,2,3), each = 25), 
                  heterogenous_var1 = rep(c("X_Q1", "X_Q2", "X_Q3", "X_Q4"), times = 25),
                  cluster_var1 = rep(c(1:5), times = 20), 
                  fixed_effect_var1 = rep(c(1,2), times = 50),
                  control_var1 = rnorm(n = 100, mean = 20, sd = 1))

evaluation&lt;-impact_eval(data = data, 
                       endogenous_vars = c("y_1", "y_2"), 
                       treatment = "treat", 
                       heterogenous_vars = c("heterogenous_var1"), 
                       cluster_var = "cluster_var1", fixed_effect_vars = c("fixed_effect_var1"), 
                       control_vars = c("control_var1"))
</code></pre>

<hr>
<h2 id='N_min'>N_min() computes the minimum population needed to detect difference between control group and each treatment, given a target minimum detectable effect</h2><span id='topic+N_min'></span>

<h3>Description</h3>

<p>N_min() computes the minimum population needed to detect difference between control group and each treatment, given a target minimum detectable effect
</p>


<h3>Usage</h3>

<pre><code class='language-R'>N_min(
  outcome_var,
  tau_min,
  power = 0.8,
  significance = 0.05,
  share_control,
  n_groups = 2
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="N_min_+3A_outcome_var">outcome_var</code></td>
<td>
<p>the variable for which you wish to test the impact of treatment</p>
</td></tr>
<tr><td><code id="N_min_+3A_tau_min">tau_min</code></td>
<td>
<p>the target detectable effect (in outcome_var units)</p>
</td></tr>
<tr><td><code id="N_min_+3A_power">power</code></td>
<td>
<p>The level of power of the test (1 - Pr(Reject H_0 | H_0 True) ). Default is 0.8</p>
</td></tr>
<tr><td><code id="N_min_+3A_significance">significance</code></td>
<td>
<p>The level of significance of the test Pr(Reject H_0 | H_0 False). Default is 0.05</p>
</td></tr>
<tr><td><code id="N_min_+3A_share_control">share_control</code></td>
<td>
<p>The share of observations in N assigned to control. This argument allows for sequences (i.e. seq(0,1,0.1))</p>
</td></tr>
<tr><td><code id="N_min_+3A_n_groups">n_groups</code></td>
<td>
<p>Number of groups (control + # treatment groups)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function calculates the minimum experiment's population needed in order to detect at least a difference of tau_min 
statistically significantly. This is between any two given groups (e.g. control vs each treatment), given 
the outcome variable, power and significance
</p>


<h3>Value</h3>

<p>A tibble with the share_control and N observations in control group (N_control), 
the share and N of each treatment c(share_ti, N_ti), 
total share of treatment rows and N treated (share_treat, N_treat), N, 
the minimum detectable difference between control and all treatments together (tau_min_global),
the minimum detectable difference between control and each treatment (tau_min_each_treat)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- data.frame(y_1 = rbinom(n = 100, size = 1, prob = 0.3), 
                  y_2 = rnorm(n = 100, mean = 8, sd = 2))
N_min(data$y_1, tau_min = 0.01, share_control = seq(0,1,0.1), n_groups = 3)
</code></pre>

<hr>
<h2 id='ntile_label'>ntile_label() ranks observations in n groups, with labels</h2><span id='topic+ntile_label'></span>

<h3>Description</h3>

<p>ntile_label() ranks observations in n groups, with labels
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ntile_label(var, n, digits = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ntile_label_+3A_var">var</code></td>
<td>
<p>The variable wished to be ntile_label</p>
</td></tr>
<tr><td><code id="ntile_label_+3A_n">n</code></td>
<td>
<p>rank the variable in n groups</p>
</td></tr>
<tr><td><code id="ntile_label_+3A_digits">digits</code></td>
<td>
<p>How many digits to include in the label</p>
</td></tr>
</table>


<h3>Details</h3>

<p>n_tile_label is very similar to ntile from dplyr. But n_tile_label creates
the n groups and then labels them. For each group i, the value of the ntile_label is 
[min(i) - max(i)].
</p>


<h3>Value</h3>

<p>A ordered factor vector of each n group. The value has the form of [min(n_i) - max(n_i)]
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- data.frame(y_1 = rbinom(n = 100, size = 1, prob = 0.3), 
                   y_2 = rnorm(n = 100, mean = 8, sd = 2))
data$y_1_2 &lt;- ntile_label(data$y_1, n = 2, digits = 0) 
data$y_2_4 &lt;- ntile_label(data$y_2, n = 4, digits = 1)
</code></pre>

<hr>
<h2 id='summary_statistics'>summary_statistics() Creates summary statistics table of all numeric variables in data</h2><span id='topic+summary_statistics'></span>

<h3>Description</h3>

<p>summary_statistics() Creates summary statistics table of all numeric variables in data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summary_statistics(
  data,
  probs = c(0, 0.05, 0.1, 0.25, 0.5, 0.75, 0.9, 0.95, 1),
  na.rm = T
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary_statistics_+3A_data">data</code></td>
<td>
<p>A data.frame, tibble or data.table</p>
</td></tr>
<tr><td><code id="summary_statistics_+3A_probs">probs</code></td>
<td>
<p>The quantiles to compute. Default is c(0, 0.05, 0.1, 0.25, 0.5, 0.75, 0.9, 0.95, 1)</p>
</td></tr>
<tr><td><code id="summary_statistics_+3A_na.rm">na.rm</code></td>
<td>
<p>whether to exclude NA's from calculations</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function computes the selected quantiles, mean and N values of all the numeric columns of data.
</p>


<h3>Value</h3>

<p>A tibble with the Mean, N (not NA) and probs selects for each numeric column
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;-data.frame(x = c(1:5), y = c(100, 200, 300, 410, 540), z = rep("c", 5))
summary_statistics(data)
</code></pre>

<hr>
<h2 id='tau_min'>tau_min() computes the minimum detectable difference between control group and each treatment</h2><span id='topic+tau_min'></span>

<h3>Description</h3>

<p>tau_min() computes the minimum detectable difference between control group and each treatment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tau_min(
  outcome_var,
  N,
  power = 0.8,
  significance = 0.05,
  share_control,
  n_groups = 2
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tau_min_+3A_outcome_var">outcome_var</code></td>
<td>
<p>the variable for which you wish to test the impact of treatment</p>
</td></tr>
<tr><td><code id="tau_min_+3A_n">N</code></td>
<td>
<p>number of observations in the RCT, usually nrow(data)</p>
</td></tr>
<tr><td><code id="tau_min_+3A_power">power</code></td>
<td>
<p>The level of power of the test (1 - Pr(Reject H_0 | H_0 True) ). Default is 0.8</p>
</td></tr>
<tr><td><code id="tau_min_+3A_significance">significance</code></td>
<td>
<p>The level of significance of the test Pr(Reject H_0 | H_0 False). Default is 0.05</p>
</td></tr>
<tr><td><code id="tau_min_+3A_share_control">share_control</code></td>
<td>
<p>The share of observations in N assigned to control. This argument allows for sequences (i.e. seq(0,1,0.1))</p>
</td></tr>
<tr><td><code id="tau_min_+3A_n_groups">n_groups</code></td>
<td>
<p>Number of groups (control + # treatment groups)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function calculates the minimum difference that could show significant 
E[Y(1)-Y(0)] = tau, between any two given groups (e.g. control vs each treatment), given the 
population size (N), the outcome variable, power and significance
</p>


<h3>Value</h3>

<p>A tibble with the share_control and N observations in control group (N_control), 
the share and N of each treatment c(share_ti, N_ti), 
total share of treatment rows and N treated (share_treat, N_treat), N, 
the minimum detectable difference between control and all treatments together (tau_min_global),
the minimum detectable difference between control and each treatment (tau_min_each_treat)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- data.frame(y_1 = rbinom(n = 100, size = 1, prob = 0.3), 
                  y_2 = rnorm(n = 100, mean = 8, sd = 2))
tau_min(data$y_1, N = nrow(data), share_control = seq(0,1,0.1), n_groups = 3)
</code></pre>

<hr>
<h2 id='tau_min_probability'>tau_min_probability() computes the minimum detectable difference between control group and each treatment for a dichotomous variable</h2><span id='topic+tau_min_probability'></span>

<h3>Description</h3>

<p>tau_min_probability() computes the minimum detectable difference between control group and each treatment for a dichotomous variable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tau_min_probability(
  prior,
  N,
  power = 0.8,
  significance = 0.05,
  share_control,
  n_groups = 2
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tau_min_probability_+3A_prior">prior</code></td>
<td>
<p>Pr(Y=1).</p>
</td></tr>
<tr><td><code id="tau_min_probability_+3A_n">N</code></td>
<td>
<p>number of observations in the RCT, usually nrow(data)</p>
</td></tr>
<tr><td><code id="tau_min_probability_+3A_power">power</code></td>
<td>
<p>The level of power of the test (1 - Pr(Reject H_0 | H_0 True) ). Default is 0.8</p>
</td></tr>
<tr><td><code id="tau_min_probability_+3A_significance">significance</code></td>
<td>
<p>The level of significance of the test Pr(Reject H_0 | H_0 False). Default is 0.05</p>
</td></tr>
<tr><td><code id="tau_min_probability_+3A_share_control">share_control</code></td>
<td>
<p>The share of observations in N assigned to control. This argument allows for sequences (i.e. seq(0,1,0.1))</p>
</td></tr>
<tr><td><code id="tau_min_probability_+3A_n_groups">n_groups</code></td>
<td>
<p>Number of groups (control + # treatment groups)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function calculates the minimum difference that could show significant 
Pr[Y(1)-Y(0)] = tau, between any two given groups (e.g. control vs each treatment), given the 
population size (N), the outcome variable, power and significance
</p>


<h3>Value</h3>

<p>A tibble with the share_control and N observations in control group (N_control), 
the share and N of each treatment c(share_ti, N_ti), 
total share of treatment rows and N treated (share_treat, N_treat), N, 
the minimum detectable difference between control and all treatments together (tau_min_global),
the minimum detectable difference between control and each treatment (tau_min_each_treat)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tau_min_probability(0.4, N = 1000, share_control = seq(0,1,0.1), n_groups = 3)
</code></pre>

<hr>
<h2 id='treatment_assign'>treatment_assign() carries out robust treatment assignment by strata/blocks</h2><span id='topic+treatment_assign'></span>

<h3>Description</h3>

<p>treatment_assign() carries out robust treatment assignment by strata/blocks
</p>


<h3>Usage</h3>

<pre><code class='language-R'>treatment_assign(
  data,
  share_control,
  n_t = 2,
  strata_varlist,
  missfits = c("global", "NA", "strata"),
  seed = 1990,
  share_ti = rep(1/n_t - share_control/n_t, times = n_t),
  key
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="treatment_assign_+3A_data">data</code></td>
<td>
<p>A data.frame, tibble or data.table</p>
</td></tr>
<tr><td><code id="treatment_assign_+3A_share_control">share_control</code></td>
<td>
<p>share of the observations assigned to control group</p>
</td></tr>
<tr><td><code id="treatment_assign_+3A_n_t">n_t</code></td>
<td>
<p>Number of treatments groups</p>
</td></tr>
<tr><td><code id="treatment_assign_+3A_strata_varlist">strata_varlist</code></td>
<td>
<p>vector of categorical variables to form the strata/blocks for random assignment. 
Should be in the form of vars(var1, var2, ...)</p>
</td></tr>
<tr><td><code id="treatment_assign_+3A_missfits">missfits</code></td>
<td>
<p>How to handle the misfits. Default is &quot;global&quot;. See Carril (2016) for details.</p>
</td></tr>
<tr><td><code id="treatment_assign_+3A_seed">seed</code></td>
<td>
<p>A number used to set.seed().</p>
</td></tr>
<tr><td><code id="treatment_assign_+3A_share_ti">share_ti</code></td>
<td>
<p>The share of each treatment group. If NULL (Default), each treatment group will 
have equal share.</p>
</td></tr>
<tr><td><code id="treatment_assign_+3A_key">key</code></td>
<td>
<p>The key identifier column of data.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function creates a variable that indicates the treatment status. The random 
assignment is made by strata/blocks. It can handle equal or unequal treatment shares. 
Finally, it has three methods available to handle misfits (same as randtreat in STATA):
&quot;global&quot;: assigning the observations that couldn't be randomly assigned globally, 
&quot;strata&quot;: assigning the observations that couldn't be randomly assigned by strata,
&quot;NA&quot;: set the the treat observations that couldn't be randomly assigned to NA.
</p>


<h3>Value</h3>

<p>A list: &quot;data&quot; = the data with key, treat, strata, misfit column., 
&quot;summary_strata&quot; = A summary tibble with the membership of each strata and its size.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data&lt;-data.frame(key = c(1:1000), 
                 ing_quartile = rep(c("Q1", "Q2", "Q3", "Q4"), each = 250), 
                 age_quartile = rep(c("Q1", "Q2", "Q3", "Q4"), times = 250))
assigment&lt;-treatment_assign(data = data, share_control = 0.1, n_t = 3,
                            strata_varlist = dplyr::vars(ing_quartile, 
                            age_quartile), missfits = "strata", 
                            seed = 1990, key = "key")
table(data$treat, useNA = "ifany")
prop.table(table(data$treat, useNA = "ifany"))
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
