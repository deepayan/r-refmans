<!DOCTYPE html><html><head><title>Help for package GPSeqClus</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {GPSeqClus}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#addTitle'><p>label plots</p></a></li>
<li><a href='#exp_clus_gpx'><p>Export cluster .gpx file</p></a></li>
<li><a href='#GPSeq_clus'><p>Sequential cluster algorithm of location data</p></a></li>
<li><a href='#ind_clus_kml'><p>Plot individual cluster .kml</p></a></li>
<li><a href='#julian_conv'><p>Julian Conversion</p></a></li>
<li><a href='#ML_ex_dat'><p>Sample Data for Sequential Clustering Routine</p></a></li>
<li><a href='#moveMe'><p>arrange columns</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Sequential Clustering Algorithm for Location Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.4.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-09-11</td>
</tr>
<tr>
<td>Author:</td>
<td>Clapp, J. G.</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Justin Clapp &lt;justin.clapp@wyo.gov&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Applies sequential clustering algorithm to animal location data 
    based on user-defined parameters. Plots interactive cluster maps and 
    provides a summary dataframe with attributes for each cluster commonly
    used as covariates in subsequent modeling efforts. Additional functions
    provide individual keyhole markup language plots for quick assessment,
    and export of global positioning system exchange format files for
    navigation purposes. 
    Methods can be found at &lt;<a href="https://doi.org/10.1111%2F2041-210X.13572">doi:10.1111/2041-210X.13572</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>Imports:</td>
<td>geosphere, htmlwidgets, leaflet, leaflet.extras, plyr, purrr,
sp, sf, stats, suncalc, tcltk, utils</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-18 14:42:54 UTC; Jugclapp</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-18 15:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='addTitle'>label plots</h2><span id='topic+addTitle'></span>

<h3>Description</h3>

<p>label plots
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addTitle(
  object,
  text,
  color = "black",
  fontSize = "20px",
  fontFamily = "Sans",
  leftPosition = 50,
  topPosition = 2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addTitle_+3A_object">object</code></td>
<td>
<p>leaflet plot</p>
</td></tr>
<tr><td><code id="addTitle_+3A_text">text</code></td>
<td>
<p>text</p>
</td></tr>
<tr><td><code id="addTitle_+3A_color">color</code></td>
<td>
<p>text color</p>
</td></tr>
<tr><td><code id="addTitle_+3A_fontsize">fontSize</code></td>
<td>
<p>font size</p>
</td></tr>
<tr><td><code id="addTitle_+3A_fontfamily">fontFamily</code></td>
<td>
<p>font</p>
</td></tr>
<tr><td><code id="addTitle_+3A_leftposition">leftPosition</code></td>
<td>
<p>left position</p>
</td></tr>
<tr><td><code id="addTitle_+3A_topposition">topPosition</code></td>
<td>
<p>top position</p>
</td></tr>
</table>


<h3>Value</h3>

<p>title on plots
</p>

<hr>
<h2 id='exp_clus_gpx'>Export cluster .gpx file</h2><span id='topic+exp_clus_gpx'></span>

<h3>Description</h3>

<p>Uses results from 'GPSeq_clus&quot; to export .gpx file from specified AID and vector of desired cluster numbers
for navigation during field site investigations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exp_clus_gpx(AID, cn = "all", locs, cs, centroid_calc = "mean", dir = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exp_clus_gpx_+3A_aid">AID</code></td>
<td>
<p>Desired AID from sequential cluster output</p>
</td></tr>
<tr><td><code id="exp_clus_gpx_+3A_cn">cn</code></td>
<td>
<p>Numeric vector of desired cluster numbers to include in .gpx output, default is &quot;all&quot;</p>
</td></tr>
<tr><td><code id="exp_clus_gpx_+3A_locs">locs</code></td>
<td>
<p>Location dataframe output from GPSeq_clus()</p>
</td></tr>
<tr><td><code id="exp_clus_gpx_+3A_cs">cs</code></td>
<td>
<p>Cluster summary output from GPSeq_clus()</p>
</td></tr>
<tr><td><code id="exp_clus_gpx_+3A_centroid_calc">centroid_calc</code></td>
<td>
<p>'mean' (default) or 'median' centroid plot</p>
</td></tr>
<tr><td><code id="exp_clus_gpx_+3A_dir">dir</code></td>
<td>
<p>File path to save output</p>
</td></tr>
</table>


<h3>Value</h3>

<p>.gpx file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
exp_clus_gpx(AID = "ML1605M", cn = 4,
             locs = GPSeq_clus(dat = ML_ex_dat[1:50,], search_radius_m = 200, window_days = 6,
                    clus_min_locs = 3, show_plots = c(FALSE, "mean"))[[1]],
             cs = GPSeq_clus(dat = ML_ex_dat[1:50,], search_radius_m = 200, window_days = 6,
                  clus_min_locs = 3, show_plots = c(FALSE, "mean"))[[2]],
             dir= tempdir()
)


</code></pre>

<hr>
<h2 id='GPSeq_clus'>Sequential cluster algorithm of location data</h2><span id='topic+GPSeq_clus'></span>

<h3>Description</h3>

<p>Applies sequential clustering algorithm to location data based on user-defined parameters
and appends results to the dataframe. Provides a summary dataframe with attributes for each cluster
commonly used as covariates in subsequent modeling efforts. Plots interactive cluster maps.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GPSeq_clus(
  dat,
  search_radius_m,
  window_days,
  clus_min_locs = 2,
  centroid_calc = "mean",
  show_plots = c(TRUE, "mean"),
  scale_plot_clus = TRUE,
  store_plots = FALSE,
  season_breaks_jul = NA,
  daylight_hrs = NA,
  prbar = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="GPSeq_clus_+3A_dat">dat</code></td>
<td>
<p>Any dataframe including single or multiple animal location datasets that includes:
</p>

<dl>
<dt>$AID</dt><dd><p>Animal identification for each location</p>
</dd>
<dt>$TelemDate</dt><dd><p>Location timestamps as POSIXct format &quot;YYYY-MM-DD HH:MM:SS&quot; with single &quot;tzone&quot; attribute</p>
</dd>
<dt>$Long</dt><dd><p>Longitude values as decimal degrees (-180 to +180) including NAs for failed fixes</p>
</dd>
<dt>$Lat</dt><dd><p>Latitude values as decimal degrees (-90 to +90) including NAs for failed fixes</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="GPSeq_clus_+3A_search_radius_m">search_radius_m</code></td>
<td>
<p>Search radius (meters) from cluster centroid when building clusters.</p>
</td></tr>
<tr><td><code id="GPSeq_clus_+3A_window_days">window_days</code></td>
<td>
<p>Temporal window (days) to search for new locations from the most recent location in a cluster</p>
</td></tr>
<tr><td><code id="GPSeq_clus_+3A_clus_min_locs">clus_min_locs</code></td>
<td>
<p>Minimum number of locations required to form a cluster. Default is 2.</p>
</td></tr>
<tr><td><code id="GPSeq_clus_+3A_centroid_calc">centroid_calc</code></td>
<td>
<p>Method for recalculating centroids when actively building clusters - e.g., &quot;median&quot; or &quot;mean&quot; (default). Not to be confused with
plotting the &quot;mean&quot; or &quot;median&quot; centroid once a cluster has been built.</p>
</td></tr>
<tr><td><code id="GPSeq_clus_+3A_show_plots">show_plots</code></td>
<td>
<p>Vector of TRUE/FALSE for plotting followed by plotting argument for the &quot;median&quot; or &quot;mean&quot; centroid - e.g., c(TRUE, &quot;mean&quot;) (default)</p>
</td></tr>
<tr><td><code id="GPSeq_clus_+3A_scale_plot_clus">scale_plot_clus</code></td>
<td>
<p>When plotting, scale cluster markers based on number of locations (TRUE/FALSE).</p>
</td></tr>
<tr><td><code id="GPSeq_clus_+3A_store_plots">store_plots</code></td>
<td>
<p>When plotting, also assign map outputs to global environment (TRUE/FALSE).</p>
</td></tr>
<tr><td><code id="GPSeq_clus_+3A_season_breaks_jul">season_breaks_jul</code></td>
<td>
<p>Ascending numeric vector of julian days (0-365) used to classify by season/parturition/hunting seasons etc.
e.g., c(121, 274, 305) result may be: 1 Nov - 30 Apr (winter = 0), 1 May - 31 Aug (summer = 1), 1 Oct - 31 Oct (hunting season = 2)</p>
</td></tr>
<tr><td><code id="GPSeq_clus_+3A_daylight_hrs">daylight_hrs</code></td>
<td>
<p>Manually set start and stop hours (0-24) to classify day and night locations. - e.g. c(6,18) would classify 6AM - 6PM as daylight hrs.
NA (default) uses 'suncalc' package to convert cluster location and time to be classified based on specific specific sunrise and sunset times.</p>
</td></tr>
<tr><td><code id="GPSeq_clus_+3A_prbar">prbar</code></td>
<td>
<p>Show progress bars (TRUE/FALSE).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list containing two dataframes. The first contains the original location dataframe with &quot;clus_ID&quot; column assigning each row a cluster ID if applicable.
The second dataframe in the list contains a summary of sequential clusters and common cluster attributes (descriptions below) for subsequent modeling.
If 'show_plots' argument is active, returns interactive maps of locations and clusters by animal.
</p>

<dl>
<dt>AID</dt><dd><p>Animal identification</p>
</dd>
<dt>clus_ID</dt><dd><p>Sequential cluster ID number</p>
</dd>
<dt>clus_start</dt><dd><p>Timestamp of first location in cluster</p>
</dd>
<dt>clus_end</dt><dd><p>Timestamp of last location in cluster</p>
</dd>
<dt>clus_status</dt><dd><p>&quot;Closed&quot; if the time window (window_days) has expired for the cluster according to users Sys.time() output.
These clusters are therefore solidified and should not change if appending new location data.
&quot;Open&quot; if the time window remains open at the time the function was run. &quot;Open&quot; clusters have the ability
to shift sequence, combine with other clusters, emerge as a new cluster, etc. This attribute becomes
relevant when appending new satellite data to the location dataframe, and may serve as an index of whether
an animal continues to actively visit the cluster site within the time window.</p>
</dd>
<dt>g_c_Long</dt><dd><p>Geometic centroid longitude value calculated using the mean</p>
</dd>
<dt>g_c_Lat</dt><dd><p>Geometic centroid latitude value calculated using the mean</p>
</dd>
<dt>g_med_Long</dt><dd><p>Geometic centroid longitude value calculated using the median</p>
</dd>
<dt>g_med_Lat</dt><dd><p>Geometic centroid latitude value calculated using the median</p>
</dd>
<dt>clus_dur_hr</dt><dd><p>Hours from the first to last locations of the cluster</p>
</dd>
<dt>n_clus_locs</dt><dd><p>Number of locations within the cluster</p>
</dd>
<dt>visits</dt><dd><p>Number of visits/revisits to the cluster based on the number of times locations fall outside the search radius and return
to add locations to the cluster</p>
</dd>
<dt>fix_succ_clus_dur</dt><dd><p>Fix rate success during the duration of the cluster</p>
</dd>
<dt>adj_clus_locs</dt><dd><p>Adjusted number of cluster locations accounting for missed fixes (number cluster locations / fix success of cluster duration)</p>
</dd>
<dt>fid</dt><dd><p>Fidelity to the cluster during cluster duration (number locations on cluster - number locations off cluster)</p>
</dd>
<dt>max_foray</dt><dd><p>Maximum location distance (meters) from centroid during cluster duration for all locations</p>
</dd>
<dt>clus_radius</dt><dd><p>Maximum location distance (meters) from centroid during cluster duration for cluster-attributed locations</p>
</dd>
<dt>avg_clus_dist</dt><dd><p>Mean distance from all cluster locations to centroid</p>
</dd>
<dt>n_24_per</dt><dd><p>Number of unique 24 hr periods during the cluster duration that hold at least one cluster location</p>
</dd>
<dt>bin_24hr</dt><dd><p>Binary output for cluster duration (0 == less or equal to 24hr, 1 == greater than 24hr)</p>
</dd>
<dt>season</dt><dd><p>Nominal attribute for user defined seasons based on 'season_breaks_jul' argument</p>
</dd>
<dt>night_pts</dt><dd><p>Number of night cluster locations based on 'daylight_hrs' argument</p>
</dd>
<dt>night_prop</dt><dd><p>Proportion of night cluster locations</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>GPSeq_clus(dat = ML_ex_dat[1:50,], search_radius_m = 200, window_days = 6,
           clus_min_locs = 3, show_plots = c(FALSE, "mean"))


GPSeq_clus(dat = ML_ex_dat, search_radius_m = 50, window_days = 2.5, clus_min_locs = 12,
           centroid_calc = "median", show_plots = c(TRUE, "median"), scale_plot_clus = FALSE,
           season_breaks_jul = c(120, 240, 300), daylight_hrs = c(8, 16), prbar=FALSE)


</code></pre>

<hr>
<h2 id='ind_clus_kml'>Plot individual cluster .kml</h2><span id='topic+ind_clus_kml'></span>

<h3>Description</h3>

<p>Uses results from 'GPSeq_clus&quot; to plot individual cluster .kmls
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ind_clus_kml(
  AID,
  cn,
  locs,
  cs,
  centroid_calc = "mean",
  overwrite = TRUE,
  dir = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ind_clus_kml_+3A_aid">AID</code></td>
<td>
<p>Desired AID from sequential cluster output</p>
</td></tr>
<tr><td><code id="ind_clus_kml_+3A_cn">cn</code></td>
<td>
<p>Desired cluster number</p>
</td></tr>
<tr><td><code id="ind_clus_kml_+3A_locs">locs</code></td>
<td>
<p>Location dataframe output from GPSeq_clus()</p>
</td></tr>
<tr><td><code id="ind_clus_kml_+3A_cs">cs</code></td>
<td>
<p>Cluster summary output from GPSeq_clus()</p>
</td></tr>
<tr><td><code id="ind_clus_kml_+3A_centroid_calc">centroid_calc</code></td>
<td>
<p>'mean' (default) or 'median' centroid plot</p>
</td></tr>
<tr><td><code id="ind_clus_kml_+3A_overwrite">overwrite</code></td>
<td>
<p>TRUE (default) labels output as &quot;ind.kml&quot; that overwrites with each run within tempdir(). FALSE saves outputs as &quot;AID_cn&quot;</p>
</td></tr>
<tr><td><code id="ind_clus_kml_+3A_dir">dir</code></td>
<td>
<p>File path when saving output</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Opens the cluster locations and centroid .kml for assessment.
</p>

<hr>
<h2 id='julian_conv'>Julian Conversion</h2><span id='topic+julian_conv'></span>

<h3>Description</h3>

<p>Julian Conversion
</p>


<h3>Usage</h3>

<pre><code class='language-R'>julian_conv(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="julian_conv_+3A_x">x</code></td>
<td>
<p>vector of input dates</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of julian days
</p>

<hr>
<h2 id='ML_ex_dat'>Sample Data for Sequential Clustering Routine</h2><span id='topic+ML_ex_dat'></span>

<h3>Description</h3>

<p>A <code>dataframe</code> containing a subset of GPS location data from 2 male and 1 female mountain lions used
for testing and running sequential cluster function examples.Example data provided by Wyoming Game and Fish Department, 2020.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ML_ex_dat
</code></pre>


<h3>Format</h3>

<p>A <code>dataframe</code> containing 4 columns:
</p>

<dl>
<dt>AID</dt><dd><p>animal identification</p>
</dd>
<dt>TelemDate</dt><dd><p>location timestamp in POSIXct format</p>
</dd>
<dt>Lat</dt><dd><p>latitude coordinates</p>
</dd>
<dt>Long</dt><dd><p>longitude coordinates</p>
</dd>
</dl>


<hr>
<h2 id='moveMe'>arrange columns</h2><span id='topic+moveMe'></span>

<h3>Description</h3>

<p>arrange columns
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moveMe(data, tomove, where = "last", ba = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moveMe_+3A_data">data</code></td>
<td>
<p>input dataframe</p>
</td></tr>
<tr><td><code id="moveMe_+3A_tomove">tomove</code></td>
<td>
<p>which column(s) to move</p>
</td></tr>
<tr><td><code id="moveMe_+3A_where">where</code></td>
<td>
<p>where to move them - e.g. &quot;before&quot;, &quot;after&quot;, &quot;first&quot;, &quot;last&quot;</p>
</td></tr>
<tr><td><code id="moveMe_+3A_ba">ba</code></td>
<td>
<p>??</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Dataframe with new column order
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
