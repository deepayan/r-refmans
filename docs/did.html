<!DOCTYPE html><html lang="en"><head><title>Help for package did</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {did}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#aggte'><p>Aggregate Group-Time Average Treatment Effects</p></a></li>
<li><a href='#AGGTEobj'><p>AGGTEobj</p></a></li>
<li><a href='#att_gt'><p>Group-Time Average Treatment Effects</p></a></li>
<li><a href='#build_sim_dataset'><p>build_sim_dataset</p></a></li>
<li><a href='#citation'><p>citation</p></a></li>
<li><a href='#compute.aggte'><p>Compute Aggregated Treatment Effect Parameters</p></a></li>
<li><a href='#compute.att_gt'><p>Compute Group-Time Average Treatment Effects</p></a></li>
<li><a href='#conditional_did_pretest'><p>Pre-Test of Conditional Parallel Trends Assumption</p></a></li>
<li><a href='#did'><p>Difference in Differences</p></a></li>
<li><a href='#DIDparams'><p>DIDparams</p></a></li>
<li><a href='#get_agg_inf_func'><p>Get an influence function for particular aggregate parameters</p></a></li>
<li><a href='#getSE'><p>Take influence function and return standard errors</p></a></li>
<li><a href='#ggdid'><p>Plot <code>did</code> objects using <code>ggplot2</code></p></a></li>
<li><a href='#ggdid.AGGTEobj'><p>Plot <code>AGGTEobj</code> objects</p></a></li>
<li><a href='#ggdid.MP'><p>Plot <code>MP</code> objects using <code>ggplot2</code></p></a></li>
<li><a href='#glance.AGGTEobj'><p>glance model characteristics from AGGTEobj objects</p></a></li>
<li><a href='#glance.MP'><p>glance model characteristics from MP objects</p></a></li>
<li><a href='#gplot'><p>gplot</p></a></li>
<li><a href='#indicator'><p>indicator</p></a></li>
<li><a href='#mboot'><p>Multiplier Bootstrap</p></a></li>
<li><a href='#MP'><p>MP</p></a></li>
<li><a href='#MP.TEST'><p>MP.TEST</p></a></li>
<li><a href='#mpdta'><p>County Teen Employment Dataset</p></a></li>
<li><a href='#pre_process_did'><p>Process <code>did</code> Function Arguments</p></a></li>
<li><a href='#print.AGGTEobj'><p>print.AGGTEobj</p></a></li>
<li><a href='#print.MP'><p>print.MP</p></a></li>
<li><a href='#process_attgt'><p>Process Results from <code>compute.att_gt()</code></p></a></li>
<li><a href='#reexports'><p>tidy results</p></a></li>
<li><a href='#reset.sim'><p>reset.sim</p></a></li>
<li><a href='#sim'><p>sim</p></a></li>
<li><a href='#splot'><p>splot</p></a></li>
<li><a href='#summary.AGGTEobj'><p>Summary Aggregate Treatment Effect Parameter Objects</p></a></li>
<li><a href='#summary.MP'><p>summary.MP</p></a></li>
<li><a href='#summary.MP.TEST'><p>summary.MP.TEST</p></a></li>
<li><a href='#test.mboot'><p>Multiplier Bootstrap for Conditional Moment Test</p></a></li>
<li><a href='#tidy.AGGTEobj'><p>tidy results from AGGTEobj objects</p></a></li>
<li><a href='#tidy.MP'><p>tidy results from MP objects</p></a></li>
<li><a href='#trimmer'><p>trimmer</p></a></li>
<li><a href='#wif'><p>Compute extra term in influence function due to estimating weights</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Treatment Effects with Multiple Periods and Groups</td>
</tr>
<tr>
<td>Version:</td>
<td>2.1.2</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://bcallaway11.github.io/did/">https://bcallaway11.github.io/did/</a>,
<a href="https://github.com/bcallaway11/did/">https://github.com/bcallaway11/did/</a></td>
</tr>
<tr>
<td>Description:</td>
<td>The standard Difference-in-Differences (DID) setup involves two periods and two groups &ndash; a treated group and untreated group.  Many applications of DID methods involve more than two periods and have individuals that are treated at different points in time.  This package contains tools for computing average treatment effect parameters in Difference in Differences setups with more than two periods and with variation in treatment timing using the methods developed in Callaway and Sant'Anna (2021) &lt;<a href="https://doi.org/10.1016%2Fj.jeconom.2020.12.001">doi:10.1016/j.jeconom.2020.12.001</a>&gt;.  The main parameters are group-time average treatment effects which are the average treatment effect for a particular group at a a particular time.  These can be aggregated into a fewer number of treatment effect parameters, and the package deals with the cases where there is selective treatment timing, dynamic treatment effects, calendar time effects, or combinations of these.  There are also functions for testing the Difference in Differences assumption, and plotting group-time average treatment effects.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5),</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>BMisc (&ge; 1.4.4), Matrix, pbapply, ggplot2, ggpubr, DRDID,
generics, methods, tidyr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, plm, here, knitr, covr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-07-20 03:09:38 UTC; brant</td>
</tr>
<tr>
<td>Author:</td>
<td>Brantly Callaway [aut, cre],
  Pedro H. C. Sant'Anna [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Brantly Callaway &lt;brantly.callaway@uga.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-07-20 16:00:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='aggte'>Aggregate Group-Time Average Treatment Effects</h2><span id='topic+aggte'></span>

<h3>Description</h3>

<p>A function to take group-time average treatment effects
and aggregate them into a smaller number of parameters.  There are
several possible aggregations including &quot;simple&quot;, &quot;dynamic&quot;, &quot;group&quot;,
and &quot;calendar.&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aggte(
  MP,
  type = "group",
  balance_e = NULL,
  min_e = -Inf,
  max_e = Inf,
  na.rm = FALSE,
  bstrap = NULL,
  biters = NULL,
  cband = NULL,
  alp = NULL,
  clustervars = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="aggte_+3A_mp">MP</code></td>
<td>
<p>an MP object (i.e., the results of the <code><a href="#topic+att_gt">att_gt()</a></code> method)</p>
</td></tr>
<tr><td><code id="aggte_+3A_type">type</code></td>
<td>
<p>Which type of aggregated treatment effect parameter to compute.
One option is &quot;simple&quot; (this just computes a weighted average of all
group-time average treatment effects with weights proportional to group
size).  Other options are &quot;dynamic&quot; (this computes average effects across
different lengths of exposure to the treatment and is similar to an
&quot;event study&quot;; here the overall effect averages the effect of the
treatment across all positive lengths of exposure); &quot;group&quot; (this
is the default option and
computes average treatment effects across different groups; here
the overall effect averages the effect across different groups); and
&quot;calendar&quot; (this computes average treatment effects across different
time periods; here the overall effect averages the effect across each
time period).</p>
</td></tr>
<tr><td><code id="aggte_+3A_balance_e">balance_e</code></td>
<td>
<p>If set (and if one computes dynamic effects), it balances
the sample with respect to event time.  For example, if <code>balance.e=2</code>,
<code>aggte</code> will drop groups that are not exposed to treatment for
at least three periods. (the initial period when <code>e=0</code> as well as the
next two periods when <code>e=1</code> and the <code>e=2</code>).  This ensures that
the composition of groups does not change when event time changes.</p>
</td></tr>
<tr><td><code id="aggte_+3A_min_e">min_e</code></td>
<td>
<p>For event studies, this is the smallest event time to compute
dynamic effects for.  By default, <code>min_e = -Inf</code> so that effects at
all lengths of exposure are computed.</p>
</td></tr>
<tr><td><code id="aggte_+3A_max_e">max_e</code></td>
<td>
<p>For event studies, this is the largest event time to compute
dynamic effects for.  By default, <code>max_e = Inf</code> so that effects at
all lengths of exposure are computed.</p>
</td></tr>
<tr><td><code id="aggte_+3A_na.rm">na.rm</code></td>
<td>
<p>Logical value if we are to remove missing Values from analyses. Defaults is FALSE.</p>
</td></tr>
<tr><td><code id="aggte_+3A_bstrap">bstrap</code></td>
<td>
<p>Boolean for whether or not to compute standard errors using
the multiplier bootstrap.  If standard errors are clustered, then one
must set <code>bstrap=TRUE</code>. Default is value set in the MP object.  If bstrap is <code>FALSE</code>, then analytical
standard errors are reported.</p>
</td></tr>
<tr><td><code id="aggte_+3A_biters">biters</code></td>
<td>
<p>The number of bootstrap iterations to use.  The default is the value set in the MP object,
and this is only applicable if <code>bstrap=TRUE</code>.</p>
</td></tr>
<tr><td><code id="aggte_+3A_cband">cband</code></td>
<td>
<p>Boolean for whether or not to compute a uniform confidence
band that covers all of the group-time average treatment effects
with fixed probability <code>1-alp</code>.  In order to compute uniform confidence
bands, <code>bstrap</code> must also be set to <code>TRUE</code>.  The default is
the value set in the MP object</p>
</td></tr>
<tr><td><code id="aggte_+3A_alp">alp</code></td>
<td>
<p>the significance level, default is value set in the MP object.</p>
</td></tr>
<tr><td><code id="aggte_+3A_clustervars">clustervars</code></td>
<td>
<p>A vector of variables to cluster on.  At most, there
can be two variables (otherwise will throw an error) and one of these
must be the same as idname which allows for clustering at the individual
level. Default is the variables set in the MP object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code><a href="#topic+AGGTEobj">AGGTEobj</a></code> object that holds the results from the
aggregation
</p>


<h3>Examples</h3>

<p>Initial ATT(g,t) estimates from <code><a href="#topic+att_gt">att_gt()</a></code>
</p>
<div class="sourceCode r"><pre>data(mpdta)
out &lt;- att_gt(yname="lemp",
               tname="year",
               idname="countyreal",
               gname="first.treat",
               xformla=NULL,
               data=mpdta)
</pre></div>
<p>You can aggregate the ATT(g,t) in many ways.
</p>
<p><strong>Overall ATT:</strong>
</p>
<div class="sourceCode r"><pre>aggte(out, type = "simple")
#&gt; 
#&gt; Call:
#&gt; aggte(MP = out, type = "simple")
#&gt; 
#&gt; Reference: Callaway, Brantly and Pedro H.C. Sant'Anna.  "Difference-in-Differences with Multiple Time Periods." Journal of Econometrics, Vol. 225, No. 2, pp. 200-230, 2021. &lt;https://doi.org/10.1016/j.jeconom.2020.12.001&gt;, &lt;https://arxiv.org/abs/1803.09015&gt; 
#&gt; 
#&gt; 
#&gt;    ATT    Std. Error     [ 95%  Conf. Int.]  
#&gt;  -0.04         0.013    -0.0654     -0.0145 *
#&gt; 
#&gt; 
#&gt; ---
#&gt; Signif. codes: `*' confidence band does not cover 0
#&gt; 
#&gt; Control Group:  Never Treated,  Anticipation Periods:  0
#&gt; Estimation Method:  Doubly Robust
</pre></div>
<p><strong>Dynamic ATT (Event-Study):</strong>
</p>
<div class="sourceCode r"><pre>aggte(out, type = "dynamic")
#&gt; 
#&gt; Call:
#&gt; aggte(MP = out, type = "dynamic")
#&gt; 
#&gt; Reference: Callaway, Brantly and Pedro H.C. Sant'Anna.  "Difference-in-Differences with Multiple Time Periods." Journal of Econometrics, Vol. 225, No. 2, pp. 200-230, 2021. &lt;https://doi.org/10.1016/j.jeconom.2020.12.001&gt;, &lt;https://arxiv.org/abs/1803.09015&gt; 
#&gt; 
#&gt; 
#&gt; Overall summary of ATT's based on event-study/dynamic aggregation:  
#&gt;      ATT    Std. Error     [ 95%  Conf. Int.]  
#&gt;  -0.0772          0.02    -0.1165      -0.038 *
#&gt; 
#&gt; 
#&gt; Dynamic Effects:
#&gt;  Event time Estimate Std. Error [95% Simult.  Conf. Band]  
#&gt;          -3   0.0305     0.0150       -0.0060      0.0670  
#&gt;          -2  -0.0006     0.0139       -0.0344      0.0333  
#&gt;          -1  -0.0245     0.0150       -0.0610      0.0121  
#&gt;           0  -0.0199     0.0117       -0.0485      0.0087  
#&gt;           1  -0.0510     0.0168       -0.0919     -0.0100 *
#&gt;           2  -0.1373     0.0380       -0.2299     -0.0446 *
#&gt;           3  -0.1008     0.0360       -0.1887     -0.0130 *
#&gt; ---
#&gt; Signif. codes: `*' confidence band does not cover 0
#&gt; 
#&gt; Control Group:  Never Treated,  Anticipation Periods:  0
#&gt; Estimation Method:  Doubly Robust
</pre></div>
<p><strong>ATT for each group:</strong>
</p>
<div class="sourceCode r"><pre>aggte(out, type = "group")
#&gt; 
#&gt; Call:
#&gt; aggte(MP = out, type = "group")
#&gt; 
#&gt; Reference: Callaway, Brantly and Pedro H.C. Sant'Anna.  "Difference-in-Differences with Multiple Time Periods." Journal of Econometrics, Vol. 225, No. 2, pp. 200-230, 2021. &lt;https://doi.org/10.1016/j.jeconom.2020.12.001&gt;, &lt;https://arxiv.org/abs/1803.09015&gt; 
#&gt; 
#&gt; 
#&gt; Overall summary of ATT's based on group/cohort aggregation:  
#&gt;     ATT    Std. Error     [ 95%  Conf. Int.]  
#&gt;  -0.031        0.0127    -0.0558     -0.0062 *
#&gt; 
#&gt; 
#&gt; Group Effects:
#&gt;  Group Estimate Std. Error [95% Simult.  Conf. Band]  
#&gt;   2004  -0.0797     0.0308       -0.1461     -0.0134 *
#&gt;   2006  -0.0229     0.0175       -0.0606      0.0148  
#&gt;   2007  -0.0261     0.0163       -0.0612      0.0091  
#&gt; ---
#&gt; Signif. codes: `*' confidence band does not cover 0
#&gt; 
#&gt; Control Group:  Never Treated,  Anticipation Periods:  0
#&gt; Estimation Method:  Doubly Robust
</pre></div>
<p><strong>ATT for each calendar year:</strong>
</p>
<div class="sourceCode r"><pre>aggte(out, type = "calendar")
#&gt; 
#&gt; Call:
#&gt; aggte(MP = out, type = "calendar")
#&gt; 
#&gt; Reference: Callaway, Brantly and Pedro H.C. Sant'Anna.  "Difference-in-Differences with Multiple Time Periods." Journal of Econometrics, Vol. 225, No. 2, pp. 200-230, 2021. &lt;https://doi.org/10.1016/j.jeconom.2020.12.001&gt;, &lt;https://arxiv.org/abs/1803.09015&gt; 
#&gt; 
#&gt; 
#&gt; Overall summary of ATT's based on calendar time aggregation:  
#&gt;      ATT    Std. Error     [ 95%  Conf. Int.]  
#&gt;  -0.0417        0.0177    -0.0765     -0.0069 *
#&gt; 
#&gt; 
#&gt; Time Effects:
#&gt;  Time Estimate Std. Error [95% Simult.  Conf. Band]  
#&gt;  2004  -0.0105     0.0248       -0.0689      0.0479  
#&gt;  2005  -0.0704     0.0313       -0.1443      0.0035  
#&gt;  2006  -0.0488     0.0199       -0.0956     -0.0020 *
#&gt;  2007  -0.0371     0.0143       -0.0708     -0.0033 *
#&gt; ---
#&gt; Signif. codes: `*' confidence band does not cover 0
#&gt; 
#&gt; Control Group:  Never Treated,  Anticipation Periods:  0
#&gt; Estimation Method:  Doubly Robust
</pre></div>

<hr>
<h2 id='AGGTEobj'>AGGTEobj</h2><span id='topic+AGGTEobj'></span>

<h3>Description</h3>

<p>Objects of this class hold results on aggregated
group-time average treatment effects
</p>
<p>An object for holding aggregated treatment effect parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AGGTEobj(
  overall.att = NULL,
  overall.se = NULL,
  type = "simple",
  egt = NULL,
  att.egt = NULL,
  se.egt = NULL,
  crit.val.egt = NULL,
  inf.function = NULL,
  min_e = NULL,
  max_e = NULL,
  balance_e = NULL,
  call = NULL,
  DIDparams = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="AGGTEobj_+3A_overall.att">overall.att</code></td>
<td>
<p>The estimated overall ATT</p>
</td></tr>
<tr><td><code id="AGGTEobj_+3A_overall.se">overall.se</code></td>
<td>
<p>Standard error for overall ATT</p>
</td></tr>
<tr><td><code id="AGGTEobj_+3A_type">type</code></td>
<td>
<p>Which type of aggregated treatment effect parameter to compute.
One option is &quot;simple&quot; (this just computes a weighted average of all
group-time average treatment effects with weights proportional to group
size).  Other options are &quot;dynamic&quot; (this computes average effects across
different lengths of exposure to the treatment and is similar to an
&quot;event study&quot;; here the overall effect averages the effect of the
treatment across all positive lengths of exposure); &quot;group&quot; (this
is the default option and
computes average treatment effects across different groups; here
the overall effect averages the effect across different groups); and
&quot;calendar&quot; (this computes average treatment effects across different
time periods; here the overall effect averages the effect across each
time period).</p>
</td></tr>
<tr><td><code id="AGGTEobj_+3A_egt">egt</code></td>
<td>
<p>Holds the length of exposure (for dynamic effects), the
group (for selective treatment timing), or the time period (for calendar
time effects)</p>
</td></tr>
<tr><td><code id="AGGTEobj_+3A_att.egt">att.egt</code></td>
<td>
<p>The ATT specific to egt</p>
</td></tr>
<tr><td><code id="AGGTEobj_+3A_se.egt">se.egt</code></td>
<td>
<p>The standard error specific to egt</p>
</td></tr>
<tr><td><code id="AGGTEobj_+3A_crit.val.egt">crit.val.egt</code></td>
<td>
<p>A critical value for computing uniform confidence
bands for dynamic effects, selective treatment timing, or time period
effects.</p>
</td></tr>
<tr><td><code id="AGGTEobj_+3A_inf.function">inf.function</code></td>
<td>
<p>The influence function of the chosen aggregated parameters</p>
</td></tr>
<tr><td><code id="AGGTEobj_+3A_min_e">min_e</code></td>
<td>
<p>For event studies, this is the smallest event time to compute
dynamic effects for.  By default, <code>min_e = -Inf</code> so that effects at
all lengths of exposure are computed.</p>
</td></tr>
<tr><td><code id="AGGTEobj_+3A_max_e">max_e</code></td>
<td>
<p>For event studies, this is the largest event time to compute
dynamic effects for.  By default, <code>max_e = Inf</code> so that effects at
all lengths of exposure are computed.</p>
</td></tr>
<tr><td><code id="AGGTEobj_+3A_balance_e">balance_e</code></td>
<td>
<p>If set (and if one computes dynamic effects), it balances
the sample with respect to event time.  For example, if <code>balance.e=2</code>,
<code>aggte</code> will drop groups that are not exposed to treatment for
at least three periods. (the initial period when <code>e=0</code> as well as the
next two periods when <code>e=1</code> and the <code>e=2</code>).  This ensures that
the composition of groups does not change when event time changes.</p>
</td></tr>
<tr><td><code id="AGGTEobj_+3A_call">call</code></td>
<td>
<p>The function call to aggte</p>
</td></tr>
<tr><td><code id="AGGTEobj_+3A_didparams">DIDparams</code></td>
<td>
<p>A DIDparams object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an AGGTEobj
</p>

<hr>
<h2 id='att_gt'>Group-Time Average Treatment Effects</h2><span id='topic+att_gt'></span>

<h3>Description</h3>

<p><code>att_gt</code> computes average treatment effects in DID
setups where there are more than two periods of data and allowing for
treatment to occur at different points in time and allowing for
treatment effect heterogeneity and dynamics.
See Callaway and Sant'Anna (2021) for a detailed description.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>att_gt(
  yname,
  tname,
  idname = NULL,
  gname,
  xformla = NULL,
  data,
  panel = TRUE,
  allow_unbalanced_panel = FALSE,
  control_group = c("nevertreated", "notyettreated"),
  anticipation = 0,
  weightsname = NULL,
  alp = 0.05,
  bstrap = TRUE,
  cband = TRUE,
  biters = 1000,
  clustervars = NULL,
  est_method = "dr",
  base_period = "varying",
  print_details = FALSE,
  pl = FALSE,
  cores = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="att_gt_+3A_yname">yname</code></td>
<td>
<p>The name of the outcome variable</p>
</td></tr>
<tr><td><code id="att_gt_+3A_tname">tname</code></td>
<td>
<p>The name of the column containing the time periods</p>
</td></tr>
<tr><td><code id="att_gt_+3A_idname">idname</code></td>
<td>
<p>The individual (cross-sectional unit) id name</p>
</td></tr>
<tr><td><code id="att_gt_+3A_gname">gname</code></td>
<td>
<p>The name of the variable in <code>data</code> that
contains the first period when a particular observation is treated.
This should be a positive number for all observations in treated groups.
It defines which &quot;group&quot; a unit belongs to.  It should be 0 for units
in the untreated group.</p>
</td></tr>
<tr><td><code id="att_gt_+3A_xformla">xformla</code></td>
<td>
<p>A formula for the covariates to include in the
model.  It should be of the form <code>~ X1 + X2</code>.  Default
is NULL which is equivalent to <code>xformla=~1</code>.  This is
used to create a matrix of covariates which is then passed
to the 2x2 DID estimator chosen in <code>est_method</code>.</p>
</td></tr>
<tr><td><code id="att_gt_+3A_data">data</code></td>
<td>
<p>The name of the data.frame that contains the data</p>
</td></tr>
<tr><td><code id="att_gt_+3A_panel">panel</code></td>
<td>
<p>Whether or not the data is a panel dataset.
The panel dataset should be provided in long format &ndash; that
is, where each row corresponds to a unit observed at a
particular point in time.  The default is TRUE.  When
is using a panel dataset, the variable <code>idname</code> must
be set.  When <code>panel=FALSE</code>, the data is treated
as repeated cross sections.</p>
</td></tr>
<tr><td><code id="att_gt_+3A_allow_unbalanced_panel">allow_unbalanced_panel</code></td>
<td>
<p>Whether or not function should
&quot;balance&quot; the panel with respect to time and id.  The default
values if <code>FALSE</code> which means that <code><a href="#topic+att_gt">att_gt()</a></code> will drop
all units where data is not observed in all periods.
The advantage of this is that the computations are faster
(sometimes substantially).</p>
</td></tr>
<tr><td><code id="att_gt_+3A_control_group">control_group</code></td>
<td>
<p>Which units to use the control group.
The default is &quot;nevertreated&quot; which sets the control group
to be the group of units that never participate in the
treatment.  This group does not change across groups or
time periods.  The other option is to set
<code>group="notyettreated"</code>.  In this case, the control group
is set to the group of units that have not yet participated
in the treatment in that time period.  This includes all
never treated units, but it includes additional units that
eventually participate in the treatment, but have not
participated yet.</p>
</td></tr>
<tr><td><code id="att_gt_+3A_anticipation">anticipation</code></td>
<td>
<p>The number of time periods before participating
in the treatment where units can anticipate participating in the
treatment and therefore it can affect their untreated potential outcomes</p>
</td></tr>
<tr><td><code id="att_gt_+3A_weightsname">weightsname</code></td>
<td>
<p>The name of the column containing the sampling weights.
If not set, all observations have same weight.</p>
</td></tr>
<tr><td><code id="att_gt_+3A_alp">alp</code></td>
<td>
<p>the significance level, default is 0.05</p>
</td></tr>
<tr><td><code id="att_gt_+3A_bstrap">bstrap</code></td>
<td>
<p>Boolean for whether or not to compute standard errors using
the multiplier bootstrap.  If standard errors are clustered, then one
must set <code>bstrap=TRUE</code>. Default is <code>TRUE</code> (in addition, cband
is also by default <code>TRUE</code> indicating that uniform confidence bands
will be returned.  If bstrap is <code>FALSE</code>, then analytical
standard errors are reported.</p>
</td></tr>
<tr><td><code id="att_gt_+3A_cband">cband</code></td>
<td>
<p>Boolean for whether or not to compute a uniform confidence
band that covers all of the group-time average treatment effects
with fixed probability <code>1-alp</code>.  In order to compute uniform confidence
bands, <code>bstrap</code> must also be set to <code>TRUE</code>.  The default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="att_gt_+3A_biters">biters</code></td>
<td>
<p>The number of bootstrap iterations to use.  The default is 1000,
and this is only applicable if <code>bstrap=TRUE</code>.</p>
</td></tr>
<tr><td><code id="att_gt_+3A_clustervars">clustervars</code></td>
<td>
<p>A vector of variables names to cluster on.  At most, there
can be two variables (otherwise will throw an error) and one of these
must be the same as idname which allows for clustering at the individual
level. By default, we cluster at individual level (when <code>bstrap=TRUE</code>).</p>
</td></tr>
<tr><td><code id="att_gt_+3A_est_method">est_method</code></td>
<td>
<p>the method to compute group-time average treatment effects.  The default is &quot;dr&quot; which uses the doubly robust
approach in the <code>DRDID</code> package.  Other built-in methods
include &quot;ipw&quot; for inverse probability weighting and &quot;reg&quot; for
first step regression estimators.  The user can also pass their
own function for estimating group time average treatment
effects.  This should be a function
<code>f(Y1,Y0,treat,covariates)</code> where <code>Y1</code> is an
<code>n</code> x <code>1</code> vector of outcomes in the post-treatment
outcomes, <code>Y0</code> is an <code>n</code> x <code>1</code> vector of
pre-treatment outcomes, <code>treat</code> is a vector indicating
whether or not an individual participates in the treatment,
and <code>covariates</code> is an <code>n</code> x <code>k</code> matrix of
covariates.  The function should return a list that includes
<code>ATT</code> (an estimated average treatment effect), and
<code>inf.func</code> (an <code>n</code> x <code>1</code> influence function).
The function can return other things as well, but these are
the only two that are required. <code>est_method</code> is only used
if covariates are included.</p>
</td></tr>
<tr><td><code id="att_gt_+3A_base_period">base_period</code></td>
<td>
<p>Whether to use a &quot;varying&quot; base period or a
&quot;universal&quot; base period.  Either choice results in the same
post-treatment estimates of ATT(g,t)'s.  In pre-treatment
periods, using a varying base period amounts to computing a
pseudo-ATT in each treatment period by comparing the change
in outcomes for a particular group relative to its comparison
group in the pre-treatment periods (i.e., in pre-treatment
periods this setting computes changes from period t-1 to period
t, but repeatedly changes the value of t)
</p>
<p>A universal base period fixes the base period to always be
(g-anticipation-1).  This does not compute
pseudo-ATT(g,t)'s in pre-treatment periods, but rather
reports average changes in outcomes from period t to
(g-anticipation-1) for a particular group relative to its comparison
group.  This is analogous to what is often reported in event
study regressions.
</p>
<p>Using a varying base period results in an estimate of
ATT(g,t) being reported in the period immediately before
treatment.  Using a universal base period normalizes the
estimate in the period right before treatment (or earlier when
the user allows for anticipation) to be equal to 0, but one
extra estimate in an earlier period.</p>
</td></tr>
<tr><td><code id="att_gt_+3A_print_details">print_details</code></td>
<td>
<p>Whether or not to show details/progress of computations.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="att_gt_+3A_pl">pl</code></td>
<td>
<p>Whether or not to use parallel processing</p>
</td></tr>
<tr><td><code id="att_gt_+3A_cores">cores</code></td>
<td>
<p>The number of cores to use for parallel processing</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an <code><a href="#topic+MP">MP</a></code> object containing all the results for group-time average
treatment effects
</p>


<h3>Examples:</h3>

<p><strong>Basic <code><a href="#topic+att_gt">att_gt()</a></code> call:</strong>
</p>
<div class="sourceCode r"><pre># Example data
data(mpdta)

out1 &lt;- att_gt(yname="lemp",
               tname="year",
               idname="countyreal",
               gname="first.treat",
               xformla=NULL,
               data=mpdta)
summary(out1)
#&gt; 
#&gt; Call:
#&gt; att_gt(yname = "lemp", tname = "year", idname = "countyreal", 
#&gt;     gname = "first.treat", xformla = NULL, data = mpdta)
#&gt; 
#&gt; Reference: Callaway, Brantly and Pedro H.C. Sant'Anna.  "Difference-in-Differences with Multiple Time Periods." Journal of Econometrics, Vol. 225, No. 2, pp. 200-230, 2021. &lt;https://doi.org/10.1016/j.jeconom.2020.12.001&gt;, &lt;https://arxiv.org/abs/1803.09015&gt; 
#&gt; 
#&gt; Group-Time Average Treatment Effects:
#&gt;  Group Time ATT(g,t) Std. Error [95% Simult.  Conf. Band]  
#&gt;   2004 2004  -0.0105     0.0235       -0.0752      0.0542  
#&gt;   2004 2005  -0.0704     0.0307       -0.1549      0.0140  
#&gt;   2004 2006  -0.1373     0.0365       -0.2379     -0.0367 *
#&gt;   2004 2007  -0.1008     0.0383       -0.2062      0.0046  
#&gt;   2006 2004   0.0065     0.0236       -0.0585      0.0715  
#&gt;   2006 2005  -0.0028     0.0195       -0.0564      0.0509  
#&gt;   2006 2006  -0.0046     0.0185       -0.0556      0.0464  
#&gt;   2006 2007  -0.0412     0.0202       -0.0969      0.0145  
#&gt;   2007 2004   0.0305     0.0155       -0.0122      0.0733  
#&gt;   2007 2005  -0.0027     0.0158       -0.0462      0.0408  
#&gt;   2007 2006  -0.0311     0.0176       -0.0794      0.0173  
#&gt;   2007 2007  -0.0261     0.0167       -0.0720      0.0199  
#&gt; ---
#&gt; Signif. codes: `*' confidence band does not cover 0
#&gt; 
#&gt; P-value for pre-test of parallel trends assumption:  0.16812
#&gt; Control Group:  Never Treated,  Anticipation Periods:  0
#&gt; Estimation Method:  Doubly Robust
</pre></div>
<p><strong>Using covariates:</strong>
</p>
<div class="sourceCode r"><pre>out2 &lt;- att_gt(yname="lemp",
               tname="year",
               idname="countyreal",
               gname="first.treat",
               xformla=~lpop,
               data=mpdta)
summary(out2)
#&gt; 
#&gt; Call:
#&gt; att_gt(yname = "lemp", tname = "year", idname = "countyreal", 
#&gt;     gname = "first.treat", xformla = ~lpop, data = mpdta)
#&gt; 
#&gt; Reference: Callaway, Brantly and Pedro H.C. Sant'Anna.  "Difference-in-Differences with Multiple Time Periods." Journal of Econometrics, Vol. 225, No. 2, pp. 200-230, 2021. &lt;https://doi.org/10.1016/j.jeconom.2020.12.001&gt;, &lt;https://arxiv.org/abs/1803.09015&gt; 
#&gt; 
#&gt; Group-Time Average Treatment Effects:
#&gt;  Group Time ATT(g,t) Std. Error [95% Simult.  Conf. Band]  
#&gt;   2004 2004  -0.0145     0.0233       -0.0759      0.0469  
#&gt;   2004 2005  -0.0764     0.0297       -0.1546      0.0018  
#&gt;   2004 2006  -0.1404     0.0348       -0.2321     -0.0488 *
#&gt;   2004 2007  -0.1069     0.0340       -0.1964     -0.0174 *
#&gt;   2006 2004  -0.0005     0.0236       -0.0627      0.0618  
#&gt;   2006 2005  -0.0062     0.0184       -0.0548      0.0424  
#&gt;   2006 2006   0.0010     0.0194       -0.0502      0.0521  
#&gt;   2006 2007  -0.0413     0.0189       -0.0912      0.0086  
#&gt;   2007 2004   0.0267     0.0145       -0.0115      0.0650  
#&gt;   2007 2005  -0.0046     0.0163       -0.0476      0.0384  
#&gt;   2007 2006  -0.0284     0.0191       -0.0788      0.0219  
#&gt;   2007 2007  -0.0288     0.0166       -0.0724      0.0149  
#&gt; ---
#&gt; Signif. codes: `*' confidence band does not cover 0
#&gt; 
#&gt; P-value for pre-test of parallel trends assumption:  0.23267
#&gt; Control Group:  Never Treated,  Anticipation Periods:  0
#&gt; Estimation Method:  Doubly Robust
</pre></div>
<p><strong>Specify comparison units:</strong>
</p>
<div class="sourceCode r"><pre>out3 &lt;- att_gt(yname="lemp",
               tname="year",
               idname="countyreal",
               gname="first.treat",
               xformla=~lpop,
               control_group = "notyettreated",
               data=mpdta)
summary(out3)
#&gt; 
#&gt; Call:
#&gt; att_gt(yname = "lemp", tname = "year", idname = "countyreal", 
#&gt;     gname = "first.treat", xformla = ~lpop, data = mpdta, control_group = "notyettreated")
#&gt; 
#&gt; Reference: Callaway, Brantly and Pedro H.C. Sant'Anna.  "Difference-in-Differences with Multiple Time Periods." Journal of Econometrics, Vol. 225, No. 2, pp. 200-230, 2021. &lt;https://doi.org/10.1016/j.jeconom.2020.12.001&gt;, &lt;https://arxiv.org/abs/1803.09015&gt; 
#&gt; 
#&gt; Group-Time Average Treatment Effects:
#&gt;  Group Time ATT(g,t) Std. Error [95% Simult.  Conf. Band]  
#&gt;   2004 2004  -0.0212     0.0225       -0.0810      0.0386  
#&gt;   2004 2005  -0.0816     0.0296       -0.1603     -0.0029 *
#&gt;   2004 2006  -0.1382     0.0382       -0.2397     -0.0367 *
#&gt;   2004 2007  -0.1069     0.0353       -0.2007     -0.0131 *
#&gt;   2006 2004  -0.0075     0.0236       -0.0703      0.0553  
#&gt;   2006 2005  -0.0046     0.0193       -0.0559      0.0468  
#&gt;   2006 2006   0.0087     0.0171       -0.0367      0.0540  
#&gt;   2006 2007  -0.0413     0.0195       -0.0931      0.0105  
#&gt;   2007 2004   0.0269     0.0136       -0.0093      0.0632  
#&gt;   2007 2005  -0.0042     0.0158       -0.0461      0.0377  
#&gt;   2007 2006  -0.0284     0.0185       -0.0777      0.0208  
#&gt;   2007 2007  -0.0288     0.0167       -0.0732      0.0156  
#&gt; ---
#&gt; Signif. codes: `*' confidence band does not cover 0
#&gt; 
#&gt; P-value for pre-test of parallel trends assumption:  0.23326
#&gt; Control Group:  Not Yet Treated,  Anticipation Periods:  0
#&gt; Estimation Method:  Doubly Robust
</pre></div>


<h3>References</h3>

<p>Callaway, Brantly and Pedro H.C. Sant'Anna.  \&quot;Difference-in-Differences with Multiple Time Periods.\&quot; Journal of Econometrics, Vol. 225, No. 2, pp. 200-230, 2021. <a href="https://doi.org/10.1016/j.jeconom.2020.12.001">doi:10.1016/j.jeconom.2020.12.001</a>, <a href="https://arxiv.org/abs/1803.09015">https://arxiv.org/abs/1803.09015</a>
</p>

<hr>
<h2 id='build_sim_dataset'>build_sim_dataset</h2><span id='topic+build_sim_dataset'></span>

<h3>Description</h3>

<p>A function for building simulated data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_sim_dataset(sp_list, panel = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="build_sim_dataset_+3A_sp_list">sp_list</code></td>
<td>
<p>A list of simulation parameters.  See <code>reset.sim</code> to generate
some default values for parameters</p>
</td></tr>
<tr><td><code id="build_sim_dataset_+3A_panel">panel</code></td>
<td>
<p>whether to construct panel data (the default) or repeated
cross sections data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame with the following columns
</p>

<ul>
<li><p> G observations group
</p>
</li>
<li><p> X value of covariate
</p>
</li>
<li><p> id observation's id
</p>
</li>
<li><p> cluster observation's cluster (by construction there is no within-cluster correlation)
</p>
</li>
<li><p> period time period for current observation
</p>
</li>
<li><p> Y outcome
</p>
</li>
<li><p> treat whether or not this unit is ever treated
</p>
</li></ul>


<hr>
<h2 id='citation'>citation</h2><span id='topic+citation'></span>

<h3>Description</h3>

<p>print the citation for the relevant paper
</p>


<h3>Usage</h3>

<pre><code class='language-R'>citation()
</code></pre>

<hr>
<h2 id='compute.aggte'>Compute Aggregated Treatment Effect Parameters</h2><span id='topic+compute.aggte'></span>

<h3>Description</h3>

<p>Does the heavy lifting on computing aggregated group-time
average treatment effects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute.aggte(
  MP,
  type = "group",
  balance_e = NULL,
  min_e = -Inf,
  max_e = Inf,
  na.rm = FALSE,
  bstrap = NULL,
  biters = NULL,
  cband = NULL,
  alp = NULL,
  clustervars = NULL,
  call = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute.aggte_+3A_mp">MP</code></td>
<td>
<p>an MP object (i.e., the results of the <code><a href="#topic+att_gt">att_gt()</a></code> method)</p>
</td></tr>
<tr><td><code id="compute.aggte_+3A_type">type</code></td>
<td>
<p>Which type of aggregated treatment effect parameter to compute.
One option is &quot;simple&quot; (this just computes a weighted average of all
group-time average treatment effects with weights proportional to group
size).  Other options are &quot;dynamic&quot; (this computes average effects across
different lengths of exposure to the treatment and is similar to an
&quot;event study&quot;; here the overall effect averages the effect of the
treatment across all positive lengths of exposure); &quot;group&quot; (this
is the default option and
computes average treatment effects across different groups; here
the overall effect averages the effect across different groups); and
&quot;calendar&quot; (this computes average treatment effects across different
time periods; here the overall effect averages the effect across each
time period).</p>
</td></tr>
<tr><td><code id="compute.aggte_+3A_balance_e">balance_e</code></td>
<td>
<p>If set (and if one computes dynamic effects), it balances
the sample with respect to event time.  For example, if <code>balance.e=2</code>,
<code>aggte</code> will drop groups that are not exposed to treatment for
at least three periods. (the initial period when <code>e=0</code> as well as the
next two periods when <code>e=1</code> and the <code>e=2</code>).  This ensures that
the composition of groups does not change when event time changes.</p>
</td></tr>
<tr><td><code id="compute.aggte_+3A_min_e">min_e</code></td>
<td>
<p>For event studies, this is the smallest event time to compute
dynamic effects for.  By default, <code>min_e = -Inf</code> so that effects at
all lengths of exposure are computed.</p>
</td></tr>
<tr><td><code id="compute.aggte_+3A_max_e">max_e</code></td>
<td>
<p>For event studies, this is the largest event time to compute
dynamic effects for.  By default, <code>max_e = Inf</code> so that effects at
all lengths of exposure are computed.</p>
</td></tr>
<tr><td><code id="compute.aggte_+3A_na.rm">na.rm</code></td>
<td>
<p>Logical value if we are to remove missing Values from analyses. Defaults is FALSE.</p>
</td></tr>
<tr><td><code id="compute.aggte_+3A_bstrap">bstrap</code></td>
<td>
<p>Boolean for whether or not to compute standard errors using
the multiplier bootstrap.  If standard errors are clustered, then one
must set <code>bstrap=TRUE</code>. Default is <code>TRUE</code> (in addition, cband
is also by default <code>TRUE</code> indicating that uniform confidence bands
will be returned.  If bstrap is <code>FALSE</code>, then analytical
standard errors are reported.</p>
</td></tr>
<tr><td><code id="compute.aggte_+3A_biters">biters</code></td>
<td>
<p>The number of bootstrap iterations to use.  The default is 1000,
and this is only applicable if <code>bstrap=TRUE</code>.</p>
</td></tr>
<tr><td><code id="compute.aggte_+3A_cband">cband</code></td>
<td>
<p>Boolean for whether or not to compute a uniform confidence
band that covers all of the group-time average treatment effects
with fixed probability <code>1-alp</code>.  In order to compute uniform confidence
bands, <code>bstrap</code> must also be set to <code>TRUE</code>.  The default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="compute.aggte_+3A_alp">alp</code></td>
<td>
<p>the significance level, default is 0.05</p>
</td></tr>
<tr><td><code id="compute.aggte_+3A_clustervars">clustervars</code></td>
<td>
<p>A vector of variables names to cluster on.  At most, there
can be two variables (otherwise will throw an error) and one of these
must be the same as idname which allows for clustering at the individual
level. By default, we cluster at individual level (when <code>bstrap=TRUE</code>).</p>
</td></tr>
<tr><td><code id="compute.aggte_+3A_call">call</code></td>
<td>
<p>The function call to aggte</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="#topic+AGGTEobj">AGGTEobj</a></code> object
</p>

<hr>
<h2 id='compute.att_gt'>Compute Group-Time Average Treatment Effects</h2><span id='topic+compute.att_gt'></span>

<h3>Description</h3>

<p><code>compute.att_gt</code> does the main work for computing
multiperiod group-time average treatment effects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute.att_gt(dp)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute.att_gt_+3A_dp">dp</code></td>
<td>
<p>A DIDparams object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with length equal to the number of groups times the
number of time periods; each element of the list contains an
object that contains group-time average treatment effect as well
as which group it is for and which time period it is for. It also exports
the influence function which is used externally to compute
standard errors.
</p>

<hr>
<h2 id='conditional_did_pretest'>Pre-Test of Conditional Parallel Trends Assumption</h2><span id='topic+conditional_did_pretest'></span>

<h3>Description</h3>

<p>An integrated moments test for the conditional parallel trends
assumption holding in all pre-treatment time periods for all groups
</p>


<h3>Usage</h3>

<pre><code class='language-R'>conditional_did_pretest(
  yname,
  tname,
  idname = NULL,
  gname,
  xformla = NULL,
  data,
  panel = TRUE,
  allow_unbalanced_panel = FALSE,
  control_group = c("nevertreated", "notyettreated"),
  weightsname = NULL,
  alp = 0.05,
  bstrap = TRUE,
  cband = TRUE,
  biters = 1000,
  clustervars = NULL,
  est_method = "ipw",
  print_details = FALSE,
  pl = FALSE,
  cores = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="conditional_did_pretest_+3A_yname">yname</code></td>
<td>
<p>The name of the outcome variable</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_tname">tname</code></td>
<td>
<p>The name of the column containing the time periods</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_idname">idname</code></td>
<td>
<p>The individual (cross-sectional unit) id name</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_gname">gname</code></td>
<td>
<p>The name of the variable in <code>data</code> that
contains the first period when a particular observation is treated.
This should be a positive number for all observations in treated groups.
It defines which &quot;group&quot; a unit belongs to.  It should be 0 for units
in the untreated group.</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_xformla">xformla</code></td>
<td>
<p>A formula for the covariates to include in the
model.  It should be of the form <code>~ X1 + X2</code>.  Default
is NULL which is equivalent to <code>xformla=~1</code>.  This is
used to create a matrix of covariates which is then passed
to the 2x2 DID estimator chosen in <code>est_method</code>.</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_data">data</code></td>
<td>
<p>The name of the data.frame that contains the data</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_panel">panel</code></td>
<td>
<p>Whether or not the data is a panel dataset.
The panel dataset should be provided in long format &ndash; that
is, where each row corresponds to a unit observed at a
particular point in time.  The default is TRUE.  When
is using a panel dataset, the variable <code>idname</code> must
be set.  When <code>panel=FALSE</code>, the data is treated
as repeated cross sections.</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_allow_unbalanced_panel">allow_unbalanced_panel</code></td>
<td>
<p>Whether or not function should
&quot;balance&quot; the panel with respect to time and id.  The default
values if <code>FALSE</code> which means that <code><a href="#topic+att_gt">att_gt()</a></code> will drop
all units where data is not observed in all periods.
The advantage of this is that the computations are faster
(sometimes substantially).</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_control_group">control_group</code></td>
<td>
<p>Which units to use the control group.
The default is &quot;nevertreated&quot; which sets the control group
to be the group of units that never participate in the
treatment.  This group does not change across groups or
time periods.  The other option is to set
<code>group="notyettreated"</code>.  In this case, the control group
is set to the group of units that have not yet participated
in the treatment in that time period.  This includes all
never treated units, but it includes additional units that
eventually participate in the treatment, but have not
participated yet.</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_weightsname">weightsname</code></td>
<td>
<p>The name of the column containing the sampling weights.
If not set, all observations have same weight.</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_alp">alp</code></td>
<td>
<p>the significance level, default is 0.05</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_bstrap">bstrap</code></td>
<td>
<p>Boolean for whether or not to compute standard errors using
the multiplier bootstrap.  If standard errors are clustered, then one
must set <code>bstrap=TRUE</code>. Default is <code>TRUE</code> (in addition, cband
is also by default <code>TRUE</code> indicating that uniform confidence bands
will be returned.  If bstrap is <code>FALSE</code>, then analytical
standard errors are reported.</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_cband">cband</code></td>
<td>
<p>Boolean for whether or not to compute a uniform confidence
band that covers all of the group-time average treatment effects
with fixed probability <code>1-alp</code>.  In order to compute uniform confidence
bands, <code>bstrap</code> must also be set to <code>TRUE</code>.  The default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_biters">biters</code></td>
<td>
<p>The number of bootstrap iterations to use.  The default is 1000,
and this is only applicable if <code>bstrap=TRUE</code>.</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_clustervars">clustervars</code></td>
<td>
<p>A vector of variables names to cluster on.  At most, there
can be two variables (otherwise will throw an error) and one of these
must be the same as idname which allows for clustering at the individual
level. By default, we cluster at individual level (when <code>bstrap=TRUE</code>).</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_est_method">est_method</code></td>
<td>
<p>the method to compute group-time average treatment effects.  The default is &quot;dr&quot; which uses the doubly robust
approach in the <code>DRDID</code> package.  Other built-in methods
include &quot;ipw&quot; for inverse probability weighting and &quot;reg&quot; for
first step regression estimators.  The user can also pass their
own function for estimating group time average treatment
effects.  This should be a function
<code>f(Y1,Y0,treat,covariates)</code> where <code>Y1</code> is an
<code>n</code> x <code>1</code> vector of outcomes in the post-treatment
outcomes, <code>Y0</code> is an <code>n</code> x <code>1</code> vector of
pre-treatment outcomes, <code>treat</code> is a vector indicating
whether or not an individual participates in the treatment,
and <code>covariates</code> is an <code>n</code> x <code>k</code> matrix of
covariates.  The function should return a list that includes
<code>ATT</code> (an estimated average treatment effect), and
<code>inf.func</code> (an <code>n</code> x <code>1</code> influence function).
The function can return other things as well, but these are
the only two that are required. <code>est_method</code> is only used
if covariates are included.</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_print_details">print_details</code></td>
<td>
<p>Whether or not to show details/progress of computations.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_pl">pl</code></td>
<td>
<p>Whether or not to use parallel processing</p>
</td></tr>
<tr><td><code id="conditional_did_pretest_+3A_cores">cores</code></td>
<td>
<p>The number of cores to use for parallel processing</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an <code><a href="#topic+MP.TEST">MP.TEST</a></code> object
</p>


<h3>References</h3>

<p>Callaway, Brantly and Sant'Anna, Pedro H. C.  &quot;Difference-in-Differences with Multiple Time Periods and an Application on the Minimum Wage and Employment.&quot; Working Paper <a href="https://arxiv.org/abs/1803.09015v2">https://arxiv.org/abs/1803.09015v2</a> (2018).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data(mpdta)
pre.test &lt;- conditional_did_pretest(yname="lemp",
                                    tname="year",
                                    idname="countyreal",
                                    gname="first.treat",
                                    xformla=~lpop,
                                    data=mpdta)
summary(pre.test)

## End(Not run)

</code></pre>

<hr>
<h2 id='did'>Difference in Differences</h2><span id='topic+did'></span>

<h3>Description</h3>

<p>Difference in Differences with multiple periods and variation in
treatment timing
</p>

<hr>
<h2 id='DIDparams'>DIDparams</h2><span id='topic+DIDparams'></span>

<h3>Description</h3>

<p>Object to hold did parameters that are passed across functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DIDparams(
  yname,
  tname,
  idname = NULL,
  gname,
  xformla = NULL,
  data,
  control_group,
  anticipation = 0,
  weightsname = NULL,
  alp = 0.05,
  bstrap = TRUE,
  biters = 1000,
  clustervars = NULL,
  cband = TRUE,
  print_details = TRUE,
  pl = FALSE,
  cores = 1,
  est_method = "dr",
  base_period = "varying",
  panel = TRUE,
  true_repeated_cross_sections,
  n = NULL,
  nG = NULL,
  nT = NULL,
  tlist = NULL,
  glist = NULL,
  call = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="DIDparams_+3A_yname">yname</code></td>
<td>
<p>The name of the outcome variable</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_tname">tname</code></td>
<td>
<p>The name of the column containing the time periods</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_idname">idname</code></td>
<td>
<p>The individual (cross-sectional unit) id name</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_gname">gname</code></td>
<td>
<p>The name of the variable in <code>data</code> that
contains the first period when a particular observation is treated.
This should be a positive number for all observations in treated groups.
It defines which &quot;group&quot; a unit belongs to.  It should be 0 for units
in the untreated group.</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_xformla">xformla</code></td>
<td>
<p>A formula for the covariates to include in the
model.  It should be of the form <code>~ X1 + X2</code>.  Default
is NULL which is equivalent to <code>xformla=~1</code>.  This is
used to create a matrix of covariates which is then passed
to the 2x2 DID estimator chosen in <code>est_method</code>.</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_data">data</code></td>
<td>
<p>The name of the data.frame that contains the data</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_control_group">control_group</code></td>
<td>
<p>Which units to use the control group.
The default is &quot;nevertreated&quot; which sets the control group
to be the group of units that never participate in the
treatment.  This group does not change across groups or
time periods.  The other option is to set
<code>group="notyettreated"</code>.  In this case, the control group
is set to the group of units that have not yet participated
in the treatment in that time period.  This includes all
never treated units, but it includes additional units that
eventually participate in the treatment, but have not
participated yet.</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_anticipation">anticipation</code></td>
<td>
<p>The number of time periods before participating
in the treatment where units can anticipate participating in the
treatment and therefore it can affect their untreated potential outcomes</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_weightsname">weightsname</code></td>
<td>
<p>The name of the column containing the sampling weights.
If not set, all observations have same weight.</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_alp">alp</code></td>
<td>
<p>the significance level, default is 0.05</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_bstrap">bstrap</code></td>
<td>
<p>Boolean for whether or not to compute standard errors using
the multiplier bootstrap.  If standard errors are clustered, then one
must set <code>bstrap=TRUE</code>. Default is <code>TRUE</code> (in addition, cband
is also by default <code>TRUE</code> indicating that uniform confidence bands
will be returned.  If bstrap is <code>FALSE</code>, then analytical
standard errors are reported.</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_biters">biters</code></td>
<td>
<p>The number of bootstrap iterations to use.  The default is 1000,
and this is only applicable if <code>bstrap=TRUE</code>.</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_clustervars">clustervars</code></td>
<td>
<p>A vector of variables names to cluster on.  At most, there
can be two variables (otherwise will throw an error) and one of these
must be the same as idname which allows for clustering at the individual
level. By default, we cluster at individual level (when <code>bstrap=TRUE</code>).</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_cband">cband</code></td>
<td>
<p>Boolean for whether or not to compute a uniform confidence
band that covers all of the group-time average treatment effects
with fixed probability <code>1-alp</code>.  In order to compute uniform confidence
bands, <code>bstrap</code> must also be set to <code>TRUE</code>.  The default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_print_details">print_details</code></td>
<td>
<p>Whether or not to show details/progress of computations.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_pl">pl</code></td>
<td>
<p>Whether or not to use parallel processing</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_cores">cores</code></td>
<td>
<p>The number of cores to use for parallel processing</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_est_method">est_method</code></td>
<td>
<p>the method to compute group-time average treatment effects.  The default is &quot;dr&quot; which uses the doubly robust
approach in the <code>DRDID</code> package.  Other built-in methods
include &quot;ipw&quot; for inverse probability weighting and &quot;reg&quot; for
first step regression estimators.  The user can also pass their
own function for estimating group time average treatment
effects.  This should be a function
<code>f(Y1,Y0,treat,covariates)</code> where <code>Y1</code> is an
<code>n</code> x <code>1</code> vector of outcomes in the post-treatment
outcomes, <code>Y0</code> is an <code>n</code> x <code>1</code> vector of
pre-treatment outcomes, <code>treat</code> is a vector indicating
whether or not an individual participates in the treatment,
and <code>covariates</code> is an <code>n</code> x <code>k</code> matrix of
covariates.  The function should return a list that includes
<code>ATT</code> (an estimated average treatment effect), and
<code>inf.func</code> (an <code>n</code> x <code>1</code> influence function).
The function can return other things as well, but these are
the only two that are required. <code>est_method</code> is only used
if covariates are included.</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_base_period">base_period</code></td>
<td>
<p>Whether to use a &quot;varying&quot; base period or a
&quot;universal&quot; base period.  Either choice results in the same
post-treatment estimates of ATT(g,t)'s.  In pre-treatment
periods, using a varying base period amounts to computing a
pseudo-ATT in each treatment period by comparing the change
in outcomes for a particular group relative to its comparison
group in the pre-treatment periods (i.e., in pre-treatment
periods this setting computes changes from period t-1 to period
t, but repeatedly changes the value of t)
</p>
<p>A universal base period fixes the base period to always be
(g-anticipation-1).  This does not compute
pseudo-ATT(g,t)'s in pre-treatment periods, but rather
reports average changes in outcomes from period t to
(g-anticipation-1) for a particular group relative to its comparison
group.  This is analogous to what is often reported in event
study regressions.
</p>
<p>Using a varying base period results in an estimate of
ATT(g,t) being reported in the period immediately before
treatment.  Using a universal base period normalizes the
estimate in the period right before treatment (or earlier when
the user allows for anticipation) to be equal to 0, but one
extra estimate in an earlier period.</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_panel">panel</code></td>
<td>
<p>Whether or not the data is a panel dataset.
The panel dataset should be provided in long format &ndash; that
is, where each row corresponds to a unit observed at a
particular point in time.  The default is TRUE.  When
is using a panel dataset, the variable <code>idname</code> must
be set.  When <code>panel=FALSE</code>, the data is treated
as repeated cross sections.</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_true_repeated_cross_sections">true_repeated_cross_sections</code></td>
<td>
<p>Whether or not the data really
is repeated cross sections.  (We include this because unbalanced
panel code runs through the repeated cross sections code)</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_n">n</code></td>
<td>
<p>The number of observations.  This is equal to the
number of units (which may be different from the number
of rows in a panel dataset).</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_ng">nG</code></td>
<td>
<p>The number of groups</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_nt">nT</code></td>
<td>
<p>The number of time periods</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_tlist">tlist</code></td>
<td>
<p>a vector containing each time period</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_glist">glist</code></td>
<td>
<p>a vector containing each group</p>
</td></tr>
<tr><td><code id="DIDparams_+3A_call">call</code></td>
<td>
<p>Function call to att_gt</p>
</td></tr>
</table>

<hr>
<h2 id='get_agg_inf_func'>Get an influence function for particular aggregate parameters</h2><span id='topic+get_agg_inf_func'></span>

<h3>Description</h3>

<p>Get an influence function for particular aggregate parameters
</p>
<p>This is a generic internal function for combining influence
functions across ATT(g,t)'s to return an influence function for
various aggregated treatment effect parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_agg_inf_func(att, inffunc1, whichones, weights.agg, wif = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_agg_inf_func_+3A_att">att</code></td>
<td>
<p>vector of group-time average treatment effects</p>
</td></tr>
<tr><td><code id="get_agg_inf_func_+3A_inffunc1">inffunc1</code></td>
<td>
<p>influence function for all group-time average treatment effects
(matrix)</p>
</td></tr>
<tr><td><code id="get_agg_inf_func_+3A_whichones">whichones</code></td>
<td>
<p>which elements of att will be used to compute the aggregated
treatment effect parameter</p>
</td></tr>
<tr><td><code id="get_agg_inf_func_+3A_weights.agg">weights.agg</code></td>
<td>
<p>the weights to apply to each element of att(whichones);
should have the same dimension as att(whichones)</p>
</td></tr>
<tr><td><code id="get_agg_inf_func_+3A_wif">wif</code></td>
<td>
<p>extra influence function term coming from estimating the weights;
should be n x k matrix where k is dimension of whichones</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nx1 influence function
</p>

<hr>
<h2 id='getSE'>Take influence function and return standard errors</h2><span id='topic+getSE'></span>

<h3>Description</h3>

<p>Function to take an nx1 influence function and return
a standard error
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getSE(thisinffunc, DIDparams = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getSE_+3A_thisinffunc">thisinffunc</code></td>
<td>
<p>An influence function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>scalar standard error
</p>

<hr>
<h2 id='ggdid'>Plot <code>did</code> objects using <code>ggplot2</code></h2><span id='topic+ggdid'></span>

<h3>Description</h3>

<p>Function to plot objects from the <code>did</code> package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggdid(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ggdid_+3A_object">object</code></td>
<td>
<p>either a <code>MP</code> object or <code>AGGTEobj</code> object. See <code>help(ggdid.MP)</code> and <code>help(ggdid.AGGTEobj)</code>.</p>
</td></tr>
<tr><td><code id="ggdid_+3A_...">...</code></td>
<td>
<p>other arguments</p>
</td></tr>
</table>

<hr>
<h2 id='ggdid.AGGTEobj'>Plot <code>AGGTEobj</code> objects</h2><span id='topic+ggdid.AGGTEobj'></span>

<h3>Description</h3>

<p>A function to plot <code>AGGTEobj</code> objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'AGGTEobj'
ggdid(
  object,
  ylim = NULL,
  xlab = NULL,
  ylab = NULL,
  title = "",
  xgap = 1,
  legend = TRUE,
  ref_line = 0,
  theming = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ggdid.AGGTEobj_+3A_object">object</code></td>
<td>
<p>either a <code>MP</code> object or <code>AGGTEobj</code> object. See <code>help(ggdid.MP)</code> and <code>help(ggdid.AGGTEobj)</code>.</p>
</td></tr>
<tr><td><code id="ggdid.AGGTEobj_+3A_ylim">ylim</code></td>
<td>
<p>optional y limits for the plot; setting here makes the y limits
the same across different plots</p>
</td></tr>
<tr><td><code id="ggdid.AGGTEobj_+3A_xlab">xlab</code></td>
<td>
<p>optional x-axis label</p>
</td></tr>
<tr><td><code id="ggdid.AGGTEobj_+3A_ylab">ylab</code></td>
<td>
<p>optional y-axis label</p>
</td></tr>
<tr><td><code id="ggdid.AGGTEobj_+3A_title">title</code></td>
<td>
<p>optional plot title</p>
</td></tr>
<tr><td><code id="ggdid.AGGTEobj_+3A_xgap">xgap</code></td>
<td>
<p>optional gap between the labels on the x-axis.  For example,
<code>xgap=3</code> indicates that the labels should show up for every third
value on the x-axis.  The default is 1.</p>
</td></tr>
<tr><td><code id="ggdid.AGGTEobj_+3A_legend">legend</code></td>
<td>
<p>Whether or not to include a legend (which will indicate color
of pre- and post-treatment estimates).  Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="ggdid.AGGTEobj_+3A_ref_line">ref_line</code></td>
<td>
<p>A reference line at this value, usually to compare confidence
intervals to 0. Set to NULL to omit.</p>
</td></tr>
<tr><td><code id="ggdid.AGGTEobj_+3A_theming">theming</code></td>
<td>
<p>Set to FALSE to skip all theming so you can do it yourself.</p>
</td></tr>
<tr><td><code id="ggdid.AGGTEobj_+3A_...">...</code></td>
<td>
<p>other arguments</p>
</td></tr>
</table>

<hr>
<h2 id='ggdid.MP'>Plot <code>MP</code> objects using <code>ggplot2</code></h2><span id='topic+ggdid.MP'></span>

<h3>Description</h3>

<p>A function to plot <code>MP</code> objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'MP'
ggdid(
  object,
  ylim = NULL,
  xlab = NULL,
  ylab = NULL,
  title = "Group",
  xgap = 1,
  ncol = 1,
  legend = TRUE,
  group = NULL,
  ref_line = 0,
  theming = TRUE,
  grtitle = "Group",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ggdid.MP_+3A_object">object</code></td>
<td>
<p>either a <code>MP</code> object or <code>AGGTEobj</code> object. See <code>help(ggdid.MP)</code> and <code>help(ggdid.AGGTEobj)</code>.</p>
</td></tr>
<tr><td><code id="ggdid.MP_+3A_ylim">ylim</code></td>
<td>
<p>optional y limits for the plot; setting here makes the y limits
the same across different plots</p>
</td></tr>
<tr><td><code id="ggdid.MP_+3A_xlab">xlab</code></td>
<td>
<p>optional x-axis label</p>
</td></tr>
<tr><td><code id="ggdid.MP_+3A_ylab">ylab</code></td>
<td>
<p>optional y-axis label</p>
</td></tr>
<tr><td><code id="ggdid.MP_+3A_title">title</code></td>
<td>
<p>optional plot title</p>
</td></tr>
<tr><td><code id="ggdid.MP_+3A_xgap">xgap</code></td>
<td>
<p>optional gap between the labels on the x-axis.  For example,
<code>xgap=3</code> indicates that the labels should show up for every third
value on the x-axis.  The default is 1.</p>
</td></tr>
<tr><td><code id="ggdid.MP_+3A_ncol">ncol</code></td>
<td>
<p>The number of columns to include in the resulting plot.  The
default is 1.</p>
</td></tr>
<tr><td><code id="ggdid.MP_+3A_legend">legend</code></td>
<td>
<p>Whether or not to include a legend (which will indicate color
of pre- and post-treatment estimates).  Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="ggdid.MP_+3A_group">group</code></td>
<td>
<p>Vector for which groups to include in the plots of ATT(g,t).
Default is NULL, and, in this case, plots for all groups will be included (<code>ggdid.MP</code> only).</p>
</td></tr>
<tr><td><code id="ggdid.MP_+3A_ref_line">ref_line</code></td>
<td>
<p>A reference line at this value, usually to compare confidence
intervals to 0. Set to NULL to omit.</p>
</td></tr>
<tr><td><code id="ggdid.MP_+3A_theming">theming</code></td>
<td>
<p>Set to FALSE to skip all theming so you can do it yourself.</p>
</td></tr>
<tr><td><code id="ggdid.MP_+3A_grtitle">grtitle</code></td>
<td>
<p>Title to append before each group name (<code>ggdid.MP</code> only).</p>
</td></tr>
<tr><td><code id="ggdid.MP_+3A_...">...</code></td>
<td>
<p>other arguments</p>
</td></tr>
</table>

<hr>
<h2 id='glance.AGGTEobj'>glance model characteristics from AGGTEobj objects</h2><span id='topic+glance.AGGTEobj'></span>

<h3>Description</h3>

<p>glance model characteristics from AGGTEobj objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'AGGTEobj'
glance(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="glance.AGGTEobj_+3A_x">x</code></td>
<td>
<p>a model of class AGGTEobj produced by the <code><a href="#topic+aggte">aggte()</a></code> function</p>
</td></tr>
<tr><td><code id="glance.AGGTEobj_+3A_...">...</code></td>
<td>
<p>other arguments passed to methods</p>
</td></tr>
</table>

<hr>
<h2 id='glance.MP'>glance model characteristics from MP objects</h2><span id='topic+glance.MP'></span>

<h3>Description</h3>

<p>glance model characteristics from MP objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'MP'
glance(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="glance.MP_+3A_x">x</code></td>
<td>
<p>a model of class MP produced by the <code><a href="#topic+att_gt">att_gt()</a></code> function</p>
</td></tr>
<tr><td><code id="glance.MP_+3A_...">...</code></td>
<td>
<p>other arguments passed to methods</p>
</td></tr>
</table>

<hr>
<h2 id='gplot'>gplot</h2><span id='topic+gplot'></span>

<h3>Description</h3>

<p>does the heavy lifting for making a plot of an group-time
average treatment effect
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gplot(
  ssresults,
  ylim = NULL,
  xlab = NULL,
  ylab = NULL,
  title = "Group",
  xgap = 1,
  legend = TRUE,
  ref_line = 0,
  theming = TRUE
)
</code></pre>


<h3>Value</h3>

<p>a <code>ggplot2</code> object
</p>

<hr>
<h2 id='indicator'>indicator</h2><span id='topic+indicator'></span>

<h3>Description</h3>

<p>indicator weighting function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>indicator(X, u)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="indicator_+3A_x">X</code></td>
<td>
<p>matrix of X's from the data</p>
</td></tr>
<tr><td><code id="indicator_+3A_u">u</code></td>
<td>
<p>a particular value to compare X's to</p>
</td></tr>
</table>


<h3>Value</h3>

<p>numeric vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(mpdta)
dta &lt;- subset(mpdta, year==2007)
X &lt;- model.matrix(~lpop, data=dta)
X &lt;- indicator(X, X[1,])

</code></pre>

<hr>
<h2 id='mboot'>Multiplier Bootstrap</h2><span id='topic+mboot'></span>

<h3>Description</h3>

<p>A function to take an influence function and use the
multiplier bootstrap to compute standard errors and critical values for
uniform confidence bands.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mboot(inf.func, DIDparams, pl = FALSE, cores = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mboot_+3A_inf.func">inf.func</code></td>
<td>
<p>an influence function</p>
</td></tr>
<tr><td><code id="mboot_+3A_didparams">DIDparams</code></td>
<td>
<p>DIDparams object</p>
</td></tr>
<tr><td><code id="mboot_+3A_pl">pl</code></td>
<td>
<p>whether or not to use parallel processing in the multiplier
bootstrap, default=FALSE</p>
</td></tr>
<tr><td><code id="mboot_+3A_cores">cores</code></td>
<td>
<p>the number of cores to use with parallel processing,
default=1</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list with elements
</p>
<table role = "presentation">
<tr><td><code>bres</code></td>
<td>
<p>results from each bootstrap iteration</p>
</td></tr>
<tr><td><code>V</code></td>
<td>
<p>variance matrix</p>
</td></tr>
<tr><td><code>se</code></td>
<td>
<p>standard errors</p>
</td></tr>
<tr><td><code>crit.val</code></td>
<td>
<p>a critical value for computing uniform confidence bands</p>
</td></tr>
</table>

<hr>
<h2 id='MP'>MP</h2><span id='topic+MP'></span>

<h3>Description</h3>

<p>Multi-period objects that hold results for group-time average treatment effects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MP(
  group,
  t,
  att,
  V_analytical,
  se,
  c,
  inffunc,
  n = NULL,
  W = NULL,
  Wpval = NULL,
  aggte = NULL,
  alp = 0.05,
  DIDparams = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="MP_+3A_group">group</code></td>
<td>
<p>which group (defined by period first treated) an group-time average treatment effect is for</p>
</td></tr>
<tr><td><code id="MP_+3A_t">t</code></td>
<td>
<p>which time period a group-time average treatment effect is for</p>
</td></tr>
<tr><td><code id="MP_+3A_att">att</code></td>
<td>
<p>the group-average treatment effect for group <code>group</code> and time
period <code>t</code></p>
</td></tr>
<tr><td><code id="MP_+3A_v_analytical">V_analytical</code></td>
<td>
<p>Analytical estimator for the asymptotic variance-covariance matrix for group-time average treatment effects</p>
</td></tr>
<tr><td><code id="MP_+3A_se">se</code></td>
<td>
<p>standard errors for group-time average treatment effects. If bootstrap is set to TRUE, this provides bootstrap-based se.</p>
</td></tr>
<tr><td><code id="MP_+3A_c">c</code></td>
<td>
<p>simultaneous critical value if one is obtaining simultaneous confidence
bands. Otherwise it reports the critical value based on pointwise normal
approximation.</p>
</td></tr>
<tr><td><code id="MP_+3A_inffunc">inffunc</code></td>
<td>
<p>the influence function for estimating group-time average treatment effects</p>
</td></tr>
<tr><td><code id="MP_+3A_n">n</code></td>
<td>
<p>the number of unique cross-sectional units (unique values of idname)</p>
</td></tr>
<tr><td><code id="MP_+3A_w">W</code></td>
<td>
<p>the Wald statistic for pre-testing the common trends assumption</p>
</td></tr>
<tr><td><code id="MP_+3A_wpval">Wpval</code></td>
<td>
<p>the p-value of the Wald statistic for pre-testing the
common trends assumption</p>
</td></tr>
<tr><td><code id="MP_+3A_aggte">aggte</code></td>
<td>
<p>an aggregate treatment effects object</p>
</td></tr>
<tr><td><code id="MP_+3A_alp">alp</code></td>
<td>
<p>the significance level, default is 0.05</p>
</td></tr>
<tr><td><code id="MP_+3A_didparams">DIDparams</code></td>
<td>
<p>a <code><a href="#topic+DIDparams">DIDparams</a></code> object.  A way to optionally return the parameters
of the call to <code><a href="#topic+att_gt">att_gt()</a></code> or <code><a href="#topic+conditional_did_pretest">conditional_did_pretest()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>MP object
</p>

<hr>
<h2 id='MP.TEST'>MP.TEST</h2><span id='topic+MP.TEST'></span>

<h3>Description</h3>

<p>An object that holds results from computing pre-test of the
conditional parallel trends assumption
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MP.TEST(
  CvM = NULL,
  CvMb = NULL,
  CvMcval = NULL,
  CvMpval = NULL,
  KS = NULL,
  KSb = NULL,
  KScval = NULL,
  KSpval = NULL,
  clustervars = NULL,
  xformla = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="MP.TEST_+3A_cvm">CvM</code></td>
<td>
<p>Cramer von Mises test statistic</p>
</td></tr>
<tr><td><code id="MP.TEST_+3A_cvmb">CvMb</code></td>
<td>
<p>a vector of bootstrapped Cramer von Mises test statistics</p>
</td></tr>
<tr><td><code id="MP.TEST_+3A_cvmcval">CvMcval</code></td>
<td>
<p>CvM critical value</p>
</td></tr>
<tr><td><code id="MP.TEST_+3A_cvmpval">CvMpval</code></td>
<td>
<p>p-value for CvM test</p>
</td></tr>
<tr><td><code id="MP.TEST_+3A_ks">KS</code></td>
<td>
<p>Kolmogorov-Smirnov test statistic</p>
</td></tr>
<tr><td><code id="MP.TEST_+3A_ksb">KSb</code></td>
<td>
<p>a vector of bootstrapped KS test statistics</p>
</td></tr>
<tr><td><code id="MP.TEST_+3A_kscval">KScval</code></td>
<td>
<p>KS critical value</p>
</td></tr>
<tr><td><code id="MP.TEST_+3A_kspval">KSpval</code></td>
<td>
<p>p-value for KS test</p>
</td></tr>
<tr><td><code id="MP.TEST_+3A_clustervars">clustervars</code></td>
<td>
<p>vector of which variables were clustered on for the test</p>
</td></tr>
<tr><td><code id="MP.TEST_+3A_xformla">xformla</code></td>
<td>
<p>formla for the X variables used in the test</p>
</td></tr>
</table>

<hr>
<h2 id='mpdta'>County Teen Employment Dataset</h2><span id='topic+mpdta'></span>

<h3>Description</h3>

<p>A dataset containing (the log of) teen employment in 500 counties
in the U.S. from 2004 to 2007.  This is a subset of the dataset used in Callaway and
Sant'Anna (2021).  See that paper for additional descriptions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mpdta
</code></pre>


<h3>Format</h3>

<p>A data frame with 2000 rows and 5 variables:
</p>

<dl>
<dt>year</dt><dd><p>the year of the observation</p>
</dd>
<dt>countyreal</dt><dd><p>a unique identifier for a particular county</p>
</dd>
<dt>lpop</dt><dd><p>the log of 1000s of population for the county</p>
</dd>
<dt>lemp</dt><dd><p>the log of teen employment in the county</p>
</dd>
<dt>first.treat</dt><dd><p>the year that the state where the county is located
raised its minimum wage, it is set equal to 0 for counties that have
minimum wages equal to the federal minimum wage over the entire
period.</p>
</dd>
<dt>treat</dt><dd><p>whether or not a particular county is treated in that year</p>
</dd>
</dl>



<h3>Source</h3>

<p>Callaway and Sant'Anna (2020)
</p>

<hr>
<h2 id='pre_process_did'>Process <code>did</code> Function Arguments</h2><span id='topic+pre_process_did'></span>

<h3>Description</h3>

<p>Function to process arguments passed to the main methods in the
<code>did</code> package as well as conducting some tests to make sure
data is in proper format / try to throw helpful error messages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pre_process_did(
  yname,
  tname,
  idname,
  gname,
  xformla = NULL,
  data,
  panel = TRUE,
  allow_unbalanced_panel,
  control_group = c("nevertreated", "notyettreated"),
  anticipation = 0,
  weightsname = NULL,
  alp = 0.05,
  bstrap = FALSE,
  cband = FALSE,
  biters = 1000,
  clustervars = NULL,
  est_method = "dr",
  base_period = "varying",
  print_details = TRUE,
  pl = FALSE,
  cores = 1,
  call = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pre_process_did_+3A_yname">yname</code></td>
<td>
<p>The name of the outcome variable</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_tname">tname</code></td>
<td>
<p>The name of the column containing the time periods</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_idname">idname</code></td>
<td>
<p>The individual (cross-sectional unit) id name</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_gname">gname</code></td>
<td>
<p>The name of the variable in <code>data</code> that
contains the first period when a particular observation is treated.
This should be a positive number for all observations in treated groups.
It defines which &quot;group&quot; a unit belongs to.  It should be 0 for units
in the untreated group.</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_xformla">xformla</code></td>
<td>
<p>A formula for the covariates to include in the
model.  It should be of the form <code>~ X1 + X2</code>.  Default
is NULL which is equivalent to <code>xformla=~1</code>.  This is
used to create a matrix of covariates which is then passed
to the 2x2 DID estimator chosen in <code>est_method</code>.</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_data">data</code></td>
<td>
<p>The name of the data.frame that contains the data</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_panel">panel</code></td>
<td>
<p>Whether or not the data is a panel dataset.
The panel dataset should be provided in long format &ndash; that
is, where each row corresponds to a unit observed at a
particular point in time.  The default is TRUE.  When
is using a panel dataset, the variable <code>idname</code> must
be set.  When <code>panel=FALSE</code>, the data is treated
as repeated cross sections.</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_allow_unbalanced_panel">allow_unbalanced_panel</code></td>
<td>
<p>Whether or not function should
&quot;balance&quot; the panel with respect to time and id.  The default
values if <code>FALSE</code> which means that <code><a href="#topic+att_gt">att_gt()</a></code> will drop
all units where data is not observed in all periods.
The advantage of this is that the computations are faster
(sometimes substantially).</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_control_group">control_group</code></td>
<td>
<p>Which units to use the control group.
The default is &quot;nevertreated&quot; which sets the control group
to be the group of units that never participate in the
treatment.  This group does not change across groups or
time periods.  The other option is to set
<code>group="notyettreated"</code>.  In this case, the control group
is set to the group of units that have not yet participated
in the treatment in that time period.  This includes all
never treated units, but it includes additional units that
eventually participate in the treatment, but have not
participated yet.</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_anticipation">anticipation</code></td>
<td>
<p>The number of time periods before participating
in the treatment where units can anticipate participating in the
treatment and therefore it can affect their untreated potential outcomes</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_weightsname">weightsname</code></td>
<td>
<p>The name of the column containing the sampling weights.
If not set, all observations have same weight.</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_alp">alp</code></td>
<td>
<p>the significance level, default is 0.05</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_bstrap">bstrap</code></td>
<td>
<p>Boolean for whether or not to compute standard errors using
the multiplier bootstrap.  If standard errors are clustered, then one
must set <code>bstrap=TRUE</code>. Default is <code>TRUE</code> (in addition, cband
is also by default <code>TRUE</code> indicating that uniform confidence bands
will be returned.  If bstrap is <code>FALSE</code>, then analytical
standard errors are reported.</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_cband">cband</code></td>
<td>
<p>Boolean for whether or not to compute a uniform confidence
band that covers all of the group-time average treatment effects
with fixed probability <code>1-alp</code>.  In order to compute uniform confidence
bands, <code>bstrap</code> must also be set to <code>TRUE</code>.  The default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_biters">biters</code></td>
<td>
<p>The number of bootstrap iterations to use.  The default is 1000,
and this is only applicable if <code>bstrap=TRUE</code>.</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_clustervars">clustervars</code></td>
<td>
<p>A vector of variables names to cluster on.  At most, there
can be two variables (otherwise will throw an error) and one of these
must be the same as idname which allows for clustering at the individual
level. By default, we cluster at individual level (when <code>bstrap=TRUE</code>).</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_est_method">est_method</code></td>
<td>
<p>the method to compute group-time average treatment effects.  The default is &quot;dr&quot; which uses the doubly robust
approach in the <code>DRDID</code> package.  Other built-in methods
include &quot;ipw&quot; for inverse probability weighting and &quot;reg&quot; for
first step regression estimators.  The user can also pass their
own function for estimating group time average treatment
effects.  This should be a function
<code>f(Y1,Y0,treat,covariates)</code> where <code>Y1</code> is an
<code>n</code> x <code>1</code> vector of outcomes in the post-treatment
outcomes, <code>Y0</code> is an <code>n</code> x <code>1</code> vector of
pre-treatment outcomes, <code>treat</code> is a vector indicating
whether or not an individual participates in the treatment,
and <code>covariates</code> is an <code>n</code> x <code>k</code> matrix of
covariates.  The function should return a list that includes
<code>ATT</code> (an estimated average treatment effect), and
<code>inf.func</code> (an <code>n</code> x <code>1</code> influence function).
The function can return other things as well, but these are
the only two that are required. <code>est_method</code> is only used
if covariates are included.</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_base_period">base_period</code></td>
<td>
<p>Whether to use a &quot;varying&quot; base period or a
&quot;universal&quot; base period.  Either choice results in the same
post-treatment estimates of ATT(g,t)'s.  In pre-treatment
periods, using a varying base period amounts to computing a
pseudo-ATT in each treatment period by comparing the change
in outcomes for a particular group relative to its comparison
group in the pre-treatment periods (i.e., in pre-treatment
periods this setting computes changes from period t-1 to period
t, but repeatedly changes the value of t)
</p>
<p>A universal base period fixes the base period to always be
(g-anticipation-1).  This does not compute
pseudo-ATT(g,t)'s in pre-treatment periods, but rather
reports average changes in outcomes from period t to
(g-anticipation-1) for a particular group relative to its comparison
group.  This is analogous to what is often reported in event
study regressions.
</p>
<p>Using a varying base period results in an estimate of
ATT(g,t) being reported in the period immediately before
treatment.  Using a universal base period normalizes the
estimate in the period right before treatment (or earlier when
the user allows for anticipation) to be equal to 0, but one
extra estimate in an earlier period.</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_print_details">print_details</code></td>
<td>
<p>Whether or not to show details/progress of computations.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_pl">pl</code></td>
<td>
<p>Whether or not to use parallel processing</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_cores">cores</code></td>
<td>
<p>The number of cores to use for parallel processing</p>
</td></tr>
<tr><td><code id="pre_process_did_+3A_call">call</code></td>
<td>
<p>Function call to att_gt</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="#topic+DIDparams">DIDparams</a></code> object
</p>

<hr>
<h2 id='print.AGGTEobj'>print.AGGTEobj</h2><span id='topic+print.AGGTEobj'></span>

<h3>Description</h3>

<p>prints value of a <code>AGGTEobj</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'AGGTEobj'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.AGGTEobj_+3A_x">x</code></td>
<td>
<p>a <code>AGGTEobj</code> object</p>
</td></tr>
<tr><td><code id="print.AGGTEobj_+3A_...">...</code></td>
<td>
<p>extra arguments</p>
</td></tr>
</table>

<hr>
<h2 id='print.MP'>print.MP</h2><span id='topic+print.MP'></span>

<h3>Description</h3>

<p>prints value of a <code>MP</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'MP'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.MP_+3A_x">x</code></td>
<td>
<p>a <code>MP</code> object</p>
</td></tr>
<tr><td><code id="print.MP_+3A_...">...</code></td>
<td>
<p>extra arguments</p>
</td></tr>
</table>

<hr>
<h2 id='process_attgt'>Process Results from <code><a href="#topic+compute.att_gt">compute.att_gt()</a></code></h2><span id='topic+process_attgt'></span>

<h3>Description</h3>

<p>Process Results from <code><a href="#topic+compute.att_gt">compute.att_gt()</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>process_attgt(attgt.list)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="process_attgt_+3A_attgt.list">attgt.list</code></td>
<td>
<p>list of results from <code><a href="#topic+compute.att_gt">compute.att_gt()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>list with elements:
</p>
<table role = "presentation">
<tr><td><code>group</code></td>
<td>
<p>which group a set of results belongs to</p>
</td></tr>
<tr><td><code>tt</code></td>
<td>
<p>which time period a set of results belongs to</p>
</td></tr>
<tr><td><code>att</code></td>
<td>
<p>the group time average treatment effect</p>
</td></tr>
</table>

<hr>
<h2 id='reexports'>tidy results</h2><span id='topic+reexports'></span><span id='topic+tidy'></span><span id='topic+glance'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>generics</dt><dd><p><code><a href="generics.html#topic+glance">glance</a></code>, <code><a href="generics.html#topic+tidy">tidy</a></code></p>
</dd>
</dl>

<hr>
<h2 id='reset.sim'>reset.sim</h2><span id='topic+reset.sim'></span>

<h3>Description</h3>

<p>a function to create a &quot;reasonable&quot; set of parameters
to create simulated panel data that obeys a parallel trends assumption.
In particular, it provides parameters where the the effect of participating
in the treatment is equal to one in all post-treatment time periods.
</p>
<p>After calling this function, the user can change particular values of the
parameters in order to generate dynamics, heterogeneous effects across
groups, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reset.sim(time.periods = 4, n = 5000, ipw = TRUE, reg = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="reset.sim_+3A_time.periods">time.periods</code></td>
<td>
<p>The number of time periods to include</p>
</td></tr>
<tr><td><code id="reset.sim_+3A_n">n</code></td>
<td>
<p>The total number of observations</p>
</td></tr>
<tr><td><code id="reset.sim_+3A_ipw">ipw</code></td>
<td>
<p>If TRUE, sets parameters so that DGP is
compatible with recovering ATT(g,t)'s using IPW (i.e.,
where logit that just includes a linear term in X works).  If
FALSE, sets parameters that will be incompatible with IPW.
Either way, these parameters can be specified by the user
if so desired.</p>
</td></tr>
<tr><td><code id="reset.sim_+3A_reg">reg</code></td>
<td>
<p>If TRUE, sets parameters so that DGP is compatible
with recovering ATT(g,t)'s using regressions on untreated
untreated potential outcomes.  If FALSE, sets parameters that
will be incompatible with using regressions (i.e., regressions
that include only linear term in X).  Either way, these
parameters can be specified by the user if so desired.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of simulation parameters
</p>

<hr>
<h2 id='sim'>sim</h2><span id='topic+sim'></span>

<h3>Description</h3>

<p>An internal function that builds simulated data, computes
ATT(g,t)'s and some aggregations.  It is useful for testing the inference
procedures in the <code>did</code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim(
  sp_list,
  ret = NULL,
  bstrap = TRUE,
  cband = TRUE,
  control_group = "nevertreated",
  xformla = ~X,
  est_method = "dr",
  clustervars = NULL,
  panel = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sim_+3A_sp_list">sp_list</code></td>
<td>
<p>A list of simulation parameters.  See <code>reset.sim</code> to generate
some default values for parameters</p>
</td></tr>
<tr><td><code id="sim_+3A_ret">ret</code></td>
<td>
<p>which type of results to return.  The options are <code>Wpval</code> (returns
1 if the p-value from a Wald test that all pre-treatment ATT(g,t)'s are equal
is less than .05),
<code>cband</code>  (returns 1 if a uniform confidence band covers 0 for groups and times),
<code>simple</code> (returns 1 if, using the simple treatment effect aggregation results
in rejecting that this aggregated treatment effect parameter is equal to 0),
<code>dynamic</code> (returns 1 if the uniform confidence band from the dynamic treatment
effect aggregation covers 0 in all pre- and post-treatment periods).  The default
value is NULL, and in this case the function will just return the results from
the call to <code>att_gt</code>.</p>
</td></tr>
<tr><td><code id="sim_+3A_bstrap">bstrap</code></td>
<td>
<p>whether or not to use the bootstrap to conduct inference (default is TRUE)</p>
</td></tr>
<tr><td><code id="sim_+3A_cband">cband</code></td>
<td>
<p>whether or not to compute uniform confidence bands in the call to <code>att_gt</code>
(the default is TRUE)</p>
</td></tr>
<tr><td><code id="sim_+3A_control_group">control_group</code></td>
<td>
<p>Whether to use the &quot;nevertreated&quot; comparison group (the default)
or the &quot;notyettreated&quot; as the comparison group</p>
</td></tr>
<tr><td><code id="sim_+3A_xformla">xformla</code></td>
<td>
<p>Formula for covariates in <code>att_gt</code> (default is <code>~X</code>)</p>
</td></tr>
<tr><td><code id="sim_+3A_est_method">est_method</code></td>
<td>
<p>Which estimation method to use in <code>att_gt</code> (default is &quot;dr&quot;)</p>
</td></tr>
<tr><td><code id="sim_+3A_clustervars">clustervars</code></td>
<td>
<p>Any additional variables which should be clustered on</p>
</td></tr>
<tr><td><code id="sim_+3A_panel">panel</code></td>
<td>
<p>whether to simulate panel data (the default) or otherwise repeated
cross sections data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>When <code>ret=NULL</code>, returns the results of the call to <code>att_gt</code>, otherwise returns
1 if the specified test rejects or 0 if not.
</p>

<hr>
<h2 id='splot'>splot</h2><span id='topic+splot'></span>

<h3>Description</h3>

<p>alternative plotting function for the case with selective treatment
timing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>splot(
  ssresults,
  ylim = NULL,
  xlab = NULL,
  ylab = NULL,
  title = "Group",
  legend = TRUE,
  ref_line = 0,
  theming = TRUE
)
</code></pre>


<h3>Value</h3>

<p>a <code>ggplot2</code> object
</p>

<hr>
<h2 id='summary.AGGTEobj'>Summary Aggregate Treatment Effect Parameter Objects</h2><span id='topic+summary.AGGTEobj'></span>

<h3>Description</h3>

<p>A function to summarize aggregated treatment effect parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'AGGTEobj'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.AGGTEobj_+3A_object">object</code></td>
<td>
<p>an <code>AGGTEobj</code> object</p>
</td></tr>
<tr><td><code id="summary.AGGTEobj_+3A_...">...</code></td>
<td>
<p>other arguments</p>
</td></tr>
</table>

<hr>
<h2 id='summary.MP'>summary.MP</h2><span id='topic+summary.MP'></span>

<h3>Description</h3>

<p>prints a summary of a <code>MP</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'MP'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.MP_+3A_object">object</code></td>
<td>
<p>an <code>MP</code> object</p>
</td></tr>
<tr><td><code id="summary.MP_+3A_...">...</code></td>
<td>
<p>extra arguments</p>
</td></tr>
</table>

<hr>
<h2 id='summary.MP.TEST'>summary.MP.TEST</h2><span id='topic+summary.MP.TEST'></span>

<h3>Description</h3>

<p>print a summary of test results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'MP.TEST'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.MP.TEST_+3A_object">object</code></td>
<td>
<p>an MP.TEST object</p>
</td></tr>
<tr><td><code id="summary.MP.TEST_+3A_...">...</code></td>
<td>
<p>other variables</p>
</td></tr>
</table>

<hr>
<h2 id='test.mboot'>Multiplier Bootstrap for Conditional Moment Test</h2><span id='topic+test.mboot'></span>

<h3>Description</h3>

<p>A slightly modified multiplier bootstrap procedure
for the pre-test of the conditional parallel trends assumption
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test.mboot(inf.func, DIDparams, cores = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="test.mboot_+3A_inf.func">inf.func</code></td>
<td>
<p>an influence function</p>
</td></tr>
<tr><td><code id="test.mboot_+3A_didparams">DIDparams</code></td>
<td>
<p>DIDparams object</p>
</td></tr>
<tr><td><code id="test.mboot_+3A_cores">cores</code></td>
<td>
<p>The number of cores to use to bootstrap the test
statistic in parallel.  Default is <code>cores=1</code> which
corresponds to not running parallel.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list
</p>
<table role = "presentation">
<tr><td><code>bres</code></td>
<td>
<p>CvM test statistics for each bootstrap iteration</p>
</td></tr>
<tr><td><code>crit.val</code></td>
<td>
<p>critical value for CvM test statistic</p>
</td></tr>
</table>

<hr>
<h2 id='tidy.AGGTEobj'>tidy results from AGGTEobj objects</h2><span id='topic+tidy.AGGTEobj'></span>

<h3>Description</h3>

<p>tidy results from AGGTEobj objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'AGGTEobj'
tidy(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidy.AGGTEobj_+3A_x">x</code></td>
<td>
<p>a model of class AGGTEobj produced by the <code><a href="#topic+aggte">aggte()</a></code> function</p>
</td></tr>
<tr><td><code id="tidy.AGGTEobj_+3A_...">...</code></td>
<td>
<p>Additional arguments to tidying method.</p>
</td></tr>
</table>

<hr>
<h2 id='tidy.MP'>tidy results from MP objects</h2><span id='topic+tidy.MP'></span>

<h3>Description</h3>

<p>tidy results from MP objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'MP'
tidy(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidy.MP_+3A_x">x</code></td>
<td>
<p>a model of class MP produced by the <code><a href="#topic+att_gt">att_gt()</a></code> function</p>
</td></tr>
<tr><td><code id="tidy.MP_+3A_...">...</code></td>
<td>
<p>Additional arguments to tidying method.</p>
</td></tr>
</table>

<hr>
<h2 id='trimmer'>trimmer</h2><span id='topic+trimmer'></span>

<h3>Description</h3>

<p>A utility function to find observations that appear
to violate support conditions.  This function is not called
anywhere in the code, but it is just useful for debugging some
common issues that users run into.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trimmer(
  g,
  tname,
  idname,
  gname,
  xformla,
  data,
  control_group = "notyettreated",
  threshold = 0.999
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trimmer_+3A_g">g</code></td>
<td>
<p>is a particular group (below I pass in 2009)</p>
</td></tr>
<tr><td><code id="trimmer_+3A_tname">tname</code></td>
<td>
<p>The name of the column containing the time periods</p>
</td></tr>
<tr><td><code id="trimmer_+3A_idname">idname</code></td>
<td>
<p>The individual (cross-sectional unit) id name</p>
</td></tr>
<tr><td><code id="trimmer_+3A_gname">gname</code></td>
<td>
<p>The name of the variable in <code>data</code> that
contains the first period when a particular observation is treated.
This should be a positive number for all observations in treated groups.
It defines which &quot;group&quot; a unit belongs to.  It should be 0 for units
in the untreated group.</p>
</td></tr>
<tr><td><code id="trimmer_+3A_xformla">xformla</code></td>
<td>
<p>A formula for the covariates to include in the
model.  It should be of the form <code>~ X1 + X2</code>.  Default
is NULL which is equivalent to <code>xformla=~1</code>.  This is
used to create a matrix of covariates which is then passed
to the 2x2 DID estimator chosen in <code>est_method</code>.</p>
</td></tr>
<tr><td><code id="trimmer_+3A_data">data</code></td>
<td>
<p>The name of the data.frame that contains the data</p>
</td></tr>
<tr><td><code id="trimmer_+3A_control_group">control_group</code></td>
<td>
<p>Which units to use the control group.
The default is &quot;nevertreated&quot; which sets the control group
to be the group of units that never participate in the
treatment.  This group does not change across groups or
time periods.  The other option is to set
<code>group="notyettreated"</code>.  In this case, the control group
is set to the group of units that have not yet participated
in the treatment in that time period.  This includes all
never treated units, but it includes additional units that
eventually participate in the treatment, but have not
participated yet.</p>
</td></tr>
<tr><td><code id="trimmer_+3A_threshold">threshold</code></td>
<td>
<p>the cutoff for which observations are flagged as
likely violators of the support condition.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of ids of observations that likely violate support conditions
</p>

<hr>
<h2 id='wif'>Compute extra term in influence function due to estimating weights</h2><span id='topic+wif'></span>

<h3>Description</h3>

<p>A function to compute the extra term that shows up in the
influence function for aggregated treatment effect parameters
due to estimating the weights
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wif(keepers, pg, weights.ind, G, group)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="wif_+3A_keepers">keepers</code></td>
<td>
<p>a vector of indices for which group-time average
treatment effects are used to compute a particular aggregated parameter</p>
</td></tr>
<tr><td><code id="wif_+3A_pg">pg</code></td>
<td>
<p>a vector with same length as total number of group-time average
treatment effects that contains the probability of being in particular group</p>
</td></tr>
<tr><td><code id="wif_+3A_weights.ind">weights.ind</code></td>
<td>
<p>additional sampling weights (nx1)</p>
</td></tr>
<tr><td><code id="wif_+3A_g">G</code></td>
<td>
<p>vector containing which group a unit belongs to (nx1)</p>
</td></tr>
<tr><td><code id="wif_+3A_group">group</code></td>
<td>
<p>vector of groups</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nxk influence function matrix
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
