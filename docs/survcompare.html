<!DOCTYPE html><html><head><title>Help for package survcompare</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {survcompare}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cox_calibration_stats'><p>Calibration stats of a fitted Cox PH model</p></a></li>
<li><a href='#linear_beta'><p>Auxiliary function for simulatedata functions</p></a></li>
<li><a href='#predict.survensemble'><p>Predicts event probability for a fitted survensemble</p></a></li>
<li><a href='#print.survcompare'><p>Print survcompare object</p></a></li>
<li><a href='#print.survensemble'><p>Prints trained survensemble object</p></a></li>
<li><a href='#print.survensemble_cv'><p>Prints survensemble_cv object</p></a></li>
<li><a href='#simulate_crossterms'><p>Simulated sample with survival outcomes with non-linear and cross-term dependencies</p></a></li>
<li><a href='#simulate_linear'><p>Simulated sample with survival outcomes with linear dependencies</p></a></li>
<li><a href='#simulate_nonlinear'><p>Simulated sample with survival outcomes with non-linear dependencies</p></a></li>
<li><a href='#srf_survival_prob_for_time'><p>Internal function to compute survival probability</p>
by time from a fitted survival random forest</a></li>
<li><a href='#summary.survcompare'><p>Summary of survcompare results</p></a></li>
<li><a href='#summary.survensemble'><p>Prints summary of a trained survensemble object</p></a></li>
<li><a href='#summary.survensemble_cv'><p>Prints a summary of survensemble_cv object</p></a></li>
<li><a href='#surv_brierscore'><p>Calculates time-dependent Brier Score</p></a></li>
<li><a href='#surv_validate'><p>Computes performance statistics for a survival data given the predicted event probabilities</p></a></li>
<li><a href='#survcompare'><p>Cross-validates and compares Cox Proportionate Hazards and Survival Random Forest models</p></a></li>
<li><a href='#survcox_cv'><p>Cross-validates Cox or CoxLasso model</p></a></li>
<li><a href='#survcox_predict'><p>Computes event probabilities from a trained cox model</p></a></li>
<li><a href='#survcox_train'><p>Trains CoxPH using survival package, or trains CoxLasso (cv.glmnet, lambda.min),</p>
and then re-trains survival:coxph on non-zero predictors</a></li>
<li><a href='#survcoxlasso_train'><p>Trains CoxLasso, using cv.glmnet(s=&quot;lambda.min&quot;)</p></a></li>
<li><a href='#survensemble_cv'><p>Cross-validates predictive performance for Ensemble 1</p></a></li>
<li><a href='#survensemble_train'><p>Fits an ensemble of Cox-PH and Survival Random Forest (SRF)</p>
with internal CV to tune SRF hyperparameters.</a></li>
<li><a href='#survival_prob_km'><p>Calculates survival probability estimated by Kaplan-Meier survival curve</p>
Uses polynomial extrapolation in survival function space, using poly(n=3)</a></li>
<li><a href='#survsrf_cv'><p>Cross-validates SRF model</p></a></li>
<li><a href='#survsrf_predict'><p>Predicts event probability for a fitted SRF model</p></a></li>
<li><a href='#survsrf_train'><p>Fits randomForestSRC, with tuning by mtry, nodedepth, and nodesize.</p>
Underlying model is by Ishwaran et al(2008)
https://www.randomforestsrc.org/articles/survival.html
Ishwaran H, Kogalur UB, Blackstone EH, Lauer MS. Random survival forests.
The Annals of Applied Statistics. 2008;2:841â€“60.</a></li>
<li><a href='#survsrf_tune'><p>Internal function to tune SRF model, in nested CV loop</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Compares Cox and Survival Random Forests to Quantify
Nonlinearity</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-01-19</td>
</tr>
<tr>
<td>Description:</td>
<td>Performs repeated nested cross-validation for Cox Proportionate Hazards, Cox Lasso, Survival Random Forest, and their ensemble. Returns internally validated concordance index, time-dependent area under the curve, Brier score, calibration slope, and statistical testing of non-linear ensemble outperforming the baseline Cox model. In this, it helps researchers to quantify the gain of using a more complex survival model, or justify its redundancy. Equally, it shows the performance value of the non-linear and interaction terms, and may highlight the need of further feature transformation. Further details can be found in Shamsutdinova, Stamate, Roberts, &amp; Stahl (2022) "Combining Cox Model and Tree-Based Algorithms to Boost Performance and Preserve Interpretability for Health Outcomes" &lt;<a href="https://doi.org/10.1007%2F978-3-031-08337-2_15">doi:10.1007/978-3-031-08337-2_15</a>&gt;, where the method is described as Ensemble 1.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1), survival (&ge; 3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, timeROC, caret, glmnet, randomForestSRC</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Diana Shamsutdinova &lt;diana.shamsutdinova.github@gmail.com&gt;</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-19 19:52:05 UTC; dinab</td>
</tr>
<tr>
<td>Author:</td>
<td>Diana Shamsutdinova
    <a href="https://orcid.org/0000-0003-2434-3641"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Daniel Stahl <a href="https://orcid.org/0000-0001-7987-6619"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-22 17:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='cox_calibration_stats'>Calibration stats of a fitted Cox PH model</h2><span id='topic+cox_calibration_stats'></span>

<h3>Description</h3>

<p>Computes calibration alpha and slope for a fitted coxph model
in the data.
</p>
<p>Crowson, C. S., Atkinson, E. J., &amp; Therneau, T. M. (2016).
Assessing calibration of prognostic risk scores.
Statistical methods in medical research, 25(4), 1692-1706.
</p>
<p>https://journals.sagepub.com/doi/pdf/10.1177/0962280213497434
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cox_calibration_stats(cox_model, test_data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cox_calibration_stats_+3A_cox_model">cox_model</code></td>
<td>
<p>fitted cox model, namely, coxph() object</p>
</td></tr>
<tr><td><code id="cox_calibration_stats_+3A_test_data">test_data</code></td>
<td>
<p>test data, should be a data frame with &quot;time&quot; and &quot;event&quot; columns for survival outcome</p>
</td></tr>
</table>


<h3>Value</h3>

<p>c(calibration alpha, calibration slope)
</p>

<hr>
<h2 id='linear_beta'>Auxiliary function for simulatedata functions</h2><span id='topic+linear_beta'></span>

<h3>Description</h3>

<p>Auxiliary function for simulatedata functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>linear_beta(df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="linear_beta_+3A_df">df</code></td>
<td>
<p>data</p>
</td></tr>
</table>

<hr>
<h2 id='predict.survensemble'>Predicts event probability for a fitted survensemble</h2><span id='topic+predict.survensemble'></span>

<h3>Description</h3>

<p><a href="#topic+predict.survensemble">predict.survensemble</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'survensemble'
predict(object, newdata, fixed_time, oob = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.survensemble_+3A_object">object</code></td>
<td>
<p>trained survensemble model</p>
</td></tr>
<tr><td><code id="predict.survensemble_+3A_newdata">newdata</code></td>
<td>
<p>test data</p>
</td></tr>
<tr><td><code id="predict.survensemble_+3A_fixed_time">fixed_time</code></td>
<td>
<p>time for which probabilities are computed</p>
</td></tr>
<tr><td><code id="predict.survensemble_+3A_oob">oob</code></td>
<td>
<p>TRUE/FALSE , default is FALSE, if out of bag predictions are to be made from SRF</p>
</td></tr>
<tr><td><code id="predict.survensemble_+3A_...">...</code></td>
<td>
<p>other parameters to pass</p>
</td></tr>
</table>


<h3>Value</h3>

<p>matrix of predictions for observations in newdata by times
</p>

<hr>
<h2 id='print.survcompare'>Print survcompare object</h2><span id='topic+print.survcompare'></span>

<h3>Description</h3>

<p>Print survcompare object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'survcompare'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.survcompare_+3A_x">x</code></td>
<td>
<p>output object of the survcompare function</p>
</td></tr>
<tr><td><code id="print.survcompare_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>x
</p>

<hr>
<h2 id='print.survensemble'>Prints trained survensemble object</h2><span id='topic+print.survensemble'></span>

<h3>Description</h3>

<p>Prints trained survensemble object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'survensemble'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.survensemble_+3A_x">x</code></td>
<td>
<p>survensemble object</p>
</td></tr>
<tr><td><code id="print.survensemble_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>x
</p>

<hr>
<h2 id='print.survensemble_cv'>Prints survensemble_cv object</h2><span id='topic+print.survensemble_cv'></span>

<h3>Description</h3>

<p>Prints survensemble_cv object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'survensemble_cv'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.survensemble_cv_+3A_x">x</code></td>
<td>
<p>survensemble_cv object</p>
</td></tr>
<tr><td><code id="print.survensemble_cv_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>x
</p>

<hr>
<h2 id='simulate_crossterms'>Simulated sample with survival outcomes with non-linear and cross-term dependencies</h2><span id='topic+simulate_crossterms'></span>

<h3>Description</h3>

<p>Simulated sample with exponentially or Weibull distributed time-to-event;
log-hazard depends non-linearly on risk factors, and includes cross-terms.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulate_crossterms(
  N = 300,
  observe_time = 10,
  percentcensored = 0.75,
  randomseed = NULL,
  lambda = 0.1,
  distr = "Exp",
  rho_w = 1,
  drop_out = 0.3
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulate_crossterms_+3A_n">N</code></td>
<td>
<p>sample size, 300 by default</p>
</td></tr>
<tr><td><code id="simulate_crossterms_+3A_observe_time">observe_time</code></td>
<td>
<p>study's observation time, 10 by default</p>
</td></tr>
<tr><td><code id="simulate_crossterms_+3A_percentcensored">percentcensored</code></td>
<td>
<p>expected number of non-events by observe_time, 0.75 by default (i.e. event rate is 0.25)</p>
</td></tr>
<tr><td><code id="simulate_crossterms_+3A_randomseed">randomseed</code></td>
<td>
<p>random seed for replication</p>
</td></tr>
<tr><td><code id="simulate_crossterms_+3A_lambda">lambda</code></td>
<td>
<p>baseline hazard rate, 0.1 by default</p>
</td></tr>
<tr><td><code id="simulate_crossterms_+3A_distr">distr</code></td>
<td>
<p>time-to-event distribution, &quot;Exp&quot; for exponential (default), &quot;W&quot; for Weibull</p>
</td></tr>
<tr><td><code id="simulate_crossterms_+3A_rho_w">rho_w</code></td>
<td>
<p>shape parameter for Weibull distribution, 0.3 by default</p>
</td></tr>
<tr><td><code id="simulate_crossterms_+3A_drop_out">drop_out</code></td>
<td>
<p>expected rate of drop out before observe_time, 0.3 by default</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame; &quot;time&quot; and &quot;event&quot; columns describe survival outcome; predictors are &quot;age&quot;, &quot;sex&quot;, &quot;hyp&quot;, &quot;bmi&quot;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mydata &lt;- simulate_crossterms()
head(mydata)
</code></pre>

<hr>
<h2 id='simulate_linear'>Simulated sample with survival outcomes with linear dependencies</h2><span id='topic+simulate_linear'></span>

<h3>Description</h3>

<p>Simulated sample with exponentially or Weibull distributed time-to-event;
log-hazard (lambda parameter) depends linearly on risk factors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulate_linear(
  N = 300,
  observe_time = 10,
  percentcensored = 0.75,
  randomseed = NULL,
  lambda = 0.1,
  distr = "Exp",
  rho_w = 1,
  drop_out = 0.3
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulate_linear_+3A_n">N</code></td>
<td>
<p>sample size, 300 by default</p>
</td></tr>
<tr><td><code id="simulate_linear_+3A_observe_time">observe_time</code></td>
<td>
<p>study's observation time, 10 by default</p>
</td></tr>
<tr><td><code id="simulate_linear_+3A_percentcensored">percentcensored</code></td>
<td>
<p>expected number of non-events by observe_time, 0.75 by default (i.e. event rate is 0.25)</p>
</td></tr>
<tr><td><code id="simulate_linear_+3A_randomseed">randomseed</code></td>
<td>
<p>random seed for replication</p>
</td></tr>
<tr><td><code id="simulate_linear_+3A_lambda">lambda</code></td>
<td>
<p>baseline hazard rate, 0.1 by default</p>
</td></tr>
<tr><td><code id="simulate_linear_+3A_distr">distr</code></td>
<td>
<p>time-to-event distribution, &quot;Exp&quot; for exponential (default), &quot;W&quot; for Weibull</p>
</td></tr>
<tr><td><code id="simulate_linear_+3A_rho_w">rho_w</code></td>
<td>
<p>shape parameter for Weibull distribution, 0.3 by default</p>
</td></tr>
<tr><td><code id="simulate_linear_+3A_drop_out">drop_out</code></td>
<td>
<p>expected rate of drop out before observe_time, 0.3 by default</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame; &quot;time&quot; and &quot;event&quot; columns describe survival outcome; predictors are &quot;age&quot;, &quot;sex&quot;, &quot;hyp&quot;, &quot;bmi&quot;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mydata &lt;- simulate_linear()
head(mydata)
</code></pre>

<hr>
<h2 id='simulate_nonlinear'>Simulated sample with survival outcomes with non-linear dependencies</h2><span id='topic+simulate_nonlinear'></span>

<h3>Description</h3>

<p>Simulated sample with exponentially or Weibull distributed time-to-event;
log-hazard (lambda parameter) depends non-linearly on risk factors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulate_nonlinear(
  N = 300,
  observe_time = 10,
  percentcensored = 0.75,
  randomseed = NULL,
  lambda = 0.1,
  distr = "Exp",
  rho_w = 1,
  drop_out = 0.3
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulate_nonlinear_+3A_n">N</code></td>
<td>
<p>sample size, 300 by default</p>
</td></tr>
<tr><td><code id="simulate_nonlinear_+3A_observe_time">observe_time</code></td>
<td>
<p>study's observation time, 10 by default</p>
</td></tr>
<tr><td><code id="simulate_nonlinear_+3A_percentcensored">percentcensored</code></td>
<td>
<p>expected number of non-events by observe_time, 0.75 by default (i.e. event rate is 0.25)</p>
</td></tr>
<tr><td><code id="simulate_nonlinear_+3A_randomseed">randomseed</code></td>
<td>
<p>random seed for replication</p>
</td></tr>
<tr><td><code id="simulate_nonlinear_+3A_lambda">lambda</code></td>
<td>
<p>baseline hazard rate, 0.1 by default</p>
</td></tr>
<tr><td><code id="simulate_nonlinear_+3A_distr">distr</code></td>
<td>
<p>time-to-event distribution, &quot;Exp&quot; for exponential (default), &quot;W&quot; for Weibull</p>
</td></tr>
<tr><td><code id="simulate_nonlinear_+3A_rho_w">rho_w</code></td>
<td>
<p>shape parameter for Weibull distribution, 0.3 by default</p>
</td></tr>
<tr><td><code id="simulate_nonlinear_+3A_drop_out">drop_out</code></td>
<td>
<p>expected rate of drop out before observe_time, 0.3 by default</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame; &quot;time&quot; and &quot;event&quot; columns describe survival outcome; predictors are &quot;age&quot;, &quot;sex&quot;, &quot;hyp&quot;, &quot;bmi&quot;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mydata &lt;- simulate_nonlinear()
head(mydata)
</code></pre>

<hr>
<h2 id='srf_survival_prob_for_time'>Internal function to compute survival probability
by time from a fitted survival random forest</h2><span id='topic+srf_survival_prob_for_time'></span>

<h3>Description</h3>

<p>Internal function to compute survival probability
by time from a fitted survival random forest
</p>


<h3>Usage</h3>

<pre><code class='language-R'>srf_survival_prob_for_time(rfmodel, df_to_predict, fixed_time, oob = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="srf_survival_prob_for_time_+3A_rfmodel">rfmodel</code></td>
<td>
<p>pre-trained survsrf_train model</p>
</td></tr>
<tr><td><code id="srf_survival_prob_for_time_+3A_df_to_predict">df_to_predict</code></td>
<td>
<p>test data</p>
</td></tr>
<tr><td><code id="srf_survival_prob_for_time_+3A_fixed_time">fixed_time</code></td>
<td>
<p>at which event probabilities are computed</p>
</td></tr>
<tr><td><code id="srf_survival_prob_for_time_+3A_oob">oob</code></td>
<td>
<p>TRUE/FALSE use out-of-bag prediction</p>
</td></tr>
</table>


<h3>Value</h3>

<p>output list: output$train, test, testaverage, traintaverage, time
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- simulate_nonlinear()
#params&lt;- c("age", "hyp", "bmi")
#s &lt;- survsrf_train(df, params)
#p &lt;- survsrf_predict(s, df, 5)
</code></pre>

<hr>
<h2 id='summary.survcompare'>Summary of survcompare results</h2><span id='topic+summary.survcompare'></span>

<h3>Description</h3>

<p>Summary of survcompare results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'survcompare'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.survcompare_+3A_object">object</code></td>
<td>
<p>output object of the survcompare function</p>
</td></tr>
<tr><td><code id="summary.survcompare_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>object
</p>

<hr>
<h2 id='summary.survensemble'>Prints summary of a trained survensemble object</h2><span id='topic+summary.survensemble'></span>

<h3>Description</h3>

<p>Prints summary of a trained survensemble object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'survensemble'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.survensemble_+3A_object">object</code></td>
<td>
<p>survensemble object</p>
</td></tr>
<tr><td><code id="summary.survensemble_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>object
</p>

<hr>
<h2 id='summary.survensemble_cv'>Prints a summary of survensemble_cv object</h2><span id='topic+summary.survensemble_cv'></span>

<h3>Description</h3>

<p>Prints a summary of survensemble_cv object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'survensemble_cv'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.survensemble_cv_+3A_object">object</code></td>
<td>
<p>survensemble_cv object</p>
</td></tr>
<tr><td><code id="summary.survensemble_cv_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>object
</p>

<hr>
<h2 id='surv_brierscore'>Calculates time-dependent Brier Score</h2><span id='topic+surv_brierscore'></span>

<h3>Description</h3>

<p>Calculates time-dependent Brier Scores for a vector of times. Calculations are similar to that in:
https://scikit-survival.readthedocs.io/en/stable/api/generated/sksurv.metrics.brier_score.html#sksurv.metrics.brier_score
https://github.com/sebp/scikit-survival/blob/v0.19.0.post1/sksurv/metrics.py#L524-L644
The function uses IPCW (inverse probability of censoring weights), computed using the Kaplan-Meier
survival function, where events are censored events from train data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>surv_brierscore(
  y_predicted_newdata,
  df_brier_train,
  df_newdata,
  time_points,
  weighted = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="surv_brierscore_+3A_y_predicted_newdata">y_predicted_newdata</code></td>
<td>
<p>computed event probabilities</p>
</td></tr>
<tr><td><code id="surv_brierscore_+3A_df_brier_train">df_brier_train</code></td>
<td>
<p>train data</p>
</td></tr>
<tr><td><code id="surv_brierscore_+3A_df_newdata">df_newdata</code></td>
<td>
<p>test data for which brier score is computed</p>
</td></tr>
<tr><td><code id="surv_brierscore_+3A_time_points">time_points</code></td>
<td>
<p>times at which BS calculated</p>
</td></tr>
<tr><td><code id="surv_brierscore_+3A_weighted">weighted</code></td>
<td>
<p>TRUE/FALSE for IPWC to use or not</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of time-dependent Brier Scores for all time_points
</p>

<hr>
<h2 id='surv_validate'>Computes performance statistics for a survival data given the predicted event probabilities</h2><span id='topic+surv_validate'></span>

<h3>Description</h3>

<p>Computes performance statistics for a survival data given the predicted event probabilities
</p>


<h3>Usage</h3>

<pre><code class='language-R'>surv_validate(
  y_predict,
  predict_time,
  df_train,
  df_test,
  weighted = TRUE,
  alpha = "logit"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="surv_validate_+3A_y_predict">y_predict</code></td>
<td>
<p>probabilities of event by predict_time (matrix=observations x times)</p>
</td></tr>
<tr><td><code id="surv_validate_+3A_predict_time">predict_time</code></td>
<td>
<p>times for which event probabilities are given</p>
</td></tr>
<tr><td><code id="surv_validate_+3A_df_train">df_train</code></td>
<td>
<p>train data, data frame</p>
</td></tr>
<tr><td><code id="surv_validate_+3A_df_test">df_test</code></td>
<td>
<p>test data, data frame</p>
</td></tr>
<tr><td><code id="surv_validate_+3A_weighted">weighted</code></td>
<td>
<p>TRUE/FALSE, for IPWC</p>
</td></tr>
<tr><td><code id="surv_validate_+3A_alpha">alpha</code></td>
<td>
<p>calibration alpha as mean difference or from logistic regression</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame(T, AUCROC, Brier Score, Scaled Brier Score, C_score, Calib slope, Calib alpha)
</p>

<hr>
<h2 id='survcompare'>Cross-validates and compares Cox Proportionate Hazards and Survival Random Forest models</h2><span id='topic+survcompare'></span>

<h3>Description</h3>

<p>The function performs a repeated nested cross-validation for
</p>

<ol>
<li><p> Cox-PH (survival package, survival::coxph) or Cox-Lasso (glmnet package, glmnet::cox.fit)
</p>
</li>
<li><p> Ensemble of the Cox model and Survival Random Forest (randomForestSRC::rfsrc)
</p>
</li>
<li><p> Survival Random Forest on its own, if train_srf = TRUE
</p>
</li></ol>

<p>The same random seed for the train/test splits are used for all models to aid fair comparison;
and the performance metrics are computed for the tree models including Harrel's c-index,
time-dependent AUC-ROC, time-dependent Brier Score, and calibration slope.
The statistical significance of the performance differences between Cox-PH and Cox-SRF Ensemble is tested and reported.
</p>
<p>The function is designed to help with the model selection by quantifying the loss of predictive
performance (if any) if Cox-PH is used instead of a more complex model such as SRF
which can capture non-linear and interaction terms, as well as non-proportionate hazards.
The difference in performance of the Ensembled Cox and SRF and the baseline Cox-PH
can be viewed as quantification of the non-linear and cross-terms contribution to
the predictive power of the supplied predictors.
</p>
<p>Cross-validates and compares Cox Proportionate Hazards and Survival Random Forest models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survcompare(
  df_train,
  predict_factors,
  predict_time = NULL,
  randomseed = NULL,
  useCoxLasso = FALSE,
  outer_cv = 3,
  inner_cv = 3,
  srf_tuning = list(),
  return_models = FALSE,
  repeat_cv = 2,
  train_srf = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survcompare_+3A_df_train">df_train</code></td>
<td>
<p>training data, a data frame with &quot;time&quot; and &quot;event&quot; columns to define the survival outcome</p>
</td></tr>
<tr><td><code id="survcompare_+3A_predict_factors">predict_factors</code></td>
<td>
<p>list of column names to be used as predictors</p>
</td></tr>
<tr><td><code id="survcompare_+3A_predict_time">predict_time</code></td>
<td>
<p>prediction time of interest. If NULL, 0.90th quantile of event times is used</p>
</td></tr>
<tr><td><code id="survcompare_+3A_randomseed">randomseed</code></td>
<td>
<p>random seed for replication</p>
</td></tr>
<tr><td><code id="survcompare_+3A_usecoxlasso">useCoxLasso</code></td>
<td>
<p>TRUE / FALSE, for whether to use regularized version of the Cox model, FALSE is default</p>
</td></tr>
<tr><td><code id="survcompare_+3A_outer_cv">outer_cv</code></td>
<td>
<p>k in k-fold CV</p>
</td></tr>
<tr><td><code id="survcompare_+3A_inner_cv">inner_cv</code></td>
<td>
<p>k in k-fold CV for internal CV to tune survival random forest hyper-parameters</p>
</td></tr>
<tr><td><code id="survcompare_+3A_srf_tuning">srf_tuning</code></td>
<td>
<p>list of tuning parameters for random forest: 1) NULL for using a default tuning grid, or 2) a list(&quot;mtry&quot;=c(...), &quot;nodedepth&quot; = c(...), &quot;nodesize&quot; = c(...))</p>
</td></tr>
<tr><td><code id="survcompare_+3A_return_models">return_models</code></td>
<td>
<p>TRUE/FALSE to return the trained models; default is FALSE, only performance is returned</p>
</td></tr>
<tr><td><code id="survcompare_+3A_repeat_cv">repeat_cv</code></td>
<td>
<p>if NULL, runs once, otherwise repeats several times with different random split for CV, reports average of all</p>
</td></tr>
<tr><td><code id="survcompare_+3A_train_srf">train_srf</code></td>
<td>
<p>TRUE/FALSE for whether to train SRF on its own, apart from the CoxPH-&gt;SRF ensemble. Default is FALSE as there is not much information in SRF itself compared to the ensembled version.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>outcome = list(data frame with performance results, fitted Cox models, fitted SRF)
</p>


<h3>Author(s)</h3>

<p>Diana Shamsutdinova <a href="mailto:diana.shamsutdinova.github@gmail.com">diana.shamsutdinova.github@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
df &lt;-simulate_nonlinear(100)
srf_params &lt;- list("mtry" = c(2), "nodedepth"=c(25), "nodesize" =c(15))
mysurvcomp &lt;- survcompare(df, names(df)[1:4], srf_tuning = srf_params, outer_cv = 2, inner_cv =2)
summary(mysurvcomp)

</code></pre>

<hr>
<h2 id='survcox_cv'>Cross-validates Cox or CoxLasso model</h2><span id='topic+survcox_cv'></span>

<h3>Description</h3>

<p>Cross-validates Cox or CoxLasso model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survcox_cv(
  df,
  predict.factors,
  fixed_time = NaN,
  outer_cv = 3,
  repeat_cv = 2,
  randomseed = NULL,
  return_models = FALSE,
  inner_cv = 3,
  useCoxLasso = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survcox_cv_+3A_df">df</code></td>
<td>
<p>data frame with the data, &quot;time&quot; and &quot;event&quot; for survival outcome</p>
</td></tr>
<tr><td><code id="survcox_cv_+3A_predict.factors">predict.factors</code></td>
<td>
<p>list of predictor names</p>
</td></tr>
<tr><td><code id="survcox_cv_+3A_fixed_time">fixed_time</code></td>
<td>
<p>at which performance metrics are computed</p>
</td></tr>
<tr><td><code id="survcox_cv_+3A_outer_cv">outer_cv</code></td>
<td>
<p>k in k-fold CV, default 3</p>
</td></tr>
<tr><td><code id="survcox_cv_+3A_repeat_cv">repeat_cv</code></td>
<td>
<p>if NULL, runs once, otherwise repeats CV</p>
</td></tr>
<tr><td><code id="survcox_cv_+3A_randomseed">randomseed</code></td>
<td>
<p>random seed</p>
</td></tr>
<tr><td><code id="survcox_cv_+3A_return_models">return_models</code></td>
<td>
<p>TRUE/FALSE, if TRUE returns all CV objects</p>
</td></tr>
<tr><td><code id="survcox_cv_+3A_inner_cv">inner_cv</code></td>
<td>
<p>k in the inner loop of k-fold CV, default is 3; only used if CoxLasso is TRUE</p>
</td></tr>
<tr><td><code id="survcox_cv_+3A_usecoxlasso">useCoxLasso</code></td>
<td>
<p>TRUE/FALSE, FALSE by default</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of outputs
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
df &lt;- simulate_nonlinear()
coxph_cv &lt;- survcox_cv(df, names(df)[1:4])
summary(coxph_cv)

</code></pre>

<hr>
<h2 id='survcox_predict'>Computes event probabilities from a trained cox model</h2><span id='topic+survcox_predict'></span>

<h3>Description</h3>

<p>Computes event probabilities from a trained cox model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survcox_predict(trained_model, newdata, fixed_time, interpolation = "constant")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survcox_predict_+3A_trained_model">trained_model</code></td>
<td>
<p>pre-trained cox model of coxph class</p>
</td></tr>
<tr><td><code id="survcox_predict_+3A_newdata">newdata</code></td>
<td>
<p>data to compute event probabilities for</p>
</td></tr>
<tr><td><code id="survcox_predict_+3A_fixed_time">fixed_time</code></td>
<td>
<p>at which event probabilities are computed</p>
</td></tr>
<tr><td><code id="survcox_predict_+3A_interpolation">interpolation</code></td>
<td>
<p>&quot;constant&quot; by default, can also be &quot;linear&quot;, for between times interpolation for hazard rates</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns matrix(nrow = length(newdata), ncol = length(fixed_time))
</p>

<hr>
<h2 id='survcox_train'>Trains CoxPH using survival package, or trains CoxLasso (cv.glmnet, lambda.min),
and then re-trains survival:coxph on non-zero predictors</h2><span id='topic+survcox_train'></span>

<h3>Description</h3>

<p>Trains CoxPH using survival package, or trains CoxLasso (cv.glmnet, lambda.min),
and then re-trains survival:coxph on non-zero predictors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survcox_train(
  df_train,
  predict.factors,
  fixed_time = NaN,
  useCoxLasso = FALSE,
  retrain_cox = FALSE,
  inner_cv = 5
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survcox_train_+3A_df_train">df_train</code></td>
<td>
<p>data, &quot;time&quot; and &quot;event&quot; should describe survival outcome</p>
</td></tr>
<tr><td><code id="survcox_train_+3A_predict.factors">predict.factors</code></td>
<td>
<p>list of the column names to be used as predictors</p>
</td></tr>
<tr><td><code id="survcox_train_+3A_fixed_time">fixed_time</code></td>
<td>
<p>target time, NaN by default; needed here only to re-align with other methods</p>
</td></tr>
<tr><td><code id="survcox_train_+3A_usecoxlasso">useCoxLasso</code></td>
<td>
<p>TRUE or FALSE</p>
</td></tr>
<tr><td><code id="survcox_train_+3A_retrain_cox">retrain_cox</code></td>
<td>
<p>if useCoxLasso is TRUE, whether to re-train coxph on non-zero predictors, FALSE by default</p>
</td></tr>
<tr><td><code id="survcox_train_+3A_inner_cv">inner_cv</code></td>
<td>
<p>k in k-fold CV for training lambda for Cox Lasso, only used for useCoxLasso = TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>fitted CoxPH or CoxLasso model
</p>

<hr>
<h2 id='survcoxlasso_train'>Trains CoxLasso, using cv.glmnet(s=&quot;lambda.min&quot;)</h2><span id='topic+survcoxlasso_train'></span>

<h3>Description</h3>

<p>Trains CoxLasso, using cv.glmnet(s=&quot;lambda.min&quot;)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survcoxlasso_train(
  df_train,
  predict.factors,
  inner_cv = 5,
  fixed_time = NaN,
  retrain_cox = FALSE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survcoxlasso_train_+3A_df_train">df_train</code></td>
<td>
<p>data frame with the data, &quot;time&quot; and &quot;event&quot; should describe survival outcome</p>
</td></tr>
<tr><td><code id="survcoxlasso_train_+3A_predict.factors">predict.factors</code></td>
<td>
<p>list of the column names to be used as predictors</p>
</td></tr>
<tr><td><code id="survcoxlasso_train_+3A_inner_cv">inner_cv</code></td>
<td>
<p>k in k-fold CV for lambda tuning</p>
</td></tr>
<tr><td><code id="survcoxlasso_train_+3A_fixed_time">fixed_time</code></td>
<td>
<p>not used here, for internal use</p>
</td></tr>
<tr><td><code id="survcoxlasso_train_+3A_retrain_cox">retrain_cox</code></td>
<td>
<p>whether to re-train coxph on non-zero predictors; FALSE by default</p>
</td></tr>
<tr><td><code id="survcoxlasso_train_+3A_verbose">verbose</code></td>
<td>
<p>TRUE/FALSE prints warnings if no predictors in Lasso</p>
</td></tr>
</table>


<h3>Value</h3>

<p>fitted CoxPH object with coefficient of CoxLasso or re-trained CoxPH with non-zero CoxLasso if retrain_cox = FALSE or TRUE
</p>

<hr>
<h2 id='survensemble_cv'>Cross-validates predictive performance for Ensemble 1</h2><span id='topic+survensemble_cv'></span>

<h3>Description</h3>

<p>Cross-validates predictive performance for Ensemble 1
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survensemble_cv(
  df,
  predict.factors,
  fixed_time = NaN,
  outer_cv = 3,
  inner_cv = 3,
  repeat_cv = 2,
  randomseed = NULL,
  return_models = FALSE,
  useCoxLasso = FALSE,
  srf_tuning = list(),
  oob = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survensemble_cv_+3A_df">df</code></td>
<td>
<p>data frame with the data, &quot;time&quot; and &quot;event&quot; for survival outcome</p>
</td></tr>
<tr><td><code id="survensemble_cv_+3A_predict.factors">predict.factors</code></td>
<td>
<p>list of predictor names</p>
</td></tr>
<tr><td><code id="survensemble_cv_+3A_fixed_time">fixed_time</code></td>
<td>
<p>at which performance metrics are computed</p>
</td></tr>
<tr><td><code id="survensemble_cv_+3A_outer_cv">outer_cv</code></td>
<td>
<p>k in k-fold CV, default 3</p>
</td></tr>
<tr><td><code id="survensemble_cv_+3A_inner_cv">inner_cv</code></td>
<td>
<p>kk in the inner look of kk-fold CV, default 3</p>
</td></tr>
<tr><td><code id="survensemble_cv_+3A_repeat_cv">repeat_cv</code></td>
<td>
<p>if NULL, runs once (or 1), otherwise repeats CV</p>
</td></tr>
<tr><td><code id="survensemble_cv_+3A_randomseed">randomseed</code></td>
<td>
<p>random seed</p>
</td></tr>
<tr><td><code id="survensemble_cv_+3A_return_models">return_models</code></td>
<td>
<p>TRUE/FALSE, if TRUE returns all CV objects</p>
</td></tr>
<tr><td><code id="survensemble_cv_+3A_usecoxlasso">useCoxLasso</code></td>
<td>
<p>TRUE/FALSE, default is FALSE</p>
</td></tr>
<tr><td><code id="survensemble_cv_+3A_srf_tuning">srf_tuning</code></td>
<td>
<p>list of tuning parameters for random forest: 1) NULL for using a default tuning grid, or 2) a list(&quot;mtry&quot;=c(...), &quot;nodedepth&quot; = c(...), &quot;nodesize&quot; = c(...))</p>
</td></tr>
<tr><td><code id="survensemble_cv_+3A_oob">oob</code></td>
<td>
<p>TRUE/FALSE use out-of-bag predictions while tuning instead of cross-validation, TRUE by default</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of outputs
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

df &lt;- simulate_nonlinear()
ens_cv &lt;- survensemble_cv(df, names(df)[1:4])
summary(ens_cv)


</code></pre>

<hr>
<h2 id='survensemble_train'>Fits an ensemble of Cox-PH and Survival Random Forest (SRF)
with internal CV to tune SRF hyperparameters.</h2><span id='topic+survensemble_train'></span>

<h3>Description</h3>

<p>Details: the function trains Cox model, then adds its out-of-the-box
predictions to Survival Random Forest as an additional predictor
to mimic stacking procedure used in Machine Learning and reduce over-fitting.
#' Cox model is fitted to .9 data to predict the rest .1 for each 1/10s fold;
these out-of-the-bag predictions are passed on to SRF
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survensemble_train(
  df_train,
  predict.factors,
  fixed_time = NaN,
  inner_cv = 3,
  randomseed = NULL,
  srf_tuning = list(),
  fast_version = TRUE,
  oob = TRUE,
  useCoxLasso = FALSE,
  var_importance_calc = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survensemble_train_+3A_df_train">df_train</code></td>
<td>
<p>data, &quot;time&quot; and &quot;event&quot;  describe survival outcome</p>
</td></tr>
<tr><td><code id="survensemble_train_+3A_predict.factors">predict.factors</code></td>
<td>
<p>list of the column names to be used as predictors</p>
</td></tr>
<tr><td><code id="survensemble_train_+3A_fixed_time">fixed_time</code></td>
<td>
<p>for which the performance is maximized</p>
</td></tr>
<tr><td><code id="survensemble_train_+3A_inner_cv">inner_cv</code></td>
<td>
<p>number of inner cycles for model tuning</p>
</td></tr>
<tr><td><code id="survensemble_train_+3A_randomseed">randomseed</code></td>
<td>
<p>random seed</p>
</td></tr>
<tr><td><code id="survensemble_train_+3A_srf_tuning">srf_tuning</code></td>
<td>
<p>list of mtry, nodedepth and nodesize, to use default supply empty list()</p>
</td></tr>
<tr><td><code id="survensemble_train_+3A_fast_version">fast_version</code></td>
<td>
<p>TRUE/FALSE, TRUE by default</p>
</td></tr>
<tr><td><code id="survensemble_train_+3A_oob">oob</code></td>
<td>
<p>FALSE/TRUE, TRUE by default</p>
</td></tr>
<tr><td><code id="survensemble_train_+3A_usecoxlasso">useCoxLasso</code></td>
<td>
<p>FALSE/TRUE, FALSE by default</p>
</td></tr>
<tr><td><code id="survensemble_train_+3A_var_importance_calc">var_importance_calc</code></td>
<td>
<p>FALSE/TRUE, TRUE by default</p>
</td></tr>
</table>


<h3>Value</h3>

<p>trained object of class survensemble
</p>

<hr>
<h2 id='survival_prob_km'>Calculates survival probability estimated by Kaplan-Meier survival curve
Uses polynomial extrapolation in survival function space, using poly(n=3)</h2><span id='topic+survival_prob_km'></span>

<h3>Description</h3>

<p>Calculates survival probability estimated by Kaplan-Meier survival curve
Uses polynomial extrapolation in survival function space, using poly(n=3)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survival_prob_km(df_km_train, times, estimate_censoring = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survival_prob_km_+3A_df_km_train">df_km_train</code></td>
<td>
<p>event probabilities (!not survival)</p>
</td></tr>
<tr><td><code id="survival_prob_km_+3A_times">times</code></td>
<td>
<p>times at which survival is estimated</p>
</td></tr>
<tr><td><code id="survival_prob_km_+3A_estimate_censoring">estimate_censoring</code></td>
<td>
<p>FALSE by default, if TRUE, event and censoring is reversed (for IPCW calculations)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of survival probabilities for time_points
</p>

<hr>
<h2 id='survsrf_cv'>Cross-validates SRF model</h2><span id='topic+survsrf_cv'></span>

<h3>Description</h3>

<p>Cross-validates SRF model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survsrf_cv(
  df,
  predict.factors,
  fixed_time = NaN,
  outer_cv = 3,
  repeat_cv = 2,
  randomseed = NULL,
  return_models = FALSE,
  inner_cv = 3,
  srf_tuning = list(),
  oob = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survsrf_cv_+3A_df">df</code></td>
<td>
<p>data frame with the data, &quot;time&quot; and &quot;event&quot; for survival outcome</p>
</td></tr>
<tr><td><code id="survsrf_cv_+3A_predict.factors">predict.factors</code></td>
<td>
<p>list of predictor names</p>
</td></tr>
<tr><td><code id="survsrf_cv_+3A_fixed_time">fixed_time</code></td>
<td>
<p>at which performance metrics are computed</p>
</td></tr>
<tr><td><code id="survsrf_cv_+3A_outer_cv">outer_cv</code></td>
<td>
<p>k in k-fold CV, default 3</p>
</td></tr>
<tr><td><code id="survsrf_cv_+3A_repeat_cv">repeat_cv</code></td>
<td>
<p>if NULL, runs once, otherwise repeats CV</p>
</td></tr>
<tr><td><code id="survsrf_cv_+3A_randomseed">randomseed</code></td>
<td>
<p>random seed</p>
</td></tr>
<tr><td><code id="survsrf_cv_+3A_return_models">return_models</code></td>
<td>
<p>TRUE/FALSE, if TRUE returns all CV objects</p>
</td></tr>
<tr><td><code id="survsrf_cv_+3A_inner_cv">inner_cv</code></td>
<td>
<p>k in the inner loop of k-fold CV for SRF hyperparameters tuning, default is 3</p>
</td></tr>
<tr><td><code id="survsrf_cv_+3A_srf_tuning">srf_tuning</code></td>
<td>
<p>list of tuning parameters for random forest: 1) NULL for using a default tuning grid, or 2) a list(&quot;mtry&quot;=c(...), &quot;nodedepth&quot; = c(...), &quot;nodesize&quot; = c(...))</p>
</td></tr>
<tr><td><code id="survsrf_cv_+3A_oob">oob</code></td>
<td>
<p>TRUE/FALSE use out-of-bag prediction accuracy while tuning instead of cross-validation, TRUE by default</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of outputs
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

df &lt;- simulate_nonlinear()
srf_cv &lt;- survsrf_cv(df, names(df)[1:4])
summary(srf_cv)


</code></pre>

<hr>
<h2 id='survsrf_predict'>Predicts event probability for a fitted SRF model</h2><span id='topic+survsrf_predict'></span>

<h3>Description</h3>

<p>Predicts event probability for a fitted SRF model randomForestSRC::rfsrc.
Essentially a wrapper of <a href="#topic+srf_survival_prob_for_time">srf_survival_prob_for_time</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survsrf_predict(trained_model, newdata, fixed_time, oob = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survsrf_predict_+3A_trained_model">trained_model</code></td>
<td>
<p>trained model</p>
</td></tr>
<tr><td><code id="survsrf_predict_+3A_newdata">newdata</code></td>
<td>
<p>test data</p>
</td></tr>
<tr><td><code id="survsrf_predict_+3A_fixed_time">fixed_time</code></td>
<td>
<p>time for which probabilities are computed</p>
</td></tr>
<tr><td><code id="survsrf_predict_+3A_oob">oob</code></td>
<td>
<p>TRUE/FALSE use out-of-bag predictions while tuning instead of cross-validation, default is TRUE and is faster</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns vector of predictions (or matrix if fixed_time is a vector of times)
</p>

<hr>
<h2 id='survsrf_train'>Fits randomForestSRC, with tuning by mtry, nodedepth, and nodesize.
Underlying model is by Ishwaran et al(2008)
https://www.randomforestsrc.org/articles/survival.html
Ishwaran H, Kogalur UB, Blackstone EH, Lauer MS. Random survival forests.
The Annals of Applied Statistics. 2008;2:841â€“60.</h2><span id='topic+survsrf_train'></span>

<h3>Description</h3>

<p>Fits randomForestSRC, with tuning by mtry, nodedepth, and nodesize.
Underlying model is by Ishwaran et al(2008)
https://www.randomforestsrc.org/articles/survival.html
Ishwaran H, Kogalur UB, Blackstone EH, Lauer MS. Random survival forests.
The Annals of Applied Statistics. 2008;2:841â€“60.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survsrf_train(
  df_train,
  predict.factors,
  fixed_time = NaN,
  inner_cv = 3,
  randomseed = NULL,
  srf_tuning = list(),
  fast_version = TRUE,
  oob = TRUE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survsrf_train_+3A_df_train">df_train</code></td>
<td>
<p>data, &quot;time&quot; and &quot;event&quot; should describe survival outcome</p>
</td></tr>
<tr><td><code id="survsrf_train_+3A_predict.factors">predict.factors</code></td>
<td>
<p>list of the column names to be used as predictors</p>
</td></tr>
<tr><td><code id="survsrf_train_+3A_fixed_time">fixed_time</code></td>
<td>
<p>time at which performance is maximized</p>
</td></tr>
<tr><td><code id="survsrf_train_+3A_inner_cv">inner_cv</code></td>
<td>
<p>k in k-fold CV for model tuning</p>
</td></tr>
<tr><td><code id="survsrf_train_+3A_randomseed">randomseed</code></td>
<td>
<p>random seed</p>
</td></tr>
<tr><td><code id="survsrf_train_+3A_srf_tuning">srf_tuning</code></td>
<td>
<p>list of mtry, nodedepth and nodesize, default is NULL</p>
</td></tr>
<tr><td><code id="survsrf_train_+3A_fast_version">fast_version</code></td>
<td>
<p>TRUE/FALSE, TRUE by default</p>
</td></tr>
<tr><td><code id="survsrf_train_+3A_oob">oob</code></td>
<td>
<p>TRUE/FALSE use out-of-bag predictions while tuning SRF instead of cross-validation, default is TRUE and is faster</p>
</td></tr>
<tr><td><code id="survsrf_train_+3A_verbose">verbose</code></td>
<td>
<p>TRUE/FALSE, FALSE by default</p>
</td></tr>
</table>


<h3>Value</h3>

<p>output = list(beststats, allstats, model)
</p>

<hr>
<h2 id='survsrf_tune'>Internal function to tune SRF model, in nested CV loop</h2><span id='topic+survsrf_tune'></span>

<h3>Description</h3>

<p>Internal function to tune SRF model, in nested CV loop
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survsrf_tune(
  df_tune,
  predict.factors,
  inner_cv = 3,
  fixed_time = NaN,
  randomseed = NULL,
  mtry = c(3, 4, 5),
  nodesize = c(10, 20, 50),
  nodedepth = c(100),
  verbose = FALSE,
  oob = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="survsrf_tune_+3A_df_tune">df_tune</code></td>
<td>
<p>data frame</p>
</td></tr>
<tr><td><code id="survsrf_tune_+3A_predict.factors">predict.factors</code></td>
<td>
<p>predictor names</p>
</td></tr>
<tr><td><code id="survsrf_tune_+3A_inner_cv">inner_cv</code></td>
<td>
<p>k in k-fold CV, applied if oob=FALSE</p>
</td></tr>
<tr><td><code id="survsrf_tune_+3A_fixed_time">fixed_time</code></td>
<td>
<p>NaN</p>
</td></tr>
<tr><td><code id="survsrf_tune_+3A_randomseed">randomseed</code></td>
<td>
<p>random seed</p>
</td></tr>
<tr><td><code id="survsrf_tune_+3A_mtry">mtry</code></td>
<td>
<p>tuning parameter</p>
</td></tr>
<tr><td><code id="survsrf_tune_+3A_nodesize">nodesize</code></td>
<td>
<p>at which event probabilities are computed</p>
</td></tr>
<tr><td><code id="survsrf_tune_+3A_nodedepth">nodedepth</code></td>
<td>
<p>tuning parameter</p>
</td></tr>
<tr><td><code id="survsrf_tune_+3A_verbose">verbose</code></td>
<td>
<p>FALSE</p>
</td></tr>
<tr><td><code id="survsrf_tune_+3A_oob">oob</code></td>
<td>
<p>TRUE/FALSE use out-of-bag predictions while tuning instead of cross-validation, default is TRUE and is faster</p>
</td></tr>
</table>


<h3>Value</h3>

<p>output=list(modelstats, bestbrier, bestauc, bestcindex)
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
