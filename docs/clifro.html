<!DOCTYPE html><html><head><title>Help for package clifro</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {clifro}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#clifro'><p>From CliFlo to <span class="pkg">clifro</span>: Enhancing The National Climate Database With <span class="rlang"><b>R</b></span></p></a></li>
<li><a href='#+5B+5B+2CdataFrame-method'><p>Subsetting Methods for Clifro Objects</p></a></li>
<li><a href='#+2B+2CcfStation+2CcfStation-method'><p>Arithmetic Operators for Clifro Objects</p></a></li>
<li><a href='#cf_curl_opts'><p>Store curl options for use within <span class="pkg">clifro</span></p></a></li>
<li><a href='#cf_find_station'><p>Search for Clifro Stations</p></a></li>
<li><a href='#cf_last_query'><p>Retrieve Last Query Result from CliFlo</p></a></li>
<li><a href='#cf_query'><p>Retrieve Data from the National Climate Database</p></a></li>
<li><a href='#cf_save_kml'><p>Save Clifro Station Information to a KML File</p></a></li>
<li><a href='#cfDatatype-class'><p>The Clifro Datatype Object</p></a></li>
<li><a href='#cfStation-class'><p>The Clifro Station Object</p></a></li>
<li><a href='#cfUser-class'><p>The Clifro User Object</p></a></li>
<li><a href='#dimnames+2CdataFrame-method'><p>Dimension Attributes of a Clifro Object</p></a></li>
<li><a href='#plot+2CcfEarthTemp+2Cmissing-method'><p>Plot Earth Temperatures</p></a></li>
<li><a href='#plot+2CcfPressure+2Cmissing-method'><p>Plot Mean Sea Level Atmospheric Pressure</p></a></li>
<li><a href='#plot+2CcfRain+2Cmissing-method'><p>Plot Rain Time series</p></a></li>
<li><a href='#plot+2CcfScreenObs+2Cmissing-method'><p>Plot Screen Observations</p></a></li>
<li><a href='#plot+2CcfSunshine+2Cmissing-method'><p>Plot Sunshine Hours</p></a></li>
<li><a href='#plot+2CcfTemp+2Cmissing-method'><p>Plot Temperature Range</p></a></li>
<li><a href='#plot+2CcfWind+2Cmissing-method'><p>Plot Clifro Wind Objects</p></a></li>
<li><a href='#plot.cfDataList'><p>Default Clifro Plotting</p></a></li>
<li><a href='#summary+2CcfUser-method'><p>Summarise User Information</p></a></li>
<li><a href='#summary+2CcfWind-method'><p>Summarise Clifro Wind Data</p></a></li>
<li><a href='#valid_cfuser'><p>Validation Functions For The <code>cfUser</code> Class</p></a></li>
<li><a href='#windrose'><p>Plot a windrose</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Easily Download and Visualise Climate Data from CliFlo</td>
</tr>
<tr>
<td>Version:</td>
<td>3.2-5</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-05-24</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, stats, graphics, lubridate, xml2, magrittr, utils,
ggplot2 (&ge; 2.0.0), scales, RColorBrewer, reshape2, rvest,
httr, stringr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>spelling, knitr, rmarkdown, pander, testthat</td>
</tr>
<tr>
<td>Description:</td>
<td>CliFlo is a web portal to the New Zealand National Climate
    Database and provides public access (via subscription) to around 6,500
    various climate stations (see <a href="https://cliflo.niwa.co.nz/">https://cliflo.niwa.co.nz/</a> for more
    information). Collating and manipulating data from CliFlo
    (hence clifro) and importing into R for further analysis, exploration and
    visualisation is now straightforward and coherent. The user is required to
    have an internet connection, and a current CliFlo subscription (free) if
    data from stations, other than the public Reefton electronic weather
    station, is sought.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.ropensci.org/clifro/">https://docs.ropensci.org/clifro/</a>,
<a href="https://github.com/ropensci/clifro">https://github.com/ropensci/clifro</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/clifro/issues">https://github.com/ropensci/clifro/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Collate:</td>
<td>'dataFrame.R' 'cfStation.R' 'cfData.R' 'cfDataList.R'
'cfData-plotMethods.R' 'cfDatatype.R' 'cfQuery.R' 'cfUser.R'
'findStations.R'</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>X-schema.org-keywords:</td>
<td>r, opensci, zealand, weather, climate, cliflo,
data, api, windrose, rain, wind, temperature</td>
</tr>
<tr>
<td>X-schema.org-applicationCategory:</td>
<td>Data Access</td>
</tr>
<tr>
<td>X-schema.org-isPartOf:</td>
<td>"https://ropensci.org"</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-05-24 05:38:23 UTC; see044</td>
</tr>
<tr>
<td>Author:</td>
<td>Blake Seers <a href="https://orcid.org/0000-0001-6841-4312"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Blake Seers &lt;blake.seers@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-05-24 05:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='clifro'>From CliFlo to <span class="pkg">clifro</span>: Enhancing The National Climate Database With <span class="rlang"><b>R</b></span></h2><span id='topic+clifro'></span><span id='topic+clifro-package'></span>

<h3>Description</h3>

<p>Import data from New Zealand's National Climate Database via CliFlo into <span class="rlang"><b>R</b></span>
for exploring, analysis, plotting, exporting to KML, CSV, or other software.
</p>


<h3>Details</h3>

<p>The <span class="pkg">clifro</span> package is intended to simplify the process of data
extraction, formatting and visualisation from the
<a href="https://cliflo.niwa.co.nz/">CliFlo web portal</a>. It
requires the user to build a query consisting of 3 main components; the user,
the datatype(s) and the station(s). These are
then combined using the <code><a href="#topic+cf_query">cf_query</a></code> function that sends the query
to the CliFlo database and returns the results that can easily be plotted
using generic plotting functions.
</p>
<p>This package requires the user to already have a current subscription to the
National Climate Database unless a public user is sought, where data is
limited to Reefton Ews. Subscription is free and can obtained from
<a href="https://cliflo.niwa.co.nz/pls/niwp/wsubform.intro">https://cliflo.niwa.co.nz/pls/niwp/wsubform.intro</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cf_user">cf_user</a></code>, <code><a href="#topic+cf_datatype">cf_datatype</a></code>, and
<code><a href="#topic+cf_station">cf_station</a></code> for choosing the clifro user, datatypes and
stations, respectively.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Create a public user ----------------------------------------------------

public.user = cf_user() # Defaults to "public"
public.user

# Select datatypes --------------------------------------------------------

# 9am Surface wind (m/s)
wind.dt = cf_datatype(2, 1, 4, 1)

# Daily Rain
rain.dt = cf_datatype(3, 1, 1)

# Daily temperature extremes
temp.dt = cf_datatype(4, 2, 2)

# Combine them together
all.dts = wind.dt + rain.dt + temp.dt
all.dts

# Select the Reefton Ews station ------------------------------------------

reefton.st = cf_station()
reefton.st

# Submit the query --------------------------------------------------------

# Retrieve all data from ~ six months ago at 9am
reefton.data = cf_query(public.user, all.dts, reefton.st,
                        paste(as.Date(Sys.time()) - 182, "9"))
reefton.data


# Plot the data -----------------------------------------------------------

# Plot the 9am surface wind data (first dataframe in the list) ---
reefton.data[1]

# all identical - although passed to different methods
plot(reefton.data)    #plot,cfDataList,missing-method
plot(reefton.data, 1) #plot,cfDataList,numeric-method
plot(reefton.data[1]) #plot,cfData,missing-method --&gt; plot,cfWind,missing-method

speed_plot(reefton.data)
direction_plot(reefton.data)

# Plot the daily rain data (second dataframe in the list) ---
reefton.data[2]

# With runoff and soil deficit
plot(reefton.data, 2)

# Just plot amount of rain (mm)
plot(reefton.data, 2, include_runoff = FALSE)

# Plot the hourly temperature data (third dataframe in the list) ---
plot(reefton.data, 3)

# Pass an argument to ggplot2::theme
library(ggplot2) # for element_text()
plot(reefton.data, 3, text = element_text(size = 18))

## End(Not run)
</code></pre>

<hr>
<h2 id='+5B+5B+2CdataFrame-method'>Subsetting Methods for Clifro Objects</h2><span id='topic++5B+5B+2CdataFrame-method'></span><span id='topic++5B+2CdataFrame+2CANY+2CANY+2CANY-method'></span><span id='topic++24+2CdataFrame-method'></span><span id='topic++5B+2CcfStation+2CANY+2CANY+2CANY-method'></span><span id='topic+Extract'></span><span id='topic++5B+2CcfDataList+2CANY+2CANY+2CANY-method'></span><span id='topic++5B+5B+2CcfDataList-method'></span><span id='topic++5B+2CcfDatatype+2CANY+2Cmissing+2Cmissing-method'></span><span id='topic++5B+2CcfDatatype+2CANY+2Cmissing+2Cmissing'></span>

<h3>Description</h3>

<p>Operators acting on <code>cfDataList</code>, <code>cfDatatype</code>, <code>cfStation</code>,
and <code>dataFrame</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'dataFrame'
x[[i]]

## S4 method for signature 'dataFrame,ANY,ANY,ANY'
x[i, j, drop]

## S4 method for signature 'dataFrame'
x$name

## S4 method for signature 'cfStation,ANY,ANY,ANY'
x[i, j, drop = TRUE]

## S4 method for signature 'cfDataList,ANY,ANY,ANY'
x[i, j]

## S4 method for signature 'cfDataList'
x[[i]]

## S4 method for signature 'cfDatatype,ANY,missing,missing'
x[i, j, drop]
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B5B+2B5B+2B2CdataFrame-method_+3A_x">x</code></td>
<td>
<p>a <span class="pkg">clifro</span> object</p>
</td></tr>
<tr><td><code id="+2B5B+2B5B+2B2CdataFrame-method_+3A_i">i</code></td>
<td>
<p>indices specifying elements to extract. Indices are
<code>numeric</code> or <code>character</code> vectors or empty (missing) or
<code>NULL</code>. Character vectors will be matched to the names of
the object.</p>
</td></tr>
<tr><td><code id="+2B5B+2B5B+2B2CdataFrame-method_+3A_j">j</code></td>
<td>
<p>indices specifying elements to extract. Indices are
<code>numeric</code> or <code>character</code> vectors or empty (missing) or
<code>NULL</code>. Character vectors will be matched to the names of
the object.</p>
</td></tr>
<tr><td><code id="+2B5B+2B5B+2B2CdataFrame-method_+3A_drop">drop</code></td>
<td>
<p>if <code>TRUE</code>, the result is coerced to the lowest possible
dimension. See <code><a href="base.html#topic+drop">drop</a></code> for further details.</p>
</td></tr>
<tr><td><code id="+2B5B+2B5B+2B2CdataFrame-method_+3A_name">name</code></td>
<td>
<p>a literal character string. This is partially matched to the
names of the object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These are methods for the generic operators for classes within <span class="pkg">clifro</span>.
They are intended to give the user the familiar functionality of subsetting
<code><a href="base.html#topic+data.frame">data.frame</a></code> objects.
</p>

<hr>
<h2 id='+2B+2CcfStation+2CcfStation-method'>Arithmetic Operators for Clifro Objects</h2><span id='topic++2B+2CcfStation+2CcfStation-method'></span><span id='topic++2B+2CcfDatatype+2CcfDatatype-method'></span>

<h3>Description</h3>

<p>This operator allows you to add more datatypes or stations to
<code>cfDatatype</code> and <code>cfStation</code> objects respectively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'cfStation,cfStation'
e1 + e2

## S4 method for signature 'cfDatatype,cfDatatype'
e1 + e2
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B2B+2B2CcfStation+2B2CcfStation-method_+3A_e1">e1</code></td>
<td>
<p>a <code>cfDatatype</code> or <code>cfStation</code> object</p>
</td></tr>
<tr><td><code id="+2B2B+2B2CcfStation+2B2CcfStation-method_+3A_e2">e2</code></td>
<td>
<p>an object matching the class of e1</p>
</td></tr>
</table>

<hr>
<h2 id='cf_curl_opts'>Store curl options for use within <span class="pkg">clifro</span></h2><span id='topic+cf_curl_opts'></span>

<h3>Description</h3>

<p>The <code>cf_curl_opts</code> function stores specific curl options that are used
for all the <span class="pkg">clifro</span> queries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cf_curl_opts(..., .opts = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cf_curl_opts_+3A_...">...</code></td>
<td>
<p>a name-value pairs that are passed to <code>RCurl curlOptions</code></p>
</td></tr>
<tr><td><code id="cf_curl_opts_+3A_.opts">.opts</code></td>
<td>
<p>a named list or <code>CURLOptions</code> object that are passed to <code>RCurl curlOptions</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Specify options for use in all the curl handles created in clifro
cf_curl_opts(.opts = list(proxy = "http://xxxxx.yyyy.govt.nz:8080",
                          proxyusername  = "uid",
                          proxypassword  = "pwd",
                          ssl.verifypeer = FALSE))
# Or alternatively:
cf_curl_opts(proxy = "http://xxxxx.yyyy.govt.nz:8080",
             proxyusername  = "uid",
             proxypassword  = "pwd",
             ssl.verifypeer = FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='cf_find_station'>Search for Clifro Stations</h2><span id='topic+cf_find_station'></span>

<h3>Description</h3>

<p>Search for <span class="pkg">clifro</span> stations based on name, region, location or network
number, and return a <code>cfStation</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cf_find_station(
  ...,
  search = c("name", "region", "network", "latlong"),
  datatype,
  combine = c("all", "any"),
  status = c("open", "closed", "all")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cf_find_station_+3A_...">...</code></td>
<td>
<p>arguments to pass into the search, these differ depending on
<code>search</code>.</p>
</td></tr>
<tr><td><code id="cf_find_station_+3A_search">search</code></td>
<td>
<p>one of <code>name</code>, <code>network</code>, <code>region</code> or
<code>latlong</code> indicating the type of search to be conducted.</p>
</td></tr>
<tr><td><code id="cf_find_station_+3A_datatype">datatype</code></td>
<td>
<p><code>cfDatatype</code> object for when the search is based on
datatypes.</p>
</td></tr>
<tr><td><code id="cf_find_station_+3A_combine">combine</code></td>
<td>
<p>character string <code>"all"</code> or <code>"any"</code> indicating if the
stations contain all or any of the selected datatypes for when the search is
based on datatypes.</p>
</td></tr>
<tr><td><code id="cf_find_station_+3A_status">status</code></td>
<td>
<p>character string indicating <code>"open"</code>, <code>"closed"</code> or
<code>"all"</code> stations be returned by the search.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>cf_find_station</code> function is a convenience function for finding
CliFlo stations in <span class="rlang"><b>R</b></span>. It uses the CliFlo
<a href="https://cliflo.niwa.co.nz/pls/niwp/wstn.get_stn_html">Find Stations</a>
page to do the searching, and therefore means that the stations are not
stored within <span class="pkg">clifro</span>.
</p>
<p>If <code>datatype</code> is missing then the search is conducted
without any reference to datatypes. If it is supplied then the
search will only return stations that have any or all of the supplied
datatypes, depending on <code>combine</code>. The default behaviour is to search
for stations based on pattern matching the station name and return only the
open stations.
</p>
<p>If the <code>latlong</code> search type is used the function expects named
arguments with names (partially) matching latitude,
longitude and radius. If the arguments are passed in without names they must
be in order of latitude, longitude and radius (see examples).
</p>


<h3>Value</h3>

<p><code>cfStation</code> object
</p>


<h3>Note</h3>

<p>Since the searching is done by CliFlo there are obvious restrictions.
Unfortunately the pattern matching for station name does not provide
functionality for regular expressions, nor does it allow simultaneous
searches although <span class="pkg">clifro</span> does provide some extra functionality, see
the 'OR query Search' example below.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cf_save_kml">cf_save_kml</a></code> for saving the resulting stations as a KML
file, <code><a href="#topic+cf_station">cf_station</a></code> for creating <code><a href="#topic+cfStation">cfStation</a></code> objects
when the agent numbers are known, <code>vignette("choose-station")</code> for a
tutorial on finding <span class="pkg">clifro</span> stations and <code>vignette("cfStation")</code>
for working with <code><a href="#topic+cfStation">cfStation</a></code> objects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Station Name Search ------------------------------------------------------
# Return all open stations with 'island' in the name (pattern match search)
# Note this example uses all the defaults

island_st = cf_find_station("island")
island_st

# Region Search ------------------------------------------------------------
# Return all the closed stations from Queenstown (using partial matching)

queenstown.st = cf_find_station("queen", search = "region", status = "closed")
queenstown.st

# Long/Lat Search ----------------------------------------------------------
# Return all open stations within a 10km radius of the Beehive in Wellington
# From Wikipedia: latitude 41.2784 S, longitude 174.7767 E

beehive.st = cf_find_station(lat = -41.2784, long = 174.7767, rad = 10,
                             search = "latlong")
beehive.st

# Network ID Search --------------------------------------------------------
# Return all stations that share A42 in their network ID

A42.st = cf_find_station("A42", search = "network", status = "all")
A42.st

# Using Datatypes in the Search --------------------------------------------
# Is the Reefton EWS station open and does it collect daily rain and/or wind
# data?

# First, create the daily rain and wind datatypes
daily.dt = cf_datatype(c(2, 3), c(1, 1), list(4, 1), c(1, NA))
daily.dt

# Then combine into the search. This will only return stations where at least
# one datatype is available.
cf_find_station("reefton EWS", datatype = daily.dt)  # Yes

# OR Query Search ----------------------------------------------------------
# Return all stations sharing A42 in their network ID *or* all the open
# stations within 10km of the Beehive in Wellington (note this is not
# currently available as a single query in CliFlo).

cf_find_station("A42", search = "network", status = "all") +
cf_find_station(lat = -41.2784, long = 174.7767, rad = 10,
                search = "latlong")

# Note these are all ordered by open stations, then again by their end dates

## End(Not run)
</code></pre>

<hr>
<h2 id='cf_last_query'>Retrieve Last Query Result from CliFlo</h2><span id='topic+cf_last_query'></span>

<h3>Description</h3>

<p>Retrieve the last query submitted to CliFlo instead of querying the database
again and losing subscription rows.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cf_last_query()
</code></pre>


<h3>Details</h3>

<p>This function is a back up for when the clifro query has been submitted and
the data returned but has not been assigned, or inadvertently deleted. This
saves the user resubmitting queries and using more rows from their
subscription than needed.
</p>


<h3>Note</h3>

<p>Only the data from the last query is saved in <code>clifro</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Query CliFlo for wind at Reefton Ews
cf_query(cf_user(), cf_datatype(2, 1, 1, 1), cf_station(), "2012-01-01 00")

# Oops! Forgot to assign it to a variable...
reefton.wind = cf_last_query()
reefton.wind

## End(Not run)
</code></pre>

<hr>
<h2 id='cf_query'>Retrieve Data from the National Climate Database</h2><span id='topic+cf_query'></span>

<h3>Description</h3>

<p>Query the National Climate Database via CliFlo based on the <span class="pkg">clifro</span> user
and selected datatypes, stations and dates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cf_query(
  user,
  datatype,
  station,
  start_date,
  end_date = now(tz),
  date_format = "ymd_h",
  tz = "Pacific/Auckland",
  output_tz = c("local", "NZST", "UTC"),
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cf_query_+3A_user">user</code></td>
<td>
<p>a <code><a href="#topic+cfUser">cfUser</a></code> object.</p>
</td></tr>
<tr><td><code id="cf_query_+3A_datatype">datatype</code></td>
<td>
<p>a <code><a href="#topic+cfDatatype">cfDatatype</a></code> object containing the datatypes to
be retrieved.</p>
</td></tr>
<tr><td><code id="cf_query_+3A_station">station</code></td>
<td>
<p>a <code><a href="#topic+cfStation">cfStation</a></code> object containing the stations where
the datatypes will be retrieved from.</p>
</td></tr>
<tr><td><code id="cf_query_+3A_start_date">start_date</code></td>
<td>
<p>a character, Date or POSIXt object indicating the start
date. If a character string is supplied the date format
should be in the form <code>yyyy-mm-dd-hh</code> unless
<code>date_format</code> is specified.</p>
</td></tr>
<tr><td><code id="cf_query_+3A_end_date">end_date</code></td>
<td>
<p>same as <code>start_date</code>. Defaults to
<code><a href="lubridate.html#topic+now">now</a></code>.</p>
</td></tr>
<tr><td><code id="cf_query_+3A_date_format">date_format</code></td>
<td>
<p>a character string matching one of <code>"ymd_h"</code>,
<code>"mdy_h"</code>, <code>"ydm_h"</code> or <code>"dmy_h"</code>
representing the <code><a href="lubridate.html#topic+lubridate-package">lubridate-package</a></code>
date parsing function.</p>
</td></tr>
<tr><td><code id="cf_query_+3A_tz">tz</code></td>
<td>
<p>the timezone for which the start and end dates refer to. Conversion
to Pacific/Auckland time is done automatically through the
<code><a href="lubridate.html#topic+with_tz">with_tz</a></code> function. Defaults to
&quot;Pacific/Auckland&quot;.</p>
</td></tr>
<tr><td><code id="cf_query_+3A_output_tz">output_tz</code></td>
<td>
<p>the timezone of the output. This can be one of either &quot;local&quot;,
&quot;UTC&quot;, or &quot;NZST&quot;.</p>
</td></tr>
<tr><td><code id="cf_query_+3A_quiet">quiet</code></td>
<td>
<p>logical. When <code>TRUE</code> the function evaluates without
displaying customary messages. Messages from CliFlo are still
displayed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>cf_query</code> function is used to combine the <span class="pkg">clifro</span> user
(<code><a href="#topic+cfUser">cfUser</a></code>), along with the desired datatypes
(<code><a href="#topic+cfDatatype">cfDatatype</a></code>) and stations (<code><a href="#topic+cfStation">cfStation</a></code>). The query
is 'built up' using these objects, along with the necessary dates. The
function then uses all these data to query the National Climate Database via
the CliFlo web portal and returns one of the many <code>cfData</code>
objects if one dataframe is returned, or a <code>cfDataList</code> object if
there is more than one dataframe returned from CliFlo. If a <code>cfDataList</code>
is returned, each element in the list is a subclass of the <code>cfData</code>
class, see the 'cfData Subclasses' section.
</p>


<h3>Value</h3>

<p>a <code>cfData</code> or <code>cfDataList</code> object.
</p>


<h3>CfData Subclasses</h3>

<p>There are 8 <code>cfData</code> subclasses that are returned from <code>cf_query</code>
depending on the datatype requested. Each of these subclasses have default
<code>plot</code> methods for usability and efficiency in exploring and plotting
<span class="pkg">clifro</span> data.
</p>
<p>The following table summarises these subclasses and how they are created, see
also the examples on how to automatically create some of these subclasses.
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>Subclass</strong> </td><td style="text-align: left;"> <strong>CliFlo Datatype</strong></td>
</tr>
<tr>
 <td style="text-align: left;">
cfWind </td><td style="text-align: left;"> Any 'Wind' data </td>
</tr>
<tr>
 <td style="text-align: left;">
cfRain </td><td style="text-align: left;"> Any 'Precipitation' data </td>
</tr>
<tr>
 <td style="text-align: left;">
cfScreen Obs </td><td style="text-align: left;"> 'Temperature and Humidity' data measured in a standard screen </td>
</tr>
<tr>
 <td style="text-align: left;">
cfTemp </td><td style="text-align: left;"> Maximum and minimum 'Temperature and Humidity' data </td>
</tr>
<tr>
 <td style="text-align: left;">
cfEarthTemp </td><td style="text-align: left;"> 'Temperature and Humidity' data at a given depth </td>
</tr>
<tr>
 <td style="text-align: left;">
cfSunshine </td><td style="text-align: left;"> Any 'Sunshine &amp; Radiation' data </td>
</tr>
<tr>
 <td style="text-align: left;">
cfPressure </td><td style="text-align: left;"> Any 'Pressure' data </td>
</tr>
<tr>
 <td style="text-align: left;">
cfOther </td><td style="text-align: left;"> Any other CliFlo 'Daily and Hourly Observations' </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>See Also</h3>

<p><code><a href="#topic+cf_user">cf_user</a></code>, <code><a href="#topic+cf_datatype">cf_datatype</a></code> and
<code><a href="#topic+cf_station">cf_station</a></code> for creating the objects needed for a query. See
<code><a href="#topic+plot+2CcfDataList+2Cmissing-method">plot,cfDataList,missing-method</a></code> for general information on
default plotting of <code>cfData</code> and <code>cfDataList</code> objects, and the
links within.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Retrieve daily rain data from Reefton Ews
daily.rain = cf_query(cf_user("public"), cf_datatype(3, 1, 1),
                      cf_station(), "2012-01-01 00")
daily.rain

# returns a cfData object as there is only one datatype
class(daily.rain) # 'cfRain' object - inherits 'cfData'

# Look up the help page for cfRain plot methods
?plot.cfRain

# Retrieve daily rain and wind data from Reefton Ews

daily.dts = cf_query(cf_user("public"),
                     cf_datatype(c(2, 3), c(1, 1), list(4, 1), c(1, NA)),
                     cf_station(), "2012-01-01 00", "2013-01-01 00")
daily.dts

# returns a cfDataList object as there is more than one datatype. Each
# element of the cfDataList is an object inheriting from the cfData class.
class(daily.dts)     # cfDataList
class(daily.dts[1])  # cfRain
class(daily.dts[2])  # cfWind

# Create a cfSunshine object (inherits cfData)
# Retrieve daily global radiation data at Reefton Ews
rad.data = cf_query(cf_user(), cf_datatype(5,2,1), cf_station(),
                    "2012-01-01 00")
rad.data

# The cf_query function automatically creates the appropriate cfData subclass
class(rad.data)

# The advantage of having these subclasses is that it makes plotting very easy
plot(rad.data)
plot(daily.rain)
plot(daily.rain, include_runoff = FALSE)
plot(daily.dts)
plot(daily.dts, 2)

## End(Not run)
</code></pre>

<hr>
<h2 id='cf_save_kml'>Save Clifro Station Information to a KML File</h2><span id='topic+cf_save_kml'></span>

<h3>Description</h3>

<p>Save <code><a href="#topic+cfStation">cfStation</a></code> object information to a KML file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cf_save_kml(station, file_name = "my_stations_", file_path = ".")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cf_save_kml_+3A_station">station</code></td>
<td>
<p><code>cfStation</code> object containing one or more stations</p>
</td></tr>
<tr><td><code id="cf_save_kml_+3A_file_name">file_name</code></td>
<td>
<p>file name for the resulting KML file</p>
</td></tr>
<tr><td><code id="cf_save_kml_+3A_file_path">file_path</code></td>
<td>
<p>file path for the resulting KML file</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>cf_save_kml</code> function is for <code><a href="#topic+cfStation">cfStation</a></code>
objects to allow for the spatial visualisation of the selected stations. The
resulting KML file is saved and can then be opened by programs like Google
Earth (TM). The resultant KML file has the station names and locations shown
with green markers for open and red markers for closed stations. The agent
numbers, network ID's and date ranges are contained within the descriptions
for each station.
</p>
<p>If no file name is specified, unique names are produced in the current <span class="rlang"><b>R</b></span>
working directory.
</p>


<h3>Note</h3>

<p>The <code>.kml</code> suffix is appended automatically if it isn't already
present in the <code>file_name</code> argument.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cf_station">cf_station</a></code> and <code>vignette("cfStation")</code> for
working with stations when the agent numbers are known, otherwise
<code><a href="#topic+cf_find_station">cf_find_station</a></code> and codevignette(&quot;choose-station&quot;) for
creating <code>cfStation</code> objects when the agent numbers are unknown.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# A selection of four Auckland region stations down the East Coast to the
# upper Waitemata Harbour; Leigh 2 Ews, Warkworth Ews, Tiri Tiri Lighthouse
# and Henderson
my.stations = cf_station(17838, 1340, 1401, 12327)
my.stations

# Save these stations to a KML file
cf_save_kml(my.stations)

# Double click on the file to open with a default program (if available). All
# the markers are green, indicating all these stations are open.

# Where is the subscription-free Reefton Ews station?
cf_save_kml(cf_station(), file_name = "reeftonEWS")

# It's located in the sou'west quadrant of Reefton town, in the upper, western
# part of the South Island, NZ.

# Find all the open and closed Christchurch stations (using partial matching)
all.chch.st = cf_find_station("christ", status = "all", search = "region")

# How many stations in total?
nrow(all.chch.st)

# Save all the Christchurch stations
cf_save_kml(all.chch.st, file_name = "all_Chch_stations")

## End(Not run)
</code></pre>

<hr>
<h2 id='cfDatatype-class'>The Clifro Datatype Object</h2><span id='topic+cfDatatype-class'></span><span id='topic+cf_datatype'></span><span id='topic+cfDatatype'></span>

<h3>Description</h3>

<p>Create a <code>cfDatatype</code> object by selecting one or more CliFlo datatypes
to build the <span class="pkg">clifro</span> query.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cf_datatype(
  select_1 = NA,
  select_2 = NA,
  check_box = NA,
  combo_box = NA,
  graphics = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cfDatatype-class_+3A_select_1">select_1</code></td>
<td>
<p>a numeric vector of first node selections</p>
</td></tr>
<tr><td><code id="cfDatatype-class_+3A_select_2">select_2</code></td>
<td>
<p>a numeric vector of second node selections</p>
</td></tr>
<tr><td><code id="cfDatatype-class_+3A_check_box">check_box</code></td>
<td>
<p>a list containing the check box selections</p>
</td></tr>
<tr><td><code id="cfDatatype-class_+3A_combo_box">combo_box</code></td>
<td>
<p>a numeric vector containing the combo box selection
(if applicable)</p>
</td></tr>
<tr><td><code id="cfDatatype-class_+3A_graphics">graphics</code></td>
<td>
<p>a logical indicating whether a graphics menu should be used,
if available</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object inheriting from the <code><a href="#topic+cfDatatype">cfDatatype</a></code> class is created by
the constructor function <code><a href="#topic+cf_datatype">cf_datatype</a></code>. The function allows the
user to choose datatype(s) interactively (if no arguments are given), or to
create datatypes programmatically if the tree menu nodes are known a priori
(see examples). This function uses the same nodes, check box and combo box
options as CliFlo and can be viewed at the
<a href="https://cliflo.niwa.co.nz/pls/niwp/wgenf.choose_datatype?cat=cat1">datatype selection page</a>.
</p>


<h3>Value</h3>

<p><code>cfDatatype</code> object
</p>


<h3>Note</h3>

<p>For the 'public' user (see examples) only the Reefton Ews station data
is available.
</p>
<p>Currently clifro does not support datatypes from the special datasets
(Ten minute, Tier2, Virtual Climate, Lysimeter) or upper air measurements
from radiosondes and wind radar.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cf_user">cf_user</a></code> to create a <span class="pkg">clifro</span> user,
<code><a href="#topic+cf_station">cf_station</a></code> to choose the CliFlo stations and
<code>vignette("choose-datatype")</code> for help choosing <code>cfDatatype</code>s.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Select the surface wind datatype manually (unknown tree nodes)
hourly.wind.dt = cf_datatype()
#  2  --&gt; Datatype:        Wind
#  1  --&gt; Datatype 2:      Surface Wind
#  2  --&gt; Options:         Hourly Wind
# (2) --&gt; Another option:  No
#  3  --&gt; Units:           Knots
hourly.wind.dt

# Or select the datatype programatically (using the selections seen above)
hourly.wind.dt = cf_datatype(2, 1, 2, 3)
hourly.wind.dt

## End(Not run)
</code></pre>

<hr>
<h2 id='cfStation-class'>The Clifro Station Object</h2><span id='topic+cfStation-class'></span><span id='topic+cf_station'></span><span id='topic+cfStation'></span>

<h3>Description</h3>

<p>Create a <code>cfStation</code> object containing station information for one or
more CliFlo stations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cf_station(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cfStation-class_+3A_...">...</code></td>
<td>
<p>comma separated agent numbers</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A <code>cfStation</code> object is created by the constructor function
<code>cf_station</code>. The unique agent numbers of the stations are all that is
required to create a <code>cfStation</code> object using the <code>cf_station</code>
function. The rest of the station information including the name, network and
agent ID, start and end dates, coordinates, as well as other data is scraped
from CliFlo.
</p>
<p>This function is used for when the agent numbers are already known. For help
creating <code>cfStation</code> objects when the agent numbers are unknown see the
<code><a href="#topic+cf_find_station">cf_find_station</a></code> function.
</p>


<h3>Value</h3>

<p><code>cfStation</code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cf_find_station">cf_find_station</a></code> for creating <code>cfStation</code> objects
when the agent numbers are not known and <code>vignette("cfStation")</code>
for working with clifro stations including spatial plotting in <span class="rlang"><b>R</b></span>. For saving
<code>cfStation</code> objects as KML files refer to the vignette or
<code><a href="#topic+cf_save_kml">cf_save_kml</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Create a cfStation object for the Leigh 1 and 2 Ews stations
leigh.st = cf_station(1339, 1340)
leigh.st

# Note, this can also be achieved using the '+' operator
leigh.st = cf_station(1339) + cf_station(1340)
leigh.st

# Add another column showing how long the stations have been open for
leigh.df = as(leigh.st, "data.frame")
leigh.df$ndays = with(leigh.df, round(end - start))
leigh.df

# Save the stations to the current working directory as a KML to visualise
# the station locations
cf_save_kml(leigh.st)

## End(Not run)
</code></pre>

<hr>
<h2 id='cfUser-class'>The Clifro User Object</h2><span id='topic+cfUser-class'></span><span id='topic+cf_user'></span><span id='topic+cfUser'></span>

<h3>Description</h3>

<p>Create a <code>cfUser</code> object to allow the user to log into CliFlo from <span class="rlang"><b>R</b></span>
and  build their query.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cf_user(username = "public", password = character())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cfUser-class_+3A_username">username</code></td>
<td>
<p>a character string to be used as the cliflo username</p>
</td></tr>
<tr><td><code id="cfUser-class_+3A_password">password</code></td>
<td>
<p>a character string to be used as the cliflo password</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object inheriting from the <code>cfUser</code> class is created by the constructor
function <code>cf_user</code>. The user must have an active subscription to cliflo
in order to create a valid object, unless a 'public' user is sought.
Visit <a href="https://cliflo.niwa.co.nz/">https://cliflo.niwa.co.nz/</a> for more information and to subscribe
to cliflo.
</p>


<h3>Value</h3>

<p><code>cfUser</code> object
</p>


<h3>Note</h3>

<p>For the 'public' user (see examples) only the Reefton Ews station data
is available.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+valid_cfuser">valid_cfuser</a></code> for details on the validation of
<code>cfUser</code> and <code><a href="#topic+summary+2CcfUser-method">summary,cfUser-method</a></code> to summarise user
information.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
public.cfuser = cf_user(username = "public")
public.cfuser

## End(Not run)
</code></pre>

<hr>
<h2 id='dimnames+2CdataFrame-method'>Dimension Attributes of a Clifro Object</h2><span id='topic+dimnames+2CdataFrame-method'></span><span id='topic+dim+2CdataFrame-method'></span>

<h3>Description</h3>

<p>Retrieve the dimensions or dimension names of a <code>dataFrame</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'dataFrame'
dimnames(x)

## S4 method for signature 'dataFrame'
dim(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dimnames+2B2CdataFrame-method_+3A_x">x</code></td>
<td>
<p>a <code>dataFrame</code> object
</p>
<p>Specifically, a <code>dataFrame</code> object is any <code><a href="#topic+cfStation">cfStation</a></code> or 
<code>cfData</code> object. These functions are provided for the user to have (some)
familiar <code>data.frame</code>-type functions available for use on <span class="pkg">clifro</span>
objects.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+cf_query">cf_query</a></code> for creating <code>cfData</code> objects, and
<code><a href="#topic+cf_station">cf_station</a></code> for creating <code>cfStation</code> objects.
</p>

<hr>
<h2 id='plot+2CcfEarthTemp+2Cmissing-method'>Plot Earth Temperatures</h2><span id='topic+plot+2CcfEarthTemp+2Cmissing-method'></span><span id='topic+plot.cfEarthTemp'></span>

<h3>Description</h3>

<p>Plot the earth temperature for a given depth (degrees celsius) through time,
for each chosen CliFlo station.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'cfEarthTemp,missing'
plot(
  x,
  y,
  ggtheme = c("grey", "gray", "bw", "linedraw", "light", "minimal", "classic"),
  scales = c("fixed", "free_x", "free_y", "free"),
  n_col = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot+2B2CcfEarthTemp+2B2Cmissing-method_+3A_x">x</code></td>
<td>
<p>a cfEarthTemp object.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfEarthTemp+2B2Cmissing-method_+3A_y">y</code></td>
<td>
<p>missing.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfEarthTemp+2B2Cmissing-method_+3A_ggtheme">ggtheme</code></td>
<td>
<p>character string (partially) matching the
<code><a href="ggplot2.html#topic+ggtheme">ggtheme</a></code> to be used for plotting, see
'Theme Selection' below.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfEarthTemp+2B2Cmissing-method_+3A_scales">scales</code></td>
<td>
<p>character string partially matching the <code>scales</code> argument
in the <code>link[ggplot2]{facet_wrap}</code> function.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfEarthTemp+2B2Cmissing-method_+3A_n_col">n_col</code></td>
<td>
<p>the number of columns of plots (default 1).</p>
</td></tr>
<tr><td><code id="plot+2B2CcfEarthTemp+2B2Cmissing-method_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code><a href="ggplot2.html#topic+theme">theme</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+plot+2CcfDataList+2Cmissing-method">plot,cfDataList,missing-method</a></code> for general
information on default plotting of <code>cfData</code> and <code>cfDataList</code>
objects, and the links within. See <code><a href="#topic+cf_query">cf_query</a></code> for creating
<code>cfEarthTemp</code> objects.
</p>
<p>Refer to <code><a href="ggplot2.html#topic+theme">theme</a></code> for more possible arguments to pass
to these methods.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Retrieve public earth temperature data for the last 30 days at Reefton Ews
# station, at a depth of 10cm

# Subtract 30 days from today's date to get the start date
last_month = paste(as.character(Sys.Date() - 30), 0)

reefton_earth = cf_query(cf_user(), cf_datatype(4, 3, 2), cf_station(),
                         start_date = last_month)

class(reefton_earth) # cfTemp object

# Plot the temperature data using the defaults
plot(reefton_earth)

# Enlarge the text and add the observations as points
library(ggplot2) # for element_text() and geom_point()
plot(reefton_earth, ggtheme = "bw", text = element_text(size = 16)) +
  geom_point(size = 3, shape = 1)

# Save the plot as a png to the current working directory
library(ggplot2) # for ggsave()
ggsave("my_earthTemp_plot.png")

## End(Not run)
</code></pre>

<hr>
<h2 id='plot+2CcfPressure+2Cmissing-method'>Plot Mean Sea Level Atmospheric Pressure</h2><span id='topic+plot+2CcfPressure+2Cmissing-method'></span><span id='topic+plot.cfPressure'></span>

<h3>Description</h3>

<p>Plot the MSL atmospheric pressure through time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'cfPressure,missing'
plot(
  x,
  y,
  ggtheme = c("grey", "gray", "bw", "linedraw", "light", "minimal", "classic"),
  scales = c("fixed", "free_x", "free_y", "free"),
  n_col = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot+2B2CcfPressure+2B2Cmissing-method_+3A_x">x</code></td>
<td>
<p>a cfPressure object.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfPressure+2B2Cmissing-method_+3A_y">y</code></td>
<td>
<p>missing.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfPressure+2B2Cmissing-method_+3A_ggtheme">ggtheme</code></td>
<td>
<p>character string (partially) matching the
<code><a href="ggplot2.html#topic+ggtheme">ggtheme</a></code> to be used for plotting, see
'Theme Selection' below.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfPressure+2B2Cmissing-method_+3A_scales">scales</code></td>
<td>
<p>character string partially matching the <code>scales</code> argument
in the <code>link[ggplot2]{facet_wrap}</code> function.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfPressure+2B2Cmissing-method_+3A_n_col">n_col</code></td>
<td>
<p>the number of columns of plots (default 1).</p>
</td></tr>
<tr><td><code id="plot+2B2CcfPressure+2B2Cmissing-method_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code><a href="ggplot2.html#topic+theme">theme</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+plot+2CcfDataList+2Cmissing-method">plot,cfDataList,missing-method</a></code> for general
information on default plotting of <code>cfData</code> and <code>cfDataList</code>
objects, and the links within. See <code><a href="#topic+cf_query">cf_query</a></code> for creating
<code>cfPressure</code> objects.
</p>
<p>Refer to <code><a href="ggplot2.html#topic+theme">theme</a></code> for more possible arguments to pass
to these methods.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Retrieve public hourly atmospheric pressure data for the last 30 days at
# Reefton Ews station

# Subtract 30 days from today's date to get the start date
last_month = paste(as.character(Sys.Date() - 30), 0)

reefton_pressure = cf_query(cf_user(), cf_datatype(7, 1, 1), cf_station(),
                            start_date = last_month)

class(reefton_pressure) # cfPressure object

# Plot the atmospheric pressure data using the defaults
plot(reefton_pressure)

# Enlarge the text and add the observations as points
library(ggplot2) # for element_text() and geom_point()
plot(reefton_pressure, ggtheme = "bw", text = element_text(size = 16)) +
  geom_point(size = 3, shape = 1)

# Save the plot as a png to the current working directory
library(ggplot2) # for ggsave()
ggsave("my_pressure_plot.png")

## End(Not run)
</code></pre>

<hr>
<h2 id='plot+2CcfRain+2Cmissing-method'>Plot Rain Time series</h2><span id='topic+plot+2CcfRain+2Cmissing-method'></span><span id='topic+plot.cfRain'></span>

<h3>Description</h3>

<p>Plot the amount of rainfall (mm) through time, with optional available soil
water capacity and runoff amounts (if applicable).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'cfRain,missing'
plot(
  x,
  y,
  include_runoff = TRUE,
  ggtheme = c("grey", "gray", "bw", "linedraw", "light", "minimal", "classic"),
  scales = c("fixed", "free_x", "free_y", "free"),
  n_col = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot+2B2CcfRain+2B2Cmissing-method_+3A_x">x</code></td>
<td>
<p>a <code>cfRain</code> object.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfRain+2B2Cmissing-method_+3A_y">y</code></td>
<td>
<p>missing.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfRain+2B2Cmissing-method_+3A_include_runoff">include_runoff</code></td>
<td>
<p>a logical indicating whether to plot the soil moisture
deficit and runoff as well as the rainfall, if the data
is available (default <code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="plot+2B2CcfRain+2B2Cmissing-method_+3A_ggtheme">ggtheme</code></td>
<td>
<p>character string (partially) matching the
<code><a href="ggplot2.html#topic+ggtheme">ggtheme</a></code> to be used for plotting, see
'Theme Selection' below.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfRain+2B2Cmissing-method_+3A_scales">scales</code></td>
<td>
<p>character string partially matching the <code>scales</code> argument
in the <code>link[ggplot2]{facet_wrap}</code> function.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfRain+2B2Cmissing-method_+3A_n_col">n_col</code></td>
<td>
<p>the number of columns of plots (default 1).</p>
</td></tr>
<tr><td><code id="plot+2B2CcfRain+2B2Cmissing-method_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code><a href="ggplot2.html#topic+theme">theme</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When there is a rain event, the amount of runoff, if any, is dependent on how
much capacity the soil has available for more water. If there is no available
water capacity left in the soil then more rain will lead to a runoff event.
If <code>include_runoff = TRUE</code>, the available water capacity is plotted as
negative values and the runoff as positive values to signify this negative
relationship.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot+2CcfDataList+2Cmissing-method">plot,cfDataList,missing-method</a></code> for general
information on default plotting of <code>cfData</code> and <code>cfDataList</code>
objects, and the links within. See <code><a href="#topic+cf_query">cf_query</a></code> for creating
<code>cfRain</code> objects.
</p>
<p>Refer to <code><a href="ggplot2.html#topic+theme">theme</a></code> for more possible arguments to pass
to these methods.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Retrieve public rain data for a month from CliFlo (at Reefton Ews station)
reefton_rain = cf_query(cf_user(), cf_datatype(3, 1, 1), cf_station(),
                        start_date = "2012-08-01-00",
                        end_date = "2012-09-01-00")

class(reefton_rain) # cfRain object

# Plot the rain data using the defaults
plot(reefton_rain)

# Change the ggtheme and enlarge the text
library(ggplot2) # for element_text()
plot(reefton_rain, ggtheme = "bw", text = element_text(size = 16))

# Save the plot as a png to the current working directory
library(ggplot2) # for ggsave()
ggsave("my_rain_plot.png")

## End(Not run)
</code></pre>

<hr>
<h2 id='plot+2CcfScreenObs+2Cmissing-method'>Plot Screen Observations</h2><span id='topic+plot+2CcfScreenObs+2Cmissing-method'></span><span id='topic+plot.cfScreenObs'></span>

<h3>Description</h3>

<p>Plot temperature data from screen observations (degrees celsius) through time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'cfScreenObs,missing'
plot(
  x,
  y,
  ggtheme = c("grey", "gray", "bw", "linedraw", "light", "minimal", "classic"),
  scales = c("fixed", "free_x", "free_y", "free"),
  n_col = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot+2B2CcfScreenObs+2B2Cmissing-method_+3A_x">x</code></td>
<td>
<p>a cfScreenObs object.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfScreenObs+2B2Cmissing-method_+3A_y">y</code></td>
<td>
<p>missing.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfScreenObs+2B2Cmissing-method_+3A_ggtheme">ggtheme</code></td>
<td>
<p>character string (partially) matching the
<code><a href="ggplot2.html#topic+ggtheme">ggtheme</a></code> to be used for plotting, see
'Theme Selection' below.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfScreenObs+2B2Cmissing-method_+3A_scales">scales</code></td>
<td>
<p>character string partially matching the <code>scales</code> argument
in the <code>link[ggplot2]{facet_wrap}</code> function.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfScreenObs+2B2Cmissing-method_+3A_n_col">n_col</code></td>
<td>
<p>the number of columns of plots (default 1).</p>
</td></tr>
<tr><td><code id="plot+2B2CcfScreenObs+2B2Cmissing-method_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code><a href="ggplot2.html#topic+theme">theme</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Temperature data from screen observations include the air, and wet bulb,
temperature at the time the measurement was taken (dry bulb and wet bulb
respectively), and the dew point. The dew point is the air temperature at
which dew starts to form. That is the temperature to which a given air parcel
must be cooled at constant pressure and constant water vapour content in
order for saturation to occur.
</p>
<p>The resulting figure plots the dry bulb, wet bulb and dew point temperatures
on the same  scale, for each station.
</p>


<h3>References</h3>

<p><a href="https://cliflo.niwa.co.nz/pls/niwp/wh.do_help?id=ls_scr1">Screen Observation details</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot+2CcfDataList+2Cmissing-method">plot,cfDataList,missing-method</a></code> for general
information on default plotting of <code>cfData</code> and <code>cfDataList</code>
objects, and the links within. See <code><a href="#topic+cf_query">cf_query</a></code> for creating
<code>cfScreenObs</code> objects.
</p>
<p>Refer to <code><a href="ggplot2.html#topic+theme">theme</a></code> for more possible arguments to pass
to these methods.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Retrieve public temperature data from screen observations for the last week
# at Reefton Ews station

# Subtract 7 days from today's date to get the start date
last_week = paste(as.character(Sys.Date() - 7), 0)

reefton_screenobs = cf_query(cf_user(), cf_datatype(4, 1, 1), cf_station(),
                             start_date = last_week)

class(reefton_screenobs) # cfScreenObs object

# Plot the temperature data using the defaults
plot(reefton_screenobs)

# Enlarge the text and add the observations as points
library(ggplot2) # for element_text() and geom_point()
plot(reefton_screenobs, ggtheme = "bw", text = element_text(size = 16)) +
  geom_point(size = 3, shape = 1)

# Save the plot as a png to the current working directory
library(ggplot2) # for ggsave()
ggsave("my_screenobs_plot.png")

## End(Not run)
</code></pre>

<hr>
<h2 id='plot+2CcfSunshine+2Cmissing-method'>Plot Sunshine Hours</h2><span id='topic+plot+2CcfSunshine+2Cmissing-method'></span><span id='topic+plot.cfSunshine'></span>

<h3>Description</h3>

<p>Plot the duration of accumulated bright sunshine hours through time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'cfSunshine,missing'
plot(
  x,
  y,
  ggtheme = c("grey", "gray", "bw", "linedraw", "light", "minimal", "classic"),
  scales = c("fixed", "free_x", "free_y", "free"),
  n_col = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot+2B2CcfSunshine+2B2Cmissing-method_+3A_x">x</code></td>
<td>
<p>a cfSunshine object.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfSunshine+2B2Cmissing-method_+3A_y">y</code></td>
<td>
<p>missing.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfSunshine+2B2Cmissing-method_+3A_ggtheme">ggtheme</code></td>
<td>
<p>character string (partially) matching the
<code><a href="ggplot2.html#topic+ggtheme">ggtheme</a></code> to be used for plotting, see
'Theme Selection' below.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfSunshine+2B2Cmissing-method_+3A_scales">scales</code></td>
<td>
<p>character string partially matching the <code>scales</code> argument
in the <code>link[ggplot2]{facet_wrap}</code> function.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfSunshine+2B2Cmissing-method_+3A_n_col">n_col</code></td>
<td>
<p>the number of columns of plots (default 1).</p>
</td></tr>
<tr><td><code id="plot+2B2CcfSunshine+2B2Cmissing-method_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code><a href="ggplot2.html#topic+theme">theme</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+plot+2CcfDataList+2Cmissing-method">plot,cfDataList,missing-method</a></code> for general
information on default plotting of <code>cfData</code> and <code>cfDataList</code>
objects, and the links within. See <code><a href="#topic+cf_query">cf_query</a></code> for creating
<code>cfSunshine</code> objects.
</p>
<p>Refer to <code><a href="ggplot2.html#topic+theme">theme</a></code> for more possible arguments to pass
to these methods.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Retrieve public hourly sunshine data for the last 7 days at Reefton Ews
# station

# Subtract 7 days from today's date to get the start date
last_week = paste(as.character(Sys.Date() - 7), 0)

reefton_sun = cf_query(cf_user(), cf_datatype(5, 1, 2), cf_station(),
                       start_date = last_week)

class(reefton_sun) # cfSunshine object

# Plot the temperature data using the defaults
plot(reefton_sun)

# Enlarge the text and add the observations as points
library(ggplot2) # for element_text() and geom_point()
plot(reefton_sun, ggtheme = "bw", text = element_text(size = 16)) +
  geom_point(size = 3, shape = 1)

# Save the plot as a png to the current working directory
library(ggplot2) # for ggsave()
ggsave("my_sunshine_plot.png")

## End(Not run)
</code></pre>

<hr>
<h2 id='plot+2CcfTemp+2Cmissing-method'>Plot Temperature Range</h2><span id='topic+plot+2CcfTemp+2Cmissing-method'></span><span id='topic+plot.cfTemp'></span>

<h3>Description</h3>

<p>Plot minimum and maximum temperature data for a given period (degrees
celsius) through time, for each chosen CliFlo station.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'cfTemp,missing'
plot(
  x,
  y,
  ggtheme = c("grey", "gray", "bw", "linedraw", "light", "minimal", "classic"),
  scales = c("fixed", "free_x", "free_y", "free"),
  n_col = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot+2B2CcfTemp+2B2Cmissing-method_+3A_x">x</code></td>
<td>
<p>a cfTemp object.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfTemp+2B2Cmissing-method_+3A_y">y</code></td>
<td>
<p>missing.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfTemp+2B2Cmissing-method_+3A_ggtheme">ggtheme</code></td>
<td>
<p>character string (partially) matching the
<code><a href="ggplot2.html#topic+ggtheme">ggtheme</a></code> to be used for plotting, see
'Theme Selection' below.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfTemp+2B2Cmissing-method_+3A_scales">scales</code></td>
<td>
<p>character string partially matching the <code>scales</code> argument
in the <code>link[ggplot2]{facet_wrap}</code> function.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfTemp+2B2Cmissing-method_+3A_n_col">n_col</code></td>
<td>
<p>the number of columns of plots (default 1).</p>
</td></tr>
<tr><td><code id="plot+2B2CcfTemp+2B2Cmissing-method_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code><a href="ggplot2.html#topic+theme">theme</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This plotting method shows the temperature extremes as a grey region on the
plot, with a black line indicating the average temperature (if available).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot+2CcfDataList+2Cmissing-method">plot,cfDataList,missing-method</a></code> for general
information on default plotting of <code>cfData</code> and <code>cfDataList</code>
objects, and the links within. See <code><a href="#topic+cf_query">cf_query</a></code> for creating
<code>cfTemp</code> objects.
</p>
<p>Refer to <code><a href="ggplot2.html#topic+theme">theme</a></code> for more possible arguments to pass
to these methods.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Retrieve public hourly minimum and maximum temperature data for the last
week at Reefton Ews station

# Subtract 7 days from today's date to get the start date
last_week = paste(as.character(Sys.Date() - 7), 0)

reefton_temp = cf_query(cf_user(), cf_datatype(4, 2, 2), cf_station(),
                        start_date = last_week)

class(reefton_temp) # cfTemp object

# Plot the temperature data using the defaults
plot(reefton_temp)

# Enlarge the text and add the observations as points
library(ggplot2) # for element_text() and geom_point()
plot(reefton_temp, ggtheme = "bw", text = element_text(size = 16)) +
  geom_point(size = 3, shape = 1)

# Save the plot as a png to the current working directory
library(ggplot2) # for ggsave()
ggsave("my_temperature_plot.png")

## End(Not run)
</code></pre>

<hr>
<h2 id='plot+2CcfWind+2Cmissing-method'>Plot Clifro Wind Objects</h2><span id='topic+plot+2CcfWind+2Cmissing-method'></span><span id='topic+plot.cfWind'></span><span id='topic+direction_plot+2CcfWind+2Cmissing-method'></span><span id='topic+direction_plot'></span><span id='topic+direction_plot+2CcfDataList+2Cmissing-method'></span><span id='topic+direction_plot+2CcfDataList+2Cnumeric-method'></span><span id='topic+speed_plot+2CcfWind+2Cmissing-method'></span><span id='topic+speed_plot'></span><span id='topic+speed_plot+2CcfDataList+2Cmissing-method'></span><span id='topic+speed_plot+2CcfDataList+2Cnumeric-method'></span>

<h3>Description</h3>

<p>Various plot methods for exploring wind speed and direction patterns for
given CliFlo stations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'cfWind,missing'
plot(
  x,
  y,
  n_directions = 12,
  n_speeds = 5,
  speed_cuts = NULL,
  col_pal = "GnBu",
  ggtheme = c("grey", "gray", "bw", "linedraw", "light", "minimal", "classic"),
  n_col = 1,
  ...
)

## S4 method for signature 'cfWind,missing'
direction_plot(
  x,
  y,
  ggtheme = c("grey", "gray", "bw", "linedraw", "light", "minimal", "classic"),
  contours = 10,
  n_col = 1,
  ...
)

## S4 method for signature 'cfDataList,missing'
direction_plot(x, y, ...)

## S4 method for signature 'cfDataList,numeric'
direction_plot(x, y, ...)

## S4 method for signature 'cfWind,missing'
speed_plot(
  x,
  y,
  ggtheme = c("grey", "gray", "bw", "linedraw", "light", "minimal", "classic"),
  scales = c("fixed", "free_x", "free_y", "free"),
  n_col = 1,
  ...
)

## S4 method for signature 'cfDataList,missing'
speed_plot(x, y, ...)

## S4 method for signature 'cfDataList,numeric'
speed_plot(x, y, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot+2B2CcfWind+2B2Cmissing-method_+3A_x">x</code></td>
<td>
<p>a <code>cfWind</code> or <code>cfDataList</code> object.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfWind+2B2Cmissing-method_+3A_y">y</code></td>
<td>
<p>missing if <code>x</code> is a .<code>cfWind</code> object, otherwise a number
indicating the dataframe to plot in the <code>cfDataList</code> (defaults
to 1).</p>
</td></tr>
<tr><td><code id="plot+2B2CcfWind+2B2Cmissing-method_+3A_n_directions">n_directions</code></td>
<td>
<p>the number of direction bins to plot (petals on the
rose). The number of directions defaults to 12.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfWind+2B2Cmissing-method_+3A_n_speeds">n_speeds</code></td>
<td>
<p>the number of equally spaced wind speed bins to plot. This is
used if <code>spd_cuts</code> is NA (default 5).</p>
</td></tr>
<tr><td><code id="plot+2B2CcfWind+2B2Cmissing-method_+3A_speed_cuts">speed_cuts</code></td>
<td>
<p>numeric vector containing the cut points for the wind speed
intervals, or NA (default).</p>
</td></tr>
<tr><td><code id="plot+2B2CcfWind+2B2Cmissing-method_+3A_col_pal">col_pal</code></td>
<td>
<p>character string indicating the name of the
<code>RColorBrewer</code> colour palette to be
used for plotting, see 'Theme Selection' below.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfWind+2B2Cmissing-method_+3A_ggtheme">ggtheme</code></td>
<td>
<p>character string (partially) matching the
<code><a href="ggplot2.html#topic+ggtheme">ggtheme</a></code> to be used for plotting, see
'Theme Selection' below.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfWind+2B2Cmissing-method_+3A_n_col">n_col</code></td>
<td>
<p>the number of columns of plots (default 1).</p>
</td></tr>
<tr><td><code id="plot+2B2CcfWind+2B2Cmissing-method_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code><a href="ggplot2.html#topic+theme">theme</a></code>.</p>
</td></tr>
<tr><td><code id="plot+2B2CcfWind+2B2Cmissing-method_+3A_contours">contours</code></td>
<td>
<p>the number of contour lines to draw (default 10).</p>
</td></tr>
<tr><td><code id="plot+2B2CcfWind+2B2Cmissing-method_+3A_scales">scales</code></td>
<td>
<p>character string partially matching the <code>scales</code> argument
in the <code>link[ggplot2]{facet_wrap}</code> function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>x</code> is a <code>cfDataList</code>, by default the first datatype will be
plotted unless <code>y</code> is supplied.
</p>


<h3>Theme Selection</h3>

<p>For black and white windroses that may be preferred if plots are to be used
in journal articles for example, recommended <code>ggtheme</code>s are <code>'bw'</code>,
<code>'linedraw'</code>, <code>'minimal'</code> or <code>'classic'</code> and
the <code>col_pal</code> should be <code>'Greys'</code>. Otherwise, any of the sequential
<code>RColorBrewer</code> colour palettes are recommended for
colour plots.
</p>


<h3>Note</h3>

<p>If <code>x</code> is a <code>cfDataList</code> object and <code>y</code> refers to a
<span class="pkg">clifro</span> dataframe that is not a <code>cfWind</code> object then it will be
passed to another method, if available.
</p>
<p>The default <code>plot</code> method plots a different windrose for each CliFlo
station. The <code>direction_plot</code> method plots wind direction contours
through time to visualise temporal patterns in wind directions. The
<code>speed_plot</code> method plots the time series of wind speeds with a +/-
standard deviation region (if applicable).
</p>
<p>Given a value on the x-axis, the ends of the density function along the
y-axis are not constrained to be equal for any of the derivatives for the
<code>direction_plot</code> method. That is, the contours at direction = 0, do not
match the contours at direction = 360.
</p>
<p>@seealso <code><a href="#topic+plot+2CcfDataList+2Cmissing-method">plot,cfDataList,missing-method</a></code> for general
information on default plotting of <code>cfData</code> and <code>cfDataList</code>
objects, and the links within. See <code><a href="#topic+cf_query">cf_query</a></code> for creating
<code>cfWind</code> objects or <code><a href="#topic+windrose">windrose</a></code> for plotting any wind data.
Refer to <code><a href="ggplot2.html#topic+theme">theme</a></code> for more possible arguments to pass
to these methods. <code><a href="#topic+summary+2CcfWind-method">summary,cfWind-method</a></code> for summarising wind
information at each CliFlo station.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Retrieve maximum wind gust data at the Reefton Ews station from CliFlo
# (public data)
reefton_wind = cf_query(cf_user(), cf_datatype(2, 2, 1, 1), cf_station(),
                        start_date = "2012-01-01-00")

class(reefton_wind)

# Examples of the default plots --------------------------------------------

# Plot a windrose
plot(reefton_wind)

# Plot the wind direction contours
direction_plot(reefton_wind)

# Plot the wind speed time-series
speed_plot(reefton_wind)

# Examples of changing the defaults ----------------------------------------

# Plot black and white windroses
plot(reefton_wind, ggtheme = "bw", col_pal = "Greys")
plot(reefton_wind, ggtheme = "linedraw", col_pal = "Greys")
plot(reefton_wind, ggtheme = "classic", col_pal = "Greys")
plot(reefton_wind, ggtheme = "minimal", col_pal = "Greys")

# Plot the wind directions using 20 contours and the ggtheme 'classic'
direction_plot(reefton_wind, ggtheme = "classic", contours = 20)

# Enlarge all the text to 18pt
library(ggplot2) # for element_text() and geom_point()
direction_plot(reefton_wind, ggtheme = "classic", contours = 20,
               text = element_text(size = 18))

# Include the actual observations in the plots
direction_plot(reefton_wind) + geom_point(alpha = .2, size = 3)

speed_plot(reefton_wind, ggtheme = "classic", text = element_text(size = 16)) +
  geom_point(shape = 1, size = 3)
# or equivalently using base graphics:
plot(reefton_wind$Date, reefton_wind$Speed, type = 'o',
     xlab = NA, ylab = "Daily max gust (m/s)", las = 1, main = "Reefton Ews")

# Example of plotting a cfDataList -----------------------------------------
# Collect both surface wind run and hourly surface wind observations from
# Reefton Ews
reefton_list = cf_query(cf_user(), cf_datatype(2, 1, 1:2, 1),
                        cf_station(), "2012-01-01 00", "2012-02-01 00")

reefton_list

class(reefton_list) #cfDataList

# Plot the first (default) dataframe
plot(reefton_list) # Error - no wind directions for wind run datatypes
# Try speed_plot instead
speed_plot(reefton_list)

# Plot the second dataframe in the cfDataList
plot(reefton_list, 2)           # identical to plot(reefton_list[2])
speed_plot(reefton_list, 2)     # identical to speed_plot(reefton_list[2])
direction_plot(reefton_list, 2) # identical to direction_plot(reefton_list[2])

# Save the ggplot externally -----------------------------------------------

# Save the plot as a png to the current working directory
library(ggplot2) # for ggsave()
ggsave("my_wind_plot.png")

## End(Not run)
</code></pre>

<hr>
<h2 id='plot.cfDataList'>Default Clifro Plotting</h2><span id='topic+plot.cfDataList'></span><span id='topic+plot+2CcfDataList+2Cnumeric-method'></span><span id='topic+plot+2CcfDataList+2Cmissing-method'></span><span id='topic+plot+2CcfOther+2Cmissing-method'></span>

<h3>Description</h3>

<p>Plot <span class="pkg">clifro</span> data based on the datatype.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'cfDataList,numeric'
plot(x, y, ...)

## S4 method for signature 'cfDataList,missing'
plot(x, y, ...)

## S4 method for signature 'cfOther,missing'
plot(x, y)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.cfDataList_+3A_x">x</code></td>
<td>
<p>a <code>cfData</code> or <code>cfDataList</code> object.</p>
</td></tr>
<tr><td><code id="plot.cfDataList_+3A_y">y</code></td>
<td>
<p>missing for <code>cfData</code> objects, or a number representing the
dataframe to plot if <code>x</code> is a <code>cfDataList</code> object.</p>
</td></tr>
<tr><td><code id="plot.cfDataList_+3A_...">...</code></td>
<td>
<p>arguments passed onto the different plotting methods.
</p>
<p>These methods are intended to simplify the data visualisation and exploration
of CliFlo data. The type of plot is determined by the type of the data output
from a <span class="pkg">clifro</span> query. All of these methods plot individual plots for
each CliFlo station (if there is more than one in the query). If <code>x</code> is
a <code>cfDataList</code>, by default the first datatype will be plotted unless
<code>y</code> is supplied.
</p>
<p>The following table links the datatypes to the corresponding plot methods:
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>Datatype</strong> </td><td style="text-align: left;"> <strong>Method</strong></td>
</tr>
<tr>
 <td style="text-align: left;">
Wind </td><td style="text-align: left;"> <code><a href="#topic+plot.cfWind">plot.cfWind</a></code> for windrose, wind speed and direction
contour plots</td>
</tr>
<tr>
 <td style="text-align: left;">
Rain </td><td style="text-align: left;"> <code><a href="#topic+plot.cfRain">plot.cfRain</a></code> for plotting rainfall (mm) through time</td>
</tr>
<tr>
 <td style="text-align: left;">
Screen Obs </td><td style="text-align: left;"> <code><a href="#topic+plot.cfScreenObs">plot.cfScreenObs</a></code> for time series plots of air,
wet bulb, and dew-point temperature plots</td>
</tr>
<tr>
 <td style="text-align: left;">
Max/Min Temp </td><td style="text-align: left;"> <code><a href="#topic+plot.cfTemp">plot.cfTemp</a></code> for maximum, minimum and
average temperature time series plots</td>
</tr>
<tr>
 <td style="text-align: left;">
Earth Temp </td><td style="text-align: left;"> <code><a href="#topic+plot.cfEarthTemp">plot.cfEarthTemp</a></code> for earth temperature
time series plots</td>
</tr>
<tr>
 <td style="text-align: left;">
Sunshine </td><td style="text-align: left;"> <code><a href="#topic+plot.cfSunshine">plot.cfSunshine</a></code> for accumulated, hourly or daily
sunshine, time series plots</td>
</tr>
<tr>
 <td style="text-align: left;">
Pressure </td><td style="text-align: left;"> <code><a href="#topic+plot.cfPressure">plot.cfPressure</a></code> for mean sea level atmospheric
pressure time series plots</td>
</tr>
<tr>
 <td style="text-align: left;">
Other data </td><td style="text-align: left;"> No default plot methods</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+cf_query">cf_query</a></code> to retrieve the CliFlo data and create
<code>cfData</code> objects.
</p>
<p>Refer to <code><a href="ggplot2.html#topic+theme">theme</a></code> for more possible arguments to pass
to these methods.
</p>

<hr>
<h2 id='summary+2CcfUser-method'>Summarise User Information</h2><span id='topic+summary+2CcfUser-method'></span>

<h3>Description</h3>

<p>Show the subscription status for the <span class="pkg">clifro</span> user
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'cfUser'
summary(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary+2B2CcfUser-method_+3A_object">object</code></td>
<td>
<p>an object of class <code>cfUser</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='summary+2CcfWind-method'>Summarise Clifro Wind Data</h2><span id='topic+summary+2CcfWind-method'></span>

<h3>Description</h3>

<p>This is a summary method for <code>cfWind</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'cfWind'
summary(object, calm_wind = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary+2B2CcfWind-method_+3A_object">object</code></td>
<td>
<p>a <code>cfWind</code> object.</p>
</td></tr>
<tr><td><code id="summary+2B2CcfWind-method_+3A_calm_wind">calm_wind</code></td>
<td>
<p>a single number containing the wind speed that is considered
calm.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A dataframe is returned containing the percentage of calm days
(wind speed &gt;= <code>calm_days</code>), percentage of variable days (wind speed =
990), and quantiles from the empirical cumulative distribution functions for
each CliFlo station at which there is wind data.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.cfWind">plot.cfWind</a></code> for default plotting of
clifro wind data, and <code><a href="#topic+cf_query">cf_query</a></code> for creating <code>cfWind</code>
objects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Retrieve maximum wind gust data at the Reefton Ews station from CliFlo
# (public data)
reefton_wind = cf_query(cf_user(), cf_datatype(2, 2, 1, 1), cf_station(),
                        start_date = "2012-01-01-00")

class(reefton_wind) # cfWind object

# Summarise the information
summary(reefton_wind)

## End(Not run)
</code></pre>

<hr>
<h2 id='valid_cfuser'>Validation Functions For The <code>cfUser</code> Class</h2><span id='topic+valid_cfuser'></span><span id='topic+cf_login'></span><span id='topic+cf_logout'></span>

<h3>Description</h3>

<p>These internal functions are used by the <code><a href="#topic+cf_user">cf_user</a></code> constructor
function to ensure the user has a valid subscription to CliFlo.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cf_login(object, ...)

cf_logout(object, msg = TRUE, ...)

valid_cfuser(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="valid_cfuser_+3A_object">object</code></td>
<td>
<p>S4 object which inherits the <code>cfUser</code> class</p>
</td></tr>
<tr><td><code id="valid_cfuser_+3A_...">...</code></td>
<td>
<p>Other options passed to the <code><a href="httr.html#topic+GET">GET</a></code> or <code><a href="httr.html#topic+POST">POST</a></code> functions.</p>
</td></tr>
<tr><td><code id="valid_cfuser_+3A_msg">msg</code></td>
<td>
<p>Display a 'successful logout' message, defaults to
<code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>cf_login</code> initiates a curl handle storing the cookies in the current
<span class="rlang"><b>R</b></span> session's temporary directory. It then POSTs the user credentials to the
CliFlo login page and stores the resultant <code>h1</code> heading to check for the
string 'Info'. The cookies are kept for future (immediate) use.
</p>
<p><code>cf_logout</code> points the curl handle to the existing cookie session
initiated with <code>cf_login</code>. It reads the header information from the
cliflo logout page to ensure no HTTP error and logs the user out on
cliflo and deletes the cookies. This should be (is) called immediately after
<code>cf_login</code> in any function requiring a login, using
<code><a href="base.html#topic+on.exit">on.exit</a></code> to ensure the user isn't still logged in on the server,
after the function call, for any reason.
</p>
<p><code>valid_cfuser</code> is the validation function for the <code>cfUser</code> class
and uses  <code>cf_login</code> to ensure the credentials are authenticated on the
CliFlo server and then (<code>cf_</code>)logs out immediately afterwards. It also
ensures the user provides exactly one username and password - except for
'public' users.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cf_user("public")                    # Returns a valid object
cf_user("bad_name", "bad_password")    # Bad Login

## End(Not run)
</code></pre>

<hr>
<h2 id='windrose'>Plot a windrose</h2><span id='topic+windrose'></span>

<h3>Description</h3>

<p>Plot a windrose showing the wind speed and direction for given facets using
<span class="pkg">ggplot2</span>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>windrose(
  speed,
  direction,
  facet,
  n_directions = 12,
  n_speeds = 5,
  speed_cuts = NA,
  col_pal = "GnBu",
  ggtheme = c("grey", "gray", "bw", "linedraw", "light", "minimal", "classic"),
  legend_title = "Wind Speed",
  calm_wind = 0,
  variable_wind = 990,
  n_col = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="windrose_+3A_speed">speed</code></td>
<td>
<p>numeric vector of wind speeds.</p>
</td></tr>
<tr><td><code id="windrose_+3A_direction">direction</code></td>
<td>
<p>numeric vector of wind directions.</p>
</td></tr>
<tr><td><code id="windrose_+3A_facet">facet</code></td>
<td>
<p>character or factor vector of the facets used to plot the various
windroses.</p>
</td></tr>
<tr><td><code id="windrose_+3A_n_directions">n_directions</code></td>
<td>
<p>the number of direction bins to plot (petals on the rose).
The number of directions defaults to 12.</p>
</td></tr>
<tr><td><code id="windrose_+3A_n_speeds">n_speeds</code></td>
<td>
<p>the number of equally spaced wind speed bins to plot. This is
used if <code>speed_cuts</code> is <code>NA</code> (default 5).</p>
</td></tr>
<tr><td><code id="windrose_+3A_speed_cuts">speed_cuts</code></td>
<td>
<p>numeric vector containing the cut points for the wind speed
intervals, or <code>NA</code> (default).</p>
</td></tr>
<tr><td><code id="windrose_+3A_col_pal">col_pal</code></td>
<td>
<p>character string indicating the name of the
<code>RColorBrewer</code> colour palette to be
used for plotting, see 'Theme Selection' below.</p>
</td></tr>
<tr><td><code id="windrose_+3A_ggtheme">ggtheme</code></td>
<td>
<p>character string (partially) matching the
<code><a href="ggplot2.html#topic+ggtheme">ggtheme</a></code> to be used for plotting, see
'Theme Selection' below.</p>
</td></tr>
<tr><td><code id="windrose_+3A_legend_title">legend_title</code></td>
<td>
<p>character string to be used for the legend title.</p>
</td></tr>
<tr><td><code id="windrose_+3A_calm_wind">calm_wind</code></td>
<td>
<p>the upper limit for wind speed that is considered calm
(default 0).</p>
</td></tr>
<tr><td><code id="windrose_+3A_variable_wind">variable_wind</code></td>
<td>
<p>numeric code for variable winds (if applicable).</p>
</td></tr>
<tr><td><code id="windrose_+3A_n_col">n_col</code></td>
<td>
<p>The number of columns of plots (default 1).</p>
</td></tr>
<tr><td><code id="windrose_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code><a href="ggplot2.html#topic+theme">theme</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is intended to be used as a stand-alone function for any wind dataset. A
different windrose is plotted for each level of the faceting variable which
is coerced to a factor if necessary. The facets will generally be the station
where the data were collected, seasons or dates. Currently only one faceting
variable is allowed and is passed to <code><a href="ggplot2.html#topic+facet_wrap">facet_wrap</a></code> with
the formula <code>~facet</code>.
</p>


<h3>Value</h3>

<p>a <code>ggplot</code> object.
</p>


<h3>Theme Selection</h3>

<p>For black and white windroses that may be preferred if plots are to be used
in journal articles for example, recommended <code>ggtheme</code>s are <code>'bw'</code>,
<code>'linedraw'</code>, <code>'minimal'</code> or <code>'classic'</code> and
the <code>col_pal</code> should be <code>'Greys'</code>. Otherwise, any of the sequential
<code>RColorBrewer</code> colour palettes are recommended for
colour plots.
</p>


<h3>See Also</h3>

<p><code><a href="ggplot2.html#topic+theme">theme</a></code> for more possible arguments to pass to
<code>windrose</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create some dummy wind data with predominant south to westerly winds, and
# occasional yet higher wind speeds from the NE (not too dissimilar to
# Auckland).

wind_df = data.frame(wind_speeds = c(rweibull(80, 2, 4), rweibull(20, 3, 9)),
                     wind_dirs = c(rnorm(80, 135, 55), rnorm(20, 315, 35)) %% 360,
                     station = rep(rep(c("Station A", "Station B"), 2),
                                   rep(c(40, 10), each = 2)))

# Plot a simple windrose using all the defaults, ignoring any facet variable
with(wind_df, windrose(wind_speeds, wind_dirs))

# Create custom speed bins, add a legend title, and change to a B&amp;W theme
with(wind_df, windrose(wind_speeds, wind_dirs,
                       speed_cuts = c(3, 6, 9, 12),
                       legend_title = "Wind Speed\n(m/s)",
                       legend.title.align = .5,
                       ggtheme = "bw",
                       col_pal = "Greys"))

# Note that underscore-separated arguments come from the windrose method, and
# period-separated arguments come from ggplot2::theme().

# Include a facet variable with one level
with(wind_df, windrose(wind_speeds, wind_dirs, "Artificial Auckland Wind"))

# Plot a windrose for each level of the facet variable (each station)
with(wind_df, windrose(wind_speeds, wind_dirs, station, n_col = 2))

## Not run: 
# Save the plot as a png to the current working directory
library(ggplot2)
ggsave("my_windrose.png")

## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
