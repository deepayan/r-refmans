<!DOCTYPE html><html><head><title>Help for package rPACI</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rPACI}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#analyzeDataset'><p>Analysis of a single corneal topography dataset</p></a></li>
<li><a href='#analyzeEvolution'><p>Analysis of repeated measures of the same patient over time</p></a></li>
<li><a href='#analyzeFile'><p>Analysis of a single corneal topography file</p></a></li>
<li><a href='#analyzeFolder'><p>Analysis of all corneal topography files in a folder</p></a></li>
<li><a href='#computePlacidoIndices'><p>Compute the Placido irregularity indices of a corneal dataset</p></a></li>
<li><a href='#plotSingleCornea'><p>Plot the corneal topography and a summary plot of the Placido irregularity indices</p></a></li>
<li><a href='#readCSO'><p>Read a corneal topography file in CSO format</p></a></li>
<li><a href='#readFile'><p>Read a corneal topography file in any available format (recommended by default)</p></a></li>
<li><a href='#readrPACI'><p>Read a corneal topography file in rPACI format</p></a></li>
<li><a href='#simulateData'><p>Simulate data as measured by a Placido disk corneal topographer</p></a></li>
<li><a href='#writerPACI'><p>Save to disk a dataset in the format used by rPACI</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Placido Analysis of Corneal Irregularity</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Analysis of corneal data obtained from a Placido disk corneal topographer with calculation of irregularity indices. This package performs analyses of corneal data obtained from a Placido disk corneal topographer, with the calculation of the Placido irregularity indices and the posterior analysis. The package is intended to be easy to use by a practitioner, providing a simple interface and yielding easily interpretable results. A corneal topographer is an ophthalmic clinical device that obtains measurements in the cornea (the anterior part of the eye). A Placido disk corneal topographer makes use of the Placido disk [Rowsey et al. (1981)]&lt;<a href="https://doi.org/10.1001%2Farchopht.1981.03930011093022">doi:10.1001/archopht.1981.03930011093022</a>&gt;, which produce a circular pattern of measurement nodes. The raw information measured by such a topographer is used by practitioners to analyze curvatures, to study optical aberrations, or to diagnose specific conditions of the eye (e.g. keratoconus, an important corneal disease). The rPACI package allows the calculation of the corneal irregularity indices described in [Castro-Luna et al. (2020)]&lt;<a href="https://doi.org/10.1016%2Fj.clae.2019.12.006">doi:10.1016%2Fj.clae.2019.12.006</a>&gt;, [Ramos-Lopez et al. (2013)]&lt;<a href="https://doi.org/10.1097%2FOPX.0b013e3182843f2a">doi:10.1097%2FOPX.0b013e3182843f2a</a>&gt;, and [Ramos-Lopez et al. (2011)]&lt;<a href="https://doi.org/10.1097%2Fopx.0b013e3182279ff8">doi:10.1097/opx.0b013e3182279ff8</a>&gt;. It provides a simple interface to read corneal topography data files as exported by a typical Placido disk topographer, to compute the irregularity indices mentioned before, and to display summary plots that are easy to interpret for a clinician.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, graphics, grDevices, bnlearn, ggplot2, tidyr, ggpubr,
rlang</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>LazyData:</td>
<td>false</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Darío Ramos-López &lt;dramoslopez@ual.es&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://cran.r-project.org/package=rPACI">https://cran.r-project.org/package=rPACI</a>,
<a href="https://github.com/dariorlual/rPACI/">https://github.com/dariorlual/rPACI/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/dariorlual/rPACI/issues">https://github.com/dariorlual/rPACI/issues</a></td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-11-04 00:10:07 UTC</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-11-03 18:47:51 UTC; Usuario</td>
</tr>
<tr>
<td>Author:</td>
<td>Darío Ramos-López <a href="https://orcid.org/0000-0002-6127-6559"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Ana D. Maldonado <a href="https://orcid.org/0000-0001-8253-2526"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
</table>
<hr>
<h2 id='analyzeDataset'>Analysis of a single corneal topography dataset</h2><span id='topic+analyzeDataset'></span>

<h3>Description</h3>

<p>Analyze a corneal topography dataset (a <code>data.frame</code> in the rPACI format). This function combines the two
operations of functions <a href="#topic+computePlacidoIndices">computePlacidoIndices</a> and <a href="#topic+plotSingleCornea">plotSingleCornea</a>. It assumes a valid 
rPACI <code>data.set</code> is already available on memory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analyzeDataset(dataset, drawplot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="analyzeDataset_+3A_dataset">dataset</code></td>
<td>
<p>A corneal topography dataset, loaded from a file using the function <a href="#topic+readFile">readFile</a>, simulated using <a href="#topic+simulateData">simulateData</a>, or by other ways (as long as it meets the dataset requirements).</p>
</td></tr>
<tr><td><code id="analyzeDataset_+3A_drawplot">drawplot</code></td>
<td>
<p>An optional parameter indicating whether a plot of results should be displayed or not (by default, <code>TRUE</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The dataset is checked to verify it matches the rPACI format: it must contain 3 columns: x, y (with the X and Y Cartesian
coordinates of data points) and ring index (1, 2, ...). The ring index column must contain positive integer numbers. 
The dataset must not contain <code>NA</code> values. Finally, all the rings must contain the same number of data points.
</p>
<p>More details about supported file formats can be found in 
<a href="../doc/topographersDataFormat.html"><code>vignette("topographersDataFormat", package = "rPACI")</code></a>, 
and about using <code>rPACI</code> in <a href="../doc/packageUsage.html"><code>vignette("packageUsage", package = "rPACI")</code></a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate a sample dataset
dataset = simulateData(rings = 15, ringRadiiPerturbation = 0.7)

# Analyze this dataset:
analyzeDataset(dataset)
</code></pre>

<hr>
<h2 id='analyzeEvolution'>Analysis of repeated measures of the same patient over time</h2><span id='topic+analyzeEvolution'></span>

<h3>Description</h3>

<p>Analyze the evolution of a patient over time. This function returns the Placido irregularity indices per time step
and two temporal plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analyzeEvolution(data, fileExtension = "txt")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="analyzeEvolution_+3A_data">data</code></td>
<td>
<p>Either 1) the path of a folder that contains corneal topography files, 
as exported by Placido disks corneal topographers, or 2) a list containing properly formatted data
(loaded from a file using the function <a href="#topic+readFile">readFile</a>, 
simulated using <a href="#topic+simulateData">simulateData</a>, or by other ways, as long as it meets the dataset requirements).</p>
</td></tr>
<tr><td><code id="analyzeEvolution_+3A_fileextension">fileExtension</code></td>
<td>
<p>If data is a path, specify the file extension of the corneal topography files 
in the folder. It assumes all files with the given extension are corneal topography files of a single patient 
(by default, &quot;txt&quot;).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the data are loaded from a folder, it will assume that the temporal arrangement is the alphabetical order
of the filenames. Therefore, it is advised to use proper file names, for instance using this date format: 
'YYYY-MM-DD.txt'.
</p>
<p>Moreover, the folder should contain data measures of just one patient, since the function will read all the files
(with the given extension) of the specified folder. On the other hand, if the data are stored in a list, it will
be assumed that the temporal order corresponds with the index of the dataset in the list.
</p>
<p>More details about supported file formats can be found in 
<a href="../doc/topographersDataFormat.html"><code>vignette("topographersDataFormat", package = "rPACI")</code></a>, 
and about using <code>rPACI</code> in <a href="../doc/packageUsage.html"><code>vignette("packageUsage", package = "rPACI")</code></a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># EXAMPLE 1
# Simulate the patient's measures over time
 dataT1 = simulateData(rings = 12, maximumMireDisplacement = 0.15, mireDisplacementAngle = 10)
 dataT2 = simulateData(rings = 12, maximumMireDisplacement = 0.15, mireDisplacementAngle = 45)
 dataT3 = simulateData(rings = 12, maximumMireDisplacement = 0.2, mireDisplacementAngle = 50)
 
# Create a list containing the data
data = list(
 dataT1 = dataT1,
 dataT2 = dataT2,
 dataT3 = dataT3
)

# Analyze the data over time
analyzeEvolution(data)

# EXAMPLE 2
# Specify a folder path to analyze a patient's evolution over time
analyzeEvolution(system.file("extdata/evolution/", package="rPACI"))
</code></pre>

<hr>
<h2 id='analyzeFile'>Analysis of a single corneal topography file</h2><span id='topic+analyzeFile'></span>

<h3>Description</h3>

<p>Analyze a corneal topography file. This function combines together the three operations performed
by the functions <a href="#topic+readFile">readFile</a>, <a href="#topic+computePlacidoIndices">computePlacidoIndices</a>,
and <a href="#topic+plotSingleCornea">plotSingleCornea</a>.
The result is a <code>data.frame</code> in the same format given by <a href="#topic+computePlacidoIndices">computePlacidoIndices</a>.
</p>
<p>More details about supported file formats can be found in 
<a href="../doc/topographersDataFormat.html"><code>vignette("topographersDataFormat", package = "rPACI")</code></a>, 
and about using <code>rPACI</code> in <a href="../doc/packageUsage.html"><code>vignette("packageUsage", package = "rPACI")</code></a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analyzeFile(path, drawplot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="analyzeFile_+3A_path">path</code></td>
<td>
<p>A corneal topography file, as exported by a Placido disk corneal topographer.</p>
</td></tr>
<tr><td><code id="analyzeFile_+3A_drawplot">drawplot</code></td>
<td>
<p>An optional parameter indicating whether a plot of results should be displayed or not (by default, <code>TRUE</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> containing the Placido irregularity indices as well as the diagnose, with a single row and columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>Diagnose</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> A text label indicating the diagnose, according to the value of GLPI</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>NBI</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of NBI index (in the range 0-100).</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>GLPI</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of GLPI index (in the range 0-100).</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>PI_1</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of PI_1 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>PI_2</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of PI_2 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>PI_3</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of PI_3 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>SL</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of SL index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>AR_1</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of AR_1 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>AR_2</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of AR_2 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>AR_3</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of AR_3 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>AR_4</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of AR_4 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>AR_5</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of AR_5 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">      
</td>
</tr>

</table>



<h3>Examples</h3>

<pre><code class='language-R'># Read the file, compute the indices and show results in one step with:
results = analyzeFile(system.file("extdata","N01.txt", package="rPACI"))

# The previous command is equivalent to:
dataset = readFile(system.file("extdata","N01.txt", package="rPACI"))
results = computePlacidoIndices(dataset)
# If drawplot=TRUE, then it also performs:
plotSingleCornea(dataset, results)
</code></pre>

<hr>
<h2 id='analyzeFolder'>Analysis of all corneal topography files in a folder</h2><span id='topic+analyzeFolder'></span>

<h3>Description</h3>

<p>This function analyzes all corneal topography files that are stored in a common folder. It is 
equivalent to use <a href="#topic+analyzeFile">analyzeFile</a> on each file in the folder, and then binding the results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analyzeFolder(
  path,
  fileExtension = "txt",
  individualPlots = FALSE,
  summaryPlot = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="analyzeFolder_+3A_path">path</code></td>
<td>
<p>The path of a folder which contains corneal topography files, as exported by Placido disks corneal topographers.</p>
</td></tr>
<tr><td><code id="analyzeFolder_+3A_fileextension">fileExtension</code></td>
<td>
<p>The file extension of the corneal topography files in the folder (&quot;txt&quot; by default).</p>
</td></tr>
<tr><td><code id="analyzeFolder_+3A_individualplots">individualPlots</code></td>
<td>
<p>An optional logical parameter (by default, FALSE) indicating whether the plot for each file should be displayed or not.</p>
</td></tr>
<tr><td><code id="analyzeFolder_+3A_summaryplot">summaryPlot</code></td>
<td>
<p>An optional logical parameter (by default, FALSE) indicating whether a summary plot should be displayed or not.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function assumes all files in the folder that have the extension given by the argument <code>fileExtension</code> 
(&quot;txt&quot;, by default) are corneal topography files and are to be processed. 
The result is a <code>data.frame</code> in the same format yield by <a href="#topic+computePlacidoIndices">computePlacidoIndices</a> or <a href="#topic+analyzeFile">analyzeFile</a>,
but with as many rows as matching files were found in the folder.
</p>
<p>More details about supported file formats can be found in 
<a href="../doc/topographersDataFormat.html"><code>vignette("topographersDataFormat", package = "rPACI")</code></a>, 
and about using <code>rPACI</code> in <a href="../doc/packageUsage.html"><code>vignette("packageUsage", package = "rPACI")</code></a>.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> containing the Placido irregularity indices as well as the diagnose, with as many rows as data files in the folder, and columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>Diagnose</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> A text label indicating the diagnose, according to the value of GLPI</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>NBI</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of NBI index (in the range 0-100).</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>GLPI</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of GLPI index (in the range 0-100).</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>PI_1</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of PI_1 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>PI_2</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of PI_2 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>PI_3</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of PI_3 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>SL</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of SL index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>AR_1</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of AR_1 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>AR_2</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of AR_2 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>AR_3</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of AR_3 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>AR_4</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of AR_4 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>AR_5</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of AR_5 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">      
</td>
</tr>

</table>



<h3>Examples</h3>

<pre><code class='language-R'># This analyzes together all the corneal topography example files included in rPACI:
## Not run: 
analyzeFolder(system.file("extdata",package="rPACI"))

## End(Not run)
</code></pre>

<hr>
<h2 id='computePlacidoIndices'>Compute the Placido irregularity indices of a corneal dataset</h2><span id='topic+computePlacidoIndices'></span>

<h3>Description</h3>

<p>This function computes a set of indices or metrics from a <code>data.frame</code> which contains points measured from 
the cornea. The dataset may have been obtained reading from a corneal topography file with <a href="#topic+readFile">readFile</a> 
or simulated with <a href="#topic+simulateData">simulateData</a>. These indices allow to discriminate between normal and irregular 
corneas. For more information on the indices and their precise mathematical definitions, see 
<a href="../doc/indicesDefinition.html"><code>vignette("indicesDefinition", package = "rPACI")</code></a> or the references below.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computePlacidoIndices(
  datasetRings,
  truncateIndicesAt150 = TRUE,
  useMaxRings = 15
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computePlacidoIndices_+3A_datasetrings">datasetRings</code></td>
<td>
<p>A dataset containing data points of a corneal topography, as given by <a href="#topic+readFile">readFile</a> or <a href="#topic+simulateData">simulateData</a>.</p>
</td></tr>
<tr><td><code id="computePlacidoIndices_+3A_truncateindicesat150">truncateIndicesAt150</code></td>
<td>
<p>A boolean value (by default <code>TRUE</code>) indicating whether the primary indices should be truncated at 150 (so they are in the range 0-150) or not.</p>
</td></tr>
<tr><td><code id="computePlacidoIndices_+3A_usemaxrings">useMaxRings</code></td>
<td>
<p>A positive integer value (by default 15) to choose the maximum number of innermost rings to use (as long as there are enough).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Placido irregularity indices can be computed from a <code>data.frame</code> in the format given by the functions
<a href="#topic+readFile">readFile</a> (also with <a href="#topic+readCSO">readCSO</a> or <a href="#topic+readrPACI">readrPACI</a>) or <a href="#topic+simulateData">simulateData</a>.
</p>
<p>These irregularity indices can be split into two categories: primary and combined indices. 
The primary indices are: PI_1, PI_2, PI_3, SL, AR_1, AR_2, AR_3, AR_4, AR_5.
They all measure certain geometrical properties of the data distribution. Among these, the first 4 indices are 
especially important for the detection of keratoconus. Based on them, other combined indices are 
computed: GLPI (a generalized linear model) and NBI (naive Bayes index).
</p>
<p>For more information on these indices and their precise mathematical definitions, see 
<a href="../doc/indicesDefinition.html"><code>vignette("indicesDefinition", package = "rPACI")</code></a> or the references below.
</p>
<p>They were introduced and validated with real datasets in 3 scientific papers (see the references below). In these 
papers, all indices demonstrated a good sensitivity for detection of keratoconus, a corneal disease. For more
details about corneal topography and keratoconus, see <a href="../doc/topographersDataFormat.html"><code>vignette("topographersDataFormat", package = "rPACI")</code></a>
</p>
<p>The results include the values of the indices (0 meaning normal, and a large positive value meaning irregular, 
check the range for each index) plus a diagnose, which is either &quot;Irregular cornea&quot;, &quot;Suspect cornea&quot; or 
&quot;Normal cornea&quot;, depending on the value of the combined index GLPI.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> containing the Placido irregularity indices as well as the diagnose, with columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>Diagnose</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> A text label indicating the diagnose, according to the value of GLPI</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>NBI</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of NBI index (in the range 0-100).</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>GLPI</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of GLPI index (in the range 0-100).</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>PI_1</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of PI_1 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>PI_2</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of PI_2 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>PI_3</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of PI_3 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>SL</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of SL index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>AR_1</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of AR_1 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>AR_2</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of AR_2 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>AR_3</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of AR_3 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>AR_4</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of AR_4 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">   
  <code>AR_5</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> The value of AR_5 index (usually in the range 0-150).</td>
</tr>
<tr>
 <td style="text-align: left;">      
</td>
</tr>

</table>



<h3>References</h3>

<p>Castro-Luna, Gracia M., Andrei Martinez-Finkelshtein, and Dario Ramos-Lopez. 2020. &quot;Robust Keratoconus Detection with Bayesian Network Classifier for Placido Based Corneal Indices.&quot; Contact Lens and Anterior Eye 43 (4): 366-72. doi: <a href="https://doi.org/10.1016/j.clae.2019.12.006">10.1016/j.clae.2019.12.006</a>.
</p>
<p>Ramos-Lopez, Dario, Andrei Martinez-Finkelshtein, Gracia M. Castro-Luna, Neus Burguera-Gimenez, Alfredo Vega-Estrada, David Pinero, and Jorge L. Alio. 2013. &quot;Screening Subclinical Keratoconus with Placido-Based Corneal Indices.&quot; Optometry and Vision Science 90 (4): 335-43. doi: <a href="https://doi.org/10.1097/opx.0b013e3182843f2a">10.1097/opx.0b013e3182843f2a</a>.
</p>
<p>Ramos-Lopez, Dario, Andrei Martinez-Finkelshtein, Gracia M. Castro-Luna, David Pinero, and Jorge L. Alio. 2011. &quot;Placido-Based Indices of Corneal Irregularity.&quot; Optometry and Vision Science 88 (10): 1220-31. doi: <a href="https://doi.org/10.1097/opx.0b013e3182279ff8">10.1097/opx.0b013e3182279ff8</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Read the file 'N02.txt' which is a real corneal topography (from a normal eye)
# that was measured with a CSO device:
dataset = readFile(system.file("extdata","N02.txt", package="rPACI"))

# Compute its Placido irregularity indices with this function:
results = computePlacidoIndices(dataset)
results
</code></pre>

<hr>
<h2 id='plotSingleCornea'>Plot the corneal topography and a summary plot of the Placido irregularity indices</h2><span id='topic+plotSingleCornea'></span>

<h3>Description</h3>

<p>Draw a three-part plot summarizing the corneal topography analysis, based on the Placido irregularity
indices calculated by the function <a href="#topic+computePlacidoIndices">computePlacidoIndices</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotSingleCornea(dataset, PlacidoIndices, filename = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotSingleCornea_+3A_dataset">dataset</code></td>
<td>
<p>A <code>data.frame</code> containing the corneal topography points, with columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>x</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> The X Cartesian coordinates of the points</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>y</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> The Y Cartesian coordinates of the points</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>ring index</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> Number or index of the ring to which each point belongs</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>
</td></tr>
<tr><td><code id="plotSingleCornea_+3A_placidoindices">PlacidoIndices</code></td>
<td>
<p>A dataset of results as given by the function <a href="#topic+computePlacidoIndices">computePlacidoIndices</a> or <a href="#topic+analyzeFile">analyzeFile</a>.</p>
</td></tr>
<tr><td><code id="plotSingleCornea_+3A_filename">filename</code></td>
<td>
<p>An optional character argument, with the file name used to read the data (by default, <code>NULL</code>; if specified, the filename is displayed on the plot).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function draws a 3-column plot, with the corneal topography in <code>dataset</code> plotted on the left, 
the value of index GLPI taken from <code>PlacidoIndices</code> on the middle, and a boxplot of some of the 
Placido indices on the right (with the values of PI_1, PI_2, PI_3 and SL) taken from <code>PlacidoIndices</code>.
</p>
<p>For the two latter columns, the ranges of values that should be considered normal, suspect or irregular
have been depicted with different colors (green, orange and red respectively). The thresholds for these
divisions are 30 (between normal (green) and suspect (orange) zones) and 70 (between suspect (orange) 
and irregular (red) zones). 
</p>
<p>The scales for these two plots are in general different, as GLPI ranges from 0 to 100, whereas the 
primary Placido irregularity indices range from 0 to 150 by default.
</p>
<p>Consult more information about the use of <code>rPACI</code>, including the available plots, 
in <a href="../doc/packageUsage.html"><code>vignette("packageUsage", package = "rPACI")</code></a>,
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Read a corneal topography from a file
dataset = readFile(system.file("extdata","K03.txt", package="rPACI"))

# Compute the Placido irregularity indices with:
results = computePlacidoIndices(dataset)

# Draw the corneal topography along the results with:
plotSingleCornea(dataset, results)
</code></pre>

<hr>
<h2 id='readCSO'>Read a corneal topography file in CSO format</h2><span id='topic+readCSO'></span>

<h3>Description</h3>

<p>This function is intended to read external files with a corneal topography in the format that is exported 
by some Placido disk topographers, especially those from CSO (a commercial brand).  
In general, we recommend to use the more general wrapper function <a href="#topic+readFile">readFile</a> to read any file format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readCSO(
  filepath,
  ringsTotal = 24,
  pointsPerRing = 256,
  ringsToUse = 15,
  onlyCompleteRings = TRUE,
  NAvalues = c(-1, -1000)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readCSO_+3A_filepath">filepath</code></td>
<td>
<p>A file path to a corneal topography file exported by a Placido disk corneal topographer, in the format used by CSO.</p>
</td></tr>
<tr><td><code id="readCSO_+3A_ringstotal">ringsTotal</code></td>
<td>
<p>The total (maximum) number of rings that may be available in the measurement (including incomplete rings or missing data; it depends on the particular device; by default 24)</p>
</td></tr>
<tr><td><code id="readCSO_+3A_pointsperring">pointsPerRing</code></td>
<td>
<p>The number of points per ring that are digitized in the measurement (it depends on the particular device; by default 256)</p>
</td></tr>
<tr><td><code id="readCSO_+3A_ringstouse">ringsToUse</code></td>
<td>
<p>The effective number of innermost rings to use (as long as they are complete if <code>onlyCompleteRings = TRUE</code>, otherwise it will be the actual number of complete rings; by default 15)</p>
</td></tr>
<tr><td><code id="readCSO_+3A_onlycompleterings">onlyCompleteRings</code></td>
<td>
<p>A boolean value indicating whether to use only rings with complete data or not (by default, TRUE)</p>
</td></tr>
<tr><td><code id="readCSO_+3A_navalues">NAvalues</code></td>
<td>
<p>A numerical value or vector indicating how NA values are codified in the file (by default c(-1, -1000))</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A corneal topographer is an ophthalmic clinical device that obtains measurements in the cornea (the anterior
part of the eye). A Placido disk corneal topographer makes use of the Placido disk (see references and the 
vignette linked below), which  produce a circular pattern of measurement nodes.
</p>
<p>The <a href="#topic+readCSO">readCSO</a> function is able to read a raw Placido disk corneal topography from a file that has been
exported by certain corneal topographers. It has been especially designed for the file format exported from
topographers manufactured by <a href="https://www.csoitalia.it">CSO</a> (Firenze, Italy).
</p>
<p>This reading function has been designed to be more flexible than the CSO format, allowing to specify different
parameters: the amounts of rings available, points per ring, and rings to use, whether to use or not only 
complete rings, and the value(s) encoding NAs (missing data) in the file. In addition, this function automatically 
processes the file and identifies the size and the header,  without assuming a fixed structure or having to 
specify its size as a parameter.
</p>
<p>This function produces a <code>data.frame</code> in the usual format used by <code>rPACI</code>, i.e., a data frame with three 
columns (x and y coordinates of each point and its ring index) and a row per data point, according to the 
function parameters (by default, 24*256 = 6144 rows or data points).
</p>
<p>See more details about corneal topographers and the file structure in <a href="../doc/topographersDataFormat.html"><code>vignette("topographersDataFormat", package = "rPACI")</code></a>.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> containing the corneal topography points, with columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>x</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> The X Cartesian coordinates of sampled points</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>y</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> The Y Cartesian coordinates of sampled points</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>ring index</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> Number or index of the ring from which each point is sampled</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>References</h3>

<p>Rowsey, J. James, A. E. Reynolds, and Randy Brown. 1981. &quot;Corneal Topography: Corneascope.&quot; Archives of Ophthalmology 99 (6): 1093-1100. doi: <a href="https://doi.org/10.1001/archopht.1981.03930011093022">10.1001/archopht.1981.03930011093022</a>.
</p>
<p>Pinero, D. P. 2015. &quot;Technologies for Anatomical and Geometric Characterization of the Corneal Structure and Anterior Segment: A Review.&quot; Seminars in Ophthalmology 30 (3): 161-70. doi: <a href="https://doi.org/10.3109/08820538.2013.835844">10.3109/08820538.2013.835844</a>.
</p>
<p>Samapunphong, Sopit, and Dimitri Azar. 1998. &quot;Placido and Elevation-Based Corneal Topography. A Review.&quot; Ophthalmology Clinics of North America 11 (3): 311-29. doi: <a href="https://doi.org/10.1016/S0896-1549(05)70059-6">10.1016/S0896-1549(05)70059-6</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Read the example file "N01.txt" included with rPACI (a real CSO exported file)
# It corresponds to a normal eye
datasetN = readCSO(system.file("extdata","N01.txt", package="rPACI"))

# Read the example file "K03.txt" included with rPACI (a real CSO exported file) 
# It corresponds to a keratoconic eye
datasetK = readCSO(system.file("extdata","K03.txt", package="rPACI"))
</code></pre>

<hr>
<h2 id='readFile'>Read a corneal topography file in any available format (recommended by default)</h2><span id='topic+readFile'></span>

<h3>Description</h3>

<p>This function is a general wrapper function, able to read corneal topography files in any format supported 
by <code>rPACI</code>. Internally, it analyzes the file and detects its format, and then it uses the appropriate 
specific reading function (by now, two are available: <a href="#topic+readCSO">readCSO</a> and <a href="#topic+readrPACI">readrPACI</a>). 
This is the reading function recommended by default, as it is able to read any supported file format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readFile(filepath, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readFile_+3A_filepath">filepath</code></td>
<td>
<p>A file path to a corneal topography file in any supported format.</p>
</td></tr>
<tr><td><code id="readFile_+3A_...">...</code></td>
<td>
<p>Optional arguments of any of the reading functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A corneal topographer is an ophthalmic clinical device that obtains measurements in the cornea (the anterior
part of the eye). A Placido disk corneal topographer makes use of the Placido disk (see references and the 
vignette linked below), which  produce a circular pattern of measurement nodes.
</p>
<p>This function internally determines the format of the specified file and then applies either <a href="#topic+readCSO">readCSO</a>
or <a href="#topic+readrPACI">readrPACI</a> if possible, or else it throws an error (if none can be applied, when the file 
format does not fit any of these two available formats). All this process is transparent to the user, so that 
using <code>readFile</code> with one file type or another is done in the same way, and it produces the same results. 
The <code>readFile</code> function propagates its input parameters. See those functions' documentation for more information
about their arguments. 
</p>
<p>This function produces a <code>data.frame</code> in the usual format used by <code>rPACI</code>, i.e., a list with three 
columns (x and y coordinates of each point, and its ring index) and a row per data point, according to the 
function parameters (by default, 24*256 = 6144 rows or data points).
</p>
<p>See more details about corneal topographers and the file structure in <a href="../doc/topographersDataFormat.html"><code>vignette("topographersDataFormat", package = "rPACI")</code></a>.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> containing the corneal topography points, with columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>x</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> The X Cartesian coordinates of the points</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>y</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> The Y Cartesian coordinates of the points</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>ring index</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> Number or index of the ring to which each point belongs</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>The resulting <code>data.frame</code> may also include in its <code>Parameters</code> attribute (<code>attr(result,'Parameters')</code>) the list of parameters used for the simulation (only if it was generated with <code>simulateData</code> and saved with <code>writerPACI</code>).
</p>


<h3>References</h3>

<p>Rowsey, J. James, A. E. Reynolds, and Randy Brown. 1981. &quot;Corneal Topography: Corneascope.&quot; Archives of Ophthalmology 99 (6): 1093-1100. doi: <a href="https://doi.org/10.1001/archopht.1981.03930011093022">10.1001/archopht.1981.03930011093022</a>.
</p>
<p>Pinero, D. P. 2015. &quot;Technologies for Anatomical and Geometric Characterization of the Corneal Structure and Anterior Segment: A Review.&quot; Seminars in Ophthalmology 30 (3): 161-70. doi: <a href="https://doi.org/10.3109/08820538.2013.835844">10.3109/08820538.2013.835844</a>.
</p>
<p>Samapunphong, Sopit, and Dimitri Azar. 1998. &quot;Placido and Elevation-Based Corneal Topography. A Review.&quot; Ophthalmology Clinics of North America 11 (3): 311-29. doi: <a href="https://doi.org/10.1016/S0896-1549(05)70059-6">10.1016/S0896-1549(05)70059-6</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Read the example file "N01.txt" (the file is in the CSO file format)
dataset1 = readFile(system.file("extdata","N01.txt", package="rPACI"))

dataset2 = readFile(system.file("extdata","ds2.txt", package="rPACI"))
</code></pre>

<hr>
<h2 id='readrPACI'>Read a corneal topography file in rPACI format</h2><span id='topic+readrPACI'></span>

<h3>Description</h3>

<p>This function is intended to read external files with a corneal topography that have been previously exported
by rPACI, using <a href="#topic+writerPACI">writerPACI</a>. The file should have the format used by rPACI, i.e., a list with three 
columns (x and y coordinates of each point, and its ring index) and a row per data point
In general, we recommend to use the more general wrapper function <a href="#topic+readFile">readFile</a> to read any file format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readrPACI(filepath, sep = ",")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readrPACI_+3A_filepath">filepath</code></td>
<td>
<p>A file path to a corneal topography dataset exported by a Placido disk corneal topographer.</p>
</td></tr>
<tr><td><code id="readrPACI_+3A_sep">sep</code></td>
<td>
<p>The character used as column separator in the file (by default, &quot;,&quot;).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A corneal topographer is an ophthalmic clinical device that obtains measurements in the cornea (the anterior
part of the eye). A Placido disk corneal topographer makes use of the Placido disk (see references and the 
vignette linked below), which  produce a circular pattern of measurement nodes.
</p>
<p>The <a href="#topic+readrPACI">readrPACI</a> function is able to read a Placido disk corneal topography from a file that has been
exported previously by <code>rPACI</code> using the function <a href="#topic+writerPACI">writerPACI</a>. The dataset may have been obtained
reading data from a file in other format (e.g. using <a href="#topic+readFile">readFile</a> or <a href="#topic+readCSO">readCSO</a>), or by 
simulation using <a href="#topic+simulateData">simulateData</a>.  
</p>
<p>This file format consists of an optional header of any length (its size is automatically detected) and afterwards, 
three separated columns (x and y coordinates of each point, and its ring index) and a row per data point.
</p>
<p>This function produces a <code>data.frame</code> in the usual format used by <code>rPACI</code>, i.e., a list with three 
columns (x and y coordinates of each point, and its ring index) and a row per data point, according to the 
function parameters (by default, 24*256 = 6144 rows or data points).
</p>
<p>See more details about corneal topographers and the file structure in <a href="../doc/topographersDataFormat.html"><code>vignette("topographersDataFormat", package = "rPACI")</code></a>.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> containing the corneal topography points, with columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>x</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> The X Cartesian coordinates of the points</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>y</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> The Y Cartesian coordinates of the points</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>ring index</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> Number or index of the ring to which each point belongs</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>The resulting <code>data.frame</code> may also include in its <code>Parameters</code> attribute (<code>attr(result,'Parameters')</code>) the list of parameters used for the simulation (only if it was generated with <a href="#topic+simulateData">simulateData</a> and saved with <a href="#topic+writerPACI">writerPACI</a>).
</p>


<h3>References</h3>

<p>Rowsey, J. James, A. E. Reynolds, and Randy Brown. 1981. &quot;Corneal Topography: Corneascope.&quot; Archives of Ophthalmology 99 (6): 1093-1100. doi: <a href="https://doi.org/10.1001/archopht.1981.03930011093022">10.1001/archopht.1981.03930011093022</a>.
</p>
<p>Pinero, D. P. 2015. &quot;Technologies for Anatomical and Geometric Characterization of the Corneal Structure and Anterior Segment: A Review.&quot; Seminars in Ophthalmology 30 (3): 161-70. doi: <a href="https://doi.org/10.3109/08820538.2013.835844">10.3109/08820538.2013.835844</a>.
</p>
<p>Samapunphong, Sopit, and Dimitri Azar. 1998. &quot;Placido and Elevation-Based Corneal Topography. A Review.&quot; Ophthalmology Clinics of North America 11 (3): 311-29. doi: <a href="https://doi.org/10.1016/S0896-1549(05)70059-6">10.1016/S0896-1549(05)70059-6</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A dataset that was read from a corneal topographer file was later saved in the rPACI format.
# It can be read with:
dataset1 = readrPACI(system.file("extdata","ds1.txt", package="rPACI"))

dataset2 = readrPACI(system.file("extdata","ds2.txt", package="rPACI"))
</code></pre>

<hr>
<h2 id='simulateData'>Simulate data as measured by a Placido disk corneal topographer</h2><span id='topic+simulateData'></span>

<h3>Description</h3>

<p>The function <code>simulateData</code> permits to simulate a wide variety of datasets that appear in clinical 
practice, as a result of measuring an individual eye with a Placido disk corneal topographer 
(see <a href="../doc/topographersDataFormat.html"><code>vignette("topographersDataFormat", package = "rPACI")</code></a>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulateData(
  rings = 15,
  pointsPerRing = 256,
  diameter = 12,
  ringRadiiPerturbation = 0,
  maximumMireDisplacement = 0,
  mireDisplacementAngle = 0,
  mireDisplacementPerturbation = 0,
  ellipticAxesRatio = 1,
  ellipticRotation = 0,
  overallNoise = 0,
  seed = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulateData_+3A_rings">rings</code></td>
<td>
<p>The total number of rings of mires in the sample (typically in the range 18-30, around 24).</p>
</td></tr>
<tr><td><code id="simulateData_+3A_pointsperring">pointsPerRing</code></td>
<td>
<p>The number of points to be sampled in each ring (typically 256 or 360).</p>
</td></tr>
<tr><td><code id="simulateData_+3A_diameter">diameter</code></td>
<td>
<p>Diameter of the simulated dataset (in mm, typically around 8-12 mm).</p>
</td></tr>
<tr><td><code id="simulateData_+3A_ringradiiperturbation">ringRadiiPerturbation</code></td>
<td>
<p>Stochastical perturbation of the mires radii distribution (typically between 0 (no perturbation) and 1 (high perturbation)).</p>
</td></tr>
<tr><td><code id="simulateData_+3A_maximummiredisplacement">maximumMireDisplacement</code></td>
<td>
<p>Mires displacement, drift or off-centering (expressed in mm, and should be a reasonable number according to the diameter used.</p>
</td></tr>
<tr><td><code id="simulateData_+3A_miredisplacementangle">mireDisplacementAngle</code></td>
<td>
<p>Direction of mires drift (an angle in degrees, typically in the range 0-360 with 0 meaning positive x direction).</p>
</td></tr>
<tr><td><code id="simulateData_+3A_miredisplacementperturbation">mireDisplacementPerturbation</code></td>
<td>
<p>Stochastical perturbation of the mires drift (typically between 0 (no perturbation) and 1 (high perturbation)).</p>
</td></tr>
<tr><td><code id="simulateData_+3A_ellipticaxesratio">ellipticAxesRatio</code></td>
<td>
<p>Rate or quotient between the major and minor axes of each ellipse (related to the ellipse eccentricity; 1 means a perfect circle (no eccentricity)).</p>
</td></tr>
<tr><td><code id="simulateData_+3A_ellipticrotation">ellipticRotation</code></td>
<td>
<p>Direction or orientation of the ellipses (an angle in degrees, typically in the range 0-360 with 0 meaning positive x direction).</p>
</td></tr>
<tr><td><code id="simulateData_+3A_overallnoise">overallNoise</code></td>
<td>
<p>Random, white noise of a certain magnitude in the Cartesian coordinates of the sampled points (relative to the diameter and the number of rings; 0 means no noise, and 1 large noise).</p>
</td></tr>
<tr><td><code id="simulateData_+3A_seed">seed</code></td>
<td>
<p>A seed, included for repeatability when using random perturbations.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function produces a dataset in the same format as the one read by <a href="#topic+readCSO">readCSO</a>
from a file, i.e., a list with three columns (x and y coordinates of each point and its ring index) and a
row per data point, according to the function parameters (by default, 6144 rows or data points).
</p>
<p>See <a href="../doc/simulating.html"><code>vignette("simulating", package = "rPACI")</code></a> for additional details.
The examples included there show different ways of using <code>simulateData</code>, by adding different transformations
or perturbations to the basic circular pattern. Some of the obtained patterns can correlate with certain
clinical conditions, such as keratoconus, comma, or others.
</p>
<p>The simulated dataset can be later used according to the package workflow explained in the
<a href="../doc/packageUsage.html"><code>vignette("packageUsage", package = "rPACI")</code></a>.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> with columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>x</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> The X Cartesian coordinates of sampled points</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>y</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> The Y Cartesian coordinates of sampled points</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>ring index</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> Number or index of the ring from which each point is sampled</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>The resulting <code>data.frame</code> also includes in its <code>Parameters</code> attribute (<code>attr(result,'Parameters')</code>) the list of parameters used for the simulation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Simulating with default parameters
dataset = simulateData()  
plot(dataset$x,dataset$y)

# Simulating with 20 rings and a diameter of 8 mm
dataset = simulateData(rings = 20, diameter = 8)
plot(dataset$x,dataset$y)

# Simulating with default parameters and 500 points per ring (15x500 points)
dataset = simulateData(pointsPerRing = 500)
plot(dataset$x,dataset$y)

# Simulating an elliptic dataset, with ellipses axis ratio of 0.8 and an orientation of 45 degrees.
dataset = simulateData(ellipticAxesRatio = 0.8, ellipticRotation = 45)
plot(dataset$x,dataset$y)

# To see the parameters used in the simulation, access the 'Parameters' attribute:
attr(dataset,'Parameters')
</code></pre>

<hr>
<h2 id='writerPACI'>Save to disk a dataset in the format used by rPACI</h2><span id='topic+writerPACI'></span>

<h3>Description</h3>

<p>Write to disk a corneal topography dataset in the format used by rPACI, in a plain text file.
The file format consists of (possibly) a header (only for data that were simulated), followed by
three separated columns (x and y coordinates of each point and its ring index) and a row per data point.
This format is returned by the functions <a href="#topic+readFile">readFile</a> or <a href="#topic+simulateData">simulateData</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>writerPACI(dataset, filename, sep = ",")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="writerPACI_+3A_dataset">dataset</code></td>
<td>
<p>A <code>data.frame</code> containing the corneal topography points, with columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>x</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> The X Cartesian coordinates of the points</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>y</code>   </td><td style="text-align: left;"></td><td style="text-align: left;"> The Y Cartesian coordinates of the points</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>ring index</code>  </td><td style="text-align: left;"></td><td style="text-align: left;"> Number or index of the ring to which each point belongs</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>
</td></tr>
<tr><td><code id="writerPACI_+3A_filename">filename</code></td>
<td>
<p>A character string naming a file (including the extension).</p>
</td></tr>
<tr><td><code id="writerPACI_+3A_sep">sep</code></td>
<td>
<p>The field separator string (by default, ',').</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function writes the data from a <code>data.frame</code> to a plain text file. The file will possibly have
a header, followed by a block of three separated columns, according to the usual format used by <code>rPACI</code>, 
i.e., a list with three columns (x and y coordinates of each point, and its ring index) and a row per data point.
</p>
<p>If the given <code>data.frame</code> (named <code>dataset</code>) was produced using <a href="#topic+simulateData">simulateData</a>, the resulting 
text file will also include in its header the <code>Parameters</code> attribute (<code>attr(dataset,'Parameters')</code>),
i.e., the list of parameters used for the simulation. 
</p>
<p>A file stored with <code>writerPACI</code> can later be read using the general reader function <a href="#topic+readFile">readFile</a>
or the specific reader function <a href="#topic+readrPACI">readrPACI</a>.
</p>
<p>See more details about the file structure in <a href="../doc/topographersDataFormat.html"><code>vignette("topographersDataFormat", package = "rPACI")</code></a>, 
about the usage of <code>rPACI</code> in <a href="../doc/packageUsage.html"><code>vignette("packageUsage", package = "rPACI")</code></a>,
and about simulation parameters in <a href="../doc/simulating.html"><code>vignette("simulating", package = "rPACI")</code></a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Simulating an elliptic dataset, with ellipses axis ratio of 0.8 and an orientation 
# of 45 degrees.
dataset = simulateData(rings = 18, pointsPerRing = 300, 
                       ellipticAxesRatio = 0.8, ellipticRotation = 45)

# Now the dataset can be saved to file using 'writerPACI' (check the working directory
# before saving):
## Not run: 
writerPACI(dataset, "datasetFile.txt")

## End(Not run)
# The file will include as a header the parameters used in the simulation
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
