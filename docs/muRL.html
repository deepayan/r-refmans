<!DOCTYPE html><html><head><title>Help for package muRL</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {muRL}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#apsahtml2csv'><p>Read, parse, and write to a .csv file APSA eJobs html files</p></a></li>
<li><a href='#murl-package'><p>Mailmerge methods for reading addresses, creating letters, and mapping US ZIP codes of recipients</p></a></li>
<li><a href='#murljobs'><p>A sample dataframe of recipient information and addresses</p></a></li>
<li><a href='#read.murl'><p>Read a .csv file or R dataframe of letter recipients</p></a></li>
<li><a href='#write.murl'><p>Write a .tex file of recipient information to be processed by LaTeX</p></a></li>
<li><a href='#zip.plot'><p>Plot US ZIP codes, including locations of letter recipients.</p></a></li>
<li><a href='#zips'><p>A .tab file of US ZIP code data for mapping recipients</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Mailmerge using R, LaTeX, and the Web</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1-13</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-08-21</td>
</tr>
<tr>
<td>Author:</td>
<td>Ryan T. Moore &lt;rtm@american.edu&gt; and Andrew Reeves &lt;reeves@wustl.edu&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ryan T. Moore &lt;rtm@american.edu&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>utils, maps, stringr</td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides mailmerge methods for reading spreadsheets of addresses and other relevant information to create standardized but customizable letters.  Provides a method for mapping US ZIP codes, including those of letter recipients.  Provides a method for parsing and processing html code from online job postings of the American Political Science Association.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> | file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.ryantmoore.org/software.murl.html">https://www.ryantmoore.org/software.murl.html</a></td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-21 23:23:23 UTC; rtm</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-22 06:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='apsahtml2csv'>Read, parse, and write to a .csv file APSA eJobs html files</h2><span id='topic+apsahtml2csv'></span>

<h3>Description</h3>

<p>Reads American Political Science Association (APSA) &ldquo;eJobs&rdquo; html files, parses the content of these files into a format for muRL to read, and writes that content to a .csv file.</p>


<h3>Usage</h3>

<pre><code class='language-R'>apsahtml2csv(directory, file.name, file.ext = ".htm", verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apsahtml2csv_+3A_directory">directory</code></td>
<td>
<p>a character string specifying the directory to which a set of APSA job announcement web pages have been downloaded.</p>
</td></tr>
<tr><td><code id="apsahtml2csv_+3A_file.name">file.name</code></td>
<td>
<p>a character string specifying the name of the file to which the data should be written.</p>
</td></tr>
<tr><td><code id="apsahtml2csv_+3A_file.ext">file.ext</code></td>
<td>
<p>a character string specifying the extension of the files from which the data will be harvested.</p>
</td></tr>
<tr><td><code id="apsahtml2csv_+3A_verbose">verbose</code></td>
<td>
<p>a logical specifying whether the file name and current working directory should be printed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>After logging in to eJobs, the job announcement site of the American Political Science Association (APSA), the user can search for and find the APSA web page announcing a single job listing.  The user can download the html from several such pages (usually with a simple &ldquo;Save As&rdquo; command, depending on one's operating system).  <code>apsahtml2csv</code> then parses the html code from these pages, and sorts and stores the relevant content.  A <code>.csv</code> file is written containing this content.
</p>
<p>If the user downloads the APSA webpages using a different (or no) file extension, that extension (or &quot;&quot;) should be specified using the <code>file.ext</code> argument.  Because <code>apsahtml2csv</code> uses the value of <code>file.ext</code> in a <code>grep</code> command, we strongly recommend that the directory specified by <code>directory</code> include only the downloaded webpages, and no other files or directories.
</p>
<p>Institutions are inconsistent in how they enter the names of their jobs' contact representatives.  Thus, some tweaking of the output of <code>apsahtml2csv</code> may be required in order to create a <code>.csv</code> file that can be seemlessly read by <code>read.murl</code>.  Specifically, the user may have to take the single column of the output of <code>apsahtml2csv</code> called <code>contact</code>, and create columns called <code>title</code>, <code>fname</code>, and <code>lname</code>.  Additionally, the user may have to adjust the <code>position</code> and <code>subfield</code> columns, and institutions may report these somewhat differently.  
</p>


<h3>Value</h3>

<p>An <span class="rlang"><b>R</b></span> dataframe is created and a <code>.csv</code> file is written.  These include columns containing the APSA job listing ID number, the date the job advertisement was posted, the type of institution, the title and subfield of the position, the start date, salary, and region, the name of the institution and department, the name, address, city, state, ZIP code, and phone number of the individual to contact, the department or institution's web address, and a full paragraph description of the position.
</p>
<p>The full paragraph description is stored in a column named <code>desc</code>.  Due to the current parsing strategy, this field may include some excess characters from the APSA html page.  
</p>


<h3>Author(s)</h3>

<p>Ryan T. Moore <a href="mailto:rtm@american.edu">rtm@american.edu</a> and Andrew Reeves <a href="mailto:reeves@wustl.edu">reeves@wustl.edu</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read.murl">read.murl</a></code></p>

<hr>
<h2 id='murl-package'>Mailmerge methods for reading addresses, creating letters, and mapping US ZIP codes of recipients</h2><span id='topic+murl-package'></span><span id='topic+murl'></span><span id='topic+muRL-package'></span>

<h3>Description</h3>

<p>Provides mailmerge methods for reading spreadsheets of addresses and other relevant information to create standardized but customizable letters.  Provides a method to map US ZIP codes, including those of letter recipients.  Provides a method for parsing and processing html code from online job postings of the American Political Science Association.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> muRL</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 0.1-13</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2023-08-21</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL version 2.0 or newer </td>
</tr>
<tr>
 <td style="text-align: left;">
URL: </td><td style="text-align: left;"> <a href="https://www.ryantmoore.org/software.murl.html">https://www.ryantmoore.org/software.murl.html</a> </td>
</tr>
<tr>
 <td style="text-align: left;">
LazyLoad: </td><td style="text-align: left;"> yes</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>





<h3>Author(s)</h3>

<p>Ryan T. Moore <a href="mailto:rtm@american.edu">rtm@american.edu</a> and Andrew Reeves <a href="mailto:reeves@wustl.edu">reeves@wustl.edu</a>
</p>
<p>Maintainer: Ryan T. Moore &lt;rtm@american.edu&gt;
</p>

<hr>
<h2 id='murljobs'>A sample dataframe of recipient information and addresses</h2><span id='topic+murljobs'></span>

<h3>Description</h3>

<p>This sample dataframe of recipient information and addresses includes columns with information required by the <code>muRL</code> package, as well as auxiliary columns with information related to a hypothetical mailmerge, but not required by <code>muRL</code>.</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(murljobs)</code></pre>


<h3>Format</h3>

<p>A data frame with 8 observations on the following 15 variables.
</p>

<dl>
<dt><code>institution</code></dt><dd><p>a factor containing sample institution names (with levels <code>Christopher College</code>, ..., <code>University of State University</code>).</p>
</dd>
<dt><code>type</code></dt><dd><p>an auxiliary factor for sorting sample entries (with level <code>am</code>).</p>
</dd>
<dt><code>deadline</code></dt><dd><p>an auxiliary factor containing sample deadlines (with levels <code>1/5/2010</code>, <code>12/1/2009</code>).</p>
</dd>
<dt><code>title</code></dt><dd><p>a factor containing sample recipient titles (with levels <code>Dean</code>, ..., <code>Sargent</code>).</p>
</dd>
<dt><code>fname</code></dt><dd><p>a factor containing sample recipient first names (with levels <code>Frank</code>, ..., <code>Tim</code>).</p>
</dd>
<dt><code>lname</code></dt><dd><p>a factor containing sample recipient last names (with levels <code>Anderson</code>, ..., <code>Smithers</code>).</p>
</dd>
<dt><code>dept</code></dt><dd><p>a factor containing sample recipient information (with levels <code>Department of Political Science</code>, <code>Department of Politics</code>).</p>
</dd>
<dt><code>position</code></dt><dd><p>a factor containing sample position titles (with levels <code>assistant professor</code>, ..., <code>postdoctoral associate</code>).</p>
</dd>
<dt><code>subfield</code></dt><dd><p>a factor containing sample recipient information (with levels <code>American politics</code>, ..., <code>Governance Studies</code>).</p>
</dd>
<dt><code>address1</code></dt><dd><p>a factor containing sample recipient address first lines (with level <code>Graduate Admissions Committee</code>).</p>
</dd>
<dt><code>address2</code></dt><dd><p>a factor containing sample recipient address second lines (with levels <code>11 Smith Rd.</code>, ..., <code>Dept of Political Science</code>).</p>
</dd>
<dt><code>address3</code></dt><dd><p>a factor containing sample recipient address third lines (with levels <code>123 Main St</code>, ..., <code>Dept of Rock Music</code>).</p>
</dd>
<dt><code>city</code></dt><dd><p>a factor containing sample recipient cities (with levels <code>Allentown</code>, ..., <code>Topeka</code>).</p>
</dd>
<dt><code>state</code></dt><dd><p>a factor containing sample recipient states or provinces (with levels <code>CA</code>, ..., <code>WY</code>).</p>
</dd>
<dt><code>zip</code></dt><dd><p>a numeric vector containing sample recipient ZIP codes.</p>
</dd>
</dl>



<h3>Source</h3>

<p>Created by package authors.</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(murljobs)
</code></pre>

<hr>
<h2 id='read.murl'>Read a .csv file or R dataframe of letter recipients</h2><span id='topic+read.murl'></span>

<h3>Description</h3>

<p>Reads a <code>.csv</code> file or R dataframe of letter recipients, processes the column names for <code>write.murl</code>, checks whether United States ZIP codes conform to standard formats, and reports potential problems to the user.</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.murl(file = "murljobs.csv", header = TRUE, stringsAsFactors = 
FALSE, field.title = "title", field.fname = "fname", field.lname = 
"lname", fields.address = "address", field.city = "city", 
field.state = "state", field.zip = "zipcode", field.position = 
"position", field.subfield = "subfield", field.dept = "dept", 
field.institution = "institution", field.instShort = "instShort", 
colClasses = c("character"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read.murl_+3A_file">file</code></td>
<td>
<p>the name of a <code>.csv</code> file or <span class="rlang"><b>R</b></span> dataframe.</p>
</td></tr>
<tr><td><code id="read.murl_+3A_header">header</code></td>
<td>
<p>a logical for whether the first row of the input file or dataframe is a header row.</p>
</td></tr>
<tr><td><code id="read.murl_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>a logical for whether character strings should be stored as factors with levels.</p>
</td></tr>
<tr><td><code id="read.murl_+3A_field.title">field.title</code></td>
<td>
<p>a character string giving the name of the column containing recipients' titles (such as &ldquo;Doctor&quot;, &ldquo;Mrs.&quot;, etc.).</p>
</td></tr>
<tr><td><code id="read.murl_+3A_field.fname">field.fname</code></td>
<td>
<p>a character string giving the name of the column containing recipients' first names.</p>
</td></tr>
<tr><td><code id="read.murl_+3A_field.lname">field.lname</code></td>
<td>
<p>a character string giving the name of the column containing recipients' last names.</p>
</td></tr>
<tr><td><code id="read.murl_+3A_fields.address">fields.address</code></td>
<td>
<p>a character string common to the name(s) of the column(s) containing recipients' street mailing address information.  Each column will be printed as its own row in the mailing address.  See Details below for more.</p>
</td></tr>
<tr><td><code id="read.murl_+3A_field.city">field.city</code></td>
<td>
<p>a character string giving the name of the column containing recipients' cities.</p>
</td></tr>
<tr><td><code id="read.murl_+3A_field.state">field.state</code></td>
<td>
<p>a character string giving the name of the column containing recipients' states or provinces.</p>
</td></tr>
<tr><td><code id="read.murl_+3A_field.zip">field.zip</code></td>
<td>
<p>a character string giving the name of the column containing recipients' United States ZIP or other postal codes.</p>
</td></tr>
<tr><td><code id="read.murl_+3A_field.position">field.position</code></td>
<td>
<p>a character string giving the name of the column containing recipient-specific information, such as the specific position for which one is applying.</p>
</td></tr>
<tr><td><code id="read.murl_+3A_field.subfield">field.subfield</code></td>
<td>
<p>a character string giving the name of the column containing recipient-specific information, such as the specific subfield for which one is applying.</p>
</td></tr>
<tr><td><code id="read.murl_+3A_field.dept">field.dept</code></td>
<td>
<p>a character string giving the name of the column containing additional information, such as the specific department offering the position for which one is applying.</p>
</td></tr>
<tr><td><code id="read.murl_+3A_field.institution">field.institution</code></td>
<td>
<p>a character string giving the name of the column containing additional information, such as the institution offering the position for which one is applying.</p>
</td></tr>
<tr><td><code id="read.murl_+3A_field.instshort">field.instShort</code></td>
<td>
<p>a character string giving the name of the column containing the shortened version of the name of the institution.  Optionally used in the closing.</p>
</td></tr>
<tr><td><code id="read.murl_+3A_colclasses">colClasses</code></td>
<td>
<p>a vector of character strings indicating the class of each column.  Using <code>c(``character'')</code> ensures leading zeros in, for example, ZIP codes will be preserved.</p>
</td></tr>
<tr><td><code id="read.murl_+3A_...">...</code></td>
<td>
<p>other arguments to pass to <code>read.csv()</code> if the input file is a .csv file.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Recipients' addresses are formatted for mailing as follows.  The first row contains the contents of the fields defined by <code>field.title</code>, <code>field.fname</code>, and <code>field.lname</code>.  Each of the fields defined by <code>fields.address</code> is formatted as a unique row.  The last row contains the contents of the fields defined by <code>field.city</code>, <code>field.state</code>, and <code>field.zip</code>.  
</p>
<p><code>fields.address</code> specifies the string common to the names of the columns containing the recipients' street addresses.  For example, if the user's file has the street address in columns named <code>addr1</code>, <code>addr2</code>, <code>...</code>, then the user should set <code>fields.address = "addr"</code>.
</p>
<p>If the input file is an <span class="rlang"><b>R</b></span> dataframe, then the argument <code>...</code> is ignored.
</p>


<h3>Value</h3>

<p>An <span class="rlang"><b>R</b></span> dataframe containing the relevant information for creating a set of standardized but customizable letters to be mailed.</p>


<h3>Author(s)</h3>

<p>Ryan T. Moore <a href="mailto:rtm@american.edu">rtm@american.edu</a> and Andrew Reeves <a href="mailto:reeves@wustl.edu">reeves@wustl.edu</a></p>


<h3>See Also</h3>

<p><code><a href="#topic+write.murl">write.murl</a></code>, <code><a href="#topic+zip.plot">zip.plot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Specify path to .csv database of sample addresses
fpath &lt;- system.file("extdata", "murljobs.csv", package = "muRL")

murljobs &lt;- read.murl(fpath)
</code></pre>

<hr>
<h2 id='write.murl'>Write a .tex file of recipient information to be processed by LaTeX</h2><span id='topic+write.murl'></span>

<h3>Description</h3>

<p>Reads an <span class="rlang"><b>R</b></span> dataframe of letter recipient- and position-specific data, such as the output of <code>read.murl</code>.  Creates a <code>.tex</code> file of the relevant data and LaTeX code, which can then be processed directly by pdflatex, for example.</p>


<h3>Usage</h3>

<pre><code class='language-R'>write.murl(object, file.name = "mailmerge.tex", salutation = "Dear", 
sal.punct = ":", address.string = "123 Venus Flytrap Way\\\\Cincinnati, 
OH 45201\\\\ \\texttt{jfever@wkrp.edu}\\\\ 
\\texttt{http://www.wkrp.edu/jfever}\\\\513-555-5664", 
pad_if_zip4 = TRUE,
date = "\\today", letter.file = NULL, letter.text = NULL, valediction = "Sincerely,", 
signature = "Johnny Fever", opening = "", include.opening = FALSE, 
closing = "", include.closing = FALSE, contact_me = TRUE,
margin_geometry = NULL,
verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write.murl_+3A_object">object</code></td>
<td>
<p>a dataframe of mailmerge data, such as an output from <code>read.murl()</code>.</p>
</td></tr>
<tr><td><code id="write.murl_+3A_file.name">file.name</code></td>
<td>
<p>a character string specifying the file name (and optionally, path) for the output <code>.tex</code> file.  See Details below for more.</p>
</td></tr>
<tr><td><code id="write.murl_+3A_salutation">salutation</code></td>
<td>
<p>a character string specifying the salutation to be used in the letters.</p>
</td></tr>
<tr><td><code id="write.murl_+3A_sal.punct">sal.punct</code></td>
<td>
<p>a character string specifying the punctuation to be used at the end of the salutation.</p>
</td></tr>
<tr><td><code id="write.murl_+3A_address.string">address.string</code></td>
<td>
<p>a character string specifying the return address to be used in the letters.  Note that two slashes (<code>\\</code>) should be used for every one usual LaTeX slash.</p>
</td></tr>
<tr><td><code id="write.murl_+3A_pad_if_zip4">pad_if_zip4</code></td>
<td>
<p>a logical indicating whether to add a leading 0 (zero) to 
any ZIP code with 4 or 9 characters.  Defaults to <code>TRUE</code> and warns the user.</p>
</td></tr>
<tr><td><code id="write.murl_+3A_date">date</code></td>
<td>
<p>an optional character string specifying the date.  Defaults to the current date.</p>
</td></tr>
<tr><td><code id="write.murl_+3A_letter.file">letter.file</code></td>
<td>
<p>an optional character string specifying a file containing the body text of the letters.  See Details below for more.</p>
</td></tr>
<tr><td><code id="write.murl_+3A_letter.text">letter.text</code></td>
<td>
<p>an optional character string containing the body text of the letters.  See Details below for more.</p>
</td></tr>
<tr><td><code id="write.murl_+3A_valediction">valediction</code></td>
<td>
<p>a character string specifying the valediction to be used in the letters.</p>
</td></tr>
<tr><td><code id="write.murl_+3A_signature">signature</code></td>
<td>
<p>a character string specifying the signature to be used in the letters.</p>
</td></tr>
<tr><td><code id="write.murl_+3A_opening">opening</code></td>
<td>
<p>a character string specifying the opening line to be used in the letters.  See Details below for more.</p>
</td></tr>
<tr><td><code id="write.murl_+3A_include.opening">include.opening</code></td>
<td>
<p>a logical indicating whether an opening, customized line is to be used in the letters.  See Details below for more.</p>
</td></tr>
<tr><td><code id="write.murl_+3A_closing">closing</code></td>
<td>
<p>a character string specifying the closing line to be used in the letters.  See Details below for more.</p>
</td></tr>
<tr><td><code id="write.murl_+3A_include.closing">include.closing</code></td>
<td>
<p>a logical indicating whether a closing, letter-customized line is to be used in the letters.  See Details below for more.</p>
</td></tr>
<tr><td><code id="write.murl_+3A_contact_me">contact_me</code></td>
<td>
<p>a logical indicating whether a 'contact me' sentence is added 
to the closing.  See Details below for more.</p>
</td></tr>
<tr><td><code id="write.murl_+3A_margin_geometry">margin_geometry</code></td>
<td>
<p>an optional numeric vector of length 4 containing the number of inches of margin for the top, bottom, left, and right of the letter.  See Details below for more.</p>
</td></tr>
<tr><td><code id="write.murl_+3A_verbose">verbose</code></td>
<td>
<p>a logical indicating whether the <code>file.name</code> and the current working directory should be printed after the file has been created.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The dataframe used by <code>write.murl</code> should include columns for recipients' titles, first names, last names, addresses, cities, states, and ZIP codes, as well as information specific to the position for which the letter is in application.  <code>write.murl</code> is intended to operate on the output of <code>read.murl</code>, and thus requires that the column names for the fields above be &ldquo;title&rdquo;, &ldquo;fname&rdquo;, &ldquo;lname&rdquo;, &ldquo;address1&rdquo; (and &ldquo;address2&rdquo;, etc.), &ldquo;city&rdquo;, &ldquo;state&rdquo;, &ldquo;zip&rdquo;, &ldquo;position&rdquo;, &ldquo;subfield&rdquo;, &ldquo;dept&rdquo;, and &ldquo;institution&rdquo;.  These field names are automatically created by <code>read.murl</code>.
</p>
<p>The user may define the main body text of the letter in at least three ways.  First, <code>write.murl</code> includes some sample text by default.  The user could simply edit this text in the <code>.tex</code> file created by <code>write.murl</code>.  Second, the user could write the body text in a separate file (such as a <code>.txt</code> file) and specify that file's name using the <code>letter.file</code> argument.  Third, the user could define the entire body text as a string passed to the <code>letter.text</code> argument.
</p>
<p>If both <code>letter.file</code> and <code>letter.text</code> are specified, <code>write.murl</code> appends the value of <code>letter.string</code> below the contents of the file specified by <code>letter.file</code>.
</p>
<p>The opening line specified by argument <code>opening</code> should be of a grammatical form consistent with &ldquo;I write to apply for the position in&rdquo;.  This phrase will then be followed by customized input, using the fields &ldquo;position&rdquo;, &ldquo;subfield&rdquo;, &ldquo;dept&rdquo;, and &ldquo;institution&rdquo;, as in the example in Value below.  To omit such a customized opening line, use the default 
<code>include.opening = FALSE</code>.  The example in Value below, and thus each letter, will include only the content defined in the LaTeX-defined &ldquo;body&rdquo;.
</p>
<p>The closing line specified by argument <code>closing</code> should be of a grammatical form consistent with &ldquo;I will be an asset to the&rdquo;.  This phrase will then be followed by letter-customized 
input, using the fields &ldquo;position&rdquo;, &ldquo;subfield&rdquo;, and &ldquo;instShort&rdquo;.  To omit such a customized closing line, use the default <code>include.closing = FALSE</code>.  If <code>contact_me</code> 
is <code>TRUE</code> (the default), then the phrase &ldquo;Please don't hesitate to contact me if more information would be helpful.&rdquo; is included.
</p>
<p>If the <code>margin_geometry</code> argument is specified, the LaTeX package <code>geometry</code> will 
be used, and the four components of <code>margin_geometry</code> provide the margins for 
the top, bottom, left, and right of the letters.  If it is not specified, the default 
margins of <code>documentclass{letter}</code> are used.
</p>


<h3>Value</h3>

<p>A <code>.tex</code> file of LaTeX code and recipient-specific content, to be processed directly by LaTeX.  Using the included <code>murljobs.csv</code> sample data, the <code>.tex</code> file created by <code>write.murl</code> includes for each position one code snippet that looks like the following:
</p>
<pre>
\begin{letter}
{Dr. Richard Sanders\\Graduate Admissions Committee\\123 Hello Way\\Frederick MD 21701}
\opening{Dear Dr. Sanders:}
 \body 
\closing{Sincerely,} 
\end{letter}
</pre>


<h3>Author(s)</h3>

<p>Ryan T. Moore <a href="mailto:rtm@american.edu">rtm@american.edu</a> and Andrew Reeves <a href="mailto:reeves@wustl.edu">reeves@wustl.edu</a></p>


<h3>See Also</h3>

<p><code><a href="#topic+read.murl">read.murl</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>data(murljobs)

## Create mailmerge.tex required for LaTeX import
# write.murl(murljobs)

## Specify a file containing the letters' body text
## write.murl(murljobs, letter.file = "mybodytext.txt")

## Specify a string containing the letters' body text
# write.murl(murljobs, letter.text = "This is the whole body of my letters.")

## Specify salutation, valediction options (overwrites previous mailmerge.tex)
# write.murl(murljobs, file.name = "mailmerge.tex", salutation = "Greetings", 
#		     sal.punct = ",", valediction = "Truly Yours,", include.opening = FALSE)

## Specify opening line also (overwrites previous mailmerge.tex)
# write.murl(murljobs, file.name = "mailmerge.tex", salutation = "Greetings", 
#		     sal.punct = ",", valediction = "Truly Yours,", 
#		     opening = "I am applying for the job in", include.opening = TRUE)
</code></pre>

<hr>
<h2 id='zip.plot'>Plot US ZIP codes, including locations of letter recipients.</h2><span id='topic+zip.plot'></span>

<h3>Description</h3>

<p>Using United States ZIP codes, plots on a map the location of letter recipients.  State or county boundaries may be displayed.</p>


<h3>Usage</h3>

<pre><code class='language-R'>zip.plot(data, zip.file = system.file("extdata", "zips.tab", package = 
"muRL"), map.type = "state", cex = 1, col = "black", pch = 20, 
jitter.factor = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="zip.plot_+3A_data">data</code></td>
<td>
<p>a dataframe with ZIP codes in a column named '<code>zip</code>', such as the output of <code>read.murl</code>.</p>
</td></tr>
<tr><td><code id="zip.plot_+3A_zip.file">zip.file</code></td>
<td>
<p>a character string naming a <code>.tab</code> file with the columns for the latitude and longitude of ZIP codes, such as '<code>zips.tab</code>' provided in the <code>murl</code> package (the default).</p>
</td></tr>
<tr><td><code id="zip.plot_+3A_map.type">map.type</code></td>
<td>
<p>the type of map for <code>map()</code> from the <code>maps</code> library to create.  See Details for more.</p>
</td></tr>
<tr><td><code id="zip.plot_+3A_cex">cex</code></td>
<td>
<p>a numerical value giving the amount by which plotting text and symbols should be magnified relative to the default.  Accepts, for example, a vector of values which are recycled.</p>
</td></tr>
<tr><td><code id="zip.plot_+3A_col">col</code></td>
<td>
<p>a specification for the plotting color.</p>
</td></tr>
<tr><td><code id="zip.plot_+3A_pch">pch</code></td>
<td>
<p>the plotting character for <code>map()</code> from the <code>maps</code> library to use.</p>
</td></tr>
<tr><td><code id="zip.plot_+3A_jitter.factor">jitter.factor</code></td>
<td>
<p>a numeric specifying by how much points should be jittered before plotting.  See Details below for more.</p>
</td></tr>
<tr><td><code id="zip.plot_+3A_...">...</code></td>
<td>
<p>other arguments to pass to <code>map()</code> from the <code>maps</code> library.  See Details below for more.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>map.type</code> can be any valid map from the <code>maps</code> package.  For plotting the location of United States ZIP codes, <code>usa</code>, <code>state</code>, or <code>county</code> should be used.
</p>
<p>See <code>help(par)</code> for more details on <code>cex</code>, <code>col</code>, and <code>pch</code>.
</p>
<p>See <code>help(jitter)</code> for more details on <code>jitter.factor</code>.  <code>zip.plot</code> jitters latitude and longitude separately using the same factor. 
</p>
<p>To plot only a region within the selected <code>map.type</code>, include the <code>map</code> argument <code>region = </code>.  For example, <code>zip.plot(..., region = ``Maryland'')</code> would plot only the recipients with ZIP codes in the US state of Maryland.
</p>


<h3>Note</h3>

<p><code>zip.plot</code> calls the <code>map</code> function in the <code>maps</code> package.  The <code>map</code> function places an object called <code>stateMapEnv</code> in the user's workspace.
</p>


<h3>Author(s)</h3>

<p>Ryan T. Moore <a href="mailto:rtm@american.edu">rtm@american.edu</a> and Andrew Reeves <a href="mailto:reeves@wustl.edu">reeves@wustl.edu</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read.murl">read.murl</a></code>, <code><a href="#topic+zips">zips</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Call murl object of sample addresses
data(murljobs)
zip.plot(murljobs)

## Read .csv to murl object
murljobs &lt;- read.murl(system.file("extdata", "murljobs.csv", package = "muRL"))
## Specify US state to map
zip.plot(murljobs, map.type = "state", region = "maryland")
</code></pre>

<hr>
<h2 id='zips'>A .tab file of US ZIP code data for mapping recipients</h2><span id='topic+zips'></span>

<h3>Description</h3>

<p>A .tab file of United States ZIP code data for mapping recipients.  Called by <code>zip.plot</code> to match ZIP codes from letters to latitude and longitude coordinates, and then plot latitudes and longitudes on a user-selected map type.</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(zips)</code></pre>


<h3>Format</h3>

<p>A data frame with 33309 observations on 4 variables.
</p>

<dl>
<dt><code>state</code></dt><dd><p>a factor containing state and territory abbreviations (with levels <code>AK</code>, <code>AL</code>, ..., <code>WY</code>).</p>
</dd>
<dt><code>zip</code></dt><dd><p>a factor containing three-digit, four-digit, five-digit, and three-digit-plus-wildcard formatted ZIP codes (with 33188 levels).</p>
</dd>
<dt><code>lat</code></dt><dd><p>a numeric vector of latitude coordinates.</p>
</dd>
<dt><code>lon</code></dt><dd><p>a numeric vector of longitude coordinates.</p>
</dd>
</dl>



<h3>Details</h3>

<p>A few ZIP codes span more than one state, and thus appear more than once in <code>zips</code>.  See the Examples below for hints on extracting latitude and longitude.
</p>


<h3>Note</h3>

<p>Not all US ZIP codes are currently included in this file.  If you have a ZIP code you would like included for plotting, please email the package maintainer with the following four pieces of information:  the state in which the ZIP code is located, the ZIP code itself, the latitude of the ZIP code to six decimal places (such as 38.643248), and the longitude of the ZIP code to six decimal places (such as -75.611025).  Please also provide the city and any other information required to verify the latitude and longitude for inclusion.</p>


<h3>Source</h3>

<p>The original file upon which <code>zips.tab</code> is based is available at <code>http://www.census.gov/
tiger/tms/gazetteer/zcta5.txt</code>, which is linked from <code>http://www.census.gov/
geo/www/gazetteer/places2k.html</code>.  The US Census Bureau's Geography Division produced these documents.  A few additions to the originals have been made.  See the <code>muRL</code> CHANGELOG for details.
</p>


<h3>References</h3>

<p>Further information about ZIP Code Tabulation Areas (ZCTAs) is available at 
</p>
<p><code>http://www.census.gov/geo/ZCTA/zcta.html</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(zips)

summary(zips$lat)
summary(zips$lon)

## Extracting latitude and longitude.
## Create a sample survey data frame with an ID variable, 
##   respondent ZIP code, state, and survey response:
svy1 &lt;- data.frame(id = c(1,2,3,4), zip = c("10001", "10001", "63130", "380HH"), 
          state = c("NY", "NY", "MO", "AR"), resp = c(1,2,1,5))
svy1
## Since ZIP 380HH spans three states, all are included:
svy2 &lt;- merge(svy1, zips, by = "zip", all.x = TRUE) 
svy2
## Merging by ZIP and state omits the duplicate 380HH entries:
svy3 &lt;- merge(svy1, zips, by = c("zip", "state"), all.x = TRUE)
svy3
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
