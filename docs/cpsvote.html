<!DOCTYPE html><html lang="en"><head><title>Help for package cpsvote</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {cpsvote}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#cps_2016_10k'><p>A sample of the raw 2016 CPS dataset</p></a></li>
<li><a href='#cps_allyears_10k'><p>A sample of the full CPS dataset</p></a></li>
<li><a href='#cps_cols'><p>Sample column specifications for reading CPS data</p></a></li>
<li><a href='#cps_download_data'><p>Download CPS microdata</p></a></li>
<li><a href='#cps_download_docs'><p>Download CPS technical documentation</p></a></li>
<li><a href='#cps_factors'><p>Sample factor specifications for reading CPS data</p></a></li>
<li><a href='#cps_label'><p>Apply factor levels to raw CPS data</p></a></li>
<li><a href='#cps_load_basic'><p>load some basic/default CPS data into the environment</p></a></li>
<li><a href='#cps_read'><p>Read in CPS data</p></a></li>
<li><a href='#cps_read_year'><p>Load a single CPS file</p></a></li>
<li><a href='#cps_recode_vote'><p>recode the voting variable for turnout calculations</p></a></li>
<li><a href='#cps_refactor'><p>combine factor levels across years</p></a></li>
<li><a href='#cps_reweight'><p>Calculations to reweight properly for voter turnout</p></a></li>
<li><a href='#cps_reweight_turnout'><p>apply weight correction for voter turnout</p></a></li>
<li><a href='#na_ifin'><p>vectorized <code>na_if</code></p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>A Toolbox for Using the CPSâ€™s Voting and Registration Supplement</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides automated methods for downloading, recoding, and merging 
    selected years of the Current Population Survey's Voting and Registration 
    Supplement, a large N national survey about registration, voting, and 
    non-voting in United States federal elections. Provides documentation for 
    appropriate use of sample weights to generate statistical estimates, 
    drawing from Hur &amp; Achen (2013) &lt;<a href="https://doi.org/10.1093%2Fpoq%2Fnft042">doi:10.1093/poq/nft042</a>&gt; and McDonald (2018) 
    <a href="http://www.electproject.org/home/voter-turnout/voter-turnout-data">http://www.electproject.org/home/voter-turnout/voter-turnout-data</a>.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/Reed-EVIC/cpsvote">https://github.com/Reed-EVIC/cpsvote</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/Reed-EVIC/cpsvote/issues">https://github.com/Reed-EVIC/cpsvote/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, survey, srvyr, here, scales, ggplot2, usmap</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>magrittr, readr, dplyr, stringr, forcats, rlang</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-10-27 16:14:53 UTC; jaylee</td>
</tr>
<tr>
<td>Author:</td>
<td>Jay Lee [aut, cre],
  Paul Gronke [aut],
  Canyon Foot [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jay Lee &lt;jaylee@reed.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-11-05 16:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic++25+3E+25">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='cps_2016_10k'>A sample of the raw 2016 CPS dataset</h2><span id='topic+cps_2016_10k'></span>

<h3>Description</h3>

<p>This is a 10,000 row sample of the data that comes out of
<code>cps_read(years = 2016)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cps_2016_10k
</code></pre>


<h3>Format</h3>

<p>A tibble with 10,000 rows and 17 columns:
</p>

<dl>
<dt>FILE</dt><dd><p>Which default file the case came from</p>
</dd>
<dt>YEAR</dt><dd><p>Year of interview</p>
</dd>
<dt>STATE</dt><dd><p>State postal abbreviation</p>
</dd>
<dt>AGE</dt><dd><p>Person's age as of the end of survey week;
topcoded at 80 and 85</p>
</dd>
<dt>SEX</dt><dd><p>Binary sex</p>
</dd>
<dt>EDUCATION</dt><dd><p>Highest level of school completed or degree received</p>
</dd>
<dt>RACE</dt><dd><p>Race</p>
</dd>
<dt>HISPANIC</dt><dd><p>Hispanic status</p>
</dd>
<dt>WEIGHT</dt><dd><p>Original CPS survey weight</p>
</dd>
<dt>VRS_VOTE</dt><dd><p>Whether respondent voted in the election; self-reported</p>
</dd>
<dt>VRS_REG</dt><dd><p>Whether respondent was registered to vote in the election;
self-reported</p>
</dd>
<dt>VRS_REG_WHYNOT</dt><dd><p>Reason for not being registered to vote</p>
</dd>
<dt>VRS_VOTE_WHYNOT</dt><dd><p>Reason for not voting</p>
</dd>
<dt>VRS_VOTEMODE_2004toPRESENT</dt><dd><p>Whether respondent voted by mail</p>
</dd>
<dt>VRS_VOTEWHEN_2004toPRESENT</dt><dd><p>Whether respondent voted on election day or
before</p>
</dd>
<dt>VRS_REG_METHOD</dt><dd><p>Method of registration</p>
</dd>
<dt>VRS_RESIDENCE</dt><dd><p>Duration of time living at current address</p>
</dd>
</dl>


<hr>
<h2 id='cps_allyears_10k'>A sample of the full CPS dataset</h2><span id='topic+cps_allyears_10k'></span>

<h3>Description</h3>

<p>This is a 10,000 row sample of the data that comes out of
<code>cpsvote::cps_load_basic</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cps_allyears_10k
</code></pre>


<h3>Format</h3>

<p>A tibble with 10,000 rows and 25 columns:
</p>

<dl>
<dt>FILE</dt><dd><p>Which default file the case came from</p>
</dd>
<dt>YEAR</dt><dd><p>Year of interview</p>
</dd>
<dt>STATE</dt><dd><p>State postal abbreviation</p>
</dd>
<dt>AGE</dt><dd><p>Person's age as of the end of survey week;
topcoded at 90 until 2002, 80 in 2004, and 80/85 after</p>
</dd>
<dt>SEX</dt><dd><p>Binary sex</p>
</dd>
<dt>EDUCATION</dt><dd><p>Highest level of school completed or degree received</p>
</dd>
<dt>RACE</dt><dd><p>Race</p>
</dd>
<dt>HISPANIC</dt><dd><p>Hispanic status</p>
</dd>
<dt>WEIGHT</dt><dd><p>Original CPS survey weight</p>
</dd>
<dt>VRS_VOTE</dt><dd><p>Whether respondent voted in the election; self-reported</p>
</dd>
<dt>VRS_REG</dt><dd><p>Whether respondent was registered to vote in the election;
self-reported</p>
</dd>
<dt>VRS_VOTE_TIME</dt><dd><p>What time of day respondent voted</p>
</dd>
<dt>VRS_RESIDENCE</dt><dd><p>Duration of time living at current address</p>
</dd>
<dt>VRS_VOTE_WHYNOT</dt><dd><p>Reason for not voting</p>
</dd>
<dt>VRS_VOTEMETHOD_1996to2002</dt><dd><p>Method of voting, pre-2004</p>
</dd>
<dt>VRS_REG_SINCE95</dt><dd><p>Whether respondent had registered to vote since 1995</p>
</dd>
<dt>VRS_REG_DMV</dt><dd><p>Whether respondent registered at the DMV</p>
</dd>
<dt>VRS_REG_METHOD</dt><dd><p>Method of registration</p>
</dd>
<dt>VRS_REG_WHYNOT</dt><dd><p>Reason for not being registered to vote</p>
</dd>
<dt>VRS_VOTEMODE_2004toPRESENT</dt><dd><p>Whether respondent voted by mail, 2004 on</p>
</dd>
<dt>VRS_VOTEWHEN_2004toPRESENT</dt><dd><p>Whether respondent voted on election day or
before, 2004 on</p>
</dd>
<dt>VRS_VOTEMETHOD_CON</dt><dd><p>A consolidation of VRS_VOTEMETHOD_1996to2002,
VRS_VOTEMODE_2004toPRESENT, and VRS_VOTEWHEN_2004toPRESENT</p>
</dd>
<dt>cps_turnout</dt><dd><p>Recode of VRS_VOTE for CPS turnout calculation</p>
</dd>
<dt>hurachen_turnout</dt><dd><p>Recode of VRS_VOTE for adjusted Hur &amp; Achen turnout
calculation</p>
</dd>
<dt>turnout_weight</dt><dd><p>Adjusted weight for calculating voter turnout (per
Hur &amp; Achen)</p>
</dd>
</dl>


<hr>
<h2 id='cps_cols'>Sample column specifications for reading CPS data</h2><span id='topic+cps_cols'></span>

<h3>Description</h3>

<p>Because the CPS is a fixed-width file that changes data locations (and variable
names) across years, to correctly read the data you have to specify which
start/end positions correspond to which column names in each year. This is one
such specification. To add extra data or change column names, see the Vignette.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cps_cols
</code></pre>


<h3>Format</h3>

<p>A data frame with 204 rows and 8 columns:
</p>

<dl>
<dt>year</dt><dd><p>year</p>
</dd>
<dt>cps_name</dt><dd><p>original column name as given by the CPS</p>
</dd>
<dt>new_name</dt><dd><p>a new name, which tries to describe the variable and join
sensibly across multiple years</p>
</dd>
<dt>start_pos</dt><dd><p>which character of a line the variable starts with</p>
</dd>
<dt>end_pos</dt><dd><p>which character of a line the variable ends with</p>
</dd>
<dt>col_type</dt><dd><p>whether the column is character, numeric, or a factor</p>
</dd>
<dt>description</dt><dd><p>the question text/description from the CPS</p>
</dd>
<dt>notes</dt><dd><p>any notes for question administration or analysis</p>
</dd>
</dl>


<hr>
<h2 id='cps_download_data'>Download CPS microdata</h2><span id='topic+cps_download_data'></span>

<h3>Description</h3>

<p>Download CPS microdata
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cps_download_data(
  path = "cps_data",
  years = seq(1994, 2018, 2),
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cps_download_data_+3A_path">path</code></td>
<td>
<p>A file path (relative or absolute) where the downloads should go.</p>
</td></tr>
<tr><td><code id="cps_download_data_+3A_years">years</code></td>
<td>
<p>Which years of data to download. Defaults to all
even-numbered years from 1994 to 2018.</p>
</td></tr>
<tr><td><code id="cps_download_data_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical, whether to write over existing files or not.
Defaults to FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li><p> File names will be written in the style &quot;cps_nov2018.zip&quot;, with the
appropriate years.
</p>
</li>
<li><p> The Voting and Registration Supplement is only conducted in even-numbered
years (since 1964), so any entry in <code>years</code> outside of this will be skipped.
</p>
</li>
<li><p> Currently the package only supports downloads from 1994 onwards, so any
entry in <code>years</code> before 1994 will be skipped.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cps_download_data(path = "cps_docs", years = 2016, overwrite = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='cps_download_docs'>Download CPS technical documentation</h2><span id='topic+cps_download_docs'></span>

<h3>Description</h3>

<p>Download CPS technical documentation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cps_download_docs(
  path = "cps_docs",
  years = seq(1994, 2018, 2),
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cps_download_docs_+3A_path">path</code></td>
<td>
<p>A file path (relative or absolute) where the downloads should go.</p>
</td></tr>
<tr><td><code id="cps_download_docs_+3A_years">years</code></td>
<td>
<p>Which years of documentation to download. Defaults to all
even-numbered years from 1994 to 2018.</p>
</td></tr>
<tr><td><code id="cps_download_docs_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical, whether to write over existing files or not.
Defaults to FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li><p> File names will be written in the style &quot;cps_nov2018.pdf&quot;, with the
appropriate years.
</p>
</li>
<li><p> The Voting and Registration Supplement is only conducted in even-numbered
years (since 1964), so any entry in <code>years</code> outside of this will be skipped.
</p>
</li>
<li><p> Currently the package only supports downloads from 1994 onwards, so any
entry in <code>years</code> before 1994 will be skipped.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cps_download_docs(path = "cps_docs", years = 2016, overwrite = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='cps_factors'>Sample factor specifications for reading CPS data</h2><span id='topic+cps_factors'></span>

<h3>Description</h3>

<p>Because the CPS changes factor levels across years, to correctly read the data
you have to specify which numeric codes correspond to which character values
in each year. This is one such specification. To add extra data, see the Vignette.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cps_factors
</code></pre>


<h3>Format</h3>

<p>A data frame with 204 rows and 8 columns:
</p>

<dl>
<dt>year</dt><dd><p>year</p>
</dd>
<dt>cps_name</dt><dd><p>original column name as given by the CPS</p>
</dd>
<dt>new_name</dt><dd><p>a new name, which tries to describe the variable and join
sensibly across multiple years</p>
</dd>
<dt>code</dt><dd><p>the numeric code contained in the raw CPS data</p>
</dd>
<dt>value</dt><dd><p>the character value corresponding to each numeric code</p>
</dd>
</dl>



<h3>Details</h3>

<p>These match the exact specifications from the CPS, including NA codes
and any typos that occur (e.g., &quot;Hipsanic&quot; is common in older years).
</p>

<hr>
<h2 id='cps_label'>Apply factor levels to raw CPS data</h2><span id='topic+cps_label'></span>

<h3>Description</h3>

<p>The CPS publishes their data in a numeric format, with a separate
PDF codebook (not machine readable) describing factor values. This function
labels the raw numeric CPS data according to a supplied factor key. Codes
that appear in a given year and are not included in <code>factors</code> will be
recoded as <code>NA</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cps_label(
  data,
  factors = cpsvote::cps_factors,
  names_col = "new_name",
  na_vals = c("-1", "BLANK", "NOT IN UNIVERSE"),
  expand_year = TRUE,
  rescale_weight = TRUE,
  toupper = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cps_label_+3A_data">data</code></td>
<td>
<p>The raw CPS data that factors should be applied to</p>
</td></tr>
<tr><td><code id="cps_label_+3A_factors">factors</code></td>
<td>
<p>A data frame containing the label codes to be applied</p>
</td></tr>
<tr><td><code id="cps_label_+3A_names_col">names_col</code></td>
<td>
<p>Which column of <code>factors</code> contains the column names of <code>data</code></p>
</td></tr>
<tr><td><code id="cps_label_+3A_na_vals">na_vals</code></td>
<td>
<p>Which character values should be considered &quot;missing&quot; across
the dataset and be set to NA after labelling</p>
</td></tr>
<tr><td><code id="cps_label_+3A_expand_year">expand_year</code></td>
<td>
<p>Whether to change the two-digit year listed in earlier surveys
(94, 96) into a four-digit year (1994, 1996)</p>
</td></tr>
<tr><td><code id="cps_label_+3A_rescale_weight">rescale_weight</code></td>
<td>
<p>Whether to rescale the weight, dividing by 10,000. The
CPS describes the given weight as having &quot;four implied decimals&quot;, so this
rescaling adjusts the weight to produce sensible population totals.</p>
</td></tr>
<tr><td><code id="cps_label_+3A_toupper">toupper</code></td>
<td>
<p>Whether to convert all factor levels to uppercase</p>
</td></tr>
</table>


<h3>Value</h3>

<p>CPS data with factor labels in place of the raw numeric data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cps_label(cps_2016_10k)

</code></pre>

<hr>
<h2 id='cps_load_basic'>load some basic/default CPS data into the environment</h2><span id='topic+cps_load_basic'></span>

<h3>Description</h3>

<p>This function is a quick starter to working with the CPS, using all of the
defaults that are baked into this package. Because the data is so large, it
made more sense to ship a &quot;basic&quot; CPS data set as a function rather than as a
package data object (which would have been over 10 MB). This function will
take you from nothing to having some basic CPS data in your environment, with
the option to save this data locally for future ease. A sample of the data
that comes out of this function is provided as <code>cpsvote::cps_allyears_10k</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cps_load_basic(years = seq(1994, 2018, 2), datadir = "cps_data", outdir = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cps_load_basic_+3A_years">years</code></td>
<td>
<p>Which years should be read</p>
</td></tr>
<tr><td><code id="cps_load_basic_+3A_datadir">datadir</code></td>
<td>
<p>The location where the CPS zip files live (or should be
downloaded to)</p>
</td></tr>
<tr><td><code id="cps_load_basic_+3A_outdir">outdir</code></td>
<td>
<p>The location where the final data file should be saved to</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: cps_load-basic(years = 2016, outdir = "data")

</code></pre>

<hr>
<h2 id='cps_read'>Read in CPS data</h2><span id='topic+cps_read'></span>

<h3>Description</h3>

<p>Load multiple years of data from the Current Population Survey.
This function will also download the data for you, if it is not present in
the given <code>dir</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cps_read(
  years = seq(1994, 2018, 2),
  dir = "cps_data",
  cols = cpsvote::cps_cols,
  names_col = "new_name",
  join_dfs = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cps_read_+3A_years">years</code></td>
<td>
<p>Which years to read in. Thie function will read data from files
in <code>dir</code> whose names contain these 4-digit years.</p>
</td></tr>
<tr><td><code id="cps_read_+3A_dir">dir</code></td>
<td>
<p>The folder where the CPS data files live. These files should
follow a naming scheme that contains the 4-digit year of the results in
question, and have a &quot;.zip&quot; or &quot;.gz&quot; extension.</p>
</td></tr>
<tr><td><code id="cps_read_+3A_cols">cols</code></td>
<td>
<p>Which columns to read. This must be a data frame, with required
columns <code>start_pos</code>,<code>end_pos</code>, and <code>year</code>. The default value is <code>cps_cols</code>,
which reads from the list <code>cpsvote::cps_cols</code>. See <code>vignette("add-variables")</code>
for details about how to specify a different set of <code>cols</code>.</p>
</td></tr>
<tr><td><code id="cps_read_+3A_names_col">names_col</code></td>
<td>
<p>The column in <code>cols</code> that contains column names for the
specified columns. If none exists, use <code>names_col = NULL</code></p>
</td></tr>
<tr><td><code id="cps_read_+3A_join_dfs">join_dfs</code></td>
<td>
<p>Whether to combine all of the years into a single data frame,
or leave them as a list of data frames. Defaults to <code>TRUE</code> with a warning.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame, or list of data frames
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: cps_read(years = 2016, names_col = "new_name")

</code></pre>

<hr>
<h2 id='cps_read_year'>Load a single CPS file</h2><span id='topic+cps_read_year'></span>

<h3>Description</h3>

<p>Read one year of data from the Current Population Survey
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cps_read_year(
  file,
  cols = cpsvote::cps_cols,
  names_col = "new_name",
  year = as.numeric(stringr::str_extract(file, "\\d{4}"))
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cps_read_year_+3A_file">file</code></td>
<td>
<p>Where the fixed-width or zip/gz file for this year's data lives</p>
</td></tr>
<tr><td><code id="cps_read_year_+3A_cols">cols</code></td>
<td>
<p>Which columns to read. This must be a data frame, with required
columns <code>start_pos</code> and <code>end_pos</code>. The default value is <code>cps_cols</code>, which
reads from the list <code>cpsvote::cps_cols</code>. See <code>vignette("add-variables")</code> for
details about how to specify a different set of <code>cols</code>.</p>
</td></tr>
<tr><td><code id="cps_read_year_+3A_names_col">names_col</code></td>
<td>
<p>The column in <code>cols</code> that contains column names for the
specified columns. If none exists, use <code>names_col = NULL</code></p>
</td></tr>
<tr><td><code id="cps_read_year_+3A_year">year</code></td>
<td>
<p>Which year is being read; defaults to 4-digit year in file name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame, with dimensions depending on the year and columns specified
</p>

<hr>
<h2 id='cps_recode_vote'>recode the voting variable for turnout calculations</h2><span id='topic+cps_recode_vote'></span>

<h3>Description</h3>

<p>When the CPS calculates voter turnout, they consider the values &quot;Don't know&quot;,
&quot;Refused&quot;, and &quot;No response&quot; to be non-voters, that is they lump these in
with &quot;No&quot;. With increased levels of survey non-response in recent years, this
has caused turnout estimates to artificially deflate when compared to
measures of voter turnout from state election offices. This function adds two
recodes of the original voting variable, one which applies the CPS recoding
where multiple categories map to &quot;No&quot;, and one which follows the guidelines
from Hur &amp; Achen (2013) of setting these categories to <code>NA</code>. See the Vignette
for more information on this process.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cps_recode_vote(
  data,
  vote_col = "VRS_VOTE",
  items = c("DON'T KNOW", "REFUSED", "NO RESPONSE")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cps_recode_vote_+3A_data">data</code></td>
<td>
<p>the input data set</p>
</td></tr>
<tr><td><code id="cps_recode_vote_+3A_vote_col">vote_col</code></td>
<td>
<p>which column contains the voting variable</p>
</td></tr>
<tr><td><code id="cps_recode_vote_+3A_items">items</code></td>
<td>
<p>which items should be &quot;No&quot; in the CPS coding and <code>NA</code> in the
Hur &amp; Achen coding</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data</code> with two columns attached, <code>cps_turnout</code> and <code>hurachen_turnout</code>,
voting variables recoded according to the process above
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cps_recode_vote(cps_refactor(cps_label(cps_2016_10k)))

</code></pre>

<hr>
<h2 id='cps_refactor'>combine factor levels across years</h2><span id='topic+cps_refactor'></span>

<h3>Description</h3>

<p>The response sets in certain CPS questions change between years. This function
consolidates several of these response sets across years (and fixes typos
from the CPS documentation), specifically race, Hispanic status, duration of
residency, reason for not voting, and method of registration. Additionally,
this creates a new column <code>VRS_VOTEMETHOD_CON</code> which consolidates multiple
expressions of vote method across years (By Mail, Early, and Election Day)
into one variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cps_refactor(data, move_levels = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cps_refactor_+3A_data">data</code></td>
<td>
<p>A dataset containing already-labelled CPS data</p>
</td></tr>
<tr><td><code id="cps_refactor_+3A_move_levels">move_levels</code></td>
<td>
<p>Whether to move the levels &quot;OTHER&quot;, &quot;DON'T KNOW&quot;, and
&quot;REFUSED&quot; to the end of each factor's level set</p>
</td></tr>
</table>


<h3>Details</h3>

<p>While consolidating response sets across multiple surveys can be
fraught with peril, this function attempts to combine disparate levels for
race and other CPS variable across multiple years. Some of these are
relatively straightforward typos fixes (&quot;NON-HIPSANIC&quot; should clearly match
&quot;NON-HISPANIC&quot;), but others have differing degrees of subjectivity applied.
Take this function with a grain of salt, as it depends on some exact variable
names you may or may not be using, and recode variables as needed for your
own uses. To explore exactly how these variables were recoded, you can run
<code>table(data$RACE, cps_refactor(data)$RACE)</code> in the console, substituting
your column of interest in for <code>RACE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cps_refactor(cps_label(cps_2016_10k))

</code></pre>

<hr>
<h2 id='cps_reweight'>Calculations to reweight properly for voter turnout</h2><span id='topic+cps_reweight'></span>

<h3>Description</h3>

<p>While the U.S. Census Bureau provides one weight with the CPS, a modified
weight is needed to properly calculate voter turnout. This data set provides
those calculations, according to Hur and Achen (2013). The comparison data
comes from Dr. Michael McDonald's estimates of voter turnout among the
voting-eligible population (VEP). It can be joined with CPS data to
calculate the new weights needed for analysis, using the function
<code>cps_reweight_turnout</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cps_reweight
</code></pre>


<h3>Format</h3>

<p>A tibble with 1,326 rows and 6 columns:
</p>

<dl>
<dt>YEAR</dt><dd><p>year</p>
</dd>
<dt>STATE</dt><dd><p>state</p>
</dd>
<dt>response</dt><dd><p>indicator of turnout in recent election</p>
</dd>
<dt>vep_turnout</dt><dd><p>proportion of turnout indicator, calculated by McDonald</p>
</dd>
<dt>cps_turnout</dt><dd><p>proportion of turnout indicator, calculated by CPS</p>
</dd>
<dt>reweight</dt><dd><p>the factor by which to scale original CPS weights</p>
</dd>
</dl>



<h3>Source</h3>

<p>Turnout data from <a href="http://www.electproject.org/home/voter-turnout/voter-turnout-data">http://www.electproject.org/home/voter-turnout/voter-turnout-data</a>
</p>

<hr>
<h2 id='cps_reweight_turnout'>apply weight correction for voter turnout</h2><span id='topic+cps_reweight_turnout'></span>

<h3>Description</h3>

<p>This function applies the turnout correction recommended by Hur &amp; Achen
(2013). The data set containing the scaling factor is <code>cpsvote::cps_reweight</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cps_reweight_turnout(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cps_reweight_turnout_+3A_data">data</code></td>
<td>
<p>the input data set, containing columns <code>YEAR</code>, <code>STATE</code>, and
<code>hurachen_turnout</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>cps_reweight_turnout(cps_recode_vote(cps_refactor(cps_label(cps_2016_10k))))

</code></pre>

<hr>
<h2 id='na_ifin'>vectorized <code>na_if</code></h2><span id='topic+na_ifin'></span>

<h3>Description</h3>

<p>vectorized <code>na_if</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>na_ifin(x, y)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="na_ifin_+3A_x">x</code></td>
<td>
<p>the vector to be checked</p>
</td></tr>
<tr><td><code id="na_ifin_+3A_y">y</code></td>
<td>
<p>the values which should be replaced with NA</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
