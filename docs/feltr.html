<!DOCTYPE html><html lang="en"><head><title>Help for package feltr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {feltr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#felt_add_map_layers'><p>Add Layers to Existing Map</p></a></li>
<li><a href='#felt_add_map_layers_url'><p>Add Layers to Existing Map from URL</p></a></li>
<li><a href='#felt_create_map'><p>Create a new map</p></a></li>
<li><a href='#felt_delete_map'><p>Delete an existing map</p></a></li>
<li><a href='#felt_delete_map_layer'><p>Delete Layer from an Existing Map</p></a></li>
<li><a href='#felt_finish_upload'><p>Finish Upload</p></a></li>
<li><a href='#felt_get_comments'><p>Export Comments on an Existing Map</p></a></li>
<li><a href='#felt_get_map'><p>Get Map Information from Map ID</p></a></li>
<li><a href='#felt_get_map_elements'><p>Get Map Elements from Map ID</p></a></li>
<li><a href='#felt_get_style'><p>Get Felt Style Information for a Layer</p></a></li>
<li><a href='#felt_get_user'><p>Obtain information about the user</p></a></li>
<li><a href='#felt_patch_style'><p>Update Felt Style Information for a Layer</p></a></li>
<li><a href='#key'><p>Check or Get Felt API Key</p></a></li>
<li><a href='#set_felt_key'><p>Add Entry to Renviron</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Access the Felt API</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.4</td>
</tr>
<tr>
<td>Description:</td>
<td>Upload, download, and edit internet maps with the Felt API 
    (<a href="https://feltmaps.notion.site/Felt-Public-API-reference-c01e0e6b0d954a678c608131b894e8e1">https://feltmaps.notion.site/Felt-Public-API-reference-c01e0e6b0d954a678c608131b894e8e1</a>). 
    Allows users to create new maps, edit existing maps, and extract data.
    Provides tools for working with layers, which represent geographic data, and elements,
    which are interactive annotations. Spatial data accessed from the API is 
    transformed to work with 'sf'.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, curl, fs, geojsonsf, httr2, jsonlite, purrr, rlang, sf,
stringr, tibble, tidyr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/christopherkenny/feltr">https://github.com/christopherkenny/feltr</a>,
<a href="https://christophertkenny.com/feltr/">https://christophertkenny.com/feltr/</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>httptest2, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-05 19:41:08 UTC; chris</td>
</tr>
<tr>
<td>Author:</td>
<td>Christopher T. Kenny
    <a href="https://orcid.org/0000-0002-9386-6860"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Christopher T. Kenny &lt;christopherkenny@fas.harvard.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-05 20:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='felt_add_map_layers'>Add Layers to Existing Map</h2><span id='topic+felt_add_map_layers'></span>

<h3>Description</h3>

<p>Add Layers to Existing Map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>felt_add_map_layers(
  map_id,
  name = NULL,
  file_names = NULL,
  fill_color = NULL,
  stroke_color = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="felt_add_map_layers_+3A_map_id">map_id</code></td>
<td>
<p>map identifier from url, from <code style="white-space: pre;">&#8288;https://felt.com/map/Readable-Name-map_id&#8288;</code></p>
</td></tr>
<tr><td><code id="felt_add_map_layers_+3A_name">name</code></td>
<td>
<p>Name of the layer</p>
</td></tr>
<tr><td><code id="felt_add_map_layers_+3A_file_names">file_names</code></td>
<td>
<p>Files to include</p>
</td></tr>
<tr><td><code id="felt_add_map_layers_+3A_fill_color">fill_color</code></td>
<td>
<p>Color to fill shape with, typically a hexcode. Defaults to <code>NULL</code>.v</p>
</td></tr>
<tr><td><code id="felt_add_map_layers_+3A_stroke_color">stroke_color</code></td>
<td>
<p>Color to outline shape with, typically a hexcode. Defaults to <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a string with the id for the created layer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
layer &lt;- felt_add_map_layers(map_id = 'Rockland-2024-Districts-TBI8sDkmQjuK2GX9CSiHiUA',
                    file_names = fs::path_package('feltr',  'towns.geojson'),
                    name = 'Towns')
layer
# and delete layer
felt_delete_map_layer(map_id = 'TBI8sDkmQjuK2GX9CSiHiUA', layer_id = layer)

</code></pre>

<hr>
<h2 id='felt_add_map_layers_url'>Add Layers to Existing Map from URL</h2><span id='topic+felt_add_map_layers_url'></span>

<h3>Description</h3>

<p>See <a href="https://feltmaps.notion.site/b26d739e80184127872faa923b55d232?pvs=25#3e37f06bc38c4971b435fbff2f4da6cb">Felt &quot;Upload Anything&quot; documentation</a>
for detailed examples of potential URLs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>felt_add_map_layers_url(map_id, url, name = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="felt_add_map_layers_url_+3A_map_id">map_id</code></td>
<td>
<p>map identifier from url, from <code style="white-space: pre;">&#8288;https://felt.com/map/Readable-Name-map_id&#8288;</code></p>
</td></tr>
<tr><td><code id="felt_add_map_layers_url_+3A_url">url</code></td>
<td>
<p>Link to layer to include</p>
</td></tr>
<tr><td><code id="felt_add_map_layers_url_+3A_name">name</code></td>
<td>
<p>Name of the layer</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <a href="tibble.html#topic+tibble">tibble::tibble</a> for the created layer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# split the URL for length reasons
url &lt;- paste0(
'https://www.rocklandgis.com/portal/sharing/rest/',
'content/items/73fc78cb0fb04580b4788937fe5ee697/data'
)
layer &lt;- felt_add_map_layers_url(
    map_id = 'Rockland-2024-Districts-TBI8sDkmQjuK2GX9CSiHiUA',
    url = url,
    name = 'Parks')
layer
# and delete the new layer
felt_delete_map_layer(map_id = 'TBI8sDkmQjuK2GX9CSiHiUA',  layer_id = layer$id)

</code></pre>

<hr>
<h2 id='felt_create_map'>Create a new map</h2><span id='topic+felt_create_map'></span>

<h3>Description</h3>

<p>Create a new map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>felt_create_map(
  title = NULL,
  basemap = NULL,
  layer_urls = NULL,
  lat = NULL,
  lon = NULL,
  zoom = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="felt_create_map_+3A_title">title</code></td>
<td>
<p>Title to use for the map. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="felt_create_map_+3A_basemap">basemap</code></td>
<td>
<p>Basemap for the new map. Defaults to <code>NULL</code>. Can be a URL or color hex code</p>
</td></tr>
<tr><td><code id="felt_create_map_+3A_layer_urls">layer_urls</code></td>
<td>
<p>vector of URLs to generate layers in map. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="felt_create_map_+3A_lat">lat</code></td>
<td>
<p>latitude to center the map. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="felt_create_map_+3A_lon">lon</code></td>
<td>
<p>longitude to center the map. Defaults to <code>NULL</code></p>
</td></tr>
<tr><td><code id="felt_create_map_+3A_zoom">zoom</code></td>
<td>
<p>zoom level to initialize the map with.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <a href="tibble.html#topic+tibble">tibble::tibble</a> for the new map
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
map &lt;- felt_create_map(title = 'feltr example')
map
# and delete it again
felt_delete_map(map_id = map$id)

</code></pre>

<hr>
<h2 id='felt_delete_map'>Delete an existing map</h2><span id='topic+felt_delete_map'></span>

<h3>Description</h3>

<p>Delete an existing map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>felt_delete_map(map_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="felt_delete_map_+3A_map_id">map_id</code></td>
<td>
<p>map identifier from url, from <code style="white-space: pre;">&#8288;https://felt.com/map/Readable-Name-map_id&#8288;</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>response code
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
map &lt;- felt_create_map(title = 'feltr example')
felt_delete_map(map_id = map$id)

</code></pre>

<hr>
<h2 id='felt_delete_map_layer'>Delete Layer from an Existing Map</h2><span id='topic+felt_delete_map_layer'></span>

<h3>Description</h3>

<p>Delete Layer from an Existing Map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>felt_delete_map_layer(map_id, layer_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="felt_delete_map_layer_+3A_map_id">map_id</code></td>
<td>
<p>map identifier from url, from <code style="white-space: pre;">&#8288;https://felt.com/map/Readable-Name-map_id&#8288;</code></p>
</td></tr>
<tr><td><code id="felt_delete_map_layer_+3A_layer_id">layer_id</code></td>
<td>
<p>layer identifier, as returned by <code>felt_get_map_layers()</code> or <code>felt_add_map_layers()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>response code
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
layer &lt;- felt_add_map_layers('TBI8sDkmQjuK2GX9CSiHiUA',
          'test', fs::path_package('feltr', 'towns.geojson'))
felt_delete_map_layer(map_id = 'Rockland-2024-Districts-TBI8sDkmQjuK2GX9CSiHiUA',
         layer)

</code></pre>

<hr>
<h2 id='felt_finish_upload'>Finish Upload</h2><span id='topic+felt_finish_upload'></span>

<h3>Description</h3>

<p>Uploads are redirected to Amazon S3 buckets and must be confirmed once done.
This function is <em>primarily</em> internal, but may have uses for custom uploads.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>felt_finish_upload(map_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="felt_finish_upload_+3A_map_id">map_id</code></td>
<td>
<p>map identifier from url, from <code style="white-space: pre;">&#8288;https://felt.com/map/Readable-Name-map_id&#8288;</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>httr2</code> status code
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
felt_finish_upload('TBI8sDkmQjuK2GX9CSiHiUA')

</code></pre>

<hr>
<h2 id='felt_get_comments'>Export Comments on an Existing Map</h2><span id='topic+felt_get_comments'></span>

<h3>Description</h3>

<p>Export Comments on an Existing Map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>felt_get_comments(map_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="felt_get_comments_+3A_map_id">map_id</code></td>
<td>
<p>map identifier from url, from <code style="white-space: pre;">&#8288;https://felt.com/map/Readable-Name-map_id&#8288;</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <a href="tibble.html#topic+tibble">tibble::tibble</a> for the map
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
felt_get_comments(map_id = 'Rockland-2024-Districts-TBI8sDkmQjuK2GX9CSiHiUA')

</code></pre>

<hr>
<h2 id='felt_get_map'>Get Map Information from Map ID</h2><span id='topic+felt_get_map'></span><span id='topic+felt_get_map_layers'></span>

<h3>Description</h3>


<ul>
<li> <p><code>felt_get_map()</code> returns identifying information for the map
</p>
</li>
<li> <p><code>felt_get_map_layers()</code> returns information about each layer in the map
</p>
</li>
<li> <p><code>felt_get_map_elements()</code> returns the shapes for each layer in the map
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>felt_get_map(map_id)

felt_get_map_layers(map_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="felt_get_map_+3A_map_id">map_id</code></td>
<td>
<p>map identifier from url, from <code style="white-space: pre;">&#8288;https://felt.com/map/Readable-Name-map_id&#8288;</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <a href="tibble.html#topic+tibble">tibble::tibble</a> for the map
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
felt_get_map('Rockland-2024-Districts-TBI8sDkmQjuK2GX9CSiHiUA')
felt_get_map_layers('Rockland-2024-Districts-TBI8sDkmQjuK2GX9CSiHiUA')

# slower, as it has to build the shapes from the API result
felt_get_map_elements('Rockland-2024-Districts-TBI8sDkmQjuK2GX9CSiHiUA')


</code></pre>

<hr>
<h2 id='felt_get_map_elements'>Get Map Elements from Map ID</h2><span id='topic+felt_get_map_elements'></span>

<h3>Description</h3>

<p>Get Map Elements from Map ID
</p>


<h3>Usage</h3>

<pre><code class='language-R'>felt_get_map_elements(map_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="felt_get_map_elements_+3A_map_id">map_id</code></td>
<td>
<p>map identifier from url, from <code style="white-space: pre;">&#8288;https://felt.com/map/Map-ID&#8288;</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <a href="tibble.html#topic+tibble">tibble::tibble</a> for the map
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
felt_get_map_elements(map_id = 'Rockland-2024-Districts-TBI8sDkmQjuK2GX9CSiHiUA')

</code></pre>

<hr>
<h2 id='felt_get_style'>Get Felt Style Information for a Layer</h2><span id='topic+felt_get_style'></span>

<h3>Description</h3>

<p>For details on the Felt Style Language, see <a href="https://felt.com/blog/felt-style-language">https://felt.com/blog/felt-style-language</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>felt_get_style(map_id, layer_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="felt_get_style_+3A_map_id">map_id</code></td>
<td>
<p>map identifier from url, from <code style="white-space: pre;">&#8288;https://felt.com/map/Readable-Name-map_id&#8288;</code></p>
</td></tr>
<tr><td><code id="felt_get_style_+3A_layer_id">layer_id</code></td>
<td>
<p>layer identifier, as returned by <code>felt_get_map_layers()</code> or <code>felt_add_map_layers()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list version of style information
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
felt_get_style(map_id = 'TBI8sDkmQjuK2GX9CSiHiUA', layer_id = 'Qno0gfmkTS9BggbesfQooND')

</code></pre>

<hr>
<h2 id='felt_get_user'>Obtain information about the user</h2><span id='topic+felt_get_user'></span>

<h3>Description</h3>

<p>Obtain information about the user
</p>


<h3>Usage</h3>

<pre><code class='language-R'>felt_get_user()
</code></pre>


<h3>Value</h3>

<p>a <a href="tibble.html#topic+tibble">tibble::tibble</a> of information about the user
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
felt_get_user()

</code></pre>

<hr>
<h2 id='felt_patch_style'>Update Felt Style Information for a Layer</h2><span id='topic+felt_patch_style'></span>

<h3>Description</h3>

<p>For details on the Felt Style Language, see <a href="https://felt.com/blog/felt-style-language">https://felt.com/blog/felt-style-language</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>felt_patch_style(map_id, layer_id, fsl)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="felt_patch_style_+3A_map_id">map_id</code></td>
<td>
<p>map identifier from url, from <code style="white-space: pre;">&#8288;https://felt.com/map/Readable-Name-map_id&#8288;</code></p>
</td></tr>
<tr><td><code id="felt_patch_style_+3A_layer_id">layer_id</code></td>
<td>
<p>layer identifier, as returned by <code>felt_get_map_layers()</code> or <code>felt_add_map_layers()</code></p>
</td></tr>
<tr><td><code id="felt_patch_style_+3A_fsl">fsl</code></td>
<td>
<p>A list indicating the Felt style language to update the layer to</p>
</td></tr>
</table>


<h3>Value</h3>

<p>response data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
felt_get_style(map_id = 'TBI8sDkmQjuK2GX9CSiHiUA', layer_id = 'Qno0gfmkTS9BggbesfQooND')

</code></pre>

<hr>
<h2 id='key'>Check or Get Felt API Key</h2><span id='topic+key'></span><span id='topic+has_felt_key'></span><span id='topic+get_felt_key'></span>

<h3>Description</h3>

<p>Check or Get Felt API Key
</p>


<h3>Usage</h3>

<pre><code class='language-R'>has_felt_key()

get_felt_key()
</code></pre>


<h3>Value</h3>

<p>logical if <code>has</code>, key if <code>get</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>has_felt_key()
</code></pre>

<hr>
<h2 id='set_felt_key'>Add Entry to Renviron</h2><span id='topic+set_felt_key'></span>

<h3>Description</h3>

<p>Adds Felt API key to .Renviron.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_felt_key(key, overwrite = FALSE, install = FALSE, r_env = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_felt_key_+3A_key">key</code></td>
<td>
<p>Character. API key to add to add.</p>
</td></tr>
<tr><td><code id="set_felt_key_+3A_overwrite">overwrite</code></td>
<td>
<p>Defaults to FALSE. Boolean. Should existing <code>FELT_KEY</code> in Renviron be overwritten?</p>
</td></tr>
<tr><td><code id="set_felt_key_+3A_install">install</code></td>
<td>
<p>Defaults to FALSE. Boolean. Should this be added to an environment file, <code>r_env</code>?</p>
</td></tr>
<tr><td><code id="set_felt_key_+3A_r_env">r_env</code></td>
<td>
<p>Path to install to if <code>install</code> is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>key, invisibly
</p>


<h3>Examples</h3>

<pre><code class='language-R'>example_env &lt;- tempfile(fileext = '.Renviron')
set_felt_key('1234', r_env = example_env)
# r_env should likely be: file.path(Sys.getenv('HOME'), '.Renviron')
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
