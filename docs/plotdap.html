<!DOCTYPE html><html lang="en"><head><title>Help for package plotdap</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {plotdap}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#plotdap-package'><p>plotdap: Easily Visualize Data from 'ERDDAP' Servers via the 'rerddap' Package</p></a></li>
<li><a href='#add_ggplot'><p>Add ggplot2 elements to a plotdap object</p></a></li>
<li><a href='#add_griddap'><p>Add rerddap::griddap() data to a plotdap map</p></a></li>
<li><a href='#add_tabledap'><p>Add rerddap::tabledap data to a plotdap map</p></a></li>
<li><a href='#bbox_set'><p>change bounding box in plotdap object</p></a></li>
<li><a href='#murSST'><p>murSST Data</p></a></li>
<li><a href='#plotdap'><p>Visualize rerddap data</p></a></li>
<li><a href='#print.ggplotdap'><p>Print a ggplot plotdap object</p></a></li>
<li><a href='#print.plotdap'><p>Print a plotdap object</p></a></li>
<li><a href='#QMwind'><p>QMwind Data</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#sardines'><p>sardine Data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Easily Visualize Data from 'ERDDAP' Servers via the 'rerddap'
Package</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-10-17</td>
</tr>
<tr>
<td>Description:</td>
<td>Easily visualize and animate 'tabledap' and 'griddap' objects obtained via the 'rerddap' package in a simple one-line command,  using either base graphics or 'ggplot2' graphics. 'plotdap' handles extracting and reshaping the data,  map projections and continental outlines.  Optionally the data can be animated through time using the 'gganmiate' package.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/rmendels/plotdap">https://github.com/rmendels/plotdap</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rmendels/plotdap/issues">https://github.com/rmendels/plotdap/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cmocean, dplyr, gganimate, ggnewscale, ggplot2 (&ge; 3.1.0),
lazyeval, lubridate, magrittr, mapdata, maps, raster, rerddap
(&ge; 0.8.0), scales, sf, tidyr, viridis</td>
</tr>
<tr>
<td>Suggests:</td>
<td>Cairo, knitr, rmarkdown, testthat</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-17 21:21:58 UTC; rmendels</td>
</tr>
<tr>
<td>Author:</td>
<td>Carson Sievert [aut],
  Roy Mendelssohn [aut, ctb, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Roy Mendelssohn &lt;roy.mendelssohn@noaa.gov&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-17 22:00:15 UTC</td>
</tr>
</table>
<hr>
<h2 id='plotdap-package'>plotdap: Easily Visualize Data from 'ERDDAP' Servers via the 'rerddap' Package</h2><span id='topic+plotdap-package'></span><span id='topic+_PACKAGE'></span>

<h3>Description</h3>

<p>Easily visualize and animate 'tabledap' and 'griddap' objects obtained via the
'rerddap' package in a simple one-line command,  using either base graphics or
'ggplot2' graphics. 'plotdap' handles extracting and reshaping the data,  map
projections and continental outlines.  Optionally the data can be animated
through time using the 'gganmiate' package.#'
</p>


<h3>Details</h3>

<p>The package contains four main functions:
</p>


<h3>Main Functions</h3>


<ul>
<li> <p><code>plotdap</code> - Visualize data returned from rerddap servers.
</p>
</li>
<li> <p><code>add_griddap</code> - Add rerddap::griddap() data to a plotdap map
</p>
</li>
<li> <p><code>add_tabledap</code> - Add rerddap::tabledap data to a plotdap map
</p>
</li>
<li> <p><code>add_ggplot</code> - Add ggplot2 elements to a plotdap object
</p>
</li></ul>

<p>#'
@section Details:
Besides the terse help documents,  more  detail in using the
functions are given  in the included vignette &quot;using_plotdap&quot;. The datasets used
in the vignette are included in the &quot;data&quot; directory.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Roy Mendelssohn <a href="mailto:roy.mendelssohn@noaa.gov">roy.mendelssohn@noaa.gov</a> [contributor]
</p>
<p>Authors:
</p>

<ul>
<li><p> Carson Sievert
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/rmendels/plotdap">https://github.com/rmendels/plotdap</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/rmendels/plotdap/issues">https://github.com/rmendels/plotdap/issues</a>
</p>
</li></ul>


<hr>
<h2 id='add_ggplot'>Add ggplot2 elements to a plotdap object</h2><span id='topic+add_ggplot'></span>

<h3>Description</h3>

<p><code>add_ggplot</code> allows for plotdap ggplot maps to be modified by
further ggplot2 settings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_ggplot(plot, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_ggplot_+3A_plot">plot</code></td>
<td>
<p>a plotdap object.</p>
</td></tr>
<tr><td><code id="add_ggplot_+3A_...">...</code></td>
<td>
<p>arguments passed along to <code>geom_sf()</code>
(if <code>method='ggplot2'</code>, otherwise ignored).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plotdap object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
p &lt;- plotdap(
  crs = "+proj=laea +y_0=0 +lon_0=155 +lat_0=-90 +ellps=WGS84 +no_defs")
p &lt;- add_ggplot(
 p,
 ggplot2::theme_bw()
)


</code></pre>

<hr>
<h2 id='add_griddap'>Add rerddap::griddap() data to a plotdap map</h2><span id='topic+add_griddap'></span>

<h3>Description</h3>

<p><code>add_griddap</code> adds the data from an 'rerddap::griddap() call to
a 'plotdap' map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_griddap(
  plot,
  grid,
  var,
  fill = "viridis",
  maxpixels = 10000,
  time = mean,
  animate = FALSE,
  cumulative = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_griddap_+3A_plot">plot</code></td>
<td>
<p>a <a href="#topic+plotdap">plotdap</a> object.</p>
</td></tr>
<tr><td><code id="add_griddap_+3A_grid">grid</code></td>
<td>
<p>a <a href="rerddap.html#topic+griddap">griddap</a> object.</p>
</td></tr>
<tr><td><code id="add_griddap_+3A_var">var</code></td>
<td>
<p>a formula defining a variable, or function of variables to visualize.</p>
</td></tr>
<tr><td><code id="add_griddap_+3A_fill">fill</code></td>
<td>
<p>either a character string of length 1 matching a name in the
package <code>cmocean</code> or a vector of color codes.
This defines the colorscale used to encode values
of <code>var</code>.</p>
</td></tr>
<tr><td><code id="add_griddap_+3A_maxpixels">maxpixels</code></td>
<td>
<p>integer &gt; 0. Maximum number of cells to use for the plot.
If maxpixels &lt; ncell(x), sampleRegular is used before plotting.
If gridded=TRUE maxpixels may be ignored to get a larger sample</p>
</td></tr>
<tr><td><code id="add_griddap_+3A_time">time</code></td>
<td>
<p>how to resolve multiple time frames. Choose one of the following:
</p>

<ul>
<li><p> A function to apply to each observation at a particular location
(<a href="base.html#topic+mean">mean</a> is the default).
</p>
</li>
<li><p> A character string (of length 1) matching a time value.
</p>
</li></ul>
</td></tr>
<tr><td><code id="add_griddap_+3A_animate">animate</code></td>
<td>
<p>whether to animate over the <code>time</code> variable (if it exists).
Currently only implemented for <code>method='ggplot2'</code> and requires the
gganimate package.</p>
</td></tr>
<tr><td><code id="add_griddap_+3A_cumulative">cumulative</code></td>
<td>
<p>- if animation should be cumulative -default FALSE</p>
</td></tr>
<tr><td><code id="add_griddap_+3A_...">...</code></td>
<td>
<p>arguments passed along to <code>geom_sf()</code>
(if <code>method='ggplot2'</code>, otherwise ignored).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plotdap object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# base plotting tends to be faster,
# but is less extensible plotdap("base")

# actual datasets in data folder to meet execution timings


 # murSST &lt;- rerddap::griddap(
 #  ' jplMURSST41', latitude = c(35, 40), longitude = c(-125, -120.5),
 #   time = c('last', 'last'), fields = 'analysed_sst'
 # )

 # QMwind &lt;- rerddap::griddap(
 #  'erdQMwindmday', time = c('2016-11-16', '2017-01-16'),
 #  latitude = c(30, 50), longitude = c(210, 240),
 #  fields = 'x_wind'
 #  )

p &lt;- plotdap(crs = "+proj=robin")
p &lt;- add_griddap(p, murSST, ~analysed_sst)

 # p &lt;- plotdap(mapTitle = "Average wind over time")
 # p &lt;- add_griddap(p, QMwind, ~x_wind)

# p &lt;- plotdap("base", crs = "+proj=robin")
# p &lt;- add_griddap(p, murSST, ~analysed_sst)

# layer tables on top of grids
require(magrittr)
p &lt;- plotdap("base") %&gt;%
  add_griddap(murSST, ~analysed_sst) %&gt;%
  add_tabledap(sardines, ~subsample_count)

# multiple time periods
p &lt;- plotdap("base", mapTitle = "Average wind over time")
p &lt;- add_griddap(p, QMwind, ~x_wind)

</code></pre>

<hr>
<h2 id='add_tabledap'>Add rerddap::tabledap data to a plotdap map</h2><span id='topic+add_tabledap'></span>

<h3>Description</h3>

<p><code>add_tabledap</code> adds the data from an 'rerddap::tabledap()' call to
a 'plotdap' map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_tabledap(
  plot,
  table,
  var,
  color = c("#132B43", "#56B1F7"),
  size = 1.5,
  shape = 19,
  animate = FALSE,
  cumulative = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_tabledap_+3A_plot">plot</code></td>
<td>
<p>a <a href="#topic+plotdap">plotdap</a> object.</p>
</td></tr>
<tr><td><code id="add_tabledap_+3A_table">table</code></td>
<td>
<p>a <a href="rerddap.html#topic+tabledap">tabledap</a> object.</p>
</td></tr>
<tr><td><code id="add_tabledap_+3A_var">var</code></td>
<td>
<p>a formula defining a variable, or function of variables to visualize.</p>
</td></tr>
<tr><td><code id="add_tabledap_+3A_color">color</code></td>
<td>
<p>either a character string of length 1 matching a name in <code>cmocean</code>
or a vector of color codes. This defines the colorscale used to encode values
of <code>var</code>.</p>
</td></tr>
<tr><td><code id="add_tabledap_+3A_size">size</code></td>
<td>
<p>the size of the symbol.</p>
</td></tr>
<tr><td><code id="add_tabledap_+3A_shape">shape</code></td>
<td>
<p>the shape of the symbol. For valid options, see the 'pch' values
section on <a href="graphics.html#topic+points">points</a>. <code>plot(0:25, 0:25, pch = 0:25)</code> also gives a
quick visual of the majority of possibilities.</p>
</td></tr>
<tr><td><code id="add_tabledap_+3A_animate">animate</code></td>
<td>
<p>whether to animate over the <code>time</code> variable (if it exists).
Currently only implemented for <code>method='ggplot2'</code> and requires the
gganimate package.</p>
</td></tr>
<tr><td><code id="add_tabledap_+3A_cumulative">cumulative</code></td>
<td>
<p>- if animation should be cumulative -default FALSE</p>
</td></tr>
<tr><td><code id="add_tabledap_+3A_...">...</code></td>
<td>
<p>arguments passed along to <code>geom_sf()</code> (if <code>method='ggplot2'</code>, otherwise ignored).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plotdap object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# base plotting tends to be faster,
# but is less extensible plotdap("base")

# test datasets in data folder to meet execution timings
# code given to extract the data


sardines &lt;- rerddap::tabledap(
 'FRDCPSTrawlLHHaulCatch',
 fields = c('latitude',  'longitude', 'time', 'scientific_name', 'subsample_count'),
  'time&gt;=2010-01-01', 'time&lt;=2012-01-01',
  'scientific_name="Sardinops sagax"'
  )


p &lt;- plotdap()
p1 &lt;- add_tabledap(p, sardines, ~subsample_count)
p2 &lt;- add_tabledap(p, sardines, ~log2(subsample_count))

# using base R plotting
p &lt;- plotdap("base")
p &lt;- add_tabledap(p, sardines, ~subsample_count)

# robinson projection
p &lt;- plotdap(crs = "+proj=robin")
p &lt;- add_tabledap(p, sardines, ~subsample_count)


</code></pre>

<hr>
<h2 id='bbox_set'>change bounding box in plotdap object</h2><span id='topic+bbox_set'></span>

<h3>Description</h3>

<p><code>bbox_set</code>changes the bounding box in an plotdap object.
Particularly needed if using gganimate::animate()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bbox_set(plotobj, xlim, ylim)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bbox_set_+3A_plotobj">plotobj</code></td>
<td>
<p>valid plotdap object</p>
</td></tr>
<tr><td><code id="bbox_set_+3A_xlim">xlim</code></td>
<td>
<p>new x-values of the bounding box</p>
</td></tr>
<tr><td><code id="bbox_set_+3A_ylim">ylim</code></td>
<td>
<p>new y-values of the bounding box</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a plotdap object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- plotdap()
p &lt;- add_tabledap(p, sardines, ~subsample_count)
xlim = c(-125, -115)
ylim &lt;- c(30., 50.)
p &lt;- bbox_set(p, xlim, ylim)
</code></pre>

<hr>
<h2 id='murSST'>murSST Data</h2><span id='topic+murSST'></span>

<h3>Description</h3>

<p>pre-Download of murSST in 'add_griddap()' example so that example
can run within CRAN Time limits
</p>


<h3>Usage</h3>

<pre><code class='language-R'>murSST
</code></pre>


<h3>Format</h3>

<p>An object of class <code>griddap_nc</code> (inherits from <code>nc</code>, <code>data.frame</code>) with 0 rows and 2 columns.
</p>


<h3>Details</h3>

<p>obtained using the 'rerddap' command
murSST &lt;- griddap(
'jplMURSST41', latitude = c(22, 51), longitude = c(-140, -105),
time = c('last', 'last'), fields = 'analysed_sst'
)
</p>

<hr>
<h2 id='plotdap'>Visualize rerddap data</h2><span id='topic+plotdap'></span>

<h3>Description</h3>

<p>Visualize data returned from rerddap servers. Use <code>plotdap()</code> to initialize
a plot, specify the plotting method (specifically, 'base' or 'ggplot2'),
and set some global options/parameters. Then use <code>add_tabledap()</code>
and/or <code>add_griddap()</code> to add &quot;layers&quot; of actual data to be visualized.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotdap(
  method = c("ggplot2", "base"),
  mapData = maps::map("world", plot = FALSE, fill = TRUE),
  crs = NULL,
  datum = sf::st_crs(4326),
  mapTitle = NULL,
  mapFill = "gray80",
  mapColor = "gray90",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotdap_+3A_method">method</code></td>
<td>
<p>the plotting method. Currently ggplot2 and base plotting
are supported.</p>
</td></tr>
<tr><td><code id="plotdap_+3A_mapdata">mapData</code></td>
<td>
<p>an object coercable to an sf object via <code>st_as_sf()</code>.</p>
</td></tr>
<tr><td><code id="plotdap_+3A_crs">crs</code></td>
<td>
<p>a coordinate reference system: integer with the epsg code,
or character with proj4string.</p>
</td></tr>
<tr><td><code id="plotdap_+3A_datum">datum</code></td>
<td>
<p>crs that provides datum to use when generating graticules.
Set to <code>NULL</code> to hide the graticule.</p>
</td></tr>
<tr><td><code id="plotdap_+3A_maptitle">mapTitle</code></td>
<td>
<p>a title for the map.</p>
</td></tr>
<tr><td><code id="plotdap_+3A_mapfill">mapFill</code></td>
<td>
<p>fill used for the map.</p>
</td></tr>
<tr><td><code id="plotdap_+3A_mapcolor">mapColor</code></td>
<td>
<p>color used to draw boundaries of the map.</p>
</td></tr>
<tr><td><code id="plotdap_+3A_...">...</code></td>
<td>
<p>arguments passed along to <code>geom_sf()</code>
(if <code>method='ggplot2'</code>, otherwise ignored).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The &quot;ggplot2&quot; method is slower than &quot;base&quot; (especially
for high-res grids/rasters), but is more flexible/extensible. Additional ggplot2
layers, as well as scale defaults, labels, theming, etc. may be modified via
the <code>add_ggplot()</code> function. See the mapping vignette for an introduction
and overview of rerddap's visualization methods &ndash;
<code>browseVignettes(package = "rerddap")</code>.
</p>


<h3>Value</h3>

<p>A plotdap object
</p>


<h3>Author(s)</h3>

<p>Carson Sievert
</p>


<h3>See Also</h3>

<p><code>tabledap()</code>, <code>griddap()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# base plotting tends to be faster (especially for grids),
# but is less extensible plotdap("base")

 plotdap()
 plotdap("base")


</code></pre>

<hr>
<h2 id='print.ggplotdap'>Print a ggplot plotdap object</h2><span id='topic+print.ggplotdap'></span>

<h3>Description</h3>

<p>Print a ggplot plotdap object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ggplotdap'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.ggplotdap_+3A_x">x</code></td>
<td>
<p>a ggplotdap object</p>
</td></tr>
<tr><td><code id="print.ggplotdap_+3A_...">...</code></td>
<td>
<p>currently unused</p>
</td></tr>
</table>

<hr>
<h2 id='print.plotdap'>Print a plotdap object</h2><span id='topic+print.plotdap'></span>

<h3>Description</h3>

<p>Print a plotdap object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'plotdap'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.plotdap_+3A_x">x</code></td>
<td>
<p>a plotdap object</p>
</td></tr>
<tr><td><code id="print.plotdap_+3A_...">...</code></td>
<td>
<p>currently unused</p>
</td></tr>
</table>

<hr>
<h2 id='QMwind'>QMwind Data</h2><span id='topic+QMwind'></span>

<h3>Description</h3>

<p>pre-Download of QMwind in 'add_griddap()' example so that example
can run within CRAN Time limits
</p>


<h3>Usage</h3>

<pre><code class='language-R'>QMwind
</code></pre>


<h3>Format</h3>

<p>An object of class <code>griddap_nc</code> (inherits from <code>nc</code>, <code>data.frame</code>) with 0 rows and 2 columns.
</p>


<h3>Details</h3>

<p>obtained using the 'rerddap' command
wind &lt;- griddap('erdQMwindmday',
time = c('2016-11-16', '2017-01-16'), latitude = c(30, 50),
longitude = c(210, 240),
fields = 'x_wind')
)
</p>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>magrittr</dt><dd><p><code><a href="magrittr.html#topic+pipe">%&gt;%</a></code></p>
</dd>
</dl>

<hr>
<h2 id='sardines'>sardine Data</h2><span id='topic+sardines'></span>

<h3>Description</h3>

<p>pre-Download of sardine data in 'add_tabledap()' example so that example
can run within CRAN Time limits
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sardines
</code></pre>


<h3>Format</h3>

<p>An object of class <code>tabledap</code> (inherits from <code>data.frame</code>) with 56 rows and 5 columns.
</p>


<h3>Details</h3>

<p>obtained using the 'rerddap' command
sardines &lt;- tabledap( 'FRDCPSTrawlLHHaulCatch',
fields = c('latitude',  'longitude', 'time', '
scientific_name', 'subsample_count'),
'time&gt;=2010-01-01', 'time&lt;=2012-01-01',
'scientific_name=&quot;Sardinops sagax&quot;')
)
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
