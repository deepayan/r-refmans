<!DOCTYPE html><html><head><title>Help for package arctools</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {arctools}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#activity_stats'><p>Compute physical activity summaries of minute level activity</p>
data</a></li>
<li><a href='#arctools-package'><p>arctools: processing and physical activity summaries of minute-level activity data</p></a></li>
<li><a href='#extdata_fnames'><p>Names of exemplary accelerometry data file.</p></a></li>
<li><a href='#get_actigraph_SN'><p>Get Actigraph device serial number</p></a></li>
<li><a href='#get_valid_day_flag'><p>Compute valid day flag</p></a></li>
<li><a href='#get_wear_flag'><p>Compute wear/non-wear flag</p></a></li>
<li><a href='#impute_missing_data'><p>Impute missing data</p></a></li>
<li><a href='#midnight_to_midnight'><p>Expand activity data vector into midnight-to-midnight format</p></a></li>
<li><a href='#summarize_PA'><p>Compute physical activity summaries of minute level activity</p>
data.</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Processing and Physical Activity Summaries of Minute Level
Activity Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.6</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides functions to process minute level actigraphy-measured activity counts data and extract commonly used physical activity volume and fragmentation metrics.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, data.table, dplyr, knitr, rmarkdown, ggplot2</td>
</tr>
<tr>
<td>Imports:</td>
<td>lubridate, runstats</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-11-09 17:42:15 UTC; martakaras</td>
</tr>
<tr>
<td>Author:</td>
<td>Marta Karas <a href="https://orcid.org/0000-0001-5889-3970"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Jennifer Schrack <a href="https://orcid.org/0000-0001-9244-9267"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Jacek Urbanek <a href="https://orcid.org/0000-0002-1890-8899"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Marta Karas &lt;marta.karass@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-11-10 19:10:11 UTC</td>
</tr>
</table>
<hr>
<h2 id='activity_stats'>Compute physical activity summaries of minute level activity
data</h2><span id='topic+activity_stats'></span>

<h3>Description</h3>

<p>Process minute level actigraphy-measured activity counts data and extract
commonly used physical activity volume and fragmentation metrics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>activity_stats(
  acc,
  acc_ts,
  impute_missing = TRUE,
  sedentary_thresh = 1853,
  nonwear_0s_minimum_window = 90,
  validday_nonwear_maximum_window = 144,
  subset_minutes = NULL,
  exclude_minutes = NULL,
  subset_weekdays = NULL,
  in_bed_time = NULL,
  out_bed_time = NULL,
  adjust_out_colnames = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="activity_stats_+3A_acc">acc</code></td>
<td>
<p>A numeric vector. A minute-level activity counts data vector.</p>
</td></tr>
<tr><td><code id="activity_stats_+3A_acc_ts">acc_ts</code></td>
<td>
<p>A POSIXct vector. A minute-level time of <code>acc</code>
data collection. We strongly recommended to use <code>lubridate::ymd_hms()</code>
function to create <code>acc_ts</code> (see Examples below).</p>
</td></tr>
<tr><td><code id="activity_stats_+3A_impute_missing">impute_missing</code></td>
<td>
<p>A logical scalar. Whether or not to perform missing
data imputation (see Details). Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="activity_stats_+3A_sedentary_thresh">sedentary_thresh</code></td>
<td>
<p>A numeric scalar. If an activity count value falls
below it then a corresponding minute is characterized as sedentary; otherwise,
a corresponding minute is characterized as active. Default is <code>1853</code>.</p>
</td></tr>
<tr><td><code id="activity_stats_+3A_nonwear_0s_minimum_window">nonwear_0s_minimum_window</code></td>
<td>
<p>A numeric scalar. A minimum number of consecutive
minutes with 0 activity count to be considered non-wear.</p>
</td></tr>
<tr><td><code id="activity_stats_+3A_validday_nonwear_maximum_window">validday_nonwear_maximum_window</code></td>
<td>
<p>In integer scalar. Maximum number of minutes of non-wear/not
collecting data so as the day is still considered valid. Default is <code>144</code>
(10% of 1440 minutes of a full day).</p>
</td></tr>
<tr><td><code id="activity_stats_+3A_subset_minutes">subset_minutes</code></td>
<td>
<p>Integer vector. Contains subset of a day's minutes
within which activity summaries are to be computed. May take values from
<code>1</code> (day's minute from 00:00 to 00:01) to
<code>1440</code> (day's minute from 23:59 to 00:00). Default is <code>NULL</code>, i.e.
no subset used (all day's minutes are used).</p>
</td></tr>
<tr><td><code id="activity_stats_+3A_exclude_minutes">exclude_minutes</code></td>
<td>
<p>Integer vector. Contains subset of a day's minutes
to be excluded from activity summaries computation.
May take values from
<code>1</code> (day's minute from 00:00 to 00:01) to
<code>1440</code> (day's minute from 23:59 to 00:00). Default is <code>NULL</code>, i.e.
no minutes excluded (all day's minutes are used).</p>
</td></tr>
<tr><td><code id="activity_stats_+3A_subset_weekdays">subset_weekdays</code></td>
<td>
<p>Integer vector. Specfies days of a week within which
activity summaries are to be computed. Takes values between 1 (Sunday) to
7 (Saturday). Default is <code>NULL</code>, i.e.no subset used
(all days of a week are used).</p>
</td></tr>
<tr><td><code id="activity_stats_+3A_in_bed_time">in_bed_time</code></td>
<td>
<p>A POSIXct vector. An estimated in-bed time start.
Together with a corresponding entry from <code>out_bed_time</code> vector,
it defines a
day-specific subset of &quot;in bed time&quot; minutes to be excluded from
activity summaries computation.  Default is <code>NULL</code>, i.e.
no minutes excluded.</p>
</td></tr>
<tr><td><code id="activity_stats_+3A_out_bed_time">out_bed_time</code></td>
<td>
<p>A POSIXct vector. An estimated in-bed time end.
Together with a corresponding entry from <code>in_bed_time</code> vector,
it defines a
day-specific subset of &quot;in bed time&quot; minutes to be excluded from
activity summaries computation.  Default is <code>NULL</code>, i.e.
no minutes excluded.</p>
</td></tr>
<tr><td><code id="activity_stats_+3A_adjust_out_colnames">adjust_out_colnames</code></td>
<td>
<p>A logical scalar. Whether or not to
add an informative suffix to column names in the output data frame.
This may happen in case
any of the arguments:
<code>subset_minutes</code>, or
<code>exclude_minutes</code>, or
<code>in_bed_time</code> and <code>out_bed_time</code>
are set other than <code>NULL</code>.
Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Physical activity statistics are aggregated from &quot;valid&quot; days, i.e. days
with no more than 10
wear/non-wear detection algorithm closely
following that of Choi et al. (2011).
See <code>arctools::get_wear_flag()</code> for details.
</p>
<p>Data imputation is recommended for valid days for non-wear time periods and
is a default setting (see <code>impute_missing</code> arg).
Count values are imputed
from an &quot;average day profile&quot; &ndash; a minute-specific activity counts average
computed across valid days within wear time.
</p>


<h3>Value</h3>

<p>A data frame with physical activity summaries of minute level activity
data. See README or vignette for summaries description.
</p>


<h3>References</h3>

<p>Varma, V. R., Dey, D., Leroux, A., Di, J., Urbanek, J., Xiao, L., Zipunnikov, V.
(2018). Total volume of physical activity: TAC, TLAC or TAC(lambda).
Preventive medicine, 106, 233–235. https://doi.org/10.1016/j.ypmed.2017.10.028
</p>
<p>Di, J., Leroux, A., Urbanek, J., Varadhan, R., Spira, A., Schrack, J.,
Zipunnikov, V. Patterns of sedentary and active time accumulation are associated
with mortality in US adults: The NHANES study. https://doi.org/10.1101/182337
</p>
<p>Choi, L., Liu, Z., Matthews, C. E., &amp; Buchowski, M. S. (2011). Validation of
accelerometer wear and nonwear time classification algorithm. Medicine and
Science in Sports and Exercise. https://doi.org/10.1249/MSS.0b013e3181ed61a3
</p>
<p>Koster, A., Shiroma, E. J., Caserotti, P., Matthews, C. E., Chen, K. Y.,
Glynn, N. W., &amp; Harris, T. B. (2016). Comparison of Sedentary Estimates
between activPAL and Hip- and Wrist-Worn ActiGraph. Medicine and science in
sports and exercise, 48(8), 1514–1522. https://doi.org/10.1249/MSS.0000000000000924
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fpath_i &lt;- system.file("extdata", extdata_fnames[1], package = "arctools")
dat_i   &lt;- as.data.frame(data.table::fread(fpath_i))
acc     &lt;- dat_i$vectormagnitude
acc_ts  &lt;- lubridate::ymd_hms(dat_i$timestamp)

## Example 1
## Summarize PA
activity_stats(acc, acc_ts)

## Example 2
## Summarize PA within minutes range corresponding to 12:00 AM - 6:00 AM
subset_12am_6am &lt;- 1 : (6 * 1440/24)
activity_stats(acc, acc_ts, subset_minutes = subset_12am_6am)

## Example 3
## Summarize PA without (i.e., excluding) minutes range corresponding to 11:00 PM - 5:00 AM.
subset_11pm_5am &lt;- c(
  (23 * 1440/24 + 1) : 1440,   ## 11:00 PM - midnight
  1 : (5 * 1440/24)            ## midnight - 5:00 AM
)
activity_stats(acc, acc_ts, exclude_minutes = subset_11pm_5am)

</code></pre>

<hr>
<h2 id='arctools-package'>arctools: processing and physical activity summaries of minute-level activity data</h2><span id='topic+arctools'></span><span id='topic+arctools-package'></span>

<h3>Description</h3>

<p>arctools provides 'activity_stats()' function to process minute level
actigraphy-measured activity counts
data and extract commonly used physical activity volume and fragmentation metrics.
</p>


<h3>Details</h3>

<p>To learn more about arctools, start with the vignettes:
'browseVignettes(package = &quot;arctools&quot;)'
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Marta Karas <a href="mailto:marta.karass@gmail.com">marta.karass@gmail.com</a> (<a href="https://orcid.org/0000-0001-5889-3970">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Jennifer Schrack (<a href="https://orcid.org/0000-0001-9244-9267">ORCID</a>)
</p>
</li>
<li><p> Jacek Urbanek (<a href="https://orcid.org/0000-0002-1890-8899">ORCID</a>)
</p>
</li></ul>


<hr>
<h2 id='extdata_fnames'>Names of exemplary accelerometry data file.</h2><span id='topic+extdata_fnames'></span>

<h3>Description</h3>

<p>Names of exemplary accelerometry data files attached to the package.
These data can be accessed via
<code>system.file("extdata", "&lt;data_file_name&gt;.csv", package = "arctools")</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extdata_fnames
</code></pre>


<h3>Format</h3>

<p>A character vector.
</p>

<hr>
<h2 id='get_actigraph_SN'>Get Actigraph device serial number</h2><span id='topic+get_actigraph_SN'></span>

<h3>Description</h3>

<p>Read Actigraph device serial number from ActiLife accelerometry data
file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_actigraph_SN(fpath_full)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_actigraph_SN_+3A_fpath_full">fpath_full</code></td>
<td>
<p>A string scalar. An absolute path to ActiLife accelerometry
data file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>String scalar. Actigraph device serial number.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fpath_full_i &lt;- system.file("extdata", extdata_fnames[1], package = "arctools")
get_actigraph_SN(fpath_full_i)

</code></pre>

<hr>
<h2 id='get_valid_day_flag'>Compute valid day flag</h2><span id='topic+get_valid_day_flag'></span>

<h3>Description</h3>

<p>Compute valid/non-valid day flag (<code>1</code>/<code>0</code>) for each minute of activity
counts data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_valid_day_flag(wear_flag, validday_nonwear_maximum_window = 144)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_valid_day_flag_+3A_wear_flag">wear_flag</code></td>
<td>
<p>An integer vector. The vector has value <code>1</code> if a minute
belongs to a wear time-interval, value <code>0</code> if a minute
belongs to a non-wear time-interval, and value <code>NA</code> to denote minutes
before/after data collection started/finished.
</p>
<p>Vector <code>wear_flag</code> is assumed
to be in midnight-to-midnight format, meaning its vector length
is a multiple of number of minutes in a full day
(1440).
See <code>arctools::midnight_to_midnight()</code>,
<code>arctools::get_wear_flag()</code>.</p>
</td></tr>
<tr><td><code id="get_valid_day_flag_+3A_validday_nonwear_maximum_window">validday_nonwear_maximum_window</code></td>
<td>
<p>In integer scalar. Maxmimum number of minutes of non-wear/not
collecting data so as the day is still considered valid. Default is <code>144</code>
(10% of 1440 minutes of a full day).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All minute-level observations
from one day are assigned the same value of valid day flag.
The flag is <code>1</code> if a day is
determined to be valid, and <code>0</code> otherwise.
</p>
<p>A day is determined to be valid if it has no more than
<code>validday_nonwear_maximum_window</code> minutes of missing data.
Data may be missing due to
identified sensor nonwear or because activity data collection has not started
yet/has finished already in a particular day.
</p>


<h3>Value</h3>

<p>An integer vector. It has value <code>1</code> if a minute
belongs to a valid day, and <code>0</code> otherwise.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Read exemplary data
fpath_i &lt;- system.file("extdata", extdata_fnames[1], package = "arctools")
dat_i   &lt;- as.data.frame(data.table::fread(fpath_i))
acc     &lt;- dat_i$vectormagnitude
acc_ts  &lt;- lubridate::ymd_hms(dat_i$timestamp)
## Get acc data vector in "midnight_to_midnight" format
acc &lt;- midnight_to_midnight(acc, acc_ts)
## Get wear/non-wear flag
wear_flag &lt;- get_wear_flag(acc)
## Get valid/non-valid day flag
valid_day_flag &lt;- get_valid_day_flag(wear_flag)

</code></pre>

<hr>
<h2 id='get_wear_flag'>Compute wear/non-wear flag</h2><span id='topic+get_wear_flag'></span>

<h3>Description</h3>

<p>Compute wear/non-wear flag (<code>1</code>/<code>0</code>) for each minute of activity
counts data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_wear_flag(acc, nonwear_0s_minimum_window = 90)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_wear_flag_+3A_acc">acc</code></td>
<td>
<p>A numeric vector. A minute-level activity counts data vector.</p>
</td></tr>
<tr><td><code id="get_wear_flag_+3A_nonwear_0s_minimum_window">nonwear_0s_minimum_window</code></td>
<td>
<p>A numeric scalar. A minimum number of consecutive
minutes with 0 activity count to be considered non-wear.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Method implements wear/non-wear detection algorithm closely following that of
Choi et al. (2011).
</p>
<p>The wear/non-wear flag is determined based on activity counts data.
A minute is classified as non-wear if it belongs to any
<code>nonwear_0s_minimum_window</code> minutes-long interval of consecutive values 0 in
activity counts data vector;
here, &quot;any interval&quot; implies that a particular minute may be located
at any location (beginning, middle, end) of interval of consecutive values 0
to be classified as a non-wear. Otherwise, a particular minute is classified
as wear.
</p>
<p>Similarly to recommendations in Discussion in Choi et al. (2011), the method
assumes
a threshold value of 0 for nonzero counts allowed during
a nonwear time interval (I.e., no activity count equal &gt;= 1 is allowed).
The method also assumes 90 minutes as a default for
minimum time of consecutive zero counts for a window to be flagged nonwear.
Differently from recommendations in Discussion in Choi et al. (2011), it
does not
consider any &quot;artifactual movement&quot; interval of nonzero counts during
a nonwear time interval.
</p>


<h3>Value</h3>

<p>An integer vector. It has value <code>1</code> for a wear
and <code>0</code> for non-wear flagged minute. It has the same vector length as
<code>acc</code> vector. If there is an <code>NA</code> entry in <code>acc</code> vector,
then the returned vector will have a corresponding entry set to  <code>NA</code> too.
</p>


<h3>References</h3>

<p>Choi, L., Liu, Z., Matthews, C. E., &amp; Buchowski, M. S. (2011). Validation of
accelerometer wear and nonwear time classification algorithm. Medicine and
Science in Sports and Exercise. https://doi.org/10.1249/MSS.0b013e3181ed61a3
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Read exemplary data
fpath_i &lt;- system.file("extdata", extdata_fnames[1], package = "arctools")
dat_i   &lt;- as.data.frame(data.table::fread(fpath_i))
acc     &lt;- dat_i$vectormagnitude
acc_ts  &lt;- lubridate::ymd_hms(dat_i$timestamp)
## Get acc data vector in "midnight_to_midnight" format
acc &lt;- midnight_to_midnight(acc, acc_ts)
## Get wear/non-wear flag
wear_flag &lt;- get_wear_flag(acc)

</code></pre>

<hr>
<h2 id='impute_missing_data'>Impute missing data</h2><span id='topic+impute_missing_data'></span>

<h3>Description</h3>

<p>Impute missing data in minute-level activity counts data vector based on
&quot;average day profile&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>impute_missing_data(
  acc,
  wear_flag,
  valid_day_flag,
  imputeFromValidDaysOnly = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="impute_missing_data_+3A_acc">acc</code></td>
<td>
<p>A numeric vector. A minute-level activity counts data vector.
It is assumed
to be in midnight-to-midnight format, meaning its vector length
is a multiple of number of minutes in a full day
(1440; see <code>midnight_to_midnight()</code>).</p>
</td></tr>
<tr><td><code id="impute_missing_data_+3A_wear_flag">wear_flag</code></td>
<td>
<p>An integer vector.
Wear/non-wear flag (<code>1</code>/<code>0</code>) for each minute of activity
counts data. It is assumed
to be in midnight-to-midnight format, meaning its vector length
is a multiple of number of minutes in a full day
(1440). See <code>midnight_to_midnight()</code>, <code>get_wear_flag()</code>.</p>
</td></tr>
<tr><td><code id="impute_missing_data_+3A_valid_day_flag">valid_day_flag</code></td>
<td>
<p>An integer vector.
Valid/non-valid day flag (<code>1</code>/<code>0</code>) for each minute of activity
counts data. It is assumed
to be in midnight-to-midnight format, meaning its vector length
is a multiple of number of minutes in a full day
(1440).
See <code>arctools::midnight_to_midnight()</code>,
<code>arctools::get_valid_day_flag()</code>.</p>
</td></tr>
<tr><td><code id="impute_missing_data_+3A_imputefromvaliddaysonly">imputeFromValidDaysOnly</code></td>
<td>
<p>A logical scalar. Whether or not data from
valid days only should be used for computing &quot;average day profile&quot;
used for imputation.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An &quot;average day profile&quot; is computed as average across minutes identified
as wear and from valid days
(see param. <code>imputeFromValidDaysOnly</code>). Activity counts data are imputed
from &quot;average day profile&quot; for minutes identified as non-wear in days
identified as valid, except for minutes before/after data
collection start/end which remain <code>NA</code>.
</p>
<p>Theoretically, it is possible that all valid days of data collection have
non-wear flag for the some minute(s) (i.e., somebody is always
taking off the watch for the same few minutes during a day) so there is no
data to use to compute imputation values from. If it happens, then method
uses 0 as imputation value(s).
</p>


<h3>Value</h3>

<p>A numeric vector. A minute-level activity counts data vector
with data imputed for minutes identified as non-wear in days identified as valid
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Read exemplary data
fpath_i &lt;- system.file("extdata", extdata_fnames[1], package = "arctools")
dat_i   &lt;- as.data.frame(data.table::fread(fpath_i))
acc     &lt;- dat_i$vectormagnitude
acc_ts  &lt;- lubridate::ymd_hms(dat_i$timestamp)
## Get acc data vector in "midnight_to_midnight" format
acc &lt;- midnight_to_midnight(acc, acc_ts)
## Get wear/non-wear flag
wear_flag &lt;- get_wear_flag(acc)
## Get valid/non-valid day flag
valid_day_flag &lt;- get_valid_day_flag(wear_flag)
## Impute missing data in acc data vector
acc_imputed &lt;- impute_missing_data(acc, wear_flag, valid_day_flag)
## Compare mean acc before/after imputation
c(mean(acc, na.rm = TRUE), mean(acc_imputed, na.rm = TRUE))

</code></pre>

<hr>
<h2 id='midnight_to_midnight'>Expand activity data vector into midnight-to-midnight format</h2><span id='topic+midnight_to_midnight'></span>

<h3>Description</h3>

<p>Expand activity data vector such that its length is
a multiple of number of minutes in a full day (1440).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>midnight_to_midnight(acc, acc_ts)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="midnight_to_midnight_+3A_acc">acc</code></td>
<td>
<p>A numeric vector. A minute-level activity counts data vector.</p>
</td></tr>
<tr><td><code id="midnight_to_midnight_+3A_acc_ts">acc_ts</code></td>
<td>
<p>A POSIXct vector. Time of activity data collection, corresponding to
<code>acc</code>. We strongly recommended to use <code>lubridate::ymd_hms()</code> function to create <code>acc_ts</code> (see Examples below).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In the returned vector,
1st observation
corresponds to minute of 00:00-00:01 on the first day of data collection,
and last observation
corresponds to minute of 23:59-00:00 on the last day of data collection.
Entries corresponding to no data in original activity data vector
are filled with <code>NA</code>.
</p>


<h3>Value</h3>

<p>A numeric vector. A minute-level activity counts data vector in
midnight-to-midnight format.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Read exemplary data
fpath_i &lt;- system.file("extdata", extdata_fnames[1], package = "arctools")
dat_i   &lt;- as.data.frame(data.table::fread(fpath_i))
acc     &lt;- dat_i$vectormagnitude
acc_ts  &lt;- lubridate::ymd_hms(dat_i$timestamp)
## Get acc data vector in "midnight_to_midnight" format
acc &lt;- midnight_to_midnight(acc, acc_ts)
## Observe we have an integer number of days
length(acc) / 1440

</code></pre>

<hr>
<h2 id='summarize_PA'>Compute physical activity summaries of minute level activity
data.</h2><span id='topic+summarize_PA'></span>

<h3>Description</h3>

<p>Compute physical activity summaries of minute level activity
data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summarize_PA(
  acc,
  acc_ts,
  wear_flag,
  valid_day_flag,
  sedentary_thresh = 1853,
  subset_minutes = NULL,
  exclude_minutes = NULL,
  subset_weekdays = NULL,
  in_bed_time = NULL,
  out_bed_time = NULL,
  adjust_out_colnames = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summarize_PA_+3A_acc">acc</code></td>
<td>
<p>A numeric vector. A minute-level activity counts data vector.
It is assumed
to be in midnight-to-midnight format, meaning its vector length
is a multiple of number of minutes in a full day
(1440). See <code>arctools::midnight_to_midnight()</code>.</p>
</td></tr>
<tr><td><code id="summarize_PA_+3A_acc_ts">acc_ts</code></td>
<td>
<p>A POSIXct vector. Time of activity data collection, corresponding to
<code>acc</code> in its original format (not: midnight-to-midnight).
We strongly recommended to use <code>lubridate::ymd_hms()</code> function to
create <code>acc_ts</code> (see Examples below).</p>
</td></tr>
<tr><td><code id="summarize_PA_+3A_wear_flag">wear_flag</code></td>
<td>
<p>An integer vector. It has value <code>1</code> if a minute
belongs to a wear time-interval, value <code>0</code> if a minute
belongs to a non-wear time-interval, and value <code>NA</code> to denote minutes
before/after data collection started/finished.
See <code>arctools::get_wear_flag()</code>.</p>
</td></tr>
<tr><td><code id="summarize_PA_+3A_valid_day_flag">valid_day_flag</code></td>
<td>
<p>An integer vector. It has value <code>1</code> if a minute
belongs to a valid day, and <code>0</code> otherwise. See
<code>arctools::get_valid_day_flag()</code>.</p>
</td></tr>
<tr><td><code id="summarize_PA_+3A_sedentary_thresh">sedentary_thresh</code></td>
<td>
<p>A numeric scalar. If an activity count value falls
below it then a corresponding minute is characterized as sedentary; otherwise,
a corresponding minute is characterized as active. Default is <code>1853</code>.</p>
</td></tr>
<tr><td><code id="summarize_PA_+3A_subset_minutes">subset_minutes</code></td>
<td>
<p>Integer vector. Contains subset of a day's minutes
within which activity summaries are to be computed. May take values from
<code>1</code> (day's minute from 00:00 to 00:01) to
<code>1440</code> (day's minute from 23:59 to 00:00). Default is <code>NULL</code>, i.e.
no subset used (all day's minutes are used).</p>
</td></tr>
<tr><td><code id="summarize_PA_+3A_exclude_minutes">exclude_minutes</code></td>
<td>
<p>Integer vector. Contains subset of a day's minutes
to be excluded from activity summaries computation.
May take values from
<code>1</code> (day's minute from 00:00 to 00:01) to
<code>1440</code> (day's minute from 23:59 to 00:00). Default is <code>NULL</code>, i.e.
no minutes excluded (all day's minutes are used).</p>
</td></tr>
<tr><td><code id="summarize_PA_+3A_subset_weekdays">subset_weekdays</code></td>
<td>
<p>Integer vector. Specfies days of a week within which
activity summaries are to be computed. Takes values between 1 (Sunday) to
7 (Saturday). Default is <code>NULL</code>, i.e.no subset used
(all days of a week are used).</p>
</td></tr>
<tr><td><code id="summarize_PA_+3A_in_bed_time">in_bed_time</code></td>
<td>
<p>A POSIXct vector. An estimated in-bed time start.
Together with a corresponding entry from <code>out_bed_time</code> vector,
it defines a
day-specific subset of &quot;in bed time&quot; minutes to be excluded from
activity summaries computation.  Default is <code>NULL</code>, i.e.
no minutes excluded.</p>
</td></tr>
<tr><td><code id="summarize_PA_+3A_out_bed_time">out_bed_time</code></td>
<td>
<p>A POSIXct vector. An estimated in-bed time end.
Together with a corresponding entry from <code>in_bed_time</code> vector,
it defines a
day-specific subset of &quot;in bed time&quot; minutes to be excluded from
activity summaries computation.  Default is <code>NULL</code>, i.e.
no minutes excluded.</p>
</td></tr>
<tr><td><code id="summarize_PA_+3A_adjust_out_colnames">adjust_out_colnames</code></td>
<td>
<p>A logical scalar. Whether or not to
add an informative suffix to column names in the output data frame.
This may happen in case
any of the arguments:
<code>subset_minutes</code>, or
<code>exclude_minutes</code>, or
<code>in_bed_time</code> and <code>out_bed_time</code>
are set other than <code>NULL</code>.
Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with physical activity summaries of minute level activity
data. See README or vignette for summaries description.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Read exemplary data
fpath_i &lt;- system.file("extdata", extdata_fnames[1], package = "arctools")
dat_i   &lt;- as.data.frame(data.table::fread(fpath_i))
acc     &lt;- dat_i$vectormagnitude
acc_ts  &lt;- lubridate::ymd_hms(dat_i$timestamp)
## Get acc data vector in "midnight_to_midnight" format
acc &lt;- midnight_to_midnight(acc, acc_ts)
## Get wear/non-wear flag
wear_flag &lt;- get_wear_flag(acc)
## Get valid/non-valid day flag
valid_day_flag &lt;- get_valid_day_flag(wear_flag)
## Impute missing data in acc data vector
acc_imputed &lt;- impute_missing_data(acc, wear_flag, valid_day_flag)

## Example 1
## Summarize PA
summarize_PA(acc, acc_ts, wear_flag, valid_day_flag)

## Example 2
## Summarize PA within minutes range corresponding to 12:00 AM - 6:00 AM
subset_12am_6am &lt;- 1 : (6 * 1440/24)
summarize_PA(acc, acc_ts, wear_flag, valid_day_flag, subset_minutes = subset_12am_6am)

## Example 3
## Summarize PA without (i.e., excluding) minutes range corresponding to 11:00 PM - 5:00 AM.
subset_11pm_5am &lt;- c(
  (23 * 1440/24 + 1) : 1440,   ## 11:00 PM - midnight
  1 : (5 * 1440/24)            ## midnight - 5:00 AM
)
summarize_PA(acc, acc_ts, wear_flag, valid_day_flag, exclude_minutes = subset_11pm_5am)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
