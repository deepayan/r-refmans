<!DOCTYPE html><html><head><title>Help for package rpymat</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rpymat}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#choose-file'><p>Choose file or directory to open via <code>'Python'</code></p></a></li>
<li><a href='#conda-env'><p>'Miniconda' environment</p></a></li>
<li><a href='#jupyter'><p>Install, register, launch 'Jupyter' notebook to the virtual environment</p></a></li>
<li><a href='#py_builtin'><p>Get 'Python' built-in object</p></a></li>
<li><a href='#py_list'><p>List in 'Python'</p></a></li>
<li><a href='#py_slice'><p>Slice index in 'Python' arrays</p></a></li>
<li><a href='#read_xlsx'><p>Read data frame from a <code>'xlsx'</code> file</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#repl_python'><p>Enable interactive 'python' from R</p></a></li>
<li><a href='#reticulate-reexports'><p>Wrappers around <code>'reticulate'</code> package</p></a></li>
<li><a href='#rpymat-python-main'><p>Get 'Python' main process environment</p></a></li>
<li><a href='#run_command'><p>Execute command with additional environments</p></a></li>
<li><a href='#run_pyscript'><p>Run 'Python' script</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Easy to Configure an Isolated 'Python' Environment</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.7</td>
</tr>
<tr>
<td>Description:</td>
<td>Aims to create a single isolated 'Miniconda' 
    and 'Python' environment for reproducible pipeline scripts. 
    The package provides utilities to run system command within the 'conda'
    environment, making it easy to install, launch, manage, and stop 
    'Jupyter-lab'.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/dipterix/rpymat">https://github.com/dipterix/rpymat</a>, <a href="http://dipterix.org/rpymat/">http://dipterix.org/rpymat/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/dipterix/rpymat/issues">https://github.com/dipterix/rpymat/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>utils, reticulate (&ge; 1.21), fastmap (&ge; 1.1.0), rappdirs (&ge;
0.3.3), glue (&ge; 1.4.2), IRkernel (&ge; 1.3), jsonlite (&ge;
1.7.3), rstudioapi (&ge; 0.13)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>spelling</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-21 20:34:53 UTC; dipterix</td>
</tr>
<tr>
<td>Author:</td>
<td>Zhengjia Wang [cph, aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Zhengjia Wang &lt;dipterix.wang@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-22 03:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='choose-file'>Choose file or directory to open via <code>'Python'</code></h2><span id='topic+choose-file'></span><span id='topic+choose_fileopen'></span><span id='topic+choose_filesave'></span><span id='topic+choose_directory'></span>

<h3>Description</h3>

<p>Choose a directory, one or multiple files to open, or choose a file to save.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>choose_fileopen(
  initialfile = NULL,
  multiple = FALSE,
  title = ifelse(multiple, "Choose Files", "Choose a File"),
  message = "",
  verbose = FALSE,
  force = FALSE
)

choose_filesave()

choose_directory(
  initialdir = NULL,
  title = "Choose a Directory",
  message = "",
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="choose-file_+3A_initialfile">initialfile</code>, <code id="choose-file_+3A_initialdir">initialdir</code></td>
<td>
<p>initial selection of file or directory</p>
</td></tr>
<tr><td><code id="choose-file_+3A_multiple">multiple</code></td>
<td>
<p>whether to open multiple files</p>
</td></tr>
<tr><td><code id="choose-file_+3A_title">title</code>, <code id="choose-file_+3A_message">message</code></td>
<td>
<p>dialogue title and message</p>
</td></tr>
<tr><td><code id="choose-file_+3A_verbose">verbose</code></td>
<td>
<p>whether to verbose debug information</p>
</td></tr>
<tr><td><code id="choose-file_+3A_force">force</code></td>
<td>
<p>whether to force using <code>'Python'</code> when native <code>R</code>
functions are available, default is false</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Base-R has <code><a href="base.html#topic+file.choose">file.choose</a></code> function to choose files. However,
users cannot select multiple files nor directories. These functions fill
the gap by using <code>'Python'</code> <code>'tkinter'</code> package. Please make
sure that one-time setup function <code><a href="#topic+configure_conda">configure_conda</a></code> has executed
before running these functions.
</p>
<p>The functions must run as interactive mode. If you run the functions on a
server, most likely you will get nothing. The functions themselves do not
check if you are running under interactive sessions. You must check by
yourself.
</p>


<h3>Value</h3>

<p>User-selected paths. If the users select nothing, then <code>NULL</code>
will be returned. For multiple file selection, multiple paths will
be returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(interactive()) {
  choose_fileopen(multiple = TRUE)
}



</code></pre>

<hr>
<h2 id='conda-env'>'Miniconda' environment</h2><span id='topic+conda-env'></span><span id='topic+CONDAENV_NAME'></span><span id='topic+conda_path'></span><span id='topic+conda_bin'></span><span id='topic+env_path'></span><span id='topic+list_pkgs'></span><span id='topic+configure_matlab'></span><span id='topic+configure_conda'></span><span id='topic+remove_conda'></span><span id='topic+add_packages'></span><span id='topic+ensure_rpymat'></span><span id='topic+matlab_engine'></span><span id='topic+call_matlab'></span>

<h3>Description</h3>

<p>These functions/variables are used to configure
'Miniconda' environment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CONDAENV_NAME(env_name)

conda_path()

conda_bin()

env_path()

list_pkgs(...)

configure_matlab(matlab, python_ver = "auto")

configure_conda(
  python_ver = "auto",
  packages = NULL,
  matlab = NULL,
  update = FALSE,
  force = FALSE,
  standalone = FALSE
)

remove_conda(ask = TRUE)

add_packages(packages = NULL, python_ver = "auto", ...)

ensure_rpymat(verbose = TRUE, cache = TRUE)

matlab_engine()

call_matlab(
  fun,
  ...,
  .options = getOption("rpymat.matlab_opt", "-nodesktop -nojvm"),
  .debug = getOption("rpymat.debug", FALSE)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="conda-env_+3A_env_name">env_name</code></td>
<td>
<p>alternative environment name to use; default is
<code>"rpymat-conda-env"</code></p>
</td></tr>
<tr><td><code id="conda-env_+3A_...">...</code></td>
<td>
<p>for <code>add_packages</code>, these are additional parameters
passing to <code><a href="reticulate.html#topic+conda_install">conda_install</a></code>; for
<code>call_matlab</code>, <code>...</code> are the parameters passing to <code>fun</code></p>
</td></tr>
<tr><td><code id="conda-env_+3A_matlab">matlab</code></td>
<td>
<p>'Matlab' path to add to the configuration path;
see 'Details'</p>
</td></tr>
<tr><td><code id="conda-env_+3A_python_ver">python_ver</code></td>
<td>
<p><code>python</code> version to use; see 'Configuration'</p>
</td></tr>
<tr><td><code id="conda-env_+3A_packages">packages</code></td>
<td>
<p>additional <code>python</code> or <code>conda</code> packages to install</p>
</td></tr>
<tr><td><code id="conda-env_+3A_update">update</code></td>
<td>
<p>whether to update <code>conda</code>; default is false</p>
</td></tr>
<tr><td><code id="conda-env_+3A_force">force</code></td>
<td>
<p>whether to force install the 'Miniconda' even a previous
version exists; default is false. Setting <code>false=TRUE</code> rarely
works. Please see 'Configuration'.</p>
</td></tr>
<tr><td><code id="conda-env_+3A_standalone">standalone</code></td>
<td>
<p>whether to install <code>conda</code> regardless of existing
<code>conda</code> environment</p>
</td></tr>
<tr><td><code id="conda-env_+3A_ask">ask</code></td>
<td>
<p>whether to ask for user's agreement to remove the repository.
This parameter should be true if your functions depend on
<code>remove_conda</code> (see 'CRAN Repository Policy'). This argument might
be removed and force to be interactive in the future.</p>
</td></tr>
<tr><td><code id="conda-env_+3A_verbose">verbose</code></td>
<td>
<p>whether to print messages</p>
</td></tr>
<tr><td><code id="conda-env_+3A_cache">cache</code></td>
<td>
<p>whether to use cached configurations; default is true</p>
</td></tr>
<tr><td><code id="conda-env_+3A_fun">fun</code></td>
<td>
<p>'Matlab' function name, character (experimental)</p>
</td></tr>
<tr><td><code id="conda-env_+3A_.options">.options</code></td>
<td>
<p>'Matlab' compiler options</p>
</td></tr>
<tr><td><code id="conda-env_+3A_.debug">.debug</code></td>
<td>
<p>whether to enable debug mode</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Background &amp; Objectives</h3>

<p>Package <code>reticulate</code> provides sophisticated tool-sets that
allow us to call <code>python</code> functions within <code>R</code>. However, the
installation of 'Miniconda' and <code>python</code> can be tricky on many
platforms, for example, the 'M1' chip, or some other 'ARM' machines.
The package <code>rpymat</code> provides easier approach to configure on these
machines with totally isolated environments. Any modifications to this
environment will not affect your other set ups.
</p>
<p>Since 2014, 'Matlab' has introduced its official compiler for <code>python</code>.
The package <code>rpymat</code> provides a simple approach to link the
compiler, provided that you have proper versions of 'Matlab' installed.
<a href="https://www.mathworks.com/support/requirements/python-compatibility.html">Here</a> is a list of
'Matlab' versions with official compilers and their corresponding
<code>python</code> versions.
</p>


<h3>Configuration</h3>

<p>If 'Matlab' compiler is not to be installed, In most of the cases,
function <code>configure_conda</code> with default arguments automatically
downloads the latest 'Miniconda' and configures the latest <code>python</code>.
If any other versions of 'Miniconda' is ought to be installed,
please set options <code>"reticulate.miniconda.url"</code> to change the
source location.
</p>
<p>If 'Matlab' is to be installed, please specify the 'Matlab' path when
running <code>configure_conda</code>. If the environment has been setup,
<code>configure_matlab</code> can link the 'Matlab' compilers without
removing the existing environment. For 'ARM' users, unfortunately,
there will be no 'Matlab' support as the compilers are written for
the 'Intel' chips.
</p>


<h3>Initialization</h3>

<p>Once <code>conda</code> and <code>python</code> environment has been installed, make sure
you run <code>ensure_rpymat()</code> before running any <code>python</code> code. This
function will make sure correct compiler is linked to your current
<code>R</code> session.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# The script will interactively install \code{conda} to `R_user_dir`
## Not run: 

# Install conda and python 3.9

configure_conda(python_ver = '3.9')


# Add packages h5py, pandas, jupyter

add_packages(c('h5py', 'pandas', 'jupyter'))

# Add pip packages

add_packages("itk", pip = TRUE)

# Initialize the isolated environment

ensure_rpymat()


# Remove the environment

remove_conda()


## End(Not run)

</code></pre>

<hr>
<h2 id='jupyter'>Install, register, launch 'Jupyter' notebook to the virtual environment</h2><span id='topic+jupyter'></span><span id='topic+add_jupyter'></span><span id='topic+jupyter_bin'></span><span id='topic+jupyter_register_R'></span><span id='topic+jupyter_options'></span><span id='topic+jupyter_launch'></span><span id='topic+jupyter_check_launch'></span><span id='topic+jupyter_server_list'></span><span id='topic+jupyter_server_stop'></span><span id='topic+jupyter_server_stop_all'></span>

<h3>Description</h3>

<p>Install, register, launch 'Jupyter' notebook to the virtual environment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_jupyter(..., register_R = TRUE)

jupyter_bin()

jupyter_register_R(
  user = NULL,
  name = "ir",
  displayname = "R",
  rprofile = NULL,
  prefix = NULL,
  sys_prefix = NULL,
  verbose = getOption("verbose")
)

jupyter_options(
  root_dir,
  host = "127.0.0.1",
  port = 8888,
  open_browser = FALSE,
  token = rand_string(),
  base_url = "/jupyter/"
)

jupyter_launch(
  host = "127.0.0.1",
  port = 8888,
  open_browser = TRUE,
  workdir = getwd(),
  async = FALSE,
  ...,
  dry_run = FALSE
)

jupyter_check_launch(
  port = 8888,
  host = "127.0.0.1",
  open_browser = TRUE,
  workdir = getwd(),
  async = "auto",
  ...
)

jupyter_server_list()

jupyter_server_stop(port, ...)

jupyter_server_stop_all(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="jupyter_+3A_...">...</code></td>
<td>
<p>for <code>add_jupyter</code>, these are additional parameters passed to
<code>jupyter_register_R</code>; for <code>jupyter_launch</code>, these are additional
parameters passed to <code>jupyter_options</code></p>
</td></tr>
<tr><td><code id="jupyter_+3A_register_r">register_R</code></td>
<td>
<p>whether to register <code>IRkernel</code> to the notebook</p>
</td></tr>
<tr><td><code id="jupyter_+3A_user">user</code>, <code id="jupyter_+3A_name">name</code>, <code id="jupyter_+3A_displayname">displayname</code>, <code id="jupyter_+3A_rprofile">rprofile</code>, <code id="jupyter_+3A_prefix">prefix</code>, <code id="jupyter_+3A_sys_prefix">sys_prefix</code>, <code id="jupyter_+3A_verbose">verbose</code></td>
<td>
<p>see <code><a href="IRkernel.html#topic+installspec">installspec</a></code></p>
</td></tr>
<tr><td><code id="jupyter_+3A_root_dir">root_dir</code>, <code id="jupyter_+3A_workdir">workdir</code></td>
<td>
<p>default root directory of the notebook</p>
</td></tr>
<tr><td><code id="jupyter_+3A_host">host</code>, <code id="jupyter_+3A_port">port</code></td>
<td>
<p>'IP' and port of the hosting 'URL'</p>
</td></tr>
<tr><td><code id="jupyter_+3A_open_browser">open_browser</code></td>
<td>
<p>whether to open the browser once launched</p>
</td></tr>
<tr><td><code id="jupyter_+3A_token">token</code></td>
<td>
<p>access token of the notebook</p>
</td></tr>
<tr><td><code id="jupyter_+3A_base_url">base_url</code></td>
<td>
<p>base address, default is <code>'/jupyter/'</code></p>
</td></tr>
<tr><td><code id="jupyter_+3A_async">async</code></td>
<td>
<p>whether to open the notebook in the background</p>
</td></tr>
<tr><td><code id="jupyter_+3A_dry_run">dry_run</code></td>
<td>
<p>whether to display the command instead of executing them;
used to debug the code</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>jupyter_bin</code> returns the 'Jupyter' notebook binary path;
<code>jupyter_options</code> returns the 'Jupyter' configuration in strings;
<code>jupyter_server_list</code> returns a table of existing local 'Jupyter'
server hosts, ports, and tokens; <code>jupyter_check_launch</code> returns true
if a new server has been created, or false if there has been an existing
server at the port;
other functions return nothing.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Requires installation of conda
library(rpymat)

# Install conda, if you have done so, skip
configure_conda()


# Install Jupyter notebook
add_jupyter(register_R = TRUE)


# Utility functions
jupyter_bin()

# Please install `dipsaus` package to enable `async=TRUE` with
# better experience
jupyter_launch(async = FALSE, open_browser = TRUE)



## End(Not run)

</code></pre>

<hr>
<h2 id='py_builtin'>Get 'Python' built-in object</h2><span id='topic+py_builtin'></span>

<h3>Description</h3>

<p>Get 'Python' built-in object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>py_builtin(name, convert = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="py_builtin_+3A_name">name</code></td>
<td>
<p>object name</p>
</td></tr>
<tr><td><code id="py_builtin_+3A_convert">convert</code></td>
<td>
<p>see <code><a href="reticulate.html#topic+import_builtins">import_builtins</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A python built-in object specified by <code>name</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(interactive() &amp;&amp; dir.exists(env_path())) {


# ------ Basic case: use python `int` as an R function ---------
py_int &lt;- py_builtin("int", convert = TRUE)

# a is an R object now
a &lt;- py_int(9)
print(a)
class(a)

# ------ Use python `int` as a Python function -----------------
py_int2 &lt;- py_builtin("int", convert = FALSE)

# b in a python object
b &lt;- py_int2(9)

# There is no '[1] ' when printing
print(b)
class(b)

# convert to R object
py_to_r(b)



}

</code></pre>

<hr>
<h2 id='py_list'>List in 'Python'</h2><span id='topic+py_list'></span>

<h3>Description</h3>

<p>List in 'Python'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>py_list(..., convert = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="py_list_+3A_...">...</code></td>
<td>
<p>passing to <code>list</code> ('Python')</p>
</td></tr>
<tr><td><code id="py_list_+3A_convert">convert</code></td>
<td>
<p>whether to convert the results back into R; default is no</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List instance, or an R vector if converted
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

if(interactive() &amp;&amp; dir.exists(env_path())) {

  py_list(list(1,2,3))
  py_list(c(1,2,3))

  py_list(array(1:9, c(3,3)))
  py_list(list(list(1:3), letters[1:3]))

}
</code></pre>

<hr>
<h2 id='py_slice'>Slice index in 'Python' arrays</h2><span id='topic+py_slice'></span>

<h3>Description</h3>

<p>Slice index in 'Python' arrays
</p>


<h3>Usage</h3>

<pre><code class='language-R'>py_slice(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="py_slice_+3A_...">...</code></td>
<td>
<p>passing to <code>slice</code> ('Python')</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Index slice instance
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

if(interactive() &amp;&amp; dir.exists(env_path())) {

  x &lt;- np_array(array(seq(20), c(4, 5)))

  # equivalent to x[::2]
  x[py_slice(NULL, NULL, 2L)]

}
</code></pre>

<hr>
<h2 id='read_xlsx'>Read data frame from a <code>'xlsx'</code> file</h2><span id='topic+read_xlsx'></span>

<h3>Description</h3>

<p>Tries to use <code>'readxl'</code> package or <code>'pandas'</code> to read data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_xlsx(
  path,
  sheet = NULL,
  method = c("auto", "pandas", "readxl"),
  n_max = Inf,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_xlsx_+3A_path">path</code></td>
<td>
<p><code>'xlsx'</code> file path</p>
</td></tr>
<tr><td><code id="read_xlsx_+3A_sheet">sheet</code></td>
<td>
<p>either a character or an integer of which spread-sheet to read;
the number starts from <code>1</code></p>
</td></tr>
<tr><td><code id="read_xlsx_+3A_method">method</code></td>
<td>
<p>which method to use for reading the <code>'xlsx'</code> file;
choices are <code>'auto'</code> (automatically find proper method),
<code>'pandas'</code> (use <code>pandas.read_xlsx</code>), or <code>'readxl'</code> (use the
corresponding R package)</p>
</td></tr>
<tr><td><code id="read_xlsx_+3A_n_max">n_max</code></td>
<td>
<p>maximum number of rows (excluding headers) to read</p>
</td></tr>
<tr><td><code id="read_xlsx_+3A_...">...</code></td>
<td>
<p>passed to 'Python' function <code>pandas.read_xlsx</code> or
<code>readxl::read_excel</code>, depending on <code>method</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="base.html#topic+data.frame">data.frame</a></code> table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

rpymat::read_xlsx("Book1.xlsx", sheet = 1)

rpymat::read_xlsx("Book1.xlsx", sheet = "sheet1")


## End(Not run)


</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+glue'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>glue</dt><dd><p><code><a href="glue.html#topic+glue">glue</a></code></p>
</dd>
</dl>

<hr>
<h2 id='repl_python'>Enable interactive 'python' from R</h2><span id='topic+repl_python'></span>

<h3>Description</h3>

<p>Allows users to type 'python' command from R
console for quick code evaluation or debugging.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repl_python(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="repl_python_+3A_...">...</code></td>
<td>
<p>passed to <code><a href="reticulate.html#topic+repl_python">repl_python</a></code>
in <code>'reticulate'</code> package</p>
</td></tr>
</table>


<h3>Value</h3>

<p>See <code><a href="reticulate.html#topic+repl_python">repl_python</a></code>
</p>

<hr>
<h2 id='reticulate-reexports'>Wrappers around <code>'reticulate'</code> package</h2><span id='topic+reticulate-reexports'></span><span id='topic+import_main'></span><span id='topic+tuple'></span><span id='topic+py_tuple'></span><span id='topic+py_help'></span><span id='topic+np_array'></span><span id='topic+import'></span><span id='topic+r_to_py'></span><span id='topic+py_to_r'></span><span id='topic+py_to_r_wrapper'></span><span id='topic+py_str'></span><span id='topic+py_run_string'></span><span id='topic+py_bool'></span><span id='topic+py_dict'></span><span id='topic+py_call'></span><span id='topic+py_del_attr'></span><span id='topic+py_del_item'></span><span id='topic+py_eval'></span><span id='topic+py_get_attr'></span><span id='topic+py_set_attr'></span><span id='topic+py_get_item'></span><span id='topic+py_set_item'></span><span id='topic+py_len'></span><span id='topic+py_none'></span>

<h3>Description</h3>

<p>Almost the same with <code>'reticulate'</code> functions, with
<code>rpymat</code> enabled by default and some minor changes
(see parameter <code>convert</code> and <code>local</code>)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_main(convert = FALSE)

tuple(..., convert = FALSE)

py_tuple(..., convert = FALSE)

py_help(object)

np_array(data, ...)

import(module, as = NULL, convert = FALSE, delay_load = FALSE)

r_to_py(x, convert = FALSE)

py_to_r(x)

py_to_r_wrapper(x)

py_str(object, ...)

py_run_string(code, local = TRUE, convert = FALSE)

py_bool(x)

py_dict(keys, values, convert = FALSE)

py_call(x, ...)

py_del_attr(x, name)

py_del_item(x, name)

py_eval(code, convert = FALSE)

py_get_attr(x, name, silent = FALSE)

py_set_attr(x, name, value)

py_get_item(x, key, silent = FALSE)

py_set_item(x, name, value)

py_len(x, default = NULL)

py_none()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reticulate-reexports_+3A_convert">convert</code></td>
<td>
<p>whether to convert <code>'Python'</code> objects to R; default is
<code>FALSE</code>. This is different to <code>'reticulate'</code>, but less error prone:
users must explicitly convert <code>'Python'</code> objects to R.</p>
</td></tr>
<tr><td><code id="reticulate-reexports_+3A_object">object</code>, <code id="reticulate-reexports_+3A_data">data</code>, <code id="reticulate-reexports_+3A_x">x</code>, <code id="reticulate-reexports_+3A_code">code</code>, <code id="reticulate-reexports_+3A_keys">keys</code>, <code id="reticulate-reexports_+3A_values">values</code>, <code id="reticulate-reexports_+3A_...">...</code></td>
<td>
<p>passed to corresponding
<code>'reticulate'</code> functions as data inputs</p>
</td></tr>
<tr><td><code id="reticulate-reexports_+3A_module">module</code>, <code id="reticulate-reexports_+3A_as">as</code>, <code id="reticulate-reexports_+3A_delay_load">delay_load</code></td>
<td>
<p>import <code>'Python'</code> module as alias</p>
</td></tr>
<tr><td><code id="reticulate-reexports_+3A_local">local</code></td>
<td>
<p>whether to execute code locally so the memory sets free when the
function ends; default is true</p>
</td></tr>
<tr><td><code id="reticulate-reexports_+3A_name">name</code>, <code id="reticulate-reexports_+3A_silent">silent</code>, <code id="reticulate-reexports_+3A_key">key</code>, <code id="reticulate-reexports_+3A_value">value</code>, <code id="reticulate-reexports_+3A_default">default</code></td>
<td>
<p>other parameters passing to the
<code>'reticulate'</code> functions</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>'Python'</code> built-in objects
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(rpymat)
if(interactive() &amp;&amp; dir.exists(env_path())) {

  # tuple
  x &lt;- tuple(1, 2, "a")
  print(x)

  # convert to R object
  py_to_r(x)

  # convert R object to python
  y &lt;- r_to_py(list(a = 1, b = "s"))

  # get element
  py_get_item(y, "a")

  # get missing element
  py_get_item(y, "c", silent = TRUE)

}

</code></pre>

<hr>
<h2 id='rpymat-python-main'>Get 'Python' main process environment</h2><span id='topic+rpymat-python-main'></span><span id='topic+py'></span>

<h3>Description</h3>

<p><code>py</code> automatically converts 'Python' objects to R objects.
<code><a href="#topic+import_main">import_main</a></code> does not convert by default; see 'Examples' for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>py
</code></pre>


<h3>Format</h3>

<p>An object of class <code>NULL</code> of length 0.
</p>


<h3>Value</h3>

<p>The 'Python' main process as a module
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(interactive() &amp;&amp; dir.exists(env_path())) {

py_no_convert &lt;- rpymat::import_main(convert = FALSE)

py$a &lt;- matrix(seq_len(16), 4)

py_no_convert$a

py$a

}

</code></pre>

<hr>
<h2 id='run_command'>Execute command with additional environments</h2><span id='topic+run_command'></span><span id='topic+cmd_create'></span><span id='topic+cmd_set_env'></span><span id='topic+cmd_set_workdir'></span><span id='topic+cmd_set_conda'></span><span id='topic+cmd_build'></span><span id='topic+detect_shell'></span>

<h3>Description</h3>

<p>Enables 'conda' environment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cmd_create(command, shell, use_glue = TRUE)

cmd_set_env(command, key, value, quote = TRUE, quote_type = "cmd")

cmd_set_workdir(command, workdir)

cmd_set_conda(command, conda_path, env_path)

cmd_build(command, .env = parent.frame(), ...)

detect_shell(suggest = NULL)

run_command(
  command,
  shell = detect_shell(),
  use_glue = FALSE,
  enable_conda = TRUE,
  stdout = "",
  stderr = "",
  stdin = "",
  input = NULL,
  env_list = list(),
  wait = TRUE,
  timeout = 0,
  ...,
  workdir = getwd(),
  dry_run = FALSE,
  print_cmd = dry_run,
  glue_env = parent.frame()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="run_command_+3A_command">command</code></td>
<td>
<p>system command</p>
</td></tr>
<tr><td><code id="run_command_+3A_shell">shell</code></td>
<td>
<p>shell type</p>
</td></tr>
<tr><td><code id="run_command_+3A_use_glue">use_glue</code></td>
<td>
<p>whether to <code><a href="glue.html#topic+glue">glue</a></code> the command; default is
false</p>
</td></tr>
<tr><td><code id="run_command_+3A_key">key</code>, <code id="run_command_+3A_value">value</code></td>
<td>
<p>environment variable key and value</p>
</td></tr>
<tr><td><code id="run_command_+3A_quote">quote</code>, <code id="run_command_+3A_quote_type">quote_type</code></td>
<td>
<p>whether to quote the environment variables and
what quote type should use; see <code><a href="base.html#topic+shQuote">shQuote</a></code></p>
</td></tr>
<tr><td><code id="run_command_+3A_workdir">workdir</code></td>
<td>
<p>the working directory</p>
</td></tr>
<tr><td><code id="run_command_+3A_conda_path">conda_path</code></td>
<td>
<p>'conda' path; default is <code><a href="#topic+conda_path">conda_path</a></code></p>
</td></tr>
<tr><td><code id="run_command_+3A_env_path">env_path</code></td>
<td>
<p>'conda' environment path; default is <code><a href="#topic+env_path">env_path</a></code></p>
</td></tr>
<tr><td><code id="run_command_+3A_suggest">suggest</code></td>
<td>
<p>suggested shell type; default is <code>'cmd'</code> on windows,
or <code>'bash'</code> on others</p>
</td></tr>
<tr><td><code id="run_command_+3A_enable_conda">enable_conda</code></td>
<td>
<p>whether to activate 'conda'</p>
</td></tr>
<tr><td><code id="run_command_+3A_stdout">stdout</code>, <code id="run_command_+3A_stderr">stderr</code>, <code id="run_command_+3A_stdin">stdin</code>, <code id="run_command_+3A_input">input</code>, <code id="run_command_+3A_wait">wait</code>, <code id="run_command_+3A_timeout">timeout</code>, <code id="run_command_+3A_...">...</code></td>
<td>
<p>passed to
<code><a href="base.html#topic+system2">system2</a></code></p>
</td></tr>
<tr><td><code id="run_command_+3A_env_list">env_list</code></td>
<td>
<p>a key-value pairs of environment variables</p>
</td></tr>
<tr><td><code id="run_command_+3A_dry_run">dry_run</code></td>
<td>
<p>whether to dry-run the command (do not execute, simply
returns the command), useful to debug</p>
</td></tr>
<tr><td><code id="run_command_+3A_print_cmd">print_cmd</code></td>
<td>
<p>whether to print the command out</p>
</td></tr>
<tr><td><code id="run_command_+3A_glue_env">glue_env</code>, <code id="run_command_+3A_.env">.env</code></td>
<td>
<p>the environment to evaluate variables when <code>use_glue</code>
is true</p>
</td></tr>
</table>


<h3>Value</h3>

<p>All the functions return a list with class
<code>rpymat_system_command</code> except for
<code>run_command</code>, which returns the exit code by <code><a href="base.html#topic+system2">system2</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
run_command("conda install -y numpy", dry_run = TRUE)


a &lt;- "This is a message"
run_command('echo "{a}"', dry_run = TRUE,
            enable_conda = FALSE, use_glue = TRUE)


## Not run: 

# Use `jupyter_launch()` instead. This is just a demonstration
run_command('"{jupyter_bin()}" server list', use_glue = TRUE)


## End(Not run)

</code></pre>

<hr>
<h2 id='run_pyscript'>Run 'Python' script</h2><span id='topic+run_pyscript'></span><span id='topic+run_script'></span><span id='topic+run_pystring'></span>

<h3>Description</h3>

<p>A wrapper of <code><a href="reticulate.html#topic+py_run_file">py_run_file</a></code>,
but with <code>rpymat</code> enabled
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_script(
  x,
  work_dir = NULL,
  local = FALSE,
  convert = FALSE,
  globals = list()
)

run_pyscript(
  x,
  work_dir = NULL,
  local = FALSE,
  convert = FALSE,
  globals = list()
)

run_pystring(
  code,
  work_dir = NULL,
  local = FALSE,
  convert = FALSE,
  globals = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="run_pyscript_+3A_x">x</code></td>
<td>
<p>'Python' script path</p>
</td></tr>
<tr><td><code id="run_pyscript_+3A_work_dir">work_dir</code></td>
<td>
<p>working directory of the script</p>
</td></tr>
<tr><td><code id="run_pyscript_+3A_local">local</code>, <code id="run_pyscript_+3A_convert">convert</code></td>
<td>
<p>passed to <code><a href="reticulate.html#topic+py_run_file">py_run_file</a></code></p>
</td></tr>
<tr><td><code id="run_pyscript_+3A_globals">globals</code></td>
<td>
<p>named list of global R variables used by 'Python' script</p>
</td></tr>
<tr><td><code id="run_pyscript_+3A_code">code</code></td>
<td>
<p>'Python' code</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The values returned by <code><a href="reticulate.html#topic+py_run_file">py_run_file</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

# Please configure conda environment first

x &lt;- tempfile()
writeLines(c(
  "import re",
  "zipcode = re.findall(r'[0-9]{5,6}', r.address)"
), con = x)

address &lt;- '2341 Main St., 72381'
rpymat::run_script(x)

py$zipcode


## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
