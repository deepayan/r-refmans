<!DOCTYPE html><html lang="en"><head><title>Help for package LBSPR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {LBSPR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#calcCurves'><p>Calculate Relative Yield, YPR, SPR, SSB, and Recruitment curves for F/M</p></a></li>
<li><a href='#DataDir'><p>Report the location of the Data Files</p></a></li>
<li><a href='#FilterSmooth'><p>Kalman filter and Rauch-Tung-Striebel smoother</p></a></li>
<li><a href='#getFMfun'><p>Calculate F/M given SPR and other parameters</p></a></li>
<li><a href='#initialize+2CLB_lengths-method'><p>Create a new LB_lengths object</p></a></li>
<li><a href='#initialize+2CLB_obj-method'><p>Create a new LB_obj object</p></a></li>
<li><a href='#initialize+2CLB_pars-method'><p>Create a new LB_pars object</p></a></li>
<li><a href='#LB_lengths-class'><p>An S4 class containing length data</p></a></li>
<li><a href='#LB_obj-class'><p>An S4 class containing all parameters for the LBSPR model</p></a></li>
<li><a href='#LB_pars-class'><p>An S4 class containing life history and other parameters</p></a></li>
<li><a href='#LBSPR_NLLabsel'><p>LBSPR Optimization function for age-based selectivity model</p></a></li>
<li><a href='#LBSPR_NLLgtg'><p>LBSPR Optimization function for GTG model</p></a></li>
<li><a href='#LBSPRfit'><p>Fit LBSPR model to length data</p></a></li>
<li><a href='#LBSPRfit_'><p>Internal function to fit LBSPR model to length data</p></a></li>
<li><a href='#LBSPRopt'><p>Optimisation Routine for fitting LBSPR</p></a></li>
<li><a href='#LBSPRsim'><p>LBSPR Simulation Model</p></a></li>
<li><a href='#LBSPRsim_'><p>Internal LBSPR Simulation Model</p></a></li>
<li><a href='#plotCurves'><p>Plot the Relative Yield, YPR, SPR, SSB, and Recruitment curves</p></a></li>
<li><a href='#plotEsts'><p>Plot LBSPR model estimates</p></a></li>
<li><a href='#plotMat'><p>Plot the maturity-at-length and selectivity-at-length curves</p></a></li>
<li><a href='#plotSim'><p>General plotting function for simulated data</p></a></li>
<li><a href='#plotSize'><p>Plot the size data and model fits</p></a></li>
<li><a href='#plotSPRCirc'><p>Circle of estimated SPR and target and limit points</p></a></li>
<li><a href='#plotTarg'><p>Plot sampled length structure against target simulated size composition</p></a></li>
<li><a href='#Shiny'><p>Run a Shiny Application</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Length-Based Spawning Potential Ratio</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.6</td>
</tr>
<tr>
<td>Description:</td>
<td>Simulate expected equilibrium length composition, yield-per-recruit, and
    the spawning potential ratio (SPR) using the length-based SPR (LBSPR) model. Fit the LBSPR
    model to length data to estimate  selectivity, relative apical fishing mortality, and
    the spawning potential ratio for data-limited fisheries.
    See Hordyk et al (2016) &lt;<a href="https://doi.org/10.1139%2Fcjfas-2015-0422">doi:10.1139/cjfas-2015-0422</a>&gt; for more information about the
    LBSPR assessment method.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/AdrianHordyk/LBSPR">https://github.com/AdrianHordyk/LBSPR</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/AdrianHordyk/LBSPR/issues">https://github.com/AdrianHordyk/LBSPR/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.4)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, ggplot2, graphics, gridExtra, methods, plotrix, Rcpp,
RColorBrewer, shiny, tidyr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Suggests:</td>
<td>colorspace, knitr, scales, shinyBS, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-10-06 16:24:52 UTC; User</td>
</tr>
<tr>
<td>Author:</td>
<td>Adrian Hordyk [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Adrian Hordyk &lt;ar.hordyk@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-10-06 16:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='calcCurves'>Calculate Relative Yield, YPR, SPR, SSB, and Recruitment curves for F/M</h2><span id='topic+calcCurves'></span>

<h3>Description</h3>

<p>A function that takes a LB_pars or LB_obj object and returns a data frame of values 
for relative Yield, YPR, SPR, SSB, and Recruitment at different values of F/M
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calcCurves(LB_obj)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calcCurves_+3A_lb_obj">LB_obj</code></td>
<td>
<p>An object of class <code>'LB_obj'</code> or class <code>'LB_pars'</code> that contains the life history and fishing information</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a dataframe with YPR, Yield, SSB, Rec, and FM
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>

<hr>
<h2 id='DataDir'>Report the location of the Data Files</h2><span id='topic+DataDir'></span>

<h3>Description</h3>

<p>A function that returns the location of the example CSV files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DataDir()
</code></pre>


<h3>Author(s)</h3>

<p>A. Hordyk modified (i.e., stolen) from T. Carruthers' code (DLMtool package)
</p>

<hr>
<h2 id='FilterSmooth'>Kalman filter and Rauch-Tung-Striebel smoother</h2><span id='topic+FilterSmooth'></span>

<h3>Description</h3>

<p>A function that applies a filter and smoother to estimates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>FilterSmooth(RawEsts, R = 1, Q = 0.1, Int = 100)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="FilterSmooth_+3A_rawests">RawEsts</code></td>
<td>
<p>a vector of estimated values</p>
</td></tr>
<tr><td><code id="FilterSmooth_+3A_r">R</code></td>
<td>
<p>variance of sampling noise</p>
</td></tr>
<tr><td><code id="FilterSmooth_+3A_q">Q</code></td>
<td>
<p>variance of random walk increments</p>
</td></tr>
<tr><td><code id="FilterSmooth_+3A_int">Int</code></td>
<td>
<p>covariance of initial uncertainty</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of smoothed values
</p>

<hr>
<h2 id='getFMfun'>Calculate F/M given SPR and other parameters</h2><span id='topic+getFMfun'></span>

<h3>Description</h3>

<p>A internal function that optimizes for F/M when SPR is provided in the simulation parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getFMfun(FM, LB_pars, Control = list())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getFMfun_+3A_fm">FM</code></td>
<td>
<p>a F/M value</p>
</td></tr>
<tr><td><code id="getFMfun_+3A_lb_pars">LB_pars</code></td>
<td>
<p>an object of class <code>'LB_pars'</code> that contains the life history information</p>
</td></tr>
<tr><td><code id="getFMfun_+3A_control">Control</code></td>
<td>
<p>a list of control options for the LBSPR model.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Control options are:
</p>

<dl>
<dt><code>modtype</code></dt><dd><p>Model Type: either Growth-Type-Group Model (default: &quot;GTG&quot;) or Age-Structured (&quot;absel&quot;)</p>
</dd>
<dt><code>maxsd</code></dt><dd><p>Maximum number of standard deviations for length-at-age distribution (default is 2)</p>
</dd>
<dt><code>ngtg</code></dt><dd><p>Number of groups for the GTG model. Default is 13</p>
</dd>
<dt><code>P</code></dt><dd><p>Proportion of survival of initial cohort for maximum age for Age-Structured model. Default is 0.01</p>
</dd>
<dt><code>Nage</code></dt><dd><p>Number of pseudo-age classes in the Age Structured model. Default is 101</p>
</dd>
<dt><code>maxFM</code></dt><dd><p>Maximum value for F/M. Estimated values higher than this are trunctated to <code>maxFM</code>. Default is 4</p>
</dd>
</dl>



<h3>Value</h3>

<p>sum of squares value
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>

<hr>
<h2 id='initialize+2CLB_lengths-method'>Create a new LB_lengths object</h2><span id='topic+initialize+2CLB_lengths-method'></span>

<h3>Description</h3>

<p>Function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'LB_lengths'
initialize(
  .Object,
  file = "none",
  LB_pars = NULL,
  dataType = c("raw", "freq"),
  header = FALSE,
  verbose = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="initialize+2B2CLB_lengths-method_+3A_.object">.Object</code></td>
<td>
<p>class of object to be created</p>
</td></tr>
<tr><td><code id="initialize+2B2CLB_lengths-method_+3A_file">file</code></td>
<td>
<p>file path and name to CSV containing parameters. Alternatively it can be a matrix or vector of length data</p>
</td></tr>
<tr><td><code id="initialize+2B2CLB_lengths-method_+3A_lb_pars">LB_pars</code></td>
<td>
<p>a object of class LB_pars</p>
</td></tr>
<tr><td><code id="initialize+2B2CLB_lengths-method_+3A_datatype">dataType</code></td>
<td>
<p>is the length data individual measurements (raw) or a length frequency (freq)?</p>
</td></tr>
<tr><td><code id="initialize+2B2CLB_lengths-method_+3A_header">header</code></td>
<td>
<p>is there a header?</p>
</td></tr>
<tr><td><code id="initialize+2B2CLB_lengths-method_+3A_verbose">verbose</code></td>
<td>
<p>display a message?</p>
</td></tr>
<tr><td><code id="initialize+2B2CLB_lengths-method_+3A_...">...</code></td>
<td>
<p>optional additional arguments passed to read.csv</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a object of class <code>'LB_lengths'</code>
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>

<hr>
<h2 id='initialize+2CLB_obj-method'>Create a new LB_obj object</h2><span id='topic+initialize+2CLB_obj-method'></span>

<h3>Description</h3>

<p>Function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'LB_obj'
initialize(.Object, defaults = FALSE, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="initialize+2B2CLB_obj-method_+3A_.object">.Object</code></td>
<td>
<p>class of object to be created</p>
</td></tr>
<tr><td><code id="initialize+2B2CLB_obj-method_+3A_defaults">defaults</code></td>
<td>
<p>use defaults?</p>
</td></tr>
<tr><td><code id="initialize+2B2CLB_obj-method_+3A_verbose">verbose</code></td>
<td>
<p>display a message?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a object of class <code>'LB_obj'</code>
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>

<hr>
<h2 id='initialize+2CLB_pars-method'>Create a new LB_pars object</h2><span id='topic+initialize+2CLB_pars-method'></span>

<h3>Description</h3>

<p>Function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'LB_pars'
initialize(.Object, file = "none", defaults = TRUE, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="initialize+2B2CLB_pars-method_+3A_.object">.Object</code></td>
<td>
<p>class of object to be created</p>
</td></tr>
<tr><td><code id="initialize+2B2CLB_pars-method_+3A_file">file</code></td>
<td>
<p>use 'example' to create example LB_pars object. File path and name to CSV containing parameters. Import CSV currently not working</p>
</td></tr>
<tr><td><code id="initialize+2B2CLB_pars-method_+3A_defaults">defaults</code></td>
<td>
<p>use defaults for some parameters?</p>
</td></tr>
<tr><td><code id="initialize+2B2CLB_pars-method_+3A_verbose">verbose</code></td>
<td>
<p>display a message?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a object of class <code>'LB_pars'</code>
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>

<hr>
<h2 id='LB_lengths-class'>An S4 class containing length data</h2><span id='topic+LB_lengths-class'></span>

<h3>Description</h3>

<p>An S4 class containing length data
</p>


<h3>Slots</h3>


<dl>
<dt><code>LMids</code></dt><dd><p>A numeric vector containing the mid-points of the length bins</p>
</dd>
<dt><code>LData</code></dt><dd><p>A numeric matrix containing length data</p>
</dd>
<dt><code>L_units</code></dt><dd><p>Character descrbing units of the length measurements</p>
</dd>
<dt><code>Years</code></dt><dd><p>A numeric vector containing the year indices</p>
</dd>
<dt><code>NYears</code></dt><dd><p>A length-one numeric vector for number of years</p>
</dd>
<dt><code>Elog</code></dt><dd><p>A error log</p>
</dd>
</dl>

<hr>
<h2 id='LB_obj-class'>An S4 class containing all parameters for the LBSPR model</h2><span id='topic+LB_obj-class'></span>

<h3>Description</h3>

<p>An S4 class containing all parameters for the LBSPR model
</p>


<h3>Slots</h3>


<dl>
<dt><code>SPR</code></dt><dd><p>The Spawning Potential Ratio</p>
</dd>
<dt><code>Yield</code></dt><dd><p>Relative yield</p>
</dd>
<dt><code>YPR</code></dt><dd><p>Yield per recruit</p>
</dd>
<dt><code>SSB</code></dt><dd><p>Spawning stock biomass (relative only)</p>
</dd>
<dt><code>SSB0</code></dt><dd><p>Unfished spawning stock biomass</p>
</dd>
<dt><code>B0</code></dt><dd><p>Unfished biomass</p>
</dd>
<dt><code>LMids</code></dt><dd><p>A numeric vector containing the mid-points of the length bins</p>
</dd>
<dt><code>pLCatch</code></dt><dd><p>A numeric vector containg expected proportion for each length class in the catch</p>
</dd>
<dt><code>pLPop</code></dt><dd><p>A numeric vector containg expected proportion for each length class in the population</p>
</dd>
<dt><code>RelRec</code></dt><dd><p>Relative recruitment</p>
</dd>
<dt><code>Ests</code></dt><dd><p>A matrix of estimated values</p>
</dd>
<dt><code>Vars</code></dt><dd><p>A vector of estimated variance for SL50, SL95, F/M and SPR</p>
</dd>
<dt><code>NLL</code></dt><dd><p>A numeric NLL values</p>
</dd>
<dt><code>maxFM</code></dt><dd><p>A numeric of maximum estimated F/M value (note this is apical F)</p>
</dd>
<dt><code>SPRatsize</code></dt><dd><p>A vector of cumulative SPR at length (currently only works for GTG model)</p>
</dd>
<dt><code>fitLog</code></dt><dd><p>A vector of error logs for each fit. 0 means everything is okay.</p>
</dd>
</dl>

<hr>
<h2 id='LB_pars-class'>An S4 class containing life history and other parameters</h2><span id='topic+LB_pars-class'></span>

<h3>Description</h3>

<p>An S4 class containing life history and other parameters
</p>


<h3>Slots</h3>


<dl>
<dt><code>Species</code></dt><dd><p>Character vector of species name</p>
</dd>
<dt><code>MK</code></dt><dd><p>A length-one numeric vector for M/K ratio</p>
</dd>
<dt><code>M</code></dt><dd><p>An optional value for natural mortality (M)</p>
</dd>
<dt><code>Linf</code></dt><dd><p>A length-one numeric vector for Linf</p>
</dd>
<dt><code>L_units</code></dt><dd><p>Character describing units of length parameters</p>
</dd>
<dt><code>CVLinf</code></dt><dd><p>A length-one numeric vector for CV of length-at-age</p>
</dd>
<dt><code>L50</code></dt><dd><p>A length-one numeric vector for length at 50% maturity</p>
</dd>
<dt><code>L95</code></dt><dd><p>A length-one numeric vector for length at 95% maturity</p>
</dd>
<dt><code>Walpha</code></dt><dd><p>A length-one numeric vector for alpha parameter of length-weight relationship</p>
</dd>
<dt><code>Walpha_units</code></dt><dd><p>Character describing units for weight scaling parameter</p>
</dd>
<dt><code>Wbeta</code></dt><dd><p>A length-one numeric vector for beta parameter of length-weight relationship</p>
</dd>
<dt><code>FecB</code></dt><dd><p>A length-one numeric vector for beta parameter of length-fecundity relationship</p>
</dd>
<dt><code>Steepness</code></dt><dd><p>A length-one numeric vector for steepness of SRR</p>
</dd>
<dt><code>Mpow</code></dt><dd><p>A length-one numeric vector for M at length</p>
</dd>
<dt><code>R0</code></dt><dd><p>A length-one numeric vector for initial number of recruits (1 for per-recruit)</p>
</dd>
<dt><code>SL50</code></dt><dd><p>A length-one numeric vector for length at 50% selectivity</p>
</dd>
<dt><code>SL95</code></dt><dd><p>A length-one numeric vector for length at 95% selectivity</p>
</dd>
<dt><code>MLL</code></dt><dd><p>Minimum legal length (inflection point)</p>
</dd>
<dt><code>sdLegal</code></dt><dd><p>Standard deviation of MLL curve</p>
</dd>
<dt><code>fDisc</code></dt><dd><p>Fraction discarded that die</p>
</dd>
<dt><code>FM</code></dt><dd><p>A length-one numeric vector for F/M ratio (note this is apical F)</p>
</dd>
<dt><code>SPR</code></dt><dd><p>A length-one numeric vector for SPR</p>
</dd>
<dt><code>BinMin</code></dt><dd><p>A length-one numeric vector for minimum length bin</p>
</dd>
<dt><code>BinMax</code></dt><dd><p>A length-one numeric vector for maximum length bin</p>
</dd>
<dt><code>BinWidth</code></dt><dd><p>A length-one numeric vector for width of length bins</p>
</dd>
</dl>

<hr>
<h2 id='LBSPR_NLLabsel'>LBSPR Optimization function for age-based selectivity model</h2><span id='topic+LBSPR_NLLabsel'></span>

<h3>Description</h3>

<p>Internal optimization function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>LBSPR_NLLabsel(
  starts,
  x,
  P,
  LMids,
  LBins,
  LDat,
  MK,
  Linf,
  FecB,
  L50,
  L95,
  maxsd,
  CVLinf,
  Nage,
  usePen
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="LBSPR_NLLabsel_+3A_starts">starts</code></td>
<td>
<p>a vector of starting parameters, relative SL50 (SL50/Linf), deltaSL (SL95-SL50)/Linf, and F/M (in log space)</p>
</td></tr>
<tr><td><code id="LBSPR_NLLabsel_+3A_x">x</code></td>
<td>
<p>vector of relative ages</p>
</td></tr>
<tr><td><code id="LBSPR_NLLabsel_+3A_p">P</code></td>
<td>
<p>numeric value indicating proportion of cohort remaining at maximum age</p>
</td></tr>
<tr><td><code id="LBSPR_NLLabsel_+3A_lmids">LMids</code></td>
<td>
<p>a vector of the midpoints of the length classes</p>
</td></tr>
<tr><td><code id="LBSPR_NLLabsel_+3A_lbins">LBins</code></td>
<td>
<p>a vector of length classes</p>
</td></tr>
<tr><td><code id="LBSPR_NLLabsel_+3A_ldat">LDat</code></td>
<td>
<p>a vector of lenght frequencies. Must be same length as LMids</p>
</td></tr>
<tr><td><code id="LBSPR_NLLabsel_+3A_mk">MK</code></td>
<td>
<p>the M/K value</p>
</td></tr>
<tr><td><code id="LBSPR_NLLabsel_+3A_linf">Linf</code></td>
<td>
<p>the Linf value for the population as a hole</p>
</td></tr>
<tr><td><code id="LBSPR_NLLabsel_+3A_fecb">FecB</code></td>
<td>
<p>exponent of the length-fecundity relationship</p>
</td></tr>
<tr><td><code id="LBSPR_NLLabsel_+3A_l50">L50</code></td>
<td>
<p>length at 50 per cent maturity</p>
</td></tr>
<tr><td><code id="LBSPR_NLLabsel_+3A_l95">L95</code></td>
<td>
<p>length at 95 per cent maturity</p>
</td></tr>
<tr><td><code id="LBSPR_NLLabsel_+3A_maxsd">maxsd</code></td>
<td>
<p>numeric value - maximum number of standard deviations of length-at-age dist</p>
</td></tr>
<tr><td><code id="LBSPR_NLLabsel_+3A_cvlinf">CVLinf</code></td>
<td>
<p>CV of length-at-age</p>
</td></tr>
<tr><td><code id="LBSPR_NLLabsel_+3A_nage">Nage</code></td>
<td>
<p>number of pseudo age-classes</p>
</td></tr>
<tr><td><code id="LBSPR_NLLabsel_+3A_usepen">usePen</code></td>
<td>
<p>logical to use penalty for extreme estimates of selectivity</p>
</td></tr>
</table>


<h3>Value</h3>

<p>negative log-likelihood value
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>

<hr>
<h2 id='LBSPR_NLLgtg'>LBSPR Optimization function for GTG model</h2><span id='topic+LBSPR_NLLgtg'></span>

<h3>Description</h3>

<p>Internal optimization function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>LBSPR_NLLgtg(
  starts,
  LMids,
  LBins,
  LDat,
  gtgLinfs,
  MKMat,
  MK,
  Linf,
  ngtg,
  recP,
  usePen
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="LBSPR_NLLgtg_+3A_starts">starts</code></td>
<td>
<p>a vector of starting parameters, relative SL50 (SL50/Linf), deltaSL (SL95-SL50)/Linf, and F/M (in log space)</p>
</td></tr>
<tr><td><code id="LBSPR_NLLgtg_+3A_lmids">LMids</code></td>
<td>
<p>a vector of the midpoints of the length classes</p>
</td></tr>
<tr><td><code id="LBSPR_NLLgtg_+3A_lbins">LBins</code></td>
<td>
<p>a vector of length classes</p>
</td></tr>
<tr><td><code id="LBSPR_NLLgtg_+3A_ldat">LDat</code></td>
<td>
<p>a vector of lenght frequencies. Must be same length as LMids</p>
</td></tr>
<tr><td><code id="LBSPR_NLLgtg_+3A_gtglinfs">gtgLinfs</code></td>
<td>
<p>a vector of Linfs for the growth-type-groups</p>
</td></tr>
<tr><td><code id="LBSPR_NLLgtg_+3A_mkmat">MKMat</code></td>
<td>
<p>a matrix of M/K for each GTG and length-class</p>
</td></tr>
<tr><td><code id="LBSPR_NLLgtg_+3A_mk">MK</code></td>
<td>
<p>the M/K value</p>
</td></tr>
<tr><td><code id="LBSPR_NLLgtg_+3A_linf">Linf</code></td>
<td>
<p>the Linf value for the population as a hole</p>
</td></tr>
<tr><td><code id="LBSPR_NLLgtg_+3A_ngtg">ngtg</code></td>
<td>
<p>the number of growth-type-groups</p>
</td></tr>
<tr><td><code id="LBSPR_NLLgtg_+3A_recp">recP</code></td>
<td>
<p>a vector of recruitment by GTG</p>
</td></tr>
<tr><td><code id="LBSPR_NLLgtg_+3A_usepen">usePen</code></td>
<td>
<p>logical to use penalty for extreme estimates of selectivity</p>
</td></tr>
</table>


<h3>Value</h3>

<p>negative log-likelihood value
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>

<hr>
<h2 id='LBSPRfit'>Fit LBSPR model to length data</h2><span id='topic+LBSPRfit'></span>

<h3>Description</h3>

<p>A function that fits the LBSPR model to length data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>LBSPRfit(
  LB_pars = NULL,
  LB_lengths = NULL,
  yrs = NA,
  Control = list(),
  pen = TRUE,
  verbose = TRUE,
  useCPP = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="LBSPRfit_+3A_lb_pars">LB_pars</code></td>
<td>
<p>an object of class <code>'LB_pars'</code> that contains the life history information</p>
</td></tr>
<tr><td><code id="LBSPRfit_+3A_lb_lengths">LB_lengths</code></td>
<td>
<p>an object of class <code>'LB_lengths'</code> that contains the length data</p>
</td></tr>
<tr><td><code id="LBSPRfit_+3A_yrs">yrs</code></td>
<td>
<p>index of years to include. If NA the model is run on all years</p>
</td></tr>
<tr><td><code id="LBSPRfit_+3A_control">Control</code></td>
<td>
<p>a list of control options for the LBSPR model.</p>
</td></tr>
<tr><td><code id="LBSPRfit_+3A_pen">pen</code></td>
<td>
<p>apply a penalty if estimate of selectivity is very high?</p>
</td></tr>
<tr><td><code id="LBSPRfit_+3A_verbose">verbose</code></td>
<td>
<p>display messages?</p>
</td></tr>
<tr><td><code id="LBSPRfit_+3A_usecpp">useCPP</code></td>
<td>
<p>use cpp optimization code?</p>
</td></tr>
<tr><td><code id="LBSPRfit_+3A_...">...</code></td>
<td>
<p>additional parameters to pass to <code>FilterSmooth</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Control options are:
</p>

<dl>
<dt><code>modtype</code></dt><dd><p>Model Type: either Growth-Type-Group Model (default: &quot;GTG&quot;) or Age-Structured (&quot;absel&quot;)</p>
</dd>
<dt><code>maxsd</code></dt><dd><p>Maximum number of standard deviations for length-at-age distribution (default is 2)</p>
</dd>
<dt><code>ngtg</code></dt><dd><p>Number of groups for the GTG model. Default is 13</p>
</dd>
<dt><code>P</code></dt><dd><p>Proportion of survival of initial cohort for maximum age for Age-Structured model. Default is 0.01</p>
</dd>
<dt><code>Nage</code></dt><dd><p>Number of pseudo-age classes in the Age Structured model. Default is 101</p>
</dd>
<dt><code>maxFM</code></dt><dd><p>Maximum value for F/M. Estimated values higher than this are trunctated to <code>maxFM</code>. Default is 4</p>
</dd>
</dl>



<h3>Value</h3>

<p>a object of class <code>'LB_obj'</code>
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
MyFit &lt;- LBSPRfit(LBparameters, LBlengths)
MyFit@Ests

## End(Not run)

</code></pre>

<hr>
<h2 id='LBSPRfit_'>Internal function to fit LBSPR model to length data</h2><span id='topic+LBSPRfit_'></span>

<h3>Description</h3>

<p>An internal function that fits the LBSPR model to a single year of length data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>LBSPRfit_(
  yr = 1,
  LB_pars = NULL,
  LB_lengths = NULL,
  Control = list(),
  pen = TRUE,
  useCPP = TRUE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="LBSPRfit__+3A_yr">yr</code></td>
<td>
<p>index of the year column to fit model to</p>
</td></tr>
<tr><td><code id="LBSPRfit__+3A_lb_pars">LB_pars</code></td>
<td>
<p>an object of class <code>'LB_pars'</code> that contains the life history information</p>
</td></tr>
<tr><td><code id="LBSPRfit__+3A_lb_lengths">LB_lengths</code></td>
<td>
<p>an object of class <code>'LB_lengths'</code> that contains the length data</p>
</td></tr>
<tr><td><code id="LBSPRfit__+3A_control">Control</code></td>
<td>
<p>a list of control options for the LBSPR model.</p>
</td></tr>
<tr><td><code id="LBSPRfit__+3A_pen">pen</code></td>
<td>
<p>apply a penalty if estimate of selectivity is very high?</p>
</td></tr>
<tr><td><code id="LBSPRfit__+3A_usecpp">useCPP</code></td>
<td>
<p>use cpp optimization code?</p>
</td></tr>
<tr><td><code id="LBSPRfit__+3A_verbose">verbose</code></td>
<td>
<p>display messages?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Control options are:
</p>

<dl>
<dt><code>modtype</code></dt><dd><p>Model Type: either Growth-Type-Group Model (default: &quot;GTG&quot;) or Age-Structured (&quot;absel&quot;)</p>
</dd>
<dt><code>maxsd</code></dt><dd><p>Maximum number of standard deviations for length-at-age distribution (default is 2)</p>
</dd>
<dt><code>ngtg</code></dt><dd><p>Number of groups for the GTG model. Default is 13</p>
</dd>
<dt><code>P</code></dt><dd><p>Proportion of survival of initial cohort for maximum age for Age-Structured model. Default is 0.01</p>
</dd>
<dt><code>Nage</code></dt><dd><p>Number of pseudo-age classes in the Age Structured model. Default is 101</p>
</dd>
<dt><code>maxFM</code></dt><dd><p>Maximum value for F/M. Estimated values higher than this are trunctated to <code>maxFM</code>. Default is 4</p>
</dd>
</dl>



<h3>Value</h3>

<p>a object of class <code>'LB_obj'</code>
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>

<hr>
<h2 id='LBSPRopt'>Optimisation Routine for fitting LBSPR</h2><span id='topic+LBSPRopt'></span>

<h3>Description</h3>

<p>A function that calculate the negative log-likelihood of the LBSPR model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>LBSPRopt(
  trypars,
  yr = 1,
  LB_pars = NULL,
  LB_lengths = NULL,
  Control = list(),
  pen = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="LBSPRopt_+3A_trypars">trypars</code></td>
<td>
<p>a vector of exploitation parameters in log space</p>
</td></tr>
<tr><td><code id="LBSPRopt_+3A_yr">yr</code></td>
<td>
<p>index of the year column to fit the model to</p>
</td></tr>
<tr><td><code id="LBSPRopt_+3A_lb_pars">LB_pars</code></td>
<td>
<p>an object of class <code>'LB_pars'</code> that contains the life history information</p>
</td></tr>
<tr><td><code id="LBSPRopt_+3A_lb_lengths">LB_lengths</code></td>
<td>
<p>an object of class <code>'LB_lengths'</code> that contains the length data</p>
</td></tr>
<tr><td><code id="LBSPRopt_+3A_control">Control</code></td>
<td>
<p>a list of control options for the LBSPR model.</p>
</td></tr>
<tr><td><code id="LBSPRopt_+3A_pen">pen</code></td>
<td>
<p>apply a penalty if estimate of selectivity is very high?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Control options are:
</p>

<dl>
<dt><code>modtype</code></dt><dd><p>Model Type: either Growth-Type-Group Model (default: &quot;GTG&quot;) or Age-Structured (&quot;absel&quot;)</p>
</dd>
<dt><code>maxsd</code></dt><dd><p>Maximum number of standard deviations for length-at-age distribution (default is 2)</p>
</dd>
<dt><code>ngtg</code></dt><dd><p>Number of groups for the GTG model. Default is 13</p>
</dd>
<dt><code>P</code></dt><dd><p>Proportion of survival of initial cohort for maximum age for Age-Structured model. Default is 0.01</p>
</dd>
<dt><code>Nage</code></dt><dd><p>Number of pseudo-age classes in the Age Structured model. Default is 101</p>
</dd>
<dt><code>maxFM</code></dt><dd><p>Maximum value for F/M. Estimated values higher than this are trunctated to <code>maxFM</code>. Default is 4</p>
</dd>
</dl>



<h3>Value</h3>

<p>a NLL value
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>

<hr>
<h2 id='LBSPRsim'>LBSPR Simulation Model</h2><span id='topic+LBSPRsim'></span>

<h3>Description</h3>

<p>Function that generates the expected equilbrium size composition given biological parameters, and fishing mortality and selectivity pattern.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>LBSPRsim(LB_pars = NULL, Control = list(), verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="LBSPRsim_+3A_lb_pars">LB_pars</code></td>
<td>
<p>an object of class <code>'LB_pars'</code> that contains the life history information</p>
</td></tr>
<tr><td><code id="LBSPRsim_+3A_control">Control</code></td>
<td>
<p>a list of control options for the LBSPR model.</p>
</td></tr>
<tr><td><code id="LBSPRsim_+3A_verbose">verbose</code></td>
<td>
<p>display messages?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Control options are:
</p>

<dl>
<dt><code>modtype</code></dt><dd><p>Model Type: either Growth-Type-Group Model (default: &quot;GTG&quot;) or Age-Structured (&quot;absel&quot;)</p>
</dd>
<dt><code>maxsd</code></dt><dd><p>Maximum number of standard deviations for length-at-age distribution (default is 2)</p>
</dd>
<dt><code>ngtg</code></dt><dd><p>Number of groups for the GTG model. Default is 13</p>
</dd>
<dt><code>P</code></dt><dd><p>Proportion of survival of initial cohort for maximum age for Age-Structured model. Default is 0.01</p>
</dd>
<dt><code>Nage</code></dt><dd><p>Number of pseudo-age classes in the Age Structured model. Default is 101</p>
</dd>
<dt><code>maxFM</code></dt><dd><p>Maximum value for F/M. Estimated values higher than this are trunctated to <code>maxFM</code>. Default is 4</p>
</dd>
</dl>



<h3>Value</h3>

<p>a object of class <code>'LB_obj'</code>
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>


<h3>Examples</h3>

<pre><code class='language-R'> LB_pars &lt;- new("LB_pars")
 LB_pars@MK &lt;- 1.5
 LB_pars@Linf &lt;- 100
 LB_pars@L50 &lt;- 50
 LB_pars@L95 &lt;- 55
 LB_pars@SL50 &lt;- 60
 LB_pars@SL95 &lt;- 65
 LB_pars@FM &lt;- 1
 Sim &lt;- LBSPRsim(LB_pars)
 Sim@SPR

</code></pre>

<hr>
<h2 id='LBSPRsim_'>Internal LBSPR Simulation Model</h2><span id='topic+LBSPRsim_'></span>

<h3>Description</h3>

<p>A internal function that generates the expected equilbrium size composition given
biological parameters, and fishing mortality and selectivity pattern.  Typically only
used by other functions in the package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>LBSPRsim_(LB_pars = NULL, Control = list(), verbose = TRUE, doCheck = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="LBSPRsim__+3A_lb_pars">LB_pars</code></td>
<td>
<p>an object of class <code>'LB_pars'</code> that contains the life history
information</p>
</td></tr>
<tr><td><code id="LBSPRsim__+3A_control">Control</code></td>
<td>
<p>a list of control options for the LBSPR model.</p>
</td></tr>
<tr><td><code id="LBSPRsim__+3A_verbose">verbose</code></td>
<td>
<p>display messages?</p>
</td></tr>
<tr><td><code id="LBSPRsim__+3A_docheck">doCheck</code></td>
<td>
<p>check if the LB_pars object is valid? Switch off when calling function
from a optimization routine.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Control options are:
</p>

<dl>
<dt><code>modtype</code></dt><dd><p>Model Type: either Growth-Type-Group Model (default: &quot;GTG&quot;) or
Age-Structured (&quot;absel&quot;)</p>
</dd>
<dt><code>maxsd</code></dt><dd><p>Maximum number of standard deviations for length-at-age distribution
(default is 2)</p>
</dd>
<dt><code>ngtg</code></dt><dd><p>Number of groups for the GTG model. Default is 13</p>
</dd>
<dt><code>P</code></dt><dd><p>Proportion of survival of initial cohort for maximum age for
Age-Structured model. Default is 0.01</p>
</dd>
<dt><code>Nage</code></dt><dd><p>Number of pseudo-age classes in the Age Structured model.
Default is 101</p>
</dd>
<dt><code>maxFM</code></dt><dd><p>Maximum value for F/M. Estimated values higher than this
are trunctated to <code>maxFM</code>. Default is 4</p>
</dd>
</dl>



<h3>Value</h3>

<p>a object of class <code>'LB_obj'</code>
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>

<hr>
<h2 id='plotCurves'>Plot the Relative Yield, YPR, SPR, SSB, and Recruitment curves</h2><span id='topic+plotCurves'></span>

<h3>Description</h3>

<p>A function that plots the Relative Yield, YPR, SPR, SSB, and Recruitment curves
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotCurves(
  LB_obj,
  X = c("FM", "SSB", "SPR"),
  Y = c("SPR", "SSB", "Yield"),
  size.axtex = 12,
  size.title = 14,
  size.leg = 12,
  size.pt = 4,
  inc.pts = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotCurves_+3A_lb_obj">LB_obj</code></td>
<td>
<p>An object of class <code>'LB_obj'</code> that contains the life history and fishing information</p>
</td></tr>
<tr><td><code id="plotCurves_+3A_x">X</code></td>
<td>
<p>a character value indicating what to plot on the x-axis: F/M (<code>"FM"</code>) or SSB (<code>"SSB"</code>)</p>
</td></tr>
<tr><td><code id="plotCurves_+3A_y">Y</code></td>
<td>
<p>a character value indicating what to plot on the y-axis: <code>SPR</code>, <code>SSB</code>, <code>Yield</code>, <code>YPR</code> or <code>Rec</code>(multiple okay)</p>
</td></tr>
<tr><td><code id="plotCurves_+3A_size.axtex">size.axtex</code></td>
<td>
<p>size of the axis text</p>
</td></tr>
<tr><td><code id="plotCurves_+3A_size.title">size.title</code></td>
<td>
<p>size of axis title</p>
</td></tr>
<tr><td><code id="plotCurves_+3A_size.leg">size.leg</code></td>
<td>
<p>size of legend text</p>
</td></tr>
<tr><td><code id="plotCurves_+3A_size.pt">size.pt</code></td>
<td>
<p>size of the points on the plots</p>
</td></tr>
<tr><td><code id="plotCurves_+3A_inc.pts">inc.pts</code></td>
<td>
<p>Include points on the plots?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>

<hr>
<h2 id='plotEsts'>Plot LBSPR model estimates</h2><span id='topic+plotEsts'></span>

<h3>Description</h3>

<p>A function that plots the estimates of the LBSPR with a smoother line
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotEsts(
  LB_obj = NULL,
  pars = c("Sel", "FM", "SPR"),
  Lwd = 2.5,
  ptCex = 1.25,
  axCex = 1.45,
  labCex = 1.55,
  doSmooth = TRUE,
  incL50 = FALSE,
  CIcol = "darkgray",
  L50col = "gray"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotEsts_+3A_lb_obj">LB_obj</code></td>
<td>
<p>an object of class <code>'LB_obj'</code> that contains the life history and fishing information</p>
</td></tr>
<tr><td><code id="plotEsts_+3A_pars">pars</code></td>
<td>
<p>a character vectors specifying which plots to create</p>
</td></tr>
<tr><td><code id="plotEsts_+3A_lwd">Lwd</code></td>
<td>
<p>line width</p>
</td></tr>
<tr><td><code id="plotEsts_+3A_ptcex">ptCex</code></td>
<td>
<p>size of plotted points</p>
</td></tr>
<tr><td><code id="plotEsts_+3A_axcex">axCex</code></td>
<td>
<p>size of the axis</p>
</td></tr>
<tr><td><code id="plotEsts_+3A_labcex">labCex</code></td>
<td>
<p>size of axis label</p>
</td></tr>
<tr><td><code id="plotEsts_+3A_dosmooth">doSmooth</code></td>
<td>
<p>apply the smoother?</p>
</td></tr>
<tr><td><code id="plotEsts_+3A_incl50">incL50</code></td>
<td>
<p>include L50 line?</p>
</td></tr>
<tr><td><code id="plotEsts_+3A_cicol">CIcol</code></td>
<td>
<p>colour of the confidence interval bars</p>
</td></tr>
<tr><td><code id="plotEsts_+3A_l50col">L50col</code></td>
<td>
<p>colour of L50 line (if included)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>

<hr>
<h2 id='plotMat'>Plot the maturity-at-length and selectivity-at-length curves</h2><span id='topic+plotMat'></span>

<h3>Description</h3>

<p>A function that plots the maturity-at-length and selectivity-at-length curves
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotMat(
  LB_obj = NULL,
  size.axtex = 12,
  size.title = 14,
  size.leg = 12,
  useSmooth = TRUE,
  Title = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotMat_+3A_lb_obj">LB_obj</code></td>
<td>
<p>an object of class <code>'LB_obj'</code> that contains the life history and fishing information</p>
</td></tr>
<tr><td><code id="plotMat_+3A_size.axtex">size.axtex</code></td>
<td>
<p>size of the axis text</p>
</td></tr>
<tr><td><code id="plotMat_+3A_size.title">size.title</code></td>
<td>
<p>size of axis title</p>
</td></tr>
<tr><td><code id="plotMat_+3A_size.leg">size.leg</code></td>
<td>
<p>size of legend text</p>
</td></tr>
<tr><td><code id="plotMat_+3A_usesmooth">useSmooth</code></td>
<td>
<p>use the smoothed estimates?</p>
</td></tr>
<tr><td><code id="plotMat_+3A_title">Title</code></td>
<td>
<p>optional character string for plot title</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>

<hr>
<h2 id='plotSim'>General plotting function for simulated data</h2><span id='topic+plotSim'></span>

<h3>Description</h3>

<p>A general function that plots the simulation object. Includes four different plots:
equilbrium size structure, maturity and selectivity curves, growth curves, and relative Yield, YPR, SPR, SSB, and Recruitment curves.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotSim(
  LB_obj = NULL,
  type = c("all", "len.freq", "growth", "maturity.select", "yield.curve"),
  lf.type = c("catch", "pop"),
  growth.type = c("LAA", "WAA"),
  y.type = c("SPR", "SSB", "Yield", "YPR"),
  x.type = c("FM", "SSB", "SPR"),
  perRec = FALSE,
  inc.SPR = TRUE,
  Cols = NULL,
  size.axtex = 12,
  size.title = 14,
  size.SPR = 4,
  size.leg = 12,
  inc.pts = TRUE,
  size.pt = 4
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotSim_+3A_lb_obj">LB_obj</code></td>
<td>
<p>an object of class <code>'LB_obj'</code> that contains the life history and fishing information</p>
</td></tr>
<tr><td><code id="plotSim_+3A_type">type</code></td>
<td>
<p>a character value indicating which plots to include: &quot;all&quot;, &quot;len.freq&quot;, &quot;growth&quot;, &quot;maturity.select&quot;, &quot;yield.curve&quot;</p>
</td></tr>
<tr><td><code id="plotSim_+3A_lf.type">lf.type</code></td>
<td>
<p>a character value indicating if the <code>catch</code> or <code>pop</code> (population) should be plotted for the length frequency</p>
</td></tr>
<tr><td><code id="plotSim_+3A_growth.type">growth.type</code></td>
<td>
<p>should growth be plotted as length-at-age (<code>"LAA"</code>) or weight-at-age (<code>"WAA"</code>)</p>
</td></tr>
<tr><td><code id="plotSim_+3A_y.type">y.type</code></td>
<td>
<p>what curves should be plotted on y-axis? <code>"SPR"</code>, <code>"SSB"</code>, <code>"Yield"</code>, <code>"YPR"</code></p>
</td></tr>
<tr><td><code id="plotSim_+3A_x.type">x.type</code></td>
<td>
<p>what curves should be plotted on x-axis? <code>"FM"</code>, <code>"SSB"</code>, <code>"SPR"</code></p>
</td></tr>
<tr><td><code id="plotSim_+3A_perrec">perRec</code></td>
<td>
<p>a logical to indicate if plot should be per-recruit (ignore steepness) or not (zero recruitment if SPR below replacement level)</p>
</td></tr>
<tr><td><code id="plotSim_+3A_inc.spr">inc.SPR</code></td>
<td>
<p>a logical to indicate if SPR value should be printed in top right corner of plot</p>
</td></tr>
<tr><td><code id="plotSim_+3A_cols">Cols</code></td>
<td>
<p>optional character vector of colours for the plot</p>
</td></tr>
<tr><td><code id="plotSim_+3A_size.axtex">size.axtex</code></td>
<td>
<p>size of the axis text</p>
</td></tr>
<tr><td><code id="plotSim_+3A_size.title">size.title</code></td>
<td>
<p>size of axis title</p>
</td></tr>
<tr><td><code id="plotSim_+3A_size.spr">size.SPR</code></td>
<td>
<p>size of SPR text</p>
</td></tr>
<tr><td><code id="plotSim_+3A_size.leg">size.leg</code></td>
<td>
<p>size of legend text</p>
</td></tr>
<tr><td><code id="plotSim_+3A_inc.pts">inc.pts</code></td>
<td>
<p>Include points on the plots?</p>
</td></tr>
<tr><td><code id="plotSim_+3A_size.pt">size.pt</code></td>
<td>
<p>size of the points on the plots</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>


<h3>Examples</h3>

<pre><code class='language-R'> LB_pars &lt;- new("LB_pars")
 LB_pars@MK &lt;- 1.5
 LB_pars@Linf &lt;- 100
 LB_pars@L50 &lt;- 50
 LB_pars@L95 &lt;- 55
 LB_pars@SL50 &lt;- 60
 LB_pars@SL95 &lt;- 65
 LB_pars@FM &lt;- 1
 Sim &lt;- LBSPRsim(LB_pars)
 plotSim(Sim)

</code></pre>

<hr>
<h2 id='plotSize'>Plot the size data and model fits</h2><span id='topic+plotSize'></span>

<h3>Description</h3>

<p>A function that plots size data and the fitted LBSPR model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotSize(
  LB_obj = NULL,
  size.axtex = 12,
  size.title = 14,
  Title = NULL,
  scales = c("fixed", "free_x", "free_y", "free"),
  inc.text = FALSE,
  warn.size = 0.8
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotSize_+3A_lb_obj">LB_obj</code></td>
<td>
<p>an object of class <code>'LB_obj'</code> that contains the life history and fishing information</p>
</td></tr>
<tr><td><code id="plotSize_+3A_size.axtex">size.axtex</code></td>
<td>
<p>size of the axis text</p>
</td></tr>
<tr><td><code id="plotSize_+3A_size.title">size.title</code></td>
<td>
<p>size of axis title</p>
</td></tr>
<tr><td><code id="plotSize_+3A_title">Title</code></td>
<td>
<p>optional character string for plot title</p>
</td></tr>
<tr><td><code id="plotSize_+3A_scales">scales</code></td>
<td>
<p>argument to ggplot2 function. Are scales shared across all facets
(the default, &quot;fixed&quot;), or do they vary across rows (&quot;free_x&quot;), columns (&quot;free_y&quot;),
or both rows and columns (&quot;free&quot;)</p>
</td></tr>
<tr><td><code id="plotSize_+3A_inc.text">inc.text</code></td>
<td>
<p>Include text on plotting warning of high F or selectivity estimates?</p>
</td></tr>
<tr><td><code id="plotSize_+3A_warn.size">warn.size</code></td>
<td>
<p>numeric. Size of font for the warnings</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>

<hr>
<h2 id='plotSPRCirc'>Circle of estimated SPR and target and limit points</h2><span id='topic+plotSPRCirc'></span>

<h3>Description</h3>

<p>A function that creates a circle plot showing the estimated SPR relative to the
target and limit reference points
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotSPRCirc(
  LB_obj = NULL,
  SPRTarg = 0.4,
  SPRLim = 0.2,
  useSmooth = TRUE,
  Title = FALSE,
  Leg = TRUE,
  limcol = "#ff1919",
  targcol = "#f2ff02",
  abtgcol = "#32ff36",
  labcol = NULL,
  bgcol = "#FAFAFA",
  labcex = 2,
  texcex = 1.3
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotSPRCirc_+3A_lb_obj">LB_obj</code></td>
<td>
<p>an object of class <code>'LB_obj'</code> that contains the life history and fishing information</p>
</td></tr>
<tr><td><code id="plotSPRCirc_+3A_sprtarg">SPRTarg</code></td>
<td>
<p>a numeric value specifying the SPR target</p>
</td></tr>
<tr><td><code id="plotSPRCirc_+3A_sprlim">SPRLim</code></td>
<td>
<p>a numeric value specifying the SPR limit</p>
</td></tr>
<tr><td><code id="plotSPRCirc_+3A_usesmooth">useSmooth</code></td>
<td>
<p>use the smoothed estimates? Usually would want to do this</p>
</td></tr>
<tr><td><code id="plotSPRCirc_+3A_title">Title</code></td>
<td>
<p>include the title?</p>
</td></tr>
<tr><td><code id="plotSPRCirc_+3A_leg">Leg</code></td>
<td>
<p>include the legend?</p>
</td></tr>
<tr><td><code id="plotSPRCirc_+3A_limcol">limcol</code></td>
<td>
<p>colour for SPR Limit (hex; default is red)</p>
</td></tr>
<tr><td><code id="plotSPRCirc_+3A_targcol">targcol</code></td>
<td>
<p>colour for SPR target (hex; default is yellow)</p>
</td></tr>
<tr><td><code id="plotSPRCirc_+3A_abtgcol">abtgcol</code></td>
<td>
<p>colour for above SPR target (hex; default is green)</p>
</td></tr>
<tr><td><code id="plotSPRCirc_+3A_labcol">labcol</code></td>
<td>
<p>optional fixed colour for estimated SPR label</p>
</td></tr>
<tr><td><code id="plotSPRCirc_+3A_bgcol">bgcol</code></td>
<td>
<p>colour for the background</p>
</td></tr>
<tr><td><code id="plotSPRCirc_+3A_labcex">labcex</code></td>
<td>
<p>size for the estimated SPR label</p>
</td></tr>
<tr><td><code id="plotSPRCirc_+3A_texcex">texcex</code></td>
<td>
<p>size for estimated other labels</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>

<hr>
<h2 id='plotTarg'>Plot sampled length structure against target simulated size composition</h2><span id='topic+plotTarg'></span>

<h3>Description</h3>

<p>A function that plots the observed size structure against the expected size composition at the target SPR
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotTarg(
  LB_pars = NULL,
  LB_lengths = NULL,
  yr = 1,
  Cols = NULL,
  title = NULL,
  targtext = TRUE,
  size.axtex = 12,
  size.title = 14,
  scales = c("fixed", "free_x", "free_y", "free")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotTarg_+3A_lb_pars">LB_pars</code></td>
<td>
<p>an object of class <code>'LB_pars'</code> that contains the life history and fishing information</p>
</td></tr>
<tr><td><code id="plotTarg_+3A_lb_lengths">LB_lengths</code></td>
<td>
<p>an object of class <code>'LB_lengths'</code> that contains the observed size data</p>
</td></tr>
<tr><td><code id="plotTarg_+3A_yr">yr</code></td>
<td>
<p>index for sampled length data (defaults to 1)</p>
</td></tr>
<tr><td><code id="plotTarg_+3A_cols">Cols</code></td>
<td>
<p>optional character vector of colours for the plot</p>
</td></tr>
<tr><td><code id="plotTarg_+3A_title">title</code></td>
<td>
<p>character - optional title for plot</p>
</td></tr>
<tr><td><code id="plotTarg_+3A_targtext">targtext</code></td>
<td>
<p>logical - should the SPR target text be displayed as a subtitle?</p>
</td></tr>
<tr><td><code id="plotTarg_+3A_size.axtex">size.axtex</code></td>
<td>
<p>size of the axis text</p>
</td></tr>
<tr><td><code id="plotTarg_+3A_size.title">size.title</code></td>
<td>
<p>size of axis title</p>
</td></tr>
<tr><td><code id="plotTarg_+3A_scales">scales</code></td>
<td>
<p>argument to ggplot2 function. Are scales shared across all facets
(the default, &quot;fixed&quot;), or do they vary across rows (&quot;free_x&quot;), columns (&quot;free_y&quot;),
or both rows and columns (&quot;free&quot;)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>

<hr>
<h2 id='Shiny'>Run a Shiny Application</h2><span id='topic+Shiny'></span>

<h3>Description</h3>

<p><code>Shiny</code> runs one of the Shiny Applications that are included in the package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Shiny(app)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Shiny_+3A_app">app</code></td>
<td>
<p>The name of the Shiny application to run. Currently the available Shiny apps are &quot;LBSPR&quot; and &quot;Sim&quot;</p>
</td></tr>
</table>


<h3>References</h3>

<p>Modified from Deal Attali's code: <a href="https://deanattali.com/2015/04/21/r-package-shiny-app/">https://deanattali.com/2015/04/21/r-package-shiny-app/</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
