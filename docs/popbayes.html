<!DOCTYPE html><html><head><title>Help for package popbayes</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {popbayes}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bugs_to_df'><p>Extract estimated parameters from a list of BUGS outputs</p></a></li>
<li><a href='#diagnostic'><p>Check if a BUGS model has converged</p></a></li>
<li><a href='#filter_series'><p>Extract the count series corresponding to a location and/or a species</p></a></li>
<li><a href='#fit_trend'><p>Fit a Bayesian model to estimate population size trend</p></a></li>
<li><a href='#format_data'><p>Format count series</p></a></li>
<li><a href='#garamba'><p>African mammals survey in the Garamba National Park</p></a></li>
<li><a href='#list_series'><p>Retrieve the count series names</p></a></li>
<li><a href='#plot_series'><p>Plot original vs converted counts</p></a></li>
<li><a href='#plot_trend'><p>Plot estimated population trend</p></a></li>
<li><a href='#popbayes-package'><p>popbayes: Bayesian Model to Estimate Population Trends from Counts Series</p></a></li>
<li><a href='#read_bugs'><p>Import a list of BUGS outputs previously exported</p></a></li>
<li><a href='#read_series'><p>Import a list of count series previously exported</p></a></li>
<li><a href='#series_to_df'><p>Extract original/converted count series data from a list</p></a></li>
<li><a href='#species_info'><p>Species information dataset</p></a></li>
<li><a href='#w_to_rmax'><p>Compute rmax from adult female body mass</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.0</td>
</tr>
<tr>
<td>Title:</td>
<td>Bayesian Model to Estimate Population Trends from Counts Series</td>
</tr>
<tr>
<td>Description:</td>
<td>Infers the trends of one or several animal populations over time 
    from series of counts. It does so by accounting for count precision 
    (provided or inferred based on expert knowledge, e.g. guesstimates), 
    smoothing the population rate of increase over time, and accounting for the
    maximum demographic potential of species. Inference is carried out in a 
    Bayesian framework. This work is part of the FRB-CESAB working group
    AfroBioDrivers 
    <a href="https://www.fondationbiodiversite.fr/en/the-frb-in-action/programs-and-projects/le-cesab/afrobiodrivers/">https://www.fondationbiodiversite.fr/en/the-frb-in-action/programs-and-projects/le-cesab/afrobiodrivers/</a>.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://frbcesab.github.io/popbayes/">https://frbcesab.github.io/popbayes/</a>,
<a href="https://github.com/frbcesab/popbayes">https://github.com/frbcesab/popbayes</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/frbcesab/popbayes/issues">https://github.com/frbcesab/popbayes/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>JAGS (&gt;= 4.1)</td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics, grDevices, R2jags, stats, usethis</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-06-15 11:34:42 UTC; nicolas</td>
</tr>
<tr>
<td>Author:</td>
<td>Nicolas Casajus <a href="https://orcid.org/0000-0002-5537-5294"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Roger Pradel <a href="https://orcid.org/0000-0002-2684-9251"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Nicolas Casajus &lt;nicolas.casajus@fondationbiodiversite.fr&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-06-15 11:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='bugs_to_df'>Extract estimated parameters from a list of BUGS outputs</h2><span id='topic+bugs_to_df'></span>

<h3>Description</h3>

<p>From the output of the function <code><a href="#topic+fit_trend">fit_trend()</a></code> (or <code><a href="#topic+read_bugs">read_bugs()</a></code>), this
function extracts estimated parameters into a <code>data.frame</code>.
</p>
<p>The resulting <code>data.frame</code> has no particular use in <code>popbayes</code> but it can be
useful for users.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bugs_to_df(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bugs_to_df_+3A_data">data</code></td>
<td>
<p>a named <code>list</code> of BUGS outputs. The output of <code><a href="#topic+fit_trend">fit_trend()</a></code> or
<code><a href="#topic+read_bugs">read_bugs()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Garamba raw dataset ----
file_path &lt;- system.file("extdata", "garamba_survey.csv", 
                         package = "popbayes")
                         
garamba &lt;- read.csv(file = file_path)

## Create temporary folder ----
temp_path &lt;- tempdir()

## Format dataset ----
garamba_formatted &lt;- popbayes::format_data(
  data              = garamba, 
  path              = temp_path,
  field_method      = "field_method",
  pref_field_method = "pref_field_method",
  conversion_A2G    = "conversion_A2G",
  rmax              = "rmax")
                                        
## Select one serie ----
a_buselaphus &lt;- popbayes::filter_series(garamba_formatted, 
                                        location = "Garamba",
                                        species  = "Alcelaphus buselaphus")

## Fit population trends (requires JAGS) ----
a_buselaphus_mod &lt;- popbayes::fit_trend(a_buselaphus, path = temp_path)

## Import BUGS outputs for one count series ----
bugs &lt;- popbayes::read_bugs(series = "garamba__alcelaphus_buselaphus", 
                            path   = temp_path)

## Extract estimated parameters ----
popbayes::bugs_to_df(bugs)

</code></pre>

<hr>
<h2 id='diagnostic'>Check if a BUGS model has converged</h2><span id='topic+diagnostic'></span>

<h3>Description</h3>

<p>From the output of the function <code><a href="#topic+fit_trend">fit_trend()</a></code> (or <code><a href="#topic+read_bugs">read_bugs()</a></code>), this
function checks if the estimation of all parameters of one (or several)
BUGS model has converged. This diagnostic is performed by comparing the
<code>Rhat</code> value of each parameter to a <code>threshold</code> (default is <code>1.1</code>). If some
<code>Rhat</code> values are greater than this threshold (no convergence), a message
listing problematic models is displayed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diagnostic(data, threshold = 1.1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="diagnostic_+3A_data">data</code></td>
<td>
<p>a named <code>list</code> of BUGS outputs. The output of <code><a href="#topic+fit_trend">fit_trend()</a></code> or
<code><a href="#topic+read_bugs">read_bugs()</a></code>.</p>
</td></tr>
<tr><td><code id="diagnostic_+3A_threshold">threshold</code></td>
<td>
<p>a <code>numeric</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Garamba raw dataset ----
file_path &lt;- system.file("extdata", "garamba_survey.csv", 
                         package = "popbayes")
                         
garamba &lt;- read.csv(file = file_path)

## Create temporary folder ----
temp_path &lt;- tempdir()

## Format dataset ----
garamba_formatted &lt;- popbayes::format_data(
  data              = garamba, 
  path              = temp_path,
  field_method      = "field_method",
  pref_field_method = "pref_field_method",
  conversion_A2G    = "conversion_A2G",
  rmax              = "rmax")
                                        
## Select one serie ----
a_buselaphus &lt;- popbayes::filter_series(garamba_formatted, 
                                        location = "Garamba",
                                        species  = "Alcelaphus buselaphus")

## Fit population trends (requires JAGS) ----
a_buselaphus_mod &lt;- popbayes::fit_trend(a_buselaphus, path = temp_path)

## Check for convergence ----
popbayes::diagnostic(a_buselaphus_mod)

</code></pre>

<hr>
<h2 id='filter_series'>Extract the count series corresponding to a location and/or a species</h2><span id='topic+filter_series'></span>

<h3>Description</h3>

<p>This function identifies the count series relative to a species and/or
a location in a named list like the output of function <code><a href="#topic+format_data">format_data()</a></code>. If
both species and location are provided, the series of counts of the species
at the specified location is extracted. Otherwise, all series corresponding
to the specified criterion (species or location) are extracted.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_series(data, species = NULL, location = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_series_+3A_data">data</code></td>
<td>
<p>a named <code>list</code>. The output of function <code><a href="#topic+format_data">format_data()</a></code>.</p>
</td></tr>
<tr><td><code id="filter_series_+3A_species">species</code></td>
<td>
<p>a <code>character</code> string. A species name.</p>
</td></tr>
<tr><td><code id="filter_series_+3A_location">location</code></td>
<td>
<p>a <code>character</code> string. A site name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A subset of <code>data</code>, i.e. a named <code>list</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Garamba raw dataset ----
file_path &lt;- system.file("extdata", "garamba_survey.csv", 
                         package = "popbayes")
                         
garamba &lt;- read.csv(file = file_path)

## Create temporary folder ----
temp_path &lt;- tempdir()

## Format dataset ----
garamba_formatted &lt;- popbayes::format_data(
  data              = garamba, 
  path              = temp_path,
  field_method      = "field_method",
  pref_field_method = "pref_field_method",
  conversion_A2G    = "conversion_A2G",
  rmax              = "rmax")

## Number of count series ----
length(garamba_formatted)

## Retrieve count series names ----
popbayes::list_series(path = temp_path)

## Get data for Alcelaphus buselaphus (at all sites) ----
x &lt;- popbayes::filter_series(garamba_formatted, 
                             species = "Alcelaphus buselaphus")

## Get data at Garamba (for all species) ----
x &lt;- popbayes::filter_series(garamba_formatted, 
                             location = "Garamba")

## Get data for Alcelaphus buselaphus at Garamba only ----
x &lt;- popbayes::filter_series(garamba_formatted, 
                             location = "Garamba",
                             species  = "Alcelaphus buselaphus")
</code></pre>

<hr>
<h2 id='fit_trend'>Fit a Bayesian model to estimate population size trend</h2><span id='topic+fit_trend'></span>

<h3>Description</h3>

<p>This function applies a Bayesian model to count series in order to infer
the population trend over time. This function only works on the output of
<code><a href="#topic+format_data">format_data()</a></code> or <code><a href="#topic+filter_series">filter_series()</a></code>.
</p>
<p><strong>Important:</strong> This function uses <code><a href="R2jags.html#topic+jags">R2jags::jags()</a></code> and the
freeware <strong>JAGS</strong> (<a href="https://mcmc-jags.sourceforge.io/">https://mcmc-jags.sourceforge.io/</a>) must be
installed.
</p>
<p>There are two types of options: model options (argument <code>model_opts</code>) and
MCMC options (argument <code>mcmc_opts</code>).
</p>
<p><strong>A. Model options</strong>
</p>

<ul>
<li><p> a smoothing factor: the precision (the inverse of variance) of a normal
distribution centered on the current relative rate of increase r from which
the next candidate relative rate of increase (see below) is drawn.
The highest this number, the tighter the link between successive relative
rates of increase. The default <code>100</code> corresponds to a moderate link.
</p>
</li>
<li><p> a logical indicating whether the population growth must remain limited by
the species demographic potential (provided by the argument <code>rmax</code> in
<code><a href="#topic+format_data">format_data()</a></code>).
</p>
</li></ul>

<p>The relative rate of increase is the change in log population size between
two dates. The quantity actually being modeled is the relative rate of
increase per unit of time (usually one date). This quantity reflects more
directly the prevailing conditions than the population size itself, which is
the reason why it has been chosen.
</p>
<p>When the second model option is set to <code>TRUE</code>, the candidate rate of
increase is compared to the maximum relative rate of increase
(obtained when using <code><a href="#topic+format_data">format_data()</a></code>) and replaced by <code>rmax</code> if greater.
</p>
<p><strong>B. MCMC options</strong>
</p>
<p>Classical Markov chain Monte Carlo (MCMC) settings (see argument <code>mcmc_opts</code>
below).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit_trend(
  data,
  model_opts = list(100, TRUE),
  mcmc_opts = list(ni = 50000, nt = 3, nb = 10000, nc = 2),
  path = "."
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fit_trend_+3A_data">data</code></td>
<td>
<p>a named <code>list</code>. The output of <code><a href="#topic+format_data">format_data()</a></code> or
<code><a href="#topic+filter_series">filter_series()</a></code>.</p>
</td></tr>
<tr><td><code id="fit_trend_+3A_model_opts">model_opts</code></td>
<td>
<p>a <code>list</code> of two vectors. The model smoothing factor
(<code>numeric</code>) and a <code>logical</code> indicating if the parameter <strong>r</strong> must be
limited by <code>rmax</code> (<code>TRUE</code>) or not (<code>FALSE</code>). If this second parameter is
<code>TRUE</code>, the argument <code>rmax</code> cannot be <code>NULL</code> unless species are listed in
<code>popbayes</code> (in <code>species_info</code>).</p>
</td></tr>
<tr><td><code id="fit_trend_+3A_mcmc_opts">mcmc_opts</code></td>
<td>
<p>a <code>list</code> containing the number of iterations (<code>ni</code>), the
thinning factor (<code>nt</code>), the length of burn in (<code>nb</code>), i.e. the number of
iterations to discard at the beginning, and the number of chains (<code>nc</code>).</p>
</td></tr>
<tr><td><code id="fit_trend_+3A_path">path</code></td>
<td>
<p>a <code>character</code> string. The directory to save BUGS outputs (the
same as in <code><a href="#topic+format_data">format_data()</a></code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An n-element <code>list</code> (where <code>n</code> is the number of count series). Each
element of the list is a BUGS output as provided by JAGS (also written
in the folder <code>path</code>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Garamba raw dataset ----
file_path &lt;- system.file("extdata", "garamba_survey.csv", 
                         package = "popbayes")
                         
garamba &lt;- read.csv(file = file_path)

## Create temporary folder ----
temp_path &lt;- tempdir()

## Format dataset ----
garamba_formatted &lt;- popbayes::format_data(
  data              = garamba, 
  path              = temp_path,
  field_method      = "field_method",
  pref_field_method = "pref_field_method",
  conversion_A2G    = "conversion_A2G",
  rmax              = "rmax")

## Get data for Alcelaphus buselaphus at Garamba only ----
a_buselaphus &lt;- popbayes::filter_series(garamba_formatted, 
                                        location = "Garamba",
                                        species  = "Alcelaphus buselaphus")
                                        

## Fit population trend (requires JAGS) ----
a_buselaphus_mod &lt;- popbayes::fit_trend(a_buselaphus, path = temp_path)

## Check for convergence ----
popbayes::diagnostic(a_buselaphus_mod, threshold = 1.1)

## Plot estimated population trend ----
popbayes::plot_trend(series = "garamba__alcelaphus_buselaphus", 
                     path   = temp_path)

## Plot MCMC traceplot ----
R2jags::traceplot(a_buselaphus_mod[[1]], ask = TRUE)

</code></pre>

<hr>
<h2 id='format_data'>Format count series</h2><span id='topic+format_data'></span>

<h3>Description</h3>

<p>This function provides an easy way to get count series ready to be analyzed
by the package <code>popbayes</code>. It must be used prior to all other functions.
</p>
<p>This function formats the count series (passed through the argument
<code>data</code>) by selecting and renaming columns, checking columns format and
content, and removing missing data (if <code>na_rm = TRUE</code>). It converts the
original data frame into a list of count series that will be analyzed later
by the function <code><a href="#topic+fit_trend">fit_trend()</a></code> to estimate population trends.
</p>
<p>To be usable for the estimation of population trends, counts must be
accompanied by information on precision. The population trend model requires
a 95% confident interval (CI).
If estimates are total counts or guesstimates, this function will construct
boundaries of the 95% CI by applying the rules set out in
<a href="https://frbcesab.github.io/popbayes/articles/popbayes.html">https://frbcesab.github.io/popbayes/articles/popbayes.html</a>.
If counts were estimated by a sampling method the user needs to specify a
measure of precision. Precision is preferably provided in the form of a 95%
CI by means of two fields: <code>lower_ci</code> and <code>upper_ci</code>. It may also be given
in the form of a standard deviation (<code>sd</code>), a variance (<code>var</code>), or a
coefficient of variation (<code>cv</code>). If the fields <code>lower_ci</code> and <code>upper_ci</code> are
both absent (or <code>NA</code>), fields <code>sd</code>, <code>var</code>, and <code>cv</code> are examined in this
order. When one is found valid (no missing value), a 95% CI is derived
assuming a normal distribution.
The field <code>stat_method</code> must be present in <code>data</code> to indicate
if counts are <strong>total counts</strong> (<code>'T'</code>), <strong>sampling</strong> (<code>'S'</code>), or
<strong>guesstimate</strong> (<code>'X'</code>).
</p>
<p>If a series mixes aerial and ground counts, a field <code>field_method</code> must
also be present and must contain either <code>'A'</code> (aerial counts), or <code>'G'</code>
(ground counts). As all counts must eventually refer to the same field
method for a correct estimation of trend, a conversion will be performed to
homogenize counts. This conversion is based on a <strong>preferred field method</strong>
and a <strong>conversion factor</strong> both specific to a species/category.
The preferred field method specifies the conversion direction. The
conversion factor is the multiplicative factor that must be applied to an
aerial count to get an equivalent ground count (note that if the preferred
field method is <code>'A'</code>, ground counts will be divided by the conversion
factor to get the equivalent aerial count).
</p>
<p>The argument <code>rmax</code> represents the maximum change in log population size
between two dates (i.e. the relative rate of increase). It will be used
by <code><a href="#topic+fit_trend">fit_trend()</a></code> but must be provided in this function.
</p>
<p>These three parameters, named <code>pref_field_method</code>, <code>conversion_A2G</code>, and
<code>rmax</code> can be present in <code>data</code> or in a second <code>data.frame</code>
(passed through the argument <code>info</code>).
Alternatively, the package <code>popbayes</code> provides their values for some
African large mammals.
</p>
<p><strong>Note:</strong> If the field <code>field_method</code> is absent in <code>data</code>, counts are
assumed to be obtained with one field method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_data(
  data,
  info = NULL,
  date = "date",
  count = "count",
  location = "location",
  species = "species",
  stat_method = "stat_method",
  lower_ci = "lower_ci",
  upper_ci = "upper_ci",
  sd = NULL,
  var = NULL,
  cv = NULL,
  field_method = NULL,
  pref_field_method = NULL,
  conversion_A2G = NULL,
  rmax = NULL,
  path = ".",
  na_rm = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_data_+3A_data">data</code></td>
<td>
<p>a <code>data.frame</code> with at least five columns: <code>location</code>,
<code>species</code>, <code>date</code>, <code>count</code>, and <code>stat_method</code>.
</p>
<p>The <code>stat_method</code> field indicates the method used to estimate counts. It
can contain: <code>T</code> (total counts), <code>X</code> (guesstimate), and/or <code>S</code> (sampling).
</p>
<p>If individual counts were estimated by <strong>sampling</strong>, additional column(s)
providing a measure of precision is also required (e.g. <code>lower_ci</code> and
<code>upper_ci</code>, or <code>sd</code>, <code>cv</code>, <code>var</code>). Precision metrics can be different
between counts. For instance, some sampling counts can have a <code>sd</code> value
and others <code>lower_ci</code> and <code>upper_ci</code>. In that case three columns are
required (<code>lower_ci</code>, <code>upper_ci</code>, and <code>sd</code>). See above section
<strong>Description</strong> for further information on the computation of the 95%
confident interval of estimates.
</p>
<p>If the individuals were counted by different methods, an additional field
<code>field_method</code> is also required. It can contain: <code>G</code> (ground counts)
and/or <code>A</code> (aerial counts). See above section <strong>Description</strong> for further
information on the counts conversion.
</p>
<p>Others fields can be present either in <code>data</code> or <code>info</code> (see below).</p>
</td></tr>
<tr><td><code id="format_data_+3A_info">info</code></td>
<td>
<p>(optional) a <code>data.frame</code> with species in rows and the following
columns: <code>species</code> (species name), <code>pref_field_method</code>,
<code>conversion_A2G</code>, and <code>rmax</code>. See above section <strong>Description</strong> for
further information on these fields.
Default is <code>NULL</code> (i.e. these information must be present in <code>data</code>
if not available in <code>popbayes</code>).</p>
</td></tr>
<tr><td><code id="format_data_+3A_date">date</code></td>
<td>
<p>a <code>character</code> string. The column name in <code>data</code> of the date.
This column <code>date</code> must be in a numerical form with possibly a decimal
part.
Default is <code>'date'</code>.</p>
</td></tr>
<tr><td><code id="format_data_+3A_count">count</code></td>
<td>
<p>a <code>character</code> string. The column name in <code>data</code> of the
number of individuals. This column must be numerical.
Default is <code>'count'</code>.</p>
</td></tr>
<tr><td><code id="format_data_+3A_location">location</code></td>
<td>
<p>a <code>character</code> string. The column name in <code>data</code> of the
site. This field is used to distinguish count series from different sites
(if required) and to create an unique series name.
Default is <code>'location'</code>.</p>
</td></tr>
<tr><td><code id="format_data_+3A_species">species</code></td>
<td>
<p>a <code>character</code> string. The column name in <code>data</code> (and
in <code>info</code> if provided) of the species. This field is used to distinguish
count series for different species (if required) and to create an unique
series name.
Default is <code>'species'</code>.</p>
</td></tr>
<tr><td><code id="format_data_+3A_stat_method">stat_method</code></td>
<td>
<p>a <code>character</code> string. The column name in <code>data</code> of
the method used to estimate individuals counts. It can contain <code>'T'</code>
(total counts), <code>'X'</code> (guesstimate), and/or <code>'S'</code> (sampling). If some
counts are coded as <code>'S'</code>, precision column(s) must also be provided (see
below).
Default is <code>'stat_method'</code>.</p>
</td></tr>
<tr><td><code id="format_data_+3A_lower_ci">lower_ci</code></td>
<td>
<p>(optional) a <code>character</code> string. The column name in <code>data</code>
of the lower boundary of the 95% CI of the estimate (i.e. <code>count</code>). If
provided, the upper boundary of the 95% CI (argument <code>upper_ci</code>) must be
also provided. This argument is only required if some counts have been
estimated by a sampling method. But user may prefer use other precision
measures, e.g. standard deviation (argument <code>sd</code>), variance (argument
<code>var</code>), or coefficient of variation (argument <code>cv</code>).
Default is <code>'lower_ci'</code>.</p>
</td></tr>
<tr><td><code id="format_data_+3A_upper_ci">upper_ci</code></td>
<td>
<p>(optional) a <code>character</code> string. The column name in <code>data</code>
of the upper boundary of the 95% CI of the estimate (i.e. <code>count</code>). If
provided, the lower boundary of the 95% CI (argument <code>lower_ci</code>) must be
also provided.
Default is <code>'upper_ci'</code>.</p>
</td></tr>
<tr><td><code id="format_data_+3A_sd">sd</code></td>
<td>
<p>(optional) a <code>character</code> string. The column name in <code>data</code> of
the standard deviation of the estimate.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="format_data_+3A_var">var</code></td>
<td>
<p>(optional) a <code>character</code> string. The column name in <code>data</code> of
the variance of the estimate.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="format_data_+3A_cv">cv</code></td>
<td>
<p>(optional) a <code>character</code> string. The column name in <code>data</code> of
the coefficient of variation of the estimate.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="format_data_+3A_field_method">field_method</code></td>
<td>
<p>(optional) a <code>character</code> string. The column name in
<code>data</code> of the field method used to count individuals. Counts can be ground
counts (coded as <code>'G'</code>) or aerial counts (coded as <code>'A'</code>). This argument
is optional if individuals have been counted by the same method. See above
section <strong>Description</strong> for further information on the count conversion.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="format_data_+3A_pref_field_method">pref_field_method</code></td>
<td>
<p>(optional) a <code>character</code> string. The column name
in <code>data</code> of the preferred field method of the species. This argument is
only required is <code>field_method</code> is not <code>NULL</code> (i.e. individuals have been
counted by different methods). Alternatively, this value can be passed in
<code>info</code> (or internally retrieved if the species is listed in the package).
See above section <strong>Description</strong> for further information on the count
conversion.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="format_data_+3A_conversion_a2g">conversion_A2G</code></td>
<td>
<p>(optional) a <code>character</code> string. The column name
in <code>data</code> of the count conversion factor of the species. This argument is
only required if <code>field_method</code> is not <code>NULL</code> (i.e. individuals have been
counted by different methods). Alternatively this value can be passed in
<code>info</code> (or internally retrieved if the species is listed in the package).
See above section <strong>Description</strong> for further information on the count
conversion.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="format_data_+3A_rmax">rmax</code></td>
<td>
<p>(optional) a <code>character</code> string. The column name in <code>data</code> of
the species demographic potential (i.e. the relative rate of increase of
the population). This is the change in log population size between two
dates and will be used later by <code><a href="#topic+fit_trend">fit_trend()</a></code>.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="format_data_+3A_path">path</code></td>
<td>
<p>a <code>character</code> string. The directory to save formatted data.
This directory must exist and can be an absolute or a relative path.
Default is the current working directory.</p>
</td></tr>
<tr><td><code id="format_data_+3A_na_rm">na_rm</code></td>
<td>
<p>a <code>logical.</code> If <code>TRUE</code>, counts with <code>NA</code> values will be
removed.
Default is <code>FALSE</code> (returns an error to inform user if <code>NA</code> are detected).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An n-elements <code>list</code> (where <code>n</code> is the number of count series). The
name of each element of this list is a combination of location and
species. Each element of the list is a <code>list</code> with the following content:
</p>

<ul>
<li> <p><code>location</code> a <code>character</code> string. The name of the series site.
</p>
</li>
<li> <p><code>species</code> a <code>character</code> string. The name of the series species.
</p>
</li>
<li> <p><code>date</code> a <code>numerical</code> vector. The sequence of dates of the
series.
</p>
</li>
<li> <p><code>n_dates</code> an <code>integer.</code> The number of unique dates.
</p>
</li>
<li> <p><code>stat_methods</code> a <code>character</code> vector. The different stat methods
of the series.
</p>
</li>
<li> <p><code>field_methods</code> (optional) a <code>character</code> vector. The different
field methods of the series.
</p>
</li>
<li> <p><code>pref_field_method</code> (optional) a <code>character</code> string. The
preferred field method of the species (<code>'A'</code> or <code>'G'</code>).
</p>
</li>
<li> <p><code>conversion_A2G</code> (optional) a <code>numeric</code>. The conversion factor
of the species used to convert counts to its preferred field method.
</p>
</li>
<li> <p><code>rmax</code> a <code>numeric</code>. The maximum population growth rate of the
species.
</p>
</li>
<li> <p><code>data_original</code> a <code>data.frame</code>. Original data of the series
with renamed columns. Some rows may have been deleted
(if <code>na_rm = TRUE</code>).
</p>
</li>
<li> <p><code>data_converted</code> a <code>data.frame</code>. Data containing computed
boundaries of the 95% CI (<code>lower_ci_conv</code> and <code>upper_ci_conv</code>). If
counts have been obtained by different field methods, contains also
converted counts (<code>count_conv</code>) based on the preferred field method and
conversion factor of the species. This <code>data.frame</code> will be used by the
function <code><a href="#topic+fit_trend">fit_trend()</a></code> to fit population models.
</p>
</li></ul>

<p><strong>Note:</strong> Some original series can be discarded if one of these two
conditions is met: 1) the series contains only zero counts, and 2) the
series contains only a few dates (&lt; 4 dates).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Garamba raw dataset ----
file_path &lt;- system.file("extdata", "garamba_survey.csv", 
                         package = "popbayes")
                         
garamba &lt;- read.csv(file = file_path)

## Create temporary folder ----
temp_path &lt;- tempdir()

## Format dataset ----
garamba_formatted &lt;- popbayes::format_data(
  data              = garamba, 
  path              = temp_path,
  field_method      = "field_method",
  pref_field_method = "pref_field_method",
  conversion_A2G    = "conversion_A2G",
  rmax              = "rmax")

## Number of count series ----
length(garamba_formatted)

## Retrieve count series names ----
popbayes::list_series(path = temp_path)

## Print content of the first count series ----
names(garamba_formatted[[1]])

## Print original data ----
garamba_formatted[[1]]$"data_original"

## Print converted data ----
garamba_formatted[[1]]$"data_converted"
</code></pre>

<hr>
<h2 id='garamba'>African mammals survey in the Garamba National Park</h2><span id='topic+garamba'></span>

<h3>Description</h3>

<p>This dataset contains individual counts of 10 African mammal species
in the Garamba National Park (Democratic Republic of the Congo) from 1976 to
2017.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>garamba
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> with 141 rows (counts) and the following 8 variables:
</p>

<dl>
<dt>location</dt><dd><p>the location of the survey (Garamba)</p>
</dd>
<dt>species</dt><dd><p>the binomial name of the species</p>
</dd>
<dt>date</dt><dd><p>the date of the survey</p>
</dd>
<dt>stat_method</dt><dd><p>the method used to estimate individuals counts. One of
<code>T</code> (total counts), <code>G</code> (guesstimate), and <code>S</code>
(sampling counts)</p>
</dd>
<dt>field_method</dt><dd><p>the field method used to collect data. One of
<code>A</code> (aerial counts), and <code>G</code> (ground counts)</p>
</dd>
<dt>count</dt><dd><p>number of individuals</p>
</dd>
<dt>lower_ci</dt><dd><p>lower boundary of the 95% confidence interval of the counts
(only for sampling counts)</p>
</dd>
<dt>upper_ci</dt><dd><p>upper boundary of the 95% confidence interval of the counts
(only for sampling counts)</p>
</dd>
<dt>pref_field_method</dt><dd><p>the preferred field method of the species. One of
<code>A</code> for Aerial counts, and <code>G</code> for Ground counts</p>
</dd>
<dt>conversion_A2G</dt><dd><p>the conversion multiplicative factor (corresponding
to the detectability category) used to convert aerial to ground counts</p>
</dd>
<dt>rmax</dt><dd><p>the maximum population growth rate</p>
</dd>
</dl>



<h3>References</h3>

<p>Hillman Smith K &amp; Kalpers J (2015) <em>Garamba Conservation in Peace &amp; War</em>.
Hillman Smith publisher, 448pp. ISBN: 9789966185105.<br />
Monico M (2014)
<em>Aerial Survey Report March 2014 - Garamba National Park, DRC</em>.
African Parks Network/ICCN/Pan-African Elephant Aerial Survey, 42pp.<br />
Spies K <em>et al.</em> (2017)
<em>Aerial Survey Report April 2017 - Garamba National Park, DRC</em>.
African Parks Network/EU/ICCN. 38pp.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("garamba")
head(garamba, 30)
</code></pre>

<hr>
<h2 id='list_series'>Retrieve the count series names</h2><span id='topic+list_series'></span>

<h3>Description</h3>

<p>This function retrieves the count series names generated by
the function <code><a href="#topic+format_data">format_data()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_series(path = ".")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="list_series_+3A_path">path</code></td>
<td>
<p>a <code>character</code> string. The directory in which count series have
been saved by the function <code><a href="#topic+format_data">format_data()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of count series names (<code>character</code> strings).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Garamba raw dataset ----
file_path &lt;- system.file("extdata", "garamba_survey.csv", 
                         package = "popbayes")
                         
garamba &lt;- read.csv(file = file_path)

## Create temporary folder ----
temp_path &lt;- tempdir()

## Format dataset ----
garamba_formatted &lt;- popbayes::format_data(
  data              = garamba, 
  path              = temp_path,
  field_method      = "field_method",
  pref_field_method = "pref_field_method",
  conversion_A2G    = "conversion_A2G",
  rmax              = "rmax")

## Retrieve count series names ----
popbayes::list_series(path = temp_path)
</code></pre>

<hr>
<h2 id='plot_series'>Plot original vs converted counts</h2><span id='topic+plot_series'></span>

<h3>Description</h3>

<p>This function plots a panel of two graphics for one count series
(previously generated by <code><a href="#topic+format_data">format_data()</a></code>):
</p>

<ul>
<li><p> on the left side, scatter plot overlapping original (black points) and
converted counts (grey points);
</p>
</li>
<li><p> on the right side, scatter plot of converted counts with boundaries of the
95% confident interval.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>plot_series(series, title = TRUE, path = ".", path_fig = ".", save = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_series_+3A_series">series</code></td>
<td>
<p>a <code>character</code> string. The count series names (can be
retrieved by running <code><a href="#topic+list_series">list_series()</a></code>).</p>
</td></tr>
<tr><td><code id="plot_series_+3A_title">title</code></td>
<td>
<p>a <code>logical</code>. If <code>TRUE</code> (default) a title (series name) is
added.</p>
</td></tr>
<tr><td><code id="plot_series_+3A_path">path</code></td>
<td>
<p>a <code>character</code> string. The directory in which count series have
been saved by the function <code><a href="#topic+format_data">format_data()</a></code>.</p>
</td></tr>
<tr><td><code id="plot_series_+3A_path_fig">path_fig</code></td>
<td>
<p>a <code>character</code> string. The directory where to save the plot
(if <code>save = TRUE</code>). This directory must exist and can be an absolute or a
relative path.</p>
</td></tr>
<tr><td><code id="plot_series_+3A_save">save</code></td>
<td>
<p>a <code>logical</code>. If <code>TRUE</code> (default is <code>FALSE</code>) the plot is saved in
<code>path_fig</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Garamba raw dataset ----
file_path &lt;- system.file("extdata", "garamba_survey.csv", 
                         package = "popbayes")
                         
garamba &lt;- read.csv(file = file_path)

## Create temporary folder ----
temp_path &lt;- tempdir()

## Format dataset ----
garamba_formatted &lt;- popbayes::format_data(
  data              = garamba, 
  path              = temp_path,
  field_method      = "field_method",
  pref_field_method = "pref_field_method",
  conversion_A2G    = "conversion_A2G",
  rmax              = "rmax")

## Get series names ----
popbayes::list_series(path = temp_path)

## Plot for Alcelaphus buselaphus at Garamba ----
popbayes::plot_series("garamba__alcelaphus_buselaphus", path = temp_path)
</code></pre>

<hr>
<h2 id='plot_trend'>Plot estimated population trend</h2><span id='topic+plot_trend'></span>

<h3>Description</h3>

<p>This function plots a panel of two graphics for one BUGS model
(previously generated by <code><a href="#topic+fit_trend">fit_trend()</a></code>):
</p>

<ul>
<li><p> on the left side, the population trend estimated by the Bayesian model
(blue line) with the 95% CI (gray envelop). Dots (with intervals)
represent converted counts passed to the model (with the 95% CI);
</p>
</li>
<li><p> on the right side, a bar plot of estimated relative growth rates (r) by
date. Dark bars are real estimated r.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>plot_trend(series, title = TRUE, path = ".", path_fig = ".", save = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_trend_+3A_series">series</code></td>
<td>
<p>a <code>character</code> string. The count series name (can be
retrieved by running <code><a href="#topic+list_series">list_series()</a></code>).</p>
</td></tr>
<tr><td><code id="plot_trend_+3A_title">title</code></td>
<td>
<p>a <code>logical</code>. If <code>TRUE</code> (default) a title (series name) is
added.</p>
</td></tr>
<tr><td><code id="plot_trend_+3A_path">path</code></td>
<td>
<p>a <code>character</code> string. The directory in which count series (and
BUGS outputs) have been saved by the function <code><a href="#topic+format_data">format_data()</a></code> (and by
<code><a href="#topic+fit_trend">fit_trend()</a></code>).</p>
</td></tr>
<tr><td><code id="plot_trend_+3A_path_fig">path_fig</code></td>
<td>
<p>a <code>character</code> string. The directory where to save the plot
(if <code>save = TRUE</code>). This directory must exist and can be an absolute or a
relative path.</p>
</td></tr>
<tr><td><code id="plot_trend_+3A_save">save</code></td>
<td>
<p>a <code>logical</code>. If <code>TRUE</code> (default is <code>FALSE</code>) the plot is saved in
<code>path_fig</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Garamba raw dataset ----
file_path &lt;- system.file("extdata", "garamba_survey.csv", 
                         package = "popbayes")
                         
garamba &lt;- read.csv(file = file_path)

## Create temporary folder ----
temp_path &lt;- tempdir()

## Format dataset ----
garamba_formatted &lt;- popbayes::format_data(
  data              = garamba, 
  path              = temp_path,
  field_method      = "field_method",
  pref_field_method = "pref_field_method",
  conversion_A2G    = "conversion_A2G",
  rmax              = "rmax")

## Select one serie ----
a_buselaphus &lt;- popbayes::filter_series(garamba_formatted, 
                                        location = "Garamba",
                                        species  = "Alcelaphus buselaphus")

## Fit population trends (requires JAGS) ----
a_buselaphus_mod &lt;- popbayes::fit_trend(a_buselaphus, path = temp_path)

## Plot estimated population trend ----
popbayes::plot_trend(series = "garamba__alcelaphus_buselaphus", 
                     path   = temp_path)

</code></pre>

<hr>
<h2 id='popbayes-package'>popbayes: Bayesian Model to Estimate Population Trends from Counts Series</h2><span id='topic+popbayes'></span><span id='topic+popbayes-package'></span>

<h3>Description</h3>

<p>Infers the trends of one or several animal populations over time from series of counts. It does so by accounting for count precision (provided or inferred based on expert knowledge, e.g. guesstimates), smoothing the population rate of increase over time, and accounting for the maximum demographic potential of species. Inference is carried out in a Bayesian framework. This work is part of the FRB-CESAB working group AfroBioDrivers <a href="https://www.fondationbiodiversite.fr/en/the-frb-in-action/programs-and-projects/le-cesab/afrobiodrivers/">https://www.fondationbiodiversite.fr/en/the-frb-in-action/programs-and-projects/le-cesab/afrobiodrivers/</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Nicolas Casajus <a href="mailto:nicolas.casajus@fondationbiodiversite.fr">nicolas.casajus@fondationbiodiversite.fr</a> (<a href="https://orcid.org/0000-0002-5537-5294">ORCID</a>) [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Roger Pradel <a href="mailto:roger.pradel@cefe.cnrs.fr">roger.pradel@cefe.cnrs.fr</a> (<a href="https://orcid.org/0000-0002-2684-9251">ORCID</a>)
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://frbcesab.github.io/popbayes/">https://frbcesab.github.io/popbayes/</a>
</p>
</li>
<li> <p><a href="https://github.com/frbcesab/popbayes">https://github.com/frbcesab/popbayes</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/frbcesab/popbayes/issues">https://github.com/frbcesab/popbayes/issues</a>
</p>
</li></ul>


<hr>
<h2 id='read_bugs'>Import a list of BUGS outputs previously exported</h2><span id='topic+read_bugs'></span>

<h3>Description</h3>

<p>This function imports a list of BUGS outputs previously exported by
<code><a href="#topic+fit_trend">fit_trend()</a></code>. Users can import one, several, or all models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_bugs(series = NULL, path = ".")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_bugs_+3A_series">series</code></td>
<td>
<p>a vector of <code>character</code> strings. One or several count series
names. If <code>NULL</code> (default) BUGS outputs for all count series will be
imported. Users can run <code><a href="#topic+list_series">list_series()</a></code> to get the correct spelling of
count series names.</p>
</td></tr>
<tr><td><code id="read_bugs_+3A_path">path</code></td>
<td>
<p>a <code>character</code> string. The directory in which BUGS outputs have
been saved by the function <code><a href="#topic+fit_trend">fit_trend()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An n-element <code>list</code> (where <code>n</code> is the number of count series). See
<code><a href="#topic+fit_trend">fit_trend()</a></code> for further information.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Garamba raw dataset ----
file_path &lt;- system.file("extdata", "garamba_survey.csv", 
                         package = "popbayes")
                         
garamba &lt;- read.csv(file = file_path)

## Create temporary folder ----
temp_path &lt;- tempdir()

## Format dataset ----
garamba_formatted &lt;- popbayes::format_data(
  data              = garamba, 
  path              = temp_path,
  field_method      = "field_method",
  pref_field_method = "pref_field_method",
  conversion_A2G    = "conversion_A2G",
  rmax              = "rmax")

## Select one serie ----
a_buselaphus &lt;- popbayes::filter_series(garamba_formatted, 
                                        location = "Garamba",
                                        species  = "Alcelaphus buselaphus")

## Fit population trends (requires JAGS) ----
a_buselaphus_mod &lt;- popbayes::fit_trend(a_buselaphus, path = temp_path)

## Import BUGS outputs for one count series ----
popbayes::read_bugs(series = "garamba__alcelaphus_buselaphus", 
                    path   = temp_path)

## Import BUGS outputs for all count series ----
popbayes::read_bugs(path = temp_path)

</code></pre>

<hr>
<h2 id='read_series'>Import a list of count series previously exported</h2><span id='topic+read_series'></span>

<h3>Description</h3>

<p>This function imports a list of count series data previously exported by
<code><a href="#topic+format_data">format_data()</a></code>. Users can import one, several, or all count series data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_series(series = NULL, path = ".")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_series_+3A_series">series</code></td>
<td>
<p>a vector of <code>character</code> strings. One or several count series
names to be imported. If <code>NULL</code> (default), all available count series
will be imported.</p>
</td></tr>
<tr><td><code id="read_series_+3A_path">path</code></td>
<td>
<p>a <code>character</code> string. The directory in which count series have
been saved by the function <code><a href="#topic+format_data">format_data()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An n-element <code>list</code> (where <code>n</code> is the number of count series). See
<code><a href="#topic+format_data">format_data()</a></code> for further information.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Garamba raw dataset ----
file_path &lt;- system.file("extdata", "garamba_survey.csv", 
                         package = "popbayes")
                         
garamba &lt;- read.csv(file = file_path)

## Create temporary folder ----
temp_path &lt;- tempdir()

## Format dataset ----
garamba_formatted &lt;- popbayes::format_data(
  data              = garamba, 
  path              = temp_path,
  field_method      = "field_method",
  pref_field_method = "pref_field_method",
  conversion_A2G    = "conversion_A2G",
  rmax              = "rmax")

## Import all count series ----
count_series &lt;- popbayes::read_series(path = temp_path)

## Import one count series ----
a_bus &lt;- popbayes::read_series(series = "garamba__alcelaphus_buselaphus",
                               path   = temp_path)
</code></pre>

<hr>
<h2 id='series_to_df'>Extract original/converted count series data from a list</h2><span id='topic+series_to_df'></span>

<h3>Description</h3>

<p>From the output of the function <code><a href="#topic+format_data">format_data()</a></code> (or <code><a href="#topic+filter_series">filter_series()</a></code>), this
function extracts <code>data.frame</code> containing converted counts
(<code>converted = TRUE</code>) or original counts (<code>converted = FALSE</code>) for one,
several, or all count series.
</p>
<p>The resulting <code>data.frame</code> has no particular use in <code>popbayes</code> but it can be
useful for users.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>series_to_df(data, converted = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="series_to_df_+3A_data">data</code></td>
<td>
<p>a named <code>list</code>. The output of <code><a href="#topic+format_data">format_data()</a></code> or
<code><a href="#topic+filter_series">filter_series()</a></code>.</p>
</td></tr>
<tr><td><code id="series_to_df_+3A_converted">converted</code></td>
<td>
<p>a <code>logical</code>. If <code>TRUE</code> (default) extracts converted counts,
otherwise returns original counts.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Garamba raw dataset ----
file_path &lt;- system.file("extdata", "garamba_survey.csv", 
                         package = "popbayes")
                         
garamba &lt;- read.csv(file = file_path)

## Create temporary folder ----
temp_path &lt;- tempdir()

## Format dataset ----
garamba_formatted &lt;- popbayes::format_data(
  data              = garamba, 
  path              = temp_path,
  field_method      = "field_method",
  pref_field_method = "pref_field_method",
  conversion_A2G    = "conversion_A2G",
  rmax              = "rmax")

## Extract converted count data ----
converted_data &lt;- popbayes::series_to_df(garamba_formatted, 
                                         converted = TRUE)

## Extract original count data ----
original_data &lt;- popbayes::series_to_df(garamba_formatted, 
                                        converted = FALSE)

dim(converted_data)
dim(original_data)
dim(garamba)
</code></pre>

<hr>
<h2 id='species_info'>Species information dataset</h2><span id='topic+species_info'></span>

<h3>Description</h3>

<p>This dataset contains information about 15 African mammal species.
It can be used in the function <code>format_data()</code> to convert individual counts
estimated from a field method to a preferred field method. The field method
can be <code>A</code> (aerial counts) or <code>G</code> (ground counts). See <code><a href="#topic+format_data">format_data()</a></code> for
further information. It also contains the maximum population growth rate
(i.e. the maximum change in log population size).
</p>
<p>User can take this dataset as a template to add information for missing
species. Note that only <code>species</code>, <code>pref_field_method</code>, <code>conversion_A2G</code>,
and <code>rmax</code> are required.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>species_info
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> with 15 rows (African mammals species) and the
following variables:
</p>

<dl>
<dt>order</dt><dd><p>the order of the species</p>
</dd>
<dt>family</dt><dd><p>the family of the species</p>
</dd>
<dt>species</dt><dd><p>the species binomial name</p>
</dd>
<dt>english</dt><dd><p>the species English name</p>
</dd>
<dt>french</dt><dd><p>the species French name</p>
</dd>
<dt>category</dt><dd><p>the detectability category of the species. One of
<code>MLB</code> for Medium-sized Light and Brown species (20-150kg),
<code>LLB</code> for Large Light and Brown species (&gt;150kg),
<code>LD</code> for Large Dark (&gt;150kg), <code>Elephant</code>, and <code>Giraffe</code></p>
</dd>
<dt>pref_field_method</dt><dd><p>the preferred field method of the species. One of
<code>A</code> for Aerial counts, and <code>G</code> for Ground counts</p>
</dd>
<dt>conversion_A2G</dt><dd><p>the conversion multiplicative factor (corresponding
to the detectability category) used to convert aerial to ground counts</p>
</dd>
<dt>rmax</dt><dd><p>the maximum population growth rate</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data("species_info")
species_info
</code></pre>

<hr>
<h2 id='w_to_rmax'>Compute rmax from adult female body mass</h2><span id='topic+w_to_rmax'></span>

<h3>Description</h3>

<p>The demographic potential of a species is limited. The intrinsic rate of
increase <code>rmax</code> is the maximum increase in log population size that a
species can attain in a year. According to Sinclair (2003), it is related
to the body mass of adult females by: <code class="reqn">1.375 \times W^{-0.315}</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>w_to_rmax(w)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="w_to_rmax_+3A_w">w</code></td>
<td>
<p>a numerical vector. Adult female body mass (in kg).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numerical vector of <code>rmax</code> values.
</p>


<h3>References</h3>

<p>Sinclair (2013) Mammal population regulation, keystone processes and
ecosystem dynamics. <em>Philosophical Transactions: Biological Sciences</em>,
<strong>358</strong>, 1729-1740.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Set adult female body mass ----
body_masses &lt;- c(55, 127)

## Add species names ----
names(body_masses) &lt;- c("Impala", "Tiang")

## Compute species rmax ----
w_to_rmax(body_masses)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
