<!DOCTYPE html><html lang="en"><head><title>Help for package awdb</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {awdb}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#awdb'><p>Query the USDA AWDB REST API</p></a></li>
<li><a href='#awdb_options'><p>Build List of Additional Query Parameters</p></a></li>
<li><a href='#datasets'><p>Datasets</p></a></li>
<li><a href='#get_elements'><p>Get Station Elements</p></a></li>
<li><a href='#get_forecasts'><p>Get Station Forecasts</p></a></li>
<li><a href='#get_references'><p>Get Data Dictionary</p></a></li>
<li><a href='#get_stations'><p>Get Station Metadata</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Query the USDA NWCC Air and Water Database REST API</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Query the four endpoints of the 'Air and Water Database (AWDB) REST
    API' maintained by the National Water and Climate Center (NWCC) at the 
    United States Department of Agriculture (USDA). Endpoints include data, 
    forecast, reference-data, and metadata. The package is extremely light 
    weight, with 'Rust' via 'extendr' doing most of the heavy lifting to 
    deserialize and flatten deeply nested 'JSON' responses. The AWDB can be 
    found at <a href="https://wcc.sc.egov.usda.gov/awdbRestApi/swagger-ui/index.html">https://wcc.sc.egov.usda.gov/awdbRestApi/swagger-ui/index.html</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2.9000</td>
</tr>
<tr>
<td>Config/rextendr/version:</td>
<td>0.3.1.9001</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>Cargo (Rust's package manager), rustc</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, httr2, rlang (&ge; 1.1.0), sf</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/kbvernon/awdb">https://github.com/kbvernon/awdb</a>, <a href="https://kbvernon.github.io/awdb/">https://kbvernon.github.io/awdb/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/kbvernon/awdb/issues">https://github.com/kbvernon/awdb/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-25 20:36:00 UTC; kenne</td>
</tr>
<tr>
<td>Author:</td>
<td>Kenneth Blake Vernon
    <a href="https://orcid.org/0000-0003-0098-5092"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre,
    cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kenneth Blake Vernon &lt;kenneth.b.vernon@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-26 15:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='awdb'>Query the USDA AWDB REST API</h2><span id='topic+awdb-package'></span><span id='topic+awdb'></span>

<h3>Description</h3>

<p>The awdb package implements functions to interface with the AWDB REST API
from R.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Kenneth Blake Vernon <a href="mailto:kenneth.b.vernon@gmail.com">kenneth.b.vernon@gmail.com</a> (<a href="https://orcid.org/0000-0003-0098-5092">ORCID</a>) [copyright holder]
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/kbvernon/awdb">https://github.com/kbvernon/awdb</a>
</p>
</li>
<li> <p><a href="https://kbvernon.github.io/awdb/">https://kbvernon.github.io/awdb/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/kbvernon/awdb/issues">https://github.com/kbvernon/awdb/issues</a>
</p>
</li></ul>


<hr>
<h2 id='awdb_options'>Build List of Additional Query Parameters</h2><span id='topic+awdb_options'></span><span id='topic+set_options'></span><span id='topic+print.awdb_options'></span>

<h3>Description</h3>

<p>This is a helper function to make it easier to handle additional query
parameters. Provides defaults for each and does type checking.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_options(
  networks = "*",
  duration = "daily",
  begin_date = NULL,
  end_date = NULL,
  period_reference = "end",
  central_tendency = NULL,
  return_flags = FALSE,
  return_original_values = FALSE,
  return_suspect_values = FALSE,
  begin_publication_date = NULL,
  end_publication_date = NULL,
  exceedence_probabilities = NULL,
  forecast_periods = NULL,
  station_names = NULL,
  dco_codes = NULL,
  county_names = NULL,
  hucs = NULL,
  return_forecast_metadata = FALSE,
  return_reservoir_metadata = FALSE,
  return_element_metadata = FALSE,
  active_only = TRUE,
  request_size = 10L
)

## S3 method for class 'awdb_options'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="awdb_options_+3A_networks">networks</code></td>
<td>
<p>character vector, abbreviations or codes for station networks
of interest (e.g., &quot;USGS&quot; refers to all USGS soil monitoring stations).
Default is <code>*</code>, for &quot;all networks&quot;. See Details for available networks and
codes.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_duration">duration</code></td>
<td>
<p>character scalar, the temporal resolution of the element
measurements. Available values include <code>daily</code> (default), <code>hourly</code>,
<code>semimonthly</code>, <code>monthly</code>, <code>calendar_year</code>, and <code>water_year</code>.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_begin_date">begin_date</code></td>
<td>
<p>character scalar, start date for time period of interest.
Date must be in format <code>"YYYY-MM-DD"</code>.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_end_date">end_date</code></td>
<td>
<p>character scalar, end date for time period of interest. Date
must be in format <code>"YYYY-MM-DD"</code>.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_period_reference">period_reference</code></td>
<td>
<p>character scalar, reporting convention to use when
returning instantaneous data. Default is <code>"end"</code>.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_central_tendency">central_tendency</code></td>
<td>
<p>character scalar, the central tendency to return for
each element value. Available options include <code>NULL</code> (default, no central
tendency returned), <code>median</code> and <code>average</code>.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_return_flags">return_flags</code></td>
<td>
<p>boolean scalar, whether to return flags with each element
value. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_return_original_values">return_original_values</code></td>
<td>
<p>boolean scalar, whether to return original
element values. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_return_suspect_values">return_suspect_values</code></td>
<td>
<p>boolean scalar, whether to return suspect element
values. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_begin_publication_date">begin_publication_date</code></td>
<td>
<p>character scalar, the beginning of the
publication period for which to retrieve data. Date must be in format
<code>YYYY-MM-DD</code>. If <code>NULL</code>, assumes start of the current water year.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_end_publication_date">end_publication_date</code></td>
<td>
<p>character scalar, the end of the publication
period for which to retrieve data. Date must be in format <code>YYYY-MM-DD</code>. If
<code>NULL</code>, assumes current day.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_exceedence_probabilities">exceedence_probabilities</code></td>
<td>
<p>integer vector, the probability that
streamflow will exceed a specified level.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_forecast_periods">forecast_periods</code></td>
<td>
<p>character vector, the time period over which to make
streamflow forecasts.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_station_names">station_names</code></td>
<td>
<p>character vector, used to subset stations by their
names. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_dco_codes">dco_codes</code></td>
<td>
<p>character vector, used to subset stations to those that fall
in specified DCOs. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_county_names">county_names</code></td>
<td>
<p>character vector, used to subset stations to those that
fall in specified counties. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_hucs">hucs</code></td>
<td>
<p>integer vector, used to subset stations to those that fall in
specified hydrologic units. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_return_forecast_metadata">return_forecast_metadata</code></td>
<td>
<p>boolean scalar, whether to return forecast
metadata with station locations. Will be included as a list column. Default
is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_return_reservoir_metadata">return_reservoir_metadata</code></td>
<td>
<p>boolean scalar, whether to return reservoir
metadata with station locations. Will be included as a list column. Default
is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_return_element_metadata">return_element_metadata</code></td>
<td>
<p>boolean scalar, whether to return element
metadata with station locations. Will be included as a list column. Default
is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_active_only">active_only</code></td>
<td>
<p>boolean scalar, whether to include only active stations.
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_request_size">request_size</code></td>
<td>
<p>integer scalar, number of individual stations to include
in each query. This helps to meet rate limits imposed by the API. If you are
getting a request error, you might try lowering this number. Default is
<code>10L</code>.</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_x">x</code></td>
<td>
<p>an <code>awdb_options</code> list</p>
</td></tr>
<tr><td><code id="awdb_options_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an <code>awdb_options</code> list
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_options()

</code></pre>

<hr>
<h2 id='datasets'>Datasets</h2><span id='topic+datasets'></span><span id='topic+bear_lake'></span><span id='topic+cascades'></span>

<h3>Description</h3>

<p>Arbitrary bounding boxes drawn around potential areas of interest.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bear_lake

cascades
</code></pre>


<h3>Format</h3>

<p>An object of class <code>sfc_POLYGON</code> (inherits from <code>sfc</code>) of length 1.
</p>


<h3>Details</h3>

<p>Areas of interest include:
</p>

<ul>
<li><p> Bear Lake along the border between Utah and Idaho. See
<a href="https://maps.app.goo.gl/bDBFyFhNgYbfvwuw8">location on Google Maps</a>.
</p>
</li>
<li><p> Cascades in west central Oregon. See
<a href="https://maps.app.goo.gl/sBtTHaN8SeM6xJWv7">location on Google Maps</a>.
</p>
</li></ul>



<h3>Source</h3>

<p>Coordinates digitized manually.
</p>

<hr>
<h2 id='get_elements'>Get Station Elements</h2><span id='topic+get_elements'></span>

<h3>Description</h3>

<p>Get station elements from the  USDA National Water and Climate Center Air and
Water Database REST API. Elements are soil, snow, stream, and weather
variables measured at AWDB stations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_elements(aoi = NULL, elements, awdb_options = set_options(), as_sf = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_elements_+3A_aoi">aoi</code></td>
<td>
<p><code>sfc</code> POLYGON scalar, the area of interest used for performing
a spatial filter on available stations in <code>network</code>. If <code>NULL</code> (the default),
no spatial filter is performed.</p>
</td></tr>
<tr><td><code id="get_elements_+3A_elements">elements</code></td>
<td>
<p>character vector, abbreviations or codes for variables of
interest (e.g., &quot;SMS&quot; for &quot;Soil Moisture Percent&quot;). See Details for available
elements and codes.</p>
</td></tr>
<tr><td><code id="get_elements_+3A_awdb_options">awdb_options</code></td>
<td>
<p>an <code>awdb_options</code> list with additional query parameters.</p>
</td></tr>
<tr><td><code id="get_elements_+3A_as_sf">as_sf</code></td>
<td>
<p>boolean scalar, whether to return the data as an <code>sf</code> table.
Default is <code>FALSE</code>. Repeating the spatial data across each station element
and its time series can be costly.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This endpoint will accept the following query parameters via <code>set_options()</code>:
</p>

<ul>
<li> <p><code>duration</code>
</p>
</li>
<li> <p><code>begin_date</code>
</p>
</li>
<li> <p><code>end_date</code>
</p>
</li>
<li> <p><code>period_reference</code>
</p>
</li>
<li> <p><code>central_tendency</code>
</p>
</li>
<li> <p><code>return_flags</code>
</p>
</li>
<li> <p><code>return_original_values</code>
</p>
</li>
<li> <p><code>return_suspect_values</code>
</p>
</li></ul>

<p>The following can also be passed to filter stations:
</p>

<ul>
<li> <p><code>station_names</code>
</p>
</li>
<li> <p><code>dco_codes</code>
</p>
</li>
<li> <p><code>county_names</code>
</p>
</li>
<li> <p><code>hucs</code>
</p>
</li>
<li> <p><code>active_only</code>
</p>
</li></ul>

<p>You may also specify <code>networks</code> and <code>request_size</code>. The <code>networks</code> parameter
is used internally to build unique station triplet identifiers of the form
<code>station:state:network</code> which are then passed to the endpoint, so it serves
to filter stations to just those networks. The <code>request_size</code> parameter is
for handling rate limits, which are based on the number of elements - a hard
value to measure directly, so this parameter is more a rule of thumb than a
strict standard. If processing is slow for you, you may find experimenting
with this parameter useful.
</p>
<p>See <code>set_options()</code> for more details.
</p>


<h4>Element Format</h4>

<p>Elements are specified as triplets of the form
<code>elementCode:heightDepth:ordinal</code>. Any part of the element triplet can
contain the <code>*</code> wildcard character. Both <code>heightDepth</code> and <code>ordinal</code> are
optional. The unit of <code>heightDepth</code> is inches. If <code>ordinal</code> is not specified,
it is assumed to be 1. Here are some examples:
</p>

<ul>
<li> <p><code>"WTEQ"</code> - return all snow water equivalent values.
</p>
</li>
<li> <p><code>"SMS:-8"</code> - return soil moisture values observed 8 inches below the surface.
</p>
</li>
<li> <p><code>"SMS:*"</code> - return soil moisture values for all measured depths.
</p>
</li></ul>




<h3>Value</h3>

<p>if <code>as_sf</code>, an <code>sf</code> table, otherwise a simple data.frame. The number
of rows depends on the number of stations and element parameters. Time series
data are included as a list column named <code>"element_values"</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># get snow water equivalent values around Bear Lake
get_elements(bear_lake, elements = "WTEQ")

# return as sf table
get_elements(bear_lake, elements = "WTEQ", as_sf = TRUE)

</code></pre>

<hr>
<h2 id='get_forecasts'>Get Station Forecasts</h2><span id='topic+get_forecasts'></span>

<h3>Description</h3>

<p>Get station forecasts from the USDA National Water and Climate Center Air and
Water Database REST API. These will almost always be streamflow forecasts,
set with <code>elements = "SRVO"</code>, but some others are also available, albeit with
extremely limited spatial representation (see Details).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_forecasts(
  aoi = NULL,
  elements,
  awdb_options = set_options(),
  as_sf = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_forecasts_+3A_aoi">aoi</code></td>
<td>
<p><code>sfc</code> POLYGON scalar, the area of interest used for performing
a spatial filter on available stations in <code>network</code>. If <code>NULL</code> (the default),
no spatial filter is performed.</p>
</td></tr>
<tr><td><code id="get_forecasts_+3A_elements">elements</code></td>
<td>
<p>character vector, abbreviations or codes for variables of
interest (e.g., &quot;SMS&quot; for &quot;Soil Moisture Percent&quot;). See Details for available
elements and codes.</p>
</td></tr>
<tr><td><code id="get_forecasts_+3A_awdb_options">awdb_options</code></td>
<td>
<p>an <code>awdb_options</code> list with additional query parameters.</p>
</td></tr>
<tr><td><code id="get_forecasts_+3A_as_sf">as_sf</code></td>
<td>
<p>boolean scalar, whether to return the data as an <code>sf</code> table.
Default is <code>FALSE</code>. Repeating the spatial data across each station element
and its time series can be costly.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This endpoint will accept the following query parameters via <code>set_options()</code>:
</p>

<ul>
<li> <p><code>begin_publication_date</code>
</p>
</li>
<li> <p><code>end_publication_date</code>
</p>
</li>
<li> <p><code>exceedence_probabilities</code>
</p>
</li>
<li> <p><code>forecast_periods</code>
</p>
</li></ul>

<p>The following can also be passed to filter stations:
</p>

<ul>
<li> <p><code>station_names</code>
</p>
</li>
<li> <p><code>dco_codes</code>
</p>
</li>
<li> <p><code>county_names</code>
</p>
</li>
<li> <p><code>hucs</code>
</p>
</li>
<li> <p><code>active_only</code>
</p>
</li></ul>

<p>You may also specify <code>networks</code> and <code>request_size</code>. The <code>networks</code> parameter
is used internally to build unique station triplet identifiers of the form
<code>station:state:network</code> which are then passed to the endpoint, so it serves
to filter stations to just those networks. The <code>request_size</code> parameter is
for handling rate limits, which are based on the number of elements - a hard
value to measure directly, so this parameter is more a rule of thumb than a
strict standard. If processing is slow for you, you may find experimenting
with this parameter useful.
</p>
<p>Note that the <code>duration</code> parameter is ignored - or, more precisely, it is set
to <code>NULL</code>.
</p>
<p>See <code>set_options()</code> for more details.
</p>


<h4>Element Format</h4>

<p>Elements are specified as triplets of the form
<code>elementCode:heightDepth:ordinal</code>. Any part of the element triplet can
contain the <code>*</code> wildcard character. Both <code>heightDepth</code> and <code>ordinal</code> are
optional. The unit of <code>heightDepth</code> is inches. If <code>ordinal</code> is not specified,
it is assumed to be 1. Here are some examples:
</p>

<ul>
<li> <p><code>"WTEQ"</code> - return all snow water equivalent values.
</p>
</li>
<li> <p><code>"SMS:-8"</code> - return soil moisture values observed 8 inches below the surface.
</p>
</li>
<li> <p><code>"SMS:*"</code> - return soil moisture values for all measured depths.
</p>
</li></ul>




<h4>Forecast Elements</h4>

<p>Almost all forecasts are reported in <code>SRVO</code>, the adjusted streamflow set
which accounts for upstream operations such as reservoir operations and
diversions. <code>JDAY</code>, <code>RESC</code>, and <code>REST</code> are mostly there to maintain
historical forecasts made at Lake Tahoe (the birthplace of the snow
survey). In general, it's recommended to use <code>SRVO</code>.
</p>



<h3>Value</h3>

<p>if <code>as_sf</code>, an <code>sf</code> table, otherwise a simple data.frame. The number
of rows depends on the number of stations and element parameters. Time series
data are included as a list column named <code>"forecast_values"</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># get streamflow forecasts
get_forecasts(cascades, elements = "SRVO")

# return as sf table
get_forecasts(cascades, elements = "SRVO", as_sf = TRUE)

</code></pre>

<hr>
<h2 id='get_references'>Get Data Dictionary</h2><span id='topic+get_references'></span>

<h3>Description</h3>

<p>Get references from the USDA National Water and Climate Center Air and Water
Database REST API. References provide descriptions of all codes used in the
AWDB.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_references(reference_type = "elements")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_references_+3A_reference_type">reference_type</code></td>
<td>
<p>character scalar, the name of the reference. Potential
values include <code>dcos</code>, <code>durations</code>, <code>elements</code> (default), <code>forecastPeriods</code>,
<code>functions</code>, <code>instruments</code>, <code>networks</code>, <code>physicalElements</code>, <code>states</code>, and
<code>units</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame with reference data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_references("elements")

</code></pre>

<hr>
<h2 id='get_stations'>Get Station Metadata</h2><span id='topic+get_stations'></span>

<h3>Description</h3>

<p>Get station metadata from the USDA National Water and Climate Center Air and
Water Database REST API. This includes their spatial coordinates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_stations(aoi = NULL, elements, awdb_options = set_options())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_stations_+3A_aoi">aoi</code></td>
<td>
<p><code>sfc</code> POLYGON scalar, the area of interest used for performing
a spatial filter on available stations in <code>network</code>. If <code>NULL</code> (the default),
no spatial filter is performed.</p>
</td></tr>
<tr><td><code id="get_stations_+3A_elements">elements</code></td>
<td>
<p>character vector, abbreviations or codes for variables of
interest (e.g., &quot;SMS&quot; for &quot;Soil Moisture Percent&quot;). See Details for available
elements and codes.</p>
</td></tr>
<tr><td><code id="get_stations_+3A_awdb_options">awdb_options</code></td>
<td>
<p>an <code>awdb_options</code> list with additional query parameters.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This endpoint will accept the following query parameters via <code>set_options()</code>:
</p>

<ul>
<li> <p><code>station_names</code>
</p>
</li>
<li> <p><code>dco_codes</code>
</p>
</li>
<li> <p><code>county_names</code>
</p>
</li>
<li> <p><code>hucs</code>
</p>
</li>
<li> <p><code>return_forecast_metadata</code>
</p>
</li>
<li> <p><code>return_reservoir_metadata</code>
</p>
</li>
<li> <p><code>return_element_metadata</code>
</p>
</li>
<li> <p><code>active_only</code>
</p>
</li></ul>

<p>You may also specify <code>networks</code>. The <code>networks</code> parameter is used internally
to build unique station triplet identifiers of the form
<code>station:state:network</code>, so it serves to filter stations to just those
networks.
</p>
<p>See <code>set_options()</code> for more details.
</p>


<h4>Element Format</h4>

<p>Elements are specified as triplets of the form
<code>elementCode:heightDepth:ordinal</code>. Any part of the element triplet can
contain the <code>*</code> wildcard character. Both <code>heightDepth</code> and <code>ordinal</code> are
optional. The unit of <code>heightDepth</code> is inches. If <code>ordinal</code> is not specified,
it is assumed to be 1. Here are some examples:
</p>

<ul>
<li> <p><code>"WTEQ"</code> - return all snow water equivalent values.
</p>
</li>
<li> <p><code>"SMS:-8"</code> - return soil moisture values observed 8 inches below the surface.
</p>
</li>
<li> <p><code>"SMS:*"</code> - return soil moisture values for all measured depths.
</p>
</li></ul>




<h3>Value</h3>

<p>an <code>sf</code> table with station metadata.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># get all stations in aoi
get_stations(
  bear_lake,
  elements = "*"
)

# get all stations in aoi that measure WTEQ
get_stations(
  bear_lake,
  elements = "WTEQ"
)

# get all stations in aoi that are part of SNTL network
get_stations(
  bear_lake,
  elements = "*",
  awdb_options = set_options(networks = "SNTL")
)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
