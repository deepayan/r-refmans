<!DOCTYPE html><html><head><title>Help for package thurstonianIRT</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {thurstonianIRT}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#thurstonianIRT-package'><p>The 'thurstonianIRT' package.</p></a></li>
<li><a href='#cor_matrix'><p>Set up Correlation Matrices</p></a></li>
<li><a href='#fit_TIRT_lavaan'><p>Fit Thurstonian IRT models in lavaan</p></a></li>
<li><a href='#fit_TIRT_mplus'><p>Fit Thurstonian IRT models in Mplus</p></a></li>
<li><a href='#fit_TIRT_stan'><p>Fit Thurstonian IRT models in Stan</p></a></li>
<li><a href='#gof.TIRTfit'><p>Extract corrected goodness of fit statistics</p></a></li>
<li><a href='#make_lavaan_code'><p>Generate lavaan code for Thurstonian IRT models</p></a></li>
<li><a href='#make_mplus_code'><p>Generate Mplus code for Thurstonian IRT models</p></a></li>
<li><a href='#make_sem_data'><p>Prepare data for Thurstonian IRT models fitted with</p>
lavaan or Mplus</a></li>
<li><a href='#make_stan_data'><p>Prepare data for Thurstonian IRT models fitted with Stan</p></a></li>
<li><a href='#make_TIRT_data'><p>Prepare data for Thurstonian IRT models</p></a></li>
<li><a href='#predict.TIRTfit'><p>Predict trait scores of Thurstonian IRT models</p></a></li>
<li><a href='#set_block'><p>Prepare blocks of items</p></a></li>
<li><a href='#set_blocks_from_df'><p>Prepare blocks of items from a data frame</p></a></li>
<li><a href='#sim_TIRT_data'><p>Simulate Thurstonian IRT data</p></a></li>
<li><a href='#triplets'><p>Triplets of Pairwise Comparisons</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Thurstonian IRT Models</td>
</tr>
<tr>
<td>Version:</td>
<td>0.12.4</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-12-19</td>
</tr>
<tr>
<td>Description:</td>
<td>Fit Thurstonian Item Response Theory (IRT) models in R. This 
  package supports fitting Thurstonian IRT models and its extensions using 
  'Stan', 'lavaan', or 'Mplus' for the model estimation. Functionality for 
  extracting results, making predictions, and simulating data is provided as 
  well. References: 
  Brown &amp; Maydeu-Olivares (2011) &lt;<a href="https://doi.org/10.1177%2F0013164410375112">doi:10.1177/0013164410375112</a>&gt;;
  B端rkner et al. (2019) &lt;<a href="https://doi.org/10.1177%2F0013164419832063">doi:10.1177/0013164419832063</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0), Rcpp (&ge; 0.12.16), methods</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr (&ge; 0.6.0), magrittr, mvtnorm, RcppParallel (&ge; 5.0.1),
rlang, rstan (&ge; 2.26.0), rstantools (&ge; 2.1.1), stats, tibble
(&ge; 1.3.1), tidyr, lavaan (&ge; 0.6-1), utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>MplusAutomation, knitr, testthat (&ge; 0.9.1), rmarkdown</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>BH (&ge; 1.66.0-1), Rcpp (&ge; 0.12.16), RcppEigen (&ge;
0.3.3.4.0), RcppParallel (&ge; 5.0.1), rstan (&ge; 2.26.0),
StanHeaders (&ge; 2.26.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>GNU make</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/paul-buerkner/thurstonianIRT">https://github.com/paul-buerkner/thurstonianIRT</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/paul-buerkner/thurstonianIRT/issues">https://github.com/paul-buerkner/thurstonianIRT/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Biarch:</td>
<td>true</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-19 13:51:12 UTC; paul.buerkner</td>
</tr>
<tr>
<td>Author:</td>
<td>Paul-Christian B端rkner [aut, cre],
  Angus Hughes [ctb],
  Trustees of Columbia University [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Paul-Christian B端rkner &lt;paul.buerkner@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-19 14:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='thurstonianIRT-package'>The 'thurstonianIRT' package.</h2><span id='topic+thurstonianIRT-package'></span><span id='topic+thurstonianIRT'></span>

<h3>Description</h3>

<p>This package fits Thurstonian Item Response Theory (IRT) models
using 'Stan', 'lavaan', or 'Mplus'. To bring your data into the right
format, use the <code><a href="#topic+make_TIRT_data">make_TIRT_data</a></code> function. Models can then be
fitted via <code><a href="#topic+fit_TIRT_stan">fit_TIRT_stan</a></code>, <code><a href="#topic+fit_TIRT_lavaan">fit_TIRT_lavaan</a></code>, or
<code><a href="#topic+fit_TIRT_mplus">fit_TIRT_mplus</a></code> depending on the desired model fitting engine.
Data from Thurstonian IRT models can be simulated via
<code><a href="#topic+sim_TIRT_data">sim_TIRT_data</a></code>.
</p>


<h3>References</h3>

<p>Brown, A., &amp; Maydeu-Olivares, A. (2011). Item response modeling of
forced-choice questionnaires. Educational and Psychological Measurement,
71(3), 460-502. doi:10.1177/0013164410375112
</p>
<p>B端rkner P. C., Schulte N., &amp; Holling H. (2019). On the Statistical and
Practical Limitations of Thurstonian IRT Models. Educational and
Psychological Measurement. doi:10.1177/0013164419832063
</p>

<hr>
<h2 id='cor_matrix'>Set up Correlation Matrices</h2><span id='topic+cor_matrix'></span>

<h3>Description</h3>

<p>Set up Correlation Matrices
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cor_matrix(cors, dim, dimnames = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cor_matrix_+3A_cors">cors</code></td>
<td>
<p>vector of unique correlations</p>
</td></tr>
<tr><td><code id="cor_matrix_+3A_dim">dim</code></td>
<td>
<p>Dimension of the correlation matrix</p>
</td></tr>
<tr><td><code id="cor_matrix_+3A_dimnames">dimnames</code></td>
<td>
<p>Optional dimnames of the correlation matrix</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A correlation <code>matrix</code> of dimension <code>dim</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cor_matrix(c(0.2, 0.3, 0.5), dim = 3)

</code></pre>

<hr>
<h2 id='fit_TIRT_lavaan'>Fit Thurstonian IRT models in lavaan</h2><span id='topic+fit_TIRT_lavaan'></span>

<h3>Description</h3>

<p>Fit Thurstonian IRT models in lavaan
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit_TIRT_lavaan(data, estimator = "ULSMV", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fit_TIRT_lavaan_+3A_data">data</code></td>
<td>
<p>An object of class <code>'TIRTdata'</code>. see
<code><a href="#topic+make_TIRT_data">make_TIRT_data</a></code> for documentation on how to create one.</p>
</td></tr>
<tr><td><code id="fit_TIRT_lavaan_+3A_estimator">estimator</code></td>
<td>
<p>Name of the estimator that should be used.
See <code><a href="lavaan.html#topic+lavOptions">lavOptions</a></code>.</p>
</td></tr>
<tr><td><code id="fit_TIRT_lavaan_+3A_...">...</code></td>
<td>
<p>Further arguments passed to
<code><a href="lavaan.html#topic+lavaan">lavaan</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>'TIRTfit'</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load the data
data("triplets")

# define the blocks of items
blocks &lt;-
  set_block(c("i1", "i2", "i3"), traits = c("t1", "t2", "t3"),
          signs = c(1, 1, 1)) +
  set_block(c("i4", "i5", "i6"), traits = c("t1", "t2", "t3"),
            signs = c(-1, 1, 1)) +
  set_block(c("i7", "i8", "i9"), traits = c("t1", "t2", "t3"),
            signs = c(1, 1, -1)) +
  set_block(c("i10", "i11", "i12"), traits = c("t1", "t2", "t3"),
            signs = c(1, -1, 1))

# generate the data to be understood by 'thurstonianIRT'
triplets_long &lt;- make_TIRT_data(
  data = triplets, blocks = blocks, direction = "larger",
  format = "pairwise", family = "bernoulli", range = c(0, 1)
)


# fit the data using lavaan
fit &lt;- fit_TIRT_lavaan(triplets_long)
print(fit)
predict(fit)


</code></pre>

<hr>
<h2 id='fit_TIRT_mplus'>Fit Thurstonian IRT models in Mplus</h2><span id='topic+fit_TIRT_mplus'></span>

<h3>Description</h3>

<p>Fit Thurstonian IRT models in Mplus
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit_TIRT_mplus(data, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fit_TIRT_mplus_+3A_data">data</code></td>
<td>
<p>An object of class <code>'TIRTdata'</code>. see
<code><a href="#topic+make_TIRT_data">make_TIRT_data</a></code> for documentation on how to create one.</p>
</td></tr>
<tr><td><code id="fit_TIRT_mplus_+3A_...">...</code></td>
<td>
<p>Further arguments passed to
<code><a href="MplusAutomation.html#topic+mplusModeler">mplusModeler</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>'TIRTfit'</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load the data
data("triplets")

# define the blocks of items
blocks &lt;-
  set_block(c("i1", "i2", "i3"), traits = c("t1", "t2", "t3"),
          signs = c(1, 1, 1)) +
  set_block(c("i4", "i5", "i6"), traits = c("t1", "t2", "t3"),
            signs = c(-1, 1, 1)) +
  set_block(c("i7", "i8", "i9"), traits = c("t1", "t2", "t3"),
            signs = c(1, 1, -1)) +
  set_block(c("i10", "i11", "i12"), traits = c("t1", "t2", "t3"),
            signs = c(1, -1, 1))

# generate the data to be understood by 'thurstonianIRT'
triplets_long &lt;- make_TIRT_data(
  data = triplets, blocks = blocks, direction = "larger",
  format = "pairwise", family = "bernoulli", range = c(0, 1)
)

## Not run: 
# fit the data using Mplus
fit &lt;- fit_TIRT_mplus(triplets_long)
print(fit)
predict(fit)

## End(Not run)

</code></pre>

<hr>
<h2 id='fit_TIRT_stan'>Fit Thurstonian IRT models in Stan</h2><span id='topic+fit_TIRT_stan'></span>

<h3>Description</h3>

<p>Fit Thurstonian IRT models in Stan
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit_TIRT_stan(data, init = 0, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fit_TIRT_stan_+3A_data">data</code></td>
<td>
<p>An object of class <code>'TIRTdata'</code>. see
<code><a href="#topic+make_TIRT_data">make_TIRT_data</a></code> for documentation on how to create one.</p>
</td></tr>
<tr><td><code id="fit_TIRT_stan_+3A_init">init</code></td>
<td>
<p>Initial values of the parameters.
Defaults to <code>0</code> as it proved to be most stable.</p>
</td></tr>
<tr><td><code id="fit_TIRT_stan_+3A_...">...</code></td>
<td>
<p>Further arguments passed to
<code><a href="rstan.html#topic+sampling">rstan::sampling</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>'TIRTfit'</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load the data
data("triplets")

# define the blocks of items
blocks &lt;-
  set_block(c("i1", "i2", "i3"), traits = c("t1", "t2", "t3"),
          signs = c(1, 1, 1)) +
  set_block(c("i4", "i5", "i6"), traits = c("t1", "t2", "t3"),
            signs = c(-1, 1, 1)) +
  set_block(c("i7", "i8", "i9"), traits = c("t1", "t2", "t3"),
            signs = c(1, 1, -1)) +
  set_block(c("i10", "i11", "i12"), traits = c("t1", "t2", "t3"),
            signs = c(1, -1, 1))

# generate the data to be understood by 'thurstonianIRT'
triplets_long &lt;- make_TIRT_data(
  data = triplets, blocks = blocks, direction = "larger",
  format = "pairwise", family = "bernoulli", range = c(0, 1)
)


# fit the data using Stan
fit &lt;- fit_TIRT_stan(triplets_long, chains = 1)
print(fit)
predict(fit)


</code></pre>

<hr>
<h2 id='gof.TIRTfit'>Extract corrected goodness of fit statistics</h2><span id='topic+gof.TIRTfit'></span><span id='topic+gof'></span>

<h3>Description</h3>

<p>By default <span class="pkg">lavaan</span> will return a value for degrees of
freedom that ignores redundancies amongst the estimated model
thresholds. This function corrects the degrees of freedom, and
then recalculates the associated chi-square test statistic
p-value and root mean square error of approximation (RMSEA).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'TIRTfit'
gof(object, ...)

gof(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gof.TIRTfit_+3A_object">object</code></td>
<td>
<p>A <code>TIRTfit</code> object.</p>
</td></tr>
<tr><td><code id="gof.TIRTfit_+3A_...">...</code></td>
<td>
<p>currently unused.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note this function is currently only implemented for <span class="pkg">lavaan</span>.
</p>


<h3>Value</h3>

<p>A vector containing the chi-square value, adjusted degrees of
freedom, p-value, and RMSEA.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load the data
data("triplets")

# define the blocks of items
blocks &lt;-
  set_block(c("i1", "i2", "i3"), traits = c("t1", "t2", "t3"),
            signs = c(1, 1, 1)) +
  set_block(c("i4", "i5", "i6"), traits = c("t1", "t2", "t3"),
            signs = c(-1, 1, 1)) +
  set_block(c("i7", "i8", "i9"), traits = c("t1", "t2", "t3"),
            signs = c(1, 1, -1)) +
  set_block(c("i10", "i11", "i12"), traits = c("t1", "t2", "t3"),
            signs = c(1, -1, 1))

# generate the data to be understood by 'thurstonianIRT'
triplets_long &lt;- make_TIRT_data(
  data = triplets, blocks = blocks, direction = "larger",
  format = "pairwise", family = "bernoulli", range = c(0, 1)
)

# fit the data using lavaan
fit &lt;- fit_TIRT_lavaan(triplets_long)
gof(fit)

</code></pre>

<hr>
<h2 id='make_lavaan_code'>Generate lavaan code for Thurstonian IRT models</h2><span id='topic+make_lavaan_code'></span>

<h3>Description</h3>

<p>Generate lavaan code for Thurstonian IRT models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_lavaan_code(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_lavaan_code_+3A_data">data</code></td>
<td>
<p>An object of class <code>'TIRTdata'</code>. see
<code><a href="#topic+make_TIRT_data">make_TIRT_data</a></code> for documentation on how to create one.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string of lavaan code
for a Thurstonian IRT model.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>lambdas &lt;- c(runif(6, 0.5, 1), runif(6, -1, -0.5))
sim_data &lt;- sim_TIRT_data(
  npersons = 100,
  ntraits = 3,
  nblocks_per_trait = 4,
  gamma = 0,
  lambda = lambdas,
  Phi = diag(3)
)
cat(make_lavaan_code(sim_data))

</code></pre>

<hr>
<h2 id='make_mplus_code'>Generate Mplus code for Thurstonian IRT models</h2><span id='topic+make_mplus_code'></span>

<h3>Description</h3>

<p>Generate Mplus code for Thurstonian IRT models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_mplus_code(data, iter = 1000, eta_file = "eta.csv")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_mplus_code_+3A_data">data</code></td>
<td>
<p>An object of class <code>'TIRTdata'</code>. see
<code><a href="#topic+make_TIRT_data">make_TIRT_data</a></code> for documentation on how to create one.</p>
</td></tr>
<tr><td><code id="make_mplus_code_+3A_iter">iter</code></td>
<td>
<p>Maximum number of iterations of the
model fitting algorithm.</p>
</td></tr>
<tr><td><code id="make_mplus_code_+3A_eta_file">eta_file</code></td>
<td>
<p>optional file name in which predicted
trait scores should be stored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of Mplus code snippets to be
interpreted by the <span class="pkg">MplusAutomation</span> package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sim_data &lt;- sim_TIRT_data(
  npersons = 100,
  ntraits = 3,
  nblocks_per_trait = 4,
  gamma = 0,
  lambda = c(runif(6, 0.5, 1), runif(6, -1, -0.5)),
  Phi = diag(3)
)

# show the created Mplus code
lapply(make_mplus_code(sim_data), cat)

</code></pre>

<hr>
<h2 id='make_sem_data'>Prepare data for Thurstonian IRT models fitted with
lavaan or Mplus</h2><span id='topic+make_sem_data'></span>

<h3>Description</h3>

<p>Prepare data for Thurstonian IRT models fitted with
lavaan or Mplus
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_sem_data(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_sem_data_+3A_data">data</code></td>
<td>
<p>An object of class <code>'TIRTdata'</code>. see
<code><a href="#topic+make_TIRT_data">make_TIRT_data</a></code> for documentation on how to create one.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> ready to be passed to <span class="pkg">lavaan</span>
or <span class="pkg">Mplus</span>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># simulate some data
sdata &lt;- sim_TIRT_data(
  npersons = 100,
  ntraits = 3,
  nblocks_per_trait = 4,
  gamma = 0,
  lambda = c(runif(6, 0.5, 1), runif(6, -1, -0.5)),
  Phi = diag(3)
)

# create data ready for use in SEM software
sem_data &lt;- make_sem_data(sdata)
head(sem_data)

</code></pre>

<hr>
<h2 id='make_stan_data'>Prepare data for Thurstonian IRT models fitted with Stan</h2><span id='topic+make_stan_data'></span>

<h3>Description</h3>

<p>Prepare data for Thurstonian IRT models fitted with Stan
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_stan_data(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_stan_data_+3A_data">data</code></td>
<td>
<p>An object of class <code>data.frame</code> containing data of all
variables used in the model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of data ready to be passed to <span class="pkg">Stan</span>.
</p>
<p>#' @examples
# simulate some data
sim_data &lt;- sim_TIRT_data(
npersons = 100,
ntraits = 3,
nblocks_per_trait = 4,
gamma = 0,
lambda = c(runif(6, 0.5, 1), runif(6, -1, -0.5)),
Phi = diag(3)
)
</p>
<p># create data ready for use in Stan
stan_data &lt;- make_stan_data(sim_data)
str(stan_data)
</p>

<hr>
<h2 id='make_TIRT_data'>Prepare data for Thurstonian IRT models</h2><span id='topic+make_TIRT_data'></span>

<h3>Description</h3>

<p>Prepare data for Thurstonian IRT models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_TIRT_data(
  data,
  blocks,
  direction = c("larger", "smaller"),
  format = c("ranks", "pairwise"),
  family = "bernoulli",
  partial = FALSE,
  range = c(0, 1)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_TIRT_data_+3A_data">data</code></td>
<td>
<p>An object of class <code>data.frame</code> containing data of all
variables used in the model.</p>
</td></tr>
<tr><td><code id="make_TIRT_data_+3A_blocks">blocks</code></td>
<td>
<p>Object of class <code>TIRTblocks</code> generated by
<code><a href="#topic+set_block">set_block</a></code> indicating which items belong to which block, trait
and more. Ignored if data already contains information on the blocks.</p>
</td></tr>
<tr><td><code id="make_TIRT_data_+3A_direction">direction</code></td>
<td>
<p>Indicates if <code>"larger"</code> (the default) or
<code>"smaller"</code> input values are considered as indicating the favored
answer.</p>
</td></tr>
<tr><td><code id="make_TIRT_data_+3A_format">format</code></td>
<td>
<p>Format of the item responses. Either <code>"ranks"</code> for
responses in ranked format or <code>"pairwise"</code> for responses in pairwise
comparison format. If <code>"ranks"</code>, each item must have its own
column in the data frame which contains its ranks within the block.
If <code>"pairwise"</code>, each existing item combination must have its
own column named after the combination of the two compared items.</p>
</td></tr>
<tr><td><code id="make_TIRT_data_+3A_family">family</code></td>
<td>
<p>Name of assumed the response distribution. Either
<code>"bernoulli"</code>, <code>"cumulative"</code>, or <code>"gaussian"</code>.</p>
</td></tr>
<tr><td><code id="make_TIRT_data_+3A_partial">partial</code></td>
<td>
<p>A flag to indicate whether partial comparisons are allowed
for responses stored in the <code>"ranks"</code> format.</p>
</td></tr>
<tr><td><code id="make_TIRT_data_+3A_range">range</code></td>
<td>
<p>Numeric vector of length two giving the range of the
responses when using the <code>"pairwise"</code> format. Defaults
to <code>c(0, 1)</code> for use with dichotomous responses.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> in a specific format and with attributes ready
for use with other functions of the <span class="pkg">ThurstonianIRT</span> package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load the data
data("triplets")

# define the blocks of items
blocks &lt;-
  set_block(c("i1", "i2", "i3"), traits = c("t1", "t2", "t3"),
          signs = c(1, 1, 1)) +
  set_block(c("i4", "i5", "i6"), traits = c("t1", "t2", "t3"),
            signs = c(-1, 1, 1)) +
  set_block(c("i7", "i8", "i9"), traits = c("t1", "t2", "t3"),
            signs = c(1, 1, -1)) +
  set_block(c("i10", "i11", "i12"), traits = c("t1", "t2", "t3"),
            signs = c(1, -1, 1))

# generate the data to be understood by 'thurstonianIRT'
triplets_long &lt;- make_TIRT_data(
  data = triplets, blocks = blocks, direction = "larger",
  format = "pairwise", family = "bernoulli", range = c(0, 1)
)


# fit the data using Stan
fit &lt;- fit_TIRT_stan(triplets_long, chains = 1)
print(fit)
predict(fit)


</code></pre>

<hr>
<h2 id='predict.TIRTfit'>Predict trait scores of Thurstonian IRT models</h2><span id='topic+predict.TIRTfit'></span>

<h3>Description</h3>

<p>Predict trait scores of Thurstonian IRT models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'TIRTfit'
predict(object, newdata = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.TIRTfit_+3A_object">object</code></td>
<td>
<p>An object of class <code>TIRTfit</code>.</p>
</td></tr>
<tr><td><code id="predict.TIRTfit_+3A_newdata">newdata</code></td>
<td>
<p>Optional <code>TIRTdata</code> object (created via
<code><a href="#topic+make_TIRT_data">make_TIRT_data</a></code>) containing data of new persons
for which trait scores should be predicted based on the fitted
model. If <code>NULL</code> (the default), trait scores are predicted
for the persons whose data was used to originally fit the model.</p>
</td></tr>
<tr><td><code id="predict.TIRTfit_+3A_...">...</code></td>
<td>
<p>Further arguments passed to the underlying methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When predicting trait scores of new persons (via <code>newdata</code>),
posterior medians of item parameters are used for predictions. This implies
that the uncertainty in the new trait scores is underestimated as the
uncertainty in the (posterior distribution of) item parameters is ignored.
</p>


<h3>Value</h3>

<p>A data frame with predicted trait scores.
</p>

<hr>
<h2 id='set_block'>Prepare blocks of items</h2><span id='topic+set_block'></span><span id='topic+empty_block'></span>

<h3>Description</h3>

<p>Prepare blocks of items and incorporate information
about which item belongs to which trait. A block
of items is a set of two or more items presented and answered together
by fully ranking them or selecting the most and/or least favorit
in a forced choice format. A whole test usually contains
several blocks and items may reappear in different blocks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_block(items, traits, names = items, signs = 1)

empty_block()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_block_+3A_items">items</code></td>
<td>
<p>Names of item comparisons to be combined
into one block. Should correspond to variables in the data.</p>
</td></tr>
<tr><td><code id="set_block_+3A_traits">traits</code></td>
<td>
<p>Names of the traits to which each item belongs</p>
</td></tr>
<tr><td><code id="set_block_+3A_names">names</code></td>
<td>
<p>Optional names of the items in the output.
Can be used to equate parameters of items across blocks,
if the same item was used in different blocks.</p>
</td></tr>
<tr><td><code id="set_block_+3A_signs">signs</code></td>
<td>
<p>Expected signs of the item loadings (1 or -1).</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+set_blocks_from_df">set_blocks_from_df</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_block(
  items = c("i1", "i2", "i3"),
  traits = c("A", "B", "C")
) +
set_block(
  items = c("i4", "i5", "i6"),
  traits = c("A", "B", "C")
)

</code></pre>

<hr>
<h2 id='set_blocks_from_df'>Prepare blocks of items from a data frame</h2><span id='topic+set_blocks_from_df'></span>

<h3>Description</h3>

<p>Prepare blocks of items and incorporate information
about which item belongs to which trait from a pre-existing dataframe.
This is a wrapper function for <code><a href="#topic+set_block">set_block</a></code>, eliminating the need
to manually set each item, trait, name and sign (loading) info per block.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_blocks_from_df(
  data,
  blocks = "block",
  items = "item",
  traits = "trait",
  names = items,
  signs = "sign"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_blocks_from_df_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> containing all the required columns
(see the arguments below) to specify the item blocks.</p>
</td></tr>
<tr><td><code id="set_blocks_from_df_+3A_blocks">blocks</code></td>
<td>
<p>Name of column vector denoting the block each item
corresponds to. Each block must have an equal number of items.</p>
</td></tr>
<tr><td><code id="set_blocks_from_df_+3A_items">items</code></td>
<td>
<p>Name of column vector denoting items to be combined into
one block. Should correspond to variables in the data.</p>
</td></tr>
<tr><td><code id="set_blocks_from_df_+3A_traits">traits</code></td>
<td>
<p>Names of column vector denoting the traits to which each
item belongs.</p>
</td></tr>
<tr><td><code id="set_blocks_from_df_+3A_names">names</code></td>
<td>
<p>Optional column vector of item names in the output.
Can be used to equate parameters of items across blocks,
if the same item was used in different blocks.</p>
</td></tr>
<tr><td><code id="set_blocks_from_df_+3A_signs">signs</code></td>
<td>
<p>Name of column vector with expected signs of the
item loadings (1 or -1).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A block of items is a set of two or more items presented and answered
together by fully ranking them or selecting the most and/or least favorite
in a forced choice format. A whole test usually contains
several blocks and items may reappear in different blocks.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+set_block">set_block</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>block_info &lt;- data.frame(
  block = rep(1:4, each = 3),
  items = c("i1", "i2", "i3", "i4", "i5", "i6",
            "i7", "i8", "i9", "i10", "i11", "i12"),
  traits = rep(c("t1", "t2", "t3"), times = 4),
  signs = c(1, 1, 1, -1, 1, 1, 1, 1, -1, 1, -1, 1)
)

blocks &lt;- set_blocks_from_df(
  data = block_info,
  blocks = "block",
  items = "items",
  traits = "traits",
  signs = "signs"
)

</code></pre>

<hr>
<h2 id='sim_TIRT_data'>Simulate Thurstonian IRT data</h2><span id='topic+sim_TIRT_data'></span>

<h3>Description</h3>

<p>Simulate Thurstonian IRT data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim_TIRT_data(
  npersons,
  ntraits,
  lambda,
  gamma,
  psi = NULL,
  Phi = NULL,
  eta = NULL,
  family = "bernoulli",
  nblocks_per_trait = 5,
  nitems_per_block = 3,
  comb_blocks = c("random", "fixed")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sim_TIRT_data_+3A_npersons">npersons</code></td>
<td>
<p>Number of persons.</p>
</td></tr>
<tr><td><code id="sim_TIRT_data_+3A_ntraits">ntraits</code></td>
<td>
<p>Number of traits.</p>
</td></tr>
<tr><td><code id="sim_TIRT_data_+3A_lambda">lambda</code></td>
<td>
<p>Item factor loadings.</p>
</td></tr>
<tr><td><code id="sim_TIRT_data_+3A_gamma">gamma</code></td>
<td>
<p>Baseline attractiveness parameters of the
first item versus the second item in the pairwise comparisons.
Can be thought of as intercept parameters.</p>
</td></tr>
<tr><td><code id="sim_TIRT_data_+3A_psi">psi</code></td>
<td>
<p>Optional item uniquenesses. If not provided,
they will be computed as <code>psi = 1 - lambda^2</code> in which
case lambda are taken to be the standardized factor loadings.</p>
</td></tr>
<tr><td><code id="sim_TIRT_data_+3A_phi">Phi</code></td>
<td>
<p>Optional trait correlation matrix from which to sample
person factor scores. Only used if <code>eta</code> is not provided.</p>
</td></tr>
<tr><td><code id="sim_TIRT_data_+3A_eta">eta</code></td>
<td>
<p>Optional person factor scores. If provided, argument
<code>Phi</code> will be ignored.</p>
</td></tr>
<tr><td><code id="sim_TIRT_data_+3A_family">family</code></td>
<td>
<p>Name of assumed the response distribution. Either
<code>"bernoulli"</code>, <code>"cumulative"</code>, or <code>"gaussian"</code>.</p>
</td></tr>
<tr><td><code id="sim_TIRT_data_+3A_nblocks_per_trait">nblocks_per_trait</code></td>
<td>
<p>Number of blocks per trait.</p>
</td></tr>
<tr><td><code id="sim_TIRT_data_+3A_nitems_per_block">nitems_per_block</code></td>
<td>
<p>Number of items per block.</p>
</td></tr>
<tr><td><code id="sim_TIRT_data_+3A_comb_blocks">comb_blocks</code></td>
<td>
<p>Indicates how to combine traits to blocks.
<code>"fixed"</code> implies a simple non-random design that may combine
certain traits which each other disproportionally often. We thus
recommend to use a <code>"random"</code> block design (the default) that
combines all traits with all other traits equally often on average.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> of the same structure
as returned by <code><a href="#topic+make_TIRT_data">make_TIRT_data</a></code>. Parameter values
from which the data were simulated are stored as attributes
of the returned object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># simulate some data
sdata &lt;- sim_TIRT_data(
  npersons = 100,
  ntraits = 3,
  nblocks_per_trait = 4,
  gamma = 0,
  lambda = c(runif(6, 0.5, 1), runif(6, -1, -0.5)),
  Phi = diag(3)
)

# take a look at the data
head(sdata)
str(attributes(sdata))


# fit a Thurstonian IRT model using lavaan
fit &lt;- fit_TIRT_lavaan(sdata)
print(fit)


</code></pre>

<hr>
<h2 id='triplets'>Triplets of Pairwise Comparisons</h2><span id='topic+triplets'></span>

<h3>Description</h3>

<p>This data set contains synthetic data
of 200 participants on 4 triplets. In each triplet,
participants had to rank the three alternative items according
to their preference. Reponses were then converted into
a set of dichotomous pairwise responses between all the
three alternatives. More details can be found in
Brown and Maydeu-Olivares (2011).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>triplets
</code></pre>


<h3>Format</h3>

<p>A data frame of 200 observations containing
information on 12 variables.
Overall, the 12 items measure 3 different traits.
Items 1, 4, 7, and 10 load on trait 1,
items 2, 5, 8, and 11 load on trait 2, and
items 3, 6, 9, and 12 load on trait 3.
Moreover, items 4, 9, and 11 are inverted.
</p>

<dl>
<dt>i1i2</dt><dd><p>Response preferences between item 1 and 2.</p>
</dd>
<dt>i1i3</dt><dd><p>Response preferences between item 1 and 3.</p>
</dd>
<dt>i2i3</dt><dd><p>Response preferences between item 2 and 3.</p>
</dd>
<dt>i4i5</dt><dd><p>Response preferences between item 4 and 5.</p>
</dd>
<dt>i4i6</dt><dd><p>Response preferences between item 4 and 6.</p>
</dd>
<dt>i5i6</dt><dd><p>Response preferences between item 5 and 6.</p>
</dd>
<dt>i7i8</dt><dd><p>Response preferences between item 7 and 8.</p>
</dd>
<dt>i7i9</dt><dd><p>Response preferences between item 7 and 9.</p>
</dd>
<dt>i8i9</dt><dd><p>Response preferences between item 8 and 9.</p>
</dd>
<dt>i10i11</dt><dd><p>Response preferences between item 10 and 11.</p>
</dd>
<dt>i10i12</dt><dd><p>Response preferences between item 10 and 12.</p>
</dd>
<dt>i11i12</dt><dd><p>Response preferences between item 11 and 12.</p>
</dd>
</dl>



<h3>Source</h3>

<p>Brown, A., &amp; Maydeu-Olivares, A. (2011). Item response modeling of
forced-choice questionnaires. Educational and Psychological Measurement,
71(3), 460-502. doi:10.1177/0013164410375112
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load the data
data("triplets")

# define the blocks of items
blocks &lt;-
  set_block(c("i1", "i2", "i3"), traits = c("t1", "t2", "t3"),
          signs = c(1, 1, 1)) +
  set_block(c("i4", "i5", "i6"), traits = c("t1", "t2", "t3"),
            signs = c(-1, 1, 1)) +
  set_block(c("i7", "i8", "i9"), traits = c("t1", "t2", "t3"),
            signs = c(1, 1, -1)) +
  set_block(c("i10", "i11", "i12"), traits = c("t1", "t2", "t3"),
            signs = c(1, -1, 1))

# generate the data to be understood by 'thurstonianIRT'
tdat &lt;- make_TIRT_data(
  triplets, blocks, direction = "larger",
  format = "pairwise", family = "bernoulli", range = c(0, 1)
)


# fit the data using Stan
fit &lt;- fit_TIRT_stan(tdat, chains = 1)
print(fit)
predict(fit)


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
