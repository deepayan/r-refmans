<!DOCTYPE html><html><head><title>Help for package validatetools</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {validatetools}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cat_as_mip_rules'><p>get categorical rules as mip_rules</p></a></li>
<li><a href='#cat_coefficients'><p>Get coefficient matrix from categorical rules</p></a></li>
<li><a href='#detect_boundary_cat'><p>Detect viable domains for categorical variables</p></a></li>
<li><a href='#detect_boundary_num'><p>Detect the range for numerical variables</p></a></li>
<li><a href='#detect_fixed_variables'><p>Detect fixed variables</p></a></li>
<li><a href='#detect_infeasible_rules'><p>Detect which rules cause infeasibility</p></a></li>
<li><a href='#detect_redundancy'><p>Detect redundant rules without removing.</p></a></li>
<li><a href='#expect_values'><p>expect values</p></a></li>
<li><a href='#is_categorical'><p>Check if rules are categorical</p></a></li>
<li><a href='#is_conditional'><p>Check if rules are conditional rules</p></a></li>
<li><a href='#is_contradicted_by'><p>Find out which rules are conflicting</p></a></li>
<li><a href='#is_implied_by'><p>Find which rule(s) make rule_name redundant</p></a></li>
<li><a href='#is_infeasible'><p>Check the feasibility of a rule set</p></a></li>
<li><a href='#is_linear'><p>Check which rules are linear rules.</p></a></li>
<li><a href='#make_feasible'><p>Make an infeasible system feasible.</p></a></li>
<li><a href='#mip_rule'><p>Create a rule used by mip</p></a></li>
<li><a href='#remove_redundancy'><p>Remove redundant rules</p></a></li>
<li><a href='#simplify_conditional'><p>Simplify conditional statements</p></a></li>
<li><a href='#simplify_fixed_variables'><p>Simplify fixed variables</p></a></li>
<li><a href='#simplify_rules'><p>Simplify a rule set</p></a></li>
<li><a href='#substitute_values'><p>substitute a value in a rule set</p></a></li>
<li><a href='#translate_mip_lp'><p>translate linear rules into an lp problem</p></a></li>
<li><a href='#validatetools'><p>Tools for validation rules</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Checking and Simplifying Validation Rule Sets</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Rule sets with validation rules may contain redundancies or contradictions. 
  Functions for finding redundancies and problematic rules are provided, 
  given a set a rules formulated with 'validate'.</td>
</tr>
<tr>
<td>Depends:</td>
<td>validate</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/data-cleaning/validatetools">https://github.com/data-cleaning/validatetools</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/data-cleaning/validatetools/issues">https://github.com/data-cleaning/validatetools/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, stats, utils, lpSolveAPI</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, covr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-30 20:37:32 UTC; edwindj</td>
</tr>
<tr>
<td>Author:</td>
<td>Edwin de Jonge <a href="https://orcid.org/0000-0002-6580-4718"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Mark van der Loo [aut],
  Jacco Daalmans [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Edwin de Jonge &lt;edwindjonge@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-30 20:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='cat_as_mip_rules'>get categorical rules as mip_rules</h2><span id='topic+cat_as_mip_rules'></span>

<h3>Description</h3>

<p>get categorical rules as mip_rules
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cat_as_mip_rules(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cat_as_mip_rules_+3A_x">x</code></td>
<td>
<p>expressionset object</p>
</td></tr>
<tr><td><code id="cat_as_mip_rules_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of mip_rule
</p>

<hr>
<h2 id='cat_coefficients'>Get coefficient matrix from categorical rules</h2><span id='topic+cat_coefficients'></span>

<h3>Description</h3>

<p>Get coefficient matrix from categorical edits, similar to
linear_coefficients.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cat_coefficients(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cat_coefficients_+3A_x">x</code></td>
<td>
<p>validator object</p>
</td></tr>
<tr><td><code id="cat_coefficients_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>

<hr>
<h2 id='detect_boundary_cat'>Detect viable domains for categorical variables</h2><span id='topic+detect_boundary_cat'></span>

<h3>Description</h3>

<p>Detect viable domains for categorical variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>detect_boundary_cat(x, ..., as_df = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="detect_boundary_cat_+3A_x">x</code></td>
<td>
<p><code><a href="validate.html#topic+validator">validator</a></code> object with rules</p>
</td></tr>
<tr><td><code id="detect_boundary_cat_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
<tr><td><code id="detect_boundary_cat_+3A_as_df">as_df</code></td>
<td>
<p>return result as data.frame (before 0.4.5)</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code> with columns <code>$variable</code>, <code>$value</code>, <code>$min</code>, <code>$max</code>. Each row is a 
category/value of a categorical variable.
</p>


<h3>See Also</h3>

<p>Other feasibility: 
<code><a href="#topic+detect_boundary_num">detect_boundary_num</a>()</code>,
<code><a href="#topic+detect_infeasible_rules">detect_infeasible_rules</a>()</code>,
<code><a href="#topic+is_contradicted_by">is_contradicted_by</a>()</code>,
<code><a href="#topic+is_infeasible">is_infeasible</a>()</code>,
<code><a href="#topic+make_feasible">make_feasible</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rules &lt;- validator(
  x &gt;= 1,
  x + y &lt;= 10,
  y &gt;= 6
)

detect_boundary_num(rules)

rules &lt;- validator(
  job %in% c("yes", "no"),
  if (job == "no") income == 0,
  income &gt; 0
)

detect_boundary_cat(rules)
</code></pre>

<hr>
<h2 id='detect_boundary_num'>Detect the range for numerical variables</h2><span id='topic+detect_boundary_num'></span>

<h3>Description</h3>

<p>Detect for each numerical variable in a validation rule set, what its maximum and minimum values are.
This allows for manual rule set checking: does rule set <code>x</code> overly constrain numerical values?
</p>


<h3>Usage</h3>

<pre><code class='language-R'>detect_boundary_num(x, eps = 1e-08, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="detect_boundary_num_+3A_x">x</code></td>
<td>
<p><code><a href="validate.html#topic+validator">validator</a></code> object, rule set to be checked</p>
</td></tr>
<tr><td><code id="detect_boundary_num_+3A_eps">eps</code></td>
<td>
<p>detected fixed values will have this precission.</p>
</td></tr>
<tr><td><code id="detect_boundary_num_+3A_...">...</code></td>
<td>
<p>currently not used</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This procedure only finds minimum and maximum values, but misses gaps.
</p>


<h3>Value</h3>

<p><code><a href="base.html#topic+data.frame">data.frame</a></code> with columns &quot;variable&quot;, &quot;lowerbound&quot;, &quot;upperbound&quot;.
</p>


<h3>References</h3>

<p>Statistical Data Cleaning with R (2017), Chapter 8, M. van der Loo, E. de Jonge
</p>
<p>Simplifying constraints in data editing (2015). Technical Report 2015|18, Statistics Netherlands, J. Daalmans
</p>


<h3>See Also</h3>

<p><code><a href="#topic+detect_fixed_variables">detect_fixed_variables</a></code>
</p>
<p>Other feasibility: 
<code><a href="#topic+detect_boundary_cat">detect_boundary_cat</a>()</code>,
<code><a href="#topic+detect_infeasible_rules">detect_infeasible_rules</a>()</code>,
<code><a href="#topic+is_contradicted_by">is_contradicted_by</a>()</code>,
<code><a href="#topic+is_infeasible">is_infeasible</a>()</code>,
<code><a href="#topic+make_feasible">make_feasible</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rules &lt;- validator(
  x &gt;= 1,
  x + y &lt;= 10,
  y &gt;= 6
)

detect_boundary_num(rules)

rules &lt;- validator(
  job %in% c("yes", "no"),
  if (job == "no") income == 0,
  income &gt; 0
)

detect_boundary_cat(rules)
</code></pre>

<hr>
<h2 id='detect_fixed_variables'>Detect fixed variables</h2><span id='topic+detect_fixed_variables'></span>

<h3>Description</h3>

<p>Detects variables that have a fixed value in the rule set. 
To simplify a rule set, these variables can be substituted with their value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>detect_fixed_variables(x, eps = x$options("lin.eq.eps"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="detect_fixed_variables_+3A_x">x</code></td>
<td>
<p><code><a href="validate.html#topic+validator">validator</a></code> object with the validation rules.</p>
</td></tr>
<tr><td><code id="detect_fixed_variables_+3A_eps">eps</code></td>
<td>
<p>detected fixed values will have this precission.</p>
</td></tr>
<tr><td><code id="detect_fixed_variables_+3A_...">...</code></td>
<td>
<p>not used.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+simplify_fixed_variables">simplify_fixed_variables</a></code>
</p>
<p>Other redundancy: 
<code><a href="#topic+detect_redundancy">detect_redundancy</a>()</code>,
<code><a href="#topic+is_implied_by">is_implied_by</a>()</code>,
<code><a href="#topic+remove_redundancy">remove_redundancy</a>()</code>,
<code><a href="#topic+simplify_fixed_variables">simplify_fixed_variables</a>()</code>,
<code><a href="#topic+simplify_rules">simplify_rules</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(validate)
rules &lt;- validator( x &gt;= 0
                  , x &lt;= 0
                  )
detect_fixed_variables(rules)
simplify_fixed_variables(rules)

rules &lt;- validator( x1 + x2 + x3 == 0
                  , x1 + x2 &gt;= 0
                  , x3 &gt;= 0
                  )
simplify_fixed_variables(rules)
</code></pre>

<hr>
<h2 id='detect_infeasible_rules'>Detect which rules cause infeasibility</h2><span id='topic+detect_infeasible_rules'></span>

<h3>Description</h3>

<p>Detect which rules cause infeasibility. This methods tries to remove the minimum number of rules to make the system
mathematically feasible. Note that this may not result in your desired system, because some rules may be more important
to you than others. This can be mitigated by supplying weights for the rules. Default weight is 1.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>detect_infeasible_rules(x, weight = numeric(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="detect_infeasible_rules_+3A_x">x</code></td>
<td>
<p><code><a href="validate.html#topic+validator">validator</a></code> object with rules</p>
</td></tr>
<tr><td><code id="detect_infeasible_rules_+3A_weight">weight</code></td>
<td>
<p>optional named <code><a href="base.html#topic+numeric">numeric</a></code> with weights. Unnamed variables in the weight are given the default
weight <code>1</code>.</p>
</td></tr>
<tr><td><code id="detect_infeasible_rules_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>character</code> with the names of the rules that are causing infeasibility.
</p>


<h3>See Also</h3>

<p>Other feasibility: 
<code><a href="#topic+detect_boundary_cat">detect_boundary_cat</a>()</code>,
<code><a href="#topic+detect_boundary_num">detect_boundary_num</a>()</code>,
<code><a href="#topic+is_contradicted_by">is_contradicted_by</a>()</code>,
<code><a href="#topic+is_infeasible">is_infeasible</a>()</code>,
<code><a href="#topic+make_feasible">make_feasible</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rules &lt;- validator( x &gt; 0)

is_infeasible(rules)

rules &lt;- validator( rule1 = x &gt; 0
                  , rule2 = x &lt; 0
                  )

is_infeasible(rules)

detect_infeasible_rules(rules)
make_feasible(rules)

# find out the conflict with this rule
is_contradicted_by(rules, "rule1")
</code></pre>

<hr>
<h2 id='detect_redundancy'>Detect redundant rules without removing.</h2><span id='topic+detect_redundancy'></span>

<h3>Description</h3>

<p>Detect redundancies in a rule set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>detect_redundancy(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="detect_redundancy_+3A_x">x</code></td>
<td>
<p><code><a href="validate.html#topic+validator">validator</a></code> object with the validation rules.</p>
</td></tr>
<tr><td><code id="detect_redundancy_+3A_...">...</code></td>
<td>
<p>not used.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>For removal of duplicate rules, simplify
</p>


<h3>See Also</h3>

<p>Other redundancy: 
<code><a href="#topic+detect_fixed_variables">detect_fixed_variables</a>()</code>,
<code><a href="#topic+is_implied_by">is_implied_by</a>()</code>,
<code><a href="#topic+remove_redundancy">remove_redundancy</a>()</code>,
<code><a href="#topic+simplify_fixed_variables">simplify_fixed_variables</a>()</code>,
<code><a href="#topic+simplify_rules">simplify_rules</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rules &lt;- validator( rule1 = x &gt; 1
                  , rule2 = x &gt; 2
                  )

# rule1 is superfluous
remove_redundancy(rules)

# rule 1 is implied by rule 2
is_implied_by(rules, "rule1")

rules &lt;- validator( rule1 = x &gt; 2
                  , rule2 = x &gt; 2
)

# standout: rule1 and rule2, oldest rules wins
remove_redundancy(rules)

# Note that detection signifies both rules!
detect_redundancy(rules)


</code></pre>

<hr>
<h2 id='expect_values'>expect values</h2><span id='topic+expect_values'></span>

<h3>Description</h3>

<p>expect values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expect_values(values, weights, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expect_values_+3A_values">values</code></td>
<td>
<p>named list of values.</p>
</td></tr>
<tr><td><code id="expect_values_+3A_weights">weights</code></td>
<td>
<p>named numeric of equal length as values.</p>
</td></tr>
<tr><td><code id="expect_values_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>

<hr>
<h2 id='is_categorical'>Check if rules are categorical</h2><span id='topic+is_categorical'></span>

<h3>Description</h3>

<p>Check if rules are categorical
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_categorical(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_categorical_+3A_x">x</code></td>
<td>
<p>validator object</p>
</td></tr>
<tr><td><code id="is_categorical_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>logical indicating which rules are purely categorical/logical
</p>


<h3>Examples</h3>

<pre><code class='language-R'>v &lt;- validator( A %in% c("a1", "a2")
              , B %in% c("b1", "b2")
              , if (A == "a1") B == "b1"
              , y &gt; x
              )

is_categorical(v)
</code></pre>

<hr>
<h2 id='is_conditional'>Check if rules are conditional rules</h2><span id='topic+is_conditional'></span>

<h3>Description</h3>

<p>Check if rules are conditional rules
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_conditional(rules, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_conditional_+3A_rules">rules</code></td>
<td>
<p>validator object containing validation rules</p>
</td></tr>
<tr><td><code id="is_conditional_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>logical indicating which rules are conditional
</p>


<h3>Examples</h3>

<pre><code class='language-R'>v &lt;- validator( A %in% c("a1", "a2")
              , B %in% c("b1", "b2")
              , if (A == "a1")  x &gt; 1 # conditional
              , if (y &gt; 0) x &gt;= 0 # conditional
              , if (A == "a1") B == "b1" # categorical
              )

is_conditional(v)
</code></pre>

<hr>
<h2 id='is_contradicted_by'>Find out which rules are conflicting</h2><span id='topic+is_contradicted_by'></span>

<h3>Description</h3>

<p>Find out for a contradicting rule which rules are conflicting. This helps in determining and assessing conflicts in rule sets. Which
of the rules should stay and which should go?
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_contradicted_by(x, rule_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_contradicted_by_+3A_x">x</code></td>
<td>
<p><code><a href="validate.html#topic+validator">validator</a></code> object with rules.</p>
</td></tr>
<tr><td><code id="is_contradicted_by_+3A_rule_name">rule_name</code></td>
<td>
<p><code>character</code> with the names of the rules that are causing infeasibility.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>character</code> with conflicting rules.
</p>


<h3>See Also</h3>

<p>Other feasibility: 
<code><a href="#topic+detect_boundary_cat">detect_boundary_cat</a>()</code>,
<code><a href="#topic+detect_boundary_num">detect_boundary_num</a>()</code>,
<code><a href="#topic+detect_infeasible_rules">detect_infeasible_rules</a>()</code>,
<code><a href="#topic+is_infeasible">is_infeasible</a>()</code>,
<code><a href="#topic+make_feasible">make_feasible</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rules &lt;- validator( x &gt; 0)

is_infeasible(rules)

rules &lt;- validator( rule1 = x &gt; 0
                  , rule2 = x &lt; 0
                  )

is_infeasible(rules)

detect_infeasible_rules(rules)
make_feasible(rules)

# find out the conflict with this rule
is_contradicted_by(rules, "rule1")
</code></pre>

<hr>
<h2 id='is_implied_by'>Find which rule(s) make rule_name redundant</h2><span id='topic+is_implied_by'></span>

<h3>Description</h3>

<p>Find out which rules are causing rule_name(s) to be redundant.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_implied_by(x, rule_name, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_implied_by_+3A_x">x</code></td>
<td>
<p><code><a href="validate.html#topic+validator">validator</a></code> object with rule</p>
</td></tr>
<tr><td><code id="is_implied_by_+3A_rule_name">rule_name</code></td>
<td>
<p><code>character</code> with the names of the rules to be checked</p>
</td></tr>
<tr><td><code id="is_implied_by_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>character</code> with the names of the rule that cause the implication.
</p>


<h3>See Also</h3>

<p>Other redundancy: 
<code><a href="#topic+detect_fixed_variables">detect_fixed_variables</a>()</code>,
<code><a href="#topic+detect_redundancy">detect_redundancy</a>()</code>,
<code><a href="#topic+remove_redundancy">remove_redundancy</a>()</code>,
<code><a href="#topic+simplify_fixed_variables">simplify_fixed_variables</a>()</code>,
<code><a href="#topic+simplify_rules">simplify_rules</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rules &lt;- validator( rule1 = x &gt; 1
                  , rule2 = x &gt; 2
                  )

# rule1 is superfluous
remove_redundancy(rules)

# rule 1 is implied by rule 2
is_implied_by(rules, "rule1")

rules &lt;- validator( rule1 = x &gt; 2
                  , rule2 = x &gt; 2
)

# standout: rule1 and rule2, oldest rules wins
remove_redundancy(rules)

# Note that detection signifies both rules!
detect_redundancy(rules)


</code></pre>

<hr>
<h2 id='is_infeasible'>Check the feasibility of a rule set</h2><span id='topic+is_infeasible'></span>

<h3>Description</h3>

<p>An infeasible rule set cannot be satisfied by any data because of internal 
contradictions. This function checks whether the record-wise linear,
categorical and conditional rules in a rule set are consistent.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_infeasible(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_infeasible_+3A_x">x</code></td>
<td>
<p><code>validator</code> object with validation rules.</p>
</td></tr>
<tr><td><code id="is_infeasible_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE or FALSE
</p>


<h3>See Also</h3>

<p>Other feasibility: 
<code><a href="#topic+detect_boundary_cat">detect_boundary_cat</a>()</code>,
<code><a href="#topic+detect_boundary_num">detect_boundary_num</a>()</code>,
<code><a href="#topic+detect_infeasible_rules">detect_infeasible_rules</a>()</code>,
<code><a href="#topic+is_contradicted_by">is_contradicted_by</a>()</code>,
<code><a href="#topic+make_feasible">make_feasible</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rules &lt;- validator( x &gt; 0)

is_infeasible(rules)

rules &lt;- validator( rule1 = x &gt; 0
                  , rule2 = x &lt; 0
                  )

is_infeasible(rules)

detect_infeasible_rules(rules)
make_feasible(rules)

# find out the conflict with this rule
is_contradicted_by(rules, "rule1")
</code></pre>

<hr>
<h2 id='is_linear'>Check which rules are linear rules.</h2><span id='topic+is_linear'></span>

<h3>Description</h3>

<p>Check which rules are linear rules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_linear(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_linear_+3A_x">x</code></td>
<td>
<p><code><a href="validate.html#topic+validator">validator</a></code> object containing data validation rules</p>
</td></tr>
<tr><td><code id="is_linear_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>logical</code> indicating which rules are (purely) linear.
</p>

<hr>
<h2 id='make_feasible'>Make an infeasible system feasible.</h2><span id='topic+make_feasible'></span>

<h3>Description</h3>

<p>Make an infeasible system feasible, by removing the minimum (weighted) number of rules, such that the remaining
rules are not conflicting.
This function uses <code><a href="#topic+detect_infeasible_rules">detect_infeasible_rules</a></code> for determining the rules to be removed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_feasible(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_feasible_+3A_x">x</code></td>
<td>
<p><code><a href="validate.html#topic+validator">validator</a></code> object with the validation rules.</p>
</td></tr>
<tr><td><code id="make_feasible_+3A_...">...</code></td>
<td>
<p>passed to <code><a href="#topic+detect_infeasible_rules">detect_infeasible_rules</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="validate.html#topic+validator">validator</a></code> object with feasible rules.
</p>


<h3>See Also</h3>

<p>Other feasibility: 
<code><a href="#topic+detect_boundary_cat">detect_boundary_cat</a>()</code>,
<code><a href="#topic+detect_boundary_num">detect_boundary_num</a>()</code>,
<code><a href="#topic+detect_infeasible_rules">detect_infeasible_rules</a>()</code>,
<code><a href="#topic+is_contradicted_by">is_contradicted_by</a>()</code>,
<code><a href="#topic+is_infeasible">is_infeasible</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rules &lt;- validator( x &gt; 0)

is_infeasible(rules)

rules &lt;- validator( rule1 = x &gt; 0
                  , rule2 = x &lt; 0
                  )

is_infeasible(rules)

detect_infeasible_rules(rules)
make_feasible(rules)

# find out the conflict with this rule
is_contradicted_by(rules, "rule1")
</code></pre>

<hr>
<h2 id='mip_rule'>Create a rule used by mip</h2><span id='topic+mip_rule'></span>

<h3>Description</h3>

<p>Create a rule used by mip
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mip_rule(a, op, b, rule, type, weight = Inf, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mip_rule_+3A_a">a</code></td>
<td>
<p>named vector with coefficients</p>
</td></tr>
<tr><td><code id="mip_rule_+3A_op">op</code></td>
<td>
<p>operator in (&quot;&lt;=&quot;, &quot;==&quot;, &quot;&gt;=&quot;, &quot;&gt;&quot;, &quot;&lt;&quot;)</p>
</td></tr>
</table>

<hr>
<h2 id='remove_redundancy'>Remove redundant rules</h2><span id='topic+remove_redundancy'></span>

<h3>Description</h3>

<p>Simplify a rule set by removing redundant rules
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_redundancy(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remove_redundancy_+3A_x">x</code></td>
<td>
<p><code><a href="validate.html#topic+validator">validator</a></code> object with validation rules.</p>
</td></tr>
<tr><td><code id="remove_redundancy_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>simplified <code><a href="validate.html#topic+validator">validator</a></code> object, in which redundant rules are removed.
</p>


<h3>See Also</h3>

<p>Other redundancy: 
<code><a href="#topic+detect_fixed_variables">detect_fixed_variables</a>()</code>,
<code><a href="#topic+detect_redundancy">detect_redundancy</a>()</code>,
<code><a href="#topic+is_implied_by">is_implied_by</a>()</code>,
<code><a href="#topic+simplify_fixed_variables">simplify_fixed_variables</a>()</code>,
<code><a href="#topic+simplify_rules">simplify_rules</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rules &lt;- validator( rule1 = x &gt; 1
                  , rule2 = x &gt; 2
                  )

# rule1 is superfluous
remove_redundancy(rules)

# rule 1 is implied by rule 2
is_implied_by(rules, "rule1")

rules &lt;- validator( rule1 = x &gt; 2
                  , rule2 = x &gt; 2
)

# standout: rule1 and rule2, oldest rules wins
remove_redundancy(rules)

# Note that detection signifies both rules!
detect_redundancy(rules)


</code></pre>

<hr>
<h2 id='simplify_conditional'>Simplify conditional statements</h2><span id='topic+simplify_conditional'></span>

<h3>Description</h3>

<p>Conditional rules may be constrained by the others rules in a validation rule set.
This procedure tries to simplify conditional statements.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simplify_conditional(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simplify_conditional_+3A_x">x</code></td>
<td>
<p><code><a href="validate.html#topic+validator">validator</a></code> object with the validation rules.</p>
</td></tr>
<tr><td><code id="simplify_conditional_+3A_...">...</code></td>
<td>
<p>not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="validate.html#topic+validator">validator</a></code> simplified rule set.
</p>


<h3>References</h3>

<p>TODO non-constraining, non-relaxing
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(validate)

# non-relaxing clause
rules &lt;- validator( r1 = if (x &gt; 1) y &gt; 3
                  , r2 = y &lt; 2
                  )
# y &gt; 3 is always FALSE so r1 can be simplified
simplify_conditional(rules)

# non-constraining clause
rules &lt;- validator( r1 = if (x &gt; 0) y &gt; 0
                  , r2 = if (x &lt; 1) y &gt; 1
                  )
simplify_conditional(rules)

rules &lt;- validator( r1 = if (A == "a1") x &gt; 0
                  , r2 = if (A == "a2") x &gt; 1
                  , r3 = A == "a1"
                  )
simplify_conditional(rules)
</code></pre>

<hr>
<h2 id='simplify_fixed_variables'>Simplify fixed variables</h2><span id='topic+simplify_fixed_variables'></span>

<h3>Description</h3>

<p>Detect variables of which the values are restricted to a single value by the
rule set. Simplify the rule set by replacing fixed variables with these values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simplify_fixed_variables(x, eps = 1e-08, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simplify_fixed_variables_+3A_x">x</code></td>
<td>
<p><code><a href="validate.html#topic+validator">validator</a></code> object with validation rules</p>
</td></tr>
<tr><td><code id="simplify_fixed_variables_+3A_eps">eps</code></td>
<td>
<p>detected fixed values will have this precission.</p>
</td></tr>
<tr><td><code id="simplify_fixed_variables_+3A_...">...</code></td>
<td>
<p>passed to <code><a href="#topic+substitute_values">substitute_values</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="validate.html#topic+validator">validator</a></code> object in which
</p>


<h3>See Also</h3>

<p>Other redundancy: 
<code><a href="#topic+detect_fixed_variables">detect_fixed_variables</a>()</code>,
<code><a href="#topic+detect_redundancy">detect_redundancy</a>()</code>,
<code><a href="#topic+is_implied_by">is_implied_by</a>()</code>,
<code><a href="#topic+remove_redundancy">remove_redundancy</a>()</code>,
<code><a href="#topic+simplify_rules">simplify_rules</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(validate)
rules &lt;- validator( x &gt;= 0
                  , x &lt;= 0
                  )
detect_fixed_variables(rules)
simplify_fixed_variables(rules)

rules &lt;- validator( x1 + x2 + x3 == 0
                  , x1 + x2 &gt;= 0
                  , x3 &gt;= 0
                  )
simplify_fixed_variables(rules)
</code></pre>

<hr>
<h2 id='simplify_rules'>Simplify a rule set</h2><span id='topic+simplify_rules'></span>

<h3>Description</h3>

<p>Simplifies a rule set set by applying different simplification methods. This is a convenience function that 
works in common cases. The following simplification methods are executed:
</p>

<ul>
<li> <p><code><a href="#topic+substitute_values">substitute_values</a></code>: filling in any parameters that are supplied via <code>.values</code> or <code>...</code>.
</p>
</li>
<li> <p><code><a href="#topic+simplify_fixed_variables">simplify_fixed_variables</a></code>: find out if there are fixed values. If this is the case, they are substituted.
</p>
</li>
<li> <p><code><a href="#topic+simplify_conditional">simplify_conditional</a></code>: Simplify conditional statements, by removing clauses that are superfluous.
</p>
</li>
<li> <p><code><a href="#topic+remove_redundancy">remove_redundancy</a></code>: remove redundant rules.
</p>
</li></ul>

<p>For more control, these methods can be called separately.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simplify_rules(.x, .values = list(...), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simplify_rules_+3A_.x">.x</code></td>
<td>
<p><code><a href="validate.html#topic+validator">validator</a></code> object with the rules to be simplified.</p>
</td></tr>
<tr><td><code id="simplify_rules_+3A_.values">.values</code></td>
<td>
<p>optional named list with values that will be substituted.</p>
</td></tr>
<tr><td><code id="simplify_rules_+3A_...">...</code></td>
<td>
<p>parameters that will be used to substitute values.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other redundancy: 
<code><a href="#topic+detect_fixed_variables">detect_fixed_variables</a>()</code>,
<code><a href="#topic+detect_redundancy">detect_redundancy</a>()</code>,
<code><a href="#topic+is_implied_by">is_implied_by</a>()</code>,
<code><a href="#topic+remove_redundancy">remove_redundancy</a>()</code>,
<code><a href="#topic+simplify_fixed_variables">simplify_fixed_variables</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rules &lt;- validator( x &gt; 0
                  , if (x &gt; 0) y == 1
                  , A %in% c("a1", "a2")
                  , if (A == "a1") y &gt; 1
                  )

simplify_rules(rules)

</code></pre>

<hr>
<h2 id='substitute_values'>substitute a value in a rule set</h2><span id='topic+substitute_values'></span>

<h3>Description</h3>

<p>Substitute values into expression, thereby simplifying the rule set.
Rules that evaluate to TRUE because of the substitution are removed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>substitute_values(.x, .values = list(...), ..., .add_constraints = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="substitute_values_+3A_.x">.x</code></td>
<td>
<p><code>validator</code> object with rules</p>
</td></tr>
<tr><td><code id="substitute_values_+3A_.values">.values</code></td>
<td>
<p>(optional) named list with values for variables to substitute</p>
</td></tr>
<tr><td><code id="substitute_values_+3A_...">...</code></td>
<td>
<p>alternative way of supplying values for variables (see examples).</p>
</td></tr>
<tr><td><code id="substitute_values_+3A_.add_constraints">.add_constraints</code></td>
<td>
<p><code>logical</code>, should values be added as constraints to the resulting validator object?</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(validate)
rules &lt;- validator( rule1 = z &gt; 1
                  , rule2 = y &gt; z
                  )
# rule1 is dropped, since it always is true
substitute_values(rules, list(z=2))

# you can also supply the values as separate parameters
substitute_values(rules, z = 2)

# you can choose to not add substituted values as a constraint
substitute_values(rules, z = 2, .add_constraints = FALSE)

rules &lt;- validator( rule1 = if (gender == "male") age &gt;= 18 )
substitute_values(rules, gender="male")
substitute_values(rules, gender="female")
</code></pre>

<hr>
<h2 id='translate_mip_lp'>translate linear rules into an lp problem</h2><span id='topic+translate_mip_lp'></span>

<h3>Description</h3>

<p>translate linear rules into an lp problem
</p>


<h3>Usage</h3>

<pre><code class='language-R'>translate_mip_lp(rules, objective = NULL, eps = 0.001)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="translate_mip_lp_+3A_rules">rules</code></td>
<td>
<p>mip rules</p>
</td></tr>
<tr><td><code id="translate_mip_lp_+3A_objective">objective</code></td>
<td>
<p>function</p>
</td></tr>
<tr><td><code id="translate_mip_lp_+3A_eps">eps</code></td>
<td>
<p>accuracy for equality/inequality</p>
</td></tr>
</table>

<hr>
<h2 id='validatetools'>Tools for validation rules</h2><span id='topic+validatetools'></span>

<h3>Description</h3>

<p><code>validatetools</code> is a utility package for managing validation rule sets
that are defined with <code><a href="validate.html#topic+validate">validate</a></code>. In production systems
validation rule sets tend to grow organically and accumulate redundant or
(partially) contradictory rules. 'validatetools' helps to identify problems
with large rule sets and includes simplification methods for resolving
issues.
</p>


<h3>Problem detection</h3>

<p>The following methods allow for problem detection:
</p>

<ul>
<li> <p><code><a href="#topic+is_infeasible">is_infeasible</a></code> checks a rule set for feasibility. An infeasible system must be corrected to be useful.
</p>
</li>
<li> <p><code><a href="#topic+detect_boundary_num">detect_boundary_num</a></code> shows for each numerical variable the allowed range of values.
</p>
</li>
<li> <p><code><a href="#topic+detect_boundary_cat">detect_boundary_cat</a></code> shows for each categorical variable the allowed range of values.
</p>
</li>
<li> <p><code><a href="#topic+detect_fixed_variables">detect_fixed_variables</a></code> shows variables whose value is fixated by the rule set.
</p>
</li>
<li> <p><code><a href="#topic+detect_redundancy">detect_redundancy</a></code> shows which rules are already implied by other rules.
</p>
</li></ul>



<h3>Simplifying rule set</h3>

<p>The following methods detect possible simplifications and apply them to a rule set.
</p>

<ul>
<li> <p><code><a href="#topic+substitute_values">substitute_values</a></code>: replace variables with constants. 
</p>
</li>
<li> <p><code><a href="#topic+simplify_fixed_variables">simplify_fixed_variables</a></code>: substitute the fixed variables with their values in a rule set.
</p>
</li>
<li> <p><code><a href="#topic+simplify_conditional">simplify_conditional</a></code>: remove redundant (parts of) conditional rules.
</p>
</li>
<li> <p><code><a href="#topic+remove_redundancy">remove_redundancy</a></code>: remove redundant rules.
</p>
</li></ul>



<h3>References</h3>

<p>Statistical Data Cleaning with Applications in R, Mark van der Loo and Edwin de Jonge, ISBN: 978-1-118-89715-7
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
