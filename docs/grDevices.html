<!DOCTYPE html><html><head><title>Help for package grDevices</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {grDevices}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#grDevices-package'>
<p>The R Graphics Devices and Support for Colours and Fonts</p></a></li>
<li><a href='#adjustcolor'><p>Adjust Colors in One or More Directions Conveniently</p></a></li>
<li><a href='#as.graphicsAnnot'><p>Coerce an Object for Graphics Annotation</p></a></li>
<li><a href='#as.raster'><p>Create a Raster Object</p></a></li>
<li><a href='#axisTicks'><p>Compute Pretty Axis Tick Scales</p></a></li>
<li><a href='#boxplot.stats'><p>Box Plot Statistics</p></a></li>
<li><a href='#bringToTop'><p>Assign Focus to a Window</p></a></li>
<li><a href='#cairo'><p>Cairographics-based SVG, PDF and PostScript Graphics Devices</p></a></li>
<li><a href='#cairoSymbolFont'><p>Specify a Symbol Font</p></a></li>
<li><a href='#check.options'><p>Set Options with Consistency Checks</p></a></li>
<li><a href='#chull'><p>Compute Convex Hull of a Set of Points</p></a></li>
<li><a href='#cm'><p>Unit Transformation</p></a></li>
<li><a href='#col2rgb'><p>Color to RGB Conversion</p></a></li>
<li><a href='#colorRamp'><p>Color interpolation</p></a></li>
<li><a href='#colors'><p>Color Names</p></a></li>
<li><a href='#contourLines'><p>Calculate Contour Lines</p></a></li>
<li><a href='#convertColor'><p>Convert between Colour Spaces</p></a></li>
<li><a href='#densCols'><p>Colors for Smooth Density Plots</p></a></li>
<li><a href='#dev'><p>Control Multiple Devices</p></a></li>
<li><a href='#dev.capabilities'><p>Query Capabilities of the Current Graphics Device</p></a></li>
<li><a href='#dev.capture'>
<p>Capture device output as a raster image</p></a></li>
<li><a href='#dev.flush'>
<p>Hold or Flush Output on an On-Screen Graphics Device</p></a></li>
<li><a href='#dev.interactive'><p>Is the Current Graphics Device Interactive?</p></a></li>
<li><a href='#dev.size'><p> Find Size of Device Surface</p></a></li>
<li><a href='#dev2'><p>Copy Graphics Between Multiple Devices</p></a></li>
<li><a href='#dev2bitmap'><p>Graphics Device for Bitmap Files via Ghostscript</p></a></li>
<li><a href='#devAskNewPage'><p> Prompt before New Page</p></a></li>
<li><a href='#Devices'><p>List of Graphical Devices</p></a></li>
<li><a href='#embedFonts'><p>Embed Fonts in PostScript and PDF</p></a></li>
<li><a href='#extendrange'><p>Extend a Numerical Range by a Small Percentage</p></a></li>
<li><a href='#getGraphicsEvent'><p>Wait for a mouse or keyboard event from a graphics window</p></a></li>
<li><a href='#glyphInfo'><p>Describe a Set of Typeset Glyphs</p></a></li>
<li><a href='#gray'><p>Gray Level Specification</p></a></li>
<li><a href='#gray.colors'><p>Gray Color Palette</p></a></li>
<li><a href='#grDevices-internal'><p>Internal <span class="pkg">grDevices</span> Functions</p></a></li>
<li><a href='#grSoftVersion'><p>Report Versions of Graphics Software</p></a></li>
<li><a href='#hcl'><p><abbr>HCL</abbr> Color Specification</p></a></li>
<li><a href='#Hershey'><p>Hershey Vector Fonts in R</p></a></li>
<li><a href='#hsv'><p>HSV Color Specification</p></a></li>
<li><a href='#Japanese'><p>Japanese characters in R</p></a></li>
<li><a href='#make.rgb'><p>Create colour spaces</p></a></li>
<li><a href='#msgWindow'><p>Manipulate a Window</p></a></li>
<li><a href='#n2mfrow'><p>Compute Default <code>mfrow</code> From Number of Plots</p></a></li>
<li><a href='#nclass'><p>Compute the Number of Classes for a Histogram</p></a></li>
<li><a href='#palette'><p>Set or View the Graphics Palette</p></a></li>
<li><a href='#Palettes'><p>Color Palettes</p></a></li>
<li><a href='#pdf'><p>PDF Graphics Device</p></a></li>
<li><a href='#pdf.options'><p>Auxiliary Function to Set/View Defaults for Arguments of pdf</p></a></li>
<li><a href='#pictex'><p>A PicTeX Graphics Driver</p></a></li>
<li><a href='#plotmath'><p>Mathematical Annotation in R</p></a></li>
<li><a href='#png'><p><abbr>BMP</abbr>, <abbr>JPEG</abbr>, <abbr>PNG</abbr> and <abbr>TIFF</abbr> graphics devices</p></a></li>
<li><a href='#postscript'><p>PostScript Graphics</p></a></li>
<li><a href='#postscriptFonts'><p>PostScript and PDF Font Families</p></a></li>
<li><a href='#pretty.Date'><p>Pretty Breakpoints for Date-Time Classes</p></a></li>
<li><a href='#ps.options'><p>Auxiliary Function to Set/View Defaults for Arguments of postscript</p></a></li>
<li><a href='#quartz'><p>macOS Quartz Device</p></a></li>
<li><a href='#quartzFonts'><p>Quartz Fonts Setup</p></a></li>
<li><a href='#recordGraphics'><p>Record Graphics Operations</p></a></li>
<li><a href='#recordPlot'><p>Record and Replay Plots</p></a></li>
<li><a href='#rgb'><p>RGB Color Specification</p></a></li>
<li><a href='#rgb2hsv'><p>RGB to HSV Conversion</p></a></li>
<li><a href='#savePlot'><p>Save Cairo X11 Plot to File</p></a></li>
<li><a href='#trans3d'><p>3D to 2D Transformation for Perspective Plots</p></a></li>
<li><a href='#Type1Font'><p>Type 1 and CID Fonts</p></a></li>
<li><a href='#windows'><p>Windows Graphics Devices</p></a></li>
<li><a href='#windows.options'><p>Auxiliary Function to Set/View Defaults for Arguments of windows()</p></a></li>
<li><a href='#windowsFonts'><p>Windows Fonts</p></a></li>
<li><a href='#x11'><p>X Window System Graphics (X11)</p></a></li>
<li><a href='#X11Fonts'><p>X11 Fonts</p></a></li>
<li><a href='#xfig'><p>XFig Graphics Device</p></a></li>
<li><a href='#xy.coords'><p>Extracting Plotting Structures</p></a></li>
<li><a href='#xyTable'><p>Multiplicities of (x,y) Points, e.g., for a Sunflower Plot</p></a></li>
<li><a href='#xyz.coords'><p>Extracting Plotting Structures</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>4.5.0</td>
</tr>
<tr>
<td>Priority:</td>
<td>base</td>
</tr>
<tr>
<td>Title:</td>
<td>The R Graphics Devices and Support for Colours and Fonts</td>
</tr>
<tr>
<td>Author:</td>
<td>R Core Team and contributors worldwide</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>R Core Team &lt;do-use-Contact-address@r-project.org&gt;</td>
</tr>
<tr>
<td>Contact:</td>
<td>R-help mailing list &lt;r-help@r-project.org&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Graphics devices and support for base and grid graphics.</td>
</tr>
<tr>
<td>License:</td>
<td>Part of R 4.5.0</td>
</tr>
<tr>
<td>Suggests:</td>
<td>KernSmooth</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Built:</td>
<td>R 4.5.0; x86_64-pc-linux-gnu; 2024-04-11 08:09:58 UTC; unix</td>
</tr>
</table>
<hr>
<h2 id='grDevices-package'>
The R Graphics Devices and Support for Colours and Fonts
</h2><span id='topic+grDevices-package'></span><span id='topic+grDevices'></span>

<h3>Description</h3>

<p>Graphics devices and support for base and grid graphics
</p>


<h3>Details</h3>

<p>This package contains functions which support both
<a href="graphics.html#topic+graphics-package">base</a> and <a href="grid.html#topic+grid-package">grid</a> graphics.
</p>
<p>For a complete list of functions, use <code>library(help = "grDevices")</code>.
</p>


<h3>Author(s)</h3>

<p>R Core Team and contributors worldwide
</p>
<p>Maintainer: R Core Team <a href="mailto:R-core@r-project.org">R-core@r-project.org</a>
</p>

<hr>
<h2 id='adjustcolor'>Adjust Colors in One or More Directions Conveniently</h2><span id='topic+adjustcolor'></span>

<h3>Description</h3>

<p>Adjust or modify a vector of colors by &ldquo;turning knobs&rdquo; on one or more
coordinates in <code class="reqn">(r,g,b,\alpha)</code> space, typically by up or down
scaling them.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adjustcolor(col, alpha.f = 1, red.f = 1, green.f = 1, blue.f = 1,
            offset = c(0, 0, 0, 0),
            transform = diag(c(red.f, green.f, blue.f, alpha.f)))</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="adjustcolor_+3A_col">col</code></td>
<td>
<p>vector of colors, in any format that <code><a href="#topic+col2rgb">col2rgb</a>()</code> accepts</p>
</td></tr>
<tr><td><code id="adjustcolor_+3A_alpha.f">alpha.f</code></td>
<td>
<p>factor modifying the opacity alpha; typically in [0,1]</p>
</td></tr>
<tr><td><code id="adjustcolor_+3A_red.f">red.f</code>, <code id="adjustcolor_+3A_green.f">green.f</code>, <code id="adjustcolor_+3A_blue.f">blue.f</code></td>
<td>
<p>factors modifying the &ldquo;red-&rdquo;,
&ldquo;green-&rdquo; or &ldquo;blue-&rdquo;ness of the colors, respectively.</p>
</td></tr>
<tr><td><code id="adjustcolor_+3A_offset">offset</code></td>
<td>
<p>numeric vector of length 4 to offset <code>x :=
      c(r,g,b,alpha)</code>, where <code>x</code> is the <code class="reqn">[0,1]</code>-scaled result of
<code><a href="#topic+col2rgb">col2rgb</a>(col, alpha=TRUE)</code>.</p>
</td></tr>
<tr><td><code id="adjustcolor_+3A_transform">transform</code></td>
<td>
<p>a 4x4 numeric matrix applied to <code>x + offset</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a color vector of the same length as <code>col</code>, effectively the
result of <code><a href="#topic+rgb">rgb</a>()</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rgb">rgb</a></code>, <code><a href="#topic+col2rgb">col2rgb</a></code>.  For more sophisticated
color constructions: <code><a href="#topic+convertColor">convertColor</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Illustrative examples :
opal &lt;- palette("default")
stopifnot(identical(adjustcolor(1:8,       0.75),
                    adjustcolor(palette(), 0.75)))
cbind(palette(), adjustcolor(1:8, 0.75))

##  alpha = 1/2 * previous alpha --&gt; opaque colors
x &lt;- palette(adjustcolor(palette(), 0.5))

sines &lt;- outer(1:20, 1:4, function(x, y) sin(x / 20 * pi * y))
matplot(sines, type = "b", pch = 21:23, col = 2:5, bg = 2:5,
        main = "Using an 'opaque ('translucent') color palette")

x. &lt;- adjustcolor(x, offset = c(0.5, 0.5, 0.5, 0), # &lt;- "more white"
                  transform = diag(c(.7, .7, .7, 0.6)))
cbind(x, x.)
op &lt;- par(bg = adjustcolor("goldenrod", offset = -rep(.4, 4)), xpd = NA)
plot(0:9, 0:9, type = "n", axes = FALSE, xlab = "", ylab = "",
     main = "adjustcolor() -&gt; translucent")
text(1:8, labels = paste0(x,"++"), col = x., cex = 8)
par(op)

## and

(M &lt;- cbind( rbind( matrix(1/3, 3, 3), 0), c(0, 0, 0, 1)))
adjustcolor(x, transform = M)

## revert to previous palette: active
palette(opal)
</code></pre>

<hr>
<h2 id='as.graphicsAnnot'>Coerce an Object for Graphics Annotation</h2><span id='topic+as.graphicsAnnot'></span>

<h3>Description</h3>

<p>Coerce an <span class="rlang"><b>R</b></span> object into a form suitable for graphics annotation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.graphicsAnnot(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.graphicsAnnot_+3A_x">x</code></td>
<td>
<p>an <span class="rlang"><b>R</b></span> object</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Expressions, calls and names (as used by <a href="#topic+plotmath">plotmath</a>) are passed
through unchanged.  All other objects with an explicit class (as
determined by <code><a href="base.html#topic+is.object">is.object</a></code>) are coerced by
<code><a href="base.html#topic+as.character">as.character</a></code> to character vectors.
</p>
<p>All the <span class="pkg">graphics</span> and <span class="pkg">grid</span> functions which use this coerce
calls and names to expressions internally.
</p>


<h3>Value</h3>

<p>A language object or a character vector.
</p>

<hr>
<h2 id='as.raster'>Create a Raster Object</h2><span id='topic+is.raster'></span><span id='topic+as.raster'></span><span id='topic+as.raster.logical'></span><span id='topic+as.raster.numeric'></span><span id='topic+as.raster.raw'></span><span id='topic+as.raster.character'></span><span id='topic+as.raster.matrix'></span><span id='topic+as.raster.array'></span>

<h3>Description</h3>

<p>Functions to create a raster object (representing a bitmap
image) and coerce other objects to a raster object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.raster(x)
as.raster(x, ...)

## S3 method for class 'matrix'
as.raster(x, max = 1, ...)
## S3 method for class 'array'
as.raster(x, max = 1, ...)

## S3 method for class 'logical'
as.raster(x, max = 1, ...)
## S3 method for class 'numeric'
as.raster(x, max = 1, ...)
## S3 method for class 'character'
as.raster(x, max = 1, ...)
## S3 method for class 'raw'
as.raster(x, max = 255L, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.raster_+3A_x">x</code></td>
<td>
<p>any <span class="rlang"><b>R</b></span> object.</p>
</td></tr>
<tr><td><code id="as.raster_+3A_max">max</code></td>
<td>
<p>number giving the maximum of the color values range.</p>
</td></tr>
<tr><td><code id="as.raster_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object of class <code>"raster"</code> is a matrix of colour values as
given by <code><a href="#topic+rgb">rgb</a></code> representing a bitmap image.
</p>
<p>It is not expected that the user will need to call these functions
directly; functions to render bitmap images in graphics packages will
make use of the <code>as.raster()</code> function to generate a raster
object from their input.
</p>
<p>The <code>as.raster()</code> function is (S3) generic so methods can be
written to convert other <span class="rlang"><b>R</b></span> objects to a raster object.
</p>
<p>The default implementation for numeric matrices interprets scalar
values on black-to-white scale.
</p>
<p>Raster objects can be subsetted like a matrix and it is
possible to assign to a subset of a raster object.
</p>
<p>There is a method for converting a raster object to a
<code><a href="base.html#topic+matrix">matrix</a></code> (of colour strings).
</p>
<p>Raster objects can be compared for equality or inequality (with each
other or with a colour string).
</p>
<p>There is a <code><a href="base.html#topic+is.na">is.na</a></code> method which returns a logical matrix
of the same dimensions as the raster object.  Note that <code>NA</code>
values are interpreted as the fully transparent colour by some (but
not all) graphics devices.
</p>


<h3>Value</h3>

<p>For <code>as.raster()</code>, a raster object.
</p>
<p>For <code>is.raster()</code>, a logical indicating whether
<code>x</code> is a raster object.
</p>


<h3>Note</h3>

<p>Raster images are internally represented row-first, which can cause
confusion when trying to manipulate a raster object.  The recommended
approach is to coerce a raster to a matrix, perform the manipulation,
then convert back to a raster.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A red gradient
as.raster(matrix(hcl(0, 80, seq(50, 80, 10)),
                 nrow = 4, ncol = 5))

# Vectors are 1-column matrices ...
#   character vectors are color names ...
as.raster(hcl(0, 80, seq(50, 80, 10)))
#   numeric vectors are greyscale ...
as.raster(1:5, max = 5)
#   logical vectors are black and white ...
as.raster(1:10 %% 2 == 0)

# ... unless nrow/ncol are supplied ...
as.raster(1:10 %% 2 == 0, nrow = 1)

# Matrix can also be logical or numeric (or raw) ...
as.raster(matrix(c(TRUE, FALSE), nrow = 3, ncol = 2))
as.raster(matrix(1:3/4, nrow = 3, ncol = 4))

# An array can be 3-plane numeric (R, G, B planes) ...
as.raster(array(c(0:1, rep(0.5, 4)), c(2, 1, 3)))

# ... or 4-plane numeric (R, G, B, A planes)
as.raster(array(c(0:1, rep(0.5, 6)), c(2, 1, 4)))

# subsetting
r &lt;- as.raster(matrix(colors()[1:100], ncol = 10))
r[, 2]
r[2:4, 2:5]

# assigning to subset
r[2:4, 2:5] &lt;- "white"

# comparison
r == "white"


</code></pre>

<hr>
<h2 id='axisTicks'>Compute Pretty Axis Tick Scales</h2><span id='topic+axisTicks'></span><span id='topic+.axisPars'></span>

<h3>Description</h3>

<p>Compute pretty axis scales and tick mark locations, the same way as
traditional <span class="rlang"><b>R</b></span> graphics do it.  This is interesting particularly for
log scale axes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>axisTicks(usr, log, axp = NULL, nint = 5)
.axisPars(usr, log = FALSE,  nintLog = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="axisTicks_+3A_usr">usr</code></td>
<td>
<p>numeric vector of length 2, with <code>c(min, max)</code> axis
extents.</p>
</td></tr>
<tr><td><code id="axisTicks_+3A_log">log</code></td>
<td>
<p>logical indicating if a log scale is (thought to be) in
use.</p>
</td></tr>
<tr><td><code id="axisTicks_+3A_axp">axp</code></td>
<td>
<p>numeric vector of length 3, <code>c(mi, ma, n.)</code>, with
identical meaning to <code><a href="graphics.html#topic+par">par</a>("?axp")</code> (where <code>?</code> is
<code>x</code> or <code>y</code>), namely &ldquo;pretty&rdquo; axis extents, and an
integer <em>code</em> <code>n.</code>.

</p>
</td></tr>
<tr><td><code id="axisTicks_+3A_nint">nint</code>, <code id="axisTicks_+3A_nintlog">nintLog</code></td>
<td>
<p>positive integer value indicating
(<em>approximately</em>) the desired number of intervals.
<code>nintLog</code> is used <b>only</b> for the case <code>log = TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>axisTicks(usr, *)</code> calls <code>.axisPars(usr, ..)</code> to set
<code>axp</code> when that is missing or <code>NULL</code>.
</p>
<p>Apart from that, <code><a href="#topic+axisTicks">axisTicks</a>()</code> just calls the C function
<code>CreateAtVector()</code> in &lsquo;<span class="file"><var>R</var>/src/main/plot.c</span>&rsquo; which is also
called by the base <span class="pkg">graphics</span> package function
<code><a href="graphics.html#topic+axis">axis</a>(side, *)</code> when its argument <code>at</code> is not
specified.
</p>
<p>Since <span class="rlang"><b>R</b></span> 4.1.0, the underlying C <code>CreateAtVector()</code> has been tuned
to provide a considerably more balanced (symmetric) set of tick locations.
</p>


<h3>Value</h3>

<p><code>axisTicks()</code> returns a numeric vector of potential axis tick
locations, of length approximately <code>nint+1</code>.
</p>
<p><code>.axisPars()</code> returns a <code><a href="base.html#topic+list">list</a></code> with components
</p>
<table>
<tr><td><code>axp</code></td>
<td>
<p>numeric vector of length 2, <code>c(min., max.)</code>, of pretty
axis extents.</p>
</td></tr>
<tr><td><code>n</code></td>
<td>
<p>integer (code), with the same meaning as
<code><a href="graphics.html#topic+par">par</a>("?axp")[3]</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="graphics.html#topic+axTicks">axTicks</a></code>,
<code><a href="graphics.html#topic+axis">axis</a></code>, and <code><a href="graphics.html#topic+par">par</a></code> all from
the <span class="pkg">graphics</span> package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>##--- Demonstrating correspondence between graphics'
##--- axis() and the graphics-engine agnostic  axisTicks() :

require("graphics")
plot(10*(0:10)); (pu &lt;- par("usr"))
aX &lt;- function(side, at, ...)
    axis(side, at = at, labels = FALSE, lwd.ticks = 2, col.ticks = 2,
         tck = 0.05, ...)
aX(1, print(xa &lt;- axisTicks(pu[1:2], log = FALSE)))  # x axis
aX(2, print(ya &lt;- axisTicks(pu[3:4], log = FALSE)))  # y axis

axisTicks(pu[3:4], log = FALSE, nint = 10)

plot(10*(0:10), log = "y"); (pu &lt;- par("usr"))
aX(2, print(ya &lt;- axisTicks(pu[3:4], log = TRUE)))  # y axis

plot(2^(0:9), log = "y"); (pu &lt;- par("usr"))
aX(2, print(ya &lt;- axisTicks(pu[3:4], log = TRUE)))  # y axis

</code></pre>

<hr>
<h2 id='boxplot.stats'>Box Plot Statistics</h2><span id='topic+boxplot.stats'></span>

<h3>Description</h3>

<p>This function is typically called by another function to
gather the statistics necessary for producing box plots,
but may be invoked separately.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>boxplot.stats(x, coef = 1.5, do.conf = TRUE, do.out = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="boxplot.stats_+3A_x">x</code></td>
<td>
<p>a numeric vector for which the boxplot will
be constructed (<code><a href="base.html#topic+NA">NA</a></code>s and <code><a href="base.html#topic+NaN">NaN</a></code>s are allowed
and omitted).</p>
</td></tr>
<tr><td><code id="boxplot.stats_+3A_coef">coef</code></td>
<td>
<p>this determines how far the plot &lsquo;whiskers&rsquo; extend out
from the box.  If <code>coef</code> is positive, the whiskers extend to the
most extreme data point which is no more than <code>coef</code> times
the length of the box away from the box. A value of zero causes
the whiskers
to extend to the data extremes (and no outliers be returned).</p>
</td></tr>
<tr><td><code id="boxplot.stats_+3A_do.conf">do.conf</code>, <code id="boxplot.stats_+3A_do.out">do.out</code></td>
<td>
<p>logicals; if <code>FALSE</code>, the <code>conf</code> or
<code>out</code> component respectively will be empty in the result.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The two &lsquo;hinges&rsquo; are versions of the first and third quartile,
i.e., close to <code><a href="stats.html#topic+quantile">quantile</a>(x, c(1,3)/4)</code>.  The hinges equal
the quartiles for odd <code class="reqn">n</code> (where <code>n &lt;- length(x)</code>) and
differ for even <code class="reqn">n</code>.  Whereas the quartiles only equal observations
for <code>n %% 4 == 1</code> (<code class="reqn">n\equiv 1 \bmod 4</code>),
the hinges do so <em>additionally</em> for <code>n %% 4 == 2</code>
(<code class="reqn">n\equiv 2 \bmod 4</code>), and are in the middle of
two observations otherwise.
</p>
<p>The notches (if requested) extend to <code>+/-1.58 IQR/sqrt(n)</code>.
This seems to be based on the same calculations as the formula with 1.57 in
Chambers <abbr>et al.</abbr> (1983, p. 62), given in
McGill <abbr>et al.</abbr> (1978, p. 16).
They are based on asymptotic normality of the median
and roughly equal sample sizes for the two medians being compared, and
are said to be rather insensitive to the underlying distributions of
the samples.  The idea appears to be to give roughly a 95% confidence
interval for the difference in two medians.
</p>


<h3>Value</h3>

<p>A list with named components as follows:
</p>
<table>
<tr><td><code>stats</code></td>
<td>
<p>a vector of length 5, containing the extreme of the
lower whisker, the lower &lsquo;hinge&rsquo;, the median, the upper
&lsquo;hinge&rsquo; and the extreme of the upper whisker.
For <code>coef = 0</code>, this vector is identical to
<code><a href="stats.html#topic+fivenum">fivenum</a>(x, na.rm = TRUE)</code>.</p>
</td></tr>
<tr><td><code>n</code></td>
<td>
<p>the number of non-<code>NA</code> observations in the sample.</p>
</td></tr>
<tr><td><code>conf</code></td>
<td>
<p>the lower and upper extremes of the &lsquo;notch&rsquo;
(<code>if(do.conf)</code>). See the details.</p>
</td></tr>
<tr><td><code>out</code></td>
<td>
<p>the values of any data points which lie beyond the
extremes of the whiskers (<code>if(do.out)</code>).</p>
</td></tr>
</table>
<p>Note that <code>stats</code> and <code>conf</code> are sorted in <em>in</em>creasing
order, unlike S, and that <code>n</code> and <code>out</code> include any
<code>+- Inf</code> values.
</p>


<h3>References</h3>

<p>Tukey, J. W. (1977).
<em>Exploratory Data Analysis</em>.
Section 2C.
</p>
<p>McGill, R., Tukey, J. W. and Larsen, W. A. (1978).
Variations of box plots.
<em>The American Statistician</em>, <b>32</b>, 12&ndash;16.
<a href="https://doi.org/10.2307/2683468">doi:10.2307/2683468</a>.
</p>
<p>Velleman, P. F. and Hoaglin, D. C. (1981).
<em>Applications, Basics and Computing of Exploratory Data Analysis</em>.
Duxbury Press.
</p>
<p>Emerson, J. D and Strenio, J. (1983).
Boxplots and batch comparison.
Chapter 3 of <em>Understanding Robust and Exploratory Data
Analysis</em>, eds. D. C. Hoaglin, F. Mosteller and J. W. Tukey.  Wiley.
</p>
<p>Chambers, J. M., Cleveland, W. S., Kleiner, B. and Tukey, P. A. (1983).
<em>Graphical Methods for Data Analysis</em>.
Wadsworth &amp; Brooks/Cole.
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+fivenum">fivenum</a></code>,
<code><a href="graphics.html#topic+boxplot">boxplot</a></code>,
<code><a href="graphics.html#topic+bxp">bxp</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(stats)
x &lt;- c(1:100, 1000)
(b1 &lt;- boxplot.stats(x))
(b2 &lt;- boxplot.stats(x, do.conf = FALSE, do.out = FALSE))
stopifnot(b1 $ stats == b2 $ stats) # do.out = FALSE is still robust
boxplot.stats(x, coef = 3, do.conf = FALSE)

## no outlier treatment:
(b3 &lt;- boxplot.stats(x, coef = 0))
stopifnot(b3$stats == fivenum(x))

## missing values are ignored
stopifnot(identical(boxplot.stats(c(x, NA)), b1))
## ... infinite values are not:
(r &lt;- boxplot.stats(c(x, -1:1/0)))
stopifnot(r$out == c(1000, -Inf, Inf))



</code></pre>

<hr>
<h2 id='bringToTop'>Assign Focus to a Window</h2><span id='topic+bringToTop'></span><span id='topic+stayOnTop'></span>

<h3>Description</h3>

<p><code>bringToTop</code> brings the specified screen device's window to the
front of the window stack (and gives it focus).  With first argument
<code>-1</code> it brings the console to the top.
</p>
<p>If <code>stay =  TRUE</code>, the window is designated as a topmost window,
i.e. it will stay on top of any regular window.  <code>stay</code> may only be used
when RGui is run in SDI mode.  This corresponds to the &ldquo;Stay on top&rdquo;
popup menu item in RGui.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bringToTop(which = dev.cur(), stay = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bringToTop_+3A_which">which</code></td>
<td>
<p>a device number, or <code>-1</code>.</p>
</td></tr>
<tr><td><code id="bringToTop_+3A_stay">stay</code></td>
<td>
<p>whether to make the window stay on top.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+msgWindow">msgWindow</a></code>, <code><a href="#topic+windows">windows</a></code>
</p>

<hr>
<h2 id='cairo'>Cairographics-based SVG, PDF and PostScript Graphics Devices</h2><span id='topic+svg'></span><span id='topic+cairo_pdf'></span><span id='topic+cairo_ps'></span>

<h3>Description</h3>

<p>Graphics devices for SVG, PDF and PostScript graphics files using
the cairo graphics API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svg(filename = if(onefile) "Rplots.svg" else "Rplot%03d.svg",
    width = 7, height = 7, pointsize = 12,
    onefile = FALSE, family = "sans", bg = "white",
    antialias = c("default", "none", "gray", "subpixel"),
    symbolfamily)

cairo_pdf(filename = if(onefile) "Rplots.pdf" else "Rplot%03d.pdf",
          width = 7, height = 7, pointsize = 12,
          onefile = TRUE, family = "sans", bg = "white",
          antialias = c("default", "none", "gray", "subpixel"),
          fallback_resolution = 300, symbolfamily)

cairo_ps(filename = if(onefile) "Rplots.ps" else "Rplot%03d.ps",
         width = 7, height = 7, pointsize = 12,
         onefile = TRUE, family = "sans", bg = "white",
         antialias = c("default", "none", "gray", "subpixel"),
         fallback_resolution = 300, symbolfamily)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cairo_+3A_filename">filename</code></td>
<td>
<p>the file path of the output file(s).
The page number is substituted if a C integer format is included in
the character string, as in the default.  (Depending on the platform,
the result must be less
than <code>PATH_MAX</code> characters long, and may be truncated if not.
See <code><a href="#topic+pdf">pdf</a></code> for further details.)  Tilde expansion
is performed where supported by the platform.</p>
</td></tr>
<tr><td><code id="cairo_+3A_width">width</code></td>
<td>
<p>the width of the device in inches.</p>
</td></tr>
<tr><td><code id="cairo_+3A_height">height</code></td>
<td>
<p>the height of the device in inches.</p>
</td></tr>
<tr><td><code id="cairo_+3A_pointsize">pointsize</code></td>
<td>
<p>the default pointsize of plotted text (in big points).</p>
</td></tr>
<tr><td><code id="cairo_+3A_onefile">onefile</code></td>
<td>
<p>should all plots appear in one file or in separate files?</p>
</td></tr>
<tr><td><code id="cairo_+3A_family">family</code></td>
<td>
<p>one of the device-independent font families,
<code>"sans"</code>, <code>"serif"</code> and <code>"mono"</code>, or a character
string specify a font family to be searched for in a
system-dependent way.
</p>
<p>On unix-alikes (incl.\ macOS), see
the &lsquo;Cairo fonts&rsquo; section in the help for <code><a href="#topic+X11">X11</a></code>.
</p>
</td></tr>
<tr><td><code id="cairo_+3A_bg">bg</code></td>
<td>
<p>the initial background colour: can be overridden by setting
<code>par("bg")</code>.</p>
</td></tr>
<tr><td><code id="cairo_+3A_antialias">antialias</code></td>
<td>
<p>string, the type of anti-aliasing (if any) to be used;
defaults to <code>"default"</code>.</p>
</td></tr>
<tr><td><code id="cairo_+3A_fallback_resolution">fallback_resolution</code></td>
<td>
<p>numeric: the resolution in dpi used when
falling back to bitmap output.</p>
</td></tr>
<tr><td><code id="cairo_+3A_symbolfamily">symbolfamily</code></td>
<td>

<p>a length-one character string that specifies the font family to
be used as the &quot;symbol&quot; font (e.g., for <a href="#topic+plotmath">plotmath</a> output).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>SVG (Scalar Vector Graphics) is a W3C standard for vector graphics.
See <a href="https://www.w3.org/Graphics/SVG/">https://www.w3.org/Graphics/SVG/</a>.  The output from
<code>svg</code> is SVG version 1.1 for <code>onefile = FALSE</code> (the
default), otherwise SVG 1.2.  (SVG 1.2 never passed the draft
stage. Few SVG viewers are capable of displaying multi-page SVG files,
and they have been dropped from SVG 2.0 (still in draft).)
</p>
<p>Note that unlike <code><a href="#topic+pdf">pdf</a></code> and <code><a href="#topic+postscript">postscript</a></code>,
<code>cairo_pdf</code> and <code>cairo_ps</code> sometimes record <em>bitmaps</em>
and not vector graphics.  On the other hand, they can
(on suitable platforms) include a much wider range of UTF-8 glyphs,
and embed the fonts used.
</p>
<p>The output produced by <code>cairo_ps(onefile = FALSE)</code> will be
encapsulated postscript on a platform with cairo &gt;= 1.6.
</p>
<p><span class="rlang"><b>R</b></span> can be compiled without support for any of these devices: this will
be reported if you attempt to use them on a system where they are not
supported.
</p>
<p>If you plot more than one page on one of these devices and do not
include something like <code>%d</code> for the sequence number in
<code>filename</code> (or set <code>onefile = TRUE</code>) the file will contain the
last page plotted.
</p>
<p>There is full support of semi-transparency, but using this is one of
the things liable to trigger bitmap output (and will always do so for
<code>cairo_ps</code>).
</p>


<h3>Value</h3>

<p>A plot device is opened: nothing is returned to the <span class="rlang"><b>R</b></span> interpreter.
</p>


<h3>Anti-aliasing</h3>

<p>Anti-aliasing is applied to both graphics and fonts.  It is generally
preferable for lines and text, but can lead to undesirable effects for
fills, e.g. for <code><a href="graphics.html#topic+image">image</a></code> plots, and so is never used for
fills.
</p>
<p><code>antialias = "default"</code> is in principle platform-dependent, but
seems most often equivalent to <code>antialias = "gray"</code>.
</p>


<h3>Conventions</h3>

<p>This section describes the implementation of the conventions for
graphics devices set out in the &lsquo;R Internals&rsquo; manual.
</p>

<ul>
<li><p> The default device size is in pixels (<code>svg</code>) or inches.
</p>
</li>
<li><p> Font sizes are in big points.
</p>
</li>
<li><p> The default font family is Helvetica.
</p>
</li>
<li><p> Line widths are multiples of 1/96 inch.
</p>
</li>
<li><p> Circle radii have a minimum of 1/72 inch.
</p>
</li>
<li><p> Colours are interpreted by the viewing application.
</p>
</li></ul>



<h3>Warning</h3>

<p>Support for all these devices are optional, so in packages they should
be used conditionally after checking <code><a href="base.html#topic+capabilities">capabilities</a>("cairo")</code>.
</p>


<h3>Note</h3>

<p>In principle these devices are independent of X11 (as is seen by their
presence on Windows).  But on a Unix-alike the cairo libraries may be
distributed as part of the X11 system and hence that (for example, on
macOS, XQuartz) may need to be installed.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Devices">Devices</a></code>, <code><a href="#topic+dev.print">dev.print</a></code>, <code><a href="#topic+pdf">pdf</a></code>,
<code><a href="#topic+postscript">postscript</a></code>
</p>
<p><code><a href="base.html#topic+capabilities">capabilities</a></code> to see if cairo is supported.
</p>

<hr>
<h2 id='cairoSymbolFont'>Specify a Symbol Font</h2><span id='topic+cairoSymbolFont'></span>

<h3>Description</h3>

<p>Specify a symbol font for a Cairo-based graphics device.
This function provides the opportunity to specify whether the font
supports Private Use Area code points.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cairoSymbolFont(family, usePUA = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cairoSymbolFont_+3A_family">family</code></td>
<td>
<p>A character vector giving the symbol font family name. </p>
</td></tr>
<tr><td><code id="cairoSymbolFont_+3A_usepua">usePUA</code></td>
<td>
<p>Does the font support Private Use Area code points?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>On Cairo-based graphics devices, when drawing with a symbol font
(e.g., <a href="#topic+plotmath">plotmath</a>),
Adobe Symbol Encoding characters are converted to UTF-8 code points.
This conversion can use Private Use Area code points or not.
It is useful to be able to specify this option because some fonts
(e.g., the OpenSymbol font that is included in LibreOffice)
have glyphs mapped to the Private Use Area and some fonts 
(e.g., Nimbus Sans L, the URW Fonts equivalent of Helvetica) do not.
</p>


<h3>Value</h3>

<p>An object of class <code>"CairoSymbolFont"</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cairo_pdf">cairo_pdf</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## If a font uses PUA, we can just specify the font name ...
cairo_pdf(symbolfamily="OpenSymbol")
dev.off()
## ... or equivalently ...
cairo_pdf(symbolfamily=cairoSymbolFont("OpenSymbol"))
dev.off()

## If a font does not use PUA, we must indicate that ...
cairo_pdf(symbolfamily=cairoSymbolFont("Nimbus Sans", usePUA=FALSE))
dev.off()

## End(Not run)
</code></pre>

<hr>
<h2 id='check.options'>Set Options with Consistency Checks</h2><span id='topic+check.options'></span>

<h3>Description</h3>

<p>Utility function for setting options with some consistency checks.
The <code><a href="base.html#topic+attributes">attributes</a></code> of the new settings in <code>new</code> are
checked for consistency with the <em>model</em> (often default)
list in <code>name.opt</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check.options(new, name.opt, reset = FALSE, assign.opt = FALSE,
              envir = .GlobalEnv,
              check.attributes = c("mode", "length"),
              override.check = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check.options_+3A_new">new</code></td>
<td>
<p>a <em>named</em> list</p>
</td></tr>
<tr><td><code id="check.options_+3A_name.opt">name.opt</code></td>
<td>
<p>character with the name of <span class="rlang"><b>R</b></span> object containing the
default list.</p>
</td></tr>
<tr><td><code id="check.options_+3A_reset">reset</code></td>
<td>
<p>logical; if <code>TRUE</code>, reset the options from
<code>name.opt</code>.  If there is more than one <span class="rlang"><b>R</b></span> object with name
<code>name.opt</code>, remove the first one in the <code><a href="base.html#topic+search">search</a>()</code> path.</p>
</td></tr>
<tr><td><code id="check.options_+3A_assign.opt">assign.opt</code></td>
<td>
<p>logical; if <code>TRUE</code>, assign the ...</p>
</td></tr>
<tr><td><code id="check.options_+3A_envir">envir</code></td>
<td>
<p>the <code><a href="base.html#topic+environment">environment</a></code> used for <code><a href="base.html#topic+get">get</a></code>
and <code><a href="base.html#topic+assign">assign</a></code>.</p>
</td></tr>
<tr><td><code id="check.options_+3A_check.attributes">check.attributes</code></td>
<td>
<p>character containing the attributes which
<code>check.options</code> should check.</p>
</td></tr>
<tr><td><code id="check.options_+3A_override.check">override.check</code></td>
<td>
<p>logical vector of length <code>length(new)</code> (or 1
which entails recycling).
For those <code>new[i]</code> where <code>override.check[i] == TRUE</code>, the
checks are overridden and the changes made anyway.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of components with the same names as the one called
<code>name.opt</code>.
The values of the components are changed from the <code>new</code> list,
as long as these pass the checks (when these are not overridden
according to <code>override.check</code>).
</p>


<h3>Note</h3>

<p>Option <code>"names"</code> is exempt from all the checks or warnings, as in
the application it can be <code>NULL</code> or a variable-length character
vector.
</p>


<h3>Author(s)</h3>

<p>Martin Maechler</p>


<h3>See Also</h3>

<p><code><a href="#topic+ps.options">ps.options</a></code> and <code><a href="#topic+pdf.options">pdf.options</a></code>,
which use <code>check.options</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>(L1 &lt;- list(a = 1:3, b = pi, ch = "CH"))
check.options(list(a = 0:2), name.opt = "L1")
check.options(NULL, reset = TRUE, name.opt = "L1")
</code></pre>

<hr>
<h2 id='chull'>Compute Convex Hull of a Set of Points</h2><span id='topic+chull'></span>

<h3>Description</h3>

<p>Computes the subset of points which lie on the convex hull of the
set of points specified.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chull(x, y = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="chull_+3A_x">x</code>, <code id="chull_+3A_y">y</code></td>
<td>
<p>coordinate vectors of points. This can be specified as two
vectors <code>x</code> and <code>y</code>, a 2-column matrix <code>x</code>, a list
<code>x</code> with two components, etc, see <code><a href="#topic+xy.coords">xy.coords</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code><a href="#topic+xy.coords">xy.coords</a></code> is used to interpret the specification of the
points. Infinite, missing and <code>NaN</code> values are not allowed.
</p>
<p>The algorithm is that given by Eddy (1977).
</p>


<h3>Value</h3>

<p>An integer vector giving the indices of the unique points lying on the
convex hull, in clockwise order.  (The first will be returned for
duplicate points.)
</p>


<h3>References</h3>

<p>Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988).
<em>The New S Language</em>.
Wadsworth &amp; Brooks/Cole.
</p>
<p>Eddy, W. F. (1977).
A new convex hull algorithm for planar sets.
<em>ACM Transactions on Mathematical Software</em>, <b>3</b>, 398&ndash;403.
<a href="https://doi.org/10.1145/355759.355766">doi:10.1145/355759.355766</a>.
</p>
<p>Eddy, W. F. (1977).
Algorithm 523: CONVEX, A new convex hull algorithm for planar sets [Z].
<em>ACM Transactions on Mathematical Software</em>, <b>3</b>, 411&ndash;412.
<a href="https://doi.org/10.1145/355759.355768">doi:10.1145/355759.355768</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+xy.coords">xy.coords</a></code>,
<code><a href="graphics.html#topic+polygon">polygon</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>X &lt;- matrix(stats::rnorm(2000), ncol = 2)
chull(X)

plot(X, cex = 0.5)
polygon(X[chull(X), ])
</code></pre>

<hr>
<h2 id='cm'>Unit Transformation</h2><span id='topic+cm'></span>

<h3>Description</h3>

<p>Translates from inches to cm (centimeters).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cm(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cm_+3A_x">x</code></td>
<td>
<p>numeric vector</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>cm(1)  # = 2.54

## Translate *from* cm *to* inches:

10 / cm(1) # -&gt; 10cm  are 3.937 inches
</code></pre>

<hr>
<h2 id='col2rgb'>Color to RGB Conversion</h2><span id='topic+col2rgb'></span>

<h3>Description</h3>

<p><span class="rlang"><b>R</b></span> color to RGB (red/green/blue) conversion.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>col2rgb(col, alpha = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="col2rgb_+3A_col">col</code></td>
<td>
<p>vector of any of the three kinds of <span class="rlang"><b>R</b></span> color specifications,
i.e., either a color name (as listed by <code><a href="#topic+colors">colors</a>()</code>), a
hexadecimal string (see Details),
or a positive integer <code>i</code> meaning <code><a href="#topic+palette">palette</a>()[i]</code>.</p>
</td></tr>
<tr><td><code id="col2rgb_+3A_alpha">alpha</code></td>
<td>
<p>logical value indicating whether the alpha channel (opacity)
values should be returned.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code><a href="base.html#topic+NA">NA</a></code> (as integer or character) and <code>"NA"</code> mean
transparent, which can also be specified as <code>"transparent"</code>.
</p>
<p>Values of <code>col</code> not of one of these types are coerced: real
vectors are coerced to integer and other types to character.  (factors
are coerced to character: in all other cases the class is
ignored when doing the coercion.)
</p>
<p>Hexadecimal string colors can be in the long hexadecimal form (e.g., 
<code>"#rrggbb"</code> or <code>"#rrggbbaa"</code>) or the short form (e.g, <code>"#rgb"</code>
or <code>"#rgba"</code>). The short form is expanded to the long form by 
replicating digits (not by adding zeroes), e.g., <code>"#rgb"</code> becomes
<code>"#rrggbb"</code>. 
</p>
<p>Zero and negative values of <code>col</code> are an error.
</p>


<h3>Value</h3>

<p>An integer matrix with three or four (for <code>alpha = TRUE</code>) rows
and number of columns the length of <code>col</code>.  If <code>col</code> has
names these are used as the column names of the return value.
</p>


<h3>Author(s)</h3>

<p>Martin Maechler and the R core team.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rgb">rgb</a></code>, <code><a href="#topic+colors">colors</a></code>, <code><a href="#topic+palette">palette</a></code>, etc.
</p>
<p>The newer, more flexible interface, <code><a href="#topic+convertColor">convertColor</a>()</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>col2rgb("peachpuff")
col2rgb(c(blu = "royalblue", reddish = "tomato"))  # note: colnames

col2rgb(1:8)  # the ones from the palette() (if the default)

col2rgb(paste0("gold", 1:4))

col2rgb("#08a0ff")
## all three kinds of color specifications:
col2rgb(c(red = "red", hex = "#abcdef"))
col2rgb(c(palette = 1:3))

# long and short form of hexadecimal notation
col2rgb(c(long = "#559955", short = "#595"))
# with alpha
col2rgb(c(long = "#559955BB", short = "#595B"), alpha = TRUE)

##-- NON-INTRODUCTORY examples --

grC &lt;- col2rgb(paste0("gray", 0:100))
table(print(diff(grC["red",])))  # '2' or '3': almost equidistant
## The 'named' grays are in between {"slate gray" is not gray, strictly}
col2rgb(c(g66 = "gray66", darkg =  "dark gray", g67 = "gray67",
          g74 = "gray74", gray  =       "gray", g75 = "gray75",
          g82 = "gray82", light = "light gray", g83 = "gray83"))

crgb &lt;- col2rgb(cc &lt;- colors())
colnames(crgb) &lt;- cc
t(crgb)  # The whole table

## How many names are 'aliases' of each other?
ccodes &lt;- c(256^(2:0) %*% crgb)
cl &lt;- split(cc, ccodes)
length(cl) # 502 distinct colors
table(tcc &lt;- lengths(cl))
## All the multiply named colors:
clmult &lt;- cl[tcc &gt;= 2]
names(clmult) &lt;- sapply(clmult, function(x) paste(crgb[,x[1]], collapse = ","))
utils::str(clmult)

## Look at the color cube:
tc &lt;- t(crgb[, !duplicated(ccodes)])
cNms &lt;- rownames(tc)
if(requireNamespace("lattice", quietly = TRUE))
    lattice::cloud(blue ~ red + green, data = as.data.frame(tc), col = cNms)
## The 8 corners of the color cube:
isC &lt;- rowSums(tc == 0 | tc == 255) == 3
cNms[isC] # "white" "black" "blue" "cyan" "green" "magenta" "red" "yellow"

table(is.gray &lt;- tc[,1] == tc[,2] &amp; tc[,2] == tc[,3])  # (397, 105)

## Not run: ## Look at the color cube dynamically:
 if(require("rgl")) {
   open3d(windowRect = c(50,50, 950, 950)) # large, so we see details
   plot3d (tc, col = cNms, size = 11) # --&gt; rotate w/ mouse; enlarged corners:
   points3d(tc[isC,], col = cNms[isC], size=22)
   bg3d("darkgray") # (to "see more"); rotate around gray-axis:
   play3d(spin3d(axis = c(1, 1, 1), rpm = 2), duration = 30)
   if(FALSE) # add all names {zoom in with 2nd mouse button!}
     text3d(tc[!is.gray,], texts = cNms[!is.gray],
                             col = cNms[!is.gray], adj=-1/4, cex = 1/2)
   if(FALSE) { ## next version of {rgl}
     hover3d(tc, labels = cNms)
     message("Move mouse over plot to identify points.")
   } else { ##  click on blob to see colors()' name:
     identify3d(tc, labels=cNms)
   }
 }

## End(Not run)
</code></pre>

<hr>
<h2 id='colorRamp'>Color interpolation</h2><span id='topic+colorRamp'></span><span id='topic+colorRampPalette'></span>

<h3>Description</h3>

<p>These functions return functions that interpolate a set of given
colors to create new color palettes (like <code><a href="#topic+topo.colors">topo.colors</a></code>) and
color ramps, functions that map the interval <code class="reqn">[0, 1]</code> to colors
(like <code><a href="#topic+grey">grey</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>colorRamp(colors, bias = 1, space = c("rgb", "Lab"),
          interpolate = c("linear", "spline"), alpha = FALSE)
colorRampPalette(colors, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="colorRamp_+3A_colors">colors</code></td>
<td>
<p>colors to interpolate; must be a valid argument to
<code><a href="#topic+col2rgb">col2rgb</a>()</code>.</p>
</td></tr>
<tr><td><code id="colorRamp_+3A_bias">bias</code></td>
<td>
<p>a positive number.  Higher values give more widely spaced
colors at the high end.</p>
</td></tr>
<tr><td><code id="colorRamp_+3A_space">space</code></td>
<td>
<p>a character string; interpolation in RGB or <abbr>CIE</abbr> Lab
color spaces.</p>
</td></tr>
<tr><td><code id="colorRamp_+3A_interpolate">interpolate</code></td>
<td>
<p>use spline or linear interpolation.</p>
</td></tr>
<tr><td><code id="colorRamp_+3A_alpha">alpha</code></td>
<td>
<p>logical: should alpha channel (opacity) values be
returned?   It is an error to give a true value if
<code>space</code> is specified.</p>
</td></tr>
<tr><td><code id="colorRamp_+3A_...">...</code></td>
<td>
<p>arguments to pass to <code>colorRamp</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <abbr>CIE</abbr> Lab color space is approximately perceptually uniform, and so
gives smoother and more uniform color ramps. On the other hand,
palettes that vary from one hue to another via white may have a more
symmetrical appearance in RGB space.
</p>
<p>The conversion formulas in this function do not appear to be
completely accurate and the color ramp may not reach the extreme
values in Lab space.  Future changes in the <span class="rlang"><b>R</b></span> color model may change
the colors produced with <code>space = "Lab"</code>.
</p>


<h3>Value</h3>

<p><code>colorRamp</code> returns a <code><a href="base.html#topic+function">function</a></code> with argument a
vector of values between 0 and 1 that are mapped to a numeric matrix
of RGB color values with one row per color and 3 or 4 columns.
</p>
<p><code>colorRampPalette</code> returns a function that takes an integer
argument (the required number of colors) and returns a character
vector of colors (see <code><a href="#topic+rgb">rgb</a></code>) interpolating the given sequence
(similar to <code><a href="#topic+heat.colors">heat.colors</a></code> or <code><a href="#topic+terrain.colors">terrain.colors</a></code>).
</p>


<h3>See Also</h3>

<p>Good starting points for interpolation are the &ldquo;sequential&rdquo;
and &ldquo;diverging&rdquo; ColorBrewer palettes in the
<a href="https://CRAN.R-project.org/package=RColorBrewer"><span class="pkg">RColorBrewer</span></a> package.
</p>
<p><code><a href="stats.html#topic+splinefun">splinefun</a></code> or <code><a href="stats.html#topic+approxfun">approxfun</a></code> are used for
interpolation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Both return a *function* :
colorRamp(c("red", "green"))( (0:4)/4 ) ## (x) , x in [0,1]
colorRampPalette(c("blue", "red"))( 4 ) ## (n)
## a ramp in opacity of blue values
colorRampPalette(c(rgb(0,0,1,1), rgb(0,0,1,0)), alpha = TRUE)(8)

require(graphics)

## Here space="rgb" gives palettes that vary only in saturation,
## as intended.
## With space="Lab" the steps are more uniform, but the hues
## are slightly purple.
filled.contour(volcano,
               color.palette =
                   colorRampPalette(c("red", "white", "blue")),
               asp = 1)
filled.contour(volcano,
               color.palette =
                   colorRampPalette(c("red", "white", "blue"),
                                    space = "Lab"),
               asp = 1)

## Interpolating a 'sequential' ColorBrewer palette
YlOrBr &lt;- c("#FFFFD4", "#FED98E", "#FE9929", "#D95F0E", "#993404")
filled.contour(volcano,
               color.palette = colorRampPalette(YlOrBr, space = "Lab"),
               asp = 1)
filled.contour(volcano,
               color.palette = colorRampPalette(YlOrBr, space = "Lab",
                                                bias = 0.5),
               asp = 1)

## 'jet.colors' is "as in Matlab"
## (and hurting the eyes by over-saturation)
jet.colors &lt;-
  colorRampPalette(c("#00007F", "blue", "#007FFF", "cyan",
                     "#7FFF7F", "yellow", "#FF7F00", "red", "#7F0000"))
filled.contour(volcano, color.palette = jet.colors, asp = 1)

## space="Lab" helps when colors don't form a natural sequence
m &lt;- outer(1:20,1:20,function(x,y) sin(sqrt(x*y)/3))
rgb.palette &lt;- colorRampPalette(c("red", "orange", "blue"),
                                space = "rgb")
Lab.palette &lt;- colorRampPalette(c("red", "orange", "blue"),
                                space = "Lab")
filled.contour(m, col = rgb.palette(20))
filled.contour(m, col = Lab.palette(20))
</code></pre>

<hr>
<h2 id='colors'>Color Names</h2><span id='topic+colors'></span><span id='topic+colours'></span>

<h3>Description</h3>

<p>Returns the built-in color names which <span class="rlang"><b>R</b></span> knows about.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>colors (distinct = FALSE)
colours(distinct = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="colors_+3A_distinct">distinct</code></td>
<td>
<p>logical indicating if the colors returned should all be
distinct; e.g., <code>"snow"</code> and <code>"snow1"</code> are effectively the
same point in the <code class="reqn">(0:255)^3</code> RGB space.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These color names can be used with a <code>col=</code> specification in
graphics functions.
</p>
<p>An even wider variety of colors can be created with primitives
<code>rgb</code>, <code>hsv</code> and <code>hcl</code>, or the derived <code>rainbow</code>,
<code>heat.colors</code>, etc.
</p>
<p><code>"transparent"</code> is not a color and so not listed, but it is
accepted as a color specification.
</p>


<h3>Value</h3>

<p>A character vector containing all the built-in color names.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+palette">palette</a></code> for setting the &lsquo;palette&rsquo; of colors for
<code>col=<var>index</var></code> specifications.
</p>
<p><code><a href="#topic+rgb">rgb</a></code>, <code><a href="#topic+hsv">hsv</a></code>, <code><a href="#topic+hcl">hcl</a></code>, <code><a href="#topic+gray">gray</a></code>;
<code><a href="#topic+rainbow">rainbow</a></code> for a nice example;
and <code><a href="#topic+heat.colors">heat.colors</a></code>, <code><a href="#topic+topo.colors">topo.colors</a></code> for images.
</p>
<p><code><a href="#topic+col2rgb">col2rgb</a></code> for translating to RGB numbers and extended
examples.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cl &lt;- colors()
length(cl); cl[1:20]

length(cl. &lt;- colors(TRUE))
## only 502 of the 657 named ones

## ----------- Show all named colors and more:
demo("colors")
## -----------
</code></pre>

<hr>
<h2 id='contourLines'>Calculate Contour Lines</h2><span id='topic+contourLines'></span>

<h3>Description</h3>

<p>Calculate contour lines for a given set of data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>contourLines(x = seq(0, 1, length.out = nrow(z)),
             y = seq(0, 1, length.out = ncol(z)),
             z, nlevels = 10,
             levels = pretty(range(z, na.rm = TRUE), nlevels))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="contourLines_+3A_x">x</code>, <code id="contourLines_+3A_y">y</code></td>
<td>
<p>locations of grid lines at which the values in <code>z</code> are
measured.  These must be in ascending order.  By default, equally
spaced values from 0 to 1 are used.  If <code>x</code> is a <code>list</code>,
its components <code>x$x</code> and <code>x$y</code> are used for <code>x</code>
and <code>y</code>, respectively. If the list has component <code>z</code> this
is used for <code>z</code>.</p>
</td></tr>
<tr><td><code id="contourLines_+3A_z">z</code></td>
<td>
<p>a matrix containing the values to be plotted (<code>NA</code>s are
allowed).  Note that <code>x</code> can be used instead of <code>z</code> for
convenience.</p>
</td></tr>
<tr><td><code id="contourLines_+3A_nlevels">nlevels</code></td>
<td>
<p>number of contour levels desired <b>iff</b>
<code>levels</code> is not supplied.</p>
</td></tr>
<tr><td><code id="contourLines_+3A_levels">levels</code></td>
<td>
<p>numeric vector of levels at which to draw contour
lines.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>contourLines</code> draws nothing, but returns a set of contour lines.
</p>
<p>There is currently no documentation about the algorithm.
The source code is in &lsquo;<span class="file"><var><a href="base.html#topic+R_HOME">R_HOME</a></var>/src/main/plot3d.c</span>&rsquo;.
</p>


<h3>Value</h3>

<p>A <code><a href="base.html#topic+list">list</a></code> of contours, each itself a <code>list</code> with elements:
</p>
<table>
<tr><td><code>level</code></td>
<td>
<p>The contour level.</p>
</td></tr>
<tr><td><code>x</code></td>
<td>
<p>The x-coordinates of the contour.</p>
</td></tr>
<tr><td><code>y</code></td>
<td>
<p>The y-coordinates of the contour.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="base.html#topic+options">options</a>("max.contour.segments")</code> for the maximal
complexity of a single contour line.
</p>
<p><code><a href="graphics.html#topic+contour">contour</a></code>: Its &lsquo;Examples&rsquo; demonstrate how
<code>contourLines()</code> can be drawn and are the same (as those from
<code>contour()</code>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- 10*1:nrow(volcano)
y &lt;- 10*1:ncol(volcano)
cl &lt;- contourLines(x, y, volcano)
## summarize the sizes of each the contour lines :
cbind(lev = vapply(cl, `[[`, .5, "level"),
       n  = vapply(cl, function(l) length(l$x), 1))

z &lt;- outer(-9:25, -9:25)
pretty(range(z), 10) # -300 -200 ... 600 700
utils::str(c2 &lt;- contourLines(z))
   # no segments for {-300, 700};
   #  2 segments for {-200, -100, 0}
   #  1 segment  for  100:600
</code></pre>

<hr>
<h2 id='convertColor'>Convert between Colour Spaces</h2><span id='topic+convertColor'></span><span id='topic+colorspaces'></span>

<h3>Description</h3>

<p>Convert colours between their representations in standard
colour spaces.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convertColor(color, from, to, from.ref.white, to.ref.white,
             scale.in = 1, scale.out = 1, clip = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convertColor_+3A_color">color</code></td>
<td>
<p>A matrix whose rows specify colors.
The function will also accept a data frame, but will silently
convert to a matrix internally. </p>
</td></tr>
<tr><td><code id="convertColor_+3A_from">from</code>, <code id="convertColor_+3A_to">to</code></td>
<td>
<p>Input and output color spaces.  See &lsquo;Details&rsquo; below.</p>
</td></tr>
<tr><td><code id="convertColor_+3A_from.ref.white">from.ref.white</code>, <code id="convertColor_+3A_to.ref.white">to.ref.white</code></td>
<td>
<p>Reference whites or <code>NULL</code>
if these are built in to the definition, as for RGB
spaces. <code>D65</code> is the default, see &lsquo;Details&rsquo; for others.
</p>
</td></tr>
<tr><td><code id="convertColor_+3A_scale.in">scale.in</code>, <code id="convertColor_+3A_scale.out">scale.out</code></td>
<td>
<p>Input is divided by <code>scale.in</code>, output
is multiplied by <code>scale.out</code>. Use <code>NULL</code> to suppress
scaling when input or output is not numeric.</p>
</td></tr>
<tr><td><code id="convertColor_+3A_clip">clip</code></td>
<td>
<p>If <code>TRUE</code>, truncate RGB output to [0,1],
<code>FALSE</code> return out-of-range RGB, <code>NA</code> set out of range
colors to <code>NaN</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Color spaces are specified by objects of class <code>colorConverter</code>,
created by <code><a href="#topic+colorConverter">colorConverter</a></code> or <code><a href="#topic+make.rgb">make.rgb</a></code>.
Built-in color spaces may be referenced by strings: <code>"XYZ"</code>,
<code>"sRGB"</code>, <code>"Apple RGB"</code>, <code>"CIE RGB"</code>, <code>"Lab"</code>,
<code>"Luv"</code>.  The converters for these colour spaces are in the object
<code>colorspaces</code>.
</p>
<p>The <code>"sRGB"</code> color space is that used by standard PC monitors.
<code>"Apple RGB"</code> is used by Apple monitors. <code>"Lab"</code> and
<code>"Luv"</code> are approximately perceptually uniform
spaces standardized by the Commission Internationale d'Eclairage.
<code>XYZ</code> is a 1931 <abbr>CIE</abbr> standard capable of representing
all visible colors (and then some), but not in a perceptually uniform
way.
</p>
<p>The <code>Lab</code> and <code>Luv</code> spaces describe colors of objects, and
so require the specification of a reference &lsquo;white light&rsquo;
color.  Illuminant <code>D65</code> is a standard indirect daylight,
Illuminant <code>D50</code> is close to direct sunlight, and Illuminant
<code>A</code> is the light from a standard incandescent bulb. Other
standard <abbr>CIE</abbr> illuminants supported are <code>B</code>, <code>C</code>, <code>E</code> and
<code>D55</code>.  RGB colour spaces are defined relative to a particular
reference white, and can be only approximately translated to other
reference whites.  The von Kries chromatic adaptation algorithm is used
for this.  Prior to <span class="rlang"><b>R</b></span> 3.6, color conversions involving color spaces
created with <code><a href="#topic+make.rgb">make.rgb</a></code> were carried out assuming a <code>D65</code>
illuminant, irrespective of the actual illuminant used in the creation of the
color space.  This affected the built-in <code>"CIE RGB"</code> color space.
</p>
<p>The RGB color spaces are specific to a particular class of display.
An RGB space cannot represent all colors, and the <code>clip</code> option
controls what is done to out-of-range colors.
</p>
<p>For the named color spaces <code>color</code> must be a matrix of values in
the <code>from</code> color space: in particular opaque colors.
</p>


<h3>Value</h3>

<p>A 3-column matrix whose rows specify the colors.
</p>


<h3>References</h3>

<p>For all the conversion equations <a href="http://www.brucelindbloom.com/">http://www.brucelindbloom.com/</a>.
</p>
<p>For the white points
<a href="https://web.archive.org/web/20190613001950/http://efg2.com/Lab/Graphics/Colors/Chromaticity.htm">https://web.archive.org/web/20190613001950/http://efg2.com/Lab/Graphics/Colors/Chromaticity.htm</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+col2rgb">col2rgb</a></code> and <code><a href="#topic+colors">colors</a></code> for ways to specify
colors in graphics.
</p>
<p><code><a href="#topic+make.rgb">make.rgb</a></code> for specifying other colour spaces.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## The displayable colors from four planes of Lab space
ab &lt;- expand.grid(a = (-10:15)*10,
                  b = (-15:10)*10)
require(graphics); require(stats) # for na.omit
par(mfrow = c(2, 2), mar = .1+c(3, 3, 3, .5), mgp = c(2,  .8,  0))

Lab &lt;- cbind(L = 20, ab)
srgb &lt;- convertColor(Lab, from = "Lab", to = "sRGB", clip = NA)
clipped &lt;- attr(na.omit(srgb), "na.action")
srgb[clipped, ] &lt;- 0
cols &lt;- rgb(srgb[, 1], srgb[, 2], srgb[, 3])
image((-10:15)*10, (-15:10)*10, matrix(1:(26*26), ncol = 26), col = cols,
  xlab = "a", ylab = "b", main = "Lab: L=20")

Lab &lt;- cbind(L = 40, ab)
srgb &lt;- convertColor(Lab, from = "Lab", to = "sRGB", clip = NA)
clipped &lt;- attr(na.omit(srgb), "na.action")
srgb[clipped, ] &lt;- 0
cols &lt;- rgb(srgb[, 1], srgb[, 2], srgb[, 3])
image((-10:15)*10, (-15:10)*10, matrix(1:(26*26), ncol = 26), col = cols,
  xlab = "a", ylab = "b", main = "Lab: L=40")

Lab &lt;- cbind(L = 60, ab)
srgb &lt;- convertColor(Lab, from = "Lab", to = "sRGB", clip = NA)
clipped &lt;- attr(na.omit(srgb), "na.action")
srgb[clipped, ] &lt;- 0
cols &lt;- rgb(srgb[, 1], srgb[, 2], srgb[, 3])
image((-10:15)*10, (-15:10)*10, matrix(1:(26*26), ncol = 26), col = cols,
  xlab = "a", ylab = "b", main = "Lab: L=60")

Lab &lt;- cbind(L = 80, ab)
srgb &lt;- convertColor(Lab, from = "Lab", to = "sRGB", clip = NA)
clipped &lt;- attr(na.omit(srgb), "na.action")
srgb[clipped, ] &lt;- 0
cols &lt;- rgb(srgb[, 1], srgb[, 2], srgb[, 3])
image((-10:15)*10, (-15:10)*10, matrix(1:(26*26), ncol = 26), col = cols,
  xlab = "a", ylab = "b", main = "Lab: L=80")

cols &lt;- t(col2rgb(palette())); rownames(cols) &lt;- palette(); cols
zapsmall(lab &lt;- convertColor(cols, from = "sRGB", to = "Lab", scale.in = 255))
stopifnot(all.equal(cols, # converting back.. getting the original:
   round(convertColor(lab, from = "Lab", to = "sRGB", scale.out = 255)),
                    check.attributes = FALSE))
</code></pre>

<hr>
<h2 id='densCols'>Colors for Smooth Density Plots</h2><span id='topic+densCols'></span><span id='topic+blues9'></span>

<h3>Description</h3>

<p><code>densCols</code> produces a vector containing colors which encode the
local densities at each point in a scatterplot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>densCols(x, y = NULL, nbin = 128, bandwidth,
         colramp = colorRampPalette(blues9[-(1:3)]))
blues9
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="densCols_+3A_x">x</code>, <code id="densCols_+3A_y">y</code></td>
<td>
<p>the <code>x</code> and <code>y</code> arguments provide the x and y
coordinates of the points.  Any reasonable way of defining the
coordinates is acceptable.  See the function <code><a href="#topic+xy.coords">xy.coords</a></code>
for details.  If supplied separately, they must be of the same length.</p>
</td></tr>
<tr><td><code id="densCols_+3A_nbin">nbin</code></td>
<td>
<p>numeric vector of length one (for both directions) or two
(for x and y separately) specifying the number of equally spaced
grid points for the density estimation; directly used as
<code>gridsize</code> in <code><a href="KernSmooth.html#topic+bkde2D">bkde2D</a>()</code>.</p>
</td></tr>
<tr><td><code id="densCols_+3A_bandwidth">bandwidth</code></td>
<td>
<p>numeric vector (length 1 or 2) of smoothing bandwidth(s).
If missing, a more or less useful default is used. <code>bandwidth</code>
is subsequently passed to function <code><a href="KernSmooth.html#topic+bkde2D">bkde2D</a></code>.</p>
</td></tr>
<tr><td><code id="densCols_+3A_colramp">colramp</code></td>
<td>
<p>function accepting an integer <code>n</code> as an argument and
returning <code>n</code> colors.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>densCols</code> computes and returns the set of colors that will be
used in plotting, calling <code><a href="KernSmooth.html#topic+bkde2D">bkde2D</a>(*,
  bandwidth, gridsize = nbin, ..)</code> from package <a href="https://CRAN.R-project.org/package=KernSmooth"><span class="pkg">KernSmooth</span></a>.
</p>
<p><code>blues9</code> is a set of 9 color shades of blue used as the default in
plotting.
</p>


<h3>Value</h3>

<p><code>densCols</code> returns a vector of length <code>nrow(x)</code> that
contains colors to be used in a subsequent scatterplot.  Each color
represents the local density around the corresponding point.
</p>


<h3>Author(s)</h3>

<p>Florian Hahne at FHCRC, originally</p>


<h3>See Also</h3>

<p><code><a href="KernSmooth.html#topic+bkde2D">bkde2D</a></code> from package <a href="https://CRAN.R-project.org/package=KernSmooth"><span class="pkg">KernSmooth</span></a>;
further, <code><a href="graphics.html#topic+smoothScatter">smoothScatter</a>()</code> (package <span class="pkg">graphics</span>) which
builds on the same computations as <code>densCols</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
x1  &lt;- matrix(rnorm(1e3), ncol = 2)
x2  &lt;- matrix(rnorm(1e3, mean = 3, sd = 1.5), ncol = 2)
x   &lt;- rbind(x1, x2)

dcols &lt;- densCols(x)
graphics::plot(x, col = dcols, pch = 20, main = "n = 1000")
</code></pre>

<hr>
<h2 id='dev'>Control Multiple Devices</h2><span id='topic+dev.cur'></span><span id='topic+dev.list'></span><span id='topic+dev.next'></span><span id='topic+dev.prev'></span><span id='topic+dev.off'></span><span id='topic+dev.set'></span><span id='topic+dev.new'></span><span id='topic+graphics.off'></span>

<h3>Description</h3>

<p>These functions provide control over multiple graphics devices.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dev.cur()
dev.list()
dev.next(which = dev.cur())
dev.prev(which = dev.cur())
dev.off(which = dev.cur())
dev.set(which = dev.next())
dev.new(..., noRStudioGD = FALSE)
graphics.off()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dev_+3A_which">which</code></td>
<td>
<p>An integer specifying a device number.</p>
</td></tr>
<tr><td><code id="dev_+3A_...">...</code></td>
<td>
<p>arguments to be passed to the device selected.</p>
</td></tr>
<tr><td><code id="dev_+3A_norstudiogd">noRStudioGD</code></td>
<td>
<p>Do not use the RStudio graphics device even if
specified as the default device: it does not accept arguments such
as <code>width</code> and <code>height</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Only one device is the &lsquo;active&rsquo; device: this is the device in
which all graphics operations occur.  There is a <code>"null device"</code>
which is always open but is really a placeholder: any attempt to use
it will open a new device specified by
<code><a href="base.html#topic+getOption">getOption</a>("device")</code>.
</p>
<p>Devices are associated with a name (e.g., <code>"X11"</code> or
<code>"postscript"</code>) and a number in the range 1 to 63; the
<code>"null device"</code> is always device 1.  Once a device has been
opened the null device is not considered as a possible active device.
There is a list of open devices, and this is considered as a circular
list not including the null device.  <code>dev.next</code> and
<code>dev.prev</code> select the next open device in the appropriate
direction, unless no device is open.
</p>
<p><code>dev.off</code> shuts down the specified (by default the current)
device.  If the current device is shut down and any other devices are
open, the next open device is made current.  It is an error to
attempt to shut down device 1.  <code>graphics.off()</code> shuts down all
open graphics devices.  Normal termination of a session runs the
internal equivalent of <code>graphics.off()</code>.
</p>
<p><code>dev.set</code> makes the specified device the active device.  If there
is no device with that number, it is equivalent to <code>dev.next</code>.
If <code>which = 1</code> it opens a new device and selects that.
</p>
<p><code>dev.new</code> opens a new device.  Normally <span class="rlang"><b>R</b></span> will open a new device
automatically when needed, but this enables you to open further
devices in a platform-independent way.  (For which device is used see
<code><a href="base.html#topic+getOption">getOption</a>("device")</code>.)  Note that care is needed with
file-based devices such as <code><a href="#topic+pdf">pdf</a></code> and
<code><a href="#topic+postscript">postscript</a></code> and in that case file names such as
&lsquo;<span class="file">Rplots.pdf</span>&rsquo;, &lsquo;<span class="file">Rplots1.pdf</span>&rsquo;, ..., &lsquo;<span class="file">Rplots999.pdf</span>&rsquo; are
tried in turn.  Only named arguments are passed to the device, and
then only if they match the argument list of the device.  Even so,
care is needed with the interpretation of e.g. <code>width</code>, and for
the standard bitmap devices <code>units = "in", res = 72</code> is forced if
neither is supplied but both <code>width</code> and <code>height</code> are.
</p>


<h3>Value</h3>

<p><code>dev.cur</code> returns a length-one named integer vector giving the
number and name of the active device, or 1, the null device, if none
is active.
</p>
<p><code>dev.list</code> returns the numbers of all open devices, except device
1, the null device.  This is a numeric vector with a
<code><a href="base.html#topic+names">names</a></code> attribute giving the device names, or <code>NULL</code> is
there is no open device.
</p>
<p><code>dev.next</code> and <code>dev.prev</code> return the number and name of the
next / previous device in the list of devices.  This will be the null
device if and only if there are no open devices.
</p>
<p><code>dev.off</code> returns the number and name of the new active device
(after the specified device has been shut down).
</p>
<p><code>dev.set</code> returns the number and name of the new active device.
</p>
<p><code>dev.new</code> returns the return value of the device opened, usually
invisible <code>NULL</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Devices">Devices</a></code>, such as <code><a href="#topic+postscript">postscript</a></code>, etc.
</p>
<p><code><a href="graphics.html#topic+layout">layout</a></code> and its links for setting up plotting regions
on the current device.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: ## Unix-specific example
x11()
plot(1:10)
x11()
plot(rnorm(10))
dev.set(dev.prev())
abline(0, 1) # through the 1:10 points
dev.set(dev.next())
abline(h = 0, col = "gray") # for the residual plot
dev.set(dev.prev())
dev.off(); dev.off() #- close the two X devices

## End(Not run)
</code></pre>

<hr>
<h2 id='dev.capabilities'>Query Capabilities of the Current Graphics Device</h2><span id='topic+dev.capabilities'></span>

<h3>Description</h3>

<p>Query the capabilities of the current graphics device.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dev.capabilities(what = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dev.capabilities_+3A_what">what</code></td>
<td>
<p>a character vector partially matching the names of the
components listed in section &lsquo;Value&rsquo;, or <code>NULL</code> which
lists all available capabilities.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The capabilities have to be specified by the author of the graphics
device, unless they can be deduced from missing hooks.  Thus they will
often by returned as <code>NA</code>, and may reflect the maximal
capabilities of the underlying device where several output formats are
supported by one device.
</p>
<p>Most recent devices support semi-transparent colours provided the
graphics format does (which PostScript does not).  On the other hand,
relatively few graphics formats support (fully or semi-) transparent
backgrounds: generally the latter is found only in PDF and PNG plots.
</p>


<h3>Value</h3>

<p>A named list with some or all of the following components, any of which may
take value <code>NA</code>:
</p>
<table>
<tr><td><code>semiTransparency</code></td>
<td>
<p>logical:  Does the device support
semi-transparent colours?</p>
</td></tr>
<tr><td><code>transparentBackground</code></td>
<td>
<p>character:  Does the device support
(semi)-transparent backgrounds?  Possible values are <code>"no"</code>,
<code>"fully"</code> (only full transparency) and <code>"semi"</code>
(semi-transparent background colours are supported).</p>
</td></tr>
<tr><td><code>rasterImage</code></td>
<td>
<p>character: To what extent does the device support
raster images as used by <code><a href="graphics.html#topic+rasterImage">rasterImage</a></code> and
<code><a href="grid.html#topic+grid.raster">grid.raster</a></code>?  Possible values <code>"no"</code>, <code>"yes"</code> and
<code>"non-missing"</code> (support only for arrays without any missing
values).</p>
</td></tr>
<tr><td><code>capture</code></td>
<td>
<p>logical:  Does the current device
support raster capture as used by <code><a href="grid.html#topic+grid.cap">grid.cap</a></code>?</p>
</td></tr>
<tr><td><code>locator</code></td>
<td>
<p>logical:  Does the current device
support <code><a href="graphics.html#topic+locator">locator</a></code> and <code><a href="graphics.html#topic+identify">identify</a></code>?</p>
</td></tr>
<tr><td><code>events</code></td>
<td>
<p>character:  Which events can be generated on this device?
Currently this will be a subset of <code>c("MouseDown",
      "MouseMove", "MouseUp", "Keybd")</code>, but other events may be
supported in the future.  </p>
</td></tr>
<tr><td><code>patterns</code></td>
<td>
<p>character:  Does the device support pattern fills?
One or more of
<code>c("LinearGradient", "RadialGradient", "TilingPattern")</code>
May also be <code>FALSE</code>.</p>
</td></tr>
<tr><td><code>clippingPaths</code></td>
<td>
<p>logical:  Does the device support clipping
paths?</p>
</td></tr>
<tr><td><code>masks</code></td>
<td>
<p>character:  Does the device support masks?
One or more of 
<code>c("alpha", "luminance")</code>
May also be <code>FALSE</code>.</p>
</td></tr>
<tr><td><code>compositing</code></td>
<td>
<p>character: Does the device support compositing
operators?
There are many possible operators and devices may support any
subset.  For example the <code><a href="#topic+pdf">pdf</a></code> device supports
a set of &ldquo;blend modes&rdquo; whereas Cairo-based devices
support Porter-Duff operators as well.
May also be <code>FALSE</code>.</p>
</td></tr>
<tr><td><code>transformations</code></td>
<td>
<p>logical:  Does the devices support affine
transformations ?</p>
</td></tr>
<tr><td><code>paths</code></td>
<td>
<p>logical:  Does the device support stroking and filling
paths?</p>
</td></tr>
<tr><td><code>glyphs</code></td>
<td>
<p>logical:  Does the device support rendering glyphs? </p>
</td></tr>
</table>


<h3>See Also</h3>

<p>See <code><a href="#topic+getGraphicsEvent">getGraphicsEvent</a></code> for details on interactive events.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dev.capabilities()
</code></pre>

<hr>
<h2 id='dev.capture'>
Capture device output as a raster image
</h2><span id='topic+dev.capture'></span>

<h3>Description</h3>

<p><code>dev.capture</code> captures the current contents of a graphics device
as a raster (bitmap) image.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dev.capture(native = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dev.capture_+3A_native">native</code></td>
<td>
<p>Logical. If <code>FALSE</code> the result is a matrix of R
color names, if <code>TRUE</code> the output is returned as a
<code>nativeRaster</code> object which is more efficient for plotting, but
not portable.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Not all devices support capture of the output as raster bitmaps.
Typically, only image-based devices do and even not all of them.
</p>


<h3>Value</h3>

<p><code>NULL</code> if the device does not support capture, otherwise a
matrix of color names (for <code>native = FALSE</code>) or a
<code>nativeRaster</code> object (for <code>native = TRUE</code>).
</p>

<hr>
<h2 id='dev.flush'>
Hold or Flush Output on an On-Screen Graphics Device
</h2><span id='topic+dev.hold'></span><span id='topic+dev.flush'></span>

<h3>Description</h3>

<p>This gives a way to hold/flush output on certain on-screen devices,
and is ignored by other devices.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dev.hold(level = 1L)
dev.flush(level = 1L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dev.flush_+3A_level">level</code></td>
<td>
<p>Integer &gt;= 0.  The amount by which to change the hold
level.  Negative values will be silently replaced by zero.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Devices which implement this maintain a stack of hold levels: calling
<code>dev.hold</code> increases the level and <code>dev.flush</code> decreases it.
Calling <code>dev.hold</code> when the hold level is zero increases the hold
level and inhibits graphics display.  When calling <code>dev.flush</code>
clears all pending holds the screen display is refreshed and normal
operation is resumed.
</p>
<p>This is implemented for the cairo-based <code>X11</code> types
with buffering.  When the hold level is positive the &lsquo;watch&rsquo;
cursor is set on the device's window.
</p>
<p>It is available on the <code>quartz</code> device on macOS.
</p>
<p>This is implemented for the <code>windows</code> device with
buffering selected (the default).  When the hold level is positive the
&lsquo;busy&rsquo; cursor is set on the device's window.
</p>


<h3>Value</h3>

<p>The current level after the change, invisibly.  This is <code>0</code> on
devices where hold levels are not supported.
</p>

<hr>
<h2 id='dev.interactive'>Is the Current Graphics Device Interactive?</h2><span id='topic+dev.interactive'></span><span id='topic+deviceIsInteractive'></span>

<h3>Description</h3>

<p>Test if the current graphics device (or that which would be opened) is
interactive.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dev.interactive(orNone = FALSE)

deviceIsInteractive(name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dev.interactive_+3A_ornone">orNone</code></td>
<td>
<p>logical; if <code>TRUE</code>, the function also returns
<code>TRUE</code> when <code><a href="base.html#topic+.Device">.Device</a> == "null device"</code> and
<code><a href="base.html#topic+getOption">getOption</a>("device")</code> is among the known
interactive devices.</p>
</td></tr>
<tr><td><code id="dev.interactive_+3A_name">name</code></td>
<td>
<p>one or more device names as a character vector,
or <code>NULL</code> to give the existing list.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>X11</code> (Unix), <code>windows</code> (Windows) and <code>quartz</code>
(macOS, on-screen types only) are regarded as interactive, together
with <code>JavaGD</code> (from the package of the same name) and
<code>CairoWin</code> and <code>CairoX11</code> (from package <a href="https://CRAN.R-project.org/package=Cairo"><span class="pkg">Cairo</span></a>).
Packages can add their devices to the list by calling
<code>deviceIsInteractive</code>.
</p>


<h3>Value</h3>

<p><code>dev.interactive()</code> returns a logical, <code>TRUE</code> if and only if an
interactive (screen) device is in use.
</p>
<p><code>deviceIsInteractive</code> returns the updated list of known
interactive devices, invisibly unless <code>name = NULL</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Devices">Devices</a></code> for the available devices on your platform.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dev.interactive()
print(deviceIsInteractive(NULL))
</code></pre>

<hr>
<h2 id='dev.size'> Find Size of Device Surface </h2><span id='topic+dev.size'></span>

<h3>Description</h3>

<p>Find the dimensions of the device surface of the current device.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dev.size(units = c("in", "cm", "px"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dev.size_+3A_units">units</code></td>
<td>
<p>the units in which to return the value &ndash; inches, cm, or
pixels (device units).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A two-element numeric vector giving width and height of the current
device; a new device is opened if there is none, similarly to
<code><a href="#topic+dev.new">dev.new</a>()</code>.
</p>


<h3>See Also</h3>

<p>The size information in inches can be obtained by
<code><a href="graphics.html#topic+par">par</a>("din")</code>, but this provides a way to access it
independent of the graphics sub-system in use.  Note that
<code>par("din")</code> is only updated when a new plot is started, whereas
<code>dev.size</code> tracks the size as an on-screen device is resized.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dev.size("cm")
</code></pre>

<hr>
<h2 id='dev2'>Copy Graphics Between Multiple Devices</h2><span id='topic+dev.copy'></span><span id='topic+dev.print'></span><span id='topic+dev.copy2eps'></span><span id='topic+dev.copy2pdf'></span><span id='topic+dev.control'></span>

<h3>Description</h3>

<p><code>dev.copy</code> copies the graphics contents of the current device
to the device specified by <code>which</code> or to a new device which has
been created by the function specified by <code>device</code> (it is an
error to specify both <code>which</code> and <code>device</code>).  (If recording
is off on the current device, there are no contents to copy: this will
result in no plot or an empty plot.)
The device copied to becomes the current device.
</p>
<p><code>dev.print</code> copies the graphics contents of the current device
to a new device which has been created by the function specified by
<code>device</code> and then shuts the new device.
</p>
<p><code>dev.copy2eps</code> is similar to <code>dev.print</code> but produces an
<abbr>EPSF</abbr> output file in portrait orientation (<code>horizontal = FALSE</code>).
<code>dev.copy2pdf</code> is the analogue for PDF output.
</p>
<p><code>dev.control</code> allows the user to control the recording of
graphics operations in a device.  If <code>displaylist</code> is <code>"inhibit"</code>
(<code>"enable"</code>) then recording is turned off (on). It is only safe
to change this at the beginning of a plot (just before or just after a
new page).  Initially recording is on for screen devices, and off for
print devices.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dev.copy(device, ..., which = dev.next())
dev.print(device = postscript, ...)
dev.copy2eps(...)
dev.copy2pdf(..., out.type = "pdf")
dev.control(displaylist = c("inhibit", "enable"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dev2_+3A_device">device</code></td>
<td>
<p>A device function (e.g., <code>x11</code>,
<code>postscript</code>, ...)</p>
</td></tr>
<tr><td><code id="dev2_+3A_...">...</code></td>
<td>
<p>Arguments to the <code>device</code> function above: for
<code>dev.copy2eps</code> arguments to <code><a href="#topic+postscript">postscript</a></code> and for
<code>dev.copy2pdf</code>, arguments to <code><a href="#topic+pdf">pdf</a></code>.
For <code>dev.print</code>, this includes <code>which</code> and by default any
<code><a href="#topic+postscript">postscript</a></code> arguments.</p>
</td></tr>
<tr><td><code id="dev2_+3A_which">which</code></td>
<td>
<p>A device number specifying the device to copy to.</p>
</td></tr>
<tr><td><code id="dev2_+3A_out.type">out.type</code></td>
<td>
<p>The name of the output device: can be <code>"pdf"</code>, or
<code>"quartz"</code> (some macOS builds) or <code>"cairo"</code> (Windows
and some Unix-alikes, see <code><a href="#topic+cairo_pdf">cairo_pdf</a></code>).</p>
</td></tr>
<tr><td><code id="dev2_+3A_displaylist">displaylist</code></td>
<td>
<p>A character string: the only valid values are
<code>"inhibit"</code> and <code>"enable"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that these functions copy the <em>device region</em> and not a
plot: the background colour of the device surface is part of what is
copied.  Most screen devices default to a transparent background, which
is probably not what is needed when copying to a device such as
<code><a href="#topic+png">png</a></code>.
</p>
<p>For <code>dev.copy2eps</code> and <code>dev.copy2pdf</code>, <code>width</code> and
<code>height</code> are taken from the current device unless otherwise
specified.  If just one of <code>width</code> and <code>height</code> is
specified, the other is adjusted to preserve the aspect ratio of the
device being copied.  The default file name is <code>Rplot.eps</code> or
<code>Rplot.pdf</code>, and can be overridden by specifying a <code>file</code>
argument.
</p>
<p>Copying to devices such as <code><a href="#topic+pdf">pdf</a></code> and
<code><a href="#topic+postscript">postscript</a></code> which need font families pre-specified needs
extra care &ndash; <span class="rlang"><b>R</b></span> is unaware of which families were used in a plot and
so they will need to manually specified by the <code>fonts</code> argument
passed as part of <code>...</code>.  Similarly, if the device to be copied
from was opened with a <code>family</code> argument, a suitable
<code>family</code> argument will need to be included in <code>...</code>.
</p>
<p>The default for <code>dev.print</code> is to produce and print a postscript
copy.  This will not work unless <code><a href="base.html#topic+options">options</a>("printcmd")</code> is
set suitably and you have a PostScript printing system: see
<code><a href="#topic+postscript">postscript</a></code> for how to set this up.  Windows users may
prefer to use <code>dev.print(win.print)</code>.
</p>
<p><code>dev.print</code> is most useful for producing a postscript print
(its default) when the following applies.  Unless
<code>file</code> is specified, the plot will be printed.  Unless
<code>width</code>, <code>height</code> and <code>pointsize</code> are specified
the plot dimensions will be taken from the current device, shrunk
if necessary to fit on the paper. (<code>pointsize</code> is rescaled if the
plot is shrunk.)  If <code>horizontal</code> is not specified and the plot
can be printed at full size by switching its value this is done
instead of shrinking the plot region.
</p>
<p>If <code>dev.print</code> is used with a specified <code>device</code> (even
<code>postscript</code>) it sets the width and height in the same way as
<code>dev.copy2eps</code>.  This will not be appropriate unless the device
specifies dimensions in inches, in particular not for
<code>png</code>, <code>jpeg</code>, <code>tiff</code> and <code>bmp</code> unless
<code>units = "inches"</code> is specified.
</p>


<h3>Value</h3>

<p><code>dev.copy</code> returns the name and number of the device which has
been copied to.
</p>
<p><code>dev.print</code>, <code>dev.copy2eps</code> and <code>dev.copy2pdf</code> return
the name and number of the device which has been copied from.
</p>


<h3>Note</h3>

<p>Most devices (including all screen devices) have a display list
which records all of the graphics operations that occur in the device.
<code>dev.copy</code> copies graphics contents by copying the display list
from one device to another device.  Also, automatic redrawing of
graphics contents following the resizing of a device depends on the
contents of the display list.
</p>
<p>After the command <code>dev.control("inhibit")</code>, graphics operations
are not recorded in the display list so that <code>dev.copy</code> and
<code>dev.print</code> will not copy anything and the contents of a device
will not be redrawn automatically if the device is resized.
</p>
<p>The recording of graphics operations is relatively expensive in
terms of memory so the command <code>dev.control("inhibit")</code> can be
useful if memory usage is an issue.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dev.cur">dev.cur</a></code> and other <code>dev.xxx</code> functions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
x11() # on a Unix-alike
plot(rnorm(10), main = "Plot 1")
dev.copy(device = x11)
mtext("Copy 1", 3)
dev.print(width = 6, height = 6, horizontal = FALSE) # prints it
dev.off(dev.prev())
dev.off()

## End(Not run)
</code></pre>

<hr>
<h2 id='dev2bitmap'>Graphics Device for Bitmap Files via Ghostscript</h2><span id='topic+dev2bitmap'></span><span id='topic+bitmap'></span>

<h3>Description</h3>

<p><code>bitmap</code> generates a graphics file.
<code>dev2bitmap</code> copies the current graphics device to a file in a
graphics format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bitmap(file, type = "png16m", height = 7, width = 7, res = 72,
       units = "in", pointsize, taa = NA, gaa = NA, ...)

dev2bitmap(file, type = "png16m", height = 7, width = 7, res = 72,
           units = "in", pointsize, ...,
           method = c("postscript", "pdf"), taa = NA, gaa = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dev2bitmap_+3A_file">file</code></td>
<td>
<p>The output file name, with an appropriate extension.</p>
</td></tr>
<tr><td><code id="dev2bitmap_+3A_type">type</code></td>
<td>
<p>The type of bitmap.</p>
</td></tr>
<tr><td><code id="dev2bitmap_+3A_width">width</code>, <code id="dev2bitmap_+3A_height">height</code></td>
<td>
<p>Dimensions of the display region.</p>
</td></tr>
<tr><td><code id="dev2bitmap_+3A_res">res</code></td>
<td>
<p>Resolution, in dots per inch.</p>
</td></tr>
<tr><td><code id="dev2bitmap_+3A_units">units</code></td>
<td>
<p>The units in which <code>height</code> and <code>width</code> are
given.  Can be <code>in</code> (inches), <code>px</code> (pixels), <code>cm</code> or
<code>mm</code>.</p>
</td></tr>
<tr><td><code id="dev2bitmap_+3A_pointsize">pointsize</code></td>
<td>
<p>The pointsize to be used for text: defaults to
something reasonable given the width and height</p>
</td></tr>
<tr><td><code id="dev2bitmap_+3A_...">...</code></td>
<td>
<p>Other parameters passed to <code><a href="#topic+postscript">postscript</a></code> or
<code><a href="#topic+pdf">pdf</a></code>.</p>
</td></tr>
<tr><td><code id="dev2bitmap_+3A_method">method</code></td>
<td>
<p>Should the plot be done by <code><a href="#topic+postscript">postscript</a></code> or
<code><a href="#topic+pdf">pdf</a></code>?</p>
</td></tr>
<tr><td><code id="dev2bitmap_+3A_taa">taa</code>, <code id="dev2bitmap_+3A_gaa">gaa</code></td>
<td>
<p>Number of bits of antialiasing for text and for graphics
respectively.  Usually 4 (for best effect) or 2.  Not supported on
all types.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>dev2bitmap</code> works by copying the current device to a
<code><a href="#topic+postscript">postscript</a></code> or <code><a href="#topic+pdf">pdf</a></code> device, and
post-processing the output file using <code>ghostscript</code>.
<code>bitmap</code> works in the same way using a <code>postscript</code> device
and post-processing the output as &lsquo;printing&rsquo;.
</p>
<p>You will need <code>ghostscript</code>: the full path to the executable can
be set by the environment variable <span class="env">R_GSCMD</span>. If this is unset, a
GhostScript executable will be looked for by name on your path: on a
Unix alike <code>"gs"</code> is used, and on Windows the setting of the
environment variable <span class="env">GSC</span> is used, otherwise commands
<code>"gswi64c.exe"</code> then <code>"gswin32c.exe"</code> are tried.
</p>
<p>The types available will depend on the version of <code>ghostscript</code>,
but are likely to include
<code>"jpeg"</code>, <code>"jpegcmyk"</code>, <code>"jpeggray"</code>,
<code>"tiffcrle"</code>, <code>"tiffg3"</code>,
<code>"tiffg32d"</code>, <code>"tiffg4"</code>, <code>"tiffgray"</code>, <code>"tifflzw"</code>,
<code>"tiffpack"</code>, <code>"tiff12nc"</code>, <code>"tiff24nc"</code>, <code>"tiff32nc"</code>
<code>"png16"</code>, <code>"png16m"</code>, <code>"png256"</code>, <code>"png48"</code>,
<code>"pngmono"</code>, <code>"pnggray"</code>, <code>"pngalpha"</code>,
<code>"bmp16"</code>, <code>"bmp16m"</code> <code>"bmp256"</code>, <code>"bmp32b"</code>,
<code>"bmpgray"</code>, <code>"bmpmono"</code>.
</p>
<p>The default type, <code>"png16m"</code>, supports 24-bit colour and
anti-aliasing.  Type <code>"png256"</code> uses a palette of 256 colours and
could give a more compact representation.  Monochrome graphs can use
<code>"pngmono"</code>, or <code>"pnggray"</code> if anti-aliasing is desired.
Plots with a transparent background and varying degrees of
transparency should use <code>"pngalpha"</code>.
</p>
<p>Note that for a colour TIFF image you probably want <code>"tiff24nc"</code>,
which is 8-bit per channel RGB (the most common TIFF format).  None of
the listed TIFF types support transparency.  <code>"tiff32nc"</code> uses
8-bit per channel CMYK, which printers might require.
</p>
<p>For formats which contain a single image, a file specification like
<code>Rplots%03d.png</code> can be used: this is interpreted by Ghostscript.
</p>
<p>For <code>dev2bitmap</code> if just one of <code>width</code> and <code>height</code> is
specified, the other is chosen to preserve the aspect ratio of the
device being copied.  The main reason to prefer <code>method = "pdf"</code>
over the default would be to allow semi-transparent colours to be used.
</p>
<p>For graphics parameters such as <code>"cra"</code> that need to work in
pixels, the default resolution of 72dpi is always used.
</p>
<p>On Windows only,
paths for <code>file</code> and <span class="env">R_GSCMD</span> which contain spaces are
mapped to short names <em>via</em> <code><a href="utils.html#topic+shortPathName">shortPathName</a></code>.
</p>


<h3>Value</h3>

<p>None.
</p>


<h3>Conventions</h3>

<p>This section describes the implementation of the conventions for
graphics devices set out in the &lsquo;R Internals&rsquo; manual.  These
devices follow the underlying device, so when viewed at the stated
<code>res</code>:
</p>

<ul>
<li><p> The default device size is 7 inches square.
</p>
</li>
<li><p> Font sizes are in big points.
</p>
</li>
<li><p> The default font family is (for the standard Ghostscript
setup) URW Nimbus Sans.
</p>
</li>
<li><p> Line widths are as a multiple of 1/96 inch, with no minimum.
</p>
</li>
<li><p> Circle of any radius are allowed.
</p>
</li>
<li><p> Colours are interpreted by the viewing/printing application.
</p>
</li></ul>



<h3>Note</h3>

<p>On Windows,
Use of <code>bitmap</code> will leave a temporary file (with file name
starting <code>Rbit</code>).
</p>
<p>Although using <code>type = "pdfwrite"</code> will work for simple plots, it
is not recommended.  Either use <code><a href="#topic+pdf">pdf</a></code> to produce PDF
directly, or call <code>ps2pdf -dAutoRotatePages=/None</code> on the
output of <code><a href="#topic+postscript">postscript</a></code>: that command is optimized to do
the conversion to PDF in ways that these functions are not.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+savePlot">savePlot</a></code>, which for <code>windows</code> and
<code>X11(type = "cairo")</code> provides a simple way to record a PNG
record of the current plot.
</p>
<p><code><a href="#topic+postscript">postscript</a></code>, <code><a href="#topic+pdf">pdf</a></code>, <code><a href="#topic+png">png</a></code>,
<code><a href="#topic+jpeg">jpeg</a></code>, <code><a href="#topic+tiff">tiff</a></code> and  <code>bmp</code>.
</p>
<p>To display an array of data, see <code><a href="graphics.html#topic+image">image</a></code>.
</p>

<hr>
<h2 id='devAskNewPage'> Prompt before New Page </h2><span id='topic+devAskNewPage'></span>

<h3>Description</h3>

<p>This function can be used to control (for the current device)
whether the user is prompted before starting a new page of output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>devAskNewPage(ask = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="devAskNewPage_+3A_ask">ask</code></td>
<td>
<p><code>NULL</code> or a logical value.  If <code>TRUE</code>, the user
will in future be prompted before a new page of output is started.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the current device is the null device, this will open a graphics device.
</p>
<p>The default argument just returns the current setting and does not
change it.
</p>
<p>The default value when a device is opened is taken from the
setting of <code><a href="base.html#topic+options">options</a>("device.ask.default")</code>.
</p>
<p>The precise circumstances when the user will be asked to confirm a new
page depend on the graphics subsystem.  Obviously this needs to be an
interactive session.  In addition &lsquo;recording&rsquo; needs to be in
operation, so only when the display list is enabled (see
<code><a href="#topic+dev.control">dev.control</a></code>) which it usually is only on a screen device.
</p>


<h3>Value</h3>

<p>The current prompt setting <em>before</em> any new setting is applied.
Invisibly if <code>ask</code> is logical.
</p>


<h3>See Also</h3>

<p><code><a href="graphics.html#topic+plot.new">plot.new</a></code>, <code><a href="grid.html#topic+grid.newpage">grid.newpage</a></code>
</p>

<hr>
<h2 id='Devices'>List of Graphical Devices</h2><span id='topic+Devices'></span><span id='topic+device'></span>

<h3>Description</h3>

<p>The following graphics devices are currently available:
</p>

<dl>
<dt><code><a href="#topic+windows">windows</a></code>:</dt><dd><p>On Windows only, the graphics device for
Windows (on screen, to printer and to Windows metafile).</p>
</dd>
<dt><code><a href="#topic+pdf">pdf</a></code>:</dt><dd><p>Write PDF graphics commands to a file.</p>
</dd>
<dt><code><a href="#topic+postscript">postscript</a></code>:</dt><dd><p>Writes PostScript graphics commands to
a file.</p>
</dd>
<dt><code><a href="#topic+xfig">xfig</a></code>:</dt><dd><p>Device for XFig graphics file format.  (Of
historical interest only, deprecated in <span class="rlang"><b>R</b></span> 4.4.0.)</p>
</dd>
<dt><code><a href="#topic+bitmap">bitmap</a></code>:</dt><dd><p>bitmap pseudo-device via
<code>Ghostscript</code> (if available).</p>
</dd>
<dt><code><a href="#topic+pictex">pictex</a></code>:</dt><dd><p>Writes TeX/PicTeX graphics commands to a
file (of historical interest only, deprecated in R 4.4.0).</p>
</dd>
</dl>

<p>The following devices will be functional if <span class="rlang"><b>R</b></span> was compiled to use
them (they exist but will return with a warning on other systems):
</p>

<dl>
<dt><code><a href="#topic+cairo_pdf">cairo_pdf</a></code>, <code>cairo_ps</code>:</dt><dd><p>PDF and PostScript
devices based on cairo graphics.</p>
</dd>
<dt><code><a href="#topic+svg">svg</a></code>:</dt><dd><p>SVG device based on cairo graphics</p>
</dd>
<dt><code><a href="#topic+png">png</a></code>:</dt><dd><p>PNG bitmap device</p>
</dd>
<dt><code><a href="#topic+jpeg">jpeg</a></code>:</dt><dd><p>JPEG bitmap device</p>
</dd>
<dt><code><a href="#topic+bmp">bmp</a></code>:</dt><dd><p><abbr>BMP</abbr> bitmap device</p>
</dd>
<dt><code><a href="#topic+tiff">tiff</a></code>:</dt><dd><p>TIFF bitmap device</p>
</dd>
</dl>

<p>On Unix-alikes (including macOS) only:
</p>

<dl>
<dt><code><a href="#topic+X11">X11</a></code>:</dt><dd><p>The graphics device for the X11 windowing system</p>
</dd>
<dt><code><a href="#topic+quartz">quartz</a></code>:</dt><dd><p>The graphics device for the macOS
native Quartz 2d graphics system.  (This is only functional on
macOS where it can be used from the <code>R.app</code> GUI and from the
command line: but it will display on the local screen even for a
remote session.)</p>
</dd>
</dl>



<h3>Details</h3>

<p>If no device is open, calling any high-level graphics function will cause
a device to be opened.  Which device is determined by
<code><a href="base.html#topic+options">options</a>("device")</code> which is initially set as the most
appropriate for each platform: a screen device for most interactive use and
<code><a href="#topic+pdf">pdf</a></code> (or the setting of <span class="env">R_DEFAULT_DEVICE</span>)
otherwise.  The exception is interactive use under Unix if no screen
device is known to be available, when <code>pdf()</code> is used.
</p>
<p>It is possible for an <span class="rlang"><b>R</b></span> package (or an <span class="rlang"><b>R</b></span> front-end such as RStudio)
to provide further graphics devices and several packages on CRAN do
so.  These include devices outputting SVG (<a href="https://CRAN.R-project.org/package=svglite"><span class="pkg">svglite</span></a> and
<abbr>PGF</abbr>/TiKZ (<a href="https://CRAN.R-project.org/package=tikzDevice"><span class="pkg">tikzDevice</span></a>, TeX-based graphics, see
<a href="https://pgf.sourceforge.net/">https://pgf.sourceforge.net/</a>).
</p>


<h3>See Also</h3>

<p>The individual help files for further information on any of the
devices listed here;
</p>

<dl>
<dt>on Windows:</dt><dd><p><code><a href="#topic+windows.options">windows.options</a></code>,</p>
</dd>
<dt>on a Unix-alike:</dt><dd><p><code><a href="#topic+X11">X11</a>.options</code>, <code><a href="#topic+quartz.options">quartz.options</a></code>,</p>
</dd>
</dl>

<p><code><a href="#topic+ps.options">ps.options</a></code> and <code><a href="#topic+pdf.options">pdf.options</a></code> for how to
customize devices.
</p>
<p><code><a href="#topic+dev.interactive">dev.interactive</a></code>,
<code><a href="#topic+dev.cur">dev.cur</a></code>, <code><a href="#topic+dev.print">dev.print</a></code>,
<code><a href="#topic+graphics.off">graphics.off</a></code>, <code><a href="graphics.html#topic+image">image</a></code>,
<code><a href="#topic+dev2bitmap">dev2bitmap</a></code>.
</p>
<p>On Unix-alikes only:<br />
<code><a href="base.html#topic+capabilities">capabilities</a></code> to see if <code><a href="#topic+X11">X11</a></code>,
<code><a href="#topic+jpeg">jpeg</a></code>, <code><a href="#topic+png">png</a></code>, <code><a href="#topic+tiff">tiff</a></code>,
<code><a href="#topic+quartz">quartz</a></code> and the cairo-based devices are available.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## open the default screen device on this platform if no device is
## open
if(dev.cur() == 1) dev.new()

## End(Not run)</code></pre>

<hr>
<h2 id='embedFonts'>Embed Fonts in PostScript and PDF</h2><span id='topic+embedFonts'></span><span id='topic+embedGlyphs'></span>

<h3>Description</h3>

<p>Runs Ghostscript to process a PDF or PostScript file and
embed all fonts in the file.
</p>
<p>Use <code>embedGlyphs()</code> if you have drawn typeset glyphs
(see <code><a href="#topic+glyphInfo">glyphInfo</a></code>), which is only relevant for PDF files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>embedFonts(file, format, outfile = file,
           fontpaths = character(), options = character())

embedGlyphs(file, glyphInfo, outfile = file, options = character())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="embedFonts_+3A_file">file</code></td>
<td>
<p>a character string giving the name of the original file.</p>
</td></tr>
<tr><td><code id="embedFonts_+3A_format">format</code></td>
<td>
<p>the format for the new file (with fonts embedded) given as
the name of a Ghostscript output device.
If not specified, it is guessed from the suffix of <code>file</code>.</p>
</td></tr>
<tr><td><code id="embedFonts_+3A_outfile">outfile</code></td>
<td>
<p>the name of the new file (with fonts embedded).</p>
</td></tr>
<tr><td><code id="embedFonts_+3A_fontpaths">fontpaths</code></td>
<td>
<p>a character vector giving directories that
Ghostscript will search for fonts.</p>
</td></tr>
<tr><td><code id="embedFonts_+3A_options">options</code></td>
<td>
<p>a character vector containing further options to
Ghostscript.</p>
</td></tr>
<tr><td><code id="embedFonts_+3A_glyphinfo">glyphInfo</code></td>
<td>
<p>typeset glyph information produced by
<code>glyphInfo()</code>, or a list of the same.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is not necessary if you just use the standard
default fonts for PostScript and PDF output.
</p>
<p>If you use a special font, this function is useful for
embedding that font in your PostScript or PDF document
so that it can be shared with others without them having
to install your special font (provided the font licence allows this).
</p>
<p>If the special font is not installed for Ghostscript,
you will need to tell Ghostscript where the font is, using
something like <code>options="-sFONTPATH=path/to/font"</code>.
</p>
<p>You will need <code>ghostscript</code>: the full path to the executable can
be set by the environment variable <span class="env">R_GSCMD</span>. If this is
unset, a GhostScript executable will be looked for by name on your
path: on a Unix alike <code>"gs"</code> is used, and on Windows the setting
of the environment variable <span class="env">GSC</span> is used, otherwise commands
<code>"gswi64c.exe"</code> then <code>"gswin32c.exe"</code> are tried.
</p>
<p>The <code>format</code> is by default <code>"ps2write"</code>, when the original
file has a <code>.ps</code> or <code>.eps</code> suffix, or <code>"pdfwrite"</code> when
the original file has a <code>.pdf</code> suffix.  For versions of
Ghostscript before 9.10, <code>format = "pswrite"</code> or <code>format =
  "epswrite"</code> can be used: as from 9.14 <code>format = "eps2write"</code> is
also available.  If an invalid device is given, the error message will
list the available devices.
</p>
<p>Note that Ghostscript may do font substitution, so the font embedded
may differ from that specified in the original file.
</p>
<p>Some other options which can be useful (see your Ghostscript
documentation) are <span class="option">-dMaxSubsetPct=100</span>,
<span class="option">-dSubsetFonts=true</span> and  <span class="option">-dEmbedAllFonts=true</span>.
</p>
<p><code>embedGlyphs()</code> is recommended for <code>pdf()</code> files
that contain typeset glyphs (see <code><a href="#topic+glyphInfo">glyphInfo</a></code>),
but it will only work for TrueType fonts.
</p>


<h3>Value</h3>

<p>The shell command used to invoke Ghostscript is returned
invisibly. This may be useful for debugging purposes as
you can run the command by hand in a shell to look for problems.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+postscriptFonts">postscriptFonts</a></code>,
<code><a href="#topic+Devices">Devices</a></code>.
</p>

<p>  Paul Murrell and Brian Ripley (2006).
  &ldquo;Non-standard fonts in PostScript and PDF graphics.&rdquo;
  <em>R News</em>, <b>6</b>(2), 41&ndash;47.
  <a href="https://www.r-project.org/doc/Rnews/Rnews_2006-2.pdf">https://www.r-project.org/doc/Rnews/Rnews_2006-2.pdf</a>.
</p>

<hr>
<h2 id='extendrange'>Extend a Numerical Range by a Small Percentage</h2><span id='topic+extendrange'></span>

<h3>Description</h3>

<p>Extends a numerical range by a small percentage, i.e., fraction,
<em>on both sides</em>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extendrange(x, r = range(x, na.rm = TRUE), f = 0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extendrange_+3A_x">x</code></td>
<td>
<p>numeric vector; not used if <code>r</code> is specified.</p>
</td></tr>
<tr><td><code id="extendrange_+3A_r">r</code></td>
<td>
<p>numeric vector of length 2; defaults to the
<code><a href="base.html#topic+range">range</a></code> of <code>x</code>.</p>
</td></tr>
<tr><td><code id="extendrange_+3A_f">f</code></td>
<td>
<p>positive number(s) specifying the fraction by which the range should be
extended.  If longer than one, <code>f[1]</code> is used on the left, and
<code>f[2]</code> on the right.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector of length 2, <code>r + c(-f1,f2) * diff(r)</code>, where
f1 is <code>f[1]</code> and f2 is <code>f[2]</code> or <code>f</code> if it is of length
one.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+range">range</a></code>; <code><a href="base.html#topic+pretty">pretty</a></code> which can be
considered a sophisticated extension of <code>extendrange</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- 1:5
(r &lt;- range(x))         # 1    5
extendrange(x)          # 0.8  5.2
extendrange(x, f= 0.01) # 0.96 5.04

## extend more to the right:
extendrange(x, f=c(.01,.03)) # 0.96 5.12

## Use 'r' if you have it already:
stopifnot(identical(extendrange(r = r),
                    extendrange(x)))
</code></pre>

<hr>
<h2 id='getGraphicsEvent'>Wait for a mouse or keyboard event from a graphics window</h2><span id='topic+getGraphicsEvent'></span><span id='topic+setGraphicsEventHandlers'></span><span id='topic+getGraphicsEventEnv'></span><span id='topic+setGraphicsEventEnv'></span>

<h3>Description</h3>

<p>This function waits for input from a graphics window in the
form of a mouse or keyboard event.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getGraphicsEvent(prompt = "Waiting for input",
                 onMouseDown = NULL, onMouseMove = NULL,
                 onMouseUp = NULL, onKeybd = NULL,
                 onIdle = NULL,
                 consolePrompt = prompt)
setGraphicsEventHandlers(which = dev.cur(), ...)
getGraphicsEventEnv(which = dev.cur())
setGraphicsEventEnv(which = dev.cur(), env)

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getGraphicsEvent_+3A_prompt">prompt</code></td>
<td>
<p>prompt to be displayed to the user in the graphics window</p>
</td></tr>
<tr><td><code id="getGraphicsEvent_+3A_onmousedown">onMouseDown</code></td>
<td>
<p>a function to respond to mouse clicks</p>
</td></tr>
<tr><td><code id="getGraphicsEvent_+3A_onmousemove">onMouseMove</code></td>
<td>
<p>a function to respond to mouse movement</p>
</td></tr>
<tr><td><code id="getGraphicsEvent_+3A_onmouseup">onMouseUp</code></td>
<td>
<p>a function to respond to mouse button releases</p>
</td></tr>
<tr><td><code id="getGraphicsEvent_+3A_onkeybd">onKeybd</code></td>
<td>
<p>a function to respond to key presses</p>
</td></tr>
<tr><td><code id="getGraphicsEvent_+3A_onidle">onIdle</code></td>
<td>
<p>a function to call when no events are pending</p>
</td></tr>
<tr><td><code id="getGraphicsEvent_+3A_consoleprompt">consolePrompt</code></td>
<td>
<p>prompt to be displayed to the user in the console</p>
</td></tr>
<tr><td><code id="getGraphicsEvent_+3A_which">which</code></td>
<td>
<p>which graphics device does the call apply to?</p>
</td></tr>
<tr><td><code id="getGraphicsEvent_+3A_...">...</code></td>
<td>
<p>items including handlers to be placed in the event environment</p>
</td></tr>
<tr><td><code id="getGraphicsEvent_+3A_env">env</code></td>
<td>
<p>an environment to be used as the event environment</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions allow user input from some graphics devices (currently
only the <code>windows()</code>, <code>X11(type = "Xlib")</code>
and <code>X11(type = "cairo")</code> screen displays
in base <span class="rlang"><b>R</b></span>). Event handlers may be installed to respond to events
involving the mouse or keyboard.
</p>
<p>The functions are related as follows.  If any of the first six
arguments to <code>getGraphicsEvent</code> are given, then it uses those
in a call to <code>setGraphicsEventHandlers</code> to replace any existing
handlers in the current device.  This is for compatibility with pre-2.12.0 <span class="rlang"><b>R</b></span>
versions.  The current normal way to set up event handlers is to
set them using <code>setGraphicsEventHandlers</code> or <code>setGraphicsEventEnv</code> on
one or more graphics devices, and then use <code>getGraphicsEvent()</code> with
no arguments to retrieve event data.
<code>getGraphicsEventEnv()</code> may be used to save the event environment
for use later.
</p>
<p>The names of the arguments in <code>getGraphicsEvent</code> are special.  When
handling events, the graphics system will look through the event
environment for functions named <code>onMouseDown</code>, <code>onMouseMove</code>,
<code>onMouseUp</code>, <code>onKeybd</code>, and <code>onIdle</code>, and use them as
event handlers.  It will use
<code>prompt</code> for a label on the graphics device.  Two other special names are
<code>which</code>, which will identify the graphics device, and
<code>result</code>, where the result of the last event
handler will be stored before being returned by <code>getGraphicsEvent()</code>.
</p>
<p>The mouse event handlers should be functions with header
<code>function(buttons, x, y)</code>.  The coordinates <code>x</code>
and <code>y</code> will be passed to mouse event handlers in device independent
coordinates (i.e., the lower left corner of the window is <code>(0,0)</code>,
the upper right is <code>(1,1)</code>).  The <code>buttons</code> argument
will be a vector listing the buttons
that are pressed at the time of the event, with 0 for left, 1 for middle, and 2
for right.
</p>
<p>The keyboard event handler should be a function with header
<code>function(key)</code>.  A single element character vector will be passed
to this handler, corresponding to the key press.  Shift and other modifier
keys will have been processed, so <code>shift-a</code> will be passed as
<code>"A"</code>.  The following special keys may also be passed to the handler:
</p>

<ul>
<li><p> Control keys, passed as <code>"Ctrl-A"</code>, etc.
</p>
</li>
<li><p> Navigation keys, passed as one of<br />
<code>"Left", "Up", "Right", "Down", "PgUp", "PgDn", "End", "Home"</code>
</p>
</li>
<li><p> Edit keys, passed as one of <code>"Ins", "Del"</code>
</p>
</li>
<li><p> Function keys, passed as one of <code>"F1", "F2", ...</code>
</p>
</li></ul>

<p>The idle event handler <code>onIdle</code> should be a function with no
arguments. If the function is undefined or <code>NULL</code>, then R will
typically call a system function which (efficiently) waits for the next
event to appear on a file handle. Otherwise, the idle event handler will
be called whenever the event queue of the graphics device was found to
be empty, i.e. in an infinite loop. This feature is intended to allow
animations to respond to user input, and could be CPU-intensive.
Currently, <code>onIdle</code> is only implemented for <code>X11()</code> devices.
</p>
<p>Note that calling <code>Sys.sleep()</code> is not recommended within an idle
handler - <code>Sys.sleep()</code> removes pending graphics events in order to
allow users to move, close, or resize windows while it is executing.
Events such as mouse and keyboard events occurring during
<code>Sys.sleep()</code> are lost, and currently do not trigger the event
handlers registered via <code>getGraphicsEvent</code> or
<code>setGraphicsEventHandlers</code>.
</p>
<p>The event handlers are standard R functions, and will be executed as though called
from the event environment.
</p>
<p>In an interactive session, events will be processed until
</p>

<ul>
<li><p> one of the event handlers returns
a non-<code>NULL</code> value which will be returned as the value of
<code>getGraphicsEvent</code>, or
</p>
</li>
<li><p> the user interrupts the function from the
console.
</p>
</li></ul>



<h3>Value</h3>

<p>When run interactively,
<code>getGraphicsEvent</code> returns a non-<code>NULL</code> value returned from one of the event handlers.
In a non-interactive session, <code>getGraphicsEvent</code> will return <code>NULL</code> immediately.  It
will also return <code>NULL</code> if the user closes the last window that has graphics handlers.
</p>
<p><code>getGraphicsEventEnv</code> returns the current event environment for the graphics device,
or <code>NULL</code> if none has been set.
</p>
<p><code>setGraphicsEventEnv</code> and <code>setGraphicsEventHandlers</code> return the previous
event environment for the graphics device.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch</p>


<h3>Examples</h3>

<pre><code class='language-R'># This currently only works on the Windows, X11(type = "Xlib"), and
# X11(type = "cairo") screen devices...
## Not run: 
savepar &lt;- par(ask = FALSE)
dragplot &lt;- function(..., xlim = NULL, ylim = NULL, xaxs = "r", yaxs = "r") {
    plot(..., xlim = xlim, ylim = ylim, xaxs = xaxs, yaxs = yaxs)
    startx &lt;- NULL
    starty &lt;- NULL
    prevx &lt;- NULL
    prevy &lt;- NULL
    usr &lt;- NULL

    devset &lt;- function()
        if (dev.cur() != eventEnv$which) dev.set(eventEnv$which)

    dragmousedown &lt;- function(buttons, x, y) {
        startx &lt;&lt;- x
        starty &lt;&lt;- y
        prevx &lt;&lt;- 0
        prevy &lt;&lt;- 0
        devset()
        usr &lt;&lt;- par("usr")
        eventEnv$onMouseMove &lt;- dragmousemove
        NULL
    }

    dragmousemove &lt;- function(buttons, x, y) {
        devset()
        deltax &lt;- diff(grconvertX(c(startx, x), "ndc", "user"))
        deltay &lt;- diff(grconvertY(c(starty, y), "ndc", "user"))
	if (abs(deltax-prevx) + abs(deltay-prevy) &gt; 0) {
	    plot(..., xlim = usr[1:2]-deltax, xaxs = "i",
		      ylim = usr[3:4]-deltay, yaxs = "i")
	    prevx &lt;&lt;- deltax
	    prevy &lt;&lt;- deltay
	}
        NULL
    }

    mouseup &lt;- function(buttons, x, y) {
    	eventEnv$onMouseMove &lt;- NULL
    }	

    keydown &lt;- function(key) {
        if (key == "q") return(invisible(1))
        eventEnv$onMouseMove &lt;- NULL
        NULL
    }

    setGraphicsEventHandlers(prompt = "Click and drag, hit q to quit",
                     onMouseDown = dragmousedown,
                     onMouseUp = mouseup,
                     onKeybd = keydown)
    eventEnv &lt;- getGraphicsEventEnv()
}

dragplot(rnorm(1000), rnorm(1000))
getGraphicsEvent()
par(savepar)

## End(Not run)
</code></pre>

<hr>
<h2 id='glyphInfo'>Describe a Set of Typeset Glyphs</h2><span id='topic+glyphInfo'></span><span id='topic+glyphFont'></span><span id='topic+glyphFontList'></span><span id='topic+glyphAnchor'></span><span id='topic+glyphWidth'></span><span id='topic+glyphHeight'></span><span id='topic+glyphWidthLeft'></span><span id='topic+glyphHeightBottom'></span><span id='topic+glyphJust'></span><span id='topic+glyphJust.GlyphJust'></span><span id='topic+glyphJust.character'></span><span id='topic+glyphJust.numeric'></span>

<h3>Description</h3>

<p>Create an object that contains information about typeset glyphs.
This includes glyph identifiers, glyph locations, font and colour
information, and metric information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>glyphInfo(id, x, y, font, size, fontList, 
          width, height, hAnchor, vAnchor,
          col=NA)

glyphFont(file, index, family, weight, style, PSname=NA)
glyphFontList(...)
glyphAnchor(value, label)
glyphWidth(w, label="width", left="left")
glyphHeight(h, label="height", bottom="bottom")
glyphWidthLeft(w, label)
glyphHeightBottom(h, label)
glyphJust(just, ...)
## S3 method for class 'GlyphJust'
glyphJust(just, ...)
## S3 method for class 'character'
glyphJust(just, ...)
## S3 method for class 'numeric'
glyphJust(just, which=NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="glyphInfo_+3A_id">id</code></td>
<td>
<p>Numeric vector of glyph identifiers (index of glyph within
font file).</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_x">x</code>, <code id="glyphInfo_+3A_y">y</code></td>
<td>
<p>Numeric locations of glyphs in (big) points (1/72
inches).</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_font">font</code></td>
<td>
<p>Integer index into <code>fontList</code>.</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_size">size</code></td>
<td>
<p>Numeric size of glyphs (in points).</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_fontlist">fontList</code></td>
<td>
<p>List of glyph fonts, as generated by <code>glyphFont()</code>.</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_width">width</code></td>
<td>
<p>Overall width of glyphs.  Can be a single numeric value,
but can also be the result from a call to <code>glyphWidth()</code>.</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_height">height</code></td>
<td>
<p>Overall height of glyphs.  Can be a single numeric
value, but can also be the result from a call to <code>glyphHeight()</code>.</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_hanchor">hAnchor</code></td>
<td>
<p>Horizontal anchors for justifying glyphs relative to the
(<code>x</code>, <code>y</code>) location.  Can be a 
single numeric value (against which to <code>"left"</code> justify),
but can also be result from a call to <code>glyphAnchor()</code>.</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_vanchor">vAnchor</code></td>
<td>
<p>Vertical anchors for justifying glyphs relative to the 
(<code>x</code>, <code>y</code>) location.  Can be a single numeric value
(against which to <code>"bottom"</code> justify), 
but can also be result from a call to <code>glyphAnchor()</code>.</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_col">col</code></td>
<td>
<p>An R colour value for each glyph. Can be <code>NA</code>.</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_file">file</code></td>
<td>
<p>Character path to font file.</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_index">index</code></td>
<td>
<p>Numeric index of font within font file.</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_family">family</code></td>
<td>
<p>Character name of font family.</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_weight">weight</code></td>
<td>
<p>Numeric weight of glyphs (400 is normal, 700 is bold).</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_style">style</code></td>
<td>
<p>Character style of glyphs (<code>"normal"</code>, <code>"italic"</code>,
or <code>"oblique"</code>).</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_psname">PSname</code></td>
<td>
<p>The PostScript name for each font. Can be <code>NA</code>.</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_value">value</code>, <code id="glyphInfo_+3A_w">w</code>, <code id="glyphInfo_+3A_h">h</code></td>
<td>
<p>A numeric value.</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_label">label</code>, <code id="glyphInfo_+3A_left">left</code>, <code id="glyphInfo_+3A_bottom">bottom</code></td>
<td>
<p>A character value.</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_just">just</code></td>
<td>
<p>A justification value. Either a character value like
<code>"left"</code> or a numeric value like <code>0</code>.</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_which">which</code></td>
<td>
<p>When <code>x</code> is numeric, a character value identifying
which width metric the numeric value is relative to.</p>
</td></tr>
<tr><td><code id="glyphInfo_+3A_...">...</code></td>
<td>
<p>Further arguments passed to other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Multiple anchors can be specified so as to allow different
character-based justifications of the glyphs relative to the
(<code>x</code>, <code>y</code>) location.  Horizontal anchors with labels
<code>"left"</code>, <code>"centre"</code>, and <code>"right"</code> are required.
It is possible to specify a single numeric <code>hAnchor</code>, which is
treated as the <code>"left"</code> anchor, or a single anchor with label
<code>"left"</code>, in which case the other
required anchors will be calculated based on the required width of the
glyphs (see below).
Vertical anchors with labels <code>"bottom"</code>, <code>"centre"</code>, and
<code>"top"</code> are required.
It is possible to specify a single numeric <code>vAnchor</code>, which is
treated as the <code>"bottom"</code> anchor, or a single anchor with label
<code>"bottom"</code>, in which case the other
required anchors will be calculated based on the required height of the
glyphs (see below).
An example of a non-required anchor is a vertical anchor
with the label <code>"baseline"</code> so that the glyphs can be placed with
their baseline at the <code>y</code> location.
</p>
<p>Multiple widths and heights can be specified so as to allow different
numeric-based justifications of the glyphs relative to the
(<code>x</code>, <code>y</code>) location, e.g., <code>0</code> for left-justification
and <code>1</code> for right-justification, but with any value in between
or even outside those limits also possible.  
A width with label <code>"width"</code>, relative to the <code>"left"</code>
horizontal anchor, is required, but if a single
numeric value is given, that is assumed to be the required width.
A height with label <code>"height"</code>, relative to the <code>"bottom"</code>
vertical anchor is required, but if a single
numeric value is given, that is assumed to be the required height.
An example of a non-required width is a <code>"tight"</code> width that
is relative to a <code>"left-bearing"</code> horizontal anchor, so that
the glyphs can be justified relative to a bounding box around the
glyph ink, rather than a bounding box that includes left and right
bearings.
</p>
<p><code>glyphWidthLeft()</code> and <code>glyphWidthHeight()</code> provide
an API for code that needs to access the relevant anchors for
width and height metrics.
</p>


<h3>Value</h3>

<p>The result from <code>glyphInfo()</code> is an <code>"RGlyphInfo"</code> object,
essentially a data frame with each row
containing id, location, font, and colour for a glyph.
The metric information (widths and anchors) are stored as attributes
of the data frame.
</p>
<p><code>glyphAnchor()</code>, <code>glyphWidth()</code>, and <code>glyphHeight()</code>
return values that can be used to specify <code>width</code>, <code>height</code>,
<code>hAnchor</code>, and <code>vAnchor</code> values to <code>glyphInfo()</code>.
</p>


<h3>Warning</h3>

<p>Any glyph with <code>NA</code> in any of <code>id</code>, <code>x</code>, <code>y</code>, or
<code>size</code> is silently dropped.
</p>

<hr>
<h2 id='gray'>Gray Level Specification</h2><span id='topic+gray'></span><span id='topic+grey'></span>

<h3>Description</h3>

<p>Create a vector of colors from a vector of gray levels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gray(level, alpha)
grey(level, alpha)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gray_+3A_level">level</code></td>
<td>
<p>a vector of desired gray levels between <code>0</code> and
<code>1</code>; zero indicates <code>"black"</code> and one indicates
<code>"white"</code>.</p>
</td></tr>
<tr><td><code id="gray_+3A_alpha">alpha</code></td>
<td>
<p>the opacity, if specified.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The values returned by <code>gray</code> can be used with a <code>col=</code>
specification in graphics functions or in <code><a href="graphics.html#topic+par">par</a></code>.
</p>
<p><code>grey</code> is an alias for <code>gray</code>.
</p>


<h3>Value</h3>

<p>A vector of colors of the same length as <code>level</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rainbow">rainbow</a></code>,
<code><a href="#topic+hsv">hsv</a></code>,
<code><a href="#topic+hcl">hcl</a></code>,
<code><a href="#topic+rgb">rgb</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gray(0:8 / 8)
</code></pre>

<hr>
<h2 id='gray.colors'>Gray Color Palette</h2><span id='topic+gray.colors'></span><span id='topic+grey.colors'></span>

<h3>Description</h3>

<p>Create a vector of <code>n</code> gamma-corrected gray colors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gray.colors(n, start = 0.3, end = 0.9, gamma = 2.2, alpha, rev = FALSE)
grey.colors(n, start = 0.3, end = 0.9, gamma = 2.2, alpha, rev = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gray.colors_+3A_n">n</code></td>
<td>
<p>the number of gray colors (<code class="reqn">\ge 1</code>) to be in the
palette.</p>
</td></tr>
<tr><td><code id="gray.colors_+3A_start">start</code></td>
<td>
<p>starting gray level in the palette (should be between
<code>0</code> and <code>1</code> where zero indicates <code>"black"</code> and one
indicates <code>"white"</code>).</p>
</td></tr>
<tr><td><code id="gray.colors_+3A_end">end</code></td>
<td>
<p>ending gray level in the palette.</p>
</td></tr>
<tr><td><code id="gray.colors_+3A_gamma">gamma</code></td>
<td>
<p>the gamma correction.</p>
</td></tr>
<tr><td><code id="gray.colors_+3A_alpha">alpha</code></td>
<td>
<p>the opacity, if specified.</p>
</td></tr>
<tr><td><code id="gray.colors_+3A_rev">rev</code></td>
<td>
<p>logical indicating whether the ordering of the colors should
be reversed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function <code>gray.colors</code> chooses a series of <code>n</code>
gamma-corrected gray levels between <code>start</code> and <code>end</code>:
<code>seq(start^gamma, end^gamma, length = n)^(1/gamma)</code>.
The returned palette contains the corresponding gray colors.
This palette is used in <code><a href="graphics.html#topic+barplot.default">barplot.default</a></code>.
</p>
<p><code>grey.colors</code> is an alias for <code>gray.colors</code>.
</p>


<h3>Value</h3>

<p>A vector of <code>n</code> gray colors.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+gray">gray</a></code>,
<code><a href="#topic+rainbow">rainbow</a></code>,
<code><a href="#topic+palette">palette</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(graphics)

pie(rep(1, 12), col = gray.colors(12))
barplot(1:12, col = gray.colors(12))
</code></pre>

<hr>
<h2 id='grDevices-internal'>Internal <span class="pkg">grDevices</span> Functions</h2><span id='topic+.clipPath'></span><span id='topic+.defineGroup'></span><span id='topic+.devUp'></span><span id='topic+.linearGradientPattern'></span><span id='topic+.mask'></span><span id='topic+.opIndex'></span><span id='topic+.radialGradientPattern'></span><span id='topic+.ruleIndex'></span><span id='topic+.setClipPath'></span><span id='topic+.setMask'></span><span id='topic+.setPattern'></span><span id='topic+.tilingPattern'></span><span id='topic+.useGroup'></span>

<h3>Description</h3>

<p>Internal <span class="pkg">grDevices</span> functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.clipPath(fun, rule) 
.defineGroup(source, op, destination) 
.devUp() 
.linearGradientPattern(colours = c("black", "white"),
                       stops = seq(0, 1, length.out = length(colours)), 
                       x1 = 0, y1 = 0, x2 = 1, y2 = 1, extend = "pad") 
.mask(fun, type) 
.opIndex(x) 
.radialGradientPattern(colours = c("black", "white"),
                       stops = seq(0, 1, length.out = length(colours)), 
                       cx1 = 0, cy1 = 0, r1 = 0,
                       cx2 = 1, cy2 = 1, r2 = 0.5,
                       extend = "pad") 
.ruleIndex(x) 
.setClipPath(path, index) 
.setMask(mask, ref) 
.setPattern(pattern) 
.tilingPattern(fun, x, y, width, height, extend) 
.useGroup(ref, trans) 
</code></pre>


<h3>Details</h3>

<p>These are used for communication between the graphics engine and
graphics systems, <span class="pkg">graphics</span> and <span class="pkg">grid</span>, and are
not to be called by the user.
</p>

<hr>
<h2 id='grSoftVersion'>Report Versions of Graphics Software</h2><span id='topic+grSoftVersion'></span>

<h3>Description</h3>

<p>Report versions of third-party graphics software available on the
current platform for <span class="rlang"><b>R</b></span>'s graphics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grSoftVersion()
</code></pre>


<h3>Value</h3>

<p>A named character vector containing at least the elements
</p>
<table>
<tr><td><code>cairo</code></td>
<td>
<p>the version of cairographics in use, or <code>""</code> if
cairographics is not available.</p>
</td></tr>
<tr><td><code>cairoFT</code></td>
<td>
<p>the FreeType/FontConfig versions if cairographics is
using those libraries directly (not <em>via</em> pango); otherwise,
<code>""</code>.  Earlier versions of <span class="rlang"><b>R</b></span> returned <code>"yes"</code> rather than
the versions.  The FontConfig version is determined when <span class="rlang"><b>R</b></span> is built.</p>
</td></tr>
<tr><td><code>pango</code></td>
<td>
<p>the version of pango in use, or <code>""</code> if
pango is not available.</p>
</td></tr>
</table>
<p>It may also contain the versions of third-party software used by the
standard (on Windows), or X11-based (on Unix-alikes)
bitmap devices:
</p>
<table>
<tr><td><code>libpng</code></td>
<td>
<p>the version of <code>libpng</code> in use, or <code>""</code> if
not available.</p>
</td></tr>
<tr><td><code>jpeg</code></td>
<td>
<p>the version of the JPEG headers used for compilation,
or <code>""</code> if JPEG support was not compiled in.</p>
</td></tr>
<tr><td><code>libtiff</code></td>
<td>
<p>the version of <code>libtiff</code> in use, or <code>""</code> if
not available.</p>
</td></tr>
</table>
<p>It is conceivable but unlikely that the cairo-based bitmap devices
will use different versions linked <em>via</em> cairographics,
especially <code>png(type = "cairo-png")</code>.
</p>
<p>On macOS, if available, the Quartz-based devices will use the system
versions of these libraries rather than those reported here.
</p>
<p>Unless otherwise stated the reported version is that of the (possibly
dynamically-linked) library in use at runtime.
</p>
<p>Note that <code>libjpeg-turbo</code> as used on some Linux distributions
reports its version as <code>"6.2"</code>, the IJG version from which it forked.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+extSoftVersion">extSoftVersion</a></code> for versions of non-graphics software.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>grSoftVersion()
</code></pre>

<hr>
<h2 id='hcl'><abbr>HCL</abbr> Color Specification</h2><span id='topic+hcl'></span>

<h3>Description</h3>

<p>Create a vector of colors from vectors specifying hue,
chroma and luminance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hcl(h = 0, c = 35, l = 85, alpha, fixup = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hcl_+3A_h">h</code></td>
<td>
<p>The hue of the color specified as an angle in the range
[0,360].  0 yields red, 120 yields green 240 yields blue, etc.</p>
</td></tr>
<tr><td><code id="hcl_+3A_c">c</code></td>
<td>
<p>The chroma of the color.  The upper bound for chroma depends
on hue and luminance.</p>
</td></tr>
<tr><td><code id="hcl_+3A_l">l</code></td>
<td>
<p>A value in the range [0,100] giving the luminance of the
colour.  For a given combination of hue and chroma, only
a subset of this range is possible.</p>
</td></tr>
<tr><td><code id="hcl_+3A_alpha">alpha</code></td>
<td>
<p>numeric vector of values in the range <code>[0,1]</code> for
alpha transparency channel (0 means transparent and 1 means opaque).</p>
</td></tr>
<tr><td><code id="hcl_+3A_fixup">fixup</code></td>
<td>
<p>a logical value which indicates whether the resulting
RGB values should be corrected to ensure that a real color results.
if <code>fixup</code> is <code>FALSE</code> RGB components lying outside the
range [0,1] will result in an <code>NA</code> value.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function corresponds to polar coordinates in the <abbr>CIE</abbr>-<abbr>LUV</abbr>
color space. Steps of equal size in this space correspond to
approximately equal perceptual changes in color.  Thus, <code>hcl</code>
can be thought of as a perceptually based version of <code><a href="#topic+hsv">hsv</a></code>.
</p>
<p>The function is primarily intended as a way of computing
colors for filling areas in plots where area corresponds to a
numerical value (pie charts, bar charts, mosaic plots, histograms,
etc).  Choosing colors which have equal chroma and luminance
provides a way of minimising the irradiation illusion which
would otherwise produce a misleading impression of how large
the areas are.
</p>
<p>The default values of chroma and luminance make it possible
to generate a full range of hues and have a relatively pleasant
pastel appearance.
</p>
<p>The RGB values produced by this function correspond to the <abbr>sRGB</abbr>
color space used on most PC computer displays.  There are other
packages which provide more general color space facilities.
</p>
<p>Semi-transparent colors (<code>0 &lt; alpha &lt; 1</code>) are supported only on
some devices: see <code><a href="#topic+rgb">rgb</a></code>.
</p>


<h3>Value</h3>

<p>A vector of character strings which can be used as color
specifications by <span class="rlang"><b>R</b></span> graphics functions.
</p>
<p>Missing or infinite values of any of <code>h</code>, <code>c</code>, <code>l</code>
result in <code>NA</code>: such values of <code>alpha</code> are taken as <code>1</code>
(opaque).  
</p>


<h3>Note</h3>

<p>At present there is no guarantee that the colours rendered by R
graphics devices will correspond to their <abbr>sRGB</abbr> description.
It is planned to adopt <abbr>sRGB</abbr> as the standard R color description
in future.
</p>


<h3>Author(s)</h3>

<p>Ross Ihaka</p>


<h3>References</h3>

<p>Ihaka, R. (2003).
Colour for Presentation Graphics, Proceedings of the 3rd International
Workshop on Distributed Statistical Computing (DSC 2003), March 20-22,
2003, Technische Universitt Wien, Vienna, Austria.
<a href="https://www.R-project.org/conferences/DSC-2003/">https://www.R-project.org/conferences/DSC-2003/</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+hsv">hsv</a></code>,
<code><a href="#topic+rgb">rgb</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(graphics)

# The Foley and Van Dam PhD Data.
csd &lt;- matrix(c( 4,2,4,6, 4,3,1,4, 4,7,7,1,
                 0,7,3,2, 4,5,3,2, 5,4,2,2,
                 3,1,3,0, 4,4,6,7, 1,10,8,7,
                 1,5,3,2, 1,5,2,1, 4,1,4,3,
                 0,3,0,6, 2,1,5,5), nrow = 4)

csphd &lt;- function(colors)
  barplot(csd, col = colors, ylim = c(0,30),
          names.arg = 72:85, xlab = "Year", ylab = "Students",
          legend.text = c("Winter", "Spring", "Summer", "Fall"),
          main = "Computer Science PhD Graduates", las = 1)

# The Original (Metaphorical) Colors (Ouch!)
csphd(c("blue", "green", "yellow", "orange"))

# A Color Tetrad (Maximal Color Differences)
csphd(hcl(h = c(30, 120, 210, 300)))

# Same, but lighter and less colorful
# Turn off automatic correction to make sure
# that we have defined real colors.
csphd(hcl(h = c(30, 120, 210, 300),
          c = 20, l = 90, fixup = FALSE))

# Analogous Colors
# Good for those with red/green color confusion
csphd(hcl(h = seq(60, 240, by = 60)))

# Metaphorical Colors
csphd(hcl(h = seq(210, 60, length.out = 4)))

# Cool Colors
csphd(hcl(h = seq(120, 0, length.out = 4) + 150))

# Warm Colors
csphd(hcl(h = seq(120, 0, length.out = 4) - 30))

# Single Color
hist(stats::rnorm(1000), col = hcl(240))

## Exploring the hcl() color space {in its mapping to R's sRGB colors}:
demo(hclColors)

</code></pre>

<hr>
<h2 id='Hershey'>Hershey Vector Fonts in R</h2><span id='topic+Hershey'></span>

<h3>Description</h3>

<p>If the <code>family</code> graphical parameter (see <code><a href="graphics.html#topic+par">par</a></code>)
has been set to one of the Hershey fonts (see &lsquo;Details&rsquo;)
Hershey vector fonts are used to render text.
</p>
<p>When using the <code><a href="graphics.html#topic+text">text</a></code> and <code><a href="graphics.html#topic+contour">contour</a></code> functions
Hershey fonts may be selected via the <code>vfont</code> argument, which is
a character vector of length 2 (see &lsquo;Details&rsquo; for valid
values).  This allows Cyrillic to be selected, which is not available
via the font families.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Hershey
</code></pre>


<h3>Details</h3>

<p>The Hershey fonts have two advantages:<br />
</p>

<ol>
<li><p> vector fonts describe each
character in terms of a set of points;  <span class="rlang"><b>R</b></span> renders the character by
joining up the points with straight lines.  This intimate knowledge of
the outline of each character means that <span class="rlang"><b>R</b></span> can arbitrarily transform
the characters, which can mean that the vector fonts look better
for rotated text.
</p>
</li>
<li><p> this implementation was adapted from the GNU libplot library
which provides support for non-ASCII and non-English fonts.  This means
that it is possible, for example, to produce weird plotting symbols and
Japanese characters.
</p>
</li></ol>

<p>Drawback:<br />
You cannot use mathematical expressions (<code><a href="#topic+plotmath">plotmath</a></code>) with
Hershey fonts.
</p>
<p>The Hershey characters are organised into a set of fonts.  A
particular font is selected by specifying one of the following
font families via <code>par(family)</code> and specifying the desired font
face (plain, bold, italic, bold-italic) via <code>par(font)</code>.
</p>

<table>
<tr>
 <td style="text-align: left;">
    family </td><td style="text-align: left;"> faces available </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>"HersheySerif"</code> </td><td style="text-align: left;"> plain, bold, italic, bold-italic </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>"HersheySans"</code> </td><td style="text-align: left;"> plain, bold, italic, bold-italic </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>"HersheyScript"</code> </td><td style="text-align: left;"> plain, bold </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>"HersheyGothicEnglish"</code> </td><td style="text-align: left;"> plain </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>"HersheyGothicGerman"</code> </td><td style="text-align: left;"> plain </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>"HersheyGothicItalian"</code> </td><td style="text-align: left;"> plain </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>"HersheySymbol"</code> </td><td style="text-align: left;"> plain, bold, italic, bold-italic </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>"HersheySansSymbol"</code> </td><td style="text-align: left;"> plain, italic </td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>

<p>In the <code>vfont</code> specification for the <code>text</code> and
<code>contour</code> functions, the Hershey font is specified by a typeface
(e.g., <code>serif</code> or <code>sans serif</code>) and a fontindex or
&lsquo;style&rsquo; (e.g., <code>plain</code> or <code>italic</code>). The first
element of <code>vfont</code> specifies the typeface and the second element
specifies the fontindex.  The first table produced by
<code>demo(Hershey)</code> shows the character <code>a</code> produced by each of
the different fonts.
</p>
<p>The available <code>typeface</code> and <code>fontindex</code> values are
available as list components of the variable <code>Hershey</code>.
The allowed pairs for <code>(typeface, fontindex)</code> are:
</p>

<table>
<tr>
 <td style="text-align: left;">
    serif </td><td style="text-align: left;"> plain </td>
</tr>
<tr>
 <td style="text-align: left;">
    serif </td><td style="text-align: left;"> italic </td>
</tr>
<tr>
 <td style="text-align: left;">
    serif </td><td style="text-align: left;"> bold </td>
</tr>
<tr>
 <td style="text-align: left;">
    serif </td><td style="text-align: left;"> bold italic </td>
</tr>
<tr>
 <td style="text-align: left;">
    serif </td><td style="text-align: left;"> cyrillic </td>
</tr>
<tr>
 <td style="text-align: left;">
    serif </td><td style="text-align: left;"> oblique cyrillic </td>
</tr>
<tr>
 <td style="text-align: left;">
    serif </td><td style="text-align: left;"> EUC </td>
</tr>
<tr>
 <td style="text-align: left;">
    sans serif </td><td style="text-align: left;"> plain </td>
</tr>
<tr>
 <td style="text-align: left;">
    sans serif </td><td style="text-align: left;"> italic </td>
</tr>
<tr>
 <td style="text-align: left;">
    sans serif </td><td style="text-align: left;"> bold </td>
</tr>
<tr>
 <td style="text-align: left;">
    sans serif </td><td style="text-align: left;"> bold italic </td>
</tr>
<tr>
 <td style="text-align: left;">
    script </td><td style="text-align: left;"> plain </td>
</tr>
<tr>
 <td style="text-align: left;">
    script </td><td style="text-align: left;"> italic </td>
</tr>
<tr>
 <td style="text-align: left;">
    script </td><td style="text-align: left;"> bold </td>
</tr>
<tr>
 <td style="text-align: left;">
    gothic englisho </td><td style="text-align: left;"> plain </td>
</tr>
<tr>
 <td style="text-align: left;">
    gothic german </td><td style="text-align: left;"> plain </td>
</tr>
<tr>
 <td style="text-align: left;">
    gothic italian </td><td style="text-align: left;"> plain </td>
</tr>
<tr>
 <td style="text-align: left;">
    serif symbol </td><td style="text-align: left;"> plain </td>
</tr>
<tr>
 <td style="text-align: left;">
    serif symbol </td><td style="text-align: left;"> italic </td>
</tr>
<tr>
 <td style="text-align: left;">
    serif symbol </td><td style="text-align: left;"> bold </td>
</tr>
<tr>
 <td style="text-align: left;">
    serif symbol </td><td style="text-align: left;"> bold italic </td>
</tr>
<tr>
 <td style="text-align: left;">
    sans serif symbol </td><td style="text-align: left;"> plain </td>
</tr>
<tr>
 <td style="text-align: left;">
    sans serif symbol </td><td style="text-align: left;"> italic </td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>

<p>and the indices of these are available as <code>Hershey$allowed</code>.
</p>

<dl>
<dt>Escape sequences:</dt><dd><p>The string to be drawn can include escape
sequences, which all begin with a &lsquo;<span class="samp">&#8288;\&#8288;</span>&rsquo;.   When <span class="rlang"><b>R</b></span> encounters a
&lsquo;<span class="samp">&#8288;\&#8288;</span>&rsquo;, rather than drawing the &lsquo;<span class="samp">&#8288;\&#8288;</span>&rsquo;, it treats the
subsequent character(s) as a coded description of what to draw.
</p>
<p>One useful escape sequence (in the current context) is of the
form: &lsquo;<span class="samp">&#8288;\123&#8288;</span>&rsquo;.  The three digits following the &lsquo;<span class="samp">&#8288;\&#8288;</span>&rsquo;
specify an octal code for a character.  For example, the octal
code for <code>p</code> is 160 so the strings <code>"p"</code> and
<code>"\160"</code> are equivalent. This is useful for producing
characters when there is not an appropriate key on your keyboard.
</p>
<p>The other useful escape sequences all begin with &lsquo;<span class="samp">&#8288;\\&#8288;</span>&rsquo;.
These are described below.  Remember that backslashes have to be
doubled in <span class="rlang"><b>R</b></span> character strings, so they need to be entered with
<em>four</em> backslashes.
</p>
</dd>
<dt>Symbols:</dt><dd><p>an entire string of Greek symbols can be produced by
selecting the HersheySymbol or HersheySansSymbol family or the
Serif Symbol or Sans Serif Symbol typeface.  To allow Greek
symbols to be embedded in a string which uses a non-symbol
typeface, there are a set of symbol escape sequences of the form
&lsquo;<span class="samp">&#8288;\\ab&#8288;</span>&rsquo;. For example, the escape sequence &lsquo;<span class="samp">&#8288;\\*a&#8288;</span>&rsquo;
produces a Greek alpha.  The second table in <code>demo(Hershey)</code>
shows all of the symbol escape sequences and the symbols that they
produce.
</p>
</dd>
<dt>ISO Latin-1:</dt><dd><p>further escape sequences of the form
&lsquo;<span class="samp">&#8288;\\ab&#8288;</span>&rsquo; are provided for producing ISO Latin-1 characters.
Another option is to use the appropriate octal code.  The
(non-ASCII) ISO Latin-1 characters are in the range 241...377.
For example, &lsquo;<span class="samp">&#8288;\366&#8288;</span>&rsquo; produces the character o with an umlaut.
The third table in <code>demo(Hershey)</code> shows all of the ISO
Latin-1 escape sequences.
</p>
<p>These characters can be used directly.  (Characters not in Latin-1
are replaced by a dot.)
</p>
<p>Several characters are missing, c-cedilla has no cedilla and
&lsquo;sharp s&rsquo; (&lsquo;<span class="samp">&#8288;U+00DF&#8288;</span>&rsquo;, also known as &lsquo;esszett&rsquo;)
is rendered as <code>ss</code>.
</p>
</dd>
<dt>Special Characters:</dt><dd><p>a set of characters are provided which
do not fall into any standard font.  These can only be accessed by
escape sequence.  For example, &lsquo;<span class="samp">&#8288;\\LI&#8288;</span>&rsquo; produces the zodiac sign for
Libra, and &lsquo;<span class="samp">&#8288;\\JU&#8288;</span>&rsquo; produces the astronomical sign for Jupiter.
The fourth table in <code>demo(Hershey)</code> shows all of the
special character escape sequences.
</p>
</dd>
<dt>Cyrillic Characters:</dt><dd><p>cyrillic characters are implemented
according to the K018-R encoding, and can be used directly in such
a locale using the Serif typeface and Cyrillic (or Oblique Cyrillic)
fontindex.  Alternatively they can be specified via an octal code
in the range 300 to 337 for lower case characters or 340 to 377 for
upper case characters.  The fifth table in <code>demo(Hershey)</code> shows the
octal codes for the available Cyrillic characters.
</p>
<p>Cyrillic has to be selected via a <code>("serif", fontindex)</code> pair
rather than via a font family.
</p>
</dd>
<dt>Japanese Characters:</dt><dd><p>83 Hiragana, 86 Katakana, and 603 Kanji
characters are implemented according to the EUC-JP (Extended Unix Code)
encoding. Each character is identified by a unique hexadecimal code.
The Hiragana characters
are in the range 0x2421 to 0x2473, Katakana are in the range 0x2521 to
0x2576, and Kanji are (scattered about) in the range 0x3021 to 0x6d55.
</p>
<p>When using the Serif typeface and EUC
fontindex, these characters can be produced by a <em>pair</em> of octal
codes.  Given the hexadecimal code (e.g., 0x2421), take the first two
digits and add 0x80 and do the same to the second two digits (e.g.,
0x21 and 0x24 become 0xa4 and 0xa1), then convert both to octal (e.g.,
0xa4 and 0xa1 become 244 and 241).  For example, the first Hiragana
character is produced by &lsquo;<span class="samp">&#8288;\244\241&#8288;</span>&rsquo;.
</p>
<p>It is also possible to use the hexadecimal code directly.  This works
for all non-EUC fonts by specifying an escape sequence of the form
&lsquo;<span class="samp">&#8288;\\#J1234&#8288;</span>&rsquo;.  For example, the first Hiragana character is produced
by &lsquo;<span class="samp">&#8288;\\#J2421&#8288;</span>&rsquo;.
</p>
<p>The Kanji characters may be specified in a third way, using the
so-called &quot;Nelson Index&quot;, by specifying an escape sequence of the form
&lsquo;<span class="samp">&#8288;\\#N1234&#8288;</span>&rsquo;.  For example, the (obsolete) Kanji for &lsquo;one&rsquo; is
produced by &lsquo;<span class="samp">&#8288;\\#N0001&#8288;</span>&rsquo;.
</p>
<p><code>demo(Japanese)</code> shows the available Japanese characters.
</p>
</dd>
<dt>Raw Hershey Glyphs:</dt><dd><p>all of the characters in the Hershey
fonts are stored in a large array.  Some characters are not
accessible in any of the Hershey fonts.  These characters can only
be accessed via an escape sequence of the form &lsquo;<span class="samp">&#8288;\\#H1234&#8288;</span>&rsquo;.
For example, the fleur-de-lys is produced by &lsquo;<span class="samp">&#8288;\\#H0746&#8288;</span>&rsquo;.
The sixth and seventh tables of <code>demo(Hershey)</code> shows all of
the available raw glyphs.
</p>
</dd>
</dl>



<h3>References</h3>

<p><a href="https://www.gnu.org/software/plotutils/plotutils.html">https://www.gnu.org/software/plotutils/plotutils.html</a>.
</p>


<h3>See Also</h3>

 <p><code><a href="utils.html#topic+demo">demo</a>(Hershey)</code>, <code><a href="graphics.html#topic+par">par</a></code>,
<code><a href="graphics.html#topic+text">text</a></code>, <code><a href="graphics.html#topic+contour">contour</a></code>.
</p>
<p><code><a href="#topic+Japanese">Japanese</a></code> for the Japanese characters in the Hershey fonts.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Hershey

## for tables of examples, see demo(Hershey)
</code></pre>

<hr>
<h2 id='hsv'>HSV Color Specification</h2><span id='topic+hsv'></span>

<h3>Description</h3>

<p>Create a vector of colors from vectors specifying hue, saturation and
value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hsv(h = 1, s = 1, v = 1, alpha)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hsv_+3A_h">h</code>, <code id="hsv_+3A_s">s</code>, <code id="hsv_+3A_v">v</code></td>
<td>
<p>numeric vectors of values in the range <code>[0, 1]</code> for
&lsquo;hue&rsquo;, &lsquo;saturation&rsquo; and &lsquo;value&rsquo; to be combined
to form a vector of colors.  Values in shorter arguments are
recycled.</p>
</td></tr>
<tr><td><code id="hsv_+3A_alpha">alpha</code></td>
<td>
<p>numeric vector of values in the range <code>[0, 1]</code> for
alpha transparency channel (0 means transparent and 1 means opaque).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Semi-transparent colors (<code>0 &lt; alpha &lt; 1</code>) are supported only on
some devices: see <code><a href="#topic+rgb">rgb</a></code>.
</p>


<h3>Value</h3>

<p>This function creates a vector of colors corresponding to the
given values in HSV space.  The values returned by <code>hsv</code> can be
used with a <code>col=</code> specification in graphics functions or in
<code>par</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+hcl">hcl</a></code> for a perceptually based version of <code>hsv()</code>,
<code><a href="#topic+rgb">rgb</a></code> and <code><a href="#topic+rgb2hsv">rgb2hsv</a></code> for RGB to HSV conversion;
<code><a href="#topic+rainbow">rainbow</a></code>,
<code><a href="#topic+gray">gray</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(graphics)

hsv(.5,.5,.5)

## Red tones:
n &lt;- 20;  y &lt;- -sin(3*pi*((1:n)-1/2)/n)
op &lt;- par(mar = rep(1.5, 4))
plot(y, axes = FALSE, frame.plot = TRUE,
     xlab = "", ylab = "", pch = 21, cex = 30,
     bg = rainbow(n, start = .85, end = .1),
     main = "Red tones")
par(op)
</code></pre>

<hr>
<h2 id='Japanese'>Japanese characters in R</h2><span id='topic+Japanese'></span>

<h3>Description</h3>

<p>The implementation of Hershey vector fonts provides a large number of
Japanese characters (Hiragana, Katakana, and Kanji).
</p>


<h3>Details</h3>

<p>Without keyboard support for typing Japanese characters, the only way
to produce these characters is to use special escape sequences: see
<code><a href="#topic+Hershey">Hershey</a></code>.
</p>
<p>For example, the Hiragana character for the sound &lsquo;ka&rsquo; is produced
by &lsquo;<span class="samp">&#8288;\\#J242b&#8288;</span>&rsquo; and the Katakana character for this sound is
produced by &lsquo;<span class="samp">&#8288;\\#J252b&#8288;</span>&rsquo;.  The Kanji ideograph for &quot;one&quot; is
produced by &lsquo;<span class="samp">&#8288;\\#J306c&#8288;</span>&rsquo; or &lsquo;<span class="samp">&#8288;\\#N0001&#8288;</span>&rsquo;.
</p>
<p>The output from <code><a href="utils.html#topic+demo">demo</a>(Japanese)</code> shows tables of the escape
sequences for the available Japanese characters.
</p>


<h3>References</h3>

<p><a href="https://www.gnu.org/software/plotutils/plotutils.html">https://www.gnu.org/software/plotutils/plotutils.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+demo">demo</a>(Japanese)</code>, <code><a href="#topic+Hershey">Hershey</a></code>, <code><a href="graphics.html#topic+text">text</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(graphics)

plot(1:9, type = "n", axes = FALSE, frame.plot = TRUE, ylab = "",
     main = "example(Japanese)", xlab = "using Hershey fonts")
par(cex = 3)
Vf &lt;- c("serif", "plain")
text(4, 2, "\\#J244b\\#J245b\\#J2473", vfont = Vf)
text(4, 4, "\\#J2538\\#J2563\\#J2551\\#J2573", vfont = Vf)
text(4, 6, "\\#J467c\\#J4b5c", vfont = Vf)
text(4, 8, "Japan", vfont = Vf)
par(cex = 1)
text(8, 2, "Hiragana")
text(8, 4, "Katakana")
text(8, 6, "Kanji")
text(8, 8, "English")
</code></pre>

<hr>
<h2 id='make.rgb'>Create colour spaces </h2><span id='topic+make.rgb'></span><span id='topic+colorConverter'></span>

<h3>Description</h3>

<p>These functions specify colour spaces for use in
<code><a href="#topic+convertColor">convertColor</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make.rgb(red, green, blue, name = NULL, white = "D65",
         gamma = 2.2)

colorConverter(toXYZ, fromXYZ, name, white = NULL, vectorized = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make.rgb_+3A_red">red</code>, <code id="make.rgb_+3A_green">green</code>, <code id="make.rgb_+3A_blue">blue</code></td>
<td>
<p>Chromaticity (xy or xyY) of RGB primaries</p>
</td></tr>
<tr><td><code id="make.rgb_+3A_name">name</code></td>
<td>
<p>Name for the colour space</p>
</td></tr>
<tr><td><code id="make.rgb_+3A_white">white</code></td>
<td>
<p>Character string specifying the reference white (see
&lsquo;Details&rsquo;.)</p>
</td></tr>
<tr><td><code id="make.rgb_+3A_gamma">gamma</code></td>
<td>
<p>Display gamma (nonlinearity). A positive number or the
string <code>"sRGB"</code> </p>
</td></tr>
<tr><td><code id="make.rgb_+3A_fromxyz">fromXYZ</code></td>
<td>
<p>Function to convert from <abbr>XYZ</abbr> tristimulus coordinates
to this space</p>
</td></tr>
<tr><td><code id="make.rgb_+3A_toxyz">toXYZ</code></td>
<td>
<p>Function to convert from this space to <abbr>XYZ</abbr> tristimulus
coordinates.</p>
</td></tr>
<tr><td><code id="make.rgb_+3A_vectorized">vectorized</code></td>
<td>
<p>Whether <code>fromXYZ</code> and <code>toXYZ</code> are
vectorized internally to handle input color matrices.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An RGB colour space is defined by the chromaticities of the  red, green and
blue primaries.  These are given as vectors of length 2 or 3 in xyY
coordinates (the Y component is not used and may be omitted).
The chromaticities are defined relative to a reference white, which
must be one of the CIE standard illuminants: &quot;A&quot;, &quot;B&quot;, &quot;C&quot;,
&quot;D50&quot;, &quot;D55&quot;, &quot;D60&quot;, &quot;E&quot; (usually &quot;D65&quot;).
</p>
<p>The display gamma is most commonly 2.2, though 1.8 is used for Apple RGB.
The <abbr>sRGB</abbr> standard specifies a more complicated function that is close
to a gamma of 2.2; <code>gamma = "sRGB"</code> uses this function.
</p>
<p>Colour spaces other than RGB can be specified directly by giving
conversions to and from <abbr>XYZ</abbr> tristimulus coordinates.
The functions  should take two arguments. The first is a vector giving the
coordinates for one colour. The second argument is the reference
white. If a specific reference white is included in the definition of
the colour space (as for the RGB spaces) this second argument should
be ignored and may be <code>...</code>.
</p>
<p>As of R 3.6.0 the built in color converters along with
<code><a href="#topic+convertColor">convertColor</a></code> were vectorized to process three column
color matrices in one call, instead of row by row via <code><a href="base.html#topic+apply">apply</a></code>.
In order to maintain backwards compatibility, <code>colorConverter</code> wraps
<code>fromXYZ</code> and <code>toXYZ</code> in a <code>apply</code> loop in case they do not
also support matrix inputs.  If the <code>fromXYZ</code> and <code>toXYZ</code> functions
you are using operate correctly on the whole color matrix at once instead of
row by row, you can set <code>vectorized=TRUE</code> for a performance improvement.
</p>


<h3>Value</h3>

<p>An object of class <code>colorConverter</code>
</p>


<h3>References</h3>

<p>Conversion algorithms from <a href="http://www.brucelindbloom.com">http://www.brucelindbloom.com</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+convertColor">convertColor</a>
  </code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>(pal &lt;- make.rgb(red =   c(0.6400, 0.3300),
                 green = c(0.2900, 0.6000),
                 blue =  c(0.1500, 0.0600),
                 name = "PAL/SECAM RGB"))

## converter for sRGB in #rrggbb format
hexcolor &lt;- colorConverter(toXYZ = function(hex, ...) {
                            rgb &lt;- t(col2rgb(hex))/255
                            colorspaces$sRGB$toXYZ(rgb, ...) },
                           fromXYZ = function(xyz, ...) {
                              rgb &lt;- colorspaces$sRGB$fromXYZ(xyz, ...)
                              rgb &lt;- round(rgb, 5)
                              if (min(rgb) &lt; 0 || max(rgb) &gt; 1)
                                   as.character(NA)
                              else rgb(rgb[1], rgb[2], rgb[3])},
                           white = "D65", name = "#rrggbb")

(cols &lt;- t(col2rgb(palette())))
zapsmall(luv &lt;- convertColor(cols, from = "sRGB", to = "Luv", scale.in = 255))
(hex &lt;- convertColor(luv, from = "Luv",  to = hexcolor, scale.out = NULL))

## must make hex a matrix before using it
(cc &lt;- round(convertColor(as.matrix(hex), from = hexcolor, to = "sRGB",
                          scale.in = NULL, scale.out = 255)))
stopifnot(cc == cols)

## Internally vectorized version of hexcolor, notice the use
## of `vectorized = TRUE`:

hexcolorv &lt;- colorConverter(toXYZ = function(hex, ...) {
                            rgb &lt;- t(col2rgb(hex))/255
                            colorspaces$sRGB$toXYZ(rgb, ...) },
                           fromXYZ = function(xyz, ...) {
                              rgb &lt;- colorspaces$sRGB$fromXYZ(xyz, ...)
                              rgb &lt;- round(rgb, 5)
                              oob &lt;- pmin(rgb[,1],rgb[,2],rgb[,3]) &lt; 0 |
                                     pmax(rgb[,1],rgb[,2],rgb[,3]) &gt; 0
                              res &lt;- rep(NA_character_, nrow(rgb))
                              res[!oob] &lt;- rgb(rgb[!oob,,drop=FALSE])},
                           white = "D65", name = "#rrggbb",
                           vectorized=TRUE)
(ccv &lt;- round(convertColor(as.matrix(hex), from = hexcolor, to = "sRGB",
                           scale.in = NULL, scale.out = 255)))
stopifnot(ccv == cols)

</code></pre>

<hr>
<h2 id='msgWindow'>Manipulate a Window</h2><span id='topic+msgWindow'></span>

<h3>Description</h3>

<p><code>msgWindow</code> sends a message to manipulate the specified screen
device's window.  With argument <code>which = -1</code> it applies to the GUI
console (which only accepts the first three actions).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>msgWindow(type = c("minimize", "restore", "maximize",
                   "hide", "recordOn", "recordOff"),
          which = dev.cur())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="msgWindow_+3A_type">type</code></td>
<td>
<p>action to be taken.</p>
</td></tr>
<tr><td><code id="msgWindow_+3A_which">which</code></td>
<td>
<p>a device number, or <code>-1</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+bringToTop">bringToTop</a></code>, <code><a href="#topic+windows">windows</a></code>
</p>

<hr>
<h2 id='n2mfrow'>Compute Default <code>mfrow</code> From Number of Plots</h2><span id='topic+n2mfrow'></span>

<h3>Description</h3>

<p>Easy setup for plotting multiple figures (in a rectangular layout) on
one page.  This computes a sensible default for
<code><a href="graphics.html#topic+par">par</a>(mfrow)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>n2mfrow(nr.plots, asp = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="n2mfrow_+3A_nr.plots">nr.plots</code></td>
<td>
<p>integer; the number of plot figures you'll want to draw.</p>
</td></tr>
<tr><td><code id="n2mfrow_+3A_asp">asp</code></td>
<td>
<p>positive number; the target aspect ratio (columns / rows) in
the output.  Was implicitly hardwired to <code>1</code>; because of that and
back compatibility, there is a somewhat discontinuous behavior when
varying <code>asp</code> around 1, for <code>nr.plots &lt;= 12</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A length-two integer vector <code>(nr, nc)</code> giving the positive number of rows
and columns, fulfilling <code>nr * nc &gt;= nr.plots</code>, and currently, for
<code>asp = 1</code>, <code>nr &gt;= nc &gt;= 1</code>.
</p>


<h3>Note</h3>

<p>Conceptually, this is a quadratic integer optimization problem, with
inequality constraints <code class="reqn">nr &gt;= 1</code>, <code class="reqn">nc &gt;= 1</code>, and
<code class="reqn">nr.plots &gt;= nr*nc</code> (and possibly <code>nr &gt;= asp*nc</code>),
and <em>two</em> objective functions which would have to be combined via a
tuning weight, say <code class="reqn">w</code>, to, e.g.,
<code class="reqn">(nr.plots - nr*nc)  + w |nr/nc - asp|</code>.
</p>
<p>The current algorithm is simple and not trying to solve one of these
optimization problems.
</p>


<h3>Author(s)</h3>

<p>Martin Maechler; suggestion of <code>asp</code> by Michael Chirico.</p>


<h3>See Also</h3>

<p><code><a href="graphics.html#topic+par">par</a></code>, <code><a href="graphics.html#topic+layout">layout</a></code>.</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(graphics)

n2mfrow(8) # 3 x 3

n &lt;- 5 ; x &lt;- seq(-2, 2, length.out = 51)
## suppose now that 'n' is not known {inside function}
op &lt;- par(mfrow = n2mfrow(n))
for (j in 1:n)
   plot(x, x^j, main = substitute(x^ exp, list(exp = j)), type = "l",
   col = "blue")

sapply(1:14, n2mfrow)
sapply(1:14, n2mfrow, asp=16/9)
</code></pre>

<hr>
<h2 id='nclass'>Compute the Number of Classes for a Histogram</h2><span id='topic+nclass.Sturges'></span><span id='topic+nclass.scott'></span><span id='topic+nclass.FD'></span>

<h3>Description</h3>

<p>Compute the number of classes for a histogram, notably <code><a href="graphics.html#topic+hist">hist</a>()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nclass.Sturges(x)
nclass.scott(x)
nclass.FD(x, digits = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nclass_+3A_x">x</code></td>
<td>
<p>a data vector.</p>
</td></tr>
<tr><td><code id="nclass_+3A_digits">digits</code></td>
<td>
<p>number of <em>significant</em> digits to keep when rounding
<code>x</code> before the <code><a href="stats.html#topic+IQR">IQR</a></code> computation; see &lsquo;Details&rsquo; below.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>nclass.Sturges</code> uses Sturges' formula, implicitly basing bin
sizes on the range of the data.
</p>
<p><code>nclass.scott</code> uses Scott's choice for a normal distribution based on
the estimate of the standard error, unless that is zero where it
returns <code>1</code>.
</p>
<p><code>nclass.FD</code> uses the Freedman-Diaconis choice based on the
inter-quartile range (<code><a href="stats.html#topic+IQR">IQR</a>(signif(x, digits))</code>) unless that's
zero where it uses increasingly more extreme symmetric quantiles up to
c(1,511)/512 and if that difference is still zero, reverts to using
Scott's choice.  The default of <code>digits = 5</code> was chosen after a few
experiments, but may be too low for some situations, see <a href="https://bugs.R-project.org/show_bug.cgi?id=17274">PR#17274</a>.
</p>


<h3>Value</h3>

<p>The suggested number of classes.
</p>


<h3>References</h3>

<p>Venables, W. N. and Ripley, B. D. (2002)
<em>Modern Applied Statistics with S-PLUS.</em>
Springer, page 112.
</p>
<p>Freedman, D. and Diaconis, P. (1981).
On the histogram as a density estimator: <code class="reqn">L_2</code> theory.
<em>Zeitschrift fr Wahrscheinlichkeitstheorie
und verwandte Gebiete</em>, <b>57</b>, 453&ndash;476.
<a href="https://doi.org/10.1007/BF01025868">doi:10.1007/BF01025868</a>.
</p>
<p>Scott, D. W. (1979).
On optimal and data-based histograms.
<em>Biometrika</em>, <b>66</b>, 605&ndash;610.
<a href="https://doi.org/10.2307/2335182">doi:10.2307/2335182</a>.
</p>
<p>Scott, D. W. (1992)
<em>Multivariate Density Estimation. Theory, Practice, and
Visualization</em>. Wiley.
</p>
<p>Sturges, H. A. (1926).
The choice of a class interval.
<em>Journal of the American Statistical Association</em>, <b>21</b>,
65&ndash;66.
<a href="https://doi.org/10.1080/01621459.1926.10502161">doi:10.1080/01621459.1926.10502161</a>.
</p>


<h3>See Also</h3>

<p><code><a href="graphics.html#topic+hist">hist</a></code> and <code><a href="MASS.html#topic+truehist">truehist</a></code> (package
<a href="https://CRAN.R-project.org/package=MASS"><span class="pkg">MASS</span></a>);  <code><a href="KernSmooth.html#topic+dpih">dpih</a></code> (package
<a href="https://CRAN.R-project.org/package=KernSmooth"><span class="pkg">KernSmooth</span></a>) for a plugin bandwidth proposed by Wand(1995).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(1)
x &lt;- stats::rnorm(1111)
nclass.Sturges(x)

## Compare them:
NC &lt;- function(x) c(Sturges = nclass.Sturges(x),
      Scott = nclass.scott(x), FD = nclass.FD(x))
NC(x)
onePt &lt;- rep(1, 11)
NC(onePt) # no longer gives NaN
</code></pre>

<hr>
<h2 id='palette'>Set or View the Graphics Palette</h2><span id='topic+palette'></span><span id='topic+palette.pals'></span><span id='topic+palette.colors'></span>

<h3>Description</h3>

<p>View or manipulate the color palette which is used when <code>col=</code>
has a numeric index and supporting functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>palette(value)
palette.pals()
palette.colors(n = NULL, palette = "Okabe-Ito", alpha, recycle = FALSE,
               names = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="palette_+3A_value">value</code></td>
<td>
<p>an optional character vector specifying a new palette
(see Details).</p>
</td></tr>
<tr><td><code id="palette_+3A_n">n</code></td>
<td>
<p>the number of colors to select from a palette.  The default
<code><a href="base.html#topic+NULL">NULL</a></code> selects all colors of the given palette.</p>
</td></tr>
<tr><td><code id="palette_+3A_palette">palette</code></td>
<td>
<p>a valid palette name (one of <code>palette.pals()</code>).
The name is matched to the list of available palettes, ignoring
upper vs. lower case, spaces, dashes, etc. in the matching.</p>
</td></tr>
<tr><td><code id="palette_+3A_alpha">alpha</code></td>
<td>
<p>an alpha-transparency level in the range [0,1]
(0 means transparent and 1 means opaque).</p>
</td></tr>
<tr><td><code id="palette_+3A_recycle">recycle</code></td>
<td>
<p>logical indicating what happens in case <code>n &gt;
      length(palette(.))</code>.  By default (<code>recycle = FALSE</code>), the
result is as for <code>n = NULL</code>, but with a warning.</p>
</td></tr>
<tr><td><code id="palette_+3A_names">names</code></td>
<td>
<p>logical indicating whether a named vector of colors
should be returned or not (provided that the palette has any
names for its colors).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>palette()</code> function gets or sets the current palette,
the <code>palette.pals()</code> function  lists the available predefined
palettes, and the <code>palette.colors()</code> function
selects colors from the predefined palettes.
</p>
<p>The color palette and referring to colors by number (see
e.g. <code><a href="graphics.html#topic+par">par</a></code>) was provided for compatibility with S.
<span class="rlang"><b>R</b></span> extends and improves on the available set of palettes.
</p>
<p>If <code>value</code> has length 1, it is taken to be the name of a built-in
color palette.  The available palette names are returned by
<code>palette.pals()</code>.  It is also possible to specify <code>"default"</code>.
</p>
<p>If <code>value</code> has length greater than 1 it is assumed to contain a
description of the colors which are to make up the new palette.
The maximum size for a palette is 1024
entries.
</p>
<p>If <code>value</code> is omitted, no change is made to the current palette.
</p>
<p>There is only one palette setting for all devices in an <span class="rlang"><b>R</b></span> session.  If
the palette is changed, the new palette applies to all subsequent
plotting.
</p>
<p>The current palette also applies to re-plotting (for example if an
on-screen device is resized or <code><a href="#topic+dev.copy">dev.copy</a></code> or
<code><a href="#topic+replayPlot">replayPlot</a></code> is used).  The palette is recorded on the
display list at the start of each page and when it is changed.
</p>


<h3>Value</h3>

<p><code>palette()</code> returns a character vector giving the colors from the
palette which <em>was</em> in effect.
This is <code><a href="base.html#topic+invisible">invisible</a></code> unless the argument is omitted.
</p>
<p><code>palette.pals()</code> returns a character vector giving the names
of predefined palettes.
</p>
<p><code>palette.colors()</code> returns a vector of R colors. By default (if
<code>names = FALSE</code> the vector has no names. If <code>names = TRUE</code>,
the function attempts to return a named vector if possible, i.e.,
for those palettes that provide names for their colors (e.g.,
<code>"Okabe-Ito"</code>, <code>"Tableau 10"</code>, or <code>"Alphabet"</code>).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+colors">colors</a></code> for the vector of built-in named colors;
<code><a href="#topic+hsv">hsv</a></code>, <code><a href="#topic+gray">gray</a></code>,
<code><a href="#topic+hcl.colors">hcl.colors</a></code>, ... to construct colors.
</p>
<p><code><a href="#topic+adjustcolor">adjustcolor</a></code>, e.g., for tweaking existing palettes;
<code><a href="#topic+colorRamp">colorRamp</a></code> to interpolate colors, making custom palettes;
<code><a href="#topic+col2rgb">col2rgb</a></code> for translating colors to RGB 3-vectors.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(graphics)

palette()               # obtain the current palette
palette("R3");palette() # old default palette
palette("ggplot2")      # ggplot2-style palette
palette()

palette(hcl.colors(8, "viridis"))

(palette(gray(seq(0,.9,length.out = 25)))) # gray scales; print old palette
matplot(outer(1:100, 1:30), type = "l", lty = 1,lwd = 2, col = 1:30,
        main = "Gray Scales Palette",
        sub = "palette(gray(seq(0, .9, len=25)))")
palette("default")      # reset back to the default

## on a device where alpha transparency is supported,
##  use 'alpha = 0.3' transparency with the default palette :
mycols &lt;- adjustcolor(palette(), alpha.f = 0.3)
opal &lt;- palette(mycols)
x &lt;- rnorm(1000); xy &lt;- cbind(x, 3*x + rnorm(1000))
plot (xy, lwd = 2,
       main = "Alpha-Transparency Palette\n alpha = 0.3")
xy[,1] &lt;- -xy[,1]
points(xy, col = 8, pch = 16, cex = 1.5)
palette("default")

## List available built-in palettes
palette.pals()

## Demonstrate the colors 1:8 in different palettes using a custom matplot()
sinplot &lt;- function(main=NULL, n = 8) {
    x &lt;- outer(
	seq(-pi, pi, length.out = 50),
	seq(  0, pi, length.out = n),
	function(x, y) sin(x - y)
    )
    matplot(x, type = "l", lwd = 4, lty = 1, col = 1:n, ylab = "", main=main)
}
sinplot("default palette")

palette("R3");        sinplot("R3")
palette("Okabe-Ito"); sinplot("Okabe-Ito")
palette("Tableau")  ; sinplot("Tableau", n = 10)
palROB &lt;- colorRampPalette(c("red", "darkorange2", "blue"), space = "Lab")
palette(palROB(16)); sinplot("palROB(16)", n = 16)
palette("default") # reset

## color swatches for palette.colors()
palette.swatch &lt;- function(palette = palette.pals(), n = 8, nrow = 8,
                           border = "black", cex = 1, ...)
{
     cols &lt;- sapply(palette, palette.colors, n = n, recycle = TRUE)
     ncol &lt;- ncol(cols)
     nswatch &lt;- min(ncol, nrow)
     op &lt;- par(mar = rep(0.1, 4),
               mfrow = c(1, min(5, ceiling(ncol/nrow))),
     	       cex = cex, ...)
     on.exit(par(op))
     while (length(palette)) {
 	subset &lt;- seq_len(min(nrow, ncol(cols)))
 	plot.new()
 	plot.window(c(0, n), c(0.25, nrow + 0.25))
 	y &lt;- rev(subset)
 	text(0, y + 0.1, palette[subset], adj = c(0, 0))
 	y &lt;- rep(y, each = n)
 	rect(rep(0:(n-1), n), y, rep(1:n, n), y - 0.5,
 	     col = cols[, subset], border = border)
 	palette &lt;- palette[-subset]
 	cols    &lt;- cols [, -subset, drop = FALSE]
     }
}

palette.swatch()

palette.swatch(n = 26) # show full "Alphabet"; recycle most others
</code></pre>

<hr>
<h2 id='Palettes'>Color Palettes</h2><span id='topic+rainbow'></span><span id='topic+heat.colors'></span><span id='topic+terrain.colors'></span><span id='topic+topo.colors'></span><span id='topic+cm.colors'></span><span id='topic+hcl.colors'></span><span id='topic+hcl.pals'></span>

<h3>Description</h3>

<p>Create a vector of <code>n</code> contiguous colors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hcl.colors(n, palette = "viridis", alpha = NULL, rev = FALSE, fixup = TRUE)
hcl.pals(type = NULL)

rainbow(n, s = 1, v = 1, start = 0, end = max(1, n - 1)/n,
        alpha, rev = FALSE)
heat.colors(n, alpha, rev = FALSE)
terrain.colors(n, alpha, rev = FALSE)
topo.colors(n, alpha, rev = FALSE)
cm.colors(n, alpha, rev = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Palettes_+3A_n">n</code></td>
<td>
<p>the number of colors (<code class="reqn">\ge 1</code>) to be in the
palette.</p>
</td></tr>
<tr><td><code id="Palettes_+3A_palette">palette</code></td>
<td>
<p>a valid palette name (one of <code>hcl.pals()</code>).
The name is matched to the list of available palettes, ignoring
upper vs. lower case, spaces, dashes, etc. in the matching.</p>
</td></tr>
<tr><td><code id="Palettes_+3A_alpha">alpha</code></td>
<td>
<p>an alpha-transparency level in the range [0,1]
(0 means transparent and 1 means opaque), see argument
<code>alpha</code> in <code><a href="#topic+hsv">hsv</a></code> and <code><a href="#topic+hcl">hcl</a></code>, respectively.<br />
A <code><a href="base.html#topic+missing">missing</a></code>, i.e., not explicitly specified
<code>alpha</code> is equivalent to <code>alpha = NULL</code>, which does <em>not</em>
add opacity codes (<code>"FF"</code>) to the individual color hex codes.</p>
</td></tr>
<tr><td><code id="Palettes_+3A_rev">rev</code></td>
<td>
<p>logical indicating whether the ordering of the colors should
be reversed.</p>
</td></tr>
<tr><td><code id="Palettes_+3A_fixup">fixup</code></td>
<td>
<p>logical indicating whether the resulting color should be
corrected to RGB coordinates in [0,1], see <code><a href="#topic+hcl">hcl</a></code>.</p>
</td></tr>
<tr><td><code id="Palettes_+3A_type">type</code></td>
<td>
<p>the type of palettes to list: <code>"qualitative"</code>,
<code>"sequential"</code>, <code>"diverging"</code>, or <code>"divergingx"</code>.
<code>NULL</code> lists all palettes.</p>
</td></tr>
<tr><td><code id="Palettes_+3A_s">s</code>, <code id="Palettes_+3A_v">v</code></td>
<td>
<p>the &lsquo;saturation&rsquo; and &lsquo;value&rsquo; to be used
to complete the HSV color descriptions.</p>
</td></tr>
<tr><td><code id="Palettes_+3A_start">start</code></td>
<td>
<p>the (corrected) hue in [0,1] at which the rainbow
begins.</p>
</td></tr>
<tr><td><code id="Palettes_+3A_end">end</code></td>
<td>
<p>the (corrected) hue in [0,1] at which the rainbow ends.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All of these functions (except the helper function <code>hcl.pals</code>) create a
vector of <code>n</code> contiguous colors, either based on the HSV color space
(rainbow, heat, terrain, topography, and cyan-magenta colors) or the
perceptually-based <abbr>HCL</abbr> color space.
</p>
<p>HSV (hue-saturation-value) is a simple transformation of the RGB
(red-green-blue) space which was therefore a convenient choice for color
palettes in many software systems (see also <code><a href="#topic+hsv">hsv</a></code>). However, HSV
colors capture the perceptual properties hue, colorfulness/saturation/chroma,
and lightness/brightness/luminance/value only poorly and consequently
the corresponding palettes are typically not a good choice for statistical
graphics and data visualization.
</p>
<p>In contrast, <abbr>HCL</abbr> (hue-chroma-luminance) colors are much more suitable for
capturing human color perception (see also <code><a href="#topic+hcl">hcl</a></code>) and better color
palettes can be derived based on <abbr>HCL</abbr> coordinates.
Conceptually, three types of palettes are often distinguished:
</p>

<ul>
<li><p> Qualitative: For coding categorical information, i.e., where no
particular ordering of categories is available and every color should
receive the same perceptual weight.
</p>
</li>
<li><p> Sequential: For coding ordered/numeric information, i.e., where colors
go from high to low (or vice versa).
</p>
</li>
<li><p> Diverging: Designed for coding numeric information around a central
neutral value, i.e., where colors diverge from neutral to two extremes.
</p>
</li></ul>

<p>The <code>hcl.colors</code> function provides a basic and lean implementation of
the pre-specified palettes in the <span class="pkg">colorspace</span> package. In addition to the
types above, the functions distinguish &ldquo;diverging&rdquo; palettes where the two
arms are restricted to be rather balanced as opposed to flexible
&ldquo;divergingx&rdquo; palettes that combine two sequential palettes without any
restrictions. The latter group also includes the cividis palette as it is based
on two different hues (blue and yellow) but it is actually a sequential palette
(going from dark to light).
</p>
<p>The names of all available <abbr>HCL</abbr> palettes can be queried with the <code>hcl.pals</code>
function and they are also visualized by color swatches in the examples. Many of
the palettes closely approximate palettes of the same name from various other
packages (including <span class="pkg">RColorBrewer</span>, <span class="pkg">rcartocolor</span>, <span class="pkg">viridis</span>,
<span class="pkg">scico</span>, among others). 
</p>
<p>The default <abbr>HCL</abbr> palette is the widely used viridis palette which is a sequential
palette with relatively high chroma throughout so that it also works reasonably
well as a qualitative palette. However, while viridis is a rather robust default
palette, more suitable <abbr>HCL</abbr> palettes are available for most visualizations.
</p>
<p>For example, <code>"Dark 3"</code> works well for shading points or lines in
up to five groups, <code>"YlGnBu"</code> is a sequential palette similar to
<code>"viridis"</code> but with aligned chroma/luminance, and
<code>"Green-Brown"</code> or <code>"Blue-Red 3"</code> are colorblind-safe
diverging palettes.
</p>
<p>Further qualitative palettes are provided in the 
<code><a href="#topic+palette.colors">palette.colors</a></code> function. While the qualitative palettes in 
<code>hcl.colors</code> are always based on the same combination of chroma and 
luminance, the <code>palette.colors</code> vary in chroma and luminance up to 
a certain degree. The advantage of fixing chroma/luminance is that the 
perceptual weight of the resulting colors is more balanced. The 
advantage of allowing variation is that more distinguishable colors can 
be obtained, especially for viewers with color vision deficiencies.
</p>
<p>Note that the <code>rainbow</code> function implements the (in-)famous rainbow (or
jet) color palette that was used very frequently in many software packages but
has been widely criticized for its many perceptual problems.
It is specified by a <code>start</code> and <code>end</code> hue with red = 0,
yellow = <code class="reqn">\frac 1 6</code>, green = <code class="reqn">\frac 2 6</code>,
cyan = <code class="reqn">\frac 3 6</code>, blue = <code class="reqn">\frac 4 6</code>, and
magenta = <code class="reqn">\frac 5 6</code>. However, these are very flashy and unbalanced
with respect to both chroma and luminance which can lead to various optical
illusions. Also, the hues that are equispaced in RGB space tend to cluster at
the red, green, and blue primaries. Therefore, it is recommended to use a
suitable palette from <code>hcl.colors</code> instead of
<code>rainbow</code>.
</p>


<h3>Value</h3>

<p>A character vector <code>cv</code> containing either palette names (for
<code>hcl.pals</code>) or <code>n</code> hex color codes (for all other functions).
The latter can be used either to create a user-defined color palette for
subsequent graphics by <code><a href="#topic+palette">palette</a>(cv)</code>, a <code>col =</code> specification
in graphics functions or in <code>par</code>.
</p>


<h3>References</h3>

<p>Wikipedia (2019).
<abbr>HCL</abbr> color space &ndash; Wikipedia, The Free Encyclopedia.
<a href="https://en.wikipedia.org/w/index.php?title=HCL_color_space&amp;oldid=883465135">https://en.wikipedia.org/w/index.php?title=HCL_color_space&amp;oldid=883465135</a>.
Accessed March 26, 2019.
</p>
<p>Zeileis, A., Fisher, J. C., Hornik, K., Ihaka, R., McWhite, C. D., Murrell, P., Stauffer, R. and Wilke, C. O. (2020).
&ldquo;colorspace: A toolbox for manipulating and assessing colors and palettes.&rdquo;
<em>Journal of Statistical Software</em>, <b>96</b>(1), 1&ndash;49.
<a href="https://doi.org/10.18637/jss.v096.i01">doi:10.18637/jss.v096.i01</a>
</p>
<p>Ihaka, R. (2003).
&ldquo;Colour for presentation graphics.&rdquo;
Proceedings of the 3rd International Workshop on Distributed Statistical Computing (DSC 2003),
March 20-22, 2003, Technische Universitt Wien, Vienna, Austria.
<a href="https://www.R-project.org/conferences/DSC-2003/">https://www.R-project.org/conferences/DSC-2003/</a>.
</p>
<p>Zeileis, A., Hornik, K. and Murrell, P. (2009).
Escaping RGBland: Selecting colors for statistical graphics.
<em>Computational Statistics &amp; Data Analysis</em>, <b>53</b>, 3259&ndash;3270.
<a href="https://doi.org/10.1016/j.csda.2008.11.033">doi:10.1016/j.csda.2008.11.033</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+colors">colors</a></code>, <code><a href="#topic+palette">palette</a></code>,
<code><a href="#topic+gray.colors">gray.colors</a></code>,
<code><a href="#topic+hsv">hsv</a></code>,
<code><a href="#topic+hcl">hcl</a></code>, <code><a href="#topic+rgb">rgb</a></code>, <code><a href="#topic+gray">gray</a></code> and
<code><a href="#topic+col2rgb">col2rgb</a></code> for translating to RGB numbers.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require("graphics")

# color wheels in RGB/HSV and HCL space
par(mfrow = c(2, 2))
pie(rep(1, 12), col = rainbow(12), main = "RGB/HSV")
pie(rep(1, 12), col = hcl.colors(12, "Set 2"), main = "HCL")
par(mfrow = c(1, 1))

## color swatches for RGB/HSV palettes
demo.pal &lt;-
  function(n, border = if (n &lt; 32) "light gray" else NA,
           main = paste("color palettes;  n=", n),
           ch.col = c("rainbow(n, start=.7, end=.1)", "heat.colors(n)",
                      "terrain.colors(n)", "topo.colors(n)",
                      "cm.colors(n)"))
{
    nt &lt;- length(ch.col)
    i &lt;- 1:n; j &lt;- n / nt; d &lt;- j/6; dy &lt;- 2*d
    plot(i, i+d, type = "n", yaxt = "n", ylab = "", main = main)
    for (k in 1:nt) {
        rect(i-.5, (k-1)*j+ dy, i+.4, k*j,
             col = eval(str2lang(ch.col[k])), border = border)
        text(2*j,  k * j + dy/4, ch.col[k])
    }
}
demo.pal(16)

## color swatches for HCL palettes
hcl.swatch &lt;- function(type = NULL, n = 5, nrow = 11,
  border = if (n &lt; 15) "black" else NA) {
    palette &lt;- hcl.pals(type)
    cols &lt;- sapply(palette, hcl.colors, n = n)
    ncol &lt;- ncol(cols)
    nswatch &lt;- min(ncol, nrow)

    par(mar = rep(0.1, 4),
        mfrow = c(1, min(5, ceiling(ncol/nrow))),
        pin = c(1, 0.5 * nswatch),
        cex = 0.7)

    while (length(palette)) {
        subset &lt;- 1:min(nrow, ncol(cols))
        plot.new()
        plot.window(c(0, n), c(0, nrow + 1))
        text(0, rev(subset) + 0.1, palette[subset], adj = c(0, 0))
        y &lt;- rep(subset, each = n)
        rect(rep(0:(n-1), n), rev(y), rep(1:n, n), rev(y) - 0.5,
             col = cols[, subset], border = border)
        palette &lt;- palette[-subset]
        cols &lt;- cols[, -subset, drop = FALSE]
    }

    par(mfrow = c(1, 1), mar = c(5.1, 4.1, 4.1, 2.1), cex = 1)
}
hcl.swatch()
hcl.swatch("qualitative")
hcl.swatch("sequential")
hcl.swatch("diverging")
hcl.swatch("divergingx")

## heat maps with sequential HCL palette (purple)
image(volcano, col = hcl.colors(11, "purples", rev = TRUE))
filled.contour(volcano, nlevels = 10,
               color.palette = function(n, ...)
                   hcl.colors(n, "purples", rev = TRUE, ...))

## list available HCL color palettes
hcl.pals("qualitative")
hcl.pals("sequential")
hcl.pals("diverging")
hcl.pals("divergingx")
</code></pre>

<hr>
<h2 id='pdf'>PDF Graphics Device</h2><span id='topic+pdf'></span>

<h3>Description</h3>

<p><code>pdf</code> starts the graphics device driver for producing PDF
graphics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pdf(file = if(onefile) "Rplots.pdf" else "Rplot%03d.pdf",
    width, height, onefile, family, title, fonts, version,
    paper, encoding, bg, fg, pointsize, pagecentre, colormodel,
    useDingbats, useKerning, fillOddEven, compress)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pdf_+3A_file">file</code></td>
<td>
<p>a character string giving the file path.
See the section &lsquo;File specifications&rsquo; for further details.
</p>
</td></tr>
<tr><td><code id="pdf_+3A_width">width</code>, <code id="pdf_+3A_height">height</code></td>
<td>
<p>the width and height of the graphics region in
inches.  The default values are <code>7</code>.</p>
</td></tr>
<tr><td><code id="pdf_+3A_onefile">onefile</code></td>
<td>
<p>logical: if true (the default) allow multiple figures
in one file.  If false, generate a file with name containing the page
number for each page.  Defaults to <code>TRUE</code>, and forced to true
if <code>file</code> is a pipe.</p>
</td></tr>
<tr><td><code id="pdf_+3A_family">family</code></td>
<td>
<p>the initial font family to be used, normally as a
character string.  See the section &lsquo;Families&rsquo;.  Defaults to
<code>"Helvetica"</code>.</p>
</td></tr>
<tr><td><code id="pdf_+3A_title">title</code></td>
<td>
<p>title string to embed as the &lsquo;<span class="samp">&#8288;/Title&#8288;</span>&rsquo; field in the
file.  Defaults to <code>"R Graphics Output"</code>.</p>
</td></tr>
<tr><td><code id="pdf_+3A_fonts">fonts</code></td>
<td>
<p>a character vector specifying <span class="rlang"><b>R</b></span> graphics font family
names for additional fonts which will be included in the PDF file.
Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="pdf_+3A_version">version</code></td>
<td>
<p>a string describing the PDF version that will be
required to view the output.  This is a minimum, and will be
increased (with a warning) if necessary.  Defaults to <code>"1.4"</code>,
but see &lsquo;Details&rsquo;.</p>
</td></tr>
<tr><td><code id="pdf_+3A_paper">paper</code></td>
<td>
<p>the target paper size.  The choices are
<code>"a4"</code>, <code>"letter"</code>, <code>"legal"</code> (or <code>"us"</code>) and
<code>"executive"</code> (and these can be capitalized), or <code>"a4r"</code>
and <code>"USr"</code> for rotated (&lsquo;landscape&rsquo;).
The default is <code>"special"</code>, which means that the <code>width</code>
and <code>height</code> specify the paper size.  A further choice is
<code>"default"</code>; if this is selected, the
paper size is taken from the option <code>"papersize"</code>
if that is set and as <code>"a4"</code> if it is unset or empty.
Defaults to <code>"special"</code>.
</p>
</td></tr>
<tr><td><code id="pdf_+3A_encoding">encoding</code></td>
<td>
<p>the name of an encoding file.  Defaults to
<code>"default"</code>.  The latter is interpreted
</p>

<dl>
<dt>on Unix-alikes</dt><dd>
<p>as &lsquo;<span class="file">&quot;ISOLatin1.enc&quot;</span>&rsquo; unless the locale is recognized as
corresponding to a language using ISO 8859-{2,5,7,13,15} or KOI8-{R,U}.
</p>
</dd>
<dt>on Windows</dt><dd>
<p>as &lsquo;<span class="file">&quot;CP1250.enc&quot;</span>&rsquo; (Central European), <code>"CP1251.enc"</code> (Cyrillic),
<code>"CP1253.enc"</code> (Greek) or <code>"CP1257.enc"</code> (Baltic) if one
of those codepages is in use, otherwise &lsquo;<span class="file">&quot;WinAnsi.enc&quot;</span>&rsquo;
(codepage 1252).
</p>
</dd>
</dl>

<p>The file is looked for in the &lsquo;<span class="file">enc</span>&rsquo; directory of package
<span class="pkg">grDevices</span> if the path does not contain a path separator.  An
extension <code>".enc"</code> can be omitted.
</p>
</td></tr>
<tr><td><code id="pdf_+3A_bg">bg</code></td>
<td>
<p>the initial background color to be used.  Defaults to
<code>"transparent"</code>.</p>
</td></tr>
<tr><td><code id="pdf_+3A_fg">fg</code></td>
<td>
<p>the initial foreground color to be used.  Defaults to
<code>"black"</code>.</p>
</td></tr>
<tr><td><code id="pdf_+3A_pointsize">pointsize</code></td>
<td>
<p>the default point size to be used.  Strictly
speaking, in <abbr>bp</abbr>, that is 1/72 of an inch, but approximately in
points.  Defaults to <code>12</code>.</p>
</td></tr>
<tr><td><code id="pdf_+3A_pagecentre">pagecentre</code></td>
<td>
<p>logical: should the device region be centred on the
page? &ndash; is only relevant for <code>paper != "special"</code>.
Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="pdf_+3A_colormodel">colormodel</code></td>
<td>
<p>a character string describing the color model:
currently allowed values are <code>"srgb"</code>, <code>"gray"</code> (or
<code>"grey"</code>) and <code>"cmyk"</code>.  Defaults to <code>"srgb"</code>.  See section
&lsquo;Color models&rsquo;.</p>
</td></tr>
<tr><td><code id="pdf_+3A_usedingbats">useDingbats</code></td>
<td>
<p>logical.  Should small circles be rendered
<em>via</em> the Dingbats font?  Defaults to <code>FALSE</code>.
If <code>TRUE</code>, this can produce smaller and better output, but
can cause font display problems in broken PDF viewers: although this
font is one of the 14 guaranteed to be available in all PDF viewers,
that guarantee is not always honoured.
</p>
<p>For Unix-alikes (including macOS) see the &lsquo;Note&rsquo; for a
possible fix for some viewers.</p>
</td></tr>
<tr><td><code id="pdf_+3A_usekerning">useKerning</code></td>
<td>
<p>logical.  Should kerning corrections be included in
setting text and calculating string widths?  Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="pdf_+3A_filloddeven">fillOddEven</code></td>
<td>
<p>logical controlling the polygon fill mode:  see
<code><a href="graphics.html#topic+polygon">polygon</a></code> for details.  Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="pdf_+3A_compress">compress</code></td>
<td>
<p>logical.  Should PDF streams be generated with Flate
compression?  Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All arguments except <code>file</code> default to values given by
<code><a href="#topic+pdf.options">pdf.options</a>()</code>.  The ultimate defaults are quoted in the
arguments section.
</p>
<p><code>pdf()</code> opens the file <code>file</code> and the PDF commands needed to
plot any graphics requested are sent to that file.
</p>
<p>The <code>family</code> argument can be used to specify a PDF-specific
font family as the initial/default font for the device.  If additional
font families are to be used they should be included in the
<code>fonts</code> argument.
</p>
<p>If a device-independent <span class="rlang"><b>R</b></span> graphics font family is specified (e.g., via
<code>par(family = )</code> in the graphics package), the PDF device makes use
of the PostScript font mappings to convert the <span class="rlang"><b>R</b></span> graphics font family
to a PDF-specific font family description.  (See the
documentation for <code><a href="#topic+pdfFonts">pdfFonts</a></code>.)
</p>
<p>This device does <em>not</em> embed fonts in the PDF file, so it is only
straightforward to use mappings to the font families that can be
assumed to be available in any PDF viewer: <code>"Times"</code>
(equivalently <code>"serif"</code>), <code>"Helvetica"</code> (equivalently
<code>"sans"</code>) and <code>"Courier"</code> (equivalently <code>"mono"</code>).
Other families may be specified, but it is the user's responsibility
to ensure that these fonts are available on the system and third-party
software (e.g., Ghostscript) may be required to embed the fonts so
that the PDF can be included in other documents (e.g., LaTeX): see
<code><a href="#topic+embedFonts">embedFonts</a></code>.  The URW-based families described for
in section &lsquo;Families&rsquo;.can be used with viewers, platform dependently:
</p>

<dl>
<dt>on Unix-alikes</dt><dd><p>viewers set up to use URW fonts, which is
usual with those based on <code>xpdf</code> or Ghostscript.</p>
</dd>
<dt>on Windows</dt><dd><p>viewers such as GSView which utilise URW fonts.</p>
</dd>
</dl>

<p>Since <code><a href="#topic+embedFonts">embedFonts</a></code> makes use of Ghostscript, it should be
able to embed the URW-based families for use with other viewers.
</p>
<p>The PDF produced is fairly simple, with each page being represented as
a single stream (by default compressed and possibly with references to
raster images).  The <span class="rlang"><b>R</b></span> graphics model does not distinguish graphics
objects at the level of the driver interface.
</p>
<p>The <code>version</code> argument declares the version of PDF that gets
produced.  The version must be at least 1.2 when compression is used,
1.4 for semi-transparent output to be understood, and at least 1.3 if
CID fonts are to be used: if any of these features are used the
version number will be increased (with a warning).  (PDF 1.4 was first
supported by Acrobat 5 in 2001; it is very unlikely not to be
supported in a current viewer.)
</p>
<p>Line widths as controlled by <code>par(lwd = )</code> are in multiples of
1/96 inch.  Multiples less than 1 are allowed.  <code>pch = "."</code> with
<code>cex = 1</code> corresponds to a square of side 1/72 inch, which is
also the &lsquo;pixel&rsquo; size assumed for graphics parameters such as
<code>"cra"</code>.
</p>
<p>The <code>paper</code> argument sets the &lsquo;<span class="samp">&#8288;/MediaBox&#8288;</span>&rsquo; entry in the file,
which defaults to <code>width</code> by <code>height</code>.  If it is set to
something other than <code>"special"</code>, a device region of the
specified size is (by default) centred on the rectangle given by the
paper size: if either <code>width</code> or <code>height</code> is less
than <code>0.1</code> or too large to give a total margin of 0.5 inch, it is
reset to the corresponding paper dimension minus 0.5.  Thus if you
want the default behaviour of <code><a href="#topic+postscript">postscript</a></code> use
<code>pdf(paper = "a4r", width = 0, height = 0)</code> to centre the device region
on a landscape A4 page with 0.25 inch margins.
</p>
<p>When the background colour is fully transparent (as is the initial
default value), the PDF produced does not paint the background.  Most
PDF viewers will use a white canvas so the visual effect is if the
background were white.  This will not be the case when printing onto
coloured paper, though.
</p>


<h3>File specifications</h3>

<p>Tilde expansion (see <code><a href="base.html#topic+path.expand">path.expand</a></code>) is done on the
<code>file</code> argument.  An input with a marked encoding is converted to
the native encoding or an error is given.
</p>
<p>For use with <code>onefile = FALSE</code>, give a C integer format such as
<code>"Rplot%03d.pdf"</code> (the default in that case) which is expanded
using the page number, so this uses files &lsquo;<span class="file">Rplot001.pdf</span>&rsquo;, ...,
&lsquo;<span class="file">Rplot999.pdf</span>&rsquo;, &lsquo;<span class="file">Rplot1000.pdf</span>&rsquo;,
</p>
<p>A single integer format matching the <a href="base.html#topic+regular+20expression">regular expression</a>
<code>"%[#0 +=-]*[0-9.]*[diouxX]"</code> is allowed in <code>file</code>.  The
character string should not otherwise contain a <code>%</code>: if it is
really necessary, use <code>%%</code> in the string for <code>%</code> in the
file path.
</p>
<p>For <code>pdf</code>, <code>file</code> can be <code>NULL</code> when no external file
is created (effectively, no drawing occurs), but the device may still
be queried (e.g., for the size of text by (base graphics)
<code><a href="graphics.html#topic+strwidth">strwidth</a></code> or (<span class="pkg">grid</span>)
<code><a href="grid.html#topic+stringWidth">stringWidth</a></code>).
</p>


<h3>Families</h3>

<p>Font families are collections of fonts covering the five font faces,
(conventionally plain, bold, italic, bold-italic and symbol) selected
by the graphics parameter <code><a href="graphics.html#topic+par">par</a>(font = )</code> or the grid
parameter <code><a href="grid.html#topic+gpar">gpar</a>(fontface = )</code>.  Font families can be
specified either as an initial/default font family for the device
via the <code>family</code> argument or after the device is opened by
the graphics parameter <code><a href="graphics.html#topic+par">par</a>(family = )</code> or the grid
parameter <code><a href="grid.html#topic+gpar">gpar</a>(fontfamily = )</code>.  Families which will be
used in addition to the initial family must be specified in the
<code>fonts</code> argument when the device is opened.
</p>
<p>Font families are declared via a call to <code><a href="#topic+pdfFonts">pdfFonts</a></code>
or <code><a href="#topic+postscriptFonts">postscriptFonts</a></code>.
</p>
<p>The argument <code>family</code> specifies the initial/default font family
to be used.  In normal use it is one of <code>"AvantGarde"</code>,
<code>"Bookman"</code>, <code>"Courier"</code>, <code>"Helvetica"</code>,
<code>"Helvetica-Narrow"</code>, <code>"NewCenturySchoolbook"</code>,
<code>"Palatino"</code> or <code>"Times"</code>, and refers to the standard Adobe
PostScript fonts families of those names which are included (or
cloned) in all common PDF/PostScript renderers.
</p>
<p>Many PDF/PostScript renders (including those based on
Ghostscript) use the URW equivalents of these fonts, which are
<code>"URWGothic"</code>, <code>"URWBookman"</code>, <code>"NimbusMon"</code>,
<code>"NimbusSan"</code>, <code>"NimbusSanCond"</code>, <code>"CenturySch"</code>,
<code>"URWPalladio"</code> and <code>"NimbusRom"</code> respectively.  If your
viewer is using URW fonts, you will obtain access to more characters
and more appropriate metrics by using these names.  To make these
easier to remember, <code>"URWHelvetica" == "NimbusSan"</code> and
<code>"URWTimes" == "NimbusRom"</code> are also supported.  However, if the
viewer is not using URW fonts (for example Adobe Acrobat Reader) it
may substitute inappropriately or not render at all. (Consider using
<code><a href="#topic+embedFonts">embedFonts</a></code>.)
</p>
<p>As from <span class="rlang"><b>R</b></span> 4.4.0 there is support for URW 2.0 fonts in
families <code>"URW2Helvetica"</code> (with &lsquo;<span class="samp">&#8288;Oblique&#8288;</span>&rsquo; fonts),
<code>"URW2HelveticaItalic"</code> (with &lsquo;<span class="samp">&#8288;Italic&#8288;</span>&rsquo; fonts),
<code>"URW2Times"</code> and <code>"NimbusMonoPS"</code>.  As recent versions of
Ghostscript will render with (and embed) these fonts. these families
should be used instead of <code>"URWHelvetica"</code>, <code>"URWTimes"</code>,
<code>"NimbusSan"</code>, <code>"NimbusRom"</code>, and <code>"NimbusMon"</code>
</p>
<p>Another type of family makes use of CID-keyed fonts for East Asian
languages &ndash; see <code><a href="#topic+pdfFonts">pdfFonts</a></code>.
</p>
<p>The <code>family</code> argument is normally a character string naming a
font family, but family objects generated by <code><a href="#topic+Type1Font">Type1Font</a></code>
and <code><a href="#topic+CIDFont">CIDFont</a></code> are also accepted.  For compatibility with
earlier versions of <span class="rlang"><b>R</b></span>, the initial family can also be specified as a
vector of four or five <abbr>afm</abbr> files.
</p>
<p>Note that <span class="rlang"><b>R</b></span> does not embed the font(s) used in the PostScript output:
see <code><a href="#topic+embedFonts">embedFonts</a></code> for a utility to help do so.
</p>
<p>Viewers and embedding applications frequently substitute fonts for
those specified in the family, and the substitute will often have
slightly different font metrics. <code>useKerning = TRUE</code> spaces the
letters in the string using kerning corrections for the intended
family: this may look uglier than <code>useKerning = FALSE</code>.
</p>


<h3>Encodings</h3>

<p>Encodings describe which glyphs are used to display the character codes
(in the range 0&ndash;255).  Most commonly <span class="rlang"><b>R</b></span> uses ISOLatin1 encoding, and
the examples for <code><a href="graphics.html#topic+text">text</a></code> are in that encoding.  However,
the encoding used on machines running <span class="rlang"><b>R</b></span> may well be different, and by
using the <code>encoding</code> argument the glyphs can be matched to
encoding in use.  This suffices for European and Cyrillic languages,
but not for East Asian languages.  For the latter, composite CID fonts are
used.  These fonts are useful for other languages: for example they
may contain Greek glyphs. (The rest of this section applies only when CID
fonts are not used.)
</p>
<p>None of this will matter if only ASCII characters (codes 32&ndash;126) are
used as all the encodings (except <code>"TeXtext"</code>) agree over that
range.  Some encodings are supersets of ISOLatin1.  However, if
accented and special characters do not come out as you expect, you may
need to change the encoding.  Some other encodings are supplied with
<span class="rlang"><b>R</b></span>: <code>"ISOLatin2.enc"</code> (Central/Eastern Europe),
<code>"ISOLatin7.enc"</code> (ISO 8859-13, &lsquo;Baltic Rim&rsquo;),
<code>"ISOLatin9.enc"</code> (ISO 8859-15, including Euro),
<code>"Cyrillic.enc"</code> (ISO 8859-5), <code>"KOI8-R.enc"</code>,
<code>"KOI8-U.enc"</code>, and the Windows encodings <code>"WinAnsi.enc"</code>
(also known as <code>"CP1252.enc"</code>, <code>"CP1250.enc"</code>
(Central/Eastern Europe), <code>"CP1251.enc"</code> (Cyrillic),
<code>"Greek.enc"</code> (ISO 8859-7), <code>"CP1253.enc"</code> (modern Greek)
and <code>"CP1257.enc"</code> (&lsquo;Baltic Rim&rsquo;).  Note that many glyphs
in these encodings are not in the fonts corresponding to the standard
families.  (The Adobe ones for all but Courier, Helvetica and Times
cover little more than Latin-1, whereas the URW ones also cover
Latin-2, Latin-7, Latin-9 and Cyrillic but no Greek.  The Adobe
exceptions cover the Latin character sets, but not the Euro.)
</p>
<p>NB: support for encodings other than <code>"ISOLatin1.enc"</code> (and the
Windows ones on Windows) depends on support by the platform's
<code>libiconv</code> in a UTF-8 locale.
</p>
<p>If you specify the encoding, it is your responsibility to ensure that
the PostScript font contains the glyphs used.  One issue here is the
Euro symbol which is in several encodings (including WinAnsi and
ISOLatin9 encodings) but may well not be in the PostScript fonts.  (It
is in the URW variants; it is not in the supplied Adobe Font Metric
files so will not be centred correctly.)
</p>
<p>There is an exception.  Character 45 (<code>"-"</code>) is always set
as minus (its value in Adobe ISOLatin1) even though it is hyphen in
the other encodings.  Hyphen is available as character 173 (octal
0255) in all the Latin encodings, Cyrillic and Greek.  (This can be
entered as <code>"\u00ad"</code> in a UTF-8 locale.)  There are some
discrepancies in accounts of glyphs 39 and 96: the supplied encodings
(except CP1250 and CP1251) treat these as &lsquo;quoteright&rsquo; and
&lsquo;quoteleft&rsquo; (rather than &lsquo;quotesingle&rsquo;/&lsquo;acute&rsquo;
and &lsquo;grave&rsquo; respectively), as they are in the Adobe
documentation.
</p>


<h3>Color models</h3>

<p>The default color model (<code>"srgb"</code>) is <abbr>sRGB</abbr>.  Model <code>"gray"</code>
(or <code>"grey"</code>) maps <abbr>sRGB</abbr> colors to greyscale using perceived
luminosity (biased towards green).  <code>"cmyk"</code> outputs in CMYK
colorspace.  The simplest possible conversion from <abbr>sRGB</abbr> to CMYK is
used
(<a href="https://en.wikipedia.org/wiki/CMYK_color_model#Mapping_RGB_to_CMYK">https://en.wikipedia.org/wiki/CMYK_color_model#Mapping_RGB_to_CMYK</a>),
and raster images are output in RGB.
</p>
<p>Also available for backwards compatibility is model <code>"rgb"</code> which
uses uncalibrated RGB and corresponds to the model used with that name
in <span class="rlang"><b>R</b></span> prior to 2.13.0.  Some viewers may render some plots in that
colorspace faster than in <abbr>sRGB</abbr>, and the plot files will be smaller.
</p>


<h3>Conventions</h3>

<p>This section describes the implementation of the conventions for
graphics devices set out in the &lsquo;R Internals&rsquo; manual.
</p>

<ul>
<li><p> The default device size is 7 inches square.
</p>
</li>
<li><p> Font sizes are in big points.
</p>
</li>
<li><p> The default font family is Helvetica.
</p>
</li>
<li><p> Line widths are as a multiple of 1/96 inch, with a minimum
of 0.01 enforced.
</p>
</li>
<li><p> Circles of any radius are allowed.  If <code>useDingbats =
      TRUE</code>, opaque circles of less than 10 big points radius are
rendered using char 108 in the Dingbats font: all semi-transparent
and larger circles using a Bzier curve for each
quadrant.
</p>
</li>
<li><p> Colours are by default specified as <abbr>sRGB</abbr>.
</p>
</li></ul>

<p>At very small line widths, the line type may be forced to solid.
</p>


<h3>Printing</h3>

<p>Except on Windows it is possible to print directly from <code>pdf</code> by
something like (this is appropriate for a CUPS printing system):
</p>
<pre>    pdf("|lp -o landscape", paper = "a4r")</pre>
<p>This forces <code>onefile = TRUE</code>.
</p>


<h3>Note</h3>

<p>If you have drawn any typeset glyphs (see <code><a href="#topic+glyphInfo">glyphInfo</a></code>)
then it is <em>highly</em> recommended that you use
<code><a href="#topic+embedGlyphs">embedGlyphs</a></code> to embed the relevant fonts.
</p>


<h3>Note</h3>

<p>If you see problems with PDF output, do remember that the problem is
much more likely to be in your viewer than in <span class="rlang"><b>R</b></span>.  Try another
viewer if possible.  Symptoms for which the viewer has been at fault
are apparent grids on image plots (turn off graphics anti-aliasing
in your viewer if you can) and missing or incorrect glyphs in text
(viewers silently doing font substitution).
</p>
<p>Unfortunately the default viewers on most Linux and macOS systems
have these problems, and no obvious way to turn off graphics anti-aliasing.
</p>
<p>Acrobat Reader does not use the fonts specified but rather emulates
them from multiple-master fonts.  This can be seen in imprecise
centering of characters, for example the multiply and divide signs in
Helvetica.  This can be circumvented by embedding fonts where
possible.  Most other viewers substitute fonts, e.g. URW fonts
for the standard Helvetica and Times fonts, and these too often have
different font metrics from the true fonts.
</p>
<p>Acrobat Reader can be extended by &lsquo;font packs&rsquo;, and these will
be needed for the full use of encodings other than Latin-1 (although
they may be offered for download as needed).
</p>

<dl>
<dt>On some Unix-alike systems:</dt><dd>
<p>If <code>useDingbats = TRUE</code>,
the default plotting character <code>pch = 1</code> was
displayed in some PDF viewers incorrectly as a <code>"q"</code>
character.  (These seem to be viewers based on the &lsquo;<span class="samp">&#8288;poppler&#8288;</span>&rsquo; PDF
rendering library).  This may be due to incorrect or incomplete mapping
of font names to those used by the system.  Adding the following lines
to &lsquo;<span class="file">~/.fonts.conf</span>&rsquo; or &lsquo;<span class="file">/etc/fonts/local.conf</span>&rsquo; may circumvent
this problem, although this has largely been corrected on the affected
systems.
</p>
<pre>&lt;fontconfig&gt;
&lt;alias binding="same"&gt;
  &lt;family&gt;ZapfDingbats&lt;/family&gt;
  &lt;accept&gt;&lt;family&gt;Dingbats&lt;/family&gt;&lt;/accept&gt;
&lt;/alias&gt;
&lt;/fontconfig&gt;
</pre>
<p>Some further workarounds for problems with symbol fonts on
viewers using &lsquo;fontconfig&rsquo; are given in the &lsquo;Cairo Fonts&rsquo;
section of the help for <code><a href="#topic+X11">X11</a></code>.
</p>
</dd>
<dt>On Windows:</dt><dd>
<p>The TeXworks PDF viewer was one of those which has been seen to fail to
display Dingbats (used by e.g. <code>pch = 1</code>) correctly.
Whereas on other platforms the problems seen were incorrect output, on
Windows points were silently omitted: however recent versions seem to
manage to display Dingbats.
</p>
</dd>
</dl>

<p>There was a different font bug in the <code>pdf.js</code> viewer included
in Firefox: that mapped Dingbats to the Symbol font and so displayed
symbols such <code>pch = 1</code> as lambda.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pdfFonts">pdfFonts</a></code>, <code><a href="#topic+pdf.options">pdf.options</a></code>,
<code><a href="#topic+embedFonts">embedFonts</a></code>, <code><a href="#topic+glyphInfo">glyphInfo</a></code>,
<code><a href="#topic+Devices">Devices</a></code>,
<code><a href="#topic+postscript">postscript</a></code>.
</p>
<p><code><a href="#topic+cairo_pdf">cairo_pdf</a></code> and (on macOS only) <code><a href="#topic+quartz">quartz</a></code>
for other devices that can produce PDF.
</p>
<p>More details of font families and encodings and especially handling
text in a non-Latin-1 encoding and embedding fonts can be found in
</p>

<p>  Paul Murrell and Brian Ripley (2006).
  &ldquo;Non-standard fonts in PostScript and PDF graphics.&rdquo;
  <em>R News</em>, <b>6</b>(2), 41&ndash;47.
  <a href="https://www.r-project.org/doc/Rnews/Rnews_2006-2.pdf">https://www.r-project.org/doc/Rnews/Rnews_2006-2.pdf</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Test function for encodings
TestChars &lt;- function(encoding = "ISOLatin1", ...)
{
    pdf(encoding = encoding, ...)
    par(pty = "s")
    plot(c(-1,16), c(-1,16), type = "n", xlab = "", ylab = "",
         xaxs = "i", yaxs = "i")
         title(paste("Centred chars in encoding", encoding))
    grid(17, 17, lty = 1)
    for(i in c(32:255)) {
        x &lt;- i %% 16
        y &lt;- i %/% 16
        points(x, y, pch = i)
    }
    dev.off()
}
## there will be many warnings.
TestChars("ISOLatin2")
## this does not view properly in older viewers.
TestChars("ISOLatin2", family = "URWHelvetica")
## works well for viewing in gs-based viewers, and often in xpdf.
</code></pre>

<hr>
<h2 id='pdf.options'>Auxiliary Function to Set/View Defaults for Arguments of pdf</h2><span id='topic+pdf.options'></span>

<h3>Description</h3>

<p>The auxiliary function <code>pdf.options</code> can be used to set or view
(if called without arguments) the default values for some of the
arguments to <code><a href="#topic+pdf">pdf</a></code>.
</p>
<p><code>pdf.options</code> needs to be called before calling <code>pdf</code>,
and the default values it sets can be overridden by supplying
arguments to <code>pdf</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pdf.options(..., reset = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pdf.options_+3A_...">...</code></td>
<td>
<p>arguments <code>width</code>, <code>height</code>, <code>onefile</code>,
<code>family</code>, <code>title</code>, <code>fonts</code>, <code>paper</code>,
<code>encoding</code>, <code>pointsize</code>, <code>bg</code>, <code>fg</code>,
<code>pagecentre</code>, <code>useDingbats</code>, <code>colormodel</code>,
<code>fillOddEven</code> and <code>compress</code> can be supplied.</p>
</td></tr>
<tr><td><code id="pdf.options_+3A_reset">reset</code></td>
<td>
<p>logical: should the defaults be reset to their
&lsquo;factory-fresh&rsquo; values?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If both <code>reset = TRUE</code> and <code>...</code> are supplied the defaults
are first reset to the &lsquo;factory-fresh&rsquo; values and then the new
values are applied.
</p>


<h3>Value</h3>

<p>A named list of all the defaults.  If any arguments are
supplied the return values are the old values and the result has the
visibility flag turned off.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pdf">pdf</a></code>, <code><a href="#topic+ps.options">ps.options</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pdf.options(bg = "pink")
utils::str(pdf.options())
pdf.options(reset = TRUE) # back to factory-fresh
</code></pre>

<hr>
<h2 id='pictex'>A PicTeX Graphics Driver</h2><span id='topic+pictex'></span>

<h3>Description</h3>

<p>This function produces simple graphics suitable for inclusion in TeX
and LaTeX documents.  It dates from the very early days of <span class="rlang"><b>R</b></span> and is
for historical interest only.  It was deprecated in <span class="rlang"><b>R</b></span> 4.4.0.
Consider the <a href="https://CRAN.R-project.org/package=tikzDevice"><span class="pkg">tikzDevice</span></a> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pictex(file = "Rplots.tex", width = 5, height = 4, debug = FALSE,
       bg = "white", fg = "black")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pictex_+3A_file">file</code></td>
<td>
<p>the file path where output will appear.
Tilde expansion (see <code><a href="base.html#topic+path.expand">path.expand</a></code>) is done. An input with
a marked encoding is converted to the native encoding or an error is given.
</p>
</td></tr>
<tr><td><code id="pictex_+3A_width">width</code></td>
<td>
<p>The width of the plot in inches.</p>
</td></tr>
<tr><td><code id="pictex_+3A_height">height</code></td>
<td>
<p>the height of the plot in inches.</p>
</td></tr>
<tr><td><code id="pictex_+3A_debug">debug</code></td>
<td>
<p>should debugging information be printed.</p>
</td></tr>
<tr><td><code id="pictex_+3A_bg">bg</code></td>
<td>
<p>the background color for the plot.  Ignored.</p>
</td></tr>
<tr><td><code id="pictex_+3A_fg">fg</code></td>
<td>
<p>the foreground color for the plot.  Ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This driver is much more basic than the other graphics drivers
included in <span class="rlang"><b>R</b></span>.  It does not have any font metric information, so the
use of <code><a href="#topic+plotmath">plotmath</a></code> is not supported.
</p>
<p>Line widths are ignored except when setting the spacing of line textures.
<code>pch = "."</code> corresponds to a square of side 1pt.
</p>
<p>This device does not support colour (nor does the PicTeX package),
and all colour settings are ignored.
</p>
<p>Note that text is recorded in the file as-is, so annotations involving
TeX special characters (such as ampersand and underscore) need to be
quoted as they would be when entering TeX.
</p>
<p>Multiple plots will be placed as separate environments in the output file.
</p>


<h3>Conventions</h3>

<p>This section describes the implementation of the conventions for
graphics devices set out in the &lsquo;R Internals&rsquo; manual.
</p>

<ul>
<li><p> The default device size is 5 inches by 4 inches.
</p>
</li>
<li><p> There is no <code>pointsize</code> argument: the default size is
interpreted as 10 point.
</p>
</li>
<li><p> The only font family is <code>cmss10</code>.
</p>
</li>
<li><p> Line widths are only used when setting the spacing on line textures.
</p>
</li>
<li><p> Circle of any radius are allowed.
</p>
</li>
<li><p> Colour is not supported.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>This driver was provided around 1996&ndash;7 by Valerio Aimale
of the Department of Internal Medicine, University of Genoa, Italy.
</p>


<h3>References</h3>

<p>Knuth, D. E. (1984)
<em>The TeXbook.</em>
Reading, MA: Addison-Wesley.
</p>
<p>Lamport, L. (1994)
<em>LATEX: A Document Preparation System.</em>
Reading, MA: Addison-Wesley.
</p>
<p>Goossens, M., Mittelbach, F. and Samarin, A. (1994)
<em>The LATEX Companion.</em>
Reading, MA: Addison-Wesley.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pdf">pdf</a></code>, <code><a href="#topic+postscript">postscript</a></code>, <code><a href="#topic+Devices">Devices</a></code>.
</p>
<p>The <code>tikzDevice</code> in the CRAN package of that name for more modern
TeX-based graphics (<a href="https://pgf.sourceforge.net/">https://pgf.sourceforge.net/</a>, although
including PDF figures <em>via</em> <code>pdftex</code> is most common
in (La)TeX documents).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(graphics)


pictex()
plot(1:11, (-5:5)^2, type = "b", main = "Simple Example Plot")
dev.off()
##--------------------
## Not run: 
%% LaTeX Example
\documentclass{article}
\usepackage{pictex}
\usepackage{graphics} % for \rotatebox
\begin{document}
%...
\begin{figure}[h]
  \centerline{\input{Rplots.tex}}
  \caption{}
\end{figure}
%...
\end{document}

## End(Not run)
##--------------------
unlink("Rplots.tex")

</code></pre>

<hr>
<h2 id='plotmath'>Mathematical Annotation in R</h2><span id='topic+plotmath'></span><span id='topic+symbol'></span><span id='topic+plain'></span><span id='topic+bold'></span><span id='topic+italic'></span><span id='topic+bolditalic'></span><span id='topic+hat'></span><span id='topic+bar'></span><span id='topic+dot'></span><span id='topic+ring'></span><span id='topic+widehat'></span><span id='topic+widetilde'></span><span id='topic+displaystyle'></span><span id='topic+textstyle'></span><span id='topic+scriptstyle'></span><span id='topic+scriptscriptstyle'></span><span id='topic+underline'></span><span id='topic+phantom'></span><span id='topic+over'></span><span id='topic+frac'></span><span id='topic+atop'></span><span id='topic+integral'></span><span id='topic+inf'></span><span id='topic+sup'></span><span id='topic+group'></span><span id='topic+bgroup'></span>

<h3>Description</h3>

<p>If the <code>text</code> argument to one of the text-drawing functions
(<code><a href="graphics.html#topic+text">text</a></code>, <code><a href="graphics.html#topic+mtext">mtext</a></code>, <code><a href="graphics.html#topic+axis">axis</a></code>,
<code><a href="graphics.html#topic+legend">legend</a></code>) in <span class="rlang"><b>R</b></span> is an expression, the argument is
interpreted as a mathematical expression and the output will be
formatted according to TeX-like rules.  Expressions can also be used
for titles, subtitles and x- and y-axis labels (but not for axis
labels on <code>persp</code> plots).
</p>
<p>In most cases other language objects (names and calls, including
formulas) are coerced to expressions and so can also be used.
</p>


<h3>Details</h3>

<p>A mathematical expression must obey the normal rules of syntax for any
<span class="rlang"><b>R</b></span> expression, but it is interpreted according to very different rules
than for normal <span class="rlang"><b>R</b></span> expressions.
</p>
<p>It is possible to produce many different mathematical symbols, generate
sub- or superscripts, produce fractions, etc.
</p>
<p>The output from <code>demo(plotmath)</code> includes several tables which
show the available features.  In these tables, the columns of grey text
show sample <span class="rlang"><b>R</b></span> expressions, and the columns of black text show the
resulting output.
</p>
<p>The available features are also described in the tables below:
</p>

<table>
<tr>
 <td style="text-align: left;">
    <b>Syntax</b> </td><td style="text-align: left;"> <b>Meaning</b> </td>
</tr>
<tr>
 <td style="text-align: left;">

    <code>x + y</code>   </td><td style="text-align: left;"> x plus y   </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x - y</code>   </td><td style="text-align: left;"> x minus y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x*y</code>    </td><td style="text-align: left;"> juxtapose x and y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x/y</code>    </td><td style="text-align: left;"> x forwardslash y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %+-% y</code>   </td><td style="text-align: left;"> x plus or minus y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %/% y</code>   </td><td style="text-align: left;"> x divided by y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %*% y</code>   </td><td style="text-align: left;"> x times y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %.% y</code>   </td><td style="text-align: left;"> x cdot y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x[i]</code>   </td><td style="text-align: left;"> x subscript i </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x^2</code>    </td><td style="text-align: left;"> x superscript 2 </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>paste(x, y, z)</code> </td><td style="text-align: left;"> juxtapose x, y, and z </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>sqrt(x)</code>   </td><td style="text-align: left;"> square root of x </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>sqrt(x, y)</code>   </td><td style="text-align: left;"> y-th root of x </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x == y</code>   </td><td style="text-align: left;"> x equals y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x != y</code>   </td><td style="text-align: left;"> x is not equal to y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x &lt; y</code>   </td><td style="text-align: left;"> x is less than y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x &lt;= y</code>   </td><td style="text-align: left;"> x is less than or equal to y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x &gt; y</code>   </td><td style="text-align: left;"> x is greater than y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x &gt;= y</code>   </td><td style="text-align: left;"> x is greater than or equal to y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>!x</code> </td><td style="text-align: left;"> not x </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %~~% y</code>   </td><td style="text-align: left;"> x is approximately equal to y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %=~% y</code>   </td><td style="text-align: left;"> x and y are congruent </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %==% y</code>   </td><td style="text-align: left;"> x is defined as y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %prop% y</code>  </td><td style="text-align: left;"> x is proportional to y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %~% y</code>  </td><td style="text-align: left;"> x is distributed as y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>plain(x)</code>   </td><td style="text-align: left;"> draw x in normal font </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>bold(x)</code>   </td><td style="text-align: left;"> draw x in bold font </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>italic(x)</code>   </td><td style="text-align: left;"> draw x in italic font </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>bolditalic(x)</code> </td><td style="text-align: left;"> draw x in bold italic font </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>symbol(x)</code> </td><td style="text-align: left;"> draw x in symbol font </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>list(x, y, z)</code> </td><td style="text-align: left;"> comma-separated list </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>...</code>    </td><td style="text-align: left;"> ellipsis (height varies) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>cdots</code>   </td><td style="text-align: left;"> ellipsis (vertically centred) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>ldots</code>   </td><td style="text-align: left;"> ellipsis (at baseline) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %subset% y</code> </td><td style="text-align: left;"> x is a proper subset of y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %subseteq% y</code> </td><td style="text-align: left;"> x is a subset of y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %notsubset% y</code> </td><td style="text-align: left;"> x is not a subset of y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %supset% y</code> </td><td style="text-align: left;"> x is a proper superset of y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %supseteq% y</code> </td><td style="text-align: left;"> x is a superset of y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %in% y</code>   </td><td style="text-align: left;"> x is an element of y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %notin% y</code> </td><td style="text-align: left;"> x is not an element of y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>hat(x)</code>   </td><td style="text-align: left;"> x with a circumflex </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>tilde(x)</code>   </td><td style="text-align: left;"> x with a tilde </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>dot(x)</code> </td><td style="text-align: left;"> x with a dot </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>ring(x)</code>   </td><td style="text-align: left;"> x with a ring </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>bar(xy)</code>   </td><td style="text-align: left;"> xy with bar </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>widehat(xy)</code>   </td><td style="text-align: left;"> xy with a wide circumflex </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>widetilde(xy)</code> </td><td style="text-align: left;"> xy with a wide tilde </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %&lt;-&gt;% y</code>   </td><td style="text-align: left;"> x double-arrow y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %-&gt;% y</code>   </td><td style="text-align: left;"> x right-arrow y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %&lt;-% y</code>   </td><td style="text-align: left;"> x left-arrow y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %up% y</code>   </td><td style="text-align: left;"> x up-arrow y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %down% y</code>  </td><td style="text-align: left;"> x down-arrow y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %&lt;=&gt;% y</code>   </td><td style="text-align: left;"> x is equivalent to y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %=&gt;% y</code>   </td><td style="text-align: left;"> x implies y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %&lt;=% y</code>   </td><td style="text-align: left;"> y implies x </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %dblup% y</code>   </td><td style="text-align: left;"> x double-up-arrow y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x %dbldown% y</code> </td><td style="text-align: left;"> x double-down-arrow y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>alpha</code> -- <code>omega</code> </td><td style="text-align: left;"> Greek symbols </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>Alpha</code> -- <code>Omega</code> </td><td style="text-align: left;"> uppercase Greek symbols </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>theta1, phi1, sigma1, omega1</code> </td><td style="text-align: left;"> cursive Greek symbols</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>Upsilon1</code> </td><td style="text-align: left;"> capital upsilon with hook</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>aleph</code> </td><td style="text-align: left;"> first letter of Hebrew alphabet</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>infinity</code>   </td><td style="text-align: left;"> infinity symbol </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>partialdiff</code> </td><td style="text-align: left;"> partial differential symbol </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>nabla</code> </td><td style="text-align: left;"> nabla, gradient symbol</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>32*degree</code>   </td><td style="text-align: left;"> 32 degrees </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>60*minute</code>   </td><td style="text-align: left;"> 60 minutes of angle </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>30*second</code>   </td><td style="text-align: left;"> 30 seconds of angle </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>displaystyle(x)</code> </td><td style="text-align: left;"> draw x in normal size (extra spacing) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>textstyle(x)</code>  </td><td style="text-align: left;"> draw x in normal size </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>scriptstyle(x)</code> </td><td style="text-align: left;"> draw x in small size </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>scriptscriptstyle(x)</code> </td><td style="text-align: left;"> draw x in very small size </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>underline(x)</code>   </td><td style="text-align: left;"> draw x underlined</td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x ~~ y</code>        </td><td style="text-align: left;"> put extra space between x and y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x + phantom(0) + y</code> </td><td style="text-align: left;"> leave gap for "0", but don't draw it </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x + over(1, phantom(0))</code> </td><td style="text-align: left;"> leave vertical gap for "0" (don't draw) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>frac(x, y)</code>   </td><td style="text-align: left;"> x over y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>over(x, y)</code>   </td><td style="text-align: left;"> x over y </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>atop(x, y)</code>   </td><td style="text-align: left;"> x over y (no horizontal bar) </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>sum(x[i], i==1, n)</code> </td><td style="text-align: left;"> sum x[i] for i equals 1 to n </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>prod(plain(P)(X==x), x)</code> </td><td style="text-align: left;"> product of P(X=x) for all values of x </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>integral(f(x)*dx, a, b)</code> </td><td style="text-align: left;"> definite integral of f(x) wrt x </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>union(A[i], i==1, n)</code> </td><td style="text-align: left;"> union of A[i] for i equals 1 to n </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>intersect(A[i], i==1, n)</code> </td><td style="text-align: left;"> intersection of A[i] </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>lim(f(x), x %-&gt;% 0)</code> </td><td style="text-align: left;"> limit of f(x) as x tends to 0 </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>min(g(x), x &gt; 0)</code> </td><td style="text-align: left;"> minimum of g(x) for x greater than 0 </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>inf(S)</code>        </td><td style="text-align: left;"> infimum of S </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>sup(S)</code>   </td><td style="text-align: left;"> supremum of S </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x^y + z</code>   </td><td style="text-align: left;"> normal operator precedence </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x^(y + z)</code>    </td><td style="text-align: left;"> visible grouping of operands </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>x^{y + z}</code>  </td><td style="text-align: left;"> invisible grouping of operands </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>group("(",list(a, b),"]")</code> </td><td style="text-align: left;"> specify left and right delimiters </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>bgroup("(",atop(x,y),")")</code> </td><td style="text-align: left;"> use scalable delimiters </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>group(lceil, x, rceil)</code> </td><td style="text-align: left;"> special delimiters </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>group(lfloor, x, rfloor)</code> </td><td style="text-align: left;"> special delimiters </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>group(langle, list(x, y), rangle)</code> </td><td style="text-align: left;"> special delimiters </td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>

<p>The supported &lsquo;scalable delimiters&rsquo; are <code>| ( [ {</code>
and their right-hand versions.
<code>"."</code> is equivalent to <code>""</code>: the corresponding delimiter
will be omitted. Delimiter <code>||</code> is supported but has the same
effect as <code>|</code>.
The special delimiters <code>lceil</code>, <code>lfloor</code>, <code>langle</code>
(and their right-hand versions) are not scalable.
</p>
<p>Note that <code>paste</code> does not insert spaces when juxtaposing, unlike
(by default) the <span class="rlang"><b>R</b></span> function of that name.
</p>
<p>The symbol font uses Adobe Symbol encoding so, for example, a lower
case mu can be obtained either by the special symbol <code>mu</code> or by
<code>symbol("m")</code>.  This provides access to symbols that have no
special symbol name, for example, the universal, or forall, symbol is
<code>symbol("\042")</code>.  To see what symbols are available in this way
use <code>TestChars(font=5)</code> as given in the examples for
<code><a href="graphics.html#topic+points">points</a></code>: some are only available on some devices.
</p>
<p>Note to TeX users: TeX's &lsquo;<span class="samp">&#8288;\Upsilon&#8288;</span>&rsquo; is <code>Upsilon1</code>, TeX's
&lsquo;<span class="samp">&#8288;\varepsilon&#8288;</span>&rsquo; is close to <code>epsilon</code>, and there is no
equivalent of TeX's &lsquo;<span class="samp">&#8288;\epsilon&#8288;</span>&rsquo;.  TeX's &lsquo;<span class="samp">&#8288;\varpi&#8288;</span>&rsquo; is close to
<code>omega1</code>.  <code>vartheta</code>, <code>varphi</code> and <code>varsigma</code> are
allowed as synonyms for <code>theta1</code>, <code>phi1</code> and <code>sigma1</code>.
</p>
<p><code>sigma1</code> is also known as <code>stigma</code>, its Unicode name.
</p>
<p>Control characters (e.g., &lsquo;<span class="samp">&#8288;\n&#8288;</span>&rsquo;) are not interpreted in character
strings in plotmath, unlike normal plotting.
</p>
<p>The fonts used are taken from the current font family, and so can be
set by <code><a href="graphics.html#topic+par">par</a>(family=)</code> in base graphics, and
<code><a href="grid.html#topic+gpar">gpar</a>(fontfamily=)</code> in package <span class="pkg">grid</span>.
</p>
<p>Note that <code>bold</code>, <code>italic</code> and <code>bolditalic</code> do not
apply to symbols, and hence not to the Greek <em>symbols</em> such as
<code>mu</code> which are displayed in the symbol font.  They also do not
apply to numeric constants.
</p>


<h3>Other symbols</h3>

<p>On many OSes and some graphics devices many other symbols are
available as part of the standard text font, and all of the symbols in
the Adobe Symbol encoding are in principle available <em>via</em>
changing the font face or (see &lsquo;Details&rsquo;) plotmath: see the
examples section of <code><a href="graphics.html#topic+points">points</a></code> for a function to display
them.  (&lsquo;In principle&rsquo; because some of the glyphs are missing
from some implementations of the symbol font.)  Unfortunately,
<code><a href="#topic+pdf">pdf</a></code> and <code><a href="#topic+postscript">postscript</a></code> have support for little
more than European (not Greek) and CJK characters and the Adobe Symbol
encoding (and in a few fonts, also Cyrillic characters).
</p>

<dl>
<dt>On Unix-alikes:</dt><dd>
<p>In a UTF-8 locale any Unicode character can be entered, perhaps as a
&lsquo;<span class="samp">&#8288;\uxxxx&#8288;</span>&rsquo; or &lsquo;<span class="samp">&#8288;\Uxxxxxxxx&#8288;</span>&rsquo; escape sequence, but the issue is
whether the graphics device is able to display the character.  The
widest range of characters is likely to be available in the
<code><a href="#topic+X11">X11</a></code> device using cairo: see its help page for how
installing additional fonts can help.  This can often be used to
display Greek <em>letters</em> in bold or italic.
</p>
<p>On macOS the <code><a href="#topic+quartz">quartz</a></code> device and the default system fonts
have quite large coverage.
</p>
<p>In non-UTF-8 locales there is normally no support for symbols not in
the languages for which the current encoding was intended.
</p>
</dd>
<dt>On Windows:</dt><dd>
<p>Any Unicode character can be entered into a text string <em>via</em> a
&lsquo;<span class="samp">&#8288;\uxxxx&#8288;</span>&rsquo; escape, or used by number in a call to
<code><a href="graphics.html#topic+points">points</a></code>.  The <code><a href="#topic+windows">windows</a></code> family of devices can
display such characters if they are available in the font in use.
This can often be used to display Greek <em>letters</em> in bold or italic.
</p>
<p>A good way to both find out which characters are available in a font
and to determine the Unicode number is to use the &lsquo;Character
Map&rsquo; accessory (usually on the &lsquo;Start&rsquo; menu under
&lsquo;Accessories-&gt;System Tools&rsquo;).  You can also copy-and-paste
characters from the &lsquo;Character Map&rsquo; window to the <code>Rgui</code>
console (but not to <code>Rterm</code>).
</p>
</dd>
</dl>



<h3>References</h3>

<p>Murrell, P. and Ihaka, R. (2000).
An approach to providing mathematical annotation in plots.
<em>Journal of Computational and Graphical Statistics</em>,
<b>9</b>, 582&ndash;599.
<a href="https://doi.org/10.2307/1390947">doi:10.2307/1390947</a>.
</p>
<p>A list of
the symbol codes can be found in decimal, octal and hex at
<a href="https://www.stat.auckland.ac.nz/~paul/R/CM/AdobeSym.html">https://www.stat.auckland.ac.nz/~paul/R/CM/AdobeSym.html</a>.
</p>


<h3>See Also</h3>

<p><code>demo(plotmath)</code>,
<code><a href="graphics.html#topic+axis">axis</a></code>,
<code><a href="graphics.html#topic+mtext">mtext</a></code>,
<code><a href="graphics.html#topic+text">text</a></code>,
<code><a href="graphics.html#topic+title">title</a></code>,
<code><a href="base.html#topic+substitute">substitute</a></code>
<code><a href="base.html#topic+quote">quote</a></code>, <code><a href="base.html#topic+bquote">bquote</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(graphics)

x &lt;- seq(-4, 4, length.out = 101)
y &lt;- cbind(sin(x), cos(x))
matplot(x, y, type = "l", xaxt = "n",
        main = expression(paste(plain(sin) * phi, "  and  ",
                                plain(cos) * phi)),
        ylab = expression("sin" * phi, "cos" * phi), # only 1st is taken
        xlab = expression(paste("Phase Angle ", phi)),
        col.main = "blue")
axis(1, at = c(-pi, -pi/2, 0, pi/2, pi),
     labels = expression(-pi, -pi/2, 0, pi/2, pi))


## How to combine "math" and numeric variables :
plot(1:10, type="n", xlab="", ylab="", main = "plot math &amp; numbers")
theta &lt;- 1.23 ; mtext(bquote(hat(theta) == .(theta)), line= .25)
for(i in 2:9)
    text(i, i+1, substitute(list(xi, eta) == group("(",list(x,y),")"),
                            list(x = i, y = i+1)))
## note that both of these use calls rather than expressions.
##
text(1, 10,  "Derivatives:", adj = 0)
text(1, 9.6, expression(
 "             first: {f * minute}(x) " == {f * minute}(x)), adj = 0)
text(1, 9.0, expression(
 "     second: {f * second}(x) "        == {f * second}(x)), adj = 0)


## note the "{ .. }" trick to get "chained" equations:
plot(1:10, 1:10, main = quote(1 &lt;= {1 &lt; 2}))
text(4, 9, expression(hat(beta) == (X^t * X)^{-1} * X^t * y))
text(4, 8.4, "expression(hat(beta) == (X^t * X)^{-1} * X^t * y)",
     cex = .8)
text(4, 7, expression(bar(x) == sum(frac(x[i], n), i==1, n)))
text(4, 6.4, "expression(bar(x) == sum(frac(x[i], n), i==1, n))",
     cex = .8)
text(8, 5, expression(paste(frac(1, sigma*sqrt(2*pi)), " ",
                            plain(e)^{frac(-(x-mu)^2, 2*sigma^2)})),
     cex = 1.2)

## some other useful symbols
plot.new(); plot.window(c(0,4), c(15,1))
text(1, 1, "universal", adj = 0); text(2.5, 1,  "\\042")
text(3, 1, expression(symbol("\042")))
text(1, 2, "existential", adj = 0); text(2.5, 2,  "\\044")
text(3, 2, expression(symbol("\044")))
text(1, 3, "suchthat", adj = 0); text(2.5, 3,  "\\047")
text(3, 3, expression(symbol("\047")))
text(1, 4, "therefore", adj = 0); text(2.5, 4,  "\\134")
text(3, 4, expression(symbol("\134")))
text(1, 5, "perpendicular", adj = 0); text(2.5, 5,  "\\136")
text(3, 5, expression(symbol("\136")))
text(1, 6, "circlemultiply", adj = 0); text(2.5, 6,  "\\304")
text(3, 6, expression(symbol("\304")))
text(1, 7, "circleplus", adj = 0); text(2.5, 7,  "\\305")
text(3, 7, expression(symbol("\305")))
text(1, 8, "emptyset", adj = 0); text(2.5, 8,  "\\306")
text(3, 8, expression(symbol("\306")))
text(1, 9, "angle", adj = 0); text(2.5, 9,  "\\320")
text(3, 9, expression(symbol("\320")))
text(1, 10, "leftangle", adj = 0); text(2.5, 10,  "\\341")
text(3, 10, expression(symbol("\341")))
text(1, 11, "rightangle", adj = 0); text(2.5, 11,  "\\361")
text(3, 11, expression(symbol("\361")))
</code></pre>

<hr>
<h2 id='png'><abbr>BMP</abbr>, <abbr>JPEG</abbr>, <abbr>PNG</abbr> and <abbr>TIFF</abbr> graphics devices</h2><span id='topic+png'></span><span id='topic+jpeg'></span><span id='topic+tiff'></span><span id='topic+bmp'></span>

<h3>Description</h3>

<p>Graphics devices for <abbr>BMP</abbr>, <abbr>JPEG</abbr>, <abbr>PNG</abbr> and <abbr>TIFF</abbr> format bitmap files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bmp(filename = "Rplot%03d.bmp",
    width = 480, height = 480, units = "px", pointsize = 12,
    bg = "white", res = NA, ...,
    type = c("cairo", "Xlib", "quartz"), antialias)

jpeg(filename = "Rplot%03d.jpeg",
     width = 480, height = 480, units = "px", pointsize = 12,
     quality = 75,
     bg = "white", res = NA, ...,
     type = c("cairo", "Xlib", "quartz"), antialias)

png(filename = "Rplot%03d.png",
    width = 480, height = 480, units = "px", pointsize = 12,
    bg = "white",  res = NA, ...,
    type = c("cairo", "cairo-png", "Xlib", "quartz"), antialias)

tiff(filename = "Rplot%03d.tiff",
     width = 480, height = 480, units = "px", pointsize = 12,
     compression = c("none", "rle", "lzw", "jpeg", "zip",
                     "lzw+p", "zip+p",
                     "lerc", "lzma",  "zstd", "webp"),
     bg = "white", res = NA,  ...,
     type = c("cairo", "Xlib", "quartz"), antialias)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="png_+3A_filename">filename</code></td>
<td>
<p>the output file path.
The page number is substituted if a C integer format is included in
the character string, as in the default.  (Depending on the platform,
the result should be less
than <code>PATH_MAX</code> characters long, and may be truncated if not.
See <code><a href="#topic+pdf">pdf</a></code> for further details.)  Tilde expansion
is performed where supported by the platform.  An input with
a marked encoding is converted to the native encoding on an error is
given.</p>
</td></tr>
<tr><td><code id="png_+3A_width">width</code></td>
<td>
<p>the width of the device.</p>
</td></tr>
<tr><td><code id="png_+3A_height">height</code></td>
<td>
<p>the height of the device.</p>
</td></tr>
<tr><td><code id="png_+3A_units">units</code></td>
<td>
<p>The units in which <code>height</code> and <code>width</code> are
given.  Can be <code>px</code> (pixels, the default), <code>in</code> (inches),
<code>cm</code> or <code>mm</code>.</p>
</td></tr>
<tr><td><code id="png_+3A_pointsize">pointsize</code></td>
<td>
<p>the default pointsize of plotted text, interpreted as
big points (1/72 inch) at <code>res</code> <abbr>ppi</abbr>.</p>
</td></tr>
<tr><td><code id="png_+3A_bg">bg</code></td>
<td>
<p>the initial background colour: can be overridden by setting
<code>par("bg")</code>.</p>
</td></tr>
<tr><td><code id="png_+3A_quality">quality</code></td>
<td>
<p>the &lsquo;quality&rsquo; of the <abbr>JPEG</abbr> image, as a
percentage.  Smaller values will give more compression but also more
degradation of the image.</p>
</td></tr>
<tr><td><code id="png_+3A_compression">compression</code></td>
<td>
<p>the type of compression to be used.  Can also be a
numeric value supported by the underlying <code>libtiff</code> library :
see its &lsquo;<span class="file">tiff.h</span>&rsquo; header file.   Ignored with a warning for
<code>type = "quartz"</code>.</p>
</td></tr> 
<tr><td><code id="png_+3A_res">res</code></td>
<td>
<p>The nominal resolution in <abbr>ppi</abbr> which will be recorded in the
bitmap file, if a positive integer.  Also used for <code>units</code>
other than the default, and to convert points to pixels.</p>
</td></tr>
<tr><td><code id="png_+3A_...">...</code></td>
<td>
<p>for <code>type = "Xlib"</code> only, additional arguments to
the underlying <code><a href="#topic+X11">X11</a></code> device such as <code>fonts</code> or
<code>family</code>.
</p>
<p>For types <code>"cairo"</code> and <code>"quartz"</code>, the <code>family</code>
argument can be supplied.  See the &lsquo;Cairo fonts&rsquo;
section in the help for <code><a href="#topic+X11">X11</a></code>.
</p>
<p>For type <code>"cairo"</code>, the <code>symbolfamily</code>
argument can be supplied.  See <code><a href="#topic+X11.options">X11.options</a></code>.
</p>
</td></tr>
<tr><td><code id="png_+3A_type">type</code></td>
<td>
<p>character string, one of <code>"Xlib"</code> or <code>"quartz"</code>
(some macOS builds) or <code>"cairo"</code>.  The latter will only be
available if the system was compiled with support for cairo &ndash;
otherwise <code>"Xlib"</code> will be used.  The default is set by
<code><a href="base.html#topic+getOption">getOption</a>("bitmapType")</code> &ndash; the &lsquo;out of the box&rsquo;
default is <code>"quartz"</code> or <code>"cairo"</code> where available,
otherwise <code>"Xlib"</code>.</p>
</td></tr>
<tr><td><code id="png_+3A_antialias">antialias</code></td>
<td>
<p>for <code>type = "cairo"</code>, giving the type of
anti-aliasing (if any) to be used for fonts and lines (but not
fills). See <code><a href="#topic+X11">X11</a></code>.  The default is set by
<code><a href="#topic+X11.options">X11.options</a></code>.  Also for <code>type = "quartz"</code>, where
antialiasing is used unless <code>antialias = "none"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plots in <abbr>PNG</abbr> and <abbr>JPEG</abbr> format can easily be converted to many other
bitmap formats, and both can be displayed in modern web browsers.  The
<abbr>PNG</abbr> format is lossless and is best for line diagrams and blocks of
colour.  The <abbr>JPEG</abbr> format is lossy, but may be useful for image plots,
for example.  <abbr>BMP</abbr> is a standard format on Windows.  <abbr>TIFF</abbr> is a
meta-format: the default format written by <code>tiff</code> is lossless and
stores RGB (and alpha where appropriate) values uncompressed&mdash;such
files are widely accepted, which is their main virtue over <abbr>PNG</abbr>.
</p>
<p>The <abbr>JPEG</abbr> format only supports opaque backgrounds.
</p>
<p><code>png</code> supports transparent backgrounds: use <code>bg =
  "transparent"</code>.  (Not all <abbr>PNG</abbr> viewers render files with transparency
correctly.)  When transparency is in use in the <code>type = "Xlib"</code>
variant a very light grey is used as the background and so appears as
transparent if used in the plot. This allows opaque white to be used,
as in the example.  The <code>type = "cairo"</code>, <code>type =
  "cairo-png"</code> and <code>type = "quartz"</code> variants allow
semi-transparent colours, including on a transparent or
semi-transparent background.
</p>
<p><code>tiff</code> with types <code>"cairo"</code> and <code>"quartz"</code> supports
semi-transparent colours, including on a transparent or
semi-transparent background.  Compression type <code>"zip"</code> is
&lsquo;deflate (Adobe-style)&rsquo;.  Compression types <code>"lzw+p"</code> and
<code>"zip+p"</code> use horizontal differencing (&lsquo;differencing
predictor&rsquo;, section 14 of the <abbr>TIFF</abbr> specification) in combination with
the compression method, which is effective for continuous-tone images,
especially colour ones.
</p>
<p>The <code>jpeg</code> quality when used for <code>tiff</code> compression is fixed
at 75.
</p>
<p><span class="rlang"><b>R</b></span> can be compiled without support for some or all of the types for
each of these devices: this will be reported if you attempt to use
them on a system where they are not supported.  For <code>type =
  "Xlib"</code> they may not be usable unless the X11 display is available to
the owner of the <span class="rlang"><b>R</b></span> process.  <code>type = "cairo"</code> requires cairo 1.2
or later.  <code>type = "quartz"</code> uses the <code><a href="#topic+quartz">quartz</a></code> device
and so is only available where that is (on some macOS builds: see
<code><a href="base.html#topic+capabilities">capabilities</a>("aqua")</code>).
</p>
<p>By default no resolution is recorded in the file, except for <abbr>BMP</abbr>.
Viewers will often assume a nominal resolution of 72 <abbr>ppi</abbr> when none is
recorded.  As resolutions in <abbr>PNG</abbr> files are recorded in pixels/metre,
the reported <abbr>ppi</abbr> value will be changed slightly.
</p>
<p>For graphics parameters that make use of dimensions in inches
(including font sizes in points) the resolution used is <code>res</code> (or
72 <abbr>ppi</abbr> if unset).
</p>
<p><code>png</code> will normally use a palette if there are less than 256
colours on the page, and record a 24-bit RGB file otherwise (or a
32-bit ARGB file if <code>type = "cairo"</code> and non-opaque colours are
used).  However, <code>type = "cairo-png"</code> uses cairographics' <abbr>PNG</abbr>
backend which will never use a palette and normally creates a larger
32-bit ARGB file&mdash;this may work better for specialist uses with
semi-transparent colours.
</p>
<p>Quartz-produced <abbr>PNG</abbr> and <abbr>TIFF</abbr> plots with a transparent background are
recorded with a dark grey matte which will show up in some viewers,
including <code>Preview</code> on macOS.
</p>
<p>Unknown resolutions in <abbr>BMP</abbr> files are recorded as 72 <abbr>ppi</abbr>.
</p>


<h3>Value</h3>

<p>A plot device is opened: nothing is returned to the <span class="rlang"><b>R</b></span> interpreter.
</p>


<h3>Warnings</h3>

<p>Note that by default the <code>width</code> and <code>height</code> values are in
pixels not inches.  A warning will be issued if both are less than 20.
</p>
<p>If you plot more than one page on one of these devices and do not
include something like <code>%d</code> for the sequence number in
<code>file</code>, the file will contain the last page plotted.
</p>


<h3>Differences between OSes</h3>

<p>These functions are interfaces to three or more different underlying
devices.
</p>

<ul>
<li><p> On Windows, devices based on plotting to a hidden screen using
Windows' <abbr>GDI</abbr> calls.
</p>
</li>
<li><p> On platforms with support for X11, plotting to a hidden X11
display.
</p>
</li>
<li><p> On macOS when working at the console and when <span class="rlang"><b>R</b></span> is
compiled with suitable support, using Apple's Quartz plotting
system.
</p>
</li>
<li><p> Where support has been compiled in for cairographics, plotting
on cairo surfaces.  This may use the native platform support for
fonts, or it may use <code>fontconfig</code> to support a wide range of
font formats.
</p>
</li></ul>

<p>Inevitably there will be differences between the options supported and
output produced.  Perhaps the most important are support for
antialiased fonts and semi-transparent colours: the best results are
likely to be obtained with the cairo- or Quartz-based devices where
available.
</p>
<p>The default extensions are &lsquo;<span class="file">.jpg</span>&rsquo; and &lsquo;<span class="file">.tif</span>&rsquo; on Windows, and
&lsquo;<span class="file">.jpeg</span>&rsquo; and &lsquo;<span class="file">.tiff</span>&rsquo; elsewhere.
</p>


<h3>Conventions</h3>

<p>This section describes the implementation of the conventions for
graphics devices set out in the &lsquo;R Internals&rsquo; manual.
</p>

<ul>
<li><p> The default device size is in pixels.
</p>
</li>
<li><p> Font sizes are in big points interpreted at <code>res</code> <abbr>ppi</abbr>.
</p>
</li>
<li><p> The default font family is Helvetica.
</p>
</li>
<li><p> Line widths in 1/96 inch (interpreted at <code>res</code> <abbr>ppi</abbr>),
minimum one pixel for <code>type = "Xlib"</code>, 0.01 for <code>type =
      "cairo"</code>.
</p>
</li>
<li><p> For <code>type = "Xlib"</code> circle radii are in pixels with
minimum one.
</p>
</li>
<li><p> Colours are interpreted by the viewing application.
</p>
</li></ul>

<p>For <code>type = "quartz"</code> see the help for <code><a href="#topic+quartz">quartz</a></code>.
</p>


<h3>Note</h3>

<p>For <code>type = "Xlib"</code> these devices are based on the <code><a href="#topic+X11">X11</a></code>
device.  The colour model used will be that set up by
<code>X11.options</code> at the time the first Xlib-based devices was opened
(or the first after all such devices have been closed).
</p>
<p>Support for compression types depends on the underlying &lsquo;<span class="samp">&#8288;libtiff&#8288;</span>&rsquo;
library: types <code>"lerc"</code>, <code>"lzma"</code>, <code>"zstd"</code> and
<code>"webp"</code> are relatively recent additions and may well not be
supported.  They are also liable to be unsupported in <abbr>TIFF</abbr> viewers.
</p>


<h3>Author(s)</h3>

<p>Guido Masarotto and Brian Ripley</p>


<h3>References</h3>

<p>The <abbr>PNG</abbr> specification, <a href="https://www.w3.org/TR/png/">https://www.w3.org/TR/png/</a>.
</p>
<p>The <abbr>TIFF</abbr> specification,
<a href="https://www.iso.org/standard/34342.html">https://www.iso.org/standard/34342.html</a>.
See also <a href="https://en.wikipedia.org/wiki/TIFF">https://en.wikipedia.org/wiki/TIFF</a>.


</p>


<h3>See Also</h3>

<p><code><a href="#topic+Devices">Devices</a></code>, <code><a href="#topic+dev.print">dev.print</a></code>
</p>
<p><code><a href="base.html#topic+capabilities">capabilities</a></code> to see if these devices are
supported by this build of <span class="rlang"><b>R</b></span>, and if <code>type = "cairo"</code> is supported.
</p>
<p><code><a href="#topic+bitmap">bitmap</a></code> provides an alternative way to generate plots in many
bitmap formats that does not depend on accessing the X11 display but does
depend on having GhostScript installed.
</p>
<p>Ways to write raster images to bitmap formats are available in
packages <a href="https://CRAN.R-project.org/package=jpeg"><span class="pkg">jpeg</span></a>, <a href="https://CRAN.R-project.org/package=png"><span class="pkg">png</span></a> and <a href="https://CRAN.R-project.org/package=tiff"><span class="pkg">tiff</span></a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## these examples will work only if the devices are available
## and cairo or an X11 display or a macOS display is available.

## copy current plot to a (large) PNG file
## Not run: dev.print(png, filename = "myplot.png", width = 1024, height = 768)

png("myplot.png", bg = "transparent")
plot(1:10)
rect(1, 5, 3, 7, col = "white")
dev.off()

## will make myplot1.jpeg and myplot2.jpeg
jpeg("myplot%d.jpeg")
example(rect)
dev.off()
</code></pre>

<hr>
<h2 id='postscript'>PostScript Graphics</h2><span id='topic+postscript'></span><span id='topic+.ps.prolog'></span>

<h3>Description</h3>

<p><code>postscript</code> starts the graphics device driver for producing
PostScript graphics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>postscript(file = if(onefile) "Rplots.ps" else "Rplot%03d.ps",
           onefile, family, title, fonts, encoding, bg, fg,
           width, height, horizontal, pointsize,
           paper, pagecentre, print.it, command,
           colormodel, useKerning, fillOddEven)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="postscript_+3A_file">file</code></td>
<td>
<p>a character string giving the file path.  If it is
<code>""</code>, the output is piped to the command given by the argument
<code>command</code>.
If it is of the form <code>"|cmd"</code>, the output is piped to the
command given by <code>cmd</code>.
</p>
<p>For use with <code>onefile = FALSE</code>, give a C integer format such as
<code>"Rplot%03d.ps"</code> (the default in that case).  The string
should not otherwise contain a <code>%</code>: if it is really necessary,
use <code>%%</code> in the string for <code>%</code> in the file name.  A
single integer format matching the <a href="base.html#topic+regular+20expression">regular expression</a>
<code>"%[#0 +=-]*[0-9.]*[diouxX]"</code> is allowed.
</p>
<p>Tilde expansion (see <code><a href="base.html#topic+path.expand">path.expand</a></code>) is done. An input with
a marked encoding is converted to the native encoding or an error is
given.
</p>
<p>See also section &lsquo;File specifications&rsquo; in the help
for <code><a href="#topic+pdf">pdf</a></code> for further details.
</p>
</td></tr>
<tr><td><code id="postscript_+3A_onefile">onefile</code></td>
<td>
<p>logical: if true (the default) allow multiple figures
in one file.  If false, generate a file name containing the page
number for each page and use an <abbr>EPSF</abbr> header and no
<code>DocumentMedia</code> comment.  Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="postscript_+3A_family">family</code></td>
<td>
<p>the initial font family to be used, see the section
&lsquo;Families&rsquo; in <code><a href="#topic+pdf">pdf</a></code>.  Defaults to <code>"Helvetica"</code>.</p>
</td></tr>
<tr><td><code id="postscript_+3A_title">title</code></td>
<td>
<p>title string to embed as the <code>Title</code> comment in the
file.  Defaults to <code>"R Graphics Output"</code>.</p>
</td></tr>
<tr><td><code id="postscript_+3A_fonts">fonts</code></td>
<td>
<p>a character vector specifying additional <span class="rlang"><b>R</b></span> graphics font
family names for font families whose declarations will be included
in the PostScript file and are available for use with the device.
See &lsquo;Families&rsquo; below.  Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="postscript_+3A_encoding">encoding</code></td>
<td>
<p>the name of an encoding file.  See
<code><a href="#topic+pdf">pdf</a></code> for details.  Defaults to <code>"default"</code>.</p>
</td></tr>
<tr><td><code id="postscript_+3A_bg">bg</code></td>
<td>
<p>the initial background color to be used.  If
<code>"transparent"</code> (or any other non-opaque colour), no background
is painted.  Defaults to <code>"transparent"</code>.</p>
</td></tr>
<tr><td><code id="postscript_+3A_fg">fg</code></td>
<td>
<p>the initial foreground color to be used.  Defaults to
<code>"black"</code>.</p>
</td></tr>
<tr><td><code id="postscript_+3A_width">width</code>, <code id="postscript_+3A_height">height</code></td>
<td>
<p>the width and height of the graphics region in
inches.  Default to <code>0</code>.
</p>
<p>If <code>paper != "special"</code> and <code>width</code> or <code>height</code> is less
than <code>0.1</code> or too large to give a total margin of 0.5 inch, the
graphics region is reset to the corresponding paper dimension minus 0.5.
</p>
</td></tr>
<tr><td><code id="postscript_+3A_horizontal">horizontal</code></td>
<td>
<p>the orientation of the printed image, a logical.
Defaults to true, that is landscape orientation on paper sizes
with width less than height.</p>
</td></tr>
<tr><td><code id="postscript_+3A_pointsize">pointsize</code></td>
<td>
<p>the default point size to be used.  Strictly
speaking, in <abbr>bp</abbr>, that is 1/72 of an inch, but approximately in
points.  Defaults to <code>12</code>.</p>
</td></tr>
<tr><td><code id="postscript_+3A_paper">paper</code></td>
<td>
<p>the size of paper in the printer.  The choices are
<code>"a4"</code>, <code>"letter"</code> (or <code>"us"</code>), <code>"legal"</code> and
<code>"executive"</code> (and these can be capitalized).
Also, <code>"special"</code> can be used, when arguments <code>width</code>
and <code>height</code> specify the paper size.  A further choice is
<code>"default"</code> (the default): If this is selected, the paper size
is taken from the option <code>"papersize"</code> if that is set and to
<code>"a4"</code> if it is unset or empty.</p>
</td></tr>
<tr><td><code id="postscript_+3A_pagecentre">pagecentre</code></td>
<td>
<p>logical: should the device region be centred on the
page?  Defaults to true.</p>
</td></tr>
<tr><td><code id="postscript_+3A_print.it">print.it</code></td>
<td>
<p>logical: should the file be printed when the device is
closed?  (This only applies if <code>file</code> is a real file name.)
Defaults to false.</p>
</td></tr>
<tr><td><code id="postscript_+3A_command">command</code></td>
<td>
<p>the command to be used for &lsquo;printing&rsquo;.  Defaults
to <code>"default"</code>, the value of option <code>"printcmd"</code>.  The
length limit is <code>2*PATH_MAX</code>,
typically 8096 bytes on Unix-alikes and 520 bytes on Windows. Recent
Windows systems may be configured to use long paths, raising this
limit currently to 10000.
</p>
</td></tr>
<tr><td><code id="postscript_+3A_colormodel">colormodel</code></td>
<td>
<p>a character string describing the color model:
currently allowed values as <code>"srgb"</code>, <code>"srgb+gray"</code>,
<code>"rgb"</code>, <code>"rgb-nogray"</code>, <code>"gray"</code> (or <code>"grey")</code> and
<code>"cmyk"</code>.  Defaults to <code>"srgb"</code>.  See section
&lsquo;Color models&rsquo;.</p>
</td></tr>
<tr><td><code id="postscript_+3A_usekerning">useKerning</code></td>
<td>
<p>logical.  Should kerning corrections be included in
setting text and calculating string widths?  Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="postscript_+3A_filloddeven">fillOddEven</code></td>
<td>
<p>logical controlling the polygon fill mode:  see
<code><a href="graphics.html#topic+polygon">polygon</a></code> for details.  Default <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All arguments except <code>file</code> default to values given by
<code><a href="#topic+ps.options">ps.options</a>()</code>.  The ultimate defaults are quoted in the
arguments section.
</p>
<p><code>postscript</code> opens the file <code>file</code> and the PostScript
commands needed to plot any graphics requested are written to that
file.  This file can then be printed on a suitable device to obtain
hard copy.
</p>
<p>The <code>file</code> argument is interpreted as a C integer format as used
by <code><a href="base.html#topic+sprintf">sprintf</a></code>, with integer argument the page number.
The default gives files &lsquo;<span class="file">Rplot001.ps</span>&rsquo;, ..., &lsquo;<span class="file">Rplot999.ps</span>&rsquo;,
&lsquo;<span class="file">Rplot1000.ps</span>&rsquo;, ....
</p>
<p>The postscript produced for a single <span class="rlang"><b>R</b></span> plot is EPS (<em>Encapsulated
PostScript</em>) compatible, and can be included into other documents,
e.g., into LaTeX, using &lsquo;<span class="samp">&#8288;\includegraphics{&lt;filename&gt;}&#8288;</span>&rsquo;.  For use
in this way you will probably want to use <code><a href="#topic+setEPS">setEPS</a>()</code> to
set the defaults as <code>horizontal = FALSE, onefile = FALSE, paper =
    "special"</code>.  Note that the bounding box is for the <em>device</em>
region: if you find the white space around the plot region excessive,
reduce the margins of the figure region via <code><a href="graphics.html#topic+par">par</a>(mar = )</code>.
</p>
<p>Most of the PostScript prologue used is taken from the <span class="rlang"><b>R</b></span> character
vector <code>.ps.prolog</code>.  This is marked in the output, and can be
changed by changing that vector.  (This is only advisable for
PostScript experts: the standard version is in
<code>namespace:grDevices</code>.)
</p>
<p>A PostScript device has a default family, which can be set by the user
via <code>family</code>.  If other font families are to be used when drawing
to the PostScript device, these must be declared when the device is
created via <code>fonts</code>;  the font family names for this argument are
<span class="rlang"><b>R</b></span> graphics font family names (see the documentation for
<code><a href="#topic+postscriptFonts">postscriptFonts</a></code>).
</p>
<p>Line widths as controlled by <code>par(lwd = )</code> are in multiples of
1/96 inch: multiples less than 1 are allowed.  <code>pch = "."</code> with
<code>cex = 1</code> corresponds to a square of side 1/72 inch, which is
also the &lsquo;pixel&rsquo; size assumed for graphics parameters such as
<code>"cra"</code>.
</p>
<p>When the background colour is fully transparent (as is the initial
default value), the PostScript produced does not paint the
background. Almost all PostScript viewers will use a white canvas so
the visual effect is if the background were white.  This will not be
the case when printing onto coloured paper, though.
</p>


<h3>TeX fonts</h3>

<p>TeX has traditionally made use of fonts such as Computer Modern which
are encoded rather differently, in a 7-bit encoding.  This encoding
can be specified by <code>encoding = "TeXtext.enc"</code>, taking care that
the ASCII characters <code>&lt; &gt; \ _ { }</code> are not available in those
fonts.
</p>
<p>There are supplied families <code>"ComputerModern"</code> and
<code>"ComputerModernItalic"</code> which use this encoding, and which are
only supported for <code>postscript</code> (and not <code>pdf</code>).  They are
intended to use with the Type 1 versions of the TeX CM fonts.  It will
normally be possible to include such output in TeX or LaTeX provided
it is processed with <code>dvips -Ppfb -j0</code> or the equivalent on your
system. (<code>-j0</code> turns off font subsetting.)  When <code>family =
    "ComputerModern"</code> is used, the italic/bold-italic fonts used are
slanted fonts (<code>cmsl10</code> and <code>cmbxsl10</code>).  To use text italic
fonts instead, set <code>family = "ComputerModernItalic"</code>.
</p>
<p>These families use the TeX math italic and  symbol fonts for a
comprehensive but incomplete coverage of the glyphs covered by the
Adobe symbol font in other families.  This is achieved by
special-casing the postscript code generated from the supplied
&lsquo;<span class="file">CM_symbol_10.afm</span>&rsquo;.
</p>


<h3>Color models</h3>

<p>The default color model (<code>"srgb"</code>) is <abbr>sRGB</abbr>.
</p>
<p>The alternative <code>"srgb+gray"</code> uses <abbr>sRGB</abbr> for colors, but with pure
gray colors (including black and white) expressed as greyscales (which
results in smaller files and can be advantageous with some printer
drivers).  Conversely, its files can be rendered much slower on some
viewers, and there can be a noticeable discontinuity in color
gradients involving gray or white.
</p>
<p>Other possibilities are <code>"gray"</code> (or <code>"grey"</code>) which used
only greyscales (and converts other colours to a luminance), and
<code>"cmyk"</code>.  The simplest possible conversion from <abbr>sRGB</abbr> to CMYK is
used
(<a href="https://en.wikipedia.org/wiki/CMYK_color_model#Mapping_RGB_to_CMYK">https://en.wikipedia.org/wiki/CMYK_color_model#Mapping_RGB_to_CMYK</a>),
and raster images are output in RGB.
</p>
<p>Color models provided for backwards compatibility are <code>"rgb"</code>
(which is RGB+gray) and <code>"rgb-nogray"</code> which use uncalibrated RGB
(as used in <span class="rlang"><b>R</b></span> prior to 2.13.0).  These result in slightly smaller
files which may render faster, but do rely on the viewer being
properly calibrated.
</p>


<h3>Printing</h3>

<p>A postscript plot can be printed via <code>postscript</code> in two ways.
</p>

<ol>
<li><p> Setting <code>print.it = TRUE</code> causes the command given in
argument <code>command</code> to be called with argument <code>"file"</code>
when the device is closed.  Note that the plot file is not deleted
unless <code>command</code> arranges to delete it.
</p>
</li>
<li> <p><code>file = ""</code> or <code>file = "|cmd"</code> can be used to print
using a pipe.  Failure to open the command will probably be reported
to the terminal but not to <span class="rlang"><b>R</b></span>, in which case close the
device by <code>dev.off</code> immediately.
</p>
</li></ol>

<p>On Windows the default
<code>"printcmd"</code> is empty and will give an error if
<code>print.it = TRUE</code> is used.  Suitable commands to spool a PostScript
file to a printer can be found in &lsquo;<span class="file">RedMon</span>&rsquo; suite available from
<a href="http://pages.cs.wisc.edu/~ghost/index.html">http://pages.cs.wisc.edu/~ghost/index.html</a>.  The command will be
run in a minimized window.  GSView 4.x provides &lsquo;<span class="file">gsprint.exe</span>&rsquo;
which may be more convenient (it requires Ghostscript version 6.50
or later).
</p>


<h3>Conventions</h3>

<p>This section describes the implementation of the conventions for
graphics devices set out in the &lsquo;R Internals&rsquo; manual.
</p>

<ul>
<li><p> The default device size is 7 inches square.
</p>
</li>
<li><p> Font sizes are in big points.
</p>
</li>
<li><p> The default font family is Helvetica.
</p>
</li>
<li><p> Line widths are as a multiple of 1/96 inch, with a minimum
of 0.01 enforced.
</p>
</li>
<li><p> Circle of any radius are allowed.
</p>
</li>
<li><p> Colours are by default specified as <abbr>sRGB</abbr>.
</p>
</li></ul>

<p>At very small line widths, the line type may be forced to solid.
</p>
<p>Raster images are currently limited to opaque colours.
</p>


<h3>Note</h3>

<p>If you see problems with postscript output, do remember that the
problem is much more likely to be in your viewer than in <span class="rlang"><b>R</b></span>.  Try
another viewer if possible.  Symptoms for which the viewer has been at
fault are apparent grids on image plots (turn off graphics
anti-aliasing in your viewer if you can) and missing or incorrect glyphs
in text (viewers silently doing font substitution).
</p>
<p>Unfortunately the default viewers on most Linux and macOS systems
have these problems, and no obvious way to turn off graphics anti-aliasing.
</p>


<h3>Author(s)</h3>

<p>Support for Computer Modern fonts is based on a contribution by
Brian D'Urso <a href="mailto:durso@hussle.harvard.edu">durso@hussle.harvard.edu</a>.
</p>


<h3>References</h3>

<p>Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
<em>The New S Language</em>.
Wadsworth &amp; Brooks/Cole.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+postscriptFonts">postscriptFonts</a></code>,
<code><a href="#topic+Devices">Devices</a></code>,
and <code><a href="#topic+check.options">check.options</a></code> which is called from both
<code><a href="#topic+ps.options">ps.options</a></code> and <code>postscript</code>.
</p>
<p><code><a href="#topic+cairo_ps">cairo_ps</a></code> for another device that can produce PostScript.
</p>
<p>More details of font families and encodings and especially handling
text in a non-Latin-1 encoding and embedding fonts can be found in
</p>

<p>  Paul Murrell and Brian Ripley (2006).
  &ldquo;Non-standard fonts in PostScript and PDF graphics.&rdquo;
  <em>R News</em>, <b>6</b>(2), 41&ndash;47.
  <a href="https://www.r-project.org/doc/Rnews/Rnews_2006-2.pdf">https://www.r-project.org/doc/Rnews/Rnews_2006-2.pdf</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require(graphics)
## Not run: 
# open the file "foo.ps" for graphics output
postscript("foo.ps")
# produce the desired graph(s)
dev.off()              # turn off the postscript device

## On Unix-alikes only:
postscript("|lp -dlw")
# produce the desired graph(s)
dev.off()              # plot will appear on printer

## On Windows:
options(printcmd = 'redpr -P"\\printhost\lw"')
postscript(file = tempfile("Rps."), print.it = TRUE)
# produce the desired graph(s)
dev.off()              # send plot file to the printer
## alternative using GSView 4.x :
options(printcmd = '/GhostGum/gsview/gsprint -query')


# for URW PostScript devices
postscript("foo.ps", family = "NimbusSan")

## for inclusion in Computer Modern TeX documents, perhaps
postscript("cm_test.eps", width = 4.0, height = 3.0,
           horizontal = FALSE, onefile = FALSE, paper = "special",
           family = "ComputerModern", encoding = "TeXtext.enc")
## The resultant postscript file can be used by dvips -Ppfb -j0.

## To test out encodings, you can use
TestChars &lt;- function(encoding = "ISOLatin1", family = "URWHelvetica")
{
    postscript(encoding = encoding, family = family)
    par(pty = "s")
    plot(c(-1,16), c(-1,16), type = "n", xlab = "", ylab = "",
         xaxs = "i", yaxs = "i")
    title(paste("Centred chars in encoding", encoding))
    grid(17, 17, lty = 1)
    for(i in c(32:255)) {
        x &lt;- i %% 16
        y &lt;- i %/% 16
        points(x, y, pch = i)
    }
    dev.off()
}
## there will be many warnings.  We use URW to get a complete enough
## set of font metrics.
TestChars()
TestChars("ISOLatin2")
TestChars("WinAnsi")

## End(Not run)

</code></pre>

<hr>
<h2 id='postscriptFonts'>PostScript and PDF Font Families</h2><span id='topic+postscriptFonts'></span><span id='topic+pdfFonts'></span>

<h3>Description</h3>

<p>These functions handle the translation of a <span class="rlang"><b>R</b></span> graphics
font family name to a PostScript or PDF font description, used by the
<code><a href="#topic+postscript">postscript</a></code> or <code><a href="#topic+pdf">pdf</a></code> graphics devices.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>postscriptFonts(...)
pdfFonts(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="postscriptFonts_+3A_...">...</code></td>
<td>
<p>either character strings naming mappings to display,
or named arguments specifying mappings to add or change.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If these functions are called with no argument they list all the
existing mappings, whereas if they are called with named arguments
they add (or change) mappings.
</p>
<p>A PostScript or PDF device is created with a default font family (see the
documentation for <code><a href="#topic+postscript">postscript</a></code>), but it is also possible
to specify a font family when drawing to the device (for example, see
the documentation for <code>"family"</code> in <code><a href="graphics.html#topic+par">par</a></code> and for
<code>"fontfamily"</code> in <code><a href="grid.html#topic+gpar">gpar</a></code> in the <span class="pkg">grid</span> package).
</p>
<p>The font family sent to the device is a simple string name, which must be
mapped to a set of PostScript fonts.  Separate lists of mappings for
<code>postscript</code> and <code>pdf</code> devices are  maintained for the
current <span class="rlang"><b>R</b></span> session and can be added to by the user.
</p>
<p>The <code>postscriptFonts</code> and <code>pdfFonts</code> functions can be used
to list existing mappings and to define new mappings.  The
<code><a href="#topic+Type1Font">Type1Font</a></code> and <code><a href="#topic+CIDFont">CIDFont</a></code> functions can be
used to create new mappings, when the <code>xxxFonts</code> function is used
to add them to the database.  See the examples.
</p>
<p>Default mappings are provided for three device-independent family
names: <code>"sans"</code> for a sans-serif font (to <code>"Helvetica"</code>),
<code>"serif"</code> for a serif font (to <code>"Times"</code>) and <code>"mono"</code>
for a monospaced font (to <code>"Courier"</code>).
</p>
<p>Mappings for a number of standard Adobe fonts (and URW equivalents)
are also provided: <code>"AvantGarde"</code>,
<code>"Bookman"</code>, <code>"Courier"</code>, <code>"Helvetica"</code>,
<code>"Helvetica-Narrow"</code>, <code>"NewCenturySchoolbook"</code>,
<code>"Palatino"</code> and <code>"Times"</code>;
<code>"URWGothic"</code>, <code>"URWBookman"</code>, <code>"NimbusMon"</code>,
<code>"NimbusSan"</code> (synonym <code>"URWHelvetica"</code>),
<code>"NimbusSanCond"</code>, <code>"CenturySch"</code>, <code>"URWPalladio"</code> and
<code>"NimbusRom"</code> (synonym <code>"URWTimes"</code>).
</p>
<p>There are also mappings for <code>"ComputerModern"</code>,
<code>"ComputerModernItalic"</code> and <code>"ArialMT"</code> (Monotype Arial).
</p>
<p>Finally, there are some default mappings for East Asian locales
described in a separate section.
</p>
<p>The specification of font metrics and encodings is described in the help
for the <code><a href="#topic+postscript">postscript</a></code> function.
</p>
<p>The fonts are not embedded in the resulting PostScript or PDF file, so
software including the PostScript or PDF plot file should either embed
the font outlines (usually from &lsquo;<span class="file">.pfb</span>&rsquo; or &lsquo;<span class="file">.pfa</span>&rsquo; files) or
use <abbr>DSC</abbr> comments to instruct the print spooler or including
application to do so (see also <code><a href="#topic+embedFonts">embedFonts</a></code>).
</p>
<p>A font family has both an <span class="rlang"><b>R</b></span>-level name, the argument name used when
<code>postscriptFonts</code> was called, and an internal name, the
<code>family</code> component.  These two names are the same for all the
pre-defined font families.
</p>
<p>Once a font family is in use it cannot be changed.  &lsquo;In use&rsquo;
means that it has been specified <em>via</em> a <code>family</code> or
<code>fonts</code> argument to an invocation of the same graphics device
already in the <span class="rlang"><b>R</b></span> session.  (For these purposes <code>xfig</code> counts the
same as <code>postscript</code> but only uses some of the predefined mappings.)
</p>


<h3>Value</h3>

<p>A list of one or more font mappings.
</p>


<h3>East Asian fonts</h3>

<p>There are some default mappings for East Asian locales:<br />
<code>"Japan1"</code>, <code>"Japan1HeiMin"</code>, <code>"Japan1GothicBBB"</code>,
and <code>"Japan1Ryumin"</code> for Japanese;
<code>"Korea1"</code> and <code>"Korea1deb"</code> for Korean;
<code>"GB1"</code> (Simplified Chinese) for mainland China and Singapore;
<code>"CNS1"</code> (Traditional Chinese) for Hong Kong and Taiwan.
</p>
<p>These refer to the following fonts
</p>

<table>
<tr>
 <td style="text-align: left;">
    Japan1 (PS) </td><td style="text-align: left;"> <code>HeiseiKakuGo-W5</code></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> Linotype Japanese printer font</td>
</tr>
<tr>
 <td style="text-align: left;">
    Japan1 (PDF) </td><td style="text-align: left;"> <code>KozMinPro-Regular-Acro</code></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> from Adobe Reader 7.0 Japanese Font Pack</td>
</tr>
<tr>
 <td style="text-align: left;">
    Japan1HeiMin (PS) </td><td style="text-align: left;"> <code>HeiseiMin-W3</code></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> Linotype Japanese printer font</td>
</tr>
<tr>
 <td style="text-align: left;">
    Japan1HeiMin (PDF) </td><td style="text-align: left;"> <code>HeiseiMin-W3-Acro</code></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> from Adobe Reader 7.0 Japanese Font Pack</td>
</tr>
<tr>
 <td style="text-align: left;">
    Japan1GothicBBB </td><td style="text-align: left;"> <code>GothicBBB-Medium</code></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> Japanese-market PostScript printer font</td>
</tr>
<tr>
 <td style="text-align: left;">
    Japan1Ryumin </td><td style="text-align: left;"> <code>Ryumin-Light</code></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> Japanese-market PostScript printer font</td>
</tr>
<tr>
 <td style="text-align: left;">
    Korea1 (PS) </td><td style="text-align: left;"> <code>Baekmuk-Batang</code></td>
</tr>
<tr>
 <td style="text-align: left;">  </td><td style="text-align: left;"> TrueType font found on some Linux systems</td>
</tr>
<tr>
 <td style="text-align: left;">
    Korea1 (PDF) </td><td style="text-align: left;"> <code>HYSMyeongJoStd-Medium-Acro</code></td>
</tr>
<tr>
 <td style="text-align: left;">  </td><td style="text-align: left;"> from Adobe Reader 7.0 Korean Font Pack</td>
</tr>
<tr>
 <td style="text-align: left;">
    Korea1deb (PS) </td><td style="text-align: left;"> <code>Batang-Regular</code></td>
</tr>
<tr>
 <td style="text-align: left;">  </td><td style="text-align: left;"> another name for Baekmuk-Batang</td>
</tr>
<tr>
 <td style="text-align: left;">
    Korea1deb (PDF) </td><td style="text-align: left;"> <code>HYGothic-Medium-Acro</code></td>
</tr>
<tr>
 <td style="text-align: left;">  </td><td style="text-align: left;"> from Adobe Reader 4.0 Korean Font Pack</td>
</tr>
<tr>
 <td style="text-align: left;">
    GB1 (PS) </td><td style="text-align: left;"> <code>BousungEG-Light-GB</code></td>
</tr>
<tr>
 <td style="text-align: left;">  </td><td style="text-align: left;"> TrueType font found on some Linux systems</td>
</tr>
<tr>
 <td style="text-align: left;">
    GB1 (PDF) </td><td style="text-align: left;"> <code>STSong-Light-Acro</code></td>
</tr>
<tr>
 <td style="text-align: left;">  </td><td style="text-align: left;"> from Adobe Reader 7.0 Simplified Chinese Font Pack</td>
</tr>
<tr>
 <td style="text-align: left;">
    CNS1 (PS) </td><td style="text-align: left;"> <code>MOESung-Regular</code></td>
</tr>
<tr>
 <td style="text-align: left;"> </td><td style="text-align: left;"> Ken Lunde's <abbr>CJKV</abbr> resources</td>
</tr>
<tr>
 <td style="text-align: left;">
    CNS1 (PDF) </td><td style="text-align: left;"> <code>MSungStd-Light-Acro</code></td>
</tr>
<tr>
 <td style="text-align: left;">  </td><td style="text-align: left;"> from Adobe Reader 7.0 Traditional Chinese Font Pack</td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>

<p><code>BousungEG-Light-GB</code> can be found at
<a href="https://ftp.gnu.org/pub/non-gnu/chinese-fonts-truetype/">https://ftp.gnu.org/pub/non-gnu/chinese-fonts-truetype/</a>.


These will need to be installed or otherwise made available to the
PostScript/PDF interpreter such as Ghostscript (and not all
interpreters can handle TrueType fonts).
</p>
<p>You may well find that your postscript/PDF interpreters has been set
up to provide aliases for many of these fonts.  For example,
Ghostscript on Windows can optionally be installed to map common East
Asian fonts names to Windows TrueType fonts.  (You may want to add the
<code>-Acro</code> versions as well.)
</p>
<p>Adding a mapping for a CID-keyed font is for gurus only.
</p>


<h3>Author(s)</h3>

<p>Support for Computer Modern fonts is based on a contribution by
Brian D'Urso.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+postscript">postscript</a></code> and <code><a href="#topic+pdf">pdf</a></code>;  <code><a href="#topic+Type1Font">Type1Font</a></code>
and <code><a href="#topic+CIDFont">CIDFont</a></code> for specifying new font mappings.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>postscriptFonts()
## This duplicates "ComputerModernItalic".
CMitalic &lt;- Type1Font("ComputerModern2",
                      c("CM_regular_10.afm", "CM_boldx_10.afm",
                        "cmti10.afm", "cmbxti10.afm",
                         "CM_symbol_10.afm"),
                      encoding = "TeXtext.enc")
postscriptFonts(CMitalic = CMitalic)

## A CID font for Japanese using a different CMap and
## corresponding cmapEncoding.
`Jp_UCS-2` &lt;- CIDFont("TestUCS2",
                  c("Adobe-Japan1-UniJIS-UCS2-H.afm",
                    "Adobe-Japan1-UniJIS-UCS2-H.afm",
                    "Adobe-Japan1-UniJIS-UCS2-H.afm",
                    "Adobe-Japan1-UniJIS-UCS2-H.afm"),
                  "UniJIS-UCS2-H", "UCS-2")
pdfFonts(`Jp_UCS-2` = `Jp_UCS-2`)
names(pdfFonts())
</code></pre>

<hr>
<h2 id='pretty.Date'>Pretty Breakpoints for Date-Time Classes</h2><span id='topic+pretty.Date'></span><span id='topic+pretty.POSIXt'></span>

<h3>Description</h3>

<p>Compute a sequence of about <code>n+1</code> equally spaced &lsquo;nice&rsquo;
values which cover the range of the values in <code>x</code>, possibly of
length one, when <code>min.n = 0</code> and there is only one unique
<code>x</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'Date'
pretty(x, n = 5, min.n = n %/% 2, sep = " ", ...)
## S3 method for class 'POSIXt'
pretty(x, n = 5, min.n = n %/% 2, sep = " ", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pretty.Date_+3A_x">x</code></td>
<td>
<p>an object of class <code>"Date"</code> or <code>"POSIXt"</code> (i.e.,
<code>"POSIXct"</code> or <code>"POSIXlt"</code>). </p>
</td></tr>
<tr><td><code id="pretty.Date_+3A_n">n</code></td>
<td>
<p>integer giving the <em>desired</em> number of intervals.</p>
</td></tr>
<tr><td><code id="pretty.Date_+3A_min.n">min.n</code></td>
<td>
<p>nonnegative integer giving the <em>minimal</em> number of
intervals.</p>
</td></tr>
<tr><td><code id="pretty.Date_+3A_sep">sep</code></td>
<td>
<p>character string, serving as a separator for certain
formats (e.g., between month and year). </p>
</td></tr>
<tr><td><code id="pretty.Date_+3A_...">...</code></td>
<td>
<p>further arguments for compatibility with the generic,
ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector (of the suitable class) of locations, with attribute
<code>"labels"</code> giving corresponding formatted character labels and attribute
<code>"format"</code> giving the format specification that was used.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+pretty">pretty</a></code> for the default method.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
pretty(Sys.Date())
pretty(Sys.time(), n = 10)

pretty(as.Date("2000-03-01")) # R 1.0.0 came in a leap year

## time ranges in diverse scales:% also in ../../../../tests/reg-tests-1c.R
steps &lt;- stats::setNames(,
    c("10 secs", "1 min", "5 mins", "30 mins", "6 hours", "12 hours",
      "1 DSTday", "2 weeks", "1 month", "6 months", "1 year",
      "10 years", "50 years", "1000 years"))
x &lt;- as.POSIXct("2002-02-02 02:02")
lapply(steps,
       function(s) {
           at &lt;- pretty(seq(x, by = s, length.out = 2), n = 5)
           attr(at, "labels")
       })
</code></pre>

<hr>
<h2 id='ps.options'>Auxiliary Function to Set/View Defaults for Arguments of postscript</h2><span id='topic+ps.options'></span><span id='topic+setEPS'></span><span id='topic+setPS'></span>

<h3>Description</h3>

<p>The auxiliary function <code>ps.options</code> can be used to set or view
(if called without arguments) the default values for some of the
arguments to <code><a href="#topic+postscript">postscript</a></code>.
</p>
<p><code>ps.options</code> needs to be called before calling <code>postscript</code>,
and the default values it sets can be overridden by supplying
arguments to <code>postscript</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ps.options(..., reset = FALSE, override.check = FALSE)

setEPS(...)
setPS(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ps.options_+3A_...">...</code></td>
<td>
<p>arguments <code>onefile</code>, <code>family</code>, <code>title</code>,
<code>fonts</code>,
<code>encoding</code>, <code>bg</code>, <code>fg</code>, <code>width</code>, <code>height</code>,
<code>horizontal</code>, <code>pointsize</code>,  <code>paper</code>,
<code>pagecentre</code>, <code>print.it</code>, <code>command</code>,
<code>colormodel</code> and <code>fillOddEven</code> can be supplied.  <code>onefile</code>,
<code>horizontal</code> and <code>paper</code> are <em>ignored</em>
for <code>setEPS</code> and <code>setPS</code>.</p>
</td></tr>
<tr><td><code id="ps.options_+3A_reset">reset</code></td>
<td>
<p>logical: should the defaults be reset to their
&lsquo;factory-fresh&rsquo; values?</p>
</td></tr>
<tr><td><code id="ps.options_+3A_override.check">override.check</code></td>
<td>
<p>logical argument passed to
<code><a href="#topic+check.options">check.options</a></code>.  See the Examples.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If both <code>reset = TRUE</code> and <code>...</code> are supplied the defaults
are first reset to the &lsquo;factory-fresh&rsquo; values and then the new
values are applied.
</p>
<p>For backwards compatibility argument <code>append</code> is accepted but
ignored with a warning.
</p>
<p><code>setEPS</code> and <code>setPS</code> are wrappers to set defaults
appropriate for figures for inclusion in documents (the default size
is 7 inches square unless <code>width</code> or <code>height</code> is supplied)
and for spooling to a PostScript printer respectively.  For historical
reasons the latter is the ultimate default.
</p>


<h3>Value</h3>

<p>A named list of all the previous defaults.  If <code>...</code> or
<code>reset = TRUE</code> is supplied the result has the visibility flag
turned off.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+postscript">postscript</a></code>, <code><a href="#topic+pdf.options">pdf.options</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ps.options(bg = "pink")
utils::str(ps.options())

### ---- error checking of arguments: ----
ps.options(width = 0:12, onefile = 0, bg = pi)
# override the check for 'width', but not 'bg':
ps.options(width = 0:12, bg = pi, override.check = c(TRUE,FALSE))
utils::str(ps.options())
ps.options(reset = TRUE) # back to factory-fresh
</code></pre>

<hr>
<h2 id='quartz'>macOS Quartz Device</h2><span id='topic+quartz'></span><span id='topic+quartz.options'></span><span id='topic+quartz.save'></span>

<h3>Description</h3>

<p><code>quartz</code> starts a graphics device driver for the macOS system.
It supports plotting both to the screen (the default) and to various
graphics file formats.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>quartz(title, width, height, pointsize, family, antialias, type,
      file = NULL, bg, canvas, dpi)

quartz.options(..., reset = FALSE)

quartz.save(file, type = "png", device = dev.cur(), dpi = 100, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="quartz_+3A_title">title</code></td>
<td>
<p>title for the Quartz window (applies to on-screen output
only), default <code>"Quartz %d"</code>.  A C-style format for an integer
will be substituted by the device number (see the <code>file</code>
argument to <code><a href="#topic+pdf">pdf</a></code> for further details).</p>
</td></tr>
<tr><td><code id="quartz_+3A_width">width</code></td>
<td>
<p>the width of the plotting area in inches.  Default <code>7</code>.</p>
</td></tr>
<tr><td><code id="quartz_+3A_height">height</code></td>
<td>
<p>the height of the plotting area in inches.  Default <code>7</code>.</p>
</td></tr>
<tr><td><code id="quartz_+3A_pointsize">pointsize</code></td>
<td>
<p>the default pointsize to be used.  Default <code>12</code>.</p>
</td></tr>
<tr><td><code id="quartz_+3A_family">family</code></td>
<td>
<p>this is the family name of the font
that will be used by the device.  Default <code>"Arial"</code>.  This will
be the base name of a font as  shown in Font Book.</p>
</td></tr>
<tr><td><code id="quartz_+3A_antialias">antialias</code></td>
<td>
<p>whether to use antialiasing.  Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="quartz_+3A_type">type</code></td>
<td>
<p>the type of output to use.  See &lsquo;Details&rsquo; for
more information.  Default <code>"native"</code>.</p>
</td></tr>
<tr><td><code id="quartz_+3A_file">file</code></td>
<td>
<p>an optional target for the graphics device. The default,
<code>NULL</code>, selects a default name where one is needed.  See
&lsquo;Details&rsquo; for more information.</p>
</td></tr>
<tr><td><code id="quartz_+3A_bg">bg</code></td>
<td>
<p>the initial background colour to use for the device.  Default
<code>"transparent"</code>.  An opaque colour such as <code>"white"</code> will
normally be required on off-screen types that support transparency
such as <code>"png"</code> and <code>"tiff"</code>.</p>
</td></tr>
<tr><td><code id="quartz_+3A_canvas">canvas</code></td>
<td>
<p>canvas colour to use for an on-screen device.  Default
<code>"white"</code>, and will be forced to be an opaque colour.</p>
</td></tr>
<tr><td><code id="quartz_+3A_dpi">dpi</code></td>
<td>
<p>resolution of the output.  The default (<code>NA_real_</code>)
for an on-screen display defaults to the resolution of
the main screen, and to 72 dpi otherwise.  See &lsquo;Details&rsquo;.</p>
</td></tr>
<tr><td><code id="quartz_+3A_...">...</code></td>
<td>
<p>Any of the arguments to <code>quartz</code> except <code>file</code>.</p>
</td></tr>
<tr><td><code id="quartz_+3A_reset">reset</code></td>
<td>
<p>logical: should the defaults be reset to their defaults?</p>
</td></tr>
<tr><td><code id="quartz_+3A_device">device</code></td>
<td>
<p>device number to copy from.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The defaults for all but one of the arguments of <code>quartz</code> are set
by <code>quartz.options</code>: the &lsquo;Arguments&rsquo; section gives the
&lsquo;factory-fresh&rsquo; defaults.
</p>
<p>The Quartz graphics device supports a variety of output types.
On-screen output types are <code>""</code> or <code>"native"</code> or
<code>"Cocoa"</code>.  Off-screen output types produce output files and
utilize the <code>file</code> argument.  <code>type = "pdf"</code> gives PDF
output.  The following bitmap formats may be supported (depending on
the OS version): <code>"png"</code>, <code>"jpeg"</code>, <code>"jpg"</code>,
<code>"jpeg2000"</code>, <code>"tif"</code>, <code>"tiff"</code>, <code>"gif"</code>,
<code>"psd"</code> (Adobe Photoshop), <code>"bmp"</code> (Windows bitmap),
<code>"sgi"</code> and <code>"pict"</code>.
</p>
<p>The <code>file</code> argument is used for off-screen drawing.  The actual
file is only created when the device is closed (e.g., using
<code>dev.off()</code>).  For the bitmap devices, the page number is
substituted if a C integer format is included in the character string,
e.g. <code>Rplot%03d.png</code>.  (Depending on the platform,
the result should be less than
<code>PATH_MAX</code> characters long, and may be truncated if not. See
<code><a href="#topic+pdf">pdf</a></code> for further details.)  If a <code>file</code>
argument is not supplied, the default is <code>Rplots.pdf</code> or
<code>Rplot%03d.<var>type</var></code>.  Tilde expansion
(see <code><a href="base.html#topic+path.expand">path.expand</a></code>) is done.
</p>
<p>If a device-independent <span class="rlang"><b>R</b></span> graphics font family is specified (e.g.,
via <code>par(family =)</code> in the graphics package), the Quartz device
makes use of the Quartz font database (see <code>quartzFonts</code>) to
convert the R graphics font family to a Quartz-specific font family
description.  The default conversions are (MonoType TrueType versions
of) <code>Helvetica</code> for <code>sans</code>, <code>Times-Roman</code> for
<code>serif</code> and <code>Courier</code> for <code>mono</code>.
</p>
<p>On-screen devices are launched with a semi-transparent canvas.  Once a
new plot is created, the canvas is first painted with the
<code>canvas</code> colour and then the current background colour (which can
be transparent or semi-transparent).  Off-screen devices have no
canvas colour, and so start with a transparent background where
possible (e.g., <code>type = "png"</code> and <code>type = "tiff"</code>) &ndash;
otherwise it appears that a solid white canvas is assumed in the
Quartz code.  PNG and TIFF files are saved with a dark grey matte
which will show up in some viewers, including <code>Preview</code>.
</p>
<p><code>title</code> can be used for on-screen output.  It must be a single
character string with an optional integer printf-style format that
will be substituted by the device number.  It is also optionally used
(without a format) to give a title to a PDF file.
</p>
<p>Calling <code>quartz()</code> sets <code><a href="base.html#topic+.Device">.Device</a></code> to <code>"quartz"</code>
for on-screen devices and to <code>"quartz_off_screen"</code> otherwise.
</p>
<p>The font family chosen needs to cover the characters to be used:
characters not in the font are rendered as empty oblongs.  For
non-Western-European languages something other than the default of
<code>"Arial"</code> is likely to be needed&mdash;one choice for Chinese is
<code>"MingLiU"</code>.
</p>
<p><code>quartz.save</code> is a modified version of <code><a href="#topic+dev.copy2pdf">dev.copy2pdf</a></code>
to copy the plot from the current screen device to a <code>quartz</code>
device, by default to a PNG file.
</p>


<h3>Conventions</h3>

<p>This section describes the implementation of the conventions for
graphics devices set out in the &lsquo;R Internals&rsquo; manual.
</p>

<ul>
<li><p> The default device size is 7 inches square.
</p>
</li>
<li><p> Font sizes are in big points.
</p>
</li>
<li><p> The default font family is Arial.
</p>
</li>
<li><p> Line widths are a multiple of 1/96 inch with no minimum set by <span class="rlang"><b>R</b></span>.
</p>
</li>
<li><p> Circle radii are real-valued with no minimum set by <span class="rlang"><b>R</b></span>.
</p>
</li>
<li><p> Colours are specified as <abbr>sRGB</abbr>.
</p>
</li></ul>



<h3>Note</h3>

<p>For a long time the default font family was documented as
<code>"Helvetica"</code> after it had been changed to <code>"Arial"</code> to work
around a deficiency in macOS 10.4.   It may be changed back in future.
</p>
<p>A fairly common Mac problem is no text appearing on plots due to
corrupted or duplicated fonts on your system.  You may be able to
confirm this by using another font family,
e.g. <code>family = "serif"</code>.
Open the <code>Font Book</code> application (in <code>Applications</code>) and
check the fonts that you are using.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+quartzFonts">quartzFonts</a></code>, <code><a href="#topic+Devices">Devices</a></code>.
</p>
<p><code><a href="#topic+png">png</a></code> for way to access the bitmap types of this device
via <span class="rlang"><b>R</b></span>'s standard bitmap devices.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## Only on a Mac,
## put something like this is your .Rprofile to customize the defaults
setHook(packageEvent("grDevices", "onLoad"),
        function(...) grDevices::quartz.options(width = 8, height = 6,
                                                pointsize = 10))

## End(Not run)</code></pre>

<hr>
<h2 id='quartzFonts'>Quartz Fonts Setup</h2><span id='topic+quartzFont'></span><span id='topic+quartzFonts'></span>

<h3>Description</h3>

<p>These functions handle the translation of a device-independent <span class="rlang"><b>R</b></span> graphics
font family name to a <code><a href="#topic+quartz">quartz</a></code> font description.
</p>
<p>They are only available on Unix-alikes, i.e, not on Windows, and
typically used on the Mac.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>quartzFont(family)

quartzFonts(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="quartzFonts_+3A_family">family</code></td>
<td>
<p>a character vector containing the four PostScript font
names for plain, bold, italic, and bold italic versions of
a font family.</p>
</td></tr>
<tr><td><code id="quartzFonts_+3A_...">...</code></td>
<td>
<p>either character strings naming mappings to display,
or new (named) mappings to define.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A quartz device is created with a default font (see
the documentation for <code>quartz</code>), but it is also possible
to specify a font family when drawing to the device
(for example, see the documentation for <code><a href="grid.html#topic+gpar">gpar</a></code> in the
<span class="pkg">grid</span> package).
</p>
<p>The font family sent to the device is a simple string name, which must be
mapped to something more specific to quartz fonts.  A list of
mappings is maintained and can be modified by the user.
</p>
<p>The <code>quartzFonts</code> function can be used to list existing
mappings and to define new mappings.  The <code>quartzFont</code>
function can be used to create a new mapping.
</p>
<p>Default mappings are provided for three device-independent font family
names: <code>"sans"</code> for a sans-serif font, <code>"serif"</code> for a serif
font and <code>"mono"</code> for a monospaced font.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+quartz">quartz</a></code> for the default Mac graphics device.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(.Platform$OS.type == "unix") { # includes macOS

  utils::str( quartzFonts() )  # a list(serif = .., sans = .., mono = ..)
  quartzFonts("mono")          # the list(mono = ..) sublist of quartzFonts()

## Not run: 
  ## for East Asian locales you can use something like
  quartzFonts(sans = quartzFont(rep("AppleGothic", 4)),
	      serif = quartzFont(rep("AppleMyungjp", 4)))
  ## since the default fonts may well not have the glyphs needed

## End(Not run)
}
</code></pre>

<hr>
<h2 id='recordGraphics'>Record Graphics Operations</h2><span id='topic+recordGraphics'></span>

<h3>Description</h3>

<p>Records arbitrary code on the graphics engine display list.
Useful for encapsulating calculations with graphical output
that depends on the calculations.
Intended <em>only</em> for expert use.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recordGraphics(expr, list, env)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recordGraphics_+3A_expr">expr</code></td>
<td>
<p>object of mode <code><a href="base.html#topic+expression">expression</a></code> or <code>call</code> or
an unevaluated expression.</p>
</td></tr>
<tr><td><code id="recordGraphics_+3A_list">list</code></td>
<td>
<p>a list defining the environment in which <code>expr</code> is to
be evaluated.</p>
</td></tr>
<tr><td><code id="recordGraphics_+3A_env">env</code></td>
<td>
<p>an <code><a href="base.html#topic+environment">environment</a></code> specifying
where <span class="rlang"><b>R</b></span> looks for objects not found in <code>list</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The code in <code>expr</code> is evaluated in an environment constructed
from <code>list</code>, with <code>env</code> as the parent of that environment.
</p>
<p>All three arguments are saved on the graphics engine display list
so that on a device resize or copying between devices, the original
evaluation environment can be recreated and the code can be
re-evaluated to reproduce the graphical output.
</p>


<h3>Value</h3>

<p>The value from evaluating <code>expr</code>.
</p>


<h3>Warning</h3>

<p>This function is not intended for general use.  Incorrect or
improper use of this function could lead to unintended and/or
undesirable results.
</p>
<p>An example of acceptable use is querying the current state
of a graphics device or graphics system setting and then
calling a graphics function.
</p>
<p>An example of improper use would be calling the <code>assign</code> function
to performing assignments in the global environment.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+eval">eval</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>require(graphics)

plot(1:10)
# This rectangle remains 1inch wide when the device is resized
recordGraphics(
  {
    rect(4, 2,
         4 + diff(par("usr")[1:2])/par("pin")[1], 3)
  },
  list(),
  getNamespace("graphics"))
</code></pre>

<hr>
<h2 id='recordPlot'>Record and Replay Plots</h2><span id='topic+replayPlot'></span><span id='topic+recordPlot'></span><span id='topic+print.recordedplot'></span>

<h3>Description</h3>

<p>Functions to save the current plot in an <span class="rlang"><b>R</b></span> variable, and to replay it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recordPlot(load=NULL, attach=NULL)
replayPlot(x, reloadPkgs=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recordPlot_+3A_load">load</code></td>
<td>
<p>If not <code>NULL</code>, a character vector of package names,
which are saved as part of the recorded plot.</p>
</td></tr>
<tr><td><code id="recordPlot_+3A_attach">attach</code></td>
<td>
<p>If not <code>NULL</code>, a character vector of package names,
which are saved as part of the recorded plot.</p>
</td></tr>
<tr><td><code id="recordPlot_+3A_x">x</code></td>
<td>
<p>A saved plot.</p>
</td></tr>
<tr><td><code id="recordPlot_+3A_reloadpkgs">reloadPkgs</code></td>
<td>
<p>A logical indicating whether to reload and/or
reattach any packages that were saved as part of the recorded plot.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions record and replay the display list of the current
graphics device.  The returned object is of class
<code>"recordedplot"</code>, and <code>replayPlot</code> acts as a <code>print</code>
method for that class.
</p>
<p>The returned object is stored as a pairlist, but the usual methods for
examining <span class="rlang"><b>R</b></span> objects such as <code><a href="base.html#topic+deparse">deparse</a></code> and
<code><a href="utils.html#topic+str">str</a></code> are liable to mislead.
</p>


<h3>Value</h3>

<p><code>recordPlot</code> returns an object of class <code>"recordedplot"</code>.
</p>
<p><code>replayPlot</code> has no return value.
</p>


<h3>Warning</h3>

<p>The format of recorded plots may change between <span class="rlang"><b>R</b></span> versions, so
recorded plots should <strong>not</strong> be used as a permanent
storage format for <span class="rlang"><b>R</b></span> plots.
</p>
<p>As of <span class="rlang"><b>R</b></span> 3.3.0, it is possible (again)
to replay a plot from another <span class="rlang"><b>R</b></span> session using, for example,
<code><a href="base.html#topic+saveRDS">saveRDS</a></code> and <code><a href="base.html#topic+readRDS">readRDS</a></code>.
It is even possible to replay a plot from another <span class="rlang"><b>R</b></span> version,
however, this will produce warnings, may produce errors,
or something worse.
</p>


<h3>Note</h3>

<p>Replay of a recorded plot may not produce the correct result
(or may just fail) if the display list contains a call to
<code><a href="#topic+recordGraphics">recordGraphics</a></code> which in turn contains an expression
that calls code from a non-base package other than <span class="pkg">graphics</span>
or <span class="pkg">grid</span>.  The most well-known example of this is a plot
drawn with the package <a href="https://CRAN.R-project.org/package=ggplot2"><span class="pkg">ggplot2</span></a>.  One solution is to load
the relevant package(s) before replaying the recorded plot.
The <code>load</code> and <code>attach</code> arguments to <code>recordPlot</code>
can be used to automate this - any packages named in <code>load</code>
will be reloaded, via <code><a href="base.html#topic+loadNamespace">loadNamespace</a></code>, and any packages
named in <code>attach</code> will be reattached, via <code><a href="base.html#topic+library">library</a></code>,
as long as <code>reloadPkgs</code> is <code>TRUE</code> in the call to
<code>replayPlot</code>.  This is only relevant when attempting to
replay in one R session a plot that was recorded in a different R session.
</p>


<h3>References</h3>

<p>Murrell, P., Ooms, J., Allaire, J.J. (2015),
&quot;Recording and Replaying the Graphics Engine Display List&quot;,
<a href="https://stattech.wordpress.fos.auckland.ac.nz/2015/12/21/2015-07-recording-and-replaying-the-graphics-engine-display-list/">https://stattech.wordpress.fos.auckland.ac.nz/2015/12/21/2015-07-recording-and-replaying-the-graphics-engine-display-list/</a>
</p>


<h3>See Also</h3>

<p>The display list can be turned on and off using <code><a href="#topic+dev.control">dev.control</a></code>.
Initially recording is on for screen devices, and off for print devices.
</p>

<hr>
<h2 id='rgb'>RGB Color Specification</h2><span id='topic+rgb'></span>

<h3>Description</h3>

<p>This function creates colors corresponding to the given
intensities (between 0 and <code>max</code>) of the red, green and blue
primaries.  The colour specification refers to the
standard <abbr>sRGB</abbr> colorspace (<abbr>IEC</abbr> standard 61966).
</p>
<p>An alpha transparency value can also be specified (as an opacity, so
<code>0</code> means fully transparent and <code>max</code> means opaque).  If
<code>alpha</code> is not specified, an opaque colour is generated.
</p>
<p>The <code>names</code> argument may be used to provide names for the
colors.
</p>
<p>The values returned by these functions can be used with a
<code>col=</code> specification in graphics functions or in <code><a href="graphics.html#topic+par">par</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rgb(red, green, blue, alpha, names = NULL, maxColorValue = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rgb_+3A_red">red</code>, <code id="rgb_+3A_blue">blue</code>, <code id="rgb_+3A_green">green</code>, <code id="rgb_+3A_alpha">alpha</code></td>
<td>
<p>numeric vectors with values in <code class="reqn">[0, M]</code>
where <code class="reqn">M</code> is <code>maxColorValue</code>.  When this is <code>255</code>, the
<code>red</code>, <code>blue</code>, <code>green</code>, and <code>alpha</code>
values are coerced to integers in <code>0:255</code> and the result is
computed most efficiently.</p>
</td></tr>
<tr><td><code id="rgb_+3A_names">names</code></td>
<td>
<p>character vector. The names for the resulting vector.</p>
</td></tr>
<tr><td><code id="rgb_+3A_maxcolorvalue">maxColorValue</code></td>
<td>
<p>number giving the maximum of the color values
range, see above.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The colors may be specified by passing a matrix or data frame as argument
<code>red</code>, and leaving <code>blue</code> and <code>green</code> missing.
In this case the first three columns of <code>red</code> are taken to be
the <code>red</code>, <code>green</code> and <code>blue</code> values.
</p>
<p>Semi-transparent colors (<code>0 &lt; alpha &lt; 1</code>) are supported only on
some devices: at the time of writing on the <code><a href="#topic+pdf">pdf</a></code>,
<code>windows</code>, <code>quartz</code> and <code>X11(type = "cairo")</code> devices and
associated bitmap devices (<code>jpeg</code>, <code>png</code>, <code>bmp</code>,
<code>tiff</code> and <code>bitmap</code>). They are supported by several
third-party devices such as those in packages <a href="https://CRAN.R-project.org/package=Cairo"><span class="pkg">Cairo</span></a>,
<a href="https://CRAN.R-project.org/package=cairoDevice"><span class="pkg">cairoDevice</span></a> and <a href="https://CRAN.R-project.org/package=JavaGD"><span class="pkg">JavaGD</span></a>.  Only some of these
devices support semi-transparent backgrounds.
</p>
<p>Most other graphics devices plot semi-transparent colors as fully
transparent, usually with a warning when first encountered.
</p>
<p><code>NA</code> values are not allowed for any of <code>red</code>, <code>blue</code>, 
<code>green</code> or <code>alpha</code>.
</p>


<h3>Value</h3>

<p>A character vector with elements of 7 or 9 characters,
beginning with <code>"#"</code> followed by the red, 
blue, green and optionally alpha values in hexadecimal (after 
rescaling to <code>0 ... 255</code>).  The optional alpha values range 
from <code>0</code> (fully transparent) to <code>255</code> (opaque). 
</p>
<p><span class="rlang"><b>R</b></span> does <strong>not</strong> use &lsquo;premultiplied alpha&rsquo;.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+col2rgb">col2rgb</a></code> for translating <span class="rlang"><b>R</b></span> colors to RGB vectors;
<code><a href="#topic+rainbow">rainbow</a></code>, <code><a href="#topic+hsv">hsv</a></code>, <code><a href="#topic+hcl">hcl</a></code>,
<code><a href="#topic+gray">gray</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rgb(0, 1, 0)

rgb((0:15)/15, green = 0, blue = 0, names = paste("red", 0:15, sep = "."))

rgb(0, 0:12, 0, maxColorValue = 255) # integer input

ramp &lt;- colorRamp(c("red", "white"))
rgb( ramp(seq(0, 1, length.out = 5)), maxColorValue = 255)
</code></pre>

<hr>
<h2 id='rgb2hsv'>RGB to HSV Conversion</h2><span id='topic+rgb2hsv'></span>

<h3>Description</h3>

<p><code>rgb2hsv</code> transforms colors
from RGB space (red/green/blue)
into HSV space (hue/saturation/value).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rgb2hsv(r, g = NULL, b = NULL, maxColorValue = 255)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rgb2hsv_+3A_r">r</code></td>
<td>
<p>vector of &lsquo;red&rsquo; values in <code class="reqn">[0, M]</code>, (<code class="reqn">M
      = </code><code>maxColorValue</code>) or 3-row RGB matrix.</p>
</td></tr>
<tr><td><code id="rgb2hsv_+3A_g">g</code></td>
<td>
<p>vector of &lsquo;green&rsquo; values, or <code><a href="base.html#topic+NULL">NULL</a></code> when
<code>r</code> is a matrix.</p>
</td></tr>
<tr><td><code id="rgb2hsv_+3A_b">b</code></td>
<td>
<p>vector of &lsquo;blue&rsquo; values, or <code><a href="base.html#topic+NULL">NULL</a></code> when
<code>r</code> is a matrix.</p>
</td></tr>
<tr><td><code id="rgb2hsv_+3A_maxcolorvalue">maxColorValue</code></td>
<td>
<p>number giving the maximum of the RGB color values
range.  The default <code>255</code> corresponds to the typical <code>0:255</code>
RGB coding as in <code><a href="#topic+col2rgb">col2rgb</a>()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Value (brightness) gives the amount of light in the color.<br />
Hue describes the dominant wavelength.<br />
Saturation is the amount of Hue mixed into the color.
</p>
<p>An HSV colorspace is relative to an RGB colorspace, which in <span class="rlang"><b>R</b></span>
is <abbr>sRGB</abbr>, which has an implicit gamma correction.
</p>


<h3>Value</h3>

<p>A matrix with a column for each color.  The three rows of the matrix
indicate hue, saturation and value and are named <code>"h"</code>,
<code>"s"</code>, and <code>"v"</code> accordingly.
</p>


<h3>Author(s)</h3>

<p><span class="rlang"><b>R</b></span> interface by Wolfram Fischer <a href="mailto:wolfram@fischer-zim.ch">wolfram@fischer-zim.ch</a>;<br />
C code mainly by Nicholas Lewin-Koh <a href="mailto:nikko@hailmail.net">nikko@hailmail.net</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+hsv">hsv</a></code>, <code><a href="#topic+col2rgb">col2rgb</a></code>, <code><a href="#topic+rgb">rgb</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## These (saturated, bright ones) only differ by hue
(rc &lt;- col2rgb(c("red", "yellow","green","cyan", "blue", "magenta")))
(hc &lt;- rgb2hsv(rc))
6 * hc["h",] # the hues are equispaced


(rgb3 &lt;- floor(256 * matrix(stats::runif(3*12), 3, 12)))
(hsv3 &lt;- rgb2hsv(rgb3))
## Consistency :
stopifnot(rgb3 == col2rgb(hsv(h = hsv3[1,], s = hsv3[2,], v = hsv3[3,])),
          all.equal(hsv3, rgb2hsv(rgb3/255, maxColorValue = 1)))

## A (simplified) pure R version -- originally by Wolfram Fischer --
## showing the exact algorithm:
rgb2hsvR &lt;- function(rgb, gamma = 1, maxColorValue = 255)
{
    if(!is.numeric(rgb)) stop("rgb matrix must be numeric")
    d &lt;- dim(rgb)
    if(d[1] != 3) stop("rgb matrix must have 3 rows")
    n &lt;- d[2]
    if(n == 0) return(cbind(c(h = 1, s = 1, v = 1))[,0])
    rgb &lt;- rgb/maxColorValue
    if(gamma != 1) rgb &lt;- rgb ^ (1/gamma)

    ## get the max and min
    v &lt;- apply( rgb, 2, max)
    s &lt;- apply( rgb, 2, min)
    D &lt;- v - s # range

    ## set hue to zero for undefined values (gray has no hue)
    h &lt;- numeric(n)
    notgray &lt;- ( s != v )

    ## blue hue
    idx &lt;- (v == rgb[3,] &amp; notgray )
    if (any (idx))
        h[idx] &lt;- 2/3 + 1/6 * (rgb[1,idx] - rgb[2,idx]) / D[idx]
    ## green hue
    idx &lt;- (v == rgb[2,] &amp; notgray )
    if (any (idx))
        h[idx] &lt;- 1/3 + 1/6 * (rgb[3,idx] - rgb[1,idx]) / D[idx]
    ## red hue
    idx &lt;- (v == rgb[1,] &amp; notgray )
    if (any (idx))
        h[idx] &lt;-       1/6 * (rgb[2,idx] - rgb[3,idx]) / D[idx]

    ## correct for negative red
    idx &lt;- (h &lt; 0)
    h[idx] &lt;- 1+h[idx]

    ## set the saturation
    s[! notgray] &lt;- 0;
    s[notgray] &lt;- 1 - s[notgray] / v[notgray]

    rbind( h = h, s = s, v = v )
}

## confirm the equivalence:
all.equal(rgb2hsv (rgb3),
          rgb2hsvR(rgb3), tolerance = 1e-14) # TRUE
</code></pre>

<hr>
<h2 id='savePlot'>Save Cairo X11 Plot to File</h2><span id='topic+savePlot'></span>

<h3>Description</h3>

<p>Save the current page of a cairo <code><a href="#topic+X11">X11</a>()</code> device to a file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>savePlot(filename = paste0("Rplot.", type),
         type = c("png", "jpeg", "tiff", "bmp"),
         device = dev.cur())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="savePlot_+3A_filename">filename</code></td>
<td>
<p>filename to save to.</p>
</td></tr>
<tr><td><code id="savePlot_+3A_type">type</code></td>
<td>
<p>file type.</p>
</td></tr>
<tr><td><code id="savePlot_+3A_device">device</code></td>
<td>
<p>the device to save from.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Only cairo-based <code>X11</code> devices are supported.
</p>
<p>This works by copying the image surface to a file.  For PNG
will always be a 24-bit per pixel PNG &lsquo;DirectClass&rsquo; file, for
JPEG the quality is 75% and for TIFF there is no compression.
</p>
<p>For devices with buffering this copies the buffer's image surface, so
works even if <code><a href="#topic+dev.hold">dev.hold</a></code> has been called.
</p>
<p>The plot is saved after rendering onto the canvas (default opaque
white), so for the default <code>bg = "transparent"</code> the effective
background colour is the canvas colour.
</p>


<h3>Value</h3>

<p>Invisible <code>NULL</code>.
</p>


<h3>Note</h3>

<p>There is a similar function of the same name but more types for
<code>windows</code> devices on Windows: that has an additional argument
<code>restoreConsole</code> which is only supported on Windows.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+recordPlot">recordPlot</a>()</code> which is device independent.  Further,
<code><a href="#topic+X11">X11</a></code>, <code><a href="#topic+dev.copy">dev.copy</a></code>, <code><a href="#topic+dev.print">dev.print</a></code>
</p>

<hr>
<h2 id='trans3d'>3D to 2D Transformation for Perspective Plots</h2><span id='topic+trans3d'></span>

<h3>Description</h3>

<p>Projection of 3-dimensional to 2-dimensional points using a 4x4
viewing transformation matrix.  Mainly for adding to
perspective plots such as <code><a href="graphics.html#topic+persp">persp</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trans3d(x, y, z, pmat, continuous = FALSE, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trans3d_+3A_x">x</code>, <code id="trans3d_+3A_y">y</code>, <code id="trans3d_+3A_z">z</code></td>
<td>
<p>numeric vectors of equal length, specifying points in
3D space.</p>
</td></tr>
<tr><td><code id="trans3d_+3A_pmat">pmat</code></td>
<td>
<p>a <code class="reqn">4 \times 4</code> <em>viewing transformation matrix</em>,
suitable for projecting the 3D coordinates <code class="reqn">(x,y,z)</code> into the 2D
plane using homogeneous 4D coordinates <code class="reqn">(x,y,z,t)</code>;
such matrices are returned by <code><a href="graphics.html#topic+persp">persp</a>()</code>.</p>
</td></tr>
<tr><td><code id="trans3d_+3A_continuous">continuous</code></td>
<td>
<p>logical flag specifying if the transformation should
check if the transformed points are continuous in the sense that they
do not jump over <code class="reqn">a/0</code> discontinuity.  As these assume
<code>(x,y,z)</code> to describe a continuous curve, the default must be
false.  In case of projecting such a curve however, setting
<code>continuous=TRUE</code> may be advisable.</p>
</td></tr>
<tr><td><code id="trans3d_+3A_verbose">verbose</code></td>
<td>
<p>only for <code>continuous=TRUE</code>, indicates if a warning
should be issued when points are cut off.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with two components
</p>
<table>
<tr><td><code>x</code>, <code>y</code></td>
<td>
<p>the projected 2d coordinates of the 3d input <code>(x,y,z)</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

 <p><code><a href="graphics.html#topic+persp">persp</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>## See  help(persp) {after attaching the 'graphics' package}
##      -----------

## Example for 'continuous = TRUE' (vs default):
require(graphics)
x &lt;- -10:10/10 # [-1, 1]
y &lt;- -16:16/16 # [-1, 1] ==&gt; z = fxy := outer(x,y) is also in [-1,1]

p &lt;- persp(x, y, fxy &lt;- outer(x,y), phi = 20, theta = 15, r = 3, ltheta = -75,
           shade = 0.8, col = "green3", ticktype = "detailed")
## 5 axis-parallel auxiliary lines in x-y  and y-z planes :
lines(trans3d(-.5 , y=-1:1, z=min(fxy),  pmat=p), lty=2)
lines(trans3d(  0 , y=-1:1, z=min(fxy),  pmat=p), lty=2)
lines(trans3d(-1:1, y= -.7, z=min(fxy),  pmat=p), lty=2)
lines(trans3d( -1,  y= -.7, z=c(-1,1) ,  pmat=p), lty=2)
lines(trans3d( -1,  y=-1:1, z= -.5    ,  pmat=p), lty=2)
## 2 pillars to carry the horizontals below:
lines(trans3d(-.5 , y= -.7, z=c(-1,-.5), pmat=p), lwd=1.5, col="gray10")
lines(trans3d( 0  , y= -.7, z=c(-1,-.5), pmat=p), lwd=1.5, col="gray10")
## now some "horizontal rays" (going from center to very left or very right):
doHor &lt;- function(x1, x2, z, CNT=FALSE, ...)
    lines(trans3d(x=seq(x1, x2, by=0.5), y= -0.7, z = z, pmat = p, continuous = CNT),
          lwd = 3, type="b", xpd=NA, ...)
doHor(-10,  0, z = -0.5, col = 2)  # x in [-10, 0] -- to the very left : fine
doHor(-.5,  2, z = -0.52,col = 4) # x in [-0.5, 2] only {to the right} --&gt; all fine
## but now, x in [-0.5, 20] -- "too far" ==&gt; "wrap around" problem (without 'continuous=TRUE'):
doHor(-.5, 20, z = -0.58, col = "steelblue", lty=2)
## but it is fixed with continuous = CNT = TRUE:
doHor(-.5, 20, z = -0.55, CNT=TRUE, col = "skyblue")
</code></pre>

<hr>
<h2 id='Type1Font'>Type 1 and CID Fonts</h2><span id='topic+Type1Font'></span><span id='topic+CIDFont'></span>

<h3>Description</h3>

<p>These functions are used to define the translation of a <span class="rlang"><b>R</b></span> graphics
font family name to Type 1 or CID font descriptions, used by
the <code><a href="#topic+pdf">pdf</a></code> and <code><a href="#topic+postscript">postscript</a></code> graphics devices.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Type1Font(family, metrics, encoding = "default")

CIDFont(family, cmap, cmapEncoding, pdfresource = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Type1Font_+3A_family">family</code></td>
<td>
<p>a character string giving the name to be used internally
for a Type 1 or CID-keyed font family.  This needs to uniquely
identify each family, so if you modify a family which is in use
(see <code><a href="#topic+postscriptFonts">postscriptFonts</a></code>) you need to change the family name.</p>
</td></tr>
<tr><td><code id="Type1Font_+3A_metrics">metrics</code></td>
<td>
<p>a character vector of four or five strings giving paths
to the <abbr>afm</abbr> (Adobe Font Metric) files for the font.</p>
</td></tr>
<tr><td><code id="Type1Font_+3A_cmap">cmap</code></td>
<td>
<p>the name of a <abbr>CMap</abbr> file for a CID-keyed font.</p>
</td></tr>
<tr><td><code id="Type1Font_+3A_encoding">encoding</code></td>
<td>
<p>for <code>Type1Font</code>, the name of an encoding file.
Defaults to <code>"default"</code>, which maps on Unix-alikes to
<code>"ISOLatin1.enc"</code> and on Windows to <code>"WinAnsi.enc"</code>.
Otherwise, a file name in the &lsquo;<span class="file">enc</span>&rsquo; directory of the
<span class="pkg">grDevices</span> package, which is used if the path does not contain a
path separator.  An extension <code>".enc"</code> can be omitted.</p>
</td></tr>
<tr><td><code id="Type1Font_+3A_cmapencoding">cmapEncoding</code></td>
<td>

<p>The name of a character encoding to be used with the named <abbr>CMap</abbr>
file: strings will be translated to this encoding when written to
the file.</p>
</td></tr>
<tr><td><code id="Type1Font_+3A_pdfresource">pdfresource</code></td>
<td>
<p>A chunk of PDF code;  only required for using
a CID-keyed font on <code>pdf</code>; users should not be expected to
provide this.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For <code>Type1Fonts</code>, if four &lsquo;<span class="file">.afm</span>&rsquo; files are supplied the
fifth is taken to be <code>"Symbol.afm"</code>.  Relative paths are taken
relative to the directory &lsquo;<span class="file"><var><a href="base.html#topic+R_HOME">R_HOME</a></var>/library/grDevices/afm</span>&rsquo;.
The fifth (symbol) font must be in <code>AdobeSym</code> encoding.
However, the glyphs in the first four fonts are referenced by name
and any encoding given within the &lsquo;<span class="file">.afm</span>&rsquo; files is not used.
</p>
<p>The &lsquo;<span class="file">.afm</span>&rsquo; files may be compressed with (or without) final
extension &lsquo;<span class="file">.gz</span>&rsquo;: the files which ship with <span class="rlang"><b>R</b></span> are installed as
compressed files with this extension.
</p>
<p>Glyphs in CID-keyed fonts are accessed by ID (number) and not by name.
The <abbr>CMap</abbr> file maps encoded strings (usually in a <abbr>MBCS</abbr>) to IDs, so
<code>cmap</code> and <code>cmapEncoding</code> specifications must match.  There
are no real bold or italic versions of CID fonts (bold/italic were
very rarely used in traditional East Asian topography), and for the
<code><a href="#topic+pdf">pdf</a></code> device all four font faces will be identical.
However, for the <code><a href="#topic+postscript">postscript</a></code> device, bold and italic (and
bold italic) are emulated.
</p>
<p>CID-keyed fonts are intended only for use for the glyphs of East Asian
languages, which are all monospaced and are all treated as filling the
same bounding box.  (Thus <code><a href="#topic+plotmath">plotmath</a></code> will work with such
characters, but the spacing will be less carefully controlled than
with Western glyphs.)  The CID-keyed fonts do contain other
characters, including a Latin alphabet: non-East-Asian glyphs are
regarded as monospaced with half the width of East Asian glyphs.  This
is often the case, but sometimes Latin glyphs designed for
proportional spacing are used (and may look odd).  We strongly
recommend that CID-keyed fonts are <b>only</b> used for East Asian
glyphs.
</p>


<h3>Value</h3>

<p>A list of class <code>"Type1Font"</code> or <code>"CIDFont"</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pdf">pdf</a></code>, <code><a href="#topic+postscript">postscript</a></code>, <code><a href="#topic+pdfFonts">pdfFonts</a></code> and
<code><a href="#topic+postscriptFonts">postscriptFonts</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## This duplicates "ComputerModernItalic".
CMitalic &lt;- Type1Font("ComputerModern2",
                      c("CM_regular_10.afm", "CM_boldx_10.afm",
                        "cmti10.afm", "cmbxti10.afm",
                        "CM_symbol_10.afm"),
                      encoding = "TeXtext.enc")

## Not run: 
## This could be used by
postscript(family = CMitalic)
## or
postscriptFonts(CMitalic = CMitalic)  # once in a session
postscript(family = "CMitalic", encoding = "TeXtext.enc")

## End(Not run)</code></pre>

<hr>
<h2 id='windows'>Windows Graphics Devices</h2><span id='topic+windows'></span><span id='topic+win.graph'></span><span id='topic+win.metafile'></span><span id='topic+win.print'></span><span id='topic+print.SavedPlots'></span><span id='topic++5B.SavedPlots'></span>

<h3>Description</h3>

<p>Available only on Windows.
A graphics device is opened.  For <code>windows</code>, <code>win.graph</code>,
<code>x11</code> and <code>X11</code> this is a window on the current
Windows display: the multiple names are for compatibility with other
systems.  <code>win.metafile</code> prints to a file and <code>win.print</code> to
the Windows print system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>windows(width, height, pointsize, record, rescale, xpinch, ypinch,
        bg, canvas, gamma, xpos, ypos, buffered, title,
        restoreConsole, clickToConfirm, fillOddEven,
        family, antialias)

win.graph(width, height, pointsize)

win.metafile(filename = "", width = 7, height = 7, pointsize = 12,
             family, restoreConsole = TRUE,
             xpinch = NA_real_, ypinch = NA_real_)

win.print(width = 7, height = 7, pointsize = 12, printer = "",
          family, antialias, restoreConsole = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="windows_+3A_width">width</code>, <code id="windows_+3A_height">height</code></td>
<td>
<p>the (nominal) width and height of the canvas of
the plotting window in inches.  Default <code>7</code>.</p>
</td></tr>
<tr><td><code id="windows_+3A_pointsize">pointsize</code></td>
<td>
<p>the default pointsize of plotted text, interpreted as
big points (1/72 inch).  Values are rounded to the nearest integer:
values less than or equal to zero are reset to <code>12</code>, the
default.</p>
</td></tr>
<tr><td><code id="windows_+3A_record">record</code></td>
<td>
<p>logical: sets the initial state of the flag for
recording plots.  Default <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="windows_+3A_rescale">rescale</code></td>
<td>
<p>character, one of <code>c("R", "fit", "fixed")</code>.
Controls the action for resizing of the device.  Default
<code>"R"</code>.  See the &lsquo;Resizing options&rsquo; section.</p>
</td></tr>
<tr><td><code id="windows_+3A_xpinch">xpinch</code>, <code id="windows_+3A_ypinch">ypinch</code></td>
<td>
<p>double.  Pixels per inch, horizontally and
vertically.  Default <code>NA_real_</code>, which means to take the
value from Windows.</p>
</td></tr>
<tr><td><code id="windows_+3A_bg">bg</code></td>
<td>
<p>color.  The initial background color.  Default
<code>"transparent"</code>.</p>
</td></tr>
<tr><td><code id="windows_+3A_canvas">canvas</code></td>
<td>
<p>color.  The color of the canvas which is visible
when the background color is transparent.  Should be a solid color
(and any alpha value will be ignored).  Default <code>"white"</code>.</p>
</td></tr>
<tr><td><code id="windows_+3A_gamma">gamma</code></td>
<td>
<p>gamma correction fudge factor.
Colours in R are <abbr>sRGB</abbr>;  if your monitor does not conform to
<abbr>sRGB</abbr>, you might be able to improve things by tweaking this
parameter to apply additional gamma correction to the RGB channels.
By default 1 (no additional gamma correction).</p>
</td></tr>
<tr><td><code id="windows_+3A_xpos">xpos</code>, <code id="windows_+3A_ypos">ypos</code></td>
<td>
<p>integer.  Position of the top left of the window, in
pixels.  Negative values are taken from the opposite edge of the
monitor.  Missing values (the default) mean take the default from the
&lsquo;<span class="file"><a href="utils.html#topic+Rconsole">Rconsole</a></span>&rsquo; file, which in turn defaults to
<code>xpos = -25, ypos = 0</code>: this puts the right edge of the window 25
pixels from the right edge of the monitor.</p>
</td></tr>
<tr><td><code id="windows_+3A_buffered">buffered</code></td>
<td>
<p>logical.  Should the screen output be double-buffered?
Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="windows_+3A_title">title</code></td>
<td>
<p>character string, up to 100 bytes.  With the default
<code>""</code>, a suitable title is created internally.  A C-style format
for an integer will be substituted by the device number.</p>
</td></tr>
<tr><td><code id="windows_+3A_filename">filename</code></td>
<td>
<p>the name of the output file: it will be an enhanced
Windows metafile, usually given extension &lsquo;<span class="file">.emf</span>&rsquo; or
&lsquo;<span class="file">.wmf</span>&rsquo;.  Up to 511 characters are allowed. The page number is
substituted if an integer format is included in the character
string (see <code><a href="#topic+pdf">pdf</a></code> for further details) and
tilde-expansion (see <code><a href="base.html#topic+path.expand">path.expand</a></code>) is performed. (The
result must be less than 600 characters long.)  The default,
<code>""</code>, means the clipboard.</p>
</td></tr>
<tr><td><code id="windows_+3A_printer">printer</code></td>
<td>
<p>The name of a printer as known to Windows. The default
causes a dialog box to come up for the user to choose a printer.</p>
</td></tr>
<tr><td><code id="windows_+3A_restoreconsole">restoreConsole</code></td>
<td>
<p>logical:  see the &lsquo;Details&rsquo; below.  Defaults to
<code>FALSE</code> for screen devices.</p>
</td></tr>
<tr><td><code id="windows_+3A_clicktoconfirm">clickToConfirm</code></td>
<td>
<p>logical: if true confirmation of a new frame
will be by clicking on the device rather than answering a problem in
the console.  Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="windows_+3A_filloddeven">fillOddEven</code></td>
<td>
<p>logical controlling the polygon fill mode:  see
<code><a href="graphics.html#topic+polygon">polygon</a></code> for details.  Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="windows_+3A_family">family</code></td>
<td>
<p>A length-one character vector specifying the default
font family.  See section &lsquo;Fonts&rsquo;.</p>
</td></tr>
<tr><td><code id="windows_+3A_antialias">antialias</code></td>
<td>
<p>A length-one character vector, requesting control
over font antialiasing.  This is partially matched to
<code>"default"</code>, <code>"none"</code>, <code>"cleartype"</code> or
<code>"gray"</code>.  See the &lsquo;Fonts&rsquo; section.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All these devices are implemented as variants of the same device.
</p>
<p>All arguments of <code>windows</code> have defaults set by
<code><a href="#topic+windows.options">windows.options</a></code>: the defaults given in the arguments section
are the defaults for the defaults.  These defaults also apply to the
internal values of <code>gamma</code>, <code>xpinch</code>, <code>ypinch</code>,
<code>buffered</code>, <code>restoreConsole</code> and <code>antialias</code> for
<code>win.graph</code>, <code>x11</code> and <code>X11</code>.
</p>
<p>The size of a window is computed from information provided about the
display: it depends on the system being configured accurately.
By default a screen device asks Windows for the number of pixels per
inch.  This can be overridden (it is often wrong) by specifying
<code>xpinch</code> and <code>ypinch</code>, most conveniently <em>via</em>
<code><a href="#topic+windows.options">windows.options</a></code>.  For example, a 13.3 inch 1280x800
screen (a typical laptop display) was reported as 96 dpi even though
it is physically about 114 dpi.  These arguments may also be useful
to match the scale of output to the size of a metafile (which otherwise
depends on the system being configured accurately).
</p>
<p>The different colours need to be distinguished carefully.  Areas
outside the device region are coloured in the Windows application background
colour.  The device region is coloured in the canvas colour.  This is
over-painted by the background colour of a plot when a new page is
called for, but that background colour can be transparent (and is by
default).  One difference between setting the canvas colour and the
background colour is that when a plot is saved the background
colour is copied but the canvas colour is not.  The argument <code>bg</code>
sets the initial value of <code><a href="graphics.html#topic+par">par</a>("bg")</code> in base graphics and
<code><a href="grid.html#topic+gpar">gpar</a>("fill")</code> in grid graphics
</p>
<p>Recorded plot histories are of class <code>"SavedPlots"</code>.  They have a
<code>print</code> method, and a subset method.  As the individual plots are
of class <code>"recordedplot"</code> they can be replayed by printing them:
see <code><a href="#topic+recordPlot">recordPlot</a></code>.  The active plot history is stored in
variable <code>.SavedPlots</code> in the workspace.
</p>
<p>When a screen device is double-buffered (the default) the
screen is updated 100ms after last plotting call or every 500ms during
continuous plotting.  These times can be altered by setting
<code>options("windowsTimeout")</code> to a vector of two integers before
opening the device.
</p>
<p>Line widths as controlled by <code>par(lwd =)</code> are in multiples of
1/96inch.  Multiples less than 1 are allowed, down to one pixel width.
</p>
<p>For <code>win.metafile</code> only one plot is allowed per file, and Windows
seems to disallow reusing the file.  So the <em>only</em> way to allow
multiple plots is to use a parametrized <code>filename</code> as in the
example.  If the <code>filename</code> is omitted (or specified as
<code>""</code>), the output is copied to the clipboard when the device is
closed.
</p>
<p>The <code>restoreConsole</code> argument is a temporary fix for a problem
in the current implementation of several Windows graphics devices,
and is likely to be removed in an upcoming release.  If set to
<code>FALSE</code>, the console will not receive the focus after the new
device is opened.
</p>
<p>There is support for semi-transparent colours of lines, fills and text
on the screen devices.  These work for saving (from the &lsquo;File&rsquo;
menu) to PDF, PNG, <abbr>BMP</abbr>, JPEG and TIFF, but will be ignored if saving
to Metafile and PostScript.  Limitations in the underlying Windows API
mean that a semi-transparent object must be contained strictly within
the device region (allowing for line widths and joins).
</p>


<h3>Value</h3>

<p>A plot device is opened: nothing is returned to the <span class="rlang"><b>R</b></span> interpreter.
</p>


<h3>Resizing options</h3>

<p>If a screen device is re-sized, the default behaviour (<code>"R"</code>) is
to redraw the plot(s) as if the new size had been specified
originally.  Using <code>"fit"</code> will rescale the existing plot(s) to
fit the new device region, preserving the aspect ratio.  Using
<code>"fixed"</code> will leave the plot size unchanged, adding scrollbars
if part of the plot is obscured.
</p>
<p>A graphics window will never be created at more than 85% of
the screen width or height, but can be resized to a larger size.
For the first two <code>rescale</code> options the width and height are
rescaled proportionally if necessary, and if <code>rescale = "fit"</code>
the plot(s) are rescaled accordingly.  If <code>rescale = "fixed"</code>
the initially displayed portion is selected within these constraints,
separately for width and height.  In MDI mode,
the limit is 85% of the MDI client region.
</p>
<p>Using <code><a href="graphics.html#topic+strwidth">strwidth</a></code> or <code><a href="graphics.html#topic+strheight">strheight</a></code> after a window
has been rescaled (when using <code>"fit"</code>) gives dimensions in the
original units, but only approximately as they are derived from the
metrics of the rescaled fonts (which are in integer sizes)
</p>
<p>The displayed region may be bigger than the &lsquo;paper&rsquo; size, and
area(s) outside the &lsquo;paper&rsquo; are coloured in the Windows
application background colour.  Graphics parameters such as
<code>"din"</code> refer to the scaled plot if rescaling is in effect.
</p>


<h3>Fonts</h3>

<p>The fonts used for text drawn in a Windows device may be controlled in
two ways.  The file <code>R_HOME\etc\<a href="utils.html#topic+Rdevga">Rdevga</a></code> can be used to
specify mappings for <code>par(font =)</code> (or the <span class="pkg">grid</span> equivalent).
Alternatively, a font family can be specified by a non-empty
<code>family</code> argument (or by e.g. <code>par(family =)</code> in the graphics
package) and this will be used for fonts 1:4 via the Windows font
database (see <code><a href="#topic+windowsFonts">windowsFonts</a></code>).
</p>
<p>How the fonts look depends on the antialiasing settings, both through
the <code>antialias</code> argument and the machine settings.  These are
hints to Windows <abbr>GDI</abbr> that may not be able to be followed, but
<code>antialias = "none"</code> should ensure that no antialiasing is used.
For a screen device the default depends on the machine settings: it
will be <code>"cleartype"</code> if that has been enabled.  Note that the
greyscale antialiasing that is used only for small fonts (below about
9 pixels, around 7 points on a typical display).
</p>
<p>When accessing a system through Remote Desktop, both the Remote
Desktop settings <em>and</em> the user's local account settings are
relevant to whether antialiasing is used.
</p>
<p>Some fonts are intended only to be used with ClearType antialiasing,
for example the <code>Meiryo</code> Japanese font.
</p>


<h3>Conventions</h3>

<p>This section describes the implementation of the conventions for
graphics devices set out in the &lsquo;R Internals&rsquo; manual.
</p>

<ul>
<li><p> The default device size is 7 inches square, although this is
often incorrectly implemented by Windows: see &lsquo;Details&rsquo;.
</p>
</li>
<li><p> Font sizes are in big points.
</p>
</li>
<li><p> The default font family is Arial.
</p>
</li>
<li><p> Line widths are as a multiple of 1/96 inch, with a minimum of
one pixel.
</p>
</li>
<li><p> The minimum radius of a circle is 1 pixel.
</p>
</li>
<li> <p><code>pch = "."</code> with <code>cex = 1</code> corresponds to a rectangle of sides
the larger of one pixel and 0.01 inch.
</p>
</li>
<li><p> Colours are interpreted via the unprofiled colour mapping of
the graphics card &ndash; this is <em>assumed</em> to conform to <abbr>sRGB</abbr>.
</p>
</li></ul>



<h3>Note</h3>

<p><code>x11()</code>, <code>X11()</code> and <code>win.graph()</code> are simple wrappers
calling <code>windows()</code>, and mainly exist for compatibility reasons.
</p>
<p>Further, <code><a href="#topic+x11">x11</a>()</code> and <code>X11()</code> have their own help page
for Unix-alikes (where they also have more arguments).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+windowsFonts">windowsFonts</a></code>,
<code><a href="#topic+savePlot">savePlot</a></code>, <code><a href="#topic+bringToTop">bringToTop</a></code>,
<code><a href="#topic+Devices">Devices</a></code>, <code><a href="#topic+pdf">pdf</a></code>,
<code><a href="#topic+x11">x11</a></code> for Unix-alikes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: ## A series of plots written to a sequence of metafiles
if(.Platform$OS.type == "windows")
   win.metafile("Rplot%02d.wmf", pointsize = 10)

## End(Not run)</code></pre>

<hr>
<h2 id='windows.options'>Auxiliary Function to Set/View Defaults for Arguments of windows()</h2><span id='topic+windows.options'></span>

<h3>Description</h3>

<p>The auxiliary function <code>windows.options</code> can be used to set or view
(if called without arguments) the default values for the arguments of
<code><a href="#topic+windows">windows</a></code>.
</p>
<p><code>windows.options</code> needs to be called before calling <code>windows</code>,
and the default values it sets can be overridden by supplying
arguments to <code>windows</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>windows.options(..., reset = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="windows.options_+3A_...">...</code></td>
<td>
<p>arguments <code>width</code>, <code>height</code>, <code>pointsize</code>,
<code>record</code>, <code>rescale</code>, <code>xpinch</code>, <code>ypinch</code>,
<code>bg</code>, <code>canvas</code>, <code>gamma</code>, <code>xpos</code>, <code>ypos</code>,
<code>buffered</code>, <code>restoreConsole</code>, <code>clickToConfirm</code>,
<code>title</code>, <code>fillOddEven</code> and <code>antialias</code> can be supplied.</p>
</td></tr>
<tr><td><code id="windows.options_+3A_reset">reset</code></td>
<td>
<p>logical: should the defaults be reset to their
&lsquo;factory-fresh&rsquo; values?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If both <code>reset = TRUE</code> and <code>...</code> are supplied the defaults
are first reset to the &lsquo;factory-fresh&rsquo; values and then the new
values are applied.
</p>
<p>Option <code>antialias</code> applies to screen devices (<code>windows</code>,
<code>win.graph</code>, <code>X11</code> and <code>x11</code>).  There is a separate option,
<code>bitmap.aa.win</code>, for bitmap devices with <code>type = "windows"</code>.
</p>


<h3>Value</h3>

<p>A named list of all the defaults.  If any arguments are supplied the
returned values are the old values and the result has the visibility
flag turned off.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+windows">windows</a></code>, <code><a href="#topic+ps.options">ps.options</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## put something like this is your .Rprofile to customize the defaults
setHook(packageEvent("grDevices", "onLoad"),
        function(...)
            grDevices::windows.options(width = 8, height = 6,
                                       xpos = 0, pointsize = 10,
                                       bitmap.aa.win = "cleartype"))

## End(Not run)</code></pre>

<hr>
<h2 id='windowsFonts'>Windows Fonts</h2><span id='topic+windowsFont'></span><span id='topic+windowsFonts'></span>

<h3>Description</h3>

<p>These functions handle the translation of a device-independent R graphics
font family name to a windows font description  and are available only
on Windows.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>windowsFont(family)

windowsFonts(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="windowsFonts_+3A_family">family</code></td>
<td>
<p>a character vector containing the font family name
(<code>"TT"</code> as the first two characters indicates a TrueType font).
</p>
</td></tr>
<tr><td><code id="windowsFonts_+3A_...">...</code></td>
<td>
<p>either character strings naming mappings to display,
or new (named) mappings to define.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A windows device is created with a default font (see
the documentation for <code>windows</code>), but it is also possible
to specify a font family when drawing to the device (for example, see
the documentation for <code>"family"</code> in <code><a href="graphics.html#topic+par">par</a></code> and for
<code>"fontfamily"</code> in <code><a href="grid.html#topic+gpar">gpar</a></code> in the <span class="pkg">grid</span> package).
</p>
<p>The font family sent to the device is a simple string name, which must be
mapped to something more specific to windows fonts.  A list of
mappings is maintained and can be modified by the user.
</p>
<p>The <code>windowsFonts</code> function can be used to list existing
mappings and to define new mappings.  The <code>windowsFont</code>
function can be used to create a new mapping.
</p>
<p>Default mappings are provided for three device-independent font family
names: <code>"sans"</code> for a sans-serif font, <code>"serif"</code> for a serif
font and <code>"mono"</code> for a monospaced font.
</p>
<p>These mappings will only be used if the current font face is
1 (plain), 2 (bold), 3 (italic), or 4 (bold italic).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+windows">windows</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(.Platform$OS.type == "windows") withAutoprint({
  windowsFonts()
  windowsFonts("mono")
})

## Not run: ## set up for Japanese: needs the fonts installed
windows()  # make sure we have the right device type (available on Windows only)
Sys.setlocale("LC_ALL", "ja")
windowsFonts(JP1 = windowsFont("MS Mincho"),
             JP2 = windowsFont("MS Gothic"),
             JP3 = windowsFont("Arial Unicode MS"))
plot(1:10)
text(5, 2, "\u{4E10}\u{4E00}\u{4E01}", family = "JP1")
text(7, 2, "\u{4E10}\u{4E00}\u{4E01}", family = "JP1", font = 2)
text(5, 1.5, "\u{4E10}\u{4E00}\u{4E01}", family = "JP2")
text(9, 2, "\u{5100}", family = "JP3")

## End(Not run)
</code></pre>

<hr>
<h2 id='x11'>X Window System Graphics (X11)</h2><span id='topic+x11'></span><span id='topic+X11'></span><span id='topic+X11.options'></span>

<h3>Description</h3>


<dl>
<dt>on Windows,</dt><dd><p>the <code>X11()</code> and <code>x11()</code> functions are
simple wrappers to <code><a href="#topic+windows">windows</a>()</code> for historical
compatibility convenience: Calling <code>x11()</code> or <code>X11()</code>
would work in most cases to open an interactive graphics device.
</p>
<p>In <span class="rlang"><b>R</b></span> versions before 3.6.0, the Windows version had a shorter
list of formal arguments.  Consequently, calls to <code>X11(*)</code>
with arguments should <em>name</em> them for back compatibility.
</p>
<p>Almost all information below does <em>not</em> apply on Windows.</p>
</dd>
<dt>on Unix-alikes</dt><dd><p><code>X11</code> starts a graphics device driver for
the X Window System (version 11).  This can only be done on
machines/accounts that have access to an X server.
</p>
<p><code>x11</code> is recognized as a synonym for <code>X11</code>.
</p>
<p>The <span class="rlang"><b>R</b></span> function is a wrapper for two devices, one based on Xlib
(<a href="https://en.wikipedia.org/wiki/Xlib">https://en.wikipedia.org/wiki/Xlib</a>) and one using cairographics
(<a href="https://www.cairographics.org">https://www.cairographics.org</a>).</p>
</dd>
</dl>



<h3>Usage</h3>

<pre><code class='language-R'>X11(display = "", width, height, pointsize, gamma, bg, canvas,
    fonts, family, xpos, ypos, title, type, antialias, symbolfamily)

X11.options(..., reset = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="x11_+3A_display">display</code></td>
<td>
<p>the display on which the graphics window will appear.
The default is to use the value in the user's environment variable
<span class="env">DISPLAY</span>.  This is ignored (with a warning) if an X11 device is
already open on another display.</p>
</td></tr>
<tr><td><code id="x11_+3A_width">width</code>, <code id="x11_+3A_height">height</code></td>
<td>
<p>the width and height of the plotting window, in
inches.  If <code>NA</code>, taken from the resources and if
not specified there defaults to <code>7</code> inches.  See also
&lsquo;Resources&rsquo;.</p>
</td></tr>
<tr><td><code id="x11_+3A_pointsize">pointsize</code></td>
<td>
<p>the default pointsize to be used.  Defaults to <code>12</code>.</p>
</td></tr>
<tr><td><code id="x11_+3A_gamma">gamma</code></td>
<td>
<p>gamma correction fudge factor.
Colours in R are <abbr>sRGB</abbr>;  if your monitor does not conform to
<abbr>sRGB</abbr>, you might be able to improve things by tweaking this
parameter to apply additional gamma correction to the RGB channels.
By default 1 (no additional gamma correction).</p>
</td></tr>
<tr><td><code id="x11_+3A_bg">bg</code></td>
<td>
<p>colour, the initial background colour.  Default
<code>"transparent"</code>.</p>
</td></tr>
<tr><td><code id="x11_+3A_canvas">canvas</code></td>
<td>
<p>colour.  The colour of the canvas, which is visible only
when the background colour is transparent.  Should be an opaque colour
(and any alpha value will be ignored).  Default <code>"white"</code>.</p>
</td></tr>
<tr><td><code id="x11_+3A_fonts">fonts</code></td>
<td>
<p>for <code>type = "Xlib"</code> only:
X11 font description strings into which weight, slant and
size will be substituted.  There are two, the first for fonts 1 to 4
and the second for font 5, the symbol font.  See section &lsquo;Fonts&rsquo;.</p>
</td></tr>
<tr><td><code id="x11_+3A_family">family</code></td>
<td>
<p>The default family: a length-one character string.  This
is primarily intended for cairo-based devices, but for <code>type =
    "Xlib"</code>, the <code><a href="#topic+X11Fonts">X11Fonts</a>()</code> database is used to map family
names to <code>fonts</code> (and this argument takes precedence over that
one).</p>
</td></tr>
<tr><td><code id="x11_+3A_xpos">xpos</code>, <code id="x11_+3A_ypos">ypos</code></td>
<td>
<p>integer: initial position of the top left corner of the
window, in pixels.  Negative values are from the opposite corner,
e.g. <code>xpos = -100</code> says the top right corner should be 100 pixels
from the right edge of the screen.  If <code>NA</code> (the default),
successive devices are cascaded in 20 pixel steps from the top left.
See also &lsquo;Resources&rsquo;.</p>
</td></tr>
<tr><td><code id="x11_+3A_title">title</code></td>
<td>
<p>character string, up to 100 bytes.  With the default,
<code>""</code>, a suitable title is created internally.  A C-style format
for an integer will be substituted by the device number (see the
<code>file</code> argument of <code><a href="stats.html#topic+df">df</a></code> for further
details).  How non-ASCII titles are handled is
implementation-dependent.</p>
</td></tr>
<tr><td><code id="x11_+3A_type">type</code></td>
<td>
<p>character string, one of <code>"Xlib"</code>, <code>"cairo"</code>,
<code>"nbcairo"</code> or <code>"dbcairo"</code>.  Only the first will be
available if the system was compiled without support for
cairographics.  The default is <code>"cairo"</code> where <span class="rlang"><b>R</b></span> was built
using <code>pangocairo</code> (often not the case on macOS), otherwise
<code>"Xlib"</code>.</p>
</td></tr>
<tr><td><code id="x11_+3A_antialias">antialias</code></td>
<td>
<p>for cairo types, the type of anti-aliasing (if any)
to be used.  One of <code>c("default", "none", "gray", "subpixel")</code>.</p>
</td></tr>
<tr><td><code id="x11_+3A_symbolfamily">symbolfamily</code></td>
<td>
<p>for cairo-based devices only:
a length-one character string that specifies the font family to
be used as the &quot;symbol&quot; font (e.g., for <a href="#topic+plotmath">plotmath</a> output).
The default value is &quot;default&quot;, which means that R will choose
a default &quot;symbol&quot; font based on the graphics device capabilities.</p>
</td></tr>
<tr><td><code id="x11_+3A_reset">reset</code></td>
<td>
<p>logical: should the defaults be reset to their defaults?</p>
</td></tr>
<tr><td><code id="x11_+3A_...">...</code></td>
<td>
<p>Any of the arguments to <code>X11</code>, plus <code>colortype</code>
and <code>maxcubesize</code> (see section &lsquo;Colour Rendering&rsquo;).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The defaults for all of the arguments of <code>X11</code> are set by
<code>X11.options</code>: the &lsquo;Arguments&rsquo; section gives the
&lsquo;factory-fresh&rsquo; defaults.
</p>
<p>The initial size and position are only hints, and may not be acted on
by the window manager.  Also, some systems (especially laptops) are
set up to appear to have a screen of a different size to the physical
screen.
</p>
<p>Option <code>type</code> selects between two separate devices: <span class="rlang"><b>R</b></span> can be
built with support for neither, <code>type = "Xlib"</code> or both.  Where
both are available, types <code>"cairo"</code>, <code>"nbcairo"</code> and
<code>"dbcairo"</code> offer
</p>

<ul>
<li>
<p>antialiasing of text and lines.
</p>
</li>
<li>
<p>translucent colours.
</p>
</li>
<li>
<p>scalable text, including to sizes like 4.5 pt.
</p>
</li>
<li>
<p>full support for UTF-8, so on systems with suitable fonts you can
plot in many languages on a single figure (and this will work even
in non-UTF-8 locales).  The output should be locale-independent.
</p>
</li></ul>

<p>There are three variants of the cairo-based device.  <code>type =
  "nbcairo"</code> has no buffering.  <code>type = "cairo"</code> has some
buffering, and supports <code><a href="#topic+dev.hold">dev.hold</a></code> and <code>dev.flush</code>.
<code>type = "dbcairo"</code> buffers output and updates the screen about
every 100ms (by default).  The refresh interval can be set (in units
of seconds) by e.g. <code><a href="base.html#topic+options">options</a>(X11updates = 0.25)</code>: the
value is consulted when a device is opened.  Updates are only looked
for every 50ms (at most), and during heavy graphics computations only
every 500ms.
</p>
<p>Which version will be fastest depends on the X11 connection and the
type of plotting.  You will probably want to use a buffered type
unless backing store is in use on the X server (which for example it
always is on the <code>x86_64</code> macOS XQuartz server), as otherwise
repainting when the window is exposed will be slow.  On slow
connections <code>type = "dbcairo"</code> will probably give the best
performance.
</p>
<p>Because of known problems with font selection on macOS without Pango
(for example, most CRAN distributions), <code>type = "cairo"</code> is not
the default there.  These problems have included mixing up bold and
italic (since worked around), selecting incorrect glyphs and ugly or
missing symbol glyphs.
</p>
<p>All devices which use an X11 server (including the <code>type =
    "Xlib"</code> versions of bitmap devices such as <code><a href="#topic+png">png</a></code>) share
internal structures, which means that they must use the same
<code>display</code> and visual.  If you want to change display, first close
all such devices.
</p>
<p>The cursor shown indicates the state of the device.  If quiescent the
cursor is an arrow: when the locator is in use it is a crosshair
cursor, and when plotting computations are in progress (and this can
be detected) it is a watch cursor.  (The exact cursors displayed will
depend on the window manager in use.)
</p>


<h3>X11 Fonts</h3>

<p>This section applies only to <code>type = "Xlib"</code>.
</p>
<p>An initial/default font family for the device can be specified via
the <code>fonts</code> argument, but if a device-independent R graphics font
family is specified (e.g., via <code>par(family =)</code> in the graphics
package), the X11 device makes use of the X11 font database (see
<code>X11Fonts</code>) to convert the R graphics font family to an
X11-specific font family description.  If <code>family</code> is supplied as
an argument, the X11 font database is used to convert that, but
otherwise the argument <code>fonts</code> (with default given by
<code>X11.options</code>) is used.
</p>
<p>X11 chooses fonts by matching to a pattern, and it is quite possible
that it will choose a font in the wrong encoding or which does not
contain glyphs for your language (particularly common in
<code>iso10646-1</code> fonts).
</p>
<p>The <code>fonts</code> argument is a two-element character vector, and the
first element will be crucial in successfully using
non-Western-European fonts.  Settings that have proved useful include
</p>
<p><code>"-*-mincho-%s-%s-*-*-%d-*-*-*-*-*-*-*"</code> for CJK languages and
<code>"-cronyx-helvetica-%s-%s-*-*-%d-*-*-*-*-*-*-*"</code> for Russian.
</p>
<p>For UTF-8 locales, the <code>XLC_LOCALE</code> databases provide mappings
between character encodings, and you may need to add an entry for your
locale (e.g., Fedora Core 3 lacked one for <code>ru_RU.utf8</code>).
</p>


<h3>Cairo Fonts</h3>

<p>The cairographics-based devices work directly with font family names
such as <code>"Helvetica"</code> which can be selected initially by the
<code>family</code> argument and subsequently by <code><a href="graphics.html#topic+par">par</a></code> or
<code><a href="grid.html#topic+gpar">gpar</a></code>.  There are mappings for the three
device-independent font families, <code>"sans"</code> for a sans-serif font
(to <code>"Helvetica"</code>), <code>"serif"</code> for a serif font (to
<code>"Times"</code>) and <code>"mono"</code> for a monospaced font (to
<code>"Courier"</code>).
</p>
<p>The font selection is handled by <code>Pango</code> (usually <em>via</em>
<code>fontconfig</code>) or <code>fontconfig</code> (on macOS and perhaps
elsewhere).  The results depend on the fonts installed on the system
running <span class="rlang"><b>R</b></span> &ndash; setting the environment variable <span class="env">FC_DEBUG</span> to 1
normally allows some tracing of the selection process.
</p>
<p>This works best when high-quality scalable fonts are installed,
usually in Type 1 or TrueType formats: see the
&lsquo;R Installation and Administration&rsquo; manual for advice on how to
obtain and install such fonts.
At present the best rendering (including using kerning)
will be achieved with TrueType fonts: see
<a href="https://www.freedesktop.org/software/fontconfig/fontconfig-user.html">https://www.freedesktop.org/software/fontconfig/fontconfig-user.html</a>
for ways to set up your system to prefer them.  The default family
(<code>"Helvetica"</code>) is likely not to use kerning: alternatives which
should if you have them installed are <code>"Arial"</code>,
<code>"DejaVu Sans"</code> and <code>"Liberation Sans"</code> (and perhaps
<code>"FreeSans"</code>).  For those who prefer fonts with serifs, try
<code>"Times New Roman"</code>, <code>"DejaVu Serif"</code> and <code>"Liberation
  Serif"</code>.  To match LaTeX text, use something like <code>"CM Roman"</code>.
</p>
<p>Fedora systems from version 31 on do not like the default <code>"symbol"</code>
font family for rendering symbols (e.g., <a href="#topic+plotmath">plotmath</a>).  For those
systems, users should specify a different font via
<code>symbolfamily</code>.  The default can also be changed via
<code>X11.options</code>. 
</p>

<p>Problems with incorrect rendering of symbols (e.g., of
<code>quote(pi)</code> and <code>expression(10^degree)</code>)
have been seen on Linux systems which have the Wine
symbol font installed &ndash; <code>fontconfig</code> then prefers this and
misinterprets its encoding.  Adding the following lines
to &lsquo;<span class="file">~/.fonts.conf</span>&rsquo; or &lsquo;<span class="file">/etc/fonts/local.conf</span>&rsquo; may circumvent
this problem by preferring the URW Type 1 symbol font.
</p>
<pre>&lt;fontconfig&gt;
&lt;match target="pattern"&gt;
  &lt;test name="family"&gt;&lt;string&gt;Symbol&lt;/string&gt;&lt;/test&gt;
  &lt;edit name="family" mode="prepend" binding="same"&gt;
    &lt;string&gt;Standard Symbols L&lt;/string&gt;
  &lt;/edit&gt;
&lt;/match&gt;
&lt;/fontconfig&gt;
</pre>
<p>A test for this is to run at the command line <code>fc-match Symbol</code>.
If that shows <code>symbol.ttf</code> that may be the Wine symbol font &ndash; use
<code>locate symbol.ttf</code> to see if it is found from a directory with
&lsquo;<span class="samp">&#8288;wine&#8288;</span>&rsquo; in the name.
</p>


<h3>Resources</h3>

<p>The standard X11 resource <code>geometry</code> can be used to specify the
window position and/or size, but will be overridden by values
specified as arguments or non-<code>NA</code> defaults set in
<code>X11.options</code>.  The class looked for is <code>R_x11</code>.  Note that
the resource specifies the width and height in pixels and not in
inches.  See for example &lsquo;<span class="samp">&#8288;man X&#8288;</span>&rsquo; (or
<a href="https://www.x.org/releases/current/">https://www.x.org/releases/current/</a>).
An example line in &lsquo;<span class="file">~/.Xresources</span>&rsquo; might be
</p>
<pre>R_x11*geometry: 900x900-0+0
</pre>
<p>which specifies a 900 x 900 pixel window at the top right of the screen.
</p>


<h3>Colour Rendering</h3>

<p>X11 supports several &lsquo;visual&rsquo; types, and nowadays almost all
systems support &lsquo;truecolor&rsquo; which <code>X11</code> will use by
default.  This uses a direct specification of any RGB colour up to the
depth supported (usually 8 bits per colour).  Other visuals make use
of a palette to support fewer colours, only grays or even only
black/white.  The palette is shared between all X11 clients, so it can
be necessary to limit the number of colours used by <span class="rlang"><b>R</b></span>.
</p>
<p>The default for <code>type = "Xlib"</code> is to use the best possible colour
model for the visual of the X11 server: these days this will almost
always be &lsquo;truecolor&rsquo;.  This can be overridden by the
<code>colortype</code> argument of <code>X11.options</code>.  <b>Note:</b> All
<code>X11</code> and <code>type = "Xlib"</code> <code><a href="#topic+bmp">bmp</a></code>, <code>jpeg</code>,
<code>png</code> and <code>tiff</code> devices share a <code>colortype</code> which is
set when the first device to be opened.  To change the
<code>colortype</code> you need to close <em>all</em> open such devices, and
then use <code>X11.options(colortype =)</code>.
</p>
<p>The colortype types are tried in the order <code>"true"</code>,
<code>"pseudo"</code>, <code>"gray"</code> and <code>"mono"</code> (black or white
only).  The values <code>"pseudo"</code> and <code>"pseudo.cube"</code> provide
two colour strategies for a pseudocolor visual.  The first strategy
provides on-demand colour allocation which produces exact colours
until the colour resources of the display are exhausted (when plotting
will fail).  The second allocates (if possible) a standard colour
cube, and requested colours are approximated by the closest value in
the cube.
</p>
<p>With <code>colortype</code> equal to <code>"pseudo.cube"</code> or <code>"gray"</code>
successively smaller palettes are tried until one is completely
allocated.  If allocation of the smallest attempt fails the device will
revert to <code>"mono"</code>.  For <code>"gray"</code> the search starts at 256
grays for a display with depth greater than 8, otherwise with half
the available colours.  For <code>"pseudo.cube"</code> the maximum cube size
is set by <code>X11.options(maxcolorsize =)</code> and defaults to
256.  With that setting the largest cube tried is 4 levels each for
RGB, using 64 colours in the palette.
</p>


<p>The cairographics-based devices most likely only work (or work
correctly) with &lsquo;TrueColor&rsquo; visuals, although in principle this
depends on the cairo installation: a warning is given if any other
visual is encountered.
</p>
<p><code>type = "Xlib"</code> supports &lsquo;TrueColor&rsquo;,
&lsquo;PseudoColor&rsquo;, &lsquo;GrayScale&rsquo;, <code>StaticGray</code> and
<code>MonoChrome</code> visuals: &lsquo;StaticColor&rsquo; and
&lsquo;DirectColor&rsquo; visuals are handled only in black/white.
</p>


<h3>Anti-aliasing</h3>

<p>Anti-aliasing is only supported for cairographics-based devices, and
applies to both graphics and fonts.  It is generally preferable for
lines and text, but can lead to undesirable effects for fills,
e.g. for <code><a href="graphics.html#topic+image">image</a></code> plots, and so is never used for fills.
</p>
<p><code>antialias = "default"</code> is in principle platform-dependent, but
seems most often equivalent to <code>antialias = "gray"</code>.
</p>


<h3>Conventions</h3>

<p>This section describes the implementation of the conventions for
graphics devices set out in the &lsquo;R Internals&rsquo; manual.
</p>

<ul>
<li><p> The default device size is 7 inches square.
</p>
</li>
<li><p> Font sizes are in big points.
</p>
</li>
<li><p> The default font family is Helvetica.
</p>
</li>
<li><p> Line widths in 1/96 inch, minimum one pixel for <code>type =
      "Xlib"</code>, 0.01 otherwise.
</p>
</li>
<li><p> For <code>type = "Xlib"</code> circle radii are in pixels with
minimum one.
</p>
</li>
<li><p> Colours are interpreted by the X11 server, which is
<em>assumed</em> to conform to <abbr>sRGB</abbr>.
</p>
</li></ul>



<h3>Warning</h3>

<p>Support for all the Unix devices is optional, so in packages
<code>X11()</code>  should be used conditionally after checking
<code><a href="base.html#topic+capabilities">capabilities</a>("X11")</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Devices">Devices</a></code>, <code><a href="#topic+X11Fonts">X11Fonts</a></code>, <code><a href="#topic+savePlot">savePlot</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
if(.Platform$OS.type == "unix") { # Only on unix-alikes, possibly Mac,
## put something like this is your .Rprofile to customize the defaults
setHook(packageEvent("grDevices", "onLoad"),
        function(...) grDevices::X11.options(width = 8, height = 6, xpos = 0,
                                             pointsize = 10))
}
## End(Not run)</code></pre>

<hr>
<h2 id='X11Fonts'>X11 Fonts</h2><span id='topic+X11Font'></span><span id='topic+X11Fonts'></span>

<h3>Description</h3>

<p>These functions handle the translation of a device-independent <span class="rlang"><b>R</b></span> graphics
font family name to an X11 font description on Unix-alike platforms.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>X11Font(font)

X11Fonts(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="X11Fonts_+3A_font">font</code></td>
<td>
<p>a character string containing an X11 font description.</p>
</td></tr>
<tr><td><code id="X11Fonts_+3A_...">...</code></td>
<td>
<p>either character strings naming mappings to display,
or new (named) mappings to define.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions apply only to an <code><a href="#topic+X11">X11</a></code> device with
<code>type = "Xlib"</code> &ndash; <code>X11(type = "cairo")</code> uses a different
mechanism to select fonts.
</p>
<p>Such a  device is created with a default font (see
the documentation for <code><a href="#topic+X11">X11</a></code>), but it is also possible
to specify a font family when drawing to the device (for example, see
the documentation for <code>"family"</code> in <code><a href="graphics.html#topic+par">par</a></code> and for
<code>"fontfamily"</code> in <code><a href="grid.html#topic+gpar">gpar</a></code> in the <span class="pkg">grid</span> package).
</p>
<p>The font family sent to the device is a simple string name, which must be
mapped to something more specific to X11 fonts.  A list of
mappings is maintained and can be modified by the user.
</p>
<p>The <code>X11Fonts</code> function can be used to list existing
mappings and to define new mappings.  The <code>X11Font</code>
function can be used to create a new mapping.
</p>
<p>Default mappings are provided for three device-independent font family
names: <code>"sans"</code> for a sans-serif font, <code>"serif"</code> for a serif
font and <code>"mono"</code> for a monospaced font.  Further mappings are
provided for <code>"Helvetica"</code> (the device default), <code>"Times"</code>,
<code>"CyrHelvetica"</code>, <code>"CyrTimes"</code> (versions of these fonts with
Cyrillic support, at least on Linux), <code>"Arial"</code> (on some
platforms including macOS) and <code>"Mincho"</code> (a CJK
font).
</p>


<h3>Note</h3>

<p>Available only when <code><a href="base.html#topic+capabilities">capabilities</a>()[["X11"]]</code> is true.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+X11">X11</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(capabilities("X11")) withAutoprint({
X11Fonts()
X11Fonts("mono")
utopia &lt;- X11Font("-*-utopia-*-*-*-*-*-*-*-*-*-*-*-*")
X11Fonts(utopia = utopia)
})
</code></pre>

<hr>
<h2 id='xfig'>XFig Graphics Device</h2><span id='topic+xfig'></span>

<h3>Description</h3>

<p><code>xfig</code> starts the graphics device driver for producing XFig
(version 3.2) graphics.
</p>
<p>It was deprecated in <span class="rlang"><b>R</b></span> 4.4.0: consider using an SVG device for
editable graphics.
</p>
<p>The auxiliary function <code>ps.options</code> can be used to set and view
(if called without arguments) default values for the arguments to
<code>xfig</code> and <code>postscript</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xfig(file = if(onefile) "Rplots.fig" else "Rplot%03d.fig",
     onefile = FALSE, encoding = "none",
     paper = "default", horizontal = TRUE,
     width = 0, height = 0, family = "Helvetica",
     pointsize = 12, bg = "transparent", fg = "black",
     pagecentre = TRUE, defaultfont = FALSE, textspecial = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xfig_+3A_file">file</code></td>
<td>
<p>a character string giving the file path.   For use
with <code>onefile = FALSE</code>, give a C integer format such as
<code>"Rplot%03d.fig"</code> (the default in that case).
</p>
<p>See section &lsquo;File specifications&rsquo; in the help
for <code><a href="#topic+pdf">pdf</a></code> for further details.
</p>
</td></tr>
<tr><td><code id="xfig_+3A_onefile">onefile</code></td>
<td>
<p>logical: if true allow multiple figures
in one file. If false, assume only one page per file and generate a
file number containing the page number.</p>
</td></tr>
<tr><td><code id="xfig_+3A_encoding">encoding</code></td>
<td>
<p>The encoding in which to write text strings.  The
default is not to re-encode.  This can be any encoding recognized by
<code><a href="base.html#topic+iconv">iconv</a></code>: in a Western UTF-8 locale you probably want to
select an 8-bit encoding such as <code>latin1</code>, and in an East Asian
locale an <code>EUC</code> encoding.  If re-encoding fails, the text
strings will be written in the current encoding with a warning.</p>
</td></tr>
<tr><td><code id="xfig_+3A_paper">paper</code></td>
<td>
<p>the size of paper region.  The choices
are <code>"A4"</code>, <code>"Letter"</code> and <code>"Legal"</code> (and these
can be lowercase).  A further choice is <code>"default"</code>, which
is the default.  If this is selected, the paper size is taken
from the option <code>"papersize"</code> if that is set to a non-empty
value, otherwise <code>"A4"</code>.</p>
</td></tr>
<tr><td><code id="xfig_+3A_horizontal">horizontal</code></td>
<td>
<p>the orientation of the printed image, a
logical.  Defaults to true, that is landscape orientation.</p>
</td></tr>
<tr><td><code id="xfig_+3A_width">width</code>, <code id="xfig_+3A_height">height</code></td>
<td>
<p>the width and height of the
graphics region in inches.  The default is to use the entire
page less a 0.5 inch overall margin in each direction.  (See
<code><a href="#topic+postscript">postscript</a></code> for further details.)</p>
</td></tr>
<tr><td><code id="xfig_+3A_family">family</code></td>
<td>
<p>the font family to be used.  This must be one
of <code>"AvantGarde"</code>, <code>"Bookman"</code>, <code>"Courier"</code>,
<code>"Helvetica"</code> (the default), <code>"Helvetica-Narrow"</code>,
<code>"NewCenturySchoolbook"</code>, <code>"Palatino"</code> or
<code>"Times"</code>.  Any other value is replaced by
<code>"Helvetica"</code>, with a warning.</p>
</td></tr>
<tr><td><code id="xfig_+3A_pointsize">pointsize</code></td>
<td>
<p>the default point size to be used.</p>
</td></tr>
<tr><td><code id="xfig_+3A_bg">bg</code></td>
<td>
<p>the initial background color to be used.</p>
</td></tr>
<tr><td><code id="xfig_+3A_fg">fg</code></td>
<td>
<p>the initial foreground color to be used.</p>
</td></tr>
<tr><td><code id="xfig_+3A_pagecentre">pagecentre</code></td>
<td>
<p>logical: should the device region be centred on the
page?</p>
</td></tr>
<tr><td><code id="xfig_+3A_defaultfont">defaultfont</code></td>
<td>
<p>logical: should the device use XFig's default
font?</p>
</td></tr>
<tr><td><code id="xfig_+3A_textspecial">textspecial</code></td>
<td>
<p>logical: should the device set the textspecial flag
for all text elements? This is useful when generating pstex from XFig
figures.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Although <code>xfig</code> can produce multiple plots in one file, the XFig
format does not say how to separate or view them.  So
<code>onefile = FALSE</code> is the default.
</p>
<p>The <code>file</code> argument is interpreted as a C integer format as used
by <code><a href="base.html#topic+sprintf">sprintf</a></code>, with integer argument the page number.
The default gives files &lsquo;<span class="file">Rplot001.fig</span>&rsquo;, ..., &lsquo;<span class="file">Rplot999.fig</span>&rsquo;,
&lsquo;<span class="file">Rplot1000.fig</span>&rsquo;, ....
</p>
<p>Line widths as controlled by <code>par(lwd =)</code> are in multiples of
5/6*1/72 inch.  Multiples less than 1 are allowed.  <code>pch = "."</code> with
<code>cex = 1</code> corresponds to a square of side 1/72 inch.
</p>



<p>Windows users could make use of WinFIG (<a href="http://winfig.com/">http://winfig.com/</a>, shareware).
</p>


<h3>Conventions</h3>

<p>This section describes the implementation of the conventions for
graphics devices set out in the &lsquo;R Internals&rsquo; manual.
</p>

<ul>
<li><p> The default device size is the paper size with a 0.25 inch
border on all sides.
</p>
</li>
<li><p> Font sizes are in big points.
</p>
</li>
<li><p> The default font family is Helvetica.
</p>
</li>
<li><p> Line widths are integers, multiples of 5/432 inch.
</p>
</li>
<li><p> Circle radii are multiples of 1/1200 inch.
</p>
</li>
<li><p> Colours are interpreted by the viewing/printing application.
</p>
</li></ul>



<h3>Note</h3>

<p>Only some line textures (<code>0 &lt;= lty &lt; 4</code>) are used.  Eventually this
may be partially remedied, but the XFig file format does not allow as
general line textures as the <span class="rlang"><b>R</b></span> model.  Unimplemented line textures
are displayed as <em>dash-double-dotted</em>.
</p>
<p>There is a limit of 512 colours (plus white and black) per file.
</p>


<h3>Author(s)</h3>

<p>Brian Ripley.  Support for <code>defaultFont</code> and <code>textSpecial</code>
contributed by Sebastian Fischmeister.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Devices">Devices</a></code>,
<code><a href="#topic+postscript">postscript</a></code>,
<code><a href="#topic+ps.options">ps.options</a></code>.
</p>

<hr>
<h2 id='xy.coords'>Extracting Plotting Structures</h2><span id='topic+xy.coords'></span>

<h3>Description</h3>

<p><code>xy.coords</code> is used by many functions to obtain
x and y coordinates for plotting.  The use of this common mechanism
across all relevant <span class="rlang"><b>R</b></span> functions produces a measure of consistency.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xy.coords(x, y = NULL, xlab = NULL, ylab = NULL, log = NULL,
          recycle = FALSE, setLab = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xy.coords_+3A_x">x</code>, <code id="xy.coords_+3A_y">y</code></td>
<td>
<p>the x and y coordinates of a set of points.
Alternatively, a single argument <code>x</code> can be provided.</p>
</td></tr>
<tr><td><code id="xy.coords_+3A_xlab">xlab</code>, <code id="xy.coords_+3A_ylab">ylab</code></td>
<td>
<p>names for the x and y variables to be extracted.</p>
</td></tr>
<tr><td><code id="xy.coords_+3A_log">log</code></td>
<td>
<p>character, <code>"x"</code>, <code>"y"</code> or both, as for
<code><a href="base.html#topic+plot">plot</a></code>.  Sets negative values to <code><a href="base.html#topic+NA">NA</a></code> and
gives a warning of class <code>"log_le_0"</code>.</p>
</td></tr>
<tr><td><code id="xy.coords_+3A_recycle">recycle</code></td>
<td>
<p>logical; if <code>TRUE</code>, recycle (<code><a href="base.html#topic+rep">rep</a></code>)
the shorter of <code>x</code> or <code>y</code> if their lengths differ.</p>
</td></tr>
<tr><td><code id="xy.coords_+3A_setlab">setLab</code></td>
<td>
<p>logical indicating if the resulting <code>xlab</code> and
<code>ylab</code> should be constructed from the &ldquo;kind&rdquo; of <code>(x,y)</code>;
otherwise, the arguments <code>xlab</code> and <code>ylab</code> are used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An attempt is made to interpret the arguments <code>x</code> and <code>y</code> in
a way suitable for bivariate plotting (or other bivariate procedures).
</p>
<p>If <code>y</code> is <code>NULL</code> and <code>x</code> is a
</p>

<dl>
<dt>formula:</dt><dd><p>of the form <code>yvar ~ xvar</code>. <code>xvar</code> and
<code>yvar</code> are used as x and y variables.</p>
</dd>
<dt>list:</dt><dd><p>containing components <code>x</code> and <code>y</code>, these are
used to define plotting coordinates.</p>
</dd>
<dt>time series:</dt><dd><p>the x values are taken to be
<code><a href="stats.html#topic+time">time</a>(x)</code> and the y values to be the time series.</p>
</dd>
<dt>matrix or <code><a href="base.html#topic+data.frame">data.frame</a></code> with two or more
columns:</dt><dd><p>the first is assumed to contain the x values and the
second the y values.  <em>Note</em> that is also true if <code>x</code>
has columns named <code>"x"</code> and <code>"y"</code>; these names will be
irrelevant here.</p>
</dd>
</dl>

<p>In any other case, the <code>x</code> argument is coerced to a vector and
returned as <b>y</b> component where the resulting <code>x</code> is just
the index vector <code>1:n</code>.  In this case, the resulting <code>xlab</code>
component is set to <code>"Index"</code> (if <code>setLab</code> is true as by default).
</p>
<p>If <code>x</code> (after transformation as above) inherits from class
<code>"POSIXt"</code> it is coerced to class <code>"POSIXct"</code>.
</p>


<h3>Value</h3>

<p>A list with the components
</p>
<table>
<tr><td><code>x</code></td>
<td>
<p>numeric (i.e., <code>"double"</code>) vector of abscissa values.</p>
</td></tr>
<tr><td><code>y</code></td>
<td>
<p>numeric vector of the same length as <code>x</code>.</p>
</td></tr>
<tr><td><code>xlab</code></td>
<td>
<p><code>character(1)</code> or <code>NULL</code>, the &lsquo;label&rsquo; of
<code>x</code>.</p>
</td></tr>
<tr><td><code>ylab</code></td>
<td>
<p><code>character(1)</code> or <code>NULL</code>, the &lsquo;label&rsquo; of
<code>y</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="graphics.html#topic+plot.default">plot.default</a></code>, <code><a href="graphics.html#topic+lines">lines</a></code>, <code><a href="graphics.html#topic+points">points</a></code>
and <code><a href="stats.html#topic+lowess">lowess</a></code> are examples of functions which use this mechanism.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ff &lt;- stats::fft(1:9)
xy.coords(ff)
xy.coords(ff, xlab = "fft") # labels "Re(fft)",  "Im(fft)"

with(cars, xy.coords(dist ~ speed, NULL)$xlab ) # = "speed"

xy.coords(1:3, 1:2, recycle = TRUE) # otherwise error "lengths differ"
xy.coords(-2:10, log = "y")
##&gt; xlab: "Index"  \\  warning: 3 y values &lt;= 0 omitted ..
op &lt;- options(warn = 2)# ==&gt; warnings would be errors, we suppress the one "we know":
suppressWarnings(xy.coords(-2:10, log = "y"), classes="log_le_0") -&gt; xy
options(op) # revert
stopifnot(is.list(xy), identical (1:13 +0,  xy$x),
          identical(c(rep(NA, 3), 1:10 +0), xy$y))
</code></pre>

<hr>
<h2 id='xyTable'>Multiplicities of (x,y) Points, e.g., for a Sunflower Plot</h2><span id='topic+xyTable'></span>

<h3>Description</h3>

<p>Given (x,y) points, determine their multiplicity &ndash; checking for
equality only up to some (crude kind of) noise.  Note that this is
special kind of 2D binning.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xyTable(x, y = NULL, digits)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xyTable_+3A_x">x</code>, <code id="xyTable_+3A_y">y</code></td>
<td>
<p>numeric vectors of the same length; alternatively other
(x, y) argument combinations as allowed by
<code><a href="#topic+xy.coords">xy.coords</a>(x, y)</code>.</p>
</td></tr>
<tr><td><code id="xyTable_+3A_digits">digits</code></td>
<td>
<p>integer specifying the significant digits to be used for
determining equality of coordinates.  These are compared after
rounding them via <code><a href="base.html#topic+signif">signif</a>(*, digits)</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with three components of same length,
</p>
<table>
<tr><td><code>x</code></td>
<td>
<p>x coordinates, rounded and sorted.</p>
</td></tr>
<tr><td><code>y</code></td>
<td>
<p>y coordinates, rounded (and sorted within <code>x</code>).</p>
</td></tr>
<tr><td><code>number</code></td>
<td>
<p>multiplicities (positive integers); i.e.,
<code>number[i]</code> is the multiplicity of <code>(x[i], y[i])</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="graphics.html#topic+sunflowerplot">sunflowerplot</a></code> which typically uses
<code>xyTable()</code>; <code><a href="base.html#topic+signif">signif</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>xyTable(iris[, 3:4], digits = 6)

## Discretized uncorrelated Gaussian:

xy &lt;- data.frame(x = round(sort(stats::rnorm(100))), y = stats::rnorm(100))
xyTable(xy, digits = 1)
</code></pre>

<hr>
<h2 id='xyz.coords'>Extracting Plotting Structures</h2><span id='topic+xyz.coords'></span>

<h3>Description</h3>

<p>Utility for obtaining consistent x, y and z coordinates and labels
for three dimensional (3D) plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xyz.coords(x, y = NULL, z = NULL,
           xlab = NULL, ylab = NULL, zlab = NULL,
           log = NULL, recycle = FALSE, setLab = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xyz.coords_+3A_x">x</code>, <code id="xyz.coords_+3A_y">y</code>, <code id="xyz.coords_+3A_z">z</code></td>
<td>
<p>the x, y and z coordinates of a set of points.
Both <code>y</code> and <code>z</code> can be left at <code>NULL</code>.  In this
case, an attempt is made to interpret <code>x</code> in a way suitable for
plotting.
</p>
<p>If the argument is a formula <code>zvar ~ xvar + yvar</code>,
<code>xvar</code>, <code>yvar</code> and <code>zvar</code> are used as x, y and z
variables;
if the argument is a list containing components <code>x</code>,
<code>y</code> and <code>z</code>, these are assumed to define plotting coordinates;
if the argument is a matrix or <code><a href="base.html#topic+data.frame">data.frame</a></code> with three
or more columns, the first is
assumed to contain the x values, the 2nd the y ones, and the 3rd the
z ones &ndash; independently of any column names that <code>x</code> may have.
</p>
<p>Alternatively two arguments <code>x</code> and <code>y</code> can be provided
(leaving <code>z = NULL</code>).  One may be real, the other complex;
in any other case, the arguments are coerced to vectors
and the values plotted against their indices.
</p>
</td></tr>
<tr><td><code id="xyz.coords_+3A_xlab">xlab</code>, <code id="xyz.coords_+3A_ylab">ylab</code>, <code id="xyz.coords_+3A_zlab">zlab</code></td>
<td>
<p>names for the x, y and z variables to be extracted.</p>
</td></tr>
<tr><td><code id="xyz.coords_+3A_log">log</code></td>
<td>
<p>character, <code>"x"</code>, <code>"y"</code>, <code>"z"</code> or combinations.
Sets negative values to <code><a href="base.html#topic+NA">NA</a></code> and gives a warning of class
<code>"log_le_0"</code>.</p>
</td></tr>
<tr><td><code id="xyz.coords_+3A_recycle">recycle</code></td>
<td>
<p>logical; if <code>TRUE</code>, recycle (<code><a href="base.html#topic+rep">rep</a></code>) the
shorter ones of <code>x</code>, <code>y</code> or <code>z</code> if their lengths differ.</p>
</td></tr>
<tr><td><code id="xyz.coords_+3A_setlab">setLab</code></td>
<td>
<p>logical indicating if the resulting <code>xlab</code> and
<code>ylab</code> should be constructed from the &ldquo;kind&rdquo; of <code>(x,y)</code>;
otherwise, the arguments <code>xlab</code> and <code>ylab</code> are used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the components
</p>
<table>
<tr><td><code>x</code></td>
<td>
<p>numeric (i.e., <code><a href="base.html#topic+double">double</a></code>) vector of abscissa values.</p>
</td></tr>
<tr><td><code>y</code></td>
<td>
<p>numeric vector of the same length as <code>x</code>.</p>
</td></tr>
<tr><td><code>z</code></td>
<td>
<p>numeric vector of the same length as <code>x</code>.</p>
</td></tr>
<tr><td><code>xlab</code></td>
<td>
<p><code>character(1)</code> or <code>NULL</code>, the axis label of <code>x</code>.</p>
</td></tr>
<tr><td><code>ylab</code></td>
<td>
<p><code>character(1)</code> or <code>NULL</code>, the axis label of <code>y</code>.</p>
</td></tr>
<tr><td><code>zlab</code></td>
<td>
<p><code>character(1)</code> or <code>NULL</code>, the axis label of <code>z</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Uwe Ligges and Martin Maechler</p>


<h3>See Also</h3>

<p><code><a href="#topic+xy.coords">xy.coords</a></code> for 2D.</p>


<h3>Examples</h3>

<pre><code class='language-R'>xyz.coords(data.frame(10*1:9, -4), y = NULL, z = NULL)

xyz.coords(1:5, stats::fft(1:5), z = NULL, xlab = "X", ylab = "Y")

y &lt;- 2 * (x2 &lt;- 10 + (x1 &lt;- 1:10))
xyz.coords(y ~ x1 + x2, y = NULL, z = NULL)

xyz.coords(data.frame(x = -1:9, y = 2:12, z = 3:13), y = NULL, z = NULL,
           log = "xy")
##&gt; Warning message: 2 x values &lt;= 0 omitted ...
## Suppress this specific warning:
suppressWarnings(xyz.coords(x = -1:9, y = 2:12, z = 3:13, log = "xy"),
                 classes = "log_le_0")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
