<!DOCTYPE html><html lang="en"><head><title>Help for package rtms</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rtms}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#emptySampleSet'><p>Generate an empty RTMS sample set</p></a></li>
<li><a href='#exampleSpectrum'><p>Simple Example Spectrum</p></a></li>
<li><a href='#getBrukerBAFAllMetadata'><p>Retrieve all metadata values from a Bruker BAF file</p></a></li>
<li><a href='#getBrukerBAFMetadata'><p>Retrieve specific metadata values from a Bruker BAF file</p></a></li>
<li><a href='#getBrukerMCFAllMetadata'><p>Retrieve all metadata values from a Bruker MCF file</p></a></li>
<li><a href='#getBrukerMCFIntensities'><p>Retrieve peak intensities directly from an MCF file</p></a></li>
<li><a href='#getBrukerMCFMetadata'><p>Retrieve specific metadata values from a Bruker BAF file</p></a></li>
<li><a href='#getBrukerMCFSpots'><p>Get spot names and indices from a Bruker MCF file</p></a></li>
<li><a href='#getSample'><p>Get an RTMS Sample</p></a></li>
<li><a href='#getSample.rtmsBrukerBAFReader'><p>Extract a sample from a Bruker BAF directory</p></a></li>
<li><a href='#getSample.rtmsBrukerMCFReader'><p>Extract a sample from a Bruker MCF directory</p></a></li>
<li><a href='#getSample.rtmsSpectrum'><p>Extract a sample from an RTMS spectrum object</p></a></li>
<li><a href='#getSampleSet'><p>Get an RTMS Sample Set</p></a></li>
<li><a href='#getSampleSet.rtmsBrukerMCFReader'><p>Extract a sample set from a Bruker MCF directory</p></a></li>
<li><a href='#getSpectrum'><p>Get an RTMS Spectrum</p></a></li>
<li><a href='#getSpectrum.rtmsBrukerBAFReader'><p>Extract a spectrum from a Bruker BAF directory</p></a></li>
<li><a href='#getSpectrum.rtmsBrukerMCFReader'><p>Extract a spectrum from a Bruker MCF directory</p></a></li>
<li><a href='#measureSample'><p>Measure peaks in an RTMS sample</p></a></li>
<li><a href='#measureSampleSet'><p>Measure peaks and samples in an RTMS sample set</p></a></li>
<li><a href='#newBrukerBAFReader'><p>Open a Bruker single-acquisition BAF directory</p></a></li>
<li><a href='#newBrukerMCFReader'><p>Open a Bruker multi-acquisition MCF directory</p></a></li>
<li><a href='#plotRtmsSample'><p>Plot an RTMS sample object</p></a></li>
<li><a href='#plotRtmsSampleSet'><p>Plot an RTMS sample set object</p></a></li>
<li><a href='#plotRtmsSpectrum'><p>Plot an RTMS spectrum object</p></a></li>
<li><a href='#reopen'><p>Reopen a reader object</p></a></li>
<li><a href='#reopen.rtmsBrukerMCFReader'><p>Manage an MCF reader file connection</p></a></li>
<li><a href='#rtmsPeak'><p>Create an RTMS m/z Peak Object</p></a></li>
<li><a href='#rtmsPeakList'><p>Create a list of RTMS m/z peak objects</p></a></li>
<li><a href='#rtmsSpectrum'><p>Create a new RTMS spectrum</p></a></li>
<li><a href='#sampleAndSampleSet'><p>Functions for creating and manipulating samples and sample sets</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>R Toolkit for Mass Spectrometry</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Quickly imports, processes, analyzes, and visualizes mass-spectrometric 
	data.  Includes functions for easily extracting specific data and measurements
	from large (multi-gigabyte) raw Bruker data files, as well as a set of S3 object
	classes for manipulating and measuring mass spectrometric peaks and plotting
	peaks and spectra using the 'ggplot2' package.</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, ggplot2</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-06-04 13:35:07 UTC; ntwarog</td>
</tr>
<tr>
<td>Author:</td>
<td>Mary Ashley Rimmer [aut],
  Nathaniel Twarog [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Nathaniel Twarog &lt;nathaniel.twarog@stjude.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-06-06 07:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='emptySampleSet'>Generate an empty RTMS sample set</h2><span id='topic+emptySampleSet'></span>

<h3>Description</h3>

<p>Produces a sample set (of class <code>rtmsSampleSet</code>) with no samples but a
specific peaks attribute.  Useful for building a sample set one sample at
a time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>emptySampleSet(peaks)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="emptySampleSet_+3A_peaks">peaks</code></td>
<td>
<p>A list of objects of class <code>rtmsPeak</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An empty object of class <code>rtmsSampleSet</code>
</p>

<hr>
<h2 id='exampleSpectrum'>Simple Example Spectrum</h2><span id='topic+exampleSpectrum'></span>

<h3>Description</h3>

<p>A subset of an example spectrum depicting turnover from a protein substrate
(at 1530.8 m/z) to product (at 1516.8 m/z).  While the original spectrum
contained nearly 2 million measurements, this spectrum has been trimmed to
lie between 1300 m/z and 1600 m/z, with approximately 46000 measurements
included.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exampleSpectrum
</code></pre>


<h3>Format</h3>



<h4><code>exampleSpectrum</code></h4>

<p>An object of class <code>rtmsSpectrum</code>
</p>



<h3>Source</h3>

<p>&lt;St. Jude Children's Research Hospital&gt;
</p>

<hr>
<h2 id='getBrukerBAFAllMetadata'>Retrieve all metadata values from a Bruker BAF file</h2><span id='topic+getBrukerBAFAllMetadata'></span>

<h3>Description</h3>

<p>Retrieves a table of all metadata values (including instrument data,
acquisition parameters, processing and analysis directives, etc.) from a
Bruker single acquisition BAF directory (represented by an
<code>rtmsBrukerBAFReader</code> object).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getBrukerBAFAllMetadata(reader)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getBrukerBAFAllMetadata_+3A_reader">reader</code></td>
<td>
<p>An RTMS reader object of class <code>rtmsBrukerBAFReader</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with all metadata parameters for the acquisition. The
data frame will have five columns: <code>rowIndex</code>, a numeric index for each
metadata value; <code>parameterName</code>, the internal identifier of the parameter in
Bruker software systems; <code>parameterGroup</code>, the group of parameters that each
value belongs to; <code>displayName</code>, the string used to specify the parameter to
users (i.e. how the parameter would be labelled in a user interface); and
<code>stringValue</code>, a character column containing the value of each metadata
parameter.  Numeric quantities will also be returned as strings, with units
if appropriate.
</p>

<hr>
<h2 id='getBrukerBAFMetadata'>Retrieve specific metadata values from a Bruker BAF file</h2><span id='topic+getBrukerBAFMetadata'></span>

<h3>Description</h3>

<p>Retrieves a list of specific metadata values (including instrument data,
acquisition parameters, processing and analysis directives, etc.) from a
Bruker single acquisition BAF directory (represented by an
<code>rtmsBrukerBAFReader</code> object).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getBrukerBAFMetadata(reader, names)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getBrukerBAFMetadata_+3A_reader">reader</code></td>
<td>
<p>An RTMS reader object of class <code>rtmsBrukerBAFReader</code></p>
</td></tr>
<tr><td><code id="getBrukerBAFMetadata_+3A_names">names</code></td>
<td>
<p>A character vector of metadata names</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list of values corresponding to the metadata values
specified.  All values will be returned as a string, including numeric
quantities (with units if appropriate).
</p>

<hr>
<h2 id='getBrukerMCFAllMetadata'>Retrieve all metadata values from a Bruker MCF file</h2><span id='topic+getBrukerMCFAllMetadata'></span>

<h3>Description</h3>

<p>Retrieves a table of all metadata values (including instrument data,
acquisition parameters, processing and analysis directives, etc.) for a
specific acquisition from a Bruker multi-acquisition MCF directory
(represented by an <code>rtmsBrukerMCFReader</code> object).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getBrukerMCFAllMetadata(reader, index)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getBrukerMCFAllMetadata_+3A_reader">reader</code></td>
<td>
<p>An RTMS reader object of class <code>rtmsBrukerMCFReader</code></p>
</td></tr>
<tr><td><code id="getBrukerMCFAllMetadata_+3A_index">index</code></td>
<td>
<p>A single numeric index specifying which acquisition the sample
set should be extracted from</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with all metadata parameters for the acquisition. The
data frame will have five columns: <code>Index</code>, the numeric index of the
acquisition; <code>PermanentName</code>, the internal identifier of the parameter in
Bruker software systems; <code>GroupName</code>, the group of parameters that each
value belongs to; <code>DisplayName</code>, the string used to specify the parameter to
users (i.e. how the parameter would be labelled in a user interface); and
<code>Value</code>, a character column containing the value of each metadata parameter.
Numeric quantities will also be returned as strings, with units if
appropriate.
</p>

<hr>
<h2 id='getBrukerMCFIntensities'>Retrieve peak intensities directly from an MCF file</h2><span id='topic+getBrukerMCFIntensities'></span>

<h3>Description</h3>

<p>The size of mass spectrometric data in general, and Bruker MCF directories
specifically, makes the extraction of data a resource intensive and time
consuming process. <code>rtms</code> as a package is designed to reduce this burden,
but pulling a sample set from an MCF file can (in the event of compressed
spectra) requires reading nearly all data out of a file, which could take an
extremely long time over a network connection.  Since peak intensity
(calculated as the sum of local intensity maxima within a given peak width)
is one of the most common measurements used in evaluating spectra, and
because this measure can be extracted without extracting the full spectra,
this function aims to avoid expensive reading time by skipping the creation
of a sample set object and calculating peak intensity directly.  Other
measurements are not possible, but full spectra do not have to be read, even
when spectra are compressed, as local maxima are pre-processed and stored
separately in a Bruker MCF file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getBrukerMCFIntensities(reader, peaks, indices)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getBrukerMCFIntensities_+3A_reader">reader</code></td>
<td>
<p>An RTMS reader object of class <code>rtmsBrukerMCFReader</code></p>
</td></tr>
<tr><td><code id="getBrukerMCFIntensities_+3A_peaks">peaks</code></td>
<td>
<p>A list of peak objects of class <code>rtmsPeak</code></p>
</td></tr>
<tr><td><code id="getBrukerMCFIntensities_+3A_indices">indices</code></td>
<td>
<p>A vector of numeric indices specifying which acquisitions
the measurements should be taken from</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing columns specifying the index of each
acquisition, the name of each acquistion (if <code>indices</code> is a named vector),
the peak value of the peak measure, the peak name (if <code>peaks</code> is a named
list), the measure name (which will always be &quot;PeakIntensity&quot;), and the
measured value for that sample and peak. Format matches the output of
<code>measureSampleSet</code>
</p>

<hr>
<h2 id='getBrukerMCFMetadata'>Retrieve specific metadata values from a Bruker BAF file</h2><span id='topic+getBrukerMCFMetadata'></span>

<h3>Description</h3>

<p>Retrieves a list of specific metadata values (including instrument data,
acquisition parameters, processing and analysis directives, etc.) for a
specific acquisition from from a Bruker multi-acquisition BAF directory
(represented by an <code>rtmsBrukerBAFReader</code> object).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getBrukerMCFMetadata(reader, names, index)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getBrukerMCFMetadata_+3A_reader">reader</code></td>
<td>
<p>An RTMS reader object of class <code>rtmsBrukerMCFReader</code></p>
</td></tr>
<tr><td><code id="getBrukerMCFMetadata_+3A_names">names</code></td>
<td>
<p>A character vector of metadata names</p>
</td></tr>
<tr><td><code id="getBrukerMCFMetadata_+3A_index">index</code></td>
<td>
<p>A single numeric index specifying which acquisition the sample
set should be extracted from</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list of values corresponding to the metadata values
specified.  All values will be returned as a string, including numeric
quantities (with units if appropriate).
</p>

<hr>
<h2 id='getBrukerMCFSpots'>Get spot names and indices from a Bruker MCF file</h2><span id='topic+getBrukerMCFSpots'></span><span id='topic+getBrukerMCFIndices'></span>

<h3>Description</h3>

<p>Assembles a table of all acquisitions in a Bruker MCF file; Bruker
measurements are often identified by the metadata parameter &quot;Spot Number&quot;,
so this function extracts that specific metadata value and joins it with the
indices used to pick out spectra in other functions.  Also retrieves the
timestamp at which acquisition was taken, if acquisitions must be identified
by order.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getBrukerMCFSpots(reader)

getBrukerMCFIndices(reader)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getBrukerMCFSpots_+3A_reader">reader</code></td>
<td>
<p>An openRTMS reader object of class <code>rtmsBrukerMCFReader</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with an <code>Index</code> column containing the indices of each
acquisition (used by other functions such as <code>getSpectrum</code> or <code>getSample</code>),
a <code>SpotNumber</code> column containing the &quot;Spot Number&quot; metadata value for each
acquisition, and a <code>Timestampe</code> column containing the time at which each
acquisition was collected by the instrument.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>getBrukerMCFIndices()</code>: Retrieves a vector of all the indices
(beginning with zero) of the acquisitions in the MCF file.  Faster than
<code>getBrukerMCFSpots</code> but contains no metadata or spot names
</p>
</li></ul>

<hr>
<h2 id='getSample'>Get an RTMS Sample</h2><span id='topic+getSample'></span>

<h3>Description</h3>

<p>Fetches an object of class <code>rtmsSample</code> from the specified object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getSample(x, peaks, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getSample_+3A_x">x</code></td>
<td>
<p>The object from which the sample should be retrieved</p>
</td></tr>
<tr><td><code id="getSample_+3A_peaks">peaks</code></td>
<td>
<p>A list of objects of class <code>rtmsPeak</code></p>
</td></tr>
<tr><td><code id="getSample_+3A_...">...</code></td>
<td>
<p>Other possible arguments to specify a particular sample to be
retrieved</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A sample object of class <code>rtmsSample</code>
</p>

<hr>
<h2 id='getSample.rtmsBrukerBAFReader'>Extract a sample from a Bruker BAF directory</h2><span id='topic+getSample.rtmsBrukerBAFReader'></span><span id='topic+getBrukerBAFSample'></span>

<h3>Description</h3>

<p>Extracts an RTMS sample object (of class <code>rtmsSample</code>) from a single
acquisition Bruker BAF directory opened using an RTMS reader object (of
class <code>rtmsBrukerBAFReader</code>).  Because a BAF directory only contains one
spectrum, no additional parameters are needed to specify the spectrum from
which to take the sample.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rtmsBrukerBAFReader'
getSample(x, peaks, ...)

getBrukerBAFSample(reader, peaks)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getSample.rtmsBrukerBAFReader_+3A_x">x</code></td>
<td>
<p>The BAF reader object</p>
</td></tr>
<tr><td><code id="getSample.rtmsBrukerBAFReader_+3A_peaks">peaks</code></td>
<td>
<p>A list of peak objects of class <code>rtmsPeak</code></p>
</td></tr>
<tr><td><code id="getSample.rtmsBrukerBAFReader_+3A_...">...</code></td>
<td>
<p>Additional parameters</p>
</td></tr>
<tr><td><code id="getSample.rtmsBrukerBAFReader_+3A_reader">reader</code></td>
<td>
<p>An RTMS reader object of class <code>rtmsBrukerBAFReader</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An RTMS sample object of class <code>rtmsSample</code>
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>getSample(rtmsBrukerBAFReader)</code>: The S3 method <code>getSample</code> for objects
of class <code>rtmsBrukerBAFReader</code>; calls <code>getBrukerBAFSample</code>
</p>
</li></ul>

<hr>
<h2 id='getSample.rtmsBrukerMCFReader'>Extract a sample from a Bruker MCF directory</h2><span id='topic+getSample.rtmsBrukerMCFReader'></span><span id='topic+getBrukerMCFSample'></span>

<h3>Description</h3>

<p>Extracts an RTMS sample object (of class <code>rtmsSample</code>) from a multi-
acquisition Bruker MCF directory opened using an RTMS reader object (of
class <code>rtmsBrukerMCFReader</code>). A numeric index is used to identify which
acquisition the sample should be extracted from.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rtmsBrukerMCFReader'
getSample(x, peaks, ...)

getBrukerMCFSample(reader, peaks, index)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getSample.rtmsBrukerMCFReader_+3A_x">x</code></td>
<td>
<p>The MCF reader object</p>
</td></tr>
<tr><td><code id="getSample.rtmsBrukerMCFReader_+3A_peaks">peaks</code></td>
<td>
<p>A list of peak objects of class <code>rtmsPeak</code></p>
</td></tr>
<tr><td><code id="getSample.rtmsBrukerMCFReader_+3A_...">...</code></td>
<td>
<p>Additional parameters</p>
</td></tr>
<tr><td><code id="getSample.rtmsBrukerMCFReader_+3A_reader">reader</code></td>
<td>
<p>An RTMS reader object of class <code>rtmsBrukerMCFReader</code></p>
</td></tr>
<tr><td><code id="getSample.rtmsBrukerMCFReader_+3A_index">index</code></td>
<td>
<p>A single numeric index specifying which acquisition the sample
set should be extracted from</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An RTMS sample object of class <code>rtmsSample</code>
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>getSample(rtmsBrukerMCFReader)</code>: The S3 method <code>getSample</code> for objects
of class <code>rtmsBrukerMCFReader</code>; calls <code>getBrukerMCFSample</code>
</p>
</li></ul>

<hr>
<h2 id='getSample.rtmsSpectrum'>Extract a sample from an RTMS spectrum object</h2><span id='topic+getSample.rtmsSpectrum'></span><span id='topic+getSampleFromSpectrum'></span>

<h3>Description</h3>

<p>Extracts a sample object of class <code>rtmsSample</code> from a single spectrum object
of class <code>rtmsSample</code> usin g a list of peaks
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rtmsSpectrum'
getSample(x, peaks, ...)

getSampleFromSpectrum(spectrum, peaks, freqSpacing = TRUE, threshold = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getSample.rtmsSpectrum_+3A_x">x</code></td>
<td>
<p>The spectrum object</p>
</td></tr>
<tr><td><code id="getSample.rtmsSpectrum_+3A_peaks">peaks</code></td>
<td>
<p>A list of peak objects of class <code>rtmsPeak</code></p>
</td></tr>
<tr><td><code id="getSample.rtmsSpectrum_+3A_...">...</code></td>
<td>
<p>Additional parameters</p>
</td></tr>
<tr><td><code id="getSample.rtmsSpectrum_+3A_spectrum">spectrum</code></td>
<td>
<p>A full spectrum of class <code>rtmsSpectrum</code></p>
</td></tr>
<tr><td><code id="getSample.rtmsSpectrum_+3A_freqspacing">freqSpacing</code></td>
<td>
<p>If TRUE (the default), local maxima (estimated via
quadratic interpolation) are calculated in inverse m/z (or frequency) space,
as in FTMS spectra.  If FALSE, maxima are calculated directy in m/z space</p>
</td></tr>
<tr><td><code id="getSample.rtmsSpectrum_+3A_threshold">threshold</code></td>
<td>
<p>If NULL, all local maxima will be returned for each
subsample; if set to particular value, only those maxima above that threshold
will be returned.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An RTMS sample object of class <code>rtmsSample</code>
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>getSample(rtmsSpectrum)</code>: The S3 method <code>getSample</code> for objects
of class <code>rtmsSpectrum</code>; calls <code>getSampleFromSpectrum</code>
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>peaks &lt;- rtmsPeakList(c(1516.83,1530.84),peakWidth=0.2,windowWidth = c(5,10))
names(peaks) &lt;- c("Product","Substrate")
sample &lt;- getSample(exampleSpectrum,peaks)
</code></pre>

<hr>
<h2 id='getSampleSet'>Get an RTMS Sample Set</h2><span id='topic+getSampleSet'></span>

<h3>Description</h3>

<p>Fetches an object of class <code>rtmsSampleSet</code> from the specified object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getSampleSet(x, peaks, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getSampleSet_+3A_x">x</code></td>
<td>
<p>The object from which the sample set should be retrieved</p>
</td></tr>
<tr><td><code id="getSampleSet_+3A_peaks">peaks</code></td>
<td>
<p>A list of objects of class <code>rtmsPeak</code></p>
</td></tr>
<tr><td><code id="getSampleSet_+3A_...">...</code></td>
<td>
<p>Other possible arguments to specify a particular sample set to be
retrieved</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A sample set object of class <code>rtmsSampleSet</code>
</p>

<hr>
<h2 id='getSampleSet.rtmsBrukerMCFReader'>Extract a sample set from a Bruker MCF directory</h2><span id='topic+getSampleSet.rtmsBrukerMCFReader'></span><span id='topic+getBrukerMCFSampleSet'></span>

<h3>Description</h3>

<p>Extracts an RTMS sample object (of class <code>rtmsSampleSet</code>) from a multi-
acquisition Bruker MCF directory opened using an RTMS reader object (of
class <code>rtmsBrukerMCFReader</code>). A vector  numeric indices is used to identify
which acquisitions the sample set should be extracted from.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rtmsBrukerMCFReader'
getSampleSet(x, peaks, ...)

getBrukerMCFSampleSet(reader, peaks, indices)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getSampleSet.rtmsBrukerMCFReader_+3A_x">x</code></td>
<td>
<p>The MCF reader object</p>
</td></tr>
<tr><td><code id="getSampleSet.rtmsBrukerMCFReader_+3A_peaks">peaks</code></td>
<td>
<p>A list of peak objects of class <code>rtmsPeak</code></p>
</td></tr>
<tr><td><code id="getSampleSet.rtmsBrukerMCFReader_+3A_...">...</code></td>
<td>
<p>Additional parameters</p>
</td></tr>
<tr><td><code id="getSampleSet.rtmsBrukerMCFReader_+3A_reader">reader</code></td>
<td>
<p>An RTMS reader object of class <code>rtmsBrukerMCFReader</code></p>
</td></tr>
<tr><td><code id="getSampleSet.rtmsBrukerMCFReader_+3A_indices">indices</code></td>
<td>
<p>A vector of numeric indices specifying which acquisitions
the sample set should be extracted from</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An RTMS sample set object of class <code>rtmsSampleSet</code>
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>getSampleSet(rtmsBrukerMCFReader)</code>: The S3 method <code>getSample</code> for objects
of class <code>rtmsBrukerMCFReader</code>; calls <code>getBrukerMCFSampleSet</code>
</p>
</li></ul>

<hr>
<h2 id='getSpectrum'>Get an RTMS Spectrum</h2><span id='topic+getSpectrum'></span>

<h3>Description</h3>

<p>Fetches an object of class <code>rtmsSpectrum</code> from the specified object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getSpectrum(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getSpectrum_+3A_x">x</code></td>
<td>
<p>The object from which the spectrum should be retrieved</p>
</td></tr>
<tr><td><code id="getSpectrum_+3A_...">...</code></td>
<td>
<p>Other possible arguments to specify a particular spectrum to be
retrieved</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An spectrum object of class <code>rtmsSpectrum</code>
</p>

<hr>
<h2 id='getSpectrum.rtmsBrukerBAFReader'>Extract a spectrum from a Bruker BAF directory</h2><span id='topic+getSpectrum.rtmsBrukerBAFReader'></span><span id='topic+getBrukerBAFSpectrum'></span>

<h3>Description</h3>

<p>Extracts an RTMS spectrum object (of class <code>rtmsSpectrum</code>) from a single
acquisition Bruker BAF directory opened using an RTMS reader object (of
class <code>rtmsBrukerBAFReader</code>).  Because a BAF directory only contains one
spectrum, no additional parameters are needed to specify the spectrum to be
extracted.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rtmsBrukerBAFReader'
getSpectrum(x, ...)

getBrukerBAFSpectrum(reader)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getSpectrum.rtmsBrukerBAFReader_+3A_x">x</code></td>
<td>
<p>The BAF reader object</p>
</td></tr>
<tr><td><code id="getSpectrum.rtmsBrukerBAFReader_+3A_...">...</code></td>
<td>
<p>Additional parameters</p>
</td></tr>
<tr><td><code id="getSpectrum.rtmsBrukerBAFReader_+3A_reader">reader</code></td>
<td>
<p>An RTMS reader object of class <code>rtmsBrukerBAFReader</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An RTMS spectrum object of class <code>rtmsSpectrum</code>
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>getSpectrum(rtmsBrukerBAFReader)</code>: The S3 method <code>getSpectrum</code> for objects
of class <code>rtmsBrukerBAFReader</code>; calls <code>getBrukerBAFSpectrum</code>
</p>
</li></ul>

<hr>
<h2 id='getSpectrum.rtmsBrukerMCFReader'>Extract a spectrum from a Bruker MCF directory</h2><span id='topic+getSpectrum.rtmsBrukerMCFReader'></span><span id='topic+getBrukerMCFSpectrum'></span>

<h3>Description</h3>

<p>Extracts an RTMS spectrum object (of class <code>rtmsSpectrum</code>) from a multi-
acquisition Bruker MCF directory opened using an RTMS reader object (of
class <code>rtmsBrukerMCFReader</code>).  A numeric index is used to identify which
spectrum should be extracted.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rtmsBrukerMCFReader'
getSpectrum(x, ...)

getBrukerMCFSpectrum(reader, index)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getSpectrum.rtmsBrukerMCFReader_+3A_x">x</code></td>
<td>
<p>The MCF reader object</p>
</td></tr>
<tr><td><code id="getSpectrum.rtmsBrukerMCFReader_+3A_...">...</code></td>
<td>
<p>Additional parameters</p>
</td></tr>
<tr><td><code id="getSpectrum.rtmsBrukerMCFReader_+3A_reader">reader</code></td>
<td>
<p>An RTMS reader object of class <code>rtmsBrukerMCFReader</code></p>
</td></tr>
<tr><td><code id="getSpectrum.rtmsBrukerMCFReader_+3A_index">index</code></td>
<td>
<p>A single numeric index specifying which acquisition should be
extracted</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An RTMS spectrum object of class <code>rtmsSpectrum</code>
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>getSpectrum(rtmsBrukerMCFReader)</code>: The S3 method <code>getSpectrum</code> for objects
of class <code>rtmsBrukerMCFReader</code>; calls <code>getBrukerMCFSpectrum</code>
</p>
</li></ul>

<hr>
<h2 id='measureSample'>Measure peaks in an RTMS sample</h2><span id='topic+measureSample'></span>

<h3>Description</h3>

<p><code>measureSample()</code> extracts one or more measurements for every peak in
an RTMS sample object (of class <code>rtmsSample</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>measureSample(sample, measure = "PeakIntensity")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="measureSample_+3A_sample">sample</code></td>
<td>
<p>An object of class <code>rtmsSample</code></p>
</td></tr>
<tr><td><code id="measureSample_+3A_measure">measure</code></td>
<td>
<p>A character vector of named measurements, or a list of
custom measurement functions.  Supported measurement names are
&quot;PeakIntensity&quot;, which takes the total of any local maxima within the peak
width, &quot;PeakArea&quot;, which takes the area under the intensity curve within the
peak width, and &quot;NumPeaks&quot;, which counts the local maxima in the peak window.
If <code>measure</code> is a list of functions, each function must take an object of
class <code>rtmsSubsample</code>, and return a single numeric value.  If the functions
are named, those names will be returned in the &quot;measure&quot; column of the
resulting data frame; otherwise they will be identified as &quot;Measure1&quot;,
&quot;Measure2&quot;, etc.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with one row for each peak and measurement in the
sample. The data.frame will have a column named &quot;peakName&quot; with the name of
the relevant peak  (if  the &quot;peaks&quot; attribute of <code>sample</code> is a named list);
a column named &quot;peakValue&quot; containing the m/z value at the center of the
relevant peak; a column named &quot;measure&quot; containing the name of the relevant
measure; and a column named &quot;value&quot; containing the numeric value of the
particular measure for that peak.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>peaks &lt;- rtmsPeakList(c(1516.83,1530.84),peakWidth=0.2,windowWidth = c(5,10))
names(peaks) &lt;- c("Product","Substrate")
sample &lt;- getSample(exampleSpectrum,peaks)

measure &lt;- measureSample(sample,c("PeakArea","PeakIntensity"))

myFunctions &lt;- list(PeakRawIntensity = function(s) max(s$peakPiece$intensity))
myMeasures &lt;- measureSample(sample,myFunctions)
</code></pre>

<hr>
<h2 id='measureSampleSet'>Measure peaks and samples in an RTMS sample set</h2><span id='topic+measureSampleSet'></span>

<h3>Description</h3>

<p><code>measureSampleSet()</code> extracts one or more measurements for every peak in
every sample in an RTMS sample set object (of class <code>rtmsSampleSet</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>measureSampleSet(sampleset, measure = "PeakIntensity")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="measureSampleSet_+3A_sampleset">sampleset</code></td>
<td>
<p>An object of class <code>rtmsSampleSet</code></p>
</td></tr>
<tr><td><code id="measureSampleSet_+3A_measure">measure</code></td>
<td>
<p>A character vector of named measurements, or a list of
custom measurement functions.  Supported measurement names are
&quot;PeakIntensity&quot;, which takes the total of any local maxima within the peak
width, &quot;PeakArea&quot;, which takes the area under the intensity curve within the
peak width, and &quot;NumPeaks&quot;, which counts the local maxima in the peak window.
If <code>measure</code> is a list of functions, each function must take an object of
class <code>rtmsSubsample</code>, and return a single numeric value.  If the functions
are named, those names will be returned in the &quot;measure&quot; column of the
resulting data frame; otherwise they will be identified as &quot;Measure1&quot;,
&quot;Measure2&quot;, etc.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with one row for each sample, peak, and measurement.
The data.frame will have a character column named &quot;sample&quot;, containing either
the name of the sample (if the samples in <code>sampleset</code> are named) or the
index of the sample if they are not (but it will always be a character
column); a column named &quot;peakName&quot; with the name of the relevant peak  (if
the &quot;peaks&quot; attribute of <code>sampleset</code> is a named list); a column named
&quot;peakValue&quot; containing the m/z value at the center of the relevant peak; a
column named &quot;measure&quot; containing the name of the relevant measure; and a
column named &quot;value&quot; containing the numeric value of the particular measure
for that sample and peak.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>peaks &lt;- rtmsPeakList(c(1516.83,1530.84),peakWidth=0.2,windowWidth = c(5,10))
names(peaks) &lt;- c("Product","Substrate")
sample &lt;- getSample(exampleSpectrum,peaks)
sampleSet &lt;- rep(sample,3)
names(sampleSet) &lt;- c("A","B","C")

measures &lt;- measureSampleSet(sampleSet)
</code></pre>

<hr>
<h2 id='newBrukerBAFReader'>Open a Bruker single-acquisition BAF directory</h2><span id='topic+newBrukerBAFReader'></span>

<h3>Description</h3>

<p>Creates an RTMS reader object (of class <code>rtmsBrukerBAFReader</code>) which can
extract data from a Bruker single acquisition directory (extension &quot;.d&quot;)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newBrukerBAFReader(bafdir)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="newBrukerBAFReader_+3A_bafdir">bafdir</code></td>
<td>
<p>A directory (usually with the extension &quot;.d&quot;) containing data
from a single Bruker acquisition. This directory will contain a file with
extension &quot;.baf&quot; that holds the primary raw data, as well as an index and
calibration file (see Details).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently, RTMS can create reader objects for two binary Bruker data formats,
BAF (presumably standing for &quot;Bruker acquisition format&quot;) holding data from
a single spectrum acquisition, and MCF (probably &quot;multiacquisition container
format&quot;) containing data from multiple spectra acquired in a single run.
Both formats hold data in a directory marked with the extension &quot;.d&quot;. The
single acquisition BAF format directory contains three essential data files:
the main raw data file with extension &quot;.baf&quot;, an index file with extension
&quot;.baf_idx&quot;, and a calibration data file with extension &quot;.baf_xtr&quot;. This
function processes the index and calibration files so that raw data can be
extracted quickly on demand from the &quot;.baf&quot; file.
</p>
<p>An important note: when a MCF multi-acquistion reader is created, it creates
an open connection to the raw data file, which allows for quicker processing
of many spectra in a single file.  However, because a BAF file contains only
a single spectrum, there is little advantage to maintaining an open
connection, so the connection is re-opened every time data is read.  Thus,
while it is important to close an MCF reader object when all data is
extracted, it is not necessary to close an object of class
<code>rtmsBrukerBAFReader</code>.
</p>


<h3>Value</h3>

<p>An object of class <code>rtmsBrukerBAFReader</code> which can extract raw data
from the specified directory
</p>

<hr>
<h2 id='newBrukerMCFReader'>Open a Bruker multi-acquisition MCF directory</h2><span id='topic+newBrukerMCFReader'></span>

<h3>Description</h3>

<p>Creates an RTMS reader object (of class <code>rtmsBrukerMCFReader</code>) which can
extract data from a Bruker multi-acquisition directory (extension &quot;.d&quot;)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newBrukerMCFReader(mcfdir)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="newBrukerMCFReader_+3A_mcfdir">mcfdir</code></td>
<td>
<p>A directory (usually with the extension &quot;.d&quot;) containing data
from a Bruker multi-acquisition run. This directory will contain a files with
extenssion &quot;.mcf&quot; and matching index files with extension &quot;.mcf_idx&quot; (see
Details).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently, RTMS can create reader objects for two binary Bruker data formats,
BAF (presumably standing for &quot;Bruker acquisition format&quot;) holding data from
a single spectrum acquisition, and MCF (probably &quot;multi-acquisition container
format&quot;) containing data from multiple spectra acquired in a single run.
Both formats hold data in a directory marked with the extension &quot;.d&quot;. The
multi-acquisition MCF format directory contains four essential data files:
the main raw data file ending in &quot;_1&quot; with extension &quot;.mcf&quot;, a matching
index file with extension &quot;.mcf_idx&quot;, and a calibration data file ending in
&quot;_2&quot; with  extension &quot;.mcf&quot;, and the matching calibration index file with
extension &quot;.mcf_idx&quot;. This function preprocesses the main index file and
calibration files so that raw data can be extracted quickly on demand from
the main &quot;.mcf&quot; file.
</p>
<p>An important note: when a MCF multi-acquisition reader is created, it creates
an open connection to the raw data file, which allows for quicker processing
of many spectra in a single file.  This connection will remain open until
the reader is closed with the <code>close</code> function.
</p>


<h3>Value</h3>

<p>A reader object of class <code>rtmsBrukerMCFReader</code> with an open
connection to the main &quot;.mcf&quot; data file.
</p>

<hr>
<h2 id='plotRtmsSample'>Plot an RTMS sample object</h2><span id='topic+plotRtmsSample'></span>

<h3>Description</h3>

<p><code>plotRtmsSample()</code> takes an RTMS sample object and produces a <code>ggplot</code> object
depicting all extracted peaks, and their context windows if included.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotRtmsSample(sample, usePeakNames = TRUE, freey = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotRtmsSample_+3A_sample">sample</code></td>
<td>
<p>An object of class <code>rtmsSample</code>.</p>
</td></tr>
<tr><td><code id="plotRtmsSample_+3A_usepeaknames">usePeakNames</code></td>
<td>
<p>If the list of peaks used to create the sample was a
named list, then setting this to TRUE (the default) will use those names to
label the facets of the plotted sample. If set to FALSE, the facets will be
labelled with the m/z values of each peak.  This parameter will be ignored if
the peaks are unnamed.</p>
</td></tr>
<tr><td><code id="plotRtmsSample_+3A_freey">freey</code></td>
<td>
<p>If TRUE (the default) the y-axes of each peak's facet will be
allowed to vary freely, so different peaks will be plotted on different
scales.  Setting this to FALSE will fix all peaks with in a sample on the
same y-axis scale.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot</code> object depicting the RTMS sample.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>peaks &lt;- rtmsPeakList(c(1516.83,1530.84),peakWidth=0.2,windowWidth = c(5,10))
names(peaks) &lt;- c("Product","Substrate")
sample &lt;- getSample(exampleSpectrum,peaks)

plot1 &lt;- plotRtmsSample(sample)
plot2 &lt;- plotRtmsSample(sample,freey=FALSE)
</code></pre>

<hr>
<h2 id='plotRtmsSampleSet'>Plot an RTMS sample set object</h2><span id='topic+plotRtmsSampleSet'></span>

<h3>Description</h3>

<p><code>plotRtmsSampleSet()</code> takes an RTMS sample set object and produces a <code>ggplot</code>
object depicting all extracted peaks, and their context windows if included.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotRtmsSampleSet(sampleset, usePeakNames = TRUE, freey = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotRtmsSampleSet_+3A_sampleset">sampleset</code></td>
<td>
<p>An object of class <code>rtmsSampleSet</code>.</p>
</td></tr>
<tr><td><code id="plotRtmsSampleSet_+3A_usepeaknames">usePeakNames</code></td>
<td>
<p>If the list of peaks used to create the sample set was a
named list, then setting this to TRUE (the default) will use those names to
label the facets of the plotted sample set. If set to FALSE, the facets will
be labelled with the m/z values of each peak.  This parameter will be ignored
if the peaks are unnamed.</p>
</td></tr>
<tr><td><code id="plotRtmsSampleSet_+3A_freey">freey</code></td>
<td>
<p>If TRUE (the default) the y-axes of each sample and peak's facet
will beallowed to vary freely, so different facets will be plotted on
different scales.  Setting this to FALSE will fix all peaks and samples
on the same y-axis scale.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot</code> object depicting the RTMS sample set.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>peaks &lt;- rtmsPeakList(c(1516.83,1530.84),peakWidth=0.2,windowWidth = c(5,10))
names(peaks) &lt;- c("Product","Substrate")
sample &lt;- getSample(exampleSpectrum,peaks)
sampleSet &lt;- rep(sample,3)
names(sampleSet) &lt;- c("A","B","C")

plot1 &lt;- plotRtmsSampleSet(sampleSet)
plot2 &lt;- plotRtmsSampleSet(sampleSet,freey=FALSE) + ggplot2::theme_bw()
</code></pre>

<hr>
<h2 id='plotRtmsSpectrum'>Plot an RTMS spectrum object</h2><span id='topic+plotRtmsSpectrum'></span>

<h3>Description</h3>

<p><code>plotRtmsSpectrum()</code> takes an RTMS spectrum object and produces a <code>ggplot</code>
object depicting the spectrum
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotRtmsSpectrum(spectrum, limits = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotRtmsSpectrum_+3A_spectrum">spectrum</code></td>
<td>
<p>An object of class <code>rtmsSpectrum</code>.</p>
</td></tr>
<tr><td><code id="plotRtmsSpectrum_+3A_limits">limits</code></td>
<td>
<p>An optional parameter to control the bounds of the m/z x axis.
If set to NULL, the default, the full spectrum will be plotted.  Otherwise,
<code>limits</code> should be a two element numeric vector; if one element is <code>NA</code>, then
only the other boundary will be enforced on the x-axis.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Unlike a sample object, an RTMS spectrum is actually quite simple; just a
vector of m/z values and vector of intensities.  Ordinarily, this could be
done using standard <code>ggplot2</code> functions, such as geom_line.  However, mass
spectra can often be quite large (on the order of millions of measurements),
and sending all that data to be plotted can be computationally intractable.
<code>plotRtmsSpectrum()</code> therefore selects a subset of up to 10000 m/z-intensity
pairs from the original spectrum to produce a representative plot without
rendering millions of points.  Any points that are sufficiently larger than
their local surroundings (including all relevant peaks) will be included in
this subset, as well as a random sampling of points closer to the baseline.
This ensures that the peaks plotted will always be present.  However, there
will be slight differences from one plot to the next in terms of baseline
points plotted.  This can be eliminated by fixing the random seed using
<code>set.seed</code> before plotting.
</p>
<p>We also strongly discourage using <code>xlim</code> or seetting the x-coordinate
boundaries using standard <code>ggplot2</code> methods, as these will only be applied
after the data has been down-sampled.  If you would like to plot a particular
subset of the spectrum, it is recommended that you use the <code>limits</code> parameter
of this function instead.
</p>


<h3>Value</h3>

<p>A <code>ggplot</code> object depicting the RTMS spectrum.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot1 &lt;- plotRtmsSpectrum(exampleSpectrum)
plot2 &lt;- plotRtmsSpectrum(exampleSpectrum,limits=c(1500,1550)) +
				ggplot2::geom_vline(xintercept=c(1516.83,1530.84),
									colour="red",linetype=2)
</code></pre>

<hr>
<h2 id='reopen'>Reopen a reader object</h2><span id='topic+reopen'></span>

<h3>Description</h3>

<p>An S3 generic function for reopening reader objects that have been close
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reopen(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="reopen_+3A_x">x</code></td>
<td>
<p>The object to be re-opened</p>
</td></tr>
<tr><td><code id="reopen_+3A_...">...</code></td>
<td>
<p>Other possible arguments for specific object types</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of the same type as <code>x</code>
</p>

<hr>
<h2 id='reopen.rtmsBrukerMCFReader'>Manage an MCF reader file connection</h2><span id='topic+reopen.rtmsBrukerMCFReader'></span><span id='topic+close.rtmsBrukerMCFReader'></span><span id='topic+closeBrukerMCFReader'></span><span id='topic+reopenBrukerMCFReader'></span>

<h3>Description</h3>

<p>Closes the open connection to the main data file in a Bruker MCF reader
object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rtmsBrukerMCFReader'
reopen(x, ...)

## S3 method for class 'rtmsBrukerMCFReader'
close(con, ...)

closeBrukerMCFReader(reader)

reopenBrukerMCFReader(reader)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="reopen.rtmsBrukerMCFReader_+3A_x">x</code></td>
<td>
<p>The reader object to reopen</p>
</td></tr>
<tr><td><code id="reopen.rtmsBrukerMCFReader_+3A_...">...</code></td>
<td>
<p>Included for S3 compatibility</p>
</td></tr>
<tr><td><code id="reopen.rtmsBrukerMCFReader_+3A_con">con</code></td>
<td>
<p>The reader object to be closed</p>
</td></tr>
<tr><td><code id="reopen.rtmsBrukerMCFReader_+3A_reader">reader</code></td>
<td>
<p>An RTMS reader object of class <code>rtmsBrukerMCFReader</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Because Bruker MCF directories contain a potentially large number of
spectra, reopening a connection to the main data file when reading many
spectra or samples from it is inefficient and slow, especially if the file
is being accessed over a network connection.  The <code>rtmsBrukerMCFReader</code>
object therefore maintains an open connection to the main binary data file
until it is closed by the user. Of course, the reader object still maintains
all the index and calibration data, making it possible to reopen a
connection to the MCF directory without all the preprocessing required when
first opening.  Unfortunately, taking advantage of this fact is a little
tricky.
</p>
<p>In most cases, R is a functional language, with limited side effects on R
objects; so it is difficult to alter the state of reader object without
returning it explicitly.  However, one of the few cases where side-effects
are quite important is R's management of open file connections, with
functions like <code>close</code>.  Thus, calling <code>closeBrukerMCFReader</code> (and the S3
function <code>close</code> which wraps it) will in fact close the connection, but will
not return an altered copy of the reader object reflecting that it is
closed.  So if the user wishes to close a reader object with the possibility
of reopening it, they must close the reader AND assign the returned reader
object to the relevant name.  This will store the fact the connection has
been closed, and allow the <code>reopen</code> function to operate correctly.
</p>


<h3>Value</h3>

<p>The same reader object with a closed connection
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>reopen(rtmsBrukerMCFReader)</code>: The S3 method <code>close</code> for objects of class
<code>rtmsBrukerMCFReader</code>; calls <code>closeBrukerMCFReader</code>
</p>
</li>
<li> <p><code>close(rtmsBrukerMCFReader)</code>: The S3 method <code>reopen</code> for objects of class
<code>rtmsBrukerMCFReader</code>; calls <code>reopenBrukerMCFReader</code>
</p>
</li>
<li> <p><code>reopenBrukerMCFReader()</code>: Reopens a file connection to the main
binary data file in a Bruker MCF directgry so that data can be extracted
</p>
</li></ul>

<hr>
<h2 id='rtmsPeak'>Create an RTMS m/z Peak Object</h2><span id='topic+rtmsPeak'></span>

<h3>Description</h3>

<p>Generates an object of class <code>rtmsPeak</code> which contains the m/z values
bounding a spectrometric peak to be measured.  A peak object specifies not
only the m/z value at the cetner of the peak, but the upper and lower bounds
within which the peak is to be quantified; it also may optionally include
wider upper and lower bounds used to plot the peak in a wider context of the
spectrum.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rtmsPeak(
  value,
  peakWidth = 0.1,
  windowWidth = NULL,
  bounds = NULL,
  window = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rtmsPeak_+3A_value">value</code></td>
<td>
<p>The m/z value that the peak is intended to measure</p>
</td></tr>
<tr><td><code id="rtmsPeak_+3A_peakwidth">peakWidth</code></td>
<td>
<p>The width of the peak centered on <code>value</code>. If a single
numeric value, the lower bound of the peak will lie <code>peakWidth/2</code> below
<code>value</code>,and the upper bound will lie <code>peakWidth/2</code> above <code>value</code>.  If a
vector of two numeric values, the first value specifies how far below <code>value</code>
the lower bound lies, and the second value specifies how far above <code>value</code>
the upper bound lies.  If parameter <code>bounds</code> is not null, this parameter will
be ignored.</p>
</td></tr>
<tr><td><code id="rtmsPeak_+3A_windowwidth">windowWidth</code></td>
<td>
<p>The width of the optional wider window around <code>value</code>
used to show the peak in context.  Operates by the same principles as
<code>peakWidth</code> with a single value split evenly between lower and upper bounds,
and two values specifying how far below and above <code>value</code> each bound lies. If
parameter <code>window</code> is not null, this parameter will be ignored.</p>
</td></tr>
<tr><td><code id="rtmsPeak_+3A_bounds">bounds</code></td>
<td>
<p>If not null, a two-value numeric vector specifying the lower
and upper m/z bounds of the measured peak. One of <code>bounds</code> or <code>peakWidth</code>
must be not null, and if <code>bounds</code> is not null, then <code>peakWidth</code> will be
ignored.</p>
</td></tr>
<tr><td><code id="rtmsPeak_+3A_window">window</code></td>
<td>
<p>If not null, a two-value numeric vector specifying the lower
and upper m/z bounds of the wider context window of the peak. If <code>window</code> is
not null, then <code>windowWidth</code> will be ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>rtmsPeak</code>, used by RTMS functions to extract
and measure peaks from mass spectra.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>peaks &lt;- rtmsPeak(1516.83,peakWidth=0.2,windowWidth = c(5,10))
</code></pre>

<hr>
<h2 id='rtmsPeakList'>Create a list of RTMS m/z peak objects</h2><span id='topic+rtmsPeakList'></span>

<h3>Description</h3>

<p>Generates a list of objects of class <code>rtmsPeak</code> which can be used to extract
a sample or sample set from other RTMS objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rtmsPeakList(values, peakWidth = 0.1, windowWidth = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rtmsPeakList_+3A_values">values</code></td>
<td>
<p>The m/z values that the peaks is intended to measure</p>
</td></tr>
<tr><td><code id="rtmsPeakList_+3A_peakwidth">peakWidth</code></td>
<td>
<p>The width of each peak centered on <code>values</code>. If a single
numeric value, the lower bound of each peak will lie <code>peakWidth/2</code> below
the given m/z value ,and the upper bound will lie <code>peakWidth/2</code> above it.
If a vectorof two numeric values, the first value specifies how far below
each given m/z value the lower bounds lie, and the second value specifies how
far above each value the upper bounds lie.</p>
</td></tr>
<tr><td><code id="rtmsPeakList_+3A_windowwidth">windowWidth</code></td>
<td>
<p>The width of each optional wider window around the m/z
values used to show the peaks in context.  Operates by the same principles as
<code>peakWidth</code> with a single value split evenly between lower and upper bounds,
and two values specifying how far below and above the m/z values each bound
lies.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of objects of class <code>rtmsPeak</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>peaks &lt;- rtmsPeakList(c(1516.83,1530.84),peakWidth=0.2,windowWidth = c(5,10))
names(peaks) &lt;- c("Product","Substrate")
</code></pre>

<hr>
<h2 id='rtmsSpectrum'>Create a new RTMS spectrum</h2><span id='topic+rtmsSpectrum'></span>

<h3>Description</h3>

<p>Generates an RTMS spectrum object (of class <code>rtmsSpectrum</code>) from a given
vector of m/z and intensity values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rtmsSpectrum(mz, intensity)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rtmsSpectrum_+3A_mz">mz</code></td>
<td>
<p>A numeric vector of m/z values</p>
</td></tr>
<tr><td><code id="rtmsSpectrum_+3A_intensity">intensity</code></td>
<td>
<p>A numeric vector of intensity values</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>rtmsSpectrum</code> with the given m/z and intensity
values
</p>

<hr>
<h2 id='sampleAndSampleSet'>Functions for creating and manipulating samples and sample sets</h2><span id='topic+sampleAndSampleSet'></span><span id='topic++5B.rtmsSampleSet'></span><span id='topic++5B+5B.rtmsSampleSet'></span><span id='topic++5B+5B+3C-.rtmsSampleSet'></span><span id='topic+rep.rtmsSampleSet'></span><span id='topic+rep.rtmsSample'></span>

<h3>Description</h3>

<p>Select a subset of a sample set (returns an <code>rtmsSampleSet</code>)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rtmsSampleSet'
x[i, ...]

## S3 method for class 'rtmsSampleSet'
x[[i, ...]]

## S3 replacement method for class 'rtmsSampleSet'
x[[i]] &lt;- value

## S3 method for class 'rtmsSampleSet'
rep(x, ...)

## S3 method for class 'rtmsSample'
rep(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sampleAndSampleSet_+3A_x">x</code></td>
<td>
<p>An object of class <code>rtmsSample</code></p>
</td></tr>
<tr><td><code id="sampleAndSampleSet_+3A_i">i</code></td>
<td>
<p>A single numeric index of the sample set</p>
</td></tr>
<tr><td><code id="sampleAndSampleSet_+3A_...">...</code></td>
<td>
<p>Included for S3 compatibility</p>
</td></tr>
<tr><td><code id="sampleAndSampleSet_+3A_value">value</code></td>
<td>
<p>An object of class <code>rtmsSample</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The sample (class <code>rtmsSample</code>) and sample set (class <code>rtmsSampleSet</code>)
objects are the core structures used to extract meaningful data from mass
spectographic data.  In general, samples and sample sets will be created
automatically from other RTMS objects (such as readers or spectra) but in
the event that one wishes to manipulate them directly, it is important to
understand several details about how they work.
</p>
<p>In terms of the data it contains, an object of class <code>rtmsSample</code> is just a
list of smaller objects (of class <code>rtmsSubsample</code>); however, each of these
subsamples corresponds to an <code>rtmsPeak</code> object that was used to extract it;
the <code>rtmsSample</code> object therefor has a &quot;peaks&quot; attribute, which is a list of
objects of class <code>rtmsPeak</code> corresponding to the subsamples in the
<code>rtmsSample</code> object.  This attribute is used to determine how measurements
of the sample are reported and how the sample is plotted.
</p>
<p>Similarly, the data contained in an object of class <code>rtmsSampleSet</code> is just
a list of <code>rtmsSample</code> objects but with an important difference.  If many
<code>rtmsSample</code> objects were arranged into a list, there would be no guarantee
that they contain measurements of the same peaks; such guarantees are
essential for plotting sample sets together or constructing extracted ion
chromatograms.  The <code>rtmsSampleSet</code> therefore strips the &quot;peaks&quot; attribute
from its individual members, and applies a single shared &quot;peaks&quot; attribute
to the entire sample set.  Further samples can only be added to the sample
set if their peaks attributes are deemed compatible.
</p>


<h3>Value</h3>

<p>An object of class <code>rtmsSampleSet</code>
</p>
<p>An object of class <code>rtmsSample</code>
</p>
<p>An object of class <code>rtmsSampleSet</code>
</p>
<p>An object of class <code>rtmsSampleSet</code>
</p>
<p>An object of class <code>rtmsSampleSet</code>
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>[[</code>: Select a single element of a sample set
(returns an <code>rtmsSample</code>)
</p>
</li>
<li> <p><code>`[[`(rtmsSampleSet) &lt;- value</code>: Insert a sample into a sample set
</p>
</li>
<li> <p><code>rep(rtmsSampleSet)</code>: Repeat a sample set multiple times
</p>
</li>
<li> <p><code>rep(rtmsSample)</code>: Create a sample set by repeating a single
sample (returns an <code>rtmsSampleSet</code>)
</p>
</li></ul>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
