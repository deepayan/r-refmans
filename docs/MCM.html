<!DOCTYPE html><html><head><title>Help for package MCM</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {MCM}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#mcm'><p>Estimate and Test Inter-generational Social Mobility</p>
Effect on an Outcome</a></li>
<li><a href='#mcm_lmer'><p>Estimate and Test Inter-generational Mobility Effect</p>
with Longitudinal Data</a></li>
<li><a href='#sim_datlmer'>
<p>Simulated Data Studying Social Mobility (Longitudinal)</p></a></li>
<li><a href='#sim_moderate_het'>
<p>Simulated Data Studying Social Mobility (Cross-Sectional)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Estimating and Testing Intergenerational Social Mobility Effect</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.7</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jiahui Xu &lt;jpx5053@psu.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Estimate and test inter-generational social mobility effect on an outcome with cross-sectional or longitudinal data.</td>
</tr>
<tr>
<td>Imports:</td>
<td>survey, gee, dplyr, lme4, stringr, parameters</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-09-26 09:33:03 UTC; xujiahui</td>
</tr>
<tr>
<td>Author:</td>
<td>Jiahui Xu [aut, cre],
  Liying Luo [aut]</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-09-26 15:10:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='mcm'>Estimate and Test Inter-generational Social Mobility
Effect on an Outcome</h2><span id='topic+mcm'></span>

<h3>Description</h3>

<p>This function implements the mobility contrast model
designed for estimating and testing inter-generational
mobility effect on an outcome.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mcm(
  formula,
  data,
  weights = 1,
  na.action = na.omit,
  origin,
  destination,
  family = gaussian(),
  contrasts = NULL,
  gee = FALSE,
  id = NULL,
  corstr = "exchangeable",
  displayresult = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mcm_+3A_formula">formula</code></td>
<td>
<p>an object of class &quot;formula&quot; (or one that can
be coerced to that class): a symbolic description of the model
to be fitted. A typical model used in studying social mobility
takes the form <code>response ~ origin*destination</code>, where
<code>respose</code> is the numeric response vector and <code>origin</code>
(<code>destination</code>) is a vector indicating the origin (destination).
The specification of <code>origin*destination</code> indicates the cross of
<code>origin</code> and <code>destination</code>, which is the same as <code>
origin + destination + origin:destination</code> where
<code>origin:destination</code> indicates the interaction of <code>origin</code>
and <code>destination</code>.</p>
</td></tr>
<tr><td><code id="mcm_+3A_data">data</code></td>
<td>
<p>an optional data frame, list or environment
(or object coercible by as.data.frame to a data frame)
containing the variables in the model. If not found in data,
the variables are taken from environment(formula),
typically the environment from which the function is called.</p>
</td></tr>
<tr><td><code id="mcm_+3A_weights">weights</code></td>
<td>
<p>an optional vector of unit-level sampling weights to
be used in analysis.
Should be NULL or a numeric vector.</p>
</td></tr>
<tr><td><code id="mcm_+3A_na.action">na.action</code></td>
<td>
<p>a function which indicates what should
happen when the data contain NAs.The default is set by the
<code>na.action</code> setting in <code>options</code> and is
<code>na.fail</code> if that is unset.</p>
</td></tr>
<tr><td><code id="mcm_+3A_origin">origin</code></td>
<td>
<p>a character indicating the column name of origin.</p>
</td></tr>
<tr><td><code id="mcm_+3A_destination">destination</code></td>
<td>
<p>a character indicating the column name of destination.</p>
</td></tr>
<tr><td><code id="mcm_+3A_family">family</code></td>
<td>
<p>a character string, a function or the result of a call
to a family function describing the error distribution and link function
to be used in the model.</p>
</td></tr>
<tr><td><code id="mcm_+3A_contrasts">contrasts</code></td>
<td>
<p>an optional list. The default is set as sum-to-zero
contrast.</p>
</td></tr>
<tr><td><code id="mcm_+3A_gee">gee</code></td>
<td>
<p>logical. Should gee be used in estimating the model?</p>
</td></tr>
<tr><td><code id="mcm_+3A_id">id</code></td>
<td>
<p>a vector which identifies the clusters, which is required while
<code>gee</code> is used. The length of <code>id</code> should be the same as
the number of observations. Data are assumed to be sorted
so that observations on a cluster are contiguous rows for
all entities in the formula.</p>
</td></tr>
<tr><td><code id="mcm_+3A_corstr">corstr</code></td>
<td>
<p>a character string specifying
the correlation structure.
The following are permitted: <code>"independence"</code>,
<code>"fixed"</code>,
<code>"stat_M_dep"</code>,
<code>"non_stat_M_dep"</code>, <code>"exchangeable"</code>,
<code>"AR-M"</code> and <code>"unstructured"</code>.</p>
</td></tr>
<tr><td><code id="mcm_+3A_displayresult">displayresult</code></td>
<td>
<p>logical. Should model results be displayed
after estimation. The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="mcm_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing:
</p>
<table>
<tr><td><code>model</code></td>
<td>
<p>Fitted generalized models of outcome on predictors.
See more on function <code>glm</code> in package <code>stats</code>.</p>
</td></tr>
<tr><td><code>origin_main</code></td>
<td>
<p>Estimated main effects of origin.</p>
</td></tr>
<tr><td><code>destination_main</code></td>
<td>
<p>Estimated main effects of destination.</p>
</td></tr>
<tr><td><code>mobility_estimates</code></td>
<td>
<p>Estimated mobility effects.</p>
</td></tr>
<tr><td><code>mobility_se</code></td>
<td>
<p>Standard errors of the estimated mobility effects.</p>
</td></tr>
<tr><td><code>mobility_sig</code></td>
<td>
<p>Statistical significance of the the
estimated mobility effects.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(MCM)
data('sim_moderate_het')
mcm(response ~ origin * destination, data = sim_moderate_het,
    origin = "origin",destination="destination")
</code></pre>

<hr>
<h2 id='mcm_lmer'>Estimate and Test Inter-generational Mobility Effect
with Longitudinal Data</h2><span id='topic+mcm_lmer'></span>

<h3>Description</h3>

<p>This function fits a multilevel mobility contrast model
to estimate and test inter-generational mobility effect
on an outcome in longitudinal data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mcm_lmer(
  formula,
  data = NULL,
  REML = TRUE,
  control = lme4::lmerControl(),
  start = NULL,
  verbose = 0L,
  subset,
  weights,
  na.action,
  offset,
  contrasts = NULL,
  devFunOnly = FALSE,
  origin = NULL,
  destination = NULL,
  time = NULL,
  displayresult = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mcm_lmer_+3A_formula">formula</code></td>
<td>
<p>Inherit the function form from <code>lme4</code>
package. It is a two-sided linear formula
object describing both the fixed-effects and
random-effects part of the model, with the response
on the left of a <code>~</code> operator and the terms,
separated by + operators, on the right.
Random-effects terms are distinguished by vertical
bars (<code>|</code>) separating expressions for design
matrices from grouping factors.
Two vertical bars (<code>||</code>) can be used to specify
multiple uncorrelated random effects for the same
grouping variable. (Because of the way it is implemented,
the <code>||</code>-syntax works only for design matrices
containing numeric (continuous) predictors;
to fit models with independent categorical effects,
see dummy or the lmer_alt function from the <code>afex</code>
package.) A typical model used in studying social mobility with
longitudinal data
takes the form <code>response ~ origin*destination + | id</code>, where
<code>respose</code> is the numeric response vector and <code>origin</code>
(<code>destination</code>) is a vector indicating the origin (destination).
The specification of <code>origin*destination</code> indicates the cross of
<code>origin</code> and <code>destination</code>, which is the same as <code>
origin + destination + origin:destination</code> where
<code>origin:destination</code> indicates the interaction of <code>origin</code>
and <code>destination</code>. <code>id</code> is a identifier for the clusters.</p>
</td></tr>
<tr><td><code id="mcm_lmer_+3A_data">data</code></td>
<td>
<p>an optional data frame, list or environment
(or object coercible by as.data.frame to a data frame)
containing the variables in the model. If not found in data,
the variables are taken from environment(formula),
typically the environment from which the function is called.</p>
</td></tr>
<tr><td><code id="mcm_lmer_+3A_reml">REML</code></td>
<td>
<p>logical. Should the estimates be chosen be optimize the
restricted log-likelihood (REML) criterial (as opposed to the
log-likelihood)?</p>
</td></tr>
<tr><td><code id="mcm_lmer_+3A_control">control</code></td>
<td>
<p>Inherit from <code>lme4</code> package. It is a list (of correct
class, resulting from lmerControl() or glmerControl() respectively)
containing control parameters, including the nonlinear optimizer to
be used and parameters to be passed through to the nonlinear optimizer,
see the <code>lmerControl</code> documentation in <code>lme4</code> package for details.</p>
</td></tr>
<tr><td><code id="mcm_lmer_+3A_start">start</code></td>
<td>
<p>Inherit from <code>lme4</code> package. It is a named list of
starting values for the parameters in the model.</p>
</td></tr>
<tr><td><code id="mcm_lmer_+3A_verbose">verbose</code></td>
<td>
<p>Inherit from <code>lme4</code> package. It is an integer scalar.
If &gt; 0 verbose output is generated during the optimization of the parameter
estimates. If &gt; 1 verbose output is generated during the individual
penalized iteratively reweighted least squares (PIRLS) steps.</p>
</td></tr>
<tr><td><code id="mcm_lmer_+3A_subset">subset</code></td>
<td>
<p>optional expression selecting the subset of the rows of data
to fit the model.</p>
</td></tr>
<tr><td><code id="mcm_lmer_+3A_weights">weights</code></td>
<td>
<p>an optional vector of ‘prior weights’ to
be used in the fitting process.
Should be NULL or a numeric vector.</p>
</td></tr>
<tr><td><code id="mcm_lmer_+3A_na.action">na.action</code></td>
<td>
<p>a function which indicates what should
happen when the data contain NAs.The default is set by the
<code>na.action</code> setting in <code>options</code> and is
<code>na.fail</code> if that is unset.</p>
</td></tr>
<tr><td><code id="mcm_lmer_+3A_offset">offset</code></td>
<td>
<p>Inherit from <code>lme4</code> package. This can be used
to specify an a priori known component to be included in the linear
predictor during fitting. This should be NULL or a numeric vector
of length equal to the number of cases. One or more offset
terms can be included in the formula instead or as well,
and if more than one is specified their sum is used.</p>
</td></tr>
<tr><td><code id="mcm_lmer_+3A_contrasts">contrasts</code></td>
<td>
<p>an optional list. The default is set as sum-to-zero
contrast.</p>
</td></tr>
<tr><td><code id="mcm_lmer_+3A_devfunonly">devFunOnly</code></td>
<td>
<p>logical - return only the deviance evaluation function.</p>
</td></tr>
<tr><td><code id="mcm_lmer_+3A_origin">origin</code></td>
<td>
<p>a character indicating the column name of origin.</p>
</td></tr>
<tr><td><code id="mcm_lmer_+3A_destination">destination</code></td>
<td>
<p>a character indicating the column name of destination.</p>
</td></tr>
<tr><td><code id="mcm_lmer_+3A_time">time</code></td>
<td>
<p>a character indicating the time when individual was observed</p>
</td></tr>
<tr><td><code id="mcm_lmer_+3A_displayresult">displayresult</code></td>
<td>
<p>logical. Should model results be displayed
after estimation. The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="mcm_lmer_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing:
</p>
<table>
<tr><td><code>model</code></td>
<td>
<p>Fitted generalized models of outcome on predictors.
See more on function <code>glm</code> in package <code>stats</code>.</p>
</td></tr>
<tr><td><code>estimates</code></td>
<td>
<p>Estimated mobility effects.</p>
</td></tr>
<tr><td><code>se</code></td>
<td>
<p>Standard errors of the estimated mobility effects.</p>
</td></tr>
<tr><td><code>significance</code></td>
<td>
<p>Statistical significance of the the
estimated mobility effects.</p>
</td></tr>
<tr><td><code>esti_3way</code></td>
<td>
<p>Estimated mobility effects conditional
on specific age.</p>
</td></tr>
<tr><td><code>se_3way</code></td>
<td>
<p>Standard errors of the estimated mobility
effects conditional specific age.</p>
</td></tr>
<tr><td><code>sig_3way</code></td>
<td>
<p>Statistical significance of the the
estimated mobility effects conditional on age.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(MCM)
library(lme4)
data("sim_datlmer")
fit_mcm_lmer &lt;- mcm_lmer(yij ~ origin*destination*age +
                           (1|id), data = sim_datlmer,
                         origin = "origin",
                         destination = "destination",
                         time = "age")


</code></pre>

<hr>
<h2 id='sim_datlmer'>
Simulated Data Studying Social Mobility (Longitudinal)
</h2><span id='topic+sim_datlmer'></span>

<h3>Description</h3>

<p>This is a simulated data used to study social mobility under
longitudinal setting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("sim_datlmer")</code></pre>


<h3>Format</h3>

<p>A data frame with 50000 observations on the following 14 variables.
</p>

<dl>
<dt><code>id</code></dt><dd><p>an ordered factor with levels</p>
</dd>
<dt><code>obs</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>eij</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>origin</code></dt><dd><p>a factor with levels <code>1</code> <code>2</code> <code>3</code></p>
</dd>
<dt><code>destination</code></dt><dd><p>a factor with levels <code>1</code> <code>2</code> <code>3</code></p>
</dd>
<dt><code>origin_1</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>origin_2</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>origin_3</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>destination_1</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>destination_2</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>destination_3</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>yij</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>age</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>dir</code></dt><dd><p>a factor with levels <code>0</code> <code>1</code> <code>2</code></p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(sim_datlmer)
## maybe str(sim_datlmer) ; plot(sim_datlmer) ...
</code></pre>

<hr>
<h2 id='sim_moderate_het'>
Simulated Data Studying Social Mobility (Cross-Sectional)
</h2><span id='topic+sim_moderate_het'></span>

<h3>Description</h3>

<p>This is a simulated data used to study social mobility.
In this dataset, it is assumed that there exists a moderate social mobility.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("sim_moderate_het")</code></pre>


<h3>Format</h3>

<p>A data frame with 30,000 observations on the following 6 variables.
</p>

<dl>
<dt><code>response</code></dt><dd><p>a numeric vector indicating the outcome variable</p>
</dd>
<dt><code>origin</code></dt><dd><p>a numeric vector indicating parents' socioeconomic status</p>
</dd>
<dt><code>destination</code></dt><dd><p>a numeric vector indicating child' socioeconomic status</p>
</dd>
<dt><code>mobility</code></dt><dd><p>a numeric vector indicating if child's socioeconomic
status is diffferent from that of parents'.</p>
</dd>
<dt><code>upmob</code></dt><dd><p>a numeric vector indicating child' socioeconomic status is higher than that of parents'.</p>
</dd>
<dt><code>dowmob</code></dt><dd><p>a numeric vector indicating child' socioeconomic status is lower than that of parents'.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(sim_moderate_het)
head(sim_moderate_het)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
