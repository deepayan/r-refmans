<!DOCTYPE html><html lang="en-US"><head><title>Help for package RcensusPkg</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {RcensusPkg}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#.check_response'><p>.check_response</p></a></li>
<li><a href='#.get_dt'><p>.get_dt</p></a></li>
<li><a href='#.get_url'><p>.get_url</p></a></li>
<li><a href='#.parse_response'><p>.parse_response</p></a></li>
<li><a href='#.send_tiger_url'><p>.send_tiger_url</p></a></li>
<li><a href='#get_category_strings'><p>get_category_strings</p></a></li>
<li><a href='#get_dataset_names'><p>get_dataset_names</p></a></li>
<li><a href='#get_geography'><p>get_geography</p></a></li>
<li><a href='#get_groups'><p>get_groups</p></a></li>
<li><a href='#get_idb_data'><p>get_idb_data</p></a></li>
<li><a href='#get_multi_vintage_data'><p>get_multi_vintage_data</p></a></li>
<li><a href='#get_variable_names'><p>get_variable_names</p></a></li>
<li><a href='#get_vintage_data'><p>get_vintage_data</p></a></li>
<li><a href='#join_it'><p>join_it</p></a></li>
<li><a href='#long_to_wide'><p>long_to_wide</p></a></li>
<li><a href='#plot_us_data'><p>plot_us_data</p></a></li>
<li><a href='#remove_area_water'><p>remove_area_water</p></a></li>
<li><a href='#tiger_block_groups_sf'><p>tiger_block_groups_sf</p></a></li>
<li><a href='#tiger_blocks_sf'><p>tiger_blocks_sf</p></a></li>
<li><a href='#tiger_cbsa_sf'><p>tiger_cbsa_sf</p></a></li>
<li><a href='#tiger_counties_sf'><p>tiger_counties_sf</p></a></li>
<li><a href='#tiger_county_subsection_sf'><p>tiger_county_subsection_sf</p></a></li>
<li><a href='#tiger_landmarks_sf'><p>tiger_landmarks_sf</p></a></li>
<li><a href='#tiger_places_sf'><p>tiger_places_sf</p></a></li>
<li><a href='#tiger_roads_sf'><p>tiger_roads_sf</p></a></li>
<li><a href='#tiger_states_sf'><p>tiger_states_sf</p></a></li>
<li><a href='#tiger_tracts_sf'><p>tiger_tracts_sf</p></a></li>
<li><a href='#tiger_urban_area_sf'><p>tiger_urban_area_sf</p></a></li>
<li><a href='#tiger_water_sf'><p>tiger_water_sf</p></a></li>
<li><a href='#tiger_zctas_sf'><p>tiger_zctas_sf</p></a></li>
<li><a href='#vote2020'><p>vote2020 data</p></a></li>
<li><a href='#wide_to_long'><p>wide_to_long</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Easily Access US Census Bureau Survey and Geographic Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.4</td>
</tr>
<tr>
<td>Description:</td>
<td>The key function 'get_vintage_data()' returns a dataframe and is 
    the window into the Census Bureau API requiring just a dataset name, 
    vintage(year), and vector of variable names for survey estimates/percentages. 
    Other functions assist in searching for available datasets, geographies, 
    group/variable concepts of interest.  Also provided are functions to access 
    and layer (via standard piping) displayable geometries for the US, states, 
    counties, blocks/tracts, roads, landmarks, places, and bodies of water. 
    Joining survey data with many of the geometry functions is built-in to 
    produce choropleth maps.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/deandevl/RcensusPkg">https://github.com/deandevl/RcensusPkg</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/deandevl/RcensusPkg/issues">https://github.com/deandevl/RcensusPkg/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.4.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2 (&ge; 3.5.1), data.table (&ge; 1.16.4), httr (&ge; 1.4.7),
jsonlite (&ge; 1.8.9), stringr (&ge; 1.5.1), purrr (&ge; 1.0.2), sf
(&ge; 1.0-19), ggplotify (&ge; 0.1.2), gtable (&ge; 0.3.6),
RplotterPkg (&ge; 0.1.3)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr (&ge; 1.4.9), testthat (&ge; 3.0.0), usethis (&ge; 3.1.0),
usmap (&ge; 0.7.1), vdiffr (&ge; 1.0.8), classInt (&ge; 0.4-10),
RColorBrewer (&ge; 1.1-3), here (&ge; 1.0.1), withr (&ge; 3.0.2)</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-03-13 11:18:00 UTC; deanr</td>
</tr>
<tr>
<td>Author:</td>
<td>Rick Dean <a href="https://orcid.org/0009-0005-8086-8436"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Rick Dean &lt;deanr3@bardstown.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-15 16:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='.check_response'>.check_response</h2><span id='topic+.check_response'></span>

<h3>Description</h3>

<p>An internal function that checks the httr GET response.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.check_response(resp)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".check_response_+3A_resp">resp</code></td>
<td>
<p>The httr response object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If the request is successful, returns <code>TRUE</code>, otherwise the
program is stopped with a message.
</p>

<hr>
<h2 id='.get_dt'>.get_dt</h2><span id='topic+.get_dt'></span>

<h3>Description</h3>

<p>An internal function for sending an R based http GET request
to the US Census Bureau's Census Data API. The function returns a <code>data.table</code>
with column values based on dataset, vintage, Census variable predicates, and
geography.
</p>
<p>See <a href="https://www.census.gov/data/developers/guidance.html">Census Data API User Guide</a> for
definitions and examples in running an API query.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.get_dt(
  a_url = NULL,
  group = NULL,
  vars = NULL,
  NAME_GEOID = TRUE,
  predicates = NULL,
  region = NULL,
  regionin = NULL,
  key = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".get_dt_+3A_a_url">a_url</code></td>
<td>
<p>A string that sets the base url address. A calling function will call
the <code>.get_url</code> function to define this parameter.</p>
</td></tr>
<tr><td><code id=".get_dt_+3A_group">group</code></td>
<td>
<p>A string that names an entire group of similar variables to be retrieved.
For example the group value &quot;B01001&quot; would return values of all variables related to
&quot;SEX BY AGE&quot;.</p>
</td></tr>
<tr><td><code id=".get_dt_+3A_vars">vars</code></td>
<td>
<p>A string vector of variable names to be acquired.</p>
</td></tr>
<tr><td><code id=".get_dt_+3A_name_geoid">NAME_GEOID</code></td>
<td>
<p>A logical which if <code>TRUE</code> will add &quot;NAME&quot; and &quot;GEO_ID&quot;
variables to 'vars' string vector. The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id=".get_dt_+3A_predicates">predicates</code></td>
<td>
<p>A vector of strings that adds filtering to the list of variables in 'vars'.</p>
</td></tr>
<tr><td><code id=".get_dt_+3A_region">region</code></td>
<td>
<p>A string that specifies the geography of the request.</p>
</td></tr>
<tr><td><code id=".get_dt_+3A_regionin">regionin</code></td>
<td>
<p>A string that sets a qualifier for 'region'.</p>
</td></tr>
<tr><td><code id=".get_dt_+3A_key">key</code></td>
<td>
<p>All Census Bureau API requests require a client key from the calling function.</p>
</td></tr>
</table>

<hr>
<h2 id='.get_url'>.get_url</h2><span id='topic+.get_url'></span>

<h3>Description</h3>

<p>An internal function that creates the base url
address to be submitted as a http GET request by <code>.get_dt</code>.
It initializes with the dataset name and optionally the vintage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.get_url(dataset, vintage)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".get_url_+3A_dataset">dataset</code></td>
<td>
<p>A string that sets the name of the data set of interest (e.g. &quot;acs/acs5&quot;).
This is a required parameter.</p>
</td></tr>
<tr><td><code id=".get_url_+3A_vintage">vintage</code></td>
<td>
<p>An optional numeric that sets the vintage of interest.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a url string.
</p>

<hr>
<h2 id='.parse_response'>.parse_response</h2><span id='topic+.parse_response'></span>

<h3>Description</h3>

<p>An internal function checks for valid json content
from the Bureau's response. The content is converted to R objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.parse_response(resp)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".parse_response_+3A_resp">resp</code></td>
<td>
<p>The httr response object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Converted json content to R objects.
</p>

<hr>
<h2 id='.send_tiger_url'>.send_tiger_url</h2><span id='topic+.send_tiger_url'></span>

<h3>Description</h3>

<p>An internal function for sending http requests to
the US Census Bureau TIGER api via httr::GET() function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.send_tiger_url(
  a_url = NULL,
  output_dir = NULL,
  delete_files = TRUE,
  set_crs = NULL,
  transform_crs = NULL,
  sf_info = FALSE,
  do_progress = FALSE,
  caller = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".send_tiger_url_+3A_a_url">a_url</code></td>
<td>
<p>A required string that defines the url to be sent in the http GET request.</p>
</td></tr>
<tr><td><code id=".send_tiger_url_+3A_output_dir">output_dir</code></td>
<td>
<p>A full directory path where the shapefile and its associated files will be downloaded.</p>
</td></tr>
<tr><td><code id=".send_tiger_url_+3A_delete_files">delete_files</code></td>
<td>
<p>A logical which if <code>TRUE</code> will delete the shapefile and associated files in 'output_dir'.
The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id=".send_tiger_url_+3A_set_crs">set_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls <code>sf::st_crs()</code> to set the crs of the geometries.</p>
</td></tr>
<tr><td><code id=".send_tiger_url_+3A_transform_crs">transform_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls <code>sf::st_transform()</code>
to perform a crs transform of the geometries.</p>
</td></tr>
<tr><td><code id=".send_tiger_url_+3A_sf_info">sf_info</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays info on the resulting simple feature object.</p>
</td></tr>
<tr><td><code id=".send_tiger_url_+3A_do_progress">do_progress</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays a progress bar during the download.</p>
</td></tr>
<tr><td><code id=".send_tiger_url_+3A_caller">caller</code></td>
<td>
<p>A string that identifies the function making the call.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame object of class sf, data frame
</p>

<hr>
<h2 id='get_category_strings'>get_category_strings</h2><span id='topic+get_category_strings'></span>

<h3>Description</h3>

<p>For a Census Bureau categorical variable return a <code>data.table</code> with the
variable's integer values and corresponding label strings.
</p>
<p>The function will attempt to locate a Bureau's categorical variable by name and
return a <code>data.table</code> with both the integer values and corresponding label strings. If
the variable is not located then NULL is returned.  Definitions for the variables were
obtained from
<a href="https://www.census.gov/data/developers/data-sets/popest-popproj/popest/popest-vars.Vintage_2019.html">Population Estimates Categorical Variables</a>
and other Bureau sources.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_category_strings(
  name = NULL,
  get_names = FALSE,
  start_idx = NULL,
  end_idx = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_category_strings_+3A_name">name</code></td>
<td>
<p>A required string that is the name of the categorical variable of interest.</p>
</td></tr>
<tr><td><code id="get_category_strings_+3A_get_names">get_names</code></td>
<td>
<p>An optional logical which if <code>TRUE</code> the function will return
a vector of categorical variable names recognized by the function.</p>
</td></tr>
<tr><td><code id="get_category_strings_+3A_start_idx">start_idx</code></td>
<td>
<p>An optional integer that sets the starting index of the variable's integer/label pairs.
If the value is <code>NULL</code>(the default), then the variable's entire integer/label pairs are returned.</p>
</td></tr>
<tr><td><code id="get_category_strings_+3A_end_idx">end_idx</code></td>
<td>
<p>An optional integer that sets the ending row index of the returned variable's integer/label pairs.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.table</code> with the variable's integer values and corresponding label strings.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(data.table)
library(RcensusPkg)

# Get the names currently supported category variables
category_names_v &lt;- RcensusPkg::get_category_strings(get_names = TRUE)

# Get the integer/string pairs for the category name "sex"
sex_category_dt &lt;- RcensusPkg::get_category_strings(name = "sex")

</code></pre>

<hr>
<h2 id='get_dataset_names'>get_dataset_names</h2><span id='topic+get_dataset_names'></span>

<h3>Description</h3>

<p>Get the acronym names and descriptions of the Census Bureau's datasets.
</p>
<p>Function produces a <code>data.table</code> of the Census Bureau's dataset acronym names
that can be used in other <code>RcensusPkg::</code> functions calling for a dataset acronym name.
See Census Bureau's publicly available <a href="https://www.census.gov/data/developers/data-sets.html">datasets</a>
for descriptions. Also see <a href="https://www.census.gov/programs-surveys.html">All Surveys and Programs</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_dataset_names(
  vintage = NULL,
  filter_name_str = NULL,
  filter_title_str = NULL,
  ignore_case = TRUE,
  brief = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_dataset_names_+3A_vintage">vintage</code></td>
<td>
<p>An optional numeric for the year to select the datasets. If NULL, then all the years are returned.</p>
</td></tr>
<tr><td><code id="get_dataset_names_+3A_filter_name_str">filter_name_str</code></td>
<td>
<p>An optional character string by which to filter the resultant <code>data.table</code> using the
&quot;name&quot; column.</p>
</td></tr>
<tr><td><code id="get_dataset_names_+3A_filter_title_str">filter_title_str</code></td>
<td>
<p>An optional character string by which to filter the resultant <code>data.table</code> using the
&quot;title&quot; column.</p>
</td></tr>
<tr><td><code id="get_dataset_names_+3A_ignore_case">ignore_case</code></td>
<td>
<p>A logical which if <code>FALSE</code> will not ignore case in filtering the &quot;title&quot; column.</p>
</td></tr>
<tr><td><code id="get_dataset_names_+3A_brief">brief</code></td>
<td>
<p>A logical which if <code>TRUE</code> will return a resultant <code>data.table</code> with just columns
&quot;name&quot;, &quot;vintage&quot;, &quot;title&quot;. The default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with a <code>data.table</code> of dataset names (named &quot;data&quot;)
and a vector of unique vintages (named &quot;vintages&quot;).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Requests for Census Bureau descriptions takes well over 10
  #  seconds in most cases.
  library(jsonlite)
  library(data.table)
  library(httr)
  library(RcensusPkg)

  # Get descriptions/vintages for 2020 datasets with "acs5" in their name.
  acs5_datasets_ls &lt;- RcensusPkg::get_dataset_names(
    vintage = 2020,
    filter_name_str = "acs5/"
  )

## End(Not run)

</code></pre>

<hr>
<h2 id='get_geography'>get_geography</h2><span id='topic+get_geography'></span>

<h3>Description</h3>

<p>Get the list of geography entities available (state, county, tract, etc)
for a specific dataset.
</p>
<p>Function produces a <code>data.table</code> of all the geography &quot;name&quot; and &quot;geoLevelDisplay&quot; variables
available for a specific dataset and optionally a vintage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_geography(dataset, vintage = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_geography_+3A_dataset">dataset</code></td>
<td>
<p>A required string that sets the acronym name of the data set of interest (e.g. &quot;acs/acs5&quot;)</p>
</td></tr>
<tr><td><code id="get_geography_+3A_vintage">vintage</code></td>
<td>
<p>An optional numeric that sets the year of interest.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.table</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(jsonlite)
library(data.table)
library(httr)
library(RcensusPkg)
# Get the geographies available for dataset "acs/acs1/profile" with vintage 2019
acs1_profile_geo_dt &lt;- RcensusPkg::get_geography(
  dataset = "acs/acs1/profile",
  vintage = 2019
)

</code></pre>

<hr>
<h2 id='get_groups'>get_groups</h2><span id='topic+get_groups'></span>

<h3>Description</h3>

<p>Get the names of Census Bureau variable groups and their
descriptive parameters
</p>
<p>Function produces a <code>data.table</code> of variable groups/tables and their
descriptions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_groups(dataset = NULL, vintage = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_groups_+3A_dataset">dataset</code></td>
<td>
<p>A required string that sets the acronym name of the data set
of interest (e.g. &quot;acs/acs5&quot;)</p>
</td></tr>
<tr><td><code id="get_groups_+3A_vintage">vintage</code></td>
<td>
<p>An required numeric that sets the year of interest.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.table</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(jsonlite)
library(data.table)
library(httr)
library(RcensusPkg)

acs5_groups_dt &lt;- RcensusPkg::get_groups(
  dataset = "acs/acs5",
  vintage = 2019)

</code></pre>

<hr>
<h2 id='get_idb_data'>get_idb_data</h2><span id='topic+get_idb_data'></span>

<h3>Description</h3>

<p>Get data from the Census Bureau's Time Series International Database
for a specific dataset: <em>Single Year of Age and Sex</em>(&quot;1year&quot;) or <em>5-Year Age Groups and Sex</em>(&quot;5year&quot;),
year, variables, and country. See Census Bureau's publicly available
<a href="https://www.census.gov/data/developers/data-sets/international-database.html">International Database</a> for
dataset descriptions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_idb_data(
  dataset = NULL,
  years = 2023,
  vars = NULL,
  group = FALSE,
  wide_to_long = FALSE,
  countries = NULL,
  ages = 1:100,
  sex = c(0, 1, 2),
  key = Sys.getenv("CENSUS_KEY")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_idb_data_+3A_dataset">dataset</code></td>
<td>
<p>A required string that selects the dataset of interest. Acceptable values are
&quot;1year&quot; or &quot;5year&quot;.</p>
</td></tr>
<tr><td><code id="get_idb_data_+3A_years">years</code></td>
<td>
<p>An optional numeric vector that sets the years of interest. The default is 2023.</p>
</td></tr>
<tr><td><code id="get_idb_data_+3A_vars">vars</code></td>
<td>
<p>An optional string vector of variable names to be acquired. The default is GEO_ID,NAME,GENC,POP
for either &quot;1year&quot; or &quot;5year&quot;.</p>
</td></tr>
<tr><td><code id="get_idb_data_+3A_group">group</code></td>
<td>
<p>A logical that if <code>TRUE</code> returns all the variables from the &quot;5year&quot; dataset. The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="get_idb_data_+3A_wide_to_long">wide_to_long</code></td>
<td>
<p>The returned <code>data.table</code> is normally in a wide format with all the variables as columns.
If this logical parameter is <code>TRUE</code> then a long format is returned with variable names in one column (named &quot;estimate&quot;) and
their respective values in another column (named &quot;value&quot;).</p>
</td></tr>
<tr><td><code id="get_idb_data_+3A_countries">countries</code></td>
<td>
<p>An optional string vector of country/area abbreviations (GENC Standard Countries and Areas) of interest.
GENC codes are available <a href="https://nsgreg.nga.mil/registries/browse/results.jsp?registryType=genc&amp;registerField=IE4&amp;browseType=genc">here</a>.</p>
</td></tr>
<tr><td><code id="get_idb_data_+3A_ages">ages</code></td>
<td>
<p>An optional numeric that selects specific ages(0 to 100 range) from the 1year dataset. Default is all ages.</p>
</td></tr>
<tr><td><code id="get_idb_data_+3A_sex">sex</code></td>
<td>
<p>An optional numeric vector to select the sex of interest from the 1year dataset. Acceptable values
0 - Both, 1 - Male, 2 - Female. Default is all three values for sex.</p>
</td></tr>
<tr><td><code id="get_idb_data_+3A_key">key</code></td>
<td>
<p>A string that sets the access key. All Census Bureau API requests require an access key.
Sign-up for a key is free and can be obtained <a href="https://api.census.gov/data/key_signup.html">here</a>.
The function will check for a global setting of the key via <code>Sys.getenv("CENSUS_KEY")</code>.
Run <code>usethis::edit_r_environ()</code> and edit your .Renviron file with the line: CENSUS_KEY=your key
to create the global association. This is a required parameter.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For the &quot;1year&quot;, a <code>data.table</code> is returned with the following columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>GEO_ID</strong> </td><td style="text-align: left;"> char - geo id string</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>NAME</strong> </td><td style="text-align: left;"> char - name of the country</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>GENC</strong> </td><td style="text-align: left;"> char - GENC country abbreviation</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>POP</strong> </td><td style="text-align: left;"> char - the total population for a specific age and sex in the country</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>YR</strong> </td><td style="text-align: left;"> char - the year of the estimate</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>AGE</strong> </td><td style="text-align: left;"> char - the specific age are values from 1 to 100</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>SEX</strong> </td><td style="text-align: left;"> char - the specific sex with values 0 - Both, 1 - Male, 2 - Female
</td>
</tr>

</table>

<p>More details are available <a href="https://api.census.gov/data/timeseries/idb/1year/variables.html">here</a>.
</p>
<p>For the &quot;5year&quot;, see <a href="https://api.census.gov/data/timeseries/idb/5year/variables.html">5year</a> and the 119 variable
names and descriptions.
</p>


<h3>Value</h3>

<p>A <code>data.table</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Requires Census Bureau API key
  library(data.table)
  library(httr)
  library(RcensusPkg)

  # 1year wide form, default variables, 2 countries
  # (Botswana, Norway)
  one_year_dt &lt;- RcensusPkg::get_idb_data(
    dataset = "1year",
    years = c(2023, 2024),
    countries = c("BW", "NO")
  )

  # 5year long form, all variables, 2023, country = US
  five_year_US_long_group_dt &lt;- RcensusPkg::get_idb_data(
    dataset = "5year",
    years = 2023,
    group = TRUE,
    countries = "US",
    wide_to_long = TRUE
  )

## End(Not run)

</code></pre>

<hr>
<h2 id='get_multi_vintage_data'>get_multi_vintage_data</h2><span id='topic+get_multi_vintage_data'></span>

<h3>Description</h3>

<p>Get Census Bureau data for a specific dataset, variables, and region
in the form of a <code>data.table</code> for multiple vintages. The function requires
a Census Bureau access key.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_multi_vintage_data(
  dataset = NULL,
  vintage_v = NULL,
  vars = NULL,
  region = NULL,
  regionin = NULL,
  key = Sys.getenv("CENSUS_KEY")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_multi_vintage_data_+3A_dataset">dataset</code></td>
<td>
<p>A required string that sets the name of the dataset of interest (e.g. &quot;acs/acs5&quot;).</p>
</td></tr>
<tr><td><code id="get_multi_vintage_data_+3A_vintage_v">vintage_v</code></td>
<td>
<p>A required numeric vector that sets the vintages of interest.</p>
</td></tr>
<tr><td><code id="get_multi_vintage_data_+3A_vars">vars</code></td>
<td>
<p>A required string vector of variable acronym names to be acquired (e.g. &quot;B15002_015&quot;).
See RcensusPkg::get_variable_names() for obtaining acronym names.</p>
</td></tr>
<tr><td><code id="get_multi_vintage_data_+3A_region">region</code></td>
<td>
<p>A string that specifies the geography of the request. See <code>Rcensus::get_geography()</code> for
assistance in obtaining these values.</p>
</td></tr>
<tr><td><code id="get_multi_vintage_data_+3A_regionin">regionin</code></td>
<td>
<p>A string that sets a qualifier for <code>region</code>.</p>
</td></tr>
<tr><td><code id="get_multi_vintage_data_+3A_key">key</code></td>
<td>
<p>A string that sets the access key. All Census Bureau API requests require an access key.
Sign-up for a key is free and can be obtained <a href="https://api.census.gov/data/key_signup.html">here</a>.
The function will check for a global setting of the key via <code>Sys.getenv("CENSUS_KEY")</code>.
This is a required parameter.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.table</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Requires Census Bureau API key
  # Obtain the median home value (“B25077_001E”) for Deschutes County, Oregon
  #   back to 2005 through 2019.
  library(jsonlite)
  library(data.table)
  library(httr)
  library(usmap)
  library(RcensusPkg)

  # Get the fips codes for state and county
  deschutes_fips &lt;- usmap::fips("OR","Deschutes")
  state &lt;- substr(deschutes_fips,1,2)
  county &lt;- substr(deschutes_fips,3,5)

  RcensusPkg::get_multi_vintage_data(
    dataset = "acs/acs1",
    vintage_v = 2005:2019,
    vars = c("B25077_001E", "B25077_001M"),
    region = paste0("county:", county),
    regionin = paste0("state:", state)
  )

## End(Not run)
</code></pre>

<hr>
<h2 id='get_variable_names'>get_variable_names</h2><span id='topic+get_variable_names'></span>

<h3>Description</h3>

<p>Get Census Bureau variable acronym names and their label descriptions.
</p>
<p>Function produces a <code>data.table</code> of variable acronym names and their
descriptions. The function returns 4 columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>name</strong> </td><td style="text-align: left;"> the name of the parameter</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>label</strong> </td><td style="text-align: left;"> the Bureau's description of the parameter</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>required</strong> </td><td style="text-align: left;"> a boolean indicating if the parameter is required</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>predicateType</strong> </td><td style="text-align: left;"> a string indicating the variable primitive type</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Note that a variable with a <strong>required</strong> character value &quot;true&quot; must be included
in your data requests (i.e. <code>RcensusPkg::get_vintage_data()</code>) or
the API will return an error.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_variable_names(
  dataset = NULL,
  category = NULL,
  vintage = 2020,
  vars = NULL,
  group = NULL,
  filter_group_est = FALSE,
  filter_name_str = NULL,
  filter_label_str = NULL,
  filter_concept_str = NULL,
  ignore_case = TRUE,
  fixed = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_variable_names_+3A_dataset">dataset</code></td>
<td>
<p>An optional string that sets the name of a dataset category of interest.</p>
</td></tr>
<tr><td><code id="get_variable_names_+3A_category">category</code></td>
<td>
<p>An optional string that sets the category of datasets. The available
categories are one of the following:
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong><code>acs1</code></strong> </td><td style="text-align: left;"> American Community Survey 1-Year Data</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong><code>acs/acsse</code></strong> </td><td style="text-align: left;"> American Community Survey Supplemental Data</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong><code>acs5</code></strong> </td><td style="text-align: left;"> American Community Survey 5-Year Data</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong><code>dec</code></strong> </td><td style="text-align: left;"> Decennial Census</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong><code>ecnbasic</code></strong> </td><td style="text-align: left;"> Economy-Wide Key Statistics</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong><code>timeseries/idb</code></strong> </td><td style="text-align: left;"> Time Series International Database</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong><code>abs</code></strong> </td><td style="text-align: left;"> Annual Business Survey</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>
</td></tr>
<tr><td><code id="get_variable_names_+3A_vintage">vintage</code></td>
<td>
<p>An required numeric that sets the year of interest. The default is 2020.</p>
</td></tr>
<tr><td><code id="get_variable_names_+3A_vars">vars</code></td>
<td>
<p>An optional vector of variable names whose descriptions are of interest.
This parameter requires that either 'dataset' or 'category' had been defined.</p>
</td></tr>
<tr><td><code id="get_variable_names_+3A_group">group</code></td>
<td>
<p>An optional string that sets the group name associated with a set of variables.
This parameter requires that either 'dataset' or 'category' had been defined.
See <code>Rcensus::get_groups()</code> for available group names under a specific dataset and vintage.</p>
</td></tr>
<tr><td><code id="get_variable_names_+3A_filter_group_est">filter_group_est</code></td>
<td>
<p>A logical which if <code>TRUE</code> will filter the variable names from 'group' and return
only estimate related variable names. The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="get_variable_names_+3A_filter_name_str">filter_name_str</code></td>
<td>
<p>A character string by which to filter the resultant <code>data.table</code>'s &quot;name&quot; column.</p>
</td></tr>
<tr><td><code id="get_variable_names_+3A_filter_label_str">filter_label_str</code></td>
<td>
<p>A character string by which to filter the resultant <code>data.table</code>'s &quot;label&quot; column.</p>
</td></tr>
<tr><td><code id="get_variable_names_+3A_filter_concept_str">filter_concept_str</code></td>
<td>
<p>A character string by which to filter the resultant <code>data.table</code>'s &quot;concept&quot; column.</p>
</td></tr>
<tr><td><code id="get_variable_names_+3A_ignore_case">ignore_case</code></td>
<td>
<p>A logical which if <code>FALSE</code> will not ignore case in filtering the &quot;name&quot;, &quot;label&quot;, &quot;concept&quot; column.</p>
</td></tr>
<tr><td><code id="get_variable_names_+3A_fixed">fixed</code></td>
<td>
<p>A logical which if <code>TRUE</code>, then the above filter strings are used 'as is' in matching.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function's search for variable names depends on either specifying the parameters 'dataset'
name or a dataset 'category'. Entering an available 'vintage' also influences obtaining a
full dataframe of variable names and descriptions. To assist in using the function the user
should consult the Census Bureau's publicly available <a href="https://www.census.gov/data/developers/data-sets.html">datasets descriptions</a>.
Also of help is <code>Rcensus::get_dataset_names()</code> for available dataset acronym names and
their available years.
</p>


<h3>Value</h3>

<p>A <code>data.table</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get available variables that have the phrase "educational attainment"
# in "label" column of the resultant data.table.

library(jsonlite)
library(data.table)
library(httr)
library(RcensusPkg)

educational_attainment_2019_dt &lt;- RcensusPkg::get_variable_names(
  dataset = "acs/acs1/profile",
  vintage = 2019,
  filter_label_str = "educational attainment"
)

</code></pre>

<hr>
<h2 id='get_vintage_data'>get_vintage_data</h2><span id='topic+get_vintage_data'></span>

<h3>Description</h3>

<p>Get Census Bureau data for a specific dataset, variables, and region
in the form of a <code>data.table</code>.
</p>
<p>Function produces a <code>data.table</code> with selected Census Bureau variables
as columns. The function requires an access key issued from the Bureau.
Variables of interest can be specified individually or by group/table name.
Predicate phrases can be specified for filtering the results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_vintage_data(
  dataset = NULL,
  vintage = NULL,
  vars = NULL,
  NAME_GEOID = TRUE,
  predicates = NULL,
  group = NULL,
  wide_to_long = FALSE,
  region = NULL,
  regionin = NULL,
  na_cols = NULL,
  key = Sys.getenv("CENSUS_KEY")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_vintage_data_+3A_dataset">dataset</code></td>
<td>
<p>A required string that sets the name of the data set of interest (e.g. &quot;acs/acs5&quot;).
Descriptions/vintages for datasets can be found by running
<code>RcensusPkg::get_dataset_names()</code>.</p>
</td></tr>
<tr><td><code id="get_vintage_data_+3A_vintage">vintage</code></td>
<td>
<p>An optional numeric that sets the vintage of interest. Available vintages
for a specific dataset can be found by running <code>RcensusPkg::get_dataset_names()</code>.</p>
</td></tr>
<tr><td><code id="get_vintage_data_+3A_vars">vars</code></td>
<td>
<p>A required string vector (if the parameter 'group' is <code>NULL</code>) of variable names to be acquired.
Available variable names can be determined by running <code>RcensusPkg::get_variable_names()</code>.</p>
</td></tr>
<tr><td><code id="get_vintage_data_+3A_name_geoid">NAME_GEOID</code></td>
<td>
<p>A logical which if <code>TRUE</code> will add &quot;NAME&quot; and &quot;GEO_ID&quot; variables to the 'vars' string vector.
The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="get_vintage_data_+3A_predicates">predicates</code></td>
<td>
<p>An optional vector of strings that adds data filtering.
See <a href="https://www.census.gov/data/developers/guidance.html">Census Data API User Guide</a> for
forming predicates and filtering or limiting variables. As noted in the guide each predicate must
start with an ampersand sign.</p>
</td></tr>
<tr><td><code id="get_vintage_data_+3A_group">group</code></td>
<td>
<p>An optional string that names an entire group of similar variables to be retrieved.
For example the group value &quot;B01001&quot; would return values of all variables related to
&quot;SEX BY AGE&quot;. To find available groups submit a dataset and vintage to <code>RcensusPkg::get_groups</code>.</p>
</td></tr>
<tr><td><code id="get_vintage_data_+3A_wide_to_long">wide_to_long</code></td>
<td>
<p>If 'group' is defined then the returned <code>data.table</code> is normally in a wide format with all the group variables as columns.
If this logical parameter is <code>TRUE</code> then a long format is returned with group variable names in one column (named &quot;estimate&quot;) and
their respective values in another column (named &quot;value&quot;).</p>
</td></tr>
<tr><td><code id="get_vintage_data_+3A_region">region</code></td>
<td>
<p>An optional string that specifies the geography of the request. See
<a href="https://www.census.gov/library/reference/code-lists/ansi.html">Federal Information Processing Series (FIPS)</a>
for a listing of codes for this and the 'regionin' parameter. Not all regions such as counties,
blocks, or tracts are available for a specific dataset and vintage. Use
<code>RcensusPkg::get_geography()</code> to check on both 'region' and 'regionin'.</p>
</td></tr>
<tr><td><code id="get_vintage_data_+3A_regionin">regionin</code></td>
<td>
<p>An optional string that sets a qualifier for 'region'.</p>
</td></tr>
<tr><td><code id="get_vintage_data_+3A_na_cols">na_cols</code></td>
<td>
<p>If <code>TRUE</code> will remove all rows with missing values. If a
vector of column names/integers will check only those columns for missing values.</p>
</td></tr>
<tr><td><code id="get_vintage_data_+3A_key">key</code></td>
<td>
<p>A required string that sets the access key. All Census Bureau API requests require an access key.
Sign-up for a key is free and can be obtained <a href="https://api.census.gov/data/key_signup.html">here</a>.
The function will check for a global setting of the key via <code>Sys.getenv("CENSUS_KEY")</code>.
Run <code>usethis::edit_r_environ()</code> and edit your .Renviron file with the line: CENSUS_KEY=<em>your key</em>
to create the global association.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See Census Bureau's publicly available
<a href="https://www.census.gov/data/developers/data-sets.html">datasets</a> for
dataset descriptions.
</p>
<p>Some of the more common Census Bureau datasets include:
</p>

<ul>
<li><p><a href="https://www.census.gov/data/developers/data-sets/acs-1year.html">American Community Survey 1-year Data</a>
</p>
</li>
<li><p><a href="https://www.census.gov/data/developers/data-sets/ACS-supplemental-data.html">American Community Survey 1-year Supplemental Data</a>
</p>
</li>
<li><p><a href="https://www.census.gov/data/developers/data-sets/acs-5year.html">American Community Survey 5-Year Data</a>
</p>
</li>
<li><p><a href="https://www.census.gov/data/developers/data-sets/decennial-census.html">Decennial Census</a>
</p>
</li>
<li><p><a href="https://www.census.gov/data/developers/data-sets/economic-census.html">Economic Census</a>
</p>
</li>
<li><p><a href="https://www.census.gov/data/developers/data-sets/popest-popproj/popest.html">Population Estimates and Projections</a>
</p>
</li>
<li><p><a href="https://www.census.gov/data/developers/data-sets/abs.html">Annual Business Survey (ABS)</a>
</p>
</li></ul>



<h3>Value</h3>

<p>A <code>data.table</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Requires Census Bureau API key
  # ------American Community Survey 5-Year Data (2009-2021)-----------
  # Description: https://www.census.gov/data/developers/data-sets/acs-5year.html

  library(data.table)
  library(httr)
  library(jsonlite)
  library(stringr)
  library(RcensusPkg)

  # Get the data for the total number of white females ("B01001A_017E") and
  # total number of white individuals ("B01001A_001E") across the US

  white_females_dt &lt;- RcensusPkg::get_vintage_data(
    dataset = "acs/acs5",
    vars = c("B01001A_017E", "B01001A_001E"),
    vintage = 2021,
    region = "state:*"
  )

## End(Not run)
</code></pre>

<hr>
<h2 id='join_it'>join_it</h2><span id='topic+join_it'></span>

<h3>Description</h3>

<p>Outer join two dataframes that have a common column variable.
</p>
<p>Function uses fast <code>data.table</code> techniques to join two data.tables
by their common key values.  Examples might include using the &quot;GEOID&quot; variable
as a key to join data from <code>RcensusPkg::get_vintage_data()</code> with a
simple feature with its geometries for counties, states, countries for example
from <code>RcensusPkg::tiger_*_sf()</code>. The resulting dataframe could then display the
geometries (with <code>RplotterPkg::create_sf_plot()</code>) with an aesthetic mapping
(e.g. fill/color/size) with a joined data column. Joining could also take place
between two simple features (created by <code>RcensusPkg::tiger_*_sf()</code>) or between
two dataframes (created by <code>RcensusPkg::get_vintage_data()</code>).
</p>
<p>The important thing to remember is that all the rows in 'df_2' will
be present in the resultant <code>data.table</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>join_it(
  df_1 = NULL,
  df_2 = NULL,
  key_1 = NULL,
  key_2 = NULL,
  negate = FALSE,
  match = FALSE,
  return_sf = FALSE,
  na_rm = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="join_it_+3A_df_1">df_1</code></td>
<td>
<p>The first dataframe to be joined.</p>
</td></tr>
<tr><td><code id="join_it_+3A_df_2">df_2</code></td>
<td>
<p>The second dataframe to be joined with 'df_1'. All rows in
this dataframe will be present in the resultant dataframe.</p>
</td></tr>
<tr><td><code id="join_it_+3A_key_1">key_1</code></td>
<td>
<p>A string that names the column from 'df_1' that is common to 'df_2'.</p>
</td></tr>
<tr><td><code id="join_it_+3A_key_2">key_2</code></td>
<td>
<p>A string that names the column from 'df_2' that is common to 'df_1'.</p>
</td></tr>
<tr><td><code id="join_it_+3A_negate">negate</code></td>
<td>
<p>An optional logical which if <code>TRUE</code> will return a dataframe
that has rows in 'df_1' but not in 'df_2'.</p>
</td></tr>
<tr><td><code id="join_it_+3A_match">match</code></td>
<td>
<p>An optional logical which if <code>TRUE</code> will return a dataframe
that has rows where only both 'df_1' and 'df_2' have matches.</p>
</td></tr>
<tr><td><code id="join_it_+3A_return_sf">return_sf</code></td>
<td>
<p>An optional logical which if <code>TRUE</code> will convert the resultant
<code>data.table</code> to a simple feature if it has a geometries column.</p>
</td></tr>
<tr><td><code id="join_it_+3A_na_rm">na_rm</code></td>
<td>
<p>An optional logical which if <code>TRUE</code> then remove rows
with NA values. The default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.table</code> or simple feature object if 'return_sf' is <code>TRUE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Requires Census Bureau API key
  # Get the median household income by tract for Washington DC and join
  # this data with DC tract boundaries.

  library(data.table)
  library(httr)
  library(jsonlite)
  library(sf)
  library(usmap)
  library(withr)
  library(ggplot2)
  library(RcensusPkg)

  # Get the 2020 median household income data by tract for DC
  dc_fips &lt;- usmap::fips(state = "dc")
  dc_B19013_dt &lt;- RcensusPkg::get_vintage_data(
    dataset = "acs/acs5",
    vintage = 2020,
    vars = "B19013_001E",
    region = "tract",
    regionin = paste0("state:", dc_fips)
  )
  # Get the simple feature DC tract geometries and join the data dataframe "dc_B19013_dt"
  output_dir &lt;- withr::local_tempdir()
  if(!dir.exists(output_dir)){
    dir.create(output_dir)
  }
  dc_tracts_sf &lt;- RcensusPkg::tiger_tracts_sf(
    state = dc_fips,
    output_dir = output_dir,
    general = TRUE,
    delete_files = FALSE
  )
  # Join the data with simple feature object
  dc_joined_sf &lt;- RcensusPkg::join_it(
    df_1 = dc_B19013_dt,
    df_2 = dc_tracts_sf,
    key_1 = "GEOID",
    key_2 = "GEOID",
    return_sf = TRUE
  )

## End(Not run)

</code></pre>

<hr>
<h2 id='long_to_wide'>long_to_wide</h2><span id='topic+long_to_wide'></span>

<h3>Description</h3>

<p>Reshape a <code>data.table</code> from a &quot;long&quot; format to a &quot;wide&quot; format.
</p>
<p>Function calls <code>data.table::dcast()</code> to reshape a long single column and
its values to multiple columns.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>long_to_wide(
  dt = NULL,
  id_v = c("NAME", "GEOID"),
  parameter_col = NULL,
  value_col = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="long_to_wide_+3A_dt">dt</code></td>
<td>
<p>The required <code>data.table</code> with a long column format.</p>
</td></tr>
<tr><td><code id="long_to_wide_+3A_id_v">id_v</code></td>
<td>
<p>A required vector of column names from 'dt' that act as identifiers and
are not part of the widened column.</p>
</td></tr>
<tr><td><code id="long_to_wide_+3A_parameter_col">parameter_col</code></td>
<td>
<p>A column name from 'dt' whose unique values will become
column names for the new expanded <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="long_to_wide_+3A_value_col">value_col</code></td>
<td>
<p>A required column name or vector of column names from 'dt' whose values will fall under
the new expanded <code>data.table</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A reshaped <code>data.table</code> in the &quot;wide&quot; format.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Requires Census Bureau API key
  library(data.table)
  library(httr)
  library(jsonlite)
  library(stringr)
  library(RcensusPkg)

  # Request for data from Census Bureau in "long" form
  B19001_1yr_long_dt &lt;- RcensusPkg::get_vintage_data(
    dataset = "acs/acs1",
    vintage = 2016,
    group = "B19001",
    region = "state",
    wide_to_long = TRUE
  )

  # Resulting data.table is in the "long" form. Convert it back to
  # to the wide form.
  B19001_1yr_wide_dt &lt;- RcensusPkg::long_to_wide(
    dt = B19001_1yr_long_dt,
    parameter_col = "variable",
    value_col = c("estimate", "moe")
  )

## End(Not run)
</code></pre>

<hr>
<h2 id='plot_us_data'>plot_us_data</h2><span id='topic+plot_us_data'></span>

<h3>Description</h3>

<p>This function produces a ggplot2 based choropleth map of a discrete/continuous variable across all/selected US states
including placement of Alaska, Hawaii, and Puerto Rico. The function accepts a data frame with a column of
state names and a column with their respective values.  If the data frame (parameter 'df') is submitted as <code>NULL</code> then only the simple
feature state geometries are returned for mapping. The function offers several options for
control/selection of state geographies and variable scaling.
</p>
<p>This function depends extensively on <code>RcensusPkg::tiger_states_sf()</code> for obtaining state geometries, so many of
that function's parameters are repeated in this function. Also <code>RplotterPkg::create_sf_plot()</code> is called upon for
displaying the shapefile geometries, so this package should be installed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_us_data(
  df = NULL,
  states_col = NULL,
  value_col = NULL,
  title = NULL,
  title_fontsz = 18,
  text_col = NULL,
  text_size = 3,
  text_color = "black",
  text_fontface = "plain",
  output_dir = tempdir(),
  delete_files = TRUE,
  vintage = 2020,
  general = FALSE,
  resol = "500k",
  na_rm = FALSE,
  scale_breaks = NULL,
  scale_values = NULL,
  scale_limits = NULL,
  scale_labels = waiver(),
  scale_colors = grDevices::heat.colors(8),
  scale_na_value = "gray50",
  own_scale = FALSE,
  sf_color = "black",
  sf_fill = "gray",
  sf_linewidth = 0.1,
  sf_alpha = 1,
  display_plot = TRUE,
  show_legend = TRUE,
  legend_pos = "right",
  legend_key_width = 0.5,
  legend_key_height = 0.7,
  legend_key_backgrd = "white"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_us_data_+3A_df">df</code></td>
<td>
<p>The data frame with a column of full state names and a second variable column of their respective values.
The column name for the states must be &quot;NAME&quot;. If 'df' is <code>NULL</code>, then only a sf object with the state geometries are returned.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_states_col">states_col</code></td>
<td>
<p>A required string (if 'df' is not <code>NULL</code>) that sets the column name from 'df' containing the state names of interest. These are
full state names, either capitalized or lower case.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_value_col">value_col</code></td>
<td>
<p>A required string (if 'df' is not <code>NULL</code>) that sets the column name from 'df' where values(discrete or continuous) are defined.
If the column has discrete values then it must be a factor.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_title">title</code></td>
<td>
<p>A string that sets the plot title.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_title_fontsz">title_fontsz</code></td>
<td>
<p>A numeric that sets the title's font size. The default is 18.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_text_col">text_col</code></td>
<td>
<p>An optional string that sets the column name from 'df' for labeling each state polygon.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_text_size">text_size</code></td>
<td>
<p>A numeric value that sets the size of labeled state text.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_text_color">text_color</code></td>
<td>
<p>A string that sets the color of labeled state text.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_text_fontface">text_fontface</code></td>
<td>
<p>A string that sets the fontface of labeled state text.
Acceptable values: &quot;plain&quot;, &quot;bold&quot;, &quot;italic&quot;, &quot;bold.italic&quot;. The default is &quot;plain&quot;.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_output_dir">output_dir</code></td>
<td>
<p>A full directory path where the shapefile and its associated files will be downloaded.
The default is the directory defined by the value returned by <code>tempdir()</code>.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_delete_files">delete_files</code></td>
<td>
<p>A logical which if <code>TRUE</code> will delete the shapefile and associated files in 'output_dir'.
The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_vintage">vintage</code></td>
<td>
<p>A numeric that sets the vintage of interest. The default is 2020.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_general">general</code></td>
<td>
<p>A logical which if <code>TRUE</code> will download a less detailed, more generalized version of the state geometries.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_resol">resol</code></td>
<td>
<p>If 'general' is <code>TRUE</code>, then the resolution to return. Acceptable values are strings
&quot;500k&quot;, &quot;5m&quot;, &quot;20m&quot;.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_na_rm">na_rm</code></td>
<td>
<p>A logical which if <code>TRUE</code>, missing observations are removed. If <code>FALSE</code>, the default,
missing observations are removed with a warning.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_scale_breaks">scale_breaks</code></td>
<td>
<p>A required string/numeric vector that defines the scale breaks.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_scale_values">scale_values</code></td>
<td>
<p>A string/numeric vector that defines the possible values. For factor values, this is required
and is a vector string of colors.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_scale_limits">scale_limits</code></td>
<td>
<p>A required string/numeric vector that defines the scale limits.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_scale_labels">scale_labels</code></td>
<td>
<p>An optional string vector that defines the scale labels. Vector must be the same length
as <code>scale_breaks</code>.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_scale_colors">scale_colors</code></td>
<td>
<p>Vector of colors to use for n-color gradient.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_scale_na_value">scale_na_value</code></td>
<td>
<p>A string that sets the color for missing values.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_own_scale">own_scale</code></td>
<td>
<p>A logical which if <code>TRUE</code>, then your own scaling may be appended to the plot without using the above
scale_* parameters.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_sf_color">sf_color</code></td>
<td>
<p>A string that sets the polygon border line color.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_sf_fill">sf_fill</code></td>
<td>
<p>A string that sets the polygon area fill color.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_sf_linewidth">sf_linewidth</code></td>
<td>
<p>A numeric that sets the border line thickness.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_sf_alpha">sf_alpha</code></td>
<td>
<p>A numeric that sets the alpha level attribute of the polygon fill.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_display_plot">display_plot</code></td>
<td>
<p>A logical that if <code>TRUE</code> will display the plot. The default is <code>TRUE</code>.
If <code>FALSE</code>, then a ggplot2 object is returned</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_show_legend">show_legend</code></td>
<td>
<p>A logical that controls the appearance of the legend.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_legend_pos">legend_pos</code></td>
<td>
<p>A string that sets the legend position. Acceptable values are &quot;right&quot;,
&quot;top&quot;, &quot;bottom&quot;.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_legend_key_width">legend_key_width</code></td>
<td>
<p>A numeric that sets the legend width in cm.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_legend_key_height">legend_key_height</code></td>
<td>
<p>A numeric that sets the legend height in cm.</p>
</td></tr>
<tr><td><code id="plot_us_data_+3A_legend_key_backgrd">legend_key_backgrd</code></td>
<td>
<p>A string that sets the legend's background color.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of ggplot2 objects if 'display_plot' is <code>FALSE</code>. Included in the
list is the plot of all the states (&quot;us_states&quot;) along with the original ggplot2
<code>ggplot2::geom_sf</code> plots of the lower 48 (&quot;lower_48&quot;), Alaska (&quot;alaska&quot;), Hawaii (&quot;hawaii&quot;) and Puerto Rico (&quot;puerto_rico&quot;).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(sf)
library(grid)
library(ggplot2)
library(ggplotify)
library(data.table)
library(gtable)
library(httr)
library(withr)
library(RplotterPkg)

# Plot just the states without joining data (the default case)
# Define a temporary output folder for the downloaded shapefiles
output_dir &lt;- withr::local_tempdir()
if(!dir.exists(output_dir)){
  dir.create(output_dir)
}
us_without_data_plot &lt;- RcensusPkg::plot_us_data(
 title = "A Default Mapping of US States",
 output_dir = output_dir,
 delete_files = FALSE
)

## Not run: 
# Requires US Census Bureau API key
# Plot of US map with discrete 2020 presidential results
output_dir &lt;- withr::local_tempdir()
if(!dir.exists(output_dir)){
  dir.create(output_dir)
}
a_plot &lt;- RcensusPkg::plot_us_data(
  df = RcensusPkg::vote2020,
  title = "US Presidential Vote 2020",
  states_col = "State",
  value_col = "Party",
  output_dir = output_dir,
  delete_files = FALSE,
  scale_breaks = c("R","D"),
  scale_limits = c("R","D"),
  scale_values = c("red","blue"),
  scale_labels = c("Republican","Democrat"),
  sf_color = "white"
)
## End(Not run)

</code></pre>

<hr>
<h2 id='remove_area_water'>remove_area_water</h2><span id='topic+remove_area_water'></span>

<h3>Description</h3>

<p>Function removes water area geometries from downloaded Census Bureau shapefiles
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_area_water(
  x,
  vintage = 2020,
  output_dir = tempdir(),
  delete_files = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="remove_area_water_+3A_x">x</code></td>
<td>
<p>An sf shapefile object with possible areas of water downloaded from the Census Bureau</p>
</td></tr>
<tr><td><code id="remove_area_water_+3A_vintage">vintage</code></td>
<td>
<p>An integer that specifies the year of the shapefile. The default is 2020.</p>
</td></tr>
<tr><td><code id="remove_area_water_+3A_output_dir">output_dir</code></td>
<td>
<p>A full directory path where supportive shapefiles and their associated files will be downloaded.
The default is the directory defined by the value returned by <code>tempdir()</code>.</p>
</td></tr>
<tr><td><code id="remove_area_water_+3A_delete_files">delete_files</code></td>
<td>
<p>A logical which if <code>TRUE</code> will delete the shapefile and associated files in 'output_dir'.
The default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An sf object with the water area geometries removed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Request for Census Bureau data plus CPU processing can exceed well over 10
  #  seconds in some cases.
  library(httr)
  library(sf)
  library(usmap)
  library(withr)
  library(data.table)
  library(RcensusPkg)

  # Remove water areas from New York, New York sf object
  ny_state_county_fips &lt;- usmap::fips(state = "New York", county = "New York")
  ny_state_fips &lt;- substr(ny_state_county_fips, 1,2)
  ny_county_fips &lt;- substr(ny_state_county_fips, 3, 5)

  # Define a temporary output folder for the downloaded shapefiles
  output_dir &lt;- withr::local_tempdir()
  if(!dir.exists(output_dir)){
    dir.create(output_dir)
  }

  # Define an expression for filtering just the New York county
  express &lt;- parse(text = paste0("COUNTYFP == ", '"', ny_county_fips, '"'))

  # Get the New York,New York county tract sf geometries object
  ny_tracts_sf &lt;- RcensusPkg::tiger_tracts_sf(
    state = ny_state_fips,
    vintage = 2020,
    general = FALSE,
    transform_crs = 6538,
    express = express,
    output_dir = output_dir,
    delete_files = FALSE
  )

  # Remove the area waters from New York, New York sf object
    ny_without_water_sf &lt;- RcensusPkg::remove_area_water(
    ny_tracts_sf,
    output_dir = output_dir,
    delete_files = FALSE
  )

## End(Not run)
</code></pre>

<hr>
<h2 id='tiger_block_groups_sf'>tiger_block_groups_sf</h2><span id='topic+tiger_block_groups_sf'></span>

<h3>Description</h3>

<p>This function performs three tasks:
</p>

<ol>
<li><p> Download to an output directory a zip file from the TIGER/Line Shapefiles database.
</p>
</li>
<li><p> Unzip the zip file and locate the shape file of interest.
</p>
</li>
<li><p> Read and convert the shape file to a simple feature object.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>tiger_block_groups_sf(
  state = NULL,
  output_dir = tempdir(),
  delete_files = TRUE,
  vintage = 2020,
  general = FALSE,
  sf_info = FALSE,
  do_progress = FALSE,
  set_crs = NULL,
  transform_crs = NULL,
  shapefile = NULL,
  datafile = NULL,
  datafile_key = NULL,
  sf_key = "GEOID",
  express = NULL,
  check_na = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tiger_block_groups_sf_+3A_state">state</code></td>
<td>
<p>A required two-digit FIPS code for the state of interest.
See <a href="https://cran.r-project.org/package=usmap">usmap::fips function</a> for finding FIPS codes.</p>
</td></tr>
<tr><td><code id="tiger_block_groups_sf_+3A_output_dir">output_dir</code></td>
<td>
<p>A full directory path where the shapefile and its associated files will be downloaded.
The default is the directory defined by the value returned by <code>tempdir()</code>.</p>
</td></tr>
<tr><td><code id="tiger_block_groups_sf_+3A_delete_files">delete_files</code></td>
<td>
<p>A logical which if <code>TRUE</code> will delete the shapefile and associated files in 'output_dir'.
The default is TRUE.</p>
</td></tr>
<tr><td><code id="tiger_block_groups_sf_+3A_vintage">vintage</code></td>
<td>
<p>A numeric that sets the vintage of interest. The default is 2020.</p>
</td></tr>
<tr><td><code id="tiger_block_groups_sf_+3A_general">general</code></td>
<td>
<p>A logical which if <code>TRUE</code> will download a less detailed, more generalized version of the block group geometries.</p>
</td></tr>
<tr><td><code id="tiger_block_groups_sf_+3A_sf_info">sf_info</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays info on the resulting simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_block_groups_sf_+3A_do_progress">do_progress</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays a progress bar during the download.</p>
</td></tr>
<tr><td><code id="tiger_block_groups_sf_+3A_set_crs">set_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls sf::st_crs() to set the crs of the geometries and transforms them.</p>
</td></tr>
<tr><td><code id="tiger_block_groups_sf_+3A_transform_crs">transform_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls sf::st_transform()
to perform a crs transform of the geometries. Note that the crs of the shapefile must not be <code>NA</code>.</p>
</td></tr>
<tr><td><code id="tiger_block_groups_sf_+3A_shapefile">shapefile</code></td>
<td>
<p>A full file path to a shapefile folder with its unzipped files to be processed instead of downloading.</p>
</td></tr>
<tr><td><code id="tiger_block_groups_sf_+3A_datafile">datafile</code></td>
<td>
<p>A dataframe containing data that should be joined with this function's resultant simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_block_groups_sf_+3A_datafile_key">datafile_key</code></td>
<td>
<p>The column name from 'datafile' dataframe used to key with the 'sf_key' column of the resultant simple feature dataframe.</p>
</td></tr>
<tr><td><code id="tiger_block_groups_sf_+3A_sf_key">sf_key</code></td>
<td>
<p>The column from the resultant dataframe used to key with the 'datafile' dataframe.</p>
</td></tr>
<tr><td><code id="tiger_block_groups_sf_+3A_express">express</code></td>
<td>
<p>A logical expression object used to filter the resultant simple feature dataframe.
For example, one of the columns of the resultant simple feature dataframe is &quot;COUNTYFP&quot;.
If you wanted to return just the geometries for Los Alamos, New Mexico (which has a fips code of &quot;028&quot;),
then you assign 'express' equal to: expression(COUNTYFP == &quot;028&quot;). The expression will be
evaluated and only the tract geometries for Los Alamos will be returned.</p>
</td></tr>
<tr><td><code id="tiger_block_groups_sf_+3A_check_na">check_na</code></td>
<td>
<p>A logical which if <code>TRUE</code> will remove rows that have missing values for any of the columns.
The default is to not check the columns for NA values.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns simple feature (sf) of US Census block group boundary related geometric polygons,
provided by the US Census Bureau's TIGER/Line Shapefiles database. See
<a href="https://r-spatial.github.io/sf/articles/sf1.html">Simple Features for R</a>
for more information on simple features. Along with the geometries, additional block group related
variables are provided.  See <a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_F-R.pdf">Appendix G-2. Record Layout: Block Group State-based Shapefile)</a>
for a description of block group related variables of the sf file. For further information on the Census Bureau's shape files see
<a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2021/TGRSHP2021_TechDoc_Ch3.pdf">About the 2021 TIGER/Line Shapefiles</a>.
From <a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_Ch4.pdf">Chapter 4.3 Block Groups</a> &ndash;
&quot;Standard block groups are clusters of blocks within the same census tract that have the same first digit of
their 4-character census block number (e.g., Blocks 3001, 3002, 3003 to 3999 in census tract 1210.02
belong to block group 3). Current block groups do not always maintain these same block number to block
group relationships due to boundary and feature changes that occur throughout the decade. A block group usually covers a contiguous area. Each census tract contains one or more block groups
and block groups have unique numbers within census tract.&quot;
</p>
<p>A more generalized, recognizable version of the block group geometries that has less download size is also available.  For more information on cartographic boundary files see
<a href="https://www.census.gov/programs-surveys/geography/technical-documentation/naming-convention/cartographic-boundary-file.html">Cartographic Boundary File Description</a>.
These files are available for vintages greater than 2013 with resolution 1:500k meters.
</p>
<p>Some earlier vintages may have NA for the crs so you may need to specify the <code>crs_transform</code> to 3426.  Also
you may be interested in using a state level crs. See <a href="https://epsg.io/">epsg.io</a> to search worldwide for crs.
</p>
<p>The function returns the simple feature object which can easily be mapped (see <a href="https://github.com/deandevl/RplotterPkg">RplotterPkg::create_sf_plot()</a>) or
joined with US Census Bureau demographic data via the GEOID value.
</p>


<h3>Value</h3>

<p>A data frame object of class sf
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(sf)
library(httr)
library(data.table)
library(usmap)
library(withr)
library(RcensusPkg)

# Get block groups for Washington, DC
# Get the DC fips code
dc_fips &lt;- usmap::fips(state = "dc")

# Define a temporary output folder for the downloaded shapefiles
output_dir &lt;- withr::local_tempdir()
if(!dir.exists(output_dir)){
  dir.create(output_dir)
}

dc_block_groups_sf &lt;- RcensusPkg::tiger_block_groups_sf(
  state = dc_fips,
  output_dir = output_dir,
  delete_files = FALSE
)

</code></pre>

<hr>
<h2 id='tiger_blocks_sf'>tiger_blocks_sf</h2><span id='topic+tiger_blocks_sf'></span>

<h3>Description</h3>

<p>This function performs three tasks:
</p>

<ol>
<li><p> Download to an output directory a zip file from the TIGER/Line Shapefiles database.
</p>
</li>
<li><p> Unzip the zip file and locate the shape file of interest.
</p>
</li>
<li><p> Read and convert the shape file to a simple feature object.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>tiger_blocks_sf(
  state = NULL,
  output_dir = tempdir(),
  delete_files = TRUE,
  vintage = 2020,
  set_crs = NULL,
  transform_crs = NULL,
  sf_info = FALSE,
  do_progress = FALSE,
  shapefile = NULL,
  express = NULL,
  check_na = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tiger_blocks_sf_+3A_state">state</code></td>
<td>
<p>A required two-digit FIPS code for the state of interest.
See <a href="https://cran.r-project.org/package=usmap">usmap::fips function</a> for finding FIPS codes.</p>
</td></tr>
<tr><td><code id="tiger_blocks_sf_+3A_output_dir">output_dir</code></td>
<td>
<p>A full directory path where the shapefile and its associated files will be downloaded.
The default is the directory defined by the value returned by <code>tempdir()</code>.</p>
</td></tr>
<tr><td><code id="tiger_blocks_sf_+3A_delete_files">delete_files</code></td>
<td>
<p>A logical which if <code>TRUE</code> will delete the shapefile and associated files in 'output_dir'.
The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="tiger_blocks_sf_+3A_vintage">vintage</code></td>
<td>
<p>A numeric that sets the vintage of interest. The default is 2020.</p>
</td></tr>
<tr><td><code id="tiger_blocks_sf_+3A_set_crs">set_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls sf::st_crs() to set the crs of the geometries and transforms them.</p>
</td></tr>
<tr><td><code id="tiger_blocks_sf_+3A_transform_crs">transform_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls sf::st_transform()
to perform a crs transform of the geometries. Note that the crs of the shapefile must not be NA.</p>
</td></tr>
<tr><td><code id="tiger_blocks_sf_+3A_sf_info">sf_info</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays info on the resulting simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_blocks_sf_+3A_do_progress">do_progress</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays a progress bar during the download.</p>
</td></tr>
<tr><td><code id="tiger_blocks_sf_+3A_shapefile">shapefile</code></td>
<td>
<p>A full file path to a shapefile folder with its unzipped files to be processed instead of downloading.</p>
</td></tr>
<tr><td><code id="tiger_blocks_sf_+3A_express">express</code></td>
<td>
<p>A logical expression object used to filter the resultant simple feature dataframe.
For example, one of the columns of the resultant simple feature dataframe is &quot;COUNTYFP&quot;.
If you wanted to return just the geometries for Los Alamos, New Mexico (which has a fips code of &quot;028&quot;),
then you assign 'express' equal to: expression(COUNTYFP == &quot;028&quot;). The expression will be
evaluated and only the tract geometries for Los Alamos will be returned.</p>
</td></tr>
<tr><td><code id="tiger_blocks_sf_+3A_check_na">check_na</code></td>
<td>
<p>A logical which if <code>TRUE</code> will remove rows that have missing values for any of the columns.
The default is to not check the columns for <code>NA</code> values.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns simple feature (sf) of US Census block boundary related geometric polygons,
provided by the US Census Bureau's TIGER/Line Shapefiles database. See
<a href="https://r-spatial.github.io/sf/articles/sf1.html">Simple Features for R</a>
for more information on simple features. Along with the geometries, additional block related
variables are provided.  See <a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_F-R.pdf">Appendix G-1. Record Layout: Block State-based Shapefile)</a>
for a description of block related variables of the sf file. For further information on the Census Bureau's shape files see
<a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2021/TGRSHP2021_TechDoc_Ch3.pdf">About the 2021 TIGER/Line Shapefiles</a>.
From <a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_Ch4.pdf">Chapter 4.2 Blocks</a> &ndash;
&quot;Census blocks are statistical areas bounded on all sides by visible features (e.g., streets, roads, streams,
and railroad tracks), and by non-visible boundaries (e.g., city, town, township, county limits, and short
line-of-sight extensions of streets and roads).&quot;
</p>
<p>The function returns the simple feature object which can easily be mapped (see <a href="https://github.com/deandevl/RplotterPkg">RplotterPkg::create_sf_plot()</a>) or
joined with US Census Bureau demographic data via the GEOID value. Be aware that shapefiles for blocks can
be very large and time consuming to download for some states.
</p>
<p>Some earlier vintages may have NA for the crs so you may need to specify the <code>crs_transform</code> to 3426.  Also
you may be interested in using a state level crs. See <a href="https://epsg.io/">epsg.io</a> to search worldwide for crs.
</p>


<h3>Value</h3>

<p>A data frame object of class sf
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Beware that downloading and processing state blocks can be time consuming
  library(sf)
  library(httr)
  library(usmap)
  library(withr)
  library(data.table)
  library(RcensusPkg)

  vt_fips &lt;- usmap::fips(state="vermont")
  output_dir &lt;- withr::local_tempdir()
  if(!dir.exists(output_dir)){
    dir.create(output_dir)
  }
  vt_blocks_sf &lt;- RcensusPkg::tiger_blocks_sf(
    state = vt_fips,
    output_dir = output_dir,
    delete_files = FALSE
  )

## End(Not run)

</code></pre>

<hr>
<h2 id='tiger_cbsa_sf'>tiger_cbsa_sf</h2><span id='topic+tiger_cbsa_sf'></span>

<h3>Description</h3>

<p>This function performs three tasks:
</p>

<ol>
<li><p> Download to an output directory a zip file from the TIGER/Line Shapefiles database.
</p>
</li>
<li><p> Unzip the zip file and locate the shape file of interest.
</p>
</li>
<li><p> Read and convert the shape file to a simple feature object.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>tiger_cbsa_sf(
  output_dir = tempdir(),
  delete_files = TRUE,
  vintage = 2020,
  general = FALSE,
  resol = "500k",
  set_crs = NULL,
  transform_crs = NULL,
  sf_info = FALSE,
  do_progress = FALSE,
  shapefile = NULL,
  datafile = NULL,
  datafile_key = NULL,
  sf_key = "GEOID",
  state_filter = NULL,
  city_filter = NULL,
  check_na = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tiger_cbsa_sf_+3A_output_dir">output_dir</code></td>
<td>
<p>A full directory path where the shapefile and its associated files will be downloaded.
The default is the directory defined by the value returned by <code>tempdir()</code>.</p>
</td></tr>
<tr><td><code id="tiger_cbsa_sf_+3A_delete_files">delete_files</code></td>
<td>
<p>A logical which if <code>TRUE</code> will delete the shapefile and associated files in 'output_dir'.
The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="tiger_cbsa_sf_+3A_vintage">vintage</code></td>
<td>
<p>A numeric that sets the vintage of interest. The default is 2020.</p>
</td></tr>
<tr><td><code id="tiger_cbsa_sf_+3A_general">general</code></td>
<td>
<p>A logical which if <code>TRUE</code> will download a less detailed, more generalized version of the state geometries.</p>
</td></tr>
<tr><td><code id="tiger_cbsa_sf_+3A_resol">resol</code></td>
<td>
<p>If 'general' is <code>TRUE</code>, then the resolution to return. Acceptable values are strings
&quot;500k&quot;, &quot;5m&quot;, &quot;20m&quot;.</p>
</td></tr>
<tr><td><code id="tiger_cbsa_sf_+3A_set_crs">set_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls sf::st_crs() to set the crs of the geometries and transforms them.</p>
</td></tr>
<tr><td><code id="tiger_cbsa_sf_+3A_transform_crs">transform_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls sf::st_transform()
to perform a crs transform of the geometries. Note that the crs of the shapefile must not be NA.</p>
</td></tr>
<tr><td><code id="tiger_cbsa_sf_+3A_sf_info">sf_info</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays info on the resulting simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_cbsa_sf_+3A_do_progress">do_progress</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays a progress bar during the download.</p>
</td></tr>
<tr><td><code id="tiger_cbsa_sf_+3A_shapefile">shapefile</code></td>
<td>
<p>A full file path to a shapefile folder with its unzipped files to be processed instead of downloading.</p>
</td></tr>
<tr><td><code id="tiger_cbsa_sf_+3A_datafile">datafile</code></td>
<td>
<p>A dataframe containing data that should be joined with this function's resultant simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_cbsa_sf_+3A_datafile_key">datafile_key</code></td>
<td>
<p>The column name from 'datafile' dataframe used to key with the 'sf_key' column of the resultant simple feature dataframe.</p>
</td></tr>
<tr><td><code id="tiger_cbsa_sf_+3A_sf_key">sf_key</code></td>
<td>
<p>The column from the resultant dataframe used to key with the 'datafile' dataframe.</p>
</td></tr>
<tr><td><code id="tiger_cbsa_sf_+3A_state_filter">state_filter</code></td>
<td>
<p>A string that filters the resultant sf by a state name (e.g. &quot;TX&quot;) .</p>
</td></tr>
<tr><td><code id="tiger_cbsa_sf_+3A_city_filter">city_filter</code></td>
<td>
<p>A string that filters the resultant sf by a city name (e.g. &quot;Kansas City&quot;).</p>
</td></tr>
<tr><td><code id="tiger_cbsa_sf_+3A_check_na">check_na</code></td>
<td>
<p>A logical which if <code>TRUE</code> will remove rows that have missing values for any of the columns.
The default is to not check the columns for <code>NA</code> values.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns simple feature (sf) of core based statistical area (CBSA) boundary related geometric polygons,
provided by the US Census Bureau's TIGER/Line Shapefiles database. See
<a href="https://r-spatial.github.io/sf/articles/sf1.html">Simple Features for R</a>
for more information on simple features.
</p>
<p>A more generalized, recognizable version of the CBSA geometries that has less download size is also available.  For more information on cartographic boundary files see
<a href="https://www.census.gov/programs-surveys/geography/technical-documentation/naming-convention/cartographic-boundary-file.html">Cartographic Boundary File Description</a>.
These files are available for vintages greater than 2009 with resolution 1:500k, 1:5m, 1:20m meters.
For descriptive information on CBSA see <a href="https://www.census.gov/programs-surveys/metro-micro/about.html">About</a>.
</p>
<p>The function returns the simple feature object which can easily be mapped (see <a href="https://github.com/deandevl/RplotterPkg">RplotterPkg::create_sf_plot()</a>) or
joined with US Census Bureau demographic data. To help incorporate data files, this function
has a 'datafile' parameter which will be joined with the resultant simple feature object. The only
requirement is that a common &quot;key&quot; for joining exist between the data dataframe and the simple feature dataframe.
</p>


<h3>Value</h3>

<p>A data frame object of class sf
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(httr)
library(sf)
library(data.table)
library(withr)
library(RcensusPkg)

# Define a temporary, self deleting output folder for the downloaded shapefiles
output_dir &lt;- withr::local_tempdir()
if(!dir.exists(output_dir)){
  dir.create(output_dir)
}

# Get shapefile geometries for the Core-based statistical areas
#   of Texas with vintage 2020.
# Note that there is also a city filter parameter (city_filter).
cbsa_tx_sf &lt;- RcensusPkg::tiger_cbsa_sf(
  vintage = 2020,
  resol = "20m",
  # city_filter = "Kansas City",
  state_filter = "TX",
  general = TRUE,
  output_dir = output_dir,
  delete_files = FALSE
)

</code></pre>

<hr>
<h2 id='tiger_counties_sf'>tiger_counties_sf</h2><span id='topic+tiger_counties_sf'></span>

<h3>Description</h3>

<p>This function performs three tasks:
</p>

<ol>
<li><p> Download to an output directory a zip file from the TIGER/Line Shapefiles database.
</p>
</li>
<li><p> Unzip the zip file and locate the shape file of interest.
</p>
</li>
<li><p> Read and convert the shape file to a simple feature object.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>tiger_counties_sf(
  output_dir = tempdir(),
  delete_files = TRUE,
  vintage = 2020,
  general = FALSE,
  resol = "500k",
  set_crs = NULL,
  transform_crs = NULL,
  sf_info = FALSE,
  do_progress = FALSE,
  shapefile = NULL,
  datafile = NULL,
  datafile_key = NULL,
  sf_key = "COUNTYFP",
  express = NULL,
  check_na = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tiger_counties_sf_+3A_output_dir">output_dir</code></td>
<td>
<p>A full directory path where the shapefile and its associated files will be downloaded.
The default is the directory defined by the value returned by <code>tempdir()</code>.</p>
</td></tr>
<tr><td><code id="tiger_counties_sf_+3A_delete_files">delete_files</code></td>
<td>
<p>A logical which if <code>TRUE</code> will delete the shapefile and associated files in 'output_dir'.
The default is TRUE.</p>
</td></tr>
<tr><td><code id="tiger_counties_sf_+3A_vintage">vintage</code></td>
<td>
<p>A numeric that sets the vintage of interest. The default is 2020.</p>
</td></tr>
<tr><td><code id="tiger_counties_sf_+3A_general">general</code></td>
<td>
<p>A logical which if <code>TRUE</code> will download a less detailed, more generalized version of the county geometries.</p>
</td></tr>
<tr><td><code id="tiger_counties_sf_+3A_resol">resol</code></td>
<td>
<p>If 'general' is <code>TRUE</code>, then the resolution to return. Acceptable values are strings
&quot;500k&quot;, &quot;5m&quot;, &quot;20m&quot;.</p>
</td></tr>
<tr><td><code id="tiger_counties_sf_+3A_set_crs">set_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls sf::st_crs() to set the crs of the geometries and transforms them.</p>
</td></tr>
<tr><td><code id="tiger_counties_sf_+3A_transform_crs">transform_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls <code>sf::st_transform()</code>
to perform a crs transform of the geometries. Note that the crs of the shapefile must not be <code>NA</code>.</p>
</td></tr>
<tr><td><code id="tiger_counties_sf_+3A_sf_info">sf_info</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays info on the resulting simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_counties_sf_+3A_do_progress">do_progress</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays a progress bar during the download.</p>
</td></tr>
<tr><td><code id="tiger_counties_sf_+3A_shapefile">shapefile</code></td>
<td>
<p>A full file path to a shapefile folder with its unzipped files to be processed instead of downloading.</p>
</td></tr>
<tr><td><code id="tiger_counties_sf_+3A_datafile">datafile</code></td>
<td>
<p>A dataframe containing data that should be joined with this function's resultant simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_counties_sf_+3A_datafile_key">datafile_key</code></td>
<td>
<p>The column name from 'datafile' dataframe used to key with the 'sf_key' column
of the resultant simple feature dataframe.</p>
</td></tr>
<tr><td><code id="tiger_counties_sf_+3A_sf_key">sf_key</code></td>
<td>
<p>The column from the resultant dataframe used to key with the 'datafile' dataframe.</p>
</td></tr>
<tr><td><code id="tiger_counties_sf_+3A_express">express</code></td>
<td>
<p>A logical expression object used to filter the resultant simple feature dataframe.
For example, one of the columns of the resultant simple feature dataframe is &quot;STATEFP&quot;.
If you wanted to return just the geometries for Florida (which has a fips code of &quot;12&quot;),
then you assign 'express' equal to: expression(STATEFP == &quot;12&quot;). The expression will be
evaluated and only the geometries for Florida will be returned.</p>
</td></tr>
<tr><td><code id="tiger_counties_sf_+3A_check_na">check_na</code></td>
<td>
<p>A logical which if <code>TRUE</code> will remove rows that have missing values for any of the columns.
The default is to not check the columns for <code>NA</code> values.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns simple feature (sf) of the entire US county boundary related geometric polygons,
provided by the US Census Bureau's TIGER/Line Shapefiles database. See
<a href="https://r-spatial.github.io/sf/articles/sf1.html">Simple Features for R</a>
for more information on simple features. Along with the geometries, additional county related
variables are provided.  See <a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_F-R.pdf">Appendix I-3. Record Layout: County Subdivision State-based Shapefile)</a>
for a description of county related variables of the sf file. For further information on the Census Bureau's shape files see
<a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2021/TGRSHP2021_TechDoc_Ch3.pdf">About the 2021 TIGER/Line Shapefiles</a>.
From <a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_Ch4.pdf">Chapter 4.7 Counties and Equivalent Enties</a> &ndash;
&quot;Counties and equivalent entities are primary legal divisions of states. In most states, these entities are
termed 'counties.'&quot;
</p>
<p>A more generalized, recognizable version of the county geometries that has less download size is also available.  For more information on cartographic boundary files see
<a href="https://www.census.gov/programs-surveys/geography/technical-documentation/naming-convention/cartographic-boundary-file.html">Cartographic Boundary File Description</a>.
These files are available for vintages greater than 2013 with resolution 1:500k, 1:5m, 1:20m meters.
</p>
<p>Some earlier vintages may have NA for the crs so you may need to specify the 'crs_transform' to 3426.  Also
you may be interested in using a state level crs. See <a href="https://epsg.io/">epsg.io</a> to search worldwide for crs.
</p>
<p>The function returns the simple feature object which can easily be mapped (see <a href="https://github.com/deandevl/RplotterPkg">RplotterPkg::create_sf_plot()</a>) or
joined with US Census Bureau demographic data via the GEOID value.
</p>


<h3>Value</h3>

<p>An object of class sf
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(httr)
library(sf)
library(data.table)
library(usmap)
library(withr)
library(RcensusPkg)

# Get the geometries for Ohio counties
# Determine the fips code for Ohio (returns "39")
ohio_fips &lt;- usmap::fips(state = "ohio")
# Create an expression to filter out just Ohio counties
#   from the simple feature dataframe
express &lt;- parse(text = paste0("STATEFP == ", '"', ohio_fips, '"'))
# Define a temporary output folder for the downloaded shapefiles
output_dir &lt;- withr::local_tempdir()
if(!dir.exists(output_dir)){
  dir.create(output_dir)
}
# Get the Ohio county's generalized geometries
ohio_counties_sf &lt;- RcensusPkg::tiger_counties_sf(
  general = TRUE,
  express = express,
  output_dir = output_dir,
  delete_files = FALSE
)

</code></pre>

<hr>
<h2 id='tiger_county_subsection_sf'>tiger_county_subsection_sf</h2><span id='topic+tiger_county_subsection_sf'></span>

<h3>Description</h3>

<p>This function performs three tasks:
</p>

<ol>
<li><p> Download to an output directory a zip file from the TIGER/Line Shapefiles database.
</p>
</li>
<li><p> Unzip the zip file and locate the shape file of interest.
</p>
</li>
<li><p> Read and convert the shape file to a simple feature object.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>tiger_county_subsection_sf(
  state = NULL,
  output_dir = tempdir(),
  delete_files = TRUE,
  vintage = 2020,
  general = FALSE,
  set_crs = NULL,
  transform_crs = NULL,
  sf_info = FALSE,
  do_progress = FALSE,
  shapefile = NULL,
  datafile = NULL,
  datafile_key = NULL,
  sf_key = "GEOID",
  express = NULL,
  check_na = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tiger_county_subsection_sf_+3A_state">state</code></td>
<td>
<p>A required two-digit FIPS code for the state of interest.
See <a href="https://cran.r-project.org/package=usmap">usmap::fips function</a> for finding FIPS codes.</p>
</td></tr>
<tr><td><code id="tiger_county_subsection_sf_+3A_output_dir">output_dir</code></td>
<td>
<p>A full directory path where the shapefile and its associated files will be downloaded.
The default is the directory defined by the value returned by <code>tempdir()</code>.</p>
</td></tr>
<tr><td><code id="tiger_county_subsection_sf_+3A_delete_files">delete_files</code></td>
<td>
<p>A logical which if <code>TRUE</code> will delete the shapefile and associated files in 'output_dir'.
The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="tiger_county_subsection_sf_+3A_vintage">vintage</code></td>
<td>
<p>A numeric that sets the vintage of interest. The default is 2020.</p>
</td></tr>
<tr><td><code id="tiger_county_subsection_sf_+3A_general">general</code></td>
<td>
<p>A logical which if <code>TRUE</code> will download a less detailed, more generalized version of the tract geometries.</p>
</td></tr>
<tr><td><code id="tiger_county_subsection_sf_+3A_set_crs">set_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls sf::st_crs() to set the crs of the geometries and transforms them.</p>
</td></tr>
<tr><td><code id="tiger_county_subsection_sf_+3A_transform_crs">transform_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls sf::st_transform()
to perform a crs transform of the geometries. Note that the crs of the shapefile must not be NA.</p>
</td></tr>
<tr><td><code id="tiger_county_subsection_sf_+3A_sf_info">sf_info</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays info on the resulting simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_county_subsection_sf_+3A_do_progress">do_progress</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays a progress bar during the download.</p>
</td></tr>
<tr><td><code id="tiger_county_subsection_sf_+3A_shapefile">shapefile</code></td>
<td>
<p>A full file path to a shapefile folder with its unzipped files to be processed instead of downloading.</p>
</td></tr>
<tr><td><code id="tiger_county_subsection_sf_+3A_datafile">datafile</code></td>
<td>
<p>A dataframe containing data that should be joined with this function's resultant simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_county_subsection_sf_+3A_datafile_key">datafile_key</code></td>
<td>
<p>The column name from 'datafile' dataframe used to key with the 'sf_key' column of the resultant simple feature dataframe.</p>
</td></tr>
<tr><td><code id="tiger_county_subsection_sf_+3A_sf_key">sf_key</code></td>
<td>
<p>The column from the resultant dataframe used to key with the 'datafile' dataframe.</p>
</td></tr>
<tr><td><code id="tiger_county_subsection_sf_+3A_express">express</code></td>
<td>
<p>A logical expression object used to filter the resultant simple feature dataframe.
For example, one of the columns of the resultant simple feature dataframe is &quot;COUNTYFP&quot;.
If you wanted to return just the geometries for Los Alamos, New Mexico (which has a fips code of &quot;028&quot;),
then you assign 'express' equal to: expression(COUNTYFP == &quot;028&quot;). The expression will be
evaluated and only the tract geometries for Los Alamos will be returned.</p>
</td></tr>
<tr><td><code id="tiger_county_subsection_sf_+3A_check_na">check_na</code></td>
<td>
<p>A logical which if <code>TRUE</code> will remove rows that have missing values for any of the columns.
The default is to not check the columns for <code>NA</code> values.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns simple feature (sf) of US Census county subsection boundary related geometric polygons,
provided by the US Census Bureau's TIGER/Line Shapefiles database. See
<a href="https://r-spatial.github.io/sf/articles/sf1.html">Simple Features for R</a>
for more information on simple features. Along with the geometries, additional county subsection related
variables are provided.  See <a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_F-R.pdf">Appendix I-3. Record Layout: County Subdivision State-based Shapefile)</a>
for a description of county subsection related variables of the sf file. For further information on the Census Bureau's shape files see
<a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2021/TGRSHP2021_TechDoc_Ch3.pdf">About the 2021 TIGER/Line Shapefiles</a>.
See <a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_Ch4.pdf">Chapter 4.8 County Subdivisions</a> for
a description of the term.
</p>
<p>A more generalized, recognizable version of the tract geometries that has less download size is also available.  For more information on cartographic boundary files see
<a href="https://www.census.gov/programs-surveys/geography/technical-documentation/naming-convention/cartographic-boundary-file.html">Cartographic Boundary File Description</a>.
These files are available for vintages greater than 2013 with resolution 1:500k meters.
</p>
<p>The function returns the simple feature object which can easily be mapped (see <a href="https://github.com/deandevl/RplotterPkg">RplotterPkg::create_sf_plot()</a>) or
joined with US Census Bureau demographic data.  To help incorporate data files, this function
has a 'datafile' parameter which will be joined with the resultant simple feature object. The only
requirement is that a common &quot;key&quot; for joining exist between the data dataframe and the simple feature dataframe.
</p>
<p>Some earlier vintages may have <code>NA</code> for the crs so you may need to specify the 'crs_transform' to 3426.  Also
you may be interested in using a state level crs. See <a href="https://epsg.io/">epsg.io</a> to search worldwide for crs.
</p>


<h3>Value</h3>

<p>A data frame object of class sf
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(httr)
library(sf)
library(data.table)
library(withr)
library(usmap)
library(RcensusPkg)

# Find the subsections for a county in Ohio
# Define a temporary, self deleting output folder for the downloaded shapefiles
output_dir &lt;- withr::local_tempdir()
if(!dir.exists(output_dir)){
  dir.create(output_dir)
}

# Define the fips values for state and county
ohio_hc_fips &lt;- usmap::fips(state = "ohio", county = "holmes")
ohio_fips &lt;- substr(ohio_hc_fips,1,2)
hc_fips &lt;- substr(ohio_hc_fips,3,5)

# Define a filtering expression for the county
express &lt;- parse(text = paste0("COUNTYFP == ", '"', hc_fips, '"'))

# Get the subsection sf object for the Ohio county
hc_ctysub_sf &lt;- RcensusPkg::tiger_county_subsection_sf(
  state = ohio_fips,
  vintage = 2020,
  general = TRUE,
  express = express,
  output_dir = output_dir,
  delete_files = FALSE
)

</code></pre>

<hr>
<h2 id='tiger_landmarks_sf'>tiger_landmarks_sf</h2><span id='topic+tiger_landmarks_sf'></span>

<h3>Description</h3>

<p>This function performs three tasks:
</p>

<ol>
<li><p> Download to an output directory a zip file from the TIGER/Line Shapefiles database.
</p>
</li>
<li><p> Unzip the zip file and locate the shape file of interest.
</p>
</li>
<li><p> Read and convert the shape file to a simple feature object.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>tiger_landmarks_sf(
  state = NULL,
  output_dir = tempdir(),
  delete_files = TRUE,
  vintage = 2020,
  entity = "point",
  set_crs = NULL,
  transform_crs = NULL,
  sf_info = FALSE,
  do_progress = FALSE,
  shapefile = NULL,
  express = NULL,
  check_na = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tiger_landmarks_sf_+3A_state">state</code></td>
<td>
<p>The required two-digit FIPS code for the state of interest.
See <a href="https://cran.r-project.org/package=usmap">usmap::fips function</a> for finding FIPS codes.</p>
</td></tr>
<tr><td><code id="tiger_landmarks_sf_+3A_output_dir">output_dir</code></td>
<td>
<p>A full directory path where the shapefile and its associated files will be downloaded.
The default is the directory defined by the value returned by <code>tempdir()</code>.</p>
</td></tr>
<tr><td><code id="tiger_landmarks_sf_+3A_delete_files">delete_files</code></td>
<td>
<p>A logical which if <code>TRUE</code> will delete the shapefile and associated files in 'output_dir'.
The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="tiger_landmarks_sf_+3A_vintage">vintage</code></td>
<td>
<p>A numeric that sets the vintage of interest. The default is 2020.
The value should be greater than 2010.</p>
</td></tr>
<tr><td><code id="tiger_landmarks_sf_+3A_entity">entity</code></td>
<td>
<p>A character string that sets the specific landmark entity of interest. The
acceptable values are &quot;area&quot; or &quot;point&quot;. The default is &quot;point&quot;.</p>
</td></tr>
<tr><td><code id="tiger_landmarks_sf_+3A_set_crs">set_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls sf::st_crs() to set the crs of the geometries and transforms them.</p>
</td></tr>
<tr><td><code id="tiger_landmarks_sf_+3A_transform_crs">transform_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls <code>sf::st_transform()</code>
to perform a crs transform of the geometries. Note that the crs of the shapefile must not be NA.</p>
</td></tr>
<tr><td><code id="tiger_landmarks_sf_+3A_sf_info">sf_info</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays info on the resulting simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_landmarks_sf_+3A_do_progress">do_progress</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays a progress bar during the download.</p>
</td></tr>
<tr><td><code id="tiger_landmarks_sf_+3A_shapefile">shapefile</code></td>
<td>
<p>A full file path to a shapefile folder with its unzipped files to be processed instead of downloading.</p>
</td></tr>
<tr><td><code id="tiger_landmarks_sf_+3A_express">express</code></td>
<td>
<p>A logical expression object used to filter the resultant simple feature dataframe.
For example, one of the columns of the resultant simple feature dataframe is &quot;STATEFP&quot;.
If you wanted to return just the geometries for Nelson County, Kentucky (which has a fips code of &quot;179&quot;),
then you assign 'express' equal to: expression(COUNTYFP == &quot;179&quot;). The expression will be
evaluated and only the landmark geometries for Nelson County will be returned.</p>
</td></tr>
<tr><td><code id="tiger_landmarks_sf_+3A_check_na">check_na</code></td>
<td>
<p>A logical which if <code>TRUE</code> will remove rows that have missing values for any of the columns.
The default is to not check the columns for <code>NA</code> values.
</p>
<p><strong>Note: Vintage must be greater than 2010.</strong></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns simple feature (sf) landmark related geometric polygons provided
by the US Census Bureau's TIGER/Line Shapefiles database. See
<a href="https://r-spatial.github.io/sf/articles/sf1.html">Simple Features for R</a>
for more information on simple features. Along with the geometries, additional landmark related
variables are provided.  See
<a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_F-R.pdf">Appendix K-1.K-2, Record Layout: Area/Point Landmark Shapefile</a>
for a description of landmark related area and point variables of the sf file.
For further information on the Census Bureau's shape files see
<a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2021/TGRSHP2021_TechDoc_Ch3.pdf">About the 2021 TIGER/Line Shapefiles</a>.
From <a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_Ch4.pdf">Chapter 4.11 Landmark (Area and Point</a> &ndash;
&quot;The Census Bureau includes landmarks in the MAF/TIGER System to locate special features and help
enumerators during field operations. Some of the more common landmark types include area landmarks
(e.g., airports, cemeteries, parks, and educational facilities) and point landmarks (e.g., schools and
churches)&quot;
</p>
<p>The function returns the simple feature object which can easily be mapped (see <a href="https://github.com/deandevl/RplotterPkg">RplotterPkg::create_sf_plot()</a>) or
joined with US Census Bureau demographic data via the GEOID value.
</p>
<p>Some earlier vintages may have NA for the crs so you may need to specify the 'transform_crs' to 3426.  Also
you may be interested in using a state level crs. See <a href="https://epsg.io/">epsg.io</a> to search worldwide for crs.
</p>


<h3>Value</h3>

<p>A data frame object of class sf
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(httr)
library(sf)
library(data.table)
library(withr)
library(usmap)
library(RcensusPkg)

# Get the sf object for landmarks in the state of Kentucky
# Define a temporary, self deleting output folder for the downloaded shapefiles
output_dir &lt;- withr::local_tempdir()
if(!dir.exists(output_dir)){
  dir.create(output_dir)
}

# Get the fips code for the state
kentucky_fips &lt;- usmap::fips(state = "kentucky")

# Get the "point" landmarks for Kentucky
kentucky_landmarks_sf &lt;- RcensusPkg::tiger_landmarks_sf(
  state = kentucky_fips,
  entity = "point",
  check_na = TRUE,
  output_dir = output_dir,
  delete_files = FALSE
)

</code></pre>

<hr>
<h2 id='tiger_places_sf'>tiger_places_sf</h2><span id='topic+tiger_places_sf'></span>

<h3>Description</h3>

<p>This function performs three tasks:
</p>

<ol>
<li><p> Download to an output directory a zip file from the TIGER/Line Shapefiles database.
</p>
</li>
<li><p> Unzip the zip file and locate the shape file of interest.
</p>
</li>
<li><p> Read and convert the shape file to a simple feature object.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>tiger_places_sf(
  state = NULL,
  output_dir = tempdir(),
  delete_files = TRUE,
  vintage = 2020,
  general = FALSE,
  set_crs = NULL,
  transform_crs = NULL,
  sf_info = FALSE,
  do_progress = FALSE,
  shapefile = NULL,
  express = NULL,
  check_na = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tiger_places_sf_+3A_state">state</code></td>
<td>
<p>The required two-digit FIPS code for the state of interest.
See <a href="https://cran.r-project.org/package=usmap">usmap::fips function</a> for finding FIPS codes.</p>
</td></tr>
<tr><td><code id="tiger_places_sf_+3A_output_dir">output_dir</code></td>
<td>
<p>A full directory path where the shapefile and its associated files will be downloaded.
The default is the directory defined by the value returned by <code>tempdir()</code>.</p>
</td></tr>
<tr><td><code id="tiger_places_sf_+3A_delete_files">delete_files</code></td>
<td>
<p>A logical which if TRUE will delete the shapefile and associated files in 'output_dir'.
The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="tiger_places_sf_+3A_vintage">vintage</code></td>
<td>
<p>A numeric that sets the vintage of interest. The default is 2020.
The value should be greater than 2010.</p>
</td></tr>
<tr><td><code id="tiger_places_sf_+3A_general">general</code></td>
<td>
<p>A logical which if <code>TRUE</code> will download a less detailed, more generalized version of the places geometries.</p>
</td></tr>
<tr><td><code id="tiger_places_sf_+3A_set_crs">set_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls sf::st_crs() to set the crs of the geometries and transforms them.</p>
</td></tr>
<tr><td><code id="tiger_places_sf_+3A_transform_crs">transform_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls <code>sf::st_transform()</code>
to perform a crs transform of the geometries. Note that the crs of the shapefile must not be NA.</p>
</td></tr>
<tr><td><code id="tiger_places_sf_+3A_sf_info">sf_info</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays info on the resulting simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_places_sf_+3A_do_progress">do_progress</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays a progress bar during the download.</p>
</td></tr>
<tr><td><code id="tiger_places_sf_+3A_shapefile">shapefile</code></td>
<td>
<p>A full file path to a shapefile folder with its unzipped files to be processed instead of downloading.</p>
</td></tr>
<tr><td><code id="tiger_places_sf_+3A_express">express</code></td>
<td>
<p>A logical expression object used to filter the resultant simple feature dataframe.
For example, one of the columns of the resultant simple feature dataframe is &quot;NAME&quot; for major places.
Say we wanted to return just the geometries for major places in Kentucky such as &quot;Bowling Green&quot; and &quot;Louisville&quot;.
We would assign 'express' equal to: expression(NAME %in% c(&quot;Bowling Green&quot;, &quot;Louisville&quot; )). The expression will be
evaluated and only the geometries for the two places will be returned.</p>
</td></tr>
<tr><td><code id="tiger_places_sf_+3A_check_na">check_na</code></td>
<td>
<p>A logical which if <code>TRUE</code> will remove rows that have missing values for any of the columns.
The default is to not check the columns for <code>NA</code> values.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns simple feature (sf) places related geometric polygons provided
by the US Census Bureau's TIGER/Line Shapefiles database. See
<a href="https://r-spatial.github.io/sf/articles/sf1.html">Simple Features for R</a>
for more information on simple features. Along with the geometries, additional places related
variables are provided.  See
<a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_F-R.pdf">Appendix I-5. Record Layout: Place State-based Shapefile</a>
for a description of place related variables of the sf file.
For further information on the Census Bureau's shape files see
<a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2021/TGRSHP2021_TechDoc_Ch3.pdf">About the 2021 TIGER/Line Shapefiles</a>.
From <a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_Ch4.pdf">4.14 Places – Incorporated Places and Census Designated Places</a> &ndash;
</p>
<p>&quot;Incorporated Places: An incorporated place provides governmental functions
for a concentration of people. Incorporated places may extend across county and county subdivision
boundaries, but never across state boundaries. An incorporated place usually is a city, town, village, or
borough, but can have other legal descriptions.&quot;
</p>
<p>&quot;Census Designated Places (CDPs): CDPs are the statistical counterparts of incorporated places. CDPs are settled concentrations of
population that are identifiable by name but not legally incorporated under the laws of the state in which
the CDPs are located.&quot;
</p>
<p>The function returns the simple feature object which can easily be mapped (see <a href="https://github.com/deandevl/RplotterPkg">RplotterPkg::create_sf_plot()</a>) or
joined with US Census Bureau demographic data via the GEOID value.
</p>
<p>Some earlier vintages may have NA for the crs so you may need to specify the 'crs_transform' to 3426.  Also
you may be interested in using a state level crs.  See <a href="https://epsg.io/">epsg.io</a> to search worldwide for crs.
</p>


<h3>Value</h3>

<p>A data frame object of class sf
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(httr)
library(sf)
library(data.table)
library(withr)
library(usmap)
library(RcensusPkg)

# Get the major places locations in the state of Kentucky
# Define a temporary, self deleting output folder for the downloaded shapefiles
output_dir &lt;- withr::local_tempdir()
if(!dir.exists(output_dir)){
  dir.create(output_dir)
}

# Get the fips code for the state
kentucky_fips &lt;- usmap::fips(state = "kentucky")

# Create a filter expression to get select places
major_places_express &lt;- expression(NAME %in% c(
  "Bardstown",
  "Bowling Green",
  "Louisville",
  "Versailles",
  "Owensboro",
  "Frankfort",
  "Elizabethtown",
  "Danville"
))

# Get the sf object and the geometric locations of the selected places
kentucky_places_sf &lt;- RcensusPkg::tiger_places_sf(
  state = kentucky_fips,
  express = major_places_express,
  general = TRUE,
  output_dir = output_dir,
  delete_files = FALSE
)

</code></pre>

<hr>
<h2 id='tiger_roads_sf'>tiger_roads_sf</h2><span id='topic+tiger_roads_sf'></span>

<h3>Description</h3>

<p>This function performs three tasks:
</p>

<ol>
<li><p> Download to an output directory a zip file from the TIGER/Line Shapefiles database.
</p>
</li>
<li><p> Unzip the zip file and locate the shape file of interest.
</p>
</li>
<li><p> Read and convert the shape file to a simple feature object.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>tiger_roads_sf(
  state = NULL,
  county = NULL,
  output_dir = tempdir(),
  delete_files = TRUE,
  vintage = 2020,
  entity = "us_roads",
  set_crs = NULL,
  transform_crs = NULL,
  sf_info = FALSE,
  do_progress = FALSE,
  shapefile = NULL,
  datafile = NULL,
  datafile_key = NULL,
  sf_key = "GEOID",
  express = NULL,
  check_na = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tiger_roads_sf_+3A_state">state</code></td>
<td>
<p>A required 2-digit FIPS code for the state of interest.
See <a href="https://cran.r-project.org/package=usmap">usmap::fips function</a> for finding FIPS codes.</p>
</td></tr>
<tr><td><code id="tiger_roads_sf_+3A_county">county</code></td>
<td>
<p>The <em>three-digit</em> FIPS code for the county of interest.</p>
</td></tr>
<tr><td><code id="tiger_roads_sf_+3A_output_dir">output_dir</code></td>
<td>
<p>A full directory path where the shapefile and its associated files will be downloaded.
The default is the directory defined by the value returned by <code>tempdir()</code>.</p>
</td></tr>
<tr><td><code id="tiger_roads_sf_+3A_delete_files">delete_files</code></td>
<td>
<p>A logical which if <code>TRUE</code> will delete the shapefile and associated files in 'output_dir'.
The default is TRUE.</p>
</td></tr>
<tr><td><code id="tiger_roads_sf_+3A_vintage">vintage</code></td>
<td>
<p>A numeric that sets the vintage of interest. The default is 2020.
The value should be greater than 2010.</p>
</td></tr>
<tr><td><code id="tiger_roads_sf_+3A_entity">entity</code></td>
<td>
<p>A string that defines the category of road geometries to return. Acceptable value are
&quot;us_roads&quot; (state &amp; county arguments not required), &quot;state_roads&quot; (state argument required),
&quot;county_roads&quot; (state &amp; county arguments required).</p>
</td></tr>
<tr><td><code id="tiger_roads_sf_+3A_set_crs">set_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls <code>sf::st_crs()</code> to set the crs of the geometries and transforms them.</p>
</td></tr>
<tr><td><code id="tiger_roads_sf_+3A_transform_crs">transform_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls <code>sf::st_transform()</code>
to perform a crs transform of the geometries. Note that the crs of the shapefile must not be <code>NA</code>.</p>
</td></tr>
<tr><td><code id="tiger_roads_sf_+3A_sf_info">sf_info</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays info on the resulting simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_roads_sf_+3A_do_progress">do_progress</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays a progress bar during the download.</p>
</td></tr>
<tr><td><code id="tiger_roads_sf_+3A_shapefile">shapefile</code></td>
<td>
<p>A full file path to a shapefile folder with its unzipped files to be processed instead of downloading.</p>
</td></tr>
<tr><td><code id="tiger_roads_sf_+3A_datafile">datafile</code></td>
<td>
<p>A dataframe containing data that should be joined with this function's resultant simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_roads_sf_+3A_datafile_key">datafile_key</code></td>
<td>
<p>The column name from 'datafile' dataframe used to key with the 'sf_key' column of the resultant simple feature dataframe.</p>
</td></tr>
<tr><td><code id="tiger_roads_sf_+3A_sf_key">sf_key</code></td>
<td>
<p>The column from the resultant dataframe used to key with the 'datafile' dataframe.</p>
</td></tr>
<tr><td><code id="tiger_roads_sf_+3A_express">express</code></td>
<td>
<p>A logical expression object used to filter the resultant simple feature dataframe.
For example, one of the columns of the resultant simple feature dataframe is &quot;STATEFP&quot;.
If you wanted to return just the geometries for Florida (which has a fips code of &quot;12&quot;),
then you assign 'express' equal to: expression(STATEFP == &quot;12&quot;). The expression will be
evaluated and only the geometries for Florida will be returned.</p>
</td></tr>
<tr><td><code id="tiger_roads_sf_+3A_check_na">check_na</code></td>
<td>
<p>A logical which if <code>TRUE</code> will remove rows that have missing values for any of the columns.
The default is to not check the columns for <code>NA</code> values.
</p>
<p><strong>Note: vintage must be greater than 2010</strong></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns simple feature (sf) of US Census roads boundary related geometric polygons,
provided by the US Census Bureau's TIGER/Line Shapefiles database. See
<a href="https://r-spatial.github.io/sf/articles/sf1.html">Simple Features for R</a>
for more information on simple features. Along with the geometries, additional roads related
variables are provided.  See <a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_F-R.pdf">Appendix L-3. Record Layouts: Roads Shapefile)</a>
for a description of road related variables of the sf file. For further information on the Census Bureau's shape files see
<a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2021/TGRSHP2021_TechDoc_Ch3.pdf">About the 2021 TIGER/Line Shapefiles</a>.
From <a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_Ch4.pdf">Chapter 4.12.3 Roads – Primary, Secondary and All Roads</a> &ndash;
&quot;The primary and secondary roads shapefile contains all linear street features with MTFCCs of primary
roads (S1100) or secondary roads (S1200) in the MAF/TIGER System. Secondary roads are main
arteries, usually in the U.S. highway, state highway, or county highway system. These roads have one or
more lanes of traffic in each direction, may or may not be divided, and usually have at-grade intersections
with many other roads and driveways. These roads often have both a local name and a route number.&quot;
</p>
<p>The function returns the simple feature object which can easily be mapped (see <a href="https://github.com/deandevl/RplotterPkg">RplotterPkg::create_sf_plot()</a>) or
joined with US Census Bureau demographic data via the GEOID value.
</p>
<p>Some earlier vintages may have NA for the crs so you may need to specify the 'crs_transform' to 3426.  Also
you may be interested in using a state level crs. See <a href="https://epsg.io/">epsg.io</a> to search worldwide for crs.
</p>


<h3>Value</h3>

<p>A data frame object of class sf
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(httr)
library(sf)
library(data.table)
library(withr)
library(usmap)
library(RcensusPkg)

# Get the sf geometries of roads in Ohio
# Get the fips for Ohio
oh_fips &lt;- usmap::fips(state = "ohio")

# Define a temporary, self deleting output folder for the downloaded shapefiles
output_dir &lt;- withr::local_tempdir()
if(!dir.exists(output_dir)){
  dir.create(output_dir)
}

# Get the sf object
ohio_roads_sf &lt;- RcensusPkg::tiger_roads_sf(
  state = oh_fips,
  entity = "state_roads",
  output_dir = output_dir,
  delete_files = FALSE
)

</code></pre>

<hr>
<h2 id='tiger_states_sf'>tiger_states_sf</h2><span id='topic+tiger_states_sf'></span>

<h3>Description</h3>

<p>This function performs three tasks:
</p>

<ol>
<li><p> Download to an output directory a zip file from the TIGER/Line Shapefiles database.
</p>
</li>
<li><p> Unzip the zip file and locate the shape file of interest.
</p>
</li>
<li><p> Read and convert the shape file to a simple feature object.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>tiger_states_sf(
  output_dir = tempdir(),
  delete_files = TRUE,
  vintage = 2020,
  general = FALSE,
  resol = "500k",
  set_crs = NULL,
  transform_crs = NULL,
  sf_info = FALSE,
  do_progress = FALSE,
  shapefile = NULL,
  datafile = NULL,
  datafile_key = NULL,
  sf_key = "GEOID",
  express = NULL,
  check_na = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tiger_states_sf_+3A_output_dir">output_dir</code></td>
<td>
<p>A full directory path where the shapefile and its associated files will be downloaded.
The default is the directory defined by the value returned by <code>tempdir()</code>.</p>
</td></tr>
<tr><td><code id="tiger_states_sf_+3A_delete_files">delete_files</code></td>
<td>
<p>A logical which if <code>TRUE</code> will delete the shapefile and associated files in 'output_dir'.
The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="tiger_states_sf_+3A_vintage">vintage</code></td>
<td>
<p>A numeric that sets the vintage of interest. The default is 2020.</p>
</td></tr>
<tr><td><code id="tiger_states_sf_+3A_general">general</code></td>
<td>
<p>A logical which if <code>TRUE</code> will download a less detailed, more generalized version of the state geometries.</p>
</td></tr>
<tr><td><code id="tiger_states_sf_+3A_resol">resol</code></td>
<td>
<p>If <code>general</code> is <code>TRUE</code>, then the resolution to return. Acceptable values are strings
&quot;500k&quot;, &quot;5m&quot;, &quot;20m&quot;.</p>
</td></tr>
<tr><td><code id="tiger_states_sf_+3A_set_crs">set_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls <code>sf::st_crs()</code> to set the crs of the geometries and transforms them.</p>
</td></tr>
<tr><td><code id="tiger_states_sf_+3A_transform_crs">transform_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls <code>sf::st_transform()</code>
to perform a crs transform of the geometries. Note that the crs of the shapefile must not be <code>NA</code>.</p>
</td></tr>
<tr><td><code id="tiger_states_sf_+3A_sf_info">sf_info</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays info on the resulting simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_states_sf_+3A_do_progress">do_progress</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays a progress bar during the download.</p>
</td></tr>
<tr><td><code id="tiger_states_sf_+3A_shapefile">shapefile</code></td>
<td>
<p>A full file path to a shapefile folder with its unzipped files to be processed instead of downloading.</p>
</td></tr>
<tr><td><code id="tiger_states_sf_+3A_datafile">datafile</code></td>
<td>
<p>A dataframe containing data that should be joined with this function's resultant simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_states_sf_+3A_datafile_key">datafile_key</code></td>
<td>
<p>The column name from 'datafile' dataframe used to key with the 'sf_key' column of the resultant simple feature dataframe.</p>
</td></tr>
<tr><td><code id="tiger_states_sf_+3A_sf_key">sf_key</code></td>
<td>
<p>The column from the resultant sf dataframe used to key with the 'datafile' dataframe.</p>
</td></tr>
<tr><td><code id="tiger_states_sf_+3A_express">express</code></td>
<td>
<p>A logical expression object used to filter the resultant simple feature dataframe.
For example, one of the columns of the resultant simple feature dataframe is &quot;STATEFP&quot;.
If you wanted to return just the geometries for Florida (which has a fips code of &quot;12&quot;),
then you assign 'express' equal to: <code>expression(STATEFP == "12")</code>. The expression will be
evaluated and only the geometries for Florida will be returned.</p>
</td></tr>
<tr><td><code id="tiger_states_sf_+3A_check_na">check_na</code></td>
<td>
<p>A logical which if <code>TRUE</code> will remove rows that have missing values for any of the columns.
The default is to not check the columns for <code>NA</code> values.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns simple feature (sf) of state boundary related geometric polygons,
provided by the US Census Bureau's TIGER/Line Shapefiles database. See
<a href="https://r-spatial.github.io/sf/articles/sf1.html">Simple Features for R</a>
for more information on simple features. Along with the geometries, additional state related
variables are provided.  See <a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_F-R.pdf">Appendix P-5. Record Layout: State and Equivalent Entity National Shapefile)</a>
for a description of state related variables of the sf file. For further information on the Census Bureau's shape files see
<a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2021/TGRSHP2021_TechDoc_Ch3.pdf">About the 2021 TIGER/Line Shapefiles</a>.
From <a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_Ch4.pdf">Chapter 4.17 States and State Equivalent Entities</a> &ndash;
&quot;States and equivalent entities are the primary governmental divisions of the United States. In addition to
the fifty states, the Census Bureau treats the District of Columbia, Puerto Rico, and the Island Areas
(American Samoa, the Commonwealth of the Northern Mariana Islands, Guam, and the U.S. Virgin
Islands) as statistical equivalents of states for the purpose of data presentation.&quot;
</p>
<p>A more generalized, recognizable version of the state geometries that has less download size is also available.  For more information on cartographic boundary files see
<a href="https://www.census.gov/programs-surveys/geography/technical-documentation/naming-convention/cartographic-boundary-file.html">Cartographic Boundary File Description</a>.
These files are available for vintages greater than 2013 with resolution 1:500k, 1:5m, 1:20m meters.
</p>
<p>The function returns the simple feature object which can easily be mapped (see <a href="https://github.com/deandevl/RplotterPkg">RplotterPkg::create_sf_plot()</a>) or
joined with US Census Bureau demographic data. To help incorporate data files, this function
has a 'datafile' parameter which will be joined with the resultant simple feature object. The only
requirement is that a common &quot;key&quot; for joining exist between the data dataframe and the simple feature dataframe.
</p>
<p>Some earlier vintages may have NA for the crs so you may need to specify the 'crs_transform' to 3426.  Also
you may be interested in using a state level crs. See <a href="https://epsg.io/">epsg.io</a> to search worldwide for crs.
</p>


<h3>Value</h3>

<p>A data frame object of class sf (simple feature)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(usmap)
library(sf)
library(data.table)
library(httr)
library(withr)
library(RcensusPkg)

# Get the fips code for Florida
florida_fips &lt;- usmap::fips(state = "florida")
#
# Define an expression that will filter out Florida from
#   the simple feature obtained from the downloaded/converted
#   tiger states shapefile.
express &lt;- parse(text = paste0("STATEFP == ", '"', florida_fips, '"'))
#
# Define a temporary output folder for the downloaded shapefiles
output_dir &lt;- withr::local_tempdir()
if(!dir.exists(output_dir)){
  dir.create(output_dir)
}

# Download, convert, and filter the states shapefile for Florida
#   using the expression.
florida_general_sf &lt;- RcensusPkg::tiger_states_sf(
  general = TRUE,
  express = express,
  output_dir = output_dir,
  delete_files = FALSE
)

</code></pre>

<hr>
<h2 id='tiger_tracts_sf'>tiger_tracts_sf</h2><span id='topic+tiger_tracts_sf'></span>

<h3>Description</h3>

<p>This function performs three tasks:
</p>

<ol>
<li><p> Download to an output directory a zip file from the TIGER/Line Shapefiles database.
</p>
</li>
<li><p> Unzip the zip file and locate the shape file of interest.
</p>
</li>
<li><p> Read and convert the shape file to a simple feature object.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>tiger_tracts_sf(
  state = NULL,
  output_dir = tempdir(),
  delete_files = TRUE,
  vintage = 2020,
  general = FALSE,
  set_crs = NULL,
  transform_crs = NULL,
  sf_info = FALSE,
  do_progress = FALSE,
  shapefile = NULL,
  datafile = NULL,
  datafile_key = NULL,
  sf_key = "GEOID",
  express = NULL,
  check_na = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tiger_tracts_sf_+3A_state">state</code></td>
<td>
<p>A required two-digit FIPS code for the state of interest.
See <a href="https://cran.r-project.org/package=usmap">usmap::fips function</a> for finding FIPS codes.</p>
</td></tr>
<tr><td><code id="tiger_tracts_sf_+3A_output_dir">output_dir</code></td>
<td>
<p>A full directory path where the shapefile and its associated files will be downloaded.
The default is the directory defined by the value returned by <code>tempdir()</code>.</p>
</td></tr>
<tr><td><code id="tiger_tracts_sf_+3A_delete_files">delete_files</code></td>
<td>
<p>A logical which if <code>TRUE</code> will delete the shapefile and associated files in 'output_dir'.
The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="tiger_tracts_sf_+3A_vintage">vintage</code></td>
<td>
<p>A required numeric that sets the vintage of interest. The default is 2020.</p>
</td></tr>
<tr><td><code id="tiger_tracts_sf_+3A_general">general</code></td>
<td>
<p>A logical which if <code>TRUE</code> will download a less detailed, more generalized version of the tract geometries.</p>
</td></tr>
<tr><td><code id="tiger_tracts_sf_+3A_set_crs">set_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls <code>sf::st_crs()</code> to set the crs of the geometries and transforms them.</p>
</td></tr>
<tr><td><code id="tiger_tracts_sf_+3A_transform_crs">transform_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls <code>sf::st_transform()</code>
to perform a crs transform of the geometries. Note that the crs of the shapefile must not be NA.</p>
</td></tr>
<tr><td><code id="tiger_tracts_sf_+3A_sf_info">sf_info</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays info on the resulting simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_tracts_sf_+3A_do_progress">do_progress</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays a progress bar during the download.</p>
</td></tr>
<tr><td><code id="tiger_tracts_sf_+3A_shapefile">shapefile</code></td>
<td>
<p>A full file path to a shapefile folder with its unzipped files to be processed instead of downloading.</p>
</td></tr>
<tr><td><code id="tiger_tracts_sf_+3A_datafile">datafile</code></td>
<td>
<p>A dataframe containing data that should be joined with this function's resultant simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_tracts_sf_+3A_datafile_key">datafile_key</code></td>
<td>
<p>The column name from 'datafile' dataframe used to key with the 'sf_key' column of the resultant simple feature dataframe.</p>
</td></tr>
<tr><td><code id="tiger_tracts_sf_+3A_sf_key">sf_key</code></td>
<td>
<p>The column from the resultant dataframe used to key with the 'datafile' dataframe.</p>
</td></tr>
<tr><td><code id="tiger_tracts_sf_+3A_express">express</code></td>
<td>
<p>A logical expression object used to filter the resultant simple feature dataframe.
For example, one of the columns of the resultant simple feature dataframe is &quot;COUNTYFP&quot;.
If you wanted to return just the geometries for Los Alamos, New Mexico (which has a fips code of &quot;028&quot;),
then you assign 'express' equal to: expression(COUNTYFP == &quot;028&quot;). The expression will be
evaluated and only the tract geometries for Los Alamos will be returned.</p>
</td></tr>
<tr><td><code id="tiger_tracts_sf_+3A_check_na">check_na</code></td>
<td>
<p>A logical which if <code>TRUE</code> will remove rows that have missing values for any of the columns.
The default is to not check the columns for <code>NA</code> values.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns simple feature (sf) of US Census tract boundary related geometric polygons,
provided by the US Census Bureau's TIGER/Line Shapefiles database. See
<a href="https://r-spatial.github.io/sf/articles/sf1.html">Simple Features for R</a>
for more information on simple features. Along with the geometries, additional tract related
variables are provided.  See <a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_F-R.pdf">Appendix G-3. Record Layout: Census Tract State-based Shapefile)</a>
for a description of tract related variables of the sf file. For further information on the Census Bureau's shape files see
<a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2021/TGRSHP2021_TechDoc_Ch3.pdf">About the 2021 TIGER/Line Shapefiles</a>.
From <a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_Ch4.pdf">Chapter 4.4 Census Tracts</a> &ndash;
&quot;Census tracts are small and relatively permanent statistical subdivisions of a county or equivalent entity.
Local participants review and update census tracts prior to each decennial census as part of the Census
Bureau’s PSAP.&quot;
</p>
<p>A more generalized, recognizable version of the tract geometries that has less download size is also available.  For more information on cartographic boundary files see
<a href="https://www.census.gov/programs-surveys/geography/technical-documentation/naming-convention/cartographic-boundary-file.html">Cartographic Boundary File Description</a>.
These files are available for vintages greater than 2013 with resolution 1:500k meters.
</p>
<p>The function returns the simple feature object which can easily be mapped (see <a href="https://github.com/deandevl/RplotterPkg">RplotterPkg::create_sf_plot()</a>) or
joined with US Census Bureau demographic data.  To help incorporate data files, this function
has a <code>datafile</code> parameter which will be joined with the resultant simple feature object. The only
requirement is that a common &quot;key&quot; for joining exist between the data dataframe and the simple feature dataframe.
</p>
<p>Some earlier vintages may have NA for the crs so you may need to specify the 'crs_transform' to 3426.  Also
you may be interested in using a state level crs. See <a href="https://epsg.io/">epsg.io</a> to search worldwide for crs.
</p>


<h3>Value</h3>

<p>A data frame object of class sf (simple feature)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(httr)
library(sf)
library(data.table)
library(usmap)
library(withr)
library(RcensusPkg)

# Get the generalized tract geometries for Los Alamos, New Mexico
# Determine the fips codes for New Mexico and Los Alamos
nm_los_alamos_fips &lt;- usmap::fips(state = "new mexico", county = "los alamos")
nm_fips &lt;- substr(nm_los_alamos_fips, 1, 2)
los_alamos_fips &lt;- substr(nm_los_alamos_fips, 3, 5)

# Create an expression to filter just the Los Alamos geometries
express &lt;- parse(text = paste0("COUNTYFP == ", '"', los_alamos_fips, '"'))

# Define a temporary output folder for the downloaded shapefiles
output_dir &lt;- withr::local_tempdir()
if(!dir.exists(output_dir)){
  dir.create(output_dir)
}

# Get the tract geometries for just Los Alamos
losalamos_tracts_sf &lt;- RcensusPkg::tiger_tracts_sf(
  state = nm_fips,
  general = TRUE,
  express = express,
  output_dir = output_dir,
  delete_files = FALSE
)

</code></pre>

<hr>
<h2 id='tiger_urban_area_sf'>tiger_urban_area_sf</h2><span id='topic+tiger_urban_area_sf'></span>

<h3>Description</h3>

<p>This function performs three tasks:
</p>

<ol>
<li><p> Download to an output directory a zip file from the TIGER/Line Shapefiles database.
</p>
</li>
<li><p> Unzip the zip file and locate the shape file of interest.
</p>
</li>
<li><p> Read and convert the shape file to a simple feature object.
</p>
</li></ol>

<p>The function returns geometries for the Census Bureau's defined &quot;urban areas&quot;
across the entire US
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tiger_urban_area_sf(
  output_dir = tempdir(),
  delete_files = TRUE,
  vintage = 2020,
  general = FALSE,
  resol = "500k",
  set_crs = NULL,
  transform_crs = NULL,
  sf_info = FALSE,
  do_progress = FALSE,
  shapefile = NULL,
  datafile = NULL,
  datafile_key = NULL,
  sf_key = "GEOID",
  check_na = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tiger_urban_area_sf_+3A_output_dir">output_dir</code></td>
<td>
<p>A full directory path where the shapefile and its associated files will be downloaded.
The default is the directory defined by the value returned by <code>tempdir()</code>.</p>
</td></tr>
<tr><td><code id="tiger_urban_area_sf_+3A_delete_files">delete_files</code></td>
<td>
<p>A logical which if <code>TRUE</code> will delete the shapefile and associated files in 'output_dir'.
The default is TRUE.</p>
</td></tr>
<tr><td><code id="tiger_urban_area_sf_+3A_vintage">vintage</code></td>
<td>
<p>A numeric that sets the vintage of interest. The default is 2020.</p>
</td></tr>
<tr><td><code id="tiger_urban_area_sf_+3A_general">general</code></td>
<td>
<p>A logical which if <code>TRUE</code> will download a less detailed, more generalized version of the state geometries.</p>
</td></tr>
<tr><td><code id="tiger_urban_area_sf_+3A_resol">resol</code></td>
<td>
<p>If 'general' is <code>TRUE</code>, then the resolution to return. Acceptable values are strings
&quot;500k&quot;, &quot;5m&quot;, &quot;20m&quot;.</p>
</td></tr>
<tr><td><code id="tiger_urban_area_sf_+3A_set_crs">set_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls <code>sf::st_crs()</code> to set the crs of the geometries and transforms them.</p>
</td></tr>
<tr><td><code id="tiger_urban_area_sf_+3A_transform_crs">transform_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls <code>sf::st_transform()</code>
to perform a crs transform of the geometries. Note that the crs of the shapefile must not be <code>NA</code>.</p>
</td></tr>
<tr><td><code id="tiger_urban_area_sf_+3A_sf_info">sf_info</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays info on the resulting simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_urban_area_sf_+3A_do_progress">do_progress</code></td>
<td>
<p>A logical which if TRUE displays a progress bar during the download.</p>
</td></tr>
<tr><td><code id="tiger_urban_area_sf_+3A_shapefile">shapefile</code></td>
<td>
<p>A full file path to a shapefile folder with its unzipped files to be processed instead of downloading.</p>
</td></tr>
<tr><td><code id="tiger_urban_area_sf_+3A_datafile">datafile</code></td>
<td>
<p>A dataframe containing data that should be joined with this function's resultant simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_urban_area_sf_+3A_datafile_key">datafile_key</code></td>
<td>
<p>The column name from 'datafile' dataframe used to key with the 'sf_key' column of the resultant simple feature dataframe.</p>
</td></tr>
<tr><td><code id="tiger_urban_area_sf_+3A_sf_key">sf_key</code></td>
<td>
<p>The column from the resultant dataframe used to key with the 'datafile' dataframe.</p>
</td></tr>
<tr><td><code id="tiger_urban_area_sf_+3A_check_na">check_na</code></td>
<td>
<p>A logical which if <code>TRUE</code> will remove rows that have missing values for any of the columns.
The default is to not check the columns for <code>NA</code> values.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns simple feature(sf) of the Census Bureau's defined &quot;urban area&quot; boundary related geometric polygons,
provided by the US Census Bureau's TIGER/Line Shapefiles database. See
<a href="https://r-spatial.github.io/sf/articles/sf1.html">Simple Features for R</a>
for more information on simple features.
</p>
<p>A more generalized, recognizable version of the CBSA geometries that has less download size is also available.  For more information on cartographic boundary files see
<a href="https://www.census.gov/programs-surveys/geography/technical-documentation/naming-convention/cartographic-boundary-file.html">Cartographic Boundary File Description</a>.
These files are available for vintages greater than 2009 with resolution 1:500k, 1:5m, 1:20m meters.
For descriptive information on CBSA see <a href="https://www.census.gov/programs-surveys/metro-micro/about.html">About</a>.
</p>
<p>The function returns the simple feature object which can easily be mapped (see <a href="https://github.com/deandevl/RplotterPkg">RplotterPkg::create_sf_plot()</a>) or
joined with US Census Bureau demographic data. To help incorporate data files, this function
has a 'datafile' parameter which will be joined with the resultant simple feature object. The only
requirement is that a common &quot;key&quot; for joining exist between the data dataframe and the simple feature dataframe.
</p>


<h3>Value</h3>

<p>A data frame object of class sf
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(httr)
library(sf)
library(data.table)
library(withr)
library(RcensusPkg)

# Get the defined urban areas for 2019
# Define a temporary, self deleting output folder for the downloaded shapefiles
output_dir &lt;- withr::local_tempdir()
if(!dir.exists(output_dir)){
  dir.create(output_dir)
}

us_urban_areas_sf &lt;- RcensusPkg::tiger_urban_area_sf(
  output_dir = output_dir,
  vintage = 2019,
  general = TRUE,
  delete_files = FALSE
)

</code></pre>

<hr>
<h2 id='tiger_water_sf'>tiger_water_sf</h2><span id='topic+tiger_water_sf'></span>

<h3>Description</h3>

<p>This function performs three tasks:
</p>

<ol>
<li><p> Download to an output directory a zip file from the TIGER/Line Shapefiles database.
</p>
</li>
<li><p> Unzip the zip file and locate the shape file of interest.
</p>
</li>
<li><p> Read and convert the shape file to a simple feature object.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>tiger_water_sf(
  state = NULL,
  county = NULL,
  output_dir = tempdir(),
  delete_files = TRUE,
  vintage = 2020,
  entity = "area",
  set_crs = NULL,
  transform_crs = NULL,
  sf_info = FALSE,
  do_progress = FALSE,
  shapefile = NULL,
  datafile = NULL,
  datafile_key = NULL,
  sf_key = "GEOID",
  express = NULL,
  check_na = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tiger_water_sf_+3A_state">state</code></td>
<td>
<p>The two-digit FIPS code for the state of interest.
See <a href="https://cran.r-project.org/package=usmap">usmap::fips function</a> for finding FIPS codes.</p>
</td></tr>
<tr><td><code id="tiger_water_sf_+3A_county">county</code></td>
<td>
<p>The <em>three-digit</em> FIPS code for the county of interest.</p>
</td></tr>
<tr><td><code id="tiger_water_sf_+3A_output_dir">output_dir</code></td>
<td>
<p>A full directory path where the shapefile and its associated files will be downloaded.
The default is the directory defined by the value returned by <code>tempdir()</code>.</p>
</td></tr>
<tr><td><code id="tiger_water_sf_+3A_delete_files">delete_files</code></td>
<td>
<p>A logical which if <code>TRUE</code> will delete the shapefile and associated files in 'output_dir''.
The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="tiger_water_sf_+3A_vintage">vintage</code></td>
<td>
<p>A numeric that sets the vintage of interest. The default is 2020.
The value should be greater than 2010.</p>
</td></tr>
<tr><td><code id="tiger_water_sf_+3A_entity">entity</code></td>
<td>
<p>A character string that sets the specific water entity of interest. The
acceptable values are &quot;area&quot;, &quot;linear&quot;, or &quot;coastline&quot;. The default is &quot;area&quot;.</p>
</td></tr>
<tr><td><code id="tiger_water_sf_+3A_set_crs">set_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls sf::st_crs() to set the crs of the geometries and transforms them.</p>
</td></tr>
<tr><td><code id="tiger_water_sf_+3A_transform_crs">transform_crs</code></td>
<td>
<p>A numeric or character string which if non-NULL calls sf::st_transform()
to perform a crs transform of the geometries. Note that the crs of the shapefile must not be <code>NA</code>.</p>
</td></tr>
<tr><td><code id="tiger_water_sf_+3A_sf_info">sf_info</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays info on the resulting simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_water_sf_+3A_do_progress">do_progress</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays a progress bar during the download.</p>
</td></tr>
<tr><td><code id="tiger_water_sf_+3A_shapefile">shapefile</code></td>
<td>
<p>A full file path to a shapefile folder with its unzipped files to be processed instead of downloading.</p>
</td></tr>
<tr><td><code id="tiger_water_sf_+3A_datafile">datafile</code></td>
<td>
<p>A dataframe containing data that should be joined with this function's resultant simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_water_sf_+3A_datafile_key">datafile_key</code></td>
<td>
<p>The column name from 'datafile' dataframe used to key with the 'sf_key' column of the resultant simple feature dataframe.</p>
</td></tr>
<tr><td><code id="tiger_water_sf_+3A_sf_key">sf_key</code></td>
<td>
<p>The column from the resultant dataframe used to key with the 'datafile' dataframe.</p>
</td></tr>
<tr><td><code id="tiger_water_sf_+3A_express">express</code></td>
<td>
<p>A logical expression object used to filter the resultant simple feature dataframe.
For example, one of the columns of the resultant simple feature dataframe is &quot;STATEFP&quot;.
If you wanted to return just the geometries for Florida (which has a fips code of &quot;12&quot;),
then you assign 'express' equal to: expression(STATEFP == &quot;12&quot;). The expression will be
evaluated and only the geometries for Florida will be returned.</p>
</td></tr>
<tr><td><code id="tiger_water_sf_+3A_check_na">check_na</code></td>
<td>
<p>A logical which if <code>TRUE</code> will remove rows that have missing values for any of the columns.
The default is to not check the columns for <code>NA</code> values.
</p>
<p><strong>Note: If entity equals &quot;coastline&quot; then the state and county arguments are not required.</strong></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns simple feature (sf) water related geometric polygons provided
by the US Census Bureau's TIGER/Line Shapefiles database. See
<a href="https://r-spatial.github.io/sf/articles/sf1.html">Simple Features for R</a>
for more information on simple features. Along with the geometries, additional water related
variables are provided.  See
<a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_F-R.pdf">Appendix J. Record Layouts: Hydrography (Area and Line)</a>
for a description of water related area and line variables of the sf file. See
<a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_F-R.pdf">Appendix L-2. Record Layout: Coastlines Shapefile</a>
for a description of coastline related variables of the sf file. For further information on the Census Bureau's shape files see
<a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2021/TGRSHP2021_TechDoc_Ch3.pdf">About the 2021 TIGER/Line Shapefiles</a>.
From <a href="https://www2.census.gov/geo/pdfs/maps-data/data/tiger/tgrshp2022/TGRSHP2022_TechDoc_Ch4.pdf">Chapter 4.10 Hydrography (Area and Linear</a>
and 4.12.2 Coastline &ndash;
&quot;The area hydrography shapefile contains the geometry and attributes of both perennial and intermittent
area hydrography features (e.g., ponds, lakes, oceans, swamps, glaciers, and the area covered by large
streams represented as double-line drainage). The linear hydrography shapefile includes
streams/rivers, braided streams, canals, ditches, artificial paths, and aqueducts. A linear hydrography
feature may include edges with both perennial and intermittent persistence&quot;
</p>
<p>The function returns the simple feature object which can easily be mapped (see <a href="https://github.com/deandevl/RplotterPkg">RplotterPkg::create_sf_plot()</a>) or
joined with US Census Bureau demographic data via the GEOID value.
</p>
<p>Some earlier vintages may have NA for the crs so you may need to specify the 'crs_transform' to 3426.  Also
you may be interested in using a state level crs. See <a href="https://epsg.io/">epsg.io</a> to search worldwide for crs.
</p>


<h3>Value</h3>

<p>A data frame object of class sf
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(sf)
library(data.table)
library(httr)
library(usmap)
library(withr)
library(RcensusPkg)

# Get the water areas for a county in Ohio
state_county_fips &lt;- usmap::fips(state = "Ohio", county = "Geauga")
state_fips &lt;- substr(state_county_fips,1,2)
county_fips &lt;- substr(state_county_fips,3,5)
# Define a temporary output folder for the downloaded shapefiles
output_dir &lt;- withr::local_tempdir()
if(!dir.exists(output_dir)){
  dir.create(output_dir)
}
geauga_area_water_sf &lt;- RcensusPkg::tiger_water_sf(
  state = state_fips,
  county = county_fips,
  output_dir = output_dir,
  delete_files = FALSE
)

</code></pre>

<hr>
<h2 id='tiger_zctas_sf'>tiger_zctas_sf</h2><span id='topic+tiger_zctas_sf'></span>

<h3>Description</h3>

<p>This function performs three tasks:
</p>

<ol>
<li><p> Download to an output directory a zip file from the TIGER/Line Shapefiles database.
</p>
</li>
<li><p> Unzip the zip file and locate the shape file of interest.
</p>
</li>
<li><p> Read and convert the shape file to a simple feature object.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>tiger_zctas_sf(
  output_dir = tempdir(),
  delete_files = TRUE,
  vintage = 2020,
  general = FALSE,
  sf_info = FALSE,
  do_progress = FALSE,
  datafile = NULL,
  datafile_key = NULL,
  sf_key = NULL,
  express = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tiger_zctas_sf_+3A_output_dir">output_dir</code></td>
<td>
<p>A full directory path where the shapefile and its associated files will be downloaded.
The default is the directory defined by the value returned by <code>tempdir()</code>.</p>
</td></tr>
<tr><td><code id="tiger_zctas_sf_+3A_delete_files">delete_files</code></td>
<td>
<p>A logical which if <code>TRUE</code> will delete the shapefile and associated files in 'output_dir'.
The default is TRUE.</p>
</td></tr>
<tr><td><code id="tiger_zctas_sf_+3A_vintage">vintage</code></td>
<td>
<p>A numeric that sets the vintage of interest. The default is 2020.</p>
</td></tr>
<tr><td><code id="tiger_zctas_sf_+3A_general">general</code></td>
<td>
<p>A logical which if <code>TRUE</code> will download a less detailed, more generalized version of the county geometries.</p>
</td></tr>
<tr><td><code id="tiger_zctas_sf_+3A_sf_info">sf_info</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays info on the resulting simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_zctas_sf_+3A_do_progress">do_progress</code></td>
<td>
<p>A logical which if <code>TRUE</code> displays a progress bar during the download.</p>
</td></tr>
<tr><td><code id="tiger_zctas_sf_+3A_datafile">datafile</code></td>
<td>
<p>A dataframe containing data that should be joined with this function's resultant simple feature object.</p>
</td></tr>
<tr><td><code id="tiger_zctas_sf_+3A_datafile_key">datafile_key</code></td>
<td>
<p>The column name from 'datafile' dataframe used to key with the 'sf_key' column of the resultant simple feature dataframe.</p>
</td></tr>
<tr><td><code id="tiger_zctas_sf_+3A_sf_key">sf_key</code></td>
<td>
<p>The column from the resultant dataframe used to key with the 'datafile' dataframe.</p>
</td></tr>
<tr><td><code id="tiger_zctas_sf_+3A_express">express</code></td>
<td>
<p>A logical expression object used to filter the resultant simple feature dataframe.
For example, one of the columns of the resultant simple feature dataframe is &quot;STATEFP&quot;.
If you wanted to return just the geometries for Florida (which has a fips code of &quot;12&quot;),
then you assign 'express' equal to: expression(STATEFP == &quot;12&quot;). The expression will be
evaluated and only the geometries for Florida will be returned.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns simple feature (sf) shapefile Zip Code Tabulation Areas(ZCTA) shapefile of the entire US.
</p>


<h3>Value</h3>

<p>A data frame object of class sf
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Beware that downloading and processing Zip Code Tabulation Areas(ZCTA)
  #   shapefiles of the entire US can be time consuming
  library(httr)
  library(sf)
  library(data.table)
  library(withr)
  library(RcensusPkg)

  # Get the sf geometries for the Zip Code Tabulation Area in the county of
  #   Middlesex, MA near Boston
  # Define a temporary, self deleting output folder for the downloaded shapefiles
  output_dir &lt;- withr::local_tempdir()
  if(!dir.exists(output_dir)){
    dir.create(output_dir)
  }

  # Define the codes of interest in a dataframe
  mun_zcta_df &lt;- data.frame(
    name = c(
      "Carlisle", "Concord", "Bedford",
      "Lexington", "Lexington", "Lincoln",
      "Lincoln", "Sudbury", "Wayland",
      "Weston","Waltham"
    ),
    zcta = c(
      "01741","01742","01730",
      "02420","02421","01773",
      "01731","01776","01778",
      "02493","02451"
    )
  )

  # Define an expression to filter the downloaded shapefile
  express &lt;- expression(ZCTA5CE20 %in% mun_zcta_df$zcta)

  # Get the sf geometries
  mun_zcta_sf &lt;- RcensusPkg::tiger_zctas_sf(
    vintage = 2020,
    general = TRUE,
    do_progress = TRUE,
    express = express,
    output_dir = output_dir,
    delete_files = FALSE
  )

## End(Not run)

</code></pre>

<hr>
<h2 id='vote2020'>vote2020 data</h2><span id='topic+vote2020'></span>

<h3>Description</h3>

<p>Dataframe shows national presidential voting results for 2020 by state.
Letters &quot;D&quot; and &quot;R&quot; under the Party column indicate respectively Democrate or Republican
win for a state.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vote2020
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.table</code> (inherits from <code>data.frame</code>) with 61 rows and 22 columns.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
<strong>State</strong> </td><td style="text-align: left;"> character string full state name </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>Party</strong> </td><td style="text-align: left;"> character string with values "D" or "R"
</td>
</tr>

</table>


<hr>
<h2 id='wide_to_long'>wide_to_long</h2><span id='topic+wide_to_long'></span>

<h3>Description</h3>

<p>Reshape a data frame from a &quot;wide&quot; format to a &quot;long&quot; format.
</p>
<p>Function is a helper in calling data.table's melt() function
to reshape a wide data frame to a long form.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wide_to_long(
  dt = NULL,
  id_v = c("NAME", "GEOID"),
  measure_v = NULL,
  variable_name = "variable",
  value_name = "estimate",
  na_rm = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="wide_to_long_+3A_dt">dt</code></td>
<td>
<p>The data frame with a wide collection of column variables.
This parameter is required.</p>
</td></tr>
<tr><td><code id="wide_to_long_+3A_id_v">id_v</code></td>
<td>
<p>A character vector of column from <code>dt</code> that are not to be
consolidated and act as identifier columns for the new long form.
This parameter is required.</p>
</td></tr>
<tr><td><code id="wide_to_long_+3A_measure_v">measure_v</code></td>
<td>
<p>An optional character vector that sets the column measures from
<code>dt</code> that are to be consolidated. If not specified then all the columns
not in <code>id_v</code> are considered measures and will be consolidated.</p>
</td></tr>
<tr><td><code id="wide_to_long_+3A_variable_name">variable_name</code></td>
<td>
<p>An optional string that sets the column name for
the consolidated column names.</p>
</td></tr>
<tr><td><code id="wide_to_long_+3A_value_name">value_name</code></td>
<td>
<p>An optional string that sets the column name for the
consolidated values.</p>
</td></tr>
<tr><td><code id="wide_to_long_+3A_na_rm">na_rm</code></td>
<td>
<p>An optional logical which if TRUE will remove rows with NA values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A reshaped data frame in the &quot;long&quot; format.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Requires Census Bureau API key
  library(data.table)
  library(httr)
  library(jsonlite)
  library(RcensusPkg)
  # Request for data from Census Bureau which comes in the "wide" form
  B19001_1yr_wide_dt &lt;- RcensusPkg::get_vintage_data(
    dataset = "acs/acs1",
    vintage = 2016,
    group = "B19001",
    region = "state"
  )
  # Convert the returned data.table into "long" form
  B19001_1yr_long_dt &lt;- RcensusPkg::wide_to_long(
    dt = B19001_1yr_wide_dt,
    id_v = c("NAME","GEOID")
  )

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
