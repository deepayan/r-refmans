<!DOCTYPE html><html lang="en"><head><title>Help for package creditmodel</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {creditmodel}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#creditmodel-package'><p>creditmodel: toolkit for credit modeling and data analysis</p></a></li>
<li><a href='#+25alike+25'>
<p>Fuzzy String matching</p></a></li>
<li><a href='#+25islike+25'>
<p>Fuzzy String matching</p></a></li>
<li><a href='#add_variable_process'><p>add_variable_process</p></a></li>
<li><a href='#address_varieble'><p>address_varieble</p></a></li>
<li><a href='#analysis_nas'><p>missing Analysis</p></a></li>
<li><a href='#analysis_outliers'><p>Outliers Analysis</p></a></li>
<li><a href='#as_percent'><p>Percent Format</p></a></li>
<li><a href='#auc_value'><p>auc_value</p>
<code>auc_value</code> is for get best lambda required in lasso_filter. This function required in <code>lasso_filter</code></a></li>
<li><a href='#char_cor_vars'><p>Cramer's V matrix between categorical variables.</p></a></li>
<li><a href='#char_to_num'><p>character to number</p></a></li>
<li><a href='#checking_data'><p>Checking Data</p></a></li>
<li><a href='#city_varieble'><p>city_varieble</p></a></li>
<li><a href='#city_varieble_process'><p>Processing of Address Variables</p></a></li>
<li><a href='#cohort_table_plot'><p>cohort_table_plot</p>
<code>cohort_table_plot</code> is for ploting cohort(vintage) analysis table.</a></li>
<li><a href='#cor_heat_plot'><p>Correlation Heat Plot</p></a></li>
<li><a href='#cor_plot'><p>Correlation Plot</p></a></li>
<li><a href='#cos_sim'><p>cos_sim</p></a></li>
<li><a href='#customer_segmentation'><p>Customer Segmentation</p></a></li>
<li><a href='#cut_equal'><p>Generating Initial Equal Size Sample Bins</p></a></li>
<li><a href='#cv_split'><p>Stratified Folds</p></a></li>
<li><a href='#data_cleansing'><p>Data Cleaning</p></a></li>
<li><a href='#data_exploration'><p>Data Exploration</p></a></li>
<li><a href='#date_cut'><p>Date Time Cut Point</p></a></li>
<li><a href='#de_one_hot_encoding'><p>Recovery One-Hot Encoding</p></a></li>
<li><a href='#de_percent'><p>Recovery Percent Format</p></a></li>
<li><a href='#derived_interval'><p>derived_interval</p></a></li>
<li><a href='#derived_partial_acf'><p>derived_partial_acf</p></a></li>
<li><a href='#derived_pct'><p>derived_pct</p></a></li>
<li><a href='#derived_ts_vars'><p>Derivation of Behavioral Variables</p></a></li>
<li><a href='#digits_num'><p>Number of digits</p></a></li>
<li><a href='#entropy_weight'><p>Entropy Weight Method</p></a></li>
<li><a href='#entry_rate_na'><p>Max Percent of missing Value</p></a></li>
<li><a href='#euclid_dist'><p>euclid_dist</p></a></li>
<li><a href='#eval_auc'><p>Functions of xgboost feval</p></a></li>
<li><a href='#ewm_data'><p>Entropy Weight Method Data</p></a></li>
<li><a href='#fast_high_cor_filter'><p>high_cor_filter</p></a></li>
<li><a href='#feature_selector'><p>Feature Selection Wrapper</p></a></li>
<li><a href='#fuzzy_cluster_means'><p>Fuzzy Cluster means.</p></a></li>
<li><a href='#gather_data'><p>gather or aggregate data</p></a></li>
<li><a href='#gbm_filter'><p>Select Features using GBM</p></a></li>
<li><a href='#gbm_params'><p>GBM Parameters</p></a></li>
<li><a href='#get_auc_ks_lambda'><p>get_auc_ks_lambda</p>
<code>get_auc_ks_lambda</code> is for get best lambda required in lasso_filter. This function required in <code>lasso_filter</code></a></li>
<li><a href='#get_bins_table_all'><p>Table of Binning</p></a></li>
<li><a href='#get_breaks_all'><p>Generates Best Breaks for Binning</p></a></li>
<li><a href='#get_correlation_group'><p>get_correlation_group</p></a></li>
<li><a href='#get_iv_all'><p>Calculate Information Value (IV)</p>
<code>get_iv</code>  is used to calculate Information Value (IV) of an independent variable.
<code>get_iv_all</code> can loop through IV for all specified independent variables.</a></li>
<li><a href='#get_logistic_coef'><p>get logistic coef</p></a></li>
<li><a href='#get_median'><p>get central value.</p></a></li>
<li><a href='#get_names'><p>Get Variable Names</p></a></li>
<li><a href='#get_nas_random'><p>get_nas_random</p></a></li>
<li><a href='#get_psi_all'><p>Calculate Population Stability Index (PSI)</p>
<code>get_psi</code> is used to calculate Population Stability Index (PSI)  of an independent variable.
<code>get_psi_all</code> can loop through PSI for all specified independent variables.</a></li>
<li><a href='#get_psi_iv_all'><p>Calculate IV &amp; PSI</p></a></li>
<li><a href='#get_psi_plots'><p>Plot PSI(Population Stability Index)</p></a></li>
<li><a href='#get_score_card'><p>Score Card</p></a></li>
<li><a href='#get_shadow_nas'><p>get_shadow_nas</p></a></li>
<li><a href='#get_sim_sign_lambda'><p>get_sim_sign_lambda</p>
<code>get_sim_sign_lambda</code> is for get Best lambda required in lasso_filter. This function required in <code>lasso_filter</code></a></li>
<li><a href='#get_tree_breaks'><p>Getting the breaks for terminal nodes from decision tree</p></a></li>
<li><a href='#get_x_list'><p>Get X List.</p></a></li>
<li><a href='#high_cor_selector'><p>Compare the two highly correlated variables</p></a></li>
<li><a href='#is_date'><p>is_date</p></a></li>
<li><a href='#knn_nas_imp'><p>Imputate nas using KNN</p></a></li>
<li><a href='#ks_table'><p>ks_table &amp; plot</p></a></li>
<li><a href='#ks_value'><p>ks_value</p></a></li>
<li><a href='#lasso_filter'><p>Variable selection by LASSO</p></a></li>
<li><a href='#lendingclub'><p>Lending Club data</p></a></li>
<li><a href='#lift_value'><p>lift_value</p></a></li>
<li><a href='#local_outlier_factor'><p>local_outlier_factor</p>
<code>local_outlier_factor</code>  is function for calculating the lof factor for a data set using knn
This function is not intended to be used by end user.</a></li>
<li><a href='#log_trans'><p>Logarithmic transformation</p></a></li>
<li><a href='#loop_function'><p>Loop Function.</p>
#' <code>loop_function</code> is an iterator to loop through</a></li>
<li><a href='#love_color'><p>love_color</p></a></li>
<li><a href='#low_variance_filter'><p>Filtering Low Variance Variables</p></a></li>
<li><a href='#lr_params'><p>Logistic Regression &amp; Scorecard Parameters</p></a></li>
<li><a href='#lr_vif'><p>Variance-Inflation Factors</p></a></li>
<li><a href='#max_min_norm'><p>Max Min Normalization</p></a></li>
<li><a href='#merge_category'><p>Merge Category</p></a></li>
<li><a href='#min_max_norm'><p>Min Max Normalization</p></a></li>
<li><a href='#model_result_plot'><p>model result plots</p>
<code>model_result_plot</code> is a wrapper of following:
<code>perf_table</code> is for generating a model performance table.
<code>ks_plot</code> is for K-S.
<code>roc_plot</code> is for ROC.
<code>lift_plot</code> is for Lift Chart.
<code>score_distribution_plot</code> is for ploting the score distribution.</a></li>
<li><a href='#multi_grid'><p>Arrange list of plots into a grid</p></a></li>
<li><a href='#multi_left_join'><p>multi_left_join</p></a></li>
<li><a href='#n_char'><p>The length of a string.</p></a></li>
<li><a href='#null_blank_na'><p>Encode NAs</p></a></li>
<li><a href='#one_hot_encoding'><p>One-Hot Encoding</p></a></li>
<li><a href='#outliers_detection'><p>Outliers Detection</p>
<code>outliers_detection</code> is for outliers detecting using Kmeans and Local Outlier Factor (lof)</a></li>
<li><a href='#p_ij'><p>Entropy</p></a></li>
<li><a href='#p_to_score'><p>prob to socre</p></a></li>
<li><a href='#partial_dependence_plot'><p>partial_dependence_plot</p></a></li>
<li><a href='#PCA_reduce'><p>PCA Dimension Reduction</p></a></li>
<li><a href='#plot_colors'><p>Plot Colors</p></a></li>
<li><a href='#plot_oot_perf'><p>plot_oot_perf</p>
<code>plot_oot_perf</code> is for ploting performance of cross time samples in the future</a></li>
<li><a href='#plot_table'><p>plot_table</p></a></li>
<li><a href='#plot_theme'><p>plot_theme</p></a></li>
<li><a href='#pred_score'><p>pred_score</p></a></li>
<li><a href='#process_nas'><p>missing Treatment</p></a></li>
<li><a href='#process_outliers'><p>Outliers Treatment</p></a></li>
<li><a href='#psi_iv_filter'><p>Variable reduction based on Information Value &amp; Population Stability Index filter</p></a></li>
<li><a href='#quick_as_df'><p>List as data.frame quickly</p></a></li>
<li><a href='#ranking_percent_proc'><p>Ranking Percent Process</p></a></li>
<li><a href='#re_code'><p>re_code</p>
<code>re_code</code> search for matches to argument pattern within each element of a character vector:</a></li>
<li><a href='#re_name'><p>Rename</p></a></li>
<li><a href='#read_data'><p>Read data</p></a></li>
<li><a href='#reduce_high_cor_filter'><p>Filtering highly correlated variables with reduce method</p></a></li>
<li><a href='#remove_duplicated'><p>Remove Duplicated Observations</p></a></li>
<li><a href='#replace_value'><p>Replace Value</p></a></li>
<li><a href='#require_packages'><p>Packages required and intallment</p></a></li>
<li><a href='#rf_params'><p>Random Forest Parameters</p></a></li>
<li><a href='#rowAny'><p>Functions for vector operation.</p></a></li>
<li><a href='#save_data'><p>Save data</p></a></li>
<li><a href='#score_transfer'><p>Score Transformation</p></a></li>
<li><a href='#select_best_class'><p>Generates Best Binning Breaks</p></a></li>
<li><a href='#sim_str'><p>sim_str</p></a></li>
<li><a href='#split_bins'><p>split_bins</p></a></li>
<li><a href='#split_bins_all'><p>Split bins all</p></a></li>
<li><a href='#sql_hive_text_parse'><p>Automatic production of hive SQL</p></a></li>
<li><a href='#start_parallel_computing'><p>Parallel computing and export variables to global Env.</p></a></li>
<li><a href='#stop_parallel_computing'><p>Stop parallel computing</p></a></li>
<li><a href='#str_match'><p>string match</p>
#' <code>str_match</code> search for matches to argument pattern within each element of a character vector:</a></li>
<li><a href='#sum_table'><p>Summary table</p></a></li>
<li><a href='#term_tfidf'><p>TF-IDF</p></a></li>
<li><a href='#time_series_proc'><p>Process time series data</p></a></li>
<li><a href='#time_transfer'><p>Time Format Transfering</p></a></li>
<li><a href='#time_variable'><p>time_variable</p></a></li>
<li><a href='#time_vars_process'><p>Processing of Time or Date Variables</p></a></li>
<li><a href='#tnr_value'><p>tnr_value</p></a></li>
<li><a href='#train_lr'><p>Trainig LR model</p></a></li>
<li><a href='#train_test_split'><p>Train-Test-Split</p></a></li>
<li><a href='#train_xgb'><p>Training XGboost</p></a></li>
<li><a href='#training_model'><p>Training model</p></a></li>
<li><a href='#UCICreditCard'><p>UCI Credit Card data</p></a></li>
<li><a href='#var_group_proc'><p>Process group numeric variables</p></a></li>
<li><a href='#variable_process'><p>variable_process</p></a></li>
<li><a href='#woe_trans_all'><p>WOE Transformation</p></a></li>
<li><a href='#xgb_data'><p>XGboost data</p></a></li>
<li><a href='#xgb_filter'><p>Select Features using XGB</p></a></li>
<li><a href='#xgb_params'><p>XGboost Parameters</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>1.3.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-12-15</td>
</tr>
<tr>
<td>Title:</td>
<td>Toolkit for Credit Modeling, Analysis and Visualization</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Dongping Fan &lt;fdp@pku.edu.cn&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>
  Provides a highly efficient R tool suite for Credit Modeling, Analysis and Visualization.Contains infrastructure functionalities such as data exploration and preparation, missing values treatment, outliers treatment, variable derivation, variable selection, dimensionality reduction, grid search for hyper parameters, data mining and visualization, model evaluation, strategy analysis etc. This package is designed to make the development of binary classification models (machine learning based models as well as credit scorecard) simpler and faster. The references including: 1 Refaat, M. (2011, ISBN: 9781447511199). Credit Risk Scorecard: Development and Implementation Using SAS; 2 Bezdek, James C.FCM: The fuzzy c-means clustering algorithm. Computers &amp; Geosciences (0098-3004),&lt;<a href="https://doi.org/10.1016%2F0098-3004%2884%2990020-7">doi:10.1016/0098-3004(84)90020-7</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table,dplyr,ggplot2,foreach,doParallel,glmnet,rpart,cli,xgboost</td>
</tr>
<tr>
<td>Suggests:</td>
<td>pdp,pmml,XML,knitr,gbm,randomForest,rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>yes</td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL-3</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Author:</td>
<td>Dongping Fan [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-01-07 07:44:53 UTC; HANSEN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-01-07 11:32:41 UTC</td>
</tr>
</table>
<hr>
<h2 id='creditmodel-package'>creditmodel: toolkit for credit modeling and data analysis</h2><span id='topic+creditmodel'></span><span id='topic+creditmodel-package'></span>

<h3>Description</h3>

<p>creditmodel provides a highly efficient R tool suite for Credit Modeling, Analysis and Visualization. 
Contains infrastructure functionalities such as data exploration and preparation, missing values treatment, outliers treatment, 
variable derivation, variable selection, dimensionality reduction, grid search for hyper parameters, data mining and visualization, model evaluation, strategy analysis etc. 
This package is designed to make the development of binary classification models (machine learning based models as well as credit scorecard) simpler and faster.
</p>


<h3>Details</h3>

<p>It has three main goals:
</p>

<ul>
<li><p> creditmodel is a free and open source automated modeling R package designed to help model developers improve 
model development efficiency and enable many people with no background in data science to complete the modeling work in a short time.
Let them focus more on the problem itself and allocate more time to decision-making.
</p>
</li>
<li><p> creditmodel covers various tools such as data preprocessing, variable processing/derivation, 
variable screening/dimensionality reduction, modeling, data analysis, data visualization, model evaluation, strategy analysis, etc. 
It is a set of customized &quot;core&quot; tool kit for model developers.
</p>
</li>
<li><p> 'creditmodel' is suitable for machine learning automated modeling of classification targets, 
and is more suitable for the risk and marketing data of financial credit, e-commerce, and insurance 
with relatively high noise and low information content.
</p>
</li></ul>

<p>To learn more about creditmodel, start with the WeChat Platform: hansenmode
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Dongping Fan <a href="mailto:fdp@pku.edu.cn">fdp@pku.edu.cn</a>
</p>

<hr>
<h2 id='+25alike+25'>
Fuzzy String matching</h2><span id='topic++25alike+25'></span>

<h3>Description</h3>

<p>Fuzzy String matching
</p>


<h3>Usage</h3>

<pre><code class='language-R'>x %alike% y
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25alike+2B25_+3A_x">x</code></td>
<td>
<p>A string.</p>
</td></tr>
<tr><td><code id="+2B25alike+2B25_+3A_y">y</code></td>
<td>
<p>A string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>"xyz"  %alike% "xy"
</code></pre>

<hr>
<h2 id='+25islike+25'>
Fuzzy String matching</h2><span id='topic++25islike+25'></span>

<h3>Description</h3>

<p>Fuzzy String matching
</p>


<h3>Usage</h3>

<pre><code class='language-R'>x %islike% y
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25islike+2B25_+3A_x">x</code></td>
<td>
<p>A string.</p>
</td></tr>
<tr><td><code id="+2B25islike+2B25_+3A_y">y</code></td>
<td>
<p>A string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> "xyz"  %islike% "yz$"
</code></pre>

<hr>
<h2 id='add_variable_process'>add_variable_process</h2><span id='topic+add_variable_process'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_variable_process(add)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_variable_process_+3A_add">add</code></td>
<td>
<p>A data.frame contained address variables.</p>
</td></tr>
</table>

<hr>
<h2 id='address_varieble'>address_varieble</h2><span id='topic+address_varieble'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>address_varieble(
  df,
  address_cols = NULL,
  address_pattern = NULL,
  parallel = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="address_varieble_+3A_df">df</code></td>
<td>
<p>A data.frame.</p>
</td></tr>
<tr><td><code id="address_varieble_+3A_address_cols">address_cols</code></td>
<td>
<p>Variables of address,</p>
</td></tr>
<tr><td><code id="address_varieble_+3A_address_pattern">address_pattern</code></td>
<td>
<p>Regular expressions, used to match address variable names.</p>
</td></tr>
<tr><td><code id="address_varieble_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is TRUE.</p>
</td></tr>
</table>

<hr>
<h2 id='analysis_nas'>missing Analysis</h2><span id='topic+analysis_nas'></span>

<h3>Description</h3>

<p>#' <code>analysis_nas</code> is for understanding the reason for missing data and understand distribution of missing data so we can categorise it as: 
</p>

<ul>
<li><p> missing completely at random(MCAR)
</p>
</li>
<li><p> Mmissing at random(MAR), or
</p>
</li>
<li><p> missing not at random, also known as IM. 
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>analysis_nas(
  dat,
  class_var = FALSE,
  nas_rate = NULL,
  na_vars = NULL,
  mat_nas_shadow = NULL,
  dt_nas_random = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="analysis_nas_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="analysis_nas_+3A_class_var">class_var</code></td>
<td>
<p>Logical, nas analysis of the nominal variables. Default is TRUE.</p>
</td></tr>
<tr><td><code id="analysis_nas_+3A_nas_rate">nas_rate</code></td>
<td>
<p>A list contains nas rate of each variable.</p>
</td></tr>
<tr><td><code id="analysis_nas_+3A_na_vars">na_vars</code></td>
<td>
<p>Names of variables which contain nas.</p>
</td></tr>
<tr><td><code id="analysis_nas_+3A_mat_nas_shadow">mat_nas_shadow</code></td>
<td>
<p>A shadow matrix of variables which contain nas.</p>
</td></tr>
<tr><td><code id="analysis_nas_+3A_dt_nas_random">dt_nas_random</code></td>
<td>
<p>A data.frame with random nas imputation.</p>
</td></tr>
<tr><td><code id="analysis_nas_+3A_...">...</code></td>
<td>
<p>Other parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with outliers analysis for each variable.
</p>

<hr>
<h2 id='analysis_outliers'>Outliers Analysis</h2><span id='topic+analysis_outliers'></span>

<h3>Description</h3>

<p>#' <code>analysis_outliers</code> is the function for outliers analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analysis_outliers(dat, target, x, lof = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="analysis_outliers_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="analysis_outliers_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="analysis_outliers_+3A_x">x</code></td>
<td>
<p>The name of variable to process.</p>
</td></tr>
<tr><td><code id="analysis_outliers_+3A_lof">lof</code></td>
<td>
<p>Outliers of each variable detected by <code>outliers_detection</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with outliers analysis for each variable.
</p>

<hr>
<h2 id='as_percent'>Percent Format</h2><span id='topic+as_percent'></span>

<h3>Description</h3>

<p><code>as_percent</code> is  a small function for making percent format..
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_percent(x, digits = 2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_percent_+3A_x">x</code></td>
<td>
<p>A numeric vector or  list.</p>
</td></tr>
<tr><td><code id="as_percent_+3A_digits">digits</code></td>
<td>
<p>Number of digits.Default: 2.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>x with percent format.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>as_percent(0.2363, digits = 2)
as_percent(1)
</code></pre>

<hr>
<h2 id='auc_value'>auc_value
<code>auc_value</code> is for get best lambda required in lasso_filter. This function required in <code>lasso_filter</code></h2><span id='topic+auc_value'></span>

<h3>Description</h3>

<p>auc_value
<code>auc_value</code> is for get best lambda required in lasso_filter. This function required in <code>lasso_filter</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>auc_value(target, prob)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="auc_value_+3A_target">target</code></td>
<td>
<p>Vector of target.</p>
</td></tr>
<tr><td><code id="auc_value_+3A_prob">prob</code></td>
<td>
<p>A list of redict probability or score.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Lanmbda value
</p>

<hr>
<h2 id='char_cor_vars'>Cramer's V matrix between categorical variables.</h2><span id='topic+char_cor_vars'></span><span id='topic+char_cor'></span>

<h3>Description</h3>

<p><code>char_cor_vars</code> is function for calculating Cramer's V matrix between categorical variables.
<code>char_cor</code> is function for calculating the correlation coefficient between variables by cremers 'V
</p>


<h3>Usage</h3>

<pre><code class='language-R'>char_cor_vars(dat, x)

char_cor(dat, x_list = NULL, ex_cols = "date$", parallel = FALSE, note = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="char_cor_vars_+3A_dat">dat</code></td>
<td>
<p>A data frame.</p>
</td></tr>
<tr><td><code id="char_cor_vars_+3A_x">x</code></td>
<td>
<p>The name of variable to process.</p>
</td></tr>
<tr><td><code id="char_cor_vars_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="char_cor_vars_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="char_cor_vars_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is FALSE.</p>
</td></tr>
<tr><td><code id="char_cor_vars_+3A_note">note</code></td>
<td>
<p>Logical. Outputs info. Default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list contains correlation index of x with other variables in dat.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
char_x_list = get_names(dat = UCICreditCard,
types = c('factor', 'character'),
ex_cols = "ID$|date$|default.payment.next.month$", get_ex = FALSE)
 char_cor(dat = UCICreditCard[char_x_list])

## End(Not run)
</code></pre>

<hr>
<h2 id='char_to_num'>character to number</h2><span id='topic+char_to_num'></span>

<h3>Description</h3>

<p><code>char_to_num</code> is  for transfering character variables which are actually numerical numbers containing strings  to numeric.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>char_to_num(
  dat,
  char_list = NULL,
  m = 0,
  p = 0.5,
  note = FALSE,
  ex_cols = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="char_to_num_+3A_dat">dat</code></td>
<td>
<p>A data frame</p>
</td></tr>
<tr><td><code id="char_to_num_+3A_char_list">char_list</code></td>
<td>
<p>The list of charecteristic variables that need to merge categories, Default is NULL. In case of NULL, merge categories for all variables of string type.</p>
</td></tr>
<tr><td><code id="char_to_num_+3A_m">m</code></td>
<td>
<p>The minimum number of categories.</p>
</td></tr>
<tr><td><code id="char_to_num_+3A_p">p</code></td>
<td>
<p>The max percent of categories.</p>
</td></tr>
<tr><td><code id="char_to_num_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="char_to_num_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat_sub = lendingclub[c('dti_joint',	'emp_length')]
str(dat_sub)
#variables that are converted to numbers containing strings
dat_sub = char_to_num(dat_sub)
str(dat_sub)
</code></pre>

<hr>
<h2 id='checking_data'>Checking Data</h2><span id='topic+checking_data'></span>

<h3>Description</h3>

<p><code>checking_data</code>  cheking dat before processing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checking_data(
  dat = NULL,
  target = NULL,
  occur_time = NULL,
  note = FALSE,
  pos_flag = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="checking_data_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="checking_data_+3A_target">target</code></td>
<td>
<p>The name of target variable. Default is NULL.</p>
</td></tr>
<tr><td><code id="checking_data_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of the variable that represents the time at which each observation takes place.</p>
</td></tr>
<tr><td><code id="checking_data_+3A_note">note</code></td>
<td>
<p>Logical.Outputs info.Default is TRUE.</p>
</td></tr>
<tr><td><code id="checking_data_+3A_pos_flag">pos_flag</code></td>
<td>
<p>The value of positive class of target variable, default: &quot;1&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat = checking_data(dat = UCICreditCard, target = "default.payment.next.month")
</code></pre>

<hr>
<h2 id='city_varieble'>city_varieble</h2><span id='topic+city_varieble'></span>

<h3>Description</h3>

<p>This function is used for city variables derivation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>city_varieble(
  df = df,
  city_cols = NULL,
  city_pattern = NULL,
  city_class = city_class,
  parallel = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="city_varieble_+3A_df">df</code></td>
<td>
<p>A data.frame.</p>
</td></tr>
<tr><td><code id="city_varieble_+3A_city_cols">city_cols</code></td>
<td>
<p>Variables of city,</p>
</td></tr>
<tr><td><code id="city_varieble_+3A_city_pattern">city_pattern</code></td>
<td>
<p>Regular expressions, used to match city variable names. Default is &quot;city$&quot;.</p>
</td></tr>
<tr><td><code id="city_varieble_+3A_city_class">city_class</code></td>
<td>
<p>Class or levels of cities.</p>
</td></tr>
<tr><td><code id="city_varieble_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is TRUE.</p>
</td></tr>
</table>

<hr>
<h2 id='city_varieble_process'>Processing of Address Variables</h2><span id='topic+city_varieble_process'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>city_varieble_process(df_city, x, city_class)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="city_varieble_process_+3A_df_city">df_city</code></td>
<td>
<p>A data.frame.</p>
</td></tr>
<tr><td><code id="city_varieble_process_+3A_x">x</code></td>
<td>
<p>Variables of city,</p>
</td></tr>
<tr><td><code id="city_varieble_process_+3A_city_class">city_class</code></td>
<td>
<p>Class or levels of cities.</p>
</td></tr>
</table>

<hr>
<h2 id='cohort_table_plot'>cohort_table_plot
<code>cohort_table_plot</code> is for ploting cohort(vintage) analysis table.</h2><span id='topic+cohort_table_plot'></span><span id='topic+cohort_plot'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cohort_table_plot(cohort_dat)

cohort_plot(cohort_dat)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cohort_table_plot_+3A_cohort_dat">cohort_dat</code></td>
<td>
<p>A data.frame generated by <code>cohort_analysis</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='cor_heat_plot'>Correlation Heat Plot</h2><span id='topic+cor_heat_plot'></span>

<h3>Description</h3>

<p><code>cor_heat_plot</code> is for ploting correlation matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cor_heat_plot(
  cor_mat,
  low_color = love_color("deep_red"),
  high_color = love_color("light_cyan"),
  title = "Correlation Matrix"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cor_heat_plot_+3A_cor_mat">cor_mat</code></td>
<td>
<p>A correlation matrix.</p>
</td></tr>
<tr><td><code id="cor_heat_plot_+3A_low_color">low_color</code></td>
<td>
<p>color of the lowest correlation between variables.</p>
</td></tr>
<tr><td><code id="cor_heat_plot_+3A_high_color">high_color</code></td>
<td>
<p>color of the highest correlation between variables.</p>
</td></tr>
<tr><td><code id="cor_heat_plot_+3A_title">title</code></td>
<td>
<p>title of plot.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>train_test = train_test_split(UCICreditCard,
split_type = "Random", prop = 0.8,save_data = FALSE)
dat_train = train_test$train
dat_test = train_test$test
cor_mat = cor(dat_train[,8:12],use = "complete.obs")
cor_heat_plot(cor_mat)
</code></pre>

<hr>
<h2 id='cor_plot'>Correlation Plot</h2><span id='topic+cor_plot'></span>

<h3>Description</h3>

<p><code>cor_plot</code> is for ploting correlation matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cor_plot(
  dat,
  dir_path = tempdir(),
  x_list = NULL,
  gtitle = NULL,
  save_data = FALSE,
  plot_show = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cor_plot_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="cor_plot_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved graphic files. Default is &quot;./model/LR&quot;</p>
</td></tr>
<tr><td><code id="cor_plot_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="cor_plot_+3A_gtitle">gtitle</code></td>
<td>
<p>The title of the graph &amp; The name for periodically saved graphic file. Default is &quot;_correlation_of_variables&quot;.</p>
</td></tr>
<tr><td><code id="cor_plot_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is TRUE</p>
</td></tr>
<tr><td><code id="cor_plot_+3A_plot_show">plot_show</code></td>
<td>
<p>Logical, show graph in current graphic device.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>train_test = train_test_split(UCICreditCard,
split_type = "Random", prop = 0.8,save_data = FALSE)
dat_train = train_test$train
dat_test = train_test$test
cor_plot(dat_train[,8:12],plot_show = TRUE)
</code></pre>

<hr>
<h2 id='cos_sim'>cos_sim</h2><span id='topic+cos_sim'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cos_sim(x, y, cos_margin = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cos_sim_+3A_x">x</code></td>
<td>
<p>A list of numbers</p>
</td></tr>
<tr><td><code id="cos_sim_+3A_y">y</code></td>
<td>
<p>A list of numbers</p>
</td></tr>
<tr><td><code id="cos_sim_+3A_cos_margin">cos_margin</code></td>
<td>
<p>Margin of matrix, 1 for rows and 2 for cols, Default is 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A number of cosin similarity
</p>

<hr>
<h2 id='customer_segmentation'>Customer Segmentation</h2><span id='topic+customer_segmentation'></span>

<h3>Description</h3>

<p><code>customer_segmentation</code> is  a function for clustering and find the best segment variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>customer_segmentation(
  dat,
  x_list = NULL,
  ex_cols = NULL,
  cluster_control = list(meth = "Kmeans", kc = 2, nstart = 1, epsm = 1e-06, sf = 2,
    max_iter = 100),
  tree_control = list(cv_folds = 5, maxdepth = kc + 1, minbucket = nrow(dat)/(kc + 1)),
  save_data = FALSE,
  file_name = NULL,
  dir_path = tempdir()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="customer_segmentation_+3A_dat">dat</code></td>
<td>
<p>A data.frame contained only predict variables.</p>
</td></tr>
<tr><td><code id="customer_segmentation_+3A_x_list">x_list</code></td>
<td>
<p>A list of x variables.</p>
</td></tr>
<tr><td><code id="customer_segmentation_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Default is NULL.</p>
</td></tr>
<tr><td><code id="customer_segmentation_+3A_cluster_control">cluster_control</code></td>
<td>
<p>A list controls cluster. kc is the number of cluster center (default is 2), nstart is the number of random groups (default is 1), max_iter max iteration number(default is 100) .
</p>

<ul>
<li> <p><code>meth</code> Method of clustering. Provides two mehods,&quot;Kmeans&quot; and &quot;FCM(Fuzzy Cluster Means)&quot;(default is &quot;Kmeans&quot;).
</p>
</li>
<li> <p><code>kc</code>  Number of cluster center (default is 2).
</p>
</li>
<li> <p><code>nstart</code> Number of random groups (default is 1).
</p>
</li>
<li> <p><code>max_iter</code>  Max iteration number(default is 100).
</p>
</li></ul>
</td></tr>
<tr><td><code id="customer_segmentation_+3A_tree_control">tree_control</code></td>
<td>
<p>A list of controls for desison tree to find the best segment variable.
</p>

<ul>
<li> <p><code>cv_folds</code>  Number of cross-validations(default is 5).
</p>
</li>
<li> <p><code>maxdepth</code> Maximum depth of a tree(default is kc +1).
</p>
</li>
<li> <p><code>minbucket</code>  Minimum percent of observations in any terminal &lt;leaf&gt; node (default is nrow(dat) / (kc + 1)).
</p>
</li></ul>
</td></tr>
<tr><td><code id="customer_segmentation_+3A_save_data">save_data</code></td>
<td>
<p>Logical. If TRUE, save outliers analysis file to the specified folder at <code>dir_path</code></p>
</td></tr>
<tr><td><code id="customer_segmentation_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved segmentation file. Default is NULL.</p>
</td></tr>
<tr><td><code id="customer_segmentation_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved segmentation file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A &quot;data.frame&quot; object contains cluster results.
</p>


<h3>References</h3>

<p>Bezdek, James C. &quot;FCM: The fuzzy c-means clustering algorithm&quot;.
Computers &amp; Geosciences (0098-3004),doi: <a href="https://doi.org/10.1016/0098-3004(84)90020-7">10.1016/0098-3004(84)90020-7</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>clust = customer_segmentation(dat = lendingclub[1:10000,20:30],
                              x_list = NULL, ex_cols = "id$|loan_status",
                              cluster_control = list(meth = "FCM", kc = 2),  save_data = FALSE,
                              tree_control = list(minbucket = round(nrow(lendingclub) / 10)),
                              file_name = NULL, dir_path = tempdir())
</code></pre>

<hr>
<h2 id='cut_equal'>Generating Initial Equal Size Sample Bins</h2><span id='topic+cut_equal'></span>

<h3>Description</h3>

<p><code>cut_equal</code> is used to generate initial breaks for equal frequency binning.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cut_equal(dat_x, g = 10, sp_values = NULL, cut_bin = "equal_depth")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cut_equal_+3A_dat_x">dat_x</code></td>
<td>
<p>A vector of an variable x.</p>
</td></tr>
<tr><td><code id="cut_equal_+3A_g">g</code></td>
<td>
<p>numeric, number of initial bins for equal_bins.</p>
</td></tr>
<tr><td><code id="cut_equal_+3A_sp_values">sp_values</code></td>
<td>
<p>a list of special value. Default: list(-1, &quot;missing&quot;)</p>
</td></tr>
<tr><td><code id="cut_equal_+3A_cut_bin">cut_bin</code></td>
<td>
<p>A string, 'equal_depth' or 'equal_width', default is 'equal_depth'.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+get_breaks">get_breaks</a></code>, <code><a href="#topic+get_breaks_all">get_breaks_all</a></code>,<code><a href="#topic+get_tree_breaks">get_tree_breaks</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#equal sample size breaks
equ_breaks = cut_equal(dat = UCICreditCard[, "PAY_AMT2"], g = 10)

</code></pre>

<hr>
<h2 id='cv_split'>Stratified Folds</h2><span id='topic+cv_split'></span>

<h3>Description</h3>

<p>this function creates stratified folds for cross validation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cv_split(dat, k = 5, occur_time = NULL, seed = 46)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cv_split_+3A_dat">dat</code></td>
<td>
<p>A data.frame.</p>
</td></tr>
<tr><td><code id="cv_split_+3A_k">k</code></td>
<td>
<p>k is an integer specifying the number of folds.</p>
</td></tr>
<tr><td><code id="cv_split_+3A_occur_time">occur_time</code></td>
<td>
<p>time variable for creating OOT folds. Default is NULL.</p>
</td></tr>
<tr><td><code id="cv_split_+3A_seed">seed</code></td>
<td>
<p>A seed. Default is 46.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of indices
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sub = cv_split(UCICreditCard, k = 30)[[1]]
dat = UCICreditCard[sub,]
</code></pre>

<hr>
<h2 id='data_cleansing'>Data Cleaning</h2><span id='topic+data_cleansing'></span>

<h3>Description</h3>

<p>The <code>data_cleansing</code> function is a simpler wrapper for data cleaning functions, such as
delete variables that values are all NAs;
checking dat and target format.
delete low variance variables
replace null or NULL or blank with NA;
encode variables which NAs &amp;  miss value rate is more than 95
encode variables which unique value  rate is  more than 95
merge categories of character variables that  is more than 10;
transfer time variables to dateformation;
remove duplicated observations;
process outliers;
process NAs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_cleansing(
  dat,
  target = NULL,
  obs_id = NULL,
  occur_time = NULL,
  pos_flag = NULL,
  x_list = NULL,
  ex_cols = NULL,
  miss_values = NULL,
  remove_dup = TRUE,
  outlier_proc = TRUE,
  missing_proc = "median",
  low_var = 0.999,
  missing_rate = 0.999,
  merge_cat = TRUE,
  note = TRUE,
  parallel = FALSE,
  save_data = FALSE,
  file_name = NULL,
  dir_path = tempdir()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="data_cleansing_+3A_dat">dat</code></td>
<td>
<p>A data frame with x and target.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_obs_id">obs_id</code></td>
<td>
<p>The name of ID of observations.Default is NULL.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of occur time of observations.Default is NULL.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_pos_flag">pos_flag</code></td>
<td>
<p>The value of positive class of target variable, default: &quot;1&quot;.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_x_list">x_list</code></td>
<td>
<p>A list of x variables.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Default is NULL.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_miss_values">miss_values</code></td>
<td>
<p>Other extreme value might be used to represent missing values, e.g: -9999, -9998. These miss_values will be encoded to -1 or &quot;missing&quot;.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_remove_dup">remove_dup</code></td>
<td>
<p>Logical, if TRUE, remove the duplicated observations.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_outlier_proc">outlier_proc</code></td>
<td>
<p>Logical, process outliers or not. Default is TRUE.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_missing_proc">missing_proc</code></td>
<td>
<p>If logical, process missing values or not. If &quot;median&quot;, then Nas imputation with k neighbors median. If &quot;avg_dist&quot;, the distance weighted average method is applied to determine the NAs imputation with k neighbors. If &quot;default&quot;, assigning the missing values to -1 or &quot;missing&quot;, otherwise ,processing the missing values according to the results of missing analysis.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_low_var">low_var</code></td>
<td>
<p>The maximum percent of unique values (including NAs) for filtering low variance variables.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_missing_rate">missing_rate</code></td>
<td>
<p>The maximum percent of missing values for recoding values to missing and non_missing.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_merge_cat">merge_cat</code></td>
<td>
<p>The minimum number of categories for merging categories of character variables.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_note">note</code></td>
<td>
<p>Logical. Outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing or not. Default is FALSE.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save the result or not. Default is FALSE.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved data file. Default is NULL.</p>
</td></tr>
<tr><td><code id="data_cleansing_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved data file. Default is tempdir().</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A preprocessed data.frame
</p>


<h3>See Also</h3>

<p><code><a href="#topic+remove_duplicated">remove_duplicated</a></code>,
<code><a href="#topic+null_blank_na">null_blank_na</a></code>,
<code><a href="#topic+entry_rate_na">entry_rate_na</a></code>,
<code><a href="#topic+low_variance_filter">low_variance_filter</a></code>,
<code><a href="#topic+process_nas">process_nas</a></code>,
<code><a href="#topic+process_outliers">process_outliers</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#data cleaning
dat_cl = data_cleansing(dat = UCICreditCard[1:2000,],
                       target = "default.payment.next.month",
                       x_list = NULL,
                       obs_id = "ID",
                       occur_time = "apply_date",
                       ex_cols = c("PAY_6|BILL_"),
                       outlier_proc = TRUE,
                       missing_proc = TRUE,
                       low_var = TRUE,
                       save_data = FALSE)

</code></pre>

<hr>
<h2 id='data_exploration'>Data Exploration</h2><span id='topic+data_exploration'></span>

<h3>Description</h3>

<p>#'The <code>data_exploration</code> includes both univariate and bivariate analysis and ranges from univariate statistics and frequency distributions, to correlations, cross-tabulation and characteristic analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_exploration(
  dat,
  save_data = FALSE,
  file_name = NULL,
  dir_path = tempdir(),
  note = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="data_exploration_+3A_dat">dat</code></td>
<td>
<p>A data.frame with x and target.</p>
</td></tr>
<tr><td><code id="data_exploration_+3A_save_data">save_data</code></td>
<td>
<p>Logical. If TRUE, save  files to the specified folder at <code>dir_path</code></p>
</td></tr>
<tr><td><code id="data_exploration_+3A_file_name">file_name</code></td>
<td>
<p>The file name for periodically saved outliers analysis file. Default is NULL.</p>
</td></tr>
<tr><td><code id="data_exploration_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved outliers analysis file. Default is tempdir().</p>
</td></tr>
<tr><td><code id="data_exploration_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list contains both categrory and numeric variable analysis.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data_ex = data_exploration(dat = UCICreditCard[1:1000,])
</code></pre>

<hr>
<h2 id='date_cut'>Date Time Cut Point</h2><span id='topic+date_cut'></span>

<h3>Description</h3>

<p><code>date_cut</code> is  a small function to get date point.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_cut(dat_time, pct = 0.7, g = 100)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date_cut_+3A_dat_time">dat_time</code></td>
<td>
<p>time vectors.</p>
</td></tr>
<tr><td><code id="date_cut_+3A_pct">pct</code></td>
<td>
<p>the percent of cutting. Default: 0.7.</p>
</td></tr>
<tr><td><code id="date_cut_+3A_g">g</code></td>
<td>
<p>Number of cuts.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Date.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>date_cut(dat_time = lendingclub$issue_d, pct = 0.8)
#"2018-08-01"
</code></pre>

<hr>
<h2 id='de_one_hot_encoding'>Recovery One-Hot Encoding</h2><span id='topic+de_one_hot_encoding'></span>

<h3>Description</h3>

<p><code>de_one_hot_encoding</code> is for one-hot encoding recovery processing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>de_one_hot_encoding(dat_one_hot, cat_vars = NULL, na_act = TRUE, note = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="de_one_hot_encoding_+3A_dat_one_hot">dat_one_hot</code></td>
<td>
<p>A dat frame with the one hot encoding variables</p>
</td></tr>
<tr><td><code id="de_one_hot_encoding_+3A_cat_vars">cat_vars</code></td>
<td>
<p>variables to be recovery processed, default is null, if null, find these variables through regular expressions .</p>
</td></tr>
<tr><td><code id="de_one_hot_encoding_+3A_na_act">na_act</code></td>
<td>
<p>Logical,If true, the missing value is  assigned as &quot;missing&quot;, if FALSE missing value is omitted, the default is TRUE.</p>
</td></tr>
<tr><td><code id="de_one_hot_encoding_+3A_note">note</code></td>
<td>
<p>Logical.Outputs info.Default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dat frame with the one hot encoding recorery character variables
</p>


<h3>See Also</h3>

<p><code><a href="#topic+one_hot_encoding">one_hot_encoding</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#one hot encoding
dat1 = one_hot_encoding(dat = UCICreditCard,
cat_vars = c("SEX", "MARRIAGE"),
merge_cat = TRUE, na_act = TRUE)
#de one hot encoding
dat2 = de_one_hot_encoding(dat_one_hot = dat1,
cat_vars = c("SEX","MARRIAGE"),
na_act = FALSE)
</code></pre>

<hr>
<h2 id='de_percent'>Recovery Percent Format</h2><span id='topic+de_percent'></span>

<h3>Description</h3>

<p><code>de_percent</code> is  a small function for recoverying percent format..
</p>


<h3>Usage</h3>

<pre><code class='language-R'>de_percent(x, digits = 2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="de_percent_+3A_x">x</code></td>
<td>
<p>Character with percent formant.</p>
</td></tr>
<tr><td><code id="de_percent_+3A_digits">digits</code></td>
<td>
<p>Number of digits.Default: 2.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>x without percent format.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>de_percent("24%")
</code></pre>

<hr>
<h2 id='derived_interval'>derived_interval</h2><span id='topic+derived_interval'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>derived_interval(dat_s, interval_type = c("cnt_interval", "time_interval"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="derived_interval_+3A_dat_s">dat_s</code></td>
<td>
<p>A data.frame contained only predict variables.</p>
</td></tr>
<tr><td><code id="derived_interval_+3A_interval_type">interval_type</code></td>
<td>
<p>Available of c(&quot;cnt_interval&quot;, &quot;time_interval&quot;)</p>
</td></tr>
</table>

<hr>
<h2 id='derived_partial_acf'>derived_partial_acf</h2><span id='topic+derived_partial_acf'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>derived_partial_acf(dat_s)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="derived_partial_acf_+3A_dat_s">dat_s</code></td>
<td>
<p>A data.frame</p>
</td></tr>
</table>

<hr>
<h2 id='derived_pct'>derived_pct</h2><span id='topic+derived_pct'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>derived_pct(dat_s, pct_type = "total_pct")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="derived_pct_+3A_dat_s">dat_s</code></td>
<td>
<p>A data.frame contained only predict variables.</p>
</td></tr>
<tr><td><code id="derived_pct_+3A_pct_type">pct_type</code></td>
<td>
<p>Available of &quot;total_pct&quot;</p>
</td></tr>
</table>

<hr>
<h2 id='derived_ts_vars'>Derivation of Behavioral Variables</h2><span id='topic+derived_ts_vars'></span><span id='topic+derived_ts'></span>

<h3>Description</h3>

<p>This function is used for derivating behavioral variables and is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>derived_ts_vars(
  dat,
  grx = NULL,
  td = NULL,
  ID = NULL,
  ex_cols = NULL,
  x_list = NULL,
  der = c("cvs", "sums", "means", "maxs", "max_mins", "time_intervals",
    "cnt_intervals", "total_pcts", "cum_pcts", "partial_acfs"),
  parallel = TRUE,
  note = TRUE
)

derived_ts(
  dat,
  grx_x = NULL,
  x_list = NULL,
  td = NULL,
  ID = NULL,
  ex_cols = NULL,
  der = c("cvs", "sums", "means", "maxs", "max_mins", "time_intervals",
    "cnt_intervals", "total_pcts", "cum_pcts", "partial_acfs")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="derived_ts_vars_+3A_dat">dat</code></td>
<td>
<p>A data.frame contained only predict variables.</p>
</td></tr>
<tr><td><code id="derived_ts_vars_+3A_grx">grx</code></td>
<td>
<p>Regular expressions used to match variable names.</p>
</td></tr>
<tr><td><code id="derived_ts_vars_+3A_td">td</code></td>
<td>
<p>Number of variables to derivate.</p>
</td></tr>
<tr><td><code id="derived_ts_vars_+3A_id">ID</code></td>
<td>
<p>The name of ID of observations or key variable of data. Default is NULL.</p>
</td></tr>
<tr><td><code id="derived_ts_vars_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="derived_ts_vars_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="derived_ts_vars_+3A_der">der</code></td>
<td>
<p>Variables to derivate</p>
</td></tr>
<tr><td><code id="derived_ts_vars_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is FALSE.</p>
</td></tr>
<tr><td><code id="derived_ts_vars_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="derived_ts_vars_+3A_grx_x">grx_x</code></td>
<td>
<p>Regular expression used to match a group of variable names.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The key to creating a good model is not the power of a specific modelling technique, but the breadth and depth of derived variables that represent a higher level of knowledge about the phenomena under examination.
</p>

<hr>
<h2 id='digits_num'>Number of digits</h2><span id='topic+digits_num'></span>

<h3>Description</h3>

<p><code>digits_num</code> is for caculating optimal digits number for numeric variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>digits_num(dat_x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="digits_num_+3A_dat_x">dat_x</code></td>
<td>
<p>A numeric variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A number of digits
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
digits_num(lendingclub[,"dti"])
# 7

## End(Not run)
</code></pre>

<hr>
<h2 id='entropy_weight'>Entropy Weight Method</h2><span id='topic+entropy_weight'></span>

<h3>Description</h3>

<p><code>entropy_weight</code> is for calculating Entropy Weight.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>entropy_weight(dat, pos_vars, neg_vars)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="entropy_weight_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables.</p>
</td></tr>
<tr><td><code id="entropy_weight_+3A_pos_vars">pos_vars</code></td>
<td>
<p>Names or index of positive direction variables, the bigger the better.</p>
</td></tr>
<tr><td><code id="entropy_weight_+3A_neg_vars">neg_vars</code></td>
<td>
<p>Names or index of negative direction variables, the smaller the better.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Step1 Raw data normalization
Step2 Find out the total amount of contributions of all samples to the index Xj
Step3 Each element of the step generated matrix is transformed into the product of each element and the LN (element),
and the information entropy is calculated.
Step4 Calculate redundancy.
Step5 Calculate the weight of each index.
</p>


<h3>Value</h3>

<p>A data.frame with weights of each variable.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>entropy_weight(dat = ewm_data,
              pos_vars = c(6,8,9,10),
              neg_vars = c(7,11))
</code></pre>

<hr>
<h2 id='entry_rate_na'>Max Percent of missing Value</h2><span id='topic+entry_rate_na'></span>

<h3>Description</h3>

<p><code>entry_rate_na</code> is the function to recode variables with missing values up to a certain percentage with missing and non_missing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>entry_rate_na(dat, nr = 0.98, note = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="entry_rate_na_+3A_dat">dat</code></td>
<td>
<p>A data frame with x and target.</p>
</td></tr>
<tr><td><code id="entry_rate_na_+3A_nr">nr</code></td>
<td>
<p>The maximum percent of NAs.</p>
</td></tr>
<tr><td><code id="entry_rate_na_+3A_note">note</code></td>
<td>
<p>Logical.Outputs info.Default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>datss = entry_rate_na(dat = lendingclub[1:1000, ], nr = 0.98)
</code></pre>

<hr>
<h2 id='euclid_dist'>euclid_dist</h2><span id='topic+euclid_dist'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>euclid_dist(x, y, cos_margin = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="euclid_dist_+3A_x">x</code></td>
<td>
<p>A list</p>
</td></tr>
<tr><td><code id="euclid_dist_+3A_y">y</code></td>
<td>
<p>A list</p>
</td></tr>
<tr><td><code id="euclid_dist_+3A_cos_margin">cos_margin</code></td>
<td>
<p>rows or cols</p>
</td></tr>
</table>

<hr>
<h2 id='eval_auc'>Functions of xgboost feval</h2><span id='topic+eval_auc'></span><span id='topic+eval_ks'></span><span id='topic+eval_tnr'></span><span id='topic+eval_lift'></span>

<h3>Description</h3>

<p><code>eval_auc</code> ,<code>eval_ks</code> ,<code>eval_lift</code>,<code>eval_tnr</code> is for getting best params of xgboost.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eval_auc(preds, dtrain)

eval_ks(preds, dtrain)

eval_tnr(preds, dtrain)

eval_lift(preds, dtrain)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eval_auc_+3A_preds">preds</code></td>
<td>
<p>A list of predict probability or score.</p>
</td></tr>
<tr><td><code id="eval_auc_+3A_dtrain">dtrain</code></td>
<td>
<p>Matrix of x predictors.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of best value
</p>

<hr>
<h2 id='ewm_data'>Entropy Weight Method Data</h2><span id='topic+ewm_data'></span>

<h3>Description</h3>

<p>This data is for Entropy Weight Method examples.
</p>


<h3>Format</h3>

<p>A data frame with 10 rows and 13 variables.
</p>

<hr>
<h2 id='fast_high_cor_filter'>high_cor_filter</h2><span id='topic+fast_high_cor_filter'></span><span id='topic+high_cor_filter'></span>

<h3>Description</h3>

<p><code>fast_high_cor_filter</code> In a highly correlated variable group, select the  variable with the highest IV.
<code>high_cor_filter</code> In a highly correlated variable group, select the  variable with the highest IV.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fast_high_cor_filter(
  dat,
  p = 0.95,
  x_list = NULL,
  com_list = NULL,
  ex_cols = NULL,
  save_data = FALSE,
  cor_class = TRUE,
  vars_name = TRUE,
  parallel = FALSE,
  note = FALSE,
  file_name = NULL,
  dir_path = tempdir(),
  ...
)

high_cor_filter(
  dat,
  com_list = NULL,
  x_list = NULL,
  ex_cols = NULL,
  onehot = TRUE,
  parallel = FALSE,
  p = 0.7,
  file_name = NULL,
  dir_path = tempdir(),
  save_data = FALSE,
  note = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fast_high_cor_filter_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables.</p>
</td></tr>
<tr><td><code id="fast_high_cor_filter_+3A_p">p</code></td>
<td>
<p>Threshold of correlation between features. Default is 0.95.</p>
</td></tr>
<tr><td><code id="fast_high_cor_filter_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="fast_high_cor_filter_+3A_com_list">com_list</code></td>
<td>
<p>A data.frame with important values of each variable. eg : IV_list</p>
</td></tr>
<tr><td><code id="fast_high_cor_filter_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="fast_high_cor_filter_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is FALSE.</p>
</td></tr>
<tr><td><code id="fast_high_cor_filter_+3A_cor_class">cor_class</code></td>
<td>
<p>Culculate catagery variables's correlation matrix. Default is FALSE.</p>
</td></tr>
<tr><td><code id="fast_high_cor_filter_+3A_vars_name">vars_name</code></td>
<td>
<p>Logical, output a list of filtered variables or table with detailed compared value of each variable. Default is TRUE.</p>
</td></tr>
<tr><td><code id="fast_high_cor_filter_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is FALSE.</p>
</td></tr>
<tr><td><code id="fast_high_cor_filter_+3A_note">note</code></td>
<td>
<p>Logical. Outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="fast_high_cor_filter_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved results files. Default is &quot;Feature_selected_COR&quot;.</p>
</td></tr>
<tr><td><code id="fast_high_cor_filter_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved results files. Default is &quot;./variable&quot;.</p>
</td></tr>
<tr><td><code id="fast_high_cor_filter_+3A_...">...</code></td>
<td>
<p>Additional parameters.</p>
</td></tr>
<tr><td><code id="fast_high_cor_filter_+3A_onehot">onehot</code></td>
<td>
<p>one-hot-encoding independent variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of selected variables.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_correlation_group">get_correlation_group</a></code>, <code><a href="#topic+high_cor_selector">high_cor_selector</a></code>, <code><a href="#topic+char_cor_vars">char_cor_vars</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># calculate iv for each variable.
iv_list = feature_selector(dat_train = UCICreditCard[1:1000,], dat_test = NULL,
target = "default.payment.next.month",
occur_time = "apply_date",
filter = c("IV"), cv_folds = 1, iv_cp = 0.01,
ex_cols = "ID$|date$|default.payment.next.month$",
save_data = FALSE, vars_name = FALSE)
fast_high_cor_filter(dat = UCICreditCard[1:1000,],
com_list = iv_list, save_data = FALSE,
ex_cols = "ID$|date$|default.payment.next.month$",
p = 0.9, cor_class = FALSE ,var_name = FALSE)
</code></pre>

<hr>
<h2 id='feature_selector'>Feature Selection Wrapper</h2><span id='topic+feature_selector'></span>

<h3>Description</h3>

<p><code>feature_selector</code> This function uses four different methods (IV, PSI, correlation, xgboost) in order to select important features.The correlation algorithm must be used with IV.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>feature_selector(
  dat_train,
  dat_test = NULL,
  x_list = NULL,
  target = NULL,
  pos_flag = NULL,
  occur_time = NULL,
  ex_cols = NULL,
  filter = c("IV", "PSI", "XGB", "COR"),
  cv_folds = 1,
  iv_cp = 0.01,
  psi_cp = 0.5,
  xgb_cp = 0,
  cor_cp = 0.98,
  breaks_list = NULL,
  hopper = FALSE,
  vars_name = TRUE,
  parallel = FALSE,
  note = TRUE,
  seed = 46,
  save_data = FALSE,
  file_name = NULL,
  dir_path = tempdir(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="feature_selector_+3A_dat_train">dat_train</code></td>
<td>
<p>A data.frame with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_dat_test">dat_test</code></td>
<td>
<p>A data.frame of test data. Default is NULL.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_pos_flag">pos_flag</code></td>
<td>
<p>The value of positive class of target variable, default: &quot;1&quot;.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of the variable that represents the time at which each observation takes place.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_filter">filter</code></td>
<td>
<p>The methods for selecting important and stable variables.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_cv_folds">cv_folds</code></td>
<td>
<p>Number of cross-validations. Default: 5.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_iv_cp">iv_cp</code></td>
<td>
<p>The minimum threshold of IV. 0 &lt; iv_i ; 0.01 to 0.1 usually work. Default: 0.02</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_psi_cp">psi_cp</code></td>
<td>
<p>The maximum threshold of PSI.  0 &lt;= psi_i &lt;=1; 0.05 to 0.2 usually work. Default: 0.1</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_xgb_cp">xgb_cp</code></td>
<td>
<p>Threshold of XGB feature's Gain. 0 &lt;= xgb_cp &lt;=1. Default is 1/number of independent variables.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_cor_cp">cor_cp</code></td>
<td>
<p>Threshold of correlation between features. 0 &lt;= cor_cp &lt;=1; 0.7 to 0.98 usually work. Default is 0.98.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_breaks_list">breaks_list</code></td>
<td>
<p>A table containing a list of splitting points for each independent variable. Default is NULL.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_hopper">hopper</code></td>
<td>
<p>Logical.Filtering screening. Default is FALSE.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_vars_name">vars_name</code></td>
<td>
<p>Logical, output a list of filtered variables or table with detailed IV and PSI value of each variable. Default is FALSE.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is FALSE.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_note">note</code></td>
<td>
<p>Logical.Outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_seed">seed</code></td>
<td>
<p>Random number seed. Default is 46.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is FALSE.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved results files. Default is &quot;select_vars&quot;.</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved results files. Default is &quot;./variable&quot;</p>
</td></tr>
<tr><td><code id="feature_selector_+3A_...">...</code></td>
<td>
<p>Other parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of selected features
</p>


<h3>See Also</h3>

<p><code><a href="#topic+psi_iv_filter">psi_iv_filter</a></code>, <code><a href="#topic+xgb_filter">xgb_filter</a></code>, <code><a href="#topic+gbm_filter">gbm_filter</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>feature_selector(dat_train = UCICreditCard[1:1000,c(2,8:12,26)],
                      dat_test = NULL, target = "default.payment.next.month",
                      occur_time = "apply_date", filter = c("IV", "PSI"),
                      cv_folds = 1, iv_cp = 0.01, psi_cp = 0.1, xgb_cp = 0, cor_cp = 0.98,
                      vars_name = FALSE,note = FALSE)
</code></pre>

<hr>
<h2 id='fuzzy_cluster_means'>Fuzzy Cluster means.</h2><span id='topic+fuzzy_cluster_means'></span><span id='topic+fuzzy_cluster'></span>

<h3>Description</h3>

<p>This function is used for Fuzzy Clustering.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fuzzy_cluster_means(
  dat,
  kc = 2,
  sf = 2,
  nstart = 1,
  max_iter = 100,
  epsm = 1e-06
)

fuzzy_cluster(dat, kc = 2, init_centers, sf = 3, max_iter = 100, epsm = 1e-06)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fuzzy_cluster_means_+3A_dat">dat</code></td>
<td>
<p>A data.frame contained only predict variables.</p>
</td></tr>
<tr><td><code id="fuzzy_cluster_means_+3A_kc">kc</code></td>
<td>
<p>The number of cluster center (default is 2),</p>
</td></tr>
<tr><td><code id="fuzzy_cluster_means_+3A_sf">sf</code></td>
<td>
<p>Default is 2.</p>
</td></tr>
<tr><td><code id="fuzzy_cluster_means_+3A_nstart">nstart</code></td>
<td>
<p>The number of random groups (default is 1),</p>
</td></tr>
<tr><td><code id="fuzzy_cluster_means_+3A_max_iter">max_iter</code></td>
<td>
<p>Max iteration number(default is 100) .</p>
</td></tr>
<tr><td><code id="fuzzy_cluster_means_+3A_epsm">epsm</code></td>
<td>
<p>Default is 1e-06.</p>
</td></tr>
<tr><td><code id="fuzzy_cluster_means_+3A_init_centers">init_centers</code></td>
<td>
<p>Initial centers of obs.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Bezdek, James C. &quot;FCM: The fuzzy c-means clustering algorithm&quot;.
Computers &amp; Geosciences (0098-3004),doi: <a href="https://doi.org/10.1016/0098-3004(84)90020-7">10.1016/0098-3004(84)90020-7</a>
</p>

<hr>
<h2 id='gather_data'>gather or aggregate data</h2><span id='topic+gather_data'></span>

<h3>Description</h3>

<p>This function is used for gathering or aggregating data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gather_data(dat, x_list = NULL, ID = NULL, FUN = sum_x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gather_data_+3A_dat">dat</code></td>
<td>
<p>A data.frame contained only predict variables.</p>
</td></tr>
<tr><td><code id="gather_data_+3A_x_list">x_list</code></td>
<td>
<p>The names of variables to gather.</p>
</td></tr>
<tr><td><code id="gather_data_+3A_id">ID</code></td>
<td>
<p>The name of ID of observations or key variable of data. Default is NULL.</p>
</td></tr>
<tr><td><code id="gather_data_+3A_fun">FUN</code></td>
<td>
<p>The function of gathering method.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The key to creating a good model is not the power of a specific modelling technique, but the breadth and depth of derived variables that represent a higher level of knowledge about the phenomena under examination.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat = data.frame(id = c(1,1,1,2,2,3,3,3,4,4,4,4,4,5,5,6,7,7,
                            8,8,8,9,9,9,10,10,11,11,11,11,11,11),
                     terms = c('a','b','c','a','c','d','d','a',
                               'b','c','a','c','d','a','c',
                                  'd','a','e','f','b','c','f','b',
                               'c','h','h','i','c','d','g','k','k'),
                     time = c(8,3,1,9,6,1,4,9,1,3,4,8,2,7,1,
                              3,4,1,8,7,2,5,7,8,8,2,1,5,7,2,7,3))

gather_data(dat = dat, x_list = "time", ID = 'id', FUN = sum_x)
</code></pre>

<hr>
<h2 id='gbm_filter'>Select Features using GBM</h2><span id='topic+gbm_filter'></span>

<h3>Description</h3>

<p><code>gbm_filter</code>  is for selecting important features using GBM.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gbm_filter(
  dat,
  target = NULL,
  x_list = NULL,
  ex_cols = NULL,
  pos_flag = NULL,
  GBM.params = gbm_params(),
  cores_num = 2,
  vars_name = TRUE,
  note = TRUE,
  save_data = FALSE,
  file_name = NULL,
  dir_path = tempdir(),
  seed = 46,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gbm_filter_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="gbm_filter_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="gbm_filter_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="gbm_filter_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="gbm_filter_+3A_pos_flag">pos_flag</code></td>
<td>
<p>The value of positive class of target variable, default: &quot;1&quot;.</p>
</td></tr>
<tr><td><code id="gbm_filter_+3A_gbm.params">GBM.params</code></td>
<td>
<p>Parameters of GBM.</p>
</td></tr>
<tr><td><code id="gbm_filter_+3A_cores_num">cores_num</code></td>
<td>
<p>The number of CPU cores to use.</p>
</td></tr>
<tr><td><code id="gbm_filter_+3A_vars_name">vars_name</code></td>
<td>
<p>Logical, output a list of filtered variables or table with detailed IV and PSI value of each variable. Default is TRUE.</p>
</td></tr>
<tr><td><code id="gbm_filter_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="gbm_filter_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results results in locally specified folder. Default is FALSE.</p>
</td></tr>
<tr><td><code id="gbm_filter_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved results files.  Default is &quot;Feature_importance_GBDT&quot;.</p>
</td></tr>
<tr><td><code id="gbm_filter_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved results files.  Default is &quot;./variable&quot;.</p>
</td></tr>
<tr><td><code id="gbm_filter_+3A_seed">seed</code></td>
<td>
<p>Random number seed. Default is 46.</p>
</td></tr>
<tr><td><code id="gbm_filter_+3A_...">...</code></td>
<td>
<p>Other parameters to pass to gbdt_params.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Selected variables.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+psi_iv_filter">psi_iv_filter</a></code>, <code><a href="#topic+xgb_filter">xgb_filter</a></code>, <code><a href="#topic+feature_selector">feature_selector</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>GBM.params = gbm_params(n.trees = 2, interaction.depth = 2, shrinkage = 0.1,
                       bag.fraction = 1, train.fraction = 1,
                       n.minobsinnode = 30,
                     cv.folds = 2)
## Not run: 
 features = gbm_filter(dat = UCICreditCard[1:1000, c(8:12, 26)],
         target = "default.payment.next.month",
      occur_time = "apply_date",
     GBM.params = GBM.params
       , vars_name = FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='gbm_params'>GBM Parameters</h2><span id='topic+gbm_params'></span>

<h3>Description</h3>

<p><code>gbm_params</code> is the list of parameters to train a GBM using in  <code><a href="#topic+training_model">training_model</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gbm_params(
  n.trees = 1000,
  interaction.depth = 6,
  shrinkage = 0.01,
  bag.fraction = 0.5,
  train.fraction = 0.7,
  n.minobsinnode = 30,
  cv.folds = 5,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gbm_params_+3A_n.trees">n.trees</code></td>
<td>
<p>Integer specifying the total number of trees to fit. This is equivalent to the number of iterations and the number of basis functions in the additive expansion. Default is 100.</p>
</td></tr>
<tr><td><code id="gbm_params_+3A_interaction.depth">interaction.depth</code></td>
<td>
<p>Integer specifying the maximum depth of each tree(i.e., the highest level of variable interactions allowed) . A value of 1 implies an additive model, a value of 2 implies a model with up to 2 - way interactions, etc. Default is 1.</p>
</td></tr>
<tr><td><code id="gbm_params_+3A_shrinkage">shrinkage</code></td>
<td>
<p>a shrinkage parameter applied to each tree in the expansion. Also known as the learning rate or step - size reduction; 0.001 to 0.1 usually work, but a smaller learning rate typically requires more trees. Default is 0.1 .</p>
</td></tr>
<tr><td><code id="gbm_params_+3A_bag.fraction">bag.fraction</code></td>
<td>
<p>the fraction of the training set observations randomly selected to propose the next tree in the expansion. This introduces randomnesses into the model fit. If bag.fraction &lt; 1 then running the same model twice will result in similar but different fits. gbm uses the R random number generator so set.seed can ensure that the model can be reconstructed. Preferably, the user can save the returned gbm.object using save. Default is 0.5 .</p>
</td></tr>
<tr><td><code id="gbm_params_+3A_train.fraction">train.fraction</code></td>
<td>
<p>The first train.fraction * nrows(data) observations are used to fit the gbm and the remainder are used for computing out-of-sample estimates of the loss function.</p>
</td></tr>
<tr><td><code id="gbm_params_+3A_n.minobsinnode">n.minobsinnode</code></td>
<td>
<p>Integer specifying the minimum number of observations in the terminal nodes of the trees. Note that this is the actual number of observations, not the total weight.</p>
</td></tr>
<tr><td><code id="gbm_params_+3A_cv.folds">cv.folds</code></td>
<td>
<p>Number of cross - validation folds to perform. If cv.folds &gt; 1 then gbm, in addition to the usual fit, will perform a cross - validation, calculate an estimate of generalization error returned in cv.error.</p>
</td></tr>
<tr><td><code id="gbm_params_+3A_...">...</code></td>
<td>
<p>Other parameters</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See details at: <code>gbm</code>
</p>


<h3>Value</h3>

<p>A list of parameters.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+training_model">training_model</a></code>, <code><a href="#topic+lr_params">lr_params</a></code>, <code><a href="#topic+xgb_params">xgb_params</a></code>, <code><a href="#topic+rf_params">rf_params</a></code>
</p>

<hr>
<h2 id='get_auc_ks_lambda'>get_auc_ks_lambda
<code>get_auc_ks_lambda</code> is for get best lambda required in lasso_filter. This function required in <code>lasso_filter</code></h2><span id='topic+get_auc_ks_lambda'></span>

<h3>Description</h3>

<p>get_auc_ks_lambda
<code>get_auc_ks_lambda</code> is for get best lambda required in lasso_filter. This function required in <code>lasso_filter</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_auc_ks_lambda(
  lasso_model,
  x_test,
  y_test,
  save_data = FALSE,
  plot_show = TRUE,
  file_name = NULL,
  dir_path = tempdir()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_auc_ks_lambda_+3A_lasso_model">lasso_model</code></td>
<td>
<p>A lasso model genereted by glmnet.</p>
</td></tr>
<tr><td><code id="get_auc_ks_lambda_+3A_x_test">x_test</code></td>
<td>
<p>A matrix of test dataset with x.</p>
</td></tr>
<tr><td><code id="get_auc_ks_lambda_+3A_y_test">y_test</code></td>
<td>
<p>A matrix of y test dataset with y.</p>
</td></tr>
<tr><td><code id="get_auc_ks_lambda_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is FALSE</p>
</td></tr>
<tr><td><code id="get_auc_ks_lambda_+3A_plot_show">plot_show</code></td>
<td>
<p>Logical, if TRUE plot the results. Default is TRUE.</p>
</td></tr>
<tr><td><code id="get_auc_ks_lambda_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved results files. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_auc_ks_lambda_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved results files.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Lanmbda values with max K-S and AUC.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+lasso_filter">lasso_filter</a></code>, <code><a href="#topic+get_sim_sign_lambda">get_sim_sign_lambda</a></code>
</p>

<hr>
<h2 id='get_bins_table_all'>Table of Binning</h2><span id='topic+get_bins_table_all'></span><span id='topic+get_bins_table'></span>

<h3>Description</h3>

<p><code>get_bins_table</code>  is used to generates summary information of varaibles.
<code>get_bins_table_all</code> can generates bins table for all specified independent variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_bins_table_all(
  dat,
  x_list = NULL,
  target = NULL,
  pos_flag = NULL,
  dat_test = NULL,
  ex_cols = NULL,
  breaks_list = NULL,
  parallel = FALSE,
  note = FALSE,
  bins_total = TRUE,
  save_data = FALSE,
  file_name = NULL,
  dir_path = tempdir()
)

get_bins_table(
  dat,
  x,
  target = NULL,
  pos_flag = NULL,
  dat_test = NULL,
  breaks = NULL,
  breaks_list = NULL,
  bins_total = TRUE,
  note = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_bins_table_all_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="get_bins_table_all_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="get_bins_table_all_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="get_bins_table_all_+3A_pos_flag">pos_flag</code></td>
<td>
<p>Value of positive class, Default is &quot;1&quot;.</p>
</td></tr>
<tr><td><code id="get_bins_table_all_+3A_dat_test">dat_test</code></td>
<td>
<p>A data.frame of test data. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_bins_table_all_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_bins_table_all_+3A_breaks_list">breaks_list</code></td>
<td>
<p>A table containing a list of splitting points for each independent variable. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_bins_table_all_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is FALSE.</p>
</td></tr>
<tr><td><code id="get_bins_table_all_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="get_bins_table_all_+3A_bins_total">bins_total</code></td>
<td>
<p>Logical, total sum for each columns.</p>
</td></tr>
<tr><td><code id="get_bins_table_all_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is FALSE.</p>
</td></tr>
<tr><td><code id="get_bins_table_all_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved bins table file. Default is &quot;bins_table&quot;.</p>
</td></tr>
<tr><td><code id="get_bins_table_all_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved bins table file. Default is &quot;./variable&quot;.</p>
</td></tr>
<tr><td><code id="get_bins_table_all_+3A_x">x</code></td>
<td>
<p>The name of an independent variable.</p>
</td></tr>
<tr><td><code id="get_bins_table_all_+3A_breaks">breaks</code></td>
<td>
<p>Splitting points for an independent variable. Default is NULL.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+get_iv">get_iv</a></code>,
<code><a href="#topic+get_iv_all">get_iv_all</a></code>,
<code><a href="#topic+get_psi">get_psi</a></code>,
<code><a href="#topic+get_psi_all">get_psi_all</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>breaks_list = get_breaks_all(dat = UCICreditCard, x_list = names(UCICreditCard)[3:4],
target = "default.payment.next.month", equal_bins =TRUE,best = FALSE,g=5,
ex_cols = "ID|apply_date", save_data = FALSE)
get_bins_table_all(dat = UCICreditCard, breaks_list = breaks_list,
target = "default.payment.next.month")
</code></pre>

<hr>
<h2 id='get_breaks_all'>Generates Best Breaks for Binning</h2><span id='topic+get_breaks_all'></span><span id='topic+get_breaks'></span>

<h3>Description</h3>

<p><code>get_breaks</code> is for generating optimal binning for numerical and nominal variables.
The <code>get_breaks_all</code>  is a simpler wrapper for <code>get_breaks</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_breaks_all(
  dat,
  target = NULL,
  x_list = NULL,
  ex_cols = NULL,
  pos_flag = NULL,
  occur_time = NULL,
  oot_pct = 0.7,
  best = TRUE,
  equal_bins = FALSE,
  cut_bin = "equal_depth",
  g = 10,
  sp_values = NULL,
  tree_control = list(p = 0.05, cp = 1e-06, xval = 5, maxdepth = 10),
  bins_control = list(bins_num = 10, bins_pct = 0.05, b_chi = 0.05, b_odds = 0.1, b_psi
    = 0.05, b_or = 0.15, mono = 0.3, odds_psi = 0.2, kc = 1),
  parallel = FALSE,
  note = FALSE,
  save_data = FALSE,
  file_name = NULL,
  dir_path = tempdir(),
  ...
)

get_breaks(
  dat,
  x,
  target = NULL,
  pos_flag = NULL,
  best = TRUE,
  equal_bins = FALSE,
  cut_bin = "equal_depth",
  g = 10,
  sp_values = NULL,
  occur_time = NULL,
  oot_pct = 0.7,
  tree_control = NULL,
  bins_control = NULL,
  note = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_breaks_all_+3A_dat">dat</code></td>
<td>
<p>A data frame with x and target.</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_x_list">x_list</code></td>
<td>
<p>A list of x variables.</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_pos_flag">pos_flag</code></td>
<td>
<p>The value of positive class of target variable, default: &quot;1&quot;.</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of the variable that represents the time at which each observation takes place.</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_oot_pct">oot_pct</code></td>
<td>
<p>Percentage of observations retained for overtime test (especially to calculate PSI). Defualt is 0.7</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_best">best</code></td>
<td>
<p>Logical, if TRUE, merge initial breaks to get optimal breaks for binning.</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_equal_bins">equal_bins</code></td>
<td>
<p>Logical, if TRUE, equal sample size initial breaks generates.If FALSE , tree breaks generates using desison tree.</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_cut_bin">cut_bin</code></td>
<td>
<p>A string, if equal_bins is TRUE, 'equal_depth' or 'equal_width', default is 'equal_depth'.</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_g">g</code></td>
<td>
<p>Integer, number of initial bins for equal_bins.</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_sp_values">sp_values</code></td>
<td>
<p>A list of missing values.</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_tree_control">tree_control</code></td>
<td>
<p>the list of tree parameters.
</p>

<ul>
<li> <p><code>p</code> the minimum percent of observations in any terminal &lt;leaf&gt; node. 0 &lt; p&lt; 1; 0.01 to 0.1 usually work.
</p>
</li>
<li> <p><code>cp</code> complexity parameter. the larger, the more conservative the algorithm will be. 0 &lt; cp&lt; 1 ; 0.0001 to 0.0000001 usually work.
</p>
</li>
<li> <p><code>xval</code> number of cross-validations.Default: 5
</p>
</li>
<li> <p><code>max_depth</code> maximum depth of a tree. Default: 10
</p>
</li></ul>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_bins_control">bins_control</code></td>
<td>
<p>the list of parameters.
</p>

<ul>
<li> <p><code>bins_num</code> The maximum number of bins. 5 to 10 usually work. Default: 10
</p>
</li>
<li> <p><code>bins_pct</code> The minimum percent of observations in any bins. 0 &lt; bins_pct &lt; 1 , 0.01 to 0.1 usually work. Default: 0.02
</p>
</li>
<li> <p><code>b_chi</code> The minimum threshold of chi-square merge. 0 &lt; b_chi&lt; 1; 0.01 to 0.1 usually work. Default: 0.02
</p>
</li>
<li> <p><code>b_odds</code> The minimum threshold of  odds merge. 0 &lt; b_odds &lt; 1; 0.05 to 0.2 usually work. Default: 0.1
</p>
</li>
<li> <p><code>b_psi</code> The maximum threshold of PSI in any bins. 0 &lt; b_psi &lt; 1 ; 0 to 0.1 usually work. Default: 0.05
</p>
</li>
<li> <p><code>b_or</code> The maximum threshold of G/B index in any bins.  0 &lt; b_or &lt; 1 ; 0.05 to 0.3 usually work. Default: 0.15
</p>
</li>
<li> <p><code>odds_psi</code> The maximum threshold of Training and Testing G/B index PSI in any bins. 0 &lt; odds_psi &lt; 1 ; 0.01 to 0.3 usually work. Default: 0.1
</p>
</li>
<li> <p><code>mono</code> Monotonicity of all bins, the larger, the more nonmonotonic the bins will be.  0 &lt; mono &lt; 0.5 ; 0.2 to 0.4 usually work. Default: 0.2
</p>
</li>
<li> <p><code>kc</code> number of cross-validations. 1 to 5 usually work. Default: 1
</p>
</li></ul>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing or not. Default is FALSE.</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_note">note</code></td>
<td>
<p>Logical.Outputs info.Default is TRUE.</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is TRUE</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_file_name">file_name</code></td>
<td>
<p>File name that save results in locally specified folder. Default is &quot;breaks_list&quot;.</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_dir_path">dir_path</code></td>
<td>
<p>Path to save results. Default is &quot;./variable&quot;</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_...">...</code></td>
<td>
<p>Additional parameters.</p>
</td></tr>
<tr><td><code id="get_breaks_all_+3A_x">x</code></td>
<td>
<p>The Name of an independent variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table containing a list of splitting points for each independent variable.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_tree_breaks">get_tree_breaks</a></code>, <code><a href="#topic+cut_equal">cut_equal</a></code>, <code><a href="#topic+select_best_class">select_best_class</a></code>, <code><a href="#topic+select_best_breaks">select_best_breaks</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#controls
tree_control = list(p = 0.02, cp = 0.000001, xval = 5, maxdepth = 10)
bins_control = list(bins_num = 10, bins_pct = 0.02, b_chi = 0.02, b_odds = 0.1,
                   b_psi = 0.05, b_or = 15, mono = 0.2, odds_psi = 0.1, kc = 5)
# get categrory variable breaks
b =  get_breaks(dat = UCICreditCard[1:1000,], x = "MARRIAGE",
                target = "default.payment.next.month",
                occur_time = "apply_date",
                sp_values = list(-1, "missing"),
                tree_control = tree_control, bins_control = bins_control)
# get numeric variable breaks
b2 =  get_breaks(dat = UCICreditCard[1:1000,], x = "PAY_2",
                 target = "default.payment.next.month",
                 occur_time = "apply_date",
                 sp_values = list(-1, "missing"),
                 tree_control = tree_control, bins_control = bins_control)
# get breaks of all predictive variables
b3 =  get_breaks_all(dat = UCICreditCard[1:1000,], target = "default.payment.next.month",
                     x_list = c("MARRIAGE","PAY_2"),
                     occur_time = "apply_date", ex_cols = "ID",
                     sp_values = list(-1, "missing"),
                    tree_control = tree_control, bins_control = bins_control,
                     save_data = FALSE)

</code></pre>

<hr>
<h2 id='get_correlation_group'>get_correlation_group</h2><span id='topic+get_correlation_group'></span><span id='topic+select_cor_group'></span><span id='topic+select_cor_list'></span>

<h3>Description</h3>

<p><code>get_correlation_group</code> is funtion for  obtaining highly correlated variable groups.
<code>select_cor_group</code> is funtion for selecting highly correlated variable group.
<code>select_cor_list</code> is funtion for selecting highly correlated variable list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_correlation_group(cor_mat, p = 0.8)

select_cor_group(cor_vars)

select_cor_list(cor_vars_list)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_correlation_group_+3A_cor_mat">cor_mat</code></td>
<td>
<p>A correlation matrix of independent variables.</p>
</td></tr>
<tr><td><code id="get_correlation_group_+3A_p">p</code></td>
<td>
<p>Threshold of correlation between features. Default is 0.7.</p>
</td></tr>
<tr><td><code id="get_correlation_group_+3A_cor_vars">cor_vars</code></td>
<td>
<p>Correlated variables.</p>
</td></tr>
<tr><td><code id="get_correlation_group_+3A_cor_vars_list">cor_vars_list</code></td>
<td>
<p>List of correlated variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of selected variables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cor_mat = cor(UCICreditCard[8:20],
use = "complete.obs", method = "spearman")
get_correlation_group(cor_mat, p = 0.6 )

## End(Not run)
</code></pre>

<hr>
<h2 id='get_iv_all'>Calculate Information Value (IV)
<code>get_iv</code>  is used to calculate Information Value (IV) of an independent variable.
<code>get_iv_all</code> can loop through IV for all specified independent variables.</h2><span id='topic+get_iv_all'></span><span id='topic+get_iv'></span>

<h3>Description</h3>

<p>Calculate Information Value (IV)
<code>get_iv</code>  is used to calculate Information Value (IV) of an independent variable.
<code>get_iv_all</code> can loop through IV for all specified independent variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_iv_all(
  dat,
  x_list = NULL,
  ex_cols = NULL,
  breaks_list = NULL,
  target = NULL,
  pos_flag = NULL,
  best = TRUE,
  equal_bins = FALSE,
  tree_control = NULL,
  bins_control = NULL,
  g = 10,
  parallel = FALSE,
  note = FALSE
)

get_iv(
  dat,
  x,
  target = NULL,
  pos_flag = NULL,
  breaks = NULL,
  breaks_list = NULL,
  best = TRUE,
  equal_bins = FALSE,
  tree_control = NULL,
  bins_control = NULL,
  g = 10,
  note = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_iv_all_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="get_iv_all_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="get_iv_all_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_iv_all_+3A_breaks_list">breaks_list</code></td>
<td>
<p>A table containing a list of splitting points for each independent variable. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_iv_all_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="get_iv_all_+3A_pos_flag">pos_flag</code></td>
<td>
<p>Value of positive class, Default is &quot;1&quot;.</p>
</td></tr>
<tr><td><code id="get_iv_all_+3A_best">best</code></td>
<td>
<p>Logical, merge initial breaks to get optimal breaks for binning.</p>
</td></tr>
<tr><td><code id="get_iv_all_+3A_equal_bins">equal_bins</code></td>
<td>
<p>Logical, generates initial breaks for equal frequency binning.</p>
</td></tr>
<tr><td><code id="get_iv_all_+3A_tree_control">tree_control</code></td>
<td>
<p>Parameters of using Decision Tree to segment initial breaks. See detials: <code><a href="#topic+get_tree_breaks">get_tree_breaks</a></code></p>
</td></tr>
<tr><td><code id="get_iv_all_+3A_bins_control">bins_control</code></td>
<td>
<p>Parameters  used to control binning.  See detials: <code><a href="#topic+select_best_class">select_best_class</a></code>, <code><a href="#topic+select_best_breaks">select_best_breaks</a></code></p>
</td></tr>
<tr><td><code id="get_iv_all_+3A_g">g</code></td>
<td>
<p>Number of initial breakpoints for equal frequency binning.</p>
</td></tr>
<tr><td><code id="get_iv_all_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is FALSE.</p>
</td></tr>
<tr><td><code id="get_iv_all_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="get_iv_all_+3A_x">x</code></td>
<td>
<p>The name of an independent variable.</p>
</td></tr>
<tr><td><code id="get_iv_all_+3A_breaks">breaks</code></td>
<td>
<p>Splitting points for an independent variable. Default is NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>IV Rules of Thumb for evaluating the strength a predictor
Less than 0.02:unpredictive
0.02 to 0.1:weak
0.1 to 0.3:medium
0.3 + :strong
</p>


<h3>References</h3>

<p>Information Value Statistic:Bruce Lund, Magnify Analytics Solutions, a Division of Marketing Associates, Detroit, MI(Paper AA - 14 - 2013)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_iv">get_iv</a></code>,<code><a href="#topic+get_iv_all">get_iv_all</a></code>,<code><a href="#topic+get_psi">get_psi</a></code>,<code><a href="#topic+get_psi_all">get_psi_all</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_iv_all(dat = UCICreditCard,
 x_list = names(UCICreditCard)[3:10],
 equal_bins = TRUE, best = FALSE,
 target = "default.payment.next.month",
 ex_cols = "ID|apply_date")
get_iv(UCICreditCard, x = "PAY_3",
       equal_bins = TRUE, best = FALSE,
 target = "default.payment.next.month")
</code></pre>

<hr>
<h2 id='get_logistic_coef'>get logistic coef</h2><span id='topic+get_logistic_coef'></span>

<h3>Description</h3>

<p><code>get_logistic_coef</code> is  for geting logistic coefficients.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_logistic_coef(
  lg_model,
  file_name = NULL,
  dir_path = tempdir(),
  save_data = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_logistic_coef_+3A_lg_model">lg_model</code></td>
<td>
<p>An object of logistic model.</p>
</td></tr>
<tr><td><code id="get_logistic_coef_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved coefficient file.  Default is &quot;LR_coef&quot;.</p>
</td></tr>
<tr><td><code id="get_logistic_coef_+3A_dir_path">dir_path</code></td>
<td>
<p>The Path for periodically saved coefficient file. Default is &quot;./model&quot;.</p>
</td></tr>
<tr><td><code id="get_logistic_coef_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save the result or not. Default is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with logistic coefficients.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># dataset spliting
sub = cv_split(UCICreditCard, k = 30)[[1]]
dat = UCICreditCard[sub,]
#rename the target variable
dat = re_name(dat, "default.payment.next.month", "target")
dat = data_cleansing(dat, target = "target", obs_id = "ID",
occur_time = "apply_date", miss_values =  list("", -1))
#train_ test pliting
train_test = train_test_split(dat, split_type = "OOT", prop = 0.7,
                                occur_time = "apply_date")
dat_train = train_test$train
dat_test = train_test$test
#get breaks of all predictive variables
x_list = c("PAY_0", "LIMIT_BAL", "PAY_AMT5", "EDUCATION", "PAY_3", "PAY_2")
breaks_list = get_breaks_all(dat = dat_train, target = "target",
                              x_list = x_list, occur_time = "apply_date", ex_cols = "ID",
save_data = FALSE, note = FALSE)
#woe transforming
train_woe = woe_trans_all(dat = dat_train,
                          target = "target",
                          breaks_list = breaks_list,
                          woe_name = FALSE)
test_woe = woe_trans_all(dat = dat_test,
                       target = "target",
                         breaks_list = breaks_list,
                         note = FALSE)
Formula = as.formula(paste("target", paste(x_list, collapse = ' + '), sep = ' ~ '))
set.seed(46)
lr_model = glm(Formula, data = train_woe[, c("target", x_list)], family = binomial(logit))
#get LR coefficient
dt_imp_LR = get_logistic_coef(lg_model = lr_model, save_data = FALSE)
bins_table = get_bins_table_all(dat = dat_train, target = "target",
                                x_list = x_list,dat_test = dat_test,
                               breaks_list = breaks_list, note = FALSE)
#score card
LR_score_card = get_score_card(lg_model = lr_model, bins_table, target = "target")
#scoring
train_pred = dat_train[, c("ID", "apply_date", "target")]
test_pred = dat_test[, c("ID", "apply_date", "target")]
train_pred$pred_LR = score_transfer(model = lr_model,
                                                    tbl_woe = train_woe,
                                                    save_data = TRUE)[, "score"]

test_pred$pred_LR = score_transfer(model = lr_model,
tbl_woe = test_woe, save_data = FALSE)[, "score"]
</code></pre>

<hr>
<h2 id='get_median'>get central value.</h2><span id='topic+get_median'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_median(x, weight_avg = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_median_+3A_x">x</code></td>
<td>
<p>A vector or list.</p>
</td></tr>
<tr><td><code id="get_median_+3A_weight_avg">weight_avg</code></td>
<td>
<p>avg weight to calculate means.</p>
</td></tr>
</table>

<hr>
<h2 id='get_names'>Get Variable Names</h2><span id='topic+get_names'></span>

<h3>Description</h3>

<p><code>get_names</code> is  for getting names of particular classes of variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_names(
  dat,
  types = c("logical", "factor", "character", "numeric", "integer64", "integer",
    "double", "Date", "POSIXlt", "POSIXct", "POSIXt"),
  ex_cols = NULL,
  get_ex = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_names_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="get_names_+3A_types">types</code></td>
<td>
<p>The class or types of variables which names to get. Default: c('numeric', 'integer', 'double')</p>
</td></tr>
<tr><td><code id="get_names_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_names_+3A_get_ex">get_ex</code></td>
<td>
<p>Logical ,if TRUE, return a list contains names of excluded variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list contains names of variables
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_x_list">get_x_list</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x_list = get_names(dat = UCICreditCard, types = c('factor', 'character'),
ex_cols = c("default.payment.next.month","ID$|_date$"), get_ex = FALSE)
x_list = get_names(dat = UCICreditCard, types = c('numeric', 'character', "integer"),
ex_cols = c("default.payment.next.month", "ID$|SEX "), get_ex = FALSE)
</code></pre>

<hr>
<h2 id='get_nas_random'>get_nas_random</h2><span id='topic+get_nas_random'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_nas_random(dat)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_nas_random_+3A_dat">dat</code></td>
<td>
<p>A data.frame contained only predict variables.</p>
</td></tr>
</table>

<hr>
<h2 id='get_psi_all'>Calculate Population Stability Index (PSI)
<code>get_psi</code> is used to calculate Population Stability Index (PSI)  of an independent variable.
<code>get_psi_all</code> can loop through PSI for all specified independent variables.</h2><span id='topic+get_psi_all'></span><span id='topic+get_psi'></span>

<h3>Description</h3>

<p>Calculate Population Stability Index (PSI)
<code>get_psi</code> is used to calculate Population Stability Index (PSI)  of an independent variable.
<code>get_psi_all</code> can loop through PSI for all specified independent variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_psi_all(
  dat,
  x_list = NULL,
  target = NULL,
  dat_test = NULL,
  breaks_list = NULL,
  occur_time = NULL,
  start_date = NULL,
  cut_date = NULL,
  oot_pct = 0.7,
  pos_flag = NULL,
  parallel = FALSE,
  ex_cols = NULL,
  as_table = FALSE,
  g = 10,
  bins_no = TRUE,
  note = FALSE
)

get_psi(
  dat,
  x,
  target = NULL,
  dat_test = NULL,
  occur_time = NULL,
  start_date = NULL,
  cut_date = NULL,
  pos_flag = NULL,
  breaks = NULL,
  breaks_list = NULL,
  oot_pct = 0.7,
  g = 10,
  as_table = TRUE,
  note = FALSE,
  bins_no = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_psi_all_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="get_psi_all_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="get_psi_all_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="get_psi_all_+3A_dat_test">dat_test</code></td>
<td>
<p>A data.frame of test data. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_psi_all_+3A_breaks_list">breaks_list</code></td>
<td>
<p>A table containing a list of splitting points for each independent variable. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_psi_all_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of the variable that represents the time at which each observation takes place.</p>
</td></tr>
<tr><td><code id="get_psi_all_+3A_start_date">start_date</code></td>
<td>
<p>The earliest occurrence time of observations.</p>
</td></tr>
<tr><td><code id="get_psi_all_+3A_cut_date">cut_date</code></td>
<td>
<p>Time points for spliting data sets, e.g. : spliting Actual and Expected data sets.</p>
</td></tr>
<tr><td><code id="get_psi_all_+3A_oot_pct">oot_pct</code></td>
<td>
<p>Percentage of observations retained for overtime test (especially to calculate PSI). Defualt is 0.7</p>
</td></tr>
<tr><td><code id="get_psi_all_+3A_pos_flag">pos_flag</code></td>
<td>
<p>Value of positive class, Default is &quot;1&quot;.</p>
</td></tr>
<tr><td><code id="get_psi_all_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is FALSE.</p>
</td></tr>
<tr><td><code id="get_psi_all_+3A_ex_cols">ex_cols</code></td>
<td>
<p>Names of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_psi_all_+3A_as_table">as_table</code></td>
<td>
<p>Logical, output results in a table. Default is TRUE.</p>
</td></tr>
<tr><td><code id="get_psi_all_+3A_g">g</code></td>
<td>
<p>Number of initial breakpoints for equal frequency binning.</p>
</td></tr>
<tr><td><code id="get_psi_all_+3A_bins_no">bins_no</code></td>
<td>
<p>Logical, add serial numbers to bins. Default is TRUE.</p>
</td></tr>
<tr><td><code id="get_psi_all_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="get_psi_all_+3A_x">x</code></td>
<td>
<p>The name of an independent variable.</p>
</td></tr>
<tr><td><code id="get_psi_all_+3A_breaks">breaks</code></td>
<td>
<p>Splitting points for an independent variable. Default is NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>PSI Rules for evaluating the stability of a predictor
Less than 0.02: Very stable
0.02 to 0.1: Stable
0.1 to 0.2: Unstable
0.2 to 0.5] : Change
more than 0.5: Great change
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_iv">get_iv</a></code>,<code><a href="#topic+get_iv_all">get_iv_all</a></code>,<code><a href="#topic+get_psi">get_psi</a></code>,<code><a href="#topic+get_psi_all">get_psi_all</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#  dat_test is null
get_psi(dat = UCICreditCard, x = "PAY_3", occur_time = "apply_date")
# dat_test is not all
# train_test split
train_test = train_test_split(dat = UCICreditCard, prop = 0.7, split_type = "OOT",
                             occur_time = "apply_date", start_date = NULL, cut_date = NULL,
                            save_data = FALSE, note = FALSE)
dat_ex = train_test$train
dat_ac = train_test$test
# generate psi table
get_psi(dat = dat_ex, dat_test = dat_ac, x = "PAY_3",
       occur_time = "apply_date", bins_no = TRUE)
</code></pre>

<hr>
<h2 id='get_psi_iv_all'>Calculate IV &amp; PSI</h2><span id='topic+get_psi_iv_all'></span><span id='topic+get_psi_iv'></span>

<h3>Description</h3>

<p><code>get_iv_psi</code>  is used to calculate Information Value (IV)  and Population Stability Index (PSI) of an independent variable.
<code>get_iv_psi_all</code> can loop through IV &amp; PSI for all specified independent variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_psi_iv_all(
  dat,
  dat_test = NULL,
  x_list = NULL,
  target,
  ex_cols = NULL,
  pos_flag = NULL,
  breaks_list = NULL,
  occur_time = NULL,
  oot_pct = 0.7,
  equal_bins = FALSE,
  cut_bin = "equal_depth",
  tree_control = NULL,
  bins_control = NULL,
  bins_total = FALSE,
  best = TRUE,
  g = 10,
  as_table = TRUE,
  note = FALSE,
  parallel = FALSE,
  bins_no = TRUE
)

get_psi_iv(
  dat,
  dat_test = NULL,
  x,
  target,
  pos_flag = NULL,
  breaks = NULL,
  breaks_list = NULL,
  occur_time = NULL,
  oot_pct = 0.7,
  equal_bins = FALSE,
  cut_bin = "equal_depth",
  tree_control = NULL,
  bins_control = NULL,
  bins_total = FALSE,
  best = TRUE,
  g = 10,
  as_table = TRUE,
  note = FALSE,
  bins_no = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_psi_iv_all_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_dat_test">dat_test</code></td>
<td>
<p>A data.frame of test data. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_pos_flag">pos_flag</code></td>
<td>
<p>The value of positive class of target variable, default: &quot;1&quot;.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_breaks_list">breaks_list</code></td>
<td>
<p>A table containing a list of splitting points for each independent variable. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of the variable that represents the time at which each observation takes place.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_oot_pct">oot_pct</code></td>
<td>
<p>Percentage of observations retained for overtime test (especially to calculate PSI). Defualt is 0.7</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_equal_bins">equal_bins</code></td>
<td>
<p>Logical, generates initial breaks for equal frequency or width binning.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_cut_bin">cut_bin</code></td>
<td>
<p>A string, if equal_bins is TRUE, 'equal_depth' or 'equal_width', default is 'equal_depth'.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_tree_control">tree_control</code></td>
<td>
<p>Parameters of using Decision Tree to segment initial breaks. See detials: <code><a href="#topic+get_tree_breaks">get_tree_breaks</a></code></p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_bins_control">bins_control</code></td>
<td>
<p>Parameters  used to control binning.  See detials: <code><a href="#topic+select_best_class">select_best_class</a></code>, <code><a href="#topic+select_best_breaks">select_best_breaks</a></code></p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_bins_total">bins_total</code></td>
<td>
<p>Logical, total sum for each variable.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_best">best</code></td>
<td>
<p>Logical, merge initial breaks to get optimal breaks for binning.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_g">g</code></td>
<td>
<p>Number of initial breakpoints for equal frequency binning.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_as_table">as_table</code></td>
<td>
<p>Logical, output results in a table. Default is TRUE.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is FALSE.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_bins_no">bins_no</code></td>
<td>
<p>Logical, add serial numbers to bins. Default is FALSE.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_x">x</code></td>
<td>
<p>The name of an independent variable.</p>
</td></tr>
<tr><td><code id="get_psi_iv_all_+3A_breaks">breaks</code></td>
<td>
<p>Splitting points for an independent variable. Default is NULL.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+get_iv">get_iv</a></code>,<code><a href="#topic+get_iv_all">get_iv_all</a></code>,<code><a href="#topic+get_psi">get_psi</a></code>,<code><a href="#topic+get_psi_all">get_psi_all</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>iv_list = get_psi_iv_all(dat = UCICreditCard[1:1000, ],
x_list = names(UCICreditCard)[3:5], equal_bins = TRUE,
target = "default.payment.next.month", ex_cols = "ID|apply_date")
get_psi_iv(UCICreditCard, x = "PAY_3",
target = "default.payment.next.month",bins_total = TRUE)
</code></pre>

<hr>
<h2 id='get_psi_plots'>Plot PSI(Population Stability Index)</h2><span id='topic+get_psi_plots'></span><span id='topic+psi_plot'></span>

<h3>Description</h3>

<p>You can use the <code>psi_plot</code> to plot PSI of your data.
<code>get_psi_plots</code> can loop through plots for all specified independent variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_psi_plots(
  dat_train,
  dat_test = NULL,
  x_list = NULL,
  ex_cols = NULL,
  breaks_list = NULL,
  occur_time = NULL,
  g = 10,
  plot_show = TRUE,
  save_data = FALSE,
  file_name = NULL,
  parallel = FALSE,
  g_width = 8,
  dir_path = tempdir()
)

psi_plot(
  dat_train,
  x,
  dat_test = NULL,
  occur_time = NULL,
  g_width = 8,
  breaks_list = NULL,
  breaks = NULL,
  g = 10,
  plot_show = TRUE,
  save_data = FALSE,
  dir_path = tempdir()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_psi_plots_+3A_dat_train">dat_train</code></td>
<td>
<p>A data.frame with independent variables.</p>
</td></tr>
<tr><td><code id="get_psi_plots_+3A_dat_test">dat_test</code></td>
<td>
<p>A data.frame of test data. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_psi_plots_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="get_psi_plots_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_psi_plots_+3A_breaks_list">breaks_list</code></td>
<td>
<p>A table containing a list of splitting points for each independent variable. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_psi_plots_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of occur time.</p>
</td></tr>
<tr><td><code id="get_psi_plots_+3A_g">g</code></td>
<td>
<p>Number of initial breakpoints for equal frequency binning.</p>
</td></tr>
<tr><td><code id="get_psi_plots_+3A_plot_show">plot_show</code></td>
<td>
<p>Logical, show model performance in current graphic device. Default is FALSE.</p>
</td></tr>
<tr><td><code id="get_psi_plots_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is FALSE.</p>
</td></tr>
<tr><td><code id="get_psi_plots_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved data file. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_psi_plots_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is FALSE.</p>
</td></tr>
<tr><td><code id="get_psi_plots_+3A_g_width">g_width</code></td>
<td>
<p>The width of graphs.</p>
</td></tr>
<tr><td><code id="get_psi_plots_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved graphic files.</p>
</td></tr>
<tr><td><code id="get_psi_plots_+3A_x">x</code></td>
<td>
<p>The name of an independent variable.</p>
</td></tr>
<tr><td><code id="get_psi_plots_+3A_breaks">breaks</code></td>
<td>
<p>Splitting points for a continues variable.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>train_test = train_test_split(UCICreditCard[1:1000,], split_type = "Random",
 prop = 0.8, save_data = FALSE)
dat_train = train_test$train
dat_test = train_test$test
get_psi_plots(dat_train[, c(8, 9)], dat_test = dat_test[, c(8, 9)])
</code></pre>

<hr>
<h2 id='get_score_card'>Score Card</h2><span id='topic+get_score_card'></span>

<h3>Description</h3>

<p><code>get_score_card</code> is  for generating a stardard scorecard
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_score_card(
  lg_model,
  target,
  bins_table,
  a = 600,
  b = 50,
  file_name = NULL,
  dir_path = tempdir(),
  save_data = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_score_card_+3A_lg_model">lg_model</code></td>
<td>
<p>An object of glm model.</p>
</td></tr>
<tr><td><code id="get_score_card_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="get_score_card_+3A_bins_table">bins_table</code></td>
<td>
<p>a data.frame generated by <code><a href="#topic+get_bins_table">get_bins_table</a></code></p>
</td></tr>
<tr><td><code id="get_score_card_+3A_a">a</code></td>
<td>
<p>Base line of score.</p>
</td></tr>
<tr><td><code id="get_score_card_+3A_b">b</code></td>
<td>
<p>Numeric.Increased scores from doubling Odds.</p>
</td></tr>
<tr><td><code id="get_score_card_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved scorecard file. Default is &quot;LR_Score_Card&quot;.</p>
</td></tr>
<tr><td><code id="get_score_card_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved scorecard file. Default is &quot;./model&quot;</p>
</td></tr>
<tr><td><code id="get_score_card_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>scorecard
</p>


<h3>Examples</h3>

<pre><code class='language-R'># dataset spliting
sub = cv_split(UCICreditCard, k = 30)[[1]]
dat = UCICreditCard[sub,]
#rename the target variable
dat = re_name(dat, "default.payment.next.month", "target")
dat = data_cleansing(dat, target = "target", obs_id = "ID",
occur_time = "apply_date", miss_values =  list("", -1))
#train_ test pliting
train_test = train_test_split(dat, split_type = "OOT", prop = 0.7,
                                occur_time = "apply_date")
dat_train = train_test$train
dat_test = train_test$test
#get breaks of all predictive variables
x_list = c("PAY_0", "LIMIT_BAL", "PAY_AMT5", "EDUCATION", "PAY_3", "PAY_2")
breaks_list = get_breaks_all(dat = dat_train, target = "target",
                              x_list = x_list, occur_time = "apply_date", ex_cols = "ID",
save_data = FALSE, note = FALSE)
#woe transforming
train_woe = woe_trans_all(dat = dat_train,
                          target = "target",
                          breaks_list = breaks_list,
                          woe_name = FALSE)
test_woe = woe_trans_all(dat = dat_test,
                       target = "target",
                         breaks_list = breaks_list,
                         note = FALSE)
Formula = as.formula(paste("target", paste(x_list, collapse = ' + '), sep = ' ~ '))
set.seed(46)
lr_model = glm(Formula, data = train_woe[, c("target", x_list)], family = binomial(logit))
#get LR coefficient
dt_imp_LR = get_logistic_coef(lg_model = lr_model, save_data = FALSE)
bins_table = get_bins_table_all(dat = dat_train, target = "target",
                                 dat_test = dat_test,
                                x_list = x_list,
                               breaks_list = breaks_list, note = FALSE)
#score card
LR_score_card = get_score_card(lg_model = lr_model, bins_table, target = "target")
#scoring
train_pred = dat_train[, c("ID", "apply_date", "target")]
test_pred = dat_test[, c("ID", "apply_date", "target")]
train_pred$pred_LR = score_transfer(model = lr_model,
                                                    tbl_woe = train_woe,
                                                    save_data = FALSE)[, "score"]

test_pred$pred_LR = score_transfer(model = lr_model,
tbl_woe = test_woe, save_data = FALSE)[, "score"]
</code></pre>

<hr>
<h2 id='get_shadow_nas'>get_shadow_nas</h2><span id='topic+get_shadow_nas'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_shadow_nas(dat)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_shadow_nas_+3A_dat">dat</code></td>
<td>
<p>A data.frame contained only predict variables.</p>
</td></tr>
</table>

<hr>
<h2 id='get_sim_sign_lambda'>get_sim_sign_lambda
<code>get_sim_sign_lambda</code> is for get Best lambda required in lasso_filter. This function required in <code>lasso_filter</code></h2><span id='topic+get_sim_sign_lambda'></span>

<h3>Description</h3>

<p>get_sim_sign_lambda
<code>get_sim_sign_lambda</code> is for get Best lambda required in lasso_filter. This function required in <code>lasso_filter</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_sim_sign_lambda(lasso_model, sim_sign = "negtive")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_sim_sign_lambda_+3A_lasso_model">lasso_model</code></td>
<td>
<p>A lasso model genereted by glmnet.</p>
</td></tr>
<tr><td><code id="get_sim_sign_lambda_+3A_sim_sign">sim_sign</code></td>
<td>
<p>Default is &quot;negtive&quot;. This is related to pos_plag. If pos_flag equals 1 or 1, the value must be set to negetive. If pos_flag equals 0 or 0, the value must be set to positive.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>lambda.sim_sign give the model with the same positive or negetive coefficients of all variables.
</p>


<h3>Value</h3>

<p>Lanmbda value
</p>

<hr>
<h2 id='get_tree_breaks'>Getting the breaks for terminal nodes from decision tree</h2><span id='topic+get_tree_breaks'></span>

<h3>Description</h3>

<p><code>get_tree_breaks</code> is for generating initial braks by decision tree for a numerical or nominal variable.
The <code>get_breaks</code> function is a simpler wrapper for <code>get_tree_breaks</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_tree_breaks(
  dat,
  x,
  target,
  pos_flag = NULL,
  tree_control = list(p = 0.02, cp = 1e-06, xval = 5, maxdepth = 10),
  sp_values = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_tree_breaks_+3A_dat">dat</code></td>
<td>
<p>A data frame with x and target.</p>
</td></tr>
<tr><td><code id="get_tree_breaks_+3A_x">x</code></td>
<td>
<p>name of variable to cut breaks by tree.</p>
</td></tr>
<tr><td><code id="get_tree_breaks_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="get_tree_breaks_+3A_pos_flag">pos_flag</code></td>
<td>
<p>The value of positive class of target variable, default: &quot;1&quot;.</p>
</td></tr>
<tr><td><code id="get_tree_breaks_+3A_tree_control">tree_control</code></td>
<td>
<p>the list of parameters to control cutting initial breaks by decision tree.
</p>

<ul>
<li> <p><code>p</code> the minimum percent of observations in any terminal &lt;leaf&gt; node. 0 &lt; p&lt; 1; 0.01 to 0.1 usually work.
</p>
</li>
<li> <p><code>cp</code> complexity parameter. the larger, the more conservative the algorithm will be. 0 &lt; cp&lt; 1 ; 0.0001 to 0.0000001 usually work.
</p>
</li>
<li> <p><code>xval</code> number of cross-validations.Default: 5
</p>
</li>
<li> <p><code>max_depth</code> maximum depth of a tree. Default: 10
</p>
</li></ul>
</td></tr>
<tr><td><code id="get_tree_breaks_+3A_sp_values">sp_values</code></td>
<td>
<p>A list of special value. Default: NULL.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+get_breaks">get_breaks</a></code>, <code><a href="#topic+get_breaks_all">get_breaks_all</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#tree breaks
tree_control = list(p = 0.02, cp = 0.000001, xval = 5, maxdepth = 10)
tree_breaks = get_tree_breaks(dat = UCICreditCard, x = "MARRIAGE",
target = "default.payment.next.month", tree_control = tree_control)
</code></pre>

<hr>
<h2 id='get_x_list'>Get X List.</h2><span id='topic+get_x_list'></span>

<h3>Description</h3>

<p><code>get_x_list</code> is  for getting intersect names of x_list, train and test.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_x_list(
  dat_train = NULL,
  dat_test = NULL,
  x_list = NULL,
  ex_cols = NULL,
  note = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_x_list_+3A_dat_train">dat_train</code></td>
<td>
<p>A data.frame with independent variables.</p>
</td></tr>
<tr><td><code id="get_x_list_+3A_dat_test">dat_test</code></td>
<td>
<p>Another data.frame.</p>
</td></tr>
<tr><td><code id="get_x_list_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="get_x_list_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="get_x_list_+3A_note">note</code></td>
<td>
<p>Logical. Outputs info. Default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list contains names of variables
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_names">get_names</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x_list = get_x_list(x_list = NULL,dat_train = UCICreditCard,
ex_cols = c("default.payment.next.month","ID$|_date$"))
</code></pre>

<hr>
<h2 id='high_cor_selector'>Compare the two highly correlated variables</h2><span id='topic+high_cor_selector'></span>

<h3>Description</h3>

<p><code>high_cor_selector</code> is function for comparing the two highly correlated variables, select a variable with the largest IV value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>high_cor_selector(
  cor_mat,
  p = 0.95,
  x_list = NULL,
  com_list = NULL,
  retain = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="high_cor_selector_+3A_cor_mat">cor_mat</code></td>
<td>
<p>A correlation matrix.</p>
</td></tr>
<tr><td><code id="high_cor_selector_+3A_p">p</code></td>
<td>
<p>The threshold of high correlation.</p>
</td></tr>
<tr><td><code id="high_cor_selector_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="high_cor_selector_+3A_com_list">com_list</code></td>
<td>
<p>A data.frame with important values of each variable. eg : IV_list.</p>
</td></tr>
<tr><td><code id="high_cor_selector_+3A_retain">retain</code></td>
<td>
<p>Logical, output selected variables, if FALSE, output filtered variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of selected variables.
</p>

<hr>
<h2 id='is_date'>is_date</h2><span id='topic+is_date'></span>

<h3>Description</h3>

<p><code>is_date</code> is a small function for distinguishing time formats
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_date(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_date_+3A_x">x</code></td>
<td>
<p>list or vectors</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Date.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_date(lendingclub$issue_d)
</code></pre>

<hr>
<h2 id='knn_nas_imp'>Imputate nas using KNN</h2><span id='topic+knn_nas_imp'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>knn_nas_imp(
  dat,
  x,
  nas_rate = NULL,
  mat_nas_shadow = NULL,
  dt_nas_random = NULL,
  k = 10,
  scale = FALSE,
  method = "median",
  miss_value_num = -1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="knn_nas_imp_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables.</p>
</td></tr>
<tr><td><code id="knn_nas_imp_+3A_x">x</code></td>
<td>
<p>The name of variable to process.</p>
</td></tr>
<tr><td><code id="knn_nas_imp_+3A_nas_rate">nas_rate</code></td>
<td>
<p>A list contains nas rate of each variable.</p>
</td></tr>
<tr><td><code id="knn_nas_imp_+3A_mat_nas_shadow">mat_nas_shadow</code></td>
<td>
<p>A shadow matrix of variables which contain nas.</p>
</td></tr>
<tr><td><code id="knn_nas_imp_+3A_dt_nas_random">dt_nas_random</code></td>
<td>
<p>A data.frame with random nas imputation.</p>
</td></tr>
<tr><td><code id="knn_nas_imp_+3A_k">k</code></td>
<td>
<p>Number of neighbors of each obs which x is missing.</p>
</td></tr>
<tr><td><code id="knn_nas_imp_+3A_scale">scale</code></td>
<td>
<p>Logical.Standardization of variable.</p>
</td></tr>
<tr><td><code id="knn_nas_imp_+3A_method">method</code></td>
<td>
<p>The methods of imputation by knn. &quot;median&quot; is knn imputation with k neighbors median, &quot;avg_dist&quot; is knn imputation with k neighbors of distance weighted mean.</p>
</td></tr>
<tr><td><code id="knn_nas_imp_+3A_miss_value_num">miss_value_num</code></td>
<td>
<p>Default value of missing data imputation for numeric variables, Defualt is -1.</p>
</td></tr>
</table>

<hr>
<h2 id='ks_table'>ks_table &amp; plot</h2><span id='topic+ks_table'></span><span id='topic+ks_table_plot'></span><span id='topic+ks_psi_plot'></span><span id='topic+model_key_index'></span>

<h3>Description</h3>

<p><code>ks_table</code> is for generating a model performance table.
<code>ks_table_plot</code> is for ploting the table generated by <code>ks_table</code>
<code>ks_psi_plot</code> is for K-S &amp; PSI distrbution ploting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ks_table(
  train_pred,
  test_pred = NULL,
  target = NULL,
  score = NULL,
  g = 10,
  breaks = NULL,
  pos_flag = list("1", "1", "Bad", 1)
)

ks_table_plot(
  train_pred,
  test_pred,
  target = "target",
  score = "score",
  g = 10,
  plot_show = TRUE,
  g_width = 12,
  file_name = NULL,
  save_data = FALSE,
  dir_path = tempdir(),
  gtitle = NULL
)

ks_psi_plot(
  train_pred,
  test_pred,
  target = "target",
  score = "score",
  gtitle = NULL,
  plot_show = TRUE,
  g_width = 12,
  save_data = FALSE,
  breaks = NULL,
  g = 10,
  dir_path = tempdir()
)

model_key_index(tb_pred)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ks_table_+3A_train_pred">train_pred</code></td>
<td>
<p>A data frame of training with predicted prob or score.</p>
</td></tr>
<tr><td><code id="ks_table_+3A_test_pred">test_pred</code></td>
<td>
<p>A data frame of validation with predict prob or score.</p>
</td></tr>
<tr><td><code id="ks_table_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="ks_table_+3A_score">score</code></td>
<td>
<p>The name of prob or score variable.</p>
</td></tr>
<tr><td><code id="ks_table_+3A_g">g</code></td>
<td>
<p>Number of breaks for prob or score.</p>
</td></tr>
<tr><td><code id="ks_table_+3A_breaks">breaks</code></td>
<td>
<p>Splitting points of prob or score.</p>
</td></tr>
<tr><td><code id="ks_table_+3A_pos_flag">pos_flag</code></td>
<td>
<p>The value of positive class of target variable, default: &quot;1&quot;.</p>
</td></tr>
<tr><td><code id="ks_table_+3A_plot_show">plot_show</code></td>
<td>
<p>Logical, show model performance in current graphic device. Default is FALSE.</p>
</td></tr>
<tr><td><code id="ks_table_+3A_g_width">g_width</code></td>
<td>
<p>Width of graphs.</p>
</td></tr>
<tr><td><code id="ks_table_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved data file. Default is NULL.</p>
</td></tr>
<tr><td><code id="ks_table_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is FALSE.</p>
</td></tr>
<tr><td><code id="ks_table_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved graphic files.</p>
</td></tr>
<tr><td><code id="ks_table_+3A_gtitle">gtitle</code></td>
<td>
<p>The title of the graph &amp; The name for periodically saved graphic file. Default is &quot;_ks_psi_table&quot;.</p>
</td></tr>
<tr><td><code id="ks_table_+3A_tb_pred">tb_pred</code></td>
<td>
<p>A table generated by code<a href="#topic+ks_table">ks_table</a></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>sub = cv_split(UCICreditCard, k = 30)[[1]]
dat = UCICreditCard[sub,]
dat = re_name(dat, "default.payment.next.month", "target")
dat = data_cleansing(dat, target = "target", obs_id = "ID",
occur_time = "apply_date", miss_values = list("", -1))

train_test = train_test_split(dat, split_type = "OOT", prop = 0.7,
                                occur_time = "apply_date")
dat_train = train_test$train
dat_test = train_test$test
x_list = c("PAY_0", "LIMIT_BAL", "PAY_AMT5", "PAY_3", "PAY_2")
Formula = as.formula(paste("target", paste(x_list, collapse = ' + '), sep = ' ~ '))
set.seed(46)
lr_model = glm(Formula, data = dat_train[, c("target", x_list)], family = binomial(logit))

dat_train$pred_LR = round(predict(lr_model, dat_train[, x_list], type = "response"), 5)
dat_test$pred_LR = round(predict(lr_model, dat_test[, x_list], type = "response"), 5)
# model evaluation
ks_psi_plot(train_pred = dat_train, test_pred = dat_test,
                            score = "pred_LR", target = "target",
                            plot_show = TRUE)
tb_pred = ks_table_plot(train_pred = dat_train, test_pred = dat_test,
                                        score = "pred_LR", target = "target",
                                     g = 10, g_width = 13, plot_show = FALSE)
key_index = model_key_index(tb_pred)
</code></pre>

<hr>
<h2 id='ks_value'>ks_value</h2><span id='topic+ks_value'></span>

<h3>Description</h3>

<p><code>ks_value</code> is for get K-S value for a prob or score.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ks_value(target, prob)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ks_value_+3A_target">target</code></td>
<td>
<p>Vector of target.</p>
</td></tr>
<tr><td><code id="ks_value_+3A_prob">prob</code></td>
<td>
<p>A list of redict probability or score.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>KS value
</p>

<hr>
<h2 id='lasso_filter'>Variable selection by LASSO</h2><span id='topic+lasso_filter'></span>

<h3>Description</h3>

<p><code>lasso_filter</code> filter variables by lasso.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lasso_filter(
  dat_train,
  dat_test = NULL,
  target = NULL,
  x_list = NULL,
  pos_flag = NULL,
  ex_cols = NULL,
  sim_sign = "negtive",
  best_lambda = "lambda.auc",
  save_data = FALSE,
  plot.it = TRUE,
  seed = 46,
  file_name = NULL,
  dir_path = tempdir(),
  note = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="lasso_filter_+3A_dat_train">dat_train</code></td>
<td>
<p>A data.frame with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="lasso_filter_+3A_dat_test">dat_test</code></td>
<td>
<p>A data.frame of test data. Default is NULL.</p>
</td></tr>
<tr><td><code id="lasso_filter_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="lasso_filter_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="lasso_filter_+3A_pos_flag">pos_flag</code></td>
<td>
<p>The value of positive class of target variable, default: &quot;1&quot;.</p>
</td></tr>
<tr><td><code id="lasso_filter_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="lasso_filter_+3A_sim_sign">sim_sign</code></td>
<td>
<p>The coefficients of all variables should be all negetive or positive, after turning to woe. Default is &quot;negetive&quot; for pos_flag is &quot;1&quot;.</p>
</td></tr>
<tr><td><code id="lasso_filter_+3A_best_lambda">best_lambda</code></td>
<td>
<p>Metheds of best lambda stardards using to filter variables by LASSO. There are 3 methods: (&quot;lambda.auc&quot;, &quot;lambda.ks&quot;, &quot;lambda.sim_sign&quot;) . Default is  &quot;lambda.auc&quot;.</p>
</td></tr>
<tr><td><code id="lasso_filter_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is FALSE</p>
</td></tr>
<tr><td><code id="lasso_filter_+3A_plot.it">plot.it</code></td>
<td>
<p>Logical, shrinkage plot. Default is TRUE.</p>
</td></tr>
<tr><td><code id="lasso_filter_+3A_seed">seed</code></td>
<td>
<p>Random number seed. Default is 46.</p>
</td></tr>
<tr><td><code id="lasso_filter_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved results files. Default is &quot;Feature_selected_LASSO&quot;.</p>
</td></tr>
<tr><td><code id="lasso_filter_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved results files. Default is &quot;./variable&quot;.</p>
</td></tr>
<tr><td><code id="lasso_filter_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of filtered x variables by lasso.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> sub = cv_split(UCICreditCard, k = 40)[[1]]
 dat = UCICreditCard[sub,]
 dat = re_name(dat, "default.payment.next.month", "target")
 dat_train = data_cleansing(dat, target = "target", obs_id = "ID", occur_time = "apply_date",
  miss_values = list("", -1))
 dat_train = process_nas(dat_train)
 #get breaks of all predictive variables
 x_list = c("PAY_0", "LIMIT_BAL", "PAY_AMT5", "EDUCATION", "PAY_3", "PAY_2")
 breaks_list = get_breaks_all(dat = dat_train, target = "target",
                                x_list = x_list, occur_time = "apply_date", ex_cols = "ID",
  save_data = FALSE, note = FALSE)
 #woe transform
 train_woe = woe_trans_all(dat = dat_train,x_list = x_list,
                            target = "target",
                            breaks_list = breaks_list,
                            woe_name = FALSE)
 lasso_filter(dat_train = train_woe, 
         target = "target", x_list = x_list,
       save_data = FALSE, plot.it = FALSE)
</code></pre>

<hr>
<h2 id='lendingclub'>Lending Club data</h2><span id='topic+lendingclub'></span>

<h3>Description</h3>

<p>This data contains complete loan data for all loans issued through the time period stated, including the current loan status (Current, Late, Fully Paid, etc.) and latest payment information.
The data containing loan data through the &quot;present&quot; contains complete loan data for all loans issued through the previous completed calendar quarter(time period: 2018Q1:2018Q4).
</p>


<h3>Format</h3>

<p>A data frame with 63532 rows and 145 variables.
</p>


<h3>Details</h3>


<ul>
<li><p> id: A unique LC assigned ID for the loan listing.
</p>
</li>
<li><p> issue_d: The month which the loan was funded.
</p>
</li>
<li><p> loan_status: Current status of the loan.
</p>
</li>
<li><p> addr_state: The state provided by the borrower in the loan application.
</p>
</li>
<li><p> acc_open_past_24mths: Number of trades opened in past 24 months.
</p>
</li>
<li><p> all_util: Balance to credit limit on all trades.
</p>
</li>
<li><p> annual_inc: The self:reported annual income provided by the borrower during registration.
</p>
</li>
<li><p> avg_cur_bal: Average current balance of all accounts.
</p>
</li>
<li><p> bc_open_to_buy: Total open to buy on revolving bankcards.
</p>
</li>
<li><p> bc_util: Ratio of total current balance to high credit/credit limit for all bankcard accounts.
</p>
</li>
<li><p> dti: A ratio calculated using the borrower's total monthly debt payments on the total debt obligations, excluding mortgage and the requested LC loan, divided by the borrower's self:reported monthly income.
</p>
</li>
<li><p> dti_joint: A ratio calculated using the co:borrowers' total monthly payments on the total debt obligations, excluding mortgages and the requested LC loan, divided by the co:borrowers' combined self:reported monthly income
</p>
</li>
<li><p> emp_length: Employment length in years. Possible values are between 0 and 10 where 0 means less than one year and 10 means ten or more years.
</p>
</li>
<li><p> emp_title: The job title supplied by the Borrower when applying for the loan.
</p>
</li>
<li><p> funded_amnt_inv: The total amount committed by investors for that loan at that point in time.
</p>
</li>
<li><p> grade: LC assigned loan grade
</p>
</li>
<li><p> inq_last_12m: Number of credit inquiries in past 12 months
</p>
</li>
<li><p> installment: The monthly payment owed by the borrower if the loan originates.
</p>
</li>
<li><p> max_bal_bc: Maximum current balance owed on all revolving accounts
</p>
</li>
<li><p> mo_sin_old_il_acct: Months since oldest bank installment account opened
</p>
</li>
<li><p> mo_sin_old_rev_tl_op: Months since oldest revolving account opened
</p>
</li>
<li><p> mo_sin_rcnt_rev_tl_op: Months since most recent revolving account opened
</p>
</li>
<li><p> mo_sin_rcnt_tl: Months since most recent account opened
</p>
</li>
<li><p> mort_acc: Number of mortgage accounts.
</p>
</li>
<li><p> pct_tl_nvr_dlq: Percent of trades never delinquent
</p>
</li>
<li><p> percent_bc_gt_75: Percentage of all bankcard accounts &gt; 75
</p>
</li>
<li><p> purpose: A category provided by the borrower for the loan request.
</p>
</li>
<li><p> sub_grade: LC assigned loan subgrade
</p>
</li>
<li><p> term: The number of payments on the loan. Values are in months and can be either 36 or 60.
</p>
</li>
<li><p> tot_cur_bal: Total current balance of all accounts
</p>
</li>
<li><p> tot_hi_cred_lim: Total high credit/credit limit
</p>
</li>
<li><p> total_acc: The total number of credit lines currently in the borrower's credit file
</p>
</li>
<li><p> total_bal_ex_mort: Total credit balance excluding mortgage
</p>
</li>
<li><p> total_bc_limit: Total bankcard high credit/credit limit
</p>
</li>
<li><p> total_cu_tl: Number of finance trades
</p>
</li>
<li><p> total_il_high_credit_limit: Total installment high credit/credit limit
</p>
</li>
<li><p> verification_status_joint: Indicates if the co:borrowers' joint income was verified by LC, not verified, or if the income source was verified
</p>
</li>
<li><p> zip_code: The first 3 numbers of the zip code provided by the borrower in the loan application.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+UCICreditCard">UCICreditCard</a></code>
</p>

<hr>
<h2 id='lift_value'>lift_value</h2><span id='topic+lift_value'></span>

<h3>Description</h3>

<p><code>lift_value</code> is for getting max lift value for a prob or score.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lift_value(target, prob)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="lift_value_+3A_target">target</code></td>
<td>
<p>Vector of target.</p>
</td></tr>
<tr><td><code id="lift_value_+3A_prob">prob</code></td>
<td>
<p>A list of predict probability or score.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Max lift value
</p>

<hr>
<h2 id='local_outlier_factor'>local_outlier_factor
<code>local_outlier_factor</code>  is function for calculating the lof factor for a data set using knn
This function is not intended to be used by end user.</h2><span id='topic+local_outlier_factor'></span>

<h3>Description</h3>

<p>local_outlier_factor
<code>local_outlier_factor</code>  is function for calculating the lof factor for a data set using knn
This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>local_outlier_factor(dat, k = 10)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="local_outlier_factor_+3A_dat">dat</code></td>
<td>
<p>A data.frame contained only predict variables.</p>
</td></tr>
<tr><td><code id="local_outlier_factor_+3A_k">k</code></td>
<td>
<p>Number of neighbors for LOF.Default is 10.</p>
</td></tr>
</table>

<hr>
<h2 id='log_trans'>Logarithmic transformation</h2><span id='topic+log_trans'></span><span id='topic+log_vars'></span>

<h3>Description</h3>

<p><code>log_trans</code> is for logarithmic transformation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>log_trans(
  dat,
  target,
  x_list = NULL,
  cor_dif = 0.01,
  ex_cols = NULL,
  note = TRUE
)

log_vars(dat, x_list = NULL, target = NULL, cor_dif = 0.01, ex_cols = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="log_trans_+3A_dat">dat</code></td>
<td>
<p>A data.frame.</p>
</td></tr>
<tr><td><code id="log_trans_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="log_trans_+3A_x_list">x_list</code></td>
<td>
<p>A list of x variables.</p>
</td></tr>
<tr><td><code id="log_trans_+3A_cor_dif">cor_dif</code></td>
<td>
<p>The correlation coefficient difference with the target of logarithm transformed variable and original variable.</p>
</td></tr>
<tr><td><code id="log_trans_+3A_ex_cols">ex_cols</code></td>
<td>
<p>Names of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="log_trans_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Log transformed data.frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat = log_trans(dat = UCICreditCard, target = "default.payment.next.month",
x_list =NULL,cor_dif = 0.01,ex_cols = "ID", note = TRUE)
</code></pre>

<hr>
<h2 id='loop_function'>Loop Function.
#' <code>loop_function</code> is an iterator to loop through</h2><span id='topic+loop_function'></span>

<h3>Description</h3>

<p>Loop Function.
#' <code>loop_function</code> is an iterator to loop through
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loop_function(
  func = NULL,
  args = list(data = NULL),
  x_list = NULL,
  bind = "rbind",
  parallel = TRUE,
  as_list = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loop_function_+3A_func">func</code></td>
<td>
<p>A function.</p>
</td></tr>
<tr><td><code id="loop_function_+3A_args">args</code></td>
<td>
<p>A list of argauments required by function.</p>
</td></tr>
<tr><td><code id="loop_function_+3A_x_list">x_list</code></td>
<td>
<p>Names of objects to loop through.</p>
</td></tr>
<tr><td><code id="loop_function_+3A_bind">bind</code></td>
<td>
<p>Complie results, &quot;rbind&quot; &amp; &quot;cbind&quot; are available.</p>
</td></tr>
<tr><td><code id="loop_function_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing.</p>
</td></tr>
<tr><td><code id="loop_function_+3A_as_list">as_list</code></td>
<td>
<p>Logical, whether outputs  to be a list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame or list
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat = UCICreditCard[24:26]
num_x_list = get_names(dat = dat, types = c('numeric', 'integer', 'double'),
                      ex_cols = NULL, get_ex = FALSE)
dat[ ,num_x_list] = loop_function(func = outliers_kmeans_lof, x_list = num_x_list,
                                   args = list(dat = dat),
                                   bind = "cbind", as_list = FALSE,
                                 parallel = FALSE)
</code></pre>

<hr>
<h2 id='love_color'>love_color</h2><span id='topic+love_color'></span>

<h3>Description</h3>

<p><code>love_color</code> is for get plots for a  variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>love_color(color = NULL, type = "Blues", n = 10, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="love_color_+3A_color">color</code></td>
<td>
<p>The name of colors.</p>
</td></tr>
<tr><td><code id="love_color_+3A_type">type</code></td>
<td>
<p>The type of colors, &quot;deep&quot;, or the name of palette:.
The sequential palettes names are Blues BuGn BuPu GnBu Greens Greys Oranges OrRd PuBu PuBuGn PuRd Purples RdPu Reds YlGn YlGnBu YlOrBr YlOrRd
The diverging palettes are BrBG PiYG PRGn PuOr RdBu RdGy RdYlBu RdYlGn Spectral
The qualitative palettes are Accent, Dark2, Paired, Pastel1, Pastel2, Set1, Set2, Set3</p>
</td></tr>
<tr><td><code id="love_color_+3A_n">n</code></td>
<td>
<p>Number of different colors, minimum is 1.</p>
</td></tr>
<tr><td><code id="love_color_+3A_...">...</code></td>
<td>
<p>Other parameters.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>love_color(color="dark_cyan")
</code></pre>

<hr>
<h2 id='low_variance_filter'>Filtering Low Variance Variables</h2><span id='topic+low_variance_filter'></span>

<h3>Description</h3>

<p><code>low_variance_filter</code> is for removing variables with repeated values up to a certain percentage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>low_variance_filter(
  dat,
  lvp = 0.97,
  only_NA = FALSE,
  note = FALSE,
  ex_cols = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="low_variance_filter_+3A_dat">dat</code></td>
<td>
<p>A data frame with x and target.</p>
</td></tr>
<tr><td><code id="low_variance_filter_+3A_lvp">lvp</code></td>
<td>
<p>The maximum percent of unique values (including NAs).</p>
</td></tr>
<tr><td><code id="low_variance_filter_+3A_only_na">only_NA</code></td>
<td>
<p>Logical, only process variables which NA's rate are more than lvp.</p>
</td></tr>
<tr><td><code id="low_variance_filter_+3A_note">note</code></td>
<td>
<p>Logical.Outputs info.Default is TRUE.</p>
</td></tr>
<tr><td><code id="low_variance_filter_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Default is NULL.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat = low_variance_filter(lendingclub[1:1000, ], lvp = 0.9)

</code></pre>

<hr>
<h2 id='lr_params'>Logistic Regression &amp; Scorecard Parameters</h2><span id='topic+lr_params'></span><span id='topic+lr_params_search'></span>

<h3>Description</h3>

<p><code>lr_params</code> is the list of parameters to train a LR model or Scorecard using in  <code><a href="#topic+training_model">training_model</a></code>.
<code>lr_params_search</code> is for searching the optimal parameters of logistic regression,if any parameters of params in <code><a href="#topic+lr_params">lr_params</a></code> is more than one.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lr_params(
  tree_control = list(p = 0.02, cp = 1e-08, xval = 5, maxdepth = 10),
  bins_control = list(bins_num = 10, bins_pct = 0.05, b_chi = 0.02, b_odds = 0.1, b_psi
    = 0.03, b_or = 0.15, mono = 0.2, odds_psi = 0.15, kc = 1),
  f_eval = "ks",
  best_lambda = "lambda.ks",
  method = "random_search",
  iters = 10,
  lasso = TRUE,
  step_wise = TRUE,
  score_card = TRUE,
  sp_values = NULL,
  forced_in = NULL,
  obsweight = c(1, 1),
  thresholds = list(cor_p = 0.8, iv_i = 0.02, psi_i = 0.1, cos_i = 0.5),
  ...
)

lr_params_search(
  method = "random_search",
  dat_train,
  target,
  dat_test = NULL,
  occur_time = NULL,
  x_list = NULL,
  prop = 0.7,
  iters = 10,
  tree_control = list(p = 0.02, cp = 0, xval = 1, maxdepth = 10),
  bins_control = list(bins_num = 10, bins_pct = 0.02, b_chi = 0.02, b_odds = 0.1, b_psi
    = 0.05, b_or = 0.1, mono = 0.1, odds_psi = 0.03, kc = 1),
  thresholds = list(cor_p = 0.8, iv_i = 0.02, psi_i = 0.1, cos_i = 0.6),
  step_wise = FALSE,
  lasso = FALSE,
  f_eval = "ks"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="lr_params_+3A_tree_control">tree_control</code></td>
<td>
<p>the list of parameters to control cutting initial breaks by decision tree. See details at: <code><a href="#topic+get_tree_breaks">get_tree_breaks</a></code></p>
</td></tr>
<tr><td><code id="lr_params_+3A_bins_control">bins_control</code></td>
<td>
<p>the list of parameters to control merging initial breaks. See details at: <code><a href="#topic+select_best_breaks">select_best_breaks</a></code>,<code><a href="#topic+select_best_class">select_best_class</a></code></p>
</td></tr>
<tr><td><code id="lr_params_+3A_f_eval">f_eval</code></td>
<td>
<p>Custimized evaluation function, &quot;ks&quot; &amp; &quot;auc&quot; are available.</p>
</td></tr>
<tr><td><code id="lr_params_+3A_best_lambda">best_lambda</code></td>
<td>
<p>Metheds of best lanmbda stardards using to filter variables by LASSO. There are 3 methods: (&quot;lambda.auc&quot;, &quot;lambda.ks&quot;, &quot;lambda.sim_sign&quot;) . Default is  &quot;lambda.auc&quot;.</p>
</td></tr>
<tr><td><code id="lr_params_+3A_method">method</code></td>
<td>
<p>Method of searching optimal parameters. &quot;random_search&quot;,&quot;grid_search&quot;,&quot;local_search&quot; are available.</p>
</td></tr>
<tr><td><code id="lr_params_+3A_iters">iters</code></td>
<td>
<p>Number of iterations of &quot;random_search&quot; optimal parameters.</p>
</td></tr>
<tr><td><code id="lr_params_+3A_lasso">lasso</code></td>
<td>
<p>Logical, if TRUE, variables filtering by LASSO. Default is TRUE.</p>
</td></tr>
<tr><td><code id="lr_params_+3A_step_wise">step_wise</code></td>
<td>
<p>Logical, stepwise method. Default is TRUE.</p>
</td></tr>
<tr><td><code id="lr_params_+3A_score_card">score_card</code></td>
<td>
<p>Logical, transfer woe to a standard scorecard. If TRUE, Output scorecard, and score prediction, otherwise output probability. Default is TRUE.</p>
</td></tr>
<tr><td><code id="lr_params_+3A_sp_values">sp_values</code></td>
<td>
<p>Vaules will be in separate bins.e.g. list(-1, &quot;missing&quot;)  means that -1 &amp; missing as special values.Default is NULL.</p>
</td></tr>
<tr><td><code id="lr_params_+3A_forced_in">forced_in</code></td>
<td>
<p>Names of forced input variables. Default is NULL.</p>
</td></tr>
<tr><td><code id="lr_params_+3A_obsweight">obsweight</code></td>
<td>
<p>An optional vector of 'prior weights' to be used in the fitting process. Should be NULL or a numeric vector. If you oversample or cluster diffrent datasets to training the LR model, you need to set this parameter to ensure that the probability of logistic regression output is the same as that before oversampling or segmentation. e.g.:There are 10,000 0 obs and 500 1 obs before oversampling or under-sampling, 5,000 0 obs and 3,000 1 obs after oversampling. Then this parameter should be set to c(10000/5000, 500/3000). Default is NULL..</p>
</td></tr>
<tr><td><code id="lr_params_+3A_thresholds">thresholds</code></td>
<td>
<p>Thresholds for selecting variables.
</p>

<ul>
<li> <p><code>cor_p</code> The maximum threshold of correlation. Default: 0.8.
</p>
</li>
<li> <p><code>iv_i</code> The minimum threshold of IV. 0.01 to 0.1 usually work. Default: 0.02
</p>
</li>
<li> <p><code>psi_i</code> The maximum threshold of PSI. 0.1 to 0.3 usually work. Default: 0.1.
</p>
</li>
<li> <p><code>cos_i</code> cos_similarity of posive rate of train and test. 0.7 to 0.9 usually work.Default: 0.5.
</p>
</li></ul>
</td></tr>
<tr><td><code id="lr_params_+3A_...">...</code></td>
<td>
<p>Other parameters</p>
</td></tr>
<tr><td><code id="lr_params_+3A_dat_train">dat_train</code></td>
<td>
<p>data.frame of train data. Default is NULL.</p>
</td></tr>
<tr><td><code id="lr_params_+3A_target">target</code></td>
<td>
<p>name of target variable.</p>
</td></tr>
<tr><td><code id="lr_params_+3A_dat_test">dat_test</code></td>
<td>
<p>data.frame of test data. Default is NULL.</p>
</td></tr>
<tr><td><code id="lr_params_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of the variable that represents the time at which each observation takes place.Default is NULL.</p>
</td></tr>
<tr><td><code id="lr_params_+3A_x_list">x_list</code></td>
<td>
<p>names of independent variables. Default is NULL.</p>
</td></tr>
<tr><td><code id="lr_params_+3A_prop">prop</code></td>
<td>
<p>Percentage of train-data after the partition. Default: 0.7.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of parameters.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+training_model">training_model</a></code>, <code><a href="#topic+xgb_params">xgb_params</a></code>, <code><a href="#topic+gbm_params">gbm_params</a></code>, <code><a href="#topic+rf_params">rf_params</a></code>
</p>

<hr>
<h2 id='lr_vif'>Variance-Inflation Factors</h2><span id='topic+lr_vif'></span>

<h3>Description</h3>

<p><code>lr_vif</code> is  for calculating Variance-Inflation Factors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lr_vif(lr_model)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="lr_vif_+3A_lr_model">lr_model</code></td>
<td>
<p>An object of logistic model.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>sub = cv_split(UCICreditCard, k = 30)[[1]]
x_list = c("PAY_0", "LIMIT_BAL", "PAY_AMT5", "PAY_3", "PAY_2")
dat = re_name(UCICreditCard[sub,], "default.payment.next.month", "target")
dat = dat[,c("target",x_list)]

dat = data_cleansing(dat, miss_values = list("", -1))

train_test = train_test_split(dat,  prop = 0.7)
dat_train = train_test$train
dat_test = train_test$test

Formula = as.formula(paste("target", paste(x_list, collapse = ' + '), sep = ' ~ '))
set.seed(46)
lr_model = glm(Formula, data = dat_train[, c("target", x_list)], family = binomial(logit))
lr_vif(lr_model)
get_logistic_coef(lr_model)
class(dat)
mod = lr_model
lr_vif(lr_model)
</code></pre>

<hr>
<h2 id='max_min_norm'>Max Min Normalization</h2><span id='topic+max_min_norm'></span>

<h3>Description</h3>

<p><code>max_min_norm</code> is for normalizing each column vector of matrix 'x' using max_min normalization
</p>


<h3>Usage</h3>

<pre><code class='language-R'>max_min_norm(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="max_min_norm_+3A_x">x</code></td>
<td>
<p>Vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Normalized vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat_s = apply(UCICreditCard[,12:14], 2, max_min_norm)
</code></pre>

<hr>
<h2 id='merge_category'>Merge Category</h2><span id='topic+merge_category'></span>

<h3>Description</h3>

<p><code>merge_category</code> is  for merging   category of nominal variables which number of categories is more than m or percent of samples in any categories is less than p.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>merge_category(dat, char_list = NULL, ex_cols = NULL, m = 10, note = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="merge_category_+3A_dat">dat</code></td>
<td>
<p>A data frame with x and target.</p>
</td></tr>
<tr><td><code id="merge_category_+3A_char_list">char_list</code></td>
<td>
<p>The list of charecteristic variables that need to merge categories, Default is NULL. In case of NULL,merge categories for all variables of string type.</p>
</td></tr>
<tr><td><code id="merge_category_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Default is NULL.</p>
</td></tr>
<tr><td><code id="merge_category_+3A_m">m</code></td>
<td>
<p>The minimum number of categories.</p>
</td></tr>
<tr><td><code id="merge_category_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with merged category variables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#merge_catagory
dat =  merge_category(lendingclub,ex_cols = "id$|_d$")
char_list = get_names(dat = dat,types = c('factor', 'character'),
ex_cols = "id$|_d$", get_ex = FALSE)
str(dat[,char_list])
</code></pre>

<hr>
<h2 id='min_max_norm'>Min Max Normalization</h2><span id='topic+min_max_norm'></span>

<h3>Description</h3>

<p><code>min_max_norm</code> is for normalizing each column vector of matrix 'x' using min_max normalization
</p>


<h3>Usage</h3>

<pre><code class='language-R'>min_max_norm(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="min_max_norm_+3A_x">x</code></td>
<td>
<p>Vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Normalized vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat_s = apply(UCICreditCard[,12:14], 2, min_max_norm)
</code></pre>

<hr>
<h2 id='model_result_plot'>model result plots
<code>model_result_plot</code> is a wrapper of following:
<code>perf_table</code> is for generating a model performance table.
<code>ks_plot</code> is for K-S.
<code>roc_plot</code> is for ROC.
<code>lift_plot</code> is for Lift Chart.
<code>score_distribution_plot</code> is for ploting the score distribution.</h2><span id='topic+model_result_plot'></span><span id='topic+perf_table'></span><span id='topic+ks_plot'></span><span id='topic+lift_plot'></span><span id='topic+roc_plot'></span><span id='topic+score_distribution_plot'></span>

<h3>Description</h3>

<p>model result plots
<code>model_result_plot</code> is a wrapper of following:
<code>perf_table</code> is for generating a model performance table.
<code>ks_plot</code> is for K-S.
<code>roc_plot</code> is for ROC.
<code>lift_plot</code> is for Lift Chart.
<code>score_distribution_plot</code> is for ploting the score distribution.
</p>
<p>performance table
</p>
<p>ks_plot
</p>
<p>lift_plot
</p>
<p>roc_plot
</p>
<p>score_distribution_plot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model_result_plot(
  train_pred,
  score,
  target,
  test_pred = NULL,
  gtitle = NULL,
  perf_dir_path = NULL,
  save_data = FALSE,
  plot_show = TRUE,
  total = TRUE,
  g = 10,
  cut_bin = "equal_depth",
  digits = 4
)

perf_table(
  train_pred,
  test_pred = NULL,
  target = NULL,
  score = NULL,
  g = 10,
  cut_bin = "equal_depth",
  breaks = NULL,
  digits = 2,
  pos_flag = list("1", "1", "Bad", 1),
  total = FALSE,
  binsNO = FALSE
)

ks_plot(
  train_pred,
  test_pred = NULL,
  target = NULL,
  score = NULL,
  gtitle = NULL,
  breaks = NULL,
  g = 10,
  cut_bin = "equal_width",
  perf_tb = NULL
)

lift_plot(
  train_pred,
  test_pred = NULL,
  target = NULL,
  score = NULL,
  gtitle = NULL,
  breaks = NULL,
  g = 10,
  cut_bin = "equal_depth",
  perf_tb = NULL
)

roc_plot(
  train_pred,
  test_pred = NULL,
  target = NULL,
  score = NULL,
  gtitle = NULL
)

score_distribution_plot(
  train_pred,
  test_pred,
  target,
  score,
  gtitle = NULL,
  breaks = NULL,
  g = 10,
  cut_bin = "equal_depth",
  perf_tb = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="model_result_plot_+3A_train_pred">train_pred</code></td>
<td>
<p>A data frame of training with predicted prob or score.</p>
</td></tr>
<tr><td><code id="model_result_plot_+3A_score">score</code></td>
<td>
<p>The name of prob or score variable.</p>
</td></tr>
<tr><td><code id="model_result_plot_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="model_result_plot_+3A_test_pred">test_pred</code></td>
<td>
<p>A data frame of validation with predict prob or score.</p>
</td></tr>
<tr><td><code id="model_result_plot_+3A_gtitle">gtitle</code></td>
<td>
<p>The title of the graph &amp; The name for periodically saved graphic file.</p>
</td></tr>
<tr><td><code id="model_result_plot_+3A_perf_dir_path">perf_dir_path</code></td>
<td>
<p>The path for periodically saved graphic files.</p>
</td></tr>
<tr><td><code id="model_result_plot_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is FALSE.</p>
</td></tr>
<tr><td><code id="model_result_plot_+3A_plot_show">plot_show</code></td>
<td>
<p>Logical, show model performance in current graphic device. Default is TRUE.</p>
</td></tr>
<tr><td><code id="model_result_plot_+3A_total">total</code></td>
<td>
<p>Whether to summarize the table. default: TRUE.</p>
</td></tr>
<tr><td><code id="model_result_plot_+3A_g">g</code></td>
<td>
<p>Number of breaks for prob or score.</p>
</td></tr>
<tr><td><code id="model_result_plot_+3A_cut_bin">cut_bin</code></td>
<td>
<p>A string, if equal_bins is TRUE, 'equal_depth' or 'equal_width', default is 'equal_depth'.</p>
</td></tr>
<tr><td><code id="model_result_plot_+3A_digits">digits</code></td>
<td>
<p>Digits of numeric,default is 4.</p>
</td></tr>
<tr><td><code id="model_result_plot_+3A_breaks">breaks</code></td>
<td>
<p>Splitting points of prob or score.</p>
</td></tr>
<tr><td><code id="model_result_plot_+3A_pos_flag">pos_flag</code></td>
<td>
<p>The value of positive class of target variable, default: &quot;1&quot;.</p>
</td></tr>
<tr><td><code id="model_result_plot_+3A_binsno">binsNO</code></td>
<td>
<p>Bins Number.Default is FALSE.</p>
</td></tr>
<tr><td><code id="model_result_plot_+3A_perf_tb">perf_tb</code></td>
<td>
<p>Performance table.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>sub = cv_split(UCICreditCard, k = 30)[[1]]
dat = UCICreditCard[sub,]
dat = re_name(dat, "default.payment.next.month", "target")
x_list = c("PAY_0", "LIMIT_BAL", "PAY_AMT5", "PAY_3", "PAY_2")
dat = data_cleansing(dat, target = "target", obs_id = "ID",x_list = x_list,
occur_time = "apply_date", miss_values = list("", -1))
dat = process_nas(dat,default_miss = TRUE)
train_test = train_test_split(dat, split_type = "OOT", prop = 0.7,
                                occur_time = "apply_date")
dat_train = train_test$train
dat_test = train_test$test
Formula = as.formula(paste("target", paste(x_list, collapse = ' + '), sep = ' ~ '))
set.seed(46)
lr_model = glm(Formula, data = dat_train[, c("target", x_list)], family = binomial(logit))

dat_train$pred_LR = round(predict(lr_model, dat_train[, x_list], type = "response"), 5)
dat_test$pred_LR = round(predict(lr_model, dat_test[, x_list], type = "response"), 5)
# model evaluation
perf_table(train_pred = dat_train, test_pred = dat_test, target = "target", score = "pred_LR")
ks_plot(train_pred = dat_train, test_pred = dat_test, target = "target", score = "pred_LR")
roc_plot(train_pred = dat_train, test_pred = dat_test, target = "target", score = "pred_LR")
#lift_plot(train_pred = dat_train, test_pred = dat_test, target = "target", score = "pred_LR")
#score_distribution_plot(train_pred = dat_train, test_pred = dat_test,
#target = "target", score = "pred_LR")
#model_result_plot(train_pred = dat_train, test_pred = dat_test,
#target = "target", score = "pred_LR")
</code></pre>

<hr>
<h2 id='multi_grid'>Arrange list of plots into a grid</h2><span id='topic+multi_grid'></span>

<h3>Description</h3>

<p>Plot multiple ggplot-objects as a grid-arranged single plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multi_grid(..., grobs = list(...), nrow = NULL, ncol = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="multi_grid_+3A_...">...</code></td>
<td>
<p>Other parameters.</p>
</td></tr>
<tr><td><code id="multi_grid_+3A_grobs">grobs</code></td>
<td>
<p>A list of ggplot-objects to be arranged into the grid.</p>
</td></tr>
<tr><td><code id="multi_grid_+3A_nrow">nrow</code></td>
<td>
<p>Number of rows in the plot grid.</p>
</td></tr>
<tr><td><code id="multi_grid_+3A_ncol">ncol</code></td>
<td>
<p>Number of columns in the plot grid.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function takes a <code>list</code> of ggplot-objects as argument.
Plotting functions of this package that produce multiple plot
objects (e.g., when there is an argument <code>facet.grid</code>) usually
return multiple plots as list.
</p>


<h3>Value</h3>

<p>An object of class <code>gtable</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
sub = cv_split(UCICreditCard, k = 30)[[1]]
dat = UCICreditCard[sub,]
dat = re_name(dat, "default.payment.next.month", "target")
dat = data_cleansing(dat, target = "target", obs_id = "ID",
occur_time = "apply_date", miss_values = list("", -1))
dat = process_nas(dat)
train_test = train_test_split(dat, split_type = "OOT", prop = 0.7,
                                occur_time = "apply_date")
dat_train = train_test$train
dat_test = train_test$test
x_list = c("PAY_0", "LIMIT_BAL", "PAY_AMT5", "PAY_3", "PAY_2")
Formula = as.formula(paste("target", paste(x_list, collapse = ' + '), sep = ' ~ '))
set.seed(46)
lr_model = glm(Formula, data = dat_train[, c("target", x_list)], family = binomial(logit))

dat_train$pred_LR = round(predict(lr_model, dat_train[, x_list], type = "response"), 5)
dat_test$pred_LR = round(predict(lr_model, dat_test[, x_list], type = "response"), 5)
# model evaluation
p1 =  ks_plot(train_pred = dat_train, test_pred = dat_test, target = "target", score = "pred_LR")
p2 =  roc_plot(train_pred = dat_train, test_pred = dat_test, target = "target", score = "pred_LR")
p3 =  lift_plot(train_pred = dat_train, test_pred = dat_test, target = "target", score = "pred_LR")
p4 = score_distribution_plot(train_pred = dat_train, test_pred = dat_test,
target = "target", score = "pred_LR")
p_plots= multi_grid(p1,p2,p3,p4)
plot(p_plots)
</code></pre>

<hr>
<h2 id='multi_left_join'>multi_left_join</h2><span id='topic+multi_left_join'></span>

<h3>Description</h3>

<p><code>multi_left_join</code> is for left jion a list of datasets fast.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multi_left_join(..., df_list = list(...), key_dt = NULL, by = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="multi_left_join_+3A_...">...</code></td>
<td>
<p>Datasets need join</p>
</td></tr>
<tr><td><code id="multi_left_join_+3A_df_list">df_list</code></td>
<td>
<p>A list of datasets.</p>
</td></tr>
<tr><td><code id="multi_left_join_+3A_key_dt">key_dt</code></td>
<td>
<p>Name or index of Key table to left join.</p>
</td></tr>
<tr><td><code id="multi_left_join_+3A_by">by</code></td>
<td>
<p>Name of Key columns to join.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>multi_left_join(UCICreditCard[1:10, 1:10], UCICreditCard[1:10, c(1,8:14)],
UCICreditCard[1:10, c(1,20:25)], by = "ID")
</code></pre>

<hr>
<h2 id='n_char'>The length of a string.</h2><span id='topic+n_char'></span>

<h3>Description</h3>

<p>Returns the number of &quot;code points&quot;, in a string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>n_char(string)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="n_char_+3A_string">string</code></td>
<td>
<p>A string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector giving number of characters (code points) in each
element of the character vector. Missing string have missing length.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>n_char(letters)
n_char(NA)
</code></pre>

<hr>
<h2 id='null_blank_na'>Encode NAs</h2><span id='topic+null_blank_na'></span>

<h3>Description</h3>

<p><code>null_blank_na</code> is the function to  replace null ,NULL, blank or other missing vaules with NA.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>null_blank_na(dat, miss_values = NULL, note = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="null_blank_na_+3A_dat">dat</code></td>
<td>
<p>A data frame with x and target.</p>
</td></tr>
<tr><td><code id="null_blank_na_+3A_miss_values">miss_values</code></td>
<td>
<p>Other extreme value might be used to represent missing values, e.g: -9999, -9998. These miss_values will be encoded to -1 or &quot;missing&quot;.</p>
</td></tr>
<tr><td><code id="null_blank_na_+3A_note">note</code></td>
<td>
<p>Logical.Outputs info.Default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>datss = null_blank_na(dat = UCICreditCard[1:1000, ], miss_values =list(-1,-2))
</code></pre>

<hr>
<h2 id='one_hot_encoding'>One-Hot Encoding</h2><span id='topic+one_hot_encoding'></span>

<h3>Description</h3>

<p><code>one_hot_encoding</code> is for converting the factor or character variables into multiple columns
</p>


<h3>Usage</h3>

<pre><code class='language-R'>one_hot_encoding(
  dat,
  cat_vars = NULL,
  ex_cols = NULL,
  merge_cat = TRUE,
  na_act = TRUE,
  note = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="one_hot_encoding_+3A_dat">dat</code></td>
<td>
<p>A dat frame.</p>
</td></tr>
<tr><td><code id="one_hot_encoding_+3A_cat_vars">cat_vars</code></td>
<td>
<p>The name or Column index list to be one_hot encoded.</p>
</td></tr>
<tr><td><code id="one_hot_encoding_+3A_ex_cols">ex_cols</code></td>
<td>
<p>Variables to be  excluded, use regular expression matching</p>
</td></tr>
<tr><td><code id="one_hot_encoding_+3A_merge_cat">merge_cat</code></td>
<td>
<p>Logical. If TRUE, to merge categories greater than 8, default is TRUE.</p>
</td></tr>
<tr><td><code id="one_hot_encoding_+3A_na_act">na_act</code></td>
<td>
<p>Logical,If true, the missing value is processed, if FALSE missing value is omitted .</p>
</td></tr>
<tr><td><code id="one_hot_encoding_+3A_note">note</code></td>
<td>
<p>Logical.Outputs info.Default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dat frame with the one hot encoding applied to all the variables with type as factor or character.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+de_one_hot_encoding">de_one_hot_encoding</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat1 = one_hot_encoding(dat = UCICreditCard,
cat_vars = c("SEX", "MARRIAGE"),
merge_cat = TRUE, na_act = TRUE)
dat2 = de_one_hot_encoding(dat_one_hot = dat1,
cat_vars = c("SEX","MARRIAGE"), na_act = FALSE)

</code></pre>

<hr>
<h2 id='outliers_detection'>Outliers Detection
<code>outliers_detection</code> is for outliers detecting using Kmeans and Local Outlier Factor (lof)</h2><span id='topic+outliers_detection'></span>

<h3>Description</h3>

<p>Outliers Detection
<code>outliers_detection</code> is for outliers detecting using Kmeans and Local Outlier Factor (lof)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>outliers_detection(dat, x, kc = 3, kn = 5)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="outliers_detection_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables.</p>
</td></tr>
<tr><td><code id="outliers_detection_+3A_x">x</code></td>
<td>
<p>The name of variable to process.</p>
</td></tr>
<tr><td><code id="outliers_detection_+3A_kc">kc</code></td>
<td>
<p>Number of  clustering centers for Kmeans</p>
</td></tr>
<tr><td><code id="outliers_detection_+3A_kn">kn</code></td>
<td>
<p>Number of neighbors for LOF.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Outliers of each variable.
</p>

<hr>
<h2 id='p_ij'>Entropy</h2><span id='topic+p_ij'></span><span id='topic+e_ij'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>p_ij(x)

e_ij(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="p_ij_+3A_x">x</code></td>
<td>
<p>A numeric vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector of entropy.
</p>

<hr>
<h2 id='p_to_score'>prob to socre</h2><span id='topic+p_to_score'></span>

<h3>Description</h3>

<p><code>p_to_score</code> is for transforming probability to score.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>p_to_score(p, PDO = 20, base = 600, ratio = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="p_to_score_+3A_p">p</code></td>
<td>
<p>Probability.</p>
</td></tr>
<tr><td><code id="p_to_score_+3A_pdo">PDO</code></td>
<td>
<p>Point-to-Double Odds.</p>
</td></tr>
<tr><td><code id="p_to_score_+3A_base">base</code></td>
<td>
<p>Base Point.</p>
</td></tr>
<tr><td><code id="p_to_score_+3A_ratio">ratio</code></td>
<td>
<p>The corresponding odds when the score is base.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>new prob.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+training_model">training_model</a></code>, <code><a href="#topic+pred_score">pred_score</a></code>
</p>

<hr>
<h2 id='partial_dependence_plot'>partial_dependence_plot</h2><span id='topic+partial_dependence_plot'></span><span id='topic+get_partial_dependence_plots'></span>

<h3>Description</h3>

<p><code>partial_dependence_plot</code> is for generating a partial dependence plot.
<code>get_partial_dependence_plots</code> is for ploting partial dependence of all vairables in x_list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>partial_dependence_plot(model, x, x_train, n.trees = NULL)

get_partial_dependence_plots(
  model,
  x_train,
  x_list,
  n.trees = NULL,
  dir_path = getwd(),
  save_data = TRUE,
  plot_show = FALSE,
  parallel = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="partial_dependence_plot_+3A_model">model</code></td>
<td>
<p>A data frame of training with predicted prob or score.</p>
</td></tr>
<tr><td><code id="partial_dependence_plot_+3A_x">x</code></td>
<td>
<p>The name of an independent variable.</p>
</td></tr>
<tr><td><code id="partial_dependence_plot_+3A_x_train">x_train</code></td>
<td>
<p>A data.frame with independent variables.</p>
</td></tr>
<tr><td><code id="partial_dependence_plot_+3A_n.trees">n.trees</code></td>
<td>
<p>Number of trees for best.iter of gbm.</p>
</td></tr>
<tr><td><code id="partial_dependence_plot_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="partial_dependence_plot_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved graphic files.</p>
</td></tr>
<tr><td><code id="partial_dependence_plot_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is FALSE.</p>
</td></tr>
<tr><td><code id="partial_dependence_plot_+3A_plot_show">plot_show</code></td>
<td>
<p>Logical, show model performance in current graphic device. Default is FALSE.</p>
</td></tr>
<tr><td><code id="partial_dependence_plot_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is FALSE.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>sub = cv_split(UCICreditCard, k = 30)[[1]]
dat = UCICreditCard[sub,]
dat = re_name(dat, "default.payment.next.month", "target")
dat = data_cleansing(dat, target = "target", obs_id = "ID",
occur_time = "apply_date", miss_values = list("", -1))

train_test = train_test_split(dat, split_type = "OOT", prop = 0.7,
                                occur_time = "apply_date")
dat_train = train_test$train
dat_test = train_test$test
x_list = c("PAY_0", "LIMIT_BAL", "PAY_AMT5", "PAY_3", "PAY_2")
Formula = as.formula(paste("target", paste(x_list, collapse = ' + '), sep = ' ~ '))
set.seed(46)
lr_model = glm(Formula, data = dat_train[, c("target", x_list)], family = binomial(logit))
#plot partial dependency of one variable
partial_dependence_plot(model = lr_model, x ="LIMIT_BAL", x_train = dat_train)
#plot partial dependency of all variables
pd_list = get_partial_dependence_plots(model = lr_model, x_list = x_list[1:2],
 x_train = dat_train, save_data = FALSE,plot_show = TRUE)
</code></pre>

<hr>
<h2 id='PCA_reduce'>PCA Dimension Reduction</h2><span id='topic+PCA_reduce'></span>

<h3>Description</h3>

<p><code>PCA_reduce</code> is used for PCA reduction of high demension data .
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PCA_reduce(train = train, test = NULL, mc = 0.9)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PCA_reduce_+3A_train">train</code></td>
<td>
<p>A data.frame with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="PCA_reduce_+3A_test">test</code></td>
<td>
<p>A data.frame of test data.</p>
</td></tr>
<tr><td><code id="PCA_reduce_+3A_mc">mc</code></td>
<td>
<p>Threshold of cumulative imp.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
num_x_list = get_names(dat = UCICreditCard, types = c('numeric'),
ex_cols = "ID$|date$|default.payment.next.month$", get_ex = FALSE)
 PCA_dat = PCA_reduce(train = UCICreditCard[num_x_list])

## End(Not run)
</code></pre>

<hr>
<h2 id='plot_colors'>Plot Colors</h2><span id='topic+plot_colors'></span><span id='topic+color_ramp_palette'></span>

<h3>Description</h3>

<p>You can use the <code>plot_colors</code> to show colors on the graph device.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_colors(colors)

color_ramp_palette(colors)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_colors_+3A_colors">colors</code></td>
<td>
<p>A vector of colors.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>plot_colors(rgb(158,122,122, maxColorValue = 255 ))
</code></pre>

<hr>
<h2 id='plot_oot_perf'>plot_oot_perf
<code>plot_oot_perf</code> is for ploting performance of cross time samples in the future</h2><span id='topic+plot_oot_perf'></span>

<h3>Description</h3>

<p>plot_oot_perf
<code>plot_oot_perf</code> is for ploting performance of cross time samples in the future
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_oot_perf(
  dat_test,
  x,
  occur_time,
  target,
  k = 3,
  g = 10,
  period = "month",
  best = FALSE,
  equal_bins = TRUE,
  pl = "rate",
  breaks = NULL,
  cut_bin = "equal_depth",
  gtitle = NULL,
  perf_dir_path = NULL,
  save_data = FALSE,
  plot_show = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_oot_perf_+3A_dat_test">dat_test</code></td>
<td>
<p>A data frame of testing dataset with predicted prob or score.</p>
</td></tr>
<tr><td><code id="plot_oot_perf_+3A_x">x</code></td>
<td>
<p>The name of prob or score variable.</p>
</td></tr>
<tr><td><code id="plot_oot_perf_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of the variable that represents the time at which each observation takes place.</p>
</td></tr>
<tr><td><code id="plot_oot_perf_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="plot_oot_perf_+3A_k">k</code></td>
<td>
<p>If period is NULL, number of equal frequency samples.</p>
</td></tr>
<tr><td><code id="plot_oot_perf_+3A_g">g</code></td>
<td>
<p>Number of breaks for prob or score.</p>
</td></tr>
<tr><td><code id="plot_oot_perf_+3A_period">period</code></td>
<td>
<p>OOT period, 'weekly' and 'month' are available.if NULL, use k equal frequency samples.</p>
</td></tr>
<tr><td><code id="plot_oot_perf_+3A_best">best</code></td>
<td>
<p>Logical, merge initial breaks to get optimal breaks for binning.</p>
</td></tr>
<tr><td><code id="plot_oot_perf_+3A_equal_bins">equal_bins</code></td>
<td>
<p>Logical, generates initial breaks for equal frequency or width binning.</p>
</td></tr>
<tr><td><code id="plot_oot_perf_+3A_pl">pl</code></td>
<td>
<p>'lift' is for lift chart plot,'rate' is for positive rate plot.</p>
</td></tr>
<tr><td><code id="plot_oot_perf_+3A_breaks">breaks</code></td>
<td>
<p>Splitting points of prob or score.</p>
</td></tr>
<tr><td><code id="plot_oot_perf_+3A_cut_bin">cut_bin</code></td>
<td>
<p>A string, if equal_bins is TRUE, 'equal_depth' or 'equal_width', default is 'equal_depth'.</p>
</td></tr>
<tr><td><code id="plot_oot_perf_+3A_gtitle">gtitle</code></td>
<td>
<p>The title of the graph &amp; The name for periodically saved graphic file.</p>
</td></tr>
<tr><td><code id="plot_oot_perf_+3A_perf_dir_path">perf_dir_path</code></td>
<td>
<p>The path for periodically saved graphic files.</p>
</td></tr>
<tr><td><code id="plot_oot_perf_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is FALSE.</p>
</td></tr>
<tr><td><code id="plot_oot_perf_+3A_plot_show">plot_show</code></td>
<td>
<p>Logical, show model performance in current graphic device. Default is TRUE.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>sub = cv_split(UCICreditCard, k = 30)[[1]]
dat = UCICreditCard[sub,]
dat = re_name(dat, "default.payment.next.month", "target")
x_list = c("PAY_0", "LIMIT_BAL", "PAY_AMT5", "PAY_3", "PAY_2")
dat = data_cleansing(dat, target = "target", obs_id = "ID",x_list = x_list,
occur_time = "apply_date", miss_values = list("", -1))
dat = process_nas(dat)
train_test = train_test_split(dat, split_type = "OOT", prop = 0.7,
                                occur_time = "apply_date")
dat_train = train_test$train
dat_test = train_test$test
Formula = as.formula(paste("target", paste(x_list, collapse = ' + '), sep = ' ~ '))
set.seed(46)
lr_model = glm(Formula, data = dat_train[, c("target", x_list)], family = binomial(logit))

dat_train$pred_LR = round(predict(lr_model, dat_train[, x_list], type = "response"), 5)
dat_test$pred_LR = round(predict(lr_model, dat_test[, x_list], type = "response"), 5)
plot_oot_perf(dat_test = dat_test, occur_time = "apply_date", target = "target", x = "pred_LR")
</code></pre>

<hr>
<h2 id='plot_table'>plot_table</h2><span id='topic+plot_table'></span>

<h3>Description</h3>

<p><code>plot_table</code> is for table visualizaiton.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_table(
  grid_table,
  theme = c("cyan", "grey", "green", "red", "blue", "purple"),
  title = NULL,
  title.size = 12,
  title.color = "black",
  title.face = "bold",
  title.position = "middle",
  subtitle = NULL,
  subtitle.size = 8,
  subtitle.color = "black",
  subtitle.face = "plain",
  subtitle.position = "middle",
  tile.color = "white",
  tile.size = 1,
  colname.size = 3,
  colname.color = "white",
  colname.face = "bold",
  colname.fill.color = love_color("dark_cyan"),
  text.size = 3,
  text.color = love_color("dark_grey"),
  text.face = "plain",
  text.fill.color = c("white", love_color("pale_grey"))
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_table_+3A_grid_table">grid_table</code></td>
<td>
<p>A data.frame or table</p>
</td></tr>
<tr><td><code id="plot_table_+3A_theme">theme</code></td>
<td>
<p>The theme of color, &quot;cyan&quot;,&quot;grey&quot;,&quot;green&quot;,&quot;red&quot;,&quot;blue&quot;,&quot;purple&quot; are available.</p>
</td></tr>
<tr><td><code id="plot_table_+3A_title">title</code></td>
<td>
<p>The title of table</p>
</td></tr>
<tr><td><code id="plot_table_+3A_title.size">title.size</code></td>
<td>
<p>The title size of plot.</p>
</td></tr>
<tr><td><code id="plot_table_+3A_title.color">title.color</code></td>
<td>
<p>The title color.</p>
</td></tr>
<tr><td><code id="plot_table_+3A_title.face">title.face</code></td>
<td>
<p>The title face, such as &quot;plain&quot;, &quot;bold&quot;.</p>
</td></tr>
<tr><td><code id="plot_table_+3A_title.position">title.position</code></td>
<td>
<p>The title position,such as &quot;left&quot;,&quot;middle&quot;,&quot;right&quot;.</p>
</td></tr>
<tr><td><code id="plot_table_+3A_subtitle">subtitle</code></td>
<td>
<p>The subtitle of table</p>
</td></tr>
<tr><td><code id="plot_table_+3A_subtitle.size">subtitle.size</code></td>
<td>
<p>The subtitle size.</p>
</td></tr>
<tr><td><code id="plot_table_+3A_subtitle.color">subtitle.color</code></td>
<td>
<p>The subtitle color.</p>
</td></tr>
<tr><td><code id="plot_table_+3A_subtitle.face">subtitle.face</code></td>
<td>
<p>The subtitle face, such as &quot;plain&quot;, &quot;bold&quot;,default is &quot;bold&quot;.</p>
</td></tr>
<tr><td><code id="plot_table_+3A_subtitle.position">subtitle.position</code></td>
<td>
<p>The subtitle position,such as &quot;left&quot;,&quot;middle&quot;,&quot;right&quot;, default is &quot;middle&quot;.</p>
</td></tr>
<tr><td><code id="plot_table_+3A_tile.color">tile.color</code></td>
<td>
<p>The color of table lines, default is 'white'.</p>
</td></tr>
<tr><td><code id="plot_table_+3A_tile.size">tile.size</code></td>
<td>
<p>The size of table lines , default is 1.</p>
</td></tr>
<tr><td><code id="plot_table_+3A_colname.size">colname.size</code></td>
<td>
<p>The size of colnames, default is 3.</p>
</td></tr>
<tr><td><code id="plot_table_+3A_colname.color">colname.color</code></td>
<td>
<p>The color of colnames, default is 'white'.</p>
</td></tr>
<tr><td><code id="plot_table_+3A_colname.face">colname.face</code></td>
<td>
<p>The face of colnames,default is 'bold'.</p>
</td></tr>
<tr><td><code id="plot_table_+3A_colname.fill.color">colname.fill.color</code></td>
<td>
<p>The fill color of colnames, default is love_color(&quot;dark_cyan&quot;).</p>
</td></tr>
<tr><td><code id="plot_table_+3A_text.size">text.size</code></td>
<td>
<p>The size of text, default is 3.</p>
</td></tr>
<tr><td><code id="plot_table_+3A_text.color">text.color</code></td>
<td>
<p>The color of text, default is love_color(&quot;dark_grey&quot;).</p>
</td></tr>
<tr><td><code id="plot_table_+3A_text.face">text.face</code></td>
<td>
<p>The face of text, default is 'plain'.</p>
</td></tr>
<tr><td><code id="plot_table_+3A_text.fill.color">text.fill.color</code></td>
<td>
<p>The fill color of text, default is c('white',love_color(&quot;pale_grey&quot;).</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>iv_list = get_psi_iv_all(dat = UCICreditCard[1:1000, ],
                         x_list = names(UCICreditCard)[3:5], equal_bins = TRUE,
                         target = "default.payment.next.month", ex_cols = "ID|apply_date")
iv_dt =get_psi_iv(UCICreditCard, x = "PAY_3",
                  target = "default.payment.next.month", bins_total = TRUE)

plot_table(iv_dt)
</code></pre>

<hr>
<h2 id='plot_theme'>plot_theme</h2><span id='topic+plot_theme'></span>

<h3>Description</h3>

<p><code>plot_theme</code> is a simper wrapper of theme for ggplot2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_theme(
  legend.position = "top",
  angle = 30,
  legend_size = 7,
  axis_size_y = 8,
  axis_size_x = 8,
  axis_title_size = 10,
  title_size = 11,
  title_vjust = 0,
  title_hjust = 0,
  linetype = "dotted",
  face = "bold"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_theme_+3A_legend.position">legend.position</code></td>
<td>
<p>see details at: codelegend.position</p>
</td></tr>
<tr><td><code id="plot_theme_+3A_angle">angle</code></td>
<td>
<p>see details at:  codeaxis.text.x</p>
</td></tr>
<tr><td><code id="plot_theme_+3A_legend_size">legend_size</code></td>
<td>
<p>see details at:  codelegend.text</p>
</td></tr>
<tr><td><code id="plot_theme_+3A_axis_size_y">axis_size_y</code></td>
<td>
<p>see details at:  codeaxis.text.y</p>
</td></tr>
<tr><td><code id="plot_theme_+3A_axis_size_x">axis_size_x</code></td>
<td>
<p>see details at:  codeaxis.text.x</p>
</td></tr>
<tr><td><code id="plot_theme_+3A_axis_title_size">axis_title_size</code></td>
<td>
<p>see details at:  codeaxis.title.x</p>
</td></tr>
<tr><td><code id="plot_theme_+3A_title_size">title_size</code></td>
<td>
<p>see details at:  codeplot.title</p>
</td></tr>
<tr><td><code id="plot_theme_+3A_title_vjust">title_vjust</code></td>
<td>
<p>see details at:  codeplot.title</p>
</td></tr>
<tr><td><code id="plot_theme_+3A_title_hjust">title_hjust</code></td>
<td>
<p>see details at:  codeplot.title</p>
</td></tr>
<tr><td><code id="plot_theme_+3A_linetype">linetype</code></td>
<td>
<p>see details at:  codepanel.grid.major</p>
</td></tr>
<tr><td><code id="plot_theme_+3A_face">face</code></td>
<td>
<p>see details at:  codeaxis.title.x</p>
</td></tr>
</table>


<h3>Details</h3>

<p>see details at: codetheme
</p>

<hr>
<h2 id='pred_score'>pred_score</h2><span id='topic+pred_score'></span>

<h3>Description</h3>

<p><code>pred_score</code> is for using logistic regression model model to predict new data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pred_score(
  model,
  dat,
  x_list = NULL,
  bins_table = NULL,
  obs_id = NULL,
  miss_values = list(-1, "-1", "NULL", "-1", "-9999", "-9996", "-9997", "-9995",
    "-9998", -9999, -9998, -9997, -9996, -9995),
  woe_name = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pred_score_+3A_model">model</code></td>
<td>
<p>Logistic Regression Model generated by <code><a href="#topic+training_model">training_model</a></code>.</p>
</td></tr>
<tr><td><code id="pred_score_+3A_dat">dat</code></td>
<td>
<p>Dataframe of new data.</p>
</td></tr>
<tr><td><code id="pred_score_+3A_x_list">x_list</code></td>
<td>
<p>Into the model variables.</p>
</td></tr>
<tr><td><code id="pred_score_+3A_bins_table">bins_table</code></td>
<td>
<p>a data.frame generated by <code><a href="#topic+get_bins_table">get_bins_table</a></code></p>
</td></tr>
<tr><td><code id="pred_score_+3A_obs_id">obs_id</code></td>
<td>
<p>The name of ID of observations or key variable of data. Default is NULL.</p>
</td></tr>
<tr><td><code id="pred_score_+3A_miss_values">miss_values</code></td>
<td>
<p>Special values.</p>
</td></tr>
<tr><td><code id="pred_score_+3A_woe_name">woe_name</code></td>
<td>
<p>Logical. Whether woe variable's name contains 'woe'.Default is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>new scores.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+training_model">training_model</a></code>, <code><a href="#topic+lr_params">lr_params</a></code>, <code><a href="#topic+xgb_params">xgb_params</a></code>, <code><a href="#topic+rf_params">rf_params</a></code>
</p>

<hr>
<h2 id='process_nas'>missing Treatment</h2><span id='topic+process_nas'></span><span id='topic+process_nas_var'></span>

<h3>Description</h3>

<p><code>process_nas_var</code> is for missing value analysis and treatment using knn imputation, central impulation and random imputation.
<code>process_nas</code> is a simpler wrapper for <code>process_nas_var</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>process_nas(
  dat,
  x_list = NULL,
  class_var = FALSE,
  miss_values = list(-1, "missing"),
  default_miss = list(-1, "missing"),
  parallel = FALSE,
  ex_cols = NULL,
  method = "median",
  note = FALSE,
  save_data = FALSE,
  file_name = NULL,
  dir_path = tempdir(),
  ...
)

process_nas_var(
  dat = dat,
  x,
  missing_type = NULL,
  method = "median",
  nas_rate = NULL,
  default_miss = list("missing", -1),
  mat_nas_shadow = NULL,
  dt_nas_random = NULL,
  note = FALSE,
  save_data = FALSE,
  file_name = NULL,
  dir_path = tempdir(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="process_nas_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables.</p>
</td></tr>
<tr><td><code id="process_nas_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="process_nas_+3A_class_var">class_var</code></td>
<td>
<p>Logical, nas analysis of the nominal variables. Default is TRUE.</p>
</td></tr>
<tr><td><code id="process_nas_+3A_miss_values">miss_values</code></td>
<td>
<p>Other extreme value might be used to represent missing values, e.g:-1, -9999, -9998. These miss_values will be encoded to NA.</p>
</td></tr>
<tr><td><code id="process_nas_+3A_default_miss">default_miss</code></td>
<td>
<p>Default value of missing data imputation, Defualt is list(-1,'missing').</p>
</td></tr>
<tr><td><code id="process_nas_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is FALSE.</p>
</td></tr>
<tr><td><code id="process_nas_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="process_nas_+3A_method">method</code></td>
<td>
<p>The methods of imputation by knn. If &quot;median&quot;, then Nas imputation with k neighbors median. If &quot;avg_dist&quot;, the distance weighted average method is applied to determine the NAs imputation with k neighbors. If &quot;default&quot;, assigning the missing values to -1 or &quot;missing&quot;, otherwise ,processing the missing values according to the results of missing analysis.</p>
</td></tr>
<tr><td><code id="process_nas_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="process_nas_+3A_save_data">save_data</code></td>
<td>
<p>Logical. If TRUE, save missing analysis to <code>dir_path</code></p>
</td></tr>
<tr><td><code id="process_nas_+3A_file_name">file_name</code></td>
<td>
<p>The file name for periodically saved missing analysis file. Default is NULL.</p>
</td></tr>
<tr><td><code id="process_nas_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved missing analysis file. Default is &quot;./variable&quot;.</p>
</td></tr>
<tr><td><code id="process_nas_+3A_...">...</code></td>
<td>
<p>Other parameters.</p>
</td></tr>
<tr><td><code id="process_nas_+3A_x">x</code></td>
<td>
<p>The name of variable to process.</p>
</td></tr>
<tr><td><code id="process_nas_+3A_missing_type">missing_type</code></td>
<td>
<p>Type of missing, genereted by code<a href="#topic+analysis_nas">analysis_nas</a></p>
</td></tr>
<tr><td><code id="process_nas_+3A_nas_rate">nas_rate</code></td>
<td>
<p>A list contains nas rate of each variable.</p>
</td></tr>
<tr><td><code id="process_nas_+3A_mat_nas_shadow">mat_nas_shadow</code></td>
<td>
<p>A shadow matrix of variables which contain nas.</p>
</td></tr>
<tr><td><code id="process_nas_+3A_dt_nas_random">dt_nas_random</code></td>
<td>
<p>A data.frame with random nas imputation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dat frame with no NAs.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat_na = process_nas(dat = UCICreditCard[1:1000,],
parallel = FALSE,ex_cols = "ID$", method = "median")

</code></pre>

<hr>
<h2 id='process_outliers'>Outliers Treatment</h2><span id='topic+process_outliers'></span><span id='topic+outliers_kmeans_lof'></span>

<h3>Description</h3>

<p><code>outliers_kmeans_lof</code> is for outliers detection and treatment using Kmeans and Local Outlier Factor (lof)
<code>process_outliers</code> is a simpler wrapper for <code>outliers_kmeans_lof</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>process_outliers(
  dat,
  target,
  ex_cols = NULL,
  kc = 3,
  kn = 5,
  x_list = NULL,
  parallel = FALSE,
  note = FALSE,
  process = TRUE,
  save_data = FALSE,
  file_name = NULL,
  dir_path = tempdir()
)

outliers_kmeans_lof(
  dat,
  x,
  target = NULL,
  kc = 3,
  kn = 5,
  note = FALSE,
  process = TRUE,
  save_data = FALSE,
  file_name = NULL,
  dir_path = tempdir()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="process_outliers_+3A_dat">dat</code></td>
<td>
<p>Dataset with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="process_outliers_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="process_outliers_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="process_outliers_+3A_kc">kc</code></td>
<td>
<p>Number of  clustering centers for Kmeans</p>
</td></tr>
<tr><td><code id="process_outliers_+3A_kn">kn</code></td>
<td>
<p>Number of neighbors for LOF.</p>
</td></tr>
<tr><td><code id="process_outliers_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="process_outliers_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing.</p>
</td></tr>
<tr><td><code id="process_outliers_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="process_outliers_+3A_process">process</code></td>
<td>
<p>Logical, process outliers, not just analysis.</p>
</td></tr>
<tr><td><code id="process_outliers_+3A_save_data">save_data</code></td>
<td>
<p>Logical. If TRUE, save outliers analysis file to the specified folder at <code>dir_path</code></p>
</td></tr>
<tr><td><code id="process_outliers_+3A_file_name">file_name</code></td>
<td>
<p>The file name for periodically saved outliers analysis file. Default is NULL.</p>
</td></tr>
<tr><td><code id="process_outliers_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved outliers analysis file. Default is &quot;./variable&quot;.</p>
</td></tr>
<tr><td><code id="process_outliers_+3A_x">x</code></td>
<td>
<p>The name of variable to process.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with outliers process to all the variables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat_out = process_outliers(UCICreditCard[1:10000,c(18:21,26)],
                        target = "default.payment.next.month",
                       ex_cols = "date$", kc = 3, kn = 10, 
                       parallel = FALSE,note = TRUE)
</code></pre>

<hr>
<h2 id='psi_iv_filter'>Variable reduction based on Information Value &amp; Population Stability Index filter</h2><span id='topic+psi_iv_filter'></span>

<h3>Description</h3>

<p><code>psi_iv_filter</code>  is for selecting important and stable features using IV &amp; PSI.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>psi_iv_filter(
  dat,
  dat_test = NULL,
  target,
  x_list = NULL,
  breaks_list = NULL,
  pos_flag = NULL,
  ex_cols = NULL,
  occur_time = NULL,
  best = FALSE,
  equal_bins = TRUE,
  g = 10,
  sp_values = NULL,
  tree_control = list(p = 0.05, cp = 1e-06, xval = 5, maxdepth = 10),
  bins_control = list(bins_num = 10, bins_pct = 0.05, b_chi = 0.05, b_odds = 0.1, b_psi
    = 0.05, b_or = 0.15, mono = 0.3, odds_psi = 0.2, kc = 1),
  oot_pct = 0.7,
  psi_i = 0.1,
  iv_i = 0.01,
  cos_i = 0.7,
  vars_name = FALSE,
  note = TRUE,
  parallel = FALSE,
  save_data = FALSE,
  file_name = NULL,
  dir_path = tempdir(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="psi_iv_filter_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_dat_test">dat_test</code></td>
<td>
<p>A data.frame of test data. Default is NULL.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_breaks_list">breaks_list</code></td>
<td>
<p>A table containing a list of splitting points for each independent variable. Default is NULL.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_pos_flag">pos_flag</code></td>
<td>
<p>The value of positive class of target variable, default: &quot;1&quot;.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of the variable that represents the time at which each observation takes place.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_best">best</code></td>
<td>
<p>Logical, if TRUE, merge initial breaks to get optimal breaks for binning.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_equal_bins">equal_bins</code></td>
<td>
<p>Logical, if TRUE, equal sample size initial breaks generates.If FALSE , tree breaks generates using desison tree.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_g">g</code></td>
<td>
<p>Integer, number of initial bins for equal_bins.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_sp_values">sp_values</code></td>
<td>
<p>A list of missing values.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_tree_control">tree_control</code></td>
<td>
<p>the list of tree parameters.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_bins_control">bins_control</code></td>
<td>
<p>the list of parameters.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_oot_pct">oot_pct</code></td>
<td>
<p>Percentage of observations retained for overtime test (especially to calculate PSI). Defualt is 0.7</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_psi_i">psi_i</code></td>
<td>
<p>The maximum threshold of PSI.  0 &lt;= psi_i &lt;=1; 0.05 to 0.2 usually work. Default: 0.1</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_iv_i">iv_i</code></td>
<td>
<p>The minimum threshold of IV. 0 &lt; iv_i ; 0.01 to 0.1 usually work. Default: 0.01</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_cos_i">cos_i</code></td>
<td>
<p>cos_similarity of posive rate of train and test. 0.7 to 0.9 usually work.Default: 0.5.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_vars_name">vars_name</code></td>
<td>
<p>Logical, output a list of filtered variables or table with detailed IV and PSI value of each variable. Default is FALSE.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is FALSE.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is FALSE.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved results files.  Default is &quot;Feature_importance_IV_PSI&quot;.</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved results files.  Default is tempdir().</p>
</td></tr>
<tr><td><code id="psi_iv_filter_+3A_...">...</code></td>
<td>
<p>Other parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the following elements:
</p>

<ul>
<li> <p><code>Feature</code> Selected variables.
</p>
</li>
<li> <p><code>IV</code> IV of variables.
</p>
</li>
<li> <p><code>PSI</code> PSI of variables.
</p>
</li>
<li> <p><code>COS</code> cos_similarity of posive rate of train and test.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+xgb_filter">xgb_filter</a></code>, <code><a href="#topic+gbm_filter">gbm_filter</a></code>, <code><a href="#topic+feature_selector">feature_selector</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>psi_iv_filter(dat= UCICreditCard[1:1000,c(2,4,8:9,26)],
             target = "default.payment.next.month",
             occur_time = "apply_date",
             parallel = FALSE)
</code></pre>

<hr>
<h2 id='quick_as_df'>List as data.frame quickly</h2><span id='topic+quick_as_df'></span>

<h3>Description</h3>

<p><code>quick_as_df</code> is function for fast dat frame  transfromation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>quick_as_df(df_list)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="quick_as_df_+3A_df_list">df_list</code></td>
<td>
<p>A list of data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>packages installed and library,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
UCICreditCard = quick_as_df(UCICreditCard)

</code></pre>

<hr>
<h2 id='ranking_percent_proc'>Ranking Percent Process</h2><span id='topic+ranking_percent_proc'></span><span id='topic+ranking_percent_proc_x'></span><span id='topic+ranking_percent_dict'></span><span id='topic+ranking_percent_dict_x'></span>

<h3>Description</h3>

<p><code>ranking_percent_proc</code> is for processing ranking percent variables.
<code>ranking_percent_dict</code> is for generating ranking percent dictionary.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ranking_percent_proc(
  dat,
  ex_cols = NULL,
  x_list = NULL,
  rank_dict = NULL,
  pct = 0.01,
  parallel = FALSE,
  note = FALSE,
  save_data = FALSE,
  file_name = NULL,
  dir_path = tempdir(),
  ...
)

ranking_percent_proc_x(dat, x, rank_dict = NULL, pct = 0.01)

ranking_percent_dict(
  dat,
  x_list = NULL,
  ex_cols = NULL,
  pct = 0.01,
  parallel = FALSE,
  save_data = FALSE,
  file_name = NULL,
  dir_path = tempdir(),
  ...
)

ranking_percent_dict_x(dat, x = NULL, pct = 0.01)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ranking_percent_proc_+3A_dat">dat</code></td>
<td>
<p>A data.frame.</p>
</td></tr>
<tr><td><code id="ranking_percent_proc_+3A_ex_cols">ex_cols</code></td>
<td>
<p>Names of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="ranking_percent_proc_+3A_x_list">x_list</code></td>
<td>
<p>A list of x variables.</p>
</td></tr>
<tr><td><code id="ranking_percent_proc_+3A_rank_dict">rank_dict</code></td>
<td>
<p>The dictionary of rank_percent generated by <code>ranking_percent_dict</code> .</p>
</td></tr>
<tr><td><code id="ranking_percent_proc_+3A_pct">pct</code></td>
<td>
<p>Percent of rank. Default is 0.01.</p>
</td></tr>
<tr><td><code id="ranking_percent_proc_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is FALSE.</p>
</td></tr>
<tr><td><code id="ranking_percent_proc_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="ranking_percent_proc_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is FALSE</p>
</td></tr>
<tr><td><code id="ranking_percent_proc_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved rank_percent data file. Default is &quot;dat_rank_percent&quot;.</p>
</td></tr>
<tr><td><code id="ranking_percent_proc_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved rank_percent data file Default is &quot;tempdir()&quot;</p>
</td></tr>
<tr><td><code id="ranking_percent_proc_+3A_...">...</code></td>
<td>
<p>Additional parameters.</p>
</td></tr>
<tr><td><code id="ranking_percent_proc_+3A_x">x</code></td>
<td>
<p>The name of an independent variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data.frame with new processed variables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rank_dict = ranking_percent_dict(dat = UCICreditCard[1:1000,],
x_list = c("LIMIT_BAL","BILL_AMT2","PAY_AMT3"), ex_cols = NULL )
UCICreditCard_new = ranking_percent_proc(dat = UCICreditCard[1:1000,],
x_list = c("LIMIT_BAL", "BILL_AMT2", "PAY_AMT3"), rank_dict = rank_dict, parallel = FALSE)
</code></pre>

<hr>
<h2 id='re_code'>re_code
<code>re_code</code> search for matches to argument pattern within each element of a character vector:</h2><span id='topic+re_code'></span>

<h3>Description</h3>

<p>re_code
<code>re_code</code> search for matches to argument pattern within each element of a character vector:
</p>


<h3>Usage</h3>

<pre><code class='language-R'>re_code(x, codes)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="re_code_+3A_x">x</code></td>
<td>
<p>Variable to recode.</p>
</td></tr>
<tr><td><code id="re_code_+3A_codes">codes</code></td>
<td>
<p>A data.frame of original value &amp; recode value</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>SEX  = sample(c("F","M"),1000,replace = TRUE)
codes= data.frame(ori_value = c('F','M'), code = c(0,1) )
SEX_re = re_code(SEX,codes)
</code></pre>

<hr>
<h2 id='re_name'>Rename</h2><span id='topic+re_name'></span>

<h3>Description</h3>

<p><code>re_name</code> is  for renaming variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>re_name(dat, oldname = c(), newname = c())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="re_name_+3A_dat">dat</code></td>
<td>
<p>A data frame with vairables to rename.</p>
</td></tr>
<tr><td><code id="re_name_+3A_oldname">oldname</code></td>
<td>
<p>Old names of vairables.</p>
</td></tr>
<tr><td><code id="re_name_+3A_newname">newname</code></td>
<td>
<p>New names of vairables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data with new variable names.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dt = re_name(dat = UCICreditCard, "default.payment.next.month" , "target")
names(dt['target'])
</code></pre>

<hr>
<h2 id='read_data'>Read data</h2><span id='topic+read_data'></span><span id='topic+check_data_format'></span>

<h3>Description</h3>

<p><code>read_data</code> is for loading data, formats like csv, txt,data and so on.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_data(
  path,
  pattern = NULL,
  encoding = "unknown",
  header = TRUE,
  sep = "auto",
  stringsAsFactors = FALSE,
  select = NULL,
  drop = NULL,
  nrows = Inf
)

check_data_format(path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_data_+3A_path">path</code></td>
<td>
<p>Path to file or file name in working directory &amp; path to file.</p>
</td></tr>
<tr><td><code id="read_data_+3A_pattern">pattern</code></td>
<td>
<p>An optional regular expression. Only file names which match the regular expression will be returned.</p>
</td></tr>
<tr><td><code id="read_data_+3A_encoding">encoding</code></td>
<td>
<p>Default is &quot;unknown&quot;. Other possible options are &quot;UTF-8&quot; and &quot;Latin-1&quot;.</p>
</td></tr>
<tr><td><code id="read_data_+3A_header">header</code></td>
<td>
<p>Does the first data line contain column names?</p>
</td></tr>
<tr><td><code id="read_data_+3A_sep">sep</code></td>
<td>
<p>The separator between columns.</p>
</td></tr>
<tr><td><code id="read_data_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>Logical. Convert all character columns to factors?</p>
</td></tr>
<tr><td><code id="read_data_+3A_select">select</code></td>
<td>
<p>A vector of column names or numbers to keep, drop the rest.</p>
</td></tr>
<tr><td><code id="read_data_+3A_drop">drop</code></td>
<td>
<p>A vector of column names or numbers to drop, keep the rest.</p>
</td></tr>
<tr><td><code id="read_data_+3A_nrows">nrows</code></td>
<td>
<p>The maximum number of rows to read.</p>
</td></tr>
</table>

<hr>
<h2 id='reduce_high_cor_filter'>Filtering highly correlated variables with reduce method</h2><span id='topic+reduce_high_cor_filter'></span>

<h3>Description</h3>

<p><code>reduce_high_cor_filter</code> is function for filtering highly correlated variables with reduce method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reduce_high_cor_filter(
  dat,
  x_list = NULL,
  size = ncol(dat)/10,
  p = 0.95,
  com_list = NULL,
  ex_cols = NULL,
  cor_class = TRUE,
  parallel = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="reduce_high_cor_filter_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables.</p>
</td></tr>
<tr><td><code id="reduce_high_cor_filter_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="reduce_high_cor_filter_+3A_size">size</code></td>
<td>
<p>Size of vairable group.</p>
</td></tr>
<tr><td><code id="reduce_high_cor_filter_+3A_p">p</code></td>
<td>
<p>Threshold of correlation between features. Default is 0.7.</p>
</td></tr>
<tr><td><code id="reduce_high_cor_filter_+3A_com_list">com_list</code></td>
<td>
<p>A data.frame with important values of each variable. eg : IV_list</p>
</td></tr>
<tr><td><code id="reduce_high_cor_filter_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="reduce_high_cor_filter_+3A_cor_class">cor_class</code></td>
<td>
<p>Culculate catagery variables's correlation matrix. Default is FALSE.</p>
</td></tr>
<tr><td><code id="reduce_high_cor_filter_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is FALSE.</p>
</td></tr>
</table>

<hr>
<h2 id='remove_duplicated'>Remove Duplicated Observations</h2><span id='topic+remove_duplicated'></span>

<h3>Description</h3>

<p><code>remove_duplicated</code> is the function to remove duplicated observations
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_duplicated(
  dat = dat,
  obs_id = NULL,
  occur_time = NULL,
  target = NULL,
  note = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="remove_duplicated_+3A_dat">dat</code></td>
<td>
<p>A data frame with x and target.</p>
</td></tr>
<tr><td><code id="remove_duplicated_+3A_obs_id">obs_id</code></td>
<td>
<p>The name of ID of observations. Default is NULL.</p>
</td></tr>
<tr><td><code id="remove_duplicated_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of occur time of observations.Default is NULL.</p>
</td></tr>
<tr><td><code id="remove_duplicated_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="remove_duplicated_+3A_note">note</code></td>
<td>
<p>Logical.Outputs info.Default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>datss = remove_duplicated(dat = UCICreditCard,
target = "default.payment.next.month",
obs_id = "ID", occur_time =  "apply_date")
</code></pre>

<hr>
<h2 id='replace_value'>Replace Value</h2><span id='topic+replace_value'></span><span id='topic+replace_value_x'></span>

<h3>Description</h3>

<p><code>replace_value</code> is for replacing values of some variables .
<code>replace_value_x</code> is for replacing values of a variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>replace_value(
  dat = dat,
  x_list = NULL,
  x_pattern = NULL,
  replace_dat,
  MARGIN = 2,
  VALUE = if (MARGIN == 2) colnames(replace_dat) else rownames(replace_dat),
  RE_NAME = TRUE,
  parallel = FALSE
)

replace_value_x(
  dat,
  x,
  replace_dat,
  MARGIN = 2,
  VALUE = if (MARGIN == 2) colnames(replace_dat) else rownames(replace_dat),
  RE_NAME = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="replace_value_+3A_dat">dat</code></td>
<td>
<p>A data.frame.</p>
</td></tr>
<tr><td><code id="replace_value_+3A_x_list">x_list</code></td>
<td>
<p>Names of variables to replace value.</p>
</td></tr>
<tr><td><code id="replace_value_+3A_x_pattern">x_pattern</code></td>
<td>
<p>Regular expressions, used to match variable names.</p>
</td></tr>
<tr><td><code id="replace_value_+3A_replace_dat">replace_dat</code></td>
<td>
<p>A data.frame contains value to replace.</p>
</td></tr>
<tr><td><code id="replace_value_+3A_margin">MARGIN</code></td>
<td>
<p>A vector giving the subscripts which the function will be applied over. E.g., for a matrix 1 indicates rows, 2 indicates columns, c(1, 2) indicates rows and columns. Where X has named dimnames, it can be a character vector selecting dimension names.</p>
</td></tr>
<tr><td><code id="replace_value_+3A_value">VALUE</code></td>
<td>
<p>Values to replace.</p>
</td></tr>
<tr><td><code id="replace_value_+3A_re_name">RE_NAME</code></td>
<td>
<p>Logical, rename the replaced variable.</p>
</td></tr>
<tr><td><code id="replace_value_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is TRUE.</p>
</td></tr>
<tr><td><code id="replace_value_+3A_x">x</code></td>
<td>
<p>Name of variable to replace value.</p>
</td></tr>
</table>

<hr>
<h2 id='require_packages'>Packages required and intallment</h2><span id='topic+require_packages'></span>

<h3>Description</h3>

<p><code>require_packages</code> is function for librarying required packages and  installing missing packages if needed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>require_packages(..., pkg = as.character(substitute(list(...))))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="require_packages_+3A_...">...</code></td>
<td>
<p>Packages need loaded</p>
</td></tr>
<tr><td><code id="require_packages_+3A_pkg">pkg</code></td>
<td>
<p>A list or vector of names of required packages.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>packages installed and library.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
require_packages(data.table, ggplot2, dplyr)

## End(Not run)
</code></pre>

<hr>
<h2 id='rf_params'>Random Forest Parameters</h2><span id='topic+rf_params'></span>

<h3>Description</h3>

<p><code>rf_params</code> is the list of parameters to train a Random Forest using in  <code><a href="#topic+training_model">training_model</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rf_params(ntree = 100, nodesize = 30, samp_rate = 0.5, tune_rf = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rf_params_+3A_ntree">ntree</code></td>
<td>
<p>Number of trees to grow. This should not be set to too small a number, to ensure that every input row gets predicted at least a few times.</p>
</td></tr>
<tr><td><code id="rf_params_+3A_nodesize">nodesize</code></td>
<td>
<p>Minimum size of terminal nodes. Setting this number larger causes smaller trees to be grown (and thus take less time). Note that the default values are different for classification (1) and regression (5).</p>
</td></tr>
<tr><td><code id="rf_params_+3A_samp_rate">samp_rate</code></td>
<td>
<p>Percentage of sample to draw. Default is 0.2.</p>
</td></tr>
<tr><td><code id="rf_params_+3A_tune_rf">tune_rf</code></td>
<td>
<p>A logical.If TRUE, then tune Random Forest model.Default is FALSE.</p>
</td></tr>
<tr><td><code id="rf_params_+3A_...">...</code></td>
<td>
<p>Other parameters</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See details at : <a href="https://www.stat.berkeley.edu/~breiman/Using_random_forests_V3.1.pdf">https://www.stat.berkeley.edu/~breiman/Using_random_forests_V3.1.pdf</a>
</p>


<h3>Value</h3>

<p>A list of parameters.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+training_model">training_model</a></code>, <code><a href="#topic+lr_params">lr_params</a></code>, <code><a href="#topic+gbm_params">gbm_params</a></code>, <code><a href="#topic+xgb_params">xgb_params</a></code>
</p>

<hr>
<h2 id='rowAny'>Functions for vector operation.</h2><span id='topic+rowAny'></span><span id='topic+rowAllnas'></span><span id='topic+colAllnas'></span><span id='topic+colAllzeros'></span><span id='topic+rowAll'></span><span id='topic+rowCVs'></span><span id='topic+rowSds'></span><span id='topic+colSds'></span><span id='topic+rowMaxs'></span><span id='topic+rowMins'></span><span id='topic+rowMaxMins'></span><span id='topic+colMaxMins'></span><span id='topic+cnt_x'></span><span id='topic+sum_x'></span><span id='topic+max_x'></span><span id='topic+min_x'></span><span id='topic+avg_x'></span>

<h3>Description</h3>

<p>Functions for vector operation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rowAny(x)

rowAllnas(x)

colAllnas(x)

colAllzeros(x)

rowAll(x)

rowCVs(x, na.rm = FALSE)

rowSds(x, na.rm = FALSE)

colSds(x, na.rm = TRUE)

rowMaxs(x, na.rm = FALSE)

rowMins(x, na.rm = FALSE)

rowMaxMins(x, na.rm = FALSE)

colMaxMins(x, na.rm = FALSE)

cnt_x(x)

sum_x(x)

max_x(x)

min_x(x)

avg_x(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rowAny_+3A_x">x</code></td>
<td>
<p>A data.frame or Matrix.</p>
</td></tr>
<tr><td><code id="rowAny_+3A_na.rm">na.rm</code></td>
<td>
<p>Logical, remove NAs.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame or Matrix.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#any row has missing values
row_amy =  rowAny(UCICreditCard[8:10])
#rows which is all missing values
row_na =  rowAllnas(UCICreditCard[8:10])
#cols which is all missing values
col_na =  colAllnas(UCICreditCard[8:10])
#cols which is all zeros
row_zero =  colAllzeros(UCICreditCard[8:10])
#sum all numbers of a row
row_all =  rowAll(UCICreditCard[8:10])
#caculate cv of a row
row_cv =  rowCVs(UCICreditCard[8:10])
#caculate sd of a row
row_sd =  rowSds(UCICreditCard[8:10])
#caculate sd of a column
col_sd =  colSds(UCICreditCard[8:10])
</code></pre>

<hr>
<h2 id='save_data'>Save data</h2><span id='topic+save_data'></span>

<h3>Description</h3>

<p><code>save_data</code> is for saving a data.frame or a list fast.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>save_data(
  ...,
  files = list(...),
  file_name = as.character(substitute(list(...))),
  dir_path = getwd(),
  note = FALSE,
  as_list = FALSE,
  row_names = FALSE,
  append = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="save_data_+3A_...">...</code></td>
<td>
<p>datasets</p>
</td></tr>
<tr><td><code id="save_data_+3A_files">files</code></td>
<td>
<p>A dataset or a list of datasets.</p>
</td></tr>
<tr><td><code id="save_data_+3A_file_name">file_name</code></td>
<td>
<p>The file name of data.</p>
</td></tr>
<tr><td><code id="save_data_+3A_dir_path">dir_path</code></td>
<td>
<p>A string. The dir path to save breaks_list.</p>
</td></tr>
<tr><td><code id="save_data_+3A_note">note</code></td>
<td>
<p>Logical. Outputs info.Default is TRUE.</p>
</td></tr>
<tr><td><code id="save_data_+3A_as_list">as_list</code></td>
<td>
<p>Logical. List format or data.frame format to save. Default is FALSE.</p>
</td></tr>
<tr><td><code id="save_data_+3A_row_names">row_names</code></td>
<td>
<p>Logical,retain rownames.</p>
</td></tr>
<tr><td><code id="save_data_+3A_append">append</code></td>
<td>
<p>Logical, append newdata to old.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>save_data(UCICreditCard,"UCICreditCard", tempdir())
</code></pre>

<hr>
<h2 id='score_transfer'>Score Transformation</h2><span id='topic+score_transfer'></span>

<h3>Description</h3>

<p><code>score_transfer</code> is  for transfer woe to score.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>score_transfer(
  model,
  tbl_woe,
  a = 600,
  b = 50,
  file_name = NULL,
  dir_path = tempdir(),
  save_data = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="score_transfer_+3A_model">model</code></td>
<td>
<p>A data frame with x and target.</p>
</td></tr>
<tr><td><code id="score_transfer_+3A_tbl_woe">tbl_woe</code></td>
<td>
<p>a data.frame with woe variables.</p>
</td></tr>
<tr><td><code id="score_transfer_+3A_a">a</code></td>
<td>
<p>Base line of score.</p>
</td></tr>
<tr><td><code id="score_transfer_+3A_b">b</code></td>
<td>
<p>Numeric.Increased scores from doubling Odds.</p>
</td></tr>
<tr><td><code id="score_transfer_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved score file. Default is &quot;dat_score&quot;.</p>
</td></tr>
<tr><td><code id="score_transfer_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved score file.  Default is &quot;./data&quot;</p>
</td></tr>
<tr><td><code id="score_transfer_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with variables which values transfered to score.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># dataset spliting
sub = cv_split(UCICreditCard, k = 30)[[1]]
dat = UCICreditCard[sub,]
#rename the target variable
dat = re_name(dat, "default.payment.next.month", "target")
dat = data_cleansing(dat, target = "target", obs_id = "ID",
occur_time = "apply_date", miss_values =  list("", -1))
#train_ test pliting
train_test = train_test_split(dat, split_type = "OOT", prop = 0.7,
                                occur_time = "apply_date")
dat_train = train_test$train
dat_test = train_test$test
#get breaks of all predictive variables
x_list = c("PAY_0", "LIMIT_BAL", "PAY_AMT5", "EDUCATION", "PAY_3", "PAY_2")
breaks_list = get_breaks_all(dat = dat_train, target = "target",
                              x_list = x_list, occur_time = "apply_date", ex_cols = "ID",
save_data = FALSE, note = FALSE)
#woe transforming
train_woe = woe_trans_all(dat = dat_train,
                          target = "target",
                          breaks_list = breaks_list,
                          woe_name = FALSE)
test_woe = woe_trans_all(dat = dat_test,
                       target = "target",
                         breaks_list = breaks_list,
                         note = FALSE)
Formula = as.formula(paste("target", paste(x_list, collapse = ' + '), sep = ' ~ '))
set.seed(46)
lr_model = glm(Formula, data = train_woe[, c("target", x_list)], family = binomial(logit))
#get LR coefficient
dt_imp_LR = get_logistic_coef(lg_model = lr_model, save_data = FALSE)
bins_table = get_bins_table_all(dat = dat_train, target = "target",
                                x_list = x_list,dat_test = dat_test,
                               breaks_list = breaks_list, note = FALSE)
#score card
LR_score_card = get_score_card(lg_model = lr_model, bins_table, target = "target")
#scoring
train_pred = dat_train[, c("ID", "apply_date", "target")]
test_pred = dat_test[, c("ID", "apply_date", "target")]
train_pred$pred_LR = score_transfer(model = lr_model,
                                                    tbl_woe = train_woe,
                                                    save_data = FALSE)[, "score"]

test_pred$pred_LR = score_transfer(model = lr_model,
tbl_woe = test_woe, save_data = FALSE)[, "score"]
</code></pre>

<hr>
<h2 id='select_best_class'>Generates Best Binning Breaks</h2><span id='topic+select_best_class'></span><span id='topic+select_best_breaks'></span>

<h3>Description</h3>

<p><code>select_best_class</code> &amp; <code>select_best_breaks</code> are  for merging initial breaks of variables using chi-square, odds-ratio,PSI,G/B index and so on.
The <code>get_breaks</code>  is a simpler wrapper for <code>select_best_class</code> &amp; <code>select_best_class</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>select_best_class(
  dat,
  x,
  target,
  breaks = NULL,
  occur_time = NULL,
  oot_pct = 0.7,
  pos_flag = NULL,
  bins_control = NULL,
  sp_values = NULL,
  ...
)

select_best_breaks(
  dat,
  x,
  target,
  breaks = NULL,
  pos_flag = NULL,
  sp_values = NULL,
  occur_time = NULL,
  oot_pct = 0.7,
  bins_control = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="select_best_class_+3A_dat">dat</code></td>
<td>
<p>A data frame with x and target.</p>
</td></tr>
<tr><td><code id="select_best_class_+3A_x">x</code></td>
<td>
<p>The name of variable to process.</p>
</td></tr>
<tr><td><code id="select_best_class_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="select_best_class_+3A_breaks">breaks</code></td>
<td>
<p>Splitting points for an independent variable. Default is NULL.</p>
</td></tr>
<tr><td><code id="select_best_class_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of the variable that represents the time at which each observation takes place.</p>
</td></tr>
<tr><td><code id="select_best_class_+3A_oot_pct">oot_pct</code></td>
<td>
<p>The percentage of Actual and Expected set for PSI calculating.</p>
</td></tr>
<tr><td><code id="select_best_class_+3A_pos_flag">pos_flag</code></td>
<td>
<p>The value of positive class of target variable, default: &quot;1&quot;.</p>
</td></tr>
<tr><td><code id="select_best_class_+3A_bins_control">bins_control</code></td>
<td>
<p>the list of parameters.
</p>

<ul>
<li> <p><code>bins_num</code> The maximum number of bins. 5 to 10 usually work. Default: 10
</p>
</li>
<li> <p><code>bins_pct</code> The minimum percent of observations in any bins. 0 &lt; bins_pct &lt; 1 , 0.01 to 0.1 usually work. Default: 0.02.
</p>
</li>
<li> <p><code>b_chi</code> The minimum threshold of chi-square merge. 0 &lt; b_chi&lt; 1; 0.01 to 0.1 usually work. Default: 0.02.
</p>
</li>
<li> <p><code>b_odds</code> The minimum threshold of  odds merge. 0 &lt; b_odds &lt; 1; 0.05 to 0.2 usually work. Default: 0.1.
</p>
</li>
<li> <p><code>b_psi</code> The maximum threshold of PSI in any bins. 0 &lt; b_psi &lt; 1 ; 0 to 0.1 usually work. Default: 0.05.
</p>
</li>
<li> <p><code>b_or</code> The maximum threshold of G/B index in any bins.  0 &lt; b_or &lt; 1 ; 0.05 to 0.3 usually work. Default: 0.15.
</p>
</li>
<li> <p><code>odds_psi</code> The maximum threshold of Training and Testing G/B index PSI in any bins. 0 &lt; odds_psi &lt; 1 ; 0.01 to 0.3 usually work. Default: 0.1.
</p>
</li>
<li> <p><code>mono</code> Monotonicity of all bins, the larger, the more nonmonotonic the bins will be.  0 &lt; mono &lt; 0.5 ; 0.2 to 0.4 usually work. Default: 0.2.
</p>
</li>
<li> <p><code>kc</code> number of cross-validations. 1 to 5 usually work. Default: 1.
</p>
</li></ul>
</td></tr>
<tr><td><code id="select_best_class_+3A_sp_values">sp_values</code></td>
<td>
<p>A list of special value.</p>
</td></tr>
<tr><td><code id="select_best_class_+3A_...">...</code></td>
<td>
<p>Other parameters.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The folloiwing is the list of Reference Principles
</p>

<ul>
<li><p> 1.The increasing or decreasing trend of variables is consistent with the actual business experience.(The percent of Non-monotonic intervals of which are not head or tail is less than 0.35)
</p>
</li>
<li><p> 2.Maximum 10 intervals for a single variable.
</p>
</li>
<li><p> 3.Each interval should cover more than 2
</p>
</li>
<li><p> 4.Each interval needs at least 30 or 1
</p>
</li>
<li><p> 5.Combining the values of blank, missing or other special value into the same interval called missing.
</p>
</li>
<li><p> 6.The difference of Chi effect size between intervals should be at least 0.02 or more.
</p>
</li>
<li><p> 7.The difference of absolute odds ratio between intervals should be at least 0.1 or more.
</p>
</li>
<li><p> 8.The difference of positive rate between intervals should be at least 1/10 of the total positive rate.
</p>
</li>
<li><p> 9.The difference of G/B index between intervals should be at least 15 or more.
</p>
</li>
<li><p> 10.The PSI of each interval should be less than 0.1.
</p>
</li></ul>



<h3>Value</h3>

<p>A list of breaks for x.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_tree_breaks">get_tree_breaks</a></code>,
<code><a href="#topic+cut_equal">cut_equal</a></code>,
<code><a href="#topic+get_breaks">get_breaks</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#equal sample size breaks
equ_breaks = cut_equal(dat = UCICreditCard[, "PAY_AMT2"], g = 10)

# select best bins
bins_control = list(bins_num = 10, bins_pct = 0.02, b_chi = 0.02,
b_odds = 0.1, b_psi = 0.05, b_or = 0.15, mono = 0.3, odds_psi = 0.1, kc = 1)
select_best_breaks(dat = UCICreditCard, x = "PAY_AMT2", breaks = equ_breaks,
target = "default.payment.next.month", occur_time = "apply_date",
sp_values = NULL, bins_control = bins_control)
</code></pre>

<hr>
<h2 id='sim_str'>sim_str</h2><span id='topic+sim_str'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim_str(a, b, sep = "_|[.]|[A-Z]")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sim_str_+3A_a">a</code></td>
<td>
<p>A string</p>
</td></tr>
<tr><td><code id="sim_str_+3A_b">b</code></td>
<td>
<p>A string</p>
</td></tr>
<tr><td><code id="sim_str_+3A_sep">sep</code></td>
<td>
<p>Seprater of strings. Default is &quot;_|[.]|[A-Z]&quot;.</p>
</td></tr>
</table>

<hr>
<h2 id='split_bins'>split_bins</h2><span id='topic+split_bins'></span>

<h3>Description</h3>

<p><code>split_bins</code> is  for binning using breaks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>split_bins(
  dat,
  x,
  breaks = NULL,
  bins_no = TRUE,
  as_factor = FALSE,
  labels = NULL,
  use_NA = TRUE,
  char_free = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="split_bins_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables.</p>
</td></tr>
<tr><td><code id="split_bins_+3A_x">x</code></td>
<td>
<p>The name of an independent variable.</p>
</td></tr>
<tr><td><code id="split_bins_+3A_breaks">breaks</code></td>
<td>
<p>Breaks for binning.</p>
</td></tr>
<tr><td><code id="split_bins_+3A_bins_no">bins_no</code></td>
<td>
<p>Number the generated bins. Default is TRUE.</p>
</td></tr>
<tr><td><code id="split_bins_+3A_as_factor">as_factor</code></td>
<td>
<p>Whether to convert to factor type.</p>
</td></tr>
<tr><td><code id="split_bins_+3A_labels">labels</code></td>
<td>
<p>Labels of bins.</p>
</td></tr>
<tr><td><code id="split_bins_+3A_use_na">use_NA</code></td>
<td>
<p>Whether to process NAs.</p>
</td></tr>
<tr><td><code id="split_bins_+3A_char_free">char_free</code></td>
<td>
<p>Logical, if TRUE, characters are not splitted.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with Bined x.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>bins = split_bins(dat = UCICreditCard,
x = "PAY_AMT1", breaks = NULL, bins_no = TRUE)
</code></pre>

<hr>
<h2 id='split_bins_all'>Split bins all</h2><span id='topic+split_bins_all'></span>

<h3>Description</h3>

<p><code>split_bins</code> is for transforming data to bins.
The <code>split_bins_all</code> function is a simpler wrapper for <code>split_bins</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>split_bins_all(
  dat,
  x_list = NULL,
  ex_cols = NULL,
  breaks_list = NULL,
  bins_no = TRUE,
  note = FALSE,
  return_x = FALSE,
  char_free = FALSE,
  save_data = FALSE,
  file_name = NULL,
  dir_path = tempdir(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="split_bins_all_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables.</p>
</td></tr>
<tr><td><code id="split_bins_all_+3A_x_list">x_list</code></td>
<td>
<p>A list of x variables.</p>
</td></tr>
<tr><td><code id="split_bins_all_+3A_ex_cols">ex_cols</code></td>
<td>
<p>Names of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="split_bins_all_+3A_breaks_list">breaks_list</code></td>
<td>
<p>A list contains breaks of variables. it is generated by code<a href="#topic+get_breaks_all">get_breaks_all</a>,code<a href="#topic+get_breaks">get_breaks</a></p>
</td></tr>
<tr><td><code id="split_bins_all_+3A_bins_no">bins_no</code></td>
<td>
<p>Number the generated bins. Default is TRUE.</p>
</td></tr>
<tr><td><code id="split_bins_all_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="split_bins_all_+3A_return_x">return_x</code></td>
<td>
<p>Logical, return data.frame containing only variables in x_list.</p>
</td></tr>
<tr><td><code id="split_bins_all_+3A_char_free">char_free</code></td>
<td>
<p>Logical, if TRUE, characters are not splitted.</p>
</td></tr>
<tr><td><code id="split_bins_all_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is TRUE</p>
</td></tr>
<tr><td><code id="split_bins_all_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved woe file. Default is &quot;dat_woe&quot;.</p>
</td></tr>
<tr><td><code id="split_bins_all_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved woe file Default is &quot;./data&quot;</p>
</td></tr>
<tr><td><code id="split_bins_all_+3A_...">...</code></td>
<td>
<p>Additional parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with splitted bins.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_tree_breaks">get_tree_breaks</a></code>, <code><a href="#topic+cut_equal">cut_equal</a></code>, <code><a href="#topic+select_best_class">select_best_class</a></code>, <code><a href="#topic+select_best_breaks">select_best_breaks</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sub = cv_split(UCICreditCard, k = 30)[[1]]
dat = UCICreditCard[sub,]
dat = re_name(dat, "default.payment.next.month", "target")
dat = data_cleansing(dat, target = "target", obs_id = "ID", occur_time = "apply_date",
miss_values =  list("", -1))

train_test = train_test_split(dat, split_type = "OOT", prop = 0.7,
                                occur_time = "apply_date")
dat_train = train_test$train
dat_test = train_test$test
#get breaks of all predictive variables
x_list = c("PAY_0", "LIMIT_BAL", "PAY_AMT5", "EDUCATION", "PAY_3", "PAY_2")
breaks_list = get_breaks_all(dat = dat_train, target = "target",
                              x_list = x_list, occur_time = "apply_date", ex_cols = "ID",
save_data = FALSE, note  = FALSE)
#woe transform
train_bins = split_bins_all(dat = dat_train,
                          breaks_list = breaks_list,
                          woe_name = FALSE)
test_bins = split_bins_all(dat = dat_test,
                         breaks_list = breaks_list,
                         note = FALSE)

</code></pre>

<hr>
<h2 id='sql_hive_text_parse'>Automatic production of hive SQL</h2><span id='topic+sql_hive_text_parse'></span>

<h3>Description</h3>

<p>Returns text parse of hive SQL
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sql_hive_text_parse(
  sql_dt,
  key_sql = NULL,
  key_table = NULL,
  key_id = NULL,
  key_where = c("dt = date_add(current_date(),-1)"),
  only_key = FALSE,
  left_id = NULL,
  left_where = c("dt = date_add(current_date(),-1)"),
  new_name = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sql_hive_text_parse_+3A_sql_dt">sql_dt</code></td>
<td>
<p>The data dictionary has three columns: table, map and feature.</p>
</td></tr>
<tr><td><code id="sql_hive_text_parse_+3A_key_sql">key_sql</code></td>
<td>
<p>You can write your own SQL for the main table.</p>
</td></tr>
<tr><td><code id="sql_hive_text_parse_+3A_key_table">key_table</code></td>
<td>
<p>Key table.</p>
</td></tr>
<tr><td><code id="sql_hive_text_parse_+3A_key_id">key_id</code></td>
<td>
<p>Primary key id.</p>
</td></tr>
<tr><td><code id="sql_hive_text_parse_+3A_key_where">key_where</code></td>
<td>
<p>Key table conditions.</p>
</td></tr>
<tr><td><code id="sql_hive_text_parse_+3A_only_key">only_key</code></td>
<td>
<p>Only key table.</p>
</td></tr>
<tr><td><code id="sql_hive_text_parse_+3A_left_id">left_id</code></td>
<td>
<p>Right table's key id.</p>
</td></tr>
<tr><td><code id="sql_hive_text_parse_+3A_left_where">left_where</code></td>
<td>
<p>Right table conditions.</p>
</td></tr>
<tr><td><code id="sql_hive_text_parse_+3A_new_name">new_name</code></td>
<td>
<p>A string, Rename all variables except primary key with suffix 'new_name'.</p>
</td></tr>
<tr><td><code id="sql_hive_text_parse_+3A_...">...</code></td>
<td>
<p>Other params.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Text parse of hive SQL
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#sql_dt:table, map and feature
sql_dt = data.frame(table = c("table_1", "table_1",  "table_1", "table_1","table_1",
                               "table_2", "table_2","table_2",
                              "table_2","table_2","table_2","table_2",
                               "table_2","table_2","table_2","table_2",
                              "table_2","table_2","table_2","table_3","table_3",
                               "table_3","table_3","table_3"), 
                   map =  c("all","all", "all","all","all","all","all","all","all","all",
                            "all", "all","all","id_card_info",
                            "id_card_info","id_card_info", "mobile_info","mobile_info",
                            "mobile_info","all", "all","all", "all","all"), 
                   feature =c( "user_id","real_name","id_card_encode","mobile_encode","dt",
                              "user_id","type_code","first_channel",
                               "second_channel","user_name","user_sex","user_birthday",
                                 "user_age","card_province","card_zone",
                               "card_city","city","province","carrier","user_id",
                              "biz_id","biz_code","apply_time","dt"))
#sample 1
sql_hive_text_parse(sql_dt = sql_dt,
          key_sql = NULL,
               key_table = "table_2",
               key_where =  c("user_sex = 'male",
                              "user_age &gt; 20"),
               only_key = FALSE,
               key_id = "user_id",
               left_id = "user_id",
               left_where = c("dt = date_add(current_date(),-1)",
                              "apply_time &gt;= '2020-05-01' "
               ), new_name ="basic"
          )

#sample 2
sql_hive_text_parse(sql_dt = subset(sql_dt),
               key_sql = "SELECT 
       user_id,
       max(apply_time) as max_apply_time
       FROM table_3
       WHERE dt = date_add(current_date(),-1)
               GROUP BY user_id",
               key_id = "user_id",
               left_id = "user_id",
               left_where = c("dt = date_add(current_date(),-1)"
                              ),
               new_name =  NULL)
</code></pre>

<hr>
<h2 id='start_parallel_computing'>Parallel computing and export variables to global Env.</h2><span id='topic+start_parallel_computing'></span>

<h3>Description</h3>

<p>This function  is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>start_parallel_computing(parallel = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="start_parallel_computing_+3A_parallel">parallel</code></td>
<td>
<p>A logical, default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>parallel works.
</p>

<hr>
<h2 id='stop_parallel_computing'>Stop parallel computing</h2><span id='topic+stop_parallel_computing'></span>

<h3>Description</h3>

<p>This function  is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stop_parallel_computing(cluster)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stop_parallel_computing_+3A_cluster">cluster</code></td>
<td>
<p>Parallel works.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>stop clusters.
</p>

<hr>
<h2 id='str_match'>string match
#' <code>str_match</code> search for matches to argument pattern within each element of a character vector:</h2><span id='topic+str_match'></span>

<h3>Description</h3>

<p>string match
#' <code>str_match</code> search for matches to argument pattern within each element of a character vector:
</p>


<h3>Usage</h3>

<pre><code class='language-R'>str_match(pattern, str_r)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="str_match_+3A_pattern">pattern</code></td>
<td>
<p>character string containing a regular expression (or character string for fixed = TRUE) to be matched in the given character vector. Coerced by as.character to a character string if possible. If a character vector of length 2 or more is supplied, the first element is used with a warning. missing values are allowed except for regexpr and gregexpr.</p>
</td></tr>
<tr><td><code id="str_match_+3A_str_r">str_r</code></td>
<td>
<p>a character vector where matches are sought, or an object which can be coerced by as.character to a character vector. Long vectors are supported.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>orignal_nam = c("12mdd","11mdd","10mdd")
str_match(str_r = orignal_nam,pattern= "\\d+")
</code></pre>

<hr>
<h2 id='sum_table'>Summary table</h2><span id='topic+sum_table'></span>

<h3>Description</h3>

<p>#'The <code>sum_table</code> includes both univariate and bivariate analysis and ranges from univariate statistics and frequency distributions, to correlations, cross-tabulation and characteristic analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sum_table(dat, ..., x_s = as.character(substitute(list(...))), x_list = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sum_table_+3A_dat">dat</code></td>
<td>
<p>A data.frame with x and target.</p>
</td></tr>
<tr><td><code id="sum_table_+3A_...">...</code></td>
<td>
<p>x of dat</p>
</td></tr>
<tr><td><code id="sum_table_+3A_x_s">x_s</code></td>
<td>
<p>A list of x.</p>
</td></tr>
<tr><td><code id="sum_table_+3A_x_list">x_list</code></td>
<td>
<p>Names of dat.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list contains both categrory and numeric variable analysis.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sum_table(UCICreditCard)
sum_table(UCICreditCard,LIMIT_BAL,AGE,EDUCATION,SEX)
</code></pre>

<hr>
<h2 id='term_tfidf'>TF-IDF</h2><span id='topic+term_tfidf'></span><span id='topic+term_idf'></span><span id='topic+term_filter'></span>

<h3>Description</h3>

<p>The <code>term_filter</code> is for filtering stop_words and low frequency words.
The <code>term_idf</code> is for computing idf(inverse documents frequency) of terms.
The <code>term_tfidf</code> is for computing tf-idf of documents.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>term_tfidf(term_df, idf = NULL)

term_idf(term_df, n_total = NULL)

term_filter(term_df, low_freq = 0.01, stop_words = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="term_tfidf_+3A_term_df">term_df</code></td>
<td>
<p>A data.frame with id and term.</p>
</td></tr>
<tr><td><code id="term_tfidf_+3A_idf">idf</code></td>
<td>
<p>A data.frame with idf.</p>
</td></tr>
<tr><td><code id="term_tfidf_+3A_n_total">n_total</code></td>
<td>
<p>Number of documents.</p>
</td></tr>
<tr><td><code id="term_tfidf_+3A_low_freq">low_freq</code></td>
<td>
<p>Use rate of terms or use numbers of terms.</p>
</td></tr>
<tr><td><code id="term_tfidf_+3A_stop_words">stop_words</code></td>
<td>
<p>Stop words.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>term_df = data.frame(id = c(1,1,1,2,2,3,3,3,4,4,4,4,4,5,5,6,7,7,
                            8,8,8,9,9,9,10,10,11,11,11,11,11,11),
terms = c('a','b','c','a','c','d','d','a','b','c','a','c','d','a','c',
          'd','a','e','f','b','c','f','b','c','h','h','i','c','d','g','k','k'))
term_df = term_filter(term_df = term_df, low_freq = 1)
idf = term_idf(term_df)
tf_idf = term_tfidf(term_df,idf = idf)
</code></pre>

<hr>
<h2 id='time_series_proc'>Process time series data</h2><span id='topic+time_series_proc'></span>

<h3>Description</h3>

<p>This function is used for time series data processing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>time_series_proc(dat, ID = NULL, group = NULL, time = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="time_series_proc_+3A_dat">dat</code></td>
<td>
<p>A data.frame contained only predict variables.</p>
</td></tr>
<tr><td><code id="time_series_proc_+3A_id">ID</code></td>
<td>
<p>The name of ID of observations or key variable of data. Default is NULL.</p>
</td></tr>
<tr><td><code id="time_series_proc_+3A_group">group</code></td>
<td>
<p>The group of behavioral or status variables.</p>
</td></tr>
<tr><td><code id="time_series_proc_+3A_time">time</code></td>
<td>
<p>The name of variable which is time when behavior was happened.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The key to creating a good model is not the power of a specific modelling technique, but the breadth and depth of derived variables that represent a higher level of knowledge about the phenomena under examination.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat = data.frame(id = c(1,1,1,2,2,3,3,3,4,4,4,4,4,5,5,6,7,7,
                            8,8,8,9,9,9,10,10,11,11,11,11,11,11),
                     terms = c('a','b','c','a','c','d','d','a',
                               'b','c','a','c','d','a','c',
                                  'd','a','e','f','b','c','f','b',
                               'c','h','h','i','c','d','g','k','k'),
                     time = c(8,3,1,9,6,1,4,9,1,3,4,8,2,7,1,
                              3,4,1,8,7,2,5,7,8,8,2,1,5,7,2,7,3))

time_series_proc(dat = dat, ID = 'id', group = 'terms',time = 'time')
</code></pre>

<hr>
<h2 id='time_transfer'>Time Format Transfering</h2><span id='topic+time_transfer'></span>

<h3>Description</h3>

<p><code>time_transfer</code> is for transfering time variables to time format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>time_transfer(dat, date_cols = NULL, ex_cols = NULL, note = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="time_transfer_+3A_dat">dat</code></td>
<td>
<p>A data frame</p>
</td></tr>
<tr><td><code id="time_transfer_+3A_date_cols">date_cols</code></td>
<td>
<p>Names of time variable or regular expressions for finding time variables. Default is  &quot;DATE$|time$|date$|timestamp$|stamp$&quot;.</p>
</td></tr>
<tr><td><code id="time_transfer_+3A_ex_cols">ex_cols</code></td>
<td>
<p>Names of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="time_transfer_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with transfermed time variables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#transfer a variable.
dat = time_transfer(dat = lendingclub,date_cols = "issue_d")
class(dat[,"issue_d"])
#transfer a group of variables with similar name.
#transfer all time variables.
dat = time_transfer(dat = lendingclub[1:3],date_cols = "_d$")
class(dat[,"issue_d"])
</code></pre>

<hr>
<h2 id='time_variable'>time_variable</h2><span id='topic+time_variable'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>time_variable(
  dat,
  date_cols = NULL,
  enddate = NULL,
  units = c("secs", "mins", "hours", "days", "weeks")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="time_variable_+3A_dat">dat</code></td>
<td>
<p>A data.frame.</p>
</td></tr>
<tr><td><code id="time_variable_+3A_date_cols">date_cols</code></td>
<td>
<p>Time variables.</p>
</td></tr>
<tr><td><code id="time_variable_+3A_enddate">enddate</code></td>
<td>
<p>End time.</p>
</td></tr>
<tr><td><code id="time_variable_+3A_units">units</code></td>
<td>
<p>Units of diff_time, &quot;secs&quot;, &quot;mins&quot;, &quot;hours&quot;, &quot;days&quot;, &quot;weeks&quot; is available.</p>
</td></tr>
</table>

<hr>
<h2 id='time_vars_process'>Processing of Time or Date Variables</h2><span id='topic+time_vars_process'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>time_vars_process(
  df_tm = df_tm,
  x,
  enddate = NULL,
  units = c("secs", "mins", "hours", "days", "weeks")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="time_vars_process_+3A_df_tm">df_tm</code></td>
<td>
<p>A data.frame</p>
</td></tr>
<tr><td><code id="time_vars_process_+3A_x">x</code></td>
<td>
<p>Time variable.</p>
</td></tr>
<tr><td><code id="time_vars_process_+3A_enddate">enddate</code></td>
<td>
<p>End time.</p>
</td></tr>
<tr><td><code id="time_vars_process_+3A_units">units</code></td>
<td>
<p>Units of diff_time, &quot;secs&quot;, &quot;mins&quot;, &quot;hours&quot;, &quot;days&quot;, &quot;weeks&quot; is available.</p>
</td></tr>
</table>

<hr>
<h2 id='tnr_value'>tnr_value</h2><span id='topic+tnr_value'></span>

<h3>Description</h3>

<p><code>tnr_value</code> is for get true negtive rate for a prob or score.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tnr_value(prob, target)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tnr_value_+3A_prob">prob</code></td>
<td>
<p>A list of redict probability or score.</p>
</td></tr>
<tr><td><code id="tnr_value_+3A_target">target</code></td>
<td>
<p>Vector of target.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>True Positive Rate
</p>

<hr>
<h2 id='train_lr'>Trainig LR model</h2><span id='topic+train_lr'></span>

<h3>Description</h3>

<p><code>train_lr</code> is for training the logistic regression model using in <code><a href="#topic+training_model">training_model</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>train_lr(
  dat_train,
  dat_test = NULL,
  target,
  x_list = NULL,
  occur_time = NULL,
  prop = 0.7,
  tree_control = list(p = 0.02, cp = 1e-08, xval = 5, maxdepth = 10),
  bins_control = list(bins_num = 10, bins_pct = 0.05, b_chi = 0.02, b_odds = 0.1, b_psi
    = 0.03, b_or = 0.15, mono = 0.2, odds_psi = 0.15, kc = 1),
  thresholds = list(cor_p = 0.8, iv_i = 0.02, psi_i = 0.1, cos_i = 0.6),
  lasso = TRUE,
  step_wise = TRUE,
  best_lambda = "lambda.auc",
  seed = 1234,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="train_lr_+3A_dat_train">dat_train</code></td>
<td>
<p>data.frame of train data. Default is NULL.</p>
</td></tr>
<tr><td><code id="train_lr_+3A_dat_test">dat_test</code></td>
<td>
<p>data.frame of test data. Default is NULL.</p>
</td></tr>
<tr><td><code id="train_lr_+3A_target">target</code></td>
<td>
<p>name of target variable.</p>
</td></tr>
<tr><td><code id="train_lr_+3A_x_list">x_list</code></td>
<td>
<p>names of independent variables. Default is NULL.</p>
</td></tr>
<tr><td><code id="train_lr_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of the variable that represents the time at which each observation takes place.Default is NULL.</p>
</td></tr>
<tr><td><code id="train_lr_+3A_prop">prop</code></td>
<td>
<p>Percentage of train-data after the partition. Default: 0.7.</p>
</td></tr>
<tr><td><code id="train_lr_+3A_tree_control">tree_control</code></td>
<td>
<p>the list of parameters to control cutting initial breaks by decision tree. See details at: <code><a href="#topic+get_tree_breaks">get_tree_breaks</a></code></p>
</td></tr>
<tr><td><code id="train_lr_+3A_bins_control">bins_control</code></td>
<td>
<p>the list of parameters to control merging initial breaks. See details at: <code><a href="#topic+select_best_breaks">select_best_breaks</a></code>,<code><a href="#topic+select_best_class">select_best_class</a></code></p>
</td></tr>
<tr><td><code id="train_lr_+3A_thresholds">thresholds</code></td>
<td>
<p>Thresholds for selecting variables.
</p>

<ul>
<li> <p><code>cor_p</code> The maximum threshold of correlation. Default: 0.8.
</p>
</li>
<li> <p><code>iv_i</code> The minimum threshold of IV. 0.01 to 0.1 usually work. Default: 0.02
</p>
</li>
<li> <p><code>psi_i</code> The maximum threshold of PSI. 0.1 to 0.3 usually work. Default: 0.1.
</p>
</li>
<li> <p><code>cos_i</code> cos_similarity of posive rate of train and test. 0.7 to 0.9 usually work.Default: 0.5.
</p>
</li></ul>
</td></tr>
<tr><td><code id="train_lr_+3A_lasso">lasso</code></td>
<td>
<p>Logical, if TRUE, variables filtering by LASSO. Default is TRUE.</p>
</td></tr>
<tr><td><code id="train_lr_+3A_step_wise">step_wise</code></td>
<td>
<p>Logical, stepwise method. Default is TRUE.</p>
</td></tr>
<tr><td><code id="train_lr_+3A_best_lambda">best_lambda</code></td>
<td>
<p>Metheds of best lanmbda stardards using to filter variables by LASSO. There are 3 methods: (&quot;lambda.auc&quot;, &quot;lambda.ks&quot;, &quot;lambda.sim_sign&quot;) . Default is  &quot;lambda.auc&quot;.</p>
</td></tr>
<tr><td><code id="train_lr_+3A_seed">seed</code></td>
<td>
<p>Random number seed. Default is 1234.</p>
</td></tr>
<tr><td><code id="train_lr_+3A_...">...</code></td>
<td>
<p>Other parameters</p>
</td></tr>
</table>

<hr>
<h2 id='train_test_split'>Train-Test-Split</h2><span id='topic+train_test_split'></span>

<h3>Description</h3>

<p><code>train_test_split</code> Functions for partition of data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>train_test_split(
  dat,
  prop = 0.7,
  split_type = "Random",
  occur_time = NULL,
  cut_date = NULL,
  start_date = NULL,
  save_data = FALSE,
  dir_path = tempdir(),
  file_name = NULL,
  note = FALSE,
  seed = 43
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="train_test_split_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="train_test_split_+3A_prop">prop</code></td>
<td>
<p>The percentage of train data samples after the partition.</p>
</td></tr>
<tr><td><code id="train_test_split_+3A_split_type">split_type</code></td>
<td>
<p>Methods for partition.
</p>

<ul>
<li><p> &quot;Random&quot; is to split train &amp; test set randomly.
</p>
</li>
<li><p> &quot;OOT&quot; is to split by time for observation over time test.
</p>
</li>
<li><p> &quot;byRow&quot; is to split by rownumbers.
</p>
</li></ul>
</td></tr>
<tr><td><code id="train_test_split_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of the variable that represents the time at which each observation takes place. It is used for &quot;OOT&quot; split.</p>
</td></tr>
<tr><td><code id="train_test_split_+3A_cut_date">cut_date</code></td>
<td>
<p>Time points for spliting data sets, e.g. : spliting Actual and Expected data sets.</p>
</td></tr>
<tr><td><code id="train_test_split_+3A_start_date">start_date</code></td>
<td>
<p>The earliest occurrence time of observations.</p>
</td></tr>
<tr><td><code id="train_test_split_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is FALSE.</p>
</td></tr>
<tr><td><code id="train_test_split_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved data file. Default is &quot;./data&quot;.</p>
</td></tr>
<tr><td><code id="train_test_split_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved data file. Default is &quot;dat&quot;.</p>
</td></tr>
<tr><td><code id="train_test_split_+3A_note">note</code></td>
<td>
<p>Logical. Outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="train_test_split_+3A_seed">seed</code></td>
<td>
<p>Random number seed. Default is 46.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of indices (train-test)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>train_test = train_test_split(lendingclub,
split_type = "OOT", prop = 0.7,
occur_time = "issue_d", seed = 12, save_data = FALSE)
dat_train = train_test$train
dat_test = train_test$test
</code></pre>

<hr>
<h2 id='train_xgb'>Training XGboost</h2><span id='topic+train_xgb'></span>

<h3>Description</h3>

<p><code>train_xgb</code> is for training a xgb model using in <code><a href="#topic+training_model">training_model</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>train_xgb(
  seed_number = 1234,
  dtrain,
  nthread = 2,
  nfold = 1,
  watchlist = NULL,
  nrounds = 100,
  f_eval = "ks",
  early_stopping_rounds = 10,
  verbose = 0,
  params = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="train_xgb_+3A_seed_number">seed_number</code></td>
<td>
<p>Random number seed. Default is 1234.</p>
</td></tr>
<tr><td><code id="train_xgb_+3A_dtrain">dtrain</code></td>
<td>
<p>train-data of xgb.DMatrix datasets.</p>
</td></tr>
<tr><td><code id="train_xgb_+3A_nthread">nthread</code></td>
<td>
<p>Number of threads</p>
</td></tr>
<tr><td><code id="train_xgb_+3A_nfold">nfold</code></td>
<td>
<p>Number of the cross validation of xgboost</p>
</td></tr>
<tr><td><code id="train_xgb_+3A_watchlist">watchlist</code></td>
<td>
<p>named list of xgb.DMatrix datasets to use for evaluating model performance.generating by <code><a href="#topic+xgb_data">xgb_data</a></code></p>
</td></tr>
<tr><td><code id="train_xgb_+3A_nrounds">nrounds</code></td>
<td>
<p>Max number of boosting iterations.</p>
</td></tr>
<tr><td><code id="train_xgb_+3A_f_eval">f_eval</code></td>
<td>
<p>Custimized evaluation function,&quot;ks&quot; &amp; &quot;auc&quot; are available.</p>
</td></tr>
<tr><td><code id="train_xgb_+3A_early_stopping_rounds">early_stopping_rounds</code></td>
<td>
<p>If NULL, the early stopping function is not triggered. If set to an integer k, training with a validation set will stop if the performance doesn't improve for k rounds.</p>
</td></tr>
<tr><td><code id="train_xgb_+3A_verbose">verbose</code></td>
<td>
<p>If 0, xgboost will stay silent. If 1, it will print information about performance.</p>
</td></tr>
<tr><td><code id="train_xgb_+3A_params">params</code></td>
<td>
<p>List of contains parameters of xgboost. The complete list of parameters is available at: <a href="http://xgboost.readthedocs.io/en/latest/parameter.html">http://xgboost.readthedocs.io/en/latest/parameter.html</a></p>
</td></tr>
<tr><td><code id="train_xgb_+3A_...">...</code></td>
<td>
<p>Other parameters</p>
</td></tr>
</table>

<hr>
<h2 id='training_model'>Training model</h2><span id='topic+training_model'></span>

<h3>Description</h3>

<p><code>training_model</code> Model builder
</p>


<h3>Usage</h3>

<pre><code class='language-R'>training_model(
  model_name = "mymodel",
  dat,
  dat_test = NULL,
  target = NULL,
  occur_time = NULL,
  obs_id = NULL,
  x_list = NULL,
  ex_cols = NULL,
  pos_flag = NULL,
  prop = 0.7,
  split_type = if (!is.null(occur_time)) "OOT" else "Random",
  preproc = TRUE,
  low_var = 0.99,
  missing_rate = 0.98,
  merge_cat = 30,
  remove_dup = TRUE,
  outlier_proc = TRUE,
  missing_proc = "median",
  default_miss = list(-1, "missing"),
  miss_values = NULL,
  one_hot = FALSE,
  trans_log = FALSE,
  feature_filter = list(filter = c("IV", "PSI", "COR", "XGB"), iv_cp = 0.02, psi_cp =
    0.1, xgb_cp = 0, cv_folds = 1, hopper = FALSE),
  algorithm = list("LR", "XGB", "GBM", "RF"),
  LR.params = lr_params(),
  XGB.params = xgb_params(),
  GBM.params = gbm_params(),
  RF.params = rf_params(),
  breaks_list = NULL,
  parallel = FALSE,
  cores_num = NULL,
  save_pmml = FALSE,
  plot_show = FALSE,
  vars_plot = TRUE,
  model_path = tempdir(),
  seed = 46,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="training_model_+3A_model_name">model_name</code></td>
<td>
<p>A string, name of the project. Default is &quot;mymodel&quot;</p>
</td></tr>
<tr><td><code id="training_model_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="training_model_+3A_dat_test">dat_test</code></td>
<td>
<p>A data.frame of test data. Default is NULL.</p>
</td></tr>
<tr><td><code id="training_model_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="training_model_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of the variable that represents the time at which each observation takes place.Default is NULL.</p>
</td></tr>
<tr><td><code id="training_model_+3A_obs_id">obs_id</code></td>
<td>
<p>The name of ID of observations or key variable of data. Default is NULL.</p>
</td></tr>
<tr><td><code id="training_model_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables. Default is NULL.</p>
</td></tr>
<tr><td><code id="training_model_+3A_ex_cols">ex_cols</code></td>
<td>
<p>Names of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="training_model_+3A_pos_flag">pos_flag</code></td>
<td>
<p>The value of positive class of target variable, default: &quot;1&quot;.</p>
</td></tr>
<tr><td><code id="training_model_+3A_prop">prop</code></td>
<td>
<p>Percentage of train-data after the partition. Default: 0.7.</p>
</td></tr>
<tr><td><code id="training_model_+3A_split_type">split_type</code></td>
<td>
<p>Methods for partition. See details at :  <code><a href="#topic+train_test_split">train_test_split</a></code>.</p>
</td></tr>
<tr><td><code id="training_model_+3A_preproc">preproc</code></td>
<td>
<p>Logical. Preprocess data. Default is TRUE.</p>
</td></tr>
<tr><td><code id="training_model_+3A_low_var">low_var</code></td>
<td>
<p>Logical, delete low variance variables or not. Default is TRUE.</p>
</td></tr>
<tr><td><code id="training_model_+3A_missing_rate">missing_rate</code></td>
<td>
<p>The maximum percent of missing values for recoding values to missing and non_missing.</p>
</td></tr>
<tr><td><code id="training_model_+3A_merge_cat">merge_cat</code></td>
<td>
<p>merge categories of character variables that  is more than m.</p>
</td></tr>
<tr><td><code id="training_model_+3A_remove_dup">remove_dup</code></td>
<td>
<p>Logical, if TRUE, remove the duplicated observations.</p>
</td></tr>
<tr><td><code id="training_model_+3A_outlier_proc">outlier_proc</code></td>
<td>
<p>Logical, process outliers or not. Default is TRUE.</p>
</td></tr>
<tr><td><code id="training_model_+3A_missing_proc">missing_proc</code></td>
<td>
<p>If logical, process missing values or not. If &quot;median&quot;, then Nas imputation with k neighbors median. If &quot;avg_dist&quot;, the distance weighted average method is applied to determine the NAs imputation with k neighbors. If &quot;default&quot;, assigning the missing values to -1 or &quot;missing&quot;, otherwise ,processing the missing values according to the results of missing analysis.</p>
</td></tr>
<tr><td><code id="training_model_+3A_default_miss">default_miss</code></td>
<td>
<p>Default value of missing data imputation, Defualt is list(-1,'missing').</p>
</td></tr>
<tr><td><code id="training_model_+3A_miss_values">miss_values</code></td>
<td>
<p>Other extreme value might be used to represent missing values, e.g: -9999, -9998. These miss_values will be encoded to -1 or &quot;missing&quot;.</p>
</td></tr>
<tr><td><code id="training_model_+3A_one_hot">one_hot</code></td>
<td>
<p>Logical. If TRUE, one-hot_encoding  of category variables. Default is FASLE.</p>
</td></tr>
<tr><td><code id="training_model_+3A_trans_log">trans_log</code></td>
<td>
<p>Logical, Logarithmic transformation. Default is FALSE.</p>
</td></tr>
<tr><td><code id="training_model_+3A_feature_filter">feature_filter</code></td>
<td>
<p>Parameters for selecting important and stable features.See details at: <code><a href="#topic+feature_selector">feature_selector</a></code></p>
</td></tr>
<tr><td><code id="training_model_+3A_algorithm">algorithm</code></td>
<td>
<p>Algorithms for training a model. list(&quot;LR&quot;, &quot;XGB&quot;, &quot;GBDT&quot;, &quot;RF&quot;) are available.</p>
</td></tr>
<tr><td><code id="training_model_+3A_lr.params">LR.params</code></td>
<td>
<p>Parameters of logistic regression &amp; scorecard. See details at :  <code><a href="#topic+lr_params">lr_params</a></code>.</p>
</td></tr>
<tr><td><code id="training_model_+3A_xgb.params">XGB.params</code></td>
<td>
<p>Parameters of xgboost. See details at :  <code><a href="#topic+xgb_params">xgb_params</a></code>.</p>
</td></tr>
<tr><td><code id="training_model_+3A_gbm.params">GBM.params</code></td>
<td>
<p>Parameters of GBM. See details at :  <code><a href="#topic+gbm_params">gbm_params</a></code>.</p>
</td></tr>
<tr><td><code id="training_model_+3A_rf.params">RF.params</code></td>
<td>
<p>Parameters of Random Forest. See details at :  <code><a href="#topic+rf_params">rf_params</a></code>.</p>
</td></tr>
<tr><td><code id="training_model_+3A_breaks_list">breaks_list</code></td>
<td>
<p>A table containing a list of splitting points for each independent variable. Default is NULL.</p>
</td></tr>
<tr><td><code id="training_model_+3A_parallel">parallel</code></td>
<td>
<p>Default is FALSE.</p>
</td></tr>
<tr><td><code id="training_model_+3A_cores_num">cores_num</code></td>
<td>
<p>The number of CPU cores to use.</p>
</td></tr>
<tr><td><code id="training_model_+3A_save_pmml">save_pmml</code></td>
<td>
<p>Logical, save model in PMML format. Default is TRUE.</p>
</td></tr>
<tr><td><code id="training_model_+3A_plot_show">plot_show</code></td>
<td>
<p>Logical, show model performance in current graphic device. Default is FALSE.</p>
</td></tr>
<tr><td><code id="training_model_+3A_vars_plot">vars_plot</code></td>
<td>
<p>Logical, if TRUE, plot distribution ,correlation or partial dependence of model input variables . Default is TRUE.</p>
</td></tr>
<tr><td><code id="training_model_+3A_model_path">model_path</code></td>
<td>
<p>The path for periodically saved data file. Default is <code>tempdir()</code>.</p>
</td></tr>
<tr><td><code id="training_model_+3A_seed">seed</code></td>
<td>
<p>Random number seed. Default is 46.</p>
</td></tr>
<tr><td><code id="training_model_+3A_...">...</code></td>
<td>
<p>Other parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing Model Objects.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+train_test_split">train_test_split</a></code>,<code><a href="#topic+data_cleansing">data_cleansing</a></code>, <code><a href="#topic+feature_selector">feature_selector</a></code>,   <code><a href="#topic+lr_params">lr_params</a></code>, <code><a href="#topic+xgb_params">xgb_params</a></code>, <code><a href="#topic+gbm_params">gbm_params</a></code>, <code><a href="#topic+rf_params">rf_params</a></code>,<code><a href="#topic+fast_high_cor_filter">fast_high_cor_filter</a></code>,<code><a href="#topic+get_breaks_all">get_breaks_all</a></code>,<code><a href="#topic+lasso_filter">lasso_filter</a></code>, <code><a href="#topic+woe_trans_all">woe_trans_all</a></code>, <code><a href="#topic+get_logistic_coef">get_logistic_coef</a></code>, <code><a href="#topic+score_transfer">score_transfer</a></code>,<code><a href="#topic+get_score_card">get_score_card</a></code>, <code><a href="#topic+model_key_index">model_key_index</a></code>,<code><a href="#topic+ks_psi_plot">ks_psi_plot</a></code>,<code><a href="#topic+ks_table_plot">ks_table_plot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sub = cv_split(UCICreditCard, k = 30)[[1]]
dat = UCICreditCard[sub,]
x_list = c("LIMIT_BAL")
B_model = training_model(dat = dat,
                         model_name = "UCICreditCard",
                         target = "default.payment.next.month",
							x_list = x_list,
                         occur_time =NULL,
                         obs_id =NULL,
							dat_test = NULL,
                         preproc = FALSE,
                         outlier_proc = FALSE,
                         missing_proc = FALSE,
                         feature_filter = NULL,
                         algorithm = list("LR"),
                         LR.params = lr_params(lasso = FALSE,
                                               step_wise = FALSE,
                                                 score_card = FALSE),
                         breaks_list = NULL,
                         parallel = FALSE,
                         cores_num = NULL,
                         save_pmml = FALSE,
                         plot_show = FALSE,
                         vars_plot = FALSE,
                         model_path = tempdir(),
                         seed = 46)

</code></pre>

<hr>
<h2 id='UCICreditCard'>UCI Credit Card data</h2><span id='topic+UCICreditCard'></span>

<h3>Description</h3>

<p>This research aimed at the case of customers's default payments in Taiwan and compares the predictive accuracy of probability of default among six data mining methods.
This research employed a binary variable, default payment (Yes = 1, No = 0), as the response variable. This study reviewed the literature and used the following 24 variables as explanatory variables
</p>


<h3>Format</h3>

<p>A data frame with 30000 rows and 26 variables.
</p>


<h3>Details</h3>


<ul>
<li><p> ID: Customer id
</p>
</li>
<li><p> apply_date: This is a fake occur time.
</p>
</li>
<li><p> LIMIT_BAL: Amount of the given credit (NT dollar): it includes both the individual consumer credit and his/her family (supplementary) credit.
</p>
</li>
<li><p> SEX:  Gender (male; female).
</p>
</li>
<li><p> EDUCATION: Education (1 = graduate school; 2 = university; 3 = high school; 4 = others).
</p>
</li>
<li><p> MARRIAGE: Marital status (1 = married; 2 = single; 3 = others).
</p>
</li>
<li><p> AGE: Age (year)
History of past payment. We tracked the past monthly payment records (from April to September, 2005) as follows:
</p>
</li>
<li><p> PAY_0: the repayment status in September
</p>
</li>
<li><p> PAY_2: the repayment status in August
</p>
</li>
<li><p> PAY_3: ...
</p>
</li>
<li><p> PAY_4: ...
</p>
</li>
<li><p> PAY_5: ...
</p>
</li>
<li><p> PAY_6: the repayment status in April
The measurement scale for the repayment status is: -1 = pay duly; 1 = payment delay for one month; 2 = payment delay for two months;...;8 = payment delay for eight months; 9 = payment delay for nine months and above.
Amount of bill statement (NT dollar)
</p>
</li>
<li><p> BILL_AMT1: amount of bill statement in September
</p>
</li>
<li><p> BILL_AMT2: mount of bill statement in August
</p>
</li>
<li><p> BILL_AMT3: ...
</p>
</li>
<li><p> BILL_AMT4: ...
</p>
</li>
<li><p> BILL_AMT5: ...
</p>
</li>
<li><p> BILL_AMT6: amount of bill statement in April
Amount of previous payment (NT dollar)
</p>
</li>
<li><p> PAY_AMT1: amount paid in September
</p>
</li>
<li><p> PAY_AMT2: amount paid in August
</p>
</li>
<li><p> PAY_AMT3: ....
</p>
</li>
<li><p> PAY_AMT4: ...
</p>
</li>
<li><p> PAY_AMT5: ...
</p>
</li>
<li><p> PAY_AMT6: amount paid in April
</p>
</li>
<li><p> default.payment.next.month: default payment (Yes = 1, No = 0), as the response variable
</p>
</li></ul>



<h3>Source</h3>

<p><a href="http://archive.ics.uci.edu/ml/datasets/default+of+credit+card+clients">http://archive.ics.uci.edu/ml/datasets/default+of+credit+card+clients</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+lendingclub">lendingclub</a></code>
</p>

<hr>
<h2 id='var_group_proc'>Process group numeric variables</h2><span id='topic+var_group_proc'></span>

<h3>Description</h3>

<p>This function is used for grouped numeric data processing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>var_group_proc(dat, ID = NULL, group = NULL, num_var = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="var_group_proc_+3A_dat">dat</code></td>
<td>
<p>A data.frame contained only predict variables.</p>
</td></tr>
<tr><td><code id="var_group_proc_+3A_id">ID</code></td>
<td>
<p>The name of ID of observations or key variable of data. Default is NULL.</p>
</td></tr>
<tr><td><code id="var_group_proc_+3A_group">group</code></td>
<td>
<p>The group of behavioral or status variables.</p>
</td></tr>
<tr><td><code id="var_group_proc_+3A_num_var">num_var</code></td>
<td>
<p>The name of numeric variable to process.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>dat = data.frame(id = c(1,1,1,2,2,3,3,3,4,4,4,4,4,5,5,6,7,7,
                            8,8,8,9,9,9,10,10,11,11,11,11,11,11),
                     terms = c('a','b','c','a','c','d','d','a',
                               'b','c','a','c','d','a','c',
                                  'd','a','e','f','b','c','f','b',
                               'c','h','h','i','c','d','g','k','k'),
                     time = c(8,3,1,9,6,1,4,9,1,3,4,8,2,7,1,
                              3,4,1,8,7,2,5,7,8,8,2,1,5,7,2,7,3))

time_series_proc(dat = dat, ID = 'id', group = 'terms',time = 'time')
</code></pre>

<hr>
<h2 id='variable_process'>variable_process</h2><span id='topic+variable_process'></span>

<h3>Description</h3>

<p>This function is not intended to be used by end user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>variable_process(add)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="variable_process_+3A_add">add</code></td>
<td>
<p>A data.frame</p>
</td></tr>
</table>

<hr>
<h2 id='woe_trans_all'>WOE Transformation</h2><span id='topic+woe_trans_all'></span><span id='topic+woe_trans'></span>

<h3>Description</h3>

<p><code>woe_trans</code> is for transforming data to woe.
The <code>woe_trans_all</code> function is a simpler wrapper for <code>woe_trans</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>woe_trans_all(
  dat,
  x_list = NULL,
  ex_cols = NULL,
  bins_table = NULL,
  target = NULL,
  breaks_list = NULL,
  note = FALSE,
  save_data = FALSE,
  parallel = FALSE,
  woe_name = FALSE,
  file_name = NULL,
  dir_path = tempdir(),
  ...
)

woe_trans(
  dat,
  x,
  bins_table = NULL,
  target = NULL,
  breaks_list = NULL,
  woe_name = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="woe_trans_all_+3A_dat">dat</code></td>
<td>
<p>A data.frame with independent variables.</p>
</td></tr>
<tr><td><code id="woe_trans_all_+3A_x_list">x_list</code></td>
<td>
<p>A list of x variables.</p>
</td></tr>
<tr><td><code id="woe_trans_all_+3A_ex_cols">ex_cols</code></td>
<td>
<p>Names of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="woe_trans_all_+3A_bins_table">bins_table</code></td>
<td>
<p>A table contians woe of each bin of variables, it is generated by code<a href="#topic+get_bins_table_all">get_bins_table_all</a>,code<a href="#topic+get_bins_table">get_bins_table</a></p>
</td></tr>
<tr><td><code id="woe_trans_all_+3A_target">target</code></td>
<td>
<p>The name of target variable. Default is NULL.</p>
</td></tr>
<tr><td><code id="woe_trans_all_+3A_breaks_list">breaks_list</code></td>
<td>
<p>A list contains breaks of variables. it is generated by code<a href="#topic+get_breaks_all">get_breaks_all</a>,code<a href="#topic+get_breaks">get_breaks</a></p>
</td></tr>
<tr><td><code id="woe_trans_all_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="woe_trans_all_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results in locally specified folder. Default is TRUE</p>
</td></tr>
<tr><td><code id="woe_trans_all_+3A_parallel">parallel</code></td>
<td>
<p>Logical, parallel computing. Default is FALSE.</p>
</td></tr>
<tr><td><code id="woe_trans_all_+3A_woe_name">woe_name</code></td>
<td>
<p>Logical. Add &quot;_woe&quot; at the end of the variable name.</p>
</td></tr>
<tr><td><code id="woe_trans_all_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved woe file. Default is &quot;dat_woe&quot;.</p>
</td></tr>
<tr><td><code id="woe_trans_all_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved woe file Default is &quot;./data&quot;</p>
</td></tr>
<tr><td><code id="woe_trans_all_+3A_...">...</code></td>
<td>
<p>Additional parameters.</p>
</td></tr>
<tr><td><code id="woe_trans_all_+3A_x">x</code></td>
<td>
<p>The name of an independent variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of breaks for each variables.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_tree_breaks">get_tree_breaks</a></code>, <code><a href="#topic+cut_equal">cut_equal</a></code>, <code><a href="#topic+select_best_class">select_best_class</a></code>, <code><a href="#topic+select_best_breaks">select_best_breaks</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sub = cv_split(UCICreditCard, k = 30)[[1]]
dat = UCICreditCard[sub,]
dat = re_name(dat, "default.payment.next.month", "target")
dat = data_cleansing(dat, target = "target", obs_id = "ID", occur_time = "apply_date",
miss_values =  list("", -1))

train_test = train_test_split(dat, split_type = "OOT", prop = 0.7,
                                occur_time = "apply_date")
dat_train = train_test$train
dat_test = train_test$test
#get breaks of all predictive variables
x_list = c("PAY_0", "LIMIT_BAL", "PAY_AMT5", "EDUCATION", "PAY_3", "PAY_2")
breaks_list = get_breaks_all(dat = dat_train, target = "target",
                              x_list = x_list, occur_time = "apply_date", ex_cols = "ID",
save_data = FALSE, note  = FALSE)
#woe transform
train_woe = woe_trans_all(dat = dat_train,
                          target = "target",
                          breaks_list = breaks_list,
                          woe_name = FALSE)
test_woe = woe_trans_all(dat = dat_test,
                       target = "target",
                         breaks_list = breaks_list,
                         note = FALSE)

</code></pre>

<hr>
<h2 id='xgb_data'>XGboost data</h2><span id='topic+xgb_data'></span>

<h3>Description</h3>

<p><code>xgb_data</code> is for prepare data using in <code><a href="#topic+training_model">training_model</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xgb_data(
  dat_train,
  target,
  dat_test = NULL,
  x_list = NULL,
  prop = 0.7,
  occur_time = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xgb_data_+3A_dat_train">dat_train</code></td>
<td>
<p>data.frame of train data. Default is NULL.</p>
</td></tr>
<tr><td><code id="xgb_data_+3A_target">target</code></td>
<td>
<p>name of target variable.</p>
</td></tr>
<tr><td><code id="xgb_data_+3A_dat_test">dat_test</code></td>
<td>
<p>data.frame of test data. Default is NULL.</p>
</td></tr>
<tr><td><code id="xgb_data_+3A_x_list">x_list</code></td>
<td>
<p>names of independent variables of raw data. Default is NULL.</p>
</td></tr>
<tr><td><code id="xgb_data_+3A_prop">prop</code></td>
<td>
<p>Percentage of train-data after the partition. Default: 0.7.</p>
</td></tr>
<tr><td><code id="xgb_data_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of the variable that represents the time at which each observation takes place.Default is NULL.</p>
</td></tr>
</table>

<hr>
<h2 id='xgb_filter'>Select Features using XGB</h2><span id='topic+xgb_filter'></span>

<h3>Description</h3>

<p><code>xgb_filter</code> is for selecting important features using xgboost.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xgb_filter(
  dat_train,
  dat_test = NULL,
  target = NULL,
  pos_flag = NULL,
  x_list = NULL,
  occur_time = NULL,
  ex_cols = NULL,
  xgb_params = list(nrounds = 100, max_depth = 6, eta = 0.1, min_child_weight = 1,
    subsample = 1, colsample_bytree = 1, gamma = 0, scale_pos_weight = 1,
    early_stopping_rounds = 10, objective = "binary:logistic"),
  f_eval = "auc",
  cv_folds = 1,
  cp = NULL,
  seed = 46,
  vars_name = TRUE,
  note = TRUE,
  save_data = FALSE,
  file_name = NULL,
  dir_path = tempdir(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xgb_filter_+3A_dat_train">dat_train</code></td>
<td>
<p>A data.frame with independent variables and target variable.</p>
</td></tr>
<tr><td><code id="xgb_filter_+3A_dat_test">dat_test</code></td>
<td>
<p>A data.frame of test data. Default is NULL.</p>
</td></tr>
<tr><td><code id="xgb_filter_+3A_target">target</code></td>
<td>
<p>The name of target variable.</p>
</td></tr>
<tr><td><code id="xgb_filter_+3A_pos_flag">pos_flag</code></td>
<td>
<p>The value of positive class of target variable, default: &quot;1&quot;.</p>
</td></tr>
<tr><td><code id="xgb_filter_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables.</p>
</td></tr>
<tr><td><code id="xgb_filter_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of the variable that represents the time at which each observation takes place.</p>
</td></tr>
<tr><td><code id="xgb_filter_+3A_ex_cols">ex_cols</code></td>
<td>
<p>A list of excluded variables. Regular expressions can also be used to match variable names. Default is NULL.</p>
</td></tr>
<tr><td><code id="xgb_filter_+3A_xgb_params">xgb_params</code></td>
<td>
<p>Parameters of xgboost.The complete list of parameters is available at: <a href="http://xgboost.readthedocs.io/en/latest/parameter.html">http://xgboost.readthedocs.io/en/latest/parameter.html</a>.</p>
</td></tr>
<tr><td><code id="xgb_filter_+3A_f_eval">f_eval</code></td>
<td>
<p>Custimized evaluation function,&quot;ks&quot; &amp; &quot;auc&quot; are available.</p>
</td></tr>
<tr><td><code id="xgb_filter_+3A_cv_folds">cv_folds</code></td>
<td>
<p>Number of cross-validations. Default: 5.</p>
</td></tr>
<tr><td><code id="xgb_filter_+3A_cp">cp</code></td>
<td>
<p>Threshold of XGB feature's Gain. Default is 1/number of independent variables.</p>
</td></tr>
<tr><td><code id="xgb_filter_+3A_seed">seed</code></td>
<td>
<p>Random number seed. Default is 46.</p>
</td></tr>
<tr><td><code id="xgb_filter_+3A_vars_name">vars_name</code></td>
<td>
<p>Logical, output a list of filtered variables or table with detailed IV and PSI value of each variable. Default is FALSE.</p>
</td></tr>
<tr><td><code id="xgb_filter_+3A_note">note</code></td>
<td>
<p>Logical, outputs info. Default is TRUE.</p>
</td></tr>
<tr><td><code id="xgb_filter_+3A_save_data">save_data</code></td>
<td>
<p>Logical, save results results in locally specified folder. Default is FALSE.</p>
</td></tr>
<tr><td><code id="xgb_filter_+3A_file_name">file_name</code></td>
<td>
<p>The name for periodically saved results files.  Default is &quot;Feature_importance_XGB&quot;.</p>
</td></tr>
<tr><td><code id="xgb_filter_+3A_dir_path">dir_path</code></td>
<td>
<p>The path for periodically saved results files.  Default is &quot;./variable&quot;.</p>
</td></tr>
<tr><td><code id="xgb_filter_+3A_...">...</code></td>
<td>
<p>Other parameters to pass to xgb_params.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Selected variables.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+psi_iv_filter">psi_iv_filter</a></code>, <code><a href="#topic+gbm_filter">gbm_filter</a></code>, <code><a href="#topic+feature_selector">feature_selector</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat = UCICreditCard[1:1000,c(2,4,8:9,26)]
xgb_params = list(nrounds = 100, max_depth = 6, eta = 0.1,
                                       min_child_weight = 1, subsample = 1,
                                       colsample_bytree = 1, gamma = 0, scale_pos_weight = 1,
                                       early_stopping_rounds = 10,
                                       objective = "binary:logistic")
## Not run: 
xgb_features = xgb_filter(dat_train = dat, dat_test = NULL,
target = "default.payment.next.month", occur_time = "apply_date",f_eval = 'ks',
xgb_params = xgb_params,
cv_folds = 1, ex_cols = "ID$|date$|default.payment.next.month$", vars_name = FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='xgb_params'>XGboost Parameters</h2><span id='topic+xgb_params'></span><span id='topic+xgb_params_search'></span>

<h3>Description</h3>

<p><code>xgb_params</code> is the list of parameters to train a XGB model using in <code><a href="#topic+training_model">training_model</a></code>.
<code>xgb_params_search</code> is for searching the optimal parameters of xgboost,if any parameters of params in <code><a href="#topic+xgb_params">xgb_params</a></code> is more than one.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xgb_params(
  nrounds = 1000,
  params = list(max_depth = 6, eta = 0.01, gamma = 0, min_child_weight = 1, subsample =
    1, colsample_bytree = 1, scale_pos_weight = 1),
  early_stopping_rounds = 100,
  method = "random_search",
  iters = 10,
  f_eval = "auc",
  nfold = 1,
  nthread = 2,
  ...
)

xgb_params_search(
  dat_train,
  target,
  dat_test = NULL,
  x_list = NULL,
  prop = 0.7,
  occur_time = NULL,
  method = "random_search",
  iters = 10,
  nrounds = 100,
  early_stopping_rounds = 10,
  params = list(max_depth = 6, eta = 0.01, gamma = 0, min_child_weight = 1, subsample =
    1, colsample_bytree = 1, scale_pos_weight = 1),
  f_eval = "auc",
  nfold = 1,
  nthread = 2,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xgb_params_+3A_nrounds">nrounds</code></td>
<td>
<p>Max number of boosting iterations.</p>
</td></tr>
<tr><td><code id="xgb_params_+3A_params">params</code></td>
<td>
<p>List of contains parameters of xgboost. The complete list of parameters is available at: <a href="http://xgboost.readthedocs.io/en/latest/parameter.html">http://xgboost.readthedocs.io/en/latest/parameter.html</a></p>
</td></tr>
<tr><td><code id="xgb_params_+3A_early_stopping_rounds">early_stopping_rounds</code></td>
<td>
<p>If NULL, the early stopping function is not triggered. If set to an integer k, training with a validation set will stop if the performance doesn't improve for k rounds.</p>
</td></tr>
<tr><td><code id="xgb_params_+3A_method">method</code></td>
<td>
<p>Method of searching optimal parameters.&quot;random_search&quot;,&quot;grid_search&quot;,&quot;local_search&quot; are available.</p>
</td></tr>
<tr><td><code id="xgb_params_+3A_iters">iters</code></td>
<td>
<p>Number of iterations of &quot;random_search&quot; optimal parameters.</p>
</td></tr>
<tr><td><code id="xgb_params_+3A_f_eval">f_eval</code></td>
<td>
<p>Custimized evaluation function,&quot;ks&quot; &amp; &quot;auc&quot; are available.</p>
</td></tr>
<tr><td><code id="xgb_params_+3A_nfold">nfold</code></td>
<td>
<p>Number of the cross validation of xgboost</p>
</td></tr>
<tr><td><code id="xgb_params_+3A_nthread">nthread</code></td>
<td>
<p>Number of threads</p>
</td></tr>
<tr><td><code id="xgb_params_+3A_...">...</code></td>
<td>
<p>Other parameters</p>
</td></tr>
<tr><td><code id="xgb_params_+3A_dat_train">dat_train</code></td>
<td>
<p>A data.frame of train data. Default is NULL.</p>
</td></tr>
<tr><td><code id="xgb_params_+3A_target">target</code></td>
<td>
<p>Name of target variable.</p>
</td></tr>
<tr><td><code id="xgb_params_+3A_dat_test">dat_test</code></td>
<td>
<p>A data.frame of test data. Default is NULL.</p>
</td></tr>
<tr><td><code id="xgb_params_+3A_x_list">x_list</code></td>
<td>
<p>Names of independent variables. Default is NULL.</p>
</td></tr>
<tr><td><code id="xgb_params_+3A_prop">prop</code></td>
<td>
<p>Percentage of train-data after the partition. Default: 0.7.</p>
</td></tr>
<tr><td><code id="xgb_params_+3A_occur_time">occur_time</code></td>
<td>
<p>The name of the variable that represents the time at which each observation takes place.Default is NULL.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of parameters.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+training_model">training_model</a></code>, <code><a href="#topic+lr_params">lr_params</a></code>,<code><a href="#topic+gbm_params">gbm_params</a></code>, <code><a href="#topic+rf_params">rf_params</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
