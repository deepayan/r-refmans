<!DOCTYPE html><html lang="en"><head><title>Help for package ebvcube</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ebvcube}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ebvcube'><p>Working with netCDF for Essential Biodiversity Variables</p></a></li>
<li><a href='#EBV+20netCDF+20properties-class'><p>EBV netCDF properties class (S4)</p></a></li>
<li><a href='#ebv_add_data'><p>Add data to your EBV netCDF</p></a></li>
<li><a href='#ebv_analyse'><p>Get a simple explorative analysis of an EBV netCDF datacube</p></a></li>
<li><a href='#ebv_attribute'><p>Write a new attribute value to an EBV netCDF</p></a></li>
<li><a href='#ebv_create'><p>Create an EBV netCDF</p></a></li>
<li><a href='#ebv_create_taxonomy'><p>Create an EBV netCDF with taxonomy</p></a></li>
<li><a href='#ebv_datacubepaths'><p>Get datacubepaths of EBV netCDF</p></a></li>
<li><a href='#ebv_download'><p>Download an EBV netCDF file</p></a></li>
<li><a href='#ebv_map'><p>Map plot of an EBV netCDF</p></a></li>
<li><a href='#ebv_metadata'><p>Create the metadata file (json) for the EBV netCDF creation</p></a></li>
<li><a href='#ebv_properties'><p>Read properties of EBV netCDF</p></a></li>
<li><a href='#ebv_read'><p>Read data from an EBV netCDF</p></a></li>
<li><a href='#ebv_read_bb'><p>Read subset (bounding box) of one datacube of an EBV netCDF</p></a></li>
<li><a href='#ebv_read_shp'><p>Read subset (shapefile) of one datacube of an EBV netCDF</p></a></li>
<li><a href='#ebv_resample'><p>Change the resolution of the data of an EBV netCDF</p></a></li>
<li><a href='#ebv_trend'><p>Plot the trend of an EBV netCDF</p></a></li>
<li><a href='#ebv_write'><p>Write the extracted data on your disk as a GeoTiff</p></a></li>
<li><a href='#world_boundaries'><p>Simple outlines of world countries</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Working with netCDF for Essential Biodiversity Variables</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2025-03-05</td>
</tr>
<tr>
<td>Author:</td>
<td>Luise Quoss <a href="https://orcid.org/0000-0002-9910-1252"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Nestor Fernandez <a href="https://orcid.org/0000-0002-9645-8571"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Christian Langer <a href="https://orcid.org/0000-0003-1446-3527"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Jose Valdez <a href="https://orcid.org/0000-0003-2690-9952"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Henrique Miguel Pereira
    <a href="https://orcid.org/0000-0003-1043-1675"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Luise Quoss &lt;luise.quoss@idiv.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>The concept of Essential Biodiversity Variables (EBV, <a href="https://geobon.org/ebvs/what-are-ebvs/">https://geobon.org/ebvs/what-are-ebvs/</a>) 
    comes with a data structure based on the Network Common Data Form (netCDF). 
    The 'ebvcube' 'R' package provides functionality to easily create, access and 
    visualise this data. The EBV netCDFs can be downloaded from the EBV Data 
    Portal: Christian Langer/ iDiv (2020) <a href="https://portal.geobon.org/">https://portal.geobon.org/</a>. </td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/EBVCube/ebvcube">https://github.com/EBVCube/ebvcube</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/EBVcube/ebvcube/issues">https://github.com/EBVcube/ebvcube/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, curl, DelayedArray, ggplot2, HDF5Array, httr,
jsonlite, memuse, methods, ncdf4, ncmeta, reshape2, rhdf5,
stringr, terra, tidyterra, withr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, lintr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>GDAL binaries</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.2.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-03-05 13:17:38 UTC; lq39quba</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-06 00:00:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='ebvcube'>Working with netCDF for Essential Biodiversity Variables</h2><span id='topic+ebvcube-package'></span><span id='topic+ebvcube'></span>

<h3>Description</h3>

<p>This package can be used to easily access the data of the EBV netCDFs which
can be downloaded from the <a href="https://portal.geobon.org">EBV Data Portal</a>.
It also provides some basic visualization of the data.  Advanced users can
build their own netCDFs in the EBVCube format using this package.
</p>


<h3>Details</h3>

<p>This package contains three main usecases: accessing the data, visualising it
and creating your own data in the EBVCube netCDF format. See the
<a href="https://github.com/EBVcube/EBVCube-format/">EBVCube format repository</a>
for a detailed description of the
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Luise Quoss <a href="mailto:luise.quoss@idiv.de">luise.quoss@idiv.de</a> (<a href="https://orcid.org/0000-0002-9910-1252">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Nestor Fernandez <a href="mailto:nestor.fernandez@idiv.de">nestor.fernandez@idiv.de</a> (<a href="https://orcid.org/0000-0002-9645-8571">ORCID</a>)
</p>
</li>
<li><p> Christian Langer <a href="mailto:christian.langer@idiv.de">christian.langer@idiv.de</a> (<a href="https://orcid.org/0000-0003-1446-3527">ORCID</a>)
</p>
</li>
<li><p> Jose Valdez <a href="mailto:jose.valdez@idiv.de">jose.valdez@idiv.de</a> (<a href="https://orcid.org/0000-0003-2690-9952">ORCID</a>)
</p>
</li>
<li><p> Henrique Miguel Pereira <a href="mailto:henrique.pereira@idiv.de">henrique.pereira@idiv.de</a> (<a href="https://orcid.org/0000-0003-1043-1675">ORCID</a>)
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/EBVCube/ebvcube">https://github.com/EBVCube/ebvcube</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/EBVcube/ebvcube/issues">https://github.com/EBVcube/ebvcube/issues</a>
</p>
</li></ul>


<hr>
<h2 id='EBV+20netCDF+20properties-class'>EBV netCDF properties class (S4)</h2><span id='topic+EBV+20netCDF+20properties-class'></span>

<h3>Description</h3>

<p>EBV netCDF properties class (S4)
</p>


<h3>Value</h3>

<p>S4 class containing the EBV netCDF properties
</p>


<h3>Slots</h3>


<dl>
<dt><code>general</code></dt><dd><p>Named list. Elements: title, description, doi, ebv_class,
ebv_name, ebv_domain, references, source, project_name, project_url,
creator_name, creator_institution, creator_email, creator_url,
contributor_name, publisher_name, publisher_institution, publisher_email,
publisher_url, comment, keywords, id, history, licence, conventions,
naming_authority, date_created, date_issued, entity_names, entity_type,
entity_scope, entity_classification_name, entity_classification_url,
taxonomy, taxonomy_lsid, date_modified, date_metadata_modified</p>
</dd>
<dt><code>spatial</code></dt><dd><p>Named list. Elements: wkt2, epsg, extent, resolution,
crs_units, dimensions, scope, description</p>
</dd>
<dt><code>temporal</code></dt><dd><p>Named list. Elements: resolution, units, timesteps, dates,
time_coverage_start, time_coverage_end</p>
</dd>
<dt><code>metric</code></dt><dd><p>Named list. Elements: name, description, units</p>
</dd>
<dt><code>scenario</code></dt><dd><p>Named list. Elements: name, description</p>
</dd>
<dt><code>ebv_cube</code></dt><dd><p>Named list. Elements: units, coverage_content_type, fillvalue,
type</p>
</dd>
</dl>


<h3>Note</h3>

<p>If the properties class holds e.g. no scenario information this is
indicated with an element called status in the list. <br /> If you read an EBV
netCDF based on an older standard, the properties will differ from the
definition above. If the dataset does not encompass taxonomic info, the
'taxonomy' is NA. Besides, even if a dataset encompasses the taxonomy
information, the 'taxonomy_lsid' can be NA.
</p>

<hr>
<h2 id='ebv_add_data'>Add data to your EBV netCDF</h2><span id='topic+ebv_add_data'></span>

<h3>Description</h3>

<p>Add data to your EBV netCDF from GeoTiffs or in-memory arrays.
First, create a new EBV netCDF using <code><a href="#topic+ebv_create">ebv_create()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebv_add_data(
  filepath_nc,
  datacubepath = NULL,
  entity = NULL,
  timestep = 1,
  data,
  band = 1,
  scenario = NULL,
  metric = NULL,
  ignore_RAM = FALSE,
  raw = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebv_add_data_+3A_filepath_nc">filepath_nc</code></td>
<td>
<p>Character. Path to the self-created netCDF file.</p>
</td></tr>
<tr><td><code id="ebv_add_data_+3A_datacubepath">datacubepath</code></td>
<td>
<p>Character. Optional. Default: NULL. Path to the datacube
(use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>). Alternatively, you can use the
scenario and metric argument to define which cube you want to access.</p>
</td></tr>
<tr><td><code id="ebv_add_data_+3A_entity">entity</code></td>
<td>
<p>Character or Integer. Default is NULL. If the structure is 3D,
the entity argument is set to NULL. Else, a character string or single
integer value must indicate the entity of the 4D structure of the EBV
netCDFs. The character string can be obtained using
<code><a href="#topic+ebv_properties">ebv_properties()</a></code>. Choose the entity you are interested in from
the slot general and the list item entity_names.</p>
</td></tr>
<tr><td><code id="ebv_add_data_+3A_timestep">timestep</code></td>
<td>
<p>Integer or character. Default: 1. Define to which timestep or
timesteps the data should be added. If several timesteps are given they
have to be in a continuous and in order. Meaning c(4,5,6) is right but
c(2,5,6) is wrong. Alternatively you can provide a date or list of dates in
ISO format, such as '2015-01-01' (also in order).</p>
</td></tr>
<tr><td><code id="ebv_add_data_+3A_data">data</code></td>
<td>
<p>Character or matrix or array. If character: Path to the GeoTiff
file containing the data. Ending needs to be *.tif. If matrix or array:
in-memory object holding the data.</p>
</td></tr>
<tr><td><code id="ebv_add_data_+3A_band">band</code></td>
<td>
<p>Integer. Default: 1. Define which band(s) to read from GeoTiff.
Can be several. Don't have to be in order as the timesteps definition
requires.</p>
</td></tr>
<tr><td><code id="ebv_add_data_+3A_scenario">scenario</code></td>
<td>
<p>Character or integer. Optional. Default: NULL. Define the
scenario you want to access. If the EBV netCDF has no scenarios, leave the
default value (NULL). You can use an integer value defining the scenario or
give the name of the scenario as a character string. To check the available
scenarios and their name or number (integer), use
<code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_add_data_+3A_metric">metric</code></td>
<td>
<p>Character or integer. Optional. Define the metric you want to
access. You can use an integer value defining the metric or give the name
of the scenario as a character string. To check the available metrics and
their name or number (integer), use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_add_data_+3A_ignore_ram">ignore_RAM</code></td>
<td>
<p>Logical. Default: FALSE. Checks if there is enough space in
your memory to read the data. Can be switched off (set to TRUE). Ignore
this argument when you give an array or a matrix for 'data' (it will do
nothing).</p>
</td></tr>
<tr><td><code id="ebv_add_data_+3A_raw">raw</code></td>
<td>
<p>Logical. Default: FALSE. If you set it to TRUE the offset and
scale value in the GeoTiff are ignored. Only relevant if you give a path to
a GeoTiff.</p>
</td></tr>
<tr><td><code id="ebv_add_data_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Adds data to the EBV netCDF. Check your results using
<code><a href="#topic+ebv_read">ebv_read()</a></code> and/or <code><a href="#topic+ebv_analyse">ebv_analyse()</a></code> and/or
<code><a href="#topic+ebv_map">ebv_map()</a></code> and/or <code><a href="#topic+ebv_trend">ebv_trend()</a></code>.
</p>


<h3>Note</h3>

<p>If the data exceeds your memory the RAM check will throw an error. No
block-processing or other method implemented so far. Move to a machine with
more capacities if needed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#set path to EBV netCDF
file &lt;- system.file(file.path("extdata","test.nc"), package="ebvcube")
#get all datacubepaths of EBV netCDF
datacubepaths &lt;- ebv_datacubepaths(file, verbose=FALSE)
#set path to GeoTiff with data
tif &lt;- system.file(file.path("extdata","entity1.tif"), package="ebvcube")

# add data to the timestep 1, 2 and 3 using the first three bands of the GeoTiff
## Not run: 
#use datacubepath argument and define timestep by integer
ebv_add_data(filepath_nc = file, datacubepath = datacubepaths[1,1],
             entity = 1, timestep = 1:3, data = tif, band = 1:3)
#use metric argument and define timestep by ISO-format
ebv_add_data(filepath_nc = file, entity = 1,
             timestep = paste0(as.character(seq(1900,1920,10)), '-01-01'),
             metric = 1, data = tif, band = 1:3, verbose = FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='ebv_analyse'>Get a simple explorative analysis of an EBV netCDF datacube</h2><span id='topic+ebv_analyse'></span>

<h3>Description</h3>

<p>Get basic measurements of the data, including min, max, mean,
sd, n, #NAs, q25, q50, q75 (no mean for categorical data).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebv_analyse(
  filepath,
  datacubepath = NULL,
  entity = NULL,
  timestep = 1,
  subset = NULL,
  touches = TRUE,
  epsg = 4326,
  scenario = NULL,
  metric = NULL,
  numerical = TRUE,
  na_rm = TRUE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebv_analyse_+3A_filepath">filepath</code></td>
<td>
<p>Character. Path to the netCDF file.</p>
</td></tr>
<tr><td><code id="ebv_analyse_+3A_datacubepath">datacubepath</code></td>
<td>
<p>Character. Optional. Default: NULL. Path to the datacube
(use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>). Alternatively, you can use the
scenario and metric argument to define which cube you want to access.</p>
</td></tr>
<tr><td><code id="ebv_analyse_+3A_entity">entity</code></td>
<td>
<p>Character or Integer. Default is NULL. If the structure is 3D,
the entity argument is set to NULL. Else, a character string or single
integer value must indicate the entity of the 4D structure of the EBV
netCDFs.</p>
</td></tr>
<tr><td><code id="ebv_analyse_+3A_timestep">timestep</code></td>
<td>
<p>Integer or character. Select one or several timestep(s).
Either provide an integer value or list of values that refer(s) to the
index of the timestep(s) (minimum value: 1) or provide a date or list of
dates in ISO format, such as '2015-01-01'.</p>
</td></tr>
<tr><td><code id="ebv_analyse_+3A_subset">subset</code></td>
<td>
<p>Optional if you want measurements on a smaller subset. Possible
via the path to a shapefile (character) or the indication of a bounding box
(vector of four numeric values) defining the subset. Else the whole area is
analysed.</p>
</td></tr>
<tr><td><code id="ebv_analyse_+3A_touches">touches</code></td>
<td>
<p>Logical. Optional. Default: TRUE. Only relevant if the subset
is indicated by a shapefile. See <code><a href="#topic+ebv_read_shp">ebv_read_shp()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_analyse_+3A_epsg">epsg</code></td>
<td>
<p>Numeric. Optional. Only relevant if the subset is indicated by a
bounding box and the coordinate reference system differs from WGS84. See
<code><a href="#topic+ebv_read_bb">ebv_read_bb()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_analyse_+3A_scenario">scenario</code></td>
<td>
<p>Character or integer. Optional. Default: NULL. Define the
scenario you want to access. If the EBV netCDF has no scenarios, leave the
default value (NULL). You can use an integer value defining the scenario or
give the name of the scenario as a character string. To check the available
scenarios and their name or number (integer), use
<code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_analyse_+3A_metric">metric</code></td>
<td>
<p>Character or integer. Optional. Define the metric you want to
access. You can use an integer value defining the metric or give the name
of the scenario as a character string. To check the available metrics and
their name or number (integer), use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_analyse_+3A_numerical">numerical</code></td>
<td>
<p>Logical. Default: TRUE. Change to FALSE if the data covered
by the netCDF contains categorical data.</p>
</td></tr>
<tr><td><code id="ebv_analyse_+3A_na_rm">na_rm</code></td>
<td>
<p>Logical. Default: TRUE. NA values are removed in the analysis.
Change to FALSE to include NAs.</p>
</td></tr>
<tr><td><code id="ebv_analyse_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a named list containing the measurements.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ebv_read_bb">ebv_read_bb()</a></code> and <code><a href="#topic+ebv_read_shp">ebv_read_shp()</a></code> for the usage
of subsets.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#set path to EBV netCDF
file &lt;- system.file(file.path("extdata","martins_comcom_subset.nc"), package="ebvcube")
#get all datacubepaths of EBV netCDF
datacubes &lt;- ebv_datacubepaths(file, verbose=FALSE)
#set path to shp file
shp_path &lt;- system.file(file.path("extdata","cameroon.shp"), package="ebvcube")


#get measurements for full extent and the first three timesteps
data_global &lt;- ebv_analyse(filepath = file, datacubepath = datacubes[1,1],
                           entity = 1, timestep = 1:3, verbose = FALSE)

#get measurements for subset of Africa only (using bounding box) and one timestep
data_1910 &lt;- ebv_analyse(filepath = file, datacubepath = datacubes[1,1],
                         entity = 1, timestep = "1900-01-01",
                         subset = c(-26, 64, 30, 38), verbose = FALSE)

#get measurements for cameroon only (using shp) and one timestep
data_1930 &lt;- ebv_analyse(filepath = file, entity = 1,
                         timestep = "1930-01-01",
                         subset = shp_path, verbose = FALSE,
                         metric = 'Absolute change in the number of species',)

</code></pre>

<hr>
<h2 id='ebv_attribute'>Write a new attribute value to an EBV netCDF</h2><span id='topic+ebv_attribute'></span>

<h3>Description</h3>

<p>Write a new attribute value to an EBV netCDF. Not all attributes
can be changed. Some are always created automatically, e.g. the attributes
belonging to the crs, time and var_entity datasets. In this case you have
to re-create the netCDF file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebv_attribute(
  filepath,
  attribute_name,
  value,
  levelpath = NULL,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebv_attribute_+3A_filepath">filepath</code></td>
<td>
<p>Character. Path to the netCDF file.</p>
</td></tr>
<tr><td><code id="ebv_attribute_+3A_attribute_name">attribute_name</code></td>
<td>
<p>Character. Name of the attribute that should be
changed.</p>
</td></tr>
<tr><td><code id="ebv_attribute_+3A_value">value</code></td>
<td>
<p>New value that should be assigned to the attribute.</p>
</td></tr>
<tr><td><code id="ebv_attribute_+3A_levelpath">levelpath</code></td>
<td>
<p>Character. Default: NULL. Indicates the location of the
attribute. The default means that the attribute is located at a global
level. If the attribute is located at the datacubelevel just add the
datacubepath, e.g. metric_1/ebv_cube. For the metric level the value may be 'metric_1' or
'scenario_1/metric_1'. This path depends on whether the netCDF hierarchy
has scenarios or not.</p>
</td></tr>
<tr><td><code id="ebv_attribute_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Adds the new value to the attribute. Check your results using
<code><a href="#topic+ebv_properties">ebv_properties()</a></code>.
</p>


<h3>Note</h3>

<p>You can change the ebv_class and the ebv_name. In this case you need to
change the ebv_class first. Don't forget to change the ebv_name accordingly!
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#set path to EBV netCDF file &lt;-
system.file(file.path("extdata","baisero_spepop_id5_20220405_v1_empty.nc"),
package="ebvcube")

## Not run: 
try({
#change the standard_name of the metric
attribute1 &lt;- 'standard_name'
value1 &lt;- 'habitat availability'
level1 &lt;- 'scenario_1/metric_1'
ebv_attribute(filepath = file, attribute_name = attribute1,
              value = value1, level = level1)

#change the units of the ebv_cube
attribute2 &lt;- 'units'
value2 &lt;- 'Land-use of 5,090 mammals calculated in sqkm'
level2 &lt;- 'scenario_1/metric_1/ebv_cube' #equal to the datacubepath
ebv_attribute(filepath = file, attribute_name = attribute2,
              value = value2, level = level2)

#change the name of the creator at the global level
attribute3 &lt;- 'creator_name'
value3 &lt;- 'Jane Doe'
ebv_attribute(filepath = file, attribute_name = attribute3,
              value = value3)
}, TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='ebv_create'>Create an EBV netCDF</h2><span id='topic+ebv_create'></span>

<h3>Description</h3>

<p>Create the core structure of the EBV netCDF based on the json
from the <a href="https://portal.geobon.org">EBV Data Portal</a>. Data will be
added afterwards using <code><a href="#topic+ebv_add_data">ebv_add_data()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebv_create(
  jsonpath,
  outputpath,
  entities,
  epsg = 4326,
  extent = c(-180, 180, -90, 90),
  resolution = c(1, 1),
  timesteps = NULL,
  fillvalue,
  prec = "double",
  sep = ",",
  force_4D = TRUE,
  overwrite = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebv_create_+3A_jsonpath">jsonpath</code></td>
<td>
<p>Character. Path to the json file downloaded from the EBV Data
Portal. Login to the page and click on 'Uploads' and 'New Upload' to start
the process.</p>
</td></tr>
<tr><td><code id="ebv_create_+3A_outputpath">outputpath</code></td>
<td>
<p>Character. Set path where the netCDF file should be
created.</p>
</td></tr>
<tr><td><code id="ebv_create_+3A_entities">entities</code></td>
<td>
<p>Character string or vector of character strings. In case of
single character string: Path to the csv table holding the entity names.
Default: comma-separated delimiter, else change the <code>sep</code> argument
accordingly. Should have only one column, each row is the name of one
entity. In case of vector of character strings: Vector holding the entity
names.</p>
</td></tr>
<tr><td><code id="ebv_create_+3A_epsg">epsg</code></td>
<td>
<p>Integer. Default: 4326 (WGS84). Defines the coordinate reference
system via the corresponding epsg code.</p>
</td></tr>
<tr><td><code id="ebv_create_+3A_extent">extent</code></td>
<td>
<p>Numeric. Default: c(-180,180,-90,90). Defines the extent of the
data: c(xmin, xmax, ymin, ymax).</p>
</td></tr>
<tr><td><code id="ebv_create_+3A_resolution">resolution</code></td>
<td>
<p>Numerical. Vector of two numerical values defining the
longitudinal and latitudinal resolution of the pixel: c(lon,lat).</p>
</td></tr>
<tr><td><code id="ebv_create_+3A_timesteps">timesteps</code></td>
<td>
<p>Character. Vector of the timesteps in the dataset. Default:
NULL - in this case the time will be calculated from the start-, endpoint
and temporal resolution given in the metadata file (json). Else, the dates
must be given in in ISO format 'YYYY-MM-DD' or shortened 'YYYY' in case of
yearly timesteps.</p>
</td></tr>
<tr><td><code id="ebv_create_+3A_fillvalue">fillvalue</code></td>
<td>
<p>Numeric. Value of the missing data (NoData value) in the
array. Has to be a single numeric value or NA.</p>
</td></tr>
<tr><td><code id="ebv_create_+3A_prec">prec</code></td>
<td>
<p>Character. Default: 'double'. Precision of the data set. Valid
options: 'short' 'integer' 'float' 'double' 'char' 'byte'.</p>
</td></tr>
<tr><td><code id="ebv_create_+3A_sep">sep</code></td>
<td>
<p>Character. Default: ','. If the delimiter of the csv specifying
the entity-names differs from the default, indicate here.</p>
</td></tr>
<tr><td><code id="ebv_create_+3A_force_4d">force_4D</code></td>
<td>
<p>Logical. Default is TRUE. If the argument is TRUE, there will
be 4D cubes (lon, lat, time, entity) per metric. If this argument is
changed to FALSE, there will be 3D cubes (lon, lat, time) per entity (per
metric). So the latter yields a higher amount of cubes and does not bundle
all information per metric. In the future the standard will be restricted
to the 4D version. Recommendation: go with the 4D cubes!</p>
</td></tr>
<tr><td><code id="ebv_create_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. Default: FALSE. Set to TRUE to overwrite the output
file defined by 'outputpath'.</p>
</td></tr>
<tr><td><code id="ebv_create_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Creates the netCDF file at the 'outputpath' location.
</p>


<h3>Note</h3>

<p>To check out the results take a look at your netCDF file with
<a href="https://www.giss.nasa.gov/tools/panoply/">Panoply</a> provided by the
NASA.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#set path to JSON file
json &lt;- system.file(file.path("extdata","metadata.json"), package="ebvcube")
#set output path of the new EBV netCDF
out &lt;- file.path(system.file(package='ebvcube'),"extdata","sCAR_new.nc")
#set path to the csv holding the entity names
entities &lt;- file.path(system.file(package='ebvcube'),"extdata","entities.csv")

#create new EBV netCDF
## Not run: 
ebv_create(jsonpath = json, outputpath = out, entities = entities,
           fillvalue=-3.4E38)

## End(Not run)
</code></pre>

<hr>
<h2 id='ebv_create_taxonomy'>Create an EBV netCDF with taxonomy</h2><span id='topic+ebv_create_taxonomy'></span>

<h3>Description</h3>

<p>Create the core structure of the EBV netCDF based on the json
from the <a href="https://portal.geobon.org">EBV Data Portal</a>. Additionally,
you can add the hierarchy of the taxonomy. This is not provided in the
<code><a href="#topic+ebv_create">ebv_create()</a></code> function. Use the <code><a href="#topic+ebv_create">ebv_create()</a></code> function
if your dataset holds no taxonomic information. Data will be added
afterwards using <code><a href="#topic+ebv_add_data">ebv_add_data()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebv_create_taxonomy(
  jsonpath,
  outputpath,
  taxonomy,
  lsid = FALSE,
  epsg = 4326,
  extent = c(-180, 180, -90, 90),
  resolution = c(1, 1),
  timesteps = NULL,
  fillvalue,
  prec = "double",
  sep = ",",
  force_4D = TRUE,
  overwrite = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebv_create_taxonomy_+3A_jsonpath">jsonpath</code></td>
<td>
<p>Character. Path to the json file downloaded from the EBV Data
Portal. Login to the page and click on 'Uploads' and 'New Upload' to start
the process.</p>
</td></tr>
<tr><td><code id="ebv_create_taxonomy_+3A_outputpath">outputpath</code></td>
<td>
<p>Character. Set path where the netCDF file should be created.</p>
</td></tr>
<tr><td><code id="ebv_create_taxonomy_+3A_taxonomy">taxonomy</code></td>
<td>
<p>Character. Path to the csv table holding the taxonomy.
Default: comma-separated delimiter, else change the <code>sep</code> argument
accordingly. The csv needs to have the following structure: The header
displays the names of the different taxon levels ordered from the highest
level to the lowest, e.g. &quot;Order&quot;, &quot;Family&quot;, &quot;Genus&quot;, &quot;Species&quot;. The last
column (if <code>lsid</code>=FALSE) is equivalent to the <code>entity</code> argument in the
<code><a href="#topic+ebv_create">ebv_create()</a></code> function. Each row of the csv corresponds to a
unique entity. In case the <code>lsid</code> argument (see below) is set to the TRUE,
this table gets an additional last column which holds the lsid per entity -
in this case the second last column contains the entity names, e.g. the
following column order: &quot;Order&quot;, &quot;Family&quot;, &quot;Genus&quot;, &quot;Species&quot;, &quot;lsid&quot;.</p>
</td></tr>
<tr><td><code id="ebv_create_taxonomy_+3A_lsid">lsid</code></td>
<td>
<p>Logical. Default: FALSE. Set to TRUE if the last column in your
taxonomy csv file defines the lsid for each entity. For more info check
<a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#taxon-names-and-identifiers">CF
convention 1.8: Taxon Names and Identifiers</a>.</p>
</td></tr>
<tr><td><code id="ebv_create_taxonomy_+3A_epsg">epsg</code></td>
<td>
<p>Integer. Default: 4326 (WGS84). Defines the coordinate reference
system via the corresponding epsg code.</p>
</td></tr>
<tr><td><code id="ebv_create_taxonomy_+3A_extent">extent</code></td>
<td>
<p>Numeric. Default: c(-180,180,-90,90). Defines the extent of the
data: c(xmin, xmax, ymin, ymax).</p>
</td></tr>
<tr><td><code id="ebv_create_taxonomy_+3A_resolution">resolution</code></td>
<td>
<p>Numerical. Vector of two numerical values defining the
longitudinal and latitudinal resolution of the pixel: c(lon,lat).</p>
</td></tr>
<tr><td><code id="ebv_create_taxonomy_+3A_timesteps">timesteps</code></td>
<td>
<p>Character. Vector of the timesteps in the dataset. Default:
NULL - in this case the time will be calculated from the start-, endpoint
and temporal resolution given in the metadata file (json). Else, the dates
must be given in in ISO format 'YYYY-MM-DD' or shortened 'YYYY' in case of
yearly timesteps.</p>
</td></tr>
<tr><td><code id="ebv_create_taxonomy_+3A_fillvalue">fillvalue</code></td>
<td>
<p>Numeric. Value of the missing data (NoData value) in the
array. Has to be a single numeric value or NA.</p>
</td></tr>
<tr><td><code id="ebv_create_taxonomy_+3A_prec">prec</code></td>
<td>
<p>Character. Default: 'double'. Precision of the data set. Valid
options: 'short' 'integer' 'float' 'double' 'char' 'byte'.</p>
</td></tr>
<tr><td><code id="ebv_create_taxonomy_+3A_sep">sep</code></td>
<td>
<p>Character. Default: ','. If the delimiter of the csv specifying the
entity-names differs from the default, indicate here.</p>
</td></tr>
<tr><td><code id="ebv_create_taxonomy_+3A_force_4d">force_4D</code></td>
<td>
<p>Logical. Default is TRUE. If the argument is TRUE, there will
be 4D cubes (lon, lat, time, entity) per metric. If this argument is changed
to FALSE, there will be 3D cubes (lon, lat, time) per entity (per metric).
So the latter yields a higher amount of cubes and does not bundle all
information per metric. In the future the standard will be restricted to the
4D version. Recommendation: go with the 4D cubes!</p>
</td></tr>
<tr><td><code id="ebv_create_taxonomy_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. Default: FALSE. Set to TRUE to overwrite the output
file defined by 'outputpath'</p>
</td></tr>
<tr><td><code id="ebv_create_taxonomy_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Creates the netCDF file at the 'outputpath' location including the
taxonomy information.
</p>


<h3>Note</h3>

<p>To check out the results take a look at your netCDF file with
<a href="https://www.giss.nasa.gov/tools/panoply/">Panoply</a> provided by the
NASA.
</p>
<p>You can check the taxonomy info with <code><a href="#topic+ebv_properties">ebv_properties()</a></code> in the
slot 'general' under the name 'taxonomy' and 'taxonomy_lsid'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#set path to JSON file
json &lt;- system.file(file.path("extdata/testdata","5.json"), package="ebvcube")
#set output path of the new EBV netCDF
out &lt;-  tempfile(fileext='.nc')
#set path to the csv holding the taxonomy names
taxonomy &lt;- file.path(system.file(package='ebvcube'),"extdata/testdata","id5_entities.csv")

#create new EBV netCDF with taxonomy
## Not run: 
ebv_create_taxonomy(jsonpath = json, outputpath = out, taxonomy = taxonomy,
           fillvalue = -127, resolution = c(0.25, 0.25), verbose = FALSE)
#remove file
file.remove(out)

## End(Not run)
</code></pre>

<hr>
<h2 id='ebv_datacubepaths'>Get datacubepaths of EBV netCDF</h2><span id='topic+ebv_datacubepaths'></span>

<h3>Description</h3>

<p>Get the paths to the datacubes of the EBV netCDF to access the
data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebv_datacubepaths(filepath, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebv_datacubepaths_+3A_filepath">filepath</code></td>
<td>
<p>Character. Path to the netCDF file.</p>
</td></tr>
<tr><td><code id="ebv_datacubepaths_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Dataframe containing the paths to access the datacubes and
descriptions of scenario, metric and entity if existing.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#set path to EBV netCDF
file &lt;- system.file(file.path("extdata","martins_comcom_subset.nc"), package="ebvcube")

#get all datacubepaths of EBV netCDF
datacubes &lt;- ebv_datacubepaths(file)
</code></pre>

<hr>
<h2 id='ebv_download'>Download an EBV netCDF file</h2><span id='topic+ebv_download'></span>

<h3>Description</h3>

<p>Returns the list of all available data sets at the EBV Portal if
you no arguments are given. If an ID is given, the corresponding file
(netCDF) and its metadata (json file) will be downloaded to the given
output directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebv_download(id = NULL, outputdir, overwrite = FALSE, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebv_download_+3A_id">id</code></td>
<td>
<p>Integer or Character. There are three option to identify the
dataset to be downloaded. (1) It can be a single integer value representing
the ID of the dataset. (2) It can be a character string representing the
title of the data set. (3) It can be a character string representing the
DOI of the dataset in the format '10.25829/f2rdp4' (Dataset 'Habitat
availability for African great apes' by Jessica Junker from the EBV Data
Portal). All three identifier can be retrieved by running
<code><a href="#topic+ebv_download">ebv_download()</a></code> without any arguments which returns a data.frame
of all available data sets and their ID, title and DOI.</p>
</td></tr>
<tr><td><code id="ebv_download_+3A_outputdir">outputdir</code></td>
<td>
<p>Character. Output directory of the downloaded files.</p>
</td></tr>
<tr><td><code id="ebv_download_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. Default: FALSE. Set to TRUE if you want to
overwrite the netCDF and json.</p>
</td></tr>
<tr><td><code id="ebv_download_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Downloads a netCDF and json file (ACDD metadata) to the given output
directory. If run empty returns a data.frame of all available data sets and
their ID, title and DOI.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

#' #get all available datasets
datasets &lt;- ebv_download()

ebv_download(id = datasets$id[1], outputdir =
tempdir(), overwrite=TRUE,
verbose=FALSE)

</code></pre>

<hr>
<h2 id='ebv_map'>Map plot of an EBV netCDF</h2><span id='topic+ebv_map'></span>

<h3>Description</h3>

<p>Map plot of the data of one timestep in one datacube of an EBV
netCDF.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebv_map(
  filepath,
  datacubepath = NULL,
  entity = NULL,
  timestep = 1,
  countries = TRUE,
  col_rev = FALSE,
  classes = 5,
  scenario = NULL,
  metric = NULL,
  all_data = FALSE,
  ignore_RAM = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebv_map_+3A_filepath">filepath</code></td>
<td>
<p>Character. Path to the netCDF file.</p>
</td></tr>
<tr><td><code id="ebv_map_+3A_datacubepath">datacubepath</code></td>
<td>
<p>Character. Optional. Default: NULL. Path to the datacube
(use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>). Alternatively, you can use the
scenario and metric argument to define which cube you want to access.</p>
</td></tr>
<tr><td><code id="ebv_map_+3A_entity">entity</code></td>
<td>
<p>Character or Integer. Default is NULL. If the structure is 3D,
the entity argument is set to NULL. Else, a character string or single
integer value must indicate the entity of the 4D structure of the EBV
netCDFs.</p>
</td></tr>
<tr><td><code id="ebv_map_+3A_timestep">timestep</code></td>
<td>
<p>Integer or character. Select a timestep. Either provide an
integer value that refers to the index of the timestep (minimum value: 1)
or provide a date in ISO format, such as '2015-01-01'.</p>
</td></tr>
<tr><td><code id="ebv_map_+3A_countries">countries</code></td>
<td>
<p>Logical. Default: TRUE. Simple country outlines will be
plotted on top of the raster data. Disable by setting this option to FALSE.</p>
</td></tr>
<tr><td><code id="ebv_map_+3A_col_rev">col_rev</code></td>
<td>
<p>Logical. Default: FALSE Set to TRUE if you want the color ramp
to be the other way around.</p>
</td></tr>
<tr><td><code id="ebv_map_+3A_classes">classes</code></td>
<td>
<p>Integer. Default: 5. Define the amount of classes (quantiles)
for the symbology. Currently restricted to maximum 11 classes (allowed
maximum for palette RdYlBu is 11).</p>
</td></tr>
<tr><td><code id="ebv_map_+3A_scenario">scenario</code></td>
<td>
<p>Character or integer. Optional. Default: NULL. Define the
scenario you want to access. If the EBV netCDF has no scenarios, leave the
default value (NULL). You can use an integer value defining the scenario or
give the name of the scenario as a character string. To check the available
scenarios and their name or number (integer), use
<code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_map_+3A_metric">metric</code></td>
<td>
<p>Character or integer. Optional. Define the metric you want to
access. You can use an integer value defining the metric or give the name
of the scenario as a character string. To check the available metrics and
their name or number (integer), use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_map_+3A_all_data">all_data</code></td>
<td>
<p>Logical. Default: FALSE. The quantiles are based on the one
timestep you chose (default). If you want include the full data of the
datacube to produce several maps that are based on the same color scale,
set this argument to TRUE (to allow for viusual comparison between entities
or timesteps. Does not cover different datacubes.)</p>
</td></tr>
<tr><td><code id="ebv_map_+3A_ignore_ram">ignore_RAM</code></td>
<td>
<p>Logical. Default: FALSE. Checks if there is enough space in
your memory to read the data. Can be switched off (set to TRUE).</p>
</td></tr>
<tr><td><code id="ebv_map_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Plots a map.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#set path to EBV netCDF
file &lt;- system.file(file.path("extdata","martins_comcom_subset.nc"), package="ebvcube")
#get all datacubepaths of EBV netCDF
datacubes &lt;- ebv_datacubepaths(file, verbose=FALSE)

#plot a map for the 3rd timestep, divide into 7 classes
ebv_map(filepath = file, datacubepath = datacubes[1,1], entity = 1,
        timestep = 3, classes = 7, verbose = FALSE)
ebv_map(filepath = file, entity = 'all bird species', timestep = "1950-01-01",
        metric = 'Relative change in the number of species (%)',
        classes = 7, verbose = FALSE)

</code></pre>

<hr>
<h2 id='ebv_metadata'>Create the metadata file (json) for the EBV netCDF creation</h2><span id='topic+ebv_metadata'></span>

<h3>Description</h3>

<p>This function collects the metadata terms of the EBV netCDF to
create and collects them in a text file in JSON format. Use
<code><a href="#topic+ebv_create">ebv_create()</a></code> with the output file of this function to create
your EBV netCDF. During the actual creation you will be asked for more
information regarding the spatial resolution, CRS etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebv_metadata(
  outputpath,
  title,
  summary,
  references = NULL,
  source,
  project_name = NULL,
  project_url = NULL,
  date_created,
  creator_name,
  creator_email = NULL,
  creator_institution,
  contributor_name = NULL,
  license,
  comment = NULL,
  ebv_class,
  ebv_name,
  ebv_scenario_classification_name = NULL,
  ebv_scenario_classification_version = NULL,
  ebv_scenario_classification_url = NULL,
  ebv_spatial_scope,
  ebv_spatial_description = NULL,
  ebv_domain,
  coverage_content_type,
  ebv_entity_type,
  ebv_entity_scope,
  ebv_entity_classification_name = NULL,
  ebv_entity_classification_url = NULL,
  time_coverage_start,
  time_coverage_end,
  time_coverage_resolution,
  metric = list(standard_name = "", long_name = "", units = ""),
  scenario = list(standard_name = "", long_name = ""),
  overwrite = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebv_metadata_+3A_outputpath">outputpath</code></td>
<td>
<p>Character. Outputpath of the text-file (JSON format)
containing the metadata. File ending: *.json</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_title">title</code></td>
<td>
<p>Character. A short phrase or sentence describing the dataset.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_summary">summary</code></td>
<td>
<p>Character. A paragraph describing the dataset, analogous to an
abstract for a paper. Maximum character length: 1500.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_references">references</code></td>
<td>
<p>Character. Optional. DOIs (URLs) that describe the data or
methods used to produce it. Multiple DOIs can be given in a vector.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_source">source</code></td>
<td>
<p>Character. The method of production of the original data. If it
was model-generated, source should name the model and its version. If it is
observational, source should characterize it. Corresponding term in the EBV
Data Portal: 'methods'.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_project_name">project_name</code></td>
<td>
<p>Character. Optional. The name of the project principally
responsible for originating this data.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_project_url">project_url</code></td>
<td>
<p>Character. Optional. The URL of the project.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_date_created">date_created</code></td>
<td>
<p>Character. The date on which this version of the data was
created in YYYY-MM-DD format.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_creator_name">creator_name</code></td>
<td>
<p>Character. The name of the person principally responsible
for creating this data.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_creator_email">creator_email</code></td>
<td>
<p>Character. Optional. The email address of the person principally
responsible for creating this data.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_creator_institution">creator_institution</code></td>
<td>
<p>Character. The institution of the creator; should
uniquely identify the creator's institution.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_contributor_name">contributor_name</code></td>
<td>
<p>Character. Optional. The name of any individuals, projects, or
institutions that contributed to the creation of this data. Corresponding
term in the EBV Data Portal: 'Co-creators'. Multiple contributors can be
given in a vector.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_license">license</code></td>
<td>
<p>Character. License of the dataset. Will be stored in the
netCDF as the URL to the CC license. Choose one of: 'CC0', 'CC BY', 'CC
BY-SA', 'CC BY-NC', 'CC BY-NC-SA', 'CC BY-ND', 'CC BY-NC-ND'.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_comment">comment</code></td>
<td>
<p>Character.  Optional. Miscellaneous information about the data, not
captured elsewhere.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_ebv_class">ebv_class</code></td>
<td>
<p>Character. EBV Class of the data set. One of: 'Genetic
composition', 'Species populations', 'Species traits', 'Community
composition', 'Ecosystem functioning', 'Ecosystem structure', 'Ecosystem
services'. For more info see note.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_ebv_name">ebv_name</code></td>
<td>
<p>Character. EBV Name of the data set. The possible options
depend on the EBV Class. One of: 'Intraspecific genetic diversity',
'Genetic differentiation', 'Effective population size', 'Inbreeding',
'Species distributions', 'Species abundances', 'Morphology', 'Physiology',
'Phenology', 'Movement', 'Community abundance', 'Taxonomic and phylogenetic
diversity', 'Trait diversity', 'Interaction diversity', 'Primary
productivity', 'Ecosystem phenology', 'Ecosystem disturbances', 'Live cover
fraction', 'Ecosystem distribution', 'Ecosystem Vertical Profile',
'Pollination' For more info see note.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_ebv_scenario_classification_name">ebv_scenario_classification_name</code></td>
<td>
<p>Character. Optional. Name of the classification
system used for the scenarios.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_ebv_scenario_classification_version">ebv_scenario_classification_version</code></td>
<td>
<p>Character. Optional. Version of the
classification system used for the scenarios.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_ebv_scenario_classification_url">ebv_scenario_classification_url</code></td>
<td>
<p>Character. Optional. URL of the classification
system used for the scenarios.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_ebv_spatial_scope">ebv_spatial_scope</code></td>
<td>
<p>Character. Spatial scope of the data set. One of:
'Continental/Regional', 'National', 'Sub-national/Local' or 'Global'.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_ebv_spatial_description">ebv_spatial_description</code></td>
<td>
<p>Character. Specific information about the
spatial scope. Mandatory if spatial scope is not Global.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_ebv_domain">ebv_domain</code></td>
<td>
<p>Character. Environmental domain of the data set. Choose one
or several of: 'Terrestrial', 'Marine' or 'Freshwater'. Multiple domains
can be given in a vector.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_coverage_content_type">coverage_content_type</code></td>
<td>
<p>Character. Describes the source of the data
based on an ISO 19115-1 code. Choose one or several of: 'image',
'thematicClassification', 'physicalMeasurement', 'auxiliaryInformation',
'qualityInformation', 'referenceInformation', 'modelResult', or
'coordinate'. Multiple types can be given in a vector.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_ebv_entity_type">ebv_entity_type</code></td>
<td>
<p>Character. EBV entity type. This is a free entry
field. Still, if one of the following terms fits your entity scope please
use: 'Species', 'Communities', 'Ecosystems' or 'None'.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_ebv_entity_scope">ebv_entity_scope</code></td>
<td>
<p>Character. Specifies the entity scope in more detail,
e.g., 'African great apes'. If the entity type is 'None' this term is not
applied to the metadata.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_ebv_entity_classification_name">ebv_entity_classification_name</code></td>
<td>
<p>Character. Optional. Name of the classification
system used for the entity types.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_ebv_entity_classification_url">ebv_entity_classification_url</code></td>
<td>
<p>Character. Optional. URL of the classification
system used for the entity types.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_time_coverage_start">time_coverage_start</code></td>
<td>
<p>Character. Start date of the time span covered by
the dataset in YYYY-MM-DD format.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_time_coverage_end">time_coverage_end</code></td>
<td>
<p>Character. End date of the time span covered by the
dataset in YYYY-MM-DD format.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_time_coverage_resolution">time_coverage_resolution</code></td>
<td>
<p>Character. Describes the targeted time period
between each value in the data set (ISO 8601:2004 date format). Provide the
definition of your temporal resolution in the ISO 8601:2004 duration format
P(YYYY)-(MM)-(DD). Examples: decadal: 'P0010-00-00', daily: 'P0000-00-01',
single timestep: 'P0000-00-00' and irregular time intervals: 'Irregular'.
For the latter the timesteps can be directly defined when using
<code><a href="#topic+ebv_create">ebv_create()</a></code> (<code>timesteps</code> argument).</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_metric">metric</code></td>
<td>
<p>List. Metric attributes defined accordingly:
list(standard_name=&rdquo;, long_name=&rdquo;, units=&rdquo;). If you have several metrics
give a list of lists, e.g. for two: list(list(standard_name=&rdquo;,
long_name=&rdquo;, units=&rdquo;),list(standard_name=&rdquo;, long_name=&rdquo;, units=&rdquo;))
At least one metric is mandatory.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_scenario">scenario</code></td>
<td>
<p>List. Optional. Scenario attributes defined accordingly:
list(standard_name=&rdquo;, long_name=&rdquo;). If you have several scenarios give a
list of lists, e.g. for two: list(list(standard_name=&rdquo;,
long_name=&rdquo;),list(standard_name=&rdquo;, long_name=&rdquo;)). It is not mandatory to
have a scenario.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. Default: FALSE. Set to TRUE to overwrite the output
file defined by 'outputpath'.</p>
</td></tr>
<tr><td><code id="ebv_metadata_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints and
warnings by setting it to FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See EBV Classes and their corresponding EBV Names:</p>

<table>
<tr>
 <td style="text-align: left;">
   <strong>EBV Class</strong> </td><td style="text-align: left;"> <strong>EBV Names</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
   Genetic composition </td><td style="text-align: left;"> 'Intraspecific genetic diversity', 'Genetic differentiation','Effective population size', 'Inbreeding' </td>
</tr>
<tr>
 <td style="text-align: left;">
   Species populations </td><td style="text-align: left;"> 'Species distributions', 'Species abundances' </td>
</tr>
<tr>
 <td style="text-align: left;">
   Species traits </td><td style="text-align: left;"> 'Morphology', 'Physiology', 'Phenology', 'Movement' </td>
</tr>
<tr>
 <td style="text-align: left;">
   Community composition </td><td style="text-align: left;"> 'Community abundance', 'Taxonomic and phylogenetic diversity', 'Trait diversity', 'Interaction diversity' </td>
</tr>
<tr>
 <td style="text-align: left;">
   Ecosystem functioning </td><td style="text-align: left;"> 'Primary productivity', 'Ecosystem phenology', 'Ecosystem disturbances' </td>
</tr>
<tr>
 <td style="text-align: left;">
   Ecosystem structure </td><td style="text-align: left;"> 'Live cover fraction', 'Ecosystem distribution', 'Ecosystem Vertical Profile' </td>
</tr>
<tr>
 <td style="text-align: left;">
   Ecosystem services </td><td style="text-align: left;"> 'Pollination', 'other' </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Value</h3>

<p>Returns the outputpath of the JSON file with the metadata.
</p>


<h3>Note</h3>

<p><strong>Metadata Conventions:</strong> The metadata termns of the EBV netCDFs
are based on
<a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html">CF
1.8</a> and
<a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3">ACDD
1.3</a> Conventions.
Find more help in the
<a href="https://portal.geobon.org/downloads/pdf/how_to_ebv-portal.pdf">How-To</a>
on the EBV Portal Website.<br /><strong>EBV Class:</strong> The EBV Class is GEO BON's
classification system for biodiversity monitoring. It categorizes and
organizes essential ecological variables across scales and biological
levels. This standardized framework helps identify and prioritize key
variables representing biodiversity aspects like species composition,
population dynamics, ecosystem functioning, and habitat quality.
<br /><strong>EBV Name:</strong> The EBV Name is a unique identifier for a specific
variable in the EBV Class, representing a distinct aspect of biodiversity.
It helps identify and categorize measured or monitored biodiversity
information. The EBV Name reflects the ecological attribute being assessed,
such as &quot;Species Richness,&quot; &quot;Population Abundance,&quot; &quot;Functional Diversity,&quot;
&quot;Habitat Fragmentation,&quot; or &quot;Ecosystem Productivity&quot;.
<br /><strong>Authorship:</strong> Besides the creator and the contributors there is a
third metadata term regarding authorship: the 'publisher'. This is the
person that logs into the EBV Data Portal and uploads the dataset. This
person's personal data is automatically added to the metadata from the
account information.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#create minimal metadata
## Not run: 
ebv_metadata(outputpath=out,
  overwrite = TRUE,
  title = 'Not a real title',
  summary = 'Summary summary summary',
  source = 'this was created by doing...',
  date_created = as.Date('2024-07-10'),
  creator_name = 'Name Name',
  creator_institution = 'lame name',
  license = 'CC0',
  ebv_class = 'Genetic composition',
  ebv_name = 'Intraspecific genetic diversity',
  ebv_spatial_scope = 'National',
  ebv_spatial_description = 'Finland',
  ebv_domain = 'Terrestrial',
  ebv_entity_type = 'Species',
  ebv_entity_scope = '50 mammal species',
  coverage_content_type = c('modelResult'),
  time_coverage_start = as.Date('1900-01-01'),
  time_coverage_end =as.Date('1950-01-01'),
  time_coverage_resolution = 'P0010-00-00',
  metric = list(list(standard_name='relative change of habitat',
  long_name='relative change to year 1800', units='percentage'),
              list(standard_name='absolute change habitat',
              long_name='absolute change since year 1800',
              units='square kilometers')),
  scenario = list(list(standard_name='SSP1xRCP2.6 LU',
                long_name='Global Sustainability (SSP1xRCP2.6), with only effects of land-use.'),
                list(standard_name='SSP3xRCP6.0 LU',
                long_name='Regional Rivalry (SSP3xRCP6.0), with only effects of land-use')),
  scenario_classification_name = 'SSP-RCP',
  ebv_scenario_classification_version = 'LUH2, CMIP5/ISIMIP2a',
  verbose = TRUE
)

## End(Not run)
</code></pre>

<hr>
<h2 id='ebv_properties'>Read properties of EBV netCDF</h2><span id='topic+ebv_properties'></span>

<h3>Description</h3>

<p>Structured access to all attributes of the netCDF file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebv_properties(
  filepath,
  datacubepath = NULL,
  scenario = NULL,
  metric = NULL,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebv_properties_+3A_filepath">filepath</code></td>
<td>
<p>Character. Path to the netCDF file.</p>
</td></tr>
<tr><td><code id="ebv_properties_+3A_datacubepath">datacubepath</code></td>
<td>
<p>Character. Optional. Default: NULL. Path to the datacube
(use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>). Alternatively, you can use the
scenario and metric argument to define which cube you want to access.</p>
</td></tr>
<tr><td><code id="ebv_properties_+3A_scenario">scenario</code></td>
<td>
<p>Character or integer. Optional. Default: NULL. Define the
scenario you want to access. If the EBV netCDF has no scenarios, leave the
default value (NULL). You can use an integer value defining the scenario or
give the name of the scenario as a character string. To check the available
scenarios and their name or number (integer), use
<code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_properties_+3A_metric">metric</code></td>
<td>
<p>Character or integer. Optional. Define the metric you want to
access. You can use an integer value defining the metric or give the name
of the scenario as a character string. To check the available metrics and
their name or number (integer), use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_properties_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>S4 class containing information about file or file and datacube
depending on input.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#define path to EBV netCDF
file &lt;- system.file(file.path("extdata","martins_comcom_subset.nc"), package="ebvcube")
#get all datacubepaths of EBV netCDF
datacubes &lt;- ebv_datacubepaths(file, verbose=FALSE)

#get properties only for the file
prop_file &lt;- ebv_properties(file, verbose=FALSE)
#get properties for the file and a specific datacube - use datacubepath
prop_dc &lt;- ebv_properties(file, datacubepath = datacubes[1,1], verbose=FALSE)
#get properties for the file and a specific datacube - use scenario &amp; metric
#note: this dataset has no scenario -&gt; only metric is defined
prop_dc &lt;- ebv_properties(file, metric = 2, verbose=FALSE)
</code></pre>

<hr>
<h2 id='ebv_read'>Read data from an EBV netCDF</h2><span id='topic+ebv_read'></span>

<h3>Description</h3>

<p>Read one or more layers from one datacube of the netCDF file.
Decide between in-memory array, in-memory SpatRaster or an array-like
object (DelayedMatrix) pointing to the on-disk netCDF file. The latter is
useful for data that exceeds your memory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebv_read(
  filepath,
  datacubepath = NULL,
  entity = NULL,
  timestep = 1,
  type = "r",
  scenario = NULL,
  metric = NULL,
  sparse = FALSE,
  ignore_RAM = FALSE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebv_read_+3A_filepath">filepath</code></td>
<td>
<p>Character. Path to the netCDF file.</p>
</td></tr>
<tr><td><code id="ebv_read_+3A_datacubepath">datacubepath</code></td>
<td>
<p>Character. Optional. Default: NULL. Path to the datacube
(use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>). Alternatively, you can use the
scenario and metric argument to define which cube you want to access.</p>
</td></tr>
<tr><td><code id="ebv_read_+3A_entity">entity</code></td>
<td>
<p>Character or Integer. Default is NULL. If the structure is 3D,
the entity argument is set to NULL. Else, a character string or single
integer value must indicate the entity of the 4D structure of the EBV
netCDFs.</p>
</td></tr>
<tr><td><code id="ebv_read_+3A_timestep">timestep</code></td>
<td>
<p>Integer or character. Select one or several timestep(s).
Either provide an integer value or list of values that refer(s) to the
index of the timestep(s) (minimum value: 1) or provide a date or list of
dates in ISO format, such as '2015-01-01'.</p>
</td></tr>
<tr><td><code id="ebv_read_+3A_type">type</code></td>
<td>
<p>Character. Choose between 'a', 'r' and 'da'. The first returns an
array or matrix object. The 'r' indicates that a SpatRaster object from the
terra package will be returned (default). The latter ('da') returns a
DelayedArray or DelayedMatrix object.</p>
</td></tr>
<tr><td><code id="ebv_read_+3A_scenario">scenario</code></td>
<td>
<p>Character or integer. Optional. Default: NULL. Define the
scenario you want to access. If the EBV netCDF has no scenarios, leave the
default value (NULL). You can use an integer value defining the scenario or
give the name of the scenario as a character string. To check the available
scenarios and their name or number (integer), use
<code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_read_+3A_metric">metric</code></td>
<td>
<p>Character or integer. Optional. Define the metric you want to
access. You can use an integer value defining the metric or give the name
of the scenario as a character string. To check the available metrics and
their name or number (integer), use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_read_+3A_sparse">sparse</code></td>
<td>
<p>Logical. Default: FALSE. Set to TRUE if the data contains a lot
empty raster cells. Only relevant for DelayedArray return value.</p>
</td></tr>
<tr><td><code id="ebv_read_+3A_ignore_ram">ignore_RAM</code></td>
<td>
<p>Logical. Default: FALSE. Checks if there is enough space in
your memory to read the data. Can be switched off (set to TRUE).</p>
</td></tr>
<tr><td><code id="ebv_read_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Array, SpatRaster or DelayedArray object containing the data of the
corresponding datacube and timestep(s).
</p>


<h3>Note</h3>

<p>For working with the DelayedMatrix take a look at
<code><a href="DelayedArray.html#topic+DelayedArray-class">DelayedArray::DelayedArray()</a></code> and the
<a href="https://www.rdocumentation.org/packages/HDF5Array/versions/1.0.2/topics/DelayedArray-utils">DelayedArray-utils</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#set path to EBV netCDF
file &lt;- system.file(file.path("extdata","martins_comcom_subset.nc"), package="ebvcube")
#get all datacubepaths of EBV netCDF
datacubes &lt;- ebv_datacubepaths(file, verbose=FALSE)


#read data as DelayedArray
cSAR.delayedarray &lt;- ebv_read(filepath = file, datacubepath = datacubes[1,1],
                              entity = 1, timestep = c(1,3), type='da',
                              sparse = TRUE)
#read data as SpatRaster
cSAR.raster &lt;- ebv_read(filepath = file,entity = 1, timestep = "2000-01-01",
                        type='r', metric = 1)
#read data as Array
cSAR.array &lt;- ebv_read(filepath = file, datacubepath = datacubes[1,1],
                              entity = 1, timestep = 1, type='r')

</code></pre>

<hr>
<h2 id='ebv_read_bb'>Read subset (bounding box) of one datacube of an EBV netCDF</h2><span id='topic+ebv_read_bb'></span>

<h3>Description</h3>

<p>Read a subset of one or more layers from one datacube of the
NetCDF file. Subset definition by a bounding box.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebv_read_bb(
  filepath,
  datacubepath = NULL,
  entity = NULL,
  timestep = 1,
  bb,
  outputpath = NULL,
  epsg = 4326,
  scenario = NULL,
  metric = NULL,
  overwrite = FALSE,
  ignore_RAM = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebv_read_bb_+3A_filepath">filepath</code></td>
<td>
<p>Character. Path to the netCDF file.</p>
</td></tr>
<tr><td><code id="ebv_read_bb_+3A_datacubepath">datacubepath</code></td>
<td>
<p>Character. Optional. Default: NULL. Path to the datacube
(use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>). Alternatively, you can use the
scenario and metric argument to define which cube you want to access.</p>
</td></tr>
<tr><td><code id="ebv_read_bb_+3A_entity">entity</code></td>
<td>
<p>Character or Integer. Default is NULL. If the structure is 3D,
the entity argument is set to NULL. Else, a character string or single
integer value must indicate the entity of the 4D structure of the EBV
netCDFs.</p>
</td></tr>
<tr><td><code id="ebv_read_bb_+3A_timestep">timestep</code></td>
<td>
<p>Integer or character. Select one or several timestep(s).
Either provide an integer value or list of values that refer(s) to the
index of the timestep(s) (minimum value: 1) or provide a date or list of
dates in ISO format, such as '2015-01-01'.</p>
</td></tr>
<tr><td><code id="ebv_read_bb_+3A_bb">bb</code></td>
<td>
<p>Integer Vector. Definition of subset by bounding box: c(xmin,
xmax, ymin, ymax).</p>
</td></tr>
<tr><td><code id="ebv_read_bb_+3A_outputpath">outputpath</code></td>
<td>
<p>Character. Default: NULL, returns the data as a SpatRaster
object in memory. Optional: set path to write subset as GeoTiff on disk.</p>
</td></tr>
<tr><td><code id="ebv_read_bb_+3A_epsg">epsg</code></td>
<td>
<p>Integer. Default: 4326 (WGS84). Change accordingly if your
bounding box coordinates are based on a different coordinate reference
system.</p>
</td></tr>
<tr><td><code id="ebv_read_bb_+3A_scenario">scenario</code></td>
<td>
<p>Character or integer. Optional. Default: NULL. Define the
scenario you want to access. If the EBV netCDF has no scenarios, leave the
default value (NULL). You can use an integer value defining the scenario or
give the name of the scenario as a character string. To check the available
scenarios and their name or number (integer), use
<code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_read_bb_+3A_metric">metric</code></td>
<td>
<p>Character or integer. Optional. Define the metric you want to
access. You can use an integer value defining the metric or give the name
of the scenario as a character string. To check the available metrics and
their name or number (integer), use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_read_bb_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. Default: FALSE. Set to TRUE to overwrite the
outputfile defined by 'outputpath'.</p>
</td></tr>
<tr><td><code id="ebv_read_bb_+3A_ignore_ram">ignore_RAM</code></td>
<td>
<p>Logical. Default: FALSE. Checks if there is enough space in
your memory to read the data. Can be switched off (set to TRUE).</p>
</td></tr>
<tr><td><code id="ebv_read_bb_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a SpatRaster object if no outputpath is given. Otherwise the
subset is written onto the disk and the outputpath is returned.
</p>


<h3>Note</h3>

<p>In case the epsg of the Bounding Box and the netCDF differ, the data is
returned based on the epsg of the netCDF Dataset.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ebv_read_shp">ebv_read_shp()</a></code> for subsetting via shapefile.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#set path to EBV netCDF
file &lt;- system.file(file.path("extdata","martins_comcom_subset.nc"), package="ebvcube")
#get all datacubepaths of EBV netCDF
datacubes &lt;- ebv_datacubepaths(file, verbose=FALSE)

#set outputpath
out &lt;- file.path(system.file(package='ebvcube'),"extdata","subset_bb.tif")
#define two different bounding boxes based on different EPSG codes
bb_wgs84 &lt;- c(-26, 64, 30, 38)
bb_utm32 &lt;- c(-2383703, 5532302, 3643854, 4564646)


## Not run: 
#read bb (based on EPSG 4326) - return SpatRaster
cSAR_subset &lt;- ebv_read_bb(filepath = file, datacubepath = datacubes[1,1],
                             entity = 1, timestep = 1:3, bb = bb_wgs84)

#read bb (based on EPSG 4326) - write to GeoTiff
path &lt;- ebv_read_bb(filepath = file, datacubepath = datacubes[1,1],
                    entity = 1, timestep = 1, bb = bb_wgs84,
                    outputpath = out, overwrite = TRUE)

#read bb (based on ESRI 54009) - write to GeoTiff
path  &lt;- ebv_read_bb(filepath = file, datacubepath = datacubes[1,1],
                     entity = 1, timestep = 1:2, bb = bb_utm32,
                     epsg = 32632, outputpath = out, overwrite = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='ebv_read_shp'>Read subset (shapefile) of one datacube of an EBV netCDF</h2><span id='topic+ebv_read_shp'></span>

<h3>Description</h3>

<p>Read a subset of one or more layers from one datacube of the
netCDF file. Subset definition by a shapefile.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebv_read_shp(
  filepath,
  datacubepath = NULL,
  entity = NULL,
  timestep = 1,
  shp,
  outputpath = NULL,
  touches = TRUE,
  scenario = NULL,
  metric = NULL,
  overwrite = FALSE,
  ignore_RAM = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebv_read_shp_+3A_filepath">filepath</code></td>
<td>
<p>Character. Path to the netCDF file.</p>
</td></tr>
<tr><td><code id="ebv_read_shp_+3A_datacubepath">datacubepath</code></td>
<td>
<p>Character. Optional. Default: NULL. Path to the datacube
(use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>). Alternatively, you can use the
scenario and metric argument to define which cube you want to access.</p>
</td></tr>
<tr><td><code id="ebv_read_shp_+3A_entity">entity</code></td>
<td>
<p>Character or Integer. Default is NULL. If the structure is 3D,
the entity argument is set to NULL. Else, a character string or single
integer value must indicate the entity of the 4D structure of the EBV
netCDFs.</p>
</td></tr>
<tr><td><code id="ebv_read_shp_+3A_timestep">timestep</code></td>
<td>
<p>Integer or character. Select one or several timestep(s).
Either provide an integer value or list of values that refer(s) to the
index of the timestep(s) (minimum value: 1) or provide a date or list of
dates in ISO format, such as '2015-01-01'.</p>
</td></tr>
<tr><td><code id="ebv_read_shp_+3A_shp">shp</code></td>
<td>
<p>Character. Path to the shapefile defining the subset. Ending needs
to be *.shp.</p>
</td></tr>
<tr><td><code id="ebv_read_shp_+3A_outputpath">outputpath</code></td>
<td>
<p>Character. Default: NULL, returns the data as a SpatRaster
object in memory. Optional: set path to write subset as GeoTiff on disk.</p>
</td></tr>
<tr><td><code id="ebv_read_shp_+3A_touches">touches</code></td>
<td>
<p>Logical. Default: TRUE, all pixels touched by the polygon(s)
will be updated. Set to FALSE to only include pixels that are on the line
render path or have center points inside the polygon(s).</p>
</td></tr>
<tr><td><code id="ebv_read_shp_+3A_scenario">scenario</code></td>
<td>
<p>Character or integer. Optional. Default: NULL. Define the
scenario you want to access. If the EBV netCDF has no scenarios, leave the
default value (NULL). You can use an integer value defining the scenario or
give the name of the scenario as a character string. To check the available
scenarios and their name or number (integer), use
<code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_read_shp_+3A_metric">metric</code></td>
<td>
<p>Character or integer. Optional. Define the metric you want to
access. You can use an integer value defining the metric or give the name
of the scenario as a character string. To check the available metrics and
their name or number (integer), use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_read_shp_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. Default: FALSE. Set to TRUE to overwrite the
outputfile defined by 'outputpath'.</p>
</td></tr>
<tr><td><code id="ebv_read_shp_+3A_ignore_ram">ignore_RAM</code></td>
<td>
<p>Logical. Default: FALSE. Checks if there is enough space in
your memory to read the data. Can be switched off (set to TRUE).</p>
</td></tr>
<tr><td><code id="ebv_read_shp_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a SpatRaster object if no output path is given. Otherwise the
subset is written onto the disk and the ouput path is returned.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ebv_read_bb">ebv_read_bb()</a></code> for subsetting via bounding box.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#set path to EBV netCDF
file &lt;- system.file(file.path("extdata","martins_comcom_subset.nc"), package="ebvcube")
#get all datacubepaths of EBV netCDF
datacubes &lt;- ebv_datacubepaths(file, verbose=FALSE)

#set path to shp file - cameroon country borders
shp_path &lt;- system.file(file.path("extdata","cameroon.shp"), package="ebvcube")


#read subset - return SpatRaster
cSAR_cameroon &lt;- ebv_read_shp(filepath = file, datacubepath = datacubes[1,1],
                             entity = 1, timestep = 1, shp = shp_path,
                             outputpath = NULL, ignore_RAM = TRUE)

</code></pre>

<hr>
<h2 id='ebv_resample'>Change the resolution of the data of an EBV netCDF</h2><span id='topic+ebv_resample'></span>

<h3>Description</h3>

<p>Change the resolution of one datacube of a EBV netCDF based on
another EBV netCDF or a given resolution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebv_resample(
  filepath_src,
  datacubepath_src = NULL,
  entity_src = NULL,
  timestep_src = 1,
  resolution,
  outputpath,
  method = "bilinear",
  scenario = NULL,
  metric = NULL,
  return_raster = FALSE,
  overwrite = FALSE,
  ignore_RAM = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebv_resample_+3A_filepath_src">filepath_src</code></td>
<td>
<p>Character. Path to the netCDF file whose resolution
should be changed.</p>
</td></tr>
<tr><td><code id="ebv_resample_+3A_datacubepath_src">datacubepath_src</code></td>
<td>
<p>Character. Optional. Default: NULL. Path to the
datacube (use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>). Alternatively, you can use
the scenario and metric argument to define which cube you want to access.</p>
</td></tr>
<tr><td><code id="ebv_resample_+3A_entity_src">entity_src</code></td>
<td>
<p>Character or Integer. Default is NULL. If the structure is
3D, the entity argument is set to NULL. Else, a character string or single
integer value must indicate the entity of the 4D structure of the EBV
netCDFs.</p>
</td></tr>
<tr><td><code id="ebv_resample_+3A_timestep_src">timestep_src</code></td>
<td>
<p>Integer or character. Select one or several timestep(s).
Either provide an integer value or list of values that refer(s) to the
index of the timestep(s) (minimum value: 1) or provide a date or list of
dates in ISO format, such as '2015-01-01'.</p>
</td></tr>
<tr><td><code id="ebv_resample_+3A_resolution">resolution</code></td>
<td>
<p>Character or Numeric. Either the path to an EBV netCDF file
that determines the resolution (character) or the resolution defined
directly (numeric). The vector defining the resolution directly must
contain three elements: the x-resolution, the y-resolution and the
corresponding EPSG code, e.g. c(0.25, 0.25, 4326).</p>
</td></tr>
<tr><td><code id="ebv_resample_+3A_outputpath">outputpath</code></td>
<td>
<p>Character. Set path to write data as GeoTiff on disk.</p>
</td></tr>
<tr><td><code id="ebv_resample_+3A_method">method</code></td>
<td>
<p>Character. Default: bilinear. Define resampling method. Choose
from: &quot;near&quot;,&quot;bilinear&quot;,&quot;cubic&quot;, &quot;cubicspline&quot;, &quot;lanczos&quot;, &quot;sum&quot;, &quot;min&quot;,
&quot;q1&quot;, &quot;med&quot;, &quot;q3&quot;, &quot;max&quot;, &quot;average&quot;, &quot;mode&quot; and &quot;rms&quot;. For categorical
data, use 'near'. Based on <code><a href="terra.html#topic+project">terra::project()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_resample_+3A_scenario">scenario</code></td>
<td>
<p>Character or integer. Optional. Default: NULL. Define the
scenario you want to access. If the EBV netCDF has no scenarios, leave the
default value (NULL). You can use an integer value defining the scenario or
give the name of the scenario as a character string. To check the available
scenarios and their name or number (integer), use
<code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_resample_+3A_metric">metric</code></td>
<td>
<p>Character or integer. Optional. Define the metric you want to
access. You can use an integer value defining the metric or give the name
of the scenario as a character string. To check the available metrics and
their name or number (integer), use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_resample_+3A_return_raster">return_raster</code></td>
<td>
<p>Logical. Default: FALSE. Set to TRUE to directly get the
corresponding SpatRaster object.</p>
</td></tr>
<tr><td><code id="ebv_resample_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. Default: FALSE. Set to TRUE to overwrite the output
file defined by 'outputpath'.</p>
</td></tr>
<tr><td><code id="ebv_resample_+3A_ignore_ram">ignore_RAM</code></td>
<td>
<p>Logical. Default: FALSE. Checks if there is enough space in
your memory to read the data. Can be switched off (set to TRUE).</p>
</td></tr>
<tr><td><code id="ebv_resample_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Default: returns the output path of the GeoTiff with the new
resolution. Optional: return the SpatRaster object with the new resolution.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#set path to EBV netCDF
file &lt;- system.file(file.path("extdata","martins_comcom_subset.nc"),
                    package="ebvcube")
#get all datacubepaths of EBV netCDF
datacubes &lt;- ebv_datacubepaths(file, verbose=FALSE)

#define different resolutions
res1 &lt;- system.file(file.path("extdata",
        "baisero_spepop_id5_20220405_v1_empty.nc"), package="ebvcube")
res2 &lt;- c(0.5,0.5,4326)
#define output path
out &lt;- file.path(system.file(package='ebvcube'),"extdata","changeRes.tif")

## Not run: 
#resample defining the resolution and EPSG code by hand - return SpatRaster
data_raster &lt;- ebv_resample(filepath_src = file, datacubepath_src = datacubes[1,1],
                            entity_src=1, timestep_src = 1, resolution = res2,
                            outputpath = out, method='near', return_raster=TRUE,
                            overwrite=TRUE)
#resample using a netCDF file - return GeoTiff
ebv_resample(filepath_src = file, datacubepath_src = datacubes[1,1],
             entity_src=1, timestep_src = 1, resolution = res1,
             outputpath = out, overwrite=TRUE)


## End(Not run)
</code></pre>

<hr>
<h2 id='ebv_trend'>Plot the trend of an EBV netCDF</h2><span id='topic+ebv_trend'></span>

<h3>Description</h3>

<p>Plot the trend of one datacube of a EBV netCDF over time
(x-axis). Different options can be chosen based on the <code>method</code> argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebv_trend(
  filepath,
  datacubepath = NULL,
  entity = NULL,
  method = "mean",
  subset = NULL,
  color = "dodgerblue4",
  touches = TRUE,
  scenario = NULL,
  metric = NULL,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebv_trend_+3A_filepath">filepath</code></td>
<td>
<p>Character. Path to the netCDF file.</p>
</td></tr>
<tr><td><code id="ebv_trend_+3A_datacubepath">datacubepath</code></td>
<td>
<p>Character. Optional. Default: NULL. Path to the datacube
(use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>). Alternatively, you can use the
scenario and metric argument to define which cube you want to access.</p>
</td></tr>
<tr><td><code id="ebv_trend_+3A_entity">entity</code></td>
<td>
<p>Character or Integer. Default is NULL. If the structure is 3D,
the entity argument is set to NULL. Else, a character string or single
integer value must indicate the entity of the 4D structure of the EBV
netCDFs.</p>
</td></tr>
<tr><td><code id="ebv_trend_+3A_method">method</code></td>
<td>
<p>Character. Default: mean. Choose one of the following options
for different plots: mean, min, max, boxplot. See <strong>Note</strong> for more</p>
</td></tr>
<tr><td><code id="ebv_trend_+3A_subset">subset</code></td>
<td>
<p>Character. Default: NULL. If you want to look at the trend for
a spatial subset, define the path to the shapefile encompassing the area.
Ending needs to be *.shp.</p>
</td></tr>
<tr><td><code id="ebv_trend_+3A_color">color</code></td>
<td>
<p>Character. Default: dodgerblue4. Change to any color known by R
<code><a href="grDevices.html#topic+colors">grDevices::colors()</a></code></p>
</td></tr>
<tr><td><code id="ebv_trend_+3A_touches">touches</code></td>
<td>
<p>Logical. Optional. Default: TRUE. Only relevant if the subset is
indicated by a shapefile. See <code><a href="#topic+ebv_read_shp">ebv_read_shp()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_trend_+3A_scenario">scenario</code></td>
<td>
<p>Character or integer. Optional. Default: NULL. Define the
scenario you want to access. If the EBV netCDF has no scenarios, leave the
default value (NULL). You can use an integer value defining the scenario or
give the name of the scenario as a character string. To check the available
scenarios and their name or number (integer), use
<code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_trend_+3A_metric">metric</code></td>
<td>
<p>Character or integer. Optional. Define the metric you want to
access. You can use an integer value defining the metric or give the name
of the scenario as a character string. To check the available metrics and
their name or number (integer), use <code><a href="#topic+ebv_datacubepaths">ebv_datacubepaths()</a></code>.</p>
</td></tr>
<tr><td><code id="ebv_trend_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns plots and eventually values based on the <code>method</code> argument.
See <strong>Note</strong> for more information
</p>


<h3>Note</h3>

<p>More information on the <code>method</code> argument: using <code>mean</code> will result in
a plot of the mean over time, additionally a vector of the mean values is
returned. If the data encompasses only one timestep a single mean is
returned. Corresponding behavior can be expected for <code>min</code> and <code>max</code>. The
<code>boxplot</code> option results in boxplots over time (no values are returned).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#set path to EBV netCDF
file &lt;- system.file(file.path("extdata","martins_comcom_subset.nc"), package="ebvcube")
#get all datacubepaths of EBV netCDF
datacubes &lt;- ebv_datacubepaths(file, verbose=FALSE)


#plot the change of the mean over time of the first datacube
ebv_trend(filepath = file, datacubepath = datacubes[1,1], entity = 1)

</code></pre>

<hr>
<h2 id='ebv_write'>Write the extracted data on your disk as a GeoTiff</h2><span id='topic+ebv_write'></span>

<h3>Description</h3>

<p>After you extracted data from the EBV netCDF and worked with it
this function gives you the possibility to write it to disk as a GeoTiff.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ebv_write(
  data,
  outputpath,
  epsg = 4326,
  extent = c(-180, 180, -90, 90),
  type = "FLT8S",
  overwrite = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ebv_write_+3A_data">data</code></td>
<td>
<p>Your data object. May be SpatRaster, array, DelayedMatrix or list
of DelayedMatrix (see return values of <code><a href="#topic+ebv_read">ebv_read()</a></code>)</p>
</td></tr>
<tr><td><code id="ebv_write_+3A_outputpath">outputpath</code></td>
<td>
<p>Character. Set the path where you want to write the data to
disk as a GeoTiff. Ending needs to be *.tif.</p>
</td></tr>
<tr><td><code id="ebv_write_+3A_epsg">epsg</code></td>
<td>
<p>Integer. Default: 4326 (WGS84). Defines the coordinate reference
system via the corresponding epsg code.</p>
</td></tr>
<tr><td><code id="ebv_write_+3A_extent">extent</code></td>
<td>
<p>Numeric. Default: c(-180,180,-90,90). Defines the extent of the
data: c(xmin, xmax, ymin, ymax).</p>
</td></tr>
<tr><td><code id="ebv_write_+3A_type">type</code></td>
<td>
<p>Character. Default is FLT8S Indicate the datatype of the GeoTiff
file. Possible values: INT1S, INT2S, INT2U, INT4S, INT4U, FLT4S, FLT8S.</p>
</td></tr>
<tr><td><code id="ebv_write_+3A_overwrite">overwrite</code></td>
<td>
<p>Locigal. Default: FALSE. Set to TRUE to overwrite the
outputfile defined by 'outputpath'.</p>
</td></tr>
<tr><td><code id="ebv_write_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the outputpath.
</p>


<h3>Note</h3>

<p>If the nodata value of your data is not detected correctly, this could
be due to the wrong choice of the datatype (type argument).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#set path to EBV netCDF
file &lt;- system.file(file.path("extdata","martins_comcom_subset.nc"), package="ebvcube")
#get all datacubepaths of EBV netCDF
datacubes &lt;- ebv_datacubepaths(file, verbose=FALSE)

## Not run: 
#read data
data &lt;- ebv_read(filepath = file, datacubepath = datacubes[1,1], timestep = 1, entity = 1)
# HERE YOU CAN WORK WITH YOUR DATA

#write data to disk as GeoTiff
out &lt;- file.path(system.file(package='ebvcube'),"extdata","write_data.tif")
ebv_write(data = data, outputpath = out, overwrite = TRUE)

#read a subset
data_bb &lt;- ebv_read_bb(filepath = file, datacubepath = datacubes[1,1],
                       entity = 1, timestep = 1:3, bb = c(-26, 64, 30, 38))

#write subset to disk as GeoTiff
ebv_write(data = data_bb, outputpath = out, extent = c(-26, 64, 30, 38), overwrite = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='world_boundaries'>Simple outlines of world countries</h2><span id='topic+world_boundaries'></span>

<h3>Description</h3>

<p>Simple outlines of world countries
</p>


<h3>Usage</h3>

<pre><code class='language-R'>world_boundaries
</code></pre>


<h3>Format</h3>

<p>A data.frame with 177 elements and geometry as WKT
</p>


<h3>Source</h3>

<p>Data downloaded from
<a href="https://www.naturalearthdata.com/downloads/110m-cultural-vectors/110m-admin-0-countries/">Natural
Earth</a>. Used version 4.0.0 and reduced attributes.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
