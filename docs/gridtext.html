<!DOCTYPE html><html><head><title>Help for package gridtext</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gridtext}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#gridtext'><p>Improved text rendering support for grid graphics</p></a></li>
<li><a href='#richtext_grob'><p>Draw formatted text labels</p></a></li>
<li><a href='#textbox_grob'><p>Draw formatted multi-line text with word wrap</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Improved Text Rendering Support for 'Grid' Graphics</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.5</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides support for rendering of formatted text using 'grid' graphics. Text can be
    formatted via a minimal subset of 'Markdown', 'HTML', and inline 'CSS' directives, and it can be
    rendered both with and without word wrap.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://wilkelab.org/gridtext/">https://wilkelab.org/gridtext/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/wilkelab/gridtext/issues">https://github.com/wilkelab/gridtext/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>Imports:</td>
<td>curl, grid, grDevices, markdown, rlang, Rcpp, png, jpeg,
stringr, xml2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, knitr, rmarkdown, testthat, vdiffr</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>C++11</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-09-15 13:49:42 UTC; brentonw</td>
</tr>
<tr>
<td>Author:</td>
<td>Claus O. Wilke <a href="https://orcid.org/0000-0002-7470-9261"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Brenton M. Wiernik
    <a href="https://orcid.org/0000-0001-9560-6336"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]
    (@bmwiernik)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Brenton M. Wiernik &lt;brenton@wiernik.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-09-16 11:16:15 UTC</td>
</tr>
</table>
<hr>
<h2 id='gridtext'>Improved text rendering support for grid graphics</h2><span id='topic+gridtext'></span>

<h3>Description</h3>

<p>The gridtext package provides two new grobs, <code><a href="#topic+richtext_grob">richtext_grob()</a></code> and
<code><a href="#topic+textbox_grob">textbox_grob()</a></code>, which support drawing of formatted text labels and
formatted text boxes, respectively.
</p>

<hr>
<h2 id='richtext_grob'>Draw formatted text labels</h2><span id='topic+richtext_grob'></span>

<h3>Description</h3>

<p>This grob acts mostly as a drop-in replacement for <code><a href="grid.html#topic+grid.text">grid::textGrob()</a></code>
but provides more sophisticated formatting. The grob can handle basic
markdown and HTML formatting directives, and it can also draw
boxes around each piece of text. Note that this grob <strong>does not</strong> draw
<a href="grDevices.html#topic+plotmath">plotmath</a> expressions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>richtext_grob(
  text,
  x = unit(0.5, "npc"),
  y = unit(0.5, "npc"),
  hjust = 0.5,
  vjust = 0.5,
  halign = hjust,
  valign = vjust,
  rot = 0,
  default.units = "npc",
  margin = unit(c(0, 0, 0, 0), "pt"),
  padding = unit(c(0, 0, 0, 0), "pt"),
  r = unit(0, "pt"),
  align_widths = FALSE,
  align_heights = FALSE,
  name = NULL,
  gp = gpar(),
  box_gp = gpar(col = NA),
  vp = NULL,
  use_markdown = TRUE,
  debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="richtext_grob_+3A_text">text</code></td>
<td>
<p>Character vector containing Markdown/HTML strings to draw.</p>
</td></tr>
<tr><td><code id="richtext_grob_+3A_x">x</code>, <code id="richtext_grob_+3A_y">y</code></td>
<td>
<p>Unit objects specifying the location of the reference point.</p>
</td></tr>
<tr><td><code id="richtext_grob_+3A_hjust">hjust</code>, <code id="richtext_grob_+3A_vjust">vjust</code></td>
<td>
<p>Numerical values specifying the justification
of the text boxes relative to <code>x</code> and <code>y</code>. These justification parameters
are specified in the internal reference frame of the text boxes, so that,
for example, <code>hjust</code> adjusts the vertical justification when the
text is rotated 90 degrees to the left or right.</p>
</td></tr>
<tr><td><code id="richtext_grob_+3A_halign">halign</code>, <code id="richtext_grob_+3A_valign">valign</code></td>
<td>
<p>Numerical values specifying the text justification
inside the text boxes. If not specified, these default to <code>hjust</code> and
<code>vjust</code>.</p>
</td></tr>
<tr><td><code id="richtext_grob_+3A_rot">rot</code></td>
<td>
<p>Angle of rotation for text, in degrees.</p>
</td></tr>
<tr><td><code id="richtext_grob_+3A_default.units">default.units</code></td>
<td>
<p>Units of <code>x</code> and <code>y</code> if these are provided only as
numerical values.</p>
</td></tr>
<tr><td><code id="richtext_grob_+3A_margin">margin</code>, <code id="richtext_grob_+3A_padding">padding</code></td>
<td>
<p>Unit vectors of four elements each indicating the
margin and padding around each text label in the order top, right,
bottom, left. Margins are drawn outside the enclosing box (if any),
and padding is drawn inside. To avoid rendering artifacts, it is best
to specify these values in absolute units (such as points, mm, or inch)
rather than in relative units (such as npc).</p>
</td></tr>
<tr><td><code id="richtext_grob_+3A_r">r</code></td>
<td>
<p>The radius of the rounded corners. To avoid rendering artifacts,
it is best to specify this in absolute units (such as points, mm, or inch)
rather than in relative units (such as npc).</p>
</td></tr>
<tr><td><code id="richtext_grob_+3A_align_widths">align_widths</code>, <code id="richtext_grob_+3A_align_heights">align_heights</code></td>
<td>
<p>Should the widths and heights of all
the text boxes be aligned? Default is no.</p>
</td></tr>
<tr><td><code id="richtext_grob_+3A_name">name</code></td>
<td>
<p>Name of the grob.</p>
</td></tr>
<tr><td><code id="richtext_grob_+3A_gp">gp</code></td>
<td>
<p>Other graphical parameters for drawing.</p>
</td></tr>
<tr><td><code id="richtext_grob_+3A_box_gp">box_gp</code></td>
<td>
<p>Graphical parameters for the enclosing box around each text label.</p>
</td></tr>
<tr><td><code id="richtext_grob_+3A_vp">vp</code></td>
<td>
<p>Viewport.</p>
</td></tr>
<tr><td><code id="richtext_grob_+3A_use_markdown">use_markdown</code></td>
<td>
<p>Should the <code>text</code> input be treated as markdown? Default
is yes.</p>
</td></tr>
<tr><td><code id="richtext_grob_+3A_debug">debug</code></td>
<td>
<p>Should debugging info be drawn? Default is no.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A grid <code><a href="grid.html#topic+grob">grob</a></code> that represents the formatted text.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+textbox_grob">textbox_grob()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(grid)

text &lt;- c(
  "Some text **in bold.**", "Linebreaks&lt;br&gt;Linebreaks&lt;br&gt;Linebreaks",
  "*x*&lt;sup&gt;2&lt;/sup&gt; + 5*x* + *C*&lt;sub&gt;*i*&lt;/sub&gt;",
  "Some &lt;span style='color:blue'&gt;blue text **in bold.**&lt;/span&gt;&lt;br&gt;And *italics text.*&lt;br&gt;
   And some &lt;span style='font-size:18pt; color:black'&gt;large&lt;/span&gt; text."
)

x &lt;- c(.2, .1, .7, .9)
y &lt;- c(.8, .4, .1, .5)
rot &lt;- c(0, 0, 45, -45)
gp = gpar(col = c("black", "red"), fontfamily = c("Palatino", "Courier", "Times", "Helvetica"))
box_gp = gpar(col = "black", fill = c("cornsilk", NA, "lightblue1", NA), lty = c(0, 1, 1, 1))
hjust &lt;- c(0.5, 0, 0, 1)
vjust &lt;- c(0.5, 1, 0, 0.5)

g &lt;- richtext_grob(
  text, x, y, hjust = hjust, vjust = vjust, rot = rot,
  padding = unit(c(6, 6, 4, 6), "pt"),
  r = unit(c(0, 2, 4, 8), "pt"),
  gp = gp, box_gp = box_gp
)
grid.newpage()
grid.draw(g)
grid.points(x, y, default.units = "npc", pch = 19, size = unit(5, "pt"))

# multiple text labels with aligned boxes
text &lt;- c("January", "February", "March", "April", "May")
x &lt;- (1:5)/6 + 1/24
y &lt;- rep(0.8, 5)
g &lt;- richtext_grob(
  text, x, y, halign = 0, hjust = 1,
  rot = 45,
  padding = unit(c(3, 6, 1, 3), "pt"),
  r = unit(4, "pt"),
  align_widths = TRUE,
  box_gp = gpar(col = "black", fill = "cornsilk")
)
grid.newpage()
grid.draw(g)
grid.points(x, y, default.units = "npc", pch = 19, size = unit(5, "pt"))
</code></pre>

<hr>
<h2 id='textbox_grob'>Draw formatted multi-line text with word wrap</h2><span id='topic+textbox_grob'></span>

<h3>Description</h3>

<p>The function <code>textbox_grob()</code> is intended to render multi-line text
labels that require automatic word wrapping. It is similar to
<code><a href="#topic+richtext_grob">richtext_grob()</a></code>, but there are a few important differences. First,
while <code><a href="#topic+richtext_grob">richtext_grob()</a></code> is vectorized, <code>textbox_grob()</code> is not. It
can draw only a single text box at a time. Second, <code>textbox_grob()</code>
doesn't support rendering the text box at arbitrary angles. Only
four different orientations are supported, corresponding to a
rotation by 0, 90, 180, and 270 degrees.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>textbox_grob(
  text,
  x = NULL,
  y = NULL,
  width = unit(1, "npc"),
  height = NULL,
  minwidth = NULL,
  maxwidth = NULL,
  minheight = NULL,
  maxheight = NULL,
  hjust = 0.5,
  vjust = 0.5,
  halign = 0,
  valign = 1,
  default.units = "npc",
  margin = unit(c(0, 0, 0, 0), "pt"),
  padding = unit(c(0, 0, 0, 0), "pt"),
  r = unit(0, "pt"),
  orientation = c("upright", "left-rotated", "right-rotated", "inverted"),
  name = NULL,
  gp = gpar(),
  box_gp = gpar(col = NA),
  vp = NULL,
  use_markdown = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="textbox_grob_+3A_text">text</code></td>
<td>
<p>Character vector containing Markdown/HTML string to draw.</p>
</td></tr>
<tr><td><code id="textbox_grob_+3A_x">x</code>, <code id="textbox_grob_+3A_y">y</code></td>
<td>
<p>Unit objects specifying the location of the reference point.
If set to <code>NULL</code> (the default), these values are chosen based on the
values of <code>hjust</code> and <code>vjust</code> such that the box is appropriately
justified in the enclosing viewport.</p>
</td></tr>
<tr><td><code id="textbox_grob_+3A_width">width</code>, <code id="textbox_grob_+3A_height">height</code></td>
<td>
<p>Unit objects specifying width and height of the
grob. A value of <code>NULL</code> means take up exactly the space necessary
to render all content. Use a value of <code>unit(1, "npc")</code> to have the
box take up all available space.</p>
</td></tr>
<tr><td><code id="textbox_grob_+3A_minwidth">minwidth</code>, <code id="textbox_grob_+3A_minheight">minheight</code>, <code id="textbox_grob_+3A_maxwidth">maxwidth</code>, <code id="textbox_grob_+3A_maxheight">maxheight</code></td>
<td>
<p>Min and max values for
width and height. Set to <code>NULL</code> to impose neither a minimum nor
a maximum. Note: <code>minheight</code> and <code>maxheight</code> do not work if <code>width = NULL</code>.</p>
</td></tr>
<tr><td><code id="textbox_grob_+3A_hjust">hjust</code>, <code id="textbox_grob_+3A_vjust">vjust</code></td>
<td>
<p>Numerical values specifying the justification
of the text box relative to the reference point defined by <code>x</code> and <code>y</code>. These
justification parameters are specified in the internal reference frame of
the text box, so that, for example, <code>hjust</code> adjusts the vertical
justification when the text box is left- or right-rotated.</p>
</td></tr>
<tr><td><code id="textbox_grob_+3A_halign">halign</code>, <code id="textbox_grob_+3A_valign">valign</code></td>
<td>
<p>Numerical values specifying the justification of the text
inside the text box.</p>
</td></tr>
<tr><td><code id="textbox_grob_+3A_default.units">default.units</code></td>
<td>
<p>Units of <code>x</code>, <code>y</code>, <code>width</code>, <code>height</code>, <code>minwidth</code>,
<code>minheight</code>, <code>maxwidth</code>, <code>maxheight</code> if these are provided only as
numerical values.</p>
</td></tr>
<tr><td><code id="textbox_grob_+3A_margin">margin</code>, <code id="textbox_grob_+3A_padding">padding</code></td>
<td>
<p>Unit vectors of four elements each indicating the
margin and padding around each text label in the order top, right,
bottom, left. Margins are drawn outside the enclosing box (if any),
and padding is drawn inside. To avoid rendering artifacts, it is best
to specify these values in absolute units (such as points, mm, or inch)
rather than in relative units (such as npc).</p>
</td></tr>
<tr><td><code id="textbox_grob_+3A_r">r</code></td>
<td>
<p>The radius of the rounded corners. To avoid rendering artifacts,
it is best to specify this in absolute units (such as points, mm, or inch)
rather than in relative units (such as npc).</p>
</td></tr>
<tr><td><code id="textbox_grob_+3A_orientation">orientation</code></td>
<td>
<p>Orientation of the box. Allowed values are <code>"upright"</code>,
<code>"left-rotated"</code>, <code>"right-rotated"</code>, and <code>"inverted"</code>, corresponding to
a rotation by 0, 90, 270, and 180 degrees counter-clockwise, respectively.</p>
</td></tr>
<tr><td><code id="textbox_grob_+3A_name">name</code></td>
<td>
<p>Name of the grob.</p>
</td></tr>
<tr><td><code id="textbox_grob_+3A_gp">gp</code></td>
<td>
<p>Other graphical parameters for drawing.</p>
</td></tr>
<tr><td><code id="textbox_grob_+3A_box_gp">box_gp</code></td>
<td>
<p>Graphical parameters for the enclosing box around each text label.</p>
</td></tr>
<tr><td><code id="textbox_grob_+3A_vp">vp</code></td>
<td>
<p>Viewport.</p>
</td></tr>
<tr><td><code id="textbox_grob_+3A_use_markdown">use_markdown</code></td>
<td>
<p>Should the <code>text</code> input be treated as markdown?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A grid <code><a href="grid.html#topic+grob">grob</a></code> that represents the formatted text.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+richtext_grob">richtext_grob()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(grid)
g &lt;- textbox_grob(
  "**The quick brown fox jumps over the lazy dog.**&lt;br&gt;&lt;br&gt;
  The quick brown fox jumps over the lazy dog.
  The **quick &lt;span style='color:brown;'&gt;brown fox&lt;/span&gt;** jumps over the lazy dog.
  The quick brown fox jumps over the lazy dog.",
  x = unit(0.5, "npc"), y = unit(0.7, "npc"), halign = 0, valign = 1,
  gp = gpar(fontsize = 15),
  box_gp = gpar(col = "black", fill = "lightcyan1"),
  r = unit(5, "pt"),
  padding = unit(c(10, 10, 10, 10), "pt"),
  margin = unit(c(0, 10, 0, 10), "pt")
)
grid.newpage()
grid.draw(g)

# internal vs. external alignment
g1 &lt;- textbox_grob(
  "The quick brown fox jumps over the lazy dog.",
  hjust = 0, vjust = 1, halign = 0, valign = 1,
  width = unit(1.5, "inch"), height = unit(1.5, "inch"),
  box_gp = gpar(col = "black", fill = "cornsilk"),
  padding = unit(c(2, 2, 2, 2), "pt"),
  margin = unit(c(5, 5, 5, 5), "pt")
)
g2 &lt;- textbox_grob(
  "The quick brown fox jumps over the lazy dog.",
  hjust = 1, vjust = 1, halign = 0.5, valign = 0.5,
  width = unit(1.5, "inch"), height = unit(1.5, "inch"),
  box_gp = gpar(col = "black", fill = "cornsilk"),
  padding = unit(c(2, 2, 2, 2), "pt"),
  margin = unit(c(5, 5, 5, 5), "pt")
)
g3 &lt;- textbox_grob(
  "The quick brown fox jumps over the lazy dog.",
  hjust = 0, vjust = 0, halign = 1, valign = 1,
  width = unit(1.5, "inch"), height = unit(1.5, "inch"),
  box_gp = gpar(col = "black", fill = "cornsilk"),
  padding = unit(c(2, 2, 2, 2), "pt"),
  margin = unit(c(5, 5, 5, 5), "pt")
)
g4 &lt;- textbox_grob(
  "The quick brown fox jumps over the lazy dog.",
  hjust = 1, vjust = 0, halign = 0, valign = 0,
  width = unit(1.5, "inch"), height = unit(1.5, "inch"),
  box_gp = gpar(col = "black", fill = "cornsilk"),
  padding = unit(c(2, 2, 2, 2), "pt"),
  margin = unit(c(5, 5, 5, 5), "pt")
)
grid.newpage()
grid.draw(g1)
grid.draw(g2)
grid.draw(g3)
grid.draw(g4)

# internal vs. external alignment, with rotated boxes
g1 &lt;- textbox_grob(
  "The quick brown fox jumps over the lazy dog.",
  hjust = 1, vjust = 1, halign = 0, valign = 1,
  width = unit(1.5, "inch"), height = unit(1.5, "inch"),
  orientation = "left-rotated",
  box_gp = gpar(col = "black", fill = "cornsilk"),
  padding = unit(c(2, 2, 2, 2), "pt"),
  margin = unit(c(5, 5, 5, 5), "pt")
)
g2 &lt;- textbox_grob(
  "The quick brown fox jumps over the lazy dog.",
  hjust = 0, vjust = 1, halign = 0.5, valign = 0.5,
  width = unit(1.5, "inch"), height = unit(1.5, "inch"),
  orientation = "right-rotated",
  box_gp = gpar(col = "black", fill = "cornsilk"),
  padding = unit(c(2, 2, 2, 2), "pt"),
  margin = unit(c(5, 5, 5, 5), "pt")
)
g3 &lt;- textbox_grob(
  "The quick brown fox jumps over the lazy dog.",
  hjust = 1, vjust = 1, halign = 1, valign = 1,
  width = unit(1.5, "inch"), height = unit(1.5, "inch"),
  orientation = "inverted",
  box_gp = gpar(col = "black", fill = "cornsilk"),
  padding = unit(c(2, 2, 2, 2), "pt"),
  margin = unit(c(5, 5, 5, 5), "pt")
)
g4 &lt;- textbox_grob(
  "The quick brown fox jumps over the lazy dog.",
  hjust = 1, vjust = 0, halign = 0, valign = 0,
  width = unit(1.5, "inch"), height = unit(1.5, "inch"),
  orientation = "upright",
  box_gp = gpar(col = "black", fill = "cornsilk"),
  padding = unit(c(2, 2, 2, 2), "pt"),
  margin = unit(c(5, 5, 5, 5), "pt")
)
grid.newpage()
grid.draw(g1)
grid.draw(g2)
grid.draw(g3)
grid.draw(g4)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
