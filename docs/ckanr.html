<!DOCTYPE html><html><head><title>Help for package ckanr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ckanr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ckanr-package'><p>R client for the CKAN API</p></a></li>
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#as.ckan_group'><p>ckan_group class helpers</p></a></li>
<li><a href='#as.ckan_organization'><p>ckan_organization class helpers</p></a></li>
<li><a href='#as.ckan_package'><p>ckan_package class helpers</p></a></li>
<li><a href='#as.ckan_related'><p>ckan_related class helpers</p></a></li>
<li><a href='#as.ckan_resource'><p>ckan_resource class helpers</p></a></li>
<li><a href='#as.ckan_tag'><p>ckan_tag class helpers</p></a></li>
<li><a href='#as.ckan_user'><p>ckan_user class helpers</p></a></li>
<li><a href='#changes'><p>Get an activity stream of recently changed datasets on a site.</p></a></li>
<li><a href='#ckan_classes'><p>ckanr S3 classes</p></a></li>
<li><a href='#ckan_fetch'><p>Download a file</p></a></li>
<li><a href='#ckan_info'><p>Get information on a CKAN server</p></a></li>
<li><a href='#ckanr_settings'><p>Get or set ckanr CKAN settings</p></a></li>
<li><a href='#ckanr_setup'><p>Configure default CKAN settings</p></a></li>
<li><a href='#ckanr-deprecated'><p>Deprecated functions in <span class="pkg">ckanr</span></p></a></li>
<li><a href='#dashboard_activity_list'><p>Authorized user's dashboard activity stream</p></a></li>
<li><a href='#dashboard_count'><p>Number of new activities of an authorized user</p></a></li>
<li><a href='#ds_create'><p>Add a new table to a datastore</p></a></li>
<li><a href='#ds_create_dataset'><p>Datastore - create a new resource on an existing dataset</p></a></li>
<li><a href='#ds_search'><p>Datastore - search or get a dataset from CKAN datastore</p></a></li>
<li><a href='#ds_search_sql'><p>Datastore - search or get a dataset from CKAN datastore</p></a></li>
<li><a href='#group_create'><p>Create a group</p></a></li>
<li><a href='#group_delete'><p>Delete a group</p></a></li>
<li><a href='#group_list'><p>List groups.</p></a></li>
<li><a href='#group_patch'><p>Update a group's metadata</p></a></li>
<li><a href='#group_show'><p>Show a package</p></a></li>
<li><a href='#group_update'><p>Update a group</p></a></li>
<li><a href='#license_list'><p>Return the list of licenses available for datasets on the site.</p></a></li>
<li><a href='#organization_create'><p>Create an organization</p></a></li>
<li><a href='#organization_delete'><p>Delete an organization</p></a></li>
<li><a href='#organization_list'><p>List organization</p></a></li>
<li><a href='#organization_purge'><p>Purge an organization</p></a></li>
<li><a href='#organization_show'><p>Show an organization</p></a></li>
<li><a href='#package_activity_list'><p>Return a list of the package's activity</p></a></li>
<li><a href='#package_create'><p>Create a package</p></a></li>
<li><a href='#package_delete'><p>Delete a package</p></a></li>
<li><a href='#package_list'><p>List datasets.</p></a></li>
<li><a href='#package_list_current'><p>List current packages with resources.</p></a></li>
<li><a href='#package_patch'><p>Update a package's metadata</p></a></li>
<li><a href='#package_revision_list'><p>Return a dataset (package's) revisions as a list of dictionaries.</p></a></li>
<li><a href='#package_search'><p>Search for packages.</p></a></li>
<li><a href='#package_show'><p>Show a package.</p></a></li>
<li><a href='#package_update'><p>Update a package</p></a></li>
<li><a href='#ping'><p>Ping a CKAN server to test that it's up or down.</p></a></li>
<li><a href='#related_create'><p>Create a related item</p></a></li>
<li><a href='#related_delete'><p>Delete a related item.</p></a></li>
<li><a href='#related_list'><p>List related items</p></a></li>
<li><a href='#related_show'><p>Show a related item</p></a></li>
<li><a href='#related_update'><p>Update a related item</p></a></li>
<li><a href='#resource_create'><p>Create a resource</p></a></li>
<li><a href='#resource_delete'><p>Delete a resource.</p></a></li>
<li><a href='#resource_patch'><p>Update a resource's metadata</p></a></li>
<li><a href='#resource_search'><p>Search for resources.</p></a></li>
<li><a href='#resource_show'><p>Show a resource.</p></a></li>
<li><a href='#resource_update'><p>Update a resource</p></a></li>
<li><a href='#revision_list'><p>Return a list of the IDs of the site's revisions.</p></a></li>
<li><a href='#servers'><p>CKAN server URLS and other info</p></a></li>
<li><a href='#src_ckan'><p>Connect to CKAN with dplyr</p></a></li>
<li><a href='#tag_create'><p>Create a tag</p></a></li>
<li><a href='#tag_list'><p>List tags.</p></a></li>
<li><a href='#tag_search'><p>Search tags.</p></a></li>
<li><a href='#tag_show'><p>Show a tag.</p></a></li>
<li><a href='#user_activity_list'><p>Return a list of a user's activities</p></a></li>
<li><a href='#user_create'><p>Create a user.</p></a></li>
<li><a href='#user_delete'><p>Delete a user.</p></a></li>
<li><a href='#user_followee_count'><p>Return a a user's follower count</p></a></li>
<li><a href='#user_follower_count'><p>Return a a user's follower count</p></a></li>
<li><a href='#user_follower_list'><p>Return a a user's follower count</p></a></li>
<li><a href='#user_list'><p>Return a list of the site's user accounts.</p></a></li>
<li><a href='#user_show'><p>Show a user.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Client for the Comprehensive Knowledge Archive Network ('CKAN')
API</td>
</tr>
<tr>
<td>Description:</td>
<td>Client for 'CKAN' API (<a href="https://ckan.org/">https://ckan.org/</a>). Includes interface
    to 'CKAN' 'APIs' for search, list, show for packages, organizations, and
    resources. In addition, provides an interface to the 'datastore' API.</td>
</tr>
<tr>
<td>Version:</td>
<td>0.7.0</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.ropensci.org/ckanr/">https://docs.ropensci.org/ckanr/</a> (website)
<a href="https://github.com/ropensci/ckanr">https://github.com/ropensci/ckanr</a> (devel)</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/ckanr/issues">https://github.com/ropensci/ckanr/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Depends:</td>
<td>DBI (&ge; 0.3.1)</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, stats, utils, crul, jsonlite (&ge; 0.9.17), dplyr (&ge;
0.7.0), dbplyr, magrittr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>sf, readxl, testthat, xml2, lazyeval</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>X-schema.org-keywords:</td>
<td>database, open-data, ckan, api, data, dataset</td>
</tr>
<tr>
<td>X-schema.org-applicationCategory:</td>
<td>Data Access</td>
</tr>
<tr>
<td>X-schema.org-isPartOf:</td>
<td>"https://ropensci.org"</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-03-16 18:09:11 UTC; macbook</td>
</tr>
<tr>
<td>Author:</td>
<td>Scott Chamberlain <a href="https://orcid.org/0000-0003-1444-9135"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Imanuel Costigan [aut],
  Wush Wu <a href="https://orcid.org/0000-0001-5180-0567"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Florian Mayer <a href="https://orcid.org/0000-0003-4269-4242"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Sharla Gelfand [aut],
  Francisco Alves <a href="https://orcid.org/0000-0003-3390-0534"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Francisco Alves &lt;fjunior.alves.oliveira@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-03-17 09:00:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='ckanr-package'>R client for the CKAN API</h2><span id='topic+ckanr-package'></span><span id='topic+ckanr'></span>

<h3>Description</h3>

<p>ckanr is a full client for the CKAN API, wrapping all
APIs, including for reading and writing data. Please get in touch
(<a href="https://github.com/ropensci/ckanr/issues">https://github.com/ropensci/ckanr/issues</a> or <a href="https://discuss.ropensci.org/">https://discuss.ropensci.org/</a>)
if you have problems, or have use cases that we don't cover yet.
</p>


<h3>CKAN API</h3>

<p>Document for the CKAN API is at <a href="https://docs.ckan.org/en/latest/api/index.html">https://docs.ckan.org/en/latest/api/index.html</a>.
We'll always be following the latest version of the API.
</p>


<h3>ckanr package API</h3>

<p>The functions can be grouped into those for setup, packages,
resources, tags, organizations, groups, and users.
</p>

<ul>
<li><p> Setup - The main one is <code><a href="#topic+ckanr_setup">ckanr_setup()</a></code> - and many related
functions, e.g., <code><a href="#topic+get_default_key">get_default_key()</a></code>
</p>
</li>
<li><p> Packages - Create a package with <code><a href="#topic+package_create">package_create()</a></code>, and see
other functions starting with <code style="white-space: pre;">&#8288;package_*&#8288;</code>
</p>
</li>
<li><p> Resources - Create a package with <code><a href="#topic+resource_create">resource_create()</a></code>, and see
other functions starting with <code style="white-space: pre;">&#8288;resource_*&#8288;</code>
</p>
</li>
<li><p> Tags - List tags with <code><a href="#topic+tag_list">tag_list()</a></code>, and see
other functions starting with <code style="white-space: pre;">&#8288;tag_*&#8288;</code>
</p>
</li>
<li><p> Organizations - List organizations with <code><a href="#topic+organization_list">organization_list()</a></code>,
show a specific organization with <code><a href="#topic+organization_show">organization_show()</a></code>, and
create with <code><a href="#topic+organization_create">organization_create()</a></code>
</p>
</li>
<li><p> Groups - List groups with <code><a href="#topic+group_list">group_list()</a></code>, and see
other functions starting with <code style="white-space: pre;">&#8288;group_*&#8288;</code>
</p>
</li>
<li><p> Users - List users with <code><a href="#topic+user_list">user_list()</a></code>, and see
other functions starting with <code style="white-space: pre;">&#8288;user_*&#8288;</code>
</p>
</li>
<li><p> Related items - See functions starting with <code style="white-space: pre;">&#8288;related_*&#8288;</code>
</p>
</li></ul>



<h3>Datastore</h3>

<p>We are also working on supporting the Datastore extension
(<a href="https://docs.ckan.org/en/latest/maintaining/datastore.html">https://docs.ckan.org/en/latest/maintaining/datastore.html</a>).
We currently have these functions:
</p>

<ul>
<li> <p><code><a href="#topic+ds_create">ds_create()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+ds_create_dataset">ds_create_dataset()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+ds_search">ds_search()</a></code>
</p>
</li>
<li> <p><code><a href="#topic+ds_search_sql">ds_search_sql()</a></code>
</p>
</li></ul>



<h3>Fetch</h3>

<p>Data can come back in a huge variety of formats. We've attempted a function to
help you fetch not just metadata but the actual data for a link to a file on
a CKAN instance. Though if you know what you're doing, you can easily use
whatever is your preferred tool for the job (e.g., maybe you like
<code><a href="utils.html#topic+read.csv">read.csv()</a></code> for reading csv files).
</p>


<h3>CKAN Instances</h3>

<p>We have a helper function (<code><a href="#topic+servers">servers()</a></code>) that spits out the current
CKAN instances we know about, with URLs to their base URLs that should work
using this package. That is, not necessarily landing pages of each instance,
although, the URL may be the landing page and the base API URL.
</p>


<h3>Author(s)</h3>

<p>Scott Chamberlain <a href="mailto:myrmecocystus@gmail.com">myrmecocystus@gmail.com</a>
</p>
<p>Florian Mayer <a href="mailto:florian.wendelin.mayer@gmail.com">florian.wendelin.mayer@gmail.com</a>
</p>
<p>Wush Wu
</p>
<p>Imanuel Costigan <a href="mailto:i.costigan@me.com">i.costigan@me.com</a>
</p>

<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>Pipe operator
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='as.ckan_group'>ckan_group class helpers</h2><span id='topic+as.ckan_group'></span><span id='topic+is.ckan_group'></span>

<h3>Description</h3>

<p>ckan_group class helpers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.ckan_group(x, ...)

is.ckan_group(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.ckan_group_+3A_x">x</code></td>
<td>
<p>Variety of things, character, list, or ckan_group class object</p>
</td></tr>
<tr><td><code id="as.ckan_group_+3A_...">...</code></td>
<td>
<p>Further args passed on to <code><a href="#topic+group_show">group_show()</a></code> if character given</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

(grps &lt;- group_list())
grps[[3]]

# create item class from only an item ID
as.ckan_group(grps[[3]]$id)

# gives back itself
(x &lt;- as.ckan_group(grps[[3]]$id))
as.ckan_group(x)

## End(Not run)
</code></pre>

<hr>
<h2 id='as.ckan_organization'>ckan_organization class helpers</h2><span id='topic+as.ckan_organization'></span><span id='topic+is.ckan_organization'></span>

<h3>Description</h3>

<p>ckan_organization class helpers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.ckan_organization(x, ...)

is.ckan_organization(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.ckan_organization_+3A_x">x</code></td>
<td>
<p>Variety of things, character, list, or ckan_organization class
object</p>
</td></tr>
<tr><td><code id="as.ckan_organization_+3A_...">...</code></td>
<td>
<p>Further args passed on to <code><a href="#topic+organization_show">organization_show()</a></code> if character
given</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ckanr_setup(url = "https://demo.ckan.org/",
key = getOption("ckan_demo_key"))

(orgs &lt;- organization_list(limit = 3))
orgs[[3]]

# create item class from only an item ID
as.ckan_organization(orgs[[3]]$id)

# gives back itself
(x &lt;- as.ckan_organization(orgs[[3]]$id))
as.ckan_organization(x)

## End(Not run)
</code></pre>

<hr>
<h2 id='as.ckan_package'>ckan_package class helpers</h2><span id='topic+as.ckan_package'></span><span id='topic+is.ckan_package'></span>

<h3>Description</h3>

<p>ckan_package class helpers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.ckan_package(x, ...)

is.ckan_package(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.ckan_package_+3A_x">x</code></td>
<td>
<p>Variety of things, character, list, or ckan_package class object</p>
</td></tr>
<tr><td><code id="as.ckan_package_+3A_...">...</code></td>
<td>
<p>Further args passed on to <code><a href="#topic+package_show">package_show()</a></code> if
character given. In particular, if GET is not supported you can
try the <code>http_method</code> parameter to set a different HTTP verb</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ckanr_setup(url = "https://demo.ckan.org/",
  key = getOption("ckan_demo_key"))

(pkgs &lt;- package_search())
pkgs$results
pkgs$results[[3]]

# create item class from only an item ID
as.ckan_package(pkgs$results[[3]]$id)

# gives back itself
(x &lt;- as.ckan_package(pkgs$results[[3]]$id))
as.ckan_package(x)

## End(Not run)
</code></pre>

<hr>
<h2 id='as.ckan_related'>ckan_related class helpers</h2><span id='topic+as.ckan_related'></span><span id='topic+is.ckan_related'></span>

<h3>Description</h3>

<p>ckan_related class helpers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.ckan_related(x, ...)

is.ckan_related(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.ckan_related_+3A_x">x</code></td>
<td>
<p>Variety of things, character, list, or ckan_related class object</p>
</td></tr>
<tr><td><code id="as.ckan_related_+3A_...">...</code></td>
<td>
<p>Further args passed on to <code><a href="#topic+related_show">related_show()</a></code> if character given</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ckanr_setup(url = "https://demo.ckan.org/",
key = getOption("ckan_demo_key"))

(x &lt;- package_create("foobbbbbarrrrr") %&gt;%
   related_create(title = "my resource",
                  type = "visualization"))

# create item class from only an item ID
as.ckan_related(x$id)

# gives back itself
(x &lt;- as.ckan_related(x$id))
as.ckan_related(x)

## End(Not run)
</code></pre>

<hr>
<h2 id='as.ckan_resource'>ckan_resource class helpers</h2><span id='topic+as.ckan_resource'></span><span id='topic+is.ckan_resource'></span>

<h3>Description</h3>

<p>ckan_resource class helpers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.ckan_resource(x, ...)

is.ckan_resource(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.ckan_resource_+3A_x">x</code></td>
<td>
<p>Variety of things, character, list, or ckan_package class object</p>
</td></tr>
<tr><td><code id="as.ckan_resource_+3A_...">...</code></td>
<td>
<p>Further args passed on to <code><a href="#topic+resource_show">resource_show()</a></code> if character given</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ckanr_setup(url = "https://demo.ckan.org/",
key = getOption("ckan_demo_key"))

(resrcs &lt;- resource_search(q = 'name:data'))
resrcs$results
resrcs$results[[3]]

# create item class from only an item ID
as.ckan_resource(resrcs$results[[3]]$id)

# gives back itself
(x &lt;- as.ckan_resource(resrcs$results[[3]]$id))
as.ckan_resource(x)

## End(Not run)
</code></pre>

<hr>
<h2 id='as.ckan_tag'>ckan_tag class helpers</h2><span id='topic+as.ckan_tag'></span><span id='topic+is.ckan_tag'></span>

<h3>Description</h3>

<p>ckan_tag class helpers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.ckan_tag(x, ...)

is.ckan_tag(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.ckan_tag_+3A_x">x</code></td>
<td>
<p>Variety of things, character, list, or ckan_tag class object</p>
</td></tr>
<tr><td><code id="as.ckan_tag_+3A_...">...</code></td>
<td>
<p>Further args passed on to <code><a href="#topic+tag_show">tag_show()</a></code> if character given</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ckanr_setup(url = "https://demo.ckan.org/",
key = getOption("ckan_demo_key"))

(tags &lt;- tag_search(query = 'ta'))
tags[[3]]

# create item class from only an item ID
as.ckan_tag(tags[[3]]$id)

# gives back itself
(x &lt;- as.ckan_tag(tags[[3]]$id))
as.ckan_tag(x)

## End(Not run)
</code></pre>

<hr>
<h2 id='as.ckan_user'>ckan_user class helpers</h2><span id='topic+as.ckan_user'></span><span id='topic+is.ckan_user'></span>

<h3>Description</h3>

<p>ckan_user class helpers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.ckan_user(x, ...)

is.ckan_user(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.ckan_user_+3A_x">x</code></td>
<td>
<p>Variety of things, character, list, or ckan_user class object</p>
</td></tr>
<tr><td><code id="as.ckan_user_+3A_...">...</code></td>
<td>
<p>Further args passed on to <code><a href="#topic+user_show">user_show()</a></code> if character given</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ckanr_setup(url = "https://demo.ckan.org/",
  key = getOption("ckan_demo_key"))

(usrs &lt;- user_list())
usrs[1:3]
usrs[[3]]

# create item class from only an item ID
as.ckan_user(usrs[[3]]$id)

# gives back itself
(x &lt;- as.ckan_user(usrs[[3]]$id))
as.ckan_user(x)

## End(Not run)
</code></pre>

<hr>
<h2 id='changes'>Get an activity stream of recently changed datasets on a site.</h2><span id='topic+changes'></span>

<h3>Description</h3>

<p>Get an activity stream of recently changed datasets on a site.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>changes(
  offset = 0,
  limit = 31,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="changes_+3A_offset">offset</code></td>
<td>
<p>(numeric) Where to start getting activity items from
(optional, default: 0)</p>
</td></tr>
<tr><td><code id="changes_+3A_limit">limit</code></td>
<td>
<p>(numeric) The maximum number of activities to return
(optional, default: 31)</p>
</td></tr>
<tr><td><code id="changes_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="changes_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="changes_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="changes_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
changes()
changes(as = 'json')
changes(as = 'table')

## End(Not run)
</code></pre>

<hr>
<h2 id='ckan_classes'>ckanr S3 classes</h2><span id='topic+ckan_classes'></span>

<h3>Description</h3>

<p>ckanr S3 classes
</p>


<h3>The classes</h3>


<ul>
<li><p> ckan_package - CKAN package
</p>
</li>
<li><p> ckan_resource - CKAN resource
</p>
</li>
<li><p> ckan_related - CKAN related item
</p>
</li></ul>



<h3>Coercion</h3>

<p>The functions <code style="white-space: pre;">&#8288;as.ckan_*()&#8288;</code> for each CKAN object type coerce something
to a S3 class of that type. For example, you can coerce a package ID as a
character string into an <code>ckan_package</code> object by calling
<code style="white-space: pre;">&#8288;as.ckan_package(&lt;id&gt;&#8288;</code>.
</p>


<h3>Testing for classes</h3>

<p>To test whether an object is of a particular <code style="white-space: pre;">&#8288;ckan_*&#8288;</code> class, there is a
<code style="white-space: pre;">&#8288;is._ckan_*()&#8288;</code> function for all of the classes listed above. You can use
one of those functions to get a logical back, <code>TRUE</code> or <code>FALSE</code>.
</p>


<h3>Manipulation</h3>

<p>These are simple S3 classes, basically an R list with an attached class
so we can know what to do with the object and have flexible inputs and
outputs from functions. You can edit one of these classes yourself
by simply changing values in the list.
</p>

<hr>
<h2 id='ckan_fetch'>Download a file</h2><span id='topic+ckan_fetch'></span>

<h3>Description</h3>

<p>Download a file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ckan_fetch(
  x,
  store = "session",
  path = "file",
  format = NULL,
  key = get_default_key(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ckan_fetch_+3A_x">x</code></td>
<td>
<p>URL for the file</p>
</td></tr>
<tr><td><code id="ckan_fetch_+3A_store">store</code></td>
<td>
<p>One of session (default) or disk. session stores in R session,
and disk saves the file to disk.</p>
</td></tr>
<tr><td><code id="ckan_fetch_+3A_path">path</code></td>
<td>
<p>if <code>store="disk"</code>, you must give a path to store file to</p>
</td></tr>
<tr><td><code id="ckan_fetch_+3A_format">format</code></td>
<td>
<p>Format of the file. Required if format is not detectable
through file URL.</p>
</td></tr>
<tr><td><code id="ckan_fetch_+3A_key">key</code></td>
<td>
<p>A CKAN API key (optional, character)</p>
</td></tr>
<tr><td><code id="ckan_fetch_+3A_...">...</code></td>
<td>
<p>Arguments passed on to the function used to read the file, if <code>store="session"</code>. See details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>...</code> argument can be used to pass additional arguments to the
function that actually reads the file. It is only used when <code>store="session"</code>
and if the file is <em>not</em> a ZIP file.
</p>
<p>This list shows what function is used to read what file format, so that you can
see what additional arguments are available:
</p>

<ul>
<li><p> csv: <a href="utils.html#topic+read.csv">read.csv</a>
</p>
</li>
<li><p> xls, xlsx: <a href="readxl.html#topic+read_excel">read_excel</a>
</p>
</li>
<li><p> xml: <a href="xml2.html#topic+read_xml">read_xml</a>
</p>
</li>
<li><p> html: <a href="xml2.html#topic+read_html">read_html</a>
</p>
</li>
<li><p> json: <a href="jsonlite.html#topic+fromJSON">fromJSON</a>
</p>
</li>
<li><p> shp, geojson: <a href="sf.html#topic+st_read">st_read</a>
</p>
</li>
<li><p> txt: <a href="utils.html#topic+read.table">read.table</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# CSV file
ckanr_setup("http://datamx.io")
res &lt;- resource_show(id = "6145a539-cbde-4b0d-a3d3-d1a5eb013f5c",
as = "table")
head(ckan_fetch(res$url))
ckan_fetch(res$url, "disk", "myfile.csv")

# CSV file, format not available
ckanr_setup("https://ckan0.cf.opendata.inter.prod-toronto.ca")
res &lt;- resource_show(id = "c57c3e1c-20e2-470f-bc82-e39a0264be31",
as = "table")
res$url
res$format
head(ckan_fetch(res$url, format = res$format))

# Excel file - requires readxl package
ckanr_setup("http://datamx.io")
res &lt;- resource_show(id = "e883510e-a082-435c-872a-c5b915857ae1",
as = "table")
head(ckan_fetch(res$url))

# Excel file, multiple sheets - requires readxl package
ckanr_setup()
res &lt;- resource_show(id = "ce02a1cf-35f1-41df-91d9-11ed1fdd4186",
as = "table")
x &lt;- ckan_fetch(res$url)
names(x)
head(x[["Mayor - Maire"]])

# XML file - requires xml2 package
# ckanr_setup("http://data.ottawa.ca")
# res &lt;- resource_show(id = "380061c1-6c46-4da6-a01b-7ab0f49a881e",
# as = "table")
# ckan_fetch(res$url)

# HTML file - requires xml2 package
ckanr_setup("http://open.canada.ca/data/en")
res &lt;- resource_show(id = "80321bac-4283-487c-93bd-c65acaa660f5",
as = "table")
ckan_fetch(res$url)
library("xml2")
xml_text(xml_find_first(xml_children(ckan_fetch(res$url))[[1]], "title"))

# JSON file, by default reads in to a data.frame for ease of use
ckanr_setup("http://data.surrey.ca")
res &lt;- resource_show(id = "8d07c662-800d-4977-9e3e-5a3d2d1e99ab",
as = "table")
head(ckan_fetch(res$url))

# SHP file (spatial data, ESRI format) - requires sf package
ckanr_setup("https://ckan0.cf.opendata.inter.prod-toronto.ca")
res &lt;- resource_show(id = "27362290-8bbf-434b-a9de-325a6c2ef923",
as = "table")
x &lt;- ckan_fetch(res$url)
class(x)
plot(x[, c("AREA_NAME", "geometry")])

# GeoJSON file - requires sf package
ckanr_setup("http://datamx.io")
res &lt;- resource_show(id = "b1cd35b7-479e-4fa0-86e9-e897d3c617e6",
as = "table")
x &lt;- ckan_fetch(res$url)
class(x)
plot(x[, c("mun_name", "geometry")])

# ZIP file - packages required depends on contents
ckanr_setup("https://ckan0.cf.opendata.inter.prod-toronto.ca")
res &lt;- resource_show(id = "bb21e1b8-a466-41c6-8bc3-3c362cb1ed55",
as = "table")
x &lt;- ckan_fetch(res$url)
names(x)
head(x[["ChickenpoxAgegroups2017.csv"]])

# TXT file
ckanr_setup("https://ckan0.cf.opendata.inter.prod-toronto.ca")
res &lt;- resource_show(id = "e4211f49-611f-438c-a444-aaa7f3f84117",
as = "table")
x &lt;- ckan_fetch(res$url)
head(x)

# TXT file, semicolon used as separator
ckanr_setup("https://data.coat.no")
res &lt;- resource_show(id = "384fe537-e0bd-4e57-8a0d-420b7a745196",
as = "table")
x &lt;- ckan_fetch(res$url, sep = ";")
head(x)

## End(Not run)
</code></pre>

<hr>
<h2 id='ckan_info'>Get information on a CKAN server</h2><span id='topic+ckan_info'></span><span id='topic+ckan_version'></span>

<h3>Description</h3>

<p>Get information on a CKAN server
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ckan_info(url = get_default_url(), ...)

ckan_version(url = get_default_url(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ckan_info_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: <a href="https://data.ontario.ca">https://data.ontario.ca</a>. See
also <code><a href="#topic+ckanr_setup">ckanr_setup()</a></code> and <code><a href="#topic+get_default_url">get_default_url()</a></code>. (required)</p>
</td></tr>
<tr><td><code id="ckan_info_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <a href="crul.html#topic+verb-GET">crul::verb-GET</a> (optional)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>for <code>ckan_info</code> a list with many slots with various info.
for <code>ckan_version</code>, list of length two, with actual version as character,
and another with version converted to numeric (any dots or letters removed)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ckan_info()
ckan_info(servers()[5])

ckan_version(servers()[5])

## End(Not run)
</code></pre>

<hr>
<h2 id='ckanr_settings'>Get or set ckanr CKAN settings</h2><span id='topic+ckanr_settings'></span><span id='topic+get_default_url'></span><span id='topic+get_default_key'></span><span id='topic+get_test_url'></span><span id='topic+get_test_key'></span><span id='topic+get_test_did'></span><span id='topic+get_test_rid'></span><span id='topic+get_test_gid'></span><span id='topic+get_test_oid'></span><span id='topic+get_test_behaviour'></span>

<h3>Description</h3>

<p>Get or set ckanr CKAN settings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ckanr_settings()

get_default_url()

get_default_key()

get_test_url()

get_test_key()

get_test_did()

get_test_rid()

get_test_gid()

get_test_oid()

get_test_behaviour()
</code></pre>


<h3>Value</h3>

<p><code>ckanr_settings</code> prints your base url, API key (if used), and
optional test server settings (URL, API key, a dataset ID and a resource ID).
<code>ckanr_setup</code> sets your production and test settings, while
<code style="white-space: pre;">&#8288;get_test_*&#8288;</code> get each of those respective settings.
<code>test_behaviour</code> indicates whether the CKANR test suite will skip
(&quot;SKIP&quot;) or fail (&quot;FAIL&quot;) writing tests in case the configured test
CKAN settings don't work.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ckanr_setup">ckanr_setup()</a></code>,
<code><a href="#topic+get_default_url">get_default_url()</a></code>, <code><a href="#topic+get_default_key">get_default_key()</a></code>, <code><a href="#topic+get_test_url">get_test_url()</a></code>,
<code><a href="#topic+get_test_key">get_test_key()</a></code>, <code><a href="#topic+get_test_did">get_test_did()</a></code>, <code><a href="#topic+get_test_rid">get_test_rid()</a></code>,
<code><a href="#topic+get_test_gid">get_test_gid()</a></code>, <code>get_test_oid</code>, <code>get_test_behaviour</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ckanr_settings()
</code></pre>

<hr>
<h2 id='ckanr_setup'>Configure default CKAN settings</h2><span id='topic+ckanr_setup'></span>

<h3>Description</h3>

<p>Configure default CKAN settings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ckanr_setup(
  url = "https://data.ontario.ca/",
  key = NULL,
  test_url = NULL,
  test_key = NULL,
  test_did = NULL,
  test_rid = NULL,
  test_gid = NULL,
  test_oid = NULL,
  test_behaviour = NULL,
  proxy = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ckanr_setup_+3A_url">url</code></td>
<td>
<p>A CKAN URL (optional), default: https://data.ontario.ca</p>
</td></tr>
<tr><td><code id="ckanr_setup_+3A_key">key</code></td>
<td>
<p>A CKAN API key (optional, character)</p>
</td></tr>
<tr><td><code id="ckanr_setup_+3A_test_url">test_url</code></td>
<td>
<p>(optional, character) A valid CKAN URL for testing purposes</p>
</td></tr>
<tr><td><code id="ckanr_setup_+3A_test_key">test_key</code></td>
<td>
<p>(optional, character) A valid CKAN API key privileged to
create datasets at <code>test_url</code></p>
</td></tr>
<tr><td><code id="ckanr_setup_+3A_test_did">test_did</code></td>
<td>
<p>(optional, character) A valid CKAN dataset ID, existing at
<code>test_url</code></p>
</td></tr>
<tr><td><code id="ckanr_setup_+3A_test_rid">test_rid</code></td>
<td>
<p>(optional, character) A valid CKAN resource ID, attached to
<code>did</code></p>
</td></tr>
<tr><td><code id="ckanr_setup_+3A_test_gid">test_gid</code></td>
<td>
<p>(optional, character) A valid CKAN group name at <code>test_url</code></p>
</td></tr>
<tr><td><code id="ckanr_setup_+3A_test_oid">test_oid</code></td>
<td>
<p>(optional, character) A valid CKAN organization name at
<code>test_url</code></p>
</td></tr>
<tr><td><code id="ckanr_setup_+3A_test_behaviour">test_behaviour</code></td>
<td>
<p>(optional, character) Whether to fail (&quot;FAIL&quot;) or skip
(&quot;SKIP&quot;) writing tests in case of problems with the configured test CKAN.</p>
</td></tr>
<tr><td><code id="ckanr_setup_+3A_proxy">proxy</code></td>
<td>
<p>an object of class <code>request</code> from a call to
<code><a href="crul.html#topic+proxies">crul::proxy()</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code><a href="#topic+ckanr_setup">ckanr_setup()</a></code> sets CKAN connection details. ckanr's functions
default to use the default URL and API key unless specified explicitly.
</p>
<p>ckanr's automated tests require a valid CKAN URL, a privileged API key
for that URL, plus the IDs of an existing dataset and an existing resource,
respectively.
</p>
<p>The writing tests (create, update, delete) can fail for two reasons:
failures in ckanr's code which the tests aim to detect,
or failures in the configured CKAN, which are not necessarily a problem
with ckanr's code but prevent the tests to prove otherwise.
</p>
<p>Setting <code>test_behaviour</code> to <code>"SKIP"</code> will allow writing tests to skip
if the configured test CKAN fails. This is desirable to e.g. test the other
functions even if the tester has no write access to a CKAN instance.
</p>
<p>Setting <code>test_behaviour</code> to <code>"FAIL"</code> will let the tester find any
problems with both the configured test CKAN and the writing functions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># CKAN users without admin/editor privileges could run:
ckanr_setup(url = "https://data.ontario.ca/")

# Privileged CKAN editor/admin users can run:
ckanr_setup(url = "https://data.ontario.ca/", key = "some-CKAN-API-key")

# ckanR developers/testers can run:
ckanr_setup(url = "https://data.ontario.ca/", key = "some-CKAN-API-key",
           test_url = "http://test-ckan.gov/",test_key = "test-ckan-API-key",
           test_did = "test-ckan-dataset-id",test_rid = "test-ckan-resource-id",
           test_gid = "test-group-name", test_oid = "test-organzation-name",
           test_behaviour = "FAIL")

# Not specifying the default CKAN URL will reset the CKAN URL to its default
# "https://data.ontario.ca/":
ckanr_setup()

# set a proxy
ckanr_setup(proxy = crul::proxy("64.251.21.73:8080"))
ckanr_settings()
## run without setting proxy to reset to no proxy
ckanr_setup()
ckanr_settings()
</code></pre>

<hr>
<h2 id='ckanr-deprecated'>Deprecated functions in <span class="pkg">ckanr</span></h2><span id='topic+ckanr-deprecated'></span>

<h3>Description</h3>

<p>These functions still work but will be removed (defunct) in the next version.
</p>


<h3>Details</h3>


<ul>
<li> <p><code><a href="#topic+ds_create_dataset">ds_create_dataset()</a></code>: The functionality of this function is already in
another function in this package. See function <code><a href="#topic+resource_create">resource_create()</a></code>
</p>
</li></ul>


<hr>
<h2 id='dashboard_activity_list'>Authorized user's dashboard activity stream</h2><span id='topic+dashboard_activity_list'></span>

<h3>Description</h3>

<p>Authorized user's dashboard activity stream
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dashboard_activity_list(
  limit = 31,
  offset = 0,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dashboard_activity_list_+3A_limit">limit</code></td>
<td>
<p>(integer) The maximum number of activities to return (optional).
Default: 31</p>
</td></tr>
<tr><td><code id="dashboard_activity_list_+3A_offset">offset</code></td>
<td>
<p>(integer) Where to start getting activity items from (optional).
Default: 0</p>
</td></tr>
<tr><td><code id="dashboard_activity_list_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="dashboard_activity_list_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="dashboard_activity_list_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="dashboard_activity_list_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

# get activity
(res &lt;- dashboard_activity_list())

## End(Not run)
</code></pre>

<hr>
<h2 id='dashboard_count'>Number of new activities of an authorized user</h2><span id='topic+dashboard_count'></span>

<h3>Description</h3>

<p>Number of new activities of an authorized user
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dashboard_count(
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dashboard_count_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="dashboard_count_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="dashboard_count_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="dashboard_count_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Important: Activities from the user herself are not counted by this
function even though they appear in the dashboard (users don't want to be
notified about things they did themselves).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

# count
dashboard_count()

## End(Not run)
</code></pre>

<hr>
<h2 id='ds_create'>Add a new table to a datastore</h2><span id='topic+ds_create'></span>

<h3>Description</h3>

<p>BEWARE: This function still doesn't quite work yet.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ds_create(
  resource_id = NULL,
  resource = NULL,
  force = FALSE,
  aliases = NULL,
  fields = NULL,
  records = NULL,
  primary_key = NULL,
  indexes = NULL,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ds_create_+3A_resource_id">resource_id</code></td>
<td>
<p>(string) Resource id that the data is going to be stored
against.</p>
</td></tr>
<tr><td><code id="ds_create_+3A_resource">resource</code></td>
<td>
<p>(dictionary) Resource dictionary that is passed to
<code><a href="#topic+resource_create">resource_create()</a></code>. Use instead of <code>resource_id</code> (optional)</p>
</td></tr>
<tr><td><code id="ds_create_+3A_force">force</code></td>
<td>
<p>(logical) Set to <code>TRUE</code> to edit a read-only resource.
Default: <code>FALSE</code></p>
</td></tr>
<tr><td><code id="ds_create_+3A_aliases">aliases</code></td>
<td>
<p>(character) Names for read only aliases of the resource.
(optional)</p>
</td></tr>
<tr><td><code id="ds_create_+3A_fields">fields</code></td>
<td>
<p>(list) Fields/columns and their extra metadata. (optional)</p>
</td></tr>
<tr><td><code id="ds_create_+3A_records">records</code></td>
<td>
<p>(list) The data, eg: <code style="white-space: pre;">&#8288;[{"dob": "2005", "some_stuff": ["a", "b"]}]&#8288;</code> (optional)</p>
</td></tr>
<tr><td><code id="ds_create_+3A_primary_key">primary_key</code></td>
<td>
<p>(character) Fields that represent a unique key (optional)</p>
</td></tr>
<tr><td><code id="ds_create_+3A_indexes">indexes</code></td>
<td>
<p>(character) Indexes on table (optional)</p>
</td></tr>
<tr><td><code id="ds_create_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="ds_create_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="ds_create_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="ds_create_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>References</h3>

<p>http://bit.ly/ds_create
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ckanr_setup(url = "https://demo.ckan.org/",
  key = getOption("ckan_demo_key"))

# create a package
(res &lt;- package_create("foobarrrrr", author="Jane Doe"))

# then create a resource
file &lt;- system.file("examples", "actinidiaceae.csv", package = "ckanr")
(xx &lt;- resource_create(package_id = res$id,
                       description = "my resource",
                       name = "bears",
                       upload = file,
                       rcurl = "http://google.com"
))
ds_create(resource_id = xx$id, records = iris, force = TRUE)
resource_show(xx$id)

## End(Not run)
</code></pre>

<hr>
<h2 id='ds_create_dataset'>Datastore - create a new resource on an existing dataset</h2><span id='topic+ds_create_dataset'></span>

<h3>Description</h3>

<p>Datastore - create a new resource on an existing dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ds_create_dataset(
  package_id,
  name,
  path,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ds_create_dataset_+3A_package_id">package_id</code></td>
<td>
<p>(character) Existing package ID (required)</p>
</td></tr>
<tr><td><code id="ds_create_dataset_+3A_name">name</code></td>
<td>
<p>(character) Name of the new resource (required)</p>
</td></tr>
<tr><td><code id="ds_create_dataset_+3A_path">path</code></td>
<td>
<p>(character) Path of the file to add (required)</p>
</td></tr>
<tr><td><code id="ds_create_dataset_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="ds_create_dataset_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="ds_create_dataset_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="ds_create_dataset_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is deprecated - will be defunct in the next version
of this package
</p>


<h3>References</h3>

<p>http://docs.ckan.org/en/latest/api/index.html#ckan.logic.action.create.resource_create
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
path &lt;- system.file("examples", "actinidiaceae.csv", package = "ckanr")
ckanr_setup(url = "https://demo.ckan.org/", key = "my-demo-ckan-org-api-key")
ds_create_dataset(package_id='testingagain', name="mydata", path = path)

# Testing: see ?ckanr_setup to set test settings
ckanr_setup(test_url = "http://my-ckan.org/",
            test_key = "my-ckan-api-key",
            test_did="an-existing-package-id",
            test_rid="an-existing-resource-id")
ds_create_dataset(package_id=get_test_pid(), name="mydata",
                  path=system.file("examples",
                                   "actinidiaceae.csv",
                                   package = "ckanr"),
                  key = get_test_key(),
                  url = get_test_url())

## End(Not run)
</code></pre>

<hr>
<h2 id='ds_search'>Datastore - search or get a dataset from CKAN datastore</h2><span id='topic+ds_search'></span>

<h3>Description</h3>

<p>Datastore - search or get a dataset from CKAN datastore
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ds_search(
  resource_id = NULL,
  filters = NULL,
  q = NULL,
  plain = NULL,
  language = NULL,
  fields = NULL,
  offset = NULL,
  limit = NULL,
  sort = NULL,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ds_search_+3A_resource_id">resource_id</code></td>
<td>
<p>(character) id or alias of the resource to be searched
against</p>
</td></tr>
<tr><td><code id="ds_search_+3A_filters">filters</code></td>
<td>
<p>(character) matching conditions to select, e.g
<code style="white-space: pre;">&#8288;{"key1": "a", "key2": "b"}&#8288;</code> (optional)</p>
</td></tr>
<tr><td><code id="ds_search_+3A_q">q</code></td>
<td>
<p>(character) full text query (optional)</p>
</td></tr>
<tr><td><code id="ds_search_+3A_plain">plain</code></td>
<td>
<p>(character) treat as plain text query (optional, default:
<code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="ds_search_+3A_language">language</code></td>
<td>
<p>(character) language of the full text query (optional,
default: english)</p>
</td></tr>
<tr><td><code id="ds_search_+3A_fields">fields</code></td>
<td>
<p>(character) fields to return (optional, default: all fields
in original order)</p>
</td></tr>
<tr><td><code id="ds_search_+3A_offset">offset</code></td>
<td>
<p>(numeric) Where to start getting activity items from
(optional, default: 0)</p>
</td></tr>
<tr><td><code id="ds_search_+3A_limit">limit</code></td>
<td>
<p>(numeric) The maximum number of activities to return
(optional, default: 100)</p>
</td></tr>
<tr><td><code id="ds_search_+3A_sort">sort</code></td>
<td>
<p>Field to sort on. You can specify ascending (e.g., score desc) or
descending (e.g., score asc), sort by two fields (e.g., score desc,
price asc), or sort by a function (e.g., sum(x_f, y_f) desc, which sorts
by the sum of x_f and y_f in a descending order). (optional)</p>
</td></tr>
<tr><td><code id="ds_search_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="ds_search_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="ds_search_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="ds_search_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>From the help for this method &quot;The datastore_search action allows
you to search data in a resource. DataStore resources that belong to
private CKAN resource can only be read by you if you have access to the
CKAN resource and send the appropriate authorization.&quot;
</p>
<p>Setting <code>plain=FALSE</code> enables the entire PostgreSQL <em>full text search query
language</em>. A listing of all available resources can be found at the alias
<em>table_metadata</em> full text search query language:
http://www.postgresql.org/docs/9.1/static/datatype-textsearch.html#DATATYPE-TSQUERY
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ckanr_setup(url = 'https://data.nhm.ac.uk/')

ds_search(resource_id = '8f0784a6-82dd-44e7-b105-6194e046eb8d')
ds_search(resource_id = '8f0784a6-82dd-44e7-b105-6194e046eb8d',
  as = "table")
ds_search(resource_id = '8f0784a6-82dd-44e7-b105-6194e046eb8d',
  as = "json")

ds_search(resource_id = '8f0784a6-82dd-44e7-b105-6194e046eb8d', limit = 1,
  as = "table")
ds_search(resource_id = '8f0784a6-82dd-44e7-b105-6194e046eb8d', q = "a*")

## End(Not run)
</code></pre>

<hr>
<h2 id='ds_search_sql'>Datastore - search or get a dataset from CKAN datastore</h2><span id='topic+ds_search_sql'></span>

<h3>Description</h3>

<p>Datastore - search or get a dataset from CKAN datastore
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ds_search_sql(
  sql,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ds_search_sql_+3A_sql">sql</code></td>
<td>
<p>(character) A single SQL select statement. (required)</p>
</td></tr>
<tr><td><code id="ds_search_sql_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="ds_search_sql_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="ds_search_sql_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="ds_search_sql_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
url &lt;- 'https://demo.ckan.org/'
sql &lt;- 'SELECT * from "f4129802-22aa-4437-b9f9-8a8f3b7b2a53" LIMIT 2'
ds_search_sql(sql, url = url, as = "table")
sql2 &lt;- 'SELECT "Species","Genus","Family" from "f4129802-22aa-4437-b9f9-8a8f3b7b2a53" LIMIT 2'
ds_search_sql(sql2, url = url, as = "table")

## End(Not run)
</code></pre>

<hr>
<h2 id='group_create'>Create a group</h2><span id='topic+group_create'></span>

<h3>Description</h3>

<p>Create a group
</p>


<h3>Usage</h3>

<pre><code class='language-R'>group_create(
  name = NULL,
  id = NULL,
  title = NULL,
  description = NULL,
  image_url = NULL,
  type = NULL,
  state = "active",
  approval_status = NULL,
  extras = NULL,
  packages = NULL,
  groups = NULL,
  users = NULL,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="group_create_+3A_name">name</code></td>
<td>
<p>(character) the name of the new dataset, must be between 2 and
100 characters long and contain only lowercase alphanumeric characters,
</p>

<ul>
<li><p> and _, e.g. 'warandpeace'
</p>
</li></ul>
</td></tr>
<tr><td><code id="group_create_+3A_id">id</code></td>
<td>
<p>(character) The id of the group (optional)</p>
</td></tr>
<tr><td><code id="group_create_+3A_title">title</code></td>
<td>
<p>(character) The title of the dataset (optional, default:
same as name)</p>
</td></tr>
<tr><td><code id="group_create_+3A_description">description</code></td>
<td>
<p>(character) The description of the group (optional)</p>
</td></tr>
<tr><td><code id="group_create_+3A_image_url">image_url</code></td>
<td>
<p>(character) The URL to an image to be displayed on the
group's page (optional)</p>
</td></tr>
<tr><td><code id="group_create_+3A_type">type</code></td>
<td>
<p>(character) The type of the dataset (optional), IDatasetForm
plugins associate themselves with different dataset types and provide custom
dataset handling behaviour for these types</p>
</td></tr>
<tr><td><code id="group_create_+3A_state">state</code></td>
<td>
<p>(character) The current state of the dataset, e.g. 'active' or
'deleted', only active datasets show up in search results and other lists
of datasets, this parameter will be ignored if you are not authorized to
change the state of the dataset (optional, default: 'active')</p>
</td></tr>
<tr><td><code id="group_create_+3A_approval_status">approval_status</code></td>
<td>
<p>(character) Approval status (optional)</p>
</td></tr>
<tr><td><code id="group_create_+3A_extras">extras</code></td>
<td>
<p>(list of dataset extra dictionaries) The dataset's extras
(optional), extras are arbitrary (key: value) metadata items that can be
added to datasets, each extra dictionary should have keys 'key' (a string),
'value' (a string)</p>
</td></tr>
<tr><td><code id="group_create_+3A_packages">packages</code></td>
<td>
<p>(data.frame) The datasets (packages) that belong
to the group, a data.frame, where each row has column 'name' (string, the id
or name of the dataset) and optionally 'title' (string, the title of
the dataset)</p>
</td></tr>
<tr><td><code id="group_create_+3A_groups">groups</code></td>
<td>
<p>(data.frame) The groups to which the dataset
belongs (optional), each data.frame row should have one or more of the
following columns which identify an existing group: 'id' (the id of the group,
string), or 'name' (the name of the group, string), to see which groups
exist call <code><a href="#topic+group_list">group_list()</a></code></p>
</td></tr>
<tr><td><code id="group_create_+3A_users">users</code></td>
<td>
<p>(list of dictionaries) The users that belong to the group,
a list of dictionaries each with key 'name' (string, the id or name of the
user) and optionally 'capacity' (string, the capacity in which the user is
a member of the group)</p>
</td></tr>
<tr><td><code id="group_create_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="group_create_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="group_create_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="group_create_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org", key = getOption("ckan_demo_key"))

# create a group
(res &lt;- group_create("fruitloops2", description="A group about fruitloops"))
res$users
res$num_followers

## End(Not run)
</code></pre>

<hr>
<h2 id='group_delete'>Delete a group</h2><span id='topic+group_delete'></span>

<h3>Description</h3>

<p>Delete a group
</p>


<h3>Usage</h3>

<pre><code class='language-R'>group_delete(id, url = get_default_url(), key = get_default_key(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="group_delete_+3A_id">id</code></td>
<td>
<p>(character) The id of the group. Required.</p>
</td></tr>
<tr><td><code id="group_delete_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca
See also <code><a href="#topic+ckanr_setup">ckanr_setup()</a></code> and <code><a href="#topic+get_default_url">get_default_url()</a></code></p>
</td></tr>
<tr><td><code id="group_delete_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="group_delete_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <a href="crul.html#topic+verb-POST">crul::verb-POST</a> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org", key = getOption("ckan_demo_key"))

# create a group
(res &lt;- group_create("lions", description="A group about lions"))

# show the group
group_show(res$id)

# delete the group
group_delete(res)
## or with it's id
# group_delete(res$id)

## End(Not run)
</code></pre>

<hr>
<h2 id='group_list'>List groups.</h2><span id='topic+group_list'></span>

<h3>Description</h3>

<p>List groups.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>group_list(
  offset = 0,
  limit = 31,
  sort = NULL,
  groups = NULL,
  all_fields = FALSE,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="group_list_+3A_offset">offset</code></td>
<td>
<p>(numeric) Where to start getting activity items from
(optional, default: 0)</p>
</td></tr>
<tr><td><code id="group_list_+3A_limit">limit</code></td>
<td>
<p>(numeric) The maximum number of activities to return
(optional, default: 31)</p>
</td></tr>
<tr><td><code id="group_list_+3A_sort">sort</code></td>
<td>
<p>Field to sort on. You can specify ascending (e.g., score desc) or
descending (e.g., score asc), sort by two fields (e.g., score desc, price asc),
or sort by a function (e.g., sum(x_f, y_f) desc, which sorts by the sum of
x_f and y_f in a descending order).</p>
</td></tr>
<tr><td><code id="group_list_+3A_groups">groups</code></td>
<td>
<p>(character) A list of names of the groups to return, if given
only groups whose names are in this list will be returned</p>
</td></tr>
<tr><td><code id="group_list_+3A_all_fields">all_fields</code></td>
<td>
<p>(logical) Return full group dictionaries instead of just
names. Default: <code>FALSE</code></p>
</td></tr>
<tr><td><code id="group_list_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="group_list_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="group_list_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="group_list_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
group_list(limit = 3)
group_list(limit = 3, as = 'json')
group_list(limit = 3, as = 'table')

## End(Not run)
</code></pre>

<hr>
<h2 id='group_patch'>Update a group's metadata</h2><span id='topic+group_patch'></span>

<h3>Description</h3>

<p>Update a group's metadata
</p>


<h3>Usage</h3>

<pre><code class='language-R'>group_patch(
  x,
  id,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="group_patch_+3A_x">x</code></td>
<td>
<p>(list) A list with key-value pairs</p>
</td></tr>
<tr><td><code id="group_patch_+3A_id">id</code></td>
<td>
<p>(character) Resource ID to update (required)</p>
</td></tr>
<tr><td><code id="group_patch_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="group_patch_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="group_patch_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="group_patch_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org", key = getOption("ckan_demo_key"))

# Create a package
(res &lt;- group_create("hello-my-world2"))

# Get a resource
grp &lt;- group_show(res$id)
grp$title
grp$author_email

# Make some changes
x &lt;- list(title = "!hello world!", maintainer_email = "hello@world.com")
group_patch(x, id = grp)

## End(Not run)
</code></pre>

<hr>
<h2 id='group_show'>Show a package</h2><span id='topic+group_show'></span>

<h3>Description</h3>

<p>Show a package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>group_show(
  id,
  include_datasets = TRUE,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="group_show_+3A_id">id</code></td>
<td>
<p>(character) Package identifier.</p>
</td></tr>
<tr><td><code id="group_show_+3A_include_datasets">include_datasets</code></td>
<td>
<p>(logical) Include a list of the group's datasets.
Default: <code>TRUE</code></p>
</td></tr>
<tr><td><code id="group_show_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="group_show_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="group_show_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="group_show_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default the help and success slots are dropped, and only the
result slot is returned. You can request raw json with <code>as = 'json'</code>
then parse yourself to get the help slot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
res &lt;- group_list()

# via a group name/id
group_show(res[[1]]$name)

# or via an object of class ckan_group
group_show(res[[1]])

# return different data formats
group_show(res[[1]]$name, as = 'json')
group_show(res[[1]]$name, as = 'table')

## End(Not run)
</code></pre>

<hr>
<h2 id='group_update'>Update a group</h2><span id='topic+group_update'></span>

<h3>Description</h3>

<p>Update a group
</p>


<h3>Usage</h3>

<pre><code class='language-R'>group_update(
  x,
  id,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="group_update_+3A_x">x</code></td>
<td>
<p>(list) A list with key-value pairs</p>
</td></tr>
<tr><td><code id="group_update_+3A_id">id</code></td>
<td>
<p>(character) Package identifier</p>
</td></tr>
<tr><td><code id="group_update_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="group_update_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="group_update_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="group_update_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

# First, create a group
grp &lt;- group_create("water-bears2")
group_show(grp)

## update just chosen things
# Make some changes
x &lt;- list(description = "A group about water bears and people that love them")

# Then update the packge
group_update(x, id = grp)

## End(Not run)
</code></pre>

<hr>
<h2 id='license_list'>Return the list of licenses available for datasets on the site.</h2><span id='topic+license_list'></span>

<h3>Description</h3>

<p>Return the list of licenses available for datasets on the site.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>license_list(
  id,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="license_list_+3A_id">id</code></td>
<td>
<p>(character) Package identifier.</p>
</td></tr>
<tr><td><code id="license_list_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="license_list_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="license_list_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="license_list_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
license_list()
license_list(as = "table")
license_list(as = "json")

## End(Not run)
</code></pre>

<hr>
<h2 id='organization_create'>Create an organization</h2><span id='topic+organization_create'></span>

<h3>Description</h3>

<p>Create an organization
</p>


<h3>Usage</h3>

<pre><code class='language-R'>organization_create(
  name = NULL,
  id = NULL,
  title = NULL,
  description = NULL,
  image_url = NULL,
  state = "active",
  approval_status = NULL,
  extras = NULL,
  packages = NULL,
  users = NULL,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="organization_create_+3A_name">name</code></td>
<td>
<p>(character) the name of the organization, a string between 2 and
100 characters long, containing only lowercase alphanumeric characters,
</p>

<ul>
<li><p> and _
</p>
</li></ul>
</td></tr>
<tr><td><code id="organization_create_+3A_id">id</code></td>
<td>
<p>the id of the organization (optional)</p>
</td></tr>
<tr><td><code id="organization_create_+3A_title">title</code></td>
<td>
<p>(character) the title of the organization (optional)</p>
</td></tr>
<tr><td><code id="organization_create_+3A_description">description</code></td>
<td>
<p>(character) the description of the organization (optional)</p>
</td></tr>
<tr><td><code id="organization_create_+3A_image_url">image_url</code></td>
<td>
<p>(character) the URL to an image to be displayed on the
organization's page (optional)</p>
</td></tr>
<tr><td><code id="organization_create_+3A_state">state</code></td>
<td>
<p>(character) the current state of the organization, e.g.
'active' or 'deleted', only active organization show up in search results
and other lists of organization, this parameter will be ignored if you are
not authorized to change the state of the organization (optional).
Default: 'active'</p>
</td></tr>
<tr><td><code id="organization_create_+3A_approval_status">approval_status</code></td>
<td>
<p>(character) Approval status</p>
</td></tr>
<tr><td><code id="organization_create_+3A_extras">extras</code></td>
<td>
<p>The organization's extras (optional), extras are arbitrary
(key: value) metadata items that can be added to organizations, each extra
dictionary should have keys 'key' (a string), 'value' (a string)
<code>package_relationship_create</code> for the format of relationship dictionaries
(optional)</p>
</td></tr>
<tr><td><code id="organization_create_+3A_packages">packages</code></td>
<td>
<p>(list of dictionaries) the datasets (packages) that belong
to the organization, a list of dictionaries each with keys 'name' (string,
the id or name of the dataset) and optionally 'title' (string, the title
of the dataset)</p>
</td></tr>
<tr><td><code id="organization_create_+3A_users">users</code></td>
<td>
<p>(character) the users that belong to the organization, a list
of dictionaries each with key 'name' (string, the id or name of the user)
and optionally 'capacity' (string, the capacity in which the user is a
member of the organization)</p>
</td></tr>
<tr><td><code id="organization_create_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="organization_create_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="organization_create_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="organization_create_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

# create an organization
(res &lt;- organization_create("foobar", title = "Foo bars",
  description = "love foo bars"))
res$name

## End(Not run)
</code></pre>

<hr>
<h2 id='organization_delete'>Delete an organization</h2><span id='topic+organization_delete'></span>

<h3>Description</h3>

<p>Delete an organization
</p>


<h3>Usage</h3>

<pre><code class='language-R'>organization_delete(
  id,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="organization_delete_+3A_id">id</code></td>
<td>
<p>(character) name or id of the organization</p>
</td></tr>
<tr><td><code id="organization_delete_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="organization_delete_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="organization_delete_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="organization_delete_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an empty list on success
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ckanr_setup(url = "https://demo.ckan.org", key=getOption("ckan_demo_key"))

# create an organization
(res &lt;- organization_create("foobar", title = "Foo bars",
  description = "love foo bars"))

# delete the organization just created
res$id
organization_delete(id = res$id)

## End(Not run)
</code></pre>

<hr>
<h2 id='organization_list'>List organization</h2><span id='topic+organization_list'></span>

<h3>Description</h3>

<p>List organization
</p>


<h3>Usage</h3>

<pre><code class='language-R'>organization_list(
  order_by = c("name", "package"),
  decreasing = FALSE,
  organizations = NULL,
  all_fields = TRUE,
  limit = 31,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="organization_list_+3A_order_by">order_by</code></td>
<td>
<p>(character, only the first element is used).
The field to sort the list by, must be <code>name</code> or <code>packages</code>.</p>
</td></tr>
<tr><td><code id="organization_list_+3A_decreasing">decreasing</code></td>
<td>
<p>(logical). Is the sort-order is decreasing or not.</p>
</td></tr>
<tr><td><code id="organization_list_+3A_organizations">organizations</code></td>
<td>
<p>(character or <code>NULL</code>). A list of names of the
organizations to return. <code>NULL</code> returns all organizations.</p>
</td></tr>
<tr><td><code id="organization_list_+3A_all_fields">all_fields</code></td>
<td>
<p>(logical). Return the name or all fields of the object.</p>
</td></tr>
<tr><td><code id="organization_list_+3A_limit">limit</code></td>
<td>
<p>(numeric) The maximum number of organizations to return
(optional, default: 31)</p>
</td></tr>
<tr><td><code id="organization_list_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="organization_list_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="organization_list_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="organization_list_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ckanr_setup(url = "https://demo.ckan.org/")

# list organizations
res &lt;- organization_list()
res[1:2]

# Different data formats
organization_list(as = 'json')
organization_list(as = 'table')

## End(Not run)
</code></pre>

<hr>
<h2 id='organization_purge'>Purge an organization</h2><span id='topic+organization_purge'></span>

<h3>Description</h3>

<p>IMPORTANT: You must be a sysadmin to purge an organization. Once an
organization is purged, it is permanently removed from the system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>organization_purge(
  id,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="organization_purge_+3A_id">id</code></td>
<td>
<p>(character) name or id of the organization</p>
</td></tr>
<tr><td><code id="organization_purge_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="organization_purge_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="organization_purge_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="organization_purge_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an empty list on success
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ckanr_setup(url = "https://demo.ckan.org", key=getOption("ckan_demo_key"))

# create an organization
(res &lt;- organization_create("foobar", title = "Foo bars",
  description = "love foo bars"))

# delete the organization just created
res$id
organization_delete(id = res$id)

# purge the organization just deleted
res$id
organization_purge(id = res$id)

## End(Not run)
</code></pre>

<hr>
<h2 id='organization_show'>Show an organization</h2><span id='topic+organization_show'></span>

<h3>Description</h3>

<p>Show an organization
</p>


<h3>Usage</h3>

<pre><code class='language-R'>organization_show(
  id,
  include_datasets = FALSE,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="organization_show_+3A_id">id</code></td>
<td>
<p>(character) Organization id or name.</p>
</td></tr>
<tr><td><code id="organization_show_+3A_include_datasets">include_datasets</code></td>
<td>
<p>(logical). Whether to include a list of the
organization datasets</p>
</td></tr>
<tr><td><code id="organization_show_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="organization_show_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="organization_show_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="organization_show_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default the help and success slots are dropped, and only the
result slot is returned. You can request raw json with <code>as = 'json'</code>
then parse yourself to get the help slot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

res &lt;- organization_create("stuffthings2")
organization_show(res$id)

## End(Not run)
</code></pre>

<hr>
<h2 id='package_activity_list'>Return a list of the package's activity</h2><span id='topic+package_activity_list'></span>

<h3>Description</h3>

<p>Return a list of the package's activity
</p>


<h3>Usage</h3>

<pre><code class='language-R'>package_activity_list(
  id,
  offset = 0,
  limit = 31,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="package_activity_list_+3A_id">id</code></td>
<td>
<p>(character) Package identifier.</p>
</td></tr>
<tr><td><code id="package_activity_list_+3A_offset">offset</code></td>
<td>
<p>(numeric) Where to start getting activity items from
(optional, default: 0)</p>
</td></tr>
<tr><td><code id="package_activity_list_+3A_limit">limit</code></td>
<td>
<p>(numeric) The maximum number of activities to return
(optional, default: 31)</p>
</td></tr>
<tr><td><code id="package_activity_list_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="package_activity_list_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="package_activity_list_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="package_activity_list_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

# create a package
(res &lt;- package_create("owls64"))

# list package activity
package_activity_list(res$id)

# make a change
x &lt;- list(maintainer = "Jane Forest")
package_update(x, res)

# list activity again
package_activity_list(res)

# output different data formats
package_activity_list(res$id, as = "table")
package_activity_list(res$id, as = "json")

## End(Not run)
</code></pre>

<hr>
<h2 id='package_create'>Create a package</h2><span id='topic+package_create'></span>

<h3>Description</h3>

<p>Create a package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>package_create(
  name = NULL,
  title = NULL,
  private = FALSE,
  author = NULL,
  author_email = NULL,
  maintainer = NULL,
  maintainer_email = NULL,
  license_id = NULL,
  notes = NULL,
  package_url = NULL,
  version = NULL,
  state = "active",
  type = NULL,
  resources = NULL,
  tags = NULL,
  extras = NULL,
  relationships_as_object = NULL,
  relationships_as_subject = NULL,
  groups = NULL,
  owner_org = NULL,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="package_create_+3A_name">name</code></td>
<td>
<p>(character) the name of the new dataset, must be between 2 and
100 characters long and contain only lowercase alphanumeric characters, -
and _, e.g. 'warandpeace'</p>
</td></tr>
<tr><td><code id="package_create_+3A_title">title</code></td>
<td>
<p>(character) the title of the dataset (optional, default: same
as name)</p>
</td></tr>
<tr><td><code id="package_create_+3A_private">private</code></td>
<td>
<p>(logical) whether the dataset should be private (optional,
default: <code>FALSE</code>), requires a value for <code>owner_org</code> if <code>TRUE</code></p>
</td></tr>
<tr><td><code id="package_create_+3A_author">author</code></td>
<td>
<p>(character) the name of the dataset's author (optional)</p>
</td></tr>
<tr><td><code id="package_create_+3A_author_email">author_email</code></td>
<td>
<p>(character) the email address of the dataset's author
(optional)</p>
</td></tr>
<tr><td><code id="package_create_+3A_maintainer">maintainer</code></td>
<td>
<p>(character) the name of the dataset's maintainer
(optional)</p>
</td></tr>
<tr><td><code id="package_create_+3A_maintainer_email">maintainer_email</code></td>
<td>
<p>(character) the email address of the dataset's
maintainer (optional)</p>
</td></tr>
<tr><td><code id="package_create_+3A_license_id">license_id</code></td>
<td>
<p>(license id string) - the id of the dataset's license,
see license_list() for available values (optional)</p>
</td></tr>
<tr><td><code id="package_create_+3A_notes">notes</code></td>
<td>
<p>(character) a description of the dataset (optional)</p>
</td></tr>
<tr><td><code id="package_create_+3A_package_url">package_url</code></td>
<td>
<p>(character) a URL for the dataset's source (optional)</p>
</td></tr>
<tr><td><code id="package_create_+3A_version">version</code></td>
<td>
<p>(string, no longer than 100 characters) - (optional)</p>
</td></tr>
<tr><td><code id="package_create_+3A_state">state</code></td>
<td>
<p>(character) the current state of the dataset, e.g. 'active'
or 'deleted', only active datasets show up in search results and other
lists of datasets, this parameter will be ignored if you are not authorized
to change the state of the dataset (optional, default: 'active')</p>
</td></tr>
<tr><td><code id="package_create_+3A_type">type</code></td>
<td>
<p>(character) the type of the dataset (optional), IDatasetForm
plugins associate themselves with different dataset types and provide custom
dataset handling behaviour for these types</p>
</td></tr>
<tr><td><code id="package_create_+3A_resources">resources</code></td>
<td>
<p>(list of resource dictionaries) - the dataset's resources,
see <code><a href="#topic+resource_create">resource_create()</a></code> for the format of resource dictionaries (optional)</p>
</td></tr>
<tr><td><code id="package_create_+3A_tags">tags</code></td>
<td>
<p>(list of tag dictionaries) - the dataset's tags, see
<code><a href="#topic+tag_create">tag_create()</a></code> for the format of tag dictionaries (optional)</p>
</td></tr>
<tr><td><code id="package_create_+3A_extras">extras</code></td>
<td>
<p>(list of dataset extra dictionaries) - the dataset's extras
(optional), extras are arbitrary (key: value) metadata items that can be
added to datasets, each extra dictionary should have keys 'key' (a string),
'value' (a string)</p>
</td></tr>
<tr><td><code id="package_create_+3A_relationships_as_object">relationships_as_object</code></td>
<td>
<p>(list of relationship dictionaries) - see
<code>package_relationship_create</code> for the format of relationship dictionaries
(optional)</p>
</td></tr>
<tr><td><code id="package_create_+3A_relationships_as_subject">relationships_as_subject</code></td>
<td>
<p>(list of relationship dictionaries) - see
<code>package_relationship_create</code> for the format of relationship dictionaries
(optional)</p>
</td></tr>
<tr><td><code id="package_create_+3A_groups">groups</code></td>
<td>
<p>(data.frame) the groups to which the dataset
belongs, each row should have one or more of the
following columns which identify an existing group: 'id' (the id of the group,
string), or 'name' (the name of the group, string), to see which groups
exist call <code><a href="#topic+group_list">group_list()</a></code>. see example (optional)</p>
</td></tr>
<tr><td><code id="package_create_+3A_owner_org">owner_org</code></td>
<td>
<p>(character) the id of the dataset's owning organization,
see <code><a href="#topic+organization_list">organization_list()</a></code> or <code>organization_list_for_user</code> for available
values (optional)</p>
</td></tr>
<tr><td><code id="package_create_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="package_create_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="package_create_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="package_create_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

# create a package
## Example 1
(res &lt;- package_create("foobar4", author="Jane Doe"))
res$author

## Example 2 - create package, add a resource
(res &lt;- package_create("helloworld", author="Jane DOe"))

# include a group
# package_create("brownbear", groups = data.frame(id = "some-id"))


## End(Not run)
</code></pre>

<hr>
<h2 id='package_delete'>Delete a package</h2><span id='topic+package_delete'></span>

<h3>Description</h3>

<p>Delete a package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>package_delete(id, url = get_default_url(), key = get_default_key(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="package_delete_+3A_id">id</code></td>
<td>
<p>(character) The id of the package. Required.</p>
</td></tr>
<tr><td><code id="package_delete_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca
See also <code><a href="#topic+ckanr_setup">ckanr_setup()</a></code> and <code><a href="#topic+get_default_url">get_default_url()</a></code></p>
</td></tr>
<tr><td><code id="package_delete_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="package_delete_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <a href="crul.html#topic+verb-POST">crul::verb-POST</a> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org", key = getOption("ckan_demo_key"))

# create a package
(res &lt;- package_create("lions-bears-tigers"))

# show the package
package_show(res)

# delete the package
package_delete(res)

## End(Not run)
</code></pre>

<hr>
<h2 id='package_list'>List datasets.</h2><span id='topic+package_list'></span>

<h3>Description</h3>

<p>List datasets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>package_list(
  offset = 0,
  limit = 31,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="package_list_+3A_offset">offset</code></td>
<td>
<p>(numeric) Where to start getting activity items from
(optional, default: 0)</p>
</td></tr>
<tr><td><code id="package_list_+3A_limit">limit</code></td>
<td>
<p>(numeric) The maximum number of activities to return
(optional, default: 31)</p>
</td></tr>
<tr><td><code id="package_list_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="package_list_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="package_list_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="package_list_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
package_list()
package_list(as = 'json')
package_list(as = 'table')

package_list(url = 'https://data.nhm.ac.uk')

## End(Not run)
</code></pre>

<hr>
<h2 id='package_list_current'>List current packages with resources.</h2><span id='topic+package_list_current'></span>

<h3>Description</h3>

<p>List current packages with resources.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>package_list_current(
  offset = 0,
  limit = 31,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="package_list_current_+3A_offset">offset</code></td>
<td>
<p>(numeric) Where to start getting activity items from
(optional, default: 0)</p>
</td></tr>
<tr><td><code id="package_list_current_+3A_limit">limit</code></td>
<td>
<p>(numeric) The maximum number of activities to return
(optional, default: 31)</p>
</td></tr>
<tr><td><code id="package_list_current_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="package_list_current_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="package_list_current_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="package_list_current_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
package_list_current()
package_list_current(as = 'json')
package_list_current(as = 'table')

## End(Not run)
</code></pre>

<hr>
<h2 id='package_patch'>Update a package's metadata</h2><span id='topic+package_patch'></span>

<h3>Description</h3>

<p>Update a package's metadata
</p>


<h3>Usage</h3>

<pre><code class='language-R'>package_patch(
  x,
  id = NULL,
  extras = NULL,
  http_method = "GET",
  key = get_default_key(),
  url = get_default_url(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="package_patch_+3A_x">x</code></td>
<td>
<p>(list) A list with key-value pairs</p>
</td></tr>
<tr><td><code id="package_patch_+3A_id">id</code></td>
<td>
<p>(character) Resource ID to update (optional, required if
x does not have an &quot;id&quot; field)</p>
</td></tr>
<tr><td><code id="package_patch_+3A_extras">extras</code></td>
<td>
<p>(character vector) - the dataset's extras
(optional), extras are arbitrary (key: value) metadata items that can be
added to datasets, each extra dictionary should have keys 'key' (a string),
'value' (a string)</p>
</td></tr>
<tr><td><code id="package_patch_+3A_http_method">http_method</code></td>
<td>
<p>(character) which HTTP method (verb) to use; one of
&quot;GET&quot; or &quot;POST&quot;. Default: &quot;GET&quot;</p>
</td></tr>
<tr><td><code id="package_patch_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="package_patch_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="package_patch_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="package_patch_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org", key = getOption("ckan_demo_key"))

# Create a package
(res &lt;- package_create("hello-world13", author="Jane Doe"))

# Get a resource
res &lt;- package_show(res$id)
res$title

# patch
package_patch(res, extras = list(list(key = "foo", value = "bar")))
unclass(package_show(res))

## End(Not run)
</code></pre>

<hr>
<h2 id='package_revision_list'>Return a dataset (package's) revisions as a list of dictionaries.</h2><span id='topic+package_revision_list'></span>

<h3>Description</h3>

<p>Return a dataset (package's) revisions as a list of dictionaries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>package_revision_list(
  id,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="package_revision_list_+3A_id">id</code></td>
<td>
<p>(character) Package identifier.</p>
</td></tr>
<tr><td><code id="package_revision_list_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="package_revision_list_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="package_revision_list_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="package_revision_list_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

# create a package
(res &lt;- package_create("dolphins"))

# list package revisions
package_revision_list(res$id)

# Make change to the package
x &lt;- list(title = "dolphins and things")
package_patch(x, id = res$id)

# list package revisions
package_revision_list(res$id)

# Output different formats
package_revision_list(res$id, as = "table")
package_revision_list(res$id, as = "json")

## End(Not run)
</code></pre>

<hr>
<h2 id='package_search'>Search for packages.</h2><span id='topic+package_search'></span>

<h3>Description</h3>

<p>Search for packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>package_search(
  q = "*:*",
  fq = NULL,
  sort = NULL,
  rows = NULL,
  start = NULL,
  facet = FALSE,
  facet.limit = NULL,
  facet.field = NULL,
  facet.mincount = NULL,
  include_drafts = FALSE,
  include_private = FALSE,
  use_default_schema = FALSE,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="package_search_+3A_q">q</code></td>
<td>
<p>Query terms, defaults to '<em>:</em>', or everything.</p>
</td></tr>
<tr><td><code id="package_search_+3A_fq">fq</code></td>
<td>
<p>Filter query, this does not affect the search, only what gets
returned</p>
</td></tr>
<tr><td><code id="package_search_+3A_sort">sort</code></td>
<td>
<p>Field to sort on. You can specify ascending (e.g., score desc)
or descending (e.g., score asc), sort by two fields (e.g., score desc,
price asc), or sort by a function (e.g., sum(x_f, y_f) desc, which sorts
by the sum of x_f and y_f in a descending order).</p>
</td></tr>
<tr><td><code id="package_search_+3A_rows">rows</code></td>
<td>
<p>Number of records to return. Defaults to 10.</p>
</td></tr>
<tr><td><code id="package_search_+3A_start">start</code></td>
<td>
<p>Record to start at, default to beginning.</p>
</td></tr>
<tr><td><code id="package_search_+3A_facet">facet</code></td>
<td>
<p>(logical) Whether to return facet results or not.
Default: <code>FALSE</code></p>
</td></tr>
<tr><td><code id="package_search_+3A_facet.limit">facet.limit</code></td>
<td>
<p>(numeric) This param indicates the maximum number of
constraint counts that should be returned for the facet fields.
A negative value means unlimited. Default: 100.
Can be specified on a per field basis.</p>
</td></tr>
<tr><td><code id="package_search_+3A_facet.field">facet.field</code></td>
<td>
<p>(character) This param allows you to specify a field which
should be treated as a facet. It will iterate over each Term in the field
and generate a facet count using that Term as the constraint. This parameter
can be specified multiple times to indicate multiple facet fields. None of
the other params in this section will have any effect without specifying at
least one field name using this param.</p>
</td></tr>
<tr><td><code id="package_search_+3A_facet.mincount">facet.mincount</code></td>
<td>
<p>(integer) the minimum counts for facet fields should
be included in the results</p>
</td></tr>
<tr><td><code id="package_search_+3A_include_drafts">include_drafts</code></td>
<td>
<p>(logical) if <code>TRUE</code> draft datasets will be
included. A user will only be returned their own draft datasets, and a
sysadmin will be returned all draft datasets. default: <code>FALSE</code>.
first CKAN version: 2.6.1; dropped from request if CKAN version is older
or if CKAN version isn't available via <code><a href="#topic+ckan_version">ckan_version()</a></code></p>
</td></tr>
<tr><td><code id="package_search_+3A_include_private">include_private</code></td>
<td>
<p>(logical) if <code>TRUE</code> private datasets will be
included. Only private datasets from the users organizations will be
returned and sysadmins will be returned all private datasets.
default: <code>FALSE</code>
first CKAN version: 2.6.1; dropped from request if CKAN version is older
or if CKAN version isn't available via <code><a href="#topic+ckan_version">ckan_version()</a></code></p>
</td></tr>
<tr><td><code id="package_search_+3A_use_default_schema">use_default_schema</code></td>
<td>
<p>(logical) use default package schema instead of a
custom schema defined with an IDatasetForm plugin. default: <code>FALSE</code>
first CKAN version: 2.3.5; dropped from request if CKAN version is older
or if CKAN version isn't available via <code><a href="#topic+ckan_version">ckan_version()</a></code></p>
</td></tr>
<tr><td><code id="package_search_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="package_search_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="package_search_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="package_search_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ckanr_setup(url = "https://demo.ckan.org", key=getOption("ckan_demo_key"))

package_search(q = '*:*')
package_search(q = '*:*', rows = 2, as = 'json')
package_search(q = '*:*', rows = 2, as = 'table')

package_search(q = '*:*', sort = 'score asc')
package_search(q = '*:*', fq = 'num_tags:[3 TO *]')$count
package_search(q = '*:*', fq = 'num_tags:[2 TO *]')$count
package_search(q = '*:*', fq = 'num_tags:[1 TO *]')$count

## End(Not run)
</code></pre>

<hr>
<h2 id='package_show'>Show a package.</h2><span id='topic+package_show'></span>

<h3>Description</h3>

<p>Show a package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>package_show(
  id,
  use_default_schema = FALSE,
  http_method = "GET",
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="package_show_+3A_id">id</code></td>
<td>
<p>(character/ckan_package) Package identifier, or a <code>ckan_package</code>
object</p>
</td></tr>
<tr><td><code id="package_show_+3A_use_default_schema">use_default_schema</code></td>
<td>
<p>(logical) Use default package schema instead of a
custom schema defined with an IDatasetForm plugin. Default: <code>FALSE</code></p>
</td></tr>
<tr><td><code id="package_show_+3A_http_method">http_method</code></td>
<td>
<p>(character) which HTTP method (verb) to use; one of
&quot;GET&quot; or &quot;POST&quot;. Default: &quot;GET&quot;</p>
</td></tr>
<tr><td><code id="package_show_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="package_show_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="package_show_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="package_show_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default the help and success slots are dropped, and only the
result slot is returned. You can request raw json with <code>as = 'json'</code>
then parse yourself to get the help slot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/",
  key = getOption("ckan_demo_key"))

# create a package
(res &lt;- package_create("purposeful55"))

# show package
## From the output of package_create
package_show(res)
## Or, from the ID
package_show(res$id)

# get data back in different formats
package_show(res$id, as = 'json')
package_show(res$id, as = 'table')

# use default schema or not
package_show(res$id, TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='package_update'>Update a package</h2><span id='topic+package_update'></span>

<h3>Description</h3>

<p>Update a package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>package_update(
  x,
  id,
  http_method = "GET",
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="package_update_+3A_x">x</code></td>
<td>
<p>(list) A list with key-value pairs</p>
</td></tr>
<tr><td><code id="package_update_+3A_id">id</code></td>
<td>
<p>(character) Package identifier</p>
</td></tr>
<tr><td><code id="package_update_+3A_http_method">http_method</code></td>
<td>
<p>(character) which HTTP method (verb) to use; one of
&quot;GET&quot; or &quot;POST&quot;. Default: &quot;GET&quot;</p>
</td></tr>
<tr><td><code id="package_update_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="package_update_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="package_update_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="package_update_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

# Create a package
(pkg &lt;- package_create("hello-world11", author="Jane Doe"))

# Next show the package to see the fields
(res &lt;- package_show(pkg$id))

## update just chosen things
# Make some changes
x &lt;- list(maintainer_email = "heythere2@things.com")

# Then update the packge
package_update(x, pkg$id)

## End(Not run)
</code></pre>

<hr>
<h2 id='ping'>Ping a CKAN server to test that it's up or down.</h2><span id='topic+ping'></span>

<h3>Description</h3>

<p>Ping a CKAN server to test that it's up or down.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ping(url = get_default_url(), key = get_default_key(), as = "logical", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ping_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="ping_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="ping_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="ping_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ping()
ping(as = "json")

## End(Not run)
</code></pre>

<hr>
<h2 id='related_create'>Create a related item</h2><span id='topic+related_create'></span>

<h3>Description</h3>

<p>Create a related item
</p>


<h3>Usage</h3>

<pre><code class='language-R'>related_create(
  id,
  title,
  type,
  description = NULL,
  related_id = NULL,
  related_url = NULL,
  image_url = NULL,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="related_create_+3A_id">id</code></td>
<td>
<p>(character) id of package that the related item should be added to.
This should be an alphanumeric string. Required.</p>
</td></tr>
<tr><td><code id="related_create_+3A_title">title</code></td>
<td>
<p>(character) Title of the related item. Required.</p>
</td></tr>
<tr><td><code id="related_create_+3A_type">type</code></td>
<td>
<p>(character) The type of the related item. One of API,
application, idea, news article, paper, post or visualization. Required.</p>
</td></tr>
<tr><td><code id="related_create_+3A_description">description</code></td>
<td>
<p>(character) description (optional). Optional</p>
</td></tr>
<tr><td><code id="related_create_+3A_related_id">related_id</code></td>
<td>
<p>(character) An id to assign to the related item. If blank,
an ID will be assigned for you. Optional</p>
</td></tr>
<tr><td><code id="related_create_+3A_related_url">related_url</code></td>
<td>
<p>(character) A url to associated with the related item.
Optional</p>
</td></tr>
<tr><td><code id="related_create_+3A_image_url">image_url</code></td>
<td>
<p>(character) A url to associated image. Optional</p>
</td></tr>
<tr><td><code id="related_create_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="related_create_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="related_create_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="related_create_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

# create a package
(res &lt;- package_create("hello-mars"))

# create a related item
related_create(res, title = "asdfdaf", type = "idea")

# pipe operations together
package_create("foobbbbbarrrr") %&gt;%
   related_create(title = "my resource",
                  type = "visualization")

## End(Not run)
</code></pre>

<hr>
<h2 id='related_delete'>Delete a related item.</h2><span id='topic+related_delete'></span>

<h3>Description</h3>

<p>Delete a related item.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>related_delete(id, url = get_default_url(), key = get_default_key(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="related_delete_+3A_id">id</code></td>
<td>
<p>(character) Resource identifier.</p>
</td></tr>
<tr><td><code id="related_delete_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca See
also <code><a href="#topic+ckanr_setup">ckanr_setup()</a></code> and <code><a href="#topic+get_default_url">get_default_url()</a></code>.</p>
</td></tr>
<tr><td><code id="related_delete_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="related_delete_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <a href="crul.html#topic+verb-POST">crul::verb-POST</a> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

# create a package and a related item
res &lt;- package_create("hello-venus2") %&gt;%
   related_create(title = "my resource",
                  type = "visualization")

# show the related item
related_delete(res)
## or with id itself:
## related_delete(res$id)

## End(Not run)
</code></pre>

<hr>
<h2 id='related_list'>List related items</h2><span id='topic+related_list'></span>

<h3>Description</h3>

<p>List related items
</p>


<h3>Usage</h3>

<pre><code class='language-R'>related_list(
  offset = 0,
  limit = 31,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="related_list_+3A_offset">offset</code></td>
<td>
<p>(numeric) Where to start getting activity items from
(optional, default: 0)</p>
</td></tr>
<tr><td><code id="related_list_+3A_limit">limit</code></td>
<td>
<p>(numeric) The maximum number of activities to return
(optional, default: 31)</p>
</td></tr>
<tr><td><code id="related_list_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="related_list_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="related_list_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="related_list_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
related_list()
related_list(as = 'json')
related_list(as = 'table')

## End(Not run)
</code></pre>

<hr>
<h2 id='related_show'>Show a related item</h2><span id='topic+related_show'></span>

<h3>Description</h3>

<p>Show a related item
</p>


<h3>Usage</h3>

<pre><code class='language-R'>related_show(
  id,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="related_show_+3A_id">id</code></td>
<td>
<p>(character) Related item identifier.</p>
</td></tr>
<tr><td><code id="related_show_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="related_show_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="related_show_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="related_show_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default the help and success slots are dropped, and only the
result slot is returned. You can request raw json with <code>as = 'json'</code>
then parse yourself to get the help slot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

# create a package and a related item
res &lt;- package_create("hello-pluto2") %&gt;%
   related_create(title = "my resource",
                  type = "visualization")

# show the related item
related_show(res)
related_show(res$id)

# get data back in different formats
related_show(res, as = 'json')
related_show(res, as = 'table')

## End(Not run)
</code></pre>

<hr>
<h2 id='related_update'>Update a related item</h2><span id='topic+related_update'></span>

<h3>Description</h3>

<p>Update a related item
</p>


<h3>Usage</h3>

<pre><code class='language-R'>related_update(
  id,
  title,
  type,
  description = NULL,
  related_id = NULL,
  related_url = NULL,
  image_url = NULL,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="related_update_+3A_id">id</code></td>
<td>
<p>(character) id of related item to update. This should be an
alphanumeric string. Required.</p>
</td></tr>
<tr><td><code id="related_update_+3A_title">title</code></td>
<td>
<p>(character) Title of the related item. Required.</p>
</td></tr>
<tr><td><code id="related_update_+3A_type">type</code></td>
<td>
<p>(character) The type of the related item. One of API,
application, idea, news article, paper, post or visualization. Required.</p>
</td></tr>
<tr><td><code id="related_update_+3A_description">description</code></td>
<td>
<p>(character) description (optional). Optional</p>
</td></tr>
<tr><td><code id="related_update_+3A_related_id">related_id</code></td>
<td>
<p>(character) An id to assign to the related item. If blank,
an ID will be assigned for you. Optional</p>
</td></tr>
<tr><td><code id="related_update_+3A_related_url">related_url</code></td>
<td>
<p>(character) A url to associated with the related item.
Optional</p>
</td></tr>
<tr><td><code id="related_update_+3A_image_url">image_url</code></td>
<td>
<p>(character) A url to associated image. Optional</p>
</td></tr>
<tr><td><code id="related_update_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="related_update_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="related_update_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="related_update_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

# create a package and related item
res &lt;- package_create("hello-saturn2") %&gt;%
   related_create(title = "my resource",
                  type = "visualization")

# update the related item
related_update(res, title = "her resource", type = "idea")

## End(Not run)
</code></pre>

<hr>
<h2 id='resource_create'>Create a resource</h2><span id='topic+resource_create'></span>

<h3>Description</h3>

<p>Create a resource
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resource_create(
  package_id = NULL,
  rcurl = NULL,
  revision_id = NULL,
  description = NULL,
  format = NULL,
  hash = NULL,
  name = NULL,
  resource_type = NULL,
  mimetype = NULL,
  mimetype_inner = NULL,
  webstore_url = NULL,
  cache_url = NULL,
  size = NULL,
  created = NULL,
  last_modified = NULL,
  cache_last_updated = NULL,
  webstore_last_updated = NULL,
  upload = NULL,
  extras = NULL,
  http_method = "GET",
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="resource_create_+3A_package_id">package_id</code></td>
<td>
<p>(character) id of package that the resource should be
added to. This should be an alphanumeric string. Required.</p>
</td></tr>
<tr><td><code id="resource_create_+3A_rcurl">rcurl</code></td>
<td>
<p>(character) url of resource. Required.</p>
</td></tr>
<tr><td><code id="resource_create_+3A_revision_id">revision_id</code></td>
<td>
<p>(character) revision id (optional)</p>
</td></tr>
<tr><td><code id="resource_create_+3A_description">description</code></td>
<td>
<p>(character) description (optional). Required.</p>
</td></tr>
<tr><td><code id="resource_create_+3A_format">format</code></td>
<td>
<p>(character) format (optional)</p>
</td></tr>
<tr><td><code id="resource_create_+3A_hash">hash</code></td>
<td>
<p>(character) hash (optional)</p>
</td></tr>
<tr><td><code id="resource_create_+3A_name">name</code></td>
<td>
<p>(character) name (optional). Required.</p>
</td></tr>
<tr><td><code id="resource_create_+3A_resource_type">resource_type</code></td>
<td>
<p>(character) resource type (optional)</p>
</td></tr>
<tr><td><code id="resource_create_+3A_mimetype">mimetype</code></td>
<td>
<p>(character) mime type (optional)</p>
</td></tr>
<tr><td><code id="resource_create_+3A_mimetype_inner">mimetype_inner</code></td>
<td>
<p>(character) mime type inner (optional)</p>
</td></tr>
<tr><td><code id="resource_create_+3A_webstore_url">webstore_url</code></td>
<td>
<p>(character) webstore url (optional)</p>
</td></tr>
<tr><td><code id="resource_create_+3A_cache_url">cache_url</code></td>
<td>
<p>(character) cache url(optional)</p>
</td></tr>
<tr><td><code id="resource_create_+3A_size">size</code></td>
<td>
<p>(integer) size (optional)</p>
</td></tr>
<tr><td><code id="resource_create_+3A_created">created</code></td>
<td>
<p>(character) iso date string (optional)</p>
</td></tr>
<tr><td><code id="resource_create_+3A_last_modified">last_modified</code></td>
<td>
<p>(character) iso date string (optional)</p>
</td></tr>
<tr><td><code id="resource_create_+3A_cache_last_updated">cache_last_updated</code></td>
<td>
<p>(character) iso date string (optional)</p>
</td></tr>
<tr><td><code id="resource_create_+3A_webstore_last_updated">webstore_last_updated</code></td>
<td>
<p>(character) iso date string (optional)</p>
</td></tr>
<tr><td><code id="resource_create_+3A_upload">upload</code></td>
<td>
<p>(character) A path to a local file (optional)</p>
</td></tr>
<tr><td><code id="resource_create_+3A_extras">extras</code></td>
<td>
<p>(list) - the resources' extra metadata fields (optional)</p>
</td></tr>
<tr><td><code id="resource_create_+3A_http_method">http_method</code></td>
<td>
<p>(character) which HTTP method (verb) to use; one of
&quot;GET&quot; or &quot;POST&quot;. Default: &quot;GET&quot;</p>
</td></tr>
<tr><td><code id="resource_create_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="resource_create_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="resource_create_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="resource_create_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/",
 key = getOption("ckan_demo_key"))

# create a package
(res &lt;- package_create("foobarrrr", author="Jane Doe"))

# then create a resource
file &lt;- system.file("examples", "actinidiaceae.csv", package = "ckanr")
(xx &lt;- resource_create(package_id = res$id,
                       description = "my resource",
                       name = "bears",
                       upload = file,
                       extras = list(species = "grizzly"),
                       rcurl = "http://google.com"
))

package_create("foobbbbbarrrr") %&gt;%
   resource_create(description = "my resource",
                   name = "bearsareus",
                   upload = file,
                   extras = list(my_extra = "some value"),
                   rcurl = "http://google.com")

## End(Not run)
</code></pre>

<hr>
<h2 id='resource_delete'>Delete a resource.</h2><span id='topic+resource_delete'></span>

<h3>Description</h3>

<p>Delete a resource.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resource_delete(id, url = get_default_url(), key = get_default_key(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="resource_delete_+3A_id">id</code></td>
<td>
<p>(character) Resource identifier.</p>
</td></tr>
<tr><td><code id="resource_delete_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca
See also <code><a href="#topic+ckanr_setup">ckanr_setup()</a></code> and <code><a href="#topic+get_default_url">get_default_url()</a></code>.</p>
</td></tr>
<tr><td><code id="resource_delete_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="resource_delete_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <a href="crul.html#topic+verb-POST">crul::verb-POST</a> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/", key = Sys.getenv("CKAN_DEMO_KEY"))

# create a package
(res &lt;- package_create("yellow9"))

# then create a resource
file &lt;- system.file("examples", "actinidiaceae.csv", package = "ckanr")
(xx &lt;- resource_create(res,
                       description = "my resource",
                       name = "bears",
                       upload = file,
                       rcurl = "http://google.com"
))

# delete the resource
resource_delete(xx)

## End(Not run)
</code></pre>

<hr>
<h2 id='resource_patch'>Update a resource's metadata</h2><span id='topic+resource_patch'></span>

<h3>Description</h3>

<p>Update a resource's metadata
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resource_patch(
  x,
  id,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="resource_patch_+3A_x">x</code></td>
<td>
<p>(list) A list with key-value pairs</p>
</td></tr>
<tr><td><code id="resource_patch_+3A_id">id</code></td>
<td>
<p>(character) Resource ID to update (required)</p>
</td></tr>
<tr><td><code id="resource_patch_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="resource_patch_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="resource_patch_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="resource_patch_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org", key = getOption("ckan_demo_key"))

# create a package
(res &lt;- package_create("twist", author="Alexandria"))

# then create a resource
file &lt;- system.file("examples", "actinidiaceae.csv", package = "ckanr")
(xx &lt;- resource_create(package_id = res$id, description = "my resource"))

# Get a resource
res &lt;- resource_show(xx$id)
res$description

# Make some changes
x &lt;- list(description = "My newer description")
z &lt;- resource_patch(x, id = res)
z$description

# Add an extra key:value pair
extra &lt;- list("extra_key" = "my special value")
zz &lt;- resource_patch(extra, id = res)
zz$extra_key

## End(Not run)
</code></pre>

<hr>
<h2 id='resource_search'>Search for resources.</h2><span id='topic+resource_search'></span>

<h3>Description</h3>

<p>Search for resources.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resource_search(
  q,
  sort = NULL,
  offset = NULL,
  limit = NULL,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="resource_search_+3A_q">q</code></td>
<td>
<p>Query terms. It is a string of the form <code>field:term</code> or a
vector/list of strings, each of the same form.  Within each string, <code>field</code>
is a field or extra field on the Resource domain object. If <code>field</code> is
hash, then an attempt is made to match the <code>term</code> as a <em>prefix</em> of the
Resource.hash field. If <code>field</code> is an extra field, then an attempt is
made to match against the extra fields stored against the Resource.</p>
</td></tr>
<tr><td><code id="resource_search_+3A_sort">sort</code></td>
<td>
<p>Field to sort on. You can specify ascending (e.g., score desc)
or descending (e.g., score asc), sort by two fields (e.g., score desc,
price asc), or sort by a function (e.g., sum(x_f, y_f) desc, which sorts
by the sum of x_f and y_f in a descending order).</p>
</td></tr>
<tr><td><code id="resource_search_+3A_offset">offset</code></td>
<td>
<p>Record to start at, default to beginning.</p>
</td></tr>
<tr><td><code id="resource_search_+3A_limit">limit</code></td>
<td>
<p>Number of records to return.</p>
</td></tr>
<tr><td><code id="resource_search_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="resource_search_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="resource_search_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="resource_search_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
resource_search(q = 'name:data')
resource_search(q = 'name:data', as = 'json')
resource_search(q = 'name:data', as = 'table')
resource_search(q = 'name:data', limit = 2, as = 'table')
resource_search(q=c("description:encoded", "name:No.2"),url='demo.ckan.org')

## End(Not run)
</code></pre>

<hr>
<h2 id='resource_show'>Show a resource.</h2><span id='topic+resource_show'></span>

<h3>Description</h3>

<p>Show a resource.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resource_show(
  id,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="resource_show_+3A_id">id</code></td>
<td>
<p>(character) Resource identifier.</p>
</td></tr>
<tr><td><code id="resource_show_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="resource_show_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="resource_show_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="resource_show_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/",
key = Sys.getenv("CKAN_DEMO_KEY"))

# create a package
(res &lt;- package_create("yellow7"))

# then create a resource
file &lt;- system.file("examples", "actinidiaceae.csv", package = "ckanr")
(xx &lt;- resource_create(package_id = res$id,
                       description = "my resource",
                       name = "bears",
                       upload = file,
                       rcurl = "http://google.com"
))

# show the resource
resource_show(xx$id)


# eg. from the NHM CKAN store
resource_show(id = "05ff2255-c38a-40c9-b657-4ccb55ab2feb",
              url = "http://data.nhm.ac.uk")

## End(Not run)
</code></pre>

<hr>
<h2 id='resource_update'>Update a resource</h2><span id='topic+resource_update'></span>

<h3>Description</h3>

<p>This function can be used to update a resource's file attachment
and &quot;extra&quot; metadata fields. Any update will also set the metadata key
&quot;last_updated&quot;. Other metadata, such as name or description, are not updated.
</p>
<p>The new file must exist on a local path. R objects have to be written to a
file, e.g. using <code>tempfile()</code> - see example.
</p>
<p>For convenience, CKAN base url and API key default to the global options,
which are set by <code>ckanr_setup</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resource_update(
  id,
  path = NULL,
  extras = list(),
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="resource_update_+3A_id">id</code></td>
<td>
<p>(character) Resource ID to update (required)</p>
</td></tr>
<tr><td><code id="resource_update_+3A_path">path</code></td>
<td>
<p>(character) Local path of the file to upload (optional)</p>
</td></tr>
<tr><td><code id="resource_update_+3A_extras">extras</code></td>
<td>
<p>(list) - the resources' extra metadata fields (optional)</p>
</td></tr>
<tr><td><code id="resource_update_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="resource_update_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="resource_update_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="resource_update_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The HTTP response from CKAN, formatted as list (default), table,
or JSON.
</p>


<h3>References</h3>

<p>http://docs.ckan.org/en/latest/api/index.html#ckan.logic.action.create.resource_create
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

# Get file
path &lt;- system.file("examples", "actinidiaceae.csv", package = "ckanr")

# Create package, then a resource within that package
(res &lt;- package_create("newpackage10"))
(xx &lt;- resource_create(package_id = res$id,
                       description = "my resource",
                       name = "bears",
                       upload = path,
                       rcurl = "http://google.com"
))

# Modify dataset, here lowercase strings in one column
dat &lt;- read.csv(path, stringsAsFactors = FALSE)
dat$Family &lt;- tolower(dat$Family)
newpath &lt;- tempfile(fileext = ".csv")
write.csv(dat, file = newpath, row.names = FALSE)

# Upload modified dataset
## Directly from output of resource_create
resource_update(xx, path=newpath)

## or from the resource id
resource_update(xx$id, path=newpath)

## optionally include extra tags
resource_update(xx$id, path=newpath,
                extras = list(some="metadata"))
                
# Update a resource's extra tags
## add extra tags without uploading a new file
resource_update(id,
                extras = list(some="metadata"))

## or remove all extra tags
resource_update(id, extras = list())                 

#######
# Using default settings
ckanr_setup(url = "http://demo.ckan.org/", key = "my-demo-ckan-org-api-key")
path &lt;- system.file("examples", "actinidiaceae.csv", package = "ckanr")
resource_update(id="an-existing-resource-id", path = path)

# Using an R object written to a tempfile, and implicit CKAN URL and API key
write.csv(data &lt;- installed.packages(), path &lt;- tempfile(fileext = ".csv"))
ckanr_setup(url = "http://demo.ckan.org/", key = "my-demo-ckan-org-api-key")
resource_update(id="an-existing-resource-id", path = path)

# Testing: see ?ckanr_setup to set default test CKAN url, key, package id
ckanr_setup(test_url = "http://my-ckan.org/",
            test_key = "my-ckan-api-key",
            test_did = "an-existing-package-id",
            test_rid = "an-existing-resource-id")
resource_update(id = get_test_rid(),
                path = system.file("examples",
                                   "actinidiaceae.csv",
                                   package = "ckanr"),
                key = get_test_key(),
                url = get_test_url())

# other file formats
## html
path &lt;- system.file("examples", "mapbox.html", package = "ckanr")

# Create package, then a resource within that package
(res &lt;- package_create("mappkg"))
(xx &lt;- resource_create(package_id = res$id,
                       description = "a map, yay",
                       name = "mapyay",
                       upload = path,
                       rcurl = "http://google.com"
))
browseURL(xx$url)

# Modify dataset, here lowercase strings in one column
dat &lt;- readLines(path)
dat &lt;- sub("-111.06", "-115.06", dat)
newpath &lt;- tempfile(fileext = ".html")
cat(dat, file = newpath, sep = "\n")

# Upload modified dataset
## Directly from output of resource_create
(xxx &lt;- resource_update(xx, path=newpath))
browseURL(xxx$url)

## End(Not run)
</code></pre>

<hr>
<h2 id='revision_list'>Return a list of the IDs of the site's revisions.</h2><span id='topic+revision_list'></span>

<h3>Description</h3>

<p>Return a list of the IDs of the site's revisions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>revision_list(
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="revision_list_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="revision_list_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="revision_list_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="revision_list_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
revision_list()
revision_list(as = "table")
revision_list(as = "json")

## End(Not run)
</code></pre>

<hr>
<h2 id='servers'>CKAN server URLS and other info</h2><span id='topic+servers'></span>

<h3>Description</h3>

<p>CKAN server URLS and other info
</p>


<h3>Usage</h3>

<pre><code class='language-R'>servers()
</code></pre>


<h3>Details</h3>

<p>Comes from the links at https://ckan.org/about/instances/
</p>
<p>There were a number of other URLs for CKAN instances in the CKAN URL
above, but some sites are now gone completely, or if they do exist,
I can't figure out how to get access to the CKAN API on their instance.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
servers()
ckan_info(servers()[5])

# what version is each CKAN server running
out &lt;- lapply(servers()[1:6], function(w) {
  cat(w, sep='\n') 
  ckan_info(w)
})
vapply(out, "[[", "", "ckan_version")

## End(Not run)
</code></pre>

<hr>
<h2 id='src_ckan'>Connect to CKAN with dplyr</h2><span id='topic+src_ckan'></span><span id='topic+dplyr-interface'></span>

<h3>Description</h3>

<p>Use <code>src_ckan</code> to connect to an existing CKAN instance and <code>tbl</code> to
connect to tables within that CKAN based on the DataStore Data API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>src_ckan(url)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="src_ckan_+3A_url">url</code></td>
<td>
<p>the url of the CKAN instance</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library("dplyr")

# To connect to a CKAN instance first create a src:
my_ckan &lt;- src_ckan("http://demo.ckan.org")

# List all tables in the CKAN instance
db_list_tables(my_ckan$con)

# Then reference a tbl within that src
my_tbl &lt;- tbl(src = my_ckan, name = "44d7de5f-7029-4f3a-a812-d7a70895da7d")

# You can use the dplyr verbs with my_tbl. For example:
dplyr::filter(my_tbl, GABARITO == "C")


## End(Not run)
</code></pre>

<hr>
<h2 id='tag_create'>Create a tag</h2><span id='topic+tag_create'></span>

<h3>Description</h3>

<p>IMPORTANT: You must be a sysadmin to create vocabulary tags.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tag_create(
  name,
  vocabulary_id,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tag_create_+3A_name">name</code></td>
<td>
<p>(character) The name for the new tag, a string between 2 and 100
characters long containing only alphanumeric characters and -, _ and .,
e.g. 'Jazz'</p>
</td></tr>
<tr><td><code id="tag_create_+3A_vocabulary_id">vocabulary_id</code></td>
<td>
<p>(character) The id of the vocabulary that the new
tag should be added to, e.g. the id of vocabulary 'Genre'</p>
</td></tr>
<tr><td><code id="tag_create_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="tag_create_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="tag_create_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="tag_create_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ckanr_setup(url = "https://demo.ckan.org/",
  key = Sys.getenv("CKAN_DEMO_KEY"))
tag_create(name = "TestTag1", vocabulary_id = "Testing1")

## End(Not run)
</code></pre>

<hr>
<h2 id='tag_list'>List tags.</h2><span id='topic+tag_list'></span>

<h3>Description</h3>

<p>List tags.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tag_list(
  query = NULL,
  vocabulary_id = NULL,
  all_fields = FALSE,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tag_list_+3A_query">query</code></td>
<td>
<p>(character) A tag name query to search for, if given only tags
whose names contain this string will be returned</p>
</td></tr>
<tr><td><code id="tag_list_+3A_vocabulary_id">vocabulary_id</code></td>
<td>
<p>(character) The id or name of a vocabulary, if given,
only tags that belong to this vocabulary will be returned</p>
</td></tr>
<tr><td><code id="tag_list_+3A_all_fields">all_fields</code></td>
<td>
<p>(logical) Return full tag dictionaries instead of
just names. Default: <code>FALSE</code></p>
</td></tr>
<tr><td><code id="tag_list_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="tag_list_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="tag_list_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="tag_list_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# list all tags
tag_list()

# search for a specific tag
tag_list(query = 'aviation')

# all fields
tag_list(all_fields = TRUE)

# give back different data formats
tag_list('aviation', as = 'json')
tag_list('aviation', as = 'table')

## End(Not run)
</code></pre>

<hr>
<h2 id='tag_search'>Search tags.</h2><span id='topic+tag_search'></span>

<h3>Description</h3>

<p>Search tags.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tag_search(
  query = NULL,
  vocabulary_id = NULL,
  offset = 0,
  limit = 31,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tag_search_+3A_query">query</code></td>
<td>
<p>(character) A tag name query to search for, if given only tags
whose names contain this string will be returned; one or more search
strings</p>
</td></tr>
<tr><td><code id="tag_search_+3A_vocabulary_id">vocabulary_id</code></td>
<td>
<p>(character) The id or name of a vocabulary,
if give only tags that belong to this vocabulary will be returned</p>
</td></tr>
<tr><td><code id="tag_search_+3A_offset">offset</code></td>
<td>
<p>(numeric) Where to start getting activity items from
(optional, default: 0)</p>
</td></tr>
<tr><td><code id="tag_search_+3A_limit">limit</code></td>
<td>
<p>(numeric) The maximum number of activities to return
(optional, default: 31)</p>
</td></tr>
<tr><td><code id="tag_search_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="tag_search_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="tag_search_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="tag_search_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
tag_search(query = 'ta')
tag_search(query = c('ta', 'al'))

# different formats back
tag_search(query = 'ta', as = 'json')
tag_search(query = 'ta', as = 'table')

## End(Not run)
</code></pre>

<hr>
<h2 id='tag_show'>Show a tag.</h2><span id='topic+tag_show'></span>

<h3>Description</h3>

<p>Show a tag.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tag_show(
  id,
  include_datasets = FALSE,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tag_show_+3A_id">id</code></td>
<td>
<p>(character) The name or id of the tag</p>
</td></tr>
<tr><td><code id="tag_show_+3A_include_datasets">include_datasets</code></td>
<td>
<p>include a list of up to 1000 of the tag's datasets.
Limit 1000 datasets, use <code><a href="#topic+package_search">package_search()</a></code> for more.
(optional, default: <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="tag_show_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="tag_show_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="tag_show_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="tag_show_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# get tags with tag_list()
tags &lt;- tag_list()
tags[[30]]$id

# show a tag
(x &lt;- tag_show(tags[[30]]$id))

# give back different data formats
tag_show(tags[[30]]$id, as = 'json')
tag_show(tags[[30]]$id, as = 'table')

## End(Not run)
</code></pre>

<hr>
<h2 id='user_activity_list'>Return a list of a user's activities</h2><span id='topic+user_activity_list'></span>

<h3>Description</h3>

<p>Return a list of a user's activities
</p>


<h3>Usage</h3>

<pre><code class='language-R'>user_activity_list(
  id,
  offset = 0,
  limit = 31,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="user_activity_list_+3A_id">id</code></td>
<td>
<p>(character) User identifier.</p>
</td></tr>
<tr><td><code id="user_activity_list_+3A_offset">offset</code></td>
<td>
<p>(numeric) Where to start getting activity items from
(optional, default: 0)</p>
</td></tr>
<tr><td><code id="user_activity_list_+3A_limit">limit</code></td>
<td>
<p>(numeric) The maximum number of activities to return
(optional, default: 31)</p>
</td></tr>
<tr><td><code id="user_activity_list_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="user_activity_list_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="user_activity_list_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="user_activity_list_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/",
key = getOption("ckan_demo_key"))

# list package activity
user_activity_list('sckottie')

# input a ckan_user object
(x &lt;- user_show('sckottie'))
user_activity_list(x)

# output different data formats
user_activity_list(x, as = "table")
user_activity_list(x, as = "json")

## End(Not run)
</code></pre>

<hr>
<h2 id='user_create'>Create a user.</h2><span id='topic+user_create'></span>

<h3>Description</h3>

<p>Create a user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>user_create(
  name,
  email,
  password,
  id = NULL,
  fullname = NULL,
  about = NULL,
  openid = NULL,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="user_create_+3A_name">name</code></td>
<td>
<p>(character) the name of the new user, a string between 2 and 100
characters in length, containing only lowercase alphanumeric
characters, - and _ (required)</p>
</td></tr>
<tr><td><code id="user_create_+3A_email">email</code></td>
<td>
<p>(character) the email address for the new user (required)</p>
</td></tr>
<tr><td><code id="user_create_+3A_password">password</code></td>
<td>
<p>(character) the password of the new user, a string of at
least 4 characters (required)</p>
</td></tr>
<tr><td><code id="user_create_+3A_id">id</code></td>
<td>
<p>(character) the id of the new user (optional)</p>
</td></tr>
<tr><td><code id="user_create_+3A_fullname">fullname</code></td>
<td>
<p>(character) user full name</p>
</td></tr>
<tr><td><code id="user_create_+3A_about">about</code></td>
<td>
<p>(character) a description of the new user (optional)</p>
</td></tr>
<tr><td><code id="user_create_+3A_openid">openid</code></td>
<td>
<p>(character) an openid (optional)</p>
</td></tr>
<tr><td><code id="user_create_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="user_create_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="user_create_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="user_create_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>References</h3>

<p>http://docs.ckan.org/en/latest/api/index.html#ckan.logic.action.create.user_create
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://data-demo.dpaw.wa.gov.au",
  key = "824e7c50-9577-4bfa-bf32-246ebed1a8a2")

# create a user
user_create(name = 'stacy', email = "stacy@aaaaa.com",
password = "helloworld")

## End(Not run)
</code></pre>

<hr>
<h2 id='user_delete'>Delete a user.</h2><span id='topic+user_delete'></span>

<h3>Description</h3>

<p>Delete a user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>user_delete(
  id,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="user_delete_+3A_id">id</code></td>
<td>
<p>(character) the id of the new user (required)</p>
</td></tr>
<tr><td><code id="user_delete_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="user_delete_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="user_delete_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="user_delete_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>References</h3>

<p>http://docs.ckan.org/en/latest/api/index.html#ckan.logic.action.delete.user_delete
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://data-demo.dpaw.wa.gov.au",
key = "824e7c50-9577-4bfa-bf32-246ebed1a8a2")

# create a user
res &lt;- user_delete(name = 'stacy', email = "stacy@aaaaa.com",
password = "helloworld")

# then, delete a user
user_delete(id = "stacy")

## End(Not run)
</code></pre>

<hr>
<h2 id='user_followee_count'>Return a a user's follower count</h2><span id='topic+user_followee_count'></span>

<h3>Description</h3>

<p>Return a a user's follower count
</p>


<h3>Usage</h3>

<pre><code class='language-R'>user_followee_count(
  id,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="user_followee_count_+3A_id">id</code></td>
<td>
<p>(character) User identifier.</p>
</td></tr>
<tr><td><code id="user_followee_count_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="user_followee_count_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="user_followee_count_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="user_followee_count_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

# list package activity
user_followee_count('sckottie')

# input a ckan_user object
(x &lt;- user_show('sckottie'))
user_followee_count(x)

# output different data formats
user_followee_count(x, as = "table")
user_followee_count(x, as = "json")

## End(Not run)
</code></pre>

<hr>
<h2 id='user_follower_count'>Return a a user's follower count</h2><span id='topic+user_follower_count'></span>

<h3>Description</h3>

<p>Return a a user's follower count
</p>


<h3>Usage</h3>

<pre><code class='language-R'>user_follower_count(
  id,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="user_follower_count_+3A_id">id</code></td>
<td>
<p>(character) User identifier.</p>
</td></tr>
<tr><td><code id="user_follower_count_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="user_follower_count_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="user_follower_count_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="user_follower_count_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

# list package activity
user_follower_count('sckottie')

# input a ckan_user object
(x &lt;- user_show('sckottie'))
user_follower_count(x)

# output different data formats
user_follower_count(x, as = "table")
user_follower_count(x, as = "json")

## End(Not run)
</code></pre>

<hr>
<h2 id='user_follower_list'>Return a a user's follower count</h2><span id='topic+user_follower_list'></span>

<h3>Description</h3>

<p>Return a a user's follower count
</p>


<h3>Usage</h3>

<pre><code class='language-R'>user_follower_list(
  id,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="user_follower_list_+3A_id">id</code></td>
<td>
<p>(character) User identifier.</p>
</td></tr>
<tr><td><code id="user_follower_list_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="user_follower_list_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="user_follower_list_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="user_follower_list_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

# list package activity
user_follower_list('sckottie')

# input a ckan_user object
(x &lt;- user_show('sckottie'))
user_follower_list(x)

# output different data formats
user_follower_list(x, as = "table")
user_follower_list(x, as = "json")

## End(Not run)
</code></pre>

<hr>
<h2 id='user_list'>Return a list of the site's user accounts.</h2><span id='topic+user_list'></span>

<h3>Description</h3>

<p>Return a list of the site's user accounts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>user_list(
  q = NULL,
  order_by = NULL,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="user_list_+3A_q">q</code></td>
<td>
<p>(character) Restrict the users returned to those whose names
contain a string</p>
</td></tr>
<tr><td><code id="user_list_+3A_order_by">order_by</code></td>
<td>
<p>(character) Which field to sort the list by
(optional, default: 'name')</p>
</td></tr>
<tr><td><code id="user_list_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="user_list_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="user_list_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="user_list_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# all users
user_list()

# search for a user
user_list(q = "j")

# different data formats
user_list(q = "j", as = "table")
user_list(q = "j", as = "json")

## End(Not run)
</code></pre>

<hr>
<h2 id='user_show'>Show a user.</h2><span id='topic+user_show'></span>

<h3>Description</h3>

<p>Show a user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>user_show(
  id,
  user_obj = NULL,
  include_datasets = FALSE,
  include_num_followers = FALSE,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="user_show_+3A_id">id</code></td>
<td>
<p>(character) Package identifier.</p>
</td></tr>
<tr><td><code id="user_show_+3A_user_obj">user_obj</code></td>
<td>
<p>(user dictionary) The user dictionary of the user (optional)</p>
</td></tr>
<tr><td><code id="user_show_+3A_include_datasets">include_datasets</code></td>
<td>
<p>(logical) Include a list of datasets the user has
created. If it is the same user or a sysadmin requesting, it includes
datasets that are draft or private. (optional, default:False, limit:50)</p>
</td></tr>
<tr><td><code id="user_show_+3A_include_num_followers">include_num_followers</code></td>
<td>
<p>(logical) Include the number of followers
the user has (optional, default:False)</p>
</td></tr>
<tr><td><code id="user_show_+3A_url">url</code></td>
<td>
<p>Base url to use. Default: https://data.ontario.ca/ See
also <code><a href="#topic+ckanr_setup">ckanr_setup</a></code> and <code><a href="#topic+get_default_url">get_default_url</a></code>.</p>
</td></tr>
<tr><td><code id="user_show_+3A_key">key</code></td>
<td>
<p>A privileged CKAN API key, Default: your key set with
<code><a href="#topic+ckanr_setup">ckanr_setup</a></code></p>
</td></tr>
<tr><td><code id="user_show_+3A_as">as</code></td>
<td>
<p>(character) One of list (default), table, or json. Parsing with
table option uses <code>jsonlite::fromJSON(..., simplifyDataFrame = TRUE)</code>,
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)</p>
</td></tr>
<tr><td><code id="user_show_+3A_...">...</code></td>
<td>
<p>Curl args passed on to <code><a href="crul.html#topic+verb-POST">verb-POST</a></code> (optional)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Setup
ckanr_setup(url = "https://demo.ckan.org/", key = getOption("ckan_demo_key"))

# show user
user_show('sckottie')

# include datasets
user_show('sckottie', include_datasets = TRUE)

# include datasets
user_show('sckottie', include_num_followers = TRUE)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
