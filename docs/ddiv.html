<!DOCTYPE html><html><head><title>Help for package ddiv</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ddiv}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#IV_4K'><p>Damp Heat Plus Dynamic Mechanical Load Indoor Accelerated Test I-V Curve.</p></a></li>
<li><a href='#IV_5M_1'><p>I-V Curves from External Solar Testing Laboratory.</p></a></li>
<li><a href='#IV_5M_2'><p>I-V Curves from External Solar Testing Laboratory.</p></a></li>
<li><a href='#IV_daystar'><p>Outdoor Time Series I-V Curve Data from SDLE SunFarm.</p></a></li>
<li><a href='#IV_step1'><p>A data frame of IV curve with 1 step.</p></a></li>
<li><a href='#IV_step2'><p>A data frame of IV curve with 2 step.</p></a></li>
<li><a href='#IV_step3'><p>A data frame of IV curve with 3 step.</p></a></li>
<li><a href='#IV_timeseries'><p>Outdoor Time Series I-V Curve Data from SDLE SunFarm.</p></a></li>
<li><a href='#IVExtractResult'><p>IV feature extraction</p></a></li>
<li><a href='#IVfeature'><p>Calculate IV feature from a IV curve</p></a></li>
<li><a href='#IVsteps'><p>Calculate steps of IV curve</p></a></li>
<li><a href='#IVuncertain'><p>Uncertainty for IV feature extraction</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Data Driven I-v Feature Extraction</td>
</tr>
<tr>
<td>Description:</td>
<td>The Data Driven I-V Feature Extraction is used to extract 
    Current-Voltage (I-V) features from I-V curves. I-V curves indicate the 
    relationship between current and voltage for a solar cell or Photovoltaic (PV) 
    modules. The I-V features such as maximum power point (Pmp), shunt resistance (Rsh), 
    series resistance (Rs),short circuit current (Isc), open circuit voltage (Voc), 
    fill factor (FF), current at maximum power (Imp) and voltage at maximum power(Vmp) 
    contain important information of the performance for PV modules. The traditional 
    method uses the single diode model to model I-V curves and extract I-V features. 
    This package does not use the diode model, but uses data-driven a method which 
    select different linear parts of the I-V curves to extract I-V features. 
    This method also uses a sampling method to calculate uncertainties when extracting 
    I-V features. Also, because of the partially shaded array, "steps" occurs in 
    I-V curves. The "Segmented Regression" method is used to identify steps in I-V curves.
    This material is based upon work supported by the U.S. Department of Energyâ€™s 
    Office of Energy Efficiency and Renewable Energy (EERE) under Solar Energy 
    Technologies Office (SETO) Agreement Number DE-EE0007140. Further information can be 
    found in the following paper.
    [1] Ma, X. et al, 2019. 
    &lt;<a href="https://doi.org/10.1109%2FJPHOTOV.2019.2928477">doi:10.1109/JPHOTOV.2019.2928477</a>&gt;.</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>MASS (&ge; 0.5-3.0), segmented (&ge; 0.5-3.0), qpdf (&ge; 1.1)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, testthat, knitr, tidyr</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-04-14 14:30:02 UTC; mmm308</td>
</tr>
<tr>
<td>Author:</td>
<td>Wei-Heng Huang <a href="https://orcid.org/0000-0002-6609-4981"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Xuan Ma <a href="https://orcid.org/0000-0003-2361-2846"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Jiqi Liu <a href="https://orcid.org/0000-0003-2016-4160"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Menghong Wang <a href="https://orcid.org/0000-0001-7349-699X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Alan J. Curran <a href="https://orcid.org/0000-0002-4505-8359"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Justin S. Fada <a href="https://orcid.org/0000-0002-0029-5051"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Jean-Nicolas Jaubert
    <a href="https://orcid.org/0000-0002-9663-6999"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Jing Sun <a href="https://orcid.org/0000-0002-4313-2316"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Jennifer L. Braid <a href="https://orcid.org/0000-0002-0677-7756"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Jenny Brynjarsdottir
    <a href="https://orcid.org/0000-0003-1859-4962"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Roger H. French <a href="https://orcid.org/0000-0002-6162-0532"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cph],
  Megan M. Morbitzer
    <a href="https://orcid.org/0000-0002-9847-2350"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Megan M. Morbitzer &lt;mmm308@case.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-04-14 23:00:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='IV_4K'>Damp Heat Plus Dynamic Mechanical Load Indoor Accelerated Test I-V Curve.</h2><span id='topic+IV_4K'></span>

<h3>Description</h3>

<p>The I-V curve data is provided by UL for MLEET (Module Level Exposure and Evaluation Test) project funded by DOE (Department of Energy). It was taken from some commercial brand full size PV (photovoltaic) module under dampheat + DML (Dynamic Mechanical Load) indoor accelerated test. Each I-V curve has about 3800 points.
This data set is a study of IV curve with 1 step. The first column is voltage(V) and the second column is current(I).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(IV_4K)
</code></pre>


<h3>Format</h3>

<p>A data frame with 3637 rows and 2 variables:
</p>

<dl>
<dt>V</dt><dd><p>increasing vector</p>
</dd>
<dt>I</dt><dd><p>decreasing vector</p>
</dd>
</dl>



<h3>Source</h3>

<p>Solar Durability and Lifetime Extension (SDLE) Research Center, Case Western
Reserve University
</p>

<hr>
<h2 id='IV_5M_1'>I-V Curves from External Solar Testing Laboratory.</h2><span id='topic+IV_5M_1'></span>

<h3>Description</h3>

<p>These 2 IV curves are from an external solar module testing facility. 2 full sized modules are featured, a standard poly-Si AL-BSF module and a similar PERC mono-Si module. The PERC module has a clearly higher power output compared to the Al-BSF module given the higher voltage and current output with a similar fill factor.
This data set is a study of IV curve with 1 step. The first column is voltage(V) and the second column is current(I).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(IV_5M_1)
</code></pre>


<h3>Format</h3>

<p>A data frame with 478 rows and 2 variables:
</p>

<dl>
<dt>V</dt><dd><p>increasing vector</p>
</dd>
<dt>I</dt><dd><p>decreasing vector</p>
</dd>
</dl>



<h3>Source</h3>

<p>Solar Durability and Lifetime Extension (SDLE) Research Center, Case Western
Reserve University
</p>

<hr>
<h2 id='IV_5M_2'>I-V Curves from External Solar Testing Laboratory.</h2><span id='topic+IV_5M_2'></span>

<h3>Description</h3>

<p>This data set is a study of IV curve with 1 step. The first column is voltage(V) and the second column is current(I).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(IV_5M_2)
</code></pre>


<h3>Format</h3>

<p>A data frame with 476 rows and 2 variables:
</p>

<dl>
<dt>V</dt><dd><p>increasing vector</p>
</dd>
<dt>I</dt><dd><p>decreasing vector</p>
</dd>
</dl>



<h3>Source</h3>

<p>Solar Durability and Lifetime Extension (SDLE) Research Center, Case Western
Reserve University
</p>

<hr>
<h2 id='IV_daystar'>Outdoor Time Series I-V Curve Data from SDLE SunFarm.</h2><span id='topic+IV_daystar'></span>

<h3>Description</h3>

<p>This dataset comes from SDLE SunFarm, which provides extensive outdoor exposure capabilities, including mini-modules and full size modules mounted on both dual axis trackers fixed racks. Modules are individually controlled and operated by Daystar multi-tracer system at their peak power during daylight hours. Data acquired include time-series I-V curve data taken every 10 minutes, and time series power, voltage, current and weather data collected every minute.
This data set is a study of IV curve with 1 step. The first column is voltage(V) and the second column is current(I).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(IV_daystar)
</code></pre>


<h3>Format</h3>

<p>A data frame with 48 rows and 2 variables:
</p>

<dl>
<dt>V</dt><dd><p>increasing vector</p>
</dd>
<dt>I</dt><dd><p>decreasing vector</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Menghong Wang, Jiqi Liu, Jennifer L. Braid, Roger H. French
</p>


<h3>Source</h3>

<p>Solar Durability and Lifetime Extension (SDLE) Research Center, Case Western
Reserve University
</p>

<hr>
<h2 id='IV_step1'>A data frame of IV curve with 1 step.</h2><span id='topic+IV_step1'></span>

<h3>Description</h3>

<p>This data set is a study of IV curve with 1 step. The first column is voltage(V) and the second column is current(I).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(IV_step1)
</code></pre>


<h3>Format</h3>

<p>A data frame with 41 rows and 2 variables:
</p>

<dl>
<dt>V</dt><dd><p>increasing vector</p>
</dd>
<dt>I</dt><dd><p>decreasing vector</p>
</dd>
</dl>



<h3>Source</h3>

<p>Solar Durability and Lifetime Extension (SDLE) Research Center, Case Western
Reserve University
</p>

<hr>
<h2 id='IV_step2'>A data frame of IV curve with 2 step.</h2><span id='topic+IV_step2'></span>

<h3>Description</h3>

<p>This data set is a study of IV curve with 2 step. The first column is voltage(V) and the second column is current(I).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(IV_step2)
</code></pre>


<h3>Format</h3>

<p>A data frame with 41 rows and 2 variables:
</p>

<dl>
<dt>V</dt><dd><p>increasing vector</p>
</dd>
<dt>I</dt><dd><p>decreasing vector</p>
</dd>
</dl>



<h3>Source</h3>

<p>Solar Durability and Lifetime Extension (SDLE) Research Center, Case Western
Reserve University
</p>

<hr>
<h2 id='IV_step3'>A data frame of IV curve with 3 step.</h2><span id='topic+IV_step3'></span>

<h3>Description</h3>

<p>This data set is a study of IV curve with 3 step. The first column is voltage(V) and the second column is current(I).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(IV_step3)
</code></pre>


<h3>Format</h3>

<p>A data frame with 41 rows and 2 variables:
</p>

<dl>
<dt>V</dt><dd><p>increasing vector</p>
</dd>
<dt>I</dt><dd><p>decreasing vector</p>
</dd>
</dl>



<h3>Source</h3>

<p>Solar Durability and Lifetime Extension (SDLE) Research Center, Case Western
Reserve University
</p>

<hr>
<h2 id='IV_timeseries'>Outdoor Time Series I-V Curve Data from SDLE SunFarm.</h2><span id='topic+IV_timeseries'></span>

<h3>Description</h3>

<p>This dataset comes from a long term time-series I-V curves dataset of full sized modules traced by ESL-Solar 500. Data acquired include outdoor time-series I-V curve data taken every 5 minutes from 2013-12-29 09:00:00 to 2013-12-29 13:55:00.
This data set is an example of how to use I-V data for a timeseries. The first column is timestamp(tmst) and the second column is I-V curve data(ivdf) that can be separated into voltage(V) and current(I).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(IV_timeseries)
</code></pre>


<h3>Format</h3>

<p>A data frame with 60 rows and 2 variables:
</p>

<dl>
<dt>tmst</dt><dd><p>date and time of measurement</p>
</dd>
<dt>ivdf</dt><dd><p>I-V curve data points in a string format separated by &quot;#&quot; and voltage and current value separated by &quot;*&quot;</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Jiqi Liu, Roger H. French, Megan M. Morbitzer
</p>


<h3>Source</h3>

<p>Solar Durability and Lifetime Extension (SDLE) Research Center, Case Western
Reserve University
</p>

<hr>
<h2 id='IVExtractResult'>IV feature extraction</h2><span id='topic+IVExtractResult'></span>

<h3>Description</h3>

<p>This function carries out IV feature extraction, by calculating steps then extract features for each step.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>IVExtractResult(
  dat,
  k = 7,
  crt = 0.2,
  num = 75,
  crtvalb = 0.3,
  diff_slp = 0.01,
  plot.option = F
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="IVExtractResult_+3A_dat">dat</code></td>
<td>
<p>A dataframe of IV curve. The variable names should be &quot;V&quot; for voltage, and &quot;I&quot; for current. And rank with increasing voltage.</p>
</td></tr>
<tr><td><code id="IVExtractResult_+3A_k">k</code></td>
<td>
<p>The number of equally-spaced values to supply as starting values for the breakpoints. The default is 7.</p>
</td></tr>
<tr><td><code id="IVExtractResult_+3A_crt">crt</code></td>
<td>
<p>A value to set for how large of regression coefficient change rate we use as not changing much. This is due to the value of IV curve, suggestion is to test this function with several IV curves for your data and find the proper value. The default is 0.2.</p>
</td></tr>
<tr><td><code id="IVExtractResult_+3A_num">num</code></td>
<td>
<p>A value of number of data points. The default is 75.</p>
</td></tr>
<tr><td><code id="IVExtractResult_+3A_crtvalb">crtvalb</code></td>
<td>
<p>A value to set the change of I(current) we want to use as changing very much (to detect the end of IV curve). Suggestion is to test this function with several IV curves for your data and find the proper value. The default is 0.3</p>
</td></tr>
<tr><td><code id="IVExtractResult_+3A_diff_slp">diff_slp</code></td>
<td>
<p>The difference between the slope on the left and on the right of the change point. The default is 0.01.</p>
</td></tr>
<tr><td><code id="IVExtractResult_+3A_plot.option">plot.option</code></td>
<td>
<p>True/False, it plots the IV curve. The default is false.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of the following items:
</p>

<ul>
<li><p> &quot;step&quot;: a value that shows the number of steps in the IV curve
</p>
</li>
<li><p> &quot;Isc&quot;: short-circuit current, which is the current through the solar cell when the voltage across the solar cell is zero.
</p>
</li>
<li><p> &quot;Rsh&quot;: shunt resistance, which is the inverse slope of the IV curve near Isc.
</p>
</li>
<li><p> &quot;Voc&quot;: open-circuit voltage, which is the maximum voltage from a solar cell and occurs at zero current.
</p>
</li>
<li><p> &quot;Rs&quot;: series resistance, which is the inverse slope of the IV curve near Voc.
</p>
</li>
<li><p> &quot;Pmp&quot;: maximum power for a solar cell/PV module.
</p>
</li>
<li><p> &quot;Imp&quot;: current at maximum power.
</p>
</li>
<li><p> &quot;Vmp&quot;: voltage at maximum power.
</p>
</li>
<li><p> &quot;FF&quot;: fill factor, which is the ratio of maximum power from a solar cell to the product of Voc and Isc.
</p>
</li>
<li><p> &quot;Cutoff&quot;: a string of values (voltage) that shows the change point indicating steps. NA means that the IV curve has only one step and there is no change points.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>#this IV curve is of step=1
#load the data provided in the package
data(IV_step1)
IV1 &lt;- data.frame(IV_step1)
result &lt;- IVExtractResult(IV1, plot.option = FALSE)
#use the IV curve with step=2
data(IV_step2)
IV2 &lt;- data.frame(IV_step2)
#with plot.option=TRUE, IV curve and steps are ploted
result2 &lt;- IVExtractResult(IV2, plot.option = FALSE)
#use the IV curve with step=3
data(IV_step3)
IV3 &lt;- data.frame(IV_step3)
IVExtractResult(IV3, plot.option = FALSE)

data("IV_timeseries")
df &lt;- IV_timeseries
result &lt;- data.frame()
for (i in 1:length(df$tmst)){
  IV = df$ivdf[i]
  IV &lt;- as.character(IV)
  IV = data.frame(IV = strsplit(IV, '#'))
  names(IV) &lt;- 'IV'
  IV$IV &lt;- as.character(IV$IV)
  IV &lt;- tidyr::separate(IV, "IV", into = c("V", "I"), sep = '\\*')
  IV &lt;- IV[-1,]
  IV$V = as.numeric(as.character(IV$V))
  IV$I = as.numeric(as.character(IV$I))
  IV = IV[order(IV$V, decreasing = FALSE),]
  IV_frame &lt;- data.frame(IV)
  trial = try(IVfeature(IV_frame$I, IV_frame$V), silent = TRUE)
  if ('try-error' %in% class(trial)){
    temp &lt;- data.frame(NA, NA, NA, NA, NA, NA, NA, NA)
    names(temp) &lt;- c('Isc', 'Rsh', 'Voc', 'Rs', 'Pmp', 'Imp', 'Vmp', 'FF')
  }else{
    temp &lt;- data.frame(trial)
  }
  result &lt;- rbind(result, temp)
}
result &lt;- cbind(df, result)
</code></pre>

<hr>
<h2 id='IVfeature'>Calculate IV feature from a IV curve</h2><span id='topic+IVfeature'></span>

<h3>Description</h3>

<p>Calculate IV feature from the given IV curve with one step
</p>


<h3>Usage</h3>

<pre><code class='language-R'>IVfeature(I, V, crt = 0.2, num = 75, crtvalb = 0.3)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="IVfeature_+3A_i">I</code></td>
<td>
<p>A vector of current values from IV data frame</p>
</td></tr>
<tr><td><code id="IVfeature_+3A_v">V</code></td>
<td>
<p>A vector of voltage values from IV data frame</p>
</td></tr>
<tr><td><code id="IVfeature_+3A_crt">crt</code></td>
<td>
<p>A value to set for how large of regression coefficient change rate we use as not changing much. This is due to the value of IV curve, suggestion is to test this function with several IV curves for your data and find the proper value. The default is 0.2.</p>
</td></tr>
<tr><td><code id="IVfeature_+3A_num">num</code></td>
<td>
<p>A value of number of consecutive data points in the moving window used to calculate the slope of the windows and flat areas for extracting Isc and Rsh. The default is 75.</p>
</td></tr>
<tr><td><code id="IVfeature_+3A_crtvalb">crtvalb</code></td>
<td>
<p>A value to set the change of I(current) we want to use as changing very much (to detect the end of IV curve). Suggestion is to test this function with several IV curves for your data and find the proper value. The default is 0.3</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that IV curve should have voltage ordered from the smalles value to the largest value.
</p>
<p>This function can gives result for IV curves with more than one steps, but the results are not accurate.
To extract IV features for IV curves with more than one steps, or unsure about the steps of IV curves, please use IVExtractResult().
For IV curve has only one step, this function can be used.
</p>


<h3>Value</h3>

<p>a list of the following items:
</p>

<ul>
<li><p> &quot;Isc&quot;: short-circuit current, which is the current through the solar cell when the voltage across the solar cell is zero.
</p>
</li>
<li><p> &quot;Rsh&quot;: shunt resistance, which is the inverse slope of the IV curve near Isc.
</p>
</li>
<li><p> &quot;Voc&quot;: open-circuit voltage, which is the maximum voltage from a solar cell and occurs at zero current.
</p>
</li>
<li><p> &quot;Rs&quot;: series resistance, which is the inverse slope of the IV curve near Voc.
</p>
</li>
<li><p> &quot;Pmp&quot;: maximum power for a solar cell/PV module.
</p>
</li>
<li><p> &quot;Imp&quot;: current at maximum power.
</p>
</li>
<li><p> &quot;Vmp&quot;: voltage at maximum power.
</p>
</li>
<li><p> &quot;FF&quot;: fill factor, which is the ratio of maximum power from a solar cell to the product of Voc and Isc.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>#this IV curve is of step=1
#if IV curve is of step&gt;1, please use IVsteps to first find the number of
#steps and change points, then apply this function for each steps
#load the data provided in the package
data(IV_step1)
IV1 &lt;- data.frame(IV_step1)
result &lt;- IVfeature(IV1$I,IV1$V,crt=0.2,num=75,crtvalb=0.3)

data("IV_timeseries")
df &lt;- IV_timeseries
result &lt;- data.frame()
for (i in 1:length(df$tmst)){
  IV = df$ivdf[i]
  IV &lt;- as.character(IV)
  IV = data.frame(IV = strsplit(IV,'#'))
  names(IV) &lt;- 'IV'
  IV$IV &lt;- as.character(IV$IV)
  IV &lt;- tidyr::separate(IV,"IV",into = c("V","I"),sep = '\\*')
  IV &lt;- IV[-1,]
  IV$V = as.numeric(as.character(IV$V))
  IV$I=as.numeric(as.character(IV$I))
  IV=IV[order(IV$V,decreasing=FALSE),]
  IV_frame &lt;- data.frame(IV)
  trial=try(IVfeature(IV_frame$I,IV_frame$V),silent=TRUE)
  if ('try-error' %in% class(trial)){
    temp &lt;-  data.frame(NA,NA,NA,NA,NA,NA,NA,NA)
    names(temp) &lt;- c('Isc','Rsh','Voc','Rs','Pmp','Imp','Vmp','FF')
  }else{
    temp &lt;- data.frame(trial)
  }
  result &lt;- rbind(result,temp)
 }
 result &lt;- cbind(df,result)
</code></pre>

<hr>
<h2 id='IVsteps'>Calculate steps of IV curve</h2><span id='topic+IVsteps'></span>

<h3>Description</h3>

<p>Calculate steps of IV curve
</p>


<h3>Usage</h3>

<pre><code class='language-R'>IVsteps(I, V, k = 7, diff_slp = 0.01, plot.option = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="IVsteps_+3A_i">I</code></td>
<td>
<p>A vector of current values from IV data frame</p>
</td></tr>
<tr><td><code id="IVsteps_+3A_v">V</code></td>
<td>
<p>A vector of voltage values from IV data frame</p>
</td></tr>
<tr><td><code id="IVsteps_+3A_k">k</code></td>
<td>
<p>The number of equally-spaced values to supply as starting values for the breakpoints. The default is 7.</p>
</td></tr>
<tr><td><code id="IVsteps_+3A_diff_slp">diff_slp</code></td>
<td>
<p>The difference between the slope on the left and on the right of the change point. The default is 0.01.</p>
</td></tr>
<tr><td><code id="IVsteps_+3A_plot.option">plot.option</code></td>
<td>
<p>True/False, it plots the IV curve. The default is false.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of the following items:
</p>

<ul>
<li><p> &quot;step&quot;: a value that shows how many steps of IV curve
</p>
</li>
<li><p> &quot;xsep&quot;: a vector of values (voltage) that shows the change point indicating steps. NA means that the IV curve has only one step and there is no change points.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>#this IV curve is of step=1
#load the data provided in the package
data(IV_step1)
IV1 &lt;- data.frame(IV_step1)
result &lt;- IVsteps(IV1$I,IV1$V)
#use the IV curve with step=2
data(IV_step2)
IV2 &lt;- data.frame(IV_step2)
#with plot.option=TRUE, IV curve and steps are ploted
result2 &lt;- IVsteps(IV2$I,IV2$V,plot.option=TRUE)

</code></pre>

<hr>
<h2 id='IVuncertain'>Uncertainty for IV feature extraction</h2><span id='topic+IVuncertain'></span>

<h3>Description</h3>

<p>Calculate the uncertainty of this data driven IV feature extraction
</p>


<h3>Usage</h3>

<pre><code class='language-R'>IVuncertain(
  dat,
  k = 7,
  crt = 0.2,
  num = 75,
  crtvalb = 0.3,
  iter = 100,
  diff_slp = 0.01,
  plot.option = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="IVuncertain_+3A_dat">dat</code></td>
<td>
<p>A dataframe of IV curve. The variable names should be &quot;V&quot; for voltage, and &quot;I&quot; for current. And rank with increasing voltage.</p>
</td></tr>
<tr><td><code id="IVuncertain_+3A_k">k</code></td>
<td>
<p>The number of equally-spaced values to supply as starting values for the breakpoints. The default is 7.</p>
</td></tr>
<tr><td><code id="IVuncertain_+3A_crt">crt</code></td>
<td>
<p>a value to set for how large of regression coefficient change rate we use as not changing much. Should be the same as using function &quot;IVExtractResult&quot;. Default is 0.6.</p>
</td></tr>
<tr><td><code id="IVuncertain_+3A_num">num</code></td>
<td>
<p>a value of number of data points. The default is 25.</p>
</td></tr>
<tr><td><code id="IVuncertain_+3A_crtvalb">crtvalb</code></td>
<td>
<p>a value to set the change of I(current) we want to use as changing very much (to detect the end of IV curve). Suggestion is to test this function with several IV curves for your data and find the proper value. The default is 0.3</p>
</td></tr>
<tr><td><code id="IVuncertain_+3A_iter">iter</code></td>
<td>
<p>number of iterations want to use to calculate uncertainty. Default is 100, takes about 2 minutes to finish calculation.</p>
</td></tr>
<tr><td><code id="IVuncertain_+3A_diff_slp">diff_slp</code></td>
<td>
<p>The difference between the slope on the left and on the right of the change point. The default is 0.01.</p>
</td></tr>
<tr><td><code id="IVuncertain_+3A_plot.option">plot.option</code></td>
<td>
<p>True/False, it plots the IV curve. The default is false.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of the following items:
</p>

<ul>
<li><p> &quot;unct_Isc&quot;: uncertainty for short-circuit current, the number of variables is decided by the number of steps.
</p>
</li>
<li><p> &quot;unct_Rsh&quot;: uncertainty for shunt resistance, the number of variables is decided by the number of steps.
</p>
</li>
<li><p> &quot;unct_Voc&quot;: uncertainty for open-circuit voltage, the number of variables is decided by the number of steps.
</p>
</li>
<li><p> &quot;unct_Rs&quot;: uncertainty for series resistance, the number of variables is decided by the number of steps.
</p>
</li>
<li><p> &quot;unct_Pmp&quot;: uncertainty for maximum power for a solar cell/PV module, the number of variables is decided by the number of steps.
</p>
</li>
<li><p> &quot;unct_Imp&quot;: uncertainty for current at maximum power, the number of variables is decided by the number of steps.
</p>
</li>
<li><p> &quot;unct_Vmp&quot;: uncertainty for voltage at maximum power, the number of variables is decided by the number of steps.
</p>
</li>
<li><p> &quot;unct_FF&quot;: uncertainty for fill factor, the number of variables is decided by the number of steps.
</p>
</li>
<li><p> &quot;unct_Cutoff&quot;: uncertainty for change point indicating steps. NA means that the IV curve has only one step and there is no change points.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>#this IV curve is of step=1
data(IV_step1)
IV1 &lt;- data.frame(IV_step1)
IVuncertain(IV1)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
