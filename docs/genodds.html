<!DOCTYPE html><html lang="en"><head><title>Help for package genodds</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {genodds}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#alteplase'><p>Effect of time to treatment on efficacy of rt-PA in treating acute stroke</p></a></li>
<li><a href='#genodds'><p>Generalized Odds Ratios</p></a></li>
<li><a href='#genodds.power'><p>Power Calculations for Generalized Odds Ratios</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Generalised Odds Ratios</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-06-23</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hannah Johns &lt;htjohns@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>
  Calculates Agresti's generalized odds ratios.
  For a randomly selected pair of observations
  from two groups, calculates the odds that
  the second group will have a higher scoring outcome
  than that of the first group.
  Package provides hypothesis testing for if this odds
  ratio is significantly different to 1 (equal chance).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2.0)]</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.12.3)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 2.1.0)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-06-23 02:55:24 UTC; htjoh</td>
</tr>
<tr>
<td>Author:</td>
<td>Hannah Johns <a href="https://orcid.org/0000-0003-2135-0504"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-06-23 08:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='alteplase'>Effect of time to treatment on efficacy of rt-PA in treating acute stroke</h2><span id='topic+alteplase'></span>

<h3>Description</h3>

<p>A dataset reconstructing reported outcomes after stroke
as reported in Lees et. al. (2010) which pooled the results
of several studies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>alteplase
</code></pre>


<h3>Format</h3>

<p>A data frame with 3669 rows and 3 variables:
</p>

<dl>
<dt>time</dt><dd><p>Time interval (minutes) between stroke onset and treatment</p>
</dd>
<dt>treat</dt><dd><p>Type of treatment received</p>
</dd>
<dt>mRS</dt><dd><p>Outcome at 3 months measured using the modified Rankin Scale</p>
</dd>
</dl>



<h3>References</h3>

<p>Lees, K. R., Bluhmki, E., Von Kummer, R., Brott, T. G.,
Toni, D., Grotta, J. C.,  Albers, G. W., Kaste, M., Marler, J. R.,
Hamilton, S. A., Tilley, B. C., Davis, S. M., Donnan, G. A., Hacke, W.
(2010).
Time to treatment with intravenous alteplase and outcome in stroke:
an updated pooled analysis of ECASS, ATLANTIS, NINDS, and EPITHET trials.
<em>The Lancet</em>, 375(9727), 1695-1703.
</p>

<hr>
<h2 id='genodds'>Generalized Odds Ratios</h2><span id='topic+genodds'></span><span id='topic+print.Genodds'></span>

<h3>Description</h3>

<p>Performs Agresti's Generalized Odds Ratios (GenOR) for two-group ordinal data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>genodds(response, group, strata=NULL,
        alpha=0.05,ties="split",
        nnt=FALSE,verbose=FALSE,upper=TRUE, suppress_interpretation=FALSE,
        assume_no_effect=FALSE,
        permutation_test=FALSE, nPermutations=5000)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="genodds_+3A_response">response</code></td>
<td>
<p>A (non-empty) vector. Gives the outcome measure.
If a factor, level order is used to determine ranking of outcomes.</p>
</td></tr>
<tr><td><code id="genodds_+3A_group">group</code></td>
<td>
<p>A factor vector of equal length to <code>response</code>.
Gives the groups for the test. Must take on exactly 2 values.</p>
</td></tr>
<tr><td><code id="genodds_+3A_strata">strata</code></td>
<td>
<p>An optional factor vector of equal length to <code>response</code>.
Gives treatment blocks to separate comparisons.</p>
</td></tr>
<tr><td><code id="genodds_+3A_alpha">alpha</code></td>
<td>
<p>The acceptable type 1 error used in the test.</p>
</td></tr>
<tr><td><code id="genodds_+3A_ties">ties</code></td>
<td>
<p>A string specifying how ties should be treated.
Should be equal to &quot;split&quot; 0.5 for WMW Odds,
or &quot;drop&quot; for Agresti's GenOR.</p>
</td></tr>
<tr><td><code id="genodds_+3A_nnt">nnt</code></td>
<td>
<p>A boolean.
If <code>TRUE</code>, then print number needed to treat in addition to generalised odds ratios.</p>
</td></tr>
<tr><td><code id="genodds_+3A_verbose">verbose</code></td>
<td>
<p>A boolean.
If <code>TRUE</code>, then print both pooled odds and relative risk ratio matrices
regardless of result of statistical test.</p>
</td></tr>
<tr><td><code id="genodds_+3A_upper">upper</code></td>
<td>
<p>A boolean specifying if the upper triangle
of relative risk ratios should be printed.
If <code>FALSE</code>, lower triangle is used instead.</p>
</td></tr>
<tr><td><code id="genodds_+3A_suppress_interpretation">suppress_interpretation</code></td>
<td>
<p>A boolean specifying if the interpretable summary statements of results should be suppressed.</p>
</td></tr>
<tr><td><code id="genodds_+3A_assume_no_effect">assume_no_effect</code></td>
<td>
<p>A boolean indicating if p-values and confidence intervals should be calculated
using pooled_SElnnull (if TRUE) or pooled_SElnodds (if FALSE).</p>
</td></tr>
<tr><td><code id="genodds_+3A_permutation_test">permutation_test</code></td>
<td>
<p>A boolean specifying if a permutation test should be performed on the data</p>
</td></tr>
<tr><td><code id="genodds_+3A_npermutations">nPermutations</code></td>
<td>
<p>The number of permutations to use in the permutation test</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Agresti's generalized odds ratios (GenOR) calculates the odds that,
if a pair of observations are randomly selected from
two groups, the outcome in one group is higher than the other.
This implementation determines the direction of this comparison
using factor levels. Odds are given with reference to
observations corresponding to the higher <code>group</code> level
resulting in a higher value in <code>response</code>.
The opposite direction can be calculated by either calculating 1/genodds,
or by specifying <code>response=1-response</code> in function input.
</p>
<p>If <code>nnt=TRUE</code>, the Number Needed to Treat (NNT) is printed.
NNT is a health economics measure and is related to generalised
odds ratios through the formula NNT=1+2/(GenOR-1).
It measures the expected number of patients required for a
treatment to have impacted a patient's outcome.
In this implementation, a positive NNT occurs when GenOR&gt;1
and corresponds to the number needed to treat in the higher
<code>group</code> level to observe a higher <code>response</code> value,
while a negative NNT occurs when GenOR&lt;1 and corresponds
to the number needed to treat in the higher <code>group</code>
level to observe a lower <code>response</code> value.
If the confidence interval for GenOR straddles 1,
the confidence interval for NNT is given as the union of disjoint
intervals.
</p>
<p><code>ties</code> changes how ties are treated. If <code>"split"</code> is provided,
then ties are equally split between favouring both groups
(following the approach set out by O'Brien et. al. (2006)).
If <code>"drop"</code> is provided, then ties are ignored
(following the approach set out by Agresti (1980)).
By default, <code>"split"</code> is used.
</p>
<p>If <code>assume_no_effect==TRUE</code>, use O'Brien's method for calculating standard
error under null for the purposes of calculating p-values and confidence intervals.
If <code>assume_no_effect==FALSE</code> (the default option), then p-values and confidence intervals
will be calculated using standard error instead.
</p>
<p>If <code>strata</code> is specified, generalized odds ratios are calculated
separately for each individual strata. If in-stratum odds ratios are not
significantly different from each other (with significance level <code>alpha</code>),
these odds are pooled to obtain a global odds ratio which is adjusted
for strata. If in-stratum odds ratios are significantly different, a matrix containing
the relative risk ratios between stratum is printed, along with Z-scores
corresponding to the significance of these differences.
If <code>verbose=TRUE</code> is supplied, both pooled odds and relative risk ratios
are printed regardless of if the between-stratum odds ratios are
significantly different.
</p>
<p>Permutation testing is performed following the approach suggested by Howard et al. (2012),
where the probability of a random observation from one group achieving a higher score
than a patient in another group is calculated (given there is a difference between the scores),
and then the <code>group</code> labels are randomly shuffled to guarantee the null hypothesis
of no difference between groups is true. The permutation test p-value is the proportion of such
permutations which result in a test statistic more extreme than what was observed on the original
data, forming a two-tail test. This procedure is equivalent to that provided by Agresti's generalised
odds ratio, and is implemented here for both methods of handling <code>ties</code>.
</p>
<p>By default, <code>print.genodds()</code> will report an interpretable summary of the test statistic
following a loosely modified form of the statements suggested by Howard et al. (2012).
This may be suppressed by specifying <code>suppress_interpretation=TRUE</code>.
</p>
<p>Options <code>verbose</code>, <code>nnt</code>, <code>upper</code>, and <code>suppress_interpretation</code>
may be re-specified when using print method.
</p>


<h3>Value</h3>

<p>A list with class &quot;<code>Genodds</code>&quot; containing the following:
</p>

<dl>
<dt>pooled_lnodds</dt><dd><p>The pooled log(odds).</p>
</dd>
<dt>pooled_lnconf.int</dt><dd><p>(1-<code>alpha</code>)% Confidence intervals for pooled log(odds).</p>
</dd>
<dt>pooled_SElnodds</dt><dd><p>Standard error of pooled log(odds).</p>
</dd>
<dt>pooled_SElnnull</dt><dd><p>Standard error of pooled log(odds) under the null hypothesis.</p>
</dd>
<dt>pooled_p</dt><dd><p>The p-value of the test of pooled log(odds) = 1.</p>
</dd>
<dt>pooled_rel_statistic</dt><dd><p>Statistic of test that strata odds are equal.</p>
</dd>
<dt>pooled_rel_p</dt><dd><p>p-value for test that strata odds are equal.</p>
</dd>
<dt>relative_lnodds</dt><dd><p>A matrix giving the log of the ratio of odds between strata (generalised relative risk ratio).</p>
</dd>
<dt>relative_selnodds</dt><dd><p>A matrix containing the standard error of the log(relative risk ratio).</p>
</dd>
<dt>results</dt><dd><p>A list containing a summary of each strata measure.</p>
</dd>
<dt>param.record</dt><dd><p>A list containing parameters used in the test.</p>
</dd>
</dl>



<h3>References</h3>

<p>Agresti, A. (1980). Generalized odds ratios for ordinal data.
<em>Biometrics</em>, 59-67.
</p>
<p>O'Brien, R. G., &amp; Castelloe, J. (2006, March).
Exploiting the link between the Wilcoxon-Mann-Whitney test and a simple odds statistic.
In <em>Thirty-first Annual SAS Users Group International Conference</em>.
</p>
<p>Churilov, L., Arnup, S., Johns, H., Leung, T., Roberts,
S., Campbell, B. C., Davis, S. M. &amp; Donnan, G. A. (2014).
An improved method for simple, assumption-free ordinal analysis of the
modified Rankin Scale using generalized odds ratios.
<em>International Journal of Stroke</em>, 9(8), 999-1005.
</p>
<p>Howard, G., Waller, J. L., Voeks, J. H., Howard, V. J., Jauch, E. C.,
Lees, K. R., ... &amp; Hess, D. C. (2012). A simple, assumption-free,
and clinically interpretable approach for analysis of modified Rankin
outcomes. <em>Stroke</em>, 43(3), 664-669.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Use the alteplase dataset provided by package and calculate genodds
df &lt;- alteplase
x &lt;- genodds(df$mRS,df$treat,df$time)
x
print(x,nnt=TRUE)

</code></pre>

<hr>
<h2 id='genodds.power'>Power Calculations for Generalized Odds Ratios</h2><span id='topic+genodds.power'></span>

<h3>Description</h3>

<p>Provides power analysis for Agresti's Generalized Odds Ratios.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>genodds.power(
  p0,
  p1,
  N = NULL,
  power = NULL,
  alpha = 0.05,
  ties = "split",
  w = c(0.5, 0.5),
  direction = "two.sided"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="genodds.power_+3A_p0">p0</code></td>
<td>
<p>A numeric vector contianing the probabilities in control group.</p>
</td></tr>
<tr><td><code id="genodds.power_+3A_p1">p1</code></td>
<td>
<p>A numeric vector contianing the probabilities in treatment group.</p>
</td></tr>
<tr><td><code id="genodds.power_+3A_n">N</code></td>
<td>
<p>A numeirc vector containing total sample sizes.</p>
</td></tr>
<tr><td><code id="genodds.power_+3A_power">power</code></td>
<td>
<p>A numeric vector containing required  total sample size.</p>
</td></tr>
<tr><td><code id="genodds.power_+3A_alpha">alpha</code></td>
<td>
<p>Type 1 error.</p>
</td></tr>
<tr><td><code id="genodds.power_+3A_ties">ties</code></td>
<td>
<p>A string specifying how ties should be treated.
Should be equal to &quot;split&quot; 0.5 for WMW Odds,
or &quot;drop&quot; for Agresti's GenOR.</p>
</td></tr>
<tr><td><code id="genodds.power_+3A_w">w</code></td>
<td>
<p>A numeric vector of length 2 specifying the relative weighting
of sample size between treatment groups.</p>
</td></tr>
<tr><td><code id="genodds.power_+3A_direction">direction</code></td>
<td>
<p>Direction for hypothesis test.
Must be one of <code>"two.sided"</code>,<code>"upper.tail"</code> or <code>"lower.tail"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code><a href="#topic+genodds">genodds</a></code> for explanation of generalized odds ratios.
</p>
<p><code>N</code> provides the total sample size.
Sample size per group can be calculated by <code>N*w/sum(w)</code>.
</p>
<p>When <code>power</code> is supplied, if no sufficient sample size is
found then this function will return <code>Inf</code>.
</p>


<h3>Value</h3>


<dl>
<dt>If <code>power</code> is supplied</dt><dd><p>A numeric vector containing required sample sizes to achieve specified powers.</p>
</dd>
<dt>If <code>N</code> is supplied</dt><dd><p>A numeric vector containing power at specified sample sizes.</p>
</dd>
</dl>



<h3>References</h3>

<p>O'Brien, R. G., &amp; Castelloe, J. (2006, March).
Exploiting the link between the Wilcoxon-Mann-Whitney test and a simple odds statistic.
In <em>Thirty-first Annual SAS Users Group International Conference</em>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Provide theoretical distributions of outcomes for each group
# Distributions taken from Lees et. al. (2010). See ?alteplase for a citation.
p0 &lt;- c(0.224,0.191,0.082,0.133,0.136,0.043,0.191)
p1 &lt;- c(0.109,0.199,0.109,0.120,0.194,0.070,0.200)

# Calculate sample size required to achieve 80% and 90%
# power for these distributions
genodds.power(p0,p1,power=c(0.8,0.9))

# genodds.power suggests a total sample size of 619 for 80% power.
# Round up to 620 for even sample size per group

# Confirm these sample sizes lead to 80% and 90% power
genodds.power(p0,p1,N=c(620,830))

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
