<!DOCTYPE html><html><head><title>Help for package mrbin</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mrbin}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#addToPlot'><p>A function for adding NMR spectra to the plot list.</p></a></li>
<li><a href='#annotatemrbin'><p>A function for annotating mrbin objects.</p></a></li>
<li><a href='#atnv'><p>A function replacing negative values.</p></a></li>
<li><a href='#checkmrbin'><p>A function for checking mrbin objects.</p></a></li>
<li><a href='#contMin'><p>A function for changing plotNMR plots.</p></a></li>
<li><a href='#contPlus'><p>A function for changing plotNMR plots.</p></a></li>
<li><a href='#createmrbin'><p>A function for creating mrbin objects.</p></a></li>
<li><a href='#cropNMR'><p>A function for cropping HSQC spectra.</p></a></li>
<li><a href='#dilutionCorrection'><p>A function for scaling to individual dilution factors.</p></a></li>
<li><a href='#down'><p>A function for changing plotNMR plots.</p></a></li>
<li><a href='#editmetabolitesmrbin'><p>A function for editing metabolite identities.</p></a></li>
<li><a href='#editmrbin'><p>A function for editing mrbin objects.</p></a></li>
<li><a href='#fia'><p>A function identifying features of importance.</p></a></li>
<li><a href='#getEnv'><p>A function for saving the package environment.</p></a></li>
<li><a href='#intMin'><p>A function for changing plotNMR plots.</p></a></li>
<li><a href='#intPlus'><p>A function for changing plotNMR plots.</p></a></li>
<li><a href='#left'><p>A function for changing plotNMR plots.</p></a></li>
<li><a href='#logTrafo'><p>A function for log transforming data.</p></a></li>
<li><a href='#metadatamrbin'><p>A function for interactively editing metadata of mrbin objects.</p></a></li>
<li><a href='#mrbin'><p>A function setting the parameters and performing binning and data processing</p></a></li>
<li><a href='#mrbinrun'><p>A function performing all data read and processing steps.</p></a></li>
<li><a href='#mrplot'><p>A function for plotting NMR spectra.</p></a></li>
<li><a href='#plotMultiNMR'><p>A function for plotting NMR spectra.</p></a></li>
<li><a href='#plotNMR'><p>A function for plotting NMR spectra.</p></a></li>
<li><a href='#plotPCA'><p>A function for plotting PCA plots.</p></a></li>
<li><a href='#plotResults'><p>A function for plotting quality indicators, including PCA plots.</p></a></li>
<li><a href='#PQNScaling'><p>A function for PQN scaling.</p></a></li>
<li><a href='#predictWrapper'><p>A function returning predicted values for use with the fia function.</p></a></li>
<li><a href='#printParameters'><p>A function for printing parameters to the screen.</p></a></li>
<li><a href='#putToEnv'><p>A function for changing and adding variables in the package environment.</p></a></li>
<li><a href='#readBruker'><p>A function for reading Bruker NMR spectra.</p></a></li>
<li><a href='#recreatemrbin'><p>A function recreating parameters from previous runs.</p></a></li>
<li><a href='#removeFromPlot'><p>A function for removing NMR spectra from the plot list.</p></a></li>
<li><a href='#removeNoise'><p>A function for removing bins below noise level.</p></a></li>
<li><a href='#removeSpectrum'><p>A function for removing a spectrum.</p></a></li>
<li><a href='#resetEnv'><p>A parameter resetting function</p></a></li>
<li><a href='#right'><p>A function for changing plotNMR plots.</p></a></li>
<li><a href='#setCurrentSpectrum'><p>A function for interactively setting the current spectrum.</p></a></li>
<li><a href='#setDilutionFactors'><p>A function for setting dilution factors.</p></a></li>
<li><a href='#setNoiseLevels'><p>A function for setting and plotting noise levels.</p></a></li>
<li><a href='#setOffset'><p>A function for changing plotNMR plots.</p></a></li>
<li><a href='#setParam'><p>A function setting parameters and checking for consistency.</p></a></li>
<li><a href='#timeStampMrbin'><p>A function for time stamping mrbin objects.</p></a></li>
<li><a href='#trimZeros'><p>A function for trimming zero-values bins.</p></a></li>
<li><a href='#unitVarianceScaling'><p>A function for scaling to unit variance.</p></a></li>
<li><a href='#up'><p>A function for changing plotNMR plots.</p></a></li>
<li><a href='#zoom'><p>A function for changing plotNMR plots.</p></a></li>
<li><a href='#zoomIn'><p>A function for changing plotNMR plots.</p></a></li>
<li><a href='#zoomOut'><p>A function for changing plotNMR plots.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Metabolomics Data Analysis Functions</td>
</tr>
<tr>
<td>Version:</td>
<td>1.7.4</td>
</tr>
<tr>
<td>Description:</td>
<td>A collection of functions for processing and analyzing metabolite data. 
    The namesake function mrbin() converts 1D 
    or 2D Nuclear Magnetic Resonance data into a matrix of values suitable for further data analysis and
    performs basic processing steps in a reproducible way. Negative values, a
    common issue in such data, can be replaced by positive values (&lt;<a href="https://doi.org/10.1021%2Facs.jproteome.0c00684">doi:10.1021/acs.jproteome.0c00684</a>&gt;). All used
    parameters are stored in a readable text file and can be restored from that
    file to enable exact reproduction of the data at a later time. The function fia() ranks features according
    to their impact on classifier models, especially artificial neural network models.</td>
</tr>
<tr>
<td>Imports:</td>
<td>grDevices, graphics, stats, utils, methods</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>parallel, keras</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>utils</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://www.kleinomicslab.com/software/">http://www.kleinomicslab.com/software/</a>,
<a href="https://github.com/kleinomicslab/mrbin">https://github.com/kleinomicslab/mrbin</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-04-11 02:12:23 UTC; klein.663</td>
</tr>
<tr>
<td>Author:</td>
<td>Matthias Klein <a href="https://orcid.org/0000-0001-7455-5381"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Matthias Klein &lt;matthias.s.klein@gmx.net&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-04-11 03:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='addToPlot'>A function for adding NMR spectra to the plot list.</h2><span id='topic+addToPlot'></span>

<h3>Description</h3>

<p>This function adds a spectrum to the plot list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addToPlot(
  folder = NULL,
  dimension = "1D",
  NMRvendor = "Bruker",
  useAsNames = "Folder names",
  add = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addToPlot_+3A_folder">folder</code></td>
<td>
<p>Defines the exact NMR data folder. If NULL, mrbin parameter set is used</p>
</td></tr>
<tr><td><code id="addToPlot_+3A_dimension">dimension</code></td>
<td>
<p>Defines the data dimension, &quot;1D&quot; or &quot;2D&quot;. Only used if not NULL</p>
</td></tr>
<tr><td><code id="addToPlot_+3A_nmrvendor">NMRvendor</code></td>
<td>
<p>Defines the NMR manufacturer, default is &quot;Bruker&quot;</p>
</td></tr>
<tr><td><code id="addToPlot_+3A_useasnames">useAsNames</code></td>
<td>
<p>How should sample names be generated</p>
</td></tr>
<tr><td><code id="addToPlot_+3A_add">add</code></td>
<td>
<p>Add spectra to existing list, or replace existing spectra. Default is TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>none
</p>


<h3>Examples</h3>

<pre><code class='language-R'> addToPlot() 
</code></pre>

<hr>
<h2 id='annotatemrbin'>A function for annotating mrbin objects.</h2><span id='topic+annotatemrbin'></span>

<h3>Description</h3>

<p>This function annotates an mrbin object and returns it with updated $annotations vector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>annotatemrbin(mrbinObject)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="annotatemrbin_+3A_mrbinobject">mrbinObject</code></td>
<td>
<p>An mrbin object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An (invisible) mrbin object
</p>


<h3>Examples</h3>

<pre><code class='language-R'> mrbinObject&lt;-mrbin(silent=TRUE,
                   parameters=list(verbose=TRUE,dimension="1D",PQNScaling="No",
                   binwidth1D=0.04,signal_to_noise1D=1,PCA="No",binRegion=c(9.5,0.5,10,156),
                   saveFiles="No",referenceScaling="No",noiseRemoval="No",
                   fixNegatives="No",logTrafo="No",noiseThreshold=.05,tryParallel=FALSE,
                   NMRfolders=c(system.file("extdata/2/10/pdata/10",package="mrbin"),
                              system.file("extdata/3/10/pdata/10",package="mrbin"))),
                   metadata=list(metaboliteIdentities=matrix(c(
                   1.346,1.324,21,23,
                   3.052,3.043,30.5,33.5,
                   4.066,4.059,57,59.5
                   ),ncol=4,byrow=TRUE,dimnames=list(
                   c("Lactate","Creatinine","Creatinine"),NULL))))
mrbinObject&lt;-annotatemrbin(mrbinObject)
mrbinObject$metadata$annotations[125:135]
plotPCA(mrbinObject,loadings=TRUE)
</code></pre>

<hr>
<h2 id='atnv'>A function replacing negative values.</h2><span id='topic+atnv'></span>

<h3>Description</h3>

<p>This function replaces (column-wise) negative values by a small positive
number. The number is calculated as an affine transformation to the range of
the lowest positive number to 0,01*the lowest positive number (of this
column). Ranks stay unchanged. Positive numbers are not altered.
If sample-wise noise levels are available, the median noise level of samples
with negative values is calculated and replaces the lowest positive number in
case it is smaller. If no noise data is available, the 1
positive values in the data set is used as an estimate.
It is recommended to us this function AFTER noise removal and other data
clean-up methods, as it may alter (reduce) the noise level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>atnv(NMRdata, noiseLevels = NULL, verbose = TRUE, errorsAsWarnings = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="atnv_+3A_nmrdata">NMRdata</code></td>
<td>
<p>A matrix or mrbin object containing NMR data. For matrix: columns=frequencies,rows=samples</p>
</td></tr>
<tr><td><code id="atnv_+3A_noiselevels">noiseLevels</code></td>
<td>
<p>A vector (can be omitted if NMRdata is an mrbin object)</p>
</td></tr>
<tr><td><code id="atnv_+3A_verbose">verbose</code></td>
<td>
<p>Should a summary be displayed if NMRdata is an mrbin object</p>
</td></tr>
<tr><td><code id="atnv_+3A_errorsaswarnings">errorsAsWarnings</code></td>
<td>
<p>If TRUE, errors will be turned into warnings. Should be used with care, as errors indicate undocumented changes to the data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An invisible matrix or mrbin object containing NMR data without negative values.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> resetEnv()
 Example&lt;-mrbin(silent=TRUE,
                   parameters=list(verbose=TRUE,dimension="1D",PQNScaling="No",
                   binwidth1D=0.005,signal_to_noise1D=1,PCA="No",binRegion=c(9.5,7.5,10,156),
                   saveFiles="No",referenceScaling="No",noiseRemoval="No",
                   fixNegatives="No",logTrafo="No",noiseThreshold=.05,
                   NMRfolders=c(system.file("extdata/2/10/pdata/10",package="mrbin"),
                              system.file("extdata/3/10/pdata/10",package="mrbin"))
                   ))
 sum(Example$bins&lt;=0)
 exampleNMRpositive&lt;-atnv(NMRdata=Example$bins, noiseLevels=Example$parameters$noise_level_adjusted)
 sum(exampleNMRpositive&lt;=0)
</code></pre>

<hr>
<h2 id='checkmrbin'>A function for checking mrbin objects.</h2><span id='topic+checkmrbin'></span>

<h3>Description</h3>

<p>This function checks an mrbin object and returns warning if changes were not documented
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkmrbin(mrbinObject, verbose = TRUE, errorsAsWarnings = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkmrbin_+3A_mrbinobject">mrbinObject</code></td>
<td>
<p>An mrbin object</p>
</td></tr>
<tr><td><code id="checkmrbin_+3A_verbose">verbose</code></td>
<td>
<p>Should a summary be displayed? (Warnings will be displayed even when setting verbose to FALSE)</p>
</td></tr>
<tr><td><code id="checkmrbin_+3A_errorsaswarnings">errorsAsWarnings</code></td>
<td>
<p>If TRUE, errors will be turned into warnings. Should be used with care, as errors indicate undocumented changes to the data. If not provided, this will be taken from the mrbinObject.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An (invisible) character vector of warnings
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbinObject&lt;-createmrbin()
mrbinObject&lt;-checkmrbin(mrbinObject)
</code></pre>

<hr>
<h2 id='contMin'>A function for changing plotNMR plots.</h2><span id='topic+contMin'></span>

<h3>Description</h3>

<p>This function decreases the minimum contour level of the current 2D NMR
spectrum plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>contMin(refreshPlot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="contMin_+3A_refreshplot">refreshPlot</code></td>
<td>
<p>Refresh plot automatically. Defaults to TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>resetEnv()
mrbin(silent=TRUE,parameters=list(dimension="2D",binwidth2D=0.5,
         binheight=3,PQNScaling="No",referenceScaling="No",binRegion=c(4,3,60,65),
         noiseRemoval="No",trimZeros="No",cropHSQC="No",tryParallel=FALSE,
         fixNegatives="No",logTrafo="No",PCA="No",verbose=TRUE,saveFiles="No",
         NMRfolders=c(system.file("extdata/1/12/pdata/10",package="mrbin"))))
plotNMR()
contMin()
</code></pre>

<hr>
<h2 id='contPlus'>A function for changing plotNMR plots.</h2><span id='topic+contPlus'></span>

<h3>Description</h3>

<p>This function increases the minimum contour level of the current 2D NMR
spectrum plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>contPlus(refreshPlot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="contPlus_+3A_refreshplot">refreshPlot</code></td>
<td>
<p>Refresh plot automatically. Defaults to TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>resetEnv()
addToPlot(folder=system.file("extdata/1/12/pdata/10",package="mrbin"),dimension="2D")
plotNMR()
contPlus()
</code></pre>

<hr>
<h2 id='createmrbin'>A function for creating mrbin objects.</h2><span id='topic+createmrbin'></span>

<h3>Description</h3>

<p>This function creates an mrbin object and returns it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createmrbin()
</code></pre>


<h3>Value</h3>

<p>An (invisible) mrbin object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbinObject&lt;-createmrbin()
</code></pre>

<hr>
<h2 id='cropNMR'>A function for cropping HSQC spectra.</h2><span id='topic+cropNMR'></span>

<h3>Description</h3>

<p>This function crops HSQC spectra to the region along the diagonal to remove
uninformative signals. Will work only for 1H-13C HSQC spectra.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cropNMR()
</code></pre>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>resetEnv()
Example&lt;-mrbin(silent=TRUE,
         parameters=list(dimension="2D",binwidth2D=1,binheight=4,cropHSQC="No",PCA="No",
         PQNScaling="No",noiseRemoval="No",removeSolvent="No",verbose=TRUE,tryParallel=FALSE,
         NMRfolders=c(system.file("extdata/1/12/pdata/10",package="mrbin"))))
cropNMR()
</code></pre>

<hr>
<h2 id='dilutionCorrection'>A function for scaling to individual dilution factors.</h2><span id='topic+dilutionCorrection'></span>

<h3>Description</h3>

<p>This function performs sample-wise scaling of binned data to correct for dilution
through different sample volumes used, or for different sample weights. All bin
values of one sample are multiplied by the corresponding dilution factor.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dilutionCorrection(mrbinResults, verbose = TRUE, errorsAsWarnings = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dilutionCorrection_+3A_mrbinresults">mrbinResults</code></td>
<td>
<p>An mrbin object</p>
</td></tr>
<tr><td><code id="dilutionCorrection_+3A_verbose">verbose</code></td>
<td>
<p>Should a summary be printed?</p>
</td></tr>
<tr><td><code id="dilutionCorrection_+3A_errorsaswarnings">errorsAsWarnings</code></td>
<td>
<p>If TRUE, errors will be turned into warnings. Should be used with care, as errors indicate undocumented changes to the data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An invisible mrbin object containing scaled NMR data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbinResults&lt;-mrbin(silent=TRUE,setDefault=TRUE,parameters=list(dimension="1D",
         binwidth1D=0.05,PQNScaling="No",PCA="No",tryParallel=FALSE,logTrafo="No",
         NMRfolders=c(system.file("extdata/1/10/pdata/10",package="mrbin"),
                      system.file("extdata/2/10/pdata/10",package="mrbin"),
                      system.file("extdata/3/10/pdata/10",package="mrbin"))),
         metadata=list(dilutionFactors=c(.75,1,.5)))
mrbinResults&lt;-dilutionCorrection(mrbinResults)
</code></pre>

<hr>
<h2 id='down'>A function for changing plotNMR plots.</h2><span id='topic+down'></span>

<h3>Description</h3>

<p>This function moves down the plot region of the current NMR plot (only 2D).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>down(refreshPlot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="down_+3A_refreshplot">refreshPlot</code></td>
<td>
<p>Refresh plot automatically. Defaults to TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>resetEnv()
mrbin(silent=TRUE,parameters=list(dimension="2D",binwidth2D=0.5,
         binheight=3,PQNScaling="No",referenceScaling="No",binRegion=c(4,3,60,65),
         noiseRemoval="No",trimZeros="No",cropHSQC="No",tryParallel=FALSE,
         fixNegatives="No",logTrafo="No",PCA="No",verbose=TRUE,saveFiles="No",
         NMRfolders=c(system.file("extdata/1/12/pdata/10",package="mrbin"))))
plotNMR()
zoomIn()
down()
</code></pre>

<hr>
<h2 id='editmetabolitesmrbin'>A function for editing metabolite identities.</h2><span id='topic+editmetabolitesmrbin'></span>

<h3>Description</h3>

<p>This function edits the metabolite list within an mrbin object and returns it
</p>


<h3>Usage</h3>

<pre><code class='language-R'>editmetabolitesmrbin(mrbinObject, borders, metabolitenames, add = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="editmetabolitesmrbin_+3A_mrbinobject">mrbinObject</code></td>
<td>
<p>An mrbin object</p>
</td></tr>
<tr><td><code id="editmetabolitesmrbin_+3A_borders">borders</code></td>
<td>
<p>A matrix of signal borders. 1D: two columns: left, right 2D: four columns: left, right, top, bottom</p>
</td></tr>
<tr><td><code id="editmetabolitesmrbin_+3A_metabolitenames">metabolitenames</code></td>
<td>
<p>A character vector of metabolite identities</p>
</td></tr>
<tr><td><code id="editmetabolitesmrbin_+3A_add">add</code></td>
<td>
<p>Should the new metabolite list be added to an existing list, or replace the current list?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An (invisible) mrbin object
</p>


<h3>Examples</h3>

<pre><code class='language-R'> mrbinObject&lt;-mrbin(silent=TRUE,
                   parameters=list(verbose=TRUE,dimension="1D",PQNScaling="No",
                   binwidth1D=0.04,signal_to_noise1D=1,PCA="No",binRegion=c(9.5,0.5,10,156),
                   saveFiles="No",referenceScaling="No",noiseRemoval="No",
                   fixNegatives="No",logTrafo="No",noiseThreshold=.05,tryParallel=FALSE,
                   NMRfolders=c(system.file("extdata/2/10/pdata/10",package="mrbin"),
                              system.file("extdata/3/10/pdata/10",package="mrbin"))
                   ))
 mrbinObject&lt;-editmetabolitesmrbin(mrbinObject,borders=matrix(c(
     1.346,1.324,
     3.052,3.043,
     4.066,4.059
   ),ncol=2,byrow=TRUE),metabolitenames=c(
   "Lactate",
   "Creatinine",
   "Creatinine"
   ))
mrbinObject$parameters$metaboliteIdentities
</code></pre>

<hr>
<h2 id='editmrbin'>A function for editing mrbin objects.</h2><span id='topic+editmrbin'></span>

<h3>Description</h3>

<p>This function edits an mrbin object and returns it. This is the only documented way to edit mrbin objects, all other ways of editing such object might cause warning message
</p>


<h3>Usage</h3>

<pre><code class='language-R'>editmrbin(
  mrbinObject,
  functionName = "mrbin::editmrbin",
  versionNumber = as.character(utils::packageVersion("mrbin")),
  bins = NULL,
  parameters = NULL,
  metadata = NULL,
  transformations = NULL,
  comment = "",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="editmrbin_+3A_mrbinobject">mrbinObject</code></td>
<td>
<p>An mrbin object</p>
</td></tr>
<tr><td><code id="editmrbin_+3A_functionname">functionName</code></td>
<td>
<p>Name of the package and function calling this command</p>
</td></tr>
<tr><td><code id="editmrbin_+3A_versionnumber">versionNumber</code></td>
<td>
<p>Version number of the package calling this command</p>
</td></tr>
<tr><td><code id="editmrbin_+3A_bins">bins</code></td>
<td>
<p>A matrix containing values to be written to the mrbin object</p>
</td></tr>
<tr><td><code id="editmrbin_+3A_parameters">parameters</code></td>
<td>
<p>A list containing values to be written to the mrbin object parameters, names must be names of the mrbin object, e.g. dimension</p>
</td></tr>
<tr><td><code id="editmrbin_+3A_metadata">metadata</code></td>
<td>
<p>A list containing values to be written to the mrbin object parameters, names must be names of the mrbin object</p>
</td></tr>
<tr><td><code id="editmrbin_+3A_transformations">transformations</code></td>
<td>
<p>An optional character vector describing any used data transformations or scaling such as reference scaling, PQN, log, atnv, etc.</p>
</td></tr>
<tr><td><code id="editmrbin_+3A_comment">comment</code></td>
<td>
<p>An optional character vector describing the change</p>
</td></tr>
<tr><td><code id="editmrbin_+3A_verbose">verbose</code></td>
<td>
<p>Should a summary be displayed?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An (invisible) mrbin object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbinObject&lt;-createmrbin()
mrbinObject&lt;-editmrbin(mrbinObject)
</code></pre>

<hr>
<h2 id='fia'>A function identifying features of importance.</h2><span id='topic+fia'></span>

<h3>Description</h3>

<p>This function finds features that can change the outcomes of a model's prediction.
Example: fia=1.00 means single compound found in all but 0 percent of samples.
fia=2.45 indicates this compound is found in pairs in all but 45 percent of tested samples
A function named predict needs to be present for this to work. If the function name
of the prediction function is different, the function name has to be provided in
the parameter functionNamePredict.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fia(
  model,
  dataSet,
  factors,
  nSeed = 6,
  numberOfSamples = 100,
  maxFeatures = 10000,
  innerLoop = 300,
  verbose = TRUE,
  maxNumberAllTests = 5,
  firstLevel = 1,
  saveMemory = FALSE,
  kerasClearMemory = 0,
  functionNamePredict = "predict",
  parameterNameObject = "object",
  parameterNameData = "x",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fia_+3A_model">model</code></td>
<td>
<p>A predictive model. Make sure to have loaded all required packages before starting this function</p>
</td></tr>
<tr><td><code id="fia_+3A_dataset">dataSet</code></td>
<td>
<p>An object containing data, columns=features, rows=samples. This should be either a matrix or a dataframe, depending on which of these two the specific prediction function requires</p>
</td></tr>
<tr><td><code id="fia_+3A_factors">factors</code></td>
<td>
<p>A factor vector with group membership of each sample in the data set. Order of levels must correspond to the number predicted by the model</p>
</td></tr>
<tr><td><code id="fia_+3A_nseed">nSeed</code></td>
<td>
<p>Number of times that the test will be repeated, selecting different random features</p>
</td></tr>
<tr><td><code id="fia_+3A_numberofsamples">numberOfSamples</code></td>
<td>
<p>Number of samples that will be randomly chosen from each group</p>
</td></tr>
<tr><td><code id="fia_+3A_maxfeatures">maxFeatures</code></td>
<td>
<p>Maximum number of features that will be tested. Larger numbers will be split into child nodes without testing to increase speed</p>
</td></tr>
<tr><td><code id="fia_+3A_innerloop">innerLoop</code></td>
<td>
<p>Number of repeated loops to test additional child nodes</p>
</td></tr>
<tr><td><code id="fia_+3A_verbose">verbose</code></td>
<td>
<p>A logical vector to turn messages on or off</p>
</td></tr>
<tr><td><code id="fia_+3A_maxnumberalltests">maxNumberAllTests</code></td>
<td>
<p>Combinations of features of this length or shorter will not be split in half to create two children, but into multiple children with one feature left out each. This is done make sure no combination is missed.</p>
</td></tr>
<tr><td><code id="fia_+3A_firstlevel">firstLevel</code></td>
<td>
<p>Numeric value of first level or group. Usually 1 but for glm such as in the example this needs to be 0.</p>
</td></tr>
<tr><td><code id="fia_+3A_savememory">saveMemory</code></td>
<td>
<p>Save memory by performing only two predictions per step, which will be much slower. If you are using keras, use parameter kerasClearMemory=2 instead to free more memory and be a lot faster. FALSE to turn off.</p>
</td></tr>
<tr><td><code id="fia_+3A_kerasclearmemory">kerasClearMemory</code></td>
<td>
<p>Save memory by clearing model from memory and reloading the model between chunks of predictions. Will only work when using package keras. 0=off, 1=medium (reload between repeat with different seeds), 2=maximum memory savings (reload after each run for a single sample). This will write a model file to the working directory.</p>
</td></tr>
<tr><td><code id="fia_+3A_functionnamepredict">functionNamePredict</code></td>
<td>
<p>The name of the prediction function. This only needs to be changed if the prediction function is not called predict</p>
</td></tr>
<tr><td><code id="fia_+3A_parameternameobject">parameterNameObject</code></td>
<td>
<p>The name of the parameter for passing the model to the prediction function</p>
</td></tr>
<tr><td><code id="fia_+3A_parameternamedata">parameterNameData</code></td>
<td>
<p>The name of the parameter for passing the data to the prediction function</p>
</td></tr>
<tr><td><code id="fia_+3A_...">...</code></td>
<td>
<p>Optional, additional parameters that will be passed to the prediction function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of results: scoresSummary A vector of fia scores for the whole dataset; scores contains vectors of fia scores for each predicted group; scoresIndividual A list of fia scores for each individual sample; fiaListPerSample A list of important combinations of features for each predicted sample; fiaMatrix A list of fia scores for each predicted group.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> #First, define group membership and create the example feature data
 group&lt;-factor(c(rep("Group1",4),rep("Group2",5)))
 names(group)&lt;-paste("Sample",1:9,sep="")
 dataset&lt;-data.frame(
   Feature1=c(5.1,5.0,6.0,2.9,4.8,4.6,4.9,3.8,5.1),
   Feature2=c(2.6,4.0,3.2,1.2,3.1,2.1,4.5,6.1,1.3),
   Feature3=c(3.1,6.1,5.8,5.1,3.8,6.1,3.4,4.0,4.4),
   Feature4=c(5.3,5.2,3.1,2.7,3.2,2.8,5.9,5.8,3.1),
   Feature5=c(3.2,4.4,4.8,4.9,6.0,3.6,6.1,3.9,3.5),
   Feature6=c(6.8,6.7,7.2,7.0,7.3,7.1,7.2,6.9,6.8)
   )
 rownames(dataset)&lt;-names(group)
 #train a model - here we use a logit model instead of ANN as a demonstration
 mod&lt;-glm(group~Feature1+Feature2+Feature3+Feature4+Feature5+Feature6,
   data=data.frame(group=group,dataset),family="binomial")
 fiaresults&lt;-fia(model=mod,dataSet=dataset,factors=group,parameterNameData="newdata",
   firstLevel=0,type="response")
 fiaresults$scores
</code></pre>

<hr>
<h2 id='getEnv'>A function for saving the package environment.</h2><span id='topic+getEnv'></span>

<h3>Description</h3>

<p>This function returns a list of all objects of the current package environment.
This may be helpful for debugging or for accessing NMR spectral data and the raw bin data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getEnv()
</code></pre>


<h3>Value</h3>

<p>A list containing all objects from the local package environment.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tempList&lt;-getEnv()
</code></pre>

<hr>
<h2 id='intMin'>A function for changing plotNMR plots.</h2><span id='topic+intMin'></span>

<h3>Description</h3>

<p>This function decreases the intensity of the current NMR spectrum plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>intMin(dimension = "1D", refreshPlot = TRUE, value = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="intMin_+3A_dimension">dimension</code></td>
<td>
<p>Dimension to use. Defaults to &quot;1D&quot;</p>
</td></tr>
<tr><td><code id="intMin_+3A_refreshplot">refreshPlot</code></td>
<td>
<p>Refresh plot automatically. Defaults to TRUE</p>
</td></tr>
<tr><td><code id="intMin_+3A_value">value</code></td>
<td>
<p>Set exact value. Defaults to NULL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbin(silent=TRUE,setDefault=TRUE,parameters=list(dimension="1D",binwidth1D=.1,
         PQNScaling="No",noiseRemoval="No",trimZeros="No",tryParallel=FALSE,
         fixNegatives="No",logTrafo="No",PCA="No",verbose=TRUE,
         NMRfolders=system.file("extdata/1/10/pdata/10",package="mrbin")))
plotNMR()
intMin()
</code></pre>

<hr>
<h2 id='intPlus'>A function for changing plotNMR plots.</h2><span id='topic+intPlus'></span>

<h3>Description</h3>

<p>This function increases the intensity of the current NMR spectrum plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>intPlus(dimension = "1D", refreshPlot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="intPlus_+3A_dimension">dimension</code></td>
<td>
<p>Dimension to use. Defaults to &quot;1D&quot;</p>
</td></tr>
<tr><td><code id="intPlus_+3A_refreshplot">refreshPlot</code></td>
<td>
<p>Refresh plot automatically. Defaults to TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbin(silent=TRUE,setDefault=TRUE,parameters=list(dimension="1D",binwidth1D=.1,
         PQNScaling="No",noiseRemoval="No",trimZeros="No",tryParallel=FALSE,
         fixNegatives="No",logTrafo="No",PCA="No",verbose=TRUE,
         NMRfolders=system.file("extdata/1/10/pdata/10",package="mrbin")))
plotNMR()
intPlus()
</code></pre>

<hr>
<h2 id='left'>A function for changing plotNMR plots.</h2><span id='topic+left'></span>

<h3>Description</h3>

<p>This function moves left the plot region of the current NMR plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>left(refreshPlot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="left_+3A_refreshplot">refreshPlot</code></td>
<td>
<p>Refresh plot automatically. Defaults to TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>resetEnv()
mrbin(silent=TRUE,parameters=list(dimension="1D",binwidth1D=.5,
         noiseRemoval="No",trimZeros="No",tryParallel=FALSE,
         PQNScaling="No",saveFiles="No",referenceScaling="No",
         fixNegatives="No",logTrafo="No",PCA="No",verbose=TRUE,
         NMRfolders=system.file("extdata/1/10/pdata/10",package="mrbin")))
plotNMR()
zoomIn()
left()
</code></pre>

<hr>
<h2 id='logTrafo'>A function for log transforming data.</h2><span id='topic+logTrafo'></span>

<h3>Description</h3>

<p>This function performs logarithm transformation. Will not work with negative data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>logTrafo(mrbinResults, verbose = TRUE, errorsAsWarnings = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="logTrafo_+3A_mrbinresults">mrbinResults</code></td>
<td>
<p>An mrbin object</p>
</td></tr>
<tr><td><code id="logTrafo_+3A_verbose">verbose</code></td>
<td>
<p>Should a summary be printed?</p>
</td></tr>
<tr><td><code id="logTrafo_+3A_errorsaswarnings">errorsAsWarnings</code></td>
<td>
<p>If TRUE, errors will be turned into warnings. Should be used with care, as errors indicate undocumented changes to the data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An invisible mrbin object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>resetEnv()
mrbinResults&lt;-mrbin(silent=TRUE,setDefault=TRUE,parameters=list(dimension="1D", logTrafo="No",
                    binwidth1D=0.05,signal_to_noise1D=50,verbose=TRUE,PCA="No",tryParallel=FALSE,
                    NMRfolders=c(system.file("extdata/1/10/pdata/10",package="mrbin"),
                                system.file("extdata/2/10/pdata/10",package="mrbin"))))
mrbinResults&lt;-logTrafo(mrbinResults)
</code></pre>

<hr>
<h2 id='metadatamrbin'>A function for interactively editing metadata of mrbin objects.</h2><span id='topic+metadatamrbin'></span>

<h3>Description</h3>

<p>This function edits interactively or non-interactively the metadata filed of the provided mrbin object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>metadatamrbin(mrbinResults, metadata = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="metadatamrbin_+3A_mrbinresults">mrbinResults</code></td>
<td>
<p>An mrbin object</p>
</td></tr>
<tr><td><code id="metadatamrbin_+3A_metadata">metadata</code></td>
<td>
<p>An optional list of objects to be changed. If provided, interactive mode is deactivated</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An invisible mrbin object
</p>


<h3>Examples</h3>

<pre><code class='language-R'> mrbinObject&lt;-mrbin(silent=TRUE,
                   parameters=list(verbose=TRUE,dimension="1D",PQNScaling="No",
                   binwidth1D=0.04,signal_to_noise1D=1,PCA="No",binRegion=c(9.5,0.5,10,156),
                   saveFiles="No",referenceScaling="No",noiseRemoval="No",
                   fixNegatives="No",logTrafo="No",noiseThreshold=.05,tryParallel=FALSE,
                   NMRfolders=c(system.file("extdata/2/10/pdata/10",package="mrbin"),
                              system.file("extdata/3/10/pdata/10",package="mrbin"))
                   ))
 mrbinObject&lt;-metadatamrbin(mrbinObject,metadata=list(projectTitle="Test project"))
</code></pre>

<hr>
<h2 id='mrbin'>A function setting the parameters and performing binning and data processing</h2><span id='topic+mrbin'></span>

<h3>Description</h3>

<p>This function guides the user through the set-up of parameters, starts binning
and performs the chosen data processing steps.
If a list of parameters is provided and silent is set to TRUE, no user input
is requested and binning and data processing are performed silently.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrbin(silent = FALSE, setDefault = FALSE, parameters = NULL, metadata = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mrbin_+3A_silent">silent</code></td>
<td>
<p>If TRUE, the user will be asked no questions and binning and data analysis will run according to the current parameters. Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="mrbin_+3A_setdefault">setDefault</code></td>
<td>
<p>If TRUE, all current parameters will be replaced by the default parameters (before loading any provided parameters sets). Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="mrbin_+3A_parameters">parameters</code></td>
<td>
<p>Optional: A list of parameters, see examples for details. If omitted, the user will be asked through a series of question to set the parameters.</p>
</td></tr>
<tr><td><code id="mrbin_+3A_metadata">metadata</code></td>
<td>
<p>Optional: A list of metadata. If omitted, the user can add metadata after generating bin data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An invisible object of type &quot;mrbin&quot; containing bins (data after processing), parameters, and factors
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Set parameters in command line.
mrbinResults&lt;-mrbin(silent=TRUE,setDefault=TRUE,parameters=list(
                dimension="1D",binwidth1D=0.01,tryParallel=FALSE,
                signal_to_noise1D=25,noiseThreshold=0.75,
                NMRfolders=c(
                system.file("extdata/1/10/pdata/10",package="mrbin"),
                system.file("extdata/2/10/pdata/10",package="mrbin"),
                system.file("extdata/3/10/pdata/10",package="mrbin"))
                ))
</code></pre>

<hr>
<h2 id='mrbinrun'>A function performing all data read and processing steps.</h2><span id='topic+mrbinrun'></span>

<h3>Description</h3>

<p>This function reads parameters from the global variable mrbin.env$mrbin$parameters and
performs the following operations:
Reading NMR files, creating bins, removing solvent area, removing additional
user-defined areas, summing up bins that contain unstable peaks such as
citric acid, removes noise bins, crops HSQC spectra to the diagonal area,
performs PQN scaling, replaces negative values, log transforms and displays a
PCA plot. Parameters are then saved in a text file. These can be recreated
using recreatemrbin().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrbinrun(createbins = TRUE, process = TRUE, mrbinResults = NULL, silent = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mrbinrun_+3A_createbins">createbins</code></td>
<td>
<p>If TRUE, new bin data is generated</p>
</td></tr>
<tr><td><code id="mrbinrun_+3A_process">process</code></td>
<td>
<p>If TRUE, bin data is processed, e.g. by noise removal, atnv, etc.</p>
</td></tr>
<tr><td><code id="mrbinrun_+3A_mrbinresults">mrbinResults</code></td>
<td>
<p>An mrbin object. Needs to be provided only if createbins is FALSE</p>
</td></tr>
<tr><td><code id="mrbinrun_+3A_silent">silent</code></td>
<td>
<p>If set to FALSE, no new time calculation is performed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An invisible mrbin object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>resetEnv()
setParam(parameters=list(dimension="2D",binwidth2D=0.1,binheight=5,
   binRegion=c(8,1,15,140),PQNScaling="No",tryParallel=FALSE,
   fixNegatives="No",logTrafo="No",signal_to_noise2D=10,solventRegion=c(5.5,4.2),
   NMRfolders=c(system.file("extdata/1/12/pdata/10",package="mrbin"),
                system.file("extdata/2/12/pdata/10",package="mrbin"))))
mrbinrun()
</code></pre>

<hr>
<h2 id='mrplot'>A function for plotting NMR spectra.</h2><span id='topic+mrplot'></span>

<h3>Description</h3>

<p>This function plots NMR spectra. A menu of commands is displayed to edit the
plot view and add spectra. Multiple spectra will be overlaid, and if both
1D and 2D spectra are selected, they are shown in two plots with matched ranges.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrplot(
  hideMenu = FALSE,
  folders = NULL,
  dimensions = NULL,
  intensity1D = NULL,
  zoom = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mrplot_+3A_hidemenu">hideMenu</code></td>
<td>
<p>Do not show the menu. Defaults to FALSE</p>
</td></tr>
<tr><td><code id="mrplot_+3A_folders">folders</code></td>
<td>
<p>Optional vector of folder names of spectra to load. Defaults to NULL</p>
</td></tr>
<tr><td><code id="mrplot_+3A_dimensions">dimensions</code></td>
<td>
<p>Optional vector dimensions of spectra to load. Defaults to NULL</p>
</td></tr>
<tr><td><code id="mrplot_+3A_intensity1d">intensity1D</code></td>
<td>
<p>Optional value of initial 1D intensity. Defaults to NULL</p>
</td></tr>
<tr><td><code id="mrplot_+3A_zoom">zoom</code></td>
<td>
<p>Optional vector of initial zoom area. Defaults to NULL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>resetEnv()
mrplot(folders=c(system.file("extdata/1/12/pdata/10",package="mrbin"),
                 system.file("extdata/1/10/pdata/10",package="mrbin"),
                 system.file("extdata/2/10/pdata/10",package="mrbin"),
                 system.file("extdata/3/10/pdata/10",package="mrbin")),
       dimensions=c("2D","1D","1D","1D"),zoom=c(2.8,2.3,20,55),
       intensity1D=32,hideMenu=TRUE)
</code></pre>

<hr>
<h2 id='plotMultiNMR'>A function for plotting NMR spectra.</h2><span id='topic+plotMultiNMR'></span>

<h3>Description</h3>

<p>This function plots the current NMR spectrum. If no parameters are provided, parameters
are read from the mrbin.env environment variables, set by mrbin.
To change the plot, use zoom(),
zoomIn(), zoomOut(), intPlus(), intMin(), left(), right().
For 2D data use additionally: contMin(), contPlus(), up(), down()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotMultiNMR(
  region = NULL,
  rectangleRegions = NULL,
  rectangleColors = c("green", "orange", "blue", "red", "yellow", "gray", "purple"),
  rectangleFront = FALSE,
  polygonRegion = NULL,
  maxPlots = Inf,
  color = NULL,
  add = FALSE,
  showGrid = FALSE,
  manualScale = TRUE,
  plotTitle = "",
  restrictToRange = FALSE,
  enableSplit = TRUE,
  dimension = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotMultiNMR_+3A_region">region</code></td>
<td>
<p>A vector defining the plot region (left, right, top, bottom)</p>
</td></tr>
<tr><td><code id="plotMultiNMR_+3A_rectangleregions">rectangleRegions</code></td>
<td>
<p>A 4-column matrix defining areas where to plot rectangles</p>
</td></tr>
<tr><td><code id="plotMultiNMR_+3A_rectanglecolors">rectangleColors</code></td>
<td>
<p>Define colors for the rectangles</p>
</td></tr>
<tr><td><code id="plotMultiNMR_+3A_rectanglefront">rectangleFront</code></td>
<td>
<p>Plot rectangles in front of spectrum rather than in background (only 2D)</p>
</td></tr>
<tr><td><code id="plotMultiNMR_+3A_polygonregion">polygonRegion</code></td>
<td>
<p>Defines 4 corners of a polygon to be plotted</p>
</td></tr>
<tr><td><code id="plotMultiNMR_+3A_maxplots">maxPlots</code></td>
<td>
<p>The maximum number of 2D plots to be overlaid</p>
</td></tr>
<tr><td><code id="plotMultiNMR_+3A_color">color</code></td>
<td>
<p>Defines the color of the spectrum plot. If NULL, a rainbow theme is used for 2D NMR</p>
</td></tr>
<tr><td><code id="plotMultiNMR_+3A_add">add</code></td>
<td>
<p>If TRUE, additional spectrum plots are overlaid with the current plot</p>
</td></tr>
<tr><td><code id="plotMultiNMR_+3A_showgrid">showGrid</code></td>
<td>
<p>Shows a grid of data points. Defaults to FALSE</p>
</td></tr>
<tr><td><code id="plotMultiNMR_+3A_manualscale">manualScale</code></td>
<td>
<p>If TRUE, scaling factor is taken from environment variables</p>
</td></tr>
<tr><td><code id="plotMultiNMR_+3A_plottitle">plotTitle</code></td>
<td>
<p>Defines the main title of the plot</p>
</td></tr>
<tr><td><code id="plotMultiNMR_+3A_restricttorange">restrictToRange</code></td>
<td>
<p>Restrict plot area to range of available data points. Defaults to FALSE</p>
</td></tr>
<tr><td><code id="plotMultiNMR_+3A_enablesplit">enableSplit</code></td>
<td>
<p>Allow split plots for showing 1D and 2D spectra simultaneously</p>
</td></tr>
<tr><td><code id="plotMultiNMR_+3A_dimension">dimension</code></td>
<td>
<p>If not provided, this will be taken from package environment</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbin(silent=TRUE,setDefault=TRUE,parameters=list(dimension="1D",binwidth1D=.1,
         PQNScaling="No",noiseRemoval="No",trimZeros="No",tryParallel=FALSE,
         fixNegatives="No",logTrafo="No",PCA="No",verbose=TRUE,
         NMRfolders=system.file("extdata/1/10/pdata/10",package="mrbin")))
plotMultiNMR()
</code></pre>

<hr>
<h2 id='plotNMR'>A function for plotting NMR spectra.</h2><span id='topic+plotNMR'></span>

<h3>Description</h3>

<p>This function plots the current NMR spectrum. If no parameters are provided, parameters
are read from the mrbin.env environment variables, set by mrbin.
To change the plot, use zoom(),
zoomIn(), zoomOut(), intPlus(), intMin(), left(), right().
For 2D data use additionally: contMin(), contPlus(), up(), down()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotNMR(
  region = NULL,
  rectangleRegions = NULL,
  rectangleColors = c("green", "orange", "blue", "red", "yellow", "gray", "purple"),
  rectangleFront = FALSE,
  polygonRegion = NULL,
  color = NULL,
  add = FALSE,
  showGrid = FALSE,
  manualScale = TRUE,
  plotTitle = "",
  restrictToRange = FALSE,
  currentSpectrumOriginal = NULL,
  perspective = FALSE,
  noise = NULL,
  dimension = NULL,
  plotDelay = 0.1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotNMR_+3A_region">region</code></td>
<td>
<p>A vector defining the plot region (left, right, top, bottom)</p>
</td></tr>
<tr><td><code id="plotNMR_+3A_rectangleregions">rectangleRegions</code></td>
<td>
<p>A 4-column matrix defining areas where to plot rectangles</p>
</td></tr>
<tr><td><code id="plotNMR_+3A_rectanglecolors">rectangleColors</code></td>
<td>
<p>Define colors for the rectangles</p>
</td></tr>
<tr><td><code id="plotNMR_+3A_rectanglefront">rectangleFront</code></td>
<td>
<p>Plot rectangles in front of spectrum rather than in background (only 2D)</p>
</td></tr>
<tr><td><code id="plotNMR_+3A_polygonregion">polygonRegion</code></td>
<td>
<p>Defines 4 corners of a polygon to be plotted</p>
</td></tr>
<tr><td><code id="plotNMR_+3A_color">color</code></td>
<td>
<p>Defines the color of the spectrum plot. If NULL, a rainbow theme is used for 2D NMR</p>
</td></tr>
<tr><td><code id="plotNMR_+3A_add">add</code></td>
<td>
<p>If TRUE, additional spectrum plots are overlaid with the current plot</p>
</td></tr>
<tr><td><code id="plotNMR_+3A_showgrid">showGrid</code></td>
<td>
<p>Shows a grid of data points. Defaults to FALSE</p>
</td></tr>
<tr><td><code id="plotNMR_+3A_manualscale">manualScale</code></td>
<td>
<p>If TRUE, scaling factor is taken from environment variables</p>
</td></tr>
<tr><td><code id="plotNMR_+3A_plottitle">plotTitle</code></td>
<td>
<p>Defines the main title of the plot</p>
</td></tr>
<tr><td><code id="plotNMR_+3A_restricttorange">restrictToRange</code></td>
<td>
<p>Restrict plot area to range of available data points. Defaults to FALSE</p>
</td></tr>
<tr><td><code id="plotNMR_+3A_currentspectrumoriginal">currentSpectrumOriginal</code></td>
<td>
<p>Optional spectral data. If omitted, data from the environment variables is used</p>
</td></tr>
<tr><td><code id="plotNMR_+3A_perspective">perspective</code></td>
<td>
<p>If TRUE, a perspective plot will be displayed for 2D data instead of the regular topographic view</p>
</td></tr>
<tr><td><code id="plotNMR_+3A_noise">noise</code></td>
<td>
<p>If provided, a line or plane at this level will be added to the plot to indicate noise level</p>
</td></tr>
<tr><td><code id="plotNMR_+3A_dimension">dimension</code></td>
<td>
<p>&quot;1D' or &quot;2D&quot;. If not provided, this will be deduced from the data</p>
</td></tr>
<tr><td><code id="plotNMR_+3A_plotdelay">plotDelay</code></td>
<td>
<p>Add a small delay in seconds to force RStudio to update plots</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbin(silent=TRUE,setDefault=TRUE,parameters=list(dimension="1D",binwidth1D=.1,
         PQNScaling="No",noiseRemoval="No",trimZeros="No",tryParallel=FALSE,
         fixNegatives="No",logTrafo="No",PCA="No",verbose=TRUE,
         NMRfolders=system.file("extdata/1/10/pdata/10",package="mrbin")))
plotNMR()
</code></pre>

<hr>
<h2 id='plotPCA'>A function for plotting PCA plots.</h2><span id='topic+plotPCA'></span>

<h3>Description</h3>

<p>This function performs PCA, then plots PC1 and PC2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotPCA(
  mrbinResults,
  defineGroups = TRUE,
  loadings = FALSE,
  legendPosition = "bottomleft",
  annotate = TRUE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotPCA_+3A_mrbinresults">mrbinResults</code></td>
<td>
<p>An mrbin object</p>
</td></tr>
<tr><td><code id="plotPCA_+3A_definegroups">defineGroups</code></td>
<td>
<p>Should groups be colored differently?</p>
</td></tr>
<tr><td><code id="plotPCA_+3A_loadings">loadings</code></td>
<td>
<p>Should loadings be plotted instead of scores?</p>
</td></tr>
<tr><td><code id="plotPCA_+3A_legendposition">legendPosition</code></td>
<td>
<p>Where should the legend be plotted, Defaults to &quot;left&quot;, other options include &quot;top&quot;, &quot;topright&quot;, etc.</p>
</td></tr>
<tr><td><code id="plotPCA_+3A_annotate">annotate</code></td>
<td>
<p>Should loadings be annotated with metabolite identities, if available in $metadata?</p>
</td></tr>
<tr><td><code id="plotPCA_+3A_verbose">verbose</code></td>
<td>
<p>Should a summary be displayed?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An invisible prcomp result object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbinResults&lt;-mrbin(silent=TRUE,setDefault=FALSE,parameters=list(dimension="2D",
    binRegion=c(8,1,15,140),binwidth2D=0.1,binheight=4,solventRegion=c(5.5,4.2),
    PQNScaling="No",noiseRemoval="Yes",trimZeros="Yes",tryParallel=FALSE,
    fixNegatives="No",logTrafo="No",PCA="No",signal_to_noise2D=10,
    NMRfolders=c(system.file("extdata/1/12/pdata/10",package="mrbin"),
                 system.file("extdata/2/12/pdata/10",package="mrbin"))))
plotPCA(mrbinResults)
</code></pre>

<hr>
<h2 id='plotResults'>A function for plotting quality indicators, including PCA plots.</h2><span id='topic+plotResults'></span>

<h3>Description</h3>

<p>This function plots boxplots (bin-wise and sample-wise) as visual quality indicators.
It also performs PCA, then plots PC1 and PC2 and loading plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotResults(mrbinResults, defineGroups = TRUE, process = TRUE, silent = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotResults_+3A_mrbinresults">mrbinResults</code></td>
<td>
<p>An mrbin object</p>
</td></tr>
<tr><td><code id="plotResults_+3A_definegroups">defineGroups</code></td>
<td>
<p>Should group membership be highlighted in PCA?</p>
</td></tr>
<tr><td><code id="plotResults_+3A_process">process</code></td>
<td>
<p>If set to FALSE, the file name will be extended by &quot;Raw&quot; to indicate that data has not been processed yet</p>
</td></tr>
<tr><td><code id="plotResults_+3A_silent">silent</code></td>
<td>
<p>If set to TRUE, plots will be saved but not shown for the binning step for speed purposes</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbinResults&lt;-mrbin(silent=TRUE,setDefault=FALSE,parameters=list(dimension="2D",
    binRegion=c(8,1,15,140),binwidth2D=0.2,binheight=4,solventRegion=c(5.5,4.2),
    PQNScaling="No",noiseRemoval="Yes",trimZeros="Yes",tryParallel=FALSE,
    fixNegatives="No",logTrafo="No",PCA="No",signal_to_noise2D=10,
    NMRfolders=c(system.file("extdata/1/12/pdata/10",package="mrbin"),
                 system.file("extdata/2/12/pdata/10",package="mrbin"))))
plotResults(mrbinResults)
</code></pre>

<hr>
<h2 id='PQNScaling'>A function for PQN scaling.</h2><span id='topic+PQNScaling'></span>

<h3>Description</h3>

<p>This function performs PQN scaling. To further exclude unreliable noise, only
the most intense signals are used. For 1H and 1H-13C HSQC spectra, most of
the sugar regions can be excluded to avoid a dominating effect of the
multiple glucose signals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PQNScaling(
  NMRdata,
  ignoreGlucose = "Yes",
  dimension = "1D",
  ppmNames = "borders",
  sugarArea = c(5.4, 3.35, 72, 100),
  minimumFeatures = 40,
  showHist = FALSE,
  verbose = TRUE,
  errorsAsWarnings = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="PQNScaling_+3A_nmrdata">NMRdata</code></td>
<td>
<p>A matrix containing NMR data or an mrbin object. Columns=frequencies,rows=samples</p>
</td></tr>
<tr><td><code id="PQNScaling_+3A_ignoreglucose">ignoreGlucose</code></td>
<td>
<p>A character value (&quot;Yes&quot; or &quot;No&quot;)</p>
</td></tr>
<tr><td><code id="PQNScaling_+3A_dimension">dimension</code></td>
<td>
<p>A character value (&quot;1D&quot; or &quot;2D&quot;)</p>
</td></tr>
<tr><td><code id="PQNScaling_+3A_ppmnames">ppmNames</code></td>
<td>
<p>A character value (&quot;borders&quot; or &quot;mean&quot;)</p>
</td></tr>
<tr><td><code id="PQNScaling_+3A_sugararea">sugarArea</code></td>
<td>
<p>A numeric vector defining the the borders of glucose area</p>
</td></tr>
<tr><td><code id="PQNScaling_+3A_minimumfeatures">minimumFeatures</code></td>
<td>
<p>A numeric value defining minimum feature number used</p>
</td></tr>
<tr><td><code id="PQNScaling_+3A_showhist">showHist</code></td>
<td>
<p>A logical value, default is FALSE</p>
</td></tr>
<tr><td><code id="PQNScaling_+3A_verbose">verbose</code></td>
<td>
<p>Should a summary be printed?</p>
</td></tr>
<tr><td><code id="PQNScaling_+3A_errorsaswarnings">errorsAsWarnings</code></td>
<td>
<p>If TRUE, errors will be turned into warnings. Should be used with care, as errors indicate undocumented changes to the data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An invisible matrix or mrbin object containing scaled NMR data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbinResults&lt;-mrbin(silent=TRUE,setDefault=TRUE,parameters=list(dimension="1D",
                    binwidth1D=0.05,PQNScaling="No",PCA="No",tryParallel=FALSE,logTrafo="No",
                    NMRfolders=c(system.file("extdata/1/10/pdata/10",package="mrbin"),
                                system.file("extdata/2/10/pdata/10",package="mrbin"),
                                system.file("extdata/3/10/pdata/10",package="mrbin"))))
mrbinResults&lt;-PQNScaling(mrbinResults)
</code></pre>

<hr>
<h2 id='predictWrapper'>A function returning predicted values for use with the fia function.</h2><span id='topic+predictWrapper'></span>

<h3>Description</h3>

<p>This function predicts group membership and returns a numeric vector with results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predictWrapper(
  model,
  dataSet,
  functionNamePredict = "predict",
  firstLevel = 1,
  parameterNameObject = "object",
  parameterNameData = "x",
  dataFrameFlag = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predictWrapper_+3A_model">model</code></td>
<td>
<p>A predictive model. Make sure to have loaded all required packages before starting this function</p>
</td></tr>
<tr><td><code id="predictWrapper_+3A_dataset">dataSet</code></td>
<td>
<p>A matrix or dataframe containing data, depending on what your predict function requires. Columns=features, rows=samples</p>
</td></tr>
<tr><td><code id="predictWrapper_+3A_functionnamepredict">functionNamePredict</code></td>
<td>
<p>The name of the prediction function. This only needs to be changed if the prediction function is not called predict</p>
</td></tr>
<tr><td><code id="predictWrapper_+3A_firstlevel">firstLevel</code></td>
<td>
<p>Numeric value of first level or group. Usually 1 but for glm such as in the example this needs to be 0.</p>
</td></tr>
<tr><td><code id="predictWrapper_+3A_parameternameobject">parameterNameObject</code></td>
<td>
<p>The name of the parameter for passing the model to the prediction function</p>
</td></tr>
<tr><td><code id="predictWrapper_+3A_parameternamedata">parameterNameData</code></td>
<td>
<p>The name of the parameter for passing the data to the prediction function</p>
</td></tr>
<tr><td><code id="predictWrapper_+3A_dataframeflag">dataFrameFlag</code></td>
<td>
<p>Logical value indicating whether the data object is a data frame rather than a matrix.</p>
</td></tr>
<tr><td><code id="predictWrapper_+3A_...">...</code></td>
<td>
<p>Optional, additional parameters that will be passed to the prediction function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric (integer) vector of predicted group memberships.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> #First, define group membership and create the example feature data
 group&lt;-factor(c(rep("Group1",4),rep("Group2",5)))
 names(group)&lt;-paste("Sample",1:9,sep="")
 dataset&lt;-data.frame(
   Feature1=c(5.1,5.0,6.0,2.9,4.8,4.6,4.9,3.8,5.1),
   Feature2=c(2.6,4.0,3.2,1.2,3.1,2.1,4.5,6.1,1.3),
   Feature3=c(3.1,6.1,5.8,5.1,3.8,6.1,3.4,4.0,4.4),
   Feature4=c(5.3,5.2,3.1,2.7,3.2,2.8,5.9,5.8,3.1),
   Feature5=c(3.2,4.4,4.8,4.9,6.0,3.6,6.1,3.9,3.5)
   )
 rownames(dataset)&lt;-names(group)
 #train a model - here we use a logit model instead of ANN as a demonstration
 mod&lt;-glm(group~Feature1+Feature2+Feature3+Feature4+Feature5,
   data=data.frame(group=group,dataset),family="binomial")
 predictWrapper(model=mod,dataSet=dataset,firstLevel=0,type="response")
</code></pre>

<hr>
<h2 id='printParameters'>A function for printing parameters to the screen.</h2><span id='topic+printParameters'></span>

<h3>Description</h3>

<p>This function reads parameters from the global variable mrbin.env$mrbin$parameters and
prints the required R code for creating a data set to the screen.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>printParameters()
</code></pre>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>printParameters()
</code></pre>

<hr>
<h2 id='putToEnv'>A function for changing and adding variables in the package environment.</h2><span id='topic+putToEnv'></span>

<h3>Description</h3>

<p>This function can change variables in the current package environment.
This may be helpful for debugging or for some plotting functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>putToEnv(variableList)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="putToEnv_+3A_variablelist">variableList</code></td>
<td>
<p>A list containing all objects to be saved in the local package environment.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'> putToEnv(list(bins=NULL)) 
</code></pre>

<hr>
<h2 id='readBruker'>A function for reading Bruker NMR spectra.</h2><span id='topic+readBruker'></span>

<h3>Description</h3>

<p>This function reads Bruker NMR data. 1D and 2D data are supported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readBruker(
  folder = NULL,
  dimension = NULL,
  onlyTitles = FALSE,
  useAsNames = "Spectrum titles",
  checkFiles = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readBruker_+3A_folder">folder</code></td>
<td>
<p>Defines the exact NMR data folder. If NULL, mrbin parameter set is used</p>
</td></tr>
<tr><td><code id="readBruker_+3A_dimension">dimension</code></td>
<td>
<p>Defines the data dimension, &quot;1D&quot; or &quot;2D&quot;. Only used if not NULL</p>
</td></tr>
<tr><td><code id="readBruker_+3A_onlytitles">onlyTitles</code></td>
<td>
<p>Read only spectrum titles, but no data. Defaults to FALSE</p>
</td></tr>
<tr><td><code id="readBruker_+3A_useasnames">useAsNames</code></td>
<td>
<p>How should sample names be generated</p>
</td></tr>
<tr><td><code id="readBruker_+3A_checkfiles">checkFiles</code></td>
<td>
<p>Only check if the folder exists or contains NMR data. Defaults to FALSE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An (invisible) list containing spectral data and the spectrum name
</p>


<h3>Examples</h3>

<pre><code class='language-R'>exampleData&lt;-readBruker(folder=system.file("extdata/1/10/pdata/10",package="mrbin"),
                        dimension="1D")
</code></pre>

<hr>
<h2 id='recreatemrbin'>A function recreating parameters from previous runs.</h2><span id='topic+recreatemrbin'></span>

<h3>Description</h3>

<p>This function reads parameters from a text file that was created during a
previous run or mrbin(). After reading, the data can be recreated using
mrbin(). File names in $parameters might need to be updated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recreatemrbin(filename = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recreatemrbin_+3A_filename">filename</code></td>
<td>
<p>File path/name of the mrbin parameter file to be loaded</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Insert full folder path and file name
recreatemrbin(system.file("extdata/mrbin.txt",package="mrbin"))
</code></pre>

<hr>
<h2 id='removeFromPlot'>A function for removing NMR spectra from the plot list.</h2><span id='topic+removeFromPlot'></span>

<h3>Description</h3>

<p>This function removes a spectrum from the plot list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeFromPlot(folder = NULL, dimension = "1D")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeFromPlot_+3A_folder">folder</code></td>
<td>
<p>Defines the exact NMR data folder.</p>
</td></tr>
<tr><td><code id="removeFromPlot_+3A_dimension">dimension</code></td>
<td>
<p>Defines the data dimension, &quot;1D&quot; or &quot;2D&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>none
</p>


<h3>Examples</h3>

<pre><code class='language-R'> removeFromPlot() 
</code></pre>

<hr>
<h2 id='removeNoise'>A function for removing bins below noise level.</h2><span id='topic+removeNoise'></span>

<h3>Description</h3>

<p>This function checks for each bin (column) whether its level is below the
individual noise level times the signal-to-noise ratio. If less than the
defined threshold level are above noise*SNR, the whole bin is removed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeNoise(mrbinResults, verbose = TRUE, errorsAsWarnings = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeNoise_+3A_mrbinresults">mrbinResults</code></td>
<td>
<p>An mrbin object</p>
</td></tr>
<tr><td><code id="removeNoise_+3A_verbose">verbose</code></td>
<td>
<p>Should a summary be printed?</p>
</td></tr>
<tr><td><code id="removeNoise_+3A_errorsaswarnings">errorsAsWarnings</code></td>
<td>
<p>If TRUE, errors will be turned into warnings. Should be used with care, as errors indicate undocumented changes to the data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An invisible mrbin object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbinResults&lt;-mrbin(silent=TRUE,setDefault=TRUE,parameters=list(dimension="1D",
                    binwidth1D=0.05,noiseRemoval="No",PQNScaling="No",tryParallel=FALSE,
                    fixNegatives="No",logTrafo="No",PCA="No",verbose=TRUE,
                    NMRfolders=c(system.file("extdata/1/10/pdata/10",package="mrbin"),
                                system.file("extdata/2/10/pdata/10",package="mrbin"),
                                system.file("extdata/3/10/pdata/10",package="mrbin"))))
mrbinResults&lt;-removeNoise(mrbinResults)
</code></pre>

<hr>
<h2 id='removeSpectrum'>A function for removing a spectrum.</h2><span id='topic+removeSpectrum'></span>

<h3>Description</h3>

<p>This function lets the user pick spectra from a list for removal from data
analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeSpectrum(
  mrbinResults = NULL,
  spectra = NULL,
  verbose = TRUE,
  errorsAsWarnings = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeSpectrum_+3A_mrbinresults">mrbinResults</code></td>
<td>
<p>An mrbin object. If not provided, the function works on the package environment</p>
</td></tr>
<tr><td><code id="removeSpectrum_+3A_spectra">spectra</code></td>
<td>
<p>Character vector with NMR folder names to be excluded. If provided, no interactive selection will be shown</p>
</td></tr>
<tr><td><code id="removeSpectrum_+3A_verbose">verbose</code></td>
<td>
<p>Should a summary be printed?</p>
</td></tr>
<tr><td><code id="removeSpectrum_+3A_errorsaswarnings">errorsAsWarnings</code></td>
<td>
<p>If TRUE, errors will be turned into warnings. Should be used with care, as errors indicate undocumented changes to the data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An invisible mrbin object (only if an mrbin object was provided)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbinResults&lt;-mrbin(silent=TRUE,setDefault=TRUE,parameters=list(dimension="1D",
         binwidth1D=0.05,PQNScaling="No",PCA="No",tryParallel=FALSE,logTrafo="No",
         noiseRemoval="No",
         NMRfolders=c(system.file("extdata/1/10/pdata/10",package="mrbin"),
                      system.file("extdata/2/10/pdata/10",package="mrbin"),
                      system.file("extdata/3/10/pdata/10",package="mrbin"))))
mrbinResults&lt;-removeSpectrum(mrbinResults,
 spectra=c(system.file("extdata/2/10/pdata/10",package="mrbin")))
</code></pre>

<hr>
<h2 id='resetEnv'>A parameter resetting function</h2><span id='topic+resetEnv'></span>

<h3>Description</h3>

<p>This function resets the parameter variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resetEnv()
</code></pre>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>resetEnv()
</code></pre>

<hr>
<h2 id='right'>A function for changing plotNMR plots.</h2><span id='topic+right'></span>

<h3>Description</h3>

<p>This function moves right the plot region of the current NMR plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>right(refreshPlot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="right_+3A_refreshplot">refreshPlot</code></td>
<td>
<p>Refresh plot automatically. Defaults to TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>resetEnv()
mrbin(silent=TRUE,parameters=list(dimension="1D",binwidth1D=.5,
         noiseRemoval="No",trimZeros="No",tryParallel=FALSE,
         PQNScaling="No",saveFiles="No",referenceScaling="No",
         fixNegatives="No",logTrafo="No",PCA="No",verbose=TRUE,
         NMRfolders=system.file("extdata/1/10/pdata/10",package="mrbin")))
plotNMR()
zoomIn()
right()
</code></pre>

<hr>
<h2 id='setCurrentSpectrum'>A function for interactively setting the current spectrum.</h2><span id='topic+setCurrentSpectrum'></span>

<h3>Description</h3>

<p>This function lets the user pick a spectrum from the list of spectra
analysis. This function is meant only for use within the mrbin function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setCurrentSpectrum(spectrumNumber = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setCurrentSpectrum_+3A_spectrumnumber">spectrumNumber</code></td>
<td>
<p>If provided, this number will be used; defaults to NULL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'> setCurrentSpectrum(spectrumNumber=1) 
</code></pre>

<hr>
<h2 id='setDilutionFactors'>A function for setting dilution factors.</h2><span id='topic+setDilutionFactors'></span>

<h3>Description</h3>

<p>This function edits the dilution factors of an mrbin object but does not change the bin data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setDilutionFactors(
  mrbinObject,
  dilutionFactors = NULL,
  errorsAsWarnings = FALSE,
  alwaysShowOptionKeep = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setDilutionFactors_+3A_mrbinobject">mrbinObject</code></td>
<td>
<p>An mrbin object</p>
</td></tr>
<tr><td><code id="setDilutionFactors_+3A_dilutionfactors">dilutionFactors</code></td>
<td>
<p>An optional vector of dilution factors. If provided, no user input is requested</p>
</td></tr>
<tr><td><code id="setDilutionFactors_+3A_errorsaswarnings">errorsAsWarnings</code></td>
<td>
<p>If TRUE, errors will be turned into warnings. Should be used with care, as errors indicate undocumented changes to the data.</p>
</td></tr>
<tr><td><code id="setDilutionFactors_+3A_alwaysshowoptionkeep">alwaysShowOptionKeep</code></td>
<td>
<p>If TRUE, you will be asked to keep current values even if they do not match the current dataset.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An invisible mrbin object
</p>


<h3>Examples</h3>

<pre><code class='language-R'> mrbinObject&lt;-mrbin(silent=TRUE,
                   parameters=list(verbose=TRUE,dimension="1D",PQNScaling="No",
                   binwidth1D=0.04,signal_to_noise1D=1,PCA="No",binRegion=c(9.5,0.5,10,156),
                   saveFiles="No",referenceScaling="No",noiseRemoval="No",
                   fixNegatives="No",logTrafo="No",noiseThreshold=.05,tryParallel=FALSE,
                   NMRfolders=c(system.file("extdata/2/10/pdata/10",package="mrbin"),
                              system.file("extdata/3/10/pdata/10",package="mrbin"))
                   ))
 mrbinObject&lt;-setDilutionFactors(mrbinObject,dilutionFactors=c(1.5,2))
</code></pre>

<hr>
<h2 id='setNoiseLevels'>A function for setting and plotting noise levels.</h2><span id='topic+setNoiseLevels'></span>

<h3>Description</h3>

<p>This function reads parameters from the global variable mrbin.env$mrbin$parameters and
plots exemplary spectra and respective noise levels. Plots will be saved if saveFiles is set to &quot;Yes&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setNoiseLevels(
  mrbinObject,
  plotOnly = FALSE,
  showSpectrumPreview = NULL,
  silent = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setNoiseLevels_+3A_mrbinobject">mrbinObject</code></td>
<td>
<p>An mrbin object</p>
</td></tr>
<tr><td><code id="setNoiseLevels_+3A_plotonly">plotOnly</code></td>
<td>
<p>Should only noise plots be generated (TRUE), or should noise levels be adjusted interactively (FALSE)</p>
</td></tr>
<tr><td><code id="setNoiseLevels_+3A_showspectrumpreview">showSpectrumPreview</code></td>
<td>
<p>Should plots be shown? If not provided, this value will be taken from the mrbin object parameters</p>
</td></tr>
<tr><td><code id="setNoiseLevels_+3A_silent">silent</code></td>
<td>
<p>If set to TRUE, plots will not be shown but might still be saved</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An invisible mrbin object
</p>


<h3>Examples</h3>

<pre><code class='language-R'> mrbinObject&lt;-mrbin(silent=TRUE,
                   parameters=list(verbose=TRUE,dimension="1D",PQNScaling="No",
                   binwidth1D=0.04,signal_to_noise1D=1,PCA="No",binRegion=c(9.5,0.5,10,156),
                   saveFiles="No",referenceScaling="No",noiseRemoval="No",
                   fixNegatives="No",logTrafo="No",noiseThreshold=.05,tryParallel=FALSE,
                   NMRfolders=c(system.file("extdata/2/10/pdata/10",package="mrbin"),
                              system.file("extdata/3/10/pdata/10",package="mrbin"))
                   ))
 mrbinObject&lt;-setNoiseLevels(mrbinObject,plotOnly=TRUE)
</code></pre>

<hr>
<h2 id='setOffset'>A function for changing plotNMR plots.</h2><span id='topic+setOffset'></span>

<h3>Description</h3>

<p>This function moves up or down the 1D plot region of the current NMR plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setOffset(offsetValue = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setOffset_+3A_offsetvalue">offsetValue</code></td>
<td>
<p>The new offset value. Defaults to NULL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>setOffset(0)
</code></pre>

<hr>
<h2 id='setParam'>A function setting parameters and checking for consistency.</h2><span id='topic+setParam'></span>

<h3>Description</h3>

<p>This function set parameters and checks parameters for consistency.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setParam(parameters = NULL, metadata = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setParam_+3A_parameters">parameters</code></td>
<td>
<p>List of parameters to be set</p>
</td></tr>
<tr><td><code id="setParam_+3A_metadata">metadata</code></td>
<td>
<p>List of metadata to be set</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>setParam(parameters=list(dimension="1D"))
</code></pre>

<hr>
<h2 id='timeStampMrbin'>A function for time stamping mrbin objects.</h2><span id='topic+timeStampMrbin'></span>

<h3>Description</h3>

<p>This function adds time stamps to an mrbin object and returns it. Is used only within functions making changes to mrbin objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>timeStampMrbin(
  mrbinObject,
  functionName = "InProgress...",
  versionNumber = "0",
  changeDetails = "InProgress...",
  steps = 0,
  comment = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="timeStampMrbin_+3A_mrbinobject">mrbinObject</code></td>
<td>
<p>An mrbin object</p>
</td></tr>
<tr><td><code id="timeStampMrbin_+3A_functionname">functionName</code></td>
<td>
<p>Name of the package and function calling this command</p>
</td></tr>
<tr><td><code id="timeStampMrbin_+3A_versionnumber">versionNumber</code></td>
<td>
<p>Version number of the package calling this command</p>
</td></tr>
<tr><td><code id="timeStampMrbin_+3A_changedetails">changeDetails</code></td>
<td>
<p>Details of changes made to the mrbin object</p>
</td></tr>
<tr><td><code id="timeStampMrbin_+3A_steps">steps</code></td>
<td>
<p>Indicates which step to perform: 0 (only pre-change), 1 (only post-change)</p>
</td></tr>
<tr><td><code id="timeStampMrbin_+3A_comment">comment</code></td>
<td>
<p>An optional character vector describing the change</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An (invisible) mrbin object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbinObject&lt;-createmrbin()
mrbinObject&lt;-timeStampMrbin(mrbinObject)
</code></pre>

<hr>
<h2 id='trimZeros'>A function for trimming zero-values bins.</h2><span id='topic+trimZeros'></span>

<h3>Description</h3>

<p>This function removes zero-values bins. These might be created during removal of
solvent and additional areas, or at the edges of the spectrum.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trimZeros(mrbinResults)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trimZeros_+3A_mrbinresults">mrbinResults</code></td>
<td>
<p>An mrbin object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An invisible mrbin object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbinResults&lt;-mrbin(silent=TRUE,setDefault=TRUE,parameters=list(dimension="1D", logTrafo="No",
                    binwidth1D=0.05,signal_to_noise1D=50, verbose=TRUE, PCA="No",
                      trimZeros="No",tryParallel=FALSE,
                    NMRfolders=c(system.file("extdata/1/10/pdata/10",package="mrbin"),
                                system.file("extdata/2/10/pdata/10",package="mrbin"))))
mrbinResults&lt;-trimZeros(mrbinResults)
</code></pre>

<hr>
<h2 id='unitVarianceScaling'>A function for scaling to unit variance.</h2><span id='topic+unitVarianceScaling'></span>

<h3>Description</h3>

<p>This function performs scaling of binned data to unit variance so that each
bin has variance 1 and mean 0. This is
rarely necessary, but might be advantageous, e.g. in artificial neural networks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unitVarianceScaling(mrbinResults, verbose = TRUE, errorsAsWarnings = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unitVarianceScaling_+3A_mrbinresults">mrbinResults</code></td>
<td>
<p>An mrbin object</p>
</td></tr>
<tr><td><code id="unitVarianceScaling_+3A_verbose">verbose</code></td>
<td>
<p>Should a summary be printed?</p>
</td></tr>
<tr><td><code id="unitVarianceScaling_+3A_errorsaswarnings">errorsAsWarnings</code></td>
<td>
<p>If TRUE, errors will be turned into warnings. Should be used with care, as errors indicate undocumented changes to the data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An invisible mrbin object containing scaled NMR data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbinResults&lt;-mrbin(silent=TRUE,setDefault=TRUE,parameters=list(dimension="1D",
         binwidth1D=0.05,PQNScaling="No",PCA="No",tryParallel=FALSE,logTrafo="No",
         NMRfolders=c(system.file("extdata/1/10/pdata/10",package="mrbin"),
                      system.file("extdata/2/10/pdata/10",package="mrbin"),
                      system.file("extdata/3/10/pdata/10",package="mrbin"))))
mrbinResults&lt;-unitVarianceScaling(mrbinResults)
</code></pre>

<hr>
<h2 id='up'>A function for changing plotNMR plots.</h2><span id='topic+up'></span>

<h3>Description</h3>

<p>This function moves up the plot region of the current NMR plot (only 2D).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>up(refreshPlot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="up_+3A_refreshplot">refreshPlot</code></td>
<td>
<p>Refresh plot automatically. Defaults to TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>resetEnv()
mrbin(silent=TRUE,parameters=list(dimension="2D",binwidth2D=0.5,
         binheight=3,PQNScaling="No",referenceScaling="No",binRegion=c(4,3,60,65),
         noiseRemoval="No",trimZeros="No",cropHSQC="No",tryParallel=FALSE,
         fixNegatives="No",logTrafo="No",PCA="No",verbose=TRUE,saveFiles="No",
         NMRfolders=c(system.file("extdata/1/12/pdata/10",package="mrbin"))))
plotNMR()
zoomIn()
up()
</code></pre>

<hr>
<h2 id='zoom'>A function for changing plotNMR plots.</h2><span id='topic+zoom'></span>

<h3>Description</h3>

<p>This function changes the plot region of the current NMR plot. Can be called with
no arguments: zoom(). In this case the user will be asked for manual input.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zoom(left = NULL, right = NULL, top = NULL, bottom = NULL, refreshPlot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="zoom_+3A_left">left</code></td>
<td>
<p>New left boundary</p>
</td></tr>
<tr><td><code id="zoom_+3A_right">right</code></td>
<td>
<p>New right boundary</p>
</td></tr>
<tr><td><code id="zoom_+3A_top">top</code></td>
<td>
<p>New top boundary</p>
</td></tr>
<tr><td><code id="zoom_+3A_bottom">bottom</code></td>
<td>
<p>New bottom boundary</p>
</td></tr>
<tr><td><code id="zoom_+3A_refreshplot">refreshPlot</code></td>
<td>
<p>Refresh plot automatically. Defaults to TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbin(silent=TRUE,setDefault=TRUE,parameters=list(dimension="1D",binwidth1D=.1,
         PQNScaling="No",noiseRemoval="No",trimZeros="No",tryParallel=FALSE,
         fixNegatives="No",logTrafo="No",PCA="No",verbose=TRUE,
         NMRfolders=system.file("extdata/1/10/pdata/10",package="mrbin")))
plotNMR()
zoom(left=4.6,right=2,top=10,bottom=150)
</code></pre>

<hr>
<h2 id='zoomIn'>A function for changing plotNMR plots.</h2><span id='topic+zoomIn'></span>

<h3>Description</h3>

<p>This function zooms into the plot region of the current NMR plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zoomIn(refreshPlot = TRUE, x = TRUE, y = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="zoomIn_+3A_refreshplot">refreshPlot</code></td>
<td>
<p>Refresh plot automatically. Defaults to TRUE</p>
</td></tr>
<tr><td><code id="zoomIn_+3A_x">x</code></td>
<td>
<p>Change x axis? Defaults to TRUE</p>
</td></tr>
<tr><td><code id="zoomIn_+3A_y">y</code></td>
<td>
<p>Change y axis? Defaults to TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbin(silent=TRUE,setDefault=TRUE,parameters=list(dimension="1D",binwidth1D=.1,
         PQNScaling="No",noiseRemoval="No",trimZeros="No",tryParallel=FALSE,
         fixNegatives="No",logTrafo="No",PCA="No",verbose=TRUE,
         NMRfolders=system.file("extdata/1/10/pdata/10",package="mrbin")))
plotNMR()
zoomIn()
</code></pre>

<hr>
<h2 id='zoomOut'>A function for changing plotNMR plots.</h2><span id='topic+zoomOut'></span>

<h3>Description</h3>

<p>This function zooms out from the plot region of the current NMR plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zoomOut(refreshPlot = TRUE, x = TRUE, y = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="zoomOut_+3A_refreshplot">refreshPlot</code></td>
<td>
<p>Refresh plot automatically. Defaults to TRUE</p>
</td></tr>
<tr><td><code id="zoomOut_+3A_x">x</code></td>
<td>
<p>Change x axis? Defaults to TRUE</p>
</td></tr>
<tr><td><code id="zoomOut_+3A_y">y</code></td>
<td>
<p>Change y axis? Defaults to TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mrbin(silent=TRUE,setDefault=TRUE,parameters=list(dimension="1D",binwidth1D=.1,
         PQNScaling="No",noiseRemoval="No",trimZeros="No",tryParallel=FALSE,
         fixNegatives="No",logTrafo="No",PCA="No",verbose=TRUE,
         NMRfolders=system.file("extdata/1/10/pdata/10",package="mrbin")))
plotNMR()
zoomIn()
zoomOut()
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
