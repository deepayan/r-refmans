<!DOCTYPE html><html lang="en"><head><title>Help for package presize</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {presize}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#presize-package'><p>presize: Precision Based Sample Size Calculation</p></a></li>
<li><a href='#launch_presize_app'><p>Presize shiny app</p></a></li>
<li><a href='#prec_auc'><p>Sample size or precision for AUC</p></a></li>
<li><a href='#prec_cor'><p>Sample size or precision for correlation coefficient</p></a></li>
<li><a href='#prec_cronb'><p>Sample size or precision for Cronbach's alpha</p></a></li>
<li><a href='#prec_icc'><p>Sample size or precision for an intraclass correlation</p></a></li>
<li><a href='#prec_kappa'><p>Sample size or precision for Cohen's kappa</p></a></li>
<li><a href='#prec_lim_agree'><p>Sample size or precision for limit of agreement on Bland-Altman plots</p></a></li>
<li><a href='#prec_lr'><p>Sample size or precision for likelihood ratios</p></a></li>
<li><a href='#prec_mean'><p>Sample size or precision for a mean</p></a></li>
<li><a href='#prec_meandiff'><p>Sample size or precision for a mean difference</p></a></li>
<li><a href='#prec_or'><p>Sample size or precision for an odds ratio</p></a></li>
<li><a href='#prec_prop'><p>Sample size or precision for a proportion</p></a></li>
<li><a href='#prec_rate'><p>Sample size or precision for a rate</p></a></li>
<li><a href='#prec_rateratio'><p>Sample size or precision for a rate ratio</p></a></li>
<li><a href='#prec_riskdiff'><p>Sample size or precision for risk difference</p></a></li>
<li><a href='#prec_riskratio'><p>Sample size or precision for risk ratio</p></a></li>
<li><a href='#prec_sens'><p>Sample size and precision of sensitivity and specificity</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Precision Based Sample Size Calculation</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.7</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alan G. Haynes &lt;alan.haynes@ctu.unibe.ch&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Bland (2009) &lt;<a href="https://doi.org/10.1136%2Fbmj.b3985">doi:10.1136/bmj.b3985</a>&gt; recommended to
    base study sizes on the width of the confidence interval rather the power of 
    a statistical test. The goal of 'presize' is to provide functions for such 
    precision based sample size calculations. For a given sample size, the 
    functions will return the precision (width of the confidence interval), and 
    vice versa. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/CTU-Bern/presize">https://github.com/CTU-Bern/presize</a>,
<a href="https://ctu-bern.github.io/presize/">https://ctu-bern.github.io/presize/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/CTU-Bern/presize/issues">https://github.com/CTU-Bern/presize/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>binom, dplyr, ggplot2, gt, Hmisc, knitr, magrittr, markdown,
rmarkdown, shinydashboard, shinytest, testthat, tidyr</td>
</tr>
<tr>
<td>Imports:</td>
<td>kappaSize (&ge; 1.2), shiny</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-02-27 11:52:25 UTC; haynes</td>
</tr>
<tr>
<td>Author:</td>
<td>Armando Lenz [aut],
  Alan G. Haynes [cre, aut],
  Andreas Limacher [aut],
  Odile Stalder [ctb],
  Marie Roumet [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-02-27 21:02:29 UTC</td>
</tr>
</table>
<hr>
<h2 id='presize-package'>presize: Precision Based Sample Size Calculation</h2><span id='topic+presize'></span><span id='topic+presize-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Bland (2009) <a href="https://doi.org/10.1136/bmj.b3985">doi:10.1136/bmj.b3985</a> recommended to base study sizes on the width of the confidence interval rather the power of a statistical test. The goal of 'presize' is to provide functions for such precision based sample size calculations. For a given sample size, the functions will return the precision (width of the confidence interval), and vice versa.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Alan G. Haynes <a href="mailto:alan.haynes@ctu.unibe.ch">alan.haynes@ctu.unibe.ch</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Armando Lenz <a href="mailto:armando.lenz@ctu.unibe.ch">armando.lenz@ctu.unibe.ch</a>
</p>
</li>
<li><p> Andreas Limacher <a href="mailto:andreas.limacher@ctu.unibe.ch">andreas.limacher@ctu.unibe.ch</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Odile Stalder <a href="mailto:odile.stalder@ctu.unibe.ch">odile.stalder@ctu.unibe.ch</a> [contributor]
</p>
</li>
<li><p> Marie Roumet <a href="mailto:marie.roumet@ctu.unibe.ch">marie.roumet@ctu.unibe.ch</a> [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/CTU-Bern/presize">https://github.com/CTU-Bern/presize</a>
</p>
</li>
<li> <p><a href="https://ctu-bern.github.io/presize/">https://ctu-bern.github.io/presize/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/CTU-Bern/presize/issues">https://github.com/CTU-Bern/presize/issues</a>
</p>
</li></ul>


<hr>
<h2 id='launch_presize_app'>Presize shiny app</h2><span id='topic+launch_presize_app'></span>

<h3>Description</h3>

<p>Besides the programmatic approach to using presize, we also supply a shiny app,
enabling point-and-click interaction with the program. The app will open in a
new window. Select the appropriate method from the menu on the left and enter
the relevant parameters indicated in the panel on the right. The output is then
displayed lower down the page.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>launch_presize_app()
</code></pre>


<h3>Details</h3>

<p>The main disadvantage to the app is that it only allows a single scenario at
a time.
</p>
<p>The app is also available at <a href="https://shiny.ctu.unibe.ch/presize/">https://shiny.ctu.unibe.ch/presize/</a>.
</p>
<p><img src="../help/figures/app.png" width="100%" alt="app.png" />
</p>


<h3>Examples</h3>

<pre><code class='language-R'># launch the app
## Not run: 
launch_presize_app()

## End(Not run)

</code></pre>

<hr>
<h2 id='prec_auc'>Sample size or precision for AUC</h2><span id='topic+prec_auc'></span>

<h3>Description</h3>

<p>Calculate the sample size from AUC, prevalence and confidence interval width
or the expected confidence interval width from AUC, prevalence and sample
size, following Hanley and McNeil (1982).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prec_auc(auc, prev, n = NULL, conf.width = NULL, conf.level = 0.95, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prec_auc_+3A_auc">auc</code></td>
<td>
<p>AUC value.</p>
</td></tr>
<tr><td><code id="prec_auc_+3A_prev">prev</code></td>
<td>
<p>prevalence.</p>
</td></tr>
<tr><td><code id="prec_auc_+3A_n">n</code></td>
<td>
<p>number of observations.</p>
</td></tr>
<tr><td><code id="prec_auc_+3A_conf.width">conf.width</code></td>
<td>
<p>precision (the full width of the confidence interval).</p>
</td></tr>
<tr><td><code id="prec_auc_+3A_conf.level">conf.level</code></td>
<td>
<p>confidence level.</p>
</td></tr>
<tr><td><code id="prec_auc_+3A_...">...</code></td>
<td>
<p>other arguments to <code>optimize</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Sample size is derived by optimizing the difference between the difference
between the lower and upper limits of the confidence interval and
<code>conf.width</code>.
</p>


<h3>Value</h3>

<p>Object of class &quot;presize&quot;, a list of arguments (including the
computed one) augmented with method and note elements.
</p>


<h3>References</h3>

<p>Hanley, JA and McNeil, BJ (1982) <em>The Meaning and Use of the Area under a Receiver Operating Characteristic (ROC) Curve.</em> Radiology 148, 29-36
</p>


<h3>Examples</h3>

<pre><code class='language-R'># confidence interval width
N &lt;- 500
prev &lt;- .1
auc &lt;- .65
(prec &lt;- prec_auc(auc, prev, n = N))
cwidth &lt;- prec$conf.width
# sample size
prec_auc(auc, prev, conf.width = cwidth)
</code></pre>

<hr>
<h2 id='prec_cor'>Sample size or precision for correlation coefficient</h2><span id='topic+prec_cor'></span>

<h3>Description</h3>

<p><code>prec_cor</code> returns the sample size or the precision for the given
pearson, spearman, or kendall correlation coefficient.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prec_cor(
  r,
  n = NULL,
  conf.width = NULL,
  conf.level = 0.95,
  method = c("pearson", "kendall", "spearman"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prec_cor_+3A_r">r</code></td>
<td>
<p>desired correlation coefficient.</p>
</td></tr>
<tr><td><code id="prec_cor_+3A_n">n</code></td>
<td>
<p>sample size.</p>
</td></tr>
<tr><td><code id="prec_cor_+3A_conf.width">conf.width</code></td>
<td>
<p>precision (the full width of the confidence interval).</p>
</td></tr>
<tr><td><code id="prec_cor_+3A_conf.level">conf.level</code></td>
<td>
<p>confidence level.</p>
</td></tr>
<tr><td><code id="prec_cor_+3A_method">method</code></td>
<td>
<p>Exactly one of <code>pearson</code> (<em>default</em>), <code>kendall</code>,
or <code>spearman</code>. Methods can be abbreviated.</p>
</td></tr>
<tr><td><code id="prec_cor_+3A_...">...</code></td>
<td>
<p>other options to uniroot (e.g. <code>tol</code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exactly one of the parameters <code>n</code> or <code>conf.width</code> must be passed as NULL,
and that parameter is determined from the other.
</p>
<p>Sample size or precision is calculated according to formula 2 in Bonett and
Wright (2000). The use of pearson is only recommended, if <code class="reqn">n \ge 25</code>. The
pearson correlation coefficient assumes bivariate normality. If the
assumption of bivariate normality cannot be met, spearman or kendall should
be considered.
</p>
<p>n is rounded up to the next whole number using <code>ceiling</code>.
</p>
<p><code><a href="stats.html#topic+uniroot">uniroot</a></code> is used to solve n.
</p>


<h3>Value</h3>

<p>Object of class &quot;presize&quot;, a list of arguments (including the
computed one) augmented with method and note elements.
</p>


<h3>References</h3>

<p>Bonett DG, and Wright TA (2000) <em>Sample size requirements
for estimating Pearson, Kendall and Spearman correlations</em> Psychometrika
65:23-28. <a href="https://doi.org/10.1007/BF02294183">doi:10.1007/BF02294183</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># calculate confidence interval width...
# Pearson correlation coefficient
prec_cor(r = 0.5, n = 100)
# Kendall rank correlation coefficient (tau)
prec_cor(r = 0.5, n = 100, method = "kendall")
# Spearman's rank correlation coefficient
prec_cor(r = 0.5, n = 100, method = "spearman")
# calculate N required for a given confidence interval width...
# Pearson correlation coefficient
prec_cor(r = 0.5, conf.width = .15)
# Kendall rank correlation coefficient (tau)
prec_cor(r = 0.5, conf.width = .15, method = "kendall")
# Spearman's rank correlation coefficient
prec_cor(r = 0.5, conf.width = .15, method = "spearman")
</code></pre>

<hr>
<h2 id='prec_cronb'>Sample size or precision for Cronbach's alpha</h2><span id='topic+prec_cronb'></span>

<h3>Description</h3>

<p><code>prec_cronb</code> returns the sample size or the precision for the given
Cronbach's alpha.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prec_cronb(k, calpha, n = NULL, conf.level = 0.95, conf.width = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prec_cronb_+3A_k">k</code></td>
<td>
<p>number of measurements/items.</p>
</td></tr>
<tr><td><code id="prec_cronb_+3A_calpha">calpha</code></td>
<td>
<p>desired Cronbach's alpha.</p>
</td></tr>
<tr><td><code id="prec_cronb_+3A_n">n</code></td>
<td>
<p>sample size.</p>
</td></tr>
<tr><td><code id="prec_cronb_+3A_conf.level">conf.level</code></td>
<td>
<p>confidence level.</p>
</td></tr>
<tr><td><code id="prec_cronb_+3A_conf.width">conf.width</code></td>
<td>
<p>precision (the full width of the confidence interval).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exactly one of the parameters <code>n</code> or <code>conf.width</code> must be passed as NULL,
and that parameter is determined from the other.
</p>
<p>Sample size or precision is calculated according to the formula &amp; code and
provided in Bonett and Wright (2014).
</p>
<p>n is rounded up to the next whole number using <code>ceiling</code>.
</p>


<h3>Value</h3>

<p>Object of class &quot;presize&quot;, a list of arguments (including the
computed one) augmented with method and note elements.
</p>


<h3>References</h3>

<p>Bonett, D. G. and Wright, T. A. (2015) <em>Cronbach's alpha reliability: Interval estimation, hypothesis testing, and sample size planning</em> J. Organiz. Behav., 36, pages 3– 15. <a href="https://doi.org/10.1002/job.1960">doi:10.1002/job.1960</a>.
# k= number of items
</p>


<h3>Examples</h3>

<pre><code class='language-R'># calculate confidence interval width...
prec_cronb (k=5,calpha=0.7,n= 349,conf.level= 0.95, conf.width= NULL)
# calculate N required for a given confidence interval width...
prec_cronb (k=5,calpha=0.7,n= NULL,conf.level= 0.95, conf.width= 0.1)
</code></pre>

<hr>
<h2 id='prec_icc'>Sample size or precision for an intraclass correlation</h2><span id='topic+prec_icc'></span>

<h3>Description</h3>

<p><code>prec_icc</code> returns the sample size or the precision for the given
intraclass correlation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prec_icc(rho, k, n = NULL, conf.width = NULL, conf.level = 0.95)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prec_icc_+3A_rho">rho</code></td>
<td>
<p>desired intraclass correlation.</p>
</td></tr>
<tr><td><code id="prec_icc_+3A_k">k</code></td>
<td>
<p>number of observations per n (subject).</p>
</td></tr>
<tr><td><code id="prec_icc_+3A_n">n</code></td>
<td>
<p>number of subjects.</p>
</td></tr>
<tr><td><code id="prec_icc_+3A_conf.width">conf.width</code></td>
<td>
<p>precision (the full width of the confidence interval).</p>
</td></tr>
<tr><td><code id="prec_icc_+3A_conf.level">conf.level</code></td>
<td>
<p>confidence level.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exactly one of the parameters <code>n</code> or <code>conf.width</code> must be passed as NULL,
and that parameter is determined from the others.
</p>
<p>Sample size or precision is calculated according to formula 3 in Bonett
(2002), which is an approximation. Whether ICC is calculated for a one-way or
a two-way ANOVA does not matter in the approximation. As suggested by the
author, <code class="reqn">5*rho</code> is added to n, if <code class="reqn">k = 2</code> and <code class="reqn">rho \ge 7</code>. This
makes the assumption that there is no interaction between rater and subject.
</p>
<p>n is rounded up to the next whole number using <code>ceiling</code>.
</p>


<h3>Value</h3>

<p>Object of class &quot;presize&quot;, a list of arguments (including the
computed one) augmented with method and note elements.
</p>


<h3>References</h3>

<p>Bonett DG (2002). <em>Sample size requirements for estimating
intraclass correlations with desired precision</em>. Statistics in Medicine,
21:1331-1335. <a href="https://doi.org/10.1002/sim.1108">doi:10.1002/sim.1108</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Bonett (2002) gives an example using 4 raters, with an ICC of 0.85 and want
# a confidence width of 0.2. Bonett calculated that a sample size of 19.2 was
# required. This can be done via
prec_icc(0.85, 4, conf.width = 0.2)
# note that \code{presamp} rounds up to the nearist integer.

# Bonett then goes on to estimate the width given the sample size, finding a
# value 'close to 0.2':
prec_icc(0.85, 4, 20)
</code></pre>

<hr>
<h2 id='prec_kappa'>Sample size or precision for Cohen's kappa</h2><span id='topic+prec_kappa'></span>

<h3>Description</h3>

<p><code>prec_kappa</code> returns the sample size or the precision for the provided Cohen's kappa coefficient.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prec_kappa(
  kappa,
  n = NULL,
  raters = 2,
  n_category = 2,
  props,
  conf.width = NULL,
  conf.level = 0.95
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prec_kappa_+3A_kappa">kappa</code></td>
<td>
<p>expected value of Cohen's kappa.</p>
</td></tr>
<tr><td><code id="prec_kappa_+3A_n">n</code></td>
<td>
<p>sample size.</p>
</td></tr>
<tr><td><code id="prec_kappa_+3A_raters">raters</code></td>
<td>
<p>number of raters (maximum of 6).</p>
</td></tr>
<tr><td><code id="prec_kappa_+3A_n_category">n_category</code></td>
<td>
<p>number of categories of outcomes (maximum of 5).</p>
</td></tr>
<tr><td><code id="prec_kappa_+3A_props">props</code></td>
<td>
<p>expected proportions of each outcome (should have length
<code>n_category</code>).</p>
</td></tr>
<tr><td><code id="prec_kappa_+3A_conf.width">conf.width</code></td>
<td>
<p>precision (the full width of the confidence interval).</p>
</td></tr>
<tr><td><code id="prec_kappa_+3A_conf.level">conf.level</code></td>
<td>
<p>confidence level.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function wraps the <code>FixedN</code> and <code>CI</code> functions in the
<code>kappaSize</code> package.
The <code>FixedN</code> functions in <code>kappaSize</code> return a one sided confidence
interval. The values that are passed to <code>kappaSize</code> ensure that two-sided
confidence intervals are returned, although we assume that confidence intervals
are symmetrical.
</p>


<h3>Value</h3>

<p>Object of class &quot;presize&quot;, a list of arguments (including the
computed one) augmented with method and note elements.
</p>


<h3>See Also</h3>

<p><code><a href="kappaSize.html#topic+FixedNBinary">FixedNBinary</a></code>,
<code><a href="kappaSize.html#topic+FixedN3Cats">FixedN3Cats</a></code>,
<code><a href="kappaSize.html#topic+CIBinary">CIBinary</a></code>,
<code><a href="kappaSize.html#topic+CI3Cats">CI3Cats</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># precision based on sample size
#   two categories with proportions of 30 and 70\%, four raters
prec_kappa(kappa = .5, n = 200, raters = 4, n_category = 2, props = c(.3,.7))
# sample size to get a given precision
prec_kappa(kappa = .5, conf.width = .15, raters = 4, n_category = 2,
           props = c(.3,.7))

# as above, but with two scenarios for kappa
prec_kappa(kappa = c(.5, .75), conf.width = .15, raters = 4, n_category = 2,
           props = c(.3,.7))
prec_kappa(kappa = c(.5, .75), conf.width = c(.15, 0.3), raters = 4,
           n_category = 2, props = c(.3,.7))

</code></pre>

<hr>
<h2 id='prec_lim_agree'>Sample size or precision for limit of agreement on Bland-Altman plots</h2><span id='topic+prec_lim_agree'></span>

<h3>Description</h3>

<p><code>prec_lim_agree</code> returns the sample size or the precision for the limit
of agreement, i.e. the confidence interval around the limit of agreement,
expressed in SD-units. It is an approximation based on the Normal distribution,
instead of a Student t distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prec_lim_agree(n = NULL, conf.width = NULL, conf.level = 0.95)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prec_lim_agree_+3A_n">n</code></td>
<td>
<p>sample size.</p>
</td></tr>
<tr><td><code id="prec_lim_agree_+3A_conf.width">conf.width</code></td>
<td>
<p>precision (the full width of the confidence interval).</p>
</td></tr>
<tr><td><code id="prec_lim_agree_+3A_conf.level">conf.level</code></td>
<td>
<p>confidence level.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exactly one of the parameters <code>n</code> or <code>conf.width</code> must be passed as NULL,
and that parameter is determined from the other.
</p>
<p>The sample size and precision are calculated according to formulae in Bland &amp;
Altman (1986). The CI width is a simple function of the sample size only.
</p>


<h3>Value</h3>

<p>Object of class &quot;presize&quot;, a list of arguments (including the
computed one) augmented with method and note elements.
</p>


<h3>References</h3>

<p>Bland &amp; Altman (1986) <em>Statistical methods for assessing agreement
between two methods of clinical measurement</em> Lancet i(8476):307-310
<a href="https://doi.org/10.1016/S0140-6736%2886%2990837-8">doi:10.1016/S0140-6736(86)90837-8</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># calculate confidence interval width, given N
prec_lim_agree(200)
# calculate N given, confidence interval width
prec_lim_agree(conf.width = .1)
</code></pre>

<hr>
<h2 id='prec_lr'>Sample size or precision for likelihood ratios</h2><span id='topic+prec_lr'></span><span id='topic+prec_pos_lr'></span><span id='topic+prec_neg_lr'></span>

<h3>Description</h3>

<p>These functions calculate the precision or sample size for likelihood ratios (LRs).
<code>prec_lr</code> is a generalized method for that can be used for positive and
negative LRs as well as conditional LRs.
</p>
<p><code>prec_pos_lr</code> is a wrapper to <code>prec_lr</code> to ease
calculations for positive likelihood ratios by allowing sensitivity and
specificity to be given explicitly.
</p>
<p><code>prec_neg_lr</code> is a wrapper to <code>prec_lr</code> to ease
calculations for negative likelihood ratios by allowing sensitivity and
specificity to be given explicitly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prec_lr(prev, p1, p2, n = NULL, conf.width = NULL, conf.level = 0.95, ...)

prec_pos_lr(
  prev,
  sens,
  spec,
  n = NULL,
  conf.width = NULL,
  conf.level = 0.95,
  ...
)

prec_neg_lr(
  prev,
  sens,
  spec,
  n = NULL,
  conf.width = NULL,
  conf.level = 0.95,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prec_lr_+3A_prev">prev</code></td>
<td>
<p>disease/case prevalence in the study group.</p>
</td></tr>
<tr><td><code id="prec_lr_+3A_p1">p1</code></td>
<td>
<p>proportion of positives in group 1 (e.g. sensitivity).</p>
</td></tr>
<tr><td><code id="prec_lr_+3A_p2">p2</code></td>
<td>
<p>proportion of positives in group 2 (e.g. 1 - specificity).</p>
</td></tr>
<tr><td><code id="prec_lr_+3A_n">n</code></td>
<td>
<p>total group size.</p>
</td></tr>
<tr><td><code id="prec_lr_+3A_conf.width">conf.width</code></td>
<td>
<p>precision (the full width of the confidence interval).</p>
</td></tr>
<tr><td><code id="prec_lr_+3A_conf.level">conf.level</code></td>
<td>
<p>confidence level (defaults to 0.95).</p>
</td></tr>
<tr><td><code id="prec_lr_+3A_...">...</code></td>
<td>
<p>other arguments to uniroot (e.g. <code>tol</code>).</p>
</td></tr>
<tr><td><code id="prec_lr_+3A_sens">sens</code></td>
<td>
<p>sensitivity.</p>
</td></tr>
<tr><td><code id="prec_lr_+3A_spec">spec</code></td>
<td>
<p>specificity.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions implement formula 10 from Simel et al 1991.
<code>prec_lr</code> is a generalized function allowing for many scenarios, while
<code>prec_pos_lr</code> and <code>prec_neg_lr</code> are specific to positive and
negative likelihood ratios in the 2*2 setting (e.g. disease status and test
positive/negative).
</p>
<p>For the positive likelihood ratio (LR+), in a 2x2 style experiment, <code>p1</code>
should be sensitivity, <code>p2</code> should be 1-specificity. Alternatively, use
<code>prec_pos_lr</code>.
</p>
<p>For the negative likelihood ratio (LR-), in a 2x2 style experiment, <code>p1</code>
should be 1-sensitivity, <code>p2</code> should be specificity. Alternatively, use
<code>prec_neg_lr</code>.
</p>
<p>For conditional likelihood ratios with 3x2 tables, such as positive or
negative tests against inconclusive ones (yields), <code>p1</code> would be the
proportion of positive or negative tests in the diseased group and <code>p2</code>
would be the proportion of positive or negative tests in the non-diseased group.
</p>


<h3>Value</h3>

<p>Object of class &quot;presize&quot;, a list of arguments (including the
computed one) augmented with method and note elements.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>prec_pos_lr()</code>: &quot;Positive likelihood ratio&quot;
</p>
</li>
<li> <p><code>prec_neg_lr()</code>: &quot;Negative likelihood ratio&quot;
</p>
</li></ul>


<h3>References</h3>

<p>Simel, DL, Samsa, GP and Matchar, DB (1991) <em>Likelihood ratios with confidence: Sample size estimation for diagnostic test studies.</em> J Clin Epidemiol 44(8), 763-770
</p>


<h3>Examples</h3>

<pre><code class='language-R'># equal numbers of diseased/non-diseased, 80% sens, 73% spec, 74 participants total
prec_lr(.5, .8, .27, 74)

# Simel et al 1991, problem 1 - LR+ CI width from N
# Sensitivity of a new test is at least 80%, specificity is 73% and the LR+
# is 2.96 (= 0.8/(1-0.73)). We have as many diseased as not diseased
# (n1 = n2, n = 2*n1 = 146.8, prevalence = .5)
prec_lr(prev = .5, p1 = .8, p2 = 1-.73, n = 146.8)
prec_pos_lr(prev = .5, sens = .8, spec = .73, n = 146.8)

# problem 1 of Simel et al actually derives n1 rather than the width of the
# confidence interval (ie N from CI width). If we know that the lower limit
# of the CI should be 2.0, the confidence interval width is approximately
# exp(2*(log(2.96) - log(2))) = 2.19 (approximate because the CI Of the LR
# is only symetrical on the log(LR) scale), which we can put in conf.width
prec_lr(prev = .5, p1 = .8, p2 = 1-.73, conf.width = 2.2)
# same, but using the wrapper to specify sens and spec
prec_pos_lr(prev = .5, sens = .8, spec = .73, conf.width = 2.2)

# Simel et al 1991, problem 2 - LR- CI width from N
# p1 = 1 - sens = .1, p2 = spec = .5
# n1 = n2, n = 160, prev = .5
prec_lr(prev = .5, p1 = .1, p2 = .5, n = 160)
# same, but using the wrapper to specify sens and spec
prec_neg_lr(prev = .5, sens = .9, spec = .5, n = 160)

</code></pre>

<hr>
<h2 id='prec_mean'>Sample size or precision for a mean</h2><span id='topic+prec_mean'></span>

<h3>Description</h3>

<p><code>prec_mean</code> returns the sample size or the precision for the provided
mean and standard deviation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prec_mean(
  mean,
  sd,
  n = NULL,
  conf.width = NULL,
  conf.level = 0.95,
  ...,
  mu = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prec_mean_+3A_mean">mean</code></td>
<td>
<p>mean.</p>
</td></tr>
<tr><td><code id="prec_mean_+3A_sd">sd</code></td>
<td>
<p>standard deviation.</p>
</td></tr>
<tr><td><code id="prec_mean_+3A_n">n</code></td>
<td>
<p>number of observations.</p>
</td></tr>
<tr><td><code id="prec_mean_+3A_conf.width">conf.width</code></td>
<td>
<p>precision (the full width of the confidence interval).</p>
</td></tr>
<tr><td><code id="prec_mean_+3A_conf.level">conf.level</code></td>
<td>
<p>confidence level.</p>
</td></tr>
<tr><td><code id="prec_mean_+3A_...">...</code></td>
<td>
<p>other arguments to uniroot (e.g. <code>tol</code>).</p>
</td></tr>
<tr><td><code id="prec_mean_+3A_mu">mu</code></td>
<td>
<p>deprecated argument</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exactly one of the parameters <code>n</code> or <code>conf.width</code> must be passed as NULL,
and that parameter is determined from the other.
</p>
<p>The precision is defined as the full width of the confidence interval. The
confidence interval calculated as <code class="reqn">t(n - 1) * sd / sqrt(n)</code>, with t(n-1)
from the t-distribution with n-1 degrees of freedom.
</p>
<p>This function is also suitable for a difference in paired means, as this reduces
to a single value per individual - the difference.
</p>
<p><code><a href="stats.html#topic+uniroot">uniroot</a></code> is used to solve <code>n</code>.
</p>


<h3>Value</h3>

<p>Object of class &quot;presize&quot;, a list with <code>mean</code> mean, <code>sd</code> standard deviation, <code>n</code> sample size,
<code>conf.width</code> precision (the width of the confidence interval),
<code>lwr</code> lower bound of confidence interval, <code>upr</code> upper bound of confidence interval,
augmented with method and note elements.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># mean of 5, SD of 2.5, whats the confidence interval width with 20 participants?
prec_mean(mean = 5, sd = 2.5, n = 20)
# mean of 5, SD of 2.5, how many participants for CI width of 2.34?
prec_mean(mean = 5, sd = 2.5, conf.width = 2.34)  # approximately the inverse of above
</code></pre>

<hr>
<h2 id='prec_meandiff'>Sample size or precision for a mean difference</h2><span id='topic+prec_meandiff'></span>

<h3>Description</h3>

<p><code>prec_meandiff</code> returns the sample size or the precision for the
provided mean difference and standard deviations. For paired differences, use
<code>prec_mean</code>, as it is equivalent to a simple mean.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prec_meandiff(
  delta,
  sd1,
  sd2 = sd1,
  n1 = NULL,
  r = 1,
  conf.width = NULL,
  conf.level = 0.95,
  variance = c("equal", "unequal"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prec_meandiff_+3A_delta">delta</code></td>
<td>
<p>difference in means between the two groups.</p>
</td></tr>
<tr><td><code id="prec_meandiff_+3A_sd1">sd1</code></td>
<td>
<p>standard deviation in group 1.</p>
</td></tr>
<tr><td><code id="prec_meandiff_+3A_sd2">sd2</code></td>
<td>
<p>standard deviation in group 2.</p>
</td></tr>
<tr><td><code id="prec_meandiff_+3A_n1">n1</code></td>
<td>
<p>number of patients in group 1.</p>
</td></tr>
<tr><td><code id="prec_meandiff_+3A_r">r</code></td>
<td>
<p>allocation ratio (relative size of group 2 and group 1 (n2 / n1)).</p>
</td></tr>
<tr><td><code id="prec_meandiff_+3A_conf.width">conf.width</code></td>
<td>
<p>precision (the full width of the confidence interval).</p>
</td></tr>
<tr><td><code id="prec_meandiff_+3A_conf.level">conf.level</code></td>
<td>
<p>confidence level.</p>
</td></tr>
<tr><td><code id="prec_meandiff_+3A_variance">variance</code></td>
<td>
<p><code>equal</code> (<em>default</em>) or <code>unequal</code> variance.</p>
</td></tr>
<tr><td><code id="prec_meandiff_+3A_...">...</code></td>
<td>
<p>other options to uniroot (e.g. <code>tol</code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exactly one of the parameters <code>n</code> or <code>conf.width</code> must be passed as NULL,
and that parameter is determined from the other.
</p>


<h3>Value</h3>

<p>Object of class &quot;presize&quot;, a list of arguments (including the
computed one) augmented with method and note elements.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># mean difference of 5, SD of 2.5, CI width with 20 participants assuming equal variances
prec_meandiff(delta = 5, sd1 = 2.5, n1 = 20, var = "equal")
# mean difference of 5, SD of 2.5, number of participants for a CI width of 3,
#  assuming equal variances
prec_meandiff(delta = 5, sd1 = 2.5, conf.width = 3, var = "equal")
</code></pre>

<hr>
<h2 id='prec_or'>Sample size or precision for an odds ratio</h2><span id='topic+prec_or'></span>

<h3>Description</h3>

<p><code>prec_or</code> returns the sample size or the precision for the
provided proportions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prec_or(
  p1,
  p2,
  n1 = NULL,
  r = 1,
  conf.width = NULL,
  conf.level = 0.95,
  method = c("gart", "woolf", "indip_smooth"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prec_or_+3A_p1">p1</code></td>
<td>
<p>risk among exposed.</p>
</td></tr>
<tr><td><code id="prec_or_+3A_p2">p2</code></td>
<td>
<p>risk among unexposed.</p>
</td></tr>
<tr><td><code id="prec_or_+3A_n1">n1</code></td>
<td>
<p>number of patients in exposed group.</p>
</td></tr>
<tr><td><code id="prec_or_+3A_r">r</code></td>
<td>
<p>allocation ratio (relative size of unexposed and exposed cohort
(<code>n2</code> / <code>n1</code>)).</p>
</td></tr>
<tr><td><code id="prec_or_+3A_conf.width">conf.width</code></td>
<td>
<p>precision (the full width of the confidence interval).</p>
</td></tr>
<tr><td><code id="prec_or_+3A_conf.level">conf.level</code></td>
<td>
<p>confidence level.</p>
</td></tr>
<tr><td><code id="prec_or_+3A_method">method</code></td>
<td>
<p>Exactly one of <code>indip_smooth</code> (<em>default</em>),
<code>gart</code>, or <code>woolf</code>. Methods can be abbreviated.</p>
</td></tr>
<tr><td><code id="prec_or_+3A_...">...</code></td>
<td>
<p>other arguments to uniroot (e.g. <code>tol</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exactly one of the parameters <code>n1</code> or <code>conf.width</code> must be passed as NULL,
and that parameter is determined from the other.
</p>
<p>Woolf (<code>woolf</code>), Gart (<code>gart</code>), and Independence-smoothed logit
(<code>indip_smooth</code>) belong to a general family of adjusted confidence
intervals, adding 0 (woolf) to each cell, 0.5 (gart) to each cell, or an
adjustment for each cell based on observed data (independence-smoothed). In
gart and indip_smooth, estimate of the CI is not possible if <code class="reqn">p1 = 0</code>, in
which case the OR becomes 0, but the lower level of the CI is &gt; 0. Further,
if <code class="reqn">p1 = 1</code> and <code class="reqn">p2 &lt; 1</code>, or if <code class="reqn">p1 &gt; 0</code> and <code class="reqn">p2 = 0</code>, the OR
becomes <code class="reqn">\infty</code>, but the upper limit of the CI is finite. For the
approximate intervals, <code>gart</code> and <code>indip_smooth</code> are the
recommended intervals (Fagerland et al. 2011).
</p>
<p><code><a href="stats.html#topic+uniroot">uniroot</a></code> is used to solve n for the woolf, gart, and
indip_smooth method.
</p>


<h3>Value</h3>

<p>Object of class &quot;presize&quot;, a list of arguments (including the
computed one) augmented with method and note elements.
</p>


<h3>References</h3>

<p>Fagerland MW, Lydersen S, Laake P (2015). <em>Recommended
confidence intervals for two independent binomial proportions</em>. Statistical
Methods in Medical Research, 24(2):224-254.
<a href="https://doi.org/10.1177/0962280211415469">doi:10.1177/0962280211415469</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># 10\% events in one group, 15\% in the other, 200 participants total
#  (= 100 in each group), estimate confidence interval width
prec_or(p1 = .1, p2 = .15, n1 = 200/2)
# formula by Gart
prec_or(p1 = .1, p2 = .15, n1 = 200/2, method = "gart")
# formula by Woolf
prec_or(p1 = .1, p2 = .15, n1 = 200/2, method = "woolf")

# 10\% odds in one group, 15\% in the other, desired CI width of 0.1,
#  estimate N
prec_or(p1 = .1, p2 = .15, conf.width = .1)
# formula by Gart
prec_or(p1 = .1, p2 = .15, conf.width = .1, method = "gart")
# formula by Woolf
prec_or(p1 = .1, p2 = .15, conf.width = .1, method = "woolf")

</code></pre>

<hr>
<h2 id='prec_prop'>Sample size or precision for a proportion</h2><span id='topic+prec_prop'></span>

<h3>Description</h3>

<p><code>prec_prop</code> returns the sample size or the precision for the provided
proportion.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prec_prop(
  p,
  n = NULL,
  conf.width = NULL,
  conf.level = 0.95,
  method = c("wilson", "agresti-coull", "exact", "wald"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prec_prop_+3A_p">p</code></td>
<td>
<p>proportion.</p>
</td></tr>
<tr><td><code id="prec_prop_+3A_n">n</code></td>
<td>
<p>number of observations.</p>
</td></tr>
<tr><td><code id="prec_prop_+3A_conf.width">conf.width</code></td>
<td>
<p>precision (the full width of the confidence interval).</p>
</td></tr>
<tr><td><code id="prec_prop_+3A_conf.level">conf.level</code></td>
<td>
<p>confidence level.</p>
</td></tr>
<tr><td><code id="prec_prop_+3A_method">method</code></td>
<td>
<p>The method to use to calculate precision. Exactly one method
may be provided. Methods can be abbreviated.</p>
</td></tr>
<tr><td><code id="prec_prop_+3A_...">...</code></td>
<td>
<p>other arguments to uniroot (e.g. <code>tol</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exactly one of the parameters <code>n</code> or <code>conf.width</code> must be passed as NULL,
and that parameter is determined from the other.
</p>
<p>The wilson, agresti-coull, exact, and wald method are implemented. The
wilson method is suggested for small <code>n</code> (&lt; 40), and the agresti-coull method
is suggested for larger <code>n</code> (see reference). The wald method is not suggested,
but provided due to its widely distributed use.
</p>
<p><code><a href="stats.html#topic+uniroot">uniroot</a></code> is used to solve <code>n</code> for the agresti-coull,
wilson, and exact methods. Agresti-coull can be abbreviated by ac.
</p>


<h3>Value</h3>

<p>Object of class &quot;presize&quot;, a list of arguments (including the
computed one) augmented with method and note elements. In the wilson and
agresti-coull formula, the p from which the confidence interval is
calculated is adjusted by a term (i.e. <code class="reqn">p + term \pm ci</code>). This
adjusted p is returned in <code>padj</code>.
</p>


<h3>References</h3>

<p>Brown LD, Cai TT, DasGupta A (2001) <em>Interval Estimation for
a Binomial Proportion</em>, Statistical Science, 16:2, 101-117,
<a href="https://doi.org/10.1214/ss/1009213286">doi:10.1214/ss/1009213286</a>
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+binom.test">binom.test</a></code>, <code><a href="binom.html#topic+binom.confint">binom.confint</a></code>
in package <span class="pkg">binom</span>, and <code><a href="Hmisc.html#topic+binconf">binconf</a></code> in package
<span class="pkg">Hmisc</span>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># CI width for 15\% with 50 participants
prec_prop(0.15, n = 50)
# number of participants for 15\% with a CI width of 0.2
prec_prop(0.15, conf.width = 0.2)
# confidence interval width for a range of scenarios between 10 and 90\% with
#  100 participants via the wilson method
prec_prop(p = 1:9 / 10, n = 100, method = "wilson")
# number of participants for a range of scenarios between 10 and 90\% with
#  a CI of 0.192 via the wilson method
prec_prop(p = 1:9 / 10, conf.width = .192, method = "wilson")
</code></pre>

<hr>
<h2 id='prec_rate'>Sample size or precision for a rate</h2><span id='topic+prec_rate'></span>

<h3>Description</h3>

<p><code>prec_rate</code> returns the sample size or the precision for the provided
rate.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prec_rate(
  r,
  x = NULL,
  conf.width = NULL,
  conf.level = 0.95,
  method = c("score", "vs", "exact", "wald"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prec_rate_+3A_r">r</code></td>
<td>
<p>rate or rate ratio.</p>
</td></tr>
<tr><td><code id="prec_rate_+3A_x">x</code></td>
<td>
<p>number of events.</p>
</td></tr>
<tr><td><code id="prec_rate_+3A_conf.width">conf.width</code></td>
<td>
<p>precision (the full width of the confidence interval).
Should not exceed 5 times <code>r</code>.</p>
</td></tr>
<tr><td><code id="prec_rate_+3A_conf.level">conf.level</code></td>
<td>
<p>confidence level.</p>
</td></tr>
<tr><td><code id="prec_rate_+3A_method">method</code></td>
<td>
<p>The method to use to calculate precision. Exactly one method
may be provided. Methods can be abbreviated.</p>
</td></tr>
<tr><td><code id="prec_rate_+3A_...">...</code></td>
<td>
<p>other arguments to uniroot (e.g. <code>tol</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exactly one of the parameters <code>r</code> or <code>conf.width</code> must be passed as NULL,
and that parameter is determined from the other.
</p>
<p>The <code>score</code>, variance stabilizing (<code>vs</code>), <code>exact</code>, and
<code>wald</code> method are implemented to calculate the rate and the precision.
For few events <code>x</code> (&lt;5), the exact method is recommended.
</p>
<p>If more than one method is specified or the method is miss-specified, the
'score' method will be used.
</p>
<p><code><a href="stats.html#topic+uniroot">uniroot</a></code> is used to solve n for the score and
exact method.
</p>


<h3>Value</h3>

<p>Object of class &quot;presize&quot;, a list of arguments (including the
computed one) augmented with method and note elements.
</p>


<h3>References</h3>

<p>Barker, L. (2002) <em>A Comparison of Nine Confidence Intervals
for a Poisson Parameter When the Expected Number of Events is <code class="reqn">\le</code> 5</em>,
The American Statistician, 56:2, 85-89,
<a href="https://doi.org/10.1198/000313002317572736">doi:10.1198/000313002317572736</a>
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+poisson.test">poisson.test</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># confidence interval width for a rate of 2.5 events per unit and 20 events,
#  using the score method
prec_rate(2.5, x = 20, met = "score")
# number of events to yield a CI width of 2.243 for a rate of 2.5 events per
#  unit and 20 events, using the score method
prec_rate(2.5, conf.width = 2.243, met = "score")
# confidence interval width for a rate of 2.5 events per unit and 20 events,
#  using the exact method
prec_rate(2.5, x = 20, met = "exact")
# vs and wald have the same conf.width, but different lwr and upr
prec_rate(2.5, x = 20, met = "vs")
prec_rate(2.5, x = 20, met = "wald")
</code></pre>

<hr>
<h2 id='prec_rateratio'>Sample size or precision for a rate ratio</h2><span id='topic+prec_rateratio'></span>

<h3>Description</h3>

<p><code>prec_rateratio</code> returns the sample size or the precision for the
provided proportions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prec_rateratio(
  n1 = NULL,
  rate1 = NULL,
  rate2 = 2 * rate1,
  prec.level = NULL,
  r = 1,
  conf.level = 0.95
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prec_rateratio_+3A_n1">n1</code></td>
<td>
<p>number of patients in exposed group.</p>
</td></tr>
<tr><td><code id="prec_rateratio_+3A_rate1">rate1</code></td>
<td>
<p>event rate in the exposed group.</p>
</td></tr>
<tr><td><code id="prec_rateratio_+3A_rate2">rate2</code></td>
<td>
<p>event rate in the unexposed group.</p>
</td></tr>
<tr><td><code id="prec_rateratio_+3A_prec.level">prec.level</code></td>
<td>
<p>ratio of the upper limit over the lower limit of the
rate ratio confidence interval.</p>
</td></tr>
<tr><td><code id="prec_rateratio_+3A_r">r</code></td>
<td>
<p>allocation ratio (relative size of unexposed and exposed cohort
(<code>n2</code> / <code>n1</code>)).</p>
</td></tr>
<tr><td><code id="prec_rateratio_+3A_conf.level">conf.level</code></td>
<td>
<p>confidence level.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exactly one of the parameters  <code>n1</code> or <code>conf.width</code> must be passed as
NULL, and that parameter is determined from the other. Event rates in the two
groups should also be provided (<code>rate1, rate2</code>). If only
<code>rate1</code> is provided, <code>rate2</code> is assumed to be 2 times
<code>rate1</code>.
</p>


<h3>References</h3>

<p>Rothman KJ, Greenland S (2018). <em>Planning Study Size Based on
Precision Rather Than Power</em>. Epidemiology, 29:599-603.
<a href="https://doi.org/10.1097/EDE.0000000000000876">doi:10.1097/EDE.0000000000000876</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># 20 participants, a rate of 50%  against a rate of 300\%
prec_rateratio(20, .5, 3)
# sample size required to attain a CI whose upper limit is not more than 3.81 larger
#  than the lower limit
prec_rateratio(rate1 = .5, rate2 = 3, prec.level = 3.81)
</code></pre>

<hr>
<h2 id='prec_riskdiff'>Sample size or precision for risk difference</h2><span id='topic+prec_riskdiff'></span>

<h3>Description</h3>

<p><code>prec_riskdiff</code> returns the risk difference and the sample size or the
precision for the provided proportions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prec_riskdiff(
  p1,
  p2,
  n1 = NULL,
  conf.width = NULL,
  r = 1,
  conf.level = 0.95,
  method = c("newcombe", "mn", "ac", "wald"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prec_riskdiff_+3A_p1">p1</code></td>
<td>
<p>risk among exposed.</p>
</td></tr>
<tr><td><code id="prec_riskdiff_+3A_p2">p2</code></td>
<td>
<p>risk among unexposed.</p>
</td></tr>
<tr><td><code id="prec_riskdiff_+3A_n1">n1</code></td>
<td>
<p>number of patients in exposed group.</p>
</td></tr>
<tr><td><code id="prec_riskdiff_+3A_conf.width">conf.width</code></td>
<td>
<p>precision (the full width of the confidence interval).</p>
</td></tr>
<tr><td><code id="prec_riskdiff_+3A_r">r</code></td>
<td>
<p>allocation ratio (relative size of exposed and unexposed cohort
(<code>n1</code> / <code>n2</code>)).</p>
</td></tr>
<tr><td><code id="prec_riskdiff_+3A_conf.level">conf.level</code></td>
<td>
<p>confidence level.</p>
</td></tr>
<tr><td><code id="prec_riskdiff_+3A_method">method</code></td>
<td>
<p>Exactly one of <code>newcombe</code> (<em>default</em>), <code>mn</code>
(Miettinen-Nurminen), <code>ac</code> (Agresti-Caffo), <code>wald</code>. Methods can
be abbreviated.</p>
</td></tr>
<tr><td><code id="prec_riskdiff_+3A_...">...</code></td>
<td>
<p>other options to uniroot (e.g. <code>tol</code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exactly one of the parameters <code>n1</code> or <code>conf.width</code> must be passed as NULL,
and that parameter is determined from the other.
</p>
<p>Newcombe (<code>newcombe</code>) proposed a confidence interval based on the wilson
score method for the single proportion (see <a href="#topic+prec_prop">prec_prop</a>). The confidence
interval without continuity correction is implemented from equation 10 in
Newcombe (1998).
</p>
<p>Miettinen-Nurminen (<code>mn</code>) provide a closed from equation for the
restricted maximum likelihood estimate . The implementation is based on
code provided by Yongyi Min on
<a href="https://users.stat.ufl.edu/~aa/cda/R/two-sample/R2/index.html">https://users.stat.ufl.edu/~aa/cda/R/two-sample/R2/index.html</a>.
</p>
<p>Agresti-Caffo (<code>ac</code>) confidence interval is based on the Wald confidence
interval, adding 1 success to each cell of the 2 x 2 table (see Agresti and
Caffo 2000).
</p>
<p><code><a href="stats.html#topic+uniroot">uniroot</a></code> is used to solve n for the newcombe, ac, and mn
method.
</p>


<h3>References</h3>

<p>Agresti A (2003) <em>Categorical Data Analysis</em>, Second Edition, Wiley
Series in Probability and Statistics,
<a href="https://doi.org/10.1002/0471249688">doi:10.1002/0471249688</a>.
</p>
<p>Agresti A and Caffo B (2000) <em>Simple and Effective Confidence Intervals
for Proportions and Differences of Proportions Result from Adding Two
Successes and Two Failures</em>, The American Statistician, 54(4):280-288.
</p>
<p>Miettinen O and Nurminen M (1985) <em>Comparative analysis of two rates</em>,
Statistics in Medicine, 4:213-226.
</p>
<p>Newcombe RG (1998) <em>Interval estimation for the difference between
independent proportions: comparison of eleven methods</em>, Statistics in
Medicine, 17:873-890.
</p>
<p>Fagerland MW, Lydersen S, and Laake P (2015). <em>Recommended confidence
intervals for two independent binomial proportions</em>, Statistical methods in
medical research 24(2):224-254.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># proportions of 40 and 30\%, 50 participants, how wide is the CI?
prec_riskdiff(p1 = .4, p2 = .3, n1 = 50)
# proportions of 40 and 30\%, 50 participants, how many participants for a CI 0.2 wide?
prec_riskdiff(p1 = .4, p2 = .3, conf.width = .2)

# Validate Newcombe (1998)
prec_riskdiff(p1 = 56/70, p2 = 48/80, n1 = 70, r = 70/80, met = "newcombe")  # Table IIa
prec_riskdiff(p1 = 10/10, p2 = 0/10, n1 = 10, met = "newcombe")  # Table IIh

# multiple scenarios
prec_riskdiff(p1 = c(56/70, 9/10, 6/7, 5/56),
              p2 = c(48/80, 3/10, 2/7, 0/29),
              n1 = c(70, 10, 7, 56),
              r = c(70/80, 1, 1, 56/29),
              method = "wald")

</code></pre>

<hr>
<h2 id='prec_riskratio'>Sample size or precision for risk ratio</h2><span id='topic+prec_riskratio'></span>

<h3>Description</h3>

<p><code>prec_riskratio</code> returns the risk ratio and the sample size or the
precision for the provided proportions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prec_riskratio(
  p1,
  p2,
  n1 = NULL,
  r = 1,
  conf.width = NULL,
  conf.level = 0.95,
  method = c("koopman", "katz"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prec_riskratio_+3A_p1">p1</code></td>
<td>
<p>risk among exposed.</p>
</td></tr>
<tr><td><code id="prec_riskratio_+3A_p2">p2</code></td>
<td>
<p>risk among unexposed.</p>
</td></tr>
<tr><td><code id="prec_riskratio_+3A_n1">n1</code></td>
<td>
<p>number of patients in exposed group.</p>
</td></tr>
<tr><td><code id="prec_riskratio_+3A_r">r</code></td>
<td>
<p>allocation ratio (relative size of unexposed and exposed cohort
(<code>n2</code> / <code>n1</code>)).</p>
</td></tr>
<tr><td><code id="prec_riskratio_+3A_conf.width">conf.width</code></td>
<td>
<p>precision (the full width of the confidence interval).</p>
</td></tr>
<tr><td><code id="prec_riskratio_+3A_conf.level">conf.level</code></td>
<td>
<p>confidence level.</p>
</td></tr>
<tr><td><code id="prec_riskratio_+3A_method">method</code></td>
<td>
<p>Exactly one of <code>koopman</code> (<em>default</em>), <code>katz</code>.
Methods can be abbreviated.</p>
</td></tr>
<tr><td><code id="prec_riskratio_+3A_...">...</code></td>
<td>
<p>other arguments to uniroot (e.g. <code>tol</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exactly one of the parameters <code>n1</code> or <code>conf.width</code> must be passed as NULL,
and that parameter is determined from the other.
</p>
<p>Koopman (<code>koopman</code>) provides an asymptotic score confidence interval
that is always consistent with Pearsons chi-squared test. It is the
recommended interval (Fagerland et al.).
</p>
<p>Katz (<code>katz</code>) use a logarithmic transformation to calculate the
confidence interval. The CI cannot be computed if one of the proportions is
zero. If both proportions are 1, the estimate of the standard error becomes
zero, resulting in a CI of [1, 1].
</p>
<p><code><a href="stats.html#topic+uniroot">uniroot</a></code> is used to solve n for the katz, and koopman
method.
</p>


<h3>References</h3>

<p>Fagerland MW, Lydersen S, and Laake P (2015). <em>Recommended confidence
intervals for two independent binomial proportions</em>, Statistical methods in
medical research 24(2):224-254.
</p>
<p>Katz D, Baptista J, Azen SP, and Pike MC (1978) <em>Obtaining Confidence
Intervals for the Risk Ratio in Cohort Studies</em>, Biometrics 34:469-474.
</p>
<p>Koopman PAR (1984) <em>Confidence Intervals for the Ratio of Two Binomial
Proportions</em>, Biometrics 40:513-517.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Validate function with example in Fagerland et al. (2015), Table 5.
prec_riskratio(p1 = 7/34, p2 = 1/34, n1 = 34, r = 1, met = "katz")
# 7 (0.91 to 54)
prec_riskratio(p1 = 7/34, p2 = 1/34, n1 = 34, r = 1, met = "koopman")
# 7 (1.21 to 43)

# Validate the Koopman method with example in Koopman (1984)
prec_riskratio(p1 = 36/40, p2 = 16/80, n1 = 40, r = 2, met = "koopman")
# 4.5 (2.94 to 7.15)
</code></pre>

<hr>
<h2 id='prec_sens'>Sample size and precision of sensitivity and specificity</h2><span id='topic+prec_sens'></span><span id='topic+prec_spec'></span>

<h3>Description</h3>

<p>Because sensitivity (true positives/total number of positives) and specificity (true
negatives/total number of negatives) are simple proportions, these
functions act as wrappers for <code>prec_prop</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prec_sens(
  sens,
  n = NULL,
  ntot = NULL,
  prev = NULL,
  conf.width = NULL,
  round = "ceiling",
  ...
)

prec_spec(
  spec,
  n = NULL,
  ntot = NULL,
  prev = NULL,
  conf.width = NULL,
  round = "ceiling",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prec_sens_+3A_sens">sens</code>, <code id="prec_sens_+3A_spec">spec</code></td>
<td>
<p>proportions.</p>
</td></tr>
<tr><td><code id="prec_sens_+3A_n">n</code></td>
<td>
<p>number of observations.</p>
</td></tr>
<tr><td><code id="prec_sens_+3A_ntot">ntot</code></td>
<td>
<p>total sample size.</p>
</td></tr>
<tr><td><code id="prec_sens_+3A_prev">prev</code></td>
<td>
<p>prevalence of cases/disease (i.e. proportion of <code>ntot</code> with
the disease).</p>
</td></tr>
<tr><td><code id="prec_sens_+3A_conf.width">conf.width</code></td>
<td>
<p>precision (the full width of the confidence interval).</p>
</td></tr>
<tr><td><code id="prec_sens_+3A_round">round</code></td>
<td>
<p>string, round calculated <code>n</code> up (<code>ceiling</code>) or down
(<code>floor</code>).</p>
</td></tr>
<tr><td><code id="prec_sens_+3A_...">...</code></td>
<td>
<p>options passed to prec_prop (e.g. method,
conf.width, conf.level).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>ntot</code> and <code>prev</code> are given, they are used to calculate
<code>n</code>.
</p>


<h3>Value</h3>

<p>Object of class &quot;presize&quot;, a list of arguments (including the
computed one) augmented with method and note elements.
</p>


<h3>Note</h3>

<p>Calculated <code>n</code> can take on non-integer numbers, but
<code>prec_prop</code> requires integers, so the calculated <code>n</code> is rounded
according to the approach indicated in <code>round</code>.
</p>


<h3>See Also</h3>

<p><code>prec_prop</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # confidence interval width with n
  prec_sens(.6, 50)
  # confidence interval width with ntot and prevalence (assuming 50% prev)
  prec_sens(.6, ntot = 100, prev = .5)
  # sample size with confidence interval width
  prec_sens(.6, conf.width = 0.262)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
