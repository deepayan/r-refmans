<!DOCTYPE html><html lang="en"><head><title>Help for package aelab</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {aelab}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#calculate_do'><p>calculate_do</p></a></li>
<li><a href='#calculate_ghg_flux'><p>calculate_ghg_flux</p></a></li>
<li><a href='#calculate_regression'><p>calculate_regression</p></a></li>
<li><a href='#combine_hobo'><p>combine_hobo</p></a></li>
<li><a href='#combine_weather'><p>combine_weather</p></a></li>
<li><a href='#convert_ghg_unit'><p>convert_ghg_unit</p></a></li>
<li><a href='#convert_time'><p>convert_time</p></a></li>
<li><a href='#hobo'><p>Processed data from Onset HOBO Dissolved Oxygen Data Logger.</p>
A dataset containing 336 dissolved oxygen concentrations changed over time.</a></li>
<li><a href='#n2o'><p>Processed data from N2O LI-COR Trace Gas Analyzer.</p>
A dataset containing 567 N2O concentrations changed over time.</a></li>
<li><a href='#plot_hobo'><p>plot_hobo</p></a></li>
<li><a href='#process_hobo'><p>process_hobo</p></a></li>
<li><a href='#process_info'><p>process_info</p></a></li>
<li><a href='#process_weather'><p>convert_time</p></a></li>
<li><a href='#tidy_ghg_analyzer'><p>tidy_ghg_analyzer</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Data Processing for Aquatic Ecology</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Zhao-Jun Yong &lt;nuannuan0425@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Facilitate the analysis of data related to aquatic ecology, specifically the establishment of carbon budget. 
  Currently, the package allows the below analysis.
  (i) the calculation of greenhouse gas flux based on data obtained from trace gas analyzer using the method described in Lin et al. (2024).
  (ii) the calculation of Dissolved Oxygen (DO) metabolism based on data obtained from dissolved oxygen data logger using the method described in Staehr et al. (2010). 
  Yong et al. (2024) &lt;<a href="https://doi.org/10.5194%2Fbg-21-5247-2024">doi:10.5194/bg-21-5247-2024</a>&gt;.
  Staehr et al. (2010) &lt;<a href="https://doi.org/10.4319%2Flom.2010.8.0628">doi:10.4319/lom.2010.8.0628</a>&gt;.</td>
</tr>
<tr>
<td>Imports:</td>
<td>tibble, lubridate, stats, dplyr, openxlsx, readxl, ggplot2,
readr, tidyr, stringr</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-12-24 00:57:30 UTC; yangshaojun</td>
</tr>
<tr>
<td>Author:</td>
<td>Zhao-Jun Yong [cre, aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-09 04:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='calculate_do'>calculate_do</h2><span id='topic+calculate_do'></span>

<h3>Description</h3>

<p>Calculate the Net Ecosystem Production,
Gross Primary Production and Ecosystem respiration based on the change in dissolved oxygen concentration.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_do(df)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calculate_do_+3A_df">df</code></td>
<td>
<p>Merged dataframe produced by process_hobo(), process_weather() and process_info() functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(hobo)
calculate_do(hobo)
</code></pre>

<hr>
<h2 id='calculate_ghg_flux'>calculate_ghg_flux</h2><span id='topic+calculate_ghg_flux'></span>

<h3>Description</h3>

<p>Calculate the greenhouse gas (GHG) flux based on input parameters from a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_ghg_flux(
  data,
  slope = "slope",
  area = "area",
  volume = "volume",
  temp = "temp"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calculate_ghg_flux_+3A_data">data</code></td>
<td>
<p>A data frame containing relevant data with columns for slope, area, volume, and temperature.</p>
</td></tr>
<tr><td><code id="calculate_ghg_flux_+3A_slope">slope</code></td>
<td>
<p>Name of the column in 'data' that contains the slope values of the GHG concentration change (in ppm/s).</p>
</td></tr>
<tr><td><code id="calculate_ghg_flux_+3A_area">area</code></td>
<td>
<p>Name of the column in 'data' that contains the values of the area of the chamber (in square meter).</p>
</td></tr>
<tr><td><code id="calculate_ghg_flux_+3A_volume">volume</code></td>
<td>
<p>Name of the column in 'data' that contains values of the volume of the chamber (in litre).</p>
</td></tr>
<tr><td><code id="calculate_ghg_flux_+3A_temp">temp</code></td>
<td>
<p>Name of the column in 'data' that contains values of the temperature of the gas (in Celsius).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the calculated flux and its unit.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- data.frame(
  slope = c(1.2, 1.5, 1.1),
  area = c(100, 150, 120),
  volume = c(10, 15, 12),
  temp = c(25, 30, 22)
)
results &lt;- calculate_ghg_flux(data)
print(results)
</code></pre>

<hr>
<h2 id='calculate_regression'>calculate_regression</h2><span id='topic+calculate_regression'></span>

<h3>Description</h3>

<p>Calculate the slope of greenhouse gas (GHG) concentration change over time using simple linear regression.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_regression(
  data,
  ghg,
  reference_time,
  duration_minutes = 7,
  num_rows = 300
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calculate_regression_+3A_data">data</code></td>
<td>
<p>Data from the LI-COR Trace Gas Analyzer that has been processed and time-converted.</p>
</td></tr>
<tr><td><code id="calculate_regression_+3A_ghg">ghg</code></td>
<td>
<p>Column name of the file containing data on GHG concentration (e.g., &quot;CH4&quot;, &quot;N2O&quot;).</p>
</td></tr>
<tr><td><code id="calculate_regression_+3A_reference_time">reference_time</code></td>
<td>
<p>The date and time at which the measurement started.</p>
</td></tr>
<tr><td><code id="calculate_regression_+3A_duration_minutes">duration_minutes</code></td>
<td>
<p>The duration  of the measurement, default to 7.</p>
</td></tr>
<tr><td><code id="calculate_regression_+3A_num_rows">num_rows</code></td>
<td>
<p>The number of rows used to perform the regression, default to 300.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing the time range (POSIXct format) of the slope and R2 (both numeric) from the simple linear regression.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(n2o)
calculate_regression(n2o, "N2O", as.POSIXct("2023-05-04 09:16:15", tz = "UTC"))
</code></pre>

<hr>
<h2 id='combine_hobo'>combine_hobo</h2><span id='topic+combine_hobo'></span>

<h3>Description</h3>

<p>Tidy multiple data retrieved from HOBO U26 Dissolved Oxygen Data Logger.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>combine_hobo(file_path, file_prefix = "no.")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="combine_hobo_+3A_file_path">file_path</code></td>
<td>
<p>Directory of the folder containing the files.</p>
</td></tr>
<tr><td><code id="combine_hobo_+3A_file_prefix">file_prefix</code></td>
<td>
<p>The prefix before the code for the data logger, defaults to &quot;no.&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>hobo_data_path &lt;- system.file("extdata", package = "aelab")
df &lt;- combine_hobo(hobo_data_path, file_prefix = "ex_ho")
</code></pre>

<hr>
<h2 id='combine_weather'>combine_weather</h2><span id='topic+combine_weather'></span>

<h3>Description</h3>

<p>Tidy multiple daily weather data downloaded from weather station in Taiwan.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>combine_weather(file_path, start_date, end_date, zone)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="combine_weather_+3A_file_path">file_path</code></td>
<td>
<p>Directory of folder containing the files (including the character in the file name that precedes the date).</p>
</td></tr>
<tr><td><code id="combine_weather_+3A_start_date">start_date</code></td>
<td>
<p>Date of the daily weather data in yyyy-mm-dd format.</p>
</td></tr>
<tr><td><code id="combine_weather_+3A_end_date">end_date</code></td>
<td>
<p>Date of the daily weather data in yyyy-mm-dd format.</p>
</td></tr>
<tr><td><code id="combine_weather_+3A_zone">zone</code></td>
<td>
<p>Code for the region of the weather station.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>weather_data_path &lt;- system.file("extdata", package = "aelab")
modified_data_path &lt;- paste0(weather_data_path, "/ex_")
df &lt;- combine_weather(modified_data_path,
start_date = "2024-01-01",
end_date = "2024-01-02", "site_A")
</code></pre>

<hr>
<h2 id='convert_ghg_unit'>convert_ghg_unit</h2><span id='topic+convert_ghg_unit'></span>

<h3>Description</h3>

<p>Convert the greenhouse gas (GHG) flux to micromoles per square meter per hour.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_ghg_unit(ghg_value, ghg, mass = "µmol", area = "m2", time = "h")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="convert_ghg_unit_+3A_ghg_value">ghg_value</code></td>
<td>
<p>The value of the flux.</p>
</td></tr>
<tr><td><code id="convert_ghg_unit_+3A_ghg">ghg</code></td>
<td>
<p>The molecular formula of greenhouse gases (co2: carbon dioxide; ch4: methane; n2o: nitrous oxide).</p>
</td></tr>
<tr><td><code id="convert_ghg_unit_+3A_mass">mass</code></td>
<td>
<p>The mass component of the input GHG flux, default to micromoles.</p>
</td></tr>
<tr><td><code id="convert_ghg_unit_+3A_area">area</code></td>
<td>
<p>The area component of the input GHG flux, default to square meter.</p>
</td></tr>
<tr><td><code id="convert_ghg_unit_+3A_time">time</code></td>
<td>
<p>The time component of the input GHG flux, default to hour.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>convert_ghg_unit(1, ghg = "co2")
</code></pre>

<hr>
<h2 id='convert_time'>convert_time</h2><span id='topic+convert_time'></span>

<h3>Description</h3>

<p>Convert the time of the LI-COR Trace Gas Analyzer to match the time in real life.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_time(data, day = 0, hr = 0, min = 0, sec = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="convert_time_+3A_data">data</code></td>
<td>
<p>Data from the LI-COR Trace Gas Analyzer that had been processed by tidy_licor().</p>
</td></tr>
<tr><td><code id="convert_time_+3A_day">day</code></td>
<td>
<p>Day(s) to add or subtract.</p>
</td></tr>
<tr><td><code id="convert_time_+3A_hr">hr</code></td>
<td>
<p>Hour(s) to add or subtract.</p>
</td></tr>
<tr><td><code id="convert_time_+3A_min">min</code></td>
<td>
<p>Minute(s) to add or subtract.</p>
</td></tr>
<tr><td><code id="convert_time_+3A_sec">sec</code></td>
<td>
<p>Second(s) to add or subtract.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The input data with a new column in POSIXct format converted based on the input value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(n2o)
converted_n2o &lt;- convert_time(n2o, min = -10, sec = 5)
</code></pre>

<hr>
<h2 id='hobo'>Processed data from Onset HOBO Dissolved Oxygen Data Logger.
A dataset containing 336 dissolved oxygen concentrations changed over time.</h2><span id='topic+hobo'></span>

<h3>Description</h3>

<p>Processed data from Onset HOBO Dissolved Oxygen Data Logger.
A dataset containing 336 dissolved oxygen concentrations changed over time.
</p>


<h3>Format</h3>

<p>A data.frame with 336 rows and 13 variables:
</p>

<ul>
<li><p> date_time: Date and time in POSIXct format.
</p>
</li>
<li><p> pressure_hpa: Atmospheric pressure (hpa).
</p>
</li>
<li><p> wind_ms: Wind speed (m/s).
</p>
</li>
<li><p> do: Dissolved oxygen concentrations (mg/L)
</p>
</li>
<li><p> temp: Water temperature (Celsius)
</p>
</li>
<li><p> depth: Water depth (m).
</p>
</li>
<li><p> salinity: Salinity (ppt).
</p>
</li>
<li><p> start_date_time: Start date and time of the deployment.
</p>
</li>
<li><p> end_date_time: End date and time of the deployment.
</p>
</li>
<li><p> sunrise: Sunrise time during that day.
</p>
</li>
<li><p> sunset: Sunset time during that day.
</p>
</li>
<li><p> no_hobo: Name for the data logger .
</p>
</li>
<li><p> site: Name for the site.
</p>
</li></ul>



<h3>Source</h3>

<p>own data.
</p>

<hr>
<h2 id='n2o'>Processed data from N2O LI-COR Trace Gas Analyzer.
A dataset containing 567 N2O concentrations changed over time.</h2><span id='topic+n2o'></span>

<h3>Description</h3>

<p>Processed data from N2O LI-COR Trace Gas Analyzer.
A dataset containing 567 N2O concentrations changed over time.
</p>


<h3>Format</h3>

<p>A data.frame with 567 rows and 4 variables:
</p>

<ul>
<li><p> DATE: Date in character format.
</p>
</li>
<li><p> TIME: Time in character format.
</p>
</li>
<li><p> N2O: Concentrations of nitrous oxide (N2O), in ppb.
</p>
</li>
<li><p> date_time: Date and time in POSIXct format.
</p>
</li></ul>



<h3>Source</h3>

<p>own data.
</p>

<hr>
<h2 id='plot_hobo'>plot_hobo</h2><span id='topic+plot_hobo'></span>

<h3>Description</h3>

<p>Plot the dissolved oxygen concentration over time series grouped by different data loggers to observe the variations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_hobo(df)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_hobo_+3A_df">df</code></td>
<td>
<p>Dataframe produced by process_hobo() function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot generated by ggplot2.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(hobo)
plot_hobo(hobo)
</code></pre>

<hr>
<h2 id='process_hobo'>process_hobo</h2><span id='topic+process_hobo'></span>

<h3>Description</h3>

<p>Tidy the data retrieved from HOBO U26 Dissolved Oxygen Data Logger.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>process_hobo(file_path, no_hobo)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="process_hobo_+3A_file_path">file_path</code></td>
<td>
<p>Directory of file.</p>
</td></tr>
<tr><td><code id="process_hobo_+3A_no_hobo">no_hobo</code></td>
<td>
<p>The code for the data logger.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>hobo_data_path &lt;- system.file("extdata", "ex_hobo.csv", package = "aelab")
df &lt;- process_hobo(hobo_data_path, "code_for_logger")
</code></pre>

<hr>
<h2 id='process_info'>process_info</h2><span id='topic+process_info'></span>

<h3>Description</h3>

<p>Import and process the necessary information,
including the sunrise and sunset times of the day,
the date and time range of the deployment,
and the code for the data logger.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>process_info(file_path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="process_info_+3A_file_path">file_path</code></td>
<td>
<p>Directory of file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>info_data_path &lt;- system.file("extdata", "info.xlsx", package = "aelab")
df &lt;- process_info(info_data_path)
</code></pre>

<hr>
<h2 id='process_weather'>convert_time</h2><span id='topic+process_weather'></span>

<h3>Description</h3>

<p>Tidy the daily weather data downloaded from weather station in Taiwan.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>process_weather(file_path, date, zone)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="process_weather_+3A_file_path">file_path</code></td>
<td>
<p>Directory of file.</p>
</td></tr>
<tr><td><code id="process_weather_+3A_date">date</code></td>
<td>
<p>Date of the daily weather data in yyyy-mm-dd format.</p>
</td></tr>
<tr><td><code id="process_weather_+3A_zone">zone</code></td>
<td>
<p>Code for the region of the weather station.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>weather_data_path &lt;- system.file("extdata", "ex_weather.csv", package = "aelab")
df &lt;- process_weather(weather_data_path, "2024-01-01", "site_A")
</code></pre>

<hr>
<h2 id='tidy_ghg_analyzer'>tidy_ghg_analyzer</h2><span id='topic+tidy_ghg_analyzer'></span>

<h3>Description</h3>

<p>Tidy the data downloaded from GHG Analyzer.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidy_ghg_analyzer(file_path, gas, analyzer = "licor")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidy_ghg_analyzer_+3A_file_path">file_path</code></td>
<td>
<p>Directory of file.</p>
</td></tr>
<tr><td><code id="tidy_ghg_analyzer_+3A_gas">gas</code></td>
<td>
<p>Choose between CO2/CH4 or N2O LI-COR Trace Gas Analyzer, which is &quot;ch4&quot; and &quot;n2o&quot;, respectively.</p>
</td></tr>
<tr><td><code id="tidy_ghg_analyzer_+3A_analyzer">analyzer</code></td>
<td>
<p>The brand of the analyzer which the data was downloaded from.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return the loaded XLSX file after tidying for further analysis.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ghg_data_path &lt;- system.file("extdata", "ch4.xlsx", package = "aelab")
tidy_ghg_analyzer(ghg_data_path, "ch4")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
