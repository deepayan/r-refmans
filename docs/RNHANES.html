<!DOCTYPE html><html lang="en"><head><title>Help for package RNHANES</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {RNHANES}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#RNHANES-package'><p>RNHANES simplifies downloading and analyzing NHANES data.</p></a></li>
<li><a href='#demography_filename'><p>Translates cycle years into the correct demography filename suffix,</p>
e.g. '2001-2002' returns 'B'</a></li>
<li><a href='#download_nhanes_file'><p>Download an NHANES data file from a given cycle</p></a></li>
<li><a href='#file_suffix'><p>Returns the NHANES file suffix for the given year</p></a></li>
<li><a href='#load_nhanes_description'><p>Download an NHANES description file</p></a></li>
<li><a href='#nhanes_analyze'><p>Compute quantiles from NHANES weighted survey data</p></a></li>
<li><a href='#nhanes_cycle_years'><p>List the valid NHANES cycle years</p></a></li>
<li><a href='#nhanes_data_files'><p>List the NHANES data files</p></a></li>
<li><a href='#nhanes_detection_frequency'><p>Compute detection frequencies of NHANES data</p></a></li>
<li><a href='#nhanes_hist'><p>Plot a weighted histogram of an NHANES variable</p></a></li>
<li><a href='#nhanes_load_data'><p>Download NHANES data files.</p></a></li>
<li><a href='#nhanes_load_demography_data'><p>Download NHANES demography files for a specific cycle.</p></a></li>
<li><a href='#nhanes_quantile'><p>Compute quantiles from NHANES weighted survey data</p></a></li>
<li><a href='#nhanes_sample_size'><p>Compute the sample size of NHANES data</p></a></li>
<li><a href='#nhanes_search'><p>Search the results from nhanes_variables or nhanes_data_files</p></a></li>
<li><a href='#nhanes_survey'><p>Apply a function from the survey package to NHANES data</p></a></li>
<li><a href='#nhanes_survey_design'><p>Build survey objects for NHANES data</p></a></li>
<li><a href='#nhanes_variables'><p>Load the NHANES comprehensive variable list</p></a></li>
<li><a href='#nhanes_vcov'><p>Extract variance/covariance matrix from parameters of svymean</p></a></li>
<li><a href='#process_file_name'><p>Processes a file name to make sure it is valid and has the correct suffix and extension</p>
File names with an extension (e.g. &quot;.XPT&quot;) are not altered</a></li>
<li><a href='#validate_year'><p>Check that the year is in the correct format</p>
e.g. '2001-2002' is correct and returns TRUE,
'2001' is not correct and returns FALSE</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Facilitates Analysis of CDC NHANES Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2016-11-28</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://github.com/silentspringinstitute/RNHANES">http://github.com/silentspringinstitute/RNHANES</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/silentspringinstitute/RNHANES/issues">https://github.com/silentspringinstitute/RNHANES/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Tools for downloading and analyzing CDC NHANES data, with a focus
    on analytical laboratory data.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a> | file LICENSE</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>foreign, survey, rvest, xml2, methods, dplyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>5.0.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2016-11-28 16:16:35 UTC; susmann</td>
</tr>
<tr>
<td>Author:</td>
<td>Herb Susmann [cre, aut],
  Silent Spring Institute [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Herb Susmann &lt;susmann@silentspring.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2016-11-29 02:45:46</td>
</tr>
</table>
<hr>
<h2 id='RNHANES-package'>RNHANES simplifies downloading and analyzing NHANES data.</h2><span id='topic+RNHANES'></span><span id='topic+RNHANES-package'></span><span id='topic+rnhanes'></span><span id='topic+rnhanes-package'></span>

<h3>Description</h3>

<p>RNHANES simplifies downloading and analyzing NHANES data.
</p>

<hr>
<h2 id='demography_filename'>Translates cycle years into the correct demography filename suffix,
e.g. '2001-2002' returns 'B'</h2><span id='topic+demography_filename'></span>

<h3>Description</h3>

<p>Translates cycle years into the correct demography filename suffix,
e.g. '2001-2002' returns 'B'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>demography_filename(year)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="demography_filename_+3A_year">year</code></td>
<td>
<p>NHANES cycle, e.g. &quot;2001-2002&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>suffix character e.g. &quot;B&quot;
</p>

<hr>
<h2 id='download_nhanes_file'>Download an NHANES data file from a given cycle</h2><span id='topic+download_nhanes_file'></span>

<h3>Description</h3>

<p>Download an NHANES data file from a given cycle
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_nhanes_file(file_name, year, destination = tempdir(), cache = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_nhanes_file_+3A_file_name">file_name</code></td>
<td>
<p>file name</p>
</td></tr>
<tr><td><code id="download_nhanes_file_+3A_year">year</code></td>
<td>
<p>NHANES cycle</p>
</td></tr>
<tr><td><code id="download_nhanes_file_+3A_destination">destination</code></td>
<td>
<p>directory to download the file into</p>
</td></tr>
<tr><td><code id="download_nhanes_file_+3A_cache">cache</code></td>
<td>
<p>whether to cache the file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>path to the downloaded file
</p>

<hr>
<h2 id='file_suffix'>Returns the NHANES file suffix for the given year</h2><span id='topic+file_suffix'></span>

<h3>Description</h3>

<p>Returns the NHANES file suffix for the given year
</p>


<h3>Usage</h3>

<pre><code class='language-R'>file_suffix(year)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="file_suffix_+3A_year">year</code></td>
<td>
<p>NHANES cycle year (e.g. &quot;2001-2002&quot;)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>suffix character (e.g. &quot;B&quot; or &quot;C&quot;)
</p>

<hr>
<h2 id='load_nhanes_description'>Download an NHANES description file</h2><span id='topic+load_nhanes_description'></span>

<h3>Description</h3>

<p>Download an NHANES description file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_nhanes_description(file_name, year, destination = tempdir(),
  cache = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="load_nhanes_description_+3A_file_name">file_name</code></td>
<td>
<p>file name</p>
</td></tr>
<tr><td><code id="load_nhanes_description_+3A_year">year</code></td>
<td>
<p>NHANES cycle</p>
</td></tr>
<tr><td><code id="load_nhanes_description_+3A_destination">destination</code></td>
<td>
<p>directory to download the file into</p>
</td></tr>
<tr><td><code id="load_nhanes_description_+3A_cache">cache</code></td>
<td>
<p>whether to cache the file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame containing the file description
</p>

<hr>
<h2 id='nhanes_analyze'>Compute quantiles from NHANES weighted survey data</h2><span id='topic+nhanes_analyze'></span>

<h3>Description</h3>

<p>Compute quantiles from NHANES weighted survey data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nhanes_analyze(analysis_fun, nhanes_data, column, comment_column = "",
  weights_column = "", filter = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nhanes_analyze_+3A_analysis_fun">analysis_fun</code></td>
<td>
<p>function to use to analyze each variable</p>
</td></tr>
<tr><td><code id="nhanes_analyze_+3A_nhanes_data">nhanes_data</code></td>
<td>
<p>data frame containing NHANES data</p>
</td></tr>
<tr><td><code id="nhanes_analyze_+3A_column">column</code></td>
<td>
<p>column name of the variable to compute quantiles for</p>
</td></tr>
<tr><td><code id="nhanes_analyze_+3A_comment_column">comment_column</code></td>
<td>
<p>comment column name of the variable</p>
</td></tr>
<tr><td><code id="nhanes_analyze_+3A_weights_column">weights_column</code></td>
<td>
<p>name of the weights column</p>
</td></tr>
<tr><td><code id="nhanes_analyze_+3A_filter">filter</code></td>
<td>
<p>logical expression used to subset the data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame
</p>

<hr>
<h2 id='nhanes_cycle_years'>List the valid NHANES cycle years</h2><span id='topic+nhanes_cycle_years'></span>

<h3>Description</h3>

<p>List the valid NHANES cycle years
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nhanes_cycle_years()
</code></pre>


<h3>Value</h3>

<p>vector of NHANES cycle years
</p>

<hr>
<h2 id='nhanes_data_files'>List the NHANES data files</h2><span id='topic+nhanes_data_files'></span>

<h3>Description</h3>

<p>List the NHANES data files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nhanes_data_files(components = "all", destination = tempfile(),
  cache = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nhanes_data_files_+3A_components">components</code></td>
<td>
<p>one of &quot;all&quot;, &quot;demographics&quot;, &quot;dietary&quot;, &quot;examination&quot;, &quot;laboratory&quot;, &quot;questionnaire&quot;</p>
</td></tr>
<tr><td><code id="nhanes_data_files_+3A_destination">destination</code></td>
<td>
<p>destinatino to save the file lists</p>
</td></tr>
<tr><td><code id="nhanes_data_files_+3A_cache">cache</code></td>
<td>
<p>whether to cache the downloaded file lists so they don't have to be re-downloaded every time</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame of NHANES data files available to download
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Download a data frame of all the NHANES data files
files &lt;- nhanes_data_files()

# Download a data frame of just the laboratory files
lab_files &lt;- nhanes_data_files(component = "laboratory")


## End(Not run)

</code></pre>

<hr>
<h2 id='nhanes_detection_frequency'>Compute detection frequencies of NHANES data</h2><span id='topic+nhanes_detection_frequency'></span>

<h3>Description</h3>

<p>Compute detection frequencies of NHANES data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nhanes_detection_frequency(nhanes_data, column, comment_column,
  weights_column = "", filter = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nhanes_detection_frequency_+3A_nhanes_data">nhanes_data</code></td>
<td>
<p>data frame containing NHANES data</p>
</td></tr>
<tr><td><code id="nhanes_detection_frequency_+3A_column">column</code></td>
<td>
<p>column names of the variables to compute detection frequencies for</p>
</td></tr>
<tr><td><code id="nhanes_detection_frequency_+3A_comment_column">comment_column</code></td>
<td>
<p>comment column names of the variables to compute detection frequencies for</p>
</td></tr>
<tr><td><code id="nhanes_detection_frequency_+3A_weights_column">weights_column</code></td>
<td>
<p>sample weight column</p>
</td></tr>
<tr><td><code id="nhanes_detection_frequency_+3A_filter">filter</code></td>
<td>
<p>logical expression used to subset the data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>named vector of detection frequencies
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
dat &lt;- nhanes_load_data("UHG_G", "2011-2012", demographics = TRUE)

# Compute detection frequency
nhanes_detection_frequency(dat, c("URXUHG"), c("URDUHGLC"))

## End(Not run)

</code></pre>

<hr>
<h2 id='nhanes_hist'>Plot a weighted histogram of an NHANES variable</h2><span id='topic+nhanes_hist'></span>

<h3>Description</h3>

<p>Plot a weighted histogram of an NHANES variable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nhanes_hist(nhanes_data, column, comment_column, weights_column = "",
  filter = "", transform = "", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nhanes_hist_+3A_nhanes_data">nhanes_data</code></td>
<td>
<p>data frame containing NHANES data</p>
</td></tr>
<tr><td><code id="nhanes_hist_+3A_column">column</code></td>
<td>
<p>column name of the variable to plot</p>
</td></tr>
<tr><td><code id="nhanes_hist_+3A_comment_column">comment_column</code></td>
<td>
<p>comment column of the variable to plot</p>
</td></tr>
<tr><td><code id="nhanes_hist_+3A_weights_column">weights_column</code></td>
<td>
<p>name of the weights column</p>
</td></tr>
<tr><td><code id="nhanes_hist_+3A_filter">filter</code></td>
<td>
<p>logical expression used to subset the data</p>
</td></tr>
<tr><td><code id="nhanes_hist_+3A_transform">transform</code></td>
<td>
<p>transformation to apply to the column. Accepts any function name, for example: &quot;log&quot;</p>
</td></tr>
<tr><td><code id="nhanes_hist_+3A_...">...</code></td>
<td>
<p>parameters passed through to svyhist function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
dat &lt;- nhanes_load_data("PFC_G", "2011-2012", demographics = TRUE)

nhanes_hist(dat, "LBXPFOA")

## End(Not run)

</code></pre>

<hr>
<h2 id='nhanes_load_data'>Download NHANES data files.</h2><span id='topic+nhanes_load_data'></span>

<h3>Description</h3>

<p>Download NHANES data files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nhanes_load_data(file_name, year, destination = tempdir(),
  demographics = FALSE, cache = TRUE, recode = FALSE,
  recode_data = FALSE, recode_demographics = FALSE,
  allow_duplicate_files = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nhanes_load_data_+3A_file_name">file_name</code></td>
<td>
<p>NHANES file name (e.g. &quot;EPH&quot;) or a vector of filenames (e.g c(&quot;EPH&quot;, &quot;GHB&quot;))</p>
</td></tr>
<tr><td><code id="nhanes_load_data_+3A_year">year</code></td>
<td>
<p>NHANES cycle year (e.g. &quot;2007-2008&quot;) or a vector of cycle years</p>
</td></tr>
<tr><td><code id="nhanes_load_data_+3A_destination">destination</code></td>
<td>
<p>directory to download the files to</p>
</td></tr>
<tr><td><code id="nhanes_load_data_+3A_demographics">demographics</code></td>
<td>
<p>include  demographics data into the dataset</p>
</td></tr>
<tr><td><code id="nhanes_load_data_+3A_cache">cache</code></td>
<td>
<p>whether to cache the file to disk</p>
</td></tr>
<tr><td><code id="nhanes_load_data_+3A_recode">recode</code></td>
<td>
<p>whether to recode the data and demographics (overrides other parameters)</p>
</td></tr>
<tr><td><code id="nhanes_load_data_+3A_recode_data">recode_data</code></td>
<td>
<p>whether to recode just the data</p>
</td></tr>
<tr><td><code id="nhanes_load_data_+3A_recode_demographics">recode_demographics</code></td>
<td>
<p>whether to recode just the demographics</p>
</td></tr>
<tr><td><code id="nhanes_load_data_+3A_allow_duplicate_files">allow_duplicate_files</code></td>
<td>
<p>how to handle a request that has duplicate file names/cycle years. By default duplicates will be removed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If you supply vectors for both file_name and year, then the vectors are paired and each file_name/year pair is downloaded.
For example, file_name = c(&quot;EPH, GHB&quot;), year = c(&quot;2009-2010&quot;, &quot;2011-2012&quot;) will download &quot;EPH_F.XPT&quot; and &quot;EPH_G.XPT&quot;.
In other words, the function does not download every possible combination of file_name and year.
</p>
<p>You can specify file names in several formats. In order of specificity:
You can supply the complete filename: &quot;EPH_F.XPT&quot;
You can supply the filename without an extension: &quot;EPH_F&quot;
You can supply the filename without a suffix: &quot;EPH&quot;, year = &quot;2009-2010&quot;
</p>
<p>If you are loading the same file across multiple years, you must supply the filename without a suffix so
that the correct suffix for each year can be used.
</p>
<p>This function returns either a list or a data frame. If you load multiple files, the return value will always be a list. This is because
the columns may not match in between files.
If you load one file, the result will be a data frame.
</p>


<h3>Value</h3>

<p>if file_name or year is a vector, returns a list containing a data frame for each file_name. If file_name and year are both singletons, then a data frame is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

nhanes_load_data("UHG", "2011-2012")

# Load data with demographics
nhanes_load_data("UHG", "2011-2012", demographics = TRUE)

# Download to /tmp directory and overwrite the file if it already exists
nhanes_load_data("HDL_E", "2007-2008", destination = "/tmp", cache = FALSE)

## End(Not run)

</code></pre>

<hr>
<h2 id='nhanes_load_demography_data'>Download NHANES demography files for a specific cycle.</h2><span id='topic+nhanes_load_demography_data'></span>

<h3>Description</h3>

<p>Download NHANES demography files for a specific cycle.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nhanes_load_demography_data(year, destination = tempdir(), cache = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nhanes_load_demography_data_+3A_year">year</code></td>
<td>
<p>NHANES cycle year (e.g. &quot;2011-2012&quot;)</p>
</td></tr>
<tr><td><code id="nhanes_load_demography_data_+3A_destination">destination</code></td>
<td>
<p>directory to download the file to</p>
</td></tr>
<tr><td><code id="nhanes_load_demography_data_+3A_cache">cache</code></td>
<td>
<p>whether load the file if it already exists on disk</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
nhanes_load_demography_data("2011-2012")

## End(Not run)

</code></pre>

<hr>
<h2 id='nhanes_quantile'>Compute quantiles from NHANES weighted survey data</h2><span id='topic+nhanes_quantile'></span>

<h3>Description</h3>

<p>Compute quantiles from NHANES weighted survey data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nhanes_quantile(nhanes_data, column, comment_column = "",
  weights_column = "", quantiles = seq(0, 1, 0.25), filter = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nhanes_quantile_+3A_nhanes_data">nhanes_data</code></td>
<td>
<p>data frame containing NHANES data</p>
</td></tr>
<tr><td><code id="nhanes_quantile_+3A_column">column</code></td>
<td>
<p>column name of the variable to compute quantiles for</p>
</td></tr>
<tr><td><code id="nhanes_quantile_+3A_comment_column">comment_column</code></td>
<td>
<p>comment column name of the variable for checking if computed quantiles are below the LOD</p>
</td></tr>
<tr><td><code id="nhanes_quantile_+3A_weights_column">weights_column</code></td>
<td>
<p>name of the weights column</p>
</td></tr>
<tr><td><code id="nhanes_quantile_+3A_quantiles">quantiles</code></td>
<td>
<p>numeric or vector numeric of quantiles to compute</p>
</td></tr>
<tr><td><code id="nhanes_quantile_+3A_filter">filter</code></td>
<td>
<p>logical expression used to subset the data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
dat &lt;- nhanes_load_data("UHG_G", "2011-2012", demographics = TRUE)

# Compute 50th, 95th, and 99th quantiles
nhanes_quantile(dat, "URXUHG", "URDUHGLC", "WTSA2YR", c(0.5, 0.95, 0.99))

## End(Not run)

</code></pre>

<hr>
<h2 id='nhanes_sample_size'>Compute the sample size of NHANES data</h2><span id='topic+nhanes_sample_size'></span>

<h3>Description</h3>

<p>Compute the sample size of NHANES data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nhanes_sample_size(nhanes_data, column, comment_column = "",
  weights_column = "", filter = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nhanes_sample_size_+3A_nhanes_data">nhanes_data</code></td>
<td>
<p>data frame containing NHANES data</p>
</td></tr>
<tr><td><code id="nhanes_sample_size_+3A_column">column</code></td>
<td>
<p>column name of the variable to compute quantiles for</p>
</td></tr>
<tr><td><code id="nhanes_sample_size_+3A_comment_column">comment_column</code></td>
<td>
<p>comment column name of the variable for checking if computed quantiles are below the LOD</p>
</td></tr>
<tr><td><code id="nhanes_sample_size_+3A_weights_column">weights_column</code></td>
<td>
<p>name of the weights column</p>
</td></tr>
<tr><td><code id="nhanes_sample_size_+3A_filter">filter</code></td>
<td>
<p>logical expression used to subset the data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
dat &lt;- nhanes_load_data("UHG_G", "2011-2012", demographics = TRUE)

nhanes_sample_size(dat, "URXUHG", "URDUHGLC")

## End(Not run)

</code></pre>

<hr>
<h2 id='nhanes_search'>Search the results from nhanes_variables or nhanes_data_files</h2><span id='topic+nhanes_search'></span>

<h3>Description</h3>

<p>Search the results from nhanes_variables or nhanes_data_files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nhanes_search(nhanes_data, query, ..., fuzzy = FALSE, ignore_case = TRUE,
  max_distance = 0.2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nhanes_search_+3A_nhanes_data">nhanes_data</code></td>
<td>
<p>nhanes variable list, from nhanes_variables function, or data file list, from nhanes_data_files</p>
</td></tr>
<tr><td><code id="nhanes_search_+3A_query">query</code></td>
<td>
<p>regular expression search query</p>
</td></tr>
<tr><td><code id="nhanes_search_+3A_...">...</code></td>
<td>
<p>additional arguments to pass to dplyr::filter</p>
</td></tr>
<tr><td><code id="nhanes_search_+3A_fuzzy">fuzzy</code></td>
<td>
<p>whether to use fuzzy string matching for search (based on edit distances)</p>
</td></tr>
<tr><td><code id="nhanes_search_+3A_ignore_case">ignore_case</code></td>
<td>
<p>whether search query is case-sensitive</p>
</td></tr>
<tr><td><code id="nhanes_search_+3A_max_distance">max_distance</code></td>
<td>
<p>parameter for tuning fuzzy string matching, 0-1</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame filtered by search query
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
nhanes_files &lt;- nhanes_data_files()

# Search for data files about pesticides
nhanes_search(nhanes_files, "pesticides")

## End(Not run)

</code></pre>

<hr>
<h2 id='nhanes_survey'>Apply a function from the survey package to NHANES data</h2><span id='topic+nhanes_survey'></span>

<h3>Description</h3>

<p>Apply a function from the survey package to NHANES data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nhanes_survey(survey_fun, nhanes_data, column, comment_column = "",
  weights_column = "", filter = NULL, analyze = "values",
  callback = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nhanes_survey_+3A_survey_fun">survey_fun</code></td>
<td>
<p>the survey package function (e.g. svyquantile or svymean)</p>
</td></tr>
<tr><td><code id="nhanes_survey_+3A_nhanes_data">nhanes_data</code></td>
<td>
<p>data frame containing NHANES data</p>
</td></tr>
<tr><td><code id="nhanes_survey_+3A_column">column</code></td>
<td>
<p>column name of the variable to compute quantiles for</p>
</td></tr>
<tr><td><code id="nhanes_survey_+3A_comment_column">comment_column</code></td>
<td>
<p>comment column name of the variable</p>
</td></tr>
<tr><td><code id="nhanes_survey_+3A_weights_column">weights_column</code></td>
<td>
<p>name of the weights column</p>
</td></tr>
<tr><td><code id="nhanes_survey_+3A_filter">filter</code></td>
<td>
<p>logical expression used to subset the data</p>
</td></tr>
<tr><td><code id="nhanes_survey_+3A_analyze">analyze</code></td>
<td>
<p>one of &quot;values&quot; or &quot;comments&quot;, whether to apply the survey function to the value or comment column.</p>
</td></tr>
<tr><td><code id="nhanes_survey_+3A_callback">callback</code></td>
<td>
<p>optional function to execute on each row of the dataframe</p>
</td></tr>
<tr><td><code id="nhanes_survey_+3A_...">...</code></td>
<td>
<p>other arguments to pass to the survey function</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function provides a generic way to apply any function from the survey package to NHANES data.
RNHANES provides specific wrappers for computing quantiles (nhanes_quantile) and detection frequencies (nhanes_detection_frequency),
and this function provides a general way to use any survey function.
</p>


<h3>Value</h3>

<p>a data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(survey)

nhanes_data &lt;- nhanes_load_data("EPH", "2011-2012", demographics = TRUE)

# Compute the mean of triclosan using the svymean function
nhanes_survey(svymean, nhanes_data, "URXTRS", "URDTRSLC", na.rm = TRUE)

# Compute the variance using svyvar
nhanes_survey(svyvar, nhanes_data, "URXTRS", "URDTRSLC", na.rm = TRUE)


## End(Not run)

</code></pre>

<hr>
<h2 id='nhanes_survey_design'>Build survey objects for NHANES data</h2><span id='topic+nhanes_survey_design'></span>

<h3>Description</h3>

<p>Build survey objects for NHANES data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nhanes_survey_design(nhanes_data, weights_column = "")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nhanes_survey_design_+3A_nhanes_data">nhanes_data</code></td>
<td>
<p>data frame containing NHANES data</p>
</td></tr>
<tr><td><code id="nhanes_survey_design_+3A_weights_column">weights_column</code></td>
<td>
<p>name of the weights column</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a survey design object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
dat &lt;- nhanes_load_data("UHG_G", "2011-2012", demographics = TRUE)

design &lt;- nhanes_survey_design(dat, "WTSA2YR")

svymean(~RIDAGEYR, design)

svyglm(URXUHG ~ RIDAGEYR + RIAGENDR, design)

## End(Not run)

</code></pre>

<hr>
<h2 id='nhanes_variables'>Load the NHANES comprehensive variable list</h2><span id='topic+nhanes_variables'></span>

<h3>Description</h3>

<p>Load the NHANES comprehensive variable list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nhanes_variables(components = "all", destination = tempfile(),
  cache = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nhanes_variables_+3A_components">components</code></td>
<td>
<p>one of &quot;all&quot;, &quot;demographics&quot;, &quot;dietary&quot;, &quot;examination&quot;, &quot;laboratory&quot;, &quot;questionnaire&quot;</p>
</td></tr>
<tr><td><code id="nhanes_variables_+3A_destination">destination</code></td>
<td>
<p>where to save the variable list</p>
</td></tr>
<tr><td><code id="nhanes_variables_+3A_cache">cache</code></td>
<td>
<p>whether to cache the downloaded variable list so it doesn't have to be re-downloaded every time
</p>
<p>Helper function for nhanes_variables function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>dat
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Download the comprehensive NHANES variable list
variables &lt;- nhanes_variables()

# Download the variable list and cache it in a specific file
variables &lt;- nhanes_variables(destination = "./nhanes_data")


## End(Not run)

</code></pre>

<hr>
<h2 id='nhanes_vcov'>Extract variance/covariance matrix from parameters of svymean</h2><span id='topic+nhanes_vcov'></span>

<h3>Description</h3>

<p>Extract variance/covariance matrix from parameters of svymean
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nhanes_vcov(nhanes_data, columns, weights_column = "", filter = "")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nhanes_vcov_+3A_nhanes_data">nhanes_data</code></td>
<td>
<p>data frame containing NHANES data</p>
</td></tr>
<tr><td><code id="nhanes_vcov_+3A_columns">columns</code></td>
<td>
<p>columns to include in svymean for</p>
</td></tr>
<tr><td><code id="nhanes_vcov_+3A_weights_column">weights_column</code></td>
<td>
<p>name of the weights column</p>
</td></tr>
<tr><td><code id="nhanes_vcov_+3A_filter">filter</code></td>
<td>
<p>logical expression used to subset the data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
dat &lt;- nhanes_load_data("PFC_G", "2011-2012", demographics = TRUE)

nhanes_vcov(dat, c("LBXPFOA", "LBXPFOS"))

## End(Not run)

</code></pre>

<hr>
<h2 id='process_file_name'>Processes a file name to make sure it is valid and has the correct suffix and extension
File names with an extension (e.g. &quot;.XPT&quot;) are not altered</h2><span id='topic+process_file_name'></span>

<h3>Description</h3>

<p>Processes a file name to make sure it is valid and has the correct suffix and extension
File names with an extension (e.g. &quot;.XPT&quot;) are not altered
</p>


<h3>Usage</h3>

<pre><code class='language-R'>process_file_name(file_name, year, extension = ".XPT")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="process_file_name_+3A_file_name">file_name</code></td>
<td>
<p>name of the file</p>
</td></tr>
<tr><td><code id="process_file_name_+3A_year">year</code></td>
<td>
<p>NHANES cycle year</p>
</td></tr>
<tr><td><code id="process_file_name_+3A_extension">extension</code></td>
<td>
<p>file extension</p>
</td></tr>
</table>

<hr>
<h2 id='validate_year'>Check that the year is in the correct format
e.g. '2001-2002' is correct and returns TRUE,
'2001' is not correct and returns FALSE</h2><span id='topic+validate_year'></span>

<h3>Description</h3>

<p>Check that the year is in the correct format
e.g. '2001-2002' is correct and returns TRUE,
'2001' is not correct and returns FALSE
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_year(year, throw_error = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="validate_year_+3A_year">year</code></td>
<td>
<p>the year or years to validate</p>
</td></tr>
<tr><td><code id="validate_year_+3A_throw_error">throw_error</code></td>
<td>
<p>whether to throw an error if the year is invalid</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
