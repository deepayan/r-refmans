<!DOCTYPE html><html><head><title>Help for package setartree</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {setartree}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#setartree-package'><p>Getting started with the setartree package</p></a></li>
<li><a href='#chaotic_logistic_series'><p>Chaotic logistic map example time series</p></a></li>
<li><a href='#forecast.setarforest'><p>Forecast method for SETAR-Forest fits</p></a></li>
<li><a href='#forecast.setartree'><p>Forecast method for SETAR-Tree fits</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#setarforest'><p>Fitting SETAR-Forest models</p></a></li>
<li><a href='#setartree'><p>Fitting SETAR-Tree models</p></a></li>
<li><a href='#web_traffic_test'><p>A dataframe of test instances</p></a></li>
<li><a href='#web_traffic_train'><p>A dataframe of training instances</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>SETAR-Tree - A Novel and Accurate Tree Algorithm for Global Time
Series Forecasting</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.1</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Rakshitha Godahewa &lt;rakshithagw@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>The implementation of a forecasting-specific tree-based model that is in particular suitable for global time series forecasting, as proposed in Godahewa et al. (2022) &lt;<a href="https://doi.org/10.48550/arXiv.2211.08661">doi:10.48550/arXiv.2211.08661</a>&gt;. The model uses the concept of Self Exciting Threshold Autoregressive (SETAR) models to define the node splits and thus, the model is named SETAR-Tree. The SETAR-Tree uses some time-series-specific splitting and stopping procedures. It trains global pooled regression models in the leaves allowing the models to learn cross-series information. The depth of the tree is controlled by conducting a statistical linearity test as well as measuring the error reduction percentage at each node split. Thus, the SETAR-Tree requires minimal external hyperparameter tuning and provides competitive results under its default configuration. A forest is developed by extending the SETAR-Tree. The SETAR-Forest combines the forecasts provided by a collection of diverse SETAR-Trees during the forecasting process. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/rakshitha123/setartree">https://github.com/rakshitha123/setartree</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rakshitha123/setartree/issues">https://github.com/rakshitha123/setartree/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, utils, methods, parallel, generics (&ge; 0.1.2)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>forecast</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-24 07:21:20 UTC; raks0002</td>
</tr>
<tr>
<td>Author:</td>
<td>Rakshitha Godahewa [cre, aut, cph],
  Christoph Bergmeir [aut],
  Daniel Schmidt [aut],
  Geoffrey Webb [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-24 11:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='setartree-package'>Getting started with the setartree package</h2><span id='topic+setartree-package'></span>

<h3>Description</h3>

<p>The setartree is a library containing the implementations of SETAR-Tree and SETAR-Forest
which are forecasting-specific tree-based models that are in particular suitable for global time series forecasting.
</p>


<h3>Details</h3>

<p>If you have problems using setartree, find a bug, or have suggestions, please
file an issue on github (bugs/suggestions). If that fails, then you can contact the maintainer
directly by email.
</p>
<p>If you use the package, please cite the following work in your publications:
</p>
<p>Godahewa, R., Webb, G. I., Schmidt, D., &amp; Bergmeir, C. (2023). SETAR-Tree: A novel and accurate tree algorithm for
global time series forecasting. Machine Learning, 112, 2555-2591. doi: <a href="https://doi.org/10.1007/s10994-023-06316-x">10.1007/s10994-023-06316-x</a>
</p>
<p>Demos for using SETAR-Tree and SETAR-Forest are available.
To get a list of them, type:
</p>
<p><code>library(setartree)</code>
</p>
<p><code>demo()</code>
</p>
<p>To execute the SETAR-Tree demo, type:
</p>
<p><code>demo(tree_demo)</code>
</p>
<p>To execute the SETAR-Forest demo, type:
</p>
<p><code>demo(forest_demo)</code>
</p>
<p>To fit a SETAR-Tree model either using a list of time series or an embedded input matrix and labels,
use the function <code><a href="#topic+setartree">setartree</a></code>.
To fit a SETAR-Forest model either using a list of time series or an embedded input matrix and labels,
use the function <code><a href="#topic+setarforest">setarforest</a></code>.
To obtain forecasts from a SETAR-Tree or a SETAR-Forest, use the functions <code><a href="#topic+forecast.setartree">forecast.setartree</a></code> and <code><a href="#topic+forecast.setarforest">forecast.setarforest</a></code>, respectively.
</p>
<p>The setartree package also contains three datasets that can be used to train/test the SETAR-Tree and SETAR-Forest models:
<code><a href="#topic+chaotic_logistic_series">chaotic_logistic_series</a></code>, <code><a href="#topic+web_traffic_train">web_traffic_train</a></code> and <code><a href="#topic+web_traffic_test">web_traffic_test</a></code>.
</p>
<p>See the setartree user manual for detailed explanations about the datasets and the parameters taken by each function.
</p>
<p>Another nice tool is the <code>forecast</code> package, that can be used to
plot the time series together with the forecasts generated by SETAR-Tree or SETAR-Forest.
</p>


<h3>Author(s)</h3>

<p>Rakshitha Godahewa <a href="mailto:rakshithagw@gmail.com">rakshithagw@gmail.com</a>
</p>
<p>Christoph Bergmeir <a href="mailto:christoph.bergmeir@monash.edu">christoph.bergmeir@monash.edu</a>
</p>
<p>Daniel Schmidt <a href="mailto:daniel.schmidt@monash.edu">daniel.schmidt@monash.edu</a>
</p>
<p>and Geoffrey Webb <a href="mailto:geoff.webb@monash.edu">geoff.webb@monash.edu</a>
</p>
<p>Department of Data Science and AI, Faculty of Information Technology, Monash University, Australia.
</p>
<p><a href="https://www.monash.edu/it/dsai">https://www.monash.edu/it/dsai</a>
</p>


<h3>References</h3>

<p>Godahewa, R., Webb, G. I., Schmidt, D., &amp; Bergmeir, C. (2023). SETAR-Tree: A novel and accurate tree algorithm for
global time series forecasting. Machine Learning, 112, 2555-2591. doi: <a href="https://doi.org/10.1007/s10994-023-06316-x">10.1007/s10994-023-06316-x</a>
</p>

<hr>
<h2 id='chaotic_logistic_series'>Chaotic logistic map example time series</h2><span id='topic+chaotic_logistic_series'></span>

<h3>Description</h3>

<p>A list of 20 time series constructed by using the Chaotic Logistic Map (May, 1976) data generation process.
This is a part of a simulated dataset used in Hewamalage et al.(2021).
These series can be used to train the SETAR-Tree and SETAR-Forest models.
</p>


<h3>Format</h3>

<p>A list containing 20 numerical vectors.
</p>


<h3>References</h3>

<p>May, R. M. (1976). Simple mathematical models with very complicated dynamics. Nature, 261, 459â€“467.
</p>
<p>Hewamalage, H., Bergmeir, C., &amp; Bandara, K. (2021). Global models for time series forecasting: A simulation study. Pattern Recognition, 108441.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>chaotic_logistic_series
</code></pre>

<hr>
<h2 id='forecast.setarforest'>Forecast method for SETAR-Forest fits</h2><span id='topic+forecast.setarforest'></span>

<h3>Description</h3>

<p>Obtains forecasts for a given set of time series or a dataframe/matrix of new instances from a fitted SETAR-Forest model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'setarforest'
forecast(object, newdata, h = 5, level = c(80, 95), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="forecast.setarforest_+3A_object">object</code></td>
<td>
<p>An object of class <code><a href="#topic+setarforest">setarforest</a></code> which is a trained SETAR-Forest model.</p>
</td></tr>
<tr><td><code id="forecast.setarforest_+3A_newdata">newdata</code></td>
<td>
<p>A list of time series which need forecasts or a dataframe/matrix of new instances which need predictions.</p>
</td></tr>
<tr><td><code id="forecast.setarforest_+3A_h">h</code></td>
<td>
<p>The required number of forecasts (forecast horizon). This parameter is only required when <code>newdata</code> is a list of time series. Default value is 5.</p>
</td></tr>
<tr><td><code id="forecast.setarforest_+3A_level">level</code></td>
<td>
<p>Confidence level for prediction intervals. Default value is c(80, 95).</p>
</td></tr>
<tr><td><code id="forecast.setarforest_+3A_...">...</code></td>
<td>
<p>Other arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>newdata</code> is a list of time series, then an object of class <code>mforecast</code> is returned.
The <code>plot</code> or <code>autoplot</code> functions in the R <code>forecast</code> package can then be used to produce a plot of any time series in the returned object which contains the following properties.
</p>
<table>
<tr><td><code>method</code></td>
<td>
<p>A vector containing the name of the forecasting method (&quot;SETAR-Forest&quot;).</p>
</td></tr>
<tr><td><code>forecast</code></td>
<td>
<p>A list of objects of class <code>forecast</code>.
Each list object is corresponding with a time series and its forecasts.
Each list object contains 7 properties:
method (the name of the forecasting method, SETAR-Forest, as a character string),
x (the original time series),
mean (point forecasts as a time series),
series (the name of the series as a character string),
upper (upper bound of confidence intervals),
lower (lower bound of confidence intervals) and
level (confidence level of prediction intervals).</p>
</td></tr>
</table>
<p>If <code>newdata</code> is a dataframe/matrix, then a list containing the prediction and prediction intervals (upper and lower bounds) of each instance is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Obtaining forecasts for a list of time series
forest1 &lt;- setarforest(chaotic_logistic_series, bagging_freq = 2, num_cores = 1)
forecast(forest1, chaotic_logistic_series)

# Obtaining forecasts for a set of test instances
forest2 &lt;- setarforest(data = web_traffic_train[,-1],
                       label = web_traffic_train[,1],
                       bagging_freq = 2,
                       num_cores = 1,
                       categorical_covariates = "Project")
forecast(forest2, web_traffic_test)


</code></pre>

<hr>
<h2 id='forecast.setartree'>Forecast method for SETAR-Tree fits</h2><span id='topic+forecast.setartree'></span>

<h3>Description</h3>

<p>Obtains forecasts for a given set of time series or a dataframe/matrix of new instances from a fitted SETAR-Tree model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'setartree'
forecast(object, newdata, h = 5, level = c(80, 95), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="forecast.setartree_+3A_object">object</code></td>
<td>
<p>An object of class <code><a href="#topic+setartree">setartree</a></code> which is a trained SETAR-Tree model.</p>
</td></tr>
<tr><td><code id="forecast.setartree_+3A_newdata">newdata</code></td>
<td>
<p>A list of time series which needs forecasts or a dataframe/matrix of new instances which need predictions.</p>
</td></tr>
<tr><td><code id="forecast.setartree_+3A_h">h</code></td>
<td>
<p>The required number of forecasts (forecast horizon). This parameter is only required when <code>newdata</code> is a list of time series. Default value is 5.</p>
</td></tr>
<tr><td><code id="forecast.setartree_+3A_level">level</code></td>
<td>
<p>Confidence level for prediction intervals. Default value is c(80, 95).</p>
</td></tr>
<tr><td><code id="forecast.setartree_+3A_...">...</code></td>
<td>
<p>Other arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>newdata</code> is a list of time series, then an object of class <code>mforecast</code> is returned.
The <code>plot</code> or <code>autoplot</code> functions in the R <code>forecast</code> package can then be used to produce a plot of any time series in the returned object which contains the following properties.
</p>
<table>
<tr><td><code>method</code></td>
<td>
<p>A vector containing the name of the forecasting method (&quot;SETAR-Tree&quot;).</p>
</td></tr>
<tr><td><code>forecast</code></td>
<td>
<p>A list of objects of class <code>forecast</code>.
Each list object is corresponding with a time series and its forecasts.
Each list object contains 7 properties:
method (the name of the forecasting method, SETAR-Tree, as a character string),
x (the original time series),
mean (point forecasts as a time series),
series (the name of the series as a character string),
upper (upper bound of confidence intervals),
lower (lower bound of confidence intervals) and
level (confidence level of prediction intervals).</p>
</td></tr>
</table>
<p>If <code>newdata</code> is a dataframe/matrix, then a list containing the predictions, prediction intervals (upper and lower bounds), the size and standard deviations of the residuals of the models used to get each prediction is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Obtaining forecasts for a list of time series
tree1 &lt;- setartree(chaotic_logistic_series)
forecast(tree1, chaotic_logistic_series)

# Obtaining forecasts for a set of test instances
tree2 &lt;- setartree(data = web_traffic_train[,-1],
                   label = web_traffic_train[,1],
                   stopping_criteria = "both",
                   categorical_covariates = "Project")
forecast(tree2, web_traffic_test)


</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+forecast'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>generics</dt><dd><p><code><a href="generics.html#topic+forecast">forecast</a></code></p>
</dd>
</dl>

<hr>
<h2 id='setarforest'>Fitting SETAR-Forest models</h2><span id='topic+setarforest'></span>

<h3>Description</h3>

<p>Fits a SETAR-Forest model either using a list of time series or an embedded input matrix and labels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setarforest(
  data,
  label = NULL,
  lag = 10,
  bagging_fraction = 0.8,
  bagging_freq = 10,
  random_tree_significance = TRUE,
  random_tree_significance_divider = TRUE,
  random_tree_error_threshold = TRUE,
  depth = 1000,
  significance = 0.05,
  significance_divider = 2,
  error_threshold = 0.03,
  stopping_criteria = "both",
  mean_normalisation = FALSE,
  window_normalisation = FALSE,
  verbose = 2,
  num_cores = NULL,
  categorical_covariates = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setarforest_+3A_data">data</code></td>
<td>
<p>A list of time series (each list element is a separate time series) or a dataframe/matrix containing model inputs (the columns can contain past time series lags and/or external numerical/categorical covariates).</p>
</td></tr>
<tr><td><code id="setarforest_+3A_label">label</code></td>
<td>
<p>A vector of true outputs. This parameter is only required when <code>data</code> is a dataframe/matrix containing the model inputs.</p>
</td></tr>
<tr><td><code id="setarforest_+3A_lag">lag</code></td>
<td>
<p>The number of past time series lags that should be used when fitting each SETAR-Tree in the forest. This parameter is only required when <code>data</code> is a list of time series. Default value is 10.</p>
</td></tr>
<tr><td><code id="setarforest_+3A_bagging_fraction">bagging_fraction</code></td>
<td>
<p>The percentage of instances that should be used to train each SETAR-Tree in the forest.  Default value is 0.8.</p>
</td></tr>
<tr><td><code id="setarforest_+3A_bagging_freq">bagging_freq</code></td>
<td>
<p>The number of SETAR-Trees in the forest.  Default value is 10.</p>
</td></tr>
<tr><td><code id="setarforest_+3A_random_tree_significance">random_tree_significance</code></td>
<td>
<p>Whether a random significance should be considered for splitting per each tree. Each node split within the tree considers the same significance level. When this parameter is set to TRUE, the &quot;significance&quot; parameter will be ignored. Default value is TRUE.</p>
</td></tr>
<tr><td><code id="setarforest_+3A_random_tree_significance_divider">random_tree_significance_divider</code></td>
<td>
<p>Whether a random significance divider should be considered for splitting per each tree. When this parameter is set to TRUE, the &quot;significance_divider&quot; parameter will be ignored. Default value is TRUE.</p>
</td></tr>
<tr><td><code id="setarforest_+3A_random_tree_error_threshold">random_tree_error_threshold</code></td>
<td>
<p>Whether a random error threshold should be considered for splitting per each tree. Each node split within the tree considers the same error threshold. When this parameter is set to TRUE, the &quot;error_threshold&quot; parameter will be ignored. Default value is TRUE.</p>
</td></tr>
<tr><td><code id="setarforest_+3A_depth">depth</code></td>
<td>
<p>Maximum depth of each SETAR-Tree in the forest. Default value is 1000. Thus, unless specify a lower value, the depth of a SETAR-Tree is actually controlled by the stopping criterion.</p>
</td></tr>
<tr><td><code id="setarforest_+3A_significance">significance</code></td>
<td>
<p>In each SETAR-Tree in the forest, the initial significance used by the linearity test (alpha_0). Default value is 0.05.</p>
</td></tr>
<tr><td><code id="setarforest_+3A_significance_divider">significance_divider</code></td>
<td>
<p>In each SETAR-Tree in the forest, the corresponding significance in a tree level is divided by this value. Default value is 2.</p>
</td></tr>
<tr><td><code id="setarforest_+3A_error_threshold">error_threshold</code></td>
<td>
<p>In each SETAR-Tree in the forest, the minimum error reduction percentage between parent and child nodes to make a split. Default value is 0.03.</p>
</td></tr>
<tr><td><code id="setarforest_+3A_stopping_criteria">stopping_criteria</code></td>
<td>
<p>The required stopping criteria for each SETAR-Tree in the forest: linearity test (lin_test), error reduction percentage (error_imp) or linearity test and error reduction percentage (both). Default value is <code>"both"</code>.</p>
</td></tr>
<tr><td><code id="setarforest_+3A_mean_normalisation">mean_normalisation</code></td>
<td>
<p>Whether each series should be normalised by deducting its mean value before building the forest. This parameter is only required when <code>data</code> is a list of time series. Default value is FALSE.</p>
</td></tr>
<tr><td><code id="setarforest_+3A_window_normalisation">window_normalisation</code></td>
<td>
<p>Whether the window-wise normalisation should be applied before building the forest. This parameter is only required when <code>data</code> is a list of time series. When this is TRUE, each row of the training embedded matrix is normalised by deducting its mean value before building the forest. Default value is FALSE.</p>
</td></tr>
<tr><td><code id="setarforest_+3A_verbose">verbose</code></td>
<td>
<p>Controls the level of the verbosity of SETAR-Forest: 0 (errors/warnings), 1 (limited amount of information including the depth of the currently processing tree), 2 (full training information including the depth of the currently processing tree and stopping criterion related details in each tree). Default value is 2.</p>
</td></tr>
<tr><td><code id="setarforest_+3A_num_cores">num_cores</code></td>
<td>
<p>The number of cores to be used. <code>num_cores &gt; 1</code> means parallel processing. When not provided, it will find the available number of cores and use those to run the SETAR-Trees in the forest in parallel.</p>
</td></tr>
<tr><td><code id="setarforest_+3A_categorical_covariates">categorical_covariates</code></td>
<td>
<p>Names of the categorical covariates in the input data. This parameter is only required when <code>data</code> is a dataframe/matrix and it contains categorical variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+setarforest">setarforest</a></code> which contains the following properties.
</p>
<table>
<tr><td><code>trees</code></td>
<td>
<p>A list of objects of class <code><a href="#topic+setartree">setartree</a></code> which represents the trained SETAR-Tree models in the forest.</p>
</td></tr>
<tr><td><code>lag</code></td>
<td>
<p>The number of features used to train each SEATR-Tree in the forest.</p>
</td></tr>
<tr><td><code>feature_names</code></td>
<td>
<p>Names of the input features.</p>
</td></tr>
<tr><td><code>coefficients</code></td>
<td>
<p>Names of the coefficients of leaf node regresion models in each SETAR-Tree in the forest.</p>
</td></tr>
<tr><td><code>categorical_covariate_values</code></td>
<td>
<p>Information about the categorical covarites used during training (only if applicable).</p>
</td></tr>
<tr><td><code>mean_normalisation</code></td>
<td>
<p>Whether mean normalisation was applied for the training data.</p>
</td></tr>
<tr><td><code>window_normalisation</code></td>
<td>
<p>Whether window normalisation was applied for the training data.</p>
</td></tr>
<tr><td><code>input_type</code></td>
<td>
<p>Type of input data used to train the SETAR-Forest. This is <code>list</code> if <code>data</code> is a list of time series, and <code>df</code> if <code>data</code> is a dataframe/matrix containing model inputs.</p>
</td></tr>
<tr><td><code>execution_time</code></td>
<td>
<p>Execution time of SETAR-Forest.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
# Training SETAR-Forest with a list of time series
setarforest(chaotic_logistic_series, bagging_freq = 2, num_cores = 1)

# Training SETAR-Forest with a dataframe containing model inputs where the model inputs may contain
# past time series lags and numerical/categorical covariates
setarforest(data = web_traffic_train[,-1],
            label = web_traffic_train[,1],
            bagging_freq = 2,
            num_cores = 1,
            categorical_covariates = "Project")


</code></pre>

<hr>
<h2 id='setartree'>Fitting SETAR-Tree models</h2><span id='topic+setartree'></span>

<h3>Description</h3>

<p>Fits a SETAR-Tree model either using a list of time series or an embedded input matrix and labels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setartree(
  data,
  label = NULL,
  lag = 10,
  depth = 1000,
  significance = 0.05,
  significance_divider = 2,
  error_threshold = 0.03,
  stopping_criteria = "both",
  mean_normalisation = FALSE,
  window_normalisation = FALSE,
  verbose = 2,
  categorical_covariates = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setartree_+3A_data">data</code></td>
<td>
<p>A list of time series (each list element is a separate time series) or a dataframe/matrix containing model inputs (the columns can contain past time series lags and/or external numerical/categorical covariates).</p>
</td></tr>
<tr><td><code id="setartree_+3A_label">label</code></td>
<td>
<p>A vector of true outputs. This parameter is only required when <code>data</code> is a dataframe/matrix containing the model inputs.</p>
</td></tr>
<tr><td><code id="setartree_+3A_lag">lag</code></td>
<td>
<p>The number of past time series lags that should be used when fitting the SETAR-Tree. This parameter is only required when <code>data</code> is a list of time series. Default value is 10.</p>
</td></tr>
<tr><td><code id="setartree_+3A_depth">depth</code></td>
<td>
<p>Maximum tree depth. Default value is 1000. Thus, unless specify a lower value, the depth is actually controlled by the stopping criterion.</p>
</td></tr>
<tr><td><code id="setartree_+3A_significance">significance</code></td>
<td>
<p>Initial significance used by the linearity test (alpha_0). Default value is 0.05.</p>
</td></tr>
<tr><td><code id="setartree_+3A_significance_divider">significance_divider</code></td>
<td>
<p>The corresponding significance in each tree level is divided by this value. Default value is 2.</p>
</td></tr>
<tr><td><code id="setartree_+3A_error_threshold">error_threshold</code></td>
<td>
<p>The minimum error reduction percentage between parent and child nodes to make a split. Default value is 0.03.</p>
</td></tr>
<tr><td><code id="setartree_+3A_stopping_criteria">stopping_criteria</code></td>
<td>
<p>The required stopping criteria: linearity test (lin_test), error reduction percentage (error_imp) or linearity test and error reduction percentage (both). Default value is <code>"both"</code>.</p>
</td></tr>
<tr><td><code id="setartree_+3A_mean_normalisation">mean_normalisation</code></td>
<td>
<p>Whether each series should be normalised by deducting its mean value before building the tree. This parameter is only required when <code>data</code> is a list of time series. Default value is FALSE.</p>
</td></tr>
<tr><td><code id="setartree_+3A_window_normalisation">window_normalisation</code></td>
<td>
<p>Whether the window-wise normalisation should be applied before building the tree. This parameter is only required when <code>data</code> is a list of time series. When this is TRUE, each row of the training embedded matrix is normalised by deducting its mean value before building the tree. Default value is FALSE.</p>
</td></tr>
<tr><td><code id="setartree_+3A_verbose">verbose</code></td>
<td>
<p>Controls the level of the verbosity of SETAR-Tree: 0 (errors/warnings), 1 (limited amount of information including the current tree depth), 2 (full training information including the current tree depth and stopping criterion results in each tree node). Default value is 2.</p>
</td></tr>
<tr><td><code id="setartree_+3A_categorical_covariates">categorical_covariates</code></td>
<td>
<p>Names of the categorical covariates in the input data. This parameter is only required when <code>data</code> is a dataframe/matrix and it contains categorical variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+setartree">setartree</a></code> which contains the following properties.
</p>
<table>
<tr><td><code>leaf_models</code></td>
<td>
<p>Trained global pooled regression models in each leaf node.</p>
</td></tr>
<tr><td><code>opt_lags</code></td>
<td>
<p>Optimal features used to split each node.</p>
</td></tr>
<tr><td><code>opt_thresholds</code></td>
<td>
<p>Optimal threshold values used to split each node.</p>
</td></tr>
<tr><td><code>lag</code></td>
<td>
<p>The number of features used to train the SETAR-Tree.</p>
</td></tr>
<tr><td><code>feature_names</code></td>
<td>
<p>Names of the input features.</p>
</td></tr>
<tr><td><code>coefficients</code></td>
<td>
<p>Names of the coefficients of leaf node regresion models.</p>
</td></tr>
<tr><td><code>num_leaves</code></td>
<td>
<p>Number of leaf nodes in the SETAR-Tree.</p>
</td></tr>
<tr><td><code>depth</code></td>
<td>
<p>Depth of the SETAR-Tree which was determined based on the specified stopping criterion.</p>
</td></tr>
<tr><td><code>leaf_instance_dis</code></td>
<td>
<p>Number of instances used to train the regression models at each leaf node.</p>
</td></tr>
<tr><td><code>stds</code></td>
<td>
<p>The standard deviations of the residuals of each leaf node.</p>
</td></tr>
<tr><td><code>categorical_covariate_values</code></td>
<td>
<p>Information about the categorical covarites used during training (only if applicable).</p>
</td></tr>
<tr><td><code>mean_normalisation</code></td>
<td>
<p>Whether mean normalisation was applied for the training data.</p>
</td></tr>
<tr><td><code>window_normalisation</code></td>
<td>
<p>Whether window normalisation was applied for the training data.</p>
</td></tr>
<tr><td><code>input_type</code></td>
<td>
<p>Type of input data used to train the SETAR-Tree. This is <code>list</code> if <code>data</code> is a list of time series, and <code>df</code> if <code>data</code> is a dataframe/matrix containing model inputs.</p>
</td></tr>
<tr><td><code>execution_time</code></td>
<td>
<p>Execution time of SETAR-Tree.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
# Training SETAR-Tree with a list of time series
setartree(chaotic_logistic_series)

# Training SETAR-Tree with a dataframe containing model inputs where the model inputs may contain
# past time series lags and numerical/categorical covariates
setartree(data = web_traffic_train[,-1],
          label = web_traffic_train[,1],
          stopping_criteria = "both",
          categorical_covariates = "Project")


</code></pre>

<hr>
<h2 id='web_traffic_test'>A dataframe of test instances</h2><span id='topic+web_traffic_test'></span>

<h3>Description</h3>

<p>A dataframe containing 5 instances that can be used to test the SETAR-Tree and SETAR-Forest models.
The data are related to the number of hits or web traffic of a set of Wikipedia pages.
Each intance consists of 10 time series lags (Lag1 to Lag10) and a categorical covariate (Project).
The data were downloaded from the Wikimedia REST API (Wikimedia, 2022).
</p>


<h3>Format</h3>

<p>A dataframe containing 5 test instances.
</p>


<h3>References</h3>

<p>Wikimedia Analytics Team (2022). Wikistats: Pageview complete dumps.<br />
URL https://dumps.wikimedia.org/other/pageview_complete
</p>


<h3>Examples</h3>

<pre><code class='language-R'>web_traffic_test
</code></pre>

<hr>
<h2 id='web_traffic_train'>A dataframe of training instances</h2><span id='topic+web_traffic_train'></span>

<h3>Description</h3>

<p>A dataframe containing 120 instances that can be used to train the SETAR-Tree and SETAR-Forest models.
The data are related to the number of hits or web traffic of a set of Wikipedia pages.
Each instance in the dataframe consists of 10 time series lags (Lag1 to Lag10), a categorical covariate (Project) and the corresponding true outputs (y).
The data were downloaded from the Wikimedia REST API (Wikimedia, 2022).
</p>


<h3>Format</h3>

<p>A dataframe containing 120 training instances.
</p>


<h3>References</h3>

<p>Wikimedia Analytics Team (2022). Wikistats: Pageview complete dumps.<br />
URL https://dumps.wikimedia.org/other/pageview_complete
</p>


<h3>Examples</h3>

<pre><code class='language-R'>web_traffic_train
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
