<!DOCTYPE html><html><head><title>Help for package dotwhisker</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {dotwhisker}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_brackets'><p>Add Labelled Brackets to Group Predictors in a Dot-and-Whisker Plot</p></a></li>
<li><a href='#by_2sd'><p>Rescale regression results by multiplying by 2 standard deviations</p></a></li>
<li><a href='#dwplot'><p>Dot-and-Whisker Plots of Regression Results</p></a></li>
<li><a href='#relabel_predictors'><p>Relabel the Predictors in a Tidy Data Frame of Regression Results</p></a></li>
<li><a href='#relabel_y_axis'><p>Relabel the Y-Axis of a Dot-Whisker Plot</p></a></li>
<li><a href='#secret_weapon'><p>Generate a 'Secret Weapon' Plot of Regression Results from Multiple Models</p></a></li>
<li><a href='#small_multiple'><p>Generate a 'Small Multiple' Plot of Regression Results</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Dot-and-Whisker Plots of Regression Results</td>
</tr>
<tr>
<td>Version:</td>
<td>0.8.2</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Yue Hu &lt;yuehu@tsinghua.edu.cn&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Quick and easy dot-and-whisker plots of regression results.</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://fsolt.org/dotwhisker/">https://fsolt.org/dotwhisker/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/fsolt/dotwhisker/issues">https://github.com/fsolt/dotwhisker/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0), ggplot2 (&ge; 2.2.1),</td>
</tr>
<tr>
<td>Imports:</td>
<td>grid, gtable, gridExtra, stats, parameters, performance,
patchwork, dplyr, stringr, ggstance, rlang, purrr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ordinal, tibble, knitr, rmarkdown, broom</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-07 06:29:30 UTC; yuehu</td>
</tr>
<tr>
<td>Author:</td>
<td>Frederick Solt [aut],
  Yue Hu [aut, cre],
  Os Keyes [ctb],
  Ben Bolker [ctb],
  Stefan MÃ¼ller [ctb],
  Thomas Leeper [ctb],
  Chris Wallace [ctb],
  Christopher Warshaw [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-07 12:20:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_brackets'>Add Labelled Brackets to Group Predictors in a Dot-and-Whisker Plot</h2><span id='topic+add_brackets'></span>

<h3>Description</h3>

<p><code>add_brackets</code> draws brackets along the y-axis beyond the plotting area of a dot-and-whisker plot generated by <code>dwplot</code>, useful for labelling groups of predictors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_brackets(p, brackets, fontSize = 0.7, face = "italic", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_brackets_+3A_p">p</code></td>
<td>
<p>A plot generated by <code>dwplot</code>.  Any 'ggplot' customization should be done before passing the plot to <code>add_brackets</code>.  To pass the finalized plot to <code>add_brackets</code> without creating an intermediate object, simply wrap the code that generates it in braces (<code>`{`</code> and <code>`}`</code>).</p>
</td></tr>
<tr><td><code id="add_brackets_+3A_brackets">brackets</code></td>
<td>
<p>A list of brackets; each element of the list should be a character vector consisting of (1) a label for the bracket, (2) the name of the topmost variable to be enclosed by the bracket, and (3) the name of the bottom most variable to be enclosed by the bracket.</p>
</td></tr>
<tr><td><code id="add_brackets_+3A_fontsize">fontSize</code></td>
<td>
<p>A number defining the size of the bracket label. The default value is .7.</p>
</td></tr>
<tr><td><code id="add_brackets_+3A_face">face</code></td>
<td>
<p>A typeface for the bracket labels; options are &quot;plain&quot;, &quot;bold&quot;, &quot;italic&quot;, &quot;oblique&quot;, and &quot;bold.italic&quot;.</p>
</td></tr>
<tr><td><code id="add_brackets_+3A_...">...</code></td>
<td>
<p>Extra arguments to pass to <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The brackets are drawn by 'grid' functions. Apart from font size and typeface, users can customize the appearance of the bracket labels by setting 'gpar' arguments in 'add_brackets'.
</p>


<h3>Value</h3>

<p>The function returns a <code>ggplot</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
m1 &lt;- lm(mpg ~ wt + cyl + disp, data = mtcars)
two_brackets &lt;- list(c("Engine", "Cylinder", "Displacement"),
                     c("Not Engine", "Intercept", "Weight"))

{dwplot(m1, show_intercept = TRUE) %&gt;%
       relabel_predictors("(Intercept)" = "Intercept",
                          wt = "Weight",
                          cyl = "Cylinder",
                          disp = "Displacement") +
       theme_bw() + xlab("Coefficient") + ylab("") +
       theme(legend.position="none") +
       geom_vline(xintercept = 0, colour = "grey50", linetype = 2)} %&gt;%
   add_brackets(two_brackets)

</code></pre>

<hr>
<h2 id='by_2sd'>Rescale regression results by multiplying by 2 standard deviations</h2><span id='topic+by_2sd'></span>

<h3>Description</h3>

<p><code>by_2sd</code> rescales regression results to facilitate making dot-and-whisker plots using <code><a href="#topic+dwplot">dwplot</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>by_2sd(df, dataset)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="by_2sd_+3A_df">df</code></td>
<td>
<p>A data frame including the variables <code>term</code> (names of independent variables), <code>estimate</code> (corresponding coefficient estimates), <code>std.error</code> (corresponding standard errors), and optionally <code>model</code> (when multiple models are desired on a single plot) such as generated those by <code><a href="broom.html#topic+tidy">tidy</a></code>.</p>
</td></tr>
<tr><td><code id="by_2sd_+3A_dataset">dataset</code></td>
<td>
<p>The data analyzed in the models whose results are recorded in <code>df</code>, or (preferably) the <em>model matrix</em> used by the models in <code>df</code>; the information required for complex models can more easily be generated from the model matrix than from the original data set. In many cases the model matrix can be extracted from the original model via <code><a href="stats.html#topic+model.matrix">model.matrix</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>by_2sd</code> multiplies the results from regression models saved as tidy data frames for predictors that are not binary by twice the standard deviation of these variables in the dataset analyzed. Standardizing in this way yields coefficients that are directly comparable to each other and to those for untransformed binary predictors (Gelman 2008) and so facilitates plotting using <code><a href="#topic+dwplot">dwplot</a></code>. Note that the current version of <code>by_2sd</code> does not subtract the mean (in contrast to Gelman's (2008) formula). However, all estimates and standard errors of the independent variables are the same as if the mean was subtracted. The only difference from Gelman (2008) is that for all variables in the model the intercept is shifted by the coefficient times the mean of the variable.
</p>
<p>An alternative available in some circumstances is to pass a model object to <code>arm::standardize</code> before passing the results to <code><a href="broom.html#topic+tidy">tidy</a></code> and then on to <code><a href="#topic+dwplot">dwplot</a></code>.  The advantages of <code>by_2sd</code> are that (1) it takes a tidy data frame as its input and so is not restricted to only those model objects that <code>standardize</code> accepts and (2) it is much more efficient because it operates on the parameters rather than refitting the original model with scaled data.
</p>


<h3>Value</h3>

<p>A tidy data frame
</p>


<h3>References</h3>

<p>Gelman, Andrew. 2008. &quot;Scaling Regression Inputs by Dividing by Two Standard Deviations.&quot; Statistics in Medicine, 27:2865-2873.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(broom)
library(dplyr)

data(mtcars)
m1 &lt;- lm(mpg ~ wt + cyl + disp, data = mtcars)
m1_df &lt;- tidy(m1) %&gt;% by_2sd(mtcars) # create data frame of rescaled regression results

</code></pre>

<hr>
<h2 id='dwplot'>Dot-and-Whisker Plots of Regression Results</h2><span id='topic+dwplot'></span><span id='topic+dw_plot'></span>

<h3>Description</h3>

<p><code>dwplot</code> is a function for quickly and easily generating dot-and-whisker plots of regression models saved in tidy data frames.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dwplot(
  x,
  ci = 0.95,
  dodge_size = 0.4,
  vars_order = NULL,
  show_intercept = FALSE,
  show_stats = FALSE,
  stats_tb = NULL,
  stats_digits = 3,
  stats_compare = FALSE,
  stats_size = 10,
  stats_padding = unit(c(4, 4), "mm"),
  stats_layout = c(2, -1, 1),
  margins = FALSE,
  model_name = "model",
  model_order = NULL,
  style = c("dotwhisker", "distribution"),
  by_2sd = FALSE,
  vline = NULL,
  dot_args = list(size = 1.2),
  whisker_args = list(size = 0.5),
  dist_args = list(alpha = 0.5),
  line_args = list(alpha = 0.75, size = 1),
  ...
)

dw_plot(
  x,
  ci = 0.95,
  dodge_size = 0.4,
  vars_order = NULL,
  show_intercept = FALSE,
  show_stats = FALSE,
  stats_tb = NULL,
  stats_digits = 3,
  stats_compare = FALSE,
  stats_size = 10,
  stats_padding = unit(c(4, 4), "mm"),
  stats_layout = c(2, -1, 1),
  margins = FALSE,
  model_name = "model",
  model_order = NULL,
  style = c("dotwhisker", "distribution"),
  by_2sd = FALSE,
  vline = NULL,
  dot_args = list(size = 1.2),
  whisker_args = list(size = 0.5),
  dist_args = list(alpha = 0.5),
  line_args = list(alpha = 0.75, size = 1),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dwplot_+3A_x">x</code></td>
<td>
<p>Either a model object to be tidied with <code><a href="broom.html#topic+tidy">tidy</a></code>, or a list of such model objects, or a tidy data frame of regression results (see 'Details').</p>
</td></tr>
<tr><td><code id="dwplot_+3A_ci">ci</code></td>
<td>
<p>A number indicating the level of confidence intervals; the default is .95.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_dodge_size">dodge_size</code></td>
<td>
<p>A number indicating how much vertical separation should be between different models' coefficients when multiple models are graphed in a single plot.  Lower values tend to look better when the number of independent variables is small, while a higher value may be helpful when many models appear on the same plot; the default is 0.4.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_vars_order">vars_order</code></td>
<td>
<p>A vector of variable names that specifies the order in which the variables are to appear along the y-axis of the plot. Note that the order will be overwritten by <code><a href="#topic+relabel_predictors">relabel_predictors</a></code>, if the function is following called.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_show_intercept">show_intercept</code></td>
<td>
<p>A logical constant indicating whether the coefficient of the intercept term should be plotted. The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_show_stats">show_stats</code></td>
<td>
<p>A logical constant indicating whether to show a table of model fitness statistics under the dot-whisker plot. The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_stats_tb">stats_tb</code></td>
<td>
<p>Customized table of model fit. The table should be in a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_stats_digits">stats_digits</code></td>
<td>
<p>A numeric value specifying the digits to display in the fitness table. This parameter is relevant only when <code>show_stats = TRUE</code>. Default is 3, providing a balance between precision and readability.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_stats_compare">stats_compare</code></td>
<td>
<p>A logical constant to enable comparison of statistics in the fitness table. Applicable only when <code>show_stats = TRUE</code>. The default value is <code>FALSE</code>. That is, it presents all the statistics across different modeling methods, yet potentially expanding the table's breadth. When set to <code>TRUE</code>, only the shared, comparable statistics are remained.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_stats_size">stats_size</code></td>
<td>
<p>A numeric value determining the font size in the fitness table, effective only if <code>show_stats = TRUE</code>. The standard setting is 10.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_stats_padding">stats_padding</code></td>
<td>
<p>Defining the internal margins of the fitness table. Relevant when <code>show_stats = TRUE</code>. Set by default to <code>unit(c(4, 4), "mm")</code>, allowing for a balanced layout. Further customization options refer to <code><a href="gridExtra.html#topic+tableGrob">tableGrob</a></code>.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_stats_layout">stats_layout</code></td>
<td>
<p>Adjusting the spacing between the dotwhisker plot and the fitness table. Effective when <code>show_stats = TRUE</code>. The initial configuration is <code>c(2, -1, 1)</code>, ensuring a coherent visual flow. Additional layout settings refer to <code><a href="patchwork.html#topic+plot_layout">plot_layout</a></code>.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_margins">margins</code></td>
<td>
<p>[Suspended] A logical value indicating whether presenting the average marginal effects of the estimates. See the Details for more information.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_model_name">model_name</code></td>
<td>
<p>The name of a variable that distinguishes separate models within a tidy data frame.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_model_order">model_order</code></td>
<td>
<p>A character vector defining the order of the models when multiple models are involved.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_style">style</code></td>
<td>
<p>Either <code>"dotwhisker"</code> or <code>"distribution"</code>. <code>"dotwhisker"</code>, the default, shows the regression coefficients' point estimates as dots with confidence interval whiskers.  <code>"distribution"</code> shows the normal distribution with mean equal to the point estimate and standard deviation equal to the standard error, underscored with a confidence interval whisker.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_by_2sd">by_2sd</code></td>
<td>
<p>When x is model object or list of model objects, should the coefficients for predictors that are not binary be rescaled by twice the standard deviation of these variables in the dataset analyzed, per Gelman (2008)?  Defaults to <code>FALSE</code>.  Note that when x is a tidy data frame, one can use <code><a href="#topic+by_2sd">by_2sd</a></code> to rescale similarly.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_vline">vline</code></td>
<td>
<p>A <code>geom_vline()</code> object, typically with <code>xintercept = 0</code>, to be drawn behind the coefficients.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_dot_args">dot_args</code></td>
<td>
<p>When <code>style</code> is &quot;dotwhisker&quot;, a list of arguments specifying the appearance of the dots representing mean estimates.  For supported arguments, see <code><a href="ggplot2.html#topic+geom_point">geom_point</a></code>.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_whisker_args">whisker_args</code></td>
<td>
<p>When <code>style</code> is &quot;dotwhisker&quot;, a list of arguments specifying the appearance of the whiskers representing the confidence intervals.  For supported arguments, see <code><a href="ggstance.html#topic+geom_linerangeh">geom_linerangeh</a></code>.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_dist_args">dist_args</code></td>
<td>
<p>When <code>style</code> is &quot;distribution&quot;, a list of arguments specifying the appearance of normally distributed regression estimates. For supported arguments, see <code><a href="ggplot2.html#topic+geom_polygon">geom_polygon</a></code>.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_line_args">line_args</code></td>
<td>
<p>When <code>style</code> is &quot;distribution&quot;, a list of arguments specifying the appearance of the line marking the confidence interval beneath the normal distribution.  For supported arguments, see <code><a href="ggstance.html#topic+geom_linerangeh">geom_linerangeh</a></code>.</p>
</td></tr>
<tr><td><code id="dwplot_+3A_...">...</code></td>
<td>
<p>Extra arguments to pass to <code><a href="parameters.html#topic+parameters">parameters</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>dwplot</code> visualizes regression model objects or regression results saved in tidy data frames as dot-and-whisker plots generated by <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>.
</p>
<p>Tidy data frames to be plotted should include the variables <code>term</code> (names of predictors), <code>estimate</code> (corresponding estimates of coefficients or other quantities of interest), <code>std.error</code> (corresponding standard errors), and optionally <code>model</code> (when multiple models are desired on a single plot; a different name for this last variable may be specified using the model_name argument).
In place of <code>std.error</code> one may substitute <code>conf.low</code> (the lower bounds of the confidence intervals of each estimate) and <code>conf.high</code> (the corresponding upper bounds).
</p>
<p>For convenience, <code>dwplot</code> also accepts as input those model objects that can be tidied by <code><a href="broom.html#topic+tidy">tidy</a></code> (or <code><a href="parameters.html#topic+parameters">parameters</a></code> (with proper formatting)), or a list of such model objects.
</p>
<p>By default, the plot will display 95-percent confidence intervals. To display a different interval when passing a model object or objects, specify a <code>ci</code> argument. When passing a data frame of results, include the variables <code>conf.low</code> and <code>conf.high</code> describing the bounds of the desired interval.
</p>
<p>Because the function can take a data frame as input, it is easily employed for a wide range of models, including those not supported by <code>broom</code> or <code>parameters</code>.
And because the output is a <code>ggplot</code> object, it can easily be further customized with any additional arguments and layers supported by <code>ggplot2</code>.
Together, these two features make <code>dwplot</code> extremely flexible.
</p>
<p><code>dwplot</code> provides an option to present the average marginal effect directly. Users can alter the confidence intervals of the margins through the <code>ci</code> argument. ^[The function is suspended due to the dependency issue. We'll work on getting it back in the next update.] The 'margins' argument also works for <code>small_multiple</code> and <code>secret_weapon</code>.
</p>
<p>To minimize the need for lengthy, distracting regression tables (often relegated to an appendix for dot-whisker plot users), <code>dwplot</code> incorporates optimal model fit statistics directly beneath the dot-whisker plots. These statistics are derived using the excellent <code><a href="performance.html#topic+performance">performance</a></code> functions and integrated at the plot's base via <code><a href="patchwork.html#topic+patchwork">patchwork</a></code> and <code><a href="gridExtra.html#topic+tableGrob">tableGrob</a></code> functions. For added flexibility, <code>dwplot</code> includes the <code>stats_tb</code> feature, allowing users to input customized statistics. Furthermore, a suite of <code>stats_*</code> functions is available for fine-tuning the presentation of these statistics, enhancing user control over the visual output.
</p>


<h3>Value</h3>

<p>The function returns a <code>ggplot</code> object.
</p>


<h3>References</h3>

<p>Kastellec, Jonathan P. and Leoni, Eduardo L. 2007. &quot;Using Graphs Instead of Tables in Political Science.&quot; *Perspectives on Politics*, 5(4):755-771.
</p>
<p>Gelman, Andrew. 2008. &quot;Scaling Regression Inputs by Dividing by Two Standard Deviations.&quot; *Statistics in Medicine*, 27:2865-2873.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
# Plot regression coefficients from a single model object
data(mtcars)
m1 &lt;- lm(mpg ~ wt + cyl + disp, data = mtcars)
dwplot(m1, vline = geom_vline(xintercept = 0, colour = "grey50", linetype = 2)) +
    xlab("Coefficient")
# using 99% confidence interval
dwplot(m1, ci = .99)
# Plot regression coefficients from multiple models
m2 &lt;- update(m1, . ~ . - disp)
dwplot(list(full = m1, nodisp = m2))
# Change the appearance of dots and whiskers
dwplot(m1, dot_args = list(size = 3, pch = 21, fill = "white"))
# Plot regression coefficients from multiple models on the fly
mtcars %&gt;%
    split(.$am) %&gt;%
    purrr::map(~ lm(mpg ~ wt + cyl + disp, data = .x)) %&gt;%
    dwplot() %&gt;%
    relabel_predictors(c(wt = "Weight", cyl = "Cylinders", disp = "Displacement")) +
    theme_bw() + xlab("Coefficient") + ylab("") +
    geom_vline(xintercept = 0, colour = "grey60", linetype = 2) +
    ggtitle("Predicting Gas Mileage, OLS Estimates") +
    theme(plot.title = element_text(face = "bold"),
          legend.position = c(.995, .99),
          legend.justification = c(1, 1),
          legend.background = element_rect(colour="grey80"),
          legend.title.align = .5) +
    scale_colour_grey(start = .4, end = .8,
                      name = "Transmission",
                      breaks = c("Model 0", "Model 1"),
                      labels = c("Automatic", "Manual"))

</code></pre>

<hr>
<h2 id='relabel_predictors'>Relabel the Predictors in a Tidy Data Frame of Regression Results</h2><span id='topic+relabel_predictors'></span>

<h3>Description</h3>

<p><code>relabel_predictors</code> is a convenience function for relabeling the predictors in a tidy data frame to be passed to <code><a href="#topic+dwplot">dwplot</a></code> or a plot generated by <code><a href="#topic+dwplot">dwplot</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>relabel_predictors(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="relabel_predictors_+3A_x">x</code></td>
<td>
<p>Either a tidy data frame to be passed to <code><a href="#topic+dwplot">dwplot</a></code> or a plot generated by <code><a href="#topic+dwplot">dwplot</a></code>.</p>
</td></tr>
<tr><td><code id="relabel_predictors_+3A_...">...</code></td>
<td>
<p>Named replacements, as in <code><a href="dplyr.html#topic+recode">recode</a></code>. The argument names should be the current values to be replaced, and the argument values should be the new (replacement) values.  For backwards compatibility, a named character vector, with new values as values, and old values as names may also be used.  The order of the named replacements will be preserved, so this function also serves the purpose of reordering variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns an object of the same type as it is passed: a tidy data frame or a plot generated by <code><a href="#topic+dwplot">dwplot</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(broom)
library(dplyr)

data(mtcars)
m1 &lt;- lm(mpg ~ wt + cyl + disp, data = mtcars)
m1_df &lt;- broom::tidy(m1) %&gt;%
         relabel_predictors("(Intercept)" = "Intercept",
                              wt = "Weight",
                              disp = "Displacement",
                              cyl = "Cylinder")
dwplot(m1_df)

dwplot(m1, show_intercept = TRUE) %&gt;%
    relabel_predictors("(Intercept)" = "Intercept",
                              wt = "Weight",
                              disp = "Displacement",
                              cyl = "Cylinder")


</code></pre>

<hr>
<h2 id='relabel_y_axis'>Relabel the Y-Axis of a Dot-Whisker Plot</h2><span id='topic+relabel_y_axis'></span>

<h3>Description</h3>

<p><code>relabel_y_axis</code> DEPRECATED. A convenience function for relabeling the predictors on the y-axis of a dot-whisker plot created by <code><a href="#topic+dwplot">dwplot</a></code>.  It is deprecated; use <code><a href="#topic+relabel_predictors">relabel_predictors</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>relabel_y_axis(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="relabel_y_axis_+3A_x">x</code></td>
<td>
<p>A vector of labels for predictors, listed from top to bottom</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+relabel_predictors">relabel_predictors</a></code> to relabel predictors on the y-axis of a dot-whisker plot or in a tidy data.frame
</p>

<hr>
<h2 id='secret_weapon'>Generate a 'Secret Weapon' Plot of Regression Results from Multiple Models</h2><span id='topic+secret_weapon'></span>

<h3>Description</h3>

<p><code>secret_weapon</code> is a function for plotting regression results of multiple models as a 'secret weapon' plot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>secret_weapon(x, var = NULL, ci = 0.95, margins = FALSE, by_2sd = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="secret_weapon_+3A_x">x</code></td>
<td>
<p>Either a model object to be tidied with <code><a href="broom.html#topic+tidy">tidy</a></code>, or a list of such model objects, or a tidy data frame of regression results (see 'Details').</p>
</td></tr>
<tr><td><code id="secret_weapon_+3A_var">var</code></td>
<td>
<p>The predictor whose results are to be shown in the 'secret weapon' plot</p>
</td></tr>
<tr><td><code id="secret_weapon_+3A_ci">ci</code></td>
<td>
<p>A number indicating the level of confidence intervals; the default is .95.</p>
</td></tr>
<tr><td><code id="secret_weapon_+3A_margins">margins</code></td>
<td>
<p>[Suspended] A logical value indicating whether presenting the average marginal effects of the estimates. See the Details for more information.</p>
</td></tr>
<tr><td><code id="secret_weapon_+3A_by_2sd">by_2sd</code></td>
<td>
<p>When x is a list of model objects, should the coefficients for predictors that are not binary be rescaled by twice the standard deviation of these variables in the dataset analyzed, per Gelman (2008)?  Defaults to <code>TRUE</code>.  Note that when x is a tidy data frame, one can use <code><a href="#topic+by_2sd">by_2sd</a></code> to rescale similarly.</p>
</td></tr>
<tr><td><code id="secret_weapon_+3A_...">...</code></td>
<td>
<p>Arguments to pass to <code><a href="#topic+dwplot">dwplot</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Andrew Gelman has coined the term <a href="https://statmodeling.stat.columbia.edu/2005/03/07/the_secret_weap/">&quot;the secret weapon&quot;</a> for dot-and-whisker plots that compare the estimated coefficients for a single predictor across many models or datasets.
<code>secret_weapon</code> takes a tidy data frame of regression results or a list of model objects and generates a dot-and-whisker plot of the results of a single variable across the multiple models.
</p>
<p>Tidy data frames to be plotted should include the variables <code>term</code> (names of predictors), <code>estimate</code> (corresponding estimates of coefficients or other quantities of interest), <code>std.error</code> (corresponding standard errors), and <code>model</code> (identifying the corresponding model).
In place of <code>std.error</code> one may substitute <code>lb</code> (the lower bounds of the confidence intervals of each estimate) and <code>ub</code> (the corresponding upper bounds).
</p>
<p>Alternately, <code>secret_weapon</code> accepts as input a list of model objects that can be tidied by <code><a href="broom.html#topic+tidy">tidy</a></code> (or <code><a href="parameters.html#topic+parameters">parameters</a></code> (with proper formatting)), or a list of such model objects.
</p>


<h3>Value</h3>

<p>The function returns a <code>ggplot</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(dplyr)
library(broom)

# Estimate models across many samples, put results in a tidy data frame
by_clarity &lt;- diamonds %&gt;% group_by(clarity) %&gt;%
 do(tidy(lm(price ~ carat + cut + color, data = .))) %&gt;%
 ungroup %&gt;% rename(model = clarity)

# Generate a 'secret weapon' plot of the results of diamond size
secret_weapon(by_clarity, "carat")


</code></pre>

<hr>
<h2 id='small_multiple'>Generate a 'Small Multiple' Plot of Regression Results</h2><span id='topic+small_multiple'></span>

<h3>Description</h3>

<p><code>small_multiple</code> is a function for plotting regression results of multiple models as a 'small multiple' plot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>small_multiple(
  x,
  ci = 0.95,
  margins = FALSE,
  dodge_size = 0.4,
  show_intercept = FALSE,
  show_stats = FALSE,
  stats_tb = NULL,
  stats_digits = 3,
  stats_compare = FALSE,
  stats_size = 10,
  stats_padding = unit(c(4, 4), "mm"),
  stats_layout = c(2, -1, 1),
  model_order = NULL,
  submodel_order = NULL,
  axis_switch = FALSE,
  by_2sd = FALSE,
  dot_args = list(size = 0.3),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="small_multiple_+3A_x">x</code></td>
<td>
<p>Either a model object to be tidied with <code><a href="broom.html#topic+tidy">tidy</a></code>, or a list of such model objects, or a tidy data frame of regression results (see 'Details').</p>
</td></tr>
<tr><td><code id="small_multiple_+3A_ci">ci</code></td>
<td>
<p>A number indicating the level of confidence intervals; the default is .95.</p>
</td></tr>
<tr><td><code id="small_multiple_+3A_margins">margins</code></td>
<td>
<p>[Suspended] A logical value indicating whether presenting the average marginal effects of the estimates. See the Details for more information.</p>
</td></tr>
<tr><td><code id="small_multiple_+3A_dodge_size">dodge_size</code></td>
<td>
<p>A number (typically between 0 and 0.3; the default is .06) indicating how much horizontal separation should appear between different submodels' coefficients when multiple submodels are graphed in a single plot.  Lower values tend to look better when the number of models is small, while a higher value may be helpful when many submodels appear on the same plot.</p>
</td></tr>
<tr><td><code id="small_multiple_+3A_show_intercept">show_intercept</code></td>
<td>
<p>A logical constant indicating whether the coefficient of the intercept term should be plotted.</p>
</td></tr>
<tr><td><code id="small_multiple_+3A_show_stats">show_stats</code></td>
<td>
<p>A logical constant indicating whether to show a table of model fitness statistics under the dot-whisker plot. The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="small_multiple_+3A_stats_tb">stats_tb</code></td>
<td>
<p>Customized table of model fitness. The table should be in a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="small_multiple_+3A_stats_digits">stats_digits</code></td>
<td>
<p>A numeric value specifying the digits to display in the fitness table. This parameter is relevant only when <code>show_stats = TRUE</code>. Default is 3, providing a balance between precision and readability.</p>
</td></tr>
<tr><td><code id="small_multiple_+3A_stats_compare">stats_compare</code></td>
<td>
<p>A logical constant to enable comparison of statistics in the fitness table. Applicable only when <code>show_stats = TRUE</code>. The default value is <code>FALSE</code>. That is, it presents all the statistics across different modeling methods, yet potentially expanding the table's breadth. When set to <code>TRUE</code>, only the shared, comparable statistics are remained.</p>
</td></tr>
<tr><td><code id="small_multiple_+3A_stats_size">stats_size</code></td>
<td>
<p>A numeric value determining the font size in the fitness table, effective only if <code>show_stats = TRUE</code>. The standard setting is 10.</p>
</td></tr>
<tr><td><code id="small_multiple_+3A_stats_padding">stats_padding</code></td>
<td>
<p>Defining the internal margins of the fitness table. Relevant when <code>show_stats = TRUE</code>. Set by default to <code>unit(c(4, 4), "mm")</code>, allowing for a balanced layout. Further customization options refer to <code><a href="gridExtra.html#topic+tableGrob">tableGrob</a></code>.</p>
</td></tr>
<tr><td><code id="small_multiple_+3A_stats_layout">stats_layout</code></td>
<td>
<p>Adjusting the spacing between the dotwhisker plot and the fitness table. Effective when <code>show_stats = TRUE</code>. The initial configuration is <code>c(2, -1, 1)</code>, ensuring a coherent visual flow. Additional layout settings refer to <code><a href="patchwork.html#topic+plot_layout">plot_layout</a></code>.</p>
</td></tr>
<tr><td><code id="small_multiple_+3A_model_order">model_order</code></td>
<td>
<p>A character vector defining the order of the models when multiple models are involved.</p>
</td></tr>
<tr><td><code id="small_multiple_+3A_submodel_order">submodel_order</code></td>
<td>
<p>A character vector defining the order of the submodels when multiple submodels are involved.</p>
</td></tr>
<tr><td><code id="small_multiple_+3A_axis_switch">axis_switch</code></td>
<td>
<p>A logical constant indicating the position of variable labels and y axis ticks. Default is FALSE, when the variable label is on the right side, and y axis ticks is on the left size.</p>
</td></tr>
<tr><td><code id="small_multiple_+3A_by_2sd">by_2sd</code></td>
<td>
<p>When x is model object or list of model objects, should the coefficients for predictors that are not binary be rescaled by twice the standard deviation of these variables in the dataset analyzed, per Gelman (2008)?  Defaults to <code>TRUE</code>.  Note that when x is a tidy data frame, one can use <code><a href="#topic+by_2sd">by_2sd</a></code> to rescale similarly.</p>
</td></tr>
<tr><td><code id="small_multiple_+3A_dot_args">dot_args</code></td>
<td>
<p>A list of arguments specifying the appearance of the dots representing mean estimates.  For supported arguments, see <code><a href="ggstance.html#topic+geom_pointrangeh">geom_pointrangeh</a></code>.</p>
</td></tr>
<tr><td><code id="small_multiple_+3A_...">...</code></td>
<td>
<p>Arguments to pass to <code><a href="#topic+dwplot">dwplot</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>small_multiple</code>, following <a href="https://www.cambridge.org/core/journals/perspectives-on-politics/article/using-graphs-instead-of-tables-in-political-science/9FD63E9EE686AF046732191EE8A68034">Kastellec and Leoni (2007)</a>, provides a compact means of representing numerous regression models in a single plot.
</p>
<p>Tidy data frames to be plotted should include the variables <code>term</code> (names of predictors), <code>estimate</code> (corresponding estimates of coefficients or other quantities of interest), <code>std.error</code> (corresponding standard errors), and <code>model</code> (identifying the corresponding model).
In place of <code>std.error</code> one may substitute <code>conf.low</code> (the lower bounds of the confidence intervals of each estimate) and <code>conf.high</code> (the corresponding upper bounds).
</p>
<p>Alternately, <code>small_multiple</code> accepts as input a list of model objects that can be tidied by <code><a href="broom.html#topic+tidy">tidy</a></code> (or <code><a href="parameters.html#topic+parameters">parameters</a></code> (with proper formatting)), or a list of such model objects.
</p>
<p>Optionally, more than one set of results can be clustered to facilitate comparison within each <code>model</code>; one example of when this may be desirable is to compare results across samples.  In that case, the data frame should also include a variable <code>submodel</code> identifying the submodel of the results.
</p>
<p>To minimize the need for lengthy, distracting regression tables (often relegated to an appendix for dot-whisker plot users), <code>dwplot</code> incorporates optimal model fit statistics directly beneath the dot-whisker plots. These statistics are derived using the excellent <code><a href="performance.html#topic+performance">performance</a></code> functions and integrated at the plot's base via <code><a href="patchwork.html#topic+patchwork">patchwork</a></code> and <code><a href="gridExtra.html#topic+tableGrob">tableGrob</a></code> functions. For added flexibility, <code>dwplot</code> includes the <code>stats_tb</code> feature, allowing users to input customized statistics. Furthermore, a suite of <code>stats_*</code> functions is available for fine-tuning the presentation of these statistics, enhancing user control over the visual output.
</p>


<h3>Value</h3>

<p>The function returns a <code>ggplot</code> object.
</p>


<h3>References</h3>

<p>Kastellec, Jonathan P. and Leoni, Eduardo L. 2007. &quot;Using Graphs Instead of Tables in Political Science.&quot; *Perspectives on Politics*, 5(4):755-771.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(broom)
library(dplyr)

# Generate a tidy data frame of regression results from six models

m &lt;- list()
ordered_vars &lt;- c("wt", "cyl", "disp", "hp", "gear", "am")
m[[1]] &lt;- lm(mpg ~ wt, data = mtcars)
m123456_df &lt;- m[[1]] %&gt;% tidy %&gt;% by_2sd(mtcars) %&gt;%
  mutate(model = "Model 1")

for (i in 2:6) {
 m[[i]] &lt;- update(m[[i-1]], paste(". ~ . +", ordered_vars[i]))
 m123456_df &lt;- rbind(m123456_df, m[[i]] %&gt;% tidy %&gt;% by_2sd(mtcars) %&gt;%
   mutate(model = paste("Model", i)))
}

# Generate a 'small multiple' plot
small_multiple(m123456_df)


## Using submodels to compare results across different samples
# Generate a tidy data frame of regression results from five models on
# the mtcars data subset by transmission type (am)
ordered_vars &lt;- c("wt", "cyl", "disp", "hp", "gear")
mod &lt;- "mpg ~ wt"
by_trans &lt;- mtcars %&gt;% group_by(am) %&gt;%  # group data by transmission
  do(tidy(lm(mod, data = .))) %&gt;%        # run model on each group
  rename(submodel = am) %&gt;%              # make submodel variable
  mutate(model = "Model 1") %&gt;%          # make model variable
 ungroup()

for (i in 2:5) {
   mod &lt;- paste(mod, "+", ordered_vars[i])
   by_trans &lt;- rbind(by_trans, mtcars %&gt;% group_by(am) %&gt;%
                         do(tidy(lm(mod, data = .))) %&gt;%
                         rename(submodel = am) %&gt;%
                         mutate(model = paste("Model", i)) %&gt;%
                         ungroup())
}

small_multiple(by_trans) +
theme_bw() + ylab("Coefficient Estimate") +
    geom_hline(yintercept = 0, colour = "grey60", linetype = 2) +
    theme(axis.text.x  = element_text(angle = 45, hjust = 1),
          legend.position=c(0, 0), legend.justification=c(0, 0),
          legend.title = element_text(size=9),
          legend.background = element_rect(color="gray90"),
          legend.spacing = unit(-3, "pt"),
          legend.key.size = unit(10, "pt")) +
    scale_colour_hue(name = "Transmission",
    breaks = c(0, 1),
    labels = c("Automatic", "Manual"))

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
