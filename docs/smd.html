<!DOCTYPE html><html><head><title>Help for package smd</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {smd}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#check_for_two_levels'><p>Checks whether a vector has more than two unique values</p></a></li>
<li><a href='#compute_smd'><p>Compute the standardized mean difference</p></a></li>
<li><a href='#compute_smd_parts'><p>Compute components of SMD</p></a></li>
<li><a href='#compute_smd_var'><p>Computes SMD variance</p></a></li>
<li><a href='#lapplyFUNpairwise'><p>Apply a function pairwise along a list</p></a></li>
<li><a href='#n_mean_var'><p>Compute n, mean and variance</p></a></li>
<li><a href='#smd'><p>Compute Standardized Mean Difference</p></a></li>
<li><a href='#smd_tidier'><p>Helper to clean up smd output</p></a></li>
<li><a href='#variance_computations'><p>Variance computations</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Compute Standardized Mean Differences</td>
</tr>
<tr>
<td>Version:</td>
<td>0.6.6</td>
</tr>
<tr>
<td>Description:</td>
<td>Computes standardized mean differences and confidence intervals for 
    multiple data types based on Yang, D., &amp; Dalton, J. E. (2012) 
    <a href="http://www.lerner.ccf.org/qhs/software/lib/stddiff.pdf">http://www.lerner.ccf.org/qhs/software/lib/stddiff.pdf</a>. </td>
</tr>
<tr>
<td>Imports:</td>
<td>MASS (&ge; 7.3-50), methods (&ge; 3.5.1)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, stddiff, tableone, knitr, dplyr, purrr, markdown,
rmarkdown</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.novisci.com/smd/">https://docs.novisci.com/smd/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://gitlab.novisci.com/nsstat/smd/issues">https://gitlab.novisci.com/nsstat/smd/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-10-13 20:13:52 UTC; bsaul</td>
</tr>
<tr>
<td>Author:</td>
<td>Bradley Saul [aut, cre],
  Alex Breskin [ctb],
  Catie Wiener [ctb],
  Matt Phelan [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Bradley Saul &lt;bsaul@novisci.com&gt;</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-10-22 09:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='check_for_two_levels'>Checks whether a vector has more than two unique values</h2><span id='topic+check_for_two_levels'></span>

<h3>Description</h3>

<p>Checks whether a vector has more than two unique values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_for_two_levels(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_for_two_levels_+3A_x">x</code></td>
<td>
<p>a vector</p>
</td></tr>
</table>

<hr>
<h2 id='compute_smd'>Compute the standardized mean difference</h2><span id='topic+compute_smd'></span><span id='topic+compute_smd_pairwise'></span>

<h3>Description</h3>

<p>This function is for internal package use only. See <code><a href="#topic+smd">smd</a></code> for usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_smd_pairwise(smd_parts)

compute_smd(D, S)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_smd_+3A_smd_parts">smd_parts</code></td>
<td>
<p>a <code>list</code> of components for from <code><a href="#topic+compute_smd_parts">compute_smd_parts</a></code>
computing standardized mean differences</p>
</td></tr>
<tr><td><code id="compute_smd_+3A_d">D</code></td>
<td>
<p>vector of differences for each level of a factor (will be length 1 for numeric values)</p>
</td></tr>
<tr><td><code id="compute_smd_+3A_s">S</code></td>
<td>
<p>the covariance matrix</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Computes:
</p>
<p style="text-align: center;"><code class="reqn">
 d = \sqrt{D' S^{-1} D}
</code>
</p>

<p>where <code class="reqn">D</code> is a vector of differences between group 1 and 2 and <code class="reqn">S</code> is
the covariance matrix of these differences. If <code class="reqn">D</code> is length 1, the result
is multplied by <code class="reqn">sign(D)</code>.
</p>
<p>In the case of a <code>numeric</code> or <code>integer</code> variable, this is equivalent
to:
</p>
<p style="text-align: center;"><code class="reqn">
  d = \frac{\bar{x}_1 - \bar{x}_2}{\sqrt{(s^2_1 + s^2_2)/2}}
</code>
</p>

<p>where <code class="reqn">\bar{x}_g</code> is the sample mean for group <code class="reqn">g</code> and <code class="reqn">s^2_g</code>
is the sample variance.
</p>
<p>For a <code>logical</code> or <code>factor</code> with only two levels, the equation above is
<code class="reqn">\bar{x}_g = \hat{p}_g</code>, i.e. the sample proportion and <code class="reqn">s^2_g = \hat{p}_g(1 - \hat{p}_g)</code>
(NOTE: interally <code>smd</code> uses the <code><a href="stats.html#topic+var">var</a></code> function, which
uses <code class="reqn">n-1</code> as the denominator. Hence, in small samples, <code class="reqn">s^2_g</code> will
not be precisely <code class="reqn">\hat{p}_g(1 - \hat{p}_g)</code>).
</p>


<h3>Value</h3>

<p>a single numeric value
</p>


<h3>References</h3>

<p>Yang, D., &amp; Dalton, J. E. (2012, April). A unified approach to measuring
the effect size between two groups using SASÂ®. In SAS Global Forum (Vol. 335, pp. 1-6)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+smd">smd</a></code>
</p>

<hr>
<h2 id='compute_smd_parts'>Compute components of SMD</h2><span id='topic+compute_smd_parts'></span>

<h3>Description</h3>

<p>Computes <code>D</code> and <code>S</code> for use within <a href="#topic+compute_smd">compute_smd</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_smd_parts(.x, .g, .w, .na, .ref, applyFUN = n_mean_var)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_smd_parts_+3A_.x">.x</code></td>
<td>
<p>a vector of values</p>
</td></tr>
<tr><td><code id="compute_smd_parts_+3A_.g">.g</code></td>
<td>
<p>a vector of groupings to compare</p>
</td></tr>
<tr><td><code id="compute_smd_parts_+3A_.w">.w</code></td>
<td>
<p>a vector of weights (optional)</p>
</td></tr>
<tr><td><code id="compute_smd_parts_+3A_.na">.na</code></td>
<td>
<p><code>TRUE/FALSE</code>. <code>NA</code> handling</p>
</td></tr>
<tr><td><code id="compute_smd_parts_+3A_.ref">.ref</code></td>
<td>
<p>integer position of the reference group</p>
</td></tr>
<tr><td><code id="compute_smd_parts_+3A_applyfun">applyFUN</code></td>
<td>
<p>the <code>FUN</code> used to compute the SMD parts. Defaults to
<code><a href="#topic+n_mean_var">n_mean_var</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='compute_smd_var'>Computes SMD variance</h2><span id='topic+compute_smd_var'></span>

<h3>Description</h3>

<p>Calculates the variance of a standardized mean difference using the method of
Hedges and Olkin (1985):
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_smd_var(d, smd_parts)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_smd_var_+3A_d">d</code></td>
<td>
<p>an SMD value</p>
</td></tr>
<tr><td><code id="compute_smd_var_+3A_smd_parts">smd_parts</code></td>
<td>
<p>a <code>list</code> of components for from <code><a href="#topic+compute_smd_parts">compute_smd_parts</a></code>
computing standardized mean differences</p>
</td></tr>
</table>


<h3>Details</h3>

<p style="text-align: center;"><code class="reqn">
\sqrt{\frac{n_1 + n_2}{n_1n_2} + \frac{d^2}{2(n_1 + n_2)}}
</code>
</p>


<hr>
<h2 id='lapplyFUNpairwise'>Apply a function pairwise along a list</h2><span id='topic+lapplyFUNpairwise'></span>

<h3>Description</h3>

<p>Applies a function <code>f(ref, y)</code> where <code>y</code> is an element of a list and
<code>ref</code> is a reference element.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lapplyFUNpairwise(x, f, ref)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lapplyFUNpairwise_+3A_x">x</code></td>
<td>
<p>a list</p>
</td></tr>
<tr><td><code id="lapplyFUNpairwise_+3A_f">f</code></td>
<td>
<p>the function to apply</p>
</td></tr>
<tr><td><code id="lapplyFUNpairwise_+3A_ref">ref</code></td>
<td>
<p>the index of the reference element</p>
</td></tr>
</table>

<hr>
<h2 id='n_mean_var'>Compute n, mean and variance</h2><span id='topic+n_mean_var'></span><span id='topic+n_mean_var+2Cnumeric+2Cmissing-method'></span><span id='topic+n_mean_var+2Cnumeric+2Cnumeric-method'></span><span id='topic+n_mean_var+2Cinteger+2Cmissing-method'></span><span id='topic+n_mean_var+2Cinteger+2Cnumeric-method'></span><span id='topic+n_mean_var+2Clogical+2Cmissing-method'></span><span id='topic+n_mean_var+2Clogical+2Cnumeric-method'></span><span id='topic+n_mean_var+2Cfactor+2Cmissing-method'></span><span id='topic+n_mean_var+2Cfactor+2Cnumeric-method'></span><span id='topic+n_mean_var+2Ccharacter+2Cmissing-method'></span><span id='topic+n_mean_var+2Ccharacter+2Cnumeric-method'></span>

<h3>Description</h3>

<p>Available for <code>numeric</code>, <code>integer</code>, and <code>factor</code> objects.
<code>character</code> objects are handled by first converting to a factor.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>n_mean_var(x, w = NULL, na.rm = FALSE)

## S4 method for signature 'numeric,missing'
n_mean_var(x, w = NULL, na.rm = FALSE)

## S4 method for signature 'numeric,numeric'
n_mean_var(x, w = NULL, na.rm = FALSE)

## S4 method for signature 'integer,missing'
n_mean_var(x, w = NULL, na.rm = FALSE)

## S4 method for signature 'integer,numeric'
n_mean_var(x, w = NULL, na.rm = FALSE)

## S4 method for signature 'logical,missing'
n_mean_var(x, na.rm = FALSE)

## S4 method for signature 'logical,numeric'
n_mean_var(x, w = NULL, na.rm = FALSE)

## S4 method for signature 'factor,missing'
n_mean_var(x, w = NULL, na.rm = FALSE)

## S4 method for signature 'factor,numeric'
n_mean_var(x, w = NULL, na.rm = FALSE)

## S4 method for signature 'character,missing'
n_mean_var(x, w = NULL, na.rm = FALSE)

## S4 method for signature 'character,numeric'
n_mean_var(x, w = NULL, na.rm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="n_mean_var_+3A_x">x</code></td>
<td>
<p>a vector of values</p>
</td></tr>
<tr><td><code id="n_mean_var_+3A_w">w</code></td>
<td>
<p>an optional vector of <code>numeric</code> weights</p>
</td></tr>
<tr><td><code id="n_mean_var_+3A_na.rm">na.rm</code></td>
<td>
<p>passed to <code>sum</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing <code>mean</code> and <code>var</code>
</p>

<hr>
<h2 id='smd'>Compute Standardized Mean Difference</h2><span id='topic+smd'></span><span id='topic+smd+2Ccharacter+2CANY+2Cmissing-method'></span><span id='topic+smd+2Ccharacter+2CANY+2Cnumeric-method'></span><span id='topic+smd+2Clogical+2CANY+2Cmissing-method'></span><span id='topic+smd+2Clogical+2CANY+2Cnumeric-method'></span><span id='topic+smd+2Cmatrix+2CANY+2Cmissing-method'></span><span id='topic+smd+2Cmatrix+2CANY+2Cnumeric-method'></span><span id='topic+smd+2Clist+2CANY+2Cmissing-method'></span><span id='topic+smd+2Clist+2CANY+2Cnumeric-method'></span><span id='topic+smd+2Cdata.frame+2CANY+2Cmissing-method'></span><span id='topic+smd+2Cdata.frame+2CANY+2Cnumeric-method'></span>

<h3>Description</h3>

<p>Computes the standardized mean differnce (SMD) between two groups.
</p>
<p style="text-align: center;"><code class="reqn">
 d = \sqrt{D' S^{-1} D}
</code>
</p>

<p>where <code class="reqn">D</code> is a vector of differences between group 1 and 2 and <code class="reqn">S</code> is
the covariance matrix of these differences. If <code class="reqn">D</code> is length 1, the result
is multplied by <code class="reqn">sign(D)</code>.
</p>
<p>In the case of a <code>numeric</code> or <code>integer</code> variable, this is equivalent
to:
</p>
<p style="text-align: center;"><code class="reqn">
  d = \frac{\bar{x}_1 - \bar{x}_2}{\sqrt{(s^2_1 + s^2_2)/2}}
</code>
</p>

<p>where <code class="reqn">\bar{x}_g</code> is the sample mean for group <code class="reqn">g</code> and <code class="reqn">s^2_g</code> is
the sample variance.
</p>
<p>For a <code>logical</code> or <code>factor</code> with only two levels, the equation above is
<code class="reqn">\bar{x}_g = \hat{p}_g</code>, i.e. the sample proportion and <code class="reqn">s^2_g = \hat{p}_g(1 - \hat{p}_g)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L)

## S4 method for signature 'character,ANY,missing'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L)

## S4 method for signature 'character,ANY,numeric'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L)

## S4 method for signature 'logical,ANY,missing'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L)

## S4 method for signature 'logical,ANY,numeric'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L)

## S4 method for signature 'matrix,ANY,missing'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L)

## S4 method for signature 'matrix,ANY,numeric'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L)

## S4 method for signature 'list,ANY,missing'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L)

## S4 method for signature 'list,ANY,numeric'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L)

## S4 method for signature 'data.frame,ANY,missing'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L)

## S4 method for signature 'data.frame,ANY,numeric'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="smd_+3A_x">x</code></td>
<td>
<p>a <code>vector</code> or <code>matrix</code> of values</p>
</td></tr>
<tr><td><code id="smd_+3A_g">g</code></td>
<td>
<p>a vector of at least 2 groups to compare. This should coercable to a
<code>factor</code>.</p>
</td></tr>
<tr><td><code id="smd_+3A_w">w</code></td>
<td>
<p>a vector of <code>numeric</code> weights (optional)</p>
</td></tr>
<tr><td><code id="smd_+3A_std.error">std.error</code></td>
<td>
<p>Logical indicator for computing standard errors using
<code><a href="#topic+compute_smd_var">compute_smd_var</a></code>. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="smd_+3A_na.rm">na.rm</code></td>
<td>
<p>Remove <code>NA</code> values from <code>x</code>? Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="smd_+3A_gref">gref</code></td>
<td>
<p>an integer indicating which level of <code>g</code> to use as the reference
group. Defaults to <code>1</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>data.frame</code> containing standardized mean differences between
levels of <code>g</code> for values of <code>x</code>. The <code>data.frame</code> contains
the columns:
</p>

<ul>
<li> <p><code>term</code>: the level being comparing to the reference level
</p>
</li>
<li> <p><code>estimate</code>: SMD estimates
</p>
</li>
<li> <p><code>std.error</code>: (if <code>std.error = TRUE</code>) SMD standard error estimates
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- rnorm(100)
g &lt;- rep(1:2, each = 50)
smd(x, g)
</code></pre>

<hr>
<h2 id='smd_tidier'>Helper to clean up smd output</h2><span id='topic+smd_tidier'></span><span id='topic+tidy_smd_singlevar'></span><span id='topic+tidy_smd_multiplevar'></span>

<h3>Description</h3>

<p>Helper to clean up smd output
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidy_smd_singlevar(smd_res)

tidy_smd_multiplevar(smd_res)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="smd_tidier_+3A_smd_res">smd_res</code></td>
<td>
<p>a result of <a href="#topic+smd">smd</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>data.frame</code>
</p>

<hr>
<h2 id='variance_computations'>Variance computations</h2><span id='topic+variance_computations'></span><span id='topic+multinom_var'></span>

<h3>Description</h3>

<p>Variance computations
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multinom_var(p)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="variance_computations_+3A_p">p</code></td>
<td>
<p>a vector of proportions corresponding to the proportion in each group</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a covariance matrix
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
