<!DOCTYPE html><html lang="en"><head><title>Help for package jsonify</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {jsonify}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#as.json'><p>Coerce string to JSON</p></a></li>
<li><a href='#from_json'><p>From JSON</p></a></li>
<li><a href='#from_ndjson'><p>from ndjson</p></a></li>
<li><a href='#minify_json'><p>Minify Json</p></a></li>
<li><a href='#pretty_json'><p>Pretty Json</p></a></li>
<li><a href='#to_json'><p>To JSON</p></a></li>
<li><a href='#to_ndjson'><p>To ndjson</p></a></li>
<li><a href='#validate_json'><p>validate JSON</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Convert Between 'R' Objects and Javascript Object Notation
(JSON)</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-11-10</td>
</tr>
<tr>
<td>Description:</td>
<td>Conversions between 'R' objects and Javascript Object Notation (JSON) using 
    the 'rapidjsonr' library <a href="https://CRAN.R-project.org/package=rapidjsonr">https://CRAN.R-project.org/package=rapidjsonr</a>. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.3.0)</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>C++11</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.12.18)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>rapidjsonr (&ge; 1.2.0), Rcpp</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, testthat, knitr, rmarkdown</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-11-09 21:45:14 UTC; david</td>
</tr>
<tr>
<td>Author:</td>
<td>David Cooley [aut, cre],
  Chris Muir [ctb],
  Brendan Knapp <a href="https://orcid.org/0000-0003-3284-4972"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David Cooley &lt;dcooley@symbolix.com.au&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-11-09 22:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='as.json'>Coerce string to JSON</h2><span id='topic+as.json'></span>

<h3>Description</h3>

<p>Coerce string to JSON
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.json(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.json_+3A_x">x</code></td>
<td>
<p>string to coerce to JSON</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
js &lt;- '{"x":1,"y":2}'
as.json(js)

</code></pre>

<hr>
<h2 id='from_json'>From JSON</h2><span id='topic+from_json'></span>

<h3>Description</h3>

<p>Converts JSON to an R object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>from_json(json, simplify = TRUE, fill_na = FALSE, buffer_size = 1024)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="from_json_+3A_json">json</code></td>
<td>
<p>JSON to convert to R object. Can be a string, url or link to a file.</p>
</td></tr>
<tr><td><code id="from_json_+3A_simplify">simplify</code></td>
<td>
<p>logical, if <code>TRUE</code>, coerces JSON to the simplest R object possible. See Details</p>
</td></tr>
<tr><td><code id="from_json_+3A_fill_na">fill_na</code></td>
<td>
<p>logical, if <code>TRUE</code> and <code>simplify</code> is <code>TRUE</code>, 
data.frames will be na-filled if there are missing JSON keys.
Ignored if <code>simplify</code> is <code>FALSE</code>. See details and examples.</p>
</td></tr>
<tr><td><code id="from_json_+3A_buffer_size">buffer_size</code></td>
<td>
<p>size of buffer used when reading a file from disk. Defaults to 1024</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When <code>simplify = TRUE</code>
</p>

<ul>
<li><p>single arrays are coerced to vectors
</p>
</li>
<li><p>array of arrays (all the same length) are coerced to matrices
</p>
</li>
<li><p>objects with the same keys are coerced to data.frames
</p>
</li></ul>

<p>When <code>simplify = TRUE</code> and <code>fill_na = TRUE</code>
</p>

<ul>
<li><p>objects are coerced to data.frames, and any missing values are filled with NAs
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
from_json('{"a":[1, 2, 3]}')
from_json('{"a":8, "b":99.5, "c":true, "d":"cats", "e":[1, "cats", 3]}')
from_json('{"a":8, "b":{"c":123, "d":{"e":456}}}')

lst &lt;- list("a" = 5L, "b" = 1.43, "c" = "cats", "d" = FALSE)
js &lt;- jsonify::to_json(lst, unbox = TRUE)
from_json( js )

## Return a data frame
from_json('[{"id":1,"val":"a"},{"id":2,"val":"b"}]')

## Return a data frame with a list column
from_json('[{"id":1,"val":"a"},{"id":2,"val":["b","c"]}]')

## Without simplifying to a data.frame
from_json('[{"id":1,"val":"a"},{"id":2,"val":["b","c"]}]', simplify = FALSE )

## Missing JSON keys 
from_json('[{"x":1},{"x":2,"y":"hello"}]')

## Missing JSON keys - filling with NAs
from_json('[{"x":1},{"x":2,"y":"hello"}]', fill_na = TRUE )

## Duplicate object keys
from_json('[{"x":1,"x":"a"},{"x":2,"x":"b"}]')

from_json('[{"id":1,"val":"a","val":1},{"id":2,"val":"b"}]', fill_na = TRUE )


</code></pre>

<hr>
<h2 id='from_ndjson'>from ndjson</h2><span id='topic+from_ndjson'></span>

<h3>Description</h3>

<p>Converts ndjson into R objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>from_ndjson(ndjson, simplify = TRUE, fill_na = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="from_ndjson_+3A_ndjson">ndjson</code></td>
<td>
<p>new-line delimited JSON to convert to R object. Can be a string, url or link to a file.</p>
</td></tr>
<tr><td><code id="from_ndjson_+3A_simplify">simplify</code></td>
<td>
<p>logical, if <code>TRUE</code>, coerces JSON to the simplest R object possible. See Details</p>
</td></tr>
<tr><td><code id="from_ndjson_+3A_fill_na">fill_na</code></td>
<td>
<p>logical, if <code>TRUE</code> and <code>simplify</code> is <code>TRUE</code>, 
data.frames will be na-filled if there are missing JSON keys.
Ignored if <code>simplify</code> is <code>FALSE</code>. See details and examples.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
js &lt;- to_ndjson( data.frame( x = 1:5, y = 6:10 ) )
from_ndjson( js )


</code></pre>

<hr>
<h2 id='minify_json'>Minify Json</h2><span id='topic+minify_json'></span>

<h3>Description</h3>

<p>Removes indentiation from a JSON string
</p>


<h3>Usage</h3>

<pre><code class='language-R'>minify_json(json, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="minify_json_+3A_json">json</code></td>
<td>
<p>string of JSON</p>
</td></tr>
<tr><td><code id="minify_json_+3A_...">...</code></td>
<td>
<p>other argments passed to <a href="#topic+to_json">to_json</a></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
df &lt;- data.frame(id = 1:10, val = rnorm(10))
js &lt;- to_json( df )
jsp &lt;- pretty_json(js)
minify_json( jsp )

</code></pre>

<hr>
<h2 id='pretty_json'>Pretty Json</h2><span id='topic+pretty_json'></span>

<h3>Description</h3>

<p>Adds indentiation to a JSON string
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pretty_json(json, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pretty_json_+3A_json">json</code></td>
<td>
<p>string of JSON</p>
</td></tr>
<tr><td><code id="pretty_json_+3A_...">...</code></td>
<td>
<p>other argments passed to <a href="#topic+to_json">to_json</a></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
df &lt;- data.frame(id = 1:10, val = rnorm(10))
js &lt;- to_json( df )
pretty_json(js)

## can also use directly on an R object
pretty_json( df )

</code></pre>

<hr>
<h2 id='to_json'>To JSON</h2><span id='topic+to_json'></span>

<h3>Description</h3>

<p>Converts R objects to JSON
</p>


<h3>Usage</h3>

<pre><code class='language-R'>to_json(
  x,
  unbox = FALSE,
  digits = NULL,
  numeric_dates = TRUE,
  factors_as_string = TRUE,
  by = "row"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="to_json_+3A_x">x</code></td>
<td>
<p>object to convert to JSON</p>
</td></tr>
<tr><td><code id="to_json_+3A_unbox">unbox</code></td>
<td>
<p>logical indicating if single-value arrays should be 'unboxed', 
that is, not contained inside an array.</p>
</td></tr>
<tr><td><code id="to_json_+3A_digits">digits</code></td>
<td>
<p>integer specifying the number of decimal places to round numerics.
Default is <code>NULL</code> - no rounding</p>
</td></tr>
<tr><td><code id="to_json_+3A_numeric_dates">numeric_dates</code></td>
<td>
<p>logical indicating if dates should be treated as numerics. 
Defaults to TRUE for speed. If FALSE, the dates will be coerced to character in UTC time zone</p>
</td></tr>
<tr><td><code id="to_json_+3A_factors_as_string">factors_as_string</code></td>
<td>
<p>logical indicating if factors should be treated as strings. Defaults to TRUE.</p>
</td></tr>
<tr><td><code id="to_json_+3A_by">by</code></td>
<td>
<p>either &quot;row&quot; or &quot;column&quot; indicating if data.frames and matrices should be processed
row-wise or column-wise. Defaults to &quot;row&quot;</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
to_json(1:3)
to_json(letters[1:3])

## factors treated as strings
to_json(data.frame(x = 1:3, y = letters[1:3], stringsAsFactors = TRUE ))
to_json(data.frame(x = 1:3, y = letters[1:3], stringsAsFactors = FALSE ))

to_json(list(x = 1:3, y = list(z = letters[1:3])))
to_json(seq(as.Date("2018-01-01"), as.Date("2018-01-05"), length.out = 5))
to_json(seq(as.Date("2018-01-01"), as.Date("2018-01-05"), length.out = 5), numeric_dates = FALSE)

psx &lt;- seq(
  as.POSIXct("2018-01-01", tz = "Australia/Melbourne"), 
  as.POSIXct("2018-02-01", tz = "Australia/Melbourne"), 
  length.out = 5
  )
to_json(psx)
to_json(psx, numeric_dates = FALSE)

## unbox single-value arrays
to_json(list(x = 1), unbox = TRUE)
to_json(list(x = 1, y = c("a"), z = list(x = 2, y = c("b"))), unbox = TRUE)

## rounding numbers using the digits argument
to_json(1.23456789, digits = 2)
df &lt;- data.frame(x = 1L:3L, y = rnorm(3), z = letters[1:3], stringsAsFactors = TRUE )
to_json(df, digits = 0 )

## keeping factors
to_json(df, digits = 2, factors_as_string = FALSE )


</code></pre>

<hr>
<h2 id='to_ndjson'>To ndjson</h2><span id='topic+to_ndjson'></span>

<h3>Description</h3>

<p>Converts R objects to ndjson
</p>


<h3>Usage</h3>

<pre><code class='language-R'>to_ndjson(
  x,
  unbox = FALSE,
  digits = NULL,
  numeric_dates = TRUE,
  factors_as_string = TRUE,
  by = "row"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="to_ndjson_+3A_x">x</code></td>
<td>
<p>object to convert to JSON</p>
</td></tr>
<tr><td><code id="to_ndjson_+3A_unbox">unbox</code></td>
<td>
<p>logical indicating if single-value arrays should be 'unboxed', 
that is, not contained inside an array.</p>
</td></tr>
<tr><td><code id="to_ndjson_+3A_digits">digits</code></td>
<td>
<p>integer specifying the number of decimal places to round numerics.
Default is <code>NULL</code> - no rounding</p>
</td></tr>
<tr><td><code id="to_ndjson_+3A_numeric_dates">numeric_dates</code></td>
<td>
<p>logical indicating if dates should be treated as numerics. 
Defaults to TRUE for speed. If FALSE, the dates will be coerced to character in UTC time zone</p>
</td></tr>
<tr><td><code id="to_ndjson_+3A_factors_as_string">factors_as_string</code></td>
<td>
<p>logical indicating if factors should be treated as strings. Defaults to TRUE.</p>
</td></tr>
<tr><td><code id="to_ndjson_+3A_by">by</code></td>
<td>
<p>either &quot;row&quot; or &quot;column&quot; indicating if data.frames and matrices should be processed
row-wise or column-wise. Defaults to &quot;row&quot;</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Lists are converted to ndjson non-recursively. That is, each of the objects
in the list at the top level are converted to a new-line JSON object. Any nested
sub-elements are then contained within that JSON object. See examples
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
to_ndjson( 1:5 )
to_ndjson( letters )

mat &lt;- matrix(1:6, ncol = 2)

to_ndjson( x = mat )
to_ndjson( x = mat, by = "col" )

df &lt;- data.frame(
  x = 1:5
  , y = letters[1:5]
  , z = as.Date(seq(18262, 18262 + 4, by = 1 ), origin = "1970-01-01" )
  )

to_ndjson( x = df )
to_ndjson( x = df, numeric_dates = FALSE )
to_ndjson( x = df, factors_as_string = FALSE )
to_ndjson( x = df, by = "column" )
to_ndjson( x = df, by = "column", numeric_dates = FALSE )

## Lists are non-recurisve; only elements `x` and `y` are converted to ndjson
lst &lt;- list(
  x = 1:5
  , y = list(
    a = letters[1:5]
    , b = data.frame(i = 10:15, j = 20:25)
  )
)
 
to_ndjson( x = lst )
to_ndjson( x = lst, by = "column")


</code></pre>

<hr>
<h2 id='validate_json'>validate JSON</h2><span id='topic+validate_json'></span>

<h3>Description</h3>

<p>Validates JSON
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_json(json)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="validate_json_+3A_json">json</code></td>
<td>
<p>character or json object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>logical vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
validate_json('[]')
df &lt;- data.frame(id = 1:5, val = letters[1:5])
validate_json( to_json(df) )

validate_json('{"x":1,"y":2,"z":"a"}')

validate_json( c('{"x":1,"y":2,"z":"a"}', to_json(df) ) )
validate_json( c('{"x":1,"y":2,"z":a}', to_json(df) ) )

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
