<!DOCTYPE html><html lang="en"><head><title>Help for package smbinning</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {smbinning}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#smbinning'><p>Optimal Binning for Scoring Modeling</p></a></li>
<li><a href='#smbinning.custom'><p>Customized Binning</p></a></li>
<li><a href='#smbinning.eda'><p>Exploratory Data Analysis (EDA)</p></a></li>
<li><a href='#smbinning.factor'><p>Binning on Factor Variables</p></a></li>
<li><a href='#smbinning.factor.custom'><p>Customized Binning on Factor Variables</p></a></li>
<li><a href='#smbinning.factor.gen'><p>Utility to generate a new characteristic from a factor variable</p></a></li>
<li><a href='#smbinning.gen'><p>Utility to generate a new characteristic from a numeric variable</p></a></li>
<li><a href='#smbinning.logitrank'><p>Logistic Regression Ranking</p></a></li>
<li><a href='#smbinning.metrics'><p>Performance Metrics for a Classification Model</p></a></li>
<li><a href='#smbinning.metrics.plot'><p>Visualization of a Classification Matrix</p></a></li>
<li><a href='#smbinning.monotonic'><p>Monotonic Binning</p></a></li>
<li><a href='#smbinning.plot'><p>Plots after binning</p></a></li>
<li><a href='#smbinning.psi'><p>Population Stability Index</p></a></li>
<li><a href='#smbinning.scaling'><p>Scaling</p></a></li>
<li><a href='#smbinning.scoring.gen'><p>Generation of Score and Its Weights</p></a></li>
<li><a href='#smbinning.scoring.sql'><p>Generation of SQL Code After Scaled Model</p></a></li>
<li><a href='#smbinning.sql'><p>SQL Code</p></a></li>
<li><a href='#smbinning.sumiv'><p>Information Value Summary</p></a></li>
<li><a href='#smbinning.sumiv.plot'><p>Plot Information Value Summary</p></a></li>
<li><a href='#smbsimdf1'><p>Simulated Credit Data</p></a></li>
<li><a href='#smbsimdf2'><p>Monotonic Binning Sample Data</p></a></li>
<li><a href='#smbsimdf3'><p>Monotonic Binning Sample Data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Scoring Modeling and Optimal Binning</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9</td>
</tr>
<tr>
<td>Author:</td>
<td>Herman Jopia</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Herman Jopia &lt;hjopia@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A set of functions to build a scoring model from beginning to end, leading the user
	to follow an efficient and organized development process, reducing significantly the time
	spent on data exploration, variable selection, feature engineering, binning and model selection 
	among other recurrent tasks. 
	The package also incorporates monotonic and customized binning, scaling capabilities that 
	transforms logistic coefficients into points for a better business understanding and 
	calculates and visualizes classic performance metrics of a classification model.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0),sqldf,partykit,Formula</td>
</tr>
<tr>
<td>Imports:</td>
<td>gsubfn</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.1</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-04-01 10:23:23 UTC; hjopi</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-04-01 10:50:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='smbinning'>Optimal Binning for Scoring Modeling</h2><span id='topic+smbinning'></span>

<h3>Description</h3>

<p><strong>Optimal Binning</strong> categorizes a numeric characteristic into bins for ulterior usage in scoring modeling.
This process, also known as <em>supervised discretization</em>, 
utilizes <a href="https://cran.r-project.org/package=partykit">Recursive Partitioning</a> to categorize 
the numeric characteristic.<br />
The especific algorithm is Conditional Inference Trees 
which initially excludes missing values (<code>NA</code>) to compute the cutpoints, adding them back later in the 
process for the calculation of the <em>Information Value</em>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning(df, y, x, p = 0.05)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning_+3A_df">df</code></td>
<td>
<p>A data frame.</p>
</td></tr>
<tr><td><code id="smbinning_+3A_y">y</code></td>
<td>
<p>Binary response variable (0,1). Integer (<code>int</code>) is required.
Name of <code>y</code> must not have a dot. Name &quot;default&quot; is not allowed.</p>
</td></tr>
<tr><td><code id="smbinning_+3A_x">x</code></td>
<td>
<p>Continuous characteristic. At least 5 different values. Value <code>Inf</code> is not allowed.
Name of <code>x</code> must not have a dot.</p>
</td></tr>
<tr><td><code id="smbinning_+3A_p">p</code></td>
<td>
<p>Percentage of records per bin. Default 5% (0.05). 
This parameter only accepts values greater that 0.00 (0%) and lower than 0.50 (50%).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The command <code>smbinning</code> generates and object containing the necessary info and utilities for binning.
The user should save the output result so it can be used 
with <code>smbinning.plot</code>, <code>smbinning.sql</code>, and <code>smbinning.gen</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load library and its dataset
library(smbinning) # Load package and its data

# Example: Optimal binning
result=smbinning(df=smbsimdf1,y="fgood",x="cbs1") # Run and save result
result$ivtable # Tabulation and Information Value
result$iv # Information value
result$bands # Bins or bands
result$ctree # Decision tree
</code></pre>

<hr>
<h2 id='smbinning.custom'>Customized Binning</h2><span id='topic+smbinning.custom'></span>

<h3>Description</h3>

<p>It gives the user the ability to create customized cutpoints.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning.custom(df, y, x, cuts)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.custom_+3A_df">df</code></td>
<td>
<p>A data frame.</p>
</td></tr>
<tr><td><code id="smbinning.custom_+3A_y">y</code></td>
<td>
<p>Binary response variable (0,1). Integer (<code>int</code>) is required.
Name of <code>y</code> must not have a dot. Name &quot;default&quot; is not allowed.</p>
</td></tr>
<tr><td><code id="smbinning.custom_+3A_x">x</code></td>
<td>
<p>Continuous characteristic. At least 5 different values. Value <code>Inf</code> is not allowed. 
Name of <code>x</code> must not have a dot.</p>
</td></tr>
<tr><td><code id="smbinning.custom_+3A_cuts">cuts</code></td>
<td>
<p>Vector with the cutpoints selected by the user. It does not have a default so user must define it.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The command <code>smbinning.custom</code> generates and object containing the necessary info and utilities for binning.
The user should save the output result so it can be used 
with <code>smbinning.plot</code>, <code>smbinning.sql</code>, and <code>smbinning.gen</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load library and its dataset
library(smbinning) # Load package and its data

# Custom cutpoints using percentiles (20% each)
cbs1cuts=as.vector(quantile(smbsimdf1$cbs1, probs=seq(0,1,0.2), na.rm=TRUE)) # Quantiles
cbs1cuts=cbs1cuts[2:(length(cbs1cuts)-1)] # Remove first (min) and last (max) values

# Example: Customized binning
result=smbinning.custom(df=smbsimdf1,y="fgood",x="cbs1",cuts=cbs1cuts) # Run and save
result$ivtable # Tabulation and Information Value
</code></pre>

<hr>
<h2 id='smbinning.eda'>Exploratory Data Analysis (EDA)</h2><span id='topic+smbinning.eda'></span>

<h3>Description</h3>

<p>It shows basic statistics for each characteristic in a data frame.
The report includes:
</p>

<ul>
<li><p> Field: Field name.
</p>
</li>
<li><p> Type: Factor, numeric, integer, other.
</p>
</li>
<li><p> Recs: Number of records.
</p>
</li>
<li><p> Miss: Number of missing records.
</p>
</li>
<li><p> Min: Minimum value.
</p>
</li>
<li><p> Q25: First quartile. It splits off the lowest 25% of data from the highest 75%.
</p>
</li>
<li><p> Q50: Median or second quartile. It cuts data set in half.
</p>
</li>
<li><p> Avg: Average value.
</p>
</li>
<li><p> Q75: Third quartile. It splits off the lowest 75% of data from the highest 25%.
</p>
</li>
<li><p> Max: Maximum value.
</p>
</li>
<li><p> StDv: Standard deviation of a sample.
</p>
</li>
<li><p> Neg: Number of negative values.
</p>
</li>
<li><p> Pos: Number of positive values.
</p>
</li>
<li><p> OutLo: Number of outliers. Records below <code>Q25-1.5*IQR</code>, where <code>IQR=Q75-Q25</code>. 
</p>
</li>
<li><p> OutHi: Number of outliers. Records above <code>Q75+1.5*IQR</code>, where <code>IQR=Q75-Q25</code>.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>smbinning.eda(df, rounding = 3, pbar = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.eda_+3A_df">df</code></td>
<td>
<p>A data frame.</p>
</td></tr>
<tr><td><code id="smbinning.eda_+3A_rounding">rounding</code></td>
<td>
<p>Optional parameter to define the decimal points shown in the output table. Default is 3.</p>
</td></tr>
<tr><td><code id="smbinning.eda_+3A_pbar">pbar</code></td>
<td>
<p>Optional parameter that turns on or off a progress bar. Default value is 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The command <code>smbinning.eda</code> generates two data frames that list each characteristic 
with basic statistics such as extreme values and quartiles;
and also percentages of missing values and outliers, among others.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load library and its dataset
library(smbinning) # Load package and its data

# Example: Exploratory data analysis of dataset
smbinning.eda(smbsimdf1,rounding=3)$eda # Table with basic statistics
smbinning.eda(smbsimdf1,rounding=3)$edapct # Table with basic percentages
</code></pre>

<hr>
<h2 id='smbinning.factor'>Binning on Factor Variables</h2><span id='topic+smbinning.factor'></span>

<h3>Description</h3>

<p>It generates a table with relevant metrics for all the categories of a given factor variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning.factor(df, y, x, maxcat = 10)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.factor_+3A_df">df</code></td>
<td>
<p>A data frame.</p>
</td></tr>
<tr><td><code id="smbinning.factor_+3A_y">y</code></td>
<td>
<p>Binary response variable (0,1). Integer (<code>int</code>) is required.
Name of <code>y</code> must not have a dot.</p>
</td></tr>
<tr><td><code id="smbinning.factor_+3A_x">x</code></td>
<td>
<p>A factor variable with at least 2 different values. Labesl with commas are not allowed.</p>
</td></tr>
<tr><td><code id="smbinning.factor_+3A_maxcat">maxcat</code></td>
<td>
<p>Specifies the maximum number of categories.  Default value is 10.
Name of <code>x</code> must not have a dot.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The command <code>smbinning.factor</code> generates and object containing the necessary info and utilities for binning.
The user should save the output result so it can be used 
with <code>smbinning.plot</code>, <code>smbinning.sql</code>, and <code>smbinning.gen.factor</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load library and its dataset
library(smbinning) # Load package and its data

# Binning a factor variable
result=smbinning.factor(smbsimdf1,x="inc",y="fgood", maxcat=11)
result$ivtable
</code></pre>

<hr>
<h2 id='smbinning.factor.custom'>Customized Binning on Factor Variables</h2><span id='topic+smbinning.factor.custom'></span>

<h3>Description</h3>

<p>It gives the user the ability to combine categories and create new attributes for a given characteristic.
Once these new attribues are created in a list (called <code>groups</code>), the funtion generates a table for 
the uniques values of a given factor variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning.factor.custom(df, y, x, groups)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.factor.custom_+3A_df">df</code></td>
<td>
<p>A data frame.</p>
</td></tr>
<tr><td><code id="smbinning.factor.custom_+3A_y">y</code></td>
<td>
<p>Binary response variable (0,1). Integer (<code>int</code>) is required.
Name of <code>y</code> must not have a dot.</p>
</td></tr>
<tr><td><code id="smbinning.factor.custom_+3A_x">x</code></td>
<td>
<p>A factor variable with at least 2 different values. Value <code>Inf</code> is not allowed.</p>
</td></tr>
<tr><td><code id="smbinning.factor.custom_+3A_groups">groups</code></td>
<td>
<p>Specifies customized groups created by the user.
Name of <code>x</code> must not have a dot.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The command <code>smbinning.factor.custom</code> generates an object containing the necessary information 
and utilities for binning.
The user should save the output result so it can be used 
with <code>smbinning.plot</code>, <code>smbinning.sql</code>, and <code>smbinning.gen.factor</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load library and its dataset
library(smbinning) # Load package and its data

# Example: Customized binning for a factor variable
# Notation: Groups between double quotes
result=smbinning.factor.custom(
  smbsimdf1,x="inc",
  y="fgood",
  c("'W01','W02'",        # Group 1
    "'W03','W04','W05'",  # Group 2
    "'W06','W07'",        # Group 3
    "'W08','W09','W10'")) # Group 4
result$ivtable
</code></pre>

<hr>
<h2 id='smbinning.factor.gen'>Utility to generate a new characteristic from a factor variable</h2><span id='topic+smbinning.factor.gen'></span>

<h3>Description</h3>

<p>It generates a data frame with a new predictive characteristic from a factor variable after applying
<code>smbinning.factor</code> or <code>smbinning.factor.custom</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning.factor.gen(df, ivout, chrname = "NewChar")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.factor.gen_+3A_df">df</code></td>
<td>
<p>Dataset to be updated with the new characteristic.</p>
</td></tr>
<tr><td><code id="smbinning.factor.gen_+3A_ivout">ivout</code></td>
<td>
<p>An object generated after <code>smbinning.factor</code> or <code>smbinning.factor.custom</code>.</p>
</td></tr>
<tr><td><code id="smbinning.factor.gen_+3A_chrname">chrname</code></td>
<td>
<p>Name of the new characteristic.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the binned version of the original characteristic.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load library and its dataset
library(smbinning) # Load package and its data
pop=smbsimdf1 # Set population
train=subset(pop,rnd&lt;=0.7) # Training sample

# Binning a factor variable on training data
result=smbinning.factor(train,x="home",y="fgood")

# Example: Append new binned characteristic to population
pop=smbinning.factor.gen(pop,result,"g1home")

# Split training
train=subset(pop,rnd&lt;=0.7) # Training sample

# Check new field counts
table(train$g1home)
table(pop$g1home)
</code></pre>

<hr>
<h2 id='smbinning.gen'>Utility to generate a new characteristic from a numeric variable</h2><span id='topic+smbinning.gen'></span>

<h3>Description</h3>

<p>It generates a data frame with a new predictive characteristic after applying
<code>smbinning</code> or <code>smbinning.custom</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning.gen(df, ivout, chrname = "NewChar")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.gen_+3A_df">df</code></td>
<td>
<p>Dataset to be updated with the new characteristic.</p>
</td></tr>
<tr><td><code id="smbinning.gen_+3A_ivout">ivout</code></td>
<td>
<p>An object generated after <code>smbinning</code> or <code>smbinning.custom</code>.</p>
</td></tr>
<tr><td><code id="smbinning.gen_+3A_chrname">chrname</code></td>
<td>
<p>Name of the new characteristic.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the binned version of the original characteristic.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load library and its dataset
library(smbinning) # Load package and its data
pop=smbsimdf1 # Set population
train=subset(pop,rnd&lt;=0.7) # Training sample

# Binning application for a numeric variable
result=smbinning(df=train,y="fgood",x="dep") # Run and save result

# Generate a dataset with binned characteristic
pop=smbinning.gen(pop,result,"g1dep")

# Check new field counts
table(pop$g1dep)
</code></pre>

<hr>
<h2 id='smbinning.logitrank'>Logistic Regression Ranking</h2><span id='topic+smbinning.logitrank'></span>

<h3>Description</h3>

<p>It runs all the possible logistic models for a given set of characteristics (<code>chr</code>) and then rank them
from highest to lowest performance based on AIC.
Important Note: This function may take time depending on the datset size and number of variables used in it.
The user should run it at the end of the modeling process once variables have been pre-selected in previous steps.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning.logitrank(y, chr, df)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.logitrank_+3A_y">y</code></td>
<td>
<p>Binary dependent variable.</p>
</td></tr>
<tr><td><code id="smbinning.logitrank_+3A_chr">chr</code></td>
<td>
<p>Vector with the characteristics (independent variables).</p>
</td></tr>
<tr><td><code id="smbinning.logitrank_+3A_df">df</code></td>
<td>
<p>Data frame.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The command <code>smbinning.logitrank</code> returns a table with the combination of characteristics 
and their corresponding AIC and deviance. The table is ordered by AIC from lowest (best) to highest.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load library and its dataset
library(smbinning) # Load package and its data

# Example: Best combination of characteristics
smbinning.logitrank(y="fgood",chr=c("chr1","chr2","chr3"),df=smbsimdf3)
</code></pre>

<hr>
<h2 id='smbinning.metrics'>Performance Metrics for a Classification Model</h2><span id='topic+smbinning.metrics'></span>

<h3>Description</h3>

<p>It computes the classic performance metrics of a scoring model, including AUC, KS and all the relevant ones
from the classification matrix at a specific threshold or cutoff.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning.metrics(dataset, prediction, actualclass, cutoff = NA,
  report = 1, plot = "none", returndf = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.metrics_+3A_dataset">dataset</code></td>
<td>
<p>Data frame.</p>
</td></tr>
<tr><td><code id="smbinning.metrics_+3A_prediction">prediction</code></td>
<td>
<p>Classifier. A value generated by a classification model (Must be numeric).</p>
</td></tr>
<tr><td><code id="smbinning.metrics_+3A_actualclass">actualclass</code></td>
<td>
<p>Binary variable (0/1) that represents the actual class (Must be numeric).</p>
</td></tr>
<tr><td><code id="smbinning.metrics_+3A_cutoff">cutoff</code></td>
<td>
<p>Point at wich the classifier splits (predicts) the actual class (Must be numeric). 
If not specified, it will be estimated by using the maximum value of Youden J (Sensitivity+Specificity-1).
If not found in the data frame, it will take the closest lower value.</p>
</td></tr>
<tr><td><code id="smbinning.metrics_+3A_report">report</code></td>
<td>
<p>Indicator defined by user. 1: Show report (Default), 0: Do not show report.</p>
</td></tr>
<tr><td><code id="smbinning.metrics_+3A_plot">plot</code></td>
<td>
<p>Specifies the plot to be shown for overall evaluation. It has three options: 'auc' shows the ROC curve, 
'ks' shows the cumulative distribution of the actual class and its maximum difference (KS Statistic), and 'none' (Default).</p>
</td></tr>
<tr><td><code id="smbinning.metrics_+3A_returndf">returndf</code></td>
<td>
<p>Option for the user to save the data frame behind the metrics. 1: Show data frame, 0: Do not show (Default).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The command <code>smbinning.metrics</code> returns a report with classic performance metrics of a classification model.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load library and its dataset
library(smbinning) # Load package and its data

# Example: Metrics Credit Score 1
smbinning.metrics(dataset=smbsimdf1,prediction="cbs1",actualclass="fgood",
                  report=1) # Show report
smbinning.metrics(dataset=smbsimdf1,prediction="cbs1",actualclass="fgood",
                  cutoff=600, report=1) # User cutoff
smbinning.metrics(dataset=smbsimdf1,prediction="cbs1",actualclass="fgood",
                  report=0, plot="auc") # Plot AUC
smbinning.metrics(dataset=smbsimdf1,prediction="cbs1",actualclass="fgood",
                  report=0, plot="ks") # Plot KS

# Save table with all details of metrics
cbs1metrics=smbinning.metrics(
  dataset=smbsimdf1,prediction="cbs1",actualclass="fgood",
  report=0, returndf=1) # Save metrics details
</code></pre>

<hr>
<h2 id='smbinning.metrics.plot'>Visualization of a Classification Matrix</h2><span id='topic+smbinning.metrics.plot'></span>

<h3>Description</h3>

<p>It generates four plots after running and saving the output report from <code>smbinning.metrics</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning.metrics.plot(df, cutoff = NA, plot = "cmactual")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.metrics.plot_+3A_df">df</code></td>
<td>
<p>Data frame generated with <code>smbinning.metrics</code>.</p>
</td></tr>
<tr><td><code id="smbinning.metrics.plot_+3A_cutoff">cutoff</code></td>
<td>
<p>Value of the classifier that splits the data between positive (&gt;=) and negative (&lt;).</p>
</td></tr>
<tr><td><code id="smbinning.metrics.plot_+3A_plot">plot</code></td>
<td>
<p>Plot to be drawn. Options are: 'cmactual' (default),'cmactualrates','cmmodel','cmmodelrates'.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Load library and its dataset
library(smbinning)
smbmetricsdf=smbinning.metrics(dataset=smbsimdf1, prediction="cbs1",
                               actualclass="fgood", returndf=1)

# Example 1: Plots based on optimal cutoff
smbinning.metrics.plot(df=smbmetricsdf,plot='cmactual')

# Example 2: Plots using user defined cutoff
smbinning.metrics.plot(df=smbmetricsdf,cutoff=600,plot='cmactual')
smbinning.metrics.plot(df=smbmetricsdf,cutoff=600,plot='cmactualrates')
smbinning.metrics.plot(df=smbmetricsdf,cutoff=600,plot='cmmodel')
smbinning.metrics.plot(df=smbmetricsdf,cutoff=600,plot='cmmodelrates')
</code></pre>

<hr>
<h2 id='smbinning.monotonic'>Monotonic Binning</h2><span id='topic+smbinning.monotonic'></span>

<h3>Description</h3>

<p>It gives the user the ability to impose a monotonic trend for good/bad rates per bin.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning.monotonic(df, y, x, p = 0.05)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.monotonic_+3A_df">df</code></td>
<td>
<p>A data frame.</p>
</td></tr>
<tr><td><code id="smbinning.monotonic_+3A_y">y</code></td>
<td>
<p>Binary response variable (0,1). Integer (<code>int</code>) is required.
Name of <code>y</code> must not have a dot. Name &quot;default&quot; is not allowed.</p>
</td></tr>
<tr><td><code id="smbinning.monotonic_+3A_x">x</code></td>
<td>
<p>Continuous characteristic. At least 5 different values. Value <code>Inf</code> is not allowed. 
Name of <code>x</code> must not have a dot.</p>
</td></tr>
<tr><td><code id="smbinning.monotonic_+3A_p">p</code></td>
<td>
<p>Percentage of records per bin. Default 5% (0.05).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The command <code>smbinning.monotonic</code> generates and object containing the necessary info and utilities for binning.
The user should save the output result so it can be used 
with <code>smbinning.plot</code>, <code>smbinning.sql</code>, and <code>smbinning.gen</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load library and its dataset
library(smbinning) # Load package and its data

# Example 1: Monotonic Binning (Increasing Good Rate per Bin)
smbinning(df=smbsimdf2,y="fgood2",x="chr2",p=0.05)$ivtable # Run regular binning
smbinning.monotonic(df=smbsimdf2,y="fgood2",x="chr2",p=0.05)$ivtable # Run monotonic binning
 
# Example 2: Monotonic Binning (Decreasing Good Rate per Bin)
smbinning(df=smbsimdf2,y="fgood3",x="chr3",p=0.05)$ivtable # Run regular binning
smbinning.monotonic(df=smbsimdf2,y="fgood3",x="chr3",p=0.05)$ivtable # Run monotonic binning
</code></pre>

<hr>
<h2 id='smbinning.plot'>Plots after binning</h2><span id='topic+smbinning.plot'></span>

<h3>Description</h3>

<p>It generates plots for distribution, bad rate, and weight of evidence after running <code>smbinning</code> 
and saving its output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning.plot(ivout, option = "dist", sub = "")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.plot_+3A_ivout">ivout</code></td>
<td>
<p>An object generated by binning.</p>
</td></tr>
<tr><td><code id="smbinning.plot_+3A_option">option</code></td>
<td>
<p>Distribution (&quot;dist&quot;), Good Rate (&quot;goodrate&quot;), Bad Rate (&quot;badrate&quot;), and Weight of Evidence (&quot;WoE&quot;).</p>
</td></tr>
<tr><td><code id="smbinning.plot_+3A_sub">sub</code></td>
<td>
<p>Subtitle for the chart (optional).</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Load library and its dataset
library(smbinning)

# Example 1: Numeric variable (1 page, 4 plots)
result=smbinning(df=smbsimdf1,y="fgood",x="cbs1") # Run and save result
par(mfrow=c(2,2))
boxplot(smbsimdf1$cbs1~smbsimdf1$fgood,
        horizontal=TRUE, frame=FALSE, col="lightgray",main="Distribution")
mtext("Credit Score",3)
smbinning.plot(result,option="dist",sub="Credit Score")
smbinning.plot(result,option="badrate",sub="Credit Score")
smbinning.plot(result,option="WoE",sub="Credit Score")
par(mfrow=c(1,1))

# Example 2: Factor variable (1 plot per page)
result=smbinning.factor(df=smbsimdf1,y="fgood",x="inc",maxcat=11)
smbinning.plot(result,option="dist",sub="Income Level")
smbinning.plot(result,option="badrate",sub="Income Level")
smbinning.plot(result,option="WoE",sub="Income Level")
</code></pre>

<hr>
<h2 id='smbinning.psi'>Population Stability Index</h2><span id='topic+smbinning.psi'></span>

<h3>Description</h3>

<p>Often models are developed using multiple periods in time for a number of reasons.
For example, to avoid seasonality, to increase the size of the population, and some others.
With a metrics like the Population Stability Index (PSI), users can check if there is
a significant variation in the distribution of a certain feature by partition (usually time)
using the first one as the reference.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning.psi(df, y, x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.psi_+3A_df">df</code></td>
<td>
<p>Data frame.</p>
</td></tr>
<tr><td><code id="smbinning.psi_+3A_y">y</code></td>
<td>
<p>Column name the indicates the different partitions.</p>
</td></tr>
<tr><td><code id="smbinning.psi_+3A_x">x</code></td>
<td>
<p>Feature to be evaluated in terms of stability (It must be factor).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Three crosstabs by feature and period that show the frequency (psicnt), 
percentage (psipct) and PSI (psimg), and a plot for the analyzed characteristic.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load library and its dataset
library(smbinning)

# Check stability for income
smbinning.psi(df=smbsimdf1,y="period",x="inc") 
</code></pre>

<hr>
<h2 id='smbinning.scaling'>Scaling</h2><span id='topic+smbinning.scaling'></span>

<h3>Description</h3>

<p>It transforms the coefficients of a logistic regression into scaled points
based on the following three parameters pre-selected by the analyst: PDO, Score, and Odds.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning.scaling(logitraw, pdo = 20, score = 720, odds = 99)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.scaling_+3A_logitraw">logitraw</code></td>
<td>
<p>Logistic regression (glm) that must have specified <code>family=binomial</code> and 
whose variables have been generated with <code>smbinning.gen</code> or <code>smbinning.factor.gen</code>.</p>
</td></tr>
<tr><td><code id="smbinning.scaling_+3A_pdo">pdo</code></td>
<td>
<p>Points to double the oods.</p>
</td></tr>
<tr><td><code id="smbinning.scaling_+3A_score">score</code></td>
<td>
<p>Score at which the desire <code>odds</code> occur.</p>
</td></tr>
<tr><td><code id="smbinning.scaling_+3A_odds">odds</code></td>
<td>
<p>Desired <code>odds</code> at the selected <code>score</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A scaled model from a logistic regression built with binned variables, the parameters
used in the scaling process, the expected minimum and maximum score, and the original logistic model.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load library and its dataset
library(smbinning)

# Sampling
pop=smbsimdf1 # Population
train=subset(pop,rnd&lt;=0.7) # Training sample

# Generate binning object to generate variables
smbcbs1=smbinning(train,x="cbs1",y="fgood")
smbcbinq=smbinning.factor(train,x="cbinq",y="fgood")
smbcblineut=smbinning.custom(train,x="cblineut",y="fgood",cuts=c(30,40,50))
smbpmt=smbinning.factor(train,x="pmt",y="fgood")
smbtob=smbinning.custom(train,x="tob",y="fgood",cuts=c(1,2,3))
smbdpd=smbinning.factor(train,x="dpd",y="fgood")
smbdep=smbinning.custom(train,x="dep",y="fgood",cuts=c(10000,12000,15000))
smbod=smbinning.factor(train,x="od",y="fgood")
smbhome=smbinning.factor(train,x="home",y="fgood")
smbinc=smbinning.factor.custom(
  train,x="inc",y="fgood",
  c("'W01','W02'","'W03','W04','W05'","'W06','W07'","'W08','W09','W10'"))

pop=smbinning.gen(pop,smbcbs1,"g1cbs1")
pop=smbinning.factor.gen(pop,smbcbinq,"g1cbinq")
pop=smbinning.gen(pop,smbcblineut,"g1cblineut")
pop=smbinning.factor.gen(pop,smbpmt,"g1pmt")
pop=smbinning.gen(pop,smbtob,"g1tob")
pop=smbinning.factor.gen(pop,smbdpd,"g1dpd")
pop=smbinning.gen(pop,smbdep,"g1dep")
pop=smbinning.factor.gen(pop,smbod,"g1od")
pop=smbinning.factor.gen(pop,smbhome,"g1home")
pop=smbinning.factor.gen(pop,smbinc,"g1inc")

# Resample
train=subset(pop,rnd&lt;=0.7) # Training sample
test=subset(pop,rnd&gt;0.7) # Testing sample

# Run logistic regression
f=fgood~g1cbs1+g1cbinq+g1cblineut+g1pmt+g1tob+g1dpd+g1dep+g1od+g1home+g1inc
modlogisticsmb=glm(f,data = train,family = binomial())
summary(modlogisticsmb)

# Example: Scaling from logistic parameters to points
smbscaled=smbinning.scaling(modlogisticsmb,pdo=20,score=720,odds=99)
smbscaled$logitscaled # Scaled model
smbscaled$minmaxscore # Expected minimum and maximum Score
smbscaled$parameters # Parameters used for scaling
summary(smbscaled$logitraw) # Extract of original logistic regression

# Example: Generate score from scaled model
pop1=smbinning.scoring.gen(smbscaled=smbscaled, dataset=pop)

# Example Generate SQL code from scaled model
smbinning.scoring.sql(smbscaled)
</code></pre>

<hr>
<h2 id='smbinning.scoring.gen'>Generation of Score and Its Weights</h2><span id='topic+smbinning.scoring.gen'></span>

<h3>Description</h3>

<p>After applying <code>smbinning.scaling</code> to the model, <code>smbinning.scoring</code> generates a data frame 
with the final Score and additional fields with the points assigned to each characteristic so the user
can see how the final score is calculated. Example shown on <code>smbinning.scaling</code> section.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning.scoring.gen(smbscaled, dataset)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.scoring.gen_+3A_smbscaled">smbscaled</code></td>
<td>
<p>Object generated using <code>smbinning.scaling</code>.</p>
</td></tr>
<tr><td><code id="smbinning.scoring.gen_+3A_dataset">dataset</code></td>
<td>
<p>A data frame.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The command <code>smbinning.scoring</code> generates a data frame with the final scaled Score and its
corresponding scaled weights per characteristic.
</p>

<hr>
<h2 id='smbinning.scoring.sql'>Generation of SQL Code After Scaled Model</h2><span id='topic+smbinning.scoring.sql'></span>

<h3>Description</h3>

<p>After applying <code>smbinning.scaling</code> to the model, <code>smbinning.scoring.sql</code> generates a SQL code 
that creates and updates all variables present in the scaled model. Example shown on <code>smbinning.scaling</code> section.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning.scoring.sql(smbscaled)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.scoring.sql_+3A_smbscaled">smbscaled</code></td>
<td>
<p>Object generated using <code>smbinning.scaling</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The command <code>smbinning.scoring.sql</code> generates a SQL code to implement the model the model in SQL.
</p>

<hr>
<h2 id='smbinning.sql'>SQL Code</h2><span id='topic+smbinning.sql'></span>

<h3>Description</h3>

<p>It outputs a SQL code to facilitate the generation of new binned characetristic 
in a SQL environment. User must define table and new characteristic name.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning.sql(ivout)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.sql_+3A_ivout">ivout</code></td>
<td>
<p>An object generated by <code>smbinning</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A text with the SQL code for binning.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load library and its dataset
library(smbinning)

# Example 1: Binning a numeric variable
result=smbinning(df=smbsimdf1,y="fgood",x="cbs1") # Run and save result
smbinning.sql(result)

# Example 2: Binning for a factor variable
result=smbinning.factor(df=smbsimdf1,x="inc",y="fgood",maxcat=11)
smbinning.sql(result)

# Example 3: Customized binning for a factor variable
result=smbinning.factor.custom(
  df=smbsimdf1,x="inc",y="fgood",
  c("'W01','W02'","'W03','W04','W05'",
    "'W06','W07'","'W08','W09','W10'"))
smbinning.sql(result)
</code></pre>

<hr>
<h2 id='smbinning.sumiv'>Information Value Summary</h2><span id='topic+smbinning.sumiv'></span>

<h3>Description</h3>

<p>It gives the user the ability to calculate, in one step, the IV for each characteristic of the dataset.
This function also shows a progress bar so the user can see the status of the process.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning.sumiv(df, y)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.sumiv_+3A_df">df</code></td>
<td>
<p>A data frame.</p>
</td></tr>
<tr><td><code id="smbinning.sumiv_+3A_y">y</code></td>
<td>
<p>Binary response variable (0,1). Integer (<code>int</code>) is required.
Name of <code>y</code> must not have a dot. Name &quot;default&quot; is not allowed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The command <code>smbinning.sumiv</code> generates a table that lists each characteristic 
with its corresponding IV for those where the calculation is possible, otherwise it will generate a 
missing value (<code>NA</code>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load library and its dataset
library(smbinning)

# Test sample
test=subset(smbsimdf1,rnd&gt;0.9) # Training sample
test$rnd=NULL

# Example: Information Value Summary
testiv=smbinning.sumiv(test,y="fgood")
testiv

# Example: Plot of Information Value Summary
smbinning.sumiv.plot(testiv)
</code></pre>

<hr>
<h2 id='smbinning.sumiv.plot'>Plot Information Value Summary</h2><span id='topic+smbinning.sumiv.plot'></span>

<h3>Description</h3>

<p>It gives the user the ability to plot the Information Value by characteristic.
The chart only shows characteristics with a valid IV. 
Example shown on <code>smbinning.sumiv</code> section.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smbinning.sumiv.plot(sumivt, cex = 0.9)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smbinning.sumiv.plot_+3A_sumivt">sumivt</code></td>
<td>
<p>A data frame saved after <code>smbinning.sumiv</code>.</p>
</td></tr>
<tr><td><code id="smbinning.sumiv.plot_+3A_cex">cex</code></td>
<td>
<p>Optional parameter for the user to control the font size of the characteristics
displayed on the chart. The default value is 0.9</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The command <code>smbinning.sumiv.plot</code> returns a plot that shows the IV
for each numeric and factor characteristic in the dataset.
</p>

<hr>
<h2 id='smbsimdf1'>Simulated Credit Data</h2><span id='topic+smbsimdf1'></span>

<h3>Description</h3>

<p>A simulated dataset where the target variable is fgood, 
which represents the binary status of default (0) and not default (1).
</p>


<h3>Format</h3>

<p>Data frame with 2,500 rows and 22 columns with 500 defaults.</p>


<h3>Details</h3>


<ul>
<li><p> fgood: Default (0), Not Default (1).
</p>
</li>
<li><p> cbs1: Credit quality index (1-100).
</p>
</li>
<li><p> cbs2: Profitability index (1-100).
</p>
</li>
<li><p> cbinq: Number of inquiries.
</p>
</li>
<li><p> cbline: Number of credit lines.
</p>
</li>
<li><p> cbterm: Number of term loans.
</p>
</li>
<li><p> cblineut: Line utilization (0-100).
</p>
</li>
<li><p> cbtob: Number of years on file.
</p>
</li>
<li><p> cbdpd: Indicator of days past due on bureau (Yes, No).
</p>
</li>
<li><p> cbnew: Number of new loans.
</p>
</li>
<li><p> pmt: Type of payment (M: Manual, A: Autopay, P: Payroll).
</p>
</li>
<li><p> tob: Time on books (Years).
</p>
</li>
<li><p> dpd: Level of delinquency (No, Low, High).
</p>
</li>
<li><p> dep: Amount of deposits.
</p>
</li>
<li><p> dc: Number of transactions.
</p>
</li>
<li><p> od: Number of overdrafts.
</p>
</li>
<li><p> home: Home ownership indicator (Yes, No).
</p>
</li>
<li><p> inc: Level of income.
</p>
</li>
<li><p> dd: Number of electronic transfers.
</p>
</li>
<li><p> online: Indicator of online activity (Yes, No).
</p>
</li>
<li><p> rnd: Random number to select testing and training samples.
</p>
</li>
<li><p> period: Factor that indicates the year/month of the data (Based on rnd).
</p>
</li></ul>


<hr>
<h2 id='smbsimdf2'>Monotonic Binning Sample Data</h2><span id='topic+smbsimdf2'></span>

<h3>Description</h3>

<p>A simulated dataset used to illustrate the application of monotonic binning.
</p>


<h3>Format</h3>

<p>Data frame with 2,500 rows and 6 columns.</p>


<h3>Details</h3>


<ul>
<li><p> fgood1: Default (0), Not Default (1) for Numeric Variable 1.
</p>
</li>
<li><p> chr1: Numeric variable 1.
</p>
</li>
<li><p> fgood2: Default (0), Not Default (1) for Numeric Variable 2.
</p>
</li>
<li><p> chr2: Numeric variable 2.
</p>
</li>
<li><p> fgood3: Default (0), Not Default (1) for Numeric Variable 3.
</p>
</li>
<li><p> chr3: Numeric variable 3.
</p>
</li></ul>


<hr>
<h2 id='smbsimdf3'>Monotonic Binning Sample Data</h2><span id='topic+smbsimdf3'></span>

<h3>Description</h3>

<p>A simulated dataset used to illustrate the application of model ranking.
</p>


<h3>Format</h3>

<p>Data frame with 1,000 rows and 4 columns.</p>


<h3>Details</h3>


<ul>
<li><p> fgood1: Default (0), Not Default (1) for Numeric Variable 1.
</p>
</li>
<li><p> chr1: Numeric variable 1.
</p>
</li>
<li><p> chr2: Numeric variable 2.
</p>
</li>
<li><p> chr3: Numeric variable 3.
</p>
</li></ul>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
