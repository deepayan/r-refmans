<!DOCTYPE html><html lang="en"><head><title>Help for package streambugs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {streambugs}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#streambugs-package'><p>Simulator of development of macroinvertebrate and algae taxa</p></a></li>
<li><a href='#construct.statevariables'><p>Construct the streambugs ODE state variable names</p></a></li>
<li><a href='#count.feeding.links'><p>Count feeding links between taxa in streambugs ODE.</p></a></li>
<li><a href='#decode.statevarnames'><p>Decode the streambugs ODE state variable names</p></a></li>
<li><a href='#foodweb.plot'><p>Plot the streambugs &quot;foodweb&quot; graph.</p></a></li>
<li><a href='#plot.streambugs'><p>Plot the results of streambugs ODE run</p></a></li>
<li><a href='#run.streambugs'><p>Run the streambugs ODE model</p></a></li>
<li><a href='#streambugs.example.model.extended'><p>Set-up the streambugs extended model</p></a></li>
<li><a href='#streambugs.example.model.toy'><p>Set-up the streambugs toy model</p></a></li>
<li><a href='#streambugs.get.sys.def'><p>Get system definition of the streambugs ODE model</p></a></li>
<li><a href='#streambugs.write.sys.def'><p>Write system definition of the streambugs ODE model</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Parametric Ordinary Differential Equations Model of Growth,
Death, and Respiration of Macroinvertebrate and Algae Taxa</td>
</tr>
<tr>
<td>Version:</td>
<td>1.4</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-11-29</td>
</tr>
<tr>
<td>Author:</td>
<td>Nele Schuwirth, Peter Reichert, Mikolaj Rybinski</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Nele Schuwirth &lt;nele.schuwirth@eawag.ch&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Numerically solve and plot solutions of a parametric ordinary
        differential equations model of growth, death, and respiration of
        macroinvertebrate and algae taxa dependent on pre-defined environmental
        factors. The model (version 1.0) is introduced in Schuwirth, N. and
        Reichert, P., (2013) &lt;<a href="https://doi.org/10.1890%2F12-0591.1">doi:10.1890/12-0591.1</a>&gt;. This package includes
        model extensions and the core functions introduced and used in
        Schuwirth, N. et al. (2016) &lt;<a href="https://doi.org/10.1111%2F1365-2435.12605">doi:10.1111/1365-2435.12605</a>&gt;,
        Kattwinkel, M. et al. (2016) &lt;<a href="https://doi.org/10.1021%2Facs.est.5b04068">doi:10.1021/acs.est.5b04068</a>&gt;,
        Mondy, C. P., and Schuwirth, N. (2017) &lt;<a href="https://doi.org/10.1002%2Feap.1530">doi:10.1002/eap.1530</a>&gt;,
        and Paillex, A. et al. (2017) &lt;<a href="https://doi.org/10.1111%2Ffwb.12927">doi:10.1111/fwb.12927</a>&gt;.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.eawag.ch/en/department/siam/projects/streambugs/">https://www.eawag.ch/en/department/siam/projects/streambugs/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://gitlab.com/NeleSchuwirth/streambugs/-/issues">https://gitlab.com/NeleSchuwirth/streambugs/-/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>deSolve (&ge; 1.20)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>C99</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-29 15:54:25 UTC; schuwine</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-29 16:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='streambugs-package'>Simulator of development of macroinvertebrate and algae taxa</h2><span id='topic+streambugs'></span><span id='topic+streambugs-package'></span>

<h3>Description</h3>

<p>The main function of <span class="pkg">streambugs</span> is <code><a href="#topic+run.streambugs">run.streambugs</a></code>.
Remaining functions have auxiliary purpose to facilitate model creation,
writing, and plotting of the simulation results, or to provide ready to use
examples.
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://www.eawag.ch/en/department/siam/projects/streambugs/">https://www.eawag.ch/en/department/siam/projects/streambugs/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://gitlab.com/NeleSchuwirth/streambugs/-/issues">https://gitlab.com/NeleSchuwirth/streambugs/-/issues</a>
</p>
</li></ul>


<hr>
<h2 id='construct.statevariables'>Construct the streambugs ODE state variable names</h2><span id='topic+construct.statevariables'></span>

<h3>Description</h3>

<p>Construct encoded labels of streambugs ODE state variable names from reach
names, habitat names, and &quot;taxa&quot; names for at least one of the POM, Algae, or
Invertebrates groups.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>construct.statevariables(
  Reaches,
  Habitats,
  POM = NULL,
  Algae = NULL,
  Invertebrates = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="construct.statevariables_+3A_reaches">Reaches</code></td>
<td>
<p>reach names character vector; duplicates are dropped</p>
</td></tr>
<tr><td><code id="construct.statevariables_+3A_habitats">Habitats</code></td>
<td>
<p>habitats names character vector; duplicates are dropped</p>
</td></tr>
<tr><td><code id="construct.statevariables_+3A_pom">POM</code></td>
<td>
<p>optional (&quot;taxa&quot;) character vector of POM (particulate organic matter) group;
duplicates are dropped
(note: at least one &quot;taxon&quot; name out of all groups has to be given)</p>
</td></tr>
<tr><td><code id="construct.statevariables_+3A_algae">Algae</code></td>
<td>
<p>optional taxa character vector of Algae group; duplicates are
dropped (note: at least one taxon name out of all groups has to be given)</p>
</td></tr>
<tr><td><code id="construct.statevariables_+3A_invertebrates">Invertebrates</code></td>
<td>
<p>optional taxa character vector of Invertebrates group
duplicates are dropped (note: at least one taxon name out of all groups has</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector with state variable names in the form of
<code>"Reach_Habitat_Taxon_Group"</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Reaches           &lt;- paste0("Reach",1:2)
Habitats          &lt;- paste0("Hab",1:1)
y.names &lt;- construct.statevariables(Reaches,Habitats,Invertebrates=c("Baetis","Ecdyonurus"))

</code></pre>

<hr>
<h2 id='count.feeding.links'>Count feeding links between taxa in streambugs ODE.</h2><span id='topic+count.feeding.links'></span>

<h3>Description</h3>

<p>Count number of global &quot;Cons&quot; stoichiometric interactions (feeding links) between
streambugs ODE state variables (taxa) in all habitats.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>count.feeding.links(y.names, par)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="count.feeding.links_+3A_y.names">y.names</code></td>
<td>
<p>same as  <code>y.names</code> in <code><a href="#topic+run.streambugs">run.streambugs</a></code></p>
</td></tr>
<tr><td><code id="count.feeding.links_+3A_par">par</code></td>
<td>
<p>same as  <code>par</code> in <code><a href="#topic+run.streambugs">run.streambugs</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Integer number of feeding links, which is a number of feeding links in a
single habitat times number of habitats and number of reaches.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>m &lt;- streambugs.example.model.toy()
count.feeding.links(m$y.names, m$par)

# feeding links count does not change w/ number of habitats (nor reaches)
m &lt;- streambugs.example.model.toy(n.Habitats=10)
count.feeding.links(m$y.names, m$par)

</code></pre>

<hr>
<h2 id='decode.statevarnames'>Decode the streambugs ODE state variable names</h2><span id='topic+decode.statevarnames'></span>

<h3>Description</h3>

<p>Extract reach names, habitat names, taxa names and optional group names from
encoded labels of streambugs ODE state variable names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>decode.statevarnames(y.names)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="decode.statevarnames_+3A_y.names">y.names</code></td>
<td>
<p>vector with state variable names in the form of
<code>"Reach_Habitat_Taxon"</code> or <code>"Reach_Habitat_Taxon_Group"</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with:</p>

<dl>
<dt><code>$y.names</code></dt><dd><p>names of state variables (input argument)</p>
</dd>
<dt><code>$y.reaches</code>, <code>$y.reaches</code>, <code>$y.habitats</code>,
<code>$y.taxa</code>, and <code>$y.groups</code>:</dt><dd><p>Names of, respectively, reaches,
habitats, taxa, and of groups of each state variable</p>
</dd>
<dt><code>$reaches</code>, <code>$habitats</code>, <code>$taxa</code>, <code>$groups</code>:</dt><dd>
<p>Unique names of, respectively, reaches, habitats, taxa, and of groups of
state variables</p>
</dd>
<dt><code>$ind.fA</code>:</dt><dd><p>Indices used for the areal fractions of each reach
and habitat</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>y.names &lt;- c("Reach1_Hab1_Baetis_Invertebrates","Reach1_Hab1_Ecdyonurus_Invertebrates",
             "Reach2_Hab1_Baetis_Invertebrates", "Reach2_Hab1_Ecdyonurus_Invertebrates")
decode.statevarnames(y.names)

</code></pre>

<hr>
<h2 id='foodweb.plot'>Plot the streambugs &quot;foodweb&quot; graph.</h2><span id='topic+foodweb.plot'></span>

<h3>Description</h3>

<p>Plot the &quot;foodweb&quot; graph depicting interactions between ODE variables in a streambugs
model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>foodweb.plot(
  y.names,
  par,
  file = NA,
  cex = 1,
  font = 1,
  title = "",
  lwd = 1,
  bg = colors()[1],
  lcol = colors()[555],
  ncrit = 8,
  lcrit = 20,
  survivals = NA,
  observed = NA,
  texts = TRUE,
  pointcol = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="foodweb.plot_+3A_y.names">y.names</code></td>
<td>
<p>same as <code>y.names</code> in <code><a href="#topic+run.streambugs">run.streambugs</a></code></p>
</td></tr>
<tr><td><code id="foodweb.plot_+3A_par">par</code></td>
<td>
<p>same as <code>par</code> in <code><a href="#topic+run.streambugs">run.streambugs</a></code></p>
</td></tr>
<tr><td><code id="foodweb.plot_+3A_file">file</code></td>
<td>
<p>optional name of a PDF file to plot to</p>
</td></tr>
<tr><td><code id="foodweb.plot_+3A_cex">cex</code></td>
<td>
<p>same as <code>cex</code> in <code><a href="graphics.html#topic+par">par</a></code>, consumed by here by
multiple text generating functions</p>
</td></tr>
<tr><td><code id="foodweb.plot_+3A_font">font</code></td>
<td>
<p>same as <code>font</code> in <code><a href="graphics.html#topic+par">par</a></code>, consumed here by
<code><a href="graphics.html#topic+text">text</a></code> as a font type for taxa names</p>
</td></tr>
<tr><td><code id="foodweb.plot_+3A_title">title</code></td>
<td>
<p>optional title for the plot</p>
</td></tr>
<tr><td><code id="foodweb.plot_+3A_lwd">lwd</code></td>
<td>
<p>same as <code>lwd</code> in <code><a href="graphics.html#topic+par">par</a></code>, consumed here by
<code><a href="graphics.html#topic+lines">lines</a></code> as a line width for the &quot;food web&quot; edges</p>
</td></tr>
<tr><td><code id="foodweb.plot_+3A_bg">bg</code></td>
<td>
<p>same as <code>bg</code> in <code><a href="graphics.html#topic+par">par</a></code></p>
</td></tr>
<tr><td><code id="foodweb.plot_+3A_lcol">lcol</code></td>
<td>
<p>same as <code>col</code> in <code><a href="graphics.html#topic+par">par</a></code>, consumed here by
<code><a href="graphics.html#topic+lines">lines</a></code> as a line color for the &quot;food web&quot; edges</p>
</td></tr>
<tr><td><code id="foodweb.plot_+3A_ncrit">ncrit</code></td>
<td>
<p>number of inverts in one line at which they are shifted up and down,
alternating</p>
</td></tr>
<tr><td><code id="foodweb.plot_+3A_lcrit">lcrit</code></td>
<td>
<p>number of letters/characters of state names which are plottet at level 2</p>
</td></tr>
<tr><td><code id="foodweb.plot_+3A_survivals">survivals</code></td>
<td>
<p>vector with the entries <code>"survived"</code> or <code>"extinct"</code> for
all state variables with names matching names of taxa state variables and
<code>"SusPOM"</code></p>
</td></tr>
<tr><td><code id="foodweb.plot_+3A_observed">observed</code></td>
<td>
<p>vector with the entries <code>"never"</code>/<code>"notobserved"</code>,
<code>"observed"</code>,<code>"sometimes"</code>, <code>"always"</code>, or <code>NA</code>/<code>"NA"</code>
for all state variables, with names matching names of taxa state variables and
<code>"SusPOM"</code></p>
</td></tr>
<tr><td><code id="foodweb.plot_+3A_texts">texts</code></td>
<td>
<p>if to plot as &quot;food web&quot;nodes as texts with taxa names; otherwise, plot
points</p>
</td></tr>
<tr><td><code id="foodweb.plot_+3A_pointcol">pointcol</code></td>
<td>
<p>if to color text or point nodes using Eawag coloring scheme
(eawagfarben); otherwise plot all in the same color</p>
</td></tr>
<tr><td><code id="foodweb.plot_+3A_...">...</code></td>
<td>
<p>additional arguments for the <code><a href="grDevices.html#topic+pdf">pdf</a></code> graphics device,
relevant only if <code>file</code> argument was given.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>model &lt;- streambugs.example.model.toy()
foodweb.plot(model$y.names, model$par, cex=1.1, title="complete foodweb", ncrit=8,
    lcrit=7, lwd=2, bg="white", lcol="blue", font=2)

</code></pre>

<hr>
<h2 id='plot.streambugs'>Plot the results of streambugs ODE run</h2><span id='topic+plot.streambugs'></span>

<h3>Description</h3>

<p>Plot time series of all streambugs ODE state variables, for each reach,
habitat and group, resulting from the
<code><a href="#topic+run.streambugs">run.streambugs</a></code> function call.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'streambugs'
plot(x, y, inp = NA, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.streambugs_+3A_x">x</code></td>
<td>
<p>matrix with results derived by
<code><a href="#topic+run.streambugs">run.streambugs</a></code></p>
</td></tr>
<tr><td><code id="plot.streambugs_+3A_y">y</code></td>
<td>
<p>same as <code>par</code> in <code><a href="#topic+run.streambugs">run.streambugs</a></code></p>
</td></tr>
<tr><td><code id="plot.streambugs_+3A_inp">inp</code></td>
<td>
<p>same as <code>inp</code> in <code><a href="#topic+run.streambugs">run.streambugs</a></code></p>
</td></tr>
<tr><td><code id="plot.streambugs_+3A_...">...</code></td>
<td>
<p>additional argument for the <code><a href="graphics.html#topic+plot">plot</a></code> function
call</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>m &lt;- streambugs.example.model.toy()
r &lt;- run.streambugs(y.names=m$y.names, times=m$times,  par=m$par, inp=m$inp, C=TRUE)
plot(x=r$res, y=m$par, inp=m$inp)

</code></pre>

<hr>
<h2 id='run.streambugs'>Run the streambugs ODE model</h2><span id='topic+run.streambugs'></span>

<h3>Description</h3>

<p>Numerically solve streambugs ODE model (in either R or C version) for given
parameters, inputs and time points, using the <code><a href="deSolve.html#topic+ode">ode</a></code>
routine.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run.streambugs(
  y.names,
  times,
  par,
  inp = NA,
  C = FALSE,
  file.def = NA,
  file.res = NA,
  file.add = NA,
  return.res.add = FALSE,
  tout.add = NA,
  verbose = TRUE,
  method = "lsoda",
  rtol = 1e-04,
  atol = 1e-04,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run.streambugs_+3A_y.names">y.names</code></td>
<td>
<p>state variables names, either as a vector encoded in the form
<code>"Reach_Habitat_Taxon"</code> or <code>"Reach_Habitat_Taxon_Group"</code>, or
a list as returned by <code><a href="#topic+decode.statevarnames">decode.statevarnames</a></code> function</p>
</td></tr>
<tr><td><code id="run.streambugs_+3A_times">times</code></td>
<td>
<p>vector with time points for which output is wanted; the first</p>
</td></tr>
<tr><td><code id="run.streambugs_+3A_par">par</code></td>
<td>
<p>vector with constant parameters and model inputs</p>
</td></tr>
<tr><td><code id="run.streambugs_+3A_inp">inp</code></td>
<td>
<p>list with time-dependent parameters or model inputs with one list
element for each parameter or input that includes a matrix where first
column is the time and second the corresponding parameter or input value</p>
</td></tr>
<tr><td><code id="run.streambugs_+3A_c">C</code></td>
<td>
<p>identifier for C- or R-Version</p>
</td></tr>
<tr><td><code id="run.streambugs_+3A_file.def">file.def</code></td>
<td>
<p>file name for writing system definition</p>
</td></tr>
<tr><td><code id="run.streambugs_+3A_file.res">file.res</code></td>
<td>
<p>file name for results</p>
</td></tr>
<tr><td><code id="run.streambugs_+3A_file.add">file.add</code></td>
<td>
<p>file name for additional output (e.g. process rates)</p>
</td></tr>
<tr><td><code id="run.streambugs_+3A_return.res.add">return.res.add</code></td>
<td>
<p>returns <code>res.add</code> output additionally to res</p>
</td></tr>
<tr><td><code id="run.streambugs_+3A_tout.add">tout.add</code></td>
<td>
<p>optional identifier for specific output times for the
additional output, if <code>NA</code> all <code>res.add</code> is calculated for all
times</p>
</td></tr>
<tr><td><code id="run.streambugs_+3A_verbose">verbose</code></td>
<td>
<p>prints some outputs to console</p>
</td></tr>
<tr><td><code id="run.streambugs_+3A_method">method</code></td>
<td>
<p>method used by <code><a href="deSolve.html#topic+ode">ode</a></code></p>
</td></tr>
<tr><td><code id="run.streambugs_+3A_rtol">rtol</code></td>
<td>
<p>argument of <code><a href="deSolve.html#topic+ode">ode</a></code> function defining relative
error tolerance, either a scalar or an array of the same size as <code>y.names</code></p>
</td></tr>
<tr><td><code id="run.streambugs_+3A_atol">atol</code></td>
<td>
<p>argument of <code><a href="deSolve.html#topic+ode">ode</a></code> function defining absolute
error, either a scalar or an array of the same size as <code>y.names</code></p>
</td></tr>
<tr><td><code id="run.streambugs_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code><a href="deSolve.html#topic+ode">ode</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with:</p>

<dl>
<dt><code>$res</code></dt><dd><p>matrix of class <code>streambugs</code> with up
to as many rows aselements in times and as many columns as elements in
<code>y.names</code>, plus an additional column for the time value.
There will be a row for each element in times unless the
FORTRAN routine <code>"lsoda"</code> returns with an unrecoverable error.</p>
</dd>
<dt><code>$res.add</code></dt><dd><p>optional additional output matrix with process
rates and taxon specific factors, present only if <code>return.res.add</code>
input parameter is set to <code>TRUE</code>.</p>
</dd>
</dl>



<h3>Model syntax</h3>

<p>See &quot;docs/Streambugs_syntax.pdf&quot; file in the package installation folder:
<code>system.file("docs", "Streambugs_syntax.pdf", package="streambugs")</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>m &lt;- streambugs.example.model.toy()
# Display inputs: list of perturbed variables with time points and new values
m$inp
# Simluate
res.C.default &lt;- run.streambugs(y.names = m$y.names, times = m$times,
   par = m$par, inp = m$inp, C = TRUE)
# Modify input (halve second perturbation size) and re-simulate
m$inp$Reach3_w[2,2] &lt;- m$inp$Reach3_w[2,2] / 2
m$inp
res.C.modified &lt;- run.streambugs(y.names = m$y.names, times = m$times,
   par = m$par, inp = m$inp, C = TRUE)
# Compare examplary trajectory of organic matter in one of the habitats
var.name &lt;- "Reach3_Hab1_POM1_POM"
plot(m$times,res.C.default$res[, var.name], type="l", col="red")
lines(m$times, res.C.modified$res[, var.name], col="green")

</code></pre>

<hr>
<h2 id='streambugs.example.model.extended'>Set-up the streambugs extended model</h2><span id='topic+streambugs.example.model.extended'></span>

<h3>Description</h3>

<p>Set-up state variables, parameters, input, and output times of the streambugs
extended model. All these are defined and read from <code>.dat</code> files The model is
ready to run with <code><a href="#topic+run.streambugs">run.streambugs</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>streambugs.example.model.extended()
</code></pre>


<h3>Value</h3>

<p>List with:</p>

<dl>
<dt><code>$name</code></dt><dd><p>name of the example</p>
</dd>
<dt><code>$y.names</code></dt><dd><p>list with names of state variables as returned by
the <a href="#topic+decode.statevarnames">decode.statevarnames</a> function</p>
</dd>
<dt><code>$times</code>, <code>$par</code>, <code>$inp</code>:</dt><dd><p>corresponding input
parameters of the <code><a href="#topic+run.streambugs">run.streambugs</a></code> function</p>
</dd>
</dl>



<h3>Model syntax</h3>

<p>See &quot;docs/Streambugs_syntax.pdf&quot; file in the package installation folder:
<code>system.file("docs", "Streambugs_syntax.pdf", package="streambugs")</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model &lt;- streambugs.example.model.extended()
# display values of microhabitat tolerance values for Lumbriculidae taxa
model$par[grepl("^Lumbriculidae_microhabtolval", names(model$par))]

</code></pre>

<hr>
<h2 id='streambugs.example.model.toy'>Set-up the streambugs toy model</h2><span id='topic+streambugs.example.model.toy'></span>

<h3>Description</h3>

<p>Set-up state variables, parameters, input, and output times of the
streambugs toy model. The model is ready to run with
<code><a href="#topic+run.streambugs">run.streambugs</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>streambugs.example.model.toy(n.Reaches = 3, n.Habitats = 2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="streambugs.example.model.toy_+3A_n.reaches">n.Reaches</code></td>
<td>
<p>Number of reaches in the toy example</p>
</td></tr>
<tr><td><code id="streambugs.example.model.toy_+3A_n.habitats">n.Habitats</code></td>
<td>
<p>Number of habitats in the toy example</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with:</p>

<dl>
<dt><code>$name</code></dt><dd><p>name of the example</p>
</dd>
<dt><code>$y.names</code></dt><dd><p>list with names of state variables as returned by
the <a href="#topic+decode.statevarnames">decode.statevarnames</a> function</p>
</dd>
<dt><code>$times</code>, <code>$par</code>, <code>$inp</code>:</dt><dd><p>corresponding input
parameters of the <code><a href="#topic+run.streambugs">run.streambugs</a></code> function</p>
</dd>
</dl>



<h3>Model syntax</h3>

<p>See &quot;docs/Streambugs_syntax.pdf&quot; file in the package installation folder:
<code>system.file("docs", "Streambugs_syntax.pdf", package="streambugs")</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model &lt;- streambugs.example.model.toy()
# display values of the exponent "q" in the food limitation term; Note:
model$par[grepl("(.*_)?q$", names(model$par))]

</code></pre>

<hr>
<h2 id='streambugs.get.sys.def'>Get system definition of the streambugs ODE model</h2><span id='topic+streambugs.get.sys.def'></span>

<h3>Description</h3>

<p>Get a structured representation of the streambugs ODE system definition.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>streambugs.get.sys.def(y.names, par, inp = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="streambugs.get.sys.def_+3A_y.names">y.names</code></td>
<td>
<p>state variables names, either as a vector encoded in the form
<code>"Reach_Habitat_Taxon"</code> or <code>"Reach_Habitat_Taxon_Group"</code>, or
a list as returned by <code><a href="#topic+decode.statevarnames">decode.statevarnames</a></code> function</p>
</td></tr>
<tr><td><code id="streambugs.get.sys.def_+3A_par">par</code></td>
<td>
<p>vector with constant parameters and model inputs</p>
</td></tr>
<tr><td><code id="streambugs.get.sys.def_+3A_inp">inp</code></td>
<td>
<p>list with time-dependent parameters or model inputs with one list
element for each parameter or input that includes a matrix where first
column is the time and second the corresponding parameter or input value</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with definition of the model including input state variables,
parameters, and inputs, as well as the derived model structure including
global parameters, environmental conditions of reaches and habitats,
initial conditions, taxa properties, stoichiometric coefficients of all
processes, and process definitions for each state variable.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>m &lt;- streambugs.example.model.toy()
sys.def &lt;- streambugs.get.sys.def(y.names=m$y.names, par=m$par, inp=m$inp)
# Get inital conditions for all state variables
sys.def$par.initcond$parvals
# Get stoichiometric coefficients of consumption within the food web
sys.def$par.stoich.web$Cons
# Get stoichiometric coefficients of death process for each taxon
# (transforming them into a dead organic matter "POM")
sys.def$par.stoich.taxon$Death

</code></pre>

<hr>
<h2 id='streambugs.write.sys.def'>Write system definition of the streambugs ODE model</h2><span id='topic+streambugs.write.sys.def'></span>

<h3>Description</h3>

<p>Write system definition of the streambugs ODE model into a human-readable
text file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>streambugs.write.sys.def(sys.def, file = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="streambugs.write.sys.def_+3A_sys.def">sys.def</code></td>
<td>
<p>system definition generated by the function
<code><a href="#topic+streambugs.get.sys.def">streambugs.get.sys.def</a></code></p>
</td></tr>
<tr><td><code id="streambugs.write.sys.def_+3A_file">file</code></td>
<td>
<p>file name</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>m &lt;- streambugs.example.model.toy()
sys.def &lt;- streambugs.get.sys.def(y.names=m$y.names, par=m$par, inp=m$inp)
file.name &lt;- tempfile(m$name, fileext=".dat")
streambugs.write.sys.def(sys.def, file.name)
file.show(file.name, delete.file=TRUE)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
