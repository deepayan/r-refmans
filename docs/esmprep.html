<!DOCTYPE html><html><head><title>Help for package esmprep</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {esmprep}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#computeDuration'><p>computeDuration</p></a></li>
<li><a href='#computeTimeBetween'><p>computeTimeBetween</p></a></li>
<li><a href='#computeTimeLag'><p>computeTimeLag</p></a></li>
<li><a href='#convertChars'><p>convertChars</p></a></li>
<li><a href='#dateTimeFormats'><p>dateTimeFormats</p></a></li>
<li><a href='#dateTimeFormats2'><p>dateTimeFormats2</p></a></li>
<li><a href='#dayControl'><p>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled</p>
out during the day by participants of the control group.</a></li>
<li><a href='#dayTest'><p>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled</p>
out during the day by participants of the test group.</a></li>
<li><a href='#esAssign'><p>esAssign</p></a></li>
<li><a href='#esAssigned'><p>Resulting dataset after function esAssign has been executed on the raw ESM dataset.</p></a></li>
<li><a href='#esComplete'><p>esComplete</p></a></li>
<li><a href='#esFinal'><p>esFinal</p></a></li>
<li><a href='#esIdentical'><p>esIdentical</p></a></li>
<li><a href='#esItems'><p>esItems</p></a></li>
<li><a href='#esList'><p>esList</p></a></li>
<li><a href='#esMerge'><p>esMerge</p></a></li>
<li><a href='#esMerged1'><p>Resulting dataset after function convertChars has been executed on the raw ESM dataset.</p></a></li>
<li><a href='#esmprep'><p>esmprep: A package for preparing raw data in research that uses the Experience-Sampling-Methodology (ESM).</p></a></li>
<li><a href='#esPlausible'><p>esPlausible</p></a></li>
<li><a href='#eveningControl'><p>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled</p>
out during the evening by participants of the control group.</a></li>
<li><a href='#eveningTest'><p>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled</p>
out during the evening by participants of the test group.</a></li>
<li><a href='#expectedDf'><p>Resulting dataset after function expectedPromptIndex has been executed on the raw ESM dataset.</p></a></li>
<li><a href='#expectedPromptIndex'><p>expectedPromptIndex</p></a></li>
<li><a href='#findChars'><p>findChars</p></a></li>
<li><a href='#genDateTime'><p>genDateTime</p></a></li>
<li><a href='#genKey'><p>genKey</p></a></li>
<li><a href='#intolerable'><p>intolerable</p></a></li>
<li><a href='#isCompleteLs'><p>Resulting dataset after function esComplete has been executed on the list of ESM datasets.</p></a></li>
<li><a href='#keyLsNew'><p>Resulting dataset after function genDateTime has been executed on the list of ESM datasets.</p></a></li>
<li><a href='#makeShift'><p>makeShift</p></a></li>
<li><a href='#missingEndDateTime'><p>missingEndDateTime</p></a></li>
<li><a href='#morningControl'><p>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled</p>
out during the morning by participants of the control group.</a></li>
<li><a href='#morningTest'><p>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled</p>
out during the morning by participants of the test group.</a></li>
<li><a href='#printRmInvalid'><p>printRmInvalid</p></a></li>
<li><a href='#printSuggestedShift'><p>printSuggestedShift</p></a></li>
<li><a href='#randomMultSelection'><p>randomMultSelection</p></a></li>
<li><a href='#referenceDf'><p>Dataset with relevant information on participants in an ESM study.</p></a></li>
<li><a href='#referenceDfNew'><p>Dataset 'referenceDf' in modified form</p></a></li>
<li><a href='#refPlausible'><p>refPlausible</p></a></li>
<li><a href='#relevantESVN'><p>relevantESVN</p></a></li>
<li><a href='#RELEVANTINFO_ES'><p>Resulting list after function setES has been executed.</p></a></li>
<li><a href='#relevantREFVN'><p>relevantREFVN</p></a></li>
<li><a href='#RELEVANTVN_ESext'><p>Resulting list after function genDateTime has been executed on the list of ESM datasets.</p></a></li>
<li><a href='#RELEVANTVN_REFext'><p>Resulting list after function genDateTime has been executed on the reference dataset.</p></a></li>
<li><a href='#rmInvalid'><p>rmInvalid</p></a></li>
<li><a href='#setES'><p>setES</p></a></li>
<li><a href='#setREF'><p>setREF</p></a></li>
<li><a href='#splitDateTime'><p>splitDateTime</p></a></li>
<li><a href='#suggestShift'><p>suggestShift</p></a></li>
<li><a href='#tbsqDf'><p>Resulting dataset after function computeTimeBetween has been executed on the raw ESM dataset.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-07-05 12:00:03 UTC</td>
</tr>
<tr>
<td>Title:</td>
<td>Data Preparation During and After the Use of the Experience
Sampling Methodology (ESM)</td>
</tr>
<tr>
<td>Description:</td>
<td>Support in preparing a raw ESM dataset for statistical analysis. Preparation includes the handling of errors (mostly due to technological reasons) and the generating of new variables that are necessary and/or helpful in meeting the conditions when statistically analyzing ESM data. The functions in 'esmprep' are meant to hierarchically lead from bottom, i.e. the raw (separated) ESM dataset(s), to top, i.e. a single ESM dataset ready for statistical analysis. This hierarchy evolved out of my personal experience in working with ESM data.</td>
</tr>
<tr>
<td>Author:</td>
<td>Marcel Miché &lt;esmprep@gmail.com&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Marcel Miché &lt;esmprep@gmail.com&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2)</td>
</tr>
<tr>
<td>Imports:</td>
<td>lubridate (&ge; 1.6.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/mmiche/esmprep">https://github.com/mmiche/esmprep</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-07-05 11:32:01 UTC; mmiche</td>
</tr>
</table>
<hr>
<h2 id='computeDuration'>computeDuration</h2><span id='topic+computeDuration'></span>

<h3>Description</h3>

<p>computeDuration computes the duration between when an ESM questionnaire was started and when it was finished.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeDuration(esDf, RELEVANTVN_ES = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeDuration_+3A_esdf">esDf</code></td>
<td>
<p>a data.frame. A single ESM dataset. It must contain the 2 columns that hold the date-time object for when an ESM questionnaire was started and finished, respectively.</p>
</td></tr>
<tr><td><code id="computeDuration_+3A_relevantvn_es">RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>esDf</code> with the additional column DUR (short for duration).
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 27 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute computeDuration. Start ----------
# RELEVANTINFO_ES is delivered with the package
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
intoleranceDf &lt;- data.frame(prompt = c(2, 3, 4, 1, 1),
expect = c(1, 1, 1, 2, 3))
# expectedDf is a raw ESM dataset, delivered with the package.
intolLs &lt;- intolerable(expectedDf, intoleranceDf, RELEVANTINFO_ES)
randSelLs &lt;- randomMultSelection(intolLs[["cleanedDf"]])
# Prerequisites in order to execute computeDuration. End ------------
# -------------------------------------------------------
# Run function 27 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# randSelLs[["esRandSelIn"]] is the result of function 'randomMultSelection'.
durDf &lt;- computeDuration(randSelLs[["esRandSelIn"]], RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='computeTimeBetween'>computeTimeBetween</h2><span id='topic+computeTimeBetween'></span>

<h3>Description</h3>

<p>computeTimeBetween computes the duration between when an ESM questionnaire was started and when the subsequent one was finished, across all ESM questionnaires per person.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeTimeBetween(esDf, refDf, RELEVANTVN_ES = NULL,
  RELEVANTVN_REF = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeTimeBetween_+3A_esdf">esDf</code></td>
<td>
<p>a data.frame. A single ESM dataset. It must contain the 2 columns that hold the date-time object for when an ESM questionnaire was started and finished, respectively.</p>
</td></tr>
<tr><td><code id="computeTimeBetween_+3A_refdf">refDf</code></td>
<td>
<p>a data.frame. The reference dataset.</p>
</td></tr>
<tr><td><code id="computeTimeBetween_+3A_relevantvn_es">RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
<tr><td><code id="computeTimeBetween_+3A_relevantvn_ref">RELEVANTVN_REF</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setREF">setREF</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>esDf</code> with the additional column TBESQ, i.e. the T_ime B_etween E_xperience S_ampling Q_uestionnaires.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 28 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute computeTimeBetween. Start -------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# Use example list delivered with the package
RELEVANTVN_REF &lt;- RELEVANTVN_REFext
intoleranceDf &lt;- data.frame(prompt = c(2, 3, 4, 1, 1),
expect = c(1, 1, 1, 2, 3))
# expectedDf is a raw ESM dataset, delivered with the package.
intolLs &lt;- intolerable(expectedDf, intoleranceDf, RELEVANTINFO_ES)
randSelLs &lt;- randomMultSelection(intolLs[["cleanedDf"]])
# Prerequisites in order to execute computeTimeBetween. End ---------
# -------------------------------------------------------
# Run function 28 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# randSelLs[["esRandSelIn"]] is the result of function 'randomMultSelection'.
tbsqDf &lt;- computeTimeBetween(randSelLs[["esRandSelIn"]], referenceDfNew, RELEVANTVN_ES,
RELEVANTVN_REF)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='computeTimeLag'>computeTimeLag</h2><span id='topic+computeTimeLag'></span>

<h3>Description</h3>

<p>computeTimeLag computes the duration between the scheduled prompt and the actual start of an ESM questionnaire as well as whether it was started before or after the prompt.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeTimeLag(esDf, RELEVANTVN_ES)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeTimeLag_+3A_esdf">esDf</code></td>
<td>
<p>a data.frame. A single ESM dataset. It must contain the 2 columns that hold the date-time object for when an ESM questionnaire was started and finished, respectively.</p>
</td></tr>
<tr><td><code id="computeTimeLag_+3A_relevantvn_es">RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>esDf</code> with 3 additional columns
</p>

<ol>
<li><p> ST_DATETIME. Date-time object of scheduled start time of the single ESM questionnaire.
</p>
</li>
<li><p> TIME_LAG. The duration between the scheduled start of a single ESM questionnaire and its' actual start time.
</p>
</li>
<li><p> LAG_PA. Dichotomous variable, specifying whether the actual start was prior (P) to the scheduled time (LAG_PA = 0) or afterwards (A) (LAG_PA = 1).
</p>
</li></ol>



<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 26 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute computeTimeLag. Start -----------
# RELEVANTINFO_ES is delivered with the package
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
intoleranceDf &lt;- data.frame(prompt = c(2, 3, 4, 1, 1),
expect = c(1, 1, 1, 2, 3))
# expectedDf is a raw ESM dataset, delivered with the package.
intolLs &lt;- intolerable(expectedDf, intoleranceDf, RELEVANTINFO_ES)
randSelLs &lt;- randomMultSelection(intolLs[["cleanedDf"]])
# Prerequisites in order to execute computeTimeLag. End -------------
# -------------------------------------------------------
# Run function 26 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# randSelLs[["esRandSelIn"]] is the result of function 'randomMultSelection'.
lagDf &lt;- computeTimeLag(randSelLs[["esRandSelIn"]], RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='convertChars'>convertChars</h2><span id='topic+convertChars'></span>

<h3>Description</h3>

<p>convertChars converts specified single characters within specified ESM variables that contain text.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convertChars(esDf, charCols, convDf, ignoreCase = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convertChars_+3A_esdf">esDf</code></td>
<td>
<p>a data.frame. A single ESM dataset. It must contain the 2 columns that hold the date-time object for when an ESM questionnaire was started and finished, respectively.</p>
</td></tr>
<tr><td><code id="convertChars_+3A_charcols">charCols</code></td>
<td>
<p>a vector of character strings. Each character string specifies a column name in the event sampling (raw) dataset which contains text in which specific characters shall be replaced by other characters, e.g. the dashed letter e by e.</p>
</td></tr>
<tr><td><code id="convertChars_+3A_convdf">convDf</code></td>
<td>
<p>a data.frame. The data frame must contain exactly 2 columns, the first column specifies the characters that shall be replaced, the second column specifies the characters that are going to replace the ones in the first column.</p>
</td></tr>
<tr><td><code id="convertChars_+3A_ignorecase">ignoreCase</code></td>
<td>
<p>logical. Enter TRUE if capitalization can be ignored in the course of replacement, else enter FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>esDf</code> Each column which contains text (as specified by the user!) now contains the text with the specific characters being converted (as specified by the user!).
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 16 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute convertChars. Start -------------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# isCompleteLs is a list of datasets, also delivered with the package
esMerged &lt;- esMerge(isCompleteLs, RELEVANTVN_ES)
esMerged[,RELEVANTVN_ES[["ES_IMEI"]]] &lt;- as.character(esMerged[,RELEVANTVN_ES[["ES_IMEI"]]])
findTextIdx &lt;- findChars(esMerged)
# Prerequisites in order to execute convertChars. End ---------------
# -------------------------------------------------------
# Run function 16 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# From result of function 'findChars' select the indices of the items
# in the ESM dataset that contain text answers of the participants.
findTextIdx1 &lt;- findTextIdx[c(1,2,9,10)]
# Use findTextIdx1 to generate the 3rd argument of function 'convertChars'.
textColumns &lt;- names(findTextIdx1)
# Generate data.frame specifying the conversion of single characters.
convertCharsDf &lt;- data.frame(c("ä", "ü"), c("ae", "ue"))
# Apply function. esMerged is the result of function 'esMerge'.
esMerged1 &lt;- convertChars(esMerged, textColumns, convertCharsDf)
# # As default upper and lower case are NOT ignored! If you want them
# # ignored, additionally pass TRUE to the argument ignoreCase, like this:
# convertChars(esMerged, textColumns, convertCharsDf, ignoreCase=TRUE)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='dateTimeFormats'>dateTimeFormats</h2><span id='topic+dateTimeFormats'></span>

<h3>Description</h3>

<p>dateTimeFormats displays the possible date-time options available (with examples).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dateTimeFormats()
</code></pre>


<h3>Value</h3>

<p>No return values. Instead a matrix is displayed with all the options for date-time objects, with examples.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Run this function at any time you want to.
dateTimeFormats()
</code></pre>

<hr>
<h2 id='dateTimeFormats2'>dateTimeFormats2</h2><span id='topic+dateTimeFormats2'></span>

<h3>Description</h3>

<p>dateTimeFormats displays the possible date-time options available (without examples).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dateTimeFormats2()
</code></pre>


<h3>Value</h3>

<p>No return values. Instead a vector is displayed with all the options for date-time objects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Run this function at any time you want to.
dateTimeFormats2()
</code></pre>

<hr>
<h2 id='dayControl'>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled
out during the day by participants of the control group.</h2><span id='topic+dayControl'></span>

<h3>Description</h3>

<p>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled
out during the day by participants of the control group.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dayControl
</code></pre>


<h3>Format</h3>

<p>A data frame with 90 rows and 18 variables:
</p>

<ul>
<li><p> V1. Arbitrary item, answer format numeric, ranging from 0 to 3.
</p>
</li>
<li><p> V1_1. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V1_2. Arbitrary item, answer format text.
</p>
</li>
<li><p> V2. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V2_1. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V3. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V3_1. Arbitrary item, answer format text.
</p>
</li>
<li><p> V4. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V4_1. Arbitrary item, answer format numeric, ranging from 0 to 4.
</p>
</li>
<li><p> V5. Arbitrary item, answer format numeric, ranging from 0 to 6.
</p>
</li>
<li><p> V5_1. Arbitrary item, answer format numeric, ranging from 0 to 6.
</p>
</li>
<li><p> V7. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> survey_name. Name of the ESM version.
</p>
</li>
<li><p> IMEI. IMEI number of the mobile device, used by the participant.
</p>
</li>
<li><p> start_date. Date of when a single ESM questionnaire was started.
</p>
</li>
<li><p> start_time. Time of when a single ESM questionnaire was started.
</p>
</li>
<li><p> end_date. Date of when a single ESM questionnaire was ended.
</p>
</li>
<li><p> end_time. Time of when a single ESM questionnaire was ended.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'># Display the whole dataset in the console
dayControl
</code></pre>

<hr>
<h2 id='dayTest'>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled
out during the day by participants of the test group.</h2><span id='topic+dayTest'></span>

<h3>Description</h3>

<p>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled
out during the day by participants of the test group.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(dayTest)
</code></pre>


<h3>Format</h3>

<p>A data frame with 66 rows and 19 variables:
</p>

<ul>
<li><p> V1. Arbitrary item, answer format numeric, ranging from 0 to 3.
</p>
</li>
<li><p> V1_1. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V1_2. Arbitrary item, answer format text.
</p>
</li>
<li><p> V2. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V2_1. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V3. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V3_1. Arbitrary item, answer format text.
</p>
</li>
<li><p> V4. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V4_1. Arbitrary item, answer format numeric, ranging from 0 to 4.
</p>
</li>
<li><p> V5. Arbitrary item, answer format numeric, ranging from 0 to 6.
</p>
</li>
<li><p> V5_1. Arbitrary item, answer format numeric, ranging from 0 to 6.
</p>
</li>
<li><p> V7. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V8. Arbitrary item, answer format text.
</p>
</li>
<li><p> survey_name. Name of the ESM version.
</p>
</li>
<li><p> IMEI. IMEI number of the mobile device, used by the participant.
</p>
</li>
<li><p> start_date. Date of when a single ESM questionnaire was started.
</p>
</li>
<li><p> start_time. Time of when a single ESM questionnaire was started.
</p>
</li>
<li><p> end_date. Date of when a single ESM questionnaire was ended.
</p>
</li>
<li><p> end_time. Time of when a single ESM questionnaire was ended.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'># Display the whole dataset in the console
dayTest
</code></pre>

<hr>
<h2 id='esAssign'>esAssign</h2><span id='topic+esAssign'></span>

<h3>Description</h3>

<p>esAssign assigns ESM questionnaires to the (selected) persons who generated them.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esAssign(esDf, refDf, RELEVANTINFO_ES = NULL, RELEVANTVN_ES = NULL,
  RELEVANTVN_REF = NULL, singlePerson = NULL, prompted = NULL,
  promptTimeframe = 30, midnightPrompt = FALSE, dstDates = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esAssign_+3A_esdf">esDf</code></td>
<td>
<p>a data.frame. A single ESM dataset. It must contain the 2 columns that hold the date-time object for when an ESM questionnaire was started and finished, respectively.</p>
</td></tr>
<tr><td><code id="esAssign_+3A_refdf">refDf</code></td>
<td>
<p>a data.frame. The reference dataset.</p>
</td></tr>
<tr><td><code id="esAssign_+3A_relevantinfo_es">RELEVANTINFO_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code>.</p>
</td></tr>
<tr><td><code id="esAssign_+3A_relevantvn_es">RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
<tr><td><code id="esAssign_+3A_relevantvn_ref">RELEVANTVN_REF</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setREF">setREF</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
<tr><td><code id="esAssign_+3A_singleperson">singlePerson</code></td>
<td>
<p>a character string. If you want to select a single person (must be contained in the reference dataset) enter its identification code (ID); else all participants in the reference dataset are selected (default).</p>
</td></tr>
<tr><td><code id="esAssign_+3A_prompted">prompted</code></td>
<td>
<p>logical. If there was no prompt per ESM day at all, enter FALSE; else ignore this argument, meaning that per default at least one prompt per ESM day is assumed.</p>
</td></tr>
<tr><td><code id="esAssign_+3A_prompttimeframe">promptTimeframe</code></td>
<td>
<p>an integer value. The default value is 30, i.e. within &quot;genDateTime&quot; <strong>minutes</strong> around each prompt a participant is expected to have answered the ESM questionnaire. This argument must be set to an integer value larger than 0, even if there was no prompt at all. If NA, NULL, 0 is passed to this argument, the function returns an error. If less than &quot;genDateTime&quot; minutes is passed to this argument, the function returns a warning message.</p>
</td></tr>
<tr><td><code id="esAssign_+3A_midnightprompt">midnightPrompt</code></td>
<td>
<p>logical. Default FALSE, i.e. no participant was able to start a questionnaire around the midnight hour. However, if this was possible, set this argument to TRUE, in which case it takes the function <code>esAssign</code> a little longer to do its job, compared to midnightPrompt = FALSE.</p>
</td></tr>
<tr><td><code id="esAssign_+3A_dstdates">dstDates</code></td>
<td>
<p>a vector of character strings. If a check shall be made concerning the daylight saving time (last weekend in March and October, respectively), enter the respective date(s) in the form yyyy-mm-dd as vector, e.g. c(&quot;2007-10-28&quot;, &quot;2008-03-30).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Data can only be assigned to those individuals who are contained in the reference dataset.<br /> <code>esAssign</code> is of utmost importance in preparing the ESM dataset because the results of any statistical analysis depends on the correct assignment of data to the persons who generated it.
New columns in output list of function <code>esAssign</code> are
</p>

<ol>
<li><p> ID. Unique identification code of each participant.
</p>
</li>
<li><p> CV_ES. CV is short for count variable. It counts all the questionnaires that have been filled out by the participant during the ESM period. In incrementing order it starts at 1 and skips a number, whenever a questionnaire is missing.
</p>
</li>
<li><p> CV_ESDAY. This variable counts the single ESM days. In incrementing order it starts at 1. It only skips a number when all questionnaires of that day are missing.
</p>
</li>
<li><p> CV_ESWEEKDAY. This variable counts the weekday, with Monday represented by the value 1, ..., Sunday = 7.
</p>
</li>
<li><p> PROMPT. Correspondance of the actual start time of the questionnaire to its prompt (in our exemplary dataset this ranges between 1 and 4).
</p>
</li>
<li><p> PROMPTEND. Correspondance of the actual end time of the questionnaire to its prompt (in our exemplary dataset this ranges between 1 and 4).
</p>
</li>
<li><p> LAG_MINS. Time difference in minutes (rounded) between the scheduled time of the prompt and the actual start time of a questionnaire.
</p>
</li>
<li><p> ES_MULT. Dichotomous variable. The value 1 represents a questionnaire that has been filled out repeatedly at one specific prompt.
</p>
</li>
<li><p> ES_MULT2. Alternative representation of ES_MULT. The very first questionnaire at a prompt is represented by the value 1, the second questionnaire (i.e. the first repeatedly filled out q.) is represented by the value 2, etc.
</p>
</li>
<li><p> ST. Assigns the prompt/scheduled time (ST) to the actual start time of a questionnaire, by choosing the miminal time difference between all possible prompts (per participant) and the actual start time of the single ESM questionnaire.
</p>
</li>
<li><p> STDATE. Variable is returned only if argument midnightPrompt is set to TRUE. Possible values and meaning: -1 = scheduled start date is prior to actual start date; 0 = scheduled start date and actual start date are equal to one another; 1 = scheduled date is subsequent to actual start date.
</p>
</li>
<li><p> TFRAME. Dichotomous variable. The value 1 represents a questionnaire that is within the time frame, as specified by the user.
</p>
</li>
<li><p> DST. Dichotomous variable. The value 1 represents a questionnaire's date to be equal or later than the daylight saving date, as specified by the user.
</p>
</li>
<li><p> QWST. Dichotomous variable. The value 1 represents a questionnaire to be fully within the scheduled time, i.e. the time differences of both the actual start time and the actual end time are minimal relative to the same scheduled time.
</p>
</li></ol>

<p>Additionally, if the reference dataset contains any duplicates in the column representing the participant IDs, then <code>esAssign</code> stops and an error message is printed in the R console.
</p>


<h3>Value</h3>

<p>The user receives a list containing 4 datasets:
</p>

<ol>
<li><p> ES, i.e. ESM data assigned to selected participants with new columns added, see <strong>Details</strong>.
</p>
</li>
<li><p> ESopt, i.e. the optimal ESM data sequence for all selected participants.
</p>
</li>
<li><p> ESout, i.e. ESM data that couldn't be assigned.
</p>
</li>
<li><p> ESrate, i.e. the average completion rates per participant, both per prompt and overall.
</p>
</li></ol>

<p>The effective ESM completion rates per selected individual and per prompt are also printed to the console. However, these are not the final completion rates, since some of the current questionnaires later might either be removed (see function <code><a href="#topic+intolerable">intolerable</a></code>) or be shifted to a neighboring prompt index (see functions <code><a href="#topic+suggestShift">suggestShift</a></code> and <code><a href="#topic+makeShift">makeShift</a></code>).
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 17 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute esAssign. Start -----------------
# esMerged1 is the raw ESM dataset, also delivered with the package
# referenceDfNew is the modified reference dataset, delivered with
# the package.
# RELEVANTINFO_ES is delivered with the package
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# Use example list delivered with the package
RELEVANTVN_REF &lt;- RELEVANTVN_REFext
# Prerequisites in order to execute esAssign. End -------------------
# -------------------------------------------------------
# Run function 17 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# Assign questionnaires contained in the raw ESM dataset to all participants listed
# in the reference dataset. esMerged1 is the result of function 'convertChars',
# referenceDfNew is the result of function 'genDateTime' or of function
# 'splitDateTime'.
# Run only the first 2 out of 8 participants (saves time). The warning message the
# user receives in this case (2 out of 8 participants) is correct.
esAssigned &lt;- esAssign(esDf = esMerged1, refDf = referenceDfNew[1:2,], RELEVANTINFO_ES,
RELEVANTVN_ES, RELEVANTVN_REF)
# # Assign questionnaires contained in the raw ESM dataset to participant P001 listed
# # in the reference dataset.
# esAssigned &lt;- esAssign(esDf = esMerged1, refDf = referenceDfNew, RELEVANTINFO_ES,
# RELEVANTVN_ES, RELEVANTVN_REF, singlePerson="P001")
# More options can be passed to 'esAssign', see parameter description. Note that when
# setting the argument midnightPrompt to TRUE, esAssign takes a bit longer to do its job.
# Output: List with 4 data.frames.
names(esAssigned)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='esAssigned'>Resulting dataset after function esAssign has been executed on the raw ESM dataset.</h2><span id='topic+esAssigned'></span>

<h3>Description</h3>

<p><strong>Note</strong>: The list of datasets <code>esAssigned</code> is the result of the function <code><a href="#topic+esAssign">esAssign</a></code>, when the raw ESM dataset <code>esMerged1</code> is one of the function arguments. <code>esMerged1</code> is the result of function <code><a href="#topic+convertChars">convertChars</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esAssigned
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 4.</p>

<hr>
<h2 id='esComplete'>esComplete</h2><span id='topic+esComplete'></span>

<h3>Description</h3>

<p>esComplete checks whether each ESM questionnaire is complete as specified by the user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esComplete(dfList, lastItemList)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esComplete_+3A_dflist">dfList</code></td>
<td>
<p>a list. Each element of the list must be a data.frame. Each data.frame is a separate raw ESM dataset/an ESM questionnaire version. If there is just one ESM version the list therefore contains one data.frame.</p>
</td></tr>
<tr><td><code id="esComplete_+3A_lastitemlist">lastItemList</code></td>
<td>
<p>a list. Each list element too must be a list. Each of these inner lists must contain exactly 4 elements:
</p>

<ol>
<li><p> First, a character string specifying the ESM questionnaire version
</p>
</li>
<li><p> Second, a character string specifying the penultimate item of its respective ESM questionnaire version (i.e. the column name of the raw ESM dataset)
</p>
</li>
<li><p> Third, a vector of at least one numeric value, specifying the condition upon which the last item is expected to contain a value, so that the questionnaire can be considered complete, and
</p>
</li>
<li><p> Fourth, a character string specifying the last item of its respective ESM questionnaire version (i.e. the column name of the raw ESM dataset).
</p>
</li></ol>

<p>If there is no condition that determines which is the last item expected to contain a value, then the second and the third argument will have to be set to NA. See <strong>Details</strong> for more information.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If due to some technical error an ESM questionnaire does not contain an end date and/or end time it might be a complete questionnaire nonetheless. Completion can be defined as the last item of the questionnaire containing valid data. In addition it is possible that the value in the penultimate item sets a condition upon which the questionnaire's completion is achieved either if the penultimate item contains a specific value (e.g. 0), which might signal that the questionnaire ends right there. However, if the penultimate item contains a value greater than 0, this might signal that the questionnaire's last item is expected to contain valid data.
</p>


<h3>Value</h3>

<p><code>dfList</code> with additional column INCOMPLETE denoting an ESM questionnaire to be complete (= 0) or incomplete (= 1). If within the 2nd argument <code>lastItemList</code> at least one of the ESM questionnaire versions are passed more than once, then the additional columns will be named INCOMPLETE_i, where i specifies the number of how often an ESM version has been passed (see <strong>Examples</strong>).
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 13 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute esComplete. Start ---------------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# keyLsNew is a list of datasets, also delivered with the package
rmInvLs &lt;- rmInvalid(keyLsNew, RELEVANTVN_ES)
plausibItems &lt;- esItems(dfList=rmInvLs[["dfValid"]], RELEVANTVN_ES)
# Prerequisites in order to execute esComplete. End -----------------
# -------------------------------------------------------
# Run function 13 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# Generate second argument of function 'esComplete'. It's strongly recommended
# to read the explantion of this 2nd argument in the esmprep vignette, function
# 'esComplete'.
lastItemList &lt;- list(
# If in survey version "morningTestGroup" variable "V6" contains the value 0,
# then variable "V6_1" is the last item expected to contain data, else "V6" is the last item
# expected to contain data.
list("morningTestGroup", "V6", 0, "V6_1"),
# In survey version "dayTestGroup" variable "V7" is the last item expected to contain data;
# unlike above, no conditions; NA as 2nd and 3rd element of the inner list are mandatory.
list("dayTestGroup", NA, NA, "V7"),
# Information of all further ESM versions are passed accordingly:
list("eveningTestGroup", "V9", 1, "V9_1"),
list("morningControlGroup", "V6", 0, "V6_1"),
list("dayControlGroup", NA, NA, "V7"),
# The last ESM version has 2 conditions, therefore it is passed 2 times:
# If V8_1 contains a value between 1 and 5, then V8_3 is the last item expected to
# contain data.
list("eveningControlGroup", "V8_1", 1:5, "V8_3"),
# If V8_1 contains the value 0, then V8_2 is the last item expected to contain data.
list("eveningControlGroup", "V8_1", 0, "V8_2"))
# Apply function 'esComplete'. rmInvLs[["dfValid"]] is one of the results of function
# rmInvalid.
isCompleteLs &lt;- esComplete(rmInvLs[["dfValid"]], lastItemList)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='esFinal'>esFinal</h2><span id='topic+esFinal'></span>

<h3>Description</h3>

<p>esFinal generates the final ESM dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esFinal(esDf, esOpt = NULL, complianceRate = NULL,
  RELEVANTINFO_ES = NULL, RELEVANTVN_ES = NULL, maxRows = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esFinal_+3A_esdf">esDf</code></td>
<td>
<p>a data.frame. A single ESM dataset. It must contain the 2 columns that hold the date-time object for when an ESM questionnaire was started and finished, respectively.</p>
</td></tr>
<tr><td><code id="esFinal_+3A_esopt">esOpt</code></td>
<td>
<p>a data.frame. This data.frame is generated as part of a list returned by the function <code><a href="#topic+esAssign">esAssign</a></code>. The name of this list's element is <code>ESopt</code>. Extract this element and pass it to the argument <code>esOpt</code> of this function.</p>
</td></tr>
<tr><td><code id="esFinal_+3A_compliancerate">complianceRate</code></td>
<td>
<p>integer. This value must be set to a value between 0 and 100. If you want to have the completion rates for all participants and you also want to make sure that all participants are kept in the final ESM dataset, simply set the argument <code>complianceRate</code> to 0.</p>
</td></tr>
<tr><td><code id="esFinal_+3A_relevantinfo_es">RELEVANTINFO_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code>.</p>
</td></tr>
<tr><td><code id="esFinal_+3A_relevantvn_es">RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
<tr><td><code id="esFinal_+3A_maxrows">maxRows</code></td>
<td>
<p>a numeric value. The number of data lines (per participant)  in the final event sampling dataset; must be equal for all participants. If no number is entered the maximum number across all participants is used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The empty rows will either denote ESM questionnaires that were missed by the participant or it will denote fillers, i.e. rows of empty data to fill up the number of rows to be equal across all participants The number of maximum rows per participant either are computed by searching the actual maximum number of questionnaires started by the participant, or by what the user defines to be the maximum number of questionnaires (no less than 2).
</p>


<h3>Value</h3>

<p>The user receives a list containing 3 elements:
</p>

<ol>
<li><p> ESfinal, i.e. with empty rows of data added and with 2 additional columns MISSED and FILLER. MISSED refers to questionnaires that should have been answered by the participants but weren't. FILLER refers to empty rows of data due to all participants having to have equally many rows of data for multilevel modeling. See <strong>Details</strong> for more information..
</p>
</li>
<li><p> ESrateFinal, i.e. the average completion rates per participant, both per prompt and overall.
</p>
</li>
<li><p> ESfinalOut, i.e. ESM data that contains participants that won't be used for statistical analyses due to having less than a minimum number of answered ESM questionnaires. If no participant is deselected a character string is returned that affirms that no deselection took place.
</p>
</li></ol>

<p>Unlike the interim result returned by the function <code><a href="#topic+esAssign">esAssign</a></code> (whenever there was at least one daily prompt) the data.frame <code>ESrateFinal</code> shows the final completion rates per participant.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 29 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute esFinal. Start ------------------
# RELEVANTINFO_ES is delivered with the package
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# tbsqDf is a raw ESM dataset, delivered with the package.
# Prerequisites in order to execute esFinal. End --------------------
# -------------------------------------------------------
# Run function 29 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# tbsqDf is the result of function 'computeTimeBetween'.
esDfFin &lt;- esFinal(tbsqDf, esOpt=esAssigned[["ESopt"]], complianceRate=50,
RELEVANTINFO_ES, RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='esIdentical'>esIdentical</h2><span id='topic+esIdentical'></span>

<h3>Description</h3>

<p>esIdentical checks whether there are fully identical lines of data in the ESM dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esIdentical(esDf, RELEVANTVN_ES = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esIdentical_+3A_esdf">esDf</code></td>
<td>
<p>a data.frame. A single ESM dataset. It must contain the 2 columns that hold the date-time object for when an ESM questionnaire was started and finished, respectively.</p>
</td></tr>
<tr><td><code id="esIdentical_+3A_relevantvn_es">RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>At least 2 ESM questionnaires must be 100 percent identical in order to be registered as duplicates.
</p>


<h3>Value</h3>

<p><code>esDf</code> with the additional column IDENT denoting an ESM questionnaire to be unique (= 0) or to be duplicated (= 1).
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 19 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute esIdentical. Start --------------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# esAssigned is a list of datasets, delivered with the package. It is
# the result of the assignment of the ESM questionnaires to ALL 8
# participants in the reference dataset.
noEndDf &lt;- missingEndDateTime(esAssigned[["ES"]], RELEVANTVN_ES)
# Prerequisites in order to execute esIdentical. End ----------------
# -------------------------------------------------------
# Run function 19 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# noEndDf is the result of function 'noEndDateTime'.
identDf &lt;- esIdentical(noEndDf, RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='esItems'>esItems</h2><span id='topic+esItems'></span>

<h3>Description</h3>

<p>esItems registers the ESM questionnaire items as opposed to variables containing information about the questionnaire, e.g. the time stamps of when it was started and finished.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esItems(dfList, RELEVANTVN_ES = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esItems_+3A_dflist">dfList</code></td>
<td>
<p>a list. Each element of the list must be a data.frame. Each data.frame is a separate raw ESM dataset/an ESM questionnaire version. If there is just one ESM version the list therefore contains one data.frame.</p>
</td></tr>
<tr><td><code id="esItems_+3A_relevantvn_es">RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with all the item names per ESM questionnaire version. Columns specifying dates, times, or IMEI numbers - as specified in function <code><a href="#topic+setES">setES</a></code> - are not used in function <code><a href="#topic+esPlausible">esPlausible</a></code>, which takes the result of <code>esItems</code> as 2nd argument.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 11 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute esItems. Start ------------------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# keyLsNew is a list of datasets, also delivered with the package
rmInvLs &lt;- rmInvalid(keyLsNew, RELEVANTVN_ES)
# Prerequisites in order to execute esItems. End --------------------
# -------------------------------------------------------
# Run function 11 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# Extract the item names of the raw ESM datasets. rmInvLs[["dfValid"]]
# is one of the results from function 'rmInvalid'
plausibItems &lt;- esItems(dfList=rmInvLs[["dfValid"]], RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='esList'>esList</h2><span id='topic+esList'></span>

<h3>Description</h3>

<p>esList holds all separate raw ESM datasets in one list, which is an R-built-in data structure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esList(dfList, RELEVANTVN_ES = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esList_+3A_dflist">dfList</code></td>
<td>
<p>a list. Each element of the list must be a data.frame. Each data.frame is a separate raw ESM dataset/an ESM questionnaire version. If there is just one ESM version the list therefore contains one data.frame.</p>
</td></tr>
<tr><td><code id="esList_+3A_relevantvn_es">RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The separate raw ESM datasets are still separated in the list. Each list element is named according to the survey version as specified by the content of the respective column name in each ESM dataset.
</p>


<h3>Value</h3>

<p>A named list of the ESM datasets, where each list name is equal to the name of the respective ESM questionnaire version.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 5 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute esList. Start --------------------
# Generate argument RELEVANTVN_ES
relEs &lt;- relevantESVN(svyName="survey_name", IMEI="IMEI",
STARTDATE="start_date", STARTTIME="start_time",
ENDDATE="end_date", ENDTIME="end_time")
imeiNumbers &lt;- as.character(referenceDf$imei)
surveyNames &lt;- c("morningTestGroup", "dayTestGroup", "eveningTestGroup",
"morningControlGroup", "dayControlGroup", "eveningControlGroup")
RELEVANT_ES &lt;- setES(4, imeiNumbers, surveyNames, relEs)
RELEVANTVN_ES &lt;- RELEVANT_ES[["RELEVANTVN_ES"]]
# Prerequisites in order to execute esList. End ----------------------
# ------------------------------------------------------
# Run function 6 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# 6 exemplary raw ESM (sub-)datasets.
esLs &lt;- esList(list(morningControl, dayControl, eveningControl,
morningTest, dayTest, eveningTest), RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='esMerge'>esMerge</h2><span id='topic+esMerge'></span>

<h3>Description</h3>

<p>esMerge merges all the ESM versions into one single dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esMerge(dfList, RELEVANTVN_ES = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esMerge_+3A_dflist">dfList</code></td>
<td>
<p>a list. Each element of the list must be a data.frame. Each data.frame is a separate raw ESM dataset/an ESM questionnaire version. If there is just one ESM version the list therefore contains one data.frame.</p>
</td></tr>
<tr><td><code id="esMerge_+3A_relevantvn_es">RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>One single (merged) ESM dataset, where all datasets of the argument <code>dfList</code> are included.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 14 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute esMerge. Start ------------------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# isCompleteLs is a list of datasets, also delivered with the package
# Prerequisites in order to execute esMerge. End --------------------
# -------------------------------------------------------
# Run function 14 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# Merge all raw ESM datasets. isCompleteLs is the result
# of function 'esComplete'.
esMerged &lt;- esMerge(isCompleteLs, RELEVANTVN_ES)
# If preferred convert the 15 digit IMEI number from scientfic notation to text.
esMerged[,RELEVANTVN_ES[["ES_IMEI"]]] &lt;- as.character(esMerged[,RELEVANTVN_ES[["ES_IMEI"]]])
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='esMerged1'>Resulting dataset after function convertChars has been executed on the raw ESM dataset.</h2><span id='topic+esMerged1'></span>

<h3>Description</h3>

<p><strong>Note</strong>: The dataset <code>esMerged1</code> is the result of the function <code><a href="#topic+convertChars">convertChars</a></code>, when the raw ESM dataset <code>esMerged</code> is one of the function arguments. <code>esMerged</code> is the result of function <code><a href="#topic+esMerge">esMerge</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esMerged1
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 228 rows and 32 columns.</p>

<hr>
<h2 id='esmprep'>esmprep: A package for preparing raw data in research that uses the Experience-Sampling-Methodology (ESM).</h2><span id='topic+esmprep'></span><span id='topic+esmprep-package'></span>

<h3>Description</h3>

<p>The 'esmprep' package helps to prepare a raw ESM dataset for statistical analysis. Preparation includes the handling of errors (mostly due to technological reasons) and the generating of new variables that are necessary and/or helpful in meeting the conditions when statistically analyzing ESM data. The functions in 'esmprep' are meant to hierarchically lead from bottom, i.e. the raw (separated) ESM dataset(s), to top, i.e. a single ESM dataset ready for statistical analysis.
</p>


<h3>'esmprep' functions</h3>

<p>The 'esmprep' functions have an hierarchical order, in which they should be run. See <strong>Examples</strong> for the function's hiararchy.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# -o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-
# N O T E.
# DEAR USER OF THE 'esmprep' PACKAGE,
# THE FOLLOWING CODE IS AN EXAMPLE OF ALL THE PACKAGE'S FUNCTIONS, WHICH ARE
# LARGELY INTERDEPENDENT AND WHICH ARE SUPPOSED TO RUN IN AN HIERARCHICAL ORDER.
# AFTER HAVING LOADED THE PACKAGE YOU CAN COPY PASTE THE ENTIRE CODE INTO YOUR
# CONSOLE OR INTO A SCRIPT AND THEN RUN IT.
# -o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-
# ---------------------------------------------------------------------------------
# Load the 'esmprep' package =&gt; library(esmprep)
# ---------------------------------------------------------------------------------
# FUNCTION NAME: relevantREFVN
# --------------
# This is function 1 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# ------------------------------------------------------
# Run function 1 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# With date and time as separate arguments
relRef &lt;- relevantREFVN(ID="id", IMEI="imei", ST="st",
STARTDATE="start_date", STARTTIME="start_time",
ENDDATE="end_date", ENDTIME="end_time")
# With date-time objects instead of separate date and time
relRef &lt;- relevantREFVN(ID="id", IMEI="imei", ST="st",
START_DATETIME="start_dateTime", END_DATETIME="end_dateTime")
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: setREF
# --------------
# This is function 2 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute setREF. Start  ------------------
relRef &lt;- relevantREFVN(ID="id", IMEI="imei", ST="st",
STARTDATE="start_date", STARTTIME="start_time",
ENDDATE="end_date", ENDTIME="end_time")
# Prerequisites in order to execute setREF. End ---------------------
# ------------------------------------------------------
# Run function 2 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# 4 is the number of daily prompts.
# relRef is the result of function 'relevantREFVN'
# Relevant variables names of reference dataset.
(RELEVANTVN_REF &lt;- setREF(4, relRef))
# With date-time objects instead of separate date and time
relRef &lt;- relevantREFVN(ID="id", IMEI="imei", ST="st",
START_DATETIME="start_dateTime", END_DATETIME="end_dateTime")
(RELEVANTVN_REF &lt;- setREF(4, relRef))
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: relevantESVN
# --------------
# This is function 3 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# ------------------------------------------------------
# Run function 3 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# With date and time as separate arguments
relEs &lt;- relevantESVN(svyName="survey_name", IMEI="IMEI",
STARTDATE="start_date", STARTTIME="start_time",
ENDDATE="end_date", ENDTIME="end_time")
# With date-time objects instead of separate date and time
relEs &lt;- relevantESVN(svyName="survey_name", IMEI="IMEI",
START_DATETIME="start_dateTime", END_DATETIME="end_dateTime")
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: setES
# --------------
# This is function 4 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute setES. Start --------------------
relEs &lt;- relevantESVN(svyName="survey_name", IMEI="IMEI",
STARTDATE="start_date", STARTTIME="start_time",
ENDDATE="end_date", ENDTIME="end_time")
# Prerequisites in order to execute setES. End ----------------------
# ------------------------------------------------------
# Run function 4 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# imeiNumbers is the vector containing all IMEI numbers used in
# the ESM study; use the respective entries in the referenceDf.
imeiNumbers &lt;- as.character(referenceDf$imei)
# surveyNames is the vector containing all ESM version names.
surveyNames &lt;- c(
# Test group
   "morningTestGroup", "dayTestGroup", "eveningTestGroup",
# Control group
   "morningControlGroup", "dayControlGroup", "eveningControlGroup")
# 4 is the number of daily prompts
# relEs is the result of function 'relevantESVN'
RELEVANT_ES &lt;- setES(4, imeiNumbers, surveyNames, relEs)
# Extract relevant ESM general information
RELEVANTINFO_ES &lt;- RELEVANT_ES[["RELEVANTINFO_ES"]]
# Extract list of relevant variables names of raw ESM datasets.
RELEVANTVN_ES &lt;- RELEVANT_ES[["RELEVANTVN_ES"]]

# With date-time objects instead of separate date and time
relEs &lt;- relevantESVN(svyName="survey_name", IMEI="IMEI",
START_DATETIME="start_dateTime", END_DATETIME="end_dateTime")
RELEVANT_ES &lt;- setES(4, imeiNumbers, surveyNames, relEs)
# Extract relevant ESM general information
RELEVANTINFO_ES &lt;- RELEVANT_ES[["RELEVANTINFO_ES"]]
# Extract list of relevant variables names of raw ESM datasets.
RELEVANTVN_ES &lt;- RELEVANT_ES[["RELEVANTVN_ES"]]
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: esList
# --------------
# This is function 5 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute esList. Start --------------------
# Generate argument RELEVANTVN_ES
relEs &lt;- relevantESVN(svyName="survey_name", IMEI="IMEI",
STARTDATE="start_date", STARTTIME="start_time",
ENDDATE="end_date", ENDTIME="end_time")
imeiNumbers &lt;- as.character(referenceDf$imei)
surveyNames &lt;- c("morningTestGroup", "dayTestGroup", "eveningTestGroup",
"morningControlGroup", "dayControlGroup", "eveningControlGroup")
RELEVANT_ES &lt;- setES(4, imeiNumbers, surveyNames, relEs)
RELEVANTVN_ES &lt;- RELEVANT_ES[["RELEVANTVN_ES"]]
# Prerequisites in order to execute esList. End ----------------------
# ------------------------------------------------------
# Run function 6 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# 6 exemplary raw ESM (sub-)datasets.
esLs &lt;- esList(list(morningControl, dayControl, eveningControl,
morningTest, dayTest, eveningTest), RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: genKey
# --------------
# This is function 6 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute genKey. Start -------------------
relEs &lt;- relevantESVN(svyName="survey_name", IMEI="IMEI",
STARTDATE="start_date", STARTTIME="start_time",
ENDDATE="end_date", ENDTIME="end_time")
imeiNumbers &lt;- as.character(referenceDf$imei)
surveyNames &lt;- c("morningTestGroup", "dayTestGroup", "eveningTestGroup",
"morningControlGroup", "dayControlGroup", "eveningControlGroup")
RELEVANT_ES &lt;- setES(4, imeiNumbers, surveyNames, relEs)
RELEVANTVN_ES &lt;- RELEVANT_ES[["RELEVANTVN_ES"]]
esLs &lt;- esList(list(morningControl, dayControl, eveningControl,
morningTest, dayTest, eveningTest), RELEVANTVN_ES)
# Prerequisites in order to execute genKey. End ---------------------
# ------------------------------------------------------
# Run function 6 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# esLs is the result of function 'esList'.
keyLs &lt;- genKey(esLs)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: genDateTime
# --------------
# This is function 7 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute genDateTime. Start --------------
relEs &lt;- relevantESVN(svyName="survey_name", IMEI="IMEI",
STARTDATE="start_date", STARTTIME="start_time",
ENDDATE="end_date", ENDTIME="end_time")
imeiNumbers &lt;- as.character(referenceDf$imei)
surveyNames &lt;- c("morningTestGroup", "dayTestGroup", "eveningTestGroup",
"morningControlGroup", "dayControlGroup", "eveningControlGroup")
RELEVANT_ES &lt;- setES(4, imeiNumbers, surveyNames, relEs)
RELEVANTINFO_ES &lt;- RELEVANT_ES[["RELEVANTINFO_ES"]]
RELEVANTVN_ES &lt;- RELEVANT_ES[["RELEVANTVN_ES"]]
esLs &lt;- esList(list(morningControl, dayControl, eveningControl,
morningTest, dayTest, eveningTest), RELEVANTVN_ES)
keyLs &lt;- genKey(esLs)
relRef &lt;- relevantREFVN(ID="id", IMEI="imei", ST="st",
STARTDATE="start_date", STARTTIME="start_time",
ENDDATE="end_date", ENDTIME="end_time")
RELEVANTVN_REF &lt;- setREF(4, relRef)
# Prerequisites in order to execute genDateTime. End ----------------
# ------------------------------------------------------
# Run function 7 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# Applying function to reference dataset (7a of 29)
referenceDfList &lt;- genDateTime(referenceDf, "REF", RELEVANTINFO_ES, RELEVANTVN_ES,
RELEVANTVN_REF)

# Extract reference dataset from output
referenceDfNew &lt;- referenceDfList[["refOrEsDf"]]

# Extract extended list of relevant variables names of reference dataset
RELEVANTVN_REF &lt;- referenceDfList[["extendedVNList"]]

# Applying function to raw ESM dataset(s) (7b of 29)
# keyLs is the result of function 'genKey'.
keyList &lt;- genDateTime(keyLs, "ES", RELEVANTINFO_ES, RELEVANTVN_ES,
RELEVANTVN_REF)

# Extract list of raw ESM datasets from output
keyLsNew &lt;- keyList[["refOrEsDf"]]

# Extract extended list of relevant variables names of raw ESM datasets
RELEVANTVN_ES &lt;- keyList[["extendedVNList"]]
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: refPlausible
# --------------
# This is function 8 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute refPlausible. Start ------
# Use example list delivered with the package
RELEVANTVN_REF &lt;- RELEVANTVN_REFext
# Prerequisites in order to execute refPlausible. End --------
# ------------------------------------------------------
# Run function 8 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# In an ESM study all participants answer questionnaires during a time period which
# usually is equal across all participants (e.g. seven days). This function enables the
# user to check whether in the reference dataset the ESM period is plausible. For
# instance, a negative ESM time period would clearly be implausible, e.g. the user
# setting the beginning of the ESM time period after the end of it (which is
# impossible unless a functioning time machine is involved :-) ).
referenceDfNew1 &lt;- refPlausible(refDf=referenceDfNew, units="days", RELEVANTVN_REF)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: rmInvalid
# --------------
# This is function 9 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute rmInvalid. Start ----------------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# keyLsNew is a list of datasets, also delivered with the package
# Prerequisites in order to execute rmInvalid. End ------------------
# ------------------------------------------------------
# Run function 9 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# keyLsNew is the result of function 'genDateTime' (or of function 'splitDateTime').
rmInvLs &lt;- rmInvalid(keyLsNew, RELEVANTVN_ES)
# Result of function 'rmInvalid' is a list with 4 elements:
names(rmInvLs)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: printRmInvalid
# --------------
# This is function 10 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute printRmInvalid. Start -----------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# keyLsNew is a list of datasets, also delivered with the package
rmInvLs &lt;- rmInvalid(keyLsNew, RELEVANTVN_ES)
# Prerequisites in order to execute printRmInvalid. End -------------
# ------------------------------------------------------
# Run function 10 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# rmInvLs is the result of function 'rmInvalid'. Display its result
# in the console both tablulated and in detail.
key_rmLs &lt;- printRmInvalid(rmInvLs, smr="both", RELEVANTVN_ES)
# Display the list containing the KEY values of all questionnaires
# that have been removed.
key_rmLs
# Since there have been warning messages in 4 of the 6 datasets,
# the first ESM item (name: V1) was automatically converted to class
# character, although it is numeric. So we'll re-convert V1's class.
# Check V1 prior to conversion
str(rmInvLs[["dfValid"]][[2]][1:2])
rmInvLs[["dfValid"]] &lt;- sapply(rmInvLs[["dfValid"]], function(x) {
     x[,"V1"] &lt;- as.numeric(x[,"V1"])
     return(x) } )
# Check V1 after conversion
str(rmInvLs[["dfValid"]][[2]][1:2])
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: esItems
# --------------
# This is function 11 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute esItems. Start ------------------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# keyLsNew is a list of datasets, also delivered with the package
rmInvLs &lt;- rmInvalid(keyLsNew, RELEVANTVN_ES)
# Prerequisites in order to execute esItems. End --------------------
# -------------------------------------------------------
# Run function 11 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# Extract the item names of the raw ESM datasets. rmInvLs[["dfValid"]]
# is one of the results from function 'rmInvalid'
plausibItems &lt;- esItems(dfList=rmInvLs[["dfValid"]], RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: esPlausible
# --------------
# This is function 12 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute esPlausible. Start --------------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# keyLsNew is a list of datasets, also delivered with the package
rmInvLs &lt;- rmInvalid(keyLsNew, RELEVANTVN_ES)
plausibItems &lt;- esItems(dfList=rmInvLs[["dfValid"]], RELEVANTVN_ES)
# Prerequisites in order to execute esPlausible. End ----------------
# -------------------------------------------------------
# Run function 12 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# Help checking the plausibility of items in the raw ESM datasets. rmInvLs[["dfValid"]]
# is one of the results from function 'rmInvalid'.
# plausibItems is the result of function 'esItems'.
plausibLs &lt;- esPlausible(dfList=rmInvLs[["dfValid"]], itemVecList=plausibItems)
# Display the results (4 data frames) to the console
# plausibNames gives an overview of the item names across all ESM versions
plausibLs[["plausibNames"]]
# plausibClass gives an overview of the variable types of all items
plausibLs[["plausibClass"]]
# plausibRowNa shows for each ESM version the number of lines in the raw
# ESM datasets and how much percent of the data is missing (NAs).
plausibLs[["plausibRowNa"]]
# plausibMinMax shows for each numeric variable the minimum and maximum.
plausibLs[["plausibMinMax"]]
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: esComplete
# --------------
# This is function 13 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute esComplete. Start ---------------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# keyLsNew is a list of datasets, also delivered with the package
rmInvLs &lt;- rmInvalid(keyLsNew, RELEVANTVN_ES)
plausibItems &lt;- esItems(dfList=rmInvLs[["dfValid"]], RELEVANTVN_ES)
# Prerequisites in order to execute esComplete. End -----------------
# -------------------------------------------------------
# Run function 13 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# Generate second argument of function 'esComplete'. It's strongly recommended
# to read the explantion of this 2nd argument in the esmprep vignette, function
# 'esComplete'.
lastItemList &lt;- list(
# If in survey version "morningTestGroup" variable "V6" contains the value 0,
# then variable "V6_1" is the last item expected to contain data, else "V6" is the last item
# expected to contain data.
list("morningTestGroup", "V6", 0, "V6_1"),
# In survey version "dayTestGroup" variable "V7" is the last item expected to contain data;
# unlike above, no conditions; NA as 2nd and 3rd element of the inner list are mandatory.
list("dayTestGroup", NA, NA, "V7"),
# Information of all further ESM versions are passed accordingly:
list("eveningTestGroup", "V9", 1, "V9_1"),
list("morningControlGroup", "V6", 0, "V6_1"),
list("dayControlGroup", NA, NA, "V7"),
# The last ESM version has 2 conditions, therefore it is passed 2 times:
# If V8_1 contains a value between 1 and 5, then V8_3 is the last item expected to
# contain data.
list("eveningControlGroup", "V8_1", 1:5, "V8_3"),
# If V8_1 contains the value 0, then V8_2 is the last item expected to contain data.
list("eveningControlGroup", "V8_1", 0, "V8_2"))
# Apply function 'esComplete'. rmInvLs[["dfValid"]] is one of the results of function
# rmInvalid.
isCompleteLs &lt;- esComplete(rmInvLs[["dfValid"]], lastItemList)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: esMerge
# --------------
# This is function 14 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute esMerge. Start ------------------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# isCompleteLs is a list of datasets, also delivered with the package
# Prerequisites in order to execute esMerge. End --------------------
# -------------------------------------------------------
# Run function 14 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# Merge all raw ESM datasets. isCompleteLs is the result
# of function 'esComplete'.
esMerged &lt;- esMerge(isCompleteLs, RELEVANTVN_ES)
# If preferred convert the 15 digit IMEI number from scientfic notation to text.
esMerged[,RELEVANTVN_ES[["ES_IMEI"]]] &lt;- as.character(esMerged[,RELEVANTVN_ES[["ES_IMEI"]]])
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: findChars
# --------------
# This is function 15 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute findChars. Start ----------------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# isCompleteLs is a list of datasets, also delivered with the package
esMerged &lt;- esMerge(isCompleteLs, RELEVANTVN_ES)
esMerged[,RELEVANTVN_ES[["ES_IMEI"]]] &lt;- as.character(esMerged[,RELEVANTVN_ES[["ES_IMEI"]]])
# Prerequisites in order to execute findChars. End ------------------
# -------------------------------------------------------
# Run function 15 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# esMerged is the result of function 'esMerge'
findTextIdx &lt;- findChars(esMerged)
# Display structure of function output
str(findTextIdx)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: convertChars
# --------------
# This is function 16 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute convertChars. Start -------------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# isCompleteLs is a list of datasets, also delivered with the package
esMerged &lt;- esMerge(isCompleteLs, RELEVANTVN_ES)
esMerged[,RELEVANTVN_ES[["ES_IMEI"]]] &lt;- as.character(esMerged[,RELEVANTVN_ES[["ES_IMEI"]]])
findTextIdx &lt;- findChars(esMerged)
# Prerequisites in order to execute convertChars. End ---------------
# -------------------------------------------------------
# Run function 16 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# From result of function 'findChars' select the indices of the items
# in the ESM dataset that contain text answers of the participants.
findTextIdx1 &lt;- findTextIdx[c(1,2,9,10)]
# Use findTextIdx1 to generate the 3rd argument of function 'convertChars'.
textColumns &lt;- names(findTextIdx1)
# Generate data.frame specifying the conversion of single characters.
convertCharsDf &lt;- data.frame(c("ä", "ü"), c("ae", "ue"))
# Apply function. esMerged is the result of function 'esMerge'.
esMerged1 &lt;- convertChars(esMerged, textColumns, convertCharsDf)
# # As default upper and lower case are NOT ignored! If you want them
# # ignored, additionally pass TRUE to the argument ignoreCase, like this:
# convertChars(esMerged, textColumns, convertCharsDf, ignoreCase=TRUE)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: esAssign
# --------------
# This is function 17 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute esAssign. Start -----------------
# esMerged1 is the raw ESM dataset, also delivered with the package
# referenceDfNew is the modified reference dataset, delivered with
# the package.
# RELEVANTINFO_ES is delivered with the package
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# Use example list delivered with the package
RELEVANTVN_REF &lt;- RELEVANTVN_REFext
# Prerequisites in order to execute esAssign. End -------------------
# -------------------------------------------------------
# Run function 17 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# Assign questionnaires contained in the raw ESM dataset to all participants listed
# in the reference dataset. esMerged1 is the result of function 'convertChars',
# referenceDfNew is the result of function 'genDateTime' or of function
# 'splitDateTime'.
# Run only the first 2 out of 8 participants (saves time). The warning message the
# user receives in this case (2 out of 8 participants) is correct.
esAssigned &lt;- esAssign(esDf = esMerged1, refDf = referenceDfNew[1:2,], RELEVANTINFO_ES,
RELEVANTVN_ES, RELEVANTVN_REF)
# # Assign questionnaires contained in the raw ESM dataset to participant P001 listed
# # in the reference dataset.
# esAssigned &lt;- esAssign(esDf = esMerged1, refDf = referenceDfNew, RELEVANTINFO_ES,
# RELEVANTVN_ES, RELEVANTVN_REF, singlePerson="P001")
# More options can be passed to 'esAssign', see parameter description. Note that when
# setting the argument midnightPrompt to TRUE, esAssign takes a bit longer to do its job.
# Output: List with 4 data.frames.
names(esAssigned)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: missingEndDateTime
# --------------
# This is function 18 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute missingEndDateTime. Start -------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# esAssigned is a list of datasets, delivered with the package. It is
# the result of the assignment of the ESM questionnaires to ALL 8
# participants in the reference dataset.
# Prerequisites in order to execute missingEndDateTime. End ---------
# -------------------------------------------------------
# Run function 18 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# esAssigned[["ES"]] is one of the results of function 'esAssign'.
noEndDf &lt;- missingEndDateTime(esAssigned[["ES"]], RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: esIdentical
# --------------
# This is function 19 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute esIdentical. Start --------------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# esAssigned is a list of datasets, delivered with the package. It is
# the result of the assignment of the ESM questionnaires to ALL 8
# participants in the reference dataset.
noEndDf &lt;- missingEndDateTime(esAssigned[["ES"]], RELEVANTVN_ES)
# Prerequisites in order to execute esIdentical. End ----------------
# -------------------------------------------------------
# Run function 19 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# noEndDf is the result of function 'noEndDateTime'.
identDf &lt;- esIdentical(noEndDf, RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: suggestShift
# --------------
# This is function 20 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute suggestShift. Start -------------
# Use example list delivered with the package
RELEVANTINFO_ES &lt;- RELEVANTINFO_ES
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# esAssigned is a list of datasets, delivered with the package. It is
# the result of the assignment of the ESM questionnaires to ALL 8
# participants in the reference dataset.
noEndDf &lt;- missingEndDateTime(esAssigned[["ES"]], RELEVANTVN_ES)
identDf &lt;- esIdentical(noEndDf, RELEVANTVN_ES)
# Prerequisites in order to execute suggestShift. End ---------------
# -------------------------------------------------------
# Run function 20 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# identDf is the result of function 'esIdentical'.
# 100 represents the number of minutes that at least must have passed
# between the scheduled start of an ESM questionnaire at its actual start
# in order for the questionnaire to be eligible for shifting (see function
# makeShift).
sugShift &lt;- suggestShift(identDf, 100, RELEVANTINFO_ES, RELEVANTVN_ES)
# Display output element 'suggestShiftDf':
sugShift$suggestShiftDf
# Display output element 'printShiftDf':
sugShift$printShiftDf
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: printSuggestedShift
# --------------
# This is function 21 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute printSuggestedShift. Start ------
# Use example list delivered with the package
RELEVANTINFO_ES &lt;- RELEVANTINFO_ES
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# esAssigned is a list of datasets, delivered with the package. It is
# the result of the assignment of the ESM questionnaires to ALL 8
# participants in the reference dataset.
noEndDf &lt;- missingEndDateTime(esAssigned[["ES"]], RELEVANTVN_ES)
identDf &lt;- esIdentical(noEndDf, RELEVANTVN_ES)
sugShift &lt;- suggestShift(identDf, 100, RELEVANTINFO_ES, RELEVANTVN_ES)
# Prerequisites in order to execute printSuggestedShift. End --------
# -------------------------------------------------------
# Run function 21 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# Display the result of function 'suggestShift' in the console.
printSuggestedShift(sugShift, RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: makeShift
# --------------
# This is function 22 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute makeShift. Start ----------------
# RELEVANTINFO_ES is delivered with the package
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# Use example list delivered with the package
RELEVANTVN_REF &lt;- RELEVANTVN_REFext
# esAssigned is a list of datasets, delivered with the package. It is
# the result of the assignment of the ESM questionnaires to ALL 8
# participants in the reference dataset.
noEndDf &lt;- missingEndDateTime(esAssigned[["ES"]], RELEVANTVN_ES)
identDf &lt;- esIdentical(noEndDf, RELEVANTVN_ES)
sugShift &lt;- suggestShift(identDf, 100, RELEVANTINFO_ES, RELEVANTVN_ES)
# Prerequisites in order to execute makeShift. End -------------------
# -------------------------------------------------------
# Run function 22 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# sugShift is the result of function 'suggestShift'. referenceDfNew is the result
# of function 'genDateTime' or of function 'splitDateTime'.
# keyPromptDf is generated by using part of the output of function suggestShift,
# i.e. by selecting the columns NEW_PROMPT and SHIFTKEY from suggestShiftDf.
keyPromptDf &lt;- sugShift$suggestShiftDf[,c("NEW_PROMPT", "SHIFTKEY")]
madeShift &lt;- makeShift(sugShift, referenceDfNew, keyPromptDf, RELEVANTINFO_ES, RELEVANTVN_REF)
# Tip! Display the result of function 'makeShift' in the console
# in order to check whether the shifting was successful.
printSuggestedShift(madeShift, RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: expectedPromptIndex
# --------------
# This is function 23 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute makeShift. Start ----------------
# Use example list delivered with the package
RELEVANTINFO_ES &lt;- RELEVANTINFO_ES
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# Use example list delivered with the package
RELEVANTVN_REF &lt;- RELEVANTVN_REFext
# esAssigned is a list of datasets, delivered with the package. It is
# the result of the assignment of the ESM questionnaires to ALL 8
# participants in the reference dataset.
noEndDf &lt;- missingEndDateTime(esAssigned[["ES"]], RELEVANTVN_ES)
identDf &lt;- esIdentical(noEndDf, RELEVANTVN_ES)
sugShift &lt;- suggestShift(identDf, 100, RELEVANTINFO_ES, RELEVANTVN_ES)
keyPromptDf &lt;- sugShift$suggestShiftDf[,c("NEW_PROMPT", "SHIFTKEY")]
madeShift &lt;- makeShift(sugShift, referenceDfNew, keyPromptDf, RELEVANTINFO_ES, RELEVANTVN_REF)
# Prerequisites in order to execute makeShift. End -------------------
# -------------------------------------------------------
# Run function 23 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# Generate second argument of function 'expectedPromptIndex'. It's strongly
# recommended to read the explanation of this 2nd argument in the esmprep
# vignette, function 'expectedPromptIndex'.
expIdxList &lt;- list(
# I - the user - expect in the ESM version morningTestGroup that
# prompt no.1 is always linked to the value 1.
list("morningTestGroup", 1, 1),
# I - the user - expect in the ESM version dayTestGroup that
# prompt no. 2 and no.3 are always linked to the value 2.
list("dayTestGroup", c(2, 3), 2),
# Information of all further ESM versions are passed accordingly:
list("eveningTestGroup", 4, 3),
list("morningControlGroup", 1, 1),
list("dayControlGroup", c(2,3), 2),
list("eveningControlGroup", 4, 3))
# madeShiftDf$esDf is part of the output of function 'makeShift', if at
# least one questionnaire was shifted to a neighboring prompt index.
expectedDf &lt;- expectedPromptIndex(madeShift$esDf, expIdxList, RELEVANTINFO_ES,
RELEVANTVN_ES)
# If no questionnaire is suggested for shifting (see function suggestShift)
# use the result of function suggestShift as 1st argument, like this:
# expectedDf &lt;- expectedPromptIndex(sugShift$esDf, expIdxList, RELEVANTINFO_ES,
RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: intolerable
# --------------
# This is function 24 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute intolerable. Start --------------
# RELEVANTINFO_ES is delivered with the package
# expectedDf is a raw ESM dataset, delivered with the package.
# Prerequisites in order to execute intolerable. End ----------------
# -------------------------------------------------------
# Run function 24 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# Generate second argument of function 'intolerable'
(intoleranceDf &lt;- data.frame(
# Column 'prompt': Prompts that must NEVER be comined with expected categories.
prompt = c(2, 3, 4, 1, 1),
# Column 'expect': Expected categories that must NEVER be combined with the prompts.
expect = c(1, 1, 1, 2, 3)))
# Read: Prompts 2, 3, and 4 must never be combined with expected category 1.
# Read: Prompt 1 must never be combined with expected category 2.
# Read: Prompt 1 must never be combined with expected category 3.
# expectedDf is the result of function 'expectedPromptIndex'.
intolLs &lt;- intolerable(expectedDf, intoleranceDf, RELEVANTINFO_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: randomMultSelection
# --------------
# This is function 25 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute randomMultSelection. Start ------
# RELEVANTINFO_ES is delivered with the package
intoleranceDf &lt;- data.frame(prompt = c(2, 3, 4, 1, 1),
expect = c(1, 1, 1, 2, 3))
# expectedDf is a raw ESM dataset, delivered with the package.
intolLs &lt;- intolerable(expectedDf, intoleranceDf, RELEVANTINFO_ES)
# Prerequisites in order to execute randomMultSelection. End --------
# -------------------------------------------------------
# Run function 25 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# intolLs[["cleanedDf"]] is the result of function 'intolerable'.
randSelLs &lt;- randomMultSelection(intolLs[["cleanedDf"]])
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: computeTimeLag
# --------------
# This is function 26 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute computeTimeLag. Start -----------
# RELEVANTINFO_ES is delivered with the package
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
intoleranceDf &lt;- data.frame(prompt = c(2, 3, 4, 1, 1),
expect = c(1, 1, 1, 2, 3))
# expectedDf is a raw ESM dataset, delivered with the package.
intolLs &lt;- intolerable(expectedDf, intoleranceDf, RELEVANTINFO_ES)
randSelLs &lt;- randomMultSelection(intolLs[["cleanedDf"]])
# Prerequisites in order to execute computeTimeLag. End -------------
# -------------------------------------------------------
# Run function 26 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# randSelLs[["esRandSelIn"]] is the result of function 'randomMultSelection'.
lagDf &lt;- computeTimeLag(randSelLs[["esRandSelIn"]], RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: computeDuration
# --------------
# This is function 27 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute computeDuration. Start ----------
# RELEVANTINFO_ES is delivered with the package
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
intoleranceDf &lt;- data.frame(prompt = c(2, 3, 4, 1, 1),
expect = c(1, 1, 1, 2, 3))
# expectedDf is a raw ESM dataset, delivered with the package.
intolLs &lt;- intolerable(expectedDf, intoleranceDf, RELEVANTINFO_ES)
randSelLs &lt;- randomMultSelection(intolLs[["cleanedDf"]])
# Prerequisites in order to execute computeDuration. End ------------
# -------------------------------------------------------
# Run function 27 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# randSelLs[["esRandSelIn"]] is the result of function 'randomMultSelection'.
durDf &lt;- computeDuration(randSelLs[["esRandSelIn"]], RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: computeTimeBetween
# --------------
# This is function 28 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute computeTimeBetween. Start -------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# Use example list delivered with the package
RELEVANTVN_REF &lt;- RELEVANTVN_REFext
intoleranceDf &lt;- data.frame(prompt = c(2, 3, 4, 1, 1),
expect = c(1, 1, 1, 2, 3))
# expectedDf is a raw ESM dataset, delivered with the package.
intolLs &lt;- intolerable(expectedDf, intoleranceDf, RELEVANTINFO_ES)
randSelLs &lt;- randomMultSelection(intolLs[["cleanedDf"]])
# Prerequisites in order to execute computeTimeBetween. End ---------
# -------------------------------------------------------
# Run function 28 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# randSelLs[["esRandSelIn"]] is the result of function 'randomMultSelection'.
tbsqDf &lt;- computeTimeBetween(randSelLs[["esRandSelIn"]], referenceDfNew, RELEVANTVN_ES,
RELEVANTVN_REF)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# FUNCTION NAME: esFinal
# --------------
# This is function 29 of 29 in the hierarchy of 'esmprep' functions.
# ------------------------
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute esFinal. Start ------------------
# RELEVANTINFO_ES is delivered with the package
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# tbsqDf is a raw ESM dataset, delivered with the package.
# Prerequisites in order to execute esFinal. End --------------------
# -------------------------------------------------------
# Run function 29 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# tbsqDf is the result of function 'computeTimeBetween'.
esDfFin &lt;- esFinal(tbsqDf, esOpt=esAssigned[["ESopt"]], complianceRate=50,
RELEVANTINFO_ES, RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
## End(Not run)
</code></pre>

<hr>
<h2 id='esPlausible'>esPlausible</h2><span id='topic+esPlausible'></span>

<h3>Description</h3>

<p>esPlausible helps detecting implausibilities in the raw ESM datasets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esPlausible(dfList, itemVecList)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="esPlausible_+3A_dflist">dfList</code></td>
<td>
<p>a list. Each element of the list must be a data.frame. Each data.frame is a separate raw ESM dataset/an ESM questionnaire version. If there is just one ESM version the list therefore contains one data.frame.</p>
</td></tr>
<tr><td><code id="esPlausible_+3A_itemveclist">itemVecList</code></td>
<td>
<p>a list. Each list element must be a vector. Each vector element must contain all the variable names of the respective ESM questionnaire version. Use function <code><a href="#topic+esItems">esItems</a></code> to generate <code>itemVecList</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>esPlausible</code> makes no sense if there is only one ESM questionnaire version. However, if there is more than one version it makes sense. The list which is returned by <code>esPlausible</code> contains 4 elements:
</p>

<ol>
<li><p> PlausibNames shows which item names occur in the different ESM questionnaire versions
</p>
</li>
<li><p> plausibClass shows the class of each item in each of the different ESM questionnaire versions (R built-in class registration)
</p>
</li>
<li><p> plausibRowNa shows the number of rows in each of the different ESM questionnaire versions and the percentage of existing data therein
</p>
</li>
<li><p> plausibMinMax shows the minimum and the maximum value for all items containing numeric data.
</p>
</li></ol>



<h3>Value</h3>

<p>A list of dataframes, each containing separate information regarding the plausibility of the ESM datasets. See <strong>Details</strong> for more information.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 12 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute esPlausible. Start --------------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# keyLsNew is a list of datasets, also delivered with the package
rmInvLs &lt;- rmInvalid(keyLsNew, RELEVANTVN_ES)
plausibItems &lt;- esItems(dfList=rmInvLs[["dfValid"]], RELEVANTVN_ES)
# Prerequisites in order to execute esPlausible. End ----------------
# -------------------------------------------------------
# Run function 12 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# Help checking the plausibility of items in the raw ESM datasets. rmInvLs[["dfValid"]]
# is one of the results from function 'rmInvalid'.
# plausibItems is the result of function 'esItems'.
plausibLs &lt;- esPlausible(dfList=rmInvLs[["dfValid"]], itemVecList=plausibItems)
# Display the results (4 data frames) to the console
# plausibNames gives an overview of the item names across all ESM versions
plausibLs[["plausibNames"]]
# plausibClass gives an overview of the variable types of all items
plausibLs[["plausibClass"]]
# plausibRowNa shows for each ESM version the number of lines in the raw
# ESM datasets and how much percent of the data is missing (NAs).
plausibLs[["plausibRowNa"]]
# plausibMinMax shows for each numeric variable the minimum and maximum.
plausibLs[["plausibMinMax"]]
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='eveningControl'>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled
out during the evening by participants of the control group.</h2><span id='topic+eveningControl'></span>

<h3>Description</h3>

<p>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled
out during the evening by participants of the control group.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eveningControl
</code></pre>


<h3>Format</h3>

<p>A data frame with 28 rows and 23 variables:
</p>

<ul>
<li><p> V1. Arbitrary item, answer format numeric, ranging from 0 to 3.
</p>
</li>
<li><p> V1_1. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V1_2. Arbitrary item, answer format text.
</p>
</li>
<li><p> V2. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V2_1. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V3. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V3_1. Arbitrary item, answer format text.
</p>
</li>
<li><p> V4. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V4_1. Arbitrary item, answer format numeric, ranging from 0 to 4.
</p>
</li>
<li><p> V5. Arbitrary item, answer format numeric, ranging from 0 to 6.
</p>
</li>
<li><p> V5_1. Arbitrary item, answer format numeric, ranging from 0 to 6.
</p>
</li>
<li><p> V5_2. Arbitrary item, answer format numeric, ranging from 0 to 6.
</p>
</li>
<li><p> V7. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V8. Arbitrary item, answer format text.
</p>
</li>
<li><p> V8_1. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V8_2. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V8_3. Arbitrary item, answer format numeric, ranging from 1 to 4.
</p>
</li>
<li><p> survey_name. Name of the ESM version.
</p>
</li>
<li><p> IMEI. IMEI number of the mobile device, used by the participant.
</p>
</li>
<li><p> start_date. Date of when a single ESM questionnaire was started.
</p>
</li>
<li><p> start_time. Time of when a single ESM questionnaire was started.
</p>
</li>
<li><p> end_date. Date of when a single ESM questionnaire was ended.
</p>
</li>
<li><p> end_time. Time of when a single ESM questionnaire was ended.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'># Display the whole dataset in the console
eveningControl
</code></pre>

<hr>
<h2 id='eveningTest'>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled
out during the evening by participants of the test group.</h2><span id='topic+eveningTest'></span>

<h3>Description</h3>

<p>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled
out during the evening by participants of the test group.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eveningTest
</code></pre>


<h3>Format</h3>

<p>A data frame with 14 rows and 24 variables:
</p>

<ul>
<li><p> V1. Arbitrary item, answer format numeric, ranging from 0 to 3.
</p>
</li>
<li><p> V1_1. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V1_2. Arbitrary item, answer format text.
</p>
</li>
<li><p> V2. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V2_1. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V3. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V3_1. Arbitrary item, answer format text.
</p>
</li>
<li><p> V4. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V4_1. Arbitrary item, answer format numeric, ranging from 0 to 4.
</p>
</li>
<li><p> V5. Arbitrary item, answer format numeric, ranging from 0 to 6.
</p>
</li>
<li><p> V5_1. Arbitrary item, answer format numeric, ranging from 0 to 6.
</p>
</li>
<li><p> V5_2. Arbitrary item, answer format numeric, ranging from 0 to 6.
</p>
</li>
<li><p> V7. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V8. Arbitrary item, answer format text.
</p>
</li>
<li><p> V8_1. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V8_3. Arbitrary item, answer format numeric, ranging from 1 to 4.
</p>
</li>
<li><p> V9. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V9_1. Arbitrary item, answer format text.
</p>
</li>
<li><p> survey_name. Name of the ESM version.
</p>
</li>
<li><p> IMEI. IMEI number of the mobile device, used by the participant.
</p>
</li>
<li><p> start_date. Date of when a single ESM questionnaire was started.
</p>
</li>
<li><p> start_time. Time of when a single ESM questionnaire was started.
</p>
</li>
<li><p> end_date. Date of when a single ESM questionnaire was ended.
</p>
</li>
<li><p> end_time. Time of when a single ESM questionnaire was ended.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'># Display the whole dataset in the console
eveningTest
</code></pre>

<hr>
<h2 id='expectedDf'>Resulting dataset after function expectedPromptIndex has been executed on the raw ESM dataset.</h2><span id='topic+expectedDf'></span>

<h3>Description</h3>

<p><strong>Note</strong>: The dataset <code>expectedDf</code> is the result of the function <code><a href="#topic+expectedPromptIndex">expectedPromptIndex</a></code>, when the raw ESM dataset <code>madeShift$esDf</code> is one of the function arguments. <code>madeShift$esDf</code> is one of the results of function <code><a href="#topic+makeShift">makeShift</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expectedDf
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 225 rows and 54 columns.</p>

<hr>
<h2 id='expectedPromptIndex'>expectedPromptIndex</h2><span id='topic+expectedPromptIndex'></span>

<h3>Description</h3>

<p>expectedPromptIndex
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expectedPromptIndex(esDf, expectedPromptIndexList,
  RELEVANTINFO_ES = NULL, RELEVANTVN_ES = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expectedPromptIndex_+3A_esdf">esDf</code></td>
<td>
<p>a data.frame. A single ESM dataset. It must contain the 2 columns that hold the date-time object for when an ESM questionnaire was started and finished, respectively.</p>
</td></tr>
<tr><td><code id="expectedPromptIndex_+3A_expectedpromptindexlist">expectedPromptIndexList</code></td>
<td>
<p>a list. Each list element must also be a list. Each of these inner lists must contain exactly 3 elements: first a character string specifying the ESM questionnaire version; second a vector of at least one integer specifying the daily prompt(s) that the first argument‘s version correspond(s) to, and third an integer specifying the time of day that the first argument‘s version corresponds to.</p>
</td></tr>
<tr><td><code id="expectedPromptIndex_+3A_relevantinfo_es">RELEVANTINFO_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code>.</p>
</td></tr>
<tr><td><code id="expectedPromptIndex_+3A_relevantvn_es">RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The return values directly correspond to the elements within the second argument: If there are prompt indices (as computed within the function 'esAssign') diverge from the expected prompt indices the variable PROMPTFALSE's value is 1, else 0. The variable EXPCATEGORY corresponds to category, with which the user expects the respective prompt(s) to be combined with.
</p>


<h3>Value</h3>

<p><code>esDf</code> with the additional columns PROMPTFALSE and EXPCATEGORY. See <strong>Details</strong> for more information.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 23 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute makeShift. Start ----------------
# Use example list delivered with the package
RELEVANTINFO_ES &lt;- RELEVANTINFO_ES
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# Use example list delivered with the package
RELEVANTVN_REF &lt;- RELEVANTVN_REFext
# esAssigned is a list of datasets, delivered with the package. It is
# the result of the assignment of the ESM questionnaires to ALL 8
# participants in the reference dataset.
noEndDf &lt;- missingEndDateTime(esAssigned[["ES"]], RELEVANTVN_ES)
identDf &lt;- esIdentical(noEndDf, RELEVANTVN_ES)
sugShift &lt;- suggestShift(identDf, 100, RELEVANTINFO_ES, RELEVANTVN_ES)
keyPromptDf &lt;- sugShift$suggestShiftDf[,c("NEW_PROMPT", "SHIFTKEY")]
madeShift &lt;- makeShift(sugShift, referenceDfNew, keyPromptDf, RELEVANTINFO_ES, RELEVANTVN_REF)
# Prerequisites in order to execute makeShift. End -------------------
# -------------------------------------------------------
# Run function 23 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# Generate second argument of function 'expectedPromptIndex'. It's strongly
# recommended to read the explanation of this 2nd argument in the esmprep
# vignette, function 'expectedPromptIndex'.
expIdxList &lt;- list(
# I - the user - expect in the ESM version morningTestGroup that
# prompt no.1 is always linked to the value 1.
list("morningTestGroup", 1, 1),
# I - the user - expect in the ESM version dayTestGroup that
# prompt no. 2 and no.3 are always linked to the value 2.
list("dayTestGroup", c(2, 3), 2),
# Information of all further ESM versions are passed accordingly:
list("eveningTestGroup", 4, 3),
list("morningControlGroup", 1, 1),
list("dayControlGroup", c(2,3), 2),
list("eveningControlGroup", 4, 3))
# madeShiftDf$esDf is part of the output of function 'makeShift', if at
# least one questionnaire was shifted to a neighboring prompt index.
expectedDf &lt;- expectedPromptIndex(madeShift$esDf, expIdxList, RELEVANTINFO_ES,
RELEVANTVN_ES)
# If no questionnaire is suggested for shifting (see function suggestShift)
# use the result of function suggestShift as 1st argument, like this:
# expectedDf &lt;- expectedPromptIndex(sugShift$esDf, expIdxList, RELEVANTINFO_ES,
# RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='findChars'>findChars</h2><span id='topic+findChars'></span>

<h3>Description</h3>

<p>findChars picks all variables from the (merged) ESM dataset that are of the class character.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findChars(esDf)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="findChars_+3A_esdf">esDf</code></td>
<td>
<p>a data.frame. A single ESM dataset. It must contain the 2 columns that hold the date-time object for when an ESM questionnaire was started and finished, respectively.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>findChars</code> prints to the console the structure of all variables in <code>esDf</code> that contain character values (i.e. text). Among these variables (the index of which is returned by the function) the user can select those that are suitable to apply the function <code><a href="#topic+convertChars">convertChars</a></code> to.
</p>


<h3>Value</h3>

<p>Indices (with corresponding variable names as attributes) of the columns of <code>esDf</code>, containing character strings. See <strong>Details</strong> for more information and see <strong>Examples</strong>.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 15 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute findChars. Start ----------------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# isCompleteLs is a list of datasets, also delivered with the package
esMerged &lt;- esMerge(isCompleteLs, RELEVANTVN_ES)
esMerged[,RELEVANTVN_ES[["ES_IMEI"]]] &lt;- as.character(esMerged[,RELEVANTVN_ES[["ES_IMEI"]]])
# Prerequisites in order to execute findChars. End ------------------
# -------------------------------------------------------
# Run function 15 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# esMerged is the result of function 'esMerge'
findTextIdx &lt;- findChars(esMerged)
# Display structure of function output
str(findTextIdx)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='genDateTime'>genDateTime</h2><span id='topic+genDateTime'></span>

<h3>Description</h3>

<p>genDateTime generates a date-time object from the single components date and time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>genDateTime(refOrEsDf = NULL, refOrEs = NULL, RELEVANTINFO_ES = NULL,
  RELEVANTVN_ES = NULL, RELEVANTVN_REF = NULL, dateFormat = "ymd",
  timeFormat = "HMS")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="genDateTime_+3A_reforesdf">refOrEsDf</code></td>
<td>
<p>a data.frame. Either the reference dataset or the event sampling raw dataset (already merged to a single dataset).</p>
</td></tr>
<tr><td><code id="genDateTime_+3A_refores">refOrEs</code></td>
<td>
<p>a character string. Enter &quot;REF&quot; if the argument refOrEs is the reference dataset, enter &quot;ES&quot; if it is the event sampling dataset.</p>
</td></tr>
<tr><td><code id="genDateTime_+3A_relevantinfo_es">RELEVANTINFO_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code>.</p>
</td></tr>
<tr><td><code id="genDateTime_+3A_relevantvn_es">RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
<tr><td><code id="genDateTime_+3A_relevantvn_ref">RELEVANTVN_REF</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setREF">setREF</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
<tr><td><code id="genDateTime_+3A_dateformat">dateFormat</code></td>
<td>
<p>a character string. Choose the current date format, &quot;ymd&quot; (default), &quot;mdy&quot;, or &quot;dmy&quot;.</p>
</td></tr>
<tr><td><code id="genDateTime_+3A_timeformat">timeFormat</code></td>
<td>
<p>a character string. Choose the current time format, &quot;HMS&quot; (default), or &quot;HM&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Depending on whether the ESM dataset(s) or the reference dataset are passed as the first argument the start date and start time (same for end date and end time) doesn't have the same meaning. See definition of the date and time relating arguments in <code><a href="#topic+setES">setES</a></code> and <code><a href="#topic+setREF">setREF</a></code>.
</p>


<h3>Value</h3>

<p>The dataset that was passed as first argument with two additional columns START_DATETIME and END_DATETIME, i.e. the date-time objects of the separated date and time of both ESM start and ESM end. See <strong>Details</strong> for more information.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 7 of 29).<br /> <code>genDateTime</code> is the reverse function of <code><a href="#topic+splitDateTime">splitDateTime</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute genDateTime. Start --------------
relEs &lt;- relevantESVN(svyName="survey_name", IMEI="IMEI",
STARTDATE="start_date", STARTTIME="start_time",
ENDDATE="end_date", ENDTIME="end_time")
imeiNumbers &lt;- as.character(referenceDf$imei)
surveyNames &lt;- c("morningTestGroup", "dayTestGroup", "eveningTestGroup",
"morningControlGroup", "dayControlGroup", "eveningControlGroup")
RELEVANT_ES &lt;- setES(4, imeiNumbers, surveyNames, relEs)
RELEVANTINFO_ES &lt;- RELEVANT_ES[["RELEVANTINFO_ES"]]
RELEVANTVN_ES &lt;- RELEVANT_ES[["RELEVANTVN_ES"]]
esLs &lt;- esList(list(morningControl, dayControl, eveningControl,
morningTest, dayTest, eveningTest), RELEVANTVN_ES)
keyLs &lt;- genKey(esLs)
relRef &lt;- relevantREFVN(ID="id", IMEI="imei", ST="st",
STARTDATE="start_date", STARTTIME="start_time",
ENDDATE="end_date", ENDTIME="end_time")
RELEVANTVN_REF &lt;- setREF(4, relRef)
# Prerequisites in order to execute genDateTime. End ----------------
# ------------------------------------------------------
# Run function 7 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# Applying function to reference dataset (7a of 29)
referenceDfList &lt;- genDateTime(referenceDf, "REF", RELEVANTINFO_ES, RELEVANTVN_ES,
RELEVANTVN_REF)

# Extract reference dataset from output
referenceDfNew &lt;- referenceDfList[["refOrEsDf"]]

# Extract extended list of relevant variables names of reference dataset
RELEVANTVN_REF &lt;- referenceDfList[["extendedVNList"]]

# Applying function to raw ESM dataset(s) (7b of 29)
# keyLs is the result of function 'genKey'.
keyList &lt;- genDateTime(keyLs, "ES", RELEVANTINFO_ES, RELEVANTVN_ES,
RELEVANTVN_REF)

# Extract list of raw ESM datasets from output
keyLsNew &lt;- keyList[["refOrEsDf"]]

# Extract extended list of relevant variables names of raw ESM datasets
RELEVANTVN_ES &lt;- keyList[["extendedVNList"]]
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='genKey'>genKey</h2><span id='topic+genKey'></span>

<h3>Description</h3>

<p>genKey generates a unique number for each ESM questionnaire.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>genKey(dfList)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="genKey_+3A_dflist">dfList</code></td>
<td>
<p>a list. Each element of the list must be a data.frame. Each data.frame is a separate raw ESM dataset/an ESM questionnaire version. If there is just one ESM version the list therefore contains one data.frame.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The unique number for each ESM questionnaire can be seen as an identifier prior to the assignment of the participants who filled out the questionnaires. Such an identifier is valuable in controlling a large amount of rows of data.
</p>


<h3>Value</h3>

<p><code>esDf</code> with the additional column KEY, i.e. a unique integer for each data row.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 6 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute genKey. Start -------------------
relEs &lt;- relevantESVN(svyName="survey_name", IMEI="IMEI",
STARTDATE="start_date", STARTTIME="start_time",
ENDDATE="end_date", ENDTIME="end_time")
imeiNumbers &lt;- as.character(referenceDf$imei)
surveyNames &lt;- c("morningTestGroup", "dayTestGroup", "eveningTestGroup",
"morningControlGroup", "dayControlGroup", "eveningControlGroup")
RELEVANT_ES &lt;- setES(4, imeiNumbers, surveyNames, relEs)
RELEVANTVN_ES &lt;- RELEVANT_ES[["RELEVANTVN_ES"]]
esLs &lt;- esList(list(morningControl, dayControl, eveningControl,
morningTest, dayTest, eveningTest), RELEVANTVN_ES)
# Prerequisites in order to execute genKey. End ---------------------
# ------------------------------------------------------
# Run function 6 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# esLs is the result of function 'esList'.
keyLs &lt;- genKey(esLs)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='intolerable'>intolerable</h2><span id='topic+intolerable'></span>

<h3>Description</h3>

<p>intolerable registers the intolerable ESM questionnaires as specified by the user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>intolerable(esDf, intoleranceDf, RELEVANTINFO_ES = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="intolerable_+3A_esdf">esDf</code></td>
<td>
<p>a data.frame. A single ESM dataset. It must contain the 2 columns that hold the date-time object for when an ESM questionnaire was started and finished, respectively.</p>
</td></tr>
<tr><td><code id="intolerable_+3A_intolerancedf">intoleranceDf</code></td>
<td>
<p>a data.frame with 2 columns. The first column must contain the prompt index, which must <strong>never</strong> be combined with the 'expected category' in the second column; the second column must contain the 'expected category' of the survey version (as specified by the user in the function <code><a href="#topic+expectedPromptIndex">expectedPromptIndex</a></code>). See <strong>Details</strong> for more information.</p>
</td></tr>
<tr><td><code id="intolerable_+3A_relevantinfo_es">RELEVANTINFO_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The user must specify exactly which kind of ESM questionnaires are intolerable relative to the expectation, which was specified in the function <code><a href="#topic+expectedPromptIndex">expectedPromptIndex</a></code>. For example, a questionnaire which was expected to be answered in the morning (specified by the expected category 1) must <strong>never</strong> be combined with the last prompt of the day (e.g. 4). That is, it doesn't make sense to have the answers to the morning questionnaire, which was filled out in the evening.
</p>


<h3>Value</h3>

<p>The user receives a list containing 2 datasets:
</p>

<ol>
<li><p> cleanedDf, i.e. the ESM dataset from which the intolerable lines of data were removed.
</p>
</li>
<li><p> intoleranceDf, i.e. the intolerable lines of data that were removed.
</p>
</li></ol>



<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 24 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute intolerable. Start --------------
# RELEVANTINFO_ES is delivered with the package
# expectedDf is a raw ESM dataset, delivered with the package.
# Prerequisites in order to execute intolerable. End ----------------
# -------------------------------------------------------
# Run function 24 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# Generate second argument of function 'intolerable'
(intoleranceDf &lt;- data.frame(
# Column 'prompt': Prompts that must NEVER be comined with expected categories.
prompt = c(2, 3, 4, 1, 1),
# Column 'expect': Expected categories that must NEVER be combined with the prompts.
expect = c(1, 1, 1, 2, 3)))
# Read: Prompts 2, 3, and 4 must never be combined with expected category 1.
# Read: Prompt 1 must never be combined with expected category 2.
# Read: Prompt 1 must never be combined with expected category 3.
# expectedDf is the result of function 'expectedPromptIndex'.
intolLs &lt;- intolerable(expectedDf, intoleranceDf, RELEVANTINFO_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='isCompleteLs'>Resulting dataset after function esComplete has been executed on the list of ESM datasets.</h2><span id='topic+isCompleteLs'></span>

<h3>Description</h3>

<p><strong>Note</strong>: The dataset <code>isCompleteLs</code> is the result of the function <code><a href="#topic+esComplete">esComplete</a></code>, when the list of datasets <code>rmInvLs[["dfValid"]]</code> is one of the function arguments. <code>rmInvLs[["dfValid"]]</code> is one of the results of function <code><a href="#topic+rmInvalid">rmInvalid</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>isCompleteLs
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 7.</p>

<hr>
<h2 id='keyLsNew'>Resulting dataset after function genDateTime has been executed on the list of ESM datasets.</h2><span id='topic+keyLsNew'></span>

<h3>Description</h3>

<p><strong>Note</strong>: The dataset <code>keyLsNew</code> is the result of the function <code><a href="#topic+genDateTime">genDateTime</a></code>, when the list of datasets <code>keyLs</code> is one of the function arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keyLsNew
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 6.</p>

<hr>
<h2 id='makeShift'>makeShift</h2><span id='topic+makeShift'></span>

<h3>Description</h3>

<p>makeShift can modify prompts which were assigned by the function <code>link{esAssign}</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeShift(esDfShift, refDf, keyPromptDf, RELEVANTINFO_ES = NULL,
  RELEVANTVN_REF = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeShift_+3A_esdfshift">esDfShift</code></td>
<td>
<p>a list. Each element of the list must be a data.frame. This argument is generated by <code><a href="#topic+suggestShift">suggestShift</a></code> if at least one ESM questionnaire is eligible for shifting to a neighboring prompt. See <strong>Details</strong> for more information.</p>
</td></tr>
<tr><td><code id="makeShift_+3A_refdf">refDf</code></td>
<td>
<p>a data.frame. The reference dataset.</p>
</td></tr>
<tr><td><code id="makeShift_+3A_keypromptdf">keyPromptDf</code></td>
<td>
<p>a data.frame. The data.frame must have exactly 2 columns. The one column's name must be SHIFTKEY (a numeric value), specifying the exact ESM questionnaire (via the use of the variable KEY). The ohter column's name must be NEW_PROMPT, specifying the new prompt index, i.e. the index after the shifting process will be over. See <strong>Details</strong> for more information.</p>
</td></tr>
<tr><td><code id="makeShift_+3A_relevantinfo_es">RELEVANTINFO_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code>.</p>
</td></tr>
<tr><td><code id="makeShift_+3A_relevantvn_ref">RELEVANTVN_REF</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setREF">setREF</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>After applying <code>makeShift</code> the result can be checked by using the function <code><a href="#topic+printSuggestedShift">printSuggestedShift</a></code> once again.
If at least one shifting of the prompt index is suggested, use the additional data.frame, which is then is supplied by <code><a href="#topic+suggestShift">suggestShift</a></code>, called 'suggestShiftDf'.' Use its 2 columns SHIFTKEY and NEW_PROMPT to generate the argument 'keyPromptDf' in function <code>makeShift</code>.
</p>


<h3>Value</h3>

<p>a list with 3 data.frames, if at least one prompt was shifted, i.e.:
</p>

<ol>
<li><p> the first data.frame (called 'esDf') is the raw ESM dataset in its current state (with new colum SHIFTED),
</p>
</li>
<li><p> the second data.frame (called 'suggestShiftDf') includes all relevant information to act according to the decision as to which questionnaires shall be shifted. See <strong>Examples</strong> to get a clear idea of how to use 'suggestShiftDf',
</p>
</li>
<li><p> the third data.frame (called 'printShiftDf') contains the relevant information to print all questionnaires registered by <code><a href="#topic+suggestShift">suggestShift</a></code> to the console, before as well as after having made the shifting. This printing to the console is done by applying the function <code><a href="#topic+printSuggestedShift">printSuggestedShift</a></code>.
</p>
</li></ol>

<p><strong>Note</strong>. Each questionnaire that got shifted to a neighboring prompt (which prior to the shift has not been assigned), will have its status changed, i.e. values get adapted in variables CV_ES, ES_MULT, PROMPT, and PROMPTEND.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 22 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute makeShift. Start ----------------
# RELEVANTINFO_ES is delivered with the package
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# Use example list delivered with the package
RELEVANTVN_REF &lt;- RELEVANTVN_REFext
# esAssigned is a list of datasets, delivered with the package. It is
# the result of the assignment of the ESM questionnaires to ALL 8
# participants in the reference dataset.
noEndDf &lt;- missingEndDateTime(esAssigned[["ES"]], RELEVANTVN_ES)
identDf &lt;- esIdentical(noEndDf, RELEVANTVN_ES)
sugShift &lt;- suggestShift(identDf, 100, RELEVANTINFO_ES, RELEVANTVN_ES)
# Prerequisites in order to execute makeShift. End -------------------
# -------------------------------------------------------
# Run function 22 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# sugShift is the result of function 'suggestShift'. referenceDfNew is the result
# of function 'genDateTime' or of function 'splitDateTime'.
# keyPromptDf is generated by using part of the output of function suggestShift,
# i.e. by selecting the columns NEW_PROMPT and SHIFTKEY from suggestShiftDf.
keyPromptDf &lt;- sugShift$suggestShiftDf[,c("NEW_PROMPT", "SHIFTKEY")]
madeShift &lt;- makeShift(sugShift, referenceDfNew, keyPromptDf, RELEVANTINFO_ES, RELEVANTVN_REF)
# Tip! Display the result of function 'makeShift' in the console
# in order to check whether the shifting was successful.
printSuggestedShift(madeShift, RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='missingEndDateTime'>missingEndDateTime</h2><span id='topic+missingEndDateTime'></span>

<h3>Description</h3>

<p>missingEndDateTime registers all ESM questionnaires with a missing time stamp of when they were finished.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>missingEndDateTime(esDf, RELEVANTVN_ES = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="missingEndDateTime_+3A_esdf">esDf</code></td>
<td>
<p>a data.frame. A single ESM dataset. It must contain the 2 columns that hold the date-time object for when an ESM questionnaire was started and finished, respectively.</p>
</td></tr>
<tr><td><code id="missingEndDateTime_+3A_relevantvn_es">RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Both new columns are dummy variables: 1 = true = end date/end time is missing, 0 = false = end date/end time is present.
</p>


<h3>Value</h3>

<p><code>esDf</code> with the additional columns NOENDDATE and NOENDTIME. See <strong>Details</strong> for more information
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 18 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute missingEndDateTime. Start -------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# esAssigned is a list of datasets, delivered with the package. It is
# the result of the assignment of the ESM questionnaires to ALL 8
# participants in the reference dataset.
# Prerequisites in order to execute missingEndDateTime. End ---------
# -------------------------------------------------------
# Run function 18 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# esAssigned[["ES"]] is one of the results of function 'esAssign'.
noEndDf &lt;- missingEndDateTime(esAssigned[["ES"]], RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='morningControl'>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled
out during the morning by participants of the control group.</h2><span id='topic+morningControl'></span>

<h3>Description</h3>

<p>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled
out during the morning by participants of the control group.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>morningControl
</code></pre>


<h3>Format</h3>

<p>A data frame with 14 rows and 20 variables:
</p>

<ul>
<li><p> V1. Arbitrary item, answer format numeric, ranging from 0 to 3.
</p>
</li>
<li><p> V1_1. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V1_2. Arbitrary item, answer format text.
</p>
</li>
<li><p> V2. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V2_1. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V3. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V3_1. Arbitrary item, answer format text.
</p>
</li>
<li><p> V4. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V4_1. Arbitrary item, answer format numeric, ranging from 0 to 4.
</p>
</li>
<li><p> V5. Arbitrary item, answer format numeric, ranging from 0 to 6.
</p>
</li>
<li><p> V5_1. Arbitrary item, answer format numeric, ranging from 0 to 6.
</p>
</li>
<li><p> V6. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V6_1. Arbitrary item, answer format numeric, ranging from 1 to 4.
</p>
</li>
<li><p> V7. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> survey_name. Name of the ESM version.
</p>
</li>
<li><p> IMEI. IMEI number of the mobile device, used by the participant.
</p>
</li>
<li><p> start_date. Date of when a single ESM questionnaire was started.
</p>
</li>
<li><p> start_time. Time of when a single ESM questionnaire was started.
</p>
</li>
<li><p> end_date. Date of when a single ESM questionnaire was ended.
</p>
</li>
<li><p> end_time. Time of when a single ESM questionnaire was ended.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'># Display the whole dataset in the console
morningControl
</code></pre>

<hr>
<h2 id='morningTest'>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled
out during the morning by participants of the test group.</h2><span id='topic+morningTest'></span>

<h3>Description</h3>

<p>Raw ESM dataset simulating a series of ESM questionnaires that were scheduled to be filled
out during the morning by participants of the test group.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>morningTest
</code></pre>


<h3>Format</h3>

<p>A data frame with 20 rows and 20 variables:
</p>

<ul>
<li><p> V1. Arbitrary item, answer format numeric, ranging from 0 to 3.
</p>
</li>
<li><p> V1_1. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V1_2. Arbitrary item, answer format text.
</p>
</li>
<li><p> V2. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V2_1. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V3. Arbitrary item, answer format numeric, ranging from 0 to 100.
</p>
</li>
<li><p> V3_1. Arbitrary item, answer format text.
</p>
</li>
<li><p> V4. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V4_1. Arbitrary item, answer format numeric, ranging from 0 to 4.
</p>
</li>
<li><p> V5. Arbitrary item, answer format numeric, ranging from 0 to 6.
</p>
</li>
<li><p> V5_1. Arbitrary item, answer format numeric, ranging from 0 to 6.
</p>
</li>
<li><p> V6. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> V6_1. Arbitrary item, answer format numeric, ranging from 1 to 4.
</p>
</li>
<li><p> V7. Arbitrary item, answer format numeric, ranging from 0 to 1.
</p>
</li>
<li><p> survey_name. Name of the ESM version.
</p>
</li>
<li><p> IMEI. IMEI number of the mobile device, used by the participant.
</p>
</li>
<li><p> start_date. Date of when a single ESM questionnaire was started.
</p>
</li>
<li><p> start_time. Time of when a single ESM questionnaire was started.
</p>
</li>
<li><p> end_date. Date of when a single ESM questionnaire was ended.
</p>
</li>
<li><p> end_time. Time of when a single ESM questionnaire was ended.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'># Display the whole dataset in the console
morningTest
</code></pre>

<hr>
<h2 id='printRmInvalid'>printRmInvalid</h2><span id='topic+printRmInvalid'></span>

<h3>Description</h3>

<p>printRmInvalid prints to the console the lines that were registered to be invalid in the raw ESM dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>printRmInvalid(rmInvalidList, RELEVANTVN_ES = NULL, smr = "tabulate")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="printRmInvalid_+3A_rminvalidlist">rmInvalidList</code></td>
<td>
<p>a list. Pass the result obtained from function <code>rmInvalid</code> as argument.</p>
</td></tr>
<tr><td><code id="printRmInvalid_+3A_relevantvn_es">RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
<tr><td><code id="printRmInvalid_+3A_smr">smr</code></td>
<td>
<p>a character string. Specify the level of detail you want to be displayed in the console. There are 3 options. The default option is 'tabulate', which displays a table, indicating the number of removed questionnaires for each ESM version. The next option is 'detail', which displays the entire removed questionnaires. The last option is 'both', which displays both the table and the detailed information.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>In addition to the information the user wants to be displayed (see argument <code>smr</code>), the function returns a list containing the KEY value (see function <code><a href="#topic+genKey">genKey</a></code>) of all the questionnaires that have been removed from each of the raw ESM datasets.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 10 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute printRmInvalid. Start -----------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# keyLsNew is a list of datasets, also delivered with the package
rmInvLs &lt;- rmInvalid(keyLsNew, RELEVANTVN_ES)
# Prerequisites in order to execute printRmInvalid. End -------------
# ------------------------------------------------------
# Run function 10 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# rmInvLs is the result of function 'rmInvalid'. Display its result
# in the console both tablulated and in detail.
key_rmLs &lt;- printRmInvalid(rmInvLs, smr="both", RELEVANTVN_ES)
# Display the list containing the KEY values of all questionnaires
# that have been removed.
key_rmLs
# Since there have been warning messages in 4 of the 6 datasets,
# the first ESM item (name: V1) was automatically converted to class
# character, although it is numeric. So we'll re-convert V1's class.
# Check V1 prior to conversion
str(rmInvLs[["dfValid"]][[2]][1:2])
rmInvLs[["dfValid"]] &lt;- sapply(rmInvLs[["dfValid"]], function(x) {
     x[,"V1"] &lt;- as.numeric(x[,"V1"])
     return(x) } )
# Check V1 after conversion
str(rmInvLs[["dfValid"]][[2]][1:2])
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='printSuggestedShift'>printSuggestedShift</h2><span id='topic+printSuggestedShift'></span>

<h3>Description</h3>

<p>printSuggestedShift prints to the console which ESM prompts are suggested to be modified.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>printSuggestedShift(esDfShift, RELEVANTVN_ES = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="printSuggestedShift_+3A_esdfshift">esDfShift</code></td>
<td>
<p>a list. Each element of the list must be a data.frame. This argument is generated by <code><a href="#topic+suggestShift">suggestShift</a></code> if at least one ESM questionnaire is eligible for shifting to a neighboring prompt. See <strong>Details</strong> for more information.</p>
</td></tr>
<tr><td><code id="printSuggestedShift_+3A_relevantvn_es">RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The output to the console shall give the user the necessary information to decide whether lines of data might be shifted and where they shall be shifted to (by altering the values of the variable PROMPT) .
</p>


<h3>Value</h3>

<p>No return value. See <strong>Details</strong> for more information.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 21 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute printSuggestedShift. Start ------
# Use example list delivered with the package
RELEVANTINFO_ES &lt;- RELEVANTINFO_ES
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# esAssigned is a list of datasets, delivered with the package. It is
# the result of the assignment of the ESM questionnaires to ALL 8
# participants in the reference dataset.
noEndDf &lt;- missingEndDateTime(esAssigned[["ES"]], RELEVANTVN_ES)
identDf &lt;- esIdentical(noEndDf, RELEVANTVN_ES)
sugShift &lt;- suggestShift(identDf, 100, RELEVANTINFO_ES, RELEVANTVN_ES)
# Prerequisites in order to execute printSuggestedShift. End --------
# -------------------------------------------------------
# Run function 21 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# Display the result of function 'suggestShift' in the console.
printSuggestedShift(sugShift, RELEVANTVN_ES)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='randomMultSelection'>randomMultSelection</h2><span id='topic+randomMultSelection'></span>

<h3>Description</h3>

<p>randomMultSelection selects ESM questionnaires randomly as specified by the user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>randomMultSelection(esDf)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="randomMultSelection_+3A_esdf">esDf</code></td>
<td>
<p>a data.frame. A single ESM dataset. It must contain the 2 columns that hold the date-time object for when an ESM questionnaire was started and finished, respectively.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>randomMultSelection</code> has to be applied it should better be applied only once at the very end of the study. Otherwise the randomness of the selection no longer holds.
</p>


<h3>Value</h3>

<p>The user receives a list containing 2 datasets:
</p>

<ol>
<li><p> esRandSelIn, i.e. the ESM dataset with the lines of data, of which some had to be randomly selected
</p>
</li>
<li><p> esRandSelOut, i.e. the lines of data that had to be randomly removed.
</p>
</li></ol>

<p>See <strong>Details</strong> for more information.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 25 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute randomMultSelection. Start ------
# RELEVANTINFO_ES is delivered with the package
intoleranceDf &lt;- data.frame(prompt = c(2, 3, 4, 1, 1),
expect = c(1, 1, 1, 2, 3))
# expectedDf is a raw ESM dataset, delivered with the package.
intolLs &lt;- intolerable(expectedDf, intoleranceDf, RELEVANTINFO_ES)
# Prerequisites in order to execute randomMultSelection. End --------
# -------------------------------------------------------
# Run function 25 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# intolLs[["cleanedDf"]] is the result of function 'intolerable'.
randSelLs &lt;- randomMultSelection(intolLs[["cleanedDf"]])
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='referenceDf'>Dataset with relevant information on participants in an ESM study.</h2><span id='topic+referenceDf'></span>

<h3>Description</h3>

<p>The reference dataset contains the most relevant information on participants in an
ESM study. The word 'relevant' refers to data that is needed to correctly assign
ESM questionnaires in a raw ESM dataset to the participant who filled them out.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>referenceDf
</code></pre>


<h3>Format</h3>

<p>A data frame with 8 rows and 10 variables</p>


<h3>Details</h3>


<ul>
<li><p> id. The participant's unique code number.
</p>
</li>
<li><p> imei. The IMEI number of the mobile device that was used by the participant.
</p>
</li>
<li><p> start_date. The date of when the ESM study period started for the participant.
</p>
</li>
<li><p> start_time. The time of when the participant was scheduled to fill out the first ESM questionnaire on his/her own.
</p>
</li>
<li><p> st1. Time of first prompt on each day during the ESM study period.
</p>
</li>
<li><p> st2. Time of second prompt on each day during the ESM study period.
</p>
</li>
<li><p> st3. Time of third prompt on each day during the ESM study period.
</p>
</li>
<li><p> st4. Time of fourth prompt on each day during the ESM study period.
</p>
</li>
<li><p> end_date. The date of when the ESM study period ended for the participant.
</p>
</li>
<li><p> end_time. The time of when the participant was scheduled to fill out the last ESM questionnaire on his/her own.
</p>
</li></ul>

<p><strong>Note</strong>: It is very important that the scheduled times of the daily prompts (here: st1-st4) strictly follow one another in time, i.e. prompt no.2 should be subsequent to prompt no.1 in time and prompt no.2 should be prior in time to all prompts following it (here: st3 and st4).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Convert the 15 digit IMEI number from scientfic notation to text.
referenceDf$imei &lt;- as.character(referenceDf$imei)
# Display the whole dataset in the console
referenceDf
</code></pre>

<hr>
<h2 id='referenceDfNew'>Dataset 'referenceDf' in modified form</h2><span id='topic+referenceDfNew'></span>

<h3>Description</h3>

<p><strong>Note</strong>: The dataset <code>referenceDfNew</code> is the result of the function <code><a href="#topic+genDateTime">genDateTime</a></code>, when the dataset <code><a href="#topic+referenceDf">referenceDf</a></code> is one of the function arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>referenceDfNew
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 8 rows and 12 columns.</p>


<h3>Examples</h3>

<pre><code class='language-R'># Convert the 15 digit IMEI number from scientfic notation to text.
referenceDfNew$imei &lt;- as.character(referenceDfNew$imei)
# Display the whole dataset in the console
referenceDfNew
</code></pre>

<hr>
<h2 id='refPlausible'>refPlausible</h2><span id='topic+refPlausible'></span>

<h3>Description</h3>

<p>refPlausible enables the user to quickly check the reference dataset concerning the expeced ESM time period for each participant.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>refPlausible(refDf = NULL, units = "days", RELEVANTVN_REF)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="refPlausible_+3A_refdf">refDf</code></td>
<td>
<p>a data.frame. The reference dataset.</p>
</td></tr>
<tr><td><code id="refPlausible_+3A_units">units</code></td>
<td>
<p>a character. This character must be exactly one of the following options: auto, secs, mins, hours, days, weeks. For more information see the R base function <code><a href="base.html#topic+difftime">difftime</a></code>.</p>
</td></tr>
<tr><td><code id="refPlausible_+3A_relevantvn_ref">RELEVANTVN_REF</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setREF">setREF</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The units of the ESM period can be selected by the user, namely one of the following: auto, secs, mins, hours, days, weeks. For more information enter ?difftime in the R console. The prompts per participant, as defined by the user within the reference dataset, are expected to be an increasing time series within a respective ESM day. Therefore, if there are two prompts set at the exact same time, this represents an anomaly. The same is true of any prompt that is earlier in time instead of later (as expected) than the previous prompt (time reversals are not tolerated). Finally, if the function detects any duplicates among the participant IDs, it will return an error message and displays the problematic lines of the reference dataset in the R console.
</p>


<h3>Value</h3>

<p>A data.frame, i.e. <code>refDf</code>. The returned data.frame will have two additional columns:
</p>

<ol>
<li><p> ESM_PERIOD in the selected time period, e.g. days.
</p>
</li>
<li><p> TIME_ANOMALY, i.e. a possible anomaly concerning the expected increase in the time sequence of the prompts in the reference dataset (returned only if there is at least one time anomaly).
</p>
</li>
<li><p> PROMPT_NEXTDAY, i.e. at which of the participant's prompts is a time anomaly suspected (returned only if there is at least one time anomaly).
</p>
</li></ol>

<p>See <strong>Details</strong> for more information.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 8 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute refPlausible. Start ------
# Use example list delivered with the package
RELEVANTVN_REF &lt;- RELEVANTVN_REFext
# Prerequisites in order to execute refPlausible. End --------
# ------------------------------------------------------
# Run function 8 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# In an ESM study all participants answer questionnaires during a time period which
# usually is equal across all participants (e.g. seven days). This function enables the
# user to check whether in the reference dataset the ESM period is plausible. For
# instance, a negative ESM time period would clearly be implausible, e.g. the user
# setting the beginning of the ESM time period after the end of it (which is
# impossible unless a functioning time machine is involved :-) ).
referenceDfNew1 &lt;- refPlausible(refDf=referenceDfNew, units="days", RELEVANTVN_REF)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='relevantESVN'>relevantESVN</h2><span id='topic+relevantESVN'></span>

<h3>Description</h3>

<p>relevantESVN creates a list of the relevant variable names (VN) of (each of) the experience sampling (ES) dataset(s).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>relevantESVN(svyName = NULL, IMEI = NULL, STARTDATE = NULL,
  STARTTIME = NULL, ENDDATE = NULL, ENDTIME = NULL,
  START_DATETIME = NULL, END_DATETIME = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="relevantESVN_+3A_svyname">svyName</code></td>
<td>
<p>a vector of character string(s). The column name in (each of) the ESM dataset(s) that specifies the particular survey version.<br /> This is the only optional argument, i.e. if there exists no such column in the raw ESM dataset(s), keep the default value of NULL for this argument. If this default value is kept, the function <code><a href="#topic+esList">esList</a></code> will generate such a column and will fill it with 'ESMVERSION_ESMPREP' in each line of raw ESM data at the current state of the dataset(s).<br /> <strong>NOTE</strong>: It is not recommended to let <code><a href="#topic+esList">esList</a></code> generate this column, though. For reasons of clarity it is recommended that the user generates such a column for each raw ESM dataset(s) beforehand. The column name of (all) the raw ESM dataset(s) must be identical, however, the content of the new columns must uniquely specify their respective ESM dataset, e.g. &quot;morningControlGroup&quot; for the morning ESM version of the control group.</p>
</td></tr>
<tr><td><code id="relevantESVN_+3A_imei">IMEI</code></td>
<td>
<p>a character string. Column name that specifies the variable in the respective dataset holding the the IMEI number.</p>
</td></tr>
<tr><td><code id="relevantESVN_+3A_startdate">STARTDATE</code></td>
<td>
<p>a character string that specifies the column name in the respective dataset holding the date of when the participant started ... see <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="relevantESVN_+3A_starttime">STARTTIME</code></td>
<td>
<p>a character string that specifies the column name in the respective dataset holding the time of when the participant started ... see <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="relevantESVN_+3A_enddate">ENDDATE</code></td>
<td>
<p>a character string that specifies the column name in the respective dataset holding the date of when the participant ended ... see <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="relevantESVN_+3A_endtime">ENDTIME</code></td>
<td>
<p>a character string that specifies the column name in the respective dataset holding the time of when the participant ended ... see <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="relevantESVN_+3A_start_datetime">START_DATETIME</code></td>
<td>
<p>a character string. If <code>STARTDATE</code> and <code>STARTTIME</code> are not in two separate columns but are combined as a date-time object in a single column pass that column's name and ignore the arguments <code>STARTDATE</code> and <code>STARTTIME</code>.</p>
</td></tr>
<tr><td><code id="relevantESVN_+3A_end_datetime">END_DATETIME</code></td>
<td>
<p>a character string. If <code>ENDDATE</code> and <code>ENDTIME</code> are not in two separate columns but are combined as a date-time object in a single column pass that column's name and ignore the arguments <code>ENDDATE</code> and <code>ENDTIME</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The relevant variable names (i.e. column names) must refer to the raw ESM dataset(s). The date and time of both start and end refers to the single ESM questionnaires, i.e. the date and time they actually were started on the phone and the date and time they were finished.
</p>


<h3>Value</h3>

<p>A list of the relevant variable/column names in the ESM dataset(s). To be used as the last argument in the function <code><a href="#topic+setES">setES</a></code>. The last element of the list is a logical value indicating whether the date and time are either separated (TRUE) or already a date-time object (FALSE). It is meaningful only for the subsequent function <code><a href="#topic+setES">setES</a></code>.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 3 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# ------------------------------------------------------
# Run function 3 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# With date and time as separate arguments
relEs &lt;- relevantESVN(svyName="survey_name", IMEI="IMEI",
STARTDATE="start_date", STARTTIME="start_time",
ENDDATE="end_date", ENDTIME="end_time")
# With date-time objects instead of separate date and time
relEs &lt;- relevantESVN(svyName="survey_name", IMEI="IMEI",
START_DATETIME="start_dateTime", END_DATETIME="end_dateTime")
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='RELEVANTINFO_ES'>Resulting list after function setES has been executed.</h2><span id='topic+RELEVANTINFO_ES'></span>

<h3>Description</h3>

<p><strong>Note</strong>: The list <code>RELEVANTINFO_ES</code> is the result of the function <code><a href="#topic+setES">setES</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RELEVANTINFO_ES
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 3.</p>

<hr>
<h2 id='relevantREFVN'>relevantREFVN</h2><span id='topic+relevantREFVN'></span>

<h3>Description</h3>

<p>relevantREFVN creates a list of the relevant variable names (VN) of the reference (REF) dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>relevantREFVN(ID = NULL, IMEI = NULL, ST = NULL, STARTDATE = NULL,
  STARTTIME = NULL, ENDDATE = NULL, ENDTIME = NULL,
  START_DATETIME = NULL, END_DATETIME = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="relevantREFVN_+3A_id">ID</code></td>
<td>
<p>a character string that specifies the column name which holds the unique identification code for the participant.</p>
</td></tr>
<tr><td><code id="relevantREFVN_+3A_imei">IMEI</code></td>
<td>
<p>a character string. Column name that specifies the variable in the respective dataset holding the the IMEI number.</p>
</td></tr>
<tr><td><code id="relevantREFVN_+3A_st">ST</code></td>
<td>
<p>a character string. It must be the first component of the column name in the reference dataset that specifies the prompts on the mobile device, e.g. ST for scheduled time. The column names must all be equal except for the last character, which must specify the respective number of the prompt, e.g. ST3 for the third prompt of the day.</p>
</td></tr>
<tr><td><code id="relevantREFVN_+3A_startdate">STARTDATE</code></td>
<td>
<p>a character string that specifies the column name in the respective dataset holding the date of when the participant started ... see <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="relevantREFVN_+3A_starttime">STARTTIME</code></td>
<td>
<p>a character string that specifies the column name in the respective dataset holding the time of when the participant started ... see <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="relevantREFVN_+3A_enddate">ENDDATE</code></td>
<td>
<p>a character string that specifies the column name in the respective dataset holding the date of when the participant ended ... see <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="relevantREFVN_+3A_endtime">ENDTIME</code></td>
<td>
<p>a character string that specifies the column name in the respective dataset holding the time of when the participant ended ... see <strong>Details</strong>.</p>
</td></tr>
<tr><td><code id="relevantREFVN_+3A_start_datetime">START_DATETIME</code></td>
<td>
<p>a character string. If <code>STARTDATE</code> and <code>STARTTIME</code> are not in two separate columns but are combined as a date-time object in a single column pass that column's name and ignore the arguments <code>STARTDATE</code> and <code>STARTTIME</code>.</p>
</td></tr>
<tr><td><code id="relevantREFVN_+3A_end_datetime">END_DATETIME</code></td>
<td>
<p>a character string. If <code>ENDDATE</code> and <code>ENDTIME</code> are not in two separate columns but are combined as a date-time object in a single column pass that column's name and ignore the arguments <code>ENDDATE</code> and <code>ENDTIME</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The relevant variable names (i.e. column names) must refer to the reference dataset. The date and time of both start and end refers to the ESM period for each participant, starting with the date and time he/she fills out the very first ESM questionnaire on his/her own and ending with the date and time he/she fills out the very last ESM questionnaire.
</p>


<h3>Value</h3>

<p>A list of the relevant variable/column names in the reference dataset. To be used as the last argument in the function <code><a href="#topic+setREF">setREF</a></code>. The last element of the list is a logical value indicating whether the date and time are either separated (TRUE) or a single date-time object (FALSE). It is meaningful only for the subsequent function <code><a href="#topic+setREF">setREF</a></code>.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 1 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# ------------------------------------------------------
# Run function 1 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# With date and time as separate arguments
relRef &lt;- relevantREFVN(ID="id", IMEI="imei", ST="st",
STARTDATE="start_date", STARTTIME="start_time",
ENDDATE="end_date", ENDTIME="end_time")
# With date-time objects instead of separate date and time
relRef &lt;- relevantREFVN(ID="id", IMEI="imei", ST="st",
START_DATETIME="start_dateTime", END_DATETIME="end_dateTime")
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='RELEVANTVN_ESext'>Resulting list after function genDateTime has been executed on the list of ESM datasets.</h2><span id='topic+RELEVANTVN_ESext'></span>

<h3>Description</h3>

<p><strong>Note</strong>: The extended (see ending 'ext') list <code>RELEVANTVN_ESext</code> is the result of the function <code><a href="#topic+genDateTime">genDateTime</a></code>, when the list of datasets <code>keyLs</code> is one of the function arguments. The list <code>RELEVANTVN_ES</code> (before being extended) is generated by the function <code><a href="#topic+setES">setES</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RELEVANTVN_ESext
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 8.</p>

<hr>
<h2 id='RELEVANTVN_REFext'>Resulting list after function genDateTime has been executed on the reference dataset.</h2><span id='topic+RELEVANTVN_REFext'></span>

<h3>Description</h3>

<p><strong>Note</strong>: The extended (see ending 'ext') list <code>RELEVANTVN_REFext</code> is the result of the function <code><a href="#topic+genDateTime">genDateTime</a></code>, when the reference dataset <code><a href="#topic+referenceDf">referenceDf</a></code> is one of the function arguments. The list <code>RELEVANTVN_REF</code> (before being extended) is generated by the function <code><a href="#topic+setREF">setREF</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RELEVANTVN_REFext
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 9.</p>

<hr>
<h2 id='rmInvalid'>rmInvalid</h2><span id='topic+rmInvalid'></span>

<h3>Description</h3>

<p>removeInvalid removes the invalid ESM questionnaires as specified by the user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmInvalid(dfList, RELEVANTVN_ES = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rmInvalid_+3A_dflist">dfList</code></td>
<td>
<p>a list. Each element of the list must be a data.frame. Each data.frame is a separate raw ESM dataset/an ESM questionnaire version. If there is just one ESM version the list therefore contains one data.frame.</p>
</td></tr>
<tr><td><code id="rmInvalid_+3A_relevantvn_es">RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A data line is assumed to be invalid if both the start date and the start time are missing (NA = not available).
</p>


<h3>Value</h3>

<p>The user receives a list containing 4 elements:
</p>

<ol>
<li><p> dfValid, i.e. the raw ESM dataset(s), after removing all invalid lines of data.
</p>
</li>
<li><p> listInvalid, i.e. the raw ESM dataset(s), containing only the removed lines of data.
</p>
</li>
<li><p> rmInvalidFinished, i.e. a logical value, specifying whether at least one line of data was removed due to being invalid.
</p>
</li>
<li><p> noLinesRemovedAtAll, i.e. a logical vector, specifying in which of the ESM raw dataset(s) there were invalid lines of data.
</p>
</li></ol>

<p>See <strong>Details</strong> for more information.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 9 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute rmInvalid. Start ----------------
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# keyLsNew is a list of datasets, also delivered with the package
# Prerequisites in order to execute rmInvalid. End ------------------
# ------------------------------------------------------
# Run function 9 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# keyLsNew is the result of function 'genDateTime' (or of function 'splitDateTime').
rmInvLs &lt;- rmInvalid(keyLsNew, RELEVANTVN_ES)
# Result of function 'rmInvalid' is a list with 4 elements:
names(rmInvLs)
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='setES'>setES</h2><span id='topic+setES'></span>

<h3>Description</h3>

<p>setES sets the relevant variable names concerning the ESM dataset(s).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setES(MAXPROMPT = NULL, IMEI_NUMBERS = NULL, SVYNAMES = NULL,
  ESVN = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setES_+3A_maxprompt">MAXPROMPT</code></td>
<td>
<p>a numeric value. The number of prompts per day.</p>
</td></tr>
<tr><td><code id="setES_+3A_imei_numbers">IMEI_NUMBERS</code></td>
<td>
<p>a vector of character strings. Each element of the vector specifies an IMEI number of at least one of the phone that have been used in the ESM study.</p>
</td></tr>
<tr><td><code id="setES_+3A_svynames">SVYNAMES</code></td>
<td>
<p>a vector of character strings. Each element of the vector specifies one ESM version, which must exist as a separate column in the raw ESM dataset(s). If in function <code><a href="#topic+relevantESVN">relevantESVN</a></code> the default value NULL has been kept for the argument svyName, also keep the default value NULL for this argument! Keeping the default value NULL is not recommended, though. See <strong>NOTE</strong> in the description of the argument 'svyName' of function <code><a href="#topic+relevantESVN">relevantESVN</a></code>.</p>
</td></tr>
<tr><td><code id="setES_+3A_esvn">ESVN</code></td>
<td>
<p>a list. Each element of the list must specify one of the relevant column names of the raw ESM dataset(s); i.e. the ESM survey version, the IMEI number, the start date, the start time, the end date, and the end time. Use function <code><a href="#topic+relevantESVN">relevantESVN</a></code> to generate <code>ESVN</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The one list is named RELEVANTINFO_ES. It contains 3 elements.
</p>

<ol>
<li><p> MAXPROMPT: the number of daily prompts on the mobile device
</p>
</li>
<li><p> IMEI_NUMBERS: all the IMEI numbers that are used in the study
</p>
</li>
<li><p> SVYNAMES: the names of all ESM questionnaire versions used in the study.
</p>
</li></ol>

<p>The other list is named RELEVANTVN_ES, it contains either 4 or 6 elements, depending on whether the start date and the start time already exist as a date-time object (same for end date and end time). In the latter case the list elements' names are:
</p>

<ol>
<li><p> ES_SVY_NAME: the column name in the ESM dataset(s) holding the name of the ESM questionnaire version
</p>
</li>
<li><p> ES_IMEI: the column name in the ESM dataset(s) holding the IMEI number
</p>
</li>
<li><p> ES_START_DATE: the date of when an ESM questionnaire was started
</p>
</li>
<li><p> ES_START_TIME: the time of when an ESM questionnaire was started
</p>
</li>
<li><p> ES_END_DATE: the date of when an ESM questionnaire was finished
</p>
</li>
<li><p> ES_END_TIME: the time of when an ESM questionnaire was finished
</p>
</li></ol>

<p>If the start date and start time (same for end date and end time) are combined to a date-time object, the 3rd list element will be ES_STARTDATETIME and the 4th element will be ES_ENDDATETIME
The last element will always be ES_DATETIMES_SEP: TRUE if date and time are separated, FALSE if they are a single date-time object.
</p>


<h3>Value</h3>

<p>2 separate lists. Each element of the lists is named according to the variable's content. See <strong>Details</strong> for more information.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 4 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute setES. Start --------------------
relEs &lt;- relevantESVN(svyName="survey_name", IMEI="IMEI",
STARTDATE="start_date", STARTTIME="start_time",
ENDDATE="end_date", ENDTIME="end_time")
# Prerequisites in order to execute setES. End ----------------------
# ------------------------------------------------------
# Run function 4 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# imeiNumbers is the vector containing all IMEI numbers used in
# the ESM study; use the respective entries in the referenceDf.
imeiNumbers &lt;- as.character(referenceDf$imei)
# surveyNames is the vector containing all ESM version names.
surveyNames &lt;- c(
# Test group
   "morningTestGroup", "dayTestGroup", "eveningTestGroup",
# Control group
   "morningControlGroup", "dayControlGroup", "eveningControlGroup")
# 4 is the number of daily prompts
# relEs is the result of function 'relevantESVN'
RELEVANT_ES &lt;- setES(4, imeiNumbers, surveyNames, relEs)
# Extract relevant ESM general information
RELEVANTINFO_ES &lt;- RELEVANT_ES[["RELEVANTINFO_ES"]]
# Extract list of relevant variables names of raw ESM datasets.
RELEVANTVN_ES &lt;- RELEVANT_ES[["RELEVANTVN_ES"]]

# With date-time objects instead of separate date and time
relEs &lt;- relevantESVN(svyName="survey_name", IMEI="IMEI",
START_DATETIME="start_dateTime", END_DATETIME="end_dateTime")
RELEVANT_ES &lt;- setES(4, imeiNumbers, surveyNames, relEs)
# Extract relevant ESM general information
RELEVANTINFO_ES &lt;- RELEVANT_ES[["RELEVANTINFO_ES"]]
# Extract list of relevant variables names of raw ESM datasets.
RELEVANTVN_ES &lt;- RELEVANT_ES[["RELEVANTVN_ES"]]
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='setREF'>setREF</h2><span id='topic+setREF'></span>

<h3>Description</h3>

<p>setREF sets the relevant variable names concerning the reference dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setREF(MAXPROMPT = NULL, REFVN = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setREF_+3A_maxprompt">MAXPROMPT</code></td>
<td>
<p>a numeric value. The number of prompts per day.</p>
</td></tr>
<tr><td><code id="setREF_+3A_refvn">REFVN</code></td>
<td>
<p>a list. Each element of the list must specify one of the relevant column names of the reference dataset; i.e. the identification number (e.g. ID), the IMEI number, the character substring that all columns have in common which specify the prompt time, the start date, the start time, the end date, and the end time. Use function <code><a href="#topic+relevantREFVN">relevantREFVN</a></code> to generate <code>REFVN</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The list is named &quot;RELEVANTVN_REF&quot;. It contains either 5 or 7 elements, depending on whether the start date and the start time already exist as a date-time object (same for end date and end time). In the latter case the list elements' names are:
</p>

<ol>
<li><p> REF_ID: the column name in the reference dataset holding the name of the unique participant identification code.
</p>
</li>
<li><p> REF_IMEI: the column name in the reference dataset holding the IMEI number.
</p>
</li>
<li><p> REF_ST: the column name in the reference dataset holding the scheduled times (st)/prompts, except for the numeric end of the column name.
</p>
</li>
<li><p> REF_START_DATETIME: the date-time object of when the very first ESM questionnaire was scheduled/prompted.
</p>
</li>
<li><p> REF_END_DATETIME: the date-time object of when the very last ESM questionnaire was scheduled/prompted.
</p>
</li></ol>

<p>If the start date and start time (same for end date and end time) are separated, the list elements will be
</p>

<ol>
<li><p> REF_ID: the column name in the reference dataset holding the name of the unique participant identification code.
</p>
</li>
<li><p> REF_IMEI: the column name in the reference dataset holding the IMEI number.
</p>
</li>
<li><p> REF_ST: the column name in the reference dataset holding the scheduled times (st)/prompts, except for the numeric end of the column name.
</p>
</li>
<li><p> REF_START_DATE: the date of when the very first ESM questionnaire was scheduled/prompted.
</p>
</li>
<li><p> REF_START_TIME: the time of when the very first ESM questionnaire was scheduled/prompted.
</p>
</li>
<li><p> REF_END_DATE the date of when the very last ESM questionnaire was scheduled/prompted.
</p>
</li>
<li><p> REF_END_TIME the time of when the very last ESM questionnaire was scheduled/prompted.
</p>
</li></ol>

<p>The last element of the output list will always be &quot;REF_DATETIMES_SEP&quot;: TRUE if date and time are separated, FALSE if they are a single date-time object.
</p>


<h3>Value</h3>

<p>A list. Each element of the list is named according to the variable's content. See <strong>Details</strong> for more information.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 2 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute setREF. Start  ------------------
relRef &lt;- relevantREFVN(ID="id", IMEI="imei", ST="st",
STARTDATE="start_date", STARTTIME="start_time",
ENDDATE="end_date", ENDTIME="end_time")
# Prerequisites in order to execute setREF. End ---------------------
# ------------------------------------------------------
# Run function 2 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# 4 is the number of daily prompts.
# relRef is the result of function 'relevantREFVN'
# Relevant variables names of reference dataset.
(RELEVANTVN_REF &lt;- setREF(4, relRef))
# With date-time objects instead of separate date and time
relRef &lt;- relevantREFVN(ID="id", IMEI="imei", ST="st",
START_DATETIME="start_dateTime", END_DATETIME="end_dateTime")
(RELEVANTVN_REF &lt;- setREF(4, relRef))
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='splitDateTime'>splitDateTime</h2><span id='topic+splitDateTime'></span>

<h3>Description</h3>

<p>splitDateTime splits a date-time object into its components date and time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>splitDateTime(refOrEsDf = NULL, refOrEs = NULL,
  RELEVANTINFO_ES = NULL, RELEVANTVN_ES = NULL,
  RELEVANTVN_REF = NULL, dateTimeFormat = "ymd_HMS")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="splitDateTime_+3A_reforesdf">refOrEsDf</code></td>
<td>
<p>a data.frame. Either the reference dataset or the event sampling raw dataset (already merged to a single dataset).</p>
</td></tr>
<tr><td><code id="splitDateTime_+3A_refores">refOrEs</code></td>
<td>
<p>a character string. Enter &quot;REF&quot; if the argument refOrEs is the reference dataset, enter &quot;ES&quot; if it is the event sampling dataset.</p>
</td></tr>
<tr><td><code id="splitDateTime_+3A_relevantinfo_es">RELEVANTINFO_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code>.</p>
</td></tr>
<tr><td><code id="splitDateTime_+3A_relevantvn_es">RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
<tr><td><code id="splitDateTime_+3A_relevantvn_ref">RELEVANTVN_REF</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setREF">setREF</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
<tr><td><code id="splitDateTime_+3A_datetimeformat">dateTimeFormat</code></td>
<td>
<p>a character string. Choose the current date-time format, &quot;ymd_HMS&quot; (default), &quot;mdy_HMS&quot;, or &quot;dmy_HMS&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Splitting up a date-time object means to separate it into a data-object, e.g. 2007-10-03 and a time-object, e.g. 12:00:00.
</p>


<h3>Value</h3>

<p>The dataset that was passed as first argument with four additional columns, i.e. the separate date and time objects of the combined date-time objects of both ESM start and ESM end. See <strong>Details</strong> for more information.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 27 of 29).<br /> <code>splitDateTime</code> is the reverse function of <code><a href="#topic+genDateTime">genDateTime</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute splitDateTime. Start ------------
# keyLsNew is delivered with the package. Remove the separate date
# and time for both start and end in each of the ESM datasets.
keyLsNewDT &lt;- sapply(keyLsNew, function(x) {
     x &lt;- x[,-match(c("start_date", "start_time",
"end_date", "end_time"), names(x))]
     return(x) } )
relEs &lt;- relevantESVN(svyName="survey_name", IMEI="IMEI",
START_DATETIME="ES_START_DATETIME", END_DATETIME="ES_END_DATETIME")
imeiNumbers &lt;- as.character(referenceDf$imei)
surveyNames &lt;- c("morningTestGroup", "dayTestGroup", "eveningTestGroup",
"morningControlGroup", "dayControlGroup", "eveningControlGroup")
RELEVANT_ES &lt;- setES(4, imeiNumbers, surveyNames, relEs)
RELEVANTINFO_ES &lt;- RELEVANT_ES[["RELEVANTINFO_ES"]]
RELEVANTVN_ES &lt;- RELEVANT_ES[["RELEVANTVN_ES"]]
# referenceDfNew is delivered with the package. Remove the separate
# date and time for both start and end.
referenceDfNewDT &lt;- referenceDfNew[,-match(c("start_date", "start_time",
"end_date", "end_time"), names(referenceDfNew))]
relRef &lt;- relevantREFVN(ID="id", IMEI="imei", ST="st",
START_DATETIME="REF_START_DATETIME", END_DATETIME="REF_END_DATETIME")
RELEVANTVN_REF &lt;- setREF(4, relRef)
# Prerequisites in order to execute splitDateTime. End --------------
# ------------------------------------------------------
# Run function 7 of 29; see esmprep functions' hierarchy.
# ------------------------------------------------------
# Applying function to reference dataset (7a of 29)
referenceDfList &lt;- splitDateTime(referenceDfNewDT, "REF", RELEVANTINFO_ES, RELEVANTVN_ES,
RELEVANTVN_REF)

# Extract reference dataset from output
referenceDfNew &lt;- referenceDfList[["refOrEsDf"]]
names(referenceDfNew)

# Extract extended list of relevant variables names of reference dataset
RELEVANTVN_REF &lt;- referenceDfList[["extendedVNList"]]

# Applying function to raw ESM dataset(s) (7b of 29)
# keyLs is the result of function 'genKey'.
keyList &lt;- splitDateTime(keyLsNewDT, "ES", RELEVANTINFO_ES, RELEVANTVN_ES,
RELEVANTVN_REF)

# Extract list of raw ESM datasets from output
keyLsNew &lt;- keyList[["refOrEsDf"]]

# Extract extended list of relevant variables names of raw ESM datasets
RELEVANTVN_ES &lt;- keyList[["extendedVNList"]]
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='suggestShift'>suggestShift</h2><span id='topic+suggestShift'></span>

<h3>Description</h3>

<p>suggestShift registers all ESM prompts that are eligible to be modified.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>suggestShift(esDf, timeLagMinutes = NULL, RELEVANTINFO_ES = NULL,
  RELEVANTVN_ES = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="suggestShift_+3A_esdf">esDf</code></td>
<td>
<p>a data.frame. A single ESM dataset. It must contain the 2 columns that hold the date-time object for when an ESM questionnaire was started and finished, respectively.</p>
</td></tr>
<tr><td><code id="suggestShift_+3A_timelagminutes">timeLagMinutes</code></td>
<td>
<p>a numeric value. Specify the time difference in <strong>minutes</strong> for questionnaires that might be shifted to a neighboring prompt. See <strong>Details</strong> for more information.</p>
</td></tr>
<tr><td><code id="suggestShift_+3A_relevantinfo_es">RELEVANTINFO_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code>.</p>
</td></tr>
<tr><td><code id="suggestShift_+3A_relevantvn_es">RELEVANTVN_ES</code></td>
<td>
<p>a list. This list is generated by function <code><a href="#topic+setES">setES</a></code> and it is extended once either by function <code><a href="#topic+genDateTime">genDateTime</a></code> or by function <code><a href="#topic+splitDateTime">splitDateTime</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If at least one questionnaire is registered as having been filled out repeatedly at a specific prompt it might be 'reasonable' to shift such questionnaires to a neighboring prompt index. The word 'reasonable' refers to the rule of how questionnaires get assigned to a specific prompt: For each participant the minimum time difference between the actual start time of a questionnaire and all of the participant's scheduled times (prompts) determines which prompt gets assigned to the actual start time. Say between 2 neighboring prompts 4 hours pass, then a questionnaire that was started 3 minutes after the prompt gets assigned to the same prompt as a questionnaire that was started 1 hour and 59 minutes after the prompt. Had it been started say exactly 2 hours after the prompt it would have been assigned to the subsequent prompt. It might be reasonable to assign such a questionnaire to this subsequent (neighboring) prompt.
</p>


<h3>Value</h3>

<p>a list. If at least one prompt is suggested for shifting,  a list containing the following 3 data.frames is returned:
</p>

<ol>
<li><p> the first data.frame (called 'esDf') is the raw ESM dataset in its current state (with new colums SHIFT, SHIFTKEY, and LAG_MINUTES),
</p>
</li>
<li><p> the second data.frame (called 'suggestShiftDf') includes all relevant information to act according to the decision as to which questionnaires shall be shifted. See <strong>Examples</strong> in function <code><a href="#topic+makeShift">makeShift</a></code> to get a clear idea of how to use 'suggestShiftDf',
</p>
</li>
<li><p> the third data.frame (called 'printShiftDf') contains the relevant information to print all questionnaires registered by <code>suggestShift</code> to the console, before as well as after having made the shifting. This printing to the console is done by applying the function <code><a href="#topic+printSuggestedShift">printSuggestedShift</a></code>.
</p>
</li></ol>

<p>If no prompt is suggested for shifting, the list elements 'suggestShiftDf' and 'printShiftDf' both are character strings which confirm that no shift is suggested.
</p>


<h3>See Also</h3>

<p>Exemplary code (fully executable) in the documentation of <code><a href="#topic+esmprep">esmprep</a></code> (function 20 of 29).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
# Prerequisites in order to execute suggestShift. Start -------------
# Use example list delivered with the package
RELEVANTINFO_ES &lt;- RELEVANTINFO_ES
# Use example list delivered with the package
RELEVANTVN_ES &lt;- RELEVANTVN_ESext
# esAssigned is a list of datasets, delivered with the package. It is
# the result of the assignment of the ESM questionnaires to ALL 8
# participants in the reference dataset.
noEndDf &lt;- missingEndDateTime(esAssigned[["ES"]], RELEVANTVN_ES)
identDf &lt;- esIdentical(noEndDf, RELEVANTVN_ES)
# Prerequisites in order to execute suggestShift. End ---------------
# -------------------------------------------------------
# Run function 20 of 29; see esmprep functions' hierarchy.
# -------------------------------------------------------
# identDf is the result of function 'esIdentical'.
# 100 represents the number of minutes that at least must have passed
# between the scheduled start of an ESM questionnaire at its actual start
# in order for the questionnaire to be eligible for shifting (see function
# makeShift).
sugShift &lt;- suggestShift(identDf, 100, RELEVANTINFO_ES, RELEVANTVN_ES)
# Display output element 'suggestShiftDf':
sugShift$suggestShiftDf
# Display output element 'printShiftDf':
sugShift$printShiftDf
# o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o=o
</code></pre>

<hr>
<h2 id='tbsqDf'>Resulting dataset after function computeTimeBetween has been executed on the raw ESM dataset.</h2><span id='topic+tbsqDf'></span>

<h3>Description</h3>

<p><strong>Note</strong>: The dataset <code>tbsqDf</code> is the result of the function <code><a href="#topic+computeTimeBetween">computeTimeBetween</a></code>, when the raw ESM dataset <code>durDf</code> is one of the function arguments. <code>durDf</code> is the result of function <code><a href="#topic+computeDuration">computeDuration</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tbsqDf
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 186 rows and 59 columns.</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
