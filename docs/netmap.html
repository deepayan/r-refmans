<!DOCTYPE html><html lang="en"><head><title>Help for package netmap</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {netmap}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#netmap-package'><p>netmap: Represent Network Objects on a Map</p></a></li>
<li><a href='#check_network_sf'><p>Internal checks before ggnetmap and ggcentrality</p></a></li>
<li><a href='#fvgmap'><p>Map of municipality borders in the Friuli Venezia Giulia region, Italy</p></a></li>
<li><a href='#ggcentrality'><p>Calculate centrality indices for vertices linked to a sf object</p></a></li>
<li><a href='#ggconn_area'><p>Calculate connectedness to a specific vertex for vertices linked to a sf</p>
object</a></li>
<li><a href='#ggnetmap'><p>Fortify a network over a map</p></a></li>
<li><a href='#is_lookup_table'><p>Is data frame a lookup table?</p></a></li>
<li><a href='#is_network'><p>Is object a network?</p></a></li>
<li><a href='#is_sf'><p>Is object a map?</p></a></li>
<li><a href='#link_network_map'><p>Link a network and a map</p></a></li>
<li><a href='#link_network_map2'><p>Link a network and a map with a lookup table</p></a></li>
<li><a href='#netmap'><p>netmap: Plot <code>network</code> and <code>igraph</code> objects on a <code>sf</code> map</p>
using <code>ggplot2</code></a></li>
<li><a href='#netmap_plot'><p>Plot a network object with a layout based on an <code>sf</code> object</p></a></li>
<li><a href='#network.layout.extract_coordinates'><p>Layout of a network based on a <code>sf</code> object</p></a></li>
<li><a href='#reduce_to_map'><p>Reduces network to vertices present on the map</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Represent Network Objects on a Map</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.4</td>
</tr>
<tr>
<td>Description:</td>
<td>Represent 'network' or 'igraph' objects whose vertices can be represented by features in an 'sf' object as a network graph surmising a 'sf' plot. Fits into 'ggplot2' grammar.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/artod83/netmap">https://github.com/artod83/netmap</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/artod83/netmap/issues">https://github.com/artod83/netmap/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>ggnetwork, igraph, network, rlang, sf, sna</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, knitr, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-26 13:25:09 UTC; 146307</td>
</tr>
<tr>
<td>Author:</td>
<td>Matteo Dimai <a href="https://orcid.org/0000-0003-1126-5234"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Matteo Dimai &lt;matteo.dimai@phd.units.it&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-26 13:50:10 UTC</td>
</tr>
</table>
<hr>
<h2 id='netmap-package'>netmap: Represent Network Objects on a Map</h2><span id='topic+netmap-package'></span>

<h3>Description</h3>

<p>Represent 'network' or 'igraph' objects whose vertices can be represented by features in an 'sf' object as a network graph surmising a 'sf' plot. Fits into 'ggplot2' grammar.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Matteo Dimai <a href="mailto:matteo.dimai@phd.units.it">matteo.dimai@phd.units.it</a> (<a href="https://orcid.org/0000-0003-1126-5234">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/artod83/netmap">https://github.com/artod83/netmap</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/artod83/netmap/issues">https://github.com/artod83/netmap/issues</a>
</p>
</li></ul>


<hr>
<h2 id='check_network_sf'>Internal checks before ggnetmap and ggcentrality</h2><span id='topic+check_network_sf'></span>

<h3>Description</h3>

<p>Checks whether the proper packages are installed, whether the parameters are
of the proper classes, whether the network-map link is possible, then
performs the link.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_network_sf(n, m, lkp = NULL, m_name = NULL, n_name = "vertex.names")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_network_sf_+3A_n">n</code></td>
<td>
<p>A <code>network</code> or <code>igraph</code> object.</p>
</td></tr>
<tr><td><code id="check_network_sf_+3A_m">m</code></td>
<td>
<p>A <code>sf</code> object.</p>
</td></tr>
<tr><td><code id="check_network_sf_+3A_lkp">lkp</code></td>
<td>
<p>An optional lookup table.</p>
</td></tr>
<tr><td><code id="check_network_sf_+3A_m_name">m_name</code></td>
<td>
<p>Optional <code>character</code>, name of field in <code>m</code> and of
column in <code>lkp</code>.</p>
</td></tr>
<tr><td><code id="check_network_sf_+3A_n_name">n_name</code></td>
<td>
<p>Optional <code>character</code>, name of vertex attribute in <code>n</code>
and of column in <code>lkp</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with a <code>network</code> or <code>igraph</code> object with only the
vertices present in the <code>sf</code> object as the first element and a list
with two vectors, one of features in <code>m</code> present
both in the lookup table and in <code>n</code>, the other of nodes in <code>n</code>
present both in the lookup table and in <code>m</code>
</p>

<hr>
<h2 id='fvgmap'>Map of municipality borders in the Friuli Venezia Giulia region, Italy</h2><span id='topic+fvgmap'></span>

<h3>Description</h3>

<p>An sf object containing the ISTAT municipality codes, geometry
and the municipality names in the Friuli Venezia Giulia region in northeastern
Italy, based on official ISTAT shapefiles.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fvgmap
</code></pre>


<h3>Format</h3>

<p>An sf object with 215 features and 6 fields:
</p>

<dl>
<dt>Cod_reg</dt><dd><p>region code, always =6 (Friuli Venezia Giulia)</p>
</dd>
<dt>Cod_pro</dt><dd><p>province code (93=Pordenone, 30=Udine, 31=Gorizia, 32=Trieste)</p>
</dd>
<dt>Pro_com</dt><dd><p>municipality code, consists of province code + progressive
code of the municipality within the province</p>
</dd>
<dt>Shape_leng</dt><dd><p>length of municipality perimeter</p>
</dd>
<dt>Shape_area</dt><dd><p>municipality area</p>
</dd>
<dt>geometry</dt><dd><p>a MULTIPOLYGON</p>
</dd>
</dl>



<h3>Source</h3>

<p>https://www.istat.it/it/archivio/104317
</p>

<hr>
<h2 id='ggcentrality'>Calculate centrality indices for vertices linked to a sf object</h2><span id='topic+ggcentrality'></span>

<h3>Description</h3>

<p>Given a <code>sf</code> object with features that can be linked to a <code>network</code>
or <code>igraph</code> object, obtain centrality indices for linked features.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggcentrality(
  n,
  m,
  lkp = NULL,
  m_name = NULL,
  n_name = "vertex.names",
  par.deg = NULL,
  par.bet = NULL,
  par.clo = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ggcentrality_+3A_n">n</code></td>
<td>
<p>A <code>network</code> or <code>igraph</code> object.</p>
</td></tr>
<tr><td><code id="ggcentrality_+3A_m">m</code></td>
<td>
<p>A <code>sf</code> object.</p>
</td></tr>
<tr><td><code id="ggcentrality_+3A_lkp">lkp</code></td>
<td>
<p>An optional lookup table.</p>
</td></tr>
<tr><td><code id="ggcentrality_+3A_m_name">m_name</code></td>
<td>
<p>Optional <code>character</code>, name of field in <code>m</code> and of
column in <code>lkp</code>.</p>
</td></tr>
<tr><td><code id="ggcentrality_+3A_n_name">n_name</code></td>
<td>
<p>Optional <code>character</code>, name of vertex attribute in <code>n</code>
and of column in <code>lkp</code>.</p>
</td></tr>
<tr><td><code id="ggcentrality_+3A_par.deg">par.deg</code></td>
<td>
<p>List with additional optional parameters to functions
<code><a href="sna.html#topic+degree">degree</a></code> or <code><a href="igraph.html#topic+degree">degree</a></code>.</p>
</td></tr>
<tr><td><code id="ggcentrality_+3A_par.bet">par.bet</code></td>
<td>
<p>List with additional optional parameters to functions
<code><a href="sna.html#topic+betweenness">betweenness</a></code> or <code><a href="igraph.html#topic+betweenness">betweenness</a></code>.</p>
</td></tr>
<tr><td><code id="ggcentrality_+3A_par.clo">par.clo</code></td>
<td>
<p>List with additional optional parameters to functions
<code><a href="sna.html#topic+closeness">closeness</a></code> or <code><a href="igraph.html#topic+closeness">closeness</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>sf</code> object, input <code>m</code> with added columns for centrality
indices (degree, betweenness, closeness; existing columns with the same name
will be overwritten) and with only the features linked to vertices in input
<code>n</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>net=network::network(matrix(c(0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0), nrow=4, byrow=TRUE))
network::set.vertex.attribute(net, "name", value=c("a", "b", "c", "d"))
wkb = structure(list("01010000204071000000000000801A064100000000AC5C1641",
"01010000204071000000000000801A084100000000AC5C1441",
"01010000204071000000000000801A044100000000AC5C1241",
"01010000204071000000000000801A024100000000AC5C1841"), class = "WKB")
map=sf::st_sf(id=c("a1", "b2", "c3", "d4"), sf::st_as_sfc(wkb, EWKB=TRUE))
lkptbl=data.frame(id=c("a1", "b2", "c3", "d4"), name=c("a", "b", "c", "d"))
netmap::ggcentrality(net, map, lkptbl, "id", "name")
</code></pre>

<hr>
<h2 id='ggconn_area'>Calculate connectedness to a specific vertex for vertices linked to a sf
object</h2><span id='topic+ggconn_area'></span>

<h3>Description</h3>

<p>Given a <code>sf</code> object with features that can be linked to a <code>network</code>
or <code>igraph</code> object and given a node with id <code>id</code> in said graph that
can be linked to the <code>sf</code> object, obtain an indicator variable denoting,
for each node, a connection to <code>id</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggconn_area(n, m, id, lkp = NULL, m_name = NULL, n_name = "vertex.names")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ggconn_area_+3A_n">n</code></td>
<td>
<p>A <code>network</code> or <code>igraph</code> object.</p>
</td></tr>
<tr><td><code id="ggconn_area_+3A_m">m</code></td>
<td>
<p>A <code>sf</code> object.</p>
</td></tr>
<tr><td><code id="ggconn_area_+3A_id">id</code></td>
<td>
<p>The identifier (as vertex attribute <code>n_name</code> of object <code>n</code>)
of the feature that needs to be checked for connections.</p>
</td></tr>
<tr><td><code id="ggconn_area_+3A_lkp">lkp</code></td>
<td>
<p>An optional lookup table.</p>
</td></tr>
<tr><td><code id="ggconn_area_+3A_m_name">m_name</code></td>
<td>
<p>Optional <code>character</code>, name of field in <code>m</code> and of
column in <code>lkp</code>.</p>
</td></tr>
<tr><td><code id="ggconn_area_+3A_n_name">n_name</code></td>
<td>
<p>Optional <code>character</code>, name of vertex attribute in <code>n</code>
and of column in <code>lkp</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>sf</code> object, input <code>m</code> with an added column
<code>conn_area</code> with an indicator variable set to 1 if the feature is
connected to the feature with vertex id <code>id</code>, 0 otherwise.
In directed graphs, only outgoing links are considered a connection.
Any existing column with the same name will be overwritten, the result will
contain only the features linked to vertices in input. If the vertex
<code>id</code> is not present in object <code>n</code>, <code>conn_area</code> will be set to
0 for all vertices.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>net=network::network(matrix(c(0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0), nrow=4, byrow=TRUE))
network::set.vertex.attribute(net, "name", value=c("a", "b", "c", "d"))
wkb = structure(list("01010000204071000000000000801A064100000000AC5C1641",
"01010000204071000000000000801A084100000000AC5C1441",
"01010000204071000000000000801A044100000000AC5C1241",
"01010000204071000000000000801A024100000000AC5C1841"), class = "WKB")
map=sf::st_sf(id=c("a1", "b2", "c3", "d4"), sf::st_as_sfc(wkb, EWKB=TRUE))
lkptbl=data.frame(id=c("a1", "b2", "c3", "d4"), name=c("a", "b", "c", "d"))
ggconn_area(net, map, "b", lkptbl, "id", "name")
</code></pre>

<hr>
<h2 id='ggnetmap'>Fortify a network over a map</h2><span id='topic+ggnetmap'></span>

<h3>Description</h3>

<p>Link a <code>network</code> or <code>igraph</code> and a <code>sf</code> object in a
<code>data.frame</code> for subsequent representation on a plot using <code>ggplot2</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggnetmap(
  n,
  m,
  lkp = NULL,
  m_name = NULL,
  n_name = "vertex.names",
  scale = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ggnetmap_+3A_n">n</code></td>
<td>
<p>A <code>network</code> or <code>igraph</code> object.</p>
</td></tr>
<tr><td><code id="ggnetmap_+3A_m">m</code></td>
<td>
<p>A <code>sf</code> object.</p>
</td></tr>
<tr><td><code id="ggnetmap_+3A_lkp">lkp</code></td>
<td>
<p>An optional lookup table.</p>
</td></tr>
<tr><td><code id="ggnetmap_+3A_m_name">m_name</code></td>
<td>
<p>Optional <code>character</code>, name of field in <code>m</code> and of
column in <code>lkp</code>.</p>
</td></tr>
<tr><td><code id="ggnetmap_+3A_n_name">n_name</code></td>
<td>
<p>Optional <code>character</code>, name of vertex attribute in <code>n</code>
and of column in <code>lkp</code>.</p>
</td></tr>
<tr><td><code id="ggnetmap_+3A_scale">scale</code></td>
<td>
<p>Whether coordinates should be scaled (defaults to FALSE since the
network should be overlayed with the non-scaled <code>sf</code> object).</p>
</td></tr>
<tr><td><code id="ggnetmap_+3A_...">...</code></td>
<td>
<p>Additional parameters passed to <code><a href="ggnetwork.html#topic+fortify">fortify</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Using a <code>network</code> or <code>igraph</code> and a <code>sf</code> object as inputs,
with an optional lookup table (a <code>data.frame</code>) in case the IDs don't
match, produces a <code>data.frame</code> that can be used with <code>ggnetwork</code>'s
<code><a href="ggnetwork.html#topic+geom_edges">geom_edges</a></code> and <code><a href="ggnetwork.html#topic+geom_nodes">geom_nodes</a></code>
functions to represent the network as overlayed on a <code>sf</code> object in a
<code>ggplot2</code> graph. Only vertices with a corresponding feature in the
<code>sf</code> object are included.
</p>


<h3>Value</h3>

<p>A data frame, produced by <code><a href="ggnetwork.html#topic+fortify">fortify</a></code>, which can be
used as data source in <code>ggplot2</code> graphs.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>net=network::network(matrix(c(0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0), nrow=4, byrow=TRUE))
network::set.vertex.attribute(net, "name", value=c("a", "b", "c", "d"))
wkb = structure(list("01010000204071000000000000801A064100000000AC5C1641",
"01010000204071000000000000801A084100000000AC5C1441",
"01010000204071000000000000801A044100000000AC5C1241",
"01010000204071000000000000801A024100000000AC5C1841"), class = "WKB")
map=sf::st_sf(id=c("a1", "b2", "c3", "d4"), sf::st_as_sfc(wkb, EWKB=TRUE))
lkptbl=data.frame(id=c("a1", "b2", "c3", "d4"), name=c("a", "b", "c", "d"))
ggnetmap(net, map, lkptbl, "id", "name")
</code></pre>

<hr>
<h2 id='is_lookup_table'>Is data frame a lookup table?</h2><span id='topic+is_lookup_table'></span>

<h3>Description</h3>

<p>Checks whether a <code>data.frame</code> is a valid lookup table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_lookup_table(lkp, m_name = NULL, n_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_lookup_table_+3A_lkp">lkp</code></td>
<td>
<p>A <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="is_lookup_table_+3A_m_name">m_name</code></td>
<td>
<p>Optional, a <code>character</code> string with the name of the column
in <code>lkp</code> to check against <code>m</code>.</p>
</td></tr>
<tr><td><code id="is_lookup_table_+3A_n_name">n_name</code></td>
<td>
<p>Optional, a <code>character</code> string with the name of the column
in <code>lkp</code> to check against <code>n</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>FALSE</code> on error, a vector with <code>m_name</code> and <code>n_name</code>
if the lookup table is valid.
</p>

<hr>
<h2 id='is_network'>Is object a network?</h2><span id='topic+is_network'></span>

<h3>Description</h3>

<p>Checks whether an object is a <code>network</code> object or an <code>igraph</code> object,
returns message if it's not
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_network(n)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_network_+3A_n">n</code></td>
<td>
<p>Object of class <code>network</code> or <code>igraph</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> if object of class <code>network</code>, <code>FALSE</code> otherwise.
</p>

<hr>
<h2 id='is_sf'>Is object a map?</h2><span id='topic+is_sf'></span>

<h3>Description</h3>

<p>Checks whether an object is an <code>sf</code> object, returns message if it's not
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_sf(m)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_sf_+3A_m">m</code></td>
<td>
<p>Object of class <code>sf</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> if object of classes <code>sf</code> and <code>data.frame</code>, <code>FALSE</code> otherwise.
</p>

<hr>
<h2 id='link_network_map'>Link a network and a map</h2><span id='topic+link_network_map'></span>

<h3>Description</h3>

<p>Checks which vertices of a <code>network</code> object can be represented with
features of a <code>sf</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>link_network_map(m, n, m_name, n_name = "vertex.names")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="link_network_map_+3A_m">m</code></td>
<td>
<p>Object of class <code>sf</code>.</p>
</td></tr>
<tr><td><code id="link_network_map_+3A_n">n</code></td>
<td>
<p>Object of class <code>network</code> or <code>igraph</code>.</p>
</td></tr>
<tr><td><code id="link_network_map_+3A_m_name">m_name</code></td>
<td>
<p>Name of the map field to use for the link.</p>
</td></tr>
<tr><td><code id="link_network_map_+3A_n_name">n_name</code></td>
<td>
<p>Name of the vertex attribute to use for the link, defaults to
<code>vertex.names</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>On success a list with two vectors, one of features in <code>m</code>
present in <code>n</code>, the other of nodes in <code>n</code> present in <code>m</code>,
<code>-1</code> on error.
</p>

<hr>
<h2 id='link_network_map2'>Link a network and a map with a lookup table</h2><span id='topic+link_network_map2'></span>

<h3>Description</h3>

<p>Checks which vertices of a network object can be represented with features of
a sf object with a lookup table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>link_network_map2(m, n, lkp, m_name = NULL, n_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="link_network_map2_+3A_m">m</code></td>
<td>
<p>Object of class <code>sf</code>.</p>
</td></tr>
<tr><td><code id="link_network_map2_+3A_n">n</code></td>
<td>
<p>Object of class <code>network</code> or <code>igraph</code>.</p>
</td></tr>
<tr><td><code id="link_network_map2_+3A_lkp">lkp</code></td>
<td>
<p>Lookup table, a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="link_network_map2_+3A_m_name">m_name</code></td>
<td>
<p>Optional character, name of field in <code>m</code> and of column in
<code>lkp</code> (first column of <code>lkp</code> is used if <code>NULL</code>).</p>
</td></tr>
<tr><td><code id="link_network_map2_+3A_n_name">n_name</code></td>
<td>
<p>Optional character, name of vertex attribute in <code>n</code> and of
column in <code>lkp</code>  (second column of <code>lkp</code> is used if <code>NULL</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>On success a list with two vectors, one of features in <code>m</code> present
both in the lookup table and in <code>n</code>, the other of nodes in <code>n</code> present
both in the lookup table and in <code>m</code>, <code>-1</code> on error.
</p>

<hr>
<h2 id='netmap'>netmap: Plot <code>network</code> and <code>igraph</code> objects on a <code>sf</code> map
using <code>ggplot2</code></h2><span id='topic+netmap'></span>

<h3>Description</h3>

<p>The netmap package extends the <code>ggnetwork</code> package by providing functions to
plot networks, with vertices usually representing objects with a spatial
attribute (cities, regions, countries, users with location data attached etc.)
on a map, provided by a <code>sf</code> object (which in turn is able to represent
more or less all spatial data available). Networks and maps need not have the
same set of elements: if they don't, only the intersection will be represented.
</p>


<h3>netmap functions</h3>

<p>The main function is <code><a href="#topic+ggnetmap">ggnetmap</a></code>, which produces a <code>data.frame</code>
that is then used as <code>data</code> within <code>ggplot2</code> calls. For those wishing
to use the <code><a href="network.html#topic+plot.network">plot.network</a></code> or the
<code><a href="igraph.html#topic+plot.igraph">plot.igraph</a></code> function to plot the network
(without overlaying it on an <code>sf</code> object), both a custom layout function,
<code><a href="#topic+network.layout.extract_coordinates">network.layout.extract_coordinates</a></code>, and a wrapper that provides
convenient manipulation of <code>network</code> and <code>sf</code> objects,
<code><a href="#topic+netmap_plot">netmap_plot</a></code>, are available.
</p>

<hr>
<h2 id='netmap_plot'>Plot a network object with a layout based on an <code>sf</code> object</h2><span id='topic+netmap_plot'></span>

<h3>Description</h3>

<p>Wrapper for <code><a href="network.html#topic+plot.network">plot.network</a></code> and
<code><a href="igraph.html#topic+plot.igraph">plot.igraph</a></code> using a custom network layout that extracts
coordinates of centroids from a <code>sf</code> object. Only vertices with a
corresponding feature are plotted.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>netmap_plot(n, m, lkp = NULL, m_name = NULL, n_name = "vertex.names", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="netmap_plot_+3A_n">n</code></td>
<td>
<p>A <code>network</code> or <code>igraph</code> object.</p>
</td></tr>
<tr><td><code id="netmap_plot_+3A_m">m</code></td>
<td>
<p>A <code>sf</code> object.</p>
</td></tr>
<tr><td><code id="netmap_plot_+3A_lkp">lkp</code></td>
<td>
<p>An optional lookup table.</p>
</td></tr>
<tr><td><code id="netmap_plot_+3A_m_name">m_name</code></td>
<td>
<p>Optional <code>character</code>, name of field in <code>m</code> and of
column in <code>lkp</code>.</p>
</td></tr>
<tr><td><code id="netmap_plot_+3A_n_name">n_name</code></td>
<td>
<p>Optional <code>character</code>, name of vertex attribute in <code>n</code>
and of column in <code>lkp</code>.</p>
</td></tr>
<tr><td><code id="netmap_plot_+3A_...">...</code></td>
<td>
<p>Additional parameters passed to <code><a href="network.html#topic+plot.network">plot.network</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot of the network.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>net=network::network(matrix(c(0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0), nrow=4, byrow=TRUE))
network::set.vertex.attribute(net, "name", value=c("a", "b", "c", "d"))
wkb = structure(list("01010000204071000000000000801A064100000000AC5C1641",
"01010000204071000000000000801A084100000000AC5C1441",
"01010000204071000000000000801A044100000000AC5C1241",
"01010000204071000000000000801A024100000000AC5C1841"), class = "WKB")
map=sf::st_sf(id=c("a1", "b2", "c3", "d4"), sf::st_as_sfc(wkb, EWKB=TRUE))
lkptbl=data.frame(id=c("a1", "b2", "c3", "d4"), name=c("a", "b", "c", "d"))
netmap::netmap_plot(net, map, lkptbl, "id", "name")
</code></pre>

<hr>
<h2 id='network.layout.extract_coordinates'>Layout of a network based on a <code>sf</code> object</h2><span id='topic+network.layout.extract_coordinates'></span>

<h3>Description</h3>

<p>Custom layout for <code><a href="network.html#topic+plot.network">plot.network</a></code>, extracting coordinates
of vertices from a <code>sf</code> object. Its result can be used by
<code><a href="igraph.html#topic+plot.igraph">plot.igraph</a></code> as well.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>network.layout.extract_coordinates(n, layout.par)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="network.layout.extract_coordinates_+3A_n">n</code></td>
<td>
<p>A <code>network</code> or <code>igraph</code> object. Not used, only for
compatibility with <code><a href="network.html#topic+plot.network">plot.network</a></code>.</p>
</td></tr>
<tr><td><code id="network.layout.extract_coordinates_+3A_layout.par">layout.par</code></td>
<td>
<p>A <code>list</code> of layout parameters (the only one implemented is
<code>layout.par$sf</code>, an <code>sf</code> object whose rows match the order of
vertices in <code>n</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix whose rows contain the x,y coordinates of the vertices of <code>n</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>net=network::network(matrix(c(0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0), nrow=4, byrow=TRUE))
network::set.vertex.attribute(net, "name", value=c("a", "b", "c", "d"))
wkb = structure(list("01010000204071000000000000801A064100000000AC5C1641",
"01010000204071000000000000801A084100000000AC5C1441",
"01010000204071000000000000801A044100000000AC5C1241",
"01010000204071000000000000801A024100000000AC5C1841"), class = "WKB")
map=sf::st_sf(id=c("a1", "b2", "c3", "d4"), sf::st_as_sfc(wkb, EWKB=TRUE))
lkptbl=data.frame(id=c("a1", "b2", "c3", "d4"), name=c("a", "b", "c", "d"))
netmap::network.layout.extract_coordinates(net, list(sf=map))
</code></pre>

<hr>
<h2 id='reduce_to_map'>Reduces network to vertices present on the map</h2><span id='topic+reduce_to_map'></span>

<h3>Description</h3>

<p>Removes vertices from a <code>network</code> or <code>igraph</code> object which are not
present in the link vector produced by <code><a href="#topic+link_network_map">link_network_map</a></code> or
<code><a href="#topic+link_network_map2">link_network_map2</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reduce_to_map(n, link, n_name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="reduce_to_map_+3A_n">n</code></td>
<td>
<p>A <code>network</code> or <code>igraph</code> object.</p>
</td></tr>
<tr><td><code id="reduce_to_map_+3A_link">link</code></td>
<td>
<p>A vector with the identifiers of the vertices to keep.</p>
</td></tr>
<tr><td><code id="reduce_to_map_+3A_n_name">n_name</code></td>
<td>
<p>Name of the vertex attribute to filter on.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>network</code> or <code>igraph</code> object with only the vertices
listed in <code>link</code>.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
