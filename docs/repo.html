<!DOCTYPE html><html lang="en"><head><title>Help for package repo</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {repo}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#repo-package'><p>Repo: The Data-centered Data Flow Manager</p></a></li>
<li><a href='#repo_attach'><p>Create a new item from an existing file.</p></a></li>
<li><a href='#repo_attr'><p>Get item attribute.</p></a></li>
<li><a href='#repo_build'><p>Builds a resource using the associated code chunk</p></a></li>
<li><a href='#repo_bulkedit'><p>Edit all items info using a text file.</p></a></li>
<li><a href='#repo_check'><p>Check repository integrity.</p></a></li>
<li><a href='#repo_chunk'><p>Shows code chunk associated with an item</p></a></li>
<li><a href='#repo_copy'><p>Copy items to another repository</p></a></li>
<li><a href='#repo_cpanel'><p>Open a visual interface to the repo</p></a></li>
<li><a href='#repo_dependencies'><p>Build and/or plots a dependency graph</p></a></li>
<li><a href='#repo_depends'><p>Returns item's dependencies</p></a></li>
<li><a href='#repo_entries'><p>Low-level list of item entries.</p></a></li>
<li><a href='#repo_export'><p>Export <code>repo</code> items to RDS file.</p></a></li>
<li><a href='#repo_find'><p>Match items by matching any field</p></a></li>
<li><a href='#repo_get'><p>Retrieve an item from the repo.</p></a></li>
<li><a href='#repo_handlers'><p>Provides simplified access to repository items.</p></a></li>
<li><a href='#repo_has'><p>Check whether a repository has an item</p></a></li>
<li><a href='#repo_info'><p>Provides detailed information about an item.</p></a></li>
<li><a href='#repo_lazydo'><p>Run expression with cache.</p></a></li>
<li><a href='#repo_load'><p>Loads an item to current workspace</p></a></li>
<li><a href='#repo_open'><p>Open an existing repository or create a new one.</p></a></li>
<li><a href='#repo_options'><p>Set repository-wide options</p></a></li>
<li><a href='#repo_pies'><p>Plots a pie chart of repository contents</p></a></li>
<li><a href='#repo_print'><p>Show a summary of the repository contents.</p></a></li>
<li><a href='#repo_project'><p>Defines and <code>put</code>-s a <code>project</code> item.</p></a></li>
<li><a href='#repo_pull'><p>Download item remote content</p></a></li>
<li><a href='#repo_put'><p>Create a new item in the repository.</p></a></li>
<li><a href='#repo_related'><p>Finds all items related to a set of item</p></a></li>
<li><a href='#repo_rm'><p>Remove item from the repo (and the disk).</p></a></li>
<li><a href='#repo_root'><p>Show path to repo root</p></a></li>
<li><a href='#repo_set'><p>Edit an existing item.</p></a></li>
<li><a href='#repo_stash'><p>Quickly store temporary data</p></a></li>
<li><a href='#repo_stashclear'><p>Remove all stashed data</p></a></li>
<li><a href='#repo_sys'><p>Run system call on an item</p></a></li>
<li><a href='#repo_tag'><p>Add tags to an item.</p></a></li>
<li><a href='#repo_tags'><p>List all tags</p></a></li>
<li><a href='#repo_untag'><p>Remove tags from an item.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>A Data-Centered Data Flow Manager</td>
</tr>
<tr>
<td>Version:</td>
<td>2.1.5</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-02-05</td>
</tr>
<tr>
<td>Author:</td>
<td>Francesco Napolitano &lt;franapoli@gmail.com&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Francesco Napolitano &lt;franapoli@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A data manager meant to avoid manual storage/retrieval of
    data to/from the file system. It builds one (or more) centralized
    repository where R objects are stored with rich annotations,
    including corresponding code chunks, and easily searched and
    retrieved. See Napolitano (2017) &lt;<a href="https://doi.org/10.1037%2Fa0028240">doi:10.1037/a0028240</a>&gt; for further
    information.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>digest, tools</td>
</tr>
<tr>
<td>Suggests:</td>
<td>igraph, knitr, shiny, testthat</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.0.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-02-08 09:25:56 UTC; ciccio</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-02-08 16:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='repo-package'>Repo: The Data-centered Data Flow Manager</h2><span id='topic+repo-package'></span><span id='topic+repo'></span>

<h3>Description</h3>

<p>Repo: The Data-centered Data Flow Manager
</p>


<h3>Details</h3>

<p>The Repo package is meant to help with the management of R data
files. It builds one (or more) centralized repository where R
objects are stored together with corresponding annotations, tags,
dependency notes, provenance traces. It also provides navigation
tools to easily locate and load previously stored resources.
</p>
<p>Create a new repository with <code>rp &lt;- repo_open()</code>.
</p>
<p>Given the object rp of class <code>repo</code>, the <code>repo</code> command
<code>foo</code> must be called like this: <code>rp$foo()</code>. However, the
public name of <code>foo</code> will be <code>repo_foo</code>, and this name
must be used to get help (<code>?repo_foo</code>).
</p>
<p>For a complete list of functions, use <code>library(help = "repo")</code>.
</p>


<h3>Author(s)</h3>

<p>Francesco Napolitano <a href="mailto:franapoli@gmail.com">franapoli@gmail.com</a>
</p>

<hr>
<h2 id='repo_attach'>Create a new item from an existing file.</h2><span id='topic+repo_attach'></span>

<h3>Description</h3>

<p>Create a new item from an existing file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_attach(
  filepath,
  description = NULL,
  tags = NULL,
  prj = NULL,
  src = NULL,
  chunk = basename(filepath),
  replace = F,
  to = NULL,
  URL = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_attach_+3A_filepath">filepath</code></td>
<td>
<p>The path to the file to be stored in the repo.</p>
</td></tr>
<tr><td><code id="repo_attach_+3A_description">description</code></td>
<td>
<p>A character description of the item.</p>
</td></tr>
<tr><td><code id="repo_attach_+3A_tags">tags</code></td>
<td>
<p>A list of tags to sort the item. Tags are useful for
selecting sets of items and run bulk actions.</p>
</td></tr>
<tr><td><code id="repo_attach_+3A_prj">prj</code></td>
<td>
<p>The name of a <code>project</code> item in the repository (see
<code>project</code>). Default is no associated project item.</p>
</td></tr>
<tr><td><code id="repo_attach_+3A_src">src</code></td>
<td>
<p>The name of the item that produced the stored
object. Usually a previously attached source code file.</p>
</td></tr>
<tr><td><code id="repo_attach_+3A_chunk">chunk</code></td>
<td>
<p>The name of the code chunk within <code>src</code> that is
responsible for building the item. Set to <code>name</code> by
default. See <code>build</code>.</p>
</td></tr>
<tr><td><code id="repo_attach_+3A_replace">replace</code></td>
<td>
<p>If the item exists, overwrite the specified fields.</p>
</td></tr>
<tr><td><code id="repo_attach_+3A_to">to</code></td>
<td>
<p>An existing item name to attach the file to.</p>
</td></tr>
<tr><td><code id="repo_attach_+3A_url">URL</code></td>
<td>
<p>A URL where the item contents con be downloaded from.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)

## Not run: 
## Creating a PDF file with a figure.
pdf("afigure.pdf")
## Drawing a random plot in the figure
plot(runif(100), runif(100))
dev.off()
## Attaching the PDF file to the repo
rp$attach("afigure.pdf", "A plot of random numbers", "repo_sys")
## don't need the PDF file anymore
file.remove("afigure.pdf")
## Opening the stored PDF with Evince document viewer
rp$sys("afigure.pdf", "evince")

## End(Not run)

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_attr'>Get item attribute.</h2><span id='topic+repo_attr'></span>

<h3>Description</h3>

<p>Get item attribute.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_attr(name, attrib)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_attr_+3A_name">name</code></td>
<td>
<p>An item name.</p>
</td></tr>
<tr><td><code id="repo_attr_+3A_attrib">attrib</code></td>
<td>
<p>An attribute name (currently can be only &quot;path&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The item's attribute value.
</p>


<h3>See Also</h3>

<p>repo_entries, repo_get
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)
rp$put(1, "item1", "Sample item 1", "tag1")
print(rp$attr("item1", "path"))

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_build'>Builds a resource using the associated code chunk</h2><span id='topic+repo_build'></span>

<h3>Description</h3>

<p>In order to be <code>build</code>able, a repository item must have an
associated source file and code chunk.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_build(
  name,
  src = NULL,
  recursive = T,
  force = F,
  env = parent.frame(),
  built = list()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_build_+3A_name">name</code></td>
<td>
<p>Name of an item in the repo.</p>
</td></tr>
<tr><td><code id="repo_build_+3A_src">src</code></td>
<td>
<p>Path to a source file containing the code block
associated with the resource. Not necessary if <code>name</code> is
already in the repository and has an associated source item.</p>
</td></tr>
<tr><td><code id="repo_build_+3A_recursive">recursive</code></td>
<td>
<p>Build dependencies not already in the repo
recursively (T by default).</p>
</td></tr>
<tr><td><code id="repo_build_+3A_force">force</code></td>
<td>
<p>Re-build dependencies recursively even if already in
the repo (F by default).</p>
</td></tr>
<tr><td><code id="repo_build_+3A_env">env</code></td>
<td>
<p>Environment in which to run the code chunk associated
with the item to build. Parent environment by default.</p>
</td></tr>
<tr><td><code id="repo_build_+3A_built">built</code></td>
<td>
<p>A list of items already built used for recursion (not
meant to be passed directly).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Code chunks are defined as in the following example: &ldquo;'
## chunk &quot;item 1&quot; 
x &lt;- code_to_make_x()
rp$put(x, &quot;item 1&quot;)
## 
&ldquo;'
</p>
<p>'item 1' must be associated to the source ('src' parameter of
'put') containing the chunk code.
</p>


<h3>Value</h3>

<p>Nothing, used for side effects.
</p>

<hr>
<h2 id='repo_bulkedit'>Edit all items info using a text file.</h2><span id='topic+repo_bulkedit'></span>

<h3>Description</h3>

<p>Edit all items info using a text file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_bulkedit(outfile = NULL, infile = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_bulkedit_+3A_outfile">outfile</code></td>
<td>
<p>Name of a file to put entries data to.</p>
</td></tr>
<tr><td><code id="repo_bulkedit_+3A_infile">infile</code></td>
<td>
<p>Name of a file to read entries data from.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exactly one of <code>outfile</code> or <code>infile</code> must be
supplied. All repository entry fields are copied to a
tab-separated file when using the <code>outfile</code> parameter. All
repo entries are updated reading from <code>infile</code> when the
<code>infile</code> parameter is used. Within the TAGS field, tags
must be comma-separated. The system writes a checksum to the
<code>outfile</code> that prevents from using it as <code>infile</code> if
repo has changed in the meantime.
</p>


<h3>Value</h3>

<p>Used for side effects.
</p>


<h3>See Also</h3>

<p>repo_set
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)
rp$put(1, "item1", "Sample item 1", c("tag1", "tag2"))

items_data_file &lt;- tempfile()
rp$bulkedit(items_data_file)
## Manually edit items_data_file, then update items:
rp$bulkedit(infile=items_data_file)

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_check'>Check repository integrity.</h2><span id='topic+repo_check'></span>

<h3>Description</h3>

<p>Checks that all indexed data are present in the repository root,
that files are not corrupt and that no unindexed files are present.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_check()
</code></pre>


<h3>Details</h3>

<p>Every time the object associated to an item is stored, an
MD5 checksum is saved to the repository index. <code>check</code>
will use those to verify that the object was not changed by
anything other than Repo itself.
</p>


<h3>Value</h3>

<p>Used for side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Repository creation
rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)

rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)
rp$put(0, "item1", "A sample item", "repo_check")
rp$check()

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_chunk'>Shows code chunk associated with an item</h2><span id='topic+repo_chunk'></span>

<h3>Description</h3>

<p>Shows code chunk associated with an item
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_chunk(name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_chunk_+3A_name">name</code></td>
<td>
<p>Item name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of lines of code, invisibly.
</p>

<hr>
<h2 id='repo_copy'>Copy items to another repository</h2><span id='topic+repo_copy'></span>

<h3>Description</h3>

<p>Copies an object file from one repository to another and creates a new entry
in the index of the destination repository. Supports tags and multiple names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_copy(destrepo, name, tags = NULL, replace = F, confirm = T)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_copy_+3A_destrepo">destrepo</code></td>
<td>
<p>An object of class repo (will copy to it)</p>
</td></tr>
<tr><td><code id="repo_copy_+3A_name">name</code></td>
<td>
<p>The name (or list of names) of the item/s to copy</p>
</td></tr>
<tr><td><code id="repo_copy_+3A_tags">tags</code></td>
<td>
<p>If not NULL, copy all items matching tags. NULL by
default.</p>
</td></tr>
<tr><td><code id="repo_copy_+3A_replace">replace</code></td>
<td>
<p>What to do if item exists in destination repo (see
put). F by default.</p>
</td></tr>
<tr><td><code id="repo_copy_+3A_confirm">confirm</code></td>
<td>
<p>If F, don't ask for confirmation when multiple items
are involved. F by default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Repository creation
rp_path1 &lt;- file.path(tempdir(), "example_repo1")

rp1 &lt;- repo_open(rp_path1, TRUE)
rp1$put(0, "item1", "A sample item", "tag1")
rp_path2 &lt;- file.path(tempdir(), "example_repo2")
rp2 &lt;- repo_open(rp_path2, TRUE)
rp1$copy(rp2, "item1")

## wiping temporary repo
unlink(rp_path1, TRUE)
unlink(rp_path2, TRUE)
</code></pre>

<hr>
<h2 id='repo_cpanel'>Open a visual interface to the repo</h2><span id='topic+repo_cpanel'></span>

<h3>Description</h3>

<p>Opens a browser window with a Shiny interface to a repo. The
interface is preliminary and has some exploration features together
with a &quot;Load into workspace&quot; button for a selected item.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_cpanel(reporoot = NULL, env = globalenv())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_cpanel_+3A_reporoot">reporoot</code></td>
<td>
<p>An object of class repo. Can be NULL like for repo_open.</p>
</td></tr>
<tr><td><code id="repo_cpanel_+3A_env">env</code></td>
<td>
<p>Environment to export variables to. Defaults to globalenv.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for side effects.
</p>

<hr>
<h2 id='repo_dependencies'>Build and/or plots a dependency graph</h2><span id='topic+repo_dependencies'></span>

<h3>Description</h3>

<p>Creates a weighted adjacency matrix, in which <code>(i,j) = x</code>
means that item <code>i</code> is in relation <code>x</code> with item
<code>j</code>. The resulting graph is plotted.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_dependencies(
  tags = NULL,
  tagfun = "OR",
  depends = T,
  attached = T,
  generated = T,
  plot = T,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_dependencies_+3A_tags">tags</code></td>
<td>
<p>Only show nodes matching tags</p>
</td></tr>
<tr><td><code id="repo_dependencies_+3A_tagfun">tagfun</code></td>
<td>
<p>Function specifying how to match tags (by default
&quot;OR&quot;: match any of <code>tags</code>).</p>
</td></tr>
<tr><td><code id="repo_dependencies_+3A_depends">depends</code></td>
<td>
<p>If TRUE, show &quot;depends on&quot; edges.</p>
</td></tr>
<tr><td><code id="repo_dependencies_+3A_attached">attached</code></td>
<td>
<p>If TRUE, show &quot;attached to&quot; edges.</p>
</td></tr>
<tr><td><code id="repo_dependencies_+3A_generated">generated</code></td>
<td>
<p>If TRUE, show &quot;generated by&quot; edges.</p>
</td></tr>
<tr><td><code id="repo_dependencies_+3A_plot">plot</code></td>
<td>
<p>If TRUE (default), plot the dependency graph.</p>
</td></tr>
<tr><td><code id="repo_dependencies_+3A_...">...</code></td>
<td>
<p>Other parameters passed to the <code>plot.igraph</code>
function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The relation between any two items <code>i</code> and <code>j</code> can have
values 1, 2 or 3, respectively meaning:
</p>

<ul>
<li><p>depends on: to build item <code>i</code>, item <code>j</code> was necessary.
</p>
</li>
<li><p>attached to: item <code>i</code> is an attachment item and is attached to
item <code>j</code>.
</p>
</li>
<li><p>generated by: item <code>i</code> has been generated by item <code>j</code>. Item
<code>j</code> is usually an attachment containing the source code that
generated item <code>i</code>.
</p>
</li></ul>



<h3>Value</h3>

<p>Adjacency matrix representing the graph, with edges labeled
1, 2, 3 corresponding to &quot;depends&quot;, &quot;attached&quot; and &quot;generated&quot;
respectively.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Repository creation
rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)

## Producing some irrelevant data
data1 &lt;- 1:10
data2 &lt;- data1 * 2
data3 &lt;- data1 + data2

## Putting the data in the database, specifying dependencies
rp$put(data1, "item1", "First item",
    "repo_dependencies")
rp$put(data2, "item2", "Item dependent on item1", 
    "repo_dependencies", depends="item1")
rp$put(data3, "item3", "Item dependent on item1 and item2",
    "repo_dependencies", depends=c("item1", "item2"))

## Creating a temporary plot and attaching it
fpath &lt;- file.path(rp$root(), "temp.pdf")
pdf(fpath)
plot(data1)
dev.off()
rp$attach(fpath, "visualization of item1", "plot",
   to="item1")

## Obtaining the dependency matrix
depmat &lt;- rp$dependencies(plot=FALSE)
print(depmat)
## The matrix can be plotted as a graph (requires igraph package)
rp$dependencies()
## The following hides "generated" edges
rp$dependencies(generated=FALSE)

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_depends'>Returns item's dependencies</h2><span id='topic+repo_depends'></span>

<h3>Description</h3>

<p>Returns item's dependencies
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_depends(name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_depends_+3A_name">name</code></td>
<td>
<p>The name of a repository item.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The items on which the input item depends.
</p>

<hr>
<h2 id='repo_entries'>Low-level list of item entries.</h2><span id='topic+repo_entries'></span>

<h3>Description</h3>

<p>Low-level list of item entries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_entries()
</code></pre>


<h3>Value</h3>

<p>A detailed list of item entries.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)
rp$put(1, "item1", "Sample item 1", "entries")
rp$put(2, "item2", "Sample item 2", "entries")
rp$put(3, "item3", "Sample item 3", "entries")
print(rp$entries())

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_export'>Export <code>repo</code> items to RDS file.</h2><span id='topic+repo_export'></span>

<h3>Description</h3>

<p>Export <code>repo</code> items to RDS file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_export(name, where = ".", tags = NULL, askconfirm = T)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_export_+3A_name">name</code></td>
<td>
<p>Name (or list of names) of the item/s to export.</p>
</td></tr>
<tr><td><code id="repo_export_+3A_where">where</code></td>
<td>
<p>Destination directory</p>
</td></tr>
<tr><td><code id="repo_export_+3A_tags">tags</code></td>
<td>
<p>List of tags: all items tagged with all the tags in the
list will be exported.</p>
</td></tr>
<tr><td><code id="repo_export_+3A_askconfirm">askconfirm</code></td>
<td>
<p>If T ask confirmation when exporting multiple
items.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE on success, FALSE otherwise.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)
rp$put(1, "item1", "Sample item 1", "export")
rp$export("item1", tempdir()) # creates item1.RDS in a tempdir

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_find'>Match items by matching any field</h2><span id='topic+repo_find'></span>

<h3>Description</h3>

<p>Match items by matching any field
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_find(what, all = F, show = "ds")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_find_+3A_what">what</code></td>
<td>
<p>Character to be matched against any field (see
Details).</p>
</td></tr>
<tr><td><code id="repo_find_+3A_all">all</code></td>
<td>
<p>Show also items tagged with &quot;hide&quot;.</p>
</td></tr>
<tr><td><code id="repo_find_+3A_show">show</code></td>
<td>
<p>Select columns to show.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function actually calls print specifying the find
parameters. The find parameter can be any character string to be
matched against any item field, including string-converted size
(like &quot;10x3&quot;).
</p>


<h3>Value</h3>

<p>Used for side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rp_path &lt;- file.path(tempdir(), "example_repo")

rp &lt;- repo_open(rp_path, TRUE)
rp$put(1, "item1", "Sample item 1", c("tag1", "tag2"))
rp$put(2, "item2", "Sample item 2", c("tag1", "hide"))
rp$put(3, "item3", "Sample item 3", c("tag2", "tag3"))
rp$print()
rp$find("tEm2")
rp$find("ag2", show="t")

## wiping the temp repo
unlink(rp_path, TRUE)

</code></pre>

<hr>
<h2 id='repo_get'>Retrieve an item from the repo.</h2><span id='topic+repo_get'></span>

<h3>Description</h3>

<p>Retrieve an item from the repo.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_get(name, enableSuggestions = T)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_get_+3A_name">name</code></td>
<td>
<p>An item's name.</p>
</td></tr>
<tr><td><code id="repo_get_+3A_enablesuggestions">enableSuggestions</code></td>
<td>
<p>If set to TRUE (default), enables some
checks on <code>name</code> that are meant to gracefully handle
errors and provide suggestions of similar names. If FALSE, the
execution will be significantly faster in large repositories.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The previously stored object, or its file system path for
attachments.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)
rp$put(1, "item1", "Sample item 1", "get")
print(rp$get("item1"))

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_handlers'>Provides simplified access to repository items.</h2><span id='topic+repo_handlers'></span>

<h3>Description</h3>

<p>Creates a list of functions, each one associated with a repository
item, that can be used to access items directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_handlers()
</code></pre>


<h3>Details</h3>

<p>Repository handlers are functions associated with
items. As opposed to item names, they can take advantage of IDE
auto-completion features and do not require quotation marks. A
handler to the <code>repo</code> object itself is provided in the
list.
</p>


<h3>Value</h3>

<p>A list of functions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Repository creation
rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)

## Putting some irrelevant data
rp$put(1, "item1", "Sample item 1", "repo_handlers")
rp$put(2, "item2", "Sample item 2", "repo_handlers")

## Getting item handlers
h &lt;- rp$handlers()
## handlers have the same names as the items in the repo (and they
## include an handler to the repo itself).
names(h)

## Without arguments, function "item1" loads item named "item1".
i1 &lt;- h$item1()

## Arguments can be used to call other repo functions on the item.
h$item1("info")

## After putting new data, the handlers must be refreshed.
rp$put(3, "item3", "Sample item 3", "repo_handlers")
h &lt;- rp$handlers()
names(h)

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_has'>Check whether a repository has an item</h2><span id='topic+repo_has'></span>

<h3>Description</h3>

<p>Check whether a repository has an item
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_has(name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_has_+3A_name">name</code></td>
<td>
<p>Item name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE if <code>name</code> is in the repository, FALSE otherwise.
</p>

<hr>
<h2 id='repo_info'>Provides detailed information about an item.</h2><span id='topic+repo_info'></span>

<h3>Description</h3>

<p>Provides detailed information about an item.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_info(name = NULL, tags = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_info_+3A_name">name</code></td>
<td>
<p>Item name (or list of names). If both name and tags are NULL, information
about the whole repo will be provided.</p>
</td></tr>
<tr><td><code id="repo_info_+3A_tags">tags</code></td>
<td>
<p>List of tags: info will run on all items matching the tag list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)
rp$put(1, "item1", "Sample item 1", "info")
rp$info("item1")

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_lazydo'>Run expression with cache.</h2><span id='topic+repo_lazydo'></span>

<h3>Description</h3>

<p>lazydo searches the repo for previous execution of an
expression. If a previous execution is found, the result is loaded
and returned. Otherwise, the expression is executed and the result
stashed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_lazydo(expr, force = F, env = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_lazydo_+3A_expr">expr</code></td>
<td>
<p>An object of class expression (the code to run).</p>
</td></tr>
<tr><td><code id="repo_lazydo_+3A_force">force</code></td>
<td>
<p>If TRUE, execute expr anyway</p>
</td></tr>
<tr><td><code id="repo_lazydo_+3A_env">env</code></td>
<td>
<p>Environment for expr, defaults to parent.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The expression results are stashed as usual. The name of
the resource is obtained by digesting the expression, so it will
look like an MD5 string in the repo. Note that the expression, and
not its result, will uniquely identify the item in the repo.
</p>
<p>The new item is automatically tagged with &quot;stash&quot;, &quot;hide&quot; and
&quot;lazydo&quot;.
</p>


<h3>Value</h3>

<p>Results of the expression (either loaded or computed on the
fly).
</p>


<h3>See Also</h3>

<p>repo_stash, repo_put
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)


## First run
system.time(rp$lazydo(
    {
        Sys.sleep(1/10)
        x &lt;- 10
    }
))

## lazydo is building resource from code.
## Cached item name is: f3c27f11f99dce20919976701d921c62
##   user  system elapsed 
##  0.004   0.000   0.108 

## Second run
system.time(rp$lazydo(
    {
        Sys.sleep(1/10)
        x &lt;- 10
    }
))

## lazydo found precomputed resource.
##   user  system elapsed 
##  0.001   0.000   0.001 


## The item's name in the repo can be obtained as the name of the
## last item added:

l &lt;- length(rp$entries())
resname &lt;- rp$entries()[[l]]$name
cat(rp$entries()[[l]]$description)
## {
##    Sys.sleep(1/10)
##    x &lt;- 10
## }
rp$rm(resname) ## single cached item cleared

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_load'>Loads an item to current workspace</h2><span id='topic+repo_load'></span>

<h3>Description</h3>

<p>Like <code>repo_get</code>, returns the contents of a stored item. But,
unlike <code>repo_get</code>, loads it to the current namespace.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_load(names, overwrite_existing = F, env = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_load_+3A_names">names</code></td>
<td>
<p>List or vector of repository item names.</p>
</td></tr>
<tr><td><code id="repo_load_+3A_overwrite_existing">overwrite_existing</code></td>
<td>
<p>Overwrite an existing variable by the
same name in the current workspace. If F (defaults) throws an
error.</p>
</td></tr>
<tr><td><code id="repo_load_+3A_env">env</code></td>
<td>
<p>Environment to load the variable into (parent environment
by default).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing, used for side effects.
</p>

<hr>
<h2 id='repo_open'>Open an existing repository or create a new one.</h2><span id='topic+repo_open'></span>

<h3>Description</h3>

<p>If a repository does not exist at the specified location, creates a
directory and stores the repository index in it. If a repository
exists, the index is loaded and a <code>repo</code> object is built.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_open_+3A_root">root</code></td>
<td>
<p>Path to store data in. Defaults to &quot;~/.R_repo&quot;.</p>
</td></tr>
<tr><td><code id="repo_open_+3A_force">force</code></td>
<td>
<p>Don't ask for confirmation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>repo</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Creates a new repository in a temporary directory without asking for
## confirmation.
rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)
rp$put(0, "zero", "a random item", "a_tag")
rp$info()
## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_options'>Set repository-wide options</h2><span id='topic+repo_options'></span>

<h3>Description</h3>

<p>Set repository-wide options
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_options(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_options_+3A_...">...</code></td>
<td>
<p>options to set</p>
</td></tr>
</table>


<h3>Value</h3>

<p>if optional parameters are not passed, the current options
are returned
</p>

<hr>
<h2 id='repo_pies'>Plots a pie chart of repository contents</h2><span id='topic+repo_pies'></span>

<h3>Description</h3>

<p>The pie chart shows all repository items as pie slices of size
proportional to the item sizes on disk. Items with size smaller
then 5
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_pies(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_pies_+3A_...">...</code></td>
<td>
<p>Other parameters passed to the <code>pie</code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Repository creation
rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)

## Producing some irrelevant data of different sizes
data1 &lt;- 1:10
data2 &lt;- 1:length(data(1))*2
data3 &lt;- 1:length(data(1))*3

## Putting the data in the database, specifying dependencies
rp$put(data1, "item1", "First item", "repo_pies")
rp$put(data2, "item2", "Second item", "repo_pies")
rp$put(data3, "item3", "Third item", "repo_pies")

## Showing the pie chart
rp$pies()

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_print'>Show a summary of the repository contents.</h2><span id='topic+repo_print'></span>

<h3>Description</h3>

<p>Show a summary of the repository contents.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_print(tags = NULL, tagfun = "OR", find = NULL, all = F, show = "ds")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_print_+3A_tags">tags</code></td>
<td>
<p>A list of character tags. Only items matching all the
tags will be shown.</p>
</td></tr>
<tr><td><code id="repo_print_+3A_tagfun">tagfun</code></td>
<td>
<p>How to combine tags (see Details).</p>
</td></tr>
<tr><td><code id="repo_print_+3A_find">find</code></td>
<td>
<p>Character to match any filed (see Details).</p>
</td></tr>
<tr><td><code id="repo_print_+3A_all">all</code></td>
<td>
<p>Show also items tagged with &quot;hide&quot;.</p>
</td></tr>
<tr><td><code id="repo_print_+3A_show">show</code></td>
<td>
<p>Select columns to show.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>tagfun</code> param specifies how to combine multiple
tags when matching items. It can be either a character or a
function. As a character, it can be one of <code>OR</code>, <code>AND</code> or
<code>NOT</code> to specify that one, all or none of the tags must be
matched, respectively. If it is a function, it must take two tag
vectors, the first of which corresponds to <code>tags</code>, and return
TRUE for a match, FALSE otherwise.
</p>
<p>The find param can be any character string to be matched against
any item field, including string-converted size (like &quot;10x3&quot;).
</p>


<h3>Value</h3>

<p>Used for side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)
rp$put(1, "item1", "Sample item 1", c("tag1", "tag2"))
rp$put(2, "item2", "Sample item 2", c("tag1", "hide"))
rp$put(3, "item3", "Sample item 3", c("tag2", "tag3"))
rp$print()
rp$print(all=TRUE)
rp$print(show="tds", all=TRUE)
rp$print(show="tds", all=TRUE, tags="tag1")
## wiping the temp repo
unlink(rp_path, TRUE)

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_project'>Defines and <code>put</code>-s a <code>project</code> item.</h2><span id='topic+repo_project'></span>

<h3>Description</h3>

<p>A <code>project</code> item is a special item containing session
information, including package dependencies. Every time a new item
is stored in the repository, it will automatically be assigned to
the current project, if one has been defined, and session
information will be updated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_project(name, description, replace = T)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_project_+3A_name">name</code></td>
<td>
<p>character containing the name of the project</p>
</td></tr>
<tr><td><code id="repo_project_+3A_description">description</code></td>
<td>
<p>character containing a longer description of the
project</p>
</td></tr>
<tr><td><code id="repo_project_+3A_replace">replace</code></td>
<td>
<p>logical, if T then an existing project item by the
same name will be overwritten.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for side effects.
</p>

<hr>
<h2 id='repo_pull'>Download item remote content</h2><span id='topic+repo_pull'></span>

<h3>Description</h3>

<p>Download item remote content
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_pull(name, replace = F)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_pull_+3A_name">name</code></td>
<td>
<p>Name of the existing item that will be updated.</p>
</td></tr>
<tr><td><code id="repo_pull_+3A_replace">replace</code></td>
<td>
<p>If TRUE, existing item's object is overwritten.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Repo index files can be used as pointers to remote
data. The pull function will download the actual data from the
Internet, including regular items or attachment. Another use of
the URL item's parameter is to attach a remote resource without
downloading it.
</p>


<h3>Value</h3>

<p>Used for side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Repository creation
rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)
remote_URL &lt;- paste0("https://github.com/franapoli/repo/blob/",
                     "untested/inst/remote_sample.RDS?raw=true")

## The following item will have remote source
rp$put("Local content", "item1", "Sample item 1", "tag",
         URL = remote_URL)
print(rp$get("item1"))

## suppressWarnings(try(rp$pull("item1"), TRUE))
 tryCatch(rp$pull("item1"),
         error = function(e)
             message("There were warnings whle accessing remote content"),
         warning = function(w)
             message("Could not download remote content")
         )
print(rp$get("item1"))

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_put'>Create a new item in the repository.</h2><span id='topic+repo_put'></span>

<h3>Description</h3>

<p>Given an R object, stores it to an RDS file in the <code>repo</code> root
and add an associated item to the <code>repo</code> index, including
object name, description, tags and more.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_put(
  obj,
  name = NULL,
  description = NULL,
  tags = NULL,
  prj = NULL,
  src = NULL,
  chunk = name,
  depends = NULL,
  replace = F,
  asattach = F,
  to = NULL,
  addversion = F,
  URL = NULL,
  checkRelations = T
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_put_+3A_obj">obj</code></td>
<td>
<p>An R object to store in the repo.</p>
</td></tr>
<tr><td><code id="repo_put_+3A_name">name</code></td>
<td>
<p>A character identifier for the new item. If NULL, the
name of the <code>obj</code> variable will be used.</p>
</td></tr>
<tr><td><code id="repo_put_+3A_description">description</code></td>
<td>
<p>A character description of the item.</p>
</td></tr>
<tr><td><code id="repo_put_+3A_tags">tags</code></td>
<td>
<p>A list of tags to sort the item. Tags are useful for
selecting sets of items and run bulk actions.</p>
</td></tr>
<tr><td><code id="repo_put_+3A_prj">prj</code></td>
<td>
<p>The name of a <code>project</code> item in the repository (see
<code>project</code>). Default is no associated project item.</p>
</td></tr>
<tr><td><code id="repo_put_+3A_src">src</code></td>
<td>
<p>Name of an existing item to be annotated as the
&quot;generator&quot; of the new item. Usually it is an attachment item
containing the source code that generated the new item. Default
is NULL.</p>
</td></tr>
<tr><td><code id="repo_put_+3A_chunk">chunk</code></td>
<td>
<p>The name of the code chunk within <code>src</code> that is
responsible for building the item. Set to <code>name</code> by
default. See <code>build</code>.</p>
</td></tr>
<tr><td><code id="repo_put_+3A_depends">depends</code></td>
<td>
<p>Character vector: items that depend on this
item. Default is NULL.</p>
</td></tr>
<tr><td><code id="repo_put_+3A_replace">replace</code></td>
<td>
<p>One of: V, F, &quot;addversion&quot; to define behavior when
an item by the same name exists. If V, overwrite it. If F stop
with an error. If &quot;addversion&quot; the new item is stored as a new
version and the old item is renamed by appending a &quot;#N&quot;
suffix. Default is F.</p>
</td></tr>
<tr><td><code id="repo_put_+3A_asattach">asattach</code></td>
<td>
<p>Specifies that the item is to be treated as an
attachment (see attach). Default is F.</p>
</td></tr>
<tr><td><code id="repo_put_+3A_to">to</code></td>
<td>
<p>Vector of character. Specifies which item this item is
attached to. Default is NULL.</p>
</td></tr>
<tr><td><code id="repo_put_+3A_addversion">addversion</code></td>
<td>
<p>Deprecated, use the <code>replace</code> parameter
instead.</p>
</td></tr>
<tr><td><code id="repo_put_+3A_url">URL</code></td>
<td>
<p>Remote URL where the <code>pull</code> function expects to
download actual item data from. Default is NULL.</p>
</td></tr>
<tr><td><code id="repo_put_+3A_checkrelations">checkRelations</code></td>
<td>
<p>Check if items referenced by this item
exist. Default is T.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The item <code>name</code> can be any string, however it should
be a concise identifier, possibly without special character
(could become mandatory soon). Some tags have a special
meaning, like &quot;hide&quot; (do not show the item by default),
&quot;attachment&quot; (the item is an attachment - this should never be
set manually), &quot;stash&quot; (the item is a stashed item, makes the
item over-writable by other &quot;stash&quot; items by default).
</p>


<h3>Value</h3>

<p>Used for side effects.
</p>


<h3>See Also</h3>

<p>get, set, attach, info
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Repository creation
rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)

## Producing some irrelevant data
data1 &lt;- 1:10
data2 &lt;- data1 * 2
data3 &lt;- data1 / 2

## Putting the data in the database, specifying dependencies
rp$put(
    obj = data1,
    name = "item1",
    description = "First item",
    tags = c("repo_put", "a_random_tag"),
    )
rp$put(data2, "item2", "Item dependent on item1",
    "repo_dependencies", depends="item1")
rp$put(data3, "item3", "Item dependent on item1 and item2",
    "repo_dependencies", depends=c("item1", "item2"))

print(rp)

## Creating another version of item1
data1.2 &lt;- data1 + runif(10)
rp$put(data1.2, name = "item1", "First item with additional noise",
    tags = c("repo_put", "a_random_tag"), replace="addversion")
print(rp, all=TRUE)
rp$info("item1#1")

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_related'>Finds all items related to a set of item</h2><span id='topic+repo_related'></span>

<h3>Description</h3>

<p>Relations are defined as in the dependency graph.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_related(names, type = "all", excludeseed = F)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_related_+3A_names">names</code></td>
<td>
<p>A <code>character</code> vector of item names.</p>
</td></tr>
<tr><td><code id="repo_related_+3A_type">type</code></td>
<td>
<p>Can be one of &quot;all&quot;, &quot;to&quot;, &quot;from&quot;. &quot;to&quot; recursively
finds items that <code>names</code> is attached to. &quot;from&quot; recursively
finds items that <code>names</code> depends on or is generated
by. &quot;all&quot; finds both (connected components including <code>names</code>.</p>
</td></tr>
<tr><td><code id="repo_related_+3A_excludeseed">excludeseed</code></td>
<td>
<p>logical. If set to FALSE <code>names</code> will be
not included in the output list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>character</code> vector of item names.
</p>


<h3>See Also</h3>

<p>dependencies
</p>

<hr>
<h2 id='repo_rm'>Remove item from the repo (and the disk).</h2><span id='topic+repo_rm'></span>

<h3>Description</h3>

<p>Remove item from the repo (and the disk).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_rm(name = NULL, tags = NULL, force = F)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_rm_+3A_name">name</code></td>
<td>
<p>An item's name.</p>
</td></tr>
<tr><td><code id="repo_rm_+3A_tags">tags</code></td>
<td>
<p>A list of tags: all items matching the list will be
removed.</p>
</td></tr>
<tr><td><code id="repo_rm_+3A_force">force</code></td>
<td>
<p>Don't ask for confirmation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)
rp$put(1, "item1", "Sample item 1", "info")
rp$put(2, "item2", "Sample item 2", "info")
print(rp)
rp$rm("item1")
print(rp)

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_root'>Show path to repo root</h2><span id='topic+repo_root'></span>

<h3>Description</h3>

<p>Show path to repo root
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_root()
</code></pre>


<h3>Value</h3>

<p>character containing the path to the root of the repo.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)
print(rp$root())

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_set'>Edit an existing item.</h2><span id='topic+repo_set'></span>

<h3>Description</h3>

<p>Edit an existing item.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_set(
  name,
  obj = NULL,
  newname = NULL,
  description = NULL,
  tags = NULL,
  prj = NULL,
  src = NULL,
  chunk = NULL,
  depends = NULL,
  addtags = NULL,
  URL = NULL,
  buildURL = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_set_+3A_name">name</code></td>
<td>
<p>An item name.</p>
</td></tr>
<tr><td><code id="repo_set_+3A_obj">obj</code></td>
<td>
<p>An R object to replace the one currently associated with
the item.</p>
</td></tr>
<tr><td><code id="repo_set_+3A_newname">newname</code></td>
<td>
<p>Newname of the item.</p>
</td></tr>
<tr><td><code id="repo_set_+3A_description">description</code></td>
<td>
<p>Item's description.</p>
</td></tr>
<tr><td><code id="repo_set_+3A_tags">tags</code></td>
<td>
<p>New item's tags as a list of character.</p>
</td></tr>
<tr><td><code id="repo_set_+3A_prj">prj</code></td>
<td>
<p>New item's project as a list of character.</p>
</td></tr>
<tr><td><code id="repo_set_+3A_src">src</code></td>
<td>
<p>New item's provenance as a list of character.</p>
</td></tr>
<tr><td><code id="repo_set_+3A_chunk">chunk</code></td>
<td>
<p>New item's chunk name.</p>
</td></tr>
<tr><td><code id="repo_set_+3A_depends">depends</code></td>
<td>
<p>List of item names indicating dependencies.</p>
</td></tr>
<tr><td><code id="repo_set_+3A_addtags">addtags</code></td>
<td>
<p>Tags to be added to current item's tags. Can not be
used together with the parameter &quot;tags&quot;.</p>
</td></tr>
<tr><td><code id="repo_set_+3A_url">URL</code></td>
<td>
<p>A character containing an URL where the item is supposed
to be downloaded from.</p>
</td></tr>
<tr><td><code id="repo_set_+3A_buildurl">buildURL</code></td>
<td>
<p>A character containing a base URL that is completed
by postfixing the item's relative path. Useful to upload
repositories online and make their items downloadable. The
item's current URL is overwritten.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for side effects.
</p>


<h3>See Also</h3>

<p>repo_put
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)
rp$put(1, "item1", "Sample item 1", c("tag1", "tag2"))
rp$set("item1", obj=2)
print(rp$get("item1"))
rp$set("item1", description="Modified description", tags="new_tag_set")
rp$info("item1")

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_stash'>Quickly store temporary data</h2><span id='topic+repo_stash'></span>

<h3>Description</h3>

<p>A very simplified call to put that only requires to specify
a variable name.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_stash(object, rename = deparse(substitute(object)))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_stash_+3A_object">object</code></td>
<td>
<p>The object to store in the repo.</p>
</td></tr>
<tr><td><code id="repo_stash_+3A_rename">rename</code></td>
<td>
<p>An optional character containing the new name for the
item. Otherwise the name of object is used as item's name.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>name</code> parameter is used to search the parent (or a
different specified) environment for the actual object to
store. Then it is also used as the item name. The reserved tags
&quot;stash&quot; and &quot;hide&quot; are set. In case a stashed item by the same
name already exists, it is automatically overwritten. In case a
non-stashed item by the same name already exists, an error is
raised. A different name can be specified through the rename
parameter in such cases.
</p>


<h3>Value</h3>

<p>Used for side effects.
</p>


<h3>See Also</h3>

<p>repo_put, repo_lazydo
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)
tempdata &lt;- runif(10)
rp$stash(tempdata)
rp$info("tempdata")

## wiping temporary repo
unlink(rp_path, TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='repo_stashclear'>Remove all stashed data</h2><span id='topic+repo_stashclear'></span>

<h3>Description</h3>

<p>Remove all stashed data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_stashclear(force = F)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_stashclear_+3A_force">force</code></td>
<td>
<p>If TRUE, no confirmation is asked.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for side effects.
</p>


<h3>See Also</h3>

<p>repo_rm, repo_stash
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)
tempdata &lt;- runif(10)
rp$stash("tempdata")
rp$print(all=TRUE)
rp$stashclear(TRUE)

## wiping temporary repo
unlink(rp_path, TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='repo_sys'>Run system call on an item</h2><span id='topic+repo_sys'></span>

<h3>Description</h3>

<p>Runs a system command passing as parameter the file name containing
the object associated with an item.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_sys(name, command)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_sys_+3A_name">name</code></td>
<td>
<p>Name of a repo item. The path to the file that contains
the item will be passed to the system program.</p>
</td></tr>
<tr><td><code id="repo_sys_+3A_command">command</code></td>
<td>
<p>System command</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for side effects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Repository creation
rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)

## Creating a PDF file with a figure.
pdffile &lt;- file.path(rp_path, "afigure.pdf")
pdf(pdffile)
plot(runif(30), runif(30))
dev.off()

## Attaching the PDF file to the repo
rp$attach(pdffile, "A plot of random numbers", "repo_sys")
## don't need the original PDF file anymore
file.remove(pdffile)

## Opening the stored PDF with Evince document viewer
## Not run: 
rp$sys("afigure.pdf", "evince")

## End(Not run)

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_tag'>Add tags to an item.</h2><span id='topic+repo_tag'></span>

<h3>Description</h3>

<p>Add tags to an item.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_tag(name = NULL, newtags, tags = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_tag_+3A_name">name</code></td>
<td>
<p>An item name.</p>
</td></tr>
<tr><td><code id="repo_tag_+3A_newtags">newtags</code></td>
<td>
<p>A list of tags that will be added to the item's tag
list.</p>
</td></tr>
<tr><td><code id="repo_tag_+3A_tags">tags</code></td>
<td>
<p>A list of tags: newtags will be added to all items
matching the list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for side effects.
</p>


<h3>See Also</h3>

<p>repo_untag, repo_set
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)
rp$put(1, "item1", "Sample item 1", "tag1")
rp$print(show="t")
rp$tag("item1", "tag2")
rp$print(show="t")

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_tags'>List all tags</h2><span id='topic+repo_tags'></span>

<h3>Description</h3>

<p>Shows list of all unique tags associated with any item in the
repository.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_tags(name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_tags_+3A_name">name</code></td>
<td>
<p>The name of a repository item.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector of unique tags defined in the repo.
</p>


<h3>See Also</h3>

<p>repo_put
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)

## Putting two items with a few tags
rp$put(1, "item1", "Sample item 1",
    c("repo_tags", "tag1"))
rp$put(2, "item2", "Sample item 2",
    c("repo_tags", "tag2"))

## Looking up tags
rp$tags()

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

<hr>
<h2 id='repo_untag'>Remove tags from an item.</h2><span id='topic+repo_untag'></span>

<h3>Description</h3>

<p>Remove tags from an item.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>repo_untag(name = NULL, rmtags, tags = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="repo_untag_+3A_name">name</code></td>
<td>
<p>An item name.</p>
</td></tr>
<tr><td><code id="repo_untag_+3A_rmtags">rmtags</code></td>
<td>
<p>A list of tags that will be removed from the item's
tag list.</p>
</td></tr>
<tr><td><code id="repo_untag_+3A_tags">tags</code></td>
<td>
<p>A list of tags: rmtags will be removed from all items
matching the list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Used for side effects.
</p>


<h3>See Also</h3>

<p>repo_tag, repo_set
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)
rp$put(1, "item1", "Sample item 1", c("tag1", "tag2"))
rp$print(show="t")
rp$untag("item1", "tag2")
rp$print(show="t")

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
