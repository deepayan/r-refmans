<!DOCTYPE html><html lang="en-US"><head><title>Help for package Nmisc</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {Nmisc}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#catn'><p>Concatenate with new line</p></a></li>
<li><a href='#clear_warnings'><p>Avoid repeated warnings</p></a></li>
<li><a href='#format_utc'><p>Format Date and POSIXct</p></a></li>
<li><a href='#generate_install_file'><p>Generates an R file to install packages used by the project.</p></a></li>
<li><a href='#get_os'><p>Returns the name of the Operating System</p></a></li>
<li><a href='#get_packages'><p>Get information about the package used in the project</p></a></li>
<li><a href='#is.POSIXct'><p>Is it a POSIXct object?</p></a></li>
<li><a href='#keep_at'><p>Keep or discard elements</p></a></li>
<li><a href='#keep_if_in'><p>Keep elements present in x and not contained in y</p></a></li>
<li><a href='#keep_if_not_in'><p>Discard elements present in x and not contained in y</p></a></li>
<li><a href='#now_utc'><p>Current time in UTC time zone</p></a></li>
<li><a href='#pull_with_names'><p>Pull out a single column</p></a></li>
<li><a href='#seq_nrow'><p>Creates a sequence based on the number of rows or columns</p></a></li>
<li><a href='#setequal_na'><p>Check if two vectors have the same elements</p></a></li>
<li><a href='#str1'><p>High level overview of the structure of an R object</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Miscellaneous Functions Used at 'Numeract LLC'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.7</td>
</tr>
<tr>
<td>Description:</td>
<td>Contains functions useful for debugging, set operations on vectors,
    and 'UTC' date and time functionality. It adds a few vector manipulation 
    verbs to 'purrr' and 'dplyr' packages. It can also generate an R file to 
    install and update packages to simplify deployment into production. The 
    functions were developed at the data science firm 'Numeract LLC' and are 
    used in several packages and projects.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/numeract/Nmisc">https://github.com/numeract/Nmisc</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/numeract/Nmisc/issues">https://github.com/numeract/Nmisc/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENCE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, magrittr, purrr, rappdirs, rlang, tibble, tidyselect,
stringr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>lubridate, testthat, covr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-04-28 13:31:48 UTC; Mike</td>
</tr>
<tr>
<td>Author:</td>
<td>Mike Badescu [aut, cre],
  Ana-Maria Niculescu [aut],
  Teodor Ciuraru [ctb],
  Numeract LLC [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Mike Badescu &lt;mike.badescu@numeract.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-04-28 13:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='catn'>Concatenate with new line</h2><span id='topic+catn'></span>

<h3>Description</h3>

<p>Wrapper around cat which appends new line to output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catn(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catn_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <code><a href="base.html#topic+cat">cat</a></code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+cat">cat</a></code>
</p>

<hr>
<h2 id='clear_warnings'>Avoid repeated warnings</h2><span id='topic+clear_warnings'></span>

<h3>Description</h3>

<p>Clear warnings for production code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clear_warnings()
</code></pre>


<h3>See Also</h3>

<p><code><a href="base.html#topic+warnings">warnings</a></code>
</p>

<hr>
<h2 id='format_utc'>Format Date and POSIXct</h2><span id='topic+format_utc'></span>

<h3>Description</h3>

<p>Converts Date and POSIXct objects to the format given as input.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_utc(x, format = NULL, usetz = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="format_utc_+3A_x">x</code></td>
<td>
<p>A Date or POSIXct object to be converted.</p>
</td></tr>
<tr><td><code id="format_utc_+3A_format">format</code></td>
<td>
<p>A character string. The default format is
&quot;%Y-%m-%d&quot; for Date and &quot;%Y-%m-%d %H:%M:%S&quot; for POSIXct.</p>
</td></tr>
<tr><td><code id="format_utc_+3A_usetz">usetz</code></td>
<td>
<p>Logical. If TRUE, the time zone abbreviation is
appended to the output. Applicable only if an POSIXct object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string representing the formatted date.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+format.Date">format.Date</a></code>, <code><a href="base.html#topic+format.POSIXct">format.POSIXct</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>format_utc(Sys.time(), format = "%Y-%m-%d", usetz = FALSE)

</code></pre>

<hr>
<h2 id='generate_install_file'>Generates an R file to install packages used by the project.</h2><span id='topic+generate_install_file'></span>

<h3>Description</h3>

<p>The function takes the output of <code>get_packages</code> and
writes in a file the commands needed to install and update
package used throughout the project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_install_file(
  file,
  package_df = get_packages(),
  include_core_package = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="generate_install_file_+3A_file">file</code></td>
<td>
<p>The name of the file to be created.</p>
</td></tr>
<tr><td><code id="generate_install_file_+3A_package_df">package_df</code></td>
<td>
<p>A data frame obtained with <code>get_packages</code> that 
contains information regarding the name, version and source of the package.</p>
</td></tr>
<tr><td><code id="generate_install_file_+3A_include_core_package">include_core_package</code></td>
<td>
<p>Logical, whether to include in the 
generated install file package which come with R by default</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_packages">get_packages</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
package_df &lt;- get_packages(package_options = c("library"))
generate_install_file("install_packages.R", package_df)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_os'>Returns the name of the Operating System</h2><span id='topic+get_os'></span>

<h3>Description</h3>

<p>A simple wrapper around <code>rappdirs:::get_os</code>,
allowing it to be exported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_os()
</code></pre>


<h3>Value</h3>

<p>One of <code>"win"</code>, <code>"mac"</code>, <code>"unix"</code>,
<code>"Unknown OS"</code>.
</p>

<hr>
<h2 id='get_packages'>Get information about the package used in the project</h2><span id='topic+get_packages'></span>

<h3>Description</h3>

<p>The function returns a data frame containing information about
packages that are loaded with <code>library()</code>, <code>require()</code>, used
with <code>::</code> operator, listed in the DESCRIPTION file,
and/or already loaded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_packages(
  project_path = ".",
  include_pattern = "\\.R(md)?$",
  exclude_pattern = "tests/",
  package_options = c("referenced", "library", "description")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_packages_+3A_project_path">project_path</code></td>
<td>
<p>A string representing the path of the project root 
in which the function will look recursively in order to find files that
fit <code>include_pattern</code></p>
</td></tr>
<tr><td><code id="get_packages_+3A_include_pattern">include_pattern</code></td>
<td>
<p>A string representing a regex that matches 
project files in which to look for packages. By default, 
<code>get_packages</code> looks for all .R and .Rmd files in the current project.</p>
</td></tr>
<tr><td><code id="get_packages_+3A_exclude_pattern">exclude_pattern</code></td>
<td>
<p>A string representing a regex that matches 
project files to exclude. By default, 
<code>get_packages</code> excludes all files found in &quot;tests&quot; folder.</p>
</td></tr>
<tr><td><code id="get_packages_+3A_package_options">package_options</code></td>
<td>
<p>A character vector that represents the method through
which packages are loaded or referenced. The options are: 
<code>referenced</code> for packages referenced by the <code>::</code> operator, 
<code>library</code> for packages loaded using <code>library()</code> or <code>require()</code>,
<code>description</code> for packages mentioned in <code>DESCRIPTION</code> file, and
<code>loaded</code> for packages already loaded in the current session.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing package information:
</p>
<table role = "presentation">
<tr><td><code>package_name</code></td>
<td>
<p>The name of the package</p>
</td></tr>
<tr><td><code>requested_by</code></td>
<td>
<p>The context in which the package was used</p>
</td></tr>
<tr><td><code>is_base</code></td>
<td>
<p>Whether package is part of the core R packages</p>
</td></tr>
<tr><td><code>source</code></td>
<td>
<p>The source from which the package was installed</p>
</td></tr>
<tr><td><code>version</code></td>
<td>
<p>The version of the package, if installed locally</p>
</td></tr>
<tr><td><code>is_installed</code></td>
<td>
<p>Whether the package is installed locally</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+generate_install_file">generate_install_file</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
package_df &lt;- get_packages(
    project_path = '.',
    include_pattern = '\\.R$', 
    exclude_pattern = '', 
    package_options = c('referenced'))

## End(Not run)

</code></pre>

<hr>
<h2 id='is.POSIXct'>Is it a POSIXct object?</h2><span id='topic+is.POSIXct'></span>

<h3>Description</h3>

<p>Is it a POSIXct object?
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.POSIXct(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is.POSIXct_+3A_x">x</code></td>
<td>
<p>An R object.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="lubridate.html#topic+is.POSIXt">lubridate::is.POSIXct</a></code>
</p>

<hr>
<h2 id='keep_at'>Keep or discard elements</h2><span id='topic+keep_at'></span><span id='topic+discard_at'></span>

<h3>Description</h3>

<p><code>keep_at()</code> keeps only the elements from specific positions
while <code>discard_at()</code> does the opposite.
The functions are wrappers around <code>purrr::keep</code> and
<code>purrr::discard</code>, respectively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keep_at(.x, .at)

discard_at(.x, .at)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="keep_at_+3A_.x">.x</code></td>
<td>
<p>A list or a vector.</p>
</td></tr>
<tr><td><code id="keep_at_+3A_.at">.at</code></td>
<td>
<p>A character vector (names), a numeric vector (positions),
a symbol or or a list generated by 
<code><a href="tidyselect.html#topic+select_helpers">tidyselect</a></code> 
select helpers.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list or a vector.
</p>


<h3>See Also</h3>

<p><code><a href="purrr.html#topic+keep">purrr::keep</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c("First" = 1, "Second" = 2, "Last" = 3)
keep_at(x, "Second")
keep_at(x, Second)
keep_at(x, 2)
keep_at(x, starts_with("Sec"))
#&gt; Second 
#&gt;      2

keep_at(x, ends_with("t"))
#&gt; First  Last 
#&gt;     1     3

x &lt;- c(1, 2, 3)
discard_at(x, 1)
#&gt; Second   Last 
#&gt;      2      3

</code></pre>

<hr>
<h2 id='keep_if_in'>Keep elements present in x and not contained in y</h2><span id='topic+keep_if_in'></span><span id='topic++25if_in+25'></span>

<h3>Description</h3>

<p>Unlike <code><a href="base.html#topic+sets">intersect</a></code>, it does not remove duplicates in
x and keeps its order.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keep_if_in(x, y)

x %if_in% y
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="keep_if_in_+3A_x">x</code></td>
<td>
<p>Source vector.</p>
</td></tr>
<tr><td><code id="keep_if_in_+3A_y">y</code></td>
<td>
<p>Destination vector (of the same mode as x).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A filtered version of x.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+keep_if_not_in">keep_if_not_in</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keep_if_in(1:5, 3:6)
# returns [3, 4, 5]

keep_if_in(c(4, 3, 4, 3, 1), 3:6)
# returns [4 3 4 3]

</code></pre>

<hr>
<h2 id='keep_if_not_in'>Discard elements present in x and not contained in y</h2><span id='topic+keep_if_not_in'></span><span id='topic++25if_not_in+25'></span>

<h3>Description</h3>

<p>Unlike <code><a href="base.html#topic+sets">setdiff</a></code>, it does not remove duplicates in x
and keeps its order.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>keep_if_not_in(x, y)

x %if_not_in% y
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="keep_if_not_in_+3A_x">x</code></td>
<td>
<p>Source vector.</p>
</td></tr>
<tr><td><code id="keep_if_not_in_+3A_y">y</code></td>
<td>
<p>Destination vector (of the same mode as x).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A filtered version of x.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+keep_if_in">keep_if_in</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>keep_if_not_in(1:5, 3:6)
# returns [1 2]

keep_if_not_in(c(4, 3, 4, 3, 1), 3:6)
# returns [1]

</code></pre>

<hr>
<h2 id='now_utc'>Current time in UTC time zone</h2><span id='topic+now_utc'></span>

<h3>Description</h3>

<p>Returns a vector with the current date and time in the UTC time zone.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>now_utc(length = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="now_utc_+3A_length">length</code></td>
<td>
<p>Positive integer (scalar) indicating the 
length of the returned vector. If length is a vector of multiple elements, 
only the first element is taken into account.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A POSIXct vector of size <code>length</code> with the <code>tzone</code>
attribute set to &quot;UTC&quot;.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+Sys.time">Sys.time</a></code>, <code><a href="lubridate.html#topic+now">lubridate::now</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>now_utc(0)
# returns "POSIXct of length 0"

</code></pre>

<hr>
<h2 id='pull_with_names'>Pull out a single column</h2><span id='topic+pull_with_names'></span>

<h3>Description</h3>

<p>Pull out a single column by using its name or its position
and name the obtained vector using values from another column.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pull_with_names(.data, var = -1, name_col)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pull_with_names_+3A_.data">.data</code></td>
<td>
<p>A data frame</p>
</td></tr>
<tr><td><code id="pull_with_names_+3A_var">var</code></td>
<td>
<p>The name of the column of interest,
or a positive integer, giving the position counting from the left,
or a negative integer, giving the position counting from the right.
This argument supports tidyeval.</p>
</td></tr>
<tr><td><code id="pull_with_names_+3A_name_col">name_col</code></td>
<td>
<p>The column whose values will be used to
name the pulled column. This argument supports tidyeval.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>head(pull_with_names(iris, 4, "Species"))

</code></pre>

<hr>
<h2 id='seq_nrow'>Creates a sequence based on the number of rows or columns</h2><span id='topic+seq_nrow'></span><span id='topic+seq_ncol'></span>

<h3>Description</h3>

<p>Creates a sequence from 1 to the number of row or columns, respectively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>seq_nrow(x)

seq_ncol(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="seq_nrow_+3A_x">x</code></td>
<td>
<p>a data frame or a matrix</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of integers
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+seq">seq</a></code>
</p>

<hr>
<h2 id='setequal_na'>Check if two vectors have the same elements</h2><span id='topic+setequal_na'></span>

<h3>Description</h3>

<p>Wrapper around <code><a href="base.html#topic+sets">setequal</a></code> that adds extra parameter
<code>na.rm</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setequal_na(x, y, na.rm = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="setequal_na_+3A_x">x</code>, <code id="setequal_na_+3A_y">y</code></td>
<td>
<p>Vectors (of the same mode) containing a sequence of items.</p>
</td></tr>
<tr><td><code id="setequal_na_+3A_na.rm">na.rm</code></td>
<td>
<p>Boolean value indicating whether
<code>NA</code> should be omitted or not.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical scalar that states the result.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>setequal_na(c(2, 1, 3), c(1, 2, 3))
# returns TRUE

setequal_na(c(1, NA, 3), c(3, NA, 1), na.rm = TRUE)
# returns TRUE

setequal_na(c(NA, NA), c(NA), na.rm = TRUE)
# returns TRUE

setequal_na(c(NA, NA), c(NA))
# returns TRUE

setequal_na(c(1, 2, 3), c(1, 2, 3, NA))
# returns FALSE

</code></pre>

<hr>
<h2 id='str1'>High level overview of the structure of an R object</h2><span id='topic+str1'></span><span id='topic+str2'></span>

<h3>Description</h3>

<p><code>str1()</code> is a wrapper around <code><a href="utils.html#topic+str">str</a></code> which sets maximal level
of nesting to 1, while <code>str2()</code> sets maximal level of nesting to 2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>str1(x)

str2(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="str1_+3A_x">x</code></td>
<td>
<p>An R object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Does not return anything.
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+str">str</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
