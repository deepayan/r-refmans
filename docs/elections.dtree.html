<!DOCTYPE html><html><head><title>Help for package elections.dtree</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {elections.dtree}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#'[.ranked_ballots''><p>Access Subsets of Ballots.</p></a></li>
<li><a href='#dirichlet_tree'><p>Create a Dirichlet-tree for modelling ranked ballots</p></a></li>
<li><a href='#dirtree'><p>Create a Dirichlet-tree object</p></a></li>
<li><a href='#ranked_ballots'><p>Construct a set of ranked ballots.</p></a></li>
<li><a href='#read_ballots'><p>Read <code>ranked_ballots</code> from a file.</p></a></li>
<li><a href='#reset'><p>Clear the internal state of a <code>dirichlet_tree</code> object.</p></a></li>
<li><a href='#sample_posterior'><p>Draw election outcomes from the posterior distribution.</p></a></li>
<li><a href='#sample_predictive'><p>Draw ballots from the posterior predictive distribution.</p></a></li>
<li><a href='#social_choice'><p>Election Social Choice Functions</p></a></li>
<li><a href='#update'><p>Update a <code>dirichlet_tree</code> model by observing some ranked ballots.</p></a></li>
<li><a href='#write_ballots'><p>Write <code>ranked_ballots</code> to a file.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Ranked Voting Election Audits with Dirichlet-Trees</td>
</tr>
<tr>
<td>Description:</td>
<td>Perform ballot-polling Bayesian audits for ranked voting elections
    using Dirichlet-tree prior distributions. Everest et al. (2022)
    &lt;<a href="https://arxiv.org/abs/2206.14605">arXiv:2206.14605</a>&gt;, &lt;<a href="https://arxiv.org/abs/2209.03881">arXiv:2209.03881</a>&gt;.</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.0</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>C++17</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppThread, testthat</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp, methods, Rdpack, R6, parallel, prefio (&ge; 0.1.1)</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>Rdpack</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, testthat (&ge; 3.0.0), xml2</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://fleverest.github.io/elections.dtree/">https://fleverest.github.io/elections.dtree/</a>,
<a href="https://github.com/fleverest/elections.dtree/">https://github.com/fleverest/elections.dtree/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/fleverest/elections.dtree/issues/">https://github.com/fleverest/elections.dtree/issues/</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-16 11:13:15 UTC; dev</td>
</tr>
<tr>
<td>Author:</td>
<td>Floyd Everest <a href="https://orcid.org/0000-0002-2726-6736"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Damjan Vukcevic <a href="https://orcid.org/0000-0001-7780-9586"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Floyd Everest &lt;me@floydeverest.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-16 11:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+27+5B.ranked_ballots+27'>Access Subsets of Ballots.</h2><span id='topic++60+5B.ranked_ballots+60'></span><span id='topic++5B.ranked_ballots'></span>

<h3>Description</h3>

<p>Extract subsets of ballots by index.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ranked_ballots'
x[i = NULL]
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B27+2B5B.ranked_ballots+2B27_+3A_x">x</code></td>
<td>
<p>Some <code>ranked_ballots</code>.</p>
</td></tr>
<tr><td><code id="+2B27+2B5B.ranked_ballots+2B27_+3A_i">i</code></td>
<td>
<p>The index, or vector of indices corresponding to each ballot to be extracted.</p>
</td></tr>
</table>

<hr>
<h2 id='dirichlet_tree'>Create a Dirichlet-tree for modelling ranked ballots</h2><span id='topic+dirichlet_tree'></span>

<h3>Description</h3>

<p>A <code>dirichlet_tree</code> object represents a Dirichlet-tree distribution
on ballots. By specifying the tree structure for the ranked ballots,
the Dirichlet-tree is initialized with the same prior structure described by
Everest et al. (2022). There are
methods provided for observing data (to obtain a posterior distribution)
along with methods to sample election outcomes and sets of ballots from
the posterior predictive distribution.
</p>


<h3>Format</h3>

<p>An <code><a href="R6.html#topic+R6Class">R6Class</a></code> generator object.
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>a0</code></dt><dd><p>Gets or sets the <code>a0</code> parameter for the Dirichlet-tree.</p>
</dd>
<dt><code>min_depth</code></dt><dd><p>Gets or sets the <code>min_depth</code> parameter for the Dirichlet-tree.</p>
</dd>
<dt><code>max_depth</code></dt><dd><p>Gets or sets the <code>max_depth</code> parameter for the
Dirichlet-tree.</p>
</dd>
<dt><code>vd</code></dt><dd><p>Gets or sets the <code>vd</code> parameter for the Dirichlet-tree.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-dirichlet_tree-new"><code>dirichlet_tree$new()</code></a>
</p>
</li>
<li> <p><a href="#method-dirichlet_tree-print"><code>dirichlet_tree$print()</code></a>
</p>
</li>
<li> <p><a href="#method-dirichlet_tree-update"><code>dirichlet_tree$update()</code></a>
</p>
</li>
<li> <p><a href="#method-dirichlet_tree-reset"><code>dirichlet_tree$reset()</code></a>
</p>
</li>
<li> <p><a href="#method-dirichlet_tree-sample_posterior"><code>dirichlet_tree$sample_posterior()</code></a>
</p>
</li>
<li> <p><a href="#method-dirichlet_tree-sample_predictive"><code>dirichlet_tree$sample_predictive()</code></a>
</p>
</li></ul>


<hr>
<a id="method-dirichlet_tree-new"></a>



<h4>Method <code>new()</code></h4>

<p>Create a new <code>dirichlet_tree</code> prior distribution with the specified
tree structure. See Everest et al. (2022)
for further details.
</p>


<h5>Usage</h5>

<div class="r"><pre>dirichlet_tree$new(
  candidates,
  min_depth = 0,
  max_depth = length(candidates) - 1,
  a0 = 1,
  vd = FALSE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>candidates</code></dt><dd><p>A character vector, with each element (must be unique) representing a
single candidate.</p>
</dd>
<dt><code>min_depth</code></dt><dd><p>The minimum number of candidates which must be specified for a valid
ballot in the election.</p>
</dd>
<dt><code>max_depth</code></dt><dd><p>The maximum number of candidates which can be specified for a valid
ballot in the election.</p>
</dd>
<dt><code>a0</code></dt><dd><p>The prior parameter for the distribution.</p>
</dd>
<dt><code>vd</code></dt><dd><p>A flag which, when <code>TRUE</code>, employs a parameter structure which
reduces to a regular Dirichlet distribution as described by
Everest et al. (2022).</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A new <code>dirichlet_tree</code> prior.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>dtree &lt;- dirichlet_tree$new(candidates = LETTERS, a0 = 1., min_depth = 1)

</pre>
</div>


<hr>
<a id="method-dirichlet_tree-print"></a>



<h4>Method <code>print()</code></h4>

<p><code>print</code> shows some details of the distribution and its parameters.
</p>


<h5>Usage</h5>

<div class="r"><pre>dirichlet_tree$print()</pre></div>



<h5>Returns</h5>

<p>The <code>dirichlet_tree</code> object.
</p>


<hr>
<a id="method-dirichlet_tree-update"></a>



<h4>Method <code>update()</code></h4>

<p>Updates the <code>dirichlet_tree</code> object with observations of ballots.
This updates the parameter structure of the tree to yield the posterior
Dirichlet-tree, as described in
Everest et al. (2022).
</p>


<h5>Usage</h5>

<div class="r"><pre>dirichlet_tree$update(ballots)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>ballots</code></dt><dd><p>A set of ballots of class 'prefio::preferences' or
'prefio::aggregated_preferences' to observe. The ballots should not contain
any ties, but they may be incomplete.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The <code>dirichlet_tree</code> object.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>ballots &lt;- prefio::preferences(
  t(c(1, 2, 3)),
  format = "ranking",
  item_names = LETTERS[1:3]
)
dirichlet_tree$new(
  candidates = LETTERS[1:3]
)$update(ballots)

</pre>
</div>


<hr>
<a id="method-dirichlet_tree-reset"></a>



<h4>Method <code>reset()</code></h4>

<p>Resets the <code>dirichlet_tree</code> observations to revert the
parameter structure back to the originally specified prior.
</p>


<h5>Usage</h5>

<div class="r"><pre>dirichlet_tree$reset()</pre></div>



<h5>Returns</h5>

<p>The <code>dirichlet_tree</code> object.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>ballots &lt;- prefio::preferences(
  t(c(1, 2, 3)),
  format = "ranking",
  item_names = LETTERS[1:3]
)
dtree &lt;- dirichlet_tree$new(
  candidates = LETTERS
)$update(ballots)
print(dtree)
dtree$reset()
print(dtree)

</pre>
</div>


<hr>
<a id="method-dirichlet_tree-sample_posterior"></a>



<h4>Method <code>sample_posterior()</code></h4>

<p>Draws sets of ballots from independent realizations of the Dirichlet-tree
posterior, then determines the probability for each candidate being
elected by aggregating the results of the social choice function. See
Everest et al. (2022) for details.
</p>


<h5>Usage</h5>

<div class="r"><pre>dirichlet_tree$sample_posterior(
  n_elections,
  n_ballots,
  n_winners = 1,
  replace = FALSE,
  n_threads = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>n_elections</code></dt><dd><p>An integer representing the number of elections to generate. A higher
number yields higher precision in the output probabilities.</p>
</dd>
<dt><code>n_ballots</code></dt><dd><p>An integer representing the total number of ballots cast in the election.</p>
</dd>
<dt><code>n_winners</code></dt><dd><p>The number of candidates elected in each election.</p>
</dd>
<dt><code>replace</code></dt><dd><p>A boolean indicating whether or not we should replace our sample in the
monte-carlo step, drawing the full set of election ballots from the posterior</p>
</dd>
<dt><code>n_threads</code></dt><dd><p>The maximum number of threads for the process. The default value of
<code>NULL</code> will default to 2 threads. <code>Inf</code> will default to the maximum
available, and any value greater than or equal to the maximum available will
result in the maximum available.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A numeric vector containing the probabilities for each candidate
being elected.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>ballots &lt;- prefio::preferences(
  t(c(1, 2, 3)),
  format = "ranking",
  item_names = LETTERS[1:3]
)
dirichlet_tree$new(
  candidates = LETTERS,
  a0 = 1.,
  min_depth = 3,
  max_depth = 6,
  vd = FALSE
)$update(
  ballots
)$sample_posterior(
  n_elections = 10,
  n_ballots = 10
)

</pre>
</div>


<hr>
<a id="method-dirichlet_tree-sample_predictive"></a>



<h4>Method <code>sample_predictive()</code></h4>

<p><code>sample_predictive</code> draws ballots from a multinomial distribution
with ballot probabilities obtained from a single realization of the
Dirichlet-tree posterior on the ranked ballots. See
Everest et al. (2022) for details.
</p>


<h5>Usage</h5>

<div class="r"><pre>dirichlet_tree$sample_predictive(n_ballots)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>n_ballots</code></dt><dd><p>An integer representing the total number of ballots cast in the election.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A <code>prefio::preferences</code> object containing <code>n_ballots</code>
ballots drawn from a single realisation of the posterior Dirichlet-tree.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>ballots &lt;- prefio::preferences(
  t(c(1, 2, 3)),
  format = "ranking",
  item_names = LETTERS[1:3]
)
dirichlet_tree$new(
  candidates = LETTERS,
  a0 = 1.,
  min_depth = 3,
  max_depth = 6,
  vd = FALSE
)$update(
  ballots
)$sample_predictive(
  n_ballots = 10
)

</pre>
</div>




<h3>References</h3>

<p>Everest F, Blom M, Stark PB, Stuckey PJ, Teague V, Vukcevic D (2023).
&ldquo;Ballot-Polling Audits of Instant-Runoff Voting Elections with a Dirichlet-Tree Model.&rdquo;
In <em>Computer Security. ESORICS 2022 International Workshops</em>, 525&ndash;540.
ISBN 978-3-031-25460-4..
</p>
<p>Everest F, Blom M, Stark PB, Stuckey PJ, Teague V, Vukcevic D (2022).
&ldquo;Auditing Ranked Voting Elections with Dirichlet-Tree Models: First Steps.&rdquo;
<a href="https://doi.org/10.15157/diss/021">doi:10.15157/diss/021</a>..
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `dirichlet_tree$new`
## ------------------------------------------------

dtree &lt;- dirichlet_tree$new(candidates = LETTERS, a0 = 1., min_depth = 1)


## ------------------------------------------------
## Method `dirichlet_tree$update`
## ------------------------------------------------

ballots &lt;- prefio::preferences(
  t(c(1, 2, 3)),
  format = "ranking",
  item_names = LETTERS[1:3]
)
dirichlet_tree$new(
  candidates = LETTERS[1:3]
)$update(ballots)


## ------------------------------------------------
## Method `dirichlet_tree$reset`
## ------------------------------------------------

ballots &lt;- prefio::preferences(
  t(c(1, 2, 3)),
  format = "ranking",
  item_names = LETTERS[1:3]
)
dtree &lt;- dirichlet_tree$new(
  candidates = LETTERS
)$update(ballots)
print(dtree)
dtree$reset()
print(dtree)


## ------------------------------------------------
## Method `dirichlet_tree$sample_posterior`
## ------------------------------------------------

ballots &lt;- prefio::preferences(
  t(c(1, 2, 3)),
  format = "ranking",
  item_names = LETTERS[1:3]
)
dirichlet_tree$new(
  candidates = LETTERS,
  a0 = 1.,
  min_depth = 3,
  max_depth = 6,
  vd = FALSE
)$update(
  ballots
)$sample_posterior(
  n_elections = 10,
  n_ballots = 10
)


## ------------------------------------------------
## Method `dirichlet_tree$sample_predictive`
## ------------------------------------------------

ballots &lt;- prefio::preferences(
  t(c(1, 2, 3)),
  format = "ranking",
  item_names = LETTERS[1:3]
)
dirichlet_tree$new(
  candidates = LETTERS,
  a0 = 1.,
  min_depth = 3,
  max_depth = 6,
  vd = FALSE
)$update(
  ballots
)$sample_predictive(
  n_ballots = 10
)

</code></pre>

<hr>
<h2 id='dirtree'>Create a Dirichlet-tree object</h2><span id='topic+dirtree'></span><span id='topic+dtree'></span>

<h3>Description</h3>

<p><code>dirtree</code> is used to create a Dirichlet-tree for modelling ballots,
as described by Everest et al. (2022).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dirtree(
  candidates,
  min_depth = 0,
  max_depth = length(candidates),
  a0 = 1,
  vd = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dirtree_+3A_candidates">candidates</code></td>
<td>
<p>A character vector, with each element (must be unique) representing a single
candidate.</p>
</td></tr>
<tr><td><code id="dirtree_+3A_min_depth">min_depth</code></td>
<td>
<p>The minimum number of candidates which must be specified for a valid ballot.</p>
</td></tr>
<tr><td><code id="dirtree_+3A_max_depth">max_depth</code></td>
<td>
<p>The maximum number of candidates which can be specified for a valid ballot.</p>
</td></tr>
<tr><td><code id="dirtree_+3A_a0">a0</code></td>
<td>
<p>The prior parameter for the distribution.</p>
</td></tr>
<tr><td><code id="dirtree_+3A_vd">vd</code></td>
<td>
<p>A flag which, when <code>TRUE</code>, employs a parameter structure which reduces
to a regular Dirichlet distribution as described by
Everest et al. (2022).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Dirichlet-tree representing ranked ballots, as an object of class
<code>dirichlet_tree</code>.
</p>


<h3>References</h3>

<p>Everest F, Blom M, Stark PB, Stuckey PJ, Teague V, Vukcevic D (2023).
&ldquo;Ballot-Polling Audits of Instant-Runoff Voting Elections with a Dirichlet-Tree Model.&rdquo;
In <em>Computer Security. ESORICS 2022 International Workshops</em>, 525&ndash;540.
ISBN 978-3-031-25460-4..
</p>
<p>Everest F, Blom M, Stark PB, Stuckey PJ, Teague V, Vukcevic D (2022).
&ldquo;Auditing Ranked Voting Elections with Dirichlet-Tree Models: First Steps.&rdquo;
<a href="https://doi.org/10.15157/diss/021">doi:10.15157/diss/021</a>..
</p>

<hr>
<h2 id='ranked_ballots'>Construct a set of ranked ballots.</h2><span id='topic+ranked_ballots'></span>

<h3>Description</h3>

<p>Deprecated in favour of functionality from the 'prefio' package.
<code>ranked_ballots</code> is used to easily construct a set of ranked ballots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ranked_ballots(x, candidates = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ranked_ballots_+3A_x">x</code></td>
<td>
<p>A character vector representing a single ballot, or a list of
character vectors representing multiple ballots.</p>
</td></tr>
<tr><td><code id="ranked_ballots_+3A_candidates">candidates</code></td>
<td>
<p>A character vector of names corresponding to the candidates running in
the election.</p>
</td></tr>
<tr><td><code id="ranked_ballots_+3A_...">...</code></td>
<td>
<p>Additional parameters to pass to <code>ranked_ballots</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ranked_ballots</code> object representing the ballot(s).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ranked_ballots(LETTERS[1:5])
ranked_ballots(list(LETTERS[1:5], LETTERS[6:1]))

</code></pre>

<hr>
<h2 id='read_ballots'>Read <code>ranked_ballots</code> from a file.</h2><span id='topic+read_ballots'></span>

<h3>Description</h3>

<p>Deprecated in favour of 'prefio' plus PrefLib formats.
Reads a set of partial IRV ballots from a file. The file is expected to
follow the ballot:count standard, with a header describing all participating
candidates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_ballots(file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_ballots_+3A_file">file</code></td>
<td>
<p>The name of the file to read from, or a character vector of file lines.</p>
</td></tr>
</table>

<hr>
<h2 id='reset'>Clear the internal state of a <code>dirichlet_tree</code> object.</h2><span id='topic+reset'></span>

<h3>Description</h3>

<p>Destroy the Tree's internal state and revert back to the prior.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reset(dtree)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reset_+3A_dtree">dtree</code></td>
<td>
<p>A <code>dirichlet_tree</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The <code>dirichlet_tree</code> object.
</p>

<hr>
<h2 id='sample_posterior'>Draw election outcomes from the posterior distribution.</h2><span id='topic+sample_posterior'></span>

<h3>Description</h3>

<p><code>sample_posterior</code> draws sets of ballots from independent realizations
of the Dirichlet-tree posterior, then determines the probability for each
candidate being elected by aggregating the results of the social choice
function. See Everest et al. (2022) for
details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample_posterior(
  dtree,
  n_elections,
  n_ballots,
  n_winners = 1,
  replace = FALSE,
  n_threads = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sample_posterior_+3A_dtree">dtree</code></td>
<td>
<p>A <code>dirichlet_tree</code> object.</p>
</td></tr>
<tr><td><code id="sample_posterior_+3A_n_elections">n_elections</code></td>
<td>
<p>An integer representing the number of elections to generate. A higher
number yields higher precision in the output probabilities.</p>
</td></tr>
<tr><td><code id="sample_posterior_+3A_n_ballots">n_ballots</code></td>
<td>
<p>An integer representing the total number of ballots cast in the election.</p>
</td></tr>
<tr><td><code id="sample_posterior_+3A_n_winners">n_winners</code></td>
<td>
<p>The number of candidates elected in each election.</p>
</td></tr>
<tr><td><code id="sample_posterior_+3A_replace">replace</code></td>
<td>
<p>A boolean indicating whether or not we should re-use the observed ballots
in the monte-carlo integration step to determine the posterior probabilities.</p>
</td></tr>
<tr><td><code id="sample_posterior_+3A_n_threads">n_threads</code></td>
<td>
<p>The maximum number of threads for the process. The default value of
<code>NULL</code> will default to 2 threads. <code>Inf</code> will default to the maximum
available, and any value greater than or equal to the maximum available will
result in the maximum available.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector containing the probabilities for each candidate
being elected.
</p>


<h3>References</h3>

<p>Everest F, Blom M, Stark PB, Stuckey PJ, Teague V, Vukcevic D (2023).
&ldquo;Ballot-Polling Audits of Instant-Runoff Voting Elections with a Dirichlet-Tree Model.&rdquo;
In <em>Computer Security. ESORICS 2022 International Workshops</em>, 525&ndash;540.
ISBN 978-3-031-25460-4..
</p>
<p>Everest F, Blom M, Stark PB, Stuckey PJ, Teague V, Vukcevic D (2022).
&ldquo;Auditing Ranked Voting Elections with Dirichlet-Tree Models: First Steps.&rdquo;
<a href="https://doi.org/10.15157/diss/021">doi:10.15157/diss/021</a>..
</p>

<hr>
<h2 id='sample_predictive'>Draw ballots from the posterior predictive distribution.</h2><span id='topic+sample_predictive'></span>

<h3>Description</h3>

<p><code>sample_predictive</code> draws ballots from a multinomial distribution with
probabilities obtained from a single realization of the Dirichlet-tree
posterior on the ranked ballots. See
Everest et al. (2022) for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample_predictive(dtree, n_ballots)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sample_predictive_+3A_dtree">dtree</code></td>
<td>
<p>A <code>dirichlet_tree</code> object.</p>
</td></tr>
<tr><td><code id="sample_predictive_+3A_n_ballots">n_ballots</code></td>
<td>
<p>An integer representing the number of ballots to draw.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>prefio::preferences</code> object containing <code>n_ballots</code>
ballots drawn from a single realisation of the posterior Dirichlet-tree.
</p>


<h3>References</h3>

<p>Everest F, Blom M, Stark PB, Stuckey PJ, Teague V, Vukcevic D (2023).
&ldquo;Ballot-Polling Audits of Instant-Runoff Voting Elections with a Dirichlet-Tree Model.&rdquo;
In <em>Computer Security. ESORICS 2022 International Workshops</em>, 525&ndash;540.
ISBN 978-3-031-25460-4..
</p>
<p>Everest F, Blom M, Stark PB, Stuckey PJ, Teague V, Vukcevic D (2022).
&ldquo;Auditing Ranked Voting Elections with Dirichlet-Tree Models: First Steps.&rdquo;
<a href="https://doi.org/10.15157/diss/021">doi:10.15157/diss/021</a>..
</p>

<hr>
<h2 id='social_choice'>Election Social Choice Functions</h2><span id='topic+social_choice'></span>

<h3>Description</h3>

<p>Compute election outcomes on ranked ballots with a variety of social choice
functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>social_choice(
  ballots,
  sc_function = c("plurality", "irv", "stv"),
  n_winners = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="social_choice_+3A_ballots">ballots</code></td>
<td>
<p>A 'prefio::preferences' object containing the ballots cast in the election.</p>
</td></tr>
<tr><td><code id="social_choice_+3A_sc_function">sc_function</code></td>
<td>
<p>One of &quot;plurality&quot;, &quot;irv&quot; or &quot;stv&quot;, corresponding to the social choice
function you wish to evaluate.</p>
</td></tr>
<tr><td><code id="social_choice_+3A_n_winners">n_winners</code></td>
<td>
<p>Refers to the number of seats available when 'sc_function' is &quot;stv&quot;.</p>
</td></tr>
<tr><td><code id="social_choice_+3A_...">...</code></td>
<td>
<p>Unused.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The output depends on the chosen 'sc_function':
</p>

<dl>
<dt>&quot;plurality&quot;</dt><dd><p>A character vector with the candidate(s) who received
the most votes.</p>
</dd>
<dt>&quot;irv&quot;</dt><dd><p>A named 'list' with two objects. First, &quot;elimination_order&quot;
is a vector with each eliminated candidate in the order of
elimination. Second, &quot;winners&quot; is the vector containing the
winning candidate(s).</p>
</dd>
<dt>&quot;stv&quot;</dt><dd><p>Not yet implemented.</p>
</dd>
</dl>


<hr>
<h2 id='update'>Update a <code>dirichlet_tree</code> model by observing some ranked ballots.</h2><span id='topic+update'></span><span id='topic+update.dirichlet_tree'></span>

<h3>Description</h3>

<p><code>update</code> updates a Dirichlet-tree model with observations to obtain
a posterior distribution on the ranked ballots. See
Everest et al. (2022) for implementation
details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'dirichlet_tree'
update(object, ballots, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_+3A_object">object</code></td>
<td>
<p>A <code>dirichlet_tree</code> object.</p>
</td></tr>
<tr><td><code id="update_+3A_ballots">ballots</code></td>
<td>
<p>A set of ballots - must be of type <code>prefio::preferences</code>.</p>
</td></tr>
<tr><td><code id="update_+3A_...">...</code></td>
<td>
<p>Unused.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The <code>dirichlet_tree</code> object.
</p>


<h3>References</h3>

<p>Everest F, Blom M, Stark PB, Stuckey PJ, Teague V, Vukcevic D (2023).
&ldquo;Ballot-Polling Audits of Instant-Runoff Voting Elections with a Dirichlet-Tree Model.&rdquo;
In <em>Computer Security. ESORICS 2022 International Workshops</em>, 525&ndash;540.
ISBN 978-3-031-25460-4..
</p>
<p>Everest F, Blom M, Stark PB, Stuckey PJ, Teague V, Vukcevic D (2022).
&ldquo;Auditing Ranked Voting Elections with Dirichlet-Tree Models: First Steps.&rdquo;
<a href="https://doi.org/10.15157/diss/021">doi:10.15157/diss/021</a>..
</p>

<hr>
<h2 id='write_ballots'>Write <code>ranked_ballots</code> to a file.</h2><span id='topic+write_ballots'></span>

<h3>Description</h3>

<p>Deprecated in favour of fucntionality from the 'prefio' package.
Writes a set of ballots to a new file. This follows the
ballot:count standard, with a header describing the candidates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_ballots(ballots, filename = "", return_lines = FALSE, suppress = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_ballots_+3A_ballots">ballots</code></td>
<td>
<p>The <code>ranked_ballots</code> to write to a file.</p>
</td></tr>
<tr><td><code id="write_ballots_+3A_filename">filename</code></td>
<td>
<p>The name of the file to write to, or <code>""</code> to write output to stdout.</p>
</td></tr>
<tr><td><code id="write_ballots_+3A_return_lines">return_lines</code></td>
<td>
<p>A flag which determines whether or not the output should be returned as a
character vector</p>
</td></tr>
<tr><td><code id="write_ballots_+3A_suppress">suppress</code></td>
<td>
<p>A flag which, when True, suppresses any output to stdout.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>write_ballots(ranked_ballots(c(LETTERS)), tempfile("test.txt"))
write_ballots(ranked_ballots(c(LETTERS)))

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
