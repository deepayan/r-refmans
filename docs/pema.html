<!DOCTYPE html><html lang="en"><head><title>Help for package pema</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {pema}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#pema-package'><p>pema: Conduct penalized meta-regression.</p></a></li>
<li><a href='#as.stan'><p>Convert an object to stanfit</p></a></li>
<li><a href='#bonapersona'><p>Data from 'The behavioral phenotype of early life adversity'</p></a></li>
<li><a href='#brma'><p>Conduct Bayesian Regularized Meta-Analysis</p></a></li>
<li><a href='#curry'><p>Data from 'Happy to Help?'</p></a></li>
<li><a href='#I2'><p>Compute I2</p></a></li>
<li><a href='#maxap'><p>Maximum a posteriori parameter estimate</p></a></li>
<li><a href='#plot_sensitivity'><p>Plot posterior distributions for BRMA models</p></a></li>
<li><a href='#sample_prior'><p>Sample from the Prior Distribution</p></a></li>
<li><a href='#shiny_prior'><p>Interactively Sample from the Prior Distribution</p></a></li>
<li><a href='#simulate_smd'><p>Simulates a meta-analytic dataset</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Penalized Meta-Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Conduct penalized meta-analysis, see Van Lissa, Van Erp, &amp; Clapper
    (2023) &lt;<a href="https://doi.org/10.31234%2Fosf.io%2F6phs5">doi:10.31234/osf.io/6phs5</a>&gt;. In meta-analysis, there are
    often between-study differences. These can be coded as moderator variables,
    and controlled for using meta-regression. However, if the number of
    moderators is large relative to the number of studies, such an analysis may
    be overfit. Penalized meta-regression is useful in these cases, because
    it shrinks the regression slopes of irrelevant moderators towards zero.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/cjvanlissa/pema">https://github.com/cjvanlissa/pema</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Biarch:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, rstan (&ge; 2.18.1), Rcpp (&ge; 0.12.0), RcppParallel (&ge;
5.0.1), rstantools (&ge; 2.1.1), sn, shiny, ggplot2</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>BH (&ge; 1.66.0), Rcpp (&ge; 0.12.0), RcppEigen (&ge; 0.3.3.3.0),
RcppParallel (&ge; 5.0.1), rstan (&ge; 2.18.1), StanHeaders (&ge;
2.18.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, knitr, mice, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>GNU make</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-03-16 09:59:21 UTC; vanlissa</td>
</tr>
<tr>
<td>Author:</td>
<td>Caspar J van Lissa
    <a href="https://orcid.org/0000-0002-0808-5024"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Sara J van Erp [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Caspar J van Lissa &lt;c.j.vanlissa@tilburguniversity.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-03-16 11:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='pema-package'>pema: Conduct penalized meta-regression.</h2><span id='topic+pema-package'></span><span id='topic+pema'></span>

<h3>Description</h3>

<p>Penalized meta-regression shrinks the regression slopes of
irrelevant moderators towards zero (Van Lissa &amp; Van Erp, 2021).
</p>


<h3>References</h3>

<p>Van Lissa, C. J., van Erp, S., &amp; Clapper, E. B. (2023).
Selecting relevant moderators with Bayesian regularized
meta-regression. Research Synthesis Methods.
<a href="https://doi.org/10.31234/osf.io/6phs5">doi:10.31234/osf.io/6phs5</a>
</p>
<p>Stan Development Team (NA). RStan: the R interface to Stan. R package version
2.26.2. <a href="https://mc-stan.org">https://mc-stan.org</a>
</p>

<hr>
<h2 id='as.stan'>Convert an object to stanfit</h2><span id='topic+as.stan'></span>

<h3>Description</h3>

<p>Create a <code>stanfit</code> object from an object for which a method exists,
so that all methods for <code>stanfit</code> objects can be used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.stan(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.stan_+3A_x">x</code></td>
<td>
<p>An object for which a method exists.</p>
</td></tr>
<tr><td><code id="as.stan_+3A_...">...</code></td>
<td>
<p>Arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>stanfit</code>, as documented in <a href="rstan.html#topic+stan">rstan::stan</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stanfit &lt;- "a"
class(stanfit) &lt;- "stanfit"
converted &lt;- as.stan(stanfit)
</code></pre>

<hr>
<h2 id='bonapersona'>Data from 'The behavioral phenotype of early life adversity'</h2><span id='topic+bonapersona'></span>

<h3>Description</h3>

<p>This meta-analysis of rodent studies examined whether early life adversity
(ELA) alters cognitive performance in several domains.
The data include over 400 independent experiments, involving approximately
8600 animals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(bonapersona)
</code></pre>


<h3>Format</h3>

<p>A data.frame with 734 rows and 65 columns.
</p>


<h3>References</h3>

<p>Bonapersona, V., Kentrop, J., Van Lissa, C. J., van der Veen,
R., Joels, M., &amp; Sarabdjitsingh, R. A. (2019).
The behavioral phenotype of early life adversity: A 3-level meta-analysis of
rodent studies. Neuroscience &amp; Biobehavioral Reviews, 102, 299â€“307.
<a href="https://doi.org/10.1016/j.neubiorev.2019.04.021">doi:10.1016/j.neubiorev.2019.04.021</a>
</p>

<hr>
<h2 id='brma'>Conduct Bayesian Regularized Meta-Analysis</h2><span id='topic+brma'></span><span id='topic+brma.formula'></span><span id='topic+brma.default'></span>

<h3>Description</h3>

<p>This function conducts Bayesian regularized meta-regression (Van Lissa &amp; Van
Erp, 2021). It uses the <code>stan</code> function
<a href="rstan.html#topic+stanmodel-method-sampling">rstan::sampling</a> to fit the model. A lasso or horseshoe prior is used to
shrink the regression coefficients of irrelevant moderators towards zero.
See Details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>brma(x, ...)

## S3 method for class 'formula'
brma(
  formula,
  data,
  vi = "vi",
  study = NULL,
  method = "hs",
  standardize = TRUE,
  prior = switch(method, lasso = c(df = 1, scale = 1), hs = c(df = 1, df_global = 1,
    df_slab = 4, scale_global = 1, scale_slab = 2, relevant_pars = NULL)),
  mute_stan = TRUE,
  ...
)

## Default S3 method:
brma(
  x,
  y,
  vi,
  study = NULL,
  method = "hs",
  standardize,
  prior,
  mute_stan = TRUE,
  intercept,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="brma_+3A_x">x</code></td>
<td>
<p>An k x m numeric matrix, where k is the number of effect sizes and m
is the number of moderators.</p>
</td></tr>
<tr><td><code id="brma_+3A_...">...</code></td>
<td>
<p>Additional arguments passed on to <code><a href="rstan.html#topic+stanmodel-method-sampling">rstan::sampling()</a></code>.
Use this, e.g., to override default arguments of that function.</p>
</td></tr>
<tr><td><code id="brma_+3A_formula">formula</code></td>
<td>
<p>An object of class <code>formula</code> (or one that can be coerced to
that class), see <code><a href="stats.html#topic+lm">lm</a></code>.</p>
</td></tr>
<tr><td><code id="brma_+3A_data">data</code></td>
<td>
<p>Either a <code>data.frame</code> containing the variables in the model,
see <code><a href="stats.html#topic+lm">lm</a></code>, or a <code>list</code> of multiple imputed <code>data.frame</code>s,
or an object returned by <code><a href="mice.html#topic+mice">mice</a></code>.</p>
</td></tr>
<tr><td><code id="brma_+3A_vi">vi</code></td>
<td>
<p>Character. Name of the column in the <code>data</code> that
contains the variances of the effect sizes. This column will be removed from
the data prior to analysis. Defaults to <code>"vi"</code>.</p>
</td></tr>
<tr><td><code id="brma_+3A_study">study</code></td>
<td>
<p>Character. Name of the column in the
<code>data</code> that contains the study id. Use this when the data includes
multiple effect sizes per study. This column can be a vector of integers, or
a factor. This column will be removed from the data prior to analysis.
See <code>Details</code> for more information about analyzing dependent data.</p>
</td></tr>
<tr><td><code id="brma_+3A_method">method</code></td>
<td>
<p>Character, indicating the type of regularizing prior to use.
Supports one of <code>c("hs", "lasso")</code>, see Details. Defaults to
<code>"hs"</code>.</p>
</td></tr>
<tr><td><code id="brma_+3A_standardize">standardize</code></td>
<td>
<p>Either a logical argument or a list. If <code>standardize</code> is
logical, it controls whether all predictors are standardized prior to
analysis or not. Parameter estimates are restored to the predictors' original
scale. Alternatively, users can provide a list to <code>standardize</code> to gain
more control over the standardization process. In this case, it is assumed
that the standardization has already taken place. This list must have two
elements: <code>list(center = c(mean(X1) , mean(X2), mean(X...)), scale = c(sd(X1), sd(X2), sd(X...)))</code>. It is used
only to restore parameter estimates to the original scale of the predictors.
This is useful, e.g., to standardize continuous and dichotomous variables
separately. Defaults to <code>TRUE</code>, which is recommended so that shrinking
affects all parameters similarly.</p>
</td></tr>
<tr><td><code id="brma_+3A_prior">prior</code></td>
<td>
<p>Numeric vector, specifying the prior to use. Note that the
different <code>method</code>s require this vector to contain specific named
elements.</p>
</td></tr>
<tr><td><code id="brma_+3A_mute_stan">mute_stan</code></td>
<td>
<p>Logical, indicating whether mute all 'Stan' output or not.</p>
</td></tr>
<tr><td><code id="brma_+3A_y">y</code></td>
<td>
<p>A numeric vector of k effect sizes.</p>
</td></tr>
<tr><td><code id="brma_+3A_intercept">intercept</code></td>
<td>
<p>Logical, indicating whether or not an intercept should be included
in the model.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Bayesian regularized meta-analysis algorithm (Van Lissa &amp; Van
Erp, 2021) penalizes meta-regression coefficients either via the
lasso prior (Park &amp; Casella, 2008) or the regularized horseshoe prior
(Piironen &amp; Vehtari, 2017).
</p>

<dl>
<dt>lasso</dt><dd><p> The Bayesian equivalent of the lasso penalty is obtained when
placing independent Laplace (i.e., double exponential) priors on the
regression coefficients centered around zero. The scale of the Laplace
priors is determined by a global scale parameter <code>scale</code>, which
defaults to 1 and an inverse-tuning parameter <code class="reqn">\frac{1}{\lambda}</code>
which is given a chi-square prior governed by a degrees of freedom
parameter <code>df</code> (defaults to 1). If <code>standardize = TRUE</code>,
shrinkage will
affect all coefficients equally and it is not necessary to adapt the
<code>scale</code> parameter. Increasing the <code>df</code> parameter will allow
larger values for the inverse-tuning parameter, leading to less shrinkage.</p>
</dd>
<dt>hs</dt><dd><p> One issue with the lasso prior is that it has relatively light
tails. As a result, not only does the lasso have the desirable behavior of
pulling small coefficients to zero, it also results in too much shrinkage
of large coefficients. An alternative prior that improves upon this
shrinkage pattern is the horseshoe prior (Carvalho, Polson &amp; Scott, 2010).
The horseshoe prior has an infinitely large spike at zero, thereby pulling
small coefficients toward zero but in addition has fat tails, which allow
substantial coefficients to escape the shrinkage. The regularized horseshoe
is an extension of the horseshoe prior that allows the inclusion of prior
information regarding the number of relevant predictors and can
be more numerically stable in certain cases (Piironen &amp; Vehtari, 2017).
The regularized horseshoe has a global shrinkage parameter that influences
all coefficients similarly and local shrinkage parameters that enable
flexible shrinkage patterns for each coefficient separately. The local
shrinkage parameters are given a Student's t prior with a default <code>df</code>
parameter of 1. Larger values for <code>df</code> result in lighter tails and
a prior that is no longer strictly a horseshoe prior. However, increasing
<code>df</code> slightly might be necessary to avoid divergent transitions in
Stan (see also <a href="https://mc-stan.org/misc/warnings.html">https://mc-stan.org/misc/warnings.html</a>). Similarly,
the degrees of freedom for the Student's t prior on the global shrinkage
parameter <code>df_global</code> can be increased from the default of 1 to, for
example, 3 if divergent transitions occur although the resulting
prior is then strictly no longer a horseshoe. The scale for the Student's t
prior on the global shrinkage parameter <code>scale_global</code> defaults to 1
and can be decreased to achieve more shrinkage. Moreover, if prior
information regarding the number of relevant moderators is available, it is
recommended to include this information via the <code>relevant_pars</code>
argument by setting it to the expected number of relevant moderators. When
<code>relevant_pars</code> is specified, <code>scale_global</code> is ignored and
instead based on the available prior information. Contrary to the horseshoe
prior, the regularized horseshoe applies additional regularization on large
coefficients which is governed by a Student's t prior with a
<code>scale_slab</code> defaulting to 2 and <code>df_slab</code> defaulting to 4.
This additional regularization ensures at least some shrinkage of large
coefficients to avoid any sampling problems.</p>
</dd>
</dl>



<h3>Value</h3>

<p>A <code>list</code> object of class <code>brma</code>, with the following structure:
</p>
<div class="sourceCode"><pre>list(
  fit          # An object of class stanfit, for compatibility with rstan
  coefficients # A numeric matrix with parameter estimates; these are
               # interpreted as regression coefficients, except tau2 and tau,
               # which are interpreted as the residual variance and standard
               # deviation, respectively.
  formula      # The formula used to estimate the model
  terms        # The predictor terms in the formula
  X            # Numeric matrix of moderator variables
  Y            # Numeric vector with effect sizes
  vi           # Numeric vector with effect size variances
  tau2         # Numeric, estimated tau2
  R2           # Numeric, estimated heterogeneity explained by the moderators
  k            # Numeric, number of effect sizes
  study        # Numeric vector with study id numbers
)
</pre></div>


<h3>References</h3>

<p>Van Lissa, C. J., van Erp, S., &amp; Clapper, E. B. (2023). Selecting relevant
moderators with Bayesian regularized meta-regression. Research Synthesis
Methods. <a href="https://doi.org/10.31234/osf.io/6phs5">doi:10.31234/osf.io/6phs5</a>
</p>
<p>Park, T., &amp; Casella, G. (2008). The Bayesian Lasso. Journal of the American
Statistical Association, 103(482), 681â€“686. <a href="https://doi.org/10.1198/016214508000000337">doi:10.1198/016214508000000337</a>
</p>
<p>Carvalho, C. M., Polson, N. G., &amp; Scott, J. G. (2010). The horseshoe
estimator for sparse signals. Biometrika, 97(2), 465â€“480.
<a href="https://doi.org/10.1093/biomet/asq017">doi:10.1093/biomet/asq017</a>
</p>
<p>Piironen, J., &amp; Vehtari, A. (2017). Sparsity information and regularization
in the horseshoe and other shrinkage priors. Electronic Journal of
Statistics, 11(2). <a href="https://projecteuclid.org/journals/electronic-journal-of-statistics/volume-11/issue-2/Sparsity-information-and-regularization-in-the-horseshoe-and-other-shrinkage/10.1214/17-EJS1337SI.pdf">https://projecteuclid.org/journals/electronic-journal-of-statistics/volume-11/issue-2/Sparsity-information-and-regularization-in-the-horseshoe-and-other-shrinkage/10.1214/17-EJS1337SI.pdf</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("curry")
df &lt;- curry[c(1:5, 50:55), c("d", "vi", "sex", "age", "donorcode")]
suppressWarnings({res &lt;- brma(d~., data = df, iter = 10)})
</code></pre>

<hr>
<h2 id='curry'>Data from 'Happy to Help?'</h2><span id='topic+curry'></span>

<h3>Description</h3>

<p>A systematic review and meta-analysis of the effects of performing acts of
kindness on the well-being of the actor.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(curry)
</code></pre>


<h3>Format</h3>

<p>A data.frame with 56 rows and 18 columns.
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>study_id</strong> </td><td style="text-align: left;"> <code>factor</code> </td><td style="text-align: left;"> Unique identifier of the study</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>effect_id</strong> </td><td style="text-align: left;"> <code>integer</code> </td><td style="text-align: left;"> Unique identifier of the effect size</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>d</strong> </td><td style="text-align: left;"> <code>numeric</code> </td><td style="text-align: left;"> Standardized mean difference between the control group and intervention group</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>vi</strong> </td><td style="text-align: left;"> <code>numeric</code> </td><td style="text-align: left;"> Variance of the effect size</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>n1i</strong> </td><td style="text-align: left;"> <code>numeric</code> </td><td style="text-align: left;"> Number of participants in the intervention group</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>n1c</strong> </td><td style="text-align: left;"> <code>numeric</code> </td><td style="text-align: left;"> Number of participants in the control group</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>sex</strong> </td><td style="text-align: left;"> <code>numeric</code> </td><td style="text-align: left;"> Percentage of male participants</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>age</strong> </td><td style="text-align: left;"> <code>numeric</code> </td><td style="text-align: left;"> Mean age of participants</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>location</strong> </td><td style="text-align: left;"> <code>character</code> </td><td style="text-align: left;"> Geographical location of the study</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>donor</strong> </td><td style="text-align: left;"> <code>character</code> </td><td style="text-align: left;"> From what population did the donors (helpers) originate?</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>donorcode</strong> </td><td style="text-align: left;"> <code>factor</code> </td><td style="text-align: left;"> From what population did the donors (helpers) originate? Dichotomized to Anxious or Typical</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>interventioniv</strong> </td><td style="text-align: left;"> <code>character</code> </td><td style="text-align: left;"> Description of the intervention / independent variable</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>interventioncode</strong> </td><td style="text-align: left;"> <code>factor</code> </td><td style="text-align: left;"> Description of the intervention / independent variable, categorized to Acts of Kindness, Prosocial Spending, or Other</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>control</strong> </td><td style="text-align: left;"> <code>character</code> </td><td style="text-align: left;"> Description of the control condition</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>controlcode</strong> </td><td style="text-align: left;"> <code>factor</code> </td><td style="text-align: left;"> Description of the control condition, categorized to Neutral Activity, Nothing, or Self Help (performing a kind act for oneself)</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>recipients</strong> </td><td style="text-align: left;"> <code>character</code> </td><td style="text-align: left;"> Who were the recipients of the act of kindness?</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>outcomedv</strong> </td><td style="text-align: left;"> <code>character</code> </td><td style="text-align: left;"> What was the outcome, or dependent variable, of the study?</td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>outcomecode</strong> </td><td style="text-align: left;"> <code>factor</code> </td><td style="text-align: left;"> What was the outcome, or dependent variable, of the study? Categorized into Happiness, Life Satisfaction, PN Affect (positive or negative), and Other
</td>
</tr>

</table>



<h3>References</h3>

<p>Curry, O. S., Rowland, L. A., Van Lissa, C. J., Zlotowitz, S.,
McAlaney, J., &amp; Whitehouse, H. (2018). Happy to help? A systematic review and
meta-analysis of the effects of performing acts of kindness on the well-being
of the actor. Journal of Experimental Social Psychology, 76, 320-329.
<a href="https://doi.org/10.1016/j.ecresq.2007.04.005">doi:10.1016/j.ecresq.2007.04.005</a>
</p>

<hr>
<h2 id='I2'>Compute I2</h2><span id='topic+I2'></span>

<h3>Description</h3>

<p>I2 represents the amount of heterogeneity relative to the total
amount of variance in the observed effect sizes (Higgins &amp; Thompson, 2002).
For three-level meta-analyses, it is additionally broken down into I2_w
(amount of within-cluster heterogeneity) and I2_b (amount of between-cluster
heterogeneity).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>I2(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="I2_+3A_x">x</code></td>
<td>
<p>An object for which a method exists.</p>
</td></tr>
<tr><td><code id="I2_+3A_...">...</code></td>
<td>
<p>Arguments passed to other functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric matrix, with rows corresponding to I2 (total heterogeneity),
and optionally I2_w and I2_b (within- and between-cluster heterogeneity).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>I2(matrix(1:20, ncol = 1))
</code></pre>

<hr>
<h2 id='maxap'>Maximum a posteriori parameter estimate</h2><span id='topic+maxap'></span>

<h3>Description</h3>

<p>Find the parameter estimate with the highest posterior
probability density given a vector of samples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maxap(x, dens = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="maxap_+3A_x">x</code></td>
<td>
<p>Numeric vector.</p>
</td></tr>
<tr><td><code id="maxap_+3A_dens">dens</code></td>
<td>
<p>Optional object of class <code>density</code>. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="maxap_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code><a href="stats.html#topic+density">density</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Atomic numeric vector with the maximum a-posteriori estimate of
vector <code>x</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>maxap(c(1,2,3,4,5))
</code></pre>

<hr>
<h2 id='plot_sensitivity'>Plot posterior distributions for BRMA models</h2><span id='topic+plot_sensitivity'></span>

<h3>Description</h3>

<p>To perform a rudimentary sensitivity analysis,
plot the posterior distributions of multiple BRMA models
and compare them visually.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_sensitivity(..., parameters = NULL, model_names = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_sensitivity_+3A_...">...</code></td>
<td>
<p>Objects of class <code>brma</code>. If the argument <code>model_names</code>
is <code>NULL</code>, the names of these objects are used to label the plot.</p>
</td></tr>
<tr><td><code id="plot_sensitivity_+3A_parameters">parameters</code></td>
<td>
<p>Optional character vector with the names of
parameters that exist in the models in <code>...</code>,
Default: <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="plot_sensitivity_+3A_model_names">model_names</code></td>
<td>
<p>Optional character vector with the names used
to label the models in <code>...</code>, Default: <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>ggplot</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot_sensitivity(samples = list(
data.frame(Parameter = "b",
Value = rnorm(10),
Model = "M1"),
data.frame(Parameter = "b",
Value = rnorm(10, mean = 2),
Model = "M2")),
parameters = "b")
</code></pre>

<hr>
<h2 id='sample_prior'>Sample from the Prior Distribution</h2><span id='topic+sample_prior'></span>

<h3>Description</h3>

<p>Samples from a prior
distribution with parameters defined in <code>prior</code>. The result can be plotted
using the <code><a href="base.html#topic+plot">plot</a></code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample_prior(
  method = c("hs", "lasso"),
  prior = switch(method, lasso = c(df = 1, scale = 1), hs = c(df = 1, df_global = 1,
    df_slab = 4, scale_global = 1, scale_slab = 2, par_ratio = NULL)),
  iter = 1000
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sample_prior_+3A_method">method</code></td>
<td>
<p>Character string, indicating which prior to sample from.
Default: first element of <code>c("hs", "lasso")</code>.</p>
</td></tr>
<tr><td><code id="sample_prior_+3A_prior">prior</code></td>
<td>
<p>Numeric vector, specifying the prior to use. See <a href="#topic+brma">brma</a>
for more details.</p>
</td></tr>
<tr><td><code id="sample_prior_+3A_iter">iter</code></td>
<td>
<p>A positive integer specifying the number of iterations to sample.
Default: 1000</p>
</td></tr>
</table>


<h3>Value</h3>

<p>NULL, function is called for its side-effect of plotting to the
graphics device.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sample_prior("lasso", iter = 10)
</code></pre>

<hr>
<h2 id='shiny_prior'>Interactively Sample from the Prior Distribution</h2><span id='topic+shiny_prior'></span>

<h3>Description</h3>

<p>Launches a <code>Shiny</code> app that allows interactive comparison of
different priors for <code><a href="#topic+brma">brma</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shiny_prior()
</code></pre>


<h3>Value</h3>

<p>NULL, function is called for its side-effect of launching a Shiny
app.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
shiny_prior()

## End(Not run)
</code></pre>

<hr>
<h2 id='simulate_smd'>Simulates a meta-analytic dataset</h2><span id='topic+simulate_smd'></span>

<h3>Description</h3>

<p>This function simulates a meta-analytic dataset based on the random-effects
model. The simulated effect size is Hedges' G, an estimator of the
Standardized Mean Difference (Hedges, 1981; Li, Dusseldorp, &amp; Meulman, 2017).
The functional form of the model can be specified, and moderators can be
either normally distributed or Bernoulli-distributed. See Van Lissa, in
preparation, for a detailed explanation of the simulation procedure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulate_smd(
  k_train = 20,
  k_test = 100,
  mean_n = 40,
  es = 0.5,
  tau2 = 0.04,
  alpha = 0,
  moderators = 5,
  distribution = "normal",
  model = "es * x[, 1]"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="simulate_smd_+3A_k_train">k_train</code></td>
<td>
<p>Atomic integer. The number of studies in the training dataset.
Defaults to 20.</p>
</td></tr>
<tr><td><code id="simulate_smd_+3A_k_test">k_test</code></td>
<td>
<p>Atomic integer. The number of studies in the testing dataset.
Defaults to 100.</p>
</td></tr>
<tr><td><code id="simulate_smd_+3A_mean_n">mean_n</code></td>
<td>
<p>Atomic integer. The mean sample size of each simulated study in
the meta-analytic dataset. Defaults to <code>40</code>. For each simulated study, the
sample size n is randomly drawn from a normal distribution with mean mean_n,
and sd mean_n/3.</p>
</td></tr>
<tr><td><code id="simulate_smd_+3A_es">es</code></td>
<td>
<p>Atomic numeric vector. The effect size, also known as beta, used in
the model statement. Defaults to <code>.5</code>.</p>
</td></tr>
<tr><td><code id="simulate_smd_+3A_tau2">tau2</code></td>
<td>
<p>Atomic numeric vector. The residual heterogeneity. For a range of
realistic values encountered in psychological research, see Van Erp,
Verhagen, Grasman, &amp; Wagenmakers, 2017. Defaults to <code>0.04</code>.</p>
</td></tr>
<tr><td><code id="simulate_smd_+3A_alpha">alpha</code></td>
<td>
<p>Vector of slant parameters, passed to <a href="sn.html#topic+dsn">sn::rsn</a>.</p>
</td></tr>
<tr><td><code id="simulate_smd_+3A_moderators">moderators</code></td>
<td>
<p>Atomic integer. The number of moderators to simulate for
each study. Make sure that the number of moderators to be simulated is at
least as large as the number of moderators referred to in the model
parameter. Internally, the matrix of moderators is referred to as <code>"x"</code>.
Defaults to 5.</p>
</td></tr>
<tr><td><code id="simulate_smd_+3A_distribution">distribution</code></td>
<td>
<p>Atomic character. The distribution of the moderators.
Can be set to either <code>"normal"</code> or <code>"bernoulli"</code>. Defaults to <code>"normal"</code>.</p>
</td></tr>
<tr><td><code id="simulate_smd_+3A_model">model</code></td>
<td>
<p>Expression. An expression to specify the model from which to
simulate the mean true effect size, mu. This formula may use the terms <code>"es"</code>
(referring to the es parameter of the call to simulate_smd), and <code style="white-space: pre;">&#8288;"x\[, \]"&#8288;</code>
(referring to the matrix of moderators, x). Thus, to specify that the mean
effect size, mu, is a function of the effect size and the first moderator,
one would pass the value <code>model = "es * x\[ , 1\]"</code>.
Defaults to <code style="white-space: pre;">&#8288;"es * x\[ , 1\]"&#8288;</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of length 4. The &quot;training&quot; element of this list is a data.frame
with k_train rows. The columns are the variance of the effect size, vi; the
effect size, yi, and the moderators, X. The &quot;testing&quot; element of this list is
a data.frame with k_test rows. The columns are the effect size, yi, and the
moderators, X. The &quot;housekeeping&quot; element of this list is a data.frame with
k_train + k_test rows. The columns are n, the sample size n for each
simulated study; mu_i, the mean true effect size for each simulated study;
and theta_i, the true effect size for each simulated study.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(8)
simulate_smd()
simulate_smd(k_train = 50, distribution = "bernoulli")
simulate_smd(distribution = "bernoulli", model = "es * x[ ,1] * x[ ,2]")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
