<!DOCTYPE html><html><head><title>Help for package MSCMT</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {MSCMT}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#MSCMT'><p>Multivariate Synthetic Control Method Using Time Series</p></a></li>
<li><a href='#compare'><p>Compare MSCMT estimation results</p></a></li>
<li><a href='#did'><p>Difference-in-difference estimator based on SCM</p></a></li>
<li><a href='#ggplot.mscmt'><p>Plotting Results of mscmt with ggplot2</p></a></li>
<li><a href='#improveSynth'><p>Check (and Improve) Results of Package Synth</p></a></li>
<li><a href='#listFromLong'><p>Convert Long Format to List Format</p></a></li>
<li><a href='#mscmt'><p>Multivariate SCM Using Time Series</p></a></li>
<li><a href='#plot.mscmt'><p>Plotting Results of MSCMT</p></a></li>
<li><a href='#ppratio'><p>Post-pre-(r)mspe-ratios for placebo studies</p></a></li>
<li><a href='#print.mscmt'><p>Printing Results of MSCMT</p></a></li>
<li><a href='#pvalue'><p>P-values for placebo studies</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Version:</td>
<td>1.4.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-03-19</td>
</tr>
<tr>
<td>Title:</td>
<td>Multivariate Synthetic Control Method Using Time Series</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, utils, parallel, lpSolve, ggplot2, lpSolveAPI, Rglpk,
Rdpack</td>
</tr>
<tr>
<td>Suggests:</td>
<td>Synth, DEoptim, rgenoud, DEoptimR, GenSA, GA, soma, cmaes,
Rmalschains, NMOF, nloptr, pso, LowRankQP, kernlab, reshape,
knitr, rmarkdown</td>
</tr>
<tr>
<td>Description:</td>
<td>Three generalizations of the synthetic control method (which has 
    already an implementation in package 'Synth') are implemented: first, 
    'MSCMT' allows for using multiple outcome variables, second, time series 
    can be supplied as economic predictors, and third, a well-defined 
    cross-validation approach can be used.
    Much effort has been taken to make the implementation as stable as possible 
    (including edge cases) without losing computational efficiency.
    A detailed description of the main algorithms is given in 
    Becker and Klößner (2018) &lt;<a href="https://doi.org/10.1016%2Fj.ecosta.2017.08.002">doi:10.1016/j.ecosta.2017.08.002</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL]</td>
</tr>
<tr>
<td>Copyright:</td>
<td>inst/COPYRIGHTS</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>Rdpack</td>
</tr>
<tr>
<td>BuildVignettes:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-19 09:46:40 UTC; mabe003</td>
</tr>
<tr>
<td>Author:</td>
<td>Martin Becker <a href="https://orcid.org/0000-0003-2336-9751"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Stefan Klößner [aut],
  Karline Soetaert [com],
  Jack Dongarra [cph],
  R.J. Hanson [cph],
  K.H. Haskell [cph],
  Cleve Moler [cph],
  LAPACK authors [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Martin Becker &lt;martin.becker@mx.uni-saarland.de&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-19 10:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='MSCMT'>Multivariate Synthetic Control Method Using Time Series</h2><span id='topic+MSCMT'></span><span id='topic+MSCMT-package'></span>

<h3>Description</h3>

<p>MSCMT implements the Multivariate Synthetic Control Method Using
Time Series.
</p>


<h3>Details</h3>

<p>MSCMT implements three generalizations of the synthetic control method (which 
has already an implementation in package 'Synth'): </p>

<ol>
<li><p> it allows for using multiple outcome variables, 
</p>
</li>
<li><p> time series can be supplied as economic predictors,
</p>
</li>
<li><p> a well-defined cross-validation approach can be used.
</p>
</li></ol>
 
<p>Much effort has been taken to make the implementation as stable as possible 
(including edge cases) without losing computational efficiency.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Martin Becker <a href="mailto:martin.becker@mx.uni-saarland.de">martin.becker@mx.uni-saarland.de</a> (<a href="https://orcid.org/0000-0003-2336-9751">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Stefan Klößner <a href="mailto:S.Kloessner@mx.uni-saarland.de">S.Kloessner@mx.uni-saarland.de</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Karline Soetaert <a href="mailto:karline.soetaert@nioz.nl">karline.soetaert@nioz.nl</a> [compiler]
</p>
</li>
<li><p> Jack Dongarra <a href="mailto:dongarra@icl.utk.edu">dongarra@icl.utk.edu</a> [copyright holder]
</p>
</li>
<li><p> R.J. Hanson [copyright holder]
</p>
</li>
<li><p> K.H. Haskell [copyright holder]
</p>
</li>
<li><p> Cleve Moler [copyright holder]
</p>
</li>
<li><p> LAPACK authors [copyright holder]
</p>
</li></ul>



<h3>References</h3>

<p>Abadie A, Gardeazabal J (2003).
&ldquo;The Economic Costs of Conflict: A Case Study of the Basque Country.&rdquo;
<em>The American Economic Review</em>, <b>93</b>(1), 113-132.
<a href="http://dx.doi.org/10.1257/000282803321455188">http://dx.doi.org/10.1257/000282803321455188</a>.
</p>
<p>Abadie A, Diamond A, Hainmueller J (2010).
&ldquo;Synthetic Control Methods for Comparative Case Studies: Estimating the Effect of California's Tobacco Control Program.&rdquo;
<em>Journal of the American Statistical Association</em>, <b>105</b>(490), 493&ndash;505.
<a href="http://dx.doi.org/10.1198/jasa.2009.ap08746">http://dx.doi.org/10.1198/jasa.2009.ap08746</a>.
</p>
<p>Becker M, Klößner S (2018).
&ldquo;Fast and Reliable Computation of Generalized Synthetic Controls.&rdquo;
<em>Econometrics and Statistics</em>, <b>5</b>, 1&ndash;19.
<a href="https://doi.org/10.1016/j.ecosta.2017.08.002">https://doi.org/10.1016/j.ecosta.2017.08.002</a>.
</p>
<p>Becker M, Klößner S, Pfeifer G (2018).
&ldquo;Cross-Validating Synthetic Controls.&rdquo;
<em>Economics Bulletin</em>, <b>38</b>, 603-609.
Working Paper, <a href="http://www.accessecon.com/Pubs/EB/2018/Volume38/EB-18-V38-I1-P58.pdf">http://www.accessecon.com/Pubs/EB/2018/Volume38/EB-18-V38-I1-P58.pdf</a>.
</p>
<p>Klößner S, Pfeifer G (2015).
&ldquo;Synthesizing Cash for Clunkers: Stabilizing the Car Market, Hurting the Environment.&rdquo;
Verein für Socialpolitik/German Economic Association.
<a href="https://ideas.repec.org/p/zbw/vfsc15/113207.html">https://ideas.repec.org/p/zbw/vfsc15/113207.html</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## for examples, see the package vignettes:
browseVignettes(package="MSCMT")

## End(Not run)
</code></pre>

<hr>
<h2 id='compare'>Compare MSCMT estimation results</h2><span id='topic+compare'></span>

<h3>Description</h3>

<p><code>compare</code> collects estimation results from <code><a href="#topic+mscmt">mscmt</a></code> for
comparison purposes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compare(..., auto.name.prefix = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compare_+3A_...">...</code></td>
<td>
<p>Objects of class <code>"mscmt"</code> or (a) list(s) containing objects
of class <code>"mscmt"</code>.</p>
</td></tr>
<tr><td><code id="compare_+3A_auto.name.prefix">auto.name.prefix</code></td>
<td>
<p>A character string (default: &quot;&quot;) internally used to 
facilitate automatic naming in nested lists of unnamed estimation results.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>compare</code> collects (potentially many) estimation results from 
<code><a href="#topic+mscmt">mscmt</a></code> in a special object of class <code>"mscmt"</code>, which 
includes a component <code>"comparison"</code> where the different estimation 
results are aggregated.
This aggregated information is used by the <code><a href="#topic+ggplot.mscmt">ggplot.mscmt</a></code> and 
<code><a href="#topic+print.mscmt">print.mscmt</a></code> methods to present summaries of the different
results.
</p>


<h3>Value</h3>

<p>An object of class <code>"mscmt"</code>, which itself contains the 
individual estimation results as well as a component <code>"comparison"</code> 
with aggregated information.
</p>

<hr>
<h2 id='did'>Difference-in-difference estimator based on SCM</h2><span id='topic+did'></span>

<h3>Description</h3>

<p><code>did</code> calculates difference-in-difference estimators based on SCM.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>did(
  x,
  what,
  range.pre,
  range.post,
  alternative = c("two.sided", "less", "greater"),
  exclude.ratio = Inf
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="did_+3A_x">x</code></td>
<td>
<p>An object of class <code>"mscmt"</code>, usually obtained as
the result of a call to function <code><a href="#topic+mscmt">mscmt</a></code>.</p>
</td></tr>
<tr><td><code id="did_+3A_what">what</code></td>
<td>
<p>A character vector. Name of the variable to be considered. If 
missing, the (first) dependent variable will be used.</p>
</td></tr>
<tr><td><code id="did_+3A_range.pre">range.pre</code></td>
<td>
<p>A vector of length 2 defining the range of the pre-treatment
period with start and end time given as 
</p>

<ul>
<li><p> annual dates, if the format of start/end time is &quot;dddd&quot;, e.g. &quot;2016&quot;,
</p>
</li>
<li><p> quarterly dates, if the format of start/end time is &quot;ddddQd&quot;, e.g. 
&quot;2016Q1&quot;,
</p>
</li>
<li><p> monthly dates, if the format of start/end time is &quot;dddd?dd&quot; with &quot;?&quot;
different from &quot;W&quot; (see below), e.g. &quot;2016/03&quot; or &quot;2016-10&quot;,
</p>
</li>
<li><p> weekly dates, if the format of start/end time is &quot;ddddWdd&quot;, e.g. 
&quot;2016W23&quot;,
</p>
</li>
<li><p> daily dates, if the format of start/end time is &quot;dddd-dd-dd&quot;, e.g. 
&quot;2016-08-18&quot;,
</p>
</li></ul>

<p>corresponding to the format of the respective column of the <code>times.dep</code>
argument of <code><a href="#topic+mscmt">mscmt</a></code>.
If missing, the corresponding column of <code>times.dep</code> will be used.</p>
</td></tr>
<tr><td><code id="did_+3A_range.post">range.post</code></td>
<td>
<p>A vector of length 2 defining the range of the 
post-treatment period with start and end time given as 
</p>

<ul>
<li><p> annual dates, if the format of start/end time is &quot;dddd&quot;, e.g. &quot;2016&quot;,
</p>
</li>
<li><p> quarterly dates, if the format of start/end time is &quot;ddddQd&quot;, e.g. 
&quot;2016Q1&quot;,
</p>
</li>
<li><p> monthly dates, if the format of start/end time is &quot;dddd?dd&quot; with &quot;?&quot;
different from &quot;W&quot; (see below), e.g. &quot;2016/03&quot; or &quot;2016-10&quot;,
</p>
</li>
<li><p> weekly dates, if the format of start/end time is &quot;ddddWdd&quot;, e.g. 
&quot;2016W23&quot;,
</p>
</li>
<li><p> daily dates, if the format of start/end time is &quot;dddd-dd-dd&quot;, e.g. 
&quot;2016-08-18&quot;,
</p>
</li></ul>

<p>corresponding to the format of the respective column of the <code>times.dep</code>
argument of <code><a href="#topic+mscmt">mscmt</a></code>. Will be guessed if missing.</p>
</td></tr>
<tr><td><code id="did_+3A_alternative">alternative</code></td>
<td>
<p>A character string giving the alternative of the test. 
Either <code>"two.sided"</code> (default), <code>"less"</code>, or <code>"greater"</code>.</p>
</td></tr>
<tr><td><code id="did_+3A_exclude.ratio">exclude.ratio</code></td>
<td>
<p>A numerical scalar (default: <code>Inf</code>). When 
calculating the p-value, control units with an average pre-treatment gap
of more then <code>exclude.ratio</code> times the average pre-treatment gap of
the treated unit are excluded from the analysis.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>did</code> calculates difference-in-difference estimators with corresponding
p-values (if results of a placebo study are present) based on the Synthetic 
Control Method.
</p>


<h3>Value</h3>

<p>A list with components <code>effect.size</code>, <code>average.pre</code> and
<code>average.post</code>. If <code>x</code> contains the results of a placebo study,
three components <code>p.value</code>, <code>rank</code>, and <code>excluded</code> (with the 
names of the excluded units) are included additionally.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## for an example, see the main package vignette:
 vignette("WorkingWithMSCMT",package="MSCMT")

## End(Not run)
</code></pre>

<hr>
<h2 id='ggplot.mscmt'>Plotting Results of mscmt with ggplot2</h2><span id='topic+ggplot.mscmt'></span>

<h3>Description</h3>

<p><code>ggplot.mscmt</code> plots results of <code><a href="#topic+mscmt">mscmt</a></code> based on 
<code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mscmt'
ggplot(
  data,
  mapping = aes(),
  what,
  type = c("gaps", "comparison", "placebo.gaps", "placebo.data", "p.value"),
  treatment.time,
  zero.line = TRUE,
  ylab,
  xlab = "Date",
  main,
  col,
  lty,
  lwd,
  legend = TRUE,
  bw = FALSE,
  date.format,
  unit.name,
  full.legend = TRUE,
  include.smooth = FALSE,
  include.mean = FALSE,
  include.synth = FALSE,
  draw.estwindow = TRUE,
  what.set,
  limits = NULL,
  alpha = 1,
  alpha.min = 0.1,
  exclude.units = NULL,
  exclude.ratio = Inf,
  ratio.type = c("rmspe", "mspe"),
  alternative = c("two.sided", "less", "greater"),
  draw.points = TRUE,
  control.name = "control units",
  size = 1,
  treated.name = "treated unit",
  labels = c("actual data", "synthsized data"),
  ...,
  environment = parent.frame()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ggplot.mscmt_+3A_data">data</code></td>
<td>
<p>An object of class <code>"mscmt"</code>, usually obtained as
the result of a call to function <code><a href="#topic+mscmt">mscmt</a></code>.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_mapping">mapping</code></td>
<td>
<p>An object necessary to match the definition of the
<code>ggplot</code> generic (passed to <code>ggplot</code> as is). Defaults to 
<code>aes()</code>.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_what">what</code></td>
<td>
<p>A character vector. Name(s) of the variables to be plotted. If 
missing, the (first) dependent variable will be used.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_type">type</code></td>
<td>
<p>A character scalar denoting the type of the plot containing 
either <code>"gaps"</code>, <code>"comparison"</code>, <code>"placebo.gaps"</code>, 
<code>"placebo.data"</code>, or <code>"p.value"</code>. 
Partial matching allowed, defaults to <code>"placebo.gaps"</code>, if results
of a placebo study are present, and to <code>"gaps"</code>, else.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_treatment.time">treatment.time</code></td>
<td>
<p>An optional scalar (numeric, character, or 
<code><a href="base.html#topic+Date">Date</a></code>) giving the treatment time. 
If <code>treatment.time</code> is numeric, Jan 01 of that year will be used. If 
<code>treatment.time</code> is a character string, it will be converted to a 
<code><a href="base.html#topic+Date">Date</a></code> and must thus be in an unambiguous format.
A vertical dotted line at the given point in time is included in the plot.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_zero.line">zero.line</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code> (default), a horizontal
dotted line (at zero level) is plotted for <code>"gaps"</code> and 
<code>"placebo.gaps"</code> plots.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_ylab">ylab</code></td>
<td>
<p>Optional label for the y-axis, automatically generated if 
missing.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_xlab">xlab</code></td>
<td>
<p>Optional label for the x-axis, defaults to <code>"Date"</code>.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_main">main</code></td>
<td>
<p>Optional main title for the plot, automatically generated 
if missing.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_col">col</code></td>
<td>
<p>Optional character vector with length 1 (for gaps plots) or
2 (for all other plot types). For comparison plots, <code>col</code> contains the
colours for the actual and synthesized data, for placebo.plots (with 
<code>full.legend==FALSE</code>), <code>col</code> contains the colours for 
the treated unit and the control units. Automatically generated 
if missing.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_lty">lty</code></td>
<td>
<p>Optional numerical vector with length 1 (for gaps plots) or
2 (for all other plot types). For comparison plots, <code>lty</code> contains the
linetypes for the actual and synthesized data, for placebo.plots (with 
<code>full.legend==FALSE</code>), <code>col</code> contains the linetypes for 
the treated unit and the control units. Automatically generated 
if missing.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_lwd">lwd</code></td>
<td>
<p>Optional numerical vector with length 1 (for gaps plots) or
2 (for all other plot types). For comparison plots, <code>lty</code> contains the
linewidths for the actual and synthesized data, for placebo.plots (with 
<code>full.legend==FALSE</code>), <code>col</code> contains the linewidths for 
the treated unit and the control units. Automatically generated 
if missing.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_legend">legend</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code> (default), a legend is 
included in the plot.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_bw">bw</code></td>
<td>
<p>A logical scalar. If <code>FALSE</code> (default), the automatically 
generated colours and line types are optimized for a colour plot, 
if <code>TRUE</code>, the automatic colours and line types are set for a black and
white plot.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_date.format">date.format</code></td>
<td>
<p>A character string giving the format for the tick labels
of the x axis as documented in <code><a href="base.html#topic+strptime">strptime</a></code>. Defaults to
<code>"%b %y"</code> or <code>"%Y"</code>, depending on the granularity of the data.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_unit.name">unit.name</code></td>
<td>
<p>A character string with the title of the legend 
for comparison and placebo plots. Defaults to &quot;Estimation&quot; for comparison 
and &quot;Unit&quot; for placebo plots.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_full.legend">full.legend</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code> (default), a full legend
of all units (donors) is constructed. If <code>FALSE</code>, only the treated and
the control units are distinguished.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_include.smooth">include.smooth</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code>, a geometric smoother
based on the control units is added to placebo plots. Default: <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_include.mean">include.mean</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code>, the arithmetic mean
of all control units is added to placebo plots. Default: <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_include.synth">include.synth</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code>, the synthesized data
for the treated unit are added to plots of type <code>"placebo.data"</code>.
Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_draw.estwindow">draw.estwindow</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code> (default), the time
range containing all optimization periods is shaded in the corresponding
plots.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_what.set">what.set</code></td>
<td>
<p>An optional character string for a convenient selection of 
multiple variables. Accepted values are <code>"dependents"</code>, 
<code>"predictors"</code>, and <code>"all"</code>, which collects all dependent, all
predictor, or all variables of both types, respectively. Overrides parameter
<code>what</code> (if the latter is present).</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_limits">limits</code></td>
<td>
<p>An optional vector of length 2 giving the range of the plot or
<code>NULL</code>.
If <code>limits</code> is numeric, Jan 01 of the corresponding years will be used.
If <code>limits</code> is of type character, both strings will be converted to 
Dates (via <code><a href="base.html#topic+as.Date">as.Date</a></code>) and must thus be in an unambiguous 
format.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_alpha">alpha</code></td>
<td>
<p>Either a numerical scalar, a numerical vector of length 
corresponding to the number of units, or the character string <code>"auto"</code>.
If <code>alpha</code> is a numerical scalar (default with value <code>1</code>), a fixed
value for the alpha channel (transparency) is included for all units in 
placebo plots. If <code>alpha</code> is numeric and has length corresponding to the
number of units, these values are assigned as alpha channel to the individual 
units. If <code>"auto"</code>, the alpha channel information is obtained from the
w weights of the control units.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_alpha.min">alpha.min</code></td>
<td>
<p>A numerical scalar (default: <code>0.1</code>). If <code>alpha</code> is
set to <code>"auto"</code>, the individual alpha channel information for control 
unit <code>i</code> is set to <code>alpha.min + (1-alpha.min) * w[i]</code>.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_exclude.units">exclude.units</code></td>
<td>
<p>An optional (default: <code>NULL</code>) character vector with 
names for control units which shall be excluded from placebo plots and
p-value calculations.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_exclude.ratio">exclude.ratio</code></td>
<td>
<p>A numeric scalar (default: <code>Inf</code>). Control units 
with a pre-treatment (r)mspe of more than <code>exclude.ratio</code> times
the pre-treatment (r)mspe of the treated unit are excluded from placebo 
plots and p-value calculations.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_ratio.type">ratio.type</code></td>
<td>
<p>A character string. Either <code>rmspe</code> (default) or 
<code>mspe</code>. Selects whether root mean squared errors or mean squared errors 
are considered for the exclusion of control units (see <code>exclude.ratio</code>).</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_alternative">alternative</code></td>
<td>
<p>A character string giving the alternative of the test for 
plots of type <code>"p.value"</code>. Either <code>"two.sided"</code> (default), 
<code>"less"</code>, or <code>"greater"</code>.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_draw.points">draw.points</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code> (default), points are
added to the line plots to enhance visibility.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_control.name">control.name</code></td>
<td>
<p>A character string for the naming of the non-treated
units in placebo plots. Defaults to <code>"control units"</code>.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_size">size</code></td>
<td>
<p>A numerical scalar (default: <code>1</code>). If <code>draw.points</code> is
<code>TRUE</code> (default), <code>size</code> specifies the size of the points.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_treated.name">treated.name</code></td>
<td>
<p>A character string giving the label for the treated
unit. Defaults to <code>"treated unit"</code>.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_labels">labels</code></td>
<td>
<p>A character vector of length 2 giving the labels for the actual 
and synthesized data. Defaults to <code>c("actual data","synthsized data")</code>.</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_...">...</code></td>
<td>
<p>Necessary to match the definition of the
<code>"ggplot"</code> generic (passed to <code>ggplot</code> as is).</p>
</td></tr>
<tr><td><code id="ggplot.mscmt_+3A_environment">environment</code></td>
<td>
<p>An object necessary to match the definition of the
<code>"ggplot"</code> generic (passed to <code>ggplot</code> as is). Defaults to 
<code>parent.frame()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A unified plot method for gaps plots, comparison of treated and synthetic
values, as well as plots for placebo studies, based on 
<code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>. <code><a href="#topic+ggplot.mscmt">ggplot.mscmt</a></code> is the preferred
plot method and has more functionality than <code><a href="#topic+plot.mscmt">plot.mscmt</a></code>.
</p>


<h3>Value</h3>

<p>An object of class <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>.
</p>

<hr>
<h2 id='improveSynth'>Check (and Improve) Results of Package Synth</h2><span id='topic+improveSynth'></span>

<h3>Description</h3>

<p><code>improveSynth</code> checks the results of <code><a href="Synth.html#topic+synth">synth</a></code>
for feasibility and optimality and tries to find a better solution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>improveSynth(
  synth.out,
  dataprep.out,
  lb = 1e-08,
  tol = 1e-05,
  verbose = TRUE,
  seed = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="improveSynth_+3A_synth.out">synth.out</code></td>
<td>
<p>A result of <code><a href="Synth.html#topic+synth">synth</a></code> from package 
<code>'Synth'</code>.</p>
</td></tr>
<tr><td><code id="improveSynth_+3A_dataprep.out">dataprep.out</code></td>
<td>
<p>The input of function <code><a href="Synth.html#topic+synth">synth</a></code> which
led to <code>synth.out</code>.</p>
</td></tr>
<tr><td><code id="improveSynth_+3A_lb">lb</code></td>
<td>
<p>A numerical scalar (default: <code>1e-8</code>), corresponding to the
lower bound for the outer optimization.</p>
</td></tr>
<tr><td><code id="improveSynth_+3A_tol">tol</code></td>
<td>
<p>A numerical scalar (default: <code>1e-5</code>). If the relative *and*
absolute improvement of <code>loss.v</code> and <code>loss.w</code>, respectively,
exceed <code>tol</code>, this is reported 
(if <code>verbose</code> is <code>TRUE</code>). Better optima are always looked for 
(independent of the value of <code>tol</code>).</p>
</td></tr>
<tr><td><code id="improveSynth_+3A_verbose">verbose</code></td>
<td>
<p>A logical scalar. Should the ouput be verbose (defaults to 
<code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="improveSynth_+3A_seed">seed</code></td>
<td>
<p>A numerical vector or <code>NULL</code>. See the corresponding
documentation for <code><a href="#topic+mscmt">mscmt</a></code>. Defaults to 1 in order to
provide reproducibility of the results.</p>
</td></tr>
<tr><td><code id="improveSynth_+3A_...">...</code></td>
<td>
<p>Further arguments to <code><a href="#topic+mscmt">mscmt</a></code>. Supported 
arguments are <code>check.global</code>, <code>inner.optim</code>, <code>inner.opar</code>, 
<code>outer.optim</code>, and <code>outer.opar</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Performing SCM means solving a nested optimization problem. Depending on
the validity of the results of the inner optimization, SCM may produce
</p>

<ul>
<li><p> invalid or infeasible results, if the vector <code>w</code> of donor 
weights reported as the result of the inner optimization 
is in fact not optimal, ie. produces too large <code>loss.w</code>,
</p>
</li>
<li><p> suboptimal results, if the vector <code>v</code> of predictor weights 
reported as the result of the outer optimization is in fact not
optimal (which may be caused by shortcomings of the inner optimization).
</p>
</li></ul>

<p><code>improveSynth</code> first checks <code>synth.out</code> for feasibility and
then tries to find a feasible and optimal solution by applying the
optimization methods of package <code>MSCMT</code> to <code>dataprep.out</code> 
(with default settings, more flexibility will probably be added in a 
future release).
</p>


<h3>Value</h3>

<p>An updated version of <code>synth.out</code>, where <code>solution.v</code>,
<code>solution.w</code>, <code>loss.v</code>, and <code>loss.w</code> are replaced by the
optimum obtained by package <code>'MSCMT'</code> and all other components 
of <code>synth.out</code> are removed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## check whether package 'Synth' is available
if (require("Synth")) {

## process first example of function "synth" in package 'Synth' 
## (comments are removed):

  data(synth.data)
  dataprep.out&lt;-
    dataprep(
     foo = synth.data,
     predictors = c("X1", "X2", "X3"),
     predictors.op = "mean",
     dependent = "Y",
     unit.variable = "unit.num",
     time.variable = "year",
     special.predictors = list(
        list("Y", 1991, "mean"),
        list("Y", 1985, "mean"),
        list("Y", 1980, "mean")
                              ),
     treatment.identifier = 7,
     controls.identifier = c(29, 2, 13, 17, 32, 38),
     time.predictors.prior = c(1984:1989),
     time.optimize.ssr = c(1984:1990),
     unit.names.variable = "name",
     time.plot = 1984:1996
     )

  synth.out &lt;- synth(dataprep.out)

## check and (try to) improve these results:
  synth2.out &lt;- improveSynth(synth.out,dataprep.out)
}

## End(Not run)
</code></pre>

<hr>
<h2 id='listFromLong'>Convert Long Format to List Format</h2><span id='topic+listFromLong'></span>

<h3>Description</h3>

<p><code>listFromLong</code> converts long to list format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>listFromLong(
  foo,
  unit.variable,
  time.variable,
  unit.names.variable = NULL,
  exclude.columns = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="listFromLong_+3A_foo">foo</code></td>
<td>
<p>A <code>data.frame</code> containing the data in &quot;long&quot; format.</p>
</td></tr>
<tr><td><code id="listFromLong_+3A_unit.variable">unit.variable</code></td>
<td>
<p>Either a numeric scalar with the column number (in 
<code>foo</code>) containing the units or a character scalar with the corresponding
column name in <code>foo</code>.</p>
</td></tr>
<tr><td><code id="listFromLong_+3A_time.variable">time.variable</code></td>
<td>
<p>Either a numeric scalar with the column number (in 
<code>foo</code>) containing the times or a character scalar with the corresponding
column name in <code>foo</code>.</p>
</td></tr>
<tr><td><code id="listFromLong_+3A_unit.names.variable">unit.names.variable</code></td>
<td>
<p>Optional. If not <code>NULL</code>, either a numeric 
scalar with the column number (in <code>foo</code>) containing the unit names or 
a character scalar with  the corresponding column name in <code>foo</code>. Must
match with the units defined by <code>unit.variable</code> (if not <code>NULL</code>).</p>
</td></tr>
<tr><td><code id="listFromLong_+3A_exclude.columns">exclude.columns</code></td>
<td>
<p>Optional (defaults to <code>NULL</code>). Numeric vector 
with column numbers of <code>foo</code> to be excluded from the conversion.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>listFromLong</code> is a convenience function to convert long format
(in a <code><a href="base.html#topic+data.frame">data.frame</a></code>, as used by package 'Synth') to list 
format, where data is stored as a list of matrices.
</p>
<p>Most parameter names are named after their equivalents in the 
<code><a href="Synth.html#topic+dataprep">dataprep</a></code> function of package 'Synth'.
</p>


<h3>Value</h3>

<p>A list of matrices with rows corresponding to the times and columns
corresponding to the unit (or unit names, respectively) for all columns of
<code>foo</code> which are neither excluded nor have a special role as time, unit,
or unit names variable.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (require("Synth")) {
  data(basque)
  Basque &lt;- listFromLong(basque, unit.variable="regionno", 
                         time.variable="year", 
                         unit.names.variable="regionname")
  names(Basque)
  head(Basque$gdpcap)
}
</code></pre>

<hr>
<h2 id='mscmt'>Multivariate SCM Using Time Series</h2><span id='topic+mscmt'></span>

<h3>Description</h3>

<p><code>mscmt</code> performs the Multivariate Synthetic Control Method Using Time 
Series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mscmt(
  data,
  treatment.identifier = NULL,
  controls.identifier = NULL,
  times.dep = NULL,
  times.pred = NULL,
  agg.fns = NULL,
  placebo = FALSE,
  placebo.with.treated = FALSE,
  univariate = FALSE,
  univariate.with.dependent = FALSE,
  check.global = TRUE,
  inner.optim = "wnnlsOpt",
  inner.opar = list(),
  outer.optim = "DEoptC",
  outer.par = list(),
  outer.opar = list(),
  std.v = c("sum", "mean", "min", "max"),
  alpha = NULL,
  beta = NULL,
  gamma = NULL,
  return.ts = TRUE,
  single.v = FALSE,
  verbose = TRUE,
  debug = FALSE,
  seed = NULL,
  cl = NULL,
  times.pred.training = NULL,
  times.dep.validation = NULL,
  v.special = integer(),
  cv.alpha = 0,
  spec.search.treated = FALSE,
  spec.search.placebos = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mscmt_+3A_data">data</code></td>
<td>
<p>Typically, a list of matrices with rows corresponding to times 
and columns corresponding to units for all relevant features (dependent as
well as predictor variables, identified by the list elements' names).
This might be the result of converting from a 
<code><a href="base.html#topic+data.frame">data.frame</a></code>
by using function <code><a href="#topic+listFromLong">listFromLong</a></code>. 
</p>
<p>For convenience, <code>data</code> may alternatively be the 
result of function <code><a href="Synth.html#topic+dataprep">dataprep</a></code> of package 
<code>'Synth'</code>. In this case, the parameters <code>treatment.identifier</code>,
<code>controls.identifier</code>, <code>times.dep</code>, <code>times.pred</code>, 
and <code>agg.fns</code> are ignored, as these input parameters are generated
automatically from <code>data</code>. The parameters <code>univariate</code>, 
<code>alpha</code>, <code>beta</code>, and <code>gamma</code> are ignored by fixing them to 
their defaults.
Using results of <code><a href="Synth.html#topic+dataprep">dataprep</a></code> is experimental, because
the automatic generation of input parameters may fail due to lack of 
information contained in results of <code><a href="Synth.html#topic+dataprep">dataprep</a></code>.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_treatment.identifier">treatment.identifier</code></td>
<td>
<p>A character scalar containing the name of the 
treated unit. 
Must be contained in the column names of the matrices in <code>data</code>.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_controls.identifier">controls.identifier</code></td>
<td>
<p>A character vector containing the names of at 
least two control units.
Entries must be contained in the column names of the matrices in <code>data</code>.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_times.dep">times.dep</code></td>
<td>
<p>A matrix with two rows (containing start times in
the first and end times in the second row) and one column for each dependent
variable, where the column names must exactly match the names of the
corresponding dependent variables. 
A sequence of dates with the given start and end times of
</p>

<ul>
<li><p> annual dates, if the format of start/end time is &quot;dddd&quot;, e.g. &quot;2016&quot;,
</p>
</li>
<li><p> quarterly dates, if the format of start/end time is &quot;ddddQd&quot;, e.g. 
&quot;2016Q1&quot;,
</p>
</li>
<li><p> monthly dates, if the format of start/end time is &quot;dddd?dd&quot; with &quot;?&quot;
different from &quot;W&quot; (see below), e.g. &quot;2016/03&quot; or &quot;2016-10&quot;,
</p>
</li>
<li><p> weekly dates, if the format of start/end time is &quot;ddddWdd&quot;, e.g. 
&quot;2016W23&quot;,
</p>
</li>
<li><p> daily dates, if the format of start/end time is &quot;dddd-dd-dd&quot;, e.g. 
&quot;2016-08-18&quot;,
</p>
</li></ul>

<p>will be constructed; these dates are looked for in the row names of
the respective matrices in <code>data</code>. In applications with 
cross-validation, <code>times.dep</code> belongs to the main period.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_times.pred">times.pred</code></td>
<td>
<p>A matrix with two rows (containing start times in
the first and end times in the second row) and one column for each predictor
variable, where the column names must exactly match the names of the
corresponding predictor variables.
A sequence of dates with the given start and end times of
</p>

<ul>
<li><p> annual dates, if the format of start/end time is &quot;dddd&quot;, e.g. &quot;2016&quot;,
</p>
</li>
<li><p> quarterly dates, if the format of start/end time is &quot;ddddQd&quot;, e.g. 
&quot;2016Q1&quot;,
</p>
</li>
<li><p> monthly dates, if the format of start/end time is &quot;dddd?dd&quot; with &quot;?&quot;
different from &quot;W&quot; (see below), e.g. &quot;2016/03&quot; or &quot;2016-10&quot;,
</p>
</li>
<li><p> weekly dates, if the format of start/end time is &quot;ddddWdd&quot;, e.g. 
&quot;2016W23&quot;,
</p>
</li>
<li><p> daily dates, if the format of start/end time is &quot;dddd-dd-dd&quot;, e.g. 
&quot;2016-08-18&quot;,
</p>
</li></ul>

<p>will be constructed; these dates are looked for in the row names of
the respective matrices in <code>data</code>. In applications with 
cross-validation, <code>times.pred</code> belongs to the main period.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_agg.fns">agg.fns</code></td>
<td>
<p>Either <code>NULL</code> (default) or a character vector containing
one name of an aggregation function for each predictor variable (i.e., each
column of <code>times.pred</code>). The character string &quot;id&quot; may be used as a
&quot;no-op&quot; aggregation. Each aggregation function must accept a numeric vector
and return either a numeric scalar (&quot;classical&quot; MSCM) or a numeric vector 
(leading to MSCM*T* if length of vector is at least two).</p>
</td></tr>
<tr><td><code id="mscmt_+3A_placebo">placebo</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code>, a placebo study is 
performed where, apart from the treated unit, each control unit is considered
as treated unit in separate optimizations. Defaults to <code>FALSE</code>. 
Depending on the number of control units and the complexity of the problem, 
placebo studies may take a long time to finish.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_placebo.with.treated">placebo.with.treated</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code>, the treated
unit is included as control unit (for other treated units in placebo 
studies). Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_univariate">univariate</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code>, a series of univariate
SCMT optimizations is done (instead of one MSCMT optimization) even if
there is more than one dependent variable. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_univariate.with.dependent">univariate.with.dependent</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code> (and if
<code>univariate</code> is also <code>TRUE</code>), all dependent variables (contained
in the column names of <code>times.dep</code>) apart from the current (real) 
dependent variable are included as predictors in the series of univariate
SCMT optimizations. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_check.global">check.global</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code> (default), a check for
the feasibility of the unrestricted outer optimum (where actually no 
restrictions are imposed by the predictor variables) is made before 
starting the actual optimization procedure.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_inner.optim">inner.optim</code></td>
<td>
<p>A character scalar containing the name of the optimization
method for the inner optimization. Defaults to <code>"wnnlsOpt"</code>, which
(currently) is the only supported implementation, because it outperforms
all other inner optimizers we are aware of. 
<code>"ipopOpt"</code>, which uses <code><a href="kernlab.html#topic+ipop">ipop</a></code>, and 
<code>LowRankQPOpt</code>, which uses <code><a href="LowRankQP.html#topic+LowRankQP">LowRankQP</a></code> as inner
optimizer, have experimental support for benchmark purposes.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_inner.opar">inner.opar</code></td>
<td>
<p>A list containing further parameters for the inner 
optimizer. Defaults to the empty list. (For <code>"wnnlsOpt"</code>, there are no
meaningful further parameters.)</p>
</td></tr>
<tr><td><code id="mscmt_+3A_outer.optim">outer.optim</code></td>
<td>
<p>A character vector containing the name(s) of the 
optimization method(s) for the outer optimization. Defaults to 
<code>"DEoptC"</code>, which (currently) is the recommended global optimizer. 
The optimizers currently supported can be found in the documentation of
parameter <code>outer.opar</code>, where the default control parameters for
the various optimizers are listed.
If <code>outer.optim</code> has length greater
than 1, one optimization is invoked for each outer optimizer (and, 
potentially, each random seed, see below), and the best result is used.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_outer.par">outer.par</code></td>
<td>
<p>A list containing further parameters for the outer 
optimization procedure. Defaults to the empty list. Entries in this list may 
override the following hard-coded general defaults:
</p>

<ul>
<li> <p><code>lb=1e-8</code>, corresponding to the lower bound for the ratio of
predictor weights,
</p>
</li>
<li> <p><code>opt.separate=TRUE</code>, corresponding
to an improved outer optimization where each predictor is treated as the 
(potentially) most important predictor (i.e. with maximal weight) in 
separate optimizations (one for each predictor), see [1].
</p>
</li></ul>
</td></tr>
<tr><td><code id="mscmt_+3A_outer.opar">outer.opar</code></td>
<td>
<p>A list (or a list of lists, if <code>outer.optim</code> has
length greater than 1) containing further parameters for the outer 
optimizer(s). Defaults to the empty list. Entries in this list may override
the following hard-coded defaults for the individual optimizers, which
are quite modest concerning the computing time. 
<code>dim</code> is a variable holding the problem dimension, 
typically the number of predictors minus one.
</p>

<table>
<tr>
 <td style="text-align: left;">
<b>Optimizer</b>  </td><td style="text-align: left;"> <b>Package</b>     </td><td style="text-align: left;"> <b>Default parameters</b> </td>
</tr>
<tr>
 <td style="text-align: left;"> 
<code>DEoptC</code>     </td><td style="text-align: left;"> <code>MSCMT</code>       </td><td style="text-align: left;"> <code>nG=500</code>, <code>nP=20*dim</code>, <code>waitgen=100</code>, </td>
</tr>
<tr>
 <td style="text-align: left;">
                  </td><td style="text-align: left;">                    </td><td style="text-align: left;"> <code>minimpr=1e-14</code>, <code>F=0.5</code>, <code>CR=0.9</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>cma_es</code>     </td><td style="text-align: left;"> <code>cmaes</code>       </td><td style="text-align: left;"> <code>maxit=2500</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>crs</code>        </td><td style="text-align: left;"> <code>nloptr</code>      </td><td style="text-align: left;"> <code>maxeval=2.5e4</code>, <code>xtol_rel=1e-14</code>, </td>
</tr>
<tr>
 <td style="text-align: left;">
                  </td><td style="text-align: left;">                    </td><td style="text-align: left;"> <code>population=20*dim</code>, <code>algorithm="NLOPT_GN_CRS2_LM"</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>DEopt</code>      </td><td style="text-align: left;"> <code>NMOF</code>        </td><td style="text-align: left;"> <code>nG=100</code>, <code>nP=20*dim</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>DEoptim</code>    </td><td style="text-align: left;"> <code>DEoptim</code>     </td><td style="text-align: left;"> <code>nP=20*dim</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>ga</code>         </td><td style="text-align: left;"> <code>GA</code>          </td><td style="text-align: left;"> <code>maxiter=50</code>, <code>monitor=FALSE</code>, </td>
</tr>
<tr>
 <td style="text-align: left;">
                  </td><td style="text-align: left;">                    </td><td style="text-align: left;"> <code>popSize=20*dim</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>genoud</code>     </td><td style="text-align: left;"> <code>rgenoud</code>     </td><td style="text-align: left;"> <code>print.level=0</code>, <code>max.generations=70</code>, </td>
</tr>
<tr>
 <td style="text-align: left;">
                  </td><td style="text-align: left;">                    </td><td style="text-align: left;"> <code>solution.tolerance=1e-12</code>, <code>pop.size=20*dim</code>, </td>
</tr>
<tr>
 <td style="text-align: left;">
                  </td><td style="text-align: left;">                    </td><td style="text-align: left;"> <code>wait.generations=dim</code>, <code>boundary.enforcement=2</code>, </td>
</tr>
<tr>
 <td style="text-align: left;">
                  </td><td style="text-align: left;">                    </td><td style="text-align: left;"> <code>gradient.check=FALSE</code>, <code>MemoryMatrix=FALSE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>GenSA</code>      </td><td style="text-align: left;"> <code>GenSA</code>       </td><td style="text-align: left;"> <code>max.call=1e7</code>, <code>max.time=25/dim</code>,  </td>
</tr>
<tr>
 <td style="text-align: left;">
                  </td><td style="text-align: left;">                    </td><td style="text-align: left;"> <code>trace.mat=FALSE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>isres</code>      </td><td style="text-align: left;"> <code>nloptr</code>      </td><td style="text-align: left;"> <code>maxeval=2e4</code>, <code>xtol_rel=1e-14</code>, </td>
</tr>
<tr>
 <td style="text-align: left;">
                  </td><td style="text-align: left;">                    </td><td style="text-align: left;"> <code>population=20*dim</code>, <code>algorithm="NLOPT_GN_ISRES"</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>malschains</code> </td><td style="text-align: left;"> <code>Rmalschains</code> </td><td style="text-align: left;"> <code>popsize=20*dim</code>, <code>maxEvals=25000</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>nlminbOpt</code>  </td><td style="text-align: left;"> <code>MSCMT/stats</code> </td><td style="text-align: left;"> <code>nrandom=30</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>optimOpt</code>   </td><td style="text-align: left;"> <code>MSCMT/stats</code> </td><td style="text-align: left;"> <code>nrandom=25</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>PSopt</code>      </td><td style="text-align: left;"> <code>NMOF</code>        </td><td style="text-align: left;"> <code>nG=100</code>, <code>nP=20*dim</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>psoptim</code>    </td><td style="text-align: left;"> <code>pso</code>         </td><td style="text-align: left;"> <code>maxit=700</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>soma</code>       </td><td style="text-align: left;"> <code>soma</code>        </td><td style="text-align: left;"> <code>nMigrations=100</code> 
</td>
</tr>

</table>

<p>If <code>outer.opar</code> is a list of lists, its names must correspond to (a 
subset of) the outer optimizers chosen in <code>outer.optim</code>.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_std.v">std.v</code></td>
<td>
<p>A character scalar containing one of the function names
&quot;sum&quot;, &quot;mean&quot;, &quot;min&quot;, or &quot;max&quot; for the standardization of the predictor 
weights (weights are divided by <code>std.v(weights)</code> before reporting). 
Defaults to &quot;sum&quot;, partial matching allowed.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_alpha">alpha</code></td>
<td>
<p>A numerical vector with weights for the dependent variables
in an MSCMT optimization or <code>NULL</code> (default). If not <code>NULL</code>,
the length of <code>alpha</code> must agree with the number of dependent
variables, <code>NULL</code> is equivalent to weight 1 for all dependent 
variables.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_beta">beta</code></td>
<td>
<p>Either <code>NULL</code> (default), a numerical vector, or a list.
If <code>beta</code> is a numerical vector or a list, its length must agree
with the number of dependent variables. 
</p>

<ul>
<li><p> If <code>beta</code> is a numerical vector,
the <code>i</code>th dependent variable is discounted with discount factor 
<code>beta[i]</code> (the observations of the dependent variables must thus be 
in chronological order!). 
</p>
</li>
<li><p> If <code>beta</code> is a list, the components of <code>beta</code> must be 
numerical vectors with lengths corresponding to the numbers of observations 
for the individual dependent variables. These observations are then 
multiplied with the corresponding component of <code>beta</code>.
</p>
</li></ul>
</td></tr>
<tr><td><code id="mscmt_+3A_gamma">gamma</code></td>
<td>
<p>Either <code>NULL</code> (default), a numerical vector, or a list.
If <code>gamma</code> is a numerical vector or a list, its length must agree
with the number of predictor variables. 
</p>

<ul>
<li><p> If <code>gamma</code> is a numerical vector,
the output of <code>agg.fns[i]</code> applied to the <code>i</code>th predictor variable
is discounted with discount factor <code>gamma[i]</code> (the output of 
<code>agg.fns[i]</code> must therefore be in chronological order!). 
</p>
</li>
<li><p> If <code>gamma</code> is a list, the components of <code>gamma</code> must be 
numerical vectors with lengths corresponding to the lengths of the output of 
<code>agg.fns</code> for the individual predictor variables. The output of 
<code>agg.fns</code> is then multiplied with the corresponding component of 
<code>gamma</code>.
</p>
</li></ul>
</td></tr>
<tr><td><code id="mscmt_+3A_return.ts">return.ts</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code> (default), most results are
converted to time series.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_single.v">single.v</code></td>
<td>
<p>A logical scalar. If <code>FALSE</code> (default), a selection
of feasible (optimal!) predictor weight vectors is generated. If <code>TRUE</code>, 
the one optimal weight vector which has maximal order statistics is generated 
to facilitate cross validation studies.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_verbose">verbose</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code> (default), output is verbose.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_debug">debug</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code>, output is very verbose. 
Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_seed">seed</code></td>
<td>
<p>A numerical vector or <code>NULL</code>. If not <code>NULL</code>, the
random number generator is initialized with the elements of <code>seed</code> via
<code>set.seed(seed)</code> (see <a href="base.html#topic+Random">Random</a>) before
calling the optimizer, performing repeated optimizations (and staying with 
the best) if <code>seed</code> has length greater than 1. Defaults to <code>NULL</code>. 
If not <code>NULL</code>, the seeds <code>int.seed</code> (default: 53058) and 
<code>unif.seed</code> (default: 812821) for <code><a href="rgenoud.html#topic+genoud">genoud</a></code> are 
also initialized to the corresponding element of <code>seed</code>, but this can 
be overridden with the list elements <code>int.seed</code> and <code>unif.seed</code> 
of (the corresponding element of) <code>outer.opar</code>.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_cl">cl</code></td>
<td>
<p><code>NULL</code> (default) or an object of class <code>cluster</code>
obtained by <code><a href="parallel.html#topic+makeCluster">makeCluster</a></code> of package <code>parallel</code>. 
Repeated estimations (see <code>outer.optim</code> and <code>seed</code>) and
placebo studies will make use of the cluster <code>cl</code> (if not <code>NULL</code>).</p>
</td></tr>
<tr><td><code id="mscmt_+3A_times.pred.training">times.pred.training</code></td>
<td>
<p>A matrix with two rows (containing start times in
the first and end times in the second row) and one column for each predictor
variable, where the column names must exactly match the names of the
corresponding predictor variables (or <code>NULL</code> by default).
If not <code>NULL</code>, <code>times.pred.training</code> defines training periods
for cross-validation applications. For the format of the start and end times,
see the documentation of parameter <code>times.pred</code>.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_times.dep.validation">times.dep.validation</code></td>
<td>
<p>A matrix with two rows (containing start times in
the first and end times in the second row) and one column for each dependent
variable, where the column names must exactly match the names of the
corresponding dependent variables (or <code>NULL</code> by default). 
If not <code>NULL</code>, <code>times.dep.validation</code> defines validation period(s)
for cross-validation applications. For the format of the start and end times,
see the documentation of parameter <code>times.dep</code>.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_v.special">v.special</code></td>
<td>
<p>integer vector containing indices of important predictors
with special treatment (see below). Defaults to the empty set.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_cv.alpha">cv.alpha</code></td>
<td>
<p>numeric scalar containing the minimal proportion (of the
maximal feasible weight) for the weights of the predictors selected by 
<code>v.special</code>. Defaults to <code>0</code>.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_spec.search.treated">spec.search.treated</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code>, a specification 
search (for the optimal set of included predictors) is done for the treated unit. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="mscmt_+3A_spec.search.placebos">spec.search.placebos</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code>, a specification 
search (for the optimal set of included predictors) is done for the control unit. Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mscmt</code> combines, if necessary, the preparation of the raw data (which 
is expected to be in &quot;list&quot; format, possibly after conversion from a 
<code><a href="base.html#topic+data.frame">data.frame</a></code>
with function <code><a href="#topic+listFromLong">listFromLong</a></code>) and the call to the appropriate
MSCMT optimization procedures (depending on the input parameters).
For details on the input parameters <code>alpha</code>, <code>beta</code>, and 
<code>gamma</code>, see [1]. For details on cross-validation, see [2].
</p>


<h3>Value</h3>

<p>An object of class <code>"mscmt"</code>, which is essentially a list
containing the results of the estimation and, if applicable, the placebo
study.
The most important list elements are 
</p>

<ul>
<li><p> the weight vector <code>w</code> for the control units,
</p>
</li>
<li><p> a matrix <code>v</code> with weight vectors for the predictors in its 
columns,
</p>
</li>
<li><p> scalars <code>loss.v</code> and <code>rmspe</code> with the dependent loss and its 
square root,
</p>
</li>
<li><p> a vector <code>loss.w</code> with the predictor losses corresponding to the
various weight vectors in the columns of <code>v</code>,
</p>
</li>
<li><p> a matrix <code>predictor.table</code> containing aggregated statistics of
predictor values (similar to list element <code>tab.pred</code> of 
function <code><a href="Synth.html#topic+synth.tab">synth.tab</a></code> of package <code>'Synth'</code>),
</p>
</li>
<li><p> a list of multivariate time series <code>combined</code> containing, 
for each dependent and predictor variable, a multivariate time series 
with elements <code>treated</code> for the actual values of the treated unit,
<code>synth</code> for the synthesized values, and <code>gaps</code> for the differences.
</p>
</li></ul>

<p>Placebo studies produce a list containing individual results for each 
unit (as treated unit), starting with the original treated unit, as well
as a list element named <code>placebo</code> with aggregated results for each
dependent and predictor variable.
</p>
<p>If <code>times.pred.training</code> and <code>times.dep.validation</code> are not 
<code>NULL</code>, a cross-validation is done and a list of elements <code>cv</code>
with the results of the cross-validation period and <code>main</code> with
the results of the main period is returned.
</p>


<h3>References</h3>

<p>[1] Becker M, Klößner S (2018).
&ldquo;Fast and Reliable Computation of Generalized Synthetic Controls.&rdquo;
<em>Econometrics and Statistics</em>, <b>5</b>, 1&ndash;19.
<a href="https://doi.org/10.1016/j.ecosta.2017.08.002">https://doi.org/10.1016/j.ecosta.2017.08.002</a>. 
</p>
<p>[2] Becker M, Klößner S, Pfeifer G (2018).
&ldquo;Cross-Validating Synthetic Controls.&rdquo;
<em>Economics Bulletin</em>, <b>38</b>, 603-609.
Working Paper, <a href="http://www.accessecon.com/Pubs/EB/2018/Volume38/EB-18-V38-I1-P58.pdf">http://www.accessecon.com/Pubs/EB/2018/Volume38/EB-18-V38-I1-P58.pdf</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## for examples, see the package vignettes:
browseVignettes(package="MSCMT")

## End(Not run)
</code></pre>

<hr>
<h2 id='plot.mscmt'>Plotting Results of MSCMT</h2><span id='topic+plot.mscmt'></span>

<h3>Description</h3>

<p><code>plot.mscmt</code> plots results of <code>mscmt</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mscmt'
plot(
  x,
  what,
  type = c("gaps", "comparison", "placebo.gaps", "placebo.data"),
  treatment.time,
  zero.line = TRUE,
  ylab,
  xlab = "Date",
  main,
  sub,
  col,
  lty,
  lwd,
  legend = TRUE,
  bw = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.mscmt_+3A_x">x</code></td>
<td>
<p>An object of class <code>"mscmt"</code>, usually obtained as
the result of a call to function <code><a href="#topic+mscmt">mscmt</a></code>.</p>
</td></tr>
<tr><td><code id="plot.mscmt_+3A_what">what</code></td>
<td>
<p>A character scalar. Name of the variable to be plotted. If 
missing, the (first) dependent variable will be used.</p>
</td></tr>
<tr><td><code id="plot.mscmt_+3A_type">type</code></td>
<td>
<p>A character scalar denoting the type of the plot containing 
either <code>"gaps"</code>, <code>"comparison"</code>, <code>"placebo.gaps"</code>, 
or <code>"placebo.data"</code>. 
Partial matching allowed, defaults to <code>"placebo.gaps"</code>, if results
of a placebo study are present, and to <code>"gaps"</code>, else.</p>
</td></tr>
<tr><td><code id="plot.mscmt_+3A_treatment.time">treatment.time</code></td>
<td>
<p>An optional numerical scalar. If not missing, a 
vertical dotted line at the given point in time is included in the plot. 
<code>treatment.time</code> is measured in years, but may as well be a decimal 
number to reflect treatment times different from January 1st.</p>
</td></tr>
<tr><td><code id="plot.mscmt_+3A_zero.line">zero.line</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code> (default), a horizontal
dotted line (at zero level) is plotted for <code>"gaps"</code> and <code>"placebo"</code>
plots.</p>
</td></tr>
<tr><td><code id="plot.mscmt_+3A_ylab">ylab</code></td>
<td>
<p>Optional label for the y-axis, automatically generated if 
missing.</p>
</td></tr>
<tr><td><code id="plot.mscmt_+3A_xlab">xlab</code></td>
<td>
<p>Optional label for the x-axis, defaults to <code>"Date"</code>.</p>
</td></tr>
<tr><td><code id="plot.mscmt_+3A_main">main</code></td>
<td>
<p>Optional main title for the plot, automatically generated 
if missing.</p>
</td></tr>
<tr><td><code id="plot.mscmt_+3A_sub">sub</code></td>
<td>
<p>Optional subtitle for the plot. If missing, the subtitle is 
generated automatically for <code>"comparison"</code> and <code>"gaps"</code> plots.</p>
</td></tr>
<tr><td><code id="plot.mscmt_+3A_col">col</code></td>
<td>
<p>Optional character vector with length corresponding to the number
of units. Contains the colours for the different units, automatically 
generated if missing.</p>
</td></tr>
<tr><td><code id="plot.mscmt_+3A_lty">lty</code></td>
<td>
<p>Optional numerical vector with length corresponding to the number
of units. Contains the line types for the different units, automatically 
generated if missing.</p>
</td></tr>
<tr><td><code id="plot.mscmt_+3A_lwd">lwd</code></td>
<td>
<p>Optional numerical vector with length corresponding to the number
of units. Contains the line widths for the different units, automatically 
generated if missing.</p>
</td></tr>
<tr><td><code id="plot.mscmt_+3A_legend">legend</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code> (default), a legend is 
included in the plot.</p>
</td></tr>
<tr><td><code id="plot.mscmt_+3A_bw">bw</code></td>
<td>
<p>A logical scalar. If <code>FALSE</code> (default), the automatically 
generated colours and line types are optimized for a colour plot, 
if <code>TRUE</code>, the automatic colours and line types are set for a black and
white plot.</p>
</td></tr>
<tr><td><code id="plot.mscmt_+3A_...">...</code></td>
<td>
<p>Further optional parameters for the underlying 
<code><a href="graphics.html#topic+plot">plot</a></code> function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A unified basic plot function for gaps plots, comparison of treated and 
synthetic values, as well as plots for placebo studies.
Consider using <code><a href="#topic+ggplot.mscmt">ggplot.mscmt</a></code> instead, which is the preferred
plot method and has more functionality than <code><a href="#topic+plot.mscmt">plot.mscmt</a></code>.
</p>


<h3>Value</h3>

<p>Nothing useful (function is called for its side effects).
</p>

<hr>
<h2 id='ppratio'>Post-pre-(r)mspe-ratios for placebo studies</h2><span id='topic+ppratio'></span>

<h3>Description</h3>

<p><code>ppratio</code> calculates post-to-pre-(r)mspe-ratios for placebo studies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ppratio(
  x,
  what,
  range.pre,
  range.post,
  type = c("rmspe", "mspe"),
  return.all = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ppratio_+3A_x">x</code></td>
<td>
<p>An object of class <code>"mscmt"</code>, usually obtained as
the result of a call to function <code><a href="#topic+mscmt">mscmt</a></code>.</p>
</td></tr>
<tr><td><code id="ppratio_+3A_what">what</code></td>
<td>
<p>A character vector. Name of the variable to be considered. If 
missing, the (first) dependent variable will be used.</p>
</td></tr>
<tr><td><code id="ppratio_+3A_range.pre">range.pre</code></td>
<td>
<p>A vector of length 2 defining the range of the pre-treatment
period with start and end time given as 
</p>

<ul>
<li><p> annual dates, if the format of start/end time is &quot;dddd&quot;, e.g. &quot;2016&quot;,
</p>
</li>
<li><p> quarterly dates, if the format of start/end time is &quot;ddddQd&quot;, e.g. 
&quot;2016Q1&quot;,
</p>
</li>
<li><p> monthly dates, if the format of start/end time is &quot;dddd?dd&quot; with &quot;?&quot;
different from &quot;W&quot; (see below), e.g. &quot;2016/03&quot; or &quot;2016-10&quot;,
</p>
</li>
<li><p> weekly dates, if the format of start/end time is &quot;ddddWdd&quot;, e.g. 
&quot;2016W23&quot;,
</p>
</li>
<li><p> daily dates, if the format of start/end time is &quot;dddd-dd-dd&quot;, e.g. 
&quot;2016-08-18&quot;,
</p>
</li></ul>

<p>corresponding to the format of the respective column of the <code>times.dep</code>
argument of <code><a href="#topic+mscmt">mscmt</a></code>.
If missing, the corresponding column of <code>times.dep</code> will be used.</p>
</td></tr>
<tr><td><code id="ppratio_+3A_range.post">range.post</code></td>
<td>
<p>A vector of length 2 defining the range of the 
post-treatment period with start and end time given as 
</p>

<ul>
<li><p> annual dates, if the format of start/end time is &quot;dddd&quot;, e.g. &quot;2016&quot;,
</p>
</li>
<li><p> quarterly dates, if the format of start/end time is &quot;ddddQd&quot;, e.g. 
&quot;2016Q1&quot;,
</p>
</li>
<li><p> monthly dates, if the format of start/end time is &quot;dddd?dd&quot; with &quot;?&quot;
different from &quot;W&quot; (see below), e.g. &quot;2016/03&quot; or &quot;2016-10&quot;,
</p>
</li>
<li><p> weekly dates, if the format of start/end time is &quot;ddddWdd&quot;, e.g. 
&quot;2016W23&quot;,
</p>
</li>
<li><p> daily dates, if the format of start/end time is &quot;dddd-dd-dd&quot;, e.g. 
&quot;2016-08-18&quot;,
</p>
</li></ul>

<p>corresponding to the format of the respective column of the <code>times.dep</code>
argument of <code><a href="#topic+mscmt">mscmt</a></code>. Will be guessed if missing.</p>
</td></tr>
<tr><td><code id="ppratio_+3A_type">type</code></td>
<td>
<p>A character string. Either <code>rmspe</code> (default) or <code>mspe</code>.
Selects whether root mean squared errors or mean squared errors are 
calculated.</p>
</td></tr>
<tr><td><code id="ppratio_+3A_return.all">return.all</code></td>
<td>
<p>A logical scalar. If <code>FALSE</code> (default), only the
(named) vector of post-pre-(r)mspe-ratios is returned, if <code>TRUE</code>,
a three-column matrix with pre- and post-treatment (r)mspe's as well as the 
post-pre-ratios will be returned.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>ppratio</code> calculates post-to-pre-(r)mspe-ratios for placebo studies based
on Synthetic Control Methods.
</p>


<h3>Value</h3>

<p>If <code>return.all</code> is <code>FALSE</code>, a (named) vector of 
post-pre-(r)mspe-ratios. If <code>return.all</code> is <code>TRUE</code>, a matrix with
three columns containing the pre-treatment (r)mspe, the post-treatment 
(r)mspe, and the post-pre-ratio.
</p>

<hr>
<h2 id='print.mscmt'>Printing Results of MSCMT</h2><span id='topic+print.mscmt'></span>

<h3>Description</h3>

<p><code>print.mscmt</code> prints results of <code>mscmt</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mscmt'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.mscmt_+3A_x">x</code></td>
<td>
<p>An object of class <code>"mscmt"</code>, usually obtained as
the result of a call to function <code><a href="#topic+mscmt">mscmt</a></code>.</p>
</td></tr>
<tr><td><code id="print.mscmt_+3A_...">...</code></td>
<td>
<p>Further arguments to be passed to or from other methods. 
They are ignored in this function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A human-readable summary of <code>mscmt</code>'s results.
</p>


<h3>Value</h3>

<p>Nothing useful (function is called for its side effects).
</p>

<hr>
<h2 id='pvalue'>P-values for placebo studies</h2><span id='topic+pvalue'></span>

<h3>Description</h3>

<p><code>pvalue</code> calculates p-values for placebo studies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pvalue(
  x,
  what,
  range.pre,
  range.post,
  alternative = c("two.sided", "less", "greater"),
  exclude.ratio = Inf,
  ratio.type = c("rmspe", "mspe")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pvalue_+3A_x">x</code></td>
<td>
<p>An object of class <code>"mscmt"</code>, usually obtained as
the result of a call to function <code><a href="#topic+mscmt">mscmt</a></code>.</p>
</td></tr>
<tr><td><code id="pvalue_+3A_what">what</code></td>
<td>
<p>A character vector. Name of the variable to be considered. If 
missing, the (first) dependent variable will be used.</p>
</td></tr>
<tr><td><code id="pvalue_+3A_range.pre">range.pre</code></td>
<td>
<p>A vector of length 2 defining the range of the pre-treatment
period with start and end time given as 
</p>

<ul>
<li><p> annual dates, if the format of start/end time is &quot;dddd&quot;, e.g. &quot;2016&quot;,
</p>
</li>
<li><p> quarterly dates, if the format of start/end time is &quot;ddddQd&quot;, e.g. 
&quot;2016Q1&quot;,
</p>
</li>
<li><p> monthly dates, if the format of start/end time is &quot;dddd?dd&quot; with &quot;?&quot;
different from &quot;W&quot; (see below), e.g. &quot;2016/03&quot; or &quot;2016-10&quot;,
</p>
</li>
<li><p> weekly dates, if the format of start/end time is &quot;ddddWdd&quot;, e.g. 
&quot;2016W23&quot;,
</p>
</li>
<li><p> daily dates, if the format of start/end time is &quot;dddd-dd-dd&quot;, e.g. 
&quot;2016-08-18&quot;,
</p>
</li></ul>

<p>corresponding to the format of the respective column of the <code>times.dep</code>
argument of <code><a href="#topic+mscmt">mscmt</a></code>.
If missing, the corresponding column of <code>times.dep</code> will be used.</p>
</td></tr>
<tr><td><code id="pvalue_+3A_range.post">range.post</code></td>
<td>
<p>A vector of length 2 defining the range of the 
post-treatment period with start and end time given as 
</p>

<ul>
<li><p> annual dates, if the format of start/end time is &quot;dddd&quot;, e.g. &quot;2016&quot;,
</p>
</li>
<li><p> quarterly dates, if the format of start/end time is &quot;ddddQd&quot;, e.g. 
&quot;2016Q1&quot;,
</p>
</li>
<li><p> monthly dates, if the format of start/end time is &quot;dddd?dd&quot; with &quot;?&quot;
different from &quot;W&quot; (see below), e.g. &quot;2016/03&quot; or &quot;2016-10&quot;,
</p>
</li>
<li><p> weekly dates, if the format of start/end time is &quot;ddddWdd&quot;, e.g. 
&quot;2016W23&quot;,
</p>
</li>
<li><p> daily dates, if the format of start/end time is &quot;dddd-dd-dd&quot;, e.g. 
&quot;2016-08-18&quot;,
</p>
</li></ul>

<p>corresponding to the format of the respective column of the <code>times.dep</code>
argument of <code><a href="#topic+mscmt">mscmt</a></code>. Will be guessed if missing.</p>
</td></tr>
<tr><td><code id="pvalue_+3A_alternative">alternative</code></td>
<td>
<p>A character string giving the alternative of the test. 
Either <code>"two.sided"</code> (default), <code>"less"</code>, or <code>"greater"</code>.</p>
</td></tr>
<tr><td><code id="pvalue_+3A_exclude.ratio">exclude.ratio</code></td>
<td>
<p>A numerical scalar (default: <code>Inf</code>). Control units
with a pre-treatment-(r)mspe of more than <code>exclude.ratio</code> times the
pre-treatment-(r)mspe of the treated unit are excluded from the calculations
of the p-value.</p>
</td></tr>
<tr><td><code id="pvalue_+3A_ratio.type">ratio.type</code></td>
<td>
<p>A character string. Either <code>rmspe</code> (default) or 
<code>mspe</code>. 
Selects whether root mean squared errors or mean squared errors are 
calculated.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>pvalue</code> calculates p-values for placebo studies based
on Synthetic Control Methods.
</p>


<h3>Value</h3>

<p>A time series containing the p-values for the 
post-treatment periods.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## for an example, see the main package vignette:
 vignette("WorkingWithMSCMT",package="MSCMT")

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
