<!DOCTYPE html><html><head><title>Help for package cmhc</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {cmhc}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cmhc_cma_translation_data'><p>A dataset with geographic identifiers for CMHC and Census at the CMA level</p></a></li>
<li><a href='#cmhc_csd_translation_data'><p>A dataset with geographic identifiers for CMHC and Census at the CSD level</p></a></li>
<li><a href='#cmhc_csd_translation_data_2023'><p>A dataset with geographic identifiers for CMHC and Census at the CSD level for 2023 data portal version</p></a></li>
<li><a href='#cmhc_ct_translation_data'><p>A dataset with geographic identifiers for CMHC and Census at the CT level</p></a></li>
<li><a href='#cmhc_quality_labels'><p>A list of CMHC quality indicators</p></a></li>
<li><a href='#get_cmhc'><p>Access CMHC data via the HMIP.</p></a></li>
<li><a href='#get_cmhc_geography'><p>Get CMHC geographies for CMHC Survey Zones and Neighbourhoods</p></a></li>
<li><a href='#list_cmhc_breakdowns'><p>List available CMHC breakdowns</p></a></li>
<li><a href='#list_cmhc_dimensions'><p>List available CMHC dimensions</p></a></li>
<li><a href='#list_cmhc_filters'><p>List available CMHC filters</p></a></li>
<li><a href='#list_cmhc_series'><p>List available CMHC series</p></a></li>
<li><a href='#list_cmhc_surveys'><p>List available CMHC surveys</p></a></li>
<li><a href='#list_cmhc_tables'><p>List available CMHC tables</p></a></li>
<li><a href='#select_cmhc_table'><p>Interactive table selector</p></a></li>
<li><a href='#set_cmhc_cache_path'><p>Set persistent cmhc cache location for geographic data</p></a></li>
<li><a href='#show_cmhc_cache_path'><p>View saved cache directory path</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Access, Retrieve, and Work with CMHC Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.7</td>
</tr>
<tr>
<td>Author:</td>
<td>Jens von Bergmann</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jens von Bergmann &lt;jens@mountainmath.ca&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Wrapper around the Canadian Mortgage and Housing Corporation (CMHC) web interface. It enables programmatic and reproducible access to a wide variety of housing data from CMHC.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr (&ge; 1.0), digest (&ge; 0.1), httr, readr, stringr, tibble,
rlang, aws.s3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, scales, cancensus, ggplot2, tidyr, rmarkdown, sf</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/mountainMath/cmhc">https://github.com/mountainMath/cmhc</a>,
<a href="https://mountainmath.github.io/cmhc/">https://mountainmath.github.io/cmhc/</a>,
<a href="https://www03.cmhc-schl.gc.ca/hmip-pimh/en">https://www03.cmhc-schl.gc.ca/hmip-pimh/en</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/mountainMath/cmhc/issues">https://github.com/mountainMath/cmhc/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-13 18:54:43 UTC; jens</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-13 19:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='cmhc_cma_translation_data'>A dataset with geographic identifiers for CMHC and Census at the CMA level</h2><span id='topic+cmhc_cma_translation_data'></span>

<h3>Description</h3>

<p>A dataset with geographic identifiers for CMHC and Census at the CMA level
</p>


<h3>Format</h3>

<p>A tibble with Census and CMHC geographic identifiers
</p>


<h3>Author(s)</h3>

<p>derived from CMHC geographic data
</p>


<h3>Source</h3>

<p>Custom data extract from CMHC
</p>

<hr>
<h2 id='cmhc_csd_translation_data'>A dataset with geographic identifiers for CMHC and Census at the CSD level</h2><span id='topic+cmhc_csd_translation_data'></span>

<h3>Description</h3>

<p>A dataset with geographic identifiers for CMHC and Census at the CSD level
</p>


<h3>Format</h3>

<p>A tibble with Census and CMHC geographic identifiers
</p>


<h3>Author(s)</h3>

<p>derived from CMHC geographic data
</p>


<h3>Source</h3>

<p>Custom data extract from CMHC
</p>

<hr>
<h2 id='cmhc_csd_translation_data_2023'>A dataset with geographic identifiers for CMHC and Census at the CSD level for 2023 data portal version</h2><span id='topic+cmhc_csd_translation_data_2023'></span>

<h3>Description</h3>

<p>A dataset with geographic identifiers for CMHC and Census at the CSD level for 2023 data portal version
</p>


<h3>Format</h3>

<p>A tibble with Census CSD and CMHC METID geographic identifiers
</p>


<h3>Author(s)</h3>

<p>derived from CMHC data
</p>


<h3>Source</h3>

<p>Custom data extract from CMHC
</p>

<hr>
<h2 id='cmhc_ct_translation_data'>A dataset with geographic identifiers for CMHC and Census at the CT level</h2><span id='topic+cmhc_ct_translation_data'></span>

<h3>Description</h3>

<p>A dataset with geographic identifiers for CMHC and Census at the CT level
</p>


<h3>Format</h3>

<p>A tibble with Census and CMHC geographic identifiers
</p>


<h3>Author(s)</h3>

<p>derived from CMHC geographic data
</p>


<h3>Source</h3>

<p>Custom data extract from CMHC
</p>

<hr>
<h2 id='cmhc_quality_labels'>A list of CMHC quality indicators</h2><span id='topic+cmhc_quality_labels'></span>

<h3>Description</h3>

<p>Data obtained via this package will automatically translate internal CMHC quality labels
using this translation vector, this named vector is useful when working with CMHC data obtained from other
sources like sporadic excel sheets or data scraped from PDF reports.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cmhc_quality_labels
</code></pre>


<h3>Format</h3>

<p>A named vector to translate internal CMHC quality indicators to plain text.
</p>

<hr>
<h2 id='get_cmhc'>Access CMHC data via the HMIP.</h2><span id='topic+get_cmhc'></span>

<h3>Description</h3>

<p>The data access needs to specify the survey, series, dimension (if any), and breakdown to specify the
CMHC table to pull the data from. The 'list_cmhc_tables()' function can be used to list all the tables available
via this package. Snapshot data needs to specify the year, or if it is monthly data the month. Time series data, i.e.
when  'breakdown=&quot;Historical Time Series' is specified, does not need year or month parameters, but may have the
frequency parameter set. Filters provide additional ways to filter the tables by sub-categories.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_cmhc(
  survey,
  series,
  dimension,
  breakdown,
  geoFilter = "Default",
  geo_uid,
  year = NULL,
  month = NULL,
  frequency = NULL,
  filters = list(),
  refresh = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_cmhc_+3A_survey">survey</code></td>
<td>
<p>The CMHC survey, one of &quot;Scss&quot;, &quot;Rms&quot;, &quot;Srms&quot;, and &quot;Seniors&quot;,  consult 'list_cmhc_surveys()' for possible values.
(Other surveys and more data series may be supported in future versions.)</p>
</td></tr>
<tr><td><code id="get_cmhc_+3A_series">series</code></td>
<td>
<p>The CMHC data series of the survey, consult 'list_cmhc_series()' for possible values.</p>
</td></tr>
<tr><td><code id="get_cmhc_+3A_dimension">dimension</code></td>
<td>
<p>The dimension to show in the results, consult 'list_cmhc_dimensions()' for possible values.</p>
</td></tr>
<tr><td><code id="get_cmhc_+3A_breakdown">breakdown</code></td>
<td>
<p>The geographic breakdown, one of &quot;Survey Zones&quot;, &quot;Census Subdivision&quot;, &quot;Neighbourhoods&quot;, &quot;Census Tracts&quot;,
if querying data for a snapshot in time or &quot;Historical Time Periods&quot; if querying time series data. Not all geographic breakdowns are available for all series.
returns data frame with CMHC data, tile and subtitle are set as attributes.  Consult 'list_cmhc_breakdowns()' for possible values.</p>
</td></tr>
<tr><td><code id="get_cmhc_+3A_geofilter">geoFilter</code></td>
<td>
<p>optional geographic type, only relevaent for provincial and Canada-wide tables. Options are &quot;Default&quot; (the default)
which considers accesses the default tables which should be used for data at the metro area or finer geographies. The other designaters
are only useful when used in conjunction with 'geo_uid's for provinces or all of Canada. Specifying &quot;All&quot;  will
give data for all sub-regions, &quot;Metro&quot;, which only considers data in metro areas, &quot;50k&quot; and &quot;10k&quot;, which only considers data from metro areas and agglomerations with at least
50k or 10k people, respectively.</p>
</td></tr>
<tr><td><code id="get_cmhc_+3A_geo_uid">geo_uid</code></td>
<td>
<p>Census geographic identifier for which to query the data. Can be a census tract, census subdivision,
or census metropolitan area.</p>
</td></tr>
<tr><td><code id="get_cmhc_+3A_year">year</code></td>
<td>
<p>optional, only needed when querying data for a snapshot in time.</p>
</td></tr>
<tr><td><code id="get_cmhc_+3A_month">month</code></td>
<td>
<p>optional, only needed when querying data for a snapshot in time.</p>
</td></tr>
<tr><td><code id="get_cmhc_+3A_frequency">frequency</code></td>
<td>
<p>optional, only needed when querying time series data, one of &quot;Monthly&quot;, &quot;Quarterly&quot; or &quot;Annual&quot;.</p>
</td></tr>
<tr><td><code id="get_cmhc_+3A_filters">filters</code></td>
<td>
<p>optional list of filters, consult 'list_cmhc_filters()' for possible values.</p>
</td></tr>
<tr><td><code id="get_cmhc_+3A_refresh">refresh</code></td>
<td>
<p>optional, refresh the temporary local cache of the CMHC tables. Defaults to 'FALSE'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with the data in long form.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data &lt;- get_cmhc("Rms","Vacancy Rate","Bedroom Type","Historical Time Periods","5915022")

## End(Not run)
</code></pre>

<hr>
<h2 id='get_cmhc_geography'>Get CMHC geographies for CMHC Survey Zones and Neighbourhoods</h2><span id='topic+get_cmhc_geography'></span>

<h3>Description</h3>

<p>The data can be queried for Census Tracts, Survey Zones, Neighbourhoods, Census Subdivisions and Metropolitan Areas,
but it's most useful for Survey Zones, Neighbourhoods which are particular to CMHC and not available from other sources.
The geographic data corresponds to an extract from 2017, and won't necessarily match regions from other years. The Survey Zones
and Neighbourhoods have been quite stable, but census geographies change over time and can be matched with geographic
data obtained by using the 'cancensus' package.
</p>
<p>The geographic data is quite large and a local cache directory needs to be provided. By default the
&quot;CMHC_CACHE_PATH&quot; environment variable is used to determine the cache directory, it can be set via the
'set_cache_path' function. The geographic data will take up about 55Mb of disk space.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_cmhc_geography(
  level = c("CT", "ZONE", "NBHD", "CSD", "MET"),
  base_directory = Sys.getenv("CMHC_CACHE_PATH")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_cmhc_geography_+3A_level">level</code></td>
<td>
<p>aggregation level for geographic data, one of &quot;CT&quot;,&quot;ZONE&quot;,&quot;NBHD&quot;,&quot;CSD&quot;,&quot;MET&quot;</p>
</td></tr>
<tr><td><code id="get_cmhc_geography_+3A_base_directory">base_directory</code></td>
<td>
<p>local directory to hold CMHC geography data, by default this is inferred from the
CMHC_CACHE_PATH environment variable. To use this function a local data directory has to be set.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A spatial data frame with the geographies for the specified geographic level.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
get_cmhc_geography("ZONE")

## End(Not run)

</code></pre>

<hr>
<h2 id='list_cmhc_breakdowns'>List available CMHC breakdowns</h2><span id='topic+list_cmhc_breakdowns'></span>

<h3>Description</h3>

<p>List available CMHC breakdowns
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_cmhc_breakdowns(survey = NULL, series = NULL, dimension = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="list_cmhc_breakdowns_+3A_survey">survey</code></td>
<td>
<p>Optional survey to filter by</p>
</td></tr>
<tr><td><code id="list_cmhc_breakdowns_+3A_series">series</code></td>
<td>
<p>Optional series to filter by</p>
</td></tr>
<tr><td><code id="list_cmhc_breakdowns_+3A_dimension">dimension</code></td>
<td>
<p>Optional dimension to filter by</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with survey names, series names, dimension names and available series breakdowns.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>list_cmhc_breakdowns("Rms","Vacancy Rate","Bedroom Type")

</code></pre>

<hr>
<h2 id='list_cmhc_dimensions'>List available CMHC dimensions</h2><span id='topic+list_cmhc_dimensions'></span>

<h3>Description</h3>

<p>List available CMHC dimensions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_cmhc_dimensions(survey = NULL, series = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="list_cmhc_dimensions_+3A_survey">survey</code></td>
<td>
<p>Optional survey to filter by</p>
</td></tr>
<tr><td><code id="list_cmhc_dimensions_+3A_series">series</code></td>
<td>
<p>Optional series to filter by</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with survey names, series names, and available dimension names.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>list_cmhc_dimensions("Rms","Vacancy Rate")

</code></pre>

<hr>
<h2 id='list_cmhc_filters'>List available CMHC filters</h2><span id='topic+list_cmhc_filters'></span>

<h3>Description</h3>

<p>List available CMHC filters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_cmhc_filters(
  survey = NULL,
  series = NULL,
  dimension = NULL,
  breakdown = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="list_cmhc_filters_+3A_survey">survey</code></td>
<td>
<p>Optional survey to filter by</p>
</td></tr>
<tr><td><code id="list_cmhc_filters_+3A_series">series</code></td>
<td>
<p>Optional series to filter by</p>
</td></tr>
<tr><td><code id="list_cmhc_filters_+3A_dimension">dimension</code></td>
<td>
<p>Optional dimension to filter by</p>
</td></tr>
<tr><td><code id="list_cmhc_filters_+3A_breakdown">breakdown</code></td>
<td>
<p>Optional breakdown to filter by</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with available filters
</p>


<h3>Examples</h3>

<pre><code class='language-R'>list_cmhc_filters("Rms","Vacancy Rate","Bedroom Type","Historical Time Periods")

</code></pre>

<hr>
<h2 id='list_cmhc_series'>List available CMHC series</h2><span id='topic+list_cmhc_series'></span>

<h3>Description</h3>

<p>List available CMHC series
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_cmhc_series(survey = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="list_cmhc_series_+3A_survey">survey</code></td>
<td>
<p>Optional survey to filter by</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with survey names, and available series names.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>list_cmhc_series("Rms")

</code></pre>

<hr>
<h2 id='list_cmhc_surveys'>List available CMHC surveys</h2><span id='topic+list_cmhc_surveys'></span>

<h3>Description</h3>

<p>List available CMHC surveys
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_cmhc_surveys()
</code></pre>


<h3>Value</h3>

<p>A data frame with available survey names.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>list_cmhc_surveys()

</code></pre>

<hr>
<h2 id='list_cmhc_tables'>List available CMHC tables</h2><span id='topic+list_cmhc_tables'></span>

<h3>Description</h3>

<p>List available CMHC tables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_cmhc_tables(short = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="list_cmhc_tables_+3A_short">short</code></td>
<td>
<p>Logical, determines how much detail is returned. Default is 'TRUE'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble listing all available CMHC data tables
</p>


<h3>Examples</h3>

<pre><code class='language-R'>list_cmhc_tables()

</code></pre>

<hr>
<h2 id='select_cmhc_table'>Interactive table selector</h2><span id='topic+select_cmhc_table'></span>

<h3>Description</h3>

<p>Interactive table selector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>select_cmhc_table()
</code></pre>


<h3>Value</h3>

<p>A string containing the function call to access the selected table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
select_cmhc_table()

## End(Not run)
</code></pre>

<hr>
<h2 id='set_cmhc_cache_path'>Set persistent cmhc cache location for geographic data</h2><span id='topic+set_cmhc_cache_path'></span>

<h3>Description</h3>

<p>The cmhc package provides access to custom cmhc geographies, these are large files and should be
stored in a permanent location. This function sets the CMHC_CACHE_PATH environment variable and optionally
installs it in the .Renviron file for future use. This is only needed when using the 'get_cmhc_geography()' function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_cmhc_cache_path(cache_path, overwrite = FALSE, install = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_cmhc_cache_path_+3A_cache_path">cache_path</code></td>
<td>
<p>a local directory to use for saving cached data</p>
</td></tr>
<tr><td><code id="set_cmhc_cache_path_+3A_overwrite">overwrite</code></td>
<td>
<p>Option to overwrite any existing cache path already stored locally.</p>
</td></tr>
<tr><td><code id="set_cmhc_cache_path_+3A_install">install</code></td>
<td>
<p>Option to install permanently for use across sessions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character string with the CMHC cache path
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# This sets the cache path for the duration of the current session
set_cmhc_cache_path("~/cmhc_cache")

# This will set the cache path permanently until overwritten again
set_cmhc_cache_path("~/cmhc_cache", install = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='show_cmhc_cache_path'>View saved cache directory path</h2><span id='topic+show_cmhc_cache_path'></span>

<h3>Description</h3>

<p>View saved cache path
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_cmhc_cache_path()
</code></pre>


<h3>Value</h3>

<p>a character string with the CMHC cache path
</p>


<h3>Examples</h3>

<pre><code class='language-R'>show_cmhc_cache_path()

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
