<!DOCTYPE html><html lang="en"><head><title>Help for package whereami</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {whereami}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cat_where'><p>cat function for whereami</p></a></li>
<li><a href='#counter_state'><p>whereami counter</p></a></li>
<li><a href='#set_whereami_log'><p>Set Log Path</p></a></li>
<li><a href='#thisfile'><p>Determines the path of the currently running script in terminal</p></a></li>
<li><a href='#whereami'><p>Return where the script is run from</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Reliably Return the Source and Call Location of a Command</td>
</tr>
<tr>
<td>Description:</td>
<td>Robust and reliable functions to return informative outputs to 
        console with the run or source location of a command. This can be from
        the  'RScript'/R terminal commands or 'RStudio' console, source editor, 
        'Rmarkdown' document and a Shiny application.</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils, graphics, grDevices, stats, cli, rstudioapi, jsonlite</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/yonicd/whereami">https://github.com/yonicd/whereami</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/yonicd/whereami/issues">https://github.com/yonicd/whereami/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>magrittr, ggplot2, kableExtra, testthat, covr, knitr,
rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-12-22 20:30:45 UTC; yoni.sidi</td>
</tr>
<tr>
<td>Author:</td>
<td>Jonathan Sidi <a href="https://orcid.org/0000-0002-4222-1819"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Colin Fay <a href="https://orcid.org/0000-0001-7343-1846"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Kirill Müller <a href="https://orcid.org/0000-0002-1416-3412"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jonathan Sidi &lt;yonicd@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-12-22 20:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='cat_where'>cat function for whereami</h2><span id='topic+cat_where'></span>

<h3>Description</h3>

<p>cat function for whereami output
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cat_where(
  where,
  type = c("rule", "boxx", "bullet", "line", "print"),
  color = c("none", "black", "blue", "cyan", "green", "magenta", "red", "white",
    "yellow", "grey", "silver"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cat_where_+3A_where">where</code></td>
<td>
<p>whereami output</p>
</td></tr>
<tr><td><code id="cat_where_+3A_type">type</code></td>
<td>
<p><code>cli</code> <code style="white-space: pre;">&#8288;cat_*&#8288;</code> method. Can be <code>boxx</code>, <code>bullet</code>, <code>line</code>, <code>print</code>, <code>rule</code>.
Default is <code>rule</code>.</p>
</td></tr>
<tr><td><code id="cat_where_+3A_color">color</code></td>
<td>
<p><code>cli</code> <code style="white-space: pre;">&#8288;col_*&#8288;</code> method.</p>
</td></tr>
<tr><td><code id="cat_where_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code style="white-space: pre;">&#8288;cli::cat_*&#8288;</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character
</p>


<h3>Author(s)</h3>

<p>Colin Fay
</p>


<h3>Examples</h3>

<pre><code class='language-R'> cat_where(whereami())
 cat_where(whereami(), type = "bullet", bullet = "tick")
 cat_where(whereami(), color = "green")
</code></pre>

<hr>
<h2 id='counter_state'>whereami counter</h2><span id='topic+counter_state'></span><span id='topic+counter_reset'></span><span id='topic+counter_names'></span><span id='topic+counter_tags'></span><span id='topic+counter_get'></span>

<h3>Description</h3>

<p>Interact with internal whereami counter
</p>


<h3>Usage</h3>

<pre><code class='language-R'>counter_state(item = NULL, tag = NULL)

counter_reset(item = NULL, tag = NULL)

counter_names()

counter_tags()

counter_get()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="counter_state_+3A_item">item</code></td>
<td>
<p>character, name of the counter to access, Default: NULL</p>
</td></tr>
<tr><td><code id="counter_state_+3A_tag">tag</code></td>
<td>
<p>character, tag of the counter to acces, if it was set at initial whereami call.
This can be used instead of the item name, Default: NULL</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>counter_names()</code> returns names of the active stored counters.
</p>
<p><code>counter_state()</code> returns current hit count for item, if NULL then all counters
are returned.
</p>
<p><code>counter_reset()</code> will remove counter of item, if item is NULL then all counters
are reset.
</p>
<p><code>counter_get()</code> returns a table with all the counters. These can then
be plotted with the with the plot method.
</p>
<p>A json log of the counter is written to file.path(tempdir(),'whereami.json') by default
The path can be set using <a href="#topic+set_whereami_log">set_whereami_log</a>
</p>


<h3>Author(s)</h3>

<p>Jonathan Sidi
</p>


<h3>See Also</h3>

<p>Other counter: 
<code><a href="#topic+set_whereami_log">set_whereami_log</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(interactive()){

txt &lt;- "
whereami::cat_where(whereami::whereami(tag = 'tag1'))
"

tf &lt;- tempfile(fileext = '.R')

cat(txt,file = tf)

source(tf)

counter_state()

counter_state(tag = 'tag1')

counter_names()

counter_tags()

counters &lt;- counter_get()

counters

plot(counter_get())

# read the json log
jsonlite::read_json(
file.path(tempdir(),'whereami.json'),
simplifyVector = TRUE)

# clear all counters
counter_reset()

#verify that there are no active counters
counter_state()

# cleanup
unlink(tf)

}

</code></pre>

<hr>
<h2 id='set_whereami_log'>Set Log Path</h2><span id='topic+set_whereami_log'></span>

<h3>Description</h3>

<p>Set the path to write the counter log as a json
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_whereami_log(path = tempdir())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_whereami_log_+3A_path">path</code></td>
<td>
<p>character, path to write to, Default: tempdir()</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other counter: 
<code><a href="#topic+counter_state">counter_state</a>()</code>
</p>

<hr>
<h2 id='thisfile'>Determines the path of the currently running script in terminal</h2><span id='topic+thisfile'></span><span id='topic+thisfile_source'></span><span id='topic+thisfile_r'></span><span id='topic+thisfile_rscript'></span><span id='topic+thisfile_knit'></span>

<h3>Description</h3>

<p><span class="rlang"><b>R</b></span> does not store nor export the path of the currently running
script.  This is an attempt to circumvent this limitation by applying
heuristics (such as call stack and argument inspection) that work in many
cases.
<strong>CAVEAT</strong>: Use this function only if your workflow does not permit other
solution: if a script needs to know its location, it should be set outside
the context of the script if possible.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>thisfile()

thisfile_source()

thisfile_r()

thisfile_rscript()

thisfile_knit()
</code></pre>


<h3>Details</h3>

<p>This functions currently work only if the script was <code>source</code>d,
processed with <code>knitr</code>,
or run with <code>Rscript</code> or using the <code>--file</code> parameter to the
<code>R</code> executable.  For code run with <code>Rscript</code>, the exact value
of the parameter passed to <code>Rscript</code> is returned.
</p>


<h3>Value</h3>

<p>The path of the currently running script, NULL if it cannot be
determined.
</p>


<h3>Note</h3>

<p>These functions were migrated from
<a href="https://github.com/r-lib/rprojroot/tree/4e4f70c0794542a5cfa6c3f66635388365616881">r-lib/rprojroot</a>.
</p>


<h3>Author(s)</h3>

<p>Kirill Müller, Hadley Wickham, Michael R. Head
</p>


<h3>References</h3>

<p><a href="https://stackoverflow.com/q/1815606/946850">https://stackoverflow.com/q/1815606/946850</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+source">base::source()</a></code>, <code><a href="utils.html#topic+Rscript">utils::Rscript()</a></code>, <code><a href="base.html#topic+getwd">base::getwd()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if( !interactive() )
  thisfile()

# using in terminal ( with pipe() )

  # open a temp file
   tf &lt;- tempfile(fileext = '.R')

  # call to write to temp file
   f &lt;- 'cat(whereami::thisfile(), "\n", sep = "")'

  # write to the file
   cat(f,file = tf)

  # create an R call to terminal
   fcmd &lt;- sprintf('"%s" --slave --vanilla --no-save -f %s',R.home('bin/R'),tf)

  # run the call
   p &lt;- pipe(fcmd)

  # read the output
   readLines(p)

  # cleanup
   close(p)
   unlink(tf)

</code></pre>

<hr>
<h2 id='whereami'>Return where the script is run from</h2><span id='topic+whereami'></span>

<h3>Description</h3>

<p>Returns the file that a command is run from.
</p>
<p>If traceback is available then the line that it was run from is also returned.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>whereami(path_expand = FALSE, tag = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="whereami_+3A_path_expand">path_expand</code></td>
<td>
<p>logical, expand relational path, Default: FALSE</p>
</td></tr>
<tr><td><code id="whereami_+3A_tag">tag</code></td>
<td>
<p>character, optional tag for the call, Default: NULL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character
</p>


<h3>Author(s)</h3>

<p>Jonathan Sidi
</p>


<h3>Examples</h3>

<pre><code class='language-R'> whereami()
 whereami(path_expand = TRUE)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
