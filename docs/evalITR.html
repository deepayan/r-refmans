<!DOCTYPE html><html lang="en-US"><head><title>Help for package evalITR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {evalITR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#AUPEC'><p>Estimation of the Area Under Prescription Evaluation Curve (AUPEC) in Randomized Experiments</p></a></li>
<li><a href='#AUPECcv'><p>Estimation of the Area Under Prescription Evaluation Curve (AUPEC) in Randomized Experiments Under Cross Validation</p></a></li>
<li><a href='#compute_qoi'><p>Compute Quantities of Interest (PAPE, PAPEp, PAPDp, AUPEC, GATE, GATEcv)</p></a></li>
<li><a href='#compute_qoi_user'><p>Compute Quantities of Interest (PAPE, PAPEp, PAPDp, AUPEC, GATE, GATEcv) with user defined functions</p></a></li>
<li><a href='#consist.test'><p>The Consistency Test for Grouped Average Treatment Effects (GATEs) in Randomized Experiments</p></a></li>
<li><a href='#consistcv.test'><p>The Consistency Test for Grouped Average Treatment Effects (GATEs) under Cross Validation in Randomized Experiments</p></a></li>
<li><a href='#create_ml_args'><p>Create general arguments</p></a></li>
<li><a href='#create_ml_args_bart'><p>Create arguments for bartMachine</p></a></li>
<li><a href='#create_ml_args_bartc'><p>Create arguments for bartCause</p></a></li>
<li><a href='#create_ml_args_causalforest'><p>Create arguments for causal forest</p></a></li>
<li><a href='#create_ml_args_lasso'><p>Create arguments for LASSO</p></a></li>
<li><a href='#create_ml_args_superLearner'><p>Create arguments for super learner</p></a></li>
<li><a href='#create_ml_args_svm'><p>Create arguments for SVM</p></a></li>
<li><a href='#create_ml_args_svm_cls'><p>Create arguments for SVM classification</p></a></li>
<li><a href='#create_ml_arguments'><p>Create arguments for ML algorithms</p></a></li>
<li><a href='#estimate_itr'><p>Estimate individual treatment rules (ITR)</p></a></li>
<li><a href='#evaluate_itr'><p>Evaluate ITR</p></a></li>
<li><a href='#fit_itr'><p>Estimate ITR for Single Outcome</p></a></li>
<li><a href='#GATE'><p>Estimation of the Grouped Average Treatment Effects (GATEs) in Randomized Experiments</p></a></li>
<li><a href='#GATEcv'><p>Estimation of the Grouped Average Treatment Effects (GATEs) in Randomized Experiments Under Cross Validation</p></a></li>
<li><a href='#het.test'><p>The Heterogeneity Test for Grouped Average Treatment Effects (GATEs) in Randomized Experiments</p></a></li>
<li><a href='#hetcv.test'><p>The Heterogeneity Test for Grouped Average Treatment Effects (GATEs) under Cross Validation in Randomized Experiments</p></a></li>
<li><a href='#PAPD'><p>Estimation of the Population Average Prescription Difference in Randomized Experiments</p></a></li>
<li><a href='#PAPDcv'><p>Estimation of the Population Average Prescription Difference in Randomized Experiments Under Cross Validation</p></a></li>
<li><a href='#PAPE'><p>Estimation of the Population Average Prescription Effect in Randomized Experiments</p></a></li>
<li><a href='#PAPEcv'><p>Estimation of the Population Average Prescription Effect in Randomized Experiments Under Cross Validation</p></a></li>
<li><a href='#PAV'><p>Estimation of the Population Average Value in Randomized Experiments</p></a></li>
<li><a href='#PAVcv'><p>Estimation of the Population Average Value in Randomized Experiments Under Cross Validation</p></a></li>
<li><a href='#plot_estimate'><p>Plot the GATE estimate</p></a></li>
<li><a href='#plot.itr'><p>Plot the AUPEC curve</p></a></li>
<li><a href='#print.summary.itr'><p>Print</p></a></li>
<li><a href='#print.summary.test_itr'><p>Print</p></a></li>
<li><a href='#star'><p>Tennesseeâ€™s Student/Teacher Achievement Ratio (STAR) project</p></a></li>
<li><a href='#summary.itr'><p>Summarize estimate_itr output</p></a></li>
<li><a href='#summary.test_itr'><p>Summarize test_itr output</p></a></li>
<li><a href='#test_itr'><p>Conduct hypothesis tests</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Evaluating Individualized Treatment Rules</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-08-20</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Michael Lingzhi Li &lt;mili@hbs.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides various statistical methods for evaluating
    Individualized Treatment Rules under randomized data. The provided
    metrics include Population Average Value (PAV), Population Average
    Prescription Effect (PAPE), Area Under Prescription Effect Curve
    (AUPEC). It also provides the tools to analyze Individualized
    Treatment Rules under budget constraints. Detailed reference in Imai
    and Li (2019) &lt;<a href="https://doi.org/10.48550/arXiv.1905.05389">doi:10.48550/arXiv.1905.05389</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/MichaelLLi/evalITR">https://github.com/MichaelLLi/evalITR</a>,
<a href="https://michaellli.github.io/evalITR/">https://michaellli.github.io/evalITR/</a>,
<a href="https://jialul.github.io/causal-ml/">https://jialul.github.io/causal-ml/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/MichaelLLi/evalITR/issues">https://github.com/MichaelLLi/evalITR/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>dplyr (&ge; 1.0), MASS (&ge; 7.0), Matrix (&ge; 1.0), quadprog (&ge;
1.0), R (&ge; 3.5.0), stats</td>
</tr>
<tr>
<td>Imports:</td>
<td>caret, cli, e1071, forcats, gbm, ggdist, ggplot2, ggthemes,
glmnet, grf, haven, purrr, rlang, rpart, rqPen, scales, utils,
bartCause, SuperLearner</td>
</tr>
<tr>
<td>Suggests:</td>
<td>doParallel, furrr, knitr, rmarkdown, testthat, bartMachine,
elasticnet, randomForest, spelling</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.2</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-25 17:31:55 UTC; shazn</td>
</tr>
<tr>
<td>Author:</td>
<td>Michael Lingzhi Li [aut, cre],
  Kosuke Imai [aut],
  Jialu Li [ctb],
  Xiaolong Yang [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-25 23:10:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='AUPEC'>Estimation of the Area Under Prescription Evaluation Curve (AUPEC) in Randomized Experiments</h2><span id='topic+AUPEC'></span>

<h3>Description</h3>

<p>This function estimates AUPEC. The details of the methods for this design are given in Imai and Li (2019).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AUPEC(T, tau, Y, centered = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="AUPEC_+3A_t">T</code></td>
<td>
<p>A vector of the unit-level binary treatment receipt variable for each sample.</p>
</td></tr>
<tr><td><code id="AUPEC_+3A_tau">tau</code></td>
<td>
<p>A vector of the unit-level continuous score for treatment assignment. We assume those that have tau&lt;0 should
not have treatment. Conditional Average Treatment Effect is one possible measure.</p>
</td></tr>
<tr><td><code id="AUPEC_+3A_y">Y</code></td>
<td>
<p>A vector of the outcome variable of interest for each sample.</p>
</td></tr>
<tr><td><code id="AUPEC_+3A_centered">centered</code></td>
<td>
<p>If <code>TRUE</code>, the outcome variables would be centered before processing. This minimizes
the variance of the estimator. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following items: </p>
<table role = "presentation">
<tr><td><code>aupec</code></td>
<td>
<p>The estimated
Area Under Prescription Evaluation Curve</p>
</td></tr> <tr><td><code>sd</code></td>
<td>
<p>The estimated standard deviation
of AUPEC.</p>
</td></tr><tr><td><code>vec</code></td>
<td>
<p>A vector of points outlining the AUPEC curve across each possible budget point for the dataset.
Each step increases the budget by 1/n where n is the number of data points. </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Michael Lingzhi Li, Technology and Operations Management, Harvard Business School
<a href="mailto:mili@hbs.edu">mili@hbs.edu</a>, <a href="https://www.michaellz.com/">https://www.michaellz.com/</a>;
</p>


<h3>References</h3>

<p>Imai and Li (2019). &ldquo;Experimental Evaluation of Individualized Treatment Rules&rdquo;,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>T = c(1,0,1,0,1,0,1,0)
tau = c(0,0.1,0.2,0.3,0.4,0.5,0.6,0.7)
Y = c(4,5,0,2,4,1,-4,3)
aupeclist &lt;- AUPEC(T,tau,Y)
aupeclist$aupec
aupeclist$sd
aupeclist$vec
</code></pre>

<hr>
<h2 id='AUPECcv'>Estimation of the Area Under Prescription Evaluation Curve (AUPEC) in Randomized Experiments Under Cross Validation</h2><span id='topic+AUPECcv'></span>

<h3>Description</h3>

<p>This function estimates AUPEC. The details of the methods for this design are given in Imai and Li (2019).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AUPECcv(T, tau, Y, ind, centered = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="AUPECcv_+3A_t">T</code></td>
<td>
<p>A vector of the unit-level binary treatment receipt variable for each sample.</p>
</td></tr>
<tr><td><code id="AUPECcv_+3A_tau">tau</code></td>
<td>
<p>A matrix where the <code>i</code>th column is the unit-level continuous score for treatment assignment generated in the <code>i</code>th fold.</p>
</td></tr>
<tr><td><code id="AUPECcv_+3A_y">Y</code></td>
<td>
<p>The outcome variable of interest.</p>
</td></tr>
<tr><td><code id="AUPECcv_+3A_ind">ind</code></td>
<td>
<p>A vector of integers (between 1 and number of folds inclusive) indicating which testing set does each sample belong to.</p>
</td></tr>
<tr><td><code id="AUPECcv_+3A_centered">centered</code></td>
<td>
<p>If <code>TRUE</code>, the outcome variables would be centered before processing. This minimizes
the variance of the estimator. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following items: </p>
<table role = "presentation">
<tr><td><code>aupec</code></td>
<td>
<p>The estimated
AUPEC.</p>
</td></tr> <tr><td><code>sd</code></td>
<td>
<p>The estimated standard deviation
of AUPEC.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Michael Lingzhi Li, Technology and Operations Management, Harvard Business School
<a href="mailto:mili@hbs.edu">mili@hbs.edu</a>, <a href="https://www.michaellz.com/">https://www.michaellz.com/</a>;
</p>


<h3>References</h3>

<p>Imai and Li (2019). &ldquo;Experimental Evaluation of Individualized Treatment Rules&rdquo;,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>T = c(1,0,1,0,1,0,1,0)
tau = matrix(c(0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,-0.5,-0.3,-0.1,0.1,0.3,0.5,0.7,0.9),nrow = 8, ncol = 2)
Y = c(4,5,0,2,4,1,-4,3)
ind = c(rep(1,4),rep(2,4))
aupeclist &lt;- AUPECcv(T, tau, Y, ind)
aupeclist$aupec
aupeclist$sd
</code></pre>

<hr>
<h2 id='compute_qoi'>Compute Quantities of Interest (PAPE, PAPEp, PAPDp, AUPEC, GATE, GATEcv)</h2><span id='topic+compute_qoi'></span>

<h3>Description</h3>

<p>Compute Quantities of Interest (PAPE, PAPEp, PAPDp, AUPEC, GATE, GATEcv)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_qoi(fit_obj, algorithms)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_qoi_+3A_fit_obj">fit_obj</code></td>
<td>
<p>An output object from <code>fit_itr</code> function.</p>
</td></tr>
<tr><td><code id="compute_qoi_+3A_algorithms">algorithms</code></td>
<td>
<p>Machine learning algorithms</p>
</td></tr>
</table>

<hr>
<h2 id='compute_qoi_user'>Compute Quantities of Interest (PAPE, PAPEp, PAPDp, AUPEC, GATE, GATEcv) with user defined functions</h2><span id='topic+compute_qoi_user'></span>

<h3>Description</h3>

<p>Compute Quantities of Interest (PAPE, PAPEp, PAPDp, AUPEC, GATE, GATEcv) with user defined functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_qoi_user(user_itr, Tcv, Ycv, data, ngates, budget, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_qoi_user_+3A_user_itr">user_itr</code></td>
<td>
<p>A user-defined function to create an ITR. The function should take the data as input and return an unit-level continuous score for treatment assignment. We assume those that have score less than 0 should not have treatment. The default is <code>NULL</code>, which means the ITR will be estimated from the <code>estimate_itr</code>.</p>
</td></tr>
<tr><td><code id="compute_qoi_user_+3A_tcv">Tcv</code></td>
<td>
<p>A vector of the unit-level binary treatment.</p>
</td></tr>
<tr><td><code id="compute_qoi_user_+3A_ycv">Ycv</code></td>
<td>
<p>A vector of the unit-level continuous outcome.</p>
</td></tr>
<tr><td><code id="compute_qoi_user_+3A_data">data</code></td>
<td>
<p>A data frame containing the variables of interest.</p>
</td></tr>
<tr><td><code id="compute_qoi_user_+3A_ngates">ngates</code></td>
<td>
<p>The number of gates to be used in the GATE function.</p>
</td></tr>
<tr><td><code id="compute_qoi_user_+3A_budget">budget</code></td>
<td>
<p>The maximum percentage of population that can be treated under the budget constraint.</p>
</td></tr>
<tr><td><code id="compute_qoi_user_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to the user-defined function.</p>
</td></tr>
</table>

<hr>
<h2 id='consist.test'>The Consistency Test for Grouped Average Treatment Effects (GATEs) in Randomized Experiments</h2><span id='topic+consist.test'></span>

<h3>Description</h3>

<p>This function calculates statistics related to the test of treatment effect consistency across groups.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>consist.test(T, tau, Y, ngates = 5, nsim = 10000)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="consist.test_+3A_t">T</code></td>
<td>
<p>A vector of the unit-level binary treatment receipt variable for each sample.</p>
</td></tr>
<tr><td><code id="consist.test_+3A_tau">tau</code></td>
<td>
<p>A vector of the unit-level continuous score. Conditional Average Treatment Effect is one possible measure.</p>
</td></tr>
<tr><td><code id="consist.test_+3A_y">Y</code></td>
<td>
<p>A vector of the outcome variable of interest for each sample.</p>
</td></tr>
<tr><td><code id="consist.test_+3A_ngates">ngates</code></td>
<td>
<p>The number of groups to separate the data into. The groups are determined by <code>tau</code>. Default is 5.</p>
</td></tr>
<tr><td><code id="consist.test_+3A_nsim">nsim</code></td>
<td>
<p>Number of Monte Carlo simulations used to simulate the null distributions. Default is 10000.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The details of the methods for this design are given in Imai and Li (2022).
</p>


<h3>Value</h3>

<p>A list that contains the following items: </p>
<table role = "presentation">
<tr><td><code>stat</code></td>
<td>
<p>The estimated
statistic for the test of consistency</p>
</td></tr> <tr><td><code>pval</code></td>
<td>
<p>The p-value of the null
hypothesis (that the treatment effects are consistent)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Michael Lingzhi Li, Technology and Operations Management, Harvard Business School
<a href="mailto:mili@hbs.edu">mili@hbs.edu</a>, <a href="https://www.michaellz.com/">https://www.michaellz.com/</a>;
</p>


<h3>References</h3>

<p>Imai and Li (2022). &ldquo;Statistical Inference for Heterogeneous Treatment Effects Discovered by Generic Machine Learning in Randomized Experiments&rdquo;,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>T = c(1,0,1,0,1,0,1,0)
tau = c(0,0.1,0.2,0.3,0.4,0.5,0.6,0.7)
Y = c(4,5,0,2,4,1,-4,3)
consisttestlist &lt;- consist.test(T,tau,Y,ngates=5)
consisttestlist$stat
consisttestlist$pval
</code></pre>

<hr>
<h2 id='consistcv.test'>The Consistency Test for Grouped Average Treatment Effects (GATEs) under Cross Validation in Randomized Experiments</h2><span id='topic+consistcv.test'></span>

<h3>Description</h3>

<p>This function calculates statistics related to the test of treatment effect consistency across groups under cross-validation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>consistcv.test(T, tau, Y, ind, ngates = 5, nsim = 10000)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="consistcv.test_+3A_t">T</code></td>
<td>
<p>A vector of the unit-level binary treatment receipt variable for each sample.</p>
</td></tr>
<tr><td><code id="consistcv.test_+3A_tau">tau</code></td>
<td>
<p>A vector of the unit-level continuous score. Conditional Average Treatment Effect is one possible measure.</p>
</td></tr>
<tr><td><code id="consistcv.test_+3A_y">Y</code></td>
<td>
<p>A vector of the outcome variable of interest for each sample.</p>
</td></tr>
<tr><td><code id="consistcv.test_+3A_ind">ind</code></td>
<td>
<p>A vector of integers (between 1 and number of folds inclusive) indicating which testing set does each sample belong to.</p>
</td></tr>
<tr><td><code id="consistcv.test_+3A_ngates">ngates</code></td>
<td>
<p>The number of groups to separate the data into. The groups are determined by <code>tau</code>. Default is 5.</p>
</td></tr>
<tr><td><code id="consistcv.test_+3A_nsim">nsim</code></td>
<td>
<p>Number of Monte Carlo simulations used to simulate the null distributions. Default is 10000.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The details of the methods for this design are given in Imai and Li (2022).
</p>


<h3>Value</h3>

<p>A list that contains the following items: </p>
<table role = "presentation">
<tr><td><code>stat</code></td>
<td>
<p>The estimated
statistic for the test of consistency under cross-validation.</p>
</td></tr> <tr><td><code>pval</code></td>
<td>
<p>The p-value of the null
hypothesis (that the treatment effects are consistent)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Michael Lingzhi Li, Technology and Operations Management, Harvard Business School
<a href="mailto:mili@hbs.edu">mili@hbs.edu</a>, <a href="https://www.michaellz.com/">https://www.michaellz.com/</a>;
</p>


<h3>References</h3>

<p>Imai and Li (2022). &ldquo;Statistical Inference for Heterogeneous Treatment Effects Discovered by Generic Machine Learning in Randomized Experiments&rdquo;,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>T = c(1,0,1,0,1,0,1,0)
tau = matrix(c(0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,-0.5,-0.3,-0.1,0.1,0.3,0.5,0.7,0.9),nrow = 8, ncol = 2)
Y = c(4,5,0,2,4,1,-4,3)
ind = c(rep(1,4),rep(2,4))
consisttestlist &lt;- consistcv.test(T,tau,Y,ind,ngates=2)
consisttestlist$stat
consisttestlist$pval
</code></pre>

<hr>
<h2 id='create_ml_args'>Create general arguments</h2><span id='topic+create_ml_args'></span>

<h3>Description</h3>

<p>Create general arguments
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_ml_args(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_ml_args_+3A_data">data</code></td>
<td>
<p>A dataset</p>
</td></tr>
</table>

<hr>
<h2 id='create_ml_args_bart'>Create arguments for bartMachine</h2><span id='topic+create_ml_args_bart'></span>

<h3>Description</h3>

<p>Create arguments for bartMachine
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_ml_args_bart(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_ml_args_bart_+3A_data">data</code></td>
<td>
<p>A dataset</p>
</td></tr>
</table>

<hr>
<h2 id='create_ml_args_bartc'>Create arguments for bartCause</h2><span id='topic+create_ml_args_bartc'></span>

<h3>Description</h3>

<p>Create arguments for bartCause
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_ml_args_bartc(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_ml_args_bartc_+3A_data">data</code></td>
<td>
<p>A dataset</p>
</td></tr>
</table>

<hr>
<h2 id='create_ml_args_causalforest'>Create arguments for causal forest</h2><span id='topic+create_ml_args_causalforest'></span>

<h3>Description</h3>

<p>Create arguments for causal forest
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_ml_args_causalforest(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_ml_args_causalforest_+3A_data">data</code></td>
<td>
<p>A dataset</p>
</td></tr>
</table>

<hr>
<h2 id='create_ml_args_lasso'>Create arguments for LASSO</h2><span id='topic+create_ml_args_lasso'></span>

<h3>Description</h3>

<p>Create arguments for LASSO
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_ml_args_lasso(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_ml_args_lasso_+3A_data">data</code></td>
<td>
<p>A dataset</p>
</td></tr>
</table>

<hr>
<h2 id='create_ml_args_superLearner'>Create arguments for super learner</h2><span id='topic+create_ml_args_superLearner'></span>

<h3>Description</h3>

<p>Create arguments for super learner
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_ml_args_superLearner(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_ml_args_superLearner_+3A_data">data</code></td>
<td>
<p>A dataset</p>
</td></tr>
</table>

<hr>
<h2 id='create_ml_args_svm'>Create arguments for SVM</h2><span id='topic+create_ml_args_svm'></span>

<h3>Description</h3>

<p>Create arguments for SVM
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_ml_args_svm(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_ml_args_svm_+3A_data">data</code></td>
<td>
<p>A dataset</p>
</td></tr>
</table>

<hr>
<h2 id='create_ml_args_svm_cls'>Create arguments for SVM classification</h2><span id='topic+create_ml_args_svm_cls'></span>

<h3>Description</h3>

<p>Create arguments for SVM classification
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_ml_args_svm_cls(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_ml_args_svm_cls_+3A_data">data</code></td>
<td>
<p>A dataset</p>
</td></tr>
</table>

<hr>
<h2 id='create_ml_arguments'>Create arguments for ML algorithms</h2><span id='topic+create_ml_arguments'></span>

<h3>Description</h3>

<p>Create arguments for ML algorithms
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_ml_arguments(outcome, treatment, data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_ml_arguments_+3A_outcome">outcome</code></td>
<td>
<p>Outcome of interests</p>
</td></tr>
<tr><td><code id="create_ml_arguments_+3A_treatment">treatment</code></td>
<td>
<p>Treatment variable</p>
</td></tr>
<tr><td><code id="create_ml_arguments_+3A_data">data</code></td>
<td>
<p>A dataset</p>
</td></tr>
</table>

<hr>
<h2 id='estimate_itr'>Estimate individual treatment rules (ITR)</h2><span id='topic+estimate_itr'></span>

<h3>Description</h3>

<p>Estimate individual treatment rules (ITR)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_itr(
  treatment,
  form,
  data,
  algorithms,
  budget,
  n_folds = 5,
  split_ratio = 0,
  ngates = 5,
  preProcess = NULL,
  weights = NULL,
  trControl = caret::trainControl(method = "none"),
  tuneGrid = NULL,
  tuneLength = ifelse(trControl$method == "none", 1, 3),
  user_model = NULL,
  SL_library = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimate_itr_+3A_treatment">treatment</code></td>
<td>
<p>Treatment variable</p>
</td></tr>
<tr><td><code id="estimate_itr_+3A_form">form</code></td>
<td>
<p>a formula object that takes the form <code>y ~ T + x1 + x2 + ...</code>.</p>
</td></tr>
<tr><td><code id="estimate_itr_+3A_data">data</code></td>
<td>
<p>A data frame that contains the outcome <code>y</code> and the treatment <code>T</code>.</p>
</td></tr>
<tr><td><code id="estimate_itr_+3A_algorithms">algorithms</code></td>
<td>
<p>List of machine learning algorithms to be used.</p>
</td></tr>
<tr><td><code id="estimate_itr_+3A_budget">budget</code></td>
<td>
<p>The maximum percentage of population that can be treated under the budget constraint.</p>
</td></tr>
<tr><td><code id="estimate_itr_+3A_n_folds">n_folds</code></td>
<td>
<p>Number of cross-validation folds. Default is 5.</p>
</td></tr>
<tr><td><code id="estimate_itr_+3A_split_ratio">split_ratio</code></td>
<td>
<p>Split ratio between train and test set under sample splitting. Default is 0.</p>
</td></tr>
<tr><td><code id="estimate_itr_+3A_ngates">ngates</code></td>
<td>
<p>The number of groups to separate the data into. The groups are determined by tau. Default is 5.</p>
</td></tr>
<tr><td><code id="estimate_itr_+3A_preprocess">preProcess</code></td>
<td>
<p>caret parameter</p>
</td></tr>
<tr><td><code id="estimate_itr_+3A_weights">weights</code></td>
<td>
<p>caret parameter</p>
</td></tr>
<tr><td><code id="estimate_itr_+3A_trcontrol">trControl</code></td>
<td>
<p>caret parameter</p>
</td></tr>
<tr><td><code id="estimate_itr_+3A_tunegrid">tuneGrid</code></td>
<td>
<p>caret parameter</p>
</td></tr>
<tr><td><code id="estimate_itr_+3A_tunelength">tuneLength</code></td>
<td>
<p>caret parameter</p>
</td></tr>
<tr><td><code id="estimate_itr_+3A_user_model">user_model</code></td>
<td>
<p>A user-defined function to create an ITR. The function should take the data as input and return a model to estimate the ITR.</p>
</td></tr>
<tr><td><code id="estimate_itr_+3A_sl_library">SL_library</code></td>
<td>
<p>A list of machine learning algorithms to be used in the super learner.</p>
</td></tr>
<tr><td><code id="estimate_itr_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code>caret::train</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of <code>itr</code> class
</p>

<hr>
<h2 id='evaluate_itr'>Evaluate ITR</h2><span id='topic+evaluate_itr'></span>

<h3>Description</h3>

<p>Evaluate ITR
</p>


<h3>Usage</h3>

<pre><code class='language-R'>evaluate_itr(
  fit = NULL,
  user_itr = NULL,
  outcome = c(),
  treatment = c(),
  data = list(),
  budget = 1,
  ngates = 5,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="evaluate_itr_+3A_fit">fit</code></td>
<td>
<p>Fitted model. Usually an output from <code>estimate_itr</code></p>
</td></tr>
<tr><td><code id="evaluate_itr_+3A_user_itr">user_itr</code></td>
<td>
<p>A user-defined function to create an ITR. The function should take the data as input and return an unit-level continuous score for treatment assignment. We assume those that have score less than 0 should not have treatment. The default is <code>NULL</code>, which means the ITR will be estimated from the <code>estimate_itr</code>.</p>
</td></tr>
<tr><td><code id="evaluate_itr_+3A_outcome">outcome</code></td>
<td>
<p>A character string of the outcome variable name.</p>
</td></tr>
<tr><td><code id="evaluate_itr_+3A_treatment">treatment</code></td>
<td>
<p>A character string of the treatment variable name.</p>
</td></tr>
<tr><td><code id="evaluate_itr_+3A_data">data</code></td>
<td>
<p>A data frame containing the variables specified in <code>outcome</code>, <code>treatment</code>, and <code>tau</code>.</p>
</td></tr>
<tr><td><code id="evaluate_itr_+3A_budget">budget</code></td>
<td>
<p>The maximum percentage of population that can be treated under the budget constraint.</p>
</td></tr>
<tr><td><code id="evaluate_itr_+3A_ngates">ngates</code></td>
<td>
<p>The number of gates to use for the ITR. The default is 5.
A user-defined function to create an ITR. The function should take the data as input and return an ITR. The output is a vector of the unit-level binary treatment that would have been assigned by the individualized treatment rule. The default is <code>NULL</code>, which means the ITR will be estimated from the <code>estimate_itr</code>.
See <code>?evaluate_itr</code> for an example.</p>
</td></tr>
<tr><td><code id="evaluate_itr_+3A_...">...</code></td>
<td>
<p>Further arguments passed to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of <code>itr</code> class
</p>

<hr>
<h2 id='fit_itr'>Estimate ITR for Single Outcome</h2><span id='topic+fit_itr'></span>

<h3>Description</h3>

<p>Estimate ITR for Single Outcome
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit_itr(data, algorithms, params, folds, budget, user_model, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fit_itr_+3A_data">data</code></td>
<td>
<p>A dataset.</p>
</td></tr>
<tr><td><code id="fit_itr_+3A_algorithms">algorithms</code></td>
<td>
<p>Machine learning algorithms.</p>
</td></tr>
<tr><td><code id="fit_itr_+3A_params">params</code></td>
<td>
<p>A list of parameters.</p>
</td></tr>
<tr><td><code id="fit_itr_+3A_folds">folds</code></td>
<td>
<p>Number of folds.</p>
</td></tr>
<tr><td><code id="fit_itr_+3A_budget">budget</code></td>
<td>
<p>The maximum percentage of population that can be treated under the budget constraint.</p>
</td></tr>
<tr><td><code id="fit_itr_+3A_user_model">user_model</code></td>
<td>
<p>User's own function to estimated the ITR.</p>
</td></tr>
<tr><td><code id="fit_itr_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code>caret::train</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of estimates.
</p>

<hr>
<h2 id='GATE'>Estimation of the Grouped Average Treatment Effects (GATEs) in Randomized Experiments</h2><span id='topic+GATE'></span>

<h3>Description</h3>

<p>This function estimates the Grouped Average Treatment Effects (GATEs) where the groups are determined by a continuous score. The details of the methods for this design are given in Imai and Li (2022).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GATE(T, tau, Y, ngates = 5)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GATE_+3A_t">T</code></td>
<td>
<p>A vector of the unit-level binary treatment receipt variable for each sample.</p>
</td></tr>
<tr><td><code id="GATE_+3A_tau">tau</code></td>
<td>
<p>A vector of the unit-level continuous score. Conditional Average Treatment Effect is one possible measure.</p>
</td></tr>
<tr><td><code id="GATE_+3A_y">Y</code></td>
<td>
<p>A vector of the outcome variable of interest for each sample.</p>
</td></tr>
<tr><td><code id="GATE_+3A_ngates">ngates</code></td>
<td>
<p>The number of groups to separate the data into. The groups are determined by <code>tau</code>. Default is 5.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following items: </p>
<table role = "presentation">
<tr><td><code>gate</code></td>
<td>
<p>The estimated
vector of GATEs of length <code>ngates</code> arranged in order of increasing <code>tau</code>.</p>
</td></tr> <tr><td><code>sd</code></td>
<td>
<p>The estimated vector of standard deviation
of GATEs.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Michael Lingzhi Li, Technology and Operations Management, Harvard Business School
<a href="mailto:mili@hbs.edu">mili@hbs.edu</a>, <a href="https://www.michaellz.com/">https://www.michaellz.com/</a>;
</p>


<h3>References</h3>

<p>Imai and Li (2022). &ldquo;Statistical Inference for Heterogeneous Treatment Effects Discovered by Generic Machine Learning in Randomized Experiments&rdquo;,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>T = c(1,0,1,0,1,0,1,0)
tau = c(0,0.1,0.2,0.3,0.4,0.5,0.6,0.7)
Y = c(4,5,0,2,4,1,-4,3)
gatelist &lt;- GATE(T,tau,Y,ngates=5)
gatelist$gate
gatelist$sd
</code></pre>

<hr>
<h2 id='GATEcv'>Estimation of the Grouped Average Treatment Effects (GATEs) in Randomized Experiments Under Cross Validation</h2><span id='topic+GATEcv'></span>

<h3>Description</h3>

<p>This function estimates the Grouped Average Treatment Effects (GATEs) under cross-validation where the groups are determined by a continuous score. The details of the methods for this design are given in Imai and Li (2022).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GATEcv(T, tau, Y, ind, ngates = 5)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GATEcv_+3A_t">T</code></td>
<td>
<p>A vector of the unit-level binary treatment receipt variable for each sample.</p>
</td></tr>
<tr><td><code id="GATEcv_+3A_tau">tau</code></td>
<td>
<p>A matrix where the <code>i</code>th column is the unit-level continuous score for treatment assignment generated in the <code>i</code>th fold. Conditional Average Treatment Effect is one possible measure.</p>
</td></tr>
<tr><td><code id="GATEcv_+3A_y">Y</code></td>
<td>
<p>A vector of the outcome variable of interest for each sample.</p>
</td></tr>
<tr><td><code id="GATEcv_+3A_ind">ind</code></td>
<td>
<p>A vector of integers (between 1 and number of folds inclusive) indicating which testing set does each sample belong to.</p>
</td></tr>
<tr><td><code id="GATEcv_+3A_ngates">ngates</code></td>
<td>
<p>The number of groups to separate the data into. The groups are determined by <code>tau</code>. Default is 5.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following items: </p>
<table role = "presentation">
<tr><td><code>gate</code></td>
<td>
<p>The estimated
vector of GATEs under cross-validation of length <code>ngates</code> arranged in order of increasing <code>tau</code>.</p>
</td></tr> <tr><td><code>sd</code></td>
<td>
<p>The estimated vector of standard deviation
of GATEs under cross-validation.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Michael Lingzhi Li, Technology and Operations Management, Harvard Business School
<a href="mailto:mili@hbs.edu">mili@hbs.edu</a>, <a href="https://www.michaellz.com/">https://www.michaellz.com/</a>;
</p>


<h3>References</h3>

<p>Imai and Li (2022). &ldquo;Statistical Inference for Heterogeneous Treatment Effects Discovered by Generic Machine Learning in Randomized Experiments&rdquo;,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>T = c(1,0,1,0,1,0,1,0)
tau = matrix(c(0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,-0.5,-0.3,-0.1,0.1,0.3,0.5,0.7,0.9),nrow = 8, ncol = 2)
Y = c(4,5,0,2,4,1,-4,3)
ind = c(rep(1,4),rep(2,4))
gatelist &lt;- GATEcv(T, tau, Y, ind, ngates = 2)
gatelist$gate
gatelist$sd
</code></pre>

<hr>
<h2 id='het.test'>The Heterogeneity Test for Grouped Average Treatment Effects (GATEs) in Randomized Experiments</h2><span id='topic+het.test'></span>

<h3>Description</h3>

<p>This function calculates statistics related to the test of heterogeneous treatment effects across groups.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>het.test(T, tau, Y, ngates = 5)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="het.test_+3A_t">T</code></td>
<td>
<p>A vector of the unit-level binary treatment receipt variable for each sample.</p>
</td></tr>
<tr><td><code id="het.test_+3A_tau">tau</code></td>
<td>
<p>A vector of the unit-level continuous score. Conditional Average Treatment Effect is one possible measure.</p>
</td></tr>
<tr><td><code id="het.test_+3A_y">Y</code></td>
<td>
<p>A vector of the outcome variable of interest for each sample.</p>
</td></tr>
<tr><td><code id="het.test_+3A_ngates">ngates</code></td>
<td>
<p>The number of groups to separate the data into. The groups are determined by <code>tau</code>. Default is 5.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The details of the methods for this design are given in Imai and Li (2022).
</p>


<h3>Value</h3>

<p>A list that contains the following items: </p>
<table role = "presentation">
<tr><td><code>stat</code></td>
<td>
<p>The estimated
statistic for the test of heterogeneity.</p>
</td></tr> <tr><td><code>pval</code></td>
<td>
<p>The p-value of the null
hypothesis (that the treatment effects are homogeneous)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Michael Lingzhi Li, Technology and Operations Management, Harvard Business School
<a href="mailto:mili@hbs.edu">mili@hbs.edu</a>, <a href="https://www.michaellz.com/">https://www.michaellz.com/</a>;
</p>


<h3>References</h3>

<p>Imai and Li (2022). &ldquo;Statistical Inference for Heterogeneous Treatment Effects Discovered by Generic Machine Learning in Randomized Experiments&rdquo;,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>T = c(1,0,1,0,1,0,1,0)
tau = c(0,0.1,0.2,0.3,0.4,0.5,0.6,0.7)
Y = c(4,5,0,2,4,1,-4,3)
hettestlist &lt;- het.test(T,tau,Y,ngates=5)
hettestlist$stat
hettestlist$pval
</code></pre>

<hr>
<h2 id='hetcv.test'>The Heterogeneity Test for Grouped Average Treatment Effects (GATEs) under Cross Validation in Randomized Experiments</h2><span id='topic+hetcv.test'></span>

<h3>Description</h3>

<p>This function calculates statistics related to the test of heterogeneous treatment effects across groups under cross-validation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hetcv.test(T, tau, Y, ind, ngates = 5)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hetcv.test_+3A_t">T</code></td>
<td>
<p>A vector of the unit-level binary treatment receipt variable for each sample.</p>
</td></tr>
<tr><td><code id="hetcv.test_+3A_tau">tau</code></td>
<td>
<p>A vector of the unit-level continuous score. Conditional Average Treatment Effect is one possible measure.</p>
</td></tr>
<tr><td><code id="hetcv.test_+3A_y">Y</code></td>
<td>
<p>A vector of the outcome variable of interest for each sample.</p>
</td></tr>
<tr><td><code id="hetcv.test_+3A_ind">ind</code></td>
<td>
<p>A vector of integers (between 1 and number of folds inclusive) indicating which testing set does each sample belong to.</p>
</td></tr>
<tr><td><code id="hetcv.test_+3A_ngates">ngates</code></td>
<td>
<p>The number of groups to separate the data into. The groups are determined by <code>tau</code>. Default is 5.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The details of the methods for this design are given in Imai and Li (2022).
</p>


<h3>Value</h3>

<p>A list that contains the following items: </p>
<table role = "presentation">
<tr><td><code>stat</code></td>
<td>
<p>The estimated
statistic for the test of heterogeneity under cross-validation.</p>
</td></tr> <tr><td><code>pval</code></td>
<td>
<p>The p-value of the null
hypothesis (that the treatment effects are homogeneous)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Michael Lingzhi Li, Technology and Operations Management, Harvard Business School
<a href="mailto:mili@hbs.edu">mili@hbs.edu</a>, <a href="https://www.michaellz.com/">https://www.michaellz.com/</a>;
</p>


<h3>References</h3>

<p>Imai and Li (2022). &ldquo;Statistical Inference for Heterogeneous Treatment Effects Discovered by Generic Machine Learning in Randomized Experiments&rdquo;,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>T = c(1,0,1,0,1,0,1,0)
tau = matrix(c(0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,-0.5,-0.3,-0.1,0.1,0.3,0.5,0.7,0.9),nrow = 8, ncol = 2)
Y = c(4,5,0,2,4,1,-4,3)
ind = c(rep(1,4),rep(2,4))
hettestlist &lt;- hetcv.test(T,tau,Y,ind,ngates=2)
hettestlist$stat
hettestlist$pval
</code></pre>

<hr>
<h2 id='PAPD'>Estimation of the Population Average Prescription Difference in Randomized Experiments</h2><span id='topic+PAPD'></span>

<h3>Description</h3>

<p>This function estimates the Population Average Prescription Difference with a budget
constraint. The details of the methods for this design are given in Imai and Li (2019).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PAPD(T, Thatfp, Thatgp, Y, budget, centered = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PAPD_+3A_t">T</code></td>
<td>
<p>A vector of the unit-level binary treatment receipt variable for each sample.</p>
</td></tr>
<tr><td><code id="PAPD_+3A_thatfp">Thatfp</code></td>
<td>
<p>A vector of the unit-level binary treatment that would have been assigned by the
first individualized treatment rule. Please ensure that the percentage of treatment units of That is lower than the budget constraint.</p>
</td></tr>
<tr><td><code id="PAPD_+3A_thatgp">Thatgp</code></td>
<td>
<p>A vector of the unit-level binary treatment that would have been assigned by the
second individualized treatment rule. Please ensure that the percentage of treatment units of That is lower than the budget constraint.</p>
</td></tr>
<tr><td><code id="PAPD_+3A_y">Y</code></td>
<td>
<p>A vector of the outcome variable of interest for each sample.</p>
</td></tr>
<tr><td><code id="PAPD_+3A_budget">budget</code></td>
<td>
<p>The maximum percentage of population that can be treated under the
budget constraint. Should be a decimal between 0 and 1.</p>
</td></tr>
<tr><td><code id="PAPD_+3A_centered">centered</code></td>
<td>
<p>If <code>TRUE</code>, the outcome variables would be centered before processing. This minimizes
the variance of the estimator. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following items: </p>
<table role = "presentation">
<tr><td><code>papd</code></td>
<td>
<p>The estimated
Population Average Prescription Difference</p>
</td></tr> <tr><td><code>sd</code></td>
<td>
<p>The estimated standard deviation
of PAPD.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Michael Lingzhi Li, Technology and Operations Management, Harvard Business School
<a href="mailto:mili@hbs.edu">mili@hbs.edu</a>, <a href="https://www.michaellz.com/">https://www.michaellz.com/</a>;
</p>


<h3>References</h3>

<p>Imai and Li (2019). &ldquo;Experimental Evaluation of Individualized Treatment Rules&rdquo;,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>T = c(1,0,1,0,1,0,1,0)
That = c(0,1,1,0,0,1,1,0)
That2 = c(1,0,0,1,1,0,0,1)
Y = c(4,5,0,2,4,1,-4,3)
papdlist &lt;- PAPD(T,That,That2,Y,budget = 0.5)
papdlist$papd
papdlist$sd
</code></pre>

<hr>
<h2 id='PAPDcv'>Estimation of the Population Average Prescription Difference in Randomized Experiments Under Cross Validation</h2><span id='topic+PAPDcv'></span>

<h3>Description</h3>

<p>This function estimates the Population Average Prescription Difference with a budget constaint under cross validation. The details of the methods for this design are given in Imai and Li (2019).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PAPDcv(T, Thatfp, Thatgp, Y, ind, budget, centered = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PAPDcv_+3A_t">T</code></td>
<td>
<p>A vector of the unit-level binary treatment receipt variable for each sample.</p>
</td></tr>
<tr><td><code id="PAPDcv_+3A_thatfp">Thatfp</code></td>
<td>
<p>A matrix where the <code>i</code>th column is the unit-level binary treatment that would have been assigned by the first
individualized treatment rule generated in the <code>i</code>th fold. Please ensure
that the percentage of treatment units of That is lower than the budget constraint.</p>
</td></tr>
<tr><td><code id="PAPDcv_+3A_thatgp">Thatgp</code></td>
<td>
<p>A matrix where the <code>i</code>th column is the unit-level binary treatment that would have been assigned by the second
individualized treatment rule generated in the <code>i</code>th fold. Please ensure
that the percentage of treatment units of That is lower than the budget constraint.</p>
</td></tr>
<tr><td><code id="PAPDcv_+3A_y">Y</code></td>
<td>
<p>The outcome variable of interest.</p>
</td></tr>
<tr><td><code id="PAPDcv_+3A_ind">ind</code></td>
<td>
<p>A vector of integers (between 1 and number of folds inclusive) indicating which testing set does each sample belong to.</p>
</td></tr>
<tr><td><code id="PAPDcv_+3A_budget">budget</code></td>
<td>
<p>The maximum percentage of population that can be treated under the
budget constraint. Should be a decimal between 0 and 1.</p>
</td></tr>
<tr><td><code id="PAPDcv_+3A_centered">centered</code></td>
<td>
<p>If <code>TRUE</code>, the outcome variables would be centered before processing. This minimizes
the variance of the estimator. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following items: </p>
<table role = "presentation">
<tr><td><code>papd</code></td>
<td>
<p>The estimated
Population Average Prescription Difference.</p>
</td></tr> <tr><td><code>sd</code></td>
<td>
<p>The estimated standard deviation
of PAPD.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Michael Lingzhi Li, Technology and Operations Management, Harvard Business School
<a href="mailto:mili@hbs.edu">mili@hbs.edu</a>, <a href="https://www.michaellz.com/">https://www.michaellz.com/</a>;
</p>


<h3>References</h3>

<p>Imai and Li (2019). &ldquo;Experimental Evaluation of Individualized Treatment Rules&rdquo;,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>T = c(1,0,1,0,1,0,1,0)
That = matrix(c(0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1), nrow = 8, ncol = 2)
That2 = matrix(c(0,0,1,1,0,0,1,1,1,1,0,0,1,1,0,0), nrow = 8, ncol = 2)
Y = c(4,5,0,2,4,1,-4,3)
ind = c(rep(1,4),rep(2,4))
papdlist &lt;- PAPDcv(T, That, That2, Y, ind, budget = 0.5)
papdlist$papd
papdlist$sd
</code></pre>

<hr>
<h2 id='PAPE'>Estimation of the Population Average Prescription Effect in Randomized Experiments</h2><span id='topic+PAPE'></span>

<h3>Description</h3>

<p>This function estimates the Population Average Prescription Effect with and without a budget
constraint. The details of the methods for this design are given in Imai and Li (2019).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PAPE(T, That, Y, budget = NA, centered = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PAPE_+3A_t">T</code></td>
<td>
<p>A vector of the unit-level binary treatment receipt variable for each sample.</p>
</td></tr>
<tr><td><code id="PAPE_+3A_that">That</code></td>
<td>
<p>A vector of the unit-level binary treatment that would have been assigned by the
individualized treatment rule. If <code>budget</code> is specified, please ensure
that the percentage of treatment units of That is lower than the budget constraint.</p>
</td></tr>
<tr><td><code id="PAPE_+3A_y">Y</code></td>
<td>
<p>A vector of the outcome variable of interest for each sample.</p>
</td></tr>
<tr><td><code id="PAPE_+3A_budget">budget</code></td>
<td>
<p>The maximum percentage of population that can be treated under the
budget constraint. Should be a decimal between 0 and 1. Default is NA which assumes
no budget constraint.</p>
</td></tr>
<tr><td><code id="PAPE_+3A_centered">centered</code></td>
<td>
<p>If <code>TRUE</code>, the outcome variables would be centered before processing. This minimizes
the variance of the estimator. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following items: </p>
<table role = "presentation">
<tr><td><code>pape</code></td>
<td>
<p>The estimated
Population Average Prescription Effect.</p>
</td></tr> <tr><td><code>sd</code></td>
<td>
<p>The estimated standard deviation
of PAPE.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Michael Lingzhi Li, Technology and Operations Management, Harvard Business School
<a href="mailto:mili@hbs.edu">mili@hbs.edu</a>, <a href="https://www.michaellz.com/">https://www.michaellz.com/</a>;
</p>


<h3>References</h3>

<p>Imai and Li (2019). &ldquo;Experimental Evaluation of Individualized Treatment Rules&rdquo;,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>T = c(1,0,1,0,1,0,1,0)
That = c(0,1,1,0,0,1,1,0)
Y = c(4,5,0,2,4,1,-4,3)
papelist &lt;- PAPE(T,That,Y)
papelist$pape
papelist$sd
</code></pre>

<hr>
<h2 id='PAPEcv'>Estimation of the Population Average Prescription Effect in Randomized Experiments Under Cross Validation</h2><span id='topic+PAPEcv'></span>

<h3>Description</h3>

<p>This function estimates the Population Average Prescription Effect with and without a budget
constraint. The details of the methods for this design are given in Imai and Li (2019).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PAPEcv(T, That, Y, ind, budget = NA, centered = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PAPEcv_+3A_t">T</code></td>
<td>
<p>A vector of the unit-level binary treatment receipt variable for each sample.</p>
</td></tr>
<tr><td><code id="PAPEcv_+3A_that">That</code></td>
<td>
<p>A matrix where the <code>i</code>th column is the unit-level binary treatment that would have been assigned by the
individualized treatment rule generated in the <code>i</code>th fold. If <code>budget</code> is specified, please ensure
that the percentage of treatment units of That is lower than the budget constraint.</p>
</td></tr>
<tr><td><code id="PAPEcv_+3A_y">Y</code></td>
<td>
<p>The outcome variable of interest.</p>
</td></tr>
<tr><td><code id="PAPEcv_+3A_ind">ind</code></td>
<td>
<p>A vector of integers (between 1 and number of folds inclusive) indicating which testing set does each sample belong to.</p>
</td></tr>
<tr><td><code id="PAPEcv_+3A_budget">budget</code></td>
<td>
<p>The maximum percentage of population that can be treated under the
budget constraint. Should be a decimal between 0 and 1. Default is NA which assumes
no budget constraint.</p>
</td></tr>
<tr><td><code id="PAPEcv_+3A_centered">centered</code></td>
<td>
<p>If <code>TRUE</code>, the outcome variables would be centered before processing. This minimizes
the variance of the estimator. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following items: </p>
<table role = "presentation">
<tr><td><code>pape</code></td>
<td>
<p>The estimated
Population Average Prescription Effect.</p>
</td></tr> <tr><td><code>sd</code></td>
<td>
<p>The estimated standard deviation
of PAPE.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Michael Lingzhi Li, Technology and Operations Management, Harvard Business School
<a href="mailto:mili@hbs.edu">mili@hbs.edu</a>, <a href="https://www.michaellz.com/">https://www.michaellz.com/</a>;
</p>


<h3>References</h3>

<p>Imai and Li (2019). &ldquo;Experimental Evaluation of Individualized Treatment Rules&rdquo;,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>T = c(1,0,1,0,1,0,1,0)
That = matrix(c(0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1), nrow = 8, ncol = 2)
Y = c(4,5,0,2,4,1,-4,3)
ind = c(rep(1,4),rep(2,4))
papelist &lt;- PAPEcv(T, That, Y, ind)
papelist$pape
papelist$sd
</code></pre>

<hr>
<h2 id='PAV'>Estimation of the Population Average Value in Randomized Experiments</h2><span id='topic+PAV'></span>

<h3>Description</h3>

<p>This function estimates the Population Average Value. The details of the methods for this design are given in Imai and Li (2019).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PAV(T, That, Y, centered = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PAV_+3A_t">T</code></td>
<td>
<p>A vector of the unit-level binary treatment receipt variable for each sample.</p>
</td></tr>
<tr><td><code id="PAV_+3A_that">That</code></td>
<td>
<p>A vector of the unit-level binary treatment that would have been assigned by the
individualized treatment rule. If <code>budget</code> is specified, please ensure
that the percentage of treatment units of That is lower than the budget constraint.</p>
</td></tr>
<tr><td><code id="PAV_+3A_y">Y</code></td>
<td>
<p>A vector of the outcome variable of interest for each sample.</p>
</td></tr>
<tr><td><code id="PAV_+3A_centered">centered</code></td>
<td>
<p>If <code>TRUE</code>, the outcome variables would be centered before processing. This minimizes
the variance of the estimator. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following items: </p>
<table role = "presentation">
<tr><td><code>pav</code></td>
<td>
<p>The estimated
Population Average Value.</p>
</td></tr> <tr><td><code>sd</code></td>
<td>
<p>The estimated standard deviation
of PAV.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Michael Lingzhi Li, Technology and Operations Management, Harvard Business School
<a href="mailto:mili@hbs.edu">mili@hbs.edu</a>, <a href="https://www.michaellz.com/">https://www.michaellz.com/</a>;
</p>


<h3>References</h3>

<p>Imai and Li (2019). &ldquo;Experimental Evaluation of Individualized Treatment Rules&rdquo;,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>T = c(1,0,1,0,1,0,1,0)
That = c(0,1,1,0,0,1,1,0)
Y = c(4,5,0,2,4,1,-4,3)
pavlist &lt;- PAV(T,That,Y)
pavlist$pav
pavlist$sd
</code></pre>

<hr>
<h2 id='PAVcv'>Estimation of the Population Average Value in Randomized Experiments Under Cross Validation</h2><span id='topic+PAVcv'></span>

<h3>Description</h3>

<p>This function estimates the Population Average Value. The details of the methods for this design are given in Imai and Li (2019).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PAVcv(T, That, Y, ind, centered = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PAVcv_+3A_t">T</code></td>
<td>
<p>A vector of the unit-level binary treatment receipt variable for each sample.</p>
</td></tr>
<tr><td><code id="PAVcv_+3A_that">That</code></td>
<td>
<p>A matrix where the <code>i</code>th column is the unit-level binary treatment that would have been assigned by the
individualized treatment rule generated in the <code>i</code>th fold. If <code>budget</code> is specified, please ensure
that the percentage of treatment units of That is lower than the budget constraint.</p>
</td></tr>
<tr><td><code id="PAVcv_+3A_y">Y</code></td>
<td>
<p>The outcome variable of interest.</p>
</td></tr>
<tr><td><code id="PAVcv_+3A_ind">ind</code></td>
<td>
<p>A vector of integers (between 1 and number of folds inclusive) indicating which testing set does each sample belong to.</p>
</td></tr>
<tr><td><code id="PAVcv_+3A_centered">centered</code></td>
<td>
<p>If <code>TRUE</code>, the outcome variables would be centered before processing. This minimizes
the variance of the estimator. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following items: </p>
<table role = "presentation">
<tr><td><code>pav</code></td>
<td>
<p>The estimated
Population Average Value.</p>
</td></tr> <tr><td><code>sd</code></td>
<td>
<p>The estimated standard deviation
of PAV.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Michael Lingzhi Li, Technology and Operations Management, Harvard Business School
<a href="mailto:mili@hbs.edu">mili@hbs.edu</a>, <a href="https://www.michaellz.com/">https://www.michaellz.com/</a>;
</p>


<h3>References</h3>

<p>Imai and Li (2019). &ldquo;Experimental Evaluation of Individualized Treatment Rules&rdquo;,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>T = c(1,0,1,0,1,0,1,0)
That = matrix(c(0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1), nrow = 8, ncol = 2)
Y = c(4,5,0,2,4,1,-4,3)
ind = c(rep(1,4),rep(2,4))
pavlist &lt;- PAVcv(T, That, Y, ind)
pavlist$pav
pavlist$sd
</code></pre>

<hr>
<h2 id='plot_estimate'>Plot the GATE estimate</h2><span id='topic+plot_estimate'></span>

<h3>Description</h3>

<p>Plot the GATE estimate
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_estimate(x, type, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_estimate_+3A_x">x</code></td>
<td>
<p>An table object. This is typically an output of <code>evaluate_itr()</code> function.</p>
</td></tr>
<tr><td><code id="plot_estimate_+3A_type">type</code></td>
<td>
<p>The metric that you wish to plot. One of GATE, PAPE, PAPEp, or PAPDp.</p>
</td></tr>
<tr><td><code id="plot_estimate_+3A_...">...</code></td>
<td>
<p>Further arguments passed to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot of ggplot2 object.
</p>

<hr>
<h2 id='plot.itr'>Plot the AUPEC curve</h2><span id='topic+plot.itr'></span>

<h3>Description</h3>

<p>Plot the AUPEC curve
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'itr'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.itr_+3A_x">x</code></td>
<td>
<p>An object of <code>evaluate_itr()</code> class. This is typically an output of <code>evaluate_itr()</code> function.</p>
</td></tr>
<tr><td><code id="plot.itr_+3A_...">...</code></td>
<td>
<p>Further arguments passed to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot of ggplot2 object.
</p>

<hr>
<h2 id='print.summary.itr'>Print</h2><span id='topic+print.summary.itr'></span>

<h3>Description</h3>

<p>Print
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'summary.itr'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.summary.itr_+3A_x">x</code></td>
<td>
<p>An object of <code>summary.itr</code> class. This is typically an output of <code>summary.itr()</code> function.</p>
</td></tr>
<tr><td><code id="print.summary.itr_+3A_...">...</code></td>
<td>
<p>Other parameters. Currently not supported.</p>
</td></tr>
</table>

<hr>
<h2 id='print.summary.test_itr'>Print</h2><span id='topic+print.summary.test_itr'></span>

<h3>Description</h3>

<p>Print
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'summary.test_itr'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.summary.test_itr_+3A_x">x</code></td>
<td>
<p>An object of <code>summary.test_itr</code> class. This is typically an output of <code>summary.test_itr()</code> function.</p>
</td></tr>
<tr><td><code id="print.summary.test_itr_+3A_...">...</code></td>
<td>
<p>Other parameters.</p>
</td></tr>
</table>

<hr>
<h2 id='star'>Tennesseeâ€™s Student/Teacher Achievement Ratio (STAR) project</h2><span id='topic+star'></span>

<h3>Description</h3>

<p>A longitudinal study experimentally evaluating the impacts of class size in early education on various outcomes (Mosteller, 1995)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>star
</code></pre>


<h3>Format</h3>

<p>A data frame with 1911 observations and 14 variables:
</p>

<dl>
<dt>treatment</dt><dd><p>A binary treatment indicating whether a student is assigned to small class and regular class without an aid</p>
</dd>
<dt>g3tlangss</dt><dd><p>A continous variable measuring student's writing scores</p>
</dd>
<dt>g3treadss</dt><dd><p>A continous variable measuring student's reading scores</p>
</dd>
<dt>g3tmathss</dt><dd><p>A continous variable measuring student's math scores</p>
</dd>
<dt>gender</dt><dd><p>Students' gender</p>
</dd> 
<dt>race</dt><dd><p>Students' race</p>
</dd> 
<dt>birthmonth</dt><dd><p>Students' birth month</p>
</dd>
<dt>birthyear</dt><dd><p>Students' birth year</p>
</dd>
<dt>SCHLURBN</dt><dd><p>Urban or rural</p>
</dd> 
<dt>GKENRMNT</dt><dd><p>Enrollment size</p>
</dd> 
<dt>GRDRANGE</dt><dd><p>Grade range</p>
</dd> 
<dt>GKFRLNCH</dt><dd><p>Number of students on free lunch</p>
</dd> 
<dt>GKBUSED</dt><dd><p>Number of students on school buses</p>
</dd> 
<dt>GKWHITE</dt><dd><p>Percentage of white students</p>
</dd>
</dl>


<hr>
<h2 id='summary.itr'>Summarize estimate_itr output</h2><span id='topic+summary.itr'></span>

<h3>Description</h3>

<p>Summarize estimate_itr output
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'itr'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.itr_+3A_object">object</code></td>
<td>
<p>An object of <code>estimate_itr</code> class (typically an output of <code>estimate_itr()</code> function).</p>
</td></tr>
<tr><td><code id="summary.itr_+3A_...">...</code></td>
<td>
<p>Other parameters.</p>
</td></tr>
</table>

<hr>
<h2 id='summary.test_itr'>Summarize test_itr output</h2><span id='topic+summary.test_itr'></span>

<h3>Description</h3>

<p>Summarize test_itr output
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'test_itr'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.test_itr_+3A_object">object</code></td>
<td>
<p>An object of <code>test_itr</code> class (typically an output of <code>test_itr()</code> function).</p>
</td></tr>
<tr><td><code id="summary.test_itr_+3A_...">...</code></td>
<td>
<p>Other parameters.</p>
</td></tr>
</table>

<hr>
<h2 id='test_itr'>Conduct hypothesis tests</h2><span id='topic+test_itr'></span>

<h3>Description</h3>

<p>Conduct hypothesis tests
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_itr(fit, nsim = 1000, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="test_itr_+3A_fit">fit</code></td>
<td>
<p>Fitted model. Usually an output from <code>estimate_itr</code></p>
</td></tr>
<tr><td><code id="test_itr_+3A_nsim">nsim</code></td>
<td>
<p>Number of Monte Carlo simulations used to simulate the null distributions. Default is 1000.</p>
</td></tr>
<tr><td><code id="test_itr_+3A_...">...</code></td>
<td>
<p>Further arguments passed to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of <code>test_itr</code> class
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
