<!DOCTYPE html><html lang="en"><head><title>Help for package dawaR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {dawaR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#autocomplete'><p>Base function for interacting with <code>autocomplete</code> of sections.</p></a></li>
<li><a href='#available_sections'><p>List of available sections for <code>dawa()</code></p></a></li>
<li><a href='#connection_check'><p>Check that <strong>R</strong> has access to resources at <code style="white-space: pre;">&#8288;https://api.dataforsyningen.dk&#8288;</code></p></a></li>
<li><a href='#dawa'><p>Base API function</p></a></li>
<li><a href='#get_data'><p>Get data from section</p></a></li>
<li><a href='#get_map_data'><p>Fetch map data to use with <code>{sf}</code>.</p></a></li>
<li><a href='#reverse'><p>Base function for interacting with <code style="white-space: pre;">&#8288;reverse geocoding&#8288;</code> of sections.</p></a></li>
<li><a href='#status_check'><p>Check that all DAWA services are operational</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>An API Wrapper for 'DAWA' - 'The Danish Address Web API'</td>
</tr>
<tr>
<td>Date:</td>
<td>2025-02-13</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions for interacting with all sections of
    the official 'Danish Address Web API' (also known as 'DAWA')
    <a href="https://api.dataforsyningen.dk">https://api.dataforsyningen.dk</a>. The development of this package is
    completely independent from the government agency, Klimadatastyrelsen,
    who maintains the API.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://dawar.aleksanderbl.dk/">https://dawar.aleksanderbl.dk/</a>,
<a href="https://github.com/aleksanderbl29/dawaR">https://github.com/aleksanderbl29/dawaR</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/aleksanderbl29/dawaR/issues">https://github.com/aleksanderbl29/dawaR/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, ggplot2, testthat (&ge; 3.0.0), cowplot (&ge;
1.1.0), rmapshaper (&ge; 0.5.0), microbenchmark (&ge; 1.5.0),
pkgdown, dplyr, devtools, vcr (&ge; 0.6.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>memoise (&ge; 2.0.0), cli, httr2, sf, tidyRSS, rlang, curl,
utils</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-13 16:00:40 UTC; aleksander</td>
</tr>
<tr>
<td>Author:</td>
<td>Aleksander Bang-Larsen
    <a href="https://orcid.org/0009-0007-7984-4650"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre,
    cph],
  Agency of Climate Data [ctb] (The Danish Agency of Climate Data
    provides this API for the public and have not actively contributed
    to the development nor distribution in this package.)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Aleksander Bang-Larsen &lt;contact@aleksanderbl.dk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-13 17:10:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='autocomplete'>Base function for interacting with <code>autocomplete</code> of sections.</h2><span id='topic+autocomplete'></span>

<h3>Description</h3>

<p>This function is very handy when needing to either validate or
simply &quot;fill in gaps&quot; with autocompletion from the API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>autocomplete(section, input, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="autocomplete_+3A_section">section</code></td>
<td>
<p>Defines what section of the api should be called.
<code>available_sections()</code> exposes all options for this parameter.</p>
</td></tr>
<tr><td><code id="autocomplete_+3A_input">input</code></td>
<td>
<p>The input to autocomplete. Could be a name, a place and similar.</p>
</td></tr>
<tr><td><code id="autocomplete_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; input query parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the autocomplete information for the provided <code>section</code>
given the input.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (connection_check()) {
  autocomplete("regioner", "midt")
}
</code></pre>

<hr>
<h2 id='available_sections'>List of available sections for <code>dawa()</code></h2><span id='topic+available_sections'></span>

<h3>Description</h3>

<p>Simple function to list all available options for the <code>section</code>
parameter in <code>dawa()</code>. Useful when getting to know the base api function of
this package. To filter based on funciton usage you can provide <code>format = "geojson"</code> to ensure compatability with <code>get_map_data()</code> and <code>func = "get_data"</code> to ensure compatability with <code>get_data()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>available_sections(as_list = FALSE, format = NULL, verbose = TRUE, func = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="available_sections_+3A_as_list">as_list</code></td>
<td>
<p>This options controls the output format. The output is either
a named list or an atomic vector with the available sections</p>
</td></tr>
<tr><td><code id="available_sections_+3A_format">format</code></td>
<td>
<p>Specify a format type. The function now returns only available
sections that can respond with that format. Currently <code>geojson</code> is the only
format that is specified.</p>
</td></tr>
<tr><td><code id="available_sections_+3A_verbose">verbose</code></td>
<td>
<p>whether or not to provide <code>{cli}</code> output for the user. Enabled
by default, but disabled for all functions that wrap this function</p>
</td></tr>
<tr><td><code id="available_sections_+3A_func">func</code></td>
<td>
<p>Sepcify the function you would like to ensure section
compatability with.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns either a named list or an atomic vector with the
available sections in the API. The format is decided by <code>as_list</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
available_sections()

available_sections(as_list = TRUE)

</code></pre>

<hr>
<h2 id='connection_check'>Check that <strong>R</strong> has access to resources at <code style="white-space: pre;">&#8288;https://api.dataforsyningen.dk&#8288;</code></h2><span id='topic+connection_check'></span>

<h3>Description</h3>

<p>Check that <strong>R</strong> has access to resources at <code style="white-space: pre;">&#8288;https://api.dataforsyningen.dk&#8288;</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>connection_check()
</code></pre>


<h3>Value</h3>

<p>Returns a logical
</p>


<h3>See Also</h3>

<p>Other Connection checks: 
<code><a href="#topic+status_check">status_check</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
connection_check()


</code></pre>

<hr>
<h2 id='dawa'>Base API function</h2><span id='topic+dawa'></span>

<h3>Description</h3>

<p>This function is the foundation of all communication with the
api in this package. Not intended for end-users, but it provides all the
flexibility of the api without the nice conveniences of the other functions
in this package. By default it reformats the api response (which is json)
to a list object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dawa(
  section,
  ...,
  append_to_url = NULL,
  format = NULL,
  verbose = TRUE,
  cache = TRUE,
  dry_run = FALSE,
  func_params = list()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dawa_+3A_section">section</code></td>
<td>
<p>Defines what section of the api should be called.
<code>available_sections()</code> exposes all options for this parameter.</p>
</td></tr>
<tr><td><code id="dawa_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; input query parameters.</p>
</td></tr>
<tr><td><code id="dawa_+3A_append_to_url">append_to_url</code></td>
<td>
<p>This options enables you to append a string to the url.
It is inserted in the request after the <code>section</code> but before the <code>...</code>.</p>
</td></tr>
<tr><td><code id="dawa_+3A_format">format</code></td>
<td>
<p>The format to provide as a query parameter for the api call. By
default it has value <code>NULL</code> and triggers default json formatting. When
<code>geojson</code> or <code>geojsonz</code> is provided, the function will return the raw json
data instead of the usual list.</p>
</td></tr>
<tr><td><code id="dawa_+3A_verbose">verbose</code></td>
<td>
<p>whether or not to provide <code>{cli}</code> output for the user. Enabled
by default, but disabled for all functions that wrap this function</p>
</td></tr>
<tr><td><code id="dawa_+3A_cache">cache</code></td>
<td>
<p>Option to use caching in a <code>tempdir()</code>. Enabled by default. More
info can be found in the documentation for <code>httr2::req_cache()</code>.</p>
</td></tr>
<tr><td><code id="dawa_+3A_dry_run">dry_run</code></td>
<td>
<p>With this option enabled, the function will output the request
that has been created - Without sending it to the api. This is useful for
debugging.</p>
</td></tr>
<tr><td><code id="dawa_+3A_func_params">func_params</code></td>
<td>
<p>Option to include extra parameters (just like <code>...</code>
above). This option is used to pass down the dot-inputs from <code>get_data()</code>
and <code>get_map_data()</code>. It is recommended to use the dynamic dots instead of
this option, as an end user.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>By default returns the API response as a list output. For
<code>geojson(z)</code> formats it returns the raw json. When <code>dry_run = TRUE</code> it
returns the request that has been created but does not run it.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (connection_check()) {
  x &lt;- dawa(section = "sogne")

  x[[1]]
}
</code></pre>

<hr>
<h2 id='get_data'>Get data from section</h2><span id='topic+get_data'></span>

<h3>Description</h3>

<p>Get data from section
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_data(section, as_list = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_data_+3A_section">section</code></td>
<td>
<p>Defines what section of the api should be called.
<code>available_sections()</code> exposes all options for this parameter.</p>
</td></tr>
<tr><td><code id="get_data_+3A_as_list">as_list</code></td>
<td>
<p>Whether or not to return the data as a list or in a dataframe.
Data.frame is the default output.</p>
</td></tr>
<tr><td><code id="get_data_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; input query parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns either a dataframe with all the data for the specified
section or a list with the same information.
</p>


<h3>See Also</h3>

<p>Other Data functions: 
<code><a href="#topic+get_map_data">get_map_data</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (connection_check()) {
  x &lt;- get_data("regioner")
  head(x)
}
</code></pre>

<hr>
<h2 id='get_map_data'>Fetch map data to use with <code>{sf}</code>.</h2><span id='topic+get_map_data'></span>

<h3>Description</h3>

<p>This function returns map data from DAWA. It is ready to use
with <code>{sf}</code> functions. The returned dataframe has date-time columns to inform
when the information was last changed. It is returned in Europe/Copenhagen
time as that is the <em>local time</em> for the API. You can change that behavior by
setting <code>Sys.setenv(TZ = "Your/Timezone")</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_map_data(type, cache = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_map_data_+3A_type">type</code></td>
<td>
<p>Defines the type of map data to request from DAWA. Run
<code>available_sections(format = "geojson")</code> to see your options.</p>
</td></tr>
<tr><td><code id="get_map_data_+3A_cache">cache</code></td>
<td>
<p>Boolean to determine whether or not to cache the api call and
the function output. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="get_map_data_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; input query parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>data.frame</code> object that contains polygons (or points) for
the section provided.
</p>


<h3>See Also</h3>

<p>Other Data functions: 
<code><a href="#topic+get_data">get_data</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
x &lt;- get_map_data("regioner")
ggplot2::ggplot(x) +
  ggplot2::geom_sf()

## End(Not run)
</code></pre>

<hr>
<h2 id='reverse'>Base function for interacting with <code style="white-space: pre;">&#8288;reverse geocoding&#8288;</code> of sections.</h2><span id='topic+reverse'></span>

<h3>Description</h3>

<p>This function reverse geocodes the coordinates provided. When
used out of the box, the function wants WGS84 coordinates (lat/long). ETRS89
or UTM zone 32 can be provided as well. When coordinates from outside of
Denmark is provided, the function will fail with a code <code>404</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reverse(section, x, y, verbose = TRUE, type = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="reverse_+3A_section">section</code></td>
<td>
<p>Defines what section of the api should be called.
<code>available_sections()</code> exposes all options for this parameter.</p>
</td></tr>
<tr><td><code id="reverse_+3A_x">x</code></td>
<td>
<p>The X coordinate to geocode. If no <code>srid</code> is provided this should be
the lattitude.</p>
</td></tr>
<tr><td><code id="reverse_+3A_y">y</code></td>
<td>
<p>The Y coordinate to geocode. If no <code>srid</code> is provided this should be
the longitude.</p>
</td></tr>
<tr><td><code id="reverse_+3A_verbose">verbose</code></td>
<td>
<p>whether or not to provide <code>{cli}</code> output for the user. Enabled
by default, but disabled for all functions that wrap this function</p>
</td></tr>
<tr><td><code id="reverse_+3A_type">type</code></td>
<td>
<p>The coordinate type for the API to parse. By default none is
provided and <code>WGS84</code> is used. The options are <code>ETRS89</code>, <code>UTM32</code> and
<code>WGS84</code>. The functions checks the input against the available types and
errs if the type is not allowed.</p>
</td></tr>
<tr><td><code id="reverse_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; input query parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list object with information about the provided <code>section</code>
for the location that is input.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (connection_check()) {
  reverse("regioner", x = 12.58515, y = 55.68324)
}
</code></pre>

<hr>
<h2 id='status_check'>Check that all DAWA services are operational</h2><span id='topic+status_check'></span>

<h3>Description</h3>

<p>This function fetches the status of all available SDFI services.
This package depends on at least one of these. It checks the official
status page. The status can also be followed on their official X-page
<code style="white-space: pre;">&#8288;@DriftDataforsyn&#8288;</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>status_check(return_df = FALSE, error_if_unavailable = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="status_check_+3A_return_df">return_df</code></td>
<td>
<p>This option makes the function return a data.frame object
with the services and their statuses listed</p>
</td></tr>
<tr><td><code id="status_check_+3A_error_if_unavailable">error_if_unavailable</code></td>
<td>
<p>This option forces the function to throw an error
in the event that one or more services are unreachable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame object with the services and their statuses. Is
only returned if <code>return_df = TRUE</code>.
</p>


<h3>Note</h3>

<p>Please note that the status at the status page is only checked at
regular intervals. If you would like to know if your machine can access the
serviceses, please try <code>connection_check()</code> as well.
</p>


<h3>See Also</h3>

<p>Other Connection checks: 
<code><a href="#topic+connection_check">connection_check</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (connection_check()) {
  status_check()

  status_check(return_df = TRUE)
}
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
