<!DOCTYPE html><html><head><title>Help for package PAMpal</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {PAMpal}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#AcousticEvent-class'><p><code>AcousticEvent</code> Class</p></a></li>
<li><a href='#AcousticStudy-class'><p><code>AcousticStudy</code> Class</p></a></li>
<li><a href='#addAnnotation'><p>Add Annotation Data to an AcousticStudy Object</p></a></li>
<li><a href='#addBinaries'><p>Add Binaries to a PAMpalSettings Object</p></a></li>
<li><a href='#addCalibration'><p>Add a Calibration File to a PAMpalSettings Object</p></a></li>
<li><a href='#addDatabase'><p>Add a Database to a PAMpalSettings Object</p></a></li>
<li><a href='#addFPOD'><p>Add FPOD Detector to an AcousticStudy</p></a></li>
<li><a href='#addFunction'><p>Add a Function to a PAMpalSettings Object</p></a></li>
<li><a href='#addGps'><p>Add GPS Locations to an AcousticStudy</p></a></li>
<li><a href='#addHydrophoneDepth'><p>Add Hydrophone Depth Data to an AcousticStudy</p></a></li>
<li><a href='#addMeasures'><p>Add Measures</p></a></li>
<li><a href='#addNote'><p>addNote</p></a></li>
<li><a href='#addRecordings'><p>Add Recordings to an AcousticStudy Object</p></a></li>
<li><a href='#addSettings'><p>Add Settingss to a PAMpalSettings Object</p></a></li>
<li><a href='#bindStudies'><p>Combine AcousticStudy Objects</p></a></li>
<li><a href='#calculateAverageSpectra'><p>Calculate Average Spectra of Clicks</p></a></li>
<li><a href='#calculateICI'><p>Calculate Inter-Click Interval</p></a></li>
<li><a href='#calculateModuleData'><p>Run Custom Calculations on Pamguard Module Data</p></a></li>
<li><a href='#checkStudy'><p>Check an AcousticStudy Object for Issues</p></a></li>
<li><a href='#export_banter'><p>Export Data for a BANTER Model</p></a></li>
<li><a href='#exStudy'><p>Example AcousticStudy Object</p></a></li>
<li><a href='#filter.AcousticStudy'><p>Filter an AcousticStudy or AcousticEvent Object</p></a></li>
<li><a href='#getBinaryData'><p>Get Raw Binary Data for Detections</p></a></li>
<li><a href='#getClipData'><p>Get Wav Clips of Data</p></a></li>
<li><a href='#getDetectorData'><p>Extract and Combine Detector Data</p></a></li>
<li><a href='#getWarnings'><p>Get Warning Messages</p></a></li>
<li><a href='#is.AcousticEvent'><p>Check if an Object is an AcousticEvent</p></a></li>
<li><a href='#is.AcousticStudy'><p>Check if an Object is an AcousticStudy</p></a></li>
<li><a href='#is.PAMpalSettings'><p>Check if an Object is a PAMpalSettings</p></a></li>
<li><a href='#loadPamguardXML'><p>Load Pamguard XML Settings</p></a></li>
<li><a href='#markAnnotated'><p>Mark Detections as Annotated</p></a></li>
<li><a href='#matchEnvData,AcousticEvent-method'><p>Match Environmental Data to an AcousticStudy Object</p></a></li>
<li><a href='#matchTimeData'><p>Match time-based data to PAMpal objects</p></a></li>
<li><a href='#PAMpal.accessors'><p><code>AcousticEvent</code> and <code>AcousticStudy</code> accessors</p></a></li>
<li><a href='#PAMpalSettings'><p>Constructor for PAMpalSettings Object</p></a></li>
<li><a href='#PAMpalSettings-class'><p><code>PAMpalSettings</code> Class</p></a></li>
<li><a href='#plotDataExplorer'><p>Explore Data in an Interactive Plot</p></a></li>
<li><a href='#plotGram'><p>Plot Spectrogram or Cepstrogram</p></a></li>
<li><a href='#plotWaveform'><p>Plot Graphical Representations of Waveforms</p></a></li>
<li><a href='#processPgDetections'><p>Load and Process Detections from Pamguard</p></a></li>
<li><a href='#removeBinaries'><p>Remove Binaries from a PAMpalSettings Object</p></a></li>
<li><a href='#removeCalibration'><p>Remove a Calibration Function from a PAMpalSettings Object</p></a></li>
<li><a href='#removeDatabase'><p>Remove a Database from a PAMpalSettings Object</p></a></li>
<li><a href='#removeFunction'><p>Remove a Function from a PAMpalSettings Object</p></a></li>
<li><a href='#removeNote'><p>removeNote</p></a></li>
<li><a href='#removeSettings'><p>Remove Settings from a PAMpalSettings Object</p></a></li>
<li><a href='#roccaWhistleCalcs'><p>Calculate a Set of Measurements for Whistles</p></a></li>
<li><a href='#sampleDetector'><p>Subsample Detectors in AcousticStudy</p></a></li>
<li><a href='#setSpecies'><p>Set the Species Classification of Events</p></a></li>
<li><a href='#standardCepstrumCalcs'><p>Calculate a Set of Measurements from a Cepstrum Contour</p></a></li>
<li><a href='#standardClickCalcs'><p>Calculate a Set of Measurements for Clicks</p></a></li>
<li><a href='#testCeps'><p>A fake cepstrum contour</p></a></li>
<li><a href='#testClick'><p>A two-channel recording of a delphinid click</p></a></li>
<li><a href='#testGPL'><p>A fake GPL detection</p></a></li>
<li><a href='#testWhistle'><p>A fake whistle contour</p></a></li>
<li><a href='#updateFiles'><p>Update Location of Files in an AcousticStudy</p></a></li>
<li><a href='#updatePamObject'><p>Update PAMpal S4 Object</p></a></li>
<li><a href='#writeEventClips'><p>Create Wav Clips of Data</p></a></li>
<li><a href='#writeWignerData'><p>Write Wigner Transform Data of Click Detections to Disk</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Load and Process Passive Acoustic Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Taiki Sakai &lt;taiki.sakai@noaa.gov&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Tools for loading and processing passive acoustic data. Read in data
    that has been processed in 'Pamguard' (<a href="https://www.pamguard.org/">https://www.pamguard.org/</a>), apply a suite
    processing functions, and export data for reports or external modeling tools. Parameter 
    calculations implement methods by Oswald et al (2007) &lt;<a href="https://doi.org/10.1121%2F1.2743157">doi:10.1121/1.2743157</a>&gt;,
    Griffiths et al (2020) &lt;<a href="https://doi.org/10.1121%2F10.0001229">doi:10.1121/10.0001229</a>&gt; and Baumann-Pickering et al (2010)
    &lt;<a href="https://doi.org/10.1121%2F1.3479549">doi:10.1121/1.3479549</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GNU General Public License]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0), PamBinaries (&ge; 1.3.0), PAMmisc (&ge; 1.8.3),
dplyr</td>
</tr>
<tr>
<td>Imports:</td>
<td>tuneR, seewave, gam, data.table, RSQLite, stringr, purrr,
methods, signal, tidyr, ggplot2, manipulate, knitr, xml2,
rlang, reticulate, lubridate, geosphere</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-11 22:38:52 UTC; tnsak</td>
</tr>
<tr>
<td>Author:</td>
<td>Taiki Sakai [aut, cre],
  Jay Barlow [ctb],
  Emily Griffiths [ctb],
  Michael Oswald [ctb],
  Simone Baumann-Pickering [ctb],
  Julie Oswald [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-11 23:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='AcousticEvent-class'><code>AcousticEvent</code> Class</h2><span id='topic+AcousticEvent-class'></span>

<h3>Description</h3>

<p>An S4 class storing acoustic detections from an Acoustic Event
as well as other related metadata
</p>


<h3>Slots</h3>


<dl>
<dt><code>id</code></dt><dd><p>unique id or name for this event</p>
</dd>
<dt><code>detectors</code></dt><dd><p>a list of data frames that have acoustic detections and
any measurements calculated on those detections. Each data frame is named
by the detector that made the detection</p>
</dd>
<dt><code>localizations</code></dt><dd><p>a named list storing localizations, named by method</p>
</dd>
<dt><code>settings</code></dt><dd><p>a list of recorder settings</p>
</dd>
<dt><code>species</code></dt><dd><p>a list of species classifications for this event, named by
classification method (ie. BANTER model, visual ID)</p>
</dd>
<dt><code>files</code></dt><dd><p>a list of files used to create this object, named by the type of
file (ie. binaries, database)</p>
</dd>
<dt><code>ancillary</code></dt><dd><p>a list of miscellaneous extra stuff. Store whatever you want here</p>
</dd>
</dl>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>

<hr>
<h2 id='AcousticStudy-class'><code>AcousticStudy</code> Class</h2><span id='topic+AcousticStudy-class'></span>

<h3>Description</h3>

<p>An S4 class storing acoustic data from an entire AcousticStudy
</p>


<h3>Slots</h3>


<dl>
<dt><code>id</code></dt><dd><p>a unique id for the study</p>
</dd>
<dt><code>events</code></dt><dd><p>a list of <a href="#topic+AcousticEvent-class">AcousticEvent</a> objects with
detections from the AcousticStudy</p>
</dd>
<dt><code>files</code></dt><dd><p>a list of folders and files containing the AcousticStudy data</p>
</dd>
<dt><code>gps</code></dt><dd><p>a data frame of gps coordinates for the entire AcousticStudy</p>
</dd>
<dt><code>pps</code></dt><dd><p>the <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object used to create this object</p>
</dd>
<dt><code>settings</code></dt><dd><p>a named list of various settings for detectors, localizers, etc.</p>
</dd>
<dt><code>effort</code></dt><dd><p>something about effort lol</p>
</dd>
<dt><code>models</code></dt><dd><p>a place to store any models run on your data</p>
</dd>
<dt><code>ancillary</code></dt><dd><p>miscellaneous extra data</p>
</dd>
</dl>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>

<hr>
<h2 id='addAnnotation'>Add Annotation Data to an AcousticStudy Object</h2><span id='topic+addAnnotation'></span><span id='topic+prepAnnotation'></span><span id='topic+getAnnotation'></span><span id='topic+checkAnnotation'></span><span id='topic+export_annomate'></span><span id='topic+matchRecordingUrl'></span>

<h3>Description</h3>

<p>Adds annotation data to an <a href="#topic+AcousticStudy-class">AcousticStudy</a>
object, usually in preparation for exporting to an external source.
Most pieces of the annotation form will be filled in by the user when
the function is called, but <code>lat</code>, <code>lon</code>, <code>time_start</code>,
<code>time_end</code>, <code>freq_low</code>, <code>freq_high</code>, <code>source_id</code>,
and <code>annotation_id</code> will be filled in automatically based on data
in each <a href="#topic+AcousticEvent-class">AcousticEvent</a>. Annotations are stored for each
event in the <code>ancillary</code> slot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addAnnotation(x, anno, verbose = TRUE)

prepAnnotation(
  x,
  specMap = NULL,
  mode = c("event", "detection"),
  interactive = FALSE,
  ...
)

getAnnotation(x)

checkAnnotation(x)

export_annomate(x, file = NULL)

matchRecordingUrl(anno, rec)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addAnnotation_+3A_x">x</code></td>
<td>
<p>an <a href="#topic+AcousticStudy-class">AcousticStudy</a> or <a href="#topic+AcousticEvent-class">AcousticEvent</a> object</p>
</td></tr>
<tr><td><code id="addAnnotation_+3A_anno">anno</code></td>
<td>
<p>an annotation dataframe</p>
</td></tr>
<tr><td><code id="addAnnotation_+3A_verbose">verbose</code></td>
<td>
<p>logical flag to print messages</p>
</td></tr>
<tr><td><code id="addAnnotation_+3A_specmap">specMap</code></td>
<td>
<p>data.frame to map species ids in <code>x</code> to names to be used
for the annotation (ex. from <code>'ZC'</code> to <code>'Ziphius cavirostris'</code>.
Dataframe must have columns <code>old</code> and <code>new</code></p>
</td></tr>
<tr><td><code id="addAnnotation_+3A_mode">mode</code></td>
<td>
<p>one of <code>'event'</code> or <code>'detection'</code> to create annotation for
events or detections</p>
</td></tr>
<tr><td><code id="addAnnotation_+3A_interactive">interactive</code></td>
<td>
<p>logical flag to fill annotation data interactively
(not recommended)</p>
</td></tr>
<tr><td><code id="addAnnotation_+3A_...">...</code></td>
<td>
<p>additional named arguments to fill in annotation data. If names match
a column in the annotation, that value will be used for all events or detections
in the annotation</p>
</td></tr>
<tr><td><code id="addAnnotation_+3A_file">file</code></td>
<td>
<p>file to write a CSV of the annotations to, if <code>NULL</code> (default)
then no file will be written</p>
</td></tr>
<tr><td><code id="addAnnotation_+3A_rec">rec</code></td>
<td>
<p>dataframe of recording url information. Must have column
<code>recording_url</code>. If clips were created using <a href="#topic+writeEventClips">writeEventClips</a>,
then must have column <code>filename</code> containing the wav file names. Other
column names will be automatically parsed from there. If wav files are from
another source, must contain columns <code>matchId</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same object as <code>x</code> with an <code>$annotation</code> item added
the the <code>ancillary</code> slot of each event in <code>x</code>
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>

<hr>
<h2 id='addBinaries'>Add Binaries to a PAMpalSettings Object</h2><span id='topic+addBinaries'></span>

<h3>Description</h3>

<p>Adds more binary files to the &quot;binaries&quot; slot of a
PAMpalSettings object. Interactively asks user to supply
folder location if not provided.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addBinaries(pps, folder = NULL, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addBinaries_+3A_pps">pps</code></td>
<td>
<p>a <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object to add binary files to</p>
</td></tr>
<tr><td><code id="addBinaries_+3A_folder">folder</code></td>
<td>
<p>a folder of binaries to add, all subfolders will also be added</p>
</td></tr>
<tr><td><code id="addBinaries_+3A_verbose">verbose</code></td>
<td>
<p>logical flag to show messages</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the same <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object as pps, with the binary
files contained in <code>folder</code> added to the &quot;binaries&quot; slot. Only
binary files for Click Detector and WhistlesMoans modules will be added,
since these are the only types PAMpal currently knows how to process
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# not recommended to create PPS like this, for example only
pps &lt;- new('PAMpalSettings')
binFolder &lt;- system.file('extdata', 'Binaries', package='PAMpal')
pps &lt;- addBinaries(pps, binFolder)
pps

</code></pre>

<hr>
<h2 id='addCalibration'>Add a Calibration File to a PAMpalSettings Object</h2><span id='topic+addCalibration'></span><span id='topic+applyCalibration'></span>

<h3>Description</h3>

<p>Adds a new calibration function to the &quot;calibration&quot; slot
of a PAMpalSettings object. Interactively asks user to supply
file and other parameters if not supplied.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addCalibration(
  pps,
  calFile = NULL,
  module = "ClickDetector",
  calName = NULL,
  all = FALSE,
  units = NULL
)

applyCalibration(pps, module = "ClickDetector", all = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addCalibration_+3A_pps">pps</code></td>
<td>
<p>a <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object to add a database to</p>
</td></tr>
<tr><td><code id="addCalibration_+3A_calfile">calFile</code></td>
<td>
<p>a calibration file name. Must be csv format with two columns.
The first column must be the frequency (in Hz), and the second column must be the
sensitivity (in dB), and the columns should be labeled <code>Frequency</code>
and <code>Sensitivity</code>. Can also be supplied as a dataframe in which
case the <code>calName</code> argument should also be set</p>
</td></tr>
<tr><td><code id="addCalibration_+3A_module">module</code></td>
<td>
<p>the Pamguard module type this calibration should be applied to,
for now this is only for ClickDetector modules. This is left as an option
for future-proofing purposes but should not be needed.</p>
</td></tr>
<tr><td><code id="addCalibration_+3A_calname">calName</code></td>
<td>
<p>the name to assign to the calibration function, defaults to
the file name and only needs to be set if supplying a dataframe instead of
a csv file</p>
</td></tr>
<tr><td><code id="addCalibration_+3A_all">all</code></td>
<td>
<p>logical flag whether or not to apply calibration to all functions
without asking individually, recommended to stay as <code>FALSE</code></p>
</td></tr>
<tr><td><code id="addCalibration_+3A_units">units</code></td>
<td>
<p>a number from 1 to 3 specifying the units of the calibration file,
number corresponds to dB re V/uPa, uPa/Counts, or uPa/FullScale respectively.
A NULL (default) or other value will prompt user to select units.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When adding a calibration, you will be asked what units your calibration
value is in. The wave clips stored by Pamguard are values from -1 to 1, so if
your calibration is expecting different units then this needs to be accounted
for in order to get an accurate SPL value. For V / uPa you must know the voltage
range of your recording equipment, and for calibrations expecting Count data you
must know the bit rate of your recordings. If your calibration is already relative
to full-scale, then nothing needs to be adjusted. If you don't know the units of
your calibration and you are only interested in relative dB levels, then you can
select the Full-Scale options.
</p>
<p>The calibration function created takes frequency (in Hz) as input and
outputs the associated dB value that needs to be added to correct the
power spectrum of a signal. If the input is a matrix or dataframe, the first
column is assumed to be frequency.
</p>


<h3>Value</h3>

<p>the same <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object as pps, with the calibration
function added to the <code>calibration</code> slot.
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
pps &lt;- new('PAMpalSettings')
calFile &lt;- system.file('extdata', 'calibration.csv', package='PAMpal')
pps &lt;- addCalibration(pps, calFile, all = TRUE, units=3)
calClick &lt;- function(data, calibration=NULL) {
    standardClickCalcs(data, calibration=calibration, filterfrom_khz = 0)
}
pps &lt;- addFunction(pps, calClick, module = 'ClickDetector')
pps &lt;- applyCalibration(pps, all=TRUE)
pps

</code></pre>

<hr>
<h2 id='addDatabase'>Add a Database to a PAMpalSettings Object</h2><span id='topic+addDatabase'></span>

<h3>Description</h3>

<p>Adds a new function to the &quot;function&quot; slot in a PAMpalSettings
object. Interactively asks for database files if none are supplied as input
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addDatabase(pps, db = NULL, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addDatabase_+3A_pps">pps</code></td>
<td>
<p>a <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object to add a database to</p>
</td></tr>
<tr><td><code id="addDatabase_+3A_db">db</code></td>
<td>
<p>database(s) to add, or single directory containing databases</p>
</td></tr>
<tr><td><code id="addDatabase_+3A_verbose">verbose</code></td>
<td>
<p>logical flag to show messages</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the same <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object as pps, with the database
<code>db</code> added to the &quot;db&quot; slot
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# not recommended to create a pps like this, for example only
pps &lt;- new('PAMpalSettings')
db &lt;- system.file('extdata', 'Example.sqlite3', package='PAMpal')
pps &lt;- addDatabase(pps, db)
pps

</code></pre>

<hr>
<h2 id='addFPOD'>Add FPOD Detector to an AcousticStudy</h2><span id='topic+addFPOD'></span>

<h3>Description</h3>

<p>Adds data from FPOD detector CSV files to an
<a href="#topic+AcousticStudy-class">AcousticStudy</a> object as new detectors of type
<code>"fpod"</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addFPOD(x, fpod, detectorName = "FPOD")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addFPOD_+3A_x">x</code></td>
<td>
<p>an <a href="#topic+AcousticStudy-class">AcousticStudy</a> object</p>
</td></tr>
<tr><td><code id="addFPOD_+3A_fpod">fpod</code></td>
<td>
<p>path(s) to CSV files containing FPOD detector output</p>
</td></tr>
<tr><td><code id="addFPOD_+3A_detectorname">detectorName</code></td>
<td>
<p>name for the detector, the default <code>'FPOD'</code> should be
fine unless you want to differentiate between multiple FPOD detectors</p>
</td></tr>
</table>


<h3>Details</h3>

<p>FPOD detections are added to events based on their times. All detections
between the start and end times events. NOTE: most <code>PAMpal</code> functions were designed
with only PAMGuard data in mind, there is a chance that adding FPOD detections will
cause other advanced functionality to not work.
</p>
<p>Behavior is slightly different depending
on how the original AcousticStudy was created. For those processed with
<code>mode='db'</code>, the start and end times for each event are just determined
by the times of detections within the event.
</p>
<p>For those processed with
<code>mode='recording'</code> or <code>mode='time'</code>, the start and end times for
each event are determined by the start/end times of the recording files or
the grouping file provided initially. This means that it is possible that
there are events which initially had zero PAMGuard detections that now have
FPOD detections. In these cases a new AcousticEvent will be created that only
has FPOD detections, these events may not work with a variety of other ]codePAMpal
functions.
</p>


<h3>Value</h3>

<p>the same object as <code>x</code> with FPOD detector data added
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>

<hr>
<h2 id='addFunction'>Add a Function to a PAMpalSettings Object</h2><span id='topic+addFunction'></span>

<h3>Description</h3>

<p>Adds a new function to the &quot;function&quot; slot in a PAMpalSettings
object. Must be run interactively, user will be prompted to assign
values for any parameters in the function to be added
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addFunction(pps, fun, module = NULL, verbose = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addFunction_+3A_pps">pps</code></td>
<td>
<p>a <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object to add a function to</p>
</td></tr>
<tr><td><code id="addFunction_+3A_fun">fun</code></td>
<td>
<p>function to add OR another <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object.
In this case all functions from the second object will be added to <code>pps</code></p>
</td></tr>
<tr><td><code id="addFunction_+3A_module">module</code></td>
<td>
<p>Pamguard module output this function should act on, one of
ClickDetector, WhistlesMoans, Cepstrum, or GPLDetector. If <code>NULL</code> (default), user
will be prompted to select which module it applies to</p>
</td></tr>
<tr><td><code id="addFunction_+3A_verbose">verbose</code></td>
<td>
<p>logical flag to show messages</p>
</td></tr>
<tr><td><code id="addFunction_+3A_...">...</code></td>
<td>
<p>named arguments to pass to function being added</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the same <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object as pps, with the function
<code>fun</code> added to the &quot;functions&quot; slot
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# not recommended to create a pps like this, for example only
pps &lt;- new('PAMpalSettings')
if(interactive()) pps &lt;- addFunction(pps, standardClickCalcs)
pps &lt;- addFunction(pps, roccaWhistleCalcs, module='WhistlesMoans')

</code></pre>

<hr>
<h2 id='addGps'>Add GPS Locations to an AcousticStudy</h2><span id='topic+addGps'></span><span id='topic+addGps+2Cdata.frame-method'></span><span id='topic+addGps+2CAcousticEvent-method'></span><span id='topic+addGps+2Clist-method'></span><span id='topic+addGps+2CAcousticStudy-method'></span><span id='topic+addGps+2CANY-method'></span>

<h3>Description</h3>

<p>Add GPS Lat / Long to an AcousticStudy or AcousticEvent.
If GPS data is not present in any of the databases, user will
interactively be asked to provide GPS data to add
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addGps(x, gps = NULL, thresh = 3600, ...)

## S4 method for signature 'data.frame'
addGps(x, gps, thresh = 3600, keepDiff = FALSE, ...)

## S4 method for signature 'AcousticEvent'
addGps(x, gps = NULL, thresh = 3600, ...)

## S4 method for signature 'list'
addGps(x, gps = NULL, thresh = 3600, ...)

## S4 method for signature 'AcousticStudy'
addGps(x, gps = NULL, thresh = 3600, ...)

## S4 method for signature 'ANY'
addGps(x, gps = NULL, thresh = 3600, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addGps_+3A_x">x</code></td>
<td>
<p>data to add GPS coordinates to. Must have a column <code>UTC</code>, and
can also have an optional column <code>Channel</code></p>
</td></tr>
<tr><td><code id="addGps_+3A_gps">gps</code></td>
<td>
<p>a data frame of GPS coordinates to match to data from <code>x</code>.
Must have columns <code>UTC</code>, <code>Latitude</code>, <code>Longitude</code>, and
optionally <code>Channel</code>. If not provided and <code>x</code> is an
<a href="#topic+AcousticEvent-class">AcousticEvent</a> or <a href="#topic+AcousticStudy-class">AcousticStudy</a> object, then
the gps data will be read from the databases contained in the <code>files</code>
slot of <code>x</code></p>
</td></tr>
<tr><td><code id="addGps_+3A_thresh">thresh</code></td>
<td>
<p>maximum time apart in seconds for matching GPS coordinates to
data, if the closest coordinate is more than <code>thresh</code> apart then the
Latitude and Longitude values will be set to <code>NA</code></p>
</td></tr>
<tr><td><code id="addGps_+3A_...">...</code></td>
<td>
<p>additional arguments for other methods</p>
</td></tr>
<tr><td><code id="addGps_+3A_keepdiff">keepDiff</code></td>
<td>
<p>logical flag to keep time difference column (between GPS time
and data time)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Latitude and Longitude coordinates will be matched to the data
by interpolating between points in the provided GPS data. After the
interpolating is done, the time difference between the matched rows is checked
and any that are greater than the set threshold are set to NA. This is
done to prevent accidentally matching weird things if an incomplete set
of GPS data is provided. An approximate distance between the interpolated
points and the closest known GPS point is provided as a &quot;gpsUncertainty&quot;
column (distance in meters).
</p>
<p>If <code>x</code> is an <a href="#topic+AcousticEvent-class">AcousticEvent</a> or <a href="#topic+AcousticStudy-class">AcousticStudy</a>,
then <code>gps</code> can be omitted and will be read from the databases contained
in the <code>files</code> slot of <code>x</code>. If <code>x</code> is an <a href="#topic+AcousticStudy-class">AcousticStudy</a>,
then the gps data will also be saved to the <code>gps</code> slot of the object, and
an additional argument <code>bounds</code> can be provided. This is a length two vector
of <code>POSIXct</code> class times that will bound the times of gps data to store, gps
data outside this range will not be stored (to reduce the potentially very large
amount of data stored in the <code>gps</code> slot)
</p>


<h3>Value</h3>

<p>the same data as <code>x</code>, with Lat/Long data added. AcousticStudy objects
will have all GPS data used added to the &quot;gps&quot; slot, and all AcousticEvents will
have Latitude and Longitude added to all detector dataframes
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
# need to update database file to local directory
db &lt;- system.file('extdata', 'Example.sqlite3', package='PAMpal')
exStudy &lt;- updateFiles(exStudy, db=db, bin=NA, verbose=FALSE)
exStudy &lt;- addGps(exStudy)
head(gps(exStudy))

</code></pre>

<hr>
<h2 id='addHydrophoneDepth'>Add Hydrophone Depth Data to an AcousticStudy</h2><span id='topic+addHydrophoneDepth'></span>

<h3>Description</h3>

<p>Add hydrophone depth to an AcousticStudy or AcousticEvent
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addHydrophoneDepth(x, depth = NULL, depthCol = NULL, thresh = 60, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addHydrophoneDepth_+3A_x">x</code></td>
<td>
<p>an <a href="#topic+AcousticStudy-class">AcousticStudy</a> to add depth data to</p>
</td></tr>
<tr><td><code id="addHydrophoneDepth_+3A_depth">depth</code></td>
<td>
<p>a data frame of depth values to match to data from <code>x</code>.
Must have column <code>UTC</code>, and a column containing depth data to be
specified by <code>depthCol</code>. If not provided and <code>x</code> is an
<a href="#topic+AcousticEvent-class">AcousticEvent</a> or <a href="#topic+AcousticStudy-class">AcousticStudy</a> object, then
the depth data will be read from the databases contained in the <code>files</code>
slot of <code>x</code></p>
</td></tr>
<tr><td><code id="addHydrophoneDepth_+3A_depthcol">depthCol</code></td>
<td>
<p>the name of the column containing depth in the dataframe or
database. If left as <code>NULL</code>, will search for a single column containing
the word &quot;depth&quot; or &quot;Depth&quot;</p>
</td></tr>
<tr><td><code id="addHydrophoneDepth_+3A_thresh">thresh</code></td>
<td>
<p>maximum time apart in seconds for matching depth to
data, if the closest value is more than <code>thresh</code> apart then the
depth value will be set to <code>NA</code></p>
</td></tr>
<tr><td><code id="addHydrophoneDepth_+3A_...">...</code></td>
<td>
<p>additional arguments for other methods</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Depth values will be matched to the data
by using data.table's rolling join with <code>roll='nearest'</code>. After the
join is done, the time difference between the matched rows is checked
and any that are greater than the set threshold are set to NA. This is
done to prevent accidentally matching weird things if an incomplete set
of depth data is provided.
</p>
<p>If <code>x</code> is an <a href="#topic+AcousticEvent-class">AcousticEvent</a> or <a href="#topic+AcousticStudy-class">AcousticStudy</a>,
then <code>depth</code> can be omitted and will be read from the databases contained
in the <code>files</code> slot of <code>x</code>.
</p>


<h3>Value</h3>

<p>the same data as <code>x</code>, with depth data added. All AcousticEvents will
have depth data added to all detector dataframes as column <code>hpDepth</code>
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
# need to update database file to local directory
db &lt;- system.file('extdata', 'Example.sqlite3', package='PAMpal')
exStudy &lt;- updateFiles(exStudy, db=db, bin=NA, verbose=FALSE)
exStudy &lt;- addHydrophoneDepth(exStudy)
getClickData(exStudy[1])

</code></pre>

<hr>
<h2 id='addMeasures'>Add Measures</h2><span id='topic+addMeasures'></span><span id='topic+getMeasures'></span>

<h3>Description</h3>

<p>Adds &quot;measures&quot; to an AcousticStudy or AcousticEvent.
A &quot;measure&quot; is an event-level variable that will be exported
alongside data from that event
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addMeasures(x, measures, replace = TRUE)

getMeasures(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addMeasures_+3A_x">x</code></td>
<td>
<p>an <a href="#topic+AcousticStudy-class">AcousticStudy</a> or
<a href="#topic+AcousticEvent-class">AcousticEvent</a> object</p>
</td></tr>
<tr><td><code id="addMeasures_+3A_measures">measures</code></td>
<td>
<p>the measures to add. Can either be a named list,
where names match event names of <code>x</code> or a dataframe with
column <code>eventId</code> matching the event names of <code>x</code>. If
a list, every item within the list must also be named by the
variable name. All
other data within <code>measures</code> will be added as new measures</p>
</td></tr>
<tr><td><code id="addMeasures_+3A_replace">replace</code></td>
<td>
<p>logical flag whether or not to replace</p>
</td></tr>
</table>


<h3>Value</h3>

<p>object of same class as <code>x</code> with measures added
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
measList &lt;- list('Example.OE1' = list(a=1, b=2),
                 'Example.OE2' = list(a=2, b=3)
                 )
exMeasure &lt;- addMeasures(exStudy, measList)
print(getMeasures(exMeasure))
measDf &lt;- data.frame(eventId = c('Example.OE1', 'Example.OE2'),
                     a=4:5,
                     b=6:7)
exMeasure &lt;- addMeasures(exMeasure, measDf, replace=TRUE)
getMeasures(exMeasure)

</code></pre>

<hr>
<h2 id='addNote'>addNote</h2><span id='topic+addNote'></span><span id='topic+getNotes'></span>

<h3>Description</h3>

<p>Adds a note to an AcousticEvent or AcousticStudy. Notes can either
be accessed with the &quot;getNotes&quot; function, or up to 6 notes will be printed
when the object is printed
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addNote(x, to = c("study", "event"), evNum = 1, label = NULL, note)

getNotes(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addNote_+3A_x">x</code></td>
<td>
<p>An <a href="#topic+AcousticStudy-class">AcousticStudy</a> or <a href="#topic+AcousticEvent-class">AcousticEvent</a> object</p>
</td></tr>
<tr><td><code id="addNote_+3A_to">to</code></td>
<td>
<p>One of &quot;study&quot; or &quot;event&quot;, which object to add the note to</p>
</td></tr>
<tr><td><code id="addNote_+3A_evnum">evNum</code></td>
<td>
<p>If <code>x</code> is an AcousticStudy and <code>to</code> is &quot;event&quot;, the
number or name of the event(s) to add notes to (can be a vector of numbers
or names to add the same note to multiple events)</p>
</td></tr>
<tr><td><code id="addNote_+3A_label">label</code></td>
<td>
<p>(optional) a short header or label for the note. Recommended to
set this as a sumamry of the more detailed note</p>
</td></tr>
<tr><td><code id="addNote_+3A_note">note</code></td>
<td>
<p>the full note message</p>
</td></tr>
</table>


<h3>Value</h3>

<p>For <code>addNote</code>, the same data as <code>x</code>, with notes added.
For <code>getNotes</code>, a list of all notes present in <code>x</code>
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
exStudy &lt;- addNote(exStudy, to='study', label='Note1',
                   note='My first note for this study')
exStudy &lt;- addNote(exStudy, to='event', evNum=1:2, label='Note2',
                   note='A note for the first two events')
exStudy &lt;- addNote(exStudy[[1]], to='event', label='Note3',
                   note='A second note for the first event')
exStudy

</code></pre>

<hr>
<h2 id='addRecordings'>Add Recordings to an AcousticStudy Object</h2><span id='topic+addRecordings'></span>

<h3>Description</h3>

<p>Adds recording files to an AcousticStudy object, runs
interactively to allow users to select files if they are not
provided. No actual
recordings are stored, a dataframe containing information on the
start and end times of the recording files is added to the object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addRecordings(x, folder = NULL, log = FALSE, progress = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addRecordings_+3A_x">x</code></td>
<td>
<p>a <a href="#topic+AcousticStudy-class">AcousticStudy</a> object to add recordings to</p>
</td></tr>
<tr><td><code id="addRecordings_+3A_folder">folder</code></td>
<td>
<p>a folder of recordings to add. If <code>NULL</code>, user will be
prompted to select a folder of recordings for each database present in
<code>x</code>. If a single folder, this will be applied to all databases. If
multiple folders, length must be equal to the number of databases and they
will be applied to each database in the provided order.</p>
</td></tr>
<tr><td><code id="addRecordings_+3A_log">log</code></td>
<td>
<p>(optional) log files for SoundTrap recordings. These are used to
adjust apparent lengths of recordings for missing data. If <code>NULL</code>, user
will be prompted to provide a folder (selecting no folder is a valid option here).
If <code>FALSE</code> this step will be skipped. If a single folder or multiple folders
will be applied similar to <code>folder</code></p>
</td></tr>
<tr><td><code id="addRecordings_+3A_progress">progress</code></td>
<td>
<p>logical flag to show progress bars</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the same object as <code>x</code> with recording information added
to the <code>files</code> slots. The information added is a dataframe containing
the start and end times of recording
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
recs &lt;- system.file('extdata', 'Recordings', package='PAMpal')
exStudy &lt;- addRecordings(exStudy, folder=recs, log=FALSE, progress=FALSE)
files(exStudy)$recordings

</code></pre>

<hr>
<h2 id='addSettings'>Add Settingss to a PAMpalSettings Object</h2><span id='topic+addSettings'></span>

<h3>Description</h3>

<p>Adds settings to a PAMpalSettings object, usually
from an XML file created by Pamguard's &quot;Export XML Configuration&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addSettings(pps, settings = NULL, type = c("xml", "list"), verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addSettings_+3A_pps">pps</code></td>
<td>
<p>a <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object to add settings to</p>
</td></tr>
<tr><td><code id="addSettings_+3A_settings">settings</code></td>
<td>
<p>settings to add, either an XML file or a</p>
</td></tr>
<tr><td><code id="addSettings_+3A_type">type</code></td>
<td>
<p>one of 'xml' or 'list' indicating type of settings to add</p>
</td></tr>
<tr><td><code id="addSettings_+3A_verbose">verbose</code></td>
<td>
<p>logical flag to show messages</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the same <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object as pps, with a new
list of settings replacing what was previously in the &quot;settings&quot; slot
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# not recommended to create PPS like this, for example only
pps &lt;- new('PAMpalSettings')
xmlSettings &lt;- system.file('extdata', 'Example.xml', package='PAMpal')
pps &lt;- addSettings(pps, xmlSettings, type='xml')

</code></pre>

<hr>
<h2 id='bindStudies'>Combine AcousticStudy Objects</h2><span id='topic+bindStudies'></span>

<h3>Description</h3>

<p>Combines multiple AcousticStudy objects (or lists of these)
into a single object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bindStudies(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bindStudies_+3A_...">...</code></td>
<td>
<p>AcousticStudy objects, or a list of AcousticStudy objects</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All events will be combined into one large list of events. Files,
settings, effort, models, GPS, and ancillary fields will be combined
using the <a href="PAMmisc.html#topic+squishList">squishList</a> function from the PAMmisc package
(dataframes are combined, vectors are appended). The id is changed by
pasting all IDs together along with a note that they have been combined.
Note that the <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object in the pps slot is just
left as the <code>pps</code> in the first AcousticStudy to be combined, and thus
is not representative of the new combined AcousticStudy
</p>


<h3>Value</h3>

<p>A single AcousticStudy object
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>

<hr>
<h2 id='calculateAverageSpectra'>Calculate Average Spectra of Clicks</h2><span id='topic+calculateAverageSpectra'></span>

<h3>Description</h3>

<p>Calculates the average spectra of all the clicks present in an
event
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculateAverageSpectra(
  x,
  evNum = 1,
  calibration = NULL,
  wl = 512,
  channel = 1:2,
  filterfrom_khz = 0,
  filterto_khz = NULL,
  sr = NULL,
  snr = 0,
  norm = TRUE,
  plot = TRUE,
  noise = FALSE,
  decimate = 1,
  sort = FALSE,
  mode = "spec",
  title = NULL,
  ylim = NULL,
  flim = NULL,
  brightness = 0,
  contrast = 0,
  q = 0.01,
  showBreaks = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculateAverageSpectra_+3A_x">x</code></td>
<td>
<p>an <a href="#topic+AcousticEvent-class">AcousticEvent</a> or <a href="#topic+AcousticStudy-class">AcousticStudy</a> object</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_evnum">evNum</code></td>
<td>
<p>if <code>x</code> is a study, the event index number to calculate the average
spectra for. Note that this is the index in the order that they appear in the
<a href="#topic+AcousticStudy-class">AcousticStudy</a> object, not the actual event number. Alternatively
full event names can be used</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_calibration">calibration</code></td>
<td>
<p>a calibration function to apply, if desired</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_wl">wl</code></td>
<td>
<p>the size of the click clips to use for calculating the spectrum. If
greater than the clip present in the binary, clip will be zero padded</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_channel">channel</code></td>
<td>
<p>channel(s) to include in calculations. Currently does not
correspond to actual channel in instrument, just the order present in the
binary file</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_filterfrom_khz">filterfrom_khz</code></td>
<td>
<p>frequency in khz of highpass filter to apply, or the lower
bound of a bandpass filter if <code>filterto_khz</code> is not <code>NULL</code></p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_filterto_khz">filterto_khz</code></td>
<td>
<p>if a bandpass filter is desired, set this as the upper bound.
If only a highpass filter is desired, leave as the default <code>NULL</code> value.
Currently only highpass and bandpass filters are supported, so if
<code>filterfrom_khz</code> is left as zero then this parameter will have no effect</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_sr">sr</code></td>
<td>
<p>a sample rate to use if the sample rate present in the database needs
to be overridden (typically not needed)</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_snr">snr</code></td>
<td>
<p>minimum signal-to-noise ratio to be included in the average, in dB. SNR is
calculated as difference between the signal and noise spectra at the peak frequency
of the signal. This can be inaccurate if noise is inaccurate (see <code>noise</code> for
issues with noise calculations)</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_norm">norm</code></td>
<td>
<p>logical flag to normalize dB magnitude to maximum of 0</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_plot">plot</code></td>
<td>
<p>logical flag whether or not to plot the result. This will create two
plots, the first is a concatenated spectrogram where the y-axis is
frequency and the x-axis is click number. The second plot is the average
spectrogram of all clicks, the y-axis is dB, x-axis is frequency. Can be a
vector of length two to create only one of the two plots</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_noise">noise</code></td>
<td>
<p>logical flag to plot an average noise spectrum. This is estimated
by taking a window of length <code>wl</code> immediately before click. Since there
are only a limited number of samples saved in the Pamguard binary files, this
can be very inaccurate when <code>wl</code> is a large proportion of the total samples
saved. In these cases the noise floor will appear nearly identical to the signal,
reducing <code>wl</code> can help get a more accurate noise floor.</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_decimate">decimate</code></td>
<td>
<p>integer factor to reduce sample rate by</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_sort">sort</code></td>
<td>
<p>logical flag to sort concatenated spectrogram by peak frequency</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_mode">mode</code></td>
<td>
<p>one of <code>'spec'</code> or <code>'ceps'</code> to plot the spectrum or cepstrum</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_title">title</code></td>
<td>
<p>replacement titles for plots, can be length vector of length two to provide
separate titles</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_ylim">ylim</code></td>
<td>
<p>optional y limits for mean spectra plot</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_flim">flim</code></td>
<td>
<p>optional frequency limits for both plots</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_brightness">brightness</code></td>
<td>
<p>value from -255 to 255, positive values increase brightness,
negative values decrease brightness of concatenated spectrogram image</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_contrast">contrast</code></td>
<td>
<p>value from -255 to 255, positive values increase contrast, negative
values decrease contrast of concatenated spectrogram image</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_q">q</code></td>
<td>
<p>lower and upper quantiles to remove for scaling concatenated spectrogram.
Or if a single value, then quantiles <code>q</code> and <code>1-q</code> will be used. Ex.
if <code>q=.01</code>, then the bottom 1
plotting the image. This is done purely for cosmetic reasons, no output data is
affected</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_showbreaks">showBreaks</code></td>
<td>
<p>logical flag to show lines separating events when plotting
multiple events</p>
</td></tr>
<tr><td><code id="calculateAverageSpectra_+3A_...">...</code></td>
<td>
<p>optional args</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisibly returns a list with six items: <code>freq</code> - the frequency,
<code>UID</code> - the UID of each click, <code>avgSpec</code> - the average spectra of the event,
<code>allSpec</code> - the individual spectrum of each click in the event as a matrix with
each spectrum in a separate column, <code>avgNoise</code> - the average noise spectra,
<code>allNoise</code> - the individual noise spectrum for each click
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
# need to update binary file locations to users PAMpal installation
binUpd &lt;- system.file('extdata', 'Binaries', package='PAMpal')
dbUpd &lt;- system.file('extdata', package='PAMpal')
exStudy &lt;- updateFiles(exStudy, bin = binUpd, db=dbUpd)
avSpec &lt;- calculateAverageSpectra(exStudy)
str(avSpec$avgSpec)
range(avSpec$freq)
str(avSpec$allSpec)

</code></pre>

<hr>
<h2 id='calculateICI'>Calculate Inter-Click Interval</h2><span id='topic+calculateICI'></span><span id='topic+calculateICI+2CAcousticStudy-method'></span><span id='topic+calculateICI+2CAcousticEvent-method'></span><span id='topic+getICI'></span>

<h3>Description</h3>

<p>Calculate inter-click interval for click data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculateICI(
  x,
  time = c("UTC", "peakTime"),
  callType = c("click", "whistle", "cepstrum", "gpl"),
  verbose = TRUE,
  ...
)

## S4 method for signature 'AcousticStudy'
calculateICI(
  x,
  time = c("UTC", "peakTime"),
  callType = c("click", "whistle", "cepstrum", "gpl"),
  verbose = TRUE,
  ...
)

## S4 method for signature 'AcousticEvent'
calculateICI(
  x,
  time = c("UTC", "peakTime"),
  callType = c("click", "whistle", "cepstrum", "gpl"),
  verbose = TRUE,
  ...
)

getICI(x, type = c("value", "data"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculateICI_+3A_x">x</code></td>
<td>
<p>a <a href="#topic+AcousticStudy-class">AcousticStudy</a> object, a list of <a href="#topic+AcousticEvent-class">AcousticEvent</a>
objects, or a single <a href="#topic+AcousticEvent-class">AcousticEvent</a> object</p>
</td></tr>
<tr><td><code id="calculateICI_+3A_time">time</code></td>
<td>
<p>the time measurement to use. <code>start</code> will use the <code>UTC</code> value,
<code>peak</code> will use the <code>peakTime</code> value if present (currently present in
<code>standardClickCalcs</code>, this is the time of the peak of the waveform)</p>
</td></tr>
<tr><td><code id="calculateICI_+3A_calltype">callType</code></td>
<td>
<p>the call type to calculate ICI for, usually this is <code>click</code>
but also allows users to specify <code>whistle</code> or <code>cepstrum</code> to calculate this
using other detector data</p>
</td></tr>
<tr><td><code id="calculateICI_+3A_verbose">verbose</code></td>
<td>
<p>logical flag to print messages</p>
</td></tr>
<tr><td><code id="calculateICI_+3A_...">...</code></td>
<td>
<p>not currently used</p>
</td></tr>
<tr><td><code id="calculateICI_+3A_type">type</code></td>
<td>
<p>the type of data to return, one of 'value' or 'data'. 'value' returns
the single ICI value for each detector, 'data' returns all the individual ICI values
used to calculate the number returned by 'value'</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculates the ICI for each individual detector and across all detectors.
ICI calculation is done by ordering all individual detections by time, then taking
the difference between consecutive detections and approximating the mode value.
</p>


<h3>Value</h3>

<p>the same object as <code>x</code>, with ICI data added to the &quot;ancillary&quot; slot
of each AcousticEvent. Two items will be added. $ici contains all of the
individual inter-click intervals used to calculate the ICI, as well as an &quot;All&quot;
ICI using all the combined data. $measures will also have a ICI measurement added
for each detector, this will be the single modal value. Data in the $measures spot
can be exported easily to modeling algorithms. <code>getICI</code> will just return either
the values stored in $measures for <code>type = 'value'</code> or a dataframe of the
individual ICI values used to calculate these (with columns indicating separate Channels,
eventIds, and detectorNames) for <code>type = 'data'</code>
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# setting up example data
data(exStudy)
exStudy &lt;- calculateICI(exStudy)
# each event has its ICI data stored separately, these are 0
# because there is only a single click in this event
ancillary(exStudy[[1]])$ici
# also saves it in measures that will get exported for modeling
ancillary(exStudy[[1]])$measures

</code></pre>

<hr>
<h2 id='calculateModuleData'>Run Custom Calculations on Pamguard Module Data</h2><span id='topic+calculateModuleData'></span>

<h3>Description</h3>

<p>Run a list of custom calculations on a Pamguard binary
file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculateModuleData(
  binData,
  binFuns = list(ClickDetector = list(standardClickCalcs)),
  settings = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculateModuleData_+3A_bindata">binData</code></td>
<td>
<p>Pamguard binary data as read in by
<code><a href="PamBinaries.html#topic+loadPamguardBinaryFile">loadPamguardBinaryFile</a></code></p>
</td></tr>
<tr><td><code id="calculateModuleData_+3A_binfuns">binFuns</code></td>
<td>
<p>A named list of functions to run on each Pamguard module.
Currently supported modules are 'ClickDetector' and 'WhistlesMoans', a
sample input for binFuns would be list('ClickDetector'=list(clickFun1,
clickFun2), 'WhistlesMoans'=list(wmFun1))</p>
</td></tr>
<tr><td><code id="calculateModuleData_+3A_settings">settings</code></td>
<td>
<p>a list of settings from a Pamguard XML file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with one row for each channel of each detection.
Each row will have the UID, channel number, and name of the detector.
Clicks of different classifications are treated as different detectors
for this purpose, with the classification label number appended to the
detector name. The number of columns will depend on the results of the
calculations from the supplied binFuns.
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>

<hr>
<h2 id='checkStudy'>Check an AcousticStudy Object for Issues</h2><span id='topic+checkStudy'></span>

<h3>Description</h3>

<p>Checks for any possible issues in an <a href="#topic+AcousticStudy-class">AcousticStudy</a>
object, issuing warnings and saving the messages
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkStudy(x, maxLength = Inf, maxSep = 60 * 60 * 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkStudy_+3A_x">x</code></td>
<td>
<p>an <a href="#topic+AcousticStudy-class">AcousticStudy</a> object</p>
</td></tr>
<tr><td><code id="checkStudy_+3A_maxlength">maxLength</code></td>
<td>
<p>events with length greater than this value in seconds
will trigger a warning</p>
</td></tr>
<tr><td><code id="checkStudy_+3A_maxsep">maxSep</code></td>
<td>
<p>events containing consecutive detections greater than
<code>maxSep</code> seconds apart will trigger a warning. This is used to
check for situations where detections were possibly added to the
incorrect event.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is called at the end of <a href="#topic+processPgDetections">processPgDetections</a> with
default parameters, but can also be called later to investigate issues
specific to each user's data. For example, if you are expecting to process data
where all recordings were duty cycled to record 2 out of every 10 minutes, then
setting <code>maxLength = 60*2</code> will alert you to any events that are longer than
the 2 minute duty cycle.
For continuously recorded data, the <code>maxSep</code> argument can be used to
identify situations where there are large gaps between detections in a single
event, since this could mean that detections were accidentally added to the
incorrect event number during processing.
</p>


<h3>Value</h3>

<p>returns a list of warning messages
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)

# checks if any peak frequencies are 0, so we'll force this
exStudy[[1]][[1]]$peak &lt;- 0
checkStudy(exStudy)
checkStudy(exStudy, maxLength = 1, maxSep = 1)

</code></pre>

<hr>
<h2 id='export_banter'>Export Data for a BANTER Model</h2><span id='topic+export_banter'></span>

<h3>Description</h3>

<p>Exports data from an AcousticStudy into the format
required to run a BANTER model from the &quot;banter&quot; package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>export_banter(
  x,
  dropVars = NULL,
  dropSpecies = NULL,
  training = TRUE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="export_banter_+3A_x">x</code></td>
<td>
<p>a <a href="#topic+AcousticStudy-class">AcousticStudy</a> object or
a list of <a href="#topic+AcousticEvent-class">AcousticEvent</a> objects</p>
</td></tr>
<tr><td><code id="export_banter_+3A_dropvars">dropVars</code></td>
<td>
<p>a vector of the names of any variables to remove</p>
</td></tr>
<tr><td><code id="export_banter_+3A_dropspecies">dropSpecies</code></td>
<td>
<p>a vector of the names of any species to exclude</p>
</td></tr>
<tr><td><code id="export_banter_+3A_training">training</code></td>
<td>
<p>logical flag whether or not this will be used as a
training data set, or a value between 0 and 1 specifying what percent
of the data should be used for training (with the rest set aside
for testing). If TRUE or greater than 0, must contain species ID.
NOTE: if value is not 0, 1, <code>TRUE</code>, or <code>FALSE</code>, output
will be further split into <code>training</code> and <code>test</code> items
within the list output</p>
</td></tr>
<tr><td><code id="export_banter_+3A_verbose">verbose</code></td>
<td>
<p>logical flag to show summary and informational messages</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with three items, <code>events</code>, <code>detectors</code>, and
<code>na</code>. If value of <code>training</code> is not 0, 1, <code>TRUE</code>, or
<code>FALSE</code>, output will be split into <code>training</code> and
<code>test</code> lists that contain <code>events</code> and <code>detectors</code>.
<code>events</code> is a dataframe with two columns. <code>event.id</code> is a
unique identifier for each event, taken from the names of the event
list. <code>species</code> is the species classification, taken from the
<code>species</code> slot labelled <code>id</code>. <code>detectors</code> is a list
of data frames containing all the detections and measurements. There is
one list for each unique detector type found in the <code>detectors</code> slots
of <code>x</code>. The data frames will only have columns with class
<code>numeric</code>, <code>integer</code>, <code>factor</code>, or <code>logical</code>, and
will also have columns named <code>UID</code>, <code>Id</code>, <code>parentID</code>,
<code>sampleRate</code>, <code>Channel</code>, <code>angle</code>, and <code>angleError</code>,
removed so that these are not treated as parameters for the banter random
forest model. The dataframes will also have columns <code>event.id</code> and
<code>call.id</code> added. <code>na</code> contains the UIDs and Binary File names
for any detections that had NA values. These cannot be used in the
random forest model and are removed from the exported dataset.
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# setting up example data
data(exStudy)
exStudy &lt;- setSpecies(exStudy, method='pamguard')
banterData &lt;- export_banter(exStudy)
# drop some variables
banterLess &lt;- export_banter(exStudy, dropVars = c('peak', 'duration'))

</code></pre>

<hr>
<h2 id='exStudy'>Example AcousticStudy Object</h2><span id='topic+exStudy'></span>

<h3>Description</h3>

<p>An example AcousticStudy object created using the example
PAMpalSettings object provided with the package. Processed with mode='db'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(exStudy)
</code></pre>


<h3>Format</h3>

<p>a <a href="#topic+AcousticStudy-class">AcousticStudy</a> object containing two
<a href="#topic+AcousticEvent-class">AcousticEvent</a> objects
</p>

<hr>
<h2 id='filter.AcousticStudy'>Filter an AcousticStudy or AcousticEvent Object</h2><span id='topic+filter.AcousticStudy'></span>

<h3>Description</h3>

<p>Apply dplyr-like filtering to the detecitons of an
AcousticStudy or AcousticEvent object, with a special case for
filtering by species for an AcousticStudy
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'AcousticStudy'
filter(.data, ..., .preserve = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter.AcousticStudy_+3A_.data">.data</code></td>
<td>
<p><a href="#topic+AcousticStudy-class">AcousticStudy</a> or <a href="#topic+AcousticEvent-class">AcousticEvent</a> to filter</p>
</td></tr>
<tr><td><code id="filter.AcousticStudy_+3A_...">...</code></td>
<td>
<p>Logical expressions, syntax is identical to <a href="dplyr.html#topic+filter">filter</a>.
There are special cases to filter by environmental variables, species ID,
database, or detector name. See details.</p>
</td></tr>
<tr><td><code id="filter.AcousticStudy_+3A_.preserve">.preserve</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Most expression provided will be used to filter out detections based on
calculated parameters.
</p>
<p>If the name of an environmental variable added using
<a href="PAMmisc.html#topic+matchEnvData">matchEnvData</a> is provided, will filter to only events with environmental
variables matching those conditions.
</p>
<p>If a provided logical expression uses
<code>"species"</code> or <code>"Species"</code>, then events will be filtered using the
species present in the <code>$id</code> of the <code>species</code> slot of each event.
</p>
<p>If a provided logical expression uses <code>"database"</code> or <code>"Database"</code>,
then only events with databases matching the expression in <code>files(.data)$db</code>
will remain
</p>
<p>If a provided logical expression uses <code>"detector"</code> or <code>"Detector"</code>, then
only detections from detectors with names matching the expression will remain in
events. Any events left with no detections will be removed.
</p>


<h3>Value</h3>

<p>The original <code>.data</code> object, filtered by the given logical expressions
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create example data
data(exStudy)
exStudy &lt;- setSpecies(exStudy, method='manual', value=letters[1:2])
filterData &lt;- filter(exStudy, peak &lt; 20)
getDetectorData(filterData)$click

filterData &lt;- filter(exStudy, species == 'a')
species(filterData[[1]])

</code></pre>

<hr>
<h2 id='getBinaryData'>Get Raw Binary Data for Detections</h2><span id='topic+getBinaryData'></span>

<h3>Description</h3>

<p>Fetches matching binary data from a single or multiple
detections in an <a href="#topic+AcousticEvent-class">AcousticEvent</a> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getBinaryData(
  x,
  UID,
  type = c("click", "whistle", "cepstrum", "gpl"),
  quiet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getBinaryData_+3A_x">x</code></td>
<td>
<p>a <a href="#topic+AcousticStudy-class">AcousticStudy</a> object, a list of <a href="#topic+AcousticEvent-class">AcousticEvent</a>
objects, or a single <a href="#topic+AcousticEvent-class">AcousticEvent</a> object</p>
</td></tr>
<tr><td><code id="getBinaryData_+3A_uid">UID</code></td>
<td>
<p>the UID(s) of the individual detections to fetch the binary
data for</p>
</td></tr>
<tr><td><code id="getBinaryData_+3A_type">type</code></td>
<td>
<p>detection type</p>
</td></tr>
<tr><td><code id="getBinaryData_+3A_quiet">quiet</code></td>
<td>
<p>logical flag to quiet some warnings, used internally and should generally
not be changed from default <code>FALSE</code></p>
</td></tr>
<tr><td><code id="getBinaryData_+3A_...">...</code></td>
<td>
<p>additional arguments to pass to
<code><a href="PamBinaries.html#topic+loadPamguardBinaryFile">loadPamguardBinaryFile</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of <code>PamBinary</code> objects for each <code>UID</code>
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
binData &lt;- getBinaryData(exStudy, UID = 8000003)
# works with multiple UIDs, if UIDs arent present they will be ignored
binData &lt;- getBinaryData(exStudy, UID = c(8000003, 529000024, 1))

</code></pre>

<hr>
<h2 id='getClipData'>Get Wav Clips of Data</h2><span id='topic+getClipData'></span>

<h3>Description</h3>

<p>Reads audio clips containing sounds from events or detections
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getClipData(
  x,
  buffer = c(0, 0.1),
  mode = c("event", "detection"),
  channel = 1,
  useSample = FALSE,
  fixLength = FALSE,
  progress = TRUE,
  verbose = TRUE,
  FUN = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getClipData_+3A_x">x</code></td>
<td>
<p><a href="#topic+AcousticStudy-class">AcousticStudy</a> object containing data to read wav clips for</p>
</td></tr>
<tr><td><code id="getClipData_+3A_buffer">buffer</code></td>
<td>
<p>amount before and after each event to also include in the clip, in seconds.
Can either be a vector of length two specifying how much to buffer before and after
(first number should be negative), or a single value if the buffer amount should be identical.</p>
</td></tr>
<tr><td><code id="getClipData_+3A_mode">mode</code></td>
<td>
<p>either <code>'event'</code> or <code>'detection'</code> specifying whether to create
wav clips of entire events or individual detections</p>
</td></tr>
<tr><td><code id="getClipData_+3A_channel">channel</code></td>
<td>
<p>channel(s) of clips to write</p>
</td></tr>
<tr><td><code id="getClipData_+3A_usesample">useSample</code></td>
<td>
<p>logical flag to use startSample information in binaries instead of UTC
time for start of detections. This can be slightly more accurate (~1ms) but will take
longer</p>
</td></tr>
<tr><td><code id="getClipData_+3A_fixlength">fixLength</code></td>
<td>
<p>logical flag to fix the output clip length to a constant value. If
<code>TRUE</code>, then output clip length is entirely determined by the buffer value, as
if the detection or event had zero length. E.g. <code>buffer=c(-2,1)</code> will produce clips
3 seconds long, starting 2 seconds before the detection/event start time.</p>
</td></tr>
<tr><td><code id="getClipData_+3A_progress">progress</code></td>
<td>
<p>logical flag to show progress bar</p>
</td></tr>
<tr><td><code id="getClipData_+3A_verbose">verbose</code></td>
<td>
<p>logical flag to show summary messages</p>
</td></tr>
<tr><td><code id="getClipData_+3A_fun">FUN</code></td>
<td>
<p>optional function to apply to wav clips. This function takes default inputs <code>wav</code>,
a Wave class object, <code>name</code> the name of the detection or event, <code>time</code> the start and end
time of the clip, <code>channel</code> as above, <code>mode</code> as above, and additional args ...</p>
</td></tr>
<tr><td><code id="getClipData_+3A_...">...</code></td>
<td>
<p>optional arguments to pass to <code>FUN</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list of wav clips
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
recs &lt;- system.file('extdata', 'Recordings', package='PAMpal')
exStudy &lt;- addRecordings(exStudy, folder=recs, log=FALSE, progress=FALSE)
## Not run: 
# not running so that no wav clips are written to disk
wavs &lt;- getClipData(exStudy, mode='event')

## End(Not run)

</code></pre>

<hr>
<h2 id='getDetectorData'>Extract and Combine Detector Data</h2><span id='topic+getDetectorData'></span><span id='topic+getClickData'></span><span id='topic+getWhistleData'></span><span id='topic+getCepstrumData'></span><span id='topic+getGPLData'></span><span id='topic+getFPODData'></span><span id='topic+nDetections'></span><span id='topic+nClicks'></span><span id='topic+nWhistles'></span><span id='topic+nCepstrum'></span><span id='topic+nGPL'></span>

<h3>Description</h3>

<p>Extracts just the detector data from all of <code>x</code>, and will
combine all detections from each call type (currently whistle, click,
and cepstrum) into a single data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDetectorData(x, measures = TRUE)

getClickData(x, measures = TRUE)

getWhistleData(x, measures = TRUE)

getCepstrumData(x, measures = TRUE)

getGPLData(x, measures = TRUE)

getFPODData(x, measures = TRUE)

nDetections(x, distinct = FALSE)

nClicks(x, distinct = FALSE)

nWhistles(x)

nCepstrum(x)

nGPL(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getDetectorData_+3A_x">x</code></td>
<td>
<p>data to extract detector data from, either an <code>AcousticStudy</code>,
<code>AcousticEvent</code> or list of <code>AcousticEvent</code> object</p>
</td></tr>
<tr><td><code id="getDetectorData_+3A_measures">measures</code></td>
<td>
<p>logical flag whether or not to append measures to detector
dataframes</p>
</td></tr>
<tr><td><code id="getDetectorData_+3A_distinct">distinct</code></td>
<td>
<p>logical flag to only return number of distinct click detections</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The purpose of this function is to extract your data out of
<code>PAMpal</code>'s S4 classes and put them into an easier format to work with.
The output will be a list of up to three data frames, one for each call type
found in your data. Each different call type will have had different processing
applied to it by <code>processPgDetections</code>. Additionally, each detector will
have its associated event id, the name of the detector, and the species id
attached to it (species will be <code>NA</code> if not set). All detections from each
call type will be combined into a single large data frame
</p>


<h3>Value</h3>

<p>A list of data frames containing all detection data from <code>x</code>,
named by call type ('click', 'whistle', or 'cepstrum').
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
dets &lt;- getDetectorData(exStudy)
names(dets)
str(dets$click)
# works on single events as well
oneDets &lt;- getDetectorData(exStudy[[1]])
str(oneDets$click)

</code></pre>

<hr>
<h2 id='getWarnings'>Get Warning Messages</h2><span id='topic+getWarnings'></span>

<h3>Description</h3>

<p>Accessor to easily get all warning messages for <code>x</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getWarnings(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getWarnings_+3A_x">x</code></td>
<td>
<p>an <a href="#topic+AcousticStudy-class">AcousticStudy</a> or <a href="#topic+AcousticEvent-class">AcousticEvent</a>
object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of warning messages, named by the function call that created
the warning
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
data(exStudy)
# This will trigger a warning, then we can access it
exStudy &lt;- filter(exStudy, species == "test")
getWarnings(exStudy)

## End(Not run)

</code></pre>

<hr>
<h2 id='is.AcousticEvent'>Check if an Object is an AcousticEvent</h2><span id='topic+is.AcousticEvent'></span>

<h3>Description</h3>

<p>Function to check if an object is an AcousticEvent
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.AcousticEvent(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.AcousticEvent_+3A_x">x</code></td>
<td>
<p>object to check</p>
</td></tr>
</table>

<hr>
<h2 id='is.AcousticStudy'>Check if an Object is an AcousticStudy</h2><span id='topic+is.AcousticStudy'></span>

<h3>Description</h3>

<p>Function to check if an object is an AcousticStudy
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.AcousticStudy(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.AcousticStudy_+3A_x">x</code></td>
<td>
<p>object to check</p>
</td></tr>
</table>

<hr>
<h2 id='is.PAMpalSettings'>Check if an Object is a PAMpalSettings</h2><span id='topic+is.PAMpalSettings'></span>

<h3>Description</h3>

<p>Function to check if an object is a PAMpalSettings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.PAMpalSettings(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.PAMpalSettings_+3A_x">x</code></td>
<td>
<p>object to check</p>
</td></tr>
</table>

<hr>
<h2 id='loadPamguardXML'>Load Pamguard XML Settings</h2><span id='topic+loadPamguardXML'></span>

<h3>Description</h3>

<p>Loads in relevant settings and formats for use in PAMpal
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadPamguardXML(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loadPamguardXML_+3A_x">x</code></td>
<td>
<p>an XML file created by Pamguard's &quot;Export XML Configuration&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with settings for audio <code>sources</code> (sound acuisition, decimators,
FFT, and cepstrum) and <code>detectors</code> (click detector and whistle and moan 
detector). Also stores the entire XML file as <code>raw</code> and the file name as
<code>file</code>
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
xmlFile &lt;- system.file('extdata', 'Example.xml', package='PAMpal')
xmlList &lt;- loadPamguardXML(xmlFile)
str(xmlList)

</code></pre>

<hr>
<h2 id='markAnnotated'>Mark Detections as Annotated</h2><span id='topic+markAnnotated'></span>

<h3>Description</h3>

<p>Marks detections within an <a href="#topic+AcousticStudy-class">AcousticStudy</a> as
being within the bounds of an annotation box. Annotations can either
be read in from the &quot;Spectrogram Annotation&quot; module of PAMguard, or
supplied as a separate dataframe. Detections must be entirely contained
within the annotation bounds.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>markAnnotated(
  x,
  anno = NULL,
  tBuffer = 0,
  fBuffer = 0,
  table = "Spectrogram_Annotation"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="markAnnotated_+3A_x">x</code></td>
<td>
<p>an AcousticStudy object</p>
</td></tr>
<tr><td><code id="markAnnotated_+3A_anno">anno</code></td>
<td>
<p>annotations to read from. If <code>NULL</code>, will be read in from
the PAMguard database. If a data.frame, must have columns <code>start</code> and
<code>end</code> in UTC, and column <code>id</code>. Can additionally have columns <code>fmin</code> and <code>fmax</code>
to apply frequency bounds (values in Hz).</p>
</td></tr>
<tr><td><code id="markAnnotated_+3A_tbuffer">tBuffer</code></td>
<td>
<p>additional buffer value to add on to annotation time bounds in
seconds. If a single number, the number of seconds to extend the bounds by
on the start and end of each annotation. Can also be a vector of two to
extend different values on the start and end. This can be useful if original
bounding boxes were drawn very close to the desired detections since any small
portion of a signal outside the box will cause it to be excluded.</p>
</td></tr>
<tr><td><code id="markAnnotated_+3A_fbuffer">fBuffer</code></td>
<td>
<p>additional buffer value to add to annotation frequency bounds in
Hz. If a single number, the number of Hz to extend bounds by on lower and upper
end of boxes. Can also be a vector of two to extend different values on lower and
upper bounds. This can be useful if original bounding boxes were drawn very close
to the desired detections since any small portion of a signal outside the box will
cause it to be excluded.</p>
</td></tr>
<tr><td><code id="markAnnotated_+3A_table">table</code></td>
<td>
<p>if <code>anno</code> is <code>NULL</code>, the name of the &quot;Spectrogram Annotation&quot;
module table within the database.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This adds new columns <code>inAnno</code> and <code>annoId</code> to all detector
dataframes within the AcousticStudy. <code>inAnno</code> is a logical flag whether or not
a given detection was fully contained in any annotation bounding box, and <code>annoId</code>
lists the IDs of the boxes it matched. A detection is considered within an annotation
only if it is entirely within the time and frequency bounds of the annotation. For
GPL and whistle detections, the min and max frequency values are used. For click detections,
only the peak frequency is used. For cesptrum detections, frequency bounds are ignored.
</p>


<h3>Value</h3>

<p>the same object as <code>x</code>, but detectors have additional columns added
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(exStudy)
annotation &lt;- data.frame(start = min(getWhistleData(exStudy)$UTC),
                         fmin = c(16000, 17000),
                         fmax = c(17000, 18000))
annotation$end &lt;- annotation$star + 1
exStudy &lt;- markAnnotated(exStudy, annotation)
getWhistleData(exStudy)[c('UTC', 'duration', 'freqMin', 'freqMax', 'inAnno', 'annoId')]

</code></pre>

<hr>
<h2 id='matchEnvData+2CAcousticEvent-method'>Match Environmental Data to an AcousticStudy Object</h2><span id='topic+matchEnvData+2CAcousticEvent-method'></span><span id='topic+matchEnvData+2CAcousticStudy-method'></span>

<h3>Description</h3>

<p>Extracts all variables from a netcdf file matching Longitude,
Latitude, and UTC coordinates of the start of each AcousticEvent object.
Matched values are stored in the &quot;ancillary&quot; slot of each event
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'AcousticEvent'
matchEnvData(
  data,
  nc = NULL,
  var = NULL,
  buffer = c(0, 0, 0),
  FUN = c(mean),
  fileName = NULL,
  progress = TRUE,
  depth = 0,
  ...
)

## S4 method for signature 'AcousticStudy'
matchEnvData(
  data,
  nc = NULL,
  var = NULL,
  buffer = c(0, 0, 0),
  FUN = c(mean),
  fileName = NULL,
  progress = TRUE,
  depth = 0,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="matchEnvData+2B2CAcousticEvent-method_+3A_data">data</code></td>
<td>
<p>an <a href="#topic+AcousticStudy-class">AcousticStudy</a> or <a href="#topic+AcousticEvent-class">AcousticEvent</a> object
that must have GPS data added to it using the <a href="#topic+addGps">addGps</a> functions</p>
</td></tr>
<tr><td><code id="matchEnvData+2B2CAcousticEvent-method_+3A_nc">nc</code></td>
<td>
<p>name of a netcdf file, ERDDAP dataset id, or an edinfo object</p>
</td></tr>
<tr><td><code id="matchEnvData+2B2CAcousticEvent-method_+3A_var">var</code></td>
<td>
<p>(optional) vector of variable names</p>
</td></tr>
<tr><td><code id="matchEnvData+2B2CAcousticEvent-method_+3A_buffer">buffer</code></td>
<td>
<p>vector of Longitude, Latitude, and Time (seconds) to buffer around
each datapoint. All values within the buffer will be used to report the mean,
median, and standard deviation</p>
</td></tr>
<tr><td><code id="matchEnvData+2B2CAcousticEvent-method_+3A_fun">FUN</code></td>
<td>
<p>a vector or list of functions to apply to the data. Default is to apply
mean, median, and standard deviation calculations</p>
</td></tr>
<tr><td><code id="matchEnvData+2B2CAcousticEvent-method_+3A_filename">fileName</code></td>
<td>
<p>(optional) file name to save downloaded nc file to. If not provided,
then no nc files will be stored, instead small temporary files will be downloaded
and then deleted. This can be much faster, but means that the data will need to be
downloaded again in the future. If <code>fileName</code> is provided, then the function
will attempt to download a single nc file covering the entire range of your data.
If your data spans a large amount of time and space this can be problematic.</p>
</td></tr>
<tr><td><code id="matchEnvData+2B2CAcousticEvent-method_+3A_progress">progress</code></td>
<td>
<p>logical flag to show progress bar</p>
</td></tr>
<tr><td><code id="matchEnvData+2B2CAcousticEvent-method_+3A_depth">depth</code></td>
<td>
<p>depth values (meters) to use for matching, overrides any <code>Depth</code> column
in the data or can be used to specify desired depth range when not present in data.
Variables will be summarised over the range of these depth values. <code>NULL</code>
uses all available depth values</p>
</td></tr>
<tr><td><code id="matchEnvData+2B2CAcousticEvent-method_+3A_...">...</code></td>
<td>
<p>other parameters to pass to <a href="PAMmisc.html#topic+ncToData">ncToData</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>original data object with environmental data added to the <code>ancillary</code> slot
of each event. Complete data will be stored in <code>ancillary(data)$environmental</code>,
and the mean of each downloaded variable will be stored in <code>ancillary(data)$measures</code>
so that it can be exported for modeling. For each event the coordinates associated with
the earliest UTC value in that event are used to match
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
nc &lt;- system.file('extdata', 'sst.nc', package='PAMmisc')
# suppressing warnings because nc coordinates dont align with this data,
# function warns of possible coordinate mismatch
exStudy &lt;- suppressWarnings(matchEnvData(exStudy, nc=nc, progress=FALSE))
str(ancillary(exStudy[[1]])$environmental)
ancillary(exStudy[[1]])$measures

</code></pre>

<hr>
<h2 id='matchTimeData'>Match time-based data to PAMpal objects</h2><span id='topic+matchTimeData'></span><span id='topic+timeJoin'></span>

<h3>Description</h3>

<p>Match any time-based data (dataframe with a <code>UTC</code> column)
to an AcousticStudy or AcousticEvent object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>matchTimeData(
  x,
  data,
  mode = c("event", "detection"),
  thresh = Inf,
  interpolate = TRUE,
  replace = FALSE,
  keepDiff = FALSE
)

timeJoin(x, y, thresh = Inf, interpolate = TRUE, replace = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="matchTimeData_+3A_x">x</code></td>
<td>
<p><a href="#topic+AcousticStudy-class">AcousticStudy</a> or <a href="#topic+AcousticEvent-class">AcousticEvent</a> object
to match data to, or a dataframe for <code>timeJoin</code></p>
</td></tr>
<tr><td><code id="matchTimeData_+3A_data">data</code></td>
<td>
<p>a data frame to match to data to <code>x</code>.
Must have column <code>UTC</code>, and optionally a column <code>db</code> if subsets
of data should be matched only to parts of <code>x</code> with that database. All
other columns will be considered variables to add to <code>x</code></p>
</td></tr>
<tr><td><code id="matchTimeData_+3A_mode">mode</code></td>
<td>
<p>one of &quot;event&quot; or &quot;detection&quot;. &quot;event&quot; will match one set of
variables per event, stored in the &quot;measures&quot; for that event. &quot;detection&quot;
will match variables to every detection.</p>
</td></tr>
<tr><td><code id="matchTimeData_+3A_thresh">thresh</code></td>
<td>
<p>maximum time apart in seconds for matching to
data, if the closest value is more than <code>thresh</code> apart then the
variable values will be set to <code>NA</code></p>
</td></tr>
<tr><td><code id="matchTimeData_+3A_interpolate">interpolate</code></td>
<td>
<p>logical flag whether or not to interpolate between points
in <code>data</code> or just matched to nearest time</p>
</td></tr>
<tr><td><code id="matchTimeData_+3A_replace">replace</code></td>
<td>
<p>one of <code>TRUE</code>, <code>FALSE</code>, or <code>NA</code>. If <code>TRUE</code>,
all existing values with the same name as columns in <code>data</code> will be
replaced. If <code>FALSE</code> no replacement occurs. If <code>NA</code> only values
which are <code>NA</code> will be replaced with new values</p>
</td></tr>
<tr><td><code id="matchTimeData_+3A_keepdiff">keepDiff</code></td>
<td>
<p>logical flag to keep time difference data</p>
</td></tr>
<tr><td><code id="matchTimeData_+3A_y">y</code></td>
<td>
<p>dataframe to join to <code>x</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function lets you match any arbitrary data to a PAMpal object
as long as it has a time associated with it. Data will be attached to
detector dataframes for <code>mode='detection'</code> or to the event &quot;measures&quot;
location for <code>mode='event'</code> (this is where <a href="#topic+calculateICI">calculateICI</a> and
<a href="PAMmisc.html#topic+matchEnvData">matchEnvData</a> store their event data). These can be accessed with the
<a href="#topic+getMeasures">getMeasures</a> function and are also exported in the various &quot;getXXX&quot;
functions (<a href="#topic+getClickData">getClickData</a> etc.) if <code>measures=TRUE</code> (default).
</p>
<p>All columns in the provided <code>data</code> object will be treated as variables
to add, with a few exceptions. There are a few reserved column names used by
PAMpal that cannot be overridden (e.g. UID, eventId, species). Also any columns
already existing in the PAMpal data will not be overridden unless <code>replace</code>
is not <code>FALSE</code>. The column names in <code>data</code> will be used as the names
for the added variables, so care should be taken to ensure these are informative
enough for future use.
</p>


<h3>Value</h3>

<p>the same data as <code>x</code>, with data added from <code>data</code>
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
addData &lt;- data.frame(UTC = as.POSIXct('2018-03-20 15:25:10', tz='UTC'),
                      newVariable = 26)
data &lt;- matchTimeData(exStudy, addData, mode='detection')
getClickData(data)
data &lt;- matchTimeData(exStudy, addData, mode='event')
getMeasures(data)

</code></pre>

<hr>
<h2 id='PAMpal.accessors'><code>AcousticEvent</code> and <code>AcousticStudy</code> accessors</h2><span id='topic+PAMpal.accessors'></span><span id='topic+settings'></span><span id='topic+settings+2CAcousticEvent-method'></span><span id='topic+settings+3C-'></span><span id='topic+settings+3C-+2CAcousticEvent-method'></span><span id='topic+localizations'></span><span id='topic+localizations+2CAcousticEvent-method'></span><span id='topic+localizations+3C-'></span><span id='topic+localizations+3C-+2CAcousticEvent-method'></span><span id='topic+id'></span><span id='topic+id+2CAcousticEvent-method'></span><span id='topic+id+3C-'></span><span id='topic+id+3C-+2CAcousticEvent-method'></span><span id='topic+detectors'></span><span id='topic+detectors+2CAcousticEvent-method'></span><span id='topic+detectors+3C-'></span><span id='topic+detectors+3C-+2CAcousticEvent-method'></span><span id='topic+species'></span><span id='topic+species+2CAcousticEvent-method'></span><span id='topic+species+2CAcousticStudy-method'></span><span id='topic+species+3C-'></span><span id='topic+species+3C-+2CAcousticEvent-method'></span><span id='topic+files'></span><span id='topic+files+2CAcousticEvent-method'></span><span id='topic+files+3C-'></span><span id='topic+files+3C-+2CAcousticEvent-method'></span><span id='topic+ancillary'></span><span id='topic+ancillary+2CAcousticEvent-method'></span><span id='topic+ancillary+3C-'></span><span id='topic+ancillary+3C-+2CAcousticEvent-method'></span><span id='topic++5B+2CAcousticEvent+2CANY+2CANY+2CANY-method'></span><span id='topic++5B+3C-+2CAcousticEvent+2CANY+2CANY+2CANY-method'></span><span id='topic++24+2CAcousticEvent-method'></span><span id='topic++24+3C-+2CAcousticEvent-method'></span><span id='topic++5B+5B+2CAcousticEvent+2CANY+2CANY-method'></span><span id='topic++5B+5B+3C-+2CAcousticEvent+2CANY+2CANY+2CANY-method'></span><span id='topic+id+2CAcousticStudy-method'></span><span id='topic+id+3C-+2CAcousticStudy-method'></span><span id='topic+files+2CAcousticStudy-method'></span><span id='topic+files+3C-+2CAcousticStudy-method'></span><span id='topic+gps'></span><span id='topic+gps+2CAcousticStudy-method'></span><span id='topic+gps+3C-'></span><span id='topic+gps+3C-+2CAcousticStudy-method'></span><span id='topic+detectors+2CAcousticStudy-method'></span><span id='topic+events'></span><span id='topic+events+2CAcousticStudy-method'></span><span id='topic+events+3C-'></span><span id='topic+events+3C-+2CAcousticStudy-method'></span><span id='topic+settings+2CAcousticStudy-method'></span><span id='topic+settings+3C-+2CAcousticStudy-method'></span><span id='topic+effort'></span><span id='topic+effort+2CAcousticStudy-method'></span><span id='topic+effort+3C-'></span><span id='topic+effort+3C-+2CAcousticStudy-method'></span><span id='topic+pps'></span><span id='topic+pps+2CAcousticStudy-method'></span><span id='topic+pps+3C-'></span><span id='topic+pps+3C-+2CAcousticStudy-method'></span><span id='topic+ancillary+2CAcousticStudy-method'></span><span id='topic+ancillary+3C-+2CAcousticStudy-method'></span><span id='topic+models'></span><span id='topic+models+2CAcousticStudy-method'></span><span id='topic+models+3C-'></span><span id='topic+models+3C-+2CAcousticStudy-method'></span><span id='topic++5B+2CAcousticStudy+2CANY+2CANY+2CANY-method'></span><span id='topic++5B+3C-+2CAcousticStudy+2CANY+2CANY+2CANY-method'></span><span id='topic++24+2CAcousticStudy-method'></span><span id='topic++24+3C-+2CAcousticStudy-method'></span><span id='topic++5B+5B+2CAcousticStudy+2CANY+2CANY-method'></span><span id='topic++5B+5B+3C-+2CAcousticStudy+2CANY+2CANY+2CANY-method'></span>

<h3>Description</h3>

<p>Accessors for slots in <a href="#topic+AcousticEvent-class">AcousticEvent</a>
and <a href="#topic+AcousticStudy-class">AcousticStudy</a> objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>settings(x, ...)

## S4 method for signature 'AcousticEvent'
settings(x, ...)

settings(x) &lt;- value

## S4 replacement method for signature 'AcousticEvent'
settings(x) &lt;- value

localizations(x, ...)

## S4 method for signature 'AcousticEvent'
localizations(x, ...)

localizations(x) &lt;- value

## S4 replacement method for signature 'AcousticEvent'
localizations(x) &lt;- value

id(x, ...)

## S4 method for signature 'AcousticEvent'
id(x, ...)

id(x) &lt;- value

## S4 replacement method for signature 'AcousticEvent'
id(x) &lt;- value

detectors(x, ...)

## S4 method for signature 'AcousticEvent'
detectors(x, ...)

detectors(x) &lt;- value

## S4 replacement method for signature 'AcousticEvent'
detectors(x) &lt;- value

species(x, ...)

## S4 method for signature 'AcousticEvent'
species(x, ...)

## S4 method for signature 'AcousticStudy'
species(x, type = "id", ...)

species(x) &lt;- value

## S4 replacement method for signature 'AcousticEvent'
species(x) &lt;- value

files(x, ...)

## S4 method for signature 'AcousticEvent'
files(x, ...)

files(x) &lt;- value

## S4 replacement method for signature 'AcousticEvent'
files(x) &lt;- value

ancillary(x, ...)

## S4 method for signature 'AcousticEvent'
ancillary(x, ...)

ancillary(x) &lt;- value

## S4 replacement method for signature 'AcousticEvent'
ancillary(x) &lt;- value

## S4 method for signature 'AcousticEvent,ANY,ANY,ANY'
x[i]

## S4 replacement method for signature 'AcousticEvent,ANY,ANY,ANY'
x[i] &lt;- value

## S4 method for signature 'AcousticEvent'
x$name

## S4 replacement method for signature 'AcousticEvent'
x$name &lt;- value

## S4 method for signature 'AcousticEvent,ANY,ANY'
x[[i]]

## S4 replacement method for signature 'AcousticEvent,ANY,ANY,ANY'
x[[i]] &lt;- value

## S4 method for signature 'AcousticStudy'
id(x, ...)

## S4 replacement method for signature 'AcousticStudy'
id(x) &lt;- value

## S4 method for signature 'AcousticStudy'
files(x, ...)

## S4 replacement method for signature 'AcousticStudy'
files(x) &lt;- value

gps(x, ...)

## S4 method for signature 'AcousticStudy'
gps(x, ...)

gps(x) &lt;- value

## S4 replacement method for signature 'AcousticStudy'
gps(x) &lt;- value

## S4 method for signature 'AcousticStudy'
detectors(x, ...)

events(x, ...)

## S4 method for signature 'AcousticStudy'
events(x, ...)

events(x) &lt;- value

## S4 replacement method for signature 'AcousticStudy'
events(x) &lt;- value

## S4 method for signature 'AcousticStudy'
settings(x, ...)

## S4 replacement method for signature 'AcousticStudy'
settings(x) &lt;- value

effort(x, ...)

## S4 method for signature 'AcousticStudy'
effort(x, ...)

effort(x) &lt;- value

## S4 replacement method for signature 'AcousticStudy'
effort(x) &lt;- value

pps(x, ...)

## S4 method for signature 'AcousticStudy'
pps(x, ...)

pps(x) &lt;- value

## S4 replacement method for signature 'AcousticStudy'
pps(x) &lt;- value

## S4 method for signature 'AcousticStudy'
ancillary(x, ...)

## S4 replacement method for signature 'AcousticStudy'
ancillary(x) &lt;- value

models(x, ...)

## S4 method for signature 'AcousticStudy'
models(x, ...)

models(x) &lt;- value

## S4 replacement method for signature 'AcousticStudy'
models(x) &lt;- value

## S4 method for signature 'AcousticStudy,ANY,ANY,ANY'
x[i]

## S4 replacement method for signature 'AcousticStudy,ANY,ANY,ANY'
x[i] &lt;- value

## S4 method for signature 'AcousticStudy'
x$name

## S4 replacement method for signature 'AcousticStudy'
x$name &lt;- value

## S4 method for signature 'AcousticStudy,ANY,ANY'
x[[i]]

## S4 replacement method for signature 'AcousticStudy,ANY,ANY,ANY'
x[[i]] &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="PAMpal.accessors_+3A_x">x</code></td>
<td>
<p>a <a href="#topic+AcousticEvent-class">AcousticEvent</a> or <a href="#topic+AcousticStudy-class">AcousticStudy</a> object</p>
</td></tr>
<tr><td><code id="PAMpal.accessors_+3A_...">...</code></td>
<td>
<p>other arguments to pass to methods</p>
</td></tr>
<tr><td><code id="PAMpal.accessors_+3A_value">value</code></td>
<td>
<p>value to assign with accessor</p>
</td></tr>
<tr><td><code id="PAMpal.accessors_+3A_type">type</code></td>
<td>
<p>species type to select</p>
</td></tr>
<tr><td><code id="PAMpal.accessors_+3A_i">i</code></td>
<td>
<p>index of the object to access</p>
</td></tr>
<tr><td><code id="PAMpal.accessors_+3A_name">name</code></td>
<td>
<p>name of the object to access</p>
</td></tr>
</table>


<h3>Value</h3>


<dl>
<dt>id</dt><dd><p>a unique id or name for this object</p>
</dd>
<dt>settings</dt><dd><p>a named list of settings for each detector and localization or recorder</p>
</dd>
<dt>detectors</dt><dd><p>a list of detector data frames</p>
</dd>
<dt>localizations</dt><dd><p>list of localizations</p>
</dd>
<dt>species</dt><dd><p>list of species classifications</p>
</dd>
<dt>files</dt><dd><p>list of files used to create this object</p>
</dd>
<dt>events</dt><dd><p>a list of <a href="#topic+AcousticEvent-class">AcousticEvent</a> objects</p>
</dd>
<dt>gps</dt><dd><p>a dataframe containing gps data</p>
</dd>
<dt>pps</dt><dd><p>the <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object used to create this</p>
</dd>
<dt>effort</dt><dd><p>something about effort?</p>
</dd>
<dt>ancillary</dt><dd><p>miscellaneous extra data</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>

<hr>
<h2 id='PAMpalSettings'>Constructor for PAMpalSettings Object</h2><span id='topic+PAMpalSettings'></span>

<h3>Description</h3>

<p>Create a PAMpalSettings object. Any values that are not supplied
will be asked for interactively. Three processing functions will also be added
by default: <a href="#topic+standardClickCalcs">standardClickCalcs</a>, <a href="#topic+roccaWhistleCalcs">roccaWhistleCalcs</a>, and
<a href="#topic+standardCepstrumCalcs">standardCepstrumCalcs</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PAMpalSettings(
  db = NULL,
  binaries = NULL,
  settings = NULL,
  functions = NULL,
  verbose = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="PAMpalSettings_+3A_db">db</code></td>
<td>
<p>the full path to a Pamguard database file or folder of databases</p>
</td></tr>
<tr><td><code id="PAMpalSettings_+3A_binaries">binaries</code></td>
<td>
<p>a folder containing Pamguard binary files, all subfolders will
also be added</p>
</td></tr>
<tr><td><code id="PAMpalSettings_+3A_settings">settings</code></td>
<td>
<p>an XML settings file from Pamguard</p>
</td></tr>
<tr><td><code id="PAMpalSettings_+3A_functions">functions</code></td>
<td>
<p>a named list of additional functions to add</p>
</td></tr>
<tr><td><code id="PAMpalSettings_+3A_verbose">verbose</code></td>
<td>
<p>logical flag to show messages</p>
</td></tr>
<tr><td><code id="PAMpalSettings_+3A_...">...</code></td>
<td>
<p>values to pass on to default <a href="#topic+standardClickCalcs">standardClickCalcs</a> function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A PAMpalSettings object
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# can be run with no arguments with popup menu selections
if(interactive()) pps &lt;- PAMpalSettings()
db &lt;- system.file('extdata', 'Example.sqlite3', package='PAMpal')
bin &lt;- system.file('extdata', 'Binaries', package='PAMpal')
# or data folders can be supplied ahead of time
if(interactive()) pps &lt;- PAMpalSettings(db=db, binaries=bin)

</code></pre>

<hr>
<h2 id='PAMpalSettings-class'><code>PAMpalSettings</code> Class</h2><span id='topic+PAMpalSettings-class'></span>

<h3>Description</h3>

<p>An S4 class that stores settings related to all processing and analysis steps
done in PAMpal. A PAMpalSettings object will be the main input to any major function
in the PAMpal package.
</p>


<h3>Slots</h3>


<dl>
<dt><code>db</code></dt><dd><p>the full path to a PamGuard database file</p>
</dd>
<dt><code>binaries</code></dt><dd><p>a list with items &quot;folder&quot; containing the directory of the
PamGuard binary files, and &quot;list&quot; containing the full path to each individual
binary file.</p>
</dd>
<dt><code>functions</code></dt><dd><p>a named list of functions to apply to data read in by PAMpal.
Should be named by the PamGuard module the function should be applied to.
Currently supports &quot;ClickDetector&quot;, &quot;WhistlesMoans&quot;, and &quot;Cepstrum&quot;.</p>
</dd>
<dt><code>calibration</code></dt><dd><p>a named list of calibration functions to apply while
applying functions from the &quot;functions&quot; slot. Should named by the
PamGuard module, same as the &quot;functions&quot;</p>
</dd>
<dt><code>settings</code></dt><dd><p>a named list of settings, usually imported from Pamguard's
&quot;Export XML Configuration&quot;</p>
</dd>
</dl>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>

<hr>
<h2 id='plotDataExplorer'>Explore Data in an Interactive Plot</h2><span id='topic+plotDataExplorer'></span>

<h3>Description</h3>

<p>Creates an interactive plot of detector data. Allows user to
choose which numeric data to plot, and will allow user to both color and
facet the plot by any columns that are characters or factors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotDataExplorer(x, callType = NULL, maxCategories = 15)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotDataExplorer_+3A_x">x</code></td>
<td>
<p>data to plot, can be an <code>AcousticStudy</code>, <code>AcousticEvent</code>,
data.frame or a list of <code>AcousticEvent</code> objects</p>
</td></tr>
<tr><td><code id="plotDataExplorer_+3A_calltype">callType</code></td>
<td>
<p>the specific type of call to plot. If <code>NULL</code> (default),
will prompt user to choose which type if more than one is present.</p>
</td></tr>
<tr><td><code id="plotDataExplorer_+3A_maxcategories">maxCategories</code></td>
<td>
<p>maximum number of categories to color and facet by. Only
character and factor data with a number of unique values less than or equal
to this number will be shown as options for selecting colors and facets. Not
recommended to increase this value much beyond 20, trying to plot a large number
of colors will cause R to be sad.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing, just plots
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)

if(interactive()) plotDataExplorer(exStudy)
if(interactive()) plotDataExplorer(exStudy, callType='click')

</code></pre>

<hr>
<h2 id='plotGram'>Plot Spectrogram or Cepstrogram</h2><span id='topic+plotGram'></span>

<h3>Description</h3>

<p>Plots either a spectrogram or cepstrogram and also overlays
whistle or cepstral contours from the binary files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotGram(
  x,
  evNum = 1,
  start = NULL,
  end = NULL,
  channel = 1,
  wl = 512,
  hop = 0.25,
  mode = c("spec", "ceps"),
  detections = c("cepstrum", "click", "whistle"),
  detCol = c("red", "blue", "blue"),
  sr = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotGram_+3A_x">x</code></td>
<td>
<p>an <a href="#topic+AcousticStudy-class">AcousticStudy</a> object</p>
</td></tr>
<tr><td><code id="plotGram_+3A_evnum">evNum</code></td>
<td>
<p>if <code>x</code> is a study, the event index number to calculate the average
spectra for. Note that this is the index in the order that they appear in the
<a href="#topic+AcousticStudy-class">AcousticStudy</a> object, not the actual event number. Alternatively
full event names can be used</p>
</td></tr>
<tr><td><code id="plotGram_+3A_start">start</code></td>
<td>
<p>start time of the plot, either POSIXct or seconds from
the start of the event</p>
</td></tr>
<tr><td><code id="plotGram_+3A_end">end</code></td>
<td>
<p>end time of the plot, either POSIXct or seconds from the start
of the event.</p>
</td></tr>
<tr><td><code id="plotGram_+3A_channel">channel</code></td>
<td>
<p>channel to plot</p>
</td></tr>
<tr><td><code id="plotGram_+3A_wl">wl</code></td>
<td>
<p>window length of FFT to use for creating plot</p>
</td></tr>
<tr><td><code id="plotGram_+3A_hop">hop</code></td>
<td>
<p>hop value of FFT to use for creating plot, either as a percentage
of <code>wl</code> or number of samples</p>
</td></tr>
<tr><td><code id="plotGram_+3A_mode">mode</code></td>
<td>
<p>one of <code>'spec'</code> or <code>'ceps'</code> to plot either spectrogram
or cepstrogram</p>
</td></tr>
<tr><td><code id="plotGram_+3A_detections">detections</code></td>
<td>
<p>vector containing any of <code>'cepstrum'</code>, <code>'click'</code>,
and/or <code>'whistle'</code> indicating which detections to overlay on the plot</p>
</td></tr>
<tr><td><code id="plotGram_+3A_detcol">detCol</code></td>
<td>
<p>vector containing colors to use for plotting detections. Order matches
order of detections (default alphabetical - cepstrum, click, whistle)</p>
</td></tr>
<tr><td><code id="plotGram_+3A_sr">sr</code></td>
<td>
<p>sample rate</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing, just plots
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
recs &lt;- system.file('extdata', 'Recordings', package='PAMpal')
exStudy &lt;- updateFiles(exStudy,
                       bin=system.file('extdata', 'Binaries', package='PAMpal'),
                       db = system.file('extdata', 'Example.sqlite3', package='PAMpal'))
exStudy &lt;- addRecordings(exStudy, folder=recs, log=FALSE, progress=FALSE)
# No detections will appear on plot because included recordings are heavily decimated
plotGram(exStudy)

</code></pre>

<hr>
<h2 id='plotWaveform'>Plot Graphical Representations of Waveforms</h2><span id='topic+plotWaveform'></span><span id='topic+plotSpectrogram'></span><span id='topic+plotWigner'></span>

<h3>Description</h3>

<p>Fetches matching binary data from a single or multiple
detections in an <a href="#topic+AcousticStudy-class">AcousticStudy</a>  object, then plot
the resulting data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotWaveform(x, UID, length = NULL, sr = NULL)

plotSpectrogram(x, UID, length = NULL, sr = NULL, ...)

plotWigner(x, UID, length = NULL, sr = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotWaveform_+3A_x">x</code></td>
<td>
<p>a <a href="#topic+AcousticStudy-class">AcousticStudy</a> object, a list of <a href="#topic+AcousticEvent-class">AcousticEvent</a>
objects, or a single <a href="#topic+AcousticEvent-class">AcousticEvent</a> object</p>
</td></tr>
<tr><td><code id="plotWaveform_+3A_uid">UID</code></td>
<td>
<p>the UID(s) of the individual detections to fetch the binary
data for</p>
</td></tr>
<tr><td><code id="plotWaveform_+3A_length">length</code></td>
<td>
<p>length of the waveform to use for plotting, in samples. The clip
used will be centered around the maximum value of the waveform, if <code>length</code>
is <code>NULL</code> (default), the entire waveform will be used. If <code>length</code> is
greater than the stored clip, the waveform will be zero-padded to <code>length</code></p>
</td></tr>
<tr><td><code id="plotWaveform_+3A_sr">sr</code></td>
<td>
<p>if <code>NULL</code> (default) will try to read sample rate from your
data. If provided as a value will override sample rate in the data.</p>
</td></tr>
<tr><td><code id="plotWaveform_+3A_...">...</code></td>
<td>
<p>other arguments to pass to the spectrogram or wigner functions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>plotSpectrogram</code> function uses the function
<code><a href="signal.html#topic+specgram">specgram</a></code> to plot the spectrogram, see this function
for plotting options. The <code>plotWigner</code> function uses the function
<code><a href="PAMmisc.html#topic+wignerTransform">wignerTransform</a></code> to plot the Wigner-Ville transform,
see this function for options.
</p>


<h3>Value</h3>

<p>Nothing, just shows plots for every channel of the waveform for
each UID provided
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
plotWaveform(exStudy, 8000003)
plotSpectrogram(exStudy, 8000003)
plotWigner(exStudy, 8000003)

</code></pre>

<hr>
<h2 id='processPgDetections'>Load and Process Detections from Pamguard</h2><span id='topic+processPgDetections'></span>

<h3>Description</h3>

<p>Loads and processes acoustic detection data that has been
run through Pamguard. Uses the binary files and database(s) contained
in <code>pps</code>, and will group your data into events by the
grouping present in the 'OfflineEvents' and 'Detection Group Localiser'
tables (<code>mode = 'db'</code>) or by the grouping specified by start and end
times in the supplied <code>grouping</code> (<code>mode = 'time'</code>), or by start and
end of recording files (<code>mode = 'recording'</code>). Will apply
all processing functions in <code>pps</code> to the appropriate modules
</p>


<h3>Usage</h3>

<pre><code class='language-R'>processPgDetections(
  pps,
  mode = c("db", "time", "recording"),
  id = NULL,
  grouping = NULL,
  format = c("%m/%d/%Y %H:%M:%OS", "%m-%d-%Y %H:%M:%OS",
    "%Y/%m/%d %H:%M:%OS", "%Y-%m-%d %H:%M:%OS"),
  progress = TRUE,
  verbose = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="processPgDetections_+3A_pps">pps</code></td>
<td>
<p>a <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object containing the databases,
binaries, and functions to use for processing data. See
<code><a href="#topic+PAMpalSettings">PAMpalSettings</a></code>. Can also be an <a href="#topic+AcousticStudy-class">AcousticStudy</a>
object, in which case the <code>pps</code> slot will be used.</p>
</td></tr>
<tr><td><code id="processPgDetections_+3A_mode">mode</code></td>
<td>
<p>selector for how to organize your data in to events. <code>db</code>
will organize by events based on tables in the databases. <code>time</code>
will organize into events based on timestamps provided in <code>grouping</code>.
<code>recording</code> will organize events by the start and end times of recording
files found in the database. For <code>time</code> and <code>recording</code>, ALL detections
between the start and end times are included, for <code>db</code> only selected
detections are included.</p>
</td></tr>
<tr><td><code id="processPgDetections_+3A_id">id</code></td>
<td>
<p>an event name or id for this study, will default to today's date if
not supplied (recommended to supply your own informative id)</p>
</td></tr>
<tr><td><code id="processPgDetections_+3A_grouping">grouping</code></td>
<td>
<p>For <code>mode = 'db'</code>, the table to group events by.
Either <code>event</code> to use the OfflineEvents table, or <code>detGroup</code> to
use the detection group localiser module groups.
</p>
<p>For <code>mode = 'time'</code>,
this should be a data frame with three mandatory columns and 1 row
for each separate event. The mandatory columns are <code>start</code>, <code>end</code>,
and <code>id</code>. <code>start</code> and <code>end</code> should specify the
start and end time of the event and must be in UTC. <code>id</code> should
specify a unique id for each event. There are also optional columns
<code>species</code>, <code>db</code>, and <code>sr</code>. <code>species</code> should provide a
species ID if it is available. <code>db</code> and <code>sr</code> are the corresponding
database and sample rate to associate with a particular event, these typically
do not need to be specified as the function will attempt to automatically match
them based on the times of the events and the databases. Note that <code>db</code>
must be the full filepath to the database. If a clear match is not found then
the user will be prompted to either select from a list or input the proper
sample rate.
</p>
<p><code>grouping</code> can be supplied either as a data frame or as
a filepath to a csv file.</p>
</td></tr>
<tr><td><code id="processPgDetections_+3A_format">format</code></td>
<td>
<p>the date format for the <code>start</code> and <code>end</code> columns
in <code>grouping</code> if it is a csv. Times are assumed to be UTC. See
details section of <a href="base.html#topic+strptime">strptime</a> for more information on how to properly
format this</p>
</td></tr>
<tr><td><code id="processPgDetections_+3A_progress">progress</code></td>
<td>
<p>logical flog to show progress bars</p>
</td></tr>
<tr><td><code id="processPgDetections_+3A_verbose">verbose</code></td>
<td>
<p>logical flag to show messages</p>
</td></tr>
<tr><td><code id="processPgDetections_+3A_...">...</code></td>
<td>
<p>additional arguments to pass onto to different methods</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>mode</code> is not specified, it will try to be automatically determined
in the following order. 1) if a <code>grouping</code> data.frame or CSV is provided, then
<code>mode='time'</code> will be used. 2) If there are labelled events present in the
database, <code>mode='db'</code> will be used. 3) <code>mode='recording'</code> will be used,
which should be equivalent to loading all possible data.
</p>


<h3>Value</h3>

<p>an <a href="#topic+AcousticStudy-class">AcousticStudy</a> object with one <a href="#topic+AcousticEvent-class">AcousticEvent</a>
for each event in the <code>events</code> slot, and the <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object
used stored in the <code>pps</code> slot.
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
exPps &lt;- new('PAMpalSettings')
exPps &lt;- addDatabase(exPps, system.file('extdata', 'Example.sqlite3', package='PAMpal'))
exPps &lt;- addBinaries(exPps, system.file('extdata', 'Binaries', package='PAMpal'))
exClick &lt;- function(data) {
    standardClickCalcs(data, calibration=NULL, filterfrom_khz = 0)
}
exPps &lt;- addFunction(exPps, exClick, module = 'ClickDetector')
exPps &lt;- addFunction(exPps, roccaWhistleCalcs, module='WhistlesMoans')
exPps &lt;- addFunction(exPps, standardCepstrumCalcs, module = 'Cepstrum')
# process events labelled within the Pamguard database
exStudyDb &lt;- processPgDetections(exPps, mode='db', id='Example')
# can also give an AcousticStudy as input and it will use same functions and data
reprocess &lt;- processPgDetections(exStudyDb, mode='db', id='Reprocess')
# process events with manually set start/end times
grp &lt;- data.frame(start = as.POSIXct('2018-03-20 15:25:10', tz='UTC'),
                  end = as.POSIXct('2018-03-20 15:25:11', tz='UTC'),
                  id = 'GroupExample')
exStudyTime &lt;- processPgDetections(exPps, mode='time', grouping=grp, id='Time')
# process events by recording event
exStudyRecording &lt;- processPgDetections(exPps, mode='recording', id='Recording')

</code></pre>

<hr>
<h2 id='removeBinaries'>Remove Binaries from a PAMpalSettings Object</h2><span id='topic+removeBinaries'></span>

<h3>Description</h3>

<p>Remove a binary folder and associated files from the &quot;binaries&quot;
slot in a PAMpalSettings object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeBinaries(pps, index = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeBinaries_+3A_pps">pps</code></td>
<td>
<p>a <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object to remove binaries from</p>
</td></tr>
<tr><td><code id="removeBinaries_+3A_index">index</code></td>
<td>
<p>index indicating which binary folders to remove. Can be a vector
if you want to remove multiple folders. If missing user is prompted to
select a folder from a list, will only show up to the first 20. You can
easily remove all of the folders with a large index like <code>1:1000</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>the same <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object as pps, with the binary
folders and files associated with those folders removed from the &quot;binaries&quot;
slot.
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
exPps &lt;- new('PAMpalSettings')
exPps &lt;- addBinaries(exPps, system.file('extdata', 'Binaries', package='PAMpal'))
removeBinaries(exPps,index = 1)
if(interactive()) removeBinaries(exPps)

</code></pre>

<hr>
<h2 id='removeCalibration'>Remove a Calibration Function from a PAMpalSettings Object</h2><span id='topic+removeCalibration'></span>

<h3>Description</h3>

<p>Remove a calibration function from the &quot;calibration&quot;
slot of a PAMpalSettings object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeCalibration(pps, index = NULL, module = "ClickDetector", verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeCalibration_+3A_pps">pps</code></td>
<td>
<p>a <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object to remove a calibration from</p>
</td></tr>
<tr><td><code id="removeCalibration_+3A_index">index</code></td>
<td>
<p>index of the calibration function to remove. If <code>NULL</code>, user
will be prompted to select from a list. This can also be a vector to remove
multiple calibration functions at once.</p>
</td></tr>
<tr><td><code id="removeCalibration_+3A_module">module</code></td>
<td>
<p>the module of the calibration function to remove, currently
not needed</p>
</td></tr>
<tr><td><code id="removeCalibration_+3A_verbose">verbose</code></td>
<td>
<p>logical flag to show messages</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the same <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object as pps, with the calibration
function removed from the &quot;calibration&quot; slot
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
pps &lt;- new('PAMpalSettings')
calFile &lt;- system.file('extdata', 'calibration.csv', package='PAMpal')
pps &lt;- addCalibration(pps, calFile, all = TRUE, units=3)
calClick &lt;- function(data, calibration=NULL) {
    standardClickCalcs(data, calibration=calibration, filterfrom_khz = 0)
}
pps &lt;- addFunction(pps, calClick, module = 'ClickDetector')
pps &lt;- applyCalibration(pps, all=TRUE)
pps
removeCalibration(pps, index=1)

</code></pre>

<hr>
<h2 id='removeDatabase'>Remove a Database from a PAMpalSettings Object</h2><span id='topic+removeDatabase'></span>

<h3>Description</h3>

<p>Remove a database from the &quot;db&quot; slot in a PAMpalSettings
object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeDatabase(pps, index = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeDatabase_+3A_pps">pps</code></td>
<td>
<p>a <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object to remove a database from</p>
</td></tr>
<tr><td><code id="removeDatabase_+3A_index">index</code></td>
<td>
<p>index indicating which database(s) to remove. Can be a vector
if you want to remove multiple databases. If missing user is prompted to
select a database from a list, will only show up to the first 20. You can
easily remove all of the databases with a large index like <code>1:1000</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>the same <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object as pps, with the database(s)
removed from the &quot;db&quot; slot
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
exPps &lt;- new('PAMpalSettings')
exPps &lt;- addDatabase(exPps, system.file('extdata', 'Example.sqlite3', package='PAMpal'))
removeDatabase(exPps, 1)
if(interactive()) removeDatabase(exPps)

</code></pre>

<hr>
<h2 id='removeFunction'>Remove a Function from a PAMpalSettings Object</h2><span id='topic+removeFunction'></span>

<h3>Description</h3>

<p>Remove a function from the &quot;function&quot; slot in a PAMpalSettings
object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeFunction(pps, index = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeFunction_+3A_pps">pps</code></td>
<td>
<p>a <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object to remove a function from</p>
</td></tr>
<tr><td><code id="removeFunction_+3A_index">index</code></td>
<td>
<p>index indicating which function to move, counting from
<code>ClickDetector</code> functions first, then <code>WhistlesMoans</code> functions,
then <code>Cepstrum</code> functions.
This is the same order functions appear in when examining the pps object.
For example, if there are two Click functions and one Whistle function, the
Whistle function would have an index of 3. If missing, user can select
from a list. This can also be a vector to remove multiple functions at once.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the same <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object as pps, with the function
removed from the &quot;functions&quot; slot
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
exPps &lt;- new('PAMpalSettings')
exPps &lt;- addFunction(exPps, roccaWhistleCalcs, module='WhistlesMoans')
exPps &lt;- addFunction(exPps, standardCepstrumCalcs, module = 'Cepstrum')
removeFunction(exPps, 1)
removeFunction(exPps, 1:2)
# normally best to use interactively instead of specifying index
if(interactive()) removeFunction(exPps)

</code></pre>

<hr>
<h2 id='removeNote'>removeNote</h2><span id='topic+removeNote'></span>

<h3>Description</h3>

<p>Remove a note added with <a href="#topic+addNote">addNote</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeNote(x, index)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeNote_+3A_x">x</code></td>
<td>
<p>An <a href="#topic+AcousticStudy-class">AcousticStudy</a> or <a href="#topic+AcousticEvent-class">AcousticEvent</a> object</p>
</td></tr>
<tr><td><code id="removeNote_+3A_index">index</code></td>
<td>
<p>The index of the note to remove, order matches the output of <a href="#topic+getNotes">getNotes</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>For <code>addNote</code>, the same data as <code>x</code>, with notes added.
For <code>getNotes</code>, a list of all notes present in <code>x</code>
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
exStudy &lt;- addNote(exStudy, to='study', label='Note1',
                   note='My first note for this study')
exStudy &lt;- addNote(exStudy, to='event', evNum=1:2, label='Note2',
                   note='A note for the first two events')
exStudy
removeNote(exStudy, 1)
removeNote(exStudy, 2)
removeNote(exStudy, 3)

</code></pre>

<hr>
<h2 id='removeSettings'>Remove Settings from a PAMpalSettings Object</h2><span id='topic+removeSettings'></span>

<h3>Description</h3>

<p>Remove all settings from the &quot;settings&quot; slot in a PAMpalSettings
object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeSettings(pps)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeSettings_+3A_pps">pps</code></td>
<td>
<p>a <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object to remove settings from</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the same <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object as pps, with all
settings removed from the &quot;settings&quot; slot
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
exPps &lt;- new('PAMpalSettings')
exPps &lt;- addSettings(exPps, system.file('extdata', 'Example.xml', package='PAMpal'))
removeSettings(exPps)

</code></pre>

<hr>
<h2 id='roccaWhistleCalcs'>Calculate a Set of Measurements for Whistles</h2><span id='topic+roccaWhistleCalcs'></span>

<h3>Description</h3>

<p>Calculate a set of measurements from a whistle contour. All
calculations following ROCCA method from Julie and Michael Oswald, as
implemented in Pamguard and detailed in Oswald et al (2007) &lt;doi:10.1121/1.2743157&gt;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>roccaWhistleCalcs(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="roccaWhistleCalcs_+3A_data">data</code></td>
<td>
<p>a list that must have <code>freq</code> the whistle contour stored as a
vector of FFT bin frequencies in hertz, and <code>time</code> the time in seconds
at each bin.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with 50 calculated ROCCA parameters, each item in the list will
only have 1 entry so that this can easily be converted to a data frame.
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(testWhistle)
roccaWhistleCalcs(testWhistle)

</code></pre>

<hr>
<h2 id='sampleDetector'>Subsample Detectors in AcousticStudy</h2><span id='topic+sampleDetector'></span>

<h3>Description</h3>

<p>samples either a fraction or fixed number from each detector
in each event of an AcousticStudy
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sampleDetector(x, n = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sampleDetector_+3A_x">x</code></td>
<td>
<p><a href="#topic+AcousticStudy-class">AcousticStudy</a> object</p>
</td></tr>
<tr><td><code id="sampleDetector_+3A_n">n</code></td>
<td>
<p>if less than 1, proportion of rows to sample from each detector.
If 1 or more, the number of rows to sample from each detector.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Uses <a href="dplyr.html#topic+slice_sample">slice_sample</a> to do the sampling, <code>n</code>
is converted either to <code>prop</code> or <code>n</code> based on its size.
Negative values are treated the same as in <a href="dplyr.html#topic+slice_sample">slice_sample</a>
</p>


<h3>Value</h3>

<p>subsampled AcousticStudy <code>x</code>
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
nDetections(exStudy)
halfData &lt;- sampleDetector(exStudy, n=0.5)
# there are odd numbers of rows in some detectors, so less than half
nDetections(exStudy)
oneDetPerDetector &lt;- sampleDetector(exStudy, n=1)
nDetections(exStudy)

</code></pre>

<hr>
<h2 id='setSpecies'>Set the Species Classification of Events</h2><span id='topic+setSpecies'></span>

<h3>Description</h3>

<p>Sets the <code>species</code> slot of <a href="#topic+AcousticEvent-class">AcousticEvent</a>
objects within an <a href="#topic+AcousticStudy-class">AcousticStudy</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setSpecies(x, method = c("pamguard", "manual", "reassign"), value, type = "id")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setSpecies_+3A_x">x</code></td>
<td>
<p>a <a href="#topic+AcousticStudy-class">AcousticStudy</a> object, a list of <a href="#topic+AcousticEvent-class">AcousticEvent</a>
objects, or a single <a href="#topic+AcousticEvent-class">AcousticEvent</a> object</p>
</td></tr>
<tr><td><code id="setSpecies_+3A_method">method</code></td>
<td>
<p>the method for assigning species to an event. Currently supports
<code>pamguard</code>, which will use the 'eventType' or 'Text_Annotation' column
to assign species, <code>manual</code> which will use <code>value</code> to assign
species manually, or <code>reassign</code> which will use <code>value</code> to
reassign an old species label to a new one</p>
</td></tr>
<tr><td><code id="setSpecies_+3A_value">value</code></td>
<td>
<p>required only if <code>method</code> is set to 'manual' or 'reassign'.
For <code>'manual'</code>, can either be a single value to assign to all events, or a
vector with length equal to the number of events. Can also be a dataframe
with columns <code>event</code> and <code>species</code>, in which case species will
be matched to corresponding event names instead of just relying on the
order. If using this, please note the prefix OE or DGL present on most
event numbers (see the <code>id</code> slot of your events, or <code>names(events(x))</code>).
For <code>'reassign'</code>, <code>value</code> must be a data frame with columns
<code>old</code> and <code>new</code>. Any events with species id in the <code>old</code> column
of the dataframe will get reassigned to the corresponding id in the
<code>new</code> column.</p>
</td></tr>
<tr><td><code id="setSpecies_+3A_type">type</code></td>
<td>
<p>the type of classification to set, this is just a label within
the <code>species</code> slot. Default <code>'id'</code> should typically not be changed
since this is used by other functions</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the same object as <code>x</code>, with species identifications assigned
as an item named <code>type</code> in the <code>species</code> slot
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# setting up example data
exPps &lt;- new('PAMpalSettings')
exPps &lt;- addDatabase(exPps, system.file('extdata', 'Example.sqlite3', package='PAMpal'))
exPps &lt;- addBinaries(exPps, system.file('extdata', 'Binaries', package='PAMpal'))
exClick &lt;- function(data) {
    standardClickCalcs(data, calibration=NULL, filterfrom_khz = 0)
}
exPps &lt;- addFunction(exPps, exClick, module = 'ClickDetector')
exPps &lt;- addFunction(exPps, roccaWhistleCalcs, module='WhistlesMoans')
exPps &lt;- addFunction(exPps, standardCepstrumCalcs, module = 'Cepstrum')
exData &lt;- processPgDetections(exPps, mode='db')
exData &lt;- setSpecies(exData, method='pamguard')
species(exData)
exData &lt;- setSpecies(exData, method='manual', value = c('sp1', 'sp2'))
species(exData)
exData &lt;- setSpecies(exData, method='reassign',
                     value = data.frame(old='sp1', new='sp3'))
species(exData)

</code></pre>

<hr>
<h2 id='standardCepstrumCalcs'>Calculate a Set of Measurements from a Cepstrum Contour</h2><span id='topic+standardCepstrumCalcs'></span>

<h3>Description</h3>

<p>Calculate a set of measurements from a cepstrum contour. This
is currently used to measure the inter-click interval of the burst pulse
type calls
</p>


<h3>Usage</h3>

<pre><code class='language-R'>standardCepstrumCalcs(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="standardCepstrumCalcs_+3A_data">data</code></td>
<td>
<p>a list that must have <code>quefrency</code> the &quot;quefrency&quot; at each
cepstrum contour, <code>sr</code> the sample rate of the data,
and <code>time</code> the time in seconds at each bin</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with inter-click interval (ici), duration (seconds), and
slope of the ici
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(testCeps)
standardCepstrumCalcs(testCeps)

</code></pre>

<hr>
<h2 id='standardClickCalcs'>Calculate a Set of Measurements for Clicks</h2><span id='topic+standardClickCalcs'></span>

<h3>Description</h3>

<p>Calculate a set of &quot;standard&quot; measurements for odontocete clicks
</p>


<h3>Usage</h3>

<pre><code class='language-R'>standardClickCalcs(
  data,
  sr_hz = "auto",
  calibration = NULL,
  filterfrom_khz = 10,
  filterto_khz = NULL,
  winLen_sec = 0.0025
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="standardClickCalcs_+3A_data">data</code></td>
<td>
<p>a list that must have 'wave' containing the wave form as a
matrix with a separate column for each channel, and 'sr' the
sample rate of the data. Data can also be a <code>Wave</code> class
object, like one created by <code><a href="tuneR.html#topic+Wave">Wave</a></code>.</p>
</td></tr>
<tr><td><code id="standardClickCalcs_+3A_sr_hz">sr_hz</code></td>
<td>
<p>either <code>'auto'</code> (default) or the numeric value of the sample
rate in hertz. If <code>'auto'</code>, the sample rate will be read from the
'sr' of <code>data</code></p>
</td></tr>
<tr><td><code id="standardClickCalcs_+3A_calibration">calibration</code></td>
<td>
<p>a calibration function to apply to the spectrum, must be
a gam. If NULL no calibration will be applied (not recommended).</p>
</td></tr>
<tr><td><code id="standardClickCalcs_+3A_filterfrom_khz">filterfrom_khz</code></td>
<td>
<p>frequency in khz of highpass filter to apply, or the lower
bound of a bandpass filter if <code>filterto_khz</code> is not <code>NULL</code></p>
</td></tr>
<tr><td><code id="standardClickCalcs_+3A_filterto_khz">filterto_khz</code></td>
<td>
<p>if a bandpass filter is desired, set this as the upper bound.
If only a highpass filter is desired, leave as the default <code>NULL</code> value</p>
</td></tr>
<tr><td><code id="standardClickCalcs_+3A_winlen_sec">winLen_sec</code></td>
<td>
<p>length in seconds of fft window. The click wave is first
shortened to this number of samples around the peak of the wave,
removing a lot of the noise around the click. Following approach of
JB/EG/MS.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculations of parameters mostly follow the approach outlined in Griffiths
et al (2020) &lt;doi:10.1121/10.0001229&gt; and Baumann-Pickering et al (2010)
&lt;doi:10.1121/1.3479549&gt;.
Additionally, up to 3 highest peak frequencies and the &quot;troughs&quot; between them are
calculated (see <a href="PAMmisc.html#topic+peakTrough">peakTrough</a>)
</p>


<h3>Value</h3>

<p>A data frame with one row for each channel of click waveform
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(testClick)
standardClickCalcs(testClick)

</code></pre>

<hr>
<h2 id='testCeps'>A fake cepstrum contour</h2><span id='topic+testCeps'></span>

<h3>Description</h3>

<p>A manually created fake cepstrum contour, mimicing what the output
would be from the Pamguard module and fed into the cepstrum calcs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(testCeps)
</code></pre>


<h3>Format</h3>

<p>A list with three items:
</p>

<dl>
<dt>quefrency</dt><dd><p>a vector of the cepstrum contour quefrency values</p>
</dd>
<dt>time</dt><dd><p>a vector of the time values of the cepsturm contour in seconds</p>
</dd>
<dt>sr</dt><dd><p>the sample rate of the recording</p>
</dd>
</dl>


<hr>
<h2 id='testClick'>A two-channel recording of a delphinid click</h2><span id='topic+testClick'></span>

<h3>Description</h3>

<p>An example delphinid click waveform. This is a two-channel recording
of some kind of delphinid click, recorded at 500kHz There are
800 samples recorded on each channel.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(testClick)
</code></pre>


<h3>Format</h3>

<p>A list with two items:
</p>

<dl>
<dt>wave</dt><dd><p>a matrix with two columns of 800 samples, each column
is a separate recording channel</p>
</dd>
<dt>sr</dt><dd><p>the sample rate of the recording</p>
</dd>
</dl>



<h3>Source</h3>

<p>Southwest Fisheries Science Center / NMFS / NOAA
</p>

<hr>
<h2 id='testGPL'>A fake GPL detection</h2><span id='topic+testGPL'></span>

<h3>Description</h3>

<p>A manually created fake GPL contour, mimicing what the output
would be from the Pamguard module and fed into the GPL calcs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(testGPL)
</code></pre>


<h3>Format</h3>

<p>A list with three items:
</p>

<dl>
<dt>freq</dt><dd><p>a vector of the frequency contour values in hertz</p>
</dd>
<dt>time</dt><dd><p>a vector of the time values of the contour in seconds</p>
</dd>
</dl>


<hr>
<h2 id='testWhistle'>A fake whistle contour</h2><span id='topic+testWhistle'></span>

<h3>Description</h3>

<p>A manually created fake whistle contour reanging from 1kHz to 3.1kHz
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(testWhistle)
</code></pre>


<h3>Format</h3>

<p>A list with two items:
</p>

<dl>
<dt>freq</dt><dd><p>a vector of the frequency contour values in hertz</p>
</dd>
<dt>time</dt><dd><p>a vector of the time values of the contour in seconds</p>
</dd>
</dl>


<hr>
<h2 id='updateFiles'>Update Location of Files in an AcousticStudy</h2><span id='topic+updateFiles'></span>

<h3>Description</h3>

<p>Updates the stored locations of binary, database, and/or recording
files in the <code>files</code> slots of an <a href="#topic+AcousticStudy-class">AcousticStudy</a> and all
<a href="#topic+AcousticEvent-class">AcousticEvent</a> objects within. Runs interactively to prompt
users to select folders if missing files are found. Typically used after changing
computers, or if original data was on an external hard drive. If any
missing files are not able to be located, they will be kept in the files
slot so that this function can be run again
</p>


<h3>Usage</h3>

<pre><code class='language-R'>updateFiles(
  x,
  bin = NULL,
  db = NULL,
  recording = NULL,
  verbose = TRUE,
  check = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="updateFiles_+3A_x">x</code></td>
<td>
<p>an <a href="#topic+AcousticStudy-class">AcousticStudy</a> or <a href="#topic+AcousticEvent-class">AcousticEvent</a>
object</p>
</td></tr>
<tr><td><code id="updateFiles_+3A_bin">bin</code></td>
<td>
<p>folder containing updated binary file locations. If
<code>NULL</code> (default), user will be prompted to select a folder.
If <code>NA</code>, binary files will be skipped.</p>
</td></tr>
<tr><td><code id="updateFiles_+3A_db">db</code></td>
<td>
<p>single file or folder containing updated database file locations.
<code>NULL</code> (default), user will be prompted to select a folder.
If <code>NA</code>, database files will be skipped.</p>
</td></tr>
<tr><td><code id="updateFiles_+3A_recording">recording</code></td>
<td>
<p>folder containing updated recording file locations. If
<code>NULL</code> (default), user will be prompted to select a folder.
If <code>NA</code>, recording files will be skipped.</p>
</td></tr>
<tr><td><code id="updateFiles_+3A_verbose">verbose</code></td>
<td>
<p>logical flag to print messages about success of replacement</p>
</td></tr>
<tr><td><code id="updateFiles_+3A_check">check</code></td>
<td>
<p>logical flag to do extra checking. You do not need to set this
parameter, used internally for speed purposes so certain checks are not
repeated</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the same <a href="#topic+AcousticStudy-class">AcousticStudy</a> and
<a href="#topic+AcousticEvent-class">AcousticEvent</a> object as <code>x</code> with
updated file locations
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
# files in exStudy will have paths local to package creator's computer
files(exStudy)$db
file.exists(files(exStudy)$db)
files(exStudy)$binaries
file.exists(files(exStudy)$binaries)
# folder with example DB
db &lt;- system.file('extdata', package='PAMpal')
# folder with example binaries
bin &lt;- system.file('extdata', 'Binaries', package='PAMpal')
exStudy &lt;- updateFiles(exStudy, db=db, bin=bin)
files(exStudy)$db
file.exists(files(exStudy)$db)
files(exStudy)$binaries
file.exists(files(exStudy)$binaries)

</code></pre>

<hr>
<h2 id='updatePamObject'>Update PAMpal S4 Object</h2><span id='topic+updatePamObject'></span>

<h3>Description</h3>

<p>Updates older versions of PAMpal's S4 objects to stop &quot;validOjbect&quot;
warning messages
</p>


<h3>Usage</h3>

<pre><code class='language-R'>updatePamObject(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="updatePamObject_+3A_x">x</code></td>
<td>
<p>an <a href="#topic+AcousticStudy-class">AcousticStudy</a>, <a href="#topic+AcousticEvent-class">AcousticEvent</a>,
or <a href="#topic+PAMpalSettings-class">PAMpalSettings</a> object</p>
</td></tr>
</table>


<h3>Details</h3>

<p>As of v0.12.0 this updates any previous version's PAMpalSettings
objects to have the new &quot;settings&quot; slot, as well as updating any 
PAMpalSettings objects within an AcousticStudy
</p>


<h3>Value</h3>

<p>the same object as <code>x</code> with any slot changes made
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
pps &lt;- new('PAMpalSettings')
# manually breaking this S4 class, don't try this at home
attr(pps, 'settings') &lt;- NULL
# This will now give an error
pps
pps &lt;- updatePamObject(pps)
# Fixed!
pps

## End(Not run)

</code></pre>

<hr>
<h2 id='writeEventClips'>Create Wav Clips of Data</h2><span id='topic+writeEventClips'></span><span id='topic+parseEventClipName'></span>

<h3>Description</h3>

<p>Creates audio clips containing sounds from events or detections
</p>


<h3>Usage</h3>

<pre><code class='language-R'>writeEventClips(
  x,
  buffer = c(0, 0.1),
  outDir = ".",
  mode = c("event", "detection"),
  channel = 1,
  filter = 0,
  useSample = FALSE,
  progress = TRUE,
  verbose = TRUE,
  fixLength = FALSE
)

parseEventClipName(file, part = c("event", "time"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="writeEventClips_+3A_x">x</code></td>
<td>
<p><a href="#topic+AcousticStudy-class">AcousticStudy</a> object containing data to make wav clips for</p>
</td></tr>
<tr><td><code id="writeEventClips_+3A_buffer">buffer</code></td>
<td>
<p>amount before and after each event to also include in the clip, in seconds.
Can either be a vector of length two specifying how much to buffer before and after
(first number should be negative), or a single value if the buffer amount should be identical.</p>
</td></tr>
<tr><td><code id="writeEventClips_+3A_outdir">outDir</code></td>
<td>
<p>directory to write clips to, defaults to current directory</p>
</td></tr>
<tr><td><code id="writeEventClips_+3A_mode">mode</code></td>
<td>
<p>either <code>'event'</code> or <code>'detection'</code> specifying whether to create
wav clips of entire events or individual detections</p>
</td></tr>
<tr><td><code id="writeEventClips_+3A_channel">channel</code></td>
<td>
<p>channel(s) of clips to write</p>
</td></tr>
<tr><td><code id="writeEventClips_+3A_filter">filter</code></td>
<td>
<p>filter to apply to wav clips before writing, values in kHz. A value of <code>0</code>
applies no filter. A single value applies a highpass filter at that value. A vector of two
values applies a lowpass filter if the first number is <code>0</code>, or a bandpass filter if
both are non-zero.</p>
</td></tr>
<tr><td><code id="writeEventClips_+3A_usesample">useSample</code></td>
<td>
<p>logical flag to use startSample information in binaries instead of UTC
time for start of detections. This can be slightly more accurate (~1ms) but will take
longer</p>
</td></tr>
<tr><td><code id="writeEventClips_+3A_progress">progress</code></td>
<td>
<p>logical flag to show progress bar</p>
</td></tr>
<tr><td><code id="writeEventClips_+3A_verbose">verbose</code></td>
<td>
<p>logical flag to show summary messages</p>
</td></tr>
<tr><td><code id="writeEventClips_+3A_fixlength">fixLength</code></td>
<td>
<p>logical flag to fix the output clip length to a constant value. If
<code>TRUE</code>, then output clip length is entirely determined by the buffer value, as
if the detection or event had zero length. E.g. <code>buffer=c(-2,1)</code> will produce clips
3 seconds long, starting 2 seconds before the detection/event start time.</p>
</td></tr>
<tr><td><code id="writeEventClips_+3A_file">file</code></td>
<td>
<p>file name to parse</p>
</td></tr>
<tr><td><code id="writeEventClips_+3A_part">part</code></td>
<td>
<p>part of file name to return</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>parseEventClipName</code> parses the file names created to pull out
event names or file start times
</p>


<h3>Value</h3>

<p>A vector of file names for the wav clips that were successfully
created, any that were not able to be written will be <code>NA</code>. Note
that currently this can only write clips with up to 2 channels. File names
will be formatted as
[Event or Detection]_[Id]CH[ChannelNumber(s)]_[YYYYMMDD]_[HHMMSS]_[mmm].wav
The last numbers are the start time of the file in UTC, accurate to milliseconds.
The Id is either the event ID or the detection UID.
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
recs &lt;- system.file('extdata', 'Recordings', package='PAMpal')
exStudy &lt;- addRecordings(exStudy, folder=recs, log=FALSE, progress=FALSE)
## Not run: 
# not running so that no wav clips are written to disk
wavs &lt;- writeEventClips(exStudy, outDir='WavFolder', mode='event')

## End(Not run)

</code></pre>

<hr>
<h2 id='writeWignerData'>Write Wigner Transform Data of Click Detections to Disk</h2><span id='topic+writeWignerData'></span>

<h3>Description</h3>

<p>Create Wigner-Ville transform data of click clips from all
detections and save them to disk. A CSV file will also be written that
lists all UIDs contained in the output
</p>


<h3>Usage</h3>

<pre><code class='language-R'>writeWignerData(
  x,
  n = 256,
  t = 300,
  outDir = ".",
  mode = "nparray",
  progress = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="writeWignerData_+3A_x">x</code></td>
<td>
<p><a href="#topic+AcousticStudy-class">AcousticStudy</a> object containing data to make Wigner data for</p>
</td></tr>
<tr><td><code id="writeWignerData_+3A_n">n</code></td>
<td>
<p>number of frequency bins for Wigner transform (recommended power of 2)</p>
</td></tr>
<tr><td><code id="writeWignerData_+3A_t">t</code></td>
<td>
<p>number of samples to use for the click clip passed to the transform</p>
</td></tr>
<tr><td><code id="writeWignerData_+3A_outdir">outDir</code></td>
<td>
<p>directory to write data to</p>
</td></tr>
<tr><td><code id="writeWignerData_+3A_mode">mode</code></td>
<td>
<p>specifies the kind of output that will be created, currently only
supports creating NumPy arrays using the <code>reticulate</code> package, in future
will support image creation</p>
</td></tr>
<tr><td><code id="writeWignerData_+3A_progress">progress</code></td>
<td>
<p>logical flag to show progress bar</p>
</td></tr>
<tr><td><code id="writeWignerData_+3A_...">...</code></td>
<td>
<p>optional arguments to pass</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with two items: <code>files</code> - a vector of file names
for the Wigner data that were successfully created, any that were not
able to be written will be <code>NA</code>, and <code>warnings</code>, a list with
items containing event IDs that triggered any warnings
</p>


<h3>Author(s)</h3>

<p>Taiki Sakai <a href="mailto:taiki.sakai@noaa.gov">taiki.sakai@noaa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(exStudy)
exStudy &lt;- setSpecies(exStudy, method='pamguard')
## Not run: 
# not running because files are written to disk
wigFiles &lt;- writeWignerData(exStudy, outDir = 'WigFolder')

## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
