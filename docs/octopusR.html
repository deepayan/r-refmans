<!DOCTYPE html><html><head><title>Help for package octopusR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {octopusR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#check_datetime_format'><p>Check a datetime argument is in a suitable format</p></a></li>
<li><a href='#check_logical'><p>Check a logical argument is in a suitable format</p></a></li>
<li><a href='#get_consumption'><p>List consumption for a meter</p></a></li>
<li><a href='#get_meter_gsp'><p>Get the GSP of a meter-point.</p></a></li>
<li><a href='#get_products'><p>Return a list of energy products</p></a></li>
<li><a href='#set_api_key'><p>Set the Octopus API key</p></a></li>
<li><a href='#set_meter_details'><p>Set the details for your gas/electricity meter</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Interact with the 'Octopus Energy' API</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Description:</td>
<td>A simple wrapper for the 'Octopus Energy' API
    <a href="https://developer.octopus.energy/docs/api/">https://developer.octopus.energy/docs/api/</a>. It handles
    authentication, by storing a provided API key and meter details.
    Implemented endpoints include 'products' for viewing tariff details
    and 'consumption' for viewing meter consumption data.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/Moohan/octopusR">https://github.com/Moohan/octopusR</a>,
<a href="https://moohan.github.io/octopusR/">https://moohan.github.io/octopusR/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/Moohan/octopusR/issues">https://github.com/Moohan/octopusR/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>askpass, cli, glue, httr2, rlang, tibble</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, lubridate, spelling, testthat</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-06-09 14:38:49 UTC; James</td>
</tr>
<tr>
<td>Author:</td>
<td>James McMahon <a href="https://orcid.org/0000-0002-5380-2029"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>James McMahon &lt;jamesmcmahon0@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-06-09 15:10:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='check_datetime_format'>Check a datetime argument is in a suitable format</h2><span id='topic+check_datetime_format'></span>

<h3>Description</h3>

<p>Check if a given argument is of a proper ISO 8601 format e.g.
<code style="white-space: pre;">&#8288;2023-03-02T21:26:10Z&#8288;</code>. If not it will give an informative error message.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_datetime_format(arg_date)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_datetime_format_+3A_arg_date">arg_date</code></td>
<td>
<p>The argument to check</p>
</td></tr>
</table>

<hr>
<h2 id='check_logical'>Check a logical argument is in a suitable format</h2><span id='topic+check_logical'></span>

<h3>Description</h3>

<p>Check if a given argument is of a logical. If not it will give
an informative error message.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_logical(arg_lgl)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_logical_+3A_arg_lgl">arg_lgl</code></td>
<td>
<p>The argument to check</p>
</td></tr>
</table>

<hr>
<h2 id='get_consumption'>List consumption for a meter</h2><span id='topic+get_consumption'></span>

<h3>Description</h3>

<p>Return a list of consumption values for half-hour periods for a
given meter-point and meter.
</p>
<p>Unit of measurement:
</p>

<ul>
<li><p> Electricity meters: kWh
</p>
</li>
<li><p> SMETS1 Secure gas meters: kWh
</p>
</li>
<li><p> SMETS2 gas meters: m^3
</p>
</li></ul>



<h4>Parsing dates</h4>

<p>To return dates properly parsed <a href="lubridate.html#topic+lubridate-package">lubridate</a> is
required. Use the <code>tz</code> parameter to specify a time zone e.g. <code>tz = "UTC"</code>,
the default (<code>tz = NULL</code>) will return the dates unparsed, as characters.
</p>



<h3>Usage</h3>

<pre><code class='language-R'>get_consumption(
  meter_type = c("electricity", "gas"),
  mpan_mprn = get_meter_details(meter_type)[["mpan_mprn"]],
  serial_number = get_meter_details(meter_type)[["serial_number"]],
  api_key = get_api_key(),
  period_from = NULL,
  period_to = NULL,
  tz = NULL,
  order_by = c("-period", "period"),
  group_by = c("hour", "day", "week", "month", "quarter")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_consumption_+3A_meter_type">meter_type</code></td>
<td>
<p>Type of meter-point, electricity or gas</p>
</td></tr>
<tr><td><code id="get_consumption_+3A_mpan_mprn">mpan_mprn</code></td>
<td>
<p>The electricity meter-point's MPAN or gas meter-point’s
MPRN.</p>
</td></tr>
<tr><td><code id="get_consumption_+3A_serial_number">serial_number</code></td>
<td>
<p>The meter's serial number.</p>
</td></tr>
<tr><td><code id="get_consumption_+3A_api_key">api_key</code></td>
<td>
<p>Your API key. If you are an Octopus Energy customer,
you can generate an API key on the
<a href="https://octopus.energy/dashboard/developer/">developer dashboard</a>.</p>
</td></tr>
<tr><td><code id="get_consumption_+3A_period_from">period_from</code></td>
<td>
<p>Show consumption from the given datetime (inclusive).
This parameter can be provided on its own.</p>
</td></tr>
<tr><td><code id="get_consumption_+3A_period_to">period_to</code></td>
<td>
<p>Show consumption to the given datetime (exclusive).
This parameter also requires providing the <code>period_from</code> parameter
to create a range.</p>
</td></tr>
<tr><td><code id="get_consumption_+3A_tz">tz</code></td>
<td>
<p>a character string that specifies which time zone to parse the date with. The string
must be a time zone that is recognized by the user's OS.</p>
</td></tr>
<tr><td><code id="get_consumption_+3A_order_by">order_by</code></td>
<td>
<p>Ordering of results returned. Default is that results are
returned in reverse order from latest available figure.
Valid values:
</p>

<ul>
<li> <p><code>period</code>, to give results ordered forward.
</p>
</li>
<li> <p><code>-period</code>, (default), to give results ordered from most recent backwards.
</p>
</li></ul>
</td></tr>
<tr><td><code id="get_consumption_+3A_group_by">group_by</code></td>
<td>
<p>Aggregates consumption over a specified time period.
A day is considered to start and end at midnight in the server's time zone.
The default is that consumption is returned in half-hour periods.
Accepted values are:
</p>

<ul>
<li> <p><code>hour</code>
</p>
</li>
<li> <p><code>day</code>
</p>
</li>
<li> <p><code>week</code>
</p>
</li>
<li> <p><code>month</code>
</p>
</li>
<li> <p><code>quarter</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>a <a href="tibble.html#topic+tibble-package">tibble</a> of the requested consumption data.
</p>

<hr>
<h2 id='get_meter_gsp'>Get the GSP of a meter-point.</h2><span id='topic+get_meter_gsp'></span>

<h3>Description</h3>

<p>This endpoint can be used to get the GSP
of a given meter-point.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_meter_gsp(mpan = get_meter_details("electricity")[["mpan_mprn"]])
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_meter_gsp_+3A_mpan">mpan</code></td>
<td>
<p>The electricity meter-point's MPAN</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character of the meter-points GSP.
</p>

<hr>
<h2 id='get_products'>Return a list of energy products</h2><span id='topic+get_products'></span>

<h3>Description</h3>

<p>By default, results will be public energy products but if
authenticated organisations will also see products available to
their organisation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_products(
  is_variable = NULL,
  is_green = NULL,
  is_tracker = NULL,
  is_prepay = NULL,
  is_business = FALSE,
  available_at = Sys.Date(),
  authenticate = FALSE,
  api_key = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_products_+3A_is_variable">is_variable</code></td>
<td>
<p>(boolean, optional) Show only variable products.</p>
</td></tr>
<tr><td><code id="get_products_+3A_is_green">is_green</code></td>
<td>
<p>(boolean, optional) Show only green products.</p>
</td></tr>
<tr><td><code id="get_products_+3A_is_tracker">is_tracker</code></td>
<td>
<p>(boolean, optional) Show only tracker products.</p>
</td></tr>
<tr><td><code id="get_products_+3A_is_prepay">is_prepay</code></td>
<td>
<p>(boolean, optional) Show only pre-pay products.</p>
</td></tr>
<tr><td><code id="get_products_+3A_is_business">is_business</code></td>
<td>
<p>(boolean, default: FALSE) Show only business products.</p>
</td></tr>
<tr><td><code id="get_products_+3A_available_at">available_at</code></td>
<td>
<p>Show products available for new agreements on the given
datetime.
Defaults to current datetime, effectively showing products that are
currently available.</p>
</td></tr>
<tr><td><code id="get_products_+3A_authenticate">authenticate</code></td>
<td>
<p>(boolean, default: FALSE) Use an <code>api_key</code> to
authenticate. Only useful for organisations.</p>
</td></tr>
<tr><td><code id="get_products_+3A_api_key">api_key</code></td>
<td>
<p>Your API key. If you are an Octopus Energy customer,
you can generate an API key on the
<a href="https://octopus.energy/dashboard/developer/">developer dashboard</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <a href="tibble.html#topic+tibble-package">tibble</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_products(is_green = TRUE)
</code></pre>

<hr>
<h2 id='set_api_key'>Set the Octopus API key</h2><span id='topic+set_api_key'></span>

<h3>Description</h3>

<p>Set the Octopus API key to use. This will be stored as an
environment variable. You should add <code style="white-space: pre;">&#8288;OCTOPUSR_API_KEY = &lt;api_key&gt;&#8288;</code> to your
<code>.Renviron</code> otherwise you will have to call this function every session.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_api_key(api_key = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_api_key_+3A_api_key">api_key</code></td>
<td>
<p>Your API key. If you are an Octopus Energy customer,
you can generate an API key on the
<a href="https://octopus.energy/dashboard/developer/">developer dashboard</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>

<hr>
<h2 id='set_meter_details'>Set the details for your gas/electricity meter</h2><span id='topic+set_meter_details'></span>

<h3>Description</h3>

<p>Set the details for your gas/electricity meter. These will be
stored as environment variables. You should add:
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;OCTOPUSR_MPAN = &lt;electric MPAN&gt;&#8288;</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;OCTOPUSR_MPRN = &lt;gas MPRN&gt;&#8288;</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;OCTOPUSR_ELEC_SERIAL_NUM = &lt;electric serial number&gt;&#8288;</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;OCTOPUSR_GAS_SERIAL_NUM = &lt;gas serial number&gt;&#8288;</code>
to your <code>.Renviron</code> otherwise you will have to call this function every
session. You can find your meter details (MPAN/MPRN and serial number(s)) on
the <a href="https://octopus.energy/dashboard/developer/">developer dashboard</a>.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>set_meter_details(
  meter_type = c("electricity", "gas"),
  mpan_mprn = NULL,
  serial_number = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_meter_details_+3A_meter_type">meter_type</code></td>
<td>
<p>Type of meter-point, electricity or gas</p>
</td></tr>
<tr><td><code id="set_meter_details_+3A_mpan_mprn">mpan_mprn</code></td>
<td>
<p>The electricity meter-point's MPAN or gas meter-point’s
MPRN.</p>
</td></tr>
<tr><td><code id="set_meter_details_+3A_serial_number">serial_number</code></td>
<td>
<p>The meter's serial number.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
