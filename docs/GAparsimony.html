<!DOCTYPE html><html><head><title>Help for package GAparsimony</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {GAparsimony}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#GAparsimony-package'><p>GAparsimony</p></a></li>
<li><a href='#ga_parsimony'><p>GA-PARSIMONY</p></a></li>
<li><a href='#ga_parsimony-class'><p>Class &quot;ga_parsimony&quot;</p></a></li>
<li><a href='#GA-internal'><p>Internal GA functions</p></a></li>
<li><a href='#matrixNULL-class'><p>Virtual Class &quot;matrixNULL&quot; - Simple Class for matrix or NULL</p></a></li>
<li><a href='#numericOrNA-class'><p>Virtual Class &quot;numericOrNA&quot; - Simple Class for subassignment Values</p></a></li>
<li><a href='#parsimony_crossover'><p>Crossover operators in GA-PARSIMONY</p></a></li>
<li><a href='#parsimony_importance'><p>Percentage of appearance of each feature in elitist population</p></a></li>
<li><a href='#parsimony_monitor'><p>Functions for monitoring GA-PARSIMONY algorithm evolution</p></a></li>
<li><a href='#parsimony_Mutation'><p>Mutation operators in GA-PARSIMONY</p></a></li>
<li><a href='#parsimony_Population'><p>Population initialization in GA-PARSIMONY with a combined chromosome of model parameters and selected features</p></a></li>
<li><a href='#parsimony_rerank'><p>Function for reranking by complexity in parsimonious model selection process</p></a></li>
<li><a href='#parsimony_Selection'><p>Selection operators in GA-PARSIMONY</p></a></li>
<li><a href='#plot.ga_parsimony-method'><p>Plot of GA evolution of elitists</p></a></li>
<li><a href='#summary.ga_parsimony-method'><p>Summary for GA-PARSIMONY</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Searching Parsimony Models with Genetic Algorithms</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.5</td>
</tr>
<tr>
<td>Author:</td>
<td>F.J. Martinez-de-Pison &lt;fjmartin@unirioja.es&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>F.J. Martinez-de-Pison &lt;fjmartin@unirioja.es&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Methodology that combines feature selection, model tuning, and parsimonious model selection with Genetic Algorithms (GA) proposed in {Martinez-de-Pison} (2015) &lt;<a href="https://doi.org/10.1016%2Fj.asoc.2015.06.012">doi:10.1016/j.asoc.2015.06.012</a>&gt;. To this objective, a novel GA selection procedure is introduced based on separate cost and complexity evaluations.</td>
</tr>
<tr>
<td>Suggests:</td>
<td>parallel, doParallel, doRNG (&ge; 1.6), knitr (&ge; 1.8), lhs,
MASS, caret, mlbench, e1071, nnet, kernlab</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0), methods, foreach, iterators</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, graphics, grDevices, utils</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jpison/GAparsimony">https://github.com/jpison/GAparsimony</a></td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-04-07 17:00:08 UTC</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-04-07 09:36:16 UTC; fjmartin</td>
</tr>
</table>
<hr>
<h2 id='GAparsimony-package'>GAparsimony</h2><span id='topic+GAparsimony-package'></span><span id='topic+GAparsimony'></span>

<h3>Description</h3>

<p>Combines feature selection, model tuning, and parsimonious model selection with GA optimization. GA selection procedure is based on separate cost and complexity evaluations. Therefore, the best individuals are initially sorted by an error fitness function, and afterwards, models with similar costs are rearranged according to modelcomplexity measurement so as to foster models of lesser complexity. The algorithm can be run sequentially or in parallel using an explicit master-slave parallelisation.
</p>


<h3>Details</h3>

<p><span class="pkg">GAparsimony</span> package is a new GA wrapper automatic method that efficiently generated prediction models with reduced complexity and adequate generalization capacity. 
<code>ga_parsimony</code> function is primarily based on combining feature selection and model parameter tuning with a second novel GA selection process (ReRank algorithm) in order to achieve better overall parsimonious models. 
Unlike other GA methodologies that use a penalty parameter for combining loss and complexity measures into a unique fitness function, the main contribution of this package is that <code>ga_parsimony</code> selects the best models by considering cost and complexity separately. For this purpose, the ReRank algorithm rearranges individuals by their complexity when there is not a significant difference between their costs. Thus, less complex models with similar accuracy are promoted. Furthermore, because the penalty parameter is unnecessary, there is no consequent uncertainty associated with assigning a correct value beforehand. As a result, with GA-PARSIMONY, an automatic method for obtaining parsimonious models is finally made possible.
</p>


<h3>References</h3>

<p>Sanz-Garcia A., Fernandez-Ceniceros J., Antonanzas-Torres F., Pernia-Espinoza A.V., Martinez-de-Pison F.J. (2015).  GA-PARSIMONY: A GA-SVR approach with feature selection and parameter optimization to obtain parsimonious solutions for predicting temperature settings in a continuous annealing furnace. Applied Soft Computing 35, 23-38.
Fernandez-Ceniceros J., Sanz-Garcia A., Antonanzas-Torres F., Martinez-de-Pison F.J. (2015). A numerical-informational approach for characterising the ductile behaviour of the T-stub component. Part 2: Parsimonious soft-computing-based metamodel. Engineering Structures 82, 249-260.
Antonanzas-Torres F., Urraca R., Antonanzas J., Fernandez-Ceniceros J., Martinez-de-Pison F.J. (2015). Generation of daily global solar irradiation with support vector machines for regression. Energy Conversion and Management 96, 277-286.
</p>


<h3>Author(s)</h3>

<p>Francisco Javier Martinez de Pison Ascacibar <a href="mailto:fjmartin@unirioja.es">fjmartin@unirioja.es</a></p>

<hr>
<h2 id='ga_parsimony'>GA-PARSIMONY</h2><span id='topic+ga_parsimony'></span><span id='topic+show+2Cga_parsimony-method'></span><span id='topic+print+2Cga_parsimony-method'></span><span id='topic+print+2Cga_parsimony-method'></span><span id='topic+numericOrNA'></span>

<h3>Description</h3>

<p>A GA-based optimization method for searching accurate parsimonious models by combining feature selection, model tuning, and parsimonious model selection (PMS).
PMS procedure is based on separate cost and complexity evaluations. The best individuals are initially sorted by an error fitness function, and afterwards, models with similar costs are rearranged according to their model complexity so as to foster models of lesser complexity. The algorithm can be run sequentially or in parallel using an explicit master-slave parallelisation.</p>


<h3>Usage</h3>

<pre><code class='language-R'>ga_parsimony(fitness, ..., 
	min_param, max_param, nFeatures,  
	names_param=NULL, names_features=NULL,
	object=NULL, iter_ini=NULL,
	type_ini_pop="improvedLHS", 
	popSize = 50, pcrossover = 0.8,  maxiter = 40, 
	feat_thres=0.90, rerank_error = 0.0, iter_start_rerank = 0,
	pmutation = 0.10, feat_mut_thres=0.10, not_muted=3,
	elitism = base::max(1, round(popSize * 0.20)),
	population = parsimony_population,
	selection = parsimony_nlrSelection, 
	crossover = parsimony_crossover, 
	mutation = parsimony_mutation, 
	keep_history = FALSE,
	path_name_to_save_iter = NULL,	
	early_stop = maxiter, maxFitness = Inf, suggestions = NULL, 
	parallel = FALSE,
	monitor = if (interactive()) parsimony_monitor else FALSE, 
	seed_ini = NULL, verbose=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ga_parsimony_+3A_fitness">fitness</code></td>
<td>
<p>the fitness function, any allowable R function which takes as input an individual <code>chromosome</code> which combines the model parameters to tune and the features to be selected. Fitness function returns a numerical vector with three values: 
<code>"validation_cost"</code>: a robust validation cost measure, J (RMSE, AUC, Logloss). For example, <code>n</code>-repeated cross validation (CV) RMSE for regression or <code>n</code>-repeated CV Logloss or AUC for classification;
<code>"testing_cost"</code>: testing cost obtained with a testing dataset not included in the validation process. This value is only for checking the generalization capability of the model. NA value can be supplied if there is not a testing data set;
<code>"model_complexity"</code>: model complexity. Can be the number of features, number of support vectors in SVM, sum of power of weights in ANNs, depth in Trees, generalised degrees of freedom (GDF), or another complexity metrics o combination of them.
</p>
<p>Note: the chromosome is a concatenated real vector with the model parameters (parameters-chromosome) and the binary selection of the input features (features-chromosome). For example, a chromosome defined as c(10, 0.01, 0,1,1,0,1,0,0) could corresponds to a SVR model parameters C=10 &amp; gamma=0.01, and a selection of three input features (second, third and fifth) from a dataset of 7 features (0110100).
</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to the fitness function. This allows to write fitness functions that keep some variables fixed during the search.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_min_param">min_param</code></td>
<td>
<p>a vector of length equal to the model parameters providing the minimum of the search space.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_max_param">max_param</code></td>
<td>
<p>a vector of length equal to the model parameters providing the maximum of the search space.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_nfeatures">nFeatures</code></td>
<td>
<p>a value specifying the number of maximum input features.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_names_param">names_param</code></td>
<td>
<p>a vector with the name of the model parameters.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_names_features">names_features</code></td>
<td>
<p>a vector with the name of the input features.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_object">object</code></td>
<td>
<p>object of 'ga_parsimony' class to continue GA process. 'ga_parsimony@history' must be provided. Note: all GA settings are obtained from 'object' in order to continue the GA process.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_iter_ini">iter_ini</code></td>
<td>
<p>Iteration/generation of 'object@history' to be used when 'object' is provided. If 'iter_ini==NULL' uses the last iteration of 'object'.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_type_ini_pop">type_ini_pop</code></td>
<td>
<p>method to create the first population with 'parsimony_population' function. This function is called when iter_ini==0 and 'suggestions' are not provided. Methods='randomLHS','geneticLHS','improvedLHS','maximinLHS','optimumLHS','random'. First 5 methods correspond with several latine hypercube sampling.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_popsize">popSize</code></td>
<td>
<p>the population size.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_pcrossover">pcrossover</code></td>
<td>
<p>the probability of crossover between pairs of chromosomes. Typically this is a large value and by default is set to 0.8.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_maxiter">maxiter</code></td>
<td>
<p>the maximum number of iterations to run before the GA process is halted.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_feat_thres">feat_thres</code></td>
<td>
<p>proportion of selected features in the initial population. It is recommended a high percentage of selected features for the first generations. By default is set to 0.90.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_rerank_error">rerank_error</code></td>
<td>
<p>when a value is provided, a second reranking process according to the model complexities is called by <a href="#topic+parsimony_rerank">parsimony_rerank</a> function. Its primary objective is to select individuals with high validation cost while maintaining the robustness of a parsimonious model. This function switches the position of two models if the first one is more complex than the latter and no significant difference is found between their fitness values in terms of cost.  Therefore, if the absolute difference between the validation costs are lower than 'rerank_error' they are considered similar. Default value=0.01</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_iter_start_rerank">iter_start_rerank</code></td>
<td>
<p>iteration when ReRanking process is actived. Default=0. Sometimes is useful not to use ReRanking process in the first generations.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_pmutation">pmutation</code></td>
<td>
<p>the probability of mutation in a parent chromosome. Usually mutation occurs with a small probability. By default is set to 0.10.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_feat_mut_thres">feat_mut_thres</code></td>
<td>
<p>probability of the muted 'features-chromosome' to be one. Default value is set to 0.10.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_not_muted">not_muted</code></td>
<td>
<p>number of the best elitists that are not muted in each generation. Default value is set to 3.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_elitism">elitism</code></td>
<td>
<p>the number of best individuals to survive at each generation. By default the top 20% individuals will survive at each iteration.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_population">population</code></td>
<td>
<p>an R function for randomly generating an initial population. See <code><a href="#topic+parsimony_population">parsimony_population</a></code> for available functions.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_selection">selection</code></td>
<td>
<p>an R function performing selection, i.e. a function which generates a new population of individuals from the current population probabilistically according to individual fitness. See <code><a href="#topic+parsimony_nlrSelection">parsimony_nlrSelection</a></code> for available functions.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_crossover">crossover</code></td>
<td>
<p>an R function performing crossover, i.e. a function which forms offsprings by combining part of the genetic information from their parents. See <code><a href="#topic+parsimony_crossover">parsimony_crossover</a></code> for available functions.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_mutation">mutation</code></td>
<td>
<p>an R function performing mutation, i.e. a function which randomly alters the values of some genes in a parent chromosome. See <code><a href="#topic+parsimony_mutation">parsimony_mutation</a></code> for available functions.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_keep_history">keep_history</code></td>
<td>
<p>If it is TRUE keeps in the list <code>object@history</code> each generation. This parameter must set TRUE in order to use 'plot' method or 'parsimony_importance' function.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_path_name_to_save_iter">path_name_to_save_iter</code></td>
<td>
<p>If it is not NULL save the 'ga_parsimony' object to the 'path_name_to_save_iter' file at the end of each iteration. Note: use extension '.RData', example 'object.RData'</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_early_stop">early_stop</code></td>
<td>
<p>the number of consecutive generations without any improvement in the best fitness value before the GA is stopped.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_maxfitness">maxFitness</code></td>
<td>
<p>the upper bound on the fitness function after that the GA search is interrupted. Default value is set to +Inf</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_suggestions">suggestions</code></td>
<td>
<p>a matrix of solutions strings to be included in the initial population. If provided the number of columns must match (object@nParams+object@nFeatures). Can be used a previous population, for example: 'ga_parsimony@history[[2]]$population'. </p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_parallel">parallel</code></td>
<td>
<p>a logical argument specifying if parallel computing should be used (<code>TRUE</code>) or not (<code>FALSE</code>, default) for evaluating the fitness function. This argument could also be used to specify the number of cores to employ; by default, this is taken from <code><a href="parallel.html#topic+detectCores">detectCores</a></code>. Finally, the functionality of parallelization depends on system OS: on Windows only 'snow' type functionality is available, while on Unix/Linux/Mac OSX both 'snow' and 'multicore' (default) functionalities are available.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_monitor">monitor</code></td>
<td>
<p>a logical or an R function which takes as input the current state of the <code>ga_parsimony-class</code> object and show the evolution of the search. By default, for interactive sessions, the function <code><a href="#topic+parsimony_monitor">parsimony_monitor</a></code> depending on whether or not is an RStudio session, prints the average and best fitness values at each iteration. If set to <code>plot</code> these information are plotted on a graphical device. Other functions can be written by the user and supplied as argument. In non interactive sessions, by default <code>monitor = FALSE</code> so any output is suppressed.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_seed_ini">seed_ini</code></td>
<td>
<p>an integer value containing the random number generator state. This argument can be used to replicate the results of a GA search. Note that if parallel computing is required, the <span class="pkg">doRNG</span> package must be installed.</p>
</td></tr>
<tr><td><code id="ga_parsimony_+3A_verbose">verbose</code></td>
<td>
<p>if it is TRUE shows additional information for debugging.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><span class="pkg">GAparsimony</span> package is a new GA wrapper automatic procedure that efficiently generated prediction models with reduced complexity and adequate generalization capacity. 
<code>ga_parsimony</code> function is primarily based on combining feature selection and model parameter tuning with a second novel GA selection process (<code>parsimony_rerank</code> function), in order to achieve better overall parsimonious models. 
Unlike other GA methodologies that use a penalty parameter for combining loss and complexity measures into a unique fitness function, the main contribution of this package is that <code>ga_parsimony</code> selects the best models by considering cost and complexity separately. For this purpose, the ReRank algorithm rearranges individuals by their complexity when there is not a significant difference between their costs. Thus, less complex models with similar accuracy are promoted. Furthermore, because the penalty parameter is unnecessary, there is no consequent uncertainty associated with assigning a correct value beforehand. As a result, with GA-PARSIMONY, an automatic method for obtaining parsimonious models is finally made possible.
</p>


<h3>Value</h3>

<p>Returns an object of class <a href="#topic+ga_parsimony-class">ga_parsimony-class</a>. See <code><a href="#topic+ga_parsimony-class">ga_parsimony-class</a></code> for a description of available slots information.</p>


<h3>Author(s)</h3>

<p>Francisco Javier Martinez de Pison. <a href="mailto:fjmartin@unirioja.es">fjmartin@unirioja.es</a>. EDMANS Group. <a href="https://edmans.webs.com/">https://edmans.webs.com/</a></p>


<h3>References</h3>

<p>Urraca R., Sodupe-Ortega E., Antonanzas E., Antonanzas-Torres F., Martinez-de-Pison, F.J. (2017). Evaluation of a novel GA-based methodology for model structure selection: The GA-PARSIMONY. Neurocomputing, Online July 2017. https://doi.org/10.1016/j.neucom.2016.08.154
</p>
<p>Sanz-Garcia A., Fernandez-Ceniceros J., Antonanzas-Torres F., Pernia-Espinoza A.V., Martinez-de-Pison F.J. (2015).  GA-PARSIMONY: A GA-SVR approach with feature selection and parameter optimization to obtain parsimonious solutions for predicting temperature settings in a continuous annealing furnace. Applied Soft Computing 35, 23-38.
</p>
<p>Fernandez-Ceniceros J., Sanz-Garcia A., Antonanzas-Torres F., Martinez-de-Pison F.J. (2015). A numerical-informational approach for characterising the ductile behaviour of the T-stub component. Part 2: Parsimonious soft-computing-based metamodel. Engineering Structures 82, 249-260.
</p>
<p>Antonanzas-Torres F., Urraca R., Antonanzas J., Fernandez-Ceniceros J., Martinez-de-Pison F.J. (2015). Generation of daily global solar irradiation with support vector machines for regression. Energy Conversion and Management 96, 277-286.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ga_parsimony-class">ga_parsimony-class</a></code>,
<code><a href="#topic+summary.ga_parsimony">summary.ga_parsimony</a></code>, 
<code><a href="#topic+plot.ga_parsimony">plot.ga_parsimony</a></code>, 
</p>
<p><code><a href="#topic+parsimony_Population">parsimony_Population</a></code>,
<code><a href="#topic+parsimony_Selection">parsimony_Selection</a></code>,
<code><a href="#topic+parsimony_Crossover">parsimony_Crossover</a></code>,
<code><a href="#topic+parsimony_Mutation">parsimony_Mutation</a></code>,
</p>
<p><code><a href="#topic+parsimony_importance">parsimony_importance</a></code>,
<code><a href="#topic+parsimony_rerank">parsimony_rerank</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
#################################
### Example 1: Classification ###
#################################

# This a toy example that shows how to search, for the *iris* database, 
# a parsimony classification NNET model with 'GAparsimony' 
# and 'caret' packages. Validation errors and iterations have been
# reduced to speedup the process

library(GAparsimony)
# Training and testing Datasets
library(caret)

data(iris)
# Z-score of input features
iris_esc &lt;- data.frame(scale(iris[,1:4]),Species=iris[,5])

# Define an 70
set.seed(1234)
inTraining &lt;- createDataPartition(iris_esc$Species, p=.70, list=FALSE)
data_train &lt;- iris_esc[ inTraining,]
data_test  &lt;- iris_esc[-inTraining,]

# Function to evaluate each SVM individual
# ----------------------------------------
fitness_SVM &lt;- function(chromosome, ...)
{
	# First two values in chromosome are 'C' &amp; 'sigma' of 'svmRadial' method
	tuneGrid &lt;- data.frame(C=chromosome[1],sigma=chromosome[2])

	# Next values of chromosome are the selected features (TRUE if &gt; 0.50)
	selec_feat &lt;- chromosome[3:length(chromosome)]&gt;0.50

	# Return -Inf if there is not selected features
	if (sum(selec_feat)&lt;1) return(c(kappa_val=-Inf,kappa_test=-Inf,complexity=Inf))

	# Extract features from the original DB plus response (last column)
	data_train_model &lt;- data_train[,c(selec_feat,TRUE)]
	data_test_model &lt;- data_test[,c(selec_feat,TRUE)]

	# Validate each individual with only a 2-CV
	# Yo obtain a robust validation measure
	# use 'repeatedcv' with more folds and times
	# (see 2nd and 3rd examples...)
	train_control &lt;- trainControl(method = "cv",number = 5)

	# train the model
	set.seed(1234)
	model &lt;- train(Species ~ ., data=data_train_model, 
					trControl=train_control, 
					method="svmRadial", metric="Kappa", 
					tuneGrid=tuneGrid, verbose=FALSE)
				   
	# Extract validation and test accuracy
	accuracy_val &lt;- model$results$Accuracy
	accuracy_test &lt;- postResample(pred=predict(model, data_test_model),
						obs=data_test_model[,ncol(data_test_model)])[2]
	
	# Obtain Complexity = Num_Features*1E6+Number of support vectors
	complexity &lt;- sum(selec_feat)*1E6+model$finalModel@nSV 

	# Return(validation accuracy, testing accuracy, model_complexity)
	vect_errors &lt;- c(accuracy_val=accuracy_val,
					accuracy_test=accuracy_test,complexity=complexity)
	return(vect_errors)
}


# ---------------------------------------------------------------------------------
# Search the best parsimonious model with GA-PARSIMONY by using Feature Selection,
# Parameter Tuning and Parsimonious Model Selection
# ---------------------------------------------------------------------------------
library(GAparsimony)

# Ranges of size and decay
min_param &lt;- c(0.0001, 0.00001)
max_param &lt;- c(0.9999, 0.99999)
names_param &lt;- c("C","sigma")
  
# ga_parsimony can be executed with a different set of 'rerank_error' values
rerank_error &lt;- 0.001


	
GAparsimony_model &lt;- ga_parsimony(fitness=fitness_SVM,
                                  min_param=min_param, 
                                  max_param=max_param,
                                  names_param=names_param,
                                  nFeatures=ncol(data_train)-1,
                                  names_features=colnames(data_train)[-ncol(data_train)],
                                  keep_history = TRUE, 
                                  rerank_error = rerank_error,
                                  popSize = 20,
                                  maxiter = 20,
                                  early_stop=7,
                                  feat_thres=0.90,# Perc selec features in first iter
                                  feat_mut_thres=0.10,# Prob. feature to be 1 in mutation
                                  not_muted=1,
                                  parallel = FALSE, # speedup with 'n' cores or all with TRUE
                                  seed_ini = 1234)


print(paste0("Best Parsimonious SVM with C=",
		   GAparsimony_model@bestsolution['C'],
		   " sigma=",
		   GAparsimony_model@bestsolution['sigma'],
		   " -&gt; ",
		   " AccuracyVal=",
		   round(GAparsimony_model@bestsolution['fitnessVal'],6),
		   " AccuracyTest=",
		   round(GAparsimony_model@bestsolution['fitnessTst'],6),
		   " Num Features=",
		   round(GAparsimony_model@bestsolution['complexity']/1E6,0),
		   " Complexity=",
		   round(GAparsimony_model@bestsolution['complexity'],2)))
  
print(summary(GAparsimony_model))
  
print(parsimony_importance(GAparsimony_model))


  
  #################################
  ### Example 2: Classification ###
  #################################
  
  #This example shows how to search, for the *Sonar* database, 
  #a parsimony classification SVM model with 'GAparsimony' and 'caret' packages.
  
  # Training and testing Datasets
  library(caret)
  library(GAparsimony)
  library(mlbench)
  data(Sonar)
  
  set.seed(1234)
  inTraining &lt;- createDataPartition(Sonar$Class, p=.80, list=FALSE)
  data_train &lt;- Sonar[ inTraining,]
  data_test  &lt;- Sonar[-inTraining,]
  
  # Function to evaluate each SVM individual
  # ----------------------------------------
  fitness_SVM &lt;- function(chromosome, ...)
  {
    # First two values in chromosome are 'C' &amp; 'sigma' of 'svmRadial' method
    tuneGrid &lt;- data.frame(C=chromosome[1],sigma=chromosome[2])
    
    # Next values of chromosome are the selected features (TRUE if &gt; 0.50)
    selec_feat &lt;- chromosome[3:length(chromosome)]&gt;0.50
    
    # Return -Inf if there is not selected features
    if (sum(selec_feat)&lt;1) return(c(kappa_val=-Inf,kappa_test=-Inf,complexity=Inf))
    
    # Extract features from the original DB plus response (last column)
    data_train_model &lt;- data_train[,c(selec_feat,TRUE)]
    data_test_model &lt;- data_test[,c(selec_feat,TRUE)]
    
    # How to validate each individual
    # 'repeats' could be increased to obtain a more robust validation metric. Also,
    # 'number' of folds could be adjusted to improve the measure.
    train_control &lt;- trainControl(method = "repeatedcv",number = 10,repeats = 10)
    
    # train the model
    set.seed(1234)
    model &lt;- train(Class ~ ., data=data_train_model, trControl=train_control, 
                   method="svmRadial", metric="Kappa", 
				   tuneGrid=tuneGrid, verbose=FALSE)
    
    # Extract kappa statistics (repeated k-fold CV and testing kappa)
    kappa_val &lt;- model$results$Kappa
    kappa_test &lt;- postResample(pred=predict(model, data_test_model),
                    obs=data_test_model[,ncol(data_test_model)])[2]
    # Obtain Complexity = Num_Features*1E6+Number of support vectors
    complexity &lt;- sum(selec_feat)*1E6+model$finalModel@nSV 
    
    # Return(validation error, testing error, model_complexity)
    vect_errors &lt;- c(kappa_val=kappa_val,kappa_test=kappa_test,complexity=complexity)
    return(vect_errors)
  }
  
  # ---------------------------------------------------------------------------------
  # Search the best parsimonious model with GA-PARSIMONY by using Feature Selection,
  # Parameter Tuning and Parsimonious Model Selection
  # ---------------------------------------------------------------------------------
  library(GAparsimony)
  
  # Ranges of size and decay
  min_param &lt;- c(00.0001, 0.00001)
  max_param &lt;- c(99.9999, 0.99999)
  names_param &lt;- c("C","sigma")
  
  # ga_parsimony can be executed with a different set of 'rerank_error' values
  rerank_error &lt;- 0.001
  
  
  # 40 individuals per population, 100 max generations with an early stopping 
  # of 10 generations (CAUTION! 7.34 minutes with 8 cores)!!!!!
  GAparsimony_model &lt;- ga_parsimony(fitness=fitness_SVM,
                                    min_param=min_param, 
                                    max_param=max_param,
                                    names_param=names_param,
                                    nFeatures=ncol(data_train)-1,
                                    names_features=colnames(data_train)[-ncol(data_train)],
                                    keep_history = TRUE, 
                                    rerank_error = rerank_error,
                                    popSize = 40, 
                                    maxiter = 100, 
                                    early_stop=10,
                                    feat_thres=0.90,# Perc selec features in first iter
                                    feat_mut_thres=0.10,# Prob. feature to be 1 in mutation
                                    parallel = TRUE, seed_ini = 1234)
  
  print(paste0("Best Parsimonious SVM with C=",
               GAparsimony_model@bestsolution['C'],
               " sigma=",
               GAparsimony_model@bestsolution['sigma'],
               " -&gt; ",
               " KappaVal=",
               round(GAparsimony_model@bestsolution['fitnessVal'],6),
               " KappaTst=",
               round(GAparsimony_model@bestsolution['fitnessTst'],6),
               " Num Features=",
               round(GAparsimony_model@bestsolution['complexity']/1E6,0),
               " Complexity=",
               round(GAparsimony_model@bestsolution['complexity'],2)))
  
  print(summary(GAparsimony_model))
  
  # Plot GA evolution ('keep_history' must be TRUE)
  elitists &lt;- plot(GAparsimony_model)
  
  # Percentage of appearance of each feature in elitists
  print(parsimony_importance(GAparsimony_model))
  
  
  
  
  #############################
  ### Example 3: Regression ###
  #############################
  
  # This example shows how to search, for the *Boston* database, a parsimony regressor ANN 
  # model with 'GAparsimony' and 'caret' packages.
  
  # Load Boston database and scale it
  library(MASS)
  data(Boston)
  Boston_scaled &lt;- data.frame(scale(Boston))
  
  # Define an 80
  set.seed(1234)
  trainIndex &lt;- createDataPartition(Boston[,"medv"], p=0.80, list=FALSE)
  data_train &lt;- Boston_scaled[trainIndex,]
  data_test &lt;- Boston_scaled[-trainIndex,]
  # Restore 'Response' to original values
  data_train[,ncol(data_train)] &lt;- Boston$medv[trainIndex]
  data_test[,ncol(data_test)] &lt;- Boston$medv[-trainIndex]
  print(dim(data_train))
  print(dim(data_test))
  
  
  # Function to evaluate each ANN individual
  # ----------------------------------------
  fitness_NNET &lt;- function(chromosome, ...)
  {
    # First two values in chromosome are 'size' &amp; 'decay' of 'nnet' method
    tuneGrid &lt;- data.frame(size=round(chromosome[1]),decay=chromosome[2])
    
    # Next values of chromosome are the selected features (TRUE if &gt; 0.50)
    selec_feat &lt;- chromosome[3:length(chromosome)]&gt;0.50
    if (sum(selec_feat)&lt;1) return(c(rmse_val=-Inf,rmse_test=-Inf,complexity=Inf))
    
    # Extract features from the original DB plus response (last column)
    data_train_model &lt;- data_train[,c(selec_feat,TRUE)]
    data_test_model &lt;- data_test[,c(selec_feat,TRUE)]
    
    # How to validate each individual
    # 'repeats' could be increased to obtain a more robust validation metric. Also,
    # 'number' of folds could be adjusted to improve the measure.
    train_control &lt;- trainControl(method = "repeatedcv",number = 10,repeats = 5)
    
    # train the model
    set.seed(1234)
    model &lt;- train(medv ~ ., data=data_train_model, trControl=train_control, 
                   method="nnet", tuneGrid=tuneGrid, trace=FALSE, linout = 1)
    
    # Extract errors
    rmse_val &lt;- model$results$RMSE
    rmse_test &lt;- sqrt(mean((unlist(predict(model, newdata = data_test_model)) - 
                              data_test_model$medv)^2))
    # Obtain Complexity = Num_Features*1E6+sum(neural_weights^2)
    complexity &lt;- sum(selec_feat)*1E6+sum(model$finalModel$wts*model$finalModel$wts)  
    
    # Return(-validation error, -testing error, model_complexity)
    # errors are negative because GA-PARSIMONY tries to maximize values
    vect_errors &lt;- c(rmse_val=-rmse_val,rmse_test=-rmse_test,complexity=complexity)
    return(vect_errors)
  }
  
  # ---------------------------------------------------------------------------------
  # Search the best parsimonious model with GA-PARSIMONY by using Feature Selection,
  # Parameter Tuning and Parsimonious Model Selection
  # ---------------------------------------------------------------------------------
  library(GAparsimony)
  
  # Ranges of size and decay
  min_param &lt;- c(1, 0.0001)
  max_param &lt;- c(25 , 0.9999)
  names_param &lt;- c("size","decay")
  
  # ga_parsimony can be executed with a different set of 'rerank_error' values
  rerank_error &lt;- 0.01  
  
  # 40 individuals per population, 100 max generations with an early stopping 
  # of 10 generations (CAUTION! 33.89 minutes with 8 cores)!!!!!
  GAparsimony_model &lt;- ga_parsimony(fitness=fitness_NNET,
                                    min_param=min_param, 
                                    max_param=max_param,
                                    names_param=names_param,
                                    nFeatures=ncol(data_train)-1,
                                    names_features=colnames(data_train)[-ncol(data_train)],
                                    keep_history = TRUE, 
                                    rerank_error = rerank_error,
                                    popSize = 40,
                                    maxiter = 100, # Change to 100
                                    early_stop=10,
                                    feat_thres=0.90,# Perc selec features in first iter
                                    feat_mut_thres=0.10,# Prob. feature to be 1 in mutation
                                    not_muted=2,
                                    parallel = TRUE, seed_ini = 1234)
  
  print(paste0("Best Parsimonious ANN with ",
               round(GAparsimony_model@bestsolution['size']),
               " hidden neurons and decay=",
               GAparsimony_model@bestsolution['decay'],
               " -&gt; ",
               " RMSEVal=",
               round(-GAparsimony_model@bestsolution['fitnessVal'],6),
               " RMSETst=",
               round(-GAparsimony_model@bestsolution['fitnessTst'],6)))
  print(summary(GAparsimony_model))
  
  # Plot GA evolution ('keep_history' must be TRUE)
  elitists &lt;- plot(GAparsimony_model)
  
  # Percentage of appearance of each feature in elitists
  print(parsimony_importance(GAparsimony_model))

## End(Not run)
		 
</code></pre>

<hr>
<h2 id='ga_parsimony-class'>Class &quot;ga_parsimony&quot;</h2><span id='topic+ga_parsimony-class'></span>

<h3>Description</h3>

<p>An S4 class for searching parsimonious models by feature selection and parameter tuning with genetic algorithms.</p>


<h3>Objects from the Class</h3>

<p>Objects can be created by calls to the <code><a href="#topic+ga_parsimony">ga_parsimony</a></code> function.
</p>


<h3>Slots</h3>


<dl>
<dt><code>call</code></dt><dd><p>an object of class <code>"call"</code> representing the matched call;</p>
</dd>
<dt><code>min_param</code></dt><dd><p>a vector of length equal to the model parameters providing the minimum of the search space;</p>
</dd>
<dt><code>max_param</code></dt><dd><p>a vector of length equal to the model parameters providing the maximum of the search space;</p>
</dd>
<dt><code>nParams</code></dt><dd><p>a value specifying the number of model parameter to be tuned;</p>
</dd>
<dt><code>feat_thres</code></dt><dd><p>proportion of selected features in the initial population. It is recommended a high percentage of selected features for the first generations;</p>
</dd>
<dt><code>feat_mut_thres</code></dt><dd><p>threshold to consider a random number between 0 and 1 is considered one if a value of the parameters-chromosome is muted. Default value is set to 0.5;</p>
</dd>
<dt><code>not_muted</code></dt><dd><p>number of the best elitists that are not muted. Default value is set to 3;</p>
</dd>
<dt><code>rerank_error</code></dt><dd><p>when a value distinct to zero is provided a second reranking process according to the model complexities is called by 'parsimonyReRank' function. Its primary objective is to select individuals with high validation cost while maintaining the robustness of a parsimonious model. This function switches the position of two models if the first one is more complex than the latter and no significant difference is found between their fitness values in terms of cost.  Therefore, if the absolute difference between the validation costs are lower than 'rerank_error' they are considered similar. Default value=0.01;</p>
</dd>
<dt><code>nFeatures</code></dt><dd><p>a value specifying the number of maximum input features;</p>
</dd>
<dt><code>names_param</code></dt><dd><p>a vector with the name of the model parameters;</p>
</dd>
<dt><code>names_features</code></dt><dd><p>a vector with the name of the input features;</p>
</dd>
<dt><code>popSize</code></dt><dd><p>the population size;</p>
</dd>
<dt><code>iter</code></dt><dd><p>the actual (or final) iteration of GA search;</p>
</dd>
<dt><code>iter_start_rerank</code></dt><dd><p>iteration when ReRanking process is actived. Default=0. Sometimes is useful not to use ReRanking process in the first generations;</p>
</dd>
<dt><code>early_stop</code></dt><dd><p>the number of consecutive generations without any improvement in the best fitness value before the GA is stopped;</p>
</dd>
<dt><code>maxiter</code></dt><dd><p>the maximum number of iterations to run before the GA search is halted;</p>
</dd>
<dt><code>minutes_gen</code></dt><dd><p>elapsed time of this generation (in minutes);</p>
</dd>
<dt><code>minutes_total</code></dt><dd><p>total elapsed time (in minutes);</p>
</dd>
<dt><code>suggestions</code></dt><dd><p>a matrix of user provided solutions and included in the initial population;</p>
</dd>
<dt><code>population</code></dt><dd><p>the current (or final) population;</p>
</dd>
<dt><code>elitism</code></dt><dd><p>the number of best fitness individuals to survive at each generation;</p>
</dd>
<dt><code>pcrossover</code></dt><dd><p>the crossover probability;</p>
</dd>
<dt><code>pmutation</code></dt><dd><p>the mutation probability;</p>
</dd>
<dt><code>best_score</code></dt><dd><p>the best validation score in the whole GA process;</p>
</dd>
<dt><code>solution_best_score</code></dt><dd><p>Solution with the best validation score in the whole GA process;</p>
</dd>
<dt><code>fitnessval</code></dt><dd><p>the values of validation cost for the current (or final) population;</p>
</dd>
<dt><code>fitnesstst</code></dt><dd><p>the values of testing cost for the current (or final) population;</p>
</dd>
<dt><code>complexity</code></dt><dd><p>the values of model complexities for the current (or final) population;</p>
</dd>
<dt><code>summary</code></dt><dd><p>a matrix of summary statistics for fitness values at each iteration (along the rows);</p>
</dd>
<dt><code>bestSolList</code></dt><dd><p>a list with the best solution of all iterations;</p>
</dd>
<dt><code>bestfitnessVal</code></dt><dd><p>the validation cost of the best solution at the last iteration;</p>
</dd>
<dt><code>bestfitnessTst</code></dt><dd><p>the testing cost of the best solution at the last iteration;</p>
</dd>
<dt><code>bestcomplexity</code></dt><dd><p>the model complexity of the best solution at the last iteration;</p>
</dd>
<dt><code>bestsolution</code></dt><dd><p>the best solution at the last iteration;</p>
</dd>
<dt><code>history</code></dt><dd><p>a list with the population of all iterations;</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Francisco Javier Martinez-de-Pison. <a href="mailto:fjmartin@unirioja.es">fjmartin@unirioja.es</a>. EDMANS Group. http://www.mineriadatos.com</p>


<h3>See Also</h3>

<p>For examples of usage see <code><a href="#topic+ga_parsimony">ga_parsimony</a></code>.</p>

<hr>
<h2 id='GA-internal'>Internal GA functions</h2><span id='topic+.printShortMatrix'></span><span id='topic+clearConsoleLine'></span><span id='topic+is.RStudio'></span><span id='topic+startParallel'></span><span id='topic+stopParallel'></span><span id='topic+parsimony_summary'></span><span id='topic+parsimony_control'></span>

<h3>Description</h3>

<p>Internal functions not intended to be called directly by users.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.printShortMatrix(x, head = 2, tail = 1, chead = 5, ctail = 1, ...)
clearConsoleLine()
is.RStudio()
startParallel(parallel = TRUE, ...)
parsimony_summary(object, ...)
parsimony_control(...)
</code></pre>

<hr>
<h2 id='matrixNULL-class'>Virtual Class &quot;matrixNULL&quot; - Simple Class for matrix or NULL</h2><span id='topic+matrixNULL-class'></span>

<h3>Description</h3>

<p>The class <code>"matrixNULL"</code> is a simple class union 
(<code><a href="methods.html#topic+setClassUnion">setClassUnion</a></code>) of <code>"matrix"</code> and <code>"NULL"</code>.
</p>


<h3>Objects from the Class</h3>

<p>Since it is a virtual Class, no objects
may be created from it.</p>


<h3>Examples</h3>

<pre><code class='language-R'>showClass("matrixNULL")
</code></pre>

<hr>
<h2 id='numericOrNA-class'>Virtual Class &quot;numericOrNA&quot; - Simple Class for subassignment Values</h2><span id='topic+numericOrNA-class'></span>

<h3>Description</h3>

<p>The class <code>"numericOrNA"</code> is a simple class union 
(<code><a href="methods.html#topic+setClassUnion">setClassUnion</a></code>) of <code>"numeric"</code> and <code>"logical"</code>.
</p>


<h3>Objects from the Class</h3>

<p>Since it is a virtual Class, no objects
may be created from it.</p>


<h3>Examples</h3>

<pre><code class='language-R'>showClass("numericOrNA")
</code></pre>

<hr>
<h2 id='parsimony_crossover'>Crossover operators in GA-PARSIMONY</h2><span id='topic+parsimony_Crossover'></span><span id='topic+parsimony_crossover'></span>

<h3>Description</h3>

<p>Functions implementing particular crossover genetic operator for GA-PARSIMONY. Method uses for model parameters Heuristic Blending and random swapping for binary selected features.</p>


<h3>Usage</h3>

<pre><code class='language-R'>parsimony_crossover(object, parents, alpha=0.1, perc_to_swap=0.5, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parsimony_crossover_+3A_object">object</code></td>
<td>
<p>An object of class <code>"ga_parsimony"</code>, usually resulting from a call to function <code><a href="#topic+ga_parsimony">ga_parsimony</a></code>.</p>
</td></tr>
<tr><td><code id="parsimony_crossover_+3A_parents">parents</code></td>
<td>
<p>A two-rows matrix of values indexing the parents from the current population.</p>
</td></tr>
<tr><td><code id="parsimony_crossover_+3A_alpha">alpha</code></td>
<td>
<p>A tuning parameter for the Heuristic Blending outer bounds [Michalewicz, 1991]. Typical and default value is 0.1.</p>
</td></tr>
<tr><td><code id="parsimony_crossover_+3A_perc_to_swap">perc_to_swap</code></td>
<td>
<p>Percentage of features for swapping in the crossovering process.</p>
</td></tr>
<tr><td><code id="parsimony_crossover_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return a list with two elements:
</p>
<table>
<tr><td><code>children</code></td>
<td>
<p>Matrix of dimension 2 times the number of decision variables containing the generated offsprings;</p>
</td></tr>
<tr><td><code>fitnessval</code></td>
<td>
<p>Vector of length 2 containing the fitness validation values for the offsprings. A value <code>NA</code> is returned if an offspring is different (which is usually the case) from the two parents.</p>
</td></tr>
<tr><td><code>fitnesstst</code></td>
<td>
<p>Vector of length 2 containing the fitness with the test database (if it was supplied), for the offsprings. A value <code>NA</code> is returned if an offspring is different (which is usually the case) from the two parents.</p>
</td></tr>
<tr><td><code>complexity</code></td>
<td>
<p>Vector of length 2 containing the model complexity for the offsprings. A value <code>NA</code> is returned if an offspring is different (which is usually the case) from the two parents.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Francisco Javier Martinez de Pison. <a href="mailto:fjmartin@unirioja.es">fjmartin@unirioja.es</a>. EDMANS Group. <a href="https://edmans.webs.com/">https://edmans.webs.com/</a></p>


<h3>See Also</h3>

<p><code><a href="#topic+ga_parsimony">ga_parsimony</a></code></p>

<hr>
<h2 id='parsimony_importance'>Percentage of appearance of each feature in elitist population</h2><span id='topic+parsimony_importance'></span>

<h3>Description</h3>

<p>Shows the percentage of appearance of each feature in the whole GA-PARSIMONY process but only for the elitist-population.</p>


<h3>Usage</h3>

<pre><code class='language-R'>parsimony_importance(object, verbose=FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parsimony_importance_+3A_object">object</code></td>
<td>
<p>An object of class <code>"ga_parsimony"</code> resulting from a call to function <code><a href="#topic+ga_parsimony">ga_parsimony</a></code> with <code>keep_history</code> parameter set to TRUE.</p>
</td></tr>
<tr><td><code id="parsimony_importance_+3A_verbose">verbose</code></td>
<td>
<p>If it is TRUE shows additional information.</p>
</td></tr>
<tr><td><code id="parsimony_importance_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>parsimony_importance</code> extracts elistist population from all generations. Obtains the percentage of appearance of each feature in the all GA process. Return the features higher-ordered.
</p>


<h3>Value</h3>

<p>Return a vector with the higher-ordered percentage of appearance of each feature in the elitist-population and in the whole GA process.</p>


<h3>Author(s)</h3>

<p>Francisco Javier Martinez de Pison. <a href="mailto:fjmartin@unirioja.es">fjmartin@unirioja.es</a>. EDMANS Group. <a href="https://edmans.webs.com/">https://edmans.webs.com/</a></p>


<h3>See Also</h3>

<p><code><a href="#topic+ga_parsimony">ga_parsimony</a></code></p>

<hr>
<h2 id='parsimony_monitor'>Functions for monitoring GA-PARSIMONY algorithm evolution</h2><span id='topic+parsimony_monitor'></span>

<h3>Description</h3>

<p>Functions to print summary statistics of fitness values at each iteration of a GA search.</p>


<h3>Usage</h3>

<pre><code class='language-R'>parsimony_monitor(object, digits = getOption("digits"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parsimony_monitor_+3A_object">object</code></td>
<td>
<p>An object of class <code>"ga_parsimony"</code>, usually resulting from a call to function <code><a href="#topic+ga_parsimony">ga_parsimony</a></code>.</p>
</td></tr>
<tr><td><code id="parsimony_monitor_+3A_digits">digits</code></td>
<td>
<p>minimal number of significant digits.</p>
</td></tr>
<tr><td><code id="parsimony_monitor_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>These functions print a summary of current GA-PARSIMONY step on the console.<br />
</p>


<h3>Author(s)</h3>

<p>Francisco Javier Martinez de Pison. <a href="mailto:fjmartin@unirioja.es">fjmartin@unirioja.es</a>. EDMANS Group. <a href="https://edmans.webs.com/">https://edmans.webs.com/</a></p>

<hr>
<h2 id='parsimony_Mutation'>Mutation operators in GA-PARSIMONY</h2><span id='topic+parsimony_Mutation'></span><span id='topic+parsimony_mutation'></span>

<h3>Description</h3>

<p>Functions implementing mutation genetic operator for GA-PARSIMONY. Method mutes a <code>object@pmutation</code> percentage of them. If the value corresponds to a model parameter, algorithm uses uniform random mutation. For binary select features, method sets to one if the random value between [0,1] is lower or equal to <code>object@feat_mut_thres</code>.</p>


<h3>Usage</h3>

<pre><code class='language-R'>parsimony_mutation(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parsimony_Mutation_+3A_object">object</code></td>
<td>
<p>An object of class <code>"ga_parsimony"</code>, usually resulting from a call to function <code><a href="#topic+ga_parsimony">ga_parsimony</a></code>.</p>
</td></tr>
<tr><td><code id="parsimony_Mutation_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return <code>object</code> with the population muted.</p>


<h3>Author(s)</h3>

<p>Francisco Javier Martinez de Pison. <a href="mailto:fjmartin@unirioja.es">fjmartin@unirioja.es</a>. EDMANS Group. <a href="https://edmans.webs.com/">https://edmans.webs.com/</a></p>


<h3>See Also</h3>

<p><code><a href="#topic+ga_parsimony">ga_parsimony</a></code></p>

<hr>
<h2 id='parsimony_Population'>Population initialization in GA-PARSIMONY with a combined chromosome of model parameters and selected features</h2><span id='topic+parsimony_Population'></span><span id='topic+parsimony_population'></span>

<h3>Description</h3>

<p>Functions for creating an initial population to be used in the GA-PARSIMONY process.</p>


<h3>Usage</h3>

<pre><code class='language-R'>parsimony_population(object, type_ini_pop="randomLHS", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parsimony_Population_+3A_object">object</code></td>
<td>
<p>An object of class <code>"ga_parsimony"</code>, usually resulting from a call to function <code><a href="#topic+ga_parsimony">ga_parsimony</a></code>.</p>
</td></tr>
<tr><td><code id="parsimony_Population_+3A_type_ini_pop">type_ini_pop</code></td>
<td>
<p>How to create the initial population. 'random' optiom initialize a random population between the predefined ranges. Values 'randomLHS', 'geneticLHS', 'improvedLHS', 'maximinLHS' &amp; 'optimumLHS' corresponds with several methods of the Latin Hypercube Sampling (see 'lhs' package for more details).</p>
</td></tr>
<tr><td><code id="parsimony_Population_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>parsimony_population</code> generates a random population of <code>object@popSize</code> individuals. For each individual a random chromosome is generated with <code>object@nParams</code> real values in the range [<code>object@min_param</code>, <code>object@max_param</code>] plus <code>object@nFeatures</code> random binary values for feature selection.
'random' or Latin Hypercube Sampling can be used to create a efficient spread initial population.
</p>


<h3>Value</h3>

<p>Return a matrix of dimension <code>object@popSize</code> rows and <code>object@nParams</code>+<code>object@nFeatures</code> columns.</p>


<h3>Author(s)</h3>

<p>Francisco Javier Martinez de Pison. <a href="mailto:fjmartin@unirioja.es">fjmartin@unirioja.es</a>. EDMANS Group. <a href="https://edmans.webs.com/">https://edmans.webs.com/</a></p>


<h3>See Also</h3>

<p><code><a href="#topic+ga_parsimony">ga_parsimony</a></code></p>

<hr>
<h2 id='parsimony_rerank'>Function for reranking by complexity in parsimonious model selection process</h2><span id='topic+parsimony_rerank'></span>

<h3>Description</h3>

<p>Promotes models with similar fitness but lower complexity to top positions.</p>


<h3>Usage</h3>

<pre><code class='language-R'>parsimony_rerank(object, verbose=FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parsimony_rerank_+3A_object">object</code></td>
<td>
<p>An object of class <code>"ga_parsimony"</code> resulting from a call to function <code><a href="#topic+ga_parsimony">ga_parsimony</a></code> with <code>keep_history</code> parameter set to TRUE.</p>
</td></tr>
<tr><td><code id="parsimony_rerank_+3A_verbose">verbose</code></td>
<td>
<p>If it is TRUE shows additional information.</p>
</td></tr>
<tr><td><code id="parsimony_rerank_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This method corresponds with the second step of parsimonious model selection (PMS) procedure. PMS works in the following way: in each GA generation, best solutions are first sorted by their cost, J. 
Then, in a second step, individuals with less complexity are moved to the top positions when the absolute difference of their J is lower than a <code>object@rerank_error</code> threshold value. 
Therefore, the selection of less complex solutions among those with similar accuracy promotes the evolution of robust solutions with better generalization capabilities.
</p>


<h3>Value</h3>

<p>Return a vector with the new position of the individuals.</p>


<h3>Author(s)</h3>

<p>Francisco Javier Martinez de Pison. <a href="mailto:fjmartin@unirioja.es">fjmartin@unirioja.es</a>. EDMANS Group. <a href="https://edmans.webs.com/">https://edmans.webs.com/</a></p>


<h3>See Also</h3>

<p><code><a href="#topic+ga_parsimony">ga_parsimony</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>library(GAparsimony)
object &lt;- new("ga_parsimony", 
              rerank_error=0.2,
              best_score = 2.0,
              popSize = 4, 
              fitnessval = c(2.0, 1.9, 1.1, 1.0), 
              complexity=c(2,1,2,1))

pop_ini &lt;- data.frame(fitnessval=object@fitnessval, 
                      complexity=object@complexity)
print("INITIAL POPULATION:")
print(pop_ini)

print("POPULATION ORDERED BY COMPLEXITY")
print(paste0("WHEN abs(diff(fitnessval)) &lt; ",
             object@rerank_error,":"))
pop_ini[parsimony_rerank(object),]
</code></pre>

<hr>
<h2 id='parsimony_Selection'>Selection operators in GA-PARSIMONY</h2><span id='topic+parsimony_Selection'></span><span id='topic+parsimony_lrSelection'></span><span id='topic+parsimony_nlrSelection'></span>

<h3>Description</h3>

<p>Functions implementing selection genetic operator in GA-PARSIMONY after <a href="#topic+parsimony_rerank">parsimony_rerank</a> process. Linear-rank or Nonlinear-rank selection (Michalewicz (1996)).</p>


<h3>Usage</h3>

<pre><code class='language-R'>parsimony_lrSelection(object, r = 2/(object@popSize*(object@popSize-1)), 
						q = 2/object@popSize, ...)
parsimony_nlrSelection(object, q = 0.25, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parsimony_Selection_+3A_object">object</code></td>
<td>
<p>An object of class <code>"ga_parsimony"</code>, usually resulting from a call to function <code><a href="#topic+ga_parsimony">ga_parsimony</a></code>.</p>
</td></tr>
<tr><td><code id="parsimony_Selection_+3A_r">r</code></td>
<td>
<p>A tuning parameter for the specific selection operator.</p>
</td></tr>
<tr><td><code id="parsimony_Selection_+3A_q">q</code></td>
<td>
<p>A tuning parameter for the specific selection operator.</p>
</td></tr>
<tr><td><code id="parsimony_Selection_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return a list with four elements:
</p>
<table>
<tr><td><code>population</code></td>
<td>
<p>a matrix of dimension <code>object@popSize</code> times the number of decision variables containing the selected individuals or strings;</p>
</td></tr>
<tr><td><code>fitnessval</code></td>
<td>
<p>a vector of length <code>object@popSize</code> containing the fitness validation values for the selected individuals;</p>
</td></tr>
<tr><td><code>fitnesstst</code></td>
<td>
<p>a vector of length <code>object@popSize</code> containing the fitness with the test database (if it was supplied), for the selected individuals;</p>
</td></tr>
<tr><td><code>complexity</code></td>
<td>
<p>a vector of length <code>object@popSize</code> containing the model complexity for the selected individuals.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Francisco Javier Martinez de Pison. <a href="mailto:fjmartin@unirioja.es">fjmartin@unirioja.es</a>. EDMANS Group. <a href="https://edmans.webs.com/">https://edmans.webs.com/</a></p>


<h3>See Also</h3>

<p><code><a href="#topic+ga_parsimony">ga_parsimony</a></code></p>

<hr>
<h2 id='plot.ga_parsimony-method'>Plot of GA evolution of elitists</h2><span id='topic+plot+2Cga_parsimony-method'></span><span id='topic+plot.ga_parsimony'></span>

<h3>Description</h3>

<p>The <code>plot</code> method for <code><a href="#topic+ga_parsimony-class">ga_parsimony-class</a></code> objects gives a evolution plot of the 
validation and testing errors, and the number of model features selected of elitists.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'ga_parsimony'
plot(x, general_cex = 0.7, min_ylim=NULL, max_ylim=NULL, 
			min_iter=NULL, max_iter=NULL, 
			main_label="Boxplot cost evolution", 
			iter_auto_ylim=3, steps=5, pos_cost_num=-3.1,
			pos_feat_num=-1.7, digits_plot=4, width_plot=12,
			height_plot=6, window=TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.ga_parsimony-method_+3A_x">x</code></td>
<td>
<p>An object of class <code>"ga_parsimony"</code>.</p>
</td></tr>
<tr><td><code id="plot.ga_parsimony-method_+3A_general_cex">general_cex</code></td>
<td>
<p>Main text scale.</p>
</td></tr>
<tr><td><code id="plot.ga_parsimony-method_+3A_min_ylim">min_ylim</code></td>
<td>
<p>Min limit on the y-axis.</p>
</td></tr>
<tr><td><code id="plot.ga_parsimony-method_+3A_max_ylim">max_ylim</code></td>
<td>
<p>Max limit on the y-axis.</p>
</td></tr>
<tr><td><code id="plot.ga_parsimony-method_+3A_min_iter">min_iter</code></td>
<td>
<p>Min GA iteration to visualize.</p>
</td></tr>
<tr><td><code id="plot.ga_parsimony-method_+3A_max_iter">max_iter</code></td>
<td>
<p>Max GA iteration to visualize.</p>
</td></tr>
<tr><td><code id="plot.ga_parsimony-method_+3A_main_label">main_label</code></td>
<td>
<p>Main plot title.</p>
</td></tr>
<tr><td><code id="plot.ga_parsimony-method_+3A_iter_auto_ylim">iter_auto_ylim</code></td>
<td>
<p>If it is not NULL, GA iteration to choose the min limit of y-axis.</p>
</td></tr>
<tr><td><code id="plot.ga_parsimony-method_+3A_steps">steps</code></td>
<td>
<p>Number of divisions in y-axis.</p>
</td></tr>
<tr><td><code id="plot.ga_parsimony-method_+3A_pos_cost_num">pos_cost_num</code></td>
<td>
<p>Relative position of numbers in cost axis.</p>
</td></tr>
<tr><td><code id="plot.ga_parsimony-method_+3A_pos_feat_num">pos_feat_num</code></td>
<td>
<p>Relative position of numbers in feature axis.</p>
</td></tr>
<tr><td><code id="plot.ga_parsimony-method_+3A_digits_plot">digits_plot</code></td>
<td>
<p>Number of digits to visualize.</p>
</td></tr>
<tr><td><code id="plot.ga_parsimony-method_+3A_width_plot">width_plot</code></td>
<td>
<p>Figure width in inches.</p>
</td></tr>
<tr><td><code id="plot.ga_parsimony-method_+3A_height_plot">height_plot</code></td>
<td>
<p>Figure height in inches.</p>
</td></tr>
<tr><td><code id="plot.ga_parsimony-method_+3A_window">window</code></td>
<td>
<p>If TRUE shows a new window.</p>
</td></tr>
<tr><td><code id="plot.ga_parsimony-method_+3A_...">...</code></td>
<td>
<p>Further arguments, currently not used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plot method shows the evolution of validation and testing errors, and the number of model features selected of elitists.
White and grey box-plots represent validation and testing errors of elitists evolution, respectively. Continuous and dashed-dotted lines show the validation and testing error 
of the best individual for each generation, respectively. Finally, the shaded area delimits the maximum and minimum number of features, and the dashed line, the number fo features 
of the best individual.</p>


<h3>Value</h3>

<p>The method invisibly return a list with the elistists validation error, testing error and model complexity in the whole GA process.
</p>


<h3>Author(s)</h3>

<p>Francisco Javier Martinez de Pison. <a href="mailto:fjmartin@unirioja.es">fjmartin@unirioja.es</a>. EDMANS Group. <a href="https://edmans.webs.com/">https://edmans.webs.com/</a></p>


<h3>See Also</h3>

<p><code><a href="#topic+ga_parsimony">ga_parsimony</a></code>, <code><a href="#topic+ga_parsimony-class">ga_parsimony-class</a></code>.</p>

<hr>
<h2 id='summary.ga_parsimony-method'>Summary for GA-PARSIMONY</h2><span id='topic+summary+2Cga_parsimony-method'></span><span id='topic+summary.ga_parsimony'></span><span id='topic+print.summary.ga_parsimony'></span>

<h3>Description</h3>

<p>Summary method for class <code><a href="#topic+ga_parsimony-class">ga_parsimony-class</a></code>.</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'ga_parsimony'
summary(object, ...)
## S3 method for class 'summary.ga_parsimony'
print(x, digits = getOption("digits"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.ga_parsimony-method_+3A_object">object</code></td>
<td>
<p>an object of class <code><a href="#topic+ga_parsimony-class">ga_parsimony-class</a></code>.</p>
</td></tr>
<tr><td><code id="summary.ga_parsimony-method_+3A_x">x</code></td>
<td>
<p>an object of class <code>summary.ga_parsimony</code>.</p>
</td></tr>
<tr><td><code id="summary.ga_parsimony-method_+3A_digits">digits</code></td>
<td>
<p>number of significant digits.</p>
</td></tr>
<tr><td><code id="summary.ga_parsimony-method_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The <code>summary</code> function returns an object of class  <code><a href="#topic+ga_parsimony-class">ga_parsimony-class</a></code> which can be printed by the corresponding <code>print</code> method. The function also returns invisibly a list with the information from the genetic algorithm search.</p>


<h3>Author(s)</h3>

<p>Francisco Javier Martinez de Pison. <a href="mailto:fjmartin@unirioja.es">fjmartin@unirioja.es</a>. EDMANS Group. <a href="https://edmans.webs.com/">https://edmans.webs.com/</a></p>


<h3>See Also</h3>

<p><code><a href="#topic+ga_parsimony">ga_parsimony</a></code></p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
