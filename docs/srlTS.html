<!DOCTYPE html><html><head><title>Help for package srlTS</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {srlTS}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#AICc'><p>internal AICc function for lasso models</p></a></li>
<li><a href='#predict.srlTS'><p>Predict function for srlTS object</p></a></li>
<li><a href='#srlTS'><p>Perform time series ranked sparsity methods</p></a></li>
<li><a href='#uihc_ed_arrivals'><p>Hourly arrivals into the University of Iowa Hospital Emergency Department</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Sparsity-Ranked Lasso for Time Series</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>An implementation of sparsity-ranked lasso for 
    time series data. This methodology is especially useful for 
    large time series with exogenous features and/or complex 
    seasonality. Originally described in Peterson and Cavanaugh 
    (2022) &lt;<a href="https://doi.org/10.1007%2Fs10182-021-00431-7">doi:10.1007/s10182-021-00431-7</a>&gt; in the context of variable 
    selection with interactions and/or polynomials, ranked sparsity is 
    a philosophy with methods useful for variable selection in the 
    presence of prior informational asymmetry. This situation exists for time 
    series data with complex seasonality, as shown in Peterson and Cavanaugh 
    (2023+) &lt;<a href="https://doi.org/10.48550%2FarXiv.2211.01492">doi:10.48550/arXiv.2211.01492</a>&gt;, which also describes this package
    in greater detail. The Sparsity-Ranked Lasso (SRL) for Time Series  
    implemented in 'srlTS' can fit large/complex/high-frequency time series
    quickly, even with a high-dimensional exogenous feature set. The SRL is
    considerably faster than its competitors, while often producing more 
    accurate predictions. Also included is a long hourly series of arrivals 
    into the University of Iowa Emergency Department with concurrent local 
    temperature.</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, kableExtra, knitr, magrittr, rmarkdown, testthat (&ge;
3.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, methods, ncvreg, RcppRoll, rlang, yardstick</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://petersonr.github.io/srlTS/">https://petersonr.github.io/srlTS/</a>,
<a href="https://github.com/petersonR/srlTS/">https://github.com/petersonR/srlTS/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/petersonR/srlTS/issues">https://github.com/petersonR/srlTS/issues</a></td>
</tr>
<tr>
<td>Date:</td>
<td>2023-12-13</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-13 22:46:23 UTC; ryanpeterson</td>
</tr>
<tr>
<td>Author:</td>
<td>Ryan Andrew Peterson
    <a href="https://orcid.org/0000-0002-4650-5798"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre,
    cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ryan Andrew Peterson &lt;ryan.a.peterson@cuanschutz.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-14 08:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='AICc'>internal AICc function for lasso models</h2><span id='topic+AICc'></span><span id='topic+get_oos_results'></span><span id='topic+get_model_matrix'></span>

<h3>Description</h3>

<p>internal AICc function for lasso models
</p>
<p>Internal function for obtaining oos results
</p>
<p>Internal function for converting time series into model matrix of lags
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AICc(fit, eps = 1)

get_oos_results(fits, ytest, Xtest)

get_model_matrix(y, X = NULL, n_lags_max)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AICc_+3A_fit">fit</code></td>
<td>
<p>an object with logLik method,</p>
</td></tr>
<tr><td><code id="AICc_+3A_eps">eps</code></td>
<td>
<p>minimum df used in computation</p>
</td></tr>
<tr><td><code id="AICc_+3A_fits">fits</code></td>
<td>
<p>a list of fits with different tuning parameters</p>
</td></tr>
<tr><td><code id="AICc_+3A_ytest">ytest</code></td>
<td>
<p>validation data</p>
</td></tr>
<tr><td><code id="AICc_+3A_xtest">Xtest</code></td>
<td>
<p>new X data, including lags</p>
</td></tr>
<tr><td><code id="AICc_+3A_y">y</code></td>
<td>
<p>time series vector</p>
</td></tr>
<tr><td><code id="AICc_+3A_x">X</code></td>
<td>
<p>Additional exogenous features</p>
</td></tr>
<tr><td><code id="AICc_+3A_n_lags_max">n_lags_max</code></td>
<td>
<p>Maximum number of lags to add</p>
</td></tr>
</table>

<hr>
<h2 id='predict.srlTS'>Predict function for srlTS object</h2><span id='topic+predict.srlTS'></span>

<h3>Description</h3>

<p>Predict function for srlTS object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'srlTS'
predict(object, n_ahead = 1, X_test, y_test, cumulative = 0, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.srlTS_+3A_object">object</code></td>
<td>
<p>an srlTS object</p>
</td></tr>
<tr><td><code id="predict.srlTS_+3A_n_ahead">n_ahead</code></td>
<td>
<p>number of times ahead to predict by iteration</p>
</td></tr>
<tr><td><code id="predict.srlTS_+3A_x_test">X_test</code></td>
<td>
<p>a matrix exogenous features</p>
</td></tr>
<tr><td><code id="predict.srlTS_+3A_y_test">y_test</code></td>
<td>
<p>the test series; needed for future predictions (optional; see
details)</p>
</td></tr>
<tr><td><code id="predict.srlTS_+3A_cumulative">cumulative</code></td>
<td>
<p>should cumulative (rolling) sums be returned (integer
indicating number of times to sum)</p>
</td></tr>
<tr><td><code id="predict.srlTS_+3A_...">...</code></td>
<td>
<p>currently unused</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The 'y_test' argument must be supplied if forecasts are desired or if
'n_ahead' &lt; 'nrow(X_test)'. This is because in order to obtain 1-step
forecast for, say, the 10th observation in the test data set, the 9th
observation of 'y_test' is required. The length of 'y_test' will determine
how many forecasts to produce. In order to get true forecasts for the first
30 observations after the training set, one must (currently) produce the set
of 1-step, 2-step, 3-step, ..., 30-step ahead predictions.
</p>


<h3>Value</h3>

<p>a vector of predictions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("LakeHuron")
fit_LH &lt;- srlTS(LakeHuron)
predict(fit_LH)

</code></pre>

<hr>
<h2 id='srlTS'>Perform time series ranked sparsity methods</h2><span id='topic+srlTS'></span><span id='topic+plot.srlTS'></span><span id='topic+coef.srlTS'></span><span id='topic+print.srlTS'></span><span id='topic+summary.srlTS'></span>

<h3>Description</h3>

<p>Perform time series ranked sparsity methods
</p>


<h3>Usage</h3>

<pre><code class='language-R'>srlTS(
  y,
  X = NULL,
  n_lags_max,
  gamma = c(0, 2^(-2:4)),
  ptrain = 0.8,
  pf_eps = 0.01,
  w_endo,
  w_exo,
  ncvreg_args = list(penalty = "lasso", returnX = FALSE, lambda.min = 0.001)
)

## S3 method for class 'srlTS'
plot(x, log.l = TRUE, ...)

## S3 method for class 'srlTS'
coef(object, choose = c("AICc", "BIC", "all"), ...)

## S3 method for class 'srlTS'
print(x, ...)

## S3 method for class 'srlTS'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="srlTS_+3A_y">y</code></td>
<td>
<p>univariate time series outcome</p>
</td></tr>
<tr><td><code id="srlTS_+3A_x">X</code></td>
<td>
<p>matrix of predictors (no intercept)</p>
</td></tr>
<tr><td><code id="srlTS_+3A_n_lags_max">n_lags_max</code></td>
<td>
<p>maximum number of lags to consider</p>
</td></tr>
<tr><td><code id="srlTS_+3A_gamma">gamma</code></td>
<td>
<p>vector of exponent for weights</p>
</td></tr>
<tr><td><code id="srlTS_+3A_ptrain">ptrain</code></td>
<td>
<p>prop. to leave out for test data</p>
</td></tr>
<tr><td><code id="srlTS_+3A_pf_eps">pf_eps</code></td>
<td>
<p>penalty factors below this will be set to zero</p>
</td></tr>
<tr><td><code id="srlTS_+3A_w_endo">w_endo</code></td>
<td>
<p>optional pre-specified weights for endogenous terms</p>
</td></tr>
<tr><td><code id="srlTS_+3A_w_exo">w_exo</code></td>
<td>
<p>optional pre-specified weights for exogenous terms (see details)</p>
</td></tr>
<tr><td><code id="srlTS_+3A_ncvreg_args">ncvreg_args</code></td>
<td>
<p>additional args to pass through to ncvreg</p>
</td></tr>
<tr><td><code id="srlTS_+3A_x">x</code></td>
<td>
<p>a srlTS object</p>
</td></tr>
<tr><td><code id="srlTS_+3A_log.l">log.l</code></td>
<td>
<p>Should the x-axis (lambda) be logged?</p>
</td></tr>
<tr><td><code id="srlTS_+3A_...">...</code></td>
<td>
<p>passed to downstream functions</p>
</td></tr>
<tr><td><code id="srlTS_+3A_object">object</code></td>
<td>
<p>a srlTS object</p>
</td></tr>
<tr><td><code id="srlTS_+3A_choose">choose</code></td>
<td>
<p>which criterion to use for lambda selection (AICc, BIC, or all)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The default weights for exogenous features will be chosen based on
a similar approach to the adaptive lasso (using bivariate OLS estimates). For
lower dimensional X, it's advised to set <code>w_exo="unpenalized"</code>, because
this allows for statistical inference on exogenous variable coefficients
via the <code>summary</code> function.
</p>


<h3>Value</h3>

<p>A list of class <code>slrTS</code> with elements
</p>
<table>
<tr><td><code>fits</code></td>
<td>
<p>a list of lasso fits</p>
</td></tr>
<tr><td><code>ncvreg_args</code></td>
<td>
<p>arguments passed to ncvreg</p>
</td></tr>
<tr><td><code>gamma</code></td>
<td>
<p>the (negative) exponent on the penalty weights, one
for each fit</p>
</td></tr>
<tr><td><code>n_lags_max</code></td>
<td>
<p>the maximum number of lags</p>
</td></tr>
<tr><td><code>y</code></td>
<td>
<p>the time series</p>
</td></tr>
<tr><td><code>X</code></td>
<td>
<p>the utilized matrix of exogenous features</p>
</td></tr>
<tr><td><code>oos_results</code></td>
<td>
<p>results on test data using best of fits</p>
</td></tr>
<tr><td><code>train_idx</code></td>
<td>
<p>index of observations used in training data</p>
</td></tr>
</table>
<p>x invisibly
</p>
<p>a vector of model coefficients
</p>
<p>x (invisibly)
</p>
<p>the summary object produced by ncvreg
evaluated at the best tuning parameter combination
(best AICc).
</p>


<h3>References</h3>

<p>Breheny, P. and Huang, J. (2011) Coordinate descent algorithms
for nonconvex penalized regression, with applications to biological feature
selection. Ann. Appl. Statist., 5: 232-253.
</p>
<p>Peterson, R.A., Cavanaugh, J.E. Ranked sparsity: a cogent regularization
framework for selecting and estimating feature interactions and
polynomials. AStA Adv Stat Anal (2022).
https://doi.org/10.1007/s10182-021-00431-7
</p>


<h3>See Also</h3>

<p>predict.srlTS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("LakeHuron")
fit_LH &lt;- srlTS(LakeHuron)
fit_LH
coef(fit_LH)
plot(fit_LH)

</code></pre>

<hr>
<h2 id='uihc_ed_arrivals'>Hourly arrivals into the University of Iowa Hospital Emergency Department</h2><span id='topic+uihc_ed_arrivals'></span>

<h3>Description</h3>

<p>A data set containing the 17 columns described below. There are 41640
observations running from 2013 to 2018. Data set are already sorted by time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>uihc_ed_arrivals
</code></pre>


<h3>Format</h3>

<p>a data frame with 17 columns and 41640 rows:
</p>

<dl>
<dt>Year</dt><dd><p>Calendar year</p>
</dd>
<dt>Quarter</dt><dd><p>Fiscal year quarter</p>
</dd>
<dt>Month</dt><dd><p>Integer for month of year</p>
</dd>
<dt>Day</dt><dd><p>Integer for day of month</p>
</dd>
<dt>Hour</dt><dd><p>Integer for hour of day</p>
</dd>
<dt>Arrivals</dt><dd><p>Number of arrivals into the ED (outcome)</p>
</dd>
<dt>Date</dt><dd><p>Date</p>
</dd>
<dt>Weekday</dt><dd><p>Indicator for day of week</p>
</dd>
<dt>temp</dt><dd><p>hourly concurrent temperature</p>
</dd>
<dt>xmas</dt><dd><p>Christmas day indicator</p>
</dd>
<dt>xmas2</dt><dd><p>Day after Christmas</p>
</dd>
<dt>nye</dt><dd><p>New Years Eve indicator</p>
</dd>
<dt>nyd</dt><dd><p>New Years Day indicator</p>
</dd>
<dt>thx</dt><dd><p>Thanksgiving day indicator</p>
</dd>
<dt>thx</dt><dd><p>Thanksgiving day (after) indicator</p>
</dd>
<dt>ind</dt><dd><p>Independence day indicator</p>
</dd>
<dt>game_Day</dt><dd><p>Hawkeye football game day indicator</p>
</dd>
</dl>



<h3>Source</h3>

<p>UIHC Emergency Department.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
