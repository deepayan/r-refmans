<!DOCTYPE html><html><head><title>Help for package gompertztrunc</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gompertztrunc}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#bM2a'><p>Helper functions</p></a></li>
<li><a href='#bunmd_demo'><p>Demo BUNMD Data Set</p></a></li>
<li><a href='#convert_hazards_to_ex'><p>Convert hazard ratios to life expectancy</p></a></li>
<li><a href='#diagnostic_plot'><p>Create diagnostic plots</p></a></li>
<li><a href='#diagnostic_plot_hazard'><p>Create diagnostic plot (hazard scale)</p></a></li>
<li><a href='#get.par.start'><p>Get starting values for parameters</p></a></li>
<li><a href='#gompertz_mle'><p>Gompertz MLE function</p></a></li>
<li><a href='#gompertztrunc_simu'><p>Simulate Gompertzian death distribution</p></a></li>
<li><a href='#hazard_ratio_to_le'><p>Translate a single hazard ratio to remaining life expectancy</p></a></li>
<li><a href='#mll.gomp.multi.cohort.cov'><p>Gompertz mle function</p></a></li>
<li><a href='#negLL_function'><p>Gompertz Negative Log Likelihood Function</p></a></li>
<li><a href='#numident_demo'><p>Demo Numident Data Set</p></a></li>
<li><a href='#sim_data'><p>Simulated mortality data set</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Conducting Maximum Likelihood Estimation with Truncated
Mortality Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Maria Osborne &lt;mariaosborne@berkeley.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Estimates hazard ratios and mortality differentials for
    doubly-truncated data without population denominators. This method is
    described in Goldstein et al. (2023) &lt;<a href="https://doi.org/10.1007%2Fs11113-023-09785-z">doi:10.1007/s11113-023-09785-z</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://caseybreen.github.io/gompertztrunc/">https://caseybreen.github.io/gompertztrunc/</a>,
<a href="https://github.com/caseybreen/gompertztrunc">https://github.com/caseybreen/gompertztrunc</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/caseybreen/gompertztrunc/issues">https://github.com/caseybreen/gompertztrunc/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>broom, cowplot, data.table, dplyr, flexsurv, ggplot2, ggsci,
grid, magrittr, modelr, rlang, stats, stringr, tibble, tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, socviz, tidyverse</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-28 18:27:07 UTC; mariaosborne</td>
</tr>
<tr>
<td>Author:</td>
<td>Casey Breen <a href="https://orcid.org/0000-0001-9114-981X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Maria Osborne [aut, cre],
  Joshua R. Goldstein [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-29 00:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='bM2a'>Helper functions</h2><span id='topic+bM2a'></span>

<h3>Description</h3>

<p>Helper functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bM2a(b, M)
</code></pre>

<hr>
<h2 id='bunmd_demo'>Demo BUNMD Data Set</h2><span id='topic+bunmd_demo'></span>

<h3>Description</h3>

<p>A data set containing a sample of the CenSoc Berkeley Unified Numident Mortality Database (BUNMD) file,
including age at death and select covariates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bunmd_demo
</code></pre>


<h3>Format</h3>

<p>A data frame with 81,002 rows and 6 variables:
</p>

<dl>
<dt>ssn</dt><dd><p>Social Security number</p>
</dd>
<dt>bpl_string</dt><dd><p>Country of birth</p>
</dd>
<dt>death_age</dt><dd><p>Age at death (integer years)</p>
</dd>
<dt>byear</dt><dd><p>Calendar year of birth</p>
</dd>
<dt>dyear</dt><dd><p>Calendar year of death</p>
</dd>
<dt>age_first_application</dt><dd><p>Age at first Social Security application</p>
</dd>
</dl>



<h3>Details</h3>

<p>The Berkeley Unified Numident Mortality Database (BUNMD) is a
cleaned and harmonized version of the NARA Numident file, consisting of the most
informative parts of the 60+ application, claim, and death files released by the
National Archives.The full data set of nearly 50 million records is available at
<a href="https://censoc.berkeley.edu/data/">https://censoc.berkeley.edu/data/</a>.
</p>


<h3>Source</h3>

<p>Joshua R. Goldstein, Monica Alexander, Casey Breen, Andrea Miranda González,
Felipe Menares, Maria Osborne, Mallika Snyder, and Ugur Yildirim.
CenSoc Mortality File: Version 2.0. Berkeley: University of California, 2021.
<a href="https://censoc.berkeley.edu/">https://censoc.berkeley.edu/</a>
</p>

<hr>
<h2 id='convert_hazards_to_ex'>Convert hazard ratios to life expectancy</h2><span id='topic+convert_hazards_to_ex'></span>

<h3>Description</h3>

<p>Convert hazard ratios to differences in remaining life expectancy
at a given age (defaults to age 65)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_hazards_to_ex(
  df,
  age = 65,
  upper_age = 120,
  M = 80,
  b = 0.075,
  use_model_estimates = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convert_hazards_to_ex_+3A_df">df</code></td>
<td>
<p>Dataframe of results given by gompertz_mle() function</p>
</td></tr>
<tr><td><code id="convert_hazards_to_ex_+3A_age">age</code></td>
<td>
<p>Age at which to calculate remaining life expectancy</p>
</td></tr>
<tr><td><code id="convert_hazards_to_ex_+3A_upper_age">upper_age</code></td>
<td>
<p>Maximal age to use in life table calculation</p>
</td></tr>
<tr><td><code id="convert_hazards_to_ex_+3A_m">M</code></td>
<td>
<p>Gompertz parameter modal age at death</p>
</td></tr>
<tr><td><code id="convert_hazards_to_ex_+3A_b">b</code></td>
<td>
<p>Gompertz mortality slope parameter</p>
</td></tr>
<tr><td><code id="convert_hazards_to_ex_+3A_use_model_estimates">use_model_estimates</code></td>
<td>
<p>Use estimates of the Gompertz Parameters from the model, rather than defaults</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe of hazards ratios and corresponding e(x) estimates and confidence intervals
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#model hazards as function of birthplace using bunmd_demo data
demo_dataset &lt;- dplyr::filter(bunmd_demo, bpl_string %in% c("Poland", "England")) %&gt;%
dplyr::sample_frac(0.1)

#run gompertz_mle()
bpl &lt;- gompertz_mle(formula = death_age ~ bpl_string, left_trunc = 1988,
                    right_trunc = 2005, data = demo_dataset)

#convert to difference in life expectancy
convert_hazards_to_ex(df = bpl$results, use_model_estimates = FALSE)

</code></pre>

<hr>
<h2 id='diagnostic_plot'>Create diagnostic plots</h2><span id='topic+diagnostic_plot'></span>

<h3>Description</h3>

<p>Compare empirical and modeled distribution of ages of death within a cohort. Only
works with a single discrete covariate and a single cohort.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diagnostic_plot(
  data,
  object,
  covar,
  death_var = "death_age",
  byear_var = "byear",
  xlim = c(65, 110)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="diagnostic_plot_+3A_data">data</code></td>
<td>
<p>data used to create gompertz_mle object</p>
</td></tr>
<tr><td><code id="diagnostic_plot_+3A_object">object</code></td>
<td>
<p>gompertz_mle object</p>
</td></tr>
<tr><td><code id="diagnostic_plot_+3A_covar">covar</code></td>
<td>
<p>covariate of interest</p>
</td></tr>
<tr><td><code id="diagnostic_plot_+3A_death_var">death_var</code></td>
<td>
<p>death age variable</p>
</td></tr>
<tr><td><code id="diagnostic_plot_+3A_byear_var">byear_var</code></td>
<td>
<p>birth year/cohort variable</p>
</td></tr>
<tr><td><code id="diagnostic_plot_+3A_xlim">xlim</code></td>
<td>
<p>x-limits for figure</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create a single-cohort data set
numident_c1920 &lt;- numident_demo %&gt;% dplyr::filter(byear == 1920) %&gt;%
dplyr::mutate(finished_hs = as.factor(educ_yrs &gt;= 12))

# Run gompertz_mle()
gradient &lt;- gompertztrunc::gompertz_mle(formula = death_age ~ finished_hs,
left_trunc = 1988, right_trunc = 2005, data = numident_c1920)

# Create diagnostic histogram plot using model outcome
gompertztrunc::diagnostic_plot(object = gradient, data = numident_c1920,
covar = "finished_hs", xlim = c(60, 95))

</code></pre>

<hr>
<h2 id='diagnostic_plot_hazard'>Create diagnostic plot (hazard scale)</h2><span id='topic+diagnostic_plot_hazard'></span>

<h3>Description</h3>

<p>Compare empirical and model-based estimated hazard rates within a cohort. Only
works with a single discrete covariate and a single cohort. Will plot hazards
for to 9 levels/values of the discrete covariate.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diagnostic_plot_hazard(
  data,
  object,
  covar,
  death_var = "death_age",
  byear_var = "byear",
  xlim = c(65, 110)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="diagnostic_plot_hazard_+3A_data">data</code></td>
<td>
<p>data.frame of observed data for gompertz_mle</p>
</td></tr>
<tr><td><code id="diagnostic_plot_hazard_+3A_object">object</code></td>
<td>
<p>gompertz_mle object</p>
</td></tr>
<tr><td><code id="diagnostic_plot_hazard_+3A_covar">covar</code></td>
<td>
<p>covariate of interest</p>
</td></tr>
<tr><td><code id="diagnostic_plot_hazard_+3A_death_var">death_var</code></td>
<td>
<p>death age variable</p>
</td></tr>
<tr><td><code id="diagnostic_plot_hazard_+3A_byear_var">byear_var</code></td>
<td>
<p>birth year/cohort variable</p>
</td></tr>
<tr><td><code id="diagnostic_plot_hazard_+3A_xlim">xlim</code></td>
<td>
<p>x-limits for figure</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function assumes that no population denominators exist with
which to calculate hazards. Therefore, the &quot;observed&quot; hazards produced are
not truly empirical values. Instead, it relies partially on the modeled
parameters to compute life table values.
</p>
<p>To find these quasi-observed hazards, the modeled Gompertz distribution
is used to calculate <em>l(x_min)</em>; i.e., the number of survivors to the earliest
observable age at death in the data. This is done for each category/level of the
specified covariate. Then, the number of observed deaths at each age is used
to infer the number of survivors to each subsequent age and the death rate at
each age.
</p>


<h3>Value</h3>

<p>a ggplot object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Create a single-cohort data set
numident_c1920 &lt;- numident_demo %&gt;% dplyr::filter(byear == 1920) %&gt;%
dplyr::mutate(finished_hs = as.factor(educ_yrs &gt;= 12))

# Run gompertz_mle()
gradient &lt;- gompertztrunc::gompertz_mle(formula = death_age ~ finished_hs,
left_trunc = 1988, right_trunc = 2005, data = numident_c1920)

# Create diagnostic hazards plot using model outcome
gompertztrunc::diagnostic_plot_hazard(object = gradient, data = numident_c1920,
covar = "finished_hs", xlim = c(60, 95))
</code></pre>

<hr>
<h2 id='get.par.start'>Get starting values for parameters</h2><span id='topic+get.par.start'></span>

<h3>Description</h3>

<p>Uses linear modeling to compute initial values for MLE optimizer
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.par.start(formula, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get.par.start_+3A_formula">formula</code></td>
<td>
<p>the estimation formula</p>
</td></tr>
<tr><td><code id="get.par.start_+3A_data">data</code></td>
<td>
<p>data matrix with y, u, l, and covariates, including cohort</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Named vector of initial parameter estimates
</p>

<hr>
<h2 id='gompertz_mle'>Gompertz MLE function</h2><span id='topic+gompertz_mle'></span>

<h3>Description</h3>

<p>Fits a Gompertz distribution with proportional hazards
to doubly-truncated mortality data using maximum likelihood estimation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gompertz_mle(
  formula,
  left_trunc = 1975,
  right_trunc = 2005,
  data,
  byear = byear,
  dyear = dyear,
  lower_age_bound = NULL,
  upper_age_bound = NULL,
  weights = NULL,
  start = NULL,
  death_age_data_type = "auto",
  maxiter = 10000
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gompertz_mle_+3A_formula">formula</code></td>
<td>
<p>the estimation formula</p>
</td></tr>
<tr><td><code id="gompertz_mle_+3A_left_trunc">left_trunc</code></td>
<td>
<p>left truncation year</p>
</td></tr>
<tr><td><code id="gompertz_mle_+3A_right_trunc">right_trunc</code></td>
<td>
<p>right truncation year</p>
</td></tr>
<tr><td><code id="gompertz_mle_+3A_data">data</code></td>
<td>
<p>a data frame containing variables in the model</p>
</td></tr>
<tr><td><code id="gompertz_mle_+3A_byear">byear</code></td>
<td>
<p>vector of birth years</p>
</td></tr>
<tr><td><code id="gompertz_mle_+3A_dyear">dyear</code></td>
<td>
<p>vector of death years</p>
</td></tr>
<tr><td><code id="gompertz_mle_+3A_lower_age_bound">lower_age_bound</code></td>
<td>
<p>lowest age at death to include (optional)</p>
</td></tr>
<tr><td><code id="gompertz_mle_+3A_upper_age_bound">upper_age_bound</code></td>
<td>
<p>highest age at death to include (optional)</p>
</td></tr>
<tr><td><code id="gompertz_mle_+3A_weights">weights</code></td>
<td>
<p>an optional vector of individual weights</p>
</td></tr>
<tr><td><code id="gompertz_mle_+3A_start">start</code></td>
<td>
<p>an optional vector of starting values for the optimizer. must be
a numeric vector that exactly matches the output of
<code>get.par.start(formula, data)</code> in length and element names.</p>
</td></tr>
<tr><td><code id="gompertz_mle_+3A_death_age_data_type">death_age_data_type</code></td>
<td>
<p>option for handling of continuous and discrete
death age variable (not yet implemented)</p>
</td></tr>
<tr><td><code id="gompertz_mle_+3A_maxiter">maxiter</code></td>
<td>
<p>maximum number of iterations for optimizer</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a named list consisting of the following components
(See <code><a href="stats.html#topic+optim">stats::optim()</a></code> for additional details):
</p>

<dl>
<dt><code>starting_values</code></dt><dd><p>list of starting values of parameters</p>
</dd>
<dt><code>optim_fit</code></dt><dd><p>A list consisting of:
</p>

<dl>
<dt><code>par</code></dt><dd><p>best estimation of parameter values</p>
</dd>
<dt><code>value</code></dt><dd><p>log likelihood</p>
</dd>
<dt><code>counts</code></dt><dd><p>number of calls to function and gradient</p>
</dd>
<dt><code>convergence</code></dt><dd><p>returns 0 if the model converged, for other values see <code><a href="stats.html#topic+optim">stats::optim()</a></code> </p>
</dd>
<dt><code>message</code></dt><dd><p>any other information returned by optimizer</p>
</dd>
<dt><code>hessian</code></dt><dd><p>Hessian matrix</p>
</dd>
</dl>

</dd>
<dt><code>results</code></dt><dd><p>A table of estimates and upper/lower bounds of the 95 percent confidence interval
for the estimates. Confidence interval computed as 1.96*standard_error.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#model hazards as function of birthplace using bunmd_demo file
gompertz_mle(formula = death_age ~ bpl_string, left_trunc = 1988, right_trunc = 2005,
data = bunmd_demo)

## End(Not run)
</code></pre>

<hr>
<h2 id='gompertztrunc_simu'>Simulate Gompertzian death distribution</h2><span id='topic+gompertztrunc_simu'></span>

<h3>Description</h3>

<p>Simulate Gompertzian death distribution
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gompertztrunc_simu(
  n,
  formula,
  coefs,
  dummy = NULL,
  sigma = NULL,
  seed = NULL,
  a0 = 10^-4,
  b = 1/10,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gompertztrunc_simu_+3A_n">n</code></td>
<td>
<p>sample size</p>
</td></tr>
<tr><td><code id="gompertztrunc_simu_+3A_formula">formula</code></td>
<td>
<p>estimation formula</p>
</td></tr>
<tr><td><code id="gompertztrunc_simu_+3A_coefs">coefs</code></td>
<td>
<p>named vectors of coefficients and corresponding true values</p>
</td></tr>
<tr><td><code id="gompertztrunc_simu_+3A_dummy">dummy</code></td>
<td>
<p>vector flags for each coefficient</p>
</td></tr>
<tr><td><code id="gompertztrunc_simu_+3A_sigma">sigma</code></td>
<td>
<p>standard deviation for each variable</p>
</td></tr>
<tr><td><code id="gompertztrunc_simu_+3A_seed">seed</code></td>
<td>
<p>random seed to duplicate data</p>
</td></tr>
<tr><td><code id="gompertztrunc_simu_+3A_a0">a0</code></td>
<td>
<p>Gompertz alpha parameter</p>
</td></tr>
<tr><td><code id="gompertztrunc_simu_+3A_b">b</code></td>
<td>
<p>Gompertz b parameter</p>
</td></tr>
<tr><td><code id="gompertztrunc_simu_+3A_verbose">verbose</code></td>
<td>
<p>print internal check if true</p>
</td></tr>
</table>


<h3>Value</h3>

<p>dataframe of simulated death ages and covariate values
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gompertztrunc_simu(n=1000, formula = death_age ~ sex + ambient_temp,
coefs = c('sex'=-0.8, 'ambient_temp'=0.3), dummy=c(TRUE,FALSE))

</code></pre>

<hr>
<h2 id='hazard_ratio_to_le'>Translate a single hazard ratio to remaining life expectancy</h2><span id='topic+hazard_ratio_to_le'></span>

<h3>Description</h3>

<p>Translate a single hazard ratio to effect on remaining life
expectancy at a specified age, using a Gompertz mortality schedule
as the baseline
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hazard_ratio_to_le(lower, upper, hr, M = 80, b = 0.1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hazard_ratio_to_le_+3A_lower">lower</code></td>
<td>
<p>age at which to compute change in remaining life expectancy</p>
</td></tr>
<tr><td><code id="hazard_ratio_to_le_+3A_upper">upper</code></td>
<td>
<p>upper age bound for life table calculations</p>
</td></tr>
<tr><td><code id="hazard_ratio_to_le_+3A_hr">hr</code></td>
<td>
<p>hazard ratio</p>
</td></tr>
<tr><td><code id="hazard_ratio_to_le_+3A_m">M</code></td>
<td>
<p>Gompertz modal age at death parameter</p>
</td></tr>
<tr><td><code id="hazard_ratio_to_le_+3A_b">b</code></td>
<td>
<p>Gompertz mortality slope parameter</p>
</td></tr>
</table>


<h3>Value</h3>

<p>hazard ratio converted to effect on life expectancy
</p>

<hr>
<h2 id='mll.gomp.multi.cohort.cov'>Gompertz mle function</h2><span id='topic+mll.gomp.multi.cohort.cov'></span>

<h3>Description</h3>

<p>Estimates separate alpha values for each cohort
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mll.gomp.multi.cohort.cov(p, A, predictors = predictors)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mll.gomp.multi.cohort.cov_+3A_p">p</code></td>
<td>
<p>the initialization function</p>
</td></tr>
<tr><td><code id="mll.gomp.multi.cohort.cov_+3A_a">A</code></td>
<td>
<p>data matrix with covariates y, u, l, and covariates, including cohort</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>

<hr>
<h2 id='negLL_function'>Gompertz Negative Log Likelihood Function</h2><span id='topic+negLL_function'></span>

<h3>Description</h3>

<p>Computes negative log likelihood for optimizer
</p>


<h3>Usage</h3>

<pre><code class='language-R'>negLL_function(par, y, X, y.left, y.right, wt)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="negLL_function_+3A_par">par</code></td>
<td>
<p>a vector of parameter estimates</p>
</td></tr>
<tr><td><code id="negLL_function_+3A_y">y</code></td>
<td>
<p>a vector of death ages</p>
</td></tr>
<tr><td><code id="negLL_function_+3A_x">X</code></td>
<td>
<p>a model matrix</p>
</td></tr>
<tr><td><code id="negLL_function_+3A_y.left">y.left</code></td>
<td>
<p>left truncation age</p>
</td></tr>
<tr><td><code id="negLL_function_+3A_y.right">y.right</code></td>
<td>
<p>right truncation age</p>
</td></tr>
<tr><td><code id="negLL_function_+3A_wt">wt</code></td>
<td>
<p>weight</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The negative log likelihood of parameter estimates given observed data
</p>

<hr>
<h2 id='numident_demo'>Demo Numident Data Set</h2><span id='topic+numident_demo'></span>

<h3>Description</h3>

<p>A data set containing a sample of the CenSoc-Numident file,
including age at death and select covariates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>numident_demo
</code></pre>


<h3>Format</h3>

<p>A data frame with 62,899 rows and 30 variables:
</p>

<dl>
<dt>histid</dt><dd><p>Historical unique identifier</p>
</dd>
<dt>byear</dt><dd><p>Year of birth</p>
</dd>
<dt>bmonth</dt><dd><p>Month of birth</p>
</dd>
<dt>dyear</dt><dd><p>Year of death</p>
</dd>
<dt>dmonth</dt><dd><p>Month of death</p>
</dd>
<dt>death_age</dt><dd><p>Age at death (years)</p>
</dd>
<dt>weight</dt><dd><p>CenSoc weight</p>
</dd>
<dt>zip_residence</dt><dd><p>ZIP Code of residence at time of death</p>
</dd>
<dt>pernum</dt><dd><p>Person number in sample unit</p>
</dd>
<dt>perwt</dt><dd><p>IPUMS person weight</p>
</dd>
<dt>age</dt><dd><p>Age in 1940</p>
</dd>
<dt>sex</dt><dd><p>Sex in 1940</p>
</dd>
<dt>bpl</dt><dd><p>Place of birth</p>
</dd>
<dt>mbpl</dt><dd><p>Mother’s place of birth</p>
</dd>
<dt>fbpl</dt><dd><p>Father’s place of birth</p>
</dd>
<dt>educd</dt><dd><p>Educational attainment (detailed)</p>
</dd>
<dt>empstatd</dt><dd><p>Employment status (detailed)</p>
</dd>
<dt>hispan</dt><dd><p>Hispanic/Spanish/Latino origin</p>
</dd>
<dt>incnonwg</dt><dd><p>Had non-wage/salary income over $50</p>
</dd>
<dt>incwage</dt><dd><p>Wage and salary income</p>
</dd>
<dt>marst</dt><dd><p>Marital status</p>
</dd>
<dt>nativity</dt><dd><p>Foreign birthplace or parentage</p>
</dd>
<dt>occ</dt><dd><p>Occupation</p>
</dd>
<dt>occscore</dt><dd><p>Occupational income score</p>
</dd>
<dt>ownershp</dt><dd><p>Ownership of dwelling (tenure)</p>
</dd>
<dt>race</dt><dd><p>Race</p>
</dd>
<dt>rent</dt><dd><p>Monthly contract rent</p>
</dd>
<dt>serial</dt><dd><p>Household serial number</p>
</dd>
<dt>statefip</dt><dd><p>State of residence 1940</p>
</dd>
<dt>urban</dt><dd><p>Urban/rural status</p>
</dd>
<dt>educ_yrs</dt><dd><p>Years of education attained</p>
</dd>
</dl>



<h3>Details</h3>

<p>The CenSoc-Numident dataset links the 1940 census to the National Archives’
public release of the Social Security Numident file. The prelinked demo
version of the file has 63 thousand mortality records and 20
mortality covariates from the 1940 census (~1 percent of the complete CenSoc-Numident
dataset). Both demo and full versions of the data are available at
<a href="https://censoc.berkeley.edu/data/">https://censoc.berkeley.edu/data/</a>.
</p>


<h3>Source</h3>

<p>Joshua R. Goldstein, Monica Alexander, Casey Breen, Andrea Miranda González,
Felipe Menares, Maria Osborne, Mallika Snyder, and Ugur Yildirim.
CenSoc Mortality File: Version 2.0. Berkeley: University of California, 2021.
<a href="https://censoc.berkeley.edu/">https://censoc.berkeley.edu/</a>.
</p>
<p>Steven Ruggles, Sarah Flood, Ronald Goeken, Megan Schouweiler and Matthew Sobek.
IPUMS USA: Version 12.0 (dataset). Minneapolis, MN: IPUMS, 2022.
<a href="https://doi.org/10.18128/D010.V12.0">doi:10.18128/D010.V12.0</a>.
</p>

<hr>
<h2 id='sim_data'>Simulated mortality data set</h2><span id='topic+sim_data'></span>

<h3>Description</h3>

<p>A data set containing simulated age at death and covariates according to
a truncated Gompertz distribution with proportional hazards
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim_data
</code></pre>


<h3>Format</h3>

<p>A data frame with 6732 rows and 6 variables:
</p>

<dl>
<dt>aod</dt><dd><p>Age at death, in integer years</p>
</dd>
<dt>byear</dt><dd><p>Calendar year of birth</p>
</dd>
<dt>dyear</dt><dd><p>Calendar year of death</p>
</dd>
<dt>temp</dt><dd><p>Temperature</p>
</dd>
<dt>sex</dt><dd><p>Sex (0 = male, 1 = female)</p>
</dd>
<dt>isSouth</dt><dd><p>Live in south (0 = FALSE, 1 = TRUE)</p>
</dd>
</dl>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
