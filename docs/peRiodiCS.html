<!DOCTYPE html><html><head><title>Help for package peRiodiCS</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {peRiodiCS}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#b_rcs'><p>Basis for restricted cubic splines</p></a></li>
<li><a href='#b_rcs_prime'><p>Derive first derivatives of RCS</p></a></li>
<li><a href='#cs_per'><p>Generate design matrix for periodic cubic splines</p></a></li>
<li><a href='#plot_per_mod'><p>Plotting function for periodic curves model</p></a></li>
<li><a href='#rcs_per'><p>Generate design matrix for periodic restricted cubic spline</p></a></li>
<li><a href='#viral_east_mediteranean'><p>Viral etiology, seasonality and severity of hospitalized patients with severe acute respiratory infections in the Eastern Mediterranean Region, 2007-2014</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Functions for Generating Periodic Curves</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2018-07-02</td>
</tr>
<tr>
<td>Description:</td>
<td>
    Functions for generating variants of curves:
    restricted cubic spline, periodic restricted cubic spline,
    periodic cubic spline. Periodic splines can be used to model data
    that has periodic nature / seasonality.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/crtahlin/peRiodiCS/issues">https://github.com/crtahlin/peRiodiCS/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics, Hmisc, rms</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2018-07-02 15:22:31 UTC; crtah</td>
</tr>
<tr>
<td>Author:</td>
<td>Crt Ahlin [aut, cre],
  Lara Lusa [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Crt Ahlin &lt;crt.ahlin@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2018-07-05 09:20:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='b_rcs'>Basis for restricted cubic splines</h2><span id='topic+b_rcs'></span>

<h3>Description</h3>

<p>Function that derives the restricted cubic splines 
for a value/vector of values, given the knots; 
obtains exactly the same results as the rcs function included in the rms package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>b_rcs(x, knots, inclx = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="b_rcs_+3A_x">x</code></td>
<td>
<p>numerical vector</p>
</td></tr>
<tr><td><code id="b_rcs_+3A_knots">knots</code></td>
<td>
<p>vector specifying the knot locations</p>
</td></tr>
<tr><td><code id="b_rcs_+3A_inclx">inclx</code></td>
<td>
<p>logical, if TRUE returns also the x vector</p>
</td></tr>
</table>

<hr>
<h2 id='b_rcs_prime'>Derive first derivatives of RCS</h2><span id='topic+b_rcs_prime'></span>

<h3>Description</h3>

<p>function that derives the first derivative of the restricted cubic splines 
for a value/vector of values, given the knots
</p>


<h3>Usage</h3>

<pre><code class='language-R'>b_rcs_prime(x, knots)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="b_rcs_prime_+3A_x">x</code></td>
<td>
<p>vector of values</p>
</td></tr>
<tr><td><code id="b_rcs_prime_+3A_knots">knots</code></td>
<td>
<p>vector of knot locations</p>
</td></tr>
</table>

<hr>
<h2 id='cs_per'>Generate design matrix for periodic cubic splines</h2><span id='topic+cs_per'></span>

<h3>Description</h3>

<p>Generate design matrix for periodic cubic splines.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cs_per(x, knots = NULL, nk = 5, xmax = max(x, na.rm = TRUE),
  xmin = min(x, na.rm = TRUE))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cs_per_+3A_x">x</code></td>
<td>
<p>numerical x values to transform to new basis</p>
</td></tr>
<tr><td><code id="cs_per_+3A_knots">knots</code></td>
<td>
<p>vector with locations of the knots of the spline</p>
</td></tr>
<tr><td><code id="cs_per_+3A_nk">nk</code></td>
<td>
<p>number of knots, used only if the knots are not specified, overridden otherwise</p>
</td></tr>
<tr><td><code id="cs_per_+3A_xmax">xmax</code></td>
<td>
<p>value of the (theoretical) minimum of x</p>
</td></tr>
<tr><td><code id="cs_per_+3A_xmin">xmin</code></td>
<td>
<p>value of the (theoretical) maximum of x</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># load example data; see help("viral_east_mediteranean")
data("viral_east_mediteranean")

# calculate location of knots to use
Knots &lt;- 
 Hmisc::rcspline.eval(x = viral_east_mediteranean$EpiWeek,
                      nk = 5, knots.only = TRUE)

# model viral infections vs weeks
model &lt;- glm(RSV ~ cs_per(EpiWeek, knots = Knots), data = viral_east_mediteranean)

# plot model (with many points, to make it smooth)
plot_per_mod(Model = model, XvarName = "EpiWeek", Smooth = TRUE)

</code></pre>

<hr>
<h2 id='plot_per_mod'>Plotting function for periodic curves model</h2><span id='topic+plot_per_mod'></span>

<h3>Description</h3>

<p>Plots graph of periodic curves with confidence intervals.
Data should be included in the model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_per_mod(Model, XvarName, Ylab = "Response", Xlab = "Covariate",
  Ylim = NULL, Xlim = NULL, Xmin = NULL, Xmax = NULL, Knots = NULL,
  Title = NULL, Vlines = NULL, Hlines = NULL, Cex.lab = NULL,
  Cex.main = NULL, Cex.axis = NULL, Axes = TRUE, Add = FALSE,
  Col = "black", PlotCI = TRUE, Smooth = FALSE, xLocation = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_per_mod_+3A_model">Model</code></td>
<td>
<p>The built model</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_xvarname">XvarName</code></td>
<td>
<p>Name of the x variable in the dataset (column name)</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_ylab">Ylab</code></td>
<td>
<p>Label on vertical (y) axis</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_xlab">Xlab</code></td>
<td>
<p>Label on horizontal (x) axis</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_ylim">Ylim</code></td>
<td>
<p>Limits of y axis</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_xlim">Xlim</code></td>
<td>
<p>Limits of x axis</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_xmin">Xmin</code></td>
<td>
<p>The min X of data to be predicted (if Smooth)</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_xmax">Xmax</code></td>
<td>
<p>The max X of data to be predicted (if Smooth)</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_knots">Knots</code></td>
<td>
<p>Locations of knots of the splines</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_title">Title</code></td>
<td>
<p>Title of the plot</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_vlines">Vlines</code></td>
<td>
<p>Where to plot vertical lines</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_hlines">Hlines</code></td>
<td>
<p>Where to plot horizontal lines</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_cex.lab">Cex.lab</code></td>
<td>
<p>Character expansion (aka &quot;size of font&quot;) for the labels</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_cex.main">Cex.main</code></td>
<td>
<p>Character expansion for main text</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_cex.axis">Cex.axis</code></td>
<td>
<p>Character expansion for the axis text</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_axes">Axes</code></td>
<td>
<p>Plot axes</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_add">Add</code></td>
<td>
<p>Add to existing plot</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_col">Col</code></td>
<td>
<p>Color of the plotted lines</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_plotci">PlotCI</code></td>
<td>
<p>Plot confidence intervals</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_smooth">Smooth</code></td>
<td>
<p>Make the Xaxis values equidistant (and the curve smoother)</p>
</td></tr>
<tr><td><code id="plot_per_mod_+3A_xlocation">xLocation</code></td>
<td>
<p>If smooth FALSE, the location of the x term in model$x[, xLocation]</p>
</td></tr>
</table>

<hr>
<h2 id='rcs_per'>Generate design matrix for periodic restricted cubic spline</h2><span id='topic+rcs_per'></span>

<h3>Description</h3>

<p>Generate design matrix for periodic restricted cubic spline.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rcs_per(x, knots = NULL, nk = 5, xmin = min(x, na.rm = TRUE),
  xmax = max(x, na.rm = TRUE))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rcs_per_+3A_x">x</code></td>
<td>
<p>numerical x values to transform to new basis</p>
</td></tr>
<tr><td><code id="rcs_per_+3A_knots">knots</code></td>
<td>
<p>vector with locations of the knots of the spline</p>
</td></tr>
<tr><td><code id="rcs_per_+3A_nk">nk</code></td>
<td>
<p>number of knots, used only if the knots are not specified, overridden otherwise</p>
</td></tr>
<tr><td><code id="rcs_per_+3A_xmin">xmin</code></td>
<td>
<p>value of the (theoretical) minimum of x</p>
</td></tr>
<tr><td><code id="rcs_per_+3A_xmax">xmax</code></td>
<td>
<p>value of the (theoretical) maximum of x
</p>
<p>#' @examples 
# load example data; see help(&quot;viral_east_mediteranean&quot;)
data(&quot;viral_east_mediteranean&quot;)
</p>
<p># calculate location of knots to use
Knots &lt;- 
Hmisc::rcspline.eval(x = viral_east_mediteranean$EpiWeek,
nk = 5, knots.only = TRUE)
</p>
<p># model viral infections vs weeks
model &lt;- glm(RSV ~ rcs_per(EpiWeek, knots = Knots), data = viral_east_mediteranean)
</p>
<p># plot model (with many points, to make it smooth)
plot_per_mod(Model = model, XvarName = &quot;EpiWeek&quot;, Smooth = TRUE)</p>
</td></tr>
</table>

<hr>
<h2 id='viral_east_mediteranean'>Viral etiology, seasonality and severity of hospitalized patients with severe acute respiratory infections in the Eastern Mediterranean Region, 2007-2014</h2><span id='topic+viral_east_mediteranean'></span>

<h3>Description</h3>

<p>Data about infections with different viruses across several years. 
</p>
<p>For more information see Source and References section.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>viral_east_mediteranean
</code></pre>


<h3>Format</h3>

<p>A data frame with variables:
</p>

<dl>
<dt>UniqueID</dt><dd><p>record identification number</p>
</dd>
<dt>Enrolled</dt><dd><p>Did the patient consent and enroll in the study?:	1=Yes, 0=No</p>
</dd>
<dt>Country</dt><dd><p>Country of enrollment:	Egypt, Jordan, Oman, Qatar, Yemen</p>
</dd>
<dt>EpiYear</dt><dd><p>Year of enrollment:	Integers (2007-2014)</p>
</dd>
<dt>EpiMonth</dt><dd><p>Month of enrollment:	Integers (1-12)</p>
</dd>
<dt>EpiWeek</dt><dd><p>Week of enrollment:	Integers (1-53)</p>
</dd>
<dt>Interval</dt><dd><p>Number of days between onset of symptoms and hospitalization:	Integer</p>
</dd>
<dt>Stay</dt><dd><p>Number of days between hospitalization and outcome:	Integer</p>
</dd>
<dt>Sex</dt><dd><p>Sex: 1=Female, 0=Male</p>
</dd>
<dt>AgeGrp</dt><dd><p>Age group:	1=&lt;1 year, 2=1-4 years, 3=5-49 years, 4=50+ years</p>
</dd>
<dt>ChronicDis</dt><dd><p>Does the patient have any pre-existing chronic disease?:	1=Yes, 0=No</p>
</dd>
<dt>OxTherapy</dt><dd><p>Did the patient receive oxygen therapy during hospitalization?:	1=Yes, 0=No</p>
</dd>
<dt>Ventilated</dt><dd><p>Was the patient ventilated during hospitalization?:	1=Yes, 0=No</p>
</dd>
<dt>ICU</dt><dd><p>Was the patient admitted to an intensive care unit during hospitalization?:	1=Yes, 0=No</p>
</dd>
<dt>Outcome</dt><dd><p>What was the patient&quot;'&quot;s final hospitalization outcome?:	1=Discharge, 2=Transfer, 3=Death</p>
</dd>
<dt>RSV</dt><dd><p>Results for respiratory syncytial virus: 1=Positive, 0=Negative</p>
</dd>
<dt>AdV</dt><dd><p>Results for adenovirus:	1=Positive, 0=Negative</p>
</dd>
<dt>hMPV</dt><dd><p>Results for human metapneumovirus:	1=Positive, 0=Negative</p>
</dd>
<dt>hPIV1</dt><dd><p>Results for human parainfluenzavirus type 1: 1=Positive, 0=Negative</p>
</dd>
<dt>hPIV2</dt><dd><p>Results for human parainfluenzavirus type 2: 1=Positive, 0=Negative</p>
</dd>
<dt>hPIV3</dt><dd><p>Results for human parainfluenzavirus type 3: 1=Positive, 0=Negative</p>
</dd>
<dt>Flu</dt><dd><p>Results for influenza:	1=Positive, 0=Negative</p>
</dd>
</dl>


<h3>Source</h3>

<p><a href="http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0180954">http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0180954</a>
</p>


<h3>References</h3>

<p>Horton, Katherine C. AND Dueger, Erica L. AND Kandeel, Amr AND Abdallat, Mohamed AND El-Kholy, Amani AND Al-Awaidy, Salah AND Kohlani, Abdul Hakim AND Amer, Hanaa AND El-Khal, Abel Latif AND Said, Mayar AND House, Brent AND Pimentel, Guillermo AND Talaat, Maha (2017). Viral etiology, seasonality and severity of hospitalized patients with severe acute respiratory infections in the Eastern Mediterranean Region, 2007-2014. PLOS ONE, 12, 1-17.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
