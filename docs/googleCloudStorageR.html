<!DOCTYPE html><html><head><title>Help for package googleCloudStorageR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {googleCloudStorageR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#gcs_auth'><p>Authenticate with Google Cloud Storage API</p></a></li>
<li><a href='#gcs_compose_objects'><p>Compose up to 32 objects into one</p></a></li>
<li><a href='#gcs_copy_object'><p>Copy an object</p></a></li>
<li><a href='#gcs_create_bucket'><p>Create a new bucket</p></a></li>
<li><a href='#gcs_create_bucket_acl'><p>Create a Bucket Access Controls</p></a></li>
<li><a href='#gcs_create_lifecycle'><p>Create a lifecycle condition</p></a></li>
<li><a href='#gcs_create_pubsub'><p>Create a pub/sub notification for a bucket</p></a></li>
<li><a href='#gcs_delete_bucket'><p>Delete a bucket</p></a></li>
<li><a href='#gcs_delete_object'><p>Delete an object</p></a></li>
<li><a href='#gcs_delete_pubsub'><p>Delete pub/sub notifications for a bucket</p></a></li>
<li><a href='#gcs_download_url'><p>Get the download URL</p></a></li>
<li><a href='#gcs_first'><p>Save your R session to the cloud on startup/exit</p></a></li>
<li><a href='#gcs_get_bucket'><p>Get bucket info</p></a></li>
<li><a href='#gcs_get_bucket_acl'><p>Get Bucket Access Controls</p></a></li>
<li><a href='#gcs_get_global_bucket'><p>Get global bucket name</p></a></li>
<li><a href='#gcs_get_object'><p>Get an object in a bucket directly</p></a></li>
<li><a href='#gcs_get_object_acl'><p>Check the access control settings for an object for one entity</p></a></li>
<li><a href='#gcs_get_service_email'><p>Get the email of service account associated with the bucket</p></a></li>
<li><a href='#gcs_global_bucket'><p>Set global bucket name</p></a></li>
<li><a href='#gcs_list_buckets'><p>List buckets</p></a></li>
<li><a href='#gcs_list_objects'><p>List objects in a bucket</p></a></li>
<li><a href='#gcs_list_pubsub'><p>List pub/sub notifications for a bucket</p></a></li>
<li><a href='#gcs_load'><p>Load .RData objects or sessions from the Google Cloud</p></a></li>
<li><a href='#gcs_metadata_object'><p>Make metadata for an object</p></a></li>
<li><a href='#gcs_parse_download'><p>Parse downloaded objects straight into R</p></a></li>
<li><a href='#gcs_retry_upload'><p>Retry a resumeable upload</p></a></li>
<li><a href='#gcs_save'><p>Save .RData objects to the Google Cloud</p></a></li>
<li><a href='#gcs_save_all'><p>Save/Load all files in directory to Google Cloud Storage</p></a></li>
<li><a href='#gcs_save_image'><p>Save an R session to the Google Cloud</p></a></li>
<li><a href='#gcs_setup'><p>Help set-up googleCloudStorageR</p></a></li>
<li><a href='#gcs_signed_url'><p>Create a signed URL</p></a></li>
<li><a href='#gcs_source'><p>Source an R script from the Google Cloud</p></a></li>
<li><a href='#gcs_update_object_acl'><p>Change access to an object in a bucket</p></a></li>
<li><a href='#gcs_upload'><p>Upload a file of arbitrary type</p></a></li>
<li><a href='#gcs_version_bucket'><p>Change or fetch bucket version status</p></a></li>
<li><a href='#googleCloudStorageR'><p>googleCloudStorageR</p></a></li>
<li><a href='#Object'><p>Object Object</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Version:</td>
<td>0.7.0</td>
</tr>
<tr>
<td>Title:</td>
<td>Interface with Google Cloud Storage API</td>
</tr>
<tr>
<td>Description:</td>
<td>Interact with Google Cloud Storage <a href="https://cloud.google.com/storage/">https://cloud.google.com/storage/</a> 
  API in R. Part of the 'cloudyr' <a href="https://cloudyr.github.io/">https://cloudyr.github.io/</a> project.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://code.markedmondson.me/googleCloudStorageR/">https://code.markedmondson.me/googleCloudStorageR/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/cloudyr/googleCloudStorageR/issues">https://github.com/cloudyr/googleCloudStorageR/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>assertthat (&ge; 0.2.0), cli, curl, googleAuthR (&ge; 1.4.0), httr
(&ge; 1.2.1), jsonlite (&ge; 1.0), openssl, utils, yaml, zip (&ge;
2.0.3)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>fs, googleComputeEngineR, knitr, readr, rmarkdown, sodium,
testthat, usethis</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>false</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-12-15 09:46:05 UTC; mark</td>
</tr>
<tr>
<td>Author:</td>
<td>Mark Edmondson <a href="https://orcid.org/0000-0002-8434-3881"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Mark Edmondson &lt;r@sunholo.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-12-16 09:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='gcs_auth'>Authenticate with Google Cloud Storage API</h2><span id='topic+gcs_auth'></span>

<h3>Description</h3>

<p>Authenticate with Google Cloud Storage API
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_auth(json_file = NULL, token = NULL, email = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_auth_+3A_json_file">json_file</code></td>
<td>
<p>Authentication json file you have downloaded from your Google Project</p>
</td></tr>
<tr><td><code id="gcs_auth_+3A_token">token</code></td>
<td>
<p>An existing authentication token you may have by other means</p>
</td></tr>
<tr><td><code id="gcs_auth_+3A_email">email</code></td>
<td>
<p>The email to default authenticate through</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The best way to authenticate is to use an environment argument pointing at your authentication file, making this function unnecessary.
</p>
<p>Set the file location of your download Google Project JSON file in a <code>GCS_AUTH_FILE</code> argument
</p>
<p>Then, when you load the library you should auto-authenticate
</p>
<p>However, you can authenticate directly using this function pointing at your JSON auth file.  You will still need the two JSON files - the client JSON and the authentication key JSON.  <a href="#topic+gcs_setup">gcs_setup</a> can help set-up the latter, the client JSON you will need to download from your Google Cloud Project.
</p>
<p>If using JSON files from another source, ensure it has either <code>"https://www.googleapis.com/auth/devstorage.full_control" or "https://www.googleapis.com/auth/cloud-platform"</code> scopes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# on first run, generate a auth key via gcs_setup()

# the json file for the auth key you are using
library(googleCloudStorageR)
gcs_auth("location_of_json_file.json")

#' # to use your own Google Cloud Project credentials
# go to GCP console and download client credentials JSON 
# ideally set this in .Renviron file, not here but just for demonstration
Sys.setenv("GAR_CLIENT_JSON" = "location/of/file.json")
library(googleCloudStorageR)
# should now be able to log in via your own GCP project
gcs_auth()

# reauthentication
# Once you have authenticated, set email to skip the interactive message
gcs_auth(email = "my@email.com")

# or leave unset to bring up menu on which email to auth with
gcs_auth()
# The googleCLoudStorageR package is requesting access to your Google account. 
# Select a pre-authorised account or enter '0' to obtain a new token.
# Press Esc/Ctrl + C to abort.
#1: my@email.com
#2: work@mybusiness.com
# you can set authentication for many emails, then switch between them e.g.
gcs_auth(email = "my@email.com")
gcs_list_buckets("my-project") # lists what buckets you have access to
gcs_auth(email = "work@mybusiness.com") 
gcs_list_buckets("my-project") # lists second set of buckets


## End(Not run)
</code></pre>

<hr>
<h2 id='gcs_compose_objects'>Compose up to 32 objects into one</h2><span id='topic+gcs_compose_objects'></span>

<h3>Description</h3>

<p>This merges objects stored on Cloud Storage into one object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_compose_objects(objects, destination, bucket = gcs_get_global_bucket())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_compose_objects_+3A_objects">objects</code></td>
<td>
<p>A character vector of object names to combine</p>
</td></tr>
<tr><td><code id="gcs_compose_objects_+3A_destination">destination</code></td>
<td>
<p>Name of the new object.</p>
</td></tr>
<tr><td><code id="gcs_compose_objects_+3A_bucket">bucket</code></td>
<td>
<p>The bucket where the objects sit</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object metadata
</p>


<h3>See Also</h3>

<p><a href="https://cloud.google.com/storage/docs/json_api/v1/objects/compose">Compose objects</a>
</p>
<p>Other object functions: 
<code><a href="#topic+gcs_copy_object">gcs_copy_object</a>()</code>,
<code><a href="#topic+gcs_delete_object">gcs_delete_object</a>()</code>,
<code><a href="#topic+gcs_get_object">gcs_get_object</a>()</code>,
<code><a href="#topic+gcs_list_objects">gcs_list_objects</a>()</code>,
<code><a href="#topic+gcs_metadata_object">gcs_metadata_object</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
 gcs_global_bucket("your-bucket")
 objs &lt;- gcs_list_objects()
 
 compose_me &lt;- objs$name[1:30]
 
 gcs_compose_objects(compose_me, "composed/test.json")


## End(Not run)
</code></pre>

<hr>
<h2 id='gcs_copy_object'>Copy an object</h2><span id='topic+gcs_copy_object'></span>

<h3>Description</h3>

<p>Copies an object to a new destination
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_copy_object(
  source_object,
  destination_object,
  source_bucket = gcs_get_global_bucket(),
  destination_bucket = gcs_get_global_bucket(),
  rewriteToken = NULL,
  destinationPredefinedAcl = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_copy_object_+3A_source_object">source_object</code></td>
<td>
<p>The name of the object to copy, or a <code>gs://</code> URL</p>
</td></tr>
<tr><td><code id="gcs_copy_object_+3A_destination_object">destination_object</code></td>
<td>
<p>The name of where to copy the object to, or a <code>gs://</code> URL</p>
</td></tr>
<tr><td><code id="gcs_copy_object_+3A_source_bucket">source_bucket</code></td>
<td>
<p>The bucket of the source object</p>
</td></tr>
<tr><td><code id="gcs_copy_object_+3A_destination_bucket">destination_bucket</code></td>
<td>
<p>The bucket of the destination</p>
</td></tr>
<tr><td><code id="gcs_copy_object_+3A_rewritetoken">rewriteToken</code></td>
<td>
<p>Include this field (from the previous rewrite response) on each rewrite request after the first one, until the rewrite response 'done' flag is true.</p>
</td></tr>
<tr><td><code id="gcs_copy_object_+3A_destinationpredefinedacl">destinationPredefinedAcl</code></td>
<td>
<p>Apply a predefined set of access controls to the destination object. If not NULL must be one of the predefined access controls such as <code>"bucketOwnerFullControl"</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>If successful, a rewrite object.
</p>


<h3>See Also</h3>

<p>Other object functions: 
<code><a href="#topic+gcs_compose_objects">gcs_compose_objects</a>()</code>,
<code><a href="#topic+gcs_delete_object">gcs_delete_object</a>()</code>,
<code><a href="#topic+gcs_get_object">gcs_get_object</a>()</code>,
<code><a href="#topic+gcs_list_objects">gcs_list_objects</a>()</code>,
<code><a href="#topic+gcs_metadata_object">gcs_metadata_object</a>()</code>
</p>

<hr>
<h2 id='gcs_create_bucket'>Create a new bucket</h2><span id='topic+gcs_create_bucket'></span>

<h3>Description</h3>

<p>Create a new bucket in your project
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_create_bucket(
  name,
  projectId,
  location = "US",
  storageClass = c("MULTI_REGIONAL", "REGIONAL", "STANDARD", "NEARLINE", "COLDLINE",
    "DURABLE_REDUCED_AVAILABILITY"),
  predefinedAcl = c("projectPrivate", "authenticatedRead", "private", "publicRead",
    "publicReadWrite"),
  predefinedDefaultObjectAcl = c("bucketOwnerFullControl", "bucketOwnerRead",
    "authenticatedRead", "private", "projectPrivate", "publicRead"),
  projection = c("noAcl", "full"),
  versioning = FALSE,
  lifecycle = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_create_bucket_+3A_name">name</code></td>
<td>
<p>Globally unique name of bucket to create</p>
</td></tr>
<tr><td><code id="gcs_create_bucket_+3A_projectid">projectId</code></td>
<td>
<p>A valid Google project id</p>
</td></tr>
<tr><td><code id="gcs_create_bucket_+3A_location">location</code></td>
<td>
<p>Location of bucket. See details</p>
</td></tr>
<tr><td><code id="gcs_create_bucket_+3A_storageclass">storageClass</code></td>
<td>
<p>Type of bucket</p>
</td></tr>
<tr><td><code id="gcs_create_bucket_+3A_predefinedacl">predefinedAcl</code></td>
<td>
<p>Apply predefined access controls to bucket</p>
</td></tr>
<tr><td><code id="gcs_create_bucket_+3A_predefineddefaultobjectacl">predefinedDefaultObjectAcl</code></td>
<td>
<p>Apply predefined access controls to objects</p>
</td></tr>
<tr><td><code id="gcs_create_bucket_+3A_projection">projection</code></td>
<td>
<p>Properties to return. Default noAcl omits acl properties</p>
</td></tr>
<tr><td><code id="gcs_create_bucket_+3A_versioning">versioning</code></td>
<td>
<p>Set if the bucket supports versioning of its objects</p>
</td></tr>
<tr><td><code id="gcs_create_bucket_+3A_lifecycle">lifecycle</code></td>
<td>
<p>A list of <a href="#topic+gcs_create_lifecycle">gcs_create_lifecycle</a> objects</p>
</td></tr>
</table>


<h3>Details</h3>

<p><a href="https://cloud.google.com/storage/docs/locations">See here for details on location options</a>
</p>


<h3>See Also</h3>

<p>Other bucket functions: 
<code><a href="#topic+gcs_create_lifecycle">gcs_create_lifecycle</a>()</code>,
<code><a href="#topic+gcs_delete_bucket">gcs_delete_bucket</a>()</code>,
<code><a href="#topic+gcs_get_bucket">gcs_get_bucket</a>()</code>,
<code><a href="#topic+gcs_get_global_bucket">gcs_get_global_bucket</a>()</code>,
<code><a href="#topic+gcs_global_bucket">gcs_global_bucket</a>()</code>,
<code><a href="#topic+gcs_list_buckets">gcs_list_buckets</a>()</code>
</p>

<hr>
<h2 id='gcs_create_bucket_acl'>Create a Bucket Access Controls</h2><span id='topic+gcs_create_bucket_acl'></span>

<h3>Description</h3>

<p>Create a new access control at the bucket level
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_create_bucket_acl(
  bucket = gcs_get_global_bucket(),
  entity = "",
  entity_type = c("user", "group", "domain", "project", "allUsers",
    "allAuthenticatedUsers"),
  role = c("READER", "OWNER")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_create_bucket_acl_+3A_bucket">bucket</code></td>
<td>
<p>Name of a bucket, or a bucket object returned by <a href="#topic+gcs_create_bucket">gcs_create_bucket</a></p>
</td></tr>
<tr><td><code id="gcs_create_bucket_acl_+3A_entity">entity</code></td>
<td>
<p>The entity holding the permission. Not needed for entity_type <code>allUsers</code> or <code>allAuthenticatedUsers</code></p>
</td></tr>
<tr><td><code id="gcs_create_bucket_acl_+3A_entity_type">entity_type</code></td>
<td>
<p>what type of entity</p>
</td></tr>
<tr><td><code id="gcs_create_bucket_acl_+3A_role">role</code></td>
<td>
<p>Access permission for entity
</p>
<p>Used also for when a bucket is updated</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Bucket access control object
</p>


<h3>See Also</h3>

<p>Other Access control functions: 
<code><a href="#topic+gcs_get_bucket_acl">gcs_get_bucket_acl</a>()</code>,
<code><a href="#topic+gcs_get_object_acl">gcs_get_object_acl</a>()</code>,
<code><a href="#topic+gcs_update_object_acl">gcs_update_object_acl</a>()</code>
</p>

<hr>
<h2 id='gcs_create_lifecycle'>Create a lifecycle condition</h2><span id='topic+gcs_create_lifecycle'></span>

<h3>Description</h3>

<p>Use this to set rules for how long objects last in a bucket in <a href="#topic+gcs_create_bucket">gcs_create_bucket</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_create_lifecycle(
  age = NULL,
  createdBefore = NULL,
  numNewerVersions = NULL,
  isLive = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_create_lifecycle_+3A_age">age</code></td>
<td>
<p>Age in days before objects are deleted</p>
</td></tr>
<tr><td><code id="gcs_create_lifecycle_+3A_createdbefore">createdBefore</code></td>
<td>
<p>Deletes all objects before this date</p>
</td></tr>
<tr><td><code id="gcs_create_lifecycle_+3A_numnewerversions">numNewerVersions</code></td>
<td>
<p>Deletes all newer versions of this object</p>
</td></tr>
<tr><td><code id="gcs_create_lifecycle_+3A_islive">isLive</code></td>
<td>
<p>If TRUE deletes all live objects, if FALSE deletes all archived versions
</p>
<p><code>numNewerVersions</code> and <code>isLive</code> works only for buckets with object versioning
</p>
<p>For multiple conditions, pass this object in as a list.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Lifecycle documentation <a href="https://cloud.google.com/storage/docs/lifecycle">https://cloud.google.com/storage/docs/lifecycle</a>
</p>
<p>Other bucket functions: 
<code><a href="#topic+gcs_create_bucket">gcs_create_bucket</a>()</code>,
<code><a href="#topic+gcs_delete_bucket">gcs_delete_bucket</a>()</code>,
<code><a href="#topic+gcs_get_bucket">gcs_get_bucket</a>()</code>,
<code><a href="#topic+gcs_get_global_bucket">gcs_get_global_bucket</a>()</code>,
<code><a href="#topic+gcs_global_bucket">gcs_global_bucket</a>()</code>,
<code><a href="#topic+gcs_list_buckets">gcs_list_buckets</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  lifecycle &lt;- gcs_create_lifecycle(age = 30)
  
  gcs_create_bucket("your-bucket-lifecycle",
                     projectId = "your-project",
                     location = "EUROPE-NORTH1",
                     storageClass = "REGIONAL",
                     lifecycle = list(lifecycle))



## End(Not run)
</code></pre>

<hr>
<h2 id='gcs_create_pubsub'>Create a pub/sub notification for a bucket</h2><span id='topic+gcs_create_pubsub'></span>

<h3>Description</h3>

<p>Add a notification configuration that sends notifications for all supported events.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_create_pubsub(
  topic,
  project,
  bucket = gcs_get_global_bucket(),
  event_types = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_create_pubsub_+3A_topic">topic</code></td>
<td>
<p>The pub/sub topic name</p>
</td></tr>
<tr><td><code id="gcs_create_pubsub_+3A_project">project</code></td>
<td>
<p>The project-id that has the pub/sub topic</p>
</td></tr>
<tr><td><code id="gcs_create_pubsub_+3A_bucket">bucket</code></td>
<td>
<p>The bucket for notifications</p>
</td></tr>
<tr><td><code id="gcs_create_pubsub_+3A_event_types">event_types</code></td>
<td>
<p>What events to activate, leave at default for all</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Cloud Pub/Sub notifications allow you to track changes to your Cloud Storage objects.
As a minimum you wil need: the Cloud Pub/Sub API activated for the project;
sufficient permissions on the bucket you wish to monitor;
sufficient permissions on the project to receive notifications;
an existing pub/sub topic;
have given your service account at least <code>pubsub.publisher</code> permission.
</p>


<h3>See Also</h3>

<p><a href="https://cloud.google.com/storage/docs/reporting-changes">https://cloud.google.com/storage/docs/reporting-changes</a>
</p>
<p>Other pubsub functions: 
<code><a href="#topic+gcs_delete_pubsub">gcs_delete_pubsub</a>()</code>,
<code><a href="#topic+gcs_get_service_email">gcs_get_service_email</a>()</code>,
<code><a href="#topic+gcs_list_pubsub">gcs_list_pubsub</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

project &lt;- "myproject"
bucket &lt;- "mybucket"

# get the email to give access
gcs_get_service_email(project)

# once email has access, create a new pub/sub topic for your bucket
gcs_create_pubsub("gcs_r", project, bucket)


## End(Not run)


</code></pre>

<hr>
<h2 id='gcs_delete_bucket'>Delete a bucket</h2><span id='topic+gcs_delete_bucket'></span><span id='topic+gcs_delete_bucket_objects'></span>

<h3>Description</h3>

<p>Delete the bucket, and all its objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_delete_bucket(
  bucket,
  ifMetagenerationMatch = NULL,
  ifMetagenerationNotMatch = NULL,
  force_delete = FALSE
)

gcs_delete_bucket_objects(bucket, include_versions = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_delete_bucket_+3A_bucket">bucket</code></td>
<td>
<p>Name of the bucket, or a bucket object</p>
</td></tr>
<tr><td><code id="gcs_delete_bucket_+3A_ifmetagenerationmatch">ifMetagenerationMatch</code></td>
<td>
<p>Delete only if metageneration matches</p>
</td></tr>
<tr><td><code id="gcs_delete_bucket_+3A_ifmetagenerationnotmatch">ifMetagenerationNotMatch</code></td>
<td>
<p>Delete only if metageneration does not match</p>
</td></tr>
<tr><td><code id="gcs_delete_bucket_+3A_force_delete">force_delete</code></td>
<td>
<p>If the bucket contains objects it will prevent deletion, including objects in a versioned bucket that previously existed.  Setting this to TRUE will force deletion of those objects before deleting the bucket itself.</p>
</td></tr>
<tr><td><code id="gcs_delete_bucket_+3A_include_versions">include_versions</code></td>
<td>
<p>Whether to include all historic versions of the objects to delete</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="#topic+gcs_delete_object">gcs_delete_object</a>
</p>
<p>Other bucket functions: 
<code><a href="#topic+gcs_create_bucket">gcs_create_bucket</a>()</code>,
<code><a href="#topic+gcs_create_lifecycle">gcs_create_lifecycle</a>()</code>,
<code><a href="#topic+gcs_get_bucket">gcs_get_bucket</a>()</code>,
<code><a href="#topic+gcs_get_global_bucket">gcs_get_global_bucket</a>()</code>,
<code><a href="#topic+gcs_global_bucket">gcs_global_bucket</a>()</code>,
<code><a href="#topic+gcs_list_buckets">gcs_list_buckets</a>()</code>
</p>

<hr>
<h2 id='gcs_delete_object'>Delete an object</h2><span id='topic+gcs_delete_object'></span>

<h3>Description</h3>

<p>Deletes an object from a bucket
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_delete_object(
  object_name,
  bucket = gcs_get_global_bucket(),
  generation = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_delete_object_+3A_object_name">object_name</code></td>
<td>
<p>Object to be deleted, or a <code>gs://</code> URL</p>
</td></tr>
<tr><td><code id="gcs_delete_object_+3A_bucket">bucket</code></td>
<td>
<p>Bucket to delete object from</p>
</td></tr>
<tr><td><code id="gcs_delete_object_+3A_generation">generation</code></td>
<td>
<p>If present, deletes a specific version.
</p>
<p>Default if <code>generation</code> is NULL is to delete the latest version.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If successful, TRUE.
</p>


<h3>See Also</h3>

<p>To delete all objects in a bucket see <a href="#topic+gcs_delete_bucket_objects">gcs_delete_bucket_objects</a>
</p>
<p>Other object functions: 
<code><a href="#topic+gcs_compose_objects">gcs_compose_objects</a>()</code>,
<code><a href="#topic+gcs_copy_object">gcs_copy_object</a>()</code>,
<code><a href="#topic+gcs_get_object">gcs_get_object</a>()</code>,
<code><a href="#topic+gcs_list_objects">gcs_list_objects</a>()</code>,
<code><a href="#topic+gcs_metadata_object">gcs_metadata_object</a>()</code>
</p>

<hr>
<h2 id='gcs_delete_pubsub'>Delete pub/sub notifications for a bucket</h2><span id='topic+gcs_delete_pubsub'></span>

<h3>Description</h3>

<p>Delete notification configurations for a bucket.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_delete_pubsub(config_name, bucket = gcs_get_global_bucket())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_delete_pubsub_+3A_config_name">config_name</code></td>
<td>
<p>The ID of the pubsub configuration</p>
</td></tr>
<tr><td><code id="gcs_delete_pubsub_+3A_bucket">bucket</code></td>
<td>
<p>The bucket for notifications</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Cloud Pub/Sub notifications allow you to track changes to your Cloud Storage objects.
As a minimum you wil need: the Cloud Pub/Sub API activated for the project;
sufficient permissions on the bucket you wish to monitor;
sufficient permissions on the project to receive notifications;
an existing pub/sub topic; have given your service account at least <code>pubsub.publisher</code> permission.
</p>


<h3>Value</h3>

<p>TRUE if successful
</p>


<h3>See Also</h3>

<p><a href="https://cloud.google.com/storage/docs/reporting-changes">https://cloud.google.com/storage/docs/reporting-changes</a>
</p>
<p>Other pubsub functions: 
<code><a href="#topic+gcs_create_pubsub">gcs_create_pubsub</a>()</code>,
<code><a href="#topic+gcs_get_service_email">gcs_get_service_email</a>()</code>,
<code><a href="#topic+gcs_list_pubsub">gcs_list_pubsub</a>()</code>
</p>

<hr>
<h2 id='gcs_download_url'>Get the download URL</h2><span id='topic+gcs_download_url'></span>

<h3>Description</h3>

<p>Create the download URL for objects in buckets
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_download_url(object_name, bucket = gcs_get_global_bucket(), public = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_download_url_+3A_object_name">object_name</code></td>
<td>
<p>A vector of object names</p>
</td></tr>
<tr><td><code id="gcs_download_url_+3A_bucket">bucket</code></td>
<td>
<p>A vector of bucket names</p>
</td></tr>
<tr><td><code id="gcs_download_url_+3A_public">public</code></td>
<td>
<p>TRUE to return a public URL</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>bucket</code> names should be length 1 or same length as <code>object_name</code>
</p>
<p>Download URLs can be either authenticated behind a login that you may need to update
access for via <a href="#topic+gcs_update_object_acl">gcs_update_object_acl</a>, or public to all if their <code>predefinedAcl = 'publicRead'</code>
</p>
<p>Use the <code>public = TRUE</code> to return the URL accessible to all, which changes the domain name from
<code>storage.cloud.google.com</code> to <code>storage.googleapis.com</code>
</p>


<h3>Value</h3>

<p>the URL for downloading objects
</p>


<h3>See Also</h3>

<p>Other download functions: 
<code><a href="#topic+gcs_parse_download">gcs_parse_download</a>()</code>,
<code><a href="#topic+gcs_signed_url">gcs_signed_url</a>()</code>
</p>

<hr>
<h2 id='gcs_first'>Save your R session to the cloud on startup/exit</h2><span id='topic+gcs_first'></span><span id='topic+gcs_last'></span>

<h3>Description</h3>

<p>Place within your <code>.Rprofile</code> to load and save your session data automatically
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_first(bucket = Sys.getenv("GCS_SESSION_BUCKET"))

gcs_last(bucket = Sys.getenv("GCS_SESSION_BUCKET"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_first_+3A_bucket">bucket</code></td>
<td>
<p>The bucket holding your session data. See Details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The folder you want to save to Google Cloud Storage will also need to have a yaml file called <code>_gcssave.yaml</code> in the root of the directory.  It can hold the following arguments:
</p>

<ul>
<li><p> [Required] <code>bucket</code> - the GCS bucket to save to
</p>
</li>
<li><p> [Optional] <code>loaddir</code> - if the folder name is different to the current, where to load the R session from
</p>
</li>
<li><p> [Optional] <code>pattern</code> - a regex of what files to save at the end of the session
</p>
</li>
<li><p> [Optional] <code>load_on_startup</code> - if <code>FALSE</code> will not attempt to load on startup
</p>
</li></ul>

<p>The bucket name is also set via the environment arg <code>GCE_SESSION_BUCKET</code>. The yaml bucket name will take precedence if both are set.
</p>
<p>The folder is named on GCS the full working path to the working directory e.g. <code>/Users/mark/dev/your-r-project</code> which is what is looked for on startup.  If you create a new R project with the same filepath and bucket as an existing saved set, the files will download automatically when you load R from that folder (when starting an RStudio project).
</p>
<p>If you load from a different filepath (e.g. with <code>loadir</code> set in yaml), when you exit and save the files will be saved under your new present working directory.
</p>
<p>Files with the same name will not be overwritten.  If you want them to be, delete or rename them then reload the R session.
</p>
<p>This function does not act like git, or intended as a replacement - its main use is imagined to be for using RStudio Server within disposable Docker containers on Google Cloud Engine (e.g. via <code>googleComputeEngineR</code>)
</p>
<p>For authentication for GCS,
the easiest way is to make sure your authentication file is
available in environment file <code>GCS_AUTH_FILE</code>,
or if on Google Compute Engine it will reuse the Google Cloud authentication
via <a href="googleAuthR.html#topic+gar_gce_auth">gar_gce_auth</a>
</p>


<h3>See Also</h3>

<p><a href="#topic+gcs_save_all">gcs_save_all</a> and <a href="#topic+gcs_load_all">gcs_load_all</a> that these functions call
</p>
<p><a href="#topic+gcs_save_all">gcs_save_all</a> and <a href="#topic+gcs_load_all">gcs_load_all</a> that these functions call
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

.First &lt;- function(){
  googleCloudStorageR::gcs_first()
}


.Last &lt;- function(){
  googleCloudStorageR::gcs_last()
}



## End(Not run)

</code></pre>

<hr>
<h2 id='gcs_get_bucket'>Get bucket info</h2><span id='topic+gcs_get_bucket'></span>

<h3>Description</h3>

<p>Meta data about the bucket
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_get_bucket(
  bucket = gcs_get_global_bucket(),
  ifMetagenerationMatch = NULL,
  ifMetagenerationNotMatch = NULL,
  projection = c("noAcl", "full")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_get_bucket_+3A_bucket">bucket</code></td>
<td>
<p>Name of a bucket, or a bucket object returned by <a href="#topic+gcs_create_bucket">gcs_create_bucket</a></p>
</td></tr>
<tr><td><code id="gcs_get_bucket_+3A_ifmetagenerationmatch">ifMetagenerationMatch</code></td>
<td>
<p>Return only if metageneration matches</p>
</td></tr>
<tr><td><code id="gcs_get_bucket_+3A_ifmetagenerationnotmatch">ifMetagenerationNotMatch</code></td>
<td>
<p>Return only if metageneration does not match</p>
</td></tr>
<tr><td><code id="gcs_get_bucket_+3A_projection">projection</code></td>
<td>
<p>Properties to return. Default noAcl omits acl properties</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A bucket resource object
</p>


<h3>See Also</h3>

<p>Other bucket functions: 
<code><a href="#topic+gcs_create_bucket">gcs_create_bucket</a>()</code>,
<code><a href="#topic+gcs_create_lifecycle">gcs_create_lifecycle</a>()</code>,
<code><a href="#topic+gcs_delete_bucket">gcs_delete_bucket</a>()</code>,
<code><a href="#topic+gcs_get_global_bucket">gcs_get_global_bucket</a>()</code>,
<code><a href="#topic+gcs_global_bucket">gcs_global_bucket</a>()</code>,
<code><a href="#topic+gcs_list_buckets">gcs_list_buckets</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

buckets &lt;- gcs_list_buckets("your-project")

## use the name of the bucket to get more meta data
bucket_meta &lt;- gcs_get_bucket(buckets$name[[1]])


## End(Not run)

</code></pre>

<hr>
<h2 id='gcs_get_bucket_acl'>Get Bucket Access Controls</h2><span id='topic+gcs_get_bucket_acl'></span>

<h3>Description</h3>

<p>Returns the ACL entry for the specified entity on the specified bucket
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_get_bucket_acl(
  bucket = gcs_get_global_bucket(),
  entity = "",
  entity_type = c("user", "group", "domain", "project", "allUsers",
    "allAuthenticatedUsers")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_get_bucket_acl_+3A_bucket">bucket</code></td>
<td>
<p>Name of a bucket, or a bucket object returned by <a href="#topic+gcs_create_bucket">gcs_create_bucket</a></p>
</td></tr>
<tr><td><code id="gcs_get_bucket_acl_+3A_entity">entity</code></td>
<td>
<p>The entity holding the permission. Not needed for entity_type <code>allUsers</code> or <code>allAuthenticatedUsers</code></p>
</td></tr>
<tr><td><code id="gcs_get_bucket_acl_+3A_entity_type">entity_type</code></td>
<td>
<p>what type of entity
</p>
<p>Used also for when a bucket is updated</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Bucket access control object
</p>


<h3>See Also</h3>

<p>Other Access control functions: 
<code><a href="#topic+gcs_create_bucket_acl">gcs_create_bucket_acl</a>()</code>,
<code><a href="#topic+gcs_get_object_acl">gcs_get_object_acl</a>()</code>,
<code><a href="#topic+gcs_update_object_acl">gcs_update_object_acl</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

buck_meta &lt;- gcs_get_bucket(projection = "full")

acl &lt;- gcs_get_bucket_acl(entity_type = "project",
                          entity = gsub("project-","",
                                        buck_meta$acl$entity[[1]]))


## End(Not run)
</code></pre>

<hr>
<h2 id='gcs_get_global_bucket'>Get global bucket name</h2><span id='topic+gcs_get_global_bucket'></span>

<h3>Description</h3>

<p>Bucket name set this session to use by default
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_get_global_bucket()
</code></pre>


<h3>Details</h3>

<p>Set the bucket name via <a href="#topic+gcs_global_bucket">gcs_global_bucket</a>
</p>


<h3>Value</h3>

<p>Bucket name
</p>


<h3>See Also</h3>

<p>Other bucket functions: 
<code><a href="#topic+gcs_create_bucket">gcs_create_bucket</a>()</code>,
<code><a href="#topic+gcs_create_lifecycle">gcs_create_lifecycle</a>()</code>,
<code><a href="#topic+gcs_delete_bucket">gcs_delete_bucket</a>()</code>,
<code><a href="#topic+gcs_get_bucket">gcs_get_bucket</a>()</code>,
<code><a href="#topic+gcs_global_bucket">gcs_global_bucket</a>()</code>,
<code><a href="#topic+gcs_list_buckets">gcs_list_buckets</a>()</code>
</p>

<hr>
<h2 id='gcs_get_object'>Get an object in a bucket directly</h2><span id='topic+gcs_get_object'></span>

<h3>Description</h3>

<p>This retrieves an object directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_get_object(
  object_name,
  bucket = gcs_get_global_bucket(),
  meta = FALSE,
  saveToDisk = NULL,
  overwrite = FALSE,
  parseObject = TRUE,
  parseFunction = gcs_parse_download,
  generation = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_get_object_+3A_object_name">object_name</code></td>
<td>
<p>name of object in the bucket that will be URL encoded, or a <code>gs://</code> URL</p>
</td></tr>
<tr><td><code id="gcs_get_object_+3A_bucket">bucket</code></td>
<td>
<p>bucket containing the objects. Not needed if using a <code>gs://</code> URL</p>
</td></tr>
<tr><td><code id="gcs_get_object_+3A_meta">meta</code></td>
<td>
<p>If TRUE then get info about the object, not the object itself</p>
</td></tr>
<tr><td><code id="gcs_get_object_+3A_savetodisk">saveToDisk</code></td>
<td>
<p>Specify a filename to save directly to disk</p>
</td></tr>
<tr><td><code id="gcs_get_object_+3A_overwrite">overwrite</code></td>
<td>
<p>If saving to a file, whether to overwrite it</p>
</td></tr>
<tr><td><code id="gcs_get_object_+3A_parseobject">parseObject</code></td>
<td>
<p>If saveToDisk is NULL, whether to parse with <code>parseFunction</code></p>
</td></tr>
<tr><td><code id="gcs_get_object_+3A_parsefunction">parseFunction</code></td>
<td>
<p>If saveToDisk is NULL, the function that will parse the download.  Defaults to <a href="#topic+gcs_parse_download">gcs_parse_download</a></p>
</td></tr>
<tr><td><code id="gcs_get_object_+3A_generation">generation</code></td>
<td>
<p>The generation number for the noncurrent version, if you have object versioning enabled in your bucket e.g. <code>"1560468815691234"</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This differs from providing downloads via a download link as you can
do via <a href="#topic+gcs_download_url">gcs_download_url</a>
</p>
<p><code>object_name</code> can use a <code>gs://</code> URI instead,
in which case it will take the bucket name from that URI and <code>bucket</code> argument
will be overridden.  The URLs should be in the form <code>gs://bucket/object/name</code>
</p>
<p>By default if you want to get the object straight into an R session the parseFunction is <a href="#topic+gcs_parse_download">gcs_parse_download</a> which wraps <code>httr</code>'s <a href="httr.html#topic+content">content</a>.
</p>
<p>If you want to use your own function (say to unzip the object) then supply it here.  The first argument should take the downloaded object.
</p>


<h3>Value</h3>

<p>The object, or TRUE if successfully saved to disk.
</p>


<h3>See Also</h3>

<p>Other object functions: 
<code><a href="#topic+gcs_compose_objects">gcs_compose_objects</a>()</code>,
<code><a href="#topic+gcs_copy_object">gcs_copy_object</a>()</code>,
<code><a href="#topic+gcs_delete_object">gcs_delete_object</a>()</code>,
<code><a href="#topic+gcs_list_objects">gcs_list_objects</a>()</code>,
<code><a href="#topic+gcs_metadata_object">gcs_metadata_object</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

## something to download
## data.frame that defaults to be called "mtcars.csv"
gcs_upload(mtcars)

## get the mtcars csv from GCS, convert it to an R obj
gcs_get_object("mtcars.csv")

## get the mtcars csv from GCS, save it to disk
gcs_get_object("mtcars.csv", saveToDisk = "mtcars.csv")


## default gives a warning about missing column name.
## custom parse function to suppress warning
f &lt;- function(object){
  suppressWarnings(httr::content(object, encoding = "UTF-8"))
}

## get mtcars csv with custom parse function.
gcs_get_object("mtcars.csv", parseFunction = f)

## download an RDS file using helper gcs_parse_rds()

gcs_get_object("obj.rds", parseFunction = gcs_parse_rds)

## to download from a folder in your bucket
my_folder &lt;- "your_folder/"
objs &lt;- gcs_list_objects(prefix = my_folder)

dir.create(my_folder)

# download all the objects to that folder
dls &lt;- lapply(objs$name, function(x) gcs_get_object(x, saveToDisk = x))



## End(Not run)

</code></pre>

<hr>
<h2 id='gcs_get_object_acl'>Check the access control settings for an object for one entity</h2><span id='topic+gcs_get_object_acl'></span>

<h3>Description</h3>

<p>Returns the default object ACL entry for the specified entity on the specified bucket.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_get_object_acl(
  object_name,
  bucket = gcs_get_global_bucket(),
  entity = "",
  entity_type = c("user", "group", "domain", "project", "allUsers",
    "allAuthenticatedUsers"),
  generation = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_get_object_acl_+3A_object_name">object_name</code></td>
<td>
<p>Name of the object</p>
</td></tr>
<tr><td><code id="gcs_get_object_acl_+3A_bucket">bucket</code></td>
<td>
<p>Name of a bucket</p>
</td></tr>
<tr><td><code id="gcs_get_object_acl_+3A_entity">entity</code></td>
<td>
<p>The entity holding the permission. Not needed for entity_type <code>allUsers</code> or <code>allAuthenticatedUsers</code></p>
</td></tr>
<tr><td><code id="gcs_get_object_acl_+3A_entity_type">entity_type</code></td>
<td>
<p>The type of entity</p>
</td></tr>
<tr><td><code id="gcs_get_object_acl_+3A_generation">generation</code></td>
<td>
<p>If present, selects a spcfic revision of the object</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other Access control functions: 
<code><a href="#topic+gcs_create_bucket_acl">gcs_create_bucket_acl</a>()</code>,
<code><a href="#topic+gcs_get_bucket_acl">gcs_get_bucket_acl</a>()</code>,
<code><a href="#topic+gcs_update_object_acl">gcs_update_object_acl</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

# single user
gcs_update_object_acl("mtcars.csv", 
     bucket = gcs_get_global_bucket(),
     entity = "joe@blogs.com",
     entity_type = "user"))
     
acl &lt;- gcs_get_object_acl("mtcars.csv", entity = "joe@blogs.com")

# all users
gcs_update_object_acl("mtcars.csv", 
    bucket = gcs_get_global_bucket(),
    entity_type = "allUsers"))
    
acl &lt;- gcs_get_object_acl("mtcars.csv", entity_type = "allUsers")



## End(Not run)
</code></pre>

<hr>
<h2 id='gcs_get_service_email'>Get the email of service account associated with the bucket</h2><span id='topic+gcs_get_service_email'></span>

<h3>Description</h3>

<p>Use this to get the right email so you can give it <code>pubsub.publisher</code> permission.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_get_service_email(project)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_get_service_email_+3A_project">project</code></td>
<td>
<p>The project name containing the bucket</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This service email can be different from the email in the service JSON.  Give this
<code>pubsub.publisher</code> permission in the Google cloud console.
</p>


<h3>See Also</h3>

<p>Other pubsub functions: 
<code><a href="#topic+gcs_create_pubsub">gcs_create_pubsub</a>()</code>,
<code><a href="#topic+gcs_delete_pubsub">gcs_delete_pubsub</a>()</code>,
<code><a href="#topic+gcs_list_pubsub">gcs_list_pubsub</a>()</code>
</p>

<hr>
<h2 id='gcs_global_bucket'>Set global bucket name</h2><span id='topic+gcs_global_bucket'></span>

<h3>Description</h3>

<p>Set a bucket name used for this R session
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_global_bucket(bucket)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_global_bucket_+3A_bucket">bucket</code></td>
<td>
<p>bucket name you want this session to use by default, or a bucket object</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This sets a bucket to a global environment value so you don't need to
supply the bucket argument to other API calls.
</p>


<h3>Value</h3>

<p>The bucket name (invisibly)
</p>


<h3>See Also</h3>

<p>Other bucket functions: 
<code><a href="#topic+gcs_create_bucket">gcs_create_bucket</a>()</code>,
<code><a href="#topic+gcs_create_lifecycle">gcs_create_lifecycle</a>()</code>,
<code><a href="#topic+gcs_delete_bucket">gcs_delete_bucket</a>()</code>,
<code><a href="#topic+gcs_get_bucket">gcs_get_bucket</a>()</code>,
<code><a href="#topic+gcs_get_global_bucket">gcs_get_global_bucket</a>()</code>,
<code><a href="#topic+gcs_list_buckets">gcs_list_buckets</a>()</code>
</p>

<hr>
<h2 id='gcs_list_buckets'>List buckets</h2><span id='topic+gcs_list_buckets'></span>

<h3>Description</h3>

<p>List the buckets your projectId has access to
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_list_buckets(
  projectId,
  prefix = "",
  projection = c("noAcl", "full"),
  maxResults = 1000,
  detail = c("summary", "full")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_list_buckets_+3A_projectid">projectId</code></td>
<td>
<p>Project containing buckets to list</p>
</td></tr>
<tr><td><code id="gcs_list_buckets_+3A_prefix">prefix</code></td>
<td>
<p>Filter results to names beginning with this prefix</p>
</td></tr>
<tr><td><code id="gcs_list_buckets_+3A_projection">projection</code></td>
<td>
<p>Properties to return. Default noAcl omits acl properties</p>
</td></tr>
<tr><td><code id="gcs_list_buckets_+3A_maxresults">maxResults</code></td>
<td>
<p>Max number of results</p>
</td></tr>
<tr><td><code id="gcs_list_buckets_+3A_detail">detail</code></td>
<td>
<p>Set level of detail</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Columns returned by <code>detail</code> are:
</p>

<ul>
<li> <p><code>summary</code> - name, storageClass, location ,updated
</p>
</li>
<li> <p><code>full</code> - as above plus: id, selfLink, projectNumber, timeCreated, metageneration, etag
</p>
</li></ul>



<h3>Value</h3>

<p><code>data.frame</code> of buckets
</p>


<h3>See Also</h3>

<p>Other bucket functions: 
<code><a href="#topic+gcs_create_bucket">gcs_create_bucket</a>()</code>,
<code><a href="#topic+gcs_create_lifecycle">gcs_create_lifecycle</a>()</code>,
<code><a href="#topic+gcs_delete_bucket">gcs_delete_bucket</a>()</code>,
<code><a href="#topic+gcs_get_bucket">gcs_get_bucket</a>()</code>,
<code><a href="#topic+gcs_get_global_bucket">gcs_get_global_bucket</a>()</code>,
<code><a href="#topic+gcs_global_bucket">gcs_global_bucket</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

buckets &lt;- gcs_list_buckets("your-project")

## use the name of the bucket to get more meta data
bucket_meta &lt;- gcs_get_bucket(buckets$name[[1]])


## End(Not run)

</code></pre>

<hr>
<h2 id='gcs_list_objects'>List objects in a bucket</h2><span id='topic+gcs_list_objects'></span>

<h3>Description</h3>

<p>List objects in a bucket
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_list_objects(
  bucket = gcs_get_global_bucket(),
  detail = c("summary", "more", "full"),
  prefix = NULL,
  delimiter = NULL,
  versions = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_list_objects_+3A_bucket">bucket</code></td>
<td>
<p>bucket containing the objects</p>
</td></tr>
<tr><td><code id="gcs_list_objects_+3A_detail">detail</code></td>
<td>
<p>Set level of detail</p>
</td></tr>
<tr><td><code id="gcs_list_objects_+3A_prefix">prefix</code></td>
<td>
<p>Filter results to objects whose names begin with this prefix</p>
</td></tr>
<tr><td><code id="gcs_list_objects_+3A_delimiter">delimiter</code></td>
<td>
<p>Use to list objects like a directory listing.</p>
</td></tr>
<tr><td><code id="gcs_list_objects_+3A_versions">versions</code></td>
<td>
<p>If <code>TRUE</code>, lists all versions of an object as distinct results in order of increasing generation number.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Columns returned by <code>detail</code> are:
</p>

<ul>
<li> <p><code>summary</code> - name, size, updated
</p>
</li>
<li> <p><code>more</code> - as above plus: bucket, contentType, storageClass, timeCreated
</p>
</li>
<li> <p><code>full</code> - as above plus: id, selfLink, generation, metageneration, md5Hash, mediaLink, crc32c, etag
</p>
</li></ul>

<p><code>delimited</code> returns results in a directory-like mode: items will contain only objects whose names,
aside from the prefix, do not contain delimiter. In conjunction with the prefix filter,
the use of the delimiter parameter allows the list method to operate like a directory listing,
despite the object namespace being flat.
For example, if delimiter were set to <code>"/"</code>, then listing objects from a bucket that contains the
objects <code>"a/b", "a/c", "dddd", "eeee", "e/f"</code> would return objects <code>"dddd" and "eeee"</code>,
and prefixes <code>"a/" and "e/"</code>.
</p>


<h3>Value</h3>

<p>A data.frame of the objects
</p>


<h3>See Also</h3>

<p>Other object functions: 
<code><a href="#topic+gcs_compose_objects">gcs_compose_objects</a>()</code>,
<code><a href="#topic+gcs_copy_object">gcs_copy_object</a>()</code>,
<code><a href="#topic+gcs_delete_object">gcs_delete_object</a>()</code>,
<code><a href="#topic+gcs_get_object">gcs_get_object</a>()</code>,
<code><a href="#topic+gcs_metadata_object">gcs_metadata_object</a>()</code>
</p>

<hr>
<h2 id='gcs_list_pubsub'>List pub/sub notifications for a bucket</h2><span id='topic+gcs_list_pubsub'></span>

<h3>Description</h3>

<p>List notification configurations for a bucket.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_list_pubsub(bucket = gcs_get_global_bucket())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_list_pubsub_+3A_bucket">bucket</code></td>
<td>
<p>The bucket for notifications</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Cloud Pub/Sub notifications allow you to track changes to your Cloud Storage objects.
As a minimum you wil need: the Cloud Pub/Sub API activated for the project;
sufficient permissions on the bucket you wish to monitor;
sufficient permissions on the project to receive notifications;
an existing pub/sub topic; have given your service account at least <code>pubsub.publisher</code> permission.
</p>


<h3>See Also</h3>

<p><a href="https://cloud.google.com/storage/docs/reporting-changes">https://cloud.google.com/storage/docs/reporting-changes</a>
</p>
<p>Other pubsub functions: 
<code><a href="#topic+gcs_create_pubsub">gcs_create_pubsub</a>()</code>,
<code><a href="#topic+gcs_delete_pubsub">gcs_delete_pubsub</a>()</code>,
<code><a href="#topic+gcs_get_service_email">gcs_get_service_email</a>()</code>
</p>

<hr>
<h2 id='gcs_load'>Load .RData objects or sessions from the Google Cloud</h2><span id='topic+gcs_load'></span>

<h3>Description</h3>

<p>Load R objects that have been saved using <a href="#topic+gcs_save">gcs_save</a> or <a href="#topic+gcs_save_image">gcs_save_image</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_load(
  file = ".RData",
  bucket = gcs_get_global_bucket(),
  envir = .GlobalEnv,
  saveToDisk = file,
  overwrite = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_load_+3A_file">file</code></td>
<td>
<p>Where the files are stored</p>
</td></tr>
<tr><td><code id="gcs_load_+3A_bucket">bucket</code></td>
<td>
<p>Bucket the stored objects are in</p>
</td></tr>
<tr><td><code id="gcs_load_+3A_envir">envir</code></td>
<td>
<p>Environment to load objects into</p>
</td></tr>
<tr><td><code id="gcs_load_+3A_savetodisk">saveToDisk</code></td>
<td>
<p>Where to save the loaded file.  Default same file name</p>
</td></tr>
<tr><td><code id="gcs_load_+3A_overwrite">overwrite</code></td>
<td>
<p>If file exists, overwrite. Default TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The argument <code>file</code>'s default is to load an image file
called <code>.RData</code> from <a href="#topic+gcs_save_image">gcs_save_image</a> into the Global environment.
</p>
<p>This would overwrite your existing <code>.RData</code> file in the working directory, so
change the file name if you don't wish this to be the case.
</p>


<h3>Value</h3>

<p>TRUE if successful
</p>


<h3>See Also</h3>

<p>Other R session data functions: 
<code><a href="#topic+gcs_save_all">gcs_save_all</a>()</code>,
<code><a href="#topic+gcs_save_image">gcs_save_image</a>()</code>,
<code><a href="#topic+gcs_save">gcs_save</a>()</code>,
<code><a href="#topic+gcs_source">gcs_source</a>()</code>
</p>

<hr>
<h2 id='gcs_metadata_object'>Make metadata for an object</h2><span id='topic+gcs_metadata_object'></span>

<h3>Description</h3>

<p>Use this to pass to uploads in <a href="#topic+gcs_upload">gcs_upload</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_metadata_object(
  object_name = NULL,
  metadata = NULL,
  md5Hash = NULL,
  crc32c = NULL,
  contentLanguage = NULL,
  contentEncoding = NULL,
  contentDisposition = NULL,
  cacheControl = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_metadata_object_+3A_object_name">object_name</code></td>
<td>
<p>Name of the object. GCS uses this version if also set elsewhere, or a <code>gs://</code> URL</p>
</td></tr>
<tr><td><code id="gcs_metadata_object_+3A_metadata">metadata</code></td>
<td>
<p>User-provided metadata, in key/value pairs</p>
</td></tr>
<tr><td><code id="gcs_metadata_object_+3A_md5hash">md5Hash</code></td>
<td>
<p>MD5 hash of the data; encoded using base64</p>
</td></tr>
<tr><td><code id="gcs_metadata_object_+3A_crc32c">crc32c</code></td>
<td>
<p>CRC32c checksum, as described in RFC 4960, Appendix B; encoded using base64 in big-endian byte order</p>
</td></tr>
<tr><td><code id="gcs_metadata_object_+3A_contentlanguage">contentLanguage</code></td>
<td>
<p>Content-Language of the object data</p>
</td></tr>
<tr><td><code id="gcs_metadata_object_+3A_contentencoding">contentEncoding</code></td>
<td>
<p>Content-Encoding of the object data</p>
</td></tr>
<tr><td><code id="gcs_metadata_object_+3A_contentdisposition">contentDisposition</code></td>
<td>
<p>Content-Disposition of the object data</p>
</td></tr>
<tr><td><code id="gcs_metadata_object_+3A_cachecontrol">cacheControl</code></td>
<td>
<p>Cache-Control directive for the object data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object metadata for uploading of class <code>gar_Object</code>
</p>


<h3>See Also</h3>

<p>Other object functions: 
<code><a href="#topic+gcs_compose_objects">gcs_compose_objects</a>()</code>,
<code><a href="#topic+gcs_copy_object">gcs_copy_object</a>()</code>,
<code><a href="#topic+gcs_delete_object">gcs_delete_object</a>()</code>,
<code><a href="#topic+gcs_get_object">gcs_get_object</a>()</code>,
<code><a href="#topic+gcs_list_objects">gcs_list_objects</a>()</code>
</p>

<hr>
<h2 id='gcs_parse_download'>Parse downloaded objects straight into R</h2><span id='topic+gcs_parse_download'></span><span id='topic+gcs_parse_rds'></span>

<h3>Description</h3>

<p>Wrapper for <code>httr</code>'s <a href="httr.html#topic+content">content</a>.  This is the default function used in <a href="#topic+gcs_get_object">gcs_get_object</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_parse_download(object, encoding = "UTF-8")

gcs_parse_rds(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_parse_download_+3A_object">object</code></td>
<td>
<p>The object downloaded</p>
</td></tr>
<tr><td><code id="gcs_parse_download_+3A_encoding">encoding</code></td>
<td>
<p>Default to UTF-8</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>gcs_parse_rds</code> will parse .rds files created via <a href="base.html#topic+saveRDS">saveRDS</a> without saving to disk
</p>


<h3>See Also</h3>

<p>gcs_get_object
</p>
<p>Other download functions: 
<code><a href="#topic+gcs_download_url">gcs_download_url</a>()</code>,
<code><a href="#topic+gcs_signed_url">gcs_signed_url</a>()</code>
</p>

<hr>
<h2 id='gcs_retry_upload'>Retry a resumeable upload</h2><span id='topic+gcs_retry_upload'></span>

<h3>Description</h3>

<p>Used internally in <a href="#topic+gcs_upload">gcs_upload</a>, you can also use this
for failed uploads within one week of generating the upload URL
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_retry_upload(
  retry_object = NULL,
  upload_url = NULL,
  file = NULL,
  type = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_retry_upload_+3A_retry_object">retry_object</code></td>
<td>
<p>A object of class <code>gcs_upload_retry</code>.</p>
</td></tr>
<tr><td><code id="gcs_retry_upload_+3A_upload_url">upload_url</code></td>
<td>
<p>As created in a failed upload via <a href="#topic+gcs_upload">gcs_upload</a></p>
</td></tr>
<tr><td><code id="gcs_retry_upload_+3A_file">file</code></td>
<td>
<p>The file location to upload</p>
</td></tr>
<tr><td><code id="gcs_retry_upload_+3A_type">type</code></td>
<td>
<p>The file type, guessed if NULL
</p>
<p>Either supply a retry object, or the upload_url, file and type manually yourself.
</p>
<p>The function will first check to see how much has been uploaded already, then try to send up
the remaining bytes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If successful, an object metadata object, if not an gcs_upload_retry object.
</p>

<hr>
<h2 id='gcs_save'>Save .RData objects to the Google Cloud</h2><span id='topic+gcs_save'></span>

<h3>Description</h3>

<p>Performs <a href="base.html#topic+save">save</a> then saves it to Google Cloud Storage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_save(..., file, bucket = gcs_get_global_bucket(), envir = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_save_+3A_...">...</code></td>
<td>
<p>The names of the objects to be saved (as symbols or character strings).</p>
</td></tr>
<tr><td><code id="gcs_save_+3A_file">file</code></td>
<td>
<p>The file name that will be uploaded (conventionally with file extension <code>.RData</code>)</p>
</td></tr>
<tr><td><code id="gcs_save_+3A_bucket">bucket</code></td>
<td>
<p>Bucket to store objects in</p>
</td></tr>
<tr><td><code id="gcs_save_+3A_envir">envir</code></td>
<td>
<p>Environment to search for objects to be saved</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For all session data use <a href="#topic+gcs_save_image">gcs_save_image</a> instead.
</p>
<p><code>gcs_save(ob1, ob2, ob3, file = "mydata.RData")</code> will save the objects specified to an <code>.RData</code> file then save it to Cloud Storage, to be loaded later using <a href="#topic+gcs_load">gcs_load</a>.
</p>
<p>For any other use, its better to use <a href="#topic+gcs_upload">gcs_upload</a> and <a href="#topic+gcs_get_object">gcs_get_object</a> instead.
</p>
<p>Restore the R objects using <code>gcs_load(bucket = "your_bucket")</code>
</p>
<p>This will overwrite any data within your local environment with the same name.
</p>


<h3>Value</h3>

<p>The GCS object
</p>


<h3>See Also</h3>

<p>Other R session data functions: 
<code><a href="#topic+gcs_load">gcs_load</a>()</code>,
<code><a href="#topic+gcs_save_all">gcs_save_all</a>()</code>,
<code><a href="#topic+gcs_save_image">gcs_save_image</a>()</code>,
<code><a href="#topic+gcs_source">gcs_source</a>()</code>
</p>

<hr>
<h2 id='gcs_save_all'>Save/Load all files in directory to Google Cloud Storage</h2><span id='topic+gcs_save_all'></span><span id='topic+gcs_load_all'></span><span id='topic+gcs_delete_all'></span>

<h3>Description</h3>

<p>This function takes all the files in the directory, zips them, and saves/loads/deletes them to the cloud.  The upload name will be the directory name.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_save_all(
  directory = getwd(),
  bucket = gcs_get_global_bucket(),
  pattern = "",
  predefinedAcl = c("private", "bucketLevel", "authenticatedRead",
    "bucketOwnerFullControl", "bucketOwnerRead", "projectPrivate", "publicRead",
    "default")
)

gcs_load_all(
  directory = getwd(),
  bucket = gcs_get_global_bucket(),
  exdir = directory,
  list = FALSE
)

gcs_delete_all(directory = getwd(), bucket = gcs_get_global_bucket())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_save_all_+3A_directory">directory</code></td>
<td>
<p>The folder to upload/download</p>
</td></tr>
<tr><td><code id="gcs_save_all_+3A_bucket">bucket</code></td>
<td>
<p>Bucket to store within</p>
</td></tr>
<tr><td><code id="gcs_save_all_+3A_pattern">pattern</code></td>
<td>
<p>An optional regular expression. Only file names which match the regular expression will be saved.</p>
</td></tr>
<tr><td><code id="gcs_save_all_+3A_predefinedacl">predefinedAcl</code></td>
<td>
<p>Specify user access to object. Default is 'private'. Set to 'bucketLevel' for buckets with bucket level access enabled.</p>
</td></tr>
<tr><td><code id="gcs_save_all_+3A_exdir">exdir</code></td>
<td>
<p>When downloading, specify a destination directory if required</p>
</td></tr>
<tr><td><code id="gcs_save_all_+3A_list">list</code></td>
<td>
<p>When downloading, only list where the files would unzip to</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Zip/unzip is performed before upload and after download using <a href="zip.html#topic+zip">zip</a>.
</p>


<h3>Value</h3>

<p>When uploading the GCS meta object; when downloading <code>TRUE</code> if successful
</p>


<h3>See Also</h3>

<p>Other R session data functions: 
<code><a href="#topic+gcs_load">gcs_load</a>()</code>,
<code><a href="#topic+gcs_save_image">gcs_save_image</a>()</code>,
<code><a href="#topic+gcs_save">gcs_save</a>()</code>,
<code><a href="#topic+gcs_source">gcs_source</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

gcs_save_all(
  directory = "path-to-all-images",
  bucket = "my-bucket",
  predefinedAcl = "bucketLevel")

## End(Not run)
</code></pre>

<hr>
<h2 id='gcs_save_image'>Save an R session to the Google Cloud</h2><span id='topic+gcs_save_image'></span>

<h3>Description</h3>

<p>Performs <a href="base.html#topic+save.image">save.image</a> then saves it to Google Cloud Storage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_save_image(
  file = ".RData",
  bucket = gcs_get_global_bucket(),
  saveLocation = NULL,
  envir = parent.frame()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_save_image_+3A_file">file</code></td>
<td>
<p>Where to save the file in GCS and locally</p>
</td></tr>
<tr><td><code id="gcs_save_image_+3A_bucket">bucket</code></td>
<td>
<p>Bucket to store objects in</p>
</td></tr>
<tr><td><code id="gcs_save_image_+3A_savelocation">saveLocation</code></td>
<td>
<p>Which folder in the bucket to save file</p>
</td></tr>
<tr><td><code id="gcs_save_image_+3A_envir">envir</code></td>
<td>
<p>Environment to save from</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>gcs_save_image(bucket = "your_bucket")</code> will save all objects in the workspace
to <code>.RData</code> folder on Google Cloud Storage within <code>your_bucket</code>.
</p>
<p>Restore the objects using <code>gcs_load(bucket = "your_bucket")</code>
</p>
<p>This will overwrite any data with the same name in your current local environment.
</p>


<h3>Value</h3>

<p>The GCS object
</p>


<h3>See Also</h3>

<p>Other R session data functions: 
<code><a href="#topic+gcs_load">gcs_load</a>()</code>,
<code><a href="#topic+gcs_save_all">gcs_save_all</a>()</code>,
<code><a href="#topic+gcs_save">gcs_save</a>()</code>,
<code><a href="#topic+gcs_source">gcs_source</a>()</code>
</p>

<hr>
<h2 id='gcs_setup'>Help set-up googleCloudStorageR</h2><span id='topic+gcs_setup'></span>

<h3>Description</h3>

<p>Use this to make a wizard to walk through set-up steps
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_setup()
</code></pre>


<h3>Details</h3>

<p>This function assumes you have at least a Google Cloud Platform project setup, from which it can generate the necessary authentication keys and set up authentication.
</p>
<p>It uses <a href="googleAuthR.html#topic+gar_setup_menu">gar_setup_menu</a> to create the wizard.  You will need to have owner access to the project you are using.
</p>
<p>After each menu option has completed, restart R and reload the library and this function to continue to the next step.
</p>
<p>Upon successful set-up, you should see a message similar to <code>Successfully auto-authenticated via /xxxx/googlecloudstorager-auth-key.json</code> and <code>Set default bucket name to 'xxxx'</code> when you load the library via <code>library(googleCloudStorageR)</code>
</p>


<h3>See Also</h3>

<p><a href="https://code.markedmondson.me/googleCloudStorageR/articles/googleCloudStorageR.html">Setup documentation on googleCloudStorageR website</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

library(googleCloudStorageR)
gcs_setup()


## End(Not run)

</code></pre>

<hr>
<h2 id='gcs_signed_url'>Create a signed URL</h2><span id='topic+gcs_signed_url'></span>

<h3>Description</h3>

<p>This creates a signed URL which you can share with others who may or may not have a Google account.
The object will be available until the specified timestamp.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_signed_url(
  meta_obj,
  expiration_ts = Sys.time() + 3600,
  verb = "GET",
  md5hash = NULL,
  includeContentType = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_signed_url_+3A_meta_obj">meta_obj</code></td>
<td>
<p>A meta object from <a href="#topic+gcs_get_object">gcs_get_object</a></p>
</td></tr>
<tr><td><code id="gcs_signed_url_+3A_expiration_ts">expiration_ts</code></td>
<td>
<p>A timestamp of class <code>"POSIXct"</code> such as from <code>Sys.time()</code> or a numeric in seconds from Unix Epoch.  Default is 60 mins.</p>
</td></tr>
<tr><td><code id="gcs_signed_url_+3A_verb">verb</code></td>
<td>
<p>The URL verb of access e.g. <code>GET</code> or <code>PUT</code>. Default <code>GET</code></p>
</td></tr>
<tr><td><code id="gcs_signed_url_+3A_md5hash">md5hash</code></td>
<td>
<p>An optional md5 digest value</p>
</td></tr>
<tr><td><code id="gcs_signed_url_+3A_includecontenttype">includeContentType</code></td>
<td>
<p>For getting the URL via browsers this should be set to <code>FALSE</code> (the default).  Otherwise, set to <code>TRUE</code> to include the content type of the object in the request needed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Create a URL with a time-limited read and write to an object, regardless whether they have a Google account
</p>


<h3>See Also</h3>

<p><a href="https://cloud.google.com/storage/docs/access-control/signed-urls">https://cloud.google.com/storage/docs/access-control/signed-urls</a>
</p>
<p>Other download functions: 
<code><a href="#topic+gcs_download_url">gcs_download_url</a>()</code>,
<code><a href="#topic+gcs_parse_download">gcs_parse_download</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

obj &lt;- gcs_get_object("your_file", meta = TRUE)

signed &lt;- gcs_signed_url(obj)

temp &lt;- tempfile()
on.exit(unlink(temp))

download.file(signed, destfile = temp)
file.exists(temp)


## End(Not run)

</code></pre>

<hr>
<h2 id='gcs_source'>Source an R script from the Google Cloud</h2><span id='topic+gcs_source'></span>

<h3>Description</h3>

<p>Download an R script and run it immediately via <a href="base.html#topic+source">source</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_source(script, bucket = gcs_get_global_bucket(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_source_+3A_script">script</code></td>
<td>
<p>The name of the script on GCS</p>
</td></tr>
<tr><td><code id="gcs_source_+3A_bucket">bucket</code></td>
<td>
<p>Bucket the stored objects are in</p>
</td></tr>
<tr><td><code id="gcs_source_+3A_...">...</code></td>
<td>
<p>Passed to <a href="base.html#topic+source">source</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE if successful
</p>


<h3>See Also</h3>

<p>Other R session data functions: 
<code><a href="#topic+gcs_load">gcs_load</a>()</code>,
<code><a href="#topic+gcs_save_all">gcs_save_all</a>()</code>,
<code><a href="#topic+gcs_save_image">gcs_save_image</a>()</code>,
<code><a href="#topic+gcs_save">gcs_save</a>()</code>
</p>

<hr>
<h2 id='gcs_update_object_acl'>Change access to an object in a bucket</h2><span id='topic+gcs_update_object_acl'></span>

<h3>Description</h3>

<p>Updates Google Cloud Storage ObjectAccessControls
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_update_object_acl(
  object_name,
  bucket = gcs_get_global_bucket(),
  entity = "",
  entity_type = c("user", "group", "domain", "project", "allUsers",
    "allAuthenticatedUsers"),
  role = c("READER", "OWNER")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_update_object_acl_+3A_object_name">object_name</code></td>
<td>
<p>Object to update</p>
</td></tr>
<tr><td><code id="gcs_update_object_acl_+3A_bucket">bucket</code></td>
<td>
<p>Google Cloud Storage bucket</p>
</td></tr>
<tr><td><code id="gcs_update_object_acl_+3A_entity">entity</code></td>
<td>
<p>entity to update or add, such as an email</p>
</td></tr>
<tr><td><code id="gcs_update_object_acl_+3A_entity_type">entity_type</code></td>
<td>
<p>what type of entity</p>
</td></tr>
<tr><td><code id="gcs_update_object_acl_+3A_role">role</code></td>
<td>
<p>Access permission for entity</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An <code>entity</code> is an identifier for the <code>entity_type</code>.
</p>

<ul>
<li> <p><code>entity="user"</code> may have <code>userId</code> or <code>email</code>
</p>
</li>
<li> <p><code>entity="group"</code> may have <code>groupId</code> or <code>email</code>
</p>
</li>
<li> <p><code>entity="domain"</code> may have <code>domain</code>
</p>
</li>
<li> <p><code>entity="project"</code> may have <code>team-projectId</code>
</p>
</li></ul>

<p>For example:
</p>

<ul>
<li> <p><code>entity="user"</code> could be <code>jane@doe.com</code>
</p>
</li>
<li> <p><code>entity="group"</code> could be <code>example@googlegroups.com</code>
</p>
</li>
<li> <p><code>entity="domain"</code> could be <code>example.com</code> which is a Google Apps for Business domain.
</p>
</li></ul>



<h3>Value</h3>

<p>TRUE if successful
</p>


<h3>See Also</h3>

<p><a href="https://cloud.google.com/storage/docs/json_api/v1/objectAccessControls/insert">objectAccessControls on Google API reference</a>
</p>
<p>Other Access control functions: 
<code><a href="#topic+gcs_create_bucket_acl">gcs_create_bucket_acl</a>()</code>,
<code><a href="#topic+gcs_get_bucket_acl">gcs_get_bucket_acl</a>()</code>,
<code><a href="#topic+gcs_get_object_acl">gcs_get_object_acl</a>()</code>
</p>

<hr>
<h2 id='gcs_upload'>Upload a file of arbitrary type</h2><span id='topic+gcs_upload'></span><span id='topic+gcs_upload_set_limit'></span>

<h3>Description</h3>

<p>Upload up to 5TB
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_upload(
  file,
  bucket = gcs_get_global_bucket(),
  type = NULL,
  name = deparse(substitute(file)),
  object_function = NULL,
  object_metadata = NULL,
  predefinedAcl = c("private", "bucketLevel", "authenticatedRead",
    "bucketOwnerFullControl", "bucketOwnerRead", "projectPrivate", "publicRead",
    "default"),
  upload_type = c("simple", "resumable")
)

gcs_upload_set_limit(upload_limit = 5000000L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_upload_+3A_file">file</code></td>
<td>
<p>data.frame, list, R object or filepath (character) to upload file</p>
</td></tr>
<tr><td><code id="gcs_upload_+3A_bucket">bucket</code></td>
<td>
<p>bucketname you are uploading to</p>
</td></tr>
<tr><td><code id="gcs_upload_+3A_type">type</code></td>
<td>
<p>MIME type, guessed from file extension if NULL</p>
</td></tr>
<tr><td><code id="gcs_upload_+3A_name">name</code></td>
<td>
<p>What to call the file once uploaded. Default is the filepath</p>
</td></tr>
<tr><td><code id="gcs_upload_+3A_object_function">object_function</code></td>
<td>
<p>If not NULL, a <code>function(input, output)</code></p>
</td></tr>
<tr><td><code id="gcs_upload_+3A_object_metadata">object_metadata</code></td>
<td>
<p>Optional metadata for object created via <a href="#topic+gcs_metadata_object">gcs_metadata_object</a></p>
</td></tr>
<tr><td><code id="gcs_upload_+3A_predefinedacl">predefinedAcl</code></td>
<td>
<p>Specify user access to object. Default is 'private'. Set to 'bucketLevel' for buckets with bucket level access enabled.</p>
</td></tr>
<tr><td><code id="gcs_upload_+3A_upload_type">upload_type</code></td>
<td>
<p>Override automatic decision on upload type</p>
</td></tr>
<tr><td><code id="gcs_upload_+3A_upload_limit">upload_limit</code></td>
<td>
<p>Upload limit in bytes</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When using <code>object_function</code> it expects a function with two arguments:
</p>

<ul>
<li> <p><code>input</code> The object you supply in file to write from
</p>
</li>
<li> <p><code>output</code> The filename you write to
</p>
</li></ul>

<p>By default the <code>upload_type</code> will be 'simple' if under 5MB, 'resumable' if over 5MB.  Use <a href="#topic+gcs_upload_set_limit">gcs_upload_set_limit</a> to modify this boundary - you may want it smaller on slow connections, higher on faster connections.
'Multipart' upload is used if you provide a <code>object_metadata</code>.
</p>
<p>If <code>object_function</code> is NULL and <code>file</code> is not a character filepath,
the defaults are:
</p>

<ul>
<li><p> file's class is <code>data.frame</code> - <a href="utils.html#topic+write.csv">write.csv</a>
</p>
</li>
<li><p> file's class is <code>list</code> - <a href="jsonlite.html#topic+toJSON">toJSON</a>
</p>
</li></ul>

<p>If <code>object_function</code> is not NULL and <code>file</code> is not a character filepath,
then <code>object_function</code> will be applied to the R object specified
in <code>file</code> before upload. You may want to also use <code>name</code> to ensure the correct
file extension is used e.g. <code>name = 'myobject.feather'</code>
</p>
<p>If <code>file</code> or <code>name</code> argument contains folders e.g. <code>/data/file.csv</code> then
the file will be uploaded with the same folder structure e.g. in a <code>/data/</code> folder.
Use <code>name</code> to override this.
</p>


<h3>Value</h3>

<p>If successful, a metadata object
</p>


<h3>scopes</h3>

<p>Requires scopes <code>https://www.googleapis.com/auth/devstorage.read_write</code>
or <code>https://www.googleapis.com/auth/devstorage.full_control</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

## set global bucket so don't need to keep supplying in future calls
gcs_global_bucket("my-bucket")

## by default will convert dataframes to csv
gcs_upload(mtcars)

## mtcars has been renamed to mtcars.csv
gcs_list_objects()

## to specify the name, use the name argument
gcs_upload(mtcars, name = "my_mtcars.csv")

## when looping, its best to specify the name else it will take
## the deparsed function call e.g. X[[i]]
my_files &lt;- list.files("my_uploads")
lapply(my_files, function(x) gcs_upload(x, name = x))

## you can supply your own function to transform R objects before upload
f &lt;- function(input, output){
  write.csv2(input, file = output)
}

gcs_upload(mtcars, name = "mtcars_csv2.csv", object_function = f)

# upload to a bucket with bucket level ACL set
gcs_upload(mtcars, predefinedAcl = "bucketLevel")

# modify boundary between simple and resumable uploads
# default 5000000L is 5MB
gcs_upload_set_limit(1000000L)

## End(Not run)



</code></pre>

<hr>
<h2 id='gcs_version_bucket'>Change or fetch bucket version status</h2><span id='topic+gcs_version_bucket'></span>

<h3>Description</h3>

<p>Turn bucket versioning on or off, check status (default), or
list archived versions of objects in the bucket and view their generation numbers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_version_bucket(bucket, action = c("status", "enable", "disable", "list"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_version_bucket_+3A_bucket">bucket</code></td>
<td>
<p>gcs bucket</p>
</td></tr>
<tr><td><code id="gcs_version_bucket_+3A_action">action</code></td>
<td>
<p>&quot;status&quot;, &quot;enable&quot;, &quot;disable&quot;, or &quot;list&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>action="list"</code> a versioned_objects dataframe
If <code>action="status"</code> a boolean on if versioning is TRUE or FALSE
If <code>action="enable" or "disable"</code> TRUE if operation is successful
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
  buck &lt;- gcs_get_global_bucket()
  gcs_version_bucket(buck, action = "disable")
  
  gcs_version_bucket(buck, action = "status")
  # Versioning is NOT ENABLED for "your-bucket"
  gcs_version_bucket(buck, action = "enable")
  # TRUE
  gcs_version_bucket(buck, action = "status")
  # Versioning is ENABLED for "your-bucket"
  gcs_version_bucket(buck, action = "list")



## End(Not run)

</code></pre>

<hr>
<h2 id='googleCloudStorageR'>googleCloudStorageR</h2><span id='topic+googleCloudStorageR'></span>

<h3>Description</h3>

<p>Interact with Google Cloud Storage API in R. Part of the 'cloudyr' project.
</p>

<hr>
<h2 id='Object'>Object Object</h2><span id='topic+Object'></span>

<h3>Description</h3>

<p>Object Object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Object(
  acl = NULL,
  bucket = NULL,
  cacheControl = NULL,
  componentCount = NULL,
  contentDisposition = NULL,
  contentEncoding = NULL,
  contentLanguage = NULL,
  contentType = NULL,
  crc32c = NULL,
  customerEncryption = NULL,
  etag = NULL,
  generation = NULL,
  id = NULL,
  md5Hash = NULL,
  mediaLink = NULL,
  metadata = NULL,
  metageneration = NULL,
  name = NULL,
  owner = NULL,
  selfLink = NULL,
  size = NULL,
  storageClass = NULL,
  timeCreated = NULL,
  timeDeleted = NULL,
  updated = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Object_+3A_acl">acl</code></td>
<td>
<p>Access controls on the object</p>
</td></tr>
<tr><td><code id="Object_+3A_bucket">bucket</code></td>
<td>
<p>The name of the bucket containing this object</p>
</td></tr>
<tr><td><code id="Object_+3A_cachecontrol">cacheControl</code></td>
<td>
<p>Cache-Control directive for the object data</p>
</td></tr>
<tr><td><code id="Object_+3A_componentcount">componentCount</code></td>
<td>
<p>Number of underlying components that make up this object</p>
</td></tr>
<tr><td><code id="Object_+3A_contentdisposition">contentDisposition</code></td>
<td>
<p>Content-Disposition of the object data</p>
</td></tr>
<tr><td><code id="Object_+3A_contentencoding">contentEncoding</code></td>
<td>
<p>Content-Encoding of the object data</p>
</td></tr>
<tr><td><code id="Object_+3A_contentlanguage">contentLanguage</code></td>
<td>
<p>Content-Language of the object data</p>
</td></tr>
<tr><td><code id="Object_+3A_contenttype">contentType</code></td>
<td>
<p>Content-Type of the object data</p>
</td></tr>
<tr><td><code id="Object_+3A_crc32c">crc32c</code></td>
<td>
<p>CRC32c checksum, as described in RFC 4960, Appendix B; encoded using base64 in big-endian byte order</p>
</td></tr>
<tr><td><code id="Object_+3A_customerencryption">customerEncryption</code></td>
<td>
<p>Metadata of customer-supplied encryption key, if the object is encrypted by such a key</p>
</td></tr>
<tr><td><code id="Object_+3A_etag">etag</code></td>
<td>
<p>HTTP 1</p>
</td></tr>
<tr><td><code id="Object_+3A_generation">generation</code></td>
<td>
<p>The content generation of this object</p>
</td></tr>
<tr><td><code id="Object_+3A_id">id</code></td>
<td>
<p>The ID of the object</p>
</td></tr>
<tr><td><code id="Object_+3A_md5hash">md5Hash</code></td>
<td>
<p>MD5 hash of the data; encoded using base64</p>
</td></tr>
<tr><td><code id="Object_+3A_medialink">mediaLink</code></td>
<td>
<p>Media download link</p>
</td></tr>
<tr><td><code id="Object_+3A_metadata">metadata</code></td>
<td>
<p>User-provided metadata, in key/value pairs</p>
</td></tr>
<tr><td><code id="Object_+3A_metageneration">metageneration</code></td>
<td>
<p>The version of the metadata for this object at this generation</p>
</td></tr>
<tr><td><code id="Object_+3A_name">name</code></td>
<td>
<p>The name of this object</p>
</td></tr>
<tr><td><code id="Object_+3A_owner">owner</code></td>
<td>
<p>The owner of the object</p>
</td></tr>
<tr><td><code id="Object_+3A_selflink">selfLink</code></td>
<td>
<p>The link to this object</p>
</td></tr>
<tr><td><code id="Object_+3A_size">size</code></td>
<td>
<p>Content-Length of the data in bytes</p>
</td></tr>
<tr><td><code id="Object_+3A_storageclass">storageClass</code></td>
<td>
<p>Storage class of the object</p>
</td></tr>
<tr><td><code id="Object_+3A_timecreated">timeCreated</code></td>
<td>
<p>The creation time of the object in RFC 3339 format</p>
</td></tr>
<tr><td><code id="Object_+3A_timedeleted">timeDeleted</code></td>
<td>
<p>The deletion time of the object in RFC 3339 format</p>
</td></tr>
<tr><td><code id="Object_+3A_updated">updated</code></td>
<td>
<p>The modification time of the object metadata in RFC 3339 format</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An object.
</p>


<h3>Value</h3>

<p>Object object
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
