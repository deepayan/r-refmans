<!DOCTYPE html><html><head><title>Help for package survRM2perm</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {survRM2perm}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#survRM2perm-package'><p>Permutation Test for Comparing Restricted Mean Survival Time</p></a></li>
<li><a href='#print.rmst2perm'><p>print.rmst2perm</p></a></li>
<li><a href='#rmst2perm'><p>Permutation Test for Comparing Restricted Mean Survival Time</p></a></li>
<li><a href='#rmst2perm.sample.data'><p>Sample Dataset from Ovarian Data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Permutation Test for Comparing Restricted Mean Survival Time</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-05-21</td>
</tr>
<tr>
<td>Author:</td>
<td>Miki Horiguchi, Hajime Uno</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Miki Horiguchi &lt;horiguchimiki@gmail.com&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>survival, methods, stats4</td>
</tr>
<tr>
<td>Description:</td>
<td>Performs the permutation test using difference in the restricted mean survival time (RMST) between groups as a summary measure of the survival time distribution. When the sample size is less than 50 per group, it has been shown that there is non-negligible inflation of the type I error rate in the commonly used asymptotic test for the RMST comparison. Generally, permutation tests can be useful in such a situation. However, when we apply the permutation test for the RMST comparison, particularly in small sample situations, there are some cases where the survival function in either group cannot be defined due to censoring in the permutation process. Horiguchi and Uno (2020) &lt;<a href="https://doi.org/10.1002%2Fsim.8565">doi:10.1002/sim.8565</a>&gt; have examined six workable solutions to handle this numerical issue. It performs permutation tests with implementation of the six methods outlined in the paper when the numerical issue arises during the permutation process. The result of the asymptotic test is also provided for a reference.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0.9000</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-05-29 18:08:51 UTC; miki</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-06-04 10:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='survRM2perm-package'>Permutation Test for Comparing Restricted Mean Survival Time</h2><span id='topic+survRM2perm-package'></span>

<h3>Description</h3>

<p>Performs the permutation test using difference in the restricted mean
survival time (RMST) between groups as a summary measure of the survival time distribution.
When the sample size is less than 50 per group, it has been shown that there is non-negligible
inflation of the type I error rate in the commonly used asymptotic test for the RMST comparison.
Generally, permutation tests can be useful in such a situation.
However, when we apply the permutation test for the RMST comparison, particularly in small sample
situations, there are some cases where the survival function in either group cannot be defined
due to censoring in the permutation process. Horiguchi and Uno (2020) &lt;doi:10.1002/sim.8565&gt;
have examined six workable solutions to handle this numerical issue.
It performs permutation tests with implementation of the six methods outlined in the paper
when the numerical issue arises during the permutation process.
The result of the asymptotic test is also provided for a reference.
</p>


<h3>Author(s)</h3>

<p>Miki Horiguchi, Hajime Uno
</p>
<p>Maintainer: Miki Horiguchi &lt;horiguchimiki@gmail.com&gt;
</p>


<h3>References</h3>

<p>Horiguchi M, Uno H. On permutation tests for comparing restricted mean survival time
with small sample from randomized trials. Statistics in Medicine 2020.doi:10.1002/sim.8565.
</p>


<h3>See Also</h3>

<p>survRM2 survival
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#--- sample data ---#
D      = rmst2perm.sample.data()
time   = D$time
status = D$status
arm    = D$arm
tau    = 34
mperm  = c(1:6)
nperm  = 100 #--This number is only for the example.
             #--It is recommended to specify at least 100K (default) or larger.
seed   = 123

a = rmst2perm(time=time, status=status, arm=arm,
              tau=tau, mperm=mperm, nperm=nperm, seed=seed)
print(a)
</code></pre>

<hr>
<h2 id='print.rmst2perm'>print.rmst2perm</h2><span id='topic+print.rmst2perm'></span>

<h3>Description</h3>

<p>S3 method for class 'rmst2perm'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rmst2perm'
print(x, digits = 3, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.rmst2perm_+3A_x">x</code></td>
<td>
<p>Object to be printed</p>
</td></tr>
<tr><td><code id="print.rmst2perm_+3A_digits">digits</code></td>
<td>
<p>Integer indicating the number of decimal places</p>
</td></tr>
<tr><td><code id="print.rmst2perm_+3A_...">...</code></td>
<td>
<p>Further arguments ignored in this function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns summary output for class 'rmst2perm'
</p>

<hr>
<h2 id='rmst2perm'>Permutation Test for Comparing Restricted Mean Survival Time</h2><span id='topic+rmst2perm'></span>

<h3>Description</h3>

<p>Performs the permutation test using difference in the restricted mean
survival time (RMST) between groups as a summary measure of the survival time distribution.
When the sample size is less than 50 per group, it has been shown that there is non-negligible
inflation of the type I error rate in the commonly used asymptotic test for the RMST comparison.
Generally, permutation tests can be useful in such a situation.
However, when we apply the permutation test for the RMST comparison, particularly in small sample
situations, there are some cases where the survival function in either group cannot be defined
due to censoring in the permutation process. Horiguchi and Uno (2020) &lt;doi:10.1002/sim.8565&gt;
have examined six workable solutions to handle this numerical issue.
It performs permutation tests with implementation of the six methods outlined in the paper
when the numerical issue arises during the permutation process.
The result of the asymptotic test is also provided for a reference.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmst2perm(time, status, arm, tau=NULL, mperm=c(1:6), nperm=100000,
seed=NULL, asy="greenwood", test="2_side")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rmst2perm_+3A_time">time</code></td>
<td>
<p>The follow-up time for right censored data.</p>
</td></tr>
<tr><td><code id="rmst2perm_+3A_status">status</code></td>
<td>
<p>The event indicator, 1=event, and 0=censor.</p>
</td></tr>
<tr><td><code id="rmst2perm_+3A_arm">arm</code></td>
<td>
<p>The group indicator for comparison with a value of either 0 or 1. Normally, 0=control group, 1=active treatment group. The three vectors (<code>time</code>, <code>status</code>, <code>arm</code>) need to have the same length.</p>
</td></tr>
<tr><td><code id="rmst2perm_+3A_tau">tau</code></td>
<td>
<p>A scaler value to specify the truncation time point for the RMST calculation.
It needs to be smaller than the minimum value of the largest observed time in each of the two groups.</p>
</td></tr>
<tr><td><code id="rmst2perm_+3A_mperm">mperm</code></td>
<td>
<p>A vector with the numbers from 1 to 6 to specify the method for conducting the permutation test when the last observation time from either group does not reach the specified <code>tau</code>.
It supports: 1=ignoring the inestimable cases (Method 1),
2=extending the survival curve to tau (Method 2),
3=switching the last censored observation to the event observation (Method 3),
4=averaging RMSTs derived from Methods 2 and 3 (Method 4),
5=fitting a Weibull distribution to each inestimable case (Method 5), and
6=utilizing pseudo-observations (Method 6). Please see Horiguchi and Uno (2020) &lt;doi:10.1002/sim.8565&gt; for details.</p>
</td></tr>
<tr><td><code id="rmst2perm_+3A_nperm">nperm</code></td>
<td>
<p>The number of iterations for the resampling. It is recommended to specify at least 100,000 (default) or larger.</p>
</td></tr>
<tr><td><code id="rmst2perm_+3A_seed">seed</code></td>
<td>
<p>An integer value, used for random number generation in the resampling procedure. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="rmst2perm_+3A_asy">asy</code></td>
<td>
<p>Specify the asymptotic variance estimator for the difference in RMST.
<code>asy</code> supports <code>"greenwood"</code> for Greenwood plug-in estimator (default) and <code>"aj"</code> for Aalen-Johansen plug-in estimators. Please see Horiguchi and Uno (2020) &lt;doi:10.1002/sim.8565&gt; for details.</p>
</td></tr>
<tr><td><code id="rmst2perm_+3A_test">test</code></td>
<td>
<p>Specify <code>"1_side"</code> for the one-sided test where the alternative hypothesis is that the treatment effect in arm=1 is superior to that in arm=0 with respect to survival.
Specify <code>"2_side"</code> for the two-sided test where the alternative hypothesis is that the treatment effect in arm=1 is not equal to that in arm=0 with respect to survival.
Default is <code>"2_side"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class rmst2perm.
</p>
<table>
<tr><td><code>point_estimate</code></td>
<td>
<p>Estimated RMST values for arm=1, arm=0, and their difference</p>
</td></tr>
<tr><td><code>asymptotic_test_pval</code></td>
<td>
<p>P-value of the asymptotic test for the difference in RMST</p>
</td></tr>
<tr><td><code>permutation_test_methodX_pval</code></td>
<td>
<p>P-value of the permutation test for the difference in RMST using Method X (X is the number specified in <code>mperm</code>)</p>
</td></tr>
<tr><td><code>methodX_number_applied</code></td>
<td>
<p>The number of times Method X was applied during the permutation process. (X is the number specified in <code>mperm</code> except 6.) For X=1 (Method 1), this returns how many additional permutations were performed in order to obtain <code>nperm</code> of realizations.</p>
</td></tr>
<tr><td><code>method5_number_exponential_used</code></td>
<td>
<p>The number of times the exponential distribution was used for the parametric fit during the permutations. Normally, the Weibull distribution is used for Method 5.
However, when the maximum likelihood estimate (MLE) for the Weibull distribution cannot be derived or the hessian of the covariance matrix for the MLE is singular, the exponential distribution will be used.</p>
</td></tr>
<tr><td><code>tau</code></td>
<td>
<p>The truncation time used in the analysis</p>
</td></tr>
<tr><td><code>mperm</code></td>
<td>
<p>The method used to conduct the permutation test</p>
</td></tr>
<tr><td><code>nperm</code></td>
<td>
<p>The number of iterations for the resampling</p>
</td></tr>
<tr><td><code>asy</code></td>
<td>
<p>The type of the asymptotic variance estimator used for the asymptotic test</p>
</td></tr>
<tr><td><code>test</code></td>
<td>
<p>The type of test used in the analysis</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Miki Horiguchi, Hajime Uno
</p>


<h3>References</h3>

<p>Horiguchi M, Uno H. On permutation tests for comparing restricted mean survival time
with small sample from randomized trials. Statistics in Medicine 2020. doi:10.1002/sim.8565.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#--- sample data ---#
D      = rmst2perm.sample.data()
time   = D$time
status = D$status
arm    = D$arm
tau    = 34
mperm  = c(1:6)
nperm  = 100 #--This number is only for the example.
             #--It is recommended to specify at least 100K (default) or larger.
seed   = 123

a = rmst2perm(time=time, status=status, arm=arm,
              tau=tau, mperm=mperm, nperm=nperm, seed=seed)
print(a)
</code></pre>

<hr>
<h2 id='rmst2perm.sample.data'>Sample Dataset from Ovarian Data</h2><span id='topic+rmst2perm.sample.data'></span>

<h3>Description</h3>

<p>Generates a sample dataset of 26 randomized patients from the ovarian data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmst2perm.sample.data(t.unit="month")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rmst2perm.sample.data_+3A_t.unit">t.unit</code></td>
<td>
<p>Specify the time unit. It supports <code>"month"</code> (default) and <code>"day"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function creates a sample dataset to illustrate the usage of the function <code>rmst2perm()</code> in this package.
This function loads the ovarian data from the survival package, deriving three variables.
The variables in the dataset are as follows: <code>time</code>, survival time in months;
<code>status</code>, event indicator (0=censor, 1=event); <code>arm</code>, treatment arm (0=cyclophosphamide, 1=cyclophosphamide+adriamycin).
</p>


<h3>Value</h3>

<p>returns a data frame
</p>


<h3>References</h3>

<p>Collett, D. Modelling Survival Data in Medical Research. Chapman and Hall/CRC. 2015; page 213.
</p>
<p>Edmonson JH, Fleming TR, Decker DG, et al. Different chemotherapeutic sensitivities and host factors affecting prognosis in
advanced ovarian carcinoma versus minimal residual disease. Cancer Treat Rep. 1979;63(2):241-247.
</p>


<h3>See Also</h3>

<p><code>ovarian</code> in survival package
</p>


<h3>Examples</h3>

<pre><code class='language-R'>D = rmst2perm.sample.data()
head(D)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
