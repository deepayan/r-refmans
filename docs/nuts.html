<!DOCTYPE html><html><head><title>Help for package nuts</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {nuts}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#nuts-package'><p>nuts: Convert European Regional Data</p></a></li>
<li><a href='#all_nuts_codes'><p>List of all NUTS codes and classifications</p></a></li>
<li><a href='#cross_walks'><p>Conversion table provided by the Joint Research Center of the European Commission</p></a></li>
<li><a href='#manure'><p>Manure storage facilities by NUTS 3 regions from Eurostat (aei_fm_ms)</p></a></li>
<li><a href='#nuts_aggregate'><p>Aggregate to higher order NUTS levels</p></a></li>
<li><a href='#nuts_classify'><p>Classify version of NUTS codes</p></a></li>
<li><a href='#nuts_convert_version'><p>Convert between NUTS versions</p></a></li>
<li><a href='#nuts_get_data'><p>Return classified NUTS data</p></a></li>
<li><a href='#nuts_get_missing'><p>Return missing NUTS codes in classified NUTS data</p></a></li>
<li><a href='#nuts_get_version'><p>Return version overlap of classified NUTS data</p></a></li>
<li><a href='#nuts_test_multiple_versions'><p>Helper function to test for multiple versions</p></a></li>
<li><a href='#patents'><p>Patent applications to the EPO by priority year by NUTS 3 regions (pat_ep_rtot)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Convert European Regional Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Motivated by changing administrative boundaries over time,
    the 'nuts' package can convert European regional data with NUTS codes
    between versions (2006, 2010, 2013, 2016 and 2021) and levels (NUTS 1,
    NUTS 2 and NUTS 3). The package uses spatial interpolation as in Lam
    (1983) &lt;<a href="https://doi.org/10.1559%2F152304083783914958">doi:10.1559/152304083783914958</a>&gt; based on granular (100m x
    100m) area, population and land use data provided by the European
    Commission's Joint Research Center.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.ropensci.org/nuts/">https://docs.ropensci.org/nuts/</a>, <a href="https://github.com/ropensci/nuts">https://github.com/ropensci/nuts</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/nuts">https://github.com/ropensci/nuts</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, dplyr, glue, lifecycle, rlang</td>
</tr>
<tr>
<td>Suggests:</td>
<td>distill, eurostat, formatR, ggalluvial, ggfittext, ggplot2,
ggpubr, ggrepel, gridExtra, kableExtra, knitr, raster,
RColorBrewer, readr, rmarkdown, sf, stringr, terra, testthat,
tidyr, withr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-21 10:16:28 UTC; moritz</td>
</tr>
<tr>
<td>Author:</td>
<td>Moritz Hennicke <a href="https://orcid.org/0000-0001-6811-1821"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Werner Krause <a href="https://orcid.org/0000-0002-5069-7964"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cph],
  Pueyo-Ros Josep [rev] (Josep reviewed the package for rOpenSci, see
    https://github.com/ropensci/software-review/issues/623#issuecomment-1951446662),
  Le Meur Nolwenn [rev] (Nolwenn reviewed the package for rOpenSci, see
    https://github.com/ropensci/software-review/issues/623#issuecomment-1961501137)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Moritz Hennicke &lt;AAoritz@posteo.de&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-22 19:10:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='nuts-package'>nuts: Convert European Regional Data</h2><span id='topic+nuts'></span><span id='topic+nuts-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Motivated by changing administrative boundaries over time, the 'nuts' package can convert European regional data with NUTS codes between versions (2006, 2010, 2013, 2016 and 2021) and levels (NUTS 1, NUTS 2 and NUTS 3). The package uses spatial interpolation as in Lam (1983) <a href="https://doi.org/10.1559/152304083783914958">doi:10.1559/152304083783914958</a> based on granular (100m x 100m) area, population and land use data provided by the European Commission's Joint Research Center.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Moritz Hennicke <a href="mailto:AAoritz@posteo.de">AAoritz@posteo.de</a> (<a href="https://orcid.org/0000-0001-6811-1821">ORCID</a>) [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Werner Krause <a href="mailto:werner.krause@uni-potsdam.de">werner.krause@uni-potsdam.de</a> (<a href="https://orcid.org/0000-0002-5069-7964">ORCID</a>) [copyright holder]
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Pueyo-Ros Josep (Josep reviewed the package for rOpenSci, see https://github.com/ropensci/software-review/issues/623#issuecomment-1951446662) [reviewer]
</p>
</li>
<li><p> Le Meur Nolwenn (Nolwenn reviewed the package for rOpenSci, see https://github.com/ropensci/software-review/issues/623#issuecomment-1961501137) [reviewer]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://docs.ropensci.org/nuts/">https://docs.ropensci.org/nuts/</a>
</p>
</li>
<li> <p><a href="https://github.com/ropensci/nuts">https://github.com/ropensci/nuts</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ropensci/nuts">https://github.com/ropensci/nuts</a>
</p>
</li></ul>


<hr>
<h2 id='all_nuts_codes'>List of all NUTS codes and classifications</h2><span id='topic+all_nuts_codes'></span>

<h3>Description</h3>

<p>The data frame stores all NUTS codes in hierarchical levels 1, 2 and 3 by
NUTS classification versions 2006, 2010, 2013, 2016 and 2021.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_nuts_codes
</code></pre>


<h3>Format</h3>



<h4><code>all_nuts_codes</code></h4>

<p>A data frame with 8,896 rows and 2 columns:
</p>

<dl>
<dt>code</dt><dd><p>NUTS code</p>
</dd>
<dt>version</dt><dd><p>NUTS versions</p>
</dd>
<dt>country</dt><dd><p>Country name</p>
</dd>
</dl>




<h3>Source</h3>

<p><a href="https://urban.jrc.ec.europa.eu/nutsconverter/#/">https://urban.jrc.ec.europa.eu/nutsconverter/#/</a>
</p>

<hr>
<h2 id='cross_walks'>Conversion table provided by the Joint Research Center of the European Commission</h2><span id='topic+cross_walks'></span>

<h3>Description</h3>

<p>The table contains population, area and surface flows between two NUTS regions and
different NUTS code classifications. NUTS regions are at 1st, 2nd and 3rd level.
NUTS versions are 2006, 2010, 2013, 2016 and 2021.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cross_walks
</code></pre>


<h3>Format</h3>



<h4><code>cross_walks</code></h4>

<p>A data frame with 47,340 rows and 9 columns:
</p>

<dl>
<dt>from_code</dt><dd><p>Departing NUTS code</p>
</dd>
<dt>to_code</dt><dd><p>Desired NUTS code</p>
</dd>
<dt>from_version</dt><dd><p>Departing NUTS version</p>
</dd>
<dt>to_version</dt><dd><p>Desired NUTS version</p>
</dd>
<dt>level</dt><dd><p>NUTS division level</p>
</dd>
<dt>country</dt><dd><p>Country name</p>
</dd>
<dt>areaKm</dt><dd><p>Area size flow</p>
</dd>
<dt>pop18</dt><dd><p>2018 population flow</p>
</dd>
<dt>pop11</dt><dd><p>2011 population flow</p>
</dd>
<dt>artif_surf18</dt><dd><p>2018 artificial surfaces flow</p>
</dd>
<dt>artif_surf12</dt><dd><p>2012 artificial surfaces flow</p>
</dd>
</dl>




<h3>Source</h3>

<p><a href="https://urban.jrc.ec.europa.eu/nutsconverter/#/">https://urban.jrc.ec.europa.eu/nutsconverter/#/</a>
</p>

<hr>
<h2 id='manure'>Manure storage facilities by NUTS 3 regions from Eurostat (aei_fm_ms)</h2><span id='topic+manure'></span>

<h3>Description</h3>

<p>The data frame contains the number of different manure storage facilities from the Farm Structure Survey
in all (former) EU member states, such as Iceland, Norway, Switzerland and Montenegro at the NUTS 3 level.
Please see the link indicated below for more information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>manure
</code></pre>


<h3>Format</h3>



<h4><code>manure</code></h4>

<p>A data frame with 17,151 rows and 4 columns:
</p>

<dl>
<dt>indic_ag</dt><dd><p>9 indicators: All manure storage facilities, solid dung, liquid manure
slurry, slurry: tank, slurry: lagoon; covered facilities with either dung, liquid manure, slurry</p>
</dd>
<dt>geo</dt><dd><p>NUTS 1, 2, 3 or National level</p>
</dd>
<dt>time</dt><dd><p>Years 2000, 2003 and 2010</p>
</dd>
<dt>values</dt><dd><p>Number</p>
</dd>
</dl>




<h3>Source</h3>

<p><a href="https://ec.europa.eu/eurostat/databrowser/view/aei_fm_ms/default/table?lang=en">https://ec.europa.eu/eurostat/databrowser/view/aei_fm_ms/default/table?lang=en</a>
</p>

<hr>
<h2 id='nuts_aggregate'>Aggregate to higher order NUTS levels</h2><span id='topic+nuts_aggregate'></span>

<h3>Description</h3>

<p><code>nuts_aggregate()</code> transforms regional NUTS data between NUTS levels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nuts_aggregate(
  data,
  to_level,
  variables,
  weight = NULL,
  missing_rm = FALSE,
  missing_weights_pct = FALSE,
  multiple_versions = c("error", "most_frequent")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nuts_aggregate_+3A_data">data</code></td>
<td>
<p>A nuts.classified object returned by <code><a href="#topic+nuts_classify">nuts_classify()</a></code>.</p>
</td></tr>
<tr><td><code id="nuts_aggregate_+3A_to_level">to_level</code></td>
<td>
<p>Number corresponding to the desired NUTS level to be aggregated to: <code>1</code> or <code>2</code>.</p>
</td></tr>
<tr><td><code id="nuts_aggregate_+3A_variables">variables</code></td>
<td>
<p>Named character specifying variable names and variable type (<code>'absolute'</code> or <code>'relative'</code>), e.g. <code>c('var_name' = 'absolute')</code>.</p>
</td></tr>
<tr><td><code id="nuts_aggregate_+3A_weight">weight</code></td>
<td>
<p>String with name of the weight used for conversion. Can be area size <code>'areaKm'</code> (default),
population in 2011 <code>'pop11'</code> or 2018 <code>'pop18'</code>, or artificial surfaces in 2012 <code>'artif_surf12'</code> and 2018 <code>'artif_surf18'</code>.</p>
</td></tr>
<tr><td><code id="nuts_aggregate_+3A_missing_rm">missing_rm</code></td>
<td>
<p>Boolean that is FALSE by default. TRUE removes regional flows that depart from missing NUTS codes.</p>
</td></tr>
<tr><td><code id="nuts_aggregate_+3A_missing_weights_pct">missing_weights_pct</code></td>
<td>
<p>Boolean that is FALSE by default. TRUE computes the percentage of missing weights due to missing departing NUTS regions for each variable.</p>
</td></tr>
<tr><td><code id="nuts_aggregate_+3A_multiple_versions">multiple_versions</code></td>
<td>
<p>By default equal to <code>'error'</code>, when providing multiple NUTS versions within groups.
If set to <code>'most_frequent'</code> data is converted using the best-matching NUTS version.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Console messages can be controlled with <code>rlang::local_options(nuts.verbose = "quiet")</code> to silence messages and
<code>nuts.verbose = "verbose"</code> to switch messages back on.
</p>


<h3>Value</h3>

<p>A tibble containing NUTS codes, aggregated variable values, and possibly grouping variables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

# Load EUROSTAT data of manure storage deposits
data(manure)

# Data varies at the NUTS level x indicator x year x country x NUTS code level
head(manure)

# Aggregate from NUTS 3 to 2 by indicator x year
manure %&gt;%
  filter(nchar(geo) == 5) %&gt;%
  nuts_classify(nuts_code = "geo",
                group_vars = c('indic_ag','time')) %&gt;%
  # Group vars are automatically passed on
  nuts_aggregate(to_level = 2,
                 variables = c('values'= 'absolute'),
                 weight = 'pop18')

</code></pre>

<hr>
<h2 id='nuts_classify'>Classify version of NUTS codes</h2><span id='topic+nuts_classify'></span>

<h3>Description</h3>

<p><code>nuts_classify()</code> can identify the NUTS version year and level from a variable containing NUTS codes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nuts_classify(
  data,
  nuts_code,
  group_vars = NULL,
  ties = c("most_recent", "oldest")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nuts_classify_+3A_data">data</code></td>
<td>
<p>A data frame or tibble that contains a variable with NUTS <code>1</code>, <code>2</code> or <code>3</code> codes and possibly other variables.
NUTS codes must be of the same level and need to be unique, unless additional grouping variables are specified. No
duplicate NUTS codes within groups allowed.</p>
</td></tr>
<tr><td><code id="nuts_classify_+3A_nuts_code">nuts_code</code></td>
<td>
<p>Variable name containing NUTS codes</p>
</td></tr>
<tr><td><code id="nuts_classify_+3A_group_vars">group_vars</code></td>
<td>
<p>Variable name(s) for classification within groups. <code>nuts_classify()</code> always computes overlap within country. Hence, country variables should not be specified. <code>NULL</code> by default.</p>
</td></tr>
<tr><td><code id="nuts_classify_+3A_ties">ties</code></td>
<td>
<p>Picks <code>'most_recent'</code> or <code>'oldest'</code> version when overlap is identical across multiple NUTS versions. <code>'most_recent'</code>
by default.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Console messages can be controlled with <code>rlang::local_options(nuts.verbose = "quiet")</code> to silence messages and
<code>nuts.verbose = "verbose"</code> to switch messages back on.
</p>


<h3>Value</h3>

<p>A list of three tibbles. The first tibble contains the original data with the classified NUTS version, level, and country.
The second tibble lists the group-specific overlap with each NUTS version. The third tibble shows missing NUTS codes
for each group.
</p>
<p>The output can be passed to <code><a href="#topic+nuts_convert_version">nuts_convert_version()</a></code> to convert data across NUTS versions and <code><a href="#topic+nuts_aggregate">nuts_aggregate()</a></code> to aggregate across NUTS levels.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

# Load EUROSTAT data of manure storage deposits
data(manure)

# Data varies at the NUTS level x indicator x year x country x NUTS code level
head(manure)

# Classify version of NUTS 2 codes in Germany
manure %&gt;%
 filter(nchar(geo) == 4) %&gt;%
 filter(indic_ag == 'I07A_EQ_Y') %&gt;%
 filter(grepl('^DE', geo)) %&gt;%
 filter(time == 2003) %&gt;%
 select(-indic_ag, -time) %&gt;%
 # Data varies at the NUTS code level
 nuts_classify(nuts_code = 'geo')

# Classify version of NUTS 3 codes within country and year
manure %&gt;%
  filter(nchar(geo) == 5) %&gt;%
  filter(indic_ag == 'I07A_EQ_Y') %&gt;%
  select(-indic_ag) %&gt;%
  # Data varies at the year x country x NUTS code level. The country grouping
  # is always used by default.
  nuts_classify(nuts_code = 'geo', group_vars = 'time')


</code></pre>

<hr>
<h2 id='nuts_convert_version'>Convert between NUTS versions</h2><span id='topic+nuts_convert_version'></span>

<h3>Description</h3>

<p><code>nuts_convert_version()</code> transforms regional NUTS data between NUTS versions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nuts_convert_version(
  data,
  to_version,
  variables,
  weight = NULL,
  missing_rm = FALSE,
  missing_weights_pct = FALSE,
  multiple_versions = c("error", "most_frequent")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nuts_convert_version_+3A_data">data</code></td>
<td>
<p>A nuts.classified object returned by <code><a href="#topic+nuts_classify">nuts_classify()</a></code>.</p>
</td></tr>
<tr><td><code id="nuts_convert_version_+3A_to_version">to_version</code></td>
<td>
<p>String with desired NUTS version the function should convert to. Possible versions: <code>'2006'</code>, <code>'2010'</code>, <code>'2013'</code>, <code>'2016'</code> or <code>'2021'</code></p>
</td></tr>
<tr><td><code id="nuts_convert_version_+3A_variables">variables</code></td>
<td>
<p>Named character specifying variable names and variable type (<code>'absolute'</code> or <code>'relative'</code>) e.g. <code>c('var_name' = 'absolute')</code></p>
</td></tr>
<tr><td><code id="nuts_convert_version_+3A_weight">weight</code></td>
<td>
<p>String with name of the weight used for conversion. Can be area size <code>'areaKm'</code> (default),
population in 2011 <code>'pop11'</code> or 2018 <code>'pop18'</code>, or artificial surfaces in 2012 <code>'artif_surf12'</code> and 2018 <code>'artif_surf18'</code>.</p>
</td></tr>
<tr><td><code id="nuts_convert_version_+3A_missing_rm">missing_rm</code></td>
<td>
<p>Boolean that is FALSE by default. TRUE removes regional flows that depart from missing NUTS codes.</p>
</td></tr>
<tr><td><code id="nuts_convert_version_+3A_missing_weights_pct">missing_weights_pct</code></td>
<td>
<p>Boolean that is FALSE by default. TRUE computes the percentage of missing weights due to missing departing NUTS regions for each variable.</p>
</td></tr>
<tr><td><code id="nuts_convert_version_+3A_multiple_versions">multiple_versions</code></td>
<td>
<p>By default equal to <code>'error'</code>, when providing multiple NUTS versions within groups.
If set to <code>'most_frequent'</code> data is converted using the best-matching NUTS version.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Console messages can be controlled with <code>rlang::local_options(nuts.verbose = "quiet")</code> to silence messages and
<code>nuts.verbose = "verbose"</code> to switch messages back on.
</p>


<h3>Value</h3>

<p>A tibble containing NUTS codes, converted variable values, and possibly grouping variables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

# Load EUROSTAT data of manure storage deposits
data(manure)

# Data varies at the NUTS level x indicator x year x country x NUTS code level
head(manure)

# Convert NUTS 2 codes in Germany from 2006 to 2021 version
manure %&gt;%
  filter(nchar(geo) == 4) %&gt;%
  filter(indic_ag == 'I07A_EQ_Y') %&gt;%
  filter(grepl('^DE', geo)) %&gt;%
  filter(time == 2003) %&gt;%
  select(-indic_ag, -time) %&gt;%
  # Data now only varies at the NUTS code level
  nuts_classify(nuts_code = "geo") %&gt;%
  nuts_convert_version(to_version = '2021',
                       weight = 'pop18',
                       variables = c('values' = 'absolute'))


# Convert NUTS 3 codes by country x year, classifying version first
manure %&gt;%
  filter(nchar(geo) == 5) %&gt;%
  filter(indic_ag == 'I07A_EQ_Y') %&gt;%
  select(-indic_ag) %&gt;%
  # Data now varies at the year x NUTS code level
  nuts_classify(nuts_code = 'geo', group_vars = c('time')) %&gt;%
  nuts_convert_version(to_version = '2021',
                       weight = 'pop18',
                       variables = c('values' = 'absolute'))


</code></pre>

<hr>
<h2 id='nuts_get_data'>Return classified NUTS data</h2><span id='topic+nuts_get_data'></span>

<h3>Description</h3>

<p><code>nuts_get_data()</code> returns the classified data after running <code>nuts_classify()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nuts_get_data(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nuts_get_data_+3A_data">data</code></td>
<td>
<p>A nuts.classified object returned by <code><a href="#topic+nuts_classify">nuts_classify()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Console messages can be controlled with <code>rlang::local_options(nuts.verbose = "quiet")</code> to silence messages and
<code>nuts.verbose = "verbose"</code> to switch messages back on.
</p>


<h3>Value</h3>

<p>A tibble containing the original data with the classified NUTS version, level, and country.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

# Load EUROSTAT data of manure storage deposits
data(manure)

# Classify version of NUTS 2 codes in Germany
classified &lt;- manure %&gt;%
   filter(nchar(geo) == 4) %&gt;%
   filter(indic_ag == 'I07A_EQ_Y') %&gt;%
   filter(grepl('^DE', geo)) %&gt;%
   filter(time == 2003) %&gt;%
   select(-indic_ag, -time) %&gt;%
   # Data varies at the NUTS code level
   nuts_classify(nuts_code = 'geo')

nuts_get_data(classified)

</code></pre>

<hr>
<h2 id='nuts_get_missing'>Return missing NUTS codes in classified NUTS data</h2><span id='topic+nuts_get_missing'></span>

<h3>Description</h3>

<p><code>nuts_get_missing()</code> returns the classified data after running <code>nuts_classify()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nuts_get_missing(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nuts_get_missing_+3A_data">data</code></td>
<td>
<p>A nuts.classified object returned by <code><a href="#topic+nuts_classify">nuts_classify()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Console messages can be controlled with <code>rlang::local_options(nuts.verbose = "quiet")</code> to silence messages and
<code>nuts.verbose = "verbose"</code> to switch messages back on.
</p>


<h3>Value</h3>

<p>A tibble listing missing NUTS codes for each group.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

# Load EUROSTAT data of manure storage deposits
data(manure)

# Classify version of NUTS 2 codes in Germany
classified &lt;- manure %&gt;%
   filter(nchar(geo) == 4) %&gt;%
   filter(indic_ag == 'I07A_EQ_Y') %&gt;%
   filter(grepl('^DE', geo)) %&gt;%
   filter(time == 2003) %&gt;%
   select(-indic_ag, -time) %&gt;%
   # Data varies at the NUTS code level
   nuts_classify(nuts_code = 'geo')

nuts_get_missing(classified)

</code></pre>

<hr>
<h2 id='nuts_get_version'>Return version overlap of classified NUTS data</h2><span id='topic+nuts_get_version'></span>

<h3>Description</h3>

<p><code>nuts_get_version()</code> returns the classified data after running <code>nuts_classify()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nuts_get_version(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nuts_get_version_+3A_data">data</code></td>
<td>
<p>A nuts.classified object returned by <code><a href="#topic+nuts_classify">nuts_classify()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Console messages can be controlled with <code>rlang::local_options(nuts.verbose = "quiet")</code> to silence messages and
<code>nuts.verbose = "verbose"</code> to switch messages back on.
</p>


<h3>Value</h3>

<p>A tibble that lists the group-specific overlap with each NUTS version.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

# Load EUROSTAT data of manure storage deposits
data(manure)

# Classify version of NUTS 2 codes in Germany
classified &lt;- manure %&gt;%
   filter(nchar(geo) == 4) %&gt;%
   filter(indic_ag == 'I07A_EQ_Y') %&gt;%
   filter(grepl('^DE', geo)) %&gt;%
   filter(time == 2003) %&gt;%
   select(-indic_ag, -time) %&gt;%
   # Data varies at the NUTS code level
   nuts_classify(nuts_code = 'geo')

nuts_get_version(classified)

</code></pre>

<hr>
<h2 id='nuts_test_multiple_versions'>Helper function to test for multiple versions</h2><span id='topic+nuts_test_multiple_versions'></span>

<h3>Description</h3>

<p><code>nuts_test_multiple_versions</code> is called from either <code>nuts_convert_version</code> or <code>nuts_aggregate</code>
to selects the most frequent version within groups or throw an error.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nuts_test_multiple_versions(group_vars, multiple_versions, data_versions, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nuts_test_multiple_versions_+3A_group_vars">group_vars</code></td>
<td>
<p>Variable name(s) for classification within groups. Always computes overlap within country. <code>NULL</code> by default.</p>
</td></tr>
<tr><td><code id="nuts_test_multiple_versions_+3A_multiple_versions">multiple_versions</code></td>
<td>
<p>By default equal to <code>'error'</code>, when providing multiple NUTS versions within groups.</p>
</td></tr>
<tr><td><code id="nuts_test_multiple_versions_+3A_data_versions">data_versions</code></td>
<td>
<p>Data versions</p>
</td></tr>
<tr><td><code id="nuts_test_multiple_versions_+3A_data">data</code></td>
<td>
<p>A nuts.classified object returned by <code><a href="#topic+nuts_classify">nuts_classify()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing NUTS codes, the potential number of rows dropped and a message with the results of the test.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
df &lt;- manure %&gt;%
  filter(nchar(geo) == 5) %&gt;%
  select(geo, indic_ag, values) %&gt;%
  distinct(geo,  .keep_all = TRUE) %&gt;%
  nuts_classify(nuts_code = "geo",
                group_vars = "indic_ag",
                data = .)

nuts_test_multiple_versions(group_vars = "indic_ag",
                            multiple_versions = "most_frequent",
                            data_versions = df$versions_data,
                            data = df$data)

</code></pre>

<hr>
<h2 id='patents'>Patent applications to the EPO by priority year by NUTS 3 regions (pat_ep_rtot)</h2><span id='topic+patents'></span>

<h3>Description</h3>

<p>The data frame contains information on patent applications to the European Patent Office
by year and NUTS 3 regions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>patents
</code></pre>


<h3>Format</h3>



<h4><code>patents</code></h4>

<p>A data frame with 104,106 rows and 4 columns:
</p>

<dl>
<dt>unit</dt><dd><p>4 indicators: Number, Nominal GDP in billion euro, Per million habitants,
Per million of population in the labor force</p>
</dd>
<dt>geo</dt><dd><p>NUTS 1, 2, 3 or National level</p>
</dd>
<dt>time</dt><dd><p>Years 2008, 2009, 2010, 2011 and 2012</p>
</dd>
<dt>values</dt><dd><p>Values</p>
</dd>
</dl>




<h3>Source</h3>

<p><a href="https://ec.europa.eu/eurostat/databrowser/view/PAT_EP_RTOT/default/table">https://ec.europa.eu/eurostat/databrowser/view/PAT_EP_RTOT/default/table</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
