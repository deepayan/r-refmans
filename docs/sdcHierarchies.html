<!DOCTYPE html><html lang="en"><head><title>Help for package sdcHierarchies</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {sdcHierarchies}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#hier_add'><p>Add nodes to an existing hierarchy</p></a></li>
<li><a href='#hier_app'><p>Create/Modify hierarchies interactively</p></a></li>
<li><a href='#hier_codes'><p>Default-Codes</p></a></li>
<li><a href='#hier_compute'><p>Compute a nested hierarchy</p></a></li>
<li><a href='#hier_convert'><p>Converts hierarchies into different formats</p></a></li>
<li><a href='#hier_create'><p>Create a hierarchy</p></a></li>
<li><a href='#hier_delete'><p>Delete nodes from an existing hierarchy</p></a></li>
<li><a href='#hier_display'><p>Displays the hierarchy</p></a></li>
<li><a href='#hier_export'><p>Export a hierarchy into a file</p></a></li>
<li><a href='#hier_grid'><p>Compute a grid given different hierarchies</p></a></li>
<li><a href='#hier_import'><p>Imports a nested data structure</p></a></li>
<li><a href='#hier_info'><p>Information about hierarchy-codes</p></a></li>
<li><a href='#hier_match'><p>Match default and original node labels</p></a></li>
<li><a href='#hier_nodenames'><p>Extract name of nodes (levels)</p></a></li>
<li><a href='#hier_rename'><p>Rename nodes in an existing hierarchy</p></a></li>
<li><a href='#hier_to_tree'><p>Convert a nested hierarchy into the default format</p></a></li>
<li><a href='#hier_vignette'><p>Show the package vignette</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Create and (Interactively) Modify Nested Hierarchies</td>
</tr>
<tr>
<td>Version:</td>
<td>0.21.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-01-10</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides functionality to generate, (interactively) modify (by adding, removing and renaming nodes) and convert nested hierarchies between different formats.
  These tree like structures can be used to define for example complex hierarchical tables used for statistical disclosure control.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>shinythemes</td>
</tr>
<tr>
<td>Imports:</td>
<td>shiny, shinyjs, shinyTree, jsonlite, rlang, data.table, cli,
Rcpp</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/bernhard-da/sdcHierarchies">https://github.com/bernhard-da/sdcHierarchies</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bernhard-da/sdcHierarchies/issues">https://github.com/bernhard-da/sdcHierarchies/issues</a></td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-10 05:09:40 UTC; meindl</td>
</tr>
<tr>
<td>Author:</td>
<td>Bernhard Meindl [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Bernhard Meindl &lt;bmeindl1981@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-10 06:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='hier_add'>Add nodes to an existing hierarchy</h2><span id='topic+hier_add'></span>

<h3>Description</h3>

<p>This function allows to add nodes (levels)
to an existing nested hierarchy.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hier_add(tree, root, nodes)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hier_add_+3A_tree">tree</code></td>
<td>
<p>a (nested) hierarchy created using <code><a href="#topic+hier_create">hier_create()</a></code>
or modified using <code><a href="#topic+hier_add">hier_add()</a></code>, <code><a href="#topic+hier_delete">hier_delete()</a></code> or <code><a href="#topic+hier_rename">hier_rename()</a></code>.</p>
</td></tr>
<tr><td><code id="hier_add_+3A_root">root</code></td>
<td>
<p>(character) a name of an existing node in the hierarchy</p>
</td></tr>
<tr><td><code id="hier_add_+3A_nodes">nodes</code></td>
<td>
<p>(character) names of new nodes that should be added below
<code>"root"</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>h &lt;- hier_create(root = "Total",  nodes = LETTERS[1:3])
h &lt;- hier_add(h, root = "A", nodes = c("a1", "a5"))
hier_display(h)
</code></pre>

<hr>
<h2 id='hier_app'>Create/Modify hierarchies interactively</h2><span id='topic+hier_app'></span>

<h3>Description</h3>

<p>This function starts the interactive <code>shiny</code>-app
to (optionally) create and/or modify a nested hierarchy.
It is possible to supply a character vector from which the
hierarchy can be interactively built. Once this has been done,
it is possible to modify and export the resulting hierarchy.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hier_app(x = hier_create(), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hier_app_+3A_x">x</code></td>
<td>
<p>a character vector containing nested levels or
an object generated with <code><a href="#topic+hier_create">hier_create()</a></code></p>
</td></tr>
<tr><td><code id="hier_app_+3A_...">...</code></td>
<td>
<p>arguments (e.g <code>host</code>) that are passed
through <code><a href="shiny.html#topic+runApp">shiny::runApp()</a></code> when
starting the shiny application</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Another option is to supply an already existing hierarchy object.
In this case, it is possible to modify the existing object in
the app.
</p>


<h3>Value</h3>

<p>The app can return a hierarchy object (either
a <code>data.frame</code> or a tree-based object)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# start with an empty hierarchy
res &lt;- hier_app()

# start with a character vector that is used to
build the hierarchy
codes &lt;- c("11", "12", "21", "22", "23", "31", "32")
res &lt;- hier_app(codes); print(res)

## End(Not run)
</code></pre>

<hr>
<h2 id='hier_codes'>Default-Codes</h2><span id='topic+hier_codes'></span>

<h3>Description</h3>

<p><code><a href="#topic+hier_codes">hier_codes()</a></code> returns the standardized codes for the nodes of a tree.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hier_codes(tree)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hier_codes_+3A_tree">tree</code></td>
<td>
<p>a (nested) hierarchy created using <code><a href="#topic+hier_create">hier_create()</a></code>
or modified using <code><a href="#topic+hier_add">hier_add()</a></code>, <code><a href="#topic+hier_delete">hier_delete()</a></code> or <code><a href="#topic+hier_rename">hier_rename()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a named character vector with names being the node-names and the
values the standardized codes
</p>


<h3>Examples</h3>

<pre><code class='language-R'>h &lt;- hier_create(root = "Total",  nodes = LETTERS[1:3])
h &lt;- hier_add(h, root = "A", nodes = c("a1", "a5"))
hier_codes(h)
</code></pre>

<hr>
<h2 id='hier_compute'>Compute a nested hierarchy</h2><span id='topic+hier_compute'></span>

<h3>Description</h3>

<p>This function allows to compute a nested hierarchy from an character
vector or a (named) list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hier_compute(inp, dim_spec = NULL, root = NULL, method = "len", as = "network")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hier_compute_+3A_inp">inp</code></td>
<td>
<p>a character vector (for methods <code>"len"</code> and <code>"endpos"</code>
containing codes of a hierarchical variables or a list for
method <code>list</code>. In the latter case, the input is expected to be a
named list where each list-element contains the codes belonging to the
node that has the name of this specific list element. In the examples
below, the required input formats are further explained.</p>
</td></tr>
<tr><td><code id="hier_compute_+3A_dim_spec">dim_spec</code></td>
<td>
<p>an (integerish) vector containing either the length
(in terms of characters) for each level or the end-positions of
these levels. In the latter-case, one needs to set argument
<code>method</code> to <code>"endpos"</code>. This argument is ignored in case the
hierarchy should be created from a named list.</p>
</td></tr>
<tr><td><code id="hier_compute_+3A_root">root</code></td>
<td>
<p><code>NULL</code> or a scalar characer specifying the name
of the overall total in case it is not encoded at the first
positions of <code>dim</code>.</p>
</td></tr>
<tr><td><code id="hier_compute_+3A_method">method</code></td>
<td>
<p>either <code>"len"</code> (the default) or <code>"endpos"</code>
</p>

<ul>
<li> <p><code>"len"</code>: the number of characters for each of the levels
needs to be specified
</p>
</li>
<li> <p><code>"endpos"</code>: the end-positions for each levels need to be fixed
</p>
</li>
<li> <p><code>"list"</code>: the end-positions for each levels need to be fixed
</p>
</li></ul>
</td></tr>
<tr><td><code id="hier_compute_+3A_as">as</code></td>
<td>
<p>(character) specifies the type of the return object. Possible
choices are:
</p>

<ul>
<li> <p><code>"network"</code>: the default; a <code>data.table</code> as network. The
table consists of two columns where the <code>"root"</code> column defines the
name of parent node to the label in the <code>"leaf"</code> column.
</p>
</li>
<li> <p><code>"df"</code>: a <code>data.frame</code> in <code>"@; label"</code>-format.
</p>
</li>
<li> <p><code>"dt"</code>: a <code>data.table</code> in <code>"@; label"</code>-format.
</p>
</li>
<li> <p><code>"code"</code>: returns the R-code that is required to build
the tree
</p>
</li>
<li> <p><code>"sdc"</code>: the tree is structured as a list
</p>
</li>
<li> <p><code>"argus"</code>: suitable input for <code><a href="#topic+hier_export">hier_export()</a></code> to
write <code>"hrc"</code>-files for tau argus.
</p>
</li>
<li> <p><code>"json"</code>: a character-vector encoded as json-string.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>a hierarchical data structure depending on choice of
argument <code>as</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example Regional Codes (NUTS)
# digits 1-2 (len=2, endpos=2) --&gt; level 1
# digit 3 (len=1, endpos=3) --&gt; level 2
# digits 4-5 (len=2, endpos=5) -&gt; level 3

# all strings have equal length but total is not encoded in these values
geo_m &lt;- c(
  "01051", "01053", "01054", "01055",
  "01056", "01057", "01058", "01059", "01060",
  "01061", "01062",
  "02000",
  "03151", "03152", "03153", "03154", "03155", "03156", "03157", "03158",
  "03251", "03252", "03254", "03255", "03256", "03257",
  "03351", "03352", "03353", "03354", "03355",
  "03356", "03357", "03358", "03359",
  "03360", "03361",
  "03451", "03452", "03453", "03454", "03455", "03456",
  "10155")

a &lt;- hier_compute(
  inp = geo_m,
  dim_spec = c(2, 3, 5),
  root = "Tot",
  method = "endpos"
)
b &lt;- hier_compute(
  inp = geo_m,
  dim_spec = c(2, 1, 2),
  root = "Tot",
  method = "len"
)
identical(
  hier_convert(a, as = "df"),
  hier_convert(b, as = "df")
)

# total is contained in the first 3 positions of the input values
# --&gt; we need to set name of the overall total (argument "root")
# to NULL (the default)
geo_m_with_tot &lt;- paste0("Tot", geo_m)
a &lt;- hier_compute(
  inp = geo_m_with_tot,
  dim_spec = c(3, 2, 1, 2),
  method = "len"
)
b &lt;- hier_compute(
  inp = geo_m_with_tot,
  dim_spec = c(3, 5, 6, 8),
  method = "endpos"
)
identical(a, b)

# example where inputs have unequal length
# the overall total is not included in input vector
yae_h &lt;- c(
  "1.1.1.", "1.1.2.",
  "1.2.1.", "1.2.2.", "1.2.3.", "1.2.4.", "1.2.5.", "1.3.1.",
  "1.3.2.", "1.3.3.", "1.3.4.", "1.3.5.",
  "1.4.1.", "1.4.2.", "1.4.3.", "1.4.4.", "1.4.5.",
  "1.5.", "1.6.", "1.7.", "1.8.", "1.9.", "2.", "3.")

a &lt;- hier_compute(
  inp = yae_h,
  dim_spec = c(2, 4, 6),
  root = "Tot",
  method = "endpos"
)
b &lt;- hier_compute(
  inp = yae_h,
  dim_spec = c(2, 2, 2),
  root = "Tot",
  method = "len"
)
identical(
  hier_convert(a, as = "df"),
  hier_convert(b, as = "df")
)

# Same example, but overall total is contained in the first 3 positions
# of the input values --&gt; argument "root" needs to be
# set to NULL (the default)
yae_h_with_tot &lt;- paste0("Tot", yae_h)
a &lt;- hier_compute(
  inp = yae_h_with_tot,
  dim_spec = c(3, 2, 2, 2),
  method = "len",
)
b &lt;- hier_compute(
  inp = yae_h_with_tot,
  dim_spec = c(3, 5, 7, 9),
  method = "endpos"
)
identical(a, b)

# An example using a list as input (same as above)
# Hierarchy: digits 1-2 (nuts1), digit 3 (nut2), digits 4-5 (nuts3)
# The order of the list-elements is not important but the
# names of input-list correspond to (subtotal/level) names
geo_ll &lt;- list()
geo_ll[["Total"]] &lt;- c("01", "02", "03", "10")
geo_ll[["010"]]   &lt;- c(
  "01051", "01053", "01054", "01055",
  "01056", "01057", "01058", "01059",
  "01060", "01061", "01062"
)
geo_ll[["031"]]   &lt;- c(
  "03151", "03152", "03153", "03154",
  "03155", "03156", "03157", "03158"
)
geo_ll[["032"]]   &lt;- c(
  "03251", "03252", "03254",
  "03255", "03256", "03257"
)
geo_ll[["033"]]   &lt;- c(
  "03351", "03352", "03353", "03354", "03355",
  "03356", "03357", "03358", "03359",
  "03360", "03361"
)
geo_ll[["034"]]   &lt;- c(
  "03451", "03452", "03453",
  "03454", "03455","03456"
)
geo_ll[["01"]]    &lt;- "010"
geo_ll[["02"]]    &lt;- "020"
geo_ll[["020"]]   &lt;- "02000"
geo_ll[["03"]]    &lt;- c("031", "032", "033", "034")
geo_ll[["10"]]    &lt;- "101"
geo_ll[["101"]]   &lt;- "10155"

d &lt;- hier_compute(
  inp = geo_ll,
  root = "Total",
  method = "list"
); d

## Reproduce example from above with input defined as named list
yae_ll &lt;- list()
yae_ll[["Total"]] &lt;- c("1.", "2.", "3.")
yae_ll[["1."]] &lt;- paste0("1.", 1:9, ".")
yae_ll[["1.1."]] &lt;- paste0("1.1.", 1:2, ".")
yae_ll[["1.2."]] &lt;- paste0("1.2.", 1:5, ".")
yae_ll[["1.3."]] &lt;- paste0("1.3.", 1:5, ".")
yae_ll[["1.4."]] &lt;- paste0("1.4.", 1:6, ".")

# return result as data.frame
d &lt;- hier_compute(
  inp = yae_ll,
  root = "Total",
  method = "list",
  as = "df"
); d
</code></pre>

<hr>
<h2 id='hier_convert'>Converts hierarchies into different formats</h2><span id='topic+hier_convert'></span>

<h3>Description</h3>

<p>This functions allows to convert nested hierarchies into
other data structures.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hier_convert(tree, as = "df")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hier_convert_+3A_tree">tree</code></td>
<td>
<p>a (nested) hierarchy created using <code><a href="#topic+hier_create">hier_create()</a></code>
or modified using <code><a href="#topic+hier_add">hier_add()</a></code>, <code><a href="#topic+hier_delete">hier_delete()</a></code> or <code><a href="#topic+hier_rename">hier_rename()</a></code>.</p>
</td></tr>
<tr><td><code id="hier_convert_+3A_as">as</code></td>
<td>
<p>(character) specifying the export format. Possible choices are:
</p>

<ul>
<li> <p><code>"df"</code>: a <code>data.frame</code> with two columns. The first
columns contains a string containing as many <code>@</code> as the level of the
node in the string (e.g <code>@</code> corresponds to the overall
total while <code>@</code> would be all codes contributing to the total.
The second column contains the names of the levels.
</p>
</li>
<li> <p><code>"dt"</code>: like the <code>df</code>-version but this result is
converted to a <code>data.table</code>
</p>
</li>
<li> <p><code>"argus"</code>: used to create hrc-files suitable for tau-argus
</p>
</li>
<li> <p><code>"json"</code>: json format suitable e.g. as input for
the shinyTree package.
</p>
</li>
<li> <p><code>"code"</code>: code required to generate the hierarchy
</p>
</li>
<li> <p><code>"sdc"</code>: a <code>list</code> which is a suitable input for <code>sdcTable</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>h &lt;- hier_create(root = "Total", nodes = LETTERS[1:2])
h &lt;- hier_add(h, root = "A", nodes = c("a1", "a2"))
h &lt;- hier_add(h, root = "B", nodes = c("b1", "b2"))
h &lt;- hier_add(h, root = "b1", nodes = "b1a")
hier_display(h)

# required code to build the hierarchy
hier_convert(h, as = "code")

# data.frame
hier_convert(h, as = "df")
</code></pre>

<hr>
<h2 id='hier_create'>Create a hierarchy</h2><span id='topic+hier_create'></span>

<h3>Description</h3>

<p>This functions allows to generate a hierarchical
data structure that can be used in other packages such
as <a href="https://github.com/sdcTools/cellKey"><code>cellKey</code></a>
or <a href="https://github.com/sdcTools/sdcTable"><code>sdcTable</code></a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hier_create(root = "Total", nodes = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hier_create_+3A_root">root</code></td>
<td>
<p>(character) name of the overall total</p>
</td></tr>
<tr><td><code id="hier_create_+3A_nodes">nodes</code></td>
<td>
<p>(character) name of leaves (nodes) in the hierarchy</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a (nested) sdc hierarchy tree
</p>


<h3>See Also</h3>

<p>hier_add hier_delete hier_rename hier_export
hier_convert hier_app hier_info
</p>


<h3>Examples</h3>

<pre><code class='language-R'># without nodes
h &lt;- hier_create(root = "tot")
hier_display(h)

# with nodes
h &lt;- hier_create(root = "tot", nodes = LETTERS[1:5])
hier_display(h)
</code></pre>

<hr>
<h2 id='hier_delete'>Delete nodes from an existing hierarchy</h2><span id='topic+hier_delete'></span>

<h3>Description</h3>

<p>This function allows to delete nodes (levels)
from an existing nested hierarchy.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hier_delete(tree, nodes)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hier_delete_+3A_tree">tree</code></td>
<td>
<p>a (nested) hierarchy created using <code><a href="#topic+hier_create">hier_create()</a></code>
or modified using <code><a href="#topic+hier_add">hier_add()</a></code>, <code><a href="#topic+hier_delete">hier_delete()</a></code> or <code><a href="#topic+hier_rename">hier_rename()</a></code>.</p>
</td></tr>
<tr><td><code id="hier_delete_+3A_nodes">nodes</code></td>
<td>
<p>character vector of nodes that should be deleted</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>h &lt;- hier_create(root = "Total", nodes = LETTERS[1:2])
h &lt;- hier_add(h, root = "A", nodes = c("a1", "a2"))
h &lt;- hier_add(h, root = "B", nodes = c("b1", "b2"))
h &lt;- hier_add(h, root = "b1", nodes = "b1a")
hier_display(h)

h &lt;- hier_delete(h, nodes = c("a1", "b1a"))
hier_display(h)
</code></pre>

<hr>
<h2 id='hier_display'>Displays the hierarchy</h2><span id='topic+hier_display'></span>

<h3>Description</h3>

<p>This function shows the entire hierarchy in a nice way.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hier_display(x, root = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hier_display_+3A_x">x</code></td>
<td>
<p>a hierarchy object, either directly generated and modified using
<code><a href="#topic+hier_create">hier_create()</a></code>, <code><a href="#topic+hier_add">hier_add()</a></code>, <code><a href="#topic+hier_delete">hier_delete()</a></code> and/or <code><a href="#topic+hier_rename">hier_rename()</a></code> or
objects converted using <code><a href="#topic+hier_convert">hier_convert()</a></code></p>
</td></tr>
<tr><td><code id="hier_display_+3A_root">root</code></td>
<td>
<p><code>NULL</code> if the entire tree should be printed or a name of
a node which is used as temporary root-node for printing</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>NULL</code>; the tree is printed to the prompt
</p>


<h3>Examples</h3>

<pre><code class='language-R'>h &lt;- hier_create(root = "Total", nodes = LETTERS[1:2])
h &lt;- hier_add(h, root = "A", nodes = c("a1", "a2"))

# display the entire tree
hier_display(h)

# display only a subtree
hier_display(h, root = "A")
</code></pre>

<hr>
<h2 id='hier_export'>Export a hierarchy into a file</h2><span id='topic+hier_export'></span>

<h3>Description</h3>

<p>This function allows to write nested hierarchies into files
on your disk.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hier_export(tree, as = "df", path, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hier_export_+3A_tree">tree</code></td>
<td>
<p>a (nested) hierarchy created using <code><a href="#topic+hier_create">hier_create()</a></code>
or modified using <code><a href="#topic+hier_add">hier_add()</a></code>, <code><a href="#topic+hier_delete">hier_delete()</a></code> or <code><a href="#topic+hier_rename">hier_rename()</a></code>.</p>
</td></tr>
<tr><td><code id="hier_export_+3A_as">as</code></td>
<td>
<p>(character) specifying the export format. Possible choices are:
</p>

<ul>
<li> <p><code>"df"</code>: a <code>data.frame</code> with two columns. The first
columns contains a string containing as many <code>@</code> as the level of the
node in the string (e.g <code>@</code> corresponds to the overall
total while <code>@</code> would be all codes contributing to the total.
The second column contains the names of the levels.
</p>
</li>
<li> <p><code>"dt"</code>: like the <code>df</code>-version but this result is
converted to a <code>data.table</code>
</p>
</li>
<li> <p><code>"argus"</code>: used to create hrc-files suitable for tau-argus
</p>
</li>
<li> <p><code>"json"</code>: json format suitable e.g. as input for
the shinyTree package.
</p>
</li>
<li> <p><code>"code"</code>: code required to generate the hierarchy
</p>
</li>
<li> <p><code>"sdc"</code>: a <code>list</code> which is a suitable input for <code>sdcTable</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="hier_export_+3A_path">path</code></td>
<td>
<p>(character) relative or absolute path where results should
be written to</p>
</td></tr>
<tr><td><code id="hier_export_+3A_verbose">verbose</code></td>
<td>
<p>(logical) additional results</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>h &lt;- hier_create(root = "Total", nodes = LETTERS[1:2])
h &lt;- hier_add(h, root = "A", nodes = c("a1", "a2"))
h &lt;- hier_add(h, root = "B", nodes = c("b1", "b2"))
h &lt;- hier_add(h, root = "b1", nodes = "b1a")
hier_display(h)

# export as input for tauArgus
hier_export(h, as = "argus", path = file.path(tempdir(), "h.hrc"))
</code></pre>

<hr>
<h2 id='hier_grid'>Compute a grid given different hierarchies</h2><span id='topic+hier_grid'></span>

<h3>Description</h3>

<p>This function returns a <code>data.table</code> containing all possible combinations of
codes from at least one hierarchy object. This is useful to compute a <em>&quot;complete&quot;</em>
table from several hierarchies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hier_grid(..., add_dups = TRUE, add_levs = FALSE, add_default_codes = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hier_grid_+3A_...">...</code></td>
<td>
<p>one or more hierarchy objects created with <code><a href="#topic+hier_create">hier_create()</a></code> or
<code><a href="#topic+hier_compute">hier_compute()</a></code></p>
</td></tr>
<tr><td><code id="hier_grid_+3A_add_dups">add_dups</code></td>
<td>
<p>scalar logical defining if bogus codes (codes that are the only
leaf contributing to a parent that also has no siblings) should be included.</p>
</td></tr>
<tr><td><code id="hier_grid_+3A_add_levs">add_levs</code></td>
<td>
<p>scalar logical defining if numerical levels for each codes should
be appended to the output <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="hier_grid_+3A_add_default_codes">add_default_codes</code></td>
<td>
<p>scalar logical definining if standardized level codes
should be additionally returned</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>data.table</code> featuring a column for each hierarchy object specified in
argument <code>...</code>. These columns are labeled <code style="white-space: pre;">&#8288;v{n}&#8288;</code>. If <code>add_levs</code> is <code>TRUE</code>,
for each hierarchy provided, an additional column labeled <code style="white-space: pre;">&#8288;levs_v{n}&#8288;</code> is appended
to the output. Its values define the hierarchy level of the corresponding code
given in <code style="white-space: pre;">&#8288;v{n}&#8288;</code> in the same row.
If <code>add_default_codes</code> is <code>TRUE</code>, for each hierarchy provided an additional
column <code style="white-space: pre;">&#8288;default_v{n}&#8288;</code> is provided
</p>


<h3>Examples</h3>

<pre><code class='language-R'># define some hierarchies with some "duplicates" or "bogus" codes
h1 &lt;- hier_create("Total", nodes = LETTERS[1:3])
h1 &lt;- hier_add(h1, root = "A", node = "a1")
h1 &lt;- hier_add(h1, root = "a1", node = "aa1")

h2 &lt;- hier_create("Total", letters[1:5])
h2 &lt;- hier_add(h2, root = "b", node = "b1")
h2 &lt;- hier_add(h2, root = "d", node = "d1")

# with all codes, also "bogus" codes
hier_grid(h1, h2)

# only the required codes to build the complete hierarchy (no bogus codes)
hier_grid(h1, h2, add_dups = FALSE)

# also contain columns specifying the hierarchy level
hier_grid(h1, h2, add_dups = FALSE, add_levs = TRUE)
</code></pre>

<hr>
<h2 id='hier_import'>Imports a nested data structure</h2><span id='topic+hier_import'></span>

<h3>Description</h3>

<p>This function creates a nested sdc hierarchy from various
input structures.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hier_import(inp, from = "json", root = NULL, keep_order = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hier_import_+3A_inp">inp</code></td>
<td>
<p>an object that should be imported. Argument <code>from</code> specifies
the input format.</p>
</td></tr>
<tr><td><code id="hier_import_+3A_from">from</code></td>
<td>
<p>(character) from which format should be imported.
Possible choices are:
</p>

<ul>
<li> <p><code>"json"</code>: a json-encoded string as created using
<code><a href="#topic+hier_convert">hier_convert()</a></code> with argument <code style="white-space: pre;">&#8288;as = "json")&#8288;</code>
</p>
</li>
<li> <p><code>"df"</code>: a <code>data.frame</code> in <code style="white-space: pre;">&#8288;@;level&#8288;</code>-format or an input created
with <code><a href="#topic+hier_convert">hier_convert()</a></code> with argument <code style="white-space: pre;">&#8288;as = "df")&#8288;</code>
</p>
</li>
<li> <p><code>"dt"</code>: a <code>data.frame</code> in <code style="white-space: pre;">&#8288;@;level&#8288;</code>-format or an input created
with <code><a href="#topic+hier_convert">hier_convert()</a></code> with argument <code style="white-space: pre;">&#8288;as = "dt")&#8288;</code>
</p>
</li>
<li> <p><code>"argus"</code>: a json-encoded string as created using
<code><a href="#topic+hier_convert">hier_convert()</a></code> with argument <code style="white-space: pre;">&#8288;as = "argus")&#8288;</code>
</p>
</li>
<li> <p><code>"code"</code>: a json-encoded string as created using
<code><a href="#topic+hier_convert">hier_convert()</a></code> with argument <code style="white-space: pre;">&#8288;as = "code")&#8288;</code>
</p>
</li>
<li> <p><code>"hrc"</code>: text-files in tau-argus hrc-format
</p>
</li>
<li> <p><code>"sdc"</code>: a json-encoded string as created using
<code><a href="#topic+hier_convert">hier_convert()</a></code> with argument <code style="white-space: pre;">&#8288;as = "sdc")&#8288;</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="hier_import_+3A_root">root</code></td>
<td>
<p>optional name of overall total</p>
</td></tr>
<tr><td><code id="hier_import_+3A_keep_order">keep_order</code></td>
<td>
<p>if <code>TRUE</code>, the original order of nodes
is kept from the input object; if <code>FALSE</code>, the nodes are
sorted lexicographically within each leaf.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a (nested) hierarchy
</p>


<h3>See Also</h3>

<p><code><a href="#topic+hier_to_tree">hier_to_tree()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>h &lt;- hier_create(root = "Total", nodes = LETTERS[1:2])
h &lt;- hier_add(h, root = "A", nodes = c("a1", "a2"))
h &lt;- hier_add(h, root = "B", nodes = c("b1", "b2"))
h &lt;- hier_add(h, root = "b1", nodes = "b1a")
hier_display(h)

df &lt;- hier_convert(h, as = "df")
hier_display(df)

h2 &lt;- hier_import(df, from = "df")
hier_display(h2)

# check order
df &lt;- data.frame(
  level = c("@", "@@", "@@"),
  name = c("T", "m", "f")
)
hier_display(hier_import(df, from = "df")) # automatically sorted (T, f, m)
hier_display(hier_import(df, from = "df", keep_order = TRUE)) # original order (T, m, f)
</code></pre>

<hr>
<h2 id='hier_info'>Information about hierarchy-codes</h2><span id='topic+hier_info'></span>

<h3>Description</h3>

<p><code><a href="#topic+hier_info">hier_info()</a></code> computes various information about hierarchy codes
or the (nested) hierarchy.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hier_info(tree, nodes = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hier_info_+3A_tree">tree</code></td>
<td>
<p>a (nested) hierarchy created using <code><a href="#topic+hier_create">hier_create()</a></code>
or modified using <code><a href="#topic+hier_add">hier_add()</a></code>, <code><a href="#topic+hier_delete">hier_delete()</a></code> or <code><a href="#topic+hier_rename">hier_rename()</a></code>.</p>
</td></tr>
<tr><td><code id="hier_info_+3A_nodes">nodes</code></td>
<td>
<p>(character) names of new nodes that should be added below
<code>"root"</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>list</code> with information about the required nodes.
If <code>nodes</code> is <code>NULL</code> (the default), the information is
computed for all available nodes of the hierarchy. The following
properties are computed:
</p>

<ul>
<li> <p><code>exists</code>: (logical) does the node exist
</p>
</li>
<li> <p><code>name</code>: (character) node name
</p>
</li>
<li> <p><code>is_rootnode</code>: (logical) is the node the overall root of the tree?
</p>
</li>
<li> <p><code>level</code>: (numeric) what is the level of the node
</p>
</li>
<li> <p><code>is_leaf</code>: (logical) is the node a leaf?
</p>
</li>
<li> <p><code>siblings</code>: (character) what are siblings of this node?
</p>
</li>
<li> <p><code>contributing_codes</code>: (character) which codes are contributing
to this node? If none (it is a leaf), <code>NA</code> is returned
</p>
</li>
<li> <p><code>children</code>: (character) the names of the children of the node.
If it has none (it is a leaf), <code>NA</code> is returned
</p>
</li>
<li> <p><code>is_bogus</code>: (logical) is it a bogus code (i. e the only
children of a leaf?)
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>h &lt;- hier_create(root = "Total",  nodes = LETTERS[1:3])
h &lt;- hier_add(h, root = "A", nodes = c("a1", "a5"))
hier_display(h)

# about a specific node
hier_info(h, nodes = "a1")

# about all nodes
hier_info(h)
</code></pre>

<hr>
<h2 id='hier_match'>Match default and original node labels</h2><span id='topic+hier_match'></span>

<h3>Description</h3>

<p>This function returns a <code>data.table</code> that maps original
and default codes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hier_match(tree, nodes = NULL, inputs = "orig")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hier_match_+3A_tree">tree</code></td>
<td>
<p>an input derived from <code><a href="#topic+hier_create">hier_create()</a></code> or
<code><a href="#topic+hier_convert">hier_convert()</a></code></p>
</td></tr>
<tr><td><code id="hier_match_+3A_nodes">nodes</code></td>
<td>
<p><code>NULL</code> or a character vector specifying either
original node names or standardized default codes. If
<code>NULL</code>, the information is returned for all nodes.</p>
</td></tr>
<tr><td><code id="hier_match_+3A_inputs">inputs</code></td>
<td>
<p>(character) specifies what kind of node names are
provided in argument <code>nodes</code>. Allowed choices are:
</p>

<ul>
<li> <p><code>"orig"</code>: argument <code>nodes</code> refers to original node names
</p>
</li>
<li> <p><code>"default"</code>: argument <code>nodes</code> refers to standardized
default codes
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>data.table</code> with the following columns:
</p>

<ul>
<li> <p><code>"orig"</code>: the original node names
</p>
</li>
<li><p> '&quot;default&quot;: the standardized names
</p>
</li>
<li> <p><code>"is_bogus"</code>: <code>TRUE</code> if the code is a <code>"bogus"</code> (duplicated)
node.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>h &lt;- hier_create(root = "Tot", nodes = letters[1:5])
h &lt;- hier_add(h, root = "a", nodes = "a0")
h2 &lt;- hier_convert(tree = h, as = "dt")
hier_match(tree = h, nodes = c("a", "b"), inputs = "orig")
hier_match(tree = h2, nodes = c("01", "02"), inputs = "default")
</code></pre>

<hr>
<h2 id='hier_nodenames'>Extract name of nodes (levels)</h2><span id='topic+hier_nodenames'></span>

<h3>Description</h3>

<p>This function allows to extract the all the names of the
nodes including all (sub)-nodes and leaves in the given
hierarchy.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hier_nodenames(tree, root = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hier_nodenames_+3A_tree">tree</code></td>
<td>
<p>a (nested) hierarchy created using <code><a href="#topic+hier_create">hier_create()</a></code>
or modified using <code><a href="#topic+hier_add">hier_add()</a></code>, <code><a href="#topic+hier_delete">hier_delete()</a></code> or <code><a href="#topic+hier_rename">hier_rename()</a></code>.</p>
</td></tr>
<tr><td><code id="hier_nodenames_+3A_root">root</code></td>
<td>
<p>(character) name of start node from which all lower
level-names should be returned</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>h &lt;- hier_create(root = "Total",  nodes = LETTERS[1:3])
h &lt;- hier_add(h, root = "A", nodes = c("a1", "a5"))
hier_nodenames(h)
</code></pre>

<hr>
<h2 id='hier_rename'>Rename nodes in an existing hierarchy</h2><span id='topic+hier_rename'></span>

<h3>Description</h3>

<p>This function allows to rename one or more node(s) (levels)
in an existing nested hierarchy.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hier_rename(tree, nodes)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hier_rename_+3A_tree">tree</code></td>
<td>
<p>a (nested) hierarchy created using <code><a href="#topic+hier_create">hier_create()</a></code>
or modified using <code><a href="#topic+hier_add">hier_add()</a></code>, <code><a href="#topic+hier_delete">hier_delete()</a></code> or <code><a href="#topic+hier_rename">hier_rename()</a></code>.</p>
</td></tr>
<tr><td><code id="hier_rename_+3A_nodes">nodes</code></td>
<td>
<p>(character) new names of nodes/levels that should be changed as
a named vector: names refer to old, existing names, the values to the
new labels</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>h &lt;- hier_create(root = "Total",  nodes = LETTERS[1:3])
h &lt;- hier_add(h, root = "A", nodes = c("a1", "a5"))
hier_display(h)

h &lt;- hier_rename(h, nodes = c("a1" = "x1", "A" = "X"))
hier_display(h)
</code></pre>

<hr>
<h2 id='hier_to_tree'>Convert a nested hierarchy into the default format</h2><span id='topic+hier_to_tree'></span>

<h3>Description</h3>

<p>This function returns a tree in default format (as for
example created using <code><a href="#topic+hier_create">hier_create()</a></code>) for objects created using
<code><a href="#topic+hier_convert">hier_convert()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hier_to_tree(inp)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hier_to_tree_+3A_inp">inp</code></td>
<td>
<p>a nested tree object created using <code><a href="#topic+hier_create">hier_create()</a></code>
or an object converted with <code><a href="#topic+hier_convert">hier_convert()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a nested hierarchy with default format
</p>


<h3>Examples</h3>

<pre><code class='language-R'>h &lt;- hier_create(root = "Total",  nodes = LETTERS[1:3])
h &lt;- hier_add(h, root = "A", nodes = c("a1", "a5"))
sdc &lt;- hier_convert(h, as = "sdc")
hier_display(h)
hier_display(hier_to_tree(h))
hier_display(hier_to_tree(sdc))
</code></pre>

<hr>
<h2 id='hier_vignette'>Show the package vignette</h2><span id='topic+hier_vignette'></span>

<h3>Description</h3>

<p>This function opens the introductionary package vignette
and opens it in a new browser tab/window.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hier_vignette()
</code></pre>


<h3>Value</h3>

<p>a browser windows/tab with showing the vignette
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
hier_vignette()

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
