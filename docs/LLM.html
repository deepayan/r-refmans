<!DOCTYPE html><html><head><title>Help for package LLM</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {LLM}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#llm'><p>Create Logit Leaf Model</p></a></li>
<li><a href='#llm.cv'><p>Runs v-fold cross validation with LLM</p></a></li>
<li><a href='#predict.llm'><p>Create Logit Leaf Model Prediction</p></a></li>
<li><a href='#table.cat.llm.html'><p>Create the HTML code for Logit Leaf Model visualization</p></a></li>
<li><a href='#table.llm.html'><p>Create the HTML code for Logit Leaf Model visualization</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Logit Leaf Model Classifier for Binary Classification</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-05-05</td>
</tr>
<tr>
<td>Author:</td>
<td>Arno De Caigny [aut, cre],
  Kristof Coussement [aut],
  Koen W. De Bock [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Arno De Caigny &lt;a.de-caigny@ieseg.fr&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Fits the Logit Leaf Model, makes predictions and visualizes the output. (De Caigny et al., (2018) &lt;<a href="https://doi.org/10.1016%2Fj.ejor.2018.02.009">doi:10.1016/j.ejor.2018.02.009</a>&gt;).</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>Suggests:</td>
<td>mlbench</td>
</tr>
<tr>
<td>Imports:</td>
<td>partykit, stats, stringr, RWeka, survey, reghelper, scales</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-05-08 06:13:51 UTC; zosia</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-05-08 06:30:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='llm'>Create Logit Leaf Model</h2><span id='topic+llm'></span>

<h3>Description</h3>

<p>This function creates the logit leaf model. It takes a dataframe with numeric
values as input and a corresponding vector with dependent values.
Decision tree parameters threshold for pruning and number of observations per
leaf can be set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>llm(X, Y, threshold_pruning = 0.25, nbr_obs_leaf = 100)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="llm_+3A_x">X</code></td>
<td>
<p>Dataframe containing numerical independent variables.</p>
</td></tr>
<tr><td><code id="llm_+3A_y">Y</code></td>
<td>
<p>Numerical vector of dependent variable. Currently only binary classification is supported.</p>
</td></tr>
<tr><td><code id="llm_+3A_threshold_pruning">threshold_pruning</code></td>
<td>
<p>Set confidence threshold for pruning. Default 0.25.</p>
</td></tr>
<tr><td><code id="llm_+3A_nbr_obs_leaf">nbr_obs_leaf</code></td>
<td>
<p>The minimum number of observations in a leaf node. Default 100.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class logitleafmodel, which is a list with the following components:
</p>
<table>
<tr><td><code>Segment Rules</code></td>
<td>
<p>The decision rules that define segments. Use <code><a href="#topic+table.llm.html">table.llm.html</a></code> to visualize.</p>
</td></tr>
<tr><td><code>Coefficients</code></td>
<td>
<p>The segment specific logistic regression coefficients. Use <code><a href="#topic+table.llm.html">table.llm.html</a></code> to visualize.</p>
</td></tr>
<tr><td><code>Full decision tree for segmentation</code></td>
<td>
<p>The raw decision tree. Use <code><a href="#topic+table.llm.html">table.llm.html</a></code> to visualize.</p>
</td></tr>
<tr><td><code>Observations per segment</code></td>
<td>
<p>The raw decision tree. Use <code><a href="#topic+table.llm.html">table.llm.html</a></code> to visualize.</p>
</td></tr>
<tr><td><code>Incidence of dependent per segment</code></td>
<td>
<p>The raw decision tree. Use <code><a href="#topic+table.llm.html">table.llm.html</a></code> to visualize.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Arno De Caigny, <a href="mailto:a.de-caigny@ieseg.fr">a.de-caigny@ieseg.fr</a>, Kristof Coussement, <a href="mailto:k.coussement@ieseg.fr">k.coussement@ieseg.fr</a> and Koen W. De Bock, <a href="mailto:kdebock@audencia.com">kdebock@audencia.com</a>
</p>


<h3>References</h3>

<p>Arno De Caigny, Kristof Coussement, Koen W. De Bock, A New Hybrid Classification Algorithm for Customer Churn Prediction Based on Logistic Regression and Decision Trees, European Journal of Operational Research (2018), doi: 10.1016/j.ejor.2018.02.009.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+predict.llm">predict.llm</a></code>, <code><a href="#topic+table.llm.html">table.llm.html</a></code>, <code><a href="#topic+llm.cv">llm.cv</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load PimaIndiansDiabetes dataset from mlbench package
if (requireNamespace("mlbench", quietly = TRUE)) {
  library("mlbench")
}
data("PimaIndiansDiabetes")
## Split in training and test (2/3 - 1/3)
idtrain &lt;- c(sample(1:768,512))
PimaTrain &lt;-PimaIndiansDiabetes[idtrain,]
Pimatest &lt;-PimaIndiansDiabetes[-idtrain,]
## Create the LLM
Pima.llm &lt;- llm(X = PimaTrain[,-c(9)],Y = PimaTrain$diabetes,
 threshold_pruning = 0.25,nbr_obs_leaf = 100)

</code></pre>

<hr>
<h2 id='llm.cv'>Runs v-fold cross validation with LLM</h2><span id='topic+llm.cv'></span>

<h3>Description</h3>

<p>In <em>v</em>-fold cross validation, the data are divided into <em>v</em> subsets of
approximately equal size. Subsequently, one of the <em>v</em> data parts is
excluded while the remaider of the data is used to create a logitleafmodel
object. Predictions are generated for the excluded data part. The process
is repeated <em>v</em> times.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>llm.cv(X, Y, cv, threshold_pruning = 0.25, nbr_obs_leaf = 100)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="llm.cv_+3A_x">X</code></td>
<td>
<p>Dataframe containing numerical independent variables.</p>
</td></tr>
<tr><td><code id="llm.cv_+3A_y">Y</code></td>
<td>
<p>Numerical vector of dependent variable. Currently only binary classification is supported.</p>
</td></tr>
<tr><td><code id="llm.cv_+3A_cv">cv</code></td>
<td>
<p>An integer specifying the number of folds in the cross-validation.</p>
</td></tr>
<tr><td><code id="llm.cv_+3A_threshold_pruning">threshold_pruning</code></td>
<td>
<p>Set confidence threshold for pruning. Default 0.25.</p>
</td></tr>
<tr><td><code id="llm.cv_+3A_nbr_obs_leaf">nbr_obs_leaf</code></td>
<td>
<p>The minimum number of observations in a leaf node. Default 100.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class llm.cv, which is a list with the following components:
</p>
<table>
<tr><td><code>foldpred</code></td>
<td>
<p>a data frame with, per fold, predicted class membership probabilities for the left-out observations</p>
</td></tr>
<tr><td><code>pred</code></td>
<td>
<p>a data frame with predicted class membership probabilities.</p>
</td></tr>
<tr><td><code>foldclass</code></td>
<td>
<p>a data frame with, per fold, predicted classes for the left-out observations.</p>
</td></tr>
<tr><td><code>class</code></td>
<td>
<p>a data frame with the predicted classes.</p>
</td></tr>
<tr><td><code>conf</code></td>
<td>
<p>the confusion matrix which compares the real versus the predicted class memberships based on the class object.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Arno De Caigny, <a href="mailto:a.de-caigny@ieseg.fr">a.de-caigny@ieseg.fr</a>, Kristof Coussement, <a href="mailto:k.coussement@ieseg.fr">k.coussement@ieseg.fr</a> and Koen W. De Bock, <a href="mailto:kdebock@audencia.com">kdebock@audencia.com</a>
</p>


<h3>References</h3>

<p>Arno De Caigny, Kristof Coussement, Koen W. De Bock, A New Hybrid Classification Algorithm for Customer Churn Prediction Based on Logistic Regression and Decision Trees, European Journal of Operational Research (2018), doi: 10.1016/j.ejor.2018.02.009.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+predict.llm">predict.llm</a></code>, <code><a href="#topic+table.llm.html">table.llm.html</a></code>, <code><a href="#topic+llm">llm</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load PimaIndiansDiabetes dataset from mlbench package
if (requireNamespace("mlbench", quietly = TRUE)) {
  library("mlbench")
}
data("PimaIndiansDiabetes")
## Create the LLM with 5-cv
Pima.llm &lt;- llm.cv(X = PimaIndiansDiabetes[,-c(9)],Y = PimaIndiansDiabetes$diabetes, cv=5,
 threshold_pruning = 0.25,nbr_obs_leaf = 100)
</code></pre>

<hr>
<h2 id='predict.llm'>Create Logit Leaf Model Prediction</h2><span id='topic+predict.llm'></span>

<h3>Description</h3>

<p>This function creates a prediction for an object of class logitleafmodel. It assumes a dataframe with numeric
values as input and an object of class logitleafmodel, which is the result of the <code><a href="#topic+llm">llm</a></code> function.
Currently only binary classification is supported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'llm'
predict(object, X, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.llm_+3A_object">object</code></td>
<td>
<p>An object of class logitleafmodel, as that created by the function llm.</p>
</td></tr>
<tr><td><code id="predict.llm_+3A_x">X</code></td>
<td>
<p>Dataframe containing numerical independent variables.</p>
</td></tr>
<tr><td><code id="predict.llm_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a dataframe containing a probablity for every instance based on the LLM model. Optional rownumbers can be added.
</p>


<h3>Author(s)</h3>

<p>Arno De Caigny, <a href="mailto:a.de-caigny@ieseg.fr">a.de-caigny@ieseg.fr</a>, Kristof Coussement, <a href="mailto:k.coussement@ieseg.fr">k.coussement@ieseg.fr</a> and Koen W. De Bock, <a href="mailto:kdebock@audencia.com">kdebock@audencia.com</a>
</p>


<h3>References</h3>

<p>Arno De Caigny, Kristof Coussement, Koen W. De Bock, A New Hybrid Classification Algorithm for Customer Churn Prediction Based on Logistic Regression and Decision Trees, European Journal of Operational Research (2018), doi: 10.1016/j.ejor.2018.02.009.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+llm">llm</a></code>, <code><a href="#topic+table.llm.html">table.llm.html</a></code>, <code><a href="#topic+llm.cv">llm.cv</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load PimaIndiansDiabetes dataset from mlbench package
if (requireNamespace("mlbench", quietly = TRUE)) {
  library("mlbench")
}
data("PimaIndiansDiabetes")
## Split in training and test (2/3 - 1/3)
idtrain &lt;- c(sample(1:768,512))
PimaTrain &lt;-PimaIndiansDiabetes[idtrain,]
Pimatest &lt;-PimaIndiansDiabetes[-idtrain,]
## Create the LLM
Pima.llm &lt;- llm(X = PimaTrain[,-c(9)],Y = PimaTrain$diabetes,
 threshold_pruning = 0.25,nbr_obs_leaf = 100)
## Use the model on the test dataset to make a prediction
PimaPrediction &lt;- predict.llm(object = Pima.llm, X = Pimatest[,-c(9)])
## Optionally add the dependent to calculate performance statistics such as AUC
# PimaPrediction &lt;- cbind(PimaPrediction, "diabetes" = Pimatest[,"diabetes"])
</code></pre>

<hr>
<h2 id='table.cat.llm.html'>Create the HTML code for Logit Leaf Model visualization</h2><span id='topic+table.cat.llm.html'></span>

<h3>Description</h3>

<p>This function generates HTML code for a visualization of the logit leaf model based on the variable importance per variable category.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>table.cat.llm.html(
  object,
  category_var_df,
  headertext = "The Logit Leaf Model",
  footertext = "A table footer comment",
  roundingnumbers = 2,
  methodvarimp = "Coef"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="table.cat.llm.html_+3A_object">object</code></td>
<td>
<p>An object of class logitleafmodel, as that created by the function llm.</p>
</td></tr>
<tr><td><code id="table.cat.llm.html_+3A_category_var_df">category_var_df</code></td>
<td>
<p>dataframe containing a column called &quot;iv&quot; with the independent variables and a column called &quot;cat&quot; with the variable category names that is associated with every iv</p>
</td></tr>
<tr><td><code id="table.cat.llm.html_+3A_headertext">headertext</code></td>
<td>
<p>Allows to provide the table with a header.</p>
</td></tr>
<tr><td><code id="table.cat.llm.html_+3A_footertext">footertext</code></td>
<td>
<p>Allows to provide the table with a custom footer.</p>
</td></tr>
<tr><td><code id="table.cat.llm.html_+3A_roundingnumbers">roundingnumbers</code></td>
<td>
<p>An integer stating the number of decimals in the visualization.</p>
</td></tr>
<tr><td><code id="table.cat.llm.html_+3A_methodvarimp">methodvarimp</code></td>
<td>
<p>Allows to determine the method to calculate the variable importance. There are 4 options: 1/ Variable coefficent (method = 'Coef) 2/ Standardized beta ('Beta') 3/ Wald statistic ('Wald') 4/ Likelihood Rate Test ('LRT')</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Generates HTML code for a visualization.
</p>


<h3>Author(s)</h3>

<p>Arno De Caigny, <a href="mailto:a.de-caigny@ieseg.fr">a.de-caigny@ieseg.fr</a>, Kristof Coussement, <a href="mailto:k.coussement@ieseg.fr">k.coussement@ieseg.fr</a> and Koen W. De Bock, <a href="mailto:kdebock@audencia.com">kdebock@audencia.com</a>
</p>


<h3>References</h3>

<p>Arno De Caigny, Kristof Coussement, Koen W. De Bock, A New Hybrid Classification Algorithm for Customer Churn Prediction Based on Logistic Regression and Decision Trees, European Journal of Operational Research (2018), doi: 10.1016/j.ejor.2018.02.009.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+predict.llm">predict.llm</a></code>, <code><a href="#topic+llm">llm</a></code>, <code><a href="#topic+llm.cv">llm.cv</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load PimaIndiansDiabetes dataset from mlbench package
if (requireNamespace("mlbench", quietly = TRUE)) {
  library("mlbench")
}
data("PimaIndiansDiabetes")
## Split in training and test (2/3 - 1/3)
idtrain &lt;- c(sample(1:768,512))
PimaTrain &lt;- PimaIndiansDiabetes[idtrain,]
Pimatest &lt;- PimaIndiansDiabetes[-idtrain,]
## Create the LLM
Pima.llm &lt;- llm(X = PimaTrain[,-c(9)],Y = PimaTrain$diabetes,
 threshold_pruning = 0.25,nbr_obs_leaf = 100)
## Define the variable categories (note: the categories are only created for demonstration)
var_cat_df &lt;- as.data.frame(cbind(names(PimaTrain[,-c(9)]),
c("cat_a","cat_a","cat_a","cat_a","cat_b","cat_b","cat_b","cat_b")), stringsAsFactors = FALSE)
names(var_cat_df) &lt;- c("iv", "cat")
## Save the output of the model to a html file
Pima.Viz &lt;- table.cat.llm.html(object = Pima.llm,category_var_df= var_cat_df,
 headertext = "This is an example of the LLM model",
footertext = "Enjoy the package!")
## Optionaly write it to your working directory
# write(Pima.Viz, "Visualization_LLM_on_PimaIndiansDiabetes.html")
</code></pre>

<hr>
<h2 id='table.llm.html'>Create the HTML code for Logit Leaf Model visualization</h2><span id='topic+table.llm.html'></span>

<h3>Description</h3>

<p>This function generates HTML code for a visualization of the logit leaf model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>table.llm.html(
  object,
  headertext = "The Logit Leaf Model",
  footertext = "A table footer comment",
  roundingnumbers = 2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="table.llm.html_+3A_object">object</code></td>
<td>
<p>An object of class logitleafmodel, as that created by the function llm.</p>
</td></tr>
<tr><td><code id="table.llm.html_+3A_headertext">headertext</code></td>
<td>
<p>Allows to provide the table with a header.</p>
</td></tr>
<tr><td><code id="table.llm.html_+3A_footertext">footertext</code></td>
<td>
<p>Allows to provide the table with a custom footer.</p>
</td></tr>
<tr><td><code id="table.llm.html_+3A_roundingnumbers">roundingnumbers</code></td>
<td>
<p>An integer stating the number of decimals in the visualization.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Generates HTML code for a visualization.
</p>


<h3>Author(s)</h3>

<p>Arno De Caigny, <a href="mailto:a.de-caigny@ieseg.fr">a.de-caigny@ieseg.fr</a>, Kristof Coussement, <a href="mailto:k.coussement@ieseg.fr">k.coussement@ieseg.fr</a> and Koen W. De Bock, <a href="mailto:kdebock@audencia.com">kdebock@audencia.com</a>
</p>


<h3>References</h3>

<p>Arno De Caigny, Kristof Coussement, Koen W. De Bock, A New Hybrid Classification Algorithm for Customer Churn Prediction Based on Logistic Regression and Decision Trees, European Journal of Operational Research (2018), doi: 10.1016/j.ejor.2018.02.009.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+predict.llm">predict.llm</a></code>, <code><a href="#topic+llm">llm</a></code>, <code><a href="#topic+llm.cv">llm.cv</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load PimaIndiansDiabetes dataset from mlbench package
if (requireNamespace("mlbench", quietly = TRUE)) {
  library("mlbench")
}
data("PimaIndiansDiabetes")
## Split in training and test (2/3 - 1/3)
idtrain &lt;- c(sample(1:768,512))
PimaTrain &lt;-PimaIndiansDiabetes[idtrain,]
Pimatest &lt;-PimaIndiansDiabetes[-idtrain,]
## Create the LLM
Pima.llm &lt;- llm(X = PimaTrain[,-c(9)],Y = PimaTrain$diabetes,
 threshold_pruning = 0.25,nbr_obs_leaf = 100)
## Save the output of the model to a html file
Pima.Viz &lt;- table.llm.html(object = Pima.llm, headertext = "This is an example of the LLM model",
footertext = "Enjoy the package!")
## Optionaly write it to your working directory
# write(Pima.Viz, "Visualization_LLM_on_PimaIndiansDiabetes.html")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
