<!DOCTYPE html><html><head><title>Help for package separationplot</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {separationplot}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#separationplot'><p>Generate a Separation Plot</p></a></li>
<li><a href='#separationplot-package'>
<p>Separation Plots</p></a></li>
<li><a href='#sp.categorical'><p>Separation plots for variables with more than two outcome levels</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Separation Plots</td>
</tr>
<tr>
<td>Version:</td>
<td>1.4</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-04-08</td>
</tr>
<tr>
<td>Author:</td>
<td>Brian D. Greenhill, Michael D. Ward and Audrey Sacks</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Brian Greenhill &lt;bgreenhill@albany.edu&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>RColorBrewer, Hmisc, MASS, foreign</td>
</tr>
<tr>
<td>Description:</td>
<td>Visual representations of model fit or predictive success in the form of "separation plots."  See Greenhill, Brian, Michael D. Ward, and Audrey Sacks. "The separation plot: A new visual method for evaluating the fit of binary models." American Journal of Political Science 55.4 (2011): 991-1002.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/Artistic-2.0">Artistic-2.0</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-04-08 17:37:37 UTC; brian</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-04-09 18:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='separationplot'>Generate a Separation Plot</h2><span id='topic+separationplot'></span>

<h3>Description</h3>

<p>This is the core function for the generation of a separation plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>separationplot(pred, actual, type = "line", line = T, lwd1 = 0.5, lwd2 = 0.5, 
heading = "",  xlab = "", shuffle = T, width = 9, height = 1.2, col0 = "#FEF0D9", 
col1 = "#E34A33", flag = NULL, flagcol = 1, file = NULL, newplot = T, locate = NULL, 
rectborder = NA, show.expected = F, zerosfirst = T, BW=F)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="separationplot_+3A_pred">pred</code></td>
<td>

<p>Vector of predicted probabilities (on a continuous 0 to 1 scale).
</p>
</td></tr>
<tr><td><code id="separationplot_+3A_actual">actual</code></td>
<td>

<p>Vector of actual outcomes (each element must be either 0 or 1).</p>
</td></tr>
<tr><td><code id="separationplot_+3A_type">type</code></td>
<td>

<p>Should the individual lines on the separation plot be plotted as line segments (<code>type="line"</code>) or rectangles (<code>type="rect"</code>), or should the probabilities in different regions of the plot be grouped into distinct bands (<code>type="bands"</code>)?</p>
</td></tr>
<tr><td><code id="separationplot_+3A_line">line</code></td>
<td>

<p>Should a trace line be added to the plot?</p>
</td></tr>
<tr><td><code id="separationplot_+3A_lwd1">lwd1</code></td>
<td>

<p>The width of the individual line segments (only when <code>type="line"</code>).</p>
</td></tr>
<tr><td><code id="separationplot_+3A_lwd2">lwd2</code></td>
<td>

<p>The width of the trace line (only when <code>line=T</code>).</p>
</td></tr>
<tr><td><code id="separationplot_+3A_heading">heading</code></td>
<td>

<p>An optional title for the plot.</p>
</td></tr>
<tr><td><code id="separationplot_+3A_xlab">xlab</code></td>
<td>

<p>An option x-axis label.</p>
</td></tr>
<tr><td><code id="separationplot_+3A_shuffle">shuffle</code></td>
<td>

<p>If <code>shuffle=T</code>, the order of rows in the results data is randomized to break up any pre-existing patterns that may distort the appearance of the results in the special case where many of the observations share the same fitted values.  This happens, for example, when the original dataframe is organized in such a way that all the cases with the event of interest come before the cases without the event.  Note that when <code>shuffle=T</code>, the random number seed is reset to 1 each time this function is called.  This ensures that replicable results can be obtained even when the order of observations is randomized.</p>
</td></tr>
<tr><td><code id="separationplot_+3A_width">width</code></td>
<td>

<p>Width of the plot space (in inches).</p>
</td></tr>
<tr><td><code id="separationplot_+3A_height">height</code></td>
<td>

<p>Height of the plot space (in inches).</p>
</td></tr>
<tr><td><code id="separationplot_+3A_col0">col0</code></td>
<td>

<p>Color of the predicted probabilities corresponding to 0s in the <code>actual</code> vector.  The default color has been chosen from one of the palettes on <a href="https://colorbrewer2.org/">https://colorbrewer2.org/</a>.</p>
</td></tr>
<tr><td><code id="separationplot_+3A_col1">col1</code></td>
<td>

<p>Color of the predicted probabilities corresponding to 1s in the <code>actual</code> vector.  The default color has been chosen from one of the palettes on <a href="https://colorbrewer2.org/">https://colorbrewer2.org/</a>.</p>
</td></tr>
<tr><td><code id="separationplot_+3A_flag">flag</code></td>
<td>

<p>A vector of row number(s) in the <code>actual</code> vector corresponding to the observations to flag.</p>
</td></tr>
<tr><td><code id="separationplot_+3A_flagcol">flagcol</code></td>
<td>

<p>A vector of colors for the flags.</p>
</td></tr>
<tr><td><code id="separationplot_+3A_file">file</code></td>
<td>

<p>The name and file path of where the pdf output should be written, if desired. If <code>file=NULL</code> the output will be written to the screen.</p>
</td></tr>
<tr><td><code id="separationplot_+3A_newplot">newplot</code></td>
<td>

<p>Should a new plotting space be opened up for the separation plot?  Select <code>newplot=F</code> if you want the separation plot to be added to currently open output device.</p>
</td></tr>
<tr><td><code id="separationplot_+3A_locate">locate</code></td>
<td>

<p>Number of lines (if any) on the separation plot that you want to identify with the mouse using the <code>locator</code> function.</p>
</td></tr>
<tr><td><code id="separationplot_+3A_rectborder">rectborder</code></td>
<td>

<p>When <code>type="rect"</code>, the value of this argument is passed to the <code>border</code> argument of the <code>rect</code> function used to draw the line segments.  The default setting (<code>rectborder=NA</code>) suppresses the drawing of borders around the individual segments of the plot.</p>
</td></tr>
<tr><td><code id="separationplot_+3A_show.expected">show.expected</code></td>
<td>

<p>If <code>show.expected=T</code>, a marker is added to the plot showing the expected total number of events.  The expected number of events is calculated by simply summing (and rounding) the predicted probabilities over all observations. </p>
</td></tr>
<tr><td><code id="separationplot_+3A_zerosfirst">zerosfirst</code></td>
<td>

<p>When <code>type="line"</code>, should the 0s be plotted in the background, and the 1s in the foreground, or vice-versa?  This will affect the output when the number of observations is very large relative to the size of the plot.</p>
</td></tr>
<tr><td><code id="separationplot_+3A_bw">BW</code></td>
<td>

<p>Should the Black and White color scheme be implemented?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Please see the paper by Greenhill, Ward and Sacks (2011) for more information on the features of the separation plot.</p>


<h3>Value</h3>

<table>
<tr><td><code>resultsmatrix</code></td>
<td>
<p>The dataframe containing the data used to generate the separation plot.  The first column is the vector of predicted probabilities, the second is the vector of actual outcomes, the third indicates which observations have been flagged using the <code>flag</code> argument above, the fourth gives the position of each observation on the horizontal axis of the separation plot, and the fifth gives the color used to plot each observation. </p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Brian Greenhill &lt;<a href="mailto:bgreenhill@albany.edu">bgreenhill@albany.edu</a>&gt;</p>


<h3>References</h3>

<p>Greenhill, Brian, Michael D. Ward, and Audrey Sacks. &quot;The separation plot: A new visual method for evaluating the fit of binary models.&quot; American Journal of Political Science 55.4 (2011): 991-1002.</p>


<h3>See Also</h3>

<p>See <code><a href="#topic+sp.categorical">sp.categorical</a></code> for plotting separation plots for models with polytomous dependent variables.</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Create a separation plot for a simple logit model:

library(MASS)
set.seed(1)
Sigma &lt;- matrix(c(1,0.78,0.78,1),2,2)
a&lt;-(mvrnorm(n=500, rep(0, 2), Sigma))
a[,2][a[,2]&gt;0.75]&lt;-1
a[,2][a[,2]&lt;=0.75]&lt;-0
a[,1]&lt;-a[,1]-min(a[,1])
a[,1]&lt;-a[,1]/max(a[,1])

cor(a) # should be 0.55

model1&lt;-glm(a[,2]~a[,1], family=binomial(link = "logit"))

library(Hmisc)
somers2(model1$fitted.values, model1$y)

separationplot(pred=model1$fitted.values, actual=model1$y, type="rect", 
line=TRUE, show.expected=TRUE, heading="Example 1")


</code></pre>

<hr>
<h2 id='separationplot-package'>
Separation Plots
</h2><span id='topic+separationplot-package'></span>

<h3>Description</h3>

<p>Visual representations of model fit or predictive success in the form of &quot;separation plots.&quot;  See Greenhill, Brian, Michael D. Ward, and Audrey Sacks. &quot;The separation plot: A new visual method for evaluating the fit of binary models.&quot; American Journal of Political Science 55.4 (2011): 991-1002.
</p>


<h3>Details</h3>

<p>The DESCRIPTION file:
</p>

<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> separationplot</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Title: </td><td style="text-align: left;"> Separation Plots</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.4</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2023-04-08</td>
</tr>
<tr>
 <td style="text-align: left;">
Author: </td><td style="text-align: left;"> Brian D. Greenhill, Michael D. Ward and Audrey Sacks</td>
</tr>
<tr>
 <td style="text-align: left;">
Maintainer: </td><td style="text-align: left;"> Brian Greenhill &lt;bgreenhill@albany.edu&gt;</td>
</tr>
<tr>
 <td style="text-align: left;">
Depends: </td><td style="text-align: left;"> RColorBrewer, Hmisc, MASS, foreign</td>
</tr>
<tr>
 <td style="text-align: left;">
Description: </td><td style="text-align: left;"> Visual representations of model fit or predictive success in the form of "separation plots."  See Greenhill, Brian, Michael D. Ward, and Audrey Sacks. "The separation plot: A new visual method for evaluating the fit of binary models." American Journal of Political Science 55.4 (2011): 991-1002.</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> Artistic-2.0</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>


<p>Index of help topics:
</p>
<pre>
separationplot          Generate a Separation Plot
separationplot-package
                        Separation Plots
sp.categorical          Separation plots for variables with more than
                        two outcome levels
</pre>
<p>A package to create &quot;separation plots&quot; as described in Greenhill, Ward, and Sacks (2011).
</p>


<h3>Author(s)</h3>

<p>Brian D. Greenhill, Michael D. Ward and Audrey Sacks
</p>
<p>Maintainer: Brian Greenhill &lt;bgreenhill@albany.edu&gt;
</p>


<h3>References</h3>

<p>Greenhill, Brian, Michael D. Ward, and Audrey Sacks. &quot;The separation plot: A new visual method for evaluating the fit of binary models.&quot; American Journal of Political Science 55.4 (2011): 991-1002.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Very simple example from the introduction to the paper:
separationplot(pred=c(0.774, 0.364, 0.997, 0.728, 0.961, 0.422), 
actual=c(0,0,1,0,1,1), shuffle=FALSE, 
line=FALSE, type="rect", rectborder=1)
</code></pre>

<hr>
<h2 id='sp.categorical'>Separation plots for variables with more than two outcome levels</h2><span id='topic+sp.categorical'></span>

<h3>Description</h3>

<p>This function generates separation plots for polytomous dependent variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sp.categorical(pred, actual, file = NULL, cex = 1.5, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sp.categorical_+3A_pred">pred</code></td>
<td>

<p>A matrix of fitted values.  Each row represents one observation, and each column represents the probability of obtaining that outcome.  The column names correspond to the outcome categories.</p>
</td></tr>
<tr><td><code id="sp.categorical_+3A_actual">actual</code></td>
<td>

<p>A vector containing the actual outcomes corresponding to each observation.</p>
</td></tr>
<tr><td><code id="sp.categorical_+3A_file">file</code></td>
<td>

<p>The name and file path of where the pdf output should be written, if desired. If <code>file=NULL</code> the output will be written to the screen.</p>
</td></tr>
<tr><td><code id="sp.categorical_+3A_cex">cex</code></td>
<td>

<p>Character expansion factor used for the outcome category labels.</p>
</td></tr>
<tr><td><code id="sp.categorical_+3A_...">...</code></td>
<td>

<p>Additional arguments passed to <code><a href="#topic+separationplot">separationplot</a></code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a wrapper for <code><a href="#topic+separationplot">separationplot</a></code> that generates a series of separation plots for each outcome category for a variable with more than two outcomes.
</p>
<p>Please see the paper by Greenhill, Ward and Sacks for more information on the features of the separation plot.</p>


<h3>Value</h3>

<p>None.  This function is used for its side effects only.
</p>


<h3>Author(s)</h3>

<p>Brian Greenhill &lt;<a href="mailto:bgreenhill@albany.edu">bgreenhill@albany.edu</a>&gt;</p>


<h3>References</h3>

<p>Greenhill, Brian, Michael D. Ward, and Audrey Sacks. &quot;The separation plot: A new visual method for evaluating the fit of binary models.&quot; American Journal of Political Science 55.4 (2011): 991-1002.</p>


<h3>See Also</h3>

<p>See <code><a href="#topic+separationplot">separationplot</a></code> for a description of the core function for generating separation plots.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# This example borrows code from the example given in the documentation for the polr() function 
# that uses the "housing" dataset:
options(contrasts = c("contr.treatment", "contr.poly"))
house.plr &lt;- polr(Sat ~ Infl + Type + Cont, weights = Freq, data = housing)

sp.categorical(pred=house.plr$fitted.values,
actual=as.character(house.plr$model[,1]), type="rect", lwd2=2)
 # not a very good fit!


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
