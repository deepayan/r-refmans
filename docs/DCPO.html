<!DOCTYPE html><html lang="en"><head><title>Help for package DCPO</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {DCPO}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#DCPO-package'><p>DCPO: Dynamic Comparative Public Opinion</p></a></li>
<li><a href='#dcpo'><p>Estimate Dynamic Comparative Public Opinion</p></a></li>
<li><a href='#dcpo_xvt'><p>Cross-validation testing for DCPO</p></a></li>
<li><a href='#demsup_data'><p>Support for Democracy in 51 Survey Datasets</p></a></li>
<li><a href='#get_xvt_results'><p>Get results of DCPO cross-validation testing</p></a></li>
<li><a href='#summarize_dcpo_results'><p>Extract DCPO Results</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>0.5.3</td>
</tr>
<tr>
<td>Title:</td>
<td>Dynamic Comparative Public Opinion</td>
</tr>
<tr>
<td>Description:</td>
<td>Estimates latent variables of public opinion cross-nationally and over time from sparse and incomparable survey data.  'DCPO' uses a population-level graded response model with country-specific item bias terms. Sampling is conducted with 'Stan'.  References: Solt (2020) &lt;<a href="https://doi.org/10.31235%2Fosf.io%2Fd5n9p">doi:10.31235/osf.io/d5n9p</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.0), Rcpp (&ge; 0.12.17), methods</td>
</tr>
<tr>
<td>Imports:</td>
<td>rstan (&ge; 2.18.1), rstantools (&ge; 2.0.0), beepr, dplyr,
forcats, janitor, purrr, tibble, tidyr</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>StanHeaders (&ge; 2.18.0), rstan (&ge; 2.18.1), BH (&ge;
1.66.0-1), Rcpp (&ge; 0.12.0), RcppEigen (&ge; 0.3.3.4.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>GNU make</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.0.0</td>
</tr>
<tr>
<td>Biarch:</td>
<td>true</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-05-28 13:23:22 UTC; fredsolt</td>
</tr>
<tr>
<td>Author:</td>
<td>Frederick Solt [aut, cre],
  Trustees of Columbia University [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Frederick Solt &lt;frederick-solt@uiowa.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-05-29 12:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='DCPO-package'>DCPO: Dynamic Comparative Public Opinion</h2><span id='topic+DCPO-package'></span><span id='topic+DCPO'></span>

<h3>Description</h3>

<p>DCPO estimates dynamic comparative public opinion as a latent variable from survey data
</p>


<h3>References</h3>

<p>Stan Development Team (2018). RStan: the R interface to Stan. R package version 2.18.2. http://mc-stan.org
</p>

<hr>
<h2 id='dcpo'>Estimate Dynamic Comparative Public Opinion</h2><span id='topic+dcpo'></span>

<h3>Description</h3>

<p><code>dcpo</code> uses diverse survey data to estimate public opinion across countries and over time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dcpo(dcpo_input, chime = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dcpo_+3A_dcpo_input">dcpo_input</code></td>
<td>
<p>a data frame of survey items and marginals generated by <code>DCPOtools::dcpo_setup</code></p>
</td></tr>
<tr><td><code id="dcpo_+3A_chime">chime</code></td>
<td>
<p>play chime when complete?</p>
</td></tr>
<tr><td><code id="dcpo_+3A_...">...</code></td>
<td>
<p>arguments to be passed to <code>rstan::stan</code>. Defaults reset by <code>dcpo</code> are
described below under details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>dcpo</code>, when passed a data frame <code>dcpo_input</code> of survey marginals created
by <code>dcpo_setup</code>, estimates a latent variable of public opinion.  See <code>rstan::stan</code> for
additional options; <code>stan</code> defaults reset by <code>dcpo</code> are <code>seed = 324, thin = 2,</code>
<code>cores = min(stan_args$chains, parallel::detectCores()/2),</code> and <code>control &lt;- list(adapt_delta = 0.99, stepsize = 0.005, max_treedepth = 14)</code>
</p>


<h3>Value</h3>

<p>a stanfit object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
out1 &lt;- dcpo(demsup_data,
             chains = 1,
             iter = 300) # 1 chain/300 iterations for example purposes only; use defaults


</code></pre>

<hr>
<h2 id='dcpo_xvt'>Cross-validation testing for DCPO</h2><span id='topic+dcpo_xvt'></span>

<h3>Description</h3>

<p><code>dcpo_xvt</code> performs a single cross-validation test for DCPO
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dcpo_xvt(
  dcpo_input,
  fold_number = 1,
  number_of_folds = 10,
  fold_seed = 324,
  chime = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dcpo_xvt_+3A_dcpo_input">dcpo_input</code></td>
<td>
<p>a data frame of survey items and marginals generated by <code>DCPOtools::dcpo_setup</code></p>
</td></tr>
<tr><td><code id="dcpo_xvt_+3A_fold_number">fold_number</code></td>
<td>
<p>an integer indicating the number of the fold to treated as test data in the current analysis</p>
</td></tr>
<tr><td><code id="dcpo_xvt_+3A_number_of_folds">number_of_folds</code></td>
<td>
<p>an integer indicating the total number of folds</p>
</td></tr>
<tr><td><code id="dcpo_xvt_+3A_fold_seed">fold_seed</code></td>
<td>
<p>a seed for reproducibly randomly assigning observations to folds; when a complete set of k-fold cross-validations is to be performed, the same seed should be used for all</p>
</td></tr>
<tr><td><code id="dcpo_xvt_+3A_chime">chime</code></td>
<td>
<p>play chime when complete?</p>
</td></tr>
<tr><td><code id="dcpo_xvt_+3A_...">...</code></td>
<td>
<p>arguments to be passed to <code>rstan::stan</code>. See <code>dcpo</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>dcpo_xvt</code> performs a single cross-validation test of a DCPO estimation.  To perform
a complete k-fold cross-validation, call it repeatedly, changing only the fold_number argument.
</p>


<h3>Value</h3>

<p>a stanfit object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Single cross-validation test with 25% test set
demsup_xvtest_25pct &lt;- dcpo_xvt(demsup_data,
                           number_of_folds = 4,
                           iter = 300,
                           chains = 1) # 1 chain/300 iterations for example only; use defaults


</code></pre>

<hr>
<h2 id='demsup_data'>Support for Democracy in 51 Survey Datasets</h2><span id='topic+demsup_data'></span>

<h3>Description</h3>

<p>A dataset containing the prices and other attributes of almost 54,000
diamonds.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>demsup_data
</code></pre>


<h3>Format</h3>

<p>A list of 15 elements
</p>

<dl>
<dt>K</dt><dd><p>an integer, the total number of countries in the data</p>
</dd>
<dt>T</dt><dd><p>an integer, the total number of years in the data</p>
</dd>
<dt>Q</dt><dd><p>an integer, the total number of distinct survey questions in the data</p>
</dd>
<dt>R</dt><dd><p>an integer, the maximum number of response cutpoints in any survey question in the data</p>
</dd>
<dt>N</dt><dd><p>an integer, the number of KTQR observations</p>
</dd>
<dt>kk</dt><dd><p>a numeric vector of length N, the country of each observation</p>
</dd>
<dt>tt</dt><dd><p>a numeric vector of length N, the year of each observation</p>
</dd>
<dt>qq</dt><dd><p>a numeric vector of length N, the question of each observation</p>
</dd>
<dt>rr</dt><dd><p>a numeric vector of length N, the response cutpoint of each observation</p>
</dd>
<dt>y_r</dt><dd><p>a numeric vector of length N, the number of respondents who provided a response above the relevant cutpoint for each observation</p>
</dd>
<dt>n_r</dt><dd><p>a numeric vector of length N, the total number of respondents for each observation</p>
</dd>
<dt>fixed_cutp</dt><dd><p>a QxR matrix, a truth table indicating the question-cutpoint to be fixed at difficulty .5</p>
</dd>
<dt>use_delta</dt><dd><p>a QxK tibble, a truth table indicating whether item difficulty should be estimated to vary by question-country to account for potential item-response bias</p>
</dd>
<dt>data</dt><dd><p>an Nx14 tibble, the aggregate survey response dataset in its original format</p>
</dd>
<dt>data_args</dt><dd><p>a list of length 3, indicating the arguments passed to DCPOtools::format_dcpo to generate demsup_data from demsup_data$data</p>
</dd>
</dl>


<h3>Details</h3>

<p>Data on aggregate support for democracy reported in 51 survey datasets in 998 country-years,
formatted for use with the functions of the DCPO package
</p>


<h3>Source</h3>

<p>demsup_data replicates the data employed in Claassen, Christopher. 2019. &quot;Estimating
Smooth Country-Year Panels of Public Opinion.&quot; Political Analysis 27(1):1-20. See <a href="https://github.com/fsolt/DCPOtools">https://github.com/fsolt/DCPOtools</a>.
</p>

<hr>
<h2 id='get_xvt_results'>Get results of DCPO cross-validation testing</h2><span id='topic+get_xvt_results'></span>

<h3>Description</h3>

<p><code>get_xvt_results</code> performs a single cross-validation test for dcpo's estimates of cross-national public opinion
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_xvt_results(dcpo_xvt_output, ci = 80)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_xvt_results_+3A_dcpo_xvt_output">dcpo_xvt_output</code></td>
<td>
<p>output from a single call to <code>DCPO::dcpo_xvt</code> or a k-fold test list of such output generated by purrr::map</p>
</td></tr>
<tr><td><code id="get_xvt_results_+3A_ci">ci</code></td>
<td>
<p>an integer indicating the desired width of credible interval for coverage testing; 80 is the default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a stanfit object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Single cross-validation test with 25% test set
demsup_xvtest_25pct &lt;- dcpo_xvt(demsup_data,
                           chime = FALSE,
                           number_of_folds = 4,
                           iter = 300,
                           chains = 1) # 1 chain/300 iterations for example only; use defaults

get_xvt_results(demsup_xvtest_25pct)


</code></pre>

<hr>
<h2 id='summarize_dcpo_results'>Extract DCPO Results</h2><span id='topic+summarize_dcpo_results'></span>

<h3>Description</h3>

<p><code>summarize_dcpo_results</code> is a convenience function that produces summary statistics of the main parameters of a DCPO stanfit object along with the relevant identifying information (country, year, question, and cutpoint).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summarize_dcpo_results(
  dcpo_input,
  dcpo_output,
  pars = c("theta", "sigma", "alpha", "beta", "delta"),
  probs = c(0.1, 0.9)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summarize_dcpo_results_+3A_dcpo_input">dcpo_input</code></td>
<td>
<p>the data frame of survey items and marginals generated by <code>DCPOtools::dcpo_setup</code> previously passed to <code>DCPO::dcpo</code> to generate the stanfit object passed as <code>dcpo_output</code></p>
</td></tr>
<tr><td><code id="summarize_dcpo_results_+3A_dcpo_output">dcpo_output</code></td>
<td>
<p>a stanfit object output by <code>DCPO::dcpo</code></p>
</td></tr>
<tr><td><code id="summarize_dcpo_results_+3A_pars">pars</code></td>
<td>
<p>a character vector of parameter names to be summarized from the <code>DCPO</code> model: theta (mean public opinion), sigma (polarization in public opinion), alpha (question dispersion), beta (question-cutpoint difficulty), and/or delta (country-specific question bias)</p>
</td></tr>
<tr><td><code id="summarize_dcpo_results_+3A_probs">probs</code></td>
<td>
<p>a numeric vector of quantiles of interest; the default is c(.1, .9)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
out1 &lt;- dcpo(demsup_data,
             chime = FALSE,
             chains = 1,
             iter = 300) # 1 chain/300 iterations for example purposes only; use defaults

theta_results &lt;- summarize_dcpo_results(dcpo_input = demsup_data,
                                        dcpo_output = out1,
                                        pars = "theta")


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
