<!DOCTYPE html><html><head><title>Help for package hydflood</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {hydflood}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#hydflood'><p>hydflood: Flood Extents and Durations along the Rivers Elbe and Rhine</p></a></li>
<li><a href='#classifyToPNV'><p>Function to reclassify flood durations to potential natural vegetation</p></a></li>
<li><a href='#createTiles'><p>Function to split large areas (<code>sfc_POLYGON</code>) into</p>
tiles</a></li>
<li><a href='#df.pnv'><p>Reference <code>data.frame</code> used to classify flood duration into</p>
potential natural vegetation.</a></li>
<li><a href='#flood1'><p>Function to compute flood extent or flood duration <code>SpatRaster</code></p>
along the German federal waterways Elbe and Rhine using the 1d water level
algorithm <code>hyd1d::waterLevelFlood1()</code></a></li>
<li><a href='#flood2'><p>Function to compute flood extent or flood duration <code>SpatRaster</code></p>
along the German federal waterways Elbe and Rhine using the 1d water level
algorithm <code>hyd1d::waterLevelFlood2()</code></a></li>
<li><a href='#flood3'><p>Function to compute flood extent or flood duration <code>SpatRaster</code></p>
along the German federal waterways Elbe and Rhine using the 1d water level
algorithms <code>hyd1d::waterLevel()</code> and <code>hyd1d::waterLevelPegelonline()</code></a></li>
<li><a href='#flood3Points'><p>Function to compute flood duration for point coordinates along the</p>
German federal waterways Elbe and Rhine using the 1d water level algorithms
<code>hyd1d::waterLevel()</code> and <code>hyd1d::waterLevelPegelonline()</code></a></li>
<li><a href='#getDEM'><p>Function to obtain the digital elevation models for the active</p>
floodplains along the German federal waterways Elbe and Rhine</a></li>
<li><a href='#hydSpatRaster'><p>Initialize a <code>SpatRaster</code> for the flood-functions</p></a></li>
<li><a href='#sf.af'><p>Obtain projected versions of <code>sf.afe</code> and <code>sf.afr</code></p></a></li>
<li><a href='#sf.afe'><p>Active floodplain along the River Elbe</p></a></li>
<li><a href='#sf.afr'><p>Active floodplain along the River Rhine</p></a></li>
<li><a href='#sf.tiles'><p>Obtain projected versions of <code>sf.tiles_elbe</code> and</p>
<code>sf.tiles_rhine</code></a></li>
<li><a href='#sf.tiles_elbe'><p>Tiling along the active floodplain of the River Elbe</p></a></li>
<li><a href='#sf.tiles_rhine'><p>Tiling along the active floodplain of the River Rhine</p></a></li>
<li><a href='#w80ToSFL'><p>Function to convert w80-files to <code>sfc_LINESTRING</code>.</p></a></li>
<li><a href='#w80ToSFP'><p>Function to convert w80-files to <code>sfc_POINT</code>.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Flood Extents and Durations along the Rivers Elbe and Rhine</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.7</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-11-17</td>
</tr>
<tr>
<td>Description:</td>
<td>Raster based flood modelling internally using 'hyd1d', an R package
    to interpolate 1d water level and gauging data. The package computes flood
    extent and durations through strategies originally developed for 'INFORM',
    an 'ArcGIS'-based hydro-ecological modelling framework. It does not provide
    a full, physical hydraulic modelling algorithm, but a simplified, near real
    time 'GIS' approach for flood extent and duration modelling. Computationally
    demanding annual flood durations have been computed already and data
    products were published by Weber (2022) &lt;<a href="https://doi.org/10.1594%2FPANGAEA.948042">doi:10.1594/PANGAEA.948042</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0), sf, terra, raster, hyd1d</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, Rdpack, grDevices</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, devtools, pkgdown, roxygen2, testthat,
plot3D, plotrix, shiny, shinyjs, shiny.i18n, leaflet,
leaflet.extras, leaflet.esri, pangaear, rgrass, stringr</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>Rdpack</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Collate:</td>
<td>'classifyToPNV.R' 'createTiles.R' 'data.R' 'flood1.R'
'flood2.R' 'flood3.R' 'flood3Points.R' 'getDEM.R' 'hydflood.R'
'hydflood-internal.R' 'hydSpatRaster.R' 'w80ToSpatial.R'
'zzz.R'</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bafg-bund/hydflood/issues/">https://github.com/bafg-bund/hydflood/issues/</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://hydflood.bafg.de">https://hydflood.bafg.de</a>, <a href="https://github.com/bafg-bund/hydflood">https://github.com/bafg-bund/hydflood</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-17 13:26:20 UTC; WeberA</td>
</tr>
<tr>
<td>Author:</td>
<td>Arnd Weber <a href="https://orcid.org/0000-0002-5973-2770"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Stephan Rosenzweig [ctb],
  Benjamin Eberhardt [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Arnd Weber &lt;arnd.weber@bafg.de&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-20 08:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='hydflood'>hydflood: Flood Extents and Durations along the Rivers Elbe and Rhine</h2><span id='topic+hydflood'></span><span id='topic+hydflood-package'></span>

<h3>Description</h3>

<p>Raster based flood modelling internally using <span class="pkg">hyd1d</span>, an
R package to interpolate 1d water level and gauging data. The package
computes flood extent and durations through strategies originally developed
for 'INFORM', an 'ArcGIS'-based hydro-ecological modelling framework. It
does not provide a full, physical hydraulic modelling algorithm, but a
simplified, near real time 'GIS' approach for flood extent and duration
modelling. Computationally demanding annual flood durations have been
computed already and data products were published by Weber (2022)
<a href="doi:10.1594/PANGAEA.948042">doi:10.1594/PANGAEA.948042</a>.
</p>

<hr>
<h2 id='classifyToPNV'>Function to reclassify flood durations to potential natural vegetation</h2><span id='topic+classifyToPNV'></span>

<h3>Description</h3>

<p>This function is a wrapper to the function
<code><a href="terra.html#topic+classify">classify</a></code> to convert flood durations computed with
<code><a href="#topic+flood3">flood3</a></code> into potential natural vegetation (PNV) distributions using
reclassification rules supplied with <code><a href="#topic+df.pnv">df.pnv</a></code>. Alternative
reclassification rules may be applied, but they must match column names and
types as given by <code><a href="#topic+df.pnv">df.pnv</a></code>. <code><a href="terra.html#topic+classify">classify</a></code> is
called with <code>include.lowest = TRUE</code> and <code>right = FALSE</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>classifyToPNV(x, rcl = NULL, filename = "", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="classifyToPNV_+3A_x">x</code></td>
<td>
<p>argument of type <code><a href="terra.html#topic+SpatRaster">SpatRaster</a></code>.</p>
</td></tr>
<tr><td><code id="classifyToPNV_+3A_rcl">rcl</code></td>
<td>
<p>optional argument of type <code>data.frame</code> with columns and
column types as specified in <code><a href="#topic+df.pnv">df.pnv</a></code>.</p>
</td></tr>
<tr><td><code id="classifyToPNV_+3A_filename">filename</code></td>
<td>
<p>supplies an optional output filename of type
<code>character</code>.</p>
</td></tr>
<tr><td><code id="classifyToPNV_+3A_...">...</code></td>
<td>
<p>additional arguments as for <code><a href="terra.html#topic+writeRaster">writeRaster</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="terra.html#topic+SpatRaster">SpatRaster</a></code> object containing potential natural
vegetation distribution as categorical raster.
</p>


<h3>References</h3>

<p>Ochs K, Egger G, Weber A, Ferreira T, Householder JE, Schneider M (2020).
&ldquo;The potential natural vegetation of large river floodplains – From dynamic to static equilibrium.&rdquo;
<em>Journal of Hydro-environment Research</em>, <b>30</b>, 71-81.
<a href="https://doi.org/10.1016/j.jher.2020.01.005">doi:10.1016/j.jher.2020.01.005</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+df.pnv">df.pnv</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  cache &lt;- tempdir()
  options("hyd1d.datadir" = cache)
  options("hydflood.datadir" = cache)
  options(timeout = 200)
  library(hydflood)
  
  # import the raster data and create a raster stack
  c &lt;- st_crs("EPSG:25833")
  e &lt;- ext(309000, 309300, 5749000, 5749300)
  x &lt;- hydSpatRaster(ext = e, crs = c)
  
  # create a temporal sequence
  seq &lt;- seq(as.Date("2016-01-01"), as.Date("2016-12-31"), by = "day")
  
  # compute a flood duration
  fd &lt;- flood3(x = x, seq = seq)
  
  # reclassify to PNV
  pnv &lt;- classifyToPNV(fd)
  
  # plot pnv map
  plot(pnv)


</code></pre>

<hr>
<h2 id='createTiles'>Function to split large areas (<code>sfc_POLYGON</code>) into
tiles</h2><span id='topic+createTiles'></span>

<h3>Description</h3>

<p>To simplify and accelerate the computation of flood duration
with <code><a href="#topic+flood3">flood3</a></code> in massive areas this function provides a simple
tiling algorithm.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createTiles(x, size_x, size_y, subset = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createTiles_+3A_x">x</code></td>
<td>
<p>has to by type <code>sf</code>.</p>
</td></tr>
<tr><td><code id="createTiles_+3A_size_x">size_x</code></td>
<td>
<p>tile size along the x-axis in the units of the current projection (<code>numeric</code>).</p>
</td></tr>
<tr><td><code id="createTiles_+3A_size_y">size_y</code></td>
<td>
<p>tile size along the y-axis in the units of the current projection (<code>numeric</code>).</p>
</td></tr>
<tr><td><code id="createTiles_+3A_subset">subset</code></td>
<td>
<p><code>boolean</code> determining whether all or only intersecting tiles are returned.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>sf</code> object containing tiles covering <code>x</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  options("hydflood.datadir" = tempdir())
  library(hydflood)
  tiles &lt;- createTiles(x = sf.af(name = "Elbe"),
                       size_x = 10000, size_y = 10000)
  plot(tiles["tile_ID"])

</code></pre>

<hr>
<h2 id='df.pnv'>Reference <code>data.frame</code> used to classify flood duration into
potential natural vegetation.</h2><span id='topic+df.pnv'></span>

<h3>Description</h3>

<p>Reference <code>data.frame</code> used to classify flood duration into
potential natural vegetation (PNV). It is an extended and more detailled
table to reclassify flood duration into PNV based on Ochs et al. (2020).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>df.pnv
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> containing 7 columns with attributes to
reclassify flood duration into potential natural vegetation.
</p>

<dl>
<dt>from</dt><dd><p>lower limits of flood duration (included, type <code>numeric</code>).</p>
</dd>
<dt>to</dt><dd><p>upper limits of flood duration (not included, type <code>numeric</code>).</p>
</dd>
<dt>id</dt><dd><p>numeric replacements used to sort classes (type <code>numeric</code>).</p>
</dd>
<dt>vegtype</dt><dd><p>names of the potential natural vegetation classes (type <code>character</code>).</p>
</dd>
<dt>r</dt><dd><p>numeric coding for the r (red) of an rgb color code.</p>
</dd>
<dt>g</dt><dd><p>numeric coding for the g (green) of an rgb color code.</p>
</dd>
<dt>b</dt><dd><p>numeric coding for the b (blue) of an rgb color code.</p>
</dd>
<dt>html</dt><dd><p>html color coding (type <code>character</code>).</p>
</dd>
</dl>



<h3>References</h3>

<p>Ochs K, Egger G, Weber A, Ferreira T, Householder JE, Schneider M (2020).
&ldquo;The potential natural vegetation of large river floodplains – From dynamic to static equilibrium.&rdquo;
<em>Journal of Hydro-environment Research</em>, <b>30</b>, 71-81.
<a href="https://doi.org/10.1016/j.jher.2020.01.005">doi:10.1016/j.jher.2020.01.005</a>.
</p>

<hr>
<h2 id='flood1'>Function to compute flood extent or flood duration <code>SpatRaster</code>
along the German federal waterways Elbe and Rhine using the 1d water level
algorithm <code>hyd1d::waterLevelFlood1()</code></h2><span id='topic+flood1'></span>

<h3>Description</h3>

<p>Computes flood extent, if <code>length(seq)</code> equals 1, or flood
duration for the active floodplains along the German federal waterways Elbe
and Rhine based on 1d water levels computed by
<code><a href="hyd1d.html#topic+waterLevelFlood1">waterLevelFlood1</a></code> provided by package <span class="pkg">hyd1d</span> in
analogy to the INFORM 3 module 'Flut1'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flood1(x, seq, gauging_station, uuid, filename = "", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flood1_+3A_x">x</code></td>
<td>
<p>has to be type <code>SpatRaster</code> and has to include both input
layers <code>csa</code> (cross section areas) and <code>dem</code> (digital
elevation model). To compute water levels along the River Elbe, <code>x</code>
has to be in the coordinate reference system
<a href="https://spatialreference.org/ref/epsg/etrs89-utm-zone-33n/">ETRS 1989 UTM 33N</a>,
for the River Rhine in
<a href="https://spatialreference.org/ref/epsg/etrs89-utm-zone-32n/">ETRS 1989 UTM 32N</a>.
Other coordinate reference systems are not permitted.</p>
</td></tr>
<tr><td><code id="flood1_+3A_seq">seq</code></td>
<td>
<p>has to be type <code>c("POSIXct", "POSIXt")</code> or <code>Date</code> and
have a length larger than 0. Values of <code>seq</code> must be in the
temporal range between 1960-01-01 and yesterday (<code>Sys.Date() - 1</code>).
Internally <code><a href="hyd1d.html#topic+waterLevelFlood1">waterLevelFlood1</a></code> uses <code><a href="hyd1d.html#topic+getGaugingDataW">getGaugingDataW</a></code>
to obtain daily water level information from <code><a href="hyd1d.html#topic+df.gauging_data">df.gauging_data</a></code>.</p>
</td></tr>
<tr><td><code id="flood1_+3A_gauging_station">gauging_station</code></td>
<td>
<p>has to be type <code>character</code> and has to have a
length of one. Permitted values are: 'SCHOENA', 'PIRNA', 'DRESDEN',
'MEISSEN', 'RIESA', 'MUEHLBERG', 'TORGAU', 'PRETZSCH-MAUKEN', 'ELSTER',
'WITTENBERG', 'COSWIG', 'VOCKERODE', 'ROSSLAU', 'DESSAU', 'AKEN', 'BARBY',
'SCHOENEBECK', 'MAGDEBURG-BUCKAU', 'MAGDEBURG-STROMBRUECKE',
'MAGDEBURG-ROTHENSEE', 'NIEGRIPP AP', 'ROGAETZ', 'TANGERMUENDE', 'STORKAU',
'SANDAU', 'SCHARLEUK', 'WITTENBERGE', 'MUEGGENDORF', 'SCHNACKENBURG',
'LENZEN', 'GORLEBEN', 'DOEMITZ', 'DAMNATZ', 'HITZACKER', 'NEU DARCHAU',
'BLECKEDE', 'BOIZENBURG', 'HOHNSTORF', 'ARTLENBURG', 'GEESTHACHT',
'RHEINWEILER', 'BREISACH', 'RUST', 'OTTENHEIM', 'KEHL-KRONENHOF',
'IFFEZHEIM', 'PLITTERSDORF', 'MAXAU', 'PHILIPPSBURG', 'SPEYER', 'MANNHEIM',
'WORMS', 'NIERSTEIN-OPPENHEIM', 'MAINZ', 'OESTRICH', 'BINGEN', 'KAUB',
'SANKT GOAR', 'BOPPARD', 'BRAUBACH', 'KOBLENZ', 'ANDERNACH', 'OBERWINTER',
'BONN', 'KOELN', 'DUESSELDORF', 'RUHRORT', 'WESEL', 'REES', 'EMMERICH'.</p>
</td></tr>
<tr><td><code id="flood1_+3A_uuid">uuid</code></td>
<td>
<p>has to be type <code>character</code> and has to have a length of one.
Permitted values are: '7cb7461b-3530-4c01-8978-7f676b8f71ed',
'85d686f1-55b2-4d36-8dba-3207b50901a7',
'70272185-b2b3-4178-96b8-43bea330dcae',
'24440872-5bd2-4fb3-8554-907b49816c49',
'b04b739d-7ffa-41ee-9eb9-95cb1b4ef508',
'16b9b4e7-be14-41fd-941e-6755c97276cc',
'83bbaedb-5d81-4bc6-9f66-3bd700c99c1f',
'f3dc8f07-c2bb-4b92-b0b0-4e01a395a2c6',
'c093b557-4954-4f05-8f5c-6c6d7916c62d',
'070b1eb4-3872-4e07-b2e5-e25fd9251b93',
'1ce53a59-33b9-40dc-9b17-3cd2a2414607',
'ae93f2a5-612e-4514-b5fd-9c8aecdd73c7',
'e97116a4-7d30-4671-8ba1-cdce0a153d1d',
'1edc5fa4-88af-47f5-95a4-0e77a06fe8b1',
'094b96e5-caeb-46d3-a8ee-d44182add069',
'939f82ec-15a9-49c8-8828-dc2f8a2d49e2',
'90bcb315-f080-41a8-a0ac-6122331bb4cf',
'b8567c1e-8610-4c2b-a240-65e8a74919fa',
'ccccb57f-a2f9-4183-ae88-5710d3afaefd',
'e30f2e83-b80b-4b96-8f39-fa60317afcc7',
'3adf88fd-fd7a-41d0-84f5-1143c98a6564',
'133f0f6c-2ca1-4798-9360-5b5f417dd839',
'13e91b77-90f3-41a5-a320-641748e9c311',
'de4cc1db-51cb-4b62-bee2-9750cbe4f5c4',
'f4c55f77-ab80-4e00-bed3-aa6631aba074',
'e32b0a28-8cd5-4053-bc86-fff9c6469106',
'cbf3cd49-91bd-49cc-8926-ccc6c0e7eca4',
'48f2661f-f9cb-4093-9d57-da2418ed656e',
'550e3885-a9d1-4e55-bd25-34228bd6d988',
'c80a4f21-528c-4771-98d7-10cd591699a4',
'ac507f42-1593-49ea-865f-10b2523617c7',
'6e3ea719-48b1-408a-bc55-0986c1e94cd5',
'c233674f-259a-4304-b81f-dce1f415d85b',
'a26e57c9-1cb8-4fca-ba80-9e02abc81df8',
'67d6e882-b60c-40d3-975c-a6d7a2b4e40a',
'6aa1cd8e-e528-4bcb-ba8e-705b6dcb7da2',
'33e0bce0-13df-4ffc-be9d-f1a79e795e1c',
'd9289367-c8aa-4b6a-b1ad-857fec94c6bb',
'b3492c68-8373-4769-9b29-22f66635a478',
'44f7e955-c97d-45c8-9ed7-19406806fb4c',
'06b978dd-8c4d-48ac-a0c8-2c16681ed281',
'9da1ad2b-88db-4cbb-8132-eddfab07d5ba',
'5389b878-fad5-4f37-bb87-e6cb36b7078b',
'787e5d63-61e2-48cc-acf0-633e2bf923f2',
'23af9b02-5c82-4f6e-acb8-f92a06e5e4da',
'b02be240-1364-4c97-8bb6-675d7d842332',
'6b774802-fcb5-49ae-8ecb-ecaf1a278b1c',
'b6c6d5c8-e2d5-4469-8dd8-fa972ef7eaea',
'88e972e1-88a0-4eb9-847c-0925e5999a46',
'2cb8ae5b-c5c9-4fa8-bac0-bb724f2754f4',
'57090802-c51a-4d09-8340-b4453cd0e1f5',
'844a620f-f3b8-4b6b-8e3c-783ae2aa232a',
'd28e7ed1-3317-41c5-bec6-725369ed1171',
'a37a9aa3-45e9-4d90-9df6-109f3a28a5af',
'665be0fe-5e38-43f6-8b04-02a93bdbeeb4',
'0309cd61-90c9-470e-99d4-2ee4fb2c5f84',
'1d26e504-7f9e-480a-b52c-5932be6549ab',
'550eb7e9-172e-48e4-ae1e-d1b761b42223',
'2ff6379d-d168-4022-8da0-16846d45ef9b',
'd6dc44d1-63ac-4871-b175-60ac4040069a',
'4c7d796a-39f2-4f26-97a9-3aad01713e29',
'5735892a-ec65-4b29-97c5-50939aa9584e',
'b45359df-c020-4314-adb1-d1921db642da',
'593647aa-9fea-43ec-a7d6-6476a76ae868',
'a6ee8177-107b-47dd-bcfd-30960ccc6e9c',
'8f7e5f92-1153-4f93-acba-ca48670c8ca9',
'c0f51e35-d0e8-4318-afaf-c5fcbc29f4c1',
'f33c3cc9-dc4b-4b77-baa9-5a5f10704398',
'2f025389-fac8-4557-94d3-7d0428878c86',
'9598e4cb-0849-401e-bba0-689234b27644'.</p>
</td></tr>
<tr><td><code id="flood1_+3A_filename">filename</code></td>
<td>
<p>supplies an optional output filename and has to be type
<code>character</code>.</p>
</td></tr>
<tr><td><code id="flood1_+3A_...">...</code></td>
<td>
<p>additional arguments as for <code><a href="terra.html#topic+writeRaster">writeRaster</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For every time step provided in <code>seq</code>, <code>flood1()</code> computes
a 1d water level using <code><a href="hyd1d.html#topic+waterLevelFlood1">waterLevelFlood1</a></code> along the
requested river section. This 1d water level is transfered to a <code>wl</code>
(water level) raster layer, which is in fact a copy of the <code>csa</code>
(cross section areas) layer, and then compared to the <code>dem</code>
(digital elevation model) layer. Where the <code>wl</code> layer is
higher than the <code>dem</code>, layer flood duration is increased by 1.
</p>


<h3>Value</h3>

<p><code>SpatRaster</code> object with flood duration in the range of
<code>[0, length(seq)]</code>.
</p>


<h3>References</h3>

<p>Rosenzweig S, Giebel H, Schleuter M (2011).
&ldquo;Ökologische Modellierungen für die Wasser- und Schifffahrtsverwaltung – Das integrierte Flussauenmodell INFORM in seiner neuesten Fassung (Version 3). Bundesanstalt für Gewässerkunde, Koblenz, Germany.&rdquo;
<a href="https://doi.org/10.5675/bfg-1667">doi:10.5675/bfg-1667</a>.
</p>


<h3>See Also</h3>

<p><code><a href="hyd1d.html#topic+df.gauging_data">df.gauging_data</a></code>,
<code><a href="hyd1d.html#topic+getGaugingDataW">getGaugingDataW</a></code>,
<code><a href="hyd1d.html#topic+waterLevelFlood1">waterLevelFlood1</a></code>,
<code><a href="terra.html#topic+writeRaster">writeRaster</a></code>,
<code><a href="terra.html#topic+terraOptions">terraOptions</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  options("hydflood.datadir" = tempdir())
  library(hydflood)
  
  # import the raster data and create a raster stack
  c &lt;- st_crs("EPSG:25833")
  e &lt;- ext(309000, 310000, 5749000, 5750000)
  x &lt;- hydSpatRaster(ext = e, crs = c)
  
  # create a temporal sequence
  seq &lt;- seq(as.Date("2016-12-01"), as.Date("2016-12-31"), by = "day")
  
  # compute a flood duration
  fd &lt;- flood1(x = x, seq = seq, gauging_station = "ROSSLAU")


</code></pre>

<hr>
<h2 id='flood2'>Function to compute flood extent or flood duration <code>SpatRaster</code>
along the German federal waterways Elbe and Rhine using the 1d water level
algorithm <code>hyd1d::waterLevelFlood2()</code></h2><span id='topic+flood2'></span>

<h3>Description</h3>

<p>Computes flood extent, if <code>length(seq)</code> equals 1, or flood
duration for the active floodplains along the German federal waterways Elbe
and Rhine based on 1d water levels computed by
<code><a href="hyd1d.html#topic+waterLevelFlood2">waterLevelFlood2</a></code> provided by package <span class="pkg">hyd1d</span> in
analogy to the INFORM 3 module 'Flut2'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flood2(x, seq, filename = "", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flood2_+3A_x">x</code></td>
<td>
<p>has to by type <code>SpatRaster</code> and has to include both input
layers <code>csa</code> (cross section areas) and <code>dem</code> (digital
elevation model). To compute water levels along the River Elbe, <code>x</code>
has to be in the coordinate reference system
<a href="https://spatialreference.org/ref/epsg/etrs89-utm-zone-33n/">ETRS 1989 UTM 33N</a>,
for the River Rhine in
<a href="https://spatialreference.org/ref/epsg/etrs89-utm-zone-32n/">ETRS 1989 UTM 32N</a>.
Other coordinate reference systems are not permitted.</p>
</td></tr>
<tr><td><code id="flood2_+3A_seq">seq</code></td>
<td>
<p>has to be type <code>c("POSIXct", "POSIXt")</code> or <code>Date</code> and
have a length larger than 0. Values of <code>seq</code> must be in the
temporal range between 1960-01-01 and yesterday (<code>Sys.Date() - 1</code>).
Internally <code>waterLevelFlood2()</code> uses
<code><a href="hyd1d.html#topic+getGaugingDataW">getGaugingDataW</a></code> to obtain daily water level
information from <code><a href="hyd1d.html#topic+df.gauging_data">df.gauging_data</a></code>.</p>
</td></tr>
<tr><td><code id="flood2_+3A_filename">filename</code></td>
<td>
<p>supplies an optional output filename and has to be type
<code>character</code>.</p>
</td></tr>
<tr><td><code id="flood2_+3A_...">...</code></td>
<td>
<p>additional arguments as for <code><a href="terra.html#topic+writeRaster">writeRaster</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For every time step provided in <code>seq</code>, <code>flood2()</code> computes
a 1d water level using <code><a href="hyd1d.html#topic+waterLevelFlood2">waterLevelFlood2</a></code> along the
requested river section. This 1d water level is transfered to a <code>wl</code>
(water level) raster layer, which is in fact a copy of the <code>csa</code>
(cross section areas) layer, and then compared to the <code>dem</code>
(digital elevation model) layer. Where the <code>wl</code> layer is
higher than the <code>dem</code>, layer flood duration is increased by 1.
</p>


<h3>Value</h3>

<p><code>SpatRaster</code> object with flood duration in the range of
<code>[0, length(seq)]</code>.
</p>


<h3>References</h3>

<p>Rosenzweig S, Giebel H, Schleuter M (2011).
&ldquo;Ökologische Modellierungen für die Wasser- und Schifffahrtsverwaltung – Das integrierte Flussauenmodell INFORM in seiner neuesten Fassung (Version 3). Bundesanstalt für Gewässerkunde, Koblenz, Germany.&rdquo;
<a href="https://doi.org/10.5675/bfg-1667">doi:10.5675/bfg-1667</a>.
</p>


<h3>See Also</h3>

<p><code><a href="hyd1d.html#topic+df.gauging_data">df.gauging_data</a></code>,
<code><a href="hyd1d.html#topic+getGaugingDataW">getGaugingDataW</a></code>,
<code><a href="hyd1d.html#topic+waterLevelFlood2">waterLevelFlood2</a></code>,
<code><a href="terra.html#topic+writeRaster">writeRaster</a></code>,
<code><a href="terra.html#topic+terraOptions">terraOptions</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  options("hydflood.datadir" = tempdir())
  library(hydflood)
  
  # import the raster data and create a raster stack
  c &lt;- st_crs("EPSG:25833")
  e &lt;- ext(309000, 310000, 5749000, 5750000)
  x &lt;- hydSpatRaster(ext = e, crs = c)
  
  # create a temporal sequence
  seq &lt;- seq(as.Date("2016-12-01"), as.Date("2016-12-31"), by = "day")
  
  # compute a flood duration
  fd &lt;- flood2(x = x, seq = seq)


</code></pre>

<hr>
<h2 id='flood3'>Function to compute flood extent or flood duration <code>SpatRaster</code>
along the German federal waterways Elbe and Rhine using the 1d water level
algorithms <code>hyd1d::waterLevel()</code> and <code>hyd1d::waterLevelPegelonline()</code></h2><span id='topic+flood3'></span>

<h3>Description</h3>

<p>Computes flood extent, if <code>length(seq)</code> equals 1, or flood
duration for the active floodplains along the German federal waterways Elbe
and Rhine based on 1d water levels computed by
<code><a href="hyd1d.html#topic+waterLevel">waterLevel</a></code> or
<code><a href="hyd1d.html#topic+waterLevelPegelonline">waterLevelPegelonline</a></code> provided by package <span class="pkg">hyd1d</span>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flood3(x, seq, filename = "", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flood3_+3A_x">x</code></td>
<td>
<p>has to by type <code>SpatRaster</code> and has to include both input
raster layers <code>csa</code> (cross section areas) and <code>dem</code> (digital
elevation model). To compute water levels along the River Elbe <code>x</code>
has to be in the coordinate reference system
<a href="https://spatialreference.org/ref/epsg/etrs89-utm-zone-33n/">ETRS 1989 UTM 33N</a>,
for River Rhine in
<a href="https://spatialreference.org/ref/epsg/etrs89-utm-zone-32n/">ETRS 1989 UTM 32N</a>.
Other coordinate reference systems are not permitted.</p>
</td></tr>
<tr><td><code id="flood3_+3A_seq">seq</code></td>
<td>
<p>has to be type <code>c("POSIXct", "POSIXt")</code> or <code>Date</code> and
have a length larger than 0. If <code>seq</code> is type <code>c("POSIXct", "POSIXt")</code>,
values must be in the temporal range between 31 days ago (<code>Sys.time() 
  - 2678400</code>) and now (<code>Sys.time()</code>). Then
<code><a href="hyd1d.html#topic+waterLevelPegelonline">waterLevelPegelonline</a></code> is used internally for the water
level computations. If <code>seq</code> is type <code>Date</code>, values must be in the
temporal range between 1960-01-01 and yesterday (<code>Sys.Date() - 1</code>)
and <code><a href="hyd1d.html#topic+waterLevel">waterLevel</a></code> is used internally.</p>
</td></tr>
<tr><td><code id="flood3_+3A_filename">filename</code></td>
<td>
<p>supplies an optional output filename and has to be type
<code>character</code>.</p>
</td></tr>
<tr><td><code id="flood3_+3A_...">...</code></td>
<td>
<p>additional arguments as for <code><a href="terra.html#topic+writeRaster">writeRaster</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For every time step provided in <code>seq</code>, <code>flood3()</code> computes
a 1d water level along the requested river section. This 1d water level is
transfered to a <code>wl</code> (water level) raster layer, which is in fact a
copy of the <code>csa</code> (cross section areas) layer, and then
compared to the <code>dem</code> (digital elevation model) layer. Where the
<code>wl</code> layer is higher than the <code>dem</code>, layer flood duration is
increased by 1.
</p>


<h3>Value</h3>

<p><code>SpatRaster</code> object with flood duration in the range of
<code>[0, length(seq)]</code>.
</p>


<h3>References</h3>

<p>Weber A (2022).
&ldquo;Flood durations and potential natural vegetation distribution on the floodplains of River Rhine and River Elbe, Germany.&rdquo;
<a href="https://doi.org/10.1594/PANGAEA.948042">doi:10.1594/PANGAEA.948042</a>.
</p>
<p>Weber A (2023).
&ldquo;Flood durations of the year 2022 on the floodplains of River Rhine and River Elbe, Germany.&rdquo;
<a href="https://doi.org/10.1594/PANGAEA.961117">doi:10.1594/PANGAEA.961117</a>.
</p>


<h3>See Also</h3>

<p><code><a href="hyd1d.html#topic+waterLevel">waterLevel</a></code>,
<code><a href="hyd1d.html#topic+waterLevelPegelonline">waterLevelPegelonline</a></code>,
<code><a href="terra.html#topic+writeRaster">writeRaster</a></code>,
<code><a href="terra.html#topic+terraOptions">terraOptions</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  options("hydflood.datadir" = tempdir())
  library(hydflood)
  
  # import the raster data and create a raster stack
  c &lt;- st_crs("EPSG:25833")
  e &lt;- ext(309000, 310000, 5749000, 5750000)
  x &lt;- hydSpatRaster(ext = e, crs = c)
  
  # create a temporal sequence
  seq &lt;- seq(as.Date("2016-12-01"), as.Date("2016-12-31"), by = "day")
  
  # compute a flood duration
  fd &lt;- flood3(x = x, seq = seq)


</code></pre>

<hr>
<h2 id='flood3Points'>Function to compute flood duration for point coordinates along the
German federal waterways Elbe and Rhine using the 1d water level algorithms
<code>hyd1d::waterLevel()</code> and <code>hyd1d::waterLevelPegelonline()</code></h2><span id='topic+flood3Points'></span>

<h3>Description</h3>

<p>Computes flood duration for points located in the active
floodplains along the German federal waterways Elbe and Rhine based on 1d
water levels computed by <code><a href="hyd1d.html#topic+waterLevel">waterLevel</a></code> or
<code><a href="hyd1d.html#topic+waterLevelPegelonline">waterLevelPegelonline</a></code> provided by package <span class="pkg">hyd1d</span>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flood3Points(x, seq)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flood3Points_+3A_x">x</code></td>
<td>
<p>has to by type <code>sf</code> possibly including columns <code>csa</code>
(cross section areas) and <code>dem</code> (digital elevation model). To compute
water levels along the River Elbe, <code>x</code> has to be in the coordinate
reference system
<a href="https://spatialreference.org/ref/epsg/etrs89-utm-zone-33n/">ETRS 1989 UTM 33N</a>,
for the River Rhine in
<a href="https://spatialreference.org/ref/epsg/etrs89-utm-zone-32n/">ETRS 1989 UTM 32N</a>.
Other coordinate reference systems are not permitted.</p>
</td></tr>
<tr><td><code id="flood3Points_+3A_seq">seq</code></td>
<td>
<p>has to be type <code>c("POSIXct", "POSIXt")</code> or <code>Date</code> and
have a length larger than 0. If <code>seq</code> is type <code>c("POSIXct", "POSIXt")</code>,
values must be in the temporal range between 31 days ago (<code>Sys.time()
  - 2678400</code>) and now (<code>Sys.time()</code>). Then
<code><a href="hyd1d.html#topic+waterLevelPegelonline">waterLevelPegelonline</a></code> is used internally for the water
level computations. If <code>seq</code> is type <code>Date</code>, values must be in the
temporal range between 1960-01-01 and yesterday (<code>Sys.Date() - 1</code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For every time step provided in <code>seq</code>, <code>flood3Points()</code>
computes a 1d water level along the requested river section. This 1d water
level is transfered to a temporary <code>wl</code> (water level) column and then
compared to the <code>dem</code> (digital elevation model) column. Where the
<code>wl</code> is higher than the <code>dem</code> flood duration <code>flood3</code> is
increased by 1.
</p>
<p>Since the underlying tiled digital elevation models (dem) are rather
large datasets hydflood provides options to permanentely cache these
datasets. <code>options("hydflood.datadir" = tempdir())</code> is the default. To
modify the location of your raster cache to your needs set the respective
<code>options()</code> prior to loading the package, e.g.
<code>options("hydflood.datadir" = "~/.hydflood");library(hydflood)</code>. The
location can also be determined through the environmental variable
<span class="env">hydflood_datadir</span>.
</p>


<h3>Value</h3>

<p><code>sf</code> object with flood duration stored in column
<code>flood3</code> in the range of <code>[0, length(seq)]</code>, elevation stored in
column <code>dem</code> and cross section areas stored in column <code>csa</code>.
</p>


<h3>See Also</h3>

<p><code><a href="hyd1d.html#topic+waterLevel">waterLevel</a></code>,
<code><a href="hyd1d.html#topic+waterLevelPegelonline">waterLevelPegelonline</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  options("hydflood.datadir" = tempdir())
  library(hydflood)
  
  # create a random points object
  c &lt;- st_crs(25833)
  e &lt;- st_as_sfc(st_bbox(c(xmin = 309000, xmax = 310000,
                           ymin = 5749000, ymax = 5750000)))
  st_crs(e) &lt;- c
  set.seed(123)
  points &lt;- st_sample(e, size = 10, "random")
  p &lt;- data.frame(id = 1:10)
  st_geometry(p) &lt;- points
  
  # create a temporal sequence
  seq &lt;- seq(as.Date("2016-12-01"), as.Date("2016-12-31"), by = "day")
  
  # compute a flood duration
  p &lt;- flood3Points(x = p, seq = seq)


</code></pre>

<hr>
<h2 id='getDEM'>Function to obtain the digital elevation models for the active
floodplains along the German federal waterways Elbe and Rhine</h2><span id='topic+getDEM'></span>

<h3>Description</h3>

<p>This function downloads and patches the tiled digital elevation
models (dem) along the German federal waterways Elbe and Rhine that have
been published on <a href="https://www.pangaea.de">pangaea.de</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDEM(filename = "", ext, crs, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getDEM_+3A_filename">filename</code></td>
<td>
<p>supplies an optional in- and output filename and has to be
type <code>character</code>.</p>
</td></tr>
<tr><td><code id="getDEM_+3A_ext">ext</code></td>
<td>
<p>argument of type <code><a href="terra.html#topic+SpatExtent">SpatExtent</a></code>.</p>
</td></tr>
<tr><td><code id="getDEM_+3A_crs">crs</code></td>
<td>
<p>argument of type <code><a href="sf.html#topic+st_crs">crs</a></code> or
<code><a href="terra.html#topic+crs">crs</a></code>. It is
used to select the respective river (Elbe: <a href="https://spatialreference.org/ref/epsg/etrs89-utm-zone-33n/">'ETRS 1989 UTM 33N'</a>; Rhine:
<a href="https://spatialreference.org/ref/epsg/etrs89-utm-zone-32n/">'ETRS 1989 UTM 32N'</a>)</p>
</td></tr>
<tr><td><code id="getDEM_+3A_...">...</code></td>
<td>
<p>additional arguments as for <code><a href="terra.html#topic+writeRaster">writeRaster</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Since the underlying tiled digital elevation models (dem) are rather
large datasets hydflood provides options to permanentely cache these
datasets. <code>options("hydflood.datadir" = tempdir())</code> is the default. To
modify the location of your raster cache to your needs set the respective
<code>options()</code> prior to loading the package, e.g.
<code>options("hydflood.datadir" = "~/.hydflood");library(hydflood)</code>. The
location can also be determined through the environmental variable
<span class="env">hydflood_datadir</span>.
</p>
<p>Since downloads of large individual datasets might cause timeouts, it is
recommended to increase <code>options("timeout")</code>.
</p>


<h3>Value</h3>

<p><code>SpatRaster</code> object containing elevation data for the selected
floodplain region.
</p>


<h3>References</h3>

<p>Weber A (2020).
&ldquo;Digital elevation models of German waterway and navigation authorities - Version 0.1.0.&rdquo;
<a href="https://doi.org/10.5675/BfG-2011">https://doi.org/10.5675/BfG-2011</a>.
</p>
<p>Weber A (2020).
&ldquo;Digital elevation model (DEM1) of the River Elbe floodplain between Schmilka and Geesthacht, Germany.&rdquo;
<a href="https://doi.org/10.1594/PANGAEA.919293">https://doi.org/10.1594/PANGAEA.919293</a>.
</p>
<p>Weber A (2020).
&ldquo;Digital elevation model (DEM1) of the River Rhine floodplain between Iffezheim and Kleve, Germany.&rdquo;
<a href="https://doi.org/10.1594/PANGAEA.919308">https://doi.org/10.1594/PANGAEA.919308</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  options("hydflood.datadir" = tempdir())
  options("timeout" = 120)
  library(hydflood)
  dem &lt;- getDEM(ext = ext(c(309000, 310000, 5749000, 5750000)),
                crs = st_crs("EPSG:25833"))


</code></pre>

<hr>
<h2 id='hydSpatRaster'>Initialize a <code>SpatRaster</code> for the flood-functions</h2><span id='topic+hydSpatRaster'></span>

<h3>Description</h3>

<p>To initialize an object of class <code><a href="terra.html#topic+SpatRaster">SpatRaster</a></code>
with layers dem and csa this function should be used. It checks all the
required input data, downloads missing data automatically, clips and
returns the final object, prepared for the <code>flood()</code> functions
(<code><a href="#topic+flood1">flood1</a></code>, <code><a href="#topic+flood2">flood2</a></code> and <code><a href="#topic+flood3">flood3</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hydSpatRaster(filename_dem = "", filename_csa = "", ext, crs, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hydSpatRaster_+3A_filename_dem">filename_dem</code></td>
<td>
<p>an optional argument of length 1 with type
<code>character</code> specifying a filename of a <strong>d</strong>igital <strong>e</strong>levation
<strong>m</strong>odel raster dataset.
</p>
<p>If the file exists it is imported via <code><a href="terra.html#topic+rast">rast</a></code> and used
to build the <code>SpatRaster</code>, potentially cropped by argument
<code>ext</code>. If the dem file does not exist, data are downloaded
automatically and exported using <code><a href="terra.html#topic+writeRaster">writeRaster</a></code> and can
be reused to accelerate later computations.
</p>
<p>An existing dataset must be either in the coordinate reference system (crs)
'ETRS 1989 UTM 32N' (epsg: 25832) for the River Rhine or 'ETRS 1989 UTM 33N'
(epsg: 25833) for the River Elbe. It must also overlap with the active
floodplains (<code><a href="#topic+sf.afe">sf.afe</a></code> or <code><a href="#topic+sf.afr">sf.afr</a></code>) of the river
selected through the crs.
</p>
<p>If argument <code>filename_csa</code> is specified and exists too,
the coordinate reference system (<code><a href="terra.html#topic+crs">crs</a></code>), extent
(<code><a href="terra.html#topic+ext">ext</a></code>) and resolution (<code><a href="terra.html#topic+res">res</a></code>)
of both raster datasets must match.
</p>
<p>Supported file types depend on available
<a href="https://gdal.org/drivers/raster/index.html">GDAL raster drivers</a>.</p>
</td></tr>
<tr><td><code id="hydSpatRaster_+3A_filename_csa">filename_csa</code></td>
<td>
<p>an optional argument of length 1 with type
<code>character</code> specifying a filename of a <strong>c</strong>ross <strong>s</strong>ection
<strong>a</strong>rea raster dataset.
</p>
<p>If the file exists it is imported via <code><a href="terra.html#topic+rast">rast</a></code> and used
to build the <code>SpatRaster</code>, potentially cropped by argument
<code>ext</code>. If the csa file does not exist, data are downloaded
automatically and exported using <code><a href="terra.html#topic+writeRaster">writeRaster</a></code> and can
be reused to accelerate later computations.
</p>
<p>An existing dataset must be either in the coordinate reference system (crs)
'ETRS 1989 UTM 32N' (epsg: 25832) for the River Rhine or 'ETRS 1989 UTM 33N'
(epsg: 25833) for the River Elbe. It must also overlap with the active
floodplains (<code><a href="#topic+sf.afe">sf.afe</a></code> or <code><a href="#topic+sf.afr">sf.afr</a></code>) of the river
selected through the crs and be in the possible range of <code>station_int</code>
values: Elbe (m 0 - 585700), Rhine (m 336200 - 865700).
</p>
<p>If argument <code>filename_dem</code> is specified too, coordinate reference
system (<code><a href="terra.html#topic+crs">crs</a></code>), extent (<code><a href="terra.html#topic+ext">ext</a></code>)
and resolution (<code><a href="terra.html#topic+res">res</a></code>) of both raster datasets must
match.
</p>
<p>Supported file types depend on available
<a href="https://gdal.org/drivers/raster/index.html">GDAL raster drivers</a>.</p>
</td></tr>
<tr><td><code id="hydSpatRaster_+3A_ext">ext</code></td>
<td>
<p>optional argument of type <code><a href="terra.html#topic+SpatExtent">SpatExtent</a></code>. If neither
<code>filename_dem</code> nor <code>filename_csa</code> are specified, <code>ext</code> is
required to download the respective data and generate temporary dem and csa
datasets. If either <code>filename_dem</code> or <code>filename_csa</code> or both are
specified, <code>ext</code> must be within the extent of provided raster layers.
Then it is used to <code><a href="terra.html#topic+crop">crop</a></code> the supplied data.</p>
</td></tr>
<tr><td><code id="hydSpatRaster_+3A_crs">crs</code></td>
<td>
<p>optional argument of type <code><a href="sf.html#topic+st_crs">crs</a></code> or
<code><a href="terra.html#topic+crs">crs</a></code>. If
neither <code>filename_dem</code> nor <code>filename_csa</code> are specified,
<code>crs</code> is used to select the respective river (Elbe:
'ETRS 1989 UTM 33N' (epsg: 25833); Rhine: 'ETRS 1989 UTM 32N' (epsg:
25832)) and <code><a href="terra.html#topic+crop">crop</a></code> downloaded dem and csa
by the given <code>ext</code>. If either <code>filename_dem</code> or
<code>filename_csa</code> or both are specified, <code>crs</code> must match their
coordinate reference systems; otherwise an error is returned.</p>
</td></tr>
<tr><td><code id="hydSpatRaster_+3A_...">...</code></td>
<td>
<p>additional parameters passed to
<code><a href="terra.html#topic+writeRaster">writeRaster</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Since the underlying tiled digital elevation models (dem) are rather
large datasets hydflood provides options to permanentely cache these
datasets. <code>options("hydflood.datadir" = tempdir())</code> is the default. To
modify the location of your raster cache to your needs set the respective
<code>options()</code> prior to loading the package, e.g.
<code>options("hydflood.datadir" = "~/.hydflood");library(hydflood)</code>. The
location can also be determined through the environmental variable
<span class="env">hydflood_datadir</span>.
</p>
<p>Since downloads of large individual datasets might cause timeouts, it is
recommended to increase <code>options("timeout")</code>.
</p>


<h3>Value</h3>

<p><code>SpatRaster</code> object containing digital elevation (<code>dem</code>)
and cross section area (<code>csa</code>) raster layers.
</p>


<h3>References</h3>

<p>Wasserstraßen- und Schifffahrtsverwaltung des Bundes (WSV) (2016).
&ldquo;Digitales Geländemodell des Wasserlaufs (DGM-W).&rdquo;
<a href="https://www.govdata.de/daten/-/details/1c669080-c804-11e4-8731-1681e6b88ec1">https://www.govdata.de/daten/-/details/1c669080-c804-11e4-8731-1681e6b88ec1</a>.
</p>
<p>Brockmann H, Großkordt U, Schumann L (2008).
&ldquo;Auswertung digitaler Fernerkundungsaufnahmen des Elbe-Wasserlaufes (FE-Datenauswertung Elbe).&rdquo;
</p>
<p>Brockmann H, Schumann L (2012).
&ldquo;Produktblatt: DGM-W Elbe-Lenzen, 2003-2011.&rdquo;
</p>
<p>Brockmann H, Großkordt U, Schumann L (2008).
&ldquo;Digitales Geländemodell des Rhein-Wasserlaufes von Iffezheim bis Bonn (DGM-W Rhein).&rdquo;
</p>
<p>smile consult GmbH &amp; Inphoris GmbH (2011).
&ldquo;DGM-W Oberrhein 1.&rdquo;
</p>
<p>FUGRO-HGN GmbH (2011).
&ldquo;Aufbau eines Digitalen Geländemodells des Oberrheinwasserverlaufes (DGM-W Oberrhein-2, Basel bis Iffezheim).&rdquo;
</p>
<p>ARGE Vermessung Schmid - Inphoris (2012).
&ldquo;Aufbau eines Digitalen Geländemodells des Niederrheinwasserlaufes (DGM-W Niederrhein).&rdquo;
</p>
<p>Weber A (2020).
&ldquo;Digital elevation models of German waterway and navigation authorities - Version 0.1.0.&rdquo;
<a href="https://doi.org/10.5675/BfG-2011">https://doi.org/10.5675/BfG-2011</a>.
</p>
<p>Weber A (2020).
&ldquo;Digital elevation model (DEM1) of the River Elbe floodplain between Schmilka and Geesthacht, Germany.&rdquo;
<a href="https://doi.org/10.1594/PANGAEA.919293">https://doi.org/10.1594/PANGAEA.919293</a>.
</p>
<p>Weber A (2020).
&ldquo;Digital elevation model (DEM1) of the River Rhine floodplain between Iffezheim and Kleve, Germany.&rdquo;
<a href="https://doi.org/10.1594/PANGAEA.919308">https://doi.org/10.1594/PANGAEA.919308</a>.
</p>
<p>Bundesanstalt für Gewässerkunde (2016).
&ldquo;FLYS – Flusshydrologischer Webdienst.&rdquo;
<a href="http://www.bafg.de/DE/08_Ref/M2/03_Fliessgewmod/01_FLYS/flys_node.html">http://www.bafg.de/DE/08_Ref/M2/03_Fliessgewmod/01_FLYS/flys_node.html</a>.
</p>
<p>Brunotte E, Dister E, Günther-Diringer D, Koenzen U, Mehl D (2009).
&ldquo;Zustand der rezenten Flussauen in Deutschland - Geodaten.&rdquo;
</p>


<h3>See Also</h3>

<p><code><a href="terra.html#topic+SpatRaster-class">SpatRaster-class</a></code>,
<code><a href="terra.html#topic+rast">rast</a></code>, <code><a href="terra.html#topic+writeRaster">writeRaster</a></code>,
<code><a href="#topic+flood1">flood1</a></code>, <code><a href="#topic+flood2">flood2</a></code>, <code><a href="#topic+flood3">flood3</a></code>,
<code><a href="#topic+sf.afe">sf.afe</a></code>, <code><a href="#topic+sf.afr">sf.afr</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  options("hydflood.datadir" = tempdir())
  options("timeout" = 120)
  library(hydflood)
  
  e &lt;- ext(436500, 438000, 5415000, 5416500)
  c &lt;- st_crs("EPSG:25832")
  
  r &lt;- hydSpatRaster(ext = e, crs = c)
  r


</code></pre>

<hr>
<h2 id='sf.af'>Obtain projected versions of <code>sf.afe</code> and <code>sf.afr</code></h2><span id='topic+sf.af'></span>

<h3>Description</h3>

<p>Obtain projected versions of <code><a href="#topic+sf.afe">sf.afe</a></code> and
<code><a href="#topic+sf.afr">sf.afr</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sf.af(name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sf.af_+3A_name">name</code></td>
<td>
<p>either 'Elbe' or 'Rhine'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>sf</code> with the projected active floodplain
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sf.afe">sf.afe</a></code>, <code><a href="#topic+sf.afr">sf.afr</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  library(hydflood)
  sf.af(name = "Elbe")

</code></pre>

<hr>
<h2 id='sf.afe'>Active floodplain along the River Elbe</h2><span id='topic+sf.afe'></span>

<h3>Description</h3>

<p>This dataset contains a polygon of the active floodplain along
the German interior parts of the River Elbe from the Czech border to the
weir in Geesthacht in the coordinate reference system
<a href="https://spatialreference.org/ref/epsg/etrs89-utm-zone-33n/">ETRS 1989 UTM 33N</a>.
</p>
<p>Originally, this polygon was produced for the floodplain status report
(Auenzustandsbericht; Brunotte et al. (2009), Bundesamt für Naturschutz
(2009)) at a scale of 1:25,000. For hydflood it was updated with recent
flood protection measures and manually improved with recent digital
elevation models and aerial images at a scale of &lt; 1:10,000.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sf.afe
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code> containing 1 polygon
</p>


<h3>References</h3>

<p>Brunotte E, Dister E, Günther-Diringer D, Koenzen U, Mehl D (2009).
&ldquo;Flussauen in Deutschland - Erfassung und Beurteilung des Auenzustandes.&rdquo;
</p>
<p>Brunotte E, Dister E, Günther-Diringer D, Koenzen U, Mehl D (2009).
&ldquo;Zustand der rezenten Flussauen in Deutschland - Geodaten.&rdquo;
</p>
<p>Bundesamt für Naturschutz (2009).
&ldquo;Zustand der rezenten Flussauen in Deutschland.&rdquo;
<a href="https://www.bfn.de/sites/default/files/2023-01/Auenzustandsbericht%202009_0.pdf">https://www.bfn.de/sites/default/files/2023-01/Auenzustandsbericht%202009_0.pdf</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sf.af">sf.af</a></code>, <code><a href="#topic+sf.afr">sf.afr</a></code>
</p>

<hr>
<h2 id='sf.afr'>Active floodplain along the River Rhine</h2><span id='topic+sf.afr'></span>

<h3>Description</h3>

<p>This dataset contains a polygon of the active floodplain along
the German, freeflowing parts of the River Rhine from the weir Iffezheim to
the Dutch border in the coordinate reference system
<a href="https://spatialreference.org/ref/epsg/etrs89-utm-zone-32n/">ETRS 1989 UTM 32N</a>.
</p>
<p>Originally, this polygon was produced for the floodplain status report
(Auenzustandsbericht; Brunotte et al. (2009), Bundesamt für Naturschutz
(2009)) at a scale of 1:25,000. For hydflood it was updated with recent
flood protection measures and manually improved with recent digital
elevation models and aerial images at a scale of &lt; 1:10,000.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sf.afr
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code> containing 1 polygon
</p>


<h3>References</h3>

<p>Brunotte E, Dister E, Günther-Diringer D, Koenzen U, Mehl D (2009).
&ldquo;Flussauen in Deutschland - Erfassung und Beurteilung des Auenzustandes.&rdquo;
</p>
<p>Brunotte E, Dister E, Günther-Diringer D, Koenzen U, Mehl D (2009).
&ldquo;Zustand der rezenten Flussauen in Deutschland - Geodaten.&rdquo;
</p>
<p>Bundesamt für Naturschutz (2009).
&ldquo;Zustand der rezenten Flussauen in Deutschland.&rdquo;
<a href="https://www.bfn.de/sites/default/files/2023-01/Auenzustandsbericht%202009_0.pdf">https://www.bfn.de/sites/default/files/2023-01/Auenzustandsbericht%202009_0.pdf</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sf.af">sf.af</a></code>, <code><a href="#topic+sf.afe">sf.afe</a></code>
</p>

<hr>
<h2 id='sf.tiles'>Obtain projected versions of <code>sf.tiles_elbe</code> and
<code>sf.tiles_rhine</code></h2><span id='topic+sf.tiles'></span>

<h3>Description</h3>

<p>Obtain projected versions of <code><a href="#topic+sf.tiles_elbe">sf.tiles_elbe</a></code> and
<code><a href="#topic+sf.tiles_rhine">sf.tiles_rhine</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sf.tiles(name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sf.tiles_+3A_name">name</code></td>
<td>
<p>either 'Elbe' or 'Rhine'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>sf</code> with projected tiles
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sf.tiles_elbe">sf.tiles_elbe</a></code>, <code><a href="#topic+sf.tiles_rhine">sf.tiles_rhine</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  library(hydflood)
  sf.tiles(name = "Elbe")

</code></pre>

<hr>
<h2 id='sf.tiles_elbe'>Tiling along the active floodplain of the River Elbe</h2><span id='topic+sf.tiles_elbe'></span>

<h3>Description</h3>

<p>This dataset contains 49 rectangular polygons / tiles along the
active floodplain along the German interior parts of the River Elbe from the
Czech border to the weir in Geesthacht in the coordinate reference system
<a href="https://spatialreference.org/ref/epsg/etrs89-utm-zone-33n/">ETRS 1989 UTM 33N</a>.
</p>
<p>The tiles represent the original tiling of the internally used digital
elevation model (Weber 2020).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sf.tiles_elbe
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code> containing 49 polygons with 18 attributes:
</p>

<dl>
<dt>id</dt><dd><p>of the tile (type <code>integer</code>).</p>
</dd>
<dt>name</dt><dd><p>of the tile (type <code>character</code>).</p>
</dd>
<dt>river</dt><dd><p>of the tile (type <code>character</code>) in this case 'ELBE'.</p>
</dd>
<dt>name_km</dt><dd><p>of the tile (type <code>character</code>).</p>
</dd>
<dt>from_km</dt><dd><p>river kilometer of the tiles upper limit (type <code>numeric</code>).</p>
</dd>
<dt>to_km</dt><dd><p>river kilometer of the tiles lower limit (type <code>numeric</code>).</p>
</dd>
<dt>gs_upper</dt><dd><p>name of the tiles upper gauging station (type <code>character</code>).</p>
</dd>
<dt>gs_lower</dt><dd><p>name of the tiles lower gauging station (type <code>character</code>).</p>
</dd>
<dt>geometry</dt><dd><p><code>sfc_POLYGON</code> column storing the geometries.</p>
</dd>
<dt>xmin</dt><dd><p>of the tile extent (type <code>integer</code>). Minimum of UTM Easting (m).</p>
</dd>
<dt>xmax</dt><dd><p>of the tile extent (type <code>integer</code>). Maximum of UTM Easting (m).</p>
</dd>
<dt>ymin</dt><dd><p>of the tile extent (type <code>integer</code>). Minimum of UTM Northing (m).</p>
</dd>
<dt>ymax</dt><dd><p>of the tile extent (type <code>integer</code>). Maximum of UTM Northing (m).</p>
</dd>
<dt>lon_min</dt><dd><p>of the tile extent (type <code>numeric</code>). Minimum of Longitude (decimal °).</p>
</dd>
<dt>lon_max</dt><dd><p>of the tile extent (type <code>numeric</code>). Maximum of Longitude (decimal °).</p>
</dd>
<dt>lat_min</dt><dd><p>of the tile extent (type <code>numeric</code>). Minimum of Latitude (decimal °).</p>
</dd>
<dt>lat_max</dt><dd><p>of the tile extent (type <code>numeric</code>). Maximum of Latitude (decimal °).</p>
</dd>
<dt>url</dt><dd><p>of the tile (type <code>character</code>).</p>
</dd>
</dl>



<h3>References</h3>

<p>Weber A (2020).
&ldquo;Digital elevation models of German waterway and navigation authorities - Version 0.1.0.&rdquo;
<a href="https://doi.org/10.5675/BfG-2011">https://doi.org/10.5675/BfG-2011</a>.
</p>
<p>Weber A (2020).
&ldquo;Digital elevation model (DEM1) of the River Elbe floodplain between Schmilka and Geesthacht, Germany.&rdquo;
<a href="https://doi.org/10.1594/PANGAEA.919293">https://doi.org/10.1594/PANGAEA.919293</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sf.tiles">sf.tiles</a></code>, <code><a href="#topic+sf.tiles_rhine">sf.tiles_rhine</a></code>
</p>

<hr>
<h2 id='sf.tiles_rhine'>Tiling along the active floodplain of the River Rhine</h2><span id='topic+sf.tiles_rhine'></span>

<h3>Description</h3>

<p>This dataset contains 40 rectangular polygons / tiles along the
active floodplain along the German, freeflowing parts of the River Rhine
from the weir Iffezheim to the Dutch border near Kleve in the coordinate
reference system
<a href="https://spatialreference.org/ref/epsg/etrs89-utm-zone-32n/">ETRS 1989 UTM 32N</a>.
</p>
<p>The tiles represent the original tiling of the internally used digital
elevation model (Weber 2020).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sf.tiles_rhine
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code> containing 40 polygons with 18 attributes:
</p>

<dl>
<dt>id</dt><dd><p>of the tile (type <code>integer</code>).</p>
</dd>
<dt>name</dt><dd><p>of the tile (type <code>character</code>).</p>
</dd>
<dt>river</dt><dd><p>of the tile (type <code>character</code>) in this case RHINE'.</p>
</dd>
<dt>name_km</dt><dd><p>of the tile (type <code>character</code>).</p>
</dd>
<dt>from_km</dt><dd><p>river kilometer of the tiles upper limit (type <code>numeric</code>).</p>
</dd>
<dt>to_km</dt><dd><p>river kilometer of the tiles lower limit (type <code>numeric</code>).</p>
</dd>
<dt>gs_upper</dt><dd><p>name of the tiles upper gauging station (type <code>character</code>).</p>
</dd>
<dt>gs_lower</dt><dd><p>name of the tiles lower gauging station (type <code>character</code>).</p>
</dd>
<dt>geometry</dt><dd><p><code>sfc_POLYGON</code> column storing the geometries.</p>
</dd>
<dt>xmin</dt><dd><p>of the tile extent (type <code>integer</code>). Minimum of UTM Easting (m).</p>
</dd>
<dt>xmax</dt><dd><p>of the tile extent (type <code>integer</code>). Maximum of UTM Easting (m).</p>
</dd>
<dt>ymin</dt><dd><p>of the tile extent (type <code>integer</code>). Minimum of UTM Northing (m).</p>
</dd>
<dt>ymax</dt><dd><p>of the tile extent (type <code>integer</code>). Maximum of UTM Northing (m).</p>
</dd>
<dt>lon_min</dt><dd><p>of the tile extent (type <code>numeric</code>). Minimum of Longitude (decimal °).</p>
</dd>
<dt>lon_max</dt><dd><p>of the tile extent (type <code>numeric</code>). Maximum of Longitude (decimal °).</p>
</dd>
<dt>lat_min</dt><dd><p>of the tile extent (type <code>numeric</code>). Minimum of Latitude (decimal °).</p>
</dd>
<dt>lat_max</dt><dd><p>of the tile extent (type <code>numeric</code>). Maximum of Latitude (decimal °).</p>
</dd>
<dt>url</dt><dd><p>of the tile (type <code>character</code>).</p>
</dd>
</dl>



<h3>References</h3>

<p>Weber A (2020).
&ldquo;Digital elevation models of German waterway and navigation authorities - Version 0.1.0.&rdquo;
<a href="https://doi.org/10.5675/BfG-2011">https://doi.org/10.5675/BfG-2011</a>.
</p>
<p>Weber A (2020).
&ldquo;Digital elevation model (DEM1) of the River Rhine floodplain between Iffezheim and Kleve, Germany.&rdquo;
<a href="https://doi.org/10.1594/PANGAEA.919308">https://doi.org/10.1594/PANGAEA.919308</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sf.tiles_elbe">sf.tiles_elbe</a></code>, <code><a href="#topic+sf.tiles_rhine">sf.tiles_rhine</a></code>
</p>

<hr>
<h2 id='w80ToSFL'>Function to convert w80-files to <code>sfc_LINESTRING</code>.</h2><span id='topic+w80ToSFL'></span>

<h3>Description</h3>

<p>This function converts w80-files, an ascii-format with 80
characters per line for spatial point data used by the German Waterways and
Shipping Administration (WSV). Every single row codes for one point:
</p>
<p><code>|_1_|2_|_3______|4|____________5______________|_______6_______|_____7___|_8_|</code> <br />
</p>
<p><code>W0701 55 2594611   1330938065557502425901108035 5795591108035         Bu.15   01</code> <br />
</p>
<p><code>W0701 57 2594611   7330932961457502484041108035 5538181108035         Bu.15   01</code> <br />
</p>
<p>Within each row very specific sections code for specific attributes:</p>

<table>
<tr>
 <td style="text-align: center;">
   <strong>section</strong> </td><td style="text-align: left;"> <strong>column(s)</strong> </td><td style="text-align: left;"> <strong>attribute</strong> </td><td style="text-align: right;"> <strong>column name in result</strong> </td>
</tr>
<tr>
 <td style="text-align: center;">
   1 </td><td style="text-align: left;"> 1 </td><td style="text-align: left;"> state id, here W=WSV </td><td style="text-align: right;"> sid </td>
</tr>
<tr>
 <td style="text-align: center;">
   1 </td><td style="text-align: left;"> 2-5 </td><td style="text-align: left;"> Federal Waterway ID </td><td style="text-align: right;"> fwid </td>
</tr>
<tr>
 <td style="text-align: center;">
   2 </td><td style="text-align: left;"> 6-8 </td><td style="text-align: left;"> WSV point type </td><td style="text-align: right;"> wsvpt </td>
</tr>
<tr>
 <td style="text-align: center;">
   3 </td><td style="text-align: left;"> 9 </td><td style="text-align: left;"> blank </td><td style="text-align: right;"> - </td>
</tr>
<tr>
 <td style="text-align: center;">
   3 </td><td style="text-align: left;"> 10-15 </td><td style="text-align: left;"> river station (km) </td><td style="text-align: right;"> station </td>
</tr>
<tr>
 <td style="text-align: center;">
   4 </td><td style="text-align: left;"> 16 </td><td style="text-align: left;"> bank: 1 left, 2 right </td><td style="text-align: right;"> bank </td>
</tr>
<tr>
 <td style="text-align: center;">
   4 </td><td style="text-align: left;"> 17-20 </td><td style="text-align: left;"> continuous id </td><td style="text-align: right;"> id </td>
</tr>
<tr>
 <td style="text-align: center;">
   5 </td><td style="text-align: left;"> 21-30 </td><td style="text-align: left;"> easting in GK-coordinates </td><td style="text-align: right;"> x </td>
</tr>
<tr>
 <td style="text-align: center;">
   5 </td><td style="text-align: left;"> 31-40 </td><td style="text-align: left;"> northing in GK-coordinates </td><td style="text-align: right;"> y </td>
</tr>
<tr>
 <td style="text-align: center;">
   6 </td><td style="text-align: left;"> 41-46 </td><td style="text-align: left;"> datum of measurement </td><td style="text-align: right;"> date_coor </td>
</tr>
<tr>
 <td style="text-align: center;">
   6 </td><td style="text-align: left;"> 47 </td><td style="text-align: left;"> accuracy </td><td style="text-align: right;"> acc_coor </td>
</tr>
<tr>
 <td style="text-align: center;">
   6 </td><td style="text-align: left;"> 48-54 </td><td style="text-align: left;"> elevation </td><td style="text-align: right;"> z </td>
</tr>
<tr>
 <td style="text-align: center;">
   6 </td><td style="text-align: left;"> 55-60 </td><td style="text-align: left;"> date of the elevation measurement </td><td style="text-align: right;"> date_z </td>
</tr>
<tr>
 <td style="text-align: center;">
   6 </td><td style="text-align: left;"> 61 </td><td style="text-align: left;"> accuracy of the elevation measurement </td><td style="text-align: right;"> acc_z </td>
</tr>
<tr>
 <td style="text-align: center;">
   6 </td><td style="text-align: left;"> 62-64 </td><td style="text-align: left;"> type of measurement </td><td style="text-align: right;"> tom </td>
</tr>
<tr>
 <td style="text-align: center;">
   7 </td><td style="text-align: left;"> 65-84 </td><td style="text-align: left;"> comment </td><td style="text-align: right;"> comment </td>
</tr>
<tr>
 <td style="text-align: center;">
   8 </td><td style="text-align: left;"> 85-86 </td><td style="text-align: left;"> point status </td><td style="text-align: right;"> status </td>
</tr>
<tr>
 <td style="text-align: center;">
</td>
</tr>

</table>

<p>In a second step these points are aggregated to a
<code>sfc_LINESTRING</code> using the grouping column <code>id</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>w80ToSFL(
  filename,
  crs,
  id = c("sid", "fwid", "wsvpt", "station", "bank", "id", "x", "y", "date_coor",
    "acc_coor", "z", "date_z", "acc_z", "tom", "comment", "status", "lat", "lon",
    "station_int", "station_c")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="w80ToSFL_+3A_filename">filename</code></td>
<td>
<p>argument of length 1 and type <code>character</code> specifying
an existing w80-file.</p>
</td></tr>
<tr><td><code id="w80ToSFL_+3A_crs">crs</code></td>
<td>
<p>argument of type <code><a href="sf.html#topic+st_crs">crs</a></code> or <code><a href="terra.html#topic+crs">crs</a></code>.</p>
</td></tr>
<tr><td><code id="w80ToSFL_+3A_id">id</code></td>
<td>
<p>argument of type <code>character</code> specifying a grouping column.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>sfc_LINESTRING</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  options("hydflood.datadir" = tempdir())
  library(hydflood)
  c &lt;- st_crs("EPSG:25833")
  filename &lt;- tempfile(fileext = ".w80")
  
  # write temporary w80 file
  cat("W0701 55 2594611   1330938065557502425901108035 5795591108035         Bu.15   01\n",
      file = filename)
  cat("W0701 57 2594611   7330932961457502484041108035 5538181108035         Bu.15   01\n",
      file = filename, append = TRUE)
  
  # import temporary w80 file as sf LINESTRING
  sl &lt;- w80ToSFL(filename, c, "station_int")

</code></pre>

<hr>
<h2 id='w80ToSFP'>Function to convert w80-files to <code>sfc_POINT</code>.</h2><span id='topic+w80ToSFP'></span>

<h3>Description</h3>

<p>This function converts w80-files, an asci-format with 80
characters per line for spatial point data used by the German Waterways and
Shipping Administration (WSV). Every single row codes for one point:
</p>
<p><code>|_1_|2_|_3______|4|____________5______________|_______6_______|_____7___|_8_|</code> <br />
</p>
<p><code>W0701 55 2594611   1330938065557502425901108035 5795591108035         Bu.15   01</code> <br />
</p>
<p><code>W0701 57 2594611   7330932961457502484041108035 5538181108035         Bu.15   01</code> <br />
</p>
<p>Within each row very specific sections code for specific attributes:</p>

<table>
<tr>
 <td style="text-align: center;">
   <strong>section</strong> </td><td style="text-align: left;"> <strong>column(s)</strong> </td><td style="text-align: left;"> <strong>attribute</strong> </td><td style="text-align: right;"> <strong>column name in result</strong> </td>
</tr>
<tr>
 <td style="text-align: center;">
   1 </td><td style="text-align: left;"> 1 </td><td style="text-align: left;"> state id, here W=WSV </td><td style="text-align: right;"> sid </td>
</tr>
<tr>
 <td style="text-align: center;">
   1 </td><td style="text-align: left;"> 2-5 </td><td style="text-align: left;"> Federal Waterway ID </td><td style="text-align: right;"> fwid </td>
</tr>
<tr>
 <td style="text-align: center;">
   2 </td><td style="text-align: left;"> 6-8 </td><td style="text-align: left;"> WSV point type </td><td style="text-align: right;"> wsvpt </td>
</tr>
<tr>
 <td style="text-align: center;">
   3 </td><td style="text-align: left;"> 9 </td><td style="text-align: left;"> blank </td><td style="text-align: right;"> - </td>
</tr>
<tr>
 <td style="text-align: center;">
   3 </td><td style="text-align: left;"> 10-15 </td><td style="text-align: left;"> river station (km) </td><td style="text-align: right;"> station </td>
</tr>
<tr>
 <td style="text-align: center;">
   4 </td><td style="text-align: left;"> 16 </td><td style="text-align: left;"> bank: 1 left, 2 right </td><td style="text-align: right;"> bank </td>
</tr>
<tr>
 <td style="text-align: center;">
   4 </td><td style="text-align: left;"> 17-20 </td><td style="text-align: left;"> continuous id </td><td style="text-align: right;"> id </td>
</tr>
<tr>
 <td style="text-align: center;">
   5 </td><td style="text-align: left;"> 21-30 </td><td style="text-align: left;"> easting in GK-coordinates </td><td style="text-align: right;"> x </td>
</tr>
<tr>
 <td style="text-align: center;">
   5 </td><td style="text-align: left;"> 31-40 </td><td style="text-align: left;"> northing in GK-coordinates </td><td style="text-align: right;"> y </td>
</tr>
<tr>
 <td style="text-align: center;">
   6 </td><td style="text-align: left;"> 41-46 </td><td style="text-align: left;"> datum of measurement </td><td style="text-align: right;"> date_coor </td>
</tr>
<tr>
 <td style="text-align: center;">
   6 </td><td style="text-align: left;"> 47 </td><td style="text-align: left;"> accuracy </td><td style="text-align: right;"> acc_coor </td>
</tr>
<tr>
 <td style="text-align: center;">
   6 </td><td style="text-align: left;"> 48-54 </td><td style="text-align: left;"> elevation </td><td style="text-align: right;"> z </td>
</tr>
<tr>
 <td style="text-align: center;">
   6 </td><td style="text-align: left;"> 55-60 </td><td style="text-align: left;"> date of the elevation measurement </td><td style="text-align: right;"> date_z </td>
</tr>
<tr>
 <td style="text-align: center;">
   6 </td><td style="text-align: left;"> 61 </td><td style="text-align: left;"> accuracy of the elevation measurement </td><td style="text-align: right;"> acc_z </td>
</tr>
<tr>
 <td style="text-align: center;">
   6 </td><td style="text-align: left;"> 62-64 </td><td style="text-align: left;"> type of measurement </td><td style="text-align: right;"> tom </td>
</tr>
<tr>
 <td style="text-align: center;">
   7 </td><td style="text-align: left;"> 65-84 </td><td style="text-align: left;"> comment </td><td style="text-align: right;"> comment </td>
</tr>
<tr>
 <td style="text-align: center;">
   8 </td><td style="text-align: left;"> 85-86 </td><td style="text-align: left;"> point status </td><td style="text-align: right;"> status </td>
</tr>
<tr>
 <td style="text-align: center;">
</td>
</tr>

</table>



<h3>Usage</h3>

<pre><code class='language-R'>w80ToSFP(filename, crs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="w80ToSFP_+3A_filename">filename</code></td>
<td>
<p>argument of length 1 and type <code>character</code> specifying
an existing w80-file.</p>
</td></tr>
<tr><td><code id="w80ToSFP_+3A_crs">crs</code></td>
<td>
<p>argument of type <code><a href="sf.html#topic+st_crs">crs</a></code> or <code><a href="terra.html#topic+crs">crs</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>sfc_POINT</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  options("hydflood.datadir" = tempdir())
  library(hydflood)
  c &lt;- st_crs("EPSG:25833")
  filename &lt;- tempfile(fileext = ".w80")
  
  # write temporary w80 file
  cat("W0701 55 2594611   1330938065557502425901108035 5795591108035         Bu.15   01\n",
      file = filename)
  cat("W0701 57 2594611   7330932961457502484041108035 5538181108035         Bu.15   01\n",
      file = filename, append = TRUE)
  
  # import temporary w80 file as sf POINT
  sf &lt;- w80ToSFP(filename, c)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
