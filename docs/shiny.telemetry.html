<!DOCTYPE html><html lang="en-US"><head><title>Help for package shiny.telemetry</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {shiny.telemetry}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#analytics_app'><p>Run example telemetry analytics dashboard</p></a></li>
<li><a href='#build_id_from_secret'><p>Builds id from a secret that can be used in open communication</p></a></li>
<li><a href='#build_token'><p>Builds hash for a call</p></a></li>
<li><a href='#DataStorage'><p>Data Storage abstract class to handle all the read/write operations</p></a></li>
<li><a href='#DataStorageLogFile'><p>Data storage class for <code>JSON</code> Log File</p></a></li>
<li><a href='#DataStorageMariaDB'><p>Data storage class with MariaDB / MySQL provider</p></a></li>
<li><a href='#DataStorageMongoDB'><p>Data storage class with MongoDB provider</p></a></li>
<li><a href='#DataStorageMSSQLServer'><p>Data storage class with MS SQL Server provider</p></a></li>
<li><a href='#DataStoragePlumber'><p>Data storage class with SQLite provider</p></a></li>
<li><a href='#DataStoragePostgreSQL'><p>Data storage class with PostgreSQL provider</p></a></li>
<li><a href='#DataStorageSQLFamily'><p>Data storage abstract class for SQL providers</p></a></li>
<li><a href='#DataStorageSQLite'><p>Data storage class with SQLite provider</p></a></li>
<li><a href='#date_from_null'><p>Common date_from to recognize as NULL</p></a></li>
<li><a href='#date_to_null'><p>Common date_to to recognize as NULL</p></a></li>
<li><a href='#prepare_admin_panel_components'><p>prepare_admin_panel_components</p></a></li>
<li><a href='#Telemetry'><p>Telemetry class to manage analytics gathering at a global level</p></a></li>
<li><a href='#use_telemetry'><p>Function that adds telemetry HTML elements to UI</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>'Shiny' App Usage Telemetry</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Enables instrumentation of 'Shiny' apps for tracking user
    session events such as input changes, browser type, and session
    duration.  These events can be sent to any of the available storage
    backends and analyzed using the included 'Shiny' app to gain insights
    about app usage and adoption.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/LGPL-3">LGPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://appsilon.github.io/shiny.telemetry/">https://appsilon.github.io/shiny.telemetry/</a>,
<a href="https://github.com/Appsilon/shiny.telemetry">https://github.com/Appsilon/shiny.telemetry</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/Appsilon/shiny.telemetry/issues">https://github.com/Appsilon/shiny.telemetry/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, digest, dplyr (&ge; 1.1.0), glue, htmltools, httr2,
jsonlite, lifecycle, logger, lubridate, odbc, purrr, R6, rlang,
RSQLite, shiny, stringr, tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>box, config, DT, knitr, mongolite, plotly, plumber,
RColorBrewer, RMariaDB, rmarkdown, RPostgres, RPostgreSQL,
scales, semantic.dashboard (&ge; 0.1.1), shiny.semantic (&ge;
0.2.0), shinyjs, testthat (&ge; 3.1.7), timevis, withr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-11 13:11:41 UTC; averissimo</td>
</tr>
<tr>
<td>Author:</td>
<td>André Veríssimo [aut, cre],
  Kamil Żyła [aut],
  Krystian Igras [aut],
  Recle Vibal [aut],
  Arun Kodati [aut],
  Wahaduzzaman Khan [aut],
  Appsilon Sp. z o.o. [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>André Veríssimo &lt;opensource+andre@appsilon.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-15 08:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='analytics_app'>Run example telemetry analytics dashboard</h2><span id='topic+analytics_app'></span>

<h3>Description</h3>

<p>Run example telemetry analytics dashboard
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analytics_app(data_storage)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="analytics_app_+3A_data_storage">data_storage</code></td>
<td>
<p>data_storage instance that will handle all backend read
and writes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object that represents the analytics app. Printing the object or
passing it to <code>shiny::runApp()</code> will run it.
</p>

<hr>
<h2 id='build_id_from_secret'>Builds id from a secret that can be used in open communication</h2><span id='topic+build_id_from_secret'></span>

<h3>Description</h3>

<p>This is used in shiny.telemetry, but also externally with the Plumber
endpoint.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_id_from_secret(secret)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="build_id_from_secret_+3A_secret">secret</code></td>
<td>
<p>string that contains information that should not be publicly
available</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A string with an hash of the secret.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>build_id_from_secret("some_random_secret_generated_with_uuid::UUIDgenerate")
</code></pre>

<hr>
<h2 id='build_token'>Builds hash for a call</h2><span id='topic+build_token'></span>

<h3>Description</h3>

<p>Function that takes creates a signature for the <code>values</code> using a secret.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_token(values, secret = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="build_token_+3A_values">values</code></td>
<td>
<p>R object that is going to be signed</p>
</td></tr>
<tr><td><code id="build_token_+3A_secret">secret</code></td>
<td>
<p>string that contains the shared secret to sign the
communication. It can be NULL on both telemetry and in plumber API to
disable this communication feature</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is used in shiny.telemetry, but also externally with the Plumber
endpoint.
</p>


<h3>Value</h3>

<p>A string that contains an hash to uniquely identify the parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>build_token(values = list(list(1, 2, 3), 2, 2, 3, "bb"))
build_token(values = list(list(1, 2, 3), 1, 2, 3, "bb"))
build_token(values = list(list(1, 2, 3), 1, 2, 3, "bb"), secret = "abc")
build_token(values = list(list(1, 2, 3), 1, 2, 3, "bb"), secret = "abd")
</code></pre>

<hr>
<h2 id='DataStorage'>Data Storage abstract class to handle all the read/write operations</h2><span id='topic+DataStorage'></span>

<h3>Description</h3>

<p>Abstract R6 Class that encapsulates all the operations needed by
Shiny.telemetry to read and write. This removes the complexity from the
functions and uses a unified API.
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>event_bucket</code></dt><dd><p>string that identifies the bucket to store user
related and action data</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DataStorage-new"><code>DataStorage$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DataStorage-insert"><code>DataStorage$insert()</code></a>
</p>
</li>
<li> <p><a href="#method-DataStorage-read_event_data"><code>DataStorage$read_event_data()</code></a>
</p>
</li>
<li> <p><a href="#method-DataStorage-close"><code>DataStorage$close()</code></a>
</p>
</li>
<li> <p><a href="#method-DataStorage-clone"><code>DataStorage$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-DataStorage-new"></a>



<h4>Method <code>new()</code></h4>

<p>initialize data storage object common with all providers
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStorage$new()</pre></div>


<hr>
<a id="method-DataStorage-insert"></a>



<h4>Method <code>insert()</code></h4>

<p>Insert new data
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStorage$insert(app_name, type, session = NULL, details = NULL, time = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>app_name</code></dt><dd><p>string with name of dashboard (the version can be also
included in this string)</p>
</dd>
<dt><code>type</code></dt><dd><p>string that identifies the event type to store</p>
</dd>
<dt><code>session</code></dt><dd><p>(optional) string that identifies a session where the
event was logged</p>
</dd>
<dt><code>details</code></dt><dd><p>atomic element of list with data to save in storage</p>
</dd>
<dt><code>time</code></dt><dd><p>date time value indicates the moment the record was
generated in UTC. By default it should be NULL and determined
automatically, but in cases where it should be defined, use <code>Sys.time()</code>
or <code>lubridate::now(tzone = "UTC")</code> to generate it.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Nothing. This method is called for side effects.
</p>


<hr>
<a id="method-DataStorage-read_event_data"></a>



<h4>Method <code>read_event_data()</code></h4>

<p>read all user data from SQLite.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStorage$read_event_data(date_from = NULL, date_to = NULL, app_name = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>date_from</code></dt><dd><p>(optional) date representing the starting day of
results.</p>
</dd>
<dt><code>date_to</code></dt><dd><p>(optional) date representing the last day of results.</p>
</dd>
<dt><code>app_name</code></dt><dd><p>(optional) string identifying the Dashboard-specific event
data</p>
</dd>
</dl>

</div>


<hr>
<a id="method-DataStorage-close"></a>



<h4>Method <code>close()</code></h4>

<p>Close the connection if necessary
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStorage$close()</pre></div>


<hr>
<a id="method-DataStorage-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStorage$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='DataStorageLogFile'>Data storage class for <code>JSON</code> Log File</h2><span id='topic+DataStorageLogFile'></span>

<h3>Description</h3>

<p>Implementation of the <code><a href="#topic+DataStorage">DataStorage</a></code> R6 class to a <code>JSON</code> log file backend using a unified
API for read/write operations
</p>


<h3>Super class</h3>

<p><code><a href="#topic+DataStorage">shiny.telemetry::DataStorage</a></code> -&gt; <code>DataStorageLogFile</code>
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>event_bucket</code></dt><dd><p>string that identifies the file path to store user
related and action data</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DataStorageLogFile-new"><code>DataStorageLogFile$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DataStorageLogFile-clone"><code>DataStorageLogFile$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="close"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-close'><code>shiny.telemetry::DataStorage$close()</code></a></span></li>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="insert"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-insert'><code>shiny.telemetry::DataStorage$insert()</code></a></span></li>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="read_event_data"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-read_event_data'><code>shiny.telemetry::DataStorage$read_event_data()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-DataStorageLogFile-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize the data storage class
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStorageLogFile$new(log_file_path)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>log_file_path</code></dt><dd><p>string with path to <code>JSON</code> log file user actions</p>
</dd>
</dl>

</div>


<hr>
<a id="method-DataStorageLogFile-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStorageLogFile$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>log_file_path &lt;- tempfile(fileext = ".txt")
data_storage &lt;- DataStorageLogFile$new(log_file_path = log_file_path)

data_storage$insert("example", "test_event", "session1")
data_storage$insert("example", "input", "s1", list(id = "id"))
data_storage$insert("example", "input", "s1", list(id = "id2", value = 32))

data_storage$insert(
  "example", "test_event_3_days_ago", "session1",
  time = lubridate::as_datetime(lubridate::today() - 3)
)

data_storage$read_event_data()
data_storage$read_event_data(Sys.Date() - 1, Sys.Date() + 1)

file.remove(log_file_path)
</code></pre>

<hr>
<h2 id='DataStorageMariaDB'>Data storage class with MariaDB / MySQL provider</h2><span id='topic+DataStorageMariaDB'></span>

<h3>Description</h3>

<p>Implementation of the <code><a href="#topic+DataStorage">DataStorage</a></code> R6 class to MariaDB backend using a
unified API for read/write operations
</p>


<h3>Super classes</h3>

<p><code><a href="#topic+DataStorage">shiny.telemetry::DataStorage</a></code> -&gt; <code><a href="#topic+DataStorageSQLFamily">shiny.telemetry::DataStorageSQLFamily</a></code> -&gt; <code>DataStorageMariaDB</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DataStorageMariaDB-new"><code>DataStorageMariaDB$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DataStorageMariaDB-clone"><code>DataStorageMariaDB$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="close"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-close'><code>shiny.telemetry::DataStorage$close()</code></a></span></li>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="insert"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-insert'><code>shiny.telemetry::DataStorage$insert()</code></a></span></li>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="read_event_data"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-read_event_data'><code>shiny.telemetry::DataStorage$read_event_data()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-DataStorageMariaDB-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize the data storage class
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStorageMariaDB$new(
  username = NULL,
  password = NULL,
  hostname = "127.0.0.1",
  port = 3306,
  dbname = "shiny_telemetry"
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>username</code></dt><dd><p>string with a MariaDB username.</p>
</dd>
<dt><code>password</code></dt><dd><p>string with the password for the username.</p>
</dd>
<dt><code>hostname</code></dt><dd><p>string with hostname of MariaDB instance.</p>
</dd>
<dt><code>port</code></dt><dd><p>numeric value with the port number of MariaDB instance.</p>
</dd>
<dt><code>dbname</code></dt><dd><p>string with the name of the database in the MariaDB
instance.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-DataStorageMariaDB-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStorageMariaDB$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data_storage &lt;- DataStorageMariaDB$new(user = "mariadb", password = "mysecretpassword")

data_storage$insert("example", "test_event", "session1")
data_storage$insert("example", "input", "s1", list(id = "id1"))
data_storage$insert("example", "input", "s1", list(id = "id2", value = 32))

data_storage$insert(
  "example", "test_event_3_days_ago", "session1",
  time = lubridate::as_datetime(lubridate::today() - 3)
)

data_storage$read_event_data()
data_storage$read_event_data(Sys.Date() - 1, Sys.Date() + 1)
data_storage$close()

## End(Not run)
</code></pre>

<hr>
<h2 id='DataStorageMongoDB'>Data storage class with MongoDB provider</h2><span id='topic+DataStorageMongoDB'></span>

<h3>Description</h3>

<p>Implementation of the <code><a href="#topic+DataStorage">DataStorage</a></code> R6 class to MongoDB backend using a
unified API for read/write operations
</p>


<h3>Super class</h3>

<p><code><a href="#topic+DataStorage">shiny.telemetry::DataStorage</a></code> -&gt; <code>DataStorageMongoDB</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DataStorageMongoDB-new"><code>DataStorageMongoDB$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DataStorageMongoDB-clone"><code>DataStorageMongoDB$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="close"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-close'><code>shiny.telemetry::DataStorage$close()</code></a></span></li>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="insert"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-insert'><code>shiny.telemetry::DataStorage$insert()</code></a></span></li>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="read_event_data"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-read_event_data'><code>shiny.telemetry::DataStorage$read_event_data()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-DataStorageMongoDB-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize the data storage class
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStorageMongoDB$new(
  hostname = "localhost",
  port = 27017,
  username = NULL,
  password = NULL,
  authdb = NULL,
  dbname = "shiny_telemetry",
  options = NULL,
  ssl_options = mongolite::ssl_options()
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>hostname</code></dt><dd><p>the hostname or IP address of the MongoDB server.</p>
</dd>
<dt><code>port</code></dt><dd><p>the port number of the MongoDB server (default is 27017).</p>
</dd>
<dt><code>username</code></dt><dd><p>the username for authentication (optional).</p>
</dd>
<dt><code>password</code></dt><dd><p>the password for authentication (optional).</p>
</dd>
<dt><code>authdb</code></dt><dd><p>the default authentication database (optional).</p>
</dd>
<dt><code>dbname</code></dt><dd><p>name of database (default is &quot;shiny_telemetry&quot;).</p>
</dd>
<dt><code>options</code></dt><dd><p>Additional connection options in a named list format
(e.g., list(ssl = &quot;true&quot;, replicaSet = &quot;myreplicaset&quot;)) (optional).</p>
</dd>
<dt><code>ssl_options</code></dt><dd><p>additional connection options such as SSL keys/certs
(default is <code><a href="mongolite.html#topic+ssl_options">mongolite::ssl_options()</a></code>).</p>
</dd>
</dl>

</div>


<hr>
<a id="method-DataStorageMongoDB-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStorageMongoDB$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data_storage &lt;- DataStorageMongoDB$new(
  host = "localhost",
  db = "test",
  ssl_options = mongolite::ssl_options()
)
data_storage$insert("example", "test_event", "session1")
data_storage$insert("example", "input", "s1", list(id = "id1"))
data_storage$insert("example", "input", "s1", list(id = "id2", value = 32))

data_storage$insert(
  "example", "test_event_3_days_ago", "session1",
  time = lubridate::as_datetime(lubridate::today() - 3)
)

data_storage$read_event_data()
data_storage$read_event_data(Sys.Date() - 1, Sys.Date() + 1)
data_storage$close()

## End(Not run)
</code></pre>

<hr>
<h2 id='DataStorageMSSQLServer'>Data storage class with MS SQL Server provider</h2><span id='topic+DataStorageMSSQLServer'></span>

<h3>Description</h3>

<p>Implementation of the <code><a href="#topic+DataStorage">DataStorage</a></code> R6 class to MS SQL Server backend using a
unified API for read/write operations. This provider requires a configured
and named <code>ODBC</code> driver to be set up on your system, for example, &quot;<code>ODBC</code>
Driver 17 for SQL Server&quot; or &quot;<code>ODBC</code> Driver 18 for SQL Server&quot;.
</p>
<p>Note that MS SQL Server support requires a subtly different database schema:
the <code>time</code> field is stored as a <code>DATETIME</code> rather than a <code>TIMESTAMP</code>.
</p>


<h3>Super classes</h3>

<p><code><a href="#topic+DataStorage">shiny.telemetry::DataStorage</a></code> -&gt; <code><a href="#topic+DataStorageSQLFamily">shiny.telemetry::DataStorageSQLFamily</a></code> -&gt; <code>DataStorageMSSQLServer</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DataStorageMSSQLServer-new"><code>DataStorageMSSQLServer$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DataStorageMSSQLServer-clone"><code>DataStorageMSSQLServer$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="close"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-close'><code>shiny.telemetry::DataStorage$close()</code></a></span></li>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="insert"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-insert'><code>shiny.telemetry::DataStorage$insert()</code></a></span></li>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="read_event_data"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-read_event_data'><code>shiny.telemetry::DataStorage$read_event_data()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-DataStorageMSSQLServer-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize the data storage class
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStorageMSSQLServer$new(
  username = NULL,
  password = NULL,
  hostname = "127.0.0.1",
  port = 1433,
  dbname = "shiny_telemetry",
  driver = "ODBC Driver 17 for SQL Server",
  trust_server_certificate = "NO"
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>username</code></dt><dd><p>string with a MS SQL Server username.</p>
</dd>
<dt><code>password</code></dt><dd><p>string with the password for the username.</p>
</dd>
<dt><code>hostname</code></dt><dd><p>string with hostname of the MS SQL Server instance.</p>
</dd>
<dt><code>port</code></dt><dd><p>numeric value with the port number of MS SQL Server instance.</p>
</dd>
<dt><code>dbname</code></dt><dd><p>string with the name of the database in the MS SQL Server
instance.</p>
</dd>
<dt><code>driver</code></dt><dd><p>string with the name of the <code>ODBC</code> driver class for MS SQL,
for example &quot;<code>ODBC</code> Driver 17 for SQL Server&quot;.</p>
</dd>
<dt><code>trust_server_certificate</code></dt><dd><p>string with &quot;NO&quot; or &quot;YES&quot;, setting
whether or not to trust the server's certificate implicitly.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-DataStorageMSSQLServer-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStorageMSSQLServer$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data_storage &lt;- DataStorageMSSQLServer$new(
  user = "sa",
  password = "my-Secr3t_Password",
  hostname = "localhost",
  port = 1433,
  dbname = "shiny_telemetry",
  driver = "ODBC Driver 18 for SQL Server",
  trust_server_certificate = "YES"
)

data_storage$insert("example", "test_event", "session1")
data_storage$insert("example", "input", "s1", list(id = "id1"))
data_storage$insert("example", "input", "s1", list(id = "id2", value = 32))

data_storage$insert(
  "example", "test_event_3_days_ago", "session1",
  time = lubridate::as_datetime(lubridate::today() - 3)
)

data_storage$read_event_data()
data_storage$read_event_data(Sys.Date() - 1, Sys.Date() + 1)
data_storage$close()

## End(Not run)
</code></pre>

<hr>
<h2 id='DataStoragePlumber'>Data storage class with SQLite provider</h2><span id='topic+DataStoragePlumber'></span>

<h3>Description</h3>

<p>Implementation of the <code><a href="#topic+DataStorage">DataStorage</a></code> R6 class to SQLite backend using a unified
API for read/write operations
</p>


<h3>Super class</h3>

<p><code><a href="#topic+DataStorage">shiny.telemetry::DataStorage</a></code> -&gt; <code>DataStoragePlumber</code>
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>event_read_endpoint</code></dt><dd><p>string field that returns read action
endpoint</p>
</dd>
<dt><code>event_insert_endpoint</code></dt><dd><p>string field that returns insert action
endpoint</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DataStoragePlumber-new"><code>DataStoragePlumber$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DataStoragePlumber-clone"><code>DataStoragePlumber$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="close"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-close'><code>shiny.telemetry::DataStorage$close()</code></a></span></li>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="insert"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-insert'><code>shiny.telemetry::DataStorage$insert()</code></a></span></li>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="read_event_data"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-read_event_data'><code>shiny.telemetry::DataStorage$read_event_data()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-DataStoragePlumber-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize the data storage class
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStoragePlumber$new(
  hostname = "127.0.0.1",
  port = 80,
  protocol = "http",
  path = NULL,
  secret = NULL,
  authorization = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>hostname</code></dt><dd><p>string with hostname of plumber instance,</p>
</dd>
<dt><code>port</code></dt><dd><p>numeric value with port number of plumber instance.</p>
</dd>
<dt><code>protocol</code></dt><dd><p>string with protocol of the connection of the plumber
instance.</p>
</dd>
<dt><code>path</code></dt><dd><p>string with sub-path of plumber deployment.</p>
</dd>
<dt><code>secret</code></dt><dd><p>string with secret to sign communication with plumber (can
be NULL for disabling communication signing).</p>
</dd>
<dt><code>authorization</code></dt><dd><p>string to use in HTTP headers for authorization
(for example: to authenticate to a plumber deployment behind a connect
server).</p>
</dd>
</dl>

</div>


<hr>
<a id="method-DataStoragePlumber-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStoragePlumber$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Make sure the PLUMBER_SECRET environment variable is valid before
# running these examples (NULL or a valid secret)

data_storage &lt;- DataStoragePlumber$new(
  hostname = "connect.appsilon.com",
  path = "shiny_telemetry_plumber",
  port = 443,
  protocol = "https",
  authorization = Sys.getenv("CONNECT_AUTHORIZATION_KEY"),
  secret = Sys.getenv("PLUMBER_SECRET")
)

data_storage &lt;- DataStoragePlumber$new(
  hostname = "127.0.0.1",
  path = NULL,
  port = 8087,
  protocol = "http",
  secret = Sys.getenv("PLUMBER_SECRET")
)

data_storage$insert("example", "test_event", "session1")
data_storage$insert("example", "input", "s1", list(id = "id"))
data_storage$insert("example", "input", "s1", list(id = "id2", value = 32))

data_storage$insert(
  "example", "test_event_3_days_ago", "session1",
  time = lubridate::as_datetime(lubridate::today() - 3)
)

data_storage$read_event_data()
data_storage$read_event_data(Sys.Date() - 1, Sys.Date() + 1)

## End(Not run)
</code></pre>

<hr>
<h2 id='DataStoragePostgreSQL'>Data storage class with PostgreSQL provider</h2><span id='topic+DataStoragePostgreSQL'></span>

<h3>Description</h3>

<p>Implementation of the <code><a href="#topic+DataStorage">DataStorage</a></code> R6 class to PostgreSQL backend using a
unified API for read/write operations
</p>


<h3>Super classes</h3>

<p><code><a href="#topic+DataStorage">shiny.telemetry::DataStorage</a></code> -&gt; <code><a href="#topic+DataStorageSQLFamily">shiny.telemetry::DataStorageSQLFamily</a></code> -&gt; <code>DataStoragePostgreSQL</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DataStoragePostgreSQL-new"><code>DataStoragePostgreSQL$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DataStoragePostgreSQL-clone"><code>DataStoragePostgreSQL$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="close"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-close'><code>shiny.telemetry::DataStorage$close()</code></a></span></li>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="insert"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-insert'><code>shiny.telemetry::DataStorage$insert()</code></a></span></li>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="read_event_data"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-read_event_data'><code>shiny.telemetry::DataStorage$read_event_data()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-DataStoragePostgreSQL-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize the data storage class
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStoragePostgreSQL$new(
  username = NULL,
  password = NULL,
  hostname = "127.0.0.1",
  port = 5432,
  dbname = "shiny_telemetry",
  driver = "RPostgreSQL"
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>username</code></dt><dd><p>string with a PostgreSQL username.</p>
</dd>
<dt><code>password</code></dt><dd><p>string with the password for the username.</p>
</dd>
<dt><code>hostname</code></dt><dd><p>string with hostname of PostgreSQL instance.</p>
</dd>
<dt><code>port</code></dt><dd><p>numeric value with the port number of PostgreSQL instance.</p>
</dd>
<dt><code>dbname</code></dt><dd><p>string with the name of the database in the PostgreSQL instance.</p>
</dd>
<dt><code>driver</code></dt><dd><p>string, to select PostgreSQL driver among <code>c("RPostgreSQL", "RPostgres")</code>.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-DataStoragePostgreSQL-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStoragePostgreSQL$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data_storage &lt;- DataStoragePostgreSQL$new(user = "postgres", password = "mysecretpassword")

data_storage$insert("example", "test_event", "session1")
data_storage$insert("example", "input", "s1", list(id = "id1"))
data_storage$insert("example", "input", "s1", list(id = "id2", value = 32))

data_storage$insert(
  "example", "test_event_3_days_ago", "session1",
  time = lubridate::as_datetime(lubridate::today() - 3)
)

data_storage$read_event_data()
data_storage$read_event_data(Sys.Date() - 1, Sys.Date() + 1)
data_storage$close()

## End(Not run)
</code></pre>

<hr>
<h2 id='DataStorageSQLFamily'>Data storage abstract class for SQL providers</h2><span id='topic+DataStorageSQLFamily'></span>

<h3>Description</h3>

<p>Abstract subclass of the <code><a href="#topic+DataStorage">DataStorage</a></code> R6 class for the SQL family of
providers
</p>


<h3>Super class</h3>

<p><code><a href="#topic+DataStorage">shiny.telemetry::DataStorage</a></code> -&gt; <code>DataStorageSQLFamily</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DataStorageSQLFamily-clone"><code>DataStorageSQLFamily$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="close"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-close'><code>shiny.telemetry::DataStorage$close()</code></a></span></li>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="initialize"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-initialize'><code>shiny.telemetry::DataStorage$initialize()</code></a></span></li>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="insert"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-insert'><code>shiny.telemetry::DataStorage$insert()</code></a></span></li>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="read_event_data"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-read_event_data'><code>shiny.telemetry::DataStorage$read_event_data()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-DataStorageSQLFamily-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStorageSQLFamily$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='DataStorageSQLite'>Data storage class with SQLite provider</h2><span id='topic+DataStorageSQLite'></span>

<h3>Description</h3>

<p>Implementation of the <code><a href="#topic+DataStorage">DataStorage</a></code> R6 class to SQLite backend using a unified
API for read/write operations
</p>


<h3>Super classes</h3>

<p><code><a href="#topic+DataStorage">shiny.telemetry::DataStorage</a></code> -&gt; <code><a href="#topic+DataStorageSQLFamily">shiny.telemetry::DataStorageSQLFamily</a></code> -&gt; <code>DataStorageSQLite</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DataStorageSQLite-new"><code>DataStorageSQLite$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DataStorageSQLite-clone"><code>DataStorageSQLite$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="close"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-close'><code>shiny.telemetry::DataStorage$close()</code></a></span></li>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="insert"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-insert'><code>shiny.telemetry::DataStorage$insert()</code></a></span></li>
<li><span class="pkg-link" data-pkg="shiny.telemetry" data-topic="DataStorage" data-id="read_event_data"><a href='../../shiny.telemetry/html/DataStorage.html#method-DataStorage-read_event_data'><code>shiny.telemetry::DataStorage$read_event_data()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-DataStorageSQLite-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize the data storage class
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStorageSQLite$new(db_path = "user_stats.sqlite")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>db_path</code></dt><dd><p>string with path to <code>SQLite</code> file.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-DataStorageSQLite-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataStorageSQLite$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>db_path &lt;- tempfile(fileext = ".sqlite")
data_storage &lt;- DataStorageSQLite$new(db_path = db_path)

data_storage$insert("example", "test_event", "session1")
data_storage$insert("example", "input", "s1", list(id = "id1"))
data_storage$insert("example", "input", "s1", list(id = "id2", value = 32))

data_storage$insert(
  "example", "test_event_3_days_ago", "session1",
  time = lubridate::as_datetime(lubridate::today() - 3)
)

data_storage$read_event_data()
data_storage$read_event_data(Sys.Date() - 1, Sys.Date() + 1)

file.remove(db_path)
</code></pre>

<hr>
<h2 id='date_from_null'>Common date_from to recognize as NULL</h2><span id='topic+date_from_null'></span>

<h3>Description</h3>

<p>Common date_from to recognize as NULL
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_from_null
</code></pre>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 1.
</p>

<hr>
<h2 id='date_to_null'>Common date_to to recognize as NULL</h2><span id='topic+date_to_null'></span>

<h3>Description</h3>

<p>Common date_to to recognize as NULL
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_to_null
</code></pre>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 1.
</p>

<hr>
<h2 id='prepare_admin_panel_components'>prepare_admin_panel_components</h2><span id='topic+prepare_admin_panel_components'></span>

<h3>Description</h3>

<p>prepare_admin_panel_components
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prepare_admin_panel_components(input, output, session, data_storage)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prepare_admin_panel_components_+3A_input">input</code></td>
<td>
<p>input object inherited from server function.</p>
</td></tr>
<tr><td><code id="prepare_admin_panel_components_+3A_output">output</code></td>
<td>
<p>output object inherited from server function.</p>
</td></tr>
<tr><td><code id="prepare_admin_panel_components_+3A_session">session</code></td>
<td>
<p>session object inherited from server function.</p>
</td></tr>
<tr><td><code id="prepare_admin_panel_components_+3A_data_storage">data_storage</code></td>
<td>
<p>data_storage instance that will handle all backend read
and writes.</p>
</td></tr>
</table>

<hr>
<h2 id='Telemetry'>Telemetry class to manage analytics gathering at a global level</h2><span id='topic+Telemetry'></span>

<h3>Description</h3>

<p>An instance of this class will define metadata and data storage provider
for gathering telemetry analytics of a Shiny dashboard.
</p>
<p>The <code>name</code> and <code>version</code> parameters will describe the dashboard name and
version to track using analytics, allowing to store the analytics data from
multiple dashboards in the same data storage provider. As well as
discriminate different versions of the dashboard.
</p>
<p>The default data storage provider uses a local SQLite database, but this
can be customizable when instantiating the class, by using another one of
the supported providers (see <code><a href="#topic+DataStorage">DataStorage</a></code>).
</p>


<h3>Debugging</h3>

<p>Events are logged at the <code>DEBUG</code> level using the <code>logger</code> package.
To see the logs, you can set:
</p>
<div class="sourceCode r"><pre>logger::log_threshold("DEBUG", namespace = "shiny.telemetry")
</pre></div>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>data_storage</code></dt><dd><p>instance of a class that inherits from
<code><a href="#topic+DataStorage">DataStorage</a></code>. See the documentation on that class for more information.</p>
</dd>
<dt><code>app_name</code></dt><dd><p>string with name of dashboard</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-Telemetry-new"><code>Telemetry$new()</code></a>
</p>
</li>
<li> <p><a href="#method-Telemetry-start_session"><code>Telemetry$start_session()</code></a>
</p>
</li>
<li> <p><a href="#method-Telemetry-log_navigation"><code>Telemetry$log_navigation()</code></a>
</p>
</li>
<li> <p><a href="#method-Telemetry-log_navigation_manual"><code>Telemetry$log_navigation_manual()</code></a>
</p>
</li>
<li> <p><a href="#method-Telemetry-log_login"><code>Telemetry$log_login()</code></a>
</p>
</li>
<li> <p><a href="#method-Telemetry-log_logout"><code>Telemetry$log_logout()</code></a>
</p>
</li>
<li> <p><a href="#method-Telemetry-log_click"><code>Telemetry$log_click()</code></a>
</p>
</li>
<li> <p><a href="#method-Telemetry-log_browser_version"><code>Telemetry$log_browser_version()</code></a>
</p>
</li>
<li> <p><a href="#method-Telemetry-log_button"><code>Telemetry$log_button()</code></a>
</p>
</li>
<li> <p><a href="#method-Telemetry-log_all_inputs"><code>Telemetry$log_all_inputs()</code></a>
</p>
</li>
<li> <p><a href="#method-Telemetry-log_input"><code>Telemetry$log_input()</code></a>
</p>
</li>
<li> <p><a href="#method-Telemetry-log_input_manual"><code>Telemetry$log_input_manual()</code></a>
</p>
</li>
<li> <p><a href="#method-Telemetry-log_custom_event"><code>Telemetry$log_custom_event()</code></a>
</p>
</li>
<li> <p><a href="#method-Telemetry-log_error"><code>Telemetry$log_error()</code></a>
</p>
</li>
<li> <p><a href="#method-Telemetry-log_errors"><code>Telemetry$log_errors()</code></a>
</p>
</li>
<li> <p><a href="#method-Telemetry-clone"><code>Telemetry$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-Telemetry-new"></a>



<h4>Method <code>new()</code></h4>

<p>Constructor that initializes Telemetry instance with parameters.
</p>


<h5>Usage</h5>

<div class="r"><pre>Telemetry$new(
  app_name = "(dashboard)",
  data_storage = DataStorageSQLite$new(db_path = file.path("telemetry.sqlite"))
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>app_name</code></dt><dd><p>(optional) string that identifies the name of the dashboard.
By default it will store data with <code>(dashboard)</code>.</p>
</dd>
<dt><code>data_storage</code></dt><dd><p>(optional) <code>DataStorage</code> instance where telemetry
data is being stored.
It can take any of data storage providers by this package,
By default it will store in a SQLite local database in the current
working directory with filename <code>telemetry.sqlite</code></p>
</dd>
<dt><code>version</code></dt><dd><p>(optional) string that identifies the version of the
dashboard. By default it will use <code>v0.0.0</code>.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-Telemetry-start_session"></a>



<h4>Method <code>start_session()</code></h4>

<p>Setup basic telemetry
</p>


<h5>Usage</h5>

<div class="r"><pre>Telemetry$start_session(
  track_inputs = TRUE,
  track_values = FALSE,
  login = TRUE,
  logout = TRUE,
  browser_version = TRUE,
  navigation_input_id = NULL,
  session = shiny::getDefaultReactiveDomain(),
  username = NULL,
  track_anonymous_user = TRUE,
  track_errors = TRUE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>track_inputs</code></dt><dd><p>flag that indicates if the basic telemetry should
track the inputs that change value. <code>TRUE</code> by default</p>
</dd>
<dt><code>track_values</code></dt><dd><p>flag that indicates if the basic telemetry should
track the values of the inputs that are changing. <code>FALSE</code> by default.
This parameter is ignored if <code>track_inputs</code> is <code>FALSE</code></p>
</dd>
<dt><code>login</code></dt><dd><p>flag that indicates if the basic telemetry should
track when a session starts. <code>TRUE</code> by default.</p>
</dd>
<dt><code>logout</code></dt><dd><p>flag that indicates if the basic telemetry should
track when the session ends. <code>TRUE</code> by default.</p>
</dd>
<dt><code>browser_version</code></dt><dd><p>flag that indicates that the browser version
should be tracked.<code>TRUE</code> by default.</p>
</dd>
<dt><code>navigation_input_id</code></dt><dd><p>string or vector of strings that represent
input ids and which value should be tracked as navigation events. i.e.
a change in the value represent a navigation to a page or tab.
By default, no navigation is tracked.</p>
</dd>
<dt><code>session</code></dt><dd><p><code>ShinySession</code> object or NULL to identify the current
Shiny session.</p>
</dd>
<dt><code>username</code></dt><dd><p>Character with username. If set, it will overwrite username
from session object.</p>
</dd>
<dt><code>track_anonymous_user</code></dt><dd><p>flag that indicates to track anonymous user.
A cookie is used to track same user without login over multiple sessions,
This is only activated if none of the automatic methods produce a username
and when a username is not explicitly defined.<code>TRUE</code> by default.</p>
</dd>
<dt><code>track_errors</code></dt><dd><p>flag that indicates if the basic telemetry should
track the errors. <code>TRUE</code> by default. if using shiny version &lt; <code style="white-space: pre;">&#8288;1.8.1&#8288;</code>,
it can auto log errors only in UI output functions.
By using latest versions of shiny, it can auto log all types of errors.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Nothing. This method is called for side effects.
</p>


<hr>
<a id="method-Telemetry-log_navigation"></a>



<h4>Method <code>log_navigation()</code></h4>

<p>Log an input change as a navigation event
</p>


<h5>Usage</h5>

<div class="r"><pre>Telemetry$log_navigation(input_id, session = shiny::getDefaultReactiveDomain())</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>input_id</code></dt><dd><p>string that identifies the generic input in the Shiny
application so that the function can track and log changes to it.</p>
</dd>
<dt><code>session</code></dt><dd><p><code>ShinySession</code> object or NULL to identify the current
Shiny session.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Nothing. This method is called for side effects.
</p>


<hr>
<a id="method-Telemetry-log_navigation_manual"></a>



<h4>Method <code>log_navigation_manual()</code></h4>

<p>Log a navigation event manually by indicating the id (as input id)
</p>


<h5>Usage</h5>

<div class="r"><pre>Telemetry$log_navigation_manual(
  navigation_id,
  value,
  session = shiny::getDefaultReactiveDomain()
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>navigation_id</code></dt><dd><p>string that identifies navigation event.</p>
</dd>
<dt><code>value</code></dt><dd><p>string that indicates a value for the navigation</p>
</dd>
<dt><code>session</code></dt><dd><p><code>ShinySession</code> object or NULL to identify the current
Shiny session.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Nothing. This method is called for side effects.
</p>


<hr>
<a id="method-Telemetry-log_login"></a>



<h4>Method <code>log_login()</code></h4>

<p>Log when session starts
</p>


<h5>Usage</h5>

<div class="r"><pre>Telemetry$log_login(
  username = NULL,
  session = shiny::getDefaultReactiveDomain()
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>username</code></dt><dd><p>string with username from current session</p>
</dd>
<dt><code>session</code></dt><dd><p><code>ShinySession</code> object or NULL to identify the current
Shiny session.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Nothing. This method is called for side effects.
</p>


<hr>
<a id="method-Telemetry-log_logout"></a>



<h4>Method <code>log_logout()</code></h4>

<p>Log when session ends
</p>


<h5>Usage</h5>

<div class="r"><pre>Telemetry$log_logout(
  username = NULL,
  session = shiny::getDefaultReactiveDomain()
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>username</code></dt><dd><p>string with username from current session</p>
</dd>
<dt><code>session</code></dt><dd><p><code>ShinySession</code> object or NULL to identify the current
Shiny session.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Nothing. This method is called for side effects.
</p>


<hr>
<a id="method-Telemetry-log_click"></a>



<h4>Method <code>log_click()</code></h4>

<p>Log an action click
</p>


<h5>Usage</h5>

<div class="r"><pre>Telemetry$log_click(id, session = shiny::getDefaultReactiveDomain())</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>string that identifies a manual click to the dashboard.</p>
</dd>
<dt><code>session</code></dt><dd><p><code>ShinySession</code> object or NULL to identify the current
Shiny session.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Nothing. This method is called for side effects.
</p>


<hr>
<a id="method-Telemetry-log_browser_version"></a>



<h4>Method <code>log_browser_version()</code></h4>

<p>Log the browser version
</p>


<h5>Usage</h5>

<div class="r"><pre>Telemetry$log_browser_version(session = shiny::getDefaultReactiveDomain())</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>session</code></dt><dd><p><code>ShinySession</code> object or NULL to identify the current
Shiny session.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Nothing. This method is called for side effects.
</p>


<hr>
<a id="method-Telemetry-log_button"></a>



<h4>Method <code>log_button()</code></h4>

<p>Track a button and track changes to this input (without storing the
values)
</p>


<h5>Usage</h5>

<div class="r"><pre>Telemetry$log_button(
  input_id,
  track_value = FALSE,
  session = shiny::getDefaultReactiveDomain()
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>input_id</code></dt><dd><p>string that identifies the button in the Shiny
application so that the function can track and log changes to it.</p>
</dd>
<dt><code>track_value</code></dt><dd><p>flag that indicates if the basic telemetry should
track the value of the input that are changing. <code>FALSE</code> by default.</p>
</dd>
<dt><code>session</code></dt><dd><p><code>ShinySession</code> object or NULL to identify the current
Shiny session.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Nothing. This method is called for side effects.
</p>


<hr>
<a id="method-Telemetry-log_all_inputs"></a>



<h4>Method <code>log_all_inputs()</code></h4>

<p>Automatic tracking of all input changes in the App. Depending on the
parameters, it may only track a subset of inputs by excluding patterns
or by including specific vector of <code>input_ids</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>Telemetry$log_all_inputs(
  track_values = FALSE,
  excluded_inputs = c("browser_version"),
  excluded_inputs_regex = NULL,
  include_input_ids = NULL,
  session = shiny::getDefaultReactiveDomain()
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>track_values</code></dt><dd><p>flag that indicates if the basic telemetry should
track the values of the inputs that are changing. <code>FALSE</code> by default.
This parameter is ignored if <code>track_inputs</code> is <code>FALSE</code>.</p>
</dd>
<dt><code>excluded_inputs</code></dt><dd><p>vector of input_ids that should not be tracked.
By default it doesn't track browser version, which is added by this
package.</p>
</dd>
<dt><code>excluded_inputs_regex</code></dt><dd><p>vector of input_ids that should not be
tracked. All Special characters will be escaped.</p>
</dd>
<dt><code>include_input_ids</code></dt><dd><p>vector of input_ids that will be tracked.
This input_ids should be an exact match and will be given priority
over exclude list.</p>
</dd>
<dt><code>session</code></dt><dd><p><code>ShinySession</code> object or NULL to identify the current
Shiny session.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Nothing. This method is called for side effects.
</p>


<hr>
<a id="method-Telemetry-log_input"></a>



<h4>Method <code>log_input()</code></h4>

<p>Track changes of a specific input id.
</p>


<h5>Usage</h5>

<div class="r"><pre>Telemetry$log_input(
  input_id,
  track_value = FALSE,
  matching_values = NULL,
  input_type = "text",
  session = shiny::getDefaultReactiveDomain()
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>input_id</code></dt><dd><p>string (or vector of strings) that identifies the
generic input in the Shiny application so that the function can track and
log changes to it.
</p>
<p>When the <code>input_id</code> is a vector of strings, the function will behave just
as calling <code>log_input</code> one by one with the same arguments.</p>
</dd>
<dt><code>track_value</code></dt><dd><p>flag that indicates if the basic telemetry should
track the value of the input that are changing. <code>FALSE</code> by default.</p>
</dd>
<dt><code>matching_values</code></dt><dd><p>An object specified possible values to register.</p>
</dd>
<dt><code>input_type</code></dt><dd><p><code>"text"</code> to registered bare input value, <code>"json"</code> to parse
value from <code>JSON</code> format.</p>
</dd>
<dt><code>session</code></dt><dd><p><code>ShinySession</code> object or NULL to identify the current
Shiny session.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Nothing. This method is called for its side effects.
</p>


<hr>
<a id="method-Telemetry-log_input_manual"></a>



<h4>Method <code>log_input_manual()</code></h4>

<p>Log a manual input value.
</p>
<p>This can be called in telemetry and is also used as a layer between
log_input family of functions and actual log event.
It creates the correct payload to log the event internally.
</p>


<h5>Usage</h5>

<div class="r"><pre>Telemetry$log_input_manual(
  input_id,
  value = NULL,
  session = shiny::getDefaultReactiveDomain()
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>input_id</code></dt><dd><p>string that identifies the generic input in the Shiny
application so that the function can track and log changes to it.</p>
</dd>
<dt><code>value</code></dt><dd><p>(optional) scalar value or list with the value to register.</p>
</dd>
<dt><code>session</code></dt><dd><p><code>ShinySession</code> object or NULL to identify the current
Shiny session.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Nothing. This method is called for side effects.
</p>


<hr>
<a id="method-Telemetry-log_custom_event"></a>



<h4>Method <code>log_custom_event()</code></h4>

<p>Log a manual event
</p>


<h5>Usage</h5>

<div class="r"><pre>Telemetry$log_custom_event(
  event_type,
  details = NULL,
  session = shiny::getDefaultReactiveDomain()
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>event_type</code></dt><dd><p>string that identifies the event type</p>
</dd>
<dt><code>details</code></dt><dd><p>(optional) scalar value or list with the value to register.</p>
</dd>
<dt><code>session</code></dt><dd><p><code>ShinySession</code> object or NULL to identify the current
Shiny session.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Nothing. This method is called for side effects.
</p>


<hr>
<a id="method-Telemetry-log_error"></a>



<h4>Method <code>log_error()</code></h4>

<p>Log a manual error event
</p>


<h5>Usage</h5>

<div class="r"><pre>Telemetry$log_error(
  output_id,
  message,
  session = shiny::getDefaultReactiveDomain()
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>output_id</code></dt><dd><p>string that refers to the output element where the error occurred.</p>
</dd>
<dt><code>message</code></dt><dd><p>string that describes the error.</p>
</dd>
<dt><code>session</code></dt><dd><p><code>ShinySession</code> object or NULL to identify the current Shiny session.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Nothing. This method is called for side effects.
</p>


<hr>
<a id="method-Telemetry-log_errors"></a>



<h4>Method <code>log_errors()</code></h4>

<p>Track errors as they occur in observe and reactive
</p>


<h5>Usage</h5>

<div class="r"><pre>Telemetry$log_errors(session = shiny::getDefaultReactiveDomain())</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>session</code></dt><dd><p><code>ShinySession</code> object or NULL to identify the current Shiny session.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Nothing. This method is called for side effects.
</p>


<hr>
<a id="method-Telemetry-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Telemetry$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>See Also</h3>

<p><code><a href="#topic+DataStorage">DataStorage</a></code> which this function wraps.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>log_file_path &lt;- tempfile(fileext = ".txt")
telemetry &lt;- Telemetry$new(
  data_storage = DataStorageLogFile$new(log_file_path = log_file_path)
) # 1. Initialize telemetry with default options

#
# Use in a shiny application

if (interactive()) {
  library(shiny)

  shinyApp(
    ui = fluidPage(
      use_telemetry(), # 2. Add necessary javascript to Shiny
      numericInput("n", "n", 1),
      plotOutput('plot')
    ),
    server = function(input, output) {
      telemetry$start_session() # 3. Minimal setup to track events
      output$plot &lt;- renderPlot({ hist(runif(input$n)) })
    }
  )
}

#
# Manual logging of Telemetry that can be used inside Shiny Application
# to further customize the events to be tracked.

session &lt;- shiny::MockShinySession$new() # Create dummy session (only for example purposes)
class(session) &lt;- c(class(session), "ShinySession")

telemetry$log_click("a_button", session = session)

telemetry$log_error("global", message = "An error has occured")

telemetry$log_custom_event("a_button", list(value = 2023), session = session)
telemetry$log_custom_event("a_button", list(custom_field = 23), session = session)

# Manual call login with custom username
telemetry$log_login("ben", session = session)

# Read all data
telemetry$data_storage$read_event_data()

file.remove(log_file_path)

#
# Using SQLite

db_path &lt;- tempfile(fileext = ".sqlite")
telemetry_sqlite &lt;- Telemetry$new(
  data_storage = DataStorageSQLite$new(db_path = db_path)
)

telemetry_sqlite$log_custom_event("a_button", list(value = 2023), session = session)
telemetry_sqlite$log_custom_event("a_button", list(custom_field = 23), session = session)

# Read all data from time range
telemetry_sqlite$data_storage$read_event_data("2020-01-01", "2055-01-01")

file.remove(db_path)

</code></pre>

<hr>
<h2 id='use_telemetry'>Function that adds telemetry HTML elements to UI</h2><span id='topic+use_telemetry'></span>

<h3>Description</h3>

<p>Function that adds telemetry HTML elements to UI
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_telemetry(id = "")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="use_telemetry_+3A_id">id</code></td>
<td>
<p>(optional) string with id representing the namespace</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>shiny.tag</code> object to be included in the UI of a Shiny app.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
