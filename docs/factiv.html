<!DOCTYPE html><html lang="en"><head><title>Help for package factiv</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {factiv}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#compliance_profile'><p>Complier covariate profiles</p></a></li>
<li><a href='#iv_factorial'><p>IV Estimation of 2^K Factorial Design</p></a></li>
<li><a href='#iv_finite_factorial'><p>Finite-Sample IV Estimation of 2^K Factorial Design</p></a></li>
<li><a href='#newhaven'><p>New Haven Voter Modelization Field Experiment</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#tidy.iv_factorial'><p>Tidy an iv_factorial object</p></a></li>
<li><a href='#tidy.iv_finite_factorial'><p>Tidy an iv_finite_factorial object</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Instrumental Variables Estimation for 2^k Factorial Experiments</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Implements instrumental variable estimators for 2^K factorial experiments with noncompliance.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, generics, Formula</td>
</tr>
<tr>
<td>Suggests:</td>
<td>tibble, dplyr, rmarkdown, knitr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/mattblackwell/factiv">https://github.com/mattblackwell/factiv</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/mattblackwell/factiv/issues">https://github.com/mattblackwell/factiv/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-05-20 01:16:30 UTC; mblackwell</td>
</tr>
<tr>
<td>Author:</td>
<td>Matthew Blackwell <a href="https://orcid.org/0000-0002-3689-9527"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Nicole Pashley [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Matthew Blackwell &lt;mblackwell@gov.harvard.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-05-21 08:00:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='compliance_profile'>Complier covariate profiles</h2><span id='topic+compliance_profile'></span>

<h3>Description</h3>

<p>Calculates averages of covariates by compliance group in a
2^K factorial setting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compliance_profile(formula, data, subset)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compliance_profile_+3A_formula">formula</code></td>
<td>
<p>one-sided formula to indicate the treatment
assignment, treatment uptake, and covariates. The right-hand
side of the formula should have three components separated by
the <code>|</code> symbol, with the first component containing the K binary
treatment variables (treatment assignment), the second component
containing the K binary instruments associated with each
treatment variable (treatment uptake), and the third giving the
covariates to be included in the profile. The order of the
variables in the first two parts of the formula must match.</p>
</td></tr>
<tr><td><code id="compliance_profile_+3A_data">data</code></td>
<td>
<p>a data.frame on which to apply the <code>formula</code>.</p>
</td></tr>
<tr><td><code id="compliance_profile_+3A_subset">subset</code></td>
<td>
<p>subset of the data to pass to estimation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with two objects:
</p>
<table role = "presentation">
<tr><td><code>raw_table</code></td>
<td>
<p>a data.frame whose rows represent the covariates and
whose columns represent the different compliance groups. Each
entry is the estimated mean of the covariate for that compliance
group. </p>
</td></tr>
<tr><td><code>std_table</code></td>
<td>
<p>a data.frame similarly structured to raw_table
but with the standardized difference between the compilance group
means and the overall means in place of the raw means.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Matthew Blackwell
</p>


<h3>References</h3>

<p>Matthew Blackwell and Nicole Pashley (2021) &quot;Noncompliance in
Factorial Experiments.&quot; Working paper.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(newhaven)

cov_prof &lt;- compliance_profile(~ inperson + phone | inperson_rand
  + phone_rand | age + maj_party + turnout_96, data = newhaven)

cov_prof
</code></pre>

<hr>
<h2 id='iv_factorial'>IV Estimation of 2^K Factorial Design</h2><span id='topic+iv_factorial'></span>

<h3>Description</h3>

<p>Estimates principal stratum-specific effects and interactions in a
2^K factorial experiment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>iv_factorial(formula, data, subset, method = "lm", level = 0.95)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iv_factorial_+3A_formula">formula</code></td>
<td>
<p>formula specification of the factorial design with
noncompliance. The right-hand side of the formula should have
two components separated by the <code>|</code> symbol, with the first
component containing the K binary treatment variables and the
second component containing the K binary instruments associated
with each treatment variable. The order of the variables in the
formula must match.</p>
</td></tr>
<tr><td><code id="iv_factorial_+3A_data">data</code></td>
<td>
<p>A data.frame on which to apply the <code>formula</code>.</p>
</td></tr>
<tr><td><code id="iv_factorial_+3A_subset">subset</code></td>
<td>
<p>subset of the data to pass to estimation.</p>
</td></tr>
<tr><td><code id="iv_factorial_+3A_method">method</code></td>
<td>
<p>character indiciating if the estimator should be
<code>"lm"</code> using the least squares approach (default) or
<code>"cmd"</code> to estimate via efficent minimum distance estimator.</p>
</td></tr>
<tr><td><code id="iv_factorial_+3A_level">level</code></td>
<td>
<p>the confidence level required.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function estimates treatment effects for 2^K factorial
experiments in the face of noncompliance on all factors. A
monotonicity assumption is assumed for both treatment-instrument
pairs, along with treatment exclusion. See Blackwell (2017) for
more details on those assumptions.
</p>
<p>The procedure uses iterative generalized method of moments (GMM)
to  estimate both the proportions of each compliance class (also
known as principal strata) and the average potential outcomes
within those classes. It also provides estimates of several
one-way, joint, and interactive treatment effects within these
classes.
</p>
<p>Under the above assumptions, the compliance classes are the
product of the compliance classes for each treatment-instrument
pair. For instance, <code>"cc"</code> is the class that would comply
with both treatments, <code>"ca"</code> is the class that would comply
with the first treatment and always take the second treatment, and
<code>"cn"</code> is the class that would comply with the first
treatment and never take the second treatment. Finally, note that
treatment effects are only well-defined for compliance classes for
which there is compliance on at least one treatment.
</p>


<h3>Value</h3>

<p>A list of class <code>iv_factorial</code> that contains the following
components:
</p>
<table role = "presentation">
<tr><td><code>rho</code></td>
<td>
<p>vector of estimated compliance class
probabilities.</p>
</td></tr>
<tr><td><code>psi</code></td>
<td>
<p>vector of the estimated conditional mean of the outcome
within the compliance classes.</p>
</td></tr>
<tr><td><code>vcov</code></td>
<td>
<p>estimated asymptotic variance matrix of the combined
<code>rho</code>  and <code>psi</code> parameters.</p>
</td></tr>
<tr><td><code>pcafe_est</code></td>
<td>
<p>vector of estimated main effects of each factor among
perfect compliers.</p>
</td></tr>
<tr><td><code>pcafe_se</code></td>
<td>
<p>vector of estimated standard errors for the
estimated effects in <code>tau</code>.</p>
</td></tr>
<tr><td><code>pcafe_cis</code></td>
<td>
<p>a matrix of confidence intervals for the PCAFE
estimates.</p>
</td></tr>
<tr><td><code>level</code></td>
<td>
<p>the confidence level of the returned confience
intervals.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Matt Blackwell
</p>


<h3>References</h3>

<p>Matthew Blackwell (2017) Instrumental Variable Methods
for Conditional Effects and Causal Interaction in Voter
Mobilization Experiments, Journal of the American Statistical
Association, 112:518, 590-599,
doi: <a href="https://doi.org/10.1080/01621459.2016.1246363">10.1080/01621459.2016.1246363</a>
</p>
<p>Matthew Blackwell and Nicole Pashley (2020) &quot;Noncompliance in
Factorial Experiments.&quot; Working paper.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(newhaven)

out &lt;- iv_factorial(turnout_98 ~ inperson + phone | inperson_rand
  + phone_rand, data = newhaven)

summary(out)

</code></pre>

<hr>
<h2 id='iv_finite_factorial'>Finite-Sample IV Estimation of 2^K Factorial Design</h2><span id='topic+iv_finite_factorial'></span>

<h3>Description</h3>

<p>Estimate main effect IV ratios for 2^K factorial experiments
</p>


<h3>Usage</h3>

<pre><code class='language-R'>iv_finite_factorial(formula, data, subset, level = 0.95)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iv_finite_factorial_+3A_formula">formula</code></td>
<td>
<p>formula specification of the factorial design with
noncompliance. The right-hand side of the formula should have
two components separated by the <code>|</code> symbol, with the first
component containing the K binary treatment variables and the
second component containing the K binary instruments associated
with each treatment variable. The order of the variables in the
formula must match.</p>
</td></tr>
<tr><td><code id="iv_finite_factorial_+3A_data">data</code></td>
<td>
<p>a data.frame on which to apply the <code>formula</code>.</p>
</td></tr>
<tr><td><code id="iv_finite_factorial_+3A_subset">subset</code></td>
<td>
<p>subset of the data to pass to estimation.</p>
</td></tr>
<tr><td><code id="iv_finite_factorial_+3A_level">level</code></td>
<td>
<p>the confidence level required.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function estimates the ratio of the effect of treatment
assignment on the outcome to the effect of treatment assignment on
treatment uptake in 2^K factorial experiments. The approach uses
finite sample asymptotic inference to generate confidence
intervals.
</p>


<h3>Value</h3>

<p>A list of class <code>iv_finite_factorial</code> that contains the
following components:
</p>
<table role = "presentation">
<tr><td><code>tau</code></td>
<td>
<p>a vector of estimated effect ratios for each factor.</p>
</td></tr>
<tr><td><code>tau_cis</code></td>
<td>
<p>a matrix of confidence intervals for each effect
ratio. This matrix has 4 columns because it is possible to have
disjoint confidence intervals in this method.</p>
</td></tr>
<tr><td><code>tau_y</code></td>
<td>
<p>a vector of the estimated effects on the outcome.</p>
</td></tr>
<tr><td><code>v_tau_y</code></td>
<td>
<p>the estimated sample variances of the effects on
the outcome.</p>
</td></tr>
<tr><td><code>tau_d</code></td>
<td>
<p>a vector of the estimated effects on treatment
uptake.</p>
</td></tr>
<tr><td><code>v_tau_y</code></td>
<td>
<p>the estimated sample variances of the effects on
treatment uptake.</p>
</td></tr>
<tr><td><code>level</code></td>
<td>
<p>the confidence level of <code>tau_cis</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Matt Blackwell
</p>


<h3>References</h3>

<p>Matthew Blackwell and Nicole Pashley (2021) &quot;Noncompliance in
Factorial Experiments.&quot; Working paper.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(newhaven)

out &lt;- iv_finite_factorial(turnout_98 ~ inperson + phone | inperson_rand
  + phone_rand, data = newhaven)

out

joint &lt;- iv_finite_factorial(turnout_98 ~ inperson + phone |
  inperson_rand + phone_rand, data = newhaven)

joint

</code></pre>

<hr>
<h2 id='newhaven'>New Haven Voter Modelization Field Experiment</h2><span id='topic+newhaven'></span>

<h3>Description</h3>

<p>A data set that contains a subset of the voter mobilzation field
experiment analyzed in Gerber and Green (2000).
</p>


<h3>Format</h3>

<p>A data frame with 7865 observations and 6 variables:
</p>

<dl>
<dt>ward</dt><dd><p>ward of the residence.</p>
</dd>
<dt>turnout_98</dt><dd><p>indicator variable for voting in the 1998
general election.</p>
</dd>
<dt>inperson</dt><dd><p>indicator variable for if the respondent received
in-person canvassing.</p>
</dd>
<dt>phone</dt><dd><p>indicator variable for if the respondent received
phone canvassing.</p>
</dd>
<dt>inperson_rand</dt><dd><p>indicator variable for if the respondent was
randomized to receive in-person canvassing.</p>
</dd>
<dt>phone_rand</dt><dd><p>indicator variable for if the respondent was
randomized to receive phone canvassing.</p>
</dd>
<dt>age</dt><dd><p>respondent age.</p>
</dd>
<dt>maj_party</dt><dd><p>indicator variable for if the respondent is a
registered Democrat or Republican.</p>
</dd>
<dt>turnout_96</dt><dd><p>indicator variable for whether or not the
respondent voted in the 1996 general election.</p>
</dd>
</dl>



<h3>Details</h3>

<p>Data was cleaned and used in Bowers and Hansen (2009). It was a 2x2
factorial design with noncompliance on both factors. This is the
subset of the subjects who lived in a single-person household and
were not randomized to receive get-out-the-vote mailers. Blackwell
(2017) analyzed the full data adjusting for noncompliance.
</p>


<h3>Source</h3>

<p>https://doi.org/10.7910/DVN/Q6CID7
</p>


<h3>References</h3>

<p>Gerber, Alan S., and Donald P. Green. “The Effects of
Canvassing, Telephone Calls, and Direct Mail on Voter Turnout: A
Field Experiment.” The American Political Science Review 94, no.
3 (2000): 653. https://doi.org/10.2307/2585837.
</p>
<p>Hansen, Ben B., and Jake Bowers. “Attributing Effects to a
Cluster-Randomized Get-Out-the-Vote Campaign.” Journal of the
American Statistical Association 104, no. 487 (2009):
873–85. https://doi.org/10.1198/jasa.2009.ap06589.
</p>
<p>Blackwell, Matthew. “Instrumental Variable Methods for Conditional
Effects and Causal Interaction in Voter Mobilization
Experiments.” Journal of the American Statistical Association
112, no. 518 (2017): 590–99.
https://doi.org/10.1080/01621459.2016.1246363.
</p>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+tidy'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>generics</dt><dd><p><code><a href="generics.html#topic+tidy">tidy</a></code></p>
</dd>
</dl>

<hr>
<h2 id='tidy.iv_factorial'>Tidy an iv_factorial object</h2><span id='topic+tidy.iv_factorial'></span>

<h3>Description</h3>

<p>Tidy summarizes information about the components of a model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'iv_factorial'
tidy(x, conf.int = FALSE, conf.level = 0.95, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidy.iv_factorial_+3A_x">x</code></td>
<td>
<p>An <code>iv_factorial</code> object produced by a call to <code><a href="#topic+iv_factorial">iv_factorial()</a></code></p>
</td></tr>
<tr><td><code id="tidy.iv_factorial_+3A_conf.int">conf.int</code></td>
<td>
<p>Logical indicating whether or not to include a
confidence interval in the tidied output. Defaults to <code>FALSE</code></p>
</td></tr>
<tr><td><code id="tidy.iv_factorial_+3A_conf.level">conf.level</code></td>
<td>
<p>The confidence level to use for the confidence
interval if <code>conf.int = TRUE</code>. Must be strictly greater than 0
and less than 1. Defaults to 0.95, which corresponds to a 95
percent confidence interval.</p>
</td></tr>
<tr><td><code id="tidy.iv_factorial_+3A_...">...</code></td>
<td>
<p>Additional arguments. Not used. Needed to match generic
signature only.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> with columns:
</p>
<table role = "presentation">
<tr><td><code>term</code></td>
<td>
<p>The name of the effect term.</p>
</td></tr>
<tr><td><code>estimand</code></td>
<td>
<p>Which complier effect being estimated.</p>
</td></tr>
<tr><td><code>estimate</code></td>
<td>
<p>The estimated value of the effect.</p>
</td></tr>
<tr><td><code>std.error</code></td>
<td>
<p>The estimated standard error of the effect.</p>
</td></tr>
<tr><td><code>conf.low</code></td>
<td>
<p>Lower bound of the confidence interval for the
estimate.</p>
</td></tr>
<tr><td><code>conf.high</code></td>
<td>
<p>Upper bound of the confidence interval for the
estimate.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Matt Blackwell
</p>

<hr>
<h2 id='tidy.iv_finite_factorial'>Tidy an iv_finite_factorial object</h2><span id='topic+tidy.iv_finite_factorial'></span>

<h3>Description</h3>

<p>Tidy summarizes information about the components of a model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'iv_finite_factorial'
tidy(x, conf.level = 0.95, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidy.iv_finite_factorial_+3A_x">x</code></td>
<td>
<p>An <code>iv_factorial</code> object produced by a call to
<code><a href="#topic+iv_finite_factorial">iv_finite_factorial()</a></code></p>
</td></tr>
<tr><td><code id="tidy.iv_finite_factorial_+3A_conf.level">conf.level</code></td>
<td>
<p>The confidence level to use for the confidence
interval. Must be strictly greater than 0 and less than 1.
Defaults to 0.95, which corresponds to a 95 percent confidence
interval.</p>
</td></tr>
<tr><td><code id="tidy.iv_finite_factorial_+3A_...">...</code></td>
<td>
<p>Additional arguments. Not used. Needed to match generic
signature only.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> with columns:
</p>
<table role = "presentation">
<tr><td><code>term</code></td>
<td>
<p>The name of the effect term.</p>
</td></tr>
<tr><td><code>estimand</code></td>
<td>
<p>Which complier effect being
estimated.</p>
</td></tr>
<tr><td><code>estimate</code></td>
<td>
<p>The estimated value of the effect.</p>
</td></tr>
<tr><td><code>ci_1_lower</code></td>
<td>
<p>Lower bound for the first interval of the
Fieller confidence regresion for the estimate.</p>
</td></tr>
<tr><td><code>ci_1_upper</code></td>
<td>
<p>Upper bound for the first interval of the
Fieller confidence regresion for tshe estimate.</p>
</td></tr>
<tr><td><code>ci_2_lower</code></td>
<td>
<p>Lower bound for the second interval of the
Fieller confidence regresion for the estimate. Only non-<code>NA</code>
when the confidence region is disjoint.</p>
</td></tr>
<tr><td><code>ci_2_upper</code></td>
<td>
<p>Upper
bound for the second interval of the Fieller confidence
regresion for the estimate. Only non-<code>NA</code> when the confidence
region is disjoint.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Matt Blackwell
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
