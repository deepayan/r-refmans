<!DOCTYPE html><html lang="en"><head><title>Help for package PupilPre</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {PupilPre}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#PupilPre'><p>PupilPre: Preprocessing Pupil Size Data.</p></a></li>
<li><a href='#apply_butter'><p>Applies a Butterworth filter to each event.</p></a></li>
<li><a href='#apply_cleanup_change'><p>Applies user-selected changes to auto cleanup</p></a></li>
<li><a href='#apply_user_cleanup'><p>Applies manual cleanup to the data</p></a></li>
<li><a href='#baseline'><p>Baseline correct the data</p></a></li>
<li><a href='#blink_summary'><p>Check blinks</p></a></li>
<li><a href='#butter_filter_app'><p>Plots the effect of Butterworth filtering by event.</p></a></li>
<li><a href='#check_baseline'><p>Check baseline window for missing data</p></a></li>
<li><a href='#clean_artifact'><p>Automatically clean artifacts.</p></a></li>
<li><a href='#clean_blink'><p>Automatically clean Eyelink marked blinks.</p></a></li>
<li><a href='#compare_summary'><p>A utility function to compare pupil size data before and after applying</p>
the cleanup</a></li>
<li><a href='#downsample'><p>Downsample the data</p></a></li>
<li><a href='#interpolate_NAs'><p>Interpolation for missing data.</p></a></li>
<li><a href='#NA_summary'><p>Check missing data</p></a></li>
<li><a href='#plot_compare_app'><p>Plots comparison of Pupil and Pupil_Previous by event.</p></a></li>
<li><a href='#plot_events'><p>Plot each event within a group to a directory</p></a></li>
<li><a href='#plot_summary_app'><p>Plots summary of subject or item.</p></a></li>
<li><a href='#ppl_check_eye_recording'><p>Check which eyes were recorded during the experiment</p></a></li>
<li><a href='#ppl_plot_avg'><p>Plots average Pupil.</p></a></li>
<li><a href='#ppl_plot_avg_cdiff'><p>Plots average difference between two conditions.</p></a></li>
<li><a href='#ppl_plot_avg_contour'><p>Plots average contour surface of pupil data.</p></a></li>
<li><a href='#ppl_prep_data'><p>Check the classes of specific columns and re-assigns as necessary.</p></a></li>
<li><a href='#ppl_rm_extra_DVcols'><p>Checks for and removes unnecessary DV output columns.</p></a></li>
<li><a href='#ppl_select_recorded_eye'><p>Select the eye used during recording</p></a></li>
<li><a href='#Pupildat'><p>This is a sample pupil size dataset included in the package</p></a></li>
<li><a href='#Pupilex1'><p>This is an example dataset to illustrate certain functionality</p></a></li>
<li><a href='#Pupilex2'><p>This is an example dataset to illustrate certain functionality</p></a></li>
<li><a href='#Pupilex3'><p>This is an example dataset to illustrate certain functionality</p></a></li>
<li><a href='#Pupilex4'><p>This is an example dataset to illustrate certain functionality</p></a></li>
<li><a href='#Pupilex5'><p>This is an example dataset to illustrate certain functionality</p></a></li>
<li><a href='#Pupilex6'><p>This is an example dataset to illustrate certain functionality</p></a></li>
<li><a href='#Pupilex7'><p>This is an example dataset to illustrate certain functionality</p></a></li>
<li><a href='#recode_off_screen'><p>Check for samples off-screen and marks as NA.</p></a></li>
<li><a href='#rm_sparse_events'><p>Removes events with excessive missing data</p></a></li>
<li><a href='#trim_filtered'><p>Trim the beginning and end of filtered events.</p></a></li>
<li><a href='#user_cleanup_app'><p>Interactive app for manually cleaning pupil data.</p></a></li>
<li><a href='#verify_cleanup_app'><p>Interactive app for verifying auto cleanup.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Preprocessing Pupil Size Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.6.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-03-08</td>
</tr>
<tr>
<td>Author:</td>
<td>Aki-Juhani Kyröläinen [aut, cre],
  Vincent Porretta [aut],
  Jacolien van Rij [ctb],
  Juhani Järvikivi [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Aki-Juhani Kyröläinen &lt;akkyro@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Pupillometric data collected using SR Research Eyelink eye trackers 
    requires significant preprocessing. This package contains functions for 
    preparing pupil dilation data for visualization and statistical analysis. 
    Specifically, it provides a pipeline of functions which aid in data validation,
    the removal of blinks/artifacts, downsampling, and baselining, among others. 
    Additionally, plotting functions for creating grand average and conditional 
    average plots are provided. See the vignette for samples of the functionality.
    The package is designed for handling data collected with SR Research 
    Eyelink eye trackers using Sample Reports created in SR Research Data 
    Viewer. </td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0), dplyr (&ge; 0.8.0), rlang (&ge; 0.1.1), VWPre (&ge;
1.2.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2 (&ge; 2.2.0), mgcv (&ge; 1.8-16), shiny (&ge; 0.14.2), tidyr
(&ge; 0.6.0), stats (&ge; 3.3.2), robustbase (&ge; 0.93-3), zoo (&ge;
1.8-4), signal (&ge; 0.7-6)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, gridExtra</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-03-10 00:09:48 UTC; vjp</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-03-10 05:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='PupilPre'>PupilPre: Preprocessing Pupil Size Data.</h2><span id='topic+PupilPre'></span><span id='topic+PupilPre-package'></span>

<h3>Description</h3>

<p>The PupilPre package provides a set of functions for preparing pupil size data
collected with SR Research Eyelink eye trackers.
</p>


<h3>Processing functions</h3>


<ul>
<li><p> The function <code><a href="#topic+ppl_prep_data">ppl_prep_data</a></code> returns a data table with
correctly assigned classes for important columns.
</p>
</li>
<li><p> The function <code><a href="#topic+ppl_select_recorded_eye">ppl_select_recorded_eye</a></code> returns a data table
with data from the the recorded eye in new columns (IA_ID and IA_LABEL).
</p>
</li>
<li><p> The function <code><a href="#topic+recode_off_screen">recode_off_screen</a></code> recodes samples with NA if
gaze coordinates indicate that the sample was taken while the pupil was
off-screen.
</p>
</li>
<li><p> The function <code><a href="#topic+ppl_rm_extra_DVcols">ppl_rm_extra_DVcols</a></code> removes DataViewer coumns
that are not necessary for preprocessing with this package.
</p>
</li>
<li><p> The function <code><a href="#topic+clean_blink">clean_blink</a></code> returns a data table
for which blinks have been removed based on the parameters provided.
</p>
</li>
<li><p> The function <code><a href="#topic+clean_artifact">clean_artifact</a></code> returns a data table
for which artifacts have been removed based on the parameters provided.
</p>
</li>
<li><p> The function <code><a href="#topic+apply_cleanup_change">apply_cleanup_change</a></code> applies user-selected
changes to the automatic cleanup.
</p>
</li>
<li><p> The function <code><a href="#topic+apply_user_cleanup">apply_user_cleanup</a></code> returns a data table
for which the manually selected artifacts have been removed.
</p>
</li>
<li><p> The function <code><a href="#topic+rm_sparse_events">rm_sparse_events</a></code> removes events
that do not contain enough data in the baseline and/or critical windows,
as specified by the user.
</p>
</li>
<li><p> The function <code><a href="#topic+interpolate_NAs">interpolate_NAs</a></code> returns a data table in which
NAs have been replaced using linear interpolation.
</p>
</li>
<li><p> The function <code><a href="#topic+apply_butter">apply_butter</a></code> applies a Butterworth
filter to the pupil size data.
</p>
</li>
<li><p> The function <code><a href="#topic+trim_filtered">trim_filtered</a></code> removes a specified number
of milliseconds from the beginning and the end of each filtered event, as
to remove artifacts created by the filter.
</p>
</li>
<li><p> The function <code><a href="#topic+downsample">downsample</a></code> returns a data table for which
the data have been downsampled using the specified sampling rate.
</p>
</li>
<li><p> The function <code><a href="#topic+baseline">baseline</a></code> returns a data table for which
the pupil data have been baselined using the specified method.
</p>
</li></ul>



<h3>Utility functions</h3>


<ul>
<li><p> The function <code><a href="#topic+ppl_check_eye_recording">ppl_check_eye_recording</a></code> returns a summary
of whether or not the dataset contains gaze data in both the Right and
Left interest area columns.
</p>
</li>
<li><p> The function <code><a href="#topic+blink_summary">blink_summary</a></code> returns a summary of
Eyelink marked blinks by Event, Subject, or Item.
</p>
</li>
<li><p> The function <code><a href="#topic+NA_summary">NA_summary</a></code> returns a summary of missing
data by Event, Subject, or Item.
</p>
</li>
<li><p> The function <code><a href="#topic+check_baseline">check_baseline</a></code> examines the data within
a specified baseline window.
</p>
</li>
<li><p> The function <code><a href="#topic+compare_summary">compare_summary</a></code> returns a summary of
comparison between the columns Pupil and Pupil_Previous.
</p>
</li></ul>



<h3>Plotting functions</h3>


<ul>
<li><p> The function <code><a href="#topic+ppl_plot_avg">ppl_plot_avg</a></code> returns a plot of the grand
or conditional averages of pupil dilation along with error bars.
</p>
</li>
<li><p> The function <code><a href="#topic+ppl_plot_avg_contour">ppl_plot_avg_contour</a></code> returns a contour plot of
the conditional average of pupil dilation over Time and a specified continuous variable.
</p>
</li>
<li><p> The function <code><a href="#topic+ppl_plot_avg_cdiff">ppl_plot_avg_cdiff</a></code> returns a plot of the
average difference between two conditions for pupil dilation with error bars.
</p>
</li>
<li><p> The function <code><a href="#topic+plot_events">plot_events</a></code> returns image files containing
plots for each event by a group and saves into a specified directory.
</p>
</li></ul>



<h3>Interactive functions</h3>


<ul>
<li><p> The function <code><a href="#topic+user_cleanup_app">user_cleanup_app</a></code> opens a Shiny app
for identifying and marking datapoints associated with artifacts.
</p>
</li>
<li><p> The function <code><a href="#topic+plot_summary_app">plot_summary_app</a></code> opens a Shiny app for
inspecting by-subject or by-item averages within a specified time window.
</p>
</li>
<li><p> The function <code><a href="#topic+plot_compare_app">plot_compare_app</a></code> opens a Shiny app for
inspecting events for comparing the current pupil column to the
previous pupil column.
</p>
</li>
<li><p> The function <code><a href="#topic+verify_cleanup_app">verify_cleanup_app</a></code> plots the data
points changed during the previously completed auto cleanup, allowing the
user to reject the cleanup for specific events.
</p>
</li>
<li><p> The function <code><a href="#topic+butter_filter_app">butter_filter_app</a></code> produces a plot of
filtered pupil data over the original data to visually inspect the effect
of different filter settings.
</p>
</li></ul>



<h3>Notes</h3>


<ul>
<li><p> The vignettes are available via <code>browseVignettes(package = "PupilPre")</code>.
</p>
</li>
<li><p> A list of all available functions is provided in
<code>help(package = "PupilPre")</code>.
</p>
</li>
<li><p> This package can be cited using the information obtained from
<code>citation("PupilPre") or print(citation("PupilPre"), bibtex = TRUE)</code>
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Aki-Juhani Kyröläinen, Vincent Porretta, Jacolien van Rij, Juhani Järvikivi
</p>
<p>Maintainer: Aki-Juhani Kyröläinen, (<a href="mailto:akkyro@gmail.com">akkyro@gmail.com</a>)
</p>
<p>McMaster University, Canada
</p>

<hr>
<h2 id='apply_butter'>Applies a Butterworth filter to each event.</h2><span id='topic+apply_butter'></span>

<h3>Description</h3>

<p><code>apply_butter</code> applies a Butterworth filter to the pupil
size data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apply_butter(data = data, n = NULL, W = NULL, type = NULL,
  plane = "z")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="apply_butter_+3A_data">data</code></td>
<td>
<p>A data table object.</p>
</td></tr>
<tr><td><code id="apply_butter_+3A_n">n</code></td>
<td>
<p>A number specifying the filter order (as described in
<a href="signal.html#topic+butter">butter</a>).</p>
</td></tr>
<tr><td><code id="apply_butter_+3A_w">W</code></td>
<td>
<p>The critical frequencies of the filter (as described in
<a href="signal.html#topic+butter">butter</a>). W must be a scalar for low-pass or high-pass filters.
W must be a two-element vector c(low, high) specifying the lower and upper
bands for stop-band or band-pass filters. For digital filters, W must be
between 0 and 1 where 1 is the Nyquist frequency.</p>
</td></tr>
<tr><td><code id="apply_butter_+3A_type">type</code></td>
<td>
<p>The filter type (as described in <a href="signal.html#topic+butter">butter</a>), one of
&quot;low&quot; for a low-pass filter, &quot;high&quot; for a high-pass filter, &quot;stop&quot; for a
stop-band (band-reject) filter, or &quot;pass&quot; for a pass-band filter.</p>
</td></tr>
<tr><td><code id="apply_butter_+3A_plane">plane</code></td>
<td>
<p>A character string (as described in <a href="signal.html#topic+butter">butter</a>), &quot;z&quot;
for a digital filter or &quot;s&quot; for an analog filter.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex5")

dat &lt;- apply_butter(Pupilex5, n = 1, W = 0.1,
                    type = "low", plane = "z")

# Please see the vignettes for detailed example usage.
vignette("PupilPre_Interpolation_and_Filtering", package="PupilPre")

</code></pre>

<hr>
<h2 id='apply_cleanup_change'>Applies user-selected changes to auto cleanup</h2><span id='topic+apply_cleanup_change'></span>

<h3>Description</h3>

<p><code>apply_cleanup_change</code> applies to each event the user-selected
changes to the automatic cleanup based on information stored in the RDS file
using <code>verify_cleanup_app</code> which was created using either
<code>blink_cleanup</code> or <code>artifact_cleanup</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apply_cleanup_change(data = data, LogFile = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="apply_cleanup_change_+3A_data">data</code></td>
<td>
<p>A data frame object created from <code>downsample</code>.</p>
</td></tr>
<tr><td><code id="apply_cleanup_change_+3A_logfile">LogFile</code></td>
<td>
<p>A character string indicating the name (and location) of the
log file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of type data table as described in <a href="tibble.html#topic+tibble">tibble</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {

# Load example data
data("Pupilex3")

# Ensure the log file exists by running cleanup
# Writing log file to temporary folder for the example
dat &lt;- clean_blink(Pupilex3, BlinkPadding = c(100, 100), Delta = 5,
                   MaxValueRun = 5, NAsAroundRun = c(2,2),
                   LogFile = paste0(tempdir(),"/BlinkCleanupLog.rds"))

# Read log file from temporary folder
verify_cleanup_app(dat, LogFile = paste0(tempdir(),"/BlinkCleanupLog.rds"))

# Make verification via the app interface

# Read log file from the temporary folder
dat &lt;- apply_user_cleanup(dat,
                          LogFile = paste0(tempdir(),"/BlinkCleanupLog.rds"))
}

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Cleanup", package="PupilPre")


</code></pre>

<hr>
<h2 id='apply_user_cleanup'>Applies manual cleanup to the data</h2><span id='topic+apply_user_cleanup'></span>

<h3>Description</h3>

<p><code>apply_user_cleanup</code> applies to each event the manual cleanup based on
data points stored in the RDS file created using <code>user_cleanup_app</code>. The
Identified datapoints will be changed to NA.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apply_user_cleanup(data = data, LogFile = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="apply_user_cleanup_+3A_data">data</code></td>
<td>
<p>A data frame object created from <code>downsample</code>.</p>
</td></tr>
<tr><td><code id="apply_user_cleanup_+3A_logfile">LogFile</code></td>
<td>
<p>A character string indicating the name (and location) of the
log file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of type data table as described in <a href="tibble.html#topic+tibble">tibble</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {

# Load example data
data("Pupilex4")

# Ensure log file exists by using the cleanup app
# Writing log file to temporary folder for the example
user_cleanup_app(Pupilex4, LogFile = paste0(tempdir(),"/UserCleanupLog.rds"))

# Make cleanup via the app interface

# Read log file from the temporary folder
dat &lt;- apply_user_cleanup(Pupilex4,
                          LogFile = paste0(tempdir(),"/UserCleanupLog.rds"))
}

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Cleanup", package="PupilPre")

</code></pre>

<hr>
<h2 id='baseline'>Baseline correct the data</h2><span id='topic+baseline'></span>

<h3>Description</h3>

<p><code>baseline</code> calculates the average pupil value for the window of Time
provided in BaselineWindow. The baseline value is then used in one of three
different calculation types that must be specified (Subtraction, Division,
or Normalization). Baselining is carried out separately for each event.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>baseline(data = data, BaselineWindow = 0, BaselineType = NULL,
  DiffBaseOverride = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="baseline_+3A_data">data</code></td>
<td>
<p>A data frame object created from <code>downsample</code>.</p>
</td></tr>
<tr><td><code id="baseline_+3A_baselinewindow">BaselineWindow</code></td>
<td>
<p>A numeric vector of length 1 or 2 specifying the time
points of the baseline window to be examined. Providing two values indicates
the start time and the end time of the baseline, respectively. Providing a single value
(i.e., time point) assumes that every preceding time point is part of the
baseline (N.B. trials may vary in the size of the baseline window and will
result in an error).</p>
</td></tr>
<tr><td><code id="baseline_+3A_baselinetype">BaselineType</code></td>
<td>
<p>A character string specifying Subtraction, Division, or
Normalization. Subtraction subtracts the average baseline value; Division
divides by the average baseline value; and Normalization subtracts and
divides by the average baseline value.</p>
</td></tr>
<tr><td><code id="baseline_+3A_diffbaseoverride">DiffBaseOverride</code></td>
<td>
<p>A logical value indicating whether or not to
override the error produced when baseline windows differ in size.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of type data table as described in <a href="tibble.html#topic+tibble">tibble</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex4")

dat &lt;- baseline(Pupilex4, BaselineWindow = c(-500, 0),
                BaselineType = "Subtraction")

# Please see the vignettes for detailed example usage.
vignette("PupilPre_Basic_Preprocessing", package="PupilPre")

</code></pre>

<hr>
<h2 id='blink_summary'>Check blinks</h2><span id='topic+blink_summary'></span>

<h3>Description</h3>

<p><code>blink_summary</code> summarizes Eyelink marked blinks by Event, Subject, or Item.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>blink_summary(data, Summary = "Event", ReturnData = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="blink_summary_+3A_data">data</code></td>
<td>
<p>A data table object output by <code><a href="VWPre.html#topic+create_time_series">create_time_series</a></code>.</p>
</td></tr>
<tr><td><code id="blink_summary_+3A_summary">Summary</code></td>
<td>
<p>A character string indicating the type of summary.</p>
</td></tr>
<tr><td><code id="blink_summary_+3A_returndata">ReturnData</code></td>
<td>
<p>A logical indicating whether to return a data table
containing Start Time information for each event.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Summary information
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex3")

blink_summary(Pupilex3, Summary = "Event")

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Basic_Preprocessing", package="PupilPre")

</code></pre>

<hr>
<h2 id='butter_filter_app'>Plots the effect of Butterworth filtering by event.</h2><span id='topic+butter_filter_app'></span>

<h3>Description</h3>

<p><code>butter_filter_app</code> produces a plot of Butterworth filtered pupil data over the
original data to visually inspect the effect of different filter settings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>butter_filter_app(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="butter_filter_app_+3A_data">data</code></td>
<td>
<p>A data table object.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
if (interactive()) {

# Load example data
data("Pupilex5")

butter_filter_app(Pupilex5)
}

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Interpolation_and_Filtering", package="PupilPre")

</code></pre>

<hr>
<h2 id='check_baseline'>Check baseline window for missing data</h2><span id='topic+check_baseline'></span>

<h3>Description</h3>

<p><code>check_baseline</code> examines the data in a specified baseline window.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_baseline(data = data, BaselineWindow = NULL,
  ReturnData = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_baseline_+3A_data">data</code></td>
<td>
<p>A data table object output by <code><a href="VWPre.html#topic+create_time_series">create_time_series</a></code>.</p>
</td></tr>
<tr><td><code id="check_baseline_+3A_baselinewindow">BaselineWindow</code></td>
<td>
<p>A numeric vector of length 1 or 2 specifying the time
points of the baseline window to be examined. Providing two values indicates
the start time and the end time of the baseline, respectively. Providing a single value
(i.e., time point) assumes that every preceding time point is part of the
baseline (N.B. trials may vary in the size of the baseline window and will
result in an error).</p>
</td></tr>
<tr><td><code id="check_baseline_+3A_returndata">ReturnData</code></td>
<td>
<p>A logical indicating whether to return a data table
containing information for each event.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Summary information
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex3")

check_baseline(Pupilex3, BaselineWindow = c(-500, 0))

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Basic_Preprocessing", package="PupilPre")

</code></pre>

<hr>
<h2 id='clean_artifact'>Automatically clean artifacts.</h2><span id='topic+clean_artifact'></span>

<h3>Description</h3>

<p><code>clean_artifact</code> performs two stage and distributional automated
clean-up of artifacts in the pupil and gaze coordinate data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_artifact(data = data, MADWindow = 100, MADConstant = 2,
  MADPadding = c(200, 200), MahaConstant = 2, Method = "Robust",
  XandY = TRUE, Second = TRUE, MaxValueRun = 5, NAsAroundRun = c(2,
  2), LogFile = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean_artifact_+3A_data">data</code></td>
<td>
<p>A data frame object created from <code>ppl_select_recorded_eye</code>.</p>
</td></tr>
<tr><td><code id="clean_artifact_+3A_madwindow">MADWindow</code></td>
<td>
<p>A numeric value specifying the window size (in msec) to use
for the MAD calculation.</p>
</td></tr>
<tr><td><code id="clean_artifact_+3A_madconstant">MADConstant</code></td>
<td>
<p>A numeric value specifying the constant (a multiplier for
the third quartile) when determining MAD outlier status.</p>
</td></tr>
<tr><td><code id="clean_artifact_+3A_madpadding">MADPadding</code></td>
<td>
<p>A numeric vector of length two containing values (in
msec) to pad the identified artifact creating a window within which to
operate the cleanup.</p>
</td></tr>
<tr><td><code id="clean_artifact_+3A_mahaconstant">MahaConstant</code></td>
<td>
<p>A numeric value specifying the constant (a multiplier
for the third quartile) when determining Mahalanobis outlier status.</p>
</td></tr>
<tr><td><code id="clean_artifact_+3A_method">Method</code></td>
<td>
<p>A character string (&quot;Basic&quot; or &quot;Robust&quot;) indicating
which method to use for the distance calculation. Basic is a standard
Mahalanobis distance calculation based on covariance. Robust is also a
Mahalanobis distance, however, it is based on Minimum Covariance
Determinant (Rousseeuw and van Driessen, 1999) with reweighted covariance
(Pison et al., 2002). For more details, see <code><a href="robustbase.html#topic+covMcd">covMcd</a></code>.</p>
</td></tr>
<tr><td><code id="clean_artifact_+3A_xandy">XandY</code></td>
<td>
<p>A logical value specifying whether to also use horizontal
velocity and acceleration in outlier detection.</p>
</td></tr>
<tr><td><code id="clean_artifact_+3A_second">Second</code></td>
<td>
<p>A logical value specifying whether secondary cleaning should
be applied.</p>
</td></tr>
<tr><td><code id="clean_artifact_+3A_maxvaluerun">MaxValueRun</code></td>
<td>
<p>A numeric value specifying the maximal run of existing
values flanked by NAs that could be targeted for removal.</p>
</td></tr>
<tr><td><code id="clean_artifact_+3A_nasaroundrun">NAsAroundRun</code></td>
<td>
<p>A numeric vector of length two containing values (in
number of subsequent NA) to be used to identify straggler runs of data
that could be removed.</p>
</td></tr>
<tr><td><code id="clean_artifact_+3A_logfile">LogFile</code></td>
<td>
<p>A character string indicating the file name (with extension)
of the log file to be created/written. The file keeps track of which events
have been cleaned. We suggest &quot;ArtifactCleanupLog.rds&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of type data table as described in <a href="tibble.html#topic+tibble">tibble</a>.
</p>


<h3>References</h3>

<p>Rousseeuw, P. J. and van Driessen, K. (1999) A fast algorithm
for the minimum covariance determinant estimator. Technometrics 41, 212–223.
</p>
<p>Pison, G., Van Aelst, S., and Willems, G. (2002) Small Sample
Corrections for LTS and MCD, Metrika 55, 111–123.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex4")

# Writing log file to temporary folder for the example
dat &lt;- clean_artifact(Pupilex4, MADWindow = 100, MADConstant = 2,
                      MADPadding = c(200, 200), MahaConstant = 2,
                      Method = "Robust", XandY = TRUE, Second = TRUE,
                      MaxValueRun = 5, NAsAroundRun = c(2,2),
                      LogFile = paste0(tempdir(),"/ArtifactCleanupLog.rds"))

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Cleanup", package="PupilPre")

</code></pre>

<hr>
<h2 id='clean_blink'>Automatically clean Eyelink marked blinks.</h2><span id='topic+clean_blink'></span>

<h3>Description</h3>

<p><code>clean_blink</code> performs two stage automated clean-up of blinks
in the pupil and gaze coordinate data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_blink(data = data, BlinkPadding = c(100, 100), Delta = NA,
  MaxValueRun = 5, NAsAroundRun = c(2, 2), LogFile = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean_blink_+3A_data">data</code></td>
<td>
<p>A data frame object created from <code>ppl_select_recorded_eye</code>.</p>
</td></tr>
<tr><td><code id="clean_blink_+3A_blinkpadding">BlinkPadding</code></td>
<td>
<p>A numeric vector of length two containing values (in
msec) to pad the marked blink creating a window within which to operate
the cleanup.</p>
</td></tr>
<tr><td><code id="clean_blink_+3A_delta">Delta</code></td>
<td>
<p>A numeric value specifying the maximal difference between
subsequent pupil values in order to mark greater differences for removal. If
NA, the delta will be estimated from the data using the 95th percentile
value.</p>
</td></tr>
<tr><td><code id="clean_blink_+3A_maxvaluerun">MaxValueRun</code></td>
<td>
<p>A numeric value specifying the maximal run of existing
values flanked by NAs that could be targeted for removal.</p>
</td></tr>
<tr><td><code id="clean_blink_+3A_nasaroundrun">NAsAroundRun</code></td>
<td>
<p>A numeric vector of length two containing values (in
number of subsequent NA) to be used to identify straggler runs of data
that could be removed.</p>
</td></tr>
<tr><td><code id="clean_blink_+3A_logfile">LogFile</code></td>
<td>
<p>A character string indicating the file name (with extension)
of the log file to be created/written. The file keeps track of which events
have been cleaned. We suggest &quot;BlinkCleanupLog.rds&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of type data table as described in <a href="tibble.html#topic+tibble">tibble</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex3")

# Writing log file to temporary folder for the example
dat &lt;- clean_blink(Pupilex3, BlinkPadding = c(100, 100), Delta = 5,
                   MaxValueRun = 5, NAsAroundRun = c(2,2),
                   LogFile = paste0(tempdir(),"/BlinkCleanupLog.rds"))

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Cleanup", package="PupilPre")

</code></pre>

<hr>
<h2 id='compare_summary'>A utility function to compare pupil size data before and after applying
the cleanup</h2><span id='topic+compare_summary'></span>

<h3>Description</h3>

<p><code>compare_summary</code> is a utility function to compare pupil size data
before and after applying the cleanup and summarizes a comparison between
Pupil and Pupil_Previous by Event
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compare_summary(data, ReturnData = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compare_summary_+3A_data">data</code></td>
<td>
<p>A data table object output by <code><a href="VWPre.html#topic+create_time_series">create_time_series</a></code>.</p>
</td></tr>
<tr><td><code id="compare_summary_+3A_returndata">ReturnData</code></td>
<td>
<p>A logical indicating whether to return a data table
containing the summary information.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Summary information.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex4")

compare_summary(Pupilex4)

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Basic_Preprocessing", package="PupilPre")

</code></pre>

<hr>
<h2 id='downsample'>Downsample the data</h2><span id='topic+downsample'></span>

<h3>Description</h3>

<p><code>downsample</code> reduces the sampling rate using median values for the
Pupil and gaze coordinates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>downsample(data, SamplingRate = NULL, NewRate = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="downsample_+3A_data">data</code></td>
<td>
<p>A data frame object created from <code>blink_cleanup</code>.</p>
</td></tr>
<tr><td><code id="downsample_+3A_samplingrate">SamplingRate</code></td>
<td>
<p>A postive integer specifying the current sampling rate.</p>
</td></tr>
<tr><td><code id="downsample_+3A_newrate">NewRate</code></td>
<td>
<p>A postive integer specifying the desired downsampled rate.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of type data table as described in <a href="tibble.html#topic+tibble">tibble</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex4")

dat &lt;- downsample(Pupilex4, SamplingRate = 250, NewRate = 25)

# Please see the vignettes for detailed example usage.
vignette("PupilPre_Basic_Preprocessing", package="PupilPre")

</code></pre>

<hr>
<h2 id='interpolate_NAs'>Interpolation for missing data.</h2><span id='topic+interpolate_NAs'></span>

<h3>Description</h3>

<p><code>interpolate_NAs</code> performs interpolation of missing data for
the pupil and gaze coordinates (if desired).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>interpolate_NAs(data = data, Method = "linear", XandY = TRUE,
  MinData = 2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="interpolate_NAs_+3A_data">data</code></td>
<td>
<p>A data frame object created from <code>auto_cleanup</code>.</p>
</td></tr>
<tr><td><code id="interpolate_NAs_+3A_method">Method</code></td>
<td>
<p>A character string indicating type of interpolation (&quot;linear&quot;
or &quot;spline&quot;) as implemented in <a href="zoo.html#topic+na.approx">na.approx</a>.</p>
</td></tr>
<tr><td><code id="interpolate_NAs_+3A_xandy">XandY</code></td>
<td>
<p>A logical specifying if interpolation should also be done on
gaze coordinates</p>
</td></tr>
<tr><td><code id="interpolate_NAs_+3A_mindata">MinData</code></td>
<td>
<p>A number indicating the minimum number of data points
required in order for interpolation to be applied to the event.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of type data table as described in <a href="tibble.html#topic+tibble">tibble</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex4")

dat &lt;- interpolate_NAs(Pupilex4, Method = "linear",
                       XandY = TRUE, MinData = 2)

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Interpolation_and_Filtering", package="PupilPre")

</code></pre>

<hr>
<h2 id='NA_summary'>Check missing data</h2><span id='topic+NA_summary'></span>

<h3>Description</h3>

<p><code>NA_summary</code> summarizes missing data by Event, Subject, or Item.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NA_summary(data, Summary = "Event", PupilColumn = NULL,
  ReturnData = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="NA_summary_+3A_data">data</code></td>
<td>
<p>A data table object output by <code><a href="VWPre.html#topic+create_time_series">create_time_series</a></code>.</p>
</td></tr>
<tr><td><code id="NA_summary_+3A_summary">Summary</code></td>
<td>
<p>A character string indicating the type of summary.</p>
</td></tr>
<tr><td><code id="NA_summary_+3A_pupilcolumn">PupilColumn</code></td>
<td>
<p>A character string indicating which column to use for the summary.</p>
</td></tr>
<tr><td><code id="NA_summary_+3A_returndata">ReturnData</code></td>
<td>
<p>A logical indicating whether to return a data table
containing the summary information.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Summary information.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex3")

NA_summary(Pupilex3, Summary = "Event", PupilColumn = "Pupil")

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Basic_Preprocessing", package="PupilPre")

</code></pre>

<hr>
<h2 id='plot_compare_app'>Plots comparison of Pupil and Pupil_Previous by event.</h2><span id='topic+plot_compare_app'></span>

<h3>Description</h3>

<p><code>plot_compare_app</code> produces a comparison plot of Pupil and
Pupil_Previous by event to visual changes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_compare_app(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_compare_app_+3A_data">data</code></td>
<td>
<p>A data table object.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {

# Load example data
data("Pupilex4")

plot_compare_app(Pupilex4)
}

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Basic_Preprocessing", package="PupilPre")

</code></pre>

<hr>
<h2 id='plot_events'>Plot each event within a group to a directory</h2><span id='topic+plot_events'></span>

<h3>Description</h3>

<p><code>plot_events</code> plots each event in a group as a multi-panel plot and
saves it into specified directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_events(data = data, Column = NULL, Grouping = "Subject",
  Nrow = 1, Ncol = 1, Device = "pdf", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_events_+3A_data">data</code></td>
<td>
<p>A data table object output by
<code><a href="#topic+ppl_select_recorded_eye">ppl_select_recorded_eye</a></code>.</p>
</td></tr>
<tr><td><code id="plot_events_+3A_column">Column</code></td>
<td>
<p>A character string indicating the column to plot.</p>
</td></tr>
<tr><td><code id="plot_events_+3A_grouping">Grouping</code></td>
<td>
<p>A character string indicating the column to serve as the
grouping. For example, &quot;Subject&quot; will use the subject identifier, producing
one image per subject containing all the events for that subject.</p>
</td></tr>
<tr><td><code id="plot_events_+3A_nrow">Nrow</code></td>
<td>
<p>= A number specifying how many rows per page.</p>
</td></tr>
<tr><td><code id="plot_events_+3A_ncol">Ncol</code></td>
<td>
<p>= A number specifying how many columns per page.</p>
</td></tr>
<tr><td><code id="plot_events_+3A_device">Device</code></td>
<td>
<p>A character string indicating device type passed to
<code>ggsave</code>. By default, this is set to &quot;pdf&quot;.</p>
</td></tr>
<tr><td><code id="plot_events_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <code>ggsave</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Files containing plots.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex3")

# Writing files to temporary folder for the example
plot_events(Pupilex3, Column = "Pupil", Device = "pdf",
            Grouping = "Subject", path = paste0(tempdir(),"/Figs"),
            Nrow = 1, Ncol = 1, width = 11, height = 8.5)

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Plotting", package="PupilPre")

</code></pre>

<hr>
<h2 id='plot_summary_app'>Plots summary of subject or item.</h2><span id='topic+plot_summary_app'></span>

<h3>Description</h3>

<p><code>plot_summary_app</code> plots summary of a given subject or item.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_summary_app(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_summary_app_+3A_data">data</code></td>
<td>
<p>A data table object.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {

# Load example data
data("Pupilex4")

plot_summary_app(Pupilex4)
}

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Basic_Preprocessing", package="PupilPre")

</code></pre>

<hr>
<h2 id='ppl_check_eye_recording'>Check which eyes were recorded during the experiment</h2><span id='topic+ppl_check_eye_recording'></span>

<h3>Description</h3>

<p><code>ppl_check_eye_recording</code> quickly checks which eyes contain gaze data
either using the EYE_TRACKED column (if available) or the Right and
Left interest area columns. It prints a summary and
suggests which setting to use for the <code>Recording</code> parameter in the
function <code><a href="#topic+ppl_select_recorded_eye">ppl_select_recorded_eye</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ppl_check_eye_recording(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ppl_check_eye_recording_+3A_data">data</code></td>
<td>
<p>A data table object output by <code><a href="VWPre.html#topic+create_time_series">create_time_series</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Text feedback and instruction.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex2")

ppl_check_eye_recording(data = Pupilex2)

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Basic_Preprocessing", package="PupilPre")

</code></pre>

<hr>
<h2 id='ppl_plot_avg'>Plots average Pupil.</h2><span id='topic+ppl_plot_avg'></span>

<h3>Description</h3>

<p><code>ppl_plot_avg</code> calculates the grand or conditional averages with
standard error. It then plots the results.
N.B.: This function will work for data with a maximum of 2 conditions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ppl_plot_avg(data, xlim = NA, Column = NULL, Averaging = "Event",
  Condition1 = NULL, Condition2 = NULL, Cond1Labels = NA,
  Cond2Labels = NA, ErrorBar = TRUE, PupilPreTheme = TRUE,
  ConfLev = 95, CItype = "simultaneous", ErrorBand = FALSE,
  ErrorType = "SE")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ppl_plot_avg_+3A_data">data</code></td>
<td>
<p>A data table object output after having executed
<code><a href="VWPre.html#topic+create_time_series">create_time_series</a></code>.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_+3A_xlim">xlim</code></td>
<td>
<p>A vector of two integers specifying the limits of the x-axis.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_+3A_column">Column</code></td>
<td>
<p>A character string specifying the desired column.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_+3A_averaging">Averaging</code></td>
<td>
<p>A character string indicating how the averaging should
be done. &quot;Event&quot; (default) will produce the overall mean in the data, while
&quot;Subject&quot; or &quot;Item&quot; (or, in principle, any other column name) will
calculate the grand mean by that factor.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_+3A_condition1">Condition1</code></td>
<td>
<p>A string containing the column name corresponding to the
first condition, if available.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_+3A_condition2">Condition2</code></td>
<td>
<p>A string containing the column name corresponding to the
second condition, if available.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_+3A_cond1labels">Cond1Labels</code></td>
<td>
<p>A named character vector specifying the desired custom
labels of the levels of the first condition.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_+3A_cond2labels">Cond2Labels</code></td>
<td>
<p>A named character vector specifying the desired custom
labels of the levels of the second condition.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_+3A_errorbar">ErrorBar</code></td>
<td>
<p>A logical indicating whether error bars should be
included in the plot.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_+3A_pupilpretheme">PupilPreTheme</code></td>
<td>
<p>A logical indicating whether the theme included with the
function should be applied, or ggplot2's base theme (to which any other
custom theme could be added)..</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_+3A_conflev">ConfLev</code></td>
<td>
<p>A number indicating the confidence level of the CI.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_+3A_citype">CItype</code></td>
<td>
<p>A string indicating &quot;simultaneous&quot; or &quot;pointwise&quot;. Simultaneous
performs a Bonferroni correction for the interval.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_+3A_errorband">ErrorBand</code></td>
<td>
<p>A logical indicating whether error bands should be
included in the plot.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_+3A_errortype">ErrorType</code></td>
<td>
<p>A string indicating &quot;SE&quot; (Standard Error) or &quot;CI&quot;
(Confidence Interval).</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex7")

ppl_plot_avg(data = Pupilex7, xlim = c(0, 1900), Column = "Pupil",
             Condition1 = NULL, Condition2 = NULL, Cond1Labels = NA,
             Cond2Labels = NA, ErrorBar = TRUE, PupilPreTheme = TRUE)

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Plotting", package="PupilPre")

</code></pre>

<hr>
<h2 id='ppl_plot_avg_cdiff'>Plots average difference between two conditions.</h2><span id='topic+ppl_plot_avg_cdiff'></span>

<h3>Description</h3>

<p><code>ppl_plot_avg_cdiff</code> calculates the average of differences between
two specified conditions along with standard error and then plots the
results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ppl_plot_avg_cdiff(data, Column = NULL, xlim = NA,
  Averaging = "Subject", Condition = NULL, CondLabels = NA,
  ErrorBar = TRUE, PupilPreTheme = TRUE, ConfLev = 95,
  CItype = "simultaneous", ErrorBand = FALSE, ErrorType = "SE")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ppl_plot_avg_cdiff_+3A_data">data</code></td>
<td>
<p>A data table object.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_cdiff_+3A_column">Column</code></td>
<td>
<p>A character vector specifying the desired column.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_cdiff_+3A_xlim">xlim</code></td>
<td>
<p>A vector of two integers specifying the limits of the x-axis.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_cdiff_+3A_averaging">Averaging</code></td>
<td>
<p>A character string indicating how the averaging should
be done. &quot;Subject&quot; (default) will produce the grand mean in the data, while
&quot;Item&quot; (or, in principle, any other column name) will
calculate the grand mean by that factor.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_cdiff_+3A_condition">Condition</code></td>
<td>
<p>A list containing the column name corresponding to the
condition and factor levels to be used for calculating the difference.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_cdiff_+3A_condlabels">CondLabels</code></td>
<td>
<p>A named character vector specifying the desired labels
of the levels of the condition.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_cdiff_+3A_errorbar">ErrorBar</code></td>
<td>
<p>A logical indicating whether error bars should be
included in the plot.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_cdiff_+3A_pupilpretheme">PupilPreTheme</code></td>
<td>
<p>A logical indicating whether the theme included with the
function should be applied, or ggplot2's base theme (to which any other
custom theme could be added).</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_cdiff_+3A_conflev">ConfLev</code></td>
<td>
<p>A number indicating the confidence level of the CI.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_cdiff_+3A_citype">CItype</code></td>
<td>
<p>A string indicating &quot;simultaneous&quot; or &quot;pointwise&quot;. Simultaneous
performs a Bonferroni correction for the interval.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_cdiff_+3A_errorband">ErrorBand</code></td>
<td>
<p>A logical indicating whether error bands should be
included in the plot.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_cdiff_+3A_errortype">ErrorType</code></td>
<td>
<p>A string indicating &quot;SE&quot; or &quot;CI&quot;.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex7")

ppl_plot_avg_cdiff(data = Pupilex7, Column = "Pupil",
                   Condition = list(talker = c("EN3", "CH1")),
                   ErrorBar = TRUE, PupilPreTheme = TRUE)

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Plotting", package="PupilPre")

</code></pre>

<hr>
<h2 id='ppl_plot_avg_contour'>Plots average contour surface of pupil data.</h2><span id='topic+ppl_plot_avg_contour'></span>

<h3>Description</h3>

<p><code>ppl_plot_avg_contour</code> calculates the conditional average of pupil
size by Time and a specified continuous variable. It then applies a 3D smooth
(derived using <code><a href="mgcv.html#topic+gam">gam</a></code>) over the surface and plots the
results as a contour plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ppl_plot_avg_contour(data, Column = NULL, Var = NULL,
  Averaging = "Event", VarLabel = NULL, xlim = NA,
  PupilPreTheme = TRUE, Colors = c("gray20", "gray90"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ppl_plot_avg_contour_+3A_data">data</code></td>
<td>
<p>A data table object output by either <code><a href="VWPre.html#topic+create_time_series">create_time_series</a></code>.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_contour_+3A_column">Column</code></td>
<td>
<p>A string specifying the column to use.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_contour_+3A_var">Var</code></td>
<td>
<p>A string containing the column name corresponding to the continuous
variable.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_contour_+3A_averaging">Averaging</code></td>
<td>
<p>A character string indicating how the averaging should
be done. &quot;Event&quot; (default) will produce the overall mean in the data, while
&quot;Subject&quot; or &quot;Item&quot; (or, in principle, any other column name) will
calculate the grand mean by that factor.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_contour_+3A_varlabel">VarLabel</code></td>
<td>
<p>A string specifying the axis label to use for <code>Var</code>.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_contour_+3A_xlim">xlim</code></td>
<td>
<p>A vector of two integers specifying the limits of the x-axis.</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_contour_+3A_pupilpretheme">PupilPreTheme</code></td>
<td>
<p>A logical indicating whether the theme included with the
function, or ggplot2's base theme (which any other custom theme could be added).</p>
</td></tr>
<tr><td><code id="ppl_plot_avg_contour_+3A_colors">Colors</code></td>
<td>
<p>A vector of two strings specifying the colrs of the contour
shading - The default values represent grayscale.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex7")

ppl_plot_avg_contour(data = Pupilex7, Column = "Pupil", Var = "TRIAL_INDEX",
                     VarLabel = "Trial", xlim = c(0,2000),
                     PupilPreTheme = TRUE, Colors = c("gray20", "gray90"))

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Plotting", package="PupilPre")

</code></pre>

<hr>
<h2 id='ppl_prep_data'>Check the classes of specific columns and re-assigns as necessary.</h2><span id='topic+ppl_prep_data'></span>

<h3>Description</h3>

<p><code>ppl_prep_data</code> checks for necessary columns and converts the class
if needed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ppl_prep_data(data, Subject = NULL, Item = NA,
  EventColumns = c("Subject", "TRIAL_INDEX"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ppl_prep_data_+3A_data">data</code></td>
<td>
<p>A data frame object created from an Eyelink Sample Report.</p>
</td></tr>
<tr><td><code id="ppl_prep_data_+3A_subject">Subject</code></td>
<td>
<p>An obligatory string containing the column name corresponding to the subject identifier.</p>
</td></tr>
<tr><td><code id="ppl_prep_data_+3A_item">Item</code></td>
<td>
<p>An optional string containing the column name corresponding to the item identifier; by default, NA.</p>
</td></tr>
<tr><td><code id="ppl_prep_data_+3A_eventcolumns">EventColumns</code></td>
<td>
<p>A vector specifying the columns which will be used for creating
the Event variable; by default, Subject and TRIAL_INDEX.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of type data table as described in <a href="tibble.html#topic+tibble">tibble</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex1")

dat &lt;- ppl_prep_data(Pupilex1, Subject = "RECORDING_SESSION_LABEL",
                     Item = "item",
                     EventColumns = c("Subject","TRIAL_INDEX"))

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Basic_Preprocessing", package="PupilPre")

</code></pre>

<hr>
<h2 id='ppl_rm_extra_DVcols'>Checks for and removes unnecessary DV output columns.</h2><span id='topic+ppl_rm_extra_DVcols'></span>

<h3>Description</h3>

<p><code>ppl_rm_extra_DVcols</code> checks for unnecessary DataViewer output columns and
removes them, unless specified.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ppl_rm_extra_DVcols(data, Keep = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ppl_rm_extra_DVcols_+3A_data">data</code></td>
<td>
<p>A data frame object created from an Eyelink Sample Report.</p>
</td></tr>
<tr><td><code id="ppl_rm_extra_DVcols_+3A_keep">Keep</code></td>
<td>
<p>An optional string or character vector containing the column names
of SR Research sample report columns the user would like to keep in the data set.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of type data table as described in <a href="tibble.html#topic+tibble">tibble</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex1")

dat &lt;- ppl_rm_extra_DVcols(Pupilex1, Keep = NULL)

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Basic_Preprocessing", package="PupilPre")

</code></pre>

<hr>
<h2 id='ppl_select_recorded_eye'>Select the eye used during recording</h2><span id='topic+ppl_select_recorded_eye'></span>

<h3>Description</h3>

<p><code>ppl_select_recorded_eye</code> examines each event and determines which
eye contains interest area information, based on the <code>Recording</code>
parameter (which can be determined using <code><a href="#topic+ppl_check_eye_recording">ppl_check_eye_recording</a></code>).
This function then selects the data from the recorded eye and copies it to
new columns (Pupil, Gaze_X, Gaze_Y, Velocity_X, Velocity_Y, Acceleration_X,
Acceleration_Y, In_Blink, In_Saccade). The function prints a summary of the output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ppl_select_recorded_eye(data, Recording = NULL, WhenLandR = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ppl_select_recorded_eye_+3A_data">data</code></td>
<td>
<p>A data table object output by <code><a href="VWPre.html#topic+create_time_series">create_time_series</a></code>.</p>
</td></tr>
<tr><td><code id="ppl_select_recorded_eye_+3A_recording">Recording</code></td>
<td>
<p>A string indicating which eyes were used for recording gaze data
(&quot;R&quot; when only right eye recording is present, &quot;L&quot; when only left eye recording
is present, &quot;LorR&quot; when either the left or the right eye was recorded, &quot;LandR&quot;
when both the left and the right eyes were recorded).</p>
</td></tr>
<tr><td><code id="ppl_select_recorded_eye_+3A_whenlandr">WhenLandR</code></td>
<td>
<p>A string indicating which eye (&quot;Right&quot; or &quot;Left) to use
if gaze data is available for both eyes (i.e., Recording = &quot;LandR&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data table with 11 additional columns added to <code>data</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex2")

dat &lt;- ppl_select_recorded_eye(data = Pupilex2, Recording = "R",
                               WhenLandR = "Right")

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Basic_Preprocessing", package="PupilPre")

</code></pre>

<hr>
<h2 id='Pupildat'>This is a sample pupil size dataset included in the package</h2><span id='topic+Pupildat'></span>

<h3>Description</h3>

<p>This is a sample pupil size dataset included in the package
</p>


<h3>Author(s)</h3>

<p>Aki Kyröläinen
</p>

<hr>
<h2 id='Pupilex1'>This is an example dataset to illustrate certain functionality</h2><span id='topic+Pupilex1'></span>

<h3>Description</h3>

<p>This is an example dataset to illustrate certain functionality
</p>


<h3>Author(s)</h3>

<p>Aki Kyröläinen
</p>

<hr>
<h2 id='Pupilex2'>This is an example dataset to illustrate certain functionality</h2><span id='topic+Pupilex2'></span>

<h3>Description</h3>

<p>This is an example dataset to illustrate certain functionality
</p>


<h3>Author(s)</h3>

<p>Aki Kyröläinen
</p>

<hr>
<h2 id='Pupilex3'>This is an example dataset to illustrate certain functionality</h2><span id='topic+Pupilex3'></span>

<h3>Description</h3>

<p>This is an example dataset to illustrate certain functionality
</p>


<h3>Author(s)</h3>

<p>Aki Kyröläinen
</p>

<hr>
<h2 id='Pupilex4'>This is an example dataset to illustrate certain functionality</h2><span id='topic+Pupilex4'></span>

<h3>Description</h3>

<p>This is an example dataset to illustrate certain functionality
</p>


<h3>Author(s)</h3>

<p>Aki Kyröläinen
</p>

<hr>
<h2 id='Pupilex5'>This is an example dataset to illustrate certain functionality</h2><span id='topic+Pupilex5'></span>

<h3>Description</h3>

<p>This is an example dataset to illustrate certain functionality
</p>


<h3>Author(s)</h3>

<p>Aki Kyröläinen
</p>

<hr>
<h2 id='Pupilex6'>This is an example dataset to illustrate certain functionality</h2><span id='topic+Pupilex6'></span>

<h3>Description</h3>

<p>This is an example dataset to illustrate certain functionality
</p>


<h3>Author(s)</h3>

<p>Aki Kyröläinen
</p>

<hr>
<h2 id='Pupilex7'>This is an example dataset to illustrate certain functionality</h2><span id='topic+Pupilex7'></span>

<h3>Description</h3>

<p>This is an example dataset to illustrate certain functionality
</p>


<h3>Author(s)</h3>

<p>Aki Kyröläinen
</p>

<hr>
<h2 id='recode_off_screen'>Check for samples off-screen and marks as NA.</h2><span id='topic+recode_off_screen'></span>

<h3>Description</h3>

<p><code>recode_off_screen</code> checks samples falling outside the bounds of
the screen and marks them with NA
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recode_off_screen(data = data, ScreenSize = NULL, PlotData = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="recode_off_screen_+3A_data">data</code></td>
<td>
<p>A data frame object created from an Eyelink Sample Report.</p>
</td></tr>
<tr><td><code id="recode_off_screen_+3A_screensize">ScreenSize</code></td>
<td>
<p>A numeric vector specifying (in pixels) the dimensions
of the x and y of the screen used during the experiment.</p>
</td></tr>
<tr><td><code id="recode_off_screen_+3A_plotdata">PlotData</code></td>
<td>
<p>A logical indicating whether or not to output a
visualization of the result.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of type data table as described in <a href="tibble.html#topic+tibble">tibble</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex3")

dat &lt;- recode_off_screen(data = Pupilex3, ScreenSize = c(1920, 1080),
                         PlotData = FALSE)

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Basic_Preprocessing", package="PupilPre")

</code></pre>

<hr>
<h2 id='rm_sparse_events'>Removes events with excessive missing data</h2><span id='topic+rm_sparse_events'></span>

<h3>Description</h3>

<p><code>rm_sparse_events</code> removes events with less data than the
specified amount.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rm_sparse_events(data = data, BaselineWindow = NULL,
  CriticalWindow = NULL, BaselineRequired = NULL,
  CriticalRequired = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rm_sparse_events_+3A_data">data</code></td>
<td>
<p>A data table object output after having run
<code><a href="#topic+ppl_select_recorded_eye">ppl_select_recorded_eye</a></code>.</p>
</td></tr>
<tr><td><code id="rm_sparse_events_+3A_baselinewindow">BaselineWindow</code></td>
<td>
<p>A numeric vector of length 1 or 2 specifying the time
points of the baseline window to be examined. Providing two values indicates
the start time and the end time of the baseline, respectively. Providing a
single value (i.e., time point) assumes that every preceding time point is
part of the baseline (N.B. trials may vary in the size of the baseline
window and will result in an error).</p>
</td></tr>
<tr><td><code id="rm_sparse_events_+3A_criticalwindow">CriticalWindow</code></td>
<td>
<p>A numeric vector of length 1 or 2 specifying the time
points of the critical (i.e., post-stimulus) window to be examined. Providing
two values indicates the start time and the end time of the window,
respectively. Providing a single value (i.e., time point) assumes that
every subsequent time point is part of the window.</p>
</td></tr>
<tr><td><code id="rm_sparse_events_+3A_baselinerequired">BaselineRequired</code></td>
<td>
<p>A number indicating the percentage of data
required in the baseline to be included (i.e., drop events with less than
this amount of data).</p>
</td></tr>
<tr><td><code id="rm_sparse_events_+3A_criticalrequired">CriticalRequired</code></td>
<td>
<p>A number indicating the percentage of data
required in the critical window to be included (i.e., drop events with less
than this amount of data).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of type data table as described in <a href="tibble.html#topic+tibble">tibble</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex3")

dat &lt;- rm_sparse_events(data = Pupilex3, BaselineWindow = c(-500, 0),
                        CriticalWindow = c(200, 2000),
                        BaselineRequired = 50,
                        CriticalRequired = 50)

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Basic_Preprocessing", package="PupilPre")

</code></pre>

<hr>
<h2 id='trim_filtered'>Trim the beginning and end of filtered events.</h2><span id='topic+trim_filtered'></span>

<h3>Description</h3>

<p><code>trim_filtered</code> removes events skipped by the filter as well as a
specified number of milliseconds from the beginning and the end of each
filtered event (as to remove artifacts created by the filter).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trim_filtered(data = data, RmSkipped = NULL, RmEdges = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trim_filtered_+3A_data">data</code></td>
<td>
<p>A data frame object created from <code>auto_cleanup</code>.</p>
</td></tr>
<tr><td><code id="trim_filtered_+3A_rmskipped">RmSkipped</code></td>
<td>
<p>A logical value indicating whether or not to remove events
that were skipped during the filtering process (due to NAs).</p>
</td></tr>
<tr><td><code id="trim_filtered_+3A_rmedges">RmEdges</code></td>
<td>
<p>A numeric vector of length 2 indicating the number of
milliseconds to remove from the beginning and end of each event.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of type data table as described in <a href="tibble.html#topic+tibble">tibble</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example data
data("Pupilex6")

dat &lt;- trim_filtered(data = Pupilex6, RmSkipped = TRUE,
                     RmEdges = c(75, 75))

# Please see the vignettes for detailed example usage.
vignette("PupilPre_Interpolation_and_Filtering", package="PupilPre")

</code></pre>

<hr>
<h2 id='user_cleanup_app'>Interactive app for manually cleaning pupil data.</h2><span id='topic+user_cleanup_app'></span>

<h3>Description</h3>

<p><code>user_cleanup_app</code> plots current pupil data and allows the user to
select data points which should be removed (changed to NA).  The app saves
a record of the to-be-executed changes in an RDS file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>user_cleanup_app(data = data, LogFile = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="user_cleanup_app_+3A_data">data</code></td>
<td>
<p>A data table object.</p>
</td></tr>
<tr><td><code id="user_cleanup_app_+3A_logfile">LogFile</code></td>
<td>
<p>A character string indicating the name (and location) of the
log file to be read/written.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {

# Load example data
data("Pupilex4")

# Writing log file to temporary folder for the example
user_cleanup_app(Pupilex4, LogFile = paste0(tempdir(),"/UserCleanupLog.rds"))
}

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Cleanup", package="PupilPre")

</code></pre>

<hr>
<h2 id='verify_cleanup_app'>Interactive app for verifying auto cleanup.</h2><span id='topic+verify_cleanup_app'></span>

<h3>Description</h3>

<p><code>verify_cleanup_app</code> plots the data points changed during the
previously completed auto cleanup and allows the user to verify the cleanup
for specific events.  The app saves the selection to the RDS file, which can
then be used to apply the changes to the data set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>verify_cleanup_app(data = data, LogFile = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="verify_cleanup_app_+3A_data">data</code></td>
<td>
<p>A data table object.</p>
</td></tr>
<tr><td><code id="verify_cleanup_app_+3A_logfile">LogFile</code></td>
<td>
<p>A character string indicating the name (and location) of the
log file.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {

# Load example data
data("Pupilex3")

# Ensure the log file exists by running cleanup
# Writing log file to temporary folder for the example
dat &lt;- clean_blink(Pupilex3, BlinkPadding = c(100, 100), Delta = 5,
                   MaxValueRun = 5, NAsAroundRun = c(2,2),
                   LogFile = paste0(tempdir(),"/BlinkCleanupLog.rds"))

# Read log file from temporary folder
verify_cleanup_app(dat, LogFile = paste0(tempdir(),"/BlinkCleanupLog.rds"))
}

# Please see the vignettes for detailed example usage.
# vignette("PupilPre_Cleanup", package="PupilPre")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
