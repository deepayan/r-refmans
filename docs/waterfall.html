<!DOCTYPE html><html lang="en"><head><title>Help for package waterfall</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {waterfall}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#waterfall-package'><p>Waterfall Charts</p></a></li>
<li><a href='#jaquith'><p>Sample Business-Adjusted Risk Data</p></a></li>
<li><a href='#rasiel'><p>Sample Financial Data</p></a></li>
<li><a href='#waterfallchart'><p>Waterfall Chart</p></a></li>
<li><a href='#waterfallplot'><p>Waterfall Plot</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Waterfall Charts</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2016-04-02</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://jameshoward.us/software/waterfall/">https://jameshoward.us/software/waterfall/</a>,
<a href="https://github.com/howardjp/waterfall">https://github.com/howardjp/waterfall</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/howardjp/waterfall/issues">https://github.com/howardjp/waterfall/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Provides support for creating waterfall charts in R
    using both traditional base and lattice graphics.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/BSD-2-Clause">BSD_2_clause</a> + file LICENSE</td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>5.0.1.9000</td>
</tr>
<tr>
<td>Depends:</td>
<td>lattice</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2016-04-02 21:37:31 UTC; howardjp</td>
</tr>
<tr>
<td>Author:</td>
<td>James P. Howard, II [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>"James P. Howard, II" &lt;jh@jameshoward.us&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2016-04-03 16:40:20</td>
</tr>
</table>
<hr>
<h2 id='waterfall-package'>Waterfall Charts</h2><span id='topic+waterfall'></span><span id='topic+waterfall-package'></span>

<h3>Description</h3>

<p>Create waterfall or &quot;McKinsey&quot; charts
</p>


<h3>Details</h3>

<p>This package provides support for creating waterfall
charts in R using both traditional base and lattice graphics.
</p>


<h3>Author(s)</h3>

<p>James P. Howard, II &lt;jh@jameshoward.us&gt;
</p>

<hr>
<h2 id='jaquith'>Sample Business-Adjusted Risk Data</h2><span id='topic+jaquith'></span>

<h3>Description</h3>

<p>This dataset provides the sample business-adjusted risk from
<em>Security Metrics</em> to illustrate non-financial waterfall charts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(jaquith)</code></pre>


<h3>Format</h3>

<p>A data frame with 9 rows and 2 columns.
</p>

<table>
<tr>
 <td style="text-align: right;">
    [,1] </td><td style="text-align: left;"> factor </td><td style="text-align: left;"> character </td><td style="text-align: left;"> Factor label</td>
</tr>
<tr>
 <td style="text-align: right;">
    [,2] </td><td style="text-align: left;"> score  </td><td style="text-align: left;"> numeric   </td><td style="text-align: left;"> Relative score</td>
</tr>
<tr>
 <td style="text-align: right;">
  </td>
</tr>

</table>



<h3>Details</h3>

<p>The dataset represents a sample business-adjusted risk
calculation.</p>


<h3>References</h3>

<p>Andrew Jaquith, <em>Security Metrics: Replacing Fear, Uncertainty,
and Doubt</em> (Boston:  Addison-Wesley Professional, 2007), 170-171.
</p>

<hr>
<h2 id='rasiel'>Sample Financial Data</h2><span id='topic+rasiel'></span>

<h3>Description</h3>

<p>This dataset provides the sample financial data used in <em>The
McKinsey Way</em> to illustrate financial waterfall charts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(rasiel)</code></pre>


<h3>Format</h3>

<p>A data frame with 5 rows and 3 columns.
</p>

<table>
<tr>
 <td style="text-align: right;">
    [,1] </td><td style="text-align: left;"> label    </td><td style="text-align: left;"> character </td><td style="text-align: left;"> Column label</td>
</tr>
<tr>
 <td style="text-align: right;">
    [,2] </td><td style="text-align: left;"> value    </td><td style="text-align: left;"> numeric   </td><td style="text-align: left;"> Column height</td>
</tr>
<tr>
 <td style="text-align: right;">
    [,3] </td><td style="text-align: left;"> subtotal </td><td style="text-align: left;"> character </td><td style="text-align: left;"> Group and subtotal labels</td>
</tr>
<tr>
 <td style="text-align: right;">
  </td>
</tr>

</table>



<h3>Details</h3>

<p>The dataset represents a profit and loss statement for the
fictional ACME Widget Corporation for 1998.</p>


<h3>References</h3>

<p>Ethan M. Rasiel, <em>The McKinsey Way: Using the Techniques of the
World's Top Strategic Consultants to Help You and Your Business</em>
(New York:  McGraw-Hill, 1999), 115-116.
</p>

<hr>
<h2 id='waterfallchart'>Waterfall Chart</h2><span id='topic+waterfallchart'></span>

<h3>Description</h3>

<p>Creates a waterfall chart using Lattice
</p>


<h3>Usage</h3>

<pre><code class='language-R'>waterfallchart(x, data = NULL, groups = NULL, horizontal = FALSE,
  panel = panel.waterfallchart, prepanel = prepanel.waterfallchart,
  summaryname = "Total", box.ratio = 2, origin = 0, level.lines = TRUE,
  ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="waterfallchart_+3A_x">x</code></td>
<td>
<p>a formula describing the form of conditioning plot. The
formula is generally of the form 'y ~ x | g1 * g2 * ...', indicating
that plots of 'y' (on the y axis) versus 'x' (on the x axis) should
be produced conditional on the variables 'g1, g2, ...'. However, the
conditioning variables 'g1,g2,...' may be omitted.</p>
</td></tr>
<tr><td><code id="waterfallchart_+3A_data">data</code></td>
<td>
<p>a data frame containing values (or more precisely,
anything that is a valid 'envir' argument in 'eval', e.g., a list or
an environment) for any variables in the formula, as well as 'groups'
and 'subset' if applicable. If not found in 'data', or if 'data' is
unspecified, the variables are looked for in the environment of the
formula.</p>
</td></tr>
<tr><td><code id="waterfallchart_+3A_groups">groups</code></td>
<td>
<p>a vector expected to act as a grouping variable within
each panel, typically used to distinguish different groups by varying
graphical parameters like color and line type.  Unlike with the
<a href="lattice.html#topic+barchart">barchart</a> function, groups specifies where subtotals columns,
should appear.  There is a subtotal created for each group specified.
If no groups are given, a summary column is still reported.</p>
</td></tr>
<tr><td><code id="waterfallchart_+3A_horizontal">horizontal</code></td>
<td>
<p>This argument is used to process the arguments to
these high level functions, but more importantly, it is passed as an
argument to the panel function, which is supposed to use it as
appropriate.</p>
</td></tr>
<tr><td><code id="waterfallchart_+3A_panel">panel</code></td>
<td>
<p>This draws the actual plot after <a href="lattice.html#topic+bwplot">bwplot</a> has done
the difficult work of processing the formula.</p>
</td></tr>
<tr><td><code id="waterfallchart_+3A_prepanel">prepanel</code></td>
<td>
<p>This function returns the <a href="lattice.html#topic+bwplot">bwplot</a> information
on the number of columns to display and where to place labels.</p>
</td></tr>
<tr><td><code id="waterfallchart_+3A_summaryname">summaryname</code></td>
<td>
<p>name of the summary column, usually &quot;Total&quot;</p>
</td></tr>
<tr><td><code id="waterfallchart_+3A_box.ratio">box.ratio</code></td>
<td>
<p>specifies the ratio of the width of the rectangles
to the interrectangle space.</p>
</td></tr>
<tr><td><code id="waterfallchart_+3A_origin">origin</code></td>
<td>
<p>initial offset relative to the x axis.  The value
serves as the logical starting point for the first column and any
summary column.  Defaults to 0.</p>
</td></tr>
<tr><td><code id="waterfallchart_+3A_level.lines">level.lines</code></td>
<td>
<p>if FALSE, the lines connecting adjacent boxes are
ommitted from the display.</p>
</td></tr>
<tr><td><code id="waterfallchart_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function closely mimics the <a href="lattice.html#topic+barchart">barchart</a> interface, but
provides a type of chart called a waterfall plot, showing how
multiple subvalues contribute to a total sum.
</p>
<p>The bulk of the work is actually processed in <a href="lattice.html#topic+bwplot">bwplot</a> which
defines where tickmarks and other information outside the plot itself
are placed.  Only a formula method is provided.
</p>
<p>Matrix and vector interfaces are not provided because mimicing the
behavior of <a href="lattice.html#topic+barchart">barchart</a> for those interfaces produces
unintellible and undefined graphic output.
</p>


<h3>References</h3>

<p>Andrew Jaquith, <em>Security Metrics: Replacing Fear,
Uncertainty, and Doubt</em> (Boston: Addison-Wesley Professional, 2007),
170-172.
</p>
<p>Ethan M. Rasiel, <em>The McKinsey Way: Using the Techniques of the
World's Top Strategic Consultants to Help You and Your Business</em> (New
York: McGraw-Hill, 1999), 113-118.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(rasiel)
data(jaquith)
waterfallchart(value~label, data=rasiel, groups=rasiel$subtotal)
waterfallchart(factor~score, data=jaquith)

</code></pre>

<hr>
<h2 id='waterfallplot'>Waterfall Plot</h2><span id='topic+waterfallplot'></span>

<h3>Description</h3>

<p>Creates a waterfall plot with vertical or horizontal bars.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>waterfallplot(height, width = 1, space = NULL, names.arg = NULL,
  horiz = FALSE, density = NULL, angle = 45, col = NULL,
  border = par("fg"), main = NA, sub = NA, xlab = NULL, ylab = NULL,
  xlim = NULL, ylim = NULL, xpd = TRUE, axes = TRUE, axisnames = TRUE,
  cex.axis = par("cex.axis"), cex.names = par("cex.axis"), plot = TRUE,
  axis.lty = 0, offset = 0, add = FALSE, summary = FALSE, rev = FALSE,
  level.lines = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="waterfallplot_+3A_height">height</code></td>
<td>
<p>a vector of values describing the height of the bars
that make up the plot.  Matrices are not supported.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_width">width</code></td>
<td>
<p>optional vector of bar widths.  Re-cycled to length the
number of bars drawn.  Specifying a single value will have no visible
effect unless 'xlim' is specified.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_space">space</code></td>
<td>
<p>the amount of space (as a fraction of the average bar width)
left before each bar.  May be given as a single number or one number
per bar.  If not given explicitly, it defaults to 0.2.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_names.arg">names.arg</code></td>
<td>
<p>a vector of names to be plotted below each bar If
this argument is omitted, then the names are taken from the 'names'
attribute of 'height.'</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_horiz">horiz</code></td>
<td>
<p>a logical value.  If 'FALSE', the bars are drawn
vertically with the first bar to the left.  If 'TRUE', the bars are
drawn horizontally with the first at the bottom.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_density">density</code></td>
<td>
<p>a vector giving the density of shading lines, in lines
per inch, for the bars or bar components. The default value of 'NULL'
means that no shading lines are drawn. Non-positive values of
'density' also inhibit the drawing of shading lines.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_angle">angle</code></td>
<td>
<p>the slope of shading lines, given as an angle in degrees
(counter-clockwise), for the bars or bar components.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_col">col</code></td>
<td>
<p>a vector of colors for the bars or bar components. By
default, grey is used.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_border">border</code></td>
<td>
<p>the color to be used for the border of the bars. Use
'border = NA' to omit borders.  If there are shading lines, 'border =
TRUE' means use the same colour for the border as forr the shading
lines.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_main">main</code></td>
<td>
<p>overall title for the plot.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_sub">sub</code></td>
<td>
<p>subtitle for the plot.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_xlab">xlab</code></td>
<td>
<p>a label for the x-axis.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_ylab">ylab</code></td>
<td>
<p>a label for the y-axis.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_xlim">xlim</code></td>
<td>
<p>limits for the x-axis.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_ylim">ylim</code></td>
<td>
<p>limits for the y-axis.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_xpd">xpd</code></td>
<td>
<p>logical. Should bars be allowed to outside region?</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_axes">axes</code></td>
<td>
<p>logical.  If 'TRUE', a vertical (or horizontal, if
'horiz' is true) axis is drawn.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_axisnames">axisnames</code></td>
<td>
<p>logical.  If 'TRUE', and if there are 'names.arg'
(see above), the other axis is drawn (with 'lty=0') and labeled.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_cex.axis">cex.axis</code></td>
<td>
<p>expansion factor for numeric axis labels.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_cex.names">cex.names</code></td>
<td>
<p>expansion factor for axis names (bar labels).</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_plot">plot</code></td>
<td>
<p>logical.  If 'FALSE', nothing is plotted.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_axis.lty">axis.lty</code></td>
<td>
<p>the graphics parameter 'lty' applied to the axis and
tick marks of the categorical (default horizontal) axis.  Note that by
default the axis is suppressed.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_offset">offset</code></td>
<td>
<p>initial offset relative to the x axis.  The value
serves as the logical starting point for the first column and any
summary column.  Defaults to 0.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_add">add</code></td>
<td>
<p>logical specifying if bars should be added to an already
existing plot; defaults to 'FALSE'.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_summary">summary</code></td>
<td>
<p>create a summary column.  A summary column provides a
final sum column showing the relative change from the offset.  If a
summary is requested and names.arg is set, the names.arg vector must
include one extra entry with the summary column's name.  Defaults to
FALSE.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_rev">rev</code></td>
<td>
<p>reverse the order of columns?  Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_level.lines">level.lines</code></td>
<td>
<p>if FALSE, the lines connecting adjacent boxes are
ommitted from the display.</p>
</td></tr>
<tr><td><code id="waterfallplot_+3A_...">...</code></td>
<td>
<p>arguments to be passed to other methods.  For the default
method these can include further arguments (such as 'axes', 'asp' and
'main') and graphical parameters (see 'par') which are passed to
'plot.window()', 'title()' and 'axis'.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function closely mimics the <a href="graphics.html#topic+barplot">barplot</a> interface, but
provides a type of chart called a waterfall plot, showing how multiple
subvalues contribute to a total sum.
</p>
<p>This is a generic function, it currently only has a default method. A
formula interface may be added eventually.
</p>


<h3>Value</h3>

<p>A numeric vector say 'mp', giving the coordinates of
<em>all</em> the bar midpoints drawn, useful for adding to the graph.
</p>


<h3>References</h3>

<p>Andrew Jaquith, <em>Security Metrics: Replacing Fear,
Uncertainty, and Doubt</em> (Boston: Addison-Wesley Professional, 2007),
170-172.
</p>
<p>Ethan M. Rasiel, <em>The McKinsey Way: Using the Techniques of the
World's Top Strategic Consultants to Help You and Your Business</em> (New
York: McGraw-Hill, 1999), 113-118.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(rasiel)
waterfallplot(rasiel$value, names.arg=rasiel$label)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
