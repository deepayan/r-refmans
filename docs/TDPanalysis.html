<!DOCTYPE html><html lang="en"><head><title>Help for package TDPanalysis</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {TDPanalysis}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#date.to.DOY'><p>Date conversion</p></a></li>
<li><a href='#datetime'><p>Time &amp; dates conversion</p></a></li>
<li><a href='#remove.fun'><p>Remove unwanted dates</p></a></li>
<li><a href='#SpFl'><p>Sap flow dataset</p></a></li>
<li><a href='#SpWd_Area_calc'><p>Sapwood area calculation</p></a></li>
<li><a href='#tens.to.sapflow'><p>Convert tension into sap flow density</p></a></li>
<li><a href='#timecont'><p>Time conversion</p></a></li>
<li><a href='#Tmax.find'><p>Find Tmax</p></a></li>
<li><a href='#Tmax.mean'><p>Calculate a mean of Tmax</p></a></li>
<li><a href='#Tmaxplot'><p>Plot the Tmax</p></a></li>
<li><a href='#Wat.transp'><p>Calculate daily transpiration</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Granier's Sap Flow Sensors (TDP) Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-02-28</td>
</tr>
<tr>
<td>Author:</td>
<td>Maxime Durand</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Maxime Durand &lt;duran1211@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Set of functions designed to help in the
    analysis of TDP sensors. Features includes dates and time conversion, weather
    data interpolation, daily maximum of tension analysis and calculations required
    to convert sap flow density data to sap flow rates at the tree and plot scale (For more information see : Granier (1985) &lt;<a href="https://doi.org/10.1051%2Fforest%3A19850204">doi:10.1051/forest:19850204</a>&gt; &amp; Granier (1987) &lt;<a href="https://doi.org/10.1093%2Ftreephys%2F3.4.309">doi:10.1093/treephys/3.4.309</a>&gt;).</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, plyr, graphics</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.0.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-02-28 07:22:06 UTC; Localadmin_durandma</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-02-28 07:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='date.to.DOY'>Date conversion</h2><span id='topic+date.to.DOY'></span>

<h3>Description</h3>

<p>Convert dates from the DD/MM/YYYY format to day of the year (DOY)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date.to.DOY(dates, format = "dd/mm/yyyy")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date.to.DOY_+3A_dates">dates</code></td>
<td>
<p>Vector with dates to convert.</p>
</td></tr>
<tr><td><code id="date.to.DOY_+3A_format">format</code></td>
<td>
<p>Format of the date (support DD/MM/YYYY MM/DD/YYYY and YYYY/MM/DD).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return a vector containing the corresponding DOY.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dates = c("01/01/2000", "03/03/2000", "03/03/1999")
date.to.DOY(dates=dates)
</code></pre>

<hr>
<h2 id='datetime'>Time &amp; dates conversion</h2><span id='topic+datetime'></span>

<h3>Description</h3>

<p>Convert DOY and time into a single numerical variable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datetime(dates, Time)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="datetime_+3A_dates">dates</code></td>
<td>
<p>Vector with dates in the DOY format.</p>
</td></tr>
<tr><td><code id="datetime_+3A_time">Time</code></td>
<td>
<p>Vector with time</p>
</td></tr>
</table>


<h3>Details</h3>

<p>time vector should be numerical (e.g. as outputed by the time.to.cont function)
</p>


<h3>Value</h3>

<p>Return a vector containing DOY and time as a single numerical variable
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dates = c(102,102,102,102,103,103,103,103)
Time = c(22, 22.5, 23, 23.5, 0, 0.5, 1, 1.5)
datetime(dates=dates, Time=Time)
</code></pre>

<hr>
<h2 id='remove.fun'>Remove unwanted dates</h2><span id='topic+remove.fun'></span>

<h3>Description</h3>

<p>Remove all data for the corresponding date argument
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove.fun(df, dates)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="remove.fun_+3A_df">df</code></td>
<td>
<p>Data frame containing a DOY column named &quot;DOY&quot;.</p>
</td></tr>
<tr><td><code id="remove.fun_+3A_dates">dates</code></td>
<td>
<p>Character vector containing the DOY to remove from the data frame.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is primarely used to remove days for which Tmax is too extreme.
</p>


<h3>Value</h3>

<p>Return the inputed data frame without the date corresponding the the &quot;dates&quot; argument.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>DOY = c(rep(102, times=10), rep(103, times=10))
ID = c(rep("A", times=5), rep("B", times=5), rep("A", times=5), rep("B", times=5))
Tmax = c(rep(2.5, times=5), rep(2.7, times=5), rep(3.2, times=5), rep(3.4, times=5))
df &lt;- data.frame(DOY, ID, Tmax)
dates = c("103")
remove.fun(df=df, dates=dates) 
</code></pre>

<hr>
<h2 id='SpFl'>Sap flow dataset</h2><span id='topic+SpFl'></span>

<h3>Description</h3>

<p>Exemple dataset exemple for the TDPanalysis package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SpFl
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 432 rows and 4 columns.</p>


<h3>Details</h3>

<p>&quot;DATE&quot; is dates in dd/mm/yyyy format. &quot;TIME&quot; is time in hh:mm:ss format, &quot;ID&quot; is sub-groups and &quot;tension&quot; is the measured tension from the TDP probe.
</p>

<hr>
<h2 id='SpWd_Area_calc'>Sapwood area calculation</h2><span id='topic+SpWd_Area_calc'></span>

<h3>Description</h3>

<p>Calculate sapwood area based on diameter, heartwood diameter and sapwood fraction
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SpWd_Area_calc(diam, SpWd_frac = 1, HtWd_diam = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="SpWd_Area_calc_+3A_diam">diam</code></td>
<td>
<p>Vector with diameter.</p>
</td></tr>
<tr><td><code id="SpWd_Area_calc_+3A_spwd_frac">SpWd_frac</code></td>
<td>
<p>Numerical (from 0 to 1). Indicate the fraction of the diameter which is sapwood</p>
</td></tr>
<tr><td><code id="SpWd_Area_calc_+3A_htwd_diam">HtWd_diam</code></td>
<td>
<p>Vector with diameter of the heartwood.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If SpWD_frac and HtWd_diam are both entered, the function will return an error. Units of &quot;diam&quot; and &quot;HtWd_diam&quot; should be the same.
</p>


<h3>Value</h3>

<p>Return a numerical vector containing the sapwood area
</p>


<h3>Examples</h3>

<pre><code class='language-R'>diam = c(12,14,16,13,15)
SpWd_Area_calc(diam=diam, SpWd_frac=0.2)
</code></pre>

<hr>
<h2 id='tens.to.sapflow'>Convert tension into sap flow density</h2><span id='topic+tens.to.sapflow'></span>

<h3>Description</h3>

<p>Use the Granier formula to convert tension into sap flow density using daily or mean Tmax
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tens.to.sapflow(tension, Tmax)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tens.to.sapflow_+3A_tension">tension</code></td>
<td>
<p>Vector with tension.</p>
</td></tr>
<tr><td><code id="tens.to.sapflow_+3A_tmax">Tmax</code></td>
<td>
<p>Vector with corresponding maximums of tension.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return a numerical vector containing the sap flow density
</p>


<h3>References</h3>

<p>Granier A. 1985. A new method of sap flow measurement in tree stems. Annales Des Sciences Forestieres 42(2): 193-200.
</p>
<p>Granier A. 1987. Evaluation of transpiration in a douglas-fir stand by means of sap flow measurements. Tree Physiology 3(4): 309-319.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Tmax = c(rep(2.5, times=5), rep(2.7, times=5), rep(3.2, times=5), rep(3.4, times=5))
tension = c(5:25)
tens.to.sapflow(tension=tension, Tmax=Tmax)
</code></pre>

<hr>
<h2 id='timecont'>Time conversion</h2><span id='topic+timecont'></span>

<h3>Description</h3>

<p>Convert time from the HH:MM:SS format to a numerical
</p>


<h3>Usage</h3>

<pre><code class='language-R'>timecont(Time, sep = ":")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="timecont_+3A_time">Time</code></td>
<td>
<p>Vector with time to convert.</p>
</td></tr>
<tr><td><code id="timecont_+3A_sep">sep</code></td>
<td>
<p>Character element containing regular expression(s) to use to splitting.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>time vector should be in the HH:MM:SS format.
</p>


<h3>Value</h3>

<p>Return a vector containing the corresponding time.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Time = c("14:30:00", "20:45:00", "05:00:00")
timecont(Time=Time)
</code></pre>

<hr>
<h2 id='Tmax.find'>Find Tmax</h2><span id='topic+Tmax.find'></span>

<h3>Description</h3>

<p>Find the daily maximum of tension
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Tmax.find(tension, dates, ID)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Tmax.find_+3A_tension">tension</code></td>
<td>
<p>Vector with tension.</p>
</td></tr>
<tr><td><code id="Tmax.find_+3A_dates">dates</code></td>
<td>
<p>Vector with dates in the DOY format.</p>
</td></tr>
<tr><td><code id="Tmax.find_+3A_id">ID</code></td>
<td>
<p>Character vector for specifying which group the tension is assigned to (e.g. trees)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Return a vector containing daily Tmax for each group specified in the ID argument
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tension = c(1:20)
dates = c(rep(102, times=10), rep(103, times=10))
ID = c(rep("A", times=5), rep("B", times=5), rep("A", times=5), rep("B", times=5))
Tmax.find(tension=tension, dates=dates, ID=ID)
</code></pre>

<hr>
<h2 id='Tmax.mean'>Calculate a mean of Tmax</h2><span id='topic+Tmax.mean'></span>

<h3>Description</h3>

<p>Calculate a mean Tmax for each sub-group
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Tmax.mean(df)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Tmax.mean_+3A_df">df</code></td>
<td>
<p>Data frame containing all Tmax for each sub-group.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The data frame should contain a column named &quot;Tmax&quot; whith all Tmax and a column named &quot;ID&quot; to identify which Tmax belong to which sug-group.
</p>


<h3>Value</h3>

<p>Return the inputed data frame with a new column names &quot;Tmax_mean&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ID = c(rep("A", times=5), rep("B", times=5), rep("A", times=5), rep("B", times=5))
Tmax = c(rep(2.5, times=5), rep(2.7, times=5), rep(3.2, times=5), rep(3.4, times=5))
DOY = c(rep(102, times=10), rep(103, times=10))
df &lt;- data.frame(DOY, ID, Tmax)
Tmax.mean(df)
</code></pre>

<hr>
<h2 id='Tmaxplot'>Plot the Tmax</h2><span id='topic+Tmaxplot'></span>

<h3>Description</h3>

<p>Plot the Tmax with indications of extreme values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Tmaxplot(df)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Tmaxplot_+3A_df">df</code></td>
<td>
<p>Data frame containing Tmax, identification of sub-groups and DOY.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The dataframe should contain at least 3 columns named &quot;Tmax&quot; (daily maximums of tension), &quot;DOY&quot; (day of the year) and &quot;ID&quot; (sub-groups). The red horizontal lines reprensents 3 times the inter-quartile range (3*IQR) of all the Tmax of the data. The blue horizontal line reprensent the 1.5*IQR without the Tmax outside the red lines.
</p>


<h3>Value</h3>

<p>Return a plot of Tmax by days for each sub-group
</p>


<h3>Examples</h3>

<pre><code class='language-R'>DOY = c(rep(102, times=10), rep(103, times=10))
ID = c(rep("A", times=5), rep("B", times=5), rep("A", times=5), rep("B", times=5))
Tmax = c(rep(0.7512, times=5), rep(0.7359, times=5),rep(0.7644, times=5),rep(0.7666, times=5))
df &lt;- data.frame(DOY, ID, Tmax, stringsAsFactors = FALSE)
Tmaxplot(df)
</code></pre>

<hr>
<h2 id='Wat.transp'>Calculate daily transpiration</h2><span id='topic+Wat.transp'></span>

<h3>Description</h3>

<p>Calculate daily transpiration for each sub-group inputed
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Wat.transp(Sapflow, days, ID)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Wat.transp_+3A_sapflow">Sapflow</code></td>
<td>
<p>Vector with sap flow.</p>
</td></tr>
<tr><td><code id="Wat.transp_+3A_days">days</code></td>
<td>
<p>Vector containg the days for which to calculate transpiration</p>
</td></tr>
<tr><td><code id="Wat.transp_+3A_id">ID</code></td>
<td>
<p>Character vector containing identification for each sub-group</p>
</td></tr>
</table>


<h3>Details</h3>

<p>!!Beware of the units!! The Granier formula usually convert tension into sap flow density (in kg.dm-2.h-1). So, you should first convert sap flow density into sap flow (in kg.h-1). Moreover, if you take measurment every 30 minutes sap flow should be corrected by dividing the value by 2.
</p>


<h3>Value</h3>

<p>Return a data frame with transpiration for each day and sub-group inputed
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ID = c(rep("A", times=5), rep("B", times=5), rep("A", times=5), rep("B", times=5))
Sapflow = c(rep(2.5, times=5), rep(2.7, times=5), rep(3.2, times=5), rep(3.4, times=5))
days = c(rep(102, times=10), rep(103, times=10))
Wat.transp(Sapflow=Sapflow, days=days, ID=ID)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
