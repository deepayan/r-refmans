<!DOCTYPE html><html lang="en"><head><title>Help for package SMARTbayesR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {SMARTbayesR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#LogOR'><p>Log-Odds Ratios for Embedded Dynamic Treatment Regimes</p></a></li>
<li><a href='#LogRR'><p>Log Risk Ratios for Embedded Dynamic Treatment Regimes</p></a></li>
<li><a href='#MCBUpperLimits'><p>Simultaneous Upper Credible Intervals</p></a></li>
<li><a href='#PosteriorEDTRProbs'><p>Convert Treatment Sequence Draws into Embedded Dynamic Treatment Regime Draws</p></a></li>
<li><a href='#PosteriorTrtSeqProb'><p>Treatment Sequence Response Probabilities from Dataset</p></a></li>
<li><a href='#PowerBayesian'><p>Power Calculation for a SMART with a Binary Outcome</p></a></li>
<li><a href='#RD'><p>Risk Differences for Embedded Dynamic Treatment Regimes</p></a></li>
<li><a href='#SimDesign1'><p>Simulate a SMART with Design 1</p></a></li>
<li><a href='#SMARTbayesR'><p>SMARTbayesR: A package for Bayesian computation of optimal embedded dynamic treatment regimes and sample size determination with binary outcomes</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Bayesian Set of Best Dynamic Treatment Regimes and Sample Size
in SMARTs for Binary Outcomes</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Permits determination of a set of 
    optimal dynamic treatment regimes and sample size for a SMART design 
    in the Bayesian setting with binary outcomes. Please see Artman (2020) &lt;<a href="https://doi.org/10.48550/arXiv.2008.02341">doi:10.48550/arXiv.2008.02341</a>&gt;.</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, utils, LaplacesDemon</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Author:</td>
<td>William Artman [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>William Artman &lt;William_Artman@URMC.Rochester.edu&gt;</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-09-30 18:34:09 UTC; Willi</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-09-30 19:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='LogOR'>Log-Odds Ratios for Embedded Dynamic Treatment Regimes</h2><span id='topic+LogOR'></span>

<h3>Description</h3>

<p>Computes the embedded dynamic treatment regime specific log-odds ratios.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>LogOR(
  response_prob = c(0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8),
  stage_one_trt_one_response_prob = 0.6,
  stage_one_trt_two_response_prob = 0.3,
  stage_one_trt_three_response_prob = 0.4,
  design = "general"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="LogOR_+3A_response_prob">response_prob</code></td>
<td>
<p>the probability of response for each of embedded treatment sequences. In the case of the design 1 SMART, there are 6,
for the general design there are 8, and for Design-3 there are 9 embedded treatment sequences.</p>
</td></tr>
<tr><td><code id="LogOR_+3A_stage_one_trt_one_response_prob">stage_one_trt_one_response_prob</code></td>
<td>
<p>the probability of response to stage-1 treatment given stage-1 treatment one.</p>
</td></tr>
<tr><td><code id="LogOR_+3A_stage_one_trt_two_response_prob">stage_one_trt_two_response_prob</code></td>
<td>
<p>the probability of response to stage-1 treatment given stage-1 treatment two.</p>
</td></tr>
<tr><td><code id="LogOR_+3A_stage_one_trt_three_response_prob">stage_one_trt_three_response_prob</code></td>
<td>
<p>the probability of response to stage-1 treatment given stage-1 treatment three (for design-3 only)</p>
</td></tr>
<tr><td><code id="LogOR_+3A_design">design</code></td>
<td>
<p>which SMART design: design-1 (ENGAGE-type), general, or design-3.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The embedded dynamic treatment regime specific log-OR.
</p>

<hr>
<h2 id='LogRR'>Log Risk Ratios for Embedded Dynamic Treatment Regimes</h2><span id='topic+LogRR'></span>

<h3>Description</h3>

<p>Computes the embedded dynamic treatment regime specific log risk-ratios.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>LogRR(
  response_prob = c(0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8),
  stage_one_trt_one_response_prob = 0.6,
  stage_one_trt_two_response_prob = 0.3,
  stage_one_trt_three_response_prob = 0.4,
  design = "general"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="LogRR_+3A_response_prob">response_prob</code></td>
<td>
<p>the probability of response for each of the embedded treatment sequences. 
In the case of the design 1 SMART there are 6, for the general design there are 8, and for design-3 there are 9.</p>
</td></tr>
<tr><td><code id="LogRR_+3A_stage_one_trt_one_response_prob">stage_one_trt_one_response_prob</code></td>
<td>
<p>the probability of response to stage-1 treatment given stage-1 treatment one.</p>
</td></tr>
<tr><td><code id="LogRR_+3A_stage_one_trt_two_response_prob">stage_one_trt_two_response_prob</code></td>
<td>
<p>the probability of response to stage-1 treatment given stage-1 treatment two.</p>
</td></tr>
<tr><td><code id="LogRR_+3A_stage_one_trt_three_response_prob">stage_one_trt_three_response_prob</code></td>
<td>
<p>the probability of response to stage-1 treatment given stage-1 treatment three (for design-3 only)</p>
</td></tr>
<tr><td><code id="LogRR_+3A_design">design</code></td>
<td>
<p>which SMART design: design-1 (ENGAGE-type), general, or design-3</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The embedded dynamic treatment regime specific log-Risk Ratios.
</p>

<hr>
<h2 id='MCBUpperLimits'>Simultaneous Upper Credible Intervals</h2><span id='topic+MCBUpperLimits'></span>

<h3>Description</h3>

<p>Compute simultaneous upper credible intervals from draws of embedded dynamic treatment regime probabilities given by the function argument &ldquo;thetadraws&rdquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MCBUpperLimits(thetadraws, alpha = 0.05, design = "design-1", type = "log-OR")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="MCBUpperLimits_+3A_thetadraws">thetadraws</code></td>
<td>
<p>draws of the embedded dynamic treatment regimes.</p>
</td></tr>
<tr><td><code id="MCBUpperLimits_+3A_alpha">alpha</code></td>
<td>
<p>the probability of excluding the true best EDTR from the set of best.</p>
</td></tr>
<tr><td><code id="MCBUpperLimits_+3A_design">design</code></td>
<td>
<p>specifies to which SMART design to apply function: either design-1, general, or design-3.</p>
</td></tr>
<tr><td><code id="MCBUpperLimits_+3A_type">type</code></td>
<td>
<p>summary statistic: log-OR, log-RR, or RD</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Upper 1-alpha level simultaneous credible interval limits for the embedded dynamic treatment regimes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- SimDesign1(sample_size=250,
                  response_prob = c(0.5,0.9,0.3,0.7,0.5,0.8),
                  stage_one_trt_one_response_prob = 0.7,
                  stage_one_trt_two_response_prob = 0.4)

x &lt;- PosteriorTrtSeqProb(niter = 1000, dat, design = "design-1")

thetadraws &lt;- PosteriorEDTRProbs(x, design = "design-1")

MCBUpperLimits(thetadraws,
               alpha = 0.05,
               design = "design-1",
               type = "log-OR")
</code></pre>

<hr>
<h2 id='PosteriorEDTRProbs'>Convert Treatment Sequence Draws into Embedded Dynamic Treatment Regime Draws</h2><span id='topic+PosteriorEDTRProbs'></span>

<h3>Description</h3>

<p>Apply Robins' G-computation formula to compute the embedded dynamic treatment regime draws from as a weighted average of treatment sequence and stage-1 response probability draws.
</p>
<p>If design is &quot;design-1&quot;, then compute for Design 1 SMART with 6 embedded treatment sequences and 4 embedded dynamic treatment regimes.
</p>
<p>If design is &quot;general&quot;, then compute for General SMART with 8 embedded treatment sequences and 8 embedded dynamic treatment regimes.
</p>
<p>If design is &quot;design-3&quot;, then compute for Design 3 SMART with 9 embedded treatment sequences and 6 embedded dynamic treatment regimes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PosteriorEDTRProbs(x, design = "design-1")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PosteriorEDTRProbs_+3A_x">x</code></td>
<td>
<p>A data frame consisting of draws from the posterior of the end of study response probabilities of each treatment sequence 
and of stage-1 response probabilities for each stage-1 treatment</p>
</td></tr>
<tr><td><code id="PosteriorEDTRProbs_+3A_design">design</code></td>
<td>
<p>Which SMART design to compute the posterior draws for: &quot;design-1&quot; or &quot;general&quot; or &quot;design-3&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For the General SMART design, x should have columns
p_1,
p_2,
p_3,
p_4,
p_5,
p_6,
p_7,
p_8,
s1, and s2.
</p>
<p>For the Design-1 SMART, x should have columns
p_1,
p_2,
p_3,
p_4,
p_5,
p_6,
s1, and s2.
</p>
<p>For the design-3 SMART, x should have columns
</p>
<p>p_1,
p_2,
p_3,
p_4,
p_5,
p_6,
p_7,
p_8,
p_9
s1, s2, and s3
</p>
<p>These are the posterior draws of the response probabilities for each treatment sequence and stage-1 response probability draws.
</p>
<p>s1 contains the draws of the stage-1 response probability for the first treatment, s2 is analogous for the second treatment and s3 for the third treatment.
</p>


<h3>Value</h3>

<p>Matrix of EDTR specific posterior response probability draws at the end of the study
There will be 4 columns for design-1, 8 columns for design general, and 6 columns for design-3 each corresponding to an EDTR. The number of rows will be the same as that of x.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- SimDesign1(sample_size=250,
                  response_prob = c(0.5,0.9,0.3,0.7,0.5,0.8),
                  stage_one_trt_one_response_prob = 0.7,
                  stage_one_trt_two_response_prob = 0.4)

x &lt;- PosteriorTrtSeqProb(niter = 1000, dat, design = "design-1")

PosteriorEDTRProbs(x, design = "design-1")
</code></pre>

<hr>
<h2 id='PosteriorTrtSeqProb'>Treatment Sequence Response Probabilities from Dataset</h2><span id='topic+PosteriorTrtSeqProb'></span>

<h3>Description</h3>

<p>Draws from the posterior of the treatment sequence response probabilities.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PosteriorTrtSeqProb(niter, dat, design = "design-1")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PosteriorTrtSeqProb_+3A_niter">niter</code></td>
<td>
<p>the number of posterior draws.</p>
</td></tr>
<tr><td><code id="PosteriorTrtSeqProb_+3A_dat">dat</code></td>
<td>
<p>a data frame (see Details).</p>
</td></tr>
<tr><td><code id="PosteriorTrtSeqProb_+3A_design">design</code></td>
<td>
<p>an indicator of which SMART design, design-1, general, or design-3.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>dat should contain the following columns:
</p>
<p>y, the end of study binary response indicator
</p>
<p>a1, the stage-1 treatment assignment indicator
</p>
<p>s, the end of stage-1 binary response indicator
</p>
<p>Additionally, for design-1 and design-3 it should contain
a2, the stage-2 treatment assignment indicator
</p>
<p>For the general design, it should contain
</p>
<p>a2r, stage-2 treatment assignment for responders to stage-1 treatment.
</p>
<p>a2nr, stage-2 treatment assignment for non-responders to stage-1 treatment.
</p>


<h3>Value</h3>

<p>Posterior draws of the probability of response at the end of the study for each embedded treatment sequence and
the posterior draws of the probability of response at the end of stage-1 for each stage-1 treatment.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- SimDesign1(sample_size=250,
                              response_prob = c(0.5,0.9,0.3,0.7,0.5,0.8),
                              stage_one_trt_one_response_prob = 0.7,
                              stage_one_trt_two_response_prob = 0.4)

PosteriorTrtSeqProb(niter = 1000, dat, design = "design-1")

</code></pre>

<hr>
<h2 id='PowerBayesian'>Power Calculation for a SMART with a Binary Outcome</h2><span id='topic+PowerBayesian'></span>

<h3>Description</h3>

<p>This function computes the power for a sequential multiple assignment randomized trial (SMART) of one of three designs: &quot;design-1&quot; or &quot;general&quot; or &quot;design-3&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PowerBayesian(
  design = "design-1",
  sample_size = 100,
  response_prob = c(0.5, 0.9, 0.3, 0.7, 0.5, 0.8),
  stage_one_trt_one_response_prob = 0.7,
  stage_one_trt_two_response_prob = 0.5,
  stage_one_trt_three_response_prob = 0.4,
  type = "log-OR",
  threshold,
  alpha = 0.05
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PowerBayesian_+3A_design">design</code></td>
<td>
<p>specifies for which SMART design to calculate the power: design-1, general, or design-3.</p>
</td></tr>
<tr><td><code id="PowerBayesian_+3A_sample_size">sample_size</code></td>
<td>
<p>the total SMART study sample size.</p>
</td></tr>
<tr><td><code id="PowerBayesian_+3A_response_prob">response_prob</code></td>
<td>
<p>a vector of probabilities of response for each of embedded treatment sequences.
In the case of design 1, there are 6, for general design there are 8, and for design-3 there are 9</p>
</td></tr>
<tr><td><code id="PowerBayesian_+3A_stage_one_trt_one_response_prob">stage_one_trt_one_response_prob</code></td>
<td>
<p>the probability of response to stage-1 treatment for first stage-1 treatment.</p>
</td></tr>
<tr><td><code id="PowerBayesian_+3A_stage_one_trt_two_response_prob">stage_one_trt_two_response_prob</code></td>
<td>
<p>the probability of response to stage-1 treatment for second stage-1 treatment.</p>
</td></tr>
<tr><td><code id="PowerBayesian_+3A_stage_one_trt_three_response_prob">stage_one_trt_three_response_prob</code></td>
<td>
<p>the probability of response to stage-1 treatment for third stage-1 treatment (for design-3 only).</p>
</td></tr>
<tr><td><code id="PowerBayesian_+3A_type">type</code></td>
<td>
<p>specifies log-OR, RD or log-RR.</p>
</td></tr>
<tr><td><code id="PowerBayesian_+3A_threshold">threshold</code></td>
<td>
<p>minimum detectable difference between each EDTR and the best</p>
</td></tr>
<tr><td><code id="PowerBayesian_+3A_alpha">alpha</code></td>
<td>
<p>probability of excluding optimal embedded dynamic treatment regime</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The power to exclude embedded dynamic treatment regimes bigger than threshold from the set of best.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
PowerBayesian(
  design = "design-1",
  sample_size = 100,
  response_prob = c(0.5, 0.9, 0.3, 0.7, 0.5, 0.8),
  stage_one_trt_one_response_prob = 0.7,
  stage_one_trt_two_response_prob = 0.5,
  type="log-OR",
  threshold=0.2
)

PowerBayesian(
  design = "general",
  sample_size = 250,
  response_prob = c(0.5, 0.9, 0.7, 0.2, 0.3, 0.8, 0.4, 0.7),
  stage_one_trt_one_response_prob = 0.7,
  stage_one_trt_two_response_prob = 0.5,
  type="log-OR",
  threshold=0.2
)

</code></pre>

<hr>
<h2 id='RD'>Risk Differences for Embedded Dynamic Treatment Regimes</h2><span id='topic+RD'></span>

<h3>Description</h3>

<p>Computes the embedded dynamic treatment regime specific risk differences with the best.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RD(
  response_prob = c(0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8),
  stage_one_trt_one_response_prob = 0.6,
  stage_one_trt_two_response_prob = 0.3,
  stage_one_trt_three_response_prob = 0.4,
  design = "general"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="RD_+3A_response_prob">response_prob</code></td>
<td>
<p>the probability of response for each of embedded treatment sequences. 
In the case of the design 1 SMART, there are 6, for the general design there are 8, and for design-3, there are 9.</p>
</td></tr>
<tr><td><code id="RD_+3A_stage_one_trt_one_response_prob">stage_one_trt_one_response_prob</code></td>
<td>
<p>the probability of response to stage-1 treatment given stage-1 treatment one.</p>
</td></tr>
<tr><td><code id="RD_+3A_stage_one_trt_two_response_prob">stage_one_trt_two_response_prob</code></td>
<td>
<p>the probability of response to stage-1 treatment given stage-1 treatment two.</p>
</td></tr>
<tr><td><code id="RD_+3A_stage_one_trt_three_response_prob">stage_one_trt_three_response_prob</code></td>
<td>
<p>the probability of response to stage-1 treatment given stage-1 treatment three (for design-3 only)</p>
</td></tr>
<tr><td><code id="RD_+3A_design">design</code></td>
<td>
<p>which SMART design: design-1 or general.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The embedded dynamic treatment regime specific risk differences.
</p>

<hr>
<h2 id='SimDesign1'>Simulate a SMART with Design 1</h2><span id='topic+SimDesign1'></span>

<h3>Description</h3>

<p>This function simulates a SMART with Design 1.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SimDesign1(
  sample_size = 250,
  response_prob = c(0.5, 0.5, 0.5, 0.8, 0.7, 0.5),
  stage_one_trt_one_response_prob = 0.7,
  stage_one_trt_two_response_prob = 0.4
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="SimDesign1_+3A_sample_size">sample_size</code></td>
<td>
<p>the total sample size</p>
</td></tr>
<tr><td><code id="SimDesign1_+3A_response_prob">response_prob</code></td>
<td>
<p>a vector of probabilities of response for each of the 6 embedded treatment sequences.</p>
</td></tr>
<tr><td><code id="SimDesign1_+3A_stage_one_trt_one_response_prob">stage_one_trt_one_response_prob</code></td>
<td>
<p>the probability of response to first stage-1 treatment.</p>
</td></tr>
<tr><td><code id="SimDesign1_+3A_stage_one_trt_two_response_prob">stage_one_trt_two_response_prob</code></td>
<td>
<p>the probability of response to second stage-1 treatment.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with treatment response indicators for each stage of treatment, a1 and a2,
end of stage-1 response indicator s, and final outcome y.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dat &lt;- SimDesign1(sample_size=250,
                             response_prob = c(0.5,0.9,0.3,0.7,0.5,0.8),
                             stage_one_trt_one_response_prob = 0.7,
                             stage_one_trt_two_response_prob = 0.4)

</code></pre>

<hr>
<h2 id='SMARTbayesR'>SMARTbayesR: A package for Bayesian computation of optimal embedded dynamic treatment regimes and sample size determination with binary outcomes</h2><span id='topic+SMARTbayesR'></span>

<h3>Description</h3>

<p>The SMARTbayesR package allows computation of a set of optimal embedded dynamic treatment regimes for a SMART. 
Furthermore, it allows power to be calculated for sample size determination.
</p>


<h3>SMARTbayesR functions</h3>

<p>SimDesign1 simulates a design-1 type SMART
</p>
<p>PosteriorTrtSeqProb draws from the posterior of the probabilities of response for each embedded treatment sequence and stage-1 response probabilities.
</p>
<p>PosteriorEDTRProbs converts treatment sequence end of study response probabilities, stage-1 response probabilities into end of study embedded dynamic treatment regime response probabilities.
</p>
<p>MCBUpperLimits calculates simultaneous credible intervals which determines the set of optimal dynamic treatment regimes
</p>
<p>LogOR computes the log-OR between each embedded dynamic treatment regime and the best.
</p>
<p>LogRR computes the log-RR between each embedded dynamic treatment regime and the best.
</p>
<p>RD computes the risk difference between each embedded dynamic treatment regime and the best.
</p>
<p>PowerBayesian computes the power in a SMART to exclude embedded dynamic treatment regimes inferior to the best by a specified amount.
</p>
<p>Please see Artman (2020) &lt;arXiv:2008.02341&gt; for details about the methodology.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
