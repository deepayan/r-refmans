<!DOCTYPE html><html lang="en"><head><title>Help for package bayesAB</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {bayesAB}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#banditize'><p>Create a multi-armed Bayesian bandit object.</p></a></li>
<li><a href='#bayesAB'><p>bayesAB: Fast Bayesian Methods for A/B Testing</p></a></li>
<li><a href='#bayesTest'><p>Fit a Bayesian model to A/B test data.</p></a></li>
<li><a href='#c.bayesTest'><p>Concatenate bayesTest objects</p></a></li>
<li><a href='#combine'><p>Combine two <code>bayesAB</code> objects given a binary function.</p></a></li>
<li><a href='#deployBandit'><p>Deploy a bayesBandit object as a JSON API.</p></a></li>
<li><a href='#grab'><p>Grab the supplied posterior from a bayesTest object</p></a></li>
<li><a href='#plot.bayesTest'><p>Plot bayesTest objects</p></a></li>
<li><a href='#plotBeta'><p>Plot the PDF of the Beta distribution.</p></a></li>
<li><a href='#plotDistributions'><p>Plot distributions to explore data and/or choose priors.</p></a></li>
<li><a href='#plotGamma'><p>Plot the PDF of the Gamma distribution.</p></a></li>
<li><a href='#plotInvGamma'><p>Plot the PDF of the Inverse Gamma distribution.</p></a></li>
<li><a href='#plotLogNormal'><p>Plot the PDF of the Log Normal distribution.</p></a></li>
<li><a href='#plotNormal'><p>Plot the PDF of the Normal distribution.</p></a></li>
<li><a href='#plotNormalInvGamma'><p>Plot the bivariate PDF of the Normal Inverse Gamma Distribution.</p></a></li>
<li><a href='#plotPareto'><p>Plot the PDF of the Pareto distribution.</p></a></li>
<li><a href='#plotPoisson'><p>Plot the PDF of the Poisson distribution.</p></a></li>
<li><a href='#rename'><p>Rename the posterior for a bayesTest object</p></a></li>
<li><a href='#summary.bayesTest'><p>Summarize bayesTest objects</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Fast Bayesian Methods for AB Testing</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-06-24</td>
</tr>
<tr>
<td>Description:</td>
<td>A suite of functions that allow the user to analyze A/B test
    data in a Bayesian framework. Intended to be a drop-in replacement for
    common frequentist hypothesis test such as the t-test and chi-sq test.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.12.4), ggplot2 (&ge; 3.2.0), methods, rlang (&ge;
0.4.0)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/FrankPortman/bayesAB">https://github.com/FrankPortman/bayesAB</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/FrankPortman/bayesAB/issues">https://github.com/FrankPortman/bayesAB/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown, magrittr, plumber (&ge; 0.3.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-06-24 20:49:03 UTC; fportman</td>
</tr>
<tr>
<td>Author:</td>
<td>Frank Portman [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Frank Portman &lt;frank1214@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-06-25 00:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='banditize'>Create a multi-armed Bayesian bandit object.</h2><span id='topic+banditize'></span>

<h3>Description</h3>

<p>Fit a multi-armed bandit object based on a bayesTest which can serve recommendations and adapt
to new data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>banditize(bT, param, higher_is_better = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="banditize_+3A_bt">bT</code></td>
<td>
<p>a bayesTest object</p>
</td></tr>
<tr><td><code id="banditize_+3A_param">param</code></td>
<td>
<p>which model parameter (posterior) to evaluate; defaults to first param</p>
</td></tr>
<tr><td><code id="banditize_+3A_higher_is_better">higher_is_better</code></td>
<td>
<p>is a higher value of 'param' equivalent to a better choice?</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>banditize</code> is an 'object-oriented' implementation of multi-armed bandits in <code>bayesAB</code>. It is useful in
conjunction with a Shiny app or Plumber deployment. The object itself is mutable and can adapt/learn from new data without having to
re-assign the variable.
</p>
<p>Comes with 5 methods:
</p>

<ul>
<li> <p><code>serveRecipe()</code>: serves a recipe to show your user based on samples from both posteriors.
</p>
</li>
<li> <p><code>setResults(results)</code>: set results for one or more recipes for one or more instances of feedback. Used to update bandit.
</p>
</li>
<li> <p><code>getBayesTest()</code>: returns most updated <code>bayesTest</code> object.
</p>
</li>
<li> <p><code>getOriginalTest()</code>: returns original <code>bayesTest</code> object without any updates.
</p>
</li>
<li> <p><code>getUpdates()</code>: returns a summarized version of all updates this bandit has processed.</p>
</li></ul>



<h3>Value</h3>

<p>A bayesBandit object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>A_binom &lt;- rbinom(100, 1, .5)
B_binom &lt;- rbinom(100, 1, .6)

AB1 &lt;- bayesTest(A_binom, B_binom, priors = c('alpha' = 1, 'beta' = 1), distribution = 'bernoulli')

binomialBandit &lt;- banditize(AB1)
binomialBandit$serveRecipe()
binomialBandit$setResults(list('A' = c(1, 0, 1, 0, 0), 'B' = c(0, 0, 0, 0, 1)))

</code></pre>

<hr>
<h2 id='bayesAB'>bayesAB: Fast Bayesian Methods for A/B Testing</h2><span id='topic+bayesAB'></span>

<h3>Description</h3>

<p>bayesAB provides a suite of functions that allow the user to analyze A/B test
data in a Bayesian framework. bayesAB is intended to be a drop-in replacement for
common frequentist hypothesis test such as the t-test and chi-sq test.
</p>


<h3>Details</h3>

<p>Bayesian methods provide several benefits over frequentist methods in the context of
A/B tests - namely in interpretability. Instead of p-values you get direct
probabilities on whether A is better than B (and by how much). Instead of point estimates
your posterior distributions are parametrized random variables which can be summarized
any number of ways. Bayesian tests are also immune to 'peeking' and are thus valid whenever
a test is stopped.
</p>
<p>The general bayesAB workflow is as follows:
</p>

<ul>
<li><p>  Decide how you want to parametrize your data (Poisson for counts of email submissions, Bernoulli for CTR on an ad, etc.)
</p>
</li>
<li><p>  Use our helper functions to decide on priors for your data (<a href="#topic+bayesTest">bayesTest</a>, <a href="#topic+plotDistributions">plotDistributions</a>)
</p>
</li>
<li><p>  Fit a <a href="#topic+bayesTest">bayesTest</a> object
</p>
 <ul>
<li><p> Optional: Use <a href="#topic+combine">combine</a> to munge together several <a href="#topic+bayesTest">bayesTest</a> objects together for an arbitrary / non-analytical target distribution</p>
</li></ul>

</li>
<li>  <p><code>print</code>, <a href="#topic+plot.bayesTest">plot.bayesTest</a>, and <a href="#topic+summary.bayesTest">summary.bayesTest</a> to interpret your results
</p>
 <ul>
<li><p> Determine whether to stop your test early given the Posterior Expected Loss in <code>summary</code> output</p>
</li></ul>
</li></ul>

<p>Optionally, use <a href="#topic+banditize">banditize</a> and/or <a href="#topic+deployBandit">deployBandit</a> to turn a pre-calculated (or empty) bayesTest into a multi-armed bandit that can serve
recipe recommendations and adapt as new data comes in.
</p>
<p>Note, while bayesAB was designed to exploit data related to A/B/etc tests, you can use the package to conduct Bayesian analysis on
virtually any vector of data, as long as it can be parametrized by the available functions.
</p>
<p>To learn more about bayesAB, start with the vignettes:
<code>browseVignettes(package = "bayesAB")</code>
</p>

<hr>
<h2 id='bayesTest'>Fit a Bayesian model to A/B test data.</h2><span id='topic+bayesTest'></span>

<h3>Description</h3>

<p>This function fits a Bayesian model to your A/B testing sample data. See <b>Details</b> for more information on usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayesTest(
  A_data,
  B_data,
  priors,
  n_samples = 1e+05,
  distribution = c("bernoulli", "normal", "lognormal", "poisson", "exponential",
    "uniform", "bernoulliC", "poissonC")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bayesTest_+3A_a_data">A_data</code></td>
<td>
<p>Vector of collected samples from recipe A</p>
</td></tr>
<tr><td><code id="bayesTest_+3A_b_data">B_data</code></td>
<td>
<p>Vector of collected samples from recipe B</p>
</td></tr>
<tr><td><code id="bayesTest_+3A_priors">priors</code></td>
<td>
<p>Named vector or named list providing priors as required by the specified distribution:
</p>

<ul>
<li><p>     For 'bernoulli' distribution <code>list("alpha" = val1, "beta" = val2)</code>
</p>
</li>
<li><p>     For 'normal' distribution <code>c("mu" = val1, "lambda" = val2, "alpha" = val3, "beta" = val4)</code>
</p>
</li>
<li><p>     For 'lognormal' distribution <code>c("mu" = val1, "lambda" = val2, "alpha" = val3, "beta" = val4)</code>
</p>
</li>
<li><p>     For 'poisson' distribution <code>c("shape" = val1, "rate" = val2)</code>
</p>
</li>
<li><p>     For 'exponential' distribution <code>list("shape" = val1, "rate" = val2)</code>
</p>
</li>
<li><p>     For 'uniform' distribution <code>c("xm" = val1, "alpha" = val2)</code>
</p>
</li>
<li><p>     For 'bernoulliC' distribution: same prior definitions as 'bernoulli'
</p>
</li>
<li><p>     For 'poissonC' distribution: same prior definitions as 'poisson'
</p>
</li></ul>

<p>See <a href="#topic+plotDistributions">plotDistributions</a> or the <em>Note</em> section of this help document for more info.</p>
</td></tr>
<tr><td><code id="bayesTest_+3A_n_samples">n_samples</code></td>
<td>
<p>Number of posterior samples to draw. Should be large enough for the distribution to converge. 1e5 is a good rule of thumb.
Not used for closed form tests.</p>
</td></tr>
<tr><td><code id="bayesTest_+3A_distribution">distribution</code></td>
<td>
<p>Distribution of underlying A/B test data.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>bayesTest</code> is the main driver function of the <b>bayesAB</b> package. The input takes two vectors of data,
corresponding to recipe A and recipe B of an A/B test. Order does not matter, except for interpretability of the final
plots and intervals/point estimates. The Bayesian model for each distribution uses conjugate priors which must
be specified at the time of invoking the function. Currently, there are <em>eight</em> supported distributions for the underlying data:
</p>

<ul>
<li><p> Bernoulli: If your data is well modeled by 1s and 0s, according to a specific probability <code>p</code> of a 1 occurring
</p>
<ul>
<li><p> For example, click-through-rate /conversions for a page
</p>
</li>
<li><p> Data <b>must</b> be in a {0, 1} format where 1 corresponds to a 'success' as per the Bernoulli distribution
</p>
</li>
<li><p> Uses a conjugate <code>Beta</code> distribution for the parameter <b>p</b> in the Bernoulli distribution
</p>
</li>
<li> <p><code>alpha</code> and <code>beta</code> must be set for a prior distribution over <b>p</b>
</p>
<ul>
<li><p> alpha = 1, beta = 1 can be used as a diffuse or uniform prior</p>
</li></ul>
</li></ul>

</li>
<li><p> Normal: If your data is well modeled by the normal distribution, with parameters <code class="reqn">\mu</code>, <code class="reqn">\sigma^2</code> controlling mean and variance
of the underlying distribution
</p>
<ul>
<li><p> Data <em>can</em> be negative if it makes sense for your experiment
</p>
</li>
<li><p> Uses a conjugate <code>NormalInverseGamma</code> distribution for the parameters <b><code class="reqn">\mu</code></b> and <b><code class="reqn">\sigma^2</code></b> in the 
Normal Distribution.
</p>
</li>
<li> <p><code>mu</code>, <code>lambda</code>, <code>alpha</code>, and <code>beta</code> must be set for prior
distributions over <b><code class="reqn">\mu, \sigma^2</code></b> in accordance with the parameters of the conjugate prior distributions:
</p>
<ul>
<li> <p><code class="reqn">\mu, \sigma^2</code> ~ NormalInverseGamma(mu, lambda, alpha, beta)</p>
</li></ul>

</li>
<li><p> This is a bivariate distribution (commonly used to model mean and variance of the normal distribution). 
You may want to experiment with both this distribution and the <code>plotNormal</code> and <code>plotInvGamma</code> outputs 
separately before arriving at a suitable set of priors for the Normal and LogNormal <code>bayesTest</code></p>
</li></ul>
<p>.
</p>
</li>
<li><p> LogNormal: If your data is well modeled by the log-normal distribution, with parameters <code class="reqn">\mu</code>, <code class="reqn">\sigma^2</code> as the <b>parameters</b>
of the corresponding log-normal distribution (log of data is ~ N(<code class="reqn">\mu</code>, <code class="reqn">\sigma^2</code>))
</p>
<ul>
<li><p> Support for a log-normal distribution is strictly positive
</p>
</li>
<li><p> The Bayesian model requires same conjugate priors on <code class="reqn">\mu</code>, <code class="reqn">\sigma^2</code> as for the Normal Distribution priors
</p>
</li>
<li><p> Note: The <code class="reqn">\mu</code> and <code class="reqn">\sigma^2</code> are not the mean/variance of lognormal numbers themselves but are rather the
corresponding parameters of the lognormal distribution. Thus, posteriors for the statistics 'Mean' and 'Variance'
are returned alongside 'Mu' and 'Sig_Sq' for interpretability.</p>
</li></ul>

</li>
<li><p> Poisson: If your data is well modeled by the Poisson distribution, with parameter <code class="reqn">\lambda</code> controlling the average number of events
per interval.
</p>
<ul>
<li><p> For example, pageviews per session
</p>
</li>
<li><p> Data <em>must</em> be strictly integral or 0.
</p>
</li>
<li><p> Uses a conjugate <code>Gamma</code> distribution for the parameter <b><code class="reqn">\lambda</code></b> in the Poisson Distribution
</p>
</li>
<li> <p><code>shape</code> and <code>rate</code> must be set for prior distribution over <code class="reqn">\lambda</code></p>
</li></ul>

</li>
<li><p> Exponential: If your data is well modeled by the Exponential distribution, with parameter <code class="reqn">\lambda</code> controlling the
rate of decay.
</p>
<ul>
<li><p> For example, time spent on a page or customers' LTV
</p>
</li>
<li><p> Data <em>must</em> be strictly &gt;= 0
</p>
</li>
<li><p> Uses a conjugate <code>Gamma</code> distribution for the parameter <b><code class="reqn">\lambda</code></b> in the Exponential Distribution
</p>
</li>
<li> <p><code>shape</code> and <code>rate</code> must be set for prior distribution over <code class="reqn">\lambda</code></p>
</li></ul>

</li>
<li><p> Uniform: If your data is well modeled by the Uniform distribution, with parameter <code class="reqn">\theta</code> controlling the <em>max</em> value.
</p>
<ul>
<li><p> bayesAB has only implemented Uniform(0, <code class="reqn">\theta</code>) forms
</p>
</li>
<li><p> For example, estimating max/total inventory size from individually numbered snapshots
</p>
</li>
<li><p> Data <em>must</em> be strictly &gt; 0
</p>
</li>
<li><p> Uses a conjugate <code>Pareto</code> distribution for the parameter <b><code class="reqn">\theta</code></b> in the Uniform(0, <code class="reqn">\theta</code>) Distribution
</p>
</li>
<li> <p><code>xm</code> and <code>alpha</code> must be set for prior distribution over <code class="reqn">\theta</code></p>
</li></ul>

</li>
<li><p> BernoulliC: Closed form (computational) calculation of the 'bernoulli' bayesTest. Same priors are required.
</p>
</li>
<li><p> PoissonC: Closed form (computational) calculation of the 'poisson' bayesTest. Same priors are required.
</p>
</li></ul>



<h3>Value</h3>

<p>A <code>bayesTest</code> object of the appropriate distribution class.
</p>


<h3>Note</h3>

<p>For 'closed form' tests, you do not get a distribution over the posterior, but simply P(A &gt; B) for the parameter in question.
</p>
<p>Choosing priors correctly is very important. Please see http://fportman.com/writing/bayesab-0-dot-7-0-plus-a-primer-on-priors/ for a detailed example of choosing priors
within bayesAB. Here are some ways to leverage objective/diffuse (assigning equal probability to all values) priors:
</p>
<ul>
<li> <p><code>Beta</code>(1, 1)
</p>
</li>
<li> <p><code>Gamma</code>(eps, eps) ~ <code>Gamma</code>(.00005, .00005) will be effectively diffuse
</p>
</li>
<li> <p><code>InvGamma</code>(eps, eps) ~ <code>InvGamma</code>(.00005, .00005) will be effectively diffuse
</p>
</li>
<li> <p><code>Pareto</code>(eps, eps) ~ <code>Pareto</code>(.005, .005) will be effectively diffuse</p>
</li></ul>

<p>Keep in mind that the Prior Plots for bayesTest's run with diffuse priors may not plot correctly as they will not be truncated as they
approach infinity. See <a href="#topic+plot.bayesTest">plot.bayesTest</a> for how to turn off the Prior Plots.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>A_binom &lt;- rbinom(100, 1, .5)
B_binom &lt;- rbinom(100, 1, .6)

A_norm &lt;- rnorm(100, 6, 1.5)
B_norm &lt;- rnorm(100, 5, 2.5)

AB1 &lt;- bayesTest(A_binom, B_binom, 
                 priors = c('alpha' = 1, 'beta' = 1), 
                 distribution = 'bernoulli')
AB2 &lt;- bayesTest(A_norm, B_norm,
                 priors = c('mu' = 5, 'lambda' = 1, 'alpha' = 3, 'beta' = 1), 
                 distribution = 'normal')

print(AB1)
summary(AB1)
plot(AB1)

summary(AB2)

# Create a new variable that is the probability multiiplied
# by the normally distributed variable (expected value of something)

    AB3 &lt;- combine(AB1, AB2, f = `*`, params = c('Probability', 'Mu'), newName = 'Expectation')

    print(AB3)
    summary(AB3)
    plot(AB3)

</code></pre>

<hr>
<h2 id='c.bayesTest'>Concatenate bayesTest objects</h2><span id='topic+c.bayesTest'></span>

<h3>Description</h3>

<p>Concatenate method for objects of class &quot;bayesTest&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bayesTest'
c(..., errorCheck = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="c.bayesTest_+3A_...">...</code></td>
<td>
<p><code>bayesTest</code> objects</p>
</td></tr>
<tr><td><code id="c.bayesTest_+3A_errorcheck">errorCheck</code></td>
<td>
<p>check that objects can be concatenated? Setting this to <code>FALSE</code> can have unintended
effects if the <code>bayesTest</code> objects have different params but can have some speedups
if you are sure the objects are of the same type.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>bayesTest</code> object with concatenated posteriors.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>A_pois &lt;- rpois(100, 5)
B_pois &lt;- rpois(100, 4.7)

AB1 &lt;- bayesTest(A_pois, B_pois, priors = c('shape' = 25, 'rate' = 5), distribution = 'poisson')
AB2 &lt;- bayesTest(A_pois, B_pois, priors = c('shape' = 25, 'rate' = 5), distribution = 'poisson')
c(AB1, AB2)

</code></pre>

<hr>
<h2 id='combine'>Combine two <code>bayesAB</code> objects given a binary function.</h2><span id='topic+combine'></span>

<h3>Description</h3>

<p>Combine two (or any number, in succession) <code>bayesTest</code> objects into a new arbitrary posterior distribution.
The resulting object is of the same class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>combine(bT1, bT2, f = `+`, params, newName)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="combine_+3A_bt1">bT1</code></td>
<td>
<p>a bayesTest object</p>
</td></tr>
<tr><td><code id="combine_+3A_bt2">bT2</code></td>
<td>
<p>a bayesTest object</p>
</td></tr>
<tr><td><code id="combine_+3A_f">f</code></td>
<td>
<p>a binary function (f(x, y)) used to combine posteriors from bT1 to bT2</p>
</td></tr>
<tr><td><code id="combine_+3A_params">params</code></td>
<td>
<p>a character vector of length 2, corresponding to names of the posterior parameters you want to combine;
defaults to first posterior parameter if not supplied</p>
</td></tr>
<tr><td><code id="combine_+3A_newname">newName</code></td>
<td>
<p>a string indicating the name of the new 'posterior' in the resulting object;
defaults to string representation of f(params[1], params[2])</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>bayesTest</code> object with the newly combined posterior samples.
</p>


<h3>Note</h3>

<p>The generics '+.bayesTest', '*.bayesTest', '-.bayesTest', and '/.bayesTest' are shorthand for
combine(f = '+'), combine(f = '*'), combine(f = '-'), and combine(f = '/').
</p>


<h3>See Also</h3>

<p><code><a href="#topic+grab">grab</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>A_binom &lt;- rbinom(100, 1, .5)
B_binom &lt;- rbinom(100, 1, .6)

A_norm &lt;- rnorm(100, 6, 1.5)
B_norm &lt;- rnorm(100, 5, 2.5)

AB1 &lt;- bayesTest(A_binom, B_binom,
                 priors = c('alpha' = 1, 'beta' = 1),
                 distribution = 'bernoulli')

AB2 &lt;- bayesTest(A_norm, B_norm,
                 priors = c('mu' = 5, 'lambda' = 1, 'alpha' = 3, 'beta' = 1),
                 distribution = 'normal')

AB3 &lt;- combine(AB1, AB2, f = `*`, params = c('Probability', 'Mu'), newName = 'Expectation')
# Equivalent to
AB3 &lt;- AB1 * grab(AB2, 'Mu')

# To get the same posterior name as well
AB3 &lt;- rename(AB3, 'Expectation')

# Dummy example
weirdVariable &lt;- (AB1 + AB2) * (AB2 / AB1)
weirdVariable &lt;- rename(weirdVariable, 'confusingParam')

print(AB3)
summary(AB3)
plot(AB3)
</code></pre>

<hr>
<h2 id='deployBandit'>Deploy a bayesBandit object as a JSON API.</h2><span id='topic+deployBandit'></span>

<h3>Description</h3>

<p>Turn your bayesBandit object into an API and serve/update requests through HTTP.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deployBandit(bandit, port = 8000)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="deployBandit_+3A_bandit">bandit</code></td>
<td>
<p>a bayesBandit object</p>
</td></tr>
<tr><td><code id="deployBandit_+3A_port">port</code></td>
<td>
<p>port to deploy on</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>deployBandit</code> turns a Bayesian bandit into a JSON API that accepts curl requests. Two of the five methods of
bayesBandit classes are exposed: <code>serveRecipe</code> and <code>setResults</code>. Assuming the API is deployed on <code>localhost</code> this is an
example of how it would be hit:
</p>
<p style="text-align: center;"><code class="reqn">curl http://localhost:8000/serveRecipe</code>
</p>

<p style="text-align: center;"><code class="reqn">curl --data '{"A":[1, 0, 1, 1], "B":[0, 0, 0, 1]}' http://localhost:8000/setResults</code>
</p>



<h3>Value</h3>

<p>An active <code>http</code> process on some port.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>A_binom &lt;- rbinom(100, 1, .5)
B_binom &lt;- rbinom(100, 1, .6)

AB1 &lt;- bayesTest(A_binom, B_binom, priors = c('alpha' = 1, 'beta' = 1), distribution = 'bernoulli')

binomialBandit &lt;- banditize(AB1)
## Not run: deployBandit(binomialBandit)

</code></pre>

<hr>
<h2 id='grab'>Grab the supplied posterior from a bayesTest object</h2><span id='topic+grab'></span>

<h3>Description</h3>

<p>Grab the supplied posterior from a bayesTest object, returning another bayesTest object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grab(bT, posterior)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="grab_+3A_bt">bT</code></td>
<td>
<p>a bayesTest object</p>
</td></tr>
<tr><td><code id="grab_+3A_posterior">posterior</code></td>
<td>
<p>the name of a posterior in that object (string)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>bayesTest</code> object with the posterior parameter isolated
</p>


<h3>See Also</h3>

<p><code><a href="#topic+combine">combine</a></code>
</p>

<hr>
<h2 id='plot.bayesTest'>Plot bayesTest objects</h2><span id='topic+plot.bayesTest'></span>

<h3>Description</h3>

<p>Plot method for objects of class &quot;bayesTest&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bayesTest'
plot(
  x,
  percentLift = rep(0, length(x$posteriors)),
  priors = TRUE,
  posteriors = TRUE,
  samples = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.bayesTest_+3A_x">x</code></td>
<td>
<p>an object of class &quot;bayesTest&quot;</p>
</td></tr>
<tr><td><code id="plot.bayesTest_+3A_percentlift">percentLift</code></td>
<td>
<p>a vector of length(x$posteriors). Each entry corresponds to the percent lift ((A - B) / B) to plot for for
the respective posterior in x. Note this is on a 'point' scale. percentLift = 5 implies you want to test for a 5% lift.</p>
</td></tr>
<tr><td><code id="plot.bayesTest_+3A_priors">priors</code></td>
<td>
<p>logical indicating whether prior plots should be generated.</p>
</td></tr>
<tr><td><code id="plot.bayesTest_+3A_posteriors">posteriors</code></td>
<td>
<p>logical indicating whether posterior plots should be generated.</p>
</td></tr>
<tr><td><code id="plot.bayesTest_+3A_samples">samples</code></td>
<td>
<p>logical indicating whether sample plots should be generated.</p>
</td></tr>
<tr><td><code id="plot.bayesTest_+3A_...">...</code></td>
<td>
<p>graphics parameters to be passed to the plotting routines. (For example <code>p</code>, in prior plots)</p>
</td></tr>
</table>


<h3>Note</h3>

<p>You can either directly plot a bayesTest object (in which case it will plot interactively), or you can save the plot
object to a variable and extract what you need separately. If extracted, you can treat it like any <code>ggplot2</code> object and
modify it accordingly.
</p>
<p>Plots are slightly truncated on the extremes to solve the general case of potentially long tail-ends.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>A_pois &lt;- rpois(100, 5)
B_pois &lt;- rpois(100, 4.7)

AB1 &lt;- bayesTest(A_pois, B_pois, priors = c('shape' = 25, 'rate' = 5), distribution = 'poisson')

plot(AB1)
plot(AB1, percentLift = 5)


    p &lt;- plot(AB1)
    p$posteriors$Lambda

## Not run: p$posteriors$Lambda + ggtitle('yolo') # modify ggplot2 object directly

</code></pre>

<hr>
<h2 id='plotBeta'>Plot the PDF of the Beta distribution.</h2><span id='topic+plotBeta'></span>

<h3>Description</h3>

<p>Plot the PDF of the Beta distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotBeta(alpha, beta)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotBeta_+3A_alpha">alpha</code></td>
<td>
<p><code class="reqn">\alpha</code> parameter of the Beta distribution.</p>
</td></tr>
<tr><td><code id="plotBeta_+3A_beta">beta</code></td>
<td>
<p><code class="reqn">\beta</code> parameter of the Beta distribution.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The PDF of Beta(<code class="reqn">\alpha</code>, <code class="reqn">\beta</code>).
</p>


<h3>Note</h3>

<p>The output can be treated like any <code>ggplot2</code> object and modified accordingly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plotBeta(1, 1)
plotBeta(2, 5)
## Not run: plotBeta(2, 5) + ggtitle('I hate the default title!')
</code></pre>

<hr>
<h2 id='plotDistributions'>Plot distributions to explore data and/or choose priors.</h2><span id='topic+plotDistributions'></span>

<h3>Description</h3>

<p>These are helper functions to help explore data and/or choose priors. Click further for more details.
</p>

<ul>
<li> <p><a href="#topic+plotBeta">plotBeta</a>
</p>
</li>
<li> <p><a href="#topic+plotGamma">plotGamma</a>
</p>
</li>
<li> <p><a href="#topic+plotInvGamma">plotInvGamma</a>
</p>
</li>
<li> <p><a href="#topic+plotLogNormal">plotLogNormal</a>
</p>
</li>
<li> <p><a href="#topic+plotNormal">plotNormal</a>
</p>
</li>
<li> <p><a href="#topic+plotPareto">plotPareto</a>
</p>
</li>
<li> <p><a href="#topic+plotPoisson">plotPoisson</a>
</p>
</li></ul>



<h3>Note</h3>

<p>Choosing priors correctly is very important. Please see http://fportman.com/writing/bayesab-0-dot-7-0-plus-a-primer-on-priors/ for a detailed example of choosing priors
within bayesAB. Here are some ways to leverage objective/diffuse (assigning equal probability to all values) priors:
</p>
<ul>
<li> <p><code>Beta</code>(1, 1)
</p>
</li>
<li> <p><code>Gamma</code>(eps, eps) ~ <code>Gamma</code>(.00005, .00005) will be effectively diffuse
</p>
</li>
<li> <p><code>InvGamma</code>(eps, eps) ~ <code>InvGamma</code>(.00005, .00005) will be effectively diffuse
</p>
</li>
<li> <p><code>Pareto</code>(eps, eps) ~ <code>Pareto</code>(.005, .005) will be effectively diffuse</p>
</li></ul>

<p>Keep in mind that the Prior Plots for bayesTest's run with diffuse priors may not plot correctly as they will not be truncated as they
approach infinity. See <a href="#topic+plot.bayesTest">plot.bayesTest</a> for how to turn off the Prior Plots.
</p>
<p>plot... functions are generated programmatically so the function calls in
their <code>body</code> will be substituted directly
</p>

<hr>
<h2 id='plotGamma'>Plot the PDF of the Gamma distribution.</h2><span id='topic+plotGamma'></span>

<h3>Description</h3>

<p>Plot the PDF of the Gamma distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotGamma(shape, rate)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotGamma_+3A_shape">shape</code></td>
<td>
<p>shape (<code class="reqn">\alpha</code>) parameter of the Gamma distribution.</p>
</td></tr>
<tr><td><code id="plotGamma_+3A_rate">rate</code></td>
<td>
<p>rate (<code class="reqn">\beta</code>) parameter of the Gamma distribution.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note: We use the shape/rate parametrization of Gamma. See https://en.wikipedia.org/wiki/Gamma_distribution for details.
</p>


<h3>Value</h3>

<p>The PDF of Gamma(shape, rate).
</p>


<h3>Note</h3>

<p>The output can be treated like any <code>ggplot2</code> object and modified accordingly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plotGamma(1, 1)
plotGamma(2, 5)
## Not run: plotGamma(2, 5) + ggtitle('I hate the default title!')
</code></pre>

<hr>
<h2 id='plotInvGamma'>Plot the PDF of the Inverse Gamma distribution.</h2><span id='topic+plotInvGamma'></span>

<h3>Description</h3>

<p>Plot the PDF of the Inverse Gamma distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotInvGamma(shape, scale)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotInvGamma_+3A_shape">shape</code></td>
<td>
<p>shape parameter of the Inverse Gamma distribution.</p>
</td></tr>
<tr><td><code id="plotInvGamma_+3A_scale">scale</code></td>
<td>
<p>scale parameter of the Inverse Gamma distribution.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The PDF of InvGamma(shape, scale).
</p>


<h3>Note</h3>

<p>The output can be treated like any <code>ggplot2</code> object and modified accordingly.
Also note that the <code>scale</code> parameter of the Inverse Gamma distribution is
analogous to the <code>beta</code> (or rate) parameter of the regular Gamma distribution.
The <code>beta</code> parameter of the <a href="#topic+plotNormalInvGamma">plotNormalInvGamma</a> distribution is analogous
to the <code>scale</code> parameter here.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plotInvGamma(2, 4)
plotInvGamma(1, 17)
## Not run: plotInvGamma(1, 17) + ggtitle('I hate the default title!')
</code></pre>

<hr>
<h2 id='plotLogNormal'>Plot the PDF of the Log Normal distribution.</h2><span id='topic+plotLogNormal'></span>

<h3>Description</h3>

<p>Plot the PDF of the Log Normal distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotLogNormal(mu, sigma)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotLogNormal_+3A_mu">mu</code></td>
<td>
<p><code class="reqn">\mu</code> parameter of the Log Normal distribution.</p>
</td></tr>
<tr><td><code id="plotLogNormal_+3A_sigma">sigma</code></td>
<td>
<p><code class="reqn">\sigma</code> parameter of the Log Normal distribution.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The PDF of Log Normal(<code class="reqn">\mu</code>, <code class="reqn">\sigma^2</code>).
</p>


<h3>Note</h3>

<p>The output can be treated like any <code>ggplot2</code> object and modified accordingly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plotLogNormal(1, 1)
plotLogNormal(2, .5)
## Not run: plotLogNormal(2, .5) + ggtitle('I hate the default title!')
</code></pre>

<hr>
<h2 id='plotNormal'>Plot the PDF of the Normal distribution.</h2><span id='topic+plotNormal'></span>

<h3>Description</h3>

<p>Plot the PDF of the Normal distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotNormal(mu, sd)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotNormal_+3A_mu">mu</code></td>
<td>
<p><code class="reqn">\mu</code> parameter of the Normal distribution.</p>
</td></tr>
<tr><td><code id="plotNormal_+3A_sd">sd</code></td>
<td>
<p><code class="reqn">\sigma</code> parameter of the Normal distribution.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The PDF of Normal(<code class="reqn">\mu</code>, <code class="reqn">\sigma^2</code>).
</p>


<h3>Note</h3>

<p>The output can be treated like any <code>ggplot2</code> object and modified accordingly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plotNormal(1, 1)
plotNormal(2, 5)
## Not run: plotNormal(2, 5) + ggtitle('I hate the default title!')
</code></pre>

<hr>
<h2 id='plotNormalInvGamma'>Plot the bivariate PDF of the Normal Inverse Gamma Distribution.</h2><span id='topic+plotNormalInvGamma'></span>

<h3>Description</h3>

<p>Plot the bivariate PDF of the Normal Inverse Gamma Distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotNormalInvGamma(mu, lambda, alpha, beta)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotNormalInvGamma_+3A_mu">mu</code></td>
<td>
<p><code class="reqn">\mu</code> parameter of the Normal Inverse Gamma distribution.</p>
</td></tr>
<tr><td><code id="plotNormalInvGamma_+3A_lambda">lambda</code></td>
<td>
<p><code class="reqn">\lambda</code> parameter of the Normal Inverse Gamma distribution.</p>
</td></tr>
<tr><td><code id="plotNormalInvGamma_+3A_alpha">alpha</code></td>
<td>
<p><code class="reqn">\alpha</code> parameter of the Normal Inverse Gamma distribution.</p>
</td></tr>
<tr><td><code id="plotNormalInvGamma_+3A_beta">beta</code></td>
<td>
<p><code class="reqn">\beta</code> parameter of the Normal Inverse Gamma distribution.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The PDF of NormalInverseGamma(mu, lambda, alpha, beta)
</p>


<h3>Note</h3>

<p>This is a bivariate distribution (commonly used to model mean and
variance of the normal distribution) and returns a 2d contour
plot instead of a typical one dimensional PDF. You may want to experiment
with both this distribution and the <code>plotNormal</code> and <code>plotInvGamma</code>
outputs separately before arriving at a suitable set of priors for the
Normal and LogNormal <code>bayesTest</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plotNormalInvGamma(3, 1, 1, 1)
</code></pre>

<hr>
<h2 id='plotPareto'>Plot the PDF of the Pareto distribution.</h2><span id='topic+plotPareto'></span>

<h3>Description</h3>

<p>Plot the PDF of the Pareto distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotPareto(xm, alpha)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotPareto_+3A_xm">xm</code></td>
<td>
<p>xm parameter of the Pareto distribution.</p>
</td></tr>
<tr><td><code id="plotPareto_+3A_alpha">alpha</code></td>
<td>
<p>alpha parameter of the Pareto distribution.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The PDF of Pareto(xm, alpha).
</p>


<h3>Note</h3>

<p>The output can be treated like any <code>ggplot2</code> object and modified accordingly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plotPareto(1, 1)
plotPareto(5, 3)
## Not run: plotPareto(5, 3) + ggtitle('I hate the default title!')
</code></pre>

<hr>
<h2 id='plotPoisson'>Plot the PDF of the Poisson distribution.</h2><span id='topic+plotPoisson'></span>

<h3>Description</h3>

<p>Plot the PDF of the Poisson distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotPoisson(lambda)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotPoisson_+3A_lambda">lambda</code></td>
<td>
<p><code class="reqn">\lambda</code> parameter of the Poisson distribution.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The PDF of Poisson(<code class="reqn">\lambda</code>).
</p>


<h3>Note</h3>

<p>The output can be treated like any <code>ggplot2</code> object and modified accordingly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plotPoisson(1)
plotPoisson(5)
## Not run: plotPoisson(5) + ggtitle('I hate the default title!')
</code></pre>

<hr>
<h2 id='rename'>Rename the posterior for a bayesTest object</h2><span id='topic+rename'></span>

<h3>Description</h3>

<p>Rename the posterior param for a bayesTest object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rename(bT, newName)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rename_+3A_bt">bT</code></td>
<td>
<p>a bayesTest object</p>
</td></tr>
<tr><td><code id="rename_+3A_newname">newName</code></td>
<td>
<p>the new name you want for the posterior param (string)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>bayesTest</code> object with the posterior parameter renamed
</p>


<h3>See Also</h3>

<p><code><a href="#topic+combine">combine</a></code>
</p>

<hr>
<h2 id='summary.bayesTest'>Summarize bayesTest objects</h2><span id='topic+summary.bayesTest'></span>

<h3>Description</h3>

<p>Summary method for objects of class &quot;bayesTest&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bayesTest'
summary(
  object,
  percentLift = rep(0, length(object$posteriors)),
  credInt = rep(0.9, length(object$posteriors)),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.bayesTest_+3A_object">object</code></td>
<td>
<p>an object of class &quot;bayesTest&quot;</p>
</td></tr>
<tr><td><code id="summary.bayesTest_+3A_percentlift">percentLift</code></td>
<td>
<p>a vector of length(x$posteriors). Each entry corresponds to the percent lift ((A - B) / B) to summarize for for
the respective posterior in x. Note this is on a 'point' scale. percentLift = 5 implies you want to test for a 5% lift.</p>
</td></tr>
<tr><td><code id="summary.bayesTest_+3A_credint">credInt</code></td>
<td>
<p>a vector of length(x$posteriors). Each entry corresponds to the width of credible interval of (A - B) / B to calculate for
the respective posterior in x. Also on a 'point' scale.</p>
</td></tr>
<tr><td><code id="summary.bayesTest_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>summaryBayesTest</code> object which contains summaries of the Posterior distributions, direct probabilities that A &gt; B (by
<code>percentLift</code>), credible intervals on (A - B) / B, and the Posterior Expected Loss on all estimated parameters.
</p>


<h3>Note</h3>

<p>The Posterior Expected Loss (https://en.wikipedia.org/wiki/Bayes_estimator) is a good indicator of when to end a Bayesian
AB test. If the PEL is lower than the absolute delta of the minimum effect you wish to detect, the test can be reasonably be stopped.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>A_pois &lt;- rpois(100, 5)
B_pois &lt;- rpois(100, 4.7)

AB1 &lt;- bayesTest(A_pois, B_pois, priors = c('shape' = 25, 'rate' = 5), distribution = 'poisson')

summary(AB1)
summary(AB1, percentLift = 10, credInt = .95)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
