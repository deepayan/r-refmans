<!DOCTYPE html><html><head><title>Help for package kntnr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {kntnr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#kntn_auth'><p>Authorization Header for 'kintone'</p></a></li>
<li><a href='#kntn_file'><p>'kintone' File API</p></a></li>
<li><a href='#kntn_parse'><p>Parse 'kintone' API Response</p></a></li>
<li><a href='#kntn_record'><p>'kintone' Record API</p></a></li>
<li><a href='#kntn_unnest'><p>Unnest 'kintone' Records</p></a></li>
<li><a href='#kntnr'><p>R Client for 'kintone' API</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>R Client for 'kintone' API</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.4</td>
</tr>
<tr>
<td>Description:</td>
<td>Retrieve data from 'kintone' (<a href="https://www.kintone.com/">https://www.kintone.com/</a>) via its API.
    'kintone' is an enterprise application platform.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://yutannihilation.github.io/kntnr/">https://yutannihilation.github.io/kntnr/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/yutannihilation/kntnr/issues">https://github.com/yutannihilation/kntnr/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>base64enc, dplyr (&ge; 0.7.0), httr, jsonlite, lubridate,
methods, purrr (&ge; 0.2.3), rlang, rstudioapi, stringr, tibble,
tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-04-08 12:50:19 UTC; yutani</td>
</tr>
<tr>
<td>Author:</td>
<td>Hiroaki Yutani <a href="https://orcid.org/0000-0002-3385-7233"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hiroaki Yutani &lt;yutani.ini@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-04-08 13:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='kntn_auth'>Authorization Header for 'kintone'</h2><span id='topic+kntn_auth'></span><span id='topic+kntn_get_authorization_header'></span><span id='topic+kntn_set_auth'></span><span id='topic+kntn_unset_auth'></span>

<h3>Description</h3>

<p><code>kntn_get_authorization_header()</code> constructs a header for authorization using <a href="httr.html#topic+add_headers">add_headers</a>.
<code>kntn_set_auth()</code> interactivery asks for the type of authentication and the credential and store
them as environmental variables <code>KNTN_URL</code>, <code>KNTN_AUTH_TYPE</code> and <code>KNTN_AUTH</code>.
If you want to avoid interaction, please manually set these.
<code>kntn_unset_auth()</code> unsets these environmental variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kntn_get_authorization_header()

kntn_set_auth(auth_type = c("password", "token"), overwrite = FALSE)

kntn_unset_auth()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kntn_auth_+3A_auth_type">auth_type</code></td>
<td>
<p>Type of Authentication. <code>password</code> uses username and password.
<code>token</code> uses per-app token.</p>
</td></tr>
<tr><td><code id="kntn_auth_+3A_overwrite">overwrite</code></td>
<td>
<p>If <code>TRUE</code>, overwrite the existing environmental variables.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://developer.kintone.io/hc/en-us/articles/212495188/#userauthentication">https://developer.kintone.io/hc/en-us/articles/212495188/#userauthentication</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# set KNTN_URL, KNTN_AUTH and KNTN_AUTH_TYPE interactively.
# By default, auth_type is password.
kntn_set_auth()

Sys.getenv(c("KNTN_URL", "KNTN_AUTH", "KNTN_AUTH_TYPE"))

# This will return `X-Cybozu-Authorization` header.
kntn_get_authorization_header()

# Clear environmental variables before trying to use another set of authorization info.
kntn_unset_auth()
kntn_set_auth(auth_type = "token")

# This will return `X-Cybozu-API-Token` header.
kntn_get_authorization_header()

# To avoid interaction, set these environmental variables manually.
Sys.setenv("KNTN_URL" = "https://example.cybozu.com/")
Sys.setenv("KNTN_AUTH" = "abcdefg")
Sys.setenv("KNTN_AUTH_TYPE" = "token")

## End(Not run)
</code></pre>

<hr>
<h2 id='kntn_file'>'kintone' File API</h2><span id='topic+kntn_file'></span>

<h3>Description</h3>

<p>Get a file from kintone API and parse it with <a href="httr.html#topic+content">content</a>. If you want to parse it by yourself,
specify <code>as = "raw"</code> or <code>as = "text"</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kntn_file(fileKey, verbose = FALSE, as = NULL, type = NULL, encoding = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kntn_file_+3A_filekey">fileKey</code></td>
<td>
<p>File key.</p>
</td></tr>
<tr><td><code id="kntn_file_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code>, output logs verbosely.</p>
</td></tr>
<tr><td><code id="kntn_file_+3A_as">as</code></td>
<td>
<p><code>as</code> parameter passed to <a href="httr.html#topic+content">content</a>.</p>
</td></tr>
<tr><td><code id="kntn_file_+3A_type">type</code></td>
<td>
<p><code>type</code> parameter passed to <a href="httr.html#topic+content">content</a>.</p>
</td></tr>
<tr><td><code id="kntn_file_+3A_encoding">encoding</code></td>
<td>
<p><code>encoding</code> parameter passed to <a href="httr.html#topic+content">content</a>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://developer.kintone.io/hc/en-us/articles/212494468/">https://developer.kintone.io/hc/en-us/articles/212494468/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
kntn_set_auth()
app &lt;- 10

# get a single record with a file attachment field
d &lt;- kntn_record(app, id = 1)

f &lt;- kntn_file(fileKey = x$Attachment[[1]]$fileKey[1])

## End(Not run)

</code></pre>

<hr>
<h2 id='kntn_parse'>Parse 'kintone' API Response</h2><span id='topic+kntn_parse'></span><span id='topic+kntn_parse_records'></span><span id='topic+kntn_parse_record'></span><span id='topic+kntn_parse_col'></span>

<h3>Description</h3>

<p>Convert various kinds of fields to the correspondent R classes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kntn_parse_records(records)

kntn_parse_record(record)

kntn_parse_col(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kntn_parse_+3A_records">records</code></td>
<td>
<p>List objects converted from multiple kintone records.</p>
</td></tr>
<tr><td><code id="kntn_parse_+3A_record">record</code></td>
<td>
<p>List object converted from a single kintone record.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://developer.kintone.io/hc/en-us/articles/212494818/">https://developer.kintone.io/hc/en-us/articles/212494818/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(jsonlite)

rcd_file &lt;- system.file("extdata/record.json", package = "kntnr")
rcd &lt;- fromJSON(rcd_file, simplifyVector = FALSE)$record
kntnr:::kntn_parse_record(rcd)

rcds_file &lt;- system.file("extdata/records.json", package = "kntnr")
rcds &lt;- jsonlite::fromJSON(rcds_file, simplifyVector = FALSE)$records
kntnr:::kntn_parse_records(rcds)

</code></pre>

<hr>
<h2 id='kntn_record'>'kintone' Record API</h2><span id='topic+kntn_record'></span><span id='topic+kntn_records'></span>

<h3>Description</h3>

<p><code>kntn_record()</code> gets a single record from the specified kintone application.
<code>kntn_records()</code> retrieves multiple records at once. If the number of records is more than
<code>records_per_request</code> (the default is 100), <code>kntn_records()</code> automatically splits the
request into smaller subrequests.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kntn_record(app, id, as = c("data.frame", "list", "text"), verbose = FALSE)

kntn_records(
  app,
  fields = NULL,
  query = "",
  max_records = 1000L,
  offset = 0L,
  records_per_request = 100L,
  as = c("data.frame", "list", "text"),
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kntn_record_+3A_app">app</code></td>
<td>
<p>App ID.</p>
</td></tr>
<tr><td><code id="kntn_record_+3A_id">id</code></td>
<td>
<p>Record ID.</p>
</td></tr>
<tr><td><code id="kntn_record_+3A_as">as</code></td>
<td>
<p>Desired type of output: <code>data.frame</code>, <code>list</code> or <code>text</code> (<code>data.frame</code> means <a href="dplyr.html#topic+tbl_df">tbl_df</a>).</p>
</td></tr>
<tr><td><code id="kntn_record_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code>, output logs verbosely.</p>
</td></tr>
<tr><td><code id="kntn_record_+3A_fields">fields</code></td>
<td>
<p>Names of fields.</p>
</td></tr>
<tr><td><code id="kntn_record_+3A_query">query</code></td>
<td>
<p>Query (e.g. <code>"updated_time &gt; \"2012-02-03T09:00:00+0900\" and updated_time &lt; \"2012-02-03T10:00:00+0900\""</code>).</p>
</td></tr>
<tr><td><code id="kntn_record_+3A_max_records">max_records</code></td>
<td>
<p>Max number of records to get.</p>
</td></tr>
<tr><td><code id="kntn_record_+3A_offset">offset</code></td>
<td>
<p>Offset of records.</p>
</td></tr>
<tr><td><code id="kntn_record_+3A_records_per_request">records_per_request</code></td>
<td>
<p>Number of records per request (max: 100).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A field will be converted to the correspondent object by the type:
</p>

<ul>
<li><p> RECORD_NUMBER: <code>character</code>
</p>
</li>
<li><p> __ID__: <code>integer</code>
</p>
</li>
<li><p> __REVISION__: <code>integer</code>
</p>
</li>
<li><p> CREATOR: <code>character</code> (code)
</p>
</li>
<li><p> CREATED_TIME: <code>POSIXct</code>
</p>
</li>
<li><p> MODIFIER: <code>character</code> (code)
</p>
</li>
<li><p> UPDATED_TIME: <code>POSIXct</code>
</p>
</li>
<li><p> SINGLE_LINE_TEXT: <code>character</code>
</p>
</li>
<li><p> NUMBER: <code>numeric</code>
</p>
</li>
<li><p> CALC: <code>character</code>
</p>
</li>
<li><p> MULTI_LINE_TEXT: <code>character</code>
</p>
</li>
<li><p> RICH_TEXT: <code>character</code>
</p>
</li>
<li><p> CHECK_BOX: nested <code>character</code>
</p>
</li>
<li><p> RADIO_BUTTON: <code>character</code>
</p>
</li>
<li><p> DROP_DOWN: <code>character</code>
</p>
</li>
<li><p> MULTI_SELECT: nested <code>character</code>
</p>
</li>
<li><p> FILE: nested <code><a href="dplyr.html#topic+tbl_df">tbl_df</a></code>
</p>
</li>
<li><p> LINK: <code>character</code>
</p>
</li>
<li><p> DATE: <code>Date</code>
</p>
</li>
<li><p> TIME: <code>character</code> (R has no correspondent class for this)
</p>
</li>
<li><p> DATETIME: <code>POSIXct</code>
</p>
</li>
<li><p> USER_SELECT: nested <code>character</code> (code)
</p>
</li>
<li><p> ORGANIZATION_SELECT: nested <code>character</code> (code)
</p>
</li>
<li><p> GROUP_SELECT: nested <code>character</code> (code)
</p>
</li>
<li><p> CATEGORY: nested <code>character</code>
</p>
</li>
<li><p> STATUS: <code>character</code>
</p>
</li>
<li><p> STATUS_ASSIGNEE: <code>character</code>
</p>
</li>
<li><p> SUBTABLE: nested <code>tbl</code>
</p>
</li></ul>

<p>Some types will be converted to nested objects. You can unnest these fields by
<a href="#topic+kntn_unnest">kntn_unnest</a>.
</p>


<h3>See Also</h3>

<p><a href="https://developer.kintone.io/hc/en-us/articles/213149287/">https://developer.kintone.io/hc/en-us/articles/213149287/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
kntn_set_auth()

app &lt;- 10

# get a single record
d &lt;- kntn_record(app, id = 1)

# get records up to 1000 (default)
d &lt;- kntn_records(app)

# get records up to 5000 records at the latency of 500 records/request.
d &lt;- kntn_records(app, max_records = 5000, records_per_request = 500L)

# get records as list
d &lt;- kntn_records(app, as = "list")

# get records matched with the specified query and fields.
# See https://developer.kintone.io/hc/en-us/articles/213149287/ for the query syntax
d &lt;- kntn_records(app, fields = c("timestamp", "value"),
                  query = "updated_time &gt; \"2016-10-03T09:00:00+0900\"")

# Some types like SUBTABLE are converted as nested data.frame.
# You can unnest them by using kntn_unnest.
kntn_unnest(d)

## End(Not run)

</code></pre>

<hr>
<h2 id='kntn_unnest'>Unnest 'kintone' Records</h2><span id='topic+kntn_unnest'></span>

<h3>Description</h3>

<p>The data retrieved by <a href="#topic+kntn_records">kntn_records</a> may contain nested data.frames.
<code>kntn_unnest()</code> unnests them by using <a href="tidyr.html#topic+unnest">unnest</a>.
Note that this function is very experimental and may not work well for all data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kntn_unnest(records)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kntn_unnest_+3A_records">records</code></td>
<td>
<p>Data.frame retrieved by kntn_records()</p>
</td></tr>
</table>

<hr>
<h2 id='kntnr'>R Client for 'kintone' API</h2><span id='topic+kntnr'></span>

<h3>Description</h3>

<p>Retrieve data from kintone.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
