<!DOCTYPE html><html lang="en"><head><title>Help for package winr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {winr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#winr-package'><p>winr: Randomization-Based Covariance Adjustment of Win Statistics</p></a></li>
<li><a href='#adj_winodds'><p>Adjusted win odds</p></a></li>
<li><a href='#adj_winratio'><p>Adjusted win ratio</p></a></li>
<li><a href='#resp'><p>Respiratory dataset</p></a></li>
<li><a href='#skin'><p>Dermatology dataset</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Randomization-Based Covariance Adjustment of Win Statistics</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Author:</td>
<td>Ann Marie K. Weideman [aut, cre],
  Elaine K. Kowalewski [aut],
  Gary G. Koch [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ann Marie K. Weideman &lt;anndo1@umbc.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A multi-visit clinical trial may collect participant responses on an ordinal scale and may utilize a stratified design, such as randomization within centers, to assess treatment efficacy across multiple visits. Baseline characteristics may be strongly associated with the outcome, and adjustment for them can improve power. The win ratio (ignores ties) and the win odds (accounts for ties) can be useful when analyzing these types of data from randomized controlled trials. This package provides straightforward functions for adjustment of the win ratio and win odds for stratification and baseline covariates, facilitating the comparison of test and control treatments in multi-visit clinical trials. For additional information concerning the methodologies and applied examples within this package, please refer to the following publications:
	1. Weideman, A.M.K., Kowalewski, E.K., &amp; Koch, G.G. (2024). “Randomization-based covariance adjustment of win ratios and win odds for 	randomized multi-visit studies with ordinal outcomes.” Journal of Statistical Research, 58(1), 33–48. &lt;<a href="https://doi.org/10.3329%2Fjsr.v58i1.75411">doi:10.3329/jsr.v58i1.75411</a>&gt;.
	2. Kowalewski, E.K., Weideman, A.M.K., &amp; Koch, G.G. (2023). “SAS macro for randomization-based methods for covariance and stratified adjustment 	of win ratios and win odds for ordinal outcomes.” SESUG 2023 Proceedings, Paper 139-2023.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rdpack, tidyr, dplyr</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>Rdpack</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-14 02:31:57 UTC; anndo</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-16 18:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='winr-package'>winr: Randomization-Based Covariance Adjustment of Win Statistics</h2><span id='topic+winr'></span><span id='topic+winr-package'></span>

<h3>Description</h3>

<p>A multi-visit clinical trial may collect participant responses on an ordinal scale and may utilize a stratified design, such as randomization within centers, to assess treatment efficacy across multiple visits. Baseline characteristics may be strongly associated with the outcome, and adjustment for them can improve power. The win ratio (ignores ties) and the win odds (accounts for ties) can be useful when analyzing these types of data from randomized controlled trials. This package provides straightforward functions for adjustment of the win ratio and win odds for stratification and baseline covariates, facilitating the comparison of test and control treatments in multi-visit clinical trials. For additional information concerning the methodologies and applied examples within this package, please refer to the following publications: 1. Weideman, A.M.K., Kowalewski, E.K., &amp; Koch, G.G. (2024). “Randomization-based covariance adjustment of win ratios and win odds for randomized multi-visit studies with ordinal outcomes.” Journal of Statistical Research, 58(1), 33–48. <a href="https://doi.org/10.3329/jsr.v58i1.75411">doi:10.3329/jsr.v58i1.75411</a>. 2. Kowalewski, E.K., Weideman, A.M.K., &amp; Koch, G.G. (2023). “SAS macro for randomization-based methods for covariance and stratified adjustment of win ratios and win odds for ordinal outcomes.” SESUG 2023 Proceedings, Paper 139-2023.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Ann Marie K. Weideman <a href="mailto:anndo1@umbc.edu">anndo1@umbc.edu</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Elaine K. Kowalewski
</p>
</li>
<li><p> Gary G. Koch
</p>
</li></ul>


<hr>
<h2 id='adj_winodds'>Adjusted win odds</h2><span id='topic+adj_winodds'></span>

<h3>Description</h3>

<p>Randomization-based adjustment of the win odds for baseline covariates and
strata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adj_winodds(
  data,
  pid,
  baseline = NULL,
  outcome,
  covars = NULL,
  strata = NULL,
  arm,
  method = "small",
  sig.level = 0.05
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adj_winodds_+3A_data">data</code></td>
<td>
<p>a dataframe or matrix containing the analysis data. Must be in
wide format such that a participant's repeated responses are in a single row,
and each response is in a separate column.</p>
</td></tr>
<tr><td><code id="adj_winodds_+3A_pid">pid</code></td>
<td>
<p>a string indicating the name of the variable corresponding to
participant ID.</p>
</td></tr>
<tr><td><code id="adj_winodds_+3A_baseline">baseline</code></td>
<td>
<p>a string indicating the name of the outcome measured at
baseline. If not specified, defaults to NULL, and no baseline adjustment is
employed.</p>
</td></tr>
<tr><td><code id="adj_winodds_+3A_outcome">outcome</code></td>
<td>
<p>a vector of strings indicating the names of the outcomes
measured at each visit. Baseline, if specified, will be concatenated to this
vector within the code. The outcomes must have at least an ordinal
measurement scale with larger values being better than smaller values.
Thus, the outcome can be ordered categories or continuous measurements.</p>
</td></tr>
<tr><td><code id="adj_winodds_+3A_covars">covars</code></td>
<td>
<p>a vector of strings indicating the names of the covariates
(measured at baseline) used for adjustment. These covariates must be numeric
and can  be measured on a binary, categorical, ordered categorical, or
continuous scale. If not specified, defaults to NULL and no covariate
adjustment is employed.</p>
</td></tr>
<tr><td><code id="adj_winodds_+3A_strata">strata</code></td>
<td>
<p>a string indicating the name of the variable used for
stratification. If not specified, defaults to NULL and no stratification
adjustment is utilized.</p>
</td></tr>
<tr><td><code id="adj_winodds_+3A_arm">arm</code></td>
<td>
<p>a string indicating the name of the variable for treatment arm.
Treatment arm must be a positive integer such that the test treatment arm is
ALWAYS higher in value than the control arm.</p>
</td></tr>
<tr><td><code id="adj_winodds_+3A_method">method</code></td>
<td>
<p>a string &quot;small&quot; or &quot;large&quot; used to denote the sample size
method employed. The small sample size method is recommended unless
within-stratum sample size is reasonably large (e.g., &gt;= 50), number of
visits is small (e.g., &lt;=6), and number of covariates is small (e.g., &lt;=4).
Defaults to &quot;small.&quot;</p>
</td></tr>
<tr><td><code id="adj_winodds_+3A_sig.level">sig.level</code></td>
<td>
<p>significance level (Type I error probability). Defaults to
0.05.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A  dataframe containing:
</p>
<table role = "presentation">
<tr><td><code>logWR</code></td>
<td>
<p>natural log-transformed win ratio</p>
</td></tr>
<tr><td><code>SE_logWR</code></td>
<td>
<p>standard error of log-transformed win ratio</p>
</td></tr>
<tr><td><code>Var_logWR</code></td>
<td>
<p>sample variance of log-transformed win ratio</p>
</td></tr>
<tr><td><code>Chi_Square</code></td>
<td>
<p>Pearson's Chi-squared test statistic corresponding to
logWR</p>
</td></tr>
<tr><td><code>p_value</code></td>
<td>
<p>p-value corresponding to the Pearson's Chi-squared test</p>
</td></tr>
<tr><td><code>WR</code></td>
<td>
<p>win ratio</p>
</td></tr>
<tr><td><code>LCL_WR</code></td>
<td>
<p>lower bound of <code class="reqn">(1-\alpha/2)\times 100\%</code> CI for WR</p>
</td></tr>
<tr><td><code>UCL_WR</code></td>
<td>
<p>upper bound of <code class="reqn">(1-\alpha/2)\times 100\%</code> CI for WR</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
#--------------------------
# Respiratory example
#--------------------------

# Since IDs repeat at centers 1 and 2, create a new, unique ID
resp$UniqID&lt;-resp$Center*100+resp$ID

# Convert treatment arm to binary
resp$Trt&lt;-1*(resp$Treatment=="T")

# Indicator for male
resp$SexNum&lt;-1*(resp$Sex=="M")

adj_winodds(data=resp,
            pid="UniqID",
            baseline="Baseline",
            outcome=c("Visit1","Visit2","Visit3","Visit4"),
            covars= c("SexNum","Age"),
            strata="Center",
            arm="Trt",
            method="small",
            sig.level=0.05)

#----------------------
# Dermatology example
#----------------------

#Generate indicators for stage 4 and 5
skin$Stage4 = (skin$STAGE == 4)*1
skin$Stage5 = (skin$STAGE == 5)*1

# Generate treatment center
skin$center&lt;-ifelse(skin$INV==5,1,
  ifelse(skin$INV==6,2,
    ifelse(skin$INV==8,3,
      ifelse(skin$INV==9,4,
        ifelse(skin$INV==10,5,6)))))

# Generate treatment center that pools centers 3 and 4 due to small sample size
skin$center2 = skin$center
skin$center2&lt;-ifelse(skin$center == 4, 3, skin$center)

# Generate participant IDs
skin$ID&lt;-1:nrow(skin)

adj_winodds(data=skin,
            pid="ID",
            baseline=NULL,
            outcome=c("R1","R2","R3"),
            covars= c("Stage4","Stage5"),
            strata="center2",
            arm="TRT",
            method="small",
            sig.level=0.05)

</code></pre>

<hr>
<h2 id='adj_winratio'>Adjusted win ratio</h2><span id='topic+adj_winratio'></span>

<h3>Description</h3>

<p>Randomization-based adjustment of the win ratio for baseline covariates and
strata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adj_winratio(
  data,
  pid,
  baseline = NULL,
  outcome,
  covars = NULL,
  strata = NULL,
  arm,
  method = "small",
  sig.level = 0.05
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adj_winratio_+3A_data">data</code></td>
<td>
<p>a dataframe or matrix containing the analysis data. Must be in
wide format such that a participant's repeated responses are in a single row,
and each response is in a separate column.</p>
</td></tr>
<tr><td><code id="adj_winratio_+3A_pid">pid</code></td>
<td>
<p>a string indicating the name of the variable corresponding to
participant ID.</p>
</td></tr>
<tr><td><code id="adj_winratio_+3A_baseline">baseline</code></td>
<td>
<p>a string indicating the name of the outcome measured at
baseline. If not specified, defaults to NULL, and no baseline adjustment is
employed.</p>
</td></tr>
<tr><td><code id="adj_winratio_+3A_outcome">outcome</code></td>
<td>
<p>a vector of strings indicating the names of the outcomes
measured at each visit. Baseline, if specified, will be concatenated to this
vector within the code. The outcomes must have at least an ordinal
measurement scale with larger values being better than smaller values.
Thus, the outcome can be ordered categories or continuous measurements.</p>
</td></tr>
<tr><td><code id="adj_winratio_+3A_covars">covars</code></td>
<td>
<p>a vector of strings indicating the names of the covariates
(measured at baseline) used for adjustment. These covariates must be numeric
and can  be measured on a binary, categorical, ordered categorical, or
continuous scale. If not specified, defaults to NULL and no covariate
adjustment is employed.</p>
</td></tr>
<tr><td><code id="adj_winratio_+3A_strata">strata</code></td>
<td>
<p>a string indicating the name of the variable used for
stratification. If not specified, defaults to NULL and no stratification adjustment
is utilized.</p>
</td></tr>
<tr><td><code id="adj_winratio_+3A_arm">arm</code></td>
<td>
<p>a string indicating the name of the variable for treatment arm.
Treatment arm must be a positive integer such that the test treatment arm is
ALWAYS higher in value than the control arm.</p>
</td></tr>
<tr><td><code id="adj_winratio_+3A_method">method</code></td>
<td>
<p>a string &quot;small&quot; or &quot;large&quot; used to denote the sample size
method employed. The small sample size method is recommended unless
within-stratum sample size is reasonably large (e.g., &gt;= 50), number of
visits is small (e.g., &lt;=6), and number of covariates is small (e.g., &lt;=4).
Defaults to &quot;small.&quot;</p>
</td></tr>
<tr><td><code id="adj_winratio_+3A_sig.level">sig.level</code></td>
<td>
<p>significance level (Type I error probability). Defaults to
0.05.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A  dataframe containing:
</p>
<table role = "presentation">
<tr><td><code>logWR</code></td>
<td>
<p>natural log-transformed win ratio</p>
</td></tr>
<tr><td><code>SE_logWR</code></td>
<td>
<p>standard error of log-transformed win ratio</p>
</td></tr>
<tr><td><code>Var_logWR</code></td>
<td>
<p>sample variance of log-transformed win ratio</p>
</td></tr>
<tr><td><code>Chi_Square</code></td>
<td>
<p>Pearson's Chi-squared test statistic corresponding to
logWR</p>
</td></tr>
<tr><td><code>p_value</code></td>
<td>
<p>p-value corresponding to the Pearson's Chi-squared test</p>
</td></tr>
<tr><td><code>WR</code></td>
<td>
<p>win ratio</p>
</td></tr>
<tr><td><code>LCL_WR</code></td>
<td>
<p>lower bound of <code class="reqn">(1-\alpha/2)\times 100\%</code> CI for WR</p>
</td></tr>
<tr><td><code>UCL_WR</code></td>
<td>
<p>upper bound of <code class="reqn">(1-\alpha/2)\times 100\%</code> CI for WR</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
#--------------------------
# Respiratory example
#--------------------------

# Since IDs repeat at centers 1 and 2, create a new, unique ID
resp$UniqID&lt;-resp$Center*100+resp$ID

# Convert treatment arm to binary
resp$Trt&lt;-1*(resp$Treatment=="T")

# Indicator for male
resp$SexNum&lt;-1*(resp$Sex=="M")

adj_winratio(data=resp,
            pid="UniqID",
            baseline="Baseline",
            outcome=c("Visit1","Visit2","Visit3","Visit4"),
            covars= c("SexNum","Age"),
            strata="Center",
            arm="Trt",
            method="small",
            sig.level=0.05)

#----------------------
# Dermatology example
#----------------------

#Generate indicators for stage 4 and 5
skin$Stage4 = (skin$STAGE == 4)*1
skin$Stage5 = (skin$STAGE == 5)*1

# Generate treatment center
skin$center&lt;-ifelse(skin$INV==5,1,
  ifelse(skin$INV==6,2,
    ifelse(skin$INV==8,3,
      ifelse(skin$INV==9,4,
        ifelse(skin$INV==10,5,6)))))

# Generate treatment center that pools centers 3 and 4 due to small sample size
skin$center2 = skin$center
skin$center2&lt;-ifelse(skin$center == 4, 3, skin$center)

# Generate participant IDs
skin$ID&lt;-1:nrow(skin)

adj_winratio(data=skin,
            pid="ID",
            baseline=NULL,
            outcome=c("R1","R2","R3"),
            covars= c("Stage4","Stage5"),
            strata="center2",
            arm="TRT",
            method="small",
            sig.level=0.05)

</code></pre>

<hr>
<h2 id='resp'>Respiratory dataset</h2><span id='topic+resp'></span>

<h3>Description</h3>

<p>The respiratory dataset originates from a randomized clinical trial that
evaluated a test treatment against a control in managing a chronic respiratory
condition (Koch et al. 1989; Stokes et al. 2012). The study involved 111
patients—54 receiving the active treatment and 57 on a placebo—distributed
across two centers. Assessments were conducted at baseline and during four
subsequent follow-up visits. At each visit, patients' respiratory status was
evaluated using an ordinal scale where 0 signifies &lsquo;terrible&rsquo;, 1 is &lsquo;poor&rsquo;,
2 stands for &lsquo;fair&rsquo;, 3 represents &lsquo;good&rsquo;, and 4 denotes &lsquo;excellent&rsquo;.
The participating centers serve as stratification factors, and the baseline
variables include age, sex, and initial respiratory status.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resp
</code></pre>


<h3>Format</h3>

<p>A data frame with 10 variables.
</p>
<p><code>ID</code>:  Participant ID
</p>
<p><code>Center</code>:  Treatment center
</p>
<p><code>Sex</code>:  Participant sex at birth
</p>
<p><code>Age</code>:  Participant age at baseline
</p>
<p><code>Treatment</code>:  T=treatment arm, C=control arm
</p>
<p><code>Baseline</code>:  Ordinal global rating at Baseline: 0 for terrible, 1 for poor, 2 for fair,
3 for good, and 4 for excellent
</p>
<p><code>Visit1</code>:  Ordinal global rating at Visit 1: 0 for terrible, 1 for poor, 2 for fair,
3 for good, and 4 for excellent
</p>
<p><code>Visit2</code>:  Ordinal global rating at Visit 2: 0 for terrible, 1 for poor, 2 for fair,
3 for good, and 4 for excellent
</p>
<p><code>Visit3</code>:  Ordinal global rating at Visit 3: 0 for terrible, 1 for poor, 2 for fair,
3 for good, and 4 for excellent
</p>
<p><code>Visit4</code>:  Ordinal global rating at Visit 4: 0 for terrible, 1 for poor, 2 for fair,
3 for good, and 4 for excellent
</p>


<h3>References</h3>


<p>Koch GG, Carr GJ, Amara IA, Stokes ME, Uryniak TJ (1989).
&ldquo;Categorical Data Analysis.&rdquo;
In Berry DA (ed.), <em>Statistical Methodology in the Pharmaceutical Sciences</em>, 389-473.
CRC Press.<br /><br /> Stokes ME, Davis CS, Koch GG (2012).
<em>Categorical data analysis using SAS</em>, third edition.
SAS Institute.

</p>

<hr>
<h2 id='skin'>Dermatology dataset</h2><span id='topic+skin'></span>

<h3>Description</h3>

<p>The dermatology dataset is derived from a randomized clinical trial that
compared a test treatment with a control for managing skin conditions
(Stanish et al. 1978). This trial enrolled 172 patients—88 in the
test group and 84 in the placebo group—across six clinics. These patients were
assessed at three follow-up visits, where the degree of improvement in their
skin condition was measured on a five-point scale: 1 for rapidly improving,
2 for slowly improving, 3 for stable, 4 for slowly worsening, and 5 for
rapidly worsening. Due to Clinic 9 enrolling only four patients, data from
Clinics 8 and 9 were combined, a decision supported by these clinics having
the smallest sample sizes in their strata. The primary baseline variable
recorded was the stage of disease at the start of the study, categorized as
3 for fair, 4 for poor, and 5 for exacerbation. This dataset also features
missing data at follow-up visits, progressively increasing from 2% (3
missing observations) at the first visit to 9% (16 missing) at the second,
and 17% (30 missing) at the third visit.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>skin
</code></pre>


<h3>Format</h3>

<p>A data frame with 11 variables.
</p>
<p><code>INV</code>:  Investigator identification number (5,6,8,9,10,11)
</p>
<p><code>ID</code>:  Participant ID
</p>
<p><code>center</code>:  Treatment center
</p>
<p><code>center2</code>:  Treatment center that pools centers 3 and 4 due to small sample size
</p>
<p><code>TRT</code>:  1 = Test drug, 2 = Placebo
</p>
<p><code>STAGE</code>:  Initial stage of disease (3 = Fair, 4 = Poor, 5 = Exacerbation)
</p>
<p><code>R1</code>:  Response at Time 1; NA if missing
</p>
<p><code>R2</code>:  Response at Time 2; NA if missing
</p>
<p><code>R3</code>:  Response at Time 3; NA if missing
</p>
<p><code>Stage4</code>:  1 if Stage 4, 0 otherwise
</p>
<p><code>Stage5</code>:  1 if Stage 5, 0 otherwise
</p>


<h3>References</h3>


<p>Stanish WM, Gillings DB, Koch GG (1978).
&ldquo;An Application of Multivariate Ratio Methods for the Analysis of a Longitudinal Clinical Trial with Missing Data.&rdquo;
<em>Biometrics</em>, <b>34</b>(2), 305&ndash;317.
ISSN 0006341X, 15410420, <a href="http://www.jstor.org/stable/2530021">http://www.jstor.org/stable/2530021</a>.

</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
