<!DOCTYPE html><html lang="en"><head><title>Help for package corrr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {corrr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#corrr-package'><p>corrr: Correlations in R</p></a></li>
<li><a href='#as_cordf'><p>Coerce lists and matrices to correlation data frames</p></a></li>
<li><a href='#as_matrix'><p>Convert a correlation data frame to matrix format</p></a></li>
<li><a href='#autoplot.cor_df'><p>Create a correlation matrix from a cor_df object</p></a></li>
<li><a href='#colpair_map'><p>Apply a function to all pairs of columns in a data frame</p></a></li>
<li><a href='#correlate'><p>Correlation Data Frame</p></a></li>
<li><a href='#dice'><p>Returns a correlation table with the selected fields only</p></a></li>
<li><a href='#fashion'><p>Fashion a correlation data frame for printing.</p></a></li>
<li><a href='#first_col'><p>Add a first column to a data.frame</p></a></li>
<li><a href='#focus'><p>Focus on section of a correlation data frame.</p></a></li>
<li><a href='#focus_if'><p>Conditionally focus correlation data frame</p></a></li>
<li><a href='#network_plot'><p>Network plot of a correlation data frame</p></a></li>
<li><a href='#pair_n'><p>Number of pairwise complete cases.</p></a></li>
<li><a href='#rearrange'><p>Re-arrange a correlation data frame</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#retract'><p>Creates a data frame from a stretched correlation table</p></a></li>
<li><a href='#rplot'><p>Plot a correlation data frame.</p></a></li>
<li><a href='#shave'><p>Shave off upper/lower triangle.</p></a></li>
<li><a href='#stretch'><p>Stretch correlation data frame into long format.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Correlations in R</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.4</td>
</tr>
<tr>
<td>Description:</td>
<td>A tool for exploring correlations.  It makes it possible to
    easily perform routine tasks when exploring correlation matrices such
    as ignoring the diagonal, focusing on the correlations of certain
    variables against others, or rearranging and visualizing the matrix in
    terms of the strength of the correlations.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/tidymodels/corrr">https://github.com/tidymodels/corrr</a>, <a href="https://corrr.tidymodels.org">https://corrr.tidymodels.org</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/tidymodels/corrr/issues">https://github.com/tidymodels/corrr/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr (&ge; 1.0.0), ggplot2 (&ge; 2.2.0), ggrepel (&ge; 0.6.5), glue
(&ge; 1.4.2), purrr (&ge; 0.2.2), rlang (&ge; 0.4.0), seriation (&ge;
1.2-0), tibble (&ge; 2.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, DBI, dbplyr (&ge; 1.2.1), knitr (&ge; 1.13), rmarkdown (&ge;
0.9.6), RSQLite, sparklyr (&ge; 0.9), testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>tidyverse/tidytemplate</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1.9000</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-08-16 19:58:27 UTC; max</td>
</tr>
<tr>
<td>Author:</td>
<td>Max Kuhn [aut, cre],
  Simon Jackson [aut],
  Jorge Cimentada [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Max Kuhn &lt;max@rstudio.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-08-16 20:40:01 UTC</td>
</tr>
</table>
<hr>
<h2 id='corrr-package'>corrr: Correlations in R</h2><span id='topic+corrr'></span><span id='topic+corrr-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>A tool for exploring correlations. It makes it possible to easily perform routine tasks when exploring correlation matrices such as ignoring the diagonal, focusing on the correlations of certain variables against others, or rearranging and visualizing the matrix in terms of the strength of the correlations.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Max Kuhn <a href="mailto:max@rstudio.com">max@rstudio.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Simon Jackson
</p>
</li>
<li><p> Jorge Cimentada
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/tidymodels/corrr">https://github.com/tidymodels/corrr</a>
</p>
</li>
<li> <p><a href="https://corrr.tidymodels.org">https://corrr.tidymodels.org</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/tidymodels/corrr/issues">https://github.com/tidymodels/corrr/issues</a>
</p>
</li></ul>


<hr>
<h2 id='as_cordf'>Coerce lists and matrices to correlation data frames</h2><span id='topic+as_cordf'></span>

<h3>Description</h3>

<p>A wrapper function to coerce objects in a valid format (such as correlation
matrices created using the base function, <code><a href="stats.html#topic+cor">cor</a></code>) into a
correlation data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_cordf(x, diagonal = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_cordf_+3A_x">x</code></td>
<td>
<p>A list, data frame or matrix that can be coerced into a correlation
data frame.</p>
</td></tr>
<tr><td><code id="as_cordf_+3A_diagonal">diagonal</code></td>
<td>
<p>Value (typically numeric or NA) to set the diagonal to</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A correlation data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- cor(mtcars)
as_cordf(x)
as_cordf(x, diagonal = 1)
</code></pre>

<hr>
<h2 id='as_matrix'>Convert a correlation data frame to matrix format</h2><span id='topic+as_matrix'></span>

<h3>Description</h3>

<p>Convert a correlation data frame to original matrix format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_matrix(x, diagonal)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_matrix_+3A_x">x</code></td>
<td>
<p>A correlation data frame. See <code><a href="#topic+correlate">correlate</a></code> or <code><a href="#topic+as_cordf">as_cordf</a></code>.</p>
</td></tr>
<tr><td><code id="as_matrix_+3A_diagonal">diagonal</code></td>
<td>
<p>Value (typically numeric or NA) to set the diagonal to</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Correlation matrix
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- correlate(mtcars)
as_matrix(x)
</code></pre>

<hr>
<h2 id='autoplot.cor_df'>Create a correlation matrix from a cor_df object</h2><span id='topic+autoplot.cor_df'></span>

<h3>Description</h3>

<p>This method provides a good first visualization of the correlation matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cor_df'
autoplot(
  object,
  ...,
  method = "PCA",
  triangular = c("upper", "lower", "full"),
  barheight = 20,
  low = "#B2182B",
  mid = "#F1F1F1",
  high = "#2166AC"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="autoplot.cor_df_+3A_object">object</code></td>
<td>
<p>A <code>cor_df</code> object.</p>
</td></tr>
<tr><td><code id="autoplot.cor_df_+3A_...">...</code></td>
<td>
<p>this argument is ignored.</p>
</td></tr>
<tr><td><code id="autoplot.cor_df_+3A_method">method</code></td>
<td>
<p>String specifying the arrangement (clustering) method.
Clustering is achieved via <code><a href="seriation.html#topic+seriate">seriate</a></code>, which can be
consulted for a complete list of clustering methods. Default = &quot;PCA&quot;.</p>
</td></tr>
<tr><td><code id="autoplot.cor_df_+3A_triangular">triangular</code></td>
<td>
<p>Which part of the correlation matrix should be shown?
Must be one of <code>"upper"</code>, <code>"lower"</code>, or <code>"full"</code>, and defaults to <code>"upper"</code>.</p>
</td></tr>
<tr><td><code id="autoplot.cor_df_+3A_barheight">barheight</code></td>
<td>
<p>A single, non-negative number. Is passed to
<code><a href="ggplot2.html#topic+guide_colourbar">ggplot2::guide_colourbar()</a></code> to determine the height of the guide colorbar.
Defaults to 20, is likely to need manual adjustments.</p>
</td></tr>
<tr><td><code id="autoplot.cor_df_+3A_low">low</code></td>
<td>
<p>A single color. Is passed to <code><a href="ggplot2.html#topic+scale_gradient">ggplot2::scale_fill_gradient2()</a></code>.
The color of negative correlation. Defaults to <code>"#B2182B"</code>.</p>
</td></tr>
<tr><td><code id="autoplot.cor_df_+3A_mid">mid</code></td>
<td>
<p>A single color. Is passed to <code><a href="ggplot2.html#topic+scale_gradient">ggplot2::scale_fill_gradient2()</a></code>.
The color of no correlation. Defaults to <code>"#F1F1F1"</code>.</p>
</td></tr>
<tr><td><code id="autoplot.cor_df_+3A_high">high</code></td>
<td>
<p>A single color. Is passed to <code><a href="ggplot2.html#topic+scale_gradient">ggplot2::scale_fill_gradient2()</a></code>.
The color of the positive correlation. Defaults to <code>"#2166AC"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- correlate(mtcars)

autoplot(x)

autoplot(x, triangular = "lower")

autoplot(x, triangular = "full")
</code></pre>

<hr>
<h2 id='colpair_map'>Apply a function to all pairs of columns in a data frame</h2><span id='topic+colpair_map'></span>

<h3>Description</h3>

<p><code>colpair_map()</code> transforms a data frame by applying a function to each pair
of its columns. The result is a correlation data frame (see
<code><a href="#topic+correlate">correlate</a></code> for details).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>colpair_map(.data, .f, ..., .diagonal = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="colpair_map_+3A_.data">.data</code></td>
<td>
<p>A data frame or data frame extension (e.g. a tibble).</p>
</td></tr>
<tr><td><code id="colpair_map_+3A_.f">.f</code></td>
<td>
<p>A function.</p>
</td></tr>
<tr><td><code id="colpair_map_+3A_...">...</code></td>
<td>
<p>Additional arguments passed on to the mapped function.</p>
</td></tr>
<tr><td><code id="colpair_map_+3A_.diagonal">.diagonal</code></td>
<td>
<p>Value at which to set the diagonal (defaults to <code>NA</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A correlation data frame (<code>cor_df</code>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Using `stats::cov` produces a covariance data frame.
colpair_map(mtcars, cov)

## Function to get the p-value from a t-test:
calc_p_value &lt;- function(vec_a, vec_b) {
  t.test(vec_a, vec_b)$p.value
}

colpair_map(mtcars, calc_p_value)
</code></pre>

<hr>
<h2 id='correlate'>Correlation Data Frame</h2><span id='topic+correlate'></span>

<h3>Description</h3>

<p>An implementation of stats::cor(), which returns a correlation data frame
rather than a matrix. See details below. Additional adjustment include the
use of pairwise deletion by default.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>correlate(
  x,
  y = NULL,
  use = "pairwise.complete.obs",
  method = "pearson",
  diagonal = NA,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="correlate_+3A_x">x</code></td>
<td>
<p>a numeric vector, matrix or data frame.</p>
</td></tr>
<tr><td><code id="correlate_+3A_y">y</code></td>
<td>
<p><code>NULL</code> (default) or a vector, matrix or data frame with
compatible dimensions to <code>x</code>.   The default is equivalent to
<code>y = x</code> (but more efficient).</p>
</td></tr>
<tr><td><code id="correlate_+3A_use">use</code></td>
<td>
<p>an optional character string giving a
method for computing covariances in the presence
of missing values.  This must be (an abbreviation of) one of the strings
<code>"everything"</code>, <code>"all.obs"</code>, <code>"complete.obs"</code>,
<code>"na.or.complete"</code>, or <code>"pairwise.complete.obs"</code>.</p>
</td></tr>
<tr><td><code id="correlate_+3A_method">method</code></td>
<td>
<p>a character string indicating which correlation
coefficient (or covariance) is to be computed.  One of
<code>"pearson"</code> (default), <code>"kendall"</code>, or <code>"spearman"</code>:
can be abbreviated.</p>
</td></tr>
<tr><td><code id="correlate_+3A_diagonal">diagonal</code></td>
<td>
<p>Value (typically numeric or NA) to set the diagonal to</p>
</td></tr>
<tr><td><code id="correlate_+3A_quiet">quiet</code></td>
<td>
<p>Set as TRUE to suppress message about <code>method</code> and <code>use</code>
parameters.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function returns a correlation matrix as a correlation data frame in
the following format:
</p>

<ul>
<li><p> A tibble (see <code><a href="tibble.html#topic+tibble">tibble</a></code>)
</p>
</li>
<li><p> An additional class, &quot;cor_df&quot;
</p>
</li>
<li><p> A &quot;term&quot; column
</p>
</li>
<li><p> Standardized variances (the matrix diagonal) set to missing values by
default (<code>NA</code>) so they can be ignored in calculations.
</p>
</li></ul>

<p>The <code>use</code> argument and its possible values are inherited from <code>stats::cor()</code>:
</p>

<ul>
<li><p> &quot;everything&quot;: NAs will propagate conceptually, i.e. a resulting value will be NA whenever one of its contributing observations is NA
</p>
</li>
<li><p> &quot;all.obs&quot;: the presence of missing observations will produce an error
</p>
</li>
<li><p> &quot;complete.obs&quot;: correlations will be computed from complete observations, with an error being raised if there are no complete cases.
</p>
</li>
<li><p> &quot;na.or.complete&quot;: correlations will be computed from complete observations, returning an NA if there are no complete cases.
</p>
</li>
<li><p> &quot;pairwise.complete.obs&quot;: the correlation between each pair of variables is computed using all complete pairs of those particular variables.
</p>
</li></ul>

<p>As of version 0.4.3, the first column of a <code>cor_df</code> object is named &quot;term&quot;.
In previous versions this first column was named &quot;rowname&quot;.
</p>
<p>There is a <code><a href="ggplot2.html#topic+autoplot">ggplot2::autoplot()</a></code> method for quickly visualizing the
correlation matrix, for more information see <code><a href="#topic+autoplot.cor_df">autoplot.cor_df()</a></code>.
</p>


<h3>Value</h3>

<p>A correlation data frame <code>cor_df</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
correlate(iris)

## End(Not run)

correlate(iris[-5])

correlate(mtcars)
## Not run: 

# Also supports DB backend and collects results into memory

library(sparklyr)
sc &lt;- spark_connect(master = "local")
mtcars_tbl &lt;- copy_to(sc, mtcars)
mtcars_tbl %&gt;%
  correlate(use = "pairwise.complete.obs", method = "spearman")
spark_disconnect(sc)

## End(Not run)

</code></pre>

<hr>
<h2 id='dice'>Returns a correlation table with the selected fields only</h2><span id='topic+dice'></span>

<h3>Description</h3>

<p>Returns a correlation table with the selected fields only
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dice(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dice_+3A_x">x</code></td>
<td>
<p>A correlation table, class cor_df</p>
</td></tr>
<tr><td><code id="dice_+3A_...">...</code></td>
<td>
<p>A list of variables in the correlation table</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
dice(correlate(mtcars), mpg, wt, am)
</code></pre>

<hr>
<h2 id='fashion'>Fashion a correlation data frame for printing.</h2><span id='topic+fashion'></span>

<h3>Description</h3>

<p>For the purpose of printing, convert a correlation data frame into a noquote
matrix with the correlations cleanly formatted (leading zeros removed; spaced
for signs) and the diagonal (or any NA) left blank.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fashion(x, decimals = 2, leading_zeros = FALSE, na_print = "")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fashion_+3A_x">x</code></td>
<td>
<p>Scalar, vector, matrix or data frame.</p>
</td></tr>
<tr><td><code id="fashion_+3A_decimals">decimals</code></td>
<td>
<p>Number of decimal places to display for numbers.</p>
</td></tr>
<tr><td><code id="fashion_+3A_leading_zeros">leading_zeros</code></td>
<td>
<p>Should leading zeros be displayed for decimals (e.g., 0.1)? If FALSE, they will be removed.</p>
</td></tr>
<tr><td><code id="fashion_+3A_na_print">na_print</code></td>
<td>
<p>Character string indicating NA values in printed output</p>
</td></tr>
</table>


<h3>Value</h3>

<p>noquote. Also a data frame if x is a matrix or data frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Examples with correlate()
library(dplyr)
mtcars %&gt;% correlate() %&gt;% fashion()
mtcars %&gt;% correlate() %&gt;% fashion(decimals = 1)
mtcars %&gt;% correlate() %&gt;% fashion(leading_zeros = TRUE)
mtcars %&gt;% correlate() %&gt;% fashion(na_print = "*")

# But doesn't have to include correlate()
mtcars %&gt;% fashion(decimals = 3)
c(0.234, 134.23, -.23, NA) %&gt;% fashion(na_print = "X")
</code></pre>

<hr>
<h2 id='first_col'>Add a first column to a data.frame</h2><span id='topic+first_col'></span>

<h3>Description</h3>

<p>Add a first column to a data.frame. This is most commonly used to append a
term column to create a cor_df.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>first_col(df, ..., var = "term")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="first_col_+3A_df">df</code></td>
<td>
<p>Data frame</p>
</td></tr>
<tr><td><code id="first_col_+3A_...">...</code></td>
<td>
<p>Values to go into the column</p>
</td></tr>
<tr><td><code id="first_col_+3A_var">var</code></td>
<td>
<p>Label for the column, with the default &quot;term&quot;</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>first_col(mtcars, 1:nrow(mtcars))
</code></pre>

<hr>
<h2 id='focus'>Focus on section of a correlation data frame.</h2><span id='topic+focus'></span><span id='topic+focus_'></span>

<h3>Description</h3>

<p>Convenience function to select a set of variables from a correlation matrix
to keep as the columns, and exclude these or all other variables from the rows. This
function will take a <code><a href="#topic+correlate">correlate</a></code> correlation matrix, and
expression(s) suited for dplyr::select(). The selected variables will remain
in the columns, and these, or all other variables, will be excluded from the
rows based on '<code>same</code>. For a complete list of methods for using this
function, see <code><a href="dplyr.html#topic+select">select</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>focus(x, ..., mirror = FALSE)

focus_(x, ..., .dots, mirror)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="focus_+3A_x">x</code></td>
<td>
<p>cor_df. See <code><a href="#topic+correlate">correlate</a></code>.</p>
</td></tr>
<tr><td><code id="focus_+3A_...">...</code></td>
<td>
<p>One or more unquoted expressions separated by commas. Variable
names can be used as if they were positions in the data frame, so
expressions like 'x:y&ldquo; can be used to select a range of variables.</p>
</td></tr>
<tr><td><code id="focus_+3A_mirror">mirror</code></td>
<td>
<p>Boolean. Whether to mirror the selected columns in the rows or
not.</p>
</td></tr>
<tr><td><code id="focus_+3A_.dots">.dots</code></td>
<td>
<p>Use focus_ to do standard evaluations. See <code><a href="dplyr.html#topic+select">select</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tbl or, if mirror = TRUE, a <code>cor_df</code> (see <code><a href="#topic+correlate">correlate</a></code>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
x &lt;- correlate(mtcars)
focus(x, mpg, cyl) # Focus on correlations of mpg and cyl with all other variables
focus(x, -disp, -mpg, mirror = TRUE) # Remove disp and mpg from columns and rows

x &lt;- correlate(iris[-5])
focus(x, -matches("Sepal")) # Focus on correlations of non-Sepal
# variables with Sepal variables.
</code></pre>

<hr>
<h2 id='focus_if'>Conditionally focus correlation data frame</h2><span id='topic+focus_if'></span>

<h3>Description</h3>

<p>Apply a predicate function to each column of correlations. Columns that
evaluate to TRUE will be included in a call to <code><a href="#topic+focus">focus</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>focus_if(x, .predicate, ..., mirror = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="focus_if_+3A_x">x</code></td>
<td>
<p>Correlation data frame or object to be coerced to one via
<code><a href="#topic+as_cordf">as_cordf</a></code>.</p>
</td></tr>
<tr><td><code id="focus_if_+3A_.predicate">.predicate</code></td>
<td>
<p>A predicate function to be applied to the columns. The
columns for which .predicate returns TRUE will be included as variables in
<code><a href="#topic+focus">focus</a></code>.</p>
</td></tr>
<tr><td><code id="focus_if_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass to the predicate function if not anonymous.</p>
</td></tr>
<tr><td><code id="focus_if_+3A_mirror">mirror</code></td>
<td>
<p>Boolean. Whether to mirror the selected columns in the rows or
not.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble or, if mirror = TRUE, a correlation data frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
any_greater_than &lt;- function(x, val) {
  mean(abs(x), na.rm = TRUE) &gt; val
}

x &lt;- correlate(mtcars)

x %&gt;% focus_if(any_greater_than, .6)
x %&gt;% focus_if(any_greater_than, .6, mirror = TRUE) %&gt;% network_plot()
</code></pre>

<hr>
<h2 id='network_plot'>Network plot of a correlation data frame</h2><span id='topic+network_plot'></span>

<h3>Description</h3>

<p>Output a network plot of a correlation data frame in which variables that are
more highly correlated appear closer together and are joined by stronger
paths. Paths are also colored by their sign (blue for positive and red for
negative). The proximity of the points are determined using multidimensional
clustering.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>network_plot(
  rdf,
  min_cor = 0.3,
  legend = c("full", "range", "none"),
  colours = c("indianred2", "white", "skyblue1"),
  repel = TRUE,
  curved = TRUE,
  colors
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="network_plot_+3A_rdf">rdf</code></td>
<td>
<p>Correlation data frame (see <code><a href="#topic+correlate">correlate</a></code>) or object
that can be coerced to one (see <code><a href="#topic+as_cordf">as_cordf</a></code>).</p>
</td></tr>
<tr><td><code id="network_plot_+3A_min_cor">min_cor</code></td>
<td>
<p>Number from 0 to 1 indicating the minimum value of
correlations (in absolute terms) to plot.</p>
</td></tr>
<tr><td><code id="network_plot_+3A_legend">legend</code></td>
<td>
<p>How should the colors and legend for the correlation values be
displayed? The options are &quot;full&quot; (the default) for -1 to 1 with a legend,
&quot;range&quot; for the range of correlation values in <code>rdf</code> with a legend,
or &quot;none&quot; for colors between -1 to 1 with no legend displayed.</p>
</td></tr>
<tr><td><code id="network_plot_+3A_colours">colours</code>, <code id="network_plot_+3A_colors">colors</code></td>
<td>
<p>Vector of colors to use for n-color gradient.</p>
</td></tr>
<tr><td><code id="network_plot_+3A_repel">repel</code></td>
<td>
<p>Should variable labels repel each other? If TRUE, text is added
via <code><a href="ggrepel.html#topic+geom_text_repel">geom_text_repel</a></code> instead of <code><a href="ggplot2.html#topic+geom_text">geom_text</a></code></p>
</td></tr>
<tr><td><code id="network_plot_+3A_curved">curved</code></td>
<td>
<p>Should the paths be curved? If TRUE, paths are added via
<code><a href="ggplot2.html#topic+geom_segment">geom_curve</a></code>; if FALSE, via
<code><a href="ggplot2.html#topic+geom_segment">geom_segment</a></code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- correlate(mtcars)
network_plot(x)
network_plot(x, min_cor = .1)
network_plot(x, min_cor = .6)
network_plot(x, min_cor = .2, colors = c("red", "green"), legend = "full")
network_plot(x, min_cor = .2, colors = c("red", "green"), legend = "range")
</code></pre>

<hr>
<h2 id='pair_n'>Number of pairwise complete cases.</h2><span id='topic+pair_n'></span>

<h3>Description</h3>

<p>Compute the number of complete cases in a pairwise fashion for <code>x</code> (and
<code>y</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pair_n(x, y = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pair_n_+3A_x">x</code></td>
<td>
<p>a numeric vector, matrix or data frame.</p>
</td></tr>
<tr><td><code id="pair_n_+3A_y">y</code></td>
<td>
<p><code>NULL</code> (default) or a vector, matrix or data frame with
compatible dimensions to <code>x</code>.   The default is equivalent to
<code>y = x</code> (but more efficient).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Matrix of pairwise sample sizes (number of complete cases).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pair_n(mtcars)
</code></pre>

<hr>
<h2 id='rearrange'>Re-arrange a correlation data frame</h2><span id='topic+rearrange'></span>

<h3>Description</h3>

<p>Re-arrange a correlation data frame to group highly correlated variables closer
together.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rearrange(x, method = "PC", absolute = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rearrange_+3A_x">x</code></td>
<td>
<p>cor_df. See <code><a href="#topic+correlate">correlate</a></code>.</p>
</td></tr>
<tr><td><code id="rearrange_+3A_method">method</code></td>
<td>
<p>String specifying the arrangement (clustering) method.
Clustering is achieved via <code><a href="seriation.html#topic+seriate">seriate</a></code>, which can be
consulted for a complete list of clustering methods. Default = &quot;PCA&quot;.</p>
</td></tr>
<tr><td><code id="rearrange_+3A_absolute">absolute</code></td>
<td>
<p>Boolean whether absolute values for the correlations should
be used for clustering.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>cor_df. See <code><a href="#topic+correlate">correlate</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- correlate(mtcars)

rearrange(x) # Default settings
rearrange(x, method = "HC") # Different seriation method
rearrange(x, absolute = FALSE) # Not using absolute values for arranging
</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+autoplot'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>ggplot2</dt><dd><p><code><a href="ggplot2.html#topic+autoplot">autoplot</a></code></p>
</dd>
</dl>

<hr>
<h2 id='retract'>Creates a data frame from a stretched correlation table</h2><span id='topic+retract'></span>

<h3>Description</h3>

<p><code>retract</code> does the opposite of what <code>stretch</code> does
</p>


<h3>Usage</h3>

<pre><code class='language-R'>retract(.data, x, y, val)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="retract_+3A_.data">.data</code></td>
<td>
<p>A data.frame or tibble containing at least three variables: x, y and the value</p>
</td></tr>
<tr><td><code id="retract_+3A_x">x</code></td>
<td>
<p>The name of the column to use from .data as x</p>
</td></tr>
<tr><td><code id="retract_+3A_y">y</code></td>
<td>
<p>The name of the column to use from .data as y</p>
</td></tr>
<tr><td><code id="retract_+3A_val">val</code></td>
<td>
<p>The name of the column to use from .data to use as the value</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- correlate(mtcars)
xs &lt;- stretch(x)
retract(xs)
</code></pre>

<hr>
<h2 id='rplot'>Plot a correlation data frame.</h2><span id='topic+rplot'></span>

<h3>Description</h3>

<p>Plot a correlation data frame using ggplot2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rplot(
  rdf,
  legend = TRUE,
  shape = 16,
  colours = c("indianred2", "white", "skyblue1"),
  print_cor = FALSE,
  colors,
  .order = c("default", "alphabet")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rplot_+3A_rdf">rdf</code></td>
<td>
<p>Correlation data frame (see <code><a href="#topic+correlate">correlate</a></code>) or object
that can be coerced to one (see <code><a href="#topic+as_cordf">as_cordf</a></code>).</p>
</td></tr>
<tr><td><code id="rplot_+3A_legend">legend</code></td>
<td>
<p>Boolean indicating whether a legend mapping the colors to the
correlations should be displayed.</p>
</td></tr>
<tr><td><code id="rplot_+3A_shape">shape</code></td>
<td>
<p><code>geom_point</code> aesthetic.</p>
</td></tr>
<tr><td><code id="rplot_+3A_colours">colours</code>, <code id="rplot_+3A_colors">colors</code></td>
<td>
<p>Vector of colors to use for n-color gradient.</p>
</td></tr>
<tr><td><code id="rplot_+3A_print_cor">print_cor</code></td>
<td>
<p>Boolean indicating whether the correlations should be
printed over the shapes.</p>
</td></tr>
<tr><td><code id="rplot_+3A_.order">.order</code></td>
<td>
<p>Either &quot;default&quot;, meaning x and y variables keep the same order
as the columns in <code>x</code>, or &quot;alphabet&quot;, meaning the variables are
alphabetized.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Each value in the correlation data frame is represented by one point/circle
in the output plot. The size of each point corresponds to the absolute value
of the correlation (via the <code>size</code> aesthetic). The color of each point
corresponds to the signed value of the correlation (via the <code>color</code>
aesthetic).
</p>


<h3>Value</h3>

<p>Plots a correlation data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- correlate(mtcars)
rplot(x)

# Common use is following rearrange and shave
x &lt;- rearrange(x, absolute = FALSE)
x &lt;- shave(x)
rplot(x)
rplot(x, print_cor = TRUE)
rplot(x, shape = 20, colors = c("red", "green"), legend = TRUE)
</code></pre>

<hr>
<h2 id='shave'>Shave off upper/lower triangle.</h2><span id='topic+shave'></span>

<h3>Description</h3>

<p>Convert the upper or lower triangle of a correlation data frame (cor_df) to
missing values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shave(x, upper = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="shave_+3A_x">x</code></td>
<td>
<p>cor_df. See <code><a href="#topic+correlate">correlate</a></code>.</p>
</td></tr>
<tr><td><code id="shave_+3A_upper">upper</code></td>
<td>
<p>Boolean. If TRUE, set upper triangle to NA; lower triangle if
FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>cor_df. See <code><a href="#topic+correlate">correlate</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- correlate(mtcars)
shave(x) # Default; shave upper triangle
shave(x, upper = FALSE) # shave lower triangle
</code></pre>

<hr>
<h2 id='stretch'>Stretch correlation data frame into long format.</h2><span id='topic+stretch'></span>

<h3>Description</h3>

<p><code>stretch</code> is a specified implementation of tidyr::gather() to be applied
to a correlation data frame. It will gather the columns into a long-format
data frame. The term column is handled automatically.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stretch(x, na.rm = FALSE, remove.dups = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stretch_+3A_x">x</code></td>
<td>
<p>cor_df. See <code><a href="#topic+correlate">correlate</a></code>.</p>
</td></tr>
<tr><td><code id="stretch_+3A_na.rm">na.rm</code></td>
<td>
<p>Boolean. Whether rows with an NA correlation (originally the
matrix diagonal) should be dropped? Will automatically be set to TRUE if
mirror is FALSE.</p>
</td></tr>
<tr><td><code id="stretch_+3A_remove.dups">remove.dups</code></td>
<td>
<p>Removes duplicate entries, without removing all NAs</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tbl with three columns (x and y variables, and their correlation)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- correlate(mtcars)
stretch(x) # Convert all to long format
stretch(x, na.rm = TRUE) # omit NAs (diagonal in this case)

x &lt;- shave(x) # use shave to set upper triangle to NA and then...
stretch(x, na.rm = TRUE) # omit all NAs, therefore keeping each
# correlation only once.
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
