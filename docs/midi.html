<!DOCTYPE html><html><head><title>Help for package midi</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {midi}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#autoplot.bundle'><p>Plots a cross section of a cylinder bundle using <strong>ggplot2</strong></p></a></li>
<li><a href='#CallaghanCompartment'><p>Callaghan's model for restricted diffusion in a cylinder</p></a></li>
<li><a href='#CylinderBundleCompartment'><p>Cylinder bundle compartment class</p></a></li>
<li><a href='#CylinderCompartment'><p>Cylinder compartment class</p></a></li>
<li><a href='#CylinderRadialCompartment'><p>Cylinder radial compartment class</p></a></li>
<li><a href='#midi-package'><p>midi: Microstructure Information from Diffusion Imaging</p></a></li>
<li><a href='#NeumanCompartment'><p>Neuman's model for restricted diffusion in a cylinder</p></a></li>
<li><a href='#plot.bundle'><p>Plots a cross section of a cylinder bundle</p></a></li>
<li><a href='#plot3d'><p>Plots a 3D representation of a cylinder bundle using <strong>plotly</strong></p></a></li>
<li><a href='#run_app'><p>Runs the MIDI Shiny web application</p></a></li>
<li><a href='#simulate_bundle'><p>Generates a cross section of a cylinder bundle</p></a></li>
<li><a href='#SodermanCompartment'><p>Soderman's model for restricted diffusion in a cylinder</p></a></li>
<li><a href='#StaniszCompartment'><p>Stanisz's model for restricted diffusion in a cylinder</p></a></li>
<li><a href='#VanGelderenCompartment'><p>Van Gelderen's model for restricted diffusion in a cylinder</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Microstructure Information from Diffusion Imaging</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>An implementation of a taxonomy of models of restricted diffusion
    in biological tissues parametrized by the tissue geometry (axis, diameter,
    density, etc.). This is primarily used in the context of diffusion magnetic
    resonance (MR) imaging to model the MR signal attenuation in the presence of
    diffusion gradients. The goal is to provide tools to simulate the MR signal
    attenuation predicted by these models under different experimental
    conditions. The package feeds a companion 'shiny' app available at
    <a href="https://midi-pastrami.apps.math.cnrs.fr">https://midi-pastrami.apps.math.cnrs.fr</a> that serves as a graphical
    interface to the models and tools provided by the package. Models currently
    available are the ones in Neuman (1974) &lt;<a href="https://doi.org/10.1063%2F1.1680931">doi:10.1063/1.1680931</a>&gt;, Van
    Gelderen et al. (1994) &lt;<a href="https://doi.org/10.1006%2Fjmrb.1994.1038">doi:10.1006/jmrb.1994.1038</a>&gt;, Stanisz et al. (1997)
    &lt;<a href="https://doi.org/10.1002%2Fmrm.1910370115">doi:10.1002/mrm.1910370115</a>&gt;, Soderman &amp; Jonsson (1995)
    &lt;<a href="https://doi.org/10.1006%2Fjmra.1995.0014">doi:10.1006/jmra.1995.0014</a>&gt; and Callaghan (1995)
    &lt;<a href="https://doi.org/10.1006%2Fjmra.1995.1055">doi:10.1006/jmra.1995.1055</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/lmjl-alea/midi">https://github.com/lmjl-alea/midi</a>,
<a href="https://lmjl-alea.github.io/midi/">https://lmjl-alea.github.io/midi/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/lmjl-alea/midi/issues">https://github.com/lmjl-alea/midi/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, ggplot2, plotly, purrr, R6, rlang, withr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-04-02 16:24:18 UTC; stamm-a</td>
</tr>
<tr>
<td>Author:</td>
<td>Aymeric Stamm <a href="https://orcid.org/0000-0002-8725-3654"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Aymeric Stamm &lt;aymeric.stamm@cnrs.fr&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-04-03 19:43:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='autoplot.bundle'>Plots a cross section of a cylinder bundle using <strong>ggplot2</strong></h2><span id='topic+autoplot.bundle'></span>

<h3>Description</h3>

<p>Plots a cross section of a cylinder bundle from an object of class <code>bundle</code>
as generated by <code><a href="#topic+simulate_bundle">simulate_bundle()</a></code> using
<a href="https://ggplot2.tidyverse.org"><strong>ggplot2</strong></a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bundle'
autoplot(object, grid_size = 100L, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="autoplot.bundle_+3A_object">object</code></td>
<td>
<p>An object of class <code>bundle</code> as generated by
<code><a href="#topic+simulate_bundle">simulate_bundle()</a></code>.</p>
</td></tr>
<tr><td><code id="autoplot.bundle_+3A_grid_size">grid_size</code></td>
<td>
<p>An integer value specifying the number of points on which
the unit circle should be discretized to draw the spheres. Defaults to
<code>100L</code>.</p>
</td></tr>
<tr><td><code id="autoplot.bundle_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to the <code><a href="ggplot2.html#topic+autoplot">ggplot2::autoplot()</a></code>
method.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="ggplot2.html#topic+ggplot">ggplot2::ggplot()</a></code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>density &lt;- 0.5
voxel_size &lt;- 5 # micrometers
withr::with_seed(1234, {
  out &lt;- simulate_bundle(density, voxel_size)
})
ggplot2::autoplot(out)
</code></pre>

<hr>
<h2 id='CallaghanCompartment'>Callaghan's model for restricted diffusion in a cylinder</h2><span id='topic+CallaghanCompartment'></span>

<h3>Description</h3>

<p>A class to model restricted diffusion in a cylinder using the
Callaghan's model.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+CylinderRadialCompartment">midi::CylinderRadialCompartment</a></code> -&gt; <code>CallaghanCompartment</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-CallaghanCompartment-clone"><code>CallaghanCompartment$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="midi" data-topic="CylinderRadialCompartment" data-id="get_signal"><a href='../../midi/html/CylinderRadialCompartment.html#method-CylinderRadialCompartment-get_signal'><code>midi::CylinderRadialCompartment$get_signal()</code></a></span></li>
<li><span class="pkg-link" data-pkg="midi" data-topic="CylinderRadialCompartment" data-id="initialize"><a href='../../midi/html/CylinderRadialCompartment.html#method-CylinderRadialCompartment-initialize'><code>midi::CylinderRadialCompartment$initialize()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-CallaghanCompartment-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>CallaghanCompartment$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>References</h3>

<p>Callaghan, P. T. (1995). Pulsed-gradient spin-echo NMR for
planar, cylindrical, and spherical pores under conditions of wall
relaxation. Journal of magnetic resonance, Series A, 113(1), 53-59.
</p>

<hr>
<h2 id='CylinderBundleCompartment'>Cylinder bundle compartment class</h2><span id='topic+CylinderBundleCompartment'></span>

<h3>Description</h3>

<p>A class to model restricted diffusion in a bundle of cylinders.
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-CylinderBundleCompartment-new"><code>CylinderBundleCompartment$new()</code></a>
</p>
</li>
<li> <p><a href="#method-CylinderBundleCompartment-get_signal"><code>CylinderBundleCompartment$get_signal()</code></a>
</p>
</li>
<li> <p><a href="#method-CylinderBundleCompartment-clone"><code>CylinderBundleCompartment$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-CylinderBundleCompartment-new"></a>



<h4>Method <code>new()</code></h4>

<p>Instantiates a new cylinder bundle compartment.
</p>


<h5>Usage</h5>

<div class="r"><pre>CylinderBundleCompartment$new(
  axis,
  radius,
  diffusivity,
  cylinder_density,
  axial_diffusivity = NULL,
  radial_diffusivity = NULL,
  n_cylinders = 1L,
  axis_concentration = Inf,
  radius_sd = 0,
  radial_model = c("soderman", "callaghan", "stanisz", "neuman", "vangelderen"),
  seed = 1234
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>axis</code></dt><dd><p>A numeric vector of length 3 and unit norm specifying the
mean axis of the cylinder population.</p>
</dd>
<dt><code>radius</code></dt><dd><p>A positive numeric value specifying the mean radius of the
cylinder population in meters.</p>
</dd>
<dt><code>diffusivity</code></dt><dd><p>A positive numeric value specifying the diffusivity
within the cylinders in m<code class="reqn">^2</code>.s<code class="reqn">^{-1}</code>.</p>
</dd>
<dt><code>cylinder_density</code></dt><dd><p>A numeric value specifying the density of the
cylinders in the voxel. Must be between 0 and 1.</p>
</dd>
<dt><code>axial_diffusivity</code></dt><dd><p>A numeric value specifying the axial diffusivity
in the space outside the cylinders in m<code class="reqn">^2</code>.s<code class="reqn">^{-1}</code>. If not
provided, defaults to a tortuosity model reducing the intrinsic
diffusivity depending on orientation dispersion. Defaults to <code>NULL</code>.</p>
</dd>
<dt><code>radial_diffusivity</code></dt><dd><p>A numeric value specifying the radial
diffusivity in the space outside the cylinders in
m<code class="reqn">^2</code>.s<code class="reqn">^{-1}</code>. If not provided, defaults to a tortuosity model
reducing the axial diffusivity depending on radius heterogeneity.
Defaults to <code>NULL</code>.</p>
</dd>
<dt><code>n_cylinders</code></dt><dd><p>An integer value specifying the number of cylinders in
the bundle. Defaults to <code>1L</code>.</p>
</dd>
<dt><code>axis_concentration</code></dt><dd><p>A numeric value specifying the concentration of
cylinders along the mean axis. Defaults to <code>Inf</code>.</p>
</dd>
<dt><code>radius_sd</code></dt><dd><p>A numeric value specifying the standard deviation of the
radius of the cylinder population in meters. Defaults to <code>0</code>.</p>
</dd>
<dt><code>radial_model</code></dt><dd><p>A character string specifying the radial model to
use. Choices are <code>"soderman"</code>, <code>"callaghan"</code>, <code>"stanisz"</code>, <code>"neuman"</code>,
and <code>"vangelderen"</code>. Defaults to <code>"soderman"</code>.</p>
</dd>
<dt><code>seed</code></dt><dd><p>An integer value specifying the seed for the random number
generator. Defaults to <code>1234</code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>An instance of the <code><a href="#topic+CylinderBundleCompartment">CylinderBundleCompartment</a></code> class.
</p>


<hr>
<a id="method-CylinderBundleCompartment-get_signal"></a>



<h4>Method <code>get_signal()</code></h4>

<p>Computes the signal attenuation predicted by the model.
</p>


<h5>Usage</h5>

<div class="r"><pre>CylinderBundleCompartment$get_signal(
  small_delta,
  big_delta,
  G,
  direction,
  echo_time = NULL,
  n_max = 20L,
  m_max = 50L
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>small_delta</code></dt><dd><p>A numeric value specifying the duration of the
gradient pulse in seconds.</p>
</dd>
<dt><code>big_delta</code></dt><dd><p>A numeric value specifying the duration between the
gradient pulses in seconds.</p>
</dd>
<dt><code>G</code></dt><dd><p>A numeric value specifying the strength of the gradient in
T.m<code class="reqn">^{-1}</code>.</p>
</dd>
<dt><code>direction</code></dt><dd><p>A length-3 numeric vector specifying the direction of
the gradient.</p>
</dd>
<dt><code>echo_time</code></dt><dd><p>A numeric value specifying the echo time in seconds.</p>
</dd>
<dt><code>n_max</code></dt><dd><p>An integer value specifying the maximum order of the Bessel
function. Defaults to <code>20L</code>.</p>
</dd>
<dt><code>m_max</code></dt><dd><p>An integer value specifying the maximum number of extrema
for the Bessel function. Defaults to <code>50L</code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A numeric value storing the predicted signal attenuation.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>cylinderBundleComp &lt;- CylinderBundleCompartment$new(
  axis = c(0, 0, 1),
  radius = 1e-5,
  diffusivity = 2.0e-9,
  cylinder_density = 0.5,
  radial_model = "soderman"
)
cylinderBundleComp$get_signal(
  small_delta = 0.03,
  big_delta = 0.03,
  G = 0.040,
  direction = c(0, 0, 1)
)
</pre>
</div>


<hr>
<a id="method-CylinderBundleCompartment-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>CylinderBundleCompartment$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `CylinderBundleCompartment$get_signal`
## ------------------------------------------------

cylinderBundleComp &lt;- CylinderBundleCompartment$new(
  axis = c(0, 0, 1),
  radius = 1e-5,
  diffusivity = 2.0e-9,
  cylinder_density = 0.5,
  radial_model = "soderman"
)
cylinderBundleComp$get_signal(
  small_delta = 0.03,
  big_delta = 0.03,
  G = 0.040,
  direction = c(0, 0, 1)
)
</code></pre>

<hr>
<h2 id='CylinderCompartment'>Cylinder compartment class</h2><span id='topic+CylinderCompartment'></span>

<h3>Description</h3>

<p>A class to model restricted diffusion in a cylinder.
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-CylinderCompartment-new"><code>CylinderCompartment$new()</code></a>
</p>
</li>
<li> <p><a href="#method-CylinderCompartment-get_signal"><code>CylinderCompartment$get_signal()</code></a>
</p>
</li>
<li> <p><a href="#method-CylinderCompartment-clone"><code>CylinderCompartment$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-CylinderCompartment-new"></a>



<h4>Method <code>new()</code></h4>

<p>Instantiates a new cylinder compartment.
</p>


<h5>Usage</h5>

<div class="r"><pre>CylinderCompartment$new(
  axis,
  radius,
  diffusivity,
  radial_model = c("soderman", "callaghan", "stanisz", "neuman", "vangelderen")
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>axis</code></dt><dd><p>A length-3 numeric vector specifying the axis of the
cylinder.</p>
</dd>
<dt><code>radius</code></dt><dd><p>A numeric value specifying the radius of the cylinder in
meters.</p>
</dd>
<dt><code>diffusivity</code></dt><dd><p>A numeric value specifying the diffusivity within the
cylinder in m<code class="reqn">^2</code>.s<code class="reqn">^{-1}</code>.</p>
</dd>
<dt><code>radial_model</code></dt><dd><p>A character string specifying the radial model to
use. Choices are <code>"soderman"</code>, <code>"callaghan"</code>, <code>"stanisz"</code>, <code>"neuman"</code>,
and <code>"vangelderen"</code>. Defaults to <code>"soderman"</code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>An instance of the <code><a href="#topic+CylinderCompartment">CylinderCompartment</a></code> class.
</p>


<hr>
<a id="method-CylinderCompartment-get_signal"></a>



<h4>Method <code>get_signal()</code></h4>

<p>Computes the signal attenuation predicted by the model.
</p>


<h5>Usage</h5>

<div class="r"><pre>CylinderCompartment$get_signal(
  small_delta,
  big_delta,
  G,
  direction,
  echo_time = NULL,
  n_max = 20L,
  m_max = 50L
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>small_delta</code></dt><dd><p>A numeric value specifying the duration of the
gradient pulse in seconds.</p>
</dd>
<dt><code>big_delta</code></dt><dd><p>A numeric value specifying the duration between the
gradient pulses in seconds.</p>
</dd>
<dt><code>G</code></dt><dd><p>A numeric value specifying the strength of the gradient in
T.m<code class="reqn">^{-1}</code>.</p>
</dd>
<dt><code>direction</code></dt><dd><p>A length-3 numeric vector specifying the direction of
the gradient.</p>
</dd>
<dt><code>echo_time</code></dt><dd><p>A numeric value specifying the echo time in seconds.</p>
</dd>
<dt><code>n_max</code></dt><dd><p>An integer value specifying the maximum order of the Bessel
function. Defaults to <code>20L</code>.</p>
</dd>
<dt><code>m_max</code></dt><dd><p>An integer value specifying the maximum number of extrema
for the Bessel function. Defaults to <code>50L</code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A numeric value storing the predicted signal attenuation.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>cylinderComp &lt;- CylinderCompartment$new(
  axis = c(0, 0, 1),
  radius = 1e-6,
  diffusivity = 2.0e-9,
  radial_model = "soderman"
)
cylinderComp$get_signal(
  small_delta = 0.03,
  big_delta = 0.03,
  G = 0.040,
  direction = c(0, 0, 1)
)
</pre>
</div>


<hr>
<a id="method-CylinderCompartment-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>CylinderCompartment$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `CylinderCompartment$get_signal`
## ------------------------------------------------

cylinderComp &lt;- CylinderCompartment$new(
  axis = c(0, 0, 1),
  radius = 1e-6,
  diffusivity = 2.0e-9,
  radial_model = "soderman"
)
cylinderComp$get_signal(
  small_delta = 0.03,
  big_delta = 0.03,
  G = 0.040,
  direction = c(0, 0, 1)
)
</code></pre>

<hr>
<h2 id='CylinderRadialCompartment'>Cylinder radial compartment class</h2><span id='topic+CylinderRadialCompartment'></span>

<h3>Description</h3>

<p>A class to model restricted diffusion in a cylinder in the plane
perpendicular to the cylinder axis.
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-CylinderRadialCompartment-new"><code>CylinderRadialCompartment$new()</code></a>
</p>
</li>
<li> <p><a href="#method-CylinderRadialCompartment-get_signal"><code>CylinderRadialCompartment$get_signal()</code></a>
</p>
</li>
<li> <p><a href="#method-CylinderRadialCompartment-clone"><code>CylinderRadialCompartment$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-CylinderRadialCompartment-new"></a>



<h4>Method <code>new()</code></h4>

<p>Instantiates a new cylinder radial compartment.
</p>


<h5>Usage</h5>

<div class="r"><pre>CylinderRadialCompartment$new(radius, diffusivity)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>radius</code></dt><dd><p>A numeric value specifying the radius of the cylinder in
meters.</p>
</dd>
<dt><code>diffusivity</code></dt><dd><p>A numeric value specifying the diffusivity within the
cylinder in m<code class="reqn">^2</code>.s<code class="reqn">^{-1}</code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>An instance of the <code><a href="#topic+CylinderRadialCompartment">CylinderRadialCompartment</a></code> class.
</p>


<hr>
<a id="method-CylinderRadialCompartment-get_signal"></a>



<h4>Method <code>get_signal()</code></h4>

<p>Computes the signal attenuation predicted by the model.
</p>


<h5>Usage</h5>

<div class="r"><pre>CylinderRadialCompartment$get_signal(
  small_delta,
  big_delta,
  G,
  echo_time = NULL,
  n_max = 20L,
  m_max = 50L
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>small_delta</code></dt><dd><p>A numeric value specifying the duration of the
gradient pulse in seconds.</p>
</dd>
<dt><code>big_delta</code></dt><dd><p>A numeric value specifying the duration between the
gradient pulses in seconds.</p>
</dd>
<dt><code>G</code></dt><dd><p>A numeric value specifying the strength of the gradient in
T.m<code class="reqn">^{-1}</code>.</p>
</dd>
<dt><code>echo_time</code></dt><dd><p>A numeric value specifying the echo time in seconds.</p>
</dd>
<dt><code>n_max</code></dt><dd><p>An integer value specifying the maximum order of the Bessel
function. Defaults to <code>20L</code>.</p>
</dd>
<dt><code>m_max</code></dt><dd><p>An integer value specifying the maximum number of extrema
for the Bessel function. Defaults to <code>50L</code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A numeric value storing the predicted signal attenuation.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>sodermanComp &lt;- SodermanCompartment$new(
  radius = 1e-6,
  diffusivity = 2.0e-9
)
sodermanComp$get_signal(0.03, 0.03, 0.040)

staniszComp &lt;- StaniszCompartment$new(
  radius = 1e-6,
  diffusivity = 2.0e-9
)
staniszComp$get_signal(0.03, 0.03, 0.040)

neumanComp &lt;- NeumanCompartment$new(
  radius = 1e-6,
  diffusivity = 2.0e-9
)
neumanComp$get_signal(0.03, 0.03, 0.040, echo_time = 0.040)

callaghanComp &lt;- CallaghanCompartment$new(
  radius = 1e-6,
  diffusivity = 2.0e-9
)
callaghanComp$get_signal(0.03, 0.03, 0.040)

vanGelderenComp &lt;- VanGelderenCompartment$new(
  radius = 1e-6,
  diffusivity = 2.0e-9
)
vanGelderenComp$get_signal(0.03, 0.03, 0.040)
</pre>
</div>


<hr>
<a id="method-CylinderRadialCompartment-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>CylinderRadialCompartment$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `CylinderRadialCompartment$get_signal`
## ------------------------------------------------

sodermanComp &lt;- SodermanCompartment$new(
  radius = 1e-6,
  diffusivity = 2.0e-9
)
sodermanComp$get_signal(0.03, 0.03, 0.040)

staniszComp &lt;- StaniszCompartment$new(
  radius = 1e-6,
  diffusivity = 2.0e-9
)
staniszComp$get_signal(0.03, 0.03, 0.040)

neumanComp &lt;- NeumanCompartment$new(
  radius = 1e-6,
  diffusivity = 2.0e-9
)
neumanComp$get_signal(0.03, 0.03, 0.040, echo_time = 0.040)

callaghanComp &lt;- CallaghanCompartment$new(
  radius = 1e-6,
  diffusivity = 2.0e-9
)
callaghanComp$get_signal(0.03, 0.03, 0.040)

vanGelderenComp &lt;- VanGelderenCompartment$new(
  radius = 1e-6,
  diffusivity = 2.0e-9
)
vanGelderenComp$get_signal(0.03, 0.03, 0.040)
</code></pre>

<hr>
<h2 id='midi-package'>midi: Microstructure Information from Diffusion Imaging</h2><span id='topic+midi'></span><span id='topic+midi-package'></span>

<h3>Description</h3>

<p>An implementation of a taxonomy of models of restricted diffusion in biological tissues parametrized by the tissue geometry (axis, diameter, density, etc.). This is primarily used in the context of diffusion magnetic resonance (MR) imaging to model the MR signal attenuation in the presence of diffusion gradients. The goal is to provide tools to simulate the MR signal attenuation predicted by these models under different experimental conditions. The package feeds a companion 'shiny' app available at <a href="https://midi-pastrami.apps.math.cnrs.fr">https://midi-pastrami.apps.math.cnrs.fr</a> that serves as a graphical interface to the models and tools provided by the package. Models currently available are the ones in Neuman (1974) <a href="https://doi.org/10.1063/1.1680931">doi:10.1063/1.1680931</a>, Van Gelderen et al. (1994) <a href="https://doi.org/10.1006/jmrb.1994.1038">doi:10.1006/jmrb.1994.1038</a>, Stanisz et al. (1997) <a href="https://doi.org/10.1002/mrm.1910370115">doi:10.1002/mrm.1910370115</a>, Soderman &amp; Jonsson (1995) <a href="https://doi.org/10.1006/jmra.1995.0014">doi:10.1006/jmra.1995.0014</a> and Callaghan (1995) <a href="https://doi.org/10.1006/jmra.1995.1055">doi:10.1006/jmra.1995.1055</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Aymeric Stamm <a href="mailto:aymeric.stamm@cnrs.fr">aymeric.stamm@cnrs.fr</a> (<a href="https://orcid.org/0000-0002-8725-3654">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/lmjl-alea/midi">https://github.com/lmjl-alea/midi</a>
</p>
</li>
<li> <p><a href="https://lmjl-alea.github.io/midi/">https://lmjl-alea.github.io/midi/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/lmjl-alea/midi/issues">https://github.com/lmjl-alea/midi/issues</a>
</p>
</li></ul>


<hr>
<h2 id='NeumanCompartment'>Neuman's model for restricted diffusion in a cylinder</h2><span id='topic+NeumanCompartment'></span>

<h3>Description</h3>

<p>A class to model restricted diffusion in a cylinder using the
Neuman's model.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+CylinderRadialCompartment">midi::CylinderRadialCompartment</a></code> -&gt; <code>NeumanCompartment</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-NeumanCompartment-clone"><code>NeumanCompartment$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="midi" data-topic="CylinderRadialCompartment" data-id="get_signal"><a href='../../midi/html/CylinderRadialCompartment.html#method-CylinderRadialCompartment-get_signal'><code>midi::CylinderRadialCompartment$get_signal()</code></a></span></li>
<li><span class="pkg-link" data-pkg="midi" data-topic="CylinderRadialCompartment" data-id="initialize"><a href='../../midi/html/CylinderRadialCompartment.html#method-CylinderRadialCompartment-initialize'><code>midi::CylinderRadialCompartment$initialize()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-NeumanCompartment-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>NeumanCompartment$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>References</h3>

<p>Neuman, C. H. (1974). Spin echo of spins diffusing in a bounded
medium. The Journal of Chemical Physics, 60(11), 4508-4511.
</p>

<hr>
<h2 id='plot.bundle'>Plots a cross section of a cylinder bundle</h2><span id='topic+plot.bundle'></span>

<h3>Description</h3>

<p>Plots a cross section of a cylinder bundle
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bundle'
plot(x, grid_size = 100L, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.bundle_+3A_x">x</code></td>
<td>
<p>An object of class <code>bundle</code> as generated by
<code><a href="#topic+simulate_bundle">simulate_bundle()</a></code>.</p>
</td></tr>
<tr><td><code id="plot.bundle_+3A_grid_size">grid_size</code></td>
<td>
<p>An integer value specifying the number of points on which
the unit circle should be discretized to draw the spheres. Defaults to
<code>100L</code>.</p>
</td></tr>
<tr><td><code id="plot.bundle_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to the <code><a href="ggplot2.html#topic+autoplot">ggplot2::autoplot()</a></code>
method.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>density &lt;- 0.5
voxel_size &lt;- 5 # micrometers
withr::with_seed(1234, {
  out &lt;- simulate_bundle(density, voxel_size)
})
plot(out)
</code></pre>

<hr>
<h2 id='plot3d'>Plots a 3D representation of a cylinder bundle using <strong>plotly</strong></h2><span id='topic+plot3d'></span>

<h3>Description</h3>

<p>Plots a 3D representation of a cylinder bundle from an object of class
<code>bundle</code> as generated by <code><a href="#topic+simulate_bundle">simulate_bundle()</a></code> using
<a href="https://plotly.com/r/"><strong>plotly</strong></a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot3d(b, show_linear_mesh = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot3d_+3A_b">b</code></td>
<td>
<p>An object of class <code>bundle</code> as generated by
<code><a href="#topic+simulate_bundle">simulate_bundle()</a></code>.</p>
</td></tr>
<tr><td><code id="plot3d_+3A_show_linear_mesh">show_linear_mesh</code></td>
<td>
<p>A logical value indicating whether the linear mesh of
each cylinder should be displayed. Defaults to <code>FALSE</code> for computational
efficiency.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An HTML widget of class <code><a href="plotly.html#topic+plotly">plotly::plotly</a></code> storing the 3D
visualization of the cylinder bundle.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>density &lt;- 0.5
voxel_size &lt;- 5 # micrometers
withr::with_seed(1234, {
  out &lt;- simulate_bundle(density, voxel_size)
})
plot3d(out)
</code></pre>

<hr>
<h2 id='run_app'>Runs the MIDI Shiny web application</h2><span id='topic+run_app'></span>

<h3>Description</h3>

<p>This is a helper function to run the MIDI Shiny web application in the
default web browser.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_app()
</code></pre>


<h3>Value</h3>

<p>Nothing, but launches the Shiny app in the default web browser.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  run_app()

</code></pre>

<hr>
<h2 id='simulate_bundle'>Generates a cross section of a cylinder bundle</h2><span id='topic+simulate_bundle'></span>

<h3>Description</h3>

<p>Generates a cross section of a cylinder bundle with a given density and voxel
size. The cross section is generated by simulating a random distribution of
cylinders and computing the intersection of the cylinders with a plane. The
radii of the cylinders are drawn from a Gamma distribution fitted from data
retrieved by histology in the genu of the corpus callosum (Aboitiz et al.,
1992). The number of cylinders is determined by the density and the voxel
size.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulate_bundle(
  density = 0.5,
  voxel_size = 10,
  rel_tol = 0.001,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulate_bundle_+3A_density">density</code></td>
<td>
<p>A numeric value between 0 and 1 specifying the density of the
cylinders in the voxel. Defaults to <code>0.5</code>.</p>
</td></tr>
<tr><td><code id="simulate_bundle_+3A_voxel_size">voxel_size</code></td>
<td>
<p>A numeric value specifying the size of the voxel in micro-
meters. Defaults to <code>10</code>.</p>
</td></tr>
<tr><td><code id="simulate_bundle_+3A_rel_tol">rel_tol</code></td>
<td>
<p>A numeric value specifying the relative tolerance to reach the
target volume defined as <code>density * voxel_size^2</code>. Defaults to <code>1e-3</code>.</p>
</td></tr>
<tr><td><code id="simulate_bundle_+3A_verbose">verbose</code></td>
<td>
<p>A logical value specifying whether to print messages. Defaults
to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the following components:
</p>

<ul>
<li> <p><code>sections</code>: A numeric matrix with 3 columns:
</p>

<ul>
<li> <p><code>x</code>: The x-coordinates of the centers of the cylinders;
</p>
</li>
<li> <p><code>y</code>: The y-coordinates of the centers of the cylinders;
</p>
</li>
<li> <p><code>r</code>: The radii of the cylinders in micrometers.
</p>
</li></ul>

</li>
<li> <p><code>voxel_size</code>: The size of the voxel in micrometers
</p>
</li></ul>



<h3>References</h3>

<p>Aboitiz, F., Scheibel, A. B., Fisher, R. S., &amp; Zaidel, E. (1992).
Fiber composition of the human corpus callosum. Brain research, 598(1-2),
143-153.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>density &lt;- 0.5
voxel_size &lt;- 5 # micrometers
withr::with_seed(1234, {
  out &lt;- simulate_bundle(density, voxel_size)
})

# Actual density in the simulated substrate
sum(out$sections[, "r"]^2 * pi) / voxel_size^2
</code></pre>

<hr>
<h2 id='SodermanCompartment'>Soderman's model for restricted diffusion in a cylinder</h2><span id='topic+SodermanCompartment'></span>

<h3>Description</h3>

<p>A class to model restricted diffusion in a cylinder using the
Soderman's model.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+CylinderRadialCompartment">midi::CylinderRadialCompartment</a></code> -&gt; <code>SodermanCompartment</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-SodermanCompartment-clone"><code>SodermanCompartment$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="midi" data-topic="CylinderRadialCompartment" data-id="get_signal"><a href='../../midi/html/CylinderRadialCompartment.html#method-CylinderRadialCompartment-get_signal'><code>midi::CylinderRadialCompartment$get_signal()</code></a></span></li>
<li><span class="pkg-link" data-pkg="midi" data-topic="CylinderRadialCompartment" data-id="initialize"><a href='../../midi/html/CylinderRadialCompartment.html#method-CylinderRadialCompartment-initialize'><code>midi::CylinderRadialCompartment$initialize()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-SodermanCompartment-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>SodermanCompartment$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>References</h3>

<p>Söderman, O., &amp; Jönsson, B. (1995). Restricted diffusion in
cylindrical geometry. Journal of Magnetic Resonance, Series A, 117(1),
94-97.
</p>

<hr>
<h2 id='StaniszCompartment'>Stanisz's model for restricted diffusion in a cylinder</h2><span id='topic+StaniszCompartment'></span>

<h3>Description</h3>

<p>A class to model restricted diffusion in a cylinder using the
Stanisz's model.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+CylinderRadialCompartment">midi::CylinderRadialCompartment</a></code> -&gt; <code>StaniszCompartment</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-StaniszCompartment-clone"><code>StaniszCompartment$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="midi" data-topic="CylinderRadialCompartment" data-id="get_signal"><a href='../../midi/html/CylinderRadialCompartment.html#method-CylinderRadialCompartment-get_signal'><code>midi::CylinderRadialCompartment$get_signal()</code></a></span></li>
<li><span class="pkg-link" data-pkg="midi" data-topic="CylinderRadialCompartment" data-id="initialize"><a href='../../midi/html/CylinderRadialCompartment.html#method-CylinderRadialCompartment-initialize'><code>midi::CylinderRadialCompartment$initialize()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-StaniszCompartment-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>StaniszCompartment$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>References</h3>

<p>Stanisz, G. J., Wright, G. A., Henkelman, R. M., &amp; Szafer, A.
(1997). An analytical model of restricted diffusion in bovine optic nerve.
Magnetic Resonance in Medicine, 37(1), 103-111.
</p>

<hr>
<h2 id='VanGelderenCompartment'>Van Gelderen's model for restricted diffusion in a cylinder</h2><span id='topic+VanGelderenCompartment'></span>

<h3>Description</h3>

<p>A class to model restricted diffusion in a cylinder using the
Van Gelderen's model.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+CylinderRadialCompartment">midi::CylinderRadialCompartment</a></code> -&gt; <code>VanGelderenCompartment</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-VanGelderenCompartment-clone"><code>VanGelderenCompartment$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="midi" data-topic="CylinderRadialCompartment" data-id="get_signal"><a href='../../midi/html/CylinderRadialCompartment.html#method-CylinderRadialCompartment-get_signal'><code>midi::CylinderRadialCompartment$get_signal()</code></a></span></li>
<li><span class="pkg-link" data-pkg="midi" data-topic="CylinderRadialCompartment" data-id="initialize"><a href='../../midi/html/CylinderRadialCompartment.html#method-CylinderRadialCompartment-initialize'><code>midi::CylinderRadialCompartment$initialize()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-VanGelderenCompartment-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>VanGelderenCompartment$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>References</h3>

<p>Vangelderen, P., DesPres, D., Vanzijl, P. C. M., &amp; Moonen, C. T.
W. (1994). Evaluation of restricted diffusion in cylinders. Phosphocreatine
in rabbit leg muscle. Journal of Magnetic Resonance, Series B, 103(3),
255-260.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
