<!DOCTYPE html><html><head><title>Help for package mscsweblm4r</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mscsweblm4r}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#mscsweblm4r'><p>R Client for the Microsoft Cognitive Services Web Language Model REST API</p></a></li>
<li><a href='#weblm'><p>The <code>weblm</code> object</p></a></li>
<li><a href='#weblmBreakIntoWords'><p>Breaks a string of concatenated words into individual words</p></a></li>
<li><a href='#weblmCalculateConditionalProbability'><p>Calculates the conditional probability that a word follows a sequence</p>
of words.</a></li>
<li><a href='#weblmCalculateJointProbability'><p>Calculates the joint probability that a sequence of words will appear together.</p></a></li>
<li><a href='#weblmGenerateNextWords'><p>Returns the words most likely to follow a sequence of words.</p></a></li>
<li><a href='#weblmInit'><p>Initializes the <span class="pkg">mscsweblm4r</span> package.</p></a></li>
<li><a href='#weblmListAvailableModels'><p>Retrieves the list of web language models available.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>R Client for the Microsoft Cognitive Services Web Language Model
REST API</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Phil Ferriere &lt;pferriere@hotmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>R Client for the Microsoft Cognitive Services Web Language Model
    REST API, including Break Into Words, Calculate Conditional
    Probability, Calculate Joint Probability, Generate Next Words, and List
    Available Models. A valid account MUST be registered at the Microsoft
    Cognitive Services website <a href="https://www.microsoft.com/cognitive-services/">https://www.microsoft.com/cognitive-services/</a>
    in order to obtain a (free) API key. Without an API key, this package will
    not work properly.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/philferriere/mscsweblm4r">https://github.com/philferriere/mscsweblm4r</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="http://www.github.com/philferriere/mscsweblm4r/issues">http://www.github.com/philferriere/mscsweblm4r/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, httr, jsonlite, pander</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat, mscstexta4r</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>A valid account MUST be registered with Microsoft's
Cognitive Services website
&lt;https://www.microsoft.com/cognitive-services/&gt; in order to
obtain a (free) API key. Without an API key, this package will
not work properly.</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>5.0.1</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2016-06-15 16:20:27 UTC; Phil</td>
</tr>
<tr>
<td>Author:</td>
<td>Phil Ferriere [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2016-06-15 22:02:43</td>
</tr>
</table>
<hr>
<h2 id='mscsweblm4r'>R Client for the Microsoft Cognitive Services Web Language Model REST API</h2><span id='topic+mscsweblm4r'></span><span id='topic+mscsweblm4r-package'></span>

<h3>Description</h3>

<p><span class="pkg">mscsweblm4r</span> is a client/wrapper/interface for the Microsoft
Cognitive Services (MSCS) Web Language Model (Web LM) REST API. To use this
package, you MUST have a valid account with <a href="https://www.microsoft.com/cognitive-services">https://www.microsoft.com/cognitive-services</a>.
Once you have an account, Microsoft will provide you with a (free) API key
you can use with this package.
</p>


<h3>The MSCS Web LM REST API</h3>

<p>Microsoft Cognitive Services &ndash; formerly known as Project Oxford &ndash; are a set
of APIs, SDKs and services that developers can use to add AI features to
their apps. Those features include emotion and video detection; facial,
speech and vision recognition; and speech and language understanding.
</p>
<p>The Web Language Model REST API provides tools for natural language
processing and is documented at <a href="https://www.microsoft.com/cognitive-services/en-us/web-language-model-api/documentation">https://www.microsoft.com/cognitive-services/en-us/web-language-model-api/documentation</a>.
Per Microsoft's website, this API uses smoothed backoff N-gram language models
(supporting Markov order up to 5) that were trained on four web-scale American
English corpora collected by Bing (web page body, title, anchor and query).
</p>
<p>The MSCS Web LM REST API supports the following lookup operations:
</p>

<ul>
<li><p> Insert spaces into a string of words adjoined together without any spaces (hashtags, URLs, etc.).
</p>
</li>
<li><p> Calculate the joint probability that a sequence of words will appear together.
</p>
</li>
<li><p> Compute the conditional probability that a specific word will follow an existing sequence of words.
</p>
</li>
<li><p> Get the list of words (completions) most likely to follow a given sequence of words.
</p>
</li>
<li><p> Retrieve the list of supported language models.
</p>
</li></ul>



<h3><span class="pkg">mscsweblm4r</span> Functions</h3>

<p>The following five <span class="pkg">mscsweblm4r</span> core functions are used to wrap the
MSCS Web LM REST API:
</p>

<ul>
<li><p> Word breaking - <code><a href="#topic+weblmBreakIntoWords">weblmBreakIntoWords</a></code> function
</p>
</li>
<li><p> Joint probability - <code><a href="#topic+weblmCalculateJointProbability">weblmCalculateJointProbability</a></code> function
</p>
</li>
<li><p> Conditional probability - <code><a href="#topic+weblmCalculateConditionalProbability">weblmCalculateConditionalProbability</a></code> function
</p>
</li>
<li><p> Sequence completions - <code><a href="#topic+weblmGenerateNextWords">weblmGenerateNextWords</a></code> function
</p>
</li>
<li><p> Models list - <code><a href="#topic+weblmListAvailableModels">weblmListAvailableModels</a></code> function
</p>
</li></ul>

<p>The <code><a href="#topic+weblmInit">weblmInit</a></code> configuration function is used to set the REST
API URL and the private API key. It needs to be called <em>only once</em>,
after package load, or the core functions will not work properly.
</p>


<h3>Package Loading and Configuration</h3>

<p>After loading the <span class="pkg">mscsweblm4r</span> package with the <code>library()</code> function,
you must call the <code><a href="#topic+weblmInit">weblmInit</a></code> before you can call any of
the core <span class="pkg">mscsweblm4r</span> functions.
</p>
<p>The <code><a href="#topic+weblmInit">weblmInit</a></code> configuration function will first check to see
if the variable <code>MSCS_WEBLANGUAGEMODEL_CONFIG_FILE</code> exists in the system
environment. If it does, the package will use that as the path to the
configuration file.
</p>
<p>If <code>MSCS_WEBLANGUAGEMODEL_CONFIG_FILE</code> doesn't exist, it will look for
the file <code>.mscskeys.json</code> in the current user's home directory (that's
<code>~/.mscskeys.json</code> on Linux, and something like <code>C:/Users/Phil/Documents/.mscskeys.json</code>
on Windows). If the file is found, the package will load the API key and URL
from it.
</p>
<p>If using a file, please make sure it has the following structure:
</p>
<pre>
{
  "weblanguagemodelurl": "https://api.projectoxford.ai/text/weblm/v1.0/",
  "weblanguagemodelkey": "...MSCS Web Language Model API key goes here..."
}
</pre>
<p>If no configuration file is found, <code><a href="#topic+weblmInit">weblmInit</a></code> will attempt to
pick up its configuration information from two Sys env variables instead:
</p>
<p><code>MSCS_WEBLANGUAGEMODEL_URL</code> - the URL for the Web LM REST API.
</p>
<p><code>MSCS_WEBLANGUAGEMODEL_KEY</code> - your personal Web LM REST API key.
</p>


<h3>S3 Object of the Class <code><a href="#topic+weblm">weblm</a></code></h3>

<p>The five core functions of the <span class="pkg">mscsweblm4r</span> package return S3 objects
of the class <code><a href="#topic+weblm">weblm</a></code>. Those objects expose formatted results, the REST
API JSON response, and the HTTP request.
</p>


<h3>Error Handling</h3>

<p>The MSCS Web LM API is a REST API. HTTP requests over a network and the
Internet can fail because of congestion, because the web site is down for
maintenance, because of firewall configuration issues, etc.
</p>
<p>The API can also fail if you've exhausted your call volume quota or are
exceeding the API calls rate limit. Unfortunately, MSCS does not expose an
API you can query to check if you're about to exceed your quota for instance.
The only way you'll know for sure is by looking at the error code returned
after an API call has failed.
</p>
<p>To help with error handling, we recommend the systematic use of
<code>tryCatch()</code> when calling <span class="pkg">mscsweblm4r</span>'s core functions. Its
mechanism may appear a bit daunting at first, but it is well documented at <a href="http://www.inside-r.org/r-doc/base/signalCondition">http://www.inside-r.org/r-doc/base/signalCondition</a>.
We use it in many of the code examples.
</p>


<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>

<hr>
<h2 id='weblm'>The <code>weblm</code> object</h2><span id='topic+weblm'></span>

<h3>Description</h3>

<p>The <code>weblm</code> object exposes formatted results, the REST API JSON
response, and the HTTP request:
</p>

<ul>
<li> <p><code>result</code> the results in <code>data.frame</code> format
</p>
</li>
<li> <p><code>json</code> the REST API JSON response
</p>
</li>
<li> <p><code>request</code> the HTTP request
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>

<hr>
<h2 id='weblmBreakIntoWords'>Breaks a string of concatenated words into individual words</h2><span id='topic+weblmBreakIntoWords'></span>

<h3>Description</h3>

<p>This function inserts spaces into a string of words lacking spaces,
like a hashtag or part of a URL. Punctuation or exotic characters can prevent
a string from being broken, so it's best to limit input strings to lower-case,
alpha-numeric characters. The input string must be in ASCII format.
</p>
<p>Internally, this function invokes the Microsoft Cognitive Services Web
Language Model REST API documented at <a href="https://www.microsoft.com/cognitive-services/en-us/web-language-model-api/documentation">https://www.microsoft.com/cognitive-services/en-us/web-language-model-api/documentation</a>.
</p>
<p>You MUST have a valid Microsoft Cognitive Services account and an API key for
this function to work properly. See <a href="https://www.microsoft.com/cognitive-services/en-us/pricing">https://www.microsoft.com/cognitive-services/en-us/pricing</a>
for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weblmBreakIntoWords(textToBreak, modelToUse = "body", orderOfNgram = 5L,
  maxNumOfCandidatesReturned = 5L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="weblmBreakIntoWords_+3A_texttobreak">textToBreak</code></td>
<td>
<p>(character) Line of text to break into words. If spaces
are present, they will be interpreted as hard breaks and maintained, except
for leading or trailing spaces, which will be trimmed. Must be in ASCII format.</p>
</td></tr>
<tr><td><code id="weblmBreakIntoWords_+3A_modeltouse">modelToUse</code></td>
<td>
<p>(character) Which language model to use, supported values:
&quot;title&quot;, &quot;anchor&quot;, &quot;query&quot;, or &quot;body&quot; (optional, default: &quot;body&quot;)</p>
</td></tr>
<tr><td><code id="weblmBreakIntoWords_+3A_orderofngram">orderOfNgram</code></td>
<td>
<p>(integer) Which order of N-gram to use, supported values:
1L, 2L, 3L, 4L, or 5L (optional, default: 5L)</p>
</td></tr>
<tr><td><code id="weblmBreakIntoWords_+3A_maxnumofcandidatesreturned">maxNumOfCandidatesReturned</code></td>
<td>
<p>(integer) Maximum number of candidates to
return (optional, default: 5L)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An S3 object of the class <code><a href="#topic+weblm">weblm</a></code>. The results are stored in
the <code>results</code> dataframe inside this object. The dataframe contains the
candidate breakdowns and their log(probability).
</p>


<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 tryCatch({

   # Break a sentence into words
   textWords &lt;- weblmBreakIntoWords(
     textToBreak = "testforwordbreak", # ASCII only
     modelToUse = "body",              # "title"|"anchor"|"query"(default)|"body"
     orderOfNgram = 5L,                # 1L|2L|3L|4L|5L(default)
     maxNumOfCandidatesReturned = 5L   # Default: 5L
   )

   # Class and structure of textWords
   class(textWords)
   #&gt; [1] "weblm"

   str(textWords, max.level = 1)
   #&gt; List of 3
   #&gt;  $ results:'data.frame':  5 obs. of  2 variables:
   #&gt;  $ json   : chr "{"candidates":[{"words":"test for word break", __truncated__ }]}
   #&gt;  $ request:List of 7
   #&gt;   ..- attr(*, "class")= chr "request"
   #&gt;  - attr(*, "class")= chr "weblm"

   # Print results
   pandoc.table(textWords$results)
   #&gt; ---------------------------------
   #&gt;       words          probability
   #&gt; ------------------- -------------
   #&gt; test for word break    -13.83
   #&gt;
   #&gt;  test for wordbreak    -14.63
   #&gt;
   #&gt;  testfor word break    -15.94
   #&gt;
   #&gt;  test forword break    -16.72
   #&gt;
   #&gt;   testfor wordbreak    -17.41
   #&gt; ---------------------------------

 }, error = function(err) {

   # Print error
   geterrmessage()

 })

## End(Not run)
</code></pre>

<hr>
<h2 id='weblmCalculateConditionalProbability'>Calculates the conditional probability that a word follows a sequence
of words.</h2><span id='topic+weblmCalculateConditionalProbability'></span>

<h3>Description</h3>

<p>This function calculates the conditional probability that a
particular word will follow a given sequence of words. The input string must
be in ASCII format.
</p>
<p>Internally, this function invokes the Microsoft Cognitive Services Web
Language Model REST API documented at <a href="https://www.microsoft.com/cognitive-services/en-us/web-language-model-api/documentation">https://www.microsoft.com/cognitive-services/en-us/web-language-model-api/documentation</a>.
</p>
<p>You MUST have a valid Microsoft Cognitive Services account and an API key for
this function to work properly. See <a href="https://www.microsoft.com/cognitive-services/en-us/pricing">https://www.microsoft.com/cognitive-services/en-us/pricing</a>
for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weblmCalculateConditionalProbability(precedingWords, continuations,
  modelToUse = "body", orderOfNgram = 5L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="weblmCalculateConditionalProbability_+3A_precedingwords">precedingWords</code></td>
<td>
<p>(character) Character string for which to calculate
continuation probabilities. Must be in ASCII format.</p>
</td></tr>
<tr><td><code id="weblmCalculateConditionalProbability_+3A_continuations">continuations</code></td>
<td>
<p>(character vector) Vector of words following
<code>precedingWords</code> for which to calculate conditional probabilities.</p>
</td></tr>
<tr><td><code id="weblmCalculateConditionalProbability_+3A_modeltouse">modelToUse</code></td>
<td>
<p>(character) Which language model to use, supported values:
&quot;title&quot;, &quot;anchor&quot;, &quot;query&quot;, or &quot;body&quot; (optional, default: &quot;body&quot;)</p>
</td></tr>
<tr><td><code id="weblmCalculateConditionalProbability_+3A_orderofngram">orderOfNgram</code></td>
<td>
<p>(integer) Which order of N-gram to use, supported values:
1L, 2L, 3L, 4L, or 5L (optional, default: 5L)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An S3 object of the class <code><a href="#topic+weblm">weblm</a></code>. The results are stored in
the <code>results</code> dataframe inside this object. The dataframe contains the
continuation words and their log(probability).
</p>


<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 tryCatch({

   # Calculate conditional probability a particular word will follow a given sequence of words
   conditionalProbabilities &lt;- weblmCalculateConditionalProbability(
     precedingWords = "hello world wide",       # ASCII only
     continuations = c("web", "range", "open"), # ASCII only
     modelToUse = "title",                      # "title"|"anchor"|"query"(default)|"body"
     orderOfNgram = 4L                          # 1L|2L|3L|4L|5L(default)
   )

   # Class and structure of conditionalProbabilities
   class(conditionalProbabilities)
   #&gt; [1] "weblm"

   str(conditionalProbabilities, max.level = 1)
   #&gt; List of 3
   #&gt;  $ results:'data.frame':  3 obs. of  3 variables:
   #&gt;  $ json   : chr "{"results":[{"words":"hello world wide","word":"web", __truncated__ }]}
   #&gt;  $ request:List of 7
   #&gt;   ..- attr(*, "class")= chr "request"
   #&gt;  - attr(*, "class")= chr "weblm"

   # Print results
   pandoc.table(conditionalProbabilities$results)
   #&gt; -------------------------------------
   #&gt;      words        word   probability
   #&gt; ---------------- ------ -------------
   #&gt; hello world wide   web      -0.32
   #&gt;
   #&gt; hello world wide range     -2.403
   #&gt;
   #&gt; hello world wide  open      -2.97
   #&gt; -------------------------------------

 }, error = function(err) {

   # Print error
   geterrmessage()

 })

## End(Not run)
</code></pre>

<hr>
<h2 id='weblmCalculateJointProbability'>Calculates the joint probability that a sequence of words will appear together.</h2><span id='topic+weblmCalculateJointProbability'></span>

<h3>Description</h3>

<p>This function calculates the joint probability that a particular sequence of
words will appear together. The input string must be in ASCII format.
</p>
<p>Internally, this function invokes the Microsoft Cognitive Services Web
Language Model REST API documented at <a href="https://www.microsoft.com/cognitive-services/en-us/web-language-model-api/documentation">https://www.microsoft.com/cognitive-services/en-us/web-language-model-api/documentation</a>.
</p>
<p>You MUST have a valid Microsoft Cognitive Services account and an API key for
this function to work properly. See <a href="https://www.microsoft.com/cognitive-services/en-us/pricing">https://www.microsoft.com/cognitive-services/en-us/pricing</a>
for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weblmCalculateJointProbability(inputWords, modelToUse = "body",
  orderOfNgram = 5L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="weblmCalculateJointProbability_+3A_inputwords">inputWords</code></td>
<td>
<p>(character vector) Vector of character strings for which
to calculate the joint probability. Must be in ASCII format.</p>
</td></tr>
<tr><td><code id="weblmCalculateJointProbability_+3A_modeltouse">modelToUse</code></td>
<td>
<p>(character) Which language model to use, supported values:
&quot;title&quot;, &quot;anchor&quot;, &quot;query&quot;, or &quot;body&quot; (optional, default: &quot;body&quot;)</p>
</td></tr>
<tr><td><code id="weblmCalculateJointProbability_+3A_orderofngram">orderOfNgram</code></td>
<td>
<p>(integer) Which order of N-gram to use, supported values:
1L, 2L, 3L, 4L, or 5L (optional, default: 5L)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An S3 object of the class <code><a href="#topic+weblm">weblm</a></code>. The results are stored in
the <code>results</code> dataframe inside this object. The dataframe contains the
word sequences and their log(probability).
</p>


<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 tryCatch({

   # Calculate joint probability a particular sequence of words will appear together
   jointProbabilities &lt;- weblmCalculateJointProbability(
     inputWords = c("where", "is", "San", "Francisco", "where is",
                    "San Francisco", "where is San Francisco"),  # ASCII only
     modelToUse = "query",                     # "title"|"anchor"|"query"(default)|"body"
     orderOfNgram = 4L                         # 1L|2L|3L|4L|5L(default)
   )

   # Class and structure of jointProbabilities
   class(jointProbabilities)
   #&gt; [1] "weblm"

   str(jointProbabilities, max.level = 1)
   #&gt; List of 3
   #&gt;  $ results:'data.frame':  7 obs. of  2 variables:
   #&gt;  $ json   : chr "{"results":[{"words":"where","probability":-3.378}, __truncated__ ]}
   #&gt;  $ request:List of 7
   #&gt;   ..- attr(*, "class")= chr "request"
   #&gt;  - attr(*, "class")= chr "weblm"

   # Print results
   pandoc.table(jointProbabilities$results)
   #&gt; ------------------------------------
   #&gt;         words           probability
   #&gt; ---------------------- -------------
   #&gt;         where             -3.378
   #&gt;
   #&gt;           is              -2.607
   #&gt;
   #&gt;          san              -3.292
   #&gt;
   #&gt;       francisco           -4.051
   #&gt;
   #&gt;        where is           -3.961
   #&gt;
   #&gt;     san francisco         -4.086
   #&gt;
   #&gt; where is san francisco    -7.998
   #&gt; ------------------------------------

 }, error = function(err) {

   # Print error
   geterrmessage()

 })

## End(Not run)
</code></pre>

<hr>
<h2 id='weblmGenerateNextWords'>Returns the words most likely to follow a sequence of words.</h2><span id='topic+weblmGenerateNextWords'></span>

<h3>Description</h3>

<p>This function returns the list of words (completions) most
likely to follow a given sequence of words. The input string must be in ASCII
format.
</p>
<p>Internally, this function invokes the Microsoft Cognitive Services Web
Language Model REST API documented at <a href="https://www.microsoft.com/cognitive-services/en-us/web-language-model-api/documentation">https://www.microsoft.com/cognitive-services/en-us/web-language-model-api/documentation</a>.
</p>
<p>You MUST have a valid Microsoft Cognitive Services account and an API key for
this function to work properly. See <a href="https://www.microsoft.com/cognitive-services/en-us/pricing">https://www.microsoft.com/cognitive-services/en-us/pricing</a>
for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weblmGenerateNextWords(precedingWords, modelToUse = "body",
  orderOfNgram = 5L, maxNumOfCandidatesReturned = 5L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="weblmGenerateNextWords_+3A_precedingwords">precedingWords</code></td>
<td>
<p>(character) Character string to retrieve completions
for. Must be in ASCII format.</p>
</td></tr>
<tr><td><code id="weblmGenerateNextWords_+3A_modeltouse">modelToUse</code></td>
<td>
<p>(character) Which language model to use, supported values:
&quot;title&quot;, &quot;anchor&quot;, &quot;query&quot;, or &quot;body&quot; (optional, default: &quot;body&quot;)</p>
</td></tr>
<tr><td><code id="weblmGenerateNextWords_+3A_orderofngram">orderOfNgram</code></td>
<td>
<p>(integer) Which order of N-gram to use, supported values:
1L, 2L, 3L, 4L, or 5L (optional, default: 5L)</p>
</td></tr>
<tr><td><code id="weblmGenerateNextWords_+3A_maxnumofcandidatesreturned">maxNumOfCandidatesReturned</code></td>
<td>
<p>(integer) Maximum number of candidates to
return (optional, default: 5L)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An S3 object of the class <code><a href="#topic+weblm">weblm</a></code>. The results are stored in
the <code>results</code> dataframe inside this object. The dataframe contains the
candidate words and their log(probability).
</p>


<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 tryCatch({

   # Generate next words
   wordCandidates &lt;- weblmGenerateNextWords(
     precedingWords = "how are you",  # ASCII only
     modelToUse = "title",            # "title"|"anchor"|"query"(default)|"body"
     orderOfNgram = 4L,               # 1L|2L|3L|4L|5L(default)
     maxNumOfCandidatesReturned = 5L  # Default: 5L
   )

   # Class and structure of wordCandidates
   class(wordCandidates)
   #&gt; [1] "weblm"

   str(wordCandidates, max.level = 1)
   #&gt; List of 3
   #&gt;  $ results:'data.frame':  5 obs. of  2 variables:
   #&gt;  $ json   : chr "{"candidates":[{"word":"doing","probability":-1.105}, __truncated__ ]}
   #&gt;  $ request:List of 7
   #&gt;   ..- attr(*, "class")= chr "request"
   #&gt;  - attr(*, "class")= chr "weblm"

   # Print results
   pandoc.table(wordCandidates$results)
   #&gt; ---------------------
   #&gt;   word    probability
   #&gt; ------- -------------
   #&gt;   doing     -1.105
   #&gt;
   #&gt;    in       -1.239
   #&gt;
   #&gt; feeling     -1.249
   #&gt;
   #&gt;   going     -1.378
   #&gt;
   #&gt;   today      -1.43
   #&gt; ---------------------

 }, error = function(err) {

   # Print error
   geterrmessage()

 })

## End(Not run)
</code></pre>

<hr>
<h2 id='weblmInit'>Initializes the <span class="pkg">mscsweblm4r</span> package.</h2><span id='topic+weblmInit'></span>

<h3>Description</h3>

<p>This function initializes the Microsoft Cognitive Services Web
Language Model REST API key and URL by reading them either from a
configuration file or environment variables.
</p>
<p>This function <strong>MUST</strong> be called right after package load and before calling
any <span class="pkg">mscsweblm4r</span> core functions, or these functions will fail.
</p>
<p>The <code><a href="#topic+weblmInit">weblmInit</a></code> configuration function will first check to see
if the variable <code>MSCS_WEBLANGUAGEMODEL_CONFIG_FILE</code> exists in the system
environment. If it does, the package will use that as the path to the
configuration file.
</p>
<p>If <code>MSCS_WEBLANGUAGEMODEL_CONFIG_FILE</code> doesn't exist, it will look for
the file <code>.mscskeys.json</code> in the current user's home directory (that's
<code>~/.mscskeys.json</code> on Linux, and something like <code>C:/Users/Phil/Documents/.mscskeys.json</code>
on Windows). If the file is found, the package will load the API key and URL
from it.
</p>
<p>If using a file, please make sure it has the following structure:
</p>
<pre>
{
  "weblanguagemodelurl": "https://api.projectoxford.ai/text/weblm/v1.0/",
  "weblanguagemodelkey": "...MSCS Web Language Model API key goes here..."
}
</pre>
<p>If no configuration file is found, <code><a href="#topic+weblmInit">weblmInit</a></code> will attempt to
pick up its configuration information from two Sys env variables instead:
</p>
<p><code>MSCS_WEBLANGUAGEMODEL_URL</code> - the URL for the Web LM REST API.
</p>
<p><code>MSCS_WEBLANGUAGEMODEL_KEY</code> -  your personal Web LM REST API key.
</p>
<p><code><a href="#topic+weblmInit">weblmInit</a></code> needs to be called <em>only once</em>, after package
load.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weblmInit()
</code></pre>


<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 weblmInit()

## End(Not run)
</code></pre>

<hr>
<h2 id='weblmListAvailableModels'>Retrieves the list of web language models available.</h2><span id='topic+weblmListAvailableModels'></span>

<h3>Description</h3>

<p>This function retrieves the list of web language models
currently available.
</p>
<p>Internally, this function invokes the Microsoft Cognitive Services Web
Language Model REST API documented at <a href="https://www.microsoft.com/cognitive-services/en-us/web-language-model-api/documentation">https://www.microsoft.com/cognitive-services/en-us/web-language-model-api/documentation</a>.
</p>
<p>You MUST have a valid Microsoft Cognitive Services account and an API key for
this function to work properly. See <a href="https://www.microsoft.com/cognitive-services/en-us/pricing">https://www.microsoft.com/cognitive-services/en-us/pricing</a>
for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weblmListAvailableModels()
</code></pre>


<h3>Value</h3>

<p>An S3 object of the class <code><a href="#topic+weblm">weblm</a></code>. The list of available
language models is stored in the <code>results</code> dataframe inside this object.
The dataframe includes a short description of the corpus used to build the
model, the name of the model, the max N-gram order supported, and a list of
Web Language Model REST API methods supported by each model.
</p>


<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 tryCatch({

   # Retrieve a list of supported web language models
   modelList &lt;- weblmListAvailableModels()

   # Class and structure of modelList
   class(modelList)          # weblm
   #&gt; [1] "weblm"

   str(modelList, max.level = 1)
   #&gt; List of 3
   #&gt;  $ results:'data.frame':  4 obs. of  7 variables:
   #&gt;  $ json   : chr "{"models":[{"corpus":"bing webpage title text 2013-12", __truncated__ }]}
   #&gt;  $ request:List of 7
   #&gt;   ..- attr(*, "class")= chr "request"
   #&gt;  - attr(*, "class")= chr "weblm"

   # Print partial results
   pandoc.table(modelList$results[1:3])
   #&gt; -------------------------------------------------
   #&gt;             corpus              model   maxOrder
   #&gt; ------------------------------ ------- ----------
   #&gt;    bing webpage title text      title      5
   #&gt;            2013-12
   #&gt;
   #&gt; bing webpage body text 2013-12   body      5
   #&gt;
   #&gt;  bing web query text 2013-12    query      5
   #&gt;
   #&gt;    bing webpage anchor text    anchor      5
   #&gt;            2013-12
   #&gt; -------------------------------------------------


 }, error = function(err) {

   # Print error
   geterrmessage()

 })

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
