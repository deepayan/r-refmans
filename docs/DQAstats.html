<!DOCTYPE html><html><head><title>Help for package DQAstats</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {DQAstats}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#apply_time_restriciton'><p>Time filtering of data.table or sql-strings.</p></a></li>
<li><a href='#atemp_plausi_results'><p>atemp_plausi_results helper function</p></a></li>
<li><a href='#check_date_restriction_requirements'><p>Checking the mdr integrity for time restrictions</p></a></li>
<li><a href='#completeness'><p>completeness helper function</p></a></li>
<li><a href='#create_helper_vars'><p>create_helper_vars helper function</p></a></li>
<li><a href='#create_markdown'><p>create_markdown helper function</p></a></li>
<li><a href='#data_loading'><p>data_loading helper function</p></a></li>
<li><a href='#descriptive_results'><p>descriptive_results helper function</p></a></li>
<li><a href='#dqa'><p>Perform Data Quality Assessment of Electronic Health Records.</p></a></li>
<li><a href='#etl_checks'><p>etl_checks helper function</p></a></li>
<li><a href='#export_aggregated'><p>Export results to csv/zip file.</p></a></li>
<li><a href='#format_value_conformance_results'><p>format_value_conformance_results helper function</p></a></li>
<li><a href='#generate_datamap'><p>generate_datamap helper function</p></a></li>
<li><a href='#get_atemp_plausis'><p>get_atemp_plausis helper function</p></a></li>
<li><a href='#get_restricting_date_info'><p>Get a formatted string containing start and end time of the</p>
date restriction applied to the data.</a></li>
<li><a href='#is_latex_installed'><p>Checks if there is a LaTeX installation available</p></a></li>
<li><a href='#load_csv'><p>load_csv helper function</p></a></li>
<li><a href='#load_database'><p>load_database helper function</p></a></li>
<li><a href='#load_sqls'><p>load_sqls helper function</p></a></li>
<li><a href='#parallel'><p>parallel helper function</p></a></li>
<li><a href='#read_mdr'><p>read_mdr helper function</p></a></li>
<li><a href='#reduce_cat'><p>reduce_cat helper function</p></a></li>
<li><a href='#test_csv'><p>test_csv helper function</p></a></li>
<li><a href='#uniq_plausi_results'><p>uniq_plausi_results helper function</p></a></li>
<li><a href='#value_conformance'><p>value_conformance helper function</p></a></li>
<li><a href='#value_conformance_checks'><p>value_conformance_checks helper function</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Core Functions for Data Quality Assessment</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-07-20</td>
</tr>
<tr>
<td>Description:</td>
<td>Perform data quality assessment ('DQA') of electronic health
    records ('EHR'). Publication: Kapsner et al. (2021)
    &lt;<a href="https://doi.org/10.1055%2Fs-0041-1733847">doi:10.1055/s-0041-1733847</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/miracum/dqa-dqastats">https://github.com/miracum/dqa-dqastats</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/miracum/dqa-dqastats/issues">https://github.com/miracum/dqa-dqastats/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table, DIZtools (&ge; 0.0.8), DIZutils (&ge; 0.1.2), future,
future.apply, jsonlite, kableExtra, knitr, magrittr, parsedate,
rmarkdown, stats, tinytex, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>DT, lintr, remotes, testthat</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>false</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-07-20 15:50:23 UTC; user</td>
</tr>
<tr>
<td>Author:</td>
<td>Lorenz A. Kapsner <a href="https://orcid.org/0000-0003-1866-860X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [cre, aut],
  Jonathan M. Mang <a href="https://orcid.org/0000-0003-0518-4710"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  MIRACUM - Medical Informatics in Research and Care in University
    Medicine [fnd],
  Universit√§tsklinikum Erlangen [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Lorenz A. Kapsner &lt;lorenz.kapsner@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-07-20 17:02:46 UTC</td>
</tr>
</table>
<hr>
<h2 id='apply_time_restriciton'>Time filtering of data.table or sql-strings.</h2><span id='topic+apply_time_restriciton'></span>

<h3>Description</h3>

<p>Internal function to filter the input data (or SQL) depending
on provided time information. Sensitive to SQL dialects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apply_time_restriciton(
  data,
  key,
  lower_limit,
  upper_limit,
  system_name = NULL,
  system_type,
  mdr,
  logfile_dir = NULL,
  db_con = NULL,
  sql_create_view_all = list(),
  verify_on_db = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apply_time_restriciton_+3A_data">data</code></td>
<td>
<p>If system_type is a database, the sql-string goes here.
If system_type is 'csv', the data.table of this csv goes here.
Sensitive to SQL dialects.</p>
</td></tr>
<tr><td><code id="apply_time_restriciton_+3A_key">key</code></td>
<td>
<p>The key from the mdr.</p>
</td></tr>
<tr><td><code id="apply_time_restriciton_+3A_lower_limit">lower_limit</code></td>
<td>
<p>The posixct timestamp of the lower filtering boundary.</p>
</td></tr>
<tr><td><code id="apply_time_restriciton_+3A_upper_limit">upper_limit</code></td>
<td>
<p>The posixct timestamp of the upper filtering boundary.</p>
</td></tr>
<tr><td><code id="apply_time_restriciton_+3A_system_name">system_name</code></td>
<td>
<p>(Optional for non-database-changes)
'i2b2'/'p21csv'/'omop'/...</p>
</td></tr>
<tr><td><code id="apply_time_restriciton_+3A_system_type">system_type</code></td>
<td>
<p>'postgres'/'oracle'/'csv'</p>
</td></tr>
<tr><td><code id="apply_time_restriciton_+3A_mdr">mdr</code></td>
<td>
<p>(Optional for non-database-changes) The internal MDR
(get it from <code>rv$mdr</code>)</p>
</td></tr>
<tr><td><code id="apply_time_restriciton_+3A_logfile_dir">logfile_dir</code></td>
<td>
<p>(Optional) The directory to store the logfile in.
Defaults to NULL.</p>
</td></tr>
<tr><td><code id="apply_time_restriciton_+3A_db_con">db_con</code></td>
<td>
<p>(Optional for non-database-changes) The connection to the
database. Used to create the views we need later to apply the SQLs to.</p>
</td></tr>
<tr><td><code id="apply_time_restriciton_+3A_sql_create_view_all">sql_create_view_all</code></td>
<td>
<p>(Optional, list). A list containing the SQLs to
create all Views for the time-filtering. This is needed for the
printing-friendly SQL including this view-creating SQLs and the actual
data-extracting SQL query.</p>
</td></tr>
<tr><td><code id="apply_time_restriciton_+3A_verify_on_db">verify_on_db</code></td>
<td>
<p>A boolean. If the view should be verified on the
database (default: <code>TRUE</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If system_type is a database, a list with the new sql-string
containing the temporal filtering will be returned under $sql
('order by' parts will be removed) and a printable sql containing the
commands to create the view needed to run the sql under $sql_extended.
If system_type is 'csv', the filtered data.table will be returned.
</p>

<hr>
<h2 id='atemp_plausi_results'>atemp_plausi_results helper function</h2><span id='topic+atemp_plausi_results'></span>

<h3>Description</h3>

<p>Internal function to generate the results of the
'Atemporal Plausibility' checks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>atemp_plausi_results(rv, atemp_vars, mdr, headless = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="atemp_plausi_results_+3A_rv">rv</code></td>
<td>
<p>A list object. Internal list simulating Shiny's
'reactive values'.</p>
</td></tr>
<tr><td><code id="atemp_plausi_results_+3A_atemp_vars">atemp_vars</code></td>
<td>
<p>These are the atemporal variables</p>
</td></tr>
<tr><td><code id="atemp_plausi_results_+3A_mdr">mdr</code></td>
<td>
<p>A data.table object containing the MDR.</p>
</td></tr>
<tr><td><code id="atemp_plausi_results_+3A_headless">headless</code></td>
<td>
<p>A boolean (default: FALSE). Indicating, if the function is
run only in the console (headless = TRUE) or on a GUI frontend
(headless = FALSE).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with one entry for each atemporal plausibility check
containing the results. Each entry contains the following (nested) list
items:
</p>

<dl>
<dt>description</dt><dd><p>A nested list with the description of the plausibility
check for the source data system and the target data system.</p>
</dd>
<dt>counts</dt><dd><p>A nested list with the frequency count results for the
source data system and the target data system.</p>
</dd>
<dt>statistics</dt><dd><p>A nested list with the plausibility check results for the
source data system and the target data system.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'># runtime ~ 5 sec.
utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
rv &lt;- list()
rv$mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename &lt;- mdr_filename
)

source_system_name &lt;- "exampleCSV_source"
target_system_name &lt;- "exampleCSV_target"

rv &lt;- c(rv, create_helper_vars(
  mdr = rv$mdr,
  source_db = source_system_name,
  target_db = target_system_name
))
# save source/target vars
rv$source$system_name &lt;- source_system_name
rv$target$system_name &lt;- target_system_name
rv$source$system_type &lt;- "csv"
rv$target$system_type &lt;- "csv"

rv$log$logfile_dir &lt;- tempdir()

# set headless (without GUI, progressbars, etc.)
rv$headless &lt;- TRUE

# set configs
demo_files &lt;- system.file("demo_data", package = "DQAstats")
Sys.setenv("EXAMPLECSV_SOURCE_PATH" = demo_files)
Sys.setenv("EXAMPLECSV_TARGET_PATH" = demo_files)

# get configs
rv$source$settings &lt;- DIZutils::get_config_env(
  system_name = rv$source$system_name,
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)
rv$target$settings &lt;- DIZutils::get_config_env(
  system_name = tolower(rv$target$system_name),
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)

# set start_time (e.g. when clicking the 'Load Data'-button in shiny
rv$start_time &lt;- format(Sys.time(), usetz = TRUE, tz = "CET")

# define restricting date
rv$restricting_date$use_it &lt;- FALSE

# load source data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$source,
  keys_to_test = rv$keys_source
)
rv$data_source &lt;- tempdat$outdata

# load target data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$target,
  keys_to_test = rv$keys_target
)
rv$data_target &lt;- tempdat$outdata

rv$data_plausibility$atemporal &lt;- get_atemp_plausis(
  rv = rv,
  atemp_vars = rv$pl$atemp_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

# add the plausibility raw data to data_target and data_source
for (i in names(rv$data_plausibility$atemporal)) {
  for (k in c("source_data", "target_data")) {
    w &lt;- gsub("_data", "", k)
    raw_data &lt;- paste0("data_", w)
    rv[[raw_data]][[i]] &lt;-
      rv$data_plausibility$atemporal[[i]][[k]][[raw_data]]
    rv$data_plausibility$atemporal[[i]][[k]][[raw_data]] &lt;- NULL
  }
  gc()
}

# calculate descriptive results
rv$results_descriptive &lt;- descriptive_results(
  rv = rv,
  headless = rv$headless
)

# calculate atemporal plausibilites
atemp_plausi_results(
  rv = rv,
  atemp_vars = rv$data_plausibility$atemporal,
  mdr = rv$mdr,
  headless = rv$headless
)


</code></pre>

<hr>
<h2 id='check_date_restriction_requirements'>Checking the mdr integrity for time restrictions</h2><span id='topic+check_date_restriction_requirements'></span>

<h3>Description</h3>

<p>Internal function to check if for every input table there is
one single (or empty) column where to apply the time restriction to.
If the input is valid, it will just print a success-message, if the
data is invalid, the function will call <code>stop()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_date_restriction_requirements(
  mdr,
  system_names,
  logfile_dir,
  headless = TRUE,
  enable_stop = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_date_restriction_requirements_+3A_mdr">mdr</code></td>
<td>
<p>The mdr as data.table</p>
</td></tr>
<tr><td><code id="check_date_restriction_requirements_+3A_system_names">system_names</code></td>
<td>
<p>(String) The name of the systems (source and target)
to check for possible date restriction in the mdr.</p>
</td></tr>
<tr><td><code id="check_date_restriction_requirements_+3A_logfile_dir">logfile_dir</code></td>
<td>
<p>The absolute path to folder where the logfile
will be stored default(<code>tempdir()</code>).</p>
</td></tr>
<tr><td><code id="check_date_restriction_requirements_+3A_headless">headless</code></td>
<td>
<p>(Boolean) Is this a console application? Otherwise
(if <code>headless = FALSE</code>) there is a GUI and there will be GUI-feedback.</p>
</td></tr>
<tr><td><code id="check_date_restriction_requirements_+3A_enable_stop">enable_stop</code></td>
<td>
<p>(Boolean, default = TRUE) If true (default) this function
will call <code>stop()</code> in case of the check fails. If <code>enable_stop = FALSE</code>
it will return <code>TRUE</code> if the check was successful and <code>FALSE</code> if the
check failed. Use <code>enable_stop = FALSE</code> to avoid the need of a try/catch
block around this function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE/FALSE: TRUE if the check was successful and the given
systems can be time filtered, FALSE if something went wrong and no time
filtering is possible.
</p>
<p>A boolean to indicate if the date restriction requirements are met
(TRUE) or not (FALSE).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename = mdr_filename
)

source_system_name &lt;- "exampleCSV_source"
target_system_name &lt;- "exampleCSV_target"

DIZtools::cleanup_old_logfile(logfile_dir = tempdir())

check_date_restriction_requirements(
  mdr = mdr,
  system_names = c(source_system_name, target_system_name),
  logfile_dir = tempdir(),
  headless = TRUE,
  enable_stop = TRUE
)

</code></pre>

<hr>
<h2 id='completeness'>completeness helper function</h2><span id='topic+completeness'></span>

<h3>Description</h3>

<p>Internal function to perform missing analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>completeness(results, headless = FALSE, logfile_dir)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="completeness_+3A_results">results</code></td>
<td>
<p>A list object. The list should contain the results of
either 'rv$results_descriptive' or 'rv$results_plausibility_atemporal'.</p>
</td></tr>
<tr><td><code id="completeness_+3A_headless">headless</code></td>
<td>
<p>A boolean (default: FALSE). Indicating, if the function is
run only in the console (headless = TRUE) or on a GUI frontend
(headless = FALSE).</p>
</td></tr>
<tr><td><code id="completeness_+3A_logfile_dir">logfile_dir</code></td>
<td>
<p>The absolute path to folder where the logfile
will be stored default(<code>tempdir()</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.table with the absolute and relative counts of missing values
(results of the completeness checks) for each dataelement for the source
data system and the target data system.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># runtime ~ 5 sec.
utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
rv &lt;- list()
rv$mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename &lt;- mdr_filename
)

source_system_name &lt;- "exampleCSV_source"
target_system_name &lt;- "exampleCSV_target"

rv &lt;- c(rv, create_helper_vars(
  mdr = rv$mdr,
  source_db = source_system_name,
  target_db = target_system_name
))
# save source/target vars
rv$source$system_name &lt;- source_system_name
rv$target$system_name &lt;- target_system_name
rv$source$system_type &lt;- "csv"
rv$target$system_type &lt;- "csv"

rv$log$logfile_dir &lt;- tempdir()

# set headless (without GUI, progressbars, etc.)
rv$headless &lt;- TRUE

# set configs
demo_files &lt;- system.file("demo_data", package = "DQAstats")
Sys.setenv("EXAMPLECSV_SOURCE_PATH" = demo_files)
Sys.setenv("EXAMPLECSV_TARGET_PATH" = demo_files)

# get configs
rv$source$settings &lt;- DIZutils::get_config_env(
  system_name = rv$source$system_name,
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)
rv$target$settings &lt;- DIZutils::get_config_env(
  system_name = tolower(rv$target$system_name),
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)

# set start_time (e.g. when clicking the 'Load Data'-button in shiny
rv$start_time &lt;- format(Sys.time(), usetz = TRUE, tz = "CET")

# define restricting date
rv$restricting_date$use_it &lt;- FALSE

# load source data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$source,
  keys_to_test = rv$keys_source
)
rv$data_source &lt;- tempdat$outdata

# load target data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$target,
  keys_to_test = rv$keys_target
)
rv$data_target &lt;- tempdat$outdata

rv$data_plausibility$atemporal &lt;- get_atemp_plausis(
  rv = rv,
  atemp_vars = rv$pl$atemp_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

# add the plausibility raw data to data_target and data_source
for (i in names(rv$data_plausibility$atemporal)) {
  for (k in c("source_data", "target_data")) {
    w &lt;- gsub("_data", "", k)
    raw_data &lt;- paste0("data_", w)
    rv[[raw_data]][[i]] &lt;-
      rv$data_plausibility$atemporal[[i]][[k]][[raw_data]]
    rv$data_plausibility$atemporal[[i]][[k]][[raw_data]] &lt;- NULL
  }
  gc()
}

# calculate descriptive results
rv$results_descriptive &lt;- descriptive_results(
  rv = rv,
  headless = rv$headless
)
completeness(
  results = rv$results_descriptive,
  headless = rv$headless,
  logfile_dir = rv$log$logfile_dir
)


</code></pre>

<hr>
<h2 id='create_helper_vars'>create_helper_vars helper function</h2><span id='topic+create_helper_vars'></span>

<h3>Description</h3>

<p>Internal function to create necessary variables from the
meta data repository (MDR).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_helper_vars(mdr, source_db, target_db)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_helper_vars_+3A_mdr">mdr</code></td>
<td>
<p>A data.table object containing the MDR.</p>
</td></tr>
<tr><td><code id="create_helper_vars_+3A_source_db">source_db</code></td>
<td>
<p>A character string. The name of the source database.
This string must be conform with the corresponding config section
in the config.yml-file.</p>
</td></tr>
<tr><td><code id="create_helper_vars_+3A_target_db">target_db</code></td>
<td>
<p>A character string. The name of the target database.
This string must be conform with the corresponding config section
in the config.yml-file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with results from the analysis of the metadata repository
(MDR) with the following items:
</p>

<dl>
<dt>keys_source</dt><dd><p>A character vector with the different values of the
'key' field from the MDR for the source data system.</p>
</dd>
<dt>keys_target</dt><dd><p>A character vector with the different values of the
'key' field from the MDR for the target data system.</p>
</dd>
<dt>dqa_assessment</dt><dd><p>A data.table with a subset of the MDR for the
dataelement entries with the field 'dqa_assessment' = 1.</p>
</dd>
<dt>variable_list</dt><dd><p>A mapping list from MDR variable names (MDR field
'designation') to DQA tool internal variable names (MDR field
'variable_name').</p>
</dd>
<dt>pl</dt><dd><p>A nested list with items regarding the plausibility checks</p>
</dd>
</dl>

<dl>
<dt>atemp_vars</dt><dd><p>A data.table with a subset of the MDR with dataelements
that are associated with atemporal plausibility checks.</p>
</dd>
<dt>uniq_vars</dt><dd><p>A data.table with a subset of the MDR with dataelements
that are associated with uniqueness plausibility checks.</p>
</dd>
<dt>atemp_helper_vars</dt><dd><p>A character vector with further dataelements that
are required to perform the atemporal plausibility checks.</p>
</dd>
<dt>atemp_possible</dt><dd><p>A boolean to indicate if all dataelements required
to perform the atemporal plausibility checks are available in the dataset.</p>
</dd>
<dt>uniq_helper_vars</dt><dd><p>A character vector with further dataelements that
are required to perform the uniqueness plausibility checks.</p>
</dd>
<dt>uniq_possible</dt><dd><p>A boolean to indicate if all dataelements required
to perform the uniqueness plausibility checks are available in the
dataset.</p>
</dd>
</dl>




<h3>Examples</h3>

<pre><code class='language-R'>utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename = mdr_filename
)

source_system_name &lt;- "exampleCSV_source"
target_system_name &lt;- "exampleCSV_target"

create_helper_vars(
  mdr = mdr,
  source_db = source_system_name,
  target_db = target_system_name
)

</code></pre>

<hr>
<h2 id='create_markdown'>create_markdown helper function</h2><span id='topic+create_markdown'></span>

<h3>Description</h3>

<p>Internal function to generate the final PDF report.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_markdown(rv = rv, utils_path, outdir = tempdir(), headless = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_markdown_+3A_rv">rv</code></td>
<td>
<p>A list object. Internal list simulating Shiny's
'reactive values'.</p>
</td></tr>
<tr><td><code id="create_markdown_+3A_utils_path">utils_path</code></td>
<td>
<p>A character string. The path to the utils-folder,
containing the required app utilities like the MDR and the settings folder.</p>
</td></tr>
<tr><td><code id="create_markdown_+3A_outdir">outdir</code></td>
<td>
<p>A character string. The directory to store the resulting
PDF document. Default: <code>tempdir</code>.</p>
</td></tr>
<tr><td><code id="create_markdown_+3A_headless">headless</code></td>
<td>
<p>A boolean (default: FALSE). Indicating, if the function is
run only in the console (headless = TRUE) or on a GUI frontend
(headless = FALSE).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value. This function renders the PDF markdown report with
the data quality assessment results and saves it to <code>outdir</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># runtime &gt; 5 sec.
utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
rv &lt;- list()
rv$mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename &lt;- mdr_filename
)

source_system_name &lt;- "exampleCSV_source"
target_system_name &lt;- "exampleCSV_target"

rv &lt;- c(rv, create_helper_vars(
  mdr = rv$mdr,
  source_db = source_system_name,
  target_db = target_system_name
))
# save source/target vars
rv$source$system_name &lt;- source_system_name
rv$target$system_name &lt;- target_system_name
rv$source$system_type &lt;- "csv"
rv$target$system_type &lt;- "csv"

rv$log$logfile_dir &lt;- tempdir()

# set headless (without GUI, progressbars, etc.)
rv$headless &lt;- TRUE

# set configs
demo_files &lt;- system.file("demo_data", package = "DQAstats")
Sys.setenv("EXAMPLECSV_SOURCE_PATH" = demo_files)
Sys.setenv("EXAMPLECSV_TARGET_PATH" = demo_files)

# get configs
rv$source$settings &lt;- DIZutils::get_config_env(
  system_name = rv$source$system_name,
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)
rv$target$settings &lt;- DIZutils::get_config_env(
  system_name = tolower(rv$target$system_name),
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)

# set start_time (e.g. when clicking the 'Load Data'-button in shiny
rv$start_time &lt;- format(Sys.time(), usetz = TRUE, tz = "CET")

# define restricting date
rv$restricting_date$use_it &lt;- FALSE

# load source data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$source,
  keys_to_test = rv$keys_source
)
rv$data_source &lt;- tempdat$outdata

# load target data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$target,
  keys_to_test = rv$keys_target
)
rv$data_target &lt;- tempdat$outdata

rv$data_plausibility$atemporal &lt;- get_atemp_plausis(
  rv = rv,
  atemp_vars = rv$pl$atemp_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

# add the plausibility raw data to data_target and data_source
for (i in names(rv$data_plausibility$atemporal)) {
  for (k in c("source_data", "target_data")) {
    w &lt;- gsub("_data", "", k)
    raw_data &lt;- paste0("data_", w)
    rv[[raw_data]][[i]] &lt;-
      rv$data_plausibility$atemporal[[i]][[k]][[raw_data]]
    rv$data_plausibility$atemporal[[i]][[k]][[raw_data]] &lt;- NULL
  }
  gc()
}

# calculate descriptive results
rv$results_descriptive &lt;- descriptive_results(
  rv = rv,
  headless = rv$headless
)

# calculate unique plausibilites
rv$results_plausibility_unique &lt;- uniq_plausi_results(
  rv = rv,
  uniq_vars = rv$pl$uniq_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

create_markdown(
  rv = rv,
  utils_path = rv$utilspath,
  outdir = output_dir,
  headless = rv$headless
)

</code></pre>

<hr>
<h2 id='data_loading'>data_loading helper function</h2><span id='topic+data_loading'></span>

<h3>Description</h3>

<p>Internal function to load the source and target data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_loading(rv, system, keys_to_test)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="data_loading_+3A_rv">rv</code></td>
<td>
<p>The complete reactive-value dataset</p>
</td></tr>
<tr><td><code id="data_loading_+3A_system">system</code></td>
<td>
<p>The part of the rv-list which should be loaded
(e.g. rv$source or rv$target)</p>
</td></tr>
<tr><td><code id="data_loading_+3A_keys_to_test">keys_to_test</code></td>
<td>
<p>A vector containing the names (keys) of
the variables to test.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the fields '$outdata' and if testing an SQL-based
database also '$sql_statements'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
rv &lt;- list()
rv$mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename = mdr_filename
)

source_system_name &lt;- "exampleCSV_source"
target_system_name &lt;- "exampleCSV_target"

rv &lt;- c(rv, create_helper_vars(
  mdr = rv$mdr,
  source_db = source_system_name,
  target_db = target_system_name
))
# save source/target vars
rv$source$system_name &lt;- source_system_name
rv$target$system_name &lt;- target_system_name
rv$source$system_type &lt;- "csv"
rv$target$system_type &lt;- "csv"

rv$log$logfile_dir &lt;- tempdir()

# set headless (without GUI, progressbars, etc.)
rv$headless &lt;- TRUE

# set configs
demo_files &lt;- system.file("demo_data", package = "DQAstats")
Sys.setenv("EXAMPLECSV_SOURCE_PATH" = demo_files)
Sys.setenv("EXAMPLECSV_TARGET_PATH" = demo_files)

# get configs
rv$source$settings &lt;- DIZutils::get_config_env(
  system_name = rv$source$system_name,
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)
rv$target$settings &lt;- DIZutils::get_config_env(
  system_name = tolower(rv$target$system_name),
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)

# set start_time (e.g. when clicking the 'Load Data'-button in shiny
rv$start_time &lt;- format(Sys.time(), usetz = TRUE, tz = "CET")

# define restricting date
rv$restricting_date$use_it &lt;- FALSE

data_loading(
  rv = rv,
  system = rv$source,
  keys_to_test = rv$keys_source
)

</code></pre>

<hr>
<h2 id='descriptive_results'>descriptive_results helper function</h2><span id='topic+descriptive_results'></span>

<h3>Description</h3>

<p>Internal function to generate the descriptive results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>descriptive_results(rv, headless = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="descriptive_results_+3A_rv">rv</code></td>
<td>
<p>A list object. Internal list simulating Shiny's
'reactive values'.</p>
</td></tr>
<tr><td><code id="descriptive_results_+3A_headless">headless</code></td>
<td>
<p>A boolean (default: FALSE). Indicating, if the function is
run only in the console (headless = TRUE) or on a GUI frontend
(headless = FALSE).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with one entry for each dataelement containing the results of
the descriptive results. Each entry contains the following (nested) list
items:
</p>

<dl>
<dt>description</dt><dd><p>A nested list with the description of the dataelement
for the source data system and the target data system.</p>
</dd>
<dt>counts</dt><dd><p>A nested list with the frequency count results for the
source data system and the target data system.</p>
</dd>
<dt>statistics</dt><dd><p>A nested list with the descriptive results for the
source data system and the target data system stored as data.table
objects.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'># runtime ~ 5 sec.
utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
rv &lt;- list()
rv$mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename &lt;- mdr_filename
)

source_system_name &lt;- "exampleCSV_source"
target_system_name &lt;- "exampleCSV_target"

rv &lt;- c(rv, create_helper_vars(
  mdr = rv$mdr,
  source_db = source_system_name,
  target_db = target_system_name
))
# save source/target vars
rv$source$system_name &lt;- source_system_name
rv$target$system_name &lt;- target_system_name
rv$source$system_type &lt;- "csv"
rv$target$system_type &lt;- "csv"

rv$log$logfile_dir &lt;- tempdir()

# set headless (without GUI, progressbars, etc.)
rv$headless &lt;- TRUE

# set configs
demo_files &lt;- system.file("demo_data", package = "DQAstats")
Sys.setenv("EXAMPLECSV_SOURCE_PATH" = demo_files)
Sys.setenv("EXAMPLECSV_TARGET_PATH" = demo_files)

# get configs
rv$source$settings &lt;- DIZutils::get_config_env(
  system_name = rv$source$system_name,
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)
rv$target$settings &lt;- DIZutils::get_config_env(
  system_name = tolower(rv$target$system_name),
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)

# set start_time (e.g. when clicking the 'Load Data'-button in shiny
rv$start_time &lt;- format(Sys.time(), usetz = TRUE, tz = "CET")

# define restricting date
rv$restricting_date$use_it &lt;- FALSE

# load source data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$source,
  keys_to_test = rv$keys_source
)
rv$data_source &lt;- tempdat$outdata

# load target data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$target,
  keys_to_test = rv$keys_target
)
rv$data_target &lt;- tempdat$outdata

rv$data_plausibility$atemporal &lt;- get_atemp_plausis(
  rv = rv,
  atemp_vars = rv$pl$atemp_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

# add the plausibility raw data to data_target and data_source
for (i in names(rv$data_plausibility$atemporal)) {
  for (k in c("source_data", "target_data")) {
    w &lt;- gsub("_data", "", k)
    raw_data &lt;- paste0("data_", w)
    rv[[raw_data]][[i]] &lt;-
      rv$data_plausibility$atemporal[[i]][[k]][[raw_data]]
    rv$data_plausibility$atemporal[[i]][[k]][[raw_data]] &lt;- NULL
  }
  gc()
}

# calculate descriptive results
descriptive_results(
  rv = rv,
  headless = rv$headless
)


</code></pre>

<hr>
<h2 id='dqa'>Perform Data Quality Assessment of Electronic Health Records.</h2><span id='topic+dqa'></span>

<h3>Description</h3>

<p>This function performs a data quality assessment (DQA)
of electronic health records (EHR).#'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dqa(
  source_system_name,
  target_system_name,
  utils_path,
  mdr_filename = "mdr.csv",
  output_dir = paste0(tempdir(), "/output/"),
  logfile_dir = tempdir(),
  parallel = FALSE,
  ncores = 2,
  restricting_date_start = NULL,
  restricting_date_end = NULL,
  restricting_date_format = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dqa_+3A_source_system_name">source_system_name</code></td>
<td>
<p>A character string. The name of the
source-system, e.g. &quot;P21&quot; or &quot;i2b2&quot;. This name must be identical and
unique to one entry in the settings-yml file.</p>
</td></tr>
<tr><td><code id="dqa_+3A_target_system_name">target_system_name</code></td>
<td>
<p>Optional. A character string or null.
The name of the target-system, e.g. &quot;P21&quot; or &quot;i2b2&quot;.
This name must be identical and unique to one entry in the
config-yml file or null. If the argument is empty, the source will
be processed as standalone on its own.</p>
</td></tr>
<tr><td><code id="dqa_+3A_utils_path">utils_path</code></td>
<td>
<p>A character string. The path to the utils-folder,
containing the required app utilities like the MDR and the settings folder.</p>
</td></tr>
<tr><td><code id="dqa_+3A_mdr_filename">mdr_filename</code></td>
<td>
<p>A character string.
The filename of the MDR e.g. &quot;mdr_example_data.csv&quot;.</p>
</td></tr>
<tr><td><code id="dqa_+3A_output_dir">output_dir</code></td>
<td>
<p>The path to the output folder where all the results will
be stored (default: <code>paste0(tempdir(), "/output/")</code>).</p>
</td></tr>
<tr><td><code id="dqa_+3A_logfile_dir">logfile_dir</code></td>
<td>
<p>The absolute path to folder where the logfile
will be stored default(<code>tempdir()</code>).</p>
</td></tr>
<tr><td><code id="dqa_+3A_parallel">parallel</code></td>
<td>
<p>A boolean. If TRUE, initializing a <code>future::plan()</code>
for running the code (default: FALSE).</p>
</td></tr>
<tr><td><code id="dqa_+3A_ncores">ncores</code></td>
<td>
<p>A integer. The number of cores to use. Caution: you would
probably like to choose a low number when operating on large datasets.
Default: 2.</p>
</td></tr>
<tr><td><code id="dqa_+3A_restricting_date_start">restricting_date_start</code></td>
<td>
<p>The date as the lower limit against which
the data to be analyzed will be filtered. Your input must be able to be
recognized as a date by <code>parsedate::parse_date("2021-02-25")</code>.
Keep in mind: If you supply a date without a time here,
the time will automatically be set to 00:00.</p>
</td></tr>
<tr><td><code id="dqa_+3A_restricting_date_end">restricting_date_end</code></td>
<td>
<p>The date as the lower limit against which
the data to be analyzed will be filtered. Your input must be able to be
recognized as a date by <code>parsedate::parse_date("2021-02-25")</code>
Keep in mind: If you supply a date without a time here,
the time will automatically be set to 00:00. This means, the end DAY
you provide here won't be included: '2021-12-31' will become
'2021-12-31 00:00:00'. If you want to include this day, you need to
supply also a time '2021-12-31 23:59:59' or just use the next day
without a time: '2022-01-01'.</p>
</td></tr>
<tr><td><code id="dqa_+3A_restricting_date_format">restricting_date_format</code></td>
<td>
<p>The format in which the input data is stored.
See <code>?strptime</code> for possible parameters.
Currently not implemented! So there is no effect if you pass a format here.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function is a wrapper around all helper functions in <code>DQAstats</code>
to perform the data quality assessment. The results are summarized in a
PDF report which is saved to <code>outdir</code>. The return value of this function is
a nested list that contains all results as R objects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># runtime &gt; 5 sec.
Sys.setenv("EXAMPLECSV_SOURCE_PATH" = system.file(
  "demo_data",
  package = "DQAstats")
)
Sys.setenv("EXAMPLECSV_TARGET_PATH" = system.file(
  "demo_data",
  package = "DQAstats")
)

# Set path to utilities folder where to find the mdr and template files:
utils_path &lt;- system.file(
  "demo_data/utilities",
  package = "DQAstats"
)

# Execute the DQA and generate a PDF report:
results &lt;- DQAstats::dqa(
  source_system_name = "exampleCSV_source",
  target_system_name = "exampleCSV_target",
  utils_path = utils_path,
  mdr_filename = "mdr_example_data.csv",
  output_dir = paste0(tempdir(), "/output/"),
  parallel = FALSE
)

</code></pre>

<hr>
<h2 id='etl_checks'>etl_checks helper function</h2><span id='topic+etl_checks'></span>

<h3>Description</h3>

<p>Internal function to perform etl conformance checks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>etl_checks(results)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="etl_checks_+3A_results">results</code></td>
<td>
<p>A list object. The list should contain the results
'rv$results_descriptive'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.table with the automated comparison of the counts of valid,
missing, and distinct values between the source data system and the target
data system.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># runtime ~ 5 sec.
utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
rv &lt;- list()
rv$mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename &lt;- mdr_filename
)

source_system_name &lt;- "exampleCSV_source"
target_system_name &lt;- "exampleCSV_target"

rv &lt;- c(rv, create_helper_vars(
  mdr = rv$mdr,
  source_db = source_system_name,
  target_db = target_system_name
))
# save source/target vars
rv$source$system_name &lt;- source_system_name
rv$target$system_name &lt;- target_system_name
rv$source$system_type &lt;- "csv"
rv$target$system_type &lt;- "csv"

rv$log$logfile_dir &lt;- tempdir()

# set headless (without GUI, progressbars, etc.)
rv$headless &lt;- TRUE

# set configs
demo_files &lt;- system.file("demo_data", package = "DQAstats")
Sys.setenv("EXAMPLECSV_SOURCE_PATH" = demo_files)
Sys.setenv("EXAMPLECSV_TARGET_PATH" = demo_files)

# get configs
rv$source$settings &lt;- DIZutils::get_config_env(
  system_name = rv$source$system_name,
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)
rv$target$settings &lt;- DIZutils::get_config_env(
  system_name = tolower(rv$target$system_name),
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)

# set start_time (e.g. when clicking the 'Load Data'-button in shiny
rv$start_time &lt;- format(Sys.time(), usetz = TRUE, tz = "CET")

# define restricting date
rv$restricting_date$use_it &lt;- FALSE

# load source data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$source,
  keys_to_test = rv$keys_source
)
rv$data_source &lt;- tempdat$outdata

# load target data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$target,
  keys_to_test = rv$keys_target
)
rv$data_target &lt;- tempdat$outdata

rv$data_plausibility$atemporal &lt;- get_atemp_plausis(
  rv = rv,
  atemp_vars = rv$pl$atemp_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

# add the plausibility raw data to data_target and data_source
for (i in names(rv$data_plausibility$atemporal)) {
  for (k in c("source_data", "target_data")) {
    w &lt;- gsub("_data", "", k)
    raw_data &lt;- paste0("data_", w)
    rv[[raw_data]][[i]] &lt;-
      rv$data_plausibility$atemporal[[i]][[k]][[raw_data]]
    rv$data_plausibility$atemporal[[i]][[k]][[raw_data]] &lt;- NULL
  }
  gc()
}

# calculate descriptive results
rv$results_descriptive &lt;- descriptive_results(
  rv = rv,
  headless = rv$headless
)

etl_checks(results = rv$results_descriptive)


</code></pre>

<hr>
<h2 id='export_aggregated'>Export results to csv/zip file.</h2><span id='topic+export_aggregated'></span>

<h3>Description</h3>

<p>This function exports aggregated results in csv files that
are added to a zip archive.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>export_aggregated(output_dir, rv)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="export_aggregated_+3A_output_dir">output_dir</code></td>
<td>
<p>The path to the output folder where all the results will
be stored (default: <code>paste0(tempdir(), "/output/")</code>).</p>
</td></tr>
<tr><td><code id="export_aggregated_+3A_rv">rv</code></td>
<td>
<p>A list object. Internal list simulating Shiny's
'reactive values'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value. This function writes the aggregated results, namely
the conformace results overview table, the plausibility check results
overview, the completeness results overview and a combined version (named
'all_results.csv') to csv files. These files are saved in
<code>{output_dir}/export</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># runtime &gt; 5 sec.
utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
rv &lt;- list()
rv$mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename &lt;- mdr_filename
)

source_system_name &lt;- "exampleCSV_source"
target_system_name &lt;- "exampleCSV_target"

rv &lt;- c(rv, create_helper_vars(
  mdr = rv$mdr,
  source_db = source_system_name,
  target_db = target_system_name
))
# save source/target vars
rv$source$system_name &lt;- source_system_name
rv$target$system_name &lt;- target_system_name
rv$source$system_type &lt;- "csv"
rv$target$system_type &lt;- "csv"

rv$log$logfile_dir &lt;- tempdir()

# set headless (without GUI, progressbars, etc.)
rv$headless &lt;- TRUE

# set configs
demo_files &lt;- system.file("demo_data", package = "DQAstats")
Sys.setenv("EXAMPLECSV_SOURCE_PATH" = demo_files)
Sys.setenv("EXAMPLECSV_TARGET_PATH" = demo_files)

# get configs
rv$source$settings &lt;- DIZutils::get_config_env(
  system_name = rv$source$system_name,
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)
rv$target$settings &lt;- DIZutils::get_config_env(
  system_name = tolower(rv$target$system_name),
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)

# set start_time (e.g. when clicking the 'Load Data'-button in shiny
rv$start_time &lt;- format(Sys.time(), usetz = TRUE, tz = "CET")

# define restricting date
rv$restricting_date$use_it &lt;- FALSE

# load source data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$source,
  keys_to_test = rv$keys_source
)
rv$data_source &lt;- tempdat$outdata

# load target data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$target,
  keys_to_test = rv$keys_target
)
rv$data_target &lt;- tempdat$outdata

rv$data_plausibility$atemporal &lt;- get_atemp_plausis(
  rv = rv,
  atemp_vars = rv$pl$atemp_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

# add the plausibility raw data to data_target and data_source
for (i in names(rv$data_plausibility$atemporal)) {
  for (k in c("source_data", "target_data")) {
    w &lt;- gsub("_data", "", k)
    raw_data &lt;- paste0("data_", w)
    rv[[raw_data]][[i]] &lt;-
      rv$data_plausibility$atemporal[[i]][[k]][[raw_data]]
    rv$data_plausibility$atemporal[[i]][[k]][[raw_data]] &lt;- NULL
  }
  gc()
}

# calculate descriptive results
rv$results_descriptive &lt;- descriptive_results(
  rv = rv,
  headless = rv$headless
)

# completeness
rv$completeness &lt;- completeness(results = rv$results_descriptive,
                                headless = rv$headless,
                                logfile_dir = rv$log$logfile_dir)

rv$datamap &lt;- generate_datamap(
  results = rv$results_descriptive,
  db = rv$target$system_name,
  mdr = rv$mdr,
  rv = rv,
  headless = rv$headless
)

# checks$value_conformance
rv$checks$value_conformance &lt;-
  value_conformance_checks(results = rv$conformance$value_conformance)

# checks$etl
rv$checks$etl &lt;- etl_checks(results = rv$results_descriptive)

output_dir &lt;- tempdir()
export_aggregated(
  output_dir = output_dir,
  rv = rv
)

</code></pre>

<hr>
<h2 id='format_value_conformance_results'>format_value_conformance_results helper function</h2><span id='topic+format_value_conformance_results'></span>

<h3>Description</h3>

<p>Internal function to format the value conformance results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_value_conformance_results(results, desc_out, source)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_value_conformance_results_+3A_results">results</code></td>
<td>
<p>A list containing the value conformance results for one data
element.</p>
</td></tr>
<tr><td><code id="format_value_conformance_results_+3A_desc_out">desc_out</code></td>
<td>
<p>A list containing the descriptive results for the same data
element.</p>
</td></tr>
<tr><td><code id="format_value_conformance_results_+3A_source">source</code></td>
<td>
<p>A character: either <code>source_data</code> or <code>target_data</code> to indicate,
which results to render.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a list with the formatted value conformance
results for one data element.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># runtime ~ 5 sec.
utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
rv &lt;- list()
rv$mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename &lt;- mdr_filename
)

source_system_name &lt;- "exampleCSV_source"
target_system_name &lt;- "exampleCSV_target"

rv &lt;- c(rv, create_helper_vars(
  mdr = rv$mdr,
  source_db = source_system_name,
  target_db = target_system_name
))
# save source/target vars
rv$source$system_name &lt;- source_system_name
rv$target$system_name &lt;- target_system_name
rv$source$system_type &lt;- "csv"
rv$target$system_type &lt;- "csv"

rv$log$logfile_dir &lt;- tempdir()

# set headless (without GUI, progressbars, etc.)
rv$headless &lt;- TRUE

# set configs
demo_files &lt;- system.file("demo_data", package = "DQAstats")
Sys.setenv("EXAMPLECSV_SOURCE_PATH" = demo_files)
Sys.setenv("EXAMPLECSV_TARGET_PATH" = demo_files)

# get configs
rv$source$settings &lt;- DIZutils::get_config_env(
  system_name = rv$source$system_name,
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)
rv$target$settings &lt;- DIZutils::get_config_env(
  system_name = tolower(rv$target$system_name),
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)

# set start_time (e.g. when clicking the 'Load Data'-button in shiny
rv$start_time &lt;- format(Sys.time(), usetz = TRUE, tz = "CET")

# define restricting date
rv$restricting_date$use_it &lt;- FALSE

# load source data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$source,
  keys_to_test = rv$keys_source
)
rv$data_source &lt;- tempdat$outdata

# load target data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$target,
  keys_to_test = rv$keys_target
)
rv$data_target &lt;- tempdat$outdata

rv$data_plausibility$atemporal &lt;- get_atemp_plausis(
  rv = rv,
  atemp_vars = rv$pl$atemp_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

# add the plausibility raw data to data_target and data_source
for (i in names(rv$data_plausibility$atemporal)) {
  for (k in c("source_data", "target_data")) {
    w &lt;- gsub("_data", "", k)
    raw_data &lt;- paste0("data_", w)
    rv[[raw_data]][[i]] &lt;-
      rv$data_plausibility$atemporal[[i]][[k]][[raw_data]]
    rv$data_plausibility$atemporal[[i]][[k]][[raw_data]] &lt;- NULL
  }
  gc()
}

# calculate descriptive results
rv$results_descriptive &lt;- descriptive_results(
  rv = rv,
  headless = rv$headless
)

# calculate atemporal plausibilites
rv$results_plausibility_atemporal &lt;- atemp_plausi_results(
  rv = rv,
  atemp_vars = rv$data_plausibility$atemporal,
  mdr = rv$mdr,
  headless = rv$headless
)

# calculate unique plausibilites
rv$results_plausibility_unique &lt;- uniq_plausi_results(
  rv = rv,
  uniq_vars = rv$pl$uniq_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

rv$conformance$value_conformance &lt;- value_conformance(
  rv = rv,
  scope = "descriptive",
  results = rv$results_descriptive,
  headless = rv$headless,
  logfile_dir = rv$log$logfile_dir
)

# format the results (wrap functioncall into `sapply` to get results for all
# available data elements):
value_conformance_formatted &lt;- sapply(
  X = names(rv$results_descriptive),
  FUN = function(i) {
    desc_out &lt;- rv$results_descriptive[[i]]$description

    if (!is.null(rv$conformance$value_conformance[[i]])) {
      format_value_conformance_results(
        results = rv$conformance$value_conformance[[i]],
        desc_out = desc_out,
        source = "source_data"
      )
    }
  }
)


</code></pre>

<hr>
<h2 id='generate_datamap'>generate_datamap helper function</h2><span id='topic+generate_datamap'></span>

<h3>Description</h3>

<p>Internal function to generate the dashboard data maps
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_datamap(results, mdr, db, rv, headless = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generate_datamap_+3A_results">results</code></td>
<td>
<p>A list object. The list should contain the results
'rv$results_descriptive'.</p>
</td></tr>
<tr><td><code id="generate_datamap_+3A_mdr">mdr</code></td>
<td>
<p>A data.table object containing the MDR.</p>
</td></tr>
<tr><td><code id="generate_datamap_+3A_db">db</code></td>
<td>
<p>A character string. The name of the corresponding database.</p>
</td></tr>
<tr><td><code id="generate_datamap_+3A_rv">rv</code></td>
<td>
<p>A list object. Internal list simulating Shiny's
'reactive values'.</p>
</td></tr>
<tr><td><code id="generate_datamap_+3A_headless">headless</code></td>
<td>
<p>A boolean (default: FALSE). Indicating, if the function is
run only in the console (headless = TRUE) or on a GUI frontend
(headless = FALSE).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.table with the results of the datamap.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># runtime &gt; 5 sec.
utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
rv &lt;- list()
rv$mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename &lt;- mdr_filename
)

source_system_name &lt;- "exampleCSV_source"
target_system_name &lt;- "exampleCSV_target"

rv &lt;- c(rv, create_helper_vars(
  mdr = rv$mdr,
  source_db = source_system_name,
  target_db = target_system_name
))
# save source/target vars
rv$source$system_name &lt;- source_system_name
rv$target$system_name &lt;- target_system_name
rv$source$system_type &lt;- "csv"
rv$target$system_type &lt;- "csv"

rv$log$logfile_dir &lt;- tempdir()

# set headless (without GUI, progressbars, etc.)
rv$headless &lt;- TRUE

# set configs
demo_files &lt;- system.file("demo_data", package = "DQAstats")
Sys.setenv("EXAMPLECSV_SOURCE_PATH" = demo_files)
Sys.setenv("EXAMPLECSV_TARGET_PATH" = demo_files)

# get configs
rv$source$settings &lt;- DIZutils::get_config_env(
  system_name = rv$source$system_name,
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)
rv$target$settings &lt;- DIZutils::get_config_env(
  system_name = tolower(rv$target$system_name),
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)

# set start_time (e.g. when clicking the 'Load Data'-button in shiny
rv$start_time &lt;- format(Sys.time(), usetz = TRUE, tz = "CET")

# define restricting date
rv$restricting_date$use_it &lt;- FALSE

# load source data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$source,
  keys_to_test = rv$keys_source
)
rv$data_source &lt;- tempdat$outdata

# load target data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$target,
  keys_to_test = rv$keys_target
)
rv$data_target &lt;- tempdat$outdata

rv$data_plausibility$atemporal &lt;- get_atemp_plausis(
  rv = rv,
  atemp_vars = rv$pl$atemp_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

# add the plausibility raw data to data_target and data_source
for (i in names(rv$data_plausibility$atemporal)) {
  for (k in c("source_data", "target_data")) {
    w &lt;- gsub("_data", "", k)
    raw_data &lt;- paste0("data_", w)
    rv[[raw_data]][[i]] &lt;-
      rv$data_plausibility$atemporal[[i]][[k]][[raw_data]]
    rv$data_plausibility$atemporal[[i]][[k]][[raw_data]] &lt;- NULL
  }
  gc()
}

# calculate descriptive results
rv$results_descriptive &lt;- descriptive_results(
  rv = rv,
  headless = rv$headless
)

generate_datamap(
  results = rv$results_descriptive,
  db = rv$target$system_name,
  mdr = rv$mdr,
  rv = rv,
  headless = rv$headless
)

</code></pre>

<hr>
<h2 id='get_atemp_plausis'>get_atemp_plausis helper function</h2><span id='topic+get_atemp_plausis'></span>

<h3>Description</h3>

<p>Internal function to generate raw data for the
'Atemporal Plausibility' checks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_atemp_plausis(rv, atemp_vars, mdr, headless = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_atemp_plausis_+3A_rv">rv</code></td>
<td>
<p>A list object. Internal list simulating Shiny's
'reactive values'.</p>
</td></tr>
<tr><td><code id="get_atemp_plausis_+3A_atemp_vars">atemp_vars</code></td>
<td>
<p>A data.table object. The object is created
by <code>create_helper_vars</code> from the data represented in the
metadata repository.</p>
</td></tr>
<tr><td><code id="get_atemp_plausis_+3A_mdr">mdr</code></td>
<td>
<p>A data.table object containing the MDR.</p>
</td></tr>
<tr><td><code id="get_atemp_plausis_+3A_headless">headless</code></td>
<td>
<p>A boolean (default: FALSE). Indicating, if the function is
run only in the console (headless = TRUE) or on a GUI frontend
(headless = FALSE).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with one entry for each atemporal plausibility check
containing the raw results. Each entry contains the following (nested) list
items:
</p>

<dl>
<dt>source_data</dt><dd><p>A nested list with the raw plausibility check results
for the source data system.</p>
</dd>
<dt>target_data</dt><dd><p>A nested list with the raw plausibility check results
for the target data system.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
rv &lt;- list()
rv$mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename = mdr_filename
)

source_system_name &lt;- "exampleCSV_source"
target_system_name &lt;- "exampleCSV_target"

rv &lt;- c(rv, create_helper_vars(
  mdr = rv$mdr,
  source_db = source_system_name,
  target_db = target_system_name
))
# save source/target vars
rv$source$system_name &lt;- source_system_name
rv$target$system_name &lt;- target_system_name
rv$source$system_type &lt;- "csv"
rv$target$system_type &lt;- "csv"

rv$log$logfile_dir &lt;- tempdir()

# set headless (without GUI, progressbars, etc.)
rv$headless &lt;- TRUE

# set configs
demo_files &lt;- system.file("demo_data", package = "DQAstats")
Sys.setenv("EXAMPLECSV_SOURCE_PATH" = demo_files)
Sys.setenv("EXAMPLECSV_TARGET_PATH" = demo_files)

# get configs
rv$source$settings &lt;- DIZutils::get_config_env(
  system_name = rv$source$system_name,
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)
rv$target$settings &lt;- DIZutils::get_config_env(
  system_name = tolower(rv$target$system_name),
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)

# set start_time (e.g. when clicking the 'Load Data'-button in shiny
rv$start_time &lt;- format(Sys.time(), usetz = TRUE, tz = "CET")

# define restricting date
rv$restricting_date$use_it &lt;- FALSE

# load source data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$source,
  keys_to_test = rv$keys_source
)
rv$data_source &lt;- tempdat$outdata

# load target data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$target,
  keys_to_test = rv$keys_target
)
rv$data_target &lt;- tempdat$outdata

get_atemp_plausis(
  rv = rv,
  atemp_vars = rv$pl$atemp_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

</code></pre>

<hr>
<h2 id='get_restricting_date_info'>Get a formatted string containing start and end time of the
date restriction applied to the data.</h2><span id='topic+get_restricting_date_info'></span>

<h3>Description</h3>

<p>See title.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_restricting_date_info(
  restricting_date,
  lang = "en",
  date = TRUE,
  time = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_restricting_date_info_+3A_restricting_date">restricting_date</code></td>
<td>
<p>The list applied from rv$restricting_date</p>
</td></tr>
<tr><td><code id="get_restricting_date_info_+3A_lang">lang</code></td>
<td>
<p>Language of the result. &quot;de&quot;/&quot;en&quot; (en = default).
If language is not yet implemented, &quot;en&quot; is used.</p>
</td></tr>
<tr><td><code id="get_restricting_date_info_+3A_date">date</code></td>
<td>
<p>Should the date be included in the result string?</p>
</td></tr>
<tr><td><code id="get_restricting_date_info_+3A_time">time</code></td>
<td>
<p>Should the time be included in the result string?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>String containing start and end date obtained from the list of
<code>restricting_date</code>.
</p>

<hr>
<h2 id='is_latex_installed'>Checks if there is a LaTeX installation available</h2><span id='topic+is_latex_installed'></span>

<h3>Description</h3>

<p>Internal function to determine if a LaTeX installation is
available. Used before creating/knitr-ing the PDF report.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_latex_installed(logfile_dir = NULL, headless = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_latex_installed_+3A_logfile_dir">logfile_dir</code></td>
<td>
<p>The absolute path to folder where the logfile
will be stored default(<code>tempdir()</code>).</p>
</td></tr>
<tr><td><code id="is_latex_installed_+3A_headless">headless</code></td>
<td>
<p>A boolean (default: FALSE). Indicating, if the function is
run only in the console (headless = TRUE) or on a GUI frontend
(headless = FALSE).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE if there is a LaTeX installation, FALSE if not.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_latex_installed()

</code></pre>

<hr>
<h2 id='load_csv'>load_csv helper function</h2><span id='topic+load_csv'></span>

<h3>Description</h3>

<p>Internal function to load the data from CSV files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_csv(rv, keys_to_test, headless = FALSE, system)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load_csv_+3A_rv">rv</code></td>
<td>
<p>A list object. Internal list simulating Shiny's
'reactive values'.</p>
</td></tr>
<tr><td><code id="load_csv_+3A_keys_to_test">keys_to_test</code></td>
<td>
<p>A vector containing the names (keys) of
the variables to test.</p>
</td></tr>
<tr><td><code id="load_csv_+3A_headless">headless</code></td>
<td>
<p>A boolean (default: FALSE). Indicating, if the function is
run only in the console (headless = TRUE) or on a GUI frontend
(headless = FALSE).</p>
</td></tr>
<tr><td><code id="load_csv_+3A_system">system</code></td>
<td>
<p>The system object rv$system</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with data.tables for each unique CSV file as defined in the
'source_system_table' field of the MDR.
</p>

<hr>
<h2 id='load_database'>load_database helper function</h2><span id='topic+load_database'></span>

<h3>Description</h3>

<p>Internal function to load the data from SQL databases.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_database(
  rv,
  sql_statements,
  db_con,
  keys_to_test,
  db_name,
  headless = FALSE,
  db_type
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load_database_+3A_rv">rv</code></td>
<td>
<p>A list object. Internal list simulating Shiny's
'reactive values'.</p>
</td></tr>
<tr><td><code id="load_database_+3A_sql_statements">sql_statements</code></td>
<td>
<p>The SQL-Statement-object</p>
</td></tr>
<tr><td><code id="load_database_+3A_db_con">db_con</code></td>
<td>
<p>The connection-socket</p>
</td></tr>
<tr><td><code id="load_database_+3A_keys_to_test">keys_to_test</code></td>
<td>
<p>A vector containing the names (keys) of
the variables to test.</p>
</td></tr>
<tr><td><code id="load_database_+3A_db_name">db_name</code></td>
<td>
<p>The database name</p>
</td></tr>
<tr><td><code id="load_database_+3A_headless">headless</code></td>
<td>
<p>A boolean (default: FALSE). Indicating, if the function is
run only in the console (headless = TRUE) or on a GUI frontend
(headless = FALSE).</p>
</td></tr>
<tr><td><code id="load_database_+3A_db_type">db_type</code></td>
<td>
<p>The database type (postgres/oracle)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with a data.table for each data element as defined in the
in the MDR.
</p>

<hr>
<h2 id='load_sqls'>load_sqls helper function</h2><span id='topic+load_sqls'></span>

<h3>Description</h3>

<p>Internal function to load the SQL statements.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_sqls(utils_path, db)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load_sqls_+3A_utils_path">utils_path</code></td>
<td>
<p>A character string. The path to the utils-folder,
containing the required app utilities like the MDR and the settings folder.</p>
</td></tr>
<tr><td><code id="load_sqls_+3A_db">db</code></td>
<td>
<p>A character string. The name of the corresponding database.</p>
</td></tr>
</table>

<hr>
<h2 id='parallel'>parallel helper function</h2><span id='topic+parallel'></span>

<h3>Description</h3>

<p>Internal function to initialize the parallel backend.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parallel(parallel, logfile_dir, ncores)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parallel_+3A_parallel">parallel</code></td>
<td>
<p>A boolean. If TRUE, initializing a <code>future::plan()</code>
for running the code (default: FALSE).</p>
</td></tr>
<tr><td><code id="parallel_+3A_logfile_dir">logfile_dir</code></td>
<td>
<p>The absolute path to folder where the logfile
will be stored default(<code>tempdir()</code>).</p>
</td></tr>
<tr><td><code id="parallel_+3A_ncores">ncores</code></td>
<td>
<p>A integer. The number of cores to use. Caution: you would
probably like to choose a low number when operating on large datasets.
Default: 2.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value. Depending on the specified arguments, this function
enables a parallel backend for faster computations.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>parallel(parallel = FALSE, logfile_dir = tempdir(), ncores = 1)

</code></pre>

<hr>
<h2 id='read_mdr'>read_mdr helper function</h2><span id='topic+read_mdr'></span>

<h3>Description</h3>

<p>Internal function to read the meta data repository (MDR).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_mdr(utils_path = NULL, mdr_filename = "mdr.csv")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_mdr_+3A_utils_path">utils_path</code></td>
<td>
<p>A character string. The path to the utils-folder,
containing the required app utilities like the MDR and the settings folder.</p>
</td></tr>
<tr><td><code id="read_mdr_+3A_mdr_filename">mdr_filename</code></td>
<td>
<p>A character string. The filename of your meta data
repository (default: 'mdr.csv').</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.table containing the metadata repository which is imported
from the CSV file provided with <code>{utils_path}/MDR/{mdr_filename}</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename = mdr_filename
)

</code></pre>

<hr>
<h2 id='reduce_cat'>reduce_cat helper function</h2><span id='topic+reduce_cat'></span>

<h3>Description</h3>

<p>Internal function to reduce categorical variables
to a maximum of values to be displayed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reduce_cat(data, levellimit = 25)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reduce_cat_+3A_data">data</code></td>
<td>
<p>A list object. The object <code>rv$results_descriptive</code>.</p>
</td></tr>
<tr><td><code id="reduce_cat_+3A_levellimit">levellimit</code></td>
<td>
<p>An integer value. The number of maximum
values to be displayed (default: 25).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.table with the data quality assessment results for categorical
dataelements that are reduced to the maximum number of levels specified
with <code>levellimit</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># runtime ~ 5 sec.
utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
rv &lt;- list()
rv$mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename &lt;- mdr_filename
)

source_system_name &lt;- "exampleCSV_source"
target_system_name &lt;- "exampleCSV_target"

rv &lt;- c(rv, create_helper_vars(
  mdr = rv$mdr,
  source_db = source_system_name,
  target_db = target_system_name
))
# save source/target vars
rv$source$system_name &lt;- source_system_name
rv$target$system_name &lt;- target_system_name
rv$source$system_type &lt;- "csv"
rv$target$system_type &lt;- "csv"

rv$log$logfile_dir &lt;- tempdir()

# set headless (without GUI, progressbars, etc.)
rv$headless &lt;- TRUE

# set configs
demo_files &lt;- system.file("demo_data", package = "DQAstats")
Sys.setenv("EXAMPLECSV_SOURCE_PATH" = demo_files)
Sys.setenv("EXAMPLECSV_TARGET_PATH" = demo_files)

# get configs
rv$source$settings &lt;- DIZutils::get_config_env(
  system_name = rv$source$system_name,
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)
rv$target$settings &lt;- DIZutils::get_config_env(
  system_name = tolower(rv$target$system_name),
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)

# set start_time (e.g. when clicking the 'Load Data'-button in shiny
rv$start_time &lt;- format(Sys.time(), usetz = TRUE, tz = "CET")

# define restricting date
rv$restricting_date$use_it &lt;- FALSE

# load source data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$source,
  keys_to_test = rv$keys_source
)
rv$data_source &lt;- tempdat$outdata

# load target data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$target,
  keys_to_test = rv$keys_target
)
rv$data_target &lt;- tempdat$outdata

rv$data_plausibility$atemporal &lt;- get_atemp_plausis(
  rv = rv,
  atemp_vars = rv$pl$atemp_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

# add the plausibility raw data to data_target and data_source
for (i in names(rv$data_plausibility$atemporal)) {
  for (k in c("source_data", "target_data")) {
    w &lt;- gsub("_data", "", k)
    raw_data &lt;- paste0("data_", w)
    rv[[raw_data]][[i]] &lt;-
      rv$data_plausibility$atemporal[[i]][[k]][[raw_data]]
    rv$data_plausibility$atemporal[[i]][[k]][[raw_data]] &lt;- NULL
  }
  gc()
}

# calculate descriptive results
rv$results_descriptive &lt;- descriptive_results(
  rv = rv,
  headless = rv$headless
)

reduce_cat(
  data = rv$results_descriptive,
  levellimit = 25
)


</code></pre>

<hr>
<h2 id='test_csv'>test_csv helper function</h2><span id='topic+test_csv'></span>

<h3>Description</h3>

<p>Internal function to test and get the database connection
of the source database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_csv(settings, source_db, mdr, headless = FALSE, logfile_dir)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test_csv_+3A_settings">settings</code></td>
<td>
<p>A list object containing the database settings.</p>
</td></tr>
<tr><td><code id="test_csv_+3A_source_db">source_db</code></td>
<td>
<p>A character string. The name of the source database.
This string must be conform with the corresponding config section
in the config.yml-file.</p>
</td></tr>
<tr><td><code id="test_csv_+3A_mdr">mdr</code></td>
<td>
<p>A data.table object containing the MDR.</p>
</td></tr>
<tr><td><code id="test_csv_+3A_headless">headless</code></td>
<td>
<p>A boolean (default: FALSE). Indicating, if the function is
run only in the console (headless = TRUE) or on a GUI frontend
(headless = FALSE).</p>
</td></tr>
<tr><td><code id="test_csv_+3A_logfile_dir">logfile_dir</code></td>
<td>
<p>The absolute path to folder where the logfile
will be stored default(<code>tempdir()</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A boolean indicating if the CSV files specified in the metadata
repository are found in the specified locations.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename = mdr_filename
)

source_system_name &lt;- "exampleCSV_source"
target_system_name &lt;- "exampleCSV_target"

DIZtools::cleanup_old_logfile(logfile_dir = tempdir())

settings &lt;- DIZutils::get_config_env(
  system_name = source_system_name,
  logfile_dir = tempdir(),
  headless = TRUE
)

test_csv(
  settings = settings,
  source_db = source_system_name,
  mdr = mdr,
  headless = TRUE,
  logfile_dir = tempdir()
)


</code></pre>

<hr>
<h2 id='uniq_plausi_results'>uniq_plausi_results helper function</h2><span id='topic+uniq_plausi_results'></span>

<h3>Description</h3>

<p>Internal function to generate the results of
the 'Uniqueness Plausibility' checks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>uniq_plausi_results(rv, uniq_vars, mdr, headless = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="uniq_plausi_results_+3A_rv">rv</code></td>
<td>
<p>A list object. Internal list simulating Shiny's
'reactive values'.</p>
</td></tr>
<tr><td><code id="uniq_plausi_results_+3A_uniq_vars">uniq_vars</code></td>
<td>
<p>A data.table object. The object is created
by <code>create_helper_vars</code> from the data represented in
the metadata repository.</p>
</td></tr>
<tr><td><code id="uniq_plausi_results_+3A_mdr">mdr</code></td>
<td>
<p>A data.table object containing the MDR.</p>
</td></tr>
<tr><td><code id="uniq_plausi_results_+3A_headless">headless</code></td>
<td>
<p>A boolean (default: FALSE). Indicating, if the function is
run only in the console (headless = TRUE) or on a GUI frontend
(headless = FALSE).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with one entry for each uniqueness plausibility check
containing the results. Each entry contains the following (nested) list
items:
</p>

<dl>
<dt>description</dt><dd><p>A character with the description of the plausibility
check.</p>
</dd>
<dt>source_data</dt><dd><p>A nested list with the uniqueness plausibility check
results for the source data system with the values 'message' and 'error'.</p>
</dd>
<dt>target_data</dt><dd><p>A nested list with the uniqueness plausibility check
results for the target data system with the values 'message' and 'error'.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'># runtime &gt; 5 sec.
utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
rv &lt;- list()
rv$mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename &lt;- mdr_filename
)

source_system_name &lt;- "exampleCSV_source"
target_system_name &lt;- "exampleCSV_target"

rv &lt;- c(rv, create_helper_vars(
  mdr = rv$mdr,
  source_db = source_system_name,
  target_db = target_system_name
))
# save source/target vars
rv$source$system_name &lt;- source_system_name
rv$target$system_name &lt;- target_system_name
rv$source$system_type &lt;- "csv"
rv$target$system_type &lt;- "csv"

rv$log$logfile_dir &lt;- tempdir()

# set headless (without GUI, progressbars, etc.)
rv$headless &lt;- TRUE

# set configs
demo_files &lt;- system.file("demo_data", package = "DQAstats")
Sys.setenv("EXAMPLECSV_SOURCE_PATH" = demo_files)
Sys.setenv("EXAMPLECSV_TARGET_PATH" = demo_files)

# get configs
rv$source$settings &lt;- DIZutils::get_config_env(
  system_name = rv$source$system_name,
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)
rv$target$settings &lt;- DIZutils::get_config_env(
  system_name = tolower(rv$target$system_name),
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)

# set start_time (e.g. when clicking the 'Load Data'-button in shiny
rv$start_time &lt;- format(Sys.time(), usetz = TRUE, tz = "CET")

# define restricting date
rv$restricting_date$use_it &lt;- FALSE

# load source data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$source,
  keys_to_test = rv$keys_source
)
rv$data_source &lt;- tempdat$outdata

# load target data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$target,
  keys_to_test = rv$keys_target
)
rv$data_target &lt;- tempdat$outdata

rv$data_plausibility$atemporal &lt;- get_atemp_plausis(
  rv = rv,
  atemp_vars = rv$pl$atemp_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

# add the plausibility raw data to data_target and data_source
for (i in names(rv$data_plausibility$atemporal)) {
  for (k in c("source_data", "target_data")) {
    w &lt;- gsub("_data", "", k)
    raw_data &lt;- paste0("data_", w)
    rv[[raw_data]][[i]] &lt;-
      rv$data_plausibility$atemporal[[i]][[k]][[raw_data]]
    rv$data_plausibility$atemporal[[i]][[k]][[raw_data]] &lt;- NULL
  }
  gc()
}

# calculate descriptive results
rv$results_descriptive &lt;- descriptive_results(
  rv = rv,
  headless = rv$headless
)

# calculate unique plausibilites
uniq_plausi_results(
  rv = rv,
  uniq_vars = rv$pl$uniq_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

</code></pre>

<hr>
<h2 id='value_conformance'>value_conformance helper function</h2><span id='topic+value_conformance'></span>

<h3>Description</h3>

<p>Internal function to perform value conformance checks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>value_conformance(rv, results, scope, headless = FALSE, logfile_dir)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="value_conformance_+3A_rv">rv</code></td>
<td>
<p>A list object. Internal list simulating Shiny's
'reactive values'.</p>
</td></tr>
<tr><td><code id="value_conformance_+3A_results">results</code></td>
<td>
<p>A list object. The list should contain the results of
either 'rv$results_descriptive' or 'rv$results_plausibility_atemporal'.</p>
</td></tr>
<tr><td><code id="value_conformance_+3A_scope">scope</code></td>
<td>
<p>A character. Either &quot;plausibility&quot; or &quot;descriptive&quot;.</p>
</td></tr>
<tr><td><code id="value_conformance_+3A_headless">headless</code></td>
<td>
<p>A boolean (default: FALSE). Indicating, if the function is
run only in the console (headless = TRUE) or on a GUI frontend
(headless = FALSE).</p>
</td></tr>
<tr><td><code id="value_conformance_+3A_logfile_dir">logfile_dir</code></td>
<td>
<p>The absolute path to folder where the logfile
will be stored default(<code>tempdir()</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with one entry for each dataelement containing the raw results
of the value conformance checks. Each entry contains the following (nested)
list items:
</p>

<dl>
<dt>source_data</dt><dd><p>A nested list with the raw value conformance check
results for the source data system.</p>
</dd>
<dt>target_data</dt><dd><p>A nested list with the raw value conformance check
results for the target data system.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'># runtime ~ 5 sec.
utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
rv &lt;- list()
rv$mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename &lt;- mdr_filename
)

source_system_name &lt;- "exampleCSV_source"
target_system_name &lt;- "exampleCSV_target"

rv &lt;- c(rv, create_helper_vars(
  mdr = rv$mdr,
  source_db = source_system_name,
  target_db = target_system_name
))
# save source/target vars
rv$source$system_name &lt;- source_system_name
rv$target$system_name &lt;- target_system_name
rv$source$system_type &lt;- "csv"
rv$target$system_type &lt;- "csv"

rv$log$logfile_dir &lt;- tempdir()

# set headless (without GUI, progressbars, etc.)
rv$headless &lt;- TRUE

# set configs
demo_files &lt;- system.file("demo_data", package = "DQAstats")
Sys.setenv("EXAMPLECSV_SOURCE_PATH" = demo_files)
Sys.setenv("EXAMPLECSV_TARGET_PATH" = demo_files)

# get configs
rv$source$settings &lt;- DIZutils::get_config_env(
  system_name = rv$source$system_name,
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)
rv$target$settings &lt;- DIZutils::get_config_env(
  system_name = tolower(rv$target$system_name),
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)

# set start_time (e.g. when clicking the 'Load Data'-button in shiny
rv$start_time &lt;- format(Sys.time(), usetz = TRUE, tz = "CET")

# define restricting date
rv$restricting_date$use_it &lt;- FALSE

# load source data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$source,
  keys_to_test = rv$keys_source
)
rv$data_source &lt;- tempdat$outdata

# load target data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$target,
  keys_to_test = rv$keys_target
)
rv$data_target &lt;- tempdat$outdata

rv$data_plausibility$atemporal &lt;- get_atemp_plausis(
  rv = rv,
  atemp_vars = rv$pl$atemp_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

# add the plausibility raw data to data_target and data_source
for (i in names(rv$data_plausibility$atemporal)) {
  for (k in c("source_data", "target_data")) {
    w &lt;- gsub("_data", "", k)
    raw_data &lt;- paste0("data_", w)
    rv[[raw_data]][[i]] &lt;-
      rv$data_plausibility$atemporal[[i]][[k]][[raw_data]]
    rv$data_plausibility$atemporal[[i]][[k]][[raw_data]] &lt;- NULL
  }
  gc()
}

# calculate descriptive results
rv$results_descriptive &lt;- descriptive_results(
  rv = rv,
  headless = rv$headless
)

# calculate atemporal plausibilites
rv$results_plausibility_atemporal &lt;- atemp_plausi_results(
  rv = rv,
  atemp_vars = rv$data_plausibility$atemporal,
  mdr = rv$mdr,
  headless = rv$headless
)

# calculate unique plausibilites
rv$results_plausibility_unique &lt;- uniq_plausi_results(
  rv = rv,
  uniq_vars = rv$pl$uniq_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

value_conformance(
  rv = rv,
  scope = "descriptive",
  results = rv$results_descriptive,
  headless = rv$headless,
  logfile_dir = rv$log$logfile_dir
)


</code></pre>

<hr>
<h2 id='value_conformance_checks'>value_conformance_checks helper function</h2><span id='topic+value_conformance_checks'></span>

<h3>Description</h3>

<p>Internal function to perform value conformance checks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>value_conformance_checks(results)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="value_conformance_checks_+3A_results">results</code></td>
<td>
<p>A list object. The list should contain the results of
the function <code>value_conformance</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.table with the results of the automated comparison of the
value conformance check results between the source data system and the
target data system.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># runtime ~ 5 sec.
utils_path &lt;- system.file(
  "demo_data/utilities/",
  package = "DQAstats"
)
mdr_filename &lt;- "mdr_example_data.csv"
rv &lt;- list()
rv$mdr &lt;- read_mdr(
  utils_path = utils_path,
  mdr_filename &lt;- mdr_filename
)

source_system_name &lt;- "exampleCSV_source"
target_system_name &lt;- "exampleCSV_target"

rv &lt;- c(rv, create_helper_vars(
  mdr = rv$mdr,
  source_db = source_system_name,
  target_db = target_system_name
))
# save source/target vars
rv$source$system_name &lt;- source_system_name
rv$target$system_name &lt;- target_system_name
rv$source$system_type &lt;- "csv"
rv$target$system_type &lt;- "csv"

rv$log$logfile_dir &lt;- tempdir()

# set headless (without GUI, progressbars, etc.)
rv$headless &lt;- TRUE

# set configs
demo_files &lt;- system.file("demo_data", package = "DQAstats")
Sys.setenv("EXAMPLECSV_SOURCE_PATH" = demo_files)
Sys.setenv("EXAMPLECSV_TARGET_PATH" = demo_files)

# get configs
rv$source$settings &lt;- DIZutils::get_config_env(
  system_name = rv$source$system_name,
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)
rv$target$settings &lt;- DIZutils::get_config_env(
  system_name = tolower(rv$target$system_name),
  logfile_dir = rv$log$logfile_dir,
  headless = rv$headless
)

# set start_time (e.g. when clicking the 'Load Data'-button in shiny
rv$start_time &lt;- format(Sys.time(), usetz = TRUE, tz = "CET")

# define restricting date
rv$restricting_date$use_it &lt;- FALSE

# load source data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$source,
  keys_to_test = rv$keys_source
)
rv$data_source &lt;- tempdat$outdata

# load target data
tempdat &lt;- data_loading(
  rv = rv,
  system = rv$target,
  keys_to_test = rv$keys_target
)
rv$data_target &lt;- tempdat$outdata

rv$data_plausibility$atemporal &lt;- get_atemp_plausis(
  rv = rv,
  atemp_vars = rv$pl$atemp_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

# add the plausibility raw data to data_target and data_source
for (i in names(rv$data_plausibility$atemporal)) {
  for (k in c("source_data", "target_data")) {
    w &lt;- gsub("_data", "", k)
    raw_data &lt;- paste0("data_", w)
    rv[[raw_data]][[i]] &lt;-
      rv$data_plausibility$atemporal[[i]][[k]][[raw_data]]
    rv$data_plausibility$atemporal[[i]][[k]][[raw_data]] &lt;- NULL
  }
  gc()
}

# calculate descriptive results
rv$results_descriptive &lt;- descriptive_results(
  rv = rv,
  headless = rv$headless
)

# calculate atemporal plausibilites
rv$results_plausibility_atemporal &lt;- atemp_plausi_results(
  rv = rv,
  atemp_vars = rv$data_plausibility$atemporal,
  mdr = rv$mdr,
  headless = rv$headless
)

# calculate unique plausibilites
rv$results_plausibility_unique &lt;- uniq_plausi_results(
  rv = rv,
  uniq_vars = rv$pl$uniq_vars,
  mdr = rv$mdr,
  headless = rv$headless
)

rv$conformance$value_conformance &lt;- value_conformance(
  rv = rv,
  scope = "descriptive",
  results = rv$results_descriptive,
  headless = rv$headless,
  logfile_dir = rv$log$logfile_dir
)

value_conformance_checks(results = rv$conformance$value_conformance)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
