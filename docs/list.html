<!DOCTYPE html><html lang="en"><head><title>Help for package list</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {list}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#affirm'><p>The 1991 National Race and Politics Survey</p></a></li>
<li><a href='#combinedListDirect'><p>Combined List Estimator</p></a></li>
<li><a href='#combinedListExps'><p>Five List Experiments with Direct Questions</p></a></li>
<li><a href='#comp.listEndorse'><p>Comparing List and Endorsement Experiment Data</p></a></li>
<li><a href='#ict.hausman.test'><p>Hausman Specification Test for Two List Experiment Regression Fit Objects</p></a></li>
<li><a href='#ict.test'><p>Item Count Technique</p></a></li>
<li><a href='#ictreg'><p>Item Count Technique</p></a></li>
<li><a href='#ictreg.joint'><p>Item Count Technique: Outcome Models</p></a></li>
<li><a href='#ictregBayes'><p>Item Count Technique</p></a></li>
<li><a href='#ictregBayesHier'><p>Item Count Technique</p></a></li>
<li><a href='#mexico'><p>The 2012 Mexico Elections Panel Study</p></a></li>
<li><a href='#mis'><p>The 1994 Multi-Investigator Survey</p></a></li>
<li><a href='#multi'><p>The 1991 National Race and Politics Survey</p></a></li>
<li><a href='#plot.predict.ictreg'><p>Plot Method for the Item Count Technique</p></a></li>
<li><a href='#predict.ictreg'><p>Predict Method for Item Count Technique</p></a></li>
<li><a href='#predict.ictreg.joint'><p>Predict Method for Item Count Technique, Outcome Regressions</p></a></li>
<li><a href='#predict.ictregBayes'><p>Predict Method for the Item Count Technique with Bayesian MCMC</p></a></li>
<li><a href='#predict.ictregBayesHier'><p>Predict Method for the Item Count Technique with Bayesian Hierarchical</p>
Regression</a></li>
<li><a href='#race'><p>The 1991 National Race and Politics Survey</p></a></li>
<li><a href='#summary.ictreg'><p>Summary Method for the Item Count Technique</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>9.2.6</td>
</tr>
<tr>
<td>Title:</td>
<td>Statistical Methods for the Item Count Technique and List
Experiment</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0), utils, sandwich (&ge; 2.3-3)</td>
</tr>
<tr>
<td>Imports:</td>
<td>VGAM (&ge; 0.9-8), magic (&ge; 1.5-6), gamlss.dist (&ge; 4.3-4),
MASS (&ge; 7.3-40), quadprog (&ge; 1.5-5), corpcor (&ge; 1.6.7),
mvtnorm (&ge; 1.0-2), coda (&ge; 0.17-1), stats, arm</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 0.9.1), knitr (&ge; 1.10.5)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Description:</td>
<td>Allows researchers to conduct multivariate
    statistical analyses of survey data with list experiments. This
    survey methodology is also known as the item count technique or
    the unmatched count technique and is an alternative to the commonly
    used randomized response method. The package implements the methods
    developed by Imai (2011) &lt;<a href="https://doi.org/10.1198%2Fjasa.2011.ap10415">doi:10.1198/jasa.2011.ap10415</a>&gt;, 
    Blair and Imai (2012) &lt;<a href="https://doi.org/10.1093%2Fpan%2Fmpr048">doi:10.1093/pan/mpr048</a>&gt;, 
    Blair, Imai, and Lyall (2013) &lt;<a href="https://doi.org/10.1111%2Fajps.12086">doi:10.1111/ajps.12086</a>&gt;, 
    Imai, Park, and Greene (2014) &lt;<a href="https://doi.org/10.1093%2Fpan%2Fmpu017">doi:10.1093/pan/mpu017</a>&gt;,
    Aronow, Coppock, Crawford, and Green (2015) &lt;<a href="https://doi.org/10.1093%2Fjssam%2Fsmu023">doi:10.1093/jssam/smu023</a>&gt;, 
    Chou, Imai, and Rosenfeld (2017) &lt;<a href="https://doi.org/10.1177%2F0049124117729711">doi:10.1177/0049124117729711</a>&gt;, and 
    Blair, Chou, and Imai (2018) <a href="https://imai.fas.harvard.edu/research/files/listerror.pdf">https://imai.fas.harvard.edu/research/files/listerror.pdf</a>. 
    This includes a Bayesian MCMC implementation of regression for the 
    standard and multiple sensitive item list experiment designs and a 
    random effects setup, a Bayesian MCMC hierarchical regression model 
    with up to three hierarchical groups, the combined list experiment 
    and endorsement experiment regression model, a joint model of the 
    list experiment that enables the analysis of the list experiment as 
    a predictor in outcome regression models, a method for combining 
    list experiments with direct questions, and methods for diagnosing and
    adjusting for response error. In addition, the package implements the 
    statistical test that is designed to detect certain failures of list 
    experiments, and a placebo test for the list experiment using data from 
    direct questions.</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-10 16:46:25 UTC; gblair</td>
</tr>
<tr>
<td>Author:</td>
<td>Graeme Blair [aut, cre],
  Winston Chou [aut],
  Kosuke Imai [aut],
  Bethany Park [ctb],
  Alexander Coppock [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Graeme Blair &lt;graeme.blair@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-10 17:13:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='affirm'>The 1991 National Race and Politics Survey</h2><span id='topic+affirm'></span>

<h3>Description</h3>

<p>This dataset is a subset of the 1991 National Race and Politics Survey and
contains the item count technique or the list experiment.  The main question
reads as follows: <code style="white-space: pre;">&#8288; Now I'm going to read you four things that
sometimes make people angry or upset.  After I read all (three/four), just
tell me HOW MANY of them upset you.  (I don't want to know which ones, just
how many.)  (1) "the federal government increasing the tax on gasoline;" (2)
"professional athletes getting million-dollar-plus salaries;" (3) "large
corporations polluting the environment;" (4) "black leaders asking the
government for affirmative action."&#8288;</code>
</p>


<h3>Format</h3>

<p>A data frame containing the following 6 variables for 1171
observations.
</p>

<table>
<tr>
 <td style="text-align: left;"> y </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> the number of items that make
respondents angry </td><td style="text-align: left;"> 0 - 4 </td>
</tr>
<tr>
 <td style="text-align: left;"> south </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> whether or not a
respondents live in a southern state </td><td style="text-align: left;"> 0 - 1 </td>
</tr>
<tr>
 <td style="text-align: left;"> male </td><td style="text-align: left;"> numeric </td><td style="text-align: left;">
whether or not a respondent is male </td><td style="text-align: left;"> 0 - 1 </td>
</tr>
<tr>
 <td style="text-align: left;"> college </td><td style="text-align: left;"> numeric </td><td style="text-align: left;">
whether or not a respondent attended some college </td><td style="text-align: left;"> 0 - 1 </td>
</tr>
<tr>
 <td style="text-align: left;"> age </td><td style="text-align: left;">
numeric </td><td style="text-align: left;"> age of a respondent divided by 10 </td>
</tr>
<tr>
 <td style="text-align: left;"> treat </td><td style="text-align: left;"> numeric </td><td style="text-align: left;">
treatment status </td><td style="text-align: left;"> 0 - 1 </td>
</tr>

</table>



<h3>Details</h3>

<p>where the last item is presented only with the treatment group and the
control list only contains the first three items.
</p>


<h3>Source</h3>

<p>The full data set is available at SDA (Survey Documentation and
Analysis; <a href="https://sda.berkeley.edu/D3/Natlrace/Doc/nrac.htm">https://sda.berkeley.edu/D3/Natlrace/Doc/nrac.htm</a>)
</p>

<hr>
<h2 id='combinedListDirect'>Combined List Estimator</h2><span id='topic+combinedListDirect'></span>

<h3>Description</h3>

<p>This function implements the combined list estimator described in Aronow,
Coppock, Crawford, and Green (2015): Combining List Experiment and Direct
Question Estimates of Sensitive Behavior Prevalence
</p>


<h3>Usage</h3>

<pre><code class='language-R'>combinedListDirect(
  formula,
  data = parent.frame(),
  treat = "treat",
  direct = "direct"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="combinedListDirect_+3A_formula">formula</code></td>
<td>
<p>an object of class &quot;formula&quot; (or one that can be coerced to
that class): a symbolic description of the model to be fitted. Should be of
the form Y ~ T + X1 + X2, where Y is the list response, T is the treatment
indicator, and X1, X2, etc are pretreatment covariates. It is recommended
that T be a numeric variable whose values are 0 for subjects in control and
1 for subjects in treatment.</p>
</td></tr>
<tr><td><code id="combinedListDirect_+3A_data">data</code></td>
<td>
<p>an optional data frame, list or environment (or object coercible
by as.data.frame to a data frame) containing the variables in the model. If
not found in data, the variables are taken from environment(formula),
typically the environment from which combined.list is called. It is good
practice to include all variables used in the estimation (list response,
treatment indicator, direct response, and optional pre-treatment covariates)
in a dataframe rather than calling data from the global environent.</p>
</td></tr>
<tr><td><code id="combinedListDirect_+3A_treat">treat</code></td>
<td>
<p>a character string giving the name of the treatment variable.
Defaults to &quot;treat&quot;.</p>
</td></tr>
<tr><td><code id="combinedListDirect_+3A_direct">direct</code></td>
<td>
<p>a character string giving the name of the direct response
variable. Defaults to &quot;direct&quot;. The direct response variable itself must
only contain the values 0 and 1, where 1 refers to subjects who answered
&quot;Yes&quot; to the direct question.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing conventional, direct, and combined prevalence
estimates with associated standard errors as well as the results of two
placebo tests.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load data from Aronow, Coppock, Crawford, and Green (2015)
data("combinedListExps")

# complete case analysis
combinedListExps &lt;- na.omit(combinedListExps)
# Conduct estimation without covariate adjustment
out.1 &lt;- combinedListDirect(list1N ~ list1treat, 
                            data = subset(combinedListExps, directsfirst==1), 
                            treat = "list1treat", direct = "direct1")
summary(out.1)

# Conduct estimation with covariate adjustment
out.2 &lt;- combinedListDirect(list1N ~ list1treat + gender + 
                            ideology + education + race, 
                            data = subset(combinedListExps, directsfirst==1), 
                            treat = "list1treat", direct = "direct1")
summary(out.2)

</code></pre>

<hr>
<h2 id='combinedListExps'>Five List Experiments with Direct Questions</h2><span id='topic+combinedListExps'></span>

<h3>Description</h3>

<p>A dataset containing the five list experiments in 
Aronow, Coppock, Crawford, and Green (2015)
</p>
<p>A dataset containing the five list experiments in Aronow, Coppock, Crawford,
and Green (2015)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(combinedListExps)
</code></pre>


<h3>Format</h3>

<p>A data frame with 1023 observations and 23 variables
</p>
<p>A data frame with 1023 observations and 23 variables
</p>

<hr>
<h2 id='comp.listEndorse'>Comparing List and Endorsement Experiment Data</h2><span id='topic+comp.listEndorse'></span>

<h3>Description</h3>

<p>Function to conduct a statistical test with the null hypothesis that there
is no difference between the correlation coefficients between list
experiment and endorsement experiment data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>comp.listEndorse(
  y.endorse,
  y.list,
  treat,
  n.draws = 10000,
  alpha = 0.05,
  endorse.mean = FALSE,
  method = "pearson"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="comp.listEndorse_+3A_y.endorse">y.endorse</code></td>
<td>
<p>A numerical matrix containing the response data for the
endorsement experiment.</p>
</td></tr>
<tr><td><code id="comp.listEndorse_+3A_y.list">y.list</code></td>
<td>
<p>A numerical vector containing the response data for a list
experiment.</p>
</td></tr>
<tr><td><code id="comp.listEndorse_+3A_treat">treat</code></td>
<td>
<p>A numerical vector containing the binary treatment status for
the experiments. The treatment assignment must be the same for both
experiments to compare across experiments.</p>
</td></tr>
<tr><td><code id="comp.listEndorse_+3A_n.draws">n.draws</code></td>
<td>
<p>Number of Monte Carlo draws.</p>
</td></tr>
<tr><td><code id="comp.listEndorse_+3A_alpha">alpha</code></td>
<td>
<p>Confidence level for the statistical test.</p>
</td></tr>
<tr><td><code id="comp.listEndorse_+3A_endorse.mean">endorse.mean</code></td>
<td>
<p>A logical value indicating whether the mean endorsement
experiment response is taken across questions.</p>
</td></tr>
<tr><td><code id="comp.listEndorse_+3A_method">method</code></td>
<td>
<p>The method for calculating the correlation, either Pearson's
rho or Kendall's tau.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function allows the user to calculate the correlation between list and
endorsement experiment data within the control group and the treatment
group, and to conduct a statistical test with the null hypothesis of no
difference between the two correlation coefficients.
</p>


<h3>Value</h3>

<p><code>comp.listEndorse</code> returns a list with four elements: the
correlation statistic (rho or tau) for the treatment group as
<code>cor.treat</code>, the correlation statistic for the control group as
<code>cor.control</code>, the p.value for the statistical test comparing the two
correlation statistics as <code>p.value</code>, and the bootstrapped confidence
interval of the difference as <code>ci</code>.
</p>


<h3>Author(s)</h3>

<p>Graeme Blair, UCLA, <a href="mailto:graeme.blair@ucla.edu">graeme.blair@ucla.edu</a>
and Kosuke Imai, Princeton University, <a href="mailto:kimai@princeton.edu">kimai@princeton.edu</a>
</p>


<h3>References</h3>

<p>Blair, Graeme, Jason Lyall and Kosuke Imai. (2014) &ldquo;Comparing
and Combining List and Experiments: Evidence from Afghanistan.&quot;  American
Journal of Political Science. available at
<a href="http://imai.princeton.edu/research/comp.html">http://imai.princeton.edu/research/comp.html</a>
</p>

<hr>
<h2 id='ict.hausman.test'>Hausman Specification Test for Two List Experiment Regression Fit Objects</h2><span id='topic+ict.hausman.test'></span>

<h3>Description</h3>

<p>Hausman Specification Test for Two List Experiment Regression Fit Objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ict.hausman.test(ml, nls, abs = FALSE, psd = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ict.hausman.test_+3A_ml">ml</code></td>
<td>
<p>Maximum likelihood model fit, for example from ictreg(method = &quot;ml&quot;)</p>
</td></tr>
<tr><td><code id="ict.hausman.test_+3A_nls">nls</code></td>
<td>
<p>NLS model fit, for example from ictreg(method = &quot;nls&quot;)</p>
</td></tr>
<tr><td><code id="ict.hausman.test_+3A_abs">abs</code></td>
<td>
<p>Flag to override error when Hausman statistic is negative, which may indicate misspecification. Set to <code>FALSE</code> to override.</p>
</td></tr>
<tr><td><code id="ict.hausman.test_+3A_psd">psd</code></td>
<td>
<p>Flag to override error when variance-covariance difference is non-positive semidefinite, suggesting misspecification.  Set to <code>TRUE</code> to override.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List containing Hausman statistic, p-value, and the degrees of freedom of the test.
</p>

<hr>
<h2 id='ict.test'>Item Count Technique</h2><span id='topic+ict.test'></span>

<h3>Description</h3>

<p>Function to conduct a statistical test with the null hypothesis that there
is no &quot;design effect&quot; in a list experiment, a failure of the experiment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ict.test(
  y,
  treat,
  J = NA,
  alpha = 0.05,
  n.draws = 250000,
  gms = TRUE,
  pi.table = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ict.test_+3A_y">y</code></td>
<td>
<p>A numerical vector containing the response data for a list
experiment.</p>
</td></tr>
<tr><td><code id="ict.test_+3A_treat">treat</code></td>
<td>
<p>A numerical vector containing the binary treatment status for a
list experiment.</p>
</td></tr>
<tr><td><code id="ict.test_+3A_j">J</code></td>
<td>
<p>Number of non-sensitive (control) survey items.</p>
</td></tr>
<tr><td><code id="ict.test_+3A_alpha">alpha</code></td>
<td>
<p>Confidence level for the statistical test.</p>
</td></tr>
<tr><td><code id="ict.test_+3A_n.draws">n.draws</code></td>
<td>
<p>Number of Monte Carlo draws.</p>
</td></tr>
<tr><td><code id="ict.test_+3A_gms">gms</code></td>
<td>
<p>A logical value indicating whether the generalized moment
selection procedure should be used.</p>
</td></tr>
<tr><td><code id="ict.test_+3A_pi.table">pi.table</code></td>
<td>
<p>A logical value indicating whether a table of estimated
proportions of respondent types with standard errors is displayed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function allows the user to perform a statistical test on data from a
list experiment or item count technique with the null hypothesis of no
design effect. A design effect occurs when an individual's response to the
non-sensitive items changes depending upon the respondent's treatment
status.
</p>


<h3>Value</h3>

<p><code>ict.test</code> returns a numerical scalar with the
Bonferroni-corrected minimum p-value of the statistical test.
</p>


<h3>Author(s)</h3>

<p>Graeme Blair, UCLA, <a href="mailto:graeme.blair@ucla.edu">graeme.blair@ucla.edu</a>
and Kosuke Imai, Princeton University, <a href="mailto:kimai@princeton.edu">kimai@princeton.edu</a>
</p>


<h3>References</h3>

<p>Blair, Graeme and Kosuke Imai. (2012) &ldquo;Statistical Analysis of
List Experiments.&quot;  Political Analysis, Vol. 20, No 1 (Winter). available at
<a href="http://imai.princeton.edu/research/listP.html">http://imai.princeton.edu/research/listP.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ictreg">ictreg</a></code> for list experiment regression based on the
assumption of no design effect
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

data(affirm)
data(race)

# Conduct test with null hypothesis that there is no design effect
# Replicates results on Blair and Imai (2012) pg. 69

test.value.affirm &lt;- ict.test(affirm$y, affirm$treat, J = 3, gms = TRUE)
print(test.value.affirm)

test.value.race &lt;- ict.test(race$y, race$treat, J = 3, gms = TRUE)
print(test.value.race)


</code></pre>

<hr>
<h2 id='ictreg'>Item Count Technique</h2><span id='topic+ictreg'></span><span id='topic+ict'></span><span id='topic+list'></span>

<h3>Description</h3>

<p>Function to conduct multivariate regression analyses of survey data with the
item count technique, also known as the list experiment and the unmatched
count technique.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ictreg(
  formula,
  data = parent.frame(),
  treat = "treat",
  J,
  method = "ml",
  weights,
  h = NULL,
  group = NULL,
  matrixMethod = "efficient",
  robust = FALSE,
  error = "none",
  overdispersed = FALSE,
  constrained = TRUE,
  floor = FALSE,
  ceiling = FALSE,
  ceiling.fit = "glm",
  floor.fit = "glm",
  ceiling.formula = ~1,
  floor.formula = ~1,
  fit.start = "lm",
  fit.sensitive = "glm",
  fit.nonsensitive = "nls",
  multi.condition = "none",
  maxIter = 5000,
  verbose = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ictreg_+3A_formula">formula</code></td>
<td>
<p>An object of class &quot;formula&quot;: a symbolic description of the
model to be fitted.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_data">data</code></td>
<td>
<p>A data frame containing the variables in the model</p>
</td></tr>
<tr><td><code id="ictreg_+3A_treat">treat</code></td>
<td>
<p>Name of treatment indicator as a string. For single sensitive
item models, this refers to a binary indicator, and for multiple sensitive
item models it refers to a multi-valued variable with zero representing the
control condition. This can be an integer (with 0 for the control group) or
a factor (with &quot;control&quot; for the control group).</p>
</td></tr>
<tr><td><code id="ictreg_+3A_j">J</code></td>
<td>
<p>Number of non-sensitive (control) survey items.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_method">method</code></td>
<td>
<p>Method for regression, either <code>ml</code> for the Maximum
Likelihood (ML) estimation with the Expectation-Maximization algorithm;
<code>lm</code> for linear model estimation; or <code>nls</code> for the Non-linear
Least Squares (NLS) estimation with the two-step procedure.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_weights">weights</code></td>
<td>
<p>Name of the weights variable as a string, if weighted
regression is desired. Not implemented for the ceiling/floor models,
multiple sensitive item design, or for the modified design.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_h">h</code></td>
<td>
<p>Auxiliary data functionality. Optional named numeric vector with
length equal to number of groups. Names correspond to group labels and
values correspond to auxiliary moments.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_group">group</code></td>
<td>
<p>Auxiliary data functionality. Optional character vector of
group labels with length equal to number of observations.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_matrixmethod">matrixMethod</code></td>
<td>
<p>Auxiliary data functionality. Procedure for estimating
optimal weighting matrix for generalized method of moments. One of
&quot;efficient&quot; for two-step feasible and &quot;cue&quot; for continuously updating.
Default is &quot;efficient&quot;. Only relevant if <code>h</code> and <code>group</code> are
specified.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_robust">robust</code></td>
<td>
<p>Robust NLS and ML models that ensure that the estimated 
proportion of the sensitive trait is close to difference-in-means estimate.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_error">error</code></td>
<td>
<p>ML models that model response error processes proposed in
Blair, Chou, and Imai (2018). Select either <code>none</code> (standard ML), the
default; <code>topcode</code>, which models an error process in which a random 
subset of respondents chooses the maximal (ceiling) response value, 
regardless of their truthful response; and <code>uniform</code>, which models an 
error process in which a subset of respondents chooses their responses at 
random.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_overdispersed">overdispersed</code></td>
<td>
<p>Indicator for the presence of overdispersion. If
<code>TRUE</code>, the beta-binomial model is used in the EM algorithm, if
<code>FALSE</code> the binomial model is used. Not relevant for the <code>NLS</code> or
<code>lm</code> methods.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_constrained">constrained</code></td>
<td>
<p>A logical value indicating whether the control group
parameters are constrained to be equal.  Not relevant for the <code>NLS</code> or
<code>lm</code> methods</p>
</td></tr>
<tr><td><code id="ictreg_+3A_floor">floor</code></td>
<td>
<p>A logical value indicating whether the floor liar model should
be used to adjust for the possible presence of respondents dishonestly
reporting a negative preference for the sensitive item among those who hold
negative views of all the non-sensitive items.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_ceiling">ceiling</code></td>
<td>
<p>A logical value indicating whether the ceiling liar model
should be used to adjust for the possible presence of respondents
dishonestly reporting a negative preference for the sensitive item among
those who hold affirmative views of all the non-sensitive items.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_ceiling.fit">ceiling.fit</code></td>
<td>
<p>Fit method for the M step in the EM algorithm used to fit
the ceiling liar model. <code>glm</code> uses standard logistic regression, while
<code>bayesglm</code> uses logistic regression with a weakly informative prior
over the parameters.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_floor.fit">floor.fit</code></td>
<td>
<p>Fit method for the M step in the EM algorithm used to fit
the floor liar model. <code>glm</code> uses standard logistic regression, while
<code>bayesglm</code> uses logistic regression with a weakly informative prior
over the parameters.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_ceiling.formula">ceiling.formula</code></td>
<td>
<p>Covariates to include in ceiling liar model. These
must be a subset of the covariates used in <code>formula</code>.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_floor.formula">floor.formula</code></td>
<td>
<p>Covariates to include in floor liar model. These must
be a subset of the covariates used in <code>formula</code>.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_fit.start">fit.start</code></td>
<td>
<p>Fit method for starting values for standard design
<code>ml</code> model. The options are <code>lm</code>, <code>glm</code>, and <code>nls</code>,
which use OLS, logistic regression, and non-linear least squares to generate
starting values, respectively. The default is <code>nls</code>.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_fit.sensitive">fit.sensitive</code></td>
<td>
<p>Fit method for the sensitive item fit for maximum likelihood
models. <code>glm</code> uses standard logistic regression, while
<code>bayesglm</code> uses logistic regression with a weakly informative prior
over the parameters.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_fit.nonsensitive">fit.nonsensitive</code></td>
<td>
<p>Fit method for the non-sensitive item fit for the
<code>nls</code> method and the starting values for the <code>ml</code> method for the
<code>modified</code> design. Options are <code>glm</code> and <code>nls</code>, and the
default is <code>nls</code>.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_multi.condition">multi.condition</code></td>
<td>
<p>For the multiple sensitive item design, covariates
representing the estimated count of affirmative responses for each
respondent can be included directly as a level variable by choosing
<code>level</code>, or as indicator variables for each value but one by choosing
<code>indicators</code>. The default is <code>none</code>.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_maxiter">maxIter</code></td>
<td>
<p>Maximum number of iterations for the Expectation-Maximization
algorithm of the ML estimation.  The default is 5000.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_verbose">verbose</code></td>
<td>
<p>a logical value indicating whether model diagnostics are
printed out during fitting.</p>
</td></tr>
<tr><td><code id="ictreg_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to NLS regression commands.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function allows the user to perform regression analysis on data from
the item count technique, also known as the list experiment and the
unmatched count technique.
</p>
<p>Three list experiment designs are accepted by this function: the standard
design; the multiple sensitive item standard design; and the modified design
proposed by Corstange (2009).
</p>
<p>For the standard design, three methods are implemented in this function: the
linear model; the Maximum Likelihood (ML) estimation for the
Expectation-Maximization (EM) algorithm; the nonlinear least squares (NLS)
estimation with the two-step procedure both proposed in Imai (2010); and the
Maximum Likelihood (ML) estimator in the presence of two types of dishonest
responses, &quot;ceiling&quot; and &quot;floor&quot; liars. The ceiling model, floor model, or
both, as described in Blair and Imai (2010) can be activated by using the
<code>ceiling</code> and <code>floor</code> options. The constrained and unconstrained
ML models presented in Imai (2010) are available through the
<code>constrained</code> option, and the user can specify if overdispersion is
present in the data for the no liars models using the <code>overdispersed</code>
option to control whether a beta-binomial or binomial model is used in the
EM algorithm to model the item counts.
</p>
<p>The modified design and the multiple sensitive item design are automatically
detected by the function, and only the binomial model without overdispersion
is available.
</p>


<h3>Value</h3>

<p><code>ictreg</code> returns an object of class &quot;ictreg&quot;.  The function
<code>summary</code> is used to obtain a table of the results.  The object
<code>ictreg</code> is a list that contains the following components.  Some of
these elements are not available depending on which method is used
(<code>lm</code>, <code>nls</code> or <code>ml</code>), which design is used (<code>standard</code>,
<code>modified</code>), whether multiple sensitive items are include
(<code>multi</code>), and whether the constrained model is used (<code>constrained
= TRUE</code>).
</p>
<table role = "presentation">
<tr><td><code>par.treat</code></td>
<td>
<p>point estimate for effect of covariate on item count fitted
on treatment group</p>
</td></tr> <tr><td><code>se.treat</code></td>
<td>
<p>standard error for estimate of effect of
covariate on item count fitted on treatment group</p>
</td></tr> <tr><td><code>par.control</code></td>
<td>
<p>point
estimate for effect of covariate on item count fitted on control group</p>
</td></tr>
<tr><td><code>se.control</code></td>
<td>
<p>standard error for estimate of effect of covariate on item
count fitted on control group</p>
</td></tr> <tr><td><code>coef.names</code></td>
<td>
<p>variable names as defined
in the data frame</p>
</td></tr> <tr><td><code>design</code></td>
<td>
<p>call indicating whether the <code>standard</code>
design as proposed in Imai (2010) or thee <code>modified</code> design as proposed
in Corstange (2009) is used</p>
</td></tr> <tr><td><code>method</code></td>
<td>
<p>call of the method used</p>
</td></tr>
<tr><td><code>overdispersed</code></td>
<td>
<p>call indicating whether data is overdispersed</p>
</td></tr>
<tr><td><code>constrained</code></td>
<td>
<p>call indicating whether the constrained model is used</p>
</td></tr>
<tr><td><code>boundary</code></td>
<td>
<p>call indicating whether the floor/ceiling boundary models
are used</p>
</td></tr> <tr><td><code>multi</code></td>
<td>
<p>indicator for whether multiple sensitive items were
included in the data frame</p>
</td></tr> <tr><td><code>call</code></td>
<td>
<p>the matched call</p>
</td></tr> <tr><td><code>data</code></td>
<td>
<p>the
<code>data</code> argument</p>
</td></tr> <tr><td><code>x</code></td>
<td>
<p>the design matrix</p>
</td></tr> <tr><td><code>y</code></td>
<td>
<p>the response
vector</p>
</td></tr> <tr><td><code>treat</code></td>
<td>
<p>the vector indicating treatment status</p>
</td></tr> <tr><td><code>J</code></td>
<td>
<p>Number
of non-sensitive (control) survey items set by the user or detected.</p>
</td></tr>
<tr><td><code>treat.labels</code></td>
<td>
<p>a vector of the names used by the <code>treat</code> vector
for the sensitive item or items. This is the names from the <code>treat</code>
indicator if it is a factor, or the number of the item if it is numeric.</p>
</td></tr>
<tr><td><code>control.label</code></td>
<td>
<p>a vector of the names used by the <code>treat</code> vector
for the control items. This is the names from the <code>treat</code> indicator if
it is a factor, or the number of the item if it is numeric.</p>
</td></tr>
</table>
<p>For the maximum likelihood models, an additional output object is included:
</p>
<table role = "presentation">
<tr><td><code>pred.post</code></td>
<td>
<p>posterior predicted probability of answering &quot;yes&quot; to the
sensitive item. The weights from the E-M algorithm.</p>
</td></tr>
</table>
<p>For the floor/ceiling models, several additional output objects are
included: </p>
<table role = "presentation">
<tr><td><code>ceiling</code></td>
<td>
<p>call indicating whether the assumption of no
ceiling liars is relaxed, and ceiling parameters are estimated</p>
</td></tr>
<tr><td><code>par.ceiling</code></td>
<td>
<p>point estimate for effect of covariate on whether
respondents who answered affirmatively to all non-sensitive items and hold a
true affirmative opinion toward the sensitive item lied and reported a
negative response to the sensitive item </p>
</td></tr> <tr><td><code>se.ceiling</code></td>
<td>
<p>standard error
for estimate for effect of covariate on whether respondents who answered
affirmatively to all non-sensitive items and hold a true affirmative opinion
toward the sensitive item lied and reported a negative response to the
sensitive item</p>
</td></tr> <tr><td><code>floor</code></td>
<td>
<p>call indicating whether the assumption of no
floor liars is relaxed, and floor parameters are estimated</p>
</td></tr>
<tr><td><code>par.ceiling</code></td>
<td>
<p>point estimate for effect of covariate on whether
respondents who answered negatively to all non-sensitive items and hold a
true affirmative opinion toward the sensitive item lied and reported a
negative response to the sensitive item </p>
</td></tr> <tr><td><code>se.ceiling</code></td>
<td>
<p>standard error
for estimate for effect of covariate on whether respondents who answered
negatively to all non-sensitive items and hold a true affirmative opinion
toward the sensitive item lied and reported a negative response to the
sensitive item</p>
</td></tr> <tr><td><code>coef.names.ceiling</code></td>
<td>
<p>variable names from the ceiling
liar model fit, if applicable</p>
</td></tr> <tr><td><code>coef.names.floor</code></td>
<td>
<p>variable names from
the floor liar model fit, if applicable</p>
</td></tr>
</table>
<p>For the multiple sensitive item design, the <code>par.treat</code> and
<code>se.treat</code> vectors are returned as lists of vectors, one for each
sensitive item.
</p>
<p>For the unconstrained model, the <code>par.control</code> and <code>se.control</code>
output is replaced by: </p>
<table role = "presentation">
<tr><td><code>par.control.phi0</code></td>
<td>
<p>point estimate for effect of
covariate on item count fitted on treatment group</p>
</td></tr>
<tr><td><code>se.control.phi0</code></td>
<td>
<p>standard error for estimate of effect of covariate on
item count fitted on treatment group</p>
</td></tr> <tr><td><code>par.control.phi1</code></td>
<td>
<p>point estimate
for effect of covariate on item count fitted on treatment group</p>
</td></tr>
<tr><td><code>se.control.phi1</code></td>
<td>
<p>standard error for estimate of effect of covariate on
item count fitted on treatment group</p>
</td></tr>
</table>
<p>Depending upon the estimator requested by the user, model fit statistics are
also included: </p>
<table role = "presentation">
<tr><td><code>llik</code></td>
<td>
<p>the log likelihood of the model, if <code>ml</code> is
used</p>
</td></tr> <tr><td><code>resid.se</code></td>
<td>
<p>the residual standard error, if <code>nls</code> or
<code>lm</code> are used. This will be a scalar if the standard design was used,
and a vector if the multiple sensitive item design was used</p>
</td></tr>
<tr><td><code>resid.df</code></td>
<td>
<p>the residual degrees of freedom, if <code>nls</code> or <code>lm</code>
are used. This will be a scalar if the standard design was used, and a
vector if the multiple sensitive item design was used</p>
</td></tr>
</table>
<p>When using the auxiliary data functionality, the following objects are
included: </p>
<table role = "presentation">
<tr><td><code>aux</code></td>
<td>
<p>logical value indicating whether estimation
incorporates auxiliary moments</p>
</td></tr> <tr><td><code>nh</code></td>
<td>
<p>integer count of the number of
auxiliary moments</p>
</td></tr> <tr><td><code>wm</code></td>
<td>
<p>procedure used to estimate the optimal weight
matrix</p>
</td></tr> <tr><td><code>J.stat</code></td>
<td>
<p>numeric value of the Sargan Hansen overidentifying
restriction test statistic</p>
</td></tr> <tr><td><code>overid.p</code></td>
<td>
<p>corresponding p-value for the
Sargan Hansen test</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Graeme Blair, UCLA, <a href="mailto:graeme.blair@ucla.edu">graeme.blair@ucla.edu</a>
and Kosuke Imai, Princeton University, <a href="mailto:kimai@princeton.edu">kimai@princeton.edu</a>
</p>


<h3>References</h3>

<p>Blair, Graeme and Kosuke Imai. (2012) &ldquo;Statistical Analysis of
List Experiments.&quot;  Political Analysis. Forthcoming. available at
<a href="http://imai.princeton.edu/research/listP.html">http://imai.princeton.edu/research/listP.html</a>
</p>
<p>Imai, Kosuke. (2011) &ldquo;Multivariate Regression Analysis for the Item Count
Technique.&rdquo; Journal of the American Statistical Association, Vol. 106, No.
494 (June), pp. 407-416. available at
<a href="http://imai.princeton.edu/research/list.html">http://imai.princeton.edu/research/list.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+predict.ictreg">predict.ictreg</a></code> for fitted values
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

data(race)

set.seed(1)

# Calculate list experiment difference in means

diff.in.means.results &lt;- ictreg(y ~ 1, data = race, 
	       	      treat = "treat", J=3, method = "lm")

summary(diff.in.means.results)

# Fit linear regression
# Replicates Table 1 Columns 1-2 Imai (2011); note that age is divided by 10

lm.results &lt;- ictreg(y ~ south + age + male + college, data = race, 
	       	      treat = "treat", J=3, method = "lm")

summary(lm.results)

# Fit two-step non-linear least squares regression
# Replicates Table 1 Columns 3-4 Imai (2011); note that age is divided by 10

nls.results &lt;- ictreg(y ~ south + age + male + college, data = race, 
	       	      treat = "treat", J=3, method = "nls")

summary(nls.results)

## Not run: 

# Fit EM algorithm ML model with constraint
# Replicates Table 1 Columns 5-6, Imai (2011); note that age is divided by 10

ml.constrained.results &lt;- ictreg(y ~ south + age + male + college, data = race, 
		       	  	 treat = "treat", J=3, method = "ml", 
				 overdispersed = FALSE, constrained = TRUE)

summary(ml.constrained.results)

# Fit EM algorithm ML model with no constraint
# Replicates Table 1 Columns 7-10, Imai (2011); note that age is divided by 10

ml.unconstrained.results &lt;- ictreg(y ~ south + age + male + college, data = race, 
			    	   treat = "treat", J=3, method = "ml", 
				   overdispersed = FALSE, constrained = FALSE)

summary(ml.unconstrained.results)

# Fit EM algorithm ML model for multiple sensitive items
# Replicates Table 3 in Blair and Imai (2010)

multi.results &lt;- ictreg(y ~ male + college + age + south + south:age, treat = "treat", 
	      	 	J = 3, data = multi, method = "ml", 
			multi.condition = "level")

summary(multi.results)

# Fit standard design ML model
# Replicates Table 7 Columns 1-2 in Blair and Imai (2010)

noboundary.results &lt;- ictreg(y ~ age + college + male + south, treat = "treat",
		      	     J = 3, data = affirm, method = "ml", 
			     overdispersed = FALSE)

summary(noboundary.results)

# Fit standard design ML model with ceiling effects alone
# Replicates Table 7 Columns 3-4 in Blair and Imai (2010)

ceiling.results &lt;- ictreg(y ~ age + college + male + south, treat = "treat", 
		   	  J = 3, data = affirm, method = "ml", fit.start = "nls",
			  ceiling = TRUE, ceiling.fit = "bayesglm",
			  ceiling.formula = ~ age + college + male + south)

summary(ceiling.results)

# Fit standard design ML model with floor effects alone
# Replicates Table 7 Columns 5-6 in Blair and Imai (2010)

floor.results &lt;- ictreg(y ~ age + college + male + south, treat = "treat", 
	      	 	J = 3, data = affirm, method = "ml", fit.start = "glm", 
			floor = TRUE, floor.fit = "bayesglm",
			floor.formula = ~ age + college + male + south)

summary(floor.results)

# Fit standard design ML model with floor and ceiling effects
# Replicates Table 7 Columns 7-8 in Blair and Imai (2010)

both.results &lt;- ictreg(y ~ age + college + male + south, treat = "treat", 
	     	       J = 3, data = affirm, method = "ml", 
		       floor = TRUE, ceiling = TRUE, 
		       floor.fit = "bayesglm", ceiling.fit = "bayesglm",
		       floor.formula = ~ age + college + male + south,
		       ceiling.formula = ~ age + college + male + south)

summary(both.results)

# Response error models (Blair, Imai, and Chou 2018)

top.coded.error &lt;- ictreg(
   y ~ age + college + male + south, treat = "treat",
   J = 3, data = race, method = "ml", error = "topcoded")
   
uniform.error &lt;- ictreg(
   y ~ age + college + male + south, treat = "treat",
   J = 3, data = race, method = "ml", error = "topcoded")
   
# Robust models, which constrain sensitive item proportion
#   to difference-in-means estimate

robust.ml &lt;- ictreg(
   y ~ age + college + male + south, treat = "treat",
   J = 3, data = affirm, method = "ml", robust = TRUE)

robust.nls &lt;- ictreg(
   y ~ age + college + male + south, treat = "treat",
   J = 3, data = affirm, method = "nls", robust = TRUE)
   

## End(Not run)

</code></pre>

<hr>
<h2 id='ictreg.joint'>Item Count Technique: Outcome Models</h2><span id='topic+ictreg.joint'></span>

<h3>Description</h3>

<p>Function to conduct multivariate regression analyses of survey data with the
item count technique, also known as the list experiment, using predicted
responses from list experiments as predictors in outcome regression models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ictreg.joint(
  formula,
  data = parent.frame(),
  treat = "treat",
  J,
  outcome = "outcome",
  outcome.reg = "logistic",
  constrained = FALSE,
  maxIter = 1000
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ictreg.joint_+3A_formula">formula</code></td>
<td>
<p>An object of class &quot;formula&quot;: a symbolic description of the
model to be fitted.</p>
</td></tr>
<tr><td><code id="ictreg.joint_+3A_data">data</code></td>
<td>
<p>A data frame containing the variables in the model</p>
</td></tr>
<tr><td><code id="ictreg.joint_+3A_treat">treat</code></td>
<td>
<p>Name of treatment indicator as a string. For single sensitive
item models, this refers to a binary indicator, and for multiple sensitive
item models it refers to a multi-valued variable with zero representing the
control condition. This can be an integer (with 0 for the control group) or
a factor (with &quot;control&quot; for the control group).</p>
</td></tr>
<tr><td><code id="ictreg.joint_+3A_j">J</code></td>
<td>
<p>Number of non-sensitive (control) survey items.</p>
</td></tr>
<tr><td><code id="ictreg.joint_+3A_outcome">outcome</code></td>
<td>
<p>Name of outcome indicator as a string.</p>
</td></tr>
<tr><td><code id="ictreg.joint_+3A_outcome.reg">outcome.reg</code></td>
<td>
<p>Model for outcome regression. Options are &quot;logistic&quot; or
&quot;linear;&quot; default is &quot;logistic&quot;.</p>
</td></tr>
<tr><td><code id="ictreg.joint_+3A_constrained">constrained</code></td>
<td>
<p>A logical value indicating whether the control group
parameters are constrained to be equal. Default is FALSE.</p>
</td></tr>
<tr><td><code id="ictreg.joint_+3A_maxiter">maxIter</code></td>
<td>
<p>Maximum number of iterations for the Expectation-Maximization
algorithm of the ML estimation.  The default is 1000.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function allows the user to perform regression analysis on survey data
with the item count technique, also known as the list experiment, using
predicted responses from list experiments as predictors in outcome
regression models.
</p>


<h3>Value</h3>

<p><code>ictreg.joint</code> returns an object of class &quot;ictreg.joint&quot;. The
function <code>summary</code> is used to obtain a table of the results. The object
<code>ictreg.joint</code> is a list that contains the following components.
</p>
<table role = "presentation">
<tr><td><code>par.treat</code></td>
<td>
<p>point estimate for effect of covariate on item count fitted
on treatment group</p>
</td></tr> <tr><td><code>se.treat</code></td>
<td>
<p>standard error for estimate of effect of
covariate on item count fitted on treatment group</p>
</td></tr> <tr><td><code>par.control</code></td>
<td>
<p>point
estimate for effect of covariate on item count fitted on control group</p>
</td></tr>
<tr><td><code>se.control</code></td>
<td>
<p>standard error for estimate of effect of covariate on item
count fitted on control group</p>
</td></tr> <tr><td><code>par.outcome</code></td>
<td>
<p>point estimate for effect
of covariate and sensitive item on outcome</p>
</td></tr> <tr><td><code>se.outcome</code></td>
<td>
<p>standard error
for estimate of effect of covariate and sensitive item on outcome</p>
</td></tr>
<tr><td><code>coef.names</code></td>
<td>
<p>variable names as defined in the data frame</p>
</td></tr>
<tr><td><code>constrained</code></td>
<td>
<p>call indicating whether the constrained model is used</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>the matched call</p>
</td></tr> <tr><td><code>data</code></td>
<td>
<p>the <code>data</code> argument</p>
</td></tr>
<tr><td><code>outcome.reg</code></td>
<td>
<p>the <code>outcome.reg</code> argument</p>
</td></tr> <tr><td><code>x</code></td>
<td>
<p>the design
matrix</p>
</td></tr> <tr><td><code>y</code></td>
<td>
<p>the response vector</p>
</td></tr> <tr><td><code>treat</code></td>
<td>
<p>the vector indicating
treatment status</p>
</td></tr> <tr><td><code>J</code></td>
<td>
<p>Number of non-sensitive (control) survey items
set by the user or detected.</p>
</td></tr> <tr><td><code>treat.labels</code></td>
<td>
<p>a vector of the names used
by the <code>treat</code> vector for the sensitive item or items. This is the
names from the <code>treat</code> indicator if it is a factor, or the number of
the item if it is numeric.</p>
</td></tr> <tr><td><code>control.label</code></td>
<td>
<p>a vector of the names used
by the <code>treat</code> vector for the control items. This is the names from the
<code>treat</code> indicator if it is a factor, or the number of the item if it is
numeric.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Imai, Kosuke, Bethany Park, and Kenneth F. Greene. (2014)
&ldquo;Using the Predicted Responses from List Experiments as Explanatory
Variables in Regression Models.&rdquo; available at
<a href="http://imai.princeton.edu/research/files/listExp.pdf">http://imai.princeton.edu/research/files/listExp.pdf</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
data(mexico)
loyal &lt;- mexico[mexico$mex.loyal == 1,]
notloyal &lt;- mexico[mexico$mex.loyal == 0,]

## Logistic outcome regression
## (effect of vote-selling on turnout)
## This replicates Table 4 in Imai et al. 2014

loyalreg &lt;- ictreg.joint(formula = mex.y.all ~ mex.male + mex.age + mex.age2 + mex.education +  
                         mex.interest + mex.married +
                         mex.wealth + mex.urban + mex.havepropoganda + mex.concurrent, data = loyal,
                         treat = "mex.t", outcome = "mex.votecard", J = 3, constrained = TRUE,
                         outcome.reg = "logistic", maxIter = 1000)
summary(loyalreg)

## Linear outcome regression
## (effect of vote-selling on candidate approval)
## This replicates Table 5 in Imai et al. 2014

approvalreg &lt;- ictreg.joint(formula = mex.y.all ~ mex.male + mex.age + mex.age2 +
                            mex.education +
                            mex.interest + mex.married +
                            mex.urban + 
                            mex.cleanelections + mex.cleanelectionsmiss +
                            mex.havepropoganda +
                            mex.wealth + mex.northregion +
                            mex.centralregion + mex.metro + mex.pidpriw2 + 
			    mex.pidpanw2 + mex.pidprdw2,
                            data = mexico, treat = "mex.t", outcome = "mex.epnapprove",
                            J = 3, constrained = TRUE,
                            outcome.reg = "linear", maxIter = 1000)


summary(approvalreg)

## End(Not run)

</code></pre>

<hr>
<h2 id='ictregBayes'>Item Count Technique</h2><span id='topic+ictregBayes'></span>

<h3>Description</h3>

<p>Function to conduct multivariate regression analyses of survey data with the
item count technique, also known as the list experiment and the unmatched
count technique.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ictregBayes(
  formula,
  data = parent.frame(),
  treat = "treat",
  J,
  constrained.single = "full",
  constrained.multi = TRUE,
  fit.start = "lm",
  n.draws = 10000,
  burnin = 5000,
  thin = 0,
  delta.start,
  psi.start,
  Sigma.start,
  Phi.start,
  delta.mu0,
  psi.mu0,
  delta.A0,
  psi.A0,
  Sigma.df,
  Sigma.scale,
  Phi.df,
  Phi.scale,
  delta.tune,
  psi.tune,
  gamma.tune,
  zeta.tune,
  formula.mixed,
  group.mixed,
  verbose = TRUE,
  sensitive.model = "logit",
  df = 5,
  endorse.options,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ictregBayes_+3A_formula">formula</code></td>
<td>
<p>An object of class &quot;formula&quot;: a symbolic description of the
model to be fitted.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_data">data</code></td>
<td>
<p>A data frame containing the variables in the model</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_treat">treat</code></td>
<td>
<p>Name of treatment indicator as a string. For single sensitive
item models, this refers to a binary indicator, and for multiple sensitive
item models it refers to a multi-valued variable with zero representing the
control condition. This can be an integer (with 0 for the control group) or
a factor (with &quot;control&quot; for the control group).</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_j">J</code></td>
<td>
<p>Number of non-sensitive (control) survey items. This will be set
automatically to the maximum value of the outcome variable in the treatment
group if no input is sent by the user.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_constrained.single">constrained.single</code></td>
<td>
<p>A string indicating whether the control group
parameters are constrained to be equal in the single sensitive item design,
either setting all parameters to be equal (<code>full</code>) or only the
intercept (<code>intercept</code>). If neither, set to <code>none</code>.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_constrained.multi">constrained.multi</code></td>
<td>
<p>A logical value indicating whether the
non-sensitive item count is included as a predictor in the sensitive item
fits for the multiple sensitive item design.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_fit.start">fit.start</code></td>
<td>
<p>Fit method for starting values. The options are <code>lm</code>,
<code>glm</code>, <code>nls</code>, and <code>ml</code>, which use OLS, logistic regression,
non-linear least squares, and maximum likelihood estimation to generate
starting values, respectively. The default is <code>lm</code>.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_n.draws">n.draws</code></td>
<td>
<p>Number of MCMC iterations after the burnin.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_burnin">burnin</code></td>
<td>
<p>The number of initial MCMC iterations that are discarded.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_thin">thin</code></td>
<td>
<p>The interval of thinning, in which every other (<code>thin</code> = 1)
or more iterations are discarded in the output object</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_delta.start">delta.start</code></td>
<td>
<p>Optional starting values for the sensitive item fit. This
should be a vector with the length of the number of covariates for the
single sensitive item design, and either a vector or a list with a vector of
starting values for each of the sensitive items. The default runs an
<code>ictreg</code> fit with the method set by the <code>fit.start</code> option.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_psi.start">psi.start</code></td>
<td>
<p>Optional starting values for the control items fit. This
should be a vector of length the number of covariates for the constrained
models. The default runs an <code>ictreg</code> fit with the method set by the
<code>fit.start</code> option.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_sigma.start">Sigma.start</code></td>
<td>
<p>Optional starting values for Sigma parameter for mixed
effects models for sensitive item.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_phi.start">Phi.start</code></td>
<td>
<p>Optional starting values for the Phi parameter for mixed
effects models for control item.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_delta.mu0">delta.mu0</code></td>
<td>
<p>Optional vector of prior means for the sensitive item fit
parameters, a vector of length the number of covariates.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_psi.mu0">psi.mu0</code></td>
<td>
<p>Optional vector of prior means for the control item fit
parameters, a vector of length the number of covariates.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_delta.a0">delta.A0</code></td>
<td>
<p>Optional matrix of prior precisions for the sensitive item
fit parameters, a matrix of dimension the number of covariates.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_psi.a0">psi.A0</code></td>
<td>
<p>Optional matrix of prior precisions for the control items fit
parameters, a matrix of dimension the number of covariates.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_sigma.df">Sigma.df</code></td>
<td>
<p>Optional prior degrees of freedom parameter for mixed
effects models for sensitive item.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_sigma.scale">Sigma.scale</code></td>
<td>
<p>Optional prior scale parameter for mixed effects models
for sensitive item.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_phi.df">Phi.df</code></td>
<td>
<p>Optional prior degress of freedom parameter for mixed effects
models for control item.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_phi.scale">Phi.scale</code></td>
<td>
<p>Optional prior scale parameter for mixed effects models for
control item.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_delta.tune">delta.tune</code></td>
<td>
<p>A required vector of tuning parameters for the Metropolis
algorithm for the sensitive item fit. This must be set and refined by the
user until the acceptance ratios are approximately .4 (reported in the
output).</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_psi.tune">psi.tune</code></td>
<td>
<p>A required vector of tuning parameters for the Metropolis
algorithm for the control item fit. This must be set and refined by the user
until the acceptance ratios are approximately .4 (reported in the output).</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_gamma.tune">gamma.tune</code></td>
<td>
<p>An optional vector of tuning parameters for the Metropolis
algorithm for the control item fit for the random effects. This can be set
and refined by the user until the acceptance ratios are approximately .4
(reported in the output).</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_zeta.tune">zeta.tune</code></td>
<td>
<p>An optional vector of tuning parameters for the Metropolis
algorithm for the sensitive item fit for the random effects. This can be set
and refined by the user until the acceptance ratios are approximately .4
(reported in the output).</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_formula.mixed">formula.mixed</code></td>
<td>
<p>To specify a mixed effects model, include this formula
object for the group-level fit. ~1 allows intercepts to vary, and including
covariates in the formula allows the slopes to vary also.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_group.mixed">group.mixed</code></td>
<td>
<p>A numerical group indicator specifying which group each
individual belongs to for a mixed effects model.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_verbose">verbose</code></td>
<td>
<p>A logical value indicating whether model diagnostics are
printed out during fitting.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_sensitive.model">sensitive.model</code></td>
<td>
<p>A logical value indicating which model is used for
the sensitive item fit, logistic regression (<code>logit</code>, default), robit
regression (<code>robit</code>), or probit regression (<code>probit</code>).</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_df">df</code></td>
<td>
<p>Degrees of freedom for the robit model for the sensitive item fit,
only used if <code>robit</code> is set to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_endorse.options">endorse.options</code></td>
<td>
<p>A list of inputs and options for running the combined
list experiment and endorsement experiment model. Options documented more
fully in <code>endorse</code> package.</p>
</td></tr>
<tr><td><code id="ictregBayes_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to NLS regression commands.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function allows the user to perform regression analysis on data from
the item count technique, also known as the list experiment and the
unmatched count technique using a Bayesian MCMC algorithm.
</p>
<p>Unlike the maximum likelihood and least squares estimators in the
<code>ictreg</code> function, the Metropolis algorithm for the Bayesian MCMC
estimators in this function must be tuned to work correctly. The
<code>delta.tune</code> and <code>psi.tune</code> are required, and the values, one for
each estimated parameter, will need to be manipulated. The output of the
<code>ictregBayes</code> function, and of the <code>summary</code> function run on an
<code>ictregBayes</code> object display the acceptance ratios from the Metropolis
algorithm. If these values are far from 0.4, the tuning parameters should be
changed until the ratios approach 0.4.
</p>
<p>For the single sensitive item design, the model can constrain all control
parameters to be equal (<code>constrained = "full"</code>), or just the intercept
(<code>constrained = "intercept"</code>) or all the control fit parameters can be
allowed to vary across the potential sensitive item values
(<code>constrained = "none"</code>).
</p>
<p>For the multiple sensitive item design, the model can include the estimated
number of affirmative responses to the control items as a covariate in the
sensitive item model fit (<code>constrained</code> set to <code>TRUE</code>) or exclude
it (<code>FALSE</code>).
</p>
<p>The function also allows the user to perform combined list experiment and
endorsement experiment regression. Setting <code>endorse.options</code> to a list
with the options from the <code>endorse</code> package for endorsement experiment
regression, the function will return the combined model in which the
relationship between covariates and the sensitive item in the list
experiment model is set to be identical to the relationship between
covariates and support for endorsers in the endorsement experiment model.
For more details on endorsement experiment regression, see the help for the
<code>endorse</code> package.
</p>
<p>Convergence is at times difficult to achieve, so we recommend running
multiple chains from overdispersed starting values by, for example, running
an MLE or linear model using the ictreg() function, and then generating a
set of overdispersed starting values using those estimates and their
estimated variance-covariance matrix. An example is provided below for each
of the possible designs. Running <code>summary()</code> after such a procedure
will output the Gelman-Rubin convergence statistics in addition to the
estimates. If the G-R statistics are all below 1.1, the model is said to
have converged.
</p>


<h3>Value</h3>

<p><code>ictregBayes</code> returns an object of class &quot;ictregBayes&quot;.  The
function <code>summary</code> is used to obtain a table of the results, using the
<code>coda</code> package. Two attributes are also included, the data (&quot;x&quot;), the
call (&quot;call&quot;), which can be extracted using the command, e.g.,
attr(ictregBayes.object, &quot;x&quot;).
</p>
<table role = "presentation">
<tr><td><code>mcmc</code></td>
<td>
<p>an object of class &quot;mcmc&quot; that can be analyzed using the
<code>coda</code> package.</p>
</td></tr> <tr><td><code>x</code></td>
<td>
<p>the design matrix</p>
</td></tr> <tr><td><code>multi</code></td>
<td>
<p>a logical
value indicating whether the data included multiple sensitive items.</p>
</td></tr>
<tr><td><code>constrained</code></td>
<td>
<p>a logical or character value indicating whether the
control group parameters are constrained to be equal in the single sensitive
item design, and whether the non-sensitive item count is included as a
predictor in the sensitive item fits for the multiple sensitive item
design.</p>
</td></tr> <tr><td><code>delta.start</code></td>
<td>
<p>Optional starting values for the sensitive item
fit. This should be a vector with the length of the number of covariates.
The default runs an <code>ictreg</code> fit with the method set by the
<code>fit.start</code> option.</p>
</td></tr> <tr><td><code>psi.start</code></td>
<td>
<p>Optional starting values for the
control items fit. This should be a vector of length the number of
covariates. The default runs an <code>ictreg</code> fit with the method set by the
<code>fit.start</code> option.</p>
</td></tr> <tr><td><code>delta.mu0</code></td>
<td>
<p>Optional vector of prior means
for the sensitive item fit parameters, a vector of length the number of
covariates.</p>
</td></tr> <tr><td><code>psi.mu0</code></td>
<td>
<p>Optional vector of prior means for the control
item fit parameters, a vector of length the number of covariates.</p>
</td></tr>
<tr><td><code>delta.A0</code></td>
<td>
<p>Optional matrix of prior precisions for the sensitive item
fit parameters, a matrix of dimension the number of covariates.</p>
</td></tr>
<tr><td><code>psi.A0</code></td>
<td>
<p>Optional matrix of prior precisions for the control items fit
parameters, a matrix of dimension the number of covariates.</p>
</td></tr>
<tr><td><code>delta.tune</code></td>
<td>
<p>A required vector of tuning parameters for the Metropolis
algorithm for the sensitive item fit. This must be set and refined by the
user until the acceptance ratios are approximately .4 (reported in the
output).</p>
</td></tr> <tr><td><code>psi.tune</code></td>
<td>
<p>A required vector of tuning parameters for the
Metropolis algorithm for the control item fit. This must be set and refined
by the user until the acceptance ratios are approximately .4 (reported in
the output).</p>
</td></tr> <tr><td><code>J</code></td>
<td>
<p>Number of non-sensitive (control) survey items set by
the user or detected.</p>
</td></tr> <tr><td><code>treat.labels</code></td>
<td>
<p>a vector of the names used by the
<code>treat</code> vector for the sensitive item or items. This is the names from
the <code>treat</code> indicator if it is a factor, or the number of the item if
it is numeric.</p>
</td></tr> <tr><td><code>control.label</code></td>
<td>
<p>a vector of the names used by the
<code>treat</code> vector for the control items. This is the names from the
<code>treat</code> indicator if it is a factor, or the number of the item if it is
numeric.</p>
</td></tr> <tr><td><code>call</code></td>
<td>
<p>the matched call</p>
</td></tr>
</table>
<p>If the data includes multiple sensitive items, the following object is also
included: </p>
<table role = "presentation">
<tr><td><code>treat.values</code></td>
<td>
<p>a vector of the values used in the
<code>treat</code> vector for the sensitive items, either character or numeric
depending on the class of <code>treat</code>. Does not include the value for the
control status</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Graeme Blair, UCLA, <a href="mailto:graeme.blair@ucla.edu">graeme.blair@ucla.edu</a>
and Kosuke Imai, Princeton University, <a href="mailto:kimai@princeton.edu">kimai@princeton.edu</a>
</p>


<h3>References</h3>

<p>Blair, Graeme and Kosuke Imai. (2012) &ldquo;Statistical Analysis of
List Experiments.&quot;  Political Analysis, Vol. 20, No 1 (Winter). available at
<a href="http://imai.princeton.edu/research/listP.html">http://imai.princeton.edu/research/listP.html</a>
</p>
<p>Imai, Kosuke. (2011) &ldquo;Multivariate Regression Analysis for the Item Count
Technique.&rdquo; Journal of the American Statistical Association, Vol. 106, No.
494 (June), pp. 407-416. available at
<a href="http://imai.princeton.edu/research/list.html">http://imai.princeton.edu/research/list.html</a>
</p>
<p>Blair, Graeme, Jason Lyall and Kosuke Imai. (2013) &ldquo;Comparing and Combining
List and Experiments: Evidence from Afghanistan.&quot;  Working paper. available
at <a href="http://imai.princeton.edu/research/comp.html">http://imai.princeton.edu/research/comp.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+predict.ictreg">predict.ictreg</a></code> for fitted values
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

data(race)

## Not run: 

## Multiple chain MCMC list experiment regression
## starts with overdispersed MLE starting values

## Standard single sensitive-item design

## Control item parameters fully constrained

mle.estimates &lt;- ictreg(y ~ male + college + age + south, data = race)

draws &lt;- mvrnorm(n = 3, mu = coef(mle.estimates), 
  Sigma = vcov(mle.estimates) * 9)

bayesDraws.1 &lt;- ictregBayes(y ~ male + college + age + south, data = race, 
  delta.start = draws[1, 1:5], psi.start = draws[1, 6:10], burnin = 10000, 
  n.draws = 100000, delta.tune = diag(.002, 5), psi.tune = diag(.00025, 5),
  constrained.single = "full")

bayesDraws.2 &lt;- ictregBayes(y ~ male + college + age + south, data = race, 
  delta.start = draws[2, 1:5], psi.start = draws[2, 6:10], burnin = 10000, 
  n.draws = 100000, delta.tune = diag(.002, 5), psi.tune = diag(.00025, 5),
  constrained.single = "full")

bayesDraws.3 &lt;- ictregBayes(y ~ male + college + age + south, data = race, 
  delta.start = draws[3, 1:5], psi.start = draws[3, 6:10], burnin = 10000, 
  n.draws = 100000, delta.tune = diag(.002, 5), psi.tune = diag(.00025, 5),
  constrained.single = "full")

bayesSingleConstrained &lt;- as.list(bayesDraws.1, bayesDraws.2, bayesDraws.3)

summary(bayesSingleConstrained)

## Control item parameters unconstrained

mle.estimates &lt;- ictreg(y ~ male + college + age + south, data = race,
  constrained = FALSE)

draws &lt;- mvrnorm(n = 3, mu = coef(mle.estimates), 
  Sigma = vcov(mle.estimates) * 9)

bayesDraws.1 &lt;- ictregBayes(y ~ male + college + age + south, data = race, 
  delta.start = draws[1, 1:5], psi.start = list(psi0 = draws[1, 6:10], 
  psi1 = draws[1, 11:15]), burnin = 10000, n.draws = 100000, 
  delta.tune = diag(.002, 5), 
  psi.tune = list(psi0 = diag(.0017, 5), psi1 = diag(.00005, 5)),
  constrained.single = "none")

bayesDraws.2 &lt;- ictregBayes(y ~ male + college + age + south, data = race, 
  delta.start = draws[2, 1:5], psi.start = list(psi0 = draws[2, 6:10], 
  psi1 = draws[2, 11:15]), burnin = 10000, n.draws = 100000, 
  delta.tune = diag(.002, 5), 
  psi.tune = list(psi0 = diag(.0017, 5), psi1 = diag(.00005, 5)),
  constrained.single = "none")

bayesDraws.3 &lt;- ictregBayes(y ~ male + college + age + south, data = race, 
  delta.start = draws[3, 1:5], psi.start = list(psi0 = draws[3, 6:10], 
  psi1 = draws[3, 11:15]), burnin = 10000, n.draws = 100000, 
  delta.tune = diag(.002, 5), 
  psi.tune = list(psi0 = diag(.0017, 5), psi1 = diag(.00005, 5)),
  constrained.single = "none")

bayesSingleUnconstrained &lt;- as.list(bayesDraws.1, bayesDraws.2, bayesDraws.3)

summary(bayesSingleUnconstrained)

## Control item parameters constrained except intercept

mle.estimates &lt;- ictreg(y ~ male + college + age + south, data = race,
  constrained = TRUE)

draws &lt;- mvrnorm(n = 3, mu = coef(mle.estimates), 
  Sigma = vcov(mle.estimates) * 9)

bayesDraws.1 &lt;-  ictregBayes(y ~ male + college + age + south, data = race, 
  delta.start = draws[1, 1:5], psi.start = c(draws[1, 6:10],0),
  burnin = 10000, n.draws = 100000, delta.tune = diag(.002, 5),
  psi.tune = diag(.0004, 6), constrained.single = "intercept")

bayesDraws.2 &lt;-  ictregBayes(y ~ male + college + age + south, data = race, 
  delta.start = draws[2, 1:5], psi.start = c(draws[2, 6:10],0),
  burnin = 10000, n.draws = 100000, delta.tune = diag(.002, 5),
  psi.tune = diag(.0004, 6), constrained.single = "intercept")

bayesDraws.3 &lt;-  ictregBayes(y ~ male + college + age + south, data = race, 
  delta.start = draws[3, 1:5], psi.start = c(draws[3, 6:10],0),
  burnin = 10000, n.draws = 100000, delta.tune = diag(.002, 5),
  psi.tune = diag(.0004, 6), constrained.single = "intercept")

bayesSingleInterceptOnly &lt;- as.list(bayesDraws.1, bayesDraws.2, bayesDraws.3)

summary(bayesSingleInterceptOnly)

## Multiple sensitive item design

## Constrained (estimated control item count not included in sensitive fit)

mle.estimates.multi &lt;- ictreg(y ~ male + college + age + south, data = multi,
  constrained = TRUE)

draws &lt;- mvrnorm(n = 3, mu = coef(mle.estimates.multi), 
  Sigma = vcov(mle.estimates.multi) * 9)

bayesMultiDraws.1 &lt;- ictregBayes(y ~ male + college + age + south, 
  data = multi, delta.start = list(draws[1, 6:10], draws[1, 11:15]), 
  psi.start = draws[1, 1:5], burnin = 10000, n.draws = 100000, 
  delta.tune = diag(.002, 5), psi.tune = diag(.001, 5), 
  constrained.multi = TRUE)

bayesMultiDraws.2 &lt;- ictregBayes(y ~ male + college + age + south, 
  data = multi, delta.start = list(draws[2, 6:10], draws[2, 11:15]), 
  psi.start = draws[2, 1:5], burnin = 10000, n.draws = 100000, 
  delta.tune = diag(.002, 5), psi.tune = diag(.001, 5), 
  constrained.multi = TRUE)

bayesMultiDraws.3 &lt;- ictregBayes(y ~ male + college + age + south, 
  data = multi, delta.start = list(draws[3, 6:10], draws[3, 11:15]), 
  psi.start = draws[3, 1:5], burnin = 10000, n.draws = 100000, 
  delta.tune = diag(.002, 5), psi.tune = diag(.001, 5), 
  constrained.multi = TRUE)

bayesMultiConstrained &lt;- as.list(bayesMultiDraws.1, bayesMultiDraws.2, 
  bayesMultiDraws.3)

summary(bayesMultiConstrained)

## Unconstrained (estimated control item count is included in sensitive fit)

mle.estimates.multi &lt;- ictreg(y ~ male + college + age + south, data = multi,
  constrained = FALSE)

draws &lt;- mvrnorm(n = 3, mu = coef(mle.estimates.multi), 
  Sigma = vcov(mle.estimates.multi) * 9)

bayesMultiDraws.1 &lt;- ictregBayes(y ~ male + college + age + south, 
  data = multi, delta.start = list(draws[1, 6:10], draws[1, 11:15]), 
  psi.start = draws[1, 1:5], burnin = 50000, n.draws = 300000, 
  delta.tune = diag(.0085, 6), psi.tune = diag(.00025, 5), 
  constrained.multi = FALSE)

bayesMultiDraws.2 &lt;- ictregBayes(y ~ male + college + age + south, 
  data = multi, delta.start = list(draws[2, 6:10], draws[2, 11:15]), 
  psi.start = draws[2, 1:5], burnin = 50000, n.draws = 300000, 
  delta.tune = diag(.0085, 6), psi.tune = diag(.00025, 5), 
  constrained.multi = FALSE)

bayesMultiDraws.3 &lt;- ictregBayes(y ~ male + college + age + south, 
  data = multi, delta.start = list(draws[3, 6:10], draws[3, 11:15]), 
  psi.start = draws[3, 1:5], burnin = 50000, n.draws = 300000, 
  delta.tune = diag(.0085, 6), psi.tune = diag(.00025, 5), 
  constrained.multi = FALSE)

bayesMultiUnconstrained &lt;- as.list(bayesMultiDraws.1, bayesMultiDraws.2, 
  bayesMultiDraws.3)

summary(bayesMultiUnconstrained)

## Mixed effects models

## Varying intercepts

mle.estimates &lt;- ictreg(y ~ male + college + age + south, data = race)

draws &lt;- mvrnorm(n = 3, mu = coef(mle.estimates), 
  Sigma = vcov(mle.estimates) * 9)

bayesDraws.1 &lt;- ictregBayes(y ~ male + college + age + south, data = race, 
  delta.start = draws[1, 1:5], psi.start = draws[1, 6:10], burnin = 100, 
  n.draws = 1000, delta.tune = diag(.002, 5), psi.tune = diag(.00025, 5),
  constrained.single = "full", group.mixed = "state", formula.mixed = ~ 1)

bayesDraws.2 &lt;- ictregBayes(y ~ male + college + age + south, data = race, 
  delta.start = draws[2, 1:5], psi.start = draws[2, 6:10], burnin = 10000, 
  n.draws = 100000, delta.tune = diag(.002, 5), psi.tune = diag(.00025, 5),
  constrained.single = "full", group.mixed = "state", formula.mixed = ~ 1)

bayesDraws.3 &lt;- ictregBayes(y ~ male + college + age + south, data = race, 
  delta.start = draws[3, 1:5], psi.start = draws[3, 6:10], burnin = 10000, 
  n.draws = 100000, delta.tune = diag(.002, 5), psi.tune = diag(.00025, 5),
  constrained.single = "full", group.mixed = "state", formula.mixed = ~ 1)

bayesMixed &lt;- as.list(bayesDraws.1, bayesDraws.2, bayesDraws.3)

summary(bayesMixed)


## End(Not run)

</code></pre>

<hr>
<h2 id='ictregBayesHier'>Item Count Technique</h2><span id='topic+ictregBayesHier'></span>

<h3>Description</h3>

<p>Function to conduct multilevel, multivariate regression analyses of survey
data with the item count technique, also known as the list experiment and
the unmatched count technique.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ictregBayesHier(
  formula,
  data = parent.frame(),
  group.level.2,
  group.level.3,
  group.level.4,
  formula.level.2,
  formula.level.3,
  formula.level.4,
  treat = "treat",
  J,
  fit.start = "lm",
  n.draws = 10000,
  burnin = 5000,
  thin = 0,
  delta.start.level.1,
  delta.mu0.level.1,
  delta.A0.level.1,
  delta.start.level.2,
  delta.mu0.level.2,
  delta.A0.level.2,
  delta.start.level.3,
  delta.mu0.level.3,
  delta.A0.level.3,
  delta.start.level.4,
  delta.mu0.level.4,
  delta.A0.level.4,
  sigma.start.level.1,
  sigma.df.level.1,
  sigma.scale.level.1,
  sigma.start.level.2,
  sigma.df.level.2,
  sigma.scale.level.2,
  sigma.start.level.3,
  sigma.df.level.3,
  sigma.scale.level.3,
  sigma.start.level.4,
  sigma.df.level.4,
  sigma.scale.level.4,
  delta.tune,
  alpha.tune,
  verbose = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ictregBayesHier_+3A_formula">formula</code></td>
<td>
<p>An object of class &quot;formula&quot;: a symbolic description of the
model to be fitted.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_data">data</code></td>
<td>
<p>A data frame containing the variables in the model</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_group.level.2">group.level.2</code></td>
<td>
<p>Name of second level group variable from the data frame
indicating which group each individual belongs to as a string</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_group.level.3">group.level.3</code></td>
<td>
<p>Name of third level group variable from the data frame
indicating which group each individual belongs to as a string</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_group.level.4">group.level.4</code></td>
<td>
<p>Name of fourth level group variable from the data frame
indicating which group each individual belongs to as a string</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_formula.level.2">formula.level.2</code></td>
<td>
<p>An object of class &quot;formula&quot; for the second level of
the hierarchical model</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_formula.level.3">formula.level.3</code></td>
<td>
<p>An object of class &quot;formula&quot; for the third level of
the hierarchical model</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_formula.level.4">formula.level.4</code></td>
<td>
<p>An object of class &quot;formula&quot; for the fourth level of
the hierarchical model</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_treat">treat</code></td>
<td>
<p>Name of treatment indicator as a string. For single sensitive
item models, this refers to a binary indicator, and for multiple sensitive
item models it refers to a multi-valued variable with zero representing the
control condition. This can be an integer (with 0 for the control group) or
a factor (with &quot;control&quot; for the control group).</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_j">J</code></td>
<td>
<p>Number of non-sensitive (control) survey items. This will be set
automatically to the maximum value of the outcome variable in the treatment
group if no input is sent by the user.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_fit.start">fit.start</code></td>
<td>
<p>Fit method for starting values. The options are <code>lm</code>,
<code>glm</code>, <code>nls</code>, and <code>ml</code>, which use OLS, logistic regression,
non-linear least squares, and maximum likelihood estimation to generate
starting values, respectively. The default is <code>lm</code>.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_n.draws">n.draws</code></td>
<td>
<p>Number of MCMC iterations after the burnin.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_burnin">burnin</code></td>
<td>
<p>The number of initial MCMC iterations that are discarded.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_thin">thin</code></td>
<td>
<p>The interval of thinning, in which every other (<code>thin</code> = 1)
or more iterations are discarded in the output object</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_delta.start.level.1">delta.start.level.1</code></td>
<td>
<p>Optional starting values for the sensitive item
fit. This should be a vector with the length of the number of covariates for
the single sensitive item design, and either a vector or a list with a
vector of starting values for each of the sensitive items. The default runs
an <code>ictreg</code> fit with the method set by the <code>fit.start</code> option.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_delta.mu0.level.1">delta.mu0.level.1</code></td>
<td>
<p>Optional vector of prior means for the sensitive
item fit parameters, a vector of length the number of covariates.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_delta.a0.level.1">delta.A0.level.1</code></td>
<td>
<p>Optional matrix of prior precisions for the
sensitive item fit parameters, a matrix of dimension the number of
covariates.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_delta.start.level.2">delta.start.level.2</code></td>
<td>
<p>Optional starting values for the sensitive item
fit for the second level of the hierarchical model. This should be a vector
with the length of the number of covariates for the single sensitive item
design, and either a vector or a list with a vector of starting values for
each of the sensitive items. The default runs an <code>ictreg</code> fit with the
method set by the <code>fit.start</code> option.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_delta.mu0.level.2">delta.mu0.level.2</code></td>
<td>
<p>Optional vector of prior means for the sensitive
item fit parameters for the second level of the hierarchical model, a vector
of length the number of covariates.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_delta.a0.level.2">delta.A0.level.2</code></td>
<td>
<p>Optional matrix of prior precisions for the
sensitive item fit parameters for the second level of the hierarchical
model, a matrix of dimension the number of covariates.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_delta.start.level.3">delta.start.level.3</code></td>
<td>
<p>Optional starting values for the sensitive item
fit for the third level of the hierarchical model. This should be a vector
with the length of the number of covariates for the single sensitive item
design, and either a vector or a list with a vector of starting values for
each of the sensitive items. The default runs an <code>ictreg</code> fit with the
method set by the <code>fit.start</code> option.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_delta.mu0.level.3">delta.mu0.level.3</code></td>
<td>
<p>Optional vector of prior means for the sensitive
item fit parameters for the third level of the hierarchical model, a vector
of length the number of covariates.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_delta.a0.level.3">delta.A0.level.3</code></td>
<td>
<p>Optional matrix of prior precisions for the
sensitive item fit parameters for the third level of the hierarchical model,
a matrix of dimension the number of covariates.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_delta.start.level.4">delta.start.level.4</code></td>
<td>
<p>Optional starting values for the sensitive item
fit for the fourth level of the hierarchical model. This should be a vector
with the length of the number of covariates for the single sensitive item
design, and either a vector or a list with a vector of starting values for
each of the sensitive items. The default runs an <code>ictreg</code> fit with the
method set by the <code>fit.start</code> option.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_delta.mu0.level.4">delta.mu0.level.4</code></td>
<td>
<p>Optional vector of prior means for the sensitive
item fit parameters for the fourth level of the hierarchical model, a vector
of length the number of covariates.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_delta.a0.level.4">delta.A0.level.4</code></td>
<td>
<p>Optional matrix of prior precisions for the
sensitive item fit parameters for the fourth level of the hierarchical
model, a matrix of dimension the number of covariates.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_sigma.start.level.1">sigma.start.level.1</code></td>
<td>
<p>Optional list of length the number of sensitive
items with the starting values for the sigma parameters.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_sigma.df.level.1">sigma.df.level.1</code></td>
<td>
<p>Optional prior degrees of freedom parameter.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_sigma.scale.level.1">sigma.scale.level.1</code></td>
<td>
<p>Optional prior scale parameter.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_sigma.start.level.2">sigma.start.level.2</code></td>
<td>
<p>Optional list of length the number of sensitive
items with the starting values for the sigma parameters for the second level
of the hierarchical model.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_sigma.df.level.2">sigma.df.level.2</code></td>
<td>
<p>Optional prior degrees of freedom parameter for the
second level of the hierarchical model.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_sigma.scale.level.2">sigma.scale.level.2</code></td>
<td>
<p>Optional prior scale parameter for the second
level of the hierarchical model.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_sigma.start.level.3">sigma.start.level.3</code></td>
<td>
<p>Optional list of length the number of sensitive
items with the starting values for the sigma parameters for the third level
of the hierarchical model.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_sigma.df.level.3">sigma.df.level.3</code></td>
<td>
<p>Optional prior degrees of freedom parameter for the
third level of the hierarchical model.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_sigma.scale.level.3">sigma.scale.level.3</code></td>
<td>
<p>Optional prior scale parameter for the third
level of the hierarchical model.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_sigma.start.level.4">sigma.start.level.4</code></td>
<td>
<p>Optional list of length the number of sensitive
items with the starting values for the sigma parameters for the fourth level
of the hierarchical model.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_sigma.df.level.4">sigma.df.level.4</code></td>
<td>
<p>Optional prior degrees of freedom parameter for the
fourth level of the hierarchical model.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_sigma.scale.level.4">sigma.scale.level.4</code></td>
<td>
<p>Optional prior scale parameter for the fourth
level of the hierarchical model.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_delta.tune">delta.tune</code></td>
<td>
<p>A required vector of tuning parameters for the Metropolis
algorithm for the sensitive item fit. This must be set and refined by the
user until the acceptance ratios are approximately .4 (reported in the
output).</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_alpha.tune">alpha.tune</code></td>
<td>
<p>An optional vector of tuning parameters for the Metropolis
algorithm for the random effects.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_verbose">verbose</code></td>
<td>
<p>A logical value indicating whether model diagnostics are
printed out during fitting.</p>
</td></tr>
<tr><td><code id="ictregBayesHier_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to NLS regression commands.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function allows the user to perform regression analysis on data from
the item count technique, also known as the list experiment and the
unmatched count technique using a Bayesian MCMC algorithm.
</p>
<p>Unlike the maximum likelihood and least squares estimators in the
<code>ictreg</code> function, the Metropolis algorithm for the Bayesian MCMC
estimators in this function must be tuned to work correctly. The
<code>delta.tune</code> and <code>psi.tune</code> are required, and the values, one for
each estimated parameter, will need to be manipulated. The output of the
<code>ictregBayes</code> function, and of the <code>summary</code> function run on an
<code>ictregBayes</code> object display the acceptance ratios from the Metropolis
algorithm. If these values are far from 0.4, the tuning parameters should be
changed until the ratios approach 0.4.
</p>
<p>For the single sensitive item design, the model can constrain all control
parameters to be equal (<code>constrained = "full"</code>), or just the intercept
(<code>constrained = "intercept"</code>) or all the control fit parameters can be
allowed to vary across the potential sensitive item values
(<code>constrained = "none"</code>).
</p>
<p>For the multiple sensitive item design, the model can include the estimated
number of affirmative responses to the control items as a covariate in the
sensitive item model fit (<code>constrained</code> set to <code>TRUE</code>) or exclude
it (<code>FALSE</code>).
</p>
<p>Convergence is at times difficult to achieve, so we recommend running
multiple chains from overdispersed starting values by, for example, running
an MLE or linear model using the ictreg() function, and then generating a
set of overdispersed starting values using those estimates and their
estimated variance-covariance matrix. An example is provided below for each
of the possible designs. Running <code>summary()</code> after such a procedure
will output the Gelman-Rubin convergence statistics in addition to the
estimates. If the G-R statistics are all below 1.1, the model is said to
have converged.
</p>


<h3>Value</h3>

<p><code>ictregBayes</code> returns an object of class &quot;ictregBayes&quot;.  The
function <code>summary</code> is used to obtain a table of the results, using the
<code>coda</code> package. Two attributes are also included, the data (&quot;x&quot;), the
call (&quot;call&quot;), which can be extracted using the command, e.g.,
attr(ictregBayes.object, &quot;x&quot;).
</p>
<table role = "presentation">
<tr><td><code>mcmc</code></td>
<td>
<p>an object of class &quot;mcmc&quot; that can be analyzed using the
<code>coda</code> package.</p>
</td></tr> <tr><td><code>x</code></td>
<td>
<p>the design matrix</p>
</td></tr> <tr><td><code>multi</code></td>
<td>
<p>a logical
value indicating whether the data included multiple sensitive items.</p>
</td></tr>
<tr><td><code>constrained</code></td>
<td>
<p>a logical or character value indicating whether the
control group parameters are constrained to be equal in the single sensitive
item design, and whether the non-sensitive item count is included as a
predictor in the sensitive item fits for the multiple sensitive item
design.</p>
</td></tr> <tr><td><code>delta.start</code></td>
<td>
<p>Optional starting values for the sensitive item
fit. This should be a vector with the length of the number of covariates.
The default runs an <code>ictreg</code> fit with the method set by the
<code>fit.start</code> option.</p>
</td></tr> <tr><td><code>psi.start</code></td>
<td>
<p>Optional starting values for the
control items fit. This should be a vector of length the number of
covariates. The default runs an <code>ictreg</code> fit with the method set by the
<code>fit.start</code> option.</p>
</td></tr> <tr><td><code>delta.mu0</code></td>
<td>
<p>Optional vector of prior means
for the sensitive item fit parameters, a vector of length the number of
covariates.</p>
</td></tr> <tr><td><code>psi.mu0</code></td>
<td>
<p>Optional vector of prior means for the control
item fit parameters, a vector of length the number of covariates.</p>
</td></tr>
<tr><td><code>delta.A0</code></td>
<td>
<p>Optional matrix of prior precisions for the sensitive item
fit parameters, a matrix of dimension the number of covariates.</p>
</td></tr>
<tr><td><code>psi.A0</code></td>
<td>
<p>Optional matrix of prior precisions for the control items fit
parameters, a matrix of dimension the number of covariates.</p>
</td></tr>
<tr><td><code>delta.tune</code></td>
<td>
<p>A required vector of tuning parameters for the Metropolis
algorithm for the sensitive item fit. This must be set and refined by the
user until the acceptance ratios are approximately .4 (reported in the
output).</p>
</td></tr> <tr><td><code>psi.tune</code></td>
<td>
<p>A required vector of tuning parameters for the
Metropolis algorithm for the control item fit. This must be set and refined
by the user until the acceptance ratios are approximately .4 (reported in
the output).</p>
</td></tr> <tr><td><code>J</code></td>
<td>
<p>Number of non-sensitive (control) survey items set by
the user or detected.</p>
</td></tr> <tr><td><code>treat.labels</code></td>
<td>
<p>a vector of the names used by the
<code>treat</code> vector for the sensitive item or items. This is the names from
the <code>treat</code> indicator if it is a factor, or the number of the item if
it is numeric.</p>
</td></tr> <tr><td><code>control.label</code></td>
<td>
<p>a vector of the names used by the
<code>treat</code> vector for the control items. This is the names from the
<code>treat</code> indicator if it is a factor, or the number of the item if it is
numeric.</p>
</td></tr> <tr><td><code>call</code></td>
<td>
<p>the matched call</p>
</td></tr>
</table>
<p>If the data includes multiple sensitive items, the following object is also
included: </p>
<table role = "presentation">
<tr><td><code>treat.values</code></td>
<td>
<p>a vector of the values used in the
<code>treat</code> vector for the sensitive items, either character or numeric
depending on the class of <code>treat</code>. Does not include the value for the
control status</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Graeme Blair, UCLA, <a href="mailto:graeme.blair@ucla.edu">graeme.blair@ucla.edu</a>
and Kosuke Imai, Princeton University, <a href="mailto:kimai@princeton.edu">kimai@princeton.edu</a>
</p>


<h3>References</h3>

<p>Blair, Graeme and Kosuke Imai. (2012) &ldquo;Statistical Analysis of
List Experiments.&quot;  Political Analysis, Vol. 20, No 1 (Winter). available at
<a href="http://imai.princeton.edu/research/listP.html">http://imai.princeton.edu/research/listP.html</a>
</p>
<p>Imai, Kosuke. (2011) &ldquo;Multivariate Regression Analysis for the Item Count
Technique.&rdquo; Journal of the American Statistical Association, Vol. 106, No.
494 (June), pp. 407-416. available at
<a href="http://imai.princeton.edu/research/list.html">http://imai.princeton.edu/research/list.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+predict.ictreg">predict.ictreg</a></code> for fitted values
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

data(race)

## Not run: 

## Multiple chain MCMC list experiment regression
## starts with overdispersed MLE starting values

## Multiple item two level hierarchical model - varying intercepts

mle.estimates.multi &lt;- ictreg(y ~ male + college, data = multi,
  constrained = TRUE)

draws &lt;- mvrnorm(n = 3, mu = coef(mle.estimates.multi), 
  Sigma = vcov(mle.estimates.multi) * 9)

bayesDraws.1 &lt;- ictregBayesHier(y ~ male + college,
                        formula.level.2 = ~ 1, 
                        delta.start.level.1 = list(draws[1, 8:9], draws[1, 2:3], draws[1, 5:6]),
                        data = multi, treat = "treat",
                        delta.tune = list(rep(0.005, 2), rep(0.05, 2), rep(0.05, 2)),
                        alpha.tune = rep(0.001, length(unique(multi$state))),
                        J = 3, group.level.2 = "state",
                        n.draws = 100000, burnin = 50000, thin = 100)

bayesDraws.2 &lt;- ictregBayesHier(y ~ male + college,
                        formula.level.2 = ~ 1, 
                        delta.start.level.1 = list(draws[2, 8:9], draws[2, 2:3], draws[2, 5:6]),
                        data = multi, treat = "treat",
                        delta.tune = list(rep(0.005, 2), rep(0.05, 2), rep(0.05, 2)),
                        alpha.tune = rep(0.001, length(unique(multi$state))),
                        J = 3, group.level.2 = "state",
                        n.draws = 100000, burnin = 50000, thin = 100)

bayesDraws.3 &lt;- ictregBayesHier(y ~ male + college,
                        formula.level.2 = ~ 1, 
                        delta.start.level.1 = list(draws[3, 8:9], draws[3, 2:3], draws[3, 5:6]),
                        data = multi, treat = "treat",
                        delta.tune = list(rep(0.005, 2), rep(0.05, 2), rep(0.05, 2)),
                        alpha.tune = rep(0.001, length(unique(multi$state))),
                        J = 3, group.level.2 = "state",
                        n.draws = 100000, burnin = 50000, thin = 100)

bayesHierTwoLevel &lt;- as.list(bayesDraws.1, bayesDraws.2, bayesDraws.3)

summary(bayesHierTwoLevel)

## Multiple item two level hierarchical model - including covariates

mle.estimates.multi &lt;- ictreg(y ~ male + college, data = multi,
  constrained = TRUE)

draws &lt;- mvrnorm(n = 3, mu = coef(mle.estimates.multi), 
  Sigma = vcov(mle.estimates.multi) * 9)

bayesDraws.1 &lt;- ictregBayesHier(y ~ male + college,
                        formula.level.2 = ~ age, 
                        delta.start.level.1 = list(draws[1, 8:9], draws[1, 2:3], draws[1, 5:6]),
                        data = multi, treat = "treat",
                        delta.tune = list(rep(0.005, 2), rep(0.05, 2), rep(0.05, 2)),
                        alpha.tune = rep(0.001, length(unique(multi$state))),
                        J = 3, group.level.2 = "state",
                        n.draws = 100000, burnin = 50000, thin = 100)

bayesDraws.2 &lt;- ictregBayesHier(y ~ male + college,
                        formula.level.2 = ~ age, 
                        delta.start.level.1 = list(draws[2, 8:9], draws[2, 2:3], draws[2, 5:6]),
                        data = multi, treat = "treat",
                        delta.tune = list(rep(0.005, 2), rep(0.05, 2), rep(0.05, 2)),
                        alpha.tune = rep(0.001, length(unique(multi$state))),
                        J = 3, group.level.2 = "state",
                        n.draws = 100000, burnin = 50000, thin = 100)

bayesDraws.3 &lt;- ictregBayesHier(y ~ male + college,
                        formula.level.2 = ~ age, 
                        delta.start.level.1 = list(draws[3, 8:9], draws[3, 2:3], draws[3, 5:6]),
                        data = multi, treat = "treat",
                        delta.tune = list(rep(0.005, 2), rep(0.05, 2), rep(0.05, 2)),
                        alpha.tune = rep(0.001, length(unique(multi$state))),
                        J = 3, group.level.2 = "state",
                        n.draws = 100000, burnin = 50000, thin = 100)

bayesHierTwoLevel &lt;- as.list(bayesDraws.1, bayesDraws.2, bayesDraws.3)

summary(bayesHierTwoLevel)


## End(Not run)

</code></pre>

<hr>
<h2 id='mexico'>The 2012 Mexico Elections Panel Study</h2><span id='topic+mexico'></span>

<h3>Description</h3>

<p>This dataset is a subset of the 2012 Mexico Elections Panel Study and
contains a list experiment question. It reads as follows: <code style="white-space: pre;">&#8288; I am going
to read you a list of four activities that appear on this card and I want
you to tell me how many of these activities you have done in recent weeks.
Please don''t tell me which ones, just HOW MANY. The four activities are...
(SHOW CARD AND READ) a. See television news that mentions a candidate b.
Attend a campaign event c. Exchange your vote for a gift, favor, or access
to a service d. Talk about politics with other people&#8288;</code>
</p>


<h3>Format</h3>

<p>A data frame containing the following variables for 1004
observations.  </p>

<table>
<tr>
 <td style="text-align: left;"> y </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> the number of items that
make respondents angry </td><td style="text-align: left;"> 0 - 4 </td>
</tr>
<tr>
 <td style="text-align: left;">

mex.t </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> treatment status </td><td style="text-align: left;"> 0-1 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.male </td><td style="text-align: left;"> numeric
</td><td style="text-align: left;"> whether or not a respondent is male</td><td style="text-align: left;"> 0-1 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.age </td><td style="text-align: left;"> numeric
</td><td style="text-align: left;"> age of a respondent </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.education </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> respondent's
level of education </td><td style="text-align: left;"> 0-9 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.y.all </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> the number of
activities that respondent did </td><td style="text-align: left;"> 0 - 4 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.vote </td><td style="text-align: left;"> numeric </td><td style="text-align: left;">
respondent's self-reported turnout </td><td style="text-align: left;"> 0-1 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.age2 </td><td style="text-align: left;"> numeric </td><td style="text-align: left;">
age of a respondent, squared </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.interest </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> how
interested respondent is in politics </td><td style="text-align: left;"> 1-4 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.married </td><td style="text-align: left;"> numeric
</td><td style="text-align: left;"> indicator for whether respondent is married </td><td style="text-align: left;"> 0-1 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.pidpanw2
</td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> indicator for whether respondent identifies with PAN party
</td><td style="text-align: left;"> 0-1 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.pidprdw2 </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> indicator for whether respondent
identifies with PRD party </td><td style="text-align: left;"> 0-1 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.pidpriw2 </td><td style="text-align: left;"> numeric </td><td style="text-align: left;">
indicator for whether respondent identifies with PRI party </td><td style="text-align: left;"> 0-1 </td>
</tr>
<tr>
 <td style="text-align: left;">
mex.votecard </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> respondent's enumerator-verified turnout </td><td style="text-align: left;">
0-1 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.urban </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> indicator for whether respondent lives
in urban area </td><td style="text-align: left;"> 0-1 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.cleanelections </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> indicator
for whether respondent thinks elections were clean </td><td style="text-align: left;"> 0-1 </td>
</tr>
<tr>
 <td style="text-align: left;">
mex.cleanelectionsmiss </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> indicator for whether
cleanelections variable was missing </td><td style="text-align: left;"> 0-1 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.metro </td><td style="text-align: left;"> numeric </td><td style="text-align: left;">
indicator for whether respondent lives in Mexico City metro area </td><td style="text-align: left;"> 0-1
</td>
</tr>
<tr>
 <td style="text-align: left;"> mex.centralregion </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> indicator for whether respondent
lives in Mexico's central region </td><td style="text-align: left;"> 0-1 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.northregion </td><td style="text-align: left;"> numeric
</td><td style="text-align: left;"> indicator for whether respondent lives in Mexico's north region </td><td style="text-align: left;">
0-1 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.wealth </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> scale for respondent's wealth, based on
household asset indicators </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.epnapprove </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> respondent's
approval rating of Enrique Pena-Nieto </td><td style="text-align: left;"> 1-11 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.havepropoganda </td><td style="text-align: left;">
numeric </td><td style="text-align: left;"> indicator for whether respondent has propaganda outside their
home </td><td style="text-align: left;"> 0-1 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.concurrent </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> indicator for whether
respondent lives in state with concurrent elections </td><td style="text-align: left;"> 0-1 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.loyal
</td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> indicator for whether respondent strongly identifies with
the PAN, PRI, or PRD party </td><td style="text-align: left;"> 0-1 </td>
</tr>
<tr>
 <td style="text-align: left;"> mex.direct </td><td style="text-align: left;"> numeric </td><td style="text-align: left;">
indicator for whether respondent directly reports an attempt to buy their
vote </td><td style="text-align: left;"> 0-1 </td>
</tr>

</table>



<h3>Details</h3>

<p>where item c. is presented only to the treatment group, and the control list
only contains the other three items.
</p>


<h3>Source</h3>

<p>The full data set is available at the Mexico Panel Study website
(<a href="http://mexicopanelstudy.mit.edu/">http://mexicopanelstudy.mit.edu/</a>)
</p>

<hr>
<h2 id='mis'>The 1994 Multi-Investigator Survey</h2><span id='topic+mis'></span>

<h3>Description</h3>

<p>This dataset is a subset of the 1994 Multi-Investigator Survey and contains
the item count technique or the list experiment.  The main question reads as
follows: <code style="white-space: pre;">&#8288; Now I'm going to read you four things that sometimes make
people angry or upset.  After I read all (three/four), just tell me HOW MANY
of them upset you.  (I don't want to know which ones, just how many.)  (1)
"the federal government increasing the tax on gasoline;" (2) "professional
athletes getting million-dollar-plus salaries;" (3) "requiring seatbelts be
used when driving;" (4) "large corporations polluting the environment;" (5)
"black leaders asking the government for affirmative action."&#8288;</code>
</p>


<h3>Format</h3>

<p>A data frame containing the following 6 variables for 1171
observations.
</p>

<table>
<tr>
 <td style="text-align: left;"> y </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> the number of items that make
respondents angry </td><td style="text-align: left;"> 0 - 4 </td>
</tr>
<tr>
 <td style="text-align: left;"> sensitive </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> whether or not
the sensitive item (asked directly) makes respondents angry </td><td style="text-align: left;"> 0 - 1 </td>
</tr>
<tr>
 <td style="text-align: left;">
south </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> whether or not a respondents live in a southern
state </td><td style="text-align: left;"> 0 - 1 </td>
</tr>
<tr>
 <td style="text-align: left;"> male </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> whether or not a respondent is
male </td><td style="text-align: left;"> 0 - 1 </td>
</tr>
<tr>
 <td style="text-align: left;"> college </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> whether or not a respondent
attended some college </td><td style="text-align: left;"> 0 - 1 </td>
</tr>
<tr>
 <td style="text-align: left;"> age </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> age of a
respondent divided by 10 </td>
</tr>
<tr>
 <td style="text-align: left;"> democrat </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> whether not a
respondent identifies as a Democrat </td><td style="text-align: left;"> 0 - 1 </td>
</tr>
<tr>
 <td style="text-align: left;"> republican </td><td style="text-align: left;"> numeric
</td><td style="text-align: left;"> whether not a respondent identifies as a Republican </td><td style="text-align: left;"> 0 - 1</td>
</tr>
<tr>
 <td style="text-align: left;">
independent </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> whether not a respondent identifies as an
independent </td><td style="text-align: left;"> 0 - 1 </td>
</tr>
<tr>
 <td style="text-align: left;"> treat </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> treatment status </td><td style="text-align: left;"> 0 -
1 </td>
</tr>
<tr>
 <td style="text-align: left;"> list.data </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> indicator for list experiment subset
(treatment and control groups) </td><td style="text-align: left;"> 0 - 1 </td>
</tr>
<tr>
 <td style="text-align: left;"> sens.data </td><td style="text-align: left;"> numeric </td><td style="text-align: left;">
indicator for direct sensitive item subset </td><td style="text-align: left;"> 0 - 1 </td>
</tr>
<tr>
 <td style="text-align: left;">

</td>
</tr>

</table>



<h3>Details</h3>

<p>where the last item is presented only with the treatment group and the
control list only contains the first three items.
</p>
<p>The survey also includes a question in which attitudes toward the sensitive
item are asked directly.
</p>
<p><code style="white-space: pre;">&#8288; Now I'm going to ask you about another thing that sometimes makes
people angry or upset. Do you get angry or upset when black leaders ask the
government for affirmative action?&#8288;</code>
</p>


<h3>Source</h3>

<p>The full data set is available at SDA (Survey Documentation and
Analysis; <a href="https://sda.berkeley.edu/D3/Multi/Doc/mult.htm">https://sda.berkeley.edu/D3/Multi/Doc/mult.htm</a>)
</p>

<hr>
<h2 id='multi'>The 1991 National Race and Politics Survey</h2><span id='topic+multi'></span>

<h3>Description</h3>

<p>This dataset is a subset of the 1991 National Race and Politics Survey and
contains a list experiment with two sensitive items.  The main questions
read as follows: <code style="white-space: pre;">&#8288; Now I'm going to read you four things that sometimes
make people angry or upset.  After I read all (three/four), just tell me HOW
MANY of them upset you.  (I don't want to know which ones, just how many.)
(1) "the federal government increasing the tax on gasoline;" (2)
"professional athletes getting million-dollar-plus salaries;" (3) "large
corporations polluting the environment;" (4) "a black family moving next
door to you."&#8288;</code>
</p>


<h3>Format</h3>

<p>A data frame containing the following 6 variables for 1795
observations.
</p>

<table>
<tr>
 <td style="text-align: left;"> y </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> the number of items that make
respondents angry </td><td style="text-align: left;"> 0 - 4 </td>
</tr>
<tr>
 <td style="text-align: left;"> south </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> whether or not a
respondents live in a southern state </td><td style="text-align: left;"> 0 - 1 </td>
</tr>
<tr>
 <td style="text-align: left;"> male </td><td style="text-align: left;"> numeric </td><td style="text-align: left;">
whether or not a respondent is male </td><td style="text-align: left;"> 0 - 1 </td>
</tr>
<tr>
 <td style="text-align: left;"> college </td><td style="text-align: left;"> numeric </td><td style="text-align: left;">
whether or not a respondent attended some college </td><td style="text-align: left;"> 0 - 1 </td>
</tr>
<tr>
 <td style="text-align: left;"> age </td><td style="text-align: left;">
numeric </td><td style="text-align: left;"> age of a respondent divided by 10 </td>
</tr>
<tr>
 <td style="text-align: left;"> treat </td><td style="text-align: left;"> numeric </td><td style="text-align: left;">
treatment status </td><td style="text-align: left;"> 0 - 2 </td>
</tr>

</table>



<h3>Details</h3>

<p>where the last item is presented only with the treatment group and the
control list only contains the first three items.
</p>
<p>The second sensitive item replaces item (4) with <code style="white-space: pre;">&#8288; (4) "black leaders
asking the government for affirmative action." &#8288;</code>
</p>
<p>Treatment status one (treat == 1) is the &quot;black family&quot; item and status two
is the &quot;affirmative action&quot; item.
</p>


<h3>Source</h3>

<p>The full data set is available at SDA (Survey Documentation and
Analysis; <a href="https://sda.berkeley.edu/D3/Natlrace/Doc/nrac.htm">https://sda.berkeley.edu/D3/Natlrace/Doc/nrac.htm</a>)
</p>

<hr>
<h2 id='plot.predict.ictreg'>Plot Method for the Item Count Technique</h2><span id='topic+plot.predict.ictreg'></span>

<h3>Description</h3>

<p>Function to plot predictions and confidence intervals of predictions from
estimates from multivariate regression analysis of survey data with the item
count technique.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'predict.ictreg'
plot(
  x,
  labels = NA,
  axes.ict = TRUE,
  xlim = NULL,
  ylim = NULL,
  xlab = NULL,
  ylab = "Estimated Proportion",
  axes = F,
  pch = 19,
  xvec = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.predict.ictreg_+3A_x">x</code></td>
<td>
<p>object or set of objects of class inheriting from &quot;predict.ictreg&quot;.
Either a single object from an <code>ictreg()</code> model fit or multiple
<code>predict</code> objects combined with the c() function.</p>
</td></tr>
<tr><td><code id="plot.predict.ictreg_+3A_labels">labels</code></td>
<td>
<p>a vector of labels for each prediction, plotted at the x axis.</p>
</td></tr>
<tr><td><code id="plot.predict.ictreg_+3A_axes.ict">axes.ict</code></td>
<td>
<p>a switch indicating if custom plot axes are to be used with
the user-provided estimate <code>labels</code>.</p>
</td></tr>
<tr><td><code id="plot.predict.ictreg_+3A_xlim">xlim</code></td>
<td>
<p>a title for the y axis.</p>
</td></tr>
<tr><td><code id="plot.predict.ictreg_+3A_ylim">ylim</code></td>
<td>
<p>a title for the y axis.</p>
</td></tr>
<tr><td><code id="plot.predict.ictreg_+3A_xlab">xlab</code></td>
<td>
<p>a title for the x axis.</p>
</td></tr>
<tr><td><code id="plot.predict.ictreg_+3A_ylab">ylab</code></td>
<td>
<p>a title for the y axis.</p>
</td></tr>
<tr><td><code id="plot.predict.ictreg_+3A_axes">axes</code></td>
<td>
<p>an indicator for whether default plot axes are included.</p>
</td></tr>
<tr><td><code id="plot.predict.ictreg_+3A_pch">pch</code></td>
<td>
<p>either an integer specifying a symbol or a single character to be
used as the default in plotting points.</p>
</td></tr>
<tr><td><code id="plot.predict.ictreg_+3A_xvec">xvec</code></td>
<td>
<p>a vector of x values at which the proportions will be printed.</p>
</td></tr>
<tr><td><code id="plot.predict.ictreg_+3A_...">...</code></td>
<td>
<p>Other graphical parameters to be passed to the <code>plot()</code>
command are accepted.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>plot.predict.ictreg</code> produces plots with estimated population
proportions of respondents answering the sensitive item in a list experiment
in the affirmative, with confidence intervals.
</p>
<p>The function accepts a set of <code>predict.ictreg</code> objects calculated in
the following manner:
</p>
<p><code>predict(ictreg.object, avg = TRUE, interval = "confidence")</code>
</p>
<p>For each average prediction, a point estimate and its confidence interval is
plotted at equally spaced intervals. The x location of the points can be
manipulated with the <code>xvec</code> option.
</p>
<p>Either a single predict object can be plotted, or a group of them combined
with <code>c(predict.object1, predict.object2)</code>. Predict objects with the
<code>newdata.diff</code> option, which calculates the mean difference in
probability between two datasets, and the <code>direct.glm</code> option, which
calculates the mean difference between the mean predicted support for the
sensitive item in the list experiment and in a direct survey item, can also
be plotted in the same way as other <code>predict</code> objects.
</p>


<h3>Author(s)</h3>

<p>Graeme Blair, UCLA, <a href="mailto:graeme.blair@ucla.edu">graeme.blair@ucla.edu</a>
and Kosuke Imai, Princeton University, <a href="mailto:kimai@princeton.edu">kimai@princeton.edu</a>
</p>


<h3>References</h3>

<p>Blair, Graeme and Kosuke Imai. (2012) &ldquo;Statistical Analysis of
List Experiments.&quot;  Political Analysis, Vol. 20, No 1 (Winter). available at
<a href="http://imai.princeton.edu/research/listP.html">http://imai.princeton.edu/research/listP.html</a>
</p>
<p>Imai, Kosuke. (2011) &ldquo;Multivariate Regression Analysis for the Item Count
Technique.&rdquo; Journal of the American Statistical Association, Vol. 106, No.
494 (June), pp. 407-416. available at
<a href="http://imai.princeton.edu/research/list.html">http://imai.princeton.edu/research/list.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ictreg">ictreg</a></code> for model fitting and
<code><a href="#topic+predict.ictreg">predict.ictreg</a></code> for predictions based on the model fits.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(race)
race.south &lt;- race.nonsouth &lt;- race
race.south[, "south"] &lt;- 1
race.nonsouth[, "south"] &lt;- 0

## Not run: 

# Fit EM algorithm ML model with constraint
ml.constrained.results &lt;- ictreg(y ~ south + age + male + college, 
   data = race, treat = "treat", J=3, method = "ml", 
   overdispersed = FALSE, constrained = TRUE)

# Calculate average predictions for respondents in the South 
# and the the North of the US for the MLE model, replicating the 
# estimates presented in Figure 1, Imai (2011)
avg.pred.south.mle &lt;- predict(ml.constrained.results, 
   newdata = race.south, avg = TRUE, interval = "confidence")
avg.pred.nonsouth.mle &lt;- predict(ml.constrained.results, 
   newdata = race.nonsouth, avg = TRUE, interval = "confidence")

# A plot of a single estimate and its confidence interval
plot(avg.pred.south.mle, labels = "South")

# A  plot of the two estimates and their confidence intervals
# use c() to combine more than one predict object for plotting
plot(c(avg.pred.south.mle, avg.pred.nonsouth.mle), labels = c("South", "Non-South"))

# The difference option can also be used to simultaneously
# calculate separate estimates of the two sub-groups
# and the estimated difference. This can also be plotted.

avg.pred.diff.mle &lt;- predict(ml.constrained.results, 
   newdata = race.south, newdata.diff = race.nonsouth,
   se.fit = TRUE, avg = TRUE, interval="confidence")

plot(avg.pred.diff.mle, labels = c("South", "Non-South", "Difference"))

# Social desirability bias plots

# Estimate logit for direct sensitive question

data(mis)

mis.list &lt;- subset(mis, list.data == 1)

mis.sens &lt;- subset(mis, sens.data == 1)

# Fit EM algorithm ML model

fit.list &lt;- ictreg(y ~ age + college + male + south,
   J = 4, data = mis.list, method = "ml")

# Fit logistic regression with directly-asked sensitive question

fit.sens &lt;- glm(sensitive ~ age + college + male + south, 
   data = mis.sens, family = binomial("logit"))

# Predict difference between response to sensitive item
# under the direct and indirect questions (the list experiment).
# This is an estimate of the revealed social desirability bias
# of respondents. See Blair and Imai (2010).

avg.pred.social.desirability &lt;- predict(fit.list, 
   direct.glm = fit.sens, se.fit = TRUE)

plot(avg.pred.social.desirability)


## End(Not run)
</code></pre>

<hr>
<h2 id='predict.ictreg'>Predict Method for Item Count Technique</h2><span id='topic+predict.ictreg'></span>

<h3>Description</h3>

<p>Function to calculate predictions and uncertainties of predictions from
estimates from multivariate regression analysis of survey data with the item
count technique.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ictreg'
predict(
  object,
  newdata,
  newdata.diff,
  direct.glm,
  newdata.direct,
  se.fit = FALSE,
  interval = c("none", "confidence"),
  level = 0.95,
  avg = FALSE,
  sensitive.item,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.ictreg_+3A_object">object</code></td>
<td>
<p>Object of class inheriting from &quot;ictreg&quot;</p>
</td></tr>
<tr><td><code id="predict.ictreg_+3A_newdata">newdata</code></td>
<td>
<p>An optional data frame containing data that will be used to
make predictions from. If omitted, the data used to fit the regression are
used.</p>
</td></tr>
<tr><td><code id="predict.ictreg_+3A_newdata.diff">newdata.diff</code></td>
<td>
<p>An optional data frame used to compare predictions with
predictions from the data in the provided newdata data frame.</p>
</td></tr>
<tr><td><code id="predict.ictreg_+3A_direct.glm">direct.glm</code></td>
<td>
<p>A glm object from a logistic binomial regression
predicting responses to a direct survey item regarding the sensitive item.
The predictions from the ictreg object are compared to the predictions based
on this glm object.</p>
</td></tr>
<tr><td><code id="predict.ictreg_+3A_newdata.direct">newdata.direct</code></td>
<td>
<p>An optional data frame used for predictions from 
the direct.glm logistic regression fit.</p>
</td></tr>
<tr><td><code id="predict.ictreg_+3A_se.fit">se.fit</code></td>
<td>
<p>A switch indicating if standard errors are required.</p>
</td></tr>
<tr><td><code id="predict.ictreg_+3A_interval">interval</code></td>
<td>
<p>Type of interval calculation.</p>
</td></tr>
<tr><td><code id="predict.ictreg_+3A_level">level</code></td>
<td>
<p>Significance level for confidence intervals.</p>
</td></tr>
<tr><td><code id="predict.ictreg_+3A_avg">avg</code></td>
<td>
<p>A switch indicating if the mean prediction and associated
statistics across all obserations in the dataframe will be returned instead
of predictions for each observation.</p>
</td></tr>
<tr><td><code id="predict.ictreg_+3A_sensitive.item">sensitive.item</code></td>
<td>
<p>For multiple sensitive item design list experiments,
specify which sensitive item fits to use for predictions. Default is the
first sensitive item.</p>
</td></tr>
<tr><td><code id="predict.ictreg_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>predict.ictreg</code> produces predicted values, obtained by evaluating the
regression function in the frame newdata (which defaults to
<code>model.frame(object)</code>. If the logical <code>se.fit</code> is <code>TRUE</code>,
standard errors of the predictions are calculated. Setting <code>interval</code>
specifies computation of confidence intervals at the specified level or no
intervals.
</p>
<p>If <code>avg</code> is set to <code>TRUE</code>, the mean prediction across all
observations in the dataset will be calculated, and if the <code>se.fit</code>
option is set to <code>TRUE</code> a standard error for this mean estimate will be
provided. The <code>interval</code> option will output confidence intervals
instead of only the point estimate if set to <code>TRUE</code>.
</p>
<p>Two additional types of mean prediction are also available. The first, if a
<code>newdata.diff</code> data frame is provided by the user, calculates the mean
predicted values across two datasets, as well as the mean difference in
predicted value. Standard errors and confidence intervals can also be added.
For difference prediction, <code>avg</code> must be set to <code>TRUE</code>.
</p>
<p>The second type of prediction, triggered if a <code>direct.glm</code> object is
provided by the user, calculates the mean difference in prediction between
predictions based on an <code>ictreg</code> fit and a <code>glm</code> fit from a direct
survey item on the sensitive question. This is defined as the revealed
social desirability bias in Blair and Imai (2010).
</p>


<h3>Value</h3>

<p><code>predict.ictreg</code> produces a vector of predictions or a matrix
of predictions and bounds with column names fit, lwr, and upr if interval is
set. If se.fit is TRUE, a list with the following components is returned:
</p>
<table role = "presentation">
<tr><td><code>fit</code></td>
<td>
<p>vector or matrix as above</p>
</td></tr> <tr><td><code>se.fit</code></td>
<td>
<p>standard error of
prediction</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Graeme Blair, UCLA, <a href="mailto:graeme.blair@ucla.edu">graeme.blair@ucla.edu</a>
and Kosuke Imai, Princeton University, <a href="mailto:kimai@princeton.edu">kimai@princeton.edu</a>
</p>


<h3>References</h3>

<p>Blair, Graeme and Kosuke Imai. (2012) &ldquo;Statistical Analysis of
List Experiments.&quot;  Political Analysis, Vol. 20, No 1 (Winter). available at
<a href="http://imai.princeton.edu/research/listP.html">http://imai.princeton.edu/research/listP.html</a>
</p>
<p>Imai, Kosuke. (2011) &ldquo;Multivariate Regression Analysis for the Item Count
Technique.&rdquo; Journal of the American Statistical Association, Vol. 106, No.
494 (June), pp. 407-416. available at
<a href="http://imai.princeton.edu/research/list.html">http://imai.princeton.edu/research/list.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ictreg">ictreg</a></code> for model fitting
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(race)

race.south &lt;- race.nonsouth &lt;- race

race.south[, "south"] &lt;- 1
race.nonsouth[, "south"] &lt;- 0

## Not run: 

# Fit EM algorithm ML model with constraint with no covariates

ml.results.south.nocov &lt;- ictreg(y ~ 1, 
   data = race[race$south == 1, ], method = "ml", treat = "treat", 
   J = 3, overdispersed = FALSE, constrained = TRUE)
ml.results.nonsouth.nocov &lt;- ictreg(y ~ 1, 
   data = race[race$south == 0, ], method = "ml", treat = "treat", 
   J = 3, overdispersed = FALSE, constrained = TRUE)

# Calculate average predictions for respondents in the South 
# and the the North of the US for the MLE no covariates 
# model, replicating the estimates presented in Figure 1, 
# Imai (2010)

avg.pred.south.nocov &lt;- predict(ml.results.south.nocov,
   newdata = as.data.frame(matrix(1, 1, 1)), se.fit = TRUE, 
   avg = TRUE)
avg.pred.nonsouth.nocov &lt;- predict(ml.results.nonsouth.nocov,
   newdata = as.data.frame(matrix(1, 1, 1)), se.fit = TRUE, 
   avg = TRUE)

# Fit linear regression

lm.results &lt;- ictreg(y ~ south + age + male + college, 
   data = race, treat = "treat", J=3, method = "lm")

# Calculate average predictions for respondents in the 
# South and the the North of the US for the lm model, 
# replicating the estimates presented in Figure 1, Imai (2010)

avg.pred.south.lm &lt;- predict(lm.results, newdata = race.south, 
   se.fit = TRUE, avg = TRUE)

avg.pred.nonsouth.lm &lt;- predict(lm.results, newdata = race.nonsouth, 
   se.fit = TRUE, avg = TRUE)

# Fit two-step non-linear least squares regression

nls.results &lt;- ictreg(y ~ south + age + male + college, 
   data = race, treat = "treat", J=3, method = "nls")

# Calculate average predictions for respondents in the South 
# and the the North of the US for the NLS model, replicating
# the estimates presented in Figure 1, Imai (2010)

avg.pred.nls &lt;- predict(nls.results, newdata = race.south, 
   newdata.diff = race.nonsouth, se.fit = TRUE, avg = TRUE)

# Fit EM algorithm ML model with constraint

ml.constrained.results &lt;- ictreg(y ~ south + age + male + college, 
   data = race, treat = "treat", J=3, method = "ml", 
   overdispersed = FALSE, constrained = TRUE)

# Calculate average predictions for respondents in the South 
# and the the North of the US for the MLE model, replicating the 
# estimates presented in Figure 1, Imai (2010)

avg.pred.diff.mle &lt;- predict(ml.constrained.results, 
   newdata = race.south, newdata.diff = race.nonsouth,
   se.fit = TRUE, avg = TRUE)

# Calculate average predictions from the item count technique
# regression and from a direct sensitive item modeled with
# a logit.

# Estimate logit for direct sensitive question

data(mis)

mis.list &lt;- subset(mis, list.data == 1)

mis.sens &lt;- subset(mis, sens.data == 1)

# Fit EM algorithm ML model

fit.list &lt;- ictreg(y ~ age + college + male + south,
   J = 4, data = mis.list, method = "ml")

# Fit logistic regression with directly-asked sensitive question

fit.sens &lt;- glm(sensitive ~ age + college + male + south, 
   data = mis.sens, family = binomial("logit"))

# Predict difference between response to sensitive item
# under the direct and indirect questions (the list experiment).
# This is an estimate of the revealed social desirability bias
# of respondents. See Blair and Imai (2010).

avg.pred.social.desirability &lt;- predict(fit.list, 
   direct.glm = fit.sens, se.fit = TRUE)


## End(Not run)


</code></pre>

<hr>
<h2 id='predict.ictreg.joint'>Predict Method for Item Count Technique, Outcome Regressions</h2><span id='topic+predict.ictreg.joint'></span>

<h3>Description</h3>

<p>Function to calculate predictions and uncertainties of predictions from
estimates from multivariate regression analysis of survey data with the item
count technique, using predicted responses to list experiments as predictors
in outcome regressions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ictreg.joint'
predict(
  object,
  newdata,
  newdata.diff,
  se.fit = FALSE,
  interval = c("none", "confidence"),
  level = 0.95,
  avg = FALSE,
  sensitive.value = c("0", "1", "both"),
  sensitive.diff = FALSE,
  return.draws = FALSE,
  predict.sensitive = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.ictreg.joint_+3A_object">object</code></td>
<td>
<p>Object of class inheriting from &quot;ictreg.joint&quot;</p>
</td></tr>
<tr><td><code id="predict.ictreg.joint_+3A_newdata">newdata</code></td>
<td>
<p>An optional data frame containing data that will be used to
make predictions from. If omitted, the data used to fit the regression are
used.</p>
</td></tr>
<tr><td><code id="predict.ictreg.joint_+3A_newdata.diff">newdata.diff</code></td>
<td>
<p>An optional data frame used to compare predictions with
predictions from the data in the provided newdata data frame.</p>
</td></tr>
<tr><td><code id="predict.ictreg.joint_+3A_se.fit">se.fit</code></td>
<td>
<p>A switch indicating if standard errors are required.</p>
</td></tr>
<tr><td><code id="predict.ictreg.joint_+3A_interval">interval</code></td>
<td>
<p>Type of interval calculation.</p>
</td></tr>
<tr><td><code id="predict.ictreg.joint_+3A_level">level</code></td>
<td>
<p>Significance level for confidence intervals.</p>
</td></tr>
<tr><td><code id="predict.ictreg.joint_+3A_avg">avg</code></td>
<td>
<p>A switch indicating if the mean prediction and associated
statistics across all obserations in the dataframe will be returned instead
of predictions for each observation.</p>
</td></tr>
<tr><td><code id="predict.ictreg.joint_+3A_sensitive.value">sensitive.value</code></td>
<td>
<p>User-specified value for the sensitive item.</p>
</td></tr>
<tr><td><code id="predict.ictreg.joint_+3A_sensitive.diff">sensitive.diff</code></td>
<td>
<p>A switch indicating if the difference in predictions
when the sensitive item = 1 and when the sensitive item = 0 is calculated.</p>
</td></tr>
<tr><td><code id="predict.ictreg.joint_+3A_return.draws">return.draws</code></td>
<td>
<p>A switch indicating if the draws from the simulations
used to generate predictions will be returned.</p>
</td></tr>
<tr><td><code id="predict.ictreg.joint_+3A_predict.sensitive">predict.sensitive</code></td>
<td>
<p>A switch indicating whether predictions from the
sensitive item model are generated.</p>
</td></tr>
<tr><td><code id="predict.ictreg.joint_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>predict.ictreg.joint</code> produces predicted values, obtained by
evaluating the regression function in the frame newdata (which defaults to
model.frame(object)). By using sensitive.value, users must set the value of
z &ndash; the latent response to the sensitive item &ndash; to be either zero or one,
depending on the prediction that the user requires.
</p>
<p>Two additional types of mean prediction are also available. The first, if a
newdata.diff data frame is provided by the user, calculates the mean
predicted values across two datasets, as well as the mean difference in
predicted value. Standard errors and confidence intervals are also added.
For newdata.diff predictions, sensitive.value must be set to 1 or 0, not
&quot;both&quot; (and sensitive.diff must also be set to FALSE).  Users may also set
the logical sensitive.diff to TRUE and sensitive.value to &quot;both&quot;, which will
output the mean predicted values across all observations for z = 0 as well
as z = 1, in addition to the mean difference in predicted value. Standard
errors and confidence intervals are also added. For difference predictions
(sensitive.diff and newdata.diff), the option avg must be set to TRUE.
</p>
<p>Users can also use the predict.sensitive = TRUE option to generate
predictions of responses to the sensitive item, with standard errors and
confidence intervals.
</p>
<p>NOTE: In order to generate predictions from user-provided data frames
(newdata and newdata.diff), users MUST run models using <code>ictreg.joint</code>
on data that does not contain any missingness.  Further, the data frames
provided to <code>predict.ictreg.joint</code> must also not contain any
missingness.
</p>


<h3>Value</h3>

<p><code>predict.ictreg.joint</code> produces a vector of predictions or a
matrix of predictions and bounds with column names fit, lwr, and upr if
interval is set. If sensitive.value = &quot;both&quot;, <code>predict.ictreg.joint</code>
will produce a list, where the first element corresponds to when the
sensitive item = 0 and the second element corresponds to when the sensitive
item = 1. If sensitive.diff = TRUE, the third element in the list
corresponds to the difference (sensitive = 0 subtracted from sensitive = 1).
If se.fit is TRUE, a list with the following components is returned:
</p>
<table role = "presentation">
<tr><td><code>fit</code></td>
<td>
<p>vector or matrix as above.</p>
</td></tr> <tr><td><code>se.fit</code></td>
<td>
<p>standard error of
prediction(s)</p>
</td></tr>
</table>
<p>If return.draws is TRUE, the list includes
</p>
<table role = "presentation">
<tr><td><code>draws.predict</code></td>
<td>
<p>A matrix of draws from a multivariate normal
distribution with mean equal to the vector of estimated coefficients from
the outcome regression model, and sigma equal to the variance-covariance
matrix of the outcome regression model. Rows are observations; colums are
10,000 draws. If sensitive.value = both, will be a list of two elements
where each element is a matrix as described; the first matrix will be for
when the sensitive item = 0, the second matrix will be for when the
sensitive item = 1. If newdata.diff is provided, <code>draws.predict</code> will
be a list of two elements where each element is a matrix as described; the
first matrix will correspond to the newdata data frame; the second matrix
will correspond to the newdata.diff data frame.</p>
</td></tr> <tr><td><code>draws.mean</code></td>
<td>
<p>The
<code>draws.predict</code> matrix averaged over all observations; a vector of
10,000 draws. If sensitive.value = both, will be a list of two elements
where each element is a vector as described; the first matrix will be for
when the sensitive item = 0, the second matrix will be for when the
sensitive item = 1. If newdata.diff is provided, <code>draws.mean</code> will be a
list of two elements where each element is a matrix as described; the first
matrix will correspond to the newdata data frame; the second matrix will
correspond to the newdata.diff data frame.</p>
</td></tr> <tr><td><code>sens.diff</code></td>
<td>
<p>If
sensitive.diff = TRUE, a vector of 10,000 draws generated from subtracting
the first item in <code>draws.mean</code> from the second item. A vector of 10,000
draws.</p>
</td></tr>
</table>
<p>If predict.sensitive = TRUE, the list also includes
</p>
<table role = "presentation">
<tr><td><code>fitsens</code></td>
<td>
<p>a vector of predictions and bounds with column names fit,
lwr, and upr if interval is set, generated from the sensitive item model.</p>
</td></tr>
<tr><td><code>draws.predict.sens</code></td>
<td>
<p>A matrix of draws from a multivariate normal
distribution with mean equal to the vector of estimated coefficients from
the sensitive item model, and sigma equal to the variance-covariance matrix
of the sensitive item model. Rows are observations; colums are 10,000 draws
(only returned if return.draws is TRUE). If newdata.diff is provided, this
will be a list of two matrices as described. The first will correspond to
newdata, and the second to newdata.diff.</p>
</td></tr> <tr><td><code>draws.mean.sens</code></td>
<td>
<p>The
<code>draws.predict.sens</code> matrix averaged over all observations; a vector of
10,000 draws (only returned if return.draws is TRUE). If newdata.diff is
provided, this will be a list of two matrices as described. The first will
correspond to newdata, and the second to newdata.diff.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Imai, Kosuke, Bethany Park, and Kenneth F. Greene. (2014)
&ldquo;Using the Predicted Responses from List Experiments as Explanatory
Variables in Regression Models.&rdquo; available at
<a href="http://imai.princeton.edu/research/files/listExp.pdf">http://imai.princeton.edu/research/files/listExp.pdf</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

data(mexico)
loyal &lt;- mexico[mexico$mex.loyal == 1,]
notloyal &lt;- mexico[mexico$mex.loyal == 0,]

## Not run: 

## Logistic outcome regression
## (effect of vote-selling on turnout)
## This replicates Table 4 in Imai et al. 2014

loyalreg &lt;- ictreg.joint(formula = mex.y.all ~ mex.male + mex.age + mex.age2 + mex.education +  
                         mex.interest + mex.married +
                         mex.wealth + mex.urban + mex.havepropoganda + mex.concurrent, data = loyal,
                         treat = "mex.t", outcome = "mex.votecard", J = 3, constrained = TRUE,
                         outcome.reg = "logistic", maxIter = 1000)


## Linear outcome regression
## (effect of vote-selling on candidate approval)
## This replicates Table 5 in Imai et al. 2014

approvalreg &lt;- ictreg.joint(formula = mex.y.all ~ mex.male + mex.age + mex.age2 +
                            mex.education +
                            mex.interest + mex.married +
                            mex.urban + 
                            mex.cleanelections + mex.cleanelectionsmiss +
                            mex.havepropoganda +
                            mex.wealth + mex.northregion +
                            mex.centralregion + mex.metro + mex.pidpriw2 + 
			    mex.pidpanw2 + mex.pidprdw2,
                            data = mexico, treat = "mex.t", outcome = "mex.epnapprove",
                            J = 3, constrained = TRUE,
                            outcome.reg = "linear", maxIter = 1000)


summary(approvalreg)

## Generate predicted probability of turnout, averaged over the whole sample,
## for vote sellers (z = 1), non-vote sellers (z = 0), and the difference
## between vote sellers and non-vote sellers, in the sample of party supporters.
## This replicates the results in the righthand panel of Figure 2 in Imai et al. 2014

loyalpred &lt;- predict.ictreg.joint(loyalreg, se.fit = TRUE, interval = "confidence", 
					level = 0.95, avg = TRUE, 
					sensitive.value = "both", 
					sensitive.diff = TRUE, return.draws = TRUE,
    					predict.sensitive = TRUE)

loyalpred$fit

## View predicted probability of vote selling, in the sample of party supporters.
## This replicates the results in the lefthand panel of Figure 2 in Imai et al. 2014

loyalpred$fitsens



## End(Not run)

</code></pre>

<hr>
<h2 id='predict.ictregBayes'>Predict Method for the Item Count Technique with Bayesian MCMC</h2><span id='topic+predict.ictregBayes'></span>

<h3>Description</h3>

<p>Function to calculate predictions and uncertainties of predictions from
estimates from multivariate regression analysis of survey data with the item
count technique.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ictregBayes'
predict(
  object,
  newdata,
  newdata.diff,
  direct.glm,
  se.fit = FALSE,
  interval = c("none", "confidence"),
  level = 0.95,
  sensitive.item,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.ictregBayes_+3A_object">object</code></td>
<td>
<p>Object of class inheriting from &quot;ictregBayes&quot; or
&quot;ictregBayesMulti&quot;</p>
</td></tr>
<tr><td><code id="predict.ictregBayes_+3A_newdata">newdata</code></td>
<td>
<p>An optional data frame containing data that will be used to
make predictions from. If omitted, the data used to fit the regression are
used.</p>
</td></tr>
<tr><td><code id="predict.ictregBayes_+3A_newdata.diff">newdata.diff</code></td>
<td>
<p>An optional data frame used to compare predictions with
predictions from the data in the provided newdata data frame.</p>
</td></tr>
<tr><td><code id="predict.ictregBayes_+3A_direct.glm">direct.glm</code></td>
<td>
<p>A glm object from a logistic binomial regression
predicting responses to a direct survey item regarding the sensitive item.
The predictions from the ictreg object are compared to the predictions based
on this glm object.</p>
</td></tr>
<tr><td><code id="predict.ictregBayes_+3A_se.fit">se.fit</code></td>
<td>
<p>A switch indicating if standard errors are required.</p>
</td></tr>
<tr><td><code id="predict.ictregBayes_+3A_interval">interval</code></td>
<td>
<p>Type of interval calculation.</p>
</td></tr>
<tr><td><code id="predict.ictregBayes_+3A_level">level</code></td>
<td>
<p>Significance level for confidence intervals.</p>
</td></tr>
<tr><td><code id="predict.ictregBayes_+3A_sensitive.item">sensitive.item</code></td>
<td>
<p>For the multiple sensitive item design, the integer
indicating which sensitive item coefficients will be used for prediction.</p>
</td></tr>
<tr><td><code id="predict.ictregBayes_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>predict.ictregBayes</code> produces predicted values, obtained by evaluating
the regression function in the frame newdata (which defaults to
<code>model.frame(object)</code>. If the logical <code>se.fit</code> is <code>TRUE</code>,
standard errors of the predictions are calculated. Setting <code>interval</code>
specifies computation of confidence intervals at the specified level or no
intervals.
</p>
<p>The mean prediction across all observations in the dataset is calculated,
and if the <code>se.fit</code> option is set to <code>TRUE</code> a standard error for
this mean estimate will be provided. The <code>interval</code> option will output
confidence intervals instead of only the point estimate if set to
<code>TRUE</code>.
</p>
<p>Two additional types of mean prediction are also available. The first, if a
<code>newdata.diff</code> data frame is provided by the user, calculates the mean
predicted values across two datasets, as well as the mean difference in
predicted value. Standard errors and confidence intervals can also be added.
For difference prediction, <code>avg</code> must be set to <code>TRUE</code>.
</p>
<p>The second type of prediction, triggered if a <code>direct.glm</code> object is
provided by the user, calculates the mean difference in prediction between
predictions based on an <code>ictreg</code> fit and a <code>glm</code> fit from a direct
survey item on the sensitive question. This is defined as the revealed
social desirability bias in Blair and Imai (2010).
</p>
<p>In the multiple sensitive item design, prediction can only be based on the
coefficients from one of the sensitive item fits. The <code>sensitive.item</code>
option allows you to specify which is used, using integers from 1 to the
number of sensitive items.
</p>


<h3>Value</h3>

<p><code>predict.ictreg</code> produces a vector of predictions or a matrix
of predictions and bounds with column names fit, lwr, and upr if interval is
set. If se.fit is TRUE, a list with the following components is returned:
</p>
<table role = "presentation">
<tr><td><code>fit</code></td>
<td>
<p>vector or matrix as above</p>
</td></tr> <tr><td><code>se.fit</code></td>
<td>
<p>standard error of
prediction</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Graeme Blair, UCLA, <a href="mailto:graeme.blair@ucla.edu">graeme.blair@ucla.edu</a>
and Kosuke Imai, Princeton University, <a href="mailto:kimai@princeton.edu">kimai@princeton.edu</a>
</p>


<h3>References</h3>

<p>Blair, Graeme and Kosuke Imai. (2012) &ldquo;Statistical Analysis of
List Experiments.&quot;  Political Analysis, Vol. 20, No 1 (Winter). available at
<a href="http://imai.princeton.edu/research/listP.html">http://imai.princeton.edu/research/listP.html</a>
</p>
<p>Imai, Kosuke. (2011) &ldquo;Multivariate Regression Analysis for the Item Count
Technique.&rdquo; Journal of the American Statistical Association, Vol. 106, No.
494 (June), pp. 407-416. available at
<a href="http://imai.princeton.edu/research/list.html">http://imai.princeton.edu/research/list.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ictreg">ictreg</a></code> for model fitting
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(race)

## Not run: 

bayes.fit &lt;- ictregBayes(y ~ age + college + male + south, data = multi, 
  treat = "treat", delta.tune = diag(.002, 5), psi.tune = diag(.00025, 5))

bayes.predict &lt;- predict(bayes.fit, interval = "confidence", se.fit = TRUE)


## End(Not run)


</code></pre>

<hr>
<h2 id='predict.ictregBayesHier'>Predict Method for the Item Count Technique with Bayesian Hierarchical
Regression</h2><span id='topic+predict.ictregBayesHier'></span>

<h3>Description</h3>

<p>Function to calculate predictions and uncertainties of predictions from
estimates from hierarchical multivariate regression analysis of survey data
with the item count technique.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ictregBayesHier'
predict(
  object,
  newdata,
  se.fit = FALSE,
  interval = c("none", "confidence"),
  level = 0.95,
  sensitive.item,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.ictregBayesHier_+3A_object">object</code></td>
<td>
<p>Object of class inheriting from &quot;ictregBayes&quot; or
&quot;ictregBayesMulti&quot;</p>
</td></tr>
<tr><td><code id="predict.ictregBayesHier_+3A_newdata">newdata</code></td>
<td>
<p>An optional data frame containing data that will be used to
make predictions from. If omitted, the data used to fit the regression are
used.</p>
</td></tr>
<tr><td><code id="predict.ictregBayesHier_+3A_se.fit">se.fit</code></td>
<td>
<p>A switch indicating if standard errors are required.</p>
</td></tr>
<tr><td><code id="predict.ictregBayesHier_+3A_interval">interval</code></td>
<td>
<p>Type of interval calculation.</p>
</td></tr>
<tr><td><code id="predict.ictregBayesHier_+3A_level">level</code></td>
<td>
<p>Significance level for confidence intervals.</p>
</td></tr>
<tr><td><code id="predict.ictregBayesHier_+3A_sensitive.item">sensitive.item</code></td>
<td>
<p>For the multiple sensitive item design, the integer
indicating which sensitive item coefficients will be used for prediction.</p>
</td></tr>
<tr><td><code id="predict.ictregBayesHier_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>predict.ictregBayesHier</code> produces predicted values, obtained by
evaluating the regression function in the frame newdata (which defaults to
<code>model.frame(object)</code>. If the logical <code>se.fit</code> is <code>TRUE</code>,
standard errors of the predictions are calculated. Setting <code>interval</code>
specifies computation of confidence intervals at the specified level or no
intervals.
</p>
<p>The mean prediction across all observations in the dataset is calculated,
and if the <code>se.fit</code> option is set to <code>TRUE</code> a standard error for
this mean estimate will be provided. The <code>interval</code> option will output
confidence intervals instead of only the point estimate if set to
<code>TRUE</code>.
</p>
<p>In the multiple sensitive item design, prediction can only be based on the
coefficients from one of the sensitive item fits. The <code>sensitive.item</code>
option allows you to specify which is used, using integers from 1 to the
number of sensitive items.
</p>


<h3>Value</h3>

<p><code>predict.ictreg</code> produces a vector of predictions or a matrix
of predictions and bounds with column names fit, lwr, and upr if interval is
set. If se.fit is TRUE, a list with the following components is returned:
</p>
<table role = "presentation">
<tr><td><code>fit</code></td>
<td>
<p>vector or matrix as above</p>
</td></tr> <tr><td><code>se.fit</code></td>
<td>
<p>standard error of
prediction</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Graeme Blair, UCLA, <a href="mailto:graeme.blair@ucla.edu">graeme.blair@ucla.edu</a>
and Kosuke Imai, Princeton University, <a href="mailto:kimai@princeton.edu">kimai@princeton.edu</a>
</p>


<h3>References</h3>

<p>Blair, Graeme and Kosuke Imai. (2012) &ldquo;Statistical Analysis of
List Experiments.&quot;  Political Analysis, Vol. 20, No 1 (Winter). available at
<a href="http://imai.princeton.edu/research/listP.html">http://imai.princeton.edu/research/listP.html</a>
</p>
<p>Imai, Kosuke. (2011) &ldquo;Multivariate Regression Analysis for the Item Count
Technique.&rdquo; Journal of the American Statistical Association, Vol. 106, No.
494 (June), pp. 407-416. available at
<a href="http://imai.princeton.edu/research/list.html">http://imai.princeton.edu/research/list.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ictreg">ictreg</a></code> for model fitting
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(race)

## Not run: 

mle.estimates.multi &lt;- ictreg(y ~ male + college, data = multi,
  constrained = TRUE)

draws &lt;- mvrnorm(n = 3, mu = coef(mle.estimates.multi), 
  Sigma = vcov(mle.estimates.multi) * 9)

bayes.fit &lt;- ictregBayesHier(y ~ male + college,
                        formula.level.2 = ~ 1, 
                        delta.start.level.1 = list(draws[1, 8:9], draws[1, 2:3], draws[1, 5:6]),
                        data = multi, treat = "treat",
                        delta.tune = list(rep(0.005, 2), rep(0.05, 2), rep(0.05, 2)),
                        alpha.tune = rep(0.001, length(unique(multi$state))),
                        J = 3, group.level.2 = "state",
                        n.draws = 100, burnin = 10, thin = 1)

bayes.predict &lt;- predict(bayes.fit, interval = "confidence", se.fit = TRUE)


## End(Not run)


</code></pre>

<hr>
<h2 id='race'>The 1991 National Race and Politics Survey</h2><span id='topic+race'></span>

<h3>Description</h3>

<p>This dataset is a subset of the 1991 National Race and Politics Survey and
contains the item count technique or the list experiment.  The main question
reads as follows: <code style="white-space: pre;">&#8288; Now I'm going to read you four things that
sometimes make people angry or upset.  After I read all (three/four), just
tell me HOW MANY of them upset you.  (I don't want to know which ones, just
how many.)  (1) "the federal government increasing the tax on gasoline;" (2)
"professional athletes getting million-dollar-plus salaries;" (3) "large
corporations polluting the environment;" (4) "a black family moving next
door to you."&#8288;</code>
</p>


<h3>Format</h3>

<p>A data frame containing the following 6 variables for 1213
observations.
</p>

<table>
<tr>
 <td style="text-align: left;"> y </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> the number of items that make
respondents angry </td><td style="text-align: left;"> 0 - 4 </td>
</tr>
<tr>
 <td style="text-align: left;"> south </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> whether or not a
respondents live in a southern state </td><td style="text-align: left;"> 0 - 1 </td>
</tr>
<tr>
 <td style="text-align: left;"> male </td><td style="text-align: left;"> numeric </td><td style="text-align: left;">
whether or not a respondent is male </td><td style="text-align: left;"> 0 - 1 </td>
</tr>
<tr>
 <td style="text-align: left;"> college </td><td style="text-align: left;"> numeric </td><td style="text-align: left;">
whether or not a respondent attended some college </td><td style="text-align: left;"> 0 - 1 </td>
</tr>
<tr>
 <td style="text-align: left;"> age </td><td style="text-align: left;">
numeric </td><td style="text-align: left;"> age of a respondent divided by 10 </td>
</tr>
<tr>
 <td style="text-align: left;"> treat </td><td style="text-align: left;"> numeric </td><td style="text-align: left;">
treatment status </td><td style="text-align: left;"> 0 - 1 </td>
</tr>

</table>



<h3>Details</h3>

<p>where the last item is presented only with the treatment group and the
control list only contains the first three items.
</p>


<h3>Source</h3>

<p>The full data set is available at SDA (Survey Documentation and
Analysis; <a href="https://sda.berkeley.edu/D3/Natlrace/Doc/nrac.htm">https://sda.berkeley.edu/D3/Natlrace/Doc/nrac.htm</a>)
</p>

<hr>
<h2 id='summary.ictreg'>Summary Method for the Item Count Technique</h2><span id='topic+summary.ictreg'></span>

<h3>Description</h3>

<p>Function to summarize results from list experiment regression based on the
ictreg() function, and to produce proportions of liars estimates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ictreg'
summary(object, boundary.proportions = FALSE, n.draws = 10000, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.ictreg_+3A_object">object</code></td>
<td>
<p>Object of class inheriting from &quot;ictreg&quot;</p>
</td></tr>
<tr><td><code id="summary.ictreg_+3A_boundary.proportions">boundary.proportions</code></td>
<td>
<p>A switch indicating whether, for models with
ceiling effects, floor effects, or both (indicated by the <code>floor =
TRUE</code>, <code>ceiling = TRUE</code> options in ictreg), the conditional probability
of lying and the population proportions of liars are calculated.</p>
</td></tr>
<tr><td><code id="summary.ictreg_+3A_n.draws">n.draws</code></td>
<td>
<p>For quasi-Bayesian approximation based predictions, specify
the number of Monte Carlo draws.</p>
</td></tr>
<tr><td><code id="summary.ictreg_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>predict.ictreg</code> produces a summary of the results from an
<code>ictreg</code> object. It displays the coefficients, standard errors, and fit
statistics for any model from <code>ictreg</code>.
</p>
<p><code>predict.ictreg</code> also produces estimates of the conditional probability
of lying and of the population proportion of liars for boundary models from
<code>ictreg()</code> if <code>ceiling = TRUE</code> or <code>floor = TRUE</code>.
</p>
<p>The conditional probability of lying for the ceiling model is the
probability that a respondent with true affirmative views of all the
sensitive and non-sensitive items lies and responds negatively to the
sensitive item. The conditional probability for the floor model is the
probability that a respondent lies to conceal her true affirmative views of
the sensitive item when she also holds true negative views of all the
non-sensitive items. In both cases, the respondent may believe her privacy
is not protected, so may conceal her true affirmative views of the sensitive
item.
</p>


<h3>Author(s)</h3>

<p>Graeme Blair, UCLA, <a href="mailto:graeme.blair@ucla.edu">graeme.blair@ucla.edu</a>
and Kosuke Imai, Princeton University, <a href="mailto:kimai@princeton.edu">kimai@princeton.edu</a>
</p>


<h3>References</h3>

<p>Blair, Graeme and Kosuke Imai. (2012) &ldquo;Statistical Analysis of
List Experiments.&quot;  Political Analysis, Vol. 20, No 1 (Winter). available at
<a href="http://imai.princeton.edu/research/listP.html">http://imai.princeton.edu/research/listP.html</a>
</p>
<p>Imai, Kosuke. (2011) &ldquo;Multivariate Regression Analysis for the Item Count
Technique.&rdquo; Journal of the American Statistical Association, Vol. 106, No.
494 (June), pp. 407-416. available at
<a href="http://imai.princeton.edu/research/list.html">http://imai.princeton.edu/research/list.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ictreg">ictreg</a></code> for model fitting
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(race)
## Not run: 
# Fit standard design ML model with ceiling effects
# Replicates Table 7 Columns 3-4 in Blair and Imai (2012)

ceiling.results &lt;- ictreg(y ~ age + college + male + south, treat = "treat", 
		   	  J = 3, data = affirm, method = "ml", fit.start = "nls",
			  ceiling = TRUE, ceiling.fit = "bayesglm",
			  ceiling.formula = ~ age + college + male + south)

# Summarize fit object and generate conditional probability 
# of ceiling liars the population proportion of ceiling liars,
# both with standard errors.
# Replicates Table 7 Columns 3-4 last row in Blair and Imai (2012)

summary(ceiling.results, boundary.proportions = TRUE)

## End(Not run)


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
