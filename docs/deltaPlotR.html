<!DOCTYPE html><html><head><title>Help for package deltaPlotR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {deltaPlotR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#adjustExtreme'><p>Adjusting the proportions of correct responses for extreme cases</p></a></li>
<li><a href='#deltaPlot'><p>Delta Plot method for dichotomous DIF</p></a></li>
<li><a href='#diagPlot'><p>Plot of the Deltas points from the Delta Plot method</p></a></li>
<li><a href='#verbal'><p>Verbal Aggression Data Set</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Identification of Dichotomous Differential Item Functioning
(DIF) using Angoff's Delta Plot Method</td>
</tr>
<tr>
<td>Version:</td>
<td>1.6</td>
</tr>
<tr>
<td>Date:</td>
<td>2018-03-19</td>
</tr>
<tr>
<td>Author:</td>
<td>David Magis (U Liege), Bruno Facon (Univ Lille-Nord de France)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David Magis &lt;david.magis@ulg.ac.be&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10.0), MASS</td>
</tr>
<tr>
<td>Description:</td>
<td>The deltaPlotR package implements Angoff's Delta Plot method to detect dichotomous DIF. Several detection thresholds are included, either from multivariate normality assumption or by prior determination. Item purification is supported (Magis and Facon (2014) &lt;<a href="https://doi.org/10.18637%2Fjss.v059.c01">doi:10.18637/jss.v059.c01</a>&gt;).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2018-03-16 07:40:04 UTC; David</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2018-03-16 08:58:17 UTC</td>
</tr>
</table>
<hr>
<h2 id='adjustExtreme'>Adjusting the proportions of correct responses for extreme cases</h2><span id='topic+adjustExtreme'></span>

<h3>Description</h3>

<p>This command modifies the proportions of correct responses when these equal either zero or one, for compatibility 
with the Delta plot.  
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adjustExtreme(data = NULL, group = NULL, focal.name = NULL, prop, 
 method = "constraint", const.range = c(0.001, 0.999), nrAdd = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="adjustExtreme_+3A_data">data</code></td>
<td>
<p>numeric: the data matrix: one row per subject, one column per item, with possible entries 0, 1 or NA. Default value is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="adjustExtreme_+3A_group">group</code></td>
<td>
<p>numeric or character: a vector of the same length as <code>nrow(data)</code> with two different values, one for the reference group, one for the focal group. Values can be either numeric or character. Default value is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="adjustExtreme_+3A_focal.name">focal.name</code></td>
<td>
<p>numeric or character: the value used in the <code>group</code> vector to refer to the focal group. Default
value is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="adjustExtreme_+3A_prop">prop</code></td>
<td>
<p>numeric: a matrix with one row per item and two columns. The first column holds the percentage of correct responses for each item in the reference group, and the second column holds the same percentages but for the focal group.</p>
</td></tr>
<tr><td><code id="adjustExtreme_+3A_method">method</code></td>
<td>
<p>character: the method used to modify the extreme proportions. Possible values are <code>"constraint"</code> (default) or <code>"add"</code>. See <b>Details</b>.</p>
</td></tr>
<tr><td><code id="adjustExtreme_+3A_const.range">const.range</code></td>
<td>
<p>numeric: a vector of two constraining proportions. Default values are 0.001 and 0.999. Ignored if <code>method</code> is <code>"add"</code>.</p>
</td></tr>
<tr><td><code id="adjustExtreme_+3A_nradd">nrAdd</code></td>
<td>
<p>integer: the number of successes and the number of failures to add to the data in order to adjust the proportions. Default value is 1. Ignored if <code>method</code> is <code>"constraint"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Delta plot method requires the computation of the proportions o correct responses per item and per group. However, these proportions must be stricly greater than zero and smaller than one, since they are transformed onto <em>z</em>-scores. Thus, extreme proportions must be adjusted for proper use of the Delta plot. 
</p>
<p>Two approaches are currently implemented and set to <code>adjustExtreme</code> by the <code>method</code> argument.
</p>
<p>The first method is the <em>constraint</em> method and is set by <code>method="constraint"</code>. It simply consists in constraining the proportions within a specified range of values in (0,1). This restricted range of values is set by the <code>const.range</code> argument and takes the default value <code>c(0.001, 0.999)</code>.
</p>
<p>The second method is the so-called <em>add</em> method and is specified by <code>method="add"</code>. It consists in rabitrarily
adding some successes and the same number of failures to the data, in order to get a modified proportion of successes. 
This number of extra successes is set by the <em>nrAdd</em> argument, with default value one. In sum, by default one success one failure is added to the item responses, so that the newly computed proportion of successes is not extreme anymore, yet close to the original value. This default values refers to the so-called Laplace rule (see e.g. Jaynes, 2003). 
</p>
<p>The input arguments are: the data matrix of item responses (ith possible entries 0, 1 and <code>NA</code> for missing data), 
the vector of group memebership and the numeric (or character) value coding for the focal group. By default they take the
<code>NULL</code> value so they can be left unassigned, but then only the &quot;constraint&quot; method can be applied. In any case, the
matrix of proportions of correct responses per item and per group of respondents must be specified through the 
<code>prop</code> argument.
</p>


<h3>Value</h3>

<p>A list with the following arguments:
</p>
<table>
<tr><td><code>adj.prop</code></td>
<td>
<p>the restricted proportions, in the same format as the input <code>prop</code> matrix.</p>
</td></tr>
<tr><td><code>method</code></td>
<td>
<p>the value of the <code>method</code>argument or <code>"constraint"</code> if the latter was applied by lack of data.</p>
</td></tr>
<tr><td><code>range</code></td>
<td>
<p>the value of the <code>const.range</code> argument.</p>
</td></tr>
<tr><td><code>nrAdd</code></td>
<td>
<p>the value of the <code>nrAdd</code> argument.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>David Magis <br />
Post-doc Fellow of the National Funds for Scientific Research (FNRS, Belgium) <br />
University of Liege <br />
<a href="mailto:David.Magis@ulg.ac.be">David.Magis@ulg.ac.be</a>, <a href="http://ppw.kuleuven.be/okp/home/">http://ppw.kuleuven.be/okp/home/</a> <br />
Bruno Facon<br />
Professor, Department of Psychology <br />
Universite Lille-Nord de France<br />
<a href="mailto:bruno.facon@univ-lille3.fr">bruno.facon@univ-lille3.fr</a>, <br /> 
</p>


<h3>References</h3>

<p>Angoff, W. H. and Ford, S. F. (1973). Item-race interaction on a test of scholastic aptitude. <em>Journal of
Educational Measurement</em>, 10, 95-106.
</p>
<p>Jaynes, E.T. (2003). <em>Probability theory: The logic of science</em>. Cambridge, UK: Cambridge University Press.
</p>
<p>Magis, D., and Facon, B. (2012). Angoff's Delta method revisited: improving the DIF detection under small samples.
<em>British Journal of Mathematical and Statistical Psychology, 65</em>, 302-321.
</p>
<p>Magis, D. and Facon, B. (2014). <em>deltaPlotR</em>: An R Package for Differential Item Functioning Analysis with Angoff's Delta Plot. <em>Journal of Statistical Software, Code Snippets, 59(1)</em>, 1-19. URL <a href="http://www.jstatsoft.org/v59/c01/">http://www.jstatsoft.org/v59/c01/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+deltaPlot">deltaPlot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 # Loading of the verbal data
 data(verbal)
 attach(verbal)

 # Excluding the "Anger" variable
 verbal &lt;- verbal[colnames(verbal)!="Anger"]

 # Computing the proportions of correct answers per group
 prop &lt;- matrix(NA, 24, 2)
 for (i in 1:24){
  prop[i,1] &lt;- mean(verbal[verbal[,25]==0,i], na.rm=TRUE)
  prop[i,2] &lt;- mean(verbal[verbal[,25]==1,i], na.rm=TRUE)
 }

 # "constraint" method
 adjustExtreme(data=verbal[,1:24], group=verbal[,25], focal.name=1, prop=prop)

 # "constraint" method with differently specified range
 adjustExtreme(data=verbal[,1:24], group=verbal[,25], focal.name=1, prop=prop,
  const.range=c(0.01,0.99))

 # "add" method
 adjustExtreme(data=verbal[,1:24], group=verbal[,25], focal.name=1, prop=prop,
  method="add")

 # "add" method with different number of successes added
 adjustExtreme(data=verbal[,1:24], group=verbal[,25], focal.name=1, prop=prop,
  method="add", nrAdd=2)

 # "constraint" method because of lack of provided data
 adjustExtreme(prop=prop)
</code></pre>

<hr>
<h2 id='deltaPlot'>Delta Plot method for dichotomous DIF</h2><span id='topic+deltaPlot'></span><span id='topic+print.deltaPlot'></span>

<h3>Description</h3>

<p>This command computes the Delta plot statistics for dichotomous differential item functioning, with all associated
output (Delta points, perpendicular distances). The modified Delta plot is also available, as well as several item
purification techniques.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>
deltaPlot(data, type = "response", group, focal.name, thr = "norm", 
 purify = FALSE, purType = "IPP1", maxIter = 10, alpha =0.05, 
 extreme = "constraint", const.range = c(0.001, 0.999), nrAdd = 1, 
 save.output = FALSE,output = c("out", "default"))
## S3 method for class 'deltaPlot'
print(x, only.final = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deltaPlot_+3A_data">data</code></td>
<td>
<p>numeric: either (a) the data matrix with item responses and group membership, (b) the two-column matrix of proportions of correct responses per item and per group, or (c) the two-column matrix of Delta scores. See <b>Details</b>.</p>
</td></tr>
<tr><td><code id="deltaPlot_+3A_type">type</code></td>
<td>
<p>character: the type of <code>data</code> argument. Possible values are <code>"response"</code> (default), <code>"prop"</code> and <code>"delta"</code>. See <b>Details</b>.</p>
</td></tr>
<tr><td><code id="deltaPlot_+3A_group">group</code></td>
<td>
<p>integer or character: a single value for locating the group membership column in the <code>data</code> argument. Ignored if <code>type</code> is not <code>"response"</code>. See <b>Details</b>.</p>
</td></tr>
<tr><td><code id="deltaPlot_+3A_focal.name">focal.name</code></td>
<td>
<p>numeric or character: the value used in the group membership column to refer to the focal group. Ignored if <code>type</code> is not <code>"response"</code>. See <b>Details</b>.</p>
</td></tr>
<tr><td><code id="deltaPlot_+3A_thr">thr</code></td>
<td>
<p>numeric or character: the threshold for flagging items as DIF. Can be a positive numeric value or <code>"norm"</code>. See <b>Details</b>.</p>
</td></tr>
<tr><td><code id="deltaPlot_+3A_purify">purify</code></td>
<td>
<p>logical: should item purification be performed? (Default is codeFALSE). See <b>Details</b>.</p>
</td></tr>
<tr><td><code id="deltaPlot_+3A_purtype">purType</code></td>
<td>
<p>character: the type of purification process to be run. Possible values are <code>"IPP1"</code> (default), <code>"IPP2"</code> and <code>"IPP3"</code>. Ignored if <code>purify</code> is <code>FALSE</code>. See <b>Details</b>.</p>
</td></tr>
<tr><td><code id="deltaPlot_+3A_maxiter">maxIter</code></td>
<td>
<p>integer: the maximum number of iteration in the purification process (default is 10). Ignored if <code>purify</code> is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="deltaPlot_+3A_alpha">alpha</code></td>
<td>
<p>numeric: the significance level for calculating the detection threshold (default is 0.05). Ignored if <code>thr</code> is numeric.</p>
</td></tr>
<tr><td><code id="deltaPlot_+3A_extreme">extreme</code></td>
<td>
<p>character: the method used to modify the extreme proportions. Possible values are <code>"constraint"</code> (default) or <code>"add"</code>. See <b>Details</b>.</p>
</td></tr>
<tr><td><code id="deltaPlot_+3A_const.range">const.range</code></td>
<td>
<p>numeric: a vector of two constraining proportions. Default values are 0.001 and 0.999. Ignored if <code>extreme</code> is <code>"add"</code>.</p>
</td></tr>
<tr><td><code id="deltaPlot_+3A_nradd">nrAdd</code></td>
<td>
<p>integer: the number of successes and the number of failures to add to the data in order to adjust the proportions. Default value is 1. Ignored if <code>extreme</code> is <code>"constraint"</code>.</p>
</td></tr>
<tr><td><code id="deltaPlot_+3A_save.output">save.output</code></td>
<td>
<p>logical: should the output be saved into a text file? (Default is <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="deltaPlot_+3A_output">output</code></td>
<td>
<p>character: a vector of two components. The first component is the name of the output file (<code>"out"</code> by default), the second component is either the file path or <code>"default"</code> (default value). See <b>Details</b>.</p>
</td></tr>
<tr><td><code id="deltaPlot_+3A_x">x</code></td>
<td>
<p>an object of class <code>"deltaPlot"</code>, typically the output of the <code>deltaPlot</code> function.</p>
</td></tr>
<tr><td><code id="deltaPlot_+3A_only.final">only.final</code></td>
<td>
<p>logical: should only the first and last steps of the purification process be printed? (default is <code>TRUE</code>. If <code>FALSE</code> all perpendicular distances, parameters of the major axis, and detection thresholds are printed additionally. Ignored if <code>purify</code> is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="deltaPlot_+3A_...">...</code></td>
<td>
<p>other generic parameters for the <code>plot</code> or the <code>print</code> functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Angoff's Delta plot (Angoff and Ford, 1973) is a straightforward test-score method to detect DIF among dichotomously scored items. Proportions of correct responses are computed first per item and per group of respondents, and are successively transformed onto <em>z</em>-scores and then onto <code class="reqn">\Delta</code> scores. The pairs of <code class="reqn">\Delta</code> scores can
be displayed onto a scatter plot, called the <em>Delta plot</em>, and the majr axis of the ellipsoid of Delta points is
derived. Eventually, items whose perpendicular distance (from the major axis) is too large are flagged as DIF. See Angoff and Ford (1973) for further details.
</p>
<p>The data must be passed through the argument <code>data</code> and can be of three types. Each type is defined by the 
<code>type</code> argument and can take three values: <code>"response"</code>, <code>"prop"</code> and <code>"delta"</code>.
</p>

<ul>
<li><p> If <code>type</code> is <code>"response"</code>, the input <code>data</code> consist in a matrix with one row per respondent and
<code class="reqn">J+1</code> columns, where <code class="reqn">J</code> is the number of items. In the colmuns coding for the items, only possible entries are 0
(for incorrect responses), 1 (for corect responses) and <code>NA</code> (for missing values). The extra column is used to
define group membership: all respondents of the reference group take the same value (either numeric or character), and all respondents in the focal group take the same (numeric or character) value but different from the reference group. Note 
that the group membership column can be located anywhere in the data set (not especially in first or last position).
</p>
</li>
<li><p> If <code>type</code> is <code>"prop"</code>, the input <code>data</code> consist in a two-column matrix with one row per item. Each
row contains the proportions of correct responses, respectively in the reference group (first column) and in the focal group (second column). 
</p>
</li>
<li><p> If <code>type</code> is <code>"delta"</code>, the input <code>data</code> consist in a two-column matrix that is similar to that
provided with the <code>"prop"</code> type of input, but with the Delta scores provided instead of the proportions of correct
responses.
</p>
</li></ul>

<p>If the <code>type</code> of input is either <code>"prop"</code> or <code>"delta"</code>, not anymore input information is required and the
arguments <code>group</code> and <code>focal.bname</code> are ignored. Otherwise, the group membership column in the <code>data</code>
matrix is specified by giving to argument <code>group</code> either the column number (1 for first column, etc.) or the column
name (provided the <code>data</code> matrix has argument names). Moreover, the focal group is specified by giving to the
argument <code>focal.name</code> the value that was used in the group membership column to code for the focal group.
</p>
<p>If the input <code>type</code> is not <code>"delta"</code>, then extreme proportions of correct responses (either provided when 
<code>type</code> is <code>"prop"</code> or computed from the data if <code>type</code> is <code>"response"</code>) are adjusted by specifying
the arguments <code>extreme</code>, <code>const.range</code> and <code>nrAdd</code> with appropriate values. See the <code><a href="#topic+adjustExtreme">adjustExtreme</a></code> function for further details (note that the cuyrrent <code>extreme</code> argument corresponds to the <code>method</code> argument in this function).
</p>
<p>The threshold for flaging items as DIF can be of two types and is specified by the <code>thr</code> argument.
</p>

<ol>
<li><p> It can be fixed to some arbitrary positive value by the user, for instance 1.5 (Angoff and Ford, 1973). In this 
case, <code>thr</code> takes the required numeric threshold value.
</p>
</li>
<li><p> Alternatively, it can be derived from the bivariate normal approximation of the Delta points (Magis and Facon, 2012). In this case, <code>thr</code> must be given the character value <code>"norm"</code> (which is the default value).
This threshold equals
</p>
<p style="text-align: center;"><code class="reqn">\Phi^{-1}(1-\alpha/2) \; \sqrt{\frac{b^2\,{s_0}^2-2\,b\,s_{01}+{s_1}^2}{b^2+1}}</code>
</p>

<p>where <code class="reqn">\Phi</code> is the density of the standard normal distribution, <code class="reqn">\alpha</code> is the significance level (set by the argument <code>alpha</code> with default value 0.05), <code class="reqn">b</code> is the slope parameter of the major axis, <code class="reqn">s_0</code> and <code class="reqn">s_1</code>
are the sample standard deviations of the Delta scores in the reference group and the focal group, respecively, and
<code class="reqn">s_{01}</code> is the sample covariance of the Delta scores (see Magis and Facon, 2012, for further details).
</p>
</li></ol>

<p>Item purification can be performed by setting the argument <code>purify</code> to <code>TRUE</code> (by default it is <code>FALSE</code> so 
no purification is performed). The item purification process (IPP) starts when at least one item was flagged as DIF after
the first run of the Delta plot, and proceeds as follows.
</p>

<ol>
<li><p> The intercept and slope parameters of the major axis are re-calculated by removing all DIF that are currently 
flagged as DIF. This yields updated values <code class="reqn">a^*</code>, <code class="reqn">b^*</code>, <code class="reqn">s_0^*</code>, <code class="reqn">s_1^*</code> and <code class="reqn">s_{01}^*</code> of the 
intercept and slope parameters, sample stanbdard deviations and sample covariance of the Delta scores.
</p>
</li>
<li><p> Perpendicular distances (for all items) are updated with respect to the updated major axis.
</p>
</li>
<li><p> Detection threshold is also updated. Three possible updates are possible: see below.
</p>
</li>
<li><p> All items are now tested for the presence of DIF, given the updated perpendicular distances and major axis.
</p>
</li>
<li><p> If the set of items flagged as DIF is the same as the one from the previous loop, stop the process. Otherwise go
back to step 1.
</p>
</li></ol>

<p>Unlike traditional DIF methods, the detection threshold may also be updated since it depends on the sample estimates (when 
the normal approximation is considered). Three approaches are currently implemented and are specified by the <code>purType</code> argument.
</p>

<ol>
<li><p> Method 1 (<code>purType=="IPP1"</code>): the same threshold is used throughout the purification process, it is not
iteratively updated. The threshold is the one obtained after the first run of the Delta plot.
</p>
</li>
<li><p> Method 2 (<code>purType=="IPP2"</code>): only the slope parameter is updated in the threshold formula. By this way, one keeps the full data structure (i.e. neither the sample variances nor the sample covariance of the Delta scores are 
modified) but only the slope parameter is adjusted to lessen the impact of DIF items.
</p>
</li>
<li><p> Method 3 (<code>purType=="IPP3"</code>): all adjusted parameters are plugged in the threshold formula. This approach
completely discards the effect of items flagged as DIF from the computation of the threshold.
</p>
</li></ol>

<p>See Magis and Facon (2013) for further details. Note that purification can also be performed with fixed threshold (i.e.
specified by the user), but then only IPP1 process is performed.
</p>
<p>In order to avoid possible infinite loops in the purification process, a maximal number of iterations must be specified
through the argument <code>maxIter</code>. The default maximal number of iterations is 10. 
</p>
<p>The output contains all input information, the Delta scores and perpendicular distances, the parameter of the major axis
and the items flagged as DIF (if none, a character sentence is returned). In addition, the detection threshold and the
type of threshold (fixed or normal approximation) is provided. 
</p>
<p>If item purification was run, several additional elements are returned: the number of iterations, a logical indicator
whether the convergence was reached (or not, meaning that the process stopped because of reaching the maximal number of 
allowed iterations), a matrix with indicators of which items were flagged as DIF at each iteration, and the type of item
purification process. Moreover, perpendicular distances are returned in a matrix format (one column per iteration), as
well as successive major axis parameters (one row per iteration) and successive thresholds (as a vector).
</p>
<p>The output is managed and printed in a more user-friendly way. When item purification is performed, only the first and
last steps are displayed. Specifying the argument <code>only.final</code> to <code>FALSE</code> prints in addition all intermediate steps of the process (successive perpendicular distances, parameters of the major axis, and detection thresholds).
</p>
<p>The output can be saved into na text file by specifying the argument <code>save.output</code> to <code>TRUE</code> (by default the 
output is not captured). If so, the argument <code>output</code> can be specified as a vector of two character values. The first
one gives the desired name of the text file, and the second one specifies the directory where the file will be saved (full
path is required but without the final &quot;/&quot; symbol, see <b>Examples</b> below). By default, the output will be saved in the current working directory as &quot;out.txt&quot; file.
</p>


<h3>Value</h3>

<p>A list of class <code>"deltaPlot"</code> with the following arguments:
</p>
<table>
<tr><td><code>Props</code></td>
<td>
<p>the matrix of proportions of correct responses, or <code>NA</code> if <code>type</code> is <code>"delta"</code>.</p>
</td></tr>
<tr><td><code>adjProps</code></td>
<td>
<p>the restricted proportions, in the same format as the output <code>Props</code> matrix, or <code>NA</code> if <code>type</code> is <code>"delta"</code>.</p>
</td></tr>
<tr><td><code>Deltas</code></td>
<td>
<p>the matrix of Delta scores.</p>
</td></tr>
<tr><td><code>Dist</code></td>
<td>
<p>a matrix with perpendicular distances, one row per item and one column per run of the Delta plot. If <code>purify</code> is <code>FALSE</code>, only a single column is returned.</p>
</td></tr>
<tr><td><code>axis.par</code></td>
<td>
<p>a matrix with two columns, holding respectively the intercepts and the slope parameters of the major axis. Each row refers to one step of the purification process. If <code>purify</code> is <code>FALSE</code>, only a single row is returned.</p>
</td></tr>
<tr><td><code>nrIter</code></td>
<td>
<p>the number of iterations invloved in the purification process. Returned only if <code>purify</code> is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code>maxIter</code></td>
<td>
<p>the value of the <code>maxIter</code> argument. Returned only if <code>purify</code> is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code>convergence</code></td>
<td>
<p>a logical value indicating whether convergence was reached in the purification process. Returned only if <code>purify</code> is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code>difPur</code></td>
<td>
<p>a matrix with one column per item and one row per iteration in the purification process, holding zeros and ones to indicate which items were flagged as DIF or not at each step of the process. Returned only if <code>purify</code> is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code>thr</code></td>
<td>
<p>a vector of successive threshold values used during the purification process. If <code>purify</code> is <code>FALSE</code>, a single value is returned.</p>
</td></tr>
<tr><td><code>rule</code></td>
<td>
<p>a character value indicating whether the threshold was <code>"fixed"</code> by the user (i.e. by setting <code>thr</code> to a numeric value) or whether it was computed by normal approximation (i.e. by setting <code>thr</code> to <code>"norm"</code>).</p>
</td></tr>
<tr><td><code>purType</code></td>
<td>
<p>the value of the <code>purType</code> argument. Returned only if <code>purify</code> is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code>DIFitems</code></td>
<td>
<p>either <code>"No DIF item detected"</code> or an integer vector with the items that were flagged as DIF.</p>
</td></tr>
<tr><td><code>adjust.extreme</code></td>
<td>
<p>the value of the <code>extreme</code> argument.</p>
</td></tr>
<tr><td><code>const.range</code></td>
<td>
<p>the value of the <code>const.range</code> argument.</p>
</td></tr>
<tr><td><code>nrAdd</code></td>
<td>
<p>the value of the <code>nrAdd</code> argument.</p>
</td></tr>
<tr><td><code>purify</code></td>
<td>
<p>the value of the <code>purify</code> argument.</p>
</td></tr>
<tr><td><code>alpha</code></td>
<td>
<p>the value of the <code>alpha</code> argument.</p>
</td></tr>
<tr><td><code>save.output</code></td>
<td>
<p>the value of the <code>save.output</code> argument.</p>
</td></tr>
<tr><td><code>output</code></td>
<td>
<p>the value of the <code>output</code> argument.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>David Magis <br />
Post-doc Fellow of the National Funds for Scientific Research (FNRS, Belgium) <br />
University of Liege <br />
<a href="mailto:David.Magis@ulg.ac.be">David.Magis@ulg.ac.be</a>, <a href="http://ppw.kuleuven.be/okp/home/">http://ppw.kuleuven.be/okp/home/</a> <br />
Bruno Facon<br />
Professor, Department of Psychology <br />
Universite Lille-Nord de France<br />
<a href="mailto:bruno.facon@univ-lille3.fr">bruno.facon@univ-lille3.fr</a>, <br /> 
</p>


<h3>References</h3>

<p>Angoff, W. H. and Ford, S. F. (1973). Item-race interaction on a test of scholastic aptitude. <em>Journal of
Educational Measurement</em>, 10, 95-106.
</p>
<p>Magis, D., and Facon, B. (2012). Angoff's Delta method revisited: improving the DIF detection under small samples.
<em>British Journal of Mathematical and Statistical Psychology, 65</em>, 302-321.
</p>
<p>Magis, D., and Facon, B. (2013). Item purification does not always improve DIF detection: a counter-example with Angoff's Delta plot. <em>Educational and Psychological Measurement, 73</em>, 293-311.
</p>
<p>Magis, D. and Facon, B. (2014). <em>deltaPlotR</em>: An R Package for Differential Item Functioning Analysis with Angoff's Delta Plot. <em>Journal of Statistical Software, Code Snippets, 59(1)</em>, 1-19. URL <a href="http://www.jstatsoft.org/v59/c01/">http://www.jstatsoft.org/v59/c01/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+adjustExtreme">adjustExtreme</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 # Loading of the verbal data
 data(verbal)
 attach(verbal)

 # Excluding the "Anger" variable
 verbal &lt;- verbal[colnames(verbal)!="Anger"]

 # Basic Delta plot, threshold 1.5, no item purification
 res &lt;- deltaPlot(data=verbal, type="response", group=25, focal.name=1, purify=FALSE, 
                  thr=1.5)

 # Equivalent writing
 res &lt;- deltaPlot(data=verbal, type="response", group="Gender", focal.name=1, 
                  purify=FALSE, thr=1.5)

 # Using proportions of correct responses as input
 dataRef &lt;- verbal[verbal[,25]==0,1:24]
 dataFoc &lt;- verbal[verbal[,25]==1,1:24]
 p0 &lt;- colMeans(dataRef)
 p1 &lt;- colMeans(dataFoc)
 res.1 &lt;- deltaPlot(data=cbind(p0,p1), type="prop", purify=FALSE, thr=1.5)

 # Using Delta values as input
 Delta &lt;- 4*qnorm(1-cbind(p0,p1))+13
 res.2 &lt;- deltaPlot(data=Delta, type="delta", purify=FALSE, thr=1.5)

 # 'norm' threshold
 res &lt;- deltaPlot(data=verbal, type="response", group="Gender", focal.name=1, 
                  purify=FALSE, thr="norm")

 # Keeping the first 10 items to exhibit DIF
 data &lt;- verbal[,c(1:10,25)]
 deltaPlot(data=data, type="response", group=11, focal.name=1, purify=FALSE, thr="norm")
   # Item 8 is flagged as DIF

 # Item purification with the three processes
 res0 &lt;- deltaPlot(data=data, type="response", group=11, focal.name=1, purify=TRUE, 
           thr=1.5, purType="IPP1") 
 res0 # No DIF item detected

 res1 &lt;- deltaPlot(data=data, type="response", group=11, focal.name=1, purify=TRUE, 
           thr="norm", purType="IPP1") 
 res1 # Item 8 flagged as DIF after 2 iterations

 res2 &lt;- deltaPlot(data=data, type="response", group=11, focal.name=1, purify=TRUE, 
           thr="norm", purType="IPP2") 
 res2 # Item 8 flagged as DIF after 2 iterations

 res3 &lt;- deltaPlot(data=data, type="response", group=11, focal.name=1, purify=TRUE, 
           thr="norm", purType="IPP3") 
 res3 # Items 6, 7 and 8 flagged as DIF after 4 iterations

 # Printing the full results of item purification
 print(res, only.final=FALSE)
 print(res0, only.final=FALSE)
 print(res1, only.final=FALSE)
 print(res2, only.final=FALSE)
 print(res3, only.final=FALSE)
</code></pre>

<hr>
<h2 id='diagPlot'>Plot of the Deltas points from the Delta Plot method</h2><span id='topic+diagPlot'></span>

<h3>Description</h3>

<p>This command plots the output of the <code><a href="#topic+deltaPlot">deltaPlot</a></code> function as a diagonal plot of Deltas points. Several 
graphical options are available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diagPlot(x, pch = 2, pch.mult = 17, axis.draw = TRUE, thr.draw = FALSE, 
 dif.draw = c(1,3), print.corr = FALSE, xlim = NULL, ylim = NULL, xlab = NULL, 
 ylab = NULL,main = NULL, save.plot = FALSE, 
 save.options = c("plot", "default", "pdf"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="diagPlot_+3A_x">x</code></td>
<td>
<p>an object of class <code>"deltaPlot"</code>, typically the output of the <code><a href="#topic+deltaPlot">deltaPlot</a></code> function.</p>
</td></tr>
<tr><td><code id="diagPlot_+3A_pch">pch</code></td>
<td>
<p>integer: the usual point character type for point display. Default value is 2, that is, Delta points are 
drawn as empty triangles.</p>
</td></tr>
<tr><td><code id="diagPlot_+3A_pch.mult">pch.mult</code></td>
<td>
<p>integer: the typoe of point to be used for superposing onto Delta points that correspond to several
items. Default value is 17, that is, full black traingles are drawn onto existing Delta plots wherein
multiple items are located.</p>
</td></tr>
<tr><td><code id="diagPlot_+3A_axis.draw">axis.draw</code></td>
<td>
<p>Logical: should the major axis be drawn? (default is <code>TRUE</code>). If so, it will be drawn as a solid
line.</p>
</td></tr>
<tr><td><code id="diagPlot_+3A_thr.draw">thr.draw</code></td>
<td>
<p>logical: should the upper and lower bounds for DIF detection be drawn? (default is <code>FALSE</code>). If
<code>TRUE</code>, they will be drawn as dashed lines.</p>
</td></tr>
<tr><td><code id="diagPlot_+3A_dif.draw">dif.draw</code></td>
<td>
<p>numeric: a vector of two integer values to specify how the DIF items should be displayed. The first 
component of <code>dif.draw</code> is the type of point (i.e. the usual <code>pch</code> argument) and the second
component determlines the point size (i.e. the usual <code>cex</code> argument). Default values are 1 and 3,
meaning that empty circles of three time the usual size are drawn around the Delta points of items
flagged as DIF.</p>
</td></tr>
<tr><td><code id="diagPlot_+3A_print.corr">print.corr</code></td>
<td>
<p>Logical: should the sample correlation of Delta scores be printed? (default is <code>FALSE</code>). If
<code>TRUE</code>, it is printed in upper-left corner of the plot.</p>
</td></tr>
<tr><td><code id="diagPlot_+3A_xlim">xlim</code>, <code id="diagPlot_+3A_ylim">ylim</code>, <code id="diagPlot_+3A_xlab">xlab</code>, <code id="diagPlot_+3A_ylab">ylab</code>, <code id="diagPlot_+3A_main">main</code></td>
<td>
<p>either the usual plot arguments <code>xlim</code>, <code>ylim</code>, <code>xlab</code>, <code>ylab</code> and <code>main</code>, or <code>NULL</code> (default value for all arguments). If <code>NULL</code>, the X and Y axis limits are computed from the range of Delta scores, the X and Y axis labels are <code>"Reference group"</code> and <code>"Focal group"</code> respectively, and no main title is produced.</p>
</td></tr>
<tr><td><code id="diagPlot_+3A_save.plot">save.plot</code></td>
<td>
<p>logical: should the plot be saved in an external figure? (default is <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="diagPlot_+3A_save.options">save.options</code></td>
<td>
<p>character: a vector of three components. The first component is the name of the output file, 
the second component is either the file path (without final &quot;/&quot; symbol) or <code>"default"</code> (default), and the third component is the file extension, either <code>"pdf"</code> (default) or <code>"jpeg"</code>. Ignored if <code>save.plot</code> is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The results of the Delta plot method can be graphically displayed using this function. Basically the Delta plot displays the items in a scatter plot by means of their Delta points, and the major axis is drawn. Several options permit to
enhance this basic plot.
</p>
<p>The input data <code>x</code> must be a list of class <code>deltaPlot</code>, so typically the output of the <code><a href="#topic+deltaPlot">deltaPlot</a></code> function. All other argumpents are rather standard and for optimization of the graphical display.
</p>
<p>The type of point is defined by the <code>cex</code> argument. It takes the default value 2, which means that items are 
displayed with empty triangles. If several items are located on exactly the same Delta point, the <code>pch.mult</code> 
argument defines the type of point to display bover the existing point. The default value is 17, that is, a full black
triangle. In this way, multiple items located at a single Delta point can easily be located on the plot.
</p>
<p>Two types of axes can be draw: the major axis and the upper and lower bounds for DIF detection. The major axis is drawn by
default, while the upper and lower bounds are not. The major axis can be withdrawn by setting the argument <code>axis.draw</code> to <code>FALSE</code>, and the bounds can be displayed by setting the argument <code>thr.draw</code> to <code>TRUE</code>. The major axis is always drawn by a solid line, the bounds by dashed lines.
</p>
<p>Items flagged as DIF are also clearly identified on the plot. The argument <code>dif.draw</code> defines both the type of point
and the size of the point to draw over the existing Delta points (for items flagged as DIF only). The defaulkt value is
<code>c(1,3)</code>, meaning that empty circles three times larger than usual are drawn. 
</p>
<p>The sample correlation between the Delta scores can also be printed, in the upper-left corner of the plot. To do this, 
the argument <code>print.corr</code> must be set to  <code>TRUE</code>.
</p>
<p>Finally, the function will automatically determines the X and Y axis limits and specifies default labels for X and Y axes and the main title. These can also be specified by the user, using the usual <code>xlim</code>, <code>ylim</code>, <code>xlab</code>, <code>ylab</code> and <code>main</code> arguments.
</p>
<p>The plot can be saved in an external file, either as PDF or JPEG format. First, the argument <code>save.plot</code> must be set
to <code>TRUE</code> (default is <code>FALSE</code>). Then, the name of the figure, its location and format are specified through 
the argument <code>save.options</code>, all as character strings. See the <b>Examples</b> section for further information and a 
practical example. 
</p>


<h3>Author(s)</h3>

<p>David Magis <br />
Post-doc Fellow of the National Funds for Scientific Research (FNRS, Belgium) <br />
University of Liege <br />
<a href="mailto:David.Magis@ulg.ac.be">David.Magis@ulg.ac.be</a>, <a href="http://ppw.kuleuven.be/okp/home/">http://ppw.kuleuven.be/okp/home/</a> <br />
Bruno Facon<br />
Professor, Department of Psychology <br />
Universite Lille-Nord de France<br />
<a href="mailto:bruno.facon@univ-lille3.fr">bruno.facon@univ-lille3.fr</a>, <br /> 
</p>


<h3>References</h3>

<p>Angoff, W. H. and Ford, S. F. (1973). Item-race interaction on a test of scholastic aptitude. <em>Journal of
Educational Measurement</em>, 10, 95-106.
</p>
<p>Magis, D., and Facon, B. (2012). Angoff's Delta method revisited: improving the DIF detection under small samples.
<em>British Journal of Mathematical and Statistical Psychology, 65</em>, 302-321.
</p>
<p>Magis, D., and Facon, B. (2013). Item purification does not always improve DIF detection: a counter-example with Angoff's Delta plot. <em>Educational and Psychological Measurement, 73</em>, 293-311.
</p>
<p>Magis, D. and Facon, B. (2014). <em>deltaPlotR</em>: An R Package for Differential Item Functioning Analysis with Angoff's Delta Plot. <em>Journal of Statistical Software, Code Snippets, 59(1)</em>, 1-19. URL <a href="http://www.jstatsoft.org/v59/c01/">http://www.jstatsoft.org/v59/c01/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+deltaPlot">deltaPlot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 # Loading of the verbal data
 data(verbal)
 attach(verbal)

 # Excluding the "Anger" variable
 verbal &lt;- verbal[colnames(verbal)!="Anger"]

 # Basic Delta plot, threshold 1.5, no item purification
 res &lt;- deltaPlot(data=verbal, type="response", group=25, focal.name=1, purify=FALSE, 
                  thr=1.5)

 # Keeping the first 10 items to exhibit DIF
 data &lt;- verbal[,c(1:10,25)]
 res0 &lt;- deltaPlot(data=data, type="response", group=11, focal.name=1, purify=FALSE,
  thr="norm")
 res0 # Item 8 is flagged as DIF

 res1 &lt;- deltaPlot(data=data, type="response", group=11, focal.name=1, purify=TRUE, 
           thr="norm", purType="IPP3") 
 res1 # Items 6, 7 and 8 flagged as DIF after 4 iterations

 # Delta plot, default options
 diagPlot(res)
 diagPlot(res0)
 diagPlot(res1)

 # Drawing upper and lower bounds and removing the major axis
 diagPlot(res, axis.draw=FALSE, thr.draw=TRUE)
 diagPlot(res1, axis.draw=FALSE, thr.draw=TRUE)

 # Modifying the type of points for all and for DIF items
 diagPlot(res, pch=3, dif.draw=c(2,4))
 diagPlot(res1, pch=3, dif.draw=c(2,4))

 # Printing the correlation and modifying the axis limits
 diagPlot(res, xlim=c(9,20), ylim=c(9,20), print.corr=TRUE)
 diagPlot(res1, xlim=c(9,17), print.corr=TRUE)

 # Saving the plots as PDF and JPEG files, default folder, specific names
 diagPlot(res, save.plot=TRUE, save.options=c("res","default","pdf"))
 diagPlot(res1, save.plot=TRUE, save.options=c("res1","default","jpeg"))

 # Modifying the results to make two items be located on the same place
 res2&lt;-res1
 res2$Deltas[9,]&lt;-res2$Deltas[3,]
 diagPlot(res2)
</code></pre>

<hr>
<h2 id='verbal'>Verbal Aggression Data Set</h2><span id='topic+verbal'></span>

<h3>Description</h3>

<p>The Verbal Aggression data set comes from Vansteelandt (2000) and is made of the responses of 316 subjects (243 women  and 73 men) to a questionnaire of 24 items, about verbal aggression. All items describe a frustrating situation together with a verbal agression response. A correct answer responses is coded as 0 and 1, a value of one meaning that the subject would (want to) respond to the frustrating situation in an aggressive way. In addition, the <em>Trait Anger</em> score (Spielberger, 1988) was computed for each subject.
</p>


<h3>Format</h3>

<p>The <code>verbal</code> matrix consists of 316 rows (one per subject) and 26 columns. 
</p>
<p>The first 24 columns hold the responses to the dichotomously scored items. The 25th column holds the trait anger score for each subject. The 26th column is vector of the group membership; values 0 and 1 refer to women and men, respectively.
</p>
<p>Each item name starts with <code>S</code> followed by a value between 1 and 4, referring to one of the situations below:
</p>
<p><em>S1</em>: A bus fails to stop for me.
</p>
<p><em>S2</em>: I miss a train because a clerk gave me faulty information.
</p>
<p><em>S3</em>: The grocery store closes just as I am about to enter.
</p>
<p><em>S4</em>: The operator disconnects me when I had used up my last 10 cents for a call.
</p>
<p>The second part of the name is either <em>Want</em> or <em>Do</em>, and indicates whether the subject wanted to respond to the situation or actually did respond. 
</p>
<p>The third part of the name is one of the possible aggressive responses, either <em>Curse</em>, <em>Scold</em> or <em>Shout</em>.
</p>
<p>For example, item <code>S1WantShout</code> refers to the sentence: &quot;a bus fails to stop for me. I want to shout&quot;. The corresponding
item response is 1 if the subject agrees with that sentence, and 0 if not.
</p>


<h3>Note</h3>

<p>This data set was originally included in the <code>difR</code> package (Magis, Beland and Raiche, 2012). It is reproduced here for illustrative purposes.
</p>


<h3>Source</h3>

<p>The Verbal agression data set is taken originally from Vansteelandt (2000) and has been used as an illustrative example in De Boeck (2008), De Boeck and Wilson (2004) and Smits, De Boeck and Vansteelandt (2004), among others. The following URL <em>http://bear.soe.berkely.edu/EIRM/</em> permits to get access to the full data set.
</p>


<h3>References</h3>

<p>De Boeck, P. (2008). Random item IRT models. <em>Psychometrika, 73</em>, 533-559.
</p>
<p>De Boeck, P. and Wilson, M. (2004). <em>Explanatory item response models: a generalized linear and nonlinear approach</em>. New-York: Springer.
</p>
<p>Magis, D., Beland, S. and Raiche, G. (2012). <em>difR:
Collection of methods to detect dichotomous differential item functioning (DIF) in psychometrics</em>. R package version 4.2.
</p>
<p>Magis, D., Beland, S., Tuerlinckx, F. and De Boeck, P. (2010). A general framework and an R package for the detection
of dichotomous differential item functioning. <em>Behavior Research Methods, 42</em>, 847-862.
</p>
<p>Smits, D., De Boeck, P. and Vansteelandt, K. (2004). The inhibition of verbal aggressive behavior. <em>European Journal of Personality, 18</em>, 537-555.
</p>
<p>Spielberger, C.D. (1988). <em>State-trait anger expression inventory research edition. Professional manual</em>. Odessa, FL: Psychological Assessment Resources.
</p>
<p>Vansteelandt, K. (2000). <em>Formal models for contextualized personality psychology</em>. Unpublished doctoral dissertation, K.U. Leuven, Belgium.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
