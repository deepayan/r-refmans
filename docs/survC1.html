<!DOCTYPE html><html><head><title>Help for package survC1</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {survC1}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#CompCase'><p>Creates complete case data</p></a></li>
<li><a href='#conc'><p>A child function to calcuate concordance</p></a></li>
<li><a href='#cvC'><p>Cross-validation estimate for C</p></a></li>
<li><a href='#Est.Cval'><p>Esimtation of C</p></a></li>
<li><a href='#Est.PH'><p>Derivation of a risk score by a Cox proportioal hazarzs model</p></a></li>
<li><a href='#Inf.Cval'><p>Inference of C</p></a></li>
<li><a href='#Inf.Cval.Delta'><p>Inference of Delta C</p></a></li>
<li><a href='#kmcens'><p>Kaplan-Meier for Censoring</p>
</a></li>
<li><a href='#survC1-package'><p>C-Statistics for Risk Prediction Models with Censored Survival Data</p></a></li>
<li><a href='#unoCW'><p>A child function used in Inf.Cval and Inf.Cval.Delta</p></a></li>
<li><a href='#unoU2P'><p>A child function used in Inf.Cval and Inf.Cval.Delta</p></a></li>
<li><a href='#VEC2MAT'><p>Vector to Matrix</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>C-Statistics for Risk Prediction Models with Censored Survival
Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0-3</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-02-10</td>
</tr>
<tr>
<td>Author:</td>
<td>Hajime Uno</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hajime Uno &lt;huno@jimmy.harvard.edu&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>survival</td>
</tr>
<tr>
<td>Description:</td>
<td>Performs inference for C of risk prediction models with censored survival data, using the method proposed by Uno et al. (2011) &lt;<a href="https://doi.org/10.1002%2Fsim.4154">doi:10.1002/sim.4154</a>&gt;. Inference for the difference in C between two competing prediction models is also implemented.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-02-10 16:16:33 UTC; miki</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-02-10 16:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='CompCase'>Creates complete case data</h2><span id='topic+CompCase'></span>

<h3>Description</h3>

<p>Creates a complete-case data set, removing subjects with any missing value in the outcome or predictors</p>


<h3>Usage</h3>

<pre><code class='language-R'>CompCase(mydata)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="CompCase_+3A_mydata">mydata</code></td>
<td>

<p>A data matrix that consists of numeric data. No character data is allowed.
</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>D=CompCase(pbc[,c(2:4,10:14)])
</code></pre>

<hr>
<h2 id='conc'>A child function to calcuate concordance
</h2><span id='topic+conc'></span>

<h3>Description</h3>

<p>This is a child function (R-wrapper) called in the main functions in this package. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>conc(X, D, W, R)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="conc_+3A_x">X</code></td>
<td>
<p>time
</p>
</td></tr>
<tr><td><code id="conc_+3A_d">D</code></td>
<td>
<p>event indicator (1:event, 0:censor)
</p>
</td></tr>
<tr><td><code id="conc_+3A_w">W</code></td>
<td>
<p>weight
</p>
</td></tr>
<tr><td><code id="conc_+3A_r">R</code></td>
<td>
<p>risk score
</p>
</td></tr>
</table>

<hr>
<h2 id='cvC'>Cross-validation estimate for C</h2><span id='topic+cvC'></span>

<h3>Description</h3>

<p>Provides a cross-validation estimate for C</p>


<h3>Usage</h3>

<pre><code class='language-R'>cvC(mydata, tau, cvK = 10, Rep = 10)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cvC_+3A_mydata">mydata</code></td>
<td>

<p>Input data. The 1st column should be time-to-event, and the 2nd column is event indicator (1=event, 0=censor). The rest of the columns are covariates/predictors used in the model. No character variable or missing is allowed. 
</p>
</td></tr>
<tr><td><code id="cvC_+3A_tau">tau</code></td>
<td>
<p>Truncation time. The resulting C tells how well the given prediction model works in predicting events that occur in the time range from 0 to <code>tau</code>. Note that the survival function for the underlying censoring time distribution needs to be positive at <code>tau</code>. 
</p>
</td></tr>
<tr><td><code id="cvC_+3A_cvk">cvK</code></td>
<td>

<p>The number of fold. A K-fold cross-validation is performed, according to the number given for <code>cvK</code>. Generally, a value from 2 to 10 will be specified.
</p>
</td></tr>
<tr><td><code id="cvC_+3A_rep">Rep</code></td>
<td>

<p>The number of iteration of the random splits for the K-fold cross-validation. The average of the <code>Rep</code> times of <code>cvK</code>-fold cross-validation estimates is provided as a resulting estimate for C.
</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
D=CompCase(pbc[,c(2:4,10:14)]) 
D[,2]=as.numeric(D[,2]==2)

tau=365.25*8

model1=D[1:200,c(1,2,4)]

cvC(model1,tau,cvK=2,Rep=10)

</code></pre>

<hr>
<h2 id='Est.Cval'>Esimtation of C</h2><span id='topic+Est.Cval'></span>

<h3>Description</h3>

<p>Performs a point estimation of C
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Est.Cval(mydata, tau, nofit=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Est.Cval_+3A_mydata">mydata</code></td>
<td>

<p>Input data. The 1st column should be time-to-event, and the 2nd column is event indicator (1=event, 0=censor). The rest of the columns are covariates/predictors used in the model. No character variable or missing is allowed. 
</p>
</td></tr>
<tr><td><code id="Est.Cval_+3A_tau">tau</code></td>
<td>
<p>Truncation time. The resulting C tells how well the given prediction model works in predicting events that occur in the time range from 0 to <code>tau</code>. Note that the survival function for the underlying censoring time distribution needs to be positive at <code>tau</code>. 
</p>
</td></tr>
<tr><td><code id="Est.Cval_+3A_nofit">nofit</code></td>
<td>
<p>If <code>TRUE</code>, the 3rd column of <code>mydata</code> is used as the risk score directly in calculation of C. The default is <code>FALSE</code>.
</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>Dhat</code></td>
<td>
<p>Estimate of C</p>
</td></tr>
<tr><td><code>beta</code></td>
<td>
<p>Estimates for regression coefficient in the Cox model</p>
</td></tr>
<tr><td><code>beta.var</code></td>
<td>
<p>Variance-Covariance matrix for <code>beta</code> above</p>
</td></tr>
<tr><td><code>rs</code></td>
<td>
<p>Risk score of each individial</p>
</td></tr>
<tr><td><code>ft</code></td>
<td>
<p><code>coxph</code> object with the fitted model</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
D=CompCase(pbc[1:200,c(2:4,10:14)]) 
D[,2]=as.numeric(D[,2]==2)
tau=365.25*8
model=D[,c(1,2,4,5)]

Est.Cval(model, tau)$Dhat

</code></pre>

<hr>
<h2 id='Est.PH'>Derivation of a risk score by a Cox proportioal hazarzs model
</h2><span id='topic+Est.PH'></span>

<h3>Description</h3>

<p>Provides risk score by fitting data to a Cox's proportional hazards model with a given set of predictors.</p>


<h3>Usage</h3>

<pre><code class='language-R'>Est.PH(mydata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Est.PH_+3A_mydata">mydata</code></td>
<td>

<p>Input data. The 1st column should be time-to-event, and the 2nd column is event indicator (1=event, 0=censor). The rest of the columns are covariates/predictors used in the model. No character variable or missing is allowed. 
</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>beta</code></td>
<td>
<p>Estimates for regression coefficient in the Cox model</p>
</td></tr>
<tr><td><code>var</code></td>
<td>
<p>Variance-Covariance matrix for the beta above</p>
</td></tr>
<tr><td><code>rs</code></td>
<td>
<p>Risk score of each individual</p>
</td></tr>
<tr><td><code>ft</code></td>
<td>
<p><code>coxph</code> object with the fitted model</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>D=CompCase(pbc[1:200,c(2:4,10:14)]) 
D[,2]=as.numeric(D[,2]==2)

ft=Est.PH(D)

</code></pre>

<hr>
<h2 id='Inf.Cval'>Inference of C
</h2><span id='topic+Inf.Cval'></span>

<h3>Description</h3>

<p>Performes the inference for C
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Inf.Cval(mydata, tau, itr = 1000, seed = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Inf.Cval_+3A_mydata">mydata</code></td>
<td>

<p>Input data. The 1st column should be time-to-event, and the 2nd column is event indicator (1=event, 0=censor). The rest of the columns are covariates/predictors used in the model. No character variable or missing is allowed. 
</p>
</td></tr>
<tr><td><code id="Inf.Cval_+3A_tau">tau</code></td>
<td>
<p>Truncation time. The resulting C tells how well the given prediction model works in predicting events that occur in the time range from 0 to <code>tau</code>. Note that the survival function for the underlying censoring time distribution needs to be positive at <code>tau</code>. 
</p>
</td></tr>
<tr><td><code id="Inf.Cval_+3A_itr">itr</code></td>
<td>
<p>Iteration of perturbation-resampling. 
</p>
</td></tr>
<tr><td><code id="Inf.Cval_+3A_seed">seed</code></td>
<td>
<p>A seed for generating random numbers for the resampling. The default is NULL.
</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>Dhat</code></td>
<td>
<p>Estimate for C</p>
</td></tr>
<tr><td><code>se</code></td>
<td>
<p>Standard error estiamte</p>
</td></tr>
<tr><td><code>low95</code></td>
<td>
<p>Lower limit of a 0.95 two-sided confidence interval for C</p>
</td></tr>
<tr><td><code>upp95</code></td>
<td>
<p>Upper limit of a 0.95 two-sided confidence interval for C</p>
</td></tr>
<tr><td><code>ft</code></td>
<td>
<p><code>coxph</code> object with the fitted model</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
D=CompCase(pbc[1:200,c(2:4,10:14)]) 
D[,2]=as.numeric(D[,2]==2)

tau=365.25*8

C=Inf.Cval(D, tau, itr=200)
round(c(C$Dhat, C$se, C$low95, C$upp95), digits=3)

</code></pre>

<hr>
<h2 id='Inf.Cval.Delta'>Inference of Delta C
</h2><span id='topic+Inf.Cval.Delta'></span>

<h3>Description</h3>

<p>Performes the inference for the difference in C between two competing risk prediction models</p>


<h3>Usage</h3>

<pre><code class='language-R'>Inf.Cval.Delta(mydata, covs0, covs1, tau, itr = 1000, seed = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Inf.Cval.Delta_+3A_mydata">mydata</code></td>
<td>

<p>Input data. The 1st column should be time-to-event, and the 2nd column is event indicator (1=event, 0=censor). 
</p>
</td></tr>
<tr><td><code id="Inf.Cval.Delta_+3A_covs0">covs0</code></td>
<td>
<p>A matrix that consists of a set of predictors for a base model (Model 0)
</p>
</td></tr>
<tr><td><code id="Inf.Cval.Delta_+3A_covs1">covs1</code></td>
<td>
<p>A matrix that consists of a set of predictors for a new model (Model 1)
</p>
</td></tr>
<tr><td><code id="Inf.Cval.Delta_+3A_tau">tau</code></td>
<td>
<p>Truncation time. The resulting C tells how well the given prediction model works in predicting events that occur in the time range from 0 to <code>tau</code>. Note that the survival function for the underlying censoring time distribution needs to be positive at <code>tau</code>. 
</p>
</td></tr>
<tr><td><code id="Inf.Cval.Delta_+3A_itr">itr</code></td>
<td>
<p>Iteration of perturbation-resampling. 
</p>
</td></tr>
<tr><td><code id="Inf.Cval.Delta_+3A_seed">seed</code></td>
<td>
<p>A seed for generating random numbers for the resampling. The default is NULL.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A 4x3 matrix that consists of point estimates, standard error estiamtes, and lower and upper limits of 0.95 two-sided intervals for C of Model 1, Model 0 and that for the difference of C</p>


<h3>Examples</h3>

<pre><code class='language-R'>
D=CompCase(pbc[1:200,c(2:4,10:14)]) 
D[,2]=as.numeric(D[,2]==2)


model0&lt;-D[,c(1:2,4:5)] ; 
model1&lt;-D
covs1&lt;-as.matrix(model1[,c(-1,-2)])
covs0&lt;-as.matrix(model0[,c(-1,-2)])

tau=365.25*8

Delta=Inf.Cval.Delta(model0[,1:2], covs0, covs1, tau, itr=200)
round(Delta, digits=3)
</code></pre>

<hr>
<h2 id='kmcens'>Kaplan-Meier for Censoring

</h2><span id='topic+kmcens'></span>

<h3>Description</h3>

<p>This is a child function called in the main functions in this package. Specifically, this obtains the survival function for censroing time and gives quantities used in the perturbation-resampling method for C.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kmcens(time, status, tau)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kmcens_+3A_time">time</code></td>
<td>
<p>time to event variable
</p>
</td></tr>
<tr><td><code id="kmcens_+3A_status">status</code></td>
<td>
<p>indicator of event (1:event, 0: censor)
</p>
</td></tr>
<tr><td><code id="kmcens_+3A_tau">tau</code></td>
<td>
<p>see <code>cvK</code>
</p>
</td></tr>
</table>

<hr>
<h2 id='survC1-package'>C-Statistics for Risk Prediction Models with Censored Survival Data</h2><span id='topic+survC1-package'></span><span id='topic+survC1'></span>

<h3>Description</h3>

<p>Performes inference of overall adequecy of risk prediction models with censored survival data. 
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> survC1</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.0-3</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2021-02-10</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL-2</td>
</tr>
<tr>
 <td style="text-align: left;">
LazyLoad: </td><td style="text-align: left;"> yes</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Performs inference for C of risk prediction models with censored survival data, using the method proposed by Uno et al. (2011). Inference for the difference in C between two competing prediction models is also implemented.
</p>


<h3>Author(s)</h3>

<p>Hajime Uno
</p>
<p>Maintainer: Hajime Uno &lt;huno@jimmy.harvard.edu&gt;
</p>


<h3>References</h3>

<p>Hajime Uno, Tianxi Cai, Michael J. Pencina, Ralph B. D'Agostino, and LJ Wei. 
On the C-statistics for evaluating overall adequacy of risk prediction procedures
with censored survival data. Statistics in Medicine 2011, 30:1105-16. doi:10.1002/sim.4154
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#==============================================
# read sample data (PBC in survival package)
#==============================================
D=CompCase(pbc[1:200,c(2:4,10:14)]) 
D[,2]=as.numeric(D[,2]==2)

#==============================================
# Inference of C
#==============================================
tau=365.25*8
C=Inf.Cval(D, tau, itr=200)
round(c(C$Dhat, C$se, C$low95, C$upp95), digits=3)

#==============================================
# Inference of Delta C between 2 models
#==============================================
model0&lt;-D[,c(1:2,4:5)] ; 
model1&lt;-D
covs1&lt;-as.matrix(model1[,c(-1,-2)])
covs0&lt;-as.matrix(model0[,c(-1,-2)])

Delta=Inf.Cval.Delta(model0[,1:2], covs0, covs1, tau, itr=200)
round(Delta, digits=3)

#==============================================
# Point estimation via cross-validation
#==============================================
model1=D[,c(1,2,4)]

cvC(model1,tau,cvK=2,Rep=10)
    
</code></pre>

<hr>
<h2 id='unoCW'>A child function used in Inf.Cval and Inf.Cval.Delta
</h2><span id='topic+unoCW'></span>

<h3>Description</h3>

<p>This is a child function (R-wrapper) used in the main functions of this package. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unoCW(X, D, W, Wstar, RS, RSstar, REX, Chat)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unoCW_+3A_x">X</code></td>
<td>
<p>time
</p>
</td></tr>
<tr><td><code id="unoCW_+3A_d">D</code></td>
<td>
<p>event indicator (1:event, 0:censor)
</p>
</td></tr>
<tr><td><code id="unoCW_+3A_w">W</code></td>
<td>
<p>Weight used in calculating C
</p>
</td></tr>
<tr><td><code id="unoCW_+3A_wstar">Wstar</code></td>
<td>
<p>Weight used in calculating C (pertubed version)
</p>
</td></tr>
<tr><td><code id="unoCW_+3A_rs">RS</code></td>
<td>
<p>risk score
</p>
</td></tr>
<tr><td><code id="unoCW_+3A_rsstar">RSstar</code></td>
<td>
<p>risk score (perturbed version)
</p>
</td></tr>
<tr><td><code id="unoCW_+3A_rex">REX</code></td>
<td>
<p>Random numbers assinged to each individual for the perturbation-resmapling method
</p>
</td></tr>
<tr><td><code id="unoCW_+3A_chat">Chat</code></td>
<td>
<p>C-statisitc estimated with the present dataset
</p>
</td></tr>
</table>

<hr>
<h2 id='unoU2P'>A child function used in Inf.Cval and Inf.Cval.Delta
</h2><span id='topic+unoU2P'></span>

<h3>Description</h3>

<p>This is a child function (R-wrapper) used in the main functions of this package. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unoU2P(A, B)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unoU2P_+3A_a">A</code></td>
<td>
<p>A nxp matrix
</p>
</td></tr>
<tr><td><code id="unoU2P_+3A_b">B</code></td>
<td>
<p>A nx1 vector
</p>
</td></tr>
</table>

<hr>
<h2 id='VEC2MAT'>Vector to Matrix
</h2><span id='topic+VEC2MAT'></span>

<h3>Description</h3>

<p>Making a (PxM) matrix (x',x',x',...,x') from a (Px1) vector, x
</p>


<h3>Usage</h3>

<pre><code class='language-R'>VEC2MAT(vc, dm)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="VEC2MAT_+3A_vc">vc</code></td>
<td>
<p>A vector 
</p>
</td></tr>
<tr><td><code id="VEC2MAT_+3A_dm">dm</code></td>
<td>
<p>The number of row of the matrix returned 
</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
