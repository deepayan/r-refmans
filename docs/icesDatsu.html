<!DOCTYPE html><html lang="en"><head><title>Help for package icesDatsu</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {icesDatsu}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#datsu_api'><p>Build a DATSU web service url</p></a></li>
<li><a href='#getDataFieldsDescription'><p>get list of datasets</p></a></li>
<li><a href='#getDataverIDs'><p>get list of datasets</p></a></li>
<li><a href='#getListQCChecks'><p>get list of datasets</p></a></li>
<li><a href='#getMySessionsList'><p>get screening session list for a user</p></a></li>
<li><a href='#getRecordIDs'><p>get list of records for a dataset</p></a></li>
<li><a href='#getScreeningSessionDetails'><p>get screening session details</p></a></li>
<li><a href='#getScreeningSessionMessages'><p>get screening session messages</p></a></li>
<li><a href='#getScreeningSessionsList'><p>get screening session list</p></a></li>
<li><a href='#uploadDatsuFileFireAndForget'><p>get list of records for a dataset</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>1.2.0</td>
</tr>
<tr>
<td>Title:</td>
<td>Functions to Interact with the ICES Data Submission Utility
(DATSU)</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions to Interact with the ICES Data Submission Utility (DATSU)
  <a href="https://datsu.ices.dk/web/index.aspx">https://datsu.ices.dk/web/index.aspx</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>Imports:</td>
<td>icesConnect (&ge; 1.0.0), httr, jsonlite</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://datsu.ices.dk/web/index.aspx">https://datsu.ices.dk/web/index.aspx</a>,
<a href="https://github.com/ices-tools-prod/icesDatsu">https://github.com/ices-tools-prod/icesDatsu</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ices-tools-prod/icesDatsu/issues">https://github.com/ices-tools-prod/icesDatsu/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-24 12:51:30 UTC; colin</td>
</tr>
<tr>
<td>Author:</td>
<td>Colin Millar [aut, cre],
  Carlos Pinto [aut],
  Laura Andreea Petre [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Colin Millar &lt;colin.millar@ices.dk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-24 22:40:01 UTC</td>
</tr>
</table>
<hr>
<h2 id='datsu_api'>Build a DATSU web service url</h2><span id='topic+datsu_api'></span>

<h3>Description</h3>

<p>utility to build a url with optional query arguments
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datsu_api(service, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="datsu_api_+3A_service">service</code></td>
<td>
<p>the name of the service</p>
</td></tr>
<tr><td><code id="datsu_api_+3A_...">...</code></td>
<td>
<p>name arguments will be added as queries</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a complete url as a character string
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
datsu_api("hi", bye = 21)
datsu_api("getDataverIDs")

</code></pre>

<hr>
<h2 id='getDataFieldsDescription'>get list of datasets</h2><span id='topic+getDataFieldsDescription'></span>

<h3>Description</h3>

<p>A list of the available fields for the specified format and record (optional filter).
in this list it is specified the field type, if it is mandatory and if it is linked with any
vocabulary.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDataFieldsDescription(datasetverID, recordType = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getDataFieldsDescription_+3A_datasetverid">datasetverID</code></td>
<td>
<p>the dataset ID</p>
</td></tr>
<tr><td><code id="getDataFieldsDescription_+3A_recordtype">recordType</code></td>
<td>
<p>string name of the record type, optional</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of the supported records and fields.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
getDataFieldsDescription(145)
getDataFieldsDescription(145, "VE")

## End(Not run)
</code></pre>

<hr>
<h2 id='getDataverIDs'>get list of datasets</h2><span id='topic+getDataverIDs'></span>

<h3>Description</h3>

<p>This API allows the user to have a list of all the datasets IDs that can be screened in the DATSU API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDataverIDs()
</code></pre>


<h3>Value</h3>

<p>The list of Datasets that can be screened in DATSU with the IDs
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
formats &lt;- getDataverIDs()
formats[grep("vms", tolower(formats$description)), ]

## End(Not run)
</code></pre>

<hr>
<h2 id='getListQCChecks'>get list of datasets</h2><span id='topic+getListQCChecks'></span>

<h3>Description</h3>

<p>This API allows the user to have a list of all the datasets IDs that can be screened in the DATSU API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getListQCChecks(datasetverID, recordType = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getListQCChecks_+3A_datasetverid">datasetverID</code></td>
<td>
<p>the dataset ID</p>
</td></tr>
<tr><td><code id="getListQCChecks_+3A_recordtype">recordType</code></td>
<td>
<p>string name of the record type, optional</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The list of Datasets that can be screened in DATSU with the IDs
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
getListQCChecks(145)
getListQCChecks(145, "VE")

## End(Not run)
</code></pre>

<hr>
<h2 id='getMySessionsList'>get screening session list for a user</h2><span id='topic+getMySessionsList'></span>

<h3>Description</h3>

<p>This API of the web service returns a list of the sessions for the authenticated user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getMySessionsList()
</code></pre>


<h3>Value</h3>

<p>The details of the users sessions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
getMySessionsList()

## End(Not run)
</code></pre>

<hr>
<h2 id='getRecordIDs'>get list of records for a dataset</h2><span id='topic+getRecordIDs'></span>

<h3>Description</h3>

<p>A list of the available records for the specified format
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getRecordIDs(datasetverID)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getRecordIDs_+3A_datasetverid">datasetverID</code></td>
<td>
<p>the dataset ID</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of the supported records for the specified records
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
getRecordIDs(145)

## End(Not run)
</code></pre>

<hr>
<h2 id='getScreeningSessionDetails'>get screening session details</h2><span id='topic+getScreeningSessionDetails'></span>

<h3>Description</h3>

<p>This API allows the user to view the details of a specific session.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getScreeningSessionDetails(sessionID)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getScreeningSessionDetails_+3A_sessionid">sessionID</code></td>
<td>
<p>the session ID</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Details of the session
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
getScreeningSessionDetails(10)

## End(Not run)
</code></pre>

<hr>
<h2 id='getScreeningSessionMessages'>get screening session messages</h2><span id='topic+getScreeningSessionMessages'></span>

<h3>Description</h3>

<p>A list of the messages for the specified session ID
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getScreeningSessionMessages(sessionID)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getScreeningSessionMessages_+3A_sessionid">sessionID</code></td>
<td>
<p>the session ID</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of the messages for the specified session
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
messages &lt;- getScreeningSessionMessages(10)

## End(Not run)
</code></pre>

<hr>
<h2 id='getScreeningSessionsList'>get screening session list</h2><span id='topic+getScreeningSessionsList'></span>

<h3>Description</h3>

<p>This API allows the user to screen a file using the API
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getScreeningSessionsList(dataSetVerID, year = NULL, country = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getScreeningSessionsList_+3A_datasetverid">dataSetVerID</code></td>
<td>
<p>the dataset version id</p>
</td></tr>
<tr><td><code id="getScreeningSessionsList_+3A_year">year</code></td>
<td>
<p>filter by year, optional</p>
</td></tr>
<tr><td><code id="getScreeningSessionsList_+3A_country">country</code></td>
<td>
<p>filter by country, optional</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The details of the sessions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
getScreeningSessionsList(145)
getScreeningSessionsList(145, year = 2020)

## End(Not run)
</code></pre>

<hr>
<h2 id='uploadDatsuFileFireAndForget'>get list of records for a dataset</h2><span id='topic+uploadDatsuFileFireAndForget'></span>

<h3>Description</h3>

<p>This API allows the user to screen a file using the API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>uploadDatsuFileFireAndForget(
  fileToUpload,
  dataSetVerID,
  emailAddress = NULL,
  sendEmail = TRUE,
  errorLimit = 30000,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="uploadDatsuFileFireAndForget_+3A_filetoupload">fileToUpload</code></td>
<td>
<p>the filename of the file to upload</p>
</td></tr>
<tr><td><code id="uploadDatsuFileFireAndForget_+3A_datasetverid">dataSetVerID</code></td>
<td>
<p>The version of the dataset</p>
</td></tr>
<tr><td><code id="uploadDatsuFileFireAndForget_+3A_emailaddress">emailAddress</code></td>
<td>
<p>alternative email address of the user, if NULL, email address from ICES token
is used</p>
</td></tr>
<tr><td><code id="uploadDatsuFileFireAndForget_+3A_sendemail">sendEmail</code></td>
<td>
<p>it is set to TRUE by default, this will specify if the user will to receive an
email when the session is finished</p>
</td></tr>
<tr><td><code id="uploadDatsuFileFireAndForget_+3A_errorlimit">errorLimit</code></td>
<td>
<p>does not need to be specified, it is 30000 by default</p>
</td></tr>
<tr><td><code id="uploadDatsuFileFireAndForget_+3A_verbose">verbose</code></td>
<td>
<p>get verbose output from the POST request, default FALSE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The ID of the DATSU session
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
filename &lt;- system.file("test_files/vms_test.csv", package = "icesDatsu")
id &lt;- uploadDatsuFileFireAndForget(filename, 145)
getScreeningSessionDetails(id)
messages &lt;- getScreeningSessionMessages(id)
head(messages)

uploadDatsuFileFireAndForget(filename, 145, sendEmail = FALSE)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
