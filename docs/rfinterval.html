<!DOCTYPE html><html><head><title>Help for package rfinterval</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rfinterval}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#BeijingPM25'><p>Beijing PM2.5 Air Pollution Data</p></a></li>
<li><a href='#rfinterval'><p>Prediction Intervals for Random forests</p></a></li>
<li><a href='#sim_data'><p>Simulate data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Predictive Inference for Random Forests</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2019-07-14</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Haozhe Zhang &lt;haozhe.stat@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>An integrated package for constructing random forest prediction intervals using a fast implementation package 'ranger'. This package can apply the following three methods described in Haozhe Zhang, Joshua Zimmerman, Dan Nettleton, and Daniel J. Nordman (2019) &lt;<a href="https://doi.org/10.1080%2F00031305.2019.1585288">doi:10.1080/00031305.2019.1585288</a>&gt;: the out-of-bag prediction interval, the split conformal method, and the quantile regression forest.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>ranger, MASS</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://github.com/haozhestat/rfinterval">http://github.com/haozhestat/rfinterval</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="http://github.com/haozhestat/rfinterval/issues">http://github.com/haozhestat/rfinterval/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.1</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-07-18 16:15:17 UTC; haozhe</td>
</tr>
<tr>
<td>Author:</td>
<td>Haozhe Zhang <a href="https://orcid.org/0000-0002-7771-4808"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-07-18 16:40:04 UTC</td>
</tr>
</table>
<hr>
<h2 id='BeijingPM25'>Beijing PM2.5 Air Pollution Data</h2><span id='topic+BeijingPM25'></span>

<h3>Description</h3>

<p>This hourly data set contains the PM2.5 data of US Embassy in Beijing. Meanwhile, meteorological data from Beijing Capital International Airport are also included.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>BeijingPM25
</code></pre>


<h3>Format</h3>

<p>A data frame with 8661 rows and 11 variables:
</p>

<dl>
<dt>pm2.5</dt><dd><p>PM2.5 concentration (ug/m^3) </p>
</dd>
<dt>month</dt><dd><p>month of observation</p>
</dd>
<dt>day</dt><dd><p>day of observation</p>
</dd>
<dt>hour</dt><dd><p>hour of observation</p>
</dd>
<dt>DEWP</dt><dd><p>dew point</p>
</dd>
<dt>TEMP</dt><dd><p>temperature</p>
</dd>
<dt>PRES</dt><dd><p>air pressure</p>
</dd>
<dt>cbwd</dt><dd><p>combined wind direction</p>
</dd>
<dt>Iws</dt><dd><p>cumulated wind speed</p>
</dd>
<dt>Is</dt><dd><p>cumulated hours of snow</p>
</dd>
<dt>Ir</dt><dd><p>cumulated hours of rain</p>
</dd>
</dl>


<h3>Source</h3>

<p>Liang, X., Zou, T., Guo, B., Li, S., Zhang, H., Zhang, S., Huang, H. and Chen, S. X. (2015). Assessing Beijing's PM2.5 pollution: severity, weather impact, APEC and winter heating. Proceedings of the Royal Society A, 471, 20150257.
</p>

<hr>
<h2 id='rfinterval'>Prediction Intervals for Random forests</h2><span id='topic+rfinterval'></span>

<h3>Description</h3>

<p>The <code>rfinterval</code> constructs prediction intervals for random forest predictions using a fast implementation package 'ranger'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rfinterval(formula = NULL, train_data = NULL, test_data = NULL,
  method = c("oob", "split-conformal", "quantreg"), alpha = 0.1,
  symmetry = TRUE, seed = NULL, params_ranger = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rfinterval_+3A_formula">formula</code></td>
<td>
<p>Object of class <code>formula</code> or character describing the model to fit. Interaction terms supported only for numerical variables.</p>
</td></tr>
<tr><td><code id="rfinterval_+3A_train_data">train_data</code></td>
<td>
<p>Training data of class data.frame, matrix, or dgCMatrix (Matrix).</p>
</td></tr>
<tr><td><code id="rfinterval_+3A_test_data">test_data</code></td>
<td>
<p>Test data of class data.frame, matrix, or dgCMatrix (Matrix).</p>
</td></tr>
<tr><td><code id="rfinterval_+3A_method">method</code></td>
<td>
<p>Method for constructing prediction interval. If method = &quot;oob&quot;, compute the out-of-bag prediction intervals; if method = &quot;split-conformal&quot;, compute the split conformal prediction interval; if method = &quot;quantreg&quot;, use quantile regression forest to compute prediction intervals.</p>
</td></tr>
<tr><td><code id="rfinterval_+3A_alpha">alpha</code></td>
<td>
<p>Confidence level. alpha = 0.05 for the 95% prediction interval.</p>
</td></tr>
<tr><td><code id="rfinterval_+3A_symmetry">symmetry</code></td>
<td>
<p>True if constructing symmetric out-of-bag prediction intervals, False otherwise. Only for method = &quot;oob&quot;</p>
</td></tr>
<tr><td><code id="rfinterval_+3A_seed">seed</code></td>
<td>
<p>Seed (only for method = &quot;split-conformal&quot;)</p>
</td></tr>
<tr><td><code id="rfinterval_+3A_params_ranger">params_ranger</code></td>
<td>
<p>List of further parameters that should be passed to ranger. See <code><a href="ranger.html#topic+ranger">ranger</a></code> for possible parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>oob_interval</code></td>
<td>
<p>Out-of-bag prediction intervals</p>
</td></tr>
<tr><td><code>sc_interval</code></td>
<td>
<p>Split-conformal prediction intervals</p>
</td></tr>
<tr><td><code>quantreg_interval</code></td>
<td>
<p>Quantile regression forest prediction intervals</p>
</td></tr>
<tr><td><code>alpha</code></td>
<td>
<p>Confidence level for prediction intervals</p>
</td></tr>
<tr><td><code>testPred</code></td>
<td>
<p>Random forest prediction for test set</p>
</td></tr>
<tr><td><code>train_data</code></td>
<td>
<p>Training data</p>
</td></tr>
<tr><td><code>test_data</code></td>
<td>
<p>Test data</p>
</td></tr>
</table>


<h3>References</h3>

<p>Haozhe Zhang, Joshua Zimmerman, Dan Nettleton, and Dan Nordman. (2019). &quot;Random Forest Prediction Intervals.&quot; The American Statistician. Doi: 10.1080/00031305.2019.1585288.
</p>
<p>Haozhe Zhang. (2019). &quot;Topics in Functional Data Analysis and Machine Learning Predictive Inference.&quot; Ph.D. Dissertations. Iowa State University Digital Repository. 17929.
</p>
<p>Lei, J., Max Gâ€™Sell, Alessandro Rinaldo, Ryan J. Tibshirani, and Larry Wasserman. &quot;Distribution-free predictive inference for regression.&quot; Journal of the American Statistical Association 113, no. 523 (2018): 1094-1111.
</p>
<p>Meinshausen, Nicolai. &quot;Quantile regression forests.&quot; Journal of Machine Learning Research 7 (2006): 983-999.
</p>
<p>Leo Breiman. (2001). Random Forests. Machine Learning 45(1), 5-32.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
train_data &lt;- sim_data(n = 500, p = 8)
test_data &lt;- sim_data(n = 500, p = 8)
output &lt;- rfinterval(y~., train_data = train_data, test_data = test_data,
                     method = c("oob", "split-conformal", "quantreg"),
                     symmetry = TRUE,alpha = 0.1)
y &lt;- test_data$y
mean(output$oob_interval$lo &lt; y &amp; output$oob_interval$up &gt; y)
mean(output$sc_interval$lo &lt; y &amp; output$sc_interval$up &gt; y)
mean(output$quantreg_interval$lo &lt; y &amp; output$quantreg_interval$up &gt; y)

</code></pre>

<hr>
<h2 id='sim_data'>Simulate data</h2><span id='topic+sim_data'></span>

<h3>Description</h3>

<p>Simulate data for illustrate the performance of prediction intervals for random forests
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim_data(n = 500, p = 10, rho = 0.6, predictor_dist = "correlated",
  mean_function = "nonlinear-interaction",
  error_dist = "homoscedastic")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sim_data_+3A_n">n</code></td>
<td>
<p>Sample size</p>
</td></tr>
<tr><td><code id="sim_data_+3A_p">p</code></td>
<td>
<p>Number of features</p>
</td></tr>
<tr><td><code id="sim_data_+3A_rho">rho</code></td>
<td>
<p>Correlation between predictors</p>
</td></tr>
<tr><td><code id="sim_data_+3A_predictor_dist">predictor_dist</code></td>
<td>
<p>Distribution of predictor: &quot;uncorrelated&quot;, and &quot;correlated&quot;</p>
</td></tr>
<tr><td><code id="sim_data_+3A_mean_function">mean_function</code></td>
<td>
<p>Mean function: &quot;linear&quot;, &quot;nonlinear&quot;, and &quot;nonlinear-interaction&quot;</p>
</td></tr>
<tr><td><code id="sim_data_+3A_error_dist">error_dist</code></td>
<td>
<p>Distribution of error: &quot;homoscedastic&quot;, &quot;heteroscedastic&quot;, and &quot;heavy-tailed&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame of simulated data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
train_data &lt;- sim_data(n = 500, p = 10)
test_data &lt;- sim_data(n = 500, p = 10)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
